(()=>{"use strict";const COC7={eras:{standard:"CoC7.Era1920",modern:"CoC7.EraModern",modernPulp:"CoC7.EraModernPulp",pulp:"CoC7.EraPulp",downDarkerTrails:"CoC7.EraDownDarkerTrails",downDarkerTrailsPulp:"CoC7.EraDownDarkerTrailsPulp",darkAges:"CoC7.EraDarkAges",darkAgesPulp:"CoC7.EraDarkAgesPulp",regency:"CoC7.EraRegency",regencyPulp:"CoC7.EraRegencyPulp",gasLight:"CoC7.EraGasLight",invictus:"CoC7.EraInvictus"},monetaryFormatKeys:{decimalLeft:"decimalLeft",decimalRight:"decimalRight",integerLeft:"integerLeft",integerRight:"integerRight",lsd:"lsd",roman:"roman"},monetaryFormats:{decimalLeft:"CoC7.MonetaryFormatDecimalLeft",decimalRight:"CoC7.MonetaryFormatDecimalRight",integerLeft:"CoC7.MonetaryFormatIntegerLeft",integerRight:"CoC7.MonetaryFormatIntegerRight",lsd:"CoC7.MonetaryFormatLsd",roman:"CoC7.MonetaryFormatRoman"},monetaryTypeKeys:{none:"none",asses:"asses",sestertii:"sestertii",quinarii:"quinarii",denarii:"denarii",d:"d",s:"s",value:"value",multiplier:"multiplier"},monetaryTypes:{none:{name:"CoC7.MonetaryTypeNone",filter:[]},asses:{name:"CoC7.MonetaryTypeAsses",filter:["roman"]},sestertii:{name:"CoC7.MonetaryTypeSestertii",filter:["roman"]},quinarii:{name:"CoC7.MonetaryTypeQuinarii",filter:["roman"]},denarii:{name:"CoC7.MonetaryTypeDenarii",filter:["roman"]},d:{name:"CoC7.MonetaryTypeDeniers",filter:["lsd"]},s:{name:"CoC7.MonetaryTypeSous",filter:["lsd"]},value:{name:"CoC7.MonetaryTypeOne",filter:[]},multiplier:{name:"CoC7.MonetaryTypeCreditRating",filter:[]}},characteristics:{str:"CoC7.CharacStr",con:"CoC7.CharacCon",siz:"CoC7.CharacSiz",dex:"CoC7.CharacDex",app:"CoC7.CharacApp",int:"CoC7.CharacInt",pow:"CoC7.CharacPow",edu:"CoC7.CharacEdu"},skillProperties:{noadjustments:"CoC7.SkillNoAdjustments",noxpgain:"CoC7.SkillNoXpGain",special:"CoC7.SkillSpecial",rarity:"CoC7.SkillRarity",push:"CoC7.SkillPush",combat:"CoC7.SkillCombat",fighting:"CoC7.SkillFighting",firearm:"CoC7.SkillFirearm",requiresname:"CoC7.SkillRequiresName",keepbasevalue:"CoC7.SkillKeepBaseValue",picknameonly:"CoC7.SkillPickNameOnly",onlyone:"CoC7.SkillSpecializationIsUnique"},weaponProperties:{melee:"CoC7.Weapon.Property.Melee",rngd:"CoC7.WeaponRngd",mnvr:"CoC7.WeaponProperyManeuver",thrown:"CoC7.Weapon.Property.Thrown",shotgun:"CoC7.Weapon.Property.Shotgun",dbrl:"CoC7.WeaponDbrl",impl:"CoC7.WeaponImpl",brst:"CoC7.WeaponBrst",auto:"CoC7.WeaponAuto",ahdb:"CoC7.WeaponAhdb",addb:"CoC7.WeaponAddb",slnt:"CoC7.WeaponSlnt",spcl:"CoC7.WeaponSpcl",mont:"CoC7.WeaponMont",blst:"CoC7.WeaponBlst",stun:"CoC7.WeaponStun",rare:"CoC7.WeaponRare",burn:"CoC7.Weapon.Property.Burn"},spellProperties:{call:"CoC7.CallSpell",dismiss:"CoC7.DismissSpell",contact:"CoC7.ContactSpell",summon:"CoC7.SummonSpell",bind:"CoC7.BindSpell",enchantment:"CoC7.EnchantmentSpell",gate:"CoC7.GateSpell",combat:"CoC7.CombatSpell"},bookType:{mythos:"CoC7.MythosBook",occult:"CoC7.OccultBook",other:"CoC7.Other"},talentType:{physical:"CoC7.PhysicalTalent",mental:"CoC7.MentalTalent",combat:"CoC7.CombatTalent",miscellaneous:"CoC7.MiscellaneousTalent",basic:"CoC7.BasicTalent",insane:"CoC7.InsaneTalent",other:"CoC7.OtherTalent"},statusType:{mania:"CoC7.Mania",phobia:"CoC7.Phobia"},occupationProperties:{classic:"CoC7.Classic",lovecraftian:"CoC7.Lovecraftian",modern:"CoC7.Modern",pulp:"CoC7.Pulp"},formula:{}};COC7.formula.actor={"@STR":"this.system.characteristics.str.value","@CON":"this.system.characteristics.con.value","@SIZ":"this.system.characteristics.siz.value","@DEX":"this.system.characteristics.dex.value","@APP":"this.system.characteristics.app.value","@INT":"this.system.characteristics.int.value","@POW":"this.system.characteristics.pow.value","@EDU":"this.system.characteristics.edu.value"},COC7.formula.actorsheet={"@STR":"this.actor.system.characteristics.str.value","@CON":"this.actor.system.characteristics.con.value","@SIZ":"this.actor.system.characteristics.siz.value","@DEX":"this.actor.system.characteristics.dex.value","@APP":"this.actor.system.characteristics.app.value","@INT":"this.actor.system.characteristics.int.value","@POW":"this.actor.system.characteristics.pow.value","@EDU":"this.actor.system.characteristics.edu.value"},COC7.status={tempoInsane:"tempoInsane",indefInsane:"indefInsane",unconscious:"unconscious",criticalWounds:"criticalWounds",dying:"dying",prone:"prone",dead:"dead"},COC7.newBookName="CoC7.NewBookName",COC7.newSkillName="CoC7.NewSkillName",COC7.newSpellName="CoC7.NewSpellName",COC7.newItemName="CoC7.NewItemName",COC7.newWeaponName="CoC7.NewWeaponName",COC7.creatureFightingSkill="CoC7.creatureFightingSkill",COC7.fightingSpecializationName="CoC7.FightingSpecializationName",COC7.firearmSpecializationName="CoC7.FirearmSpecializationName",COC7.combatCards={fightBack:"CoC7.FightBack",dodge:"CoC7.Dodge",maneuver:"CoC7.Maneuver",noResponse:"CoC7.NoResponse"};class CoC7ActiveEffect extends ActiveEffect{apply(actor,change){"system.attribs.armor.value"===change.key?isNaN(change.value)||isNaN(actor.system.attribs.armor.value)||(actor.system.attribs.armor.value=Number(actor.system.attribs.armor.value)):"system.attribs.db.value"===change.key&&isNaN(change.value)&&!isNaN(actor.system.attribs.db.value)&&(actor.system.attribs.db.value=String(actor.system.attribs.db.value));return super.apply(actor,change)}static onManageActiveEffect(event,owner){event.preventDefault();const a=event.currentTarget,li=a.closest("li"),effect=li.dataset.effectId?owner.effects.get(li.dataset.effectId):null;switch(a.dataset.action){case"create":return owner.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",origin:owner.uuid,"duration.rounds":"temporary"===li.dataset.effectType?1:void 0,disabled:"inactive"===li.dataset.effectType}]);case"edit":return effect.sheet.render(!0);case"delete":return effect.delete();case"toggle":return effect.update({disabled:!effect.disabled})}}_prepareDuration(){const duration=super._prepareDuration();return"seconds"===duration.type&&(duration.seconds>3600?duration.label=new Date(1e3*duration.seconds).toISOString().slice(11,19):duration.seconds>100&&(duration.label=new Date(1e3*duration.seconds).toISOString().slice(14,19))),duration}static filterActiveEffects(effect,conditionName){return foundry.utils.isNewerVersion(game.version,"11")?effect.statuses.has(conditionName):effect.flags.core?.statusId===conditionName}static getStatusKey(effect){let options=[];return foundry.utils.isNewerVersion(game.version,"11")?effect.statuses.size>0&&(options=[...effect.statuses.values()]):options=[effect.getFlag("core","statusId")],options.find((v=>Object.prototype.hasOwnProperty.call(COC7.status,v)))}get isStatus(){return"string"==typeof CoC7ActiveEffect.getStatusKey(this)}static prepareActiveEffectCategories(effects,{status=!0}={}){const categories={temporary:{type:"temporary",label:game.i18n.localize("Temporary"),effects:[]},passive:{type:"passive",label:game.i18n.localize("Passive"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]},suppressed:{type:"suppressed",label:game.i18n.localize("Suppressed"),effects:[],info:[game.i18n.localize("Unavailable")]}};status&&(categories.status={type:"status",label:game.i18n.localize("Status"),effects:[]});for(const e of effects)e.isSuppressed?categories.suppressed.effects.push(e):e.isStatus?categories.status.effects.push(e):e.disabled?categories.inactive.effects.push(e):e.isTemporary?categories.temporary.effects.push(e):categories.passive.effects.push(e);return categories.suppressed.hidden=!categories.suppressed.effects.length,categories}static prepareNPCActiveEffectCategories(effects){let count=0;const categories={active:{type:"active",label:game.i18n.localize("Active"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]}};for(const e of effects)count+=1,e._getSourceName(),e.isSuppressed||e.disabled?categories.inactive.effects.push(e):categories.active.effects.push(e);return count>0&&(categories.expended=!0),categories}}class CoC7Dice{static async roll(modif=0,rollMode=null,hideDice=!1){let roll,alternativeDice="";game.modules.get("dice-so-nice")?.active&&(modif<0?alternativeDice=game.settings.get("CoC7","tenDiePenalty"):modif>0&&(alternativeDice=game.settings.get("CoC7","tenDieBonus"))),roll=game.CoC7.dev.dice.alwaysCrit&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.crit01):game.CoC7.dev.dice.alwaysFumble&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.fumble99):await new Roll("1dt"+(""!==alternativeDice?"+1do["+alternativeDice+"]":"+1dt").repeat(Math.abs(modif))+"+1d10").roll({async:!0});const result={unit:{total:0,results:[]},tens:{total:0,results:[]},total:0,roll};rollMode&&(result.rollMode=rollMode),hideDice&&(result.hideDice=hideDice);for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?result.tens.results.push(d.total):(result.unit.total=10===d.total?0:d.total,result.unit.results.push(result.unit.total));if(modif<0)result.tens.total=0===result.unit.total&&result.tens.results.includes(0)?100:Math.max(...result.tens.results);else if(0===result.unit.total){const dice=result.tens.results.filter((t=>t>0));result.tens.total=0===dice.length?100:Math.min(...dice)}else result.tens.total=Math.min(...result.tens.results);return result.total=result.unit.total+result.tens.total,result}static async showRollDice3d(roll){if(game.modules.get("dice-so-nice")?.active){const syncDice=game.settings.get("CoC7","syncDice3d"),chatData={whisper:null,blind:!1};ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode")),await game.dice3d.showForRoll(roll,game.user,syncDice,chatData.whisper,chatData.blind)}}static async combinedRoll(options){options.pool=options.pool??{},options.pool[0]=!1;const keys=Object.keys(options.pool).map((v=>parseInt(v,10)));let penaltyDice=Math.abs(Math.min(0,Math.min(...keys))),bonusDice=Math.max(0,Math.max(...keys));const hasDSN=game.modules.get("dice-so-nice")?.active,pool=[];pool.push("1dt+1d10"),penaltyDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDiePenalty")+"]":"1dt").repeat(Math.abs(penaltyDice))),bonusDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDieBonus")+"]":"1dt").repeat(Math.abs(bonusDice)));const roll=await new Roll(pool.join("")).roll({async:!0}),result={groups:{baseDie:0,penaltyDice:[],bonusDice:[]},unit:0,roll};let baseSet=!1;for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?baseSet?penaltyDice>0?(result.groups.penaltyDice.push(d.total),penaltyDice--):(result.groups.bonusDice.push(d.total),bonusDice--):(result.groups.baseDie=d.total,baseSet=!0):result.unit=10===d.total?0:d.total;const output={};for(const key in options.pool){output[key]={unit:{total:result.unit,results:[result.unit]},tens:{total:0,results:[]},total:0,roll};const modif=parseInt(key,10);let modifier=modif;output[key].tens.results.push(result.groups.baseDie);for(const offset=Math.abs(modifier);modifier<0;modifier++)output[key].tens.results.push(result.groups.penaltyDice[modifier+offset]);for(const offset=modifier;modifier>0;modifier--)output[key].tens.results.push(result.groups.bonusDice[Math.abs(modifier-offset)]);if(modif<0)output[key].tens.total=0===output[key].unit.total&&output[key].tens.results.includes(0)?100:Math.max(...output[key].tens.results);else if(0===output[key].unit.total){const dice=output[key].tens.results.filter((t=>t>0));output[key].tens.total=0===dice.length?100:Math.min(...dice)}else output[key].tens.total=Math.min(...output[key].tens.results);output[key].total=output[key].unit.total+output[key].tens.total}return output}static fumble99={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]}],total:99,evaluated:!0};static crit01={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:10,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:1,active:!0}]}],total:1,evaluated:!0}}class CoC7Item extends Item{constructor(data,context){if(data.type in CONFIG.Item.documentClasses&&!context?.extended)return new CONFIG.Item.documentClasses[data.type](data,{extended:!0,...context});void 0===data.img&&("skill"===data.type?data.img="systems/CoC7/assets/icons/skills.svg":"status"===data.type?data.img="icons/svg/aura.svg":"weapon"===data.type&&(data.img="icons/svg/sword.svg")),super(data,context)}async _createDocumentLink(eventData,{relativeTo,label}={}){if("string"==typeof eventData.type&&"string"==typeof eventData.uuid&&"Item"===eventData.type&&eventData.uuid.match(/^Actor\./)&&relativeTo instanceof CONFIG.JournalEntryPage.documentClass){const item=await fromUuid(eventData.uuid);if(["skill","weapon"].includes(item.type))return"@coc7.check[type:"+item.type+",name:"+item.name+"]"}return super._createDocumentLink(eventData,{relativeTo,label})}static get iconLanguage(){return"systems/CoC7/assets/icons/skills/language.svg"}static get flags(){return{malfunction:"malfc"}}async toggleProperty(propertyId,override=!1){let fighting,firearms,checkedProps={};if(void 0!==COC7.eras[propertyId])return CoCIDEditor.eraToggle(this,propertyId);if("weapon"!==this.type||override){if("skill"===this.type&&!override){let modif=!1;if("combat"===propertyId&&(this.system.properties.combat?checkedProps={"system.properties.combat":!1,"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.specialization":"",name:this.system.skillName}:this.system.properties.firearm?firearms=!0:fighting=!0,modif=!0),"fighting"===propertyId&&(this.system.properties.fighting?(firearms=!0,fighting=!1):(firearms=!1,fighting=!0),modif=!0),"firearm"===propertyId&&(this.system.properties.firearm?(firearms=!1,fighting=!0):(firearms=!0,fighting=!1),modif=!0),modif){if(fighting){checkedProps={"system.properties.fighting":!0,"system.properties.firearm":!1,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.fightingSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}if(firearms){checkedProps={"system.properties.fighting":!1,"system.properties.firearm":!0,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.firearmSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}}}}else if("ahdb"===propertyId&&(checkedProps=this.system.properties.ahdb?{"system.properties.ahdb":!1}:{"system.properties.ahdb":!0,"system.properties.addb":!1}),"addb"===propertyId&&(checkedProps=this.system.properties.addb?{"system.properties.addb":!1}:{"system.properties.addb":!0,"system.properties.ahdb":!1}),"shotgun"===propertyId&&(checkedProps=this.system.properties.shotgun?{"system.properties.shotgun":!1,"system.range.extreme.value":null,"system.range.extreme.damage":null,"system.range.long.value":null,"system.range.long.damage":null}:{"system.properties.rngd":!0,"system.properties.melee":!1,"system.properties.shotgun":!0}),"melee"===propertyId||"rngd"===propertyId){let meleeWeapon;"melee"!==propertyId||this.system.properties.melee||(meleeWeapon=!0),"melee"===propertyId&&this.system.properties.melee&&(meleeWeapon=!1),"rngd"!==propertyId||this.system.properties.rngd||(meleeWeapon=!1),"rngd"===propertyId&&this.system.properties.rngd&&(meleeWeapon=!0),checkedProps=meleeWeapon?{"system.properties.melee":!0,"system.properties.rngd":!1,"system.properties.shotgun":!1,"system.properties.brst":!1,"system.properties.auto":!1,"system.properties.dbrl":!1}:{"system.properties.melee":!1,"system.properties.rngd":!0}}if("special"===propertyId&&(checkedProps=this.system.properties[propertyId]?{"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.combat":!1,"system.specialization":"",name:this.system.skillName}:{"system.properties.special":!0,name:this.system.specialization+" ("+this.system.skillName+")"}),Object.keys(checkedProps).length>0){return await this.update(checkedProps)}{const propName=`system.properties.${propertyId}`,propValue=!this.system.properties[propertyId];await this.update({[propName]:propValue}).then((item=>item))}}hasProperty(propertyId){return this.isIncludedInSet("properties",propertyId)}get shortName(){return this.system.properties.special?this.system.skillName:this.name}async updateRoll(roll){return"updateRoll"in this.sheet?await this.sheet.updateRoll(roll):"updateRoll"in this?await this.updateRoll(roll):void 0}static getNamePartsSpec(skillName,specialization){if(!specialization)return{name:skillName,specialization:"",skillName};const specNameRegex=new RegExp("^("+CoC7Utilities.quoteRegExp(specialization)+")\\s*\\((.+)\\)$","i"),match=skillName.match(specNameRegex);return match&&(specialization=match[1],skillName=match[2]),{name:specialization+" ("+skillName+")",specialization,skillName}}static getNameWithoutSpec(item){if(item instanceof CoC7Item){if(item.system?.properties?.special&&void 0!==item.system.skillName)return item.system.skillName}else if(item.properties?.special&&void 0!==item.skillName)return item.skillName;return item.name}static isAnySpec(item){return!("skill"!==item.type||!item.system.properties?.special)&&(!(!item.system.properties?.requiresname&&!item.system.properties?.picknameonly)||[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CONFIG.Item.documentClasses.skill.guessNameParts(item.name).skillName.toLowerCase()))}async checkSkillProperties(){if("skill"!==this.type)return;const checkedProps={};return this.system.properties.combat?(this.system.properties.special||(this.system.properties.special=!0,checkedProps["system.properties.special"]=!0),this.system.properties.fighting||this.system.properties.firearm||(this.system.properties.fighting=!0,checkedProps["system.properties.fighting"]=!0),!this.system.properties.fighting||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.fightingSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.fightingSpecializationName)),!this.system.properties.firearm||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.firearmSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.firearmSpecializationName))):(this.system.properties.fighting&&(this.system.properties.fighting=!1,checkedProps["system.properties.fighting"]=!1),this.system.properties.firearm&&(this.system.properties.firearm=!1,checkedProps["system.properties.firearm"]=!1)),Object.keys(checkedProps).length>0&&await this.update(checkedProps),checkedProps}isIncludedInSet(set,propertyId){this.system[set]||(this.system[set]=[]);return this.system[set].indexOf(propertyId)>-1}async flagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!0}))}async unflagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!1}))}get developementFlag(){return this.getItemFlag("developement")}async toggleItemFlag(flagName,eraseAdjustment=!0){const flagValue=!this.getItemFlag(flagName),name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||flagValue||!eraseAdjustment?"developement"===flagName?game.settings.get("CoC7","xpEnabled")||game.user.isGM?await this.update({[name]:flagValue}):ui.notifications.info(game.i18n.localize("CoC7.SkillXpGainDisabled")):await this.update({[name]:flagValue}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:flagValue})}async setItemFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetItemFlag(flagName,eraseAdjustment=!0){const name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||!eraseAdjustment?await this.update({[name]:!1}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:!1})}getItemFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}get usesAlternativeSkill(){return"weapon"===this.type&&(!0===this.system.properties?.auto||!0===this.system.properties?.brst||!0===this.system.properties?.thrown)}get maxUsesPerRound(){if("weapon"!==this.type)return null;const multiShot=parseInt(this.system.usesPerRound.max);return isNaN(multiShot)?0:multiShot}get usesPerRound(){if("weapon"!==this.type)return null;const singleShot=parseInt(this.system.usesPerRound.normal);return isNaN(singleShot)?0:singleShot}get usesPerRoundString(){let usesPerRound;return usesPerRound=this.system.usesPerRound.normal?this.system.usesPerRound.normal:"1",this.system.usesPerRound.max&&(usesPerRound+=`(${this.system.usesPerRound.max})`),this.system.properties.auto&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponAuto")}`),this.system.properties.brst&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponBrst")}`,this.system.usesPerRound.burst&&(usesPerRound+=`(${this.system.usesPerRound.burst})`)),usesPerRound}get multipleShots(){return"weapon"!==this.type?null:!(this.maxUsesPerRound<=1)}get singleShot(){return"weapon"!==this.type?null:!!this.usesPerRound}get baseRange(){return parseInt(this.system.range.normal.value)}get longRange(){return parseInt(this.system.range.long.value)}get extremeRange(){return parseInt(this.system.range.extreme.value)}get skillProperties(){if("skill"!==this.type)return[];const skillProperties=[];for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&skillProperties.push(game.i18n.localize(value));return skillProperties}static async calculateBase(actor,data){if("skill"!==data.type)return null;if(String(data.system.base).includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.actor.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(actor,value.substring(11)));let value;try{value=Math.floor(new Roll(data.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return value}return isNaN(parseInt(data.system.base))?null:parseInt(data.system.base)}get _base(){if("skill"!==this.type)return[null,!1];if("string"!=typeof this.system.base)return[this.system.base,!1];if(this.system.base.includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));let value;try{value=Math.floor(new Roll(this.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return[value,!0]}return[isNaN(parseInt(this.system.base))?null:parseInt(this.system.base),!1]}async asyncBase(){const e=this._base;return e[1]&&(console.info(`[COC7] (${this.parent?.name}) Evaluating skill ${this.name}:${this.system.base} to ${e[0]}`),await this.update({"system.base":e[0]})),e[0]}get base(){const e=this._base;return e[1]&&this.update({"system.base":e[0]}),e[0]}getBulletLeft(){return"weapon"!==this.type?null:this.system.ammo?this.system.ammo:(this.setBullets(0),0)}async reload(){if("weapon"!==this.type)return null;const maxBullet=this.system.bullets?parseInt(this.system.bullets):1;await this.setBullets(maxBullet)}async setBullets(bullets){if("weapon"!==this.type)return null;await this.update({"system.ammo":bullets||0})}async addBullet(){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft(),maxBullets=this.system.bullets?parseInt(this.system.bullets):1;bullets+1>=maxBullets?await this.setBullets(maxBullets):await this.setBullets(bullets+1)}async shootBullets(x){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft();x>bullets?await this.setBullets(0):await this.setBullets(bullets-x)}static mergeOptionalSkills(skillList,options){return skillList.concat(options).reduce(((newArray,item)=>!CoC7Item.isAnySpec(item)&&newArray.find((skill=>skill.name===item.name))?newArray:[...newArray,item]),[]).sort(CoC7Utilities.sortByNameKey)}static _getChatCardActor(card){const tokenKey=card.dataset.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}const actorId=card.dataset.actorId;return game.actors.get(actorId)||null}async getChatData(htmlOptions={}){htmlOptions.async=!0;const data=foundry.utils.duplicate(this.system);"string"==typeof data.description&&(data.description={value:data.description,special:""}),void 0===data.description.value&&(data.description.value=""),void 0===data.description.special&&(data.description.special="");const labels=[];data.description.value=await TextEditor.enrichHTML(data.description.value,htmlOptions),data.description.special=await TextEditor.enrichHTML(data.description.special,htmlOptions);const props=[],fn=this[`_${this.type}ChatData`];if(fn&&fn.bind(this)(data,labels,props,htmlOptions),"skill"===this.type)for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&props.push(value);return data.properties=props.filter((p=>!!p)),data.labels=labels,data}_weaponChatData(data,labels,props){for(const[key,value]of Object.entries(COC7.weaponProperties))!0===this.system.properties[key]&&props.push(value);let skillLabel=game.i18n.localize("CoC7.Skill"),skillName="",found=!1;if(this.system.skill.main.id){const skill=this.actor?.items.get(this.system.skill.main.id);skill&&(skillName+=CoC7Item.getNameWithoutSpec(skill),found=!0)}if(this.usesAlternativeSkill&&this.system.skill.alternativ.id){skillLabel=game.i18n.localize("CoC7.Skills");const skill=this.actor?.items.get(this.system.skill.alternativ.id);skill&&(skillName+=`/${CoC7Item.getNameWithoutSpec(skill)}`,found=!0)}found||(skillName=this.system.skill.main.name,this.usesAlternativeSkill&&this.system.skill.alternativ.name&&(skillName+=`/${this.system.skill.alternativ.name}`)),skillName&&labels.push({name:skillLabel,value:skillName}),labels.push({name:game.i18n.localize("CoC7.WeaponUsesPerRound"),value:this.usesPerRoundString}),labels.push({name:game.i18n.localize("CoC7.WeaponMalfunction"),value:this.system.malfunction?this.system.malfunction:"-"}),this.system.bullets&&labels.push({name:game.i18n.localize("CoC7.WeaponBulletsInMag"),value:this.system.bullets})}canBePushed(){return!("skill"!==this.type||!this.system.properties.push)}get impale(){return this.system.properties.impl}get isDodge(){return"skill"===this.type&&this.name.toLowerCase()===game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge").toLowerCase()}}function createInlineRoll(roll){const data={cls:["inline-roll"],dataset:{}};try{data.cls.push("inline-result"),data.result=roll.total,data.title=roll.formula,data.dataset.roll=escape(JSON.stringify(roll))}catch(err){return null}const a=document.createElement("a");a.classList.add(...data.cls),a.title=data.title;for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.innerHTML=`<i class="fas fa-dice-d20"></i> ${data.result}`,a}function isCtrlKey(event){return!1!==event&&(event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}class chatHelper{static hyphenToCamelCase(string){return string.replace(/-([a-z])/g,(function(string){return string[1].toUpperCase()}))}static async createMessage(title,message,options={}){const messageData={};messageData.flavor=title,messageData.speaker=options.speaker||ChatMessage.getSpeaker(),options.whisper&&(messageData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER,messageData.whisper=options.whisper),void 0!==options.roll&&(messageData.roll=options.roll,messageData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,messageData.rollMode=CONST.DICE_ROLL_MODES.SELF),messageData.user=game.user.id,messageData.content=message,ChatMessage.create(messageData).then((msg=>msg))}static camelCaseToHyphen(string){return string.replace(/([A-Z])/g,(function(string){return"-"+string.toLowerCase()}))}static getActorFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const token=chatHelper.getTokenFromKey(key);return token?.actor}return game.actors.get(key)||null}static getSpeakerFromKey(actorKey){const speaker={},actor=chatHelper.getActorFromKey(actorKey);if(actorKey.includes(".")){const[sceneId,tokenId]=actorKey.split(".");speaker.token=tokenId,speaker.scene=sceneId,actor.token?.name&&(speaker.alias=actor.token.name),speaker.actor=actor.id}else speaker.actor=actorKey,speaker.alias=actor.name;return speaker}static attachObjectToElement(object,element,objectName=""){for(const prop of Object.keys(object))prop.startsWith("_")||("object"==typeof object[prop]?chatHelper.attachObjectToElement(object[prop],element,`${objectName}:${prop}:`):element.dataset[`${objectName}${prop}`]=object[prop])}static getObjectFromElement(object,element){function deserialize(obj,key,value){if(key.startsWith(":")){const s=key.slice(1),objProp=s.slice(s.indexOf(":")+1),objName=s.substring(0,s.indexOf(":"));void 0===obj[objName]&&(obj[objName]={}),deserialize(obj[objName],objProp,value)}else"true"===value?obj[key]=!0:"false"===value?obj[key]=!1:Number(value).toString()===value?obj[key]=Number(value):obj[key]=value}if(element&&object)for(const prop of Object.keys(element.dataset)){if("template"===prop)return;deserialize(object,prop,element.dataset[prop])}}static getTokenFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=foundry.utils.duplicate(scene.document)),token}}{const actor=game.actors.get(key);return chatHelper.getActorToken(actor)}}static getActorToken(actor){return actor?actor.token||actor.prototypeToken:null}static getActorImgFromKey(actorKey){if(!actorKey)return null;if(game.settings.get("CoC7","useToken")){const token=chatHelper.getTokenFromKey(actorKey);if(token&&(token.document||token).texture.src&&-1===(token.document||token).texture.src.indexOf("*"))return(token.document||token).texture.src}const actor=chatHelper.getActorFromKey(actorKey);return game.settings.get("CoC7","useToken")&&actor.prototypeToken&&actor.prototypeToken.texture.src&&-1===actor.prototypeToken.texture.src?.indexOf("*")?actor.prototypeToken.texture.src:actor.img}static getDistance(startToken,endToken){if(void 0===endToken.center&&void 0!==endToken.id&&startToken.scene?.id){const scene=game.scenes.get(startToken.scene.id);if(void 0!==scene?.tokens){const tokens=scene?.tokens.filter((token=>token.actor.id===endToken.data.document.id)).map((token=>token.object));1===tokens.length&&(endToken=tokens[0])}}let distance={gridUnit:0,value:0,unit:canvas.scene.grid.units};if(void 0!==startToken&&void 0!==startToken.center&&void 0!==endToken&&void 0!==endToken.center){const ray=new Ray(startToken.center,endToken.center),segment=[{ray}];if(distance={gridUnit:ray.distance/canvas.scene.grid.size,value:canvas.grid.measureDistances(segment,{gridSpaces:game.settings.get("CoC7","gridSpaces")})[0],unit:canvas.scene.grid.units},game.settings.get("CoC7","distanceElevation")){const elevation=Math.abs((startToken.document.elevation||0)-(endToken.document.elevation||0));distance.value=Math.sqrt(distance.value*distance.value+elevation*elevation)}}else game.settings.get("CoC7","distanceTheatreOfTheMind")||ui.notifications.warn(game.i18n.localize("CoC7.MessageDistanceCalculationFailure"));return distance}static toYards(distance){return"ft"===distance.unit?distance.value/3:distance.value}}class CoC7Roll{static getFromCard(card){const rollDiv=card.querySelector("div.dice-roll");if(!rollDiv)return null;const roll=new CoC7Roll;return chatHelper.getObjectFromElement(roll,rollDiv),roll}get resultType(){switch(this.successLevel=parseInt(this.successLevel),this.successLevel){case CoC7Check.successLevel.regular:return game.i18n.format("CoC7.RegularSuccess");case CoC7Check.successLevel.hard:return game.i18n.format("CoC7.HardSuccess");case CoC7Check.successLevel.extreme:return game.i18n.format("CoC7.ExtremeSuccess");case CoC7Check.successLevel.critical:return game.i18n.format("CoC7.CriticalSuccess");case CoC7Check.successLevel.fumble:return game.i18n.format("CoC7.Fumble");case CoC7Check.successLevel.failure:return game.i18n.format("CoC7.Failure");default:return null}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get item(){return this.itemId&&this.actor?this.actor.items.get(this.itemId):null}get skill(){return this.skillId&&this.actor?this.actor.items.get(this.skillId):null}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}static getFromElement(element,object=null){if(!element)return;const roll=object||new CoC7Roll;chatHelper.getObjectFromElement(roll,element),roll.dices={tens:[],unit:{}},chatHelper.getObjectFromElement(roll.dices,element.querySelector(".dice-result")),roll.dices.hasBonus=0!==roll.diceModifier,roll.dices.bonus=Math.abs(roll.diceModifier),roll.dices.bonusType=roll.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus");const tenDice=element.querySelector(".ten-dice");if(tenDice)for(const d of tenDice.querySelectorAll("li")){const die={selected:!1,isMax:!1,isMin:!1,value:-1};chatHelper.getObjectFromElement(die,d),roll.dices.tens.push(die)}const unitDie=element.querySelector(".unit-die")?element.querySelector(".unit-die").querySelector("li"):null;roll.dices.unit.value=unitDie?parseInt(unitDie.dataset.value):null,roll.increaseSuccess=[];const increaseSuccess=element.querySelector(".increase-success");if(increaseSuccess&&increaseSuccess.querySelectorAll("button"))for(const isl of increaseSuccess.querySelectorAll("button")){const newSuccesLevel={};chatHelper.getObjectFromElement(newSuccesLevel,isl),roll.increaseSuccess.push(newSuccesLevel)}return roll.luckNeeded&&(roll.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:roll.luckNeeded})),object?void 0:roll}static getFromCheck(check){const roll=new CoC7Roll;return roll.rollType=check.rollType,roll.side=check.side,roll.action=check.action,roll.refMessageId=check.refMessageId,roll.referenceMessageId=check.referenceMessageId,roll.successLevel=check.successLevel,roll.difficulty=check.difficulty,roll.skillId=check.skill?check.skill.id:null,roll.itemId=check.item?check.item.id:null,roll.diceMod=check.diceModifier,roll.value=parseInt(check.rawValue),roll.fumble=check.isFumble,roll.critical=check.isCritical,roll.characteristic=check.characteristic?check.characteristic:null,roll.result=check.dice.total,roll.actorKey=check.actor.tokenKey,check.actor.isToken?(roll.tokenId=check.actor.tokenKey,roll.actorId=null):(roll.tokenKey=null,roll.actorId=check.actor.tokenKey),roll}static attachCheckToElement(htmlElement,check){const roll=CoC7Roll.getFromCheck(check);return roll.attachToElement(htmlElement),roll}attachToElement(htmlElement){chatHelper.attachObjectToElement(this,htmlElement)}}class CoC7Damage{static getMainDie(damageString){return damageString.toLowerCase().includes("d20")?"d20":damageString.toLowerCase().includes("d12")?"d12":damageString.toLowerCase().includes("d10")?"d10":damageString.toLowerCase().includes("d8")?"d8":damageString.toLowerCase().includes("d4")?"d4":"d6"}static getFromElement(element,object=null){if(!element)return;const damage=object||{};chatHelper.getObjectFromElement(damage,element);const rolls=element.querySelector(".dice-rolls").querySelectorAll("li");damage.rolls=[];for(const r of rolls){const roll={};chatHelper.getObjectFromElement(roll,r),damage.rolls.push(roll)}return object?void 0:damage}}class ChatCardActor{constructor(actorKey=null,fastForward=!1){this.actorKey=actorKey,this.fastForward=fastForward}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){this._rollMode=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}async say(message,flavor=null){const speakerData={};let speaker;this.actor?(speakerData.actor=this.actor,this.token&&(speakerData.token=this.token.document),speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor,content:message};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}}function replacer(key,value){if(key.startsWith("__"))return;if(["_actor"].includes(key))return;return["sanCheck","intCheck"].includes(key)?value.JSONRollData:value}class SanCheckCard extends ChatCardActor{constructor(actorKey=null,sanData={},options={}){super(actorKey,void 0!==options.fastForward&&Boolean(options.fastForward)),sanData.sanReason=sanData.sanReason??"",this.sanData=sanData,this.options=options,sanData.modifier&&!isNaN(Number(sanData.modifier))&&(this.options.sanModifier=Number(sanData.modifier)),sanData.difficulty&&!isNaN(Number(sanData.difficulty))&&(this.options.sanDifficulty=Number(sanData.difficulty)),this.state={}}get isBlind(){return void 0!==this.options.isBlind?Boolean(this.options.isBlind):super.isBlind}get difficulty(){return void 0!==this.options.difficulty?this.options.difficulty:CoC7Check.difficultyLevel.regular}get modifier(){return void 0!==this.options.modifier?this.options.modifier:0}get sanLossSource(){return this.sanData.tokenKey?chatHelper.getActorFromKey(this.sanData.tokenKey):null}get involuntaryAction(){return!(!this.state.sanRolled||!this.sanCheck.isFailure&&!this.sanCheck.isFumble)}get sanLossFormula(){return this.state.sanRolled?this.sanData.sanMax&&this.sanCheck.failed?isNaN(Number(this.sanData.sanMax))?this.sanData.sanMax:Number(this.sanData.sanMax):this.sanData.sanMin&&this.sanCheck.passed?isNaN(Number(this.sanData.sanMin))?this.sanData.sanMin:Number(this.sanData.sanMin):0:null}get sanLostToReason(){return this.actor.sanLostToReason(this.sanData.sanReason)}get maxPossibleSanLoss(){return this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)}get maxSanLoss(){return new Roll(this.sanData.sanMax.toString()).evaluate({maximize:!0}).total}get sanLossReasonEncountered(){return this.actor.sanLossReasonEncountered(this.sanData.sanReason)}get firstEncounter(){return!this.actor.mythosInsanityExperienced}get isActorLoosingSan(){return!this.actor.hasTempoInsane&&(0!==this.sanLossFormula&&(!this.sanData.sanReason||0!==this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)||(this.state.immuneToCreature=!0,!1)))}get boutDurationText(){if(this.boutDuration){if(this.boutRealTime)return`${this.boutDuration} ${game.i18n.localize("CoC7.rounds")}`;if(this.boutSummary)return`${this.boutDuration} ${game.i18n.localize("CoC7.hours")}`}return null}get youGainCthulhuMythosString(){return this.mythosGain?game.i18n.format("CoC7.YouGainedCthulhuMythos",{value:this.mythosGain}):null}async advanceState(state){switch(state){case"keepCreatureSanData":this.state.keepCreatureSanData=!0;break;case"involuntaryActionPerformed":this.state[state]=!0,this.isActorLoosingSan||(this.state.finish=!0);break;case"sanLossApplied":await this.applySanLoss();break;case"enterBoutOfMadnessRealTime":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!0,this.boutSummary=!1,this.boutResult=await this.actor.enterBoutOfMadness(!0,this.boutDuration),this.state.boutOfMadnessResolved=!0,this.state.boutOfMadnessOver=!1;break;case"enterBoutOfMadnessSummary":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!1,this.boutSummary=!0,this.boutResult=await this.actor.enterBoutOfMadness(!1,this.boutDuration),this.state.boutOfMadnessResolved=!0,await this.triggerInsanity();break;case"boutOfMadnessOver":await this.actor.unsetCondition(COC7.status.tempoInsane),await this.triggerInsanity();break;case"noMythosGained":this.state.cthulhuMythosAwarded=!0,this.mythosGain=0;break;case"cthulhuMythosAwarded":{let amountGained=1;this.actor.mythosInsanityExperienced||(amountGained=5,await this.actor.experienceFirstMythosInsanity()),this.state.cthulhuMythosAwarded=!0;const cthulhuMythosSkill=this.actor.cthulhuMythosSkill,oldValue=cthulhuMythosSkill.data.data.adjustments.experience||0;cthulhuMythosSkill&&await cthulhuMythosSkill.update({"data.adjustments.experience":oldValue+amountGained}),this.mythosGain=amountGained;break}}}async bypassRollSan(){this.isBypassed=!0,this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.state.sanLossRolled=!0,this.state.ignoreSanCheck=!0,this.sanLoss=this.sanLossFormula}async rollSan(){if(this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.isActorLoosingSan){if("number"==typeof this.sanLossFormula)this.state.sanLossRolled=!0,this.sanData.sanReason?(this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanLossFormula),this.sanLoss<this.sanLossFormula&&(this.state.limitedLossToCreature=!0)):this.sanLoss=this.sanLossFormula;else if(this.sanCheck.isFumble)this.state.sanLossRolled=!0,this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);else if(this.sanData.sanReason){const min=new Roll(this.sanLossFormula).evaluate({minimize:!0}).total,max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);min>=max&&(this.state.sanLossRolled=!0,this.sanLoss=max,this.state.limitedLossToCreature=!0)}}else this.state.finish=!0,this.actor.hasTempoInsane&&(this.state.immuneAlreadyInBout=!0,this.sanCheck.passed||(this.state.finish=!1)),this.state.sanLossRolled=!0,this.state.sanLossApplied=!0,this.state.intRolled=!0,this.state.insanity=!1,this.sanLoss=0}async rollSanLoss(){this.sanLossRoll=new Roll(`${this.sanLossFormula}`),await this.sanLossRoll.roll({async:!0}),await CoC7Dice.showRollDice3d(this.sanLossRoll);const max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);this.sanLossRoll.total>max&&(this.state.limitedLossToCreature=!0),this.sanLoss=Math.min(this.sanLossRoll.total,max),this.state.sanLossRolled=!0}async applySanLoss(){if(await this.actor.looseSan(this.sanData.sanReason,this.sanLoss),this.sanLoss>0&&(this.state.actorLostSan=!0),this.state.sanLossApplied=!0,this.actor.san<=0)return this.state.intRolled=!0,this.state.boutOfMadnessOver=!0,this.state.insanity=!0,this.state.permanentlyInsane=!0,void(this.state.finish=!0);this.sanLoss<5?(this.state.intRolled=!0,this.actor.hasIndefInsane?(this.state.insanity=!0,this.state.shaken=!0,this.state.insanityTableRolled=!1,this.state.finish=!1,this.state.intRolled=!0):(this.state.insanity=!1,this.state.shaken=!0,this.state.insanityTableRolled=!0,this.state.finish=!0)):this.state.intRolled=!1,this.actor.dailySanLoss>=this.actor.dailySanLimit&&(this.state.insanity=!0,this.state.intRolled=!0,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!0,this.state.insanityTableRolled=!1,this.state.memoryRepressed=!1,this.state.finish=!1)}async rollInt(){this.intCheck=new CoC7Check,this.intCheck.actor=this.actorKey,this.intCheck.characteristic="int",this.intCheck.difficulty=this.options.intDifficulty||CoC7Check.difficultyLevel.regular,this.intCheck.diceModifier=this.options.intModifier||0,await this.intCheck._perform({forceDSN:!0}),this.state.intRolled=!0,this.intCheck.passed||this.state.alreadyInsane?(this.state.insanity=!0,this.state.temporaryInsane=!0,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!1):(this.state.insanity=!1,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!0,this.state.finish=!0)}async triggerInsanity(){this.state.boutOfMadnessOver=!0,this.state.indefinitelyInsane&&await this.actor.setCondition(COC7.status.indefInsane),this.state.finish=!0}async clearSanLossReason(){await this.actor.setReasonSanLoss(this.sanData.sanReason,0),this.sanLossReasonEncountered||(this.state.keepCreatureSanData=!0)}async updateChatCard(){if(this.state.sanRolled&&(this.__inlineSanCheck=this.sanCheck.inlineCheck.outerHTML),this.sanLossRoll){const a=createInlineRoll(this.sanLossRoll);this.__inlineSanLossRoll=a.outerHTML}this.state.intRolled&&this.intCheck&&(this.__inlineIntCheck=this.intCheck.inlineCheck.outerHTML);const html=await renderTemplate(SanCheckCard.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(this,replacer));const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static get template(){return"systems/CoC7/templates/chat/cards/san-check.html"}static checkTargets(sanData,fastForward=!1){const targets=[...game.user.targets];if(targets.length)for(const t of targets)t.actor.isToken?SanCheckCard.create(t.actor.tokenKey,sanData,{fastForward}):SanCheckCard.create(t.actor.id,sanData,{fastForward});else ui.notifications.warn(game.i18n.localize("CoC7.WarnNoTargetsSanCheck"))}static async create(...args){const chatCard=new SanCheckCard(...args);chatCard.actor.hasIndefInsane&&(chatCard.state.alreadyInsane=!0),chatCard.actor.san<=0&&(chatCard.state.intRolled=!0,chatCard.state.boutOfMadnessOver=!0,chatCard.state.insanity=!0,chatCard.state.permanentlyInsane=!0,chatCard.state.finish=!0);const html=await renderTemplate(SanCheckCard.template,chatCard),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(chatCard,replacer)),await chatCard.say(htmlCardElement.outerHTML)}static getFromMessageId(messageId){const message=game.messages.get(messageId),htmlCard=$.parseHTML(message.content)[0].querySelector(".chat-card");return SanCheckCard.getFromCard(htmlCard)}static getFromCard(card){const sanCheckCardData=JSON.parse(unescape(card.dataset.object)),sanCheckCard=new SanCheckCard;return Object.assign(sanCheckCard,sanCheckCardData),sanCheckCard.messageId||(sanCheckCard.messageId=card.closest(".message").dataset.messageId),"Object"===sanCheckCard.sanCheck?.constructor?.name&&(sanCheckCard.sanCheck=Object.assign(new CoC7Check,sanCheckCard.sanCheck)),"Object"===sanCheckCard.intCheck?.constructor?.name&&(sanCheckCard.intCheck=Object.assign(new CoC7Check,sanCheckCard.intCheck)),"Object"===sanCheckCard.sanLossRoll?.constructor?.name&&(sanCheckCard.sanLossRoll=Roll.fromData(sanCheckCard.sanLossRoll)),sanCheckCard}}class CoC7Link{static get CHECK_TYPE(){return{CHECK:"check",SANLOSS:"sanloss",ITEM:"item",EFFECT:"effect"}}static get LINK_TYPE(){return{CHARACTERISTIC:"characteristic",ATTRIBUTE:"attribute",SKILL:"skill"}}static init(){CONFIG.CoC7Link={documentClass:CoC7Link};const body=$("body");body.on("click","a.coc7-link",CoC7Link._onLinkClick),body.on("dragstart","a.coc7-link",(event=>CoC7Link._onDragCoC7Link(event))),CONFIG.TextEditor.enrichers.push({pattern:new RegExp("@(coc7)\\.(check|effect|item|sanloss)\\[([^\\[\\]]*(?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\])*[^\\[\\]]*\\])*[^\\[\\]]*)\\](?:{([^}]+)})?","gi"),enricher:CoC7Link._createLink})}static _linkFromEvent(event){const a=event.currentTarget,i=a.querySelector("[data-link-icon]"),data=foundry.utils.duplicate(a.dataset),oldType=data.type;return data.type="CoC7Link",data.icon=null,oldType&&(data.linkType=oldType),data.object&&("string"==typeof data.object||data.object instanceof String)&&(data.object=JSON.parse(data.object)),i.dataset&&i.dataset.linkIcon&&"fas fa-dice"!==i.dataset.linkIcon&&(data.icon=i.dataset.linkIcon),data.displayName=a.dataset.displayName?a.innerText:null,data.difficulty&&(data.difficulty=CoC7Utilities.convertDifficulty(data.difficulty)),data}static _onDragCoC7Link(event){const data=CoC7Link._linkFromEvent(event);event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}static async fromDropData(data,options={}){const cls=new CoC7Link;cls.object=foundry.utils.mergeObject({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.CHECK,linkType:CoC7Link.LINK_TYPE.SKILL,difficulty:CoC7Check.difficultyLevel.regular,modifier:0,object:{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",changes:[]}},data);for(const key of["name","displayName","icon","id","pack","sanMin","sanMax","sanReason"])cls.object[key]=cls.object[key]??"";return void 0!==cls.object.object.icon&&void 0!==cls.object.object.external&&["http","https"].includes(cls.object.object.external)&&(cls.object.object.icon=cls.object.object.external+"://"+cls.object.object.icon),cls.options=options,cls}static _createLink(match){const name=match[4]??void 0,options=match[3]??void 0,type=match[2]??void 0,data={cls:["coc7-link"],dataset:{check:type},icon:null,blind:!1,name};if(type===CoC7Link.CHECK_TYPE.EFFECT)data.effect=JSON.parse(options),data.dataset.object=options,void 0!==data.effect.icon&&void 0!==data.effect.external&&["http","https"].includes(data.effect.external)&&(data.effect.icon=data.effect.external+"://"+data.effect.icon);else{const matches=options.matchAll(/[^,]+/gi);for(const match of Array.from(matches)){let[key,value]=match[0].split(":");"icon"===key&&(data.icon=value),"blind"===key&&void 0===value&&(value=!0,data.blind=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase())),data.dataset[key]=value}void 0!==data.dataset.icon&&void 0!==data.dataset.external&&["http","https"].includes(data.dataset.external)&&(data.dataset.icon=data.dataset.external+"://"+data.dataset.icon,data.icon=data.dataset.icon)}let title;const difficulty=CoC7Check.difficultyString(data.dataset.difficulty);switch(type.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{let humanName=data.dataset.name;["attributes","attribute","attrib","attribs"].includes(data.dataset.type?.toLowerCase())&&("lck"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Luck")),"san"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Sanity"))),["charac","char","characteristic","characteristics"].includes(data.dataset.type?.toLowerCase())&&(humanName=CoC7Utilities.getCharacteristicNames(data.dataset.name)?.label),title=game.i18n.format(`CoC7.LinkCheck${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:humanName});break}case CoC7Link.CHECK_TYPE.SANLOSS:title=game.i18n.format(`CoC7.LinkSanLoss${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,sanMin:data.dataset.sanMin,sanMax:data.dataset.sanMax});break;case CoC7Link.CHECK_TYPE.ITEM:title=game.i18n.format(`CoC7.LinkItem${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:data.dataset.name});break;case CoC7Link.CHECK_TYPE.EFFECT:title=data.effect.label}name?data.dataset.displayName=!0:data.name=title;const a=document.createElement("a");a.title=game.user.isGM?data.name:title,a.classList.add(...data.cls);for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.draggable=!0,data.icon=data.icon??data.effect?.icon??"fas fa-dice",(data.icon.includes("\\")||data.icon.includes("."))&&(data.img=data.icon),data.blind&&(a.innerHTML+='<i class="fas fa-eye-slash"></i>'),data.img?a.innerHTML+=`<img data-link-icon="${data.icon}" src="${data.img}">`:a.innerHTML+=`<i data-link-icon="${data.icon}" class="link-icon ${data.icon}"></i>`,a.innerHTML+=`<span>${data.name}</span>`,a}_createDocumentLink(eventData,{relativeTo,label}={}){if(!eventData.check)return"";switch(eventData.check.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{if(!eventData.linkType||!eventData.name)return"";let options=`${eventData.blind?"blind,":""}type:${eventData.linkType},name:${eventData.name}`;if(void 0!==eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),void 0!==eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.check[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.SANLOSS:{if(!eventData.sanMax||!eventData.sanMin)return"";let options=`${eventData.blind?"blind,":""}sanMax:${eventData.sanMax},sanMin:${eventData.sanMin}`;if(eventData.sanReason&&(options+=`,sanReason:${eventData.sanReason}`),eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}let link=`@coc7.sanloss[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.ITEM:{if(!eventData.name)return"";let options=`${eventData.blind?"blind,":""}name:${eventData.name}`;if(eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.item[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.EFFECT:{const parts=eventData.object.icon.match(/^(https?):\/\/(.+)$/);parts&&(eventData.object.external=parts[1],eventData.object.icon=parts[2]);let link=`@coc7.effect[${JSON.stringify(eventData.object)}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}}return"?"}static async _onLinkActorClick(actor,options,{shiftKey=!1}={}){switch(options.check){case CoC7Link.CHECK_TYPE.CHECK:if(["charac","char","characteristic","characteristics"].includes(options.linkType.toLowerCase()))return actor.characteristicCheck(options.name,shiftKey,options);if(["skill"].includes(options.linkType.toLowerCase()))return actor.skillCheck(options,shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.linkType.toLowerCase()))return actor.attributeCheck(options.name,shiftKey,options);break;case CoC7Link.CHECK_TYPE.SANLOSS:return void SanCheckCard.create(actor.actorKey,options,{fastForward:shiftKey});case CoC7Link.CHECK_TYPE.ITEM:return actor.weaponCheck(options,shiftKey);case CoC7Link.CHECK_TYPE.EFFECT:await actor.createEmbeddedDocuments("ActiveEffect",[{label:options.object.label,icon:options.object.icon,changes:options.object.changes}])}}static toChatMessage(options){const option={speaker:{alias:game.user.name}};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}),chatHelper.createMessage(null,message,option)}static toWhisperMessage(options,actors){for(const actor of actors){const option={speaker:{alias:game.user.name},whisper:actor.owners.map((a=>a.id))};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageTargetCheckRequested",{name:actor.name,check:link}),chatHelper.createMessage(null,message,option)}}static async _onLinkClick(event){const options=CoC7Link._linkFromEvent(event);if(game.user.isGM){if(isCtrlKey(event))return void CoC7ContentLinkDialog.create(options);if(canvas.tokens.controlled.length){for(const token of canvas.tokens.controlled)CoC7Link._onLinkActorClick(token.actor,options,{shiftKey:event.shiftKey});return}const speaker=ChatMessage.getSpeaker(),actor=ChatMessage.getSpeakerActor(speaker);return actor?void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey}):void CoC7Link.toChatMessage(options)}{const speaker=ChatMessage.getSpeaker();let actor=ChatMessage.getSpeakerActor(speaker);if(!actor){const actors=game.actors.filter((a=>(a.ownership[game.user.id]??a.ownership.default)>=CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER));1===actors.length&&(actor=actors[0])}if(actor)return void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey})}ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor"))}setValue(key,value){this.object[key]=value}get link(){return this._createDocumentLink(this.object)}get id(){return this.object.id}get pack(){return this.object.pack}get checkType(){return this.object.check}get difficulty(){return this.object.difficulty}get icon(){return this.object.icon}get displayName(){return this.object.displayName}get modifier(){return this.object.modifier}get linkType(){return this.object.linkType}get sanMin(){return this.object.sanMin}get sanMax(){return this.object.sanMax}get sanReason(){return this.object.sanReason}get effect(){return this.object.object}get checkName(){if(this.isCharacteristicCheck){const characteristics=CoCActor.getCharacteristicDefinition();return characteristics.find((c=>c.key===this.object.name||c.shortName===this.object.name||c.label===this.object.name))?.key??""}return this.object.name}get isCheck(){return this.object.check===CoC7Link.CHECK_TYPE.CHECK}get isCharacteristicCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.CHARACTERISTIC}get isAttributeCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.ATTRIBUTE}get isSkillCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.SKILL}get isItemCheck(){return this.object.check===CoC7Link.CHECK_TYPE.ITEM}get isSanLossCheck(){return this.object.check===CoC7Link.CHECK_TYPE.SANLOSS}get isEffect(){return this.object.check===CoC7Link.CHECK_TYPE.EFFECT}get isBlind(){return this.isCheck&&this.object.blind}}class CoC7ContentLinkDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{id:"link-creation",classes:["coc7","active-effect-sheet"],title:game.i18n.localize("CoC7.CreateLink"),dragDrop:[{dragSelector:null,dropSelector:".container"}],template:"systems/CoC7/templates/apps/link-creation.html",closeOnSubmit:!1,width:560,height:"auto",tabs:[{navSelector:".tabs",contentSelector:".effect-options",initial:"details"}]})}async getData(){const sheetData=await super.getData();return sheetData.checkType=[{key:CoC7Link.CHECK_TYPE.CHECK,label:game.i18n.localize("CoC7.Check")},{key:CoC7Link.CHECK_TYPE.SANLOSS,label:game.i18n.localize("CoC7.SanityCheck")},{key:CoC7Link.CHECK_TYPE.ITEM,label:game.i18n.localize("CoC7.ItemWeapon")},{key:CoC7Link.CHECK_TYPE.EFFECT,label:game.i18n.localize("EFFECT.TabEffects")}],sheetData.linkType=[{key:CoC7Link.LINK_TYPE.CHARACTERISTIC,label:game.i18n.localize("CoC7.Characteristic")},{key:CoC7Link.LINK_TYPE.ATTRIBUTE,label:game.i18n.localize("CoC7.Attribute")},{key:CoC7Link.LINK_TYPE.SKILL,label:game.i18n.localize("CoC7.Skill")}],sheetData.attributeType=[{key:"lck",label:game.i18n.localize("CoC7.Luck")},{key:"san",label:game.i18n.localize("CoC7.Sanity")}],sheetData.effectModes=Object.entries(CONST.ACTIVE_EFFECT_MODES).reduce(((obj,e)=>(obj[e[1]]=game.i18n.localize("EFFECT.MODE_"+e[0]),obj)),{}),sheetData.characteristicType=CoCActor.getCharacteristicDefinition(),sheetData.link=sheetData.object.link,sheetData.fromGame=sheetData.link.isItemCheck||sheetData.link.isSkillCheck,sheetData.fromDirectory="fromDirectory"===sheetData.object.hasID,sheetData.fromCompendium="fromCompendium"===sheetData.object.hasID,sheetData.isSetFromGame=sheetData.link.id&&(sheetData.fromDirectory||sheetData.fromCompendium),sheetData.difficultyLevel=CoC7Check.difficultyLevel,sheetData.actorNames=sheetData.object.actors.map((a=>a.name)).join(", "),sheetData}activateListeners(html){super.activateListeners(html),html.find("select[name=type],select[name=check],select[name=attributeKey],select[name=characteristicKey],input[type=checkbox]").change(this._onChangeSubmit.bind(this)),html.find(".effect-control").click(this._onEffectControl.bind(this))}_onChangeSubmit(event){switch(event.currentTarget.name){case"fromCompendium":case"fromDirectory":this.object.hasID=event.currentTarget.name===this.object.hasID?"":event.currentTarget.name}this._onSubmit(event)}_onEffectControl(event){event.preventDefault();const button=event.currentTarget;switch(button.dataset.action){case"add":return this._addEffectChange();case"delete":button.closest(".effect-change").remove(),this._onSubmit(event)}}async _addEffectChange(){const idx=this.object.link.effect.changes.length;return this.submit({preventClose:!0,updateData:{[`effect.changes.${idx}`]:{key:"",mode:CONST.ACTIVE_EFFECT_MODES.ADD,value:""}}})}async _updateObject(event,formData){let hasEffect=!1;const effect={duration:{},changes:[]};for(const key in formData)switch(key){case"checkName":this.object.link.setValue("name",formData.checkName);break;case"blind":case"difficulty":case"displayName":case"icon":case"id":case"modifier":case"pack":case"sanMin":case"sanMax":case"sanReason":this.object.link.setValue(key,formData[key]);break;case"hasModifiers":case"hasLabel":case"hasIcon":this.object[key]=formData[key];break;case"effect.label":effect.label=formData[key],hasEffect=!0;break;case"effect.icon":effect.icon=formData[key],hasEffect=!0;break;case"effect.tint":effect.tint=formData[key],hasEffect=!0;break;case"effect.disabled":effect.disabled=formData[key],hasEffect=!0;break;case"effect.duration.seconds":effect.duration.seconds=formData[key],hasEffect=!0;break;case"effect.duration.rounds":effect.duration.rounds=formData[key],hasEffect=!0;break;case"effect.duration.turns":effect.duration.turns=formData[key],hasEffect=!0;break;default:{const match=key.match(/^effect\.changes\.(\d+)\.key$/);match&&(effect.changes.push({key:formData[key],mode:formData["effect.changes."+match[1]+".mode"],value:formData["effect.changes."+match[1]+".value"]}),hasEffect=!0)}}hasEffect&&this.object.link.setValue("object",effect);const target=event.currentTarget;if(target){switch(target.name){case"type":this.object.link.setValue("check",target.value),target.value===CoC7Link.CHECK_TYPE.CHECK&&(this.object.link.setValue("linkType",CoC7Link.LINK_TYPE.SKILL),this.object.link.setValue("name",""));break;case"check":this.object.link.setValue("linkType",target.value),target.value===CoC7Link.LINK_TYPE.CHARACTERISTIC?this.object.link.setValue("name",CoCActor.getCharacteristicDefinition()[0].key):target.value===CoC7Link.LINK_TYPE.ATTRIBUTE?this.object.link.setValue("name","lck"):this.object.link.setValue("name","");break;case"attributeKey":case"characteristicKey":this.object.link.setValue("name",target.value)}if("submit"===event.type){switch(event.submitter.dataset.action){case"clipboard":CoC7Utilities.copyToClipboard(this.object.link.link);break;case"chat":CoC7Link.toChatMessage(this.object.link.object);break;case"whisper-owner":CoC7Link.toWhisperMessage(this.object.link.object,this.object.actors);break;case"whisper-selected":if(!canvas.tokens.controlled.length)return void ui.notifications.warn(game.i18n.localize("CoC7.ErrorNoTokensSelected"));CoC7Link.toWhisperMessage(this.object.link.object,canvas.tokens.controlled.filter((t=>t.actor.owners.length)).map((t=>t.actor)))}return}}this.render(!0)}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("CoC7Link"===data.type)this.setLink(await CoC7Link.fromDropData(data)),this.render(!0);else if("Folder"===data.type&&"Actor"===data.documentName||["Item","Actor"].includes(data.type)){const dataList=await CoC7Utilities.getDataFromDropEvent(event,data.documentName??data.type);data.documentName??"Actor"===data.type?(this.object.actors=dataList.filter((a=>a.owners.length)),this.render(!0)):1===dataList.length&&["skill","weapon"].includes(dataList[0].type)&&(dataList[0].pack?(this.object.hasID="fromCompendium",this.object.link.setValue("pack",dataList[0].pack)):this.object.hasID="fromDirectory",this.object.link.setValue("id",dataList[0].id),this.object.link.setValue("name",dataList[0].name),this.render(!0))}}setLink(link){return this.object.link=link,""!==link.pack?this.object.hasID="fromCompendium":""!==link.id&&(this.object.hasID="fromDirectory"),link.difficulty===CoC7Check.difficultyLevel.regular&&0===parseInt(link.modifier,10)||(this.object.hasModifiers=!0),""!==link.displayName&&(this.object.hasLabel=!0),""!==link.icon&&(this.object.hasIcon=!0),""}static async create(linkData={},option={}){const object=foundry.utils.mergeObject({link:null,hasID:"",hasModifiers:!1,hasLabel:!1,hasIcon:!1,actors:[]},option),dialog=new CoC7ContentLinkDialog(object,{});dialog.setLink(await CoC7Link.fromDropData(linkData)),dialog.render(!0)}}class RollDialog{static async create(options={}){options.difficulty&&(options.difficultyLevel={},CoC7Check.difficultyLevel.unknown===options.difficulty&&(options.difficultyLevel.unknown=!0),CoC7Check.difficultyLevel.regular===options.difficulty&&(options.difficultyLevel.regular=!0),CoC7Check.difficultyLevel.hard===options.difficulty&&(options.difficultyLevel.hard=!0),CoC7Check.difficultyLevel.extreme===options.difficulty&&(options.difficultyLevel.extreme=!0)),options.name&&!options.displayName&&(options.displayName=options.name);const unknownDifficultyDefault="unknown"===game.settings.get("CoC7","defaultCheckDifficulty"),data={allowFlatDiceModifier:game.settings.get("CoC7","allowFlatDiceModifier")&&!options.disableFlatDiceModifier,allowFlatThresholdModifier:game.settings.get("CoC7","allowFlatThresholdModifier")&&!options.disableFlatThresholdModifier,difficulty:CoC7Check.difficultyLevel,unknownDifficultyDefault,hideDifficulty:options.hideDifficulty??!1,options};void 0!==options.cardType&&(!options.forcedCardType??1)&&(data.cardTypes=CoC7ChatMessage.cardTypes(options));const html=await renderTemplate("systems/CoC7/templates/apps/bonus.html",data);return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:options.displayName?game.i18n.format("CoC7.BonusSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.BonusSelectionWindow"),content:html,buttons:{roll:{label:game.i18n.localize("CoC7.RollDice"),callback:html=>(formData=new FormData(html[0].querySelector("#bonus-roll-form")),resolve(formData))}},default:"roll",close:()=>{}});dlg.render(!0)}))}}class RollCard{constructor(){this.rolls=[],this.initiator=null}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);for(let index=0;index<card.rolls.length;index++)"Object"===card.rolls[index]?.constructor?.name&&(card.rolls[index]=Object.assign(new CoC7Check,card.rolls[index]),card.rolls[index].rolled&&(card.rolls[index]._htmlRoll=await card.rolls[index].getHtmlRoll()));return card}static async _onToggle(event){event.preventDefault();const span=event.currentTarget;if(span&&span.classList.contains("gm-select-only")&&!game.user.isGM)return;const message=span.closest(".chat-message"),card=await this.fromMessageId(message.dataset.messageId);if(!card)return;const flag=span.dataset.flag;if(!flag)return;const toggle=span.closest(".toggle");if(toggle){const buttons=toggle.querySelectorAll(".toggle-switch");for(const b of buttons)card.unsetFlag(b.dataset.flag);card.setFlag(flag)}else card.toggleFlag(flag);card.updateChatCard()}static async dispatch(data){if(game.user.isGM){let card,messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===data.roll.initiator)));if(messages.length){const timestamp=new Date(messages[0].timestamp);86400<(new Date-timestamp)/1e3&&(await messages[0].setFlag("CoC7","state","resolved"),messages=[])}card=messages.length?await this.fromMessage(messages[0]):new this,void 0!==data._rollMode&&(card._rollMode=data._rollMode),await card.process(data)}else game.socket.emit("system.CoC7",data)}async toMessage(){const html=await renderTemplate(this.config.template,this),htmlCardElement=$(html);htmlCardElement[0].dataset.object=escape(this.dataString);const chatData={user:game.user.id,flavor:game.i18n.localize(this.config.title),content:htmlCardElement[0].outerHTML,flags:{CoC7:{type:this.config.type,state:"initiated",initiator:this.initiator}}};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0);return await ChatMessage.create(chatData)}async updateChatCard(){if(await this.compute(),this.messageId){const html=await renderTemplate(this.config.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}await this.toMessage()}updateRoll(data){data.fromGM||Object.assign(this.rolls[data.rank],data.roll)}addRollData(data){const check=Object.assign(new CoC7Check,data.roll);this.rolls.push(check),"combinedCard"===this.config.type&&(this.initiator=data.roll.initiator)}addRoll(data){this.rolls.push(data)}removeRoll(rank){this.rolls.splice(rank,1)}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultConfig(){return{exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get winners(){return this.rolls.filter((r=>r.winner))}get winner(){if(this.winners.length)return this.winners[0]}get loosers(){return this.rolls.filter((r=>!r.winner))}get looser(){if(this.loosers.length)return this.loosers[0]}get hasWinner(){return this.winners.length>0}get isKeeper(){return game.user.isGM}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.config.exclude?.includes(key)&&!key.startsWith(this.config.excludeStartWith))return value}))}}class CombinedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.combined .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.combined a",CombinedCheckCard._onClick.bind(this)),html.on("click",".roll-card.combined button",CombinedCheckCard._onClick.bind(this))}static get defaultConfig(){return foundry.utils.mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/combined-roll.html",type:"combinedCard",title:"CoC7.CombinedRollCard"})}get config(){return CombinedCheckCard.defaultConfig}get successCount(){if(this.rolled){let count=0;for(const r of this.rolls)r.passed&&(count+=1);return count}}get mainActorKey(){return this.rolls[0]?.actor?.actorKey||void 0}get success(){if(void 0!==this.successCount)return this.any?this.successCount>0:this.all?this.successCount===this.rolls.length:void 0}get failure(){if(void 0!==this.success)return!this.success}get checkGMInitiator(){return game.users.get(this.initiator)?.isGM}async getHtmlRoll(){if(!this.rolled)return;const check=new CoC7Check;return await check._perform({roll:this._roll[check.diceModifier||0],silent:!0}),await check.getHtmlRoll({hideSuccess:!0})}process(data){switch(data.action){case"new":case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data);break;case"assignRoll":this.assignRoll(data)}game.user.isGM?this.updateChatCard():game.socket.emit("system.CoC7",data)}async assignRoll(data){game.user.isGM&&(this.rolled||(this.rolled=!0,this._roll=data.roll))}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await CombinedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-card":{const pool={};for(const dice of card.rolls){const diceModifier=parseInt(dice.diceModifier,10);isNaN(diceModifier)||(pool[diceModifier]=!1)}const roll=await CoC7Dice.combinedRoll({pool});roll.initiator=game.user.id;const data={type:this.defaultConfig.type,action:"assignRoll",fromGM:game.user.isGM,roll};AudioHelper.play({src:CONFIG.sounds.dice},!0),card.process(data);break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM,roll:{initiator:game.user.id}};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(){if(this._roll){this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.data));for(const r of this.rolls)r.rolled||(r.modifier=r.diceModifier||0,r.difficulty=r.difficulty||CoC7Check.difficultyLevel.regular,r.flatDiceModifier=r.flatDiceModifier||0,r.flatThresholdModifier=r.flatThresholdModifier||0,await r._perform({roll:this._roll[r.modifier],silent:!0}));for(let i=0;i<this.rolls.length;i++)this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));this._htmlRoll=await this.getHtmlRoll()}}closeCard(){this.closed=!0}}class InteractiveChatCard{constructor(options={}){this._options=options}get options(){return foundry.utils.mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this),htmlCardElement=$(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatData=foundry.utils.mergeObject({user:game.user.id,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}this.toMessage()}activateListeners(html){html.on("click",".interactive-card .ic-radio-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .ic-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .submit",this._onSubmit.bind(this)),html.on("focusout","input",this._onSubmit.bind(this)),html.on("click",".interactive-card button",this._onButton.bind(this)),html.on("keydown","form",this._onKey.bind(this))}static async bindListeners(html){const htmlCardElement=html[0].querySelector(".chat-card");if(!htmlCardElement)return;if(!htmlCardElement.dataset.cardClass)return;if(!Object.getOwnPropertyNames(game.CoC7.cards).includes(htmlCardElement.dataset.cardClass))return;const card=await InteractiveChatCard.fromHTMLCardElement(htmlCardElement),typedCard=Object.assign(new game.CoC7.cards[htmlCardElement.dataset.cardClass],card);typedCard.assignObject(),typedCard.activateListeners(html)}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;this[action]&&this[action]({event,update:!0})}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(".interactive-card");if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).toObject();data=foundry.utils.diffObject(this,foundry.utils.expandObject(data));for(const[key,value]of Object.entries(data))this[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{classes:["interactive-card"],exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));if(!cardData.messageId){const message=card.closest(".message");cardData.messageId=message?.dataset?.messageId}return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);return await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ic-radio");if(toggle){const buttons=toggle.querySelectorAll(".ic-radio-switch");for(const b of buttons)this.unsetFlag(b.dataset.flag);this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(".interactive-card");card&&this._update(card),this.updateChatCard()}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get isTargetOwner(){return this.target.isOwner}get isKeeper(){return game.user.isGM}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor||this.targetToken.data.actor||this.targetToken.data.document:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}}class DamageCard extends InteractiveChatCard{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{exclude:["_targetToken","_targetActor","_htmlRoll","_htmlInlineRoll"].concat(super.defaultOptions.exclude),template:"systems/CoC7/templates/chat/cards/damage.html"})}async assignObject(){this.damageRoll&&"Object"===this.damageRoll.constructor.name&&(this.damageRoll=Roll.fromData(this.damageRoll))}_onButton(event){super._onButton(event)}get critical(){return this.options.critical}set critical(x){this._options.critical=x}get impale(){return void 0===this._impale?this.weapon.impale:this._impale}set impale(x){this._impale=x}get isDamageFormula(){return"string"==typeof this.damageFormula&&(!!isNaN(Number(this.damageFormula))&&Roll.validate(this.damageFormula))}get isDamageNumber(){return!isNaN(Number(this.damageFormula))}get isArmorForula(){return"string"==typeof this.armor&&(!!isNaN(Number(this.armor))&&Roll.validate(this.armor))}get totalDamageString(){let damage=Number(this.isDamageNumber?this.damageFormula:this.roll.total);return!this.ignoreArmor&&((isNaN(Number(this.armor))||Number(this.armor)>0)&&(damage-=Number(this.armor)),!isNaN(Number(this.armor))&&damage<=0)?game.i18n.localize("CoC7.ArmorAbsorbsDamage"):damage}get noDamage(){if(this.rolled){const damage=this.isDamageNumber?this.damageFormula:this.roll.total;return this.ignoreArmor?!!(damage<=0):!isNaN(Number(this.armor))&&!!(damage-Number(this.armor)<=0)}return!1}async updateChatCard(){if(!this.options.fastForward||this.roll||this.isDamageNumber||await this.rollDamage({update:!1}),this.isDamageNumber||this.roll&&null!=this.roll.total||this.hardrolled?this.rolled=!0:this.rolled=!1,!this.options.fastForward||this.damageInflicted||this.noDamage||await this.dealDamage({update:!1}),this.rolled&&this.roll){"Object"===this.roll.constructor.name&&(this.roll=Roll.fromData(this.roll));const a=createInlineRoll(this.roll);this._htmlInlineRoll=a.outerHTML,this._htmlRoll=await this.roll.render()}await super.updateChatCard()}async rollDamage(options={update:!0}){this.roll=await new Roll(this.damageFormula||"0").evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.roll),this.hardrolled=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async rollArmor(options={update:!0}){const roll=await new Roll(this.armor).evaluate({async:!0});this.armor=roll.total,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async dealDamageToSelectedTarget(options={update:!0}){if(this.isArmorForula&&await this.rollArmor(),isNaN(Number(this.totalDamageString)))return void ui.notifications.error(game.i18n.localize("CoC7.ErrorEvaluatingDamage"));const targets=[],targetName=[],selectedPlayers=canvas.tokens.controlled.map((token=>token.actor));for(let index=0;index<selectedPlayers.length;index++)this.actor.id!==selectedPlayers[index].id&&(targetName.push(selectedPlayers[index].name),targets.push(selectedPlayers[index]));const data={title:" ",content:game.i18n.format("CoC7.DealDamage",{damage:this.totalDamageString,target:targetName}),buttons:{one:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>{this.confirmDamage(targets)}},two:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>{}}},default:"two"};targetName.length>0&&new Dialog(data).render(!0)}async confirmDamage(targets){for(let index=0;index<targets.length;index++)await targets[index].dealDamage(Number(this.totalDamageString),{ignoreArmor:!1}),ChatMessage.create({content:game.i18n.format("CoC7.DamageDealTo",{name:targets[index].name,damage:this.totalDamageString})})}async dealDamage(options={update:!0}){this.isArmorForula&&await this.rollArmor();let damage=this.totalDamageString;if(isNaN(Number(damage))){if(game.i18n.localize("CoC7.ArmorAbsorbsDamage")!==damage)return void ui.notifications.error("Error evaluating damage");damage=0}this.targetActor&&await this.targetActor.dealDamage(Number(damage),{ignoreArmor:!0}),this.damageInflicted=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}get range(){return this.options.range||"normal"}set range(x){["normal","long","extreme"].inclues(x.toLowerCase())&&(this._options.range=x)}get damageFormula(){const range=this.range;let formula=this.weapon?.system?.range[range]?.damage,db=this.actor.db;if(db=(""===(db??"").toString().trim()?0:db).toString().trim(),db.startsWith("-")||(db="+"+db),this.weapon.system.properties.addb&&(formula+=db),this.weapon.system.properties.ahdb&&(formula=formula+"+ floor("+db+"/2)"),formula){const maxDamage=new Roll(formula).evaluate({maximize:!0}).total;let rollString;return this.critical?this.impale?(rollString=formula+"+"+maxDamage,rollString):maxDamage:formula}}get armor(){return void 0!==this._armor&&""!==this._armor?this._armor:this.target?this.targetActor.system.attribs.armor.value:0}set armor(x){this._armor=x}}class OpposedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.opposed .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.opposed a",OpposedCheckCard._onClick.bind(this)),html.on("click",".roll-card.opposed button",OpposedCheckCard._onClick.bind(this))}static get defaultConfig(){return foundry.utils.mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/opposed-roll.html",type:"opposedCard"})}get config(){return OpposedCheckCard.defaultConfig}get attackerRoll(){if(this.combat){if(this.rolls?.length){const attacker=this.rolls.filter((r=>0===r.index||r.attacker));if(attacker.length)return attacker[0]}}else;}get defenderRoll(){if(this.combat){if(this.rolls?.length){const defender=this.rolls.filter((r=>0!==r.index||!r.attacker));if(defender.length)return defender[0]}}else;}get defenderIsDodging(){return!(!this.defenderRoll?.actor?.dodgeSkill?.name||!this.defenderRoll?.skill?.name)&&this.defenderRoll.actor.dodgeSkill.name.toLowerCase()===this.defenderRoll.skill.name.toLowerCase()}get advantageAttacker(){return void 0===this._aa?!!this.defenderRoll&&!this.defenderIsDodging:this._aa}get winnerRollsDamage(){return!!(this.combat&&this.rolls.length>=2&&this.hasWinner&&"weapon"===this.winner?.item?.type)}set advantageAttacker(x){this._aa=!0,this._ad=!1}get advantageDefender(){return void 0===this._ad?this.defenderIsDodging:this._ad}set advantageDefender(x){this._ad=!0,this._aa=!1}get isTie(){return this.winnerCount>1}get needsTieBreaker(){return!!this.combat&&!(!this.attackerRoll||!this.defenderRoll||this.attackerRoll.successLevel!==this.defenderRoll.successLevel)}get winnerCount(){let count=0;for(const r of this.rolls)r.winner&&(count+=1);return count}get isAttackManeuver(){return!(!this.combat||!this.attackerRoll||this.attackerRoll?.item&&!this.attackerRoll?.item.system.properties?.mnvr)}get resultText(){if(this.combat&&this.attackerRoll&&this.defenderRoll){if(!this.attackerRoll.winner&&!this.defenderRoll.winner)return game.i18n.localize("CoC7.NoWinner");if(this.attackerRoll.winner)return this.attackerRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.attackerRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.attackerRoll.actor.name});if(this.defenderRoll.winner)return this.defenderRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.defenderRoll.actor.name}):this.defenderIsDodging?game.i18n.format("CoC7.DodgeSuccess",{name:this.defenderRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.defenderRoll.actor.name})}}async process(data){switch(data.action){case"new":this.rolls?.length||(this.combat=data.combat||void 0,this.combat&&(data.roll.attacker=!0)),data.roll.index=this.rolls.length,this.addRollData(data);break;case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data)}game.user.isGM?await this.updateChatCard():game.socket.emit("system.CoC7",data)}async roll(rank){await this.rolls[rank]._perform();const data={type:this.config.type,action:"updateRoll",rank,fromGM:game.user.isGM};return game.user.isGM||(data.roll=this.rolls[rank].JSONRollData),data}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await OpposedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"toggle-combat":card.combat=!card.combat,await card.updateChatCard();break;case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-check":{const speaker=ChatMessage.getSpeaker();card.rolls[rank].actorKey||(card.rolls[rank].actorKey=`${speaker.scene}.${speaker.token}`);const data=await card.roll(rank);await card.process(data);break}case"roll-damage":{card.closeCard(),await card.updateChatCard();const damageChatCard=new DamageCard({critical:card.winner.isExtremeSuccess,fastForward:event.shiftKey});damageChatCard.actorKey=card.winner.actor.actorKey,damageChatCard.targetKey=card.looser.actor.actorKey,damageChatCard.itemId=card.winner.itemId,damageChatCard.updateChatCard();break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(rank=void 0){if(this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.actorKey)),rank)this.rolls[rank].rolled&&(this.rolls[rank]._htmlRoll=await this.rolls[rank].getHtmlRoll({hideDiceResult:!0}));else for(let i=0;i<this.rolls.length;i++)delete this.rolls[i].maneuver,this.combat&&(!this.rolls[i].item||this.rolls[i].item.system.properties?.mnvr)&&(this.rolls[i]?.actor?.dodgeSkill?.name&&this.rolls[i]?.skill?.name&&this.rolls[i].actor.dodgeSkill.name.toLowerCase()!==this.rolls[i].skill.name.toLowerCase()||!this.rolls[i]?.actor?.dodgeSkill?.name)&&(this.rolls[i].maneuver=!0),this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));if(this.combat){if(this.rolls.sort(((a,b)=>a.index>b.index?1:a.index<b.index?-1:0)),this.rolls.length>1){this.rolls=[this.rolls[0],this.rolls[1]];for(const r of this.rolls)delete r.winner,delete r.tie}this.rolls[0]&&(this.rolls[0].attacker=!0),this.rolls[0]?.rolled&&this.rolls[1]?.rolled&&(this.rolls[0].passed||this.rolls[1].passed)&&(this.rolls[0].successLevel>this.rolls[1].successLevel?this.rolls[0].winner=!0:this.rolls[1].successLevel>this.rolls[0].successLevel?this.rolls[1].winner=!0:this.advantageAttacker?this.rolls[0].winner=!0:this.rolls[1].winner=!0)}else{if(this.rolls.sort(((a,b)=>{if(a.rolled&&!b.rolled)return-1;if(!a.rolled&&b.rolled)return 1;if(!a.rolled&&!b.rolled)return 0;if(a.successLevel>b.successLevel)return this.resolved=!0,-1;if(a.successLevel<b.successLevel)return this.resolved=!0,1;if(game.settings.get("CoC7","opposedRollTieBreaker")){if(a.modifiedResult>b.modifiedResult)return this.resolved=!0,-1;if(a.modifiedResult<b.modifiedResult)return this.resolved=!0,1}else{if(a.rawValue>b.rawValue)return this.resolved=!0,-1;if(a.rawValue<b.rawValue)return this.resolved=!0,1}return 0})),this.winCount=0,this.rolls[0]&&this.rolls[0].rolled&&!this.rolls[0].failed){this.winCount=1;for(let i=1;i<this.rolls.length;i++)this.rolls[i]&&this.rolls[i].rolled&&this.rolls[0].successLevel===this.rolls[i].successLevel&&(game.settings.get("CoC7","opposedRollTieBreaker")?this.rolls[0].modifiedResult===this.rolls[i].modifiedResult:this.rolls[0].rawValue===this.rolls[i].rawValue)&&(this.winCount=this.winCount+1)}for(let i=0;i<this.rolls.length;i++)this.rolls[i].winner=i<this.winCount,this.rolls[i].tie=this.rolls[i].winner&&this.winCount>1}}closeCard(){this.closed=!0}}class SanDataDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(":checkbox").click((()=>this._toggleInput(html)))}_toggleInput(html){html.find('*[name="customname"]').toggle()}static async create(options={}){const html=await renderTemplate("systems/CoC7/templates/apps/sandata.html",options);return new Promise((resolve=>{let formData=null;const dlg=new SanDataDialog({title:options.displayName?game.i18n.format("CoC7.SanDataSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.SanDataSelectionWindow"),content:html,buttons:{Validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#san-data-form")),resolve(formData))}},default:"Validate",close:()=>{}});dlg.render(!0)}))}}class CoC7ChatMessage{static get ROLL_TYPE_ATTRIBUTE(){return"R/AT"}static get ROLL_TYPE_CHARACTERISTIC(){return"R/CH"}static get ROLL_TYPE_COMBAT(){return"R/CO"}static get ROLL_TYPE_SKILL(){return"R/SK"}static get ROLL_TYPE_ENCOUNTER(){return"R/EC"}static get CARD_TYPE_COMBINED(){return"C/CO"}static get CARD_TYPE_GROUP(){return"C/GR"}static get CARD_TYPE_NORMAL(){return"C/NO"}static get CARD_TYPE_OPPOSED(){return"C/OP"}static get CARD_TYPE_SAN_CHECK(){return"C/SC"}static get CARD_TYPE_NONE(){return"C/NO"}static cardTypes(config){if(config.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)return null;const select={[CoC7ChatMessage.CARD_TYPE_NORMAL]:"CoC7.RegularRollCard",[CoC7ChatMessage.CARD_TYPE_COMBINED]:"CoC7.CombinedRollCard",[CoC7ChatMessage.CARD_TYPE_OPPOSED]:"CoC7.OpposedRollCard"};return config.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE&&"san"===config.attribute&&(select[CoC7ChatMessage.CARD_TYPE_SAN_CHECK]="CoC7.SanityLossEncounter"),select}static normalizeRequest(options){if(void 0!==options.event||void 0===options.cardType||void 0===options.actor||void 0===options.skillId&&void 0===options.skillName&&void 0===options.attribute&&void 0===options.characteristic&&options.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER){if(void 0===options.event||void 0===options.cardType||void 0===options.rollType)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{value:game.i18n.localize("CoC7.Roll")})),!1}else if(void 0!==options.skillId)options.actor.items.get(options.skillId)&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL);else if(void 0!==options.skillName){const skillIds=options.actor.getSkillsByName(options.skillName);skillIds.length>0&&(options.skillId=skillIds[0].id,options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL)}else void 0!==options.attribute&&["lck","san"].includes(options.attribute)?options.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:void 0!==options.characteristic&&void 0!==options.actor.system.characteristics[options.characteristic]&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC);if(![CoC7ChatMessage.CARD_TYPE_COMBINED,CoC7ChatMessage.CARD_TYPE_GROUP,CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_OPPOSED,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(options.cardType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidCardType")})),!1;if(![CoC7ChatMessage.ROLL_TYPE_SKILL,CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,CoC7ChatMessage.ROLL_TYPE_ENCOUNTER].includes(options.rollType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidRollType")})),!1;const config={options:{cardType:options.cardType,shiftKey:options.fastForward??options.event?.shiftKey??options.fastForward??!1,altKey:options.event?.altKey??!1,isCtrlKey:isCtrlKey(options.event??!1),createEncounter:options.createEncounter??!1,openLinkTool:options.openLinkTool??!1,sendToChat:options.sendToChat??!1,sendToClipboard:options.sendToClipboard??!1,isCombat:options.event?.currentTarget.classList?.contains("combat")??!1,preventStandby:options.preventStandby??!1,bonusDice:0},dialogOptions:{rollType:options.rollType,cardType:options.cardType,attribute:"",chatMessage:options.chatMessage??!0,forcedCardType:options.forcedCardType??!1,hideDifficulty:options.hideDifficulty??!1}};switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:if(config.options.skillId=options.skillId??options.event?.currentTarget.closest(".item")?.dataset.skillId,config.options.itemId=options.event?.currentTarget.closest(".item")?.dataset.itemId,config.options.characteristic=options.characteristic??options.event?.currentTarget.parentElement.dataset.characteristic,config.options.attribute=options.attribute??options.event?.currentTarget.parentElement.dataset.attrib,config.dialogOptions.attribute=config.options.attribute,config.options.actorId=options.event?.currentTarget.closest("form").dataset.actorId??options.actor.id,config.options.tokenKey=options.event?.currentTarget.closest("form").dataset.tokenId??options.actor.tokenKey,config.options.weaponAltSkill=options.event?.currentTarget.classList.contains("alternativ-skill"),config.options.actor=options.actor,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&config.options.isCombat){const item=config.options.actor.items.get(config.options.itemId);if(!item)return!1;"weapon"===item.type&&(config.options.weaponName=item.name,config.dialogOptions.rollType=CoC7ChatMessage.ROLL_TYPE_COMBAT)}if(void 0===config.options.actorId||void 0===config.options.tokenKey&&void 0===config.options.actor)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorActor")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&void 0===config.options.skillId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Skill")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC){if(void 0===config.options.characteristic)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Characteristic")})),!1;if(!game.user.isGM&&!config.options.actor.system.characteristics[config.options.characteristic]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE){if(void 0===config.options.attribute)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Attribute")})),!1;if(!game.user.isGM&&!config.options.actor.system.attribs[config.options.attribute]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT){if(void 0===config.options.itemId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Weapon")})),!1;if(config.options.altKey)return!1}config.options.hasPlayerOwner=config.options.actor.hasPlayerOwner??!1,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC?(config.dialogOptions.disableFlatThresholdModifier=config.options.isCtrlKey,config.dialogOptions.disableFlatDiceModifier=config.options.isCtrlKey):(config.dialogOptions.disableFlatThresholdModifier=!1,config.dialogOptions.disableFlatDiceModifier=!1),config.dialogOptions.modifier=0,config.dialogOptions.difficulty=options.difficulty??CoC7Check.difficultyLevel[game.settings.get("CoC7","defaultCheckDifficulty")],config.dialogOptions.flatDiceModifier=0,config.dialogOptions.flatThresholdModifier=0}return config}static async trigger(options={}){const config=CoC7ChatMessage.normalizeRequest(options);if(!1!==config)if(config.options.isCtrlKey&&game.user.isGM&&[CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(config.dialogOptions.cardType))CoC7ChatMessage.createLink(config);else{if(!(config.options.sendToChat||config.options.sendToClipboard||config.options.openLinkTool||config.options.createEncounter)||!game.user.isGM||CoC7ChatMessage.CARD_TYPE_NONE!==config.dialogOptions.cardType){if(void 0!==config.options.actor){if(void 0!==config.options.attribute){const bonusDice=config.options.actor.system?.attribs?.[config.options.attribute]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.characteristic){const bonusDice=config.options.actor.system?.characteristics?.[config.options.characteristic]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.itemId){const itemModifiers=Object.values(config.options.actor.system.skills).find((k=>k.foundryID===config.options.itemId));void 0!==itemModifiers.bonusDice&&(config.dialogOptions.modifier=itemModifiers.bonusDice)}config.dialogOptions.modifier=Math.min(Math.max(config.dialogOptions.modifier,-2),2)}return config.options.shiftKey||await CoC7ChatMessage.createRoll(config),CoC7ChatMessage.runRoll(config)}CoC7ChatMessage.createLink(config)}}static createLink(config){switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_COMBAT:case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:{const linkData={type:"CoC7Link"};if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL){if(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.SKILL,linkData.name=config.options.actor.items.get(config.options.skillId)?.shortName,!linkData.name)return}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC)linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.CHARACTERISTIC,linkData.name=config.options.characteristic;else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE)(config.options.altKey||config.options.createEncounter)&&"san"===config.options.attribute?linkData.check=CoC7Link.CHECK_TYPE.SANLOSS:(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.ATTRIBUTE,linkData.name=config.options.attribute);else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)linkData.check=CoC7Link.CHECK_TYPE.ITEM,linkData.name=config.options.weaponName;else{if(config.dialogOptions.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER)return;linkData.check=CoC7Link.CHECK_TYPE.SANLOSS,linkData.sanMin=config.options.actor?.system?.special?.sanLoss?.checkPassed,linkData.sanMax=config.options.actor?.system?.special?.sanLoss?.checkFailled,linkData.sanReason=config.options.actor.system.infos.type?.length?config.options.actor.system.infos.type:config.options.actor.name}"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),config.options.sendToChat?CoC7Link.toChatMessage(linkData):config.options.sendToClipboard?CoC7Link.fromDropData(linkData).then((link=>{CoC7Utilities.copyToClipboard(link.link)})):CoC7ContentLinkDialog.create(linkData,{actors:[config.options.actor].filter((a=>a.owners.length)),hasModifiers:config.options.shiftKey})}}}static async createRoll(config){const usage=await RollDialog.create(config.dialogOptions);if(usage){const cardType=usage.get("cardType");cardType&&(config.dialogOptions.cardType=cardType),config.dialogOptions.modifier=Number(usage.get("bonusDice")),config.dialogOptions.difficulty=Number(usage.get("difficulty")),config.dialogOptions.flatDiceModifier=Number(usage.get("flatDiceModifier")),config.dialogOptions.flatThresholdModifier=Number(usage.get("flatThresholdModifier"))}}static async runRoll(config){switch(config.dialogOptions.cardType){case CoC7ChatMessage.CARD_TYPE_SAN_CHECK:{const sanData=await SanDataDialog.create({promptLabel:!0});if(sanData){let sanMin=sanData.get("sanMin")||0,sanMax=sanData.get("sanMax")||0;const sanReason=sanData.get("sanReason");isNaN(Number(sanMin))||(sanMin=Number(sanMin)),isNaN(Number(sanMax))||(sanMax=Number(sanMax)),SanCheckCard.create(config.options.actor.actorKey,{sanMin,sanMax,sanReason},{sanModifier:config.dialogOptions.modifier,sanDifficulty:config.dialogOptions.difficulty,fastForward:config.options.shiftKey})}}break;case CoC7ChatMessage.CARD_TYPE_NORMAL:{const check=new CoC7Check;return check.diceModifier=config.dialogOptions.modifier,check.difficulty=config.dialogOptions.difficulty,check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.flatDiceModifier=config.dialogOptions.flatDiceModifier,check.flatThresholdModifier=config.dialogOptions.flatThresholdModifier,check.standby=!config.options.preventStandby&&game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&config.options.hasPlayerOwner,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL?(check.skill=config.options.skillId,await check.roll()):config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE?await check.rollAttribute(config.options.attribute):await check.rollCharacteristic(config.options.characteristic),config.dialogOptions.chatMessage&&check.toMessage(),{result:check.modifiedResult,successLevel:check.rolledSuccessLevel,isFumble:check.isFumble,isCritical:check.isCritical,successLevels:{1:check.regularThreshold,2:check.hardThreshold,3:check.extremeThreshold},passed:check.passed}}case CoC7ChatMessage.CARD_TYPE_OPPOSED:case CoC7ChatMessage.CARD_TYPE_COMBINED:{const check=new CoC7Check;check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.characteristic=config.options.characteristic,check.attribute=config.options.attribute,check.skillId=config.options.skillId,check.rollMode=game.settings.get("core","rollMode"),check.initiator=game.user.id;let data={};config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?(data={type:OpposedCheckCard.defaultConfig.type,combat:config.options.isCombat,action:"new"},check.item=config.options.itemId,check.weaponAltSkill=config.options.weaponAltSkill,check.denyPush=!0,await check._perform()):(data={type:CombinedCheckCard.defaultConfig.type,action:"new"},check.difficulty=config.dialogOptions.difficulty),data.roll=check.JSONRollData,data._rollMode=game.settings.get("core","rollMode"),config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?OpposedCheckCard.dispatch(data):CombinedCheckCard.dispatch(data)}}}}class CoC7ConCheck{constructor(actorId=null,difficulty=CoC7Check.difficultyLevel.regular){this.check=new CoC7Check(actorId),this.check.characteristic="con",this.check.difficulty=difficulty,this.check.denyPush=!0,this.actorId=actorId}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get actor(){return this.actorId?chatHelper.getActorFromKey(this.actorId):null}set actorId(x){this._actorId=x,this.check.actor=x}get actorId(){return this._actorId?this._actorId:null}get tokenKey(){return this.actor.isToken?this.actor.tokenKey:null}get isSuccess(){return!!this.check&&this.check.isSuccess}get isRolled(){return!!(this.check&&this.check.dices&&this.check.dices.total)}static getFromCard(card){const conCheck=new CoC7ConCheck;chatHelper.getObjectFromElement(conCheck,card);const htmlCheck=card.querySelector(".roll-result");return CoC7Roll.getFromElement(htmlCheck,conCheck.check),conCheck.messageId=card.closest(".message").dataset.messageId,conCheck}async getCheckElement(){const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this.check),htmlElement=$.parseHTML(html)[0];return htmlElement?(htmlElement.classList.remove("chat-card","item-card","roll-card"),htmlElement):null}async toMessage(fastForward=!1){fastForward&&await this.rollCon();const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(fastForward){htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement())}const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:htmlElement.outerHTML};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async rollCon(){this.check.hideDiceResult=!0,await this.check._perform(),this.isBlind||this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),this.applied=!0}async updateChatCard(){const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement()),this.isBlind||!this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),!this.messageId)return;const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}}class SkillSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".select-skill").click((async event=>this._onSelectSkillClicked(event)))}async _onSelectSkillClicked(event){const li=event.currentTarget.closest(".item");this.data.data.skills[Number(li.dataset.index)].selected=!0,event.currentTarget.style.display="none",this.data.data.added||(this.data.data.added=0),this.data.data.added++;event.currentTarget.closest(".skill-selector").querySelector(".count").innerText=this.data.data.added,this.data.data.added>=this.data.data.optionsCount&&this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/skill-select.html",data);return new Promise((resolve=>{new SkillSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>{if(!data.added>=data.optionsCount)return resolve(!1);const selected=data.skills.filter((skill=>skill.selected));return resolve(selected)}},{classes:["coc7","dialog","skill-select"]}).render(!0)}))}}class PointSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event))),html.find("button").click((event=>this._onButtonClicked(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item"),itemList=li.closest(".item-list");for(const item of itemList.querySelectorAll(".selectable"))item.classList.remove("selected"),this.data.data.characteristics[item.dataset.key].selected=!1,this.data.data.characteristics[item.dataset.key].optional=!1;$(li).toggleClass("selected"),this.data.data.characteristics[li.dataset.key].selected=!0;li.closest("#skill-selection-form").querySelector(".points").innerText=this.data.data.total+this.data.data.characteristics[li.dataset.key].multiplier*this.data.data.characteristics[li.dataset.key].value;li.closest("#skill-selection-form").querySelector("button.validate").classList.remove("inactive"),this.data.data.resolved=!0}async _onButtonClicked(event){event.preventDefault(),event.currentTarget.classList.contains("inactive")||super.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/point-select.html",data);return new Promise((resolve=>{new PointSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.resolved?resolve(data):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");this.data.data.selected=li.dataset.key,this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/char-select.html",data);return new Promise((resolve=>{new CharacSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.selected?resolve(data.selected):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacRollDialog extends Dialog{constructor(data,options){super(data,options),this.rolled=data.rolled||{}}activateListeners(html){super.activateListeners(html),html.on("change","input",this._onChangeInput.bind(this)),html.on("submit","form",this._onSubmit.bind(this)),html.on("click",".roll-characteristic",this._onRollCharacteristic.bind(this)),html.on("click",".increase-characteristic",this._onIncreaseCharacteristic.bind(this)),html.on("click",".decrease-characteristic",this._onDecreaseCharacteristic.bind(this)),html.on("click",".reset-characteristic",this._onResetCharacteristic.bind(this)),html.on("click","button",this._onButton.bind(this))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;await this.rollCharacteristic(characKey)}async _onIncreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.increaseCharacteristic(characKey)}async _onDecreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.decreaseCharacteristic(characKey)}async _onResetCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.resetCharacteristic(characKey)}async _onButton(event){const action=event.currentTarget.dataset.action;if("roll"===action)for(const char of["str","con","siz","dex","app","int","pow","edu","luck"])await this.rollCharacteristic(char);this.checkTotal(),"validate"===action&&this.data.data.validate&&this.close()}async rollCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input"),formula=this.data.data.characteristics.rolls[key];if(input&&formula){if(isNaN(Number(formula))){const roll=new Roll(formula);await roll.evaluate({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:this.data.data.characteristics.list[key].label,formula})}),input.value=roll.total}else input.value=Number(formula);this.data.data.characteristics.values[key]=Number(input.value),this.rolled||(this.rolled={}),this.rolled[key]=!0}this.checkTotal()}async increaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async decreaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&Number(input.value)>0&&(input.value=Number(input.value)-1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async resetCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=null,this.data.data.characteristics.values[key]=0),this.checkTotal()}async _onChangeInput(event){event.preventDefault();const input=event.currentTarget,value=Number(input.value);isNaN(value)||(this.data.data.characteristics.values[input.name]=value),this.checkTotal()}checkTotal(){this.data.data.characteristics.points.total=0;for(const[key,value]of Object.entries(this.data.data.characteristics.values))"luck"!==key&&(this.data.data.characteristics.points.total+=value);const validation=this._element[0].querySelector(".points");if(this.data.data.characteristics.points.enabled){Number(this.data.data.characteristics.points.total)!==Number(this.data.data.characteristics.points.value)?(validation.classList.add("warning"),this.data.data.validate=!1):(validation.classList.remove("warning"),this.data.data.validate=!0);validation.querySelector(".value").innerText=this.data.data.characteristics.points.value}validation.querySelector(".total").innerText=this.data.data.characteristics.points.total,this.data.data.characteristics.rolls.enabled&&(this.data.data.validate=0===Object.values(this.data.data.characteristics.values).filter((val=>isNaN(parseInt(val)))).length)}async _onSubmit(event){event.preventDefault()}static async create(data){const rolled={};data.characteristics.points.total=0;for(const[key,value]of Object.entries(data.characteristics.values))"luck"!==key&&(data.characteristics.points.total+=value||0),!isNaN(value)&&value>0&&(rolled[key]=!0);data.characteristics.points.enabled&&Number(data.characteristics.points.total)!==Number(data.characteristics.points.value)&&(data.pointsWarning=!0);const html=await renderTemplate("systems/CoC7/templates/apps/char-roll.html",data);return new Promise((resolve=>{new CharacRollDialog({title:data.title,content:html,data,rolled,buttons:{},close:()=>data.validate?resolve(!0):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class SkillSpecSelectDialog{static async create(skills,specializationName,baseValue=null,name=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-spec-select.html",{hasSkills:skills.length>0,skills,base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:name?game.i18n.format("CoC7.SkillSelectBase",{name}):game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:specializationName}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class SkillSpecializationSelectDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","skill-name-dialog"],title:"",template:"systems/CoC7/templates/apps/skill-specialization-select.hbs",width:400,height:"auto",closeOnSubmit:!1})}get title(){return game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:this.object.specializationName})}activateListeners(html){super.activateListeners(html),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("[name=existing-skill]").change(this._onSelectChange.bind(this))}async _onSelectChange(event){this.object.selected=event.currentTarget.value,this.render(!0)}async _onClickSubmit(event){if(""===this.object.selected){const obj=$(event.currentTarget).closest("form");this.object.name=obj.find("input[name=new-skill-name]").val()??"",this.object.baseValue=obj.find("input[name=base-value]").val()??""}if(""===this.object.selected&&""===this.object.name)return!1;this.object.resolve({selected:this.object.selected,name:this.object.name,baseValue:this.object.baseValue}),this.close()}async _updateObject(event,formData){}static async create({skills=[],allowCustom=!1,fixedBaseValue=!1,specializationName="",label="",baseValue=null}={}){const select=[];for(const skill of skills)select.push({id:skill.id,name:skill.name,base:skill.system.base});return await new Promise((resolve=>{new SkillSpecializationSelectDialog({specializationName,allowCustom,fixedBaseValue,allowSelect:skills.length>0,skills:select,selected:"",name:"",label,baseValue,resolve},{}).render(!0)}))}}class SkillValueDialog{static async create(name=null,baseValue=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-value.html",{base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:game.i18n.format("CoC7.SkillValue",{name}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class CoC7MeleeResoltion{constructor(initiatorMessage=null,targetMessage=null,messageId=null){this.initiatorMessage=initiatorMessage,this.targetMessage=targetMessage,this.messageId=messageId}async preCreateMessage(){const html=await renderTemplate(this.template,this),chatData={user:game.user.id,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const chatMessage=await ChatMessage.create(chatData);return this.messageId=chatMessage.id,chatMessage}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get target(){return this.targetMessage?CoC7MeleeTarget.getFromMessageId(this.targetMessage):null}get targetToken(){return this.target?chatHelper.getTokenFromKey(this.target.actorKey):null}get initiator(){return this.initiatorMessage?CoC7MeleeInitiator.getFromMessageId(this.initiatorMessage):null}get initiatorToken(){return this.initiator?chatHelper.getTokenFromKey(this.initiator.actorKey):null}async resolve(){if(this.target)switch(this.target.action){case"noResponse":this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.action="roll-melee-damage",this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target;break;case"dodge":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.action="roll-melee-damage",this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.DodgeSuccess",{name:this.target.name}),this.winner=this.target,this.looser=this.initiator,this.winnerImg=this.target.skill.img,this.winnerTitle=this.target.skill.name,this.action="dodge",this.rollDamage=!1);break;case"fightBack":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.weapon.img,this.winnerTitle=this.target.weapon.name,this.looser=this.initiator,this.rollDamage=!0);break;case"maneuver":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.ManeuverSuccess",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.looser=this.initiator,this.rollDamage=!1)}else this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1);this.winner&&(this.winner.roll.successLevel>=CoC7Check.successLevel.extreme?this.winner.roll.criticalDamage=!0:this.winner.roll.criticalDamage=!1),this.resolved=!0;const html=await renderTemplate(this.template,this);if(this.messageId){const message=game.messages.get(this.messageId),speakerData={};this.winner&&(this.winner.token&&(speakerData.token=this.winner.token.documment),this.winner.actor&&(speakerData.actor=this.winner.actor));const speaker=this.winner?ChatMessage.getSpeaker(speakerData):null,user=this.winner&&this.winner.actor.user?this.winner.actor.user:game.user;let msg;return message?(msg=speaker?await message.update({user:user.id,speaker,content:html}):await message.update({user:user.id,content:html}),await ui.chat.updateMessage(msg,!1),msg):void ui.notifications.warn("Resolition card missing, was deleted ?")}}get template(){return"systems/CoC7/templates/chat/combat/melee-resolution.html"}}class CoC7MeleeTarget extends ChatCardActor{constructor(actorKey,parentMessageId=null,fastForward=!1){super(actorKey,fastForward),this.actorKey=actorKey,this.initiatorKey=null,this.parentMessageId=parentMessageId,this.fastForward=fastForward,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.skillId=null,this.itemId=null,this.dodging=!1,this.notResponding=!1,this.fightingBack=!1,this.maneuvering=!1}get actionSelected(){return this.dodging||this.notResponding||this.fightingBack||this.maneuvering}get action(){return this.dodging?"dodge":this.notResponding?"noResponse":this.fightingBack?"fightBack":this.maneuvering?"maneuver":null}get weapon(){return this.actor.items.get(this.itemId)}get skill(){return this.actor.items.get(this.skillId)}set initiatorKey(x){this._initiatorKey=x,this.targetKey=x}get initiatorKey(){return this._initiatorKey||(!this._initiator&&this.parentMessageId&&(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator&&(this._initiatorKey=this._initiator.actorKey)),this._initiatorKey?this._initiatorKey:(ui.notifications.error(`No initiator found for target : ${this.actor.name}`),null)}get initiator(){if(!this.initiatorKey){if(!this.parentMessageId)return null;this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId),this.initiatorKey=this._initiator.actorKey}return chatHelper.getActorFromKey(this.initiatorKey)}get meleeInitiator(){return this._initiator||(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator}get template(){return"systems/CoC7/templates/chat/combat/melee-target.html"}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],target=CoC7MeleeTarget.getFromCard(card,messageId);return target.messageId=messageId,target}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.target"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const target=CoC7MeleeTarget.getFromCard(card);target.toggleFlag(flag),target.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async createChatCard(){const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData);this.actor.isToken&&(speaker.alias=this.actor.token.name);let user=game.user;if(void 0===this.actor.user){let owners=[];const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(this.actor.ownership))if(v===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER){if("default"===k){owners=game.users.map((a=>a.id));break}gms.includes(k)||owners.push(k)}let content="";switch(owners.length){case 0:break;case 1:void 0!==game.users.get(owners[0])&&(user=game.users.get(owners[0]));break;default:content="<p>"+game.i18n.localize("CoC7.MessageSelectSingleUserForTarget"),content+='<form id="selectform"><select name="user">';for(const k of owners)content=content+'<option value="'+k+'">'+game.users.get(k).name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectSingleUserForTarget"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(user=game.users.get(value))}})}}else void 0!==this.actor.user&&(user=this.actor.user);const chatData={user:user.id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const message=await ChatMessage.create(chatData);return this.messageId=message.id,message}async updateChatCard(){const message=game.messages.get(this.messageId);if(!game.user.isGM&&message.user.id!==game.user.id)return void ui.notifications.info(game.i18n.localize("CoC7.UnableToInteractWithChatCard"));const html=await renderTemplate(this.template,this),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}async getUpdatedChatCard(){renderTemplate(this.template,this).then((html=>html))}static async updateSelected(card,event){const target=CoC7MeleeTarget.getFromCard(card);switch(event.currentTarget.dataset.action){case"dodge":target.dodging=!0,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null;break;case"noResponse":target.dodging=!1,target.notResponding=!0,target.fightingBack=!1,target.maneuvering=!1,target.skillId=null,target.itemId=null;break;case"fightBack":target.dodging=!1,target.notResponding=!1,target.fightingBack=!0,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=event.currentTarget.dataset.weaponId;break;case"maneuver":target.dodging=!1,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!0,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null}return target.updateChatCard(),target}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;return check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="target",check.action=this.action,check.actor=this.actor,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),check}async publishNoReponseResult(){this.rolled=!0,this.resolved=!0,this.notResponding=!0;const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}static getFromCard(card,messageId=null){const actorKey=card.dataset.actorKey,parentMessageId=card.dataset.parentMessageId,fastForward="true"===card.dataset.fastForward,target=new CoC7MeleeTarget(actorKey,parentMessageId,fastForward);return target.roll=CoC7Roll.getFromCard(card),chatHelper.getObjectFromElement(target,card),card.closest(".message")?target.messageId=card.closest(".message").dataset.messageId:target.messageId=messageId,target}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total");switch(newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoC7RangeInitiator{constructor(actorKey=null,itemId=null,fastForward=!1){this.actorKey=actorKey,this.itemId=itemId,this.fastForward=fastForward,this.resolved=!1,this.cover=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1,this.singleShot=!1,this.multipleShots=!1,this.burst=!1,this.fullAuto=!1,this.tokenKey=null,this.aimed=!1,this.totalBulletsFired=0,this._targets=[];for(const t of[...game.user.targets]){const target=new CoC7RangeTarget(`${t.scene.id}.${t.id}`);target.token=t,this._targets.push(target)}if(this._targets.length)this._targets[0].active=!0;else{const target=new CoC7RangeTarget;target.active=!0,this._targets.push(target)}if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);if(this.token=chatHelper.getTokenFromKey(actorKey),this.token&&(this.tokenKey=actor.tokenKey),itemId){actor.items.get(itemId)&&(this.weapon.singleShot?this.singleShot=!0:this.weapon.system.properties.auto&&(this.fullAuto=!0))}}if(this.tokenKey)for(const t of this._targets)if(t.token&&this.token){t.distance=chatHelper.getDistance(t.token,this.token),t.roundedDistance=Math.round(100*t.distance.value)/100,t.distanceUnit=t.distance.unit;const distInYd=Math.round(100*chatHelper.toYards(t.distance))/100;if(this.actor){t.pointBlankRange=!1;distInYd<=this.actor.system.characteristics.dex.value/15&&(t.pointBlankRange=!0)}this.weapon&&this.weapon.baseRange&&(t.baseRange=!1,t.longRange=!1,t.extremeRange=!1,t.outOfRange=!1,this.weapon.system.properties.shotgun?(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=this.weapon.longRange&&(t.longRange=!0),distInYd>this.weapon.longRange&&distInYd<=this.weapon.extremeRange&&(t.extremeRange=!0),distInYd>this.weapon.extremeRange&&(t.outOfRange=!0)):(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=2*this.weapon.baseRange&&(t.longRange=!0),distInYd>2*this.weapon.baseRange&&distInYd<=4*this.weapon.baseRange&&(t.extremeRange=!0),distInYd>4*this.weapon.baseRange&&(t.outOfRange=!0)),t.baseRange||t.longRange||t.extremeRange||t.outOfRange||(t.baseRange=!0))}else t.baseRange=!0}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}get actor(){return chatHelper.getActorFromKey(this.actorKey)}get item(){return this.actor.items.get(this.itemId)}get weapon(){return this.item}get targets(){return this._targets||(this._targets=[]),this._targets}get target(){return this.targets&&this.targets.length?this.targets.pop():null}get skills(){return this.actor.getWeaponSkills(this.itemId)}get mainWeaponSkill(){return this.actor.items.get(this.weapon.system.skill.main.id)}get autoWeaponSkill(){return this.weapon.system.skill.alternativ.id?this.actor.items.get(this.weapon.system.skill.alternativ.id):this.mainWeaponSkill}get autoFire(){return this.burst||this.fullAuto}get multiTarget(){return this.fullAuto||this.multipleShots}get aiming(){return void 0===this._aiming&&(this._aiming=this.actor.getActorFlag("aiming")),this._aiming}get activeTarget(){return this._targets.length?this._targets.find((t=>t.active)):null}get shots(){return void 0===this._shots&&(this._shots=[]),this._shots}get currentShotRank(){return this.shots.length+1}get activeTargetShotDifficulty(){return this.shotDifficulty()}set aiming(b){this._aiming=b}get didAnyShotHit(){let anyHit=!1;for(const r of this.rolls)anyHit=anyHit||r.isSuccess;return anyHit}get successfulHits(){const hits=[];for(let index=0;index<this.rolls.length;index++)if(this.rolls[index].isSuccess){const hit={roll:this.rolls[index],shot:this.shots[index]};hits.push(hit)}return 0!==hits.length?hits:null}get shotFired(){return this.shots?this.shots.length:0}get totalAmmo(){return this.weapon.getBulletLeft()}get maxShots(){return this.fullAuto?"∞":this.weapon.system.usesPerRound.max?parseInt(this.weapon.system.usesPerRound.max):1}get ignoreAmmo(){return game.settings.get("CoC7","disregardAmmo")}get ignoreUsesPerRound(){return game.settings.get("CoC7","disregardUsePerRound")}get outOfAmmo(){return!this.ignoreAmmo&&this.totalBulletsFired>=this.weapon.getBulletLeft()}get outOfShots(){return!this.ignoreUsesPerRound&&(!!this.shots&&this.shots.length>=this.maxShots)}get volleySize(){if(!this.weapon.system.properties.auto)return 1;if(this._volleySize)return this._volleySize;const size=Math.floor(this.autoWeaponSkill.value/10);return size<3?3:size}set volleySize(x){x>=Math.floor(this.autoWeaponSkill.value/10)?this._volleySize=Math.floor(this.autoWeaponSkill.value/10):x<=3&&(this._volleySize=3),this._volleySize=parseInt(x)}get isVolleyMinSize(){return 3===this.volleySize}get isVolleyMaxSize(){return(Math.floor(this.autoWeaponSkill.value/10)<3?3:Math.floor(this.autoWeaponSkill.value/10))===this.volleySize}getTargetFromKey(key){return this._targets.find((t=>key===t.actorKey))}calcTargetsDifficulty(){for(const t of this.targets)t.shotDifficulty=this.shotDifficulty(t)}shotDifficulty(t=null){const target=t||this.activeTarget;let damage=this.weapon.system.range.normal.damage;this.weapon.system.properties.shotgun&&(t.longRange&&(damage=this.weapon.system.range.long.damage),t.extremeRange&&(damage=this.weapon.system.range.extreme.damage));let difficulty,modifier=target.modifier;difficulty=this.weapon.system.properties.shotgun?1:target.difficulty;let difficultyName="";if(this.aiming&&1===this.currentShotRank&&modifier++,this.advantage&&modifier++,this.disadvantage&&modifier--,this.reload&&modifier--,this.multipleShots&&!this.fullAuto&&modifier--,this.fullAuto&&(modifier-=this.currentShotRank-1),modifier<-2){difficulty+=Math.abs(modifier+2),difficulty>CoC7Check.difficultyLevel.critical&&(difficulty=CoC7Check.difficultyLevel.impossible),modifier=-2}return CoC7Check.difficultyLevel.regular===difficulty&&(difficultyName="Regular"),CoC7Check.difficultyLevel.hard===difficulty&&(difficultyName="Hard"),CoC7Check.difficultyLevel.extreme===difficulty&&(difficultyName="Extreme"),CoC7Check.difficultyLevel.critical===difficulty&&(difficultyName="Critical"),CoC7Check.difficultyLevel.impossible===difficulty&&(difficultyName="Impossible"),{level:difficulty,name:difficultyName,modifier,damage,impossible:difficulty===CoC7Check.difficultyLevel.impossible}}addShotAtCurrentTarget(){this.calcTargetsDifficulty();const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:1,transitBullets:0,bulletsShotTransit:1,transit:!1};let bulletLeft=this.totalAmmo-this.totalBulletsFired;if(this.fullAuto){if(this.currentShotRank>1){const previousShot=this.shots[this.currentShotRank-2];if(previousShot.actorKey!==this.activeTarget.actorKey){const distance=chatHelper.getDistance(chatHelper.getTokenFromKey(previousShot.actorKey),chatHelper.getTokenFromKey(this.activeTarget.actorKey));shot.transitBullets=Math.floor(chatHelper.toYards(distance)),shot.transitBullets>=bulletLeft&&!this.ignoreAmmo&&(shot.transitBullets=bulletLeft,bulletLeft=0),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.transitBullets,shot.transit=!0}}shot.bulletsShot=this.volleySize,shot.bulletsShot<=3&&(shot.bulletsShot=3),shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0),shot.bulletsShotTransit=shot.bulletsShot+shot.transitBullets}this.burst&&(shot.bulletsShot=parseInt(this.weapon.system.usesPerRound.burst)?parseInt(this.weapon.system.usesPerRound.burst):1,shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0)),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.bulletsShot,this.aiming&&(this.aiming=!1,this.aimed=!0),this.shots.push(shot)}get template(){return"systems/CoC7/templates/chat/combat/range-initiator.html"}async createChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;"singleShot"===flag||"multipleShots"===flag||"fullAuto"===flag?(this.singleShot=!1,this.multipleShots=!1,this.fullAuto=!1,"fullAuto"===flag&&(this.burst=!1),this[flag]=!0):"burst"===flag?(this.fullAuto=!1,this.singleShot||this.multipleShots||(this.singleShot=!0),this.burst=!this.burst):this[flag]=!this[flag]}async resolveCard(){if(this.rolls=[],this.multiTarget){let weaponMalfunction=!1,index=0;for(;!weaponMalfunction&&this.shots.length>index;){const roll=await this.shootAtTarget(this.shots[index]);roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll),await this.weapon.shootBullets(parseInt(this.shots[index].bulletsShot)+parseInt(this.shots[index].transitBullets)),roll.hasMalfunction&&(roll.isSuccess=!1,weaponMalfunction=!0),index++,this.rolls.push(roll)}}else{const roll=await this.shootAtTarget();roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll);let bulletFired=this.burst?parseInt(this.weapon.system.usesPerRound.burst):1;bulletFired>=this.totalAmmo&&(bulletFired=this.totalAmmo);const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:bulletFired,transitBullets:0,transit:!1};await this.weapon.shootBullets(bulletFired),roll.hasMalfunction&&(roll.isSuccess=!1),this.shots.push(shot),this.rolls.push(roll)}this.resolved=!0,this.rolled=!0,await this.updateChatCard()}async shootAtTarget(shot=null){const target=shot?this.getTargetFromKey(shot.actorKey):this.activeTarget,check=new CoC7Check;return check.actorKey=this.actorKey,check.actor=this.actorKey,check.item=this.itemId,check.isBlind=!1,check.isUnkonwn=!1,this.autoFire?check.skill=this.autoWeaponSkill:check.skill=this.mainWeaponSkill,this.multiTarget?(check.difficulty=shot.difficulty,check.diceModifier=shot.modifier):(this.calcTargetsDifficulty(),this.totalBulletsFired=parseInt(this.totalBulletsFired)+1,this.aiming&&(this.aiming=!1,this.aimed=!0),check.difficulty=this.activeTarget.shotDifficulty.level,check.diceModifier=this.activeTarget.shotDifficulty.modifier),check.details=`${game.i18n.localize("CoC7.Target")}: ${target.name}`,check.targetKey=target.actorKey,await check.roll(),check}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7RangeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}changeVolleySize(x){this.volleySize=this.volleySize+x,this.updateChatCard()}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".range.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7RangeInitiator.getFromCard(card);if(event.currentTarget.classList.contains("target-flag")){const target=event.currentTarget.closest(".target"),key=parseInt(target.dataset.targetKey);initiator.targets[key].toggleFlag(camelFlag)}else initiator.toggleFlag(camelFlag);initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}passRoll(rollIndex){const roll=this.rolls[rollIndex],luckAmount=parseInt(roll.luckNeeded);this.actor.spendLuck(luckAmount)?(roll.successLevel=roll.difficulty,roll.isSuccess=!0,roll.luckSpent=!0,this.updateChatCard()):ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`)}upgradeRoll(rollIndex,upgradeindex){const roll=this.rolls[rollIndex],increasedSuccess=roll.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel);roll.successLevel=newSuccessLevel,roll.difficulty<=newSuccessLevel&&(roll.isSuccess=!0),roll.luckSpent=!0,this.updateChatCard()}static getFromCard(card,messageId=null){const rangeInitiator=new CoC7RangeInitiator;rangeInitiator._targets=[],messageId?rangeInitiator.messageId=messageId:card.closest(".message")&&(rangeInitiator.messageId=card.closest(".message").dataset.messageId),chatHelper.getObjectFromElement(rangeInitiator,card);const cardTargets=card.querySelectorAll(".target");for(const t of cardTargets){const target=CoC7RangeTarget.getFromElement(t);rangeInitiator.targets.push(target)}const cardShots=card.querySelectorAll(".shot");if(cardShots)for(const s of cardShots){const shot={};chatHelper.getObjectFromElement(shot,s),rangeInitiator.shots.push(shot)}rangeInitiator.rolls=[];const rolls=card.querySelectorAll(".roll-result");for(const r of rolls){const roll=CoC7Roll.getFromElement(r);rangeInitiator.rolls.push(roll)}rangeInitiator.damage=[];const damageRolls=card.querySelectorAll(".damage-results");for(const dr of damageRolls){const damageRoll=CoC7Damage.getFromElement(dr);rangeInitiator.damage.push(damageRoll)}return rangeInitiator}async rollDamage(){this.damage=[];const hits=this.successfulHits;for(let i=0;i<hits.length;i++){const h=hits[i],volleySize=parseInt(h.shot.bulletsShot),damageRolls=[];if(volleySize>0){let damageFormula=String(h.shot.damage);damageFormula&&""!==damageFormula||(damageFormula="0");const damageDie=CoC7Damage.getMainDie(damageFormula),maxDamage=new Roll(damageFormula).evaluate({maximize:!0}).total,criticalDamageFormula=this.weapon.impale?`${damageFormula} + ${maxDamage}`:`${maxDamage}`,criticalDamageDie=CoC7Damage.getMainDie(criticalDamageFormula);let impalingShots=0,successfulShots=0,critical=!1;(this.fullAuto||this.burst)&&(successfulShots=Math.floor(volleySize/2)),0===successfulShots&&(successfulShots=1),h.roll.successLevel>=CoC7Check.difficultyLevel.extreme&&(impalingShots=successfulShots,successfulShots=volleySize-impalingShots,critical=!0,CoC7Check.difficultyLevel.critical!==h.roll.successLevel&&(CoC7Check.difficultyLevel.extreme<=h.roll.difficulty||h.shot.extremeRange)&&(successfulShots=volleySize,impalingShots=0,critical=!1));let total=0;for(let index=0;index<successfulShots;index++){const roll=new Roll(damageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:damageFormula,total:roll.total,die:damageDie,critical:!1}),total+=roll.total}for(let index=0;index<impalingShots;index++){const roll=new Roll(criticalDamageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:criticalDamageFormula,total:roll.total,die:criticalDamageDie,critical:!0}),total+=roll.total}let targetName="dummy",target=chatHelper.getTokenFromKey(h.roll.targetKey);target||(target=chatHelper.getActorFromKey(h.roll.targetKey)),target&&(targetName=target.name),this.damage.push({targetKey:h.roll.targetKey,targetName,rolls:damageRolls,total,critical,dealt:!1,resultString:game.i18n.format("CoC7.rangeCombatDamage",{name:targetName,total})})}}this.damageRolled=0!==this.damage.length,this.updateChatCard()}async dealDamage(){for(let dIndex=0;dIndex<this.damage.length;dIndex++){const actor=chatHelper.getActorFromKey(this.damage[dIndex].targetKey);if(null===actor)ui.notifications.error(game.i18n.localize("CoC7.NoTargetToDamage"));else{this.damage[dIndex].totalTaken=0,this.damage[dIndex].totalAbsorbed=0;for(let rIndex=0;rIndex<this.damage[dIndex].rolls.length;rIndex++){const dealtAmount=await actor.dealDamage(this.damage[dIndex].rolls[rIndex].total);this.damage[dIndex].totalTaken+=dealtAmount,this.damage[dIndex].rolls[rIndex].taken=dealtAmount,this.damage[dIndex].rolls[rIndex].absorbed=this.damage[dIndex].rolls[rIndex].total-dealtAmount,this.damage[dIndex].totalAbsorbed+=this.damage[dIndex].rolls[rIndex].total-dealtAmount}this.damage[dIndex].dealt=!0,this.damage[dIndex].resultString=game.i18n.format("CoC7.rangeCombatDamageArmor",{name:this.damage[dIndex].targetName,total:this.damage[dIndex].totalTaken,armor:this.damage[dIndex].totalAbsorbed})}}this.damageDealt=!0,this.updateChatCard()}}class CoC7RangeTarget{constructor(actorKey=null){this.actorKey=actorKey,this.cover=!1,this.pointBlankRange=!1,this.baseRange=!0,this.longRange=!1,this.extremeRange=!1,this.inMelee=!1}get big(){return void 0===this._big&&(this.actor&&this.actor.build?this._big=this.actor.build>=4:this._big=!1),this._big}set big(b){this._big=b}get small(){return void 0===this._small&&(this.actor&&this.actor.build?this._small=this.actor.build<=-2:this._small=!1),this._small}set small(b){this._small=b}get normal(){return!this.big&&!this.small}set normal(b){this._big=!1,this._small=!1}get isFast(){return!(!this.actor||!this.actor.mov)&&this.actor.mov>=8}get fast(){return void 0===this._fast&&(this._fast=!1),this._fast}set fast(b){this._fast=b}get actor(){return this.actorKey&&!this._actor&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this._actor}get name(){return this.token?this.token.name:this.actor?this.actor.name:"Dummy"}get img(){return this.token&&this.token.document?.texture.src?this.token.document?.texture.src:this.actor?this.actor.data.img:"../icons/svg/mystery-man-black.svg"}get token(){return!this._token&&this.actorKey&&(this._token=chatHelper.getTokenFromKey(this.actorKey)),this._token}get sizeText(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTargetTitle"):this.small?game.i18n.localize("CoC7.rangeCombatCard.SmallTargetTitle"):game.i18n.localize("CoC7.rangeCombatCard.NormalTargetTitle")}get sizeLabel(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTarget"):this.small?game.i18n.localize("CoC7.combatCard.SmallTarget"):game.i18n.localize("CoC7.rangeCombatCard.NormalTarget")}get difficulty(){return this.baseRange||this.pointBlankRange?CoC7Check.difficultyLevel.regular:this.longRange?CoC7Check.difficultyLevel.hard:this.extremeRange?CoC7Check.difficultyLevel.extreme:CoC7Check.difficultyLevel.impossible}get modifier(){let modifier=0;return this.cover&&modifier--,this.pointBlankRange&&modifier++,this.fast&&modifier--,this.small&&modifier--,this.big&&modifier++,this.inMelee&&modifier--,this.surprised&&modifier++,modifier}set token(t){this._token=t}static getFromElement(element){const target=new CoC7RangeTarget;return chatHelper.getObjectFromElement(target,element),target}static changeDisplayedTarget(event){if(!event.currentTarget.classList.contains("target-selector"))return null;return event.currentTarget.closest(".targets").querySelectorAll(".target")}attachToElement(element){chatHelper.attachObjectToElement(this,element)}toggleFlag(flag){"baseRange"===flag||"longRange"===flag||"extremeRange"===flag||"pointBlankRange"===flag?(this.pointBlankRange=!1,this.baseRange=!1,this.longRange=!1,this.extremeRange=!1,this.outOfRange=!1,this[flag]=!0):"size"===flag?this.small?(this.small=!1,this.big=!0):this.big?(this.small=!1,this.big=!1):this.small=!0:this[flag]=!this[flag],"fast"===flag&&this.fast&&!this.isFast&&ui.notifications.warn(game.i18n.format("CoC7.WarnFastTargetWithWrongMOV",{mov:this.actor.mov}))}}const CHAT_COC7_MESSAGE_FAKEROLL='<div class="dice-roll"><div class="dice-result"><div class="dice-formula">???</div><h4 class="dice-total">?</h4></div></div>';class CoC7Chat{static renderChatMessageHook(chatMessage,html){chatMessage.getFlag("CoC7","GMSelfRoll")&&!game.user.isGM&&(html.find(".whisper-to").remove(),html.find(".flavor-text").replaceWith(`<span class="flavor-text">${game.i18n.localize("CoC7.RollSecretDice")}</span>`),html.find(".message-content").replaceWith(`<div class="message-content">${CHAT_COC7_MESSAGE_FAKEROLL}</div>`)),chatMessage.getFlag("CoC7","removeWisperTargets")&&!game.user.isGM&&html.find(".whisper-to").remove(),chatMessage.getFlag("CoC7","fakeRoll")&&game.user.isGM&&(html.find(".flavor-text").replaceWith(game.i18n.localize("CoC7.KeeperSentDecoy")),html.find(".message-content").remove())}static fakeRollMessage(){const chatData={user:game.user.id,flavor:game.i18n.localize("CoC7.RollSecretDice"),whisper:game.users.players,type:CONST.CHAT_MESSAGE_TYPES.WHISPER,flags:{CoC7:{GMSelfRoll:!1,removeWisperTargets:!0,fakeRoll:!0}},content:CHAT_COC7_MESSAGE_FAKEROLL};ChatMessage.create(chatData)}static ready(){game.CoC7="init"}static async chatListeners(app,html){html.on("click",".card-buttons button",CoC7Chat._onChatCardAction.bind(this)),html.on("click",".card-title",CoC7Chat._onChatCardToggleContent.bind(this)),html.on("click",".radio-switch",CoC7Chat._onChatCardRadioSwitch.bind(this)),html.on("click",".panel-switch",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".simple-flag",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".volley-size",CoC7Chat._onChatCardVolleySize.bind(this)),html.on("click",".dropdown-element",CoC7Chat._onDropDownElementSelected.bind(this)),html.on("click",".simple-toggle",CoC7Chat._onToggleSelected.bind(this)),html.on("click",".target-selector",CoC7Chat._onTargetSelect.bind(this)),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.on("click","coc7-inline-result",CoC7Chat._onInline.bind(this)),OpposedCheckCard.bindListerners(html),CombinedCheckCard.bindListerners(html)}static _onOpenActor(event){event.preventDefault();const actorKey=event.currentTarget.dataset.actorKey;if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);actor.isOwner&&actor.sheet.render(!0)}}static async onUpdateChatMessage(chatMessage){if(ui.chat.scrollBottom(),game.user.isGM&&0===chatMessage.type){const card=$(chatMessage.content)[0];if(card.classList.contains("melee")&&"true"===card.dataset.resolved){if(card.classList.contains("initiator"))if(card.dataset.targetCard){const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id),target=CoC7MeleeTarget.getFromMessageId(initiator.targetCard);if(target.resolved){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,target.messageId,target.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}else{const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id);if(initiator.resolutionCard){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,null,initiator.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}if(card.classList.contains("target")){const target=CoC7MeleeTarget.getFromMessageId(chatMessage.id),resolutionCard=new CoC7MeleeResoltion(target.parentMessageId,chatMessage.id,target.resolutionCard);await resolutionCard.resolve(),target.meleeInitiator.checkRevealed||await target.meleeInitiator.revealCheck()}}}}static async renderMessageHook(message,html){if(ui.chat.scrollBottom(),InteractiveChatCard.bindListeners(html),message.getFlag("CoC7","checkRevealed")&&(html.find(".dice-roll").removeClass("gm-visible-only"),html[0].dataset.checkRevealed=!0),html.find(".dropbtn").click((event=>event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show"))),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),game.user.isGM){const card=html[0].querySelector(".coc7.chat-card");if(card&&card.classList.contains("roll-card")&&"true"!==card.dataset.processed&&card.dataset.refMessageId){const roll=CoC7Roll.getFromElement(card);"target"===card.dataset.side&&(roll.defendantId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),"initiator"===card.dataset.side&&(roll.initiatorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),card.dataset.processed="true",CoC7Chat.updateCombatCardTarget(roll)}}const userOnly=html.find(".target-only");for(const element of userOnly)if(!game.user.isGM){element.style.display="none";const actorId=element.getAttribute("data-actor-id");actorId&&game.actors.get(actorId).isOwner&&(element.style.display="block")}const gmOnly=html.find(".gm-only");for(const zone of gmOnly)game.user.isGM||(zone.style.display="none");const userVisibleOnly=html.find(".user-visible-only");for(const elem of userVisibleOnly)game.user.isGM&&(elem.style.display="none");const gmVisibleOnly=html.find(".gm-visible-only");for(const elem of gmVisibleOnly)game.user.isGM||game.user.isTrusted&&game.settings.get("CoC7","trustedCanSeeChatCard")||(elem.style.display="none");const ownerVisibleOnly=html.find(".owner-visible-only");for(const zone of ownerVisibleOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||game.user.isGM)&&(zone.style.display="none")}if(!game.user.isGM){const ownerOnly=html.find(".owner-only");for(const zone of ownerOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey||zone.dataset?.actorId);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||!actor&&!game.user.isGM)&&(zone.style.display="none")}const gmSelectOnly=html.find(".gm-select-only");if(!game.user.isTrusted||!game.settings.get("CoC7","trustedCanModfyChatCard"))for(const select of gmSelectOnly)select.classList.add("inactive"),select.classList.remove("simple-flag")}}static get actionTypeString(){return{fightBack:"CoC7.fightBack",maneuver:"CoC7.maneuver",dodging:"CoC7.dodge"}}static _onTargetSelect(event){const index=parseInt(event.currentTarget.dataset.key),targetsSelector=event.currentTarget.closest(".targets-selector");for(const i of targetsSelector.querySelectorAll("img"))i.style.border="none";targetsSelector.querySelector(`[data-key="${index}"]`).querySelector("img").style.border="1px solid #000";const targets=event.currentTarget.closest(".targets");for(const t of targets.querySelectorAll(".target"))t.style.display="none",t.dataset.active="false";const targetToDisplay=targets.querySelector(`[data-target-key="${index}"]`);targetToDisplay.style.display="block",targetToDisplay.dataset.active="true"}static _onDropDownElementSelected(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.closest(".toggle-switch").classList.add("switched-on"),event.currentTarget.closest(".dropdown-content").classList.toggle("show");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");switch(button.dataset.action="defending",button.dataset.actionType=event.currentTarget.dataset.action,button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.dataset.itemId=event.currentTarget.dataset.weaponId,button.dataset.itemName=event.currentTarget.dataset.weaponName,event.currentTarget.dataset.action){case"maneuver":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`;break;case"fightBack":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.weaponName} (${event.currentTarget.dataset.skillValue}%)`}}static async _onInline(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("inline-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _onToggleSelected(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);if(""===event.currentTarget.dataset.skillId)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorNoDodgeSkill"));const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.classList.add("switched-on");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");button.dataset.action="defending",button.dataset.actionType="dodging",button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`}static _onChatCardRadioSwitch(event){event.preventDefault();const optionList=event.currentTarget.parentElement.getElementsByClassName("radio-switch");let index;for(index=0;index<optionList.length;index++){const element=optionList[index];element.dataset.property===event.currentTarget.dataset.property?element.classList.add("switched-on"):element.classList.remove("switched-on")}event.currentTarget.parentElement.dataset.selected=event.currentTarget.dataset.property}static async _onChatCardVolleySize(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("range")&&card.classList.contains("initiator")){const rangeCard=CoC7RangeInitiator.getFromCard(card);event.currentTarget.classList.contains("increase")?rangeCard.changeVolleySize(1):event.currentTarget.classList.contains("decrease")&&rangeCard.changeVolleySize(-1)}}static async _onChatCardToggleSwitch(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");card.classList.contains("melee")&&(card.classList.contains("initiator")&&CoC7MeleeInitiator.updateCardSwitch(event),card.classList.contains("target")&&CoC7MeleeTarget.updateCardSwitch(event)),card.classList.contains("range")&&card.classList.contains("initiator")&&CoC7RangeInitiator.updateCardSwitch(event),card.classList.contains("damage"),card.classList.contains("roll-card")&&CoC7Check.updateCardSwitch(event)}static _getChatCardActor(card){const cardData=card.dataset.object?JSON.parse(unescape(card.dataset.object)):card.dataset;if(cardData.actorKey)return CoC7Chat._getActorFromKey(cardData.actorKey);const tokenKey=cardData.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}const actorId=cardData.actorId;if(actorId)return game.actors.get(actorId);const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){const chatMessage=game.messages.get(messageId);if(chatMessage.user)return chatMessage.user.character}return null}static isCardOwner(card){const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){return game.messages.get(messageId).ownner||!1}return!1}static _getActorFromKey(key){if(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}return game.actors.get(key)||null}}static getActorFromToken(tokenKey){const token=CoC7Chat.getToken(tokenKey);return token?token.actor:null}static getToken(tokenKey){if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token||new Token(tokenData):null}}return null}static async updateChatCard(card,messId=null){const messageId=null==messId?card.closest(".message").dataset.messageId:messId,message=game.messages.get(messageId),msg=await message.update({content:card.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static async _onChatCardAction(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card");if(!card)return;const originMessage=button.closest(".message"),action=button.dataset.action;if(CoC7Chat._getChatCardActor(card))switch(action){case"useLuck":{const luckAmount=parseInt(button.dataset.luckAmount),newSuccessLevel=parseInt(event.currentTarget.dataset.newSuccessLevel);if(card.classList.contains("melee")){let meleeCard;card.classList.contains("target")&&(meleeCard=CoC7MeleeTarget.getFromCard(card)),card.classList.contains("initiator")&&(meleeCard=CoC7MeleeInitiator.getFromCard(card)),meleeCard.upgradeRoll(luckAmount,newSuccessLevel,card)}else if(card.classList.contains("range")){const rangeCard=CoC7RangeInitiator.getFromCard(card),rollResult=button.closest(".roll-result"),rollIndex=rollResult?parseInt(rollResult.dataset.index):null;if(button.classList.contains("pass-check"))rangeCard.passRoll(rollIndex);else{const upgradeIndex=parseInt(button.dataset.index);rangeCard.upgradeRoll(rollIndex,upgradeIndex)}}else if(card.classList.contains("roll-card")||null!=card.querySelector(".roll-result")){const check=await CoC7Check.getFromCard(card);if(button.classList.contains("pass-check")){const luckAmount=parseInt(button.dataset.luckAmount);check.forcePass(luckAmount)}else{const upgradeIndex=parseInt(button.dataset.index);await check.upgradeCheck(upgradeIndex)}}else{const actor=CoC7Chat._getChatCardActor(card),detailedResultPlaceHolder=card.querySelector(".result-details");if(actor.spendLuck(luckAmount)){const result=card.querySelector(".dice-total");switch(card.dataset.successLevel=newSuccessLevel,card.dataset.processed="false",newSuccessLevel){case CoC7Check.successLevel.regular:result.innerText=game.i18n.localize("CoC7.RegularSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:result.innerText=game.i18n.localize("CoC7.HardSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:result.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:result.innerText=game.i18n.localize("CoC7.CriticalSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}result.classList.replace("failure","success"),result.classList.remove("fumble"),card.querySelector(".card-buttons").remove(),card.querySelector(".dice-tooltip").style.display="none",await CoC7Chat.updateChatCard(card)}else ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}))}break}case"push":{const newCard=card.cloneNode(!0),result=newCard.querySelector(".dice-total");result.innerText=result.innerText+game.i18n.localize("CoC7.PushingSkill"),result.classList.remove("failure"),newCard.querySelector(".card-buttons").remove(),newCard.dataset.pushedRoll=!0,await CoC7Chat.updateChatCard(newCard,originMessage.dataset.messageId),await CoC7Check.push(card);break}case"defending":{let defender,defenderKey=event.currentTarget.closest(".defender-action-select").dataset.tokenId;defenderKey?defender=this.getActorFromToken(defenderKey):(defenderKey=event.currentTarget.closest(".defender-action-select").dataset.actorId,defender=game.actors.get(defenderKey));const responseType=event.currentTarget.dataset.actionType,outnumbered="true"===event.currentTarget.dataset.outnumbered,check=new CoC7Check;switch(check.referenceMessageId=originMessage.dataset.messageId,check.rollType="opposed",check.side="target",check.action=responseType,responseType){case"dodging":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"fightBack":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.item=event.currentTarget.dataset.itemId,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"maneuver":{const actor=CoC7Chat._getChatCardActor(card);if(defender.build<=actor.build-3)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorManeuverNotPossible"));check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),defender.build<actor.build&&(check.diceModifier=check.diceModifier-(actor.build-defender.build)),check.diceModifier<-2&&(check.difficulty=check.difficulty+Math.abs(check.diceModifier)-2,check.diceModifier=-2),await check.roll(),check.toMessage();break}}break}case"melee-initiator-roll":{const initiator=CoC7MeleeInitiator.getFromCard(card),check=await initiator.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await initiator.publishCheckResult();break}case"melee-target-no-response":{const target=CoC7MeleeTarget.getFromCard(card);await target.publishNoReponseResult();break}case"melee-target-roll":{const target=CoC7MeleeTarget.getFromCard(card),check=await target.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await target.publishCheckResult();break}case"roll-melee-damage":{const damageChatCard=new DamageCard({critical:"true"===button.dataset.critical,fastForward:event.shiftKey});damageChatCard.actorKey=button.dataset.dealer,damageChatCard.targetKey=button.dataset.target,damageChatCard.itemId=button.dataset.weapon,originMessage.dataset.messageId&&(damageChatCard.messageId=originMessage.dataset.messageId),damageChatCard.updateChatCard();break}case"range-initiator-shoot":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);rangeInitiator.addShotAtCurrentTarget(),await rangeInitiator.updateChatCard();break}case"range-initiator-roll":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.resolveCard();break}case"roll-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.rollDamage();break}case"deal-melee-damage":{const targetKey=card.dataset.targetKey,amount=card.dataset.result,targetActor=chatHelper.getActorFromKey(targetKey);await targetActor.dealDamage(amount);const buttons=card.querySelector(".card-buttons"),diceTotal=card.querySelector(".dice-total");$(diceTotal).append('<i class="fas fa-check"></i>'),buttons&&buttons.remove(),await CoC7Chat.updateChatCard(card);break}case"deal-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.dealDamage();break}case"testcheck":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-pass":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-fail":(await CoC7Check.getFromCard(card)).forceFail();break;case"increase-success-level":(await CoC7Check.getFromCard(card)).increaseSuccessLevel();break;case"decrease-success-level":(await CoC7Check.getFromCard(card)).decreaseSuccessLevel();break;case"reveal-check":{const check=await CoC7Check.getFromCard(card);check.isBlind=!1,check.computeCheck(),isCtrlKey(event),check.updateChatCard({makePublic:!0});break}case"roll-check-card":{const check=await CoC7Check.getFromCard(card);check.standby=!1,await check._perform(),check.updateChatCard({forceRoll:!0});break}case"flag-for-development":{const check=await CoC7Check.getFromCard(card);await check.flagForDevelopement(),check.computeCheck(),check.updateChatCard();break}case"reset-creature-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.clearSanLossReason(),await sanCheck.updateChatCard();break}case"roll-san-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSan(),await sanCheck.updateChatCard();break}case"advance-state":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.advanceState(button.dataset.state),await sanCheck.updateChatCard();break}case"roll-san-loss":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSanLoss(),sanCheck.updateChatCard();break}case"roll-int-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollInt(),sanCheck.updateChatCard();break}case"roll-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);await conCheck.rollCon(),conCheck.updateChatCard();break}case"reveal-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);conCheck.isBlind=!1,conCheck.updateChatCard();break}}}static _onChatCardToggleContent(event){event.preventDefault();const content=event.currentTarget.closest(".chat-card").querySelector(".card-content");content&&(content.style.display?content.style.display="none"===content.style.display?"block":"none":content.style.display="block")}}class CoC7MeleeInitiator extends ChatCardActor{constructor(actorKey=null,itemId=null,fastForward=!1){super(actorKey,fastForward),this.itemId=itemId,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1}get template(){return"systems/CoC7/templates/chat/combat/melee-initiator.html"}async revealCheck(){const chatMessage=game.messages.get(this.messageId);await chatMessage.setFlag("CoC7","checkRevealed",!0),await ui.chat.updateMessage(chatMessage,!1)}async createChatCard(){chatHelper.getActorImgFromKey(this.actorKey);const html=await renderTemplate(this.template,this),speakerData={};this.token?speakerData.token=this:speakerData.actor=this;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;if(check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="initiator",check.action="attack",check.actor=this.actorKey,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,game.user.isGM?this.checkRevealed=!1:this.checkRevealed=!0,this.outnumbered&&(check.diceModifier+=1),this.surprised&&(check.diceModifier+=1),this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),this.criticalDamage=check.successLevel===CoC7Check.successLevel.extreme||check.successLevel===CoC7Check.successLevel.critical,this.hasTarget&&!this.autoSuccess){const message=await game.CoC7socket.executeAsGM("gmcreatemessageas",{targetKey:this.targetKey,messageId:this.messageId,fastForward:this.fastForward,actorKey:this.actorKey});this.targetCard=message.id||message._id}return this.autoSuccess&&!this.check.isFumble&&this.check.forcePass(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");if(!this.targetCard&&!this.autoSuccess&&this.hasTarget){const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id}await this.updateChatCard()}static getFromCard(card,messageId=null){const initiator=new CoC7MeleeInitiator;return chatHelper.getObjectFromElement(initiator,card),initiator.roll=CoC7Roll.getFromCard(card),card.closest(".message")?initiator.messageId=card.closest(".message").dataset.messageId:initiator.messageId=messageId,initiator}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7MeleeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7MeleeInitiator.getFromCard(card);initiator.toggleFlag(flag),initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(game.i18n.format("CoC7.LuckNotEnough",{name:this.actor.name})),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total"),rollDamageButton=oldCard.querySelector('button[data-action="roll-melee-damage"]');switch(rollDamageButton&&rollDamageButton.classList.remove("invisible"),newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoCActor extends Actor{constructor(data,context){if(data.type in CONFIG.Actor.documentClasses&&!context?.extended)return new CONFIG.Actor.documentClasses[data.type](data,{extended:!0,...context});super(data,context)}async initialize(){super.initialize(),await this.creatureInit()}prepareBaseData(){if(["character","npc","creature"].includes(this.type)){this.system.skills={};for(const i of this.items)"skill"===i.type&&(this.system.skills[`${i.itemIdentifier}`]={foundryID:i.id,cocid:i.flags?.CoC7?.cocidFlag?.id,value:i.rawValue,bonusDice:i.system.bonusDice});if(void 0===this.system.attribs.san.dailyLimit)if(this.system.attribs.san.oneFifthSanity){const s=this.system.attribs.san.oneFifthSanity.split("/");s[1]&&!isNaN(Number(s[1]))?this.system.attribs.san.dailyLimit=Number(s[1]):this.system.attribs.san.dailyLimit=0}else this.system.attribs.san.dailyLimit=0;this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.build.current=this.hp}super.prepareBaseData()}prepareEmbeddedDocuments(){super.prepareEmbeddedDocuments()}prepareDerivedData(){if(["character","npc","creature"].includes(this.type)){super.prepareDerivedData(),this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.hp.max=this.rawHpMax,null===this.hp&&(this.system.attribs.hp.value=this.rawHpMax),this.system.attribs.mp.max=this.rawMpMax,null===this.mp&&(this.system.attribs.mp.value=this.rawMpMax),this.system.attribs.san.max=this.rawSanMax,null===this.san&&(this.system.attribs.san.value=this.rawSanMax);const filterMatrix=[];this.system.attribs.hp.auto&&filterMatrix.push("system.attribs.hp.max"),this.system.attribs.mp.auto&&filterMatrix.push("system.attribs.mp.max"),this.system.attribs.san.auto&&filterMatrix.push("system.attribs.san.max"),this.system.attribs.mov.auto&&filterMatrix.push("system.attribs.mov.value"),this.system.attribs.db.auto&&filterMatrix.push("system.attribs.db.value"),this.system.attribs.build.auto&&filterMatrix.push("system.attribs.build.value");const changes=this.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);changes.sort(((a,b)=>a.priority-b.priority));const selectChanges=changes.filter((e=>filterMatrix.includes(e.key)));for(const change of selectChanges)change.effect.apply(this,change);this.hpMax&&this.hpMax<this.hp&&(this.system.attribs.hp.value=this.hpMax),this.mpMax&&this.mpMax<this.mp&&(this.system.attribs.mp.value=this.mpMax),this.sanMax&&this.sanMax<this.san&&(this.system.attribs.san.value=this.sanMax)}}static async create(data,options={}){return"character"===data.type?data.prototypeToken=foundry.utils.mergeObject(data.prototypeToken||{},{actorLink:!0,disposition:1,sight:{enabled:!0}}):"npc"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/cultist.svg"):"creature"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/floating-tentacles.svg"):"container"===data.type&&(void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="icons/svg/chest.svg"),data.prototypeToken=foundry.utils.mergeObject(data.prototypeToken||{},{actorLink:!0})),super.create(data,options)}checkUndefinedAuto(){const returnData={attribs:{hp:{},mp:{},san:{},mov:{},db:{},build:{}}};return void 0===this.system.attribs?.hp?.auto&&(returnData.attribs.hp.auto=!0),void 0===this.system.attribs?.mp?.auto&&(returnData.attribs.mp.auto=!0),void 0===this.system.attribs?.san?.auto&&(returnData.attribs.san.auto=!0),void 0===this.system.attribs?.mov?.auto&&(returnData.attribs.mov.auto=!0),void 0===this.system.attribs?.db?.auto&&(returnData.attribs.db.auto=!0),void 0===this.system.attribs?.build?.auto&&(returnData.attribs.build.auto=!0),returnData}get characteristics(){const characteristics={str:{value:null,shortName:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,shortName:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,shortName:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,shortName:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,shortName:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,shortName:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,shortName:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,shortName:"CHARAC.EDU",label:"CHARAC.Education",formula:null}};if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))characteristics[key]={key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value,hard:Math.floor(value.value/2)||null,extreme:Math.floor(value.value/5)||null,formula:value.formula};return characteristics}static async initToken(createData){}get hasTempoInsane(){return this.hasConditionStatus(COC7.status.tempoInsane)}get getTempoInsaneDurationText(){return this.hasConditionValue(COC7.status.tempoInsane,"durationText")}get hasIndefInsane(){return this.hasConditionStatus(COC7.status.indefInsane)}get portrait(){return game.settings.get("CoC7","useToken")&&(this.token?.texture?.src||this.prototypeToken?.texture?.src)||this.img}async enterBoutOfMadness(realTime=!0,duration=1){let result=null;const boutOfMadnessTableId=realTime?game.settings.get("CoC7","boutOfMadnessRealTimeTable"):game.settings.get("CoC7","boutOfMadnessSummaryTable");if("none"!==boutOfMadnessTableId){result={phobia:!1,mania:!1,description:null};const boutOfMadnessTable=game.tables.get(boutOfMadnessTableId);if(result.tableRoll=await boutOfMadnessTable.roll(),void 0!==result.tableRoll.results[0]){if(CONST.TABLE_RESULT_TYPES.DOCUMENT===result.tableRoll.results[0].type){const item=game.items.get(result.tableRoll.results[0].documentId);if(void 0!==item){item.system?.type?.phobia&&(result.phobia=!0),item.system?.type?.mania&&(result.mania=!0),result.description=`${item.name}:`+await TextEditor.enrichHTML(item.system.description.value,{async:!0}),result.name=item.name;const itemData=item.toObject();delete itemData._id,await this.createEmbeddedDocuments("Item",[itemData])}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessItemNotFound"))}CONST.TABLE_RESULT_TYPES.TEXT===result.tableRoll.results[0].type&&(result.description=await TextEditor.enrichHTML(result.tableRoll.results[0].text,{async:!0}))}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessTableNotFound"))}return realTime?(this.setCondition(COC7.status.tempoInsane,{realTime,duration}),result):result}static emptySkill(skillName,value,{rarity=!1,push=!0,combat=!1,img=!1,specialization=!1}={}){const data={name:skillName,type:"skill",system:{value,skillName,specialization:"",properties:{special:!1,rarity,push,combat}}};if(!1!==img&&(data.img=img),!1!==specialization){const parts=CoC7Item.getNamePartsSpec(skillName,specialization);data.system.specialization=parts.specialization,data.system.skillName=parts.skillName,data.name=parts.name,data.system.properties.special=!0}return data}async createSkill(skillName,value,showSheet=!1){const data=CoCActor.emptySkill(skillName,value);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createWeaponSkill(name,firearms=!1,base=null){const skillData=await SkillSpecSelectDialog.create([],game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),0,name),value=Number(skillData.get("base-value")),parts=CoC7Item.getNamePartsSpec(name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),data={name:parts.name,type:"skill",system:{base:isNaN(value)?0:value,adjustments:{personal:null,occupation:null,archetype:null,experience:null},skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}};await this.createEmbeddedDocuments("Item",[data],{renderSheet:!base});return this.getSkillsByName(name)[0]}async creatureInit(){if("creature"!==this.type)return;if(this.getActorFlag("initialized"))return;if(0===this.getSkillsByName(game.i18n.localize(COC7.creatureFightingSkill)).length){try{const parts=CoC7Item.getNamePartsSpec(game.i18n.localize(COC7.creatureFightingSkill),game.i18n.localize(COC7.fightingSpecializationName)),data={type:"skill",name:parts.name,system:{base:0,value:null,skillName:parts.skillName,specialization:parts.specialization,properties:{combat:!0,fighting:!0,special:!0},flags:{}}},skill=await this.createEmbeddedDocuments("Item",[data],{renderSheet:!1}),attack=await this.createEmbeddedDocuments("Item",[{name:"Innate attack",type:"weapon",system:{description:{value:"Creature's natural attack",chat:"Creature's natural attack"},wpnType:"innate",properties:{addb:!0,slnt:!0}}}],{renderSheet:!1});if(skill.length>0&&attack.length>0){const createdAttack=this.items.get(attack[0].id);await createdAttack.update({"system.skill.main.id":skill[0].id,"system.skill.main.name":skill[0].name})}}catch(err){console.error("Creature init: "+err.message)}await this.setActorFlag("initialized")}}async createItem(itemName,quantity=1,showSheet=!1){const data={name:itemName,type:"item",system:{quantity}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptyBook(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newBookName)))return this.createBook(game.i18n.localize(COC7.newBookName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newBookName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newBookName)+" "+index;return this.createBook(itemName,showSheet)}async createBook(itemName,showSheet=!1){const data={name:itemName,type:"book",system:{}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySpell(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSpellName)))return this.createSpell(game.i18n.localize(COC7.newSpellName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;return this.createSpell(itemName,showSheet)}static emptySpell(itemName){return{name:itemName,type:"spell",system:{}}}async createSpell(itemName,showSheet=!1){const data=CoCActor.emptySpell(itemName);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySkill(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSkillName)))return this.createSkill(game.i18n.localize(COC7.newSkillName),"character"!==this.type?1:null,showSheet);let index=0,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;for(;this.getItemIdByName(skillName);)index++,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;return this.createSkill(skillName,null,showSheet)}async createEmptyItem(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newItemName)))return this.createItem(game.i18n.localize(COC7.newItemName),1,showSheet);let index=0,itemName=game.i18n.localize(COC7.newItemName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newItemName)+" "+index;return this.createItem(itemName,1,showSheet)}async createEmptyWeapon(event=null,properties={}){const showSheet=!event||!event.shiftKey;let weaponName=game.i18n.localize(COC7.newWeaponName);if(this.getItemIdByName(game.i18n.localize(COC7.newWeaponName))){let index=0;for(weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index;this.getItemIdByName(weaponName);)index++,weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index}const data={name:weaponName,type:"weapon",system:{properties:{}}};for(const[key]of Object.entries(COC7.weaponProperties))data.system.properties[key]=Object.prototype.hasOwnProperty.call(properties,key)??!1;await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createBioSection(title=null){const bio=this.system.biography?foundry.utils.duplicate(this.system.biography):[];bio.push({title,value:null}),await this.update({"system.biography":bio},{renderSheet:!1})}async updateBioValue(index,content){const bio=foundry.utils.duplicate(this.system.biography);bio[index].value=content,await this.update({"system.biography":bio},{render:!1})}async updateBioTitle(index,title){const bio=foundry.utils.duplicate(this.system.biography);bio[index].title=title,await this.update({"system.biography":bio})}async deleteBioSection(index){const bio=foundry.utils.duplicate(this.system.biography);bio.splice(index,1),await this.update({"system.biography":bio})}async moveBioSectionUp(index){if(0===index)return;const bio=foundry.utils.duplicate(this.system.biography);if(index>=bio.length)return;const elem=bio.splice(index,1)[0];bio.splice(index-1,0,elem),await this.update({"system.biography":bio})}async moveBioSectionDown(index){const bio=foundry.utils.duplicate(this.system.biography);if(index>=bio.length-1)return;const elem=bio.splice(index,1)[0];bio.splice(index+1,0,elem),await this.update({"system.biography":bio})}async updateTextArea(textArea){const name="system."+textArea.dataset.areaName;await this.update({[name]:textArea.value})}async createEmbeddedDocuments(embeddedName,dataArray,options){const processedDataArray=[];let baseValue=0,baseCalculated=0,archetype=!1,occupation=!1;for(let data of dataArray)switch(data.type){case"skill":{if(baseValue=data.system.base,baseCalculated=await CoC7Item.calculateBase(this,data),"character"!==this.type){if(this.getItemIdByName(data.name))return;if(baseValue&&String(baseValue)!==String(data.system.value)&&(data.system.value=baseCalculated),isNaN(Number(data.system.value))){let value;try{value=(await new Roll(data.system.value,this.parseCharacteristics()).evaluate({async:!0})).total}catch(err){value=null}value&&(data.system.value=Math.floor(value))}}else data.system.value=null;let addThis=!0;if(CoC7Item.isAnySpec(data)){const isAnyButNotFlagged=(!data.system.properties?.requiresname??!1)&&!data.system.properties?.picknameonly;let skillList=[];const group=game.system.api.cocid.guessGroupFromDocument(data);if(group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>(item.system.properties?.special??!1)&&!item.system.properties?.requiresname&&!item.system.properties?.picknameonly))),data.system?.flags?.occupation||data.system?.flags?.archetype){const existingSkills=this.skills.filter((el=>!!el.system.specialization&&((!data.system?.flags?.occupation||!el.system.flags?.occupation)&&((!data.system?.flags?.archetype||!el.system.flags?.archetype)&&data.system.specialization.toLocaleLowerCase()===el.system.specialization.toLocaleLowerCase()))));if(existingSkills.length>0)if(skillList.length>0){for(let i=existingSkills.length-1;i>=0;i--){const found=skillList.findIndex((item=>item.name===existingSkills[i].name||item.flags?.CoC7?.cocidFlag?.id===existingSkills[i].flags?.CoC7?.cocidFlag?.id));found>-1&&skillList.splice(found,1)}skillList=skillList.concat(existingSkills)}else skillList=existingSkills}skillList.length>0&&skillList.sort(CoC7Utilities.sortByNameKey);const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:isAnyButNotFlagged||(data.system.properties?.requiresname??!1),fixedBaseValue:data.system.properties?.keepbasevalue??!1,specializationName:data.system.specialization,label:data.name,baseValue:data.system.base});if(Object.prototype.hasOwnProperty.call(skillData,"selected"))if(skillData.selected){const existingItem=this.items.get(skillData.selected);if(existingItem){const changes={};data.system.properties?.keepbasevalue||""!==skillData.baseValue&&(baseCalculated=skillData.baseValue,changes["system.value"]=baseCalculated);for(const[key,value]of Object.entries(data.system.flags))value&&(changes[`system.flags.${key}`]=!0);Object.keys(changes).length>0&&(changes._id=existingItem.id,await this.updateEmbeddedDocuments("Item",[changes])),data.name=CoC7Item.getNameWithoutSpec(existingItem),addThis=!1}else{const existing=skillList.find((i=>i.id===skillData.selected));if(existing){const flags=data.system?.flags,keepBase=data.system.properties?.keepbasevalue??!1;data=foundry.utils.duplicate(existing);for(const[key,value]of Object.entries(flags))value&&(data.system.flags[key]=!0);keepBase&&(""!==skillData.baseValue&&(data.system.base=skillData.baseValue),baseValue=skillData.baseValue,baseCalculated=await CoC7Item.calculateBase(this,data))}}}else{const parts=CoC7Item.getNamePartsSpec(skillData.name,data.system.specialization);data.system.properties?.keepbasevalue||(""!==skillData.baseValue&&(data.system.base=skillData.baseValue),baseValue=skillData.baseValue,baseCalculated=await CoC7Item.calculateBase(this,data)),data.system.skillName=parts.skillName,data.name=parts.name}}addThis&&(String(baseValue)!==String(baseCalculated)&&(data.system.base=baseCalculated),processedDataArray.push(foundry.utils.duplicate(data)));break}case"weapon":if("container"!==this.type){const mainSkill=data.system?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill,existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(mainSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.main.id=skill.id)}const secondSkill=data.system?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=secondSkill.match(/\(([^)]+)\)/)?secondSkill.match(/\(([^)]+)\)/)[1]:secondSkill,existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(secondSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.alternativ.id=skill.id)}}processedDataArray.push(foundry.utils.duplicate(data));break;case"setup":{if(data.system.enableCharacterisitics){data.system.characteristics.list={},data.system.characteristics.list.str=this.getCharacteristic("str"),data.system.characteristics.list.con=this.getCharacteristic("con"),data.system.characteristics.list.siz=this.getCharacteristic("siz"),data.system.characteristics.list.dex=this.getCharacteristic("dex"),data.system.characteristics.list.app=this.getCharacteristic("app"),data.system.characteristics.list.int=this.getCharacteristic("int"),data.system.characteristics.list.pow=this.getCharacteristic("pow"),data.system.characteristics.list.edu=this.getCharacteristic("edu"),data.system.characteristics.list.luck={},data.system.characteristics.list.luck.value=isNaN(this.luck)?null:this.luck,data.system.characteristics.list.luck.label=game.i18n.localize("CoC7.Luck"),data.system.characteristics.list.luck.shortName=game.i18n.localize("CoC7.Luck"),data.system.characteristics.values||(data.system.characteristics.values={}),data.system.characteristics.values.str=data.system.characteristics.list.str.value,data.system.characteristics.values.con=data.system.characteristics.list.con.value,data.system.characteristics.values.siz=data.system.characteristics.list.siz.value,data.system.characteristics.values.dex=data.system.characteristics.list.dex.value,data.system.characteristics.values.app=data.system.characteristics.list.app.value,data.system.characteristics.values.int=data.system.characteristics.list.int.value,data.system.characteristics.values.pow=data.system.characteristics.list.pow.value,data.system.characteristics.values.edu=data.system.characteristics.list.edu.value,data.system.characteristics.values.luck=data.system.characteristics.list.luck.value,data.system.characteristics.points.enabled?data.system.title=game.i18n.localize("CoC7.SpendPoints"):data.system.title=game.i18n.localize("CoC7.RollCharac"),data.system.pointsWarning=!(null!==data.system.characteristics.values.str&&null!==data.system.characteristics.values.con&&null!==data.system.characteristics.values.siz&&null!==data.system.characteristics.values.dex&&null!==data.system.characteristics.values.app&&null!==data.system.characteristics.values.int&&null!==data.system.characteristics.values.pow&&null!==data.system.characteristics.values.edu);if(!await CharacRollDialog.create(data.system))return;{const updateData={};for(const key of["str","con","siz","dex","app","int","pow","edu"])data.system.characteristics.values[key]&&(updateData[`system.characteristics.${key}.value`]=data.system.characteristics.values[key],updateData[`system.characteristics.${key}.formula`]=data.system.characteristics.rolls[key]);data.system.characteristics.values.luck&&(updateData["system.attribs.lck.value"]=data.system.characteristics.values.luck),data.system.characteristics.values.pow&&(updateData["system.attribs.san.value"]=data.system.characteristics.values.pow,updateData["system.attribs.san.dailyLimit"]=Math.floor(data.system.characteristics.values.pow/5),updateData["system.attribs.mp.max"]=Math.floor(data.system.characteristics.values.pow/5)),await this.update(updateData,{renderSheet:!1}),await this.update({"system.attribs.hp.value":this.rawHpMax,"system.attribs.hp.max":this.rawHpMax},{renderSheet:!1})}}const era=Object.entries(data.flags?.CoC7?.cocidFlag?.eras).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:data.system.items,era:void 0===era[0]||era[0]}),skills=items.filter((it=>"skill"===it.type)),othersItems=items.filter((it=>"skill"!==it.type));if(await this.addUniqueItems(skills),await this.addItems(othersItems),game.settings.get("CoC7","oneBlockBackstory"))await this.update({"system.backstory":data.system.backstory},{renderSheet:!1});else for(const sectionName of data.system.bioSections)!this.system.biography?.find((el=>sectionName===el.title))&&sectionName&&await this.createBioSection(sectionName);const monetary=foundry.utils.mergeObject(this.system.monetary,foundry.utils.duplicate(data.system.monetary)),sheet=this.sheet;let state=!1;do{state=await new Promise((resolve=>setTimeout((()=>{resolve(sheet._state)}),100)))}while(state===Application.RENDER_STATES.RENDERING);await this.update({"system.monetary":monetary}),Hooks.call("setupFinishedCoC7");break}case"archetype":if("character"===this.type){if(this.archetype){let resetArchetype=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetArchetype"),content:`<p>${game.i18n.format("CoC7.ResetArchetypeHint",{name:this.name})}</p>`,yes:()=>{resetArchetype=!0},defaultYes:!1}),!resetArchetype)return;await this.resetArchetype()}const coreCharac=[];for(const entry of Object.entries(data.system.coreCharacteristics)){const[key,value]=entry;if(data.system.coreCharacteristics[key]=!1,value){const char=this.getCharacteristic(key);char.key=key,coreCharac.push(char)}}let charac;if(coreCharac.length>1){const charDialogData={};charDialogData.characteristics=coreCharac,charDialogData.title=game.i18n.localize("CoC7.SelectCoreCharac"),charac=await CharacSelectDialog.create(charDialogData)}else 1===coreCharac.length&&(charac=coreCharac[0].key);if(!charac)return;if(data.system.coreCharacteristics[charac]=!0,data.system.coreCharacteristicsFormula.enabled){let value=Number(data.system.coreCharacteristicsFormula.value);if(isNaN(value)){const char=this.getCharacteristic(charac),roll=new Roll(data.system.coreCharacteristicsFormula.value);await roll.roll({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:char.label,formula:data.system.coreCharacteristicsFormula.value})}),value=char.value<roll.total?roll.total:char.value}await this.update({[`system.characteristics.${charac}.value`]:value})}data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),await this.addUniqueItems(data.system.skills,"archetype"),processedDataArray.push(foundry.utils.duplicate(data)),archetype=!0}break;case"occupation":if("character"===this.type){if(this.occupation){let resetOccupation=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetOccupation"),content:`<p>${game.i18n.format("CoC7.ResetOccupationHint",{name:this.name})}</p>`,yes:()=>{resetOccupation=!0},defaultYes:!1}),!resetOccupation)return;await this.resetOccupation()}if(data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),Number(data.system.creditRating.max)>0){const actorCreditRating=game.system.api.cocid.findCocIdInList("i.skill.credit-rating",data.system.skills);0===actorCreditRating.length?0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&(data.system.skills.push("i.skill.credit-rating"),data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills})):0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&data.system.skills.push(actorCreditRating[0])}const pointsDialogData={};pointsDialogData.characteristics=data.system.occupationSkillPoints;let total=0,optionalChar=!1;for(const entry of Object.entries(data.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);pointsDialogData.characteristics[key].name=char.label,pointsDialogData.characteristics[key].value=char.value,value.selected&&(pointsDialogData.characteristics[key].total=char.value*Number(pointsDialogData.characteristics[key].multiplier),value.optional?optionalChar=!0:total+=pointsDialogData.characteristics[key].total)}if(pointsDialogData.total=total,optionalChar){if(!await PointSelectDialog.create(pointsDialogData))return}for(let index=0;index<data.system.groups.length;index++){data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:data.system.groups[index].skills});const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.groups[index].options),dialogData.title=game.i18n.localize("CoC7.SkillSelectionWindow");for(const value of data.system.groups[index].skills)if(CoC7Item.isAnySpec(value))dialogData.skills.push(value);else{const skill=this.items.find((item=>item.name===value.name&&"skill"===item.type));if(!skill||!skill.system.flags?.occupation){data.system.skills.find((item=>item.name===value.name))||dialogData.skills.push(value)}}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}if(Number(data.system.personal)){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.personal),dialogData.title=game.i18n.format("CoC7.SelectPersonalSkills",{number:Number(data.system.personal)});for(const s of this.skills)if(!s.system.flags.occupation&&!s.system.properties.noadjustments&&!s.system.properties.noxpgain){data.system.skills.find((item=>item.name===s.name))||dialogData.skills.push(s)}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}await this.addUniqueItems(data.system.skills,"occupation"),await(this.creditRatingSkill?.setItemFlag("occupation")),await(this.creditRatingSkill?.update({"system.adjustments.occupation":Number(data.system.creditRating.min)})),processedDataArray.push(foundry.utils.duplicate(data)),occupation=!0}break;default:processedDataArray.push(foundry.utils.duplicate(data))}if(0===processedDataArray.length)return[];const processed=await super.createEmbeddedDocuments(embeddedName,processedDataArray,options);return archetype&&(await this.update({"system.development.archetype":this.archetypePoints}),Hooks.call("archetypeFinishedCoC7")),occupation&&(await this.update({"system.development.occupation":this.occupationPoints,"system.development.personal":this.personalPoints}),Hooks.call("occupationFinishedCoC7")),processed}getItemIdByName(itemName){let id=null;const name=itemName.match(/\(([^)]+)\)/)?itemName.match(/\(([^)]+)\)/)[1]:itemName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&(id=value.id);return id}getItemsByName(itemName){const itemList=[];for(const value of this.items)value.name===itemName&&itemList.push(value);return itemList}getSkillsByName(skillName){const skillList=[],name=skillName.match(/\(([^)]+)\)/)?skillName.match(/\(([^)]+)\)/)[1]:skillName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()!==name.toLowerCase()&&value.flags?.CoC7?.cocidFlag?.id!==skillName||"skill"!==value.type||skillList.push(value);return skillList}getFirstSkillByCoCID(cocid){return this.items.find((i=>i.flags?.CoC7?.cocidFlag?.id===cocid))}parseCharacteristics(){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actor))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));return parsed}static getCharacteristicDefinition(){const characteristics=[];for(const[key,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))characteristics.push({key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label)});return characteristics}getCharacteristic(charName){if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))if(game.i18n.localize(value.short).toLowerCase()===charName.toLowerCase()||game.i18n.localize(value.label).toLowerCase()===charName.toLowerCase()||key===charName.toLowerCase())return{key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value};return null}getAttribute(attribName){return["lck","luck",game.i18n.localize("CoC7.Luck").toLowerCase()].includes(attribName.toLowerCase())?{key:"lck",shortName:"luck",label:game.i18n.localize("CoC7.Luck"),value:this.system.attribs.lck.value}:["san",game.i18n.localize("CoC7.SAN").toLowerCase(),game.i18n.localize("CoC7.Sanity").toLowerCase()].includes(attribName.toLowerCase())?{key:"san",shortName:game.i18n.localize("CoC7.SAN"),label:game.i18n.localize("CoC7.Sanity"),value:this.system.attribs.san.value}:null}async runRoll(options={}){void 0===options.cardType&&(options.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL),void 0===options.preventStandby&&(options.preventStandby=!0),options.actor=this;return await CoC7ChatMessage.trigger(options)}get occupation(){return this.items.filter((item=>"occupation"===item.type))[0]}get archetype(){return this.items.filter((item=>"archetype"===item.type))[0]}async resetOccupation(eraseOld=!0){if(eraseOld){const occupationSkill=this.items.filter((item=>item.getItemFlag("occupation")));for(let index=0;index<occupationSkill.length;index++)await occupationSkill[index].unsetItemFlag("occupation")}this.occupation&&await this.occupation.delete(),await this.update({"system.development.occupation":null})}async resetArchetype(eraseOld=!0){if(eraseOld){const archetypeSkill=this.items.filter((item=>item.getItemFlag("archetype")));for(let index=0;index<archetypeSkill.length;index++)await archetypeSkill[index].unsetItemFlag("archetype")}this.archetype&&await this.archetype.delete(),await this.update({"system.development.archetype":null})}get luck(){return parseInt(this.system.attribs?.lck?.value)}async setLuck(value){return await this.update({"system.attribs.lck.value":value})}async spendLuck(amount){return amount=parseInt(amount),this.luck>=amount&&this.setLuck(this.luck-amount)}get hp(){return parseInt(this.system.attribs.hp.value)}get rawHpMax(){return this.system.attribs.hp.auto?null!=this.system.characteristics.siz.value&&null!=this.system.characteristics.con.value?CoCActor.hpFromCharacteristics(this.system.characteristics,this.type):this.system.attribs.hp.max?parseInt(this.system.attribs.hp.max):null:parseInt(this.system.attribs.hp.max)}get hpMax(){return parseInt(this.system.attribs.hp.max)}async _setHp(value){return value<0&&(value=0),value>this.system.attribs.hp.max&&(value=parseInt(this.system.attribs.hp.max)),await this.update({"system.attribs.hp.value":value})}async addUniqueItems(skillList,flag=null){const processed=[];for(let skill of skillList)if(skill=foundry.utils.duplicate(skill),flag&&(Object.prototype.hasOwnProperty.call(skill.system,"flags")||(skill.system.flags={}),skill.system.flags[flag]=!0),CoC7Item.isAnySpec(skill))processed.push(skill);else{const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else processed.push(skill)}0!==processed.length&&await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addItems(itemList,flag=null){const processed=[];for(const item of itemList)flag&&(item.system.flags||(item.system.flags={}),item.system.flags[flag]=!0),processed.push(foundry.utils.duplicate(item));if(0!==processed.length)return await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addUniqueItem(skill,flag=null){const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.system.flags||(skill.system.flags={}),skill.system.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}get rawMpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?CoCActor.mpFromCharacteristics(this.system.characteristics):0:parseInt(this.system.attribs.mp.max)}getReasonSanLoss(sanReason){return"string"==typeof sanReason?this.system.sanityLossEvents.filter((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()))[0]??{type:"",totalLoss:0,immunity:!1}:{type:"",totalLoss:0,immunity:!1}}sanLostToReason(sanReason){if(sanReason){return this.getReasonSanLoss(sanReason).totalLoss}return 0}sanLossReasonEncountered(sanReason){if(sanReason){return""!==this.getReasonSanLoss(sanReason).type}return!1}setReasonSanLoss(sanReason,sanLoss){if("string"==typeof sanReason&&""!==sanReason){const sanityLossEvents=foundry.utils.duplicate(this.system.sanityLossEvents),index=sanityLossEvents.findIndex((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()));return sanLoss>0?-1===index?sanityLossEvents.push({type:sanReason,totalLoss:sanLoss,immunity:!1}):sanityLossEvents[index].totalLoss+=sanLoss:index>-1&&(sanityLossEvents.splice(index,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)}))),this.update({"system.sanityLossEvents":sanityLossEvents})}}maxLossToSanReason(sanReason,sanMaxFormula){const sanMax=new Roll(sanMaxFormula.toString()).evaluate({maximize:!0}).total,sanityLossEvent=this.getReasonSanLoss(sanReason);return sanityLossEvent.immunity?0:Math.max(0,sanMax-sanityLossEvent.totalLoss)}async looseSan(sanReason,sanLoss){return this.getReasonSanLoss(sanReason).immunity?0:(await this.setSan(this.san-sanLoss),this.setReasonSanLoss(sanReason,sanLoss),sanLoss)}sanLoss(checkPassed){return checkPassed?this.sanLossCheckPassed:this.sanLossCheckFailled}get sanLossCheckPassed(){return this.system.special?.sanLoss?.checkPassed}get sanLossCheckFailled(){return this.system.special?.sanLoss?.checkFailled}get sanLossMax(){return this.sanLossCheckFailled?isNaN(Number(this.sanLossCheckFailled))?new Roll(this.sanLossCheckFailled).evaluate({maximize:!0}).total:Number(this.sanLossCheckFailled):0}get sanLossMin(){return this.sanLossCheckPassed?isNaN(Number(this.sanLossCheckPassed))?new Roll(this.sanLossCheckPassed).evaluate({maximize:!0}).total:Number(this.sanLossCheckPassed):0}get dailySanLoss(){return this.system.attribs.san?.dailyLoss||0}get dailySanLimit(){return this.system.attribs.san?.dailyLimit||0}get rawSanMax(){if(this.system.attribs)return this.system.attribs?.san?.auto?this.cthulhuMythos?Math.max(99-this.cthulhuMythos,0):99:parseInt(this.system.attribs.san.max)}get sanMax(){return parseInt(this.system.attribs.san.max)}get mp(){return parseInt(this.system.attribs.mp.value)}get mpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?Math.floor(this.system.characteristics.pow.value/5):0:parseInt(this.system.attribs.mp.max)}async setMp(value){return value<0&&(value=0),value>parseInt(this.system.attribs.mp.max)&&(value=parseInt(this.system.attribs.mp.max)),await this.update({"system.attribs.mp.value":value})}get san(){return parseInt(this.system.attribs.san.value)}get int(){return this.getCharacteristic("int")}get occupationPointsSpent(){let occupationPoints=0;for(const skill of this.skills)skill.system.adjustments?.occupation&&(occupationPoints+=skill.system.adjustments.occupation);return occupationPoints}get occupationPoints(){if(!this.occupation)return 0;let points=0;for(const entry of Object.entries(this.occupation.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);value.selected&&(points+=char.value*Number(value.multiplier))}return points}async resetOccupationPoints(){await this.update({"system.development.occupation":this.occupationPoints})}async resetArchetypePoints(){await this.update({"system.development.archetype":this.occupationPoints})}async resetPersonalPoints(){await this.update({"system.development.personal":this.personalPoints})}get archetypePointsSpent(){let archetypePoints=0;for(const skill of this.skills)skill.system.adjustments?.archetype&&(archetypePoints+=skill.system.adjustments.archetype);return archetypePoints}get archetypePoints(){return this.archetype?this.archetype.system.bonusPoints:0}get experiencePoints(){let experiencePoints=0;for(const skill of this.skills)skill.system.adjustments?.experience&&(experiencePoints+=skill.system.adjustments.experience);return experiencePoints}get personalPointsSpent(){let personalPoints=0;for(const skill of this.skills)skill.system.adjustments?.personal&&(personalPoints+=skill.system.adjustments.personal);return personalPoints}get personalPoints(){return 2*Number(this.system.characteristics.int.value)}get hasDevelopmentPhase(){for(const skill of this.skills)if(skill.system.flags?.developement)return!0;if(this.onlyRunOncePerSession)return!1;for(const sanityLossEvent of this.system.sanityLossEvents)if(!sanityLossEvent.immunity)return!0;return!1}async setSan(value){value<0&&(value=0),value>this.system.attribs.san.max&&(value=this.system.attribs.san.max);const loss=parseInt(this.system.attribs.san.value)-value;if(loss>0){let totalLoss=parseInt(this.system.attribs.san.dailyLoss)?parseInt(this.system.attribs.san.dailyLoss):0;totalLoss+=loss,loss>=5&&await this.setCondition(COC7.status.tempoInsane),totalLoss>=this.system.attribs.san.dailyLimit&&await this.setCondition(COC7.status.indefInsane),await this.update({"system.attribs.san.value":value,"system.attribs.san.dailyLoss":totalLoss})}else await this.update({"system.attribs.san.value":value});return value}async setAttribAuto(value,attrib){const updatedKey=`system.attribs.${attrib}.auto`;return await this.update({[updatedKey]:value})}async toggleAttribAuto(attrib){this.setAttribAuto(!this.system.attribs[attrib].auto,attrib)}static dbFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?"1D4":`${Math.floor((sum-45)/80)}D6`}static buildFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?1:Math.floor((sum-45)/80)+1}static hpFromCharacteristics(characteristics,type){const sum=parseInt(characteristics.siz.value??0,10)+parseInt(characteristics.con.value??0,10),divisor=game.settings.get("CoC7","pulpRuleDoubleMaxHealth")&&"character"===type?5:10;return Math.floor(sum/divisor)}static mpFromCharacteristics(characteristics){return Math.floor(characteristics.pow.value/5)}static movFromCharacteristics(characteristics,type,age){let MOV;return MOV=characteristics.dex.value>characteristics.siz.value&&characteristics.str.value>characteristics.siz.value?9:characteristics.dex.value>=characteristics.siz.value||characteristics.str.value>=characteristics.siz.value?8:7,"creature"===type||game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||isNaN(parseInt(age))||(MOV=parseInt(age)>=40?MOV-Math.floor(parseInt(age)/10)+3:MOV),Math.max(0,MOV)}get rawBuild(){return this.system.attribs&&this.system.attribs.build?("auto"===this.system.attribs.build.value&&(this.system.attribs.build.auto=!0),this.system.attribs.build.auto?CoCActor.buildFromCharacteristics(this.system.characteristics):this.system.attribs.build.value):null}get build(){return this.system.attribs.build.value}get rawDb(){return this.system.attribs&&this.system.attribs.db?("auto"===this.system.attribs.db.value&&(this.system.attribs.db.auto=!0),this.system.attribs.db.auto?CoCActor.dbFromCharacteristics(this.system.characteristics):this.system.attribs.db.value):null}get db(){return this.system.attribs.db.value}get rawMov(){if(!this.system.attribs)return null;if(!this.system.attribs.mov)return null;if("auto"===this.system.attribs.mov.value&&(this.system.attribs.mov.auto=!0),this.system.attribs.mov.auto){const MOV=CoCActor.movFromCharacteristics(this.system.characteristics,this.system.type,this.system.infos.age);if(MOV>0)return MOV}return this.system.attribs.mov.value}get mov(){return this.system.attribs.mov.value}get tokenId(){return this.token?`${this.token.scene._id}.${this.token.id}`:null}get locked(){return this.system.flags||(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),this.update({"system.flags.locked":!1})),this.system.flags.locked}getItemsFromName(name){return this.items.filter((i=>i.name===name))}set locked(value){this.update({"system.flags.locked":value})}async toggleActorFlag(flagName){const flagValue=!this.system.flags[flagName],name=`system.flags.${flagName}`;await this.update({[name]:flagValue})}async attributeCheck(attributeName,fastForward=!1,options={}){const attrib=this.getAttribute(attributeName.toLowerCase());if(!attrib)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{missing:attributeName})),null;const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollAttribute(attrib.key),check.toMessage()}async characteristicCheck(characteristicName,fastForward=!1,options={}){const char=this.getCharacteristic(characteristicName);if(!char)return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:characteristicName,actor:this.name}));const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){options.displayName=char.label;const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollCharacteristic(char.key),check.toMessage()}async skillCheck(skillData,fastForward,options={}){const skillIdentifier=skillData.name?skillData.name:skillData;let skill=[];if(!!skillIdentifier.match(/^i\.skill\./)){const item=this.getFirstSkillByCoCID(skillIdentifier);item&&skill.push(item)}if(skill.length||(skill=this.getSkillsByName(skillIdentifier)),!skill.length){let item=null;if(skillData.pack){const pack=game.packs.get(skillData.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(skillData.id)}else skillData.id&&(item=game.items.get(skillData.id));if(!item){console.log(skillIdentifier);const check=new CoC7Check;check._rawValue="?",await check.roll(),check.toMessage()}if(!item)return ui.notifications.warn(game.i18n.format("CoC7.NoSkill")+" "+game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:skillData.name?skillData.name:skillData,actor:this.name}));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:skillData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;if(await this.createEmbeddedDocuments("Item",[foundry.utils.duplicate(item)]),skill=this.getSkillsByName(item.name),!skill.length)return;if(game.user.isGM){const skillValue=await SkillValueDialog.create(skill[0].name,skill[0].base),value=Number(skillValue.get("base-value"));await skill[0].updateValue(value)}}const check=new CoC7Check;if(void 0!==options.modifier&&(check.diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,check.skill=skill[0].id,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.roll(),check.toMessage()}async weaponCheck(weaponData,fastForward=!1){let weapon;if(void 0!==weaponData.uuid&&(weapon=await fromUuid(weaponData.uuid)),void 0!==weaponData.id&&(weapon=this.items.get(weaponData.id)),!weapon){let weapons=this.getItemsFromName(weaponData.name);if(0===weapons.length){if(!game.user.isGM)return void ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasNoWeaponNamed",{actorName:this.name,weaponName:weaponData.name}));{let item=null;const pack=weaponData.pack?game.packs.get(weaponData.pack):null;if(pack){if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(weaponData.id)}else weaponData.id&&(item=game.items.get(weaponData.id));if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));let create=!1;await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:weaponData.name,actor:this.name})}</p>`,yes:()=>{create=!0}});const actor=void 0!==this.parent?.actor?this.parent.actor:this;if(!0!==create)return;if(await actor.createEmbeddedDocuments("Item",[item.toJSON()]),weapons=actor.getItemsFromName(item.name),!weapons.length)return;await weapons[0].reload()}}else weapons.length>1&&ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasTooManyWeaponsNamed",{actorName:this.name,weaponName:weaponData.name}));weapon=weapons[0]}if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}}async rollInitiative(hasGun=!1){if("optional"===game.settings.get("CoC7","initiativeRule")){const roll=new CoC7Check(this.actorKey);return roll.denyPush=!0,roll.denyLuck=!0,roll.denyBlindTampering=!0,roll.hideDice=!1===game.settings.get("CoC7","displayInitDices"),roll.flavor="Initiative roll",await roll.rollCharacteristic("dex",hasGun?1:0),roll.toMessage(),roll.successLevel+this.system.characteristics.dex.value/100}return hasGun?this.system.characteristics.dex.value+50:this.system.characteristics.dex.value}getActorFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}async setActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!1})}getWeaponSkills(itemId){let weapon=fromUuidSync(itemId);if(weapon?void 0===weapon.system&&(weapon=game.packs.get(weapon.pack).get(weapon._id)):weapon=this.items.get(itemId),"weapon"!==weapon.type)return null;const skills=[];return weapon.system.skill.main.id&&skills.push(this.items.get(weapon.system.skill.main.id)),weapon.usesAlternativeSkill&&weapon.system.skill.alternativ.id&&skills.push(this.items.get(weapon.system.skill.alternativ.id)),skills}find(name){if(!name)return;const item=this.items.get(name);if(item)return{type:"item",value:item};const matches=/\(([^)]+)\)/.exec(name);let shortName=null;matches&&matches.length&&(shortName=matches[1]);const skill=this.skills.filter((s=>!!s.name&&(s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===shortName?.toLocaleLowerCase().replace(/\s/g,""))));if(skill.length)return{type:"item",value:skill[0]};const charKey=["str","con","siz","dex","app","int","pow","edu"];for(let i=0;i<charKey.length;i++){const char=this.getCharacteristic(charKey[i]);if(char){if(char.name=char.label,char.key?.toLocaleLowerCase()===name.toLowerCase()||char.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.shortName?.toLocaleLowerCase()===name.toLowerCase()||char.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.label?.toLocaleLowerCase()===name.toLowerCase()||char.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char}}}const attribKey=["lck","san"];for(let i=0;i<attribKey.length;i++){const attr=this.getAttribute(attribKey[i]);if(attr){if(attr.name=attr.label,attr.key?.toLocaleLowerCase()===name.toLowerCase()||attr.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.shortName?.toLocaleLowerCase()===name.toLowerCase()||attr.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.label?.toLocaleLowerCase()===name.toLowerCase()||attr.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr}}}}get pilotSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.PilotSpecializationName")?.toLocaleLowerCase()))}get driveSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.DriveSpecializationName")?.toLocaleLowerCase()))}get tokenUuid(){return this.sheet.token?this.sheet.token.uuid:null}get tokenKey(){return this.sheet.token?`${this.sheet.token.parent.id}.${this.sheet.token.id}`:this.id}get actorKey(){return this.prototypeToken.actorLink?this.id:this.tokenKey}static getActorFromKey(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}return game.actors.get(key)||null}get hasRollableCharacteristics(){for(const[,value]of Object.entries(this.system.characteristics))if(isNaN(Number(value.formula)))return!0;return!1}get hosRollableSkills(){for(const skill of this.skills)if(isNaN(skill.system?.value))return!0;return!1}async rollCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const r=new Roll(value.formula);await r.roll({async:!0}),r.total&&(characteristics[`system.characteristics.${key}.value`]=Math.floor(r.total))}await this.update(characteristics),await this.reportCharactedriticsValue()}async averageCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const max=new Roll(value.formula).evaluate({maximize:!0}).total,min=new Roll(value.formula).evaluate({minimize:!0}).total,average=Math.floor((max+min)/2),charValue=average%5==0?average:10*Math.round(average/10);charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics),await this.reportCharactedriticsValue()}async reportCharactedriticsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&value.formula.startsWith("@")){let charValue;try{charValue=new Roll(value.formula,this.parseCharacteristics()).evaluate({maximize:!0}).total}catch(err){charValue=null}charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics)}async setCharacteristic(name,value){const characteristic={},charValue=isNaN(parseInt(value))?null:parseInt(value);if(characteristic[name]=charValue,!charValue&&value.startsWith("@")){characteristic[name.replace(".value",".formula")]=value}await this.update(characteristic),await this.reportCharactedriticsValue()}async developementPhase(fastForward=!1){const failure=[],success=[],title=game.i18n.localize("CoC7.RollAll4Dev");let skillsRolled=0,message='<p class="chat-card">';for(const item of this.items)if("skill"===item.type&&item.developementFlag){skillsRolled++;const die=await new Die({faces:100}).evaluate({async:!0}),skillValue=item.value;let augment=null,skillMasteringMessage=null;if(die.total>skillValue||die.total>=95){const augmentDie=await new Die({faces:10}).evaluate({async:!0});if(success.push(item.id),skillValue<90&&skillValue+augmentDie.total>=90){const augmentSANDie=await new Die({faces:6,number:2}).evaluate({async:!0}),sanGained=augmentSANDie.total,sanGainedMessage=`Gained 2d6 (${augmentSANDie.values[0]} + ${augmentSANDie.values[1]} = ${sanGained}) SAN`;console.debug(sanGainedMessage),skillMasteringMessage=`<span class="upgrade-success">${game.i18n.format("CoC7.SanGained",{results:`${augmentSANDie.values[0]} + ${augmentSANDie.values[1]}`,sanGained,skill:item.name,skillValue:skillValue+augmentDie.total})}</span><br>`,await this.setSan(this.san+sanGained)}augment+=augmentDie.total,message+=`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:item.name,die:die.total,score:item.value,augment:augmentDie.total})}</span><br>`,null!==skillMasteringMessage&&(message+=skillMasteringMessage),await item.increaseExperience(augment)}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:item.name,die:die.total,score:item.value})}</span><br>`,failure.push(item.id);await item.unflagForDevelopement()}const sanityLossEvents=[];let changed=!1;for(const sanityLossEvent of this.system.sanityLossEvents)sanityLossEvent.immunity?sanityLossEvents.push(sanityLossEvent):sanityLossEvent.totalLoss>1?(sanityLossEvent.totalLoss--,sanityLossEvents.push(sanityLossEvent),changed=!0):changed=!0;if(changed&&(skillsRolled&&(message+="<br>"),message+=`<span>${game.i18n.format("CoC7.ReduceSanityLimits")}</span>`,await this.update({"system.sanityLossEvents":sanityLossEvents})),!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(skillsRolled?title:"",message,{speaker}),this.onlyRunOncePerSession=!0}return{failure,success}}async developLuck(fastForward=!1){const currentLuck=this.system.attribs.lck.value;currentLuck||await this.update({"system.attribs.lck.value":0});const pulpRuleDevelopmentRollLuck=game.settings.get("CoC7","pulpRuleDevelopmentRollLuck"),upgradeRoll=(await new Roll("1D100").roll({async:!0})).total,higherThanCurrentLuck=upgradeRoll>currentLuck;let augmentRoll;pulpRuleDevelopmentRollLuck?augmentRoll=higherThanCurrentLuck?"2D10+10":"1D10+5":higherThanCurrentLuck&&(augmentRoll="1D10");const title=game.i18n.localize("CoC7.RollLuck4Dev");let message='<p class="chat-card">';if(pulpRuleDevelopmentRollLuck||higherThanCurrentLuck){const augmentValue=(await new Roll(augmentRoll).roll({async:!0})).total;await this.update({"system.attribs.lck.value":this.system.attribs.lck.value+augmentValue}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll,score:currentLuck,augment:augmentValue})}</span>`}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.LuckNotIncreased",{die:upgradeRoll,score:currentLuck})}</span>`;if(!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(title,message,{speaker})}}async developSkill(skillId,fastForward=!1){const skill=this.items.get(skillId);if(!skill)return;let title="",message="";const upgradeRoll=new Roll("1D100");if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>skill.value||upgradeRoll.total>=95){const augmentRoll=new Roll("1D10");await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),message=game.i18n.format("CoC7.DevSuccessDetails",{item:skill.name,augment:augmentRoll.total}),title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),await skill.increaseExperience(augmentRoll.total)}else title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),message=game.i18n.format("CoC7.DevFailureDetails",{item:skill.name});const speaker={actor:this._id};await chatHelper.createMessage(title,message,{speaker}),await skill.unflagForDevelopement()}hasConditionStatus(conditionName){const conditionValue=this.system.conditions?.[conditionName]?.value;return"boolean"==typeof conditionValue&&conditionValue}hasConditionValue(conditionName,field){if(this.hasConditionStatus(conditionName)){if(conditionName===COC7.status.tempoInsane&&"durationText"===field){const realTime=this.hasConditionValue(conditionName,"realTime"),duration=this.hasConditionValue(conditionName,"duration");if(void 0!==duration){if(!0===realTime)return duration+" "+game.i18n.localize("CoC7.rounds");if(!1===realTime)return duration+" "+game.i18n.localize("CoC7.hours")}return""}return this.system.conditions?.[conditionName]?.[field]}}async toggleCondition(conditionName){this.hasConditionStatus(conditionName)?await this.unsetCondition(conditionName):await this.setCondition(conditionName)}async setCondition(conditionName,{forceValue=!1,justThis=!1,realTime=null,duration=null}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>CoC7ActiveEffect.filterActiveEffects(effect,conditionName))).map((effect=>effect.id)),custom={};switch(conditionName){case COC7.status.dead:custom.flags={core:{overlay:!0}};break;case COC7.status.tempoInsane:custom.flags={CoC7:{realTime:void 0}},custom.duration={rounds:void 0,seconds:void 0},!0!==realTime&&!1!==realTime||(custom.flags.CoC7.realTime=realTime,custom.flags={CoC7:{realTime}},null!=duration&&(realTime?custom.duration.rounds=duration:custom.duration.seconds=3600*duration))}if(0===effects.length){const effect=CONFIG.statusEffects.filter((effect=>effect.id===conditionName));if(1===effect.length){const source={icon:effect[0].icon,disabled:!1};foundry.utils.isNewerVersion(game.version,"11")?(source.name=game.i18n.localize(effect[0].name),source.statuses=[effect[0].id]):(source.label=game.i18n.localize(effect[0].label),source.flags={core:{statusId:effect[0].id}});const effectData=foundry.utils.mergeObject(source,custom);await super.createEmbeddedDocuments("ActiveEffect",[effectData])}else forceValue=!0}else custom._id=effects[0],await super.updateEmbeddedDocuments("ActiveEffect",[custom]),forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons")){switch(conditionName){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.value`]:!0});break;case COC7.status.tempoInsane:{const fields={};fields[`system.conditions.${conditionName}.value`]=!0,!0!==realTime&&!1!==realTime||(fields[`system.conditions.${conditionName}.realTime`]=realTime,null!=duration&&(fields[`system.conditions.${conditionName}.duration`]=duration)),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.realTime`)||(fields[`system.conditions.${conditionName}.-=realTime`]=null),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.duration`)||(fields[`system.conditions.${conditionName}.-=duration`]=null),await this.update(fields)}}if(!justThis)switch(conditionName){case COC7.status.criticalWounds:if(await this.setCondition(COC7.status.prone),!this.hasConditionStatus(COC7.status.unconscious)&&!this.hasConditionStatus(COC7.status.dead)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}break;case COC7.status.dead:await this.unsetCondition(COC7.status.criticalWounds),await this.unsetCondition(COC7.status.dying),await this.unsetCondition(COC7.status.unconscious)}}}async unsetCondition(conditionName,{forceValue=!1}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>CoC7ActiveEffect.filterActiveEffects(effect,conditionName))).map((effect=>effect.id));effects.length>0?await super.deleteEmbeddedDocuments("ActiveEffect",effects):forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons"))switch(conditionName){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.-=value`]:null}),await this.update({[`system.conditions.${conditionName}.value`]:!1})}}async resetCounter(counter){await this.update({[counter]:0})}async resetDailySanity(){await this.update({"system.attribs.san.dailyLimit":Math.floor(this.system.attribs.san.value/5),"system.attribs.san.dailyLoss":0})}get fightingSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.fighting&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get closeCombatWeapons(){const weaponList=[];for(const value of this.items)if("weapon"===value.type&&!value.system.properties.rngd){const skill=this.items.get(value.system.skill.main.id);value.system.skill.main.value=skill?skill.value:0,weaponList.push(value)}return weaponList.sort(CoC7Utilities.sortByNameKey),weaponList}get firearmSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.firearm&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get user(){return game.users.find((user=>!(!user.character||user.character.id!==this.id)))}get dodgeSkill(){const skill=this.getFirstSkillByCoCID("i.skill.dodge");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge"));return 0!==skillList.length?skillList[0]:null}get creditRatingSkill(){const skill=this.getFirstSkillByCoCID("i.skill.credit-rating");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythosSkill(){const skill=this.getFirstSkillByCoCID("i.skill.cthulhu-mythos");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythos(){const CM=this.cthulhuMythosSkill;if(CM){const value=CM.value;return value||parseInt(CM.system.value)}return 0}get mythosHardened(){return this.getFlag("CoC7","mythosHardened")||!1}async setMythosHardened(){await this.setFlag("CoC7","mythosHardened",!0)}get mythosInsanityExperienced(){return this.getFlag("CoC7","mythosInsanityExperienced")||!1}async experienceFirstMythosInsanity(){await this.setFlag("CoC7","mythosInsanityExperienced",!0)}get creditRating(){const CR=this.creditRatingSkill;if(CR){const value=CR.value;return value||parseInt(CR.system.value)}return 0}static monetaryFormat(format,symbol,value){switch(format){case COC7.monetaryFormatKeys.lsd:return Math.floor(value/240)+"/"+Math.floor(value/12)%20+"/"+value%12;case COC7.monetaryFormatKeys.roman:return Math.floor(value/400)+"/"+Math.floor(value/16)%25+"/"+Math.floor(value/8)%2+"/"+Math.floor(value/4)%2+"/"+value%4;case COC7.monetaryFormatKeys.decimalLeft:return symbol+Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"");case COC7.monetaryFormatKeys.decimalRight:return Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"")+" "+symbol;case COC7.monetaryFormatKeys.integerLeft:return symbol+Number(value).toLocaleString();case COC7.monetaryFormatKeys.integerRight:return Number(value).toLocaleString()+" "+symbol}return"0"}static monetaryValue(format,values,CR,type,value){CR=CR||0;const row=values.find((r=>("object"==typeof r.min||r.min<=CR)&&("object"==typeof r.max||r.max>=CR)));if(void 0!==row&&void 0!==row[type]&&void 0!==row[value])switch(format){case COC7.monetaryFormatKeys.lsd:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 240*CR*row[value];case COC7.monetaryTypeKeys.value:return 240*row[value];case COC7.monetaryTypeKeys.s:return 12*row[value];case COC7.monetaryTypeKeys.d:return 1*row[value]}break;case COC7.monetaryFormatKeys.roman:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 400*CR*row[value];case COC7.monetaryTypeKeys.value:return 400*row[value];case COC7.monetaryTypeKeys.denarii:return 16*row[value];case COC7.monetaryTypeKeys.quinarii:return 8*row[value];case COC7.monetaryTypeKeys.sestertii:return 4*row[value];case COC7.monetaryTypeKeys.asses:return 1*row[value]}break;default:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return CR*row[value];case COC7.monetaryTypeKeys.value:return 1*row[value]}}return 0}get spendingLevel(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"spendingType","spendingValue")}get cash(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"cashType","cashValue")}get assets(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"assetsType","assetsValue")}get skills(){const skillList=[];for(const value of this.items)"skill"===value.type&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get owners(){return game.users.filter((u=>this.testUserPermission(u,"OWNER")&&!u.isGM))}get player(){return this.owners.filter((u=>u.character?.id===this.id))}get characterUser(){return game.users.contents.filter((u=>u.character?.id===this.id))[0]||null}async setHp(value){value<0&&(value=0),value>this.system.attribs.hp.max&&(value=this.system.attribs.hp.max);const healthBefore=this.hp;let damageTaken;return isNaN(healthBefore)||value>=healthBefore?await this._setHp(value):(damageTaken=healthBefore-value,await this.dealDamage(damageTaken,{ignoreArmor:!0})),value}async dealDamage(amount,options={}){const armorData=options.armor?options.armor:this.system.attribs.armor,grossDamage=parseInt(amount);let armorValue=0;options.ignoreArmor||null===armorData||(CoC7Utilities.isFormula(armorData)?armorValue=(await new Roll(armorData).roll({async:!0})).total:isNaN(Number(armorData))?isNaN(Number(armorData?.value))?ui.notifications.warn(game.i18n.format("CoC7.ErrorUnableToParseArmorFormula",{value:armorData})):armorValue=Number(armorData.value):armorValue=Number(armorData));const netDamage=grossDamage-armorValue;if(netDamage<=0)return 0;if(await this._setHp(this.hp-netDamage),netDamage>=this.system.attribs.hp.max)await this.setCondition(COC7.status.dead);else if(game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")){if(0===this.hp)netDamage>=Math.ceil(this.system.attribs.hp.max/2)?this.setCondition(COC7.status.dying):this.setCondition(COC7.status.unconscious);else if(netDamage>=Math.ceil(this.system.attribs.hp.max/2)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}}else{let hasMajorWound=!1;netDamage>=Math.ceil(this.system.attribs.hp.max/2)?(await this.setCondition(COC7.status.criticalWounds),hasMajorWound=!0):hasMajorWound=this.hasConditionStatus(COC7.status.criticalWounds),0===this.hp&&(await this.setCondition(COC7.status.unconscious),hasMajorWound&&this.setCondition(COC7.status.dying))}return netDamage}get majorWound(){return this.hasConditionStatus(COC7.status.criticalWounds)}get dying(){return this.hasConditionStatus(COC7.status.dying)}get unconscious(){return this.hasConditionStatus(COC7.status.unconscious)}get dead(){return this.hasConditionStatus(COC7.status.dead)}get prone(){return this.hasConditionStatus(COC7.status.prone)}}class CoC7Check{constructor(actor=null,skill=null,item=null,diceMod=0,difficulty=null,flatThresholdModifier=0,flatDiceModifier=0){if(this.actor=actor,this.skill=skill,this.item=item,this.difficulty=difficulty,this.diceModifier=diceMod,this.rawValue=0,this.successLevel=null,this.referenceMessageId=null,this.pushing=!1,this.flatDiceModifier=flatDiceModifier,this.flatThresholdModifier=flatThresholdModifier,null===difficulty){const isUnknown="unknown"===game.settings.get("CoC7","defaultCheckDifficulty");this.difficulty=isUnknown?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular}}static get cardType(){return"rollCard"}static get difficultyLevel(){return{unknown:-1,regular:1,hard:2,extreme:3,critical:4,impossible:9}}static get successLevel(){return{fumble:-99,failure:0,regular:1,hard:2,extreme:3,critical:4}}static get type(){return{characteristic:"characteristic",attribute:"attribute",skill:"item",item:"item",value:"value"}}static difficultyString(difficultyLevel){switch(isNaN(Number(difficultyLevel))?difficultyLevel:Number(difficultyLevel)){case"?":return game.i18n.localize("CoC7.UnknownDifficulty");case"+":return game.i18n.localize("CoC7.HardDifficulty");case"++":return game.i18n.localize("CoC7.ExtremeDifficulty");case"+++":return game.i18n.localize("CoC7.CriticalDifficulty");case 0:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.localize("CoC7.UnknownDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.localize("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.extreme:return game.i18n.localize("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.localize("CoC7.CriticalDifficulty");default:return null}}get rawValue(){if(this._rawValue||(this.characteristic&&(this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.rawValue=this.skill.value),this.attribute&&(this.rawValue=this.actor.system.attribs[this.attribute].value)),this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this._rawValue+this.flatThresholdModifier<1?1:this._rawValue+this.flatThresholdModifier:this._rawValue}set rawValue(x){this._rawValue=x}set uuid(x){this._uuid=x}get uuid(){return this._uuid||(this._uuid=foundry.utils.randomID(16)),this._uuid}get hasCard(){return ui.chat.collection.filter((message=>this.uuid===message.getFlag("CoC7","uuid")&&CoC7Check.cardType===message.getFlag("CoC7","type"))).length>0}get rawValueString(){return 0===this._rawValue?"0":this._rawValue?this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this.flatThresholdModifier<0?this._rawValue.toString()+this.flatThresholdModifier.toString():this._rawValue.toString()+"+"+this.flatThresholdModifier.toString():this._rawValue.toString():void 0}get criticalThreshold(){return 1}get regularThreshold(){return this.rawValue?this.rawValue>=100?99:parseInt(this.rawValue):null}get hardThreshold(){return this.rawValue?Math.floor(this.rawValue/2):null}get extremeThreshold(){return this.rawValue?Math.floor(this.rawValue/5):null}get fumbleThreshold(){if(this.rawValue){if(this.difficulty){if(this.difficulty>=CoC7Check.difficultyLevel.extreme)return this.extremeThreshold<50?96:100;if(this.difficulty>=CoC7Check.difficultyLevel.hard)return this.hardThreshold<50?96:100}return this.rawValue<50?96:100}return null}get succesThreshold(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return this.extremeThreshold;case CoC7Check.difficultyLevel.hard:return this.hardThreshold;case CoC7Check.difficultyLevel.regular:return this.regularThreshold;case CoC7Check.difficultyLevel.critical:return this.criticalThreshold;case CoC7Check.difficultyLevel.unknown:return-1;default:return this.rawValue}return null}get difficultyString(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return game.i18n.format("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.format("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.format("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.format("CoC7.CriticalDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.format("CoC7.UnknownDifficulty");default:return""}return""}get modifiedResult(){if(!this.standby){if(void 0!==this._modifiedResult)return this._modifiedResult;if(this.flatDiceModifier){const modified=this.dices.total+this.flatDiceModifier;return modified<1?1:modified>100?100:modified}return this.dices.total}}set modifiedResult(x){this._modifiedResult=x}get flatDiceModifierString(){return this.flatDiceModifier?this.flatDiceModifier>0?`+${this.flatDiceModifier}`:this.flatDiceModifier.toString():null}get isFumble(){if(!this.standby&&!this.isSimpleRoll)return this.modifiedResult>=this.fumbleThreshold}get isCritical(){if(!this.standby)return 1===this.modifiedResult}get isExtremeSuccess(){if(!this.standby)return this.successLevel>=CoC7Check.successLevel.extreme}get passed(){if(!this.standby&&!this.isSimpleRoll)return this.luckSpent?this.difficulty<=this.successLevel:this.succesThreshold>=this.modifiedResult||this.isCritical}get failed(){if(!this.standby&&!this.isSimpleRoll)return!this.passed}get isSimpleRoll(){return void 0===this.rawValue}get hasBonus(){return!!(this.diceModifier&&this.diceModifier>0)}get hasPenalty(){return!!(this.diceModifier&&this.diceModifier<0)}get hasModifier(){return!(!this.diceModifier||0===this.diceModifier)}get diceModifier(){return this._diceModifier?this._diceModifier:null}set diceModifier(x){this._diceModifier=parseInt(x)}get name(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.label;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.Sanity")}}return null}get shortName(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.short;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.SAN")}}return null}get fullName(){const difficulty=this._difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(this._difficulty),modifier=this._diceModifier>0?`+${this._diceModifier}`:this._diceModifier.toString();return game.i18n.format(`CoC7.LinkCheck${difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier,name:this.name})}get rolled(){return!!this.dice}static getFromCard(card){const rollResult=card.classList.contains("roll-result")?card:card.querySelector(".roll-result"),check=new CoC7Check;CoC7Roll.getFromElement(rollResult,check);const message=card.closest(".message");return check.messageId=message?message.dataset.messageId:null,check}static async push(card,publish=!0){const oldCheck=CoC7Check.getFromCard(card),actorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId,skillId=card.dataset.skillId,charac=card.dataset.characteristic,itemId=card.dataset.itemId,diceMod=card.dataset.diceMod,difficulty=card.dataset.difficulty;let pushedRoll;if(skillId)pushedRoll=new CoC7Check(actorId,skillId,itemId,diceMod,difficulty);else{if(!charac)return;pushedRoll=new CoC7Check,pushedRoll.diceModifier=diceMod,pushedRoll.difficulty=difficulty,pushedRoll.actor=actorId,pushedRoll.characteristic=charac}oldCheck.uuid&&(pushedRoll.context=oldCheck.context,pushedRoll.uuid=oldCheck.uuid),oldCheck.parent&&(pushedRoll.parent=oldCheck.parent),pushedRoll.pushing=!0,await pushedRoll.roll(),publish&&pushedRoll.toMessage(!0,card)}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}set actor(x){if(this.actorKey=x,null!=x){if(x instanceof Actor)return this._actor=x,this._actor.alias=this.actor.name,void(x.token&&x.token.scene&&x.token.scene.id?this.actorKey=`${x.token.scene.id}.${x.token.id}`:this.actorKey=x.id);if(x.includes(".")){const[sceneId,tokenId]=x.split(".");if("TOKEN"===sceneId)this._actor=game.actors.tokens[tokenId],this._actor.alias=this._actor.name;else{const scene=game.scenes.get(sceneId);if(!scene)return;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return;const token=new Token(tokenData);this._actor=token.actor,this._actor.alias=token.name}}else this._actor=game.actors.get(x),this.actor.alias=this.actor.name}else this._actor=x}get successLevelIcons(){if(this.unknownDifficulty)return null;if(this.isSimpleRoll&&0!==this._rawValue)return null;if(this.successLevel>=this.difficulty){const icons=[];for(let index=0;index<this.successLevel-this.difficulty+1;index++)icons.push(this.isCritical?"medal":"star");const successHint=game.i18n.format("CoC7.SuccesLevelHint",{value:this.successLevel-this.difficulty+1});return{success:!0,cssClass:this.isCritical?"critical":"success",hint:successHint,icons}}{const icons=[],successLevel=this.isFumble?-1:this.successLevel;for(let index=0;index<this.difficulty-successLevel;index++)icons.push(this.isFumble?"skull":"spider");const failureHint=game.i18n.format("CoC7.FailureLevelHint",{value:this.difficulty-successLevel});return{success:!1,cssClass:this.isFumble?"fumble":"failure",hint:failureHint,icons}}}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get unknownDifficulty(){return!(this.gmDifficultyCritical||this.gmDifficultyExtreme||this.gmDifficultyHard||this.gmDifficultyRegular)&&CoC7Check.difficultyLevel.unknown===this.difficulty}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}set skill(x){this._skill=this._getItemFromId(x),this.skillId=x}set item(x){this._item=this._getItemFromId(x),"weapon"===this._item?.type?this.itemId=x:(this._item=void 0,this.itemId=void 0)}_getItemFromId(x){return null==x?null:x instanceof Item?x:this._actor?this._actor.items.get(x):game.items.get(x)}get actor(){if(this._actor&&this._actor?.id){if("Object"===this._actor.constructor.name){const actor=new CoCActor(this._actor);this._actor=actor}}else if(this.actorKey&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this.actorId&&(this._actor=chatHelper.getActorFromKey(this.actorId)),!this._actor)return{isDummy:!0,name:this.actorName?this.actorName:void 0,id:void 0,img:"systems/CoC7/assets/icons/question-circle-regular.svg",portrait:"systems/CoC7/assets/icons/question-circle-regular.svg"};return this._actor}get skill(){return!this._skill&&this.skillId&&(this._skill=this.actor?.items.get(this.skillId)),!this._skill&&this.item&&this.item.system.skill&&(this.item.system.skill.main.id&&!this.weaponAltSkill?this._skill=this._actor.items.get(this.item.system.skill.main.id):this.item.system.skill.alternativ.id&&this.weaponAltSkill&&(this._skill=this._actor.items.get(this.item.system.skill.alternativ.id))),this._skill}get item(){return!this._item&&this.itemId&&this.actor&&(this._item=this.actor.items.get(this.itemId)),this._item}get displayResultType(){return game.settings.get("CoC7","displayResultType")}get displayCheckSuccessLevel(){return game.settings.get("CoC7","displayCheckSuccessLevel")}get displayBothSuccessLevel(){return this.displayResultType&&this.displayCheckSuccessLevel}get dontDisplaySuccessLevel(){return!this.displayResultType&&!this.displayCheckSuccessLevel}get image(){return this.skill?this.skill.img:this.item?this.item.img:void 0}get link(){return this.getLinkElement().outerHTML}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}getLinkElement(classes=null){const data={cls:["coc7-link","coc7-roll"].concat(classes),dataset:{check:"check"},icon:this.image?`<div style="background-image: url(${this.image})"></div>`:'<i class="fas fa-dice"></i>',blind:this.isBlind},difficulty=CoC7Check.difficultyString(this._difficulty),title=game.i18n.format(`CoC7.LinkCheck${this._difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier:this._diceModifier,name:this.name}),a=document.createElement("a");return a.title=title,a.classList.add(...data.cls),a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}${data.icon}${this.name}`,a}async roll(diceMod=null,difficulty=null,options={}){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.standby||await this._perform(options)}static createFromActorRollData(rollData){const roll={};switch(rollData.difficulty&&(roll.difficulty=rollData.difficulty),rollData.diceModifier&&(roll.diceModifier=rollData.diceModifier),!0===rollData.denyPush&&(roll.denyPush=!0),rollData.flatDiceModifier&&(roll.flatDiceModifier=rollData.flatDiceModifier),rollData.flatThresholdModifier&&(roll.flatThresholdModifier=rollData.flatThresholdModifier),rollData.actor?.actorKey?roll.actorKey=rollData.actor.actorKey:rollData.actor?.name&&(roll.actorName=rollData.actor.name),rollData.type){case CoC7Check.type.characteristic:roll.characteristic=rollData.value?.key;break;case CoC7Check.type.attribute:roll.attribute=rollData.value?.key;break;case CoC7Check.type.item:roll.actorKey=rollData.value.actor.actorKey,"skill"===rollData.value?.type?roll.skill=rollData.value.id:roll.item=rollData.value.id;break;case CoC7Check.type.skill:roll.actorKey=rollData.value.actor.actorKey,roll.skill=rollData.value.id;break;case CoC7Check.type.value:roll.displayName=rollData.value.name,roll.rawValue=rollData.value.threshold}return CoC7Check.create(roll)}static create({difficulty=CoC7Check.difficultyLevel.regular,diceModifier=null,actorKey=null,characteristic=null,attribute=null,rawValue=0,item=null,skill=null,flatDiceModifier=0,flatThresholdModifier=0,displayName=null,actorName=null,denyPush}={}){const check=new CoC7Check;return check.difficulty=difficulty,!0===denyPush&&(check.denyPush=!0),diceModifier&&(check.diceModifier=diceModifier),flatDiceModifier&&(check.flatDiceModifier=flatDiceModifier),flatThresholdModifier&&(check.flatThresholdModifier=flatThresholdModifier),displayName&&(check.displayName=displayName),actorKey&&(check.actor=actorKey),actorName&&(check.actorName=actorName),isNaN(Number(rawValue))||(check.rawValue=Number(rawValue)),check.actor&&!check.actor.isDummy&&(skill?check.skill=skill:characteristic?check.characteristic=characteristic:attribute?check.attribute=attribute:item&&(check.item=item)),check}async rollCharacteristic(char,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.characteristic=char,this.standby||await this._perform()}async rollAttribute(attrib,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.attribute=attrib,this.standby||await this._perform()}async rollValue(val,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.rawValue=val,this.standby||await this._perform()}get rolledSuccessLevel(){return this.successLevel}async _perform(options={}){this.dice=options.roll||await CoC7Dice.roll(this.diceModifier,this.rollMode,this.isBlind),options.silent||game.modules.get("dice-so-nice")?.active||AudioHelper.play({src:CONFIG.sounds.dice},!0),options.forceDSN&&await CoC7Dice.showRollDice3d(this.dice.roll),this.dices={tens:[],unit:{value:this.dice.unit.total},total:this.dice.total,tenResult:this.dice.total-this.dice.unit.total,hasBonus:!!this.diceModifier,bonus:Math.abs(this.diceModifier),bonusType:this.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus"),difficulty:this.difficulty};const max=0===this.dice.unit.total?100:90,min=0===this.dice.unit.total?10:0;let selected=this.dice.total-this.dice.unit.total;for(let i=0;i<this.dice.tens.results.length;i++){const die={};die.value=this.dice.tens.results[i],die.value===selected?(selected=101,die.selected=!0,this.dices.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck()}async computeCheck(){switch(this.isUnknown=this.unknownDifficulty,this.gmDifficultyRegular&&(this.difficulty=CoC7Check.difficultyLevel.regular),this.gmDifficultyHard&&(this.difficulty=CoC7Check.difficultyLevel.hard),this.gmDifficultyExtreme&&(this.difficulty=CoC7Check.difficultyLevel.extreme),this.gmDifficultyCritical&&(this.difficulty=CoC7Check.difficultyLevel.critical),this.tenOnlyOneDie=1===this.dices.tens.length,this.isValue=!1,this.isCharactiristic=!1,this.isSkill=!1,this.isItem=!1,this.isAttribute=!1,this.isSimpleRoll?(this.denyPush=!0,this.denyLuck=!0):null==this.actor?this.isValue=!0:(this.characteristic&&(this.isCharactiristic=!0,this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.isSkill=!0,this.rawValue=this.skill.value),this.attribute&&(this.isAttribute=!0,this.rawValue=this.actor.system.attribs[this.attribute].value)),this.luckSpent||this.isSimpleRoll||(this.modifiedResult<=this.rawValue&&(this.successLevel=CoC7Check.successLevel.regular),this.modifiedResult<=this.hardThreshold&&(this.successLevel=CoC7Check.successLevel.hard),this.modifiedResult<=this.extremeThreshold&&(this.successLevel=CoC7Check.successLevel.extreme),this.modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.fumbleThreshold<=this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.fumble)),this.successLevel){case CoC7Check.successLevel.regular:this.resultType=game.i18n.format("CoC7.RegularSuccess");break;case CoC7Check.successLevel.hard:this.resultType=game.i18n.format("CoC7.HardSuccess");break;case CoC7Check.successLevel.extreme:this.resultType=game.i18n.format("CoC7.ExtremeSuccess");break;case CoC7Check.successLevel.critical:this.resultType=game.i18n.format("CoC7.CriticalSuccess");break;case CoC7Check.successLevel.fumble:this.resultType=game.i18n.format("CoC7.Fumble");break;case CoC7Check.successLevel.failure:this.resultType=game.i18n.format("CoC7.Failure")}if(this.unknownDifficulty?this.successRequired="":this.isSimpleRoll||(this.successRequired=game.i18n.format("CoC7.SuccessRequired",{successRequired:this.difficultyString})),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.luckSpent||this.isUnknown||this.isSimpleRoll||(this.isFailure=this.failed,this.isSuccess=this.passed),this.hasMalfunction=!1,this.isFumble&&(this.successLevel=CoC7Check.successLevel.fumble),this.item&&(this.isItem=!0,this.item.system.malfunction&&Number(this.modifiedResult)>=Number(this.item.system.malfunction)&&(this.hasMalfunction=!0,this.malfunctionTxt=game.i18n.format("CoC7.Malfunction",{itemName:this.item.name}),await this.item.toggleItemFlag(CoC7Item.flags.malfunction))),void 0===this.canBePushed&&(this.canBePushed=!!this.skill&&this.skill.canBePushed(),null!=this.characteristic&&(this.canBePushed=!0),this.isFumble&&(this.canBePushed=!1),this.denyPush&&(this.canBePushed=!1)),!this.denyLuck&&this.actor){if(!(this.luckSpent||this.passed||this.isFumble||this.difficulty===CoC7Check.difficultyLevel.critical||this.unknownDifficulty)&&(this.skill||this.characteristic)){const luckNeeded=this.modifiedResult-this.succesThreshold;this.actor.luck>luckNeeded&&(this.hasEnoughLuck=!0,this.luckNeeded=luckNeeded,this.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:luckNeeded}))}if(!this.luckSpent&&(this.increaseSuccess=[],!this.pushing&&"lck"!==this.attribute&&"san"!==this.attribute)){if(this.unknownDifficulty&&this.modifiedResult>this.regularThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.RegularDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.regular,nextLevel.luckToSpend=this.modifiedResult-this.regularThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.regular&&this.modifiedResult>this.hardThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.HardDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.hard,nextLevel.luckToSpend=this.modifiedResult-this.hardThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.hard&&this.modifiedResult>this.extremeThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.ExtremeDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.extreme,nextLevel.luckToSpend=this.modifiedResult-this.extremeThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}}this.canIncreaseSuccess=this.increaseSuccess.length>0,this.isFumble&&(this.canIncreaseSuccess=!1)}if(this.canAwardExperience=this.skill&&!this.skill.system.properties.noxpgain,!(this.passed&&this.diceModifier<=0&&this.skill)||this.skill.system.properties.noxpgain||this.luckSpent||this.forced||this.isBlind||this.isUnknown||this.flagForDevelopement(),this.parent){const parent=await fromUuid(this.parent);parent&&"updateRoll"in parent&&await parent.updateRoll(this.JSONRollString)}}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}get cssClass(){let cssClass="";return this.isSuccess&&(cssClass="success"),this.isFailure&&(cssClass="failure"),this.isCritical&&!this.isFailure&&(cssClass="success critical"),this.isFumble&&!this.isSuccess&&(cssClass="failure fumble"),CoC7Check.successLevel.regular===this.successLevel&&(cssClass+=" regular-success"),CoC7Check.successLevel.hard===this.successLevel&&(cssClass+=" hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&(cssClass+=" extreme-success"),cssClass}get cssClassList(){const cssClass=[];return this.isSuccess&&cssClass.push("success"),this.isFailure&&cssClass.push("failure"),this.isCritical&&!this.isFailure&&cssClass.push("success","critical"),this.isFumble&&!this.isSuccess&&cssClass.push("failure","fumble"),CoC7Check.successLevel.regular===this.successLevel&&cssClass.push("regular-success"),CoC7Check.successLevel.hard===this.successLevel&&cssClass.push("hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&cssClass.push("extreme-success"),cssClass}get playerCssClass(){return this.isSuccess||this.forcedSuccess?"success":this.isFailure||this.forcedFailure?"failure":null}async upgradeCheck(upgradeindex,update=!0){const increasedSuccess=this.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount)||parseInt(increasedSuccess.luckToSpend);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:this.actor.name}));this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel)||parseInt(increasedSuccess.difficulty);this.successLevel=newSuccessLevel,this.difficulty<=newSuccessLevel&&(this.isSuccess=!0,this.isFailure=!1);for(let index=0;index<upgradeindex+1;index++)this.increaseSuccess.shift();for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;return this.luckSpent=!0,this.computeCheck(),update?await this.updateChatCard():void 0}removeUpgrades(){this.canIncreaseSuccess=!1,this.increaseSuccess=[],this.luckNeeded=0,this.luckNeededTxt=null,this.canBePushed=!1}forcePass(luckAmount=null,update=!0){if(luckAmount){this.actor.spendLuck(luckAmount),this.successLevel=this.difficulty;for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;this.luckSpent=!0,this.isSuccess=!0,this.isFailure=!1,this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount),this.computeCheck(),update&&this.updateChatCard()}else this.forced=!0,this.forcedSuccess=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.regular,update):this.forceSuccessLevel(this.difficulty,update)}forceFail(update=!0){this.forced=!0,this.forcedFailure=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.failure,update):this.forceSuccessLevel(this.difficulty-1,update)}_forceCheck(high,low,update=!0){let total=Math.floor(Math.random()*(high-low))+low+1;const unitTotal=total%10;let tenTotal=Math.floor(total/10);const tens=[];let hasEnough=Math.abs(this.diceModifier)===tens.length;for(;!hasEnough;){let ten=Math.floor(10*Math.random()),roll=10*ten+unitTotal;0===roll&&(roll=100,ten=100),this.hasPenalty&&roll<=high&&(tens.push(ten),roll>total&&(total=roll)),this.hasBonus&&roll>low&&(tens.push(ten),roll<total&&(total=roll)),hasEnough=tens.length===Math.abs(this.diceModifier)}10===tenTotal&&0===unitTotal&&(tenTotal=100),tens.splice(Math.floor(Math.random()*tens.length+1),0,10===tenTotal?0:tenTotal),this.dices.tens=[],this.dices.unit.value=unitTotal,this.modifiedResult=total,this.dices.total=total,this.dices.tenResult=total-unitTotal;const max=0===unitTotal?100:90,min=0===unitTotal?10:0;let selected=total-unitTotal;for(let i=0;i<tens.length;i++){const die={};die.value=tens[i],die.value===selected?(selected=101,die.selected=!0,this.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck(),update&&this.updateChatCard()}forceSuccessLevel(successLevel,update=!0){let high,low;CoC7Check.successLevel.fumble===successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.failure===successLevel&&(high=this.regularThreshold===this.fumbleThreshold-1?100:this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.regular===successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.hard===successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.extreme===successLevel&&(high=this.extremeThreshold,low=1),CoC7Check.successLevel.critical===successLevel&&(high=1,low=0),high===low&&low--,0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}increaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.fumble===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold===this.fumbleThreshold-1?this.hardThreshold:this.regularThreshold),CoC7Check.successLevel.failure===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.regular===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.extremeThreshold,low=this.criticalThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.criticalThreshold,low=0),high===low&&low--,this._forceCheck(high,low,update)}decreaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.failure===this.successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.regular===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.critical===this.successLevel&&(high=this.extremeThreshold,low=1),0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}async flagForDevelopement(){this.flaggedForDevelopment=!0,this.skill&&await this.skill.flagForDevelopement()}set difficulty(x){this._difficulty=parseInt(x)}get difficulty(){return this._difficulty}set flavor(x){this._flavor=x}set context(x){this._context=x}get context(){if(this._context)return this._context}set parent(x){this.uuid||(this.uuid=foundry.utils.randomID(16)),this.parentUuid=x}get parent(){if(this.parentUuid)return this.parentUuid}get flavor(){if(this._flavor)return this._flavor;let flavor="";return this.actor?.system&&(this.skill?flavor=game.i18n.format("CoC7.CheckResult",{name:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.item?flavor=game.i18n.format("CoC7.ItemCheckResult",{item:this.item.name,skill:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.characteristic?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(this.actor.system.characteristics[this.characteristic].label),value:this.rawValueString,difficulty:this.difficultyString}):this.attribute?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`),value:this.rawValueString,difficulty:this.difficultyString}):this.displayName&&(flavor=game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}))),flavor||this.rawValue&&(flavor=this.displayName?game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}):game.i18n.format("CoC7.CheckRawValue",{rawvalue:this.rawValue,difficulty:this.difficultyString})),this.pushing&&(flavor=`${game.i18n.format("CoC7.Pushing")} ${flavor}`),flavor}get tooltipHeader(){return this.attribute?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`)})+` (${this.actor.system.attribs[this.attribute].value}%)`:this.characteristic?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.localize(this.actor.system.characteristics[this.characteristic].label)})+` (${this.actor.system.characteristics[this.characteristic].value}%)`:this.skill?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.skill.name})+` (${this.skill.value}%)`:this.displayName?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.displayName})+` (${this.rawValueString}%)`:null}async getHtmlRollElement(options={}){this.options?this.options=foundry.utils.mergeObject(this.options,options):this.options=options;const html=await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this);return html?$.parseHTML(html)[0]:null}async getHtmlRoll(options={}){this.options?this.options=foundry.utils.mergeObject(this.options,options):this.options=options;return await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this)||void 0}async toMessage(pushing=!1){this.pushing=pushing;const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this),speakerData={};let speaker;this.actor?(this.actor.isToken?speakerData.token=this.token.document:this.actor.isDummy?this.actor.name&&(speaker={alias:this.actor.name}):speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor?.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:html,flags:{CoC7:{type:CoC7Check.cardType}}};if(this.uuid&&(chatData.flags.CoC7.uuid=this.uuid),this.context&&(chatData.flags.CoC7.context=this.context),"selfroll"===this.rollMode)if(game.user.isGM){if(chatData.user=game.user.id,chatData.flavor=`[${this.actor.name}] ${chatData.flavor}`,chatData.flags={CoC7:{GMSelfRoll:!0}},void 0!==chatData.speaker&&(chatData.flags.CoC7.originalSpeaker=foundry.utils.duplicate(chatData.speaker)),game.user.isGM)switch(game.settings.get("CoC7","selfRollWhisperTarget")){case"owners":delete chatData.speaker,chatData.whisper=this.actor.owners,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;case"everyone":delete chatData.speaker,chatData.whisper=game.users.players,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;default:ChatMessage.applyRollMode(chatData,this.rollMode)}}else ChatMessage.applyRollMode(chatData,this.rollMode);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),this.dice?.roll&&!this.dice?.hideDice&&(chatData.roll=this.dice.roll,chatData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,chatData.rollMode=this.isBlind?"blindroll":this.rollMode),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({makePublic=!1,forceRoll=!1}={}){makePublic&&(this.rollMode=!1);const chatData={flavor:this.flavor};makePublic&&(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData)),chatData.blind&&(this.isBlind=!0);const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this);let newContent=html;if(!this.messageId)return $.parseHTML(html)[0];const message=game.messages.get(this.messageId),htmlMessage=$.parseHTML(message.content)[0];if(!htmlMessage.classList.contains("roll-result")){const htmlCheck=$.parseHTML(html)[0],rollResultElement=htmlMessage.querySelector(".roll-result");null!==rollResultElement&&rollResultElement.replaceWith(htmlCheck),newContent=htmlMessage.outerHTML}chatData.content=newContent,CONST.CHAT_MESSAGE_TYPES.ROLL===message.type&&(message.whisper?.length?chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER:chatData.type=CONST.CHAT_MESSAGE_TYPES.OTHER),forceRoll&&this.dice?.roll&&(game.user.isGM||!this.isBlind)&&await CoC7Dice.showRollDice3d(this.dice.roll);const msg=await message.update(chatData);return await ui.chat.updateMessage(msg,!1),msg}static async updateCardSwitch(event){const card=event.currentTarget.closest(".chat-card"),check=await CoC7Check.getFromCard(card);check.gmDifficultyRegular=!1,check.gmDifficultyHard=!1,check.gmDifficultyExtreme=!1,check.gmDifficultyCritical=!1,"gmDifficultyRegular"===event.currentTarget.dataset.flag&&(check.gmDifficultyRegular=!0),"gmDifficultyHard"===event.currentTarget.dataset.flag&&(check.gmDifficultyHard=!0),"gmDifficultyExtreme"===event.currentTarget.dataset.flag&&(check.gmDifficultyExtreme=!0),"gmDifficultyCritical"===event.currentTarget.dataset.flag&&(check.gmDifficultyCritical=!0),check.computeCheck(),check.updateChatCard()}get tooltip(){return renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",this)}get inlineCheck(){const a=document.createElement("a");return a.classList.add("coc7-inline-check"),a.classList.add("coc7-check-result"),a.classList.add("coc7-inline"),a.classList.add(...this.cssClassList),a.title=this.tooltipHeader,a.dataset.roll=escape(this.JSONRollString),a.innerHTML=`<i class="game-icon game-icon-d10"></i> ${this.modifiedResult||"??"}`,a}get rollToolTip(){if(this.standby)return;const parts=[],tens=this.dices.tens.map((r=>({result:r.value,selected:r.selected,classes:["die","d10",r.selected?null:"discarded",r.isMin?"min":null,r.isMax?"max":null].filter((c=>c)).join(" ")}))),unit=[{result:this.dices.unit.value,selected:!0,classes:"die d10"}];return parts.push({formula:this.tooltipHeader,total:this.modifiedResult,icons:this.successLevelIcons,class:this.cssClass,successRequired:this.successRequired,resultType:this.resultType,face:10,rolls:[...tens,...unit]}),renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",{parts})}get JSONRollData(){return JSON.parse(this.JSONRollString)}get JSONRollString(){return JSON.stringify(this,((key,value)=>{if(null===value)return;return["_actor","_skill","_item"].includes(key)?void 0:value}))}static fromData(data){return Object.assign(new CoC7Check,data)}static fromRollString(dataString){let data;try{data=JSON.parse(unescape(dataString))}catch(err){return ui.notifications.error(err.message),null}return CoC7Check.fromData(data)}static async alter(check,command,options={}){switch(command){case"useLuck":if(options.target.classList.contains("pass-check")){const luckAmount=parseInt(options.target.dataset.luckAmount);check.forcePass(luckAmount,options.update)}else{const upgradeIndex=parseInt(options.target.dataset.index);await check.upgradeCheck(upgradeIndex,options.update)}break;case"force-pass":check.forcePass(null,options.update);break;case"force-fail":check.forceFail(options.update);break;case"increase-success-level":check.increaseSuccessLevel(options.update);break;case"decrease-success-level":check.decreaseSuccessLevel(options.update);break;case"reveal-check":check.isBlind=!1,check.rollMode=!1,check.computeCheck(),options.update&&check.updateChatCard();break;case"flag-for-development":await check.flagForDevelopement(),check.computeCheck(),options.update&&check.updateChatCard();break;case"push":await check._perform(),check.pushing=!0,options.update&&check.updateChatCard()}}static async _onClickInlineRoll(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("coc7-check-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _collapseInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(!a.classList.contains("expanded"))return;const tooltip=a.querySelector(".coc7-check-tooltip");return tooltip&&tooltip.remove(),a.classList.remove("expanded")}static async _expandInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(a.classList.contains("expanded"))return;const check=Object.assign(new CoC7Check,JSON.parse(unescape(a.dataset.roll)));if(check.standby)return;const tip=document.createElement("div");tip.innerHTML=await check.rollToolTip;const tooltip=tip.children[0];a.appendChild(tooltip),a.classList.add("expanded");const pa=a.getBoundingClientRect(),pt=tooltip.getBoundingClientRect();tooltip.style.left=`${Math.min(pa.x,window.innerWidth-(pt.width+3))}px`,tooltip.style.top=`${Math.min(pa.y+pa.height+3,window.innerHeight-(pt.height+3))}px`;const zi=getComputedStyle(a).zIndex;tooltip.style.zIndex=Number.isNumeric(zi)?zi+1:100}}class CoC7Utilities{static isFormula(x){return"string"==typeof x&&(!!isNaN(Number(x))&&Roll.validate(x))}static ParseChatEntry(html,content){const terms=content.match(/(\S+)/g);if(terms[0]?.toLowerCase().match(/^\/r(oll)?$/)&&terms[1]?.toLowerCase().startsWith("1d%"))return setTimeout((function(){CoC7Utilities._ExecCommand(content)}),200),!1}static async _ExecCommand(content){const options=content.toLowerCase().split(" ")?.join("")?.replace(/\/r(oll)?1d%/,""),check=new CoC7Check;if(options.length){let threshold,flatDiceModifier,flatThresholdModifier,escaped=options,difficulty=CoC7Check.difficultyLevel.regular,diceModifier=0,ask=!1;const thresholdStr=escaped.match(/[^(]+(?=\))/);if(thresholdStr&&thresholdStr.length){threshold=Number(thresholdStr[0]);for(const match of thresholdStr)escaped=escaped.replace(`(${match})`,"")}const difficultyStr=escaped.match(/[^[]+(?=\])/);if(difficultyStr&&difficultyStr.length){difficulty=CoC7Utilities.convertDifficulty(difficultyStr[0]);for(const match of difficultyStr)escaped=escaped.replace(`[${match}]`,"")}if(escaped.includes("?")&&(ask=!0,escaped=escaped.replace("?","")),isNaN(Number(escaped))||(diceModifier=Number(escaped)),ask){const dialogOptions={threshold,modifier:diceModifier,difficulty,askValue:!0},usage=await RollDialog.create(dialogOptions);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold"))||threshold,flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,threshold&&(check.rawValue=isNaN(threshold)?void 0:threshold)}const speaker=ChatMessage.getSpeaker();if(speaker.token&&speaker.scene){const actor=chatHelper.getActorFromKey(`${speaker.scene}.${speaker.token}`);actor&&(check.actor=actor)}else if(speaker.actor){const actor=game.actors.get(speaker.actor);actor&&(check.actor=actor)}await check.roll(),check.toMessage()}static async test(){ui.notifications.infos("Do some stuff")}static getActorFromString(actorString){let actor;return game.actors.tokens[actorString]?game.actors.tokens[actorString]:(actor=game.actors.get(actorString),actor||(actor=Object.values(game.actors.tokens).find((t=>t.name.toLowerCase()===actorString.toLowerCase())),actor||(actor=game.actors.find((a=>a.name.toLowerCase()===actorString.toLowerCase()))),actor||null))}static getCharacteristicNames(char){const charKey=char.toLowerCase();switch(charKey){case"str":return{short:game.i18n.localize("CHARAC.STR"),label:game.i18n.localize("CHARAC.Strength")};case"con":return{short:game.i18n.localize("CHARAC.CON"),label:game.i18n.localize("CHARAC.Constitution")};case"siz":return{short:game.i18n.localize("CHARAC.SIZ"),label:game.i18n.localize("CHARAC.Size")};case"dex":return{short:game.i18n.localize("CHARAC.DEX"),label:game.i18n.localize("CHARAC.Dexterity")};case"app":return{short:game.i18n.localize("CHARAC.APP"),label:game.i18n.localize("CHARAC.Appearance")};case"int":return{short:game.i18n.localize("CHARAC.INT"),label:game.i18n.localize("CHARAC.Intelligence")};case"pow":return{short:game.i18n.localize("CHARAC.POW"),label:game.i18n.localize("CHARAC.Power")};case"edu":return{short:game.i18n.localize("CHARAC.EDU"),label:game.i18n.localize("CHARAC.Education")};case"luck":return{short:game.i18n.localize("CoC7.Luck"),label:game.i18n.localize("CoC7.Luck")};default:for(const[,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))if(charKey===game.i18n.localize(value.short).toLowerCase())return{short:game.i18n.localize(value.short),label:game.i18n.localize(value.label)};return null}}static convertDifficulty(difficulty){if("0"===String(difficulty))return CoC7Check.difficultyLevel.regular;if("string"!=typeof difficulty)return difficulty;if(!isNaN(Number(difficulty)))return Number(difficulty);switch(difficulty){case"?":return CoC7Check.difficultyLevel.unknown;case"+":return CoC7Check.difficultyLevel.hard;case"++":return CoC7Check.difficultyLevel.extreme;case"+++":return CoC7Check.difficultyLevel.critical;default:return CoC7Check.difficultyLevel.regular}}static skillCheckMacro(skill,event,options={}){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;speaker.token&&(actor=game.actors.tokens[speaker.token]),actor||(actor=game.actors.get(speaker.actor)),actor?actor.skillCheck(skill,event.shiftKey,options):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static weaponCheckMacro(weapon,event){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;if(speaker.token&&(actor=game.actors.tokens[speaker.token]),!actor)if(speaker.scene&&speaker.token){const baseActor=game.actors.get(speaker.actor),token=game.scenes.get(speaker.scene).tokens.get(speaker.token);actor=new(getDocumentClass("Actor"))(baseActor.toJSON(),{parent:token})}else actor=game.actors.get(speaker.actor);actor?actor.weaponCheck(weapon,event.shiftKey):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static async checkMacro(threshold=void 0,event=null){await CoC7Utilities.rollDice(event,{threshold})}static createMacro(bar,data,slot){if("Item"!==data.type)return;const item=fromUuidSync(data.uuid,bar);if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));if("weapon"!==item.type&&"skill"!==item.type)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroIncorrectType"));let command="";if("weapon"===item.type&&(command=`game.CoC7.macros.weaponCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`),"skill"===item.type){if(CoC7Item.isAnySpec(item))return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoGlobalSpec"));command=`game.CoC7.macros.skillCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`}if(""!==command){const macro=game.macros.contents.find((m=>m.name===item.name&&m.command===command));return macro?(game.user.assignHotbarMacro(macro,slot),!1):(Macro.create(foundry.utils.duplicate({name:item.name,type:"script",img:item.img,command})).then((macro=>{game.user.assignHotbarMacro(macro,slot)})),!1)}return!0}static async toggleDevPhase(toggle){await game.settings.set("CoC7","developmentEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async toggleCharCreation(toggle){await game.settings.set("CoC7","charCreationEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets(),Hooks.call("toggleCharCreation",toggle)}static async getTarget(){const users=game.users.filter((user=>user.active)),actors=game.actors;let checkOptions=`<input type="checkbox" name="COCCheckAllPC" id="COCCheckAllPC">\n\n    <label for="COCCheckAllPC">${game.i18n.localize("CoC7.allActors")}</label>`;const playerTokenIds=users.map((u=>u.character?.id)).filter((id=>void 0!==id)),selectedPlayerIds=canvas.tokens.controlled.map((token=>token.actor.id));actors.forEach((actor=>{const checked=(selectedPlayerIds.includes(actor.id)||playerTokenIds.includes(actor.id))&&"checked";checkOptions+=`\n     <br>\n     <input type="checkbox" name="${actor.id}" id="${actor.id}" value="${actor.name}" ${checked}>\n\n     <label for="${actor.id}">${actor.name}</label>\n       `})),new Dialog({title:`${game.i18n.localize("CoC7.dreaming")}`,content:`${game.i18n.localize("CoC7.restTargets")}: ${checkOptions} <br>`,buttons:{whisper:{label:`${game.i18n.localize("CoC7.startRest")}`,callback:async html=>{const targets=[];let all=!1;const users=html.find('[type="checkbox"]');for(const user of users)"COCCheckAllPC"===user.name&&user.checked&&(all=!0),(user.checked||all)&&targets.push(user.id);await CoC7Utilities.startRest(targets)}}}}).render(!0)}static async startRest(targets){if(!targets.length)return;const actors=game.actors.filter((actor=>targets.includes(actor.id)));let chatContent=`<i>${game.i18n.localize("CoC7.dreaming")}...</i><br>`;for(const actor of actors)if(["character","npc","creature"].includes(actor.type)){let quickHealer=!1;for(const item of actor.items)"talent"===item.type&&item.name===`${game.i18n.localize("CoC7.quickHealer")}`&&(quickHealer=!0);const isCriticalWounds=!game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")&&actor.hasConditionStatus(COC7.status.criticalWounds),dailySanityLoss=actor.system.attribs.san.dailyLoss,hpValue=actor.system.attribs.hp.value,hpMax=actor.system.attribs.hp.max,mpValue=actor.system.attribs.mp.value,mpMax=actor.system.attribs.mp.max,pow=actor.system.characteristics.pow.value;if(chatContent+=`<br><b>${actor.name}. </b>`,hpValue<hpMax)if(!0===isCriticalWounds)chatContent+=`<b style="color:darkred">${game.i18n.localize("CoC7.hasCriticalWounds")}. </b>`;else{let healAmount=1;game.settings.get("CoC7","pulpRuleFasterRecovery")&&(healAmount=2),!0===quickHealer&&healAmount++,healAmount=Math.min(healAmount,hpMax-hpValue),chatContent+=1===healAmount?`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.healthRecovered")}. </b>`:`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:healAmount})}. </b>`,actor.update({"system.attribs.hp.value":actor.system.attribs.hp.value+healAmount})}dailySanityLoss>0&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.dailySanLossRestarted")}.</b>`,actor.update({"system.attribs.san.dailyLoss":0,"system.attribs.san.dailyLimit":Math.floor(actor.system.attribs.san.value/5)}));const hours=7;if(hours>0&&mpValue<mpMax){let magicAmount=hours*Math.ceil(pow/100);magicAmount=Math.min(magicAmount,mpMax-mpValue),chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.magicPointsRecovered")}: ${magicAmount}.</b>`,actor.update({"system.attribs.mp.value":actor.system.attribs.mp.value+magicAmount})}}const chatData={user:game.user.id,speaker:ChatMessage.getSpeaker(),content:chatContent,type:CONST.CHAT_MESSAGE_TYPES.OTHER};ChatMessage.create(chatData)}static async toggleXPGain(toggle){await game.settings.set("CoC7","xpEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled"))}static async rollDice(event,options={}){let diceModifier,difficulty,flatDiceModifier,flatThresholdModifier;options.askValue=!options.threshold;let threshold=options.threshold;if(void 0!==options.modifier&&(diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!event?.shiftKey&&!options.fastForward){const usage=await RollDialog.create(options);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const actors=[];if(game.user.isGM&&canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)actors.push(token.actor.tokenKey);else game.user.character&&actors.push(game.user.character.tokenKey);for(const tk of actors){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tk,await check.roll(),check.toMessage()}if(!actors.length){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,await check.roll(),check.toMessage()}}static updateCharSheets(){if(game.user.isGM)for(const a of game.actors.contents)"character"===a?.type&&a?.sheet&&a?.sheet?.rendered&&(a.update({"system.flags.locked":!0}),a.render(!1));else for(const a of game.actors.contents)a.isOwner&&(a.update({"system.flags.locked":!0}),a.render(!1))}static async getDataFromDropEvent(event,entityType="Item"){if(event.originalEvent)return[];try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if("Folder"===dataList.type&&dataList.documentName===entityType){const folder=await fromUuid(dataList.uuid);return folder?folder.contents:[]}if(dataList.type===entityType){const item=await fromUuid(dataList.uuid);return item?[item]:[]}return[]}catch(err){return[]}}static async copyToClipboard(text){try{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(text);{const textArea=document.createElement("textarea");return textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999px",textArea.style.top="-999px",document.body.appendChild(textArea),textArea.focus(),textArea.select(),new Promise(((resolve,reject)=>{document.execCommand("copy")?resolve():reject(new Error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))),textArea.remove()})).catch((err=>ui.notifications.error(err)))}}catch(err){ui.notifications.error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))}}static quoteRegExp(string){const len=string.length;let qString="";for(let current,i=0;i<len;++i)if(current=string.charAt(i),current>=" "&&current<="~")"\\"!==current&&"'"!==current||(qString+="\\"),qString+=current.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");else switch(current){case"\b":qString+="\\b";break;case"\f":qString+="\\f";break;case"\n":qString+="\\n";break;case"\r":qString+="\\r";break;case"\t":qString+="\\t";break;case"\v":qString+="\\v";break;default:qString+="\\u",current=current.charCodeAt(0).toString(16);for(let j=4;--j>=current.length;qString+="0");qString+=current}return qString}static setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}static getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}static SfromUuid(uuid){let doc,parts=uuid.split(".");if("Compendium"===parts[0])return null;{const[docName,docId]=parts.slice(0,2);parts=parts.slice(2);doc=CONFIG[docName].collection.instance.get(docId)}for(;doc&&parts.length>1;){const[embeddedName,embeddedId]=parts.slice(0,2);doc=doc.getEmbeddedDocument(embeddedName,embeddedId),parts=parts.slice(2)}return doc||null}static isDocumentUuidPack(uuid){return!!uuid.includes("Compendium")}static isDocumentUuid(uuid){const identifiers=["Actor","Scene","Token","Item","Compendium"];for(let i=0;i<identifiers.length;i++)if(uuid.includes(identifiers[i]))return!0;return!1}static getActorDocumentFromDropData(dropData){let docUuid,actor;return docUuid=dropData.tokenUuid?dropData.tokenUuid:void 0!==dropData.uuid?dropData.uuid:dropData.sceneId&&dropData.tokenId?`Scene.${dropData.sceneId}.Token.${dropData.tokenId}`:dropData.actorId||dropData.actorKey||dropData.id,"Token"===dropData.type?docUuid=dropData.uuid:docUuid&&(actor=CoC7Utilities.getActorFromKey(docUuid),actor||"Item"!==dropData.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid),docUuid}static getDocumentFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=foundry.utils.duplicate(scene)),token}return game.actors.get(key)||null}static getActorFromKey(key){const doc=CoC7Utilities.getDocumentFromKey(key);return doc?doc.actor?doc.actor:"CoCActor"===doc.constructor?.name?doc:null:null}static async createImportCharactersFolderIfNotExists(){let folderName=game.i18n.localize("CoC7.ImportedCharactersFolder");"CoC7.ImportedCharactersFolder"===folderName&&(folderName="Imported characters");let importedCharactersFolder=game.folders.find((entry=>entry.name===folderName&&"Actor"===entry.type));return null==importedCharactersFolder&&(importedCharactersFolder=await Folder.create({name:folderName,type:"Actor",parent:null}),ui.notifications.info(game.i18n.localize("CoC7.CreatedImportedCharactersFolder"))),importedCharactersFolder}static async guessItem(type,name,{combat=null,source="",fallbackAny=!1}={}){let existing=null;name=name.toLocaleLowerCase();for(let o=0,oM=source.length;o<oM;o++)switch(source.substring(o,o+1)){case"i":if(existing=game.items.find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing;break;case"w":case"m":case"s":for(const pack of game.packs)if("Item"===pack.metadata.type&&("w"===source[o]&&"world"===pack.metadata.package||"S"===source[o]&&"CoC7"===pack.metadata.package||"s"===source[o]&&!["world","CoC7"].includes(pack.metadata.package))){if(existing=(await pack.getDocuments()).find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing}}if(fallbackAny&&"skill"===type){const match=name.match(/^(.+ \()(?!any).+(\))$/);if(match)return await CoC7Utilities.guessItem(type,match[1]+"any"+match[2],{combat,source})}}static toKebabCase(s){if(!s)return"";const match=s.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);return match?match.join("-").toLowerCase():""}static sortByNameKey(a,b){return a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase().localeCompare(b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase())}}class CoCIDEditor extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-editor.hbs",width:900,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!0,submitOnChange:!0})}async getData(){const sheetData=super.getData();sheetData.supportedLanguages=CONFIG.supportedLanguages,this.options.editable=this.object.sheet.isEditable,sheetData.guessCode=game.system.api.cocid.guessId(this.object),sheetData.idPrefix=game.system.api.cocid.getPrefix(this.object),sheetData.cocidFlag=this.object.flags?.CoC7?.cocidFlag,sheetData.id=sheetData.cocidFlag?.id||"",sheetData.lang=sheetData.cocidFlag?.lang||game.i18n.lang,sheetData.priority=sheetData.cocidFlag?.priority||0,sheetData.eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData.eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(sheetData.cocidFlag?.eras??{})[key]});sheetData.eras.sort(CoC7Utilities.sortByNameKey);const CoCIDKeys=foundry.utils.flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys??{}),prefix=new RegExp("^"+CoC7Utilities.quoteRegExp(sheetData.idPrefix));sheetData.existingKeys=Object.keys(CoCIDKeys).reduce(((obj,k)=>(k.match(prefix)&&obj.push({k,name:CoCIDKeys[k]}),obj)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.isSystemID=void 0!==CoCIDKeys[sheetData.id];const match=sheetData.id.match(/^([^\\.]+)\.([^\\.]*)\.(.+)/);if(sheetData._existing=match&&void 0!==match[3]?match[3]:"",sheetData.id&&sheetData.lang){const worldDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"world"}),usedEras={},uniqueWorldPriority={};sheetData.worldDocumentInfo=await Promise.all(worldDocuments.map((async d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueWorldPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:await TextEditor.enrichHTML(d.link,{async:!0}),folder:d?.folder?.name}}))),Object.entries(uniqueWorldPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateWorldPriority=!0),sheetData.worldDuplicates=worldDocuments.length??0;const compendiumDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"compendiums"}),uniqueCompendiumPriority={};sheetData.compendiumDocumentInfo=await Promise.all(compendiumDocuments.map((async d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueCompendiumPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:await TextEditor.enrichHTML(d.link,{async:!0}),folder:d?.folder?.name??""}}))),Object.entries(uniqueCompendiumPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateCompendiumPriority=!0),sheetData.compendiumDuplicates=compendiumDocuments.length??0,sheetData.usedEras=[];for(const[key,value]of Object.entries(usedEras))sheetData.usedEras.push({id:key,name:game.i18n.localize(value)});sheetData.usedEras.sort(CoC7Utilities.sortByNameKey)}else sheetData.compendiumDocumentInfo=[],sheetData.worldDocumentInfo=[],sheetData.worldDuplicates=0,sheetData.compendiumDuplicates=0,sheetData.warnDuplicateWorldPriority=!1,sheetData.warnDuplicateCompendiumPriority=!1;return sheetData}activateListeners(html){super.activateListeners(html),html.find("a.copy-to-clipboard").click((function(e){CoC7Utilities.copyToClipboard($(this).siblings("input").val())})),this.object.sheet.isEditable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find("input[name=_existing").change((function(e){const obj=$(this),prefix=obj.data("prefix");let value=obj.val();""!==value&&(value=prefix+CoC7Utilities.toKebabCase(value)),html.find("input[name=id]").val(value).trigger("change")})),html.find("select[name=known]").change((function(e){const obj=$(this);html.find("input[name=id]").val(obj.val())})),html.find("a[data-guess]").click((async function(e){e.preventDefault();const guess=$(this).data("guess");html.find("input[name=id]").val(guess).trigger("change")})))}static async eraToggle(document,propertyId){if("setup"===document.type){const update={[propertyId]:!0};if(void 0!==document.flags?.CoC7?.cocidFlag?.eras)for(const[key]of Object.entries(document.flags.CoC7.cocidFlag.eras))key!==propertyId&&(update["-="+key]=null);await document.update({"flags.CoC7.cocidFlag.eras":update})}else void 0===document.flags?.CoC7?.cocidFlag?.eras?.[propertyId]?void 0===document.flags?.CoC7?.cocidFlag?.eras?await document.update({"flags.CoC7.cocidFlag.eras":{[propertyId]:!0}}):await document.update({[`flags.CoC7.cocidFlag.eras.${propertyId}`]:!0}):await document.update({[`flags.CoC7.cocidFlag.eras.-=${propertyId}`]:null})}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await CoCIDEditor.eraToggle(this.object,propertyId),this.render()}async _updateObject(event,formData){const id=formData.id||"";await this.object.update({"flags.CoC7.cocidFlag.id":id,"flags.CoC7.cocidFlag.lang":formData.lang||game.i18n.lang,"flags.CoC7.cocidFlag.priority":formData.priority||0,"flags.CoC7.cocidFlag.eras":this.object.flags?.CoC7?.cocidFlag?.eras??{}});const html=$(this.object.sheet.element).find("header.window-header a.header-button.edit-coc-id-warning,header.window-header a.header-button.edit-coc-id-exisiting");html.length&&html.css({color:id?"var(--color-text-light-highlight)":"red"}),this.render()}}function addCoCIDSheetHeaderButton(headerButtons,sheet){if(game.user.isGM){const sheetCoCID=sheet.object.flags?.CoC7?.cocidFlag,CoCIDEditorButton={class:void 0===sheetCoCID||void 0===sheetCoCID.id||""===sheetCoCID.id?"edit-coc-id-warning":"edit-coc-id-exisiting",label:"CoC7.CoCIDFlag.id",icon:"fas fa-fingerprint",onclick:()=>{new CoCIDEditor(sheet.object,{}).render(!0,{focus:!0})}},numberOfButtons=headerButtons.length;headerButtons.splice(numberOfButtons-1,0,CoCIDEditorButton)}}class CoC7ContextMenu{bind(menu,html,callback){this._callback=callback,this._html=html,this._menu=menu;try{const menuTrigger=html.find(`[data-context-menu=${menu.id}]`);if(0===menuTrigger.length)return;menuTrigger.contextmenu(this._onContextMenu.bind(this));const menuElement=CoC7ContextMenu.CreateMenu(menu);menuElement.on("click",".menu-action",this._onMenuAction.bind(this)),0!==this.menu.length?this.menu.replaceWith(menuElement):this.menuContainer.append(menuElement)}catch(error){console.error(error)}}get menuContainer(){let menuContainer=this._html.find(".menu-container");return 0===menuContainer.length&&(this._html.append('<div class="menu-container"></div>'),menuContainer=this._html.find(".menu-container")),menuContainer}get menu(){return this.menuContainer.find(`.context-menu-wrapper.${this._menu.id}`)}_onMenuAction(event){return this._callback(event,this.target)}static closeAll(){$("body").find(".menu-container").find(".context-menu-wrapper").each((function(i,m){m.style.visibility="hidden"}))}_onContextMenu(event){event.preventDefault(!0),CoC7ContextMenu.closeAll();const target=event?.currentTarget;if(this.target=target,!target)return;const menuName=target.dataset?.contextMenu;if(menuName===this._menu.id){const wrapper=this.menu;if(wrapper.length>0){const subMenu=wrapper.find(".sub-menu");let left=event.clientX,top=event.clientY;const menuHeight=wrapper.outerHeight(),menuWidth=wrapper.outerWidth();window.innerHeight<menuHeight+top&&(top-=menuHeight),window.innerWidth<menuWidth+left&&(left=window.innerWidth-menuWidth),subMenu.length>0&&(window.innerWidth<menuWidth+left+subMenu.outerWidth()?subMenu.css({right:menuWidth-5+"px",left:""}):subMenu.css({left:menuWidth-5+"px",right:""})),wrapper.css({left:`${left}px`,top:`${top}px`,visibility:"visible"})}}}static canSee(visibility){switch(visibility.toLowerCase()){case"gm":return game.user.isGM;case"trusted":return game.user.isTrusted;default:return!0}}static CreateMenu(menu){const classes="string"==typeof menu.classes?[menu.classes]:menu.classes;classes.push("context-menu-wrapper");const wrapper=$("<div></div>");if(wrapper.addClass(menu.id),classes.forEach((c=>wrapper.addClass(c))),menu.section)menu.section.forEach((s=>{const section=CoC7ContextMenu.CreateSection(s,{multi:!0});section&&wrapper.append(section)}));else{const section=CoC7ContextMenu.CreateSection(menu);section&&wrapper.append(section)}return wrapper}static CreateSection(s,{multi=!1,subMenu=!1}={}){if(!s.items)return null;if(s.visibility&&!CoC7ContextMenu.canSee(s.visibility))return null;const classes=s.classes?"string"==typeof s.classes?[s.classes]:s.classes:[];multi&&classes.push("menu-section"),subMenu&&classes.push("sub-menu");const section=$("<ul></ul>");return classes.forEach((c=>section.addClass(c))),s.items.forEach((i=>{const li=$("<li></li>");if(li.addClass("menu-item"),i.action&&(li.addClass("menu-action"),li.attr("data-action",i.action)),"string"==typeof i.label?li.append(`<span>${i.label}</span>`):(i.label.icon&&li.append(`<i class="${i.label.icon}"></i>`),i.label.text&&li.append(`<span>${i.label.text}</span>`)),i.subMenu){li.addClass("sub-menu-button"),li.append('<i class="fas fa-caret-right"></i>');const sub=CoC7ContextMenu.CreateSection(i.subMenu,{subMenu:!0});sub&&li.append(sub)}section.append(li)})),section}}class CoC7ActorSheet extends ActorSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu"),sheetData.canDragToken=!!this.token&&game.user.isGM,sheetData.linkedActor=!0===this.actor.prototypeToken?.actorLink,sheetData.isToken=this.actor.isToken,sheetData.itemsByType={},sheetData.skills={},sheetData.combatSkills={},sheetData.weapons={},sheetData.rangeWpn=[],sheetData.meleeWpn=[],sheetData.actorFlags={},sheetData.effects="character"===this.actor.type?CoC7ActiveEffect.prepareActiveEffectCategories(this.actor.effects):CoC7ActiveEffect.prepareNPCActiveEffectCategories(this.actor.effects),sheetData.permissionLimited=!game.user.isGM&&(this.actor.ownership[game.user.id]??this.actor.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED,sheetData.isKeeper=game.user.isGM,sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM||"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled"),"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled")&&(sheetData.data.system.flags.locked=!1),"vehicle"!==this.actor.type&&(sheetData.data.system.characteristics||(sheetData.data.system.characteristics={str:{value:null,short:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,short:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,short:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,short:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,short:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,short:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,short:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,short:"CHARAC.EDU",label:"CHARAC.Education",formula:null}}),sheetData.data.system.attribs||(sheetData.data.system.attribs={hp:{value:null,max:null,short:"HP",label:"Hit points",auto:!0},mp:{value:null,max:null,short:"HP",label:"Magic points",auto:!0},lck:{value:null,short:"LCK",label:"Luck"},san:{value:null,max:99,short:"SAN",label:"Sanity",auto:!0},mov:{value:null,short:"MOV",label:"Movement rate",auto:!0},db:{value:null,short:"DB",label:"Damage bonus",auto:!0},build:{value:null,short:"BLD",label:"Build",auto:!0},armor:{value:null,auto:!1}}),sheetData.data.system.biography||(sheetData.data.system.biography={personalDescription:{type:"string",value:""}}),sheetData.data.system.infos||(sheetData.data.system.infos={occupation:"",age:"",sex:"",residence:"",birthplace:"",archetype:"",organization:"",playername:""}),sheetData.data.system.flags||(sheetData.data.system.flags={locked:!0,manualCredit:!1}),sheetData.data.system.credit||(sheetData.data.system.credit={monetarySymbol:null,multiplier:null,spent:null,assetsDetails:null}),sheetData.data.system.development||(sheetData.data.system.development={personal:null,occupation:null,archetype:null}),sheetData.data.system.biography||(sheetData.data.system.biography=[]),sheetData.pulpRuleArchetype=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.pulpRuleOrganization=game.settings.get("CoC7","pulpRuleOrganization")),sheetData.isDead=this.actor.dead,sheetData.isDying=this.actor.dying,sheetData.items){for(const item of sheetData.items){if("skill"===item.type)if(item.system.properties.special&&(item.system.properties.fighting&&(item.system.specialization=game.i18n.localize("CoC7.FightingSpecializationName")),item.system.properties.firearm&&(item.system.specialization=game.i18n.localize("CoC7.FirearmSpecializationName"))),"character"!==this.actor.type){if(isNaN(Number(item.system.value))){let value=null;const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=foundry.utils.getProperty(this,value.substring(5)));try{value=(await new Roll(item.system.value,parsed).evaluate({async:!0})).total}catch(err){console.warn(game.i18n.format("CoC7.ErrorUnableToParseSkillFormula",{value:item.system.value,name:item.name})),value=null}if(value){item.system.value=value;const itemToUpdate=this.actor.items.get(item._id);console.info(`[COC7] (Actor:${this.name}) Evaluating skill ${item.name}:${item.system.value} to ${value}`),await itemToUpdate.update({"system.value":value})}}const skill=this.actor.items.get(item._id),{base,rawValue,value}=skill.system;item.system.rawValue=rawValue||value||base,item.system.value=value||base}else{const skill=this.actor.items.get(item._id);if(item.system.base=await skill.asyncBase(),item.system.value){let updatedExp=(item.system.adjustments?.experience?parseInt(item.system.adjustments.experience):0)+parseInt(item.system.value)-skill.value;updatedExp<=0&&(updatedExp=null),console.info(`[COC7] Updating skill ${skill.name} experience. Experience missing: ${updatedExp}`),await this.actor.updateEmbeddedDocuments("Item",[{_id:item._id,"system.adjustments.experience":updatedExp,"system.value":null}]),item.system.adjustments||(item.system.adjustments={}),item.system.adjustments.experience=updatedExp,item.system.rawValue=skill.rawValue,item.system.value=skill.value}else item.system.value=skill.value,item.system.rawValue=skill.rawValue}let list=sheetData.itemsByType[item.type];list||(list=[],sheetData.itemsByType[item.type]=list),list.push(item)}for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey);sheetData.skills=sheetData.items.filter((item=>"skill"===item.type)).sort(CoC7Utilities.sortByNameKey),sheetData.meleeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.fighting)),sheetData.rangeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.firearm));const cbtSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat));if(cbtSkills)for(const skill of cbtSkills)sheetData.combatSkills[skill._id]=skill;const weapons=sheetData.itemsByType.weapon;if(weapons)for(const weapon of weapons){if(weapon.usesAlternateSkill=!0===weapon.system.properties.auto||!0===weapon.system.properties.brst,weapon.system.ammo||(weapon.system.ammo=0),weapon.skillSet=!0,""===weapon.system.skill.main.id)weapon.skillSet=!1;else{if(sheetData.combatSkills[weapon.system.skill.main.id]){const skill=this.actor.items.get(weapon.system.skill.main.id);weapon.system.skill.main.name=skill.system.skillName,weapon.system.skill.main.value=skill.value}else weapon.skillSet=!1;if(""!==weapon.system.skill.alternativ.id&&sheetData.combatSkills[weapon.system.skill.alternativ.id]){const skill=this.actor.items.get(weapon.system.skill.alternativ.id);weapon.system.skill.alternativ.name=skill.system.skillName,weapon.system.skill.alternativ.value=skill.value}}weapon.system._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.value=!0===weapon.system.properties[key],weapon.system._properties.push(property)}sheetData.weapons[weapon._id]=weapon,weapon.system.properties.rngd?sheetData.rangeWpn.push(weapon):sheetData.meleeWpn.push(weapon)}const token=this.token;if(sheetData.tokenId=token?`${token.parent?.id?token.parent.id:"TOKEN"}.${token.id}`:null,sheetData.hasEmptyValueWithFormula=!1,sheetData.data.system.characteristics)for(const characteristic of Object.values(sheetData.data.system.characteristics))characteristic.value||(characteristic.editable=!0),characteristic.hard=Math.floor(characteristic.value/2),characteristic.extreme=Math.floor(characteristic.value/5),characteristic.value||characteristic.formula?characteristic.display=!0:characteristic.display=!1,!characteristic.value&&characteristic.formula&&(characteristic.hasEmptyValueWithFormula=!0),sheetData.hasEmptyValueWithFormula=sheetData.hasEmptyValueWithFormula||characteristic.hasEmptyValueWithFormula}if(["vehicle","container"].includes(this.actor.type))sheetData.data.system.attribs.hp.auto=!1,sheetData.data.system.attribs.mp.auto=!1,sheetData.data.system.attribs.san.auto=!1,sheetData.data.system.attribs.mov.auto=!1,sheetData.data.system.attribs.db.auto=!1,sheetData.data.system.attribs.build.auto=!1;else{const auto=this.actor.checkUndefinedAuto();sheetData.data.system=foundry.utils.mergeObject(sheetData.data.system,auto)}return sheetData.data.system.attribs.mp.value<0&&(sheetData.data.system.attribs.mp.value=null),sheetData.data.system.attribs.san.value<0&&(sheetData.data.system.attribs.san.value=null),["vehicle"].includes(this.actor.type)||sheetData.data.system.biography instanceof Array&&sheetData.data.system.biography.length&&(sheetData.data.system.biography[0].isFirst=!0,sheetData.data.system.biography[sheetData.data.system.biography.length-1].isLast=!0),sheetData.showInventoryItems=!1,sheetData.showInventoryBooks=!1,sheetData.showInventorySpells=!1,sheetData.showInventoryTalents=!1,sheetData.showInventoryStatuses=!1,sheetData.showInventoryWeapons=!1,sheetData.hasConditions=this.actor.effects.size>0||void 0!==this.actor.system.conditions&&Object.keys(this.actor.system.conditions).filter((condition=>this.actor.system.conditions[condition].value)).length>0,sheetData}get tokenKey(){throw ui.notifications.error("DEPRECATED SHOULD NOT HAPPEN!"),new Error("base.js get tokenKey(): DEPRECATED SHOULD NOT HAPPEN!")}onCloseSheet(){}activateListeners(html){if(super.activateListeners(html),html.find(".section-header").click(this._onSectionHeader.bind(this)),html.find(".items-header").click(this._onItemHeader.bind(this)),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".read-only").dblclick(this._toggleReadOnly.bind(this)),html.find(".add-ammo").click(this._onAddAmo.bind(this)),html.find(".reload-weapon").click((event=>this._onReloadWeapon(event))),html.find(".reload-weapon").on("contextmenu",(event=>this._onReloadWeapon(event))),this.actor.isOwner&&!this.actor.compendium?.locked&&(html.find(".lock").click(this._onLockClicked.bind(this)),html.find(".flag").click(this._onFlagClicked.bind(this)),html.find(".formula").click(this._onFormulaClicked.bind(this)),html.find(".auto-toggle").click(this._onAutoToggle.bind(this))),this.actor.isOwner&&void 0===this.actor.compendium){if(game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const rollMenu={id:"skill-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"gm",items:[{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}},{action:"request-roll",label:"Request roll"}]}]},sanMenu={id:"san-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"encounter",label:"Encounter"},{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"trusted",items:[{action:"request-roll",label:"Request roll"},{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"},{action:"link-encounter",label:"Encounter"}]}}]}]},rollContextMenu=new CoC7ContextMenu;rollContextMenu.bind(rollMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(rollContextMenu);const sanContextMenu=new CoC7ContextMenu;sanContextMenu.bind(sanMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(sanContextMenu)}else html.find(".characteristic-label").contextmenu(this._onOpposedRoll.bind(this)),html.find(".skill-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".attribute-label.rollable").contextmenu(this._onOpposedRoll.bind(this));html.find(".characteristic-label").click(this._onRollCharacteriticTest.bind(this)),html.find(".skill-name.rollable").click(this._onRollSkillTest.bind(this)),html.find(".skill-image").click(this._onRollSkillTest.bind(this)),html.find(".attribute-label.rollable").click(this._onRollAttribTest.bind(this)),html.find(".token-drag-handle").on("dragstart",this._onDragTokenStart.bind(this)),html.find(".characteristic-label").on("dragstart",(event=>this._onDragCharacteristic(event))),html.find(".attribute-label").on("dragstart",(event=>this._onDragAttribute(event))),html.find(".san-check").on("dragstart",(event=>this._onDragSanCheck(event))),html.find(".weapon-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".roll-characteritics").click(this._onRollCharacteriticsValue.bind(this)),html.find(".average-characteritics").click(this._onAverageCharacteriticsValue.bind(this)),html.find(".toggle-switch").click(this._onToggle.bind(this)),(game.user.isGM||game.settings.get("CoC7","statusPlayerEditable"))&&(html.find(".reset-counter").click(this._onResetCounter.bind(this)),html.find(".condition-monitor").click(this._onConditionToggle.bind(this)),html.find(".is-dying").click(this.heal.bind(this)),html.find(".is-dead").click(this.revive.bind(this))),html.find(".dying-check").click(this.checkForDeath.bind(this)),html.find(".item .item-image").click((event=>this._onItemRoll(event))),html.find(".weapon-name.rollable").click((event=>this._onWeaponRoll(event))),html.find(".item-name.effect-name").click((event=>this._onEffect(event))),html.find(".weapon-skill.rollable").click((async event=>this._onWeaponSkillRoll(event))),html.on("click",".weapon-damage",this._onWeaponDamage.bind(this));const wheelInputs=html.find(".attribute-value");for(const wheelInput of wheelInputs)wheelInput.addEventListener("wheel",(event=>this._onWheel(event)),{passive:!0})}this.options.editable&&(html.find(".show-detail").click((event=>this._onItemSummary(event))),html.find(".item-popup").click(this._onItemPopup.bind(this)),html.find(".show-detail").dblclick((event=>this._onRenderItemSheet(event))),html.find(".item-edit").click((event=>this._onRenderItemSheet(event))),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.stopPropagation(),ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":{const properties={};ev.currentTarget.dataset.melee?properties.melee=!0:ev.currentTarget.dataset.rngd&&(properties.rngd=!0),this.actor.createEmptyWeapon(ev,properties)}}})),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".add-new-section").click((()=>{this.actor.createBioSection(),this.render()})),html.find(".delete-section").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.deleteBioSection(index)})),html.find(".move-section-up").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionUp(index)})),html.find(".move-section-down").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionDown(index)})),html.find(".development-flag").dblclick((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("developement")})),html.find(".occupation-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("occupation")})),html.find(".archetype-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("archetype")})),html.find(".skill-developement").click((event=>{this.actor.developementPhase(event.shiftKey)})),html.find(".luck-development").click((event=>{event.detail&&1!==event.detail||this.actor.developLuck(event.shiftKey)})),html.find(".clear_conditions").click((event=>{if(void 0!==this.actor.system.conditions){const disable={};for(const condition in this.actor.system.conditions)void 0!==this.actor.system.conditions[condition].value&&!0===this.actor.system.conditions[condition].value&&(disable[`system.conditions.${condition}.value`]=!1);Object.keys(disable).length>0&&this.actor.update(disable)}const effects=this.actor.effects.map((effect=>effect.id));effects.length>0&&this.actor.deleteEmbeddedDocuments("ActiveEffect",effects)})),html.find(".test-trigger").click((async event=>{if(!game.settings.get("CoC7","hiddendevmenu"))return null})),html.find(".skill-name.rollable").mouseenter(this.toolTipSkillEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".characteristic-label").mouseenter(this.toolTipCharacteristicEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".attribute-label.rollable").mouseenter(this.toolTipAttributeEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".auto-toggle").mouseenter(this.toolTipAutoEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".item-control.development-flag").mouseenter(this.toolTipFlagForDevelopment.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.actor))))}toolTipSkillEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const isCombat=game.CoC7Tooltips.ToolTipHover.classList?.contains("combat"),item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId);let toolTip=game.i18n.format(isCombat?"CoC7.ToolTipCombat":"CoC7.ToolTipSkill",{skill:skill.name,regular:skill.value,hard:Math.floor(skill.value/2),extreme:Math.floor(skill.value/5)});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipCharacteristicEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const char=game.CoC7Tooltips.ToolTipHover.closest(".char-box");if(void 0!==char&&char){const charId=char.dataset.characteristic,characteristic=sheet.actor.characteristics[charId];let toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:characteristic.label,regular:characteristic.value??0,hard:characteristic.hard??0,extreme:characteristic.extreme??0});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipAttributeEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const attrib=game.CoC7Tooltips.ToolTipHover.closest(".attribute");if(void 0!==attrib){const attributeId=attrib.dataset.attrib;let toolTip="";const attributes=sheet.actor.system.attribs[attributeId];switch(attributeId){case"lck":toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:attributes.label,regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip);break;case"db":toolTip=game.i18n.localize("CoC7.ToolTipDB"),game.CoC7Tooltips.displayToolTip(toolTip);break;case"san":toolTip=game.i18n.format("CoC7.ToolTipSanity",{skill:"Sanity",regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.i18n.localize("CoC7.ToolTipKeeperSanity")+(game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):"")})),game.CoC7Tooltips.displayToolTip(toolTip)}}}}),delay)}}toolTipAutoEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const toolTip=game.i18n.localize("CoC7.ToolTipAutoToggle");game.CoC7Tooltips.displayToolTip(toolTip)}}),delay))}toolTipFlagForDevelopment(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId),toolTip=game.i18n.format("CoC7.ToolTipSkillFlagToggle",{status:game.i18n.localize(skill.system.flags.developement?"CoC7.ToolTipSkillFlagged":"CoC7.ToolTipSkillUnflagged")});game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}_onContextMenuClick(event,target){const targetType=target.dataset?.targetType,rollOptions={preventStandby:!0,fastForward:!1,actor:this.actor};switch(targetType){case"skill":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL,rollOptions.skillId=target.closest(".item")?.dataset.skillId;break;case"characteristic":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,rollOptions.characteristic=target.closest(".char-box").dataset.characteristic;break;case"attribute":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.attribute=target.closest(".attribute").dataset.attrib}switch(event.currentTarget.dataset.action){case"roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL;break;case"opposed-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_OPPOSED;break;case"combined-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED;break;case"request-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL,rollOptions.preventStandby=!1;break;case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToClipboard=!0;break;case"link-encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0;break;case"encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_SAN_CHECK,rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.fastForward=!0}CoC7ChatMessage.trigger(rollOptions)}_onRenderItemSheet(event){const li=$(event.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",message.actorTo=await new Promise((resolve=>{new Dialog({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,buttons:{confirm:{label:game.i18n.localize("CoC7.Validate"),callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)if("user"===name)return resolve(value)}}},default:"confirm",close:()=>{}}).render(!0)})),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onDragStart(event){if(super._onDragStart(event),this.token){const dragData=JSON.parse(event.dataTransfer.getData("text/plain"));dragData.tokenUuid=this.token.uuid,dragData.tokenId=this.token.id,dragData.sceneId=this.token.parent.id,event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}_onDragCharacteristic(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"characteristic",check:"check",type:"CoC7Link",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.characteristic,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragAttribute(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"attribute",check:"check",type:"CoC7Link",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.attrib,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragSanCheck(event){const sanMin=event.currentTarget.querySelector(".san-value.pass"),sanMax=event.currentTarget.querySelector(".san-value.failed"),data={CoC7Type:"link",linkType:"coc7-link",check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,sanMin:sanMin.innerText,sanMax:sanMax.innerText,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain");if(""===dataString)return!1;const data=JSON.parse(dataString);"CoC7Link"===data.type&&data.check===CoC7Link.CHECK_TYPE.EFFECT&&CoC7Link._onLinkActorClick(this.actor,data),await super._onDrop(event)}async _onConditionToggle(event){event.preventDefault(),event.currentTarget.dataset.condition&&await this.actor.toggleCondition(event.currentTarget.dataset.condition)}async revive(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dead)}async heal(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dying)}async checkForDeath(event){const conCheck=new CoC7ConCheck(this.actor.isToken?this.actor.tokenKey:this.actor.id);conCheck.stayAlive=!0,conCheck.toMessage(event.shiftKey)}async _onDragTokenStart(event){const data={type:"Token",uuid:this.token.uuid};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onResetCounter(event){event.preventDefault(),await this.actor.resetDailySanity()}async _onAutoToggle(event){if(event.currentTarget.closest(".attribute")){const attrib=event.currentTarget.closest(".attribute").dataset.attrib;this.actor.toggleAttribAuto(attrib)}}async _onToggle(event){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&weapon.toggleProperty(event.currentTarget.dataset.property,isCtrlKey(event))}async _onRollCharacteriticsValue(){await this.actor.rollCharacteristicsValue()}async _onAverageCharacteriticsValue(){this.actor.averageCharacteristicsValue()}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked,Hooks.call("actorLockClickedCoC7",[!isLocked])}async _onFlagClicked(event){event.preventDefault();const flagName=event.currentTarget.dataset.flag;this.actor.toggleActorFlag(flagName)}async _onFormulaClicked(event){event.preventDefault(),this.actor.toggleActorFlag("displayFormula")}async _onWheel(event){let value=parseInt(event.currentTarget.value)||null;switch(event.deltaY>0&&(value=0===value?0:value-1),event.deltaY<0&&(value+=1),event.currentTarget.name){case"system.attribs.hp.value":case"system.attribs.build.current":this.actor.setHp(value);break;case"system.attribs.mp.value":this.actor.setMp(value);break;case"system.attribs.san.value":this.actor.setSan(value);break;case"system.attribs.lck.value":this.actor.setLuck(value)}}_toggleReadOnly(event){event.currentTarget.readOnly=!event.currentTarget.readOnly,event.currentTarget.classList.toggle("read-only")}async _onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=await item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>{summary.remove(),li.toggleClass("expanded")}))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),div.slideDown(200,(()=>li.toggleClass("expanded")))}}async _onSectionHeader(event){event.preventDefault();const section=event.currentTarget.closest("section"),pannelClass=event.currentTarget.dataset.pannel;if(void 0===pannelClass)return;const pannel=$(section).find(`.pannel.${pannelClass}`);pannel.hasClass("expanded")?pannel.slideUp(200,(()=>pannel.toggleClass("expanded"))):pannel.slideDown(200,(()=>pannel.toggleClass("expanded")));const camelFlag=chatHelper.hyphenToCamelCase(`data.pannel.${pannelClass}.expanded`);this.actor.update({[camelFlag]:!pannel.hasClass("expanded")},{render:!1})}_onInventoryHeader(event){event.preventDefault();const li=$(event.currentTarget).siblings("li");li.is(":visible")?li.slideUp(200):li.slideDown(200)}_onItemHeader(event){event.preventDefault();const ol=$(event.currentTarget).next("ol");ol.is(":visible")?ol.slideUp(200):ol.slideDown(200)}async _onItemPopup(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id"));CoC7ActorSheet.popupSkill(item)}static async popupSkill(skill){skill.system.description.enrichedValue=await TextEditor.enrichHTML(skill.system.description.value,{async:!0});new Dialog({title:game.i18n.localize("CoC7.SkillDetailsWindow"),content:skill,buttons:{},close:()=>{}},{classes:["coc7","sheet","skill"],width:520,height:480,scrollY:[".item-description"],template:"systems/CoC7/templates/apps/skill-details.html"}).render(!0)}async _onItemRoll(event){event.preventDefault()}async _onEffect(event){event.preventDefault();const effectId=event.currentTarget.closest("li").dataset.effectId,effect=this.actor.effects.get(effectId);isCtrlKey(event)&&game.user.isGM&&CoC7ContentLinkDialog.create({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.EFFECT,object:effect})}async _onWeaponRoll(event){event.preventDefault();const itemId=event.currentTarget.closest("li").dataset.itemId,fastForward=event.shiftKey,weapon=this.actor.items.get(itemId);let actorKey;if(actorKey=this.token?this.actor.isToken&&game.actors.tokens[this.token.id]?`TOKEN.${this.token.id}`:`${this.token.parent.id}.${this.token.id}`:this.actor.id,isCtrlKey(event)&&game.user.isGM){const linkData={check:CoC7Link.CHECK_TYPE.ITEM,name:weapon.name};CoC7ContentLinkDialog.create(linkData,{actors:[this.actor]})}else{let proceedWithoutTarget;if(game.user.targets.size<=0&&(proceedWithoutTarget=await new Promise((resolve=>{const data={title:" ",content:game.i18n.format("CoC7.NoTargetSelected",{weapon:weapon.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>resolve(!0)}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)}))),game.user.targets.size>0||proceedWithoutTarget){if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(actorKey,itemId,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(actorKey,itemId,fastForward).createChatCard()}}}}async _onReloadWeapon(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);0===event.button?event.shiftKey?await weapon.reload():await weapon.addBullet():2===event.button&&(event.shiftKey?await weapon.setBullets(0):await weapon.shootBullets(1))}async _onAddAmo(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);await weapon.addBullet()}async _onWeaponSkillRoll(event){event.preventDefault();const skillId=event.currentTarget.dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,itemId=event.currentTarget.closest("li")?event.currentTarget.closest("li").dataset.itemId:null,check=new CoC7Check;if(!event.shiftKey){const usage=await RollDialog.create();usage&&(check.diceModifier=usage.get("bonusDice"),check.difficulty=usage.get("difficulty"),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=tokenKey||actorId,check.skill=skillId,check.item=itemId,await check.roll(),check.toMessage()}async _onWeaponDamage(event){event.preventDefault();const itemId=event.currentTarget.closest(".weapon").dataset.itemId,range=event.currentTarget.closest(".weapon-damage").dataset.range,damageChatCard=new DamageCard({fastForward:event.shiftKey,range});damageChatCard.actorKey=this.actor.tokenKey,damageChatCard.itemId=itemId,damageChatCard.updateChatCard()}async _onOpposedRoll(event){if(event.preventDefault(),"db"===event.currentTarget.parentElement.dataset.attrib)return;const data={rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_OPPOSED,event,actor:this.actor};event.currentTarget.classList.contains("characteristic-label")?data.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:event.currentTarget.classList.contains("attribute-label")&&(data.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE),event.altKey&&(data.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED),CoC7ChatMessage.trigger(data)}async _onRollCharacteriticTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,characteristic:event.currentTarget.closest(".char-box").dataset.characteristic,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _onRollAttribTest(event){event.preventDefault();const attrib=event.currentTarget.parentElement.dataset.attrib;if("db"!==attrib)game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,attribute:event.currentTarget.closest(".attribute").dataset.attrib,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,cardType:event.altKey&&"san"===attrib?CoC7ChatMessage.CARD_TYPE_SAN_CHECK:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor});else if(!/^-{0,1}\d+$/.test(event.currentTarget.parentElement.dataset.rollFormula)){const r=new Roll(event.currentTarget.parentElement.dataset.rollFormula);await r.roll({async:!0}),isNaN(r.total)||void 0===r.total||r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:game.i18n.localize("CoC7.BonusDamageRoll")})}}_onRollSkillTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,skillId:event?.currentTarget.closest(".item")?.dataset.skillId,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _updateObject(event,formData){const overrides=foundry.utils.flattenObject(this.actor.overrides),name=event?.currentTarget?.name;if(name&&overrides&&overrides[name]&&ui.notifications.warn(game.i18n.format("CoC7.EffectAppliedCantOverride",{name})),event.currentTarget&&event.currentTarget.classList){if(event.currentTarget.classList.contains("skill-adjustment")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(item){const value=event.currentTarget.value?parseInt(event.currentTarget.value):null;if(event.currentTarget.value?isNaN(value)||await item.update({[event.currentTarget.name]:value}):await item.update({[event.currentTarget.name]:null}),game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating")===item.name&&void 0!==this.actor.occupation?.system?.creditRating?.max){const creditValue=(item.value||0)-(item.system.adjustments?.experience||0);(creditValue>Number(this.actor.occupation.system.creditRating.max)||creditValue<Number(this.actor.occupation.system.creditRating.min))&&ui.notifications.warn(game.i18n.format("CoC7.CreditOutOfRange",{min:Number(this.actor.occupation.system.creditRating.min),max:Number(this.actor.occupation.system.creditRating.max)}))}}}if(event.currentTarget.classList.contains("attribute-value")){if("system.attribs.san.value"===event.currentTarget.name)return await this.actor.setSan(parseInt(event.currentTarget.value)),void this.render(!0);if("system.attribs.hp.value"===event.currentTarget.name)return await this.actor.setHp(parseInt(event.currentTarget.value)),void this.render(!0)}if(event.currentTarget.classList.contains("text-area"))return void this.actor.updateTextArea(event.currentTarget);if(event.currentTarget.classList.contains("bio-section-value")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);await this.actor.updateBioValue(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("bio-section-title")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);this.actor.updateBioTitle(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("npc-skill-score")){const skill=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);skill&&await skill.updateValue(event.currentTarget.value)}if(event.currentTarget.classList.contains("skill-name")||event.currentTarget.classList.contains("item-name")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);if(item){const data={};if(item.system.properties.special){const parts=CoC7Item.getNamePartsSpec(event.currentTarget.value,item.system.specialization);data.name=parts.name,data["system.skillName"]=parts.skillName,data["system.specialization"]=parts.specialization}else data["system.skillName"]=event.currentTarget.value,data.name=event.currentTarget.value;await item.update(data)}}if(event.currentTarget.classList.contains("characteristic-formula")&&0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("attribute-value")&&0!==event.currentTarget.value.length&&"db"===event.currentTarget.closest(".attribute").dataset.attrib){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("weapon-skill")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId),skill=this.actor.items.get(event.currentTarget.options[event.currentTarget.selectedIndex].value);if(weapon&&skill)switch(event.currentTarget.dataset.skill){case"main":await weapon.update({"system.skill.main.id":skill.id,"system.skill.main.name":skill.name});break;case"alternativ":await weapon.update({"system.skill.alternativ.id":skill.id,"system.skill.alternativ.name":skill.name})}}if(event.currentTarget.classList.contains("weapon-name")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&await weapon.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("damage-formula")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(weapon)if(0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);if(await r.roll({async:!0}),isNaN(r.total)||void 0===r.total)ui.notifications.error(game.i18n.format("CoC7.ErrorUnableToParseFormula",{value:event.currentTarget.value}));else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":event.currentTarget.value});break;case"long":await weapon.update({"system.range.long.damage":event.currentTarget.value});break;case"extreme":await weapon.update({"system.range.extreme.damage":event.currentTarget.value})}}else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":null});break;case"long":await weapon.update({"system.range.long.damage":null});break;case"extreme":await weapon.update({"system.range.extreme.damage":null})}}}return this.object.update(formData)}}class CoC7NPCSheet extends CoC7ActorSheet{async getData(){const sheetData=await super.getData();return sheetData.allowFormula=!0,sheetData.displayFormula=this.actor.getActorFlag("displayFormula")||!1,sheetData.hasSan=null!==sheetData.data.system.attribs.san.value,sheetData.hasMp=null!==sheetData.data.system.attribs.mp.value,sheetData.hasLuck=null!==sheetData.data.system.attribs.lck.value,sheetData.isCreature=!1,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.showInventoryWeapons=!1,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBiographyPersonalDescription=await TextEditor.enrichHTML(sheetData.data.system.biography.personalDescription?.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const sanlossMenu={id:"san-loss-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}]},sanlossContextMenu=new CoC7ContextMenu;sanlossContextMenu.bind(sanlossMenu,html,this._onSanLossContextMenuClick.bind(this)),this.menus.push(sanlossContextMenu)}html.find(".roll-san").click(this._onSanCheck.bind(this))}async _onSanLossContextMenuClick(event){const rollOptions={rollType:CoC7ChatMessage.ROLL_TYPE_ENCOUNTER,preventStandby:!0,fastForward:!1,event,cardType:CoC7ChatMessage.CARD_TYPE_SAN_CHECK,actor:this.actor};switch(event.currentTarget.dataset.action){case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToClipboard=!0}CoC7ChatMessage.trigger(rollOptions)}async _onSanCheck(event){if(event.preventDefault(),this.actor.system.special.sanLoss.checkPassed||this.actor.system.special.sanLoss.checkFailled)if(isCtrlKey(event)&&game.user.isGM){let difficulty,modifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")))}const linkData={check:"sanloss",sanMin:this.actor.system.special.sanLoss.checkPassed,sanMax:this.actor.system.special.sanLoss.checkFailled,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void 0!==modifier&&(linkData.modifier=modifier),void 0!==difficulty&&(linkData.difficulty=difficulty);const link=(new CoC7Link)._createDocumentLink(linkData);link&&chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}))}else{const sanData={sanMax:this.actor.sanLossCheckFailled,sanMin:this.actor.sanLossCheckPassed,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};SanCheckCard.checkTargets(sanData,event.shiftKey)}}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc"],dragDrop:[{dragSelector:".item",dropSelector:null}],template:"systems/CoC7/templates/actors/npc-sheet.html",width:580,resizable:!1,minimizable:!0})}async _updateObject(event,formData){if(!(event.currentTarget&&event.currentTarget.classList&&event.currentTarget.classList.contains("characteristic-score")))return super._updateObject(event,formData);this.actor.setCharacteristic(event.currentTarget.name,event.currentTarget.value)}static forceAuto(app,html){html.height("auto")}setPosition(a){super.setPosition(a),CoC7NPCSheet.forceAuto(a,this._element)}}class CoC7CreatureSheet extends CoC7NPCSheet{async getData(){const sheetData=await super.getData();return sheetData.isCreature=!0,sheetData}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc","creature"]})}}class CoC7CreateMythosEncounter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7"],title:game.i18n.localize("CoC7.SanityLossTypeDialogTitle"),template:"systems/CoC7/templates/apps/sanity-loss-type.hbs",height:"auto"})}async getData(){const data=await super.getData();return data.isImmunity="immunity"===data.object.type,data}activateListeners(html){html.find(".field_type").change(this._onSelectChange.bind(this)),html.find(".dialog-button").click(this._onButtonClick.bind(this)),super.activateListeners(html)}_onButtonClick(event){if("add"===event.currentTarget.dataset.button){const html=$(event.currentTarget).closest(".window-content"),type=html.find(".field_type").val(),name=html.find(".field_name").val(),value=parseInt(html.find(".field_value").val()),sanityLossEvents=this.object.actor.system.sanityLossEvents??[];sanityLossEvents.push({type:name,totalLoss:value,immunity:"immunity"===type}),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.object.actor.update({"data.sanityLossEvents":sanityLossEvents})}this.close()}_onSelectChange(event){const html=$(event.currentTarget).closest(".window-content");this.object.name=html.find(".field_name").val(),this.object.type=html.find(".field_type").val(),this.render(!0)}async _updateObject(event,formData){}}class CoC7CharacterSheet extends CoC7ActorSheet{_getHeaderButtons(){if("CoC7CharacterSheet"===this.constructor.name){this.summarized||(this.summarized=!1);let buttons=super._getHeaderButtons();return buttons=[{label:this.summarized?game.i18n.localize("CoC7.Maximize"):game.i18n.localize("CoC7.Summarize"),class:"test-extra-icon",icon:this.summarized?"fas fa-window-maximize":"fas fa-window-minimize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}return super._getHeaderButtons()}async toggleSheetMode(event){this.summarized=!this.summarized;let options=foundry.utils.duplicate(CoC7CharacterSheet.defaultOptions);this.summarized&&(options=foundry.utils.mergeObject(options,{classes:["coc7","actor","character","summarized"],height:200,resizable:!1,width:700})),options.token=this.options.token,await this.close(),await this.render(!0,options)}async getData(){const sheetData=await super.getData();this.isEditable&&void 0===this.actor.getFlag("CoC7","skillListMode")&&await this.actor.setFlag("CoC7","skillListMode",!1),this.isEditable&&void 0===this.actor.getFlag("CoC7","skillShowUncommon")&&await this.actor.setFlag("CoC7","skillShowUncommon",!0),sheetData.skillListModeValue=this.actor.getFlag("CoC7","skillListMode")??!1,sheetData.skillShowUncommon=this.actor.getFlag("CoC7","skillShowUncommon")??!0,sheetData.showIconsOnly=game.settings.get("CoC7","showIconsOnly"),this.actor.occupation?(sheetData.data.system.infos.occupation=this.actor.occupation.name,sheetData.data.system.infos.occupationSet=!0):sheetData.data.system.infos.occupationSet=!1,this.actor.archetype?(sheetData.data.system.infos.archetype=this.actor.archetype.name,sheetData.data.system.infos.archetypeSet=!0):sheetData.data.system.infos.archetypeSet=!1,sheetData.totalExperience=this.actor.experiencePoints,sheetData.totalOccupation=this.actor.occupationPointsSpent,sheetData.invalidOccupationPoints=Number(this.actor.occupationPointsSpent)!==Number(this.actor.system.development?.occupation),sheetData.totalArchetype=this.actor.archetypePointsSpent,sheetData.invalidArchetypePoints=Number(this.actor.archetypePointsSpent)!==Number(this.actor.system.development?.archetype),sheetData.totalPersonal=this.actor.personalPointsSpent,sheetData.invalidPersonalPoints=Number(this.actor.personalPointsSpent)!==Number(this.actor.system.development?.personal),sheetData.creditRatingMax=Number(this.actor.occupation?.system.creditRating.max),sheetData.creditRatingMin=Number(this.actor.occupation?.system.creditRating.min),sheetData.invalidCreditRating=this.actor.creditRatingSkill?.system.adjustments?.occupation>sheetData.creditRatingMax||this.actor.creditRatingSkill?.system.adjustments?.occupation<sheetData.creditRatingMin,sheetData.pulpTalentCount=sheetData.itemsByType.talent?.length?sheetData.itemsByType.talent?.length:0,sheetData.minPulpTalents=this.actor.archetype?.system.talents?this.actor.archetype?.system.talents:0,sheetData.invalidPulpTalents=sheetData.pulpTalentCount<sheetData.minPulpTalents,sheetData.hasDevelopmentPhase=this.actor.hasDevelopmentPhase,sheetData.allowDevelopment=game.settings.get("CoC7","developmentEnabled"),sheetData.allowCharCreation=game.settings.get("CoC7","charCreationEnabled"),sheetData.developmentRollForLuck=game.settings.get("CoC7","developmentRollForLuck"),sheetData.showDevPannel=sheetData.allowDevelopment||sheetData.allowCharCreation,sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});sheetData.manualCredit=this.actor.getActorFlag("manualCredit"),sheetData.manualCredit||(sheetData.monetary={spendingLevel:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.spendingLevel),assets:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.assets),cash:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.cash)}),sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.summarized=this.summarized&&!sheetData.permissionLimited,sheetData.skillList=[];let previousSpec="";for(const skill of sheetData.skills)!sheetData.skillShowUncommon&&skill.system.properties.rarity||(skill.system.properties.special&&previousSpec!==skill.system.specialization&&(previousSpec=skill.system.specialization,sheetData.skillList.push({isSpecialization:!0,name:skill.system.specialization})),sheetData.skillList.push(skill));if(sheetData.skillsByValue=[...sheetData.skills].sort(((a,b)=>b.system.value-a.system.value)),sheetData.topSkills=[...sheetData.skillsByValue].slice(0,14),sheetData.skillsByValue=sheetData.skillsByValue.filter((skill=>sheetData.skillShowUncommon||!skill.system.properties.rarity)),sheetData.topWeapons=[...sheetData.meleeWpn,...sheetData.rangeWpn].sort(((a,b)=>a.system.skill.main?.value-b.system.skill.main?.value)).reverse().slice(0,3),sheetData.displayPlayerName=game.settings.get("CoC7","displayPlayerNameOnSheet"),sheetData.displayPlayerName&&!sheetData.data.system.infos.playername){const user=this.actor.characterUser;user&&(sheetData.data.system.infos.playername=user.name)}return sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBackstory=await TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}_saveScrollPositions(html){super._saveScrollPositions(html);this._scrollPositionsX=[".right-panel .tab.development ol"].reduce(((pos,sel)=>{const el=html.find(sel);return pos[sel]=Array.from(el).map((el=>el.scrollLeft)),pos}),{})}_restoreScrollPositions(html){super._restoreScrollPositions(html);const selectors=[".right-panel .tab.development ol"],positions=this._scrollPositionsX||{};for(const sel of selectors){html.find(sel).each(((i,el)=>{el.scrollLeft=positions[sel]?.[i]||0}))}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","character"],template:"systems/CoC7/templates/actors/character/index.html",width:687,height:623,resizable:!0,dragDrop:[{dragSelector:".item",dropSelector:null}],scrollY:[".right-panel .tab"],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"skills"}]})}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&(html.find(".skill-name.rollable.flagged4dev").click((async event=>this._onSkillDev(event))),html.find(".reset-occupation").click((async()=>await this.actor.resetOccupation())),html.find(".reset-archetype").click((async()=>await this.actor.resetArchetype())),html.find(".open-item").click((event=>this._onItemDetails(event))),html.find(".toggle-list-mode").click((event=>{this.toggleSkillListMode(event)})),html.find(".toggle-uncommon-mode").click((event=>{this.toggleSkillUncommonMode(event)})),game.user.isGM&&(html.find(".sanity-loss-type-add").click(this._onAddSanityLossReason.bind(this)),html.find(".sanity-loss-type-delete").click(this._onDeleteSanityLossReason.bind(this)),html.find(".mythosEncountersTotalLoss").blur(this._onEditSanityLossReason.bind(this)),html.find(".toggle-keeper-flags").click(this._onToggleKeeperFlags.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this))))}_onAddMonetary(){const values=this.actor.system.monetary.values?foundry.utils.duplicate(this.actor.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.actor.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=foundry.utils.duplicate(this.actor.system.monetary.values);values.splice(Number(div.dataset.index),1),this.actor.update({"system.monetary.values":values})}_onToggleKeeperFlags(event){switch(event.preventDefault(),event.currentTarget.dataset.flag){case"mythosInsanityExperienced":this.actor.setFlag("CoC7","mythosInsanityExperienced",!this.actor.mythosInsanityExperienced);break;case"mythosHardened":this.actor.setFlag("CoC7","mythosHardened",!this.actor.mythosHardened)}}async _onAddSanityLossReason(event){event.preventDefault(),new CoC7CreateMythosEncounter({actor:this.actor,type:event.currentTarget.dataset.type},{}).render(!0)}async _onEditSanityLossReason(event){const input=$(event.currentTarget),offset=input.closest(".flexrow").data("offset");if(void 0!==this.actor.system.sanityLossEvents?.[offset]?.totalLoss){const sanityLossEvents=foundry.utils.duplicate(this.actor.system.sanityLossEvents);sanityLossEvents[offset].totalLoss=parseInt(input.val(),10),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}}_onDeleteSanityLossReason(event){event.preventDefault();const offset=$(event.currentTarget).closest(".flexrow").data("offset"),sanityLossEvents=this.actor.system.sanityLossEvents??[];sanityLossEvents.splice(offset,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}async toggleSkillListMode(event){return await this.actor.setFlag("CoC7","skillListMode",!this.actor.getFlag("CoC7","skillListMode")),await this.render(!0)}async toggleSkillUncommonMode(event){return await this.actor.setFlag("CoC7","skillShowUncommon",!this.actor.getFlag("CoC7","skillShowUncommon")),await this.render(!0)}async _onSkillDev(event){event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.itemId;await this.actor.developSkill(skillId,event.shiftKey)}_onItemDetails(event){event.preventDefault();const type=event.currentTarget.dataset.type,item=this.actor[type];item&&item.sheet.render(!0)}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.monetary?.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),super._updateObject(event,formData)}static renderSheet(sheet,html){if(game.settings.get("CoC7","overrideSheetArtwork")){if(game.settings.get("CoC7","artWorkSheetBackground"))if("null"===game.settings.get("CoC7","artWorkSheetBackground").toLowerCase())sheet.element.css("--main-sheet-bg","url( './assets/images/void.webp')");else if(sheet.element.css("--main-sheet-bg",game.settings.get("CoC7","artWorkSheetBackground")),"slice"!==game.settings.get("CoC7","artWorkSheetBackgroundType")){let styleSheet,cssRuleIndex;for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href?.endsWith("coc7g.css")){styleSheet=document.styleSheets[i];break}if(styleSheet)for(let i=0;i<styleSheet.rules.length;i++)if(".sheetV2.character form"===styleSheet.rules[i].selectorText){cssRuleIndex=i;break}if(cssRuleIndex){const CSSStyle=styleSheet.rules[cssRuleIndex].style;switch(CSSStyle.removeProperty("border-image"),CSSStyle.setProperty("background",game.settings.get("CoC7","artWorkSheetBackground")),game.settings.get("CoC7","artWorkSheetBackgroundType")){case"auto":default:CSSStyle.setProperty("background-size","auto");break;case"contain":CSSStyle.setProperty("background-size","contain");break;case"cover":CSSStyle.setProperty("background-size","cover")}}}if(game.settings.get("CoC7","artWorkOtherSheetBackground")&&("null"===game.settings.get("CoC7","artWorkOtherSheetBackground").toLowerCase()?sheet.element.css("--other-sheet-bg","url( './assets/images/void.webp')"):sheet.element.css("--other-sheet-bg",game.settings.get("CoC7","artWorkOtherSheetBackground"))),game.settings.get("CoC7","artworkSheetImage")&&("null"===game.settings.get("CoC7","artworkSheetImage").toLowerCase()?sheet.element.css("--main-sheet-image","url( './assets/images/void.webp')"):sheet.element.css("--main-sheet-image",game.settings.get("CoC7","artworkSheetImage"))),game.settings.get("CoC7","artworkFrontColor")&&sheet.element.css("--main-sheet-front-color",game.settings.get("CoC7","artworkFrontColor")),game.settings.get("CoC7","artworkBackgroundColor")&&sheet.element.css("--main-sheet-back-color",game.settings.get("CoC7","artworkBackgroundColor")),game.settings.get("CoC7","artworkInteractiveColor")&&sheet.element.css("--main-sheet-interactive-color",game.settings.get("CoC7","artworkInteractiveColor")),game.settings.get("CoC7","artworkFixedSkillLength")||(sheet.element.css("--skill-length","auto"),sheet.element.css("--skill-specialization-length","auto")),game.settings.get("CoC7","artworkMainFont")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFont")).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontBold")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFontBold"),{weight:"bold"}).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontSize")){const size=`${game.settings.get("CoC7","artworkMainFontSize")}px`;size!==$(":root").css("font-size")&&$(":root").css("font-size",size)}}if(void 0!==sheet.actor?.system.pannel)for(const[key,value]of Object.entries(sheet.actor.system.pannel)){const pannelClass=chatHelper.camelCaseToHyphen(key),pannel=html.find(`.pannel.${pannelClass}`);value.expanded?pannel.addClass("expanded"):pannel.removeClass("expanded")}}}class CoC7Combat{static renderCombatTracker(app,html,data){const currentCombat=data.combats[data.currentIndex-1];currentCombat&&(html.find(".combatant").each(((i,el)=>{const combId=el.getAttribute("data-combatant-id"),combatantControlsDiv=el.querySelector(".combatant-controls"),combatant=currentCombat.combatants.get(combId);if(combatant.getFlag("CoC7","hasGun")?$(combatantControlsDiv).prepend(`<a class="combatant-control active add-init" title="${game.i18n.localize("CoC7.PutGunAway")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`):$(combatantControlsDiv).prepend(`<a class="combatant-control add-init" title="${game.i18n.localize("CoC7.DrawGun")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`),"optional"===game.settings.get("CoC7","initiativeRule")&&game.settings.get("CoC7","displayInitAsText")){if(combatant.initiative){const tokenInitiative=el.querySelector(".token-initiative"),initiativeTest=tokenInitiative.querySelector(".initiative"),roll=100*combatant.initiative-100*Math.floor(combatant.initiative);switch(Math.floor(combatant.initiative)){case CoC7Check.successLevel.fumble:tokenInitiative.classList.add("fumble"),initiativeTest.innerText=game.i18n.localize("CoC7.Fumble"),initiativeTest.title=roll;break;case CoC7Check.successLevel.failure:tokenInitiative.classList.add("failure"),initiativeTest.innerText=game.i18n.localize("CoC7.Failure"),initiativeTest.title=roll;break;case CoC7Check.successLevel.regular:tokenInitiative.classList.add("regular-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyRegular"),initiativeTest.title=roll;break;case CoC7Check.successLevel.hard:tokenInitiative.classList.add("hard-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyHard"),initiativeTest.title=roll;break;case CoC7Check.successLevel.extreme:tokenInitiative.classList.add("extreme-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyExtreme"),initiativeTest.title=roll;break;case CoC7Check.successLevel.critical:tokenInitiative.classList.add("critical"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyCritical"),initiativeTest.title=roll}}}else if(combatant.initiative<0){const h4=el.querySelector(".token-name").querySelector("h4"),span=el.querySelector("span.initiative");h4.style.fontWeight="900",h4.style.textShadow="1px 1px 4px darkred",span.style.fontWeight="900",span.style.textShadow="1px 1px 4px darkred",el.style.color="darkred",el.style.background="black",el.style.fontWeight="900"}})),html.find(".add-init").click((event=>CoC7Combat._onToggleGun(event))))}static async _onToggleGun(event){event.preventDefault(),event.stopPropagation();const li=event.currentTarget.closest(".combatant"),c=await game.combat.combatants.get(li.dataset.combatantId);c.actor.isOwner&&(c.getFlag("CoC7","hasGun")?await c.setFlag("CoC7","hasGun",!1):await c.setFlag("CoC7","hasGun",!0));const newInit=await c.actor.rollInitiative(!!c.getFlag("CoC7","hasGun"));c.getFlag("CoC7","hasGun")?c.initiative<newInit&&game.combat.setInitiative(c.id,newInit):game.combat.setInitiative(c.id,newInit)}}async function rollInitiative(ids,{formula=null,updateTurn=!0,messageOptions={}}={}){const updates=[];for(const[,id]of ids.entries()){const combatant=this.combatants.get(id),roll=await combatant.actor.rollInitiative(!!combatant.getFlag("CoC7","hasGun"));updates.push({_id:id,initiative:roll})}return updates.length?(await this.updateEmbeddedDocuments("Combatant",updates),this):this}class CoCIDBatch extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-batch.hbs",width:700,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!1,submitOnChange:!1})}async getData(){const sheetData=super.getData();return sheetData.foundKeys=Object.keys(sheetData.object.foundKeys).reduce(((out,key)=>(out.push({name:key,key:sheetData.object.foundKeys[key]}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.missingNames=Object.keys(sheetData.object.missingNames).reduce(((out,key)=>(out.push({key:sheetData.object.foundKeys[key]??"",name:key,custom:sheetData.object.missingNames[key],suffix:sheetData.object.missingNames[key].replace(this.object.suffixRegExp,"")}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData}activateListeners(html){super.activateListeners(html),html.find(".existing").change(this.onSetName.bind(this)),html.find(".fa-wand-magic").click(this.onClickGuess.bind(this)),html.find("input").keyup(this.onKeyup.bind(this))}onSetName(event){const obj=$(event.currentTarget);this.object.missingNames[obj.closest("li").data("name")]=obj.val(),this.render(!0)}onClickGuess(event){const name=$(event.currentTarget).closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+CoC7Utilities.toKebabCase(name),this.render(!0)}onKeyup(event){const obj=$(event.currentTarget),name=obj.closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+obj.val()}async _updateObject(event,formData){event.submitter&&(this.object.typeName===game.i18n.localize("CoC7.Entities.Skill")&&(this.close(),await CoCIDBatch.processSkillKeys(this.object.updateList,this.object.missingNames)),this.object.resolve(!0))}static async processSkillKeys(updateList,missingNames){const items=[],actors={},scenes={};for(const update of updateList){update.cocidFlag.id=missingNames[update.name],void 0===update.cocidFlag.lang&&(update.cocidFlag.lang=game.i18n.lang),void 0===update.cocidFlag.priority&&(update.cocidFlag.priority=0),void 0===update.cocidFlag.eras&&(update.cocidFlag.eras={});const flags=foundry.utils.flattenObject({flags:{CoC7:{cocidFlag:update.cocidFlag}}});if(void 0!==update.scene){if(void 0===scenes[update.scene]){const scene=game.scenes.get(update.scene);scenes[update.scene]=scene.toObject()}const tokenOffset=scenes[update.scene].tokens.findIndex((t=>t._id===update.token));if(tokenOffset>-1){const itemOffset=scenes[update.scene].tokens[tokenOffset].actorData.items.findIndex((i=>i._id===update.item));if(itemOffset>-1){const expandedFlags=foundry.utils.expandObject(Object.entries(flags).reduce(((out,entry)=>(entry[0].match(/^flags\.CoC7\.cocidFlag/)&&(out[entry[0]]=entry[1]),out)),{}));scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset]=foundry.utils.mergeObject(scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset],expandedFlags)}}}else if(void 0!==update.actor){void 0===actors[update.actor]&&(actors[update.actor]=[]);const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);actors[update.actor].push(item)}else{const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);items.push(item)}}if(items.length&&await Item.updateDocuments(items),Object.keys(actors).length)for(const actorId of Object.keys(actors))await Item.updateDocuments(actors[actorId],{parent:game.actors.get(actorId)});if(Object.keys(scenes).length)for(const sceneId of Object.keys(scenes)){game.scenes.get(sceneId).update(scenes[sceneId])}return!0}static async populateSkillKeys(updateList,missingNames,foundKeys){for(const actor of game.actors.contents){const actorData=actor.toObject();if(actorData.items)for(const item of actorData.items){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({actor:actor._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}for(const item of game.items.contents){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}for(const scene of game.scenes){const sceneData=scene.toObject();for(const token of sceneData.tokens??[])if(token.actorId&&!token.actorLink){const actorData=foundry.utils.duplicate(token.actorData);for(const item of actorData.items??[]){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({scene:sceneData._id,token:token._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}}if(Object.keys(missingNames).filter((key=>""===missingNames[key])).length>0){const items=await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\.skill\./,type:"i",era:!1});for(const item of items)foundKeys[item.name]=item.flags.CoC7.cocidFlag.id;for(const key in foundry.utils.flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys??{}))foundKeys[game.i18n.format("CoC7.CoCIDFlag.keys."+key)]=key;for(const name in missingNames)void 0!==foundKeys[name]&&(missingNames[name]=foundKeys[name])}}static async create(type){const updateList=[],missingNames={},foundKeys={};let typeName="",idPrefix="",suffixRegExp=null;return"skill"===type&&(typeName=game.i18n.localize("CoC7.Entities.Skill"),idPrefix="i.skill.",suffixRegExp=/^i\.skill\./,await CoCIDBatch.populateSkillKeys(updateList,missingNames,foundKeys),0===Object.keys(missingNames).filter((key=>""===missingNames[key])).length?(await CoCIDBatch.processSkillKeys(updateList,missingNames),!0):new Promise((resolve=>{new CoCIDBatch({typeName,idPrefix,suffixRegExp,updateList,missingNames,foundKeys,resolve}).render(!0)})))}}class Updater{static async checkForUpdate(){let systemUpdateVersion=game.settings.get("CoC7","systemUpdateVersion");game.actors.size+game.scenes.size+game.items.size+game.journal.size+game.tables.size===0&&(systemUpdateVersion=game.system.version,await game.settings.set("CoC7","systemUpdateVersion",systemUpdateVersion));const runMigrate=foundry.utils.isNewerVersion(game.system.version,systemUpdateVersion??"0");this.updatedModules=game.settings.get("CoC7","systemUpdatedModuleVersion")||{},this.currentModules={};for(const pack of game.packs)if(!["CoC7","world"].includes(pack.metadata.packageName)&&["Actor","Item","Scene"].includes(pack.metadata.type)&&!Object.prototype.hasOwnProperty.call(this.currentModules,pack.metadata.packageName)){const module=game.modules.get(pack.metadata.packageName);module&&(!runMigrate&&Object.prototype.hasOwnProperty.call(this.updatedModules,module.id)&&String(this.updatedModules[module.id])===String(module.version)||(this.currentModules[module.id]=module.version))}(runMigrate||Object.keys(this.currentModules).length>0)&&(game.user.isGM?new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format(0===Object.keys(this.currentModules).length?"CoC7.Migrate.Message":"CoC7.Migrate.WithModulesMessage",{version:game.system.version,modules:"<ul><li>"+Object.keys(this.currentModules).map((mod=>game.modules.get(mod).title)).join("</li><li>")+"</li></ul>"}),buttons:{update:{label:game.i18n.localize("CoC7.Migrate.ButtonUpdate"),callback:async()=>Updater.update()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0):new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.GMRequired",{version:game.system.version}),buttons:{OK:{label:game.i18n.localize("CoC7.Migrate.ButtonOkay")}}}).render(!0))}static async update(){await this.updateDocuments(),game.settings.get("CoC7","pulpRules")&&(game.settings.set("CoC7","pulpRuleDoubleMaxHealth",!0),game.settings.set("CoC7","pulpRuleDevelopmentRollLuck",!0),game.settings.set("CoC7","pulpRuleArchetype",!0),game.settings.set("CoC7","pulpRuleOrganization",!0),game.settings.set("CoC7","pulpRuleTalents",!0),game.settings.set("CoC7","pulpRuleFasterRecovery",!0),game.settings.set("CoC7","pulpRuleIgnoreMajorWounds",!0),game.settings.set("CoC7","pulpRuleIgnoreAgePenalties",!0)),await CoCIDBatch.create("skill");const settings=foundry.utils.mergeObject(this.updatedModules||{},this.currentModules);game.settings.set("CoC7","systemUpdatedModuleVersion",settings),game.settings.set("CoC7","systemUpdateVersion",game.system.version),ui.notifications.info(game.i18n.format("CoC7.Migrate.Complete"),{permanent:!0})}static async updateDocuments(){for(const actor of game.actors.contents)try{const updateData=this.migrateActorData(actor.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Actor document ${actor.name}`),await actor.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorActor",{name:actor.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const item of game.items.contents)try{const updateData=Updater.migrateItemData(item.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Item document ${item.name}`),await item.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorItem",{name:item.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const table of game.tables.contents)try{const updateData=Updater.migrateTableData(table.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Table document ${table.name}`),await table.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorTable",{name:table.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const macro of game.macros.contents)try{const updateData=Updater.migrateMacroData(macro.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Macro document ${macro.name}`),await macro.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorMacro",{name:macro.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const scene of game.scenes)try{const updateData=Updater.migrateSceneData(scene);foundry.utils.isEmpty(updateData)||(console.log(`Migrating Scene document ${scene.name}`),await scene.update(updateData,{enforceTypes:!1})),scene.tokens.forEach((t=>t._actor=null))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorScene",{name:scene.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const pack of game.packs)"CoC7"!==pack.metadata.packageName&&["Actor","Item","Macro","RollTable","Scene"].includes(pack.metadata.type)&&await Updater.migrateCompendiumData(pack)}static migrateActorData(actor){const updateData={};if(Updater._migrateActorCharacterSanity(actor,updateData),Updater._migrateActorArtwork(actor,updateData),Updater._migrateActorKeeperNotes(actor,updateData),Updater._migrateActorNpcCreature(actor,updateData),Updater._migrateActorStatusEffectActive(actor,updateData),Updater._migrateActorSanLossReasons(actor,updateData),Updater._migrateActorMonetary(actor,updateData),actor.items){const items=actor.items.reduce(((arr,i)=>{const itemData=i instanceof CONFIG.Item.documentClass?i.toObject():i,itemUpdate=Updater.migrateItemData(itemData);return foundry.utils.isEmpty(itemUpdate)||(itemUpdate._id=itemData._id,arr.push(foundry.utils.expandObject(itemUpdate))),arr}),[]);items.length>0&&(updateData.items=items)}return updateData}static async migrateCompendiumData(pack){const documentType=pack.metadata.type;if(!["Actor","Item","Macro","RollTable","Scene"].includes(documentType))return;const wasLocked=pack.locked;await pack.configure({locked:!1});try{await pack.migrate()}catch(err){console.log("pack migrate failed",pack,err)}const documents=await pack.getDocuments();for(const doc of documents){let updateData={};try{switch(documentType){case"Actor":updateData=Updater.migrateActorData(doc.toObject());break;case"Item":updateData=Updater.migrateItemData(doc.toObject());break;case"Macro":updateData=Updater.migrateMacroData(doc.toObject());break;case"RollTable":updateData=Updater.migrateTableData(doc.toObject());break;case"Scene":updateData=Updater.migrateSceneData(doc)}foundry.utils.isEmpty(updateData)||(console.log(`Migrated ${documentType} document ${doc.name} in Compendium ${pack.collection}`),await doc.update(updateData))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorDocumentPack",{name:doc.name,collection:pack.collection,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}}await pack.configure({locked:wasLocked})}static migrateItemData(item){const updateData={};return Updater._migrateItemEmbeddedv10(item,updateData),Updater._migrateItemExperience(item,updateData),Updater._migrateItemArtwork(item,updateData),Updater._migrateItemBookAutomated(item,updateData),Updater._migrateItemKeeperNotes(item,updateData),Updater._migrateItemSpellAutomated(item,updateData),Updater._migrateItemKeeperNotesMerge(item,updateData),Updater._migrateItemEras(item,updateData),Updater._migrateItemv10(item,updateData),Updater._migrateItemBookUnits(item,updateData),updateData}static migrateMacroData(table){const updateData={};return Updater._migrateMacroArtwork(table,updateData),updateData}static migrateTableData(table){const updateData={};return Updater._migrateTableArtwork(table,updateData),updateData}static migrateSceneData(scene){const returns={tokens:[]};return void 0!==scene.tokens&&scene.tokens.length&&(returns.tokens=scene.tokens.map((token=>{const t=token.toObject(),updateData={};if(Updater._migrateTokenArtwork(t,updateData),Object.keys(updateData).length&&foundry.utils.mergeObject(t,updateData),!t.actorId||t.actorLink)t.actorData={};else if(game.actors.has(t.actorId)){if(!t.actorLink){const actorData=foundry.utils.duplicate(t.actorData);actorData.type=token.actor?.type;const update=Updater.migrateActorData(actorData);["items","effects"].forEach((embeddedName=>{if(!update[embeddedName]?.length)return;const updates=new Map(update[embeddedName].map((u=>[u._id,u])));t.actorData[embeddedName].forEach((original=>{const update=updates.get(original._id);update&&foundry.utils.mergeObject(original,update)})),delete update[embeddedName]})),foundry.utils.mergeObject(t.actorData,update)}}else t.actorId=null,t.actorData={};return t}))),returns}static _migrateItemKeeperNotes(item,updateData){return["archetype","chase","item","occupation","setup","skill","spell","status","talent","weapon"].includes(item.type)&&("string"==typeof item.system.description?updateData["system.description"]={value:item.system.description,keeper:""}:void 0===item.system.description||null===item.system.description?updateData["system.description"]={value:"",keeper:""}:void 0===item.system.description.keeper&&(updateData["system.description.keeper"]="")),updateData}static _migrateItemExperience(item,updateData){return"skill"===item.type&&void 0===item.system.adjustments?.experience&&(updateData["system.adjustments.experience"]=0),updateData}static _migrateItemArtwork(item,updateData){let image=String(item.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),"setup"===item.type)for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].img="systems/CoC7/assets/icons/"+image[1]))}else if("book"===item.type)for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.spells"]&&(updateData["system.spells"]=item.system.spells),updateData["system.spells"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));return updateData}static _migrateItemSpellAutomated(item,updateData){"spell"===item.type&&void 0!==item.system.cost&&(updateData["system.castingTime"]=item.system.castingTime||"",updateData["system.costs.hitPoints"]=item.system.cost.hp||0,updateData["system.costs.magicPoints"]=item.system.cost.mp||0,updateData["system.costs.sanity"]=item.system.cost.san||0,updateData["system.costs.power"]=item.system.cost.pow||0,updateData["system.costs.others"]="",updateData["system.-=cost"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null)}static _migrateItemBookAutomated(item,updateData){return"book"===item.type&&void 0!==item.system.description.unidentified&&(updateData["system.author"]=item.system.author||"",updateData["system.date"]=item.system.date||"",updateData["system.language"]=item.system.language||"",updateData["system.sanityLoss"]=item.system.sanLoss||0,updateData["system.mythosRating"]=Number(item.system.mythosRating)||0,updateData["system.content"]=item.system.description.unidentified,updateData["system.description.keeper"]=item.system.description.notes,updateData["system.difficultyLevel"]="regular",updateData["system.fullStudies"]=0,updateData["system.initialReading"]=!1,updateData["system.keeperNotes"]="",updateData["system.gains.cthulhuMythos.initial"]=Number(item.system.gain.cthulhuMythos.CMI)||0,updateData["system.gains.cthulhuMythos.final"]=Number(item.system.gain.cthulhuMythos.CMF)||0,updateData["system.gains.occult"]=Number(item.system.gain.occult)||0,updateData["system.gains.others"]=[],updateData["system.study"]={necessary:Number(item.system.weeksStudyTime)||0,progress:0,units:"CoC7.weeks"},updateData["system.-=sanLoss"]=null,updateData["system.-=weeksStudyTime"]=null,updateData["system.-=gain"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null,updateData["system.gains.-=other"]=null,updateData["system.-=properties"]=null,updateData["system.-=flags"]=null),updateData}static _migrateItemBookUnits(item,updateData){"book"===item.type&&void 0!==item.system.study.necessary&&void 0===item.system.study.units&&(updateData["system.study.units"]="CoC7.weeks")}static _migrateItemKeeperNotesMerge(item,updateData){"spell"!==item.type&&"book"!==item.type||(void 0!==item.system.notes&&(void 0!==item.system.description.keeper?updateData["system.description.keeper"]=item.system.description.keeper+item.system.notes:updateData["system.description.keeper"]=item.system.notes,updateData["system.-=notes"]=null),void 0!==item.system.keeperNotes&&(void 0!==updateData["system.description.keeper"]?updateData["system.description.keeper"]=item.system.keeperNotes+updateData["system.description.keeper"]:updateData["system.description.keeper"]=item.system.keeperNotes,updateData["system.-=keeperNotes"]=null))}static _migrateItemEmbeddedv10(item,updateData){if("occupation"===item.type){let changed=!1;for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&void 0===v.system&&(item.system.groups[o].skills[k].system=v.data,changed=!0);changed&&(updateData["system.groups"]=item.system.groups)}if(["setup"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&void 0===v.system&&(item.system.items[k].system=v.data,changed=!0);changed&&(updateData["system.items"]=item.system.items)}if(["archetype","occupation"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&void 0===v.system&&(item.system.skills[k].system=v.data,changed=!0);changed&&(updateData["system.skills"]=item.system.skills)}if(["book"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&void 0===v.system&&(item.system.spells[k].system=v.data,changed=!0);changed&&(updateData["system.spells"]=item.system.spells)}}static _migrateItemv10(item,updateData){if("skill"!==item.type||void 0!==item.system.skillName&&""!==item.system.skillName){if("setup"===item.type){for(const[k,v]of Object.entries(item.system.items))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].name=v.name,"Uniki"===updateData["system.items"][k].name&&(updateData["system.items"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.items"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.items"][k].name=parts.name,updateData["system.items"][k].system.skillName=parts.skillName,updateData["system.items"][k].system.specialization=parts.specialization}}else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].name=v.name,"Uniki"===updateData["system.groups"][o].skills[k].name&&(updateData["system.groups"][o].skills[k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.groups"][o].skills[k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.groups"][o].skills[k].name=parts.name,updateData["system.groups"][o].skills[k].system.skillName=parts.skillName,updateData["system.groups"][o].skills[k].system.specialization=parts.specialization}}else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}}else{updateData.name=item.name,"Uniki"===updateData.name&&(updateData.name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData.name,"string"==typeof item.system.specialization?.group?item.system.specialization.group:item.system.specialization);updateData.name=parts.name,updateData["system.skillName"]=parts.skillName,updateData["system.specialization"]=parts.specialization}}static _migrateItemEras(item,updateData){if(void 0!==item.system.eras){let eras={};for(const[key,value]of Object.entries(item.system.eras))if(!0===value||"string"!=typeof value&&void 0!==value.selected)switch(key){case"1920":eras.standard=!0;break;case"mdrn":eras.modern=!0,eras.modernPulp=!0;break;case"pulp":eras.pulp=!0;break;case"ddts":eras.downDarkerTrails=!0,eras.downDarkerTrailsPulp=!0;break;case"drka":eras.darkAges=!0,eras.darkAgesPulp=!0;break;case"glit":eras.gasLight=!0;break;case"nvct":eras.invictus=!0}if("setup"===item.type){const key=Object.keys(eras)[0];eras=key?{[key]:!0}:{standard:!0}}const CoC7={cocidFlag:{id:"",lang:game.i18n.lang,priority:0,eras}};void 0===item.flags?.CoC7?(item.flags.CoC7=CoC7,updateData["flags.CoC7"]=CoC7):void 0===item.flags?.CoC7?.cocidFlag?(item.flags.CoC7.cocidFlag=CoC7.cocidFlag,updateData["flags.CoC7.cocidFlag"]=CoC7.cocidFlag):(item.flags.CoC7.cocidFlag.eras=CoC7.cocidFlag.eras,updateData["flags.CoC7.cocidFlag.eras"]=CoC7.cocidFlag.eras),updateData["system.-=eras"]=null}}static _migrateActorArtwork(actor,updateData){let image=String(actor.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),void 0!==actor.prototypeToken&&void 0!==actor.prototypeToken.texture?.src&&(image=String(actor.prototypeToken.texture.src).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(updateData["prototypeToken.texture.src"]="systems/CoC7/assets/icons/"+image[1])),void 0!==actor.effects)for(const[k,v]of Object.entries(actor.effects))image=String(v.icon).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.effects&&(updateData.effects=actor.effects),updateData.effects[k].icon="systems/CoC7/assets/icons/"+image[1])}static _migrateActorKeeperNotes(actor,updateData){["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&void 0===actor.system.description&&(updateData["system.description"]={keeper:""})}static _migrateActorMonetary(actor,updateData){if("character"===actor.type&&void 0!==actor.system.credit?.multiplier){updateData["system.monetary.symbol"]=actor.system.credit?.monetarySymbol?actor.system.credit.monetarySymbol:"$",""===updateData["system.monetary.symbol"].toString().trim()&&(updateData["system.monetary.symbol"]="$");const multiplier=parseInt(actor.system.credit.multiplier)?parseInt(actor.system.credit.multiplier):1;if(updateData["system.monetary.spent"]=actor.system.credit.spent,updateData["system.monetary.assetsDetails"]=actor.system.credit.assetsDetails,updateData["system.monetary.spendingLevel"]=actor.system.credit.spendingLevel,updateData["system.monetary.cash"]=actor.system.credit.cash,updateData["system.monetary.assets"]=actor.system.credit.assets,updateData["system.monetary.values"]=foundry.utils.duplicate(actor.system.monetary.values),1!==multiplier)for(const value of updateData["system.monetary.values"])value.cashValue=multiplier*value.cashValue,value.assetsValue=multiplier*value.assetsValue,value.spendingValue=multiplier*value.spendingValue;updateData["system.-=credit"]=null}}static _migrateActorSanLossReasons(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.encounteredCreatures){const groups={};for(const sanityLossEvent of actor.system.encounteredCreatures)sanityLossEvent.totalLoss>0&&(groups[sanityLossEvent.name]=Math.max(groups[sanityLossEvent.name]??0,sanityLossEvent.totalLoss));const sanityLossEvents=[];for(const name in groups)sanityLossEvents.push({type:name,totalLoss:groups[name],immunity:!1});updateData["system.sanityLossEvents"]=sanityLossEvents,updateData["system.-=encounteredCreatures"]=null}}static _migrateActorStatusEffectActive(actor,updateData){if(["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&(void 0!==actor.system.status||void 0===actor.system.conditions)){if(updateData["system.conditions.criticalWounds.value"]=!1,updateData["system.conditions.unconscious.value"]=!1,updateData["system.conditions.dying.value"]=!1,updateData["system.conditions.dead.value"]=!1,updateData["system.conditions.prone.value"]=!1,updateData["system.conditions.tempoInsane.value"]=!1,updateData["system.conditions.indefInsane.value"]=!1,void 0!==actor.system.status?.criticalWounds?.value&&actor.system.status?.criticalWounds.value&&(updateData["system.conditions.criticalWounds.value"]=!0),void 0!==actor.system.status?.unconscious?.value&&actor.system.status?.unconscious.value&&(updateData["system.conditions.unconscious.value"]=!0),void 0!==actor.system.status?.dying?.value&&actor.system.status?.dying.value&&(updateData["system.conditions.dying.value"]=!0),void 0!==actor.system.status?.dead?.value&&actor.system.status?.dead.value&&(updateData["system.conditions.dead.value"]=!0),void 0!==actor.system.status?.prone?.value&&actor.system.status?.prone.value&&(updateData["system.conditions.prone.value"]=!0),void 0!==actor.system.status?.tempoInsane?.value&&actor.system.status?.tempoInsane.value&&(updateData["system.conditions.tempoInsane.value"]=!0),void 0!==actor.system.status?.indefInsane?.value&&actor.system.status?.indefInsane.value&&(updateData["system.conditions.indefInsane.value"]=!0),void 0!==actor.effects){const effects=actor.effects;let changed=!1;for(let i=0,im=effects.length;i<im;i++){const effect=effects[i],match=effect.icon.match(/\/(hanging-spider|tentacles-skull|arm-sling|heart-beats|tombstone|knocked-out-stars|falling|skull|unconscious)\./);if(null!==match){let statusId="";switch(match[1]){case"hanging-spider":statusId="tempoInsane";break;case"tentacles-skull":statusId="indefInsane";break;case"arm-sling":statusId="criticalWounds";break;case"heart-beats":statusId="dying";break;case"tombstone":case"skull":statusId="dead";break;case"knocked-out-stars":case"unconscious":statusId="unconscious";break;case"falling":statusId="prone"}""!==statusId&&(updateData[`system.conditions.${statusId}.value`]||(updateData[`system.conditions.${statusId}.value`]=!0,changed=!0),effect.flags.core?.statusId!==statusId&&(effects[i]=foundry.utils.mergeObject(effect,{flags:{core:{statusId}}}),changed=!0))}}changed&&(updateData.effects=effects)}updateData["system.-=status"]=null}return updateData}static _migrateActorNpcCreature(actor,updateData){return["npc"].includes(actor.type)&&void 0!==actor.system&&(void 0===actor.system.special&&(updateData["system.special"]={checkPassed:null,checkFailled:null}),void 0===actor.system.attacksPerRound&&(updateData["system.attacksPerRound"]=1)),updateData}static _migrateActorCharacterSanity(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.attribs?.san){const oneFifthSanity=Math.ceil(actor.system.attribs.san.value/5);void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.attribs.san.oneFifthSanity&&null!==actor.system.attribs.san.oneFifthSanity||(updateData["system.attribs.san.oneFifthSanity"]=" / "+oneFifthSanity),void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.value&&null!==actor.system.indefiniteInsanityLevel.value||(updateData["system.indefiniteInsanityLevel.value"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.max&&null!==actor.system.indefiniteInsanityLevel.max||(updateData["system.indefiniteInsanityLevel.max"]=oneFifthSanity),void 0!==actor.system.attribs.mp&&(void 0!==actor.system.attribs.mp.value&&null!==actor.system.attribs.mp.value||(updateData["system.attribs.mp.value"]=oneFifthSanity),void 0!==actor.system.attribs.mp.max&&null!==actor.system.attribs.mp.max||(updateData["system.attribs.mp.max"]=oneFifthSanity)),void 0!==actor.system.notes&&null!==actor.system.notes||(updateData["system.notes"]="")}return updateData}static _migrateMacroArtwork(table,updateData){const image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}static _migrateTableArtwork(table,updateData){let image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(table.results))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.results&&(updateData.results=table.results),updateData.results[k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateTokenArtwork(token,updateData){const image=String(token.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}}const nameCharacters="\\u3000\\u3400-\\u4DBF\\u4E00-\\u9FFF\\w\\(\\)\\-\\/&\"'"+CoC7Utilities.quoteRegExp("áéíóàèìòùÀÈÌÒÙáéíóúýÁÉÍÓÚÝâêîôûÂÊÎÔÛãñõÃĀÑÕäëïöüÿÄËÏÖÜŸàèçÇßØøÅåÆæœ“”«»ąćęłńóśźżĄĆĘŁŃÓŚŹŻ"),keys={en:{description:"CoC7.English",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:skills(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:languages)[:\n]",sectionSpells:"\n(?:spells)[:\n]",handgun:"(?<type> Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Grenade|Dynamite)",example:"Example Character, age 27\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85 SAN 55 HP 14 DB: 1D4\nBuild: 1 Move: 7 MP: 10 Luck: 40 Armor: 1\nAttacks per round: 3 SAN loss: 1d4/1d8\nCombat\nBite 50% (25/10), damage 1D6\nBrawl 30% (15/6), damage 1D3\nDerringer 40% (20/8), damage 1D8+1\nDodge 50% (25/10)\nSkills\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLanguages: English 80%, Eklo 5%.\nSpells: Summon NPC, Dispel NPC."},de:{description:"CoC7.German",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",diceShort:"w|d",fulldb:"(Schadensbonus|Sb)",halfdb:"(½|1/2 Schadensbonus|Sb/2)",sectionCombats:"\n(?:Kampf|Angriff:|ANGRIFFE)[:\n]",newCombatHeader:"\nKampf\n",sectionSkills:"\n(?:Fertigkeiten(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Sprachen)[:\n]",sectionSpells:"\n(?:Zauber)[:\n]",handgun:"(?<type> Gun|Revolver|Pistole|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Gewehr|Schrotflinte|Carabiner|Karabiner|Gauge |Lee-Enfield|Elefanten)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Granate|Dynamit)",example:"Vorname Nachname\nAlter: 29\nBeruf: Ein Beruf\nST 50\nMA 60\nKO 60\nGE 60\nGR 55\nER 65\nIN 80\nBI 85\nTrefferpunkte: 11\nGeistige Stabilität: 60\nSchadensbonus: 0\nStatur: 0\nMagiepunkte: 12\nBewegungsweite: 8\n\nKampf\nAngriffe: 1\nHandgemenge 30% (15/6), Schaden 1D3\nMesser 30% (15/6), Schaden 1D4\nAusweichen 30% (15/6)\n\nFertigkeiten: Anthropologie 70% (35/14), Archäologie 30% (15/6), Bibliotheksnutzung 50% (25/10), Erste Hilfe 50% (25/10), Finanzkraft 40% (20/8), Geschichte 60% (30/12), Klettern 50% (25/10)\n\nSprachen: Englisch 85% (42/17); Deutsch 45% (22/9), Latein 45% (22/9)"},pl:{description:"CoC7.Polish",dbNone:"brak",armorNone:"brak",attacksPerRoundNone:"brak",sanLossNone:"brak",diceShort:"k|d",fulldb:"(Modyfikator Obrażeń|MO)",halfdb:"(½|1/2 MO|MO/2)",sectionCombats:"\n(?:Walka|Ataki)[:\n]",newCombatHeader:"\nWalka\n",sectionSkills:"\n(?:Umiejętności(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Języki)[:\n]",sectionSpells:"\n(?:Zaklęcia)[:\n]",handgun:"(?<type> Pistolet|Rewolwer|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Karabin|Strzelba|Wiatrówka|Garand|Gauge |Lee-Enfield|Strzelba na słonie)",smb:"(?<type>Pistolet maszynowy|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Mołotowa|Granat|Laska dynamitu|Dynamit)",example:"Przykładowa postać, 27 lat\nBibliotekarz\nS 75 KON 60 BC 80 ZR 70 WYG 60 INT 80\nMOC 50 WYK 85 P 55 PW 14 MO: 1D4\nKrzepa: 1 Ruch: 7 PM: 10 Szczęście: 40 Pancerz: 1\nAtaki w rundzie: 3 Utrata Poczytalności: 1K4/1K8\nWalka\nUgryzienie 50% (25/10), obrażenia 1K6\nWalka 30% (15/6), obrażenia 1K3\nDerringer 40% (20/8), obrażenia 1K8+1\nUnik 50% (25/10)\nUmiejętności\nTresura Zwierząt 55%, Urok Osobisty 30%, Pierwsza Pomoc 25%, Ukrywanie 20%,\nNasłuchiwanie 50%, Medycyna 45%, Przekonywanie 25%, Psychologia 75%,\nNauka (Astronomia) 90%, Nauka (Botanika) 35%, Nauka (Zoologia) 10%,\nSpostrzegawczość 35%, Ukrywanie 10%\nJęzyki: Angielski 80%, Eklo 5%.\nZaklęcia: Przyzwanie NPC, Odesłanie NPC."},fr:{description:"CoC7.French",dbNone:"Acune",armorNone:"(?:Acune|aucune)",attacksPerRoundNone:"Acune",sanLossNone:"Acune",fulldb:"(BD|Bonus aux dommages|Impact|Imp)",halfdb:"(½|1/2 Imp|Imp/2)",sectionCombats:"\n(?:Combat|Armes|Attaques)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:Compétences(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Langues?)\\s*[:\n]",sectionSpells:"\n(?:Sortilèges\\s*|Sorts)[:\n]",handgun:"(?<type>Revolver|Pistolet|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Carabine|Lee-Enfield|Fusil)",smb:"(?<type>SMG|Thompson)",machineGun:"(?<type>Browning|Vickers|Mitrailleuse)",launched:"(?<type>Boomerang de guerre|Javeline|Pierre|Shuriken|Bâton de dynamite|Cocktail Molotov|Grenade à main|Molotov|Grenade|Dynamite)",example:"Example Character, 27 ans\nFOR 75 CON 60 TAI 80 DEX 70 APP 60 INT 80\nPOU 50 ÉDU 85 SAN 55 PV 14 BD: 1D4\nCarrure: 1 Mvt: 7 PM: 10 Chance: 40 Armure: 1\nAttaques par round 3 Perte de SAN: 1d4/1d8\nAttaques\nBite 50% (25/10), dommage 1D6\nBrawl 30% (15/6), dommage 1D3\nDerringer 40% (20/8), dommage 1D8+1\nEsquiver 50% (25/10)\nCompétences\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLangue: English 80%, Eklo 5%.\nSortilèges: Summon NPC, Dispel NPC."},es:{description:"CoC7.Spanish",dbNone:"ninguna",armorNone:"ninguna",attacksPerRoundNone:"ninguno",sanLossNone:"no",fulldb:"(BD|bd|bonificación de daño)",halfdb:"(½|medio daño|mitad|daño a la mitad)",sectionCombats:"\n(?:Combate|Armas)[:\n]",newCombatHeader:"\nCombate\n",sectionSkills:"\n(?:Habilidades(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Idiomas|Lenguajes|Lenguas)[:\n]",sectionSpells:"\n(?:Conjuros|Hechizos)[:\n]",handgun:"(?<type>Revolver|Pistola|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Carabina|Lee-Enfield|Caza Elefantes|Fusil|Escopeta|Galga|Recortada)",smb:"(?<type>Subfusil|Thompson)",machineGun:"(?<type>Browning|Vickers|Ametralladora)",launched:"(?<type>Molotov|Granada|Dinamita)",example:"Example Character, 27 años\nFUE 75 CON 60 TAM 80 DES 70 APA 60 INT 80\nPOD 50 EDU 85 COR 55 PV 14 BD: 1D4\nCorpulencia: 1 Movimiento: 7 PM: 10 Suerte: 40 Armadura: 1\nNúmero de Ataques 3 Pérdida de cordura: 1d4/1d8\nCombate\nBite 50% (25/10), daño 1D6\nBrawl 30% (15/6), daño 1D3\nDerringer 40% (20/8), daño 1D8+1\nEsquivar 50% (25/10)\nHabilidades\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nIdiomas: English 80%, Eklo 5%.\nConjuros: Summon NPC, Dispel NPC."},"zh-TW":{description:"CoC7.TraditionalChinese",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB|傷害加值)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks|戰鬥技能|戰鬥列表|武器)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:(?:Skills|技能列表)(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Languages|語言)[:\n]",sectionSpells:"\n(?:spells|咒文列表|咒文)[:\n]",handgun:"(?<type> 遂發槍|\\.22短口自動手槍|\\.25短口手槍(單管)|\\.32或7\\.65mm左輪手槍|\\.32或7\\.65mm自動手槍|\\.357 Magnum左輪手槍|\\.38或9mm左輪手槍|\\.38自動手槍|貝雷塔M9|格洛克17|9mm自動手槍|魯格P08|\\.41左輪手槍|\\.44馬格南左輪手槍|\\.45左輪手槍|\\.45自動手槍|沙漠之鷹|Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>步槍|卡賓槍|半自動步槍|獵象槍|Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson|衝鋒槍)",machineGun:"(?<type>Browning|Vickers|機槍)",launched:"(?<type>Molotov|Grenade|Dynamite爆炸物|手榴彈|重武器)",example:"示範角色, 年齡 27\n力量 75 體質 60 體型 80 敏捷 70 外貎 60 智力 80\n意志 50 教育 85 SAN 55 HP 14 DB: 1D4\n體格: 1 Move: 7 MP: 10 幸運: 40 護甲: 1\n攻擊次數: 3 理智喪失: 1d4/1d8\n戰鬥列表\n咬 50% (25/10), 傷害 1D6\n空手 30% (15/6), 傷害 1D3\n手槍 40% (20/8), 傷害 1D8+1\n閃避 50% (25/10)\n技能列表\n動物馴養 55%, 取悅 30%, 急救 25%, 潛行 20%,\n聆聽 50%, 藥學 45%, 精神分析 25%, 心理學 75%,\n科學 (司法科學) 90%, 科學 (密碼學) 35%, \n偵查 35%, 喬裝 10%\n語言: 粵語 80%, 讀唇 5%.\n咒文: 召喚 NPC, 指揮 NPC."}},translations={en:{age:"(?<![a-z])age(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.en.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.en.dbNone+")[,\\s\n]*",build:"(?<![a-z])Build(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor(\\s*:)?\\s+(?<armor>"+keys.en.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks)(\\s*:)?\\s+(?<attacksPerRound>"+keys.en.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss)(\\s*:)?\\s+(?<sanLoss>"+keys.en.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*damage)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.en.fulldb+"|"+keys.en.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Fighting|Firearms|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.en.sectionCombats+"|"+keys.en.sectionSkills+"|"+keys.en.sectionLangauges+"|"+keys.en.sectionSpells+")"},de:{age:"(?<![a-z])Alter(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Beruf(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])ST(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KO(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])GR(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])IN(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MA(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])GE(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])ER(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])BI(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:gS|STA|Geistige Stabilität)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:TP|Trefferpunkte)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magiepunkte)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.de.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|W\\d+)?|"+keys.de.dbNone+")[,\\s\n]*",build:"(?<![a-z])(?:Statur|Stat.)(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Panzerung(\\s*:)?\\s+(?<armor>"+keys.de.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:BW|Bewegungsweite)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Glück(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Angriffe pro Runde|Angriffe|Pro Runde)(\\s*:)?\\s+(?<attacksPerRound>"+keys.de.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Stabilitätsverlust)(\\s*:)?\\s+(?<sanLoss>"+keys.de.sanLossNone+"|\\d[DW]?[+\\d]*\\/\\d[DW]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*Schaden)?\\s+(?<damage>(:?(:?\\d+w|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.de.fulldb+"|"+keys.de.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d|w)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Ausweichen)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,;]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Angriffe|Handgemenge|Nahkampf|Faustfeuerwaffe|Beißen)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.de.sectionCombats+"|"+keys.de.sectionSkills+"|"+keys.de.sectionLangauges+"|"+keys.de.sectionSpells+")"},pl:{age:"(?<age>\\d+)\\s+(?:lata|lat|rok)[,\\s]*",occupation:"[,\\s]*Zawód(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])S(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])BC(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MOC(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])ZR(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])WYG(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])WYK(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:P|Poczytalność)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PW|Punkty Wytrzymałości)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Punkty Magii)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.pl.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|K\\d+)?|"+keys.pl.dbNone+")[,\\s\n]*",build:"(?<![a-z])Krzepa(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Pancerz(\\s*:)?\\s+(?<armor>"+keys.pl.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Ruch(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Szczęście(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Ataki w rundzie|# Ataki)(\\s*:)?\\s+(?<attacksPerRound>"+keys.pl.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Utrata Poczytalności|utrata P)(\\s*:)?\\s+(?<sanLoss>"+keys.pl.sanLossNone+"|\\d[DK]?[+\\d]*\\/\\d[DK]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*obrażenia)?\\s+(?<damage>(:?(:?\\d+k|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.pl.fulldb+"|"+keys.pl.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Unik)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Walka|Broń Palna|Bijatyka|Ugryzienie)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.pl.sectionCombats+"|"+keys.pl.sectionSkills+"|"+keys.pl.sectionLangauges+"|"+keys.pl.sectionSpells+")"},fr:{age:"(?<age>\\d+)\\s*ans(?![a-z])[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FOR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAI(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POU(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])ÉDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<!([a-z]|de\\s))(?:SAN|Santé Mentale)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Points de vie)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Points de magie)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.fr.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.fr.dbNone+")[,\\s\n]*",build:"(?<![a-z])Carrure(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])(?:Armure|Protection)(\\s*:)?\\s+(?<armor>"+keys.fr.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:Mvt|Mouvement|Déplacement)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Chance(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attaques par round)(\\s*:)?\\s+(?<attacksPerRound>"+keys.fr.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Perte de Santé mentale|Perte de SAN)(\\s*:)?\\s+(?<sanLoss>"+keys.fr.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:dommage|dégâts))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.fr.fulldb+"|"+keys.fr.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquiver?)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Au contact|À distance|Combat rapproché|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.fr.sectionCombats+"|"+keys.fr.sectionSkills+"|"+keys.fr.sectionLangauges+"|"+keys.fr.sectionSpells+")"},es:{age:"(?<age>\\d+)\\s*a[ñÑ]os(?![a-z])[,\\s]*",occupation:"[,\\s]*Ocupación(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FUE(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAM(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POD(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DES(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APA(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:COR|Cordura)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Puntos de vida|P\\. ?V\\.)(\\s*:)?\\s+(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Puntos Mágicos|Puntos de Magia)(\\s*:)?\\s+(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.es.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.es.dbNone+")[,\\s\n]*",build:"(?<![a-z])Corpulencia(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armadura(\\s*:)?\\s+(?<armor>"+keys.es.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Movimiento(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Suerte(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Número de Ataques)(\\s*:)?\\s+(?<attacksPerRound>"+keys.es.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Pérdida de cordura|Pérdida de COR)(\\s*:)?\\s+(?<sanLoss>"+keys.es.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*daño)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.es.fulldb+"|"+keys.es.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquivar)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Combatir|Armas de fuego|Pelea|Mordisco)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.es.sectionCombats+"|"+keys.es.sectionSkills+"|"+keys.es.sectionLangauges+"|"+keys.es.sectionSpells+")"},"zh-TW":{age:"(?<![a-z])age|年齡(\\s*:)?\\s*(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR|力量(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON|體質(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ|體型(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT|智力(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW|意志(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX|敏捷(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP|外貎(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU|教育(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity|理智)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points|生命)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys["zh-TW"].fulldb+")(\\s*:)?\\s*(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys["zh-TW"].dbNone+")[,\\s\n]*",build:"(?<![a-z])Build|體格(\\s*:)?\\s*(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor|護甲(\\s*:)?\\s*(?<armor>"+keys["zh-TW"].armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck|幸運(\\s*:)?\\s*(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks|攻擊次數|# 攻擊)(\\s*:)?\\s*(?<attacksPerRound>"+keys["zh-TW"].attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss|理智喪失|SAN值損失|SAN值喪失|扣SAN)(\\s*:)?\\s*(?<sanLoss>"+keys["zh-TW"].sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:damage|傷害))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys["zh-TW"].fulldb+"|"+keys["zh-TW"].halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge|閃避|閃躲)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%?(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(近戰技能|射擊技能|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys["zh-TW"].sectionCombats+"|"+keys["zh-TW"].sectionSkills+"|"+keys["zh-TW"].sectionLangauges+"|"+keys["zh-TW"].sectionSpells+")"}};class CoC7ActorImporterRegExp{static checkLanguage(lang=null){return lang||(lang=game.i18n.lang),void 0===translations[lang]&&(lang="en"),lang}static getExampleText(lang){let example=keys.en.example;return void 0!==keys[lang]&&(example=keys[lang].example),example}static getTranslations(){const output={};for(const key in keys)output[key]=keys[key].description;return output}static getKeys(lang){return keys[lang]||keys.en}static getRegularExpressions(lang){return translations[lang]||translations.en}}class CoC7ActorImporter{constructor(){this.parsed={},this.itemLocations=""}static get asNumber(){return"n"}static get asString(){return"s"}getRegEx(regex,modifiers="iu"){return"RegExp"===regex.constructor?.name?regex:new RegExp(regex,modifiers)}cleanString(s){return s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*\.?\s*\.?$/,"")}translateRoll(s){if(void 0===s)return s;if(void 0!==this.keys.diceShort){const regEx=new RegExp("(?<n1>\\d+)"+this.keys.diceShort+"(?<n2>\\d+)","iug");return s.replace(regEx,"$<n1>D$<n2>")}return s}toHTML(s){return 0===s.trim().length||0===(s=s.trim().split("\n").map((text=>text.trim().replace(/^[,.\s]+$/,""))).filter((text=>text)).join("</p><p>")).length?"":"<p>"+s+"</p>"}check(regExKey,{removeFromText=!0,saveKeys=!0,type=CoC7ActorImporter.asString,text=!1,requiredGroup=!1}={}){let output=!1,regExp=!1;if(void 0!==this.regEx[regExKey]?regExp=this.getRegEx(this.regEx[regExKey]):void 0!==this.keys[regExKey]&&(regExp=this.getRegEx(this.keys[regExKey])),!1!==regExp){!1===text&&(text=this.text);const check=regExp.exec(text);let value=null;if(null!==check&&(!1===requiredGroup||void 0!==(check.groups||{})[requiredGroup])){if(output=check.groups||{},removeFromText&&(this.text=this.text.replace(check[0].trim(),"\n").trim()),saveKeys)for(const key of Object.keys(check.groups))switch(type){case CoC7ActorImporter.asString:this.parsed[key]=String(check.groups[key]).replace("\n"," ");break;case CoC7ActorImporter.asNumber:value=Number(check.groups[key]),isNaN(value)||(this.parsed[key]=Number(check.groups[key]))}output["-source"]=check[0],output["-index"]=check.index}}return output}processCombat(text){if(0===text.trim().length)return;let weapon,dodge,newline;CONFIG.debug.CoC7Importer&&console.log("combat text",text);let lastPercent=!1,maxLoops=40;do{if(maxLoops--,text=text.trim(),dodge=this.check("weaponDodge",{saveKeys:!1,text}))text=text.replace(dodge["-source"],"\n"),void 0===this.parsed.skills&&(this.parsed.skills=[]),this.parsed.skills.push({name:this.cleanString(dodge.name),value:Number(dodge.percentage),push:!1});else if(weapon=this.check("weapon",{saveKeys:!1,text,requiredGroup:!1===lastPercent&&"percentage"})){text=text.replace(weapon["-source"],"\n");const name=this.cleanString(weapon.name||"");let damage=this.translateRoll(this.cleanString(weapon.damage||""));const isRanged=!!(this.check("handgun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("rifle",{text:name,removeFromText:!1,saveKeys:!1})||this.check("smb",{text:name,removeFromText:!1,saveKeys:!1})||this.check("machineGun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("launched",{text:name,removeFromText:!1,saveKeys:!1}));let found;lastPercent=null===weapon.percentage||void 0===weapon.percentage||Number(weapon.percentage);let ahdb=!1,addb=!1;do{found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.halfdb+")\\s*("+this.keys.fulldb+")?[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found?(ahdb=!0,damage=damage.replace(found[0],"")):(found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.fulldb+")\\s*[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found&&(addb=!0,damage=damage.replace(found[0],"")))}while(found);const damages=damage.split("/"),isShotgun=3===damages.length,data={name,type:"weapon",system:{skill:{id:lastPercent},properties:{},range:{normal:{value:isShotgun?10:0,damage:damages[0]},long:{value:isShotgun?20:0,damage:isShotgun?damages[1]:""},extreme:{value:isShotgun?50:0,damage:isShotgun?damages[2]:""}}}};data.system.properties.shotgun=isShotgun,data.system.properties.rngd=isRanged||isShotgun,data.system.properties.melee=!data.system.properties.rngd,data.system.properties.ahdb=ahdb,data.system.properties.addb=addb,void 0===this.parsed.attacks&&(this.parsed.attacks=[]),this.parsed.attacks.push(data)}else(newline=text.match(/^(.+)\n/))?text=text.replace(newline[0],"\n"):(newline=text.match(/^[^\n]+$/))&&(text="")}while(maxLoops>0&&(weapon||dodge||text));0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedWeaponText")),console.debug("Unexpected weapons:",text))}processSkills(text,key="skills"){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);let skill;breaks.length>1&&(text=breaks[0]);let maxLoops=40;do{maxLoops--,text=text.trim(),skill=this.check("skill",{saveKeys:!1,text}),skill&&(text=text.replace(skill["-source"],"\n"),void 0===this.parsed[key]&&(this.parsed[key]=[]),this.parsed[key].push({name:this.cleanString(skill.name),value:Number(skill.percentage)}))}while(maxLoops>0&&skill);0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedSkillsText")),console.debug("Unexpected skills:",text))}processSpells(text){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);breaks.length>1&&(text=breaks[0]);const spellsArr=text.replace(/([\n\r]+)/g," ").split(/(?<!\([^)]+),/);this.text=this.text.replace(text.trim(),"\n");for(const spell of spellsArr)void 0===this.parsed.spells&&(this.parsed.spells=[]),this.parsed.spells.push(this.cleanString(spell))}async parseCharacter(text){this.text=String(text).trim().replace(/\u2013|\u2014|\u2212/g,"-").replace(/\u2019/g,"'").replace(/[\udbc0-\udbfe][\udc00-\udfff]/g,"");let header,min=this.text.length,check=this.check("str",{type:CoC7ActorImporter.asNumber})["-index"];if(isNaN(check)||(min=Math.min(min,check)),check=this.check("con",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("siz",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("int",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("pow",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("dex",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("app",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("edu",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("san",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("hp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("mp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),min>0){if(header=this.text.substr(0,min),check=this.check("name",{text:header}),!1===check?this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter"):header=header.replace(check["-source"],"\n"),check=this.check("age",{text:header}),!1!==check&&(header=header.replace(check["-source"],"\n")),!this.check("occupation",{text:header})&&""!==header.trim()){let occupation=header;header.indexOf(".")>-1&&(occupation=header.substr(0,header.indexOf(".")+1)),this.parsed.occupation=occupation.replace(/([\n\r]+)/g," ").trim().replace(/,$/,""),this.text=this.text.replace(occupation.trim(),"\n")}}else this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter");if(void 0!==this.parsed.occupation&&void 0===this.parsed.age){const occupationAge=this.parsed.occupation.match(/^(?<age>\d+),(?<occupation>.+)$/);occupationAge&&(this.parsed.age=occupationAge.groups.age,this.parsed.occupation=occupationAge.groups.occupation.trim())}this.check("db")&&!this.check("dbNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.db})||(this.parsed.db="0"),this.parsed.db=this.translateRoll(this.parsed.db),this.check("build"),this.check("armor")&&!this.check("armorNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.armor})||(this.parsed.armor="0"),this.check("mov",{type:CoC7ActorImporter.asNumber}),this.check("lck",{type:CoC7ActorImporter.asNumber}),this.check("sanLoss"),this.parsed.sanLoss=this.translateRoll(this.parsed.sanLoss),this.check("attacksPerRound")&&this.check("attacksPerRoundNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.attacksPerRound})&&(this.parsed.attacksPerRound="0"),this.text="\n"+this.text;let sections=this.getRegEx("("+this.keys.sectionCombats+")","i");null===this.text.match(sections)&&(sections=this.check("guessStartCombat",{saveKeys:!1,removeFromText:!1}),sections&&(this.text=[this.text.slice(0,sections["-index"]),this.keys.newCombatHeader,this.text.slice(sections["-index"])].join("")));const regExpSections=this.getRegEx(this.regEx.sections,"i");if(sections=this.text.split(regExpSections),null!==sections)for(let i=0,im=sections.length;i<im;i++)null!==sections[i].match(this.getRegEx("("+this.keys.sectionCombats+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processCombat(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSkills+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionLangauges+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1],"languages"),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSpells+")","i"))&&void 0!==sections[i+1]&&(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSpells(sections[i+1]),i++);return this.parsed.gmnotes=this.toHTML(this.text),this.parsed}disableAttribAuto(key,attribValue,check,updateData){const value=Math.max(0,Number(attribValue));return value!==Number(check)&&(updateData[`system.attribs.${key}.auto`]=!1,updateData[`system.attribs.${key}.value`]=value,"build"===key?updateData[`system.attribs.${key}.current`]=value:updateData[`system.attribs.${key}.max`]=value),updateData}async createEntity(characterData,entityType){const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();"npc"!==entityType&&(entityType="creature");const actorData={name:characterData.name,type:entityType,folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);await npc.createEmbeddedDocuments("Item",characterData.items,{renderSheet:!1});const updateData={};let value=0;void 0!==characterData.actor.attribs.hp?.value&&this.disableAttribAuto("hp",characterData.actor.attribs.hp.value,npc.hpMax,updateData),void 0!==characterData.actor.attribs.mp?.value&&this.disableAttribAuto("mp",characterData.actor.attribs.mp.value,npc.mpMax,updateData),void 0!==characterData.actor.attribs.mov?.value&&this.disableAttribAuto("mov",characterData.actor.attribs.mov.value,npc.mov,updateData),void 0!==characterData.actor.attribs.build?.value&&this.disableAttribAuto("build",characterData.actor.attribs.build.value,npc.build,updateData),void 0!==characterData.actor.attribs.db?.value&&(value=String(characterData.actor.attribs.db.value).replace(/^\+\s*/,""),value!==String(npc.db)&&(updateData["system.attribs.db.auto"]=!1,updateData["system.attribs.db.value"]=value)),Object.keys(updateData).length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateData:",updateData),await npc.update(updateData));const updateItemData=[];let lastWeaponSkill=null;for(const pair of this.weaponSkills){!1!==pair[0]&&(lastWeaponSkill=npc.items.filter((i=>i.name===pair[0].name&&"skill"===i.type&&Number(i.system.value)===Number(pair[0].system.value))));const weapon=npc.items.filter((i=>i.name===pair[1].name&&"weapon"===i.type&&i.system.range.normal.damage===pair[1].system.range.normal.damage));lastWeaponSkill[0]&&weapon[0]&&updateItemData.push({_id:weapon[0].id,"system.skill.main.id":lastWeaponSkill[0].id,"system.skill.main.name":lastWeaponSkill[0].name})}return updateItemData.length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateItemData:",updateItemData),await npc.updateEmbeddedDocuments("Item",updateItemData)),npc}actorData(pc){const data={characteristics:{},attribs:{},infos:{},special:{},description:{keeper:""},flags:{locked:!1,displayFormula:!1}};for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==pc[key]&&(data.characteristics[key]={value:Number(pc[key])});for(const key of["san","mov","build","armor","lck","hp","mp"])void 0!==pc[key]&&(data.attribs[key]={value:Number(pc[key])});void 0!==pc.db&&(data.attribs.db={value:pc.db});for(const key of["age","occupation"])void 0!==pc[key]&&(data.infos[key]=pc[key]);if(void 0!==pc.sanLoss){const[passed,failed]=pc.sanLoss.split("/");data.special.sanLoss={checkPassed:passed,checkFailled:failed}}return void 0!==pc.attacksPerRound&&(data.special.attacksPerRound=Number(pc.attacksPerRound)),data.description.keeper=pc.gmnotes,CONFIG.debug.CoC7Importer&&console.debug("actorData:",data),data}async itemsData(pc){const items=[];if(this.weaponSkills=[],void 0!==pc.attacks)for(const attack of pc.attacks){let skill=!1;!0!==attack.system?.skill?.id&&(skill=await this.weaponSkill(attack),items.push(skill)),attack.system.skill.id=null,items.push(attack),this.weaponSkills.push([skill,attack])}if(void 0!==pc.skills)for(const skill of pc.skills){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,void 0!==skill.push&&(cloned.system.properties.push=skill.push),items.push(foundry.utils.duplicate(cloned))}else{const options={};void 0!==skill.push&&(options.push=skill.push),items.push(CoCActor.emptySkill(skill.name,skill.value,options))}}if(void 0!==pc.languages)for(const skill of pc.languages){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,items.push(foundry.utils.duplicate(cloned))}else items.push(CoCActor.emptySkill(skill.name,skill.value,{img:CoC7Item.iconLanguage,specialization:"Language"}))}if(void 0!==pc.spells)for(const name of pc.spells){const existing=await CoC7Utilities.guessItem("spell",name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();items.push(foundry.utils.duplicate(cloned))}else items.push(CoCActor.emptySpell(name))}return items}async weaponSkill(weapon){let skill=null;if(this.getRegEx("handgun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Handgun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Handgun skill: ${skill}`)):this.getRegEx("rifle").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Rifle/Shotgun",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Rifle",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Shotgun",{combat:!0,source:this.itemLocations}))),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Rifle skill: ${skill}`)):this.getRegEx("smb").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Submachine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Submachine Gun skill: ${skill}`)):this.getRegEx("machineGun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Machine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Machine Gun skill: ${skill}`)):this.getRegEx("launched").exec(weapon.name)&&(skill=await CoC7Utilities.guessItem("skill","Launch",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Launch skill: ${skill}`)),null!=skill){return skill.clone({system:{value:weapon.system?.skill?.id}})}const firearms=weapon.system?.properties?.rngd,parts=CoC7Item.getNamePartsSpec(weapon.name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),newSkill={type:"skill",name:parts.name,system:{skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0},base:weapon.system?.skill?.id,value:weapon.system?.skill?.id}};return CONFIG.debug.CoC7Importer&&console.debug(`Weapon skill not found for ${weapon.name}, creating a new one`,newSkill),newSkill}needsConversion(npc){let needsConversionResult=!0;for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==npc[key]&&npc[key]>30&&(needsConversionResult=!1);return CONFIG.debug.CoC7Importer&&console.debug("needsConversion:",needsConversionResult),needsConversionResult}async createActor(inputs){CONFIG.debug.CoC7Importer&&console.debug("createActor:",inputs);const lang=CoC7ActorImporterRegExp.checkLanguage(inputs.lang);this.keys=CoC7ActorImporterRegExp.getKeys(lang),this.regEx=CoC7ActorImporterRegExp.getRegularExpressions(lang),this.itemLocations=inputs.source,CONFIG.debug.CoC7Importer&&console.debug("Regular Expressions:",lang,this.keys,this.regEx);let character=await this.parseCharacter(inputs.text);CONFIG.debug.CoC7Importer&&console.debug("parseCharacter:",character),("coc-guess"===inputs.convertFrom6E&&this.needsConversion(character)||"coc-convert"===inputs.convertFrom6E)&&(character=await this.convert7E(character));const characterData={name:character.name,actor:this.actorData(character),items:await this.itemsData(character)};if(void 0!==inputs.testMode&&!0===inputs.testMode)return characterData;return await this.createEntity(characterData,inputs.entity)}async convert7E(creature){CONFIG.debug.CoC7Importer&&console.debug("Converting npc",creature);for(const key of["str","con","siz","dex","app","int","pow"])void 0!==creature[key]&&(creature[key]*=5);return void 0!==creature.edu&&(creature.edu<=18?creature.edu*=5:creature.edu<=26?creature.edu=creature.edu+90-18:creature.edu=99),void 0!==creature.db&&("-1d4"===creature.db?creature.db=-1:"-1d6"===creature.db&&(creature.db=-2)),CONFIG.debug.CoC7Importer&&console.debug("convert7E: ",creature),creature}}class CoC7DirectoryPicker extends FilePicker{get title(){return game.i18n.localize("CoC7.PickDirectory")}_onSubmit(event){event.preventDefault();const path=event.target.target.value,activeSource=this.activeSource,bucket=event.target.bucket?event.target.bucket.value:null;this.field.value=CoC7DirectoryPicker.format({activeSource,bucket,path}),this.close()}static DefaultDirectory(val){return null===val?"":String(val)}static format(value){return null!==value.bucket?`[${value.activeSource}:${value.bucket}] ${value.path}`:`[${value.activeSource}] ${value.path}`}static parse(raw){const str=raw??"",matches=str.match(/^\[([^:]+)(:(.+))?\]\s*(.+)?$/u);return matches?{activeSource:matches[1],bucket:matches[3]??"",current:matches[4]}:{activeSource:"data",bucket:null,current:str}}static processHtml(html){$(html).find('input[data-dtype="DefaultDirectory"]').each(((i,el)=>{const input=$(el);if(input.prop("readonly",!0),!input.next().length){const picker=new CoC7DirectoryPicker({field:input[0],...CoC7DirectoryPicker.parse(input.val())}),pickerButton=$('<button type="button" class="file-picker" title="'+game.i18n.localize("CoC7.PickDirectory")+'"><i class="fas fa-file-import fa-fw"></i></button>');CoC7DirectoryPicker.createDefaultDirectory(),pickerButton.on("click",(()=>{picker.render(!0)})),input.parent().append(pickerButton)}}))}activateListeners(html){super.activateListeners(html),$(html).find("ol.files-list").remove(),$(html).find("footer div").remove(),$(html).find("footer button").text(game.i18n.localize("CoC7.PickDirectory"))}static async createDefaultDirectory(){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));try{return await CoC7DirectoryPicker.createDirectory(parsed.activeSource,parsed.current,{bucket:parsed.bucket}),!0}catch(e){if(!e.message.startsWith("EEXIST"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1}}static async uploadToDefaultDirectory(file,filename){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));return(await FilePicker.upload(parsed.activeSource,parsed.current,new File([file],filename,{type:"image/png"}),{bucket:parsed.bucket})).path?parsed.current+"/"+filename:(ui.notifications.error(game.i18n.localize("CoC7.FileUploadError")),!1)}}class CoC7DholeHouseActorImporter{static getBackstory(backstoryJSON){const sections=[["description","Description"],["traits","Traits"],["ideology","Ideology"],["injurues","Injuries","injuries"],["people","People"],["phobias","Phobias"],["locations","Locations"],["tomes","Tomes"],["possessions","Possessions"],["encounters","Encounters"]],backstory={block:[],sections:[]};for(const section of sections)null!==backstoryJSON[section[0]]&&(void 0!==section[2]&&""!==section[2]||(section[2]=section[0]),backstory.block.push(`<h3>${section[1]}</h3>\n<div class="${section[2]}">\n${backstoryJSON[section[0]]}\n</div>`),backstory.sections.push({title:section[1],value:backstoryJSON[section[0]]}));return backstory.block="<h2>Backstory</h2>\n"+backstory.block.join("\n",backstory.block),backstory}static async convertDholeHouseCharacterData(dholeHouseData,options){CONFIG.debug.CoC7Importer&&console.log("Source:",dholeHouseData),dholeHouseData=dholeHouseData.Investigator;const backstories=CoC7DholeHouseActorImporter.getBackstory(dholeHouseData.Backstory);return{name:dholeHouseData.PersonalDetails.Name,actor:{characteristics:{str:{value:parseInt(dholeHouseData.Characteristics.STR,10)},con:{value:parseInt(dholeHouseData.Characteristics.CON,10)},siz:{value:parseInt(dholeHouseData.Characteristics.SIZ,10)},dex:{value:parseInt(dholeHouseData.Characteristics.DEX,10)},app:{value:parseInt(dholeHouseData.Characteristics.APP,10)},int:{value:parseInt(dholeHouseData.Characteristics.INT,10)},pow:{value:parseInt(dholeHouseData.Characteristics.POW,10)},edu:{value:parseInt(dholeHouseData.Characteristics.EDU,10)}},attribs:{san:{value:parseInt(dholeHouseData.Characteristics.Sanity,10),max:parseInt(dholeHouseData.Characteristics.SanityMax,10),dailyLimit:Math.floor(dholeHouseData.Characteristics.Sanity/5)},hp:{value:parseInt(dholeHouseData.Characteristics.HitPts,10),max:parseInt(dholeHouseData.Characteristics.HitPtsMax,10)},mp:{value:parseInt(dholeHouseData.Characteristics.MagicPts,10),max:parseInt(dholeHouseData.Characteristics.MagicPtsMax,10)},lck:{value:parseInt(dholeHouseData.Characteristics.Luck,10)},mov:{value:parseInt(dholeHouseData.Characteristics.Move,10),max:parseInt(dholeHouseData.Characteristics.Move,10)},db:{value:dholeHouseData.Characteristics.DamageBonus},build:{value:parseInt(dholeHouseData.Characteristics.Build,10)}},infos:{occupation:dholeHouseData.PersonalDetails.Occupation,age:dholeHouseData.PersonalDetails.Age,sex:dholeHouseData.PersonalDetails.Gender,residence:dholeHouseData.PersonalDetails.Residence,birthplace:dholeHouseData.PersonalDetails.Birthplace},backstory:backstories.block,biography:backstories.sections,description:{keeper:game.i18n.localize("CoC7.DholeHouseActorImporterSource")}},skills:await CoC7DholeHouseActorImporter.extractSkills(dholeHouseData.Skills.Skill??[],options),possesions:await CoC7DholeHouseActorImporter.extractPossessions(dholeHouseData.Possessions?.item??[],options)}}static makeSkillName(name,specialization){return"None"===specialization&&(specialization="Any"),"Language (Other)"===name||"Language (Own)"===name?name="Language":"Operate Heavy Machine"===name?name="Operate Heavy Machinery":"Throw"===name&&""===specialization&&(name="Fighting",specialization="Throw"),{skillName:""===specialization?name:specialization,specialization:""===specialization?"":name,name:name+(""===specialization?"":" ("+specialization+")")}}static async extractSkills(dholeHouseskills,options){const skills=[];for(const skill of dholeHouseskills){if("None"===skill.subskill&&"1"===skill.value&&"0"===skill.half&&"0"===skill.fifth)continue;const parts=CoC7DholeHouseActorImporter.makeSkillName(skill.name,skill.subskill??""),existing=await CoC7Utilities.guessItem("skill",parts.name,{source:options.source,fallbackAny:!0});let cloned=null;void 0!==existing?(cloned=foundry.utils.duplicate(existing.toObject()),cloned.name=parts.name,cloned.system.skillName=parts.skillName,cloned.system.specialization=parts.specialization):(cloned=CoCActor.emptySkill(parts.skillName,parseInt(skill.value??0,10),{specialization:""!==parts.specialization&&parts.specialization}),cloned.system.properties=cloned.system.properties??{},"Fighting"===parts.specialization?(cloned.system.properties.fighting=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Firearms"===parts.specialization?(cloned.system.properties.firearm=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Dodge"===parts.skillName&&(cloned.system.properties.push=!1)),"Any"===cloned.system.skillName&&(cloned.name=cloned.name.replace(" (Any)"," (None)"),cloned.system.skillName="None"),cloned.system.base=parseInt(skill.value??0,10),cloned.system.value=parseInt(skill.value??0,10),cloned.system.flags=cloned.system.flags??{},cloned.system.flags.occupation=!0===skill.occupation||"true"===skill.occupation,skills.push(cloned)}return skills}static findWeaponSkillId(skillName,character){const skills=character.getEmbeddedCollection("Item"),checkName=skillName.replace(/^\((.+)\)$/,"$1");return skills.find((i=>i.system?.skillName===checkName||i.system?.skillName?.indexOf(checkName)>-1))}static async extractPossessions(dholehousePossessions,options){const items=[];Array.isArray(dholehousePossessions)||null==dholehousePossessions||(dholehousePossessions=[dholehousePossessions]);for(const item of dholehousePossessions){const existing=await CoC7Utilities.guessItem("item",item.description,{source:options.source});let cloned=null;cloned=void 0!==existing?foundry.utils.duplicate(existing.toObject()):{name:item.description,type:"item"},items.push(cloned)}return items}static async extractWeapons(dholehouseWeapons,character,options){const weapons=[];Array.isArray(dholehouseWeapons)||(dholehouseWeapons=[dholehouseWeapons]);for(const weapon of dholehouseWeapons){const skill=CoC7DholeHouseActorImporter.findWeaponSkillId(weapon.skillname,character),damage=weapon.damage.replace(/\+DB/i,""),addb=damage!==weapon.damage,existing=await CoC7Utilities.guessItem("weapon",weapon.name,{source:options.source});let cloned=null;void 0!==existing?(cloned=foundry.utils.duplicate(existing.toObject()),cloned.system.skill.main.name=skill?.name??"",cloned.system.skill.main.id=skill?.id??"",cloned.system.range=cloned.system.range??{},cloned.system.range.normal=cloned.system.range.normal??{},cloned.system.range.normal.damage=damage,cloned.system.ammo=weapon.ammo,cloned.system.malfunction=weapon.malf,cloned.system.properties=cloned.system.properties??{},cloned.system.properties.melee=skill?.system.properties?.fighting??!1,cloned.system.properties.rngd=skill?.system.properties?.firearm??!1,cloned.system.properties.addb=addb):cloned={name:weapon.name,type:"weapon",system:{skill:{main:{name:skill?.name??"",id:skill?.id??""}},range:{normal:{damage}},ammo:weapon.ammo,malfunction:weapon.malf,properties:{melee:skill?.system.properties?.fighting??!1,rngd:skill?.system.properties?.firearm??!1,addb}}},weapons.push(cloned)}return weapons}static async savePortrait(base64Portrait,fileName){const base64Response=await fetch("data:image/png;base64,"+base64Portrait),imageBlob=await base64Response.blob();return CoC7DirectoryPicker.uploadToDefaultDirectory(imageBlob,fileName)}static async createNPCFromDholeHouse(dholeHouseCharacterData,options){if(!game.user?.can("FILES_UPLOAD"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1;const characterData=await CoC7DholeHouseActorImporter.convertDholeHouseCharacterData(dholeHouseCharacterData,options);CONFIG.debug.CoC7Importer&&console.log("Character Data:",characterData);const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();if(!CoC7DirectoryPicker.createDefaultDirectory())return!1;const actorData={name:characterData.name,type:"character",folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);if(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait?.length>10){const fileName="avatar-"+npc.id+".png",portrait=await CoC7DholeHouseActorImporter.savePortrait(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait,fileName);!1!==portrait&&npc.update({img:portrait})}CONFIG.debug.CoC7Importer&&console.log("Items: ",characterData.items),await npc.createEmbeddedDocuments("Item",characterData.skills,{renderSheet:!1}),await npc.createEmbeddedDocuments("Item",characterData.possesions,{renderSheet:!1});const weapons=await CoC7DholeHouseActorImporter.extractWeapons(dholeHouseCharacterData.Investigator.Weapons?.weapon??[],npc,options);return CONFIG.debug.CoC7Importer&&console.log("Weapons: ",weapons),await npc.createEmbeddedDocuments("Item",weapons,{renderSheet:!1}),npc}}class CoC7ActorImporterDialog extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","dialog","actor-importer"],title:game.i18n.localize("CoC7.ActorImporter"),template:"systems/CoC7/templates/apps/actor-importer.html",closeOnSubmit:!1,width:600,height:"auto"})}async getData(){const data=await super.getData();return data.importType=data.object.importType,data.convert6E=data.object.convert6E,data.source=data.object.source,data.characterData=data.object.characterData,data.canUpload=game.user?.can("FILES_UPLOAD"),["npc","creature"].includes(data.importType)&&(data.languages=CoC7ActorImporterRegExp.getTranslations(),data.language=CoC7ActorImporterRegExp.checkLanguage(data.object.language),data.placeholder=CoC7ActorImporterRegExp.getExampleText(data.language)),data}activateListeners(html){super.activateListeners(html),html.find("#dholehouse-character-preview").hide(),html.find("#coc-entity-type,#coc-entity-lang").change(this._onChangeSubmit.bind(this)),html.find("#dholehouse-json-file-picker").change(this._onJSONFileSelected.bind(this)),html.find("#coc-pasted-character-data").on("keyup",(function(e){const charactersTooExtended=$(this).val().match(/[\udbc0-\udbfe][\udc00-\udfff]/),prompt=$("#coc-prompt");prompt.data("extended")&&charactersTooExtended?prompt.html(game.i18n.localize("CoC7.TextFieldInvalidCharacters")).addClass("error"):prompt.html(prompt.data("text")).removeClass("error")})).trigger("keyup"),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("form").submit((e=>{e.preventDefault()}))}static getInputs(form){const inputs={};return inputs.entity=form.find("#coc-entity-type").val().trim(),CONFIG.debug.CoC7Importer&&console.debug("entity type:",inputs.entity),form.find("#coc-convert-6E").length>0&&(inputs.convertFrom6E=form.find("#coc-convert-6E").val().trim()),form.find("#coc-entity-lang").length>0&&(inputs.lang=CoC7ActorImporterRegExp.checkLanguage(form.find("#coc-entity-lang").val().trim())),form.find("#source").length>0&&(inputs.source=form.find("#source").val().trim()),form.find("#coc-pasted-character-data").length>0&&(inputs.text=form.find("#coc-pasted-character-data").val().trim()),CONFIG.debug.CoC7Importer&&console.debug("received text","##"+inputs.text+"##"),inputs}_onJSONFileSelected(event){const jsonFileInput=document.getElementById("dholehouse-json-file-picker"),portraitImage=document.getElementById("dholehouse-character-portrait"),characterName=document.getElementById("dholehouse-character-name"),preview=document.getElementById("dholehouse-character-preview"),file=jsonFileInput.files[0],dialog=this,fileReader=new FileReader;fileReader.onload=function(e){try{dialog.characterJSON=JSON.parse(fileReader.result)}catch(e){return $("#coc-prompt").html(game.i18n.localize("CoC7.TextFieldInvalidJSON")).addClass("error"),void event.preventDefault()}const personalDetails=dialog.characterJSON?.Investigator?.PersonalDetails;personalDetails?(characterName.textContent=personalDetails.Name,portraitImage.src="data:image/png;base64,"+personalDetails.Portrait,preview.style.display="block",$(".dialog.actor-importer").height("auto")):ui.notifications.error(game.i18n.localize("CoC7.DholeHouseInvalidActor"))},fileReader.readAsText(file)}_onChangeSubmit(event){this._onSubmit(event)}async _onClickSubmit(event){const id=event.currentTarget.dataset.button;if("no"===id)this.close();else if("getExampleNow"===id){const content=CoC7ActorImporterRegExp.getExampleText(this.object.language);CoC7Utilities.copyToClipboard(content).then((()=>ui.notifications.info(game.i18n.localize("CoC7.Copied"))))}else if("import"===id){const app=$(event.currentTarget).closest("div.dialog.actor-importer");app.hide();const form=$(event.currentTarget).closest("form"),inputs=CoC7ActorImporterDialog.getInputs(form);if("dholehouse"===inputs.entity&&this.characterJSON){const character=await CoC7DholeHouseActorImporter.createNPCFromDholeHouse(this.characterJSON,{source:inputs.source});!1!==character?(CONFIG.debug.CoC7Importer&&console.debug("character:",character),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:game.i18n.localize("CoC7.Entities.Character"),actorName:character.name})),await character.sheet.render(!0),this.close()):app.show()}else inputs.text&&""!==inputs.text?(CoC7ActorImporterDialog.importActor(inputs),this.close()):app.show()}}async _updateObject(event,formData){this.object.importType=formData["coc-entity-type"],this.object.characterData=formData["coc-pasted-character-data"]?.trim(),void 0!==formData["coc-convert-6E"]&&(this.object.convert6E=formData["coc-convert-6E"]),void 0!==formData["coc-entity-lang"]&&(this.object.language=formData["coc-entity-lang"]),void 0!==formData.source&&(this.object.source=formData.source),this.render(!0)}static async importActor(inputs){"."!==inputs.text[inputs.text.length]&&(inputs.text+=".");const actor=new CoC7ActorImporter,createdActor=await actor.createActor(inputs);CONFIG.debug.CoC7Importer&&console.debug("createdActor:",createdActor),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:createdActor.type?.toUpperCase(),actorName:createdActor.name})),await createdActor.sheet.render(!0)}static async create(options={}){options.importType=options.importType??"npc",options.language=options.language??CoC7ActorImporterRegExp.checkLanguage(null),options.convert6E=options.language??"coc-guess",options.source=options.source??"iwms",options.characterData=options.characterData??"",new CoC7ActorImporterDialog(options).render(!0)}}Hooks.once("ready",(()=>{game.modules.get("CoC7-Importer-Tests")?.active&&(window.CoC7ActorImporter=CoC7ActorImporter)}));class DropCoCID extends Dialog{static processForm(response,element,resolve){element.find("input").is(":checked")&&game.settings.set("CoC7","dropCoCID",response?"Y":"N"),resolve(response)}static processItem(response,item){return response&&item.flags?.CoC7?.cocidFlag?.id?item.flags.CoC7.cocidFlag.id:foundry.utils.duplicate(item)}static async create(){switch(game.settings.get("CoC7","dropCoCID")){case"":return new Promise((resolve=>{new DropCoCID({title:game.i18n.format("CoC7.Settings.DropCoCID.Name"),content:"<p>"+game.i18n.format("CoC7.Settings.DropCoCID.Dialog")+'</p><p><input type="checkbox" id="rememberthis" style="vertical-align: sub;"><label for="rememberthis">'+game.i18n.format("CoC7.Settings.DropCoCID.Remember")+"</label></p>",classes:["coc7","app","dialog"],buttons:{yes:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("Yes"),callback:element=>{DropCoCID.processForm(!0,element,resolve)}},no:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("No"),callback:element=>{DropCoCID.processForm(!1,element,resolve)}}}}).render(!0)}));case"Y":return!0;case"N":return!1}}}class CoC7OccupationSheet extends ItemSheet{activateListeners(html){if(super.activateListeners(html),!this.options.editable)return;html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))),html.find(".group-item-delete").click(this._onGroupItemDelete.bind(this)),html.find(".group-control").click(this._onGroupControl.bind(this));new DragDrop({dropSelector:".droppable",callbacks:{drop:this._onDrop.bind(this)}}).bind(html[0])}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const optionalSkill=event?.currentTarget?.classList?.contains("optional-skills"),ol=event?.currentTarget?.closest("ol"),index=ol?.dataset?.group,dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[],groups=this.item.system.groups?foundry.utils.duplicate(this.item.system.groups):[];for(const item of dataList)if(item&&item.system&&[type].includes(item.type))if(optionalSkill){if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;if(groups[index].skills.find((el=>el.name===item.name)))continue}0===useCoCID&&(useCoCID=await DropCoCID.create()),groups[index].skills=groups[index].skills.concat([DropCoCID.processItem(useCoCID,item)])}else{if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;for(let i=0;i<groups.length;i++){const index=groups[i].skills.findIndex((el=>el.name===item.name));-1!==index&&groups[i].skills.splice(index,1)}}0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))}await this.item.update({"system.groups":groups}),await this.item.update({[`system.${collectionName}`]:collection})}async _onGroupControl(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("add-group")){await this._onSubmit(event);const groups=this.item.system.groups;await this.item.update({"system.groups":groups.concat([{options:0,skills:[]}])})}if(a.classList.contains("remove-group")){await this._onSubmit(event);const groups=foundry.utils.duplicate(this.item.system.groups),ol=a.closest(".item-list.group");groups.splice(Number(ol.dataset.group),1),await this.item.update({"system.groups":groups})}}async _onItemSummary(event,collectionName="items"){event.preventDefault();const obj=$(event.currentTarget),li=obj.parents(".item"),group=obj.closest(".group");let item;if(item=group.length?this.item.system.groups[group.data("group")][collectionName].find((s=>s._id===li.data("item-id"))):this.item.system[collectionName].find((s=>s._id===li.data("item-id"))),!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}async _onGroupItemDelete(event){const item=$(event.currentTarget).closest(".item"),group=Number(item.closest(".item-list.group").data("group")),groups=foundry.utils.duplicate(this.item.system.groups);if(void 0!==groups[group]){const itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=groups[group].skills.findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));itemIndex>-1&&(groups[group].skills.splice(itemIndex,1),await this.item.update({"system.groups":groups}))}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/occupation.html",width:525,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey);for(let index=0,len=sheetData.data.system.groups.length;index<len;index++)sheetData.data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.groups[index].skills}),sheetData.data.system.groups[index].isEmpty=0===sheetData.data.system.groups[index].skills.length,sheetData.data.system.groups[index].skills.sort(CoC7Utilities.sortByNameKey);sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(sheetData.data.system.occupationSkillPoints),sheetData.itemProperties=[];for(const[key,value]of Object.entries(sheetData.data.system.type))value&&sheetData.itemProperties.push(COC7.occupationProperties[key]?COC7.occupationProperties[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}static occupationPointsString(occupationSkillPoints){const optionnal=[],mandatory=[];for(const[key,carac]of Object.entries(occupationSkillPoints))if(carac.multiplier){const caracName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);carac.selected&&carac.optional&&optionnal.push(`${caracName}x${carac.multiplier}`),carac.selected&&!carac.optional&&mandatory.push(`${caracName}x${carac.multiplier}`)}let occupationPointsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return mandatory.length&&(occupationPointsString+=mandatory.join(" + ")),optionnal.length&&mandatory.length&&(occupationPointsString+=` + (${optionnal.join(orString)})`),optionnal.length&&!mandatory.length&&(occupationPointsString+=optionnal.join(orString)),occupationPointsString}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;if(system.groups){formData["system.groups"]=Object.values(system.groups||[]);for(let index=0;index<this.item.system.groups.length;index++)formData[`system.groups.${index}.skills`]=foundry.utils.duplicate(this.item.system.groups[index].skills)}super._updateObject(event,formData)}}class CoC7InvestigatorWizard extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{id:"investigator-wizard-application",classes:["coc7","dialog","investigator-wizard"],title:game.i18n.localize("CoC7.InvestigatorWizard.Title"),template:"systems/CoC7/templates/apps/investigator-wizard.hbs",width:520,height:600,closeOnSubmit:!1,scrollY:[".scrollsection"],dragDrop:[{dragSelector:".draggable",dropSelector:null}]})}get pageList(){return{PAGE_NONE:-1,PAGE_INTRODUCTION:0,PAGE_CONFIGURATION:1,PAGE_SETUPS:2,PAGE_ARCHETYPES:3,PAGE_CHARACTISTICS:4,PAGE_ATTRIBUTES:5,PAGE_VIEW_ATTRIBUTES:6,PAGE_OCCUPATIONS:7,PAGE_OCCUPATION_SKILLS:8,PAGE_ARCHETYPE_SKILLS:9,PAGE_POINTS_SKILLS:10,PAGE_INVESTIGATOR:11,PAGE_BACKSTORY:12,PAGE_CREATE:13}}get characteristicsMethods(){return{METHOD_DEFAULT:1,METHOD_ROLL:1,METHOD_POINTS:2,METHOD_VALUES:3}}get cocidCreditRating(){return"i.skill.credit-rating"}get cocidLanguageOwn(){return"i.skill.language-own"}get pageOrder(){const pages=this.pageList;let pageOrder=[pages.PAGE_INTRODUCTION];return game.user.isGM&&pageOrder.push(pages.PAGE_CONFIGURATION),""===this.object.defaultSetup&&pageOrder.push(pages.PAGE_SETUPS),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPES),pageOrder.push(pages.PAGE_CHARACTISTICS),game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||pageOrder.push(pages.PAGE_ATTRIBUTES),pageOrder=pageOrder.concat([pages.PAGE_VIEW_ATTRIBUTES,pages.PAGE_OCCUPATIONS,pages.PAGE_OCCUPATION_SKILLS]),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPE_SKILLS),pageOrder=pageOrder.concat([pages.PAGE_POINTS_SKILLS,pages.PAGE_INVESTIGATOR,pages.PAGE_BACKSTORY,pages.PAGE_CREATE]),pageOrder}static async loadCacheItemByCoCID(){return new Promise(((resolve,reject)=>{game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\./,type:"i",showLoading:!0}).then((items=>{const list={};for(const item of items)list[item.flags.CoC7.cocidFlag.id]=item;resolve(list)}))}))}async filterCacheItemByCoCID(regexp){return Object.entries(await this.object.cacheCoCID).filter((entry=>entry[0].match(regexp))).map((entry=>entry[1]))}async getCacheItemByCoCID(id){return(await this.object.cacheCoCID)[id]??!1}async expandItemArray(itemList){const items=itemList.filter((it=>"string"!=typeof it)),cocids=itemList.filter((it=>"string"==typeof it));if(cocids.length){const source=await this.object.cacheCoCID,missing=[];for(const cocid of cocids)void 0!==source[cocid]?items.push(source[cocid]):missing.push(cocid);if(missing.length){const era=game.i18n.format(COC7.eras[this.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:this.object.defaultEra});ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:missing.join(", "),lang:game.i18n.lang,era}))}}return items}getAgeAdjustments(){for(const key in this.object.setupModifiers)this.object.setupModifiers[key]=0;if(!game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")){if(this.object.age>=40){const key=Math.floor(this.object.age/10);this.object.requiresAgeAdjustments={edu:{total:key-2>4?4:key-2,rolled:!1},deduct:{total:key>1?5*Math.pow(2,key-4):0,from:["str","con","dex"],values:{}},reduce:{total:5*(key-3),from:"app"}}}else this.object.age>=20?this.object.requiresAgeAdjustments={edu:{total:1,rolled:!1}}:this.object.age>=15&&(this.object.requiresAgeAdjustments={deduct:{total:5,from:["str","siz"],values:{}},reduce:{total:5,from:"edu"},luck:!0});void 0!==this.object.requiresAgeAdjustments.reduce&&(this.object.setupModifiers[this.object.requiresAgeAdjustments.reduce.from]=-this.object.requiresAgeAdjustments.reduce.total)}}async getData(){const sheetData=await super.getData();let setup,archetype,occupation;sheetData.isKeeper=game.user.isGM,sheetData.pages=this.pageList,sheetData.canNext=!1,sheetData.createButton=!1;let showMonetary=!1;switch(sheetData.object.step){case sheetData.pages.PAGE_INTRODUCTION:sheetData.era=game.i18n.format(COC7.eras[sheetData.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:sheetData.object.defaultEra}),sheetData.canNext=!0;break;case sheetData.pages.PAGE_CONFIGURATION:if(game.user.isGM){sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.defaultSetup)),void 0===setup?(sheetData.object.defaultSetup="",sheetData.object.setup=""):sheetData.description=await TextEditor.enrichHTML(setup.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.ownership={[CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE]:"OWNERSHIP.NONE",[CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED]:"OWNERSHIP.LIMITED",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER]:"OWNERSHIP.OBSERVER",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER]:"OWNERSHIP.OWNER"},sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value)});sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_DEFAULT,sheetData.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.hasArchetypes=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.canNext=!0}break;case sheetData.pages.PAGE_SETUPS:""===sheetData.object.defaultSetup&&(sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.setups.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.setup&&(setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.setup)),void 0!==setup&&(sheetData.description=await TextEditor.enrichHTML(setup.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.canNext=!0)));break;case sheetData.pages.PAGE_ARCHETYPES:if(sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),0===sheetData.archetypes.length)sheetData.canNext=!0;else if(sheetData.archetypes.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.archetype&&(archetype=sheetData.archetypes.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.archetype)),void 0!==archetype)){sheetData.description=await TextEditor.enrichHTML(archetype.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.bonusPoints=archetype.system.bonusPoints;const coreCharacteristics=[];for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&coreCharacteristics.push(coreCharacteristic);0===coreCharacteristics.length?this.object.coreCharacteristic="":1===coreCharacteristics.length&&(this.object.coreCharacteristic=coreCharacteristics[0]),sheetData.coreCharacteristic=coreCharacteristics.map((c=>c.toLocaleUpperCase())).join(" "+game.i18n.localize("CoC7.Or")+" ");const skills=[];archetype.system.skills=await this.expandItemArray(archetype.system.skills);for(const skill of archetype.system.skills)skills.push(skill.name);sheetData.skills=skills.join(", "),sheetData.suggestedOccupations=await TextEditor.enrichHTML(archetype.system.suggestedOccupations,{async:!0,secrets:game.user.isGM}),sheetData.suggestedTraits=await TextEditor.enrichHTML(archetype.system.suggestedTraits,{async:!0,secrets:game.user.isGM}),sheetData.canNext=!0}break;case sheetData.pages.PAGE_CHARACTISTICS:if(sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_ROLL,""!==sheetData.object.setup&&(setup=await this.getCacheItemByCoCID(this.object.setup),void 0!==setup)){if(setup.system.characteristics.points.enabled||this.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData.setup={total:0,points:setup.system.characteristics.points.value,characteristics:[{key:"str",roll:setup.system.characteristics.rolls.str,label:"CHARAC.Strength"},{key:"con",roll:setup.system.characteristics.rolls.con,label:"CHARAC.Constitution"},{key:"siz",roll:setup.system.characteristics.rolls.siz,label:"CHARAC.Size"},{key:"dex",roll:setup.system.characteristics.rolls.dex,label:"CHARAC.Dexterity"},{key:"app",roll:setup.system.characteristics.rolls.app,label:"CHARAC.Appearance"},{key:"int",roll:setup.system.characteristics.rolls.int,label:"CHARAC.Intelligence"},{key:"pow",roll:setup.system.characteristics.rolls.pow,label:"CHARAC.Power"},{key:"edu",roll:setup.system.characteristics.rolls.edu,label:"CHARAC.Education"}],luck:{roll:setup.system.characteristics.rolls.luck,label:"CoC7.Luck"}},sheetData.coreCharacteristics=[],""!==sheetData.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype),void 0!==archetype)){for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&sheetData.coreCharacteristics.push({key:coreCharacteristic,name:game.i18n.format(sheetData.setup.characteristics.find((c=>c.key===coreCharacteristic))?.label??"Unknown")});sheetData.coreCharacteristics.sort(CoC7Utilities.sortByNameKey),""!==this.object.coreCharacteristic&&archetype.system.coreCharacteristicsFormula.enabled&&(sheetData.setup.characteristics.find((c=>c.key===this.object.coreCharacteristic)).roll=archetype.system.coreCharacteristicsFormula.value)}let empties=!1;for(const key in sheetData.object.setupPoints)""!==sheetData.object.setupPoints[key]?"luck"!==key&&(sheetData.setup.total+=parseInt(sheetData.object.setupPoints[key],10)):empties=!0;this.object.coreCharacteristic&&(sheetData.coreCharacteristic=this.object.coreCharacteristic.toLocaleUpperCase()),!empties&&this.object.age>=15&&([sheetData.characteristicsMethods.METHOD_ROLL,sheetData.characteristicsMethods.METHOD_VALUES].includes(sheetData.characteristicsMethod)||sheetData.setup.total.toString()===sheetData.setup.points.toString())&&(sheetData.canNext=!0)}break;case sheetData.pages.PAGE_ATTRIBUTES:sheetData.pulpRuleIgnoreAgePenalties=game.settings.get("CoC7","pulpRuleIgnoreAgePenalties"),sheetData.canNext=!0,sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),min:1-parseInt(this.object.setupPoints[key],10),label:CoC7Utilities.getCharacteristicNames(key).label};if(void 0===this.object.requiresAgeAdjustments.edu||this.object.requiresAgeAdjustments.edu.rolled||(sheetData.canNext=!1),void 0!==this.object.requiresAgeAdjustments.deduct){sheetData.deductTotal=0;for(const key of this.object.requiresAgeAdjustments.deduct.from)sheetData.deductTotal=sheetData.deductTotal-parseInt(this.object.setupModifiers[key],10);sheetData.deductFrom=this.object.requiresAgeAdjustments.deduct.from.map((n=>game.i18n.localize("CHARAC."+n.toUpperCase()))).join(", ").replace(/(, )([^,]+)$/,"$1"+game.i18n.localize("CoC7.Or")+" $2").replace(/^([^,]+),([^,]+)$/,"$1$2"),sheetData.deductTotal!==this.object.requiresAgeAdjustments.deduct.total&&(sheetData.canNext=!1)}void 0!==this.object.requiresAgeAdjustments.reduce&&(sheetData.reduceFrom=game.i18n.localize("CHARAC."+this.object.requiresAgeAdjustments.reduce.from.toUpperCase())),void 0!==this.object.requiresAgeAdjustments.luck&&(sheetData.luckValue=Math.max(this.object.setupPoints.luck,this.object.setupModifiers.luck),0===this.object.setupModifiers.luck&&(sheetData.canNext=!1));break;case sheetData.pages.PAGE_VIEW_ATTRIBUTES:sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),prefix:"",suffix:"%",label:CoC7Utilities.getCharacteristicNames(key).label};sheetData.points.db={value:CoCActor.dbFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.BonusDamage"},(isNaN(sheetData.points.db.value)||Number(sheetData.points.db.value)>=0)&&(sheetData.points.db.prefix="+"),sheetData.points.build={value:CoCActor.buildFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.Build"},Number(sheetData.points.build.value)>=0&&(sheetData.points.build.prefix="+"),sheetData.points.hp={value:CoCActor.hpFromCharacteristics(sheetData.points,"character"),prefix:"",suffix:"",label:"CoC7.HitPoints"},sheetData.points.hp.prefix=sheetData.points.hp.value+"/",sheetData.points.mp={value:CoCActor.mpFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.MagicPoints"},sheetData.points.mp.prefix=sheetData.points.mp.value+"/",sheetData.points.san={value:sheetData.points.pow.value,prefix:"",suffix:"/99",label:"CoC7.Sanity"},sheetData.points.mov={value:CoCActor.movFromCharacteristics(sheetData.points,"character",this.object.age),prefix:"",suffix:"",label:"CoC7.Movement"},sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATIONS:if(sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.occupations.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.occupation&&(occupation=sheetData.occupations.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.occupation)),void 0!==occupation)){sheetData.description=await TextEditor.enrichHTML(occupation.system.description.value,{async:!0,secrets:game.user.isGM}),sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(occupation.system.occupationSkillPoints),sheetData.creditRating=occupation.system.creditRating,sheetData.personal=occupation.system.personal,sheetData.personalText=occupation.system.personalText,sheetData.skills=await this.expandItemArray(occupation.system.skills),sheetData.groups={};for(let index=0;index<occupation.system.groups.length;index++)sheetData.groups[index]={options:occupation.system.groups[index].options,skills:[]},sheetData.groups[index].skills=await this.expandItemArray(occupation.system.groups[index].skills);sheetData.points=0;const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.points+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.points+=Math.max(...options)),sheetData.canNext=!0}break;case sheetData.pages.PAGE_INVESTIGATOR:sheetData.language=void 0!==this.object.skillItems[this.cocidLanguageOwn],sheetData.language?sheetData.languageName=this.object.skillItems[this.cocidLanguageOwn].item.name:sheetData.languageName="",sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATION_SKILLS:sheetData.default=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isOccupationDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.default++):!1!==sheetData.object.skillItems[key].rows[index].inOccupationGroup?(group=sheetData.object.skillItems[key].rows[index].inOccupationGroup,isMultiple&&(isPickable=!0)):group="other";let toggle=sheetData.object.skillItems[key].rows[index].occupationToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].archetypeToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:sheetData.object.skillItems[key].rows[index].isCreditRating,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.max=(parseInt(sheetData.default,10)||0)+(parseInt(sheetData.object.personal,10)||0)+Object.values(sheetData.object.occupationGroups).reduce(((s,v)=>s+(parseInt(v,10)||0)),0),sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_ARCHETYPE_SKILLS:sheetData.max=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isArchetypeDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.max++):group="other";let toggle=sheetData.object.skillItems[key].rows[index].archetypeToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].occupationToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:!1,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_POINTS_SKILLS:if(sheetData.skills=[],sheetData.creditRatingOkay=!(this.object.creditRating.max>0),sheetData.personal={count:0,total:2*(parseInt(this.object.setupPoints.int,10)+parseInt(this.object.setupModifiers.int,10)),remaining:0},sheetData.occupation={count:0,total:0,remaining:0},sheetData.archetype={count:0,total:0,remaining:0},""!==sheetData.object.setup&&(showMonetary=(await this.getCacheItemByCoCID(sheetData.object.setup)).system.monetary.values.length>0),""!==sheetData.object.occupation&&(occupation=await this.getCacheItemByCoCID(this.object.occupation),occupation)){const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.occupation.total+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.occupation.total+=Math.max(...options))}if(""!==this.object.archetype){const archetype=await game.system.api.cocid.fromCoCID(this.object.archetype);1===archetype.length&&(sheetData.archetype.total=archetype[0].system.bonusPoints)}if(Object.keys(this.object.skillItems).length>0){for(const key in this.object.skillItems){const skill=this.object.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=foundry.utils.duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=foundry.utils.duplicate(row.selected));let base=item.system.base;if(!Number.isNumeric(base))for(const key in this.object.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new Roll(base).evaluate({async:!1}).total));let totalPoints=parseInt(base,10);if(Number(row.personalPoints)>0){const num=Number(row.personalPoints);sheetData.personal.count+=num,totalPoints+=num}if(Number(row.occupationPoints)>0){const num=Number(row.occupationPoints);sheetData.occupation.count+=num,totalPoints+=num}if(Number(row.archetypePoints)>0){const num=Number(row.archetypePoints);sheetData.archetype.count+=num,totalPoints+=num}if(Number(row.experiencePoints)>0){totalPoints+=Number(row.experiencePoints)}let name=item.name;key===this.cocidLanguageOwn?name=item.system.specialization+" ("+item.system.skillName+")":skill.flags.isCreditRating?(name=name+" ["+this.object.creditRating.min+" - "+this.object.creditRating.max+"]",totalPoints>=this.object.creditRating.min&&totalPoints<=this.object.creditRating.max&&(sheetData.creditRatingOkay=!0)):"string"==typeof row.selected&&(name=item.system.specialization+" ("+row.selected+")"),sheetData.skills.push({key,index,name,isOccupation:row.occupationToggle,isArchetype:row.archetypeToggle,base,personalPoints:row.personalPoints,occupationPoints:row.occupationPoints,archetypePoints:row.archetypePoints,experiencePoints:row.experiencePoints,totalPoints,showCreditRating:showMonetary&&key===this.cocidCreditRating})}}}sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData.creditRatingOkay&&(sheetData.canNext=!0)}sheetData.personal.remaining=sheetData.personal.total-sheetData.personal.count,sheetData.occupation.remaining=sheetData.occupation.total-sheetData.occupation.count,sheetData.archetype.remaining=sheetData.archetype.total-sheetData.archetype.count;break;case sheetData.pages.PAGE_BACKSTORY:{const allBackstories=await this.object.cacheBackstories;sheetData.backstories={};for(let index=0;index<this.object.bioSections.length;index++)sheetData.backstories[index]={index,name:this.object.bioSections[index].name,rolls:game.system.api.cocid.findCocIdInList(this.object.bioSections[index].key,allBackstories).length?this.object.bioSections[index].key:"",value:this.object.bioSections[index].value}}sheetData.canNext=!0,sheetData.createButton=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;break;case sheetData.pages.PAGE_CREATE:sheetData.canNext=!0,sheetData.createButton=!0}return sheetData}activateListeners(html){super.activateListeners(html),html.keypress((e=>/textarea/i.test((e.target||e.srcElement).tagName)||13!==(e.keyCode||e.which||e.charCode||0))),html.find(".submit_on_change").change(this._onChangeSubmit.bind(this)),html.find(".roll-characteristic").click(this._onRollCharacteristic.bind(this)),html.find(".increase-10-characteristic").click(this._onIncreaseCharacteristic10.bind(this)),html.find(".increase-characteristic").click(this._onIncreaseCharacteristic.bind(this)),html.find(".decrease-characteristic").click(this._onDecreaseCharacteristic.bind(this)),html.find(".decrease-10-characteristic").click(this._onDecreaseCharacteristic10.bind(this)),html.find("button.roll_all").click(this._onRollAll.bind(this)),html.find("button.roll_edu").click(this._onRollEdu.bind(this)),html.find("button.roll_luck").click(this._onRollLuck.bind(this)),html.find(".item input.submit_on_blur").blur(this._onChangeSubmit.bind(this)),html.find(".item input.save-characteristic-on-blur").blur(this._onChangeSaveCharacteristic.bind(this)),html.find(".item.toggleable").click(this._onToggleSkill.bind(this)),html.find(".item.clickable").click(this._onClickPickSkill.bind(this)),html.find(".skills-list input").click(this._onClickSkillSpecial.bind(this)),html.find(".skills-list .remove-skill").click(this._onClickRemoveSkill.bind(this)),html.find(".item input.skill-adjustment").blur(this._onChangeSkillPoints.bind(this)),html.find("textarea.backstory-text").keyup(this._onChangeBackstoryText.bind(this)),html.find("button.backstory-roll").click(this._onRollBackstory.bind(this)),html.find("button.backstory-reset").click(this._onResetBackstory.bind(this))}async rollMessage(rolls){if(rolls.length){const html=[];for(const roll of rolls)html.push(await renderTemplate(Roll.CHAT_TEMPLATE,{formula:(CoC7Utilities.getCharacteristicNames(roll[0])?.label??roll[0])+": "+roll[1],tooltip:await roll[2].getTooltip(),total:roll[2].total}));ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html.join("<div>&nbsp;</div>"),whisper:ChatMessage.getWhisperRecipients("GM")})}}addItemToList(item,{isOccupationDefault=!1,inOccupationGroup=!1,occupationToggle=!1,isArchetypeDefault=!1,archetypeToggle=!1,isCreditRating=!1}={}){const key=item.flags.CoC7?.cocidFlag?.id??item.name;if("skill"!==item.type)return void this.object.investigatorItems.push(item);const isMultiple=!(!item.system.properties.special||!(item.system.properties.requiresname&&!item.system.properties.onlyone||item.system.properties.picknameonly||item.name===game.i18n.format("CoC7.AnySpecName"))),flags={isOccupationDefault,inOccupationGroup,isArchetypeDefault,isCreditRating,occupationToggle,archetypeToggle},rows={occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected:!1};if(void 0===this.object.skillItems[key])this.object.skillItems[key]={item,flags:foundry.utils.mergeObject(flags,{isMultiple},{inplace:!1}),rows:[]},isMultiple&&!1===isOccupationDefault&&!1===inOccupationGroup&&!1===isArchetypeDefault||this.object.skillItems[key].rows.push(foundry.utils.mergeObject(flags,rows,{inplace:!1}));else{if(isMultiple)this.object.skillItems[key].rows.push(foundry.utils.mergeObject(flags,rows,{inplace:!1}));else for(const flag in flags)this.object.skillItems[key].rows[0][flag]=this.object.skillItems[key].rows[0][flag]||flags[flag];for(const flag in flags)this.object.skillItems[key].flags[flag]=this.object.skillItems[key].flags[flag]||flags[flag]}!isMultiple&&flags.isCreditRating&&(this.object.skillItems[key].rows[0].occupationPoints=this.object.creditRating.min)}clearSetupPoints(){for(const key in this.object.setupPoints)this.object.setupPoints[key]=""}async setSkillLists(){this.object.skillItems={},this.object.occupationGroups={},this.object.investigatorItems=[],this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues);const setup=await this.getCacheItemByCoCID(this.object.setup),occupation=await this.getCacheItemByCoCID(this.object.occupation);let archetype=!1;if(""!==this.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype)),setup&&occupation&&(!game.settings.get("CoC7","pulpRuleArchetype")||archetype)){this.object.bioSections=[];for(let index=0;index<setup.system.bioSections.length;index++)this.object.bioSections.push({name:setup.system.bioSections[index],value:"",key:"rt..backstory-"+CoC7Utilities.toKebabCase(setup.system.bioSections[index])});this.object.personal=occupation.system.personal,this.object.personalText=occupation.system.personalText,this.object.creditRating=occupation.system.creditRating;let items=[];items=await this.expandItemArray(setup.system.items);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index]);items=await this.expandItemArray(occupation.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isOccupationDefault:!0,occupationToggle:!0});for(let group=0,gm=occupation.system.groups.length;group<gm;group++){this.object.occupationGroups[group]=occupation.system.groups[group].options,items=await this.expandItemArray(occupation.system.groups[group].skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{inOccupationGroup:group})}if(archetype){items=await this.expandItemArray(archetype.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isArchetypeDefault:!0,archetypeToggle:!0})}if(Number(this.object.creditRating.max)>0){const nameCreditRating=game.i18n.format("CoC7.CoCIDFlag.keys."+this.cocidCreditRating),flags={isOccupationDefault:!0,occupationToggle:!0,isCreditRating:!0};if(void 0!==this.object.skillItems[this.cocidCreditRating])this.addItemToList(this.object.skillItems[this.cocidCreditRating].item,flags);else if(void 0!==this.object.skillItems[nameCreditRating])this.addItemToList(this.object.skillItems[nameCreditRating].item,flags);else{const skill=await game.system.api.cocid.fromCoCID(this.cocidCreditRating);skill.length&&this.addItemToList(skill[0],flags)}}}}_onDragStart(event){if(event.currentTarget.dataset.characteristicKey){const dragData={type:"investigatorCharacteristic",key:event.currentTarget.dataset.characteristicKey,value:event.currentTarget.dataset.value};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}async _onDrop(event){try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if(void 0!==dataList.type&&"investigatorCharacteristic"===dataList.type){if(dataList.destination=event.target.closest("li").dataset.characteristicKey,dataList.okay=!1,"-"===dataList.key&&void 0!==this.object.setupPoints[dataList.destination]){const index=this.object.placeable.indexOf(parseInt(dataList.value,10));-1!==index&&this.object.placeable.splice(index,1),""!==this.object.setupPoints[dataList.destination]&&this.object.placeable.push(parseInt(this.object.setupPoints[dataList.destination],10)),this.object.setupPoints[dataList.destination]=parseInt(dataList.value,10),this.object.placeable.sort().reverse(),dataList.okay=!0}else if(void 0!==this.object.setupPoints[dataList.key]&&"-"===dataList.destination)""!==this.object.setupPoints[dataList.key]&&(this.object.placeable.push(parseInt(this.object.setupPoints[dataList.key],10)),this.object.setupPoints[dataList.key]="",this.object.placeable.sort().reverse(),dataList.okay=!0);else if(void 0!==this.object.setupPoints[dataList.key]&&void 0!==this.object.setupPoints[dataList.destination]){const temp=""===this.object.setupPoints[dataList.key]?"":parseInt(this.object.setupPoints[dataList.key],10);this.object.setupPoints[dataList.key]=""===this.object.setupPoints[dataList.destination]?"":parseInt(this.object.setupPoints[dataList.destination],10),this.object.setupPoints[dataList.destination]=temp,dataList.okay=!0}if(dataList.okay)return void this.render(!0)}}catch(err){}const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if([this.pageList.PAGE_ARCHETYPE_SKILLS,this.pageList.PAGE_OCCUPATION_SKILLS].includes(this.object.step))for(const item of dataList)"skill"===item.type&&(this.addItemToList(item),this.render(!0))}_onClickSkillSpecial(event){event.stopPropagation()}_onClickRemoveSkill(event){event.stopPropagation();const key=event.currentTarget?.parentNode?.dataset?.key,index=event.currentTarget?.parentNode?.dataset?.index;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows.splice(index,index),this.render(!0))}async _onToggleSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows[index][toggleKey]=!this.object.skillItems[key].rows[index][toggleKey],this.render(!0))}async _onClickPickSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;if(void 0!==this.object.skillItems[key]){index>-1&&(this.object.skillItems[key].rows[index][toggleKey]=!1,this.object.skillItems[key].rows[index].selected=!1,this.render(!0));let skillList=[];const group=game.system.api.cocid.guessGroupFromKey(key);group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>!(item.system.properties?.special&&(item.system.properties?.requiresname||item.system.properties?.picknameonly)))),skillList.length>1&&skillList.sort(CoC7Utilities.sortByNameKey));const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:this.object.skillItems[key].item.system.properties?.requiresname??!1,fixedBaseValue:!0,specializationName:this.object.skillItems[key].item.system.specialization,label:this.object.skillItems[key].item.name});if(index>-1)""!==skillData.selected?(this.object.skillItems[key].rows[index].selected=skillList.find((i=>i.id===skillData.selected)),this.object.skillItems[key].rows[index][toggleKey]=!0):""!==skillData.name&&(this.object.skillItems[key].rows[index].selected=skillData.name,this.object.skillItems[key].rows[index][toggleKey]=!0);else{let selected=!1;""!==skillData.selected?selected=skillList.find((i=>i.id===skillData.selected)):""!==skillData.name&&(selected=skillData.name),this.object.skillItems[key].rows.push({isOccupationDefault:!1,inOccupationGroup:!1,isArchetypeDefault:!1,isCreditRating:!1,occupationToggle:"occupationToggle"===toggleKey,archetypeToggle:"archetypeToggle"===toggleKey,occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected})}this.render(!0)}}async _onChangeSkillPoints(event){const input=$(event.currentTarget),adjustment=input.data("adjustment"),li=input.closest("li"),key=li.data("key"),index=li.data("index");void 0!==this.object.skillItems[key]?.rows[index][adjustment]&&(this.object.skillItems[key].rows[index][adjustment]=input.val()),this.render(!0)}async _onChangeBackstoryText(event){const textarea=$(event.currentTarget),index=textarea.data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=textarea.val())}async _onRollBackstory(event){const button=$(event.currentTarget),index=button.data("index"),key=button.data("key");if(void 0!==this.object.bioSections[index]){const rolltable=await game.system.api.cocid.fromCoCID(key);if(1===rolltable.length){const tableResult=await rolltable[0].roll();tableResult.results[0].type===CONST.TABLE_RESULT_TYPES.TEXT&&(this.object.bioSections[index].value=(this.object.bioSections[index].value+"\n"+tableResult.results[0].text.trim()).trim())}}this.render(!0)}async _onResetBackstory(event){const index=$(event.currentTarget).data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=""),this.render(!0)}async _onRollLuck(event){const setup=await this.getCacheItemByCoCID(this.object.setup);if(setup){const die=await new Roll(setup.system.characteristics.rolls.luck.toString()).evaluate({async:!0});this.object.setupModifiers.luck=[die.total];const html=await renderTemplate(Roll.CHAT_TEMPLATE,{formula:game.i18n.localize("CoC7.InvestigatorWizard.RollTwiceForLuck")+": "+setup.system.characteristics.rolls.luck.toString(),tooltip:await die.getTooltip(),total:die.total});ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html,whisper:ChatMessage.getWhisperRecipients("GM")}),this.render(!0)}}async _onRollEdu(event){if(event.preventDefault(),void 0!==this.object.requiresAgeAdjustments.edu&&!this.object.requiresAgeAdjustments.edu.rolled&&this.object.requiresAgeAdjustments.edu.total){let value=parseInt(this.object.setupPoints.edu,10);const message=[];for(let rolls=this.object.requiresAgeAdjustments.edu.total;rolls>0;rolls--){const die=await new Roll("1d100").evaluate({async:!0});if(die.total>value){const augmentDie=await new Roll("1d10").evaluate({async:!0});message.push(`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value,augment:augmentDie.total})}</span><br>`),value+=parseInt(augmentDie.total,10)}else message.push(`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value})}</span><br>`)}ChatMessage.create({flavor:game.i18n.localize("CoC7.RollAll4Dev"),user:game.user.id,speaker:{alias:game.user.name},content:message.join(""),whisper:ChatMessage.getWhisperRecipients("GM")}),this.object.setupModifiers.edu=value-parseInt(this.object.setupPoints.edu,10),this.object.requiresAgeAdjustments.edu.rolled=!0,this.render(!0)}}async _onRollAll(event){event.preventDefault();const rolls=[];for(const key of["str","con","siz","dex","app","int","pow","edu","luck"]){const result=await this.rollCharacteristic(key);!1!==result&&rolls.push(result)}this.rollMessage(rolls),this.render(!0)}async _onIncreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,10),this.render(!0)}async _onIncreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,1),this.render(!0)}async _onDecreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-1),this.render(!0)}_onDecreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-10),this.render(!0)}modifyOffset(key,value,min,max){this.object.setupModifiers[key]=Math.max(Math.min(parseInt(this.object.setupModifiers[key],10)+value,parseInt(max,10)),parseInt(min,10))}modifyCharacteristic(key,value){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+value,this.object.setupPoints[key]=Number(input.value))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key,result=await this.rollCharacteristic(characKey);!1!==result&&this.rollMessage([result]),this.render(!0)}async rollCharacteristic(key){const li=$(`#investigator-wizard-application li.item[data-key=${key}]`),input=li.find("input"),formula=li.data("roll");if(input&&formula&&(this.object.rerollsEnabled||""===this.object.setupPoints[key])){const roll=new Roll(formula.toString());return await roll.evaluate({async:!0}),input.val(roll.total),this.object.setupPoints[key]=Number(roll.total),[key,formula.toString(),roll]}return!1}_onChangeSubmit(event){this._onSubmit(event)}_onChangeSaveCharacteristic(event){const obj=$(event.currentTarget),name=obj.prop("name");if(void 0!==this.object.setupPoints[name]){this.object.setupPoints[name]=obj.val();let empties=!1,total=0;for(const key in this.object.setupPoints)""!==this.object.setupPoints[key]?"luck"!==key&&(total+=parseInt(this.object.setupPoints[key],10)):empties=!0;const objTotal=obj.closest("ol.item-list").find("span.total"),max=parseInt(objTotal.siblings("span.value").text(),10);objTotal.text(total),total!==max||empties?obj.closest("form").find("button.submit-button[data-button=next]").length>0&&this.render(!0):0===obj.closest("form").find("button.submit-button[data-button=next]").length&&this.render(!0)}}getPageNumber(direction){const pageOrder=this.pageOrder,key=parseInt(Object.keys(pageOrder).find((key=>pageOrder[key]===this.object.step)),10)+direction;return pageOrder[key]}async _updateObject(event,formData){if(["back","next"].includes(event.submitter?.dataset.button)){if(event.submitter.className.indexOf("currently-submitting")>-1)return;event.submitter.className=event.submitter.className+" currently-submitting"}if(void 0!==formData["default-setup"]&&void 0!==formData["world-era"]&&void 0!==formData["default-ownership"]){if(this.object.defaultSetup!==formData["default-setup"]&&(this.object.defaultSetup=formData["default-setup"],game.settings.set("CoC7","InvestigatorWizardSetup",this.object.defaultSetup),this.object.setup=this.object.defaultSetup,this.clearSetupPoints(),await this.setSkillLists()),this.object.defaultOwnership!==formData["default-ownership"]&&(this.object.defaultOwnership=formData["default-ownership"],game.settings.set("CoC7","InvestigatorWizardOwnership",this.object.defaultOwnership)),this.object.defaultEra!==formData["world-era"]){const obj=$(this.element.find("form")),started=Date.now();obj.find(".dialog-buttons:first").hide(),obj.find(".scrollsection:first").hide(),obj.find(".erachange:first").show(),this.object.defaultEra=formData["world-era"],await game.settings.set("CoC7","worldEra",this.object.defaultEra),this.object.cacheCoCID=await CoC7InvestigatorWizard.loadCacheItemByCoCID();const buffer=500-(Date.now()-started);buffer>10&&await new Promise((resolve=>setTimeout(resolve,buffer)))}if(void 0!==formData["characteristics-method"]){const type=Number(formData["characteristics-method"]);type===this.characteristicsMethods.METHOD_DEFAULT?(this.object.enforcePointBuy=!1,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_POINTS?(this.object.enforcePointBuy=!0,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_VALUES&&(this.object.enforcePointBuy=!1,game.settings.get("CoC7","pulpRuleArchetype")?this.object.quickFireValues=[90,80,70,60,60,50,50,40]:this.object.quickFireValues=[80,70,60,60,50,50,50,40]),game.settings.set("CoC7","InvestigatorWizardPointBuy",this.object.enforcePointBuy),game.settings.set("CoC7","InvestigatorWizardQuickFire",this.object.quickFireValues)}this.object.rerollsEnabled="string"==typeof formData["rerolls-enabled"],game.settings.set("CoC7","InvestigatorWizardRerolls",this.object.rerollsEnabled);for(let i=0,im=this.object.quickFireValues.length;i<im;i++){const num=Number(formData["quick-fire-values-"+i]);num>0&&(this.object.quickFireValues[i]=num)}this.object.quickFireValues.sort().reverse(),this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues),"string"==typeof formData["default-enabled"]?"0"===this.object.defaultQuantity.toString()?(this.object.defaultQuantity=1,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):(this.object.defaultQuantity=formData["default-quantity"],game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):"0"!==this.object.defaultQuantity.toString()&&(this.object.defaultQuantity=0,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity))}else if(void 0!==formData["coc-setup"])this.object.setup!==formData["coc-setup"]&&(this.object.setup=formData["coc-setup"],this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-archetype"])this.object.archetype!==formData["coc-archetype"]&&(this.object.archetype=formData["coc-archetype"],this.object.coreCharacteristic="",this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-occupation"])this.object.occupation!==formData["coc-occupation"]&&(this.object.occupation=formData["coc-occupation"],await this.setSkillLists());else{for(const key in this.object.setupPoints)void 0!==formData[key]&&this.object.setupPoints[key]!==formData[key]&&(this.object.setupPoints[key]=formData[key]);void 0!==formData["coc-core-characteristic"]&&this.object.coreCharacteristic!==formData["coc-core-characteristic"]&&(this.object.coreCharacteristic=formData["coc-core-characteristic"],this.clearSetupPoints(),this.object.placeable=foundry.utils.duplicate(this.object.quickFireValues))}const flatKeys=["name","age","residence","birthplace","language","avatar","token"];for(const key of flatKeys)void 0!==formData[key]&&this.object[key]!==formData[key]&&(this.object[key]=formData[key],"age"===key&&this.getAgeAdjustments());if("back"===event.submitter?.dataset.button){const pageNumber=this.getPageNumber(-1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}else if("next"===event.submitter?.dataset.button){if(this.object.step===this.pageList.PAGE_CREATE||this.object.step===this.pageList.PAGE_BACKSTORY&&game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole)return void this.attemptToCreate();{const pageNumber=this.getPageNumber(1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}}this.render(!0)}async attemptToCreate(){const actorData=await this.normalizeCharacterData(this.object);if(game.user.isGM||game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole){(await CoC7InvestigatorWizard.createCharacter(actorData)).sheet.render(!0),this.close()}else{const keepers=game.users.filter((u=>u.active&&u.isGM));if(keepers.length){actorData.ownership[game.user.id]=CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER;const data={type:"character-wizard",listener:keepers[0].id,payload:actorData};game.socket.emit("system.CoC7",data),ui.notifications.info(game.i18n.localize("CoC7.InvestigatorWizard.CreatingInvestigator")),this.close()}else ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}async normalizeCharacterData(data){const weaponSkills={melee:{},rngd:{}},items=[];for(const key in data.skillItems){const skill=data.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=foundry.utils.duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=foundry.utils.duplicate(row.selected),row.selected=!1),row.occupationToggle&&(item.system.flags.occupation=!0),row.archetypeToggle&&(item.system.flags.archetype=!0);let base=item.system.base;if(!Number.isNumeric(base))for(const key in data.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new Roll(base).evaluate({async:!1}).total)),item.system.base=base,item.system.adjustments=item.system.adjustments??{},Number(row.personalPoints)>0&&(item.system.adjustments.personal=parseInt(row.personalPoints,10)),Number(row.occupationPoints)>0&&(item.system.adjustments.occupation=parseInt(row.occupationPoints,10)),Number(row.archetypePoints)>0&&(item.system.adjustments.archetype=parseInt(row.archetypePoints,10)),Number(row.experiencePoints)>0&&(item.system.adjustments.experience=parseInt(row.experiencePoints,10)),key===this.cocidLanguageOwn?(item.system.skillName=data.language,item.name=item.system.specialization+" ("+item.system.skillName+")"):"string"==typeof row.selected&&(item.system.skillName=row.selected,item._id=foundry.utils.randomID(),item.name=item.system.specialization+" ("+item.system.skillName+")",void 0!==item.flags.CoC7?.cocidFlag?.id&&(item.flags.CoC7.cocidFlag.id=game.system.api.cocid.guessId(item))),item.system.properties?.fighting?(weaponSkills.melee[item.name]=item._id,weaponSkills.melee[item.system.skillName]=item._id):item.system.properties?.firearm&&(weaponSkills.rngd[item.name]=item._id,weaponSkills.rngd[item.system.skillName]=item._id),items.push(item)}}}for(const sourceItem of data.investigatorItems){const item=foundry.utils.duplicate(sourceItem);item.system.properties.melee?(void 0!==weaponSkills.melee[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.melee[item.system.skill.main.name]),void 0!==weaponSkills.melee[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.melee[item.system.skill.alternativ.name])):item.system.properties.rngd&&(void 0!==weaponSkills.rngd[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.rngd[item.system.skill.main.name]),void 0!==weaponSkills.rngd[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.rngd[item.system.skill.alternativ.name])),items.push(item)}let monetary={};const setup=await this.getCacheItemByCoCID(this.object.setup);setup&&(monetary=foundry.utils.duplicate(setup.system.monetary));const development={personal:2*(parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)),occupation:0,archetype:0};if(""!==data.archetype){const archetype=await game.system.api.cocid.fromCoCID(data.archetype);1===archetype.length&&(items.push(archetype[0].toObject()),development.archetype=archetype[0].system.bonusPoints)}if(""!==data.occupation){const occupation=await game.system.api.cocid.fromCoCID(data.occupation);if(1===occupation.length){items.push(occupation[0].toObject());const options=[];for(const[key,carac]of Object.entries(occupation[0].system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))):development.occupation+=carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10)));options.length>0&&(development.occupation+=Math.max(...options))}}const biography=[];for(let index=0,im=data.bioSections.length;index<im;index++)biography.push({title:data.bioSections[index].name,value:data.bioSections[index].value});return{type:"character",name:data.name,img:data.avatar,system:{characteristics:{str:{value:parseInt(data.setupPoints.str,10)+parseInt(data.setupModifiers.str,10)},con:{value:parseInt(data.setupPoints.con,10)+parseInt(data.setupModifiers.con,10)},siz:{value:parseInt(data.setupPoints.siz,10)+parseInt(data.setupModifiers.siz,10)},dex:{value:parseInt(data.setupPoints.dex,10)+parseInt(data.setupModifiers.dex,10)},app:{value:parseInt(data.setupPoints.app,10)+parseInt(data.setupModifiers.app,10)},int:{value:parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)},pow:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)},edu:{value:parseInt(data.setupPoints.edu,10)+parseInt(data.setupModifiers.edu,10)}},attribs:{lck:{value:Math.max(parseInt(data.setupPoints.luck,10),parseInt(data.setupModifiers.luck,10))},san:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)}},infos:{age:data.age,residence:data.residence,birthplace:data.birthplace},development,biography,monetary},prototypeToken:{name:data.name,actorLink:!0,texture:{src:data.token},disposition:CONST.TOKEN_DISPOSITIONS.FRIENDLY,sight:{enabled:!0}},items,ownership:{default:parseInt(data.defaultOwnership,10)}}}static async createCharacterFromData(actorData){const actor=await CoC7InvestigatorWizard.createCharacter(actorData),functionId=Hooks.on("renderActorSheet",((app,html,data)=>{app.object.id===actor.id&&(game.socket.emit("system.CoC7",{type:"open-character",listener:Object.keys(actorData.ownership).find((k=>"default"!==k)),payload:actor.id}),Hooks.off("renderActorSheet",functionId))}));actor.sheet.render(!0)}static async createCharacter(actorData){const actor=await Actor.create(actorData);return await actor.update({"system.attribs.hp.value":actor.rawHpMax,"system.attribs.mp.value":actor.rawMpMax,"system.attribs.san.max":actor.rawMpMax}),await actor.resetDailySanity(),actor}static async create(options={}){options=foundry.utils.mergeObject({step:0,defaultSetup:game.settings.get("CoC7","InvestigatorWizardSetup"),defaultQuantity:game.settings.get("CoC7","InvestigatorWizardQuantity"),defaultOwnership:game.settings.get("CoC7","InvestigatorWizardOwnership"),defaultEra:game.settings.get("CoC7","worldEra"),rerollsEnabled:game.settings.get("CoC7","InvestigatorWizardRerolls"),enforcePointBuy:game.settings.get("CoC7","InvestigatorWizardPointBuy"),quickFireValues:game.settings.get("CoC7","InvestigatorWizardQuickFire"),placeable:foundry.utils.duplicate(game.settings.get("CoC7","InvestigatorWizardQuickFire")),cacheCoCID:CoC7InvestigatorWizard.loadCacheItemByCoCID(),cacheBackstories:game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^rt\.\.backstory-/,type:"rt"}),cacheItems:{},setup:game.settings.get("CoC7","InvestigatorWizardSetup"),skillItems:{},occupationGroups:{},investigatorItems:[],setupPoints:{str:"",con:"",siz:"",dex:"",app:"",int:"",pow:"",edu:"",luck:""},setupModifiers:{str:0,con:0,siz:0,dex:0,app:0,int:0,pow:0,edu:0,luck:0},archetype:"",coreCharacteristic:"",occupation:"",bioSections:[],personal:0,personalText:"",creditRating:{min:0,max:0},name:"",age:"",requiresAgeAdjustments:!1,residence:"",birthplace:"",language:"",avatar:"icons/svg/mystery-man.svg",token:"icons/svg/mystery-man.svg"},options),new CoC7InvestigatorWizard(options).render(!0)}}class CoC7MenuLayer extends PlaceablesLayer{constructor(){super(),this.objects={}}static get layerOptions(){return foundry.utils.mergeObject(super.layerOptions,{name:"coc7menu",zIndex:60})}static get documentName(){return"Token"}get placeables(){return[]}}class CoC7Menu{static getButtons(controls){canvas.coc7gmtools=new CoC7MenuLayer;const isKeeper=game.user.isGM,showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu");controls.push({name:"coc7menu",title:"CoC7.GmTools",layer:"coc7gmtools",icon:"game-icon game-icon-tentacle-strike",visible:isKeeper,tools:[{toggle:!0,icon:"fas fa-angle-double-up",name:"devphase",active:game.settings.get("CoC7","developmentEnabled"),title:"CoC7.DevPhase",onClick:async toggle=>await CoC7Utilities.toggleDevPhase(toggle)},{toggle:!0,icon:"fas fa-user-edit",name:"charcreate",active:game.settings.get("CoC7","charCreationEnabled"),title:"CoC7.CharCreationMode",onClick:async toggle=>await CoC7Utilities.toggleCharCreation(toggle)},{button:!0,icon:"fas fa-user-plus",name:"actor-import",title:"CoC7.ActorImporter",onClick:async()=>await CoC7ActorImporterDialog.create()},{button:!0,icon:"fas fa-user-check",name:"investigator-wizard",title:"CoC7.InvestigatorWizard.Title",onClick:async()=>await CoC7InvestigatorWizard.create()},{toggle:!0,icon:"fas fa-certificate",class:"xp_toggle",name:"xptoggle",active:game.settings.get("CoC7","xpEnabled"),title:"CoC7.toggleXP",onClick:async toggle=>await CoC7Utilities.toggleXPGain(toggle)},{button:!0,icon:"game-icon game-icon-card-joker",name:"fakeroll",title:"CoC7.FakeRoll",onClick:CoC7Chat.fakeRollMessage},{button:!0,icon:"fas fa-moon",name:"startrest",title:"CoC7.startRest",onClick:async()=>await CoC7Utilities.getTarget()}]}),showHiddenDevMenu&&(canvas.coc7DevTools=new CoC7MenuLayer,controls.push({name:"coc7DevMenu",title:"Dev tools. If you don't know what it is, you don't need it and you shouldn't use it !!",layer:"coc7DevTools",icon:"game-icon game-icon-police-badge",visible:isKeeper,tools:[{toggle:!0,icon:"game-icon game-icon-dice-fire",name:"alwaysCrit",active:game.CoC7.dev.dice.alwaysCrit,title:"All rolls will crit",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=!1,game.CoC7.dev.dice.alwaysCrit=toggle}},{toggle:!0,icon:"game-icon game-icon-fire-extinguisher",name:"alwaysFumble",active:game.CoC7.dev.dice.alwaysFumble,title:"All rolls will fumble",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=toggle,game.CoC7.dev.dice.alwaysCrit=!1}}]}))}static renderControls(app,html,data){const isKeeper=game.user.isGM,keeperMenu=html.find(".game-icon-tentacle-strike").parent();keeperMenu.addClass("coc7-menu"),isKeeper&&keeperMenu.after('<li class="scene-control coc7-menu coc7-create-link" title="'+game.i18n.localize("CoC7.CreateLink")+'"><i class="fas fa-link"></i></li>'),keeperMenu.after('<li class="scene-control coc7-menu coc7-dice-roll" title="'+game.i18n.localize("CoC7.RollDice")+'"><i class="game-icon game-icon-d10"></i></li>'),html.find(".coc7-menu.coc7-dice-roll").click((event=>CoC7Utilities.rollDice(event))),html.find(".coc7-menu.coc7-create-link").click((event=>CoC7ContentLinkDialog.create(event)))}}class CoC7Canvas{static get COC7_TYPES_SUPPORTED(){return["CoC7Link","locator","getToken"]}static async onDropSomething(canvas,data){if(data.type&&CoC7Canvas.COC7_TYPES_SUPPORTED.includes(data.type)){const gridSize=canvas.scene.grid.size,x=data.x-gridSize/2,y=data.y-gridSize/2,height=gridSize,width=gridSize;let dropTargetTokens=canvas.tokens.placeables.filter((obj=>{const c=obj.center;return Number.between(c.x,x,x+width)&&Number.between(c.y,y,y+height)}));switch(dropTargetTokens.length||(dropTargetTokens=canvas.tokens.controlled),data.type){case"CoC7Link":if(data.check===CoC7Link.CHECK_TYPE.EFFECT){if(dropTargetTokens.length)for(const token of dropTargetTokens)CoC7Link._onLinkActorClick(token.actor,data)}else dropTargetTokens.length?CoC7Link.toWhisperMessage(data,dropTargetTokens.filter((t=>t.actor.owners.length)).map((t=>t.actor))):CoC7Link.toWhisperMessage(data,game.users.players.filter((u=>!!u.character)).map((u=>u.character)));break;case"getToken":void 0!==data.appId&&"string"==typeof data.callBack&&void 0!==ui.windows[data.appId]&&"function"==typeof ui.windows[data.appId][data.callBack]&&ui.windows[data.appId][data.callBack](dropTargetTokens);break;default:if(data.docUuid&&data.callBack){const doc=CoC7Utilities.SfromUuid(data.docUuid);if(doc[data.callBack]&&"function"==typeof doc[data.callBack])try{data.scene=canvas.scene.uuid,doc[data.callBack](data)}catch(error){console.warn(error.message)}}}}}}class CoC7SettingsDirectory extends Settings{activateListeners(html){super.activateListeners(html),game.user.isGM&&(html.find("#settings-game").append('<button class="trigger-data-migration"><i class="fas fa-wrench"></i> '+game.i18n.localize("CoC7.Migrate.TriggerButton")+"</button>"),html.find("#settings-documentation").append('<button class="trigger-system-manual"><i class="fas fa-books"></i> '+game.i18n.localize("CoC7.System.Documentation")+"</button>"),html.find(".trigger-data-migration").click((()=>{new Dialog({title:game.i18n.localize("CoC7.Migrate.TriggerTitle"),content:game.i18n.localize("CoC7.Migrate.TriggerContents"),buttons:{migrate:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Migrate.TriggerRestart"),callback:async()=>{await game.settings.set("CoC7","systemUpdateVersion",0),window.location.reload()}},close:{icon:'<i class="fas fa-ban"></i>',label:game.i18n.localize("Cancel"),callback:()=>{}}},default:"close"},{}).render(!0)})),html.find(".trigger-system-manual").click((async()=>{(await game.packs.get("CoC7.system-doc").getDocument(CONFIG.CoC7.Manual))?.sheet.render(!0)})))}}class CoC7CompendiumDirectory extends CompendiumDirectory{activateListeners(html){super.activateListeners(html);let translated=!1;if("en"===game.i18n.lang)translated=!0;else if(void 0!==game.babele)for(const v of Object.values(game.babele.modules))v.lang===game.i18n.lang&&(translated=!0);translated||(html.find("footer.directory-footer").append('<a class="compendium-translation" title="'+game.i18n.localize("CoC7.HowToTranslateTitle")+'">'+game.i18n.localize("CoC7.HowToTranslateTitle")+"</a>"),html.find(".compendium-translation").click((()=>{const message="<p>"+game.i18n.localize("CoC7.HowToTranslateWarning")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallBabele")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateEnableTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateNoTranslation")+"</p>";new Dialog({title:game.i18n.localize("CoC7.HowToTranslateTitle"),content:message,buttons:{},default:"close"},{}).render(!0)})))}}class CoC7ActorDirectory extends ActorDirectory{activateListeners(html){super.activateListeners(html);let allowWizard=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;if(!allowWizard){const allowed=game.settings.get("CoC7","InvestigatorWizardQuantity");if(allowed>0){allowWizard=game.actors.filter((a=>[a.ownership.default,a.ownership[game.user.id]??CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE].includes(CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER))).length<allowed}}allowWizard&&(html.find("footer.directory-footer").append('<a class="investigator-wizard">'+game.i18n.localize("CoC7.InvestigatorWizard.Title")+"</a>"),html.find(".investigator-wizard").click((()=>{CoC7InvestigatorWizard.create()}))),game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole&&(html.find("footer.directory-footer").append('<a class="actor-import">'+game.i18n.localize("CoC7.ActorImporter")+"</a>"),html.find(".actor-import").click((()=>{CoC7ActorImporterDialog.create()})))}}class CoC7DecaderDSNFaces{construtor(){this.selected=""}setFaces(){let selected=game.user.getFlag("dice-so-nice","appearance")?.global.system;if(selected!==this.selected){let data,destination,sourceDie=game.dice3d.DiceFactory.systems[selected]?.dice.find((d=>"d100"===d.type));void 0===sourceDie&&(sourceDie=game.dice3d.DiceFactory.systems.standard.dice.find((d=>"d100"===d.type)),selected="standard"),void 0!==sourceDie&&(destination=game.dice3d.DiceFactory.systems.standard.dice.findIndex((d=>"dt"===d.type)),data=Object.assign({},sourceDie),data.type="dt",game.dice3d.DiceFactory.systems.standard.dice[destination]=Object.assign(sourceDie.constructor.prototype,data)),this.selected=selected}}}class CoC7Spell extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/pentagram-rose.svg"),super(data,context),this.context=context}async cast(){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));const costs=this.system.costs,losses=[];let convertSurplusIntoHitPoints;if(costs.magicPoints=CoC7Utilities.isFormula(costs.magicPoints)?(await new Roll(costs.magicPoints).roll({async:!0})).total:parseInt(costs.magicPoints),costs.magicPoints&&costs.magicPoints>this.actor.system.attribs.mp.value&&(convertSurplusIntoHitPoints=await new Promise((resolve=>{const convertedHitPoints=costs.magicPoints-this.actor.system.attribs.mp.value,convertedMagicPoints=costs.magicPoints-convertedHitPoints,data={title:" ",content:game.i18n.format("CoC7.NotEnoughMagicPoints",{actorMagicPoints:this.actor.system.attribs.mp.value,convertedHitPoints,convertedMagicPoints,originalMagicPoints:costs.magicPoints,spell:this.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>(costs.hitPoints=convertedHitPoints,costs.magicPoints=convertedMagicPoints,resolve(!0))}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)})),!convertSurplusIntoHitPoints))return;for(const[key,value]of Object.entries(costs))value&&0!==Number(value)&&losses.push(await this.resolveLosses(key,value));const description=this.system.description.value,html=await renderTemplate("systems/CoC7/templates/items/spell/chat.html",{description,losses});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:this.name,content:html})}async resolveLosses(characteristic,value){let characteristicName,loss;loss=CoC7Utilities.isFormula(value)?(await new Roll(value).roll({async:!0})).total:parseInt(value);const actorData=this.actor.system;switch(characteristic){case"hitPoints":characteristicName=game.i18n.localize("CoC7.HitPoints"),this.actor.dealDamage(loss,{ignoreArmor:!0});break;case"sanity":characteristicName=game.i18n.localize("CoC7.SanityPoints"),this.grantSanityLoss(loss);break;case"magicPoints":characteristicName=game.i18n.localize("CoC7.MagicPoints"),this.actor.setMp(actorData.attribs.mp.value-loss);break;case"power":characteristicName=game.i18n.localize("CHARAC.Power"),this.actor.update({"system.characteristics.pow.value":actorData.characteristics.pow.value-loss})}return{characteristicName,loss}}async grantSanityLoss(value){const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.CastingSpell",{spell:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=value;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async update(data,context){if(void 0!==this.context.parent&&void 0!==this.context.bookId){let item,book;null===this.context.parent?(item=game.items.get(this.context.bookId),book=item.toObject()):book=this.context.parent.items.get(this.context.bookId).toObject();for(let i=0,im=book.system.spells.length;i<im;i++)book.system.spells[i]._id===this.id&&(book.system.spells[i]=foundry.utils.mergeObject(book.system.spells[i],data));null===this.context.parent?(await item.update({"system.spells":book.system.spells}),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)):(await this.context.parent.updateEmbeddedDocuments("Item",[book]),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)),this.sheet.render(!0)}else await super.update(data,context)}}class CoC7Book extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/secret-book.svg"),super(data,context)}static convertDifficulty(difficulty){switch(difficulty){case"hard":return CoC7Check.difficultyLevel.hard;case"extreme":return CoC7Check.difficultyLevel.extreme;case"critical":return CoC7Check.difficultyLevel.critical;case"unreadable":return CoC7Check.difficultyLevel.impossible;default:return CoC7Check.difficultyLevel.regular}}async addSpells(spells){const collection=this.system.spells?foundry.utils.duplicate(this.system.spells):[];for(const spell of spells)collection.push(spell);return await this.update({"system.spells":collection})}async spellDetail(index){const isKeeper=game.user.isGM,data=this.system.spells[index],parent=this.actor?this.actor:null,spell=new CoC7Spell(data,{parent,bookId:this.id});if(isKeeper||spell.system.learned)return await spell.sheet.render(!0)}async attemptInitialReading(){const difficulty=CoC7Book.convertDifficulty(this.system.difficultyLevel),language=this.system.language,skill=this.actor?.getSkillsByName(language);if(skill){if(0===skill.length)return ui.notifications.error(game.i18n.format("CoC7.UnknownLanguage",{actor:this.actor.name}));{const check=new CoC7Check;return check.actor=this.actor,check.skill=skill[0].id,check.difficulty=difficulty,check.parent=this.uuid,check.context="INITIAL_READING",check.flavor=game.i18n.format("CoC7.ReadAttempt",{book:this.name,language,difficulty:this.system.difficultyLevel}),await check.roll(),await check.toMessage()}}return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"))}async changeProgress(mode,value){if(!this.isOwned&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading&&"reset"!==mode)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));if(!this.system.type.mythos&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotMythosTome"));const necessary=this.system.study.necessary;let fullStudy=this.system.fullStudy,progress=this.system.study.progress;if(isNaN(progress))return await this.update({"system.study.progress":0});if(value&&progress>value)return await this.update({"system.fullStudy":++fullStudy,"system.study.progress":value}),await this.completeFullStudy();if("increase"===mode&&progress<necessary){if(!1!==await this.checkExhaustion())return;if(await this.update({"system.study.progress":++progress}),progress===necessary)return await this.update({"system.fullStudy":++fullStudy}),await this.grantFullStudy()}else if("decrease"===mode&&progress>0)return await this.update({"system.study.progress":--progress})}async checkExhaustion(){const actorMythosValue=this.actor?.cthulhuMythos,mythosRating=this.system.mythosRating;if(this.system.initialReading)return actorMythosValue>=mythosRating&&(await this.update({"system.study.progress":this.system.study.necessary}),ui.notifications.warn(game.i18n.format("CoC7.BookHasNothingMoreToTeach",{actor:this.actor.name,book:this.name})))}async grantFullStudy(){if(!this.system.type.mythos)return;if(!1!==await this.checkExhaustion())return;const actorMythosValue=this.actor.cthulhuMythos,developments=[],mythosRating=this.system.mythosRating;let mythosFinal=this.system.gains.cthulhuMythos.final;if(actorMythosValue+mythosFinal>mythosRating)for(let index=1;index<=mythosFinal;index++)actorMythosValue+mythosFinal-index<=mythosRating&&(mythosFinal-=index);return developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythosFinal)},{name:this.system.language,gain:"development"}),await this.grantSkillDevelopment(developments),await this.rollSanityLoss(),await this.update({"system.fullStudies":++this.system.fullStudies})}async grantInitialReading(){if(this.system.initialReading)return;const developments=[],mythos={gains:this.system.gains.cthulhuMythos.initial,type:this.system.type.mythos},occult={gains:this.system.gains.occult,type:this.system.type.occult},other_gains=this.system.gains.others,other_type=this.system.type.other;if(mythos.type&&mythos.gains&&developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythos.gains)}),occult.type&&occult.gains&&developments.push({name:game.i18n.localize("CoC7.Occult"),gain:parseInt(occult.gains)}),other_type)for(const skill of other_gains){const pattern=skill.name.match(/^(.+) \((.+)\)$/);pattern&&(skill.specialization=pattern[1],skill.name=pattern[2]),"development"!==skill.value&&(skill.value=(await new Roll(skill.value).roll({async:!0})).total),skill.value&&developments.push({name:skill.name,gain:skill.value,specialization:skill.specialization})}return await this.grantSkillDevelopment(developments),(mythos.type||occult.type)&&this.system.sanityLoss&&await this.rollSanityLoss(),await this.update({"system.initialReading":!0})}async grantSpellLearning(spelllearned){for(const spell of this.system.spells)if(spell._id===spelllearned._id){spell.system.learned=!0;await this.actor.items.find((item=>"spell"===item.type&&item.name===spelllearned.name))?ui.notifications.warn(game.i18n.format("CoC7.SpellAlreadyLearned",{spell:spelllearned.name,book:this.name})):spelllearned.system.learned=!0;break}await this.update({"system.spells":this.system.spells}),spelllearned.system.learned&&(ui.notifications.info(game.i18n.format("CoC7.SpellSuccessfullyLearned",{spell:spelllearned.name,book:this.name})),await this.actor.createEmbeddedDocuments("Item",[foundry.utils.duplicate(spelllearned)]))}async grantSkillDevelopment(developments){if(0!==developments.length){for(const development of developments){if(!development.gain)continue;let skill=await this.actor.getSkillsByName(development.name);if(0===skill.length){const existingSkill=await game.items.find((item=>"skill"===item.type&&item.name===development.name));existingSkill?skill=await this.actor.createEmbeddedDocuments("Item",[foundry.utils.duplicate(existingSkill)]):(skill=await this.actor.createSkill(development.name,0),development.specialization&&await skill[0].update({"system.properties.special":!0,"system.specialization":development.specialization}))}if(skill=skill[0],"development"===development.gain)await skill.flagForDevelopement();else{if(skill.value+development.gain>99)for(let index=1;index<=development.gain;index++)skill.value+development.gain-index<=99&&(development.gain-=index,await skill.increaseExperience(development.gain));await skill.increaseExperience(development.gain)}}return this.showDevelopmentsTable(developments)}}async redoFullStudy(){return await this.update({"system.study.progress":0}),await this.update({"system.study.necessary":2*this.system.study.necessary})}async rollSanityLoss(){const value=this.system.sanityLoss;if(!value||""===value)return;const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.ReadingMythosTome",{book:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=(await new Roll(value).roll({async:!0})).total;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async showDevelopmentsTable(developments){for(const development of developments)development.specialization&&(development.name=`${development.specialization} (${development.name})`),"development"===development.gain?development.gain=game.i18n.localize("CoC7.MarkedForDevelopment"):development.gain=`+${development.gain} ${game.i18n.localize("CoC7.Points")}`;const html=await renderTemplate("systems/CoC7/templates/items/book/development.html",{developments});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.GainsForReading",{book:this.name}),content:html})}async attemptSpellLearning(id){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));const spell=this.system.spells.find((spell=>spell._id===id));if(spell){const check=new CoC7Check;check.actor=this.actor,check.difficulty=CoC7Check.difficultyLevel.hard,check.parent=this.uuid,check.flavor=game.i18n.format("CoC7.LearnSpellAttempt",{book:this.name,spell:spell.name}),check.context="SPELL_LEARNING",check.spell=spell,await check.rollCharacteristic("int"),await check.toMessage()}}async updateRoll(roll){const check=CoC7Check.fromRollString(roll);if(check.passed){if("INITIAL_READING"===check.context)return await this.grantInitialReading();if("SPELL_LEARNING"===check.context)return await this.grantSpellLearning(check.spell)}}}const ECC_CLASS="enhanced-chat-card",PERMISSION_TYPE_GM="gm",PERMISSION_TYPE_NOT_GM="!gm",PERMISSION_TYPE_SPEAKER="speaker",PERMISSION_TYPE_USER="user",PERMISSION_TYPE_BLACKLIST="blacklist",STATE_ON="switched-on",STATE_OFF="switched-off";async function updateMessage(messageId,newContent){const chatMessage=game.messages.get(messageId);await chatMessage.update({content:newContent})}async function GMUpdate(data,options,cardClassName,messageId=void 0){const card=await EnhancedChatCard.fromData(data,options,cardClassName,messageId);return await card.GMUpdate(),card.toObject()}async function advise(){}class EnhancedChatCardLib{constructor(){this.types=new Map,this.socket=null}static injectCSS(){let style=$("head").find("style");style?.length||($("head").append($('<style  type="text/css"></style>')),style=$("head").find("style")),style.append(".ecc-restricted {color: red}\n    .ecc-restricted:hover {cursor: not-allowed}")}static set socket(x){game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.socket=x}static get socket(){if(game.enhancedChatCardsLib){if(game.enhancedChatCardsLib.socket)return game.enhancedChatCardsLib.socket;ui.notifications.error("ECC no socket")}else ui.notifications.error("ECC not Initialized")}static get types(){return game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.types}static register(cardConstructors){cardConstructors.forEach((cardConstructor=>{EnhancedChatCardLib.types.get(cardConstructor.name)||EnhancedChatCardLib.types.set(cardConstructor.name,cardConstructor)}))}}function setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}function getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}class EnhancedChatCard{constructor(data={},options={}){this.data=data,this.data.flags||(this.data.flags={}),this._options=options}async initialize(){}get options(){return foundry.utils.mergeObject(this.constructor.defaultOptions,this._options)}set options(x){this._options=x}get template(){return this.options.template}get cssClasses(){return this.options.classes?.join(" ")}get speaker(){return this.options.ooc?game.user:this.options.speaker&&ChatMessage.getSpeakerActor(this.options.speaker)?ChatMessage.getSpeakerActor(this.options.speaker):game.user}async getData(){return{card:this,flags:this.flags,data:this.toObject(),options:this.options,css:this.cssClasses,user:game.user,speaker:this.speaker}}toObject(){if(!this.data)return;const data={};for(const k of Object.keys(this.data)){const v=this.data[k];data[k]=v instanceof Object?v.toObject?v.toObject():foundry.utils.deepClone(v):v}return data}async toMessage(optionnalChatData={}){await this.initialize();const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$(html)[0];this.options.attachObject&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes);const speaker=this.options.speaker&&!this.options.ooc?ChatMessage.getSpeaker(this.options.speaker):{},chatData=foundry.utils.mergeObject({user:game.user.id,speaker,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"selfroll"===this.rollMode&&(chatData.whisper=[game.user.id]),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({attachObject=!0}={}){if(this.options.compute&&await this.localCompute(),this.options.GMUpdate&&await this.ExecuteGMUpdate(),this.messageId){const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$.parseHTML(html)[0];attachObject&&!this.data.EEC_ACTION?.detachData&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes),game.enhancedChatCardsLib.socket.executeAsGM("updateMessage",this.messageId,htmlCardElement.outerHTML)}else this.toMessage()}async activateListeners(html){html.on("change","input,select,textarea",this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} .ecc-switch`,this._onToggle.bind(this)),html.on("click",`.${ECC_CLASS} .submit`,this._onSubmit.bind(this)),html.on("focusout",`.${ECC_CLASS} input`,this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} button`,this._onButton.bind(this)),html.on("keydown",`.${ECC_CLASS} form`,this._onKey.bind(this)),html.find("[data-ecc-visibility]").each((async(i,el)=>await this.setVisibility(el))),html.find("[data-ecc-permissions]").each((async(i,el)=>await this.setPermission(el))),html.find(`.${ECC_CLASS} .ecc-switch`).each(((i,el)=>this.setState(el))),html.find(`.${ECC_CLASS} input[type="radio"]`).each(((i,el)=>this.setRadioState(el)))}setState(element){if(element&&(element.dataset.flag&&element.classList.add(this.flags[element.dataset.flag]?STATE_ON:STATE_OFF),element.dataset.name)){const value=getByPath(this,element.dataset.name);element.classList.add(value?STATE_ON:STATE_OFF)}}setRadioState(element){if(!element||!element.name)return;const splited=element.name.split(".");"data"===splited[0].toLowerCase()&&this.data&&void 0!==this.data[splited[1]]&&this.data[splited[1]]===element.value&&(element.checked=!0)}async setVisibility(element){if(!element.dataset.eccVisibility)return;await this.hasPerm(element.dataset.eccVisibility,!0)||(element.style.display="none")}async setPermission(element){if(!element.dataset.eccPermissions)return;await this.hasPerm(element.dataset.eccPermissions)||(element.classList.add("ecc-restricted"),$(element).is("input")&&("range"===element.type?$(element).attr("disabled",!0):$(element).attr("readonly",!0)),$(element).is("select")&&$(element).attr("disabled",!0))}async hasPerm(restrictedTo,vision=!1){if(!restrictedTo.length)return!0;let permissionsArray=restrictedTo.split(" ");const whiteList=!permissionsArray.includes(PERMISSION_TYPE_BLACKLIST);if(whiteList||(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_BLACKLIST))),game.user.isGM){if(!vision)return!0;if(permissionsArray.includes(PERMISSION_TYPE_GM))return whiteList;if(permissionsArray.includes(PERMISSION_TYPE_NOT_GM))return!whiteList}if(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_GM)),permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_NOT_GM)),permissionsArray.includes(PERMISSION_TYPE_USER)){if(this.message.isAuthor)return whiteList;permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_USER))}if(permissionsArray.includes(PERMISSION_TYPE_SPEAKER)){const speaker=this.message.data.speaker;if(speaker.token&&speaker.scene){const actor=await fromUuid(`Scene.${speaker.scene}.Token.${speaker.token}`);if(actor&&actor.isOwner)return whiteList}else if(speaker.actor){const actor=game.actors.get(speaker.actor);if(actor&&actor.isOwner)return whiteList}permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_SPEAKER))}if(permissionsArray.length)for(let i=0;i<permissionsArray.length;i++){const uuid=permissionsArray[i];let actor=await fromUuid(uuid);if(actor||(actor=game.actors.get(uuid)),actor)return actor.isOwner;ui.notifications.error(`Unable to find actor ${uuid}`)}return!whiteList}static async bindListeners(html){const htmlCardElement=html[0].querySelector(`.${ECC_CLASS}`);if(!htmlCardElement)return;const card=await EnhancedChatCard.fromHTMLCardElement(htmlCardElement);card&&card.activateListeners(html)}get flags(){return this.data.flags}async assignObjects(){}async localCompute(){}async GMUpdate(){}async ExecuteGMUpdate(){const newData=await game.enhancedChatCardsLib.socket.executeAsGM("GMUpdate",this.toObject(),this._options,this.constructor.name,this.messageId);this.data=newData,await this.assignObjects()}async _onButton(event){event.preventDefault();const target=event.currentTarget;target.style.display="none";const action=target.dataset.action;let formUpdate,actionUpdate=!1;const card=target.closest(`.${ECC_CLASS}`);card?formUpdate=this._update(card):console.error(`Could not find a EEC class for this card: ${this.constructor.name}`);const originalDisplayStyle=target.style.display;(action||(console.warn("no action associated with this button"),formUpdate))&&(this[action]||(console.warn(`no ${action} action found for this card`),formUpdate))&&(this[action]&&(actionUpdate=await this[action]({event,updateCard:!1})),formUpdate||actionUpdate?await this.updateChatCard():target.style.display=originalDisplayStyle)}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onChange(event){if(this.options.submitOnChange)return this._onSubmit(event)}_onSubmit(event){const target=event.currentTarget;if("BUTTON"===target.tagName&&"action"in target.dataset)return;event.preventDefault();const card=target.closest(`.${ECC_CLASS}`);if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i],data=new FormDataExtended(form).object;for(const[key,value]of Object.entries(data)){getByPath(this,key)!==value&&(setByPath(this,key,value),updates=!0)}}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{attachObject:!0,classes:[ECC_CLASS],exclude:[],excludeStartWith:"_",submitOnChange:!0,speaker:ChatMessage.getSpeaker(),ooc:!1,compute:!0,GMUpdate:!1}}get objectDataString(){const saveData={data:this.data,options:this._options};return JSON.stringify(saveData,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(htmmlCard){if(!htmmlCard)return;if(!htmmlCard.dataset.eccClass)return;if(!htmmlCard.dataset.object)return;const cardData=JSON.parse(unescape(htmmlCard.dataset.object)),message=htmmlCard.closest(".message"),messageId=message?.dataset?.messageId;return await this.fromData(cardData.data,cardData.options,htmmlCard.dataset.eccClass,messageId)}static async fromData(data,options,cardClassName,messageId=void 0){const CardClass=game.enhancedChatCardsLib.types.get(cardClassName);if(!CardClass)return void console.error(`Unknown chat card type: ${cardClassName}`);const card=new CardClass(data,options);return messageId&&(card.messageId=messageId),await card.assignObjects(),card}setData(name){(name||"string"===$.type(name))&&setByPath(this,name,!0)}unsetData(name){(name||"string"===$.type(name))&&setByPath(this,name,!1)}toggleData(name){if(!name&&"string"!==$.type(name))return;setByPath(this,name,!getByPath(this,name))}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const name=target.dataset.flag?`data.flags.${target.dataset.flag}`:target.dataset.name;if(!name)return;const toggle=target.closest(".ecc-radio");if(toggle){const buttons=toggle.querySelectorAll(".ecc-switch");for(const b of buttons){const bName=b.dataset.flag?`data.flags.${b.dataset.flag}`:b.dataset.name;this.unsetData(bName)}this.setData(name)}else this.toggleData(name);const card=target.closest(`.${ECC_CLASS}`);this.options.submitOnChange&&card&&this._update(card),await this.updateChatCard()}}class _participant{constructor(data={}){this.data=data}_fetch(){if(!this._doc&&this.data.docUuid&&(this._doc=CoC7Utilities.getDocumentFromKey(this.data.docUuid)),!this._actor)if(this._doc)switch(this._doc.constructor?.name){case"TokenDocument":this._actor=this._doc.actor;break;case"CoCActor":this._actor=this._doc}else this._actor=CoC7Utilities.getActorFromKey(this.data.docUuid)}get actor(){return this._fetch(),this._actor}get isActor(){return this.hasActor||this.hasVehicle}get isActive(){return this.data.active||!1}get key(){return this.hasVehicle?this.vehicle.actorKey:this.hasActor?this.actor.actorKey:void 0}get icon(){return this.isActor?this.hasVehicle?this.vehicle.img:this.hasActor?this.actor.img:void 0:"systems/CoC7/assets/icons/question-circle-regular.svg"}get driver(){return this._driver||(this._driver=CoC7Utilities.getActorFromKey(this.data.docUuid)),this._driver}get vehicle(){return this.data.vehicleKey&&(this._vehicle=chatHelper.getActorFromKey(this.data.vehicleKey)),this._vehicle}get hasActor(){return!!this.actor}get hasVehicle(){return!!this.vehicle}get name(){return this.hasVehicle?this.vehicle.name:this.hasActor?this.actor.name:this.data.name||void 0}get mov(){return this.data.mov||(this.hasVehicle?this.data.mov=this.vehicle.mov:this.hasActor&&(this.data.mov=this.actor.mov)),this.data.mov&&(isNaN(Number(this.data.mov))?(this.data.hasValidMov=!1,this.data.mov=void 0):this.data.hasValidMov=!0),this.data.mov}get uuid(){return this.data.uuid}get hasMaxBonusDice(){return this.bonusDice>=2}get bonusDice(){return isNaN(this.data.bonusDice)||this.data.bonusDice<0||this.data.bonusDice>2?0:this.data.bonusDice}set bonusDice(x){isNaN(x)?ui.notifications.error("Bonus dice can Only be a number"):x>2?ui.notifications.error("Max 2 bonus dice"):x<0?ui.notifications.error("No negativ bonus dice"):this.data.bonusDice=x}get hp(){return this.data.hp||(this.data.hp=0),this.actor&&(this.data.hp=this.actor.hp),this.data.hp}set hp(x){this.data.hp=x,this.actor&&this.actor.setHp(x)}addBonusDice(){this.data.bonusDice>=2?ui.notifications.error("Already have max bonus dice"):this.data.bonusDice+=1}removeBonusDice(){this.data.bonusDice<=0?ui.notifications.error("Already have 0 bonus dice"):this.data.bonusDice-=1}resetBonusDice(){this.data.bonusDice=0}get hasBonusDice(){return this.hasOneBonusDice||this.hasTwoBonusDice}get hasOneBonusDice(){return this.bonusDice>=1}get hasTwoBonusDice(){return this.bonusDice>=2}get canAssist(){return this.assist?.length>0}get canBeCautious(){return!this.hasMaxBonusDice}get assist(){return this.data.assist||[]}get dex(){return this.data.dex||(this.hasVehicle&&this.hasDriver?this.data.dex=this.driver.characteristics.dex.value:this.hasActor&&(this.data.dex=this.actor.characteristics.dex.value)),this.data.dex&&(isNaN(Number(this.data.dex))?(this.data.hasValidDex=!1,this.data.dex=0):this.data.hasValidDex=!0),this.data.dex}get hasAGunReady(){return this.data.hasAGunReady||!1}get initiative(){let init=this.dex;return this.hasAGunReady&&(init+=50),init}get isChaser(){return!!this.data.chaser}get isPrey(){return!this.isChaser}get isValid(){return this.hasValidDex&&this.hasValidMov}get hasValidDex(){return!isNaN(Number(this.data.dex))}get hasValidMov(){return!isNaN(Number(this.data.mov))}get hasDriver(){return this.hasVehicle&&this.hasActor}get movAdjustment(){if(this.data.speedCheck?.rollDataString){const roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString);if(roll&&!roll.standby){if(roll.successLevel>=CoC7Check.successLevel.extreme)return 1;if(roll.failed)return-1}}return 0}get adjustedMov(){if(void 0!==this.mov&&!isNaN(Number(this.mov)))return Number(this.mov)+this.movAdjustment}get hasMovAdjustment(){return this.hasBonusMov||this.hasMalusMov}get hasBonusMov(){return this.data.movAdjustment>0}get hasMalusMov(){return this.data.movAdjustment<0}tooSlow(){this.data.excluded=!0}includeInChase(){this.data.excluded=!1,this.data.escaped=!1}escaped(){this.data.escaped=!0}set slowest(x){this.data.slowest=x}get slowest(){return this.data.slowest}set fastest(x){this.data.fastest=x}get fastest(){return this.data.fastest}calculateMovementActions(minMov){void 0===this.movementAction||void 0===this.adjustedMov||isNaN(minMov)?this.movementAction=0:this.movementAction=this.adjustedMov-minMov+1}set movementAction(x){this.data.movementAction=x}get movementAction(){return this.data.movementAction}set currentMovementActions(x){this.data.currentMovementActions=x}get currentMovementActions(){return this.data.currentMovementActions||0}get hasMaxMvtActions(){return this.currentMovementActions>=this.movementAction}get hasNoMvtActions(){return this.currentMovementActions<=0}addMovementActions(x=1){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}alterMovementActions(x){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}get movementActionArray(){const baseArray=Array(this.movementAction).fill("base");if(this.currentMovementActions>=0){for(let i=0;i<this.currentMovementActions;i++)baseArray[i]="base available";return baseArray}if(this.currentMovementActions<0){return Array(Math.abs(this.currentMovementActions)).fill("deficit").concat(baseArray)}}get cssClass(){const cssClasses=[];return this.isChaser?cssClasses.push("chaser"):cssClasses.push("prey"),this.data.excluded&&cssClasses.push("excluded","too_slow"),this.data.escaped&&cssClasses.push("escaped"),this.data.fastest&&cssClasses.push("fastest"),this.data.slowest&&cssClasses.push("slowest"),this.data.active&&cssClasses.push("active"),this.data.currentMovementActions<=0&&cssClasses.push("no-actions"),cssClasses.join(" ")}get speedCheck(){const check={};if(this.data.speedCheck?.name&&(check.name=this.data.speedCheck.name),this.data.speedCheck?.score&&(check.score=this.data.speedCheck.score),check.cssClasses="",this.data.speedCheck?.rollDataString&&(check.roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString),check.roll&&(check.roll.standby&&!check.roll.hasCard||(check.rolled=!0,check.inlineRoll=check.roll.inlineCheck.outerHTML,check.cssClasses+="rolled",check.roll.standby||(check.roll.successLevel>=CoC7Check.successLevel.extreme?check.modifierCss="upgrade":check.roll.failed&&(check.modifierCss="downgrade"),(check.roll.successLevel>=CoC7Check.successLevel.extreme||check.roll.failed)&&(check.hasModifier=!0))))),this.hasActor){check.options=[];for(const c of["con"]){const characteristic=this.actor.getCharacteristic(c);characteristic?.value&&check.options.push(characteristic.label)}for(const s of this.actor.driveSkills)check.options.push(s.name);for(const s of this.actor.pilotSkills)check.options.push(s.name);if(check.hasOptions=!!check.options.length,this.data.speedCheck?.id){let item=this.actor.find(this.data.speedCheck.id);if(!item){const gameItem=game.items.get(this.data.speedCheck.id);gameItem&&(item=this.actor.find(gameItem.name))}item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}else if(this.data.speedCheck?.name){const item=this.actor.find(this.data.speedCheck.name);item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}}else if(this.data.speedCheck?.id){const item=game.items.get(this.data.speedCheck.id);item&&"skill"===item.data?.type&&(check.ref=item,check.name=item.name,check.type="skill",check.isSkill=!0,check.refSet=!1,check.score=item.base)}else this.data.speedCheck?.name&&this.data.speedCheck?.score&&(check.name=this.data.speedCheck.name,check.score=this.data.speedCheck.score,check.refSet=!1);return check.canBeRolled=!0,check.rolled||check.score||(check.cssClasses+=" invalid",check.canBeRolled=!1),check.isValid=check.rolled&&!isNaN(check.score),check}}function sortByRoleAndDex(a,b){return!a&&b?1:!b&&a?-1:a||b?b.chaser&&!a.chaser?1:a.chaser&&!b.chaser?-1:a.dex-b.dex:0}class ChaseObstacleCard extends EnhancedChatCard{static get defaultOptions(){const options=foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/chat/cards/chase-obstacle.html",GMUpdate:!0});return options.classes.push("obstacle-card"),options}async getData(){const data=await super.getData();if(data.status=[],data.strings={},data.displayActorOnCard=game.settings.get("CoC7","displayActorOnCard"),data.status.push({name:game.i18n.localize("CoC7.ActionCost")+` :${this.data.totalActionCost}`}),data.card.breakableObstacle=data.data.obstacle?.barrier&&data.data.obstacle.hasHitPoints,data.card.validCheck=!1,data.data.states?.obstacleDefined&&(data.data.obstacle.hazard||data.data.obstacle.barrier&&!data.data.obstacle.hasHitPoints)&&(data.data.states.tryToNegotiate=!0,data.data.states.tryToBreak=!1,data.data.states.breakOrNegotiateDefined=!0),this.participant?.actor?(data.skill=this.participant.actor.find(data.data.obstacle.checkName),data.checkOptions=this.chase.getActorSkillsAndCharacteristics(this.data.participantUuid),data.skill?(data.validCheck=!0,data.validSkill=!0):data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)):(data.checkOptions=this.chase.allSkillsAndCharacteristics,data.dummyActor=!0,data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)),data.data.bonusDice||(data.data.bonusDice=0),data.data.bonusDice<2&&data.data.totalActionCost<data.data.movementAction&&(data.canTakeCautiousApproach=!0),data.customWeapon=!1,"0"===this.data.weaponChoice&&(data.customWeapon=!0),data.validCheck){let checkName,value;data.skill?(checkName=data.skill.value.name,value=data.skill.value.value):(checkName=data.data.obstacle.checkName,value=data.data.checkThreshold),data.strings.checkRollRequest=game.i18n.format("CoC7.AskRoll",{name:checkName,value}),0!==data.data.bonusDice&&(data.data.bonusDice>0?data.strings.checkRollRequest+=` (+${data.data.bonusDice})`:data.strings.checkRollRequest+=` (${data.data.bonusDice})`)}if(data.data.states?.obstacleDefined){if(data.strings.obstacleDefined=game.i18n.format("CoC7.FacingObstacle",{type:data.data.obstacle.barrier?game.i18n.localize("CoC7.ABarrier"):game.i18n.localize("CoC7.AHazard")}),data.data.obstacle.name&&(data.strings.obstacleDefined+=` (${data.data.obstacle.name})`),data.data.states.canAskRoll=!0,data.data.obstacle.barrier&&(data.status.push({name:game.i18n.localize("CoC7.Barrier")}),data.data.obstacle.hasHitPoints&&data.status.push({name:game.i18n.localize("CoC7.Breakable")})),data.data.obstacle.hazard&&data.status.push({name:game.i18n.localize("CoC7.Hazard")}),this.data.states.tryToNegotiate&&(data.validCheck?data.validSkill||data.status.push({name:game.i18n.localize("CoC7.NoValidSkill"),css:"warning"}):(data.status.push({name:game.i18n.localize("CoC7.NoValidCheck"),css:"error"}),data.strings.EnterValueTitle=game.i18n.format("CoC7.SkillSelectBase",{name:data.data.obstacle.checkName}),data.data.checkThreshold||(data.data.states.canAskRoll=!1))),this.data.states.tryToBreak){let damageStatus=game.i18n.localize("CoC7.BreakDown");this.data.objects?.obstacleDamageRoll?.total&&(damageStatus+=` : ${this.data.objects.obstacleDamageRoll.total}`),data.status.push({name:damageStatus}),this.data.states.obstacleDamageRolled&&(this.data.objects?.obstacleDamageRoll?.total<=0?data.strings.obstacleDamage=game.i18n.localize("CoC7.NoDamageDealt"):(data.inlineDamageRoll=createInlineRoll(this.data.objects.obstacleDamageRoll)?.outerHTML,data.strings.obstacleDamage=game.i18n.format("CoC7.DamageDealt",{value:data.inlineDamageRoll})))}if(this.data.states.tryToNegotiate&&data.status.push({name:game.i18n.localize("CoC7.Negotiate")}),this.data.totalCautiousApproach){const cautiousStatus={name:game.i18n.localize("CoC7.Cautious"),css:""};this.data.totalCautiousApproach>1?(cautiousStatus.css="strong",data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingVeryCautious")):data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingCautious"),this.data.flags.consumeBonusDice&&(cautiousStatus.css+=" consume"),data.status.push(cautiousStatus)}this.data.objects?.check&&(this.data.obstacle.hazard&&(this.data.movePlayer=!0),this.data.objects.check.passed?(void 0===this.data.movePlayer&&(this.data.movePlayer=!0),data.strings.obstaclePassed=game.i18n.localize("CoC7.ObstaclePassed"),this.data.objects.check.luckSpent&&(data.strings.obstaclePassed+=` (${game.i18n.localize("CoC7.GotLucky")})`),data.status.push({name:game.i18n.localize("CoC7.Success"),css:"success"})):this.data.objects.check.isFumble?(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFumble"),data.status.push({name:game.i18n.localize("CoC7.Fumble"),css:"fumble"})):(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFail"),data.status.push({name:game.i18n.localize("CoC7.Failure"),css:"failure"})))}if(this.data.states.playerActionDefined&&(this.data.obstacle.hazard?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToNegotiateHazard"):this.data.obstacle.barrier&&(this.data.states.tryToNegotiate?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToGetPastBarriers"):this.data.states.tryToBreak&&(data.strings.playerIntentions=game.i18n.localize("CoC7.TryToBreak")))),this.data.states.checkRolled&&(this.data.states.cardResolved?data.htmlCheck=await(this.data.objects.check.inlineCheck?.outerHTML):data.htmlCheck=await this.data.objects.check.getHtmlRoll()),this.data.states.cardResolved){data.playerDamageTaken=!1,data.obstalceDefinitionChanged=!1;this.listChanges().changes&&(data.obstalceDefinitionChanged=!0),this.data.obstacle.hasDamage&&this.data.objects?.check?.isFailure&&(data.playerDamageTaken=!0,data.inlineDamageTakenRoll=createInlineRoll(this.data.objects.failedDamageRoll)?.outerHTML,0===data.data.totalPlayerDamageTaken?data.strings.damageTaken=game.i18n.localize("CoC7.YouTakeNoDamage"):data.strings.damageTaken=game.i18n.format("CoC7.YouTakeSomeDamage",{amount:data.data.totalPlayerDamageTaken}),data.status.push({name:game.i18n.localize("CoC7.TotalDamage")+` :${data.data.totalPlayerDamageTaken}`})),this.data.obstacle.hasActionCost&&this.data.obstacle.hazard&&this.data.objects?.check?.isFailure&&(data.actionLost=!0,data.strings.actionLost=game.i18n.localize("CoC7.YouLostTime"),data.inlineActionLostRoll=createInlineRoll(this.data.objects.failedActionRoll)?.outerHTML),data.status.push({name:game.i18n.localize("CoC7.CardResolved")})}return this.data.states.closed&&(this.data.movePlayer?data.strings.finalOutcome=game.i18n.localize("CoC7.MoveToLocation"):data.strings.finalOutcome=game.i18n.localize("CoC7.DontMoveToLocation")),data}async GMUpdate(){if(game.user.isGM){if(this.data.states.cardResolved){if(this.data.objects?.failedDamageRoll?.total){const totalDamage=this.data.objects.failedDamageRoll.total,armorValue=this.data.flags.ignoreArmor?0:this.data.armor;CoC7Utilities.isFormula(armorValue)?this.data.armor=(await new Roll(armorValue).roll({async:!0})).total:isNaN(Number(armorValue))||(this.data.armor=Number(armorValue)),void 0===this.data.totalPlayerDamageTaken&&(this.data.totalPlayerDamageTaken=totalDamage-this.data.armor,this.data.totalPlayerDamageTaken<0&&(this.data.totalPlayerDamageTaken=0))}void 0===this.data.reflectObstaleChanges&&(this.data.reflectObstaleChanges=!0),void 0===this.data.movePlayer&&(this.data.movePlayer=(this.data.states.tryToNegotiate||this.data.obstacle.hazard)&&!this.data.states.failedConsequencesRolled),this.data.obstacle.barrier&&this.data.obstacle.hasHitPoints&&this.data.objects?.obstacleDamageRoll?.total&&(void 0===this.data.totalObstacleDamage&&(this.data.totalObstacleDamage=this.data.objects.obstacleDamageRoll.total),void 0===this.data.flags.obstacleDestoyed&&(this.data.flags.obstacleDestoyed=this.data.obstacle.HitPoints-this.data.totalObstacleDamage<=0))}this.data.states.closed&&(this.data.movementActionArray=foundry.utils.duplicate(this.participant.movementActionArray),this.data.EEC_ACTION={detachData:!0})}else console.error("CoC7: GMUpdate called from non GM user")}async localCompute(){}async assignObjects(){this.data.objects?.check&&"Object"===this.data.objects.check?.constructor?.name&&(this.data.objects.check=CoC7Check.fromData(this.data.objects.check)),this.data.objects?.obstacleDamageRoll&&"Object"===this.data.objects.obstacleDamageRoll?.constructor?.name&&(this.data.objects.obstacleDamageRoll=Roll.fromData(this.data.objects.obstacleDamageRoll)),this.data.objects?.failedDamageRoll&&"Object"===this.data.objects.failedDamageRoll?.constructor?.name&&(this.data.objects.failedDamageRoll=Roll.fromData(this.data.objects.failedDamageRoll)),this.data.objects?.failedActionRoll&&"Object"===this.data.objects.failedActionRoll?.constructor?.name&&(this.data.objects.failedActionRoll=Roll.fromData(this.data.objects.failedActionRoll))}async initialize(){this.chase&&void 0!==this.chase.activeParticipantData?.uuid&&(void 0===this.data&&(this.data={}),void 0===this.data.states&&(this.data.states={}),this.data.obstacle=this.location?.obstacleDetails,this.data.participantUuid=this.chase.activeParticipantData.uuid,this.participantData?.bonusDice>0&&(this.data.bonusDice=this.participantData.bonusDice,this.data.flags.consumeBonusDice=!0,this.data.flags.hasBonusDice=this.participant.hasBonusDice),this.data.movementActionArray=foundry.utils.duplicate(this.participant.movementActionArray),this.data.movementAction=this.participant.currentMovementActions,this.data.totalActionCost=0)}get participant(){if(this.participantData)return new _participant(this.participantData)}get participantData(){if(this.chase&&this.data.participantUuid)return this.chase.getParticipantData(this.data.participantUuid)}get location(){if(this.chase)return this.chase.getLocationData(this.data.locationUuid)}get obstacle(){if(this.location)return this.location.obstacleDetails}get chase(){if(this.data.chaseUuid)return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.data.chaseUuid)),this._chase}get roll(){let rollData;if(this.participant.actor&&this.data.obstacle.checkName){const actorSkill=this.participant.actor.find(this.data.obstacle.checkName);rollData=void 0!==actorSkill?actorSkill:{type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold}},rollData.actor={actorKey:this.participant.actor.id}}else this.data.obstacle.checkName&&this.data.checkThreshold&&(rollData={type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold},actor:{name:this.participant.name}});return rollData&&(rollData.diceModifier=this.data?.bonusDice||0,rollData.difficulty=CoC7Check.difficultyLevel.regular,rollData.denyPush=!0),rollData||void 0}get validFailedRolls(){if(!this.data.objects?.check?.isFailure)return!1;if(this.data.obstacle.hasDamage){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;if(!this.data.obstacle.failedCheckDamage)return!1;if(this.data.obstacle.failedCheckDamage&&!Roll.validate(damage))return!1}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;if(!this.data.obstacle.failedActionCost)return!1;if(this.data.obstacle.failedActionCost&&!Roll.validate(actionCost))return!1}return!0}get weaponsOptions(){const weapons=[];if(this.participant.actor?.itemTypes?.weapon?.forEach((w=>{let formula=w.data.data.range.normal.damage,db=this.participant.actor.db;db=null===db||0===Number(db)?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),w.data.data.properties.addb&&(formula+=db),w.data.data.properties.ahbd&&(formula=formula+db+"/2"),weapons.push({name:`${w.data.name} (${formula})`,damage:formula,uuid:w.uuid})})),weapons.sort(CoC7Utilities.sortByNameKey),!weapons.find((w=>w.name.toUpperCase().startsWith(game.i18n.localize("CoC7.UnarmedWeaponName")?.toUpperCase())))){let db="";this.participant.actor&&(db=this.participant.actor.db,db&&!db.startsWith("-")&&(db="+"+db),null!==db&&0!==Number(db)||(db="")),weapons.unshift({name:`${game.i18n.localize("CoC7.UnarmedWeaponName")} (1D3${db})`,damage:`1D3${db}`,uuid:"unarmed"})}return weapons.push({name:game.i18n.localize("CoC7.Other"),damage:this.data?.customWeaponDamage||null,uuid:0}),weapons}get usedWeapon(){if(!this.data?.weaponChoice){if(!this.weaponsOptions)return;this.data||(this.data={}),this.data.weaponChoice=this.weaponsOptions[0].uuid}if(this.data.weaponChoice){const weapon=this.weaponsOptions.find((e=>e.uuid===this.data.weaponChoice));if(weapon)return weapon}}get inflictedDamageFormula(){if(this.usedWeapon){const weapon=this.usedWeapon;return weapon&&weapon.damage&&Roll.validate(weapon.damage)?weapon.damage:void 0}}get validObstacleDamage(){return!!(this.data.obstacle.hasHitPoints&&!isNaN(Number(this.data.obstacle.HitPoints))&&Number(this.data.obstacle.HitPoints)>0&&this.inflictedDamageFormula)}get strings(){const strings={};return strings.damageRollRequest=this.usedWeapon.name,strings}async validateCard(options){let loactionChanged,participantChaged=!1;const obstacleUpdate={obstacleDetails:{}},participantUpdate={};this.data.flags.obstacleDestoyed&&(loactionChanged=!0,obstacleUpdate.obstacle=!1,obstacleUpdate.obstacleDetails.hazard=!1,obstacleUpdate.obstacleDetails.barrier=!1);const diff=this.listChanges();if(diff.changes&&this.data.reflectObstaleChanges)for(const[key,value]of Object.entries(diff.obstacle))"type"!==key&&(obstacleUpdate.obstacleDetails[value.key]=value.new,loactionChanged=!0);if(this.data.totalObstacleDamage>0&&this.data.obstacle.hasHitPoints){let remainingHp=this.data.obstacle.HitPoints;remainingHp-=this.data.totalObstacleDamage,remainingHp<0&&(remainingHp=0),this.obstacle.HitPoints!==remainingHp&&(obstacleUpdate.obstacleDetails.HitPoints=remainingHp,this.data.obstacle.HitPoints=remainingHp,loactionChanged=!0)}if(this.data.totalPlayerDamageTaken>0&&(participantChaged=!0,this.participant.actor?await this.participant.actor.dealDamage(this.data.totalPlayerDamageTaken,{ignoreArmor:!0}):(participantUpdate.hp=this.participantData.hp,participantUpdate.hp-=this.data.totalPlayerDamageTaken,participantUpdate.hp<0&&(participantUpdate.hp=0))),this.data.totalActionCost>0&&(participantChaged=!0,participantUpdate.currentMovementActions=this.participantData.currentMovementActions,participantUpdate.currentMovementActions-=this.data.totalActionCost),void 0===this.data.flags.consumeBonusDice&&(this.data.flags.consumeBonusDice=!0),this.data.flags.consumeBonusDice?(participantChaged=!0,participantUpdate.bonusDice=0):isNaN(this.data.bonusDice)||this.data.bonusDice===this.participant.bonusDice||(participantUpdate.bonusDice=this.data.bonusDice),this.data.movePlayer){let targetLocation;targetLocation=this.data.forward?this.location:this.chase.getLocationShift(this.location.uuid,{skip:-1}),targetLocation.uuid&&await this.chase.moveParticipantToLocation(this.participantData.uuid,targetLocation.uuid,{scrollToLocation:!0,activateLocation:!1,render:!1})}return loactionChanged&&await this.chase.updateLocation(this.location.uuid,obstacleUpdate,{render:!1}),participantChaged&&await this.chase.updateParticipant(this.participantData.uuid,participantUpdate,{render:!1}),this.data.states.closed=!0,await this.chase.activateNextParticipantTurn(),!0}async defineObstacle(options){return this.data.states||(this.data.states={}),this.data.states.obstacleDefined=!0,!0}async tryToNegotiateObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!0,this.data.states.tryToBreak=!1,!0}async tryToBreakDownObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!0,!0}async cancelObstacleDefinition(options){return this.data.states.obstacleDefined=!1,this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0}async cancelBreakOrPassChoice(options){return this.data.obstacle.hasHitPoints?(this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0):this.cancelObstacleDefinition()}async requestRoll(options){return this.data.states.playerActionDefined=!0,!0}async takeCautiousApproach(options){return this.data.totalCautiousApproach||(this.data.totalCautiousApproach=0),this.data.totalCautiousApproach+=1,this.data.bonusDice+=1,this.data.totalActionCost+=1,this.data.flags.consumeBonusDice||(this.data.flags.consumeBonusDice=!0),this.data.flags.hasBonusDice||(this.data.flags.hasBonusDice=!0),this.data.movementAction<=this.data.totalActionCost&&(this.data.flags.consumeBonusDice=!1,this.data.states.cardResolved=!0,this.data.movePlayer=!1),!0}async rollSkillCheck(options){const target=options.event.currentTarget;if(!target.classList.contains("disabled")){if(target.classList.toggle("disabled"),this.roll)return this.data.objects||(this.data.objects={}),this.data.objects.check=CoC7Check.createFromActorRollData(this.roll),!!this.data.objects.check&&(this.data.objects.check.denyPush=!0,await this.data.objects.check._perform({forceDSN:!0}),this.data.totalActionCost+=1,this.data.states.checkRolled=!0,target.classList.toggle("disabled"),this.data.objects.check.passed?(this.data.movePlayer=!0,this.data.states.cardResolved=!0):void 0===this.data.armor&&this.participant.actor&&(this.data.armor=this.participant.actor.data.data.attribs.armor.value||0),!0);ui.notifications.error(game.i18n.localize("CoC7.NothingToRoll"))}}async useLuck(options){return await CoC7Check.alter(this.data.objects.check,"useLuck",{target:options.event.currentTarget,update:!1}),this.data.objects.check.passed&&(this.data.states.cardResolved=!0,this.data.movePlayer=!0,this.data.totalActionCost+=1),!0}async rollFailConsequences(options){if(this.data.objects||(this.data.objects={}),this.data.obstacle.hasDamage&&this.data.objects.check?.isFailure){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;this.data.objects.failedDamageRoll=new Roll(damage),await this.data.objects.failedDamageRoll.evaluate({async:!0})}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost&&this.data.objects.check?.isFailure){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;this.data.objects.failedActionRoll=new Roll(actionCost),await this.data.objects.failedActionRoll.evaluate({async:!0}),this.data.totalActionCost+=this.data.objects.failedActionRoll.total-1}return this.data.states.failedConsequencesRolled=!0,this.data.states.cardResolved=!0,!0}async askRollObstacleDamage(options){return this.data.states.playerActionDefined=!0,!0}async rollObstacleDamage(options){return this.data.objects||(this.data.objects={}),this.data.objects.obstacleDamageRoll=new Roll(this.usedWeapon?.damage),await this.data.objects.obstacleDamageRoll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.data.objects.obstacleDamageRoll),this.data.states.obstacleDamageRolled=!0,this.data.totalActionCost+=1,this.data.states.cardResolved=!0,!0}listChanges(validate=!1){const diff={obstacle:{},player:{},changes:!1},names={barrier:game.i18n.localize("CoC7.Type"),hazard:game.i18n.localize("CoC7.Type"),hasHitPoints:game.i18n.localize("CoC7.Breakable"),HitPoints:game.i18n.localize("CoC7.HitPoints"),hasActionCost:game.i18n.localize("CoC7.ActionCost"),failedActionCost:game.i18n.localize("CoC7.ActionCost"),hasDamage:game.i18n.localize("CoC7.FightBack"),failedCheckDamage:game.i18n.localize("CoC7.WeaponDamage"),checkName:game.i18n.localize("CoC7.Check"),name:game.i18n.localize("CoC7.Name")};validate&&!this.data.validation&&(this.data.validation={});const newObstacle=foundry.utils.diffObject(this.obstacle,this.data.obstacle);for(const[key]of Object.entries(newObstacle))""===newObstacle[key]&&null===this.obstacle[key]||!isNaN(Number(newObstacle[key]))&&Number(newObstacle[key])===this.obstacle[key]||(diff.changes=!0,diff.obstacle[key]={old:this.obstacle[key],new:newObstacle[key],name:names[key],key},validate&&(this.data.validation[key]=!0));return diff}}class CoC7Chase extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/running-solid.svg"),super(data,context),this.context=context}get participants(){const pList=[],preys=this.system.participants.filter((p=>!p.chaser)).map((p=>new _participant(p))),chasers=this.system.participants.filter((p=>p.chaser)).map((p=>new _participant(p)));return this.system.participants.forEach((p=>{p.assist=[],p.chaser?p.assist=chasers.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name}))):p.assist=preys.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name})));const particpant=new _participant(p);pList.push(particpant)})),pList}get participantsObject(){const participants=this.participants;return participants.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),participants}get activeParticipantData(){return this.system.participants.find((p=>p.active))}get activeActor(){const p=this.activeParticipantData;if(p)return p.docUuid?CoC7Utilities.getActorFromKey(p.docUuid):void 0}get participantsByAdjustedMov(){const pList=this.actualParticipants.sort(((a,b)=>a.adjustedMov-b.adjustedMov));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get participantsByInitiative(){const pList=this.actualParticipants.sort(((a,b)=>b.initiative-a.initiative));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get preys(){return this.participants.filter((p=>!p.isChaser&&p.isValid))||[]}get chasers(){return this.participants.filter((p=>p.isChaser&&p.isValid))||[]}get allHaveValidMov(){return this.participants.every((e=>e.hasValidMov))}get allHaveSpeedRoll(){return this.participants.every((p=>p.speedCheck?.rolled))}getParticipantLocation(participantUuid){if(!this.system.locations?.list?.length)return;if(!this.started)return;const location=this.locations.find((l=>{const lp=l.participants?.find((p=>participantUuid===p.uuid));return!!lp}));return location||void 0}getParticipantData(participantUuid){const participant=this.system.participants.find((p=>participantUuid===p.uuid));if(participant)return foundry.utils.duplicate(participant)}getParticipant(participantUuid){const participantData=this.getParticipantData(participantUuid);if(participantData)return new _participant(participantData)}get nextActiveParticipant(){if(this.started)return this.participantsByInitiative.find((p=>p.data.currentMovementActions>0))}get slowestPrey(){const preys=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isPrey));if(preys.length>0)return preys[0]}get fastestChaser(){const chasers=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isChaser));if(chasers.length>0)return chasers.slice(-1).pop()}get actualParticipants(){const slowestPrey=this.slowestPrey,fastestChaser=this.fastestChaser;let pList=this.participants;return!this.system.includeLatecomers&&slowestPrey&&(pList=pList.filter((p=>p.isPrey||p.isChaser&&p.adjustedMov>=slowestPrey.adjustedMov))),!this.system.includeEscaped&&fastestChaser&&(pList=pList.filter((p=>p.isChaser||p.isPrey&&p.adjustedMov<=fastestChaser.adjustedMov))),pList}get slowestParticipant(){const pList=this.participantsByAdjustedMov;if(pList.length>0)return pList[0]}async updateParticipants(list,{render=!0}={}){const participantsData=this.cleanParticipantList(list);return await this.update({"system.participants":participantsData},{render})}async updateParticipant(particiantUuid,updateData,{render=!0}={}){const participants=foundry.utils.duplicate(this.system.participants),update=foundry.utils.duplicate(updateData),participantIndex=participants.findIndex((p=>particiantUuid===p.uuid));-1!==participantIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(participants[participantIndex],update,{overwrite:!0}),await this.updateParticipants(participants,{render}))}cleanParticipantList(list){const participantsData=list||foundry.utils.duplicate(this.system.participants);return list.forEach((p=>{let data;data="_participant"===p.constructor.name?p.data:p;const index=this.findIndex(participantsData,data.uuid);-1===index?(participantsData.push(data),ui.notifications.warn(game.i18n.localize("CoC7.ParticipantDataMissing"))):participantsData[index]=data})),participantsData}async assistParticipant(assistantUuid,beneficiaryUuid,{useMovementActions=!0,render=!0}={}){const assistant=this.getParticipant(assistantUuid),beneficiary=this.getParticipant(beneficiaryUuid),participantsData=foundry.utils.duplicate(this.system.participants),assistantIndex=participantsData.findIndex((p=>assistantUuid===p.uuid)),beneficiaryIndex=participantsData.findIndex((p=>beneficiaryUuid===p.uuid));if(assistant&&beneficiary)if(beneficiary.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorBeneficiaryAtMaxBonus",{name:beneficiary.name}));else{if(useMovementActions){if(assistant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid,actions:assistant.currentMovementActions}));assistant.alterMovementActions(-1),participantsData[assistantIndex]=foundry.utils.duplicate(assistant.data)}beneficiary.addBonusDice(),participantsData[beneficiaryIndex]=foundry.utils.duplicate(beneficiary.data),await this.update({"system.participants":participantsData},{render})}else ui.notifications.error(game.i18n.localize("CoC7.ParticipantNotFound"))}async toggleBonusDice(participantUuid,diceNumber,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.bonusDice>=diceNumber?participant.removeBonusDice():participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async cautiousApproach(participantUuid,{useMovementActions=!0,render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(participant.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorParticipantAtMaxBonus",{participantUuid}));else{if(useMovementActions){if(participant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(-1)}participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}}async alterParticipantMovementAction(participantUuid,count,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.alterMovementActions(count),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async activateNextParticipantTurn({scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const activeParticipant=this.nextActiveParticipant,options={scrollToLocation,activateLocation,render,html};return activeParticipant?this.activateParticipant(activeParticipant.uuid,options):this.activateParticipant(void 0,options)}async activateParticipant(participantUuid,{scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const dataUpdate=this.getActivateParticipantUpdateData(participantUuid,{scrollToLocation,activeLocation:activateLocation,html});await this.update(dataUpdate,{render})}getActivateParticipantUpdateData(participantUuid,{scrollToLocation=!0,activateLocation=!0,html=null}={}){const pUuid=participantUuid,participantsDataUpdate={},participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{delete p.active,pUuid&&pUuid===p.uuid&&(p.active=!0)})),participantsDataUpdate["system.participants"]=participants;const participantLocation=this.getParticipantLocation(pUuid);let locationsDataUpdate=null;return participantLocation?activateLocation?locationsDataUpdate=this.getActivateLocationUpdateData(participantLocation.uuid,{scrollToLocation,html}):scrollToLocation&&(locationsDataUpdate={},locationsDataUpdate["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,locationsDataUpdate["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(participantLocation.uuid,{html})):locationsDataUpdate=this.getActivateLocationUpdateData(void 0,{scrollToLocation}),locationsDataUpdate?foundry.utils.mergeObject(participantsDataUpdate,locationsDataUpdate):participantsDataUpdate}activeParticipantObstacleCheck(locationUuid,{moveParticipant=!0}={}){new ChaseObstacleCard({chaseUuid:this.uuid,locationUuid,moveParticipant,forward:locationUuid!==this.activeLocation.uuid}).toMessage()}async progressToNextRound({render=!0}={}){const participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{p.currentMovementActions<p.movementAction&&(p.currentMovementActions+=p.movementAction,p.currentMovementActions>p.movementAction&&(p.currentMovementActions=p.movementAction))})),await this.updateParticipants(participants,{render:!1}),this.activateNextParticipantTurn({render})}async updateRoll(rollString){if(game.user.isGM){const roll=CoC7Check.fromRollString(rollString),participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[],index=participants.findIndex((p=>p.rollUuid===roll.uuid));index>=0&&(participants[index].speedCheck.rollDataString=roll.JSONRollString,await this.update({"system.participants":participants}))}else{const data={data:rollString,type:"invoke",method:"updateRoll",item:this.uuid};game.socket.emit("system.CoC7",data)}}get locations(){const locations=this.started?this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[]:this.initTrack;return this.processLocations(locations),locations}getLocationData(locationUuid,{duplicateData=!0}={}){return(duplicateData?foundry.utils.duplicate(this.locations):this.locations).find((l=>locationUuid===l.uuid))}processLocations(locations){if(locations?.length){locations[0].first=!0;for(let index=0;index<locations.length;index++){const classes=[],location=locations[index];location.name||classes.push("empty"),location.active&&classes.push("active"),location.init&&!this.started&&classes.push("init"),location.cssClasses=classes.join(" ")}locations.length>1&&(locations[locations.length-1].last=!0),locations.forEach((l=>{if(l.participants&&l.participants.length){l.participants=l.participants.filter((p=>!(null===p)));for(let i=0;i<l.participants.length;i++){const elem=l.participants[i];let p;"string"==typeof elem||elem instanceof String?p=this.system.participants.find((p=>elem===p.uuid)):"_participant"===elem?.constructor?.name?(p=void 0,ui.notifications.warn(game.i18n.localize("CoC7.ParticipantAlreadyProcessed"))):p=void 0,void 0!==p?l.participants[i]=new _participant(p):console.error("Undefined paticipant while processing participants array")}l.participants.sort(sortByRoleAndDex)}}))}}get initTrack(){if(!this.system.locations.list||0===this.system.locations.list.length)return;const locations=[],init=this.startingLine;let locationsIndexStart,initIndexStart,locationsLength;if(locationsIndexStart=init.length<=0||this.system.startingIndex>=init.length?0:init.length-this.system.startingIndex,initIndexStart=this.system.startingIndex<=0||this.system.startingIndex<=init.length?0:this.system.startingIndex-init.length,locationsLength=0===locationsIndexStart?this.system.locations.list.length:this.system.locations.list.length+locationsIndexStart,0!==init.length&&this.system.startingIndex<0)for(let index=0;index<Math.abs(this.system.startingIndex);index++)init.push({uuid:this.generateNewUuid(),init:!0,participants:[]});const chaseLocations=foundry.utils.duplicate(this.system.locations);for(let index=0;index<locationsLength;index++){let location={};const participants=[];index>=locationsIndexStart&&index-locationsIndexStart<chaseLocations.list.length&&(location=foundry.utils.duplicate(chaseLocations.list[index-locationsIndexStart]),location.init=!1,location.participants?.forEach((p=>{null!=p&&participants.push(p)}))),index>=initIndexStart&&index-initIndexStart<init.length&&(foundry.utils.mergeObject(location,init[index-initIndexStart],{overwrite:!1}),init[index-initIndexStart].participants?.forEach((p=>{null!=p&&participants.push(p)})),location.participants=participants),location.first=!1,location.end=!1,locations.push(location)}return locations}get startingLine(){const preys=this.system.includeEscaped?this.preys:this.preys?.filter((p=>!p.data.escaped)),chasers=this.system.includeLatecomers?this.chasers:this.chasers?.filter((c=>!c.data.excluded)),chaseTrack=[],chasersMinMov=this.findMinMov(chasers),chasersMaxMov=this.findMaxMov(chasers),preysMinMov=this.findMinMov(preys),preysMaxMov=this.findMaxMov(preys);if(-1!==chasersMinMov&&-1!==chasersMaxMov){for(let mov=chasersMinMov;mov<=chasersMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};chasers.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}for(let index=0;index<this.system.startingRange;index++)chaseTrack.push({uuid:this.generateNewUuid(),init:!0,participants:[]})}if(-1!==preysMinMov&&-1!==preysMaxMov)for(let mov=preysMinMov;mov<=preysMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};preys.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}return chaseTrack}async updateLocationsList(list,{render=!0}={}){const updatedList=this.cleanLocationsList(list);await this.update({"system.locations.list":updatedList},{render})}async updateLocation(locationUuid,updateData,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),update=foundry.utils.duplicate(updateData),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));-1!==locationIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(locations[locationIndex],update,{overwrite:!0}),await this.updateLocationsList(locations,{render}))}cleanLocationsList(list){const updatedList=foundry.utils.duplicate(list),partipantsUuidArray=this.system.participants.map((p=>p.uuid));return updatedList.forEach((l=>{if(delete l.cssClasses,delete l.first,delete l.last,delete l.end,l.participants&&l.participants.length){for(let i=0;i<l.participants.length;i++)l.participants=l.participants.filter((p=>!(null===p))),l.participants[i].data?.uuid&&(l.participants[i]=l.participants[i].data.uuid);l.participants=l.participants.filter((uuid=>partipantsUuidArray.includes(uuid)))}})),updatedList}async insertLocation(insertAtUuid,{shift=0,locData={},render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list);locations.forEach((l=>{delete l.active}));const locationIndex=locations.findIndex((l=>insertAtUuid===l.uuid));if(-1===locationIndex)return!1;const newLocationIndex=locationIndex+shift;if(newLocationIndex>locations.length)return!1;const newLocation=foundry.utils.duplicate(locData);return newLocation.uuid=this.generateNewUuid(),newLocation.init=locations[locationIndex].init,newLocation.active=!0,locations.splice(newLocationIndex,0,newLocation),await this.updateLocationsList(locations,{render})}async removeLocation(uuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>uuid===l.uuid));if(locations.splice(locationIndex,1),locations.forEach((l=>{delete l.active})),locations.length>0){let index=locationIndex-1;index<0&&(index=0),locations[index].active=!0}return await this.updateLocationsList(locations,{render})}async activateLocation(locationUuid,{scrollToLocation=!0,render=!0}={}){const updateData=this.getActivateLocationUpdateData(locationUuid,{scrollToLocation});await this.update(updateData,{render})}getClearActiveLocationUpdateData({scrollToLocation=!0,html=null}={}){const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=0,updateData["system.scroll.chaseTrack.to"]=-1),updateData}getActivateLocationUpdateData(locationUuid,{scrollToLocation=!0,html=null}={}){if(!locationUuid)return this.getClearActiveLocationUpdateData({scrollToLocation});const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active,locationUuid===l.uuid&&(l.active=!0)})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,updateData["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(locationUuid,{html})),updateData}get activeLocation(){if(!this.locations)return;const location=this.locations.find((l=>l.active));if(!location)return;location.participants?.length&&(location.hasParticipant=!0);const actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get previousLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(0===activeIndex)return;const location=this.locations[activeIndex-1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get nextLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(activeIndex===this.locations.length-1)return;const location=this.locations[activeIndex+1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}async locatorDropped(data){await this.setLocationCoordinates(data.locationUuid,data.x,data.y,data.scene)}async setLocationCoordinates(locationUuid,x,y,sceneId,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return locations[locationIndex].coordinates={x,y,scene:sceneId},await this.updateLocationsList(locations,{render})}async clearActiveLocationCoordinates({render=!0}={}){if(this.activeLocation)return await this.clearLocationCoordinates(this.activeLocation.uuid,{render})}async clearLocationCoordinates(locationUuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return delete locations[locationIndex].coordinates,await this.updateLocationsList(locations,{render})}async cutToTheChase(){if(this.allHaveSpeedRoll){if(this.actualParticipants?.length<2)ui.notifications.warn(game.i18n.localize("CoC7.NeedMin2Participants"));else if(this.allHaveValidMov){const participants=this.participants,minMov=this.findMinMov(this.actualParticipants);participants.forEach((p=>{p.calculateMovementActions(minMov),p.currentMovementActions=p.movementAction,p.bonusDice=0})),await this.updateParticipants(participants,{render:!1}),await this.updateLocationsList(this.locations,{render:!1}),await this.start()}}else ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"))}async restart(){const locations=this.locations.filter((l=>!l.init));for(let i=0;i<locations.length;i++)locations[i].participants&&(locations[i].participants=[]),locations[i].active&&delete locations[i].active;const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];for(let i=0;i<participantsData.length;i++)participantsData[i].active&&delete participantsData[i].active;await this.setchaseTrackScroll(0,0,{render:!1}),await this.updateLocationsList(locations,{render:!1}),await this.updateParticipants(participantsData,{render:!1}),await this.stop()}getLocationShift(locationUuid,{skip=1}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destinationIndex=locations.findIndex((l=>locationUuid===l.uuid))+skip;return 0===locations.length?null:destinationIndex>=locations.length?locations[locations.length-1]:destinationIndex<0?locations[0]:locations[destinationIndex]}async removeParticipant(participantUuid,{render=!0}={}){const p=this.getParticipant(participantUuid);await Dialog.confirm({title:game.i18n.localize("CoC7.RemoveParticipant"),content:`<p>${game.i18n.format("CoC7.RemoveParticipantHint",{name:p.name})}</p>`,yes:async()=>{const newParticipantsData=foundry.utils.duplicate(this.system.participants).filter((p=>participantUuid!==p.uuid)),locationsData=foundry.utils.duplicate(this.system.locations.list);locationsData.forEach((l=>{l.participants&&l.participants.length&&(l.participants=l.participants.filter((uuid=>participantUuid!==uuid)))})),await this.updateParticipants(newParticipantsData,{render:!1}),await this.updateLocationsList(locationsData,{render})}})}async addParticipant(participant,{render=!0,locationUuid=null,recalculateMovementActions=!0,update=!1}={}){const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];if(participant.data.chaseUuid&&delete participant.data.chaseUuid,participant.data.locationUuid&&delete participant.data.locationUuid,participant.data.update&&delete participant.data.update,!participant.uuid){let unique=!1;for(;!unique;)participant.data.uuid=foundry.utils.randomID(16),unique=0===participantsData.filter((p=>p.uuid===participant.uuid)).length}if(update){participant.currentMovementActions>participant.movementAction&&(participant.currentMovementActions=participant.movementAction);const index=participantsData.findIndex((p=>p.uuid===participant.uuid));participantsData[index]=participant.data}else participantsData.push(participant.data);if(await this.updateParticipants(participantsData,{render:render&&!this.started&&!this.recalculateMovementActions}),recalculateMovementActions){const slowest=this.slowestParticipant?.adjustedMov,participants=this.participants;participants.forEach((p=>p.calculateMovementActions(slowest))),await this.updateParticipants(participants,{render:render&&!this.started})}if(this.started&&!participant.data.escaped&&!participant.data.excluded){const locationsData=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];0===locationsData.length&&ui.notifications.error(game.i18n.localize("CoC7.ErrorEmptyLocationsList"));let locationIndex=locationsData.findIndex((l=>locationUuid===l.uuid));-1===locationIndex&&(locationIndex=0),locationsData[locationIndex].participants||(locationsData[locationIndex].participants=[]),-1===locationsData[locationIndex].participants.findIndex((p=>p===participant.uuid))&&locationsData[locationIndex].participants.push(participant.uuid),await this.updateLocationsList(locationsData,{render})}}async editParticipant(participantUuid,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){}async moveParticipant(participantUuid,locationMoved,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){let modified=!1;const locations=foundry.utils.duplicate(this.system.locations.list),originIndex=locations.findIndex((l=>l.participants?.includes(participantUuid)));let destinationIndex=originIndex+locationMoved;destinationIndex>locations.length-1&&(destinationIndex=locations.length-1),destinationIndex<0&&(destinationIndex=0);const totalMove=destinationIndex-originIndex,participant=this.getParticipant(participantUuid),participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(useMovementActions){if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid:this.participantUuid}));if(participant.currentMovementActions<Math.abs(totalMove))return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(0-Math.abs(totalMove)),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render:!1}),modified=!0}return 0!==totalMove&&(await this.moveParticipantToLocation(participantUuid,locations[destinationIndex].uuid,{render:!1}),modified=!0),activateParticipant&&(await this.activateParticipant(participantUuid,{scrollToLocation,activateLocation,render:!1}),modified=!0),activateLocation&&!activateParticipant&&(await this.activateLocation(locations[destinationIndex].uuid,{scrollToLocation,render:!1}),modified=!0),modified&&render&&await this.sheet.render(!0),totalMove}async moveParticipantToLocation(participantUuid,locationUuid,{scrollToLocation=!0,activateLocation=!0,animate=null,moveToken=!0,render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destination=locations.find((l=>locationUuid===l.uuid));if(!destination)return void console.error(`Failed to move ${participantUuid}. Location ${locationUuid} unknown`);const origin=locations.find((l=>l.participants?.includes(participantUuid)));if(!origin)return void console.error(`Failed to find ${participantUuid} in locations`);if(destination.participants||(destination.participants=[]),destination.participants.includes(participantUuid))return;destination.participants.push(participantUuid);const oldParticipantsList=origin.participants.filter((p=>participantUuid!==p));if(origin.participants=oldParticipantsList,moveToken&&destination.coordinates){const participant=this.getParticipant(participantUuid);let particpantDocument=CoC7Utilities.getDocumentFromKey(participant?.data?.docUuid);if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token)){const foundTokens=canvas.scene.tokens.filter((d=>d.actorLink&&d.actor?.id===particpantDocument.id));1===foundTokens.length&&(particpantDocument=foundTokens[0])}if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token))console.warn("No token associated with this actor");else if(destination.coordinates.scene!==game.scenes.viewed.uuid&&console.warn("Caution the scene is not the active scene"),particpantDocument.parent?.uuid!==destination.coordinates.scene)ui.notifications.error(game.i18n.localize("CoC7.ErrorTokenNotOnScene"));else{const scene=CoC7Utilities.getDocumentFromKey(destination.coordinates.scene);let x=destination.coordinates.x;const y=destination.coordinates.y;let targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize();const update=[];let foundFreeSpace=!1;for(;!foundFreeSpace;){const overlapingToken=scene.tokens.find((t=>t.id!==particpantDocument.id&&t.object.bounds.intersects(targetRect)));overlapingToken?(x=overlapingToken.object.bounds.right+1,targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize()):foundFreeSpace=!0}update.push({_id:particpantDocument.id,x,y});const showTokenMovement="boolean"==typeof animate?animate:this.system.showTokenMovement;await particpantDocument.parent.updateEmbeddedDocuments("Token",update,{animate:showTokenMovement})}}await this.updateLocationsList(locations,{render})}async setchaseTrackScroll({from,to=-1,render=!0}={}){await this.update({"system.scroll.chaseTrack.from":void 0===from?this.chaseTrackCurrentScrollPosition:from,"system.scroll.chaseTrack.to":void 0===to?this.chaseTrackCurrentScrollPosition:to},{render})}get chaseTrackCurrentScrollPosition(){const html=this.sheet?._element;if(!html)return-1;const chaseTrack=html[0].querySelector(".chase-track");return chaseTrack?chaseTrack.scrollLeft:-1}get chaseTrackActiveLocationScrollPosition(){return this.activeLocation?this.getChaseTrackLocationScrollPosition(this.activeLocation.uuid):-1}getChaseTrackLocationScrollPosition(locationUuid,{html=null}){const htmlElement=html||this.sheet?._element;if(!htmlElement||!htmlElement[0])return-1;const chaseTrack=htmlElement[0].querySelector(".chase-track");if(!chaseTrack)return-1;const activeLocationElement=chaseTrack.querySelector(`.chase-location[data-uuid="${locationUuid}"]`);if(!activeLocationElement)return-1;const leftScroll=activeLocationElement.offsetLeft+activeLocationElement.clientWidth/2-chaseTrack.clientWidth/2;return leftScroll<0?0:Math.floor(leftScroll)}findMinMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1}findMaxMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}get started(){return this.getFlag("CoC7","started")}async start(){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px","")),pCount=this.actualParticipants.length,width=Math.max((11.2*pCount+3)*remSize,40*remSize);this.sheet._tabs[0].active="setup",this.sheet.position.width=width,await this.setFlag("CoC7","started",!0),await this.activateNextParticipantTurn()}async stop(){return this.unsetFlag("CoC7","started")}generateNewUuid(){return foundry.utils.randomID(16)}getActorSkillsAndCharacteristics(participantUuid){const participant=this.getParticipant(participantUuid);if(!participant.actor)return;const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),participant.actor.skills.forEach((s=>list.push(s.name))),list}get activeActorSkillsAndCharacteristics(){const particicpantData=this.activeParticipantData;if(particicpantData)return this.getActorSkillsAndCharacteristics(particicpantData.uuid)}get allSkillsAndCharacteristics(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}get allSkillsAndCharacteristicsShort(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${c.label}`))),list.push(`${game.i18n.localize("CoC7.Luck")}`),list.push(`${game.i18n.localize("CoC7.SAN")}`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}}class CoC7Skill extends CoC7Item{constructor(data,context){if(void 0===data.system?.skillName){const skill=CoC7Skill.guessNameParts(data.name),{name,skillName,specialization,...newProperties}=skill;data.name=name,data.system||={};const properties={...data.system.properties,...newProperties};data.system={...data.system,skillName,specialization,properties}}super(data,context)}static guessNameParts(skillName){const output={combat:!1,fighting:!1,firearm:!1,name:skillName,skillName,special:!1,specialization:""},match=skillName.match(/^(.+)\s*\(([^)]+)\)$/);if(match){output.skillName=match[2].trim(),output.special=!0;const specialization=match[1].trim();output.specialization=specialization,output.name=specialization+" ("+output.skillName+")",output.fighting=specialization===game.i18n.localize("CoC7.FightingSpecializationName"),output.firearm=specialization===game.i18n.localize("CoC7.FirearmSpecializationName"),output.combat=output.fighting||output.firearm}return output}get hasActiveEffects(){return this.activeEffects.length>0}get activeEffects(){if(this.parent&&this.parent.effects){const effectKeyFull=`skill.${this.name}`.toLowerCase(),effectKeyShort=`skill.${this.system.skillName}`.toLowerCase();let changes=this.parent.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.data.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);return changes.sort(((a,b)=>a.priority-b.priority)),changes=changes.filter((e=>e.key.toLowerCase()===effectKeyShort||e.key.toLowerCase()===effectKeyFull)),changes}return[]}get itemIdentifier(){return this.name}get rawValue(){let value=0;return"character"===this.actor.type?(value=this.base,value+=this.system.adjustments?.personal?parseInt(this.system.adjustments?.personal):0,value+=this.system.adjustments?.occupation?parseInt(this.system.adjustments?.occupation):0,value+=this.system.adjustments?.experience?parseInt(this.system.adjustments?.experience):0,game.settings.get("CoC7","pulpRuleArchetype")&&this.system.adjustments?.archetype&&(value+=parseInt(this.system.adjustments?.archetype))):value=parseInt(this.system.value),isNaN(value)?null:value}get value(){const value=this.parent?.system.skills?.[`${this.itemIdentifier}`]?.value;return value||this.rawValue}async updateValue(value){if("character"===this.actor.type){const delta=parseInt(value)-this.rawValue,exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+delta;await this.update({"system.adjustments.experience":exp>0?exp:0})}else await this.update({"system.value":value})}async increaseExperience(x){if("skill"!==this.type)return null;if("character"===this.actor.type){const exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+parseInt(x);await this.update({"system.adjustments.experience":exp>0?exp:0})}}}class CoC7Vehicle extends CoCActor{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/jeep.svg"),super(data,context)}get rawBuild(){return this.build}get build(){const build=parseInt(this.system.attribs.build.value);return isNaN(build)?null:build}get hp(){if(null===this.system.attribs.build.current||void 0===this.system.attribs.build.current||""===this.system.attribs.build.current)return this.build;if(this.system.attribs.build.current>this.system.attribs.build.value)return this.build;const hp=parseInt(this.system.attribs.build.current);return isNaN(hp)?null:hp}get hpMax(){return this.build}get rawHpMax(){return this.build}async setHp(value){return value>this.build&&(value=this.build),await this.update({"system.attribs.build.current":value})}get rawDb(){return this.db}get db(){const db=parseInt(this.system.attribs.db?.value);return isNaN(db)?null:db}get rawMov(){return this.mov}get mov(){const mov=parseInt(this.system.attribs.mov?.value);return isNaN(mov)?null:mov}get mpMax(){return parseInt(this.system.attribs?.mp?.max)||0}get rawMpMax(){return this.mpMax}get sanMax(){return null}get rawSanMax(){return null}}class CoC7DecaderDie extends DiceTerm{constructor(termData){super(termData),this.faces=10}get total(){const total=super.total;return 10===total?0:10*total}static get DENOMINATION(){return"t"}}class CoC7DecaderDieOther extends CoC7DecaderDie{static get DENOMINATION(){return"o"}}const SETTINGS={pulpRules:{name:"",hint:"",scope:"world",config:!1,default:!1,type:Boolean},initiativeRule:{name:"SETTINGS.InitiativeRule",hint:"SETTINGS.InitiativeRuleHint",scope:"world",config:!1,default:"basic",type:String,choices:{basic:"SETTINGS.InitiativeRuleBasic",optional:"SETTINGS.InitiativeRuleOptional"},onChange:rule=>_setInitiativeOptions(rule)},developmentRollForLuck:{name:"SETTINGS.developmentRollForLuck",hint:"SETTINGS.developmentRollForLuckHint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDoubleMaxHealth:{name:"CoC7.Settings.PulpRules.DoubleMaxHealth.Name",hint:"CoC7.Settings.PulpRules.DoubleMaxHealth.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDevelopmentRollLuck:{name:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Name",hint:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleArchetype:{name:"CoC7.Settings.PulpRules.Archetype.Name",hint:"CoC7.Settings.PulpRules.Archetype.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleOrganization:{name:"CoC7.Settings.PulpRules.Organization.Name",hint:"CoC7.Settings.PulpRules.Organization.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleTalents:{name:"CoC7.Settings.PulpRules.Talents.Name",hint:"CoC7.Settings.PulpRules.Talents.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleFasterRecovery:{name:"CoC7.Settings.PulpRules.FasterRecovery.Name",hint:"CoC7.Settings.PulpRules.FasterRecovery.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreMajorWounds:{name:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Name",hint:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreAgePenalties:{name:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Name",hint:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Hint",scope:"world",config:!1,default:!1,type:Boolean},opposedRollTieBreaker:{name:"SETTINGS.OpposedRollTieBreaker",hint:"SETTINGS.OpposedRollTieBreakerHint",scope:"world",config:!1,default:!1,type:Boolean}};function _setInitiativeOptions(rule){let decimals=0;switch(rule){case"optional":decimals=2;break;case"basic":decimals=0}CONFIG.Combat.initiative={formula:null,decimals}}class CoC7GameRuleSettings extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:"SETTINGS.TitleRules",id:"rules-settings",template:"systems/CoC7/templates/system/rule-settings.html",width:550,height:"auto",closeOnSubmit:!0})}getData(){const options={},pulpRules={true:!1,false:!1};for(const[k,v]of Object.entries(SETTINGS))options[k]={value:game.settings.get("CoC7",k),setting:v},k.match(/^pulpRule.{2,}$/)&&(pulpRules[options[k].value]=!0);return options.pulpSelection=pulpRules.true?pulpRules.false?"some":"all":"none",options}static registerSettings(){for(const[k,v]of Object.entries(SETTINGS))game.settings.register("CoC7",k,v);_setInitiativeOptions(game.settings.get("CoC7","initiativeRule"))}activateListeners(html){super.activateListeners(html),html.find("#pulpRulesSelect").on("change",(event=>this.onChangePulpSelect(event))),html.find("input.pulpRulesSelect[type=checkbox]").on("click",(event=>this.onClickPulp(event))),html.find("button[name=reset]").on("click",(event=>this.onResetDefaults(event)))}onChangePulpSelect(event){const val=$(event.currentTarget).val();"none"!==val&&"all"!==val||$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){const checkbox=$(this);"none"===val?checkbox.prop("checked",!1):checkbox.prop("checked",!0)}))}onClickPulp(event){const pulpRules={true:!1,false:!1};$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){$(this).prop("checked")?pulpRules.true=!0:pulpRules.false=!0})),$("#pulpRulesSelect").val(pulpRules.true?pulpRules.false?"some":"all":"none")}async onResetDefaults(event){event.preventDefault();for await(const[k,v]of Object.entries(SETTINGS))await game.settings.set("CoC7",k,v?.default);return this.render()}async _updateObject(event,data){const pulpRules={true:!1,false:!1};for await(const key of Object.keys(SETTINGS))game.settings.set("CoC7",key,data[key]),key.match(/^pulpRule.{2,}$/)&&(pulpRules[data[key]]=!0);game.settings.set("CoC7","pulpRules",pulpRules.true&&!pulpRules.false)}}class CoC7ArchetypeSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))))}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&[type].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}async _onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/archetype.html",width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const coreCharacteristics=[];for(const[key,selected]of Object.entries(sheetData.data.system.coreCharacteristics))if(selected){const characName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);coreCharacteristics.push(characName)}sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedSuggestedOccupations=await TextEditor.enrichHTML(sheetData.data.system.suggestedOccupations,{async:!0,secrets:sheetData.editable}),sheetData.enrichedSuggestedTraits=await TextEditor.enrichHTML(sheetData.data.system.suggestedTraits,{async:!0,secrets:sheetData.editable}),sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey),sheetData.coreCharacteristicsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return coreCharacteristics.length&&(sheetData.coreCharacteristicsString+=coreCharacteristics.join(orString)),sheetData.itemProperties=[],sheetData.itemProperties.push(`${game.i18n.localize("CoC7.PulpTalents")}: ${sheetData.data.system.talents}`),sheetData.itemProperties.push(`${game.i18n.localize("CoC7.BonusPoints")}: ${sheetData.data.system.bonusPoints}`),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7BookSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/book/main.html",classes:["coc7","item","book"],width:500,height:"auto",resizable:!1,dragDrop:[{dragSelector:".spells",dropSelector:null}],scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.initialReading=this.item.system.initialReading,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.spellsLearned=this.spellsLearned,sheetData.exhausted=!1!==await this.item.checkExhaustion(),sheetData.studyCompleted=this.item.system.study.progress===this.item.system.study.necessary,sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.spellListEmpty=0===this.item.system.spells.length,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedContent=await TextEditor.enrichHTML(sheetData.data.system.content,{async:!0,secrets:sheetData.editable}),sheetData}get spellsLearned(){let amount=0;const spells=this.item.system.spells;for(const spell of spells)spell.system.learned&&amount++;return`${amount} / ${spells.length}`}activateListeners(html){super.activateListeners(html),html.find("#attempt-initial-reading").click((event=>{event.preventDefault(),this.item.attemptInitialReading()})),html.find(".delete-spell").click((event=>this._onDelete(event))),html.find(".edit-spell").click((event=>this._onSpellDetail(event))),html.find(".spell-name").click((event=>this._onSpellDetail(event))),html.find(".teach-spell").click((event=>{const id=$(event.currentTarget).parents("li").data("id");this.item.attemptSpellLearning(id)})),html.find('[name="system.study.necessary"]').change((event=>{const value=parseInt(event.currentTarget.value);this.item.changeProgress("reset",value)})),html.find("#increase-progress").click((()=>{this.item.changeProgress("increase")})),html.find("#decrease-progress").click((()=>{this.item.changeProgress("decrease")})),html.find(".add-other-gains").click((event=>{this.modifyOthersGains(event,"add")})),html.find(".change-other-gains").change((event=>{this.modifyOthersGains(event,"change")})),html.find("#redo-full-study").click((()=>{this.item.redoFullStudy()})),html.find(".remove-other-gains").click((event=>{this.modifyOthersGains(event,"remove")})),html.find(".option").click((event=>this.modifyType(event)))}async _onSpellDetail(event){event.preventDefault();const index=$(event.currentTarget).parents("li").data("index");return await this.item.spellDetail(index)}async _onDelete(event){if(!game.user.isGM)return;event.preventDefault();const index=$(event.currentTarget).parents("li").data("index"),spells=this.item.system.spells?foundry.utils.duplicate(this.item.system.spells):[];return index>=0&&spells.splice(index,1),await this.item.update({"system.spells":spells})}async _onDrop(event,type="spell"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),spells=[];for(const item of dataList)item&&["skill","spell"].includes(item.type)&&("spell"===item.type?spells.push(item):"skill"===item.type&&this.item.system.type.other&&this.modifyOthersGains(null,"add",{name:item.name}));await this.item.addSpells(spells)}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}async modifyOthersGains(event,mode,options={}){let index=null,element=null;event&&(event.preventDefault(),element=$(event.currentTarget),index=element.parents("tr").data("index"));const skills=this.item.system.gains.others?foundry.utils.duplicate(this.item.system.gains.others):[];switch(mode){case"add":skills.push({name:options.name||game.i18n.localize("CoC7.NewSkillName"),value:"development"});break;case"change":skills[index]={name:element.is("input")?element.val():skills[index].name,value:element.is("select")?element.val():skills[index].value};break;case"remove":index>=0&&skills.splice(index,1)}return await this.item.update({"system.gains.others":skills})}}class CoC7ContainerSheet extends ActorSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","storage"],template:"systems/CoC7/templates/actors/storage-sheet.html",width:672,height:765,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"items"}]})}async _onDrop(event){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if(!this.options.editable)return;const items=this.actor.items.toObject()||[];for(const item of dataList)item&&item.system&&["book","item","spell","weapon"].includes(item.type)&&items.push(item.toObject());await this.actor.update({items})}onCloseSheet(){}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.isKeeper=game.user.isGM,sheetData.editable=this.isEditable,sheetData.itemsByType={},sheetData.items){for(const item of sheetData.items)Object.prototype.hasOwnProperty.call(sheetData.itemsByType,item.type)||(sheetData.itemsByType[item.type]=[]),sheetData.itemsByType[item.type].push(item);for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey)}return sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryWeapons=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"weapon")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryWeapons,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".item-edit").click((ev=>{const li=$(ev.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)})),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".show-detail").click(this._onItemSummary.bind(this)),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".lock").click(this._onLockClicked.bind(this))}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(message.actorTo=value)}}),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}async _onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=await item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").slideToggle(200)}}class CoC7ChaseParticipantImporter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:game.i18n.localize("CoC7.AddActorToChase"),template:"systems/CoC7/templates/apps/chase-participant-importer.html",classes:["coc7","dialog","chase-participant-importer"],editable:!0,resizable:!1,submitOnChange:!0,closeOnSubmit:!1,width:300,height:"auto"})}activateListeners(html){super.activateListeners(html);new DragDrop({dropSelector:".form-container",permissions:{drop:game.user.isGM},callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);new DragDrop({dragSelector:".chase-token",permissions:{dragstart:game.user.isGM},callbacks:{dragstart:this._onTokenSelectorDragStart.bind(this)}}).bind(html[0]),html.find(".reset-participant").click((async()=>{this.object={},this._actor=null,await this.render(!0)})),html.find(".food-chain").click((async()=>{this.object.chaser=!this.object.chaser,await this.render(!0)})),html.find("[data-action]").click(this._onAction.bind(this))}async _onTokenSelectorDragStart(event){const data={type:"getToken",appId:this.appId,callBack:"addTokenToChase"};event.dataTransfer.setData("text/plain",JSON.stringify(data))}async getData(){if(!this.object.initiative){const init=CoCActor.getCharacteristicDefinition().find((c=>"dex"===c.key));this.object.initiative=init.label}if(!this.object.speedCheck){const speedCheck=CoCActor.getCharacteristicDefinition().find((c=>"con"===c.key));this.object.speedCheck={name:speedCheck.label}}this.validateParticipant();const data=await super.getData();if(data.participant=new _participant(this.object),data.object.speedCheck.name&&this.actor){const speedCheck=this.actor.find(data.object.speedCheck.name);speedCheck?(data.object.speedCheck.score=speedCheck.value.value,data.speedCheckReadOnly=!0):data.participant.speedCheck.score&&!this.object.speedCheck?.score&&(data.object.speedCheck.score=data.participant.speedCheck.score)}if(data.object.initiative&&this.actor){const initiative=this.actor.find(data.object.initiative);initiative?(data.object.dex=initiative.value.value,data.initReadOnly=!0):data.object.dex=data.participant.initiative}return data.actor=this.actor,data.chase=this.chase,data.data=this.data,data.optionsList={},this.chase&&(data.skillsAndCharacteristicsList=this.chase.allSkillsAndCharacteristicsShort),this.actor&&(data.skillsAndCharacteristicsList=[],CoCActor.getCharacteristicDefinition().forEach((c=>data.skillsAndCharacteristicsList.push(`${c.label}`))),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.Luck")}`),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.SAN")}`),this.actor.skills.forEach((s=>data.skillsAndCharacteristicsList.push(s.name)))),data}get chase(){return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.object.chaseUuid)),this._chase}get actor(){return this.object.docUuid?(this._actor||(this._actor=CoC7Utilities.getActorFromKey(this.object.docUuid)),this._actor):null}async _updateObject(event,formData){foundry.utils.mergeObject(this,formData),await this.render(!0)}async _onDropParticipant(event){const dropString=event.dataTransfer.getData("text/plain"),dropData=JSON.parse(dropString),docUuid=CoC7Utilities.getActorDocumentFromDropData(dropData);this.object.docUuid=docUuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)}async addTokenToChase(tokens){1===tokens.length?(this.object.docUuid=tokens[0].document?.uuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)):ui.notifications.warn(game.i18n.localize("CoC7.ErrorTokenIncorrect"))}async _onAction(event){event.preventDefault();switch(event.currentTarget.dataset.action){case"chase-cancel":this.close();break;case"chase-add":{const participant=new _participant(this.object);if(this.chase.started){if(!(participant.movementAction&&participant.movementAction>0))return void ui.notifications.warn(game.i18n.localize("CoC7.DoesNotMeetMinimumReqToBeAdded"));if(this.data.overrideMovementAction){const slowest=this.chase.slowestParticipant;isNaN(participant.adjustedMov)&&(participant.mov=slowest.adjustedMov),this.data.recalculationNeeded=!1}}await this.chase.addParticipant(participant,{locationUuid:this.object.locationUuid,recalculateMovementActions:this.data.recalculationNeeded,update:this.object.update}),this.close()}break;case"roll-speed-check":{const participant=new _participant(this.object);if(participant.speedCheck.refSet){const roll=new CoC7Check;participant.data.rolled=!0,roll.actor=participant.actor.actorKey,participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0}foundry.utils.mergeObject(this.object,participant.data),this.render(!0)}}}validateParticipant(){const participant=new _participant(this.object);if(this.data||(this.data={}),this.object.excluded=!1,this.object.escaped=!1,this.data.recalculationNeeded=!1,this.data.participantExcluded=!1,this.data.movementActionDelta=0,!this.data.overrideMovementAction){const slowestPrey=this.chase.slowestPrey,fastestChaser=this.chase.fastestChaser,slowest=this.chase.slowestParticipant;participant.adjustedMov<slowest?.adjustedMov?(this.data.recalculationNeeded=!0,participant.movementAction=1):(this.data.recalculationNeeded=!1,participant.calculateMovementActions(slowest?.adjustedMov)),participant.isChaser&&slowestPrey&&!this.chase.system.includeLastCommers&&participant.adjustedMov<slowestPrey.adjustedMov&&(this.object.excluded=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooSlow"),this.data.recalculationNeeded=!1),participant.isPrey&&fastestChaser&&!this.chase.system.includeEscaped&&participant.adjustedMov>fastestChaser.adjustedMov&&(this.object.escaped=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooFast"),this.data.recalculationNeeded=!1)}}static async create(data){if(data.dropData){const docUuid=CoC7Utilities.getActorDocumentFromDropData(data.dropData);docUuid&&(data.docUuid=docUuid),delete data.dropData}return new CoC7ChaseParticipantImporter(data).render(!0)}}class CoC7ChaseSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item","chase"],template:"systems/CoC7/templates/items/chase.html",width:550,height:500,resizable:!0,tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"participants"}]})}static get type(){return"coc7ChaseSheet"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(options={}){const sheetData=super.getData(options);return sheetData.participants=this.item.participantsObject,sheetData.participantsByInitiative=this.item.participantsByInitiative,sheetData.preys=this.item.preys,sheetData.chasers=this.item.chasers,sheetData.preysMinMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.preysMaxMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMinMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMaxMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasers.forEach((p=>{p.adjustedMov<sheetData.preysMinMov?p.tooSlow():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.chasersMaxMov,p.slowest=p.adjustedMov===sheetData.chasersMinMov})),sheetData.preys.forEach((p=>{p.adjustedMov>sheetData.chasersMaxMov?p.escaped():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.preysMaxMov,p.slowest=p.adjustedMov===sheetData.preysMinMov})),sheetData.locations=this.item.locations,sheetData.allHaveValidMov=this.allHaveValidMov,sheetData.activeLocation=this.item.activeLocation,sheetData.activeLocation&&(sheetData.activeLocation.title=sheetData.activeLocation.coordinates?game.i18n.format("CoC7.LocationCoordinate",{x:sheetData.activeLocation.coordinates.x,y:sheetData.activeLocation.coordinates.y}):game.i18n.localize("CoC7.DragOnCanvas")),sheetData.previousLocation=this.item.previousLocation,sheetData.nextLocation=this.item.nextLocation,sheetData.started=this.item.started,sheetData.isKeeper=game.user.isGM,sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".dropdown-element").on("click",(event=>this._onDropDownElementSelected(event))),html.find(".dropbtn").click((event=>{event.preventDefault(),event.stopPropagation();event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show")})),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.find(".pin-location").contextmenu(this.clearActiveLocationCoordinates.bind(this)),html.find(".participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".p-side").click(this._onChangeSide.bind(this)),html.find(".delete-participant").click(this._onDeleteParticipant.bind(this)),html.find(".reset-roll").click(this._onResetRoll.bind(this)),html.find(".delete-driver").click(this._onDeleteDriver.bind(this)),html.find(".new-participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".new-participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".add-sign").click(this._onAddParticipant.bind(this)),html.find(".roll-participant").click(this._onRollParticipant.bind(this)),html.find(".button").click(this._onButtonClick.bind(this)),html.find(".name-container").click(this._onLocationClick.bind(this)),html.find(".obstacle-type").click(this._onObstacleTypeClick.bind(this)),html.find(".toggle").click(this._onToggle.bind(this)),html.find(".participant-control").click(this._onParticipantControlClicked.bind(this)),html.find(".chase-control").click(this._onChaseControlClicked.bind(this)),html.find(".location-control").click(this._onLocationControlClick.bind(this));new DragDrop({dragSelector:".pin-location",permissions:{dragstart:this._canPinLocationDragStart.bind(this)},callbacks:{dragstart:this._onPinLocationDragStart.bind(this)}}).bind(html[0]);new DragDrop({dropSelector:".participant",callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);if(new DragDrop({dropSelector:".new-participant",callbacks:{drop:this._onAddParticipant.bind(this)}}).bind(html[0]),this.item.started){html.find(".chase-location .chase-participant").click(this._onChaseParticipantClick.bind(this));new DragDrop({dragSelector:".chase-participant",dropSelector:".chase-location",permissions:{dragstart:this._canChaseParticipantDragStart.bind(this),drop:this._canChaseParticipantDragDrop.bind(this)},callbacks:{dragstart:this._onChaseParticipantDragStart.bind(this),drop:this._onChaseParticipantDragDrop.bind(this),dragover:this._onDragEnter.bind(this)}}).bind(html[0]),html.find(".chase-location").on("dragleave",(event=>this._onDragLeave(event)))}}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).object;if(data=updateData?foundry.utils.mergeObject(data,updateData):foundry.utils.expandObject(data),this.item.system.locations?.list?.length&&data.system.startingIndex>this.item.system.locations.list.length&&(data.system.startingIndex=this.item.system.locations.list.length),data.system.participants){const participants=foundry.utils.duplicate(this.item.system.participants);for(const[k,v]of Object.entries(data.system.participants)){const index=participants.findIndex((p=>p.uuid===k));if(-1===index)ui.notifications.error("Participant table corrupted");else{const original=participants[index],cleaned=clean(v);foundry.utils.mergeObject(original,cleaned),participants[index]=original}}data.system.participants=participants}if(data.locations){const locations=foundry.utils.duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);foundry.utils.mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}delete data.locations,data.system.locations={list:locations}}return foundry.utils.flattenObject(data)}async _updateObject(event,formData){const target=event.currentTarget,override="true"===target?.dataset?.override;if(target?.name?.includes(".hp")){const[,,uuid]=target.name.split("."),participant=this.item.getParticipant(uuid);participant&&participant.actor&&(isNaN(Number(target.value))||await participant.actor.setHp(Number(target.value)))}if(override){const[,type,uuid,subType,data]=target.name.split("."),index=this.findParticipantIndex(uuid);if("participants"===type&&!isNaN(index)&&"speed-check"===subType&&"name"===data){const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];return participants[index].speedCheck?(delete participants[index].speedCheck.id,delete participants[index].speedCheck.type):participants[index].speedCheck={},participants[index].speedCheck.name=target.value,void await this.item.update({"system.participants":participants})}}super._updateObject(event,formData)}static async setScroll(app,html,data){if(!data.editable)return;const initialOpening=html[0].classList.contains("window-app"),chaseTrack=html[0].querySelector(".chase-track");if(!chaseTrack)return;let start=data.data.scroll?.chaseTrack.from,end=data.data.scroll?.chaseTrack.to;if(void 0===start&&(start=0),void 0===end&&(end=-1),initialOpening){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px",""));if(app.item.started){const pCount=app.item.actualParticipants?.length,width=(11.2*pCount+3)*remSize;app.activateTab("setup"),app.position.width=Math.max(width,40*remSize)}else app.position.width=45*remSize;return await app.item.activateNextParticipantTurn({html})}start&&-1!==start&&chaseTrack.scrollTo({top:0,left:start,behavior:"instant"}),-1!==end&&chaseTrack.scrollTo({top:0,left:end,behavior:"smooth"})}static onClose(app,html){app.item.update({"system.trackScrollPosition":-1})}findParticipantIndex(uuid){return this.item.system.participants.findIndex((p=>p.uuid===uuid))}findLocationIndex(uuid){return this.item.system.locations.list.findIndex((p=>p.uuid===uuid))}findLocation(uuid){return this.item.system.locations.list.find((p=>p.uuid===uuid))}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}async _onDropDownElementSelected(event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget;target.closest(".dropdown-content")?.classList.toggle("show");const assistantUuid=target.closest(".initiative-block")?.dataset?.uuid,beneficiaryUuid=target.dataset.beneficiaryUuid;await this.item.assistParticipant(assistantUuid,beneficiaryUuid)}async _onToggle(event){const target=event.currentTarget,toggle=target.getAttribute("toggle"),data=foundry.utils.expandObject({[toggle]:!target.classList.contains("switched-on")});if(data.locations){const locations=foundry.utils.duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);foundry.utils.mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}await this.item.updateLocationsList(locations)}}async _onObstacleTypeClick(event){const target=event.currentTarget,uuid=target.closest(".obstacle").dataset.uuid,locations=foundry.utils.duplicate(this.item.system.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={});const obstacle=locations[locationIndex].obstacleDetails,type=target.classList.contains("barrier")?"barrier":"hazard",active=obstacle[type];obstacle.barrier=!1,obstacle.hazard=!1,obstacle[type]=!active,locations[locationIndex].obstacle=!active,await this.item.updateLocationsList(locations)}async _onLocationClick(event){const lUuid=event.currentTarget.closest(".chase-location").dataset.uuid;await this.item.activateLocation(lUuid)}async _onLocationControlClick(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;const action=target.dataset.action,lUuid=target.closest(".chase-location").dataset.uuid;switch(action){case"remove":await this.item.removeLocation(lUuid);break;case"add-after":await this.item.insertLocation(lUuid,{shift:1});break;case"add-before":await this.item.insertLocation(lUuid,{shift:0});break;case"add-participant":CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid:lUuid,dropData:{}})}}async _onChaseParticipantClick(event){const pUuid=event.currentTarget.dataset?.uuid;await this.item.activateParticipant(pUuid)}async _onParticipantControlClicked(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;if(target.classList.contains("dropdown"))return;event.stopPropagation();const participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(participantUuid){switch(target.dataset.action){case"drawGun":await this.toggleParticipantGun(participantUuid);break;case"decreaseActions":await this._onChangeMovementActions(-1,event);break;case"increaseActions":await this._onChangeMovementActions(1,event);break;case"moveBackward":await this.item.moveParticipant(participantUuid,-1,{render:!0});break;case"moveForward":await this.item.moveParticipant(participantUuid,1,{render:!0});break;case"activateParticipant":return await this.item.activateParticipant(participantUuid);case"bonusDice":{const diceNumber=target.dataset.count;await this.item.toggleBonusDice(participantUuid,diceNumber),this.item.activateNextParticipantTurn()}break;case"cautiousApproach":await this.item.cautiousApproach(participantUuid);break;case"editParticipant":{const participant=this.item.getParticipant(participantUuid),location=this.item.getParticipantLocation(participantUuid);participant.data.chaseUuid=this.item.uuid,participant.data.locationUuid=location.uuid,participant.data.update=!0,CoC7ChaseParticipantImporter.create(participant.data)}break;case"removeParticipant":await this.item.removeParticipant(participantUuid)}this.item.activateNextParticipantTurn()}}async _onChaseControlClicked(event){event.preventDefault();const target=event.currentTarget;event.stopPropagation();const locationUuid=target.closest(".obstacle")?.dataset?.uuid;if(locationUuid)return"obstacle-skill-check"===target.dataset.action?this.item.activeParticipantObstacleCheck(locationUuid):void 0}async _onChangeMovementActions(count,event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget,participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(!participantUuid)return;const participants=this.item.participants,participant=participants.find((p=>participantUuid===p.uuid));participant.hasMaxMvtActions&&count>0||(participant.alterMovementActions(count),await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}async _onButtonClick(event){const target=event.currentTarget,action=target.dataset?.action;if(action)switch(action){case"init":if(!isNaN(this.item.system.locations.total)&&this.item.system.locations.total>0){const locations=Array.apply(null,Array(this.item.system.locations.total)).map((function(){return{uuid:foundry.utils.randomID(16)}}));locations[0].name="Start",locations.length>1&&(locations[locations.length-1].name="End"),await this.item.updateLocationsList(locations)}break;case"reset":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmResetChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmResetChaseHint")}</p>`,yes:async()=>{await this.item.updateLocationsList([]),await this.item.stop()}});break;case"cut2chase":this.item.allHaveSpeedRoll?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmCut2Chase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmCut2ChaseHint")}</p>`,yes:()=>this.item.cutToTheChase()}):ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"));break;case"restart":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmRestartChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmRestartChaseHint")}</p>`,yes:()=>this.item.restart()});break;case"nextRound":this.item.nextActiveParticipant?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmNextChaseRound")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmNextChaseRoundHint")}</p>`,yes:()=>this.item.progressToNextRound()}):this.item.progressToNextRound()}}_canPinLocationDragStart(selector){return!!game.user.isGM}async _onPinLocationDragStart(event){const a=event.currentTarget,i=a.querySelector("i.icon"),dragIcon=a.querySelector(".pin-image");event.dataTransfer.setDragImage(dragIcon,0,dragIcon.height);const locationElement=a.closest(".chase-location"),data={type:"locator",CoC7Type:"chase"};data.icon=i.dataset.linkIcon,data.locationUuid=locationElement.dataset.uuid,data.docUuid=this.item.uuid,data.callBack="locatorDropped",event.dataTransfer.setData("text/plain",JSON.stringify(data))}_canChaseParticipantDragStart(selector){return!!game.user.isGM}_canChaseParticipantDragDrop(selector){return!!game.user.isGM}async _onChaseParticipantDragStart(dragEvent){const dragData={uuid:dragEvent.currentTarget.dataset.uuid,type:"participant"};dragEvent.dataTransfer.setData("text/plain",JSON.stringify(dragData))}async _onChaseParticipantDragDrop(dragEvent){const dataString=dragEvent.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);this._onDragLeave(dragEvent);const locationUuid=dragEvent.currentTarget.dataset.uuid;if("participant"===data.type){const oldLocation=this.findLocation(locationUuid);if(oldLocation&&oldLocation.participants?.includes(data.uuid))return;await this.item.setchaseTrackScroll({render:!1}),await this.item.moveParticipantToLocation(data.uuid,locationUuid)}else CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid,dropData:data})}_onDragOver(dragEvent){this._onDragEnter(dragEvent)}_onDragEnter(dragEvent){dragEvent.currentTarget.classList.add("drag-over")}_onDragLeave(dragEvent){const target=dragEvent.currentTarget;target.classList?.remove("drag-over")}async _onDropParticipant(event){const target=event.currentTarget,uuid=target.dataset?.uuid,dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);await this.alterParticipant(data,uuid)}async _onAddParticipant(event){event.preventDefault();const data={chaseUuid:this.item.uuid};if(event.dataTransfer){const dataString=event.dataTransfer.getData("text/plain");data.dropData=JSON.parse(dataString)}CoC7ChaseParticipantImporter.create(data)}async _onRollParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],participant=new _participant(participants[index]);if(participant.speedCheck.refSet){const roll=new CoC7Check;roll.parent=this.item.uuid,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid,roll.actor=participant.actor.actorKey,!event.shiftKey&&participant.actor.player&&(roll.standby=!0,roll.standbyText="CoC7.Chase",roll.standbyRightIcon="systems/CoC7/assets/icons/running-solid.svg"),participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);roll.parent=this.item.uuid,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid}await this.item.update({"data.participants":participants})}_onDragEnterParticipant(event){event.currentTarget.classList.add("drag-over")}_onDragLeaveParticipant(event){event.currentTarget.classList.remove("drag-over")}async _onChangeSide(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];participants[index].chaser=!participants[index].chaser,await this.item.update({"data.participants":participants})}async _onDeleteDriver(event){const uuid=event.currentTarget.closest(".driver").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];delete participants[index].docUuid,await this.item.update({"data.participants":participants})}async _onDeleteParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];participants.splice(index,1),await this.item.update({"data.participants":participants})}async _onResetRoll(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];delete participants[index].speedCheck.rollDataString,await this.item.update({"data.participants":participants})}async alterParticipant(data,uuid){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],oldParticipant=participants[this.findParticipantIndex(uuid)];oldParticipant.mov&&delete oldParticipant.mov,foundry.utils.mergeObject(oldParticipant,participant),await this.item.update({"data.participants":participants})}async clearActiveLocationCoordinates(){await this.item.clearActiveLocationCoordinates()}async addParticipant(data){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":if(data.id){const item=game.items.get(data.id);if("skill"!==item?.data?.type)return}participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}participant.speedCheck||(this.item.system.vehicle?participant.speedCheck={type:"item",name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.drive-auto")}:participant.speedCheck={id:"con",type:"characteristic",name:game.i18n.localize("CHARAC.Constitution")});const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[];let unique=!1;for(;!unique;)participant.uuid=foundry.utils.randomID(16),unique=0===participants.filter((p=>p.uuid===participant.uuid)).length;participants.push(participant),await this.item.update({"data.participants":participants})}async toggleParticipantGun(participantUuid){const participants=this.item.system.participants?foundry.utils.duplicate(this.item.system.participants):[],participant=participants.find((p=>participantUuid===p.uuid));participant&&(participant.hasAGunReady=!participant.hasAGunReady,await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}}function clean(obj){for(const propName in obj){const tp=foundry.utils.getType(obj[propName]);"Object"===tp&&(obj[propName]=clean(obj[propName])),("Object"!==tp||Object.entries(obj[propName]).length)&&("string"!==tp||obj[propName].length)?"string"!==tp||isNaN(Number(obj[propName]))||(obj[propName]=Number(obj[propName])):obj[propName]=null}return obj}class CoC7ItemSheetV2 extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item"],template:"systems/CoC7/templates/items/item-sheetV2.html",width:500,height:450,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(options={}){const sheetData=super.getData(options);return sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}}class CoC7ItemSheet extends CoC7ItemSheetV2{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{width:525,height:506})}}class CoC7JournalSheet extends JournalSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7MacroConfig extends MacroConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7PlaylistConfig extends PlaylistConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7RollTableConfig extends RollTableConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SceneConfig extends SceneConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SetupSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"items"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"items"))),html.find(".add-bio").click((async()=>await this._onAddBio())),html.find(".remove-section").click(this._onRemoveSection.bind(this)),html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onDrop(event,collectionName="items"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&["item","weapon","skill","book","spell"].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}async _onRemoveSection(event){const div=event.currentTarget.closest(".item"),bio=foundry.utils.duplicate(this.item.system.bioSections);bio.splice(Number(div.dataset.index),1),await this.item.update({"system.bioSections":bio})}async _onAddBio(){const bio=this.item.system.bioSections?foundry.utils.duplicate(this.item.system.bioSections):[];bio.push(null),await this.item.update({"system.bioSections":bio})}_onAddMonetary(){const values=this.item.system.monetary.values?foundry.utils.duplicate(this.item.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.item.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=foundry.utils.duplicate(this.item.system.monetary.values);values.splice(Number(div.dataset.index),1),this.item.update({"system.monetary.values":values})}async _onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=await TextEditor.enrichHTML(item.system.description.value,{async:!0,secrets:this.item.editable});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?foundry.utils.duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","setup"],template:"systems/CoC7/templates/items/setup.html",width:565,height:530,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const era=Object.entries(this.item.flags?.CoC7?.cocidFlag?.eras??{}).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:this.item.system.items,era:void 0===era[0]||era[0]});sheetData.skills=items.filter((it=>"skill"===it.type)),sheetData.otherItems=items.filter((it=>"skill"!==it.type)),sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.itemsListEmpty=0===sheetData.otherItems.length,sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});return sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.enrichedBackstory=await TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.bioSections&&(formData["system.bioSections"]=Object.values(system.bioSections||[])),system.monetary.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),"system.characteristics.points.enabled"===event.currentTarget?.name&&(formData["system.characteristics.rolls.enabled"]=!event.currentTarget.checked),"system.characteristics.rolls.enabled"===event.currentTarget?.name&&(formData["system.characteristics.points.enabled"]=!event.currentTarget.checked),super._updateObject(event,formData)}}class CoC7SkillSheet extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return`systems/CoC7/templates/items/${this.item.type}-sheet.html`}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hadNonCharacterOwner=sheetData.hasOwner&&"character"!==this.actor?.type,sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.isSpecialized=this.item.system.properties.special,sheetData.canModifySpec=!this.item.system.properties.firearm&&!this.item.system.properties.fighting,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _updateObject(event,formData){const skillName=formData["system.skillName"]||this.item.system.skillName;if(this.item.system.properties?.special){const specialization=formData["system.specialization"]||this.item.system.specialization;formData.name=specialization+" ("+skillName+")"}else formData.name=skillName;return super._updateObject(event,formData)}}class CoC7SpellSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/spell/main.html",classes:["coc7","item","spell"],width:500,height:"auto",resizable:!1,scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".option").click((event=>this.modifyType(event))),html.find("#cast-spell").click((event=>{event.preventDefault(),this.item.cast()}))}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}}class CoC7StatusSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","status"],template:"systems/CoC7/templates/items/status.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}activateListeners(html){super.activateListeners(html),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.statusType[key]?COC7.statusType[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7TalentSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","talent"],template:"systems/CoC7/templates/items/talent.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.talentType[key]?COC7.talentType[key]:null);return sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7VehicleSheet extends CoC7ActorSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","item","vehicle"],width:555,height:420,resizable:!0,template:"systems/CoC7/templates/actors/vehicle.html",dragDrop:[{dragSelector:".actor",dropSelector:".dropZone"}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const sheetData=await super.getData();sheetData.properties=[],this.actor.system.properties.armed&&sheetData.properties.push(game.i18n.localize("CoC7.ArmedVehicle"));const expanded=this.actor.getFlag("CoC7","expanded");return sheetData.expanded=void 0===expanded||expanded,sheetData.expanded?sheetData.options.height=420:sheetData.options.height="auto",sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=await TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!0,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".add-armor").click((async()=>await this._onAddArmor())),html.find(".remove-armor").click((async event=>await this._onRemoveArmor(event))),html.find(".expand-button").click(this._onToggleExpand.bind(this))}async _onToggleExpand(){const expanded=this.actor.getFlag("CoC7","expanded");expanded?(this.oldSize=this.position.height,this.position.height="auto"):this.position.height=this.oldSize||420,await this.actor.setFlag("CoC7","expanded",!expanded)}async _onAddArmor(){const locations=foundry.utils.duplicate(this.actor.system.attribs.armor.locations||[]);locations.push({name:null,value:null}),await this.actor.update({"system.attribs.armor.locations":locations})}async _onRemoveArmor(event){const index=event.currentTarget.closest(".armor").dataset.index,locations=foundry.utils.duplicate(this.actor.system.attribs.armor.locations||null);locations&&(locations.splice(index,1),await this.actor.update({"system.attribs.armor.locations":locations}))}onCloseSheet(){super.onCloseSheet()}_updateObject(event,formData){const system=foundry.utils.expandObject(formData)?.system;system.attribs.armor.locations&&(formData["system.attribs.armor.locations"]=Object.values(system.attribs.armor.locations||[])),super._updateObject(event,formData)}}class CoC7WeaponSheet extends ItemSheet{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:545,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/weapon-sheet.html"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.combatSkill=[],sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hasOwner&&(sheetData.firearmSkills=this.actor.firearmSkills,sheetData.fightingSkills=this.actor.fightingSkills,sheetData.combatSkill=this.item.actor.items.filter((item=>!("skill"!==item.type||!item.system.properties.combat))),sheetData.combatSkill.sort(CoC7Utilities.sortByNameKey)),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({price:this.item.system.price[key]??0,id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.usesAlternateSkill=!0===this.item.system.properties.auto||!0===this.item.system.properties.brst||!0===this.item.system.properties.thrown,sheetData.enrichedDescriptionValue=await TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionSpecial=await TextEditor.enrichHTML(sheetData.data.system.description.special,{async:!0,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=await TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!0,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".weapon-property").click(this._onPropertyClick.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onPropertyClick(event){event.preventDefault();const propertyId=event.currentTarget.closest(".weapon-property").dataset.property;await this.item.toggleProperty(propertyId)}}async function performFilter(e){const appId=e.currentTarget.name.replace(/^coc7[^0-9]+(\d+)$/,"$1"),app=$("div.app[data-appid="+appId+"]"),type=app.find("select[name=coc7type"+appId+"]").val(),name=app.find("input[name=search]").val(),eraElement=app.find("select[name=coc7era"+appId+"]");let era="";switch(type){case"setup":case"skill":case"weapon":eraElement.closest("div.era_select").show(),era=eraElement.val();break;default:eraElement.closest("div.era_select").hide()}const items=await(game.packs.get(app.data("packId"))?.getDocuments());if(void 0===items)return;const show=[],nameFilter=new RegExp(RegExp.escape(name),"i");for(const[,item]of Object.entries(items)){let filter=!0;if(filter&&""!==name&&(filter=item.name.match(nameFilter)),filter&&""!==type&&(filter=item.type===type),filter&&""!==era){const eras=item.flags?.CoC7?.cocidFlag?.eras;eras&&Object.keys(eras).length>0&&!eras[era]&&(filter=!1)}filter&&show.push(item.id)}app.find("ol.directory-list li").each((function(){this.style.display=show.includes(this.dataset.documentId)?"flex":"none"}))}class CoCID{static init(){CONFIG.Actor.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("system.base"),CONFIG.Item.compendiumIndexFields.push("system.properties"),CONFIG.JournalEntry.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Macro.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Playlist.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.RollTable.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Scene.compendiumIndexFields.push("flags.CoC7.cocidFlag"),game.system.api={cocid:CoCID}}static regExKey(){return new RegExp("^("+Object.keys(CoCID.gamePropertyLookup).join("|")+")\\.(.*?)\\.(.+)$")}static getPrefix(document){for(const type in CoCID.documentNameLookup)if(document instanceof CoCID.documentNameLookup[type])return type+"."+(document.type??"")+".";return""}static guessId(document){return CoCID.getPrefix(document)+CoC7Utilities.toKebabCase(document.name)}static guessGroupFromKey(id){if(id){const key=id.replace(/([^\\.-]+)$/,"");if("-"===key.substr(-1))return key}return""}static guessGroupFromDocument(document){return CoCID.guessGroupFromKey(document.flags?.CoC7?.cocidFlag?.id)}static eraText(era){return!1===era?game.i18n.localize("CoC7.Any"):(!0===era&&(era=game.settings.get("CoC7","worldEra")),game.i18n.format(COC7.eras[era]??"CoC7.CoCIDFlag.error.unknown-era",{era}))}static async expandItemArray({itemList,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){let items=[];const cocids=itemList.filter((it=>"string"==typeof it));if(items=itemList.filter((it=>"string"!=typeof it)),cocids.length){const found=await CoCID.fromCoCIDRegexBest({cocidRegExp:CoCID.makeGroupRegEx(cocids),type:"i",lang,era,langFallback,showLoading}),all=[];for(const cocid of cocids){const item=found.find((i=>i.flags.CoC7.cocidFlag.id===cocid));item&&all.push(item)}if(all.length<cocids.length){const notmissing=[];for(const doc of all)notmissing.push(doc.flags.CoC7.cocidFlag.id);!0===era&&(era=game.settings.get("CoC7","worldEra")),ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:cocids.filter((x=>!notmissing.includes(x))).join(", "),lang,era:CoCID.eraText(era)}))}items=items.concat(all)}return items}static findCocIdInList(cocid,list){let itemName="";const CoCIDKeys=foundry.utils.flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys);return void 0!==CoCIDKeys[cocid]&&(itemName=CoCIDKeys[cocid]),(void 0===list.filter?Object.values(list):list).filter((i=>i.flags?.CoC7?.cocidFlag?.id===cocid||""!==itemName&&itemName===i.name))}static makeGroupRegEx(cocids){if("string"==typeof cocids)cocids=[cocids];else if(void 0===cocids||"function"!=typeof cocids.filter)return;const splits={},rgx=CoCID.regExKey();for(const i of cocids){const key=i.match(rgx);key&&(void 0===splits[key[1]]&&(splits[key[1]]={}),void 0===splits[key[1]][key[2]]&&(splits[key[1]][key[2]]=[]),splits[key[1]][key[2]].push(key[3]))}const regExParts=[];for(const t in splits){const row=[];for(const s in splits[t])splits[t][s].length>1?row.push(s+"\\.("+splits[t][s].join("|")+")"):row.push(s+"\\."+splits[t][s].join(""));row.length>1?regExParts.push(t+"\\.("+row.join("|")+")"):regExParts.push(t+"\\."+row.join(""))}return regExParts.length>1?new RegExp("^("+regExParts.join("|")+")$"):new RegExp("^"+regExParts.join("")+"$")}static async fromCoCIDRegexAll({cocidRegExp,type,lang=game.i18n.lang,era=!1,scope="match",langFallback=!0,showLoading=!1}={}){if(!cocidRegExp)return[];const result=[];let count=0;if(showLoading&&(["match","all","world"].includes(scope)&&count++,["match","all","compendiums"].includes(scope)&&(count+=game.packs.size)),["match","all","world"].includes(scope)){const worldDocuments=await CoCID.documentsFromWorld({cocidRegExp,type,lang,era,langFallback,progressBar:count});if("match"===scope&&worldDocuments.length)return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),this.filterAllCoCID(worldDocuments,langFallback&&"en"!==lang);result.splice(0,0,...worldDocuments)}if(["match","all","compendiums"].includes(scope)){const compendiaDocuments=await CoCID.documentsFromCompendia({cocidRegExp,type,lang,era,langFallback,progressBar:count});result.splice(result.length,0,...compendiaDocuments)}return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),this.filterAllCoCID(result,langFallback&&"en"!==lang)}static async fromCoCIDAll({cocid,lang=game.i18n.lang,era=!1,scope="match",langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];const parts=cocid.match(CoCID.regExKey());return parts?(""===lang&&(lang=game.i18n.lang),CoCID.fromCoCIDRegexAll({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$"),type:parts[1],lang,era,scope,langFallback,showLoading})):[]}static async fromCoCIDRegexBest({cocidRegExp,type,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!1===era)return ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[];const allDocuments=await this.fromCoCIDRegexAll({cocidRegExp,type,lang,era,scope:"all",langFallback,showLoading});return this.filterBestCoCID(allDocuments)}static fromCoCID(cocid,lang=game.i18n.lang,era=!0,langFallback=!0){return!1===era?(ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[]):CoCID.fromCoCIDBest({cocid,lang,era,langFallback})}static fromCoCIDBest({cocid,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];if(!1===era)return ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[];const type=cocid.split(".")[0],cocidRegExp=new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$");return CoCID.fromCoCIDRegexBest({cocidRegExp,type,lang,era,langFallback,showLoading})}static filterBestCoCID(documents){const bestMatchDocuments=new Map;for(const doc of documents){const docCoCID=doc.getFlag("CoC7","cocidFlag")?.id;if(docCoCID){const currentDoc=bestMatchDocuments.get(docCoCID);if(void 0===currentDoc){bestMatchDocuments.set(docCoCID,doc);continue}if(!(""===(doc.pack??"")||""!==(currentDoc?.pack??"")))continue;let docPriority=parseInt(doc.getFlag("CoC7","cocidFlag")?.priority??Number.MIN_SAFE_INTEGER,10);docPriority=isNaN(docPriority)?Number.MIN_SAFE_INTEGER:docPriority;let existingPriority=parseInt(currentDoc.getFlag("CoC7","cocidFlag")?.priority??Number.MIN_SAFE_INTEGER,10);existingPriority=isNaN(existingPriority)?Number.MIN_SAFE_INTEGER:existingPriority;if(!(docPriority>=existingPriority))continue;bestMatchDocuments.set(docCoCID,doc)}}return[...bestMatchDocuments.values()]}static filterAllCoCID(documents,langFallback){if(!langFallback)return documents;const bestMatchDocuments=new Map;for(const doc of documents){const docCoCID=doc.getFlag("CoC7","cocidFlag")?.id;if(docCoCID){const docEras=Object.entries(doc.getFlag("CoC7","cocidFlag")?.eras??{}).filter((e=>e[1])).map((e=>e[0])).sort().join("/");let docPriority=parseInt(doc.getFlag("CoC7","cocidFlag")?.priority??Number.MIN_SAFE_INTEGER,10);docPriority=isNaN(docPriority)?Number.MIN_SAFE_INTEGER:docPriority;const key=docCoCID+"/"+docEras+"/"+(isNaN(docPriority)?Number.MIN_SAFE_INTEGER:docPriority),currentDoc=bestMatchDocuments.get(key);if(void 0===currentDoc){bestMatchDocuments.set(key,doc);continue}const docLang=doc.getFlag("CoC7","cocidFlag")?.lang??"en",existingLang=currentDoc?.getFlag("CoC7","cocidFlag")?.lang??"en";"en"===existingLang&&existingLang!==docLang&&bestMatchDocuments.set(key,doc)}}return[...bestMatchDocuments.values()]}static async documentsFromWorld({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}={}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra")),progressBar>0&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100/progressBar)});const gameProperty=CoCID.getGameProperty(`${type}..`),candidateDocuments=game[gameProperty]?.filter((d=>{const cocidFlag=d.getFlag("CoC7","cocidFlag");if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));return void 0===candidateDocuments?[]:candidateDocuments.sort(CoCID.compareCoCIDPrio)}static async documentsFromCompendia({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra"));const eraText=CoCID.eraText(era),documentType=CoCID.getDocumentType(type).schema.name,candidateDocuments=[];let count=1;for(const pack of game.packs)if(progressBar>0&&(SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100*count/progressBar)}),count++),pack.documentName===documentType){pack.indexed||await pack.getIndex();const indexInstances=pack.index.filter((i=>{const cocidFlag=i.flags?.CoC7?.cocidFlag;if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));for(const index of indexInstances){const document=await pack.getDocument(index._id);if(!document){const msg=game.i18n.format("CoC7.CoCIDFlag.error.document-not-found",{cocid:cocidRegExp,lang,era:eraText});throw ui.notifications.error(msg),console.log("CoC7 |",msg,index),new Error}candidateDocuments.push(document)}}return candidateDocuments.sort(CoCID.compareCoCIDPrio)}static compareCoCIDPrio(a,b){return b.getFlag("CoC7","cocidFlag")?.priority-a.getFlag("CoC7","cocidFlag")?.priority}static getGameProperty(cocid){const type=cocid.split(".")[0],gameProperty=CoCID.gamePropertyLookup[type];if(!gameProperty)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return gameProperty}static get gamePropertyLookup(){return{a:"actors",c:"cards",i:"items",je:"journal",m:"macros",p:"playlists",rt:"tables",s:"scenes"}}static getDocumentType(cocid){const type=cocid.split(".")[0],documentType=CoCID.documentNameLookup[type];if(!documentType)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return documentType}static get documentNameLookup(){return{a:Actor,c:Card,i:Item,je:JournalEntry,m:Macro,p:Playlist,rt:RollTable,s:Scene}}}function init_listen(){Hooks.once("init",(async()=>{CONFIG.ActiveEffect.documentClass=CoC7ActiveEffect,CONFIG.Actor.documentClass=CoCActor,CONFIG.Actor.documentClasses={vehicle:CoC7Vehicle},CONFIG.Item.documentClass=CoC7Item,CONFIG.Item.documentClasses={book:CoC7Book,spell:CoC7Spell,chase:CoC7Chase,skill:CoC7Skill},async function(){loadTemplates(["systems/CoC7/templates/actors/parts/npc-skills.html","systems/CoC7/templates/actors/parts/npc-combat.html","systems/CoC7/templates/actors/parts/actor-inventory.html","systems/CoC7/templates/actors/parts/actor-inventory-items.html","systems/CoC7/templates/actors/parts/actor-background.html","systems/CoC7/templates/common/active-effects.hbs","systems/CoC7/templates/actors/parts/actor-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-keeper-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-skills-v2.html","systems/CoC7/templates/actors/parts/character-development-v2.html","systems/CoC7/templates/actors/parts/development-controls.html","systems/CoC7/templates/actors/parts/vitals.html","systems/CoC7/templates/actors/parts/combat.html","systems/CoC7/templates/actors/character-sheet-v2.html","systems/CoC7/templates/actors/character/summary.html","systems/CoC7/templates/items/book/details.html","systems/CoC7/templates/items/spell/details.html","systems/CoC7/templates/apps/investigator-wizard/introduction.hbs","systems/CoC7/templates/apps/investigator-wizard/configuration.hbs","systems/CoC7/templates/apps/investigator-wizard/select-setup.hbs","systems/CoC7/templates/apps/investigator-wizard/select-archetype.hbs","systems/CoC7/templates/apps/investigator-wizard/select-occupation.hbs","systems/CoC7/templates/apps/investigator-wizard/set-characteristics.hbs","systems/CoC7/templates/apps/investigator-wizard/set-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/view-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/set-investigator.hbs","systems/CoC7/templates/apps/investigator-wizard/set-occupation-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/toggle-skill.hbs","systems/CoC7/templates/apps/investigator-wizard/set-archetype-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/points-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/backstory.hbs","systems/CoC7/templates/apps/investigator-wizard/create.hbs"])}(),function(){if(game.settings.registerMenu("CoC7","gameRules",{name:"CoC7.Settings.Rules.Name",label:"CoC7.Settings.Rules.Label",hint:"CoC7.Settings.Rules.Hint",icon:"fas fa-book",type:CoC7GameRuleSettings,restricted:!0}),CoC7GameRuleSettings.registerSettings(),game.settings.register("CoC7","useContextMenus",{name:"SETTINGS.UseContextMenus",hint:"SETTINGS.UseContextMenusHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","dholeUploadDirectory",{name:"CoC7.Settings.DholeUpload.Directory.Name",hint:"CoC7.Settings.DholeUpload.Directory.Hint",scope:"world",config:!0,type:CoC7DirectoryPicker.DefaultDirectory,default:"[data] worlds/"+game.world.id+"/dhole-images"}),game.settings.register("CoC7","worldEra",{name:"CoC7.Settings.WorldEra.Name",hint:"CoC7.Settings.WorldEra.Hint",scope:"world",config:!0,default:"standard",type:String,choices:COC7.eras,onChange:()=>{ui.players.render(!0)}}),game.settings.register("CoC7","dropCoCID",{name:"CoC7.Settings.DropCoCID.Name",hint:"CoC7.Settings.DropCoCID.Hint",scope:"world",config:!0,default:"",type:String,choices:{"":"CoC7.Settings.DropCoCID.Prompt",Y:"CoC7.Settings.DropCoCID.UseCoCID",N:"CoC7.Settings.DropCoCID.IgnoreCoCID"}}),game.settings.register("CoC7","displayInitDices",{name:"SETTINGS.displayInitDices",hint:"SETTINGS.displayInitDicesHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayInitAsText",{name:"SETTINGS.displayInitAsText",hint:"SETTINGS.displayInitAsTextHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","stanbyGMRolls",{name:"SETTINGS.StanbyGMRolls",hint:"SETTINGS.StanbyGMRollsHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","allowFlatDiceModifier",{name:"SETTINGS.AllowFlatDiceModifier",hint:"SETTINGS.AllowFlatDiceModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","allowFlatThresholdModifier",{name:"SETTINGS.AllowFlatThresholdModifier",hint:"SETTINGS.AllowFlatThresholdModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","defaultCheckDifficulty",{name:"SETTINGS.DefaultDifficulty",hint:"SETTINGS.DefaultDifficultyHint",scope:"world",config:!0,default:"regular",type:String,choices:{regular:"SETTINGS.CheckDifficultyRegular",unknown:"SETTINGS.CheckDifficultyUnknown"}}),game.settings.register("CoC7","selfRollWhisperTarget",{name:"SETTINGS.SelfRollWhisperTarget",hint:"SETTINGS.SelfRollWhisperTargetHint",scope:"world",config:!0,default:"everyone",type:String,choices:{nobody:"SETTINGS.DoNotAdvise",owners:"SETTINGS.AdviseOwnersOnly",everyone:"SETTINGS.AdviseAllPlayer"}}),game.settings.register("CoC7","trustedCanModfyChatCard",{name:"SETTINGS.TrustedCanModfyChatCard",hint:"SETTINGS.TrustedCanModfyChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","trustedCanSeeChatCard",{name:"SETTINGS.TrustedCanSeeChatCard",hint:"SETTINGS.TrustedCanSeeChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayActorOnCard",{name:"SETTINGS.DisplayActorOnCard",hint:"SETTINGS.DisplayActorOnCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayCheckSuccessLevel",{name:"SETTINGS.DisplayCheckSuccessLevel",scope:"client",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayResultType",{name:"SETTINGS.DisplayResultType",scope:"client",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","useToken",{name:"SETTINGS.UseToken",hint:"SETTINGS.UseTokenHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","enableStatusIcons",{name:"SETTINGS.EnableStatusIcons",hint:"SETTINGS.EnableStatusIconsHint",scope:"world",config:!0,type:Boolean,default:!0}),game.settings.register("CoC7","gridSpaces",{name:"SETTINGS.RestrictGridSpaces",hint:"SETTINGS.RestrictGridSpacesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","distanceElevation",{name:"SETTINGS.CheckElevation",hint:"SETTINGS.CheckElevationHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","distanceTheatreOfTheMind",{name:"SETTINGS.SceneDistanceNotCalcualtedNoError",hint:"SETTINGS.SceneDistanceNotCalcualtedNoErrorHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideGameArtwork",{name:"SETTINGS.OverrideGameArtwork",hint:"SETTINGS.OverrideGameArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideGameArtwork")&&(game.settings.register("CoC7","artPauseImage",{name:"SETTINGS.ArtPauseImage",hint:"SETTINGS.ArtPauseImageHint",scope:"world",config:!0,default:"systems/CoC7/assets/icons/time-trap.svg",type:String}),game.settings.register("CoC7","artPauseText",{name:"SETTINGS.ArtPauseText",hint:"SETTINGS.ArtPauseTextHint",scope:"world",config:!0,default:"The Blind Idiot God is dreaming...",type:String})),game.settings.register("CoC7","displayPlayerNameOnSheet",{name:"SETTINGS.displayPlayerNameOnSheet",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","toolTipDelay",{name:"CoC7.toolTipDelay",scope:"world",config:!0,default:2e3,type:Number}),game.settings.register("CoC7","showIconsOnly",{name:"SETTINGS.showIconsOnly",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","playerUnlockSheetMode",{name:"SETTINGS.PlayerUnlockSheetMode",scope:"world",config:!0,default:"always",type:String,choices:{always:"SETTINGS.AlwaysEditable",creation:"SETTINGS.CreationModeOnly",never:"SETTINGS.NeverEditable"}}),game.settings.register("CoC7","statusPlayerEditable",{name:"SETTINGS.StatusPlayerEditable",hint:"SETTINGS.StatusPlayerEditableHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","oneBlockBackstory",{name:"SETTINGS.OneBlockBackStory",hint:"SETTINGS.OneBlockBackStoryHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideSheetArtwork",{name:"SETTINGS.OverrideSheetArtwork",hint:"SETTINGS.OverrideSheetArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideSheetArtwork")){function _setRootFontSize(size){$(":root").css("font-size",size),ui.sidebar.render(!0);for(const[,w]of Object.entries(ui.windows))w.render(!0)}game.settings.register("CoC7","artWorkSheetBackground",{name:"SETTINGS.ArtWorkSheetBackground",hint:"SETTINGS.ArtWorkSheetBackgroundHint",scope:"world",config:!0,default:"url('./assets/images/background.webp') 4 repeat",type:String}),game.settings.register("CoC7","artWorkSheetBackgroundType",{name:"SETTINGS.ArtWorkSheetBackgroundType",scope:"world",config:!0,default:"slice",type:String,choices:{slice:"SETTINGS.BackgroundSlice",auto:"SETTINGS.BackgroundAuto",contain:"SETTINGS.BackgroundContain",cover:"SETTINGS.BackgroundCover"}}),game.settings.register("CoC7","artWorkOtherSheetBackground",{name:"SETTINGS.ArtWorkOtherSheetBackground",hint:"SETTINGS.ArtWorkOtherSheetBackgroundHint",scope:"world",config:!0,default:"url( './assets/images/background.webp')",type:String}),game.settings.register("CoC7","artworkSheetImage",{name:"SETTINGS.ArtworkSheetImage",hint:"SETTINGS.ArtworkSheetImageHint",scope:"world",config:!0,default:"url('./assets/images/tentacles.webp')",type:String}),game.settings.register("CoC7","artworkFrontColor",{name:"SETTINGS.ArtworkFrontColor",hint:"SETTINGS.ArtworkFrontColorHint",scope:"world",config:!0,default:"rgba(43,55,83,1)",type:String}),game.settings.register("CoC7","artworkBackgroundColor",{name:"SETTINGS.ArtworkBackgroundColor",hint:"SETTINGS.ArtworkBackgroundColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkInteractiveColor",{name:"SETTINGS.ArtworkInteractiveColor",hint:"SETTINGS.ArtworkInteractiveColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkFixedSkillLength",{name:"SETTINGS.ArtworkFixedSkillLength",hint:"SETTINGS.ArtworkFixedSkillLengthHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","artworkMainFont",{name:"SETTINGS.ArtworkMainFont",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontBold",{name:"SETTINGS.ArtworkMainFontBold",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontSize",{name:"SETTINGS.ArtworkMainFontSize",scope:"world",config:!0,default:16,type:Number,onChange:size=>_setRootFontSize(size)})}if(game.settings.register("CoC7","disregardUsePerRound",{name:"SETTINGS.DisregardUsePerRound",hint:"SETTINGS.DisregardUsePerRoundHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardAmmo",{name:"SETTINGS.DisregardAmmo",hint:"SETTINGS.DisregardAmmoHint",scope:"world",config:!0,default:!1,type:Boolean}),game.modules.get("dice-so-nice")?.active){game.settings.register("CoC7","syncDice3d",{name:"SETTINGS.SyncDice3D",hint:"SETTINGS.SyncDice3DHint",scope:"world",config:!0,default:!0,type:Boolean});const[version]=game.modules.get("dice-so-nice")?.version.split(".");!isNaN(Number(version))&&Number(version)>=3&&(game.settings.register("CoC7","tenDieBonus",{name:"SETTINGS.TenDieBonus",hint:"SETTINGS.TenDieBonusHint",scope:"client",config:!0,default:"bronze",type:String}),game.settings.register("CoC7","tenDiePenalty",{name:"SETTINGS.TenDiePenalty",hint:"SETTINGS.TenDiePenaltyHint",scope:"client",config:!0,default:"bloodmoon",type:String}))}game.settings.register("CoC7","debugmode",{name:"SETTINGS.DebugMode",hint:"SETTINGS.DebugModeHint",scope:"client",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","experimentalFeatures",{name:"SETTINGS.ShowExperimentalFeatures",hint:"SETTINGS.ShowExperimentalFeaturesHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","hiddendevmenu",{name:"Hidden dev menu",hint:"Use at your own risk",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","developmentEnabled",{name:"Dev phased allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","showWelcomeMessage",{name:"SETTINGS.showWelcomeMessage",hint:"SETTINGS.showWelcomeMessage",scope:"world",config:!1,default:!0,type:Boolean}),game.settings.register("CoC7","charCreationEnabled",{name:"Char creation allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","systemUpdateVersion",{name:"System update version",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","systemUpdatedModuleVersion",{scope:"world",config:!1,default:{}}),game.settings.register("CoC7","xpEnabled",{name:"Enable XP gain",scope:"world",config:!1,type:Boolean,default:!0}),game.settings.register("CoC7","showInstructions",{name:"Show changelog/instructions",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","InvestigatorWizardSetup",{name:"Force specific setup CoC ID for Investigator Wizard",scope:"world",config:!1,type:String,default:""}),game.settings.register("CoC7","InvestigatorWizardQuantity",{name:"Number of investigators a single user without create actor rights can own",scope:"world",config:!1,type:Number,default:0}),game.settings.register("CoC7","InvestigatorWizardOwnership",{name:"Default permissions for non owner players",scope:"world",config:!1,type:Number,default:CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE}),game.settings.register("CoC7","InvestigatorWizardRerolls",{name:"Allow players to reroll characteristics",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardPointBuy",{name:"Force point buy instead of setup choice",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardQuickFire",{name:"Quick fire setup values",scope:"world",config:!1,type:Array,default:[]}),CONFIG.Combat.initiative={formula:"@characteristics.dex.value",decimals:4},CONFIG.debug.hooks=!!game.settings.get("CoC7","debugmode"),CONFIG.Dice.terms.t=CoC7DecaderDie,CONFIG.Dice.terms.o=CoC7DecaderDieOther}(),Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("CoC7",CoC7NPCSheet,{types:["npc"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7VehicleSheet,{types:["vehicle"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CreatureSheet,{types:["creature"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7ContainerSheet,{types:["container"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CharacterSheet,{types:["character"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("CoC7",CoC7SkillSheet,{types:["skill"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7WeaponSheet,{types:["weapon"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7BookSheet,{types:["book"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SpellSheet,{types:["spell"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7TalentSheet,{types:["talent"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7StatusSheet,{types:["status"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7OccupationSheet,{types:["occupation"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArchetypeSheet,{types:["archetype"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SetupSheet,{types:["setup"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ChaseSheet,{types:["chase"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ItemSheet,{types:["item"]}),Items.registerSheet("CoC7",CoC7ItemSheetV2,{types:["item"],makeDefault:!0}),Scenes.unregisterSheet("core",SceneConfig),Scenes.registerSheet("CoC7",CoC7SceneConfig,{makeDefault:!0}),Journal.unregisterSheet("core",JournalSheet),Journal.registerSheet("CoC7",CoC7JournalSheet,{makeDefault:!0}),RollTables.unregisterSheet("core",RollTableConfig),RollTables.registerSheet("CoC7",CoC7RollTableConfig,{makeDefault:!0}),Macros.unregisterSheet("core",MacroConfig),Macros.registerSheet("CoC7",CoC7MacroConfig,{makeDefault:!0}),Playlists.unregisterSheet("core",PlaylistConfig),Playlists.registerSheet("CoC7",CoC7PlaylistConfig,{makeDefault:!0}),Handlebars.registerHelper("rollActorImg",(function(actorKey){return chatHelper.getActorImgFromKey(actorKey)||"../icons/svg/mystery-man-black.svg"})),function(){Hooks.on("renderCompendium",(async(app,html,data)=>{if("Item"===app.collection.documentName){await app.collection.getIndex();const types=[...new Set(data.index.filter((i=>"#[CF_tempEntity]"!==i.name)).map((item=>item.type)))],select=[];select.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>"),types.includes("archetype")&&select.push('<option value="archetype">'+game.i18n.localize("CoC7.Entities.Archetype")+"</option>"),types.includes("book")&&select.push('<option value="book">'+game.i18n.localize("CoC7.Entities.Book")+"</option>"),types.includes("item")&&select.push('<option value="item">'+game.i18n.localize("CoC7.Entities.Item")+"</option>"),types.includes("occupation")&&select.push('<option value="occupation">'+game.i18n.localize("CoC7.Entities.Occupation")+"</option>"),types.includes("setup")&&select.push('<option value="setup">'+game.i18n.localize("CoC7.Entities.Setup")+"</option>"),types.includes("skill")&&select.push('<option value="skill">'+game.i18n.localize("CoC7.Entities.Skill")+"</option>"),types.includes("spell")&&select.push('<option value="spell">'+game.i18n.localize("CoC7.Entities.Spell")+"</option>"),types.includes("status")&&select.push('<option value="status">'+game.i18n.localize("CoC7.Entities.Status")+"</option>"),types.includes("talent")&&select.push('<option value="talent">'+game.i18n.localize("CoC7.Entities.Talent")+"</option>"),types.includes("weapon")&&select.push('<option value="weapon">'+game.i18n.localize("CoC7.Entities.Weapon")+"</option>");const eras=[];eras.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>");for(const era of Object.entries(COC7.eras).map((e=>({id:e[0],name:game.i18n.localize(e[1])}))).sort(CoC7Utilities.sortByNameKey))eras.push('<option value="'+era.id+'">'+era.name+"</option>");html.data("packId",app.metadata.id);let uncommon=game.i18n.localize("CoC7.SkillRarityShort");"CoC7.SkillRarityShort"===uncommon&&(uncommon="??"),html.find("li.directory-item").each((function(){const row=$(this);let item=[];item=void 0!==data.index?data.index.find((i=>i._id===row.data("document-id"))):app.collection.index.get(row.data("document-id")),item&&"skill"===item.type&&row.find("a").html(item.name+" ("+(item.system?.base??"?")+"%"+(item.system?.properties?.rarity?" "+uncommon:"")+")")})),html.find("header.directory-header").after('<div class="compendiumfilter"><div class="header-search flexrow"><i class="fas fa-layer-group"></i><select name="coc7type'+app.appId+'" style="">'+select.join("")+'</select></div><div class="header-search flexrow era_select" style="display:none"><i class="fas fa-layer-group"></i><select name="coc7era'+app.appId+'" style="">'+eras.join("")+"</select></div></div>"),html.find("select").change(performFilter.bind(this)),html.find("input").keyup(performFilter.bind(this))}}))}(),CoCID.init(),CoC7Link.init()}))}class CoC7Tooltips{constructor(){this.ToolTipHover=null,this.toolTipTimer=null}displayToolTip(toolTip){if(void 0!==this.ToolTipHover){const bounds=this.ToolTipHover.getBoundingClientRect();if(!isNaN(bounds.left||"")&&!isNaN(bounds.top||"")){let left=bounds.left,top=bounds.top;const heightText=$(this.ToolTipHover).outerHeight();$("body").append('<div id="help-tooltip">'+toolTip+"</div>");const tip=$("#help-tooltip"),heightTip=tip.outerHeight(),widthTip=tip.outerWidth();window.innerHeight<1.5*heightText+heightTip+top?top-=heightTip:top+=1.5*heightText,window.innerWidth<widthTip+left&&(left=window.innerWidth-widthTip),tip.css({left:left+"px",top:top+"px"})}}}toolTipLeave(event){game.CoC7Tooltips.ToolTipHover===event.currentTarget&&(clearTimeout(game.CoC7Tooltips.toolTipTimer),game.CoC7Tooltips.ToolTipHover=null,$("#help-tooltip").remove())}}let CoC7Tour=class{};"undefined"!=typeof Tour&&(CoC7Tour=class extends Tour{async waitForElement(selector){return new Promise(((resolve,reject)=>{if(document.querySelector(selector))return void resolve();new MutationObserver(((mutations,observer)=>{document.querySelectorAll(selector).forEach((el=>{resolve(),observer.disconnect()}))})).observe(document.body,{childList:!0,subtree:!0})}))}async _preStep(){if(await super._preStep(),0===this.stepIndex)for(const app of Object.values(ui.windows))app.close();await this.waitForElement(this.currentStep.selector),void 0!==this.currentStep.sidebarTab&&ui.sidebar.activateTab(this.currentStep.sidebarTab)}async _postStep(){if(await super._postStep(),!(this.stepIndex<0)&&this.hasNext&&this.currentStep.action)if(this.isResetting)this.isResetting=!1;else if("click"===this.currentStep.action)document.querySelector(this.currentStep.selector).click()}async reset(){"completed"!==this.status&&(this.isResetting=!0),await super.reset()}});class EnableVariantRulesEn extends CoC7Tour{constructor(config){super(foundry.utils.mergeObject({title:"Enable optional/variant rules.",description:"Learn how to enable Pulp Cthulhu rules, or other variant rules",canBeResumed:!1,display:!0,steps:[{id:"goto-settings",selector:'.tabs>a[data-tab="settings"]',title:"COC7.Tour.GotoSettingsTitle",content:"COC7.Tour.GotoSettingsContent",sidebarTab:"settings"},{id:"goto-configure",selector:'[data-action="configure"]',title:"COC7.Tour.GotoConfigureTitle",content:"COC7.Tour.GotoConfigureContent",action:"click"},{id:"goto-system-settings",selector:'[data-tab="system"]',title:"COC7.Tour.GotoSystemSettingsTitle",content:"COC7.Tour.GotoSystemSettingsContent",action:"click"},{id:"goto-game-rules",selector:'[data-category="system"] [data-key="CoC7.gameRules"]',title:"COC7.Tour.GotoGameRulesTitle",content:"COC7.Tour.GotoGameRulesContent",action:"click"},{id:"save-game-rules",selector:"#rules-settings [name=submit]",title:"COC7.Tour.SaveGameRulesTitle",content:"COC7.Tour.SaveGameRulesContent"}],localization:{"COC7.Tour.GotoSettingsTitle":"Game Settings","COC7.Tour.GotoSettingsContent":"Go to the Game Settings tab","COC7.Tour.GotoConfigureTitle":"Configure Settings","COC7.Tour.GotoConfigureContent":"Click on the Configure Settings button","COC7.Tour.GotoSystemSettingsTitle":"System Settings","COC7.Tour.GotoSystemSettingsContent":"Go to the System Settings tab","COC7.Tour.GotoGameRulesTitle":"Configure Variant/Optional Rules","COC7.Tour.GotoGameRulesContent":"Click on the Configure Variant/Optional Rules button","COC7.Tour.SaveGameRulesTitle":"Save rule changes","COC7.Tour.SaveGameRulesContent":"Once you have made your changes click on the Save Changes button"}},config))}}class EnableVariantRulesFr extends EnableVariantRulesEn{constructor(config){super({title:"Activez les règles optionnelles.",description:"Activez les règles optionelles et Pulp Cthulhu",localization:{"COC7.Tour.GotoSettingsTitle":"Paramètres","COC7.Tour.GotoSettingsContent":'Ouvrir l\'onglet "Paramètres"',"COC7.Tour.GotoConfigureTitle":"Configuration des options","COC7.Tour.GotoConfigureContent":'Cliquez sur "Configuration des options"',"COC7.Tour.GotoSystemSettingsTitle":"Système de jeu","COC7.Tour.GotoSystemSettingsContent":'Ouvrez l\'onglet "Système de jeu"',"COC7.Tour.GotoGameRulesTitle":"Configurer les variantes/règles optionnelles","COC7.Tour.GotoGameRulesContent":'Clickez sur le boutton "Configurer les variantes/règles optionnelles"',"COC7.Tour.SaveGameRulesTitle":"Sauvegarder les modifications","COC7.Tour.SaveGameRulesContent":'Apres avoir choisis les options cliquez sur le bouton "Sauvegarder les modifications"'}})}}function ready_listen(){Hooks.once("ready",(async()=>{console.log("Call of Cthulhu 7th Edition | Ready"),game.settings.get("CoC7","showWelcomeMessage")&&game.user.isGM,game.CoC7Tooltips=new CoC7Tooltips;const instructionsVersion=game.settings.get("CoC7","showInstructions");let lang=game.i18n.lang;const readMe={en:"sxB2OXbfwV6M0nyQ",es:"35FM7ZOdzC6L2xlj",fr:"tdakyzTVOQsAMdSm"};void 0===readMe[lang]&&(lang="en"),CONFIG.CoC7=CONFIG.CoC7??{},CONFIG.CoC7.Manual=readMe[lang],foundry.utils.isNewerVersion(game.system.version,instructionsVersion??"0")&&((await game.packs.get("CoC7.system-doc").getDocument(CONFIG.CoC7.Manual))?.sheet.render(!0),game.settings.set("CoC7","showInstructions",game.system.version)),async function(){try{let lang=game.i18n.lang;const tours={en:{"enable-variant-rules":EnableVariantRulesEn},fr:{"enable-variant-rules":EnableVariantRulesFr}};void 0===tours[lang]&&(lang="en");for(const tourName in tours[lang])game.tours.register("CoC7",tourName,new tours[lang][tourName])}catch(err){console.error("TOUR ERROR",err)}}()}))}const CoC7Hooks={listen(){Hooks.on("createToken",(async(tokenDocument,options,actorId)=>{"icons/svg/mystery-man.svg"===tokenDocument.texture.src&&tokenDocument.texture.src!==tokenDocument._object.actor.img&&(tokenDocument.texture.src=tokenDocument._object.actor.img),"character"!==tokenDocument._object.actor.type&&(tokenDocument._object.actor.hasRollableCharacteristics||tokenDocument._object.actor.hosRollableSkills)&&new Dialog({title:game.i18n.localize("CoC7.TokenCreationRoll.Title"),content:game.i18n.localize("CoC7.TokenCreationRoll.Prompt"),buttons:{roll:{label:game.i18n.localize("CoC7.TokenCreationRoll.ButtonRoll"),callback:async()=>await tokenDocument._object.actor.rollCharacteristicsValue()},average:{label:game.i18n.localize("CoC7.TokenCreationRoll.ButtonAverage"),callback:async()=>await tokenDocument._object.actor.averageCharacteristicsValue()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0)})),Hooks.once("diceSoNiceReady",(dice3d=>{dice3d.addDicePreset({type:"dt",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),dice3d.addDicePreset({type:"do",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),game.CoC7DecaderDSNFaces=new CoC7DecaderDSNFaces})),Hooks.on("diceSoNiceRollStart",(dice3d=>{game.CoC7DecaderDSNFaces.setFaces()})),init_listen(),ready_listen(),Hooks.on("renderActorSheet",(async(data,html,options)=>{})),Hooks.on("renderChatMessage",((app,html,data)=>{CoC7Chat.renderMessageHook(app,html,data),CoC7Chat.renderChatMessageHook(app,html,data)})),Hooks.on("renderDialog",((dialog,html)=>{const form=html.find("form");if(form.is("#document-create")&&0!==form.find("select").length){const entityCreateSelectTag=form.find("[name='type']"),entitySortedList=[],showExperimental=!!game.settings.get("CoC7","experimentalFeatures");entityCreateSelectTag.children().each(((o,entityOption)=>{const key=entityOption.textContent?.capitalize();game.i18n.has(`CoC7.Entities.${key}`)&&(entityOption.textContent=game.i18n.localize(`CoC7.Entities.${key}`)),!showExperimental&&["vehicle"].includes(entityOption.value)||entitySortedList.push(entityOption)})),entityCreateSelectTag.empty(),entityCreateSelectTag.append(entitySortedList.sort(((first,second)=>first.innerText.localeCompare(second.innerText)))),"actor"===entityCreateSelectTag.val()?entityCreateSelectTag.val("character"):"book"===entityCreateSelectTag.val()&&entityCreateSelectTag.val("item")}})),Hooks.on("renderItemSheet",(async(data,html,options)=>{})),Hooks.on("renderPause",(async(data,html,options)=>{game.settings.get("CoC7","overrideGameArtwork")&&("null"===game.settings.get("CoC7","artPauseImage").toLowerCase()&&html.find("img").remove(),""!==game.settings.get("CoC7","artPauseImage")&&html.find("img").attr("src",game.settings.get("CoC7","artPauseImage")),""!==game.settings.get("CoC7","artPauseText")&&html.find("h3").html(game.settings.get("CoC7","artPauseText")))})),Hooks.on("renderPlayerList",((playerList,html,data)=>{$("<h4>").append('<div><i class="fa-regular fa-calendar"></i>'+game.i18n.format(COC7.eras[game.settings.get("CoC7","worldEra")]??"CoC7.CoCIDFlag.error.unknown-era",{era:game.settings.get("CoC7","worldEra")})+"</div>").insertAfter($("h3",html))})),Hooks.on("renderSettingsConfig",((app,html,user)=>{CoC7DirectoryPicker.processHtml(html)}))}};async function gmcreatemessageas(data){const meleeTarget=new CoC7MeleeTarget(data.targetKey,data.messageId,data.fastForward);meleeTarget.initiatorKey=data.actorKey;return await meleeTarget.createChatCard()}async function gmtradeitemto(data){try{let actor;actor=data.scene?game.scenes.get(data.scene).tokens.get(data.actorFrom).actor:game.actors.get(data.actorFrom);const item=actor.items.get(data.item);await game.actors.get(data.actorTo).createEmbeddedDocuments("Item",[item.toJSON()])&&actor.deleteEmbeddedDocuments("Item",[item.id])}catch(e){return ui.notifications.error(e),!1}return!0}class CoC7SystemSocket{static async callSocket(data){if(void 0!==data.listener){if(game.user.id===data.listener)switch(data.type){case"character-wizard":CoC7InvestigatorWizard.createCharacterFromData(data.payload);break;case"open-character":game.actors.get(data.payload).sheet.render(!0)}}else{if(game.user.isGM)switch(data.type){case OpposedCheckCard.defaultConfig.type:OpposedCheckCard.dispatch(data);break;case CombinedCheckCard.defaultConfig.type:CombinedCheckCard.dispatch(data);break;case"invoke":(await fromUuid(data.item))[data.method](data.data)}if("updateChar"===data.type)CoC7Utilities.updateCharSheets()}}static requestKeeperAction(data){if(game.user.isGM)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const keepers=game.users.filter((u=>u.active&&u.isGM));keepers.length?(data.listener=keepers[0].id,game.socket.emit("system.CoC7",data)):ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}static requestUserAction(data,{userId=null,errorIfMissing=!0,includeSelf=!0}={}){if(userId&&void 0!==userId)if(userId===game.user.id)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const user=game.users.get(userId);void 0!==user.id&&user.active?(data.listener=user.id,game.socket.emit("system.CoC7",data)):errorIfMissing&&ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingUser"))}else includeSelf&&CoC7SystemSocket.callSocket(data),game.socket.emit("system.CoC7",data)}}function _onLeftClick(event){return event.shiftKey}Hooks.on("renderSettingsConfig",((app,html,options)=>{const systemTab=$(app.form).find(".tab[data-tab=system]");systemTab.find("input[name=CoC7\\.displayInitDices]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleInitiative")+"</h2>"),systemTab.find("input[name=CoC7\\.stanbyGMRolls]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRoll")+"</h2>"),systemTab.find("input[name=CoC7\\.trustedCanModfyChatCard]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleChatCards")+"</h2>"),systemTab.find("input[name=CoC7\\.enableStatusIcons]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleScene")+"</h2>"),systemTab.find("input[name=CoC7\\.overrideGameArtwork]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleGameArtwork")+"</h2>"),systemTab.find("input[name=CoC7\\.displayPlayerNameOnSheet]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleSheet")+"</h2>"),systemTab.find("input[name=CoC7\\.disregardUsePerRound]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleWeapon")+"</h2>"),systemTab.find("input[name=CoC7\\.syncDice3d]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDiceSoNice")+"</h2>"),systemTab.find("input[name=CoC7\\.debugmode]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDeveloperDebug")+"</h2>"),systemTab.find("select[name=CoC7\\.boutOfMadnessSummaryTable]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRollTable")+"</h2>")})),Hooks.once("init",(async function(){game.CoC7={macros:{skillCheck:CoC7Utilities.skillCheckMacro,weaponCheck:CoC7Utilities.weaponCheckMacro,check:CoC7Utilities.checkMacro},cards:{DamageCard},dev:{dice:{alwaysCrit:!1,alwaysFumble:!1}},eras:(era,name)=>{COC7.eras[era]=name}},Combat.prototype.rollInitiative=rollInitiative})),function(...cardclass){Hooks.on("renderChatLog",((app,html,data)=>EnhancedChatCardLib.injectCSS(app,html,data))),Hooks.once("socketlib.ready",(function(){EnhancedChatCardLib.register(cardclass),EnhancedChatCardLib.socket=socketlib.registerSystem(game.system.id),EnhancedChatCardLib.socket.register("updateMessage",updateMessage),EnhancedChatCardLib.socket.register("GMUpdate",GMUpdate),EnhancedChatCardLib.socket.register("advise",advise)})),Hooks.on("renderChatMessage",((app,html,data)=>EnhancedChatCard.bindListeners(html)))}(ChaseObstacleCard),Hooks.on("renderCombatTracker",((app,html,data)=>CoC7Combat.renderCombatTracker(app,html,data))),Hooks.on("chatMessage",((html,content)=>{if(content.match(/^\/(cbr|cc)/i)){const commands=content.match(/(\d+)/g);return commands?new Roll("1d100").roll({async:!0}).then((r=>{const s=r.result,res=commands.map((m=>{let res="";return res=s<=1?game.i18n.localize("CoC7.CriticalSuccess"):s>=100?game.i18n.localize("CoC7.Fumble"):s<=m/5?game.i18n.localize("CoC7.ExtremeSuccess"):s<=m/2?game.i18n.localize("CoC7.HardSuccess"):s<=m?game.i18n.localize("CoC7.RegularSuccess"):s>=96&&m<50?game.i18n.localize("CoC7.Fumble"):game.i18n.localize("CoC7.Failure"),res+=" "+game.i18n.localize("CoC7.Value")+" "+m,res})).join(" / ");r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:res})})):ui.notifications.error("Incorrect usage of command"),!1}})),CoC7Hooks.listen(),Hooks.once("socketlib.ready",(function(){game.CoC7socket=socketlib.registerSystem("CoC7"),game.CoC7socket.register("gmcreatemessageas",gmcreatemessageas),game.CoC7socket.register("gmtradeitemto",gmtradeitemto)})),Hooks.once("setup",(function(){const toLocalize=["spellProperties","bookType","talentType","occupationProperties","statusType"];for(const o of toLocalize){const localized=Object.entries(COC7[o]).map((e=>[e[0],game.i18n.localize(e[1])]));COC7[o]=localized.reduce(((obj,e)=>(obj[e[0]]=e[1],obj)),{})}let effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.dead));-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/tombstone.svg"),effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.unconscious)),-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/knocked-out-stars.svg");const effectNameKey=foundry.utils.isNewerVersion(game.version,"11")?"name":"label";CONFIG.statusEffects.unshift({id:COC7.status.tempoInsane,[effectNameKey]:"CoC7.BoutOfMadnessName",icon:"systems/CoC7/assets/icons/hanging-spider.svg"},{id:COC7.status.indefInsane,[effectNameKey]:"CoC7.InsanityName",icon:"systems/CoC7/assets/icons/tentacles-skull.svg"},{id:COC7.status.criticalWounds,[effectNameKey]:"CoC7.CriticalWounds",icon:"systems/CoC7/assets/icons/arm-sling.svg"},{id:COC7.status.dying,[effectNameKey]:"CoC7.Dying",icon:"systems/CoC7/assets/icons/heart-beats.svg"})})),Hooks.on("createActiveEffect",((data,options,userId)=>{if(game.userId===userId){const statusKey=CoC7ActiveEffect.getStatusKey(data);if(statusKey)switch(statusKey){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.setCondition(statusKey,{forceValue:!0});break;case COC7.status.tempoInsane:{const realTime=data.flags.CoC7?.realTime;let duration=null;!0===realTime?duration=data.duration?.rounds:!1===realTime&&(duration=data.duration?.seconds,isNaN(duration)||(duration=Math.floor(duration/3600))),data.parent.setCondition(COC7.status.tempoInsane,{forceValue:!0,realTime,duration})}}}})),Hooks.on("deleteActiveEffect",((data,options,userId)=>{if(game.userId===userId){const statusKey=CoC7ActiveEffect.getStatusKey(data);if(statusKey)switch(statusKey){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.unsetCondition(statusKey,{forceValue:!0})}}})),Hooks.on("changeSidebarTab",(directory=>{if(directory instanceof ItemDirectory){const item=game.items.find((i=>"__CoC7InternalItem__"===i.name));if(item){const itemElement=directory._element.find(`[data-document-id='${item.id}']`);itemElement&&(itemElement[0].style.display="none")}}})),Hooks.on("hotbarDrop",((bar,data,slot)=>CoC7Utilities.createMacro(bar,data,slot))),Hooks.on("renderChatLog",((app,html,data)=>CoC7Chat.chatListeners(app,html,data))),Hooks.on("updateChatMessage",((chatMessage,chatData,diff,speaker)=>CoC7Chat.onUpdateChatMessage(chatMessage,chatData,diff,speaker))),Hooks.on("ready",(async()=>{function _tableSettingsChanged(table,id){game.CoC7.tables[table]="none"===id?null:game.tables.get(id)}await Updater.checkForUpdate(),function(){const body=$("body");document.addEventListener("click",CoC7ContextMenu.closeAll),body.on("click","a.coc7-inline-check",CoC7Check._onClickInlineRoll),document.addEventListener("mousedown",_onLeftClick)}(),game.CoC7.skillList=await(game.packs.get("CoC7.skills")?.getDocuments()),game.socket.on("system.CoC7",(async data=>{CoC7SystemSocket.callSocket(data)}));const tableChoice={none:"SETTINGS.LetKeeperDecide"};for(const t of game.tables)tableChoice[t._id]=t.name;game.settings.register("CoC7","boutOfMadnessSummaryTable",{name:"SETTINGS.BoutOfMadnessSummaryTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_Summary",id)}),game.settings.register("CoC7","boutOfMadnessRealTimeTable",{name:"SETTINGS.BoutOfMadnessRealTimeTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_RealTime",id)}),game.CoC7.tables={boutOfMadness_Summary:"none"===game.settings.get("CoC7","boutOfMadnessSummaryTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessSummaryTable")),boutOfMadness_RealTime:"none"===game.settings.get("CoC7","boutOfMadnessRealTimeTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessRealTimeTable"))}})),Hooks.on("renderCoC7ChaseSheet",((app,html,data)=>CoC7ChaseSheet.setScroll(app,html,data))),Hooks.on("closeCoC7ChaseSheet",((app,html)=>CoC7ChaseSheet.onClose(app,html))),Hooks.on("closeActorSheet",(characterSheet=>characterSheet.onCloseSheet())),Hooks.on("renderCoC7CreatureSheet",((app,html,data)=>CoC7CreatureSheet.forceAuto(app,html,data))),Hooks.on("renderCoC7NPCSheet",((app,html,data)=>CoC7NPCSheet.forceAuto(app,html,data))),Hooks.on("chatMessage",CoC7Utilities.ParseChatEntry),Hooks.on("getSceneControlButtons",(()=>{})),Hooks.on("renderActorSheet",CoC7CharacterSheet.renderSheet),Hooks.on("renderItemSheet",CoC7CharacterSheet.renderSheet),Hooks.on("getSceneControlButtons",CoC7Menu.getButtons),Hooks.on("renderSceneControls",CoC7Menu.renderControls),Hooks.on("dropCanvasData",CoC7Canvas.onDropSomething),Hooks.on("dropActorSheetData",(function(actor,sheet,data){if("Item"===data.type&&data.actorId){if(actor.data._id===data.actorId)return;let actorFrom=null;switch(actorFrom=data.sceneId&&data.tokenId?game.scenes.get(data.sceneId).tokens.get(data.tokenId).actor:game.actors.get(data.actorId),actor.data.type){case"character":case"npc":case"creature":if(!["chase"].includes(data.data.type))return;break;case"vehicle":return;case"container":if(!["book","item","spell","weapon"].includes(data.data.type))return}actorFrom&&actorFrom.deleteEmbeddedDocuments("Item",[data.data._id])}})),CONFIG.ui.settings=CoC7SettingsDirectory,CONFIG.ui.compendium=CoC7CompendiumDirectory,CONFIG.ui.actors=CoC7ActorDirectory})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQUssWUFDSCxJQUFLLENBQUMsT0FBUSxPQUFRLFFBQVMsVUFBVTJFLFNBQVNzQyxLQUFLQSxLQUFLakgsTUFDMUQsT0FHRjQyRCxXQUNGQSxVQUFVbGIsd0JBQXdCLE9BQVEsQ0FBQ3owQyxLQUFLQSxLQUFLeWpDLEtBRXpELENBQ0YsSUY0Y0FubUMsT0FBT21HLEdBQUd0SCxTQUFXdzlFLHNCQUNyQnI4RSxPQUFPbUcsR0FBR2lvRCxXQUFhcXVCLHdCQUN2Qno4RSxPQUFPbUcsR0FBRzJELE9BQVMreUUsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RpdmUtZWZmZWN0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9kaWNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9pdGVtLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2hlbHBlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkLWFjdG9yLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWxpbmsuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy1jb250ZW50LWxpbmstZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3JvbGwtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL3JvbGwtY2FyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2ludGVyYWN0aXZlLWNoYXQtY2FyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9kYW1hZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NhbmRhdGEtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctY2hhdC1tZXNzYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbmNoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvcG9pbnQtc2VsZWN0aW9uLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jaGFyLXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY2hhci1yb2xsLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC1zcGVjLXNlbGVjdC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtc3BlY2lhbGl6YXRpb24tc2VsZWN0LWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC12YWx1ZS1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLXJlc29sdXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9yYW5nZWNvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvYWN0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS91dGlsaXRpZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jLWlkLWVkaXRvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb250ZXh0LW1lbnUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvYmFzZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvY3JlYXR1cmUtc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY3JlYXRlLW15dGhvcy1lbmNvdW50ZXJzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NoYXJhY3Rlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29tYmF0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYy1pZC1iYXRjaC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdXBkYXRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9hY3Rvci1pbXBvcnRlci1yZWdleHAuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29jNy1kaXJlY3RvcnktcGlja2VyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2Rob2xlaG91c2VfaW1wb3J0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXItZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2Ryb3AtY29jLWlkLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvb2NjdXBhdGlvbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2V0dGluZ3MtZGlyZWN0b3J5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb21wZW5kaXVtLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3ItZGlyZWN0b3J5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZHNuLWZhY2VzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zcGVsbC9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9ib29rL2RhdGEuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2NoYXNlL3BhcnRpY2lwYW50LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9za2lsbC9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvdmVoaWNsZS9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLW90aGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2dhbWUtcnVsZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9hcmNoZXR5cGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2Jvb2svc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvY29udGFpbmVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXRWMi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LWpvdXJuYWwtc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LW1hY3JvLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2hlZXRzL2NvYzctcGxheWxpc3QtY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zaGVldHMvY29jNy1yb2xsLXRhYmxlLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2hlZXRzL2NvYzctc2NlbmUtY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc2V0dXAuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9za2lsbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc3BlbGwvc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9zdGF0dXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy90YWxlbnQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvdmVoaWNsZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3dlYXBvbi1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9jb21wZW5kaXVtLWZpbHRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9jb2MtaWQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2luaXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29uZmlndXJlLWRvY3VtZW50cy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9sb2FkLXRlbXBsYXRlcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9yZWdpc3Rlci1zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9yZWdpc3Rlci1zaGVldHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvaGFuZGxlYmFycy1oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvdG9vbHRpcHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy10b3VyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS90b3Vycy9lbmFibGUtdmFyaWFudC1ydWxlcy1lbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdG91cnMvZW5hYmxlLXZhcmlhbnQtcnVsZXMtZnIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlYWR5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL3JlZ2lzdGVyLXRvdXJzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvY3JlYXRlLXRva2VuLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9kaWNlLXNvLW5pY2UtcmVhZHkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2RpY2Utc28tbmljZS1yb2xsLXN0YXJ0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItYWN0b3Itc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1jaGF0LW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1pdGVtLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItcGF1c2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1wbGF5ZXItbGlzdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLXNldHRpbmdzLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3Mvc29ja2V0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctc3lzdGVtLXNvY2tldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29jNy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvZGljZWJvdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvZHJvcC1hY3Rvci1zaGVldC1kYXRhLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIE5hbWVzcGFjZSBDT0M3IENvbmZpZ3VyYXRpb24gVmFsdWVzXG5leHBvcnQgY29uc3QgQ09DNyA9IHt9XG5cbi8vIEN1c3RvbSBjaGF0TWVzc2FnZVxuLy8gQ09ORklHLkNoYXRNZXNzYWdlLnRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jaGF0LW1lc3NhZ2UuaHRtbCc7XG5cbi8qKlxuICogVGhlIHNldCBvZiBFcmFzIHVzZWQgd2l0aGluIHRoZSBzeXN0ZW1cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbkNPQzcuZXJhcyA9IHtcbiAgc3RhbmRhcmQ6ICdDb0M3LkVyYTE5MjAnLFxuICBtb2Rlcm46ICdDb0M3LkVyYU1vZGVybicsXG4gIG1vZGVyblB1bHA6ICdDb0M3LkVyYU1vZGVyblB1bHAnLFxuICBwdWxwOiAnQ29DNy5FcmFQdWxwJyxcbiAgZG93bkRhcmtlclRyYWlsczogJ0NvQzcuRXJhRG93bkRhcmtlclRyYWlscycsXG4gIGRvd25EYXJrZXJUcmFpbHNQdWxwOiAnQ29DNy5FcmFEb3duRGFya2VyVHJhaWxzUHVscCcsXG4gIGRhcmtBZ2VzOiAnQ29DNy5FcmFEYXJrQWdlcycsXG4gIGRhcmtBZ2VzUHVscDogJ0NvQzcuRXJhRGFya0FnZXNQdWxwJyxcbiAgcmVnZW5jeTogJ0NvQzcuRXJhUmVnZW5jeScsXG4gIHJlZ2VuY3lQdWxwOiAnQ29DNy5FcmFSZWdlbmN5UHVscCcsXG4gIC8vIFJlaWduIG9mIFRlcnJvclxuICBnYXNMaWdodDogJ0NvQzcuRXJhR2FzTGlnaHQnLFxuICBpbnZpY3R1czogJ0NvQzcuRXJhSW52aWN0dXMnXG59XG5cbkNPQzcubW9uZXRhcnlGb3JtYXRLZXlzID0ge1xuICBkZWNpbWFsTGVmdDogJ2RlY2ltYWxMZWZ0JyxcbiAgZGVjaW1hbFJpZ2h0OiAnZGVjaW1hbFJpZ2h0JyxcbiAgaW50ZWdlckxlZnQ6ICdpbnRlZ2VyTGVmdCcsXG4gIGludGVnZXJSaWdodDogJ2ludGVnZXJSaWdodCcsXG4gIGxzZDogJ2xzZCcsXG4gIHJvbWFuOiAncm9tYW4nXG59XG5cbkNPQzcubW9uZXRhcnlGb3JtYXRzID0ge1xuICBkZWNpbWFsTGVmdDogJ0NvQzcuTW9uZXRhcnlGb3JtYXREZWNpbWFsTGVmdCcsXG4gIGRlY2ltYWxSaWdodDogJ0NvQzcuTW9uZXRhcnlGb3JtYXREZWNpbWFsUmlnaHQnLFxuICBpbnRlZ2VyTGVmdDogJ0NvQzcuTW9uZXRhcnlGb3JtYXRJbnRlZ2VyTGVmdCcsXG4gIGludGVnZXJSaWdodDogJ0NvQzcuTW9uZXRhcnlGb3JtYXRJbnRlZ2VyUmlnaHQnLFxuICBsc2Q6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0THNkJyxcbiAgcm9tYW46ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0Um9tYW4nXG59XG5cbkNPQzcubW9uZXRhcnlUeXBlS2V5cyA9IHtcbiAgbm9uZTogJ25vbmUnLFxuICBhc3NlczogJ2Fzc2VzJyxcbiAgc2VzdGVydGlpOiAnc2VzdGVydGlpJyxcbiAgcXVpbmFyaWk6ICdxdWluYXJpaScsXG4gIGRlbmFyaWk6ICdkZW5hcmlpJyxcbiAgZDogJ2QnLFxuICBzOiAncycsXG4gIHZhbHVlOiAndmFsdWUnLFxuICBtdWx0aXBsaWVyOiAnbXVsdGlwbGllcidcbn1cblxuQ09DNy5tb25ldGFyeVR5cGVzID0ge1xuICBub25lOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlTm9uZScsXG4gICAgZmlsdGVyOiBbXVxuICB9LFxuICBhc3Nlczoge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZUFzc2VzJyxcbiAgICBmaWx0ZXI6IFsncm9tYW4nXVxuICB9LFxuICBzZXN0ZXJ0aWk6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVTZXN0ZXJ0aWknLFxuICAgIGZpbHRlcjogWydyb21hbiddXG4gIH0sXG4gIHF1aW5hcmlpOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlUXVpbmFyaWknLFxuICAgIGZpbHRlcjogWydyb21hbiddXG4gIH0sXG4gIGRlbmFyaWk6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVEZW5hcmlpJyxcbiAgICBmaWx0ZXI6IFsncm9tYW4nXVxuICB9LFxuICBkOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlRGVuaWVycycsXG4gICAgZmlsdGVyOiBbJ2xzZCddXG4gIH0sXG4gIHM6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVTb3VzJyxcbiAgICBmaWx0ZXI6IFsnbHNkJ11cbiAgfSxcbiAgdmFsdWU6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVPbmUnLFxuICAgIGZpbHRlcjogW11cbiAgfSxcbiAgbXVsdGlwbGllcjoge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZUNyZWRpdFJhdGluZycsXG4gICAgZmlsdGVyOiBbXVxuICB9XG59XG5cbkNPQzcuY2hhcmFjdGVyaXN0aWNzID0ge1xuICBzdHI6ICdDb0M3LkNoYXJhY1N0cicsXG4gIGNvbjogJ0NvQzcuQ2hhcmFjQ29uJyxcbiAgc2l6OiAnQ29DNy5DaGFyYWNTaXonLFxuICBkZXg6ICdDb0M3LkNoYXJhY0RleCcsXG4gIGFwcDogJ0NvQzcuQ2hhcmFjQXBwJyxcbiAgaW50OiAnQ29DNy5DaGFyYWNJbnQnLFxuICBwb3c6ICdDb0M3LkNoYXJhY1BvdycsXG4gIGVkdTogJ0NvQzcuQ2hhcmFjRWR1J1xufVxuXG4vKipcbiAqIFRoZSBzZXQgb2YgU2tpbGxzIGF0dHJpYnV0ZXMgdXNlZCB3aXRoaW4gdGhlIHN5c3RlbVxuICogQHR5cGUge09iamVjdH1cbiAqL1xuQ09DNy5za2lsbFByb3BlcnRpZXMgPSB7XG4gIG5vYWRqdXN0bWVudHM6ICdDb0M3LlNraWxsTm9BZGp1c3RtZW50cycsXG4gIG5veHBnYWluOiAnQ29DNy5Ta2lsbE5vWHBHYWluJyxcbiAgc3BlY2lhbDogJ0NvQzcuU2tpbGxTcGVjaWFsJyxcbiAgcmFyaXR5OiAnQ29DNy5Ta2lsbFJhcml0eScsXG4gIHB1c2g6ICdDb0M3LlNraWxsUHVzaCcsXG4gIGNvbWJhdDogJ0NvQzcuU2tpbGxDb21iYXQnLFxuICBmaWdodGluZzogJ0NvQzcuU2tpbGxGaWdodGluZycsXG4gIGZpcmVhcm06ICdDb0M3LlNraWxsRmlyZWFybScsXG4gIHJlcXVpcmVzbmFtZTogJ0NvQzcuU2tpbGxSZXF1aXJlc05hbWUnLFxuICBrZWVwYmFzZXZhbHVlOiAnQ29DNy5Ta2lsbEtlZXBCYXNlVmFsdWUnLFxuICBwaWNrbmFtZW9ubHk6ICdDb0M3LlNraWxsUGlja05hbWVPbmx5JyxcbiAgb25seW9uZTogJ0NvQzcuU2tpbGxTcGVjaWFsaXphdGlvbklzVW5pcXVlJ1xufVxuXG5DT0M3LndlYXBvblByb3BlcnRpZXMgPSB7XG4gIG1lbGVlOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuTWVsZWUnLFxuICBybmdkOiAnQ29DNy5XZWFwb25SbmdkJyxcbiAgbW52cjogJ0NvQzcuV2VhcG9uUHJvcGVyeU1hbmV1dmVyJyxcbiAgdGhyb3duOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuVGhyb3duJyxcbiAgc2hvdGd1bjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LlNob3RndW4nLFxuICBkYnJsOiAnQ29DNy5XZWFwb25EYnJsJyxcbiAgaW1wbDogJ0NvQzcuV2VhcG9uSW1wbCcsXG4gIGJyc3Q6ICdDb0M3LldlYXBvbkJyc3QnLFxuICBhdXRvOiAnQ29DNy5XZWFwb25BdXRvJyxcbiAgYWhkYjogJ0NvQzcuV2VhcG9uQWhkYicsXG4gIGFkZGI6ICdDb0M3LldlYXBvbkFkZGInLFxuICBzbG50OiAnQ29DNy5XZWFwb25TbG50JyxcbiAgc3BjbDogJ0NvQzcuV2VhcG9uU3BjbCcsXG4gIG1vbnQ6ICdDb0M3LldlYXBvbk1vbnQnLFxuICBibHN0OiAnQ29DNy5XZWFwb25CbHN0JyxcbiAgc3R1bjogJ0NvQzcuV2VhcG9uU3R1bicsXG4gIHJhcmU6ICdDb0M3LldlYXBvblJhcmUnLFxuICBidXJuOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuQnVybidcbn1cblxuQ09DNy5zcGVsbFByb3BlcnRpZXMgPSB7XG4gIGNhbGw6ICdDb0M3LkNhbGxTcGVsbCcsXG4gIGRpc21pc3M6ICdDb0M3LkRpc21pc3NTcGVsbCcsXG4gIGNvbnRhY3Q6ICdDb0M3LkNvbnRhY3RTcGVsbCcsXG4gIHN1bW1vbjogJ0NvQzcuU3VtbW9uU3BlbGwnLFxuICBiaW5kOiAnQ29DNy5CaW5kU3BlbGwnLFxuICBlbmNoYW50bWVudDogJ0NvQzcuRW5jaGFudG1lbnRTcGVsbCcsXG4gIGdhdGU6ICdDb0M3LkdhdGVTcGVsbCcsXG4gIGNvbWJhdDogJ0NvQzcuQ29tYmF0U3BlbGwnXG59XG5cbkNPQzcuYm9va1R5cGUgPSB7XG4gIG15dGhvczogJ0NvQzcuTXl0aG9zQm9vaycsXG4gIG9jY3VsdDogJ0NvQzcuT2NjdWx0Qm9vaycsXG4gIG90aGVyOiAnQ29DNy5PdGhlcidcbn1cblxuQ09DNy50YWxlbnRUeXBlID0ge1xuICBwaHlzaWNhbDogJ0NvQzcuUGh5c2ljYWxUYWxlbnQnLFxuICBtZW50YWw6ICdDb0M3Lk1lbnRhbFRhbGVudCcsXG4gIGNvbWJhdDogJ0NvQzcuQ29tYmF0VGFsZW50JyxcbiAgbWlzY2VsbGFuZW91czogJ0NvQzcuTWlzY2VsbGFuZW91c1RhbGVudCcsXG4gIGJhc2ljOiAnQ29DNy5CYXNpY1RhbGVudCcsXG4gIGluc2FuZTogJ0NvQzcuSW5zYW5lVGFsZW50JyxcbiAgb3RoZXI6ICdDb0M3Lk90aGVyVGFsZW50J1xufVxuXG5DT0M3LnN0YXR1c1R5cGUgPSB7XG4gIG1hbmlhOiAnQ29DNy5NYW5pYScsXG4gIHBob2JpYTogJ0NvQzcuUGhvYmlhJ1xufVxuXG5DT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzID0ge1xuICBjbGFzc2ljOiAnQ29DNy5DbGFzc2ljJyxcbiAgbG92ZWNyYWZ0aWFuOiAnQ29DNy5Mb3ZlY3JhZnRpYW4nLFxuICBtb2Rlcm46ICdDb0M3Lk1vZGVybicsXG4gIHB1bHA6ICdDb0M3LlB1bHAnXG59XG5cbkNPQzcuZm9ybXVsYSA9IHt9XG5cbkNPQzcuZm9ybXVsYS5hY3RvciA9IHtcbiAgJ0BTVFInOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZScsXG4gICdAQ09OJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUnLFxuICAnQFNJWic6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlJyxcbiAgJ0BERVgnOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZScsXG4gICdAQVBQJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5hcHAudmFsdWUnLFxuICAnQElOVCc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuaW50LnZhbHVlJyxcbiAgJ0BQT1cnOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZScsXG4gICdARURVJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5lZHUudmFsdWUnXG59XG5cbkNPQzcuZm9ybXVsYS5hY3RvcnNoZWV0ID0ge1xuICAnQFNUUic6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlJyxcbiAgJ0BDT04nOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmNvbi52YWx1ZScsXG4gICdAU0laJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUnLFxuICAnQERFWCc6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlJyxcbiAgJ0BBUFAnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmFwcC52YWx1ZScsXG4gICdASU5UJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUnLFxuICAnQFBPVyc6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlJyxcbiAgJ0BFRFUnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmVkdS52YWx1ZSdcbn1cblxuQ09DNy5zdGF0dXMgPSB7XG4gIHRlbXBvSW5zYW5lOiAndGVtcG9JbnNhbmUnLFxuICBpbmRlZkluc2FuZTogJ2luZGVmSW5zYW5lJyxcbiAgdW5jb25zY2lvdXM6ICd1bmNvbnNjaW91cycsXG4gIGNyaXRpY2FsV291bmRzOiAnY3JpdGljYWxXb3VuZHMnLFxuICBkeWluZzogJ2R5aW5nJyxcbiAgcHJvbmU6ICdwcm9uZScsXG4gIGRlYWQ6ICdkZWFkJ1xufVxuXG5DT0M3Lm5ld0Jvb2tOYW1lID0gJ0NvQzcuTmV3Qm9va05hbWUnXG5DT0M3Lm5ld1NraWxsTmFtZSA9ICdDb0M3Lk5ld1NraWxsTmFtZSdcbkNPQzcubmV3U3BlbGxOYW1lID0gJ0NvQzcuTmV3U3BlbGxOYW1lJ1xuQ09DNy5uZXdJdGVtTmFtZSA9ICdDb0M3Lk5ld0l0ZW1OYW1lJ1xuQ09DNy5uZXdXZWFwb25OYW1lID0gJ0NvQzcuTmV3V2VhcG9uTmFtZSdcblxuQ09DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwgPSAnQ29DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwnXG5cbkNPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUgPSAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbkNPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSA9ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG5cbkNPQzcuY29tYmF0Q2FyZHMgPSB7XG4gIGZpZ2h0QmFjazogJ0NvQzcuRmlnaHRCYWNrJyxcbiAgZG9kZ2U6ICdDb0M3LkRvZGdlJyxcbiAgbWFuZXV2ZXI6ICdDb0M3Lk1hbmV1dmVyJyxcbiAgbm9SZXNwb25zZTogJ0NvQzcuTm9SZXNwb25zZSdcbn1cbiIsIi8qIGdsb2JhbCBBY3RpdmVFZmZlY3QsIGZvdW5kcnksIGdhbWUgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuL2NvbmZpZy5qcydcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29DN0FjdGl2ZUVmZmVjdCBleHRlbmRzIEFjdGl2ZUVmZmVjdCB7XG4gIGFwcGx5IChhY3RvciwgY2hhbmdlKSB7XG4gICAgaWYgKGNoYW5nZS5rZXkgPT09ICdzeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZScpIHtcbiAgICAgIC8vIEFybW9yIGNhbiBiZSBmcmVlIHRleHQgaWYgYm90aCBhcmUgbnVtYmVycyBhbGxvdyBjYWxjdWxhdGlvblxuICAgICAgaWYgKCFpc05hTihjaGFuZ2UudmFsdWUpICYmICFpc05hTihhY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZSkpIHtcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IudmFsdWUgPSBOdW1iZXIoYWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IudmFsdWUpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjaGFuZ2Uua2V5ID09PSAnc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUnKSB7XG4gICAgICAvLyBJZiBkYiBpcyBjdXJyZW50bHkgYSBudW1iZXIgYWxsb3cgc3RyaW5ncyB0byBiZSBhcHBsaWVkXG4gICAgICBpZiAoaXNOYU4oY2hhbmdlLnZhbHVlKSAmJiAhaXNOYU4oYWN0b3Iuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUpKSB7XG4gICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID0gU3RyaW5nKGFjdG9yLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjaGFuZ2VzID0gc3VwZXIuYXBwbHkoYWN0b3IsIGNoYW5nZSlcbiAgICByZXR1cm4gY2hhbmdlc1xuICB9XG5cbiAgLyoqXG4gICAqIE1hbmFnZSBBY3RpdmUgRWZmZWN0IGluc3RhbmNlcyB0aHJvdWdoIHRoZSBBY3RvciBTaGVldCB2aWEgZWZmZWN0IGNvbnRyb2wgYnV0dG9ucy5cbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBldmVudCAgICAgIFRoZSBsZWZ0LWNsaWNrIGV2ZW50IG9uIHRoZSBlZmZlY3QgY29udHJvbFxuICAgKiBAcGFyYW0ge0FjdG9yfEl0ZW19IG93bmVyICAgICAgVGhlIG93bmluZyBkb2N1bWVudCB3aGljaCBtYW5hZ2VzIHRoaXMgZWZmZWN0XG4gICAqIEByZXR1cm5zIHtQcm9taXNlfG51bGx9ICAgICAgICBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgY2hhbmdlcyBhcmUgY29tcGxldGUuXG4gICAqL1xuICBzdGF0aWMgb25NYW5hZ2VBY3RpdmVFZmZlY3QgKGV2ZW50LCBvd25lcikge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KCdsaScpXG4gICAgY29uc3QgZWZmZWN0ID0gbGkuZGF0YXNldC5lZmZlY3RJZFxuICAgICAgPyBvd25lci5lZmZlY3RzLmdldChsaS5kYXRhc2V0LmVmZmVjdElkKVxuICAgICAgOiBudWxsXG4gICAgc3dpdGNoIChhLmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdjcmVhdGUnOlxuICAgICAgICByZXR1cm4gb3duZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVmZmVjdE5ldycpLFxuICAgICAgICAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXG4gICAgICAgICAgICBvcmlnaW46IG93bmVyLnV1aWQsXG4gICAgICAgICAgICAnZHVyYXRpb24ucm91bmRzJzpcbiAgICAgICAgICAgICAgbGkuZGF0YXNldC5lZmZlY3RUeXBlID09PSAndGVtcG9yYXJ5JyA/IDEgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBkaXNhYmxlZDogbGkuZGF0YXNldC5lZmZlY3RUeXBlID09PSAnaW5hY3RpdmUnXG4gICAgICAgICAgfVxuICAgICAgICBdKVxuICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgIHJldHVybiBlZmZlY3Quc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICByZXR1cm4gZWZmZWN0LmRlbGV0ZSgpXG4gICAgICBjYXNlICd0b2dnbGUnOlxuICAgICAgICByZXR1cm4gZWZmZWN0LnVwZGF0ZSh7IGRpc2FibGVkOiAhZWZmZWN0LmRpc2FibGVkIH0pXG4gICAgfVxuICB9XG5cbiAgX3ByZXBhcmVEdXJhdGlvbiAoKSB7XG4gICAgY29uc3QgZHVyYXRpb24gPSBzdXBlci5fcHJlcGFyZUR1cmF0aW9uKClcbiAgICBpZiAoZHVyYXRpb24udHlwZSA9PT0gJ3NlY29uZHMnKSB7XG4gICAgICBpZiAoZHVyYXRpb24uc2Vjb25kcyA+IDM2MDApIHtcbiAgICAgICAgZHVyYXRpb24ubGFiZWwgPSBuZXcgRGF0ZShkdXJhdGlvbi5zZWNvbmRzICogMTAwMCkudG9JU09TdHJpbmcoKS5zbGljZSgxMSwgMTkpXG4gICAgICB9IGVsc2UgaWYgKGR1cmF0aW9uLnNlY29uZHMgPiAxMDApIHtcbiAgICAgICAgZHVyYXRpb24ubGFiZWwgPSBuZXcgRGF0ZShkdXJhdGlvbi5zZWNvbmRzICogMTAwMCkudG9JU09TdHJpbmcoKS5zbGljZSgxNCwgMTkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkdXJhdGlvblxuICB9XG5cbiAgc3RhdGljIGZpbHRlckFjdGl2ZUVmZmVjdHMgKGVmZmVjdCwgY29uZGl0aW9uTmFtZSkge1xuICAgIGlmICghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMScpKSB7XG4gICAgICAvLyBGb3VuZHJ5VlRUIHYxMFxuICAgICAgcmV0dXJuIGVmZmVjdC5mbGFncy5jb3JlPy5zdGF0dXNJZCA9PT0gY29uZGl0aW9uTmFtZVxuICAgIH1cbiAgICByZXR1cm4gZWZmZWN0LnN0YXR1c2VzLmhhcyhjb25kaXRpb25OYW1lKVxuICB9XG5cbiAgc3RhdGljIGdldFN0YXR1c0tleSAoZWZmZWN0KSB7XG4gICAgbGV0IG9wdGlvbnMgPSBbXVxuICAgIGlmICghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMScpKSB7XG4gICAgICAvLyBGb3VuZHJ5VlRUIHYxMFxuICAgICAgb3B0aW9ucyA9IFtlZmZlY3QuZ2V0RmxhZygnY29yZScsICdzdGF0dXNJZCcpXVxuICAgIH0gZWxzZSBpZiAoZWZmZWN0LnN0YXR1c2VzLnNpemUgPiAwKSB7XG4gICAgICBvcHRpb25zID0gWy4uLmVmZmVjdC5zdGF0dXNlcy52YWx1ZXMoKV1cbiAgICB9XG4gICAgcmV0dXJuIG9wdGlvbnMuZmluZCh2ID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChDT0M3LnN0YXR1cywgdikpXG4gIH1cblxuICBnZXQgaXNTdGF0dXMgKCkge1xuICAgIHJldHVybiB0eXBlb2YgQ29DN0FjdGl2ZUVmZmVjdC5nZXRTdGF0dXNLZXkodGhpcykgPT09ICdzdHJpbmcnXG4gIH1cblxuICBzdGF0aWMgcHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMgKGVmZmVjdHMsIHsgc3RhdHVzID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAvLyBEZWZpbmUgZWZmZWN0IGhlYWRlciBjYXRlZ29yaWVzXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IHtcbiAgICAgIHRlbXBvcmFyeToge1xuICAgICAgICB0eXBlOiAndGVtcG9yYXJ5JyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnVGVtcG9yYXJ5JyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9LFxuICAgICAgcGFzc2l2ZToge1xuICAgICAgICB0eXBlOiAncGFzc2l2ZScsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1Bhc3NpdmUnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH0sXG4gICAgICBpbmFjdGl2ZToge1xuICAgICAgICB0eXBlOiAnaW5hY3RpdmUnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdJbmFjdGl2ZScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfSxcbiAgICAgIHN1cHByZXNzZWQ6IHtcbiAgICAgICAgdHlwZTogJ3N1cHByZXNzZWQnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTdXBwcmVzc2VkJyksXG4gICAgICAgIGVmZmVjdHM6IFtdLFxuICAgICAgICBpbmZvOiBbZ2FtZS5pMThuLmxvY2FsaXplKCdVbmF2YWlsYWJsZScpXVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdGF0dXMpIHtcbiAgICAgIGNhdGVnb3JpZXMuc3RhdHVzID0ge1xuICAgICAgICB0eXBlOiAnc3RhdHVzJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU3RhdHVzJyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9XG4gICAgfVxuICAgIC8vIEl0ZXJhdGUgb3ZlciBhY3RpdmUgZWZmZWN0cywgY2xhc3NpZnlpbmcgdGhlbSBpbnRvIGNhdGVnb3JpZXNcbiAgICBmb3IgKGNvbnN0IGUgb2YgZWZmZWN0cykge1xuICAgICAgaWYgKGUuaXNTdXBwcmVzc2VkKSBjYXRlZ29yaWVzLnN1cHByZXNzZWQuZWZmZWN0cy5wdXNoKGUpXG4gICAgICBlbHNlIGlmIChlLmlzU3RhdHVzKSBjYXRlZ29yaWVzLnN0YXR1cy5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgaWYgKGUuZGlzYWJsZWQpIGNhdGVnb3JpZXMuaW5hY3RpdmUuZWZmZWN0cy5wdXNoKGUpXG4gICAgICBlbHNlIGlmIChlLmlzVGVtcG9yYXJ5KSBjYXRlZ29yaWVzLnRlbXBvcmFyeS5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgY2F0ZWdvcmllcy5wYXNzaXZlLmVmZmVjdHMucHVzaChlKVxuICAgIH1cblxuICAgIGNhdGVnb3JpZXMuc3VwcHJlc3NlZC5oaWRkZW4gPSAhY2F0ZWdvcmllcy5zdXBwcmVzc2VkLmVmZmVjdHMubGVuZ3RoXG4gICAgcmV0dXJuIGNhdGVnb3JpZXNcbiAgfVxuXG4gIHN0YXRpYyBwcmVwYXJlTlBDQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyAoZWZmZWN0cykge1xuICAgIGxldCBjb3VudCA9IDBcbiAgICAvLyBEZWZpbmUgZWZmZWN0IGhlYWRlciBjYXRlZ29yaWVzXG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IHtcbiAgICAgIGFjdGl2ZToge1xuICAgICAgICB0eXBlOiAnYWN0aXZlJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQWN0aXZlJyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9LFxuICAgICAgaW5hY3RpdmU6IHtcbiAgICAgICAgdHlwZTogJ2luYWN0aXZlJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnSW5hY3RpdmUnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFjdGl2ZSBlZmZlY3RzLCBjbGFzc2lmeWluZyB0aGVtIGludG8gY2F0ZWdvcmllc1xuICAgIGZvciAoY29uc3QgZSBvZiBlZmZlY3RzKSB7XG4gICAgICBjb3VudCArPSAxXG4gICAgICBlLl9nZXRTb3VyY2VOYW1lKCkgLy8gVHJpZ2dlciBhIGxvb2t1cCBmb3IgdGhlIHNvdXJjZSBuYW1lXG4gICAgICBpZiAoZS5pc1N1cHByZXNzZWQgfHwgZS5kaXNhYmxlZCkgY2F0ZWdvcmllcy5pbmFjdGl2ZS5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgY2F0ZWdvcmllcy5hY3RpdmUuZWZmZWN0cy5wdXNoKGUpXG4gICAgfVxuXG4gICAgaWYgKGNvdW50ID4gMCkgY2F0ZWdvcmllcy5leHBlbmRlZCA9IHRydWVcbiAgICByZXR1cm4gY2F0ZWdvcmllc1xuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIENPTkZJRywgZ2FtZSwgUm9sbCAqL1xuXG5leHBvcnQgY2xhc3MgQ29DN0RpY2Uge1xuICBzdGF0aWMgYXN5bmMgcm9sbCAobW9kaWYgPSAwLCByb2xsTW9kZSA9IG51bGwsIGhpZGVEaWNlID0gZmFsc2UpIHtcbiAgICBsZXQgYWx0ZXJuYXRpdmVEaWNlID0gJydcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgaWYgKG1vZGlmIDwgMCkge1xuICAgICAgICBhbHRlcm5hdGl2ZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVQZW5hbHR5JylcbiAgICAgIH0gZWxzZSBpZiAobW9kaWYgPiAwKSB7XG4gICAgICAgIGFsdGVybmF0aXZlRGljZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZUJvbnVzJylcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHJvbGxcbiAgICBpZiAoXG4gICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzQ3JpdCAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG4gICAgKSB7XG4gICAgICByb2xsID0gUm9sbC5mcm9tRGF0YShDb0M3RGljZS5jcml0MDEpXG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKVxuICAgICkge1xuICAgICAgcm9sbCA9IFJvbGwuZnJvbURhdGEoQ29DN0RpY2UuZnVtYmxlOTkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJvbGwgPSBhd2FpdCBuZXcgUm9sbChcbiAgICAgICAgJzFkdCcgK1xuICAgICAgICAgIChhbHRlcm5hdGl2ZURpY2UgIT09ICcnXG4gICAgICAgICAgICA/ICcrMWRvWycgKyBhbHRlcm5hdGl2ZURpY2UgKyAnXSdcbiAgICAgICAgICAgIDogJysxZHQnXG4gICAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMobW9kaWYpKSArXG4gICAgICAgICAgJysxZDEwJ1xuICAgICAgKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICB1bml0OiB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByZXN1bHRzOiBbXVxuICAgICAgfSxcbiAgICAgIHRlbnM6IHtcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICB9LFxuICAgICAgdG90YWw6IDAsXG4gICAgICByb2xsXG4gICAgfVxuXG4gICAgaWYgKHJvbGxNb2RlKSByZXN1bHQucm9sbE1vZGUgPSByb2xsTW9kZVxuICAgIGlmIChoaWRlRGljZSkgcmVzdWx0LmhpZGVEaWNlID0gaGlkZURpY2VcbiAgICBmb3IgKGNvbnN0IGQgb2Ygcm9sbC5kaWNlKSB7XG4gICAgICBpZiAoZCBpbnN0YW5jZW9mIENPTkZJRy5EaWNlLnRlcm1zLnQpIHtcbiAgICAgICAgcmVzdWx0LnRlbnMucmVzdWx0cy5wdXNoKGQudG90YWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQudW5pdC50b3RhbCA9IGQudG90YWwgPT09IDEwID8gMCA6IGQudG90YWxcbiAgICAgICAgcmVzdWx0LnVuaXQucmVzdWx0cy5wdXNoKHJlc3VsdC51bml0LnRvdGFsKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobW9kaWYgPCAwKSB7XG4gICAgICByZXN1bHQudGVucy50b3RhbCA9XG4gICAgICAgIHJlc3VsdC51bml0LnRvdGFsID09PSAwICYmIHJlc3VsdC50ZW5zLnJlc3VsdHMuaW5jbHVkZXMoMClcbiAgICAgICAgICA/IDEwMFxuICAgICAgICAgIDogTWF0aC5tYXgoLi4ucmVzdWx0LnRlbnMucmVzdWx0cylcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC51bml0LnRvdGFsID09PSAwKSB7XG4gICAgICBjb25zdCBkaWNlID0gcmVzdWx0LnRlbnMucmVzdWx0cy5maWx0ZXIodCA9PiB0ID4gMClcbiAgICAgIHJlc3VsdC50ZW5zLnRvdGFsID0gZGljZS5sZW5ndGggPT09IDAgPyAxMDAgOiBNYXRoLm1pbiguLi5kaWNlKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQudGVucy50b3RhbCA9IE1hdGgubWluKC4uLnJlc3VsdC50ZW5zLnJlc3VsdHMpXG4gICAgfVxuICAgIHJlc3VsdC50b3RhbCA9IHJlc3VsdC51bml0LnRvdGFsICsgcmVzdWx0LnRlbnMudG90YWxcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2hvd1JvbGxEaWNlM2QgKHJvbGwpIHtcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgY29uc3Qgc3luY0RpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzeW5jRGljZTNkJylcblxuICAgICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICAgIHdoaXNwZXI6IG51bGwsXG4gICAgICAgIGJsaW5kOiBmYWxzZVxuICAgICAgfVxuICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcblxuICAgICAgYXdhaXQgZ2FtZS5kaWNlM2Quc2hvd0ZvclJvbGwoXG4gICAgICAgIHJvbGwsXG4gICAgICAgIGdhbWUudXNlcixcbiAgICAgICAgc3luY0RpY2UsXG4gICAgICAgIGNoYXREYXRhLndoaXNwZXIsXG4gICAgICAgIGNoYXREYXRhLmJsaW5kXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNvbWJpbmVkUm9sbCAob3B0aW9ucykge1xuICAgIG9wdGlvbnMucG9vbCA9IG9wdGlvbnMucG9vbCA/PyB7fVxuICAgIG9wdGlvbnMucG9vbFsnMCddID0gZmFsc2VcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucy5wb29sKS5tYXAodiA9PiBwYXJzZUludCh2LCAxMCkpXG4gICAgbGV0IHBlbmFsdHlEaWNlID0gTWF0aC5hYnMoTWF0aC5taW4oMCwgTWF0aC5taW4oLi4ua2V5cykpKVxuICAgIGxldCBib251c0RpY2UgPSBNYXRoLm1heCgwLCBNYXRoLm1heCguLi5rZXlzKSlcbiAgICBjb25zdCBoYXNEU04gPSBnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlXG5cbiAgICBjb25zdCBwb29sID0gW11cbiAgICBwb29sLnB1c2goJzFkdCsxZDEwJylcblxuICAgIGlmIChwZW5hbHR5RGljZSA+IDApIHtcbiAgICAgIHBvb2wucHVzaChcbiAgICAgICAgKGhhc0RTTlxuICAgICAgICAgID8gJysxZG9bJyArIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZVBlbmFsdHknKSArICddJ1xuICAgICAgICAgIDogJzFkdCdcbiAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMocGVuYWx0eURpY2UpKVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoYm9udXNEaWNlID4gMCkge1xuICAgICAgcG9vbC5wdXNoKFxuICAgICAgICAoaGFzRFNOXG4gICAgICAgICAgPyAnKzFkb1snICsgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllQm9udXMnKSArICddJ1xuICAgICAgICAgIDogJzFkdCdcbiAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMoYm9udXNEaWNlKSlcbiAgICAgIClcbiAgICB9XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IG5ldyBSb2xsKHBvb2wuam9pbignJykpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIGdyb3Vwczoge1xuICAgICAgICBiYXNlRGllOiAwLFxuICAgICAgICBwZW5hbHR5RGljZTogW10sXG4gICAgICAgIGJvbnVzRGljZTogW11cbiAgICAgIH0sXG4gICAgICB1bml0OiAwLFxuICAgICAgcm9sbFxuICAgIH1cbiAgICBsZXQgYmFzZVNldCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBkIG9mIHJvbGwuZGljZSkge1xuICAgICAgaWYgKGQgaW5zdGFuY2VvZiBDT05GSUcuRGljZS50ZXJtcy50KSB7XG4gICAgICAgIGlmICghYmFzZVNldCkge1xuICAgICAgICAgIHJlc3VsdC5ncm91cHMuYmFzZURpZSA9IGQudG90YWxcbiAgICAgICAgICBiYXNlU2V0ID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHBlbmFsdHlEaWNlID4gMCkge1xuICAgICAgICAgIHJlc3VsdC5ncm91cHMucGVuYWx0eURpY2UucHVzaChkLnRvdGFsKVxuICAgICAgICAgIHBlbmFsdHlEaWNlLS1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJvbnVzRGljZS5wdXNoKGQudG90YWwpXG4gICAgICAgICAgYm9udXNEaWNlLS1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnVuaXQgPSBkLnRvdGFsID09PSAxMCA/IDAgOiBkLnRvdGFsXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb3V0cHV0ID0ge31cblxuICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMucG9vbCkge1xuICAgICAgb3V0cHV0W2tleV0gPSB7XG4gICAgICAgIHVuaXQ6IHtcbiAgICAgICAgICB0b3RhbDogcmVzdWx0LnVuaXQsXG4gICAgICAgICAgcmVzdWx0czogW3Jlc3VsdC51bml0XVxuICAgICAgICB9LFxuICAgICAgICB0ZW5zOiB7XG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgcmVzdWx0czogW11cbiAgICAgICAgfSxcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJvbGxcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1vZGlmID0gcGFyc2VJbnQoa2V5LCAxMClcbiAgICAgIGxldCBtb2RpZmllciA9IG1vZGlmXG4gICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChyZXN1bHQuZ3JvdXBzLmJhc2VEaWUpXG4gICAgICBmb3IgKGNvbnN0IG9mZnNldCA9IE1hdGguYWJzKG1vZGlmaWVyKTsgbW9kaWZpZXIgPCAwOyBtb2RpZmllcisrKSB7XG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMucmVzdWx0cy5wdXNoKFxuICAgICAgICAgIHJlc3VsdC5ncm91cHMucGVuYWx0eURpY2VbbW9kaWZpZXIgKyBvZmZzZXRdXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qgb2Zmc2V0ID0gbW9kaWZpZXI7IG1vZGlmaWVyID4gMDsgbW9kaWZpZXItLSkge1xuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJvbnVzRGljZVtNYXRoLmFicyhtb2RpZmllciAtIG9mZnNldCldXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChtb2RpZiA8IDApIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9XG4gICAgICAgICAgb3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCAmJiBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMuaW5jbHVkZXMoMClcbiAgICAgICAgICAgID8gMTAwXG4gICAgICAgICAgICA6IE1hdGgubWF4KC4uLm91dHB1dFtrZXldLnRlbnMucmVzdWx0cylcbiAgICAgIH0gZWxzZSBpZiAob3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCkge1xuICAgICAgICBjb25zdCBkaWNlID0gb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLmZpbHRlcih0ID0+IHQgPiAwKVxuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnRvdGFsID0gZGljZS5sZW5ndGggPT09IDAgPyAxMDAgOiBNYXRoLm1pbiguLi5kaWNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9IE1hdGgubWluKC4uLm91dHB1dFtrZXldLnRlbnMucmVzdWx0cylcbiAgICAgIH1cbiAgICAgIG91dHB1dFtrZXldLnRvdGFsID0gb3V0cHV0W2tleV0udW5pdC50b3RhbCArIG91dHB1dFtrZXldLnRlbnMudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLy8gUHJlZGV0ZXJtaW5lZCB2YWx1ZSBvZiBkaWNlLCB1c2VkIG9ubHkgZm9yIERFViBhbmQgdGVzdCBwdXJwb3Nlc1xuICBzdGF0aWMgZnVtYmxlOTkgPSB7XG4gICAgY2xhc3M6ICdSb2xsJyxcbiAgICBvcHRpb25zOiB7fSxcbiAgICBkaWNlOiBbXSxcbiAgICBmb3JtdWxhOiAnMWR0ICsgMWQxMCcsXG4gICAgdGVybXM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdDb0M3RGVjYWRlckRpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiA5LFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ09wZXJhdG9yVGVybScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG9wZXJhdG9yOiAnKydcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsYXNzOiAnRGllJyxcbiAgICAgICAgb3B0aW9uczoge30sXG4gICAgICAgIGV2YWx1YXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtYmVyOiAxLFxuICAgICAgICBmYWNlczogMTAsXG4gICAgICAgIG1vZGlmaWVyczogW10sXG4gICAgICAgIHJlc3VsdHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByZXN1bHQ6IDksXG4gICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICBdLFxuICAgIHRvdGFsOiA5OSxcbiAgICBldmFsdWF0ZWQ6IHRydWVcbiAgfVxuXG4gIHN0YXRpYyBjcml0MDEgPSB7XG4gICAgY2xhc3M6ICdSb2xsJyxcbiAgICBvcHRpb25zOiB7fSxcbiAgICBkaWNlOiBbXSxcbiAgICBmb3JtdWxhOiAnMWR0ICsgMWQxMCcsXG4gICAgdGVybXM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdDb0M3RGVjYWRlckRpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiAxMCxcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdPcGVyYXRvclRlcm0nLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBvcGVyYXRvcjogJysnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ0RpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiAxLFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgXSxcbiAgICB0b3RhbDogMSxcbiAgICBldmFsdWF0ZWQ6IHRydWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgSXRlbSwgUm9sbCwgVGV4dEVkaXRvciwgVG9rZW4sIHVpLCBmcm9tVXVpZCAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0NJREVkaXRvciB9IGZyb20gJy4uL2FwcHMvY29jLWlkLWVkaXRvci5qcydcblxuLyoqXG4gKiBPdmVycmlkZSBhbmQgZXh0ZW5kIHRoZSBiYXNpYyA6Y2xhc3M6YEl0ZW1gIGltcGxlbWVudGF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbSBleHRlbmRzIEl0ZW0ge1xuICAvKiogQ3JlYXRlIGRlcml2ZWQgZG9jdW1lbnQgY2xhc3NlcyBmb3Igc3BlY2lmaWMgSXRlbSB0eXBlcyAqL1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIC8qKiBAc2VlIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3NlcyBpbiBtb2R1bGUvc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzICovXG4gICAgaWYgKGRhdGEudHlwZSBpbiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMgJiYgIWNvbnRleHQ/LmV4dGVuZGVkKSB7XG4gICAgICAvKipcbiAgICAgICAqIFdoZW4gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgbmV3IGNsYXNzIHdpbGwgY2FsbCBpdCdzIHN1cGVyKCksXG4gICAgICAgKiB0aGUgZXh0ZW5kZWQgZmxhZyB3aWxsIGJlIHRydWUsIHRodXMgYnlwYXNzaW5nIHRoaXMgd2hvbGUgcHJvY2Vzc1xuICAgICAgICogYW5kIHJlc3VtZSBkZWZhdWx0IGJlaGF2aW9yXG4gICAgICAgKi9cbiAgICAgIHJldHVybiBuZXcgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzW2RhdGEudHlwZV0oZGF0YSwge1xuICAgICAgICAuLi57IGV4dGVuZGVkOiB0cnVlIH0sXG4gICAgICAgIC4uLmNvbnRleHRcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoZGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2tpbGxzLnN2ZydcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3RhdHVzJykge1xuICAgICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvYXVyYS5zdmcnXG4gICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL3N3b3JkLnN2ZydcbiAgICAgIH1cbiAgICB9XG4gICAgLyoqIERlZmF1bHQgYmVoYXZpb3IsIGp1c3QgY2FsbCBzdXBlcigpIGFuZCBkbyBhbGwgdGhlIGRlZmF1bHQgSXRlbSBpbml0cyAqL1xuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICBhc3luYyBfY3JlYXRlRG9jdW1lbnRMaW5rIChldmVudERhdGEsIHsgcmVsYXRpdmVUbywgbGFiZWwgfSA9IHt9KSB7XG4gICAgaWYgKHR5cGVvZiBldmVudERhdGEudHlwZSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIGV2ZW50RGF0YS51dWlkID09PSAnc3RyaW5nJyAmJiBldmVudERhdGEudHlwZSA9PT0gJ0l0ZW0nICYmIGV2ZW50RGF0YS51dWlkLm1hdGNoKC9eQWN0b3JcXC4vKSAmJiByZWxhdGl2ZVRvIGluc3RhbmNlb2YgQ09ORklHLkpvdXJuYWxFbnRyeVBhZ2UuZG9jdW1lbnRDbGFzcykge1xuICAgICAgLy8gSWYgZHJvcHBpbmcgYSBza2lsbC93ZWFwb24gZnJvbSBhbiBBY3RvciBvbnRvIGEgSm91cm5hbCBFbnRyeSBQYWdlIGNvbnZlcnQgdG8gYSBjaGVjayBsaW5rXG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZXZlbnREYXRhLnV1aWQpXG4gICAgICBpZiAoWydza2lsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICAgIHJldHVybiAnQGNvYzcuY2hlY2tbdHlwZTonICsgaXRlbS50eXBlICsgJyxuYW1lOicgKyBpdGVtLm5hbWUgKyAnXSdcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl9jcmVhdGVEb2N1bWVudExpbmsoZXZlbnREYXRhLCB7IHJlbGF0aXZlVG8sIGxhYmVsIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0IGljb25MYW5ndWFnZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3NraWxscy9sYW5ndWFnZS5zdmcnXG4gIH1cblxuICBzdGF0aWMgZ2V0IGZsYWdzICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWFsZnVuY3Rpb246ICdtYWxmYydcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIG9uIG9mIHRoZSBpdGVtIHByb3BlcnR5IGluIGRhdGEuZGF0YS5wcm9wZXJ0aWVzXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eUlkIDogbmFtZSBmb3IgdGhlIHByb3BlcnR5IHRvIHRvZ2dsZVxuICAgKi9cbiAgYXN5bmMgdG9nZ2xlUHJvcGVydHkgKHByb3BlcnR5SWQsIG92ZXJyaWRlID0gZmFsc2UpIHtcbiAgICBsZXQgY2hlY2tlZFByb3BzID0ge31cbiAgICBsZXQgZmlnaHRpbmdcbiAgICBsZXQgZmlyZWFybXNcbiAgICBpZiAodHlwZW9mIENPQzcuZXJhc1twcm9wZXJ0eUlkXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVybiBDb0NJREVkaXRvci5lcmFUb2dnbGUodGhpcywgcHJvcGVydHlJZClcbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3dlYXBvbicgJiYgIW92ZXJyaWRlKSB7XG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2FoZGInKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5haGRiKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFoZGInOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFkZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWhkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnYWRkYicpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmFkZGIpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWRkYic6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWhkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5hZGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdzaG90Z3VuJykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5ybmdkJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5tZWxlZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4nOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUudmFsdWUnOiBudWxsLFxuICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5leHRyZW1lLmRhbWFnZSc6IG51bGwsXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmxvbmcudmFsdWUnOiBudWxsLFxuICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdtZWxlZScgfHwgcHJvcGVydHlJZCA9PT0gJ3JuZ2QnKSB7XG4gICAgICAgIGxldCBtZWxlZVdlYXBvblxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ21lbGVlJyAmJiAhdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnICYmIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMubWVsZWUpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdybmdkJyAmJiAhdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAncm5nZCcgJiYgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1lbGVlV2VhcG9uKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5ybmdkJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bic6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmJyc3QnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5hdXRvJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZGJybCc6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5tZWxlZSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QnOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICdza2lsbCcgJiYgIW92ZXJyaWRlKSB7XG4gICAgICBsZXQgbW9kaWYgPSBmYWxzZVxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdjb21iYXQnKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQpIHtcbiAgICAgICAgICAvLyBDbG9zZSBjb21iYXQgYnkgZGVmYXVsdFxuICAgICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgICAgICBmaWdodGluZyA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgZmlyZWFybXMgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0uc3BlY2lhbGl6YXRpb24nOiAnJyxcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtb2RpZiA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdmaWdodGluZycpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgICAgZmlyZWFybXMgPSBmYWxzZVxuICAgICAgICAgIGZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpcmVhcm1zID0gdHJ1ZVxuICAgICAgICAgIGZpZ2h0aW5nID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBtb2RpZiA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdmaXJlYXJtJykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICAgIGZpcmVhcm1zID0gdHJ1ZVxuICAgICAgICAgIGZpZ2h0aW5nID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaXJlYXJtcyA9IGZhbHNlXG4gICAgICAgICAgZmlnaHRpbmcgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgbW9kaWYgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChtb2RpZikge1xuICAgICAgICAvLyBzZXQgc3BlY2lhbGlzYXRpb24gaWYgZmlnaHRpbmcgb3IgZmlyZWFybVxuICAgICAgICBpZiAoZmlnaHRpbmcpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLnNraWxsTmFtZSxcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lKVxuICAgICAgICAgIClcbiAgICAgICAgICBjaGVja2VkUHJvcHMubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHMuc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcmVhcm1zKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5za2lsbE5hbWUsXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5maXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lKVxuICAgICAgICAgIClcbiAgICAgICAgICBjaGVja2VkUHJvcHMubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHMuc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3NwZWNpYWwnKSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllc1twcm9wZXJ0eUlkXSkge1xuICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiBmYWxzZSxcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiBmYWxzZSxcbiAgICAgICAgICAnc3lzdGVtLnNwZWNpYWxpemF0aW9uJzogJycsXG4gICAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IHRydWUsXG4gICAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgdGhpcy5zeXN0ZW0uc2tpbGxOYW1lICsgJyknXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoY2hlY2tlZFByb3BzKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpdGVtID0gYXdhaXQgdGhpcy51cGRhdGUoY2hlY2tlZFByb3BzKVxuICAgICAgcmV0dXJuIGl0ZW1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgcHJvcE5hbWUgPSBgc3lzdGVtLnByb3BlcnRpZXMuJHtwcm9wZXJ0eUlkfWBcbiAgICAgIGNvbnN0IHByb3BWYWx1ZSA9ICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW3Byb3BlcnR5SWRdXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtwcm9wTmFtZV06IHByb3BWYWx1ZSB9KS50aGVuKGl0ZW0gPT4ge1xuICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBoYXNQcm9wZXJ0eSAocHJvcGVydHlJZCkge1xuICAgIHJldHVybiB0aGlzLmlzSW5jbHVkZWRJblNldCgncHJvcGVydGllcycsIHByb3BlcnR5SWQpXG4gIH1cblxuICBnZXQgc2hvcnROYW1lICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm5hbWVcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVJvbGwgKHJvbGwpIHtcbiAgICBpZiAoJ3VwZGF0ZVJvbGwnIGluIHRoaXMuc2hlZXQpIHJldHVybiBhd2FpdCB0aGlzLnNoZWV0LnVwZGF0ZVJvbGwocm9sbClcbiAgICBlbHNlIGlmICgndXBkYXRlUm9sbCcgaW4gdGhpcykgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlUm9sbChyb2xsKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHN0YXRpYyBnZXROYW1lUGFydHNTcGVjIChza2lsbE5hbWUsIHNwZWNpYWxpemF0aW9uKSB7XG4gICAgaWYgKCFzcGVjaWFsaXphdGlvbikge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogJycsXG4gICAgICAgIHNraWxsTmFtZVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzcGVjTmFtZVJlZ2V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICdeKCcgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKHNwZWNpYWxpemF0aW9uKSArICcpXFxcXHMqXFxcXCgoLispXFxcXCkkJyxcbiAgICAgICdpJ1xuICAgIClcbiAgICBjb25zdCBtYXRjaCA9IHNraWxsTmFtZS5tYXRjaChzcGVjTmFtZVJlZ2V4KVxuICAgIGlmIChtYXRjaCkge1xuICAgICAgc3BlY2lhbGl6YXRpb24gPSBtYXRjaFsxXVxuICAgICAgc2tpbGxOYW1lID0gbWF0Y2hbMl1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJyxcbiAgICAgIHNwZWNpYWxpemF0aW9uLFxuICAgICAgc2tpbGxOYW1lXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldE5hbWVXaXRob3V0U3BlYyAoaXRlbSkge1xuICAgIGlmIChpdGVtIGluc3RhbmNlb2YgQ29DN0l0ZW0pIHtcbiAgICAgIGlmIChpdGVtLnN5c3RlbT8ucHJvcGVydGllcz8uc3BlY2lhbCAmJiB0eXBlb2YgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiYgdHlwZW9mIGl0ZW0uc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gaXRlbS5za2lsbE5hbWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGl0ZW0ubmFtZVxuICB9XG5cbiAgc3RhdGljIGlzQW55U3BlYyAoaXRlbSkge1xuICAgIGlmIChpdGVtLnR5cGUgIT09ICdza2lsbCcgfHwgIWl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIFtcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnlTcGVjTmFtZScpLnRvTG93ZXJDYXNlKCksXG4gICAgICAnYW55J1xuICAgIF0uaW5jbHVkZXMoQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzLnNraWxsLmd1ZXNzTmFtZVBhcnRzKGl0ZW0ubmFtZSkuc2tpbGxOYW1lLnRvTG93ZXJDYXNlKCkpXG4gIH1cblxuICBhc3luYyBjaGVja1NraWxsUHJvcGVydGllcyAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuXG4gICAgY29uc3QgY2hlY2tlZFByb3BzID0ge31cbiAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQpIHtcbiAgICAgIC8vIGlmIHNraWxsIGlzIG5vdCBhIHNwZWNpYWxpc2F0aW9uIG1ha2UgaXQgYSBzcGVjaWFsaXNhdGlvblxuICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsID0gdHJ1ZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnXSA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gSWYgc2tpbGwgaXMgY29tYmF0IHNraWxsIGFuZCBubyBzcGVjaWFsaXNhdGlvbiBzZXQgdGhlbiBtYWtlIGl0IGEgZmlnaHRpbmcoIGNsb3NlY29tYmF0KSBza2lsbFxuICAgICAgaWYgKFxuICAgICAgICAhdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyAmJlxuICAgICAgICAhdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyA9IHRydWVcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyddID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBpZiBza2lsbCBpcyBjbG9zZSBjb21iYXQgd2l0aG91dCBzcGVjaWFsaXNhdGlvbiBuYW1lIG1ha2Ugc2V0IGl0IGFjY29yZGluZyB0byB0aGUgZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyAmJlxuICAgICAgICAoIXRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uIHx8IHRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uID09PSAnJylcbiAgICAgICkge1xuICAgICAgICB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgLy8gaWYgc2tpbGwgaXMgcmFuZ2UgY29tYmF0IHdpdGhvdXQgYSBzcGVjaWFsaXNhdGlvbiBuYW1lIG1ha2Ugc2V0IGl0IGFjY29yZGluZyB0byB0aGUgZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gJiZcbiAgICAgICAgKCF0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiB8fCB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9PT0gJycpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5maXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gZmFsc2VcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyddID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtID0gZmFsc2VcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJ10gPSBmYWxzZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyhjaGVja2VkUHJvcHMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoZWNrZWRQcm9wcylcbiAgICB9XG5cbiAgICByZXR1cm4gY2hlY2tlZFByb3BzXG4gIH1cblxuICBpc0luY2x1ZGVkSW5TZXQgKHNldCwgcHJvcGVydHlJZCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW1bc2V0XSkgdGhpcy5zeXN0ZW1bc2V0XSA9IFtdXG4gICAgY29uc3QgcHJvcGVydHlJbmRleCA9IHRoaXMuc3lzdGVtW3NldF0uaW5kZXhPZihwcm9wZXJ0eUlkKVxuICAgIGlmIChwcm9wZXJ0eUluZGV4ID4gLTEpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBmbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3MpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5kZXZlbG9wZW1lbnQnOiB0cnVlIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdW5mbGFnRm9yRGV2ZWxvcGVtZW50ICgpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3MpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5kZXZlbG9wZW1lbnQnOiBmYWxzZSB9KVxuICAgIH1cbiAgfVxuXG4gIGdldCBkZXZlbG9wZW1lbnRGbGFnICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJdGVtRmxhZygnZGV2ZWxvcGVtZW50JylcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZUl0ZW1GbGFnIChmbGFnTmFtZSwgZXJhc2VBZGp1c3RtZW50ID0gdHJ1ZSkge1xuICAgIGNvbnN0IGZsYWdWYWx1ZSA9ICF0aGlzLmdldEl0ZW1GbGFnKGZsYWdOYW1lKVxuICAgIGNvbnN0IG5hbWUgPSBgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YFxuICAgIGlmIChcbiAgICAgIChmbGFnTmFtZSA9PT0gJ29jY3VwYXRpb24nIHx8IGZsYWdOYW1lID09PSAnYXJjaGV0eXBlJykgJiZcbiAgICAgICFmbGFnVmFsdWUgJiZcbiAgICAgIGVyYXNlQWRqdXN0bWVudFxuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICBbYHN5c3RlbS5hZGp1c3RtZW50cy4ke2ZsYWdOYW1lfWBdOiBudWxsLFxuICAgICAgICBbbmFtZV06IGZsYWdWYWx1ZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGZsYWdOYW1lID09PSAnZGV2ZWxvcGVtZW50Jykge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpIHx8IGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxYcEdhaW5EaXNhYmxlZCcpKVxuICAgICAgfVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBzZXRJdGVtRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YF06IHRydWUgfSlcbiAgfVxuXG4gIGFzeW5jIHVuc2V0SXRlbUZsYWcgKGZsYWdOYW1lLCBlcmFzZUFkanVzdG1lbnQgPSB0cnVlKSB7XG4gICAgY29uc3QgbmFtZSA9IGBzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXG4gICAgaWYgKFxuICAgICAgKGZsYWdOYW1lID09PSAnb2NjdXBhdGlvbicgfHwgZmxhZ05hbWUgPT09ICdhcmNoZXR5cGUnKSAmJlxuICAgICAgZXJhc2VBZGp1c3RtZW50XG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgIFtgc3lzdGVtLmFkanVzdG1lbnRzLiR7ZmxhZ05hbWV9YF06IG51bGwsXG4gICAgICAgIFtuYW1lXTogZmFsc2VcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmYWxzZSB9KVxuICB9XG5cbiAgZ2V0SXRlbUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MubG9ja2VkID0gdHJ1ZVxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3NbZmxhZ05hbWVdKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uZmxhZ3NbZmxhZ05hbWVdXG4gIH1cblxuICBnZXQgdXNlc0FsdGVybmF0aXZlU2tpbGwgKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnR5cGUgPT09ICd3ZWFwb24nICYmXG4gICAgICAodGhpcy5zeXN0ZW0ucHJvcGVydGllcz8uYXV0byA9PT0gdHJ1ZSB8fFxuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzPy5icnN0ID09PSB0cnVlIHx8XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXM/LnRocm93biA9PT0gdHJ1ZSlcbiAgICApXG4gIH1cblxuICBnZXQgbWF4VXNlc1BlclJvdW5kICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBtdWx0aVNob3QgPSBwYXJzZUludCh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubWF4KVxuICAgIGlmIChpc05hTihtdWx0aVNob3QpKSByZXR1cm4gMFxuICAgIHJldHVybiBtdWx0aVNob3RcbiAgfVxuXG4gIGdldCB1c2VzUGVyUm91bmQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHNpbmdsZVNob3QgPSBwYXJzZUludCh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubm9ybWFsKVxuICAgIGlmIChpc05hTihzaW5nbGVTaG90KSkgcmV0dXJuIDBcbiAgICByZXR1cm4gc2luZ2xlU2hvdFxuICB9XG5cbiAgZ2V0IHVzZXNQZXJSb3VuZFN0cmluZyAoKSB7XG4gICAgbGV0IHVzZXNQZXJSb3VuZFxuICAgIGlmICh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubm9ybWFsKSB7XG4gICAgICB1c2VzUGVyUm91bmQgPSB0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubm9ybWFsXG4gICAgfSBlbHNlIHtcbiAgICAgIHVzZXNQZXJSb3VuZCA9ICcxJ1xuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLm1heCkge1xuICAgICAgdXNlc1BlclJvdW5kICs9IGAoJHt0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubWF4fSlgXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8pIHtcbiAgICAgIHVzZXNQZXJSb3VuZCArPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvbkF1dG8nKX1gXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmJyc3QpIHtcbiAgICAgIHVzZXNQZXJSb3VuZCArPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvbkJyc3QnKX1gXG4gICAgICBpZiAodGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0KSB7XG4gICAgICAgIHVzZXNQZXJSb3VuZCArPSBgKCR7dGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0fSlgXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVzZXNQZXJSb3VuZFxuICB9XG5cbiAgZ2V0IG11bHRpcGxlU2hvdHMgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLm1heFVzZXNQZXJSb3VuZCA8PSAxKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCBzaW5nbGVTaG90ICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMudXNlc1BlclJvdW5kKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCBiYXNlUmFuZ2UgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5yYW5nZS5ub3JtYWwudmFsdWUpXG4gIH1cblxuICBnZXQgbG9uZ1JhbmdlICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0ucmFuZ2UubG9uZy52YWx1ZSlcbiAgfVxuXG4gIGdldCBleHRyZW1lUmFuZ2UgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5yYW5nZS5leHRyZW1lLnZhbHVlKVxuICB9XG5cbiAgZ2V0IHNraWxsUHJvcGVydGllcyAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIFtdXG5cbiAgICBjb25zdCBza2lsbFByb3BlcnRpZXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuc2tpbGxQcm9wZXJ0aWVzKSkge1xuICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZSkge1xuICAgICAgICBza2lsbFByb3BlcnRpZXMucHVzaChnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2tpbGxQcm9wZXJ0aWVzXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY2FsY3VsYXRlQmFzZSAoYWN0b3IsIGRhdGEpIHtcbiAgICBpZiAoZGF0YS50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gbnVsbFxuICAgIGlmIChTdHJpbmcoZGF0YS5zeXN0ZW0uYmFzZSkuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLmFjdG9yLicpKSB7XG4gICAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZm91bmRyeS51dGlscy5nZXRQcm9wZXJ0eShhY3RvciwgdmFsdWUuc3Vic3RyaW5nKDExKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHZhbHVlXG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgbmV3IFJvbGwoZGF0YS5zeXN0ZW0uYmFzZSwgcGFyc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgICAgIH0pLnRvdGFsXG4gICAgICAgIClcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB2YWx1ZSA9IDBcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH1cbiAgICByZXR1cm4gIWlzTmFOKHBhcnNlSW50KGRhdGEuc3lzdGVtLmJhc2UpKSA/IHBhcnNlSW50KGRhdGEuc3lzdGVtLmJhc2UpIDogbnVsbFxuICB9XG5cbiAgZ2V0IF9iYXNlICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gW251bGwsIGZhbHNlXVxuICAgIGlmICh0eXBlb2YgdGhpcy5zeXN0ZW0uYmFzZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbdGhpcy5zeXN0ZW0uYmFzZSwgZmFsc2VdXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3lzdGVtLmJhc2UuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZm91bmRyeS51dGlscy5nZXRQcm9wZXJ0eSh0aGlzLCB2YWx1ZS5zdWJzdHJpbmcoNSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCB2YWx1ZVxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFsdWUgPSBNYXRoLmZsb29yKFxuICAgICAgICAgIG5ldyBSb2xsKHRoaXMuc3lzdGVtLmJhc2UsIHBhcnNlZCkuZXZhbHVhdGUoe1xuICAgICAgICAgICAgbWF4aW1pemU6IHRydWVcbiAgICAgICAgICB9KS50b3RhbFxuICAgICAgICApXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdmFsdWUgPSAwXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbdmFsdWUsIHRydWVdXG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICAhaXNOYU4ocGFyc2VJbnQodGhpcy5zeXN0ZW0uYmFzZSkpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYmFzZSlcbiAgICAgICAgOiBudWxsLFxuICAgICAgZmFsc2VcbiAgICBdXG4gIH1cblxuICBhc3luYyBhc3luY0Jhc2UgKCkge1xuICAgIGNvbnN0IGUgPSB0aGlzLl9iYXNlXG4gICAgaWYgKGVbMV0pIHtcbiAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgYFtDT0M3XSAoJHt0aGlzLnBhcmVudD8ubmFtZX0pIEV2YWx1YXRpbmcgc2tpbGwgJHt0aGlzLm5hbWV9OiR7dGhpcy5zeXN0ZW0uYmFzZX0gdG8gJHtlWzBdfWBcbiAgICAgIClcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iYXNlJzogZVswXSB9KVxuICAgIH1cbiAgICByZXR1cm4gZVswXVxuICB9XG5cbiAgZ2V0IGJhc2UgKCkge1xuICAgIGNvbnN0IGUgPSB0aGlzLl9iYXNlXG4gICAgaWYgKGVbMV0pIHtcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iYXNlJzogZVswXSB9KVxuICAgIH1cbiAgICByZXR1cm4gZVswXVxuICB9XG5cbiAgZ2V0QnVsbGV0TGVmdCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hbW1vKSB7XG4gICAgICB0aGlzLnNldEJ1bGxldHMoMClcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hbW1vXG4gIH1cblxuICBhc3luYyByZWxvYWQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IG1heEJ1bGxldCA9IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYnVsbGV0cylcbiAgICAgIDogMVxuICAgIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhtYXhCdWxsZXQpXG4gIH1cblxuICBhc3luYyBzZXRCdWxsZXRzIChidWxsZXRzKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmFtbW8nOiBidWxsZXRzIHx8IDAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZEJ1bGxldCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3QgYnVsbGV0cyA9IGF3YWl0IHRoaXMuZ2V0QnVsbGV0TGVmdCgpXG4gICAgY29uc3QgbWF4QnVsbGV0cyA9IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYnVsbGV0cylcbiAgICAgIDogMVxuICAgIGlmIChidWxsZXRzICsgMSA+PSBtYXhCdWxsZXRzKSBhd2FpdCB0aGlzLnNldEJ1bGxldHMobWF4QnVsbGV0cylcbiAgICBlbHNlIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhidWxsZXRzICsgMSlcbiAgfVxuXG4gIGFzeW5jIHNob290QnVsbGV0cyAoeCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGJ1bGxldHMgPSBhd2FpdCB0aGlzLmdldEJ1bGxldExlZnQoKVxuICAgIGlmICh4ID4gYnVsbGV0cykgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKDApXG4gICAgZWxzZSBhd2FpdCB0aGlzLnNldEJ1bGxldHMoYnVsbGV0cyAtIHgpXG4gIH1cblxuICBzdGF0aWMgbWVyZ2VPcHRpb25hbFNraWxscyAoc2tpbGxMaXN0LCBvcHRpb25zKSB7XG4gICAgY29uc3Qgam9pbnRBcnJheSA9IHNraWxsTGlzdC5jb25jYXQob3B0aW9ucylcbiAgICByZXR1cm4gam9pbnRBcnJheVxuICAgICAgLnJlZHVjZSgobmV3QXJyYXksIGl0ZW0pID0+IHtcbiAgICAgICAgLy8gSWYgc2tpbGwgaXMgbm90IGEgZ2VuZXJpYyBzcGVjIGFuZCBpcyBhbHJlYWR5IGluY2x1ZGVkIHdlIGRvbid0IGFkZCBpdGVtXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pICYmXG4gICAgICAgICAgbmV3QXJyYXkuZmluZChza2lsbCA9PiBza2lsbC5uYW1lID09PSBpdGVtLm5hbWUpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBuZXdBcnJheVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgaXRlbSBpcyBhZGRlZFxuICAgICAgICByZXR1cm4gWy4uLm5ld0FycmF5LCBpdGVtXVxuICAgICAgfSwgW10pXG4gICAgICAuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gIH1cblxuICAvKiogVE9ETyA6IHJpZW4gYSBmYWlyZSBpY2kgISFcbiAgICogR2V0IHRoZSBBY3RvciB3aGljaCBpcyB0aGUgYXV0aG9yIG9mIGEgY2hhdCBjYXJkXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgICAgVGhlIGNoYXQgY2FyZCBiZWluZyB1c2VkXG4gICAqIEByZXR1cm4ge0FjdG9yfG51bGx9ICAgICAgICAgVGhlIEFjdG9yIGVudGl0eSBvciBudWxsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX2dldENoYXRDYXJkQWN0b3IgKGNhcmQpIHtcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChhY3RvcklkKSB8fCBudWxsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgQ2hhdCBNZXNzYWdlIEhlbHBlcnMgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGFuIG9iamVjdCBvZiBjaGF0IGRhdGEgdXNlZCB0byBkaXNwbGF5IGEgY2FyZCBmb3IgdGhlIEl0ZW0gaW4gdGhlIGNoYXQgbG9nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBodG1sT3B0aW9ucyAgICBPcHRpb25zIHVzZWQgYnkgdGhlIFRleHRFZGl0b3IuZW5yaWNoSFRNTCBmdW5jdGlvblxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgQW4gb2JqZWN0IG9mIGNoYXQgZGF0YSB0byByZW5kZXJcbiAgICovXG4gIGFzeW5jIGdldENoYXREYXRhIChodG1sT3B0aW9ucyA9IHt9KSB7XG4gICAgLy8gRm91bmRyeVZUVCB2MTFcbiAgICBodG1sT3B0aW9ucy5hc3luYyA9IHRydWVcbiAgICBjb25zdCBkYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0pXG4gICAgLy8gRml4IDogZGF0YSBjYW4gaGF2ZSBkZXNjcmlwdGlvbiBkaXJlY3RseSBpbiBmaWVsZCwgbm90IHVuZGVyIHZhbHVlLlxuICAgIGlmICh0eXBlb2YgZGF0YS5kZXNjcmlwdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSB7XG4gICAgICAgIHZhbHVlOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICBzcGVjaWFsOiAnJ1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gJydcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSAnJ1xuICAgIH1cbiAgICBjb25zdCBsYWJlbHMgPSBbXVxuXG4gICAgLy8gUmljaCB0ZXh0IGRlc2NyaXB0aW9uXG4gICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICBodG1sT3B0aW9uc1xuICAgIClcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwsXG4gICAgICBodG1sT3B0aW9uc1xuICAgIClcblxuICAgIC8vIEl0ZW0gdHlwZSBzcGVjaWZpYyBwcm9wZXJ0aWVzXG4gICAgY29uc3QgcHJvcHMgPSBbXVxuICAgIGNvbnN0IGZuID0gdGhpc1tgXyR7dGhpcy50eXBlfUNoYXREYXRhYF1cbiAgICBpZiAoZm4pIGZuLmJpbmQodGhpcykoZGF0YSwgbGFiZWxzLCBwcm9wcywgaHRtbE9wdGlvbnMpXG5cbiAgICBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZSkgcHJvcHMucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgcHJvcGVydGllcyBhbmQgcmV0dXJuXG4gICAgZGF0YS5wcm9wZXJ0aWVzID0gcHJvcHMuZmlsdGVyKHAgPT4gISFwKVxuICAgIGRhdGEubGFiZWxzID0gbGFiZWxzXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIF93ZWFwb25DaGF0RGF0YSAoZGF0YSwgbGFiZWxzLCBwcm9wcykge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHByb3BzLnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgbGV0IHNraWxsTGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGwnKVxuICAgIGxldCBza2lsbE5hbWUgPSAnJ1xuICAgIGxldCBmb3VuZCA9IGZhbHNlXG4gICAgaWYgKHRoaXMuc3lzdGVtLnNraWxsLm1haW4uaWQpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbClcbiAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXNlc0FsdGVybmF0aXZlU2tpbGwgJiYgdGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxMYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbHMnKVxuICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5pdGVtcy5nZXQodGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZClcbiAgICAgIGlmIChza2lsbCkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke0NvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbCl9YFxuICAgICAgICBmb3VuZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWZvdW5kKSB7XG4gICAgICBza2lsbE5hbWUgPSB0aGlzLnN5c3RlbS5za2lsbC5tYWluLm5hbWVcbiAgICAgIGlmICh0aGlzLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHRoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke3RoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZX1gXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNraWxsTmFtZSkge1xuICAgICAgbGFiZWxzLnB1c2goe1xuICAgICAgICBuYW1lOiBza2lsbExhYmVsLFxuICAgICAgICB2YWx1ZTogc2tpbGxOYW1lXG4gICAgICB9KVxuICAgIH1cblxuICAgIGxhYmVscy5wdXNoKHtcbiAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25Vc2VzUGVyUm91bmQnKSxcbiAgICAgIHZhbHVlOiB0aGlzLnVzZXNQZXJSb3VuZFN0cmluZ1xuICAgIH0pXG5cbiAgICBsYWJlbHMucHVzaCh7XG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uTWFsZnVuY3Rpb24nKSxcbiAgICAgIHZhbHVlOiB0aGlzLnN5c3RlbS5tYWxmdW5jdGlvbiA/IHRoaXMuc3lzdGVtLm1hbGZ1bmN0aW9uIDogJy0nXG4gICAgfSlcblxuICAgIGlmICh0aGlzLnN5c3RlbS5idWxsZXRzKSB7XG4gICAgICBsYWJlbHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25CdWxsZXRzSW5NYWcnKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY2FuQmVQdXNoZWQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgPT09ICdza2lsbCcgJiYgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5wdXNoKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGltcGFsZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuaW1wbFxuICB9XG5cbiAgZ2V0IGlzRG9kZ2UgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRvZGdlJykudG9Mb3dlckNhc2UoKVxuICAgIClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTlNULCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgUmF5LCBUb2tlbiwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIFJldHVybiA8YT4gZWxlbWVudCBvZiBhIHJvbGwgaW5zdGFuY2UuIGZvdW5kcnkuanMgcmVmOlRleHRFZGl0b3IuX2NyZWF0ZUlubGluZVJvbGxcbiAqIEBwYXJhbSB7Um9sbH0gcm9sbCAgICAgIFRoZSByb2xsIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW5saW5lUm9sbCAocm9sbCkge1xuICBjb25zdCBkYXRhID0ge1xuICAgIGNsczogWydpbmxpbmUtcm9sbCddLFxuICAgIGRhdGFzZXQ6IHt9XG4gIH1cblxuICB0cnkge1xuICAgIGRhdGEuY2xzLnB1c2goJ2lubGluZS1yZXN1bHQnKVxuICAgIGRhdGEucmVzdWx0ID0gcm9sbC50b3RhbFxuICAgIGRhdGEudGl0bGUgPSByb2xsLmZvcm11bGFcbiAgICBkYXRhLmRhdGFzZXQucm9sbCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShyb2xsKSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8vIENvbnN0cnVjdCBhbmQgcmV0dXJuIHRoZSBmb3JtZWQgbGluayBlbGVtZW50XG4gIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgYS5jbGFzc0xpc3QuYWRkKC4uLmRhdGEuY2xzKVxuICBhLnRpdGxlID0gZGF0YS50aXRsZVxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XG4gICAgYS5kYXRhc2V0W2tdID0gdlxuICB9XG4gIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmFzIGZhLWRpY2UtZDIwXCI+PC9pPiAke2RhdGEucmVzdWx0fWBcbiAgcmV0dXJuIGFcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB1c2VkIGZvciBKU09OLnN0cmluZ2lmeSByZXBsYWNlci5cbiAqIEV4Y2x1ZGUgYW55IGtleSBzdGFydGluZyB3aXRoIF9cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfIChrZXksIHZhbHVlKSB7XG4gIC8vIGNvbnZlcnQgUmVnRXhwIHRvIHN0cmluZ1xuICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ18nKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG4vKipcbiAqIEZ1bmN0aW9uIHVzZWQgZm9yIEpTT04uc3RyaW5naWZ5IHJlcGxhY2VyLlxuICogRXhjbHVkZSBhbnkga2V5IHN0YXJ0aW5nIHdpdGggX19cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfXyAoa2V5LCB2YWx1ZSkge1xuICAvLyBjb252ZXJ0IFJlZ0V4cCB0byBzdHJpbmdcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuICByZXR1cm4gdmFsdWUgLy8gcmV0dXJuIGFzIGlzXG59XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaXMgQ1RSTCBrZXkgaXMgcHJlc3NlZFxuICogVXNlZCBmb3IgTUFDIGNvbXBhdC5cbiAqIEBwYXJhbSB7Uy5FdmVudH0gZXZlbnRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0N0cmxLZXkgKGV2ZW50KSB7XG4gIGlmIChldmVudCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gKFxuICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICBldmVudC5rZXlDb2RlID09PSAyMjRcbiAgKVxufVxuXG5leHBvcnQgY2xhc3MgY2hhdEhlbHBlciB7XG4gIHN0YXRpYyBoeXBoZW5Ub0NhbWVsQ2FzZSAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8tKFthLXpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nWzFdLnRvVXBwZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU1lc3NhZ2UgKHRpdGxlLCBtZXNzYWdlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHt9XG4gICAgbWVzc2FnZURhdGEuZmxhdm9yID0gdGl0bGVcbiAgICBtZXNzYWdlRGF0YS5zcGVha2VyID0gb3B0aW9ucy5zcGVha2VyIHx8IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGlmIChvcHRpb25zLndoaXNwZXIpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgbWVzc2FnZURhdGEud2hpc3BlciA9IG9wdGlvbnMud2hpc3BlclxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucm9sbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnJvbGwgPSBvcHRpb25zLnJvbGxcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTFxuICAgICAgbWVzc2FnZURhdGEucm9sbE1vZGUgPSBDT05TVC5ESUNFX1JPTExfTU9ERVMuU0VMRlxuICAgIH1cbiAgICBtZXNzYWdlRGF0YS51c2VyID0gZ2FtZS51c2VyLmlkXG4gICAgbWVzc2FnZURhdGEuY29udGVudCA9IG1lc3NhZ2VcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShtZXNzYWdlRGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgY2FtZWxDYXNlVG9IeXBoZW4gKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gJy0nICsgc3RyaW5nLnRvTG93ZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgLy8gQ2FzZSAwIC0gYSBkb2N1bWVudCBVdWlkXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWQoa2V5KSkge1xuICAgICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWRQYWNrKGtleSkpIHJldHVybiBmcm9tVXVpZChrZXkpIC8vIFRPRE8gQ2hlY2sgd2UgY2FuIGRvIHRoYXRcbiAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZChrZXkpXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfVxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShrZXkpXG4gICAgICByZXR1cm4gdG9rZW4/LmFjdG9yXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0U3BlYWtlckZyb21LZXkgKGFjdG9yS2V5KSB7XG4gICAgY29uc3Qgc3BlYWtlciA9IHt9XG4gICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgaWYgKGFjdG9yS2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGFjdG9yS2V5LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBzcGVha2VyLnRva2VuID0gdG9rZW5JZFxuICAgICAgc3BlYWtlci5zY2VuZSA9IHNjZW5lSWRcbiAgICAgIGlmIChhY3Rvci50b2tlbj8ubmFtZSkgc3BlYWtlci5hbGlhcyA9IGFjdG9yLnRva2VuLm5hbWVcbiAgICAgIHNwZWFrZXIuYWN0b3IgPSBhY3Rvci5pZFxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyLmFjdG9yID0gYWN0b3JLZXlcbiAgICAgIHNwZWFrZXIuYWxpYXMgPSBhY3Rvci5uYW1lXG4gICAgfVxuICAgIHJldHVybiBzcGVha2VyXG4gIH1cblxuICBzdGF0aWMgYXR0YWNoT2JqZWN0VG9FbGVtZW50IChvYmplY3QsIGVsZW1lbnQsIG9iamVjdE5hbWUgPSAnJykge1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhvYmplY3QpKSB7XG4gICAgICBpZiAoIXByb3Auc3RhcnRzV2l0aCgnXycpKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0W3Byb3BdID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KFxuICAgICAgICAgICAgb2JqZWN0W3Byb3BdLFxuICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgIGAke29iamVjdE5hbWV9OiR7cHJvcH06YFxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtZW50LmRhdGFzZXRbYCR7b2JqZWN0TmFtZX0ke3Byb3B9YF0gPSBvYmplY3RbcHJvcF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRPYmplY3RGcm9tRWxlbWVudCAob2JqZWN0LCBlbGVtZW50KSB7XG4gICAgZnVuY3Rpb24gZGVzZXJpYWxpemUgKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCc6JykpIHtcbiAgICAgICAgY29uc3QgcyA9IGtleS5zbGljZSgxKVxuICAgICAgICBjb25zdCBvYmpQcm9wID0gcy5zbGljZShzLmluZGV4T2YoJzonKSArIDEpXG4gICAgICAgIGNvbnN0IG9iak5hbWUgPSBzLnN1YnN0cmluZygwLCBzLmluZGV4T2YoJzonKSlcbiAgICAgICAgaWYgKHR5cGVvZiBvYmpbb2JqTmFtZV0gPT09ICd1bmRlZmluZWQnKSBvYmpbb2JqTmFtZV0gPSB7fVxuICAgICAgICBkZXNlcmlhbGl6ZShvYmpbb2JqTmFtZV0sIG9ialByb3AsIHZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIG9ialtrZXldID0gdHJ1ZVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykgb2JqW2tleV0gPSBmYWxzZVxuICAgICAgICBlbHNlIGlmIChOdW1iZXIodmFsdWUpLnRvU3RyaW5nKCkgPT09IHZhbHVlKSBvYmpba2V5XSA9IE51bWJlcih2YWx1ZSlcbiAgICAgICAgZWxzZSBvYmpba2V5XSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFlbGVtZW50IHx8ICFvYmplY3QpIHJldHVyblxuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhlbGVtZW50LmRhdGFzZXQpKSB7XG4gICAgICBpZiAocHJvcCA9PT0gJ3RlbXBsYXRlJykgcmV0dXJuXG4gICAgICBkZXNlcmlhbGl6ZShvYmplY3QsIHByb3AsIGVsZW1lbnQuZGF0YXNldFtwcm9wXSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0VG9rZW5Gcm9tS2V5IChrZXkpIHtcbiAgICBpZiAoIWtleSkgcmV0dXJuIG51bGxcbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICBjb25zdCB0b2tlbkRvYyA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXT8udG9rZW5cbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgaWYgKCF0b2tlbi5zY2VuZSkgdG9rZW4uc2NlbmUgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShzY2VuZS5kb2N1bWVudClcbiAgICAgICAgcmV0dXJuIHRva2VuXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGtleSlcbiAgICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yVG9rZW4oYWN0b3IpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yVG9rZW4gKGFjdG9yKSB7XG4gICAgaWYgKCFhY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gYWN0b3IudG9rZW4gfHwgYWN0b3IucHJvdG90eXBlVG9rZW5cbiAgICAvKioqKioqKioqKioqKioqKioqKi9cbiAgICAvLyAvLyBDYXNlIDAgLSBBY3RvciBpcyBhIHRva2VuIChzeW50aGV0aWMgYWN0b3IpLCByZXR1cm4gdGhhdCB0b2tlbi5cbiAgICAvLyBpZihhY3Rvci5pc1Rva2VuKSByZXR1cm4gYWN0b3IudG9rZW47XG4gICAgLy8gZWxzZXtcbiAgICAvLyAgLy8gQ2FzZSAxIC0gQWN0b3IgaXMgbm90IGEgdG9rZW4sIGZpbmQgaWYgYSB0b2tlbiBleGlzdCBmb3IgdGhhdCBhY3Rvci5cbiAgICAvLyAgY29uc3QgYWN0b3JUb2tlbnMgPSBhY3Rvci5nZXRBY3RpdmVUb2tlbnMoKTtcbiAgICAvLyAgaWYoIGFjdG9yVG9rZW5zLmxlbmd0aCl7XG4gICAgLy8gICAgLy8gQ2FzZSAxLjEgLSBJZiBoZSBoYXMgb25seSBvbmUgVG9rZW4gcmV0dXJuIGl0LlxuICAgIC8vICAgIGlmKCAxID09PSBhY3RvclRva2Vucy5sZW5ndGgpIHJldHVybiBhY3RvclRva2Vuc1swXTtcblxuICAgIC8vICAgIC8vIENhc2UgMS4yIC0gQWN0b3IgaGFzIG11bHRpcGxlIHRva2VucywgZmluZCBpZiBvbmUgb2YgdGhlbSBpcyB0aGUgY29udHJvbGxlZCB0b2tlbi5cbiAgICAvLyAgICBjb25zdCBjb250cm9sbGVkVG9rZW5zID0gYWN0b3JUb2tlbnMuZmlsdGVyKCB0ID0+IHQuX2NvbnRyb2xsZWQpO1xuICAgIC8vICAgIGlmKCBjb250cm9sbGVkVG9rZW5zLmxlbmd0aCl7XG4gICAgLy8gICAgICAvLyBSZXR1cm4gdGhlIDFzdCBjb250cm9sbGVkIHRva2VuLCByaXNlIGEgd2FybmluZyBpZiBoZSBoYXMgbXVsdGlwbGUgY29udHJvbGxlZCB0b2tlbnMuXG4gICAgLy8gICAgICBpZiggdmVyYm9zZSAmJiBjb250cm9sbGVkVG9rZW5zLmxlbmd0aCA+IDEpIHVpLm5vdGlmaWNhdGlvbnMud2FybiggYEFjdG9yICR7YWN0b3IubmFtZX0gaGFzICR7Y29udHJvbGxlZFRva2Vucy5sZW5ndGh9IGNvbnRyb2xsZWQgdG9rZW5zLiBVc2luZyB0aGUgZmlyc3QgZm91bmRgKTtcbiAgICAvLyAgICAgIHJldHVybiBjb250cm9sbGVkVG9rZW5zWzBdO1xuICAgIC8vICAgIH1cblxuICAgIC8vICAgIC8vIENhc2UgMS4zIGFjdG9yIGRvZXNuJ3QgaGF2ZSBhbnkgYWN0aXZlIHRva2VuLiBSZXR1cm4gdGhlIGZpcnN0IHZhbGlkIHRva2VuIGZvciB0aGF0IGFjdG9yIGFuZCByYWlzZSBhIHdhcm5pbmcuXG4gICAgLy8gICAgaWYoIHZlcmJvc2UpIHVpLm5vdGlmaWNhdGlvbnMud2FybiggYEFjdG9yICR7YWN0b3IubmFtZX0gZG9lc24ndCBoYXZlIGFueSBjb250cm9sbGVkIHRva2VuLiBVc2luZyBmaXJzdCB0b2tlbiBmb3VuZC5gKTtcbiAgICAvLyAgICByZXR1cm4gYWN0b3JUb2tlbnNbMF07XG4gICAgLy8gIH1cblxuICAgIC8vICBpZiggdmVyYm9zZSkgdWkubm90aWZpY2F0aW9ucy5lcnJvciggYENvdWxkIG5vdCBmaW4gYW55IHRva2VuIGZvciAke2FjdG9yLm5hbWV9LmApO1xuICAgIC8vICByZXR1cm4gbnVsbDtcbiAgICAvLyB9XG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JJbWdGcm9tS2V5IChhY3RvcktleSkge1xuICAgIGlmICghYWN0b3JLZXkpIHJldHVybiBudWxsXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHtcbiAgICAgIC8vIFRyeSB0byBmaW5kIGEgdG9rZW4uXG4gICAgICBjb25zdCB0b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGFjdG9yS2V5KVxuICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgIGlmICgodG9rZW4uZG9jdW1lbnQgfHwgdG9rZW4pLnRleHR1cmUuc3JjKSB7XG4gICAgICAgICAgaWYgKCh0b2tlbi5kb2N1bWVudCB8fCB0b2tlbikudGV4dHVyZS5zcmMuaW5kZXhPZignKicpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuICh0b2tlbi5kb2N1bWVudCB8fCB0b2tlbikudGV4dHVyZS5zcmNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHtcbiAgICAgIC8vIGlmIG5vIHRva2VuIGZvdW5kIGZvciB0aGF0IGFjdG9yIHJldHVybiB0aGUgcHJvdG90eXBlIHRva2VuIGltYWdlLlxuICAgICAgaWYgKGFjdG9yLnByb3RvdHlwZVRva2VuKSB7XG4gICAgICAgIGlmIChhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyYykge1xuICAgICAgICAgIGlmIChhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyYz8uaW5kZXhPZignKicpID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuIGFjdG9yLnByb3RvdHlwZVRva2VuLnRleHR1cmUuc3JjXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhY3Rvci5pbWdcbiAgfVxuXG4gIHN0YXRpYyBnZXREaXN0YW5jZSAoc3RhcnRUb2tlbiwgZW5kVG9rZW4pIHtcbiAgICAvLyBzdGFydFRva2VuLnVwZGF0ZVNvdXJjZSgpO1xuICAgIC8vIGNhbnZhcy5zaWdodC5pbml0aWFsaXplVG9rZW5zKCk7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIGVuZFRva2VuLmNlbnRlciA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5pZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGlmIChzdGFydFRva2VuLnNjZW5lPy5pZCB8fCBmYWxzZSkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzdGFydFRva2VuLnNjZW5lLmlkKVxuICAgICAgICBpZiAodHlwZW9mIHNjZW5lPy50b2tlbnMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgdG9rZW5zID0gc2NlbmU/LnRva2Vuc1xuICAgICAgICAgICAgLmZpbHRlcih0b2tlbiA9PiB0b2tlbi5hY3Rvci5pZCA9PT0gZW5kVG9rZW4uZGF0YS5kb2N1bWVudC5pZClcbiAgICAgICAgICAgIC5tYXAodG9rZW4gPT4gdG9rZW4ub2JqZWN0KVxuICAgICAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBlbmRUb2tlbiA9IHRva2Vuc1swXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgZGlzdGFuY2UgPSB7XG4gICAgICBncmlkVW5pdDogMCxcbiAgICAgIHZhbHVlOiAwLFxuICAgICAgdW5pdDogY2FudmFzLnNjZW5lLmdyaWQudW5pdHNcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHN0YXJ0VG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2Ygc3RhcnRUb2tlbi5jZW50ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4uY2VudGVyICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgY29uc3QgcmF5ID0gbmV3IFJheShzdGFydFRva2VuLmNlbnRlciwgZW5kVG9rZW4uY2VudGVyKVxuICAgICAgY29uc3Qgc2VnbWVudCA9IFt7IHJheSB9XVxuICAgICAgZGlzdGFuY2UgPSB7XG4gICAgICAgIGdyaWRVbml0OiByYXkuZGlzdGFuY2UgLyBjYW52YXMuc2NlbmUuZ3JpZC5zaXplLFxuICAgICAgICAvLyB2YWx1ZTogKHJheS5kaXN0YW5jZS9jYW52YXMuc2NlbmUuZGF0YS5ncmlkKSpjYW52YXMuc2NlbmUuZGF0YS5ncmlkRGlzdGFuY2UsXG4gICAgICAgIHZhbHVlOiBjYW52YXMuZ3JpZC5tZWFzdXJlRGlzdGFuY2VzKHNlZ21lbnQsIHtcbiAgICAgICAgICBncmlkU3BhY2VzOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdncmlkU3BhY2VzJylcbiAgICAgICAgfSlbMF0sXG4gICAgICAgIHVuaXQ6IGNhbnZhcy5zY2VuZS5ncmlkLnVuaXRzXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzdGFuY2VFbGV2YXRpb24nKSkge1xuICAgICAgICBjb25zdCBlbGV2YXRpb24gPSBNYXRoLmFicyhcbiAgICAgICAgICAoc3RhcnRUb2tlbi5kb2N1bWVudC5lbGV2YXRpb24gfHwgMCkgLSAoZW5kVG9rZW4uZG9jdW1lbnQuZWxldmF0aW9uIHx8IDApXG4gICAgICAgIClcbiAgICAgICAgZGlzdGFuY2UudmFsdWUgPSBNYXRoLnNxcnQoXG4gICAgICAgICAgZGlzdGFuY2UudmFsdWUgKiBkaXN0YW5jZS52YWx1ZSArIGVsZXZhdGlvbiAqIGVsZXZhdGlvblxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzdGFuY2VUaGVhdHJlT2ZUaGVNaW5kJykpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VEaXN0YW5jZUNhbGN1bGF0aW9uRmFpbHVyZScpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBkaXN0YW5jZVxuICB9XG5cbiAgc3RhdGljIHRvWWFyZHMgKGRpc3RhbmNlKSB7XG4gICAgc3dpdGNoIChkaXN0YW5jZS51bml0KSB7XG4gICAgICBjYXNlICdmdCc6XG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZSAvIDNcblxuICAgICAgY2FzZSAneWQnOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcblxuICAgICAgY2FzZSAnbSc6XG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdSb2xsIHtcbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XG4gICAgY29uc3Qgcm9sbERpdiA9IGNhcmQucXVlcnlTZWxlY3RvcignZGl2LmRpY2Utcm9sbCcpXG4gICAgaWYgKCFyb2xsRGl2KSByZXR1cm4gbnVsbFxuXG4gICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Um9sbCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCByb2xsRGl2KVxuXG4gICAgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIGdldCByZXN1bHRUeXBlICgpIHtcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KHRoaXMuc3VjY2Vzc0xldmVsKVxuICAgIHN3aXRjaCAodGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZ1bWJsZScpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZTpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZScpXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcktleSkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKHRoaXMuaXRlbUlkICYmIHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNraWxsICgpIHtcbiAgICBpZiAodGhpcy5za2lsbElkICYmIHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHNob3dEaWNlUm9sbCAoKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IGRpY2VSZXN1bHRzID0gW11cbiAgICAgIGZvciAoY29uc3QgZGllUmVzdWx0IG9mIHRoaXMuZGljZXMudGVucykge1xuICAgICAgICBkaWNlUmVzdWx0cy5wdXNoKGRpZVJlc3VsdC52YWx1ZSA9PT0gMTAwID8gMCA6IGRpZVJlc3VsdC52YWx1ZSAvIDEwKVxuICAgICAgfVxuICAgICAgZGljZVJlc3VsdHMucHVzaCh0aGlzLmRpY2VzLnVuaXQudmFsdWUpXG5cbiAgICAgIGNvbnN0IGRpY2VEYXRhID0ge1xuICAgICAgICBmb3JtdWxhOiBgJHt0aGlzLmRpY2VzLnRlbnMubGVuZ3RofWQxMDArMWQxMGAsXG4gICAgICAgIHJlc3VsdHM6IGRpY2VSZXN1bHRzLFxuICAgICAgICB3aGlzcGVyOiBudWxsLFxuICAgICAgICBibGluZDogZmFsc2VcbiAgICAgIH1cbiAgICAgIGdhbWUuZGljZTNkLnNob3coZGljZURhdGEpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50LCBvYmplY3QgPSBudWxsKSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICBjb25zdCByb2xsID0gb2JqZWN0IHx8IG5ldyBDb0M3Um9sbCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCBlbGVtZW50KVxuICAgIHJvbGwuZGljZXMgPSB7XG4gICAgICB0ZW5zOiBbXSxcbiAgICAgIHVuaXQ6IHt9XG4gICAgfVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoXG4gICAgICByb2xsLmRpY2VzLFxuICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yZXN1bHQnKVxuICAgIClcbiAgICByb2xsLmRpY2VzLmhhc0JvbnVzID0gcm9sbC5kaWNlTW9kaWZpZXIgIT09IDBcbiAgICByb2xsLmRpY2VzLmJvbnVzID0gTWF0aC5hYnMocm9sbC5kaWNlTW9kaWZpZXIpXG4gICAgcm9sbC5kaWNlcy5ib251c1R5cGUgPVxuICAgICAgcm9sbC5kaWNlTW9kaWZpZXIgPCAwXG4gICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJQZW5hbHR5JylcbiAgICAgICAgOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllckJvbnVzJylcbiAgICBjb25zdCB0ZW5EaWNlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGVuLWRpY2UnKVxuICAgIGlmICh0ZW5EaWNlKSB7XG4gICAgICBmb3IgKGNvbnN0IGQgb2YgdGVuRGljZS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpKSB7XG4gICAgICAgIGNvbnN0IGRpZSA9IHtcbiAgICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgICAgaXNNYXg6IGZhbHNlLFxuICAgICAgICAgIGlzTWluOiBmYWxzZSxcbiAgICAgICAgICB2YWx1ZTogLTFcbiAgICAgICAgfVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGRpZSwgZClcbiAgICAgICAgcm9sbC5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB1bml0RGllID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdC1kaWUnKVxuICAgICAgPyBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0LWRpZScpLnF1ZXJ5U2VsZWN0b3IoJ2xpJylcbiAgICAgIDogbnVsbFxuICAgIHJvbGwuZGljZXMudW5pdC52YWx1ZSA9IHVuaXREaWUgPyBwYXJzZUludCh1bml0RGllLmRhdGFzZXQudmFsdWUpIDogbnVsbFxuXG4gICAgcm9sbC5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxuICAgIGNvbnN0IGluY3JlYXNlU3VjY2VzcyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmluY3JlYXNlLXN1Y2Nlc3MnKVxuICAgIGlmIChpbmNyZWFzZVN1Y2Nlc3MgJiYgaW5jcmVhc2VTdWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpKSB7XG4gICAgICBmb3IgKGNvbnN0IGlzbCBvZiBpbmNyZWFzZVN1Y2Nlc3MucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykpIHtcbiAgICAgICAgY29uc3QgbmV3U3VjY2VzTGV2ZWwgPSB7fVxuICAgICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KG5ld1N1Y2Nlc0xldmVsLCBpc2wpXG4gICAgICAgIHJvbGwuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV3U3VjY2VzTGV2ZWwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHJvbGwubHVja05lZWRlZCkge1xuICAgICAgcm9sbC5sdWNrTmVlZGVkVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVuZEx1Y2snLCB7XG4gICAgICAgIGx1Y2tOZWVkZWRWYWx1ZTogcm9sbC5sdWNrTmVlZGVkXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoIW9iamVjdCkgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2hlY2sgKGNoZWNrKSB7XG4gICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Um9sbCgpXG5cbiAgICByb2xsLnJvbGxUeXBlID0gY2hlY2sucm9sbFR5cGVcbiAgICByb2xsLnNpZGUgPSBjaGVjay5zaWRlXG4gICAgcm9sbC5hY3Rpb24gPSBjaGVjay5hY3Rpb25cbiAgICByb2xsLnJlZk1lc3NhZ2VJZCA9IGNoZWNrLnJlZk1lc3NhZ2VJZFxuICAgIHJvbGwucmVmZXJlbmNlTWVzc2FnZUlkID0gY2hlY2sucmVmZXJlbmNlTWVzc2FnZUlkXG5cbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IGNoZWNrLnN1Y2Nlc3NMZXZlbFxuICAgIHJvbGwuZGlmZmljdWx0eSA9IGNoZWNrLmRpZmZpY3VsdHlcbiAgICByb2xsLnNraWxsSWQgPSBjaGVjay5za2lsbCA/IGNoZWNrLnNraWxsLmlkIDogbnVsbFxuICAgIHJvbGwuaXRlbUlkID0gY2hlY2suaXRlbSA/IGNoZWNrLml0ZW0uaWQgOiBudWxsXG4gICAgcm9sbC5kaWNlTW9kID0gY2hlY2suZGljZU1vZGlmaWVyXG4gICAgcm9sbC52YWx1ZSA9IHBhcnNlSW50KGNoZWNrLnJhd1ZhbHVlKVxuICAgIHJvbGwuZnVtYmxlID0gY2hlY2suaXNGdW1ibGVcbiAgICByb2xsLmNyaXRpY2FsID0gY2hlY2suaXNDcml0aWNhbFxuICAgIHJvbGwuY2hhcmFjdGVyaXN0aWMgPSBjaGVjay5jaGFyYWN0ZXJpc3RpYyA/IGNoZWNrLmNoYXJhY3RlcmlzdGljIDogbnVsbFxuICAgIHJvbGwucmVzdWx0ID0gY2hlY2suZGljZS50b3RhbFxuXG4gICAgcm9sbC5hY3RvcktleSA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuXG4gICAgaWYgKGNoZWNrLmFjdG9yLmlzVG9rZW4pIHtcbiAgICAgIHJvbGwudG9rZW5JZCA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgcm9sbC5hY3RvcklkID0gbnVsbFxuICAgIH0gZWxzZSB7XG4gICAgICByb2xsLnRva2VuS2V5ID0gbnVsbFxuICAgICAgcm9sbC5hY3RvcklkID0gY2hlY2suYWN0b3IudG9rZW5LZXkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuXG4gICAgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBhdHRhY2hDaGVja1RvRWxlbWVudCAoaHRtbEVsZW1lbnQsIGNoZWNrKSB7XG4gICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21DaGVjayhjaGVjaylcbiAgICByb2xsLmF0dGFjaFRvRWxlbWVudChodG1sRWxlbWVudClcblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBhdHRhY2hUb0VsZW1lbnQgKGh0bWxFbGVtZW50KSB7XG4gICAgY2hhdEhlbHBlci5hdHRhY2hPYmplY3RUb0VsZW1lbnQodGhpcywgaHRtbEVsZW1lbnQpXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdEYW1hZ2Uge1xuICBzdGF0aWMgZ2V0TWFpbkRpZSAoZGFtYWdlU3RyaW5nKSB7XG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMjAnKSkgcmV0dXJuICdkMjAnXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMTInKSkgcmV0dXJuICdkMTInXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkMTAnKSkgcmV0dXJuICdkMTAnXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkOCcpKSByZXR1cm4gJ2Q4J1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDQnKSkgcmV0dXJuICdkNCdcbiAgICByZXR1cm4gJ2Q2J1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50LCBvYmplY3QgPSBudWxsKSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICBjb25zdCBkYW1hZ2UgPSBvYmplY3QgfHwge31cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGRhbWFnZSwgZWxlbWVudClcbiAgICBjb25zdCByb2xscyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRpY2Utcm9sbHMnKS5xdWVyeVNlbGVjdG9yQWxsKCdsaScpXG4gICAgZGFtYWdlLnJvbGxzID0gW11cbiAgICBmb3IgKGNvbnN0IHIgb2Ygcm9sbHMpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSB7fVxuICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyb2xsLCByKVxuICAgICAgZGFtYWdlLnJvbGxzLnB1c2gocm9sbClcbiAgICB9XG5cbiAgICBpZiAoIW9iamVjdCkgcmV0dXJuIGRhbWFnZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUgKi9cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgdGhpcy5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbE1vZGUpIHJldHVybiBudWxsXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5hY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuaXRlbUlkKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRlZFRva2VucyAoKSB7XG4gICAgcmV0dXJuIFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSByZXR1cm4gdGhpcy50YXJnZXRUb2tlblxuICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yXG4gIH1cblxuICAvKipcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgKi9cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICBpZiAodGhpcy5fdGFyZ2V0S2V5KSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSB0aGlzLnRhcmdldGVkVG9rZW5zLnBvcCgpXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VG9rZW5cbiAgfVxuXG4gIGdldCB0YXJnZXRBY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHRoaXMuX3RhcmdldEFjdG9yID0gdGhpcy50YXJnZXRUb2tlbi5hY3RvclxuICAgICAgZWxzZSB0aGlzLl90YXJnZXRBY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuX3RhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IHRhcmdldEtleSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLl90YXJnZXRLZXlcbiAgfVxuXG4gIGdldCBoYXNUYXJnZXQgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHNldCB0YXJnZXRLZXkgKHgpIHtcbiAgICB0aGlzLl90YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5nZXRXZWFwb25Ta2lsbHModGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgdGFyZ2V0SW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLnRhcmdldEtleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHRhcmdldE5hbWUgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXQpIHJldHVybiAnZHVtbXknXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm5hbWVcbiAgfVxuXG4gIGdldCBhY3RvckltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgYXN5bmMgc2F5IChtZXNzYWdlLCBmbGF2b3IgPSBudWxsKSB7XG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgICAgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuLmRvY3VtZW50XG4gICAgICB9XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBmbGF2b3IsXG4gICAgICBjb250ZW50OiBtZXNzYWdlXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICApIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKSAvLyBDaGFuZ2UgZm9yIHVzZXJcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuaW1wb3J0IHsgY3JlYXRlSW5saW5lUm9sbCwgY2hhdEhlbHBlciB9IGZyb20gJy4uL2hlbHBlci5qcydcblxuZnVuY3Rpb24gcmVwbGFjZXIgKGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuXG4gIGNvbnN0IGV4Y2x1ZGUgPSBbJ19hY3RvciddXG4gIGlmIChleGNsdWRlLmluY2x1ZGVzKGtleSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBjb25zdCBjaGVja3MgPSBbJ3NhbkNoZWNrJywgJ2ludENoZWNrJ11cbiAgaWYgKGNoZWNrcy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgcmV0dXJuIHZhbHVlLkpTT05Sb2xsRGF0YVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG5leHBvcnQgY2xhc3MgU2FuQ2hlY2tDYXJkIGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIHNhbkRhdGEgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoXG4gICAgICBhY3RvcktleSxcbiAgICAgIHR5cGVvZiBvcHRpb25zLmZhc3RGb3J3YXJkICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IEJvb2xlYW4ob3B0aW9ucy5mYXN0Rm9yd2FyZClcbiAgICAgICAgOiBmYWxzZVxuICAgIClcbiAgICBzYW5EYXRhLnNhblJlYXNvbiA9IHNhbkRhdGEuc2FuUmVhc29uID8/ICcnXG4gICAgdGhpcy5zYW5EYXRhID0gc2FuRGF0YVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBpZiAoc2FuRGF0YS5tb2RpZmllciAmJiAhaXNOYU4oTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbk1vZGlmaWVyID0gTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpXG4gICAgfVxuICAgIGlmIChzYW5EYXRhLmRpZmZpY3VsdHkgJiYgIWlzTmFOKE51bWJlcihzYW5EYXRhLmRpZmZpY3VsdHkpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgPSBOdW1iZXIoc2FuRGF0YS5kaWZmaWN1bHR5KVxuICAgIH1cbiAgICB0aGlzLnN0YXRlID0ge31cbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMub3B0aW9ucy5pc0JsaW5kICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyBCb29sZWFuKHRoaXMub3B0aW9ucy5pc0JsaW5kKVxuICAgICAgOiBzdXBlci5pc0JsaW5kXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gdGhpcy5vcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5vcHRpb25zLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyB0aGlzLm9wdGlvbnMubW9kaWZpZXJcbiAgICAgIDogMFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NTb3VyY2UgKCkge1xuICAgIGlmICghdGhpcy5zYW5EYXRhLnRva2VuS2V5KSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLnNhbkRhdGEudG9rZW5LZXkpXG4gIH1cblxuICBnZXQgaW52b2x1bnRhcnlBY3Rpb24gKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkICYmXG4gICAgICAodGhpcy5zYW5DaGVjay5pc0ZhaWx1cmUgfHwgdGhpcy5zYW5DaGVjay5pc0Z1bWJsZSlcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHNhbkxvc3NGb3JtdWxhICgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5zYW5Sb2xsZWQpIHtcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuTWF4ICYmIHRoaXMuc2FuQ2hlY2suZmFpbGVkKSB7XG4gICAgICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpKVxuICAgICAgICAgID8gTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpXG4gICAgICAgICAgOiB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhbk1pbiAmJiB0aGlzLnNhbkNoZWNrLnBhc3NlZCkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKSlcbiAgICAgICAgICA/IE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKVxuICAgICAgICAgIDogdGhpcy5zYW5EYXRhLnNhbk1pblxuICAgICAgfVxuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzYW5Mb3N0VG9SZWFzb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLnNhbkxvc3RUb1JlYXNvbih0aGlzLnNhbkRhdGEuc2FuUmVhc29uKVxuICB9XG5cbiAgZ2V0IG1heFBvc3NpYmxlU2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICApXG4gIH1cblxuICBnZXQgbWF4U2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuRGF0YS5zYW5NYXgudG9TdHJpbmcoKSkuZXZhbHVhdGUoe1xuICAgICAgbWF4aW1pemU6IHRydWVcbiAgICB9KS50b3RhbFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3Iuc2FuTG9zc1JlYXNvbkVuY291bnRlcmVkKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24pXG4gIH1cblxuICBnZXQgZmlyc3RFbmNvdW50ZXIgKCkge1xuICAgIHJldHVybiAhdGhpcy5hY3Rvci5teXRob3NJbnNhbml0eUV4cGVyaWVuY2VkXG4gIH1cblxuICBnZXQgaXNBY3Rvckxvb3NpbmdTYW4gKCkge1xuICAgIC8vIE5vIHNhbiBsb3NzIGR1cmluZyBib3V0IG9mIG1hZC5cbiAgICBpZiAodGhpcy5hY3Rvci5oYXNUZW1wb0luc2FuZSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLy8gVGhlIHNhbiBsb3NzIGlzIGEgMFxuICAgIGlmICh0aGlzLnNhbkxvc3NGb3JtdWxhID09PSAwKSByZXR1cm4gZmFsc2VcblxuICAgIGlmIChcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24gJiZcbiAgICAgIHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICApID09PSAwXG4gICAgKSB7XG4gICAgICB0aGlzLnN0YXRlLmltbXVuZVRvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IGJvdXREdXJhdGlvblRleHQgKCkge1xuICAgIGlmICh0aGlzLmJvdXREdXJhdGlvbikge1xuICAgICAgaWYgKHRoaXMuYm91dFJlYWxUaW1lKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmJvdXREdXJhdGlvbn0gJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucm91bmRzJyl9YFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYm91dFN1bW1hcnkpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuYm91dER1cmF0aW9ufSAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpfWBcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB5b3VHYWluQ3RodWxodU15dGhvc1N0cmluZyAoKSB7XG4gICAgaWYgKHRoaXMubXl0aG9zR2Fpbikge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuWW91R2FpbmVkQ3RodWxodU15dGhvcycsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMubXl0aG9zR2FpblxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGFkdmFuY2VTdGF0ZSAoc3RhdGUpIHtcbiAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICBjYXNlICdrZWVwQ3JlYXR1cmVTYW5EYXRhJzoge1xuICAgICAgICB0aGlzLnN0YXRlLmtlZXBDcmVhdHVyZVNhbkRhdGEgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdpbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCc6IHtcbiAgICAgICAgdGhpcy5zdGF0ZVtzdGF0ZV0gPSB0cnVlXG4gICAgICAgIGlmICghdGhpcy5pc0FjdG9yTG9vc2luZ1NhbikgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdzYW5Mb3NzQXBwbGllZCc6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHBseVNhbkxvc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZW50ZXJCb3V0T2ZNYWRuZXNzUmVhbFRpbWUnOiB7XG4gICAgICAgIHRoaXMuYm91dER1cmF0aW9uID0gKGF3YWl0IG5ldyBSb2xsKCcxRDEwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgICAgICB0aGlzLmJvdXRSZWFsVGltZSA9IHRydWVcbiAgICAgICAgdGhpcy5ib3V0U3VtbWFyeSA9IGZhbHNlXG4gICAgICAgIHRoaXMuYm91dFJlc3VsdCA9IGF3YWl0IHRoaXMuYWN0b3IuZW50ZXJCb3V0T2ZNYWRuZXNzKFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgdGhpcy5ib3V0RHVyYXRpb25cbiAgICAgICAgKVxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NSZXNvbHZlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdlbnRlckJvdXRPZk1hZG5lc3NTdW1tYXJ5Jzoge1xuICAgICAgICB0aGlzLmJvdXREdXJhdGlvbiA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgICAgdGhpcy5ib3V0UmVhbFRpbWUgPSBmYWxzZVxuICAgICAgICB0aGlzLmJvdXRTdW1tYXJ5ID0gdHJ1ZVxuICAgICAgICB0aGlzLmJvdXRSZXN1bHQgPSBhd2FpdCB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyhcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICB0aGlzLmJvdXREdXJhdGlvblxuICAgICAgICApXG4gICAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc1Jlc29sdmVkID0gdHJ1ZVxuICAgICAgICBhd2FpdCB0aGlzLnRyaWdnZXJJbnNhbml0eSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdib3V0T2ZNYWRuZXNzT3Zlcic6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSlcbiAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VySW5zYW5pdHkoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnbm9NeXRob3NHYWluZWQnOiB7XG4gICAgICAgIHRoaXMuc3RhdGUuY3RodWxodU15dGhvc0F3YXJkZWQgPSB0cnVlXG4gICAgICAgIHRoaXMubXl0aG9zR2FpbiA9IDBcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2N0aHVsaHVNeXRob3NBd2FyZGVkJzoge1xuICAgICAgICBsZXQgYW1vdW50R2FpbmVkID0gMVxuICAgICAgICBpZiAoIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCkge1xuICAgICAgICAgIGFtb3VudEdhaW5lZCA9IDVcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLmV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5KClcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlLmN0aHVsaHVNeXRob3NBd2FyZGVkID0gdHJ1ZVxuICAgICAgICBjb25zdCBjdGh1bGh1TXl0aG9zU2tpbGwgPSB0aGlzLmFjdG9yLmN0aHVsaHVNeXRob3NTa2lsbFxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9XG4gICAgICAgICAgY3RodWxodU15dGhvc1NraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlIHx8IDBcbiAgICAgICAgaWYgKGN0aHVsaHVNeXRob3NTa2lsbCkge1xuICAgICAgICAgIGF3YWl0IGN0aHVsaHVNeXRob3NTa2lsbC51cGRhdGUoe1xuICAgICAgICAgICAgJ2RhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IG9sZFZhbHVlICsgYW1vdW50R2FpbmVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm15dGhvc0dhaW4gPSBhbW91bnRHYWluZWRcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBieXBhc3NSb2xsU2FuICgpIHtcbiAgICB0aGlzLmlzQnlwYXNzZWQgPSB0cnVlXG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuaWdub3JlU2FuQ2hlY2sgPSB0cnVlXG4gICAgdGhpcy5zYW5Mb3NzID0gdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICB9XG5cbiAgYXN5bmMgcm9sbFNhbiAoKSB7XG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgaWYgKCF0aGlzLmlzQWN0b3JMb29zaW5nU2FuKSB7XG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmFjdG9yLmhhc1RlbXBvSW5zYW5lKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW1tdW5lQWxyZWFkeUluQm91dCA9IHRydWVcbiAgICAgICAgaWYgKCF0aGlzLnNhbkNoZWNrLnBhc3NlZCkgdGhpcy5zdGF0ZS5maW5pc2ggPSBmYWxzZVxuICAgICAgfVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzQXBwbGllZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXG4gICAgICB0aGlzLnNhbkxvc3MgPSAwXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5zYW5Mb3NzRm9ybXVsYSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgICAgdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICAgICAgICApXG4gICAgICAgIGlmICh0aGlzLnNhbkxvc3MgPCB0aGlzLnNhbkxvc3NGb3JtdWxhKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5saW1pdGVkTG9zc1RvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuc2FuTG9zc0Zvcm11bGFcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuc2FuQ2hlY2suaXNGdW1ibGUpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICApXG4gICAgfSBlbHNlIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICBjb25zdCBtaW4gPSBuZXcgUm9sbCh0aGlzLnNhbkxvc3NGb3JtdWxhKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1pbmltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgICAgY29uc3QgbWF4ID0gdGhpcy5hY3Rvci5tYXhMb3NzVG9TYW5SZWFzb24oXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICAgIClcbiAgICAgIGlmIChtaW4gPj0gbWF4KSB7XG4gICAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zYW5Mb3NzID0gbWF4XG4gICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxTYW5Mb3NzICgpIHtcbiAgICB0aGlzLnNhbkxvc3NSb2xsID0gbmV3IFJvbGwoYCR7dGhpcy5zYW5Mb3NzRm9ybXVsYX1gKVxuXG4gICAgYXdhaXQgdGhpcy5zYW5Mb3NzUm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcblxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuc2FuTG9zc1JvbGwpXG5cbiAgICBjb25zdCBtYXggPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zc1JvbGwudG90YWwgPiBtYXgpIHtcbiAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuc2FuTG9zcyA9IE1hdGgubWluKHRoaXMuc2FuTG9zc1JvbGwudG90YWwsIG1heClcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gIH1cblxuICBhc3luYyBhcHBseVNhbkxvc3MgKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3IubG9vc2VTYW4odGhpcy5zYW5EYXRhLnNhblJlYXNvbiwgdGhpcy5zYW5Mb3NzKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA+IDApIHRoaXMuc3RhdGUuYWN0b3JMb3N0U2FuID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuc2FuTG9zc0FwcGxpZWQgPSB0cnVlXG4gICAgaWYgKHRoaXMuYWN0b3Iuc2FuIDw9IDApIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IHRydWVcblxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUucGVybWFuZW50bHlJbnNhbmUgPSB0cnVlXG5cbiAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA8IDUpIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuYWN0b3IuaGFzSW5kZWZJbnNhbmUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rvci5kYWlseVNhbkxvc3MgPj0gdGhpcy5hY3Rvci5kYWlseVNhbkxpbWl0KSB7XG4gICAgICAvLyB0aGlzLmFjdG9yLnNhbi81XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLnRlbXBvcmFyeUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbEludCAoKSB7XG4gICAgdGhpcy5pbnRDaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuaW50Q2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5pbnRDaGVjay5jaGFyYWN0ZXJpc3RpYyA9ICdpbnQnXG4gICAgdGhpcy5pbnRDaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMub3B0aW9ucy5pbnREaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIHRoaXMuaW50Q2hlY2suZGljZU1vZGlmaWVyID0gdGhpcy5vcHRpb25zLmludE1vZGlmaWVyIHx8IDBcbiAgICBhd2FpdCB0aGlzLmludENoZWNrLl9wZXJmb3JtKHsgZm9yY2VEU046IHRydWUgfSlcbiAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICBpZiAodGhpcy5pbnRDaGVjay5wYXNzZWQgfHwgdGhpcy5zdGF0ZS5hbHJlYWR5SW5zYW5lKSB7XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB0cmlnZ2VySW5zYW5pdHkgKCkge1xuICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXG4gICAgaWYgKHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lKSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gIH1cblxuICBhc3luYyBjbGVhclNhbkxvc3NSZWFzb24gKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0UmVhc29uU2FuTG9zcyh0aGlzLnNhbkRhdGEuc2FuUmVhc29uLCAwKVxuICAgIGlmICghdGhpcy5zYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQpIHtcbiAgICAgIHRoaXMuc3RhdGUua2VlcENyZWF0dXJlU2FuRGF0YSA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgLy8gQXR0YWNoZSB0aGUgc2FuQ2hlY2sgcmVzdWx0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGlmICh0aGlzLnN0YXRlLnNhblJvbGxlZCkge1xuICAgICAgdGhpcy5fX2lubGluZVNhbkNoZWNrID0gdGhpcy5zYW5DaGVjay5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zYW5Mb3NzUm9sbCkge1xuICAgICAgY29uc3QgYSA9IGNyZWF0ZUlubGluZVJvbGwodGhpcy5zYW5Mb3NzUm9sbClcbiAgICAgIHRoaXMuX19pbmxpbmVTYW5Mb3NzUm9sbCA9IGEub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuaW50Um9sbGVkICYmIHRoaXMuaW50Q2hlY2spIHtcbiAgICAgIHRoaXMuX19pbmxpbmVJbnRDaGVjayA9IHRoaXMuaW50Q2hlY2suaW5saW5lQ2hlY2sub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeSh0aGlzLCByZXBsYWNlcikpXG5cbiAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2UuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9zYW4tY2hlY2suaHRtbCdcbiAgfVxuXG4gIHN0YXRpYyBjaGVja1RhcmdldHMgKHNhbkRhdGEsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCB0YXJnZXRzID0gWy4uLmdhbWUudXNlci50YXJnZXRzXVxuICAgIGlmICh0YXJnZXRzLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCB0IG9mIHRhcmdldHMpIHtcbiAgICAgICAgaWYgKHQuYWN0b3IuaXNUb2tlbikge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci50b2tlbktleSwgc2FuRGF0YSwge1xuICAgICAgICAgICAgZmFzdEZvcndhcmRcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci5pZCwgc2FuRGF0YSwgeyBmYXN0Rm9yd2FyZCB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vVGFyZ2V0c1NhbkNoZWNrJykpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoLi4uYXJncykge1xuICAgIGNvbnN0IGNoYXRDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCguLi5hcmdzKVxuICAgIGlmIChjaGF0Q2FyZC5hY3Rvci5oYXNJbmRlZkluc2FuZSkge1xuICAgICAgY2hhdENhcmQuc3RhdGUuYWxyZWFkeUluc2FuZSA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoY2hhdENhcmQuYWN0b3Iuc2FuIDw9IDApIHtcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gdHJ1ZVxuXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIGNoYXRDYXJkLnN0YXRlLnBlcm1hbmVudGx5SW5zYW5lID0gdHJ1ZVxuXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgY2hhdENhcmQpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShjaGF0Q2FyZCwgcmVwbGFjZXIpKVxuICAgIGF3YWl0IGNoYXRDYXJkLnNheShodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MKVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgY29uc3QgaHRtbE1lc3NhZ2UgPSAkLnBhcnNlSFRNTChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBodG1sQ2FyZCA9IGh0bWxNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWNhcmQnKVxuXG4gICAgcmV0dXJuIFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChodG1sQ2FyZClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHNhbkNoZWNrQ2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuXG4gICAgY29uc3Qgc2FuQ2hlY2tDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCgpXG4gICAgT2JqZWN0LmFzc2lnbihzYW5DaGVja0NhcmQsIHNhbkNoZWNrQ2FyZERhdGEpXG4gICAgaWYgKCFzYW5DaGVja0NhcmQubWVzc2FnZUlkKSB7XG4gICAgICBzYW5DaGVja0NhcmQubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfVxuXG4gICAgaWYgKHNhbkNoZWNrQ2FyZC5zYW5DaGVjaz8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBzYW5DaGVja0NhcmQuc2FuQ2hlY2sgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICBuZXcgQ29DN0NoZWNrKCksXG4gICAgICAgIHNhbkNoZWNrQ2FyZC5zYW5DaGVja1xuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChzYW5DaGVja0NhcmQuaW50Q2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgc2FuQ2hlY2tDYXJkLmludENoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IENvQzdDaGVjaygpLFxuICAgICAgICBzYW5DaGVja0NhcmQuaW50Q2hlY2tcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbCA9IFJvbGwuZnJvbURhdGEoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsKVxuICAgIH1cblxuICAgIHJldHVybiBzYW5DaGVja0NhcmRcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTkZJRywgQ09OU1QsIGZvdW5kcnksIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIH0gZnJvbSAnLi9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBpc0N0cmxLZXkgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcblxuLyoqXG4gKiBBbGxvdyBmb3IgcGFyc2luZyBvZiBDb0M3IGVsZW1lbnRzIGluIGNoYXQgbWVzc2FnZSBhbmQgc2hlZXRzLlxuICogRm9ybWF0IGlzIDpcbiAqIEBjb2M3LlRZUEVfT0ZfUkVRVUVTVFtPUFRJT05TXXtESVNQTEFZRURfTkFNRX1cbiAqIFRZUEVfT0ZfUkVRVUVTVCA6XG4gKiAtIHNhbmxvc3M6IHRyaWdnZXIgYSBzYW4gY2hlY2ssIHVwb24gZmFpbHVyZSB3aWxsIHByb3Bvc2UgdG8gZGVkdWN0IHRoZSBjb3JyZXNwb25kaW5nIFNBTi5cbiAqIC0gY2hlY2s6IHRyaWdnZXIgYSBjaGVjayBkZXBlbmRpbmcgb24gdGhlIG9wdGlvbnMuXG4gKiAtIGl0ZW06IFRyaWdnZXIgYSB3ZWFwb24gY2hlY2tcbiAqIC0gZWZmZWN0OiBBZGQgYW4gZWZmZWN0XG4gKlxuICogT1BUSU9OUzogW10gPSBvcHRpb25hbFxuICogc2FubG9zczpcbiAqICAgc2FuTWF4OiBtYXggU0FOIGxvc3NcbiAqICAgc2FuTWluOiBtaW4gU0FOIGxvc3NcbiAqICAgc2FuUmVhc29uOiBSZWFzb25cbiAqIGNoZWNrOlxuICogICB0eXBlOiB0eXBlIG9mIGNoZWNrIChjaGFyYWN0ZXJpc3RpYywgc2tpbGwsIGF0dHJpYikuXG4gKiAgIG5hbWU6IG5hbWUgb2YgdGhlIHNraWxsL2NoYXJhY3RlcmlzdGljLlxuICogICBbZGlmZmljdWx0eV06ID8gKGJsaW5kKSwgMCAocmVndWxhciksICsgKGhhcmQpLCArKyAoZXh0cmVtZSksICsrKyAoY3JpdGljYWwpLlxuICogICBbbW9kaWZpZXJdOiAteCAoeCBwZW5hbHR5IGRpY2UpLCAreCAoeCBib251cyBkaWNlKSwgMCAobm8gbW9kaWZpZXIpLlxuICogICBbaWNvbl06IGljb24gdHUgdXNlIChmb250IGF3c29tZSkuXG4gKiAgIFtibGluZF06IHdpbGwgdHJpZ2dlciBhIGJsaW5kIHJvbGwuXG4gKlxuICogW0RJU1BMQVlFRF9OQU1FOiBuYW1lIHRvIGRpc3BsYXkuXVxuICpcbiAqIFRvIGFkZC9lZGl0IGEgbmV3IGxpbmsgdXBkYXRlIHRoZXNlIHNlY3Rpb25zXG4gKiAgIGZyb21Ecm9wRGF0YSA9PiBBZGQgYWxsIGRlZmF1bHRzIGhlcmVcbiAqICAgX2NyZWF0ZUxpbmsgPT4gQ3JlYXRlIEhUTUwgZnJvbSBkb2N1bWVudCBkYXRhXG4gKiAgIF9jcmVhdGVEb2N1bWVudExpbmsgPT4gQ3JlYXRlIEBsaW5rIGZyb20gZG9jdW1lbnQgZGF0YVxuICogICBfb25MaW5rQWN0b3JDbGljayA9PiBQcm9jZXNzIGxpbmtcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdMaW5rIHtcbiAgc3RhdGljIGdldCBDSEVDS19UWVBFICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgQ0hFQ0s6ICdjaGVjaycsXG4gICAgICBTQU5MT1NTOiAnc2FubG9zcycsXG4gICAgICBJVEVNOiAnaXRlbScsXG4gICAgICBFRkZFQ1Q6ICdlZmZlY3QnXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBMSU5LX1RZUEUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBDSEFSQUNURVJJU1RJQzogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgIEFUVFJJQlVURTogJ2F0dHJpYnV0ZScsXG4gICAgICBTS0lMTDogJ3NraWxsJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBpbml0ICgpIHtcbiAgICBDT05GSUcuQ29DN0xpbmsgPSB7XG4gICAgICBkb2N1bWVudENsYXNzOiBDb0M3TGlua1xuICAgIH1cbiAgICBjb25zdCBib2R5ID0gJCgnYm9keScpXG4gICAgYm9keS5vbignY2xpY2snLCAnYS5jb2M3LWxpbmsnLCBDb0M3TGluay5fb25MaW5rQ2xpY2spXG4gICAgYm9keS5vbignZHJhZ3N0YXJ0JywgJ2EuY29jNy1saW5rJywgZXZlbnQgPT4gQ29DN0xpbmsuX29uRHJhZ0NvQzdMaW5rKGV2ZW50KSlcblxuICAgIENPTkZJRy5UZXh0RWRpdG9yLmVucmljaGVycy5wdXNoKHtcbiAgICAgIHBhdHRlcm46IG5ldyBSZWdFeHAoJ0AoY29jNylcXFxcLicgKyAnKGNoZWNrfGVmZmVjdHxpdGVtfHNhbmxvc3MpJyArICdcXFxcWyhbXlxcXFxbXFxcXF1dKig/OlxcXFxbW15cXFxcW1xcXFxdXSooPzpcXFxcW1teXFxcXFtcXFxcXV0qXFxcXF0pKlteXFxcXFtcXFxcXV0qXFxcXF0pKlteXFxcXFtcXFxcXV0qKVxcXFxdJyArICcoPzp7KFtefV0rKX0pPycsICdnaScpLFxuICAgICAgZW5yaWNoZXI6IENvQzdMaW5rLl9jcmVhdGVMaW5rXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBfbGlua0Zyb21FdmVudCAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGkgPSBhLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxpbmstaWNvbl0nKVxuICAgIGNvbnN0IGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShhLmRhdGFzZXQpXG5cbiAgICBjb25zdCBvbGRUeXBlID0gZGF0YS50eXBlXG5cbiAgICBkYXRhLnR5cGUgPSAnQ29DN0xpbmsnXG4gICAgZGF0YS5pY29uID0gbnVsbFxuXG4gICAgaWYgKG9sZFR5cGUpIHtcbiAgICAgIGRhdGEubGlua1R5cGUgPSBvbGRUeXBlXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgZGF0YS5vYmplY3QgJiZcbiAgICAgICh0eXBlb2YgZGF0YS5vYmplY3QgPT09ICdzdHJpbmcnIHx8IGRhdGEub2JqZWN0IGluc3RhbmNlb2YgU3RyaW5nKVxuICAgICkge1xuICAgICAgZGF0YS5vYmplY3QgPSBKU09OLnBhcnNlKGRhdGEub2JqZWN0KVxuICAgICAgLy8gZGF0YS5saW5rVHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5FRkZFQ1RcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBpLmRhdGFzZXQgJiZcbiAgICAgIGkuZGF0YXNldC5saW5rSWNvbiAmJlxuICAgICAgaS5kYXRhc2V0LmxpbmtJY29uICE9PSAnZmFzIGZhLWRpY2UnXG4gICAgKSB7XG4gICAgICBkYXRhLmljb24gPSBpLmRhdGFzZXQubGlua0ljb25cbiAgICB9XG4gICAgZGF0YS5kaXNwbGF5TmFtZSA9IGEuZGF0YXNldC5kaXNwbGF5TmFtZSA/IGEuaW5uZXJUZXh0IDogbnVsbFxuICAgIGlmIChkYXRhLmRpZmZpY3VsdHkpIHtcbiAgICAgIGRhdGEuZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkoZGF0YS5kaWZmaWN1bHR5KVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgc3RhdGljIF9vbkRyYWdDb0M3TGluayAoZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhID0gQ29DN0xpbmsuX2xpbmtGcm9tRXZlbnQoZXZlbnQpXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgLyoqXG4gICAqIEEgaGVscGVyIGZ1bmN0aW9uIHRvIGhhbmRsZSBvYnRhaW5pbmcgdGhlIHJlbGV2YW50IERvY3VtZW50IGZyb20gZHJvcHBlZCBkYXRhIHByb3ZpZGVkIHZpYSBhIERhdGFUcmFuc2ZlciBldmVudC5cbiAgICogVGhlIGRyb3BwZWQgZGF0YSBjb3VsZCBoYXZlOlxuICAgKiAxLiBBIGRhdGEgb2JqZWN0IGV4cGxpY2l0bHkgcHJvdmlkZWRcbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgIFRoZSBkYXRhIG9iamVjdCBleHRyYWN0ZWQgZnJvbSBhIERhdGFUcmFuc2ZlciBldmVudFxuICAgKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyAgICAgICAgQWRkaXRpb25hbCBvcHRpb25zIHdoaWNoIGFmZmVjdCBkcm9wIGRhdGEgYmVoYXZpb3JcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSAgIFRoZSByZXNvbHZlZCBEb2N1bWVudFxuICAgKiBAdGhyb3dzIElmIGEgRG9jdW1lbnQgY291bGQgbm90IGJlIHJldHJpZXZlZCBmcm9tIHRoZSBwcm92aWRlZCBkYXRhLlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZyb21Ecm9wRGF0YSAoZGF0YSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY2xzID0gbmV3IENvQzdMaW5rKClcbiAgICBjbHMub2JqZWN0ID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh7XG4gICAgICB0eXBlOiAnQ29DN0xpbmsnLFxuICAgICAgY2hlY2s6IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0ssXG4gICAgICBsaW5rVHlwZTogQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMLFxuICAgICAgZGlmZmljdWx0eTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyLFxuICAgICAgbW9kaWZpZXI6IDAsXG4gICAgICBvYmplY3Q6IHtcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FZmZlY3ROZXcnKSxcbiAgICAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXG4gICAgICAgIGNoYW5nZXM6IFtdXG4gICAgICB9XG4gICAgfSwgZGF0YSlcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ25hbWUnLCAnZGlzcGxheU5hbWUnLCAnaWNvbicsICdpZCcsICdwYWNrJywgJ3Nhbk1pbicsICdzYW5NYXgnLCAnc2FuUmVhc29uJ10pIHtcbiAgICAgIGNscy5vYmplY3Rba2V5XSA9IGNscy5vYmplY3Rba2V5XSA/PyAnJ1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNscy5vYmplY3Qub2JqZWN0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjbHMub2JqZWN0Lm9iamVjdC5leHRlcm5hbCAhPT0gJ3VuZGVmaW5lZCcgJiYgWydodHRwJywgJ2h0dHBzJ10uaW5jbHVkZXMoY2xzLm9iamVjdC5vYmplY3QuZXh0ZXJuYWwpKSB7XG4gICAgICBjbHMub2JqZWN0Lm9iamVjdC5pY29uID0gY2xzLm9iamVjdC5vYmplY3QuZXh0ZXJuYWwgKyAnOi8vJyArIGNscy5vYmplY3Qub2JqZWN0Lmljb25cbiAgICB9XG4gICAgY2xzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgcmV0dXJuIGNsc1xuICB9XG5cbiAgc3RhdGljIF9jcmVhdGVMaW5rIChtYXRjaCkge1xuICAgIGNvbnN0IG5hbWUgPSBtYXRjaFs0XSA/PyB1bmRlZmluZWRcbiAgICBjb25zdCBvcHRpb25zID0gbWF0Y2hbM10gPz8gdW5kZWZpbmVkXG4gICAgY29uc3QgdHlwZSA9IG1hdGNoWzJdID8/IHVuZGVmaW5lZFxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGNsczogWydjb2M3LWxpbmsnXSxcbiAgICAgIGRhdGFzZXQ6IHsgY2hlY2s6IHR5cGUgfSxcbiAgICAgIGljb246IG51bGwsXG4gICAgICBibGluZDogZmFsc2UsXG4gICAgICBuYW1lXG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICBkYXRhLmVmZmVjdCA9IEpTT04ucGFyc2Uob3B0aW9ucylcbiAgICAgIGRhdGEuZGF0YXNldC5vYmplY3QgPSBvcHRpb25zXG4gICAgICBpZiAodHlwZW9mIGRhdGEuZWZmZWN0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkYXRhLmVmZmVjdC5leHRlcm5hbCAhPT0gJ3VuZGVmaW5lZCcgJiYgWydodHRwJywgJ2h0dHBzJ10uaW5jbHVkZXMoZGF0YS5lZmZlY3QuZXh0ZXJuYWwpKSB7XG4gICAgICAgIGRhdGEuZWZmZWN0Lmljb24gPSBkYXRhLmVmZmVjdC5leHRlcm5hbCArICc6Ly8nICsgZGF0YS5lZmZlY3QuaWNvblxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9ucy5tYXRjaEFsbCgvW14sXSsvZ2kpXG4gICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIEFycmF5LmZyb20obWF0Y2hlcykpIHtcbiAgICAgICAgbGV0IFtrZXksIHZhbHVlXSA9IG1hdGNoWzBdLnNwbGl0KCc6JylcbiAgICAgICAgaWYgKGtleSA9PT0gJ2ljb24nKSB7XG4gICAgICAgICAgZGF0YS5pY29uID0gdmFsdWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSAnYmxpbmQnICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB2YWx1ZSA9IHRydWVcbiAgICAgICAgICBkYXRhLmJsaW5kID0gdHJ1ZSAmJiBbQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS10uaW5jbHVkZXModHlwZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICB9XG4gICAgICAgIGRhdGEuZGF0YXNldFtrZXldID0gdmFsdWVcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZGF0YS5kYXRhc2V0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkYXRhLmRhdGFzZXQuZXh0ZXJuYWwgIT09ICd1bmRlZmluZWQnICYmIFsnaHR0cCcsICdodHRwcyddLmluY2x1ZGVzKGRhdGEuZGF0YXNldC5leHRlcm5hbCkpIHtcbiAgICAgICAgZGF0YS5kYXRhc2V0Lmljb24gPSBkYXRhLmRhdGFzZXQuZXh0ZXJuYWwgKyAnOi8vJyArIGRhdGEuZGF0YXNldC5pY29uXG4gICAgICAgIGRhdGEuaWNvbiA9IGRhdGEuZGF0YXNldC5pY29uXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHRpdGxlXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKGRhdGEuZGF0YXNldC5kaWZmaWN1bHR5KVxuXG4gICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSzoge1xuICAgICAgICBsZXQgaHVtYW5OYW1lID0gZGF0YS5kYXRhc2V0Lm5hbWVcbiAgICAgICAgaWYgKFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXS5pbmNsdWRlcyhkYXRhLmRhdGFzZXQudHlwZT8udG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhc2V0Lm5hbWUgPT09ICdsY2snKSB7XG4gICAgICAgICAgICBodW1hbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkYXRhLmRhdGFzZXQubmFtZSA9PT0gJ3NhbicpIHtcbiAgICAgICAgICAgIGh1bWFuTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoWydjaGFyYWMnLCAnY2hhcicsICdjaGFyYWN0ZXJpc3RpYycsICdjaGFyYWN0ZXJpc3RpY3MnXS5pbmNsdWRlcyhkYXRhLmRhdGFzZXQudHlwZT8udG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICBodW1hbk5hbWUgPSBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMoZGF0YS5kYXRhc2V0Lm5hbWUpPy5sYWJlbFxuICAgICAgICB9XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2skeyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7IWRhdGEuZGF0YXNldC5tb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICBtb2RpZmllcjogZGF0YS5kYXRhc2V0Lm1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogaHVtYW5OYW1lXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTOlxuICAgICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua1Nhbkxvc3MkeyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7IWRhdGEuZGF0YXNldC5tb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICBtb2RpZmllcjogZGF0YS5kYXRhc2V0Lm1vZGlmaWVyLFxuICAgICAgICAgICAgc2FuTWluOiBkYXRhLmRhdGFzZXQuc2FuTWluLFxuICAgICAgICAgICAgc2FuTWF4OiBkYXRhLmRhdGFzZXQuc2FuTWF4XG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNOlxuICAgICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0l0ZW0keyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7IWRhdGEuZGF0YXNldC5tb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICBtb2RpZmllcjogZGF0YS5kYXRhc2V0Lm1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogZGF0YS5kYXRhc2V0Lm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVDpcbiAgICAgICAgdGl0bGUgPSBkYXRhLmVmZmVjdC5sYWJlbFxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGlmICghbmFtZSkge1xuICAgICAgZGF0YS5uYW1lID0gdGl0bGVcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YS5kYXRhc2V0LmRpc3BsYXlOYW1lID0gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBhLnRpdGxlID0gZ2FtZS51c2VyLmlzR00gPyBkYXRhLm5hbWUgOiB0aXRsZVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XG4gICAgICBhLmRhdGFzZXRba10gPSB2XG4gICAgfVxuICAgIGEuZHJhZ2dhYmxlID0gdHJ1ZVxuICAgIGRhdGEuaWNvbiA9IGRhdGEuaWNvbiA/PyBkYXRhLmVmZmVjdD8uaWNvbiA/PyAnZmFzIGZhLWRpY2UnXG4gICAgLy8gY2hlY2sgaWYgaXQncyBhbiBpbWFnZSBvciBhbiBpY29uXG4gICAgaWYgKGRhdGEuaWNvbi5pbmNsdWRlcygnXFxcXCcpIHx8IGRhdGEuaWNvbi5pbmNsdWRlcygnLicpKSB7XG4gICAgICBkYXRhLmltZyA9IGRhdGEuaWNvblxuICAgIH1cbiAgICBpZiAoZGF0YS5ibGluZCkge1xuICAgICAgYS5pbm5lckhUTUwgKz0gJzxpIGNsYXNzPVwiZmFzIGZhLWV5ZS1zbGFzaFwiPjwvaT4nXG4gICAgfVxuICAgIGlmIChkYXRhLmltZykge1xuICAgICAgYS5pbm5lckhUTUwgKz0gYDxpbWcgZGF0YS1saW5rLWljb249XCIke2RhdGEuaWNvbn1cIiBzcmM9XCIke2RhdGEuaW1nfVwiPmBcbiAgICB9IGVsc2Uge1xuICAgICAgYS5pbm5lckhUTUwgKz0gYDxpIGRhdGEtbGluay1pY29uPVwiJHtkYXRhLmljb259XCIgY2xhc3M9XCJsaW5rLWljb24gJHtkYXRhLmljb259XCI+PC9pPmBcbiAgICB9XG4gICAgYS5pbm5lckhUTUwgKz0gYDxzcGFuPiR7ZGF0YS5uYW1lfTwvc3Bhbj5gXG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGNvbnRlbnQgbGluayBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50RGF0YSAgICAgICAgICAgICAgICAgICAgIFRoZSBwYXJzZWQgb2JqZWN0IG9mIGRhdGEgcHJvdmlkZWQgYnkgdGhlIGRyb3AgdHJhbnNmZXIgZXZlbnQuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gICAgICAgICAgICAgICAgICAgICBBZGRpdGlvbmFsIG9wdGlvbnMgdG8gY29uZmlndXJlIGxpbmsgZ2VuZXJhdGlvbi5cbiAgICogQHBhcmFtIHtDbGllbnREb2N1bWVudH0gW29wdGlvbnMucmVsYXRpdmVUb10gIEEgZG9jdW1lbnQgdG8gZ2VuZXJhdGUgYSBsaW5rIHJlbGF0aXZlIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubGFiZWxdICAgICAgICAgICAgICAgQSBjdXN0b20gbGFiZWwgdG8gdXNlIGluc3RlYWQgb2YgdGhlIGRvY3VtZW50J3MgbmFtZS5cbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICogQGludGVybmFsXG4gICAqL1xuICBfY3JlYXRlRG9jdW1lbnRMaW5rIChldmVudERhdGEsIHsgcmVsYXRpdmVUbywgbGFiZWwgfSA9IHt9KSB7XG4gICAgaWYgKCFldmVudERhdGEuY2hlY2spIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBzd2l0Y2ggKGV2ZW50RGF0YS5jaGVjay50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0s6IHtcbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpjaGFyYWMsbmFtZTpTVFIsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNUUiBjaGVjaygtMSl9XG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW2JsaW5kLHR5cGU6Y2hhcmFjdGVyaXN0aWMsbmFtZTpzdHIsZGlmZmljdWx0eToxLG1vZGlmaWVyOjAsaWNvbjpmYSBmYS1saW5rXXtTdHJlbmd0aH1cbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbYmxpbmQsdHlwZTphdHRyaWJ1dGUsbmFtZTpsY2ssZGlmZmljdWx0eToxLG1vZGlmaWVyOjAsaWNvbjpmYSBmYS1saW5rXXtMdWNrfVxuICAgICAgICAvLyBAY29jNy5jaGVja1tibGluZCx0eXBlOnNraWxsLG5hbWU6TGF3LGRpZmZpY3VsdHk6MSxtb2RpZmllcjowLGljb246ZmEgZmEtbGlua117TGF3fVxuICAgICAgICBpZiAoIWV2ZW50RGF0YS5saW5rVHlwZSB8fCAhZXZlbnREYXRhLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2V2ZW50RGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9dHlwZToke2V2ZW50RGF0YS5saW5rVHlwZX0sbmFtZToke2V2ZW50RGF0YS5uYW1lfWBcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudERhdGEuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcgJiYgZXZlbnREYXRhLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZXZlbnREYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnREYXRhLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJyAmJiBldmVudERhdGEubW9kaWZpZXIgIT09IDApIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHtldmVudERhdGEubW9kaWZpZXJ9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuaWNvbikge1xuICAgICAgICAgIGNvbnN0IHBhcnRzID0gZXZlbnREYXRhLmljb24ubWF0Y2goL14oaHR0cHM/KTpcXC9cXC8oLispJC8pXG4gICAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsZXh0ZXJuYWw6JHtwYXJ0c1sxXX0saWNvbjoke3BhcnRzWzJdfWBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGljb246JHtldmVudERhdGEuaWNvbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEucGFjaykge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxwYWNrOiR7ZXZlbnREYXRhLnBhY2t9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuaWQpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsaWQ6JHtldmVudERhdGEuaWR9YFxuICAgICAgICB9XG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3LmNoZWNrWyR7b3B0aW9uc31dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1M6IHtcbiAgICAgICAgLy8gQGNvYzcuc2FubG9zc1tzYW5NYXg6MUQ2LHNhbk1pbjoxLGRpZmZpY3VsdHk6KyssbW9kaWZpZXI6LTFde0hhcmQgU2FuIExvc3MgKC0xKSAxLzFENn1cbiAgICAgICAgaWYgKCFldmVudERhdGEuc2FuTWF4IHx8ICFldmVudERhdGEuc2FuTWluKSB7XG4gICAgICAgICAgcmV0dXJuICcnXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHtldmVudERhdGEuYmxpbmQgPyAnYmxpbmQsJyA6ICcnfXNhbk1heDoke2V2ZW50RGF0YS5zYW5NYXh9LHNhbk1pbjoke2V2ZW50RGF0YS5zYW5NaW59YFxuICAgICAgICBpZiAoZXZlbnREYXRhLnNhblJlYXNvbikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxzYW5SZWFzb246JHtldmVudERhdGEuc2FuUmVhc29ufWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLmRpZmZpY3VsdHkgJiYgZXZlbnREYXRhLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZXZlbnREYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEubW9kaWZpZXIgJiYgZXZlbnREYXRhLm1vZGlmaWVyICE9PSAwKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7ZXZlbnREYXRhLm1vZGlmaWVyfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLmljb24pIHtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IGV2ZW50RGF0YS5pY29uLm1hdGNoKC9eKGh0dHBzPyk6XFwvXFwvKC4rKSQvKVxuICAgICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGV4dGVybmFsOiR7cGFydHNbMV19LGljb246JHtwYXJ0c1syXX1gXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxpY29uOiR7ZXZlbnREYXRhLmljb259YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5zYW5sb3NzWyR7b3B0aW9uc31dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLklURU06IHtcbiAgICAgICAgLy8gQGNvYzcuaXRlbVt0eXBlOm9wdGlvbmFsLG5hbWU6U2hvdGd1bixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU2hpdGd1biBjaGVjaygtMSl9XG4gICAgICAgIGlmICghZXZlbnREYXRhLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2V2ZW50RGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9bmFtZToke2V2ZW50RGF0YS5uYW1lfWBcbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pY29uKSB7XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBldmVudERhdGEuaWNvbi5tYXRjaCgvXihodHRwcz8pOlxcL1xcLyguKykkLylcbiAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxleHRlcm5hbDoke3BhcnRzWzFdfSxpY29uOiR7cGFydHNbMl19YFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsaWNvbjoke2V2ZW50RGF0YS5pY29ufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5wYWNrKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHBhY2s6JHtldmVudERhdGEucGFja31gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pZCkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxpZDoke2V2ZW50RGF0YS5pZH1gXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuaXRlbVske29wdGlvbnN9XWBcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBldmVudERhdGEuZGlzcGxheU5hbWUgPz8gKGxhYmVsID8/ICcnKVxuICAgICAgICBpZiAoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBsaW5rICs9IGB7JHtkaXNwbGF5TmFtZX19YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1Q6IHtcbiAgICAgICAgLy8gQGNvYzcuZWZmZWN0W3tcImxhYmVsXCI6XCJLYXBvd1wiLFwiaWNvblwiOlwiaWNvbnMvc3ZnL2F1cmEuc3ZnXCIsXCJjaGFuZ2VzXCI6W3tcImtleVwiOlwic3lzdGVtLnVua25vd24udGVzdFwiLFwibW9kZVwiOjIsXCJ2YWx1ZVwiOlwiNVwifV0sXCJ0aW50XCI6XCIjZTkxNjE2XCIsXCJkdXJhdGlvblwiOntcInNlY29uZHNcIjpudWxsLFwicm91bmRzXCI6NixcInR1cm5zXCI6bnVsbH19XXtLYXBvd2luZ31cbiAgICAgICAgLy8gY29uc3QgZWZmZWN0RGF0YSA9IGZvdW5kcnkudXRpbHMuZGVlcENsb25lKGV2ZW50RGF0YSlcbiAgICAgICAgLy8gaWYgKCF0aGlzLmVmZmVjdElzVGVtcCkgZGVsZXRlIGVmZmVjdERhdGEuZHVyYXRpb25cbiAgICAgICAgLy8gaWYgKGVmZmVjdERhdGEuY2hhbmdlcz8ubGVuZ3RoID09PSAwKSBkZWxldGUgZWZmZWN0RGF0YS5jaGFuZ2VzXG4gICAgICAgIC8vIGlmICghZWZmZWN0RGF0YS5kaXNhYmxlZCkgZGVsZXRlIGVmZmVjdERhdGEuZGlzYWJsZWRcbiAgICAgICAgLy8gaWYgKCFlZmZlY3REYXRhLnRpbnQpIGRlbGV0ZSBlZmZlY3REYXRhLnRpbnRcbiAgICAgICAgY29uc3QgcGFydHMgPSBldmVudERhdGEub2JqZWN0Lmljb24ubWF0Y2goL14oaHR0cHM/KTpcXC9cXC8oLispJC8pXG4gICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgIGV2ZW50RGF0YS5vYmplY3QuZXh0ZXJuYWwgPSBwYXJ0c1sxXVxuICAgICAgICAgIGV2ZW50RGF0YS5vYmplY3QuaWNvbiA9IHBhcnRzWzJdXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuZWZmZWN0WyR7SlNPTi5zdHJpbmdpZnkoZXZlbnREYXRhLm9iamVjdCl9XWBcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBldmVudERhdGEuZGlzcGxheU5hbWUgPz8gKGxhYmVsID8/ICcnKVxuICAgICAgICBpZiAoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBsaW5rICs9IGB7JHtkaXNwbGF5TmFtZX19YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnPydcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25MaW5rQWN0b3JDbGljayAoYWN0b3IsIG9wdGlvbnMsIHsgc2hpZnRLZXkgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBzd2l0Y2ggKG9wdGlvbnMuY2hlY2spIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSzpcbiAgICAgICAgaWYgKFsnY2hhcmFjJywgJ2NoYXInLCAnY2hhcmFjdGVyaXN0aWMnLCAnY2hhcmFjdGVyaXN0aWNzJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5jaGFyYWN0ZXJpc3RpY0NoZWNrKFxuICAgICAgICAgICAgb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgc2hpZnRLZXksXG4gICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGlmIChbJ3NraWxsJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5za2lsbENoZWNrKG9wdGlvbnMsIHNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICB9XG4gICAgICAgIGlmIChbJ2F0dHJpYnV0ZXMnLCAnYXR0cmlidXRlJywgJ2F0dHJpYicsICdhdHRyaWJzJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5hdHRyaWJ1dGVDaGVjayhvcHRpb25zLm5hbWUsIHNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTOlxuICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKGFjdG9yLmFjdG9yS2V5LCBvcHRpb25zLCB7XG4gICAgICAgICAgZmFzdEZvcndhcmQ6IHNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTTpcbiAgICAgICAgcmV0dXJuIGFjdG9yLndlYXBvbkNoZWNrKG9wdGlvbnMsIHNoaWZ0S2V5KVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUOlxuICAgICAgICBhd2FpdCBhY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW3tcbiAgICAgICAgICBsYWJlbDogb3B0aW9ucy5vYmplY3QubGFiZWwsXG4gICAgICAgICAgaWNvbjogb3B0aW9ucy5vYmplY3QuaWNvbixcbiAgICAgICAgICBjaGFuZ2VzOiBvcHRpb25zLm9iamVjdC5jaGFuZ2VzXG4gICAgICAgIH1dKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0b0NoYXRNZXNzYWdlIChvcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0aW9uID0ge1xuICAgICAgc3BlYWtlcjoge1xuICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IG1lc3NhZ2VcbiAgICBjb25zdCBsaW5rID0gKG5ldyBDb0M3TGluaygpKS5fY3JlYXRlRG9jdW1lbnRMaW5rKG9wdGlvbnMpXG4gICAgaWYgKG9wdGlvbnMuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICBtZXNzYWdlID0gYDxkaXYgY2xhc3M9XCJlZmZlY3QtbWVzc2FnZVwiPiR7bGlua308L2Rpdj5gXG4gICAgfSBlbHNlIHtcbiAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VDaGVja1JlcXVlc3RlZFdhaXQnLCB7XG4gICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICB9KVxuICAgIH1cbiAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UobnVsbCwgbWVzc2FnZSwgb3B0aW9uKVxuICB9XG5cbiAgc3RhdGljIHRvV2hpc3Blck1lc3NhZ2UgKG9wdGlvbnMsIGFjdG9ycykge1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XG4gICAgICBjb25zdCBvcHRpb24gPSB7XG4gICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgd2hpc3BlcjogYWN0b3Iub3duZXJzLm1hcChhID0+IGEuaWQpXG4gICAgICB9XG4gICAgICBsZXQgbWVzc2FnZVxuICAgICAgY29uc3QgbGluayA9IChuZXcgQ29DN0xpbmsoKSkuX2NyZWF0ZURvY3VtZW50TGluayhvcHRpb25zKVxuICAgICAgaWYgKG9wdGlvbnMuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBgPGRpdiBjbGFzcz1cImVmZmVjdC1tZXNzYWdlXCI+JHtsaW5rfTwvZGl2PmBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VUYXJnZXRDaGVja1JlcXVlc3RlZCcsIHtcbiAgICAgICAgICBuYW1lOiBhY3Rvci5uYW1lLFxuICAgICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UobnVsbCwgbWVzc2FnZSwgb3B0aW9uKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGEgY2hlY2sgd2hlbiBhIGxpbmsgaXMgY2xpY2tlZC5cbiAgICogRGVwZW5kaW5nIHRoZSBvcmlnaW5cbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIF9vbkxpbmtDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gQ29DN0xpbmsuX2xpbmtGcm9tRXZlbnQoZXZlbnQpXG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XG4gICAgICAgIENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCkge1xuICAgICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKHRva2VuLmFjdG9yLCBvcHRpb25zLCB7IHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgY29uc3QgYWN0b3IgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3Ioc3BlYWtlcilcbiAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICBDb0M3TGluay5fb25MaW5rQWN0b3JDbGljayhhY3Rvciwgb3B0aW9ucywgeyBzaGlmdEtleTogZXZlbnQuc2hpZnRLZXkgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBDb0M3TGluay50b0NoYXRNZXNzYWdlKG9wdGlvbnMpXG4gICAgICByZXR1cm5cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgbGV0IGFjdG9yID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHNwZWFrZXIpXG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhID0+IChhLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IGEub3duZXJzaGlwLmRlZmF1bHQpID49IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT0JTRVJWRVIpXG4gICAgICAgIGlmIChhY3RvcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgYWN0b3IgPSBhY3RvcnNbMF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKGFjdG9yLCBvcHRpb25zLCB7IHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9Db250cm9sbGVkQWN0b3InKSlcbiAgfVxuXG4gIHNldFZhbHVlIChrZXksIHZhbHVlKSB7XG4gICAgdGhpcy5vYmplY3Rba2V5XSA9IHZhbHVlXG4gIH1cblxuICBnZXQgbGluayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZURvY3VtZW50TGluayh0aGlzLm9iamVjdClcbiAgfVxuXG4gIGdldCBpZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmlkXG4gIH1cblxuICBnZXQgcGFjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnBhY2tcbiAgfVxuXG4gIGdldCBjaGVja1R5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVja1xuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5kaWZmaWN1bHR5XG4gIH1cblxuICBnZXQgaWNvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lmljb25cbiAgfVxuXG4gIGdldCBkaXNwbGF5TmFtZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmRpc3BsYXlOYW1lXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5tb2RpZmllclxuICB9XG5cbiAgZ2V0IGxpbmtUeXBlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QubGlua1R5cGVcbiAgfVxuXG4gIGdldCBzYW5NaW4gKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5NaW5cbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5NYXhcbiAgfVxuXG4gIGdldCBzYW5SZWFzb24gKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5SZWFzb25cbiAgfVxuXG4gIGdldCBlZmZlY3QgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5vYmplY3RcbiAgfVxuXG4gIGdldCBjaGVja05hbWUgKCkge1xuICAgIGlmICh0aGlzLmlzQ2hhcmFjdGVyaXN0aWNDaGVjaykge1xuICAgICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClcbiAgICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3MuZmluZChjID0+IGMua2V5ID09PSB0aGlzLm9iamVjdC5uYW1lIHx8IGMuc2hvcnROYW1lID09PSB0aGlzLm9iamVjdC5uYW1lIHx8IGMubGFiZWwgPT09IHRoaXMub2JqZWN0Lm5hbWUpPy5rZXkgPz8gJydcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lm5hbWVcbiAgfVxuXG4gIGdldCBpc0NoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tcbiAgfVxuXG4gIGdldCBpc0NoYXJhY3RlcmlzdGljQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5DSEFSQUNURVJJU1RJQ1xuICB9XG5cbiAgZ2V0IGlzQXR0cmlidXRlQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5BVFRSSUJVVEVcbiAgfVxuXG4gIGdldCBpc1NraWxsQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5TS0lMTFxuICB9XG5cbiAgZ2V0IGlzSXRlbUNoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTVxuICB9XG5cbiAgZ2V0IGlzU2FuTG9zc0NoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TU1xuICB9XG5cbiAgZ2V0IGlzRWZmZWN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5ibGluZFxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDT05TVCwgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi9jb2M3LWxpbmsuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGlkOiAnbGluay1jcmVhdGlvbicsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnYWN0aXZlLWVmZmVjdC1zaGVldCddLFxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DcmVhdGVMaW5rJyksXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiBudWxsLCBkcm9wU2VsZWN0b3I6ICcuY29udGFpbmVyJyB9XSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2xpbmstY3JlYXRpb24uaHRtbCcsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHdpZHRoOiA1NjAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnRhYnMnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5lZmZlY3Qtb3B0aW9ucycsXG4gICAgICAgICAgaW5pdGlhbDogJ2RldGFpbHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvLyBQcmVwYXJlIGNoZWNrIHR5cGVcbiAgICBzaGVldERhdGEuY2hlY2tUeXBlID0gW1xuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0ssXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hlY2snKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1MsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5Q2hlY2snKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLklURU0sXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSXRlbVdlYXBvbicpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNULFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdFRkZFQ1QuVGFiRWZmZWN0cycpXG4gICAgICB9XG4gICAgXVxuXG4gICAgLy8gUHJlcGFyZSAnY2hlY2snIGxpbmsgdHlwZVxuICAgIHNoZWV0RGF0YS5saW5rVHlwZSA9IFtcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWMnKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuQVRUUklCVVRFLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkxJTktfVFlQRS5TS0lMTCxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbCcpXG4gICAgICB9XG4gICAgXVxuXG4gICAgLy8gUHJlcGFyZSAnY2hlY2snICdhdHRyaWJ1dGUnIHR5cGVzXG4gICAgc2hlZXREYXRhLmF0dHJpYnV0ZVR5cGUgPSBbXG4gICAgICB7XG4gICAgICAgIGtleTogJ2xjaycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6ICdzYW4nLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpXG4gICAgICB9XG4gICAgXVxuXG4gICAgLy8gUHJlcGFyZSBlZmZlY3QgbW9kZSB0eXBlc1xuICAgIHNoZWV0RGF0YS5lZmZlY3RNb2RlcyA9IE9iamVjdC5lbnRyaWVzKENPTlNULkFDVElWRV9FRkZFQ1RfTU9ERVMpLnJlZHVjZShcbiAgICAgIChvYmosIGUpID0+IHtcbiAgICAgICAgb2JqW2VbMV1dID0gZ2FtZS5pMThuLmxvY2FsaXplKCdFRkZFQ1QuTU9ERV8nICsgZVswXSlcbiAgICAgICAgcmV0dXJuIG9ialxuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKVxuXG4gICAgLy8gUHJlcGFyZSAnY2hlY2snICdjaGFyYWN0ZXJpc3RpYycgdHlwZXNcbiAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNUeXBlID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClcblxuICAgIHNoZWV0RGF0YS5saW5rID0gc2hlZXREYXRhLm9iamVjdC5saW5rXG5cbiAgICBzaGVldERhdGEuZnJvbUdhbWUgPSBzaGVldERhdGEubGluay5pc0l0ZW1DaGVjayB8fCBzaGVldERhdGEubGluay5pc1NraWxsQ2hlY2tcblxuICAgIHNoZWV0RGF0YS5mcm9tRGlyZWN0b3J5ID0gKHNoZWV0RGF0YS5vYmplY3QuaGFzSUQgPT09ICdmcm9tRGlyZWN0b3J5JylcbiAgICBzaGVldERhdGEuZnJvbUNvbXBlbmRpdW0gPSAoc2hlZXREYXRhLm9iamVjdC5oYXNJRCA9PT0gJ2Zyb21Db21wZW5kaXVtJylcblxuICAgIHNoZWV0RGF0YS5pc1NldEZyb21HYW1lID0gKHNoZWV0RGF0YS5saW5rLmlkICYmIChzaGVldERhdGEuZnJvbURpcmVjdG9yeSB8fCBzaGVldERhdGEuZnJvbUNvbXBlbmRpdW0pKVxuXG4gICAgc2hlZXREYXRhLmRpZmZpY3VsdHlMZXZlbCA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWxcblxuICAgIHNoZWV0RGF0YS5hY3Rvck5hbWVzID0gc2hlZXREYXRhLm9iamVjdC5hY3RvcnMubWFwKGEgPT4gYS5uYW1lKS5qb2luKCcsICcpXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnc2VsZWN0W25hbWU9dHlwZV0sc2VsZWN0W25hbWU9Y2hlY2tdLHNlbGVjdFtuYW1lPWF0dHJpYnV0ZUtleV0sc2VsZWN0W25hbWU9Y2hhcmFjdGVyaXN0aWNLZXldLGlucHV0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgIC5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcblxuICAgIC8vIEhhbmRsaW5nIGVmZmVjdHNcbiAgICBodG1sLmZpbmQoJy5lZmZlY3QtY29udHJvbCcpLmNsaWNrKHRoaXMuX29uRWZmZWN0Q29udHJvbC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgX29uQ2hhbmdlU3VibWl0IChldmVudCkge1xuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lKSB7XG4gICAgICBjYXNlICdmcm9tQ29tcGVuZGl1bSc6XG4gICAgICBjYXNlICdmcm9tRGlyZWN0b3J5JzpcbiAgICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lID09PSB0aGlzLm9iamVjdC5oYXNJRCA/ICcnIDogZXZlbnQuY3VycmVudFRhcmdldC5uYW1lKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgfVxuXG4gIF9vbkVmZmVjdENvbnRyb2wgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBzd2l0Y2ggKGJ1dHRvbi5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnYWRkJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZEVmZmVjdENoYW5nZSgpXG4gICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICBidXR0b24uY2xvc2VzdCgnLmVmZmVjdC1jaGFuZ2UnKS5yZW1vdmUoKVxuICAgICAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICB9XG4gIH1cblxuICBhc3luYyBfYWRkRWZmZWN0Q2hhbmdlICgpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLm9iamVjdC5saW5rLmVmZmVjdC5jaGFuZ2VzLmxlbmd0aFxuICAgIHJldHVybiB0aGlzLnN1Ym1pdCh7XG4gICAgICBwcmV2ZW50Q2xvc2U6IHRydWUsXG4gICAgICB1cGRhdGVEYXRhOiB7XG4gICAgICAgIFtgZWZmZWN0LmNoYW5nZXMuJHtpZHh9YF06IHtcbiAgICAgICAgICBrZXk6ICcnLFxuICAgICAgICAgIG1vZGU6IENPTlNULkFDVElWRV9FRkZFQ1RfTU9ERVMuQURELFxuICAgICAgICAgIHZhbHVlOiAnJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGxldCBoYXNFZmZlY3QgPSBmYWxzZVxuICAgIGNvbnN0IGVmZmVjdCA9IHtcbiAgICAgIGR1cmF0aW9uOiB7fSxcbiAgICAgIGNoYW5nZXM6IFtdXG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIGZvcm1EYXRhKSB7XG4gICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICBjYXNlICdjaGVja05hbWUnOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCBmb3JtRGF0YS5jaGVja05hbWUpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYmxpbmQnOlxuICAgICAgICBjYXNlICdkaWZmaWN1bHR5JzpcbiAgICAgICAgY2FzZSAnZGlzcGxheU5hbWUnOlxuICAgICAgICBjYXNlICdpY29uJzpcbiAgICAgICAgY2FzZSAnaWQnOlxuICAgICAgICBjYXNlICdtb2RpZmllcic6XG4gICAgICAgIGNhc2UgJ3BhY2snOlxuICAgICAgICBjYXNlICdzYW5NaW4nOlxuICAgICAgICBjYXNlICdzYW5NYXgnOlxuICAgICAgICBjYXNlICdzYW5SZWFzb24nOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoa2V5LCBmb3JtRGF0YVtrZXldKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2hhc01vZGlmaWVycyc6XG4gICAgICAgIGNhc2UgJ2hhc0xhYmVsJzpcbiAgICAgICAgY2FzZSAnaGFzSWNvbic6XG4gICAgICAgICAgdGhpcy5vYmplY3Rba2V5XSA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QubGFiZWwnOlxuICAgICAgICAgIGVmZmVjdC5sYWJlbCA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0Lmljb24nOlxuICAgICAgICAgIGVmZmVjdC5pY29uID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QudGludCc6XG4gICAgICAgICAgZWZmZWN0LnRpbnQgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kaXNhYmxlZCc6XG4gICAgICAgICAgZWZmZWN0LmRpc2FibGVkID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QuZHVyYXRpb24uc2Vjb25kcyc6XG4gICAgICAgICAgZWZmZWN0LmR1cmF0aW9uLnNlY29uZHMgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kdXJhdGlvbi5yb3VuZHMnOlxuICAgICAgICAgIGVmZmVjdC5kdXJhdGlvbi5yb3VuZHMgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kdXJhdGlvbi50dXJucyc6XG4gICAgICAgICAgZWZmZWN0LmR1cmF0aW9uLnR1cm5zID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgY29uc3QgbWF0Y2ggPSBrZXkubWF0Y2goL15lZmZlY3RcXC5jaGFuZ2VzXFwuKFxcZCspXFwua2V5JC8pXG4gICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBlZmZlY3QuY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5OiBmb3JtRGF0YVtrZXldLFxuICAgICAgICAgICAgICBtb2RlOiBmb3JtRGF0YVsnZWZmZWN0LmNoYW5nZXMuJyArIG1hdGNoWzFdICsgJy5tb2RlJ10sXG4gICAgICAgICAgICAgIHZhbHVlOiBmb3JtRGF0YVsnZWZmZWN0LmNoYW5nZXMuJyArIG1hdGNoWzFdICsgJy52YWx1ZSddXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGFzRWZmZWN0KSB7XG4gICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCdvYmplY3QnLCBlZmZlY3QpXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICBzd2l0Y2ggKHRhcmdldC5uYW1lKSB7XG4gICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2NoZWNrJywgdGFyZ2V0LnZhbHVlKVxuICAgICAgICAgIGlmICh0YXJnZXQudmFsdWUgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0spIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2xpbmtUeXBlJywgQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMKVxuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsICcnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdjaGVjayc6XG4gICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbGlua1R5cGUnLCB0YXJnZXQudmFsdWUpXG4gICAgICAgICAgaWYgKHRhcmdldC52YWx1ZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLkNIQVJBQ1RFUklTVElDKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClbMF0ua2V5KVxuICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LnZhbHVlID09PSBDb0M3TGluay5MSU5LX1RZUEUuQVRUUklCVVRFKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgJ2xjaycpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCAnJylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYXR0cmlidXRlS2V5JzpcbiAgICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWNLZXknOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCB0YXJnZXQudmFsdWUpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudC50eXBlID09PSAnc3VibWl0Jykge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LnN1Ym1pdHRlci5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgICAgIGNhc2UgJ2NsaXBib2FyZCc6XG4gICAgICAgICAgICBDb0M3VXRpbGl0aWVzLmNvcHlUb0NsaXBib2FyZCh0aGlzLm9iamVjdC5saW5rLmxpbmspXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2NoYXQnOlxuICAgICAgICAgICAgQ29DN0xpbmsudG9DaGF0TWVzc2FnZSh0aGlzLm9iamVjdC5saW5rLm9iamVjdClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnd2hpc3Blci1vd25lcic6XG4gICAgICAgICAgICBDb0M3TGluay50b1doaXNwZXJNZXNzYWdlKHRoaXMub2JqZWN0Lmxpbmsub2JqZWN0LCB0aGlzLm9iamVjdC5hY3RvcnMpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ3doaXNwZXItc2VsZWN0ZWQnOlxuICAgICAgICAgICAgaWYgKCFjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JOb1Rva2Vuc1NlbGVjdGVkJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UodGhpcy5vYmplY3QubGluay5vYmplY3QsIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5maWx0ZXIodCA9PiB0LmFjdG9yLm93bmVycy5sZW5ndGgpLm1hcCh0ID0+IHQuYWN0b3IpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdDb0M3TGluaycpIHtcbiAgICAgIHRoaXMuc2V0TGluayhhd2FpdCBDb0M3TGluay5mcm9tRHJvcERhdGEoZGF0YSkpXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoKGRhdGEudHlwZSA9PT0gJ0ZvbGRlcicgJiYgZGF0YS5kb2N1bWVudE5hbWUgPT09ICdBY3RvcicpIHx8IFsnSXRlbScsICdBY3RvciddLmluY2x1ZGVzKGRhdGEudHlwZSkpIHtcbiAgICAgICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCBkYXRhLmRvY3VtZW50TmFtZSA/PyBkYXRhLnR5cGUpXG4gICAgICAgIGlmIChkYXRhLmRvY3VtZW50TmFtZSA/PyBkYXRhLnR5cGUgPT09ICdBY3RvcicpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5hY3RvcnMgPSBkYXRhTGlzdC5maWx0ZXIoYSA9PiBhLm93bmVycy5sZW5ndGgpXG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhTGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBpZiAoWydza2lsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhkYXRhTGlzdFswXS50eXBlKSkge1xuICAgICAgICAgICAgaWYgKGRhdGFMaXN0WzBdLnBhY2spIHtcbiAgICAgICAgICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbUNvbXBlbmRpdW0nXG4gICAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ3BhY2snLCBkYXRhTGlzdFswXS5wYWNrKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbURpcmVjdG9yeSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2lkJywgZGF0YUxpc3RbMF0uaWQpXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgZGF0YUxpc3RbMF0ubmFtZSlcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0TGluayAobGluaykge1xuICAgIHRoaXMub2JqZWN0LmxpbmsgPSBsaW5rXG4gICAgaWYgKGxpbmsucGFjayAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gJ2Zyb21Db21wZW5kaXVtJ1xuICAgIH0gZWxzZSBpZiAobGluay5pZCAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gJ2Zyb21EaXJlY3RvcnknXG4gICAgfVxuICAgIGlmIChsaW5rLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciB8fCBwYXJzZUludChsaW5rLm1vZGlmaWVyLCAxMCkgIT09IDApIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc01vZGlmaWVycyA9IHRydWVcbiAgICB9XG4gICAgaWYgKGxpbmsuZGlzcGxheU5hbWUgIT09ICcnKSB7XG4gICAgICB0aGlzLm9iamVjdC5oYXNMYWJlbCA9IHRydWVcbiAgICB9XG4gICAgaWYgKGxpbmsuaWNvbiAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0ljb24gPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAobGlua0RhdGEgPSB7fSwgb3B0aW9uID0ge30pIHtcbiAgICBjb25zdCBvYmplY3QgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHtcbiAgICAgIGxpbms6IG51bGwsXG4gICAgICBoYXNJRDogJycsXG4gICAgICBoYXNNb2RpZmllcnM6IGZhbHNlLFxuICAgICAgaGFzTGFiZWw6IGZhbHNlLFxuICAgICAgaGFzSWNvbjogZmFsc2UsXG4gICAgICBhY3RvcnM6IFtdXG4gICAgfSwgb3B0aW9uKVxuICAgIGNvbnN0IGRpYWxvZyA9IG5ldyBDb0M3Q29udGVudExpbmtEaWFsb2cob2JqZWN0LCB7fSlcbiAgICBkaWFsb2cuc2V0TGluayhhd2FpdCBDb0M3TGluay5mcm9tRHJvcERhdGEobGlua0RhdGEpKVxuICAgIGRpYWxvZy5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5cbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4vY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIFJvbGxEaWFsb2cge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICBpZiAob3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbCA9IHt9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLmhhcmQgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gaWYoIHVuZGVmaW5lZCA9PSBvcHRpb25zLmFza1ZhbHVlKSBvcHRpb25zLmFza1ZhbHVlID0gdHJ1ZTtcbiAgICBpZiAob3B0aW9ucy5uYW1lICYmICFvcHRpb25zLmRpc3BsYXlOYW1lKSBvcHRpb25zLmRpc3BsYXlOYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgY29uc3QgdW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0ID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGFsbG93RmxhdERpY2VNb2RpZmllcjpcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0RGljZU1vZGlmaWVyJykgJiZcbiAgICAgICAgIW9wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIsXG4gICAgICBhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcjpcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKSAmJlxuICAgICAgICAhb3B0aW9ucy5kaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyLFxuICAgICAgZGlmZmljdWx0eTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCxcbiAgICAgIHVua25vd25EaWZmaWN1bHR5RGVmYXVsdCxcbiAgICAgIGhpZGVEaWZmaWN1bHR5OiBvcHRpb25zLmhpZGVEaWZmaWN1bHR5ID8/IGZhbHNlLFxuICAgICAgb3B0aW9uc1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICghb3B0aW9ucy5mb3JjZWRDYXJkVHlwZSA/PyB0cnVlKVxuICAgICkge1xuICAgICAgZGF0YS5jYXJkVHlwZXMgPSBDb0M3Q2hhdE1lc3NhZ2UuY2FyZFR5cGVzKG9wdGlvbnMpXG4gICAgfVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvYm9udXMuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Cb251c1NlbGVjdGlvbldpbmRvd05hbWVkJywge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNTZWxlY3Rpb25XaW5kb3cnKSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIHJvbGw6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpY2UnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjYm9udXMtcm9sbC1mb3JtJykpXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ3JvbGwnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbi8vIGltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJztcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgUm9sbENhcmQge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5yb2xscyA9IFtdXG4gICAgdGhpcy5pbml0aWF0b3IgPSBudWxsXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZSAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShjYXJkRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IGNhcmQgPSBPYmplY3QuYXNzaWduKG5ldyB0aGlzKCksIGRhdGEpXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNhcmQucm9sbHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAoY2FyZC5yb2xsc1tpbmRleF0/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgICBjYXJkLnJvbGxzW2luZGV4XSA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBjYXJkLnJvbGxzW2luZGV4XSlcbiAgICAgICAgaWYgKGNhcmQucm9sbHNbaW5kZXhdLnJvbGxlZCkge1xuICAgICAgICAgIGNhcmQucm9sbHNbaW5kZXhdLl9odG1sUm9sbCA9IGF3YWl0IGNhcmQucm9sbHNbaW5kZXhdLmdldEh0bWxSb2xsKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBzcGFuID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmIChzcGFuICYmIHNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBzcGFuLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlSWQobWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZClcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNvbnN0IGZsYWcgPSBzcGFuLmRhdGFzZXQuZmxhZ1xuICAgIGlmICghZmxhZykgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gc3Bhbi5jbG9zZXN0KCcudG9nZ2xlJylcbiAgICBpZiAoIXRvZ2dsZSkge1xuICAgICAgY2FyZC50b2dnbGVGbGFnKGZsYWcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0b2dnbGUucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1zd2l0Y2gnKVxuICAgICAgZm9yIChjb25zdCBiIG9mIGJ1dHRvbnMpIHtcbiAgICAgICAgY2FyZC51bnNldEZsYWcoYi5kYXRhc2V0LmZsYWcpXG4gICAgICB9XG4gICAgICBjYXJkLnNldEZsYWcoZmxhZylcbiAgICB9XG4gICAgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGlzcGF0Y2ggKGRhdGEpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGxldCBtZXNzYWdlcyA9IHVpLmNoYXQuY29sbGVjdGlvbi5maWx0ZXIobWVzc2FnZSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmRlZmF1bHRDb25maWcudHlwZSA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3R5cGUnKSAmJlxuICAgICAgICAgIG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdzdGF0ZScpICE9PSAncmVzb2x2ZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChbJ2NvbWJpbmVkQ2FyZCddLmluY2x1ZGVzKHRoaXMuZGVmYXVsdENvbmZpZy50eXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdpbml0aWF0b3InKSA9PT0gZGF0YS5yb2xsLmluaXRpYXRvclxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcblxuICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgICAvLyBPbGQgbWVzc2FnZXMgY2FuJ3QgYmUgdXNlZCBpZiBtZXNzYWdlIGlzIG1vcmUgdGhhbiBhIGRheSBvbGQgbWFyayBpdCBhcyByZXNvbHZlZFxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZShtZXNzYWdlc1swXS50aW1lc3RhbXApXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICAgICAgY29uc3QgdGltZURpZmZTZWMgPSAobm93IC0gdGltZXN0YW1wKSAvIDEwMDBcbiAgICAgICAgaWYgKDI0ICogNjAgKiA2MCA8IHRpbWVEaWZmU2VjKSB7XG4gICAgICAgICAgYXdhaXQgbWVzc2FnZXNbMF0uc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXG4gICAgICAgICAgbWVzc2FnZXMgPSBbXVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBjYXJkXG4gICAgICBpZiAoIW1lc3NhZ2VzLmxlbmd0aCkgY2FyZCA9IG5ldyB0aGlzKClcbiAgICAgIGVsc2UgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZXNbMF0pXG4gICAgICBpZiAodHlwZW9mIGRhdGEuX3JvbGxNb2RlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjYXJkLl9yb2xsTW9kZSA9IGRhdGEuX3JvbGxNb2RlXG4gICAgICB9XG4gICAgICBhd2FpdCBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICB9IGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy5jb25maWcudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJChodG1sKVxuICAgIGh0bWxDYXJkRWxlbWVudFswXS5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMuY29uZmlnLnRpdGxlKSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudFswXS5vdXRlckhUTUwsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgdHlwZTogdGhpcy5jb25maWcudHlwZSxcbiAgICAgICAgICBzdGF0ZTogJ2luaXRpYXRlZCcsXG4gICAgICAgICAgaW5pdGlhdG9yOiB0aGlzLmluaXRpYXRvclxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgYXdhaXQgdGhpcy5jb21wdXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICBhd2FpdCB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSwgdGhpcylcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuXG4gICAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9KVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUm9sbCAoZGF0YSkge1xuICAgIGlmICghZGF0YS5mcm9tR00pIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5yb2xsc1tkYXRhLnJhbmtdLCBkYXRhLnJvbGwpXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbERhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjaGVjayA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhLnJvbGwpXG4gICAgdGhpcy5yb2xscy5wdXNoKGNoZWNrKVxuICAgIGlmICh0aGlzLmNvbmZpZy50eXBlID09PSAnY29tYmluZWRDYXJkJykge1xuICAgICAgdGhpcy5pbml0aWF0b3IgPSBkYXRhLnJvbGwuaW5pdGlhdG9yXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbCAoZGF0YSkge1xuICAgIHRoaXMucm9sbHMucHVzaChkYXRhKVxuICB9XG5cbiAgcmVtb3ZlUm9sbCAocmFuaykge1xuICAgIHRoaXMucm9sbHMuc3BsaWNlKHJhbmssIDEpXG4gIH1cblxuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGdldCBtZXNzYWdlICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2VcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5fbWVzc2FnZUlkKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZSA9IHhcbiAgfVxuXG4gIGdldCBtZXNzYWdlSWQgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiB0aGlzLl9tZXNzYWdlSWRcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2UuaWRcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZUlkICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZUlkID0geFxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGdldCB3aW5uZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLndpbm5lcilcbiAgfVxuXG4gIGdldCB3aW5uZXIgKCkge1xuICAgIGlmICh0aGlzLndpbm5lcnMubGVuZ3RoKSByZXR1cm4gdGhpcy53aW5uZXJzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGxvb3NlcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzLmZpbHRlcihyID0+ICFyLndpbm5lcilcbiAgfVxuXG4gIGdldCBsb29zZXIgKCkge1xuICAgIGlmICh0aGlzLmxvb3NlcnMubGVuZ3RoKSByZXR1cm4gdGhpcy5sb29zZXJzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGhhc1dpbm5lciAoKSB7XG4gICAgaWYgKHRoaXMud2lubmVycy5sZW5ndGggPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzS2VlcGVyICgpIHtcbiAgICByZXR1cm4gZ2FtZS51c2VyLmlzR01cbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZGF0YVN0cmluZylcbiAgfVxuXG4gIGdldCBkYXRhU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKHRoaXMuY29uZmlnLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCh0aGlzLmNvbmZpZy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEF1ZGlvSGVscGVyLCBDT05GSUcsIGZvdW5kcnksIGdhbWUgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xuaW1wb3J0IHsgUm9sbENhcmQgfSBmcm9tICcuL3JvbGwtY2FyZC5qcydcblxuZXhwb3J0IGNsYXNzIENvbWJpbmVkQ2hlY2tDYXJkIGV4dGVuZHMgUm9sbENhcmQge1xuICBzdGF0aWMgYXN5bmMgYmluZExpc3Rlcm5lcnMgKGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLmNvbWJpbmVkIC50b2dnbGUtc3dpdGNoJyxcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcbiAgICApXG4gICAgLy8gaHRtbC5maW5kKCcucm9sbC1jYXJkIGEnKS5jbGljayhhc3luYyAoZXZlbnQpID0+IENvbWJpbmVkQ2hlY2tDYXJkLl9vbkNsaWNrKCBldmVudCkpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQuY29tYmluZWQgYScsXG4gICAgICBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQuY29tYmluZWQgYnV0dG9uJyxcbiAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcbiAgICApXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRDb25maWcsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuaHRtbCcsXG4gICAgICB0eXBlOiAnY29tYmluZWRDYXJkJyxcbiAgICAgIHRpdGxlOiAnQ29DNy5Db21iaW5lZFJvbGxDYXJkJ1xuICAgIH0pXG4gIH1cblxuICBnZXQgY29uZmlnICgpIHtcbiAgICByZXR1cm4gQ29tYmluZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZ1xuICB9XG5cbiAgZ2V0IHN1Y2Nlc3NDb3VudCAoKSB7XG4gICAgaWYgKHRoaXMucm9sbGVkKSB7XG4gICAgICBsZXQgY291bnQgPSAwXG4gICAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgICBpZiAoci5wYXNzZWQpIGNvdW50ICs9IDFcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb3VudFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbWFpbkFjdG9yS2V5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb2xsc1swXT8uYWN0b3I/LmFjdG9yS2V5IHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHN1Y2Nlc3MgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5zdWNjZXNzQ291bnQgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuYW55KSB7XG4gICAgICBpZiAodGhpcy5zdWNjZXNzQ291bnQgPiAwKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmICh0aGlzLmFsbCkge1xuICAgICAgaWYgKHRoaXMuc3VjY2Vzc0NvdW50ID09PSB0aGlzLnJvbGxzLmxlbmd0aCkgcmV0dXJuIHRydWVcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZmFpbHVyZSAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnN1Y2Nlc3MgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuICF0aGlzLnN1Y2Nlc3NcbiAgfVxuXG4gIGdldCBjaGVja0dNSW5pdGlhdG9yICgpIHtcbiAgICByZXR1cm4gZ2FtZS51c2Vycy5nZXQodGhpcy5pbml0aWF0b3IpPy5pc0dNXG4gIH1cblxuICBhc3luYyBnZXRIdG1sUm9sbCAoKSB7XG4gICAgaWYgKCF0aGlzLnJvbGxlZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oe1xuICAgICAgcm9sbDogdGhpcy5fcm9sbFtjaGVjay5kaWNlTW9kaWZpZXIgfHwgMF0sXG4gICAgICBzaWxlbnQ6IHRydWVcbiAgICB9KVxuICAgIHJldHVybiBhd2FpdCBjaGVjay5nZXRIdG1sUm9sbCh7IGhpZGVTdWNjZXNzOiB0cnVlIH0pXG4gIH1cblxuICBwcm9jZXNzIChkYXRhKSB7XG4gICAgc3dpdGNoIChkYXRhLmFjdGlvbikge1xuICAgICAgY2FzZSAnbmV3JzpcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdyb2xsJzpcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd1cGRhdGVSb2xsJzoge1xuICAgICAgICB0aGlzLnVwZGF0ZVJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYXNzaWduUm9sbCc6IHtcbiAgICAgICAgdGhpcy5hc3NpZ25Sb2xsKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICBlbHNlIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgfVxuXG4gIGFzeW5jIGFzc2lnblJvbGwgKGRhdGEpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5yb2xsZWQpIHtcbiAgICAgICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuX3JvbGwgPSBkYXRhLnJvbGxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uXG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJ2xpLmFjdG9yLXJvbGwnKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gYS5jbG9zZXN0KCdkaXYucm9sbC1jYXJkJylcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgQ29tYmluZWRDaGVja0NhcmQuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICBjb25zdCByYW5rID0gTnVtYmVyKGxpPy5kYXRhc2V0Py5yYW5rKVxuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3JlbW92ZS1yb2xsJzoge1xuICAgICAgICBjYXJkLnJlbW92ZVJvbGwocmFuaylcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Nsb3NlLWNhcmQnOiB7XG4gICAgICAgIGNhcmQuY2xvc2VDYXJkKClcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY2FyZCc6IHtcbiAgICAgICAgY29uc3QgcG9vbCA9IHt9XG4gICAgICAgIGZvciAoY29uc3QgZGljZSBvZiBjYXJkLnJvbGxzKSB7XG4gICAgICAgICAgY29uc3QgZGljZU1vZGlmaWVyID0gcGFyc2VJbnQoZGljZS5kaWNlTW9kaWZpZXIsIDEwKVxuICAgICAgICAgIGlmICghaXNOYU4oZGljZU1vZGlmaWVyKSkge1xuICAgICAgICAgICAgcG9vbFtkaWNlTW9kaWZpZXJdID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgQ29DN0RpY2UuY29tYmluZWRSb2xsKHsgcG9vbCB9KVxuICAgICAgICByb2xsLmluaXRpYXRvciA9IGdhbWUudXNlci5pZFxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgYWN0aW9uOiAnYXNzaWduUm9sbCcsXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTSxcbiAgICAgICAgICByb2xsXG4gICAgICAgIH1cbiAgICAgICAgQXVkaW9IZWxwZXIucGxheSh7IHNyYzogQ09ORklHLnNvdW5kcy5kaWNlIH0sIHRydWUpXG4gICAgICAgIGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgdXBkYXRlOiBmYWxzZSxcbiAgICAgICAgICBkYXRhOiBhLmRhdGFzZXQsXG4gICAgICAgICAgY2xhc3NlczogYS5jbGFzc0xpc3QsXG4gICAgICAgICAgdGFyZ2V0OiBhXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKGNhcmQucm9sbHNbcmFua10sIGFjdGlvbiwgb3B0aW9ucylcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICd1cGRhdGVSb2xsJyxcbiAgICAgICAgICByYW5rLFxuICAgICAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR00sXG4gICAgICAgICAgcm9sbDoge1xuICAgICAgICAgICAgaW5pdGlhdG9yOiBnYW1lLnVzZXIuaWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgZGF0YS5yb2xsID0gY2FyZC5yb2xsc1tyYW5rXS5KU09OUm9sbERhdGFcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29tcHV0ZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsKSByZXR1cm5cblxuICAgIHRoaXMucm9sbHMgPSB0aGlzLnJvbGxzLmZpbHRlcihyb2xsID0+IHtcbiAgICAgIHJldHVybiB0eXBlb2Ygcm9sbC5hY3Rvci5kYXRhICE9PSAndW5kZWZpbmVkJyAvLyByZW1vdmUgYW55IGFjdG9ycyB0aGF0IG5vIGxvbmdlciBleGlzdFxuICAgIH0pXG5cbiAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgaWYgKCFyLnJvbGxlZCkge1xuICAgICAgICByLm1vZGlmaWVyID0gci5kaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgICByLmRpZmZpY3VsdHkgPSByLmRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgIHIuZmxhdERpY2VNb2RpZmllciA9IHIuZmxhdERpY2VNb2RpZmllciB8fCAwXG4gICAgICAgIHIuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gci5mbGF0VGhyZXNob2xkTW9kaWZpZXIgfHwgMFxuICAgICAgICBhd2FpdCByLl9wZXJmb3JtKHsgcm9sbDogdGhpcy5fcm9sbFtyLm1vZGlmaWVyXSwgc2lsZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMucm9sbHNbaV0ucm9sbGVkKSB7XG4gICAgICAgIHRoaXMucm9sbHNbaV0uX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsc1tpXS5nZXRIdG1sUm9sbCh7XG4gICAgICAgICAgaGlkZURpY2VSZXN1bHQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMuZ2V0SHRtbFJvbGwoKVxuICB9XG5cbiAgY2xvc2VDYXJkICgpIHtcbiAgICB0aGlzLmNsb3NlZCA9IHRydWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBGb3JtRGF0YUV4dGVuZGVkLCBmb3VuZHJ5LCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIEludGVyYWN0aXZlQ2hhdENhcmQge1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnNcbiAgfVxuXG4gIGdldCBvcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRPcHRpb25zLCB0aGlzLl9vcHRpb25zKVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRlbXBsYXRlXG4gIH1cblxuICBnZXQgY3NzQ2xhc3NlcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc2VzXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKG9wdGlvbm5hbENoYXREYXRhID0ge30pIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpWzBdXG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3MgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcbiAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzZXMpXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoXG4gICAgICB7XG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUodGhpcy5vcHRpb25zLnRpdGxlKSxcbiAgICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgICAgfSxcbiAgICAgIG9wdGlvbm5hbENoYXREYXRhXG4gICAgKVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAob3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKG9wdGlvbnMuY29tcHV0ZSkgdGhpcy5jb21wdXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuICAgICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5jc3NDbGFzc2VzKVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2UuXG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgICAgaWYgKHRoaXMuY2xvc2VkKSBhd2FpdCBjaGF0TWVzc2FnZS5zZXRGbGFnKCdDb0M3JywgJ3N0YXRlJywgJ3Jlc29sdmVkJylcblxuICAgICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgICAgfSlcbiAgICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgICAgcmV0dXJuIG1zZ1xuICAgIH1cbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmludGVyYWN0aXZlLWNhcmQgLmljLXJhZGlvLXN3aXRjaCcsXG4gICAgICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5pbnRlcmFjdGl2ZS1jYXJkIC5pYy1zd2l0Y2gnLCB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5pbnRlcmFjdGl2ZS1jYXJkIC5zdWJtaXQnLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2ZvY3Vzb3V0JywgJ2lucHV0JywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCBidXR0b24nLCB0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2tleWRvd24nLCAnZm9ybScsIHRoaXMuX29uS2V5LmJpbmQodGhpcykpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgYmluZExpc3RlbmVycyAoaHRtbCkge1xuICAgIGNvbnN0IGh0bWxNZXNzYWdlRWxlbWVudCA9IGh0bWxbMF1cbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSBodG1sTWVzc2FnZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtY2FyZCcpXG4gICAgaWYgKCFodG1sQ2FyZEVsZW1lbnQpIHJldHVyblxuICAgIGlmICghaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzKSByZXR1cm5cbiAgICBpZiAoXG4gICAgICAhT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZ2FtZS5Db0M3LmNhcmRzKS5pbmNsdWRlcyhcbiAgICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzXG4gICAgICApXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IEludGVyYWN0aXZlQ2hhdENhcmQuZnJvbUhUTUxDYXJkRWxlbWVudChodG1sQ2FyZEVsZW1lbnQpXG4gICAgY29uc3QgdHlwZWRDYXJkID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIG5ldyBnYW1lLkNvQzcuY2FyZHNbaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzXSgpLFxuICAgICAgY2FyZFxuICAgIClcbiAgICB0eXBlZENhcmQuYXNzaWduT2JqZWN0KClcbiAgICB0eXBlZENhcmQuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0byByZWFzc2lnbiBvYmplY3QgdHlwZVxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXNzaWduT2JqZWN0ICgpIHt9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnQgd2lsbCBjaGVjayBmb3IgYW4gYWN0aW9uIChkYXRhLWFjdGlvbilcbiAgICogaWYgYSBtZXRob2Qgd2l0aCB0aGF0IG5hbWUgZXhpc3QgaXQgd2lsbCBiZSB0cmlnZ2VyZWQuXG4gICAqL1xuICBfb25CdXR0b24gKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIC8vIGJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnIC8vQXZvaWQgbXVsdGlwbGUgcHVzaFxuICAgIGNvbnN0IGFjdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmFjdGlvblxuICAgIGlmICh0aGlzW2FjdGlvbl0pIHRoaXNbYWN0aW9uXSh7IGV2ZW50LCB1cGRhdGU6IHRydWUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50XG4gICAqIEByZXR1cm5zIGZhbHNlIGlmIGtleSBpcyBlbnRlciB0byBhdm9pZCBnbG9iYWwgc3VibWlzc2lvblxuICAgKi9cbiAgX29uS2V5IChldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICAgIHJldHVybiBldmVudC5rZXkgIT09ICdFbnRlcidcbiAgfVxuXG4gIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KCcuaW50ZXJhY3RpdmUtY2FyZCcpXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCB1cGRhdGVzID0gdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgaWYgKHVwZGF0ZXMpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgX3VwZGF0ZSAoY2FyZCkge1xuICAgIGNvbnN0IGZvcm1zID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtJylcbiAgICBsZXQgdXBkYXRlcyA9IGZhbHNlXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZm9ybSA9IGZvcm1zW2ldXG4gICAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKGZvcm0pXG4gICAgICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KClcbiAgICAgIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmRpZmZPYmplY3QodGhpcywgZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZGF0YSkpXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZVxuICAgICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlc1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xhc3NlczogWydpbnRlcmFjdGl2ZS1jYXJkJ10sXG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZGF0YVN0cmluZylcbiAgfVxuXG4gIGdldCBkYXRhU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leGNsdWRlPy5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5vcHRpb25zLmV4Y2x1ZGVTdGFydFdpdGgpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZSAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICBpZiAoIWNhcmREYXRhLm1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgICAgY2FyZERhdGEubWVzc2FnZUlkID0gbWVzc2FnZT8uZGF0YXNldD8ubWVzc2FnZUlkXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKGNhcmREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21EYXRhIChkYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IE9iamVjdC5hc3NpZ24obmV3IHRoaXMoKSwgZGF0YSlcbiAgICBhd2FpdCBjYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKCdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gdGhpcy5fb25CdXR0b24oZXZlbnQpXG4gICAgaWYgKFxuICAgICAgdGFyZ2V0ICYmXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmXG4gICAgICAhZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBmbGFnID0gdGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGlmICghZmxhZykgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmNsb3Nlc3QoJy5pYy1yYWRpbycpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIHRoaXMudG9nZ2xlRmxhZyhmbGFnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pYy1yYWRpby1zd2l0Y2gnKVxuICAgICAgZm9yIChjb25zdCBiIG9mIGJ1dHRvbnMpIHtcbiAgICAgICAgdGhpcy51bnNldEZsYWcoYi5kYXRhc2V0LmZsYWcpXG4gICAgICB9XG4gICAgICB0aGlzLnNldEZsYWcoZmxhZylcbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KCcuaW50ZXJhY3RpdmUtY2FyZCcpXG4gICAgaWYgKGNhcmQpIHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbE1vZGUpIHJldHVybiBudWxsXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5hY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuaXRlbUlkKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRlZFRva2VucyAoKSB7XG4gICAgcmV0dXJuIFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSByZXR1cm4gdGhpcy50YXJnZXRUb2tlblxuICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgaXNUYXJnZXRPd25lciAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0LmlzT3duZXJcbiAgfVxuXG4gIGdldCBpc0tlZXBlciAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gIH1cblxuICAvKipcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgKi9cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICBpZiAodGhpcy5fdGFyZ2V0S2V5KSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSB0aGlzLnRhcmdldGVkVG9rZW5zLnBvcCgpXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VG9rZW5cbiAgfVxuXG4gIGdldCB0YXJnZXRBY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0QWN0b3IgPVxuICAgICAgICAgIHRoaXMudGFyZ2V0VG9rZW4uYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuZG9jdW1lbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgdGFyZ2V0S2V5ICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEtleVxuICB9XG5cbiAgZ2V0IGhhc1RhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc2V0IHRhcmdldEtleSAoeCkge1xuICAgIHRoaXMuX3RhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLmdldFdlYXBvblNraWxscyh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB0YXJnZXRJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMudGFyZ2V0S2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gIH1cblxuICBnZXQgdGFyZ2V0TmFtZSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldCkgcmV0dXJuICdkdW1teSdcbiAgICByZXR1cm4gdGhpcy50YXJnZXQubmFtZVxuICB9XG5cbiAgZ2V0IGFjdG9ySW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBEaWFsb2csIGZvdW5kcnksIGdhbWUsIFJvbGwsIHVpICovXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBJbnRlcmFjdGl2ZUNoYXRDYXJkIH0gZnJvbSAnLi4vaW50ZXJhY3RpdmUtY2hhdC1jYXJkLmpzJ1xuaW1wb3J0IHsgY3JlYXRlSW5saW5lUm9sbCB9IGZyb20gJy4uL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIERhbWFnZUNhcmQgZXh0ZW5kcyBJbnRlcmFjdGl2ZUNoYXRDYXJkIHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSA1ZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGV4Y2x1ZGU6IFtcbiAgICAgICAgJ190YXJnZXRUb2tlbicsXG4gICAgICAgICdfdGFyZ2V0QWN0b3InLFxuICAgICAgICAnX2h0bWxSb2xsJyxcbiAgICAgICAgJ19odG1sSW5saW5lUm9sbCdcbiAgICAgIF0uY29uY2F0KHN1cGVyLmRlZmF1bHRPcHRpb25zLmV4Y2x1ZGUpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvZGFtYWdlLmh0bWwnXG4gICAgfSlcbiAgfVxuXG4gIC8vIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gIC8vICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgLy8gfVxuXG4gIGFzeW5jIGFzc2lnbk9iamVjdCAoKSB7XG4gICAgaWYgKHRoaXMuZGFtYWdlUm9sbCAmJiB0aGlzLmRhbWFnZVJvbGwuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHRoaXMuZGFtYWdlUm9sbCA9IFJvbGwuZnJvbURhdGEodGhpcy5kYW1hZ2VSb2xsKVxuICAgIH1cbiAgfVxuXG4gIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBzdXBlci5fb25CdXR0b24oZXZlbnQpXG4gIH1cblxuICBnZXQgY3JpdGljYWwgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY3JpdGljYWxcbiAgfVxuXG4gIHNldCBjcml0aWNhbCAoeCkge1xuICAgIHRoaXMuX29wdGlvbnMuY3JpdGljYWwgPSB4XG4gIH1cblxuICBnZXQgaW1wYWxlICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2ltcGFsZSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLndlYXBvbi5pbXBhbGVcbiAgICByZXR1cm4gdGhpcy5faW1wYWxlXG4gIH1cblxuICBzZXQgaW1wYWxlICh4KSB7XG4gICAgdGhpcy5faW1wYWxlID0geFxuICB9XG5cbiAgZ2V0IGlzRGFtYWdlRm9ybXVsYSAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhbWFnZUZvcm11bGEgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhbWFnZUZvcm11bGEpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUodGhpcy5kYW1hZ2VGb3JtdWxhKVxuICB9XG5cbiAgZ2V0IGlzRGFtYWdlTnVtYmVyICgpIHtcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLmRhbWFnZUZvcm11bGEpKVxuICB9XG5cbiAgZ2V0IGlzQXJtb3JGb3J1bGEgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5hcm1vciAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUodGhpcy5hcm1vcilcbiAgfVxuXG4gIGdldCB0b3RhbERhbWFnZVN0cmluZyAoKSB7XG4gICAgbGV0IGRhbWFnZSA9IE51bWJlcihcbiAgICAgIHRoaXMuaXNEYW1hZ2VOdW1iZXIgPyB0aGlzLmRhbWFnZUZvcm11bGEgOiB0aGlzLnJvbGwudG90YWxcbiAgICApXG4gICAgaWYgKCF0aGlzLmlnbm9yZUFybW9yKSB7XG4gICAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSB8fCBOdW1iZXIodGhpcy5hcm1vcikgPiAwKSB7XG4gICAgICAgIGRhbWFnZSA9IGRhbWFnZSAtIE51bWJlcih0aGlzLmFybW9yKVxuICAgICAgfVxuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5hcm1vcikpKSB7XG4gICAgICAgIGlmIChkYW1hZ2UgPD0gMCkge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXJtb3JBYnNvcmJzRGFtYWdlJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGFtYWdlXG4gIH1cblxuICBnZXQgbm9EYW1hZ2UgKCkge1xuICAgIGlmICh0aGlzLnJvbGxlZCkge1xuICAgICAgY29uc3QgZGFtYWdlID0gdGhpcy5pc0RhbWFnZU51bWJlciA/IHRoaXMuZGFtYWdlRm9ybXVsYSA6IHRoaXMucm9sbC50b3RhbFxuICAgICAgaWYgKCF0aGlzLmlnbm9yZUFybW9yKSB7XG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkge1xuICAgICAgICAgIHJldHVybiAhIShkYW1hZ2UgLSBOdW1iZXIodGhpcy5hcm1vcikgPD0gMClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAhIShkYW1hZ2UgPD0gMClcbiAgICAgIH1cbiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5mYXN0Rm9yd2FyZCAmJiAhdGhpcy5yb2xsICYmICF0aGlzLmlzRGFtYWdlTnVtYmVyKSB7XG4gICAgICBhd2FpdCB0aGlzLnJvbGxEYW1hZ2UoeyB1cGRhdGU6IGZhbHNlIH0pXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNEYW1hZ2VOdW1iZXIgfHxcbiAgICAgICh0aGlzLnJvbGwgJiYgdGhpcy5yb2xsLnRvdGFsICE9IG51bGwpIHx8XG4gICAgICB0aGlzLmhhcmRyb2xsZWRcbiAgICApIHtcbiAgICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGxlZCA9IGZhbHNlXG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuZmFzdEZvcndhcmQgJiYgIXRoaXMuZGFtYWdlSW5mbGljdGVkICYmICF0aGlzLm5vRGFtYWdlKSB7XG4gICAgICBhd2FpdCB0aGlzLmRlYWxEYW1hZ2UoeyB1cGRhdGU6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgaWYgKHRoaXMucm9sbGVkICYmIHRoaXMucm9sbCkge1xuICAgICAgaWYgKHRoaXMucm9sbC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgICB0aGlzLnJvbGwgPSBSb2xsLmZyb21EYXRhKHRoaXMucm9sbClcbiAgICAgIH1cbiAgICAgIGNvbnN0IGEgPSBjcmVhdGVJbmxpbmVSb2xsKHRoaXMucm9sbClcbiAgICAgIHRoaXMuX2h0bWxJbmxpbmVSb2xsID0gYS5vdXRlckhUTUxcbiAgICAgIHRoaXMuX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsLnJlbmRlcigpXG4gICAgfVxuICAgIGF3YWl0IHN1cGVyLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxEYW1hZ2UgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgdGhpcy5yb2xsID0gYXdhaXQgbmV3IFJvbGwodGhpcy5kYW1hZ2VGb3JtdWxhIHx8ICcwJykuZXZhbHVhdGUoe1xuICAgICAgYXN5bmM6IHRydWVcbiAgICB9KVxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMucm9sbClcbiAgICB0aGlzLmhhcmRyb2xsZWQgPSB0cnVlXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyByb2xsQXJtb3IgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IG5ldyBSb2xsKHRoaXMuYXJtb3IpLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICB0aGlzLmFybW9yID0gcm9sbC50b3RhbFxuICAgIG9wdGlvbnMudXBkYXRlID1cbiAgICAgIHR5cGVvZiBvcHRpb25zLnVwZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy51cGRhdGVcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZVRvU2VsZWN0ZWRUYXJnZXQgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgaWYgKHRoaXMuaXNBcm1vckZvcnVsYSkgYXdhaXQgdGhpcy5yb2xsQXJtb3IoKVxuICAgIGlmIChpc05hTihOdW1iZXIodGhpcy50b3RhbERhbWFnZVN0cmluZykpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckV2YWx1YXRpbmdEYW1hZ2UnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCB0YXJnZXRzID0gW11cbiAgICBjb25zdCB0YXJnZXROYW1lID0gW11cbiAgICBjb25zdCBzZWxlY3RlZFBsYXllcnMgPSBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubWFwKHRva2VuID0+IHtcbiAgICAgIHJldHVybiB0b2tlbi5hY3RvclxuICAgIH0pXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNlbGVjdGVkUGxheWVycy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yLmlkID09PSBzZWxlY3RlZFBsYXllcnNbaW5kZXhdLmlkKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICB0YXJnZXROYW1lLnB1c2goc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XS5uYW1lKVxuICAgICAgdGFyZ2V0cy5wdXNoKHNlbGVjdGVkUGxheWVyc1tpbmRleF0pXG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0aXRsZTogJyAnLFxuICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZWFsRGFtYWdlJywge1xuICAgICAgICBkYW1hZ2U6IHRoaXMudG90YWxEYW1hZ2VTdHJpbmcsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0TmFtZVxuICAgICAgfSksXG4gICAgICBidXR0b25zOiB7XG4gICAgICAgIG9uZToge1xuICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHJvY2VlZCcpLFxuICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpcm1EYW1hZ2UodGFyZ2V0cylcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHR3bzoge1xuICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2FuY2VsJyksXG4gICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHt9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWZhdWx0OiAndHdvJ1xuICAgIH1cbiAgICBpZiAodGFyZ2V0TmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICBuZXcgRGlhbG9nKGRhdGEpLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbmZpcm1EYW1hZ2UgKHRhcmdldHMpIHtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGFyZ2V0cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGF3YWl0IHRhcmdldHNbaW5kZXhdLmRlYWxEYW1hZ2UoTnVtYmVyKHRoaXMudG90YWxEYW1hZ2VTdHJpbmcpLCB7XG4gICAgICAgIGlnbm9yZUFybW9yOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGFtYWdlRGVhbFRvJywge1xuICAgICAgICAgIG5hbWU6IHRhcmdldHNbaW5kZXhdLm5hbWUsXG4gICAgICAgICAgZGFtYWdlOiB0aGlzLnRvdGFsRGFtYWdlU3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2UgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgaWYgKHRoaXMuaXNBcm1vckZvcnVsYSkgYXdhaXQgdGhpcy5yb2xsQXJtb3IoKVxuICAgIGxldCBkYW1hZ2UgPSB0aGlzLnRvdGFsRGFtYWdlU3RyaW5nXG4gICAgaWYgKGlzTmFOKE51bWJlcihkYW1hZ2UpKSkge1xuICAgICAgaWYgKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Bcm1vckFic29yYnNEYW1hZ2UnKSA9PT0gZGFtYWdlKSB7XG4gICAgICAgIGRhbWFnZSA9IDBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0Vycm9yIGV2YWx1YXRpbmcgZGFtYWdlJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRhcmdldEFjdG9yKSB7XG4gICAgICBhd2FpdCB0aGlzLnRhcmdldEFjdG9yLmRlYWxEYW1hZ2UoTnVtYmVyKGRhbWFnZSksIHtcbiAgICAgICAgaWdub3JlQXJtb3I6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuZGFtYWdlSW5mbGljdGVkID0gdHJ1ZVxuICAgIG9wdGlvbnMudXBkYXRlID1cbiAgICAgIHR5cGVvZiBvcHRpb25zLnVwZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy51cGRhdGVcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgZ2V0IHJhbmdlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnJhbmdlIHx8ICdub3JtYWwnXG4gIH1cblxuICBzZXQgcmFuZ2UgKHgpIHtcbiAgICBjb25zdCByYW5nZXMgPSBbJ25vcm1hbCcsICdsb25nJywgJ2V4dHJlbWUnXVxuICAgIGlmICghcmFuZ2VzLmluY2x1ZXMoeC50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuXG4gICAgdGhpcy5fb3B0aW9ucy5yYW5nZSA9IHhcbiAgfVxuXG4gIGdldCBkYW1hZ2VGb3JtdWxhICgpIHtcbiAgICBjb25zdCByYW5nZSA9IHRoaXMucmFuZ2VcbiAgICBsZXQgZm9ybXVsYSA9IHRoaXMud2VhcG9uPy5zeXN0ZW0/LnJhbmdlW3JhbmdlXT8uZGFtYWdlXG4gICAgbGV0IGRiID0gdGhpcy5hY3Rvci5kYlxuICAgIGRiID0gKChkYiA/PyAnJykudG9TdHJpbmcoKS50cmltKCkgPT09ICcnID8gMCA6IGRiKS50b1N0cmluZygpLnRyaW0oKVxuXG4gICAgaWYgKCFkYi5zdGFydHNXaXRoKCctJykpIGRiID0gJysnICsgZGJcbiAgICBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYWRkYikgZm9ybXVsYSA9IGZvcm11bGEgKyBkYlxuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5haGRiKSBmb3JtdWxhID0gZm9ybXVsYSArICcrIGZsb29yKCcgKyBkYiArICcvMiknXG5cbiAgICBpZiAoZm9ybXVsYSkge1xuICAgICAgY29uc3QgbWF4RGFtYWdlID0gbmV3IFJvbGwoZm9ybXVsYSkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgbGV0IHJvbGxTdHJpbmdcbiAgICAgIGlmICh0aGlzLmNyaXRpY2FsKSB7XG4gICAgICAgIGlmICh0aGlzLmltcGFsZSkge1xuICAgICAgICAgIHJvbGxTdHJpbmcgPSBmb3JtdWxhICsgJysnICsgbWF4RGFtYWdlXG4gICAgICAgICAgcmV0dXJuIHJvbGxTdHJpbmdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4RGFtYWdlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmb3JtdWxhXG4gICAgICB9XG4gICAgfSBlbHNlIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBhcm1vciAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gdGhpcy5fYXJtb3IgJiYgdGhpcy5fYXJtb3IgIT09ICcnKSByZXR1cm4gdGhpcy5fYXJtb3JcbiAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzZXQgYXJtb3IgKHgpIHtcbiAgICB0aGlzLl9hcm1vciA9IHhcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBmb3VuZHJ5LCBnYW1lICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IERhbWFnZUNhcmQgfSBmcm9tICcuL2RhbWFnZS5qcydcbmltcG9ydCB7IFJvbGxDYXJkIH0gZnJvbSAnLi9yb2xsLWNhcmQuanMnXG5cbmV4cG9ydCBjbGFzcyBPcHBvc2VkQ2hlY2tDYXJkIGV4dGVuZHMgUm9sbENhcmQge1xuICBzdGF0aWMgYXN5bmMgYmluZExpc3Rlcm5lcnMgKGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgLnRvZ2dsZS1zd2l0Y2gnLFxuICAgICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIClcbiAgICAvLyBzdXBlci5iaW5kTGlzdGVybmVycyggaHRtbCk7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5vcHBvc2VkIGEnLFxuICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQub3Bwb3NlZCBidXR0b24nLFxuICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0Q29uZmlnICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0Q29uZmlnLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuaHRtbCcsXG4gICAgICB0eXBlOiAnb3Bwb3NlZENhcmQnXG4gICAgfSlcbiAgfVxuXG4gIGdldCBjb25maWcgKCkge1xuICAgIHJldHVybiBPcHBvc2VkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWdcbiAgfVxuXG4gIGdldCBhdHRhY2tlclJvbGwgKCkge1xuICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgaWYgKHRoaXMucm9sbHM/Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBhdHRhY2tlciA9IHRoaXMucm9sbHMuZmlsdGVyKHIgPT4gci5pbmRleCA9PT0gMCB8fCByLmF0dGFja2VyKVxuICAgICAgICBpZiAoYXR0YWNrZXIubGVuZ3RoKSByZXR1cm4gYXR0YWNrZXJbMF1cbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRlZmVuZGVyUm9sbCAoKSB7XG4gICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICBpZiAodGhpcy5yb2xscz8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGRlZmVuZGVyID0gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLmluZGV4ICE9PSAwIHx8ICFyLmF0dGFja2VyKVxuICAgICAgICBpZiAoZGVmZW5kZXIubGVuZ3RoKSByZXR1cm4gZGVmZW5kZXJbMF1cbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRlZmVuZGVySXNEb2RnaW5nICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmRlZmVuZGVyUm9sbD8uYWN0b3I/LmRvZGdlU2tpbGw/Lm5hbWUgJiZcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsPy5za2lsbD8ubmFtZVxuICAgICkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IuZG9kZ2VTa2lsbC5uYW1lLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgIHRoaXMuZGVmZW5kZXJSb2xsLnNraWxsLm5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBhZHZhbnRhZ2VBdHRhY2tlciAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9hYSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLmRlZmVuZGVyUm9sbCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZGVmZW5kZXJJc0RvZGdpbmdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWFcbiAgfVxuXG4gIGdldCB3aW5uZXJSb2xsc0RhbWFnZSAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5jb21iYXQgJiZcbiAgICAgIHRoaXMucm9sbHMubGVuZ3RoID49IDIgJiZcbiAgICAgIHRoaXMuaGFzV2lubmVyICYmXG4gICAgICB0aGlzLndpbm5lcj8uaXRlbT8udHlwZSA9PT0gJ3dlYXBvbidcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc2V0IGFkdmFudGFnZUF0dGFja2VyICh4KSB7XG4gICAgdGhpcy5fYWEgPSB0cnVlXG4gICAgdGhpcy5fYWQgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGFkdmFudGFnZURlZmVuZGVyICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2FkID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXMuZGVmZW5kZXJJc0RvZGdpbmdcbiAgICByZXR1cm4gdGhpcy5fYWRcbiAgfVxuXG4gIHNldCBhZHZhbnRhZ2VEZWZlbmRlciAoeCkge1xuICAgIHRoaXMuX2FkID0gdHJ1ZVxuICAgIHRoaXMuX2FhID0gZmFsc2VcbiAgfVxuXG4gIGdldCBpc1RpZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMud2lubmVyQ291bnQgPiAxXG4gIH1cblxuICBnZXQgbmVlZHNUaWVCcmVha2VyICgpIHtcbiAgICBpZiAoIXRoaXMuY29tYmF0KSByZXR1cm4gZmFsc2VcbiAgICBpZiAoXG4gICAgICB0aGlzLmF0dGFja2VyUm9sbCAmJlxuICAgICAgdGhpcy5kZWZlbmRlclJvbGwgJiZcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsLnN1Y2Nlc3NMZXZlbCA9PT0gdGhpcy5kZWZlbmRlclJvbGwuc3VjY2Vzc0xldmVsXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCB3aW5uZXJDb3VudCAoKSB7XG4gICAgbGV0IGNvdW50ID0gMFxuICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICBpZiAoci53aW5uZXIpIGNvdW50ICs9IDFcbiAgICB9XG4gICAgcmV0dXJuIGNvdW50XG4gIH1cblxuICBnZXQgaXNBdHRhY2tNYW5ldXZlciAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5jb21iYXQgJiZcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsICYmXG4gICAgICAoIXRoaXMuYXR0YWNrZXJSb2xsPy5pdGVtIHx8XG4gICAgICAgIHRoaXMuYXR0YWNrZXJSb2xsPy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5tbnZyKVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgcmVzdWx0VGV4dCAoKSB7XG4gICAgaWYgKHRoaXMuY29tYmF0ICYmIHRoaXMuYXR0YWNrZXJSb2xsICYmIHRoaXMuZGVmZW5kZXJSb2xsKSB7XG4gICAgICBpZiAoIXRoaXMuYXR0YWNrZXJSb2xsLndpbm5lciAmJiAhdGhpcy5kZWZlbmRlclJvbGwud2lubmVyKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0YWNrZXJSb2xsLndpbm5lcikge1xuICAgICAgICBpZiAodGhpcy5hdHRhY2tlclJvbGwubWFuZXV2ZXIpIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmF0dGFja2VyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BdHRhY2tTdWNjZXNzJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuYXR0YWNrZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmRlZmVuZGVyUm9sbC53aW5uZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuZGVmZW5kZXJSb2xsLm1hbmV1dmVyKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWFuZXV2ZXJTdWNjZXNzJywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGVmZW5kZXJJc0RvZGdpbmcpIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Eb2RnZVN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BdHRhY2tTdWNjZXNzJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgYXN5bmMgcHJvY2VzcyAoZGF0YSkge1xuICAgIHN3aXRjaCAoZGF0YS5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ25ldyc6XG4gICAgICAgIGlmICghdGhpcy5yb2xscz8ubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5jb21iYXQgPSBkYXRhLmNvbWJhdCB8fCB1bmRlZmluZWRcbiAgICAgICAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgICAgICAgIGRhdGEucm9sbC5hdHRhY2tlciA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5yb2xsLmluZGV4ID0gdGhpcy5yb2xscy5sZW5ndGhcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdyb2xsJzpcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd1cGRhdGVSb2xsJzpcbiAgICAgICAgdGhpcy51cGRhdGVSb2xsKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICBlbHNlIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgfVxuXG4gIGFzeW5jIHJvbGwgKHJhbmspIHtcbiAgICBhd2FpdCB0aGlzLnJvbGxzW3JhbmtdLl9wZXJmb3JtKClcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdHlwZTogdGhpcy5jb25maWcudHlwZSxcbiAgICAgIGFjdGlvbjogJ3VwZGF0ZVJvbGwnLFxuICAgICAgcmFuayxcbiAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR01cbiAgICB9XG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgZGF0YS5yb2xsID0gdGhpcy5yb2xsc1tyYW5rXS5KU09OUm9sbERhdGFcbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgYWN0aW9uID0gYS5kYXRhc2V0LmFjdGlvblxuICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KCdsaS5hY3Rvci1yb2xsJylcbiAgICBjb25zdCBtZXNzYWdlID0gYS5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJylcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGEuY2xvc2VzdCgnZGl2LnJvbGwtY2FyZCcpXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IE9wcG9zZWRDaGVja0NhcmQuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICBjb25zdCByYW5rID0gTnVtYmVyKGxpPy5kYXRhc2V0Py5yYW5rKVxuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3RvZ2dsZS1jb21iYXQnOiB7XG4gICAgICAgIGNhcmQuY29tYmF0ID0gIWNhcmQuY29tYmF0XG4gICAgICAgIC8vIGlmKCAhY2FyZC5hZHZhbnRhZ2VBdHRhY2tlciAmJiAhY2FyZC5hZHZhbnRhZ2VEZWZlbmRlcikgY2FyZC5hZHZhbnRhZ2VBdHRhY2tlciA9IHRydWU7XG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZW1vdmUtcm9sbCc6IHtcbiAgICAgICAgY2FyZC5yZW1vdmVSb2xsKHJhbmspXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdjbG9zZS1jYXJkJzoge1xuICAgICAgICBjYXJkLmNsb3NlQ2FyZCgpXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgICAgIGlmICghY2FyZC5yb2xsc1tyYW5rXS5hY3RvcktleSkge1xuICAgICAgICAgIGNhcmQucm9sbHNbcmFua10uYWN0b3JLZXkgPSBgJHtzcGVha2VyLnNjZW5lfS4ke3NwZWFrZXIudG9rZW59YFxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGNhcmQucm9sbChyYW5rKVxuICAgICAgICBhd2FpdCBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1kYW1hZ2UnOiB7XG4gICAgICAgIGNhcmQuY2xvc2VDYXJkKClcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xuICAgICAgICAgIGNyaXRpY2FsOiBjYXJkLndpbm5lci5pc0V4dHJlbWVTdWNjZXNzLFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICB9KVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5hY3RvcktleSA9IGNhcmQud2lubmVyLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnRhcmdldEtleSA9IGNhcmQubG9vc2VyLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGNhcmQud2lubmVyLml0ZW1JZFxuICAgICAgICAvLyBpZiggb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkgZGFtYWdlQ2hhdENhcmQubWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZDtcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgdXBkYXRlOiBmYWxzZSxcbiAgICAgICAgICBkYXRhOiBhLmRhdGFzZXQsXG4gICAgICAgICAgY2xhc3NlczogYS5jbGFzc0xpc3QsXG4gICAgICAgICAgdGFyZ2V0OiBhXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKGNhcmQucm9sbHNbcmFua10sIGFjdGlvbiwgb3B0aW9ucylcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICd1cGRhdGVSb2xsJyxcbiAgICAgICAgICByYW5rLFxuICAgICAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR01cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSBjYXJkLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgICAgICBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBjb21wdXRlIChyYW5rID0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5yb2xscyA9IHRoaXMucm9sbHMuZmlsdGVyKHJvbGwgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiByb2xsLmFjdG9yLmFjdG9yS2V5ICE9PSAndW5kZWZpbmVkJyAvLyByZW1vdmUgYW55IGFjdG9ycyB0aGF0IG5vIGxvbmdlciBleGlzdFxuICAgIH0pXG5cbiAgICBpZiAoIXJhbmspIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBkZWxldGUgdGhpcy5yb2xsc1tpXS5tYW5ldXZlclxuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5jb21iYXQgJiZcbiAgICAgICAgICAoIXRoaXMucm9sbHNbaV0uaXRlbSB8fFxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5tbnZyKSAmJlxuICAgICAgICAgICgodGhpcy5yb2xsc1tpXT8uYWN0b3I/LmRvZGdlU2tpbGw/Lm5hbWUgJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0/LnNraWxsPy5uYW1lICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldLmFjdG9yLmRvZGdlU2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpICE9PVxuICAgICAgICAgICAgICB0aGlzLnJvbGxzW2ldLnNraWxsLm5hbWUudG9Mb3dlckNhc2UoKSkgfHxcbiAgICAgICAgICAgICF0aGlzLnJvbGxzW2ldPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5yb2xsc1tpXS5tYW5ldXZlciA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5yb2xsc1tpXS5yb2xsZWQpIHtcbiAgICAgICAgICB0aGlzLnJvbGxzW2ldLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbaV0uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgICAgaGlkZURpY2VSZXN1bHQ6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzW3JhbmtdLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxzW3JhbmtdLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMucm9sbHNbcmFua10uZ2V0SHRtbFJvbGwoe1xuICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICAvLyBTb3J0IGNvbWJhdCByb2xscyBieSBpbmRleC5cbiAgICAgIHRoaXMucm9sbHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYS5pbmRleCA+IGIuaW5kZXgpIHJldHVybiAxXG4gICAgICAgIGlmIChhLmluZGV4IDwgYi5pbmRleCkgcmV0dXJuIC0xXG4gICAgICAgIHJldHVybiAwXG4gICAgICB9KVxuXG4gICAgICAvLyBDb21iYXQgcm9sbCBpbmNsdWRlcyBvbmx5IDIgcGVyc29ucywgcmVtb3ZlIHRoZSByZXN0LlxuICAgICAgaWYgKHRoaXMucm9sbHMubGVuZ3RoID4gMSkge1xuICAgICAgICB0aGlzLnJvbGxzID0gW3RoaXMucm9sbHNbMF0sIHRoaXMucm9sbHNbMV1dXG4gICAgICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICAgICAgZGVsZXRlIHIud2lubmVyXG4gICAgICAgICAgZGVsZXRlIHIudGllXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRmlyc3QgcGVyc29uIGFkZGVkIGlzIHRoZSBhdHRhY2tlci5cbiAgICAgIGlmICh0aGlzLnJvbGxzWzBdKSB0aGlzLnJvbGxzWzBdLmF0dGFja2VyID0gdHJ1ZVxuXG4gICAgICBpZiAodGhpcy5yb2xsc1swXT8ucm9sbGVkICYmIHRoaXMucm9sbHNbMV0/LnJvbGxlZCkge1xuICAgICAgICBpZiAodGhpcy5yb2xsc1swXS5wYXNzZWQgfHwgdGhpcy5yb2xsc1sxXS5wYXNzZWQpIHtcbiAgICAgICAgICBpZiAodGhpcy5yb2xsc1swXS5zdWNjZXNzTGV2ZWwgPiB0aGlzLnJvbGxzWzFdLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgICAgdGhpcy5yb2xsc1swXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJvbGxzWzFdLnN1Y2Nlc3NMZXZlbCA+IHRoaXMucm9sbHNbMF0uc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICB0aGlzLnJvbGxzWzFdLndpbm5lciA9IHRydWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuYWR2YW50YWdlQXR0YWNrZXIpIHRoaXMucm9sbHNbMF0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgICAgZWxzZSB0aGlzLnJvbGxzWzFdLndpbm5lciA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xscy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChhLnJvbGxlZCAmJiAhYi5yb2xsZWQpIHJldHVybiAtMVxuICAgICAgICBpZiAoIWEucm9sbGVkICYmIGIucm9sbGVkKSByZXR1cm4gMVxuICAgICAgICBpZiAoIWEucm9sbGVkICYmICFiLnJvbGxlZCkgcmV0dXJuIDBcbiAgICAgICAgaWYgKGEuc3VjY2Vzc0xldmVsID4gYi5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICB9XG4gICAgICAgIGlmIChhLnN1Y2Nlc3NMZXZlbCA8IGIuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICByZXR1cm4gMVxuICAgICAgICB9XG4gICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvcHBvc2VkUm9sbFRpZUJyZWFrZXInKSkge1xuICAgICAgICAgIGlmIChhLm1vZGlmaWVkUmVzdWx0ID4gYi5tb2RpZmllZFJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYS5tb2RpZmllZFJlc3VsdCA8IGIubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoYS5yYXdWYWx1ZSA+IGIucmF3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGEucmF3VmFsdWUgPCBiLnJhd1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDBcbiAgICAgIH0pXG5cbiAgICAgIHRoaXMud2luQ291bnQgPSAwXG4gICAgICBpZiAodGhpcy5yb2xsc1swXSAmJiB0aGlzLnJvbGxzWzBdLnJvbGxlZCAmJiAhdGhpcy5yb2xsc1swXS5mYWlsZWQpIHtcbiAgICAgICAgdGhpcy53aW5Db3VudCA9IDFcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXSAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5yb2xsZWQgJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbMF0uc3VjY2Vzc0xldmVsID09PSB0aGlzLnJvbGxzW2ldLnN1Y2Nlc3NMZXZlbCAmJlxuICAgICAgICAgICAgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29wcG9zZWRSb2xsVGllQnJlYWtlcicpXG4gICAgICAgICAgICAgID8gdGhpcy5yb2xsc1swXS5tb2RpZmllZFJlc3VsdCA9PT0gdGhpcy5yb2xsc1tpXS5tb2RpZmllZFJlc3VsdFxuICAgICAgICAgICAgICA6IHRoaXMucm9sbHNbMF0ucmF3VmFsdWUgPT09IHRoaXMucm9sbHNbaV0ucmF3VmFsdWUpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLndpbkNvdW50ID0gdGhpcy53aW5Db3VudCArIDFcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMucm9sbHNbaV0ud2lubmVyID0gaSA8IHRoaXMud2luQ291bnRcbiAgICAgICAgdGhpcy5yb2xsc1tpXS50aWUgPSB0aGlzLnJvbGxzW2ldLndpbm5lciAmJiB0aGlzLndpbkNvdW50ID4gMVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNsb3NlQ2FyZCAoKSB7XG4gICAgdGhpcy5jbG9zZWQgPSB0cnVlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSAqL1xuXG5leHBvcnQgY2xhc3MgU2FuRGF0YURpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJzpjaGVja2JveCcpLmNsaWNrKCgpID0+IHRoaXMuX3RvZ2dsZUlucHV0KGh0bWwpKVxuICB9XG5cbiAgX3RvZ2dsZUlucHV0IChodG1sKSB7XG4gICAgaHRtbC5maW5kKCcqW25hbWU9XCJjdXN0b21uYW1lXCJdJykudG9nZ2xlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2FuZGF0YS5odG1sJyxcbiAgICAgIG9wdGlvbnNcbiAgICApXG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXG4gICAgICBjb25zdCBkbGcgPSBuZXcgU2FuRGF0YURpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNhbkRhdGFTZWxlY3Rpb25XaW5kb3dOYW1lZCcsIHtcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbkRhdGFTZWxlY3Rpb25XaW5kb3cnKSwgLy8gVE9ETzogUmVtb3ZlIFNhbkRhdGFTZWxlY3Rpb25XaW5kb3dOYW1lZFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgVmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2FuLWRhdGEtZm9ybScpKVxuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmb3JtRGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6ICdWYWxpZGF0ZScsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIH0gZnJvbSAnLi9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuanMnXG5pbXBvcnQgeyBPcHBvc2VkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IFNhbkRhdGFEaWFsb2cgfSBmcm9tICcuL3NhbmRhdGEtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2NvYzctbGluay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhdE1lc3NhZ2Uge1xuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9BVFRSSUJVVEUgKCkge1xuICAgIHJldHVybiAnUi9BVCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDICgpIHtcbiAgICByZXR1cm4gJ1IvQ0gnXG4gIH1cblxuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9DT01CQVQgKCkge1xuICAgIHJldHVybiAnUi9DTydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX1NLSUxMICgpIHtcbiAgICByZXR1cm4gJ1IvU0snXG4gIH1cblxuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9FTkNPVU5URVIgKCkge1xuICAgIHJldHVybiAnUi9FQydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX0NPTUJJTkVEICgpIHtcbiAgICByZXR1cm4gJ0MvQ08nXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9HUk9VUCAoKSB7XG4gICAgcmV0dXJuICdDL0dSJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfTk9STUFMICgpIHtcbiAgICByZXR1cm4gJ0MvTk8nXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9PUFBPU0VEICgpIHtcbiAgICByZXR1cm4gJ0MvT1AnXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9TQU5fQ0hFQ0sgKCkge1xuICAgIHJldHVybiAnQy9TQydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX05PTkUgKCkge1xuICAgIHJldHVybiAnQy9OTydcbiAgfVxuXG4gIC8vIHN0YXRpYyBnZXQgUk9MTF9UT19DSEFUICgpIHtcbiAgLy8gICByZXR1cm4gJ1IvQ0gnXG4gIC8vIH1cblxuICAvLyBzdGF0aWMgZ2V0IFJPTExfVE9fQ0xJUEJPQVJEICgpIHtcbiAgLy8gICByZXR1cm4gJ1IvQ0wnXG4gIC8vIH1cblxuICBzdGF0aWMgY2FyZFR5cGVzIChjb25maWcpIHtcbiAgICBpZiAoY29uZmlnLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3Qgc2VsZWN0ID0ge1xuICAgICAgW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMXTogJ0NvQzcuUmVndWxhclJvbGxDYXJkJyxcbiAgICAgIFtDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXTogJ0NvQzcuQ29tYmluZWRSb2xsQ2FyZCcsXG4gICAgICBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEXTogJ0NvQzcuT3Bwb3NlZFJvbGxDYXJkJ1xuICAgICAgLy8gW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfR1JPVVBdOiAnQ29DNy5Hcm91cFJvbGxDYXJkJyAtIE5ZSVxuICAgIH1cbiAgICBpZiAoXG4gICAgICBjb25maWcucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFICYmXG4gICAgICBjb25maWcuYXR0cmlidXRlID09PSAnc2FuJ1xuICAgICkge1xuICAgICAgc2VsZWN0W0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLXSA9ICdDb0M3LlNhbml0eUxvc3NFbmNvdW50ZXInXG4gICAgfVxuICAgIHJldHVybiBzZWxlY3RcbiAgfVxuXG4gIHN0YXRpYyBub3JtYWxpemVSZXF1ZXN0IChvcHRpb25zKSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIG9wdGlvbnMuZXZlbnQgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBvcHRpb25zLmFjdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgKHR5cGVvZiBvcHRpb25zLnNraWxsSWQgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIHR5cGVvZiBvcHRpb25zLnNraWxsTmFtZSAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVIpXG4gICAgKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2tpbGxJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuYWN0b3IuaXRlbXMuZ2V0KG9wdGlvbnMuc2tpbGxJZCkpIHtcbiAgICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTFxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLnNraWxsTmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3Qgc2tpbGxJZHMgPSBvcHRpb25zLmFjdG9yLmdldFNraWxsc0J5TmFtZShvcHRpb25zLnNraWxsTmFtZSlcbiAgICAgICAgaWYgKHNraWxsSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBvcHRpb25zLnNraWxsSWQgPSBza2lsbElkc1swXS5pZFxuICAgICAgICAgIG9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgWydsY2snLCAnc2FuJ10uaW5jbHVkZXMob3B0aW9ucy5hdHRyaWJ1dGUpXG4gICAgICApIHtcbiAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1tcbiAgICAgICAgICBvcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgIF0gIT09ICd1bmRlZmluZWQnXG4gICAgICApIHtcbiAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUNcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKFxuICAgICAgdHlwZW9mIG9wdGlvbnMuZXZlbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHR5cGVvZiBvcHRpb25zLnJvbGxUeXBlID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kJywge1xuICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbCcpXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIVtcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9DT01CSU5FRCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9HUk9VUCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcbiAgICAgIF0uaW5jbHVkZXMob3B0aW9ucy5jYXJkVHlwZSlcbiAgICApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9ySW52YWxpZENhcmRUeXBlJylcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAhW1xuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURSxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVJcbiAgICAgIF0uaW5jbHVkZXMob3B0aW9ucy5yb2xsVHlwZSlcbiAgICApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9ySW52YWxpZFJvbGxUeXBlJylcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGNhcmRUeXBlOiBvcHRpb25zLmNhcmRUeXBlLFxuICAgICAgICBzaGlmdEtleTogb3B0aW9ucy5mYXN0Rm9yd2FyZCA/PyBvcHRpb25zLmV2ZW50Py5zaGlmdEtleSA/PyBvcHRpb25zLmZhc3RGb3J3YXJkID8/IGZhbHNlLFxuICAgICAgICBhbHRLZXk6IG9wdGlvbnMuZXZlbnQ/LmFsdEtleSA/PyBmYWxzZSxcbiAgICAgICAgaXNDdHJsS2V5OiBpc0N0cmxLZXkob3B0aW9ucy5ldmVudCA/PyBmYWxzZSksXG4gICAgICAgIGNyZWF0ZUVuY291bnRlcjogb3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIgPz8gZmFsc2UsXG4gICAgICAgIG9wZW5MaW5rVG9vbDogb3B0aW9ucy5vcGVuTGlua1Rvb2wgPz8gZmFsc2UsXG4gICAgICAgIHNlbmRUb0NoYXQ6IG9wdGlvbnMuc2VuZFRvQ2hhdCA/PyBmYWxzZSxcbiAgICAgICAgc2VuZFRvQ2xpcGJvYXJkOiBvcHRpb25zLnNlbmRUb0NsaXBib2FyZCA/PyBmYWxzZSxcbiAgICAgICAgaXNDb21iYXQ6XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbGFzc0xpc3Q/LmNvbnRhaW5zKCdjb21iYXQnKSA/PyBmYWxzZSxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IG9wdGlvbnMucHJldmVudFN0YW5kYnkgPz8gZmFsc2UsXG4gICAgICAgIGJvbnVzRGljZTogMFxuICAgICAgfSxcbiAgICAgIGRpYWxvZ09wdGlvbnM6IHtcbiAgICAgICAgcm9sbFR5cGU6IG9wdGlvbnMucm9sbFR5cGUsXG4gICAgICAgIGNhcmRUeXBlOiBvcHRpb25zLmNhcmRUeXBlLFxuICAgICAgICBhdHRyaWJ1dGU6ICcnLFxuICAgICAgICBjaGF0TWVzc2FnZTogb3B0aW9ucy5jaGF0TWVzc2FnZSA/PyB0cnVlLFxuICAgICAgICBmb3JjZWRDYXJkVHlwZTogb3B0aW9ucy5mb3JjZWRDYXJkVHlwZSA/PyBmYWxzZSxcbiAgICAgICAgaGlkZURpZmZpY3VsdHk6IG9wdGlvbnMuaGlkZURpZmZpY3VsdHkgPz8gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgc3dpdGNoIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURTpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVI6XG4gICAgICAgIGNvbmZpZy5vcHRpb25zLnNraWxsSWQgPVxuICAgICAgICAgIG9wdGlvbnMuc2tpbGxJZCA/P1xuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLml0ZW1JZCA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9XG4gICAgICAgICAgb3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA/P1xuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9XG4gICAgICAgICAgb3B0aW9ucy5hdHRyaWJ1dGUgPz9cbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5hdHRyaWJcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuYXR0cmlidXRlID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9ySWQgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQuYWN0b3JJZCA/P1xuICAgICAgICAgIG9wdGlvbnMuYWN0b3IuaWRcbiAgICAgICAgY29uZmlnLm9wdGlvbnMudG9rZW5LZXkgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQudG9rZW5JZCA/P1xuICAgICAgICAgIG9wdGlvbnMuYWN0b3IudG9rZW5LZXlcbiAgICAgICAgY29uZmlnLm9wdGlvbnMud2VhcG9uQWx0U2tpbGwgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbHRlcm5hdGl2LXNraWxsJylcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3IgPSBvcHRpb25zLmFjdG9yXG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCAmJlxuICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmlzQ29tYmF0XG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBjb25maWcub3B0aW9ucy5hY3Rvci5pdGVtcy5nZXQoY29uZmlnLm9wdGlvbnMuaXRlbUlkKVxuICAgICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgICAgICBjb25maWcub3B0aW9ucy53ZWFwb25OYW1lID0gaXRlbS5uYW1lXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgY29uZmlnLm9wdGlvbnMuYWN0b3JJZCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAodHlwZW9mIGNvbmZpZy5vcHRpb25zLnRva2VuS2V5ID09PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgdHlwZW9mIGNvbmZpZy5vcHRpb25zLmFjdG9yID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckFjdG9yJylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCAmJlxuICAgICAgICAgIHR5cGVvZiBjb25maWcub3B0aW9ucy5za2lsbElkID09PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNraWxsJylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PVxuICAgICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUNcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljJylcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAhZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgICAgICAgICFjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW1xuICAgICAgICAgICAgICBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpY1xuICAgICAgICAgICAgXT8udmFsdWVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICFnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICAgICAgIWNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5hdHRyaWJzW2NvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZV1cbiAgICAgICAgICAgICAgPy52YWx1ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVFxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLml0ZW1JZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLldlYXBvbicpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5vcHRpb25zLmFsdEtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmhhc1BsYXllck93bmVyID1cbiAgICAgICAgICBjb25maWcub3B0aW9ucy5hY3Rvci5oYXNQbGF5ZXJPd25lciA/PyBmYWxzZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XG4gICAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICApIHtcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyID1cbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmlzQ3RybEtleVxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0RGljZU1vZGlmaWVyID1cbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmlzQ3RybEtleVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmYWxzZVxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0RGljZU1vZGlmaWVyID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IDBcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eSA9XG4gICAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5ID8/XG4gICAgICAgICAgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbFtcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKVxuICAgICAgICAgIF1cbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdERpY2VNb2RpZmllciA9IDBcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gMFxuICAgICAgICBicmVha1xuICAgIH1cbiAgICByZXR1cm4gY29uZmlnXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdHJpZ2dlciAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY29uZmlnID0gQ29DN0NoYXRNZXNzYWdlLm5vcm1hbGl6ZVJlcXVlc3Qob3B0aW9ucylcbiAgICBpZiAoY29uZmlnID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChcbiAgICAgIChjb25maWcub3B0aW9ucy5pc0N0cmxLZXkpICYmXG4gICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgW1xuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcbiAgICAgIF0uaW5jbHVkZXMoY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUpXG4gICAgKSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UuY3JlYXRlTGluayhjb25maWcpXG4gICAgfSBlbHNlIGlmIChcbiAgICAgIChjb25maWcub3B0aW9ucy5zZW5kVG9DaGF0IHx8IGNvbmZpZy5vcHRpb25zLnNlbmRUb0NsaXBib2FyZCB8fCBjb25maWcub3B0aW9ucy5vcGVuTGlua1Rvb2wgfHwgY29uZmlnLm9wdGlvbnMuY3JlYXRlRW5jb3VudGVyKSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORSA9PT0gY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGVcbiAgICApIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS5jcmVhdGVMaW5rKGNvbmZpZylcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5hY3RvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgYm9udXNEaWNlID0gY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtPy5hdHRyaWJzPy5bY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXT8uYm9udXNEaWNlXG4gICAgICAgICAgaWYgKGJvbnVzRGljZSkge1xuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBib251c0RpY2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGJvbnVzRGljZSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbT8uY2hhcmFjdGVyaXN0aWNzPy5bY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWNdPy5ib251c0RpY2VcbiAgICAgICAgICBpZiAoYm9udXNEaWNlKSB7XG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IGJvbnVzRGljZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuaXRlbUlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGl0ZW1Nb2RpZmllcnMgPSBPYmplY3QudmFsdWVzKGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5za2lsbHMpLmZpbmQoayA9PiBrLmZvdW5kcnlJRCA9PT0gY29uZmlnLm9wdGlvbnMuaXRlbUlkKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbU1vZGlmaWVycy5ib251c0RpY2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IGl0ZW1Nb2RpZmllcnMuYm9udXNEaWNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gTWF0aC5taW4oTWF0aC5tYXgoY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIsIC0yKSwgMilcbiAgICAgIH1cbiAgICAgIGlmICghY29uZmlnLm9wdGlvbnMuc2hpZnRLZXkpIHtcbiAgICAgICAgYXdhaXQgQ29DN0NoYXRNZXNzYWdlLmNyZWF0ZVJvbGwoY29uZmlnKVxuICAgICAgfVxuICAgICAgcmV0dXJuIENvQzdDaGF0TWVzc2FnZS5ydW5Sb2xsKGNvbmZpZylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlTGluayAoY29uZmlnKSB7XG4gICAgc3dpdGNoIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURTpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQzpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVQ6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEw6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgbGlua0RhdGEgPSB7XG4gICAgICAgICAgICB0eXBlOiAnQ29DN0xpbmsnXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCkge1xuICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLXG4gICAgICAgICAgICBsaW5rRGF0YS5saW5rVHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5TS0lMTFxuICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLml0ZW1zLmdldChjb25maWcub3B0aW9ucy5za2lsbElkKT8uc2hvcnROYW1lXG4gICAgICAgICAgICBpZiAoIWxpbmtEYXRhLm5hbWUpIHJldHVyblxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMpIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS1xuICAgICAgICAgICAgbGlua0RhdGEubGlua1R5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hBUkFDVEVSSVNUSUNcbiAgICAgICAgICAgIGxpbmtEYXRhLm5hbWUgPSBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpY1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFKSB7XG4gICAgICAgICAgICBpZiAoKGNvbmZpZy5vcHRpb25zLmFsdEtleSB8fCBjb25maWcub3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIpICYmIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHtcbiAgICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1NcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS1xuICAgICAgICAgICAgICBsaW5rRGF0YS5saW5rVHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5BVFRSSUJVVEVcbiAgICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTVxuICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLndlYXBvbk5hbWVcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUikge1xuICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1NcbiAgICAgICAgICAgIGxpbmtEYXRhLnNhbk1pbiA9IGNvbmZpZy5vcHRpb25zLmFjdG9yPy5zeXN0ZW0/LnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrUGFzc2VkXG4gICAgICAgICAgICBsaW5rRGF0YS5zYW5NYXggPSBjb25maWcub3B0aW9ucy5hY3Rvcj8uc3lzdGVtPy5zcGVjaWFsPy5zYW5Mb3NzPy5jaGVja0ZhaWxsZWRcbiAgICAgICAgICAgIGxpbmtEYXRhLnNhblJlYXNvbiA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlPy5sZW5ndGhcbiAgICAgICAgICAgICAgPyBjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgICAgICA6IGNvbmZpZy5vcHRpb25zLmFjdG9yLm5hbWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpID09PSAnYmxpbmRyb2xsJykge1xuICAgICAgICAgICAgbGlua0RhdGEuYmxpbmQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb25maWcub3B0aW9ucy5zZW5kVG9DaGF0KSB7XG4gICAgICAgICAgICBDb0M3TGluay50b0NoYXRNZXNzYWdlKGxpbmtEYXRhKVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLm9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkKSB7XG4gICAgICAgICAgICBDb0M3TGluay5mcm9tRHJvcERhdGEobGlua0RhdGEpLnRoZW4obGluayA9PiB7XG4gICAgICAgICAgICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKGxpbmsubGluaylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUobGlua0RhdGEsIHsgYWN0b3JzOiBbY29uZmlnLm9wdGlvbnMuYWN0b3JdLmZpbHRlcihhID0+IGEub3duZXJzLmxlbmd0aCksIGhhc01vZGlmaWVyczogY29uZmlnLm9wdGlvbnMuc2hpZnRLZXkgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlUm9sbCAoY29uZmlnKSB7XG4gICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShjb25maWcuZGlhbG9nT3B0aW9ucylcbiAgICBpZiAodXNhZ2UpIHtcbiAgICAgIGNvbnN0IGNhcmRUeXBlID0gdXNhZ2UuZ2V0KCdjYXJkVHlwZScpXG4gICAgICBpZiAoY2FyZFR5cGUpIHtcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPSBjYXJkVHlwZVxuICAgICAgfVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICB1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKVxuICAgICAgKVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJ1blJvbGwgKGNvbmZpZykge1xuICAgIHN3aXRjaCAoY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUpIHtcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0s6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBzYW5EYXRhID0gYXdhaXQgU2FuRGF0YURpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgcHJvbXB0TGFiZWw6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlmIChzYW5EYXRhKSB7XG4gICAgICAgICAgICBsZXQgc2FuTWluID0gc2FuRGF0YS5nZXQoJ3Nhbk1pbicpIHx8IDBcbiAgICAgICAgICAgIGxldCBzYW5NYXggPSBzYW5EYXRhLmdldCgnc2FuTWF4JykgfHwgMFxuICAgICAgICAgICAgY29uc3Qgc2FuUmVhc29uID0gc2FuRGF0YS5nZXQoJ3NhblJlYXNvbicpXG5cbiAgICAgICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHNhbk1pbikpKSBzYW5NaW4gPSBOdW1iZXIoc2FuTWluKVxuICAgICAgICAgICAgaWYgKCFpc05hTihOdW1iZXIoc2FuTWF4KSkpIHNhbk1heCA9IE51bWJlcihzYW5NYXgpXG5cbiAgICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUoXG4gICAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9yLmFjdG9yS2V5LFxuICAgICAgICAgICAgICB7IHNhbk1pbiwgc2FuTWF4LCBzYW5SZWFzb24gfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNhbk1vZGlmaWVyOiBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllcixcbiAgICAgICAgICAgICAgICBzYW5EaWZmaWN1bHR5OiBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgICAgIGZhc3RGb3J3YXJkOiBjb25maWcub3B0aW9ucy5zaGlmdEtleVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyXG4gICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5XG4gICAgICAgIGNoZWNrLmFjdG9yID0gIWNvbmZpZy5vcHRpb25zLnRva2VuS2V5XG4gICAgICAgICAgPyBjb25maWcub3B0aW9ucy5hY3RvcklkXG4gICAgICAgICAgOiBjb25maWcub3B0aW9ucy50b2tlbktleVxuICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdERpY2VNb2RpZmllclxuICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgICAgY2hlY2suc3RhbmRieSA9XG4gICAgICAgICAgIWNvbmZpZy5vcHRpb25zLnByZXZlbnRTdGFuZGJ5ICYmXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgICAgICBjb25maWcub3B0aW9ucy5oYXNQbGF5ZXJPd25lclxuICAgICAgICBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwpIHtcbiAgICAgICAgICBjaGVjay5za2lsbCA9IGNvbmZpZy5vcHRpb25zLnNraWxsSWRcbiAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICAgICAgKSB7XG4gICAgICAgICAgYXdhaXQgY2hlY2sucm9sbEF0dHJpYnV0ZShjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljKVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5jaGF0TWVzc2FnZSkge1xuICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXN1bHQ6IGNoZWNrLm1vZGlmaWVkUmVzdWx0LFxuICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogY2hlY2sucm9sbGVkU3VjY2Vzc0xldmVsLFxuICAgICAgICAgIGlzRnVtYmxlOiBjaGVjay5pc0Z1bWJsZSxcbiAgICAgICAgICBpc0NyaXRpY2FsOiBjaGVjay5pc0NyaXRpY2FsLFxuICAgICAgICAgIHN1Y2Nlc3NMZXZlbHM6IHtcbiAgICAgICAgICAgIDE6IGNoZWNrLnJlZ3VsYXJUaHJlc2hvbGQsXG4gICAgICAgICAgICAyOiBjaGVjay5oYXJkVGhyZXNob2xkLFxuICAgICAgICAgICAgMzogY2hlY2suZXh0cmVtZVRocmVzaG9sZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGFzc2VkOiBjaGVjay5wYXNzZWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRUQ6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORUQ6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICAgIGNoZWNrLmFjdG9yID0gIWNvbmZpZy5vcHRpb25zLnRva2VuS2V5XG4gICAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9ySWRcbiAgICAgICAgICAgIDogY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgICBjaGVjay5jaGFyYWN0ZXJpc3RpYyA9IGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgY2hlY2suYXR0cmlidXRlID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXG4gICAgICAgICAgY2hlY2suc2tpbGxJZCA9IGNvbmZpZy5vcHRpb25zLnNraWxsSWRcbiAgICAgICAgICBjaGVjay5yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICAgICAgICBjaGVjay5pbml0aWF0b3IgPSBnYW1lLnVzZXIuaWRcbiAgICAgICAgICBsZXQgZGF0YSA9IHt9XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgICAgdHlwZTogT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgICAgIGNvbWJhdDogY29uZmlnLm9wdGlvbnMuaXNDb21iYXQsXG4gICAgICAgICAgICAgIGFjdGlvbjogJ25ldydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoZWNrLml0ZW0gPSBjb25maWcub3B0aW9ucy5pdGVtSWRcbiAgICAgICAgICAgIGNoZWNrLndlYXBvbkFsdFNraWxsID0gY29uZmlnLm9wdGlvbnMud2VhcG9uQWx0U2tpbGxcbiAgICAgICAgICAgIGNoZWNrLmRlbnlQdXNoID0gdHJ1ZSAvLyBPcHBvc2VkIHJvbGxlZCBjYW4ndCBiZSBwdXNoZWQuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgIHR5cGU6IENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICAgICAgYWN0aW9uOiAnbmV3J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgICAgICB9XG4gICAgICAgICAgZGF0YS5yb2xsID0gY2hlY2suSlNPTlJvbGxEYXRhXG4gICAgICAgICAgZGF0YS5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb21iaW5lZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29uQ2hlY2sge1xuICBjb25zdHJ1Y3RvciAoYWN0b3JJZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIpIHtcbiAgICB0aGlzLmNoZWNrID0gbmV3IENvQzdDaGVjayhhY3RvcklkKVxuICAgIHRoaXMuY2hlY2suY2hhcmFjdGVyaXN0aWMgPSAnY29uJ1xuICAgIHRoaXMuY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmNoZWNrLmRlbnlQdXNoID0gdHJ1ZVxuICAgIHRoaXMuYWN0b3JJZCA9IGFjdG9ySWRcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9pc0JsaW5kKSB7XG4gICAgICB0aGlzLl9pc0JsaW5kID0gdGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCdcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2lzQmxpbmRcbiAgfVxuXG4gIHNldCBpc0JsaW5kICh4KSB7XG4gICAgdGhpcy5faXNCbGluZCA9IHhcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcklkKSByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcklkKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc2V0IGFjdG9ySWQgKHgpIHtcbiAgICB0aGlzLl9hY3RvcklkID0geFxuICAgIHRoaXMuY2hlY2suYWN0b3IgPSB4XG4gIH1cblxuICBnZXQgYWN0b3JJZCAoKSB7XG4gICAgaWYgKHRoaXMuX2FjdG9ySWQpIHJldHVybiB0aGlzLl9hY3RvcklkXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB0b2tlbktleSAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikgcmV0dXJuIHRoaXMuYWN0b3IudG9rZW5LZXlcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGlzU3VjY2VzcyAoKSB7XG4gICAgaWYgKHRoaXMuY2hlY2spIHJldHVybiB0aGlzLmNoZWNrLmlzU3VjY2Vzc1xuICAgIGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNSb2xsZWQgKCkge1xuICAgIGlmICh0aGlzLmNoZWNrICYmIHRoaXMuY2hlY2suZGljZXMgJiYgdGhpcy5jaGVjay5kaWNlcy50b3RhbCkgcmV0dXJuIHRydWVcbiAgICBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XG4gICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGNvbkNoZWNrLCBjYXJkKVxuICAgIGNvbnN0IGh0bWxDaGVjayA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChodG1sQ2hlY2ssIGNvbkNoZWNrLmNoZWNrKVxuICAgIGNvbkNoZWNrLm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIHJldHVybiBjb25DaGVja1xuICB9XG5cbiAgYXN5bmMgZ2V0Q2hlY2tFbGVtZW50ICgpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbC1yZXN1bHQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMuY2hlY2spXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuICAgIGlmIChodG1sRWxlbWVudCkge1xuICAgICAgaHRtbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2hhdC1jYXJkJywgJ2l0ZW0tY2FyZCcsICdyb2xsLWNhcmQnKVxuICAgICAgcmV0dXJuIGh0bWxFbGVtZW50XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29uLWNoZWNrLmh0bWwnXG5cbiAgICBpZiAoZmFzdEZvcndhcmQpIHtcbiAgICAgIGF3YWl0IHRoaXMucm9sbENvbigpXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGlmIChmYXN0Rm9yd2FyZCkge1xuICAgICAgY29uc3QgY2hlY2sgPSBodG1sRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgICAgY2hlY2sucmVwbGFjZVdpdGgoYXdhaXQgdGhpcy5nZXRDaGVja0VsZW1lbnQoKSlcbiAgICB9XG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgbGV0IHNwZWFrZXJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMudG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy50b2tlblxuICAgICAgZWxzZSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGZsYXZvcjogdGhpcy5mbGF2b3IsXG4gICAgICBjb250ZW50OiBodG1sRWxlbWVudC5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpKVxuICAgICkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpIC8vIENoYW5nZSBmb3IgdXNlclxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJvbGxDb24gKCkge1xuICAgIHRoaXMuY2hlY2suaGlkZURpY2VSZXN1bHQgPSB0cnVlXG4gICAgYXdhaXQgdGhpcy5jaGVjay5fcGVyZm9ybSgpXG4gICAgaWYgKCF0aGlzLmlzQmxpbmQgJiYgIXRoaXMuaXNSb2xsZWQgJiYgIXRoaXMuaXNTdWNjZXNzKSB7XG4gICAgICBpZiAodGhpcy5zdGF5QWxpdmUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFwcGxpZWQgPSB0cnVlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2Nvbi1jaGVjay5odG1sJ1xuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGNvbnN0IGNoZWNrID0gaHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICBjaGVjay5yZXBsYWNlV2l0aChhd2FpdCB0aGlzLmdldENoZWNrRWxlbWVudCgpKVxuXG4gICAgaWYgKCF0aGlzLmlzQmxpbmQgJiYgdGhpcy5pc1JvbGxlZCAmJiAhdGhpcy5pc1N1Y2Nlc3MpIHtcbiAgICAgIGlmICh0aGlzLnN0YXlBbGl2ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5kZWFkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkgcmV0dXJuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGh0bWxFbGVtZW50Lm91dGVySFRNTCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUgKi9cbmV4cG9ydCBjbGFzcyBTa2lsbFNlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuc2VsZWN0LXNraWxsJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdFNraWxsQ2xpY2tlZChldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TZWxlY3RTa2lsbENsaWNrZWQgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggdGhpcy5kYXRhLmRhdGEuYWN0b3JJZCk7XG4gICAgLy8gYXdhaXQgYWN0b3IuYWRkU2tpbGwoIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLCB0aGlzLmRhdGEuZGF0YS50eXBlKTtcbiAgICB0aGlzLmRhdGEuZGF0YS5za2lsbHNbTnVtYmVyKGxpLmRhdGFzZXQuaW5kZXgpXS5zZWxlY3RlZCA9IHRydWVcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmFkZGVkKSB0aGlzLmRhdGEuZGF0YS5hZGRlZCA9IDBcbiAgICB0aGlzLmRhdGEuZGF0YS5hZGRlZCsrXG4gICAgY29uc3QgZm9ybSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnNraWxsLXNlbGVjdG9yJylcbiAgICBjb25zdCBkaXZDb3VudCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmNvdW50JylcbiAgICBkaXZDb3VudC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5hZGRlZFxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hZGRlZCA+PSB0aGlzLmRhdGEuZGF0YS5vcHRpb25zQ291bnQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNlbGVjdC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApIC8vIFJlbmRlciB0ZW1wbGF0ZSBidWcgYXZlYyBjZXJ0YWluZXMgZGF0YVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBTa2lsbFNlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkYXRhLmFkZGVkID49IGRhdGEub3B0aW9uc0NvdW50KSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gZGF0YS5za2lsbHMuZmlsdGVyKHNraWxsID0+IHNraWxsLnNlbGVjdGVkKVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoc2VsZWN0ZWQpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnc2tpbGwtc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXG5cbmV4cG9ydCBjbGFzcyBQb2ludFNlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1uYW1lJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdENoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uQnV0dG9uQ2xpY2tlZChldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1MaXN0ID0gbGkuY2xvc2VzdCgnLml0ZW0tbGlzdCcpXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1MaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3RhYmxlJykpIHtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2l0ZW0uZGF0YXNldC5rZXldLnNlbGVjdGVkID0gZmFsc2VcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tpdGVtLmRhdGFzZXQua2V5XS5vcHRpb25hbCA9IGZhbHNlXG4gICAgfVxuICAgICQobGkpLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcpXG4gICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS5zZWxlY3RlZCA9IHRydWVcbiAgICBjb25zdCB0b3RhbFBvaW50cyA9IGxpXG4gICAgICAuY2xvc2VzdCgnI3NraWxsLXNlbGVjdGlvbi1mb3JtJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcucG9pbnRzJylcbiAgICB0b3RhbFBvaW50cy5pbm5lclRleHQgPVxuICAgICAgdGhpcy5kYXRhLmRhdGEudG90YWwgK1xuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS5tdWx0aXBsaWVyICpcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS52YWx1ZVxuICAgIGNvbnN0IGJ1dHRvbiA9IGxpXG4gICAgICAuY2xvc2VzdCgnI3NraWxsLXNlbGVjdGlvbi1mb3JtJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCdidXR0b24udmFsaWRhdGUnKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbmFjdGl2ZScpXG4gICAgdGhpcy5kYXRhLmRhdGEucmVzb2x2ZWQgPSB0cnVlXG4gICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIHRoaXMuZGF0YS5kYXRhLmFjdG9ySWQpO1xuICAgIC8vIGF3YWl0IGFjdG9yLmFkZFNraWxsKCB0aGlzLmRhdGEuZGF0YS5za2lsbHNbTnVtYmVyKGxpLmRhdGFzZXQuaW5kZXgpXSwgdGhpcy5kYXRhLmRhdGEudHlwZSk7XG4gICAgLy8gZXZlbnQuY3VycmVudFRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIC8vIGlmKCAhdGhpcy5kYXRhLmRhdGEuYWRkZWQpIHRoaXMuZGF0YS5kYXRhLmFkZGVkID0gMDtcbiAgICAvLyB0aGlzLmRhdGEuZGF0YS5hZGRlZCsrO1xuICAgIC8vIGNvbnN0IGZvcm0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5wb2ludC1zZWxlY3RvcicpO1xuICAgIC8vIGNvbnN0IGRpdkNvdW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuY291bnQnKTtcbiAgICAvLyBkaXZDb3VudC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5hZGRlZDtcbiAgICAvLyBpZiggdGhpcy5kYXRhLmRhdGEuYWRkZWQgPj0gdGhpcy5kYXRhLmRhdGEub3B0aW9ucykgdGhpcy5jbG9zZSgpO1xuICAgIC8vIHJldHVybiBldmVudDtcbiAgfVxuXG4gIGFzeW5jIF9vbkJ1dHRvbkNsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5hY3RpdmUnKSkgcmV0dXJuXG4gICAgc3VwZXIuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvcG9pbnQtc2VsZWN0Lmh0bWwnLFxuICAgICAgZGF0YVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgUG9pbnRTZWxlY3REaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnJlc29sdmVkKSByZXR1cm4gcmVzb2x2ZShkYXRhKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFyLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCByZW5kZXJUZW1wbGF0ZSAqL1xuZXhwb3J0IGNsYXNzIENoYXJhY1NlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1uYW1lJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdENoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgdGhpcy5kYXRhLmRhdGEuc2VsZWN0ZWQgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY2hhci1zZWxlY3QuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDaGFyYWNTZWxlY3REaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnNlbGVjdGVkKSByZXR1cm4gcmVzb2x2ZShkYXRhLnNlbGVjdGVkKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFyLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCAqL1xuZXhwb3J0IGNsYXNzIENoYXJhY1JvbGxEaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgb3B0aW9ucykge1xuICAgIHN1cGVyKGRhdGEsIG9wdGlvbnMpXG5cbiAgICB0aGlzLnJvbGxlZCA9IGRhdGEucm9sbGVkIHx8IHt9XG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5vbignY2hhbmdlJywgJ2lucHV0JywgdGhpcy5fb25DaGFuZ2VJbnB1dC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ3N1Ym1pdCcsICdmb3JtJywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vblJvbGxDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5pbmNyZWFzZS1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuZGVjcmVhc2UtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJlc2V0LWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uUmVzZXRDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJ2J1dHRvbicsIHRoaXMuX29uQnV0dG9uLmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5pbmNyZWFzZUNoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLmRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMucmVzZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25CdXR0b24gKGV2ZW50KSB7XG4gICAgY29uc3QgYWN0aW9uID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGlmIChhY3Rpb24gPT09ICdyb2xsJykge1xuICAgICAgZm9yIChjb25zdCBjaGFyIG9mIFtcbiAgICAgICAgJ3N0cicsXG4gICAgICAgICdjb24nLFxuICAgICAgICAnc2l6JyxcbiAgICAgICAgJ2RleCcsXG4gICAgICAgICdhcHAnLFxuICAgICAgICAnaW50JyxcbiAgICAgICAgJ3BvdycsXG4gICAgICAgICdlZHUnLFxuICAgICAgICAnbHVjaydcbiAgICAgIF0pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhcilcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgICBpZiAoYWN0aW9uID09PSAndmFsaWRhdGUnICYmIHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlKSB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9XG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBjb25zdCBmb3JtdWxhID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzW2tleV1cbiAgICBpZiAoaW5wdXQgJiYgZm9ybXVsYSkge1xuICAgICAgaWYgKGlzTmFOKE51bWJlcihmb3JtdWxhKSkpIHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGZvcm11bGEpXG4gICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICByb2xsLnRvTWVzc2FnZSh7XG4gICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VSb2xsaW5nQ2hhcmFjdGVyaXN0aWMnLCB7XG4gICAgICAgICAgICBsYWJlbDogdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3Rba2V5XS5sYWJlbCxcbiAgICAgICAgICAgIGZvcm11bGFcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICBpbnB1dC52YWx1ZSA9IHJvbGwudG90YWxcbiAgICAgIH0gZWxzZSBpbnB1dC52YWx1ZSA9IE51bWJlcihmb3JtdWxhKVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgICAgaWYgKCF0aGlzLnJvbGxlZCkgdGhpcy5yb2xsZWQgPSB7fVxuICAgICAgdGhpcy5yb2xsZWRba2V5XSA9IHRydWVcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIGluY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQpIHtcbiAgICAgIGlucHV0LnZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKSArIDFcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIGRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQgJiYgTnVtYmVyKGlucHV0LnZhbHVlKSA+IDApIHtcbiAgICAgIGlucHV0LnZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKSAtIDFcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIHJlc2V0Q2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQpIHtcbiAgICAgIGlucHV0LnZhbHVlID0gbnVsbFxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gMFxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlSW5wdXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2lucHV0Lm5hbWVdID0gdmFsdWVcbiAgICB9XG5cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgY2hlY2tUb3RhbCAoKSB7XG4gICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCA9IDBcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNcbiAgICApKSB7XG4gICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCArPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJy5wb2ludHMnKVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgTnVtYmVyKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwpICE9PVxuICAgICAgICBOdW1iZXIodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZSlcbiAgICAgICkge1xuICAgICAgICB2YWxpZGF0aW9uLmNsYXNzTGlzdC5hZGQoJ3dhcm5pbmcnKVxuICAgICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9IGZhbHNlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWxpZGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmcnKVxuICAgICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9IHRydWVcbiAgICAgIH1cbiAgICAgIGNvbnN0IHZhbHVlID0gdmFsaWRhdGlvbi5xdWVyeVNlbGVjdG9yKCcudmFsdWUnKVxuICAgICAgdmFsdWUuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZVxuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsID0gdmFsaWRhdGlvbi5xdWVyeVNlbGVjdG9yKCcudG90YWwnKVxuICAgIHRvdGFsLmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWxcblxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCkge1xuICAgICAgdGhpcy5kYXRhLmRhdGEudmFsaWRhdGUgPSBPYmplY3QudmFsdWVzKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMpLmZpbHRlcih2YWwgPT4gaXNOYU4ocGFyc2VJbnQodmFsKSkpLmxlbmd0aCA9PT0gMFxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3Qgcm9sbGVkID0ge31cbiAgICBkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgPSAwXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSkge1xuICAgICAgaWYgKGtleSAhPT0gJ2x1Y2snKSB7XG4gICAgICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCArPSB2YWx1ZSB8fCAwXG4gICAgICB9XG4gICAgICBpZiAoIWlzTmFOKHZhbHVlKSAmJiB2YWx1ZSA+IDApIHtcbiAgICAgICAgcm9sbGVkW2tleV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICBpZiAoXG4gICAgICAgIE51bWJlcihkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwpICE9PVxuICAgICAgICBOdW1iZXIoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlKVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEucG9pbnRzV2FybmluZyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NoYXItcm9sbC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IENoYXJhY1JvbGxEaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgcm9sbGVkLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGF0YS52YWxpZGF0ZSkgcmV0dXJuIHJlc29sdmUodHJ1ZSlcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY2hhci1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5leHBvcnQgY2xhc3MgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoXG4gICAgc2tpbGxzLFxuICAgIHNwZWNpYWxpemF0aW9uTmFtZSxcbiAgICBiYXNlVmFsdWUgPSBudWxsLFxuICAgIG5hbWUgPSBudWxsXG4gICkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QuaHRtbCcsXG4gICAgICB7XG4gICAgICAgIGhhc1NraWxsczogc2tpbGxzLmxlbmd0aCA+IDAsXG4gICAgICAgIHNraWxscyxcbiAgICAgICAgYmFzZTogYmFzZVZhbHVlLFxuICAgICAgICBuYW1lXG4gICAgICB9XG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogbmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFNlbGVjdEJhc2UnLCB7IG5hbWUgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTcGVjU2VsZWN0VGl0bGUnLCB7XG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogc3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgICAgfSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNza2lsbC1zZWxlY3QtZm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAndmFsaWRhdGUnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUgKi9cblxuZXhwb3J0IGNsYXNzIFNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2cgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NraWxsLW5hbWUtZGlhbG9nJ10sXG4gICAgICB0aXRsZTogJycsXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QuaGJzJyxcbiAgICAgIHdpZHRoOiA0MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGdldCB0aXRsZSAoKSB7XG4gICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTcGVjU2VsZWN0VGl0bGUnLCB7XG4gICAgICBzcGVjaWFsaXphdGlvbjogdGhpcy5vYmplY3Quc3BlY2lhbGl6YXRpb25OYW1lXG4gICAgfSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnLnN1Ym1pdC1idXR0b24nKS5jbGljayh0aGlzLl9vbkNsaWNrU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdbbmFtZT1leGlzdGluZy1za2lsbF0nKS5jaGFuZ2UodGhpcy5fb25TZWxlY3RDaGFuZ2UuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdENoYW5nZSAoZXZlbnQpIHtcbiAgICB0aGlzLm9iamVjdC5zZWxlY3RlZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tTdWJtaXQgKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMub2JqZWN0LnNlbGVjdGVkID09PSAnJykge1xuICAgICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCdmb3JtJylcbiAgICAgIHRoaXMub2JqZWN0Lm5hbWUgPSAob2JqLmZpbmQoJ2lucHV0W25hbWU9bmV3LXNraWxsLW5hbWVdJykudmFsKCkgPz8gJycpXG4gICAgICB0aGlzLm9iamVjdC5iYXNlVmFsdWUgPSAob2JqLmZpbmQoJ2lucHV0W25hbWU9YmFzZS12YWx1ZV0nKS52YWwoKSA/PyAnJylcbiAgICB9XG4gICAgaWYgKHRoaXMub2JqZWN0LnNlbGVjdGVkID09PSAnJyAmJiB0aGlzLm9iamVjdC5uYW1lID09PSAnJykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHRoaXMub2JqZWN0LnJlc29sdmUoe1xuICAgICAgc2VsZWN0ZWQ6IHRoaXMub2JqZWN0LnNlbGVjdGVkLFxuICAgICAgbmFtZTogdGhpcy5vYmplY3QubmFtZSxcbiAgICAgIGJhc2VWYWx1ZTogdGhpcy5vYmplY3QuYmFzZVZhbHVlXG4gICAgfSlcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoeyBza2lsbHMgPSBbXSwgYWxsb3dDdXN0b20gPSBmYWxzZSwgZml4ZWRCYXNlVmFsdWUgPSBmYWxzZSwgc3BlY2lhbGl6YXRpb25OYW1lID0gJycsIGxhYmVsID0gJycsIGJhc2VWYWx1ZSA9IG51bGwgfSA9IHt9KSB7XG4gICAgY29uc3Qgc2VsZWN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHNraWxscykge1xuICAgICAgc2VsZWN0LnB1c2goe1xuICAgICAgICBpZDogc2tpbGwuaWQsXG4gICAgICAgIG5hbWU6IHNraWxsLm5hbWUsXG4gICAgICAgIGJhc2U6IHNraWxsLnN5c3RlbS5iYXNlXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBuZXcgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZyh7XG4gICAgICAgIHNwZWNpYWxpemF0aW9uTmFtZSxcbiAgICAgICAgYWxsb3dDdXN0b20sXG4gICAgICAgIGZpeGVkQmFzZVZhbHVlLFxuICAgICAgICBhbGxvd1NlbGVjdDogc2tpbGxzLmxlbmd0aCA+IDAsXG4gICAgICAgIHNraWxsczogc2VsZWN0LFxuICAgICAgICBzZWxlY3RlZDogJycsXG4gICAgICAgIG5hbWU6ICcnLFxuICAgICAgICBsYWJlbCxcbiAgICAgICAgYmFzZVZhbHVlLFxuICAgICAgICByZXNvbHZlXG4gICAgICB9LCB7fSkucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5leHBvcnQgY2xhc3MgU2tpbGxWYWx1ZURpYWxvZyB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG5hbWUgPSBudWxsLCBiYXNlVmFsdWUgPSBudWxsKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC12YWx1ZS5odG1sJyxcbiAgICAgIHsgYmFzZTogYmFzZVZhbHVlLCBuYW1lIH1cbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNraWxsVmFsdWUnLCB7IG5hbWUgfSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNza2lsbC1zZWxlY3QtZm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAndmFsaWRhdGUnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4vbWVsZWUtdGFyZ2V0LmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlUmVzb2x0aW9uIHtcbiAgY29uc3RydWN0b3IgKFxuICAgIGluaXRpYXRvck1lc3NhZ2UgPSBudWxsLFxuICAgIHRhcmdldE1lc3NhZ2UgPSBudWxsLFxuICAgIG1lc3NhZ2VJZCA9IG51bGxcbiAgKSB7XG4gICAgdGhpcy5pbml0aWF0b3JNZXNzYWdlID0gaW5pdGlhdG9yTWVzc2FnZVxuICAgIHRoaXMudGFyZ2V0TWVzc2FnZSA9IHRhcmdldE1lc3NhZ2VcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICB9XG5cbiAgYXN5bmMgcHJlQ3JlYXRlTWVzc2FnZSAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICAvLyBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7YWN0b3I6IHRoaXMuYWN0b3J9KTtcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xuXG4gICAgLy8gY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlcjtcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIC8vIEFkZCBpbWFnZSB0byBjYXJkLlxuICAgIC8vIGRhdGEuZmxhZ3MgPSB7XG4gICAgLy8gICBpbWc6IHRoaXMuYWN0b3IuaXNUb2tlbiA/IHRoaXMuYWN0b3IudG9rZW4uZGF0YS5pbWc6IHRoaXMuYWN0b3IuaW1nXG4gICAgLy8gfTtcblxuICAgIGNvbnN0IHJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhyb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHJvbGxNb2RlID09PSAnYmxpbmRyb2xsJyApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IGNoYXRNZXNzYWdlLmlkXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldE1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZCh0aGlzLnRhcmdldE1lc3NhZ2UpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdGFyZ2V0VG9rZW4gKCkge1xuICAgIGlmICh0aGlzLnRhcmdldCkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMudGFyZ2V0LmFjdG9yS2V5KVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaW5pdGlhdG9yICgpIHtcbiAgICBpZiAodGhpcy5pbml0aWF0b3JNZXNzYWdlKSB7XG4gICAgICByZXR1cm4gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQodGhpcy5pbml0aWF0b3JNZXNzYWdlKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGluaXRpYXRvclRva2VuICgpIHtcbiAgICBpZiAodGhpcy5pbml0aWF0b3IpIHtcbiAgICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmluaXRpYXRvci5hY3RvcktleSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHJlc29sdmUgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgc3dpdGNoICh0aGlzLnRhcmdldC5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSAnbm9SZXNwb25zZSc6XG4gICAgICAgICAgaWYgKHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLmFjdGlvbiA9ICdyb2xsLW1lbGVlLWRhbWFnZSdcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYXRvck1pc3NlZCcsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdkb2RnZSc6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLmFjdGlvbiA9ICdyb2xsLW1lbGVlLWRhbWFnZSdcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Eb2RnZVN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LnNraWxsLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMudGFyZ2V0LnNraWxsLm5hbWVcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ2RvZGdlJ1xuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gVE9ETyB2ZXJpZmllciBsYSBjb25kaXRpb24gPD0gdnMgPFxuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLnRhcmdldC53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnbWFuZXV2ZXInOlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsIDw9IDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gbnVsbFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPj0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LnNraWxsLmRhdGEuaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQuc2tpbGwubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gMCkge1xuICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgIH0pXG4gICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWF0b3JNaXNzZWQnLCB7XG4gICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgIH0pXG4gICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICh0aGlzLndpbm5lcikge1xuICAgICAgaWYgKHRoaXMud2lubmVyLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICB0aGlzLndpbm5lci5yb2xsLmNyaXRpY2FsRGFtYWdlID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy53aW5uZXIucm9sbC5jcml0aWNhbERhbWFnZSA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcbiAgICBpZiAodGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICAgIGlmICh0aGlzLndpbm5lcikge1xuICAgICAgICBpZiAodGhpcy53aW5uZXIudG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy53aW5uZXIudG9rZW4uZG9jdW1tZW50XG4gICAgICAgIGlmICh0aGlzLndpbm5lci5hY3Rvcikgc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLndpbm5lci5hY3RvclxuICAgICAgfVxuICAgICAgY29uc3Qgc3BlYWtlciA9IHRoaXMud2lubmVyID8gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSkgOiBudWxsXG4gICAgICBjb25zdCB1c2VyID1cbiAgICAgICAgdGhpcy53aW5uZXIgJiYgdGhpcy53aW5uZXIuYWN0b3IudXNlclxuICAgICAgICAgID8gdGhpcy53aW5uZXIuYWN0b3IudXNlclxuICAgICAgICAgIDogZ2FtZS51c2VyXG5cbiAgICAgIGxldCBtc2dcbiAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAvLyBUT0RPOiBJZiBjYXJkIGlzbid0IGZvdW5kIChjYXJkIHdhcyBkZWxldGVkIGJlZm9yZSBjb21wbGV0aW9uKSA/XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignUmVzb2xpdGlvbiBjYXJkIG1pc3NpbmcsIHdhcyBkZWxldGVkID8nKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmIChzcGVha2VyKSB7XG4gICAgICAgIG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgICAvLyBUT0RPOiBJZiBjYXJkIGlzbid0IGZvdW5kIChjYXJkIHdhcyBkZWxldGVkIGJlZm9yZSBjb21wbGV0aW9uKSA/XG4gICAgICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgICAgICBzcGVha2VyLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgICAgcmV0dXJuIG1zZ1xuICAgIH1cbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLXJlc29sdXRpb24uaHRtbCdcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ2hhdENhcmRBY3RvciB9IGZyb20gJy4uL2NhcmQtYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVSZXNvbHRpb24gfSBmcm9tICcuL21lbGVlLXJlc29sdXRpb24uanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL21lbGVlLWluaXRpYXRvci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdNZWxlZVRhcmdldCBleHRlbmRzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXksIHBhcmVudE1lc3NhZ2VJZCA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBzdXBlcihhY3RvcktleSwgZmFzdEZvcndhcmQpXG4gICAgdGhpcy5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgdGhpcy5pbml0aWF0b3JLZXkgPSBudWxsXG4gICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQgPSBwYXJlbnRNZXNzYWdlSWRcbiAgICB0aGlzLmZhc3RGb3J3YXJkID0gZmFzdEZvcndhcmRcbiAgICB0aGlzLnJlc29sdmVkID0gZmFsc2VcblxuICAgIHRoaXMub3V0bnVtYmVyZWQgPSBmYWxzZVxuICAgIHRoaXMuc3VycHJpc2VkID0gZmFsc2VcbiAgICB0aGlzLmF1dG9TdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLmFkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5kaXNhZHZhbnRhZ2UgPSBmYWxzZVxuXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy5za2lsbElkID0gbnVsbFxuICAgIHRoaXMuaXRlbUlkID0gbnVsbFxuICAgIHRoaXMuZG9kZ2luZyA9IGZhbHNlXG4gICAgdGhpcy5ub3RSZXNwb25kaW5nID0gZmFsc2VcbiAgICB0aGlzLmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgdGhpcy5tYW5ldXZlcmluZyA9IGZhbHNlXG4gIH1cblxuICBnZXQgYWN0aW9uU2VsZWN0ZWQgKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmRvZGdpbmcgfHxcbiAgICAgIHRoaXMubm90UmVzcG9uZGluZyB8fFxuICAgICAgdGhpcy5maWdodGluZ0JhY2sgfHxcbiAgICAgIHRoaXMubWFuZXV2ZXJpbmdcbiAgICApXG4gIH1cblxuICBnZXQgYWN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5kb2RnaW5nKSByZXR1cm4gJ2RvZGdlJ1xuICAgIGlmICh0aGlzLm5vdFJlc3BvbmRpbmcpIHJldHVybiAnbm9SZXNwb25zZSdcbiAgICBpZiAodGhpcy5maWdodGluZ0JhY2spIHJldHVybiAnZmlnaHRCYWNrJ1xuICAgIGlmICh0aGlzLm1hbmV1dmVyaW5nKSByZXR1cm4gJ21hbmV1dmVyJ1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgd2VhcG9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgc2tpbGwgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXG4gIH1cblxuICBzZXQgaW5pdGlhdG9yS2V5ICh4KSB7XG4gICAgdGhpcy5faW5pdGlhdG9yS2V5ID0geFxuICAgIHRoaXMudGFyZ2V0S2V5ID0geFxuICB9XG5cbiAgZ2V0IGluaXRpYXRvcktleSAoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWF0b3JLZXkpIHtcbiAgICAgIGlmICghdGhpcy5faW5pdGlhdG9yICYmIHRoaXMucGFyZW50TWVzc2FnZUlkKSB7XG4gICAgICAgIHRoaXMuX2luaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9pbml0aWF0b3IpIHRoaXMuX2luaXRpYXRvcktleSA9IHRoaXMuX2luaXRpYXRvci5hY3RvcktleVxuICAgIH1cbiAgICBpZiAoIXRoaXMuX2luaXRpYXRvcktleSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYE5vIGluaXRpYXRvciBmb3VuZCBmb3IgdGFyZ2V0IDogJHt0aGlzLmFjdG9yLm5hbWV9YFxuICAgICAgKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2luaXRpYXRvcktleVxuICB9XG5cbiAgZ2V0IGluaXRpYXRvciAoKSB7XG4gICAgaWYgKCF0aGlzLmluaXRpYXRvcktleSkge1xuICAgICAgaWYgKHRoaXMucGFyZW50TWVzc2FnZUlkKSB7XG4gICAgICAgIHRoaXMuX2luaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5pbml0aWF0b3JLZXkgPSB0aGlzLl9pbml0aWF0b3IuYWN0b3JLZXlcbiAgICAgIH0gZWxzZSByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5pbml0aWF0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IG1lbGVlSW5pdGlhdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYXRvcikge1xuICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pbml0aWF0b3JcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5odG1sJ1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGNhcmQgPSAkKG1lc3NhZ2UuY29udGVudClbMF1cblxuICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkLCBtZXNzYWdlSWQpXG4gICAgdGFyZ2V0Lm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50LCBwdWJsaXNoVXBkYXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5tZWxlZS50YXJnZXQnKVxuICAgIGNvbnN0IGZsYWcgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGNvbnN0IGNhbWVsRmxhZyA9IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZylcblxuICAgIC8vIHVwZGF0ZSBvbmx5IGZvciBsb2NhbCBwbGF5ZXJcbiAgICBpZiAoIXB1Ymxpc2hVcGRhdGUpIHtcbiAgICAgIGNhcmQuZGF0YXNldFtjYW1lbEZsYWddID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gIT09ICd0cnVlJ1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2hlZC1vbicpXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2VsZWN0ZWQgPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGUgY2FyZCBmb3IgYWxsIHBsYXllclxuICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICB0YXJnZXQudG9nZ2xlRmxhZyhmbGFnKVxuICAgICAgdGFyZ2V0LnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICB0b2dnbGVGbGFnIChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGZsYWcgPSBmbGFnTmFtZS5pbmNsdWRlcygnLScpXG4gICAgICA/IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZ05hbWUpXG4gICAgICA6IGZsYWdOYW1lXG4gICAgdGhpc1tmbGFnXSA9ICF0aGlzW2ZsYWddXG4gIH1cblxuICBhc3luYyBjcmVhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmICh0b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0b2tlbi5kb2N1bWVudFxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG5cbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lXG5cbiAgICBsZXQgdXNlciA9IGdhbWUudXNlclxuICAgIGlmICh0eXBlb2YgdGhpcy5hY3Rvci51c2VyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgbGV0IG93bmVycyA9IFtdXG4gICAgICBjb25zdCBnbXMgPSBnYW1lLnVzZXJzLmZpbHRlcihhID0+IGEuaXNHTSkubWFwKGEgPT4gYS5pZClcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYWN0b3Iub3duZXJzaGlwKSkge1xuICAgICAgICBpZiAodiA9PT0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUikge1xuICAgICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIG93bmVycyA9IGdhbWUudXNlcnMubWFwKGEgPT4gYS5pZClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfSBlbHNlIGlmICghZ21zLmluY2x1ZGVzKGspKSB7XG4gICAgICAgICAgICBvd25lcnMucHVzaChrKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGNvbnRlbnQgPSAnJ1xuICAgICAgc3dpdGNoIChvd25lcnMubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAvLyBHTVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAodHlwZW9mIGdhbWUudXNlcnMuZ2V0KG93bmVyc1swXSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1c2VyID0gZ2FtZS51c2Vycy5nZXQob3duZXJzWzBdKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgJzxwPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVNlbGVjdFNpbmdsZVVzZXJGb3JUYXJnZXQnKVxuICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzxmb3JtIGlkPVwic2VsZWN0Zm9ybVwiPjxzZWxlY3QgbmFtZT1cInVzZXJcIj4nXG4gICAgICAgICAgZm9yIChjb25zdCBrIG9mIG93bmVycykge1xuICAgICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAgIGNvbnRlbnQgK1xuICAgICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIicgK1xuICAgICAgICAgICAgICBrICtcbiAgICAgICAgICAgICAgJ1wiPicgK1xuICAgICAgICAgICAgICBnYW1lLnVzZXJzLmdldChrKS5uYW1lICtcbiAgICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyAnPC9zZWxlY3Q+PC9mb3JtPjwvcD4nXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLnByb21wdCh7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5NZXNzYWdlVGl0bGVTZWxlY3RTaW5nbGVVc2VyRm9yVGFyZ2V0J1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgIHVzZXIgPSBnYW1lLnVzZXJzLmdldCh2YWx1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuYWN0b3IudXNlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVzZXIgPSB0aGlzLmFjdG9yLnVzZXJcbiAgICB9XG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggdGhpcy5pc0JsaW5kICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG5cbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuaWRcbiAgICByZXR1cm4gbWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNICYmIG1lc3NhZ2UudXNlci5pZCAhPT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0ludGVyYWN0V2l0aENoYXRDYXJkJylcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIGFzeW5jIGdldFVwZGF0ZWRDaGF0Q2FyZCAoKSB7XG4gICAgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcykudGhlbihodG1sID0+IHtcbiAgICAgIHJldHVybiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVTZWxlY3RlZCAoY2FyZCwgZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcblxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnZG9kZ2UnOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0Lm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdub1Jlc3BvbnNlJzpcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5za2lsbElkID0gbnVsbFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IHRydWVcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbklkXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ21hbmV1dmVyJzpcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSB0cnVlXG4gICAgICAgIHRhcmdldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgdGFyZ2V0Lml0ZW1JZCA9IG51bGxcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICB0YXJnZXQudXBkYXRlQ2hhdENhcmQoKVxuXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybVNraWxsQ2hlY2sgKHNraWxsSWQgPSBudWxsLCBwdWJsaXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxuICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgY2hlY2suc2lkZSA9ICd0YXJnZXQnXG4gICAgY2hlY2suYWN0aW9uID0gdGhpcy5hY3Rpb25cbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxuXG4gICAgaWYgKHRoaXMuZGlzYWR2YW50YWdlKSBjaGVjay5kaWNlTW9kaWZpZXIgLT0gMVxuICAgIGlmICh0aGlzLmFkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcblxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIHRoaXMuY2hlY2sgPSBjaGVja1xuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgaWYgKHB1Ymxpc2gpIGNoZWNrLnRvTWVzc2FnZSgpXG5cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hOb1JlcG9uc2VSZXN1bHQgKCkge1xuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgdGhpcy5ub3RSZXNwb25kaW5nID0gdHJ1ZVxuICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkLFxuICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICApXG5cbiAgICBjb25zdCByZXNvbHV0aW9uTWVzc2FnZSA9IGF3YWl0IHJlc29sdXRpb25DYXJkLnByZUNyZWF0ZU1lc3NhZ2UoKVxuXG4gICAgdGhpcy5yZXNvbHV0aW9uQ2FyZCA9IHJlc29sdXRpb25NZXNzYWdlLmlkXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBwdWJsaXNoQ2hlY2tSZXN1bHQgKGNoZWNrID0gbnVsbCkge1xuICAgIGlmICghY2hlY2sgJiYgIXRoaXMuY2hlY2spIHJldHVybiBudWxsXG5cbiAgICBpZiAoY2hlY2spIHRoaXMuY2hlY2sgPSBjaGVja1xuICAgIHRoaXMucm9sbCA9IENvQzdSb2xsLmdldEZyb21DaGVjayh0aGlzLmNoZWNrKVxuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuXG4gICAgdGhpcy5yb2xsLnJvbGxJY29ucyA9IFtdXG4gICAgaWYgKHRoaXMucm9sbC5jcml0aWNhbCkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ21lZGFsJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucm9sbC5mdW1ibGUpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZGFya3JlZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc3BpZGVyJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucm9sbC5zdWNjZXNzKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc3RhcicpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnYmxhY2snXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdza3VsbCcpXG4gICAgfVxuXG4gICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgIClcbiAgICBjb25zdCByZXNvbHV0aW9uTWVzc2FnZSA9IGF3YWl0IHJlc29sdXRpb25DYXJkLnByZUNyZWF0ZU1lc3NhZ2UoKVxuXG4gICAgdGhpcy5yZXNvbHV0aW9uQ2FyZCA9IHJlc29sdXRpb25NZXNzYWdlLmlkXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQsIG1lc3NhZ2VJZCA9IG51bGwpIHtcbiAgICBjb25zdCBhY3RvcktleSA9IGNhcmQuZGF0YXNldC5hY3RvcktleVxuICAgIGNvbnN0IHBhcmVudE1lc3NhZ2VJZCA9IGNhcmQuZGF0YXNldC5wYXJlbnRNZXNzYWdlSWRcbiAgICBjb25zdCBmYXN0Rm9yd2FyZCA9IGNhcmQuZGF0YXNldC5mYXN0Rm9yd2FyZCA9PT0gJ3RydWUnXG4gICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdNZWxlZVRhcmdldChhY3RvcktleSwgcGFyZW50TWVzc2FnZUlkLCBmYXN0Rm9yd2FyZClcblxuICAgIHRhcmdldC5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHRhcmdldCwgY2FyZClcblxuICAgIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcbiAgICAgIHRhcmdldC5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9IGVsc2UgdGFyZ2V0Lm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIHVwZ3JhZGVSb2xsIChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIG9sZENhcmQpIHtcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGAke3RoaXMuYWN0b3IubmFtZX0gZGlkbid0IGhhdmUgZW5vdWdoIGx1Y2sgdG8gcGFzcyB0aGUgY2hlY2tgXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMucm9sbC52YWx1ZSA9IG51bGxcbiAgICB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgdGhpcy5yb2xsLmx1Y2tTcGVudCA9IHRydWVcbiAgICBvbGRDYXJkLmRhdGFzZXQucHJvY2Vzc2VkID0gZmFsc2VcblxuICAgIGNvbnN0IGRpY2VSb2xscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2Utcm9sbCcpXG4gICAgZGljZVJvbGxzLmRhdGFzZXQudmFsdWUgPSBudWxsXG4gICAgZGljZVJvbGxzLmRhdGFzZXQuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgZGljZVJvbGxzLmRhdGFzZXQubHVja1NwZW50ID0gdHJ1ZVxuXG4gICAgY29uc3QgcmVzdWxEZXRhaWxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LWRldGFpbHMnKVxuICAgIGNvbnN0IGRpY2VUb3RhbCA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBkaWNlVG90YWwuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQob2xkQ2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vZGljZS5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwsIENvQzdEYW1hZ2UgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdSYW5nZUluaXRpYXRvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIGl0ZW1JZCA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLml0ZW1JZCA9IGl0ZW1JZFxuICAgIHRoaXMuZmFzdEZvcndhcmQgPSBmYXN0Rm9yd2FyZFxuICAgIHRoaXMucmVzb2x2ZWQgPSBmYWxzZVxuICAgIHRoaXMuY292ZXIgPSBmYWxzZVxuICAgIHRoaXMuc3VycHJpc2VkID0gZmFsc2VcbiAgICB0aGlzLmF1dG9TdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLmFkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5kaXNhZHZhbnRhZ2UgPSBmYWxzZVxuICAgIHRoaXMubWVzc2FnZUlkID0gbnVsbFxuICAgIHRoaXMudGFyZ2V0Q2FyZCA9IG51bGxcbiAgICB0aGlzLnJvbGxlZCA9IGZhbHNlXG4gICAgdGhpcy5zaW5nbGVTaG90ID0gZmFsc2VcbiAgICB0aGlzLm11bHRpcGxlU2hvdHMgPSBmYWxzZVxuICAgIHRoaXMuYnVyc3QgPSBmYWxzZVxuICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgIHRoaXMudG9rZW5LZXkgPSBudWxsXG4gICAgdGhpcy5haW1lZCA9IGZhbHNlXG4gICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9IDBcbiAgICB0aGlzLl90YXJnZXRzID0gW11cbiAgICBmb3IgKGNvbnN0IHQgb2YgWy4uLmdhbWUudXNlci50YXJnZXRzXSkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdSYW5nZVRhcmdldChgJHt0LnNjZW5lLmlkfS4ke3QuaWR9YCkgLy9cbiAgICAgIHRhcmdldC50b2tlbiA9IHRcbiAgICAgIHRoaXMuX3RhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuICAgIGlmICh0aGlzLl90YXJnZXRzLmxlbmd0aCkgdGhpcy5fdGFyZ2V0c1swXS5hY3RpdmUgPSB0cnVlXG4gICAgZWxzZSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KClcbiAgICAgIHRhcmdldC5hY3RpdmUgPSB0cnVlXG4gICAgICB0aGlzLl90YXJnZXRzLnB1c2godGFyZ2V0KVxuICAgIH1cbiAgICBpZiAoYWN0b3JLZXkpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgdGhpcy50b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICh0aGlzLnRva2VuKSB0aGlzLnRva2VuS2V5ID0gYWN0b3IudG9rZW5LZXlcbiAgICAgIGlmIChpdGVtSWQpIHtcbiAgICAgICAgY29uc3Qgd2VhcG9uID0gYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAgICAgaWYgKHdlYXBvbikge1xuICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5zaW5nbGVTaG90KSB0aGlzLnNpbmdsZVNob3QgPSB0cnVlXG4gICAgICAgICAgZWxzZSBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYXV0bykgdGhpcy5mdWxsQXV0byA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy50b2tlbktleSkge1xuICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuX3RhcmdldHMpIHtcbiAgICAgICAgaWYgKHQudG9rZW4gJiYgdGhpcy50b2tlbikge1xuICAgICAgICAgIHQuZGlzdGFuY2UgPSBjaGF0SGVscGVyLmdldERpc3RhbmNlKHQudG9rZW4sIHRoaXMudG9rZW4pXG4gICAgICAgICAgdC5yb3VuZGVkRGlzdGFuY2UgPSBNYXRoLnJvdW5kKHQuZGlzdGFuY2UudmFsdWUgKiAxMDApIC8gMTAwXG4gICAgICAgICAgdC5kaXN0YW5jZVVuaXQgPSB0LmRpc3RhbmNlLnVuaXRcbiAgICAgICAgICBjb25zdCBkaXN0SW5ZZCA9XG4gICAgICAgICAgICBNYXRoLnJvdW5kKGNoYXRIZWxwZXIudG9ZYXJkcyh0LmRpc3RhbmNlKSAqIDEwMCkgLyAxMDBcbiAgICAgICAgICAvLyBpZiggZGlzdEluWWQpe1xuICAgICAgICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICAgICAgICB0LnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICBjb25zdCBwYlJhbmdlSW5ZZCA9XG4gICAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgLyAxNVxuICAgICAgICAgICAgaWYgKGRpc3RJbllkIDw9IHBiUmFuZ2VJbllkKSB0LnBvaW50QmxhbmtSYW5nZSA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMud2VhcG9uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy53ZWFwb24uYmFzZVJhbmdlKSB7XG4gICAgICAgICAgICAgIHQuYmFzZVJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgdC5sb25nUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICB0LmV4dHJlbWVSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIHQub3V0T2ZSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmJhc2VSYW5nZSkgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmxvbmdSYW5nZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdC5sb25nUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24ubG9uZ1JhbmdlICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5leHRyZW1lUmFuZ2VcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPiB0aGlzLndlYXBvbi5leHRyZW1lUmFuZ2UpIHQub3V0T2ZSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlKSB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAmJlxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogMlxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdC5sb25nUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogMiAmJlxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogNFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdC5leHRyZW1lUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAqIDQpIHQub3V0T2ZSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISh0LmJhc2VSYW5nZSB8fCB0LmxvbmdSYW5nZSB8fCB0LmV4dHJlbWVSYW5nZSB8fCB0Lm91dE9mUmFuZ2UpXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIH1cbiAgICAgICAgfSBlbHNlIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0IGFjdG9ySW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgd2VhcG9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtXG4gIH1cblxuICBnZXQgdGFyZ2V0cyAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRzKSB0aGlzLl90YXJnZXRzID0gW11cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0c1xuICB9XG5cbiAgZ2V0IHRhcmdldCAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0cyAmJiB0aGlzLnRhcmdldHMubGVuZ3RoKSByZXR1cm4gdGhpcy50YXJnZXRzLnBvcCgpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLmdldFdlYXBvblNraWxscyh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCBtYWluV2VhcG9uU2tpbGwgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLndlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZClcbiAgfVxuXG4gIGdldCBhdXRvV2VhcG9uU2tpbGwgKCkge1xuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMud2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5tYWluV2VhcG9uU2tpbGxcbiAgfVxuXG4gIGdldCBhdXRvRmlyZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVyc3QgfHwgdGhpcy5mdWxsQXV0b1xuICB9XG5cbiAgZ2V0IG11bHRpVGFyZ2V0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5mdWxsQXV0byB8fCB0aGlzLm11bHRpcGxlU2hvdHNcbiAgfVxuXG4gIGdldCBhaW1pbmcgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2FpbWluZykge1xuICAgICAgdGhpcy5fYWltaW5nID0gdGhpcy5hY3Rvci5nZXRBY3RvckZsYWcoJ2FpbWluZycpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9haW1pbmdcbiAgfVxuXG4gIGdldCBhY3RpdmVUYXJnZXQgKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0cy5sZW5ndGgpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldHMuZmluZCh0ID0+IHQuYWN0aXZlKVxuICB9XG5cbiAgZ2V0IHNob3RzICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9zaG90cykgdGhpcy5fc2hvdHMgPSBbXVxuICAgIHJldHVybiB0aGlzLl9zaG90c1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRTaG90UmFuayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdHMubGVuZ3RoICsgMVxuICB9XG5cbiAgZ2V0IGFjdGl2ZVRhcmdldFNob3REaWZmaWN1bHR5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5zaG90RGlmZmljdWx0eSgpXG4gIH1cblxuICBzZXQgYWltaW5nIChiKSB7XG4gICAgdGhpcy5fYWltaW5nID0gYlxuICB9XG5cbiAgZ2V0IGRpZEFueVNob3RIaXQgKCkge1xuICAgIGxldCBhbnlIaXQgPSBmYWxzZVxuICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICBhbnlIaXQgPSBhbnlIaXQgfHwgci5pc1N1Y2Nlc3NcbiAgICB9XG4gICAgcmV0dXJuIGFueUhpdFxuICB9XG5cbiAgZ2V0IHN1Y2Nlc3NmdWxIaXRzICgpIHtcbiAgICBjb25zdCBoaXRzID0gW11cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yb2xscy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzW2luZGV4XS5pc1N1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgaGl0ID0ge1xuICAgICAgICAgIHJvbGw6IHRoaXMucm9sbHNbaW5kZXhdLFxuICAgICAgICAgIHNob3Q6IHRoaXMuc2hvdHNbaW5kZXhdXG4gICAgICAgIH1cbiAgICAgICAgaGl0cy5wdXNoKGhpdClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhpdHMubGVuZ3RoICE9PSAwKSByZXR1cm4gaGl0c1xuICAgIGVsc2UgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzaG90RmlyZWQgKCkge1xuICAgIHJldHVybiB0aGlzLnNob3RzID8gdGhpcy5zaG90cy5sZW5ndGggOiAwXG4gIH1cblxuICBnZXQgdG90YWxBbW1vICgpIHtcbiAgICByZXR1cm4gdGhpcy53ZWFwb24uZ2V0QnVsbGV0TGVmdCgpXG4gIH1cblxuICBnZXQgbWF4U2hvdHMgKCkge1xuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSByZXR1cm4gJ+KInidcbiAgICAvLyByZXR1cm4gdGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5tYXg7XG5cbiAgICByZXR1cm4gdGhpcy53ZWFwb24uc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXhcbiAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXgpXG4gICAgICA6IDFcbiAgfVxuXG4gIGdldCBpZ25vcmVBbW1vICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcmVnYXJkQW1tbycpXG4gIH1cblxuICBnZXQgaWdub3JlVXNlc1BlclJvdW5kICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcmVnYXJkVXNlUGVyUm91bmQnKVxuICB9XG5cbiAgZ2V0IG91dE9mQW1tbyAoKSB7XG4gICAgaWYgKHRoaXMuaWdub3JlQW1tbykgcmV0dXJuIGZhbHNlXG4gICAgaWYgKHRoaXMudG90YWxCdWxsZXRzRmlyZWQgPj0gdGhpcy53ZWFwb24uZ2V0QnVsbGV0TGVmdCgpKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IG91dE9mU2hvdHMgKCkge1xuICAgIGlmICh0aGlzLmlnbm9yZVVzZXNQZXJSb3VuZCkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKHRoaXMuc2hvdHMpIHJldHVybiB0aGlzLnNob3RzLmxlbmd0aCA+PSB0aGlzLm1heFNob3RzXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgdm9sbGV5U2l6ZSAoKSB7XG4gICAgaWYgKCF0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hdXRvKSByZXR1cm4gMVxuICAgIGlmICh0aGlzLl92b2xsZXlTaXplKSByZXR1cm4gdGhpcy5fdm9sbGV5U2l6ZVxuICAgIGNvbnN0IHNpemUgPSBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApXG4gICAgcmV0dXJuIHNpemUgPCAzID8gMyA6IHNpemVcbiAgfVxuXG4gIHNldCB2b2xsZXlTaXplICh4KSB7XG4gICAgaWYgKHggPj0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKSkge1xuICAgICAgdGhpcy5fdm9sbGV5U2l6ZSA9IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICB9IGVsc2UgaWYgKHggPD0gMykge1xuICAgICAgdGhpcy5fdm9sbGV5U2l6ZSA9IDNcbiAgICB9XG4gICAgdGhpcy5fdm9sbGV5U2l6ZSA9IHBhcnNlSW50KHgpXG4gIH1cblxuICBnZXQgaXNWb2xsZXlNaW5TaXplICgpIHtcbiAgICBpZiAodGhpcy52b2xsZXlTaXplID09PSAzKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzVm9sbGV5TWF4U2l6ZSAoKSB7XG4gICAgY29uc3QgbWF4U2l6ZSA9XG4gICAgICBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApIDwgM1xuICAgICAgICA/IDNcbiAgICAgICAgOiBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApXG4gICAgaWYgKG1heFNpemUgPT09IHRoaXMudm9sbGV5U2l6ZSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldFRhcmdldEZyb21LZXkgKGtleSkge1xuICAgIHJldHVybiB0aGlzLl90YXJnZXRzLmZpbmQodCA9PiBrZXkgPT09IHQuYWN0b3JLZXkpXG4gIH1cblxuICBjYWxjVGFyZ2V0c0RpZmZpY3VsdHkgKCkge1xuICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLnRhcmdldHMpIHtcbiAgICAgIHQuc2hvdERpZmZpY3VsdHkgPSB0aGlzLnNob3REaWZmaWN1bHR5KHQpXG4gICAgfVxuICB9XG5cbiAgc2hvdERpZmZpY3VsdHkgKHQgPSBudWxsKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdCB8fCB0aGlzLmFjdGl2ZVRhcmdldFxuICAgIGxldCBkYW1hZ2UgPSB0aGlzLndlYXBvbi5zeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZVxuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuKSB7XG4gICAgICBpZiAodC5sb25nUmFuZ2UpIGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5sb25nLmRhbWFnZVxuICAgICAgaWYgKHQuZXh0cmVtZVJhbmdlKSBkYW1hZ2UgPSB0aGlzLndlYXBvbi5zeXN0ZW0ucmFuZ2UuZXh0cmVtZS5kYW1hZ2VcbiAgICB9XG4gICAgbGV0IG1vZGlmaWVyID0gdGFyZ2V0Lm1vZGlmaWVyXG4gICAgbGV0IGRpZmZpY3VsdHlcbiAgICB0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuXG4gICAgICA/IChkaWZmaWN1bHR5ID0gMSlcbiAgICAgIDogKGRpZmZpY3VsdHkgPSB0YXJnZXQuZGlmZmljdWx0eSlcbiAgICBsZXQgZGlmZmljdWx0eU5hbWUgPSAnJ1xuICAgIGlmICh0aGlzLmFpbWluZyAmJiB0aGlzLmN1cnJlbnRTaG90UmFuayA9PT0gMSkgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmFkdmFudGFnZSkgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmRpc2FkdmFudGFnZSkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnJlbG9hZCkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLm11bHRpcGxlU2hvdHMgJiYgIXRoaXMuZnVsbEF1dG8pIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5mdWxsQXV0bykgbW9kaWZpZXIgLT0gdGhpcy5jdXJyZW50U2hvdFJhbmsgLSAxXG4gICAgaWYgKG1vZGlmaWVyIDwgLTIpIHtcbiAgICAgIGNvbnN0IGV4Y2VzcyA9IE1hdGguYWJzKG1vZGlmaWVyICsgMilcbiAgICAgIGRpZmZpY3VsdHkgKz0gZXhjZXNzXG4gICAgICBpZiAoZGlmZmljdWx0eSA+IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwpIHtcbiAgICAgICAgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgICAgfVxuICAgICAgbW9kaWZpZXIgPSAtMlxuICAgIH1cblxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ1JlZ3VsYXInXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgPT09IGRpZmZpY3VsdHkpIGRpZmZpY3VsdHlOYW1lID0gJ0hhcmQnXG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnRXh0cmVtZSdcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ0NyaXRpY2FsJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlID09PSBkaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5TmFtZSA9ICdJbXBvc3NpYmxlJ1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBsZXZlbDogZGlmZmljdWx0eSxcbiAgICAgIG5hbWU6IGRpZmZpY3VsdHlOYW1lLFxuICAgICAgbW9kaWZpZXIsXG4gICAgICBkYW1hZ2UsXG4gICAgICBpbXBvc3NpYmxlOiBkaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvb3QgYXQgdGhlIGFjdGl2ZSB0YXJnZXQuIEFkZCBpdCB0byB0aGUgbGlzdCBvZiBzaG90cy5cbiAgICogVE9ETyA6IHJlY2FsY3VsZXIgbGEgZGlmZmljdWx0w6kgZGUgdG91cyBsZXMgc2hvdHMgIS5cbiAgICovXG4gIGFkZFNob3RBdEN1cnJlbnRUYXJnZXQgKCkge1xuICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICBjb25zdCBzaG90ID0ge1xuICAgICAgdGFyZ2V0OiB0aGlzLmFjdGl2ZVRhcmdldCxcbiAgICAgIGV4dHJlbWVSYW5nZTogdGhpcy5hY3RpdmVUYXJnZXQuZXh0cmVtZVJhbmdlLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0aXZlVGFyZ2V0LmFjdG9yS2V5LFxuICAgICAgYWN0b3JOYW1lOiB0aGlzLmFjdGl2ZVRhcmdldC5uYW1lLFxuICAgICAgZGlmZmljdWx0eTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWwsXG4gICAgICBtb2RpZmllcjogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubW9kaWZpZXIsXG4gICAgICBkYW1hZ2U6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmRhbWFnZSxcbiAgICAgIGJ1bGxldHNTaG90OiAxLFxuICAgICAgdHJhbnNpdEJ1bGxldHM6IDAsXG4gICAgICBidWxsZXRzU2hvdFRyYW5zaXQ6IDEsXG4gICAgICB0cmFuc2l0OiBmYWxzZVxuICAgIH1cblxuICAgIGxldCBidWxsZXRMZWZ0ID0gdGhpcy50b3RhbEFtbW8gLSB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkXG5cbiAgICBpZiAodGhpcy5mdWxsQXV0bykge1xuICAgICAgaWYgKHRoaXMuY3VycmVudFNob3RSYW5rID4gMSkge1xuICAgICAgICBjb25zdCBwcmV2aW91c1Nob3QgPSB0aGlzLnNob3RzW3RoaXMuY3VycmVudFNob3RSYW5rIC0gMl1cbiAgICAgICAgaWYgKHByZXZpb3VzU2hvdC5hY3RvcktleSAhPT0gdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXkpIHtcbiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGNoYXRIZWxwZXIuZ2V0RGlzdGFuY2UoXG4gICAgICAgICAgICBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShwcmV2aW91c1Nob3QuYWN0b3JLZXkpLFxuICAgICAgICAgICAgY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXkpXG4gICAgICAgICAgKVxuICAgICAgICAgIHNob3QudHJhbnNpdEJ1bGxldHMgPSBNYXRoLmZsb29yKGNoYXRIZWxwZXIudG9ZYXJkcyhkaXN0YW5jZSkpXG4gICAgICAgICAgaWYgKHNob3QudHJhbnNpdEJ1bGxldHMgPj0gYnVsbGV0TGVmdCAmJiAhdGhpcy5pZ25vcmVBbW1vKSB7XG4gICAgICAgICAgICBzaG90LnRyYW5zaXRCdWxsZXRzID0gYnVsbGV0TGVmdFxuICAgICAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9XG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkKSArIHNob3QudHJhbnNpdEJ1bGxldHNcbiAgICAgICAgICBzaG90LnRyYW5zaXQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSB0aGlzLnZvbGxleVNpemVcbiAgICAgIGlmIChzaG90LmJ1bGxldHNTaG90IDw9IDMpIHNob3QuYnVsbGV0c1Nob3QgPSAzXG4gICAgICBpZiAoc2hvdC5idWxsZXRzU2hvdCA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IGJ1bGxldExlZnRcbiAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgIH1cbiAgICAgIC8vIGJ1bGxldHNTaG90VHJhbnNpdCBpcyBmb3IgbG9jYWxpemluZyBDb0M3LlNob3RCdWxsZXRzIHVzaW5nIHBhcmFtZXRlcnMsIGxvY2FsaXplIGRvZXMgbm90IGFjY2VwdCBhZGRpbmcgYSBwYXJhbWV0ZXIgYXMgYSBzdW0gb2Ygc2hvdC5idWxsZXRzU2hvdCArIHNob3QudHJhbnNpdEJ1bGxldHMsIHNvIEkgY3JlYXRlIGEgbmV3IHZhbHVlIGluIGFkdmFuY2UgdG8gdXNlIGluc3RlYWRcbiAgICAgIHNob3QuYnVsbGV0c1Nob3RUcmFuc2l0ID0gc2hvdC5idWxsZXRzU2hvdCArIHNob3QudHJhbnNpdEJ1bGxldHNcbiAgICB9XG4gICAgaWYgKHRoaXMuYnVyc3QpIHtcbiAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0KVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgIDogMVxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPj0gYnVsbGV0TGVmdCAmJiAhdGhpcy5pZ25vcmVBbW1vKSB7XG4gICAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSBidWxsZXRMZWZ0XG4gICAgICAgIGJ1bGxldExlZnQgPSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9IHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgc2hvdC5idWxsZXRzU2hvdFxuXG4gICAgaWYgKHRoaXMuYWltaW5nKSB7XG4gICAgICB0aGlzLmFpbWluZyA9IGZhbHNlXG4gICAgICB0aGlzLmFpbWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuc2hvdHMucHVzaChzaG90KVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvcmFuZ2UtaW5pdGlhdG9yLmh0bWwnXG4gIH1cblxuICBhc3luYyBjcmVhdGVDaGF0Q2FyZCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgLy8gY29uc3QgZWxlbWVudCA9ICQoaHRtbClbMF07XG4gICAgLy8gY29uc3QgdGFyZ2V0RWxlbWVudCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRhcmdldFRlc3QnKTtcbiAgICAvLyB0aGlzLnRhcmdldC5hdHRhY2hUb0VsZW1lbnQodGFyZ2V0RWxlbWVudCk7XG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAodG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdG9rZW4uZG9jdW1lbnRcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgLy8gaWYoIHRoaXMuYWN0b3IuaXNUb2tlbikgc3BlYWtlci5hbGlhcyA9IHRoaXMuYWN0b3IudG9rZW4ubmFtZTtcblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIGNvbnN0IHJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhyb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHJvbGxNb2RlID09PSAnYmxpbmRyb2xsJyApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZyA9IGZsYWdOYW1lLmluY2x1ZGVzKCctJylcbiAgICAgID8gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnTmFtZSlcbiAgICAgIDogZmxhZ05hbWVcbiAgICBpZiAoXG4gICAgICBmbGFnID09PSAnc2luZ2xlU2hvdCcgfHxcbiAgICAgIGZsYWcgPT09ICdtdWx0aXBsZVNob3RzJyB8fFxuICAgICAgZmxhZyA9PT0gJ2Z1bGxBdXRvJ1xuICAgICkge1xuICAgICAgdGhpcy5zaW5nbGVTaG90ID0gZmFsc2VcbiAgICAgIHRoaXMubXVsdGlwbGVTaG90cyA9IGZhbHNlXG4gICAgICB0aGlzLmZ1bGxBdXRvID0gZmFsc2VcbiAgICAgIGlmIChmbGFnID09PSAnZnVsbEF1dG8nKSB0aGlzLmJ1cnN0ID0gZmFsc2VcbiAgICAgIHRoaXNbZmxhZ10gPSB0cnVlXG4gICAgfSBlbHNlIGlmIChmbGFnID09PSAnYnVyc3QnKSB7XG4gICAgICB0aGlzLmZ1bGxBdXRvID0gZmFsc2VcbiAgICAgIGlmICghdGhpcy5zaW5nbGVTaG90ICYmICF0aGlzLm11bHRpcGxlU2hvdHMpIHRoaXMuc2luZ2xlU2hvdCA9IHRydWVcbiAgICAgIHRoaXMuYnVyc3QgPSAhdGhpcy5idXJzdFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgICB9XG4gIH1cblxuICBhc3luYyByZXNvbHZlQ2FyZCAoKSB7XG4gICAgdGhpcy5yb2xscyA9IFtdXG4gICAgaWYgKHRoaXMubXVsdGlUYXJnZXQpIHtcbiAgICAgIGxldCB3ZWFwb25NYWxmdW5jdGlvbiA9IGZhbHNlXG4gICAgICBsZXQgaW5kZXggPSAwXG4gICAgICB3aGlsZSAoIXdlYXBvbk1hbGZ1bmN0aW9uICYmIHRoaXMuc2hvdHMubGVuZ3RoID4gaW5kZXgpIHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IHRoaXMuc2hvb3RBdFRhcmdldCh0aGlzLnNob3RzW2luZGV4XSlcbiAgICAgICAgaWYgKHJvbGwuZGljZT8ucm9sbCkge1xuICAgICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwuZGljZS5yb2xsKVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMud2VhcG9uLnNob290QnVsbGV0cyhcbiAgICAgICAgICBwYXJzZUludCh0aGlzLnNob3RzW2luZGV4XS5idWxsZXRzU2hvdCkgK1xuICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5zaG90c1tpbmRleF0udHJhbnNpdEJ1bGxldHMpXG4gICAgICAgIClcbiAgICAgICAgaWYgKHJvbGwuaGFzTWFsZnVuY3Rpb24pIHtcbiAgICAgICAgICByb2xsLmlzU3VjY2VzcyA9IGZhbHNlXG4gICAgICAgICAgd2VhcG9uTWFsZnVuY3Rpb24gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaW5kZXgrK1xuICAgICAgICB0aGlzLnJvbGxzLnB1c2gocm9sbClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IHRoaXMuc2hvb3RBdFRhcmdldCgpXG4gICAgICBpZiAocm9sbC5kaWNlPy5yb2xsKSB7XG4gICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwuZGljZS5yb2xsKVxuICAgICAgfVxuICAgICAgbGV0IGJ1bGxldEZpcmVkID0gdGhpcy5idXJzdFxuICAgICAgICA/IHBhcnNlSW50KHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgIDogMVxuICAgICAgaWYgKGJ1bGxldEZpcmVkID49IHRoaXMudG90YWxBbW1vKSBidWxsZXRGaXJlZCA9IHRoaXMudG90YWxBbW1vXG4gICAgICBjb25zdCBzaG90ID0ge1xuICAgICAgICB0YXJnZXQ6IHRoaXMuYWN0aXZlVGFyZ2V0LFxuICAgICAgICBleHRyZW1lUmFuZ2U6IHRoaXMuYWN0aXZlVGFyZ2V0LmV4dHJlbWVSYW5nZSxcbiAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0aXZlVGFyZ2V0LmFjdG9yS2V5LFxuICAgICAgICBhY3Rvck5hbWU6IHRoaXMuYWN0aXZlVGFyZ2V0Lm5hbWUsXG4gICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmxldmVsLFxuICAgICAgICBtb2RpZmllcjogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubW9kaWZpZXIsXG4gICAgICAgIGRhbWFnZTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkuZGFtYWdlLFxuICAgICAgICBidWxsZXRzU2hvdDogYnVsbGV0RmlyZWQsXG4gICAgICAgIHRyYW5zaXRCdWxsZXRzOiAwLFxuICAgICAgICB0cmFuc2l0OiBmYWxzZVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy53ZWFwb24uc2hvb3RCdWxsZXRzKGJ1bGxldEZpcmVkKVxuXG4gICAgICBpZiAocm9sbC5oYXNNYWxmdW5jdGlvbikge1xuICAgICAgICByb2xsLmlzU3VjY2VzcyA9IGZhbHNlXG4gICAgICB9XG4gICAgICB0aGlzLnNob3RzLnB1c2goc2hvdClcbiAgICAgIHRoaXMucm9sbHMucHVzaChyb2xsKVxuICAgIH1cbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBzaG9vdEF0VGFyZ2V0IChzaG90ID0gbnVsbCkge1xuICAgIGNvbnN0IHRhcmdldCA9IHNob3RcbiAgICAgID8gdGhpcy5nZXRUYXJnZXRGcm9tS2V5KHNob3QuYWN0b3JLZXkpXG4gICAgICA6IHRoaXMuYWN0aXZlVGFyZ2V0XG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBjaGVjay5hY3RvcktleSA9IHRoaXMuYWN0b3JLZXlcbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICAvLyBDb21iYXQgcm9sbCBjYW5ub3QgYmUgYmxpbmQgb3IgdW5rbm93blxuICAgIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGNoZWNrLmlzVW5rb253biA9IGZhbHNlXG4gICAgaWYgKHRoaXMuYXV0b0ZpcmUpIGNoZWNrLnNraWxsID0gdGhpcy5hdXRvV2VhcG9uU2tpbGxcbiAgICBlbHNlIGNoZWNrLnNraWxsID0gdGhpcy5tYWluV2VhcG9uU2tpbGxcbiAgICBpZiAodGhpcy5tdWx0aVRhcmdldCkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IHNob3QuZGlmZmljdWx0eVxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gc2hvdC5tb2RpZmllclxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNhbGNUYXJnZXRzRGlmZmljdWx0eSgpXG4gICAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gcGFyc2VJbnQodGhpcy50b3RhbEJ1bGxldHNGaXJlZCkgKyAxXG4gICAgICBpZiAodGhpcy5haW1pbmcpIHtcbiAgICAgICAgdGhpcy5haW1pbmcgPSBmYWxzZVxuICAgICAgICB0aGlzLmFpbWVkID0gdHJ1ZVxuICAgICAgfVxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmxldmVsXG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllclxuICAgIH1cblxuICAgIGNoZWNrLmRldGFpbHMgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVGFyZ2V0Jyl9OiAke3RhcmdldC5uYW1lfWBcbiAgICBjaGVjay50YXJnZXRLZXkgPSB0YXJnZXQuYWN0b3JLZXlcblxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGNhcmQgPSAkKG1lc3NhZ2UuY29udGVudClbMF1cblxuICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkLCBtZXNzYWdlSWQpXG4gICAgaW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuXG4gICAgcmV0dXJuIGluaXRpYXRvclxuICB9XG5cbiAgY2hhbmdlVm9sbGV5U2l6ZSAoeCkge1xuICAgIHRoaXMudm9sbGV5U2l6ZSA9IHRoaXMudm9sbGV5U2l6ZSArIHhcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcucmFuZ2UuaW5pdGlhdG9yJylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQtZmxhZycpKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldCcpXG4gICAgICAgIGNvbnN0IGtleSA9IHBhcnNlSW50KHRhcmdldC5kYXRhc2V0LnRhcmdldEtleSlcbiAgICAgICAgaW5pdGlhdG9yLnRhcmdldHNba2V5XS50b2dnbGVGbGFnKGNhbWVsRmxhZylcbiAgICAgIH0gZWxzZSBpbml0aWF0b3IudG9nZ2xlRmxhZyhjYW1lbEZsYWcpXG4gICAgICBpbml0aWF0b3IudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIHBhc3NSb2xsIChyb2xsSW5kZXgpIHtcbiAgICBjb25zdCByb2xsID0gdGhpcy5yb2xsc1tyb2xsSW5kZXhdXG4gICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KHJvbGwubHVja05lZWRlZClcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgJHt0aGlzLmFjdG9yLm5hbWV9IGRvZXMgbm90IGhhdmUgZW5vdWdoIGx1Y2sgdG8gcGFzcyB0aGUgY2hlY2tgXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgcm9sbC5zdWNjZXNzTGV2ZWwgPSByb2xsLmRpZmZpY3VsdHlcbiAgICByb2xsLmlzU3VjY2VzcyA9IHRydWVcbiAgICByb2xsLmx1Y2tTcGVudCA9IHRydWVcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHVwZ3JhZGVSb2xsIChyb2xsSW5kZXgsIHVwZ3JhZGVpbmRleCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgY29uc3Qgcm9sbCA9IHRoaXMucm9sbHNbcm9sbEluZGV4XVxuICAgIGNvbnN0IGluY3JlYXNlZFN1Y2Nlc3MgPSByb2xsLmluY3JlYXNlU3VjY2Vzc1t1cGdyYWRlaW5kZXhdXG4gICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubHVja0Ftb3VudClcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgJHt0aGlzLmFjdG9yLm5hbWV9IGRvZXMgbm90IGhhdmUgZW5vdWdoIGx1Y2sgdG8gcGFzcyB0aGUgY2hlY2tgXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID0gcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5uZXdTdWNjZXNzTGV2ZWwpXG4gICAgcm9sbC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBpZiAocm9sbC5kaWZmaWN1bHR5IDw9IG5ld1N1Y2Nlc3NMZXZlbCkgcm9sbC5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgcm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQsIG1lc3NhZ2VJZCA9IG51bGwpIHtcbiAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IoKVxuICAgIHJhbmdlSW5pdGlhdG9yLl90YXJnZXRzID0gW11cbiAgICBpZiAobWVzc2FnZUlkKSByYW5nZUluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICBlbHNlIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcbiAgICAgIHJhbmdlSW5pdGlhdG9yLm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIH1cblxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocmFuZ2VJbml0aWF0b3IsIGNhcmQpXG4gICAgY29uc3QgY2FyZFRhcmdldHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJnZXQnKVxuICAgIGZvciAoY29uc3QgdCBvZiBjYXJkVGFyZ2V0cykge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN1JhbmdlVGFyZ2V0LmdldEZyb21FbGVtZW50KHQpXG4gICAgICByYW5nZUluaXRpYXRvci50YXJnZXRzLnB1c2godGFyZ2V0KVxuICAgIH1cblxuICAgIGNvbnN0IGNhcmRTaG90cyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLnNob3QnKVxuICAgIGlmIChjYXJkU2hvdHMpIHtcbiAgICAgIGZvciAoY29uc3QgcyBvZiBjYXJkU2hvdHMpIHtcbiAgICAgICAgY29uc3Qgc2hvdCA9IHt9XG4gICAgICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoc2hvdCwgcylcbiAgICAgICAgcmFuZ2VJbml0aWF0b3Iuc2hvdHMucHVzaChzaG90KVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBlbHNlIHtcbiAgICAvLyAgY29uc3Qgc2hvdCA9IHtcbiAgICAvLyAgICAgIHNob3RPcmRlcjogMCxcbiAgICAvLyAgICAgIGFjdG9yS2V5OiBudWxsLFxuICAgIC8vICAgICAgYWN0b3JOYW1lOiAnZHVtbXknXG4gICAgLy8gIH1cbiAgICAvLyB9XG5cbiAgICByYW5nZUluaXRpYXRvci5yb2xscyA9IFtdXG4gICAgY29uc3Qgcm9sbHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb2xsLXJlc3VsdCcpXG4gICAgZm9yIChjb25zdCByIG9mIHJvbGxzKSB7XG4gICAgICBjb25zdCByb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUVsZW1lbnQocilcbiAgICAgIHJhbmdlSW5pdGlhdG9yLnJvbGxzLnB1c2gocm9sbClcbiAgICB9XG5cbiAgICByYW5nZUluaXRpYXRvci5kYW1hZ2UgPSBbXVxuICAgIGNvbnN0IGRhbWFnZVJvbGxzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuZGFtYWdlLXJlc3VsdHMnKVxuICAgIGZvciAoY29uc3QgZHIgb2YgZGFtYWdlUm9sbHMpIHtcbiAgICAgIGNvbnN0IGRhbWFnZVJvbGwgPSBDb0M3RGFtYWdlLmdldEZyb21FbGVtZW50KGRyKVxuICAgICAgcmFuZ2VJbml0aWF0b3IuZGFtYWdlLnB1c2goZGFtYWdlUm9sbClcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2VJbml0aWF0b3JcbiAgfVxuXG4gIGFzeW5jIHJvbGxEYW1hZ2UgKCkge1xuICAgIHRoaXMuZGFtYWdlID0gW11cbiAgICBjb25zdCBoaXRzID0gdGhpcy5zdWNjZXNzZnVsSGl0c1xuXG4gICAgLy8gbGV0IHZvbGxleVNpemUgPSAxO1xuICAgIC8vIGlmKCB0aGlzLmZ1bGxBdXRvKSB7XG4gICAgLy8gIHZvbGxleVNpemUgPSB0aGlzLnZvbGxleVNpemU7XG4gICAgLy8gIGlmKHZvbGxleVNpemUgPCAzKSB2b2xsZXlTaXplID0gMztcbiAgICAvLyB9XG4gICAgLy8gaWYoIHRoaXMuYnVyc3QpIHZvbGxleVNpemUgPSBwYXJzZUludCh0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLmJ1cnN0KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGggPSBoaXRzW2ldXG4gICAgICBjb25zdCB2b2xsZXlTaXplID0gcGFyc2VJbnQoaC5zaG90LmJ1bGxldHNTaG90KVxuICAgICAgY29uc3QgZGFtYWdlUm9sbHMgPSBbXVxuXG4gICAgICBpZiAodm9sbGV5U2l6ZSA+IDApIHtcbiAgICAgICAgbGV0IGRhbWFnZUZvcm11bGEgPSBTdHJpbmcoaC5zaG90LmRhbWFnZSlcbiAgICAgICAgaWYgKCFkYW1hZ2VGb3JtdWxhIHx8IGRhbWFnZUZvcm11bGEgPT09ICcnKSBkYW1hZ2VGb3JtdWxhID0gJzAnXG4gICAgICAgIGNvbnN0IGRhbWFnZURpZSA9IENvQzdEYW1hZ2UuZ2V0TWFpbkRpZShkYW1hZ2VGb3JtdWxhKVxuICAgICAgICBjb25zdCBtYXhEYW1hZ2UgPSBuZXcgUm9sbChkYW1hZ2VGb3JtdWxhKS5ldmFsdWF0ZSh7XG4gICAgICAgICAgbWF4aW1pemU6IHRydWVcbiAgICAgICAgfSkudG90YWxcbiAgICAgICAgY29uc3QgY3JpdGljYWxEYW1hZ2VGb3JtdWxhID0gdGhpcy53ZWFwb24uaW1wYWxlXG4gICAgICAgICAgPyBgJHtkYW1hZ2VGb3JtdWxhfSArICR7bWF4RGFtYWdlfWBcbiAgICAgICAgICA6IGAke21heERhbWFnZX1gXG4gICAgICAgIGNvbnN0IGNyaXRpY2FsRGFtYWdlRGllID0gQ29DN0RhbWFnZS5nZXRNYWluRGllKGNyaXRpY2FsRGFtYWdlRm9ybXVsYSlcblxuICAgICAgICBsZXQgaW1wYWxpbmdTaG90cyA9IDBcbiAgICAgICAgbGV0IHN1Y2Nlc3NmdWxTaG90cyA9IDBcbiAgICAgICAgbGV0IGNyaXRpY2FsID0gZmFsc2VcbiAgICAgICAgaWYgKHRoaXMuZnVsbEF1dG8gfHwgdGhpcy5idXJzdCkge1xuICAgICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IE1hdGguZmxvb3Iodm9sbGV5U2l6ZSAvIDIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Y2Nlc3NmdWxTaG90cyA9PT0gMCkgc3VjY2Vzc2Z1bFNob3RzID0gMVxuICAgICAgICBpZiAoaC5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgICBpbXBhbGluZ1Nob3RzID0gc3VjY2Vzc2Z1bFNob3RzXG4gICAgICAgICAgc3VjY2Vzc2Z1bFNob3RzID0gdm9sbGV5U2l6ZSAtIGltcGFsaW5nU2hvdHNcbiAgICAgICAgICBjcml0aWNhbCA9IHRydWVcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsICE9PSBoLnJvbGwuc3VjY2Vzc0xldmVsICYmXG4gICAgICAgICAgICAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lIDw9IGgucm9sbC5kaWZmaWN1bHR5IHx8XG4gICAgICAgICAgICAgIGguc2hvdC5leHRyZW1lUmFuZ2UpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzdWNjZXNzZnVsU2hvdHMgPSB2b2xsZXlTaXplXG4gICAgICAgICAgICBpbXBhbGluZ1Nob3RzID0gMFxuICAgICAgICAgICAgY3JpdGljYWwgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHN1Y2Nlc3NmdWxTaG90czsgaW5kZXgrKykge1xuICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChkYW1hZ2VGb3JtdWxhKVxuICAgICAgICAgIC8qKiBNT0RJRiAwLjgueCAqKi9cbiAgICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsKVxuICAgICAgICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICAgICAgICBkYW1hZ2VSb2xscy5wdXNoKHtcbiAgICAgICAgICAgIGZvcm11bGE6IGRhbWFnZUZvcm11bGEsXG4gICAgICAgICAgICB0b3RhbDogcm9sbC50b3RhbCxcbiAgICAgICAgICAgIGRpZTogZGFtYWdlRGllLFxuICAgICAgICAgICAgY3JpdGljYWw6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0b3RhbCArPSByb2xsLnRvdGFsXG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGltcGFsaW5nU2hvdHM7IGluZGV4KyspIHtcbiAgICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoY3JpdGljYWxEYW1hZ2VGb3JtdWxhKVxuICAgICAgICAgIC8qKiBNT0RJRiAwLjgueCAqKi9cbiAgICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsKVxuICAgICAgICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICAgICAgICBkYW1hZ2VSb2xscy5wdXNoKHtcbiAgICAgICAgICAgIGZvcm11bGE6IGNyaXRpY2FsRGFtYWdlRm9ybXVsYSxcbiAgICAgICAgICAgIHRvdGFsOiByb2xsLnRvdGFsLFxuICAgICAgICAgICAgZGllOiBjcml0aWNhbERhbWFnZURpZSxcbiAgICAgICAgICAgIGNyaXRpY2FsOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0b3RhbCArPSByb2xsLnRvdGFsXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGFyZ2V0TmFtZSA9ICdkdW1teSdcbiAgICAgICAgbGV0IHRhcmdldCA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGgucm9sbC50YXJnZXRLZXkpXG4gICAgICAgIGlmICghdGFyZ2V0KSB0YXJnZXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShoLnJvbGwudGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgaWYgKHRhcmdldCkgdGFyZ2V0TmFtZSA9IHRhcmdldC5uYW1lXG5cbiAgICAgICAgdGhpcy5kYW1hZ2UucHVzaCh7XG4gICAgICAgICAgdGFyZ2V0S2V5OiBoLnJvbGwudGFyZ2V0S2V5LFxuICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgcm9sbHM6IGRhbWFnZVJvbGxzLFxuICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgIGNyaXRpY2FsLFxuICAgICAgICAgIGRlYWx0OiBmYWxzZSxcbiAgICAgICAgICByZXN1bHRTdHJpbmc6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcucmFuZ2VDb21iYXREYW1hZ2UnLCB7XG4gICAgICAgICAgICBuYW1lOiB0YXJnZXROYW1lLFxuICAgICAgICAgICAgdG90YWxcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGFtYWdlUm9sbGVkID0gdGhpcy5kYW1hZ2UubGVuZ3RoICE9PSAwXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlICgpIHtcbiAgICBmb3IgKGxldCBkSW5kZXggPSAwOyBkSW5kZXggPCB0aGlzLmRhbWFnZS5sZW5ndGg7IGRJbmRleCsrKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGFtYWdlW2RJbmRleF0udGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChhY3RvciA9PT0gbnVsbCkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1RhcmdldFRvRGFtYWdlJykpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4gPSAwXG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZCA9IDBcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgckluZGV4ID0gMDtcbiAgICAgICAgICBySW5kZXggPCB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzLmxlbmd0aDtcbiAgICAgICAgICBySW5kZXgrK1xuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBkZWFsdEFtb3VudCA9IGF3YWl0IGFjdG9yLmRlYWxEYW1hZ2UoXG4gICAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udG90YWxcbiAgICAgICAgICApXG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbFRha2VuICs9IGRlYWx0QW1vdW50XG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRha2VuID0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0uYWJzb3JiZWQgPVxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRvdGFsIC0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsQWJzb3JiZWQgKz1cbiAgICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50b3RhbCAtIGRlYWx0QW1vdW50XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5kZWFsdCA9IHRydWVcbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LnJhbmdlQ29tYmF0RGFtYWdlQXJtb3InLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGFtYWdlW2RJbmRleF0udGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4sXG4gICAgICAgICAgICBhcm1vcjogdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbEFic29yYmVkXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZGFtYWdlRGVhbHQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdSYW5nZVRhcmdldCB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLmNvdmVyID0gZmFsc2VcbiAgICB0aGlzLnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgdGhpcy5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgdGhpcy5sb25nUmFuZ2UgPSBmYWxzZVxuICAgIHRoaXMuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICB0aGlzLmluTWVsZWUgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGJpZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYmlnKSB7XG4gICAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLmJ1aWxkKSB0aGlzLl9iaWcgPSB0aGlzLmFjdG9yLmJ1aWxkID49IDRcbiAgICAgIGVsc2UgdGhpcy5fYmlnID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2JpZ1xuICB9XG5cbiAgc2V0IGJpZyAoYikge1xuICAgIHRoaXMuX2JpZyA9IGJcbiAgfVxuXG4gIGdldCBzbWFsbCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fc21hbGwpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IuYnVpbGQpIHRoaXMuX3NtYWxsID0gdGhpcy5hY3Rvci5idWlsZCA8PSAtMlxuICAgICAgZWxzZSB0aGlzLl9zbWFsbCA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zbWFsbFxuICB9XG5cbiAgc2V0IHNtYWxsIChiKSB7XG4gICAgdGhpcy5fc21hbGwgPSBiXG4gIH1cblxuICBnZXQgbm9ybWFsICgpIHtcbiAgICByZXR1cm4gIXRoaXMuYmlnICYmICF0aGlzLnNtYWxsXG4gIH1cblxuICBzZXQgbm9ybWFsIChiKSB7XG4gICAgdGhpcy5fYmlnID0gZmFsc2VcbiAgICB0aGlzLl9zbWFsbCA9IGZhbHNlXG4gIH1cblxuICBnZXQgaXNGYXN0ICgpIHtcbiAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLm1vdikgcmV0dXJuIHRoaXMuYWN0b3IubW92ID49IDhcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBmYXN0ICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9mYXN0KSB7XG4gICAgICAvLyBpZiggdGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLm1vdikgdGhpcy5fZmFzdCA9IHRoaXMuYWN0b3IubW92ID49IDg7XG4gICAgICAvLyBlbHNlIHRoaXMuX2Zhc3QgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2Zhc3QgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZmFzdFxuICB9XG5cbiAgc2V0IGZhc3QgKGIpIHtcbiAgICB0aGlzLl9mYXN0ID0gYlxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcktleSAmJiAhdGhpcy5fYWN0b3IpIHtcbiAgICAgIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgaWYgKHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLm5hbWVcbiAgICByZXR1cm4gJ0R1bW15J1xuICB9XG5cbiAgZ2V0IGltZyAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgIGlmICh0aGlzLnRva2VuLmRvY3VtZW50Py50ZXh0dXJlLnNyYykge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbi5kb2N1bWVudD8udGV4dHVyZS5zcmNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLmRhdGEuaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3Rva2VuICYmIHRoaXMuYWN0b3JLZXkpIHtcbiAgICAgIHRoaXMuX3Rva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Rva2VuXG4gIH1cblxuICBnZXQgc2l6ZVRleHQgKCkge1xuICAgIGlmICh0aGlzLmJpZykge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuQmlnVGFyZ2V0VGl0bGUnKVxuICAgIH1cbiAgICBpZiAodGhpcy5zbWFsbCkge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuU21hbGxUYXJnZXRUaXRsZScpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLk5vcm1hbFRhcmdldFRpdGxlJylcbiAgfVxuXG4gIGdldCBzaXplTGFiZWwgKCkge1xuICAgIGlmICh0aGlzLmJpZykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuQmlnVGFyZ2V0JylcbiAgICBpZiAodGhpcy5zbWFsbCkgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5jb21iYXRDYXJkLlNtYWxsVGFyZ2V0JylcbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5Ob3JtYWxUYXJnZXQnKVxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIGlmICh0aGlzLmJhc2VSYW5nZSB8fCB0aGlzLnBvaW50QmxhbmtSYW5nZSkge1xuICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgICBpZiAodGhpcy5sb25nUmFuZ2UpIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICBpZiAodGhpcy5leHRyZW1lUmFuZ2UpIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIGxldCBtb2RpZmllciA9IDBcbiAgICBpZiAodGhpcy5jb3ZlcikgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnBvaW50QmxhbmtSYW5nZSkgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmZhc3QpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5zbWFsbCkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLmJpZykgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmluTWVsZWUpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5zdXJwcmlzZWQpIG1vZGlmaWVyKytcbiAgICByZXR1cm4gbW9kaWZpZXJcbiAgfVxuXG4gIHNldCB0b2tlbiAodCkge1xuICAgIHRoaXMuX3Rva2VuID0gdFxuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdSYW5nZVRhcmdldCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudCh0YXJnZXQsIGVsZW1lbnQpXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgc3RhdGljIGNoYW5nZURpc3BsYXllZFRhcmdldCAoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQtc2VsZWN0b3InKSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCB0YXJnZXRTZWxlY3RvciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB0YXJnZXRzID0gdGFyZ2V0U2VsZWN0b3IuY2xvc2VzdCgnLnRhcmdldHMnKVxuICAgIGNvbnN0IHRhcmdldExpc3QgPSB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJnZXQnKVxuICAgIHJldHVybiB0YXJnZXRMaXN0XG4gIH1cblxuICBhdHRhY2hUb0VsZW1lbnQgKGVsZW1lbnQpIHtcbiAgICBjaGF0SGVscGVyLmF0dGFjaE9iamVjdFRvRWxlbWVudCh0aGlzLCBlbGVtZW50KVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZykge1xuICAgIGlmIChcbiAgICAgIGZsYWcgPT09ICdiYXNlUmFuZ2UnIHx8XG4gICAgICBmbGFnID09PSAnbG9uZ1JhbmdlJyB8fFxuICAgICAgZmxhZyA9PT0gJ2V4dHJlbWVSYW5nZScgfHxcbiAgICAgIGZsYWcgPT09ICdwb2ludEJsYW5rUmFuZ2UnXG4gICAgKSB7XG4gICAgICB0aGlzLnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmJhc2VSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmV4dHJlbWVSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLm91dE9mUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcbiAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICdzaXplJykge1xuICAgICAgaWYgKHRoaXMuc21hbGwpIHtcbiAgICAgICAgdGhpcy5zbWFsbCA9IGZhbHNlXG4gICAgICAgIHRoaXMuYmlnID0gdHJ1ZVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmJpZykge1xuICAgICAgICB0aGlzLnNtYWxsID0gZmFsc2VcbiAgICAgICAgdGhpcy5iaWcgPSBmYWxzZVxuICAgICAgfSBlbHNlIHRoaXMuc21hbGwgPSB0cnVlXG4gICAgfSBlbHNlIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIGlmIChmbGFnID09PSAnZmFzdCcgJiYgdGhpcy5mYXN0ICYmICF0aGlzLmlzRmFzdCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldhcm5GYXN0VGFyZ2V0V2l0aFdyb25nTU9WJywge1xuICAgICAgICAgIG1vdjogdGhpcy5hY3Rvci5tb3ZcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgQ09OU1QsIGdhbWUsIFRva2VuLCB0b2tlbkRhdGEsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi9jaGF0L2NvbWJhdC9tZWxlZS1pbml0aWF0b3IuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVUYXJnZXQgfSBmcm9tICcuL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcydcbmltcG9ydCB7IENvQzdNZWxlZVJlc29sdGlvbiB9IGZyb20gJy4vY2hhdC9jb21iYXQvbWVsZWUtcmVzb2x1dGlvbi5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4vY2hhdC9yYW5nZWNvbWJhdC5qcydcbmltcG9ydCB7IENvQzdSb2xsLCBjaGF0SGVscGVyLCBpc0N0cmxLZXkgfSBmcm9tICcuL2NoYXQvaGVscGVyLmpzJ1xuLy8gaW1wb3J0IHsgQ29DN0RhbWFnZVJvbGwgfSBmcm9tICcuL2NoYXQvZGFtYWdlY2FyZHMuanMnO1xuaW1wb3J0IHsgQ29DN0NvbkNoZWNrIH0gZnJvbSAnLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzJ1xuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcbmltcG9ydCB7IEludGVyYWN0aXZlQ2hhdENhcmQgfSBmcm9tICcuL2NoYXQvaW50ZXJhY3RpdmUtY2hhdC1jYXJkLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9kYW1hZ2UuanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4vZGljZS5qcydcblxuY29uc3QgQ0hBVF9DT0M3X01FU1NBR0UgPSB7XG4gIEZBS0VST0xMOlxuICAgICc8ZGl2IGNsYXNzPVwiZGljZS1yb2xsXCI+PGRpdiBjbGFzcz1cImRpY2UtcmVzdWx0XCI+PGRpdiBjbGFzcz1cImRpY2UtZm9ybXVsYVwiPj8/PzwvZGl2PjxoNCBjbGFzcz1cImRpY2UtdG90YWxcIj4/PC9oND48L2Rpdj48L2Rpdj4nXG59XG5leHBvcnQgY2xhc3MgQ29DN0NoYXQge1xuICBzdGF0aWMgcmVuZGVyQ2hhdE1lc3NhZ2VIb29rIChjaGF0TWVzc2FnZSwgaHRtbCkge1xuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ0dNU2VsZlJvbGwnKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWwuZmluZCgnLndoaXNwZXItdG8nKS5yZW1vdmUoKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmZsYXZvci10ZXh0JylcbiAgICAgICAgLnJlcGxhY2VXaXRoKFxuICAgICAgICAgIGA8c3BhbiBjbGFzcz1cImZsYXZvci10ZXh0XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5Sb2xsU2VjcmV0RGljZSdcbiAgICAgICAgICApfTwvc3Bhbj5gXG4gICAgICAgIClcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5tZXNzYWdlLWNvbnRlbnQnKVxuICAgICAgICAucmVwbGFjZVdpdGgoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJtZXNzYWdlLWNvbnRlbnRcIj4ke0NIQVRfQ09DN19NRVNTQUdFLkZBS0VST0xMfTwvZGl2PmBcbiAgICAgICAgKVxuICAgIH1cblxuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3JlbW92ZVdpc3BlclRhcmdldHMnKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWwuZmluZCgnLndoaXNwZXItdG8nKS5yZW1vdmUoKVxuICAgIH1cblxuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2Zha2VSb2xsJykgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5mbGF2b3ItdGV4dCcpXG4gICAgICAgIC5yZXBsYWNlV2l0aChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuS2VlcGVyU2VudERlY295JykpXG4gICAgICBodG1sLmZpbmQoJy5tZXNzYWdlLWNvbnRlbnQnKS5yZW1vdmUoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBmYWtlUm9sbE1lc3NhZ2UgKCkge1xuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbFNlY3JldERpY2UnKSxcbiAgICAgIHdoaXNwZXI6IGdhbWUudXNlcnMucGxheWVycyxcbiAgICAgIHR5cGU6IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSLFxuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgIEdNU2VsZlJvbGw6IGZhbHNlLFxuICAgICAgICAgIHJlbW92ZVdpc3BlclRhcmdldHM6IHRydWUsXG4gICAgICAgICAgZmFrZVJvbGw6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbnRlbnQ6IENIQVRfQ09DN19NRVNTQUdFLkZBS0VST0xMXG4gICAgfVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICB9XG5cbiAgLy8gVE9ETyByZW1wbGFjZXIgbGVzIGdldEVsZW1lbnRzQnl4eHh4IHBhciBxdWVyeVNlbGVjdG9yXG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuICAgKiAgSW5pdCBzb2NrZXRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyByZWFkeSAoKSB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0LnJlYWR5Jyk7XG4gICAgZ2FtZS5Db0M3ID0gJ2luaXQnXG4gIH1cblxuICAvLyBzdGF0aWMgb25NZXNzYWdlKCBkYXRhKSB7XG4gIC8vICBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQub25NZXNzYWdlJyk7XG4gIC8vICBjb25zb2xlLmxvZyhgbWVzc2FnZSByZWNlaXZlZCBzZW5kJmVyIDoke2RhdGEudXNlcn0gbWVzc2FnZSB0eXBlIDogJHtkYXRhLmFjdGlvbn0gZm9yIG1lc3NhZ2UgOiR7ZGF0YS5tZXNzYWdlSWR9YCk7XG4gIC8vIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gICAqICBDaGF0IE1lc3NhZ2UgSGVscGVycyAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBzdGF0aWMgYXN5bmMgY2hhdExpc3RlbmVycyAoYXBwLCBodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmNhcmQtYnV0dG9ucyBidXR0b24nLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRBY3Rpb24uYmluZCh0aGlzKVxuICAgIClcbiAgICAvLyBodG1sLm9uKCdjbGljaycsICcuY2FyZC1idXR0b25zIGJ1dHRvbicsIENvQzdDaGF0Ll9vbkNoYXRDYXJkVGVzdC5iaW5kKHRoaXMpKTtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuY2FyZC10aXRsZScsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZFRvZ2dsZUNvbnRlbnQuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucmFkaW8tc3dpdGNoJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkUmFkaW9Td2l0Y2guYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucGFuZWwtc3dpdGNoJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoLmJpbmQodGhpcylcbiAgICApXG5cbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuc2ltcGxlLWZsYWcnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2guYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcudm9sbGV5LXNpemUnLCBDb0M3Q2hhdC5fb25DaGF0Q2FyZFZvbGxleVNpemUuYmluZCh0aGlzKSlcblxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5kcm9wZG93bi1lbGVtZW50JyxcbiAgICAgIENvQzdDaGF0Ll9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnNpbXBsZS10b2dnbGUnLCBDb0M3Q2hhdC5fb25Ub2dnbGVTZWxlY3RlZC5iaW5kKHRoaXMpKVxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJy5pcy1vdXRudW1iZXJlZCcsIENvQzdDaGF0Ll9vbk91dG51bWJlcmVkU2VsZWN0ZWQuYmluZCh0aGlzKSk7XG5cbiAgICBodG1sLm9uKCdjbGljaycsICcudGFyZ2V0LXNlbGVjdG9yJywgQ29DN0NoYXQuX29uVGFyZ2V0U2VsZWN0LmJpbmQodGhpcykpXG5cbiAgICBodG1sLm9uKCdkYmxjbGljaycsICcub3Blbi1hY3RvcicsIENvQzdDaGF0Ll9vbk9wZW5BY3Rvci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5vbignY2xpY2snLCAnY29jNy1pbmxpbmUtcmVzdWx0JywgQ29DN0NoYXQuX29uSW5saW5lLmJpbmQodGhpcykpXG5cbiAgICAvLyBSb2xsQ2FyZC5iaW5kTGlzdGVybmVycyggaHRtbCk7XG4gICAgT3Bwb3NlZENoZWNrQ2FyZC5iaW5kTGlzdGVybmVycyhodG1sKVxuICAgIENvbWJpbmVkQ2hlY2tDYXJkLmJpbmRMaXN0ZXJuZXJzKGh0bWwpXG4gIH1cblxuICBzdGF0aWMgX29uT3BlbkFjdG9yIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhY3RvcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3RvcktleVxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoYWN0b3IuaXNPd25lcikgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG9uVXBkYXRlQ2hhdE1lc3NhZ2UgKGNoYXRNZXNzYWdlKSB7XG4gICAgdWkuY2hhdC5zY3JvbGxCb3R0b20oKVxuXG4gICAgLy8gaWYoIGNoYXRNZXNzYWdlLmdldEZsYWcoICdDb0M3JywgJ3JldmVsZWQnKSl7XG4gICAgLy8gfVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSAmJiBjaGF0TWVzc2FnZS50eXBlID09PSAwKSB7XG4gICAgICBjb25zdCBjYXJkID0gJChjaGF0TWVzc2FnZS5jb250ZW50KVswXVxuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICAgIGlmIChjYXJkLmRhdGFzZXQucmVzb2x2ZWQgPT09ICd0cnVlJykge1xuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQudGFyZ2V0Q2FyZCkge1xuICAgICAgICAgICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgICAgICAgIGluaXRpYXRvci50YXJnZXRDYXJkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaWYgKHRhcmdldC5yZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0Lm1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgICAgIHRhcmdldC5yZXNvbHV0aW9uQ2FyZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByZXNvbHV0aW9uQ2FyZC5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICBpZiAoIWluaXRpYXRvci5jaGVja1JldmVhbGVkKSBhd2FpdCBpbml0aWF0b3IucmV2ZWFsQ2hlY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGlmIChpbml0aWF0b3IucmVzb2x1dGlvbkNhcmQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICBpbml0aWF0b3IucmVzb2x1dGlvbkNhcmRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzb2x1dGlvbkNhcmQucmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgaWYgKCFpbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkgYXdhaXQgaW5pdGlhdG9yLnJldmVhbENoZWNrKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZChjaGF0TWVzc2FnZS5pZClcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgICAgICAgdGFyZ2V0LnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgIHRhcmdldC5yZXNvbHV0aW9uQ2FyZFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgYXdhaXQgcmVzb2x1dGlvbkNhcmQucmVzb2x2ZSgpXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5tZWxlZUluaXRpYXRvci5jaGVja1JldmVhbGVkKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHRhcmdldC5tZWxlZUluaXRpYXRvci5yZXZlYWxDaGVjaygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJlbmRlck1lc3NhZ2VIb29rIChtZXNzYWdlLCBodG1sKSB7XG4gICAgdWkuY2hhdC5zY3JvbGxCb3R0b20oKVxuXG4gICAgSW50ZXJhY3RpdmVDaGF0Q2FyZC5iaW5kTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAobWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2NoZWNrUmV2ZWFsZWQnKSkge1xuICAgICAgaHRtbC5maW5kKCcuZGljZS1yb2xsJykucmVtb3ZlQ2xhc3MoJ2dtLXZpc2libGUtb25seScpXG4gICAgICBodG1sWzBdLmRhdGFzZXQuY2hlY2tSZXZlYWxlZCA9IHRydWVcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgc2hvd2luZyBkcm9wZG93biBzZWxlY3Rpb25cbiAgICBodG1sXG4gICAgICAuZmluZCgnLmRyb3BidG4nKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+XG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgICAuY2xvc2VzdCgnLmRyb3Bkb3duJylcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKVxuICAgICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcbiAgICAgIClcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmRyb3Bkb3duJylcbiAgICAgIC5tb3VzZWxlYXZlKGV2ZW50ID0+XG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKVxuICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JylcbiAgICAgIClcblxuICAgIC8vIGNvbnNvbGUubG9nKCcqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiotLT5Db0M3Q2hhdC5tZXNzYWdlTGlzdGVuZXJzIG1lc3NhZ2UgOicgKyBtZXNzYWdlLmlkKTtcbiAgICAvLyBtZXNzYWdlLmRhdGEuY29udGVudCA9IFwiXCI7XG4gICAgLy8gZGF0YS5tZXNzYWdlLmNvbnRlbnQgPSBcIlwiO1xuXG4gICAgLy8gV2hlbiBhIG5ldyBjYXJkIGlzIHB1Ymxpc2hlZCwgY2hlY2sgd2V0aGVyIGl0J3MgYSByb2xsIHRoYXQgbW9kaWZpZXMgYW4gb3RoZXIgY2FyZC5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnN0IGNhcmQgPSBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJy5jb2M3LmNoYXQtY2FyZCcpXG4gICAgICBpZiAoY2FyZCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpICYmXG4gICAgICAgICAgIShjYXJkLmRhdGFzZXQucHJvY2Vzc2VkID09PSAndHJ1ZScpICYmXG4gICAgICAgICAgY2FyZC5kYXRhc2V0LnJlZk1lc3NhZ2VJZFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCByb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUVsZW1lbnQoY2FyZClcblxuICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQuc2lkZSA9PT0gJ3RhcmdldCcpIHtcbiAgICAgICAgICAgIHJvbGwuZGVmZW5kYW50SWQgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA/IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgIDogY2FyZC5kYXRhc2V0LmFjdG9ySWRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhcmQuZGF0YXNldC5zaWRlID09PSAnaW5pdGlhdG9yJykge1xuICAgICAgICAgICAgcm9sbC5pbml0aWF0b3JJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgID8gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgOiBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgICAgICAgIH1cbiAgICAgICAgICBjYXJkLmRhdGFzZXQucHJvY2Vzc2VkID0gJ3RydWUnXG5cbiAgICAgICAgICBDb0M3Q2hhdC51cGRhdGVDb21iYXRDYXJkVGFyZ2V0KHJvbGwpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB1c2VyT25seSA9IGh0bWwuZmluZCgnLnRhcmdldC1vbmx5JylcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdXNlck9ubHkpIHtcbiAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIGNvbnN0IGFjdG9ySWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1hY3Rvci1pZCcpXG4gICAgICAgIGlmIChhY3RvcklkKSB7XG4gICAgICAgICAgaWYgKGdhbWUuYWN0b3JzLmdldChhY3RvcklkKS5pc093bmVyKSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZ21Pbmx5ID0gaHRtbC5maW5kKCcuZ20tb25seScpXG4gICAgZm9yIChjb25zdCB6b25lIG9mIGdtT25seSkge1xuICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB1c2VyVmlzaWJsZU9ubHkgPSBodG1sLmZpbmQoJy51c2VyLXZpc2libGUtb25seScpXG4gICAgZm9yIChjb25zdCBlbGVtIG9mIHVzZXJWaXNpYmxlT25seSkge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9XG5cbiAgICBjb25zdCBnbVZpc2libGVPbmx5ID0gaHRtbC5maW5kKCcuZ20tdmlzaWJsZS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IGVsZW0gb2YgZ21WaXNpYmxlT25seSkge1xuICAgICAgaWYgKCEoZ2FtZS51c2VyLmlzR00gfHwgKGdhbWUudXNlci5pc1RydXN0ZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndHJ1c3RlZENhblNlZUNoYXRDYXJkJykpKSkgZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfVxuXG4gICAgY29uc3Qgb3duZXJWaXNpYmxlT25seSA9IGh0bWwuZmluZCgnLm93bmVyLXZpc2libGUtb25seScpXG4gICAgZm9yIChjb25zdCB6b25lIG9mIG93bmVyVmlzaWJsZU9ubHkpIHtcbiAgICAgIC8vIFRyeSByZXRyaWV2aW5nIGFjdG9yXG4gICAgICBsZXQgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUuZGF0YXNldD8uYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHNlbGYuXG4gICAgICBpZiAoIWFjdG9yKSBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGNoYXQgY2FyZC5cbiAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUucGFyZW50RWxlbWVudC5kYXRhc2V0LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBwYXJlbnQgZWxlbWVudC5cbiAgICAgIH1cbiAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtYWN0b3Ita2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XG4gICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLWFjdG9yLWtleVxuICAgICAgfVxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS10b2tlbi1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtdG9rZW4ta2V5XG4gICAgICB9XG5cbiAgICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCBhY3RvcklkKTtcbiAgICAgIGlmICgoYWN0b3IgJiYgIWFjdG9yLmlzT3duZXIpIHx8IGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIHpvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgfSAvLyBpZiBjdXJyZW50IHVzZXIgZG9lc24ndCBvd24gdGhpcyBoZSBjYW4ndCBpbnRlcnJhY3RcbiAgICAgIC8vIGlmKCAhQ29DN0NoYXQuaXNDYXJkT3duZXIoIHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSkge3pvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzt9XG4gICAgfVxuXG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgLy8gR00gY2FuIHNlZSBldmVyeXRoaW5nXG4gICAgICBjb25zdCBvd25lck9ubHkgPSBodG1sLmZpbmQoJy5vd25lci1vbmx5JylcbiAgICAgIGZvciAoY29uc3Qgem9uZSBvZiBvd25lck9ubHkpIHtcbiAgICAgICAgLy8gVHJ5IHJldHJpZXZpbmcgYWN0b3JcbiAgICAgICAgbGV0IGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICB6b25lLmRhdGFzZXQ/LmFjdG9yS2V5IHx8IHpvbmUuZGF0YXNldD8uYWN0b3JJZFxuICAgICAgICApIC8vIFRyeSB3aXRoIHNlbGYuXG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGNoYXQgY2FyZC5cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUucGFyZW50RWxlbWVudC5kYXRhc2V0LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBwYXJlbnQgZWxlbWVudC5cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS1hY3Rvci1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS1hY3Rvci1rZXlcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS10b2tlbi1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS10b2tlbi1rZXlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCBhY3RvcklkKTtcbiAgICAgICAgaWYgKChhY3RvciAmJiAhYWN0b3IuaXNPd25lcikgfHwgKCFhY3RvciAmJiAhZ2FtZS51c2VyLmlzR00pKSB7XG4gICAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIH0gLy8gaWYgY3VycmVudCB1c2VyIGRvZXNuJ3Qgb3duIHRoaXMgaGUgY2FuJ3QgaW50ZXJyYWN0XG4gICAgICAgIC8vIGlmKCAhQ29DN0NoYXQuaXNDYXJkT3duZXIoIHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSkge3pvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzt9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGdtU2VsZWN0T25seSA9IGh0bWwuZmluZCgnLmdtLXNlbGVjdC1vbmx5JylcbiAgICAgIGlmICghKGdhbWUudXNlci5pc1RydXN0ZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmQnKSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBzZWxlY3Qgb2YgZ21TZWxlY3RPbmx5KSB7XG4gICAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2luYWN0aXZlJylcbiAgICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LnJlbW92ZSgnc2ltcGxlLWZsYWcnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBhY3Rpb25UeXBlU3RyaW5nICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmlnaHRCYWNrOiAnQ29DNy5maWdodEJhY2snLFxuICAgICAgbWFuZXV2ZXI6ICdDb0M3Lm1hbmV1dmVyJyxcbiAgICAgIGRvZGdpbmc6ICdDb0M3LmRvZGdlJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfb25UYXJnZXRTZWxlY3QgKGV2ZW50KSB7XG4gICAgY29uc3QgaW5kZXggPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQua2V5KVxuICAgIGNvbnN0IHRhcmdldHNTZWxlY3RvciA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldHMtc2VsZWN0b3InKVxuICAgIGZvciAoY29uc3QgaSBvZiB0YXJnZXRzU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCgnaW1nJykpIHtcbiAgICAgIGkuc3R5bGUuYm9yZGVyID0gJ25vbmUnXG4gICAgfVxuICAgIHRhcmdldHNTZWxlY3RvclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWtleT1cIiR7aW5kZXh9XCJdYClcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICMwMDAnXG4gICAgY29uc3QgdGFyZ2V0cyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldHMnKVxuICAgIGZvciAoY29uc3QgdCBvZiB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJnZXQnKSkge1xuICAgICAgdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB0LmRhdGFzZXQuYWN0aXZlID0gJ2ZhbHNlJ1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXRUb0Rpc3BsYXkgPSB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgW2RhdGEtdGFyZ2V0LWtleT1cIiR7aW5kZXh9XCJdYFxuICAgIClcbiAgICB0YXJnZXRUb0Rpc3BsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICB0YXJnZXRUb0Rpc3BsYXkuZGF0YXNldC5hY3RpdmUgPSAndHJ1ZSdcbiAgICAvLyBjb25zdCBjaGF0Q2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZC5yYW5nZScpO1xuICAgIC8vIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKCBjaGF0Q2FyZCk7XG4gIH1cblxuICBzdGF0aWMgX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZVNlbGVjdGVkKGNhcmQsIGV2ZW50KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gY2xlYXIgYWxsIGRyb3AgZG93biBhbmQgaGlnaGxpZ2h0IHRoaXMgcGFydGljdWxhciBvbmVcbiAgICBjb25zdCBkcm9wRG93bkJveGVzID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5yZXNwb25zZS1zZWxlY3Rpb24nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICBmb3IgKGNvbnN0IGRwZG5Cb3ggb2YgZHJvcERvd25Cb3hlcykge1xuICAgICAgZHBkbkJveC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlZC1vbicpXG4gICAgfVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpXG5cbiAgICAvLyBjbG9zZSBkcm9wZG93blxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcblxuICAgIC8vIERpc3BsYXkgdGhlIHJvbGwgYnV0dG9uXG4gICAgY29uc3Qgc2VsZWN0ZWRCb3ggPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1hY3Rpb24nKVxuICAgIHNlbGVjdGVkQm94LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgY29uc3QgYnV0dG9uID0gc2VsZWN0ZWRCb3gucXVlcnlTZWxlY3RvcignYnV0dG9uJylcblxuICAgIC8vIFBhc3MgdGhlIGluaXRpYXRvciBJZCAtIEJ1aWxkIGNhbiBiZSByZXRyaWV2ZWQgZnJvbSB0aGF0XG5cbiAgICAvLyBQYXNzIHRoZSBpbml0aWF0b3IgaXRlbVxuXG4gICAgLy8gUGFzcyB0aGUgZGVmZW5kYW50IElkXG5cbiAgICAvLyBQYXNzIHRoZSBkZWZlbmRhbnQgYWN0aW9uXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uID0gJ2RlZmVuZGluZydcbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb25UeXBlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LmRlZmVuZGVyQ2hvaWNlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsVmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWVcbiAgICBidXR0b24uZGF0YXNldC5pdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uSWRcbiAgICBidXR0b24uZGF0YXNldC5pdGVtTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25OYW1lXG5cbiAgICAvLyBQdXQgc29tZSB0ZXh0IGluIHRoZSBidXR0b25cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ21hbmV1dmVyJzpcbiAgICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXG4gICAgICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lfSAoJHtcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgICAgICB9JSlgXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuY29tYmF0Q2FyZHNbZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbl1cbiAgICAgICAgKX0gOiAke2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25OYW1lfSAoJHtcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgICAgICB9JSlgXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIC8vIFNhdmUgYWN0aW9uIGZvciB0aGUgcm9sbFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbklubGluZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnaW5saW5lLXJlc3VsdCcpKSB7XG4gICAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHtcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fY29sbGFwc2VJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2V4cGFuZElubGluZVJlc3VsdChhKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfb25Ub2dnbGVTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICBDb0M3TWVsZWVUYXJnZXQudXBkYXRlU2VsZWN0ZWQoY2FyZCwgZXZlbnQpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWQgPT09ICcnKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck5vRG9kZ2VTa2lsbCcpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gY2xlYXIgYWxsIGRyb3AgZG93biBhbmQgaGlnaGxpZ2h0IHRoaXMgcGFydGljdWxhciBvbmVcbiAgICBjb25zdCBkcm9wRG93bkJveGVzID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5yZXNwb25zZS1zZWxlY3Rpb24nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICBmb3IgKGNvbnN0IGRwZG5Cb3ggb2YgZHJvcERvd25Cb3hlcykge1xuICAgICAgZHBkbkJveC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlZC1vbicpXG4gICAgfVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZWQtb24nKSAvLyBOZWVkIHRvIHRlc3QgaWYgaXQncyByZWFsbHkgYSBkb2RnZSAhISFcblxuICAgIC8vIFNhdmUgYWN0aW9uIGZvciB0aGUgcm9sbFxuICAgIGNvbnN0IHNlbGVjdGVkQm94ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtYWN0aW9uJylcbiAgICBzZWxlY3RlZEJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNlbGVjdGVkQm94LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG5cbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb24gPSAnZGVmZW5kaW5nJ1xuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvblR5cGUgPSAnZG9kZ2luZydcbiAgICBidXR0b24uZGF0YXNldC5kZWZlbmRlckNob2ljZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBidXR0b24uZGF0YXNldC5za2lsbFZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICBidXR0b24uZGF0YXNldC5za2lsbE5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lXG5cbiAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgQ09DNy5jb21iYXRDYXJkc1tldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXVxuICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lfSAoJHtcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgfSUpYFxuICB9XG5cbiAgc3RhdGljIF9vbkNoYXRDYXJkUmFkaW9Td2l0Y2ggKGV2ZW50KSB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0Ll9vbkNoYXRDYXJkUmFkaW9Td2l0Y2gnKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgb3B0aW9uTGlzdCA9XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmFkaW8tc3dpdGNoJylcbiAgICBsZXQgaW5kZXhcbiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBvcHRpb25MaXN0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IG9wdGlvbkxpc3RbaW5kZXhdXG4gICAgICBpZiAoZWxlbWVudC5kYXRhc2V0LnByb3BlcnR5ID09PSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHkpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIH1cbiAgICB9XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuc2VsZWN0ZWQgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRWb2xsZXlTaXplIChldmVudCkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyYW5nZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIGNvbnN0IHJhbmdlQ2FyZCA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luY3JlYXNlJykpIHtcbiAgICAgICAgICByYW5nZUNhcmQuY2hhbmdlVm9sbGV5U2l6ZSgxKVxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWNyZWFzZScpKSB7XG4gICAgICAgICAgcmFuZ2VDYXJkLmNoYW5nZVZvbGxleVNpemUoLTEpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2ggKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIENvQzdNZWxlZUluaXRpYXRvci51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgIENvQzdNZWxlZVRhcmdldC51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICBDb0M3UmFuZ2VJbml0aWF0b3IudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhbWFnZScpKSB7XG4gICAgICAvLyBDb0M3SXRlbS51cGRhdGVDYXJkU3dpdGNoKCBldmVudCk7XG4gICAgfVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLWNhcmQnKSkge1xuICAgICAgQ29DN0NoZWNrLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgQWN0b3Igd2hpY2ggaXMgdGhlIGF1dGhvciBvZiBhIGNoYXQgY2FyZFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICAgIFRoZSBjaGF0IGNhcmQgYmVpbmcgdXNlZFxuICAgKiBAcmV0dXJuIHtBY3RvcnxudWxsfSAgICAgICAgIFRoZSBBY3RvciBlbnRpdHkgb3IgbnVsbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9nZXRDaGF0Q2FyZEFjdG9yIChjYXJkKSB7XG4gICAgLy8gaWYgZGF0YXNldC5vYmplY3QgaXMgdGhlcmUgPT4gbmVlZCB0byB1bmVzY2FwZSB0aGluZ3MgISFcbiAgICAvLyBpZiBub3QgdXNlIHRoZSBkYXRhc2V0IGRpcmVjdGx5LlxuICAgIGNvbnN0IGNhcmREYXRhID0gY2FyZC5kYXRhc2V0Lm9iamVjdFxuICAgICAgPyBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuICAgICAgOiBjYXJkLmRhdGFzZXRcblxuICAgIGlmIChjYXJkRGF0YS5hY3RvcktleSkgcmV0dXJuIENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoY2FyZERhdGEuYWN0b3JLZXkpXG5cbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmREYXRhLnRva2VuSWRcbiAgICBpZiAodG9rZW5LZXkpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHRva2VuS2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yIHx8IG5ldyBUb2tlbih0b2tlbkRhdGEpLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkRGF0YS5hY3RvcklkXG4gICAgaWYgKGFjdG9ySWQpIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZClcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlID8gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG51bGxcbiAgICBpZiAobWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICAgIGlmIChjaGF0TWVzc2FnZS51c2VyKSByZXR1cm4gY2hhdE1lc3NhZ2UudXNlci5jaGFyYWN0ZXJcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3RhdGljIGlzQ2FyZE93bmVyIChjYXJkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IG1lc3NhZ2UgPyBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkIDogbnVsbFxuICAgIGlmIChtZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgICAgcmV0dXJuIGNoYXRNZXNzYWdlLm93bm5lciB8fCBmYWxzZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIF9nZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvciB8fCBuZXcgVG9rZW4odG9rZW5EYXRhKS5hY3RvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbVRva2VuICh0b2tlbktleSkge1xuICAgIGNvbnN0IHRva2VuID0gQ29DN0NoYXQuZ2V0VG9rZW4odG9rZW5LZXkpXG4gICAgcmV0dXJuIHRva2VuID8gdG9rZW4uYWN0b3IgOiBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0VG9rZW4gKHRva2VuS2V5KSB7XG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICBjb25zdCB0b2tlbkRvYyA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXT8udG9rZW5cbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxuICAgICAgICByZXR1cm4gdG9rZW4gfHwgbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiB1cGRhdGUgYSBjaGF0IG1lc3NhZ2Ugd2l0aCBhIG5ldyBIVE1MIGNvbnRlbnQgYW5kIHBvcHVsYXRlIGl0LlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKGNhcmQsIG1lc3NJZCA9IG51bGwpIHtcbiAgICBjb25zdCBtZXNzYWdlSWQgPVxuICAgICAgbWVzc0lkID09IG51bGwgPyBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWQgOiBtZXNzSWRcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBjYXJkLm91dGVySFRNTCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZEFjdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQuX29uQ2hhdENhcmRBY3Rpb24nKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgY2FyZCA9IGJ1dHRvbi5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNvbnN0IG9yaWdpbk1lc3NhZ2UgPSBidXR0b24uY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIC8vIGNvbnN0IG1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQ7XG4gICAgY29uc3QgYWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuYWN0aW9uXG5cbiAgICBpZiAoIUNvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpKSByZXR1cm5cblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICd1c2VMdWNrJzoge1xuICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQubHVja0Ftb3VudClcbiAgICAgICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID0gcGFyc2VJbnQoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lm5ld1N1Y2Nlc3NMZXZlbFxuICAgICAgICApXG5cbiAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICAgICAgbGV0IG1lbGVlQ2FyZFxuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgICAgICAgIG1lbGVlQ2FyZCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgICAgICBtZWxlZUNhcmQgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVsZWVDYXJkLnVwZ3JhZGVSb2xsKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgY2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xuICAgICAgICAgIGNvbnN0IHJhbmdlQ2FyZCA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIGNvbnN0IHJvbGxSZXN1bHQgPSBidXR0b24uY2xvc2VzdCgnLnJvbGwtcmVzdWx0JylcbiAgICAgICAgICBjb25zdCByb2xsSW5kZXggPSByb2xsUmVzdWx0XG4gICAgICAgICAgICA/IHBhcnNlSW50KHJvbGxSZXN1bHQuZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcbiAgICAgICAgICAgIHJhbmdlQ2FyZC5wYXNzUm9sbChyb2xsSW5kZXgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZ3JhZGVJbmRleCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgICAgcmFuZ2VDYXJkLnVwZ3JhZGVSb2xsKHJvbGxJbmRleCwgdXBncmFkZUluZGV4KSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1jYXJkJykgfHxcbiAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpICE9IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygncGFzcy1jaGVjaycpKSB7XG4gICAgICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQubHVja0Ftb3VudClcbiAgICAgICAgICAgIGNoZWNrLmZvcmNlUGFzcyhsdWNrQW1vdW50KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChidXR0b24uZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnVwZ3JhZGVDaGVjayh1cGdyYWRlSW5kZXgpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3IoY2FyZClcbiAgICAgICAgICBjb25zdCBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyID1cbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcblxuICAgICAgICAgIGlmIChhY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgICAgICAgICAgY2FyZC5kYXRhc2V0LnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgICAgICAgICAgY2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9ICdmYWxzZScgLy8gdHJpZ2dlciAzIHVwZGF0ZXMgZGUgY2FyZFxuICAgICAgICAgICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICAgICAgICAgIHJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKCdmdW1ibGUnKVxuICAgICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgIGF3YWl0IENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKGNhcmQpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RFbm91Z2hMdWNrJywge1xuICAgICAgICAgICAgICAgIGFjdG9yOiBhY3Rvci5uYW1lXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdwdXNoJzoge1xuICAgICAgICBjb25zdCBuZXdDYXJkID0gY2FyZC5jbG9uZU5vZGUodHJ1ZSkgLy8gVE9ETyBub3QgbmVjZXNzYXJ5XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ld0NhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID1cbiAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlB1c2hpbmdTa2lsbCcpXG4gICAgICAgIHJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKCdmYWlsdXJlJylcbiAgICAgICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICAgICAgbmV3Q2FyZC5kYXRhc2V0LnB1c2hlZFJvbGwgPSB0cnVlXG4gICAgICAgIGF3YWl0IENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKG5ld0NhcmQsIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpXG4gICAgICAgIGF3YWl0IENvQzdDaGVjay5wdXNoKGNhcmQpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdkZWZlbmRpbmcnOiB7XG4gICAgICAgIGxldCBkZWZlbmRlcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgICAgIC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgbGV0IGRlZmVuZGVyXG4gICAgICAgIGlmICghZGVmZW5kZXJLZXkpIHtcbiAgICAgICAgICBkZWZlbmRlcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgICAgICAgLmRhdGFzZXQuYWN0b3JJZFxuICAgICAgICAgIGRlZmVuZGVyID0gZ2FtZS5hY3RvcnMuZ2V0KGRlZmVuZGVyS2V5KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZmVuZGVyID0gdGhpcy5nZXRBY3RvckZyb21Ub2tlbihkZWZlbmRlcktleSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25UeXBlXG4gICAgICAgIGNvbnN0IG91dG51bWJlcmVkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lm91dG51bWJlcmVkID09PSAndHJ1ZSdcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgY2hlY2sucmVmZXJlbmNlTWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgICAgICBjaGVjay5yb2xsVHlwZSA9ICdvcHBvc2VkJ1xuICAgICAgICBjaGVjay5zaWRlID0gJ3RhcmdldCdcbiAgICAgICAgY2hlY2suYWN0aW9uID0gcmVzcG9uc2VUeXBlXG4gICAgICAgIHN3aXRjaCAocmVzcG9uc2VUeXBlKSB7XG4gICAgICAgICAgY2FzZSAnZG9kZ2luZyc6XG4gICAgICAgICAgICBjaGVjay5hY3RvciA9IGRlZmVuZGVyXG4gICAgICAgICAgICBjaGVjay5za2lsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgICAgICBpZiAob3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciA9IC0xXG5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcbiAgICAgICAgICAgIGNoZWNrLmFjdG9yID0gZGVmZW5kZXJcbiAgICAgICAgICAgIGNoZWNrLnNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgICAgIGNoZWNrLml0ZW0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgICBpZiAob3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciA9IC0xXG5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnbWFuZXV2ZXInOiB7XG4gICAgICAgICAgICBjb25zdCBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpXG4gICAgICAgICAgICBpZiAoZGVmZW5kZXIuYnVpbGQgPD0gYWN0b3IuYnVpbGQgLSAzKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTWFuZXV2ZXJOb3RQb3NzaWJsZScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVjay5hY3RvciA9IGRlZmVuZGVyXG4gICAgICAgICAgICBjaGVjay5za2lsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgICAgICBpZiAob3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciA9IC0xXG4gICAgICAgICAgICBpZiAoZGVmZW5kZXIuYnVpbGQgPCBhY3Rvci5idWlsZCkge1xuICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPVxuICAgICAgICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciAtIChhY3Rvci5idWlsZCAtIGRlZmVuZGVyLmJ1aWxkKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2hlY2suZGljZU1vZGlmaWVyIDwgLTIpIHtcbiAgICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9XG4gICAgICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSArIE1hdGguYWJzKGNoZWNrLmRpY2VNb2RpZmllcikgLSAyXG4gICAgICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IC0yXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lbGVlLWluaXRpYXRvci1yb2xsJzoge1xuICAgICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBpbml0aWF0b3IucGVyZm9ybVNraWxsQ2hlY2soXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsXG4gICAgICAgIClcbiAgICAgICAgJChidXR0b24pLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QoY2hlY2suZGljZS5yb2xsKVxuICAgICAgICBhd2FpdCBpbml0aWF0b3IucHVibGlzaENoZWNrUmVzdWx0KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVsZWUtdGFyZ2V0LW5vLXJlc3BvbnNlJzoge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgdGFyZ2V0LnB1Ymxpc2hOb1JlcG9uc2VSZXN1bHQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtZWxlZS10YXJnZXQtcm9sbCc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgdGFyZ2V0LnBlcmZvcm1Ta2lsbENoZWNrKFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFxuICAgICAgICApXG4gICAgICAgICQoYnV0dG9uKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGNoZWNrLmRpY2Uucm9sbClcbiAgICAgICAgYXdhaXQgdGFyZ2V0LnB1Ymxpc2hDaGVja1Jlc3VsdCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyb2xsLW1lbGVlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICAgICAgY3JpdGljYWw6IGJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsID09PSAndHJ1ZScsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gYnV0dG9uLmRhdGFzZXQuZGVhbGVyXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnRhcmdldEtleSA9IGJ1dHRvbi5kYXRhc2V0LnRhcmdldFxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5pdGVtSWQgPSBidXR0b24uZGF0YXNldC53ZWFwb25cbiAgICAgICAgaWYgKG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIHtcbiAgICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgICAgIH1cbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudXBkYXRlQ2hhdENhcmQoKVxuXG4gICAgICAgIC8vIGNvbnN0IGRhbWFnZUNhcmQgPSBuZXcgQ29DN0RhbWFnZVJvbGwoXG4gICAgICAgIC8vICBidXR0b24uZGF0YXNldC53ZWFwb24sXG4gICAgICAgIC8vICBidXR0b24uZGF0YXNldC5kZWFsZXIsXG4gICAgICAgIC8vICB7XG4gICAgICAgIC8vICAgIHRhcmdldEtleTogYnV0dG9uLmRhdGFzZXQudGFyZ2V0LFxuICAgICAgICAvLyAgICBjcml0aWNhbDogJ3RydWUnID09IGJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsLFxuICAgICAgICAvLyAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgLy8gIH0pO1xuICAgICAgICAvLyBpZiggb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkgZGFtYWdlQ2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgICAgICAvLyBkYW1hZ2VDYXJkLnJvbGxEYW1hZ2UoKTtcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIHtcbiAgICAgICAgLy8gIGZvciAoY29uc3QgYiBvZiBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkLWJ1dHRvbnMnKSkgeyBiLnJlbW92ZSgpIH1cbiAgICAgICAgLy8gIGF3YWl0IENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKCBjYXJkKTtcbiAgICAgICAgLy8gfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncmFuZ2UtaW5pdGlhdG9yLXNob290Jzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICByYW5nZUluaXRpYXRvci5hZGRTaG90QXRDdXJyZW50VGFyZ2V0KClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3IudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncmFuZ2UtaW5pdGlhdG9yLXJvbGwnOiB7XG4gICAgICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLnJlc29sdmVDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JvbGwtcmFuZ2UtZGFtYWdlJzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5yb2xsRGFtYWdlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2RlYWwtbWVsZWUtZGFtYWdlJzoge1xuICAgICAgICBjb25zdCB0YXJnZXRLZXkgPSBjYXJkLmRhdGFzZXQudGFyZ2V0S2V5XG4gICAgICAgIGNvbnN0IGFtb3VudCA9IGNhcmQuZGF0YXNldC5yZXN1bHRcbiAgICAgICAgY29uc3QgdGFyZ2V0QWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICBhd2FpdCB0YXJnZXRBY3Rvci5kZWFsRGFtYWdlKGFtb3VudClcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpXG4gICAgICAgIGNvbnN0IGRpY2VUb3RhbCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgICAgICAkKGRpY2VUb3RhbCkuYXBwZW5kKCc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nKVxuICAgICAgICBpZiAoYnV0dG9ucykgYnV0dG9ucy5yZW1vdmUoKVxuICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChjYXJkKVxuXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlYWwtcmFuZ2UtZGFtYWdlJzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5kZWFsRGFtYWdlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAndGVzdGNoZWNrJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5mb3JjZVBhc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JjZS1wYXNzJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5mb3JjZVBhc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JjZS1mYWlsJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5mb3JjZUZhaWwoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdpbmNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5pbmNyZWFzZVN1Y2Nlc3NMZXZlbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlY3JlYXNlLXN1Y2Nlc3MtbGV2ZWwnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmRlY3JlYXNlU3VjY2Vzc0xldmVsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmV2ZWFsLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlzQ3RybEtleShldmVudClcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoeyBtYWtlUHVibGljOiB0cnVlIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoeyBtYWtlUHVibGljOiB0cnVlIH0pXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1jaGVjay1jYXJkJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5zdGFuZGJ5ID0gZmFsc2VcbiAgICAgICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oKVxuICAgICAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCh7IGZvcmNlUm9sbDogdHJ1ZSB9KVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmbGFnLWZvci1kZXZlbG9wbWVudCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgY2hlY2suZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmVzZXQtY3JlYXR1cmUtc2FuLWRhdGEnOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLmNsZWFyU2FuTG9zc1JlYXNvbigpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1zYW4tY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnJvbGxTYW4oKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2FkdmFuY2Utc3RhdGUnOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLmFkdmFuY2VTdGF0ZShcbiAgICAgICAgICBidXR0b24uZGF0YXNldC5zdGF0ZSAvKiwgYnV0dG9uLmRhdGFzZXQucGFyYW0gKi9cbiAgICAgICAgKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtc2FuLWxvc3MnOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnJvbGxTYW5Mb3NzKClcbiAgICAgICAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWludC1jaGVjayc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucm9sbEludCgpXG4gICAgICAgIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgLy8gY2FzZSAnYXBwbHktc2FuLWxvc3MnOntcbiAgICAgIC8vICBjb25zdCBzYW5DaGVjayA9IENvQzdTYW5DaGVjay5nZXRGcm9tQ2FyZCggY2FyZCk7XG4gICAgICAvLyAgYXdhaXQgc2FuQ2hlY2suYXBwbHlTYW5Mb3NzKCk7XG4gICAgICAvLyAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKTtcbiAgICAgIC8vICBicmVhaztcbiAgICAgIC8vIH1cblxuICAgICAgLy8gY2FzZSAncmV2ZWFsLXNhbi1jaGVjayc6e1xuICAgICAgLy8gIGNvbnN0IHNhbkNoZWNrID0gQ29DN1NhbkNoZWNrLmdldEZyb21DYXJkKCBjYXJkKTtcbiAgICAgIC8vICBzYW5DaGVjay5pc0JsaW5kID0gZmFsc2U7XG4gICAgICAvLyAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKTtcbiAgICAgIC8vICBicmVhaztcbiAgICAgIC8vIH1cblxuICAgICAgY2FzZSAncm9sbC1jb24tY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IGNvbkNoZWNrID0gQ29DN0NvbkNoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IGNvbkNoZWNrLnJvbGxDb24oKVxuICAgICAgICBjb25DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jb24tY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IGNvbkNoZWNrID0gQ29DN0NvbkNoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNvbkNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgICAgICBjb25DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0b2dnbGluZyB0aGUgdmlzaWJpbGl0eSBvZiBjaGF0IGNhcmQgY29udGVudCB3aGVuIHRoZSBuYW1lIGlzIGNsaWNrZWRcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBfb25DaGF0Q2FyZFRvZ2dsZUNvbnRlbnQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGhlYWRlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBjYXJkID0gaGVhZGVyLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQnKVxuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBpZiAoIWNvbnRlbnQuc3R5bGUuZGlzcGxheSkge1xuICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPVxuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJ2Jsb2NrJyA6ICdub25lJ1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVSZXNvbHRpb24gfSBmcm9tICcuL21lbGVlLXJlc29sdXRpb24uanMnXG5pbXBvcnQgeyBDaGF0Q2FyZEFjdG9yIH0gZnJvbSAnLi4vY2FyZC1hY3Rvci5qcydcblxuLy8gVE9ETyA6IHLDqWN1cMOpcmVyIGxlIGpldCBlbiB0YW50IHF1J29iamV0ICEhIVxuZXhwb3J0IGNsYXNzIENvQzdNZWxlZUluaXRpYXRvciBleHRlbmRzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBpdGVtSWQgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgc3VwZXIoYWN0b3JLZXksIGZhc3RGb3J3YXJkKVxuICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG4gICAgdGhpcy5vdXRudW1iZXJlZCA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxuICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5odG1sJ1xuICB9XG5cbiAgYXN5bmMgcmV2ZWFsQ2hlY2sgKCkge1xuICAgIC8vIFRPRE8gOiBvbiB1dGlsaXNlIGwndXBkYXRlIGR1IG1lc3NhZ2UgYXUgbGlldSBkZSByZWNvbnN0cnVpcmUgbCdvYmpldC4gQ2hhbmdlciBjZSBjb21wb3J0ZW1lbnQuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnY2hlY2tSZXZlYWxlZCcsIHRydWUpXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKGNoYXRNZXNzYWdlLCBmYWxzZSlcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGlmICh0aGlzLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXNcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpc1xuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9XG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHRoaXMuaXNCbGluZCApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybVNraWxsQ2hlY2sgKHNraWxsSWQgPSBudWxsLCBwdWJsaXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxuICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgY2hlY2suc2lkZSA9ICdpbml0aWF0b3InXG4gICAgY2hlY2suYWN0aW9uID0gJ2F0dGFjaydcbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLmNoZWNrUmV2ZWFsZWQgPSBmYWxzZVxuICAgIGVsc2UgdGhpcy5jaGVja1JldmVhbGVkID0gdHJ1ZVxuXG4gICAgaWYgKHRoaXMub3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciArPSAxXG4gICAgaWYgKHRoaXMuc3VycHJpc2VkKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuICAgIGlmICh0aGlzLmRpc2FkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyIC09IDFcbiAgICBpZiAodGhpcy5hZHZhbnRhZ2UpIGNoZWNrLmRpY2VNb2RpZmllciArPSAxXG5cbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIGlmIChwdWJsaXNoKSBjaGVjay50b01lc3NhZ2UoKVxuXG4gICAgdGhpcy5jcml0aWNhbERhbWFnZSA9XG4gICAgICBjaGVjay5zdWNjZXNzTGV2ZWwgPT09IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSB8fFxuICAgICAgY2hlY2suc3VjY2Vzc0xldmVsID09PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgaWYgKHRoaXMuaGFzVGFyZ2V0ICYmICF0aGlzLmF1dG9TdWNjZXNzKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgZ2FtZS5Db0M3c29ja2V0LmV4ZWN1dGVBc0dNKCdnbWNyZWF0ZW1lc3NhZ2VhcycsIHtcbiAgICAgICAgdGFyZ2V0S2V5OiB0aGlzLnRhcmdldEtleSxcbiAgICAgICAgbWVzc2FnZUlkOiB0aGlzLm1lc3NhZ2VJZCxcbiAgICAgICAgZmFzdEZvcndhcmQ6IHRoaXMuZmFzdEZvcndhcmQsXG4gICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yS2V5XG4gICAgICB9KVxuICAgICAgdGhpcy50YXJnZXRDYXJkID0gbWVzc2FnZS5pZCB8fCBtZXNzYWdlLl9pZFxuICAgIH1cblxuICAgIGlmICh0aGlzLmF1dG9TdWNjZXNzICYmICF0aGlzLmNoZWNrLmlzRnVtYmxlKSB7XG4gICAgICB0aGlzLmNoZWNrLmZvcmNlUGFzcygpXG4gICAgfVxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcHVibGlzaENoZWNrUmVzdWx0IChjaGVjayA9IG51bGwpIHtcbiAgICBpZiAoIWNoZWNrICYmICF0aGlzLmNoZWNrKSByZXR1cm4gbnVsbFxuXG4gICAgaWYgKGNoZWNrKSB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2sodGhpcy5jaGVjaylcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcblxuICAgIHRoaXMucm9sbC5yb2xsSWNvbnMgPSBbXVxuICAgIGlmICh0aGlzLnJvbGwuY3JpdGljYWwpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdtZWRhbCcpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuZnVtYmxlKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2RhcmtyZWQnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NwaWRlcicpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuc3VjY2Vzcykge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3N0YXInKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2JsYWNrJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc2t1bGwnKVxuICAgIH1cblxuICAgIGlmICghdGhpcy50YXJnZXRDYXJkICYmICF0aGlzLmF1dG9TdWNjZXNzICYmIHRoaXMuaGFzVGFyZ2V0KSB7XG4gICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkLFxuICAgICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgICAgKVxuICAgICAgY29uc3QgcmVzb2x1dGlvbk1lc3NhZ2UgPSBhd2FpdCByZXNvbHV0aW9uQ2FyZC5wcmVDcmVhdGVNZXNzYWdlKClcbiAgICAgIHRoaXMucmVzb2x1dGlvbkNhcmQgPSByZXNvbHV0aW9uTWVzc2FnZS5pZFxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IGluaXRpYXRvciA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoaW5pdGlhdG9yLCBjYXJkKVxuICAgIGluaXRpYXRvci5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNhcmQoY2FyZClcblxuICAgIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcbiAgICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9IGVsc2UgaW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcubWVsZWUuaW5pdGlhdG9yJylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoZmxhZylcbiAgICAgIGluaXRpYXRvci51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgdXBncmFkZVJvbGwgKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgb2xkQ2FyZCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5MdWNrTm90RW5vdWdoJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgICB0aGlzLnJvbGwudmFsdWUgPSBudWxsXG4gICAgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIHRoaXMucm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgb2xkQ2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9IGZhbHNlXG5cbiAgICBjb25zdCBkaWNlUm9sbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGwnKVxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnZhbHVlID0gbnVsbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0Lmx1Y2tTcGVudCA9IHRydWVcblxuICAgIGNvbnN0IHJlc3VsRGV0YWlscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcbiAgICBjb25zdCBkaWNlVG90YWwgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICBjb25zdCByb2xsRGFtYWdlQnV0dG9uID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJ2J1dHRvbltkYXRhLWFjdGlvbj1cInJvbGwtbWVsZWUtZGFtYWdlXCJdJ1xuICAgIClcbiAgICBpZiAocm9sbERhbWFnZUJ1dHRvbikgcm9sbERhbWFnZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbnZpc2libGUnKVxuXG4gICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIGlmIChyb2xsRGFtYWdlQnV0dG9uKSByb2xsRGFtYWdlQnV0dG9uLmRhdGFzZXQuY3JpdGljYWwgPSB0cnVlXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uZGF0YXNldC5jcml0aWNhbCA9IHRydWVcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGRpY2VUb3RhbC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChvbGRDYXJkKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIEFwcGxpY2F0aW9uLCBDT05GSUcsIENPTlNULCBEaWFsb2csIERpZSwgZm91bmRyeSwgZnJvbVV1aWQsIGZyb21VdWlkU3luYywgZ2FtZSwgSG9va3MsIFJvbGwsIFRleHRFZGl0b3IsIFRva2VuLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdE1lc3NhZ2UgfSBmcm9tICcuLi9hcHBzL2NvYzctY2hhdC1tZXNzYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFNlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtc2VsZWN0aW9uLWRpYWxvZy5qcydcbmltcG9ydCB7IFBvaW50U2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9wb2ludC1zZWxlY3Rpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ2hhcmFjU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9jaGFyLXNlbGVjdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBDaGFyYWNSb2xsRGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9jaGFyLXJvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjLXNlbGVjdC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxWYWx1ZURpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtdmFsdWUtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi4vY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi4vY2hhdC9yYW5nZWNvbWJhdC5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vZGljZS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNlIEFjdG9yIGNsYXNzIHRvIGltcGxlbWVudCBhZGRpdGlvbmFsIGxvZ2ljIHNwZWNpYWxpemVkIGZvciBDb0MgN3RoLlxuICovXG5leHBvcnQgY2xhc3MgQ29DQWN0b3IgZXh0ZW5kcyBBY3RvciB7XG4gIC8qKiBDcmVhdGUgZGVyaXZlZCBkb2N1bWVudCBjbGFzc2VzIGZvciBzcGVjaWZpYyBJdGVtIHR5cGVzICovXG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgLyoqIEBzZWUgQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3NlcyBpbiBtb2R1bGUvc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzICovXG4gICAgaWYgKGRhdGEudHlwZSBpbiBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzc2VzICYmICFjb250ZXh0Py5leHRlbmRlZCkge1xuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIG5ldyBjbGFzcyB3aWxsIGNhbGwgaXQncyBzdXBlcigpLFxuICAgICAgICogdGhlIGV4dGVuZGVkIGZsYWcgd2lsbCBiZSB0cnVlLCB0aHVzIGJ5cGFzc2luZyB0aGlzIHdob2xlIHByb2Nlc3NcbiAgICAgICAqIGFuZCByZXN1bWUgZGVmYXVsdCBiZWhhdmlvclxuICAgICAgICovXG4gICAgICByZXR1cm4gbmV3IENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXNbZGF0YS50eXBlXShkYXRhLCB7XG4gICAgICAgIC4uLnsgZXh0ZW5kZWQ6IHRydWUgfSxcbiAgICAgICAgLi4uY29udGV4dFxuICAgICAgfSlcbiAgICB9XG4gICAgLy8gaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyAgIGlmIChkYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAvLyAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9za2lsbHMuc3ZnJ1xuICAgIC8vICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzdGF0dXMnKSB7XG4gICAgLy8gICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9hdXJhLnN2ZydcbiAgICAvLyAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2VhcG9uJykge1xuICAgIC8vICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvc3dvcmQuc3ZnJ1xuICAgIC8vICAgfVxuICAgIC8vIH1cbiAgICAvKiogRGVmYXVsdCBiZWhhdmlvciwganVzdCBjYWxsIHN1cGVyKCkgYW5kIGRvIGFsbCB0aGUgZGVmYXVsdCBJdGVtIGluaXRzICovXG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUgKCkge1xuICAgIHN1cGVyLmluaXRpYWxpemUoKVxuICAgIGF3YWl0IHRoaXMuY3JlYXR1cmVJbml0KCkgLy8gVE9ETyA6IG1vdmUgdGhpcyBpbiBDb0NBY3Rvci5jcmVhdGUoZGF0YSwgb3B0aW9ucylcbiAgfVxuXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKiogVGVzdGluZ1xuICAvLyBhc3luYyB1cGRhdGUoZGF0YSwgb3B0aW9ucz17fSkge1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygncmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTsnKTtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oYGludCA6ICR7dGhpcy5jaGFyYWN0ZXJpc3RpY3MuaW50fWApO1xuICAvLyAgIHRoaXMuY2hhcmFjdGVyaXN0aWNzLmludCA9IDE1O1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgbW9kaWZpZWQgaW50IDogJHt0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnR9YCk7XG4gIC8vICAgcmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTtcbiAgLy8gfVxuXG4gIC8vIGdldCBjaGFyYWN0ZXJpc3RpY3MoKXtcbiAgLy8gICBjb25zdCBhY3RvciA9IHRoaXM7XG4gIC8vICAgICByZXR1cm4ge1xuICAvLyAgICAgICBnZXQgaW50KCl7XG4gIC8vICAgICAgICAgcmV0dXJuIGFjdG9yLmdldFByb3AoJ19pbnQnKTtcbiAgLy8gICAgICAgfSxcblxuICAvLyAgICAgICBzZXQgaW50KHgpe1xuICAvLyAgICAgICAgIGFjdG9yLnNldFByb3AoJ19pbnQnLCB4KTtcbiAgLy8gICAgICAgfVxuICAvLyAgICB9O1xuICAvLyB9XG5cbiAgLy8gc2V0UHJvcChrZXksIHgpe1xuICAvLyAgIHRoaXNba2V5XSA9IHg7XG4gIC8vIH1cblxuICAvLyBnZXRQcm9wKGtleSl7XG4gIC8vICAgcmV0dXJuIHRoaXNba2V5XXx8MDtcbiAgLy8gfVxuICAvL1xuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogUHJlcGFyZSBkYXRhIHJlbGF0ZWQgdG8gdGhpcyBEb2N1bWVudCBpdHNlbGYsIGJlZm9yZSBhbnkgZW1iZWRkZWQgRG9jdW1lbnRzIG9yIGRlcml2ZWQgZGF0YSBpcyBjb21wdXRlZC5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqL1xuICBwcmVwYXJlQmFzZURhdGEgKCkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyh0aGlzLnR5cGUpKSB7XG4gICAgICB0aGlzLnN5c3RlbS5za2lsbHMgPSB7fVxuICAgICAgZm9yIChjb25zdCBpIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgICAgaWYgKGkudHlwZSAhPT0gJ3NraWxsJykgY29udGludWVcbiAgICAgICAgdGhpcy5zeXN0ZW0uc2tpbGxzW2Ake2kuaXRlbUlkZW50aWZpZXJ9YF0gPSB7IGZvdW5kcnlJRDogaS5pZCwgY29jaWQ6IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQsIHZhbHVlOiBpLnJhd1ZhbHVlLCBib251c0RpY2U6IGkuc3lzdGVtLmJvbnVzRGljZSB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAqIFJlbW92YWwgb2YgMS81IHNhbml0eVxuICAgICAqIHRoaXMgaXMgdG8gcmVtb3ZlIHRoZVxuICAgICAqIGFjdG9yLmRhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgdG8gYmUgcmVtb3ZlZCBmcm9tIHRlbXBsYXRlXG4gICAgICogYW5kIGluZGVmaW5pdGVJbnNhbml0eUxldmVsIHRvIGJlIHJlbW92ZWQgZnJvbSB0ZW1wbGF0ZVxuICAgICAqL1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkpIHtcbiAgICAgICAgICBjb25zdCBzID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkuc3BsaXQoJy8nKVxuICAgICAgICAgIGlmIChzWzFdICYmICFpc05hTihOdW1iZXIoc1sxXSkpKSB7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID0gTnVtYmVyKHNbMV0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQgPSAwXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQgPSAwXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcmV0dXJuIGNvbXB1dGVkIHZhbHVlcyBvciBmaXhlZCB2YWx1ZXMgaWYgbm90IGF1dG8uXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9IHRoaXMucmF3TW92XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID0gdGhpcy5yYXdEYlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9IHRoaXMucmF3QnVpbGRcblxuICAgICAgLy8gRm9yIHZlaGljbGUgb25seSA6XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPSB0aGlzLmhwXG5cbiAgICAgIC8vIGlmIChcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPiBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggfHxcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4ID09IG51bGxcbiAgICAgIC8vICkge1xuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heFxuICAgICAgLy8gfVxuICAgICAgLy8gaWYgKFxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA+IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCB8fFxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggPT0gbnVsbFxuICAgICAgLy8gKSB7XG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4XG4gICAgICAvLyB9XG5cbiAgICAvLyBpZiAoXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9PSBudWxsICYmXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggIT0gbnVsbFxuICAgIC8vICkge1xuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXhcbiAgICAvLyB9XG4gICAgLy8gaWYgKFxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPT0gbnVsbCAmJlxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4ICE9IG51bGxcbiAgICAvLyApIHtcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4XG4gICAgLy8gfVxuICAgIH1cbiAgICBzdXBlci5wcmVwYXJlQmFzZURhdGEoKVxuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKiBQcmVwYXJlIGFsbCBlbWJlZGRlZCBEb2N1bWVudCBpbnN0YW5jZXMgd2hpY2ggZXhpc3Qgd2l0aGluIHRoaXMgcHJpbWFyeSBEb2N1bWVudC5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqIGFjdGl2ZSBlZmZlY3RzIGFyZSBhcHBsaWVkXG4gICAqL1xuICBwcmVwYXJlRW1iZWRkZWREb2N1bWVudHMgKCkge1xuICAgIHN1cGVyLnByZXBhcmVFbWJlZGRlZERvY3VtZW50cygpXG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIEFwcGx5IHRyYW5zZm9ybWF0aW9ucyBvciBkZXJpdmF0aW9ucyB0byB0aGUgdmFsdWVzIG9mIHRoZSBzb3VyY2UgZGF0YSBvYmplY3QuXG4gICAqIENvbXB1dGUgZGF0YSBmaWVsZHMgd2hvc2UgdmFsdWVzIGFyZSBub3Qgc3RvcmVkIHRvIHRoZSBkYXRhYmFzZS5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqL1xuICBwcmVwYXJlRGVyaXZlZERhdGEgKCkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyh0aGlzLnR5cGUpKSB7XG4gICAgICBzdXBlci5wcmVwYXJlRGVyaXZlZERhdGEoKVxuICAgICAgLy8gU2V0IGhwTWF4LCBtcE1heCwgc2FuTWF4LCBtb3YsIGRiLCBidWlsZC4gVGhpcyBpcyB0byBhbGxvdyBjYWxjdWxhdGlvbiBvZiBkZXJpdmVkIHZhbHVlIHdpdGggbW9kaWZlZCBjaGFyYWN0ZXJpc3RpY3MuXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9IHRoaXMucmF3TW92XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID0gdGhpcy5yYXdEYlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9IHRoaXMucmF3QnVpbGRcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXggPSB0aGlzLnJhd0hwTWF4XG4gICAgICBpZiAodGhpcy5ocCA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSA9IHRoaXMucmF3SHBNYXhcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5tYXggPSB0aGlzLnJhd01wTWF4XG4gICAgICBpZiAodGhpcy5tcCA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA9IHRoaXMucmF3TXBNYXhcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4ID0gdGhpcy5yYXdTYW5NYXhcbiAgICAgIGlmICh0aGlzLnNhbiA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgPSB0aGlzLnJhd1Nhbk1heFxuXG4gICAgICAvLyBBcHBseSBlZmZlY3RzIHRvIGF1dG9tYXRpY2FseSBjYWxjdWxhdGVkIHZhbHVlcy5cbiAgICAgIGNvbnN0IGZpbHRlck1hdHJpeCA9IFtdXG5cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5ocC5tYXgnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubXAuYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLm1wLm1heCcpXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLnNhbi5tYXgnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIuYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJylcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZScpXG5cbiAgICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLmVmZmVjdHMucmVkdWNlKChjaGFuZ2VzLCBlKSA9PiB7XG4gICAgICAgIGlmIChlLmRpc2FibGVkIHx8IGUuaXNTdXBwcmVzc2VkKSByZXR1cm4gY2hhbmdlc1xuICAgICAgICByZXR1cm4gY2hhbmdlcy5jb25jYXQoXG4gICAgICAgICAgZS5jaGFuZ2VzLm1hcChjID0+IHtcbiAgICAgICAgICAgIGMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShjKVxuICAgICAgICAgICAgYy5lZmZlY3QgPSBlXG4gICAgICAgICAgICBjLnByaW9yaXR5ID0gYy5wcmlvcml0eSA/PyBjLm1vZGUgKiAxMFxuICAgICAgICAgICAgcmV0dXJuIGNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9LCBbXSlcbiAgICAgIGNoYW5nZXMuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpXG5cbiAgICAgIGNvbnN0IHNlbGVjdENoYW5nZXMgPSBjaGFuZ2VzLmZpbHRlcihlID0+IGZpbHRlck1hdHJpeC5pbmNsdWRlcyhlLmtleSkpXG5cbiAgICAgIC8vIEFwcGx5IGFsbCBjaGFuZ2VzXG4gICAgICBmb3IgKGNvbnN0IGNoYW5nZSBvZiBzZWxlY3RDaGFuZ2VzKSB7XG4gICAgICAgIGNoYW5nZS5lZmZlY3QuYXBwbHkodGhpcywgY2hhbmdlKVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5ocE1heCAmJiB0aGlzLmhwTWF4IDwgdGhpcy5ocCkgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlID0gdGhpcy5ocE1heCB9XG4gICAgICBpZiAodGhpcy5tcE1heCAmJiB0aGlzLm1wTWF4IDwgdGhpcy5tcCkgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID0gdGhpcy5tcE1heCB9XG4gICAgICBpZiAodGhpcy5zYW5NYXggJiYgdGhpcy5zYW5NYXggPCB0aGlzLnNhbikgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA9IHRoaXMuc2FuTWF4IH1cbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChkYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBkYXRhLnByb3RvdHlwZVRva2VuID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChkYXRhLnByb3RvdHlwZVRva2VuIHx8IHt9LCB7XG4gICAgICAgIGFjdG9yTGluazogdHJ1ZSxcbiAgICAgICAgZGlzcG9zaXRpb246IDEsXG4gICAgICAgIHNpZ2h0OiB7XG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnbnBjJykge1xuICAgICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcgfHwgZGF0YS5pbWcgPT09ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJykge1xuICAgICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2N1bHRpc3Quc3ZnJ1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY3JlYXR1cmUnKSB7XG4gICAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJyB8fCBkYXRhLmltZyA9PT0gJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvZmxvYXRpbmctdGVudGFjbGVzLnN2ZydcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnIHx8IGRhdGEuaW1nID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL2NoZXN0LnN2ZydcbiAgICAgIH1cbiAgICAgIGRhdGEucHJvdG90eXBlVG9rZW4gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGRhdGEucHJvdG90eXBlVG9rZW4gfHwge30sIHtcbiAgICAgICAgYWN0b3JMaW5rOiB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpXG4gIH1cblxuICAvKipcbiAgICogRWFybHkgdmVyc2lvbiBvbiB0ZW1wbGF0ZXMgZGlkIG5vdCBpbmNsdWRlIHBvc3NpYmlsaXR5IG9mIGF1dG8gY2FsY1xuICAgKiBKdXN0IGNoZWNrIGlmIGF1dG8gaXMgdW5kZWZpbmVkLCBpbiB3aGljaCBjYXNlIGl0IHdpbGwgYmUgc2V0IHRvIHRydWVcbiAgICovXG4gIGNoZWNrVW5kZWZpbmVkQXV0byAoKSB7XG4gICAgY29uc3QgcmV0dXJuRGF0YSA9IHtcbiAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgaHA6IHt9LFxuICAgICAgICBtcDoge30sXG4gICAgICAgIHNhbjoge30sXG4gICAgICAgIG1vdjoge30sXG4gICAgICAgIGRiOiB7fSxcbiAgICAgICAgYnVpbGQ6IHt9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5ocD8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuaHAuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1wPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5tcC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uc2FuPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5zYW4uYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1vdj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMubW92LmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5kYj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuZGIuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LmJ1aWxkPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5idWlsZC5hdXRvID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiByZXR1cm5EYXRhXG4gIH1cblxuICBnZXQgY2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7XG4gICAgICBzdHI6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5TVFInLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5TdHJlbmd0aCcsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBjb246IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5DT04nLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgc2l6OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuU0laJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBkZXg6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5ERVgnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5EZXh0ZXJpdHknLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgYXBwOiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuQVBQJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBpbnQ6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5JTlQnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgcG93OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuUE9XJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuUG93ZXInLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgZWR1OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuRURVJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzXG4gICAgICApKSB7XG4gICAgICAgIGNoYXJhY3RlcmlzdGljc1trZXldID0ge1xuICAgICAgICAgIGtleSxcbiAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbCksXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlLFxuICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IodmFsdWUudmFsdWUgLyAyKSB8fCBudWxsLFxuICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IodmFsdWUudmFsdWUgLyA1KSB8fCBudWxsLFxuICAgICAgICAgIGZvcm11bGE6IHZhbHVlLmZvcm11bGFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWNzXG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gdG9rZW4gY3JlYXRpb24gZnJvbSBwcmVDcmVhdGVBY3RvciBob29rXG4gICAqIEBwYXJhbSB7Kn0gY3JlYXRlRGF0YVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGluaXRUb2tlbiAoY3JlYXRlRGF0YSkge1xuICAgIC8vIGNhbGxlZCB1cG9uIHRva2VuIGNyZWF0aW9uLmFjdGl2ZVxuICAgIGlmIChjcmVhdGVEYXRhKSB7XG4gICAgICAvL1xuICAgIH1cbiAgfVxuXG4gIGdldCBoYXNUZW1wb0luc2FuZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lKVxuICB9XG5cbiAgZ2V0IGdldFRlbXBvSW5zYW5lRHVyYXRpb25UZXh0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25WYWx1ZShDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSwgJ2R1cmF0aW9uVGV4dCcpXG4gIH1cblxuICBnZXQgaGFzSW5kZWZJbnNhbmUgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgfVxuXG4gIGdldCBwb3J0cmFpdCAoKSB7XG4gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSByZXR1cm4gdGhpcy5pbWdcbiAgICByZXR1cm4gdGhpcy50b2tlbj8udGV4dHVyZT8uc3JjIHx8IHRoaXMucHJvdG90eXBlVG9rZW4/LnRleHR1cmU/LnNyYyB8fCB0aGlzLmltZ1xuICB9XG5cbiAgYXN5bmMgZW50ZXJCb3V0T2ZNYWRuZXNzIChyZWFsVGltZSA9IHRydWUsIGR1cmF0aW9uID0gMSkge1xuICAgIC8vIGNvbnN0IGR1cmF0aW9uID0ge3JvdW5kczogMSxcbiAgICAvLyAgIHNlY29uZHM6IDE3LFxuICAgIC8vICAgc3RhcnRSb3VuZDogMyxcbiAgICAvLyAgIHN0YXJ0VGltZTogNTgsXG4gICAgLy8gICBzdGFydFR1cm46IDQsXG4gICAgLy8gICB0dXJuczogMn07XG4gICAgLy8gYXdhaXQgdGhpcy5ib3V0T2ZNYWRuZXNzPy5zZXRGbGFnKCAnQ29DNycsICdtYWRuZXNzJywgdHJ1ZSk7XG5cbiAgICBsZXQgcmVzdWx0ID0gbnVsbFxuICAgIGNvbnN0IGJvdXRPZk1hZG5lc3NUYWJsZUlkID0gcmVhbFRpbWVcbiAgICAgID8gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJylcbiAgICBpZiAoYm91dE9mTWFkbmVzc1RhYmxlSWQgIT09ICdub25lJykge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBwaG9iaWE6IGZhbHNlLFxuICAgICAgICBtYW5pYTogZmFsc2UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsXG4gICAgICB9XG4gICAgICBjb25zdCBib3V0T2ZNYWRuZXNzVGFibGUgPSBnYW1lLnRhYmxlcy5nZXQoYm91dE9mTWFkbmVzc1RhYmxlSWQpXG4gICAgICByZXN1bHQudGFibGVSb2xsID0gYXdhaXQgYm91dE9mTWFkbmVzc1RhYmxlLnJvbGwoKVxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBDT05TVC5UQUJMRV9SRVNVTFRfVFlQRVMuRE9DVU1FTlQgPT09XG4gICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kb2N1bWVudElkKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbT8udHlwZT8ucGhvYmlhKSByZXN1bHQucGhvYmlhID0gdHJ1ZVxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtPy50eXBlPy5tYW5pYSkgcmVzdWx0Lm1hbmlhID0gdHJ1ZVxuICAgICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gYCR7aXRlbS5uYW1lfTpgICsgYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgeyBhc3luYzogdHJ1ZSB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXN1bHQubmFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtLnRvT2JqZWN0KClcbiAgICAgICAgICAgIGRlbGV0ZSBpdGVtRGF0YS5faWRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbURhdGFdKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZUJvdXRPZk1hZG5lc3NJdGVtTm90Rm91bmQnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLlRFWFQgPT09XG4gICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnRleHQsXG4gICAgICAgICAgICB7IGFzeW5jOiB0cnVlIH1cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VCb3V0T2ZNYWRuZXNzVGFibGVOb3RGb3VuZCcpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBpdCdzIG5vdCBhIHJlYWwgdGltZSBubyBuZWVkIHRvIGFjdGl2YXRlIHRoZSBib3V0XG4gICAgaWYgKCFyZWFsVGltZSkgcmV0dXJuIHJlc3VsdFxuXG4gICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUsIHtcbiAgICAgIHJlYWxUaW1lLFxuICAgICAgZHVyYXRpb25cbiAgICB9KVxuXG4gICAgLy8gY29uc3QgZWZmZWN0ID0gdGhpcy5lZmZlY3RzLmdldCggZWZmZWN0RGF0YS5faWQpO1xuICAgIC8vIGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSk7XG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gbmV3IGFjdG9yIGNyZWF0aW9uLlxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zXG4gICAqL1xuICAvLyBzdGF0aWMgYXN5bmMgY3JlYXRlKGRhdGEsIG9wdGlvbnMpIHtcbiAgLy8gIC8vIElmIHRoZSBjcmVhdGVkIGFjdG9yIGhhcyBpdGVtcyAob25seSBhcHBsaWNhYmxlIHRvIGR1cGxpY2F0ZWQgYWN0b3JzKSBieXBhc3MgdGhlIG5ldyBhY3RvciBjcmVhdGlvbiBsb2dpY1xuICAvLyAgaWYgKGRhdGEuaXRlbXMpIHtcbiAgLy8gICAgcmV0dXJuIHN1cGVyLmNyZWF0ZShkYXRhLCBvcHRpb25zKTtcbiAgLy8gIH1cbiAgLy8gIHJldHVybiBzdXBlci5jcmVhdGUoZGF0YSwgb3B0aW9ucyk7XG4gIC8vIH1cblxuICBzdGF0aWMgZW1wdHlTa2lsbCAoXG4gICAgc2tpbGxOYW1lLFxuICAgIHZhbHVlLFxuICAgIHtcbiAgICAgIHJhcml0eSA9IGZhbHNlLFxuICAgICAgcHVzaCA9IHRydWUsXG4gICAgICBjb21iYXQgPSBmYWxzZSxcbiAgICAgIGltZyA9IGZhbHNlLFxuICAgICAgc3BlY2lhbGl6YXRpb24gPSBmYWxzZVxuICAgIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogc2tpbGxOYW1lLFxuICAgICAgdHlwZTogJ3NraWxsJyxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICB2YWx1ZSxcbiAgICAgICAgc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogJycsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiBmYWxzZSxcbiAgICAgICAgICByYXJpdHksXG4gICAgICAgICAgcHVzaCxcbiAgICAgICAgICBjb21iYXRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW1nICE9PSBmYWxzZSkge1xuICAgICAgZGF0YS5pbWcgPSBpbWdcbiAgICB9XG4gICAgaWYgKHNwZWNpYWxpemF0aW9uICE9PSBmYWxzZSkge1xuICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24pXG4gICAgICBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICBkYXRhLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgIGRhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiBsaXN0IG9mIHNraWxscyBieSByZW1vdmluZyBzcGVjaWFsaXphdGlvbiBmcm9tIG5hbWVcbiAgICovXG4gIC8vIGFzeW5jIGNsZWFuU2tpbGxzICgpIHtcbiAgLy8gICBEaWFsb2cuY29uZmlybSh7XG4gIC8vICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNsZWFuU2tpbGxMaXN0Jyl9YCxcbiAgLy8gICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DbGVhblNraWxsTGlzdEhpbnQnKX08L3A+YCxcbiAgLy8gICAgIHllczogKCkgPT4gY2xlYW4odGhpcylcbiAgLy8gICB9KVxuICAvLyAgIGFzeW5jIGZ1bmN0aW9uIGNsZWFuIChhY3Rvcikge1xuICAvLyAgICAgY29uc3QgdXBkYXRlID0gW11cbiAgLy8gICAgIGFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT4ge1xuICAvLyAgICAgICBpZiAocy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gIC8vICAgICAgICAgY29uc3QgY2xlYW4gPSBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMocyk/LnRyaW0oKVxuICAvLyAgICAgICAgIGlmIChjbGVhbi50b0xvd2VyQ2FzZSgpICE9IHMubmFtZS50b0xvd2VyQ2FzZSgpIHx8IGNsZWFuLnRvTG93ZXJDYXNlKCkgIT0gcy5kYXRhLm5hbWUudG9Mb3dlckNhc2UoKSkge1xuICAvLyAgICAgICAgICAgdXBkYXRlLnB1c2goe1xuICAvLyAgICAgICAgICAgICBfaWQ6IHMuaWQsXG4gIC8vICAgICAgICAgICAgIG5hbWU6IGNsZWFuXG4gIC8vICAgICAgICAgICB9KVxuICAvLyAgICAgICAgIH1cbiAgLy8gICAgICAgfVxuICAvLyAgICAgfSlcbiAgLy8gICAgIGlmICh1cGRhdGUubGVuZ3RoICE9IDApe1xuICAvLyAgICAgICBhd2FpdCBhY3Rvci51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHVwZGF0ZSlcbiAgLy8gICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgU2tpbGxzIDogJHtBcnJheS5mcm9tKCB1cGRhdGUsIGUgPT4gZS5uYW1lKS5qb2luKCcsICcpfSB1cGRhdGVkLmApXG4gIC8vICAgICB9IGVsc2Uge1xuICAvLyAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oICdTa2lsbCBsaXN0IHdhcyBjbGVhbiBhbHJlYWR5ICEnKVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgY3JlYXRlU2tpbGwgKHNraWxsTmFtZSwgdmFsdWUsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IENvQ0FjdG9yLmVtcHR5U2tpbGwoc2tpbGxOYW1lLCB2YWx1ZSlcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVdlYXBvblNraWxsIChuYW1lLCBmaXJlYXJtcyA9IGZhbHNlLCBiYXNlID0gbnVsbCkge1xuICAgIC8vIFRPRE8gOiBBc2sgZm9yIGJhc2UgdmFsdWUgaWYgbnVsbFxuXG4gICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjU2VsZWN0RGlhbG9nLmNyZWF0ZShcbiAgICAgIFtdLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKSxcbiAgICAgIDAsXG4gICAgICBuYW1lXG4gICAgKVxuICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKHNraWxsRGF0YS5nZXQoJ2Jhc2UtdmFsdWUnKSlcbiAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICBuYW1lLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKVxuICAgIClcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogcGFydHMubmFtZSxcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBzeXN0ZW06IHtcbiAgICAgICAgYmFzZTogaXNOYU4odmFsdWUpID8gMCA6IHZhbHVlLFxuICAgICAgICBhZGp1c3RtZW50czoge1xuICAgICAgICAgIHBlcnNvbmFsOiBudWxsLFxuICAgICAgICAgIG9jY3VwYXRpb246IG51bGwsXG4gICAgICAgICAgYXJjaGV0eXBlOiBudWxsLFxuICAgICAgICAgIGV4cGVyaWVuY2U6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgc2tpbGxOYW1lOiBwYXJ0cy5za2lsbE5hbWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uOiBwYXJ0cy5zcGVjaWFsaXphdGlvbixcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHNwZWNpYWw6IHRydWUsXG4gICAgICAgICAgZmlnaHRpbmc6ICFmaXJlYXJtcyxcbiAgICAgICAgICBmaXJlYXJtOiBmaXJlYXJtcyxcbiAgICAgICAgICBjb21iYXQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogIWJhc2VcbiAgICB9KVxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUobmFtZSlcbiAgICByZXR1cm4gc2tpbGxbMF1cbiAgfVxuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGEgY3JlYXR1cmUgd2l0aCBtaW5pbXVtcyBza2lsbHNcbiAgICovXG4gIGFzeW5jIGNyZWF0dXJlSW5pdCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ2NyZWF0dXJlJykgcmV0dXJuXG4gICAgaWYgKHRoaXMuZ2V0QWN0b3JGbGFnKCdpbml0aWFsaXplZCcpKSByZXR1cm4gLy8gQ2hhbmdlIHRvIHJldHVybiBza2lsbCA/XG5cbiAgICAvLyBDaGVjayBpZiBmaWdodGluZyBza2lsbHMgZXhpc3RzLCBpZiBub3QgY3JlYXRlIGl0IGFuZCB0aGUgYXNzb2NpYXRlZCBhdHRhY2suXG4gICAgY29uc3Qgc2tpbGxzID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwpXG4gICAgKVxuICAgIGlmIChza2lsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBDcmVhdGluZyBuYXR1cmFsIGF0dGFjayBza2lsbFxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCksXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUpXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgICAgIG5hbWU6IHBhcnRzLm5hbWUsXG4gICAgICAgICAgc3lzdGVtOiB7XG4gICAgICAgICAgICBiYXNlOiAwLFxuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBza2lsbE5hbWU6IHBhcnRzLnNraWxsTmFtZSxcbiAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uOiBwYXJ0cy5zcGVjaWFsaXphdGlvbixcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICAgICAgICBmaWdodGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgc3BlY2lhbDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZsYWdzOiB7fVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBhdHRhY2sgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgICAgICdJdGVtJyxcbiAgICAgICAgICBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG5hbWU6ICdJbm5hdGUgYXR0YWNrJyxcbiAgICAgICAgICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICAgICAgICAgIHN5c3RlbToge1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogXCJDcmVhdHVyZSdzIG5hdHVyYWwgYXR0YWNrXCIsXG4gICAgICAgICAgICAgICAgICBjaGF0OiBcIkNyZWF0dXJlJ3MgbmF0dXJhbCBhdHRhY2tcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgd3BuVHlwZTogJ2lubmF0ZScsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgYWRkYjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNsbnQ6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH1cbiAgICAgICAgKVxuICAgICAgICBpZiAoc2tpbGwubGVuZ3RoID4gMCAmJiBhdHRhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IGNyZWF0ZWRBdHRhY2sgPSB0aGlzLml0ZW1zLmdldChhdHRhY2tbMF0uaWQpXG4gICAgICAgICAgYXdhaXQgY3JlYXRlZEF0dGFjay51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLmlkJzogc2tpbGxbMF0uaWQsXG4gICAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4ubmFtZSc6IHNraWxsWzBdLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignQ3JlYXR1cmUgaW5pdDogJyArIGVyci5tZXNzYWdlKVxuICAgICAgfVxuICAgICAgLy8gY29uc29sZS5sb2coICdTa2lsbCBjcmVhdGVkJyk7XG4gICAgICBhd2FpdCB0aGlzLnNldEFjdG9yRmxhZygnaW5pdGlhbGl6ZWQnKVxuICAgICAgLy8gQ3JlYXRpbmcgY29ycmVzcG9uZGluZyB3ZWFwb24uXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlSXRlbSAoaXRlbU5hbWUsIHF1YW50aXR5ID0gMSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogaXRlbU5hbWUsXG4gICAgICB0eXBlOiAnaXRlbScsXG4gICAgICBzeXN0ZW06IHtcbiAgICAgICAgcXVhbnRpdHlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eUJvb2sgKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlQm9vayhnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSksIHNob3dTaGVldClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGl0ZW1OYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVCb29rKGl0ZW1OYW1lLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVCb29rIChpdGVtTmFtZSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogaXRlbU5hbWUsXG4gICAgICB0eXBlOiAnYm9vaycsXG4gICAgICBzeXN0ZW06IHt9XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlTcGVsbCAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTcGVsbE5hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlU3BlbGwoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSwgc2hvd1NoZWV0KVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGl0ZW1OYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTcGVsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlU3BlbGwoaXRlbU5hbWUsIHNob3dTaGVldClcbiAgfVxuXG4gIHN0YXRpYyBlbXB0eVNwZWxsIChpdGVtTmFtZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBpdGVtTmFtZSxcbiAgICAgIHR5cGU6ICdzcGVsbCcsXG4gICAgICBzeXN0ZW06IHt9XG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhc3luYyBjcmVhdGVTcGVsbCAoaXRlbU5hbWUsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IENvQ0FjdG9yLmVtcHR5U3BlbGwoaXRlbU5hbWUpXG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eVNraWxsIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVTa2lsbChcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSxcbiAgICAgICAgKHRoaXMudHlwZSAhPT0gJ2NoYXJhY3RlcicgPyAxIDogbnVsbCksXG4gICAgICAgIHNob3dTaGVldFxuICAgICAgKVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IHNraWxsTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbE5hbWUpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBza2lsbE5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVTa2lsbChza2lsbE5hbWUsIG51bGwsIHNob3dTaGVldClcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5SXRlbSAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVJdGVtKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSwgMSwgc2hvd1NoZWV0KVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoaXRlbU5hbWUpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUl0ZW0oaXRlbU5hbWUsIDEsIHNob3dTaGVldClcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5V2VhcG9uIChldmVudCA9IG51bGwsIHByb3BlcnRpZXMgPSB7fSkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGxldCB3ZWFwb25OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3V2VhcG9uTmFtZSlcbiAgICBpZiAodGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3V2VhcG9uTmFtZSkpKSB7XG4gICAgICBsZXQgaW5kZXggPSAwXG4gICAgICB3ZWFwb25OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3V2VhcG9uTmFtZSkgKyAnICcgKyBpbmRleFxuICAgICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHdlYXBvbk5hbWUpKSB7XG4gICAgICAgIGluZGV4KytcbiAgICAgICAgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpICsgJyAnICsgaW5kZXhcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogd2VhcG9uTmFtZSxcbiAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHByb3BlcnRpZXM6IHt9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBba2V5XSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPVxuICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSA/PyBmYWxzZVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQmlvU2VjdGlvbiAodGl0bGUgPSBudWxsKSB7XG4gICAgY29uc3QgYmlvID0gdGhpcy5zeXN0ZW0uYmlvZ3JhcGh5XG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICAgIDogW11cbiAgICBiaW8ucHVzaCh7XG4gICAgICB0aXRsZSxcbiAgICAgIHZhbHVlOiBudWxsXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0sIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVCaW9WYWx1ZSAoaW5kZXgsIGNvbnRlbnQpIHtcbiAgICBjb25zdCBiaW8gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgYmlvW2luZGV4XS52YWx1ZSA9IGNvbnRlbnRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0sIHsgcmVuZGVyOiBmYWxzZSB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQmlvVGl0bGUgKGluZGV4LCB0aXRsZSkge1xuICAgIGNvbnN0IGJpbyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICBiaW9baW5kZXhdLnRpdGxlID0gdGl0bGVcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0pXG4gIH1cblxuICBhc3luYyBkZWxldGVCaW9TZWN0aW9uIChpbmRleCkge1xuICAgIGNvbnN0IGJpbyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICBiaW8uc3BsaWNlKGluZGV4LCAxKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIG1vdmVCaW9TZWN0aW9uVXAgKGluZGV4KSB7XG4gICAgaWYgKGluZGV4ID09PSAwKSByZXR1cm5cbiAgICBjb25zdCBiaW8gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgaWYgKGluZGV4ID49IGJpby5sZW5ndGgpIHJldHVyblxuICAgIGNvbnN0IGVsZW0gPSBiaW8uc3BsaWNlKGluZGV4LCAxKVswXVxuICAgIGJpby5zcGxpY2UoaW5kZXggLSAxLCAwLCBlbGVtKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIG1vdmVCaW9TZWN0aW9uRG93biAoaW5kZXgpIHtcbiAgICBjb25zdCBiaW8gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgaWYgKGluZGV4ID49IGJpby5sZW5ndGggLSAxKSByZXR1cm5cbiAgICBjb25zdCBlbGVtID0gYmlvLnNwbGljZShpbmRleCwgMSlbMF1cbiAgICBiaW8uc3BsaWNlKGluZGV4ICsgMSwgMCwgZWxlbSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVUZXh0QXJlYSAodGV4dEFyZWEpIHtcbiAgICBjb25zdCBuYW1lID0gJ3N5c3RlbS4nICsgdGV4dEFyZWEuZGF0YXNldC5hcmVhTmFtZVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiB0ZXh0QXJlYS52YWx1ZSB9KVxuICB9XG5cbiAgLy8gYXN5bmMgX3VwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzIChkb2N1bWVudENsYXNzLCBwYXJlbnQsIHsgdXBkYXRlcywgb3B0aW9ucywgcGFjayB9LCB1c2VyKSB7XG4gIC8vICAgY29uc3QgcG91ZXQgPSAndG90bydcbiAgLy8gfVxuXG4gIC8vIGFzeW5jIHByZVVwZGF0ZUFjdGl2ZUVmZmVjdCAoYSxiLGMsZCkge1xuICAvLyAgIGNvbnN0IHBvdWV0ID0gJ3RvdG8nXG4gIC8vIH1cblxuICAvLyBhc3luYyB1cGRhdGVBY3RpdmVFZmZlY3QgKGEsYixjLGQpIHtcbiAgLy8gICBjb25zdCBwb3VldCA9ICd0b3RvJ1xuICAvLyB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbiBpdGVtIGZvciB0aGF0IGFjdG9yLlxuICAgKiBJZiBpdCdzIGEgc2tpbGwgZmlyc3QgY2hlY2sgaWYgdGhlIHNraWxsIGlzIGFscmVhZHkgb3duZWQuIElmIGl0IGlzIGRvbid0IGNyZWF0ZSBhIHNlY29uZCB0aW1lLlxuICAgKiBGaWxsIHRoZSB2YWx1ZSBvZiB0aGUgc2tpbGwgd2l0aCBiYXNlIG9yIHRyeSB0byBldmFsdWF0ZSB0aGUgZm9ybXVsYS5cbiAgICogQHBhcmFtIHsqfSBlbWJlZGRlZE5hbWVcbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlRW1iZWRkZWREb2N1bWVudHMgKGVtYmVkZGVkTmFtZSwgZGF0YUFycmF5LCBvcHRpb25zKSB7XG4gICAgY29uc3QgcHJvY2Vzc2VkRGF0YUFycmF5ID0gW11cbiAgICBsZXQgYmFzZVZhbHVlID0gMFxuICAgIGxldCBiYXNlQ2FsY3VsYXRlZCA9IDBcbiAgICBsZXQgYXJjaGV0eXBlID0gZmFsc2VcbiAgICBsZXQgb2NjdXBhdGlvbiA9IGZhbHNlXG4gICAgZm9yIChsZXQgZGF0YSBvZiBkYXRhQXJyYXkpIHtcbiAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3NraWxsJzoge1xuICAgICAgICAgIGJhc2VWYWx1ZSA9IGRhdGEuc3lzdGVtLmJhc2VcbiAgICAgICAgICBiYXNlQ2FsY3VsYXRlZCA9IGF3YWl0IENvQzdJdGVtLmNhbGN1bGF0ZUJhc2UodGhpcywgZGF0YSlcbiAgICAgICAgICBpZiAodGhpcy50eXBlICE9PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgLy8gSWYgbm90IGEgUEMgc2V0IHNraWxsIHZhbHVlIHRvIGJhc2VcbiAgICAgICAgICAgIGlmICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShkYXRhLm5hbWUpKSByZXR1cm4gLy8gSWYgc2tpbGwgd2l0aCB0aGlzIG5hbWUgZXhpc3QgcmV0dXJuXG5cbiAgICAgICAgICAgIGlmIChiYXNlVmFsdWUpIHtcbiAgICAgICAgICAgICAgaWYgKFN0cmluZyhiYXNlVmFsdWUpICE9PSBTdHJpbmcoZGF0YS5zeXN0ZW0udmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udmFsdWUgPSBiYXNlQ2FsY3VsYXRlZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc05hTihOdW1iZXIoZGF0YS5zeXN0ZW0udmFsdWUpKSkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWVcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IChcbiAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZUNoYXJhY3RlcmlzdGljcygpXG4gICAgICAgICAgICAgICAgICApLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICApLnRvdGFsXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICh2YWx1ZSkgZGF0YS5zeXN0ZW0udmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS52YWx1ZSA9IG51bGxcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgYWRkVGhpcyA9IHRydWVcblxuICAgICAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWMoZGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzQW55QnV0Tm90RmxhZ2dlZCA9ICghKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSkgPz8gZmFsc2UpICYmICEoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucGlja25hbWVvbmx5ID8/IGZhbHNlKVxuICAgICAgICAgICAgbGV0IHNraWxsTGlzdCA9IFtdXG4gICAgICAgICAgICBjb25zdCBncm91cCA9IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5ndWVzc0dyb3VwRnJvbURvY3VtZW50KGRhdGEpXG4gICAgICAgICAgICBpZiAoZ3JvdXApIHtcbiAgICAgICAgICAgICAgc2tpbGxMaXN0ID0gKGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogbmV3IFJlZ0V4cCgnXicgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKGdyb3VwKSArICcuKyQnKSwgdHlwZTogJ2knIH0pKS5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsID8/IGZhbHNlKSAmJiAhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSA/PyBmYWxzZSkgJiYgIShpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5waWNrbmFtZW9ubHkgPz8gZmFsc2UpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0/LmZsYWdzPy5vY2N1cGF0aW9uIHx8IGRhdGEuc3lzdGVtPy5mbGFncz8uYXJjaGV0eXBlKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU2tpbGxzID0gdGhpcy5za2lsbHMuZmlsdGVyKGVsID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsLnN5c3RlbS5zcGVjaWFsaXphdGlvbikgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0/LmZsYWdzPy5vY2N1cGF0aW9uICYmXG4gICAgICAgICAgICAgICAgICBlbC5zeXN0ZW0uZmxhZ3M/Lm9jY3VwYXRpb25cbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbT8uZmxhZ3M/LmFyY2hldHlwZSAmJlxuICAgICAgICAgICAgICAgICAgZWwuc3lzdGVtLmZsYWdzPy5hcmNoZXR5cGVcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgICAgICAgIGVsLnN5c3RlbS5zcGVjaWFsaXphdGlvbi50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdTa2lsbHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmIChza2lsbExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGV4aXN0aW5nU2tpbGxzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvdW5kID0gc2tpbGxMaXN0LmZpbmRJbmRleChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5uYW1lID09PSBleGlzdGluZ1NraWxsc1tpXS5uYW1lIHx8IGl0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IGV4aXN0aW5nU2tpbGxzW2ldLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb3VuZCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2tpbGxMaXN0LnNwbGljZShmb3VuZCwgMSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgc2tpbGxMaXN0ID0gc2tpbGxMaXN0LmNvbmNhdChleGlzdGluZ1NraWxscylcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2tpbGxMaXN0ID0gZXhpc3RpbmdTa2lsbHNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChza2lsbExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBza2lsbERhdGEgPSBhd2FpdCBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICAgIHNraWxsczogc2tpbGxMaXN0LFxuICAgICAgICAgICAgICBhbGxvd0N1c3RvbTogKGlzQW55QnV0Tm90RmxhZ2dlZCB8fCAoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lID8/IGZhbHNlKSksXG4gICAgICAgICAgICAgIGZpeGVkQmFzZVZhbHVlOiAoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ua2VlcGJhc2V2YWx1ZSA/PyBmYWxzZSksXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uTmFtZTogZGF0YS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICAgIGxhYmVsOiBkYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGJhc2VWYWx1ZTogZGF0YS5zeXN0ZW0uYmFzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2tpbGxEYXRhLCAnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJdGVtID0gdGhpcy5pdGVtcy5nZXQoXG4gICAgICAgICAgICAgICAgICBza2lsbERhdGEuc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nSXRlbSkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlcyA9IHt9XG4gICAgICAgICAgICAgICAgICBpZiAoIShkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5rZWVwYmFzZXZhbHVlID8/IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLmJhc2VWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICBiYXNlQ2FsY3VsYXRlZCA9IHNraWxsRGF0YS5iYXNlVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzWydzeXN0ZW0udmFsdWUnXSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuc3lzdGVtLmZsYWdzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzW2BzeXN0ZW0uZmxhZ3MuJHtrZXl9YF0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhjaGFuZ2VzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZXMuX2lkID0gZXhpc3RpbmdJdGVtLmlkXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbY2hhbmdlc10pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWMoZXhpc3RpbmdJdGVtKVxuICAgICAgICAgICAgICAgICAgYWRkVGhpcyA9IGZhbHNlXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gc2tpbGxMaXN0LmZpbmQoaSA9PiBpLmlkID09PSBza2lsbERhdGEuc2VsZWN0ZWQpXG4gICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmxhZ3MgPSBkYXRhLnN5c3RlbT8uZmxhZ3NcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2VlcEJhc2UgPSAoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ua2VlcGJhc2V2YWx1ZSA/PyBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmbGFncykpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmZsYWdzW2tleV0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZWVwQmFzZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChza2lsbERhdGEuYmFzZVZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uYmFzZSA9IHNraWxsRGF0YS5iYXNlVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgYmFzZVZhbHVlID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgIGJhc2VDYWxjdWxhdGVkID0gYXdhaXQgQ29DN0l0ZW0uY2FsY3VsYXRlQmFzZSh0aGlzLCBkYXRhKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgICAgICAgIHNraWxsRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ua2VlcGJhc2V2YWx1ZSA/PyBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChza2lsbERhdGEuYmFzZVZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5iYXNlID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgYmFzZVZhbHVlID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBhd2FpdCBDb0M3SXRlbS5jYWxjdWxhdGVCYXNlKHRoaXMsIGRhdGEpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICAgIGRhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhZGRUaGlzKSB7XG4gICAgICAgICAgICBpZiAoU3RyaW5nKGJhc2VWYWx1ZSkgIT09IFN0cmluZyhiYXNlQ2FsY3VsYXRlZCkpIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uYmFzZSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGRhdGEpKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAnd2VhcG9uJzoge1xuICAgICAgICAgIGlmICh0aGlzLnR5cGUgIT09ICdjb250YWluZXInKSB7XG4gICAgICAgICAgICBjb25zdCBtYWluU2tpbGwgPSBkYXRhLnN5c3RlbT8uc2tpbGw/Lm1haW4/Lm5hbWVcbiAgICAgICAgICAgIGlmIChtYWluU2tpbGwpIHtcbiAgICAgICAgICAgICAgbGV0IHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUobWFpblNraWxsKVswXVxuICAgICAgICAgICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IG1haW5Ta2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXG4gICAgICAgICAgICAgICAgICA/IG1haW5Ta2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICAgICAgICAgICAgICA6IG1haW5Ta2lsbFxuICAgICAgICAgICAgICAgIC8vIHRyeSB0byB1c2UgYW4gYWxyZWFkeSBkZWZpbmVkIHNraWxsXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogc2VhcmNoIG9uIHRoZSBjb21wZW5kaXVtc1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgICAgICAgICAgaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgICAgICAgICAgKGl0ZW0ubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkgfHwgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKFtleGlzdGluZ10pXG4gICAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG1haW5Ta2lsbClbMF1cbiAgICAgICAgICAgICAgICAgIC8vIHNraWxsID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlV2VhcG9uU2tpbGwoXG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICEhZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucm5nZFxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc2tpbGwpIGRhdGEuc3lzdGVtLnNraWxsLm1haW4uaWQgPSBza2lsbC5pZFxuICAgICAgICAgICAgfSAvLyBUT0RPIDogRWxzZSA6IHNlbGVjdGlvbm5lciBsZSBza2lsbCBkYW5zIGxhIGxpc3RlIG91IGVuIGNyw6llciB1biBub3V2ZWF1LlxuXG4gICAgICAgICAgICBjb25zdCBzZWNvbmRTa2lsbCA9IGRhdGEuc3lzdGVtPy5za2lsbD8uYWx0ZXJuYXRpdj8ubmFtZVxuICAgICAgICAgICAgaWYgKHNlY29uZFNraWxsKSB7XG4gICAgICAgICAgICAgIGxldCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKHNlY29uZFNraWxsKVswXVxuICAgICAgICAgICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IHNlY29uZFNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgICAgICAgICAgICAgID8gc2Vjb25kU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgICAgICAgICAgICAgOiBzZWNvbmRTa2lsbFxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgICAgICAgICAgaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgICAgICAgICAgKGl0ZW0ubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkgfHwgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKFtleGlzdGluZ10pXG4gICAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKHNlY29uZFNraWxsKVswXVxuICAgICAgICAgICAgICAgICAgLy8gc2tpbGwgPSBleGlzdGluZy50b09iamVjdCgpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5jcmVhdGVXZWFwb25Ta2lsbChcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgISFkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5ybmdkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChza2lsbCkgZGF0YS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCA9IHNraWxsLmlkXG4gICAgICAgICAgICB9IC8vIFRPRE8gOiBFbHNlIDogc2VsZWN0aW9ubmVyIGxlIHNraWxsIGRhbnMgbGEgbGlzdGUgb3UgZW4gY3LDqWVyIHVuIG5vdXZlYXUuXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3NldHVwJzoge1xuICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5lbmFibGVDaGFyYWN0ZXJpc2l0aWNzKSB7XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdCA9IHt9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdzdHInKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuY29uID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnY29uJylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnNpeiA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3NpeicpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXggPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdkZXgnKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuYXBwID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnYXBwJylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmludCA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2ludCcpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdwb3cnKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuZWR1ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnZWR1JylcblxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjayA9IHt9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnZhbHVlID0gaXNOYU4odGhpcy5sdWNrKVxuICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgOiB0aGlzLmx1Y2tcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2subGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnNob3J0TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICAgICAgIClcblxuICAgICAgICAgICAgaWYgKCFkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMgPSB7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zdHIgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuY29uLnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnNpeiA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnNpei52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5kZXggPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXgudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuYXBwLnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmludCA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmludC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuZWR1LnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmx1Y2sgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnZhbHVlXG4gICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNwZW5kUG9pbnRzJylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxDaGFyYWMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0ucG9pbnRzV2FybmluZyA9ICEoXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc3RyICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc2l6ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZGV4ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuaW50ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ICE9PSBudWxsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjb25zdCByb2xsZWQgPSBhd2FpdCBDaGFyYWNSb2xsRGlhbG9nLmNyZWF0ZShkYXRhLnN5c3RlbSlcbiAgICAgICAgICAgIGlmIChyb2xsZWQpIHtcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFtcbiAgICAgICAgICAgICAgICAnc3RyJyxcbiAgICAgICAgICAgICAgICAnY29uJyxcbiAgICAgICAgICAgICAgICAnc2l6JyxcbiAgICAgICAgICAgICAgICAnZGV4JyxcbiAgICAgICAgICAgICAgICAnYXBwJyxcbiAgICAgICAgICAgICAgICAnaW50JyxcbiAgICAgICAgICAgICAgICAncG93JyxcbiAgICAgICAgICAgICAgICAnZWR1J1xuICAgICAgICAgICAgICBdKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XVxuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0uZm9ybXVsYWBdID1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzW2tleV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVjaykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVja1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQnXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyAvIDVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMubXAubWF4J10gPSBNYXRoLmZsb29yKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgLyA1XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHVwZGF0ZURhdGEsIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOiB0aGlzLnJhd0hwTWF4LFxuICAgICAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC5tYXgnOiB0aGlzLnJhd0hwTWF4XG4gICAgICAgICAgICAgIH0sIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXJhID0gT2JqZWN0LmVudHJpZXMoZGF0YS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzKS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiBlWzBdKVxuICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5pdGVtcywgZXJhOiAodHlwZW9mIGVyYVswXSAhPT0gJ3VuZGVmaW5lZCcgPyBlcmFbMF0gOiB0cnVlKSB9KVxuICAgICAgICAgIGNvbnN0IHNraWxscyA9IGl0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgICAgICAgIGNvbnN0IG90aGVyc0l0ZW1zID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgIT09ICdza2lsbCcpXG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhza2lsbHMpXG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGRJdGVtcyhvdGhlcnNJdGVtcylcbiAgICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJhY2tzdG9yeSc6IGRhdGEuc3lzdGVtLmJhY2tzdG9yeSB9LCB7IHJlbmRlclNoZWV0OiBmYWxzZSB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb25OYW1lIG9mIGRhdGEuc3lzdGVtLmJpb1NlY3Rpb25zKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhdGhpcy5zeXN0ZW0uYmlvZ3JhcGh5Py5maW5kKFxuICAgICAgICAgICAgICAgICAgZWwgPT4gc2VjdGlvbk5hbWUgPT09IGVsLnRpdGxlXG4gICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgIHNlY3Rpb25OYW1lXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQmlvU2VjdGlvbihzZWN0aW9uTmFtZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyByZWZhY3RvciB0aGlzXG4gICAgICAgICAgY29uc3QgbW9uZXRhcnkgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMuc3lzdGVtLm1vbmV0YXJ5LCBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhLnN5c3RlbS5tb25ldGFyeSkpXG4gICAgICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzLnNoZWV0XG4gICAgICAgICAgbGV0IHN0YXRlID0gZmFsc2VcbiAgICAgICAgICBkbyB7XG4gICAgICAgICAgICBzdGF0ZSA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgIHJlc29sdmUoc2hlZXQuX3N0YXRlKVxuICAgICAgICAgICAgfSwgMTAwKSlcbiAgICAgICAgICB9IHdoaWxlIChzdGF0ZSA9PT0gQXBwbGljYXRpb24uUkVOREVSX1NUQVRFUy5SRU5ERVJJTkcpXG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5tb25ldGFyeSc6IG1vbmV0YXJ5XG4gICAgICAgICAgfSlcbiAgICAgICAgICBIb29rcy5jYWxsKCdzZXR1cEZpbmlzaGVkQ29DNycpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdhcmNoZXR5cGUnOlxuICAgICAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAgICAgICAvLyBBcmNoZXR5cHJlIG9ubHkgZm9yIFBDc1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJjaGV0eXBlKSB7XG4gICAgICAgICAgICAgIGxldCByZXNldEFyY2hldHlwZSA9IGZhbHNlXG4gICAgICAgICAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlc2V0QXJjaGV0eXBlJyksXG4gICAgICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZXNldEFyY2hldHlwZUhpbnQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlc2V0QXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdFllczogZmFsc2VcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKHJlc2V0QXJjaGV0eXBlKSBhd2FpdCB0aGlzLnJlc2V0QXJjaGV0eXBlKClcbiAgICAgICAgICAgICAgZWxzZSByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgY29yZUNoYXJhYyA9IFtdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3Nba2V5XSA9IGZhbHNlXG4gICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgICAgICAgICAgICBjaGFyLmtleSA9IGtleVxuICAgICAgICAgICAgICAgIGNvcmVDaGFyYWMucHVzaChjaGFyKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBjaGFyYWNcblxuICAgICAgICAgICAgaWYgKGNvcmVDaGFyYWMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICBjb25zdCBjaGFyRGlhbG9nRGF0YSA9IHt9XG4gICAgICAgICAgICAgIGNoYXJEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljcyA9IGNvcmVDaGFyYWNcbiAgICAgICAgICAgICAgY2hhckRpYWxvZ0RhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2VsZWN0Q29yZUNoYXJhYycpXG4gICAgICAgICAgICAgIGNoYXJhYyA9IGF3YWl0IENoYXJhY1NlbGVjdERpYWxvZy5jcmVhdGUoY2hhckRpYWxvZ0RhdGEpXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvcmVDaGFyYWMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgIGNoYXJhYyA9IGNvcmVDaGFyYWNbMF0ua2V5XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghY2hhcmFjKSByZXR1cm5cbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NbY2hhcmFjXSA9IHRydWVcbiAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IE51bWJlcihkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZSlcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJhYylcbiAgICAgICAgICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgIHJvbGwudG9NZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICAgJ0NvQzcuTWVzc2FnZVJvbGxpbmdDaGFyYWN0ZXJpc3RpYycsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogY2hhci5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICBmb3JtdWxhOiBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGNoYXIudmFsdWUgPCByb2xsLnRvdGFsID8gcm9sbC50b3RhbCA6IGNoYXIudmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7Y2hhcmFjfS52YWx1ZWBdOiB2YWx1ZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgYWxsIHNraWxsc1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5za2lsbHMgfSlcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoZGF0YS5zeXN0ZW0uc2tpbGxzLCAnYXJjaGV0eXBlJylcblxuICAgICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgICBhcmNoZXR5cGUgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnb2NjdXBhdGlvbic6XG4gICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIC8vIE9jY3VwYXRpb24gb25seSBmb3IgUENzXG4gICAgICAgICAgICBpZiAodGhpcy5vY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICAgIGxldCByZXNldE9jY3VwYXRpb24gPSBmYWxzZVxuICAgICAgICAgICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZXNldE9jY3VwYXRpb24nKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlc2V0T2NjdXBhdGlvbkhpbnQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlc2V0T2NjdXBhdGlvbiA9IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRZZXM6IGZhbHNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChyZXNldE9jY3VwYXRpb24pIGF3YWl0IHRoaXMucmVzZXRPY2N1cGF0aW9uKClcbiAgICAgICAgICAgICAgZWxzZSByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29udmVydCBDb0NJRHMgdG8gaXRlbXNcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG5cbiAgICAgICAgICAgIGlmIChOdW1iZXIoZGF0YS5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1heCkgPiAwKSB7XG4gICAgICAgICAgICAgIC8vIE9jY3VwYXRpb25zIHdpdGggYSBjcmVkaXQgcmF0aW5nIHJlcXVpcmUgYSBjcmVkaXQgcmF0aW5nIHNraWxsXG4gICAgICAgICAgICAgIGNvbnN0IGFjdG9yQ3JlZGl0UmF0aW5nID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJywgZGF0YS5zeXN0ZW0uc2tpbGxzKVxuICAgICAgICAgICAgICBpZiAoYWN0b3JDcmVkaXRSYXRpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5maW5kQ29jSWRJbkxpc3QoJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycsIHRoaXMuaXRlbXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzLnB1c2goJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycpXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IGRhdGEuc3lzdGVtLnNraWxscyB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJywgdGhpcy5pdGVtcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMucHVzaChhY3RvckNyZWRpdFJhdGluZ1swXSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2VsZWN0IGNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBjb25zdCBwb2ludHNEaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzID0gZGF0YS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgICAgICAgICBsZXQgdG90YWwgPSAwXG4gICAgICAgICAgICBsZXQgb3B0aW9uYWxDaGFyID0gZmFsc2VcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50c1xuICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgICAgICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhrZXkpXG4gICAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0ubmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS52YWx1ZSA9IGNoYXIudmFsdWVcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS50b3RhbCA9XG4gICAgICAgICAgICAgICAgICBjaGFyLnZhbHVlICpcbiAgICAgICAgICAgICAgICAgIE51bWJlcihwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLm11bHRpcGxpZXIpXG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZS5vcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgdG90YWwgKz0gcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS50b3RhbFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25hbENoYXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLnRvdGFsID0gdG90YWxcbiAgICAgICAgICAgIGlmIChvcHRpb25hbENoYXIpIHtcbiAgICAgICAgICAgICAgLy8gSXMgdGhlcmUgYW55IG9wdGlvbmFsIGNoYXIgdG8gY2hvb3NlIGZvciBwb2ludHMgY2FsYyA/XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFBvaW50U2VsZWN0RGlhbG9nLmNyZWF0ZShwb2ludHNEaWFsb2dEYXRhKVxuICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkgcmV0dXJuIC8vIFBvaW50IG5vdCBzZWxlY3RlZCA9PiBleGl0LlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgb3B0aW9uYWwgc2tpbGxzXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZGF0YS5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAvLyBDb252ZXJ0IENvQ0lkcyB0byBpdGVtc1xuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMgfSlcblxuICAgICAgICAgICAgICBjb25zdCBkaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMgPSBbXVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5hY3RvcklkID0gdGhpcy5pZFxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCA9IE51bWJlcihkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLm9wdGlvbnMpXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxTZWxlY3Rpb25XaW5kb3cnKVxuXG4gICAgICAgICAgICAgIC8vIFNlbGVjdCBvbmx5IHNraWxscyB0aGF0IGFyZSBub3QgcHJlc2VudCBvciBhcmUgbm90IGZsYWdnZWQgYXMgb2NjdXBhdGlvbi5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscykge1xuICAgICAgICAgICAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWModmFsdWUpKSBkaWFsb2dEYXRhLnNraWxscy5wdXNoKHZhbHVlKVxuICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSBnZW5lcmljIHNwZWMgd2UgYWx3YXlzIGFkZCBpdFxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbHVlLm5hbWUgJiYgaXRlbS50eXBlID09PSAnc2tpbGwnXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgaWYgKCFza2lsbCB8fCAhc2tpbGwuc3lzdGVtLmZsYWdzPy5vY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHNraWxsIHdhcyBhZGRlZCB0byBza2lsbCBsaXN0IHByZXZpb3VzbHksIHJlbW92ZSBpdFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbHJlYWR5U2VsZWN0ZWRTa2lsbCA9IGRhdGEuc3lzdGVtLnNraWxscy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbHVlLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5U2VsZWN0ZWRTa2lsbCkgZGlhbG9nRGF0YS5za2lsbHMucHVzaCh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vbmUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoIDw9IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGlzIGxlc3Mgc2tpbGwgdGhhbiBvcHRpb25zLCBhZGQgdGhlbSBhbGwuXG4gICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0xlc3NTa2lsbFRoYW5PcHRpb25zJywge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ291bnQ6IGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ291bnQ6IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKCBkaWFsb2dEYXRhLnNraWxscywgJ29jY3VwYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHNcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBza2lsbCBzZWxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGF3YWl0IFNraWxsU2VsZWN0RGlhbG9nLmNyZWF0ZShkaWFsb2dEYXRhKVxuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluZm9BbGxTa2lsbHNBbHJlYWR5U2VsZWN0ZWQnKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgZXh0cmEgc2tpbGxzXG4gICAgICAgICAgICBpZiAoTnVtYmVyKGRhdGEuc3lzdGVtLnBlcnNvbmFsKSkge1xuICAgICAgICAgICAgICBjb25zdCBkaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMgPSBbXVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5hY3RvcklkID0gdGhpcy5pZFxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCA9IE51bWJlcihkYXRhLnN5c3RlbS5wZXJzb25hbClcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2VsZWN0UGVyc29uYWxTa2lsbHMnLCB7XG4gICAgICAgICAgICAgICAgbnVtYmVyOiBOdW1iZXIoZGF0YS5zeXN0ZW0ucGVyc29uYWwpXG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgLy8gU2VsZWN0IG9ubHkgc2tpbGxzIHRoYXQgYXJlIG5vdCBwcmVzZW50IG9yIGFyZSBub3QgZmxhZ2dlZCBhcyBvY2N1cGF0aW9uLlxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QgYWxsIHNraWxscyB0aGF0IGFyZSBub3QgYWxyZWFkeSBmbGFnZ2VkIGFzIG9jY3VwYXRpb24sIGNhbiBoYXZlIGFkanVzdG1lbnRzIGFuZCBYUC5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhcy5zeXN0ZW0uZmxhZ3Mub2NjdXBhdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgIXMuc3lzdGVtLnByb3BlcnRpZXMubm9hZGp1c3RtZW50cyAmJlxuICAgICAgICAgICAgICAgICAgIXMuc3lzdGVtLnByb3BlcnRpZXMubm94cGdhaW5cbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIC8vIGlmIHNraWxsIGFscmVhZHkgc2VsZWN0ZWQgZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgICAgICAgICBjb25zdCBhbHJlYWR5U2VsZWN0ZWRTa2lsbCA9IGRhdGEuc3lzdGVtLnNraWxscy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5uYW1lID09PSBzLm5hbWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlTZWxlY3RlZFNraWxsKSBkaWFsb2dEYXRhLnNraWxscy5wdXNoKHMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gaWYgdGhlcmUncyBub25lLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCA8PSBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCkge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBpcyBsZXNzIHNraWxsIHRoYW4gb3B0aW9ucywgYWRkIHRoZW0gYWxsLlxuICAgICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9MZXNzU2tpbGxUaGFuT3B0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgICBza2lsbENvdW50OiBkaWFsb2dEYXRhLnNraWxscy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0NvdW50OiBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyggZGlhbG9nRGF0YS5za2lsbHMsICdvY2N1cGF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ0RhdGEuc2tpbGxzXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3Igc2tpbGwgc2VsZWN0aW9uLlxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBhd2FpdCBTa2lsbFNlbGVjdERpYWxvZy5jcmVhdGUoZGlhbG9nRGF0YSkgLy8gRGlhbG9nIGRhdGEgYnVnID8/P1xuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluZm9BbGxTa2lsbHNBbHJlYWR5U2VsZWN0ZWQnKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgYWxsIHNraWxsc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhkYXRhLnN5c3RlbS5za2lsbHMsICdvY2N1cGF0aW9uJylcbiAgICAgICAgICAgIC8vIENyZWRpdCByYXRpbmcgaXMgYWx3YXlzIHBhcnQgb2Ygb2NjdXBhdGlvblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVkaXRSYXRpbmdTa2lsbD8uc2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgICAgICAgICAgLy8gc2V0dGluZyBpdCB0byBtaW4gY3JlZGl0IHJhdGluZ1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVkaXRSYXRpbmdTa2lsbD8udXBkYXRlKHtcbiAgICAgICAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uJzogTnVtYmVyKGRhdGEuc3lzdGVtLmNyZWRpdFJhdGluZy5taW4pXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICAgIG9jY3VwYXRpb24gPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShkYXRhKSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHByb2Nlc3NlZERhdGFBcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBjb25zdCBwcm9jZXNzZWQgPSBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgIGVtYmVkZGVkTmFtZSxcbiAgICAgIHByb2Nlc3NlZERhdGFBcnJheSxcbiAgICAgIG9wdGlvbnNcbiAgICApXG5cbiAgICBpZiAoYXJjaGV0eXBlKSB7XG4gICAgICAvLyBzZXR0aW5nIHBvaW50c1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IHRoaXMuYXJjaGV0eXBlUG9pbnRzXG4gICAgICB9KVxuICAgICAgSG9va3MuY2FsbCgnYXJjaGV0eXBlRmluaXNoZWRDb0M3JylcbiAgICB9XG4gICAgaWYgKG9jY3VwYXRpb24pIHtcbiAgICAgIC8vIHNldHRpbmcgcG9pbnRzXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IHRoaXMub2NjdXBhdGlvblBvaW50cyxcbiAgICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5wZXJzb25hbCc6IHRoaXMucGVyc29uYWxQb2ludHNcbiAgICAgIH0pXG4gICAgICBIb29rcy5jYWxsKCdvY2N1cGF0aW9uRmluaXNoZWRDb0M3JylcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvY2Vzc2VkXG4gIH1cblxuICAvLyBnZXRTa2lsbElkQnlOYW1lKCBza2lsbE5hbWUpe1xuICAvLyAgIGxldCBpZCA9IG51bGw7XG4gIC8vICAgIGZvciAoY29uc3QgW21hcCwga2V5LCB2YWx1ZV0gb2YgdGhpcy5pdGVtcykge1xuICAvLyAgICAgaWYoIHZhbHVlLm5hbWUgPT0gc2tpbGxOYW1lKSBpZCA9IHZhbHVlLmlkO1xuICAvLyAgIH07XG5cbiAgLy8gICByZXR1cm4gaWQ7XG4gIC8vIH1cblxuICBnZXRJdGVtSWRCeU5hbWUgKGl0ZW1OYW1lKSB7XG4gICAgbGV0IGlkID0gbnVsbFxuICAgIGNvbnN0IG5hbWUgPSBpdGVtTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXG4gICAgICA/IGl0ZW1OYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgIDogaXRlbU5hbWVcbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKHZhbHVlKS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICkge1xuICAgICAgICBpZCA9IHZhbHVlLmlkXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGlkXG4gIH1cblxuICBnZXRJdGVtc0J5TmFtZSAoaXRlbU5hbWUpIHtcbiAgICBjb25zdCBpdGVtTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUubmFtZSA9PT0gaXRlbU5hbWUpIGl0ZW1MaXN0LnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZW1MaXN0XG4gIH1cblxuICAvKipcbiAgICpcbiAgICpcbiAgICovXG4gIGdldFNraWxsc0J5TmFtZSAoc2tpbGxOYW1lKSB7XG4gICAgLy8gVE9ETyA6IG1vcmUgYWdncmVzc2l2ZSBmaW5kaW5nIGluY2x1ZGluZyBzcGVjc1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgY29uc3QgbmFtZSA9IHNraWxsTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXG4gICAgICA/IHNraWxsTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICA6IHNraWxsTmFtZVxuXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAoXG4gICAgICAgIChcbiAgICAgICAgICBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWModmFsdWUpLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIHZhbHVlLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkID09PSBza2lsbE5hbWVcbiAgICAgICAgKSAmJlxuICAgICAgICB2YWx1ZS50eXBlID09PSAnc2tpbGwnXG4gICAgICApIHtcbiAgICAgICAgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldEZpcnN0U2tpbGxCeUNvQ0lEIChjb2NpZCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbmQoaSA9PiBpLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkID09PSBjb2NpZClcbiAgfVxuXG4gIC8vIHBhcnNlRm9ybXVsYSAoZm9ybXVsYSkge1xuICAvLyAgIGxldCBwYXJzZWRGb3JtdWxhID0gZm9ybXVsYVxuICAvLyAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcikpIHtcbiAgLy8gICAgIHBhcnNlZEZvcm11bGEgPSBwYXJzZWRGb3JtdWxhLnJlcGxhY2Uoa2V5LCB2YWx1ZSlcbiAgLy8gICB9XG4gIC8vICAgcmV0dXJuIHBhcnNlZEZvcm11bGFcbiAgLy8gfVxuXG4gIHBhcnNlQ2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBwYXJzZWQgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcikpIHtcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuJykpIHtcbiAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZm91bmRyeS51dGlscy5nZXRQcm9wZXJ0eSh0aGlzLCB2YWx1ZS5zdWJzdHJpbmcoNSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXJzZWRcbiAgfVxuXG4gIHN0YXRpYyBnZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24gKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICBnYW1lLnN5c3RlbS50ZW1wbGF0ZS5BY3Rvci50ZW1wbGF0ZXMuY2hhcmFjdGVyaXN0aWNzLmNoYXJhY3RlcmlzdGljc1xuICAgICkpIHtcbiAgICAgIGNoYXJhY3RlcmlzdGljcy5wdXNoKHtcbiAgICAgICAga2V5LFxuICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWNzXG4gIH1cblxuICBnZXRDaGFyYWN0ZXJpc3RpYyAoY2hhck5hbWUpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzXG4gICAgICApKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgY2hhck5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGtleSA9PT0gY2hhck5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgc2hvcnROYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLFxuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbCksXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldEF0dHJpYnV0ZSAoYXR0cmliTmFtZSkge1xuICAgIGlmIChcbiAgICAgIFsnbGNrJywgJ2x1Y2snLCBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLnRvTG93ZXJDYXNlKCldLmluY2x1ZGVzKFxuICAgICAgICBhdHRyaWJOYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleTogJ2xjaycsXG4gICAgICAgIHNob3J0TmFtZTogJ2x1Y2snLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChcbiAgICAgIFtcbiAgICAgICAgJ3NhbicsXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JykudG9Mb3dlckNhc2UoKVxuICAgICAgXS5pbmNsdWRlcyhhdHRyaWJOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZXk6ICdzYW4nLFxuICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBydW5Sb2xsIChvcHRpb25zID0ge30pIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuY2FyZFR5cGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnByZXZlbnRTdGFuZGJ5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgb3B0aW9ucy5wcmV2ZW50U3RhbmRieSA9IHRydWVcbiAgICB9XG4gICAgb3B0aW9ucy5hY3RvciA9IHRoaXNcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIob3B0aW9ucylcbiAgICByZXR1cm4gcmVzdWx0c1xuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb24gKCkge1xuICAgIGNvbnN0IG9jY3VwYXRpb24gPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKVxuICAgIHJldHVybiBvY2N1cGF0aW9uWzBdXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlICgpIHtcbiAgICBjb25zdCBhcmNoZXR5cGUgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ2FyY2hldHlwZScpXG4gICAgcmV0dXJuIGFyY2hldHlwZVswXVxuICB9XG5cbiAgYXN5bmMgcmVzZXRPY2N1cGF0aW9uIChlcmFzZU9sZCA9IHRydWUpIHtcbiAgICBpZiAoZXJhc2VPbGQpIHtcbiAgICAgIGNvbnN0IG9jY3VwYXRpb25Ta2lsbCA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT5cbiAgICAgICAgaXRlbS5nZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb2NjdXBhdGlvblNraWxsLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBhd2FpdCBvY2N1cGF0aW9uU2tpbGxbaW5kZXhdLnVuc2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5vY2N1cGF0aW9uKSBhd2FpdCB0aGlzLm9jY3VwYXRpb24uZGVsZXRlKClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IG51bGwgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc2V0QXJjaGV0eXBlIChlcmFzZU9sZCA9IHRydWUpIHtcbiAgICBpZiAoZXJhc2VPbGQpIHtcbiAgICAgIGNvbnN0IGFyY2hldHlwZVNraWxsID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PlxuICAgICAgICBpdGVtLmdldEl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgICAgKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGFyY2hldHlwZVNraWxsLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBhd2FpdCBhcmNoZXR5cGVTa2lsbFtpbmRleF0udW5zZXRJdGVtRmxhZygnYXJjaGV0eXBlJylcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuYXJjaGV0eXBlKSBhd2FpdCB0aGlzLmFyY2hldHlwZS5kZWxldGUoKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5kZXZlbG9wbWVudC5hcmNoZXR5cGUnOiBudWxsIH0pXG4gIH1cblxuICBnZXQgbHVjayAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnM/Lmxjaz8udmFsdWUpXG4gIH1cblxuICBhc3luYyBzZXRMdWNrICh2YWx1ZSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgc3BlbmRMdWNrIChhbW91bnQpIHtcbiAgICBhbW91bnQgPSBwYXJzZUludChhbW91bnQpXG4gICAgaWYgKCEodGhpcy5sdWNrID49IGFtb3VudCkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLnNldEx1Y2sodGhpcy5sdWNrIC0gYW1vdW50KVxuICB9XG5cbiAgZ2V0IGhwICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSlcbiAgfVxuXG4gIGdldCByYXdIcE1heCAoKSB7XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAuYXV0bykge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlICE9IG51bGwgJiZcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmNvbi52YWx1ZSAhPSBudWxsXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIENvQ0FjdG9yLmhwRnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MsIHRoaXMudHlwZSlcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXgpXG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXgpXG4gIH1cblxuICBnZXQgaHBNYXggKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgfVxuXG4gIGFzeW5jIF9zZXRIcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgdmFsdWUgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZFVuaXF1ZUl0ZW1zIChza2lsbExpc3QsIGZsYWcgPSBudWxsKSB7XG4gICAgY29uc3QgcHJvY2Vzc2VkID0gW11cbiAgICBmb3IgKGxldCBza2lsbCBvZiBza2lsbExpc3QpIHtcbiAgICAgIHNraWxsID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoc2tpbGwpXG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChza2lsbC5zeXN0ZW0sICdmbGFncycpKSB7XG4gICAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzID0ge31cbiAgICAgICAgfVxuICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3NbZmxhZ10gPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKHNraWxsKSkge1xuICAgICAgICBwcm9jZXNzZWQucHVzaChza2lsbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGl0ZW1JZCA9IHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsLm5hbWUpXG4gICAgICAgIGlmICghaXRlbUlkKSB7XG4gICAgICAgICAgcHJvY2Vzc2VkLnB1c2goc2tpbGwpXG4gICAgICAgIH0gZWxzZSBpZiAoZmxhZykge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgICAgICAgYXdhaXQgaXRlbS5zZXRJdGVtRmxhZyhmbGFnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHByb2Nlc3NlZCwge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZEl0ZW1zIChpdGVtTGlzdCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtTGlzdCkge1xuICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgaWYgKCFpdGVtLnN5c3RlbS5mbGFncykgaXRlbS5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgICBpdGVtLnN5c3RlbS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgIH1cbiAgICAgIHByb2Nlc3NlZC5wdXNoKGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGl0ZW0pKVxuICAgIH1cbiAgICBpZiAocHJvY2Vzc2VkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgcHJvY2Vzc2VkLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYWRkVW5pcXVlSXRlbSAoc2tpbGwsIGZsYWcgPSBudWxsKSB7XG4gICAgY29uc3QgaXRlbUlkID0gdGhpcy5nZXRJdGVtSWRCeU5hbWUoc2tpbGwubmFtZSlcbiAgICBpZiAoIWl0ZW1JZCkge1xuICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgaWYgKCFza2lsbC5zeXN0ZW0uZmxhZ3MpIHNraWxsLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICAgIHNraWxsLnN5c3RlbS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbc2tpbGxdLCB7XG4gICAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGZsYWcpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgICBhd2FpdCBpdGVtLnNldEl0ZW1GbGFnKGZsYWcpXG4gICAgfVxuICB9XG5cbiAgZ2V0IHJhd01wTWF4ICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvKSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBDb0NBY3Rvci5tcEZyb21DaGFyYWN0ZXJpc3RpY3ModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKVxuICAgICAgfSBlbHNlIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heClcbiAgfVxuXG4gIGdldFJlYXNvblNhbkxvc3MgKHNhblJlYXNvbikge1xuICAgIGlmICh0eXBlb2Ygc2FuUmVhc29uID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cy5maWx0ZXIoXG4gICAgICAgICAgciA9PiByLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2FuUmVhc29uLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgICAgKVswXSA/PyB7IHR5cGU6ICcnLCB0b3RhbExvc3M6IDAsIGltbXVuaXR5OiBmYWxzZSB9XG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiB7IHR5cGU6ICcnLCB0b3RhbExvc3M6IDAsIGltbXVuaXR5OiBmYWxzZSB9XG4gIH1cblxuICBzYW5Mb3N0VG9SZWFzb24gKHNhblJlYXNvbikge1xuICAgIGlmIChzYW5SZWFzb24pIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudCA9IHRoaXMuZ2V0UmVhc29uU2FuTG9zcyhzYW5SZWFzb24pXG4gICAgICByZXR1cm4gc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zc1xuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgc2FuTG9zc1JlYXNvbkVuY291bnRlcmVkIChzYW5SZWFzb24pIHtcbiAgICBpZiAoc2FuUmVhc29uKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxuICAgICAgcmV0dXJuIHNhbml0eUxvc3NFdmVudC50eXBlICE9PSAnJ1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHNldFJlYXNvblNhbkxvc3MgKHNhblJlYXNvbiwgc2FuTG9zcykge1xuICAgIGlmICh0eXBlb2Ygc2FuUmVhc29uID09PSAnc3RyaW5nJyAmJiBzYW5SZWFzb24gIT09ICcnKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cylcbiAgICAgIGNvbnN0IGluZGV4ID0gc2FuaXR5TG9zc0V2ZW50cy5maW5kSW5kZXgoXG4gICAgICAgIHIgPT4gci50eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNhblJlYXNvbi50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgICBpZiAoc2FuTG9zcyA+IDApIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBzYW5SZWFzb24sXG4gICAgICAgICAgICB0b3RhbExvc3M6IHNhbkxvc3MsXG4gICAgICAgICAgICBpbW11bml0eTogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNhbml0eUxvc3NFdmVudHNbaW5kZXhdLnRvdGFsTG9zcyArPSBzYW5Mb3NzXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5zb3J0KGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xuICAgICAgICAgIHJldHVybiBsZWZ0LnR5cGUubG9jYWxlQ29tcGFyZShyaWdodC50eXBlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50c1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBtYXhMb3NzVG9TYW5SZWFzb24gKHNhblJlYXNvbiwgc2FuTWF4Rm9ybXVsYSkge1xuICAgIGNvbnN0IHNhbk1heCA9IG5ldyBSb2xsKHNhbk1heEZvcm11bGEudG9TdHJpbmcoKSkuZXZhbHVhdGUoe1xuICAgICAgbWF4aW1pemU6IHRydWVcbiAgICB9KS50b3RhbFxuICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudCA9IHRoaXMuZ2V0UmVhc29uU2FuTG9zcyhzYW5SZWFzb24pXG4gICAgaWYgKHNhbml0eUxvc3NFdmVudC5pbW11bml0eSkge1xuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIHNhbk1heCAtIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MpXG4gIH1cblxuICBhc3luYyBsb29zZVNhbiAoc2FuUmVhc29uLCBzYW5Mb3NzKSB7XG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICBpZiAoIXNhbml0eUxvc3NFdmVudC5pbW11bml0eSkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRTYW4odGhpcy5zYW4gLSBzYW5Mb3NzKVxuICAgICAgdGhpcy5zZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbiwgc2FuTG9zcylcbiAgICAgIHJldHVybiBzYW5Mb3NzXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzYW5Mb3NzIChjaGVja1Bhc3NlZCkge1xuICAgIGlmIChjaGVja1Bhc3NlZCkgcmV0dXJuIHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkXG4gICAgcmV0dXJuIHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NDaGVja1Bhc3NlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrUGFzc2VkXG4gIH1cblxuICBnZXQgc2FuTG9zc0NoZWNrRmFpbGxlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrRmFpbGxlZFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NNYXggKCkge1xuICAgIGlmICh0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkpKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkuZXZhbHVhdGUoe1xuICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgfSkudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBzYW5Mb3NzTWluICgpIHtcbiAgICBpZiAodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKSkpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZClcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUm9sbCh0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZCkuZXZhbHVhdGUoe1xuICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgfSkudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBkYWlseVNhbkxvc3MgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbj8uZGFpbHlMb3NzIHx8IDBcbiAgfVxuXG4gIGdldCBkYWlseVNhbkxpbWl0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4/LmRhaWx5TGltaXQgfHwgMFxuICB9XG5cbiAgZ2V0IHJhd1Nhbk1heCAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LnNhbj8uYXV0bykge1xuICAgICAgaWYgKHRoaXMuY3RodWxodU15dGhvcykgcmV0dXJuIE1hdGgubWF4KDk5IC0gdGhpcy5jdGh1bGh1TXl0aG9zLCAwKVxuICAgICAgcmV0dXJuIDk5XG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXgpXG4gIH1cblxuICBnZXQgc2FuTWF4ICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4KVxuICB9XG5cbiAgZ2V0IG1wICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSlcbiAgfVxuXG4gIGdldCBtcE1heCAoKSB7XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubXAuYXV0bykge1xuICAgICAgLy8gVE9ETyBpZiBhbnkgaXMgbnVsbCBzZXQgbWF4IGJhY2sgdG8gbnVsbC5cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAvIDUpXG4gICAgICB9XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5tYXgpXG4gIH1cblxuICBhc3luYyBzZXRNcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heCkpIHsgdmFsdWUgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heCkgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBnZXQgc2FuICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUpXG4gIH1cblxuICBnZXQgaW50ICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnaW50JylcbiAgfVxuXG4gIGdldCBvY2N1cGF0aW9uUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBvY2N1cGF0aW9uUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24pIHtcbiAgICAgICAgb2NjdXBhdGlvblBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMub2NjdXBhdGlvblxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2NjdXBhdGlvblBvaW50c1xuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb25Qb2ludHMgKCkge1xuICAgIGlmICghdGhpcy5vY2N1cGF0aW9uKSByZXR1cm4gMFxuICAgIGxldCBwb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHRoaXMub2NjdXBhdGlvbi5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgKSkge1xuICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gZW50cnlcbiAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgIGlmICh2YWx1ZS5zZWxlY3RlZCkge1xuICAgICAgICBwb2ludHMgKz0gY2hhci52YWx1ZSAqIE51bWJlcih2YWx1ZS5tdWx0aXBsaWVyKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9pbnRzXG4gIH1cblxuICBhc3luYyByZXNldE9jY3VwYXRpb25Qb2ludHMgKCkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IHRoaXMub2NjdXBhdGlvblBvaW50c1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNldEFyY2hldHlwZVBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5hcmNoZXR5cGUnOiB0aGlzLm9jY3VwYXRpb25Qb2ludHNcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRQZXJzb25hbFBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5wZXJzb25hbCc6IHRoaXMucGVyc29uYWxQb2ludHNcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGFyY2hldHlwZVBvaW50c1NwZW50ICgpIHtcbiAgICBsZXQgYXJjaGV0eXBlUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHM/LmFyY2hldHlwZSkge1xuICAgICAgICBhcmNoZXR5cGVQb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLmFyY2hldHlwZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJjaGV0eXBlUG9pbnRzXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlUG9pbnRzICgpIHtcbiAgICBpZiAoIXRoaXMuYXJjaGV0eXBlKSByZXR1cm4gMFxuICAgIHJldHVybiB0aGlzLmFyY2hldHlwZS5zeXN0ZW0uYm9udXNQb2ludHNcbiAgfVxuXG4gIGdldCBleHBlcmllbmNlUG9pbnRzICgpIHtcbiAgICBsZXQgZXhwZXJpZW5jZVBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlKSB7XG4gICAgICAgIGV4cGVyaWVuY2VQb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2VcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV4cGVyaWVuY2VQb2ludHNcbiAgfVxuXG4gIGdldCBwZXJzb25hbFBvaW50c1NwZW50ICgpIHtcbiAgICBsZXQgcGVyc29uYWxQb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8ucGVyc29uYWwpIHtcbiAgICAgICAgcGVyc29uYWxQb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLnBlcnNvbmFsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwZXJzb25hbFBvaW50c1xuICB9XG5cbiAgZ2V0IHBlcnNvbmFsUG9pbnRzICgpIHtcbiAgICByZXR1cm4gMiAqIE51bWJlcih0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuaW50LnZhbHVlKVxuICB9XG5cbiAgZ2V0IGhhc0RldmVsb3BtZW50UGhhc2UgKCkge1xuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uZmxhZ3M/LmRldmVsb3BlbWVudCkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMub25seVJ1bk9uY2VQZXJTZXNzaW9uKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgZm9yIChjb25zdCBzYW5pdHlMb3NzRXZlbnQgb2YgdGhpcy5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cykge1xuICAgICAgaWYgKCFzYW5pdHlMb3NzRXZlbnQuaW1tdW5pdHkpIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgc2V0U2FuICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heCkgeyB2YWx1ZSA9IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heCB9XG4gICAgY29uc3QgbG9zcyA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlKSAtIHZhbHVlXG5cbiAgICBpZiAobG9zcyA+IDApIHtcbiAgICAgIGxldCB0b3RhbExvc3MgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzKVxuICAgICAgICA6IDBcbiAgICAgIHRvdGFsTG9zcyA9IHRvdGFsTG9zcyArIGxvc3NcbiAgICAgIGlmIChsb3NzID49IDUpIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lKVxuICAgICAgaWYgKHRvdGFsTG9zcyA+PSB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmluZGVmSW5zYW5lKVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJzogdmFsdWUsXG4gICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJzogdG90YWxMb3NzXG4gICAgICB9KVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnOiB2YWx1ZSB9KVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgYXN5bmMgc2V0QXR0cmliQXV0byAodmFsdWUsIGF0dHJpYikge1xuICAgIGNvbnN0IHVwZGF0ZWRLZXkgPSBgc3lzdGVtLmF0dHJpYnMuJHthdHRyaWJ9LmF1dG9gXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgW3VwZGF0ZWRLZXldOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlQXR0cmliQXV0byAoYXR0cmliKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJBdXRvKCF0aGlzLnN5c3RlbS5hdHRyaWJzW2F0dHJpYl0uYXV0bywgYXR0cmliKVxuICB9XG5cbiAgc3RhdGljIGRiRnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgY29uc3Qgc3VtID0gKGNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgPz8gMCkgKyAoY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSA/PyAwKVxuICAgIGlmIChzdW0gPCA2NSkgcmV0dXJuIC0yXG4gICAgaWYgKHN1bSA8IDg1KSByZXR1cm4gLTFcbiAgICBpZiAoc3VtIDwgMTI1KSByZXR1cm4gMFxuICAgIGlmIChzdW0gPCAxNjUpIHJldHVybiAnMUQ0J1xuICAgIHJldHVybiBgJHtNYXRoLmZsb29yKChzdW0gLSA0NSkgLyA4MCl9RDZgXG4gIH1cblxuICBzdGF0aWMgYnVpbGRGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICBjb25zdCBzdW0gPSAoY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA/PyAwKSArIChjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlID8/IDApXG4gICAgaWYgKHN1bSA8IDY1KSByZXR1cm4gLTJcbiAgICBpZiAoc3VtIDwgODUpIHJldHVybiAtMVxuICAgIGlmIChzdW0gPCAxMjUpIHJldHVybiAwXG4gICAgaWYgKHN1bSA8IDE2NSkgcmV0dXJuIDFcbiAgICByZXR1cm4gTWF0aC5mbG9vcigoc3VtIC0gNDUpIC8gODApICsgMVxuICB9XG5cbiAgc3RhdGljIGhwRnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzLCB0eXBlKSB7XG4gICAgY29uc3Qgc3VtID0gcGFyc2VJbnQoY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSA/PyAwLCAxMCkgKyBwYXJzZUludChjaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlID8/IDAsIDEwKVxuICAgIGNvbnN0IGRpdmlzb3IgPSAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVEb3VibGVNYXhIZWFsdGgnKSAmJiB0eXBlID09PSAnY2hhcmFjdGVyJyA/IDUgOiAxMClcbiAgICByZXR1cm4gTWF0aC5mbG9vcihzdW0gLyBkaXZpc29yKVxuICB9XG5cbiAgc3RhdGljIG1wRnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAvIDUpXG4gIH1cblxuICBzdGF0aWMgbW92RnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzLCB0eXBlLCBhZ2UpIHtcbiAgICBsZXQgTU9WXG4gICAgaWYgKGNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgPiBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlICYmIGNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgPiBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlKSB7XG4gICAgICBNT1YgPSA5IC8vIEJ1ZyBjb3JyZWN0aW9uIGJ5IEFkbWlyYWxOeWFyLlxuICAgIH0gZWxzZSBpZiAoY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSA+PSBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlIHx8IGNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgPj0gY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSkge1xuICAgICAgTU9WID0gOFxuICAgIH0gZWxzZSB7XG4gICAgICBNT1YgPSA3XG4gICAgfVxuICAgIGlmICh0eXBlICE9PSAnY3JlYXR1cmUnICYmICFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpKSB7XG4gICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KGFnZSkpKSB7XG4gICAgICAgIE1PViA9IHBhcnNlSW50KGFnZSkgPj0gNDAgPyBNT1YgLSBNYXRoLmZsb29yKHBhcnNlSW50KGFnZSkgLyAxMCkgKyAzIDogTU9WXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBNYXRoLm1heCgwLCBNT1YpXG4gIH1cblxuICBnZXQgcmF3QnVpbGQgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvKSB7XG4gICAgICByZXR1cm4gQ29DQWN0b3IuYnVpbGRGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcylcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZVxuICB9XG5cbiAgZ2V0IGJ1aWxkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZVxuICB9XG5cbiAgZ2V0IHJhd0RiICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzLmRiKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID09PSAnYXV0bycpIHtcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIuYXV0bykge1xuICAgICAgcmV0dXJuIENvQ0FjdG9yLmRiRnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlXG4gIH1cblxuICBnZXQgZGIgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlXG4gIH1cblxuICBnZXQgcmF3TW92ICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdikgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8pIHtcbiAgICAgIGNvbnN0IE1PViA9IENvQ0FjdG9yLm1vdkZyb21DaGFyYWN0ZXJpc3RpY3ModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLCB0aGlzLnN5c3RlbS50eXBlLCB0aGlzLnN5c3RlbS5pbmZvcy5hZ2UpXG4gICAgICBpZiAoTU9WID4gMCkgcmV0dXJuIE1PVlxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWVcbiAgfVxuXG4gIGdldCBtb3YgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZVxuICB9XG5cbiAgZ2V0IHRva2VuSWQgKCkge1xuICAgIC8vIFRPRE8gY2xhcmlmaWVyIGNhIGV0IHRva2Vua2V5XG4gICAgcmV0dXJuIHRoaXMudG9rZW4gPyBgJHt0aGlzLnRva2VuLnNjZW5lLl9pZH0uJHt0aGlzLnRva2VuLmlkfWAgOiBudWxsIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IGxvY2tlZCAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MubG9ja2VkID0gdHJ1ZSAvLyBMb2NrZWQgYnkgZGVmYXVsdFxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiBmYWxzZSB9KVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgfVxuXG4gIGdldEl0ZW1zRnJvbU5hbWUgKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoaSA9PiBpLm5hbWUgPT09IG5hbWUpXG4gIH1cblxuICBzZXQgbG9ja2VkICh2YWx1ZSkge1xuICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlQWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGZsYWdWYWx1ZSA9ICF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV1cbiAgICBjb25zdCBuYW1lID0gYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBhdHRyaWJ1dGVOYW1lIGtleSBvZiBhdHRyaWJ1dGUgdG8gY2hlY2sgaW4gWydsY2snXVxuICAgKiBAcGFyYW0geyp9IGZhc3RGb3J3YXJkXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcbiAgICovXG4gIGFzeW5jIGF0dHJpYnV0ZUNoZWNrIChhdHRyaWJ1dGVOYW1lLCBmYXN0Rm9yd2FyZCA9IGZhbHNlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBhdHRyaWIgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgaWYgKCFhdHRyaWIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZCcsIHtcbiAgICAgICAgICBtaXNzaW5nOiBhdHRyaWJ1dGVOYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAob3B0aW9ucy5tb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBhd2FpdCBjaGVjay5yb2xsQXR0cmlidXRlKGF0dHJpYi5rZXkpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGNoYXJhY3RlcmlzdGljTmFtZSBrZXkgb2YgY2hhcmFjdGVyaXN0aWMgdG8gY2hlY2sgaW4gWydzdHInLCdjb24nLCdzaXonLCdkZXgnLCdhcHAnLCdpbnQnLCdwb3cnLCdlZHUnXVxuICAgKiBAcGFyYW0geyp9IGZhc3RGb3J3YXJkXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcbiAgICovXG4gIGFzeW5jIGNoYXJhY3RlcmlzdGljQ2hlY2sgKFxuICAgIGNoYXJhY3RlcmlzdGljTmFtZSxcbiAgICBmYXN0Rm9yd2FyZCA9IGZhbHNlLFxuICAgIG9wdGlvbnMgPSB7fVxuICApIHtcbiAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWN0ZXJpc3RpY05hbWUpXG5cbiAgICBpZiAoIWNoYXIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZEZvckFjdG9yJywge1xuICAgICAgICAgIG1pc3Npbmc6IGNoYXJhY3RlcmlzdGljTmFtZSxcbiAgICAgICAgICBhY3RvcjogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuXG4gICAgaWYgKG9wdGlvbnMubW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcbiAgICB9XG5cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBpZiAodW5kZWZpbmVkID09PSBvcHRpb25zLmRpZmZpY3VsdHkgfHwgdW5kZWZpbmVkID09PSBvcHRpb25zLm1vZGlmaWVyKSB7XG4gICAgICAgIG9wdGlvbnMuZGlzcGxheU5hbWUgPSBjaGFyLmxhYmVsXG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9IHRoaXMudG9rZW5LZXlcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgZWxzZSBjaGVjay5pc0JsaW5kID0gISFvcHRpb25zLmJsaW5kXG4gICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKGNoYXIua2V5KVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBhc3luYyBza2lsbENoZWNrIChza2lsbERhdGEsIGZhc3RGb3J3YXJkLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBza2lsbElkZW50aWZpZXIgPSBza2lsbERhdGEubmFtZSA/IHNraWxsRGF0YS5uYW1lIDogc2tpbGxEYXRhXG4gICAgY29uc3QgaXNDb0NJRCA9ICEhc2tpbGxJZGVudGlmaWVyLm1hdGNoKC9eaVxcLnNraWxsXFwuLylcbiAgICBsZXQgc2tpbGwgPSBbXVxuICAgIGlmIChpc0NvQ0lEKSB7XG4gICAgICAvLyBBdHRlbXB0IHRvIGxvYWQgZnJvbSBhY3RvciBmcm9tIENvQyBJRFxuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZ2V0Rmlyc3RTa2lsbEJ5Q29DSUQoc2tpbGxJZGVudGlmaWVyKVxuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgc2tpbGwucHVzaChpdGVtKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXNraWxsLmxlbmd0aCkge1xuICAgICAgLy8gQXR0ZW1wdCB0byBsb2FkIGZvciBhY3RvciBieSBuYW1lXG4gICAgICBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKHNraWxsSWRlbnRpZmllcilcbiAgICB9XG4gICAgaWYgKCFza2lsbC5sZW5ndGgpIHtcbiAgICAgIGxldCBpdGVtID0gbnVsbFxuICAgICAgaWYgKHNraWxsRGF0YS5wYWNrKSB7XG4gICAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChza2lsbERhdGEucGFjaylcbiAgICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxuICAgICAgICBpdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudChza2lsbERhdGEuaWQpXG4gICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5pZCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoc2tpbGxEYXRhLmlkKVxuICAgICAgfVxuXG4gICAgICAvLyBObyBza2lsbCBmb3VuZCwgdHJ5IHRvIGdldCBnZXQgaXQgZnJvbSBjb21wZW5kaXVtICFcbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgcmV0cmlldmFsIG9mIHNraWxsIGZyb20gY29tcGVuZGl1bSAhIVxuICAgICAgICAvLyBnYW1lLnNldHRpbmdzLmdldCggJ0NvQzcnLCAnRGVmYXVsdENvbXBlbmRpdW0nKTtcbiAgICAgICAgY29uc29sZS5sb2coc2tpbGxJZGVudGlmaWVyKVxuICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICBjaGVjay5fcmF3VmFsdWUgPSAnPydcbiAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICB9XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk5vU2tpbGwnKSArICcgJyArXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90Rm91bmRGb3JBY3RvcicsIHtcbiAgICAgICAgICAgICAgbWlzc2luZzogc2tpbGxEYXRhLm5hbWUgPyBza2lsbERhdGEubmFtZSA6IHNraWxsRGF0YSxcbiAgICAgICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBsZXQgY3JlYXRlID0gZmFsc2VcbiAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFkZFdlYXBvbnRIaW50Jywge1xuICAgICAgICAgIHdlYXBvbjogc2tpbGxEYXRhLm5hbWUsXG4gICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgY3JlYXRlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBpZiAoY3JlYXRlID09PSB0cnVlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZm91bmRyeS51dGlscy5kdXBsaWNhdGUoaXRlbSldKVxuICAgICAgfSBlbHNlIHJldHVyblxuXG4gICAgICBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKGl0ZW0ubmFtZSlcblxuICAgICAgaWYgKCFza2lsbC5sZW5ndGgpIHJldHVyblxuXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgY29uc3Qgc2tpbGxWYWx1ZSA9IGF3YWl0IFNraWxsVmFsdWVEaWFsb2cuY3JlYXRlKFxuICAgICAgICAgIHNraWxsWzBdLm5hbWUsXG4gICAgICAgICAgc2tpbGxbMF0uYmFzZVxuICAgICAgICApXG4gICAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKHNraWxsVmFsdWUuZ2V0KCdiYXNlLXZhbHVlJykpXG4gICAgICAgIGF3YWl0IHNraWxsWzBdLnVwZGF0ZVZhbHVlKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLm1vZGlmaWVyKSB7XG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcbiAgICB9XG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5IHx8IHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5tb2RpZmllcikge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XG4gICAgY2hlY2suc2tpbGwgPSBza2lsbFswXS5pZFxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuICB9XG5cbiAgYXN5bmMgd2VhcG9uQ2hlY2sgKHdlYXBvbkRhdGEsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBsZXQgd2VhcG9uXG4gICAgaWYgKHR5cGVvZiB3ZWFwb25EYXRhLnV1aWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3ZWFwb24gPSBhd2FpdCBmcm9tVXVpZCh3ZWFwb25EYXRhLnV1aWQpXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2VhcG9uRGF0YS5pZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdlYXBvbiA9IHRoaXMuaXRlbXMuZ2V0KHdlYXBvbkRhdGEuaWQpXG4gICAgfVxuICAgIGlmICghd2VhcG9uKSB7XG4gICAgICBsZXQgd2VhcG9ucyA9IHRoaXMuZ2V0SXRlbXNGcm9tTmFtZSh3ZWFwb25EYXRhLm5hbWUpXG4gICAgICBpZiAod2VhcG9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBudWxsXG4gICAgICAgICAgY29uc3QgcGFjayA9IHdlYXBvbkRhdGEucGFjayA/IGdhbWUucGFja3MuZ2V0KHdlYXBvbkRhdGEucGFjaykgOiBudWxsXG4gICAgICAgICAgaWYgKHBhY2spIHtcbiAgICAgICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm5cbiAgICAgICAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KHdlYXBvbkRhdGEuaWQpXG4gICAgICAgICAgfSBlbHNlIGlmICh3ZWFwb25EYXRhLmlkKSB7XG4gICAgICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQod2VhcG9uRGF0YS5pZClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9Ob0l0ZW1Gb3VuZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb25EYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgICAgIGNyZWF0ZSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnN0IGFjdG9yID1cbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLnBhcmVudD8uYWN0b3IgIT09ICd1bmRlZmluZWQnID8gdGhpcy5wYXJlbnQuYWN0b3IgOiB0aGlzXG5cbiAgICAgICAgICBpZiAoY3JlYXRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBhd2FpdCBhY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLnRvSlNPTigpXSlcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuXG4gICAgICAgICAgd2VhcG9ucyA9IGFjdG9yLmdldEl0ZW1zRnJvbU5hbWUoaXRlbS5uYW1lKVxuICAgICAgICAgIGlmICghd2VhcG9ucy5sZW5ndGgpIHJldHVyblxuICAgICAgICAgIGF3YWl0IHdlYXBvbnNbMF0ucmVsb2FkKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yQWN0b3JIYXNOb1dlYXBvbk5hbWVkJywge1xuICAgICAgICAgICAgICBhY3Rvck5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgd2VhcG9uTmFtZTogd2VhcG9uRGF0YS5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh3ZWFwb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JBY3Rvckhhc1Rvb01hbnlXZWFwb25zTmFtZWQnLCB7XG4gICAgICAgICAgICBhY3Rvck5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIHdlYXBvbk5hbWU6IHdlYXBvbkRhdGEubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHdlYXBvbiA9IHdlYXBvbnNbMF1cbiAgICB9XG5cbiAgICBpZiAoIXdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA+IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuVG9vTWFueVRhcmdldCcpKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdNZWxlZUluaXRpYXRvcih0aGlzLnRva2VuS2V5LCAod2VhcG9uRGF0YS51dWlkIHx8IHdlYXBvbi5pZCksIGZhc3RGb3J3YXJkKVxuICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IodGhpcy50b2tlbktleSwgKHdlYXBvbkRhdGEudXVpZCB8fCB3ZWFwb24uaWQpLCBmYXN0Rm9yd2FyZClcbiAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxJbml0aWF0aXZlIChoYXNHdW4gPSBmYWxzZSkge1xuICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSkge1xuICAgICAgY2FzZSAnb3B0aW9uYWwnOiB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKHRoaXMuYWN0b3JLZXkpXG4gICAgICAgIHJvbGwuZGVueVB1c2ggPSB0cnVlXG4gICAgICAgIHJvbGwuZGVueUx1Y2sgPSB0cnVlXG4gICAgICAgIHJvbGwuZGVueUJsaW5kVGFtcGVyaW5nID0gdHJ1ZVxuICAgICAgICByb2xsLmhpZGVEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUluaXREaWNlcycpID09PSBmYWxzZVxuICAgICAgICByb2xsLmZsYXZvciA9ICdJbml0aWF0aXZlIHJvbGwnXG4gICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKCdkZXgnLCBoYXNHdW4gPyAxIDogMClcbiAgICAgICAgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHJvbGwuc3VjY2Vzc0xldmVsICsgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSAvIDEwMFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBoYXNHdW5cbiAgICAgICAgICA/IHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgKyA1MFxuICAgICAgICAgIDogdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgIH1cbiAgfVxuXG4gIGdldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlXG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV0pIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIHNldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YF06IHRydWUgfSlcbiAgfVxuXG4gIGFzeW5jIHVuc2V0QWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXTogZmFsc2UgfSlcbiAgfVxuXG4gIGdldFdlYXBvblNraWxscyAoaXRlbUlkKSB7XG4gICAgbGV0IHdlYXBvbiA9IGZyb21VdWlkU3luYyhpdGVtSWQpXG4gICAgaWYgKCF3ZWFwb24pIHtcbiAgICAgIHdlYXBvbiA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3ZWFwb24uc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgd2VhcG9uID0gZ2FtZS5wYWNrcy5nZXQod2VhcG9uLnBhY2spLmdldCh3ZWFwb24uX2lkKVxuICAgIH1cbiAgICBpZiAod2VhcG9uLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKSlcbiAgICB9XG5cbiAgICBpZiAod2VhcG9uLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSlcbiAgICB9XG4gICAgcmV0dXJuIHNraWxsc1xuICB9XG5cbiAgLyoqIFRyeSB0byBmaW5kIGEgY2hhcmFjdGVyaXN0aWMsIGF0dHJpYnV0ZSBvciBza2lsbCB0aGF0IG1hdGNoZXMgdGhlIG5hbWUgKi9cbiAgZmluZCAobmFtZSkge1xuICAgIGlmICghbmFtZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIFRyeSBJRFxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChuYW1lKVxuICAgIGlmIChpdGVtKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaXRlbScsXG4gICAgICAgIHZhbHVlOiBpdGVtXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVnRXhwID0gL1xcKChbXildKylcXCkvXG4gICAgY29uc3QgbWF0Y2hlcyA9IHJlZ0V4cC5leGVjKG5hbWUpXG4gICAgbGV0IHNob3J0TmFtZSA9IG51bGxcbiAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCkgc2hvcnROYW1lID0gbWF0Y2hlc1sxXVxuICAgIC8vIFRyeSB0byBmaW5kIGEgc2tpbGwgd2l0aCBleGFjdCBuYW1lLlxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5za2lsbHMuZmlsdGVyKHMgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgISFzLm5hbWUgJiZcbiAgICAgICAgKHMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XG4gICAgICAgICAgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgfHxcbiAgICAgICAgICBzLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpID09PVxuICAgICAgICAgICAgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgfHxcbiAgICAgICAgICBzLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpID09PVxuICAgICAgICAgICAgc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykpXG4gICAgICApXG4gICAgfSlcbiAgICBpZiAoc2tpbGwubGVuZ3RoKSByZXR1cm4geyB0eXBlOiAnaXRlbScsIHZhbHVlOiBza2lsbFswXSB9XG5cbiAgICAvLyBUcnkgdG8gZmluZCBhIGNoYXJhY3RlcmlzdGljLlxuICAgIGNvbnN0IGNoYXJLZXkgPSBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdycsICdlZHUnXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcktleS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoY2hhcktleVtpXSlcbiAgICAgIGlmIChjaGFyKSB7XG4gICAgICAgIGNoYXIubmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNoYXIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBjaGFyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY2hhci5zaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGNoYXIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2NoYXJhY3RlcmlzdGljJywgdmFsdWU6IGNoYXIgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjaGFyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBjaGFyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2NoYXJhY3RlcmlzdGljJywgdmFsdWU6IGNoYXIgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBhdHRyaWJ1dGUuXG4gICAgY29uc3QgYXR0cmliS2V5ID0gWydsY2snLCAnc2FuJ11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJpYktleS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXR0ciA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYktleVtpXSlcbiAgICAgIGlmIChhdHRyKSB7XG4gICAgICAgIGF0dHIubmFtZSA9IGF0dHIubGFiZWxcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBhdHRyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBhdHRyLnNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGF0dHIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHdpdGggcGFydGlhbCA/P1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBwaWxvdFNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHMuc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiZcbiAgICAgICAgcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgZ2FtZS5pMThuXG4gICAgICAgICAgICAubG9jYWxpemUoJ0NvQzcuUGlsb3RTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGdldCBkcml2ZVNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHMuc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiZcbiAgICAgICAgcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgZ2FtZS5pMThuXG4gICAgICAgICAgICAubG9jYWxpemUoJ0NvQzcuRHJpdmVTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGdldCB0b2tlblV1aWQgKCkge1xuICAgIGlmICh0aGlzLnNoZWV0LnRva2VuKSB7XG4gICAgICByZXR1cm4gdGhpcy5zaGVldC50b2tlbi51dWlkXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIC8vIENsYXJpZmllciBjYSBldCB0b2tlbmlkXG4gICAgLyoqICogTU9ESUYgMC44LnggKi9cbiAgICAvLyBpZiB0aGlzLnNoZWV0LnRva2VuID0+IHdhcyBvcGVuZWQgZnJvbSB0b2tlblxuICAgIC8vIGlmIHRoaXMudG9rZW4gPT4gc3ludGhldGljIGFjdG9yID09IHRoaXMuaXNUb2tlblxuICAgIGlmICh0aGlzLnNoZWV0LnRva2VuKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5zaGVldC50b2tlbi5wYXJlbnQuaWR9LiR7dGhpcy5zaGVldC50b2tlbi5pZH1gXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHRoaXMuaWRcbiAgICB9XG4gICAgLyoqKioqKioqKioqKioqKioqL1xuICAgIC8vIC8vQ2FzZSAxOiB0aGUgYWN0b3IgaXMgYSBzeW50aGV0aWMgYWN0b3IgYW5kIGhhcyBhIHRva2VuLCByZXR1cm4gdG9rZW4ga2V5LlxuICAgIC8vIGlmKCB0aGlzLmlzVG9rZW4pIHJldHVybiBgJHt0aGlzLnRva2VuLnNjZW5lPy5faWQ/dGhpcy50b2tlbi5zY2VuZS5faWQ6J1RPS0VOJ30uJHt0aGlzLnRva2VuLmlkfWA7ICAvL1JFRkFDVE9SSU5HICgyKVxuXG4gICAgLy8gLy9DYXNlIDI6IHRoZSBhY3RvciBpcyBub3QgYSB0b2tlbiAobGlua2VkIGFjdG9yKS4gSWYgdGhlIHNoZWV0IGhhdmUgYW4gYXNzb2NpYXRlZCB0b2tlbiByZXR1cm4gdGhlIHRva2VuIGtleS5cbiAgICAvLyBpZiggdGhpcy5zaGVldC50b2tlbikgcmV0dXJuIGAke3RoaXMuc2hlZXQudG9rZW4uc2NlbmU/LmlkP3RoaXMuc2hlZXQudG9rZW4uc2NlbmUuaWQ6J1RPS0VOJ30uJHt0aGlzLnNoZWV0LnRva2VuLmlkfWA7XG5cbiAgICAvLyAvL0Nhc2UgMzogQWN0b3IgaGFzIG5vIHRva2VuIHJldHVybiBoaXMgSUQ7XG4gICAgLy8gcmV0dXJuIHRoaXMuaWQ7XG4gIH1cblxuICBnZXQgYWN0b3JLZXkgKCkge1xuICAgIGlmICh0aGlzLnByb3RvdHlwZVRva2VuLmFjdG9yTGluaykgcmV0dXJuIHRoaXMuaWQgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgcmV0dXJuIHRoaXMudG9rZW5LZXlcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBnZXQgaGFzUm9sbGFibGVDaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGZvciAoY29uc3QgWywgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmIChpc05hTihOdW1iZXIodmFsdWUuZm9ybXVsYSkpKSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBob3NSb2xsYWJsZVNraWxscyAoKSB7XG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKGlzTmFOKHNraWxsLnN5c3RlbT8udmFsdWUpKSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBVc2UgdGhlIGZvcm11bGEgaWYgYXZhaWxhYmxlIHRvIHJvbGwgc29tZSBjaGFyYWN0ZXJpdGljcy5cbiAgICovXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAodmFsdWUuZm9ybXVsYSAmJiAhdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKHZhbHVlLmZvcm11bGEpXG4gICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGlmIChyLnRvdGFsKSB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gTWF0aC5mbG9vcihcbiAgICAgICAgICAgIHIudG90YWxcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpY3MpXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXG4gIH1cblxuICAvKipcbiAgICogSWYgdGhlcmUgaXMgYSBmb3JtdWxhLCB3aWxsIHNldCB0aGUgY2hhcmFjdGVyaXN0aWMgdG8gdGhlIGF2ZXJhZ2UgdmFsdWUgLGlmIGRpdmlzaWJsZSBieSA1LCBvciB0aGUgY2xvc2VzdCAxMC5cbiAgICovXG4gIGFzeW5jIGF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAodmFsdWUuZm9ybXVsYSAmJiAhdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgY29uc3QgbWF4ID0gbmV3IFJvbGwodmFsdWUuZm9ybXVsYSkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgICBjb25zdCBtaW4gPSBuZXcgUm9sbCh2YWx1ZS5mb3JtdWxhKS5ldmFsdWF0ZSh7IG1pbmltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIGNvbnN0IGF2ZXJhZ2UgPSBNYXRoLmZsb29yKChtYXggKyBtaW4pIC8gMilcbiAgICAgICAgY29uc3QgY2hhclZhbHVlID1cbiAgICAgICAgICBhdmVyYWdlICUgNSA9PT0gMCA/IGF2ZXJhZ2UgOiBNYXRoLnJvdW5kKGF2ZXJhZ2UgLyAxMCkgKiAxMFxuICAgICAgICBpZiAoY2hhclZhbHVlKSB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gY2hhclZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpY3MpXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXG4gIH1cblxuICAvKipcbiAgICogVGVzdCBpZiBhIGNoYXJhY3RlcmlzaXRjIGZvcm11bGEgaXMgYSByZWZlcmVuY2UgdG8gYW4gb3RoZXIgY2hhcmFjdGVyaXN0aWMgYW5kIHNldCBpdCBhY2NvcmRpbmdseS5cbiAgICovXG4gIGFzeW5jIHJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmICh2YWx1ZS5mb3JtdWxhICYmIHZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGxldCBjaGFyVmFsdWVcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjaGFyVmFsdWUgPSBuZXcgUm9sbChcbiAgICAgICAgICAgIHZhbHVlLmZvcm11bGEsXG4gICAgICAgICAgICB0aGlzLnBhcnNlQ2hhcmFjdGVyaXN0aWNzKClcbiAgICAgICAgICApLmV2YWx1YXRlKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY2hhclZhbHVlID0gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFyVmFsdWUpIHtcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3NbYHN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPSBjaGFyVmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljcylcbiAgfVxuXG4gIGFzeW5jIHNldENoYXJhY3RlcmlzdGljIChuYW1lLCB2YWx1ZSkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljID0ge31cbiAgICBjb25zdCBjaGFyVmFsdWUgPSBpc05hTihwYXJzZUludCh2YWx1ZSkpID8gbnVsbCA6IHBhcnNlSW50KHZhbHVlKVxuICAgIGNoYXJhY3RlcmlzdGljW25hbWVdID0gY2hhclZhbHVlXG4gICAgaWYgKCFjaGFyVmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgY29uc3QgZm9ybXVsYSA9IG5hbWUucmVwbGFjZSgnLnZhbHVlJywgJy5mb3JtdWxhJylcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNbZm9ybXVsYV0gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljKVxuICAgIGF3YWl0IHRoaXMucmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUoKVxuICB9XG5cbiAgYXN5bmMgZGV2ZWxvcGVtZW50UGhhc2UgKGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCBmYWlsdXJlID0gW11cbiAgICBjb25zdCBzdWNjZXNzID0gW11cbiAgICBjb25zdCBza2lsbE1hc3RlcmluZ1RocmVzaG9sZCA9IDkwXG4gICAgY29uc3QgYWx3YXlzU3VjY2Vzc1RocmVzaG9sZCA9IDk1XG5cbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsQWxsNERldicpXG4gICAgbGV0IHNraWxsc1JvbGxlZCA9IDBcbiAgICBsZXQgbWVzc2FnZSA9ICc8cCBjbGFzcz1cImNoYXQtY2FyZFwiPidcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICBpZiAoaXRlbS5kZXZlbG9wZW1lbnRGbGFnKSB7XG4gICAgICAgICAgc2tpbGxzUm9sbGVkKytcbiAgICAgICAgICBjb25zdCBkaWUgPSBhd2FpdCBuZXcgRGllKHsgZmFjZXM6IDEwMCB9KS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgY29uc3Qgc2tpbGxWYWx1ZSA9IGl0ZW0udmFsdWVcbiAgICAgICAgICBsZXQgYXVnbWVudCA9IG51bGxcbiAgICAgICAgICBsZXQgc2tpbGxNYXN0ZXJpbmdNZXNzYWdlID0gbnVsbFxuICAgICAgICAgIGlmIChkaWUudG90YWwgPiBza2lsbFZhbHVlIHx8IGRpZS50b3RhbCA+PSBhbHdheXNTdWNjZXNzVGhyZXNob2xkKSB7XG4gICAgICAgICAgICBjb25zdCBhdWdtZW50RGllID0gYXdhaXQgbmV3IERpZSh7IGZhY2VzOiAxMCB9KS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICAgIGFzeW5jOiB0cnVlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgc3VjY2Vzcy5wdXNoKGl0ZW0uaWQpXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgU0FOIGF1Z21lbnQgd2hlbiB0aGUgc2tpbGwgZ29lcyBiZXlvbmQgdGhlIHNraWxsIG1hc3RlcmluZyB0aHJlc2hvbGQuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHNraWxsVmFsdWUgPCBza2lsbE1hc3RlcmluZ1RocmVzaG9sZCAmJlxuICAgICAgICAgICAgICBza2lsbFZhbHVlICsgYXVnbWVudERpZS50b3RhbCA+PSBza2lsbE1hc3RlcmluZ1RocmVzaG9sZFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGF1Z21lbnRTQU5EaWUgPSBhd2FpdCBuZXcgRGllKHtcbiAgICAgICAgICAgICAgICBmYWNlczogNixcbiAgICAgICAgICAgICAgICBudW1iZXI6IDJcbiAgICAgICAgICAgICAgfSkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICBjb25zdCBzYW5HYWluZWQgPSBhdWdtZW50U0FORGllLnRvdGFsXG4gICAgICAgICAgICAgIGNvbnN0IHNhbkdhaW5lZE1lc3NhZ2UgPSBgR2FpbmVkIDJkNiAoJHthdWdtZW50U0FORGllLnZhbHVlc1swXX0gKyAke2F1Z21lbnRTQU5EaWUudmFsdWVzWzFdfSA9ICR7c2FuR2FpbmVkfSkgU0FOYFxuICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKHNhbkdhaW5lZE1lc3NhZ2UpXG4gICAgICAgICAgICAgIHNraWxsTWFzdGVyaW5nTWVzc2FnZSA9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAnQ29DNy5TYW5HYWluZWQnLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHJlc3VsdHM6IGAke2F1Z21lbnRTQU5EaWUudmFsdWVzWzBdfSArICR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMV19YCxcbiAgICAgICAgICAgICAgICAgIHNhbkdhaW5lZCxcbiAgICAgICAgICAgICAgICAgIHNraWxsOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgICBza2lsbFZhbHVlOiBza2lsbFZhbHVlICsgYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKX08L3NwYW4+PGJyPmBcbiAgICAgICAgICAgICAgLy8gU2V0IHNhbiBjb250cm9scyB0aGF0IGl0IGRvZXNuJ3QgYXVnbWVudCBiZXlvbmQgc2FuTWF4XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0U2FuKHRoaXMuc2FuICsgc2FuR2FpbmVkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXVnbWVudCArPSBhdWdtZW50RGllLnRvdGFsXG4gICAgICAgICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2U3VjY2VzcycsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgZGllOiBkaWUudG90YWwsXG4gICAgICAgICAgICAgICAgc2NvcmU6IGl0ZW0udmFsdWUsXG4gICAgICAgICAgICAgICAgYXVnbWVudDogYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YFxuICAgICAgICAgICAgaWYgKHNraWxsTWFzdGVyaW5nTWVzc2FnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBtZXNzYWdlICs9IHNraWxsTWFzdGVyaW5nTWVzc2FnZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgaXRlbS5pbmNyZWFzZUV4cGVyaWVuY2UoYXVnbWVudClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLWZhaWxlZFwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2RmFpbHVyZScsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBpdGVtLm5hbWUsXG4gICAgICAgICAgICAgICAgZGllOiBkaWUudG90YWwsXG4gICAgICAgICAgICAgICAgc2NvcmU6IGl0ZW0udmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKX08L3NwYW4+PGJyPmBcbiAgICAgICAgICAgIGZhaWx1cmUucHVzaChpdGVtLmlkKVxuICAgICAgICAgIH1cbiAgICAgICAgICBhd2FpdCBpdGVtLnVuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9IFtdXG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgIGZvciAoY29uc3Qgc2FuaXR5TG9zc0V2ZW50IG9mIHRoaXMuc3lzdGVtLnNhbml0eUxvc3NFdmVudHMpIHtcbiAgICAgIGlmIChzYW5pdHlMb3NzRXZlbnQuaW1tdW5pdHkpIHtcbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHNhbml0eUxvc3NFdmVudClcbiAgICAgIH0gZWxzZSBpZiAoc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zcyA+IDEpIHtcbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zcy0tXG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaChzYW5pdHlMb3NzRXZlbnQpXG4gICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgaWYgKHNraWxsc1JvbGxlZCkge1xuICAgICAgICBtZXNzYWdlICs9ICc8YnI+J1xuICAgICAgfVxuICAgICAgbWVzc2FnZSArPSBgPHNwYW4+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZHVjZVNhbml0eUxpbWl0cycpfTwvc3Bhbj5gXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHNcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIG1lc3NhZ2UgKz0gJzwvcD4nXG4gICAgICBjb25zdCBzcGVha2VyID0geyBhY3RvcjogdGhpcyB9XG4gICAgICBhd2FpdCBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2Uoc2tpbGxzUm9sbGVkID8gdGl0bGUgOiAnJywgbWVzc2FnZSwge1xuICAgICAgICBzcGVha2VyXG4gICAgICB9KVxuICAgICAgdGhpcy5vbmx5UnVuT25jZVBlclNlc3Npb24gPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiB7IGZhaWx1cmUsIHN1Y2Nlc3MgfVxuICB9XG5cbiAgYXN5bmMgZGV2ZWxvcEx1Y2sgKGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCBjdXJyZW50THVjayA9IHRoaXMuc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlXG4gICAgaWYgKCFjdXJyZW50THVjaykgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlJzogMCB9KVxuICAgIGNvbnN0IHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjayA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ3B1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjaydcbiAgICApXG4gICAgY29uc3QgdXBncmFkZVJvbGwgPSAoYXdhaXQgbmV3IFJvbGwoJzFEMTAwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgIGNvbnN0IGhpZ2hlclRoYW5DdXJyZW50THVjayA9IHVwZ3JhZGVSb2xsID4gY3VycmVudEx1Y2tcbiAgICBsZXQgYXVnbWVudFJvbGxcbiAgICBpZiAocHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrKSB7XG4gICAgICBoaWdoZXJUaGFuQ3VycmVudEx1Y2tcbiAgICAgICAgPyAoYXVnbWVudFJvbGwgPSAnMkQxMCsxMCcpXG4gICAgICAgIDogKGF1Z21lbnRSb2xsID0gJzFEMTArNScpXG4gICAgfSBlbHNlIGlmIChoaWdoZXJUaGFuQ3VycmVudEx1Y2spIHtcbiAgICAgIGF1Z21lbnRSb2xsID0gJzFEMTAnXG4gICAgfVxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxMdWNrNERldicpXG4gICAgbGV0IG1lc3NhZ2UgPSAnPHAgY2xhc3M9XCJjaGF0LWNhcmRcIj4nXG4gICAgaWYgKHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjayB8fCBoaWdoZXJUaGFuQ3VycmVudEx1Y2spIHtcbiAgICAgIGNvbnN0IGF1Z21lbnRWYWx1ZSA9IChhd2FpdCBuZXcgUm9sbChhdWdtZW50Um9sbCkucm9sbCh7IGFzeW5jOiB0cnVlIH0pKVxuICAgICAgICAudG90YWxcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6XG4gICAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUgKyBhdWdtZW50VmFsdWVcbiAgICAgIH0pXG4gICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgJ0NvQzcuTHVja0luY3JlYXNlZCcsXG4gICAgICAgIHtcbiAgICAgICAgICBkaWU6IHVwZ3JhZGVSb2xsLFxuICAgICAgICAgIHNjb3JlOiBjdXJyZW50THVjayxcbiAgICAgICAgICBhdWdtZW50OiBhdWdtZW50VmFsdWVcbiAgICAgICAgfVxuICAgICAgKX08L3NwYW4+YFxuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAnQ29DNy5MdWNrTm90SW5jcmVhc2VkJyxcbiAgICAgICAgeyBkaWU6IHVwZ3JhZGVSb2xsLCBzY29yZTogY3VycmVudEx1Y2sgfVxuICAgICAgKX08L3NwYW4+YFxuICAgIH1cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBtZXNzYWdlICs9ICc8L3A+J1xuICAgICAgY29uc3Qgc3BlYWtlciA9IHsgYWN0b3I6IHRoaXMgfVxuICAgICAgYXdhaXQgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKHRpdGxlLCBtZXNzYWdlLCB7IHNwZWFrZXIgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZXZlbG9wU2tpbGwgKHNraWxsSWQsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZ2V0KHNraWxsSWQpXG4gICAgaWYgKCFza2lsbCkgcmV0dXJuXG4gICAgbGV0IHRpdGxlID0gJydcbiAgICBsZXQgbWVzc2FnZSA9ICcnXG4gICAgY29uc3QgdXBncmFkZVJvbGwgPSBuZXcgUm9sbCgnMUQxMDAnKVxuICAgIGF3YWl0IHVwZ3JhZGVSb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgIGlmICghZmFzdEZvcndhcmQpIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHVwZ3JhZGVSb2xsKVxuICAgIGlmICh1cGdyYWRlUm9sbC50b3RhbCA+IHNraWxsLnZhbHVlIHx8IHVwZ3JhZGVSb2xsLnRvdGFsID49IDk1KSB7XG4gICAgICBjb25zdCBhdWdtZW50Um9sbCA9IG5ldyBSb2xsKCcxRDEwJylcbiAgICAgIGF3YWl0IGF1Z21lbnRSb2xsLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgaWYgKCFmYXN0Rm9yd2FyZCkgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QoYXVnbWVudFJvbGwpXG4gICAgICBtZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZTdWNjZXNzRGV0YWlscycsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZSxcbiAgICAgICAgYXVnbWVudDogYXVnbWVudFJvbGwudG90YWxcbiAgICAgIH0pXG4gICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2Um9sbFRpdGxlJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lLFxuICAgICAgICBkaWU6IHVwZ3JhZGVSb2xsLnRvdGFsLFxuICAgICAgICBzY29yZTogc2tpbGwudmFsdWVcbiAgICAgIH0pXG4gICAgICBhd2FpdCBza2lsbC5pbmNyZWFzZUV4cGVyaWVuY2UoYXVnbWVudFJvbGwudG90YWwpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZSb2xsVGl0bGUnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWUsXG4gICAgICAgIGRpZTogdXBncmFkZVJvbGwudG90YWwsXG4gICAgICAgIHNjb3JlOiBza2lsbC52YWx1ZVxuICAgICAgfSlcbiAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldkZhaWx1cmVEZXRhaWxzJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lXG4gICAgICB9KVxuICAgIH1cbiAgICBjb25zdCBzcGVha2VyID0geyBhY3RvcjogdGhpcy5faWQgfVxuICAgIGF3YWl0IGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZSh0aXRsZSwgbWVzc2FnZSwgeyBzcGVha2VyIH0pXG4gICAgYXdhaXQgc2tpbGwudW5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgfVxuXG4gIGhhc0NvbmRpdGlvblN0YXR1cyAoY29uZGl0aW9uTmFtZSkge1xuICAgIGNvbnN0IGNvbmRpdGlvblZhbHVlID0gdGhpcy5zeXN0ZW0uY29uZGl0aW9ucz8uW2NvbmRpdGlvbk5hbWVdPy52YWx1ZVxuICAgIGlmICh0eXBlb2YgY29uZGl0aW9uVmFsdWUgIT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIGZhbHNlIC8vIE5lY2Vzc2FyeSwgaW5jb3JyZWN0IHRlbXBsYXRlIGluaXRpYWxpemF0aW9uXG4gICAgfVxuICAgIHJldHVybiBjb25kaXRpb25WYWx1ZVxuICB9XG5cbiAgaGFzQ29uZGl0aW9uVmFsdWUgKGNvbmRpdGlvbk5hbWUsIGZpZWxkKSB7XG4gICAgaWYgKCF0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhjb25kaXRpb25OYW1lKSkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBpZiAoY29uZGl0aW9uTmFtZSA9PT0gQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUgJiYgZmllbGQgPT09ICdkdXJhdGlvblRleHQnKSB7XG4gICAgICBjb25zdCByZWFsVGltZSA9IHRoaXMuaGFzQ29uZGl0aW9uVmFsdWUoY29uZGl0aW9uTmFtZSwgJ3JlYWxUaW1lJylcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gdGhpcy5oYXNDb25kaXRpb25WYWx1ZShjb25kaXRpb25OYW1lLCAnZHVyYXRpb24nKVxuICAgICAgaWYgKHR5cGVvZiBkdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgcmV0dXJuIGR1cmF0aW9uICsgJyAnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJvdW5kcycpXG4gICAgICAgIH0gZWxzZSBpZiAocmVhbFRpbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgcmV0dXJuIGR1cmF0aW9uICsgJyAnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmhvdXJzJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5jb25kaXRpb25zPy5bY29uZGl0aW9uTmFtZV0/LltmaWVsZF1cbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZUNvbmRpdGlvbiAoY29uZGl0aW9uTmFtZSkge1xuICAgIGNvbnN0IGNvbmRpdGlvblZhbHVlID0gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoY29uZGl0aW9uTmFtZSlcbiAgICBpZiAoIWNvbmRpdGlvblZhbHVlKSB7XG4gICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihjb25kaXRpb25OYW1lKVxuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLnVuc2V0Q29uZGl0aW9uKGNvbmRpdGlvbk5hbWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgc2V0Q29uZGl0aW9uIChcbiAgICBjb25kaXRpb25OYW1lLFxuICAgIHtcbiAgICAgIGZvcmNlVmFsdWUgPSBmYWxzZSxcbiAgICAgIGp1c3RUaGlzID0gZmFsc2UsXG4gICAgICByZWFsVGltZSA9IG51bGwsXG4gICAgICBkdXJhdGlvbiA9IG51bGxcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgaWYgKCFmb3JjZVZhbHVlICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJykpIHtcbiAgICAgIGNvbnN0IGVmZmVjdHMgPSB0aGlzLmVmZmVjdHNcbiAgICAgICAgLmZpbHRlcihlZmZlY3QgPT4gQ29DN0FjdGl2ZUVmZmVjdC5maWx0ZXJBY3RpdmVFZmZlY3RzKGVmZmVjdCwgY29uZGl0aW9uTmFtZSkpXG4gICAgICAgIC5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcbiAgICAgIGNvbnN0IGN1c3RvbSA9IHt9XG4gICAgICBzd2l0Y2ggKGNvbmRpdGlvbk5hbWUpIHtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICAgIGN1c3RvbS5mbGFncyA9IHtcbiAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgb3ZlcmxheTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICAgIGN1c3RvbS5mbGFncyA9IHtcbiAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgcmVhbFRpbWU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjdXN0b20uZHVyYXRpb24gPSB7XG4gICAgICAgICAgICByb3VuZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNlY29uZHM6IHVuZGVmaW5lZFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocmVhbFRpbWUgPT09IHRydWUgfHwgcmVhbFRpbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjdXN0b20uZmxhZ3MuQ29DNy5yZWFsVGltZSA9IHJlYWxUaW1lXG4gICAgICAgICAgICBjdXN0b20uZmxhZ3MgPSB7XG4gICAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgICByZWFsVGltZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHVyYXRpb24gIT09IG51bGwgJiYgdHlwZW9mIGR1cmF0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpZiAocmVhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICBjdXN0b20uZHVyYXRpb24ucm91bmRzID0gZHVyYXRpb25cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXN0b20uZHVyYXRpb24uc2Vjb25kcyA9IGR1cmF0aW9uICogMzYwMFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBpZiAoZWZmZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmlsdGVyKFxuICAgICAgICAgIGVmZmVjdCA9PiBlZmZlY3QuaWQgPT09IGNvbmRpdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoZWZmZWN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGNvbnN0IHNvdXJjZSA9IHtcbiAgICAgICAgICAgIGljb246IGVmZmVjdFswXS5pY29uLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc05ld2VyVmVyc2lvbihnYW1lLnZlcnNpb24sICcxMScpKSB7XG4gICAgICAgICAgICAvLyBGb3VuZHJ5VlRUIHYxMFxuICAgICAgICAgICAgc291cmNlLmxhYmVsID0gZ2FtZS5pMThuLmxvY2FsaXplKGVmZmVjdFswXS5sYWJlbClcbiAgICAgICAgICAgIHNvdXJjZS5mbGFncyA9IHtcbiAgICAgICAgICAgICAgY29yZToge1xuICAgICAgICAgICAgICAgIHN0YXR1c0lkOiBlZmZlY3RbMF0uaWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzb3VyY2UubmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShlZmZlY3RbMF0ubmFtZSlcbiAgICAgICAgICAgIHNvdXJjZS5zdGF0dXNlcyA9IFtlZmZlY3RbMF0uaWRdXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGVmZmVjdERhdGEgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHNvdXJjZSwgY3VzdG9tKVxuICAgICAgICAgIGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbZWZmZWN0RGF0YV0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVGhpcyBkb2Vzbid0IGV4aXN0IGluIEZvdW5kcnlWVFQgQWN0aXZlRWZmZWN0cz9cbiAgICAgICAgICBmb3JjZVZhbHVlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXN0b20uX2lkID0gZWZmZWN0c1swXVxuICAgICAgICBhd2FpdCBzdXBlci51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW2N1c3RvbV0pXG4gICAgICAgIGZvcmNlVmFsdWUgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmb3JjZVZhbHVlIHx8ICFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpKSB7XG4gICAgICBzd2l0Y2ggKGNvbmRpdGlvbk5hbWUpIHtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy51bmNvbnNjaW91czpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kczpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5wcm9uZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgIFtgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS52YWx1ZWBdOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IHt9XG4gICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0udmFsdWVgXSA9IHRydWVcbiAgICAgICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSB8fCByZWFsVGltZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnJlYWxUaW1lYF0gPSByZWFsVGltZVxuICAgICAgICAgICAgICBpZiAoZHVyYXRpb24gIT09IG51bGwgJiYgdHlwZW9mIGR1cmF0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5kdXJhdGlvbmBdID0gZHVyYXRpb25cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgICAgICBgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5yZWFsVGltZWBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS4tPXJlYWxUaW1lYF0gPSBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgICAgIGBzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LmR1cmF0aW9uYFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9Li09ZHVyYXRpb25gXSA9IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKGZpZWxkcylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmICghanVzdFRoaXMpIHtcbiAgICAgICAgLy8gRG9lcyBzZXR0aW5nIHRoZSBjb25kaXRpb24gYWxzbyB0cmlnZ2VyIG90aGVyIGFjdGlvbnM/XG4gICAgICAgIC8vIC0gSWYgQWN0aXZlRWZmZWN0cyBhcmUgYWRkZWQgaGFzQ29uZGl0aW9uU3RhdHVzIGZvciByZWNlbnRseSBhZGRlZCBjb25kaXRpb25zIG1heSByZXR1cm4gaW5jb3JyZWN0bHlcbiAgICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kczpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnByb25lKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpICYmXG4gICAgICAgICAgICAgICF0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5kZWFkKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNvbkNoZWNrID0gbmV3IENvQzdDb25DaGVjayhcbiAgICAgICAgICAgICAgICB0aGlzLmlzVG9rZW4gPyB0aGlzLnRva2VuS2V5IDogdGhpcy5pZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGNvbkNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmR5aW5nKVxuICAgICAgICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyB1bnNldENvbmRpdGlvbiAoY29uZGl0aW9uTmFtZSwgeyBmb3JjZVZhbHVlID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFmb3JjZVZhbHVlICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJykpIHtcbiAgICAgIGNvbnN0IGVmZmVjdHMgPSB0aGlzLmVmZmVjdHNcbiAgICAgICAgLmZpbHRlcihlZmZlY3QgPT4gQ29DN0FjdGl2ZUVmZmVjdC5maWx0ZXJBY3RpdmVFZmZlY3RzKGVmZmVjdCwgY29uZGl0aW9uTmFtZSkpXG4gICAgICAgIC5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcbiAgICAgIGlmIChlZmZlY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIGVmZmVjdHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JjZVZhbHVlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2VWYWx1ZSB8fCAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT12YWx1ZWBdOiBudWxsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0udmFsdWVgXTogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVE9ETyA6IGNoZWNrIGlmIGV2ZXIgdXNlZFxuICBhc3luYyByZXNldENvdW50ZXIgKGNvdW50ZXIpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtjb3VudGVyXTogMCB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXREYWlseVNhbml0eSAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0JzogTWF0aC5mbG9vcihcbiAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgLyA1XG4gICAgICApLFxuICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiAwXG4gICAgfSlcbiAgfVxuXG4gIGdldCBmaWdodGluZ1NraWxscyAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnICYmIHZhbHVlLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldCBjbG9zZUNvbWJhdFdlYXBvbnMgKCkge1xuICAgIGNvbnN0IHdlYXBvbkxpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICd3ZWFwb24nICYmICF2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtcy5nZXQodmFsdWUuc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICAgIHZhbHVlLnN5c3RlbS5za2lsbC5tYWluLnZhbHVlID0gc2tpbGwgPyBza2lsbC52YWx1ZSA6IDBcbiAgICAgICAgd2VhcG9uTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHdlYXBvbkxpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICByZXR1cm4gd2VhcG9uTGlzdFxuICB9XG5cbiAgZ2V0IGZpcmVhcm1Ta2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiB2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldCB1c2VyICgpIHtcbiAgICAvLyBpcyB0aGF0IGFjdG9yIGltcGVyc29uYW50ZWQgYnkgYSB1c2VyID9cbiAgICByZXR1cm4gZ2FtZS51c2Vycy5maW5kKHVzZXIgPT4ge1xuICAgICAgaWYgKHVzZXIuY2hhcmFjdGVyKSB7XG4gICAgICAgIGlmICh1c2VyLmNoYXJhY3Rlci5pZCA9PT0gdGhpcy5pZCkgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBnZXQgZG9kZ2VTa2lsbCAoKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldEZpcnN0U2tpbGxCeUNvQ0lEKCdpLnNraWxsLmRvZGdlJylcbiAgICBpZiAoc2tpbGwpIHtcbiAgICAgIHJldHVybiBza2lsbFxuICAgIH1cbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRvZGdlJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGNyZWRpdFJhdGluZ1NraWxsICgpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0Rmlyc3RTa2lsbEJ5Q29DSUQoJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycpXG4gICAgaWYgKHNraWxsKSB7XG4gICAgICByZXR1cm4gc2tpbGxcbiAgICB9XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5jcmVkaXQtcmF0aW5nJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGN0aHVsaHVNeXRob3NTa2lsbCAoKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldEZpcnN0U2tpbGxCeUNvQ0lEKCdpLnNraWxsLmN0aHVsaHUtbXl0aG9zJylcbiAgICBpZiAoc2tpbGwpIHtcbiAgICAgIHJldHVybiBza2lsbFxuICAgIH1cbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmN0aHVsaHUtbXl0aG9zJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGN0aHVsaHVNeXRob3MgKCkge1xuICAgIGNvbnN0IENNID0gdGhpcy5jdGh1bGh1TXl0aG9zU2tpbGxcbiAgICBpZiAoQ00pIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gQ00udmFsdWVcbiAgICAgIGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlXG4gICAgICByZXR1cm4gcGFyc2VJbnQoQ00uc3lzdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IG15dGhvc0hhcmRlbmVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRGbGFnKCdDb0M3JywgJ215dGhvc0hhcmRlbmVkJykgfHwgZmFsc2VcbiAgfVxuXG4gIGFzeW5jIHNldE15dGhvc0hhcmRlbmVkICgpIHtcbiAgICBhd2FpdCB0aGlzLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnLCB0cnVlKVxuICB9XG5cbiAgZ2V0IG15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCcpIHx8IGZhbHNlXG4gIH1cblxuICBhc3luYyBleHBlcmllbmNlRmlyc3RNeXRob3NJbnNhbml0eSAoKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRGbGFnKCdDb0M3JywgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnLCB0cnVlKVxuICB9XG5cbiAgZ2V0IGNyZWRpdFJhdGluZyAoKSB7XG4gICAgY29uc3QgQ1IgPSB0aGlzLmNyZWRpdFJhdGluZ1NraWxsXG4gICAgaWYgKENSKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IENSLnZhbHVlXG4gICAgICBpZiAodmFsdWUpIHJldHVybiB2YWx1ZVxuICAgICAgcmV0dXJuIHBhcnNlSW50KENSLnN5c3RlbS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHN0YXRpYyBtb25ldGFyeUZvcm1hdCAoZm9ybWF0LCBzeW1ib2wsIHZhbHVlKSB7XG4gICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMubHNkOlxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih2YWx1ZSAvIDI0MCkgKyAnLycgKyAoTWF0aC5mbG9vcih2YWx1ZSAvIDEyKSAlIDIwKSArICcvJyArICh2YWx1ZSAlIDEyKVxuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5yb21hbjpcbiAgICAgICAgcmV0dXJuIChNYXRoLmZsb29yKHZhbHVlIC8gNDAwKSkgKyAnLycgKyAoTWF0aC5mbG9vcih2YWx1ZSAvIDE2KSAlIDI1KSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gOCkgJSAyKSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gNCkgJSAyKSArICcvJyArICh2YWx1ZSAlIDQpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmRlY2ltYWxMZWZ0OlxuICAgICAgICByZXR1cm4gc3ltYm9sICsgTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsIHsgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pLnJlcGxhY2UoL1xcLjAwJC8sICcnKVxuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5kZWNpbWFsUmlnaHQ6XG4gICAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCwgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSkucmVwbGFjZSgvXFwuMDAkLywgJycpICsgJyAnICsgc3ltYm9sXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmludGVnZXJMZWZ0OlxuICAgICAgICByZXR1cm4gc3ltYm9sICsgTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZygpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmludGVnZXJSaWdodDpcbiAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSkudG9Mb2NhbGVTdHJpbmcoKSArICcgJyArIHN5bWJvbFxuICAgIH1cbiAgICByZXR1cm4gJzAnXG4gIH1cblxuICBzdGF0aWMgbW9uZXRhcnlWYWx1ZSAoZm9ybWF0LCB2YWx1ZXMsIENSLCB0eXBlLCB2YWx1ZSkge1xuICAgIENSID0gQ1IgfHwgMFxuICAgIGNvbnN0IHJvdyA9IHZhbHVlcy5maW5kKHIgPT4gKHR5cGVvZiByLm1pbiA9PT0gJ29iamVjdCcgfHwgci5taW4gPD0gQ1IpICYmICh0eXBlb2Ygci5tYXggPT09ICdvYmplY3QnIHx8IHIubWF4ID49IENSKSlcbiAgICBpZiAodHlwZW9mIHJvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHJvd1t0eXBlXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHJvd1t2YWx1ZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmxzZDpcbiAgICAgICAgICBzd2l0Y2ggKHJvd1t0eXBlXSkge1xuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMubXVsdGlwbGllcjpcbiAgICAgICAgICAgICAgcmV0dXJuIDI0MCAqIENSICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMudmFsdWU6XG4gICAgICAgICAgICAgIHJldHVybiAyNDAgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5zOlxuICAgICAgICAgICAgICByZXR1cm4gMTIgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5kOlxuICAgICAgICAgICAgICByZXR1cm4gMSAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5yb21hbjpcbiAgICAgICAgICBzd2l0Y2ggKHJvd1t0eXBlXSkge1xuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMubXVsdGlwbGllcjpcbiAgICAgICAgICAgICAgcmV0dXJuIDQwMCAqIENSICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMudmFsdWU6XG4gICAgICAgICAgICAgIHJldHVybiA0MDAgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5kZW5hcmlpOlxuICAgICAgICAgICAgICByZXR1cm4gMTYgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5xdWluYXJpaTpcbiAgICAgICAgICAgICAgcmV0dXJuIDggKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5zZXN0ZXJ0aWk6XG4gICAgICAgICAgICAgIHJldHVybiA0ICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMuYXNzZXM6XG4gICAgICAgICAgICAgIHJldHVybiAxICogcm93W3ZhbHVlXVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHN3aXRjaCAocm93W3R5cGVdKSB7XG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5tdWx0aXBsaWVyOlxuICAgICAgICAgICAgICByZXR1cm4gQ1IgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy52YWx1ZTpcbiAgICAgICAgICAgICAgcmV0dXJuIDEgKiByb3dbdmFsdWVdXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgc3BlbmRpbmdMZXZlbCAoKSB7XG4gICAgcmV0dXJuIENvQ0FjdG9yLm1vbmV0YXJ5VmFsdWUodGhpcy5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCB0aGlzLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMsIHRoaXMuY3JlZGl0UmF0aW5nLCAnc3BlbmRpbmdUeXBlJywgJ3NwZW5kaW5nVmFsdWUnKVxuICB9XG5cbiAgZ2V0IGNhc2ggKCkge1xuICAgIHJldHVybiBDb0NBY3Rvci5tb25ldGFyeVZhbHVlKHRoaXMuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgdGhpcy5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzLCB0aGlzLmNyZWRpdFJhdGluZywgJ2Nhc2hUeXBlJywgJ2Nhc2hWYWx1ZScpXG4gIH1cblxuICBnZXQgYXNzZXRzICgpIHtcbiAgICByZXR1cm4gQ29DQWN0b3IubW9uZXRhcnlWYWx1ZSh0aGlzLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHRoaXMuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcywgdGhpcy5jcmVkaXRSYXRpbmcsICdhc3NldHNUeXBlJywgJ2Fzc2V0c1ZhbHVlJylcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJykgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0IG93bmVycyAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlcnMuZmlsdGVyKFxuICAgICAgdSA9PiB0aGlzLnRlc3RVc2VyUGVybWlzc2lvbih1LCAnT1dORVInKSAmJiAhdS5pc0dNXG4gICAgKVxuICB9XG5cbiAgZ2V0IHBsYXllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3duZXJzLmZpbHRlcih1ID0+IHUuY2hhcmFjdGVyPy5pZCA9PT0gdGhpcy5pZClcbiAgfVxuXG4gIGdldCBjaGFyYWN0ZXJVc2VyICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZ2FtZS51c2Vycy5jb250ZW50cy5maWx0ZXIodSA9PiB1LmNoYXJhY3Rlcj8uaWQgPT09IHRoaXMuaWQpWzBdIHx8IG51bGxcbiAgICApXG4gIH1cblxuICBhc3luYyBzZXRIcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgdmFsdWUgPSB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heFxuICAgIH1cbiAgICBjb25zdCBoZWFsdGhCZWZvcmUgPSB0aGlzLmhwXG4gICAgbGV0IGRhbWFnZVRha2VuXG4gICAgLy8gaXMgaGVhbGluZ1xuICAgIGlmIChpc05hTihoZWFsdGhCZWZvcmUpIHx8IHZhbHVlID49IGhlYWx0aEJlZm9yZSkge1xuICAgICAgYXdhaXQgdGhpcy5fc2V0SHAodmFsdWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRhbWFnZVRha2VuID0gaGVhbHRoQmVmb3JlIC0gdmFsdWVcbiAgICAgIGF3YWl0IHRoaXMuZGVhbERhbWFnZShkYW1hZ2VUYWtlbiwgeyBpZ25vcmVBcm1vcjogdHJ1ZSB9KVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2UgKGFtb3VudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgLy8gVE9ETzogQ2hhbmdlIG9wdGlvbnMgdG8gbGlzdCBvZiB2YWx1ZXNcbiAgICBjb25zdCBhcm1vckRhdGEgPSBvcHRpb25zLmFybW9yXG4gICAgICA/IG9wdGlvbnMuYXJtb3JcbiAgICAgIDogdGhpcy5zeXN0ZW0uYXR0cmlicy5hcm1vciAvLyBpZiB0aGVyZSBhcm1vciB2YWx1ZSBwYXNzZWQgd2UgdXNlIGl0XG4gICAgY29uc3QgZ3Jvc3NEYW1hZ2UgPSBwYXJzZUludChhbW91bnQpXG4gICAgbGV0IGFybW9yVmFsdWUgPSAwXG4gICAgaWYgKCFvcHRpb25zLmlnbm9yZUFybW9yKSB7XG4gICAgICBpZiAoYXJtb3JEYXRhID09PSBudWxsKSB7XG4gICAgICAgIC8vIG5vcFxuICAgICAgfSBlbHNlIGlmIChDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYShhcm1vckRhdGEpKSB7XG4gICAgICAgIGFybW9yVmFsdWUgPSAoYXdhaXQgbmV3IFJvbGwoYXJtb3JEYXRhKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JEYXRhKSkpIHtcbiAgICAgICAgYXJtb3JWYWx1ZSA9IE51bWJlcihhcm1vckRhdGEpXG4gICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JEYXRhPy52YWx1ZSkpKSB7XG4gICAgICAgIGFybW9yVmFsdWUgPSBOdW1iZXIoYXJtb3JEYXRhLnZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JVbmFibGVUb1BhcnNlQXJtb3JGb3JtdWxhJywge1xuICAgICAgICAgICAgdmFsdWU6IGFybW9yRGF0YVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbmV0RGFtYWdlID0gZ3Jvc3NEYW1hZ2UgLSBhcm1vclZhbHVlXG4gICAgaWYgKG5ldERhbWFnZSA8PSAwKSByZXR1cm4gMFxuICAgIGF3YWl0IHRoaXMuX3NldEhwKHRoaXMuaHAgLSBuZXREYW1hZ2UpXG4gICAgaWYgKG5ldERhbWFnZSA+PSB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMnKSkge1xuICAgICAgICBpZiAodGhpcy5ocCA9PT0gMCkge1xuICAgICAgICAgIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4IC8gMikpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmR5aW5nKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobmV0RGFtYWdlID49IE1hdGguY2VpbCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCAvIDIpKSB7XG4gICAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgICAgICAgdGhpcy5pc1Rva2VuID8gdGhpcy50b2tlbktleSA6IHRoaXMuaWRcbiAgICAgICAgICApXG4gICAgICAgICAgY29uQ2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGhhc01ham9yV291bmQgPSBmYWxzZVxuICAgICAgICBpZiAobmV0RGFtYWdlID49IE1hdGguY2VpbCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCAvIDIpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgICAgaGFzTWFqb3JXb3VuZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoYXNNYWpvcldvdW5kID0gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaHAgPT09IDApIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICBpZiAoaGFzTWFqb3JXb3VuZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXREYW1hZ2VcbiAgfVxuXG4gIGdldCBtYWpvcldvdW5kICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gIH1cblxuICBnZXQgZHlpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5keWluZylcbiAgfVxuXG4gIGdldCB1bmNvbnNjaW91cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICB9XG5cbiAgZ2V0IGRlYWQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5kZWFkKVxuICB9XG5cbiAgZ2V0IHByb25lICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMucHJvbmUpXG4gIH1cblxuICAvLyBzdGF0aWMgdXBkYXRlQWN0b3IoIGFjdG9yLCBkYXRhVXBkYXRlKXtcbiAgLy8gICBpZiggZ2FtZS51c2VyLmlzR00pe1xuICAvLyAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgdXBkYXRpbmcgYWN0b3IgJHthY3Rvci5uYW1lfWApO1xuICAvLyAgICAgY29uc3QgcHJvbmUgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5wcm9uZV07XG4gIC8vICAgICBjb25zdCB1bmNvbnNjaW91cyA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLnVuY29uc2Npb3VzXTtcbiAgLy8gICAgIGNvbnN0IGNyaXRpY2FsV291bmRzID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHNdO1xuICAvLyAgICAgY29uc3QgZHlpbmcgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5keWluZ107XG4gIC8vICAgICBpZiggcHJvbmUpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JQcm9uZScsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICAgIGlmKCB1bmNvbnNjaW91cykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvclVuY29uc2Npb3VzJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIGNyaXRpY2FsV291bmRzKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yTWFqb3JXb3VuZCcsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICAgIGlmKCBkeWluZykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvckR5aW5nJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgIH1cbiAgLy8gICByZXR1cm47XG4gIC8vIH1cblxuICAvLyBcIkNvQzcuSW5mb0FjdG9yUHJvbmVcIjogXCJ7YWN0b3J9IGZhbGwgcHJvbmVcIixcbiAgLy8gXCJDb0M3LkluZm9BY3RvclVuY29uc2Npb3VzXCI6IFwie2FjdG9yfSBmYWxsIHVuY29uc2Npb3VzXCIsXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JNYWpvcldvdW5kXCI6IFwie2FjdG9yfSBnZXQgYSBtYWpvciB3b3VuZFwiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9yRHlpbmdcIjogXCJ7YWNvcn0gaXMgZHlpbmdcIixcbiAgLy8gXCJDb0M3LkluZm9BY3RvckluanVyaWVkXCI6IFwie2FjdG9yfSBpcyBpbmp1cmllZFwiLFxuXG4gIC8vIHN0YXRpYyB1cGRhdGVUb2tlbiggc2NlbmUsIHRva2VuLCBkYXRhVXBkYXRlKXtcbiAgLy8gICBjb25zdCBpbmp1cmllZCA9IGRhdGFVcGRhdGU/LmFjdG9yRGF0YT8uZmxhZ3M/LkNvQzc/LmluanVyaWVkO1xuICAvLyAgIGlmKCBpbmp1cmllZCkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvckluanVyaWVkJywge2FjdG9yOiB0b2tlbi5uYW1lfSkpO1xuICAvLyAgIHJldHVybjtcbiAgLy8gfVxuXG4gIC8vIGFzeW5jIHVwZGF0ZSAoZGF0YSA9IHt9LCBjb250ZXh0ID0ge30pIHtcbiAgLy8gICBjb25zb2xlLmxvZygnPj4+PicsIGRhdGEsIGNvbnRleHQpXG4gIC8vICAgc3VwZXIudXBkYXRlKGRhdGEsIGNvbnRleHQpXG4gIC8vIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvciwgQXVkaW9IZWxwZXIsIENoYXRNZXNzYWdlLCBDT05GSUcsIENPTlNULCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgZ2V0Q29tcHV0ZWRTdHlsZSwgSXRlbSwgcmVuZGVyVGVtcGxhdGUsIFRva2VuLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuL2RpY2UuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hlY2sge1xuICBjb25zdHJ1Y3RvciAoXG4gICAgYWN0b3IgPSBudWxsLFxuICAgIHNraWxsID0gbnVsbCxcbiAgICBpdGVtID0gbnVsbCxcbiAgICBkaWNlTW9kID0gMCxcbiAgICBkaWZmaWN1bHR5ID0gbnVsbCxcbiAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSAwLFxuICAgIGZsYXREaWNlTW9kaWZpZXIgPSAwXG4gICkge1xuICAgIHRoaXMuYWN0b3IgPSBhY3RvclxuICAgIHRoaXMuc2tpbGwgPSBza2lsbFxuICAgIHRoaXMuaXRlbSA9IGl0ZW1cbiAgICB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgdGhpcy5yYXdWYWx1ZSA9IDAgLy8gdmFsdWUgbmVlZGVkIGJlZm9yZSBkaWZmaWN1bHR5XG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBudWxsXG4gICAgdGhpcy5yZWZlcmVuY2VNZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy5wdXNoaW5nID0gZmFsc2VcbiAgICB0aGlzLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcblxuICAgIGlmIChkaWZmaWN1bHR5ID09PSBudWxsKSB7XG4gICAgICBjb25zdCBpc1Vua25vd24gPVxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JykgPT09ICd1bmtub3duJ1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gaXNVbmtub3duXG4gICAgICAgID8gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duXG4gICAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBjYXJkVHlwZSAoKSB7XG4gICAgcmV0dXJuICdyb2xsQ2FyZCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGlmZmljdWx0eUxldmVsICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdW5rbm93bjogLTEsXG4gICAgICByZWd1bGFyOiAxLFxuICAgICAgaGFyZDogMixcbiAgICAgIGV4dHJlbWU6IDMsXG4gICAgICBjcml0aWNhbDogNCxcbiAgICAgIGltcG9zc2libGU6IDlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHN1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZ1bWJsZTogLTk5LFxuICAgICAgZmFpbHVyZTogMCxcbiAgICAgIHJlZ3VsYXI6IDEsXG4gICAgICBoYXJkOiAyLFxuICAgICAgZXh0cmVtZTogMyxcbiAgICAgIGNyaXRpY2FsOiA0XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCB0eXBlICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2hhcmFjdGVyaXN0aWM6ICdjaGFyYWN0ZXJpc3RpYycsXG4gICAgICBhdHRyaWJ1dGU6ICdhdHRyaWJ1dGUnLFxuICAgICAgc2tpbGw6ICdpdGVtJyxcbiAgICAgIGl0ZW06ICdpdGVtJyxcbiAgICAgIHZhbHVlOiAndmFsdWUnXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGRpZmZpY3VsdHlTdHJpbmcgKGRpZmZpY3VsdHlMZXZlbCkge1xuICAgIHN3aXRjaCAoXG4gICAgICAhaXNOYU4oTnVtYmVyKGRpZmZpY3VsdHlMZXZlbCkpXG4gICAgICAgID8gTnVtYmVyKGRpZmZpY3VsdHlMZXZlbClcbiAgICAgICAgOiBkaWZmaWN1bHR5TGV2ZWxcbiAgICApIHtcbiAgICAgIGNhc2UgJz8nOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVua25vd25EaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysrJzpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICBjYXNlICcrKysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd246XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXI6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGdldCByYXdWYWx1ZSAoKSB7XG4gICAgLy8gaWYgKCF0aGlzLmFjdG9yIHx8ICF0aGlzLmFjdG9yLmlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLl9yYXdWYWx1ZSkge1xuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9XG4gICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLnZhbHVlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5za2lsbCkgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuc2tpbGwudmFsdWVcbiAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0udmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuX3Jhd1ZhbHVlKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyICYmXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICkge1xuICAgICAgICBpZiAodGhpcy5fcmF3VmFsdWUgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciA8IDEpIHJldHVybiAxXG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWVcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IHJhd1ZhbHVlICh4KSB7XG4gICAgdGhpcy5fcmF3VmFsdWUgPSB4XG4gIH1cblxuICBzZXQgdXVpZCAoeCkge1xuICAgIHRoaXMuX3V1aWQgPSB4XG4gIH1cblxuICBnZXQgdXVpZCAoKSB7XG4gICAgaWYgKCF0aGlzLl91dWlkKSB0aGlzLl91dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICByZXR1cm4gdGhpcy5fdXVpZFxuICB9XG5cbiAgZ2V0IGhhc0NhcmQgKCkge1xuICAgIGNvbnN0IGNoYXRDYXJkID0gdWkuY2hhdC5jb2xsZWN0aW9uLmZpbHRlcihtZXNzYWdlID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMudXVpZCA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3V1aWQnKSAmJlxuICAgICAgICBDb0M3Q2hlY2suY2FyZFR5cGUgPT09IG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICd0eXBlJylcbiAgICAgIClcbiAgICB9KVxuICAgIGlmIChjaGF0Q2FyZC5sZW5ndGggPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHJhd1ZhbHVlU3RyaW5nICgpIHtcbiAgICBpZiAodGhpcy5fcmF3VmFsdWUgPT09IDApIHtcbiAgICAgIHJldHVybiAnMCdcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9yYXdWYWx1ZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChcbiAgICAgIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyICYmXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgKSB7XG4gICAgICBpZiAodGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPCAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZS50b1N0cmluZygpICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIudG9TdHJpbmcoKVxuICAgICAgfVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKSArICcrJyArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICAgIClcbiAgICB9IGVsc2UgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlLnRvU3RyaW5nKClcbiAgfVxuXG4gIGdldCBjcml0aWNhbFRocmVzaG9sZCAoKSB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIGdldCByZWd1bGFyVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xuICAgICAgaWYgKHRoaXMucmF3VmFsdWUgPj0gMTAwKSByZXR1cm4gOTlcbiAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnJhd1ZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGhhcmRUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnJhd1ZhbHVlIC8gMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGV4dHJlbWVUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnJhd1ZhbHVlIC8gNSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGZ1bWJsZVRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlmZmljdWx0eSA+PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyZW1lVGhyZXNob2xkIDwgNTAgPyA5NiA6IDEwMFxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGlmZmljdWx0eSA+PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5oYXJkVGhyZXNob2xkIDwgNTAgPyA5NiA6IDEwMFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5yYXdWYWx1ZSA8IDUwID8gOTYgOiAxMDBcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzdWNjZXNUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc3dpdGNoICh0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWU6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgIHJldHVybiB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsOlxuICAgICAgICAgIHJldHVybiB0aGlzLmNyaXRpY2FsVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxuICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB0aGlzLnJhd1ZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eVN0cmluZyAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXI6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd246XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGdldCBtb2RpZmllZFJlc3VsdCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0eXBlb2YgdGhpcy5fbW9kaWZpZWRSZXN1bHQgIT09ICd1bmRlZmluZWQnKSByZXR1cm4gdGhpcy5fbW9kaWZpZWRSZXN1bHRcbiAgICBpZiAodGhpcy5mbGF0RGljZU1vZGlmaWVyKSB7XG4gICAgICBjb25zdCBtb2RpZmllZCA9IHRoaXMuZGljZXMudG90YWwgKyB0aGlzLmZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGlmIChtb2RpZmllZCA8IDEpIHJldHVybiAxXG4gICAgICBpZiAobW9kaWZpZWQgPiAxMDApIHJldHVybiAxMDBcbiAgICAgIHJldHVybiBtb2RpZmllZFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kaWNlcy50b3RhbFxuICB9XG5cbiAgc2V0IG1vZGlmaWVkUmVzdWx0ICh4KSB7XG4gICAgdGhpcy5fbW9kaWZpZWRSZXN1bHQgPSB4XG4gIH1cblxuICBnZXQgZmxhdERpY2VNb2RpZmllclN0cmluZyAoKSB7XG4gICAgaWYgKCF0aGlzLmZsYXREaWNlTW9kaWZpZXIpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuZmxhdERpY2VNb2RpZmllciA+IDApIHJldHVybiBgKyR7dGhpcy5mbGF0RGljZU1vZGlmaWVyfWBcbiAgICByZXR1cm4gdGhpcy5mbGF0RGljZU1vZGlmaWVyLnRvU3RyaW5nKClcbiAgfVxuXG4gIGdldCBpc0Z1bWJsZSAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLm1vZGlmaWVkUmVzdWx0ID49IHRoaXMuZnVtYmxlVGhyZXNob2xkXG4gIH1cblxuICBnZXQgaXNDcml0aWNhbCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxXG4gIH1cblxuICBnZXQgaXNFeHRyZW1lU3VjY2VzcyAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWVcbiAgfVxuXG4gIGdldCBwYXNzZWQgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5sdWNrU3BlbnQpIHJldHVybiB0aGlzLmRpZmZpY3VsdHkgPD0gdGhpcy5zdWNjZXNzTGV2ZWxcbiAgICByZXR1cm4gdGhpcy5zdWNjZXNUaHJlc2hvbGQgPj0gdGhpcy5tb2RpZmllZFJlc3VsdCB8fCB0aGlzLmlzQ3JpdGljYWxcbiAgfVxuXG4gIGdldCBmYWlsZWQgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gIXRoaXMucGFzc2VkXG4gIH1cblxuICBnZXQgaXNTaW1wbGVSb2xsICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMucmF3VmFsdWUgPT09ICd1bmRlZmluZWQnXG4gIH1cblxuICBnZXQgaGFzQm9udXMgKCkge1xuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaGFzUGVuYWx0eSAoKSB7XG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyICYmIHRoaXMuZGljZU1vZGlmaWVyIDwgMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNNb2RpZmllciAoKSB7XG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyICYmIHRoaXMuZGljZU1vZGlmaWVyICE9PSAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGRpY2VNb2RpZmllciAoKSB7XG4gICAgaWYgKHRoaXMuX2RpY2VNb2RpZmllcikgcmV0dXJuIHRoaXMuX2RpY2VNb2RpZmllclxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzZXQgZGljZU1vZGlmaWVyICh4KSB7XG4gICAgdGhpcy5fZGljZU1vZGlmaWVyID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLnNob3J0TmFtZVxuICAgICAgaWYgKHRoaXMuaXRlbSkgcmV0dXJuIHRoaXMuaXRlbS5uYW1lXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHRoaXMuY2hhcmFjdGVyaXN0aWMpPy5sYWJlbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ2xjaycpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JylcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzaG9ydE5hbWUgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy5za2lsbCkgcmV0dXJuIHRoaXMuc2tpbGwuc2hvcnROYW1lXG4gICAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLm5hbWVcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXModGhpcy5jaGFyYWN0ZXJpc3RpYyk/LnNob3J0XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnbGNrJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnc2FuJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGZ1bGxOYW1lICgpIHtcbiAgICBjb25zdCBkaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMuX2RpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICA/IGZhbHNlXG4gICAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcodGhpcy5fZGlmZmljdWx0eSlcbiAgICBjb25zdCBtb2RpZmllciA9XG4gICAgICB0aGlzLl9kaWNlTW9kaWZpZXIgPiAwXG4gICAgICAgID8gYCske3RoaXMuX2RpY2VNb2RpZmllcn1gXG4gICAgICAgIDogdGhpcy5fZGljZU1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgIGBDb0M3LkxpbmtDaGVjayR7IWRpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30ke1xuICAgICAgICAhdGhpcy5fZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICB9YCxcbiAgICAgIHsgZGlmZmljdWx0eSwgbW9kaWZpZXIsIG5hbWU6IHRoaXMubmFtZSB9XG4gICAgKVxuICB9XG5cbiAgZ2V0IHJvbGxlZCAoKSB7XG4gICAgaWYgKHRoaXMuZGljZSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBjaGVjayBmcm9tIGFuIEhUTUxFbGVtZW50IG9yIGEgY2hhdCBjYXJkLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICBUaGUgSFRNTEVsZW1lbnQgdGhhdCBpcyBhIHJvbGwtcmVzdWx0IG9yIGEgY2hhdCBjYXJkIGNvbnRhaW5pbmcgYSBzaW5nbGUgcm9sbC1yZXN1bHQuXG4gICAqIEByZXR1cm4ge0NvQzdDaGVja30gICAgICBBIENvQzdDaGVjay5cbiAgICovXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHJvbGxSZXN1bHQgPSBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1yZXN1bHQnKVxuICAgICAgPyBjYXJkXG4gICAgICA6IGNhcmQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIENvQzdSb2xsLmdldEZyb21FbGVtZW50KHJvbGxSZXN1bHQsIGNoZWNrKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjaGVjay5tZXNzYWdlSWQgPSBtZXNzYWdlID8gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG51bGxcbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwdXNoIChjYXJkLCBwdWJsaXNoID0gdHJ1ZSkge1xuICAgIGNvbnN0IG9sZENoZWNrID0gQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpIC8vIFRPRE86IFJlZmFjdG9yaW5nXG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICA/IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3Qgc2tpbGxJZCA9IGNhcmQuZGF0YXNldC5za2lsbElkXG4gICAgY29uc3QgY2hhcmFjID0gY2FyZC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgY29uc3QgaXRlbUlkID0gY2FyZC5kYXRhc2V0Lml0ZW1JZFxuICAgIGNvbnN0IGRpY2VNb2QgPSBjYXJkLmRhdGFzZXQuZGljZU1vZFxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBjYXJkLmRhdGFzZXQuZGlmZmljdWx0eVxuXG4gICAgbGV0IHB1c2hlZFJvbGxcbiAgICBpZiAoc2tpbGxJZCkge1xuICAgICAgcHVzaGVkUm9sbCA9IG5ldyBDb0M3Q2hlY2soYWN0b3JJZCwgc2tpbGxJZCwgaXRlbUlkLCBkaWNlTW9kLCBkaWZmaWN1bHR5KVxuICAgIH0gZWxzZSBpZiAoY2hhcmFjKSB7XG4gICAgICBwdXNoZWRSb2xsID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBwdXNoZWRSb2xsLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICAgIHB1c2hlZFJvbGwuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICAgIHB1c2hlZFJvbGwuYWN0b3IgPSBhY3RvcklkXG4gICAgICBwdXNoZWRSb2xsLmNoYXJhY3RlcmlzdGljID0gY2hhcmFjXG4gICAgfSBlbHNlIHJldHVyblxuICAgIGlmIChvbGRDaGVjay51dWlkKSB7XG4gICAgICBwdXNoZWRSb2xsLmNvbnRleHQgPSBvbGRDaGVjay5jb250ZXh0XG4gICAgICBwdXNoZWRSb2xsLnV1aWQgPSBvbGRDaGVjay51dWlkXG4gICAgfVxuICAgIGlmIChvbGRDaGVjay5wYXJlbnQpIHB1c2hlZFJvbGwucGFyZW50ID0gb2xkQ2hlY2sucGFyZW50XG4gICAgcHVzaGVkUm9sbC5wdXNoaW5nID0gdHJ1ZVxuICAgIGF3YWl0IHB1c2hlZFJvbGwucm9sbCgpXG4gICAgaWYgKHB1Ymxpc2gpIHB1c2hlZFJvbGwudG9NZXNzYWdlKHRydWUsIGNhcmQpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIHNldCBhY3RvciAoeCkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSB4XG4gICAgaWYgKHggPT0gbnVsbCkge1xuICAgICAgdGhpcy5fYWN0b3IgPSB4XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoeCBpbnN0YW5jZW9mIEFjdG9yKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHRoaXMuX2FjdG9yID0geFxuICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0aGlzLmFjdG9yLm5hbWVcbiAgICAgIGlmICh4LnRva2VuICYmIHgudG9rZW4uc2NlbmUgJiYgeC50b2tlbi5zY2VuZS5pZCkge1xuICAgICAgICB0aGlzLmFjdG9yS2V5ID0gYCR7eC50b2tlbi5zY2VuZS5pZH0uJHt4LnRva2VuLmlkfWBcbiAgICAgIH0gZWxzZSB0aGlzLmFjdG9yS2V5ID0geC5pZCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh4LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHguc3BsaXQoJy4nKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHRoaXMuX2FjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICB0aGlzLl9hY3Rvci5hbGlhcyA9IHRoaXMuX2FjdG9yLm5hbWUgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm5cbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgdGhpcy5fYWN0b3IgPSB0b2tlbi5hY3RvclxuICAgICAgICB0aGlzLl9hY3Rvci5hbGlhcyA9IHRva2VuLm5hbWVcbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuX2FjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHgpXG4gICAgdGhpcy5hY3Rvci5hbGlhcyA9IHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHN1Y2Nlc3NMZXZlbEljb25zICgpIHtcbiAgICBpZiAodGhpcy51bmtub3duRGlmZmljdWx0eSkgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwgJiYgdGhpcy5fcmF3VmFsdWUgIT09IDApIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuc3VjY2Vzc0xldmVsID49IHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgY29uc3QgaWNvbnMgPSBbXVxuICAgICAgZm9yIChcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgaW5kZXggPCB0aGlzLnN1Y2Nlc3NMZXZlbCAtIHRoaXMuZGlmZmljdWx0eSArIDE7XG4gICAgICAgIGluZGV4KytcbiAgICAgICkge1xuICAgICAgICBpY29ucy5wdXNoKHRoaXMuaXNDcml0aWNhbCA/ICdtZWRhbCcgOiAnc3RhcicpXG4gICAgICB9XG4gICAgICBjb25zdCBzdWNjZXNzSGludCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3VjY2VzTGV2ZWxIaW50Jywge1xuICAgICAgICB2YWx1ZTogdGhpcy5zdWNjZXNzTGV2ZWwgLSB0aGlzLmRpZmZpY3VsdHkgKyAxXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgY3NzQ2xhc3M6IHRoaXMuaXNDcml0aWNhbCA/ICdjcml0aWNhbCcgOiAnc3VjY2VzcycsXG4gICAgICAgIGhpbnQ6IHN1Y2Nlc3NIaW50LFxuICAgICAgICBpY29uc1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpY29ucyA9IFtdXG4gICAgICBjb25zdCBzdWNjZXNzTGV2ZWwgPSB0aGlzLmlzRnVtYmxlID8gLTEgOiB0aGlzLnN1Y2Nlc3NMZXZlbFxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuZGlmZmljdWx0eSAtIHN1Y2Nlc3NMZXZlbDsgaW5kZXgrKykge1xuICAgICAgICBpY29ucy5wdXNoKHRoaXMuaXNGdW1ibGUgPyAnc2t1bGwnIDogJ3NwaWRlcicpXG4gICAgICB9XG4gICAgICBjb25zdCBmYWlsdXJlSGludCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZUxldmVsSGludCcsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMuZGlmZmljdWx0eSAtIHN1Y2Nlc3NMZXZlbFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBjc3NDbGFzczogdGhpcy5pc0Z1bWJsZSA/ICdmdW1ibGUnIDogJ2ZhaWx1cmUnLFxuICAgICAgICBoaW50OiBmYWlsdXJlSGludCxcbiAgICAgICAgaWNvbnNcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgdW5rbm93bkRpZmZpY3VsdHkgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5Q3JpdGljYWwgfHxcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5RXh0cmVtZSB8fFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlIYXJkIHx8XG4gICAgICB0aGlzLmdtRGlmZmljdWx0eVJlZ3VsYXJcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSB0aGlzLmRpZmZpY3VsdHlcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgc2V0IHNraWxsICh4KSB7XG4gICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9nZXRJdGVtRnJvbUlkKHgpXG4gICAgdGhpcy5za2lsbElkID0geFxuICB9XG5cbiAgc2V0IGl0ZW0gKHgpIHtcbiAgICB0aGlzLl9pdGVtID0gdGhpcy5fZ2V0SXRlbUZyb21JZCh4KVxuICAgIGlmICh0aGlzLl9pdGVtPy50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgdGhpcy5pdGVtSWQgPSB4XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2l0ZW0gPSB1bmRlZmluZWRcbiAgICAgIHRoaXMuaXRlbUlkID0gdW5kZWZpbmVkXG4gICAgfVxuICB9XG5cbiAgX2dldEl0ZW1Gcm9tSWQgKHgpIHtcbiAgICBpZiAoeCA9PSBudWxsKSByZXR1cm4gbnVsbFxuICAgIGlmICh4IGluc3RhbmNlb2YgSXRlbSkgcmV0dXJuIHhcbiAgICBpZiAodGhpcy5fYWN0b3IpIHJldHVybiB0aGlzLl9hY3Rvci5pdGVtcy5nZXQoeClcbiAgICByZXR1cm4gZ2FtZS5pdGVtcy5nZXQoeClcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl9hY3RvciB8fCAhdGhpcy5fYWN0b3I/LmlkKSB7XG4gICAgICBpZiAodGhpcy5hY3RvcktleSkgdGhpcy5fYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICh0aGlzLmFjdG9ySWQpIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcklkKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICghdGhpcy5fYWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpc0R1bW15OiB0cnVlLFxuICAgICAgICAgIG5hbWU6IHRoaXMuYWN0b3JOYW1lID8gdGhpcy5hY3Rvck5hbWUgOiB1bmRlZmluZWQsXG4gICAgICAgICAgaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpbWc6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZycsXG4gICAgICAgICAgcG9ydHJhaXQ6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5fYWN0b3IuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gbmV3IENvQ0FjdG9yKHRoaXMuX2FjdG9yKVxuICAgICAgdGhpcy5fYWN0b3IgPSBhY3RvclxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgaWYgKCF0aGlzLl9za2lsbCAmJiB0aGlzLnNraWxsSWQpIHtcbiAgICAgIHRoaXMuX3NraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc2tpbGxJZClcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9za2lsbCAmJiB0aGlzLml0ZW0pIHtcbiAgICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnNraWxsKSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnNraWxsLm1haW4uaWQgJiYgIXRoaXMud2VhcG9uQWx0U2tpbGwpIHtcbiAgICAgICAgICB0aGlzLl9za2lsbCA9IHRoaXMuX2FjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW0uc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgdGhpcy5pdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkICYmXG4gICAgICAgICAgdGhpcy53ZWFwb25BbHRTa2lsbFxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLl9za2lsbCA9IHRoaXMuX2FjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIHRoaXMuaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc2tpbGxcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuX2l0ZW0gJiYgdGhpcy5pdGVtSWQgJiYgdGhpcy5hY3Rvcikge1xuICAgICAgdGhpcy5faXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXRlbVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlSZXN1bHRUeXBlICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheVJlc3VsdFR5cGUnKVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcpXG4gIH1cblxuICBnZXQgZGlzcGxheUJvdGhTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiB0aGlzLmRpc3BsYXlSZXN1bHRUeXBlICYmIHRoaXMuZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsXG4gIH1cblxuICBnZXQgZG9udERpc3BsYXlTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiAhdGhpcy5kaXNwbGF5UmVzdWx0VHlwZSAmJiAhdGhpcy5kaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWxcbiAgfVxuXG4gIGdldCBpbWFnZSAoKSB7XG4gICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLmltZ1xuICAgIGlmICh0aGlzLml0ZW0pIHJldHVybiB0aGlzLml0ZW0uaW1nXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGxpbmsgKCkge1xuICAgIHJldHVybiB0aGlzLmdldExpbmtFbGVtZW50KCkub3V0ZXJIVE1MXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldExpbmtFbGVtZW50IChjbGFzc2VzID0gbnVsbCkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBjbHM6IFsnY29jNy1saW5rJywgJ2NvYzctcm9sbCddLmNvbmNhdChjbGFzc2VzKSxcbiAgICAgIGRhdGFzZXQ6IHsgY2hlY2s6ICdjaGVjaycgfSxcbiAgICAgIGljb246IHRoaXMuaW1hZ2VcbiAgICAgICAgPyBgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgke3RoaXMuaW1hZ2V9KVwiPjwvZGl2PmBcbiAgICAgICAgOiAnPGkgY2xhc3M9XCJmYXMgZmEtZGljZVwiPjwvaT4nLFxuICAgICAgYmxpbmQ6IHRoaXMuaXNCbGluZFxuICAgIH1cblxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eVN0cmluZyh0aGlzLl9kaWZmaWN1bHR5KVxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgIGBDb0M3LkxpbmtDaGVjayR7IXRoaXMuX2RpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30ke1xuICAgICAgICAhdGhpcy5fZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICB9YCxcbiAgICAgIHtcbiAgICAgICAgZGlmZmljdWx0eSxcbiAgICAgICAgbW9kaWZpZXI6IHRoaXMuX2RpY2VNb2RpZmllcixcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lXG4gICAgICB9XG4gICAgKVxuXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGEudGl0bGUgPSB0aXRsZVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgICBhLmlubmVySFRNTCA9IGAke2RhdGEuYmxpbmQgPyAnPGkgY2xhc3M9XCJmYXMgZmEtZXllLXNsYXNoXCI+PC9pPicgOiAnJ30ke1xuICAgICAgZGF0YS5pY29uXG4gICAgfSR7dGhpcy5uYW1lfWBcblxuICAgIHJldHVybiBhXG4gIH1cblxuICBhc3luYyByb2xsIChkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKG9wdGlvbnMpXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgY2hlY2sgd2l0aCB0aGUgcHJvdmlkZWQgZGF0YVxuICAgKiBQcm9jZXNzIHJvbGwgZGF0YSB0byBhIGZvcm1hdCB0aGF0IGNhbiBiZSBmZWQgdG8gY3JlYXRlKClcbiAgICogQHBhcmFtIHsqfSByb2xsRGF0YSBBIHJvbGwgZGF0YSBzdHJ1Y3R1cmUgYXMgcmV0dXJuZWQgYnkgYWN0b3IuZmluZFxuICAgKiBAcmV0dXJucyBBIGNoZWNrIHdpdGggdGhlIHJvbGwgZGF0YSBwcm92aWRlZFxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUZyb21BY3RvclJvbGxEYXRhIChyb2xsRGF0YSkge1xuICAgIGNvbnN0IHJvbGwgPSB7fVxuICAgIC8vIGNoZWNrIE1vZGlmaWVyXG4gICAgaWYgKHJvbGxEYXRhLmRpZmZpY3VsdHkpIHJvbGwuZGlmZmljdWx0eSA9IHJvbGxEYXRhLmRpZmZpY3VsdHlcbiAgICBpZiAocm9sbERhdGEuZGljZU1vZGlmaWVyKSByb2xsLmRpY2VNb2RpZmllciA9IHJvbGxEYXRhLmRpY2VNb2RpZmllclxuICAgIGlmIChyb2xsRGF0YS5kZW55UHVzaCA9PT0gdHJ1ZSkgcm9sbC5kZW55UHVzaCA9IHRydWVcbiAgICBpZiAocm9sbERhdGEuZmxhdERpY2VNb2RpZmllcikge1xuICAgICAgcm9sbC5mbGF0RGljZU1vZGlmaWVyID0gcm9sbERhdGEuZmxhdERpY2VNb2RpZmllclxuICAgIH1cbiAgICBpZiAocm9sbERhdGEuZmxhdFRocmVzaG9sZE1vZGlmaWVyKSB7XG4gICAgICByb2xsLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IHJvbGxEYXRhLmZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgIH1cbiAgICAvLyBBY3RvclxuICAgIGlmIChyb2xsRGF0YS5hY3Rvcj8uYWN0b3JLZXkpIHJvbGwuYWN0b3JLZXkgPSByb2xsRGF0YS5hY3Rvci5hY3RvcktleVxuICAgIGVsc2UgaWYgKHJvbGxEYXRhLmFjdG9yPy5uYW1lKSByb2xsLmFjdG9yTmFtZSA9IHJvbGxEYXRhLmFjdG9yLm5hbWVcbiAgICAvLyBDaGVjayB0eXBlXG4gICAgc3dpdGNoIChyb2xsRGF0YS50eXBlKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay50eXBlLmNoYXJhY3RlcmlzdGljOlxuICAgICAgICByb2xsLmNoYXJhY3RlcmlzdGljID0gcm9sbERhdGEudmFsdWU/LmtleVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5hdHRyaWJ1dGU6XG4gICAgICAgIHJvbGwuYXR0cmlidXRlID0gcm9sbERhdGEudmFsdWU/LmtleVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5pdGVtOlxuICAgICAgICByb2xsLmFjdG9yS2V5ID0gcm9sbERhdGEudmFsdWUuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgaWYgKHJvbGxEYXRhLnZhbHVlPy50eXBlID09PSAnc2tpbGwnKSByb2xsLnNraWxsID0gcm9sbERhdGEudmFsdWUuaWRcbiAgICAgICAgZWxzZSByb2xsLml0ZW0gPSByb2xsRGF0YS52YWx1ZS5pZFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5za2lsbDpcbiAgICAgICAgcm9sbC5hY3RvcktleSA9IHJvbGxEYXRhLnZhbHVlLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIHJvbGwuc2tpbGwgPSByb2xsRGF0YS52YWx1ZS5pZFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS52YWx1ZTpcbiAgICAgICAgcm9sbC5kaXNwbGF5TmFtZSA9IHJvbGxEYXRhLnZhbHVlLm5hbWVcbiAgICAgICAgcm9sbC5yYXdWYWx1ZSA9IHJvbGxEYXRhLnZhbHVlLnRocmVzaG9sZFxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5jcmVhdGUocm9sbClcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGUgKHtcbiAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyLFxuICAgIGRpY2VNb2RpZmllciA9IG51bGwsXG4gICAgYWN0b3JLZXkgPSBudWxsLFxuICAgIGNoYXJhY3RlcmlzdGljID0gbnVsbCxcbiAgICBhdHRyaWJ1dGUgPSBudWxsLFxuICAgIHJhd1ZhbHVlID0gMCxcbiAgICBpdGVtID0gbnVsbCxcbiAgICBza2lsbCA9IG51bGwsXG4gICAgZmxhdERpY2VNb2RpZmllciA9IDAsXG4gICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gMCxcbiAgICBkaXNwbGF5TmFtZSA9IG51bGwsXG4gICAgYWN0b3JOYW1lID0gbnVsbCxcbiAgICBkZW55UHVzaCA9IHVuZGVmaW5lZFxuICB9ID0ge30pIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgaWYgKGRlbnlQdXNoID09PSB0cnVlKSBjaGVjay5kZW55UHVzaCA9IHRydWVcbiAgICBpZiAoZGljZU1vZGlmaWVyKSBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXJcbiAgICBpZiAoZmxhdERpY2VNb2RpZmllcikgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICBpZiAoZmxhdFRocmVzaG9sZE1vZGlmaWVyKSB7XG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICB9XG4gICAgaWYgKGRpc3BsYXlOYW1lKSBjaGVjay5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lXG4gICAgaWYgKGFjdG9yS2V5KSBjaGVjay5hY3RvciA9IGFjdG9yS2V5XG4gICAgaWYgKGFjdG9yTmFtZSkgY2hlY2suYWN0b3JOYW1lID0gYWN0b3JOYW1lXG4gICAgaWYgKCFpc05hTihOdW1iZXIocmF3VmFsdWUpKSkgY2hlY2sucmF3VmFsdWUgPSBOdW1iZXIocmF3VmFsdWUpXG4gICAgaWYgKGNoZWNrLmFjdG9yICYmICFjaGVjay5hY3Rvci5pc0R1bW15KSB7XG4gICAgICAvLyBUT0RPIDogQWRkIGNoZWNrIGZvciB2YWxpZGl0eSBvZiBjaGFyYWN0ZXJpc3RpYywgYXR0cmlidXRlLCBza2lsbElkXG4gICAgICBpZiAoc2tpbGwpIGNoZWNrLnNraWxsID0gc2tpbGxcbiAgICAgIC8vIFRPRE8gOiB0cnkgcmV0cmlldmUgc2tpbGwgYnkgbmFtZVxuICAgICAgZWxzZSBpZiAoY2hhcmFjdGVyaXN0aWMpIGNoZWNrLmNoYXJhY3RlcmlzdGljID0gY2hhcmFjdGVyaXN0aWNcbiAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZSkgY2hlY2suYXR0cmlidXRlID0gYXR0cmlidXRlXG4gICAgICBlbHNlIGlmIChpdGVtKSBjaGVjay5pdGVtID0gaXRlbVxuICAgIH1cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpYyAoY2hhciwgZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsKSB7XG4gICAgaWYgKGRpY2VNb2QpIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIGlmIChkaWZmaWN1bHR5KSB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXG4gIH1cblxuICBhc3luYyByb2xsQXR0cmlidXRlIChhdHRyaWIsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuYXR0cmlidXRlID0gYXR0cmliXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgYXN5bmMgcm9sbFZhbHVlICh2YWwsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMucmF3VmFsdWUgPSB2YWxcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXG4gIH1cblxuICBnZXQgcm9sbGVkU3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdWNjZXNzTGV2ZWxcbiAgfVxuXG4gIGFzeW5jIF9wZXJmb3JtIChvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmRpY2UgPVxuICAgICAgb3B0aW9ucy5yb2xsIHx8XG4gICAgICAoYXdhaXQgQ29DN0RpY2Uucm9sbCh0aGlzLmRpY2VNb2RpZmllciwgdGhpcy5yb2xsTW9kZSwgdGhpcy5pc0JsaW5kKSlcbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50ICYmICFnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBBdWRpb0hlbHBlci5wbGF5KHsgc3JjOiBDT05GSUcuc291bmRzLmRpY2UgfSwgdHJ1ZSlcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5mb3JjZURTTikge1xuICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5kaWNlLnJvbGwpXG4gICAgfVxuXG4gICAgdGhpcy5kaWNlcyA9IHtcbiAgICAgIHRlbnM6IFtdLFxuICAgICAgdW5pdDoge1xuICAgICAgICB2YWx1ZTogdGhpcy5kaWNlLnVuaXQudG90YWxcbiAgICAgIH0sXG4gICAgICB0b3RhbDogdGhpcy5kaWNlLnRvdGFsLFxuICAgICAgdGVuUmVzdWx0OiB0aGlzLmRpY2UudG90YWwgLSB0aGlzLmRpY2UudW5pdC50b3RhbCxcbiAgICAgIGhhc0JvbnVzOiAhIXRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgYm9udXM6IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKSxcbiAgICAgIGJvbnVzVHlwZTpcbiAgICAgICAgdGhpcy5kaWNlTW9kaWZpZXIgPCAwXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllclBlbmFsdHknKVxuICAgICAgICAgIDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJCb251cycpLFxuICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5XG4gICAgfVxuXG4gICAgY29uc3QgbWF4ID0gdGhpcy5kaWNlLnVuaXQudG90YWwgPT09IDAgPyAxMDAgOiA5MFxuICAgIGNvbnN0IG1pbiA9IHRoaXMuZGljZS51bml0LnRvdGFsID09PSAwID8gMTAgOiAwXG4gICAgbGV0IHNlbGVjdGVkID0gdGhpcy5kaWNlLnRvdGFsIC0gdGhpcy5kaWNlLnVuaXQudG90YWxcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kaWNlLnRlbnMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZGllID0ge31cbiAgICAgIGRpZS52YWx1ZSA9IHRoaXMuZGljZS50ZW5zLnJlc3VsdHNbaV1cbiAgICAgIGlmIChkaWUudmFsdWUgPT09IHNlbGVjdGVkKSB7XG4gICAgICAgIHNlbGVjdGVkID0gMTAxXG4gICAgICAgIGRpZS5zZWxlY3RlZCA9IHRydWVcbiAgICAgICAgaWYgKHRoaXMuZGljZXMuaGFzQm9udXMpIHtcbiAgICAgICAgICBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWluID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWF4KSBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWluKSBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWluID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8vIGlmKCBkaWUudmFsdWUgPT0gMTAwKSBkaWUudmFsdWUgPSBcIjAwXCI7XG4gICAgICB0aGlzLmRpY2VzLnRlbnMucHVzaChkaWUpXG4gICAgfVxuICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgfVxuXG4gIGFzeW5jIGNvbXB1dGVDaGVjayAoKSB7XG4gICAgdGhpcy5pc1Vua25vd24gPSB0aGlzLnVua25vd25EaWZmaWN1bHR5XG5cbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlSZWd1bGFyKSB7XG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5SGFyZCkgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5RXh0cmVtZSkge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgfVxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUNyaXRpY2FsKSB7XG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgfVxuXG4gICAgdGhpcy50ZW5Pbmx5T25lRGllID0gdGhpcy5kaWNlcy50ZW5zLmxlbmd0aCA9PT0gMVxuXG4gICAgdGhpcy5pc1ZhbHVlID0gZmFsc2VcbiAgICB0aGlzLmlzQ2hhcmFjdGlyaXN0aWMgPSBmYWxzZVxuICAgIHRoaXMuaXNTa2lsbCA9IGZhbHNlXG4gICAgdGhpcy5pc0l0ZW0gPSBmYWxzZVxuICAgIHRoaXMuaXNBdHRyaWJ1dGUgPSBmYWxzZVxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgdGhpcy5kZW55UHVzaCA9IHRydWVcbiAgICAgIHRoaXMuZGVueUx1Y2sgPSB0cnVlXG4gICAgfSBlbHNlIGlmICh0aGlzLmFjdG9yID09IG51bGwpIHtcbiAgICAgIHRoaXMuaXNWYWx1ZSA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgdGhpcy5pc0NoYXJhY3RpcmlzdGljID0gdHJ1ZVxuICAgICAgICB0aGlzLnJhd1ZhbHVlID1cbiAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10udmFsdWVcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgICAgdGhpcy5pc1NraWxsID0gdHJ1ZVxuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5za2lsbC52YWx1ZVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgdGhpcy5pc0F0dHJpYnV0ZSA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmx1Y2tTcGVudCAmJiAhdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXJcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMuaGFyZFRocmVzaG9sZCkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPD0gdGhpcy5leHRyZW1lVGhyZXNob2xkKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZnVtYmxlVGhyZXNob2xkIDw9IHRoaXMubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZVxuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZTpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GdW1ibGUnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKHRoaXMudW5rbm93bkRpZmZpY3VsdHkpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc1JlcXVpcmVkID0gJydcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgdGhpcy5zdWNjZXNzUmVxdWlyZWQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlN1Y2Nlc3NSZXF1aXJlZCcsIHtcbiAgICAgICAgc3VjY2Vzc1JlcXVpcmVkOiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPT09IDEpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgIH1cbiAgICBpZiAoIXRoaXMubHVja1NwZW50ICYmICF0aGlzLmlzVW5rbm93biAmJiAhdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gdGhpcy5mYWlsZWRcbiAgICAgIHRoaXMuaXNTdWNjZXNzID0gdGhpcy5wYXNzZWRcbiAgICB9XG5cbiAgICB0aGlzLmhhc01hbGZ1bmN0aW9uID0gZmFsc2VcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZVxuXG4gICAgaWYgKHRoaXMuaXRlbSkge1xuICAgICAgdGhpcy5pc0l0ZW0gPSB0cnVlXG4gICAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5tYWxmdW5jdGlvbikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgTnVtYmVyKHRoaXMubW9kaWZpZWRSZXN1bHQpID49IE51bWJlcih0aGlzLml0ZW0uc3lzdGVtLm1hbGZ1bmN0aW9uKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmhhc01hbGZ1bmN0aW9uID0gdHJ1ZVxuICAgICAgICAgIHRoaXMubWFsZnVuY3Rpb25UeHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbGZ1bmN0aW9uJywge1xuICAgICAgICAgICAgaXRlbU5hbWU6IHRoaXMuaXRlbS5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlSXRlbUZsYWcoQ29DN0l0ZW0uZmxhZ3MubWFsZnVuY3Rpb24pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuY2FuQmVQdXNoZWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmNhbkJlUHVzaGVkID0gdGhpcy5za2lsbCA/IHRoaXMuc2tpbGwuY2FuQmVQdXNoZWQoKSA6IGZhbHNlXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYyAhPSBudWxsKSB0aGlzLmNhbkJlUHVzaGVkID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuaXNGdW1ibGUpIHRoaXMuY2FuQmVQdXNoZWQgPSBmYWxzZVxuICAgICAgaWYgKHRoaXMuZGVueVB1c2gpIHRoaXMuY2FuQmVQdXNoZWQgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICghdGhpcy5kZW55THVjayAmJiB0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAoXG4gICAgICAgICF0aGlzLmx1Y2tTcGVudCAmJlxuICAgICAgICAhdGhpcy5wYXNzZWQgJiZcbiAgICAgICAgIXRoaXMuaXNGdW1ibGUgJiZcbiAgICAgICAgdGhpcy5kaWZmaWN1bHR5ICE9PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsICYmXG4gICAgICAgICF0aGlzLnVua25vd25EaWZmaWN1bHR5XG4gICAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuc2tpbGwgfHwgdGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICAgIGNvbnN0IGx1Y2tOZWVkZWQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5zdWNjZXNUaHJlc2hvbGRcbiAgICAgICAgICBpZiAodGhpcy5hY3Rvci5sdWNrID4gbHVja05lZWRlZCkge1xuICAgICAgICAgICAgdGhpcy5oYXNFbm91Z2hMdWNrID0gdHJ1ZVxuICAgICAgICAgICAgdGhpcy5sdWNrTmVlZGVkID0gbHVja05lZWRlZFxuICAgICAgICAgICAgdGhpcy5sdWNrTmVlZGVkVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVuZEx1Y2snLCB7XG4gICAgICAgICAgICAgIGx1Y2tOZWVkZWRWYWx1ZTogbHVja05lZWRlZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmx1Y2tTcGVudCkge1xuICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2VzcyA9IFtdXG5cbiAgICAgICAgLy8gQ2FuJ3Qgc3BlbmQgbHVjayBvbiBwdXNoZWQgcm9sbHMuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhdGhpcy5wdXNoaW5nICYmXG4gICAgICAgICAgdGhpcy5hdHRyaWJ1dGUgIT09ICdsY2snICYmXG4gICAgICAgICAgdGhpcy5hdHRyaWJ1dGUgIT09ICdzYW4nXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMudW5rbm93bkRpZmZpY3VsdHkgJiZcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IHt9XG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5J1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5yZWd1bGFyVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrXG4gICAgICAgICAgICBpZiAobmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjaykge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5leHRMZXZlbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPD0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyICYmXG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHlOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmx1Y2tUb1NwZW5kID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMuaGFyZFRocmVzaG9sZCAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5oYXNFbm91Z2hMdWNrID0gbmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVja1xuICAgICAgICAgICAgaWYgKG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2spIHtcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5IDw9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCAmJlxuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsID0ge31cbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgICAgICAgICAgbmV4dExldmVsLmx1Y2tUb1NwZW5kID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMuZXh0cmVtZVRocmVzaG9sZCAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5oYXNFbm91Z2hMdWNrID0gbmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjayAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV4dExldmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmNhbkluY3JlYXNlU3VjY2VzcyA9IHRoaXMuaW5jcmVhc2VTdWNjZXNzLmxlbmd0aCA+IDBcbiAgICAgIGlmICh0aGlzLmlzRnVtYmxlKSB0aGlzLmNhbkluY3JlYXNlU3VjY2VzcyA9IGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy5jYW5Bd2FyZEV4cGVyaWVuY2UgPVxuICAgICAgdGhpcy5za2lsbCAmJiAhdGhpcy5za2lsbC5zeXN0ZW0ucHJvcGVydGllcy5ub3hwZ2FpblxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5wYXNzZWQgJiZcbiAgICAgIHRoaXMuZGljZU1vZGlmaWVyIDw9IDAgJiZcbiAgICAgIHRoaXMuc2tpbGwgJiZcbiAgICAgICF0aGlzLnNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLm5veHBnYWluICYmXG4gICAgICAhdGhpcy5sdWNrU3BlbnQgJiZcbiAgICAgICF0aGlzLmZvcmNlZCAmJlxuICAgICAgIXRoaXMuaXNCbGluZCAmJlxuICAgICAgIXRoaXMuaXNVbmtub3duXG4gICAgKSB7XG4gICAgICB0aGlzLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgY29uc3QgcGFyZW50ID0gYXdhaXQgZnJvbVV1aWQodGhpcy5wYXJlbnQpXG4gICAgICBpZiAocGFyZW50ICYmICd1cGRhdGVSb2xsJyBpbiBwYXJlbnQpIHtcbiAgICAgICAgYXdhaXQgcGFyZW50LnVwZGF0ZVJvbGwodGhpcy5KU09OUm9sbFN0cmluZylcbiAgICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgUm9sbCAke3RoaXMudXVpZH0gZGVwZW5kcyBvZiAke3RoaXMucGFyZW50fWApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2hvd0RpY2VSb2xsICgpIHtcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgY29uc3QgZGljZVJlc3VsdHMgPSBbXVxuICAgICAgZm9yIChjb25zdCBkaWVSZXN1bHQgb2YgdGhpcy5kaWNlcy50ZW5zKSB7XG4gICAgICAgIGRpY2VSZXN1bHRzLnB1c2goZGllUmVzdWx0LnZhbHVlID09PSAxMDAgPyAwIDogZGllUmVzdWx0LnZhbHVlIC8gMTApXG4gICAgICB9XG4gICAgICBkaWNlUmVzdWx0cy5wdXNoKHRoaXMuZGljZXMudW5pdC52YWx1ZSlcblxuICAgICAgY29uc3QgZGljZURhdGEgPSB7XG4gICAgICAgIGZvcm11bGE6IGAke3RoaXMuZGljZXMudGVucy5sZW5ndGh9ZDEwMCsxZDEwYCxcbiAgICAgICAgcmVzdWx0czogZGljZVJlc3VsdHMsXG4gICAgICAgIHdoaXNwZXI6IG51bGwsXG4gICAgICAgIGJsaW5kOiBmYWxzZVxuICAgICAgfVxuICAgICAgZ2FtZS5kaWNlM2Quc2hvdyhkaWNlRGF0YSlcbiAgICB9XG4gIH1cblxuICBnZXQgY3NzQ2xhc3MgKCkge1xuICAgIGxldCBjc3NDbGFzcyA9ICcnXG4gICAgaWYgKHRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcyA9ICdzdWNjZXNzJ1xuICAgIGlmICh0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MgPSAnZmFpbHVyZSdcbiAgICBpZiAodGhpcy5pc0NyaXRpY2FsICYmICF0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MgPSAnc3VjY2VzcyBjcml0aWNhbCdcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSAmJiAhdGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzID0gJ2ZhaWx1cmUgZnVtYmxlJ1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcyArPSAnIHJlZ3VsYXItc3VjY2VzcydcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzICs9ICcgaGFyZC1zdWNjZXNzJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MgKz0gJyBleHRyZW1lLXN1Y2Nlc3MnXG4gICAgfVxuXG4gICAgcmV0dXJuIGNzc0NsYXNzXG4gIH1cblxuICBnZXQgY3NzQ2xhc3NMaXN0ICgpIHtcbiAgICBjb25zdCBjc3NDbGFzcyA9IFtdXG4gICAgaWYgKHRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcy5wdXNoKCdzdWNjZXNzJylcbiAgICBpZiAodGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzLnB1c2goJ2ZhaWx1cmUnKVxuICAgIGlmICh0aGlzLmlzQ3JpdGljYWwgJiYgIXRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcy5wdXNoKCdzdWNjZXNzJywgJ2NyaXRpY2FsJylcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSAmJiAhdGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzLnB1c2goJ2ZhaWx1cmUnLCAnZnVtYmxlJylcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MucHVzaCgncmVndWxhci1zdWNjZXNzJylcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2goJ2hhcmQtc3VjY2VzcycpXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcy5wdXNoKCdleHRyZW1lLXN1Y2Nlc3MnKVxuICAgIH1cblxuICAgIHJldHVybiBjc3NDbGFzc1xuICB9XG5cbiAgZ2V0IHBsYXllckNzc0NsYXNzICgpIHtcbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MgfHwgdGhpcy5mb3JjZWRTdWNjZXNzKSByZXR1cm4gJ3N1Y2Nlc3MnXG4gICAgaWYgKHRoaXMuaXNGYWlsdXJlIHx8IHRoaXMuZm9yY2VkRmFpbHVyZSkgcmV0dXJuICdmYWlsdXJlJ1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyB1cGdyYWRlQ2hlY2sgKHVwZ3JhZGVpbmRleCwgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGluY3JlYXNlZFN1Y2Nlc3MgPSB0aGlzLmluY3JlYXNlU3VjY2Vzc1t1cGdyYWRlaW5kZXhdXG4gICAgY29uc3QgbHVja0Ftb3VudCA9XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tBbW91bnQpIHx8XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tUb1NwZW5kKSAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90RW5vdWdoTHVjaycsIHtcbiAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy50b3RhbEx1Y2tTcGVudCA9ICFwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgICAgPyAwXG4gICAgICA6IHBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgdGhpcy50b3RhbEx1Y2tTcGVudCArPSBwYXJzZUludChsdWNrQW1vdW50KVxuICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLm5ld1N1Y2Nlc3NMZXZlbCkgfHxcbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MuZGlmZmljdWx0eSkgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBpZiAodGhpcy5kaWZmaWN1bHR5IDw9IG5ld1N1Y2Nlc3NMZXZlbCkge1xuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgICB0aGlzLmlzRmFpbHVyZSA9IGZhbHNlXG4gICAgfVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB1cGdyYWRlaW5kZXggKyAxOyBpbmRleCsrKSB7XG4gICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5zaGlmdCgpXG4gICAgfVxuICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmluY3JlYXNlU3VjY2Vzcykge1xuICAgICAgcy5sdWNrVG9TcGVuZCA9IHMubHVja1RvU3BlbmQgLSBsdWNrQW1vdW50XG4gICAgfVxuICAgIHRoaXMubHVja1NwZW50ID0gdHJ1ZVxuICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgICBpZiAodXBkYXRlKSByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICByZW1vdmVVcGdyYWRlcyAoKSB7XG4gICAgdGhpcy5jYW5JbmNyZWFzZVN1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzID0gW11cbiAgICB0aGlzLmx1Y2tOZWVkZWQgPSAwXG4gICAgdGhpcy5sdWNrTmVlZGVkVHh0ID0gbnVsbFxuICAgIHRoaXMuY2FuQmVQdXNoZWQgPSBmYWxzZVxuICB9XG5cbiAgZm9yY2VQYXNzIChsdWNrQW1vdW50ID0gbnVsbCwgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGlmIChsdWNrQW1vdW50KSB7XG4gICAgICB0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KVxuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSB0aGlzLmRpZmZpY3VsdHlcbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmluY3JlYXNlU3VjY2Vzcykge1xuICAgICAgICBzLmx1Y2tUb1NwZW5kID0gcy5sdWNrVG9TcGVuZCAtIGx1Y2tBbW91bnRcbiAgICAgIH1cbiAgICAgIHRoaXMubHVja1NwZW50ID0gdHJ1ZVxuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgICB0aGlzLmlzRmFpbHVyZSA9IGZhbHNlXG4gICAgICB0aGlzLnRvdGFsTHVja1NwZW50ID0gIXBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgICAgID8gMFxuICAgICAgICA6IHBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgICB0aGlzLnRvdGFsTHVja1NwZW50ICs9IHBhcnNlSW50KGx1Y2tBbW91bnQpXG4gICAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gICAgICBpZiAodXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mb3JjZWQgPSB0cnVlXG4gICAgICB0aGlzLmZvcmNlZFN1Y2Nlc3MgPSB0cnVlXG4gICAgICBpZiAodGhpcy5pc1Vua25vd24pIHtcbiAgICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIsIHVwZGF0ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwodGhpcy5kaWZmaWN1bHR5LCB1cGRhdGUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yY2VGYWlsICh1cGRhdGUgPSB0cnVlKSB7XG4gICAgdGhpcy5mb3JjZWQgPSB0cnVlXG4gICAgdGhpcy5mb3JjZWRGYWlsdXJlID0gdHJ1ZVxuICAgIGlmICh0aGlzLmlzVW5rbm93bikge1xuICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUsIHVwZGF0ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbCh0aGlzLmRpZmZpY3VsdHkgLSAxLCB1cGRhdGUpXG4gICAgfVxuICB9XG5cbiAgX2ZvcmNlQ2hlY2sgKGhpZ2gsIGxvdywgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCB0b3RhbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChoaWdoIC0gbG93KSkgKyBsb3cgKyAxXG4gICAgY29uc3QgdW5pdFRvdGFsID0gdG90YWwgJSAxMFxuICAgIGxldCB0ZW5Ub3RhbCA9IE1hdGguZmxvb3IodG90YWwgLyAxMClcbiAgICBjb25zdCB0ZW5zID0gW11cblxuICAgIGxldCBoYXNFbm91Z2ggPSBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllcikgPT09IHRlbnMubGVuZ3RoXG4gICAgd2hpbGUgKCFoYXNFbm91Z2gpIHtcbiAgICAgIGxldCB0ZW4gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgIGxldCByb2xsID0gdGVuICogMTAgKyB1bml0VG90YWxcbiAgICAgIGlmIChyb2xsID09PSAwKSB7XG4gICAgICAgIHJvbGwgPSAxMDBcbiAgICAgICAgdGVuID0gMTAwXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oYXNQZW5hbHR5ICYmIHJvbGwgPD0gaGlnaCkge1xuICAgICAgICB0ZW5zLnB1c2godGVuKVxuICAgICAgICBpZiAocm9sbCA+IHRvdGFsKSB0b3RhbCA9IHJvbGxcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0JvbnVzICYmIHJvbGwgPiBsb3cpIHtcbiAgICAgICAgdGVucy5wdXNoKHRlbilcbiAgICAgICAgaWYgKHJvbGwgPCB0b3RhbCkgdG90YWwgPSByb2xsXG4gICAgICB9XG4gICAgICBoYXNFbm91Z2ggPSB0ZW5zLmxlbmd0aCA9PT0gTWF0aC5hYnModGhpcy5kaWNlTW9kaWZpZXIpXG4gICAgfVxuXG4gICAgLy8gSW5zZXJ0IHJlc3VsdCBhdCByYW5kb20gcG9zaXRpb24uXG4gICAgaWYgKHRlblRvdGFsID09PSAxMCAmJiB1bml0VG90YWwgPT09IDApIHtcbiAgICAgIHRlblRvdGFsID0gMTAwXG4gICAgfVxuICAgIHRlbnMuc3BsaWNlKFxuICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGVucy5sZW5ndGggKyAxKSxcbiAgICAgIDAsXG4gICAgICB0ZW5Ub3RhbCA9PT0gMTAgPyAwIDogdGVuVG90YWxcbiAgICApXG5cbiAgICB0aGlzLmRpY2VzLnRlbnMgPSBbXVxuICAgIHRoaXMuZGljZXMudW5pdC52YWx1ZSA9IHVuaXRUb3RhbFxuICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPSB0b3RhbFxuICAgIHRoaXMuZGljZXMudG90YWwgPSB0b3RhbFxuICAgIHRoaXMuZGljZXMudGVuUmVzdWx0ID0gdG90YWwgLSB1bml0VG90YWxcblxuICAgIGNvbnN0IG1heCA9IHVuaXRUb3RhbCA9PT0gMCA/IDEwMCA6IDkwXG4gICAgY29uc3QgbWluID0gdW5pdFRvdGFsID09PSAwID8gMTAgOiAwXG4gICAgbGV0IHNlbGVjdGVkID0gdG90YWwgLSB1bml0VG90YWxcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVucy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZGllID0ge31cbiAgICAgIGRpZS52YWx1ZSA9IHRlbnNbaV1cbiAgICAgIGlmIChkaWUudmFsdWUgPT09IHNlbGVjdGVkKSB7XG4gICAgICAgIHNlbGVjdGVkID0gMTAxXG4gICAgICAgIGRpZS5zZWxlY3RlZCA9IHRydWVcbiAgICAgICAgaWYgKHRoaXMuaGFzQm9udXMpIHtcbiAgICAgICAgICBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWluID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWF4KSBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWluKSBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWluID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8vIGlmKCBkaWUudmFsdWUgPT0gMTAwKSBkaWUudmFsdWUgPSBcIjAwXCI7XG4gICAgICB0aGlzLmRpY2VzLnRlbnMucHVzaChkaWUpXG4gICAgfVxuXG4gICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICAgIGlmICh1cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgZm9yY2VTdWNjZXNzTGV2ZWwgKHN1Y2Nlc3NMZXZlbCwgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBoaWdoLCBsb3dcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGUgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IDEwMFxuICAgICAgbG93ID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaWYgKHRoaXMucmVndWxhclRocmVzaG9sZCA9PT0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxKSB7XG4gICAgICAgIGhpZ2ggPSAxMDBcbiAgICAgIH0gZWxzZSBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICBsb3cgPSAxXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSAxXG4gICAgICBsb3cgPSAwXG4gICAgfVxuICAgIGlmIChoaWdoID09PSBsb3cpIGxvdy0tXG4gICAgaWYgKGhpZ2ggPT09IDApIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB0aGlzLl9mb3JjZUNoZWNrKGhpZ2gsIGxvdywgdXBkYXRlKVxuICB9XG5cbiAgaW5jcmVhc2VTdWNjZXNzTGV2ZWwgKHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgaGlnaCwgbG93XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgICAgaWYgKHRoaXMucmVndWxhclRocmVzaG9sZCA9PT0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxKSB7XG4gICAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG93ID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuY3JpdGljYWxUaHJlc2hvbGRcbiAgICAgIGxvdyA9IDBcbiAgICB9XG4gICAgaWYgKGhpZ2ggPT09IGxvdykgbG93LS1cbiAgICB0aGlzLl9mb3JjZUNoZWNrKGhpZ2gsIGxvdywgdXBkYXRlKVxuICB9XG5cbiAgZGVjcmVhc2VTdWNjZXNzTGV2ZWwgKHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgaGlnaCwgbG93XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSAxMDBcbiAgICAgIGxvdyA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgICAgbG93ID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgIGxvdyA9IDFcbiAgICB9XG4gICAgaWYgKGhpZ2ggPT09IDApIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB0aGlzLl9mb3JjZUNoZWNrKGhpZ2gsIGxvdywgdXBkYXRlKVxuICB9XG5cbiAgYXN5bmMgZmxhZ0ZvckRldmVsb3BlbWVudCAoKSB7XG4gICAgdGhpcy5mbGFnZ2VkRm9yRGV2ZWxvcG1lbnQgPSB0cnVlXG4gICAgaWYgKHRoaXMuc2tpbGwpIGF3YWl0IHRoaXMuc2tpbGwuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gIH1cblxuICBzZXQgZGlmZmljdWx0eSAoeCkge1xuICAgIHRoaXMuX2RpZmZpY3VsdHkgPSBwYXJzZUludCh4KVxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLl9kaWZmaWN1bHR5XG4gIH1cblxuICBzZXQgZmxhdm9yICh4KSB7XG4gICAgdGhpcy5fZmxhdm9yID0geFxuICB9XG5cbiAgc2V0IGNvbnRleHQgKHgpIHtcbiAgICB0aGlzLl9jb250ZXh0ID0geFxuICB9XG5cbiAgZ2V0IGNvbnRleHQgKCkge1xuICAgIGlmICghdGhpcy5fY29udGV4dCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0XG4gIH1cblxuICBzZXQgcGFyZW50ICh4KSB7XG4gICAgaWYgKCF0aGlzLnV1aWQpIHRoaXMudXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgdGhpcy5wYXJlbnRVdWlkID0geFxuICB9XG5cbiAgZ2V0IHBhcmVudCAoKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudFV1aWQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5wYXJlbnRVdWlkXG4gIH1cblxuICBnZXQgZmxhdm9yICgpIHtcbiAgICBpZiAodGhpcy5fZmxhdm9yKSByZXR1cm4gdGhpcy5fZmxhdm9yXG4gICAgbGV0IGZsYXZvciA9ICcnXG4gICAgaWYgKHRoaXMuYWN0b3I/LnN5c3RlbSkge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLnNraWxsLm5hbWUsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXRlbSkge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lkl0ZW1DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBpdGVtOiB0aGlzLml0ZW0ubmFtZSxcbiAgICAgICAgICBza2lsbDogdGhpcy5za2lsbC5uYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS5sYWJlbFxuICAgICAgICAgICksXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIGBDb0M3LiR7dGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0ubGFiZWx9YFxuICAgICAgICAgICksXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZmxhdm9yKSB7XG4gICAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSYXdWYWx1ZScsIHtcbiAgICAgICAgICAgIHJhd3ZhbHVlOiB0aGlzLnJhd1ZhbHVlLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnB1c2hpbmcpIHtcbiAgICAgIGZsYXZvciA9IGAke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUHVzaGluZycpfSAke2ZsYXZvcn1gXG4gICAgfVxuXG4gICAgcmV0dXJuIGZsYXZvclxuICB9XG5cbiAgZ2V0IHRvb2x0aXBIZWFkZXIgKCkge1xuICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgIGBDb0M3LiR7dGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0ubGFiZWx9YFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0udmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10ubGFiZWxcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICkgK1xuICAgICAgICBgICgke3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS52YWx1ZX0lKWBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnNraWxsLm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICkgKyBgICgke3RoaXMuc2tpbGwudmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLmRpc3BsYXlOYW1lKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5yYXdWYWx1ZVN0cmluZ30lKWBcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsRWxlbWVudCAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL2luLWNhcmQtcm9sbC5odG1sJ1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMub3B0aW9ucyA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcy5vcHRpb25zLCBvcHRpb25zKVxuICAgIGVsc2UgdGhpcy5vcHRpb25zID0gb3B0aW9uc1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcylcbiAgICBpZiAoaHRtbCkgcmV0dXJuICQucGFyc2VIVE1MKGh0bWwpWzBdXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvaW4tY2FyZC1yb2xsLmh0bWwnXG4gICAgaWYgKHRoaXMub3B0aW9ucykgdGhpcy5vcHRpb25zID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgZWxzZSB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIHJldHVybiBodG1sIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChwdXNoaW5nID0gZmFsc2UpIHtcbiAgICAvLyBJZiBjYXJkIGlzIHByb3ZpZGVkIGF0dHRhY2hlZCB0aGUgcm9sbCB0byB0aGUgY2FyZC4gSWYgVVJJRCBwcm92aWRlZCBhdHRhY2ggYXQgdGhpcyBwb3NpdGlvbi4/XG4gICAgdGhpcy5wdXNoaW5nID0gcHVzaGluZ1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4pIHtcbiAgICAgICAgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuLmRvY3VtZW50XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0b3IuaXNEdW1teSkge1xuICAgICAgICBpZiAodGhpcy5hY3Rvci5uYW1lKSBzcGVha2VyID0geyBhbGlhczogdGhpcy5hY3Rvci5uYW1lIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgfVxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvcj8udXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGZsYXZvcjogdGhpcy5mbGF2b3IsXG4gICAgICBjb250ZW50OiBodG1sLFxuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgIHR5cGU6IENvQzdDaGVjay5jYXJkVHlwZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXVpZCkgY2hhdERhdGEuZmxhZ3MuQ29DNy51dWlkID0gdGhpcy51dWlkXG4gICAgaWYgKHRoaXMuY29udGV4dCkgY2hhdERhdGEuZmxhZ3MuQ29DNy5jb250ZXh0ID0gdGhpcy5jb250ZXh0XG5cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ3NlbGZyb2xsJykge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGNoYXREYXRhLnVzZXIgPSBnYW1lLnVzZXIuaWRcbiAgICAgICAgY2hhdERhdGEuZmxhdm9yID0gYFske3RoaXMuYWN0b3IubmFtZX1dICR7Y2hhdERhdGEuZmxhdm9yfWBcbiAgICAgICAgY2hhdERhdGEuZmxhZ3MgPSB7XG4gICAgICAgICAgQ29DNzoge1xuICAgICAgICAgICAgR01TZWxmUm9sbDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGNoYXREYXRhLnNwZWFrZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY2hhdERhdGEuZmxhZ3MuQ29DNy5vcmlnaW5hbFNwZWFrZXIgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShjaGF0RGF0YS5zcGVha2VyKVxuICAgICAgICB9XG4gICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2VsZlJvbGxXaGlzcGVyVGFyZ2V0JykpIHtcbiAgICAgICAgICAgIGNhc2UgJ293bmVycyc6XG4gICAgICAgICAgICAgIGRlbGV0ZSBjaGF0RGF0YS5zcGVha2VyXG4gICAgICAgICAgICAgIGNoYXREYXRhLndoaXNwZXIgPSB0aGlzLmFjdG9yLm93bmVyc1xuICAgICAgICAgICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgY2FzZSAnZXZlcnlvbmUnOlxuICAgICAgICAgICAgICBkZWxldGUgY2hhdERhdGEuc3BlYWtlclxuICAgICAgICAgICAgICBjaGF0RGF0YS53aGlzcGVyID0gZ2FtZS51c2Vycy5wbGF5ZXJzXG4gICAgICAgICAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIHRoaXMucm9sbE1vZGUpXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIC8vIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoIGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKTtcbiAgICBpZiAodGhpcy5kaWNlPy5yb2xsICYmICF0aGlzLmRpY2U/LmhpZGVEaWNlKSB7XG4gICAgICBjaGF0RGF0YS5yb2xsID0gdGhpcy5kaWNlLnJvbGxcbiAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTFxuICAgICAgY2hhdERhdGEucm9sbE1vZGUgPSB0aGlzLmlzQmxpbmQgPyAnYmxpbmRyb2xsJyA6IHRoaXMucm9sbE1vZGVcbiAgICB9XG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbWFrZVB1YmxpYyAgV2lsbCBjaGFuZ2UgdGhlIHJvbGwgbW9kZSB0byBwdWJsaWNcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICh7IG1ha2VQdWJsaWMgPSBmYWxzZSwgZm9yY2VSb2xsID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKG1ha2VQdWJsaWMpIHRoaXMucm9sbE1vZGUgPSBmYWxzZSAvLyByZXNldCByb2xsIG1vZGVcblxuICAgIGNvbnN0IGNoYXREYXRhID0geyBmbGF2b3I6IHRoaXMuZmxhdm9yIH1cblxuICAgIGlmIChtYWtlUHVibGljKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gW11cbiAgICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcbiAgICAgIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEpXG4gICAgfSAvLyBlbHNlIHtcbiAgICAvLyBjaGF0RGF0YS53aGlzcGVyID0gW11cbiAgICAvLyBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG4gICAgLy8gQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICAvLyB9XG5cbiAgICBpZiAoY2hhdERhdGEuYmxpbmQpIHtcbiAgICAgIHRoaXMuaXNCbGluZCA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbC1yZXN1bHQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgbGV0IG5ld0NvbnRlbnQgPSBodG1sXG5cbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSByZXR1cm4gJC5wYXJzZUhUTUwoaHRtbClbMF0gLy8gSWYgbm8gbWVzc2FnZUlkIHJldHVybiB0aGUgSFRNTEVsZW1lbnQgY29udGFpbmluZyB0aGUgcm9sbC5cbiAgICAvLyBJZiBubyBtZXNzYWdlSWRcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICBjb25zdCBodG1sTWVzc2FnZSA9ICQucGFyc2VIVE1MKG1lc3NhZ2UuY29udGVudClbMF1cbiAgICBpZiAoIWh0bWxNZXNzYWdlLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1yZXN1bHQnKSkge1xuICAgICAgY29uc3QgaHRtbENoZWNrID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cbiAgICAgIGNvbnN0IHJvbGxSZXN1bHRFbGVtZW50ID0gaHRtbE1lc3NhZ2UucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICAgIGlmIChyb2xsUmVzdWx0RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICByb2xsUmVzdWx0RWxlbWVudC5yZXBsYWNlV2l0aChodG1sQ2hlY2spXG4gICAgICB9XG4gICAgICBuZXdDb250ZW50ID0gaHRtbE1lc3NhZ2Uub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgY2hhdERhdGEuY29udGVudCA9IG5ld0NvbnRlbnRcblxuICAgIGlmIChDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTCA9PT0gbWVzc2FnZS50eXBlKSB7XG4gICAgICBpZiAobWVzc2FnZS53aGlzcGVyPy5sZW5ndGgpIHtcbiAgICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXG4gICAgICB9IGVsc2UgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5PVEhFUlxuICAgIH1cblxuICAgIGlmIChmb3JjZVJvbGwgJiYgdGhpcy5kaWNlPy5yb2xsICYmIChnYW1lLnVzZXIuaXNHTSB8fCAhdGhpcy5pc0JsaW5kKSkge1xuICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5kaWNlLnJvbGwpXG4gICAgfVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoY2hhdERhdGEpXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50KSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICBjaGVjay5nbURpZmZpY3VsdHlSZWd1bGFyID0gZmFsc2VcbiAgICBjaGVjay5nbURpZmZpY3VsdHlIYXJkID0gZmFsc2VcbiAgICBjaGVjay5nbURpZmZpY3VsdHlFeHRyZW1lID0gZmFsc2VcbiAgICBjaGVjay5nbURpZmZpY3VsdHlDcml0aWNhbCA9IGZhbHNlXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5UmVndWxhcicpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eVJlZ3VsYXIgPSB0cnVlXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eUhhcmQnKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlIYXJkID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlFeHRyZW1lJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5RXh0cmVtZSA9IHRydWVcbiAgICB9XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5Q3JpdGljYWwnKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlDcml0aWNhbCA9IHRydWVcbiAgICB9XG4gICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBnZXQgdG9vbHRpcCAoKSB7XG4gICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9yb2xsLXRvb2x0aXAuaHRtbCcsXG4gICAgICB0aGlzXG4gICAgKVxuICB9XG5cbiAgZ2V0IGlubGluZUNoZWNrICgpIHtcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWlubGluZS1jaGVjaycpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWNoZWNrLXJlc3VsdCcpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWlubGluZScpXG4gICAgYS5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NMaXN0KVxuICAgIGEudGl0bGUgPSB0aGlzLnRvb2x0aXBIZWFkZXJcbiAgICBhLmRhdGFzZXQucm9sbCA9IGVzY2FwZSh0aGlzLkpTT05Sb2xsU3RyaW5nKSAvLyBUT0RPIUlNUE9SVEFOVCEhIVxuICAgIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1kMTBcIj48L2k+ICR7XG4gICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0IHx8ICc/PydcbiAgICB9YFxuICAgIHJldHVybiBhXG4gIH1cblxuICBnZXQgcm9sbFRvb2xUaXAgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBwYXJ0cyA9IFtdXG4gICAgY29uc3QgdGVucyA9IHRoaXMuZGljZXMudGVucy5tYXAociA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN1bHQ6IHIudmFsdWUsXG4gICAgICAgIHNlbGVjdGVkOiByLnNlbGVjdGVkLFxuICAgICAgICBjbGFzc2VzOiBbXG4gICAgICAgICAgJ2RpZScsXG4gICAgICAgICAgJ2QxMCcsXG4gICAgICAgICAgIXIuc2VsZWN0ZWQgPyAnZGlzY2FyZGVkJyA6IG51bGwsXG4gICAgICAgICAgci5pc01pbiA/ICdtaW4nIDogbnVsbCxcbiAgICAgICAgICByLmlzTWF4ID8gJ21heCcgOiBudWxsXG4gICAgICAgIF1cbiAgICAgICAgICAuZmlsdGVyKGMgPT4gYylcbiAgICAgICAgICAuam9pbignICcpXG4gICAgICB9XG4gICAgfSlcbiAgICBjb25zdCB1bml0ID0gW1xuICAgICAge1xuICAgICAgICByZXN1bHQ6IHRoaXMuZGljZXMudW5pdC52YWx1ZSxcbiAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgIGNsYXNzZXM6ICdkaWUgZDEwJ1xuICAgICAgfVxuICAgIF1cblxuICAgIHBhcnRzLnB1c2goe1xuICAgICAgZm9ybXVsYTogdGhpcy50b29sdGlwSGVhZGVyLFxuICAgICAgdG90YWw6IHRoaXMubW9kaWZpZWRSZXN1bHQsXG4gICAgICBpY29uczogdGhpcy5zdWNjZXNzTGV2ZWxJY29ucyxcbiAgICAgIGNsYXNzOiB0aGlzLmNzc0NsYXNzLFxuICAgICAgc3VjY2Vzc1JlcXVpcmVkOiB0aGlzLnN1Y2Nlc3NSZXF1aXJlZCxcbiAgICAgIHJlc3VsdFR5cGU6IHRoaXMucmVzdWx0VHlwZSxcbiAgICAgIGZhY2U6IDEwLFxuICAgICAgcm9sbHM6IFsuLi50ZW5zLCAuLi51bml0XVxuICAgIH0pXG4gICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9yb2xsLXRvb2x0aXAuaHRtbCcsXG4gICAgICB7IHBhcnRzIH1cbiAgICApXG4gIH1cblxuICBnZXQgSlNPTlJvbGxEYXRhICgpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLkpTT05Sb2xsU3RyaW5nKVxuICB9XG5cbiAgZ2V0IEpTT05Sb2xsU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgY29uc3QgZXhjbHVkZSA9IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbSddXG4gICAgICBpZiAoZXhjbHVkZS5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGZyb21EYXRhIChkYXRhKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhKVxuICB9XG5cbiAgc3RhdGljIGZyb21Sb2xsU3RyaW5nIChkYXRhU3RyaW5nKSB7XG4gICAgbGV0IGRhdGFcbiAgICB0cnkge1xuICAgICAgZGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoZGF0YVN0cmluZykpXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5mcm9tRGF0YShkYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFsdGVyIChjaGVjaywgY29tbWFuZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3dpdGNoIChjb21tYW5kKSB7XG4gICAgICBjYXNlICd1c2VMdWNrJzoge1xuICAgICAgICBpZiAob3B0aW9ucy50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcbiAgICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQob3B0aW9ucy50YXJnZXQuZGF0YXNldC5sdWNrQW1vdW50KVxuICAgICAgICAgIGNoZWNrLmZvcmNlUGFzcyhsdWNrQW1vdW50LCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChvcHRpb25zLnRhcmdldC5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgIGF3YWl0IGNoZWNrLnVwZ3JhZGVDaGVjayh1cGdyYWRlSW5kZXgsIG9wdGlvbnMudXBkYXRlKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLXBhc3MnOiB7XG4gICAgICAgIGNoZWNrLmZvcmNlUGFzcyhudWxsLCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcbiAgICAgICAgY2hlY2suZm9yY2VGYWlsKG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdpbmNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjaGVjay5pbmNyZWFzZVN1Y2Nlc3NMZXZlbChvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVjcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY2hlY2suZGVjcmVhc2VTdWNjZXNzTGV2ZWwob3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcbiAgICAgICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNoZWNrLnJvbGxNb2RlID0gZmFsc2VcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZsYWctZm9yLWRldmVsb3BtZW50Jzoge1xuICAgICAgICBhd2FpdCBjaGVjay5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3B1c2gnOiB7XG4gICAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKClcbiAgICAgICAgY2hlY2sucHVzaGluZyA9IHRydWVcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrSW5saW5lUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1jaGVjay1yZXN1bHQnKSkge1xuICAgICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2NvbGxhcHNlSW5saW5lUmVzdWx0KGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9leHBhbmRJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX2NvbGxhcHNlSW5saW5lUmVzdWx0IChhKSB7XG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1pbmxpbmUtY2hlY2snKSkgcmV0dXJuXG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkgcmV0dXJuXG4gICAgY29uc3QgdG9vbHRpcCA9IGEucXVlcnlTZWxlY3RvcignLmNvYzctY2hlY2stdG9vbHRpcCcpXG4gICAgaWYgKHRvb2x0aXApIHRvb2x0aXAucmVtb3ZlKClcbiAgICByZXR1cm4gYS5jbGFzc0xpc3QucmVtb3ZlKCdleHBhbmRlZCcpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX2V4cGFuZElubGluZVJlc3VsdCAoYSkge1xuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctaW5saW5lLWNoZWNrJykpIHJldHVyblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkgcmV0dXJuXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgdG9vbHRpcFxuICAgIGNvbnN0IGNoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIG5ldyBDb0M3Q2hlY2soKSxcbiAgICAgIEpTT04ucGFyc2UodW5lc2NhcGUoYS5kYXRhc2V0LnJvbGwpKVxuICAgICkgLy8gVE9ETyA6IGZpbmQgc3RyaW5naWZ5IHVuZXNjYXBlICEhIDIwMjEwMjA1XG4gICAgaWYgKGNoZWNrLnN0YW5kYnkpIHJldHVyblxuXG4gICAgY29uc3QgdGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aXAuaW5uZXJIVE1MID0gYXdhaXQgY2hlY2sucm9sbFRvb2xUaXBcblxuICAgIC8vIEFkZCB0aGUgdG9vbHRpcFxuICAgIGNvbnN0IHRvb2x0aXAgPSB0aXAuY2hpbGRyZW5bMF1cbiAgICBhLmFwcGVuZENoaWxkKHRvb2x0aXApXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdleHBhbmRlZCcpXG5cbiAgICAvLyBTZXQgdGhlIHBvc2l0aW9uXG4gICAgY29uc3QgcGEgPSBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgY29uc3QgcHQgPSB0b29sdGlwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgdG9vbHRpcC5zdHlsZS5sZWZ0ID0gYCR7TWF0aC5taW4oXG4gICAgICBwYS54LFxuICAgICAgd2luZG93LmlubmVyV2lkdGggLSAocHQud2lkdGggKyAzKVxuICAgICl9cHhgXG4gICAgdG9vbHRpcC5zdHlsZS50b3AgPSBgJHtNYXRoLm1pbihcbiAgICAgIHBhLnkgKyBwYS5oZWlnaHQgKyAzLFxuICAgICAgd2luZG93LmlubmVySGVpZ2h0IC0gKHB0LmhlaWdodCArIDMpXG4gICAgKX1weGBcbiAgICBjb25zdCB6aSA9IGdldENvbXB1dGVkU3R5bGUoYSkuekluZGV4XG4gICAgdG9vbHRpcC5zdHlsZS56SW5kZXggPSBOdW1iZXIuaXNOdW1lcmljKHppKSA/IHppICsgMSA6IDEwMFxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgQ09ORklHLCBDT05TVCwgRGlhbG9nLCBGb2xkZXIsIGZvdW5kcnksIGZyb21VdWlkLCBmcm9tVXVpZFN5bmMsIGdhbWUsIGdldERvY3VtZW50Q2xhc3MsIEhvb2tzLCBNYWNybywgUm9sbCwgVG9rZW4sIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi9hcHBzL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3VXRpbGl0aWVzIHtcbiAgLy8gc3RhdGljIHRlc3QoZXZlbnQpe1xuICAvLyAgIGlmKCBldmVudC5zaGlmdEtleSkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdIZWxsbyBmcm9tIFNISUZUIHV0aWxpdGllcycpO1xuICAvLyAgIGVsc2UgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdIZWxsbyBmcm9tIHV0aWxpdGllcycpO1xuICAvLyAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCk7XG4gIC8vICAgbGV0IGFjdG9yO1xuICAvLyAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXTtcbiAgLy8gICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKTtcblxuICAvLyAgYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKTtcbiAgLy8gfVxuXG4gIHN0YXRpYyBpc0Zvcm11bGEgKHgpIHtcbiAgICBpZiAodHlwZW9mIHggIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWlzTmFOKE51bWJlcih4KSkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBSb2xsLnZhbGlkYXRlKHgpXG4gIH1cblxuICBzdGF0aWMgUGFyc2VDaGF0RW50cnkgKGh0bWwsIGNvbnRlbnQpIHtcbiAgICBjb25zdCByZWdYID0gLyhcXFMrKS9nXG4gICAgY29uc3QgdGVybXMgPSBjb250ZW50Lm1hdGNoKHJlZ1gpXG4gICAgaWYgKFxuICAgICAgdGVybXNbMF0/LnRvTG93ZXJDYXNlKCkubWF0Y2goL15cXC9yKG9sbCk/JC8pICYmXG4gICAgICB0ZXJtc1sxXT8udG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCcxZCUnKVxuICAgICkge1xuICAgICAgLy8gRGVsYXkgY2FsbGluZyBmdW5jdGlvbiB0byBwcmV2ZW50IGNoYXRtZXNzYWdlIGtleSBkb3duIHRyaWdnZXJpbmcgZGVmYXVsdFxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIENvQzdVdGlsaXRpZXMuX0V4ZWNDb21tYW5kKGNvbnRlbnQpXG4gICAgICB9LCAyMDApXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX0V4ZWNDb21tYW5kIChjb250ZW50KSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvbnRlbnRcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAuc3BsaXQoJyAnKVxuICAgICAgPy5qb2luKCcnKVxuICAgICAgPy5yZXBsYWNlKC9cXC9yKG9sbCk/MWQlLywgJycpXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgIGxldCBlc2NhcGVkID0gb3B0aW9uc1xuICAgICAgbGV0IHRocmVzaG9sZFxuICAgICAgbGV0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGxldCBkaWNlTW9kaWZpZXIgPSAwXG4gICAgICBsZXQgYXNrID0gZmFsc2VcbiAgICAgIGxldCBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBsZXQgZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBjb25zdCB0aHJlc2hvbGRTdHIgPSBlc2NhcGVkLm1hdGNoKC9bXihdKyg/PVxcKSkvKVxuICAgICAgaWYgKHRocmVzaG9sZFN0ciAmJiB0aHJlc2hvbGRTdHIubGVuZ3RoKSB7XG4gICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih0aHJlc2hvbGRTdHJbMF0pXG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgdGhyZXNob2xkU3RyKSB7XG4gICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZShgKCR7bWF0Y2h9KWAsICcnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBkaWZmaWN1bHR5U3RyID0gZXNjYXBlZC5tYXRjaCgvW15bXSsoPz1cXF0pLylcbiAgICAgIGlmIChkaWZmaWN1bHR5U3RyICYmIGRpZmZpY3VsdHlTdHIubGVuZ3RoKSB7XG4gICAgICAgIGRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KGRpZmZpY3VsdHlTdHJbMF0pXG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgZGlmZmljdWx0eVN0cikge1xuICAgICAgICAgIGVzY2FwZWQgPSBlc2NhcGVkLnJlcGxhY2UoYFske21hdGNofV1gLCAnJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGVzY2FwZWQuaW5jbHVkZXMoJz8nKSkge1xuICAgICAgICBhc2sgPSB0cnVlXG4gICAgICAgIGVzY2FwZWQgPSBlc2NhcGVkLnJlcGxhY2UoJz8nLCAnJylcbiAgICAgIH1cbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKGVzY2FwZWQpKSkgZGljZU1vZGlmaWVyID0gTnVtYmVyKGVzY2FwZWQpXG5cbiAgICAgIGlmIChhc2spIHtcbiAgICAgICAgY29uc3QgZGlhbG9nT3B0aW9ucyA9IHtcbiAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICAgbW9kaWZpZXI6IGRpY2VNb2RpZmllcixcbiAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgIGFza1ZhbHVlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShkaWFsb2dPcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBkaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKSB8fCB0aHJlc2hvbGRcbiAgICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBpZiAodGhyZXNob2xkKSBjaGVjay5yYXdWYWx1ZSA9ICFpc05hTih0aHJlc2hvbGQpID8gdGhyZXNob2xkIDogdW5kZWZpbmVkXG4gICAgfVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBpZiAoc3BlYWtlci50b2tlbiAmJiBzcGVha2VyLnNjZW5lKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICBgJHtzcGVha2VyLnNjZW5lfS4ke3NwZWFrZXIudG9rZW59YFxuICAgICAgKSAvLyBSRUZBQ1RPUklORyAoMikgKysrIHdoeSBzcGVha2VyLnNjZW5lLlxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfSBlbHNlIGlmIChzcGVha2VyLmFjdG9yKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfVxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdGVzdCAoKSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvcygnRG8gc29tZSBzdHVmZicpXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tU3RyaW5nIChhY3RvclN0cmluZykge1xuICAgIGxldCBhY3RvclxuXG4gICAgLy8gVG9rZW4gaXMgYmV0dGVyIHRoYW4gYWN0b3IuXG4gICAgLy8gQ2FzZSAxIDogdHJ5aW5nIHdpdGggSUQuXG4gICAgLy8gQ2FzZSAxLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBpZiAoZ2FtZS5hY3RvcnMudG9rZW5zW2FjdG9yU3RyaW5nXSkgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1thY3RvclN0cmluZ11cbiAgICAvLyBDYXNlIDEuMiA6IGFjdG9yIGZvdW5kLlxuICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9yU3RyaW5nKVxuICAgIGlmIChhY3RvcikgcmV0dXJuIGFjdG9yXG5cbiAgICAvLyBDYXNlIDIgOiB0cnlpbmcgd2l0aCBuYW1lXG4gICAgLy8gQ2FzZSAyLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBhY3RvciA9IE9iamVjdC52YWx1ZXMoZ2FtZS5hY3RvcnMudG9rZW5zKS5maW5kKHQgPT4ge1xuICAgICAgaWYgKHQubmFtZS50b0xvd2VyQ2FzZSgpID09PSBhY3RvclN0cmluZy50b0xvd2VyQ2FzZSgpKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcbiAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAvLyBDYXNlIDIuMiA6IGFjdG9yIGZvdW5kLlxuICAgICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5maW5kKGEgPT4ge1xuICAgICAgICBpZiAoYS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGFjdG9yU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKGFjdG9yKSByZXR1cm4gYWN0b3JcblxuICAgIC8vIC8vIENhc2UgMyBzdHJpbmcgbWF5YmUgYW4gYWN0b3JLZXlcbiAgICAvLyBpZiAoY3JlYXR1cmUuaW5jbHVkZXMoJy4nKSkge1xuICAgIC8vICAgY29uc3QgWywgYWN0b3JJZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgIC8vICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tU3RyaW5nKGFjdG9ySWQpXG4gICAgLy8gfVxuXG4gICAgLy8gTm8gam95XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRDaGFyYWN0ZXJpc3RpY05hbWVzIChjaGFyKSB7XG4gICAgY29uc3QgY2hhcktleSA9IGNoYXIudG9Mb3dlckNhc2UoKVxuXG4gICAgc3dpdGNoIChjaGFyS2V5KSB7XG4gICAgICBjYXNlICdzdHInOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TVFInKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU3RyZW5ndGgnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdjb24nOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5DT04nKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQ29uc3RpdHV0aW9uJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnc2l6JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU0laJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNpemUnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdkZXgnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5ERVgnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRGV4dGVyaXR5JylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnYXBwJzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQVBQJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkFwcGVhcmFuY2UnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdpbnQnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5JTlQnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuSW50ZWxsaWdlbmNlJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAncG93JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUE9XJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlBvd2VyJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnZWR1JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRURVJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkVkdWNhdGlvbicpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2x1Y2snOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgZm9yIChjb25zdCBbLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgZ2FtZS5zeXN0ZW0udGVtcGxhdGUuQWN0b3IudGVtcGxhdGVzLmNoYXJhY3RlcmlzdGljcy5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICAgKSkge1xuICAgICAgICAgIGlmIChjaGFyS2V5ID09PSBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIGlmIChTdHJpbmcoZGlmZmljdWx0eSkgPT09ICcwJykgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3N0cmluZycpIHJldHVybiBkaWZmaWN1bHR5XG4gICAgaWYgKCFpc05hTihOdW1iZXIoZGlmZmljdWx0eSkpKSByZXR1cm4gTnVtYmVyKGRpZmZpY3VsdHkpXG5cbiAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcbiAgICAgIGNhc2UgJz8nOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duXG4gICAgICBjYXNlICcrJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgICAgY2FzZSAnKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICcrKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBza2lsbENoZWNrTWFjcm8gKHNraWxsLCBldmVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoc3BlYWtlci50b2tlbikgYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbc3BlYWtlci50b2tlbl1cbiAgICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKSAvLyBObyBuZWVkIHRvIGZpbGwgYWN0b3IgdG9rZW5cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLnNraWxsQ2hlY2soc2tpbGwsIGV2ZW50LnNoaWZ0S2V5LCBvcHRpb25zKVxuICB9XG5cbiAgc3RhdGljIHdlYXBvbkNoZWNrTWFjcm8gKHdlYXBvbiwgZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGxldCBhY3RvclxuICAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXVxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIGlmIChzcGVha2VyLnNjZW5lICYmIHNwZWFrZXIudG9rZW4pIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgc3ludGhldGljIGFjdG9yIGxpbmtlZCB3aXRoIHRoZSBhY3RpdmUgdG9rZW4uXG4gICAgICAgIGNvbnN0IGJhc2VBY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzcGVha2VyLnNjZW5lKVxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLnRva2Vucy5nZXQoc3BlYWtlci50b2tlbilcblxuICAgICAgICBjb25zdCBBY3RvckNsYXNzID0gZ2V0RG9jdW1lbnRDbGFzcygnQWN0b3InKVxuICAgICAgICBjb25zdCB0b2tlbkFjdG9yID0gbmV3IEFjdG9yQ2xhc3MoYmFzZUFjdG9yLnRvSlNPTigpLCB7XG4gICAgICAgICAgcGFyZW50OiB0b2tlblxuICAgICAgICB9KVxuICAgICAgICBhY3RvciA9IHRva2VuQWN0b3JcbiAgICAgIH0gZWxzZSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgIH1cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLndlYXBvbkNoZWNrKHdlYXBvbiwgZXZlbnQuc2hpZnRLZXkpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY2hlY2tNYWNybyAodGhyZXNob2xkID0gdW5kZWZpbmVkLCBldmVudCA9IG51bGwpIHtcbiAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLnJvbGxEaWNlKGV2ZW50LCB7IHRocmVzaG9sZCB9KVxuICB9XG5cbiAgc3RhdGljIGNyZWF0ZU1hY3JvIChiYXIsIGRhdGEsIHNsb3QpIHtcbiAgICBpZiAoZGF0YS50eXBlICE9PSAnSXRlbScpIHJldHVyblxuXG4gICAgY29uc3QgaXRlbSA9IGZyb21VdWlkU3luYyhkYXRhLnV1aWQsIGJhcilcblxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5NYWNyb05vSXRlbUZvdW5kJylcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKCEoaXRlbS50eXBlID09PSAnd2VhcG9uJykgJiYgIShpdGVtLnR5cGUgPT09ICdza2lsbCcpKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk1hY3JvSW5jb3JyZWN0VHlwZScpXG4gICAgICApXG4gICAgfVxuXG4gICAgbGV0IGNvbW1hbmQgPSAnJ1xuXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgIGNvbW1hbmQgPSBgZ2FtZS5Db0M3Lm1hY3Jvcy53ZWFwb25DaGVjayh7bmFtZTonJHtpdGVtLm5hbWV9JywgdXVpZDonJHtkYXRhLnV1aWR9J30sIGV2ZW50KTtgXG4gICAgfVxuXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9HbG9iYWxTcGVjJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgY29tbWFuZCA9IGBnYW1lLkNvQzcubWFjcm9zLnNraWxsQ2hlY2soe25hbWU6JyR7aXRlbS5uYW1lfScsIHV1aWQ6JyR7ZGF0YS51dWlkfSd9LCBldmVudCk7YFxuICAgIH1cblxuICAgIGlmIChjb21tYW5kICE9PSAnJykge1xuICAgICAgLy8gQ3JlYXRlIHRoZSBtYWNybyBjb21tYW5kXG4gICAgICBjb25zdCBtYWNybyA9IGdhbWUubWFjcm9zLmNvbnRlbnRzLmZpbmQoXG4gICAgICAgIG0gPT4gbS5uYW1lID09PSBpdGVtLm5hbWUgJiYgbS5jb21tYW5kID09PSBjb21tYW5kXG4gICAgICApXG4gICAgICBpZiAoIW1hY3JvKSB7XG4gICAgICAgIE1hY3JvLmNyZWF0ZShmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh7XG4gICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdzY3JpcHQnLFxuICAgICAgICAgIGltZzogaXRlbS5pbWcsXG4gICAgICAgICAgY29tbWFuZFxuICAgICAgICB9KSkudGhlbihtYWNybyA9PiB7XG4gICAgICAgICAgZ2FtZS51c2VyLmFzc2lnbkhvdGJhck1hY3JvKG1hY3JvLCBzbG90KVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGdhbWUudXNlci5hc3NpZ25Ib3RiYXJNYWNybyhtYWNybywgc2xvdClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHRvZ2dsZURldlBoYXNlICh0b2dnbGUpIHtcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnLCB0b2dnbGUpXG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgdG9nZ2xlXG4gICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRldlBoYXNlRW5hYmxlZCcpXG4gICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRldlBoYXNlRGlzYWJsZWQnKVxuICAgIClcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgIHR5cGU6ICd1cGRhdGVDaGFyJ1xuICAgIH0pXG4gICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVDaGFyQ3JlYXRpb24gKHRvZ2dsZSkge1xuICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnLCB0b2dnbGUpXG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgdG9nZ2xlXG4gICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyQ3JlYXRpb25EaXNhYmxlZCcpXG4gICAgKVxuICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgdHlwZTogJ3VwZGF0ZUNoYXInXG4gICAgfSlcbiAgICBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKVxuICAgIEhvb2tzLmNhbGwoJ3RvZ2dsZUNoYXJDcmVhdGlvbicsIHRvZ2dsZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRUYXJnZXQgKCkge1xuICAgIGNvbnN0IHVzZXJzID0gZ2FtZS51c2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLmFjdGl2ZSlcbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9yc1xuICAgIGxldCBjaGVja09wdGlvbnMgPSBgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJDT0NDaGVja0FsbFBDXCIgaWQ9XCJDT0NDaGVja0FsbFBDXCI+XFxuXG4gICAgPGxhYmVsIGZvcj1cIkNPQ0NoZWNrQWxsUENcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5hbGxBY3RvcnMnKX08L2xhYmVsPmBcbiAgICBjb25zdCBwbGF5ZXJUb2tlbklkcyA9IHVzZXJzXG4gICAgICAubWFwKHUgPT4gdS5jaGFyYWN0ZXI/LmlkKVxuICAgICAgLmZpbHRlcihpZCA9PiBpZCAhPT0gdW5kZWZpbmVkKVxuICAgIGNvbnN0IHNlbGVjdGVkUGxheWVySWRzID0gY2FudmFzLnRva2Vucy5jb250cm9sbGVkLm1hcCh0b2tlbiA9PiB7XG4gICAgICByZXR1cm4gdG9rZW4uYWN0b3IuaWRcbiAgICB9KVxuXG4gICAgLy8gQnVpbGQgY2hlY2tib3ggbGlzdCBmb3IgYWxsIGFjdGl2ZSBwbGF5ZXJzXG4gICAgYWN0b3JzLmZvckVhY2goYWN0b3IgPT4ge1xuICAgICAgY29uc3QgY2hlY2tlZCA9XG4gICAgICAgIChzZWxlY3RlZFBsYXllcklkcy5pbmNsdWRlcyhhY3Rvci5pZCkgfHxcbiAgICAgICAgICBwbGF5ZXJUb2tlbklkcy5pbmNsdWRlcyhhY3Rvci5pZCkpICYmXG4gICAgICAgICdjaGVja2VkJ1xuICAgICAgY2hlY2tPcHRpb25zICs9IGBcbiAgICAgPGJyPlxuICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cIiR7YWN0b3IuaWR9XCIgaWQ9XCIke2FjdG9yLmlkfVwiIHZhbHVlPVwiJHthY3Rvci5uYW1lfVwiICR7Y2hlY2tlZH0+XFxuXG4gICAgIDxsYWJlbCBmb3I9XCIke2FjdG9yLmlkfVwiPiR7YWN0b3IubmFtZX08L2xhYmVsPlxuICAgICAgIGBcbiAgICB9KVxuXG4gICAgbmV3IERpYWxvZyh7XG4gICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmRyZWFtaW5nJyl9YCxcbiAgICAgIGNvbnRlbnQ6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcucmVzdFRhcmdldHMnXG4gICAgICApfTogJHtjaGVja09wdGlvbnN9IDxicj5gLFxuICAgICAgYnV0dG9uczoge1xuICAgICAgICB3aGlzcGVyOiB7XG4gICAgICAgICAgbGFiZWw6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5zdGFydFJlc3QnKX1gLFxuICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyBodG1sID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldHMgPSBbXVxuICAgICAgICAgICAgbGV0IGFsbCA9IGZhbHNlXG4gICAgICAgICAgICBjb25zdCB1c2VycyA9IGh0bWwuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVzZXIgb2YgdXNlcnMpIHtcbiAgICAgICAgICAgICAgaWYgKHVzZXIubmFtZSA9PT0gJ0NPQ0NoZWNrQWxsUEMnICYmIHVzZXIuY2hlY2tlZCkgYWxsID0gdHJ1ZVxuICAgICAgICAgICAgICBpZiAodXNlci5jaGVja2VkIHx8IGFsbCkgdGFyZ2V0cy5wdXNoKHVzZXIuaWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLnN0YXJ0UmVzdCh0YXJnZXRzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHN0YXJ0UmVzdCAodGFyZ2V0cykge1xuICAgIGlmICghdGFyZ2V0cy5sZW5ndGgpIHJldHVyblxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhY3RvciA9PiB0YXJnZXRzLmluY2x1ZGVzKGFjdG9yLmlkKSlcbiAgICBsZXQgY2hhdENvbnRlbnQgPSBgPGk+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuZHJlYW1pbmcnKX0uLi48L2k+PGJyPmBcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgaWYgKFsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKGFjdG9yLnR5cGUpKSB7XG4gICAgICAgIGxldCBxdWlja0hlYWxlciA9IGZhbHNlXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3Rvci5pdGVtcykge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0YWxlbnQnKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5uYW1lID09PSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucXVpY2tIZWFsZXInKX1gKSB7XG4gICAgICAgICAgICAgIHF1aWNrSGVhbGVyID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0NyaXRpY2FsV291bmRzID1cbiAgICAgICAgICAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcycpICYmXG4gICAgICAgICAgYWN0b3IuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxuICAgICAgICBjb25zdCBkYWlseVNhbml0eUxvc3MgPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzXG4gICAgICAgIGNvbnN0IGhwVmFsdWUgPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZVxuICAgICAgICBjb25zdCBocE1heCA9IGFjdG9yLnN5c3RlbS5hdHRyaWJzLmhwLm1heFxuICAgICAgICBjb25zdCBtcFZhbHVlID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWVcbiAgICAgICAgY29uc3QgbXBNYXggPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC5tYXhcbiAgICAgICAgY29uc3QgcG93ID0gYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWVcbiAgICAgICAgY2hhdENvbnRlbnQgPSBjaGF0Q29udGVudCArIGA8YnI+PGI+JHthY3Rvci5uYW1lfS4gPC9iPmBcbiAgICAgICAgaWYgKGhwVmFsdWUgPCBocE1heCkge1xuICAgICAgICAgIGlmIChpc0NyaXRpY2FsV291bmRzID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya3JlZFwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3Lmhhc0NyaXRpY2FsV291bmRzJ1xuICAgICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGhlYWxBbW91bnQgPSAxXG4gICAgICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVGYXN0ZXJSZWNvdmVyeScpKSB7XG4gICAgICAgICAgICAgIGhlYWxBbW91bnQgPSAyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocXVpY2tIZWFsZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgaGVhbEFtb3VudCsrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWFsQW1vdW50ID0gTWF0aC5taW4oaGVhbEFtb3VudCwgaHBNYXggLSBocFZhbHVlKVxuICAgICAgICAgICAgaWYgKGhlYWxBbW91bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuaGVhbHRoUmVjb3ZlcmVkJ1xuICAgICAgICAgICAgICAgICl9LiA8L2I+YFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LnB1bHBIZWFsdGhSZWNvdmVyZWQnLFxuICAgICAgICAgICAgICAgICAgeyBudW1iZXI6IGhlYWxBbW91bnQgfVxuICAgICAgICAgICAgICAgICl9LiA8L2I+YFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJzpcbiAgICAgICAgICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSArIGhlYWxBbW91bnRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkYWlseVNhbml0eUxvc3MgPiAwKSB7XG4gICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuZGFpbHlTYW5Mb3NzUmVzdGFydGVkJ1xuICAgICAgICAgICAgKX0uPC9iPmBcbiAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiAwLFxuICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0JzogTWF0aC5mbG9vcihhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgLyA1KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaG91cnMgPSA3XG4gICAgICAgIGlmIChob3VycyA+IDAgJiYgbXBWYWx1ZSA8IG1wTWF4KSB7XG4gICAgICAgICAgbGV0IG1hZ2ljQW1vdW50ID0gaG91cnMgKiBNYXRoLmNlaWwocG93IC8gMTAwKVxuICAgICAgICAgIG1hZ2ljQW1vdW50ID0gTWF0aC5taW4obWFnaWNBbW91bnQsIG1wTWF4IC0gbXBWYWx1ZSlcbiAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcubWFnaWNQb2ludHNSZWNvdmVyZWQnXG4gICAgICAgICAgICApfTogJHttYWdpY0Ftb3VudH0uPC9iPmBcbiAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzpcbiAgICAgICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgKyBtYWdpY0Ftb3VudFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICBjb250ZW50OiBjaGF0Q29udGVudCxcbiAgICAgIHR5cGU6IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5PVEhFUlxuICAgIH1cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlWFBHYWluICh0b2dnbGUpIHtcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICd4cEVuYWJsZWQnLCB0b2dnbGUpXG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgdG9nZ2xlXG4gICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlhQR2FpbkVuYWJsZWQnKVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5YUEdhaW5EaXNhYmxlZCcpXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJvbGxEaWNlIChldmVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgb3B0aW9ucy5hc2tWYWx1ZSA9ICFvcHRpb25zLnRocmVzaG9sZFxuICAgIGxldCBkaWNlTW9kaWZpZXIsIGRpZmZpY3VsdHksIGZsYXREaWNlTW9kaWZpZXIsIGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgIGxldCB0aHJlc2hvbGQgPSBvcHRpb25zLnRocmVzaG9sZFxuXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5tb2RpZmllcikgZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFldmVudD8uc2hpZnRLZXkgJiYgIW9wdGlvbnMuZmFzdEZvcndhcmQpIHtcbiAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICBkaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHVzYWdlLmdldCgndGhyZXNob2xkJykpXG4gICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFjdG9ycyA9IFtdXG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00gJiYgY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQpIHtcbiAgICAgICAgYWN0b3JzLnB1c2godG9rZW4uYWN0b3IudG9rZW5LZXkpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChnYW1lLnVzZXIuY2hhcmFjdGVyKSB7XG4gICAgICBhY3RvcnMucHVzaChnYW1lLnVzZXIuY2hhcmFjdGVyLnRva2VuS2V5KVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgdGsgb2YgYWN0b3JzKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgY2hlY2sucmF3VmFsdWUgPSB0aHJlc2hvbGRcbiAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGNoZWNrLmFjdG9yID0gdGtcbiAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG5cbiAgICBpZiAoIWFjdG9ycy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICBjaGVjay5yYXdWYWx1ZSA9IHRocmVzaG9sZFxuICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDaGFyU2hlZXRzICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGZvciAoY29uc3QgYSBvZiBnYW1lLmFjdG9ycy5jb250ZW50cykge1xuICAgICAgICBpZiAoYT8udHlwZSA9PT0gJ2NoYXJhY3RlcicgJiYgYT8uc2hlZXQgJiYgYT8uc2hlZXQ/LnJlbmRlcmVkKSB7XG4gICAgICAgICAgYS51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IHRydWUgfSlcbiAgICAgICAgICBhLnJlbmRlcihmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgICAgaWYgKGEuaXNPd25lcikge1xuICAgICAgICAgIGEudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiB0cnVlIH0pXG4gICAgICAgICAgYS5yZW5kZXIoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIGZyb20gX29uRHJvcCB0byBnZXQgdGhlIGRyb3BwZWQgZW50aXR5VHlwZSBvciBlbnRpdHlUeXBlIGZyb20gYSBmb2xkZXJcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMgW2l0ZW1zXSBhcnJheSBvZiBpdGVtc1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldERhdGFGcm9tRHJvcEV2ZW50IChldmVudCwgZW50aXR5VHlwZSA9ICdJdGVtJykge1xuICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50KSByZXR1cm4gW11cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YUxpc3QgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBpZiAoZGF0YUxpc3QudHlwZSA9PT0gJ0ZvbGRlcicgJiYgZGF0YUxpc3QuZG9jdW1lbnROYW1lID09PSBlbnRpdHlUeXBlKSB7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGF3YWl0IGZyb21VdWlkKGRhdGFMaXN0LnV1aWQpXG4gICAgICAgIGlmICghZm9sZGVyKSByZXR1cm4gW11cbiAgICAgICAgcmV0dXJuIGZvbGRlci5jb250ZW50c1xuICAgICAgfSBlbHNlIGlmIChkYXRhTGlzdC50eXBlID09PSBlbnRpdHlUeXBlKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCBmcm9tVXVpZChkYXRhTGlzdC51dWlkKVxuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybiBbXVxuICAgICAgICByZXR1cm4gW2l0ZW1dXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW11cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjb3B5VG9DbGlwYm9hcmQgKHRleHQpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgd2luZG93LmlzU2VjdXJlQ29udGV4dCkge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKVxuICAgICAgICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLmxlZnQgPSAnLTk5OXB4J1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS50b3AgPSAnLTk5OXB4J1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRBcmVhKVxuICAgICAgICB0ZXh0QXJlYS5mb2N1cygpXG4gICAgICAgIHRleHRBcmVhLnNlbGVjdCgpXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKVxuICAgICAgICAgICAgPyByZXNvbHZlKClcbiAgICAgICAgICAgIDogcmVqZWN0KFxuICAgICAgICAgICAgICBuZXcgRXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvQ29weVRvQ2xpcGJvYXJkJykpXG4gICAgICAgICAgICApXG4gICAgICAgICAgdGV4dEFyZWEucmVtb3ZlKClcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyKSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvQ29weVRvQ2xpcGJvYXJkJykpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHF1b3RlUmVnRXhwIChzdHJpbmcpIHtcbiAgICAvLyBodHRwczovL2JpdGJ1Y2tldC5vcmcvY2dnYWVydG5lci9qcy1oYWNrcy9yYXcvbWFzdGVyL3F1b3RlLmpzXG4gICAgY29uc3QgbGVuID0gc3RyaW5nLmxlbmd0aFxuICAgIGxldCBxU3RyaW5nID0gJydcblxuICAgIGZvciAobGV0IGN1cnJlbnQsIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIGN1cnJlbnQgPSBzdHJpbmcuY2hhckF0KGkpXG5cbiAgICAgIGlmIChjdXJyZW50ID49ICcgJyAmJiBjdXJyZW50IDw9ICd+Jykge1xuICAgICAgICBpZiAoY3VycmVudCA9PT0gJ1xcXFwnIHx8IGN1cnJlbnQgPT09IFwiJ1wiKSB7XG4gICAgICAgICAgcVN0cmluZyArPSAnXFxcXCdcbiAgICAgICAgfVxuXG4gICAgICAgIHFTdHJpbmcgKz0gY3VycmVudC5yZXBsYWNlKC9bLVtcXF0ve30oKSorPy5cXFxcXiR8XS9nLCAnXFxcXCQmJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXRjaCAoY3VycmVudCkge1xuICAgICAgICAgIGNhc2UgJ1xcYic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcYidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXGYnOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXGYnXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFxuJzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFxuJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xccic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxccidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXHQnOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHQnXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFx2JzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFx2J1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdSdcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gNDsgLS1qID49IGN1cnJlbnQubGVuZ3RoOyBxU3RyaW5nICs9ICcwJyk7XG4gICAgICAgICAgICBxU3RyaW5nICs9IGN1cnJlbnRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBxU3RyaW5nXG4gIH1cblxuICBzdGF0aWMgc2V0QnlQYXRoIChvYmosIHBhdGgsIHZhbHVlKSB7XG4gICAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJylcbiAgICBsZXQgbyA9IG9ialxuICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBpZiAoIW9bcGFydHNbaV1dKSBvW3BhcnRzW2ldXSA9IHt9XG4gICAgICAgIG8gPSBvW3BhcnRzW2ldXVxuICAgICAgfVxuICAgIH1cblxuICAgIG9bcGFydHNbcGFydHMubGVuZ3RoIC0gMV1dID0gdmFsdWVcbiAgfVxuXG4gIHN0YXRpYyBnZXRCeVBhdGggKG9iaiwgcGF0aCkge1xuICAgIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gICAgbGV0IG8gPSBvYmpcbiAgICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgaWYgKCFvW3BhcnRzW2ldXSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb1twYXJ0c1twYXJ0cy5sZW5ndGggLSAxXV1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIERvY3VtZW50IGJ5IGl0cyBVbml2ZXJzYWxseSBVbmlxdWUgSWRlbnRpZmllciAodXVpZCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1dWlkICAgVGhlIHV1aWQgb2YgdGhlIERvY3VtZW50IHRvIHJldHJpZXZlXG4gICAqIEByZXR1cm4ge1Byb21pc2U8RG9jdW1lbnR8bnVsbD59XG4gICAqL1xuICBzdGF0aWMgU2Zyb21VdWlkICh1dWlkKSB7XG4gICAgbGV0IHBhcnRzID0gdXVpZC5zcGxpdCgnLicpXG4gICAgbGV0IGRvY1xuXG4gICAgLy8gQ29tcGVuZGl1bSBEb2N1bWVudHNcbiAgICBpZiAocGFydHNbMF0gPT09ICdDb21wZW5kaXVtJykge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICAgIC8vIHJldHVybiBmcm9tVXVpZCh1dWlkKSAvLyBSZXR1cm4gUHJvbWlzZVxuICAgICAgLy8gcGFydHMuc2hpZnQoKTtcbiAgICAgIC8vIGNvbnN0IFtzY29wZSwgcGFja05hbWUsIGlkXSA9IHBhcnRzLnNsaWNlKDAsIDMpO1xuICAgICAgLy8gcGFydHMgPSBwYXJ0cy5zbGljZSgzKTtcbiAgICAgIC8vIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChgJHtzY29wZX0uJHtwYWNrTmFtZX1gKTtcbiAgICAgIC8vIHJldHVybiBhd2FpdCBwYWNrPy5nZXREb2N1bWVudChpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdvcmxkIERvY3VtZW50c1xuICAgICAgY29uc3QgW2RvY05hbWUsIGRvY0lkXSA9IHBhcnRzLnNsaWNlKDAsIDIpXG4gICAgICBwYXJ0cyA9IHBhcnRzLnNsaWNlKDIpXG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gQ09ORklHW2RvY05hbWVdLmNvbGxlY3Rpb24uaW5zdGFuY2VcbiAgICAgIGRvYyA9IGNvbGxlY3Rpb24uZ2V0KGRvY0lkKVxuICAgIH1cblxuICAgIC8vIEVtYmVkZGVkIERvY3VtZW50c1xuICAgIHdoaWxlIChkb2MgJiYgcGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgW2VtYmVkZGVkTmFtZSwgZW1iZWRkZWRJZF0gPSBwYXJ0cy5zbGljZSgwLCAyKVxuICAgICAgZG9jID0gZG9jLmdldEVtYmVkZGVkRG9jdW1lbnQoZW1iZWRkZWROYW1lLCBlbWJlZGRlZElkKVxuICAgICAgcGFydHMgPSBwYXJ0cy5zbGljZSgyKVxuICAgIH1cbiAgICByZXR1cm4gZG9jIHx8IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBpc0RvY3VtZW50VXVpZFBhY2sgKHV1aWQpIHtcbiAgICBpZiAodXVpZC5pbmNsdWRlcygnQ29tcGVuZGl1bScpKSByZXR1cm4gdHJ1ZVxuICAgIGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgaXNEb2N1bWVudFV1aWQgKHV1aWQpIHtcbiAgICBjb25zdCBpZGVudGlmaWVycyA9IFsnQWN0b3InLCAnU2NlbmUnLCAnVG9rZW4nLCAnSXRlbScsICdDb21wZW5kaXVtJ11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodXVpZC5pbmNsdWRlcyhpZGVudGlmaWVyc1tpXSkpIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRG9jdW1lbnRGcm9tRHJvcERhdGEgKGRyb3BEYXRhKSB7XG4gICAgbGV0IGRvY1V1aWQsIGFjdG9yXG4gICAgaWYgKGRyb3BEYXRhLnRva2VuVXVpZCkge1xuICAgICAgZG9jVXVpZCA9IGRyb3BEYXRhLnRva2VuVXVpZFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRyb3BEYXRhLnV1aWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkb2NVdWlkID0gZHJvcERhdGEudXVpZFxuICAgIH0gZWxzZSB7XG4gICAgICBkb2NVdWlkID1cbiAgICAgICAgZHJvcERhdGEuc2NlbmVJZCAmJiBkcm9wRGF0YS50b2tlbklkXG4gICAgICAgICAgPyBgU2NlbmUuJHtkcm9wRGF0YS5zY2VuZUlkfS5Ub2tlbi4ke2Ryb3BEYXRhLnRva2VuSWR9YFxuICAgICAgICAgIDogZHJvcERhdGEuYWN0b3JJZCB8fCBkcm9wRGF0YS5hY3RvcktleSB8fCBkcm9wRGF0YS5pZFxuICAgIH1cbiAgICBpZiAoZHJvcERhdGEudHlwZSA9PT0gJ1Rva2VuJykge1xuICAgICAgZG9jVXVpZCA9IGRyb3BEYXRhLnV1aWRcbiAgICB9IGVsc2UgaWYgKGRvY1V1aWQpIHtcbiAgICAgIGFjdG9yID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkoZG9jVXVpZClcbiAgICAgIGlmICghYWN0b3IgJiYgZHJvcERhdGEudHlwZSA9PT0gJ0l0ZW0nKSBkb2NVdWlkID0gbnVsbFxuICAgIH1cblxuICAgIGlmIChhY3RvciAmJiBkb2NVdWlkICE9PSBhY3Rvci51dWlkKSB7XG4gICAgICBkb2NVdWlkID0gYWN0b3IudXVpZFxuICAgIH1cbiAgICByZXR1cm4gZG9jVXVpZFxuICB9XG5cbiAgc3RhdGljIGdldERvY3VtZW50RnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgLy8gQ2FzZSAwIC0gYSBkb2N1bWVudCBVdWlkXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWQoa2V5KSkge1xuICAgICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWRQYWNrKGtleSkpIHJldHVybiBmcm9tVXVpZChrZXkpIC8vIFRPRE8gQ2hlY2sgd2UgY2FuIGRvIHRoYXRcbiAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZChrZXkpXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfVxuICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgIGlmICghdG9rZW4uc2NlbmUpIHRva2VuLnNjZW5lID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoc2NlbmUpXG4gICAgICByZXR1cm4gdG9rZW5cbiAgICB9XG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tS2V5IChrZXkpIHtcbiAgICBjb25zdCBkb2MgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleShrZXkpXG4gICAgaWYgKCFkb2MpIHJldHVybiBudWxsXG4gICAgaWYgKGRvYy5hY3RvcikgcmV0dXJuIGRvYy5hY3RvclxuICAgIGlmIChkb2MuY29uc3RydWN0b3I/Lm5hbWUgPT09ICdDb0NBY3RvcicpIHJldHVybiBkb2NcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBmb2xkZXIgb24gdGhlIGFjdG9ycyB0YWIgY2FsbGVkIFwiSW1wb3J0ZWQgQ2hhcmFjdGVyc1wiIGlmIHRoZSBmb2xkZXIgZG9lc24ndCBleGlzdC5cbiAgICogQHJldHVybnMge0ZvbGRlcn0gdGhlIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlclxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cyAoKSB7XG4gICAgbGV0IGZvbGRlck5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyJylcbiAgICBpZiAoZm9sZGVyTmFtZSA9PT0gJ0NvQzcuSW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyJykge1xuICAgICAgZm9sZGVyTmFtZSA9ICdJbXBvcnRlZCBjaGFyYWN0ZXJzJ1xuICAgIH1cbiAgICBsZXQgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID0gZ2FtZS5mb2xkZXJzLmZpbmQoXG4gICAgICBlbnRyeSA9PiBlbnRyeS5uYW1lID09PSBmb2xkZXJOYW1lICYmIGVudHJ5LnR5cGUgPT09ICdBY3RvcidcbiAgICApXG4gICAgaWYgKFxuICAgICAgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID09PSBudWxsIHx8XG4gICAgICB0eXBlb2YgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgLy8gQ3JlYXRlIHRoZSBmb2xkZXJcbiAgICAgIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9IGF3YWl0IEZvbGRlci5jcmVhdGUoe1xuICAgICAgICBuYW1lOiBmb2xkZXJOYW1lLFxuICAgICAgICB0eXBlOiAnQWN0b3InLFxuICAgICAgICBwYXJlbnQ6IG51bGxcbiAgICAgIH0pXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DcmVhdGVkSW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyJylcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlclxuICB9XG5cbiAgLyoqXG4gICAqIGd1ZXNzSXRlbSwgdHJ5IGFuZCBmaW5kIHRoZSBpdGVtIGluIHRoZSBsb2NhdGlvbnMgZGVmaW5lZCBpbiAke3NvdXJjZX0gaSA9IEl0ZW0gRGlyZWN0b3J5LCB3ID0gV29ybGQgQ29tcGVuZGl1bXMsIG0gPSBNb2R1bGUgQ29tcGVuZGl1bXMsIHMgPSBTeXN0ZW0gQ29tcGVuZGl1bXNcbiAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgSXRlbSB0eXBlIHRvIGZpbmRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiBpdGVtIHRvIGZpbmRcbiAgICogQHBhcmFtIHtPYmplY3R9IGNvbWJhdCBudWxsIChkZWZhdWx0KS4gSWYgYm9vbGVhbiBjb21iYXQgcHJvcGVydHkgb2Ygc2tpbGwgbXVzdCBtYXRjaFxuICAgKiBAcGFyYW0ge09iamVjdH0gc291cmNlICcnIChkZWZhdWx0KS4gQ2hlY2sgb3JkZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IGZhbGxiYWNrQW55IGZhbHNlIChkZWZhdWx0KS4gU2hvdWxkIGFueSBzcGVjaWFsaXphdGlvbiB0aGF0IGlzbid0IGZvdW5kIHRyeSB1c2luZyAoQW55KSBpdGVtc1xuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBmb3JtYXR0ZWQgQWN0b3IgZGF0YSBJdGVtIG9yIG51bGxcbiAgICovXG4gIHN0YXRpYyBhc3luYyBndWVzc0l0ZW0gKFxuICAgIHR5cGUsXG4gICAgbmFtZSxcbiAgICB7IGNvbWJhdCA9IG51bGwsIHNvdXJjZSA9ICcnLCBmYWxsYmFja0FueSA9IGZhbHNlIH0gPSB7fVxuICApIHtcbiAgICBsZXQgZXhpc3RpbmcgPSBudWxsXG4gICAgbmFtZSA9IG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgIGZvciAobGV0IG8gPSAwLCBvTSA9IHNvdXJjZS5sZW5ndGg7IG8gPCBvTTsgbysrKSB7XG4gICAgICBzd2l0Y2ggKHNvdXJjZS5zdWJzdHJpbmcobywgbyArIDEpKSB7XG4gICAgICAgIGNhc2UgJ2knOlxuICAgICAgICAgIGV4aXN0aW5nID0gZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgICAgaXRlbSA9PiBpdGVtLnR5cGUgPT09IHR5cGUgJiZcbiAgICAgICAgICAgICAgaXRlbS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgJiZcbiAgICAgICAgICAgICAgKGNvbWJhdCA9PT0gbnVsbCB8fCBpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gY29tYmF0KVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd3JzpcbiAgICAgICAgY2FzZSAnbSc6XG4gICAgICAgIGNhc2UgJ3MnOlxuICAgICAgICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHBhY2subWV0YWRhdGEudHlwZSA9PT0gJ0l0ZW0nICYmXG4gICAgICAgICAgICAgICgoc291cmNlW29dID09PSAndycgJiYgcGFjay5tZXRhZGF0YS5wYWNrYWdlID09PSAnd29ybGQnKSB8fFxuICAgICAgICAgICAgICAgIChzb3VyY2Vbb10gPT09ICdTJyAmJiBwYWNrLm1ldGFkYXRhLnBhY2thZ2UgPT09ICdDb0M3JykgfHxcbiAgICAgICAgICAgICAgICAoc291cmNlW29dID09PSAncycgJiZcbiAgICAgICAgICAgICAgICAgICFbJ3dvcmxkJywgJ0NvQzcnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnBhY2thZ2UpKSlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBwYWNrLmdldERvY3VtZW50cygpXG4gICAgICAgICAgICAgIGV4aXN0aW5nID0gZG9jdW1lbnRzLmZpbmQoXG4gICAgICAgICAgICAgICAgaXRlbSA9PlxuICAgICAgICAgICAgICAgICAgaXRlbS50eXBlID09PSB0eXBlICYmXG4gICAgICAgICAgICAgICAgICBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSAmJlxuICAgICAgICAgICAgICAgICAgKGNvbWJhdCA9PT0gbnVsbCB8fCBpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gY29tYmF0KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICAgIHJldHVybiBleGlzdGluZ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmYWxsYmFja0FueSAmJiB0eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBjb25zdCBtYXRjaCA9IG5hbWUubWF0Y2goL14oLisgXFwoKSg/IWFueSkuKyhcXCkpJC8pXG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgbWF0Y2hbMV0gKyAnYW55JyArIG1hdGNoWzJdLFxuICAgICAgICAgIHsgY29tYmF0LCBzb3VyY2UgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHRvS2ViYWJDYXNlIChzKSB7XG4gICAgaWYgKCFzKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgY29uc3QgbWF0Y2ggPSBzLm1hdGNoKC9bQS1aXXsyLH0oPz1bQS1aXVthLXpdK1swLTldKnxcXGIpfFtBLVpdP1thLXpdK1swLTldKnxbQS1aXXxbMC05XSsvZylcblxuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cblxuICAgIHJldHVybiBtYXRjaC5qb2luKCctJykudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgc3RhdGljIHNvcnRCeU5hbWVLZXkgKGEsIGIpIHtcbiAgICByZXR1cm4gYS5uYW1lXG4gICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIC5sb2NhbGVDb21wYXJlKFxuICAgICAgICBiLm5hbWVcbiAgICAgICAgICAubm9ybWFsaXplKCdORkQnKVxuICAgICAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgICAgICAudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DSURFZGl0b3IgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjb2MtaWQtZWRpdG9yJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jb2MtaWQtZWRpdG9yLmhicycsXG4gICAgICB3aWR0aDogOTAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICB0aXRsZTogJ0NvQzcuQ29DSURGbGFnLnRpdGxlJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgc3VibWl0T25DbG9zZTogdHJ1ZSxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLnN1cHBvcnRlZExhbmd1YWdlcyA9IENPTkZJRy5zdXBwb3J0ZWRMYW5ndWFnZXNcblxuICAgIHRoaXMub3B0aW9ucy5lZGl0YWJsZSA9IHRoaXMub2JqZWN0LnNoZWV0LmlzRWRpdGFibGVcblxuICAgIHNoZWV0RGF0YS5ndWVzc0NvZGUgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NJZCh0aGlzLm9iamVjdClcbiAgICBzaGVldERhdGEuaWRQcmVmaXggPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ2V0UHJlZml4KHRoaXMub2JqZWN0KVxuXG4gICAgc2hlZXREYXRhLmNvY2lkRmxhZyA9IHRoaXMub2JqZWN0LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWdcblxuICAgIHNoZWV0RGF0YS5pZCA9IHNoZWV0RGF0YS5jb2NpZEZsYWc/LmlkIHx8ICcnXG4gICAgc2hlZXREYXRhLmxhbmcgPSBzaGVldERhdGEuY29jaWRGbGFnPy5sYW5nIHx8IGdhbWUuaTE4bi5sYW5nXG4gICAgc2hlZXREYXRhLnByaW9yaXR5ID0gc2hlZXREYXRhLmNvY2lkRmxhZz8ucHJpb3JpdHkgfHwgMFxuXG4gICAgc2hlZXREYXRhLmVyYXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgIHNoZWV0RGF0YS5lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6IChzaGVldERhdGEuY29jaWRGbGFnPy5lcmFzID8/IHt9KVtrZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICBzaGVldERhdGEuZXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIGNvbnN0IENvQ0lES2V5cyA9IGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdChnYW1lLmkxOG4udHJhbnNsYXRpb25zLkNvQzcuQ29DSURGbGFnLmtleXMgPz8ge30pXG4gICAgY29uc3QgcHJlZml4ID0gbmV3IFJlZ0V4cCgnXicgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKHNoZWV0RGF0YS5pZFByZWZpeCkpXG4gICAgc2hlZXREYXRhLmV4aXN0aW5nS2V5cyA9IE9iamVjdC5rZXlzKENvQ0lES2V5cykucmVkdWNlKChvYmosIGspID0+IHtcbiAgICAgIGlmIChrLm1hdGNoKHByZWZpeCkpIHtcbiAgICAgICAgb2JqLnB1c2goeyBrLCBuYW1lOiBDb0NJREtleXNba10gfSlcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmpcbiAgICB9LCBbXSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEuaXNTeXN0ZW1JRCA9ICh0eXBlb2YgQ29DSURLZXlzW3NoZWV0RGF0YS5pZF0gIT09ICd1bmRlZmluZWQnKVxuICAgIGNvbnN0IG1hdGNoID0gc2hlZXREYXRhLmlkLm1hdGNoKC9eKFteXFxcXC5dKylcXC4oW15cXFxcLl0qKVxcLiguKykvKVxuICAgIHNoZWV0RGF0YS5fZXhpc3RpbmcgPSAobWF0Y2ggJiYgdHlwZW9mIG1hdGNoWzNdICE9PSAndW5kZWZpbmVkJyA/IG1hdGNoWzNdIDogJycpXG5cbiAgICBpZiAoc2hlZXREYXRhLmlkICYmIHNoZWV0RGF0YS5sYW5nKSB7XG4gICAgICAvLyBGaW5kIG91dCBpZiB0aGVyZSBleGlzdHMgYSBkdXBsaWNhdGUgQ29DSURcbiAgICAgIGNvbnN0IHdvcmxkRG9jdW1lbnRzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJREFsbCh7XG4gICAgICAgIGNvY2lkOiBzaGVldERhdGEuaWQsXG4gICAgICAgIGxhbmc6IHNoZWV0RGF0YS5sYW5nLFxuICAgICAgICBzY29wZTogJ3dvcmxkJ1xuICAgICAgfSlcbiAgICAgIGNvbnN0IHVzZWRFcmFzID0ge31cbiAgICAgIGNvbnN0IHVuaXF1ZVdvcmxkUHJpb3JpdHkgPSB7fVxuICAgICAgc2hlZXREYXRhLndvcmxkRG9jdW1lbnRJbmZvID0gYXdhaXQgUHJvbWlzZS5hbGwod29ybGREb2N1bWVudHMubWFwKGFzeW5jIChkKSA9PiB7XG4gICAgICAgIGlmIChkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHVuaXF1ZVdvcmxkUHJpb3JpdHksIGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdKSkge1xuICAgICAgICAgICAgICB1bmlxdWVXb3JsZFByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdXSA9IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVuaXF1ZVdvcmxkUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF1dKytcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdW5pcXVlV29ybGRQcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8qJ10gPSAxXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXJhcyA9IChkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMgPyBPYmplY3QuZW50cmllcyhkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pLnNvcnQoKSA6IFtdKVxuICAgICAgICBmb3IgKGNvbnN0IGVyYSBvZiBlcmFzKSB7XG4gICAgICAgICAgdXNlZEVyYXNbZXJhXSA9IENPQzcuZXJhc1tlcmFdID8/ICc/J1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZXJhczogZXJhcy5yZWR1Y2UoZnVuY3Rpb24gKGFsbCwgY3VycmVudCkge1xuICAgICAgICAgICAgYWxsW2N1cnJlbnRdID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIGFsbFxuICAgICAgICAgIH0sIHt9KSxcbiAgICAgICAgICBwcmlvcml0eTogZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSxcbiAgICAgICAgICBsYW5nOiBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmxhbmcgPz8gJ2VuJyxcbiAgICAgICAgICBsaW5rOiBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoZC5saW5rLCB7IGFzeW5jOiB0cnVlIH0pLFxuICAgICAgICAgIGZvbGRlcjogZD8uZm9sZGVyPy5uYW1lXG4gICAgICAgIH1cbiAgICAgIH0pKVxuICAgICAgaWYgKE9iamVjdC5lbnRyaWVzKHVuaXF1ZVdvcmxkUHJpb3JpdHkpLmZpbHRlcihjID0+IGNbMV0gPiAxKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNoZWV0RGF0YS53YXJuRHVwbGljYXRlV29ybGRQcmlvcml0eSA9IHRydWVcbiAgICAgIH1cbiAgICAgIHNoZWV0RGF0YS53b3JsZER1cGxpY2F0ZXMgPSB3b3JsZERvY3VtZW50cy5sZW5ndGggPz8gMFxuXG4gICAgICBjb25zdCBjb21wZW5kaXVtRG9jdW1lbnRzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJREFsbCh7XG4gICAgICAgIGNvY2lkOiBzaGVldERhdGEuaWQsXG4gICAgICAgIGxhbmc6IHNoZWV0RGF0YS5sYW5nLFxuICAgICAgICBzY29wZTogJ2NvbXBlbmRpdW1zJ1xuICAgICAgfSlcbiAgICAgIGNvbnN0IHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eSA9IHt9XG4gICAgICBzaGVldERhdGEuY29tcGVuZGl1bURvY3VtZW50SW5mbyA9IGF3YWl0IFByb21pc2UuYWxsKGNvbXBlbmRpdW1Eb2N1bWVudHMubWFwKGFzeW5jIChkKSA9PiB7XG4gICAgICAgIGlmIChkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpIHtcbiAgICAgICAgICBPYmplY3QuZW50cmllcyhkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eSwgZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF0pKSB7XG4gICAgICAgICAgICAgIHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXV0gPSAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF1dKytcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLyonXSA9IDFcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlcmFzID0gKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyA/IE9iamVjdC5lbnRyaWVzKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4gZVswXSkuc29ydCgpIDogW10pXG4gICAgICAgIGZvciAoY29uc3QgZXJhIG9mIGVyYXMpIHtcbiAgICAgICAgICB1c2VkRXJhc1tlcmFdID0gQ09DNy5lcmFzW2VyYV0gPz8gJz8nXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlcmFzOiBlcmFzLnJlZHVjZShmdW5jdGlvbiAoYWxsLCBjdXJyZW50KSB7XG4gICAgICAgICAgICBhbGxbY3VycmVudF0gPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gYWxsXG4gICAgICAgICAgfSwge30pLFxuICAgICAgICAgIHByaW9yaXR5OiBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5LFxuICAgICAgICAgIGxhbmc6IGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcubGFuZyA/PyAnZW4nLFxuICAgICAgICAgIGxpbms6IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChkLmxpbmssIHsgYXN5bmM6IHRydWUgfSksXG4gICAgICAgICAgZm9sZGVyOiBkPy5mb2xkZXI/Lm5hbWUgPz8gJydcbiAgICAgICAgfVxuICAgICAgfSkpXG4gICAgICBpZiAoT2JqZWN0LmVudHJpZXModW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5KS5maWx0ZXIoYyA9PiBjWzFdID4gMSkubGVuZ3RoID4gMCkge1xuICAgICAgICBzaGVldERhdGEud2FybkR1cGxpY2F0ZUNvbXBlbmRpdW1Qcmlvcml0eSA9IHRydWVcbiAgICAgIH1cbiAgICAgIHNoZWV0RGF0YS5jb21wZW5kaXVtRHVwbGljYXRlcyA9IGNvbXBlbmRpdW1Eb2N1bWVudHMubGVuZ3RoID8/IDBcbiAgICAgIHNoZWV0RGF0YS51c2VkRXJhcyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh1c2VkRXJhcykpIHtcbiAgICAgICAgc2hlZXREYXRhLnVzZWRFcmFzLnB1c2goe1xuICAgICAgICAgIGlkOiBrZXksXG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgc2hlZXREYXRhLnVzZWRFcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgIH0gZWxzZSB7XG4gICAgICBzaGVldERhdGEuY29tcGVuZGl1bURvY3VtZW50SW5mbyA9IFtdXG4gICAgICBzaGVldERhdGEud29ybGREb2N1bWVudEluZm8gPSBbXVxuICAgICAgc2hlZXREYXRhLndvcmxkRHVwbGljYXRlcyA9IDBcbiAgICAgIHNoZWV0RGF0YS5jb21wZW5kaXVtRHVwbGljYXRlcyA9IDBcbiAgICAgIHNoZWV0RGF0YS53YXJuRHVwbGljYXRlV29ybGRQcmlvcml0eSA9IGZhbHNlXG4gICAgICBzaGVldERhdGEud2FybkR1cGxpY2F0ZUNvbXBlbmRpdW1Qcmlvcml0eSA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnYS5jb3B5LXRvLWNsaXBib2FyZCcpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICBDb0M3VXRpbGl0aWVzLmNvcHlUb0NsaXBib2FyZCgkKHRoaXMpLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCgpKVxuICAgIH0pXG5cbiAgICBpZiAoIXRoaXMub2JqZWN0LnNoZWV0LmlzRWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnaW5wdXRbbmFtZT1fZXhpc3RpbmcnKS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNvbnN0IG9iaiA9ICQodGhpcylcbiAgICAgIGNvbnN0IHByZWZpeCA9IG9iai5kYXRhKCdwcmVmaXgnKVxuICAgICAgbGV0IHZhbHVlID0gb2JqLnZhbCgpXG4gICAgICBpZiAodmFsdWUgIT09ICcnKSB7XG4gICAgICAgIHZhbHVlID0gcHJlZml4ICsgQ29DN1V0aWxpdGllcy50b0tlYmFiQ2FzZSh2YWx1ZSlcbiAgICAgIH1cbiAgICAgIGh0bWwuZmluZCgnaW5wdXRbbmFtZT1pZF0nKS52YWwodmFsdWUpLnRyaWdnZXIoJ2NoYW5nZScpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnc2VsZWN0W25hbWU9a25vd25dJykuY2hhbmdlKGZ1bmN0aW9uIChlKSB7XG4gICAgICBjb25zdCBvYmogPSAkKHRoaXMpXG4gICAgICBodG1sLmZpbmQoJ2lucHV0W25hbWU9aWRdJykudmFsKG9iai52YWwoKSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCdhW2RhdGEtZ3Vlc3NdJykuY2xpY2soYXN5bmMgZnVuY3Rpb24gKGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgY29uc3Qgb2JqID0gJCh0aGlzKVxuICAgICAgY29uc3QgZ3Vlc3MgPSBvYmouZGF0YSgnZ3Vlc3MnKVxuICAgICAgaHRtbC5maW5kKCdpbnB1dFtuYW1lPWlkXScpLnZhbChndWVzcykudHJpZ2dlcignY2hhbmdlJylcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGVyYVRvZ2dsZSAoZG9jdW1lbnQsIHByb3BlcnR5SWQpIHtcbiAgICBpZiAoZG9jdW1lbnQudHlwZSA9PT0gJ3NldHVwJykge1xuICAgICAgLy8gU2V0dXBzIGNhbiBvbmx5IGhhdmUgb25lIGVyYSB0byBtYWtlIHN1cmUgdGhlIGNvcnJlY3Qgc2tpbGxzIGFyZSBwb3B1bGF0ZWQgdmlhIENvQyBJRFxuICAgICAgY29uc3QgdXBkYXRlID0ge1xuICAgICAgICBbcHJvcGVydHlJZF06IHRydWVcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5XSBvZiBPYmplY3QuZW50cmllcyhkb2N1bWVudC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKSkge1xuICAgICAgICAgIGlmIChrZXkgIT09IHByb3BlcnR5SWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZVsnLT0nICsga2V5XSA9IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IGRvY3VtZW50LnVwZGF0ZSh7XG4gICAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzJzogdXBkYXRlXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRvY3VtZW50LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXM/Lltwcm9wZXJ0eUlkXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgYXdhaXQgZG9jdW1lbnQudXBkYXRlKHtcbiAgICAgICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyc6IHtcbiAgICAgICAgICAgIFtwcm9wZXJ0eUlkXTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IGRvY3VtZW50LnVwZGF0ZSh7XG4gICAgICAgICAgW2BmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzLiR7cHJvcGVydHlJZH1gXTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBkb2N1bWVudC51cGRhdGUoe1xuICAgICAgICBbYGZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMuLT0ke3Byb3BlcnR5SWR9YF06IG51bGxcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCBDb0NJREVkaXRvci5lcmFUb2dnbGUodGhpcy5vYmplY3QsIHByb3BlcnR5SWQpXG4gICAgdGhpcy5yZW5kZXIoKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3QgaWQgPSBmb3JtRGF0YS5pZCB8fCAnJ1xuICAgIGF3YWl0IHRoaXMub2JqZWN0LnVwZGF0ZSh7XG4gICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQnOiBpZCxcbiAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5sYW5nJzogZm9ybURhdGEubGFuZyB8fCBnYW1lLmkxOG4ubGFuZyxcbiAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSc6IGZvcm1EYXRhLnByaW9yaXR5IHx8IDAsXG4gICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyc6ICh0aGlzLm9iamVjdC5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID8/IHt9KVxuICAgIH0pXG4gICAgY29uc3QgaHRtbCA9ICQodGhpcy5vYmplY3Quc2hlZXQuZWxlbWVudCkuZmluZCgnaGVhZGVyLndpbmRvdy1oZWFkZXIgYS5oZWFkZXItYnV0dG9uLmVkaXQtY29jLWlkLXdhcm5pbmcsaGVhZGVyLndpbmRvdy1oZWFkZXIgYS5oZWFkZXItYnV0dG9uLmVkaXQtY29jLWlkLWV4aXNpdGluZycpXG4gICAgaWYgKGh0bWwubGVuZ3RoKSB7XG4gICAgICBodG1sLmNzcyh7XG4gICAgICAgIGNvbG9yOiAoaWQgPyAndmFyKC0tY29sb3ItdGV4dC1saWdodC1oaWdobGlnaHQpJyA6ICdyZWQnKVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIoKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DSURFZGl0b3IgfSBmcm9tICcuLi9hcHBzL2NvYy1pZC1lZGl0b3IuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIChoZWFkZXJCdXR0b25zLCBzaGVldCkge1xuICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICBjb25zdCBzaGVldENvQ0lEID0gc2hlZXQub2JqZWN0LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWdcbiAgICBjb25zdCBub0lkID0gKHR5cGVvZiBzaGVldENvQ0lEID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2Ygc2hlZXRDb0NJRC5pZCA9PT0gJ3VuZGVmaW5lZCcgfHwgc2hlZXRDb0NJRC5pZCA9PT0gJycpXG4gICAgY29uc3QgQ29DSURFZGl0b3JCdXR0b24gPSB7XG4gICAgICBjbGFzczogKG5vSWQgPyAnZWRpdC1jb2MtaWQtd2FybmluZycgOiAnZWRpdC1jb2MtaWQtZXhpc2l0aW5nJyksXG4gICAgICBsYWJlbDogJ0NvQzcuQ29DSURGbGFnLmlkJyxcbiAgICAgIGljb246ICdmYXMgZmEtZmluZ2VycHJpbnQnLFxuICAgICAgb25jbGljazogKCkgPT4ge1xuICAgICAgICBuZXcgQ29DSURFZGl0b3Ioc2hlZXQub2JqZWN0LCB7fSkucmVuZGVyKHRydWUsIHsgZm9jdXM6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbnVtYmVyT2ZCdXR0b25zID0gaGVhZGVyQnV0dG9ucy5sZW5ndGhcbiAgICBoZWFkZXJCdXR0b25zLnNwbGljZShudW1iZXJPZkJ1dHRvbnMgLSAxLCAwLCBDb0NJREVkaXRvckJ1dHRvbilcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDb250ZXh0TWVudSB7XG4gIGJpbmQgKG1lbnUsIGh0bWwsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFja1xuICAgIHRoaXMuX2h0bWwgPSBodG1sXG4gICAgdGhpcy5fbWVudSA9IG1lbnVcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVudVRyaWdnZXIgPSBodG1sLmZpbmQoYFtkYXRhLWNvbnRleHQtbWVudT0ke21lbnUuaWR9XWApIC8vIEZpbmQgYWxsIG1lbnUgdHJpZ2dlcnMuXG4gICAgICBpZiAobWVudVRyaWdnZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLy8gSWYgdGhlcmUgaXMgbm8gdHJpZ2dlciwgZG8gbm90IGNvbnRpbnVlLlxuICAgICAgbWVudVRyaWdnZXIuY29udGV4dG1lbnUodGhpcy5fb25Db250ZXh0TWVudS5iaW5kKHRoaXMpKSAvLyBBdHRhY2ggdGhlIGhhbmRsZXIuXG4gICAgICBjb25zdCBtZW51RWxlbWVudCA9IENvQzdDb250ZXh0TWVudS5DcmVhdGVNZW51KG1lbnUpIC8vIEJ1aWxkIHRoZSBtZW51XG4gICAgICBtZW51RWxlbWVudC5vbignY2xpY2snLFxuICAgICAgICAnLm1lbnUtYWN0aW9uJyxcbiAgICAgICAgdGhpcy5fb25NZW51QWN0aW9uLmJpbmQodGhpcykpXG4gICAgICAvLyBjb25zdCBkb2N1bWVudE1lbnUgPSB0aGlzLm1lbnVDb250YWluZXIuZmluZChgLmNvbnRleHQtbWVudS13cmFwcGVyLiR7bWVudS5pZH1gKVxuICAgICAgaWYgKHRoaXMubWVudS5sZW5ndGggIT09IDApIHRoaXMubWVudS5yZXBsYWNlV2l0aChtZW51RWxlbWVudClcbiAgICAgIGVsc2UgdGhpcy5tZW51Q29udGFpbmVyLmFwcGVuZChtZW51RWxlbWVudClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICB9XG4gIH1cblxuICBnZXQgbWVudUNvbnRhaW5lciAoKSB7XG4gICAgbGV0IG1lbnVDb250YWluZXIgPSB0aGlzLl9odG1sLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXG4gICAgaWYgKG1lbnVDb250YWluZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLl9odG1sLmFwcGVuZCgnPGRpdiBjbGFzcz1cIm1lbnUtY29udGFpbmVyXCI+PC9kaXY+JylcbiAgICAgIG1lbnVDb250YWluZXIgPSB0aGlzLl9odG1sLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXG4gICAgfVxuICAgIHJldHVybiBtZW51Q29udGFpbmVyXG4gIH1cblxuICBnZXQgbWVudSAoKSB7XG4gICAgLy8gY29uc3QgbWVudUNvbnRhaW5lciA9IHRoaXMubWVudUNvbnRhaW5lclxuICAgIC8vIGlmICghbWVudUNvbnRhaW5lciB8fCBtZW51Q29udGFpbmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5tZW51Q29udGFpbmVyLmZpbmQoYC5jb250ZXh0LW1lbnUtd3JhcHBlci4ke3RoaXMuX21lbnUuaWR9YClcbiAgfVxuXG4gIF9vbk1lbnVBY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIC8vIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdicmFuY2gnKSkgcmV0dXJuXG4gICAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrKGV2ZW50LCB0aGlzLnRhcmdldClcbiAgfVxuXG4gIHN0YXRpYyBjbG9zZUFsbCAoKSB7XG4gICAgY29uc3QgbWVudUNvbnRhaW5lcnMgPSAkKCdib2R5JykuZmluZCgnLm1lbnUtY29udGFpbmVyJylcbiAgICBjb25zdCBtZW51cyA9IG1lbnVDb250YWluZXJzLmZpbmQoJy5jb250ZXh0LW1lbnUtd3JhcHBlcicpXG4gICAgbWVudXMuZWFjaChmdW5jdGlvbiAoaSwgbSkgeyBtLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJyB9KVxuICAgIC8vIGJvZHkuZmluZCgnLm1lbnUtd3JhcHBlcicpLmhpZGUoKVxuICB9XG5cbiAgX29uQ29udGV4dE1lbnUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQodHJ1ZSlcbiAgICBDb0M3Q29udGV4dE1lbnUuY2xvc2VBbGwoKSAvLyBPbmx5IDEgbWVudSBjYW4gYmUgb3Blbi5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudD8uY3VycmVudFRhcmdldFxuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0XG4gICAgaWYgKCF0YXJnZXQpIHJldHVyblxuICAgIGNvbnN0IG1lbnVOYW1lID0gdGFyZ2V0LmRhdGFzZXQ/LmNvbnRleHRNZW51XG4gICAgaWYgKG1lbnVOYW1lID09PSB0aGlzLl9tZW51LmlkKSB7XG4gICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy5tZW51XG4gICAgICBpZiAod3JhcHBlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHN1Yk1lbnUgPSB3cmFwcGVyLmZpbmQoJy5zdWItbWVudScpXG4gICAgICAgIGxldCBsZWZ0ID0gZXZlbnQuY2xpZW50WFxuICAgICAgICBsZXQgdG9wID0gZXZlbnQuY2xpZW50WVxuICAgICAgICBjb25zdCBtZW51SGVpZ2h0ID0gd3JhcHBlci5vdXRlckhlaWdodCgpXG4gICAgICAgIGNvbnN0IG1lbnVXaWR0aCA9IHdyYXBwZXIub3V0ZXJXaWR0aCgpXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCBtZW51SGVpZ2h0ICsgdG9wKSB7XG4gICAgICAgICAgdG9wID0gdG9wIC0gbWVudUhlaWdodFxuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IG1lbnVXaWR0aCArIGxlZnQpIHtcbiAgICAgICAgICBsZWZ0ID0gd2luZG93LmlubmVyV2lkdGggLSBtZW51V2lkdGhcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3ViTWVudS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgbWVudVdpZHRoICsgbGVmdCArIHN1Yk1lbnUub3V0ZXJXaWR0aCgpKSB7XG4gICAgICAgICAgICBzdWJNZW51LmNzcyh7XG4gICAgICAgICAgICAgIHJpZ2h0OiBgJHttZW51V2lkdGggLSA1fXB4YCxcbiAgICAgICAgICAgICAgbGVmdDogJydcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Yk1lbnUuY3NzKHtcbiAgICAgICAgICAgICAgbGVmdDogYCR7bWVudVdpZHRoIC0gNX1weGAsXG4gICAgICAgICAgICAgIHJpZ2h0OiAnJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd3JhcHBlci5jc3Moe1xuICAgICAgICAgIGxlZnQ6IGAke2xlZnR9cHhgLFxuICAgICAgICAgIHRvcDogYCR7dG9wfXB4YCxcbiAgICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZSdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgY2FuU2VlICh2aXNpYmlsaXR5KSB7XG4gICAgc3dpdGNoICh2aXNpYmlsaXR5LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2dtJzpcbiAgICAgICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gICAgICBjYXNlICd0cnVzdGVkJzpcbiAgICAgICAgcmV0dXJuIGdhbWUudXNlci5pc1RydXN0ZWRcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIENyZWF0ZU1lbnUgKG1lbnUpIHtcbiAgICBjb25zdCBjbGFzc2VzID0gdHlwZW9mIG1lbnUuY2xhc3NlcyA9PT0gJ3N0cmluZycgPyBbbWVudS5jbGFzc2VzXSA6IG1lbnUuY2xhc3Nlc1xuICAgIGNsYXNzZXMucHVzaCgnY29udGV4dC1tZW51LXdyYXBwZXInKVxuICAgIGNvbnN0IHdyYXBwZXIgPSAkKCc8ZGl2PjwvZGl2PicpXG4gICAgd3JhcHBlci5hZGRDbGFzcyhtZW51LmlkKVxuICAgIGNsYXNzZXMuZm9yRWFjaChjID0+IHdyYXBwZXIuYWRkQ2xhc3MoYykpXG4gICAgaWYgKG1lbnUuc2VjdGlvbikge1xuICAgICAgbWVudS5zZWN0aW9uLmZvckVhY2gocyA9PiB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlU2VjdGlvbihzLCB7IG11bHRpOiB0cnVlIH0pXG4gICAgICAgIGlmIChzZWN0aW9uKSB3cmFwcGVyLmFwcGVuZChzZWN0aW9uKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2VjdGlvbiA9IENvQzdDb250ZXh0TWVudS5DcmVhdGVTZWN0aW9uKG1lbnUpXG4gICAgICBpZiAoc2VjdGlvbikgd3JhcHBlci5hcHBlbmQoc2VjdGlvbilcbiAgICB9XG4gICAgcmV0dXJuIHdyYXBwZXJcbiAgfVxuXG4gIHN0YXRpYyBDcmVhdGVTZWN0aW9uIChzLCB7IG11bHRpID0gZmFsc2UsIHN1Yk1lbnUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIXMuaXRlbXMpIHJldHVybiBudWxsXG4gICAgaWYgKHMudmlzaWJpbGl0eSAmJiAhQ29DN0NvbnRleHRNZW51LmNhblNlZShzLnZpc2liaWxpdHkpKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGNsYXNzZXMgPSBzLmNsYXNzZXMgPyB0eXBlb2Ygcy5jbGFzc2VzID09PSAnc3RyaW5nJyA/IFtzLmNsYXNzZXNdIDogcy5jbGFzc2VzIDogW11cbiAgICBpZiAobXVsdGkpIGNsYXNzZXMucHVzaCgnbWVudS1zZWN0aW9uJylcbiAgICBpZiAoc3ViTWVudSkgY2xhc3Nlcy5wdXNoKCdzdWItbWVudScpXG4gICAgY29uc3Qgc2VjdGlvbiA9ICQoJzx1bD48L3VsPicpXG4gICAgY2xhc3Nlcy5mb3JFYWNoKGMgPT4gc2VjdGlvbi5hZGRDbGFzcyhjKSlcbiAgICBzLml0ZW1zLmZvckVhY2goaSA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoJzxsaT48L2xpPicpXG4gICAgICBsaS5hZGRDbGFzcygnbWVudS1pdGVtJylcbiAgICAgIGlmIChpLmFjdGlvbikge1xuICAgICAgICBsaS5hZGRDbGFzcygnbWVudS1hY3Rpb24nKVxuICAgICAgICBsaS5hdHRyKCdkYXRhLWFjdGlvbicsIGkuYWN0aW9uKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBpLmxhYmVsID09PSAnc3RyaW5nJykgbGkuYXBwZW5kKGA8c3Bhbj4ke2kubGFiZWx9PC9zcGFuPmApXG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKGkubGFiZWwuaWNvbikgbGkuYXBwZW5kKGA8aSBjbGFzcz1cIiR7aS5sYWJlbC5pY29ufVwiPjwvaT5gKVxuICAgICAgICBpZiAoaS5sYWJlbC50ZXh0KSBsaS5hcHBlbmQoYDxzcGFuPiR7aS5sYWJlbC50ZXh0fTwvc3Bhbj5gKVxuICAgICAgfVxuICAgICAgaWYgKGkuc3ViTWVudSkge1xuICAgICAgICBsaS5hZGRDbGFzcygnc3ViLW1lbnUtYnV0dG9uJylcbiAgICAgICAgbGkuYXBwZW5kKCc8aSBjbGFzcz1cImZhcyBmYS1jYXJldC1yaWdodFwiPjwvaT4nKVxuICAgICAgICBjb25zdCBzdWIgPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlU2VjdGlvbihpLnN1Yk1lbnUsIHsgc3ViTWVudTogdHJ1ZSB9KVxuICAgICAgICBpZiAoc3ViKSBsaS5hcHBlbmQoc3ViKVxuICAgICAgfVxuICAgICAgc2VjdGlvbi5hcHBlbmQobGkpXG4gICAgfSlcbiAgICByZXR1cm4gc2VjdGlvblxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3JTaGVldCwgQ2hhdE1lc3NhZ2UsIENPTlNULCBEaWFsb2csIEZvcm1EYXRhLCBmb3VuZHJ5LCBnYW1lLCBIb29rcywgUm9sbCwgVGV4dEVkaXRvciwgdWkgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jb250ZW50LWxpbmstZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuLi8uLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4uLy4uL2NvbnRleHQtbWVudS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JTaGVldCBleHRlbmRzIEFjdG9yU2hlZXQge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLnNob3dIaWRkZW5EZXZNZW51ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG5cbiAgICBzaGVldERhdGEuY2FuRHJhZ1Rva2VuID0gISF0aGlzLnRva2VuICYmIGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmxpbmtlZEFjdG9yID0gdGhpcy5hY3Rvci5wcm90b3R5cGVUb2tlbj8uYWN0b3JMaW5rID09PSB0cnVlXG4gICAgc2hlZXREYXRhLmlzVG9rZW4gPSB0aGlzLmFjdG9yLmlzVG9rZW5cbiAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUgPSB7fVxuICAgIHNoZWV0RGF0YS5za2lsbHMgPSB7fVxuICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbHMgPSB7fVxuICAgIHNoZWV0RGF0YS53ZWFwb25zID0ge31cbiAgICBzaGVldERhdGEucmFuZ2VXcG4gPSBbXVxuICAgIHNoZWV0RGF0YS5tZWxlZVdwbiA9IFtdXG4gICAgc2hlZXREYXRhLmFjdG9yRmxhZ3MgPSB7fVxuXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPVxuICAgICAgdGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJ1xuICAgICAgICA/IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5hY3Rvci5lZmZlY3RzKVxuICAgICAgICA6IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZU5QQ0FjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5hY3Rvci5lZmZlY3RzKVxuXG4gICAgc2hlZXREYXRhLnBlcm1pc3Npb25MaW1pdGVkID0gIWdhbWUudXNlci5pc0dNICYmICh0aGlzLmFjdG9yLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IHRoaXMuYWN0b3Iub3duZXJzaGlwLmRlZmF1bHQpID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLkxJTUlURURcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmFsbG93VW5sb2NrID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxuICAgICAgZ2FtZS51c2VyLmlzR00gfHxcbiAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2NyZWF0aW9uJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJykpXG4gICAgaWYgKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdjcmVhdGlvbicgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgICkge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSAhPT0gJ3ZlaGljbGUnKSB7XG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcyA9IHtcbiAgICAgICAgICBzdHI6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuU1RSJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlN0cmVuZ3RoJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5DT04nLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQ29uc3RpdHV0aW9uJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpejoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5TSVonLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXg6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuREVYJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkRleHRlcml0eScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuQVBQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkFwcGVhcmFuY2UnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW50OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLklOVCcsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcG93OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLlBPVycsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Qb3dlcicsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlZHU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuRURVJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkVkdWNhdGlvbicsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMgPSB7XG4gICAgICAgICAgaHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdIUCcsXG4gICAgICAgICAgICBsYWJlbDogJ0hpdCBwb2ludHMnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbXA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdIUCcsXG4gICAgICAgICAgICBsYWJlbDogJ01hZ2ljIHBvaW50cycsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsY2s6IHsgdmFsdWU6IG51bGwsIHNob3J0OiAnTENLJywgbGFiZWw6ICdMdWNrJyB9LFxuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IDk5LFxuICAgICAgICAgICAgc2hvcnQ6ICdTQU4nLFxuICAgICAgICAgICAgbGFiZWw6ICdTYW5pdHknLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbW92OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnTU9WJyxcbiAgICAgICAgICAgIGxhYmVsOiAnTW92ZW1lbnQgcmF0ZScsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0RCJyxcbiAgICAgICAgICAgIGxhYmVsOiAnRGFtYWdlIGJvbnVzJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJ1aWxkOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQkxEJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQnVpbGQnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJtb3I6IHsgdmFsdWU6IG51bGwsIGF1dG86IGZhbHNlIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSA9IHtcbiAgICAgICAgICBwZXJzb25hbERlc2NyaXB0aW9uOiB7IHR5cGU6ICdzdHJpbmcnLCB2YWx1ZTogJycgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zKSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcyA9IHtcbiAgICAgICAgICBvY2N1cGF0aW9uOiAnJyxcbiAgICAgICAgICBhZ2U6ICcnLFxuICAgICAgICAgIHNleDogJycsXG4gICAgICAgICAgcmVzaWRlbmNlOiAnJyxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiAnJyxcbiAgICAgICAgICBhcmNoZXR5cGU6ICcnLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbjogJycsXG4gICAgICAgICAgcGxheWVybmFtZTogJydcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncykge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MgPSB7IGxvY2tlZDogdHJ1ZSwgbWFudWFsQ3JlZGl0OiBmYWxzZSB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNyZWRpdCkge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY3JlZGl0ID0ge1xuICAgICAgICAgIG1vbmV0YXJ5U3ltYm9sOiBudWxsLFxuICAgICAgICAgIG11bHRpcGxpZXI6IG51bGwsXG4gICAgICAgICAgc3BlbnQ6IG51bGwsXG4gICAgICAgICAgYXNzZXRzRGV0YWlsczogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRldmVsb3BtZW50KSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXZlbG9wbWVudCA9IHtcbiAgICAgICAgICBwZXJzb25hbDogbnVsbCxcbiAgICAgICAgICBvY2N1cGF0aW9uOiBudWxsLFxuICAgICAgICAgIGFyY2hldHlwZTogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSA9IFtdXG5cbiAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZUFyY2hldHlwZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJylcbiAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZU9yZ2FuaXphdGlvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgICAnQ29DNycsXG4gICAgICAgICdwdWxwUnVsZU9yZ2FuaXphdGlvbidcbiAgICAgIClcbiAgICB9XG5cbiAgICBzaGVldERhdGEuaXNEZWFkID0gdGhpcy5hY3Rvci5kZWFkXG4gICAgc2hlZXREYXRhLmlzRHlpbmcgPSB0aGlzLmFjdG9yLmR5aW5nXG5cbiAgICBpZiAoc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICAgIC8vIHNpIGMnZXN0IHVuZSBmb3JtdWxlIGV0IHF1J29uIHBldXQgbCdldmFsdWVyXG4gICAgICAgIC8vIGNlIGJsb2MgZGV2cmFpdCBldHJlIGTDqXBsYWPDqSBkYW5zIGxlIGJsb2MgX3VwZGF0ZUZvcm1EYXRhXG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IudHlwZSAhPT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIGlmIChpc05hTihOdW1iZXIoaXRlbS5zeXN0ZW0udmFsdWUpKSkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICAgICAgICAgIENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0XG4gICAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBmb3VuZHJ5LnV0aWxzLmdldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zdWJzdHJpbmcoNSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IChcbiAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKGl0ZW0uc3lzdGVtLnZhbHVlLCBwYXJzZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKS50b3RhbFxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yVW5hYmxlVG9QYXJzZVNraWxsRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uc3lzdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbFxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0udmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1Ub1VwZGF0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgICAgICAgICAgIGBbQ09DN10gKEFjdG9yOiR7dGhpcy5uYW1lfSkgRXZhbHVhdGluZyBza2lsbCAke2l0ZW0ubmFtZX06JHtpdGVtLnN5c3RlbS52YWx1ZX0gdG8gJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW1Ub1VwZGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS52YWx1ZSc6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgY29uc3QgeyBiYXNlLCByYXdWYWx1ZSwgdmFsdWUgfSA9IHNraWxsLnN5c3RlbVxuXG4gICAgICAgICAgICAvLyBBc3N1bWUgZmFsbGJhY2sgdmFsdWVzLCB1c2VmdWwgZm9yIGluaXRpYWwgc2V0dXAgb2Ygc2tpbGxzXG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5yYXdWYWx1ZSA9IHJhd1ZhbHVlIHx8IHZhbHVlIHx8IGJhc2VcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnZhbHVlID0gdmFsdWUgfHwgYmFzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYmFzZSA9IGF3YWl0IHNraWxsLmFzeW5jQmFzZSgpXG5cbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS52YWx1ZSkge1xuICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBwYXJ0IG9mIG1pZ3JhdGlvbiBvciBkb25lIGF0IGluaXQgIVxuICAgICAgICAgICAgICAvLyBXYXMgZG9uZSB3aGVuIHNraWxsIHZhbHVlIHdhcyBjaGFuZ2VkIHRvIGJhc2UgKyBhZGp1c3RlbWVudFxuICAgICAgICAgICAgICBjb25zdCBleHAgPSBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgICAgbGV0IHVwZGF0ZWRFeHAgPSBleHAgKyBwYXJzZUludChpdGVtLnN5c3RlbS52YWx1ZSkgLSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgICBpZiAodXBkYXRlZEV4cCA8PSAwKSB1cGRhdGVkRXhwID0gbnVsbFxuICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXG4gICAgICAgICAgICAgICAgYFtDT0M3XSBVcGRhdGluZyBza2lsbCAke3NraWxsLm5hbWV9IGV4cGVyaWVuY2UuIEV4cGVyaWVuY2UgbWlzc2luZzogJHt1cGRhdGVkRXhwfWBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIF9pZDogaXRlbS5faWQsXG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiB1cGRhdGVkRXhwLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS52YWx1ZSc6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgIGlmICghaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMpIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzID0ge31cbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSA9IHVwZGF0ZWRFeHBcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0ucmF3VmFsdWUgPSBza2lsbC5yYXdWYWx1ZVxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS52YWx1ZSA9IHNraWxsLnZhbHVlIC8vIEFDVElWRV9FRkZFQ1QgbmVjZXNzYXJ5IHRvIGFwcGx5IGVmZmVjdHNcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnZhbHVlID0gc2tpbGwudmFsdWUgLy8gQUNUSVZFX0VGRkVDVCBuZWNlc3NhcnkgdG8gYXBwbHkgZWZmZWN0c1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5yYXdWYWx1ZSA9IHNraWxsLnJhd1ZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxpc3QgPSBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXVxuICAgICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgICBsaXN0ID0gW11cbiAgICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXSA9IGxpc3RcbiAgICAgICAgfVxuICAgICAgICBsaXN0LnB1c2goaXRlbSlcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBpdGVtVHlwZSBpbiBzaGVldERhdGEuaXRlbXNCeVR5cGUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW1UeXBlXS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgIH1cblxuICAgICAgLy8gcmVkb25kYW50IGF2ZWMgbWF0cmljZSBpdGVtYnl0eXBlXG4gICAgICBzaGVldERhdGEuc2tpbGxzID0gc2hlZXREYXRhLml0ZW1zXG4gICAgICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdza2lsbCcpXG4gICAgICAgIC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgICAgc2hlZXREYXRhLm1lbGVlU2tpbGxzID0gc2hlZXREYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+XG4gICAgICAgICAgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSB0cnVlICYmXG4gICAgICAgICAgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgPT09IHRydWVcbiAgICAgIClcbiAgICAgIHNoZWV0RGF0YS5yYW5nZVNraWxscyA9IHNoZWV0RGF0YS5za2lsbHMuZmlsdGVyKFxuICAgICAgICBza2lsbCA9PlxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gPT09IHRydWVcbiAgICAgIClcblxuICAgICAgY29uc3QgY2J0U2tpbGxzID0gc2hlZXREYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+IHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZVxuICAgICAgKVxuICAgICAgaWYgKGNidFNraWxscykge1xuICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGNidFNraWxscykge1xuICAgICAgICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbHNbc2tpbGwuX2lkXSA9IHNraWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgd2VhcG9ucyA9IHNoZWV0RGF0YS5pdGVtc0J5VHlwZS53ZWFwb25cblxuICAgICAgaWYgKHdlYXBvbnMpIHtcbiAgICAgICAgZm9yIChjb25zdCB3ZWFwb24gb2Ygd2VhcG9ucykge1xuICAgICAgICAgIHdlYXBvbi51c2VzQWx0ZXJuYXRlU2tpbGwgPVxuICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcbiAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5icnN0ID09PSB0cnVlXG4gICAgICAgICAgaWYgKCF3ZWFwb24uc3lzdGVtLmFtbW8pIHdlYXBvbi5zeXN0ZW0uYW1tbyA9IDBcblxuICAgICAgICAgIHdlYXBvbi5za2lsbFNldCA9IHRydWVcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4ubmFtZSA9ICcnO1xuICAgICAgICAgIC8vIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi52YWx1ZSA9IDA7XG4gICAgICAgICAgLy8gd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgPSAnJztcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYudmFsdWUgPSAwO1xuICAgICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQgPT09ICcnKSB7XG4gICAgICAgICAgICAvLyBUT0RPIDogc2kgbCdJRCBuJ2VzdHMgcGFzIGTDqWZpbmllIG1haXMgcXUndW4gbm9tIGEgw6l0w6kgZG9ubsOpLCB1dGlsaXNlciBjZSBub20gZXQgdGFudGVyIGRlIHJldHJvdXZlciBsZSBza2lsbFxuICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVE9ETyA6IGF2YW50IGQnYXNzaWdlciBsZSBza2lsbCB2w6lyaWZpZXIgcXUnaWwgZXhpc3RlIHRvdWpvdXJzLlxuICAgICAgICAgICAgLy8gc2kgaWwgbidleGlzdGUgcGx1cyBpbCBmYXV0IGxlIHJldHJvdXZlciBvdSBwYXNzZXIgc2tpbGxzZXQgYSBmYWxzZS5cbiAgICAgICAgICAgIGlmIChzaGVldERhdGEuY29tYmF0U2tpbGxzW3dlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZF0pIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldCh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lID0gc2tpbGwuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4udmFsdWUgPSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5jb21iYXRTa2lsbHNbd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgPSBza2lsbC5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LnZhbHVlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uX3Byb3BlcnRpZXMgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0ge31cbiAgICAgICAgICAgIHByb3BlcnR5LmlkID0ga2V5XG4gICAgICAgICAgICBwcm9wZXJ0eS5uYW1lID0gdmFsdWVcbiAgICAgICAgICAgIHByb3BlcnR5LnZhbHVlID0gd2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uX3Byb3BlcnRpZXMucHVzaChwcm9wZXJ0eSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzaGVldERhdGEud2VhcG9uc1t3ZWFwb24uX2lkXSA9IHdlYXBvblxuICAgICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkgc2hlZXREYXRhLnJhbmdlV3BuLnB1c2god2VhcG9uKVxuICAgICAgICAgIGVsc2Ugc2hlZXREYXRhLm1lbGVlV3BuLnB1c2god2VhcG9uKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gdGhpcy50b2tlblxuICAgICAgc2hlZXREYXRhLnRva2VuSWQgPSB0b2tlblxuICAgICAgICA/IGAke3Rva2VuLnBhcmVudD8uaWQgPyB0b2tlbi5wYXJlbnQuaWQgOiAnVE9LRU4nfS4ke3Rva2VuLmlkfWBcbiAgICAgICAgOiBudWxsIC8vIFJFRkFDVE9SSU5HICgyKVxuXG4gICAgICBzaGVldERhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhID0gZmFsc2VcbiAgICAgIGlmIChzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hhcmFjdGVyaXN0aWMgb2YgT2JqZWN0LnZhbHVlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUpIGNoYXJhY3RlcmlzdGljLmVkaXRhYmxlID0gdHJ1ZVxuICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmhhcmQgPSBNYXRoLmZsb29yKGNoYXJhY3RlcmlzdGljLnZhbHVlIC8gMilcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5leHRyZW1lID0gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpYy52YWx1ZSAvIDUpXG5cbiAgICAgICAgICAvLyBJZiBubyB2YWx1ZSAmJiBubyBmb3JtdWxhIGRvbid0IGRpc3BsYXkgY2hhcmFjLlxuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUgJiYgIWNoYXJhY3RlcmlzdGljLmZvcm11bGEpIHtcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmRpc3BsYXkgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5kaXNwbGF5ID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGlmIGFueSBjaGFyYWN0ZXJpc3RpYyBoYXMgbm8gdmFsdWUgYnV0IGhhcyBhIGZvcm11bGEuXG4gICAgICAgICAgaWYgKCFjaGFyYWN0ZXJpc3RpYy52YWx1ZSAmJiBjaGFyYWN0ZXJpc3RpYy5mb3JtdWxhKSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2hlZXREYXRhLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSA9XG4gICAgICAgICAgICBzaGVldERhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhIHx8XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvciBjb21wYXQgd2l0aCBwcmV2aW91cyBjaGFyYWN0ZXJzIHRlc3QgaWYgYXV0byBpcyBkZWZpbmllZCwgaWYgbm90IHdlIGRlZmluZSBpdFxuICAgIGlmICghWyd2ZWhpY2xlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKHRoaXMuYWN0b3IudHlwZSkpIHtcbiAgICAgIGNvbnN0IGF1dG8gPSB0aGlzLmFjdG9yLmNoZWNrVW5kZWZpbmVkQXV0bygpXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHNoZWV0RGF0YS5kYXRhLnN5c3RlbSwgYXV0bylcbiAgICB9IGVsc2Uge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuaHAuYXV0byA9IGZhbHNlXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLnNhbi5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1vdi5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLmRiLmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuYnVpbGQuYXV0byA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlIDwgMCkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPSBudWxsXG4gICAgaWYgKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA8IDApIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA9IG51bGxcblxuICAgIGlmICghWyd2ZWhpY2xlJ10uaW5jbHVkZXModGhpcy5hY3Rvci50eXBlKSkge1xuICAgICAgaWYgKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkgaW5zdGFuY2VvZiBBcnJheSAmJiBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5Lmxlbmd0aCkge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5WzBdLmlzRmlyc3QgPSB0cnVlXG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHlbc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeS5sZW5ndGggLSAxXS5pc0xhc3QgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID0gZmFsc2VcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9ucyA9IGZhbHNlXG5cbiAgICBzaGVldERhdGEuaGFzQ29uZGl0aW9ucyA9XG4gICAgICB0aGlzLmFjdG9yLmVmZmVjdHMuc2l6ZSA+IDAgfHxcbiAgICAgICh0eXBlb2YgdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucykuZmlsdGVyKFxuICAgICAgICAgIGNvbmRpdGlvbiA9PiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zW2NvbmRpdGlvbl0udmFsdWVcbiAgICAgICAgKS5sZW5ndGggPiAwKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLy8gc3RhdGljIHBhcnNlRm9ybXVsYSAoZm9ybXVsYSkge1xuICAvLyAgIGxldCBwYXJzZWRGb3JtdWxhID0gZm9ybXVsYVxuICAvLyAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAvLyAgICAgcGFyc2VkRm9ybXVsYSA9IHBhcnNlZEZvcm11bGEucmVwbGFjZShrZXksIHZhbHVlKVxuICAvLyAgIH1cbiAgLy8gICByZXR1cm4gcGFyc2VkRm9ybXVsYVxuICAvLyB9XG5cbiAgZ2V0IHRva2VuS2V5ICgpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdERVBSRUNBVEVEIFNIT1VMRCBOT1QgSEFQUEVOIScpXG4gICAgdGhyb3cgbmV3IEVycm9yKCdiYXNlLmpzIGdldCB0b2tlbktleSgpOiBERVBSRUNBVEVEIFNIT1VMRCBOT1QgSEFQUEVOIScpXG4gICAgLy8gaWYoIHRoaXMudG9rZW4pIHJldHVybiBgJHt0aGlzLnRva2VuLnNjZW5lPy5faWQ/dGhpcy50b2tlbi5zY2VuZS5faWQ6J1RPS0VOJ30uJHt0aGlzLnRva2VuLmRhdGEuX2lkfWA7ICAvL1JFRkFDVE9SSU5HICgyKVxuICAgIC8vIHJldHVybiB0aGlzLmFjdG9yLmlkO1xuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHtcbiAgICAvLyB0aGlzLmFjdG9yLmxvY2tlZCA9IHRydWU7XG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCcuc2VjdGlvbi1oZWFkZXInKS5jbGljayh0aGlzLl9vblNlY3Rpb25IZWFkZXIuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtcy1oZWFkZXInKS5jbGljayh0aGlzLl9vbkl0ZW1IZWFkZXIuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pbnZlbnRvcnktaGVhZGVyJykuY2xpY2sodGhpcy5fb25JbnZlbnRvcnlIZWFkZXIuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yZWFkLW9ubHknKS5kYmxjbGljayh0aGlzLl90b2dnbGVSZWFkT25seS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmFkZC1hbW1vJykuY2xpY2sodGhpcy5fb25BZGRBbW8uYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yZWxvYWQtd2VhcG9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZWxvYWRXZWFwb24oZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLnJlbG9hZC13ZWFwb24nKS5vbignY29udGV4dG1lbnUnLCBldmVudCA9PiB0aGlzLl9vblJlbG9hZFdlYXBvbihldmVudCkpXG5cbiAgICAvLyBPd25lciBPbmx5IExpc3RlbmVyc1xuICAgIGlmICh0aGlzLmFjdG9yLmlzT3duZXIgJiYgISh0aGlzLmFjdG9yLmNvbXBlbmRpdW0/LmxvY2tlZCA/PyBmYWxzZSkpIHtcbiAgICAgIGh0bWwuZmluZCgnLmxvY2snKS5jbGljayh0aGlzLl9vbkxvY2tDbGlja2VkLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5mbGFnJykuY2xpY2sodGhpcy5fb25GbGFnQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuZm9ybXVsYScpLmNsaWNrKHRoaXMuX29uRm9ybXVsYUNsaWNrZWQuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmF1dG8tdG9nZ2xlJykuY2xpY2sodGhpcy5fb25BdXRvVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgLy8gT3duZXIgT25seSwgbm90IGF2YWlsYWJsZSBmcm9tIGNvbXBlbmRpdW1cbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyICYmIHR5cGVvZiB0aGlzLmFjdG9yLmNvbXBlbmRpdW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgICAgaWYgKCF0aGlzLm1lbnVzKSB0aGlzLm1lbnVzID0gW11cblxuICAgICAgICBjb25zdCByb2xsTWVudSA9IHtcbiAgICAgICAgICBpZDogJ3NraWxsLXJvbGwnLFxuICAgICAgICAgIGNsYXNzZXM6ICdyb2xsLW1lbnUnLFxuICAgICAgICAgIHNlY3Rpb246IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2xhc3NlczogJ21haW4nLFxuICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAncm9sbCcsIGxhYmVsOiAnUm9sbCcgfSxcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ29wcG9zZWQtcm9sbCcsIGxhYmVsOiAnT3Bwb3NlZCByb2xsJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29tYmluZWQtcm9sbCcsIGxhYmVsOiAnQ29tYmluZWQgcm9sbCcgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjbGFzc2VzOiAna2VlcGVyJyxcbiAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ2dtJyxcbiAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBsYWJlbDogeyBpY29uOiAnZmFzIGZhLWxpbmsnLCB0ZXh0OiAnTGluaycgfSxcbiAgICAgICAgICAgICAgICAgIHN1Yk1lbnU6IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2xpbmstdG9vbCcsIGxhYmVsOiAnT3BlbiBpbiBsaW5rIHRvb2wnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZW5kLWNoYXQnLCBsYWJlbDogJ1NlbmQgdG8gY2hhdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvcHktdG8tY2xpcGJvYXJkJywgbGFiZWw6ICdDb3B5IHRvIGNsaXAtYm9hcmQnIH1cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgeyBhY3Rpb246ICdyZXF1ZXN0LXJvbGwnLCBsYWJlbDogJ1JlcXVlc3Qgcm9sbCcgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2FuTWVudSA9IHtcbiAgICAgICAgICBpZDogJ3Nhbi1yb2xsJyxcbiAgICAgICAgICBjbGFzc2VzOiAncm9sbC1tZW51JyxcbiAgICAgICAgICBzZWN0aW9uOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNsYXNzZXM6ICdtYWluJyxcbiAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2VuY291bnRlcicsIGxhYmVsOiAnRW5jb3VudGVyJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAncm9sbCcsIGxhYmVsOiAnUm9sbCcgfSxcbiAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ29wcG9zZWQtcm9sbCcsIGxhYmVsOiAnT3Bwb3NlZCByb2xsJyB9LFxuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29tYmluZWQtcm9sbCcsIGxhYmVsOiAnQ29tYmluZWQgcm9sbCcgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjbGFzc2VzOiAna2VlcGVyJyxcbiAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3RydXN0ZWQnLFxuICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAncmVxdWVzdC1yb2xsJywgbGFiZWw6ICdSZXF1ZXN0IHJvbGwnIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgbGFiZWw6IHsgaWNvbjogJ2ZhcyBmYS1saW5rJywgdGV4dDogJ0xpbmsnIH0sXG4gICAgICAgICAgICAgICAgICBzdWJNZW51OiB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdsaW5rLXRvb2wnLCBsYWJlbDogJ09wZW4gaW4gbGluayB0b29sJyB9LFxuICAgICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnc2VuZC1jaGF0JywgbGFiZWw6ICdTZW5kIHRvIGNoYXQnIH0sXG4gICAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb3B5LXRvLWNsaXBib2FyZCcsIGxhYmVsOiAnQ29weSB0byBjbGlwLWJvYXJkJyB9LFxuICAgICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay1lbmNvdW50ZXInLCBsYWJlbDogJ0VuY291bnRlcicgfVxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgXVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgcm9sbENvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICAgIHJvbGxDb250ZXh0TWVudS5iaW5kKHJvbGxNZW51LCBodG1sLCB0aGlzLl9vbkNvbnRleHRNZW51Q2xpY2suYmluZCh0aGlzKSlcbiAgICAgICAgdGhpcy5tZW51cy5wdXNoKHJvbGxDb250ZXh0TWVudSlcblxuICAgICAgICBjb25zdCBzYW5Db250ZXh0TWVudSA9IG5ldyBDb0M3Q29udGV4dE1lbnUoKVxuICAgICAgICBzYW5Db250ZXh0TWVudS5iaW5kKHNhbk1lbnUsIGh0bWwsIHRoaXMuX29uQ29udGV4dE1lbnVDbGljay5iaW5kKHRoaXMpKVxuICAgICAgICB0aGlzLm1lbnVzLnB1c2goc2FuQ29udGV4dE1lbnUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBodG1sXG4gICAgICAgICAgLmZpbmQoJy5jaGFyYWN0ZXJpc3RpYy1sYWJlbCcpXG4gICAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuc2tpbGwtbmFtZS5yb2xsYWJsZScpXG4gICAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsLnJvbGxhYmxlJylcbiAgICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgICAgfVxuXG4gICAgICAvLyBjb250ZXh0IG1lbnUgYmluZFxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3Rlcml0aWNUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJykuY2xpY2sodGhpcy5fb25Sb2xsU2tpbGxUZXN0LmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5za2lsbC1pbWFnZScpLmNsaWNrKHRoaXMuX29uUm9sbFNraWxsVGVzdC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbC5yb2xsYWJsZScpXG4gICAgICAgIC5jbGljayh0aGlzLl9vblJvbGxBdHRyaWJUZXN0LmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy50b2tlbi1kcmFnLWhhbmRsZScpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgdGhpcy5fb25EcmFnVG9rZW5TdGFydC5iaW5kKHRoaXMpKVxuXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0NoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwnKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0F0dHJpYnV0ZShldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuc2FuLWNoZWNrJylcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdTYW5DaGVjayhldmVudCkpXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tbmFtZS5yb2xsYWJsZScpXG4gICAgICAgIC5jb250ZXh0bWVudSh0aGlzLl9vbk9wcG9zZWRSb2xsLmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yb2xsLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdmVyYWdlLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuXG4gICAgICAvLyBTdGF0dXMgbW9uaXRvclxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNIHx8IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YXR1c1BsYXllckVkaXRhYmxlJykpIHtcbiAgICAgICAgaHRtbC5maW5kKCcucmVzZXQtY291bnRlcicpLmNsaWNrKHRoaXMuX29uUmVzZXRDb3VudGVyLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLmNvbmRpdGlvbi1tb25pdG9yJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25Db25kaXRpb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbC5maW5kKCcuaXMtZHlpbmcnKS5jbGljayh0aGlzLmhlYWwuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbC5maW5kKCcuaXMtZGVhZCcpLmNsaWNrKHRoaXMucmV2aXZlLmJpbmQodGhpcykpXG4gICAgICB9XG5cbiAgICAgIGh0bWwuZmluZCgnLmR5aW5nLWNoZWNrJykuY2xpY2sodGhpcy5jaGVja0ZvckRlYXRoLmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWwuZmluZCgnLml0ZW0gLml0ZW0taW1hZ2UnKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1Sb2xsKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tbmFtZS5yb2xsYWJsZScpXG4gICAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbldlYXBvblJvbGwoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLml0ZW0tbmFtZS5lZmZlY3QtbmFtZScpXG4gICAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkVmZmVjdChldmVudCkpXG4gICAgICAvLyBodG1sXG4gICAgICAvLyAgIC5maW5kKCcuaXRlbS1uYW1lLmVmZmVjdC1uYW1lJylcbiAgICAgIC8vICAgLmtleWRvd24oKGV2ZW50KSA9PiB7XG4gICAgICAvLyAgICAgaWYgKGlzQ3RybEtleShldmVudCkpIHtcbiAgICAgIC8vICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgncG9pbnRlcicpXG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICB9KVxuICAgICAgLy8gaHRtbFxuICAgICAgLy8gICAuZmluZCgnLml0ZW0tbmFtZS5lZmZlY3QtbmFtZScpXG4gICAgICAvLyAgIC5rZXlkb3duKChldmVudCkgPT4ge1xuICAgICAgLy8gICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XG4gICAgICAvLyAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3BvaW50ZXInKVxuICAgICAgLy8gICAgIH1cbiAgICAgIC8vICAgfSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tc2tpbGwucm9sbGFibGUnKVxuICAgICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25XZWFwb25Ta2lsbFJvbGwoZXZlbnQpKVxuICAgICAgaHRtbC5vbignY2xpY2snLCAnLndlYXBvbi1kYW1hZ2UnLCB0aGlzLl9vbldlYXBvbkRhbWFnZS5iaW5kKHRoaXMpKVxuXG4gICAgICBjb25zdCB3aGVlbElucHV0cyA9IGh0bWwuZmluZCgnLmF0dHJpYnV0ZS12YWx1ZScpXG4gICAgICBmb3IgKGNvbnN0IHdoZWVsSW5wdXQgb2Ygd2hlZWxJbnB1dHMpIHtcbiAgICAgICAgd2hlZWxJbnB1dC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGV2ZW50ID0+IHRoaXMuX29uV2hlZWwoZXZlbnQpLCB7XG4gICAgICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sLmZpbmQoJy5zaG93LWRldGFpbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0tcG9wdXAnKS5jbGljayh0aGlzLl9vbkl0ZW1Qb3B1cC5iaW5kKHRoaXMpKVxuXG4gICAgLy8gVXBkYXRlIEludmVudG9yeSBJdGVtXG4gICAgaHRtbC5maW5kKCcuc2hvdy1kZXRhaWwnKS5kYmxjbGljayhldmVudCA9PiB0aGlzLl9vblJlbmRlckl0ZW1TaGVldChldmVudCkpXG4gICAgaHRtbC5maW5kKCcuaXRlbS1lZGl0JykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZW5kZXJJdGVtU2hlZXQoZXZlbnQpKVxuXG4gICAgLy8gRGVsZXRlIEludmVudG9yeSBJdGVtXG4gICAgaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayhhc3luYyBldiA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoZXYuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgICAgY29uc3QgaXRlbVRvRGVsZXRlID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJyksIHtcbiAgICAgICAgc3RyaWN0OiB0cnVlXG4gICAgICB9KVxuICAgICAgYXdhaXQgaXRlbVRvRGVsZXRlLmRlbGV0ZSgpXG4gICAgICBsaS5zbGlkZVVwKDIwMCwgKCkgPT4gdGhpcy5yZW5kZXIoZmFsc2UpKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtaXRlbScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBzd2l0Y2ggKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Jvb2snOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlCb29rKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlJdGVtKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U2tpbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc3BlbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTcGVsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7fVxuICAgICAgICAgICAgaWYgKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5tZWxlZSkge1xuICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm1lbGVlID0gdHJ1ZVxuICAgICAgICAgICAgfSBlbHNlIGlmIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucm5nZCkge1xuICAgICAgICAgICAgICBwcm9wZXJ0aWVzLnJuZ2QgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5V2VhcG9uKGV2LCBwcm9wZXJ0aWVzKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0pXG5cbiAgICAvLyBodG1sLmZpbmQoJy5jbGVhbi1za2lsbC1saXN0JykuY2xpY2soKCkgPT4ge1xuICAgIC8vICAgdGhpcy5hY3Rvci5jbGVhblNraWxscygpXG4gICAgLy8gfSlcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tdHJhZGUnKS5jbGljayh0aGlzLl9vblRyYWRlSXRlbS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLW5ldy1zZWN0aW9uJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5hY3Rvci5jcmVhdGVCaW9TZWN0aW9uKClcbiAgICAgIHRoaXMucmVuZGVyKClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXNlY3Rpb24nKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IuZGVsZXRlQmlvU2VjdGlvbihpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubW92ZS1zZWN0aW9uLXVwJykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLm1vdmVCaW9TZWN0aW9uVXAoaW5kZXgpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLm1vdmUtc2VjdGlvbi1kb3duJykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLm1vdmVCaW9TZWN0aW9uRG93bihpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuZGV2ZWxvcG1lbnQtZmxhZycpLmRibGNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICApXG4gICAgICBpdGVtLnRvZ2dsZUl0ZW1GbGFnKCdkZXZlbG9wZW1lbnQnKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5vY2N1cGF0aW9uLXNraWxsLWZsYWcuY2xpY2thYmxlJykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIClcbiAgICAgIGl0ZW0udG9nZ2xlSXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5hcmNoZXR5cGUtc2tpbGwtZmxhZy5jbGlja2FibGUnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgKVxuICAgICAgaXRlbS50b2dnbGVJdGVtRmxhZygnYXJjaGV0eXBlJylcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuc2tpbGwtZGV2ZWxvcGVtZW50JykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgdGhpcy5hY3Rvci5kZXZlbG9wZW1lbnRQaGFzZShldmVudC5zaGlmdEtleSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubHVjay1kZXZlbG9wbWVudCcpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGlmICghZXZlbnQuZGV0YWlsIHx8IGV2ZW50LmRldGFpbCA9PT0gMSkge1xuICAgICAgICB0aGlzLmFjdG9yLmRldmVsb3BMdWNrKGV2ZW50LnNoaWZ0S2V5KVxuICAgICAgfVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5jbGVhcl9jb25kaXRpb25zJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBkaXNhYmxlID0ge31cbiAgICAgICAgZm9yIChjb25zdCBjb25kaXRpb24gaW4gdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zW2NvbmRpdGlvbl0udmFsdWUgIT09XG4gICAgICAgICAgICAgICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zW2NvbmRpdGlvbl0udmFsdWUgPT09IHRydWVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGRpc2FibGVbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9ufS52YWx1ZWBdID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGRpc2FibGUpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZShkaXNhYmxlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5hY3Rvci5lZmZlY3RzLm1hcChlZmZlY3QgPT4gZWZmZWN0LmlkKVxuICAgICAgaWYgKGVmZmVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmFjdG9yLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBlZmZlY3RzKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHVzZWQgZm9yIGRldiBwdXJwb3NlcyBvbmx5ICFcbiAgICAgKi9cbiAgICBodG1sLmZpbmQoJy50ZXN0LXRyaWdnZXInKS5jbGljayhhc3luYyBldmVudCA9PiB7XG4gICAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKSkgcmV0dXJuIG51bGxcbiAgICAgIC8vIGF3YWl0IEl0ZW0uY3JlYXRlKHtcbiAgICAgIC8vICAgbmFtZTogJ19fQ29DN0ludGVybmFsSXRlbV9fJyxcbiAgICAgIC8vICAgdHlwZTogJ2l0ZW0nXG4gICAgICAvLyB9KVxuICAgICAgLy8gY29uc3QgZWZmZWN0cyA9IGF3YWl0IGl0ZW0uY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgIC8vICAge1xuICAgICAgLy8gICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRWZmZWN0TmV3JyksXG4gICAgICAvLyAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXG4gICAgICAvLyAgICAgb3JpZ2luOiBudWxsLFxuICAgICAgLy8gICAgICdkdXJhdGlvbi5yb3VuZHMnOiB1bmRlZmluZWQsXG4gICAgICAvLyAgICAgZGlzYWJsZWQ6IHRydWVcbiAgICAgIC8vICAgfVxuICAgICAgLy8gXSlcbiAgICAgIC8vIGNvbnN0IGVmZmVjdCA9IGVmZmVjdHNbMF1cbiAgICAgIC8vIGF3YWl0IGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggJ2VmZmVjdCBjcmVhdGVkICEnKVxuICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdlZmZlY3QgY3JlYXRlZCAhJylcbiAgICB9KVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcFNraWxsRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlci5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXR0cmlidXRlRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuYXV0by10b2dnbGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXV0b0VudGVyLmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tY29udHJvbC5kZXZlbG9wbWVudC1mbGFnJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudC5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG5cbiAgICAvLyBBY3RpdmUgRWZmZWN0c1xuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuYWN0b3IpKVxuICB9XG5cbiAgdG9vbFRpcFNraWxsRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXNDb21iYXQgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xhc3NMaXN0Py5jb250YWlucyhcbiAgICAgICAgICAgICdjb21iYXQnXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHNraWxsSWQgPSBpdGVtLmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBzaGVldC5hY3Rvci5pdGVtcy5nZXQoc2tpbGxJZClcbiAgICAgICAgICAgIGxldCB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgaXNDb21iYXQgPyAnQ29DNy5Ub29sVGlwQ29tYmF0JyA6ICdDb0M3LlRvb2xUaXBTa2lsbCcsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBza2lsbDogc2tpbGwubmFtZSxcbiAgICAgICAgICAgICAgICByZWd1bGFyOiBza2lsbC52YWx1ZSxcbiAgICAgICAgICAgICAgICBoYXJkOiBNYXRoLmZsb29yKHNraWxsLnZhbHVlIC8gMiksXG4gICAgICAgICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcihza2lsbC52YWx1ZSAvIDUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICB0b29sVGlwICtcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcbiAgICAgICAgICAgICAgICAgICAgc2hlZXQuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNoZWV0LmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBDaGFyYWN0ZXJpc3RpY0VudGVyIChldmVudCkge1xuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXG4gICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNoYXIgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLmNoYXItYm94JylcbiAgICAgICAgICBpZiAodHlwZW9mIGNoYXIgIT09ICd1bmRlZmluZWQnICYmICEhY2hhcikge1xuICAgICAgICAgICAgY29uc3QgY2hhcklkID0gY2hhci5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJpc3RpYyA9IHNoZWV0LmFjdG9yLmNoYXJhY3RlcmlzdGljc1tjaGFySWRdXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsJywge1xuICAgICAgICAgICAgICBza2lsbDogY2hhcmFjdGVyaXN0aWMubGFiZWwsXG4gICAgICAgICAgICAgIHJlZ3VsYXI6IGNoYXJhY3RlcmlzdGljLnZhbHVlID8/IDAsXG4gICAgICAgICAgICAgIGhhcmQ6IGNoYXJhY3RlcmlzdGljLmhhcmQgPz8gMCxcbiAgICAgICAgICAgICAgZXh0cmVtZTogY2hhcmFjdGVyaXN0aWMuZXh0cmVtZSA/PyAwXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEF0dHJpYnV0ZUVudGVyIChldmVudCkge1xuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXG4gICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGF0dHJpYiA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuYXR0cmlidXRlJylcbiAgICAgICAgICBpZiAodHlwZW9mIGF0dHJpYiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZUlkID0gYXR0cmliLmRhdGFzZXQuYXR0cmliXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9ICcnXG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gc2hlZXQuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbYXR0cmlidXRlSWRdXG4gICAgICAgICAgICBzd2l0Y2ggKGF0dHJpYnV0ZUlkKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ2xjayc6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsJywge1xuICAgICAgICAgICAgICAgICAgc2tpbGw6IGF0dHJpYnV0ZXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICByZWd1bGFyOiBhdHRyaWJ1dGVzLnZhbHVlID8/IDAsXG4gICAgICAgICAgICAgICAgICBoYXJkOiBNYXRoLmZsb29yKChhdHRyaWJ1dGVzLnZhbHVlID8/IDApIC8gMiksXG4gICAgICAgICAgICAgICAgICBleHRyZW1lOiBNYXRoLmZsb29yKChhdHRyaWJ1dGVzLnZhbHVlID8/IDApIC8gNSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgICAgICAgICAgdG9vbFRpcCA9XG4gICAgICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICBvdGhlcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXQuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnZGInOlxuICAgICAgICAgICAgICAgIHRvb2xUaXAgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcERCJylcbiAgICAgICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgJ3Nhbic6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNhbml0eScsIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsOiAnU2FuaXR5JyxcbiAgICAgICAgICAgICAgICAgIHJlZ3VsYXI6IGF0dHJpYnV0ZXMudmFsdWUgPz8gMCxcbiAgICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyAyKSxcbiAgICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyA1KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb2xUaXBLZWVwZXJTYW5pdHknKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJycpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBBdXRvRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHRvb2xUaXAgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcEF1dG9Ub2dnbGUnKVxuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBGbGFnRm9yRGV2ZWxvcG1lbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuaXRlbScpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGl0ZW0uZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHNoZWV0LmFjdG9yLml0ZW1zLmdldChza2lsbElkKVxuICAgICAgICAgICAgY29uc3QgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsRmxhZ1RvZ2dsZScsIHtcbiAgICAgICAgICAgICAgc3RhdHVzOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzLmRldmVsb3BlbWVudFxuICAgICAgICAgICAgICAgICAgPyAnQ29DNy5Ub29sVGlwU2tpbGxGbGFnZ2VkJ1xuICAgICAgICAgICAgICAgICAgOiAnQ29DNy5Ub29sVGlwU2tpbGxVbmZsYWdnZWQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgX29uQ29udGV4dE1lbnVDbGljayAoZXZlbnQsIHRhcmdldCkge1xuICAgIGNvbnN0IHRhcmdldFR5cGUgPSB0YXJnZXQuZGF0YXNldD8udGFyZ2V0VHlwZVxuICAgIGNvbnN0IHJvbGxPcHRpb25zID0ge1xuICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH1cbiAgICBzd2l0Y2ggKHRhcmdldFR5cGUpIHtcbiAgICAgIGNhc2UgKCdza2lsbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTExcbiAgICAgICAgcm9sbE9wdGlvbnMuc2tpbGxJZCA9IHRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcblxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2NoYXJhY3RlcmlzdGljJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICByb2xsT3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9IHRhcmdldC5jbG9zZXN0KCcuY2hhci1ib3gnKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgKCdhdHRyaWJ1dGUnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICByb2xsT3B0aW9ucy5hdHRyaWJ1dGUgPSB0YXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAoJ3JvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ29wcG9zZWQtcm9sbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2NvbWJpbmVkLXJvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgncmVxdWVzdC1yb2xsJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxcbiAgICAgICAgcm9sbE9wdGlvbnMucHJldmVudFN0YW5kYnkgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2xpbmstdG9vbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5vcGVuTGlua1Rvb2wgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnc2VuZC1jaGF0Jyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NoYXQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnY29weS10by1jbGlwYm9hcmQnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2xpbmstZW5jb3VudGVyJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdlbmNvdW50ZXInKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICAgIHJvbGxPcHRpb25zLmZhc3RGb3J3YXJkID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHJvbGxPcHRpb25zKVxuICB9XG5cbiAgX29uUmVuZGVySXRlbVNoZWV0IChldmVudCkge1xuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25UcmFkZUl0ZW0gKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgbGV0IGNvbnRlbnQgPSAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0VXNlclRvR2l2ZVRvJylcbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgYWN0b3JGcm9tOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgc2NlbmU6IG51bGwsXG4gICAgICBhY3RvclRvOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgaXRlbTogaXRlbS5pZFxuICAgIH1cbiAgICBpZiAodGhpcy50b2tlbj8uYWN0b3IpIHtcbiAgICAgIG1lc3NhZ2UuYWN0b3JGcm9tID0gdGhpcy50b2tlbi5pZFxuICAgICAgbWVzc2FnZS5zY2VuZSA9IHRoaXMudG9rZW4ucGFyZW50LmlkXG4gICAgfVxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihlID0+IHtcbiAgICAgIGlmICghWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKGUudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hY3Rvci5pZCA9PT0gZS5pZCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGxldCB2aXNpYmxlID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUub3duZXJzaGlwKSkge1xuICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnIHx8IGsgPT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICAgIHZpc2libGUgPSB2aXNpYmxlIHx8IHYgIT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTk9ORVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmlzaWJsZVxuICAgIH0pXG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgY29udGVudCA9XG4gICAgICAgIGNvbnRlbnQgKyAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhY3Rvci5pZCArICdcIj4nICsgYWN0b3IubmFtZSArICc8L29wdGlvbj4nXG4gICAgfVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzwvc2VsZWN0PjwvZm9ybT48L3A+J1xuICAgIG1lc3NhZ2UuYWN0b3JUbyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVRpdGxlU2VsZWN0VXNlclRvR2l2ZVRvJyksXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICBjb25maXJtOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ2NvbmZpcm0nLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgICBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtdHJhZGVpdGVtdG8nLCBtZXNzYWdlKVxuICB9XG5cbiAgX29uRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIHN1cGVyLl9vbkRyYWdTdGFydChldmVudClcbiAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgY29uc3QgZHJhZ0RhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBkcmFnRGF0YS50b2tlblV1aWQgPSB0aGlzLnRva2VuLnV1aWRcbiAgICAgIGRyYWdEYXRhLnRva2VuSWQgPSB0aGlzLnRva2VuLmlkXG4gICAgICBkcmFnRGF0YS5zY2VuZUlkID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICB0eXBlOiAnQ29DN0xpbmsnLFxuICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgIG5hbWU6IGJveC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljLFxuICAgICAgaWNvbjogbnVsbCxcbiAgICAgIGRvY3VtZW50OiB7XG4gICAgICAgIHR5cGU6IHRoaXMuZG9jdW1lbnQudHlwZSxcbiAgICAgICAgdXVpZDogdGhpcy5kb2N1bWVudC51dWlkXG4gICAgICB9XG4gICAgfVxuXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgX29uRHJhZ0F0dHJpYnV0ZSAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnYXR0cmlidXRlJyxcbiAgICAgIGNoZWNrOiAnY2hlY2snLFxuICAgICAgdHlwZTogJ0NvQzdMaW5rJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBuYW1lOiBib3guZGF0YXNldC5hdHRyaWIsXG4gICAgICBpY29uOiBudWxsLFxuICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgdHlwZTogdGhpcy5kb2N1bWVudC50eXBlLFxuICAgICAgICB1dWlkOiB0aGlzLmRvY3VtZW50LnV1aWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBfb25EcmFnU2FuQ2hlY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgc2FuTWluID0gZXZlbnQuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yKCcuc2FuLXZhbHVlLnBhc3MnKVxuICAgIGNvbnN0IHNhbk1heCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnNhbi12YWx1ZS5mYWlsZWQnKVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBDb0M3VHlwZTogJ2xpbmsnLFxuICAgICAgbGlua1R5cGU6ICdjb2M3LWxpbmsnLFxuICAgICAgY2hlY2s6ICdzYW5sb3NzJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBzYW5NaW46IHNhbk1pbi5pbm5lclRleHQsXG4gICAgICBzYW5NYXg6IHNhbk1heC5pbm5lclRleHQsXG4gICAgICBpY29uOiBudWxsLFxuICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgdHlwZTogdGhpcy5kb2N1bWVudC50eXBlLFxuICAgICAgICB1dWlkOiB0aGlzLmRvY3VtZW50LnV1aWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCkge1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgaWYgKGRhdGFTdHJpbmcgPT09ICcnKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICBpZiAoZGF0YS50eXBlID09PSAnQ29DN0xpbmsnKSB7XG4gICAgICBpZiAoZGF0YS5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QpIHtcbiAgICAgICAgQ29DN0xpbmsuX29uTGlua0FjdG9yQ2xpY2sodGhpcy5hY3RvciwgZGF0YSlcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgc3VwZXIuX29uRHJvcChldmVudClcbiAgfVxuXG4gIGFzeW5jIF9vbkNvbmRpdGlvblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb25kaXRpb24pIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IudG9nZ2xlQ29uZGl0aW9uKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb25kaXRpb24pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmV2aXZlICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMuYWN0b3IudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgfVxuXG4gIGFzeW5jIGhlYWwgKCkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcbiAgfVxuXG4gIGFzeW5jIGNoZWNrRm9yRGVhdGggKGV2ZW50KSB7XG4gICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgdGhpcy5hY3Rvci5pc1Rva2VuID8gdGhpcy5hY3Rvci50b2tlbktleSA6IHRoaXMuYWN0b3IuaWRcbiAgICApXG4gICAgY29uQ2hlY2suc3RheUFsaXZlID0gdHJ1ZVxuICAgIGNvbkNoZWNrLnRvTWVzc2FnZShldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyYWdUb2tlblN0YXJ0IChldmVudCkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0eXBlOiAnVG9rZW4nLFxuICAgICAgdXVpZDogdGhpcy50b2tlbi51dWlkXG4gICAgfVxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Q291bnRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgYXdhaXQgdGhpcy5hY3Rvci5yZXNldERhaWx5U2FuaXR5KClcbiAgfVxuXG4gIGFzeW5jIF9vbkF1dG9Ub2dnbGUgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpKSB7XG4gICAgICBjb25zdCBhdHRyaWIgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKS5kYXRhc2V0LmF0dHJpYlxuICAgICAgdGhpcy5hY3Rvci50b2dnbGVBdHRyaWJBdXRvKGF0dHJpYilcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICApXG4gICAgaWYgKHdlYXBvbikge1xuICAgICAgd2VhcG9uLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHksXG4gICAgICAgIGlzQ3RybEtleShldmVudClcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICAvLyByb2xsIHRoZSBhY3RvciBjaGFyYWN0ZXJpc3RpYyBmcm9tIGZvcm11bGEgd2hlbiBwb3NzaWJsZS5cbiAgYXN5bmMgX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUgKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIF9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlICgpIHtcbiAgICB0aGlzLmFjdG9yLmF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSgpXG4gIH1cblxuICBhc3luYyBfb25Mb2NrQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXNMb2NrZWQgPSB0aGlzLmFjdG9yLmxvY2tlZFxuICAgIHRoaXMuYWN0b3IubG9ja2VkID0gIWlzTG9ja2VkXG4gICAgSG9va3MuY2FsbCgnYWN0b3JMb2NrQ2xpY2tlZENvQzcnLCBbIWlzTG9ja2VkXSlcbiAgfVxuXG4gIGFzeW5jIF9vbkZsYWdDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBmbGFnTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgdGhpcy5hY3Rvci50b2dnbGVBY3RvckZsYWcoZmxhZ05hbWUpXG4gIH1cblxuICBhc3luYyBfb25Gb3JtdWxhQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5hY3Rvci50b2dnbGVBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgfVxuXG4gIGFzeW5jIF9vbldoZWVsIChldmVudCkge1xuICAgIGxldCB2YWx1ZSA9IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpIHx8IG51bGxcbiAgICBpZiAoZXZlbnQuZGVsdGFZID4gMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSA9PT0gMCA/IDAgOiB2YWx1ZSAtIDFcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuZGVsdGFZIDwgMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSArIDFcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSkge1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEhwKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldE1wKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRTYW4odmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEx1Y2sodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50JzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRIcCh2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBfdG9nZ2xlUmVhZE9ubHkgKGV2ZW50KSB7XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5yZWFkT25seSA9ICFldmVudC5jdXJyZW50VGFyZ2V0LnJlYWRPbmx5XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdyZWFkLW9ubHknKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbVN1bW1hcnkgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGF3YWl0IGl0ZW0uZ2V0Q2hhdERhdGEoeyBzZWNyZXRzOiB0aGlzLmFjdG9yLmlzT3duZXIgfSlcblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4ge1xuICAgICAgICBzdW1tYXJ5LnJlbW92ZSgpXG4gICAgICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+PC9kaXY+JylcblxuICAgICAgY29uc3QgbGFiZWxzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5sYWJlbHMpIHtcbiAgICAgICAgbGFiZWxzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxcIj48c3BhbiBjbGFzcz1cImxhYmVsLW5hbWVcIj4ke3AubmFtZX0gOjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsLXZhbHVlXCI+JHtwLnZhbHVlfTwvc3Bhbj48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQobGFiZWxzKVxuXG4gICAgICBkaXYuYXBwZW5kKFxuICAgICAgICAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1kZXNjcmlwdGlvblwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24udmFsdWV9PC9kaXY+YClcbiAgICAgIClcblxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwY2wpIHtcbiAgICAgICAgY29uc3Qgc3BlY2lhbERpdiA9ICQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLXNwZWNpYWxcIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWx9PC9kaXY+YFxuICAgICAgICApXG4gICAgICAgIGRpdi5hcHBlbmQoc3BlY2lhbERpdilcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHByb3BzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cInRhZyBpdGVtLXByb3BlcnR5XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUocCl9PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwLCAoKSA9PiBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9XG4gICAgLy8gJChldmVudC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcbiAgfVxuXG4gIGFzeW5jIF9vblNlY3Rpb25IZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIGxldCBzZWN0aW9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCdzZWN0aW9uJyksXG4gICAgLy8gIHBhbm5lbENsYXNzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKCdwYW5uZWwnKSxcbiAgICAvLyAgcGFubmVsID0gc2VjdGlvbi5maW5kKCBgLiR7cGFubmVsQ2xhc3N9YCk7XG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGNvbnN0IHNlY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ3NlY3Rpb24nKVxuICAgIGNvbnN0IHBhbm5lbENsYXNzID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnBhbm5lbFxuICAgIGlmICh0eXBlb2YgcGFubmVsQ2xhc3MgPT09ICd1bmRlZmluZWQnKSByZXR1cm5cbiAgICBjb25zdCBwYW5uZWwgPSAkKHNlY3Rpb24pLmZpbmQoYC5wYW5uZWwuJHtwYW5uZWxDbGFzc31gKVxuXG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGlmIChwYW5uZWwuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIC8vIENvdWxkIHJlbW92ZSBleHBhbmRlZCBjbGFzcyBhbmQgdXNlIChwYW5uZWwuaXMoJzp2aXNpYmxlJykpXG4gICAgICBwYW5uZWwuc2xpZGVVcCgyMDAsICgpID0+IHBhbm5lbC50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9IGVsc2Uge1xuICAgICAgcGFubmVsLnNsaWRlRG93bigyMDAsICgpID0+IHBhbm5lbC50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9XG5cbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGBkYXRhLnBhbm5lbC4ke3Bhbm5lbENsYXNzfS5leHBhbmRlZGApXG5cbiAgICB0aGlzLmFjdG9yLnVwZGF0ZShcbiAgICAgIHsgW2NhbWVsRmxhZ106ICFwYW5uZWwuaGFzQ2xhc3MoJ2V4cGFuZGVkJykgfSxcbiAgICAgIHsgcmVuZGVyOiBmYWxzZSB9KVxuICB9XG5cbiAgX29uSW52ZW50b3J5SGVhZGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuc2libGluZ3MoJ2xpJylcbiAgICBpZiAobGkuaXMoJzp2aXNpYmxlJykpIGxpLnNsaWRlVXAoMjAwKVxuICAgIGVsc2UgbGkuc2xpZGVEb3duKDIwMClcbiAgfVxuXG4gIF9vbkl0ZW1IZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG9sID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5uZXh0KCdvbCcpXG4gICAgaWYgKG9sLmlzKCc6dmlzaWJsZScpKSBvbC5zbGlkZVVwKDIwMClcbiAgICBlbHNlIG9sLnNsaWRlRG93bigyMDApXG4gIH1cblxuICBhc3luYyBfb25JdGVtUG9wdXAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcblxuICAgIENvQzdBY3RvclNoZWV0LnBvcHVwU2tpbGwoaXRlbSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwb3B1cFNraWxsIChza2lsbCkge1xuICAgIHNraWxsLnN5c3RlbS5kZXNjcmlwdGlvbi5lbnJpY2hlZFZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2tpbGwuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgeyBhc3luYzogdHJ1ZSB9XG4gICAgKVxuICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxEZXRhaWxzV2luZG93JyksXG4gICAgICAgIGNvbnRlbnQ6IHNraWxsLFxuICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc2tpbGwnXSxcbiAgICAgICAgd2lkdGg6IDUyMCxcbiAgICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICAgIHNjcm9sbFk6IFsnLml0ZW0tZGVzY3JpcHRpb24nXSxcbiAgICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtZGV0YWlscy5odG1sJ1xuICAgICAgfVxuICAgIClcbiAgICBkbGcucmVuZGVyKHRydWUpXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJvbGxpbmcgb2YgYW4gaXRlbSBmcm9tIHRoZSBBY3RvciBzaGVldCwgb2J0YWluaW5nIHRoZSBJdGVtIGluc3RhbmNlIGFuZCBkaXNwYXRjaGluZyB0byBpdCdzIHJvbGwgbWV0aG9kXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfb25JdGVtUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkO1xuICAgIC8vIGNvbnN0IGFjdG9ySWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWQ7XG4gICAgLy8gY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWQ7XG4gICAgLy8gbGV0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpO1xuXG4gICAgLy8gY2hlY2suYWN0b3IgPSAhdG9rZW5LZXkgPyBhY3RvcklkIDogdG9rZW5LZXk7XG4gICAgLy8gY2hlY2suaXRlbSA9IGl0ZW1JZDtcbiAgICAvLyBjaGVjay5yb2xsKCk7XG4gICAgLy8gY2hlY2sudG9NZXNzYWdlKCk7XG4gIH1cblxuICBhc3luYyBfb25FZmZlY3QgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGVmZmVjdElkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuZWZmZWN0SWRcbiAgICBjb25zdCBlZmZlY3QgPSB0aGlzLmFjdG9yLmVmZmVjdHMuZ2V0KGVmZmVjdElkKVxuICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBDb0M3Q29udGVudExpbmtEaWFsb2cuY3JlYXRlKHsgdHlwZTogJ0NvQzdMaW5rJywgY2hlY2s6IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNULCBvYmplY3Q6IGVmZmVjdCB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbldlYXBvblJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0Lml0ZW1JZFxuICAgIGNvbnN0IGZhc3RGb3J3YXJkID0gZXZlbnQuc2hpZnRLZXlcbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgLy8gY29uc3QgYWN0b3JLZXkgPSAhdGhpcy50b2tlbj8gdGhpcy5hY3Rvci5hY3RvcktleSA6IGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uZGF0YS5faWR9YDsgLy9SRUZBQ1RPUklORyAoMilcbiAgICAvKiogKiBNT0RJRiAwLjgueCAqKiovXG4gICAgbGV0IGFjdG9yS2V5XG4gICAgaWYgKCF0aGlzLnRva2VuKSBhY3RvcktleSA9IHRoaXMuYWN0b3IuaWRcbiAgICAvLyBTaGVldCB3YXMgb3BlbmVkIGZyb20gYWN0b3IgZGlyZWN0b3J5XG4gICAgZWxzZSB7XG4gICAgICAvLyBPcGVuZWQgZnJvbSB0b2tlblxuICAgICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbiAmJiBnYW1lLmFjdG9ycy50b2tlbnNbdGhpcy50b2tlbi5pZF0pIHtcbiAgICAgICAgYWN0b3JLZXkgPSBgVE9LRU4uJHt0aGlzLnRva2VuLmlkfWBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdG9yS2V5ID0gYCR7dGhpcy50b2tlbi5wYXJlbnQuaWR9LiR7dGhpcy50b2tlbi5pZH1gXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybEtleShldmVudCkgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICBjaGVjazogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNLFxuICAgICAgICBuYW1lOiB3ZWFwb24ubmFtZVxuICAgICAgfVxuICAgICAgQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZShsaW5rRGF0YSwgeyBhY3RvcnM6IFt0aGlzLmFjdG9yXSB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcHJvY2VlZFdpdGhvdXRUYXJnZXRcbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplIDw9IDApIHtcbiAgICAgICAgcHJvY2VlZFdpdGhvdXRUYXJnZXQgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgdGl0bGU6ICcgJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTm9UYXJnZXRTZWxlY3RlZCcsIHtcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb24ubmFtZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICAgIGNhbmNlbDoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2FuY2VsJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcHJvY2VlZDoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHJvY2VlZCcpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdjYW5jZWwnLFxuICAgICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZyddXG4gICAgICAgICAgfVxuICAgICAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA+IDAgfHwgcHJvY2VlZFdpdGhvdXRUYXJnZXQpIHtcbiAgICAgICAgaWYgKCF3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMSkge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuVG9vTWFueVRhcmdldCcpKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKGFjdG9yS2V5LCBpdGVtSWQsIGZhc3RGb3J3YXJkKVxuICAgICAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgICAgICB9XG4gICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKGFjdG9yS2V5LCBpdGVtSWQsIGZhc3RGb3J3YXJkKVxuICAgICAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUmVsb2FkV2VhcG9uIChldmVudCkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuICAgIGlmICghaXRlbUlkKSByZXR1cm5cbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSBhd2FpdCB3ZWFwb24ucmVsb2FkKClcbiAgICAgIGVsc2UgYXdhaXQgd2VhcG9uLmFkZEJ1bGxldCgpXG4gICAgfSBlbHNlIGlmIChldmVudC5idXR0b24gPT09IDIpIHtcbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkgYXdhaXQgd2VhcG9uLnNldEJ1bGxldHMoMClcbiAgICAgIGVsc2UgYXdhaXQgd2VhcG9uLnNob290QnVsbGV0cygxKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkFkZEFtbyAoZXZlbnQpIHtcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICAgID8gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICA6IG51bGxcbiAgICBpZiAoIWl0ZW1JZCkgcmV0dXJuXG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIGF3YWl0IHdlYXBvbi5hZGRCdWxsZXQoKVxuICB9XG5cbiAgYXN5bmMgX29uV2VhcG9uU2tpbGxSb2xsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBza2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWRcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJylcbiAgICAgID8gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICA6IG51bGxcblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKClcbiAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSB1c2FnZS5nZXQoJ2JvbnVzRGljZScpXG4gICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSB1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKVxuICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9ICF0b2tlbktleSA/IGFjdG9ySWQgOiB0b2tlbktleVxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxuICAgIGNoZWNrLml0ZW0gPSBpdGVtSWRcbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuXG4gICAgLy8gSEFDSzoganVzdCB0byBwb3AgdGhlIGFkdmFuY2VkIHJvbGwgd2luZG93XG4gICAgLy8gY2hlY2suaXRlbS5yb2xsKCk7XG4gIH1cblxuICBhc3luYyBfb25XZWFwb25EYW1hZ2UgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbicpLmRhdGFzZXQuaXRlbUlkXG4gICAgY29uc3QgcmFuZ2UgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy53ZWFwb24tZGFtYWdlJykuZGF0YXNldC5yYW5nZVxuICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xuICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgcmFuZ2VcbiAgICB9KVxuICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gdGhpcy5hY3Rvci50b2tlbktleVxuICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGl0ZW1JZFxuICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAvLyBjb25zb2xlLmxvZyggJ1dlYXBvbiBkYW1hZ2UgQ2xpY2tlZCcpO1xuICB9XG5cbiAgYXN5bmMgX29uT3Bwb3NlZFJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYiA9PT0gJ2RiJykgcmV0dXJuXG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwsXG4gICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VELFxuICAgICAgZXZlbnQsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXJhY3RlcmlzdGljLWxhYmVsJykpIHtcbiAgICAgIGRhdGEucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgfSBlbHNlIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXR0cmlidXRlLWxhYmVsJykpIHtcbiAgICAgIGRhdGEucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgIH1cblxuICAgIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgIGRhdGEuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXG4gICAgfVxuXG4gICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoZGF0YSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcm9sbGluZyBhIFNraWxsIGNoZWNrXG4gICAqIEAgIHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpdGljVGVzdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmbGFnZ2VkNGRldicpKSByZXR1cm5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0cnVlLFxuICAgICAgICBjaGFyYWN0ZXJpc3RpYzogZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhci1ib3gnKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEF0dHJpYlRlc3QgKGV2ZW50KSB7XG4gICAgLy8gRkxBVE1PRElGSUVSXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGF0dHJpYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYlxuICAgIGlmIChhdHRyaWIgPT09ICdkYicpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIS9eLXswLDF9XFxkKyQvLnRlc3QoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQucm9sbEZvcm11bGFcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5yb2xsRm9ybXVsYVxuICAgICAgICApXG4gICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGlmICghaXNOYU4oci50b3RhbCkgJiYgIShyLnRvdGFsID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgci50b01lc3NhZ2Uoe1xuICAgICAgICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNEYW1hZ2VSb2xsJylcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0cnVlLFxuICAgICAgICBhdHRyaWJ1dGU6IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUsXG4gICAgICAgIGNhcmRUeXBlOlxuICAgICAgICBldmVudC5hbHRLZXkgJiYgYXR0cmliID09PSAnc2FuJ1xuICAgICAgICAgID8gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcbiAgICAgICAgICA6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByb2xsaW5nIGEgU2tpbGwgY2hlY2tcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vblJvbGxTa2lsbFRlc3QgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmxhZ2dlZDRkZXYnKSkgcmV0dXJuXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZUNvbnRleHRNZW51cycpKSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxuICAgICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIHByZXZlbnRTdGFuZGJ5OiB0cnVlLFxuICAgICAgICBmYXN0Rm9yd2FyZDogdHJ1ZSxcbiAgICAgICAgc2tpbGxJZDogZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICAvLyBfZ2V0U3VibWl0RGF0YSh1cGRhdGVEYXRhPXt9KSB7XG5cbiAgLy8gIC8vIENyZWF0ZSB0aGUgZXhwYW5kZWQgdXBkYXRlIGRhdGEgb2JqZWN0XG4gIC8vICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwge2VkaXRvcnM6IHRoaXMuZWRpdG9yc30pO1xuICAvLyAgbGV0IGRhdGEgPSBmZC50b09iamVjdCgpO1xuICAvLyAgaWYgKCB1cGRhdGVEYXRhICkgZGF0YSA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSk7XG4gIC8vICBlbHNlIGRhdGEgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChkYXRhKTtcblxuICAvLyAgLy8gSGFuZGxlIERhbWFnZSBhcnJheVxuICAvLyAgY29uc3QgZGFtYWdlID0gZGF0YS5kYXRhPy5kYW1hZ2U7XG4gIC8vICBpZiAoIGRhbWFnZSApIGRhbWFnZS5wYXJ0cyA9IE9iamVjdC52YWx1ZXMoZGFtYWdlPy5wYXJ0cyB8fCB7fSkubWFwKGQgPT4gW2RbMF0gfHwgJycsIGRbMV0gfHwgJyddKTtcblxuICAvLyAgLy8gUmV0dXJuIHRoZSBmbGF0dGVuZWQgc3VibWlzc2lvbiBkYXRhXG4gIC8vICByZXR1cm4gZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KGRhdGEpO1xuICAvLyB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogSW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZCBhcyByZXF1aXJlZCBieSB0aGUgcGFyZW50IGNsYXNzIHNwZWNcbiAgICogVGhpcyBkZWZpbmVzIGhvdyB0byB1cGRhdGUgdGhlIHN1YmplY3Qgb2YgdGhlIGZvcm0gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdfdXBkYXRlT2JqZWN0Jyk7XG4gICAgLy8gVE9ETzogUmVwbGFjZSB3aXRoICAgX2dldFN1Ym1pdERhdGEodXBkYXRlRGF0YT17fSkgQ2YuIHNoZWV0LmpzKDI0MylcbiAgICBjb25zdCBvdmVycmlkZXMgPSBmb3VuZHJ5LnV0aWxzLmZsYXR0ZW5PYmplY3QodGhpcy5hY3Rvci5vdmVycmlkZXMpXG4gICAgY29uc3QgbmFtZSA9IGV2ZW50Py5jdXJyZW50VGFyZ2V0Py5uYW1lXG4gICAgaWYgKG5hbWUgJiYgb3ZlcnJpZGVzICYmIG92ZXJyaWRlc1tuYW1lXSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVmZmVjdEFwcGxpZWRDYW50T3ZlcnJpZGUnLCB7IG5hbWUgfSlcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0KSB7XG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2tpbGwtYWRqdXN0bWVudCcpKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgPyBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICA6IG51bGxcblxuICAgICAgICAgICAgaWYgKCFldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAgICAgICBbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXTogbnVsbFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICBbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuY3JlZGl0LXJhdGluZycpID09PSBpdGVtLm5hbWUgJiYgdHlwZW9mIHRoaXMuYWN0b3Iub2NjdXBhdGlvbj8uc3lzdGVtPy5jcmVkaXRSYXRpbmc/Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3JlZGl0VmFsdWUgPVxuICAgICAgICAgICAgICAgIChpdGVtLnZhbHVlIHx8IDApIC1cbiAgICAgICAgICAgICAgICAoaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UgfHwgMClcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGNyZWRpdFZhbHVlID5cbiAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5tYXgpIHx8XG4gICAgICAgICAgICAgICAgY3JlZGl0VmFsdWUgPFxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1pbilcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DcmVkaXRPdXRPZlJhbmdlJywge1xuICAgICAgICAgICAgICAgICAgICBtaW46IE51bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5taW5cbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBOdW1iZXIoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIFRPRE8gOiBjaGVjayB3aHkgU0FOIG9ubHkgP1xuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUgPT09ICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldFNhbihcbiAgICAgICAgICAgICAgcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRIcChcbiAgICAgICAgICAgICAgcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RleHQtYXJlYScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci51cGRhdGVUZXh0QXJlYShldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi12YWx1ZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUJpb1ZhbHVlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi10aXRsZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZUJpb1RpdGxlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCducGMtc2tpbGwtc2NvcmUnKSkge1xuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChza2lsbCkge1xuICAgICAgICAgICAgYXdhaXQgc2tpbGwudXBkYXRlVmFsdWUoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NraWxsLW5hbWUnKSB8fFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpdGVtLW5hbWUnKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge31cbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICAgIGRhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICBkYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkYXRhWydzeXN0ZW0uc2tpbGxOYW1lJ10gPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgIGRhdGEubmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKGRhdGEpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1mb3JtdWxhJykpIHtcbiAgICAgICAgICAvLyB0ZXN0ZXIgc2kgYydlc3QgdmlkZVxuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgLy8gT24gdGVzdGUgc2kgYydlc3QgdW5lIGZvcm11bGUgdmFsaWRlICFcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgIGlmIChpc05hTihyLnRvdGFsKSB8fCB0eXBlb2Ygci50b3RhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9ybURhdGFbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcuRXJyb3JJbnZhbGlkJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIHRlc3RlciBzaSBsZSBkYiByZXRvdXJuw6kgZXN0IHZhbGlkZS5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWIgPT09ICdkYidcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIE9uIHRlc3RlIHNpIGMnZXN0IHVuZSBmb3JtdWxlIHZhbGlkZSAhXG4gICAgICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgci50b3RhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvcm1EYXRhW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV0gPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LkVycm9ySW52YWxpZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxlIHNraWxsIGFzc29jacOpIGEgbCdhcm1lIGEgY2hhbmfDqVxuICAgICAgICAvLyBUT0RPIDogRmFjdG9yaXNhdGlvbiBkdSBzd2l0Y2hcbiAgICAgICAgLy8gVE9ETyA6IHJlbXBsYWNlciBsZXMgc3RyaW5ncyBwYXIgZGUgY29uc3RhbnRlcyAoaXRlbS5za2lsbC5tYWluIC4uLilcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3ZWFwb24tc2tpbGwnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0Lm9wdGlvbnNbZXZlbnQuY3VycmVudFRhcmdldC5zZWxlY3RlZEluZGV4XS52YWx1ZVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAod2VhcG9uICYmIHNraWxsKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbCkge1xuICAgICAgICAgICAgICBjYXNlICdtYWluJzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlICdhbHRlcm5hdGl2JzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExlIG5vbSBkZSBsJ2FybWUgYSBjaGFuZ8OpXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2VhcG9uLW5hbWUnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoeyBuYW1lOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGVzIGRlZ2F0cyBkZSBsJ2FybWUgb24gY2hhbmfDqXMuXG4gICAgICAgIC8vIFRPRE8gOiBGYWN0b3Jpc2F0aW9uIGR1IHN3aXRjaFxuICAgICAgICAvLyBUT0RPIDogcmVtcGxhY2VyIGxlcyBzdHJpbmdzIHBhciBkZSBjb25zdGFudGVzIChpdGVtLnJhbmdlLm5vcm1hbCAuLi4pXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGFtYWdlLWZvcm11bGEnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIC8vIHRlc3RlIGxhIHZhbGlkaXTDqSBkZSBsYSBmb3JtdWxlLlxuICAgICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgdHlwZW9mIHIudG90YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JVbmFibGVUb1BhcnNlRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UnOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICBjYXNlICdsb25nJzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xvbmcnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UubG9uZy5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdleHRyZW1lJzpcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogbnVsbFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnVwZGF0ZShmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4uLy4uL2NvbnRleHQtbWVudS5qcydcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3TlBDU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgQWN0b3Igc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLy8gVE9ETyA6IGRvIHdlIG5lZWQgdGhhdCA/XG4gICAgc2hlZXREYXRhLmFsbG93Rm9ybXVsYSA9IHRydWVcbiAgICBzaGVldERhdGEuZGlzcGxheUZvcm11bGEgPSAodGhpcy5hY3Rvci5nZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJykgfHwgZmFsc2UpXG5cbiAgICBzaGVldERhdGEuaGFzU2FuID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlICE9PSBudWxsXG4gICAgc2hlZXREYXRhLmhhc01wID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgIT09IG51bGxcbiAgICBzaGVldERhdGEuaGFzTHVjayA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSAhPT0gbnVsbFxuXG4gICAgc2hlZXREYXRhLmlzQ3JlYXR1cmUgPSBmYWxzZVxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3RhdHVzJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID0gZmFsc2VcbiAgICBzaGVldERhdGEuaGFzSW52ZW50b3J5ID1cbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkucGVyc29uYWxEZXNjcmlwdGlvbj8udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIGlmICghdGhpcy5tZW51cykgdGhpcy5tZW51cyA9IFtdXG5cbiAgICAgIGNvbnN0IHNhbmxvc3NNZW51ID0ge1xuICAgICAgICBpZDogJ3Nhbi1sb3NzLXJvbGwnLFxuICAgICAgICBjbGFzc2VzOiAncm9sbC1tZW51JyxcbiAgICAgICAgc2VjdGlvbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzZXM6ICdtYWluJyxcbiAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay10b29sJywgbGFiZWw6ICdPcGVuIGluIGxpbmsgdG9vbCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZW5kLWNoYXQnLCBsYWJlbDogJ1NlbmQgdG8gY2hhdCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb3B5LXRvLWNsaXBib2FyZCcsIGxhYmVsOiAnQ29weSB0byBjbGlwLWJvYXJkJyB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuXG4gICAgICAgIF1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2FubG9zc0NvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICBzYW5sb3NzQ29udGV4dE1lbnUuYmluZChzYW5sb3NzTWVudSwgaHRtbCwgdGhpcy5fb25TYW5Mb3NzQ29udGV4dE1lbnVDbGljay5iaW5kKHRoaXMpKVxuICAgICAgdGhpcy5tZW51cy5wdXNoKHNhbmxvc3NDb250ZXh0TWVudSlcbiAgICB9XG5cbiAgICBodG1sLmZpbmQoJy5yb2xsLXNhbicpLmNsaWNrKHRoaXMuX29uU2FuQ2hlY2suYmluZCh0aGlzKSlcbiAgICAvLyBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgLy8gICBodG1sXG4gICAgLy8gICAgIC5maW5kKCdbbmFtZT1cImRhdGEuYXR0cmlicy5ocC52YWx1ZVwiXScpXG4gICAgLy8gICAgIC5jaGFuZ2UoZXZlbnQgPT4gdGhpcy5hY3Rvci5zZXRIZWFsdGhTdGF0dXNNYW51YWxseShldmVudCkpXG4gICAgLy8gfVxuICB9XG5cbiAgYXN5bmMgX29uU2FuTG9zc0NvbnRleHRNZW51Q2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgcm9sbE9wdGlvbnMgPSB7XG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVIsXG4gICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcbiAgICAgIGV2ZW50LFxuICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLLFxuICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgKCdsaW5rLXRvb2wnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID0gdHJ1ZVxuICAgICAgICByb2xsT3B0aW9ucy5vcGVuTGlua1Rvb2wgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnc2VuZC1jaGF0Jyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2hhdCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdjb3B5LXRvLWNsaXBib2FyZCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIgPSB0cnVlXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NsaXBib2FyZCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHJvbGxPcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgX29uU2FuQ2hlY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChcbiAgICAgICF0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tQYXNzZWQgJiZcbiAgICAgICF0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkXG4gICAgKSB7XG4gICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ05vIHNhbml0eSBsb3NzIHZhbHVlJyk7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKFxuICAgICAgaXNDdHJsS2V5KGV2ZW50KSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIGxldCBkaWZmaWN1bHR5LCBtb2RpZmllclxuICAgICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBtb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICBjaGVjazogJ3Nhbmxvc3MnLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc3lzdGVtLnNwZWNpYWwuc2FuTG9zcy5jaGVja1Bhc3NlZCxcbiAgICAgICAgc2FuTWF4OiB0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkLFxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBtb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLm1vZGlmaWVyID0gbW9kaWZpZXJcbiAgICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjb25zdCBsaW5rID0gKG5ldyBDb0M3TGluaygpKS5fY3JlYXRlRG9jdW1lbnRMaW5rKGxpbmtEYXRhKVxuICAgICAgaWYgKGxpbmspIHtcbiAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xuICAgICAgICAgICAgY2hlY2s6IGxpbmtcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNhbkRhdGEgPSB7XG4gICAgICAgIHNhbk1heDogdGhpcy5hY3Rvci5zYW5Mb3NzQ2hlY2tGYWlsbGVkLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc2FuTG9zc0NoZWNrUGFzc2VkLFxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgfVxuICAgICAgU2FuQ2hlY2tDYXJkLmNoZWNrVGFyZ2V0cyhzYW5EYXRhLCBldmVudC5zaGlmdEtleSlcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHRoaXMuYWN0b3IudW5zZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnbnBjJ10sXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL25wYy1zaGVldC5odG1sJyxcbiAgICAgIHdpZHRoOiA1ODAsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgbWluaW1pemFibGU6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QpIHtcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1zY29yZScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci5zZXRDaGFyYWN0ZXJpc3RpYyhcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSxcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgc3RhdGljIGZvcmNlQXV0byAoYXBwLCBodG1sKSB7XG4gICAgaHRtbC5oZWlnaHQoJ2F1dG8nKVxuICB9XG5cbiAgc2V0UG9zaXRpb24gKGEpIHtcbiAgICBzdXBlci5zZXRQb3NpdGlvbihhKVxuICAgIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYSwgdGhpcy5fZWxlbWVudClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnkgKi9cbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vbnBjLXNoZWV0LmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgQWN0b3JTaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0NyZWF0dXJlU2hlZXQgZXh0ZW5kcyBDb0M3TlBDU2hlZXQge1xuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEFjdG9yIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuaXNDcmVhdHVyZSA9IHRydWVcbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ25wYycsICdjcmVhdHVyZSddXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3J10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUxvc3NUeXBlRGlhbG9nVGl0bGUnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3Nhbml0eS1sb3NzLXR5cGUuaGJzJyxcbiAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBkYXRhLmlzSW1tdW5pdHkgPSBkYXRhLm9iamVjdC50eXBlID09PSAnaW1tdW5pdHknXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgaHRtbC5maW5kKCcuZmllbGRfdHlwZScpLmNoYW5nZSh0aGlzLl9vblNlbGVjdENoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRpYWxvZy1idXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbkNsaWNrLmJpbmQodGhpcykpXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIF9vbkJ1dHRvbkNsaWNrIChldmVudCkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYnV0dG9uID09PSAnYWRkJykge1xuICAgICAgY29uc3QgaHRtbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLndpbmRvdy1jb250ZW50JylcbiAgICAgIGNvbnN0IHR5cGUgPSBodG1sLmZpbmQoJy5maWVsZF90eXBlJykudmFsKClcbiAgICAgIGNvbnN0IG5hbWUgPSBodG1sLmZpbmQoJy5maWVsZF9uYW1lJykudmFsKClcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoaHRtbC5maW5kKCcuZmllbGRfdmFsdWUnKS52YWwoKSlcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPVxuICAgICAgICB0aGlzLm9iamVjdC5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyA/PyBbXVxuICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHtcbiAgICAgICAgdHlwZTogbmFtZSxcbiAgICAgICAgdG90YWxMb3NzOiB2YWx1ZSxcbiAgICAgICAgaW1tdW5pdHk6IHR5cGUgPT09ICdpbW11bml0eSdcbiAgICAgIH0pXG4gICAgICBzYW5pdHlMb3NzRXZlbnRzLnNvcnQoZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBsZWZ0LnR5cGUubG9jYWxlQ29tcGFyZShyaWdodC50eXBlKVxuICAgICAgfSlcbiAgICAgIHRoaXMub2JqZWN0LmFjdG9yLnVwZGF0ZSh7ICdkYXRhLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzIH0pXG4gICAgfVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgX29uU2VsZWN0Q2hhbmdlIChldmVudCkge1xuICAgIGNvbnN0IGh0bWwgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy53aW5kb3ctY29udGVudCcpXG4gICAgdGhpcy5vYmplY3QubmFtZSA9IGh0bWwuZmluZCgnLmZpZWxkX25hbWUnKS52YWwoKVxuICAgIHRoaXMub2JqZWN0LnR5cGUgPSBodG1sLmZpbmQoJy5maWVsZF90eXBlJykudmFsKClcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7fVxufVxuIiwiLyogZ2xvYmFsICQsIEZvbnRGYWNlLCBmb3VuZHJ5LCBnYW1lLCBUZXh0RWRpdG9yLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JTaGVldCB9IGZyb20gJy4vYmFzZS5qcydcbmltcG9ydCB7IENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIgfSBmcm9tICcuLi8uLi9hcHBzL2NyZWF0ZS1teXRob3MtZW5jb3VudGVycy5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFyYWN0ZXJTaGVldCBleHRlbmRzIENvQzdBY3RvclNoZWV0IHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdDb0M3Q2hhcmFjdGVyU2hlZXQnKSB7XG4gICAgICBpZiAoIXRoaXMuc3VtbWFyaXplZCkgdGhpcy5zdW1tYXJpemVkID0gZmFsc2VcbiAgICAgIGxldCBidXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgICAgYnV0dG9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiB0aGlzLnN1bW1hcml6ZWRcbiAgICAgICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1heGltaXplJylcbiAgICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlN1bW1hcml6ZScpLFxuICAgICAgICAgIGNsYXNzOiAndGVzdC1leHRyYS1pY29uJyxcbiAgICAgICAgICBpY29uOiB0aGlzLnN1bW1hcml6ZWRcbiAgICAgICAgICAgID8gJ2ZhcyBmYS13aW5kb3ctbWF4aW1pemUnXG4gICAgICAgICAgICA6ICdmYXMgZmEtd2luZG93LW1pbmltaXplJyxcbiAgICAgICAgICBvbmNsaWNrOiBldmVudCA9PiB0aGlzLnRvZ2dsZVNoZWV0TW9kZShldmVudClcbiAgICAgICAgfS8qICxcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiAnJyxcbiAgICAgICAgICBjbGFzczogJ2RyYWctdGVzdC10aGluZ3knLFxuICAgICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLWQxMCcsXG4gICAgICAgICAgb25kcmFnc3RhcnQ6ICgpID0+IHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnZHJhZyBzdGFydGVkJylcbiAgICAgICAgfSAqL1xuICAgICAgXS5jb25jYXQoYnV0dG9ucylcbiAgICAgIHJldHVybiBidXR0b25zXG4gICAgfVxuICAgIHJldHVybiBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gIH1cblxuICBhc3luYyB0b2dnbGVTaGVldE1vZGUgKGV2ZW50KSB7XG4gICAgdGhpcy5zdW1tYXJpemVkID0gIXRoaXMuc3VtbWFyaXplZFxuICAgIGxldCBvcHRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoQ29DN0NoYXJhY3RlclNoZWV0LmRlZmF1bHRPcHRpb25zKVxuICAgIGlmICh0aGlzLnN1bW1hcml6ZWQpIHtcbiAgICAgIG9wdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9wdGlvbnMsIHtcbiAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2FjdG9yJywgJ2NoYXJhY3RlcicsICdzdW1tYXJpemVkJ10sXG4gICAgICAgIGhlaWdodDogMjAwLFxuICAgICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgICB3aWR0aDogNzAwXG4gICAgICB9KVxuICAgIH1cbiAgICBvcHRpb25zLnRva2VuID0gdGhpcy5vcHRpb25zLnRva2VuXG4gICAgYXdhaXQgdGhpcy5jbG9zZSgpXG4gICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSwgb3B0aW9ucylcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNFZGl0YWJsZSAmJlxuICAgICAgdHlwZW9mIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJykgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScsIGZhbHNlKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmlzRWRpdGFibGUgJiZcbiAgICAgIHR5cGVvZiB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxTaG93VW5jb21tb24nKSA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicsIHRydWUpXG4gICAgfVxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RNb2RlVmFsdWUgPVxuICAgICAgdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKSA/PyBmYWxzZVxuICAgIHNoZWV0RGF0YS5za2lsbFNob3dVbmNvbW1vbiA9XG4gICAgICB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxTaG93VW5jb21tb24nKSA/PyB0cnVlXG4gICAgc2hlZXREYXRhLnNob3dJY29uc09ubHkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzaG93SWNvbnNPbmx5JylcblxuICAgIGlmICh0aGlzLmFjdG9yLm9jY3VwYXRpb24pIHtcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5vY2N1cGF0aW9uID0gdGhpcy5hY3Rvci5vY2N1cGF0aW9uLm5hbWVcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5vY2N1cGF0aW9uU2V0ID0gdHJ1ZVxuICAgIH0gZWxzZSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3Mub2NjdXBhdGlvblNldCA9IGZhbHNlXG5cbiAgICBpZiAodGhpcy5hY3Rvci5hcmNoZXR5cGUpIHtcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5hcmNoZXR5cGUgPSB0aGlzLmFjdG9yLmFyY2hldHlwZS5uYW1lXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MuYXJjaGV0eXBlU2V0ID0gdHJ1ZVxuICAgIH0gZWxzZSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MuYXJjaGV0eXBlU2V0ID0gZmFsc2VcblxuICAgIHNoZWV0RGF0YS50b3RhbEV4cGVyaWVuY2UgPSB0aGlzLmFjdG9yLmV4cGVyaWVuY2VQb2ludHNcbiAgICBzaGVldERhdGEudG90YWxPY2N1cGF0aW9uID0gdGhpcy5hY3Rvci5vY2N1cGF0aW9uUG9pbnRzU3BlbnRcbiAgICBzaGVldERhdGEuaW52YWxpZE9jY3VwYXRpb25Qb2ludHMgPVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iub2NjdXBhdGlvblBvaW50c1NwZW50KSAhPT1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLnN5c3RlbS5kZXZlbG9wbWVudD8ub2NjdXBhdGlvbilcbiAgICBzaGVldERhdGEudG90YWxBcmNoZXR5cGUgPSB0aGlzLmFjdG9yLmFyY2hldHlwZVBvaW50c1NwZW50XG4gICAgc2hlZXREYXRhLmludmFsaWRBcmNoZXR5cGVQb2ludHMgPVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IuYXJjaGV0eXBlUG9pbnRzU3BlbnQpICE9PVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iuc3lzdGVtLmRldmVsb3BtZW50Py5hcmNoZXR5cGUpXG4gICAgc2hlZXREYXRhLnRvdGFsUGVyc29uYWwgPSB0aGlzLmFjdG9yLnBlcnNvbmFsUG9pbnRzU3BlbnRcbiAgICBzaGVldERhdGEuaW52YWxpZFBlcnNvbmFsUG9pbnRzID1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLnBlcnNvbmFsUG9pbnRzU3BlbnQpICE9PVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iuc3lzdGVtLmRldmVsb3BtZW50Py5wZXJzb25hbClcbiAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nTWF4ID0gTnVtYmVyKFxuICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uPy5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1heFxuICAgIClcbiAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nTWluID0gTnVtYmVyKFxuICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uPy5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1pblxuICAgIClcbiAgICBzaGVldERhdGEuaW52YWxpZENyZWRpdFJhdGluZyA9XG4gICAgICB0aGlzLmFjdG9yLmNyZWRpdFJhdGluZ1NraWxsPy5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24gPlxuICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ01heCB8fFxuICAgICAgdGhpcy5hY3Rvci5jcmVkaXRSYXRpbmdTa2lsbD8uc3lzdGVtLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uIDxcbiAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNaW5cbiAgICBzaGVldERhdGEucHVscFRhbGVudENvdW50ID0gc2hlZXREYXRhLml0ZW1zQnlUeXBlLnRhbGVudD8ubGVuZ3RoXG4gICAgICA/IHNoZWV0RGF0YS5pdGVtc0J5VHlwZS50YWxlbnQ/Lmxlbmd0aFxuICAgICAgOiAwXG4gICAgc2hlZXREYXRhLm1pblB1bHBUYWxlbnRzID0gdGhpcy5hY3Rvci5hcmNoZXR5cGU/LnN5c3RlbS50YWxlbnRzXG4gICAgICA/IHRoaXMuYWN0b3IuYXJjaGV0eXBlPy5zeXN0ZW0udGFsZW50c1xuICAgICAgOiAwXG4gICAgc2hlZXREYXRhLmludmFsaWRQdWxwVGFsZW50cyA9IHNoZWV0RGF0YS5wdWxwVGFsZW50Q291bnQgPCBzaGVldERhdGEubWluUHVscFRhbGVudHNcblxuICAgIHNoZWV0RGF0YS5oYXNEZXZlbG9wbWVudFBoYXNlID0gdGhpcy5hY3Rvci5oYXNEZXZlbG9wbWVudFBoYXNlXG5cbiAgICBzaGVldERhdGEuYWxsb3dEZXZlbG9wbWVudCA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpXG4gICAgc2hlZXREYXRhLmFsbG93Q2hhckNyZWF0aW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpXG4gICAgc2hlZXREYXRhLmRldmVsb3BtZW50Um9sbEZvckx1Y2sgPSBnYW1lLnNldHRpbmdzLmdldChcbiAgICAgICdDb0M3JyxcbiAgICAgICdkZXZlbG9wbWVudFJvbGxGb3JMdWNrJ1xuICAgIClcbiAgICBzaGVldERhdGEuc2hvd0RldlBhbm5lbCA9IHNoZWV0RGF0YS5hbGxvd0RldmVsb3BtZW50IHx8IHNoZWV0RGF0YS5hbGxvd0NoYXJDcmVhdGlvblxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeUZvcm1hdHMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlGb3JtYXRzKSB7XG4gICAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5Rm9ybWF0c1trZXldKSB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5zaG93Q3VycmVuY3lTeW1ib2wgPSBbJ2RlY2ltYWxMZWZ0JywgJ2RlY2ltYWxSaWdodCcsICdpbnRlZ2VyTGVmdCcsICdpbnRlZ2VyUmlnaHQnXS5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KVxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeVR5cGVzID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBDT0M3Lm1vbmV0YXJ5VHlwZXMpIHtcbiAgICAgIGlmIChDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5maWx0ZXIubGVuZ3RoID09PSAwIHx8IENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KSkge1xuICAgICAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMucHVzaCh7IGtleSwgdmFsOiBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5tb25ldGFyeVR5cGVzW2tleV0ubmFtZSkgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEubWFudWFsQ3JlZGl0ID0gdGhpcy5hY3Rvci5nZXRBY3RvckZsYWcoJ21hbnVhbENyZWRpdCcpXG4gICAgaWYgKCFzaGVldERhdGEubWFudWFsQ3JlZGl0KSB7XG4gICAgICBzaGVldERhdGEubW9uZXRhcnkgPSB7XG4gICAgICAgIHNwZW5kaW5nTGV2ZWw6IENvQ0FjdG9yLm1vbmV0YXJ5Rm9ybWF0KHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5zeW1ib2wsIHRoaXMuYWN0b3Iuc3BlbmRpbmdMZXZlbCksXG4gICAgICAgIGFzc2V0czogQ29DQWN0b3IubW9uZXRhcnlGb3JtYXQoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCwgdGhpcy5hY3Rvci5hc3NldHMpLFxuICAgICAgICBjYXNoOiBDb0NBY3Rvci5tb25ldGFyeUZvcm1hdChzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCBzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuc3ltYm9sLCB0aGlzLmFjdG9yLmNhc2gpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLm9uZUJsb2NrQmFja1N0b3J5ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknKVxuXG4gICAgc2hlZXREYXRhLnN1bW1hcml6ZWQgPSB0aGlzLnN1bW1hcml6ZWQgJiYgIXNoZWV0RGF0YS5wZXJtaXNzaW9uTGltaXRlZFxuICAgIHNoZWV0RGF0YS5za2lsbExpc3QgPSBbXVxuICAgIGxldCBwcmV2aW91c1NwZWMgPSAnJ1xuICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygc2hlZXREYXRhLnNraWxscykge1xuICAgICAgaWYgKHNoZWV0RGF0YS5za2lsbFNob3dVbmNvbW1vbiB8fCAhc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMucmFyaXR5KSB7XG4gICAgICAgIGlmIChza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgICAgaWYgKHByZXZpb3VzU3BlYyAhPT0gc2tpbGwuc3lzdGVtLnNwZWNpYWxpemF0aW9uKSB7XG4gICAgICAgICAgICBwcmV2aW91c1NwZWMgPSBza2lsbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbExpc3QucHVzaCh7XG4gICAgICAgICAgICAgIGlzU3BlY2lhbGl6YXRpb246IHRydWUsXG4gICAgICAgICAgICAgIG5hbWU6IHNraWxsLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnNraWxsTGlzdC5wdXNoKHNraWxsKVxuICAgICAgfVxuICAgIH1cbiAgICBzaGVldERhdGEuc2tpbGxzQnlWYWx1ZSA9IFsuLi5zaGVldERhdGEuc2tpbGxzXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICByZXR1cm4gYi5zeXN0ZW0udmFsdWUgLSBhLnN5c3RlbS52YWx1ZVxuICAgIH0pXG4gICAgc2hlZXREYXRhLnRvcFNraWxscyA9IFsuLi5zaGVldERhdGEuc2tpbGxzQnlWYWx1ZV0uc2xpY2UoMCwgMTQpXG4gICAgc2hlZXREYXRhLnNraWxsc0J5VmFsdWUgPSBzaGVldERhdGEuc2tpbGxzQnlWYWx1ZS5maWx0ZXIoXG4gICAgICBza2lsbCA9PiBzaGVldERhdGEuc2tpbGxTaG93VW5jb21tb24gfHwgIXNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLnJhcml0eVxuICAgIClcbiAgICBzaGVldERhdGEudG9wV2VhcG9ucyA9IFsuLi5zaGVldERhdGEubWVsZWVXcG4sIC4uLnNoZWV0RGF0YS5yYW5nZVdwbl1cbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBhLnN5c3RlbS5za2lsbC5tYWluPy52YWx1ZSAtIGIuc3lzdGVtLnNraWxsLm1haW4/LnZhbHVlXG4gICAgICB9KVxuICAgICAgLnJldmVyc2UoKVxuICAgICAgLnNsaWNlKDAsIDMpXG4gICAgc2hlZXREYXRhLmRpc3BsYXlQbGF5ZXJOYW1lID0gZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAnQ29DNycsXG4gICAgICAnZGlzcGxheVBsYXllck5hbWVPblNoZWV0J1xuICAgIClcbiAgICBpZiAoc2hlZXREYXRhLmRpc3BsYXlQbGF5ZXJOYW1lICYmICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MucGxheWVybmFtZSkge1xuICAgICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IuY2hhcmFjdGVyVXNlclxuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLnBsYXllcm5hbWUgPSB1c2VyLm5hbWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3RhdHVzJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG5cbiAgICBzaGVldERhdGEuaGFzSW52ZW50b3J5ID1cbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnNcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZEJhY2tzdG9yeSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iYWNrc3RvcnksXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBfc2F2ZVNjcm9sbFBvc2l0aW9ucyAoaHRtbCkge1xuICAgIHN1cGVyLl9zYXZlU2Nyb2xsUG9zaXRpb25zKGh0bWwpXG4gICAgY29uc3Qgc2VsZWN0b3JzID0gWycucmlnaHQtcGFuZWwgLnRhYi5kZXZlbG9wbWVudCBvbCddXG4gICAgdGhpcy5fc2Nyb2xsUG9zaXRpb25zWCA9IHNlbGVjdG9ycy5yZWR1Y2UoKHBvcywgc2VsKSA9PiB7XG4gICAgICBjb25zdCBlbCA9IGh0bWwuZmluZChzZWwpXG4gICAgICBwb3Nbc2VsXSA9IEFycmF5LmZyb20oZWwpLm1hcChlbCA9PiBlbC5zY3JvbGxMZWZ0KVxuICAgICAgcmV0dXJuIHBvc1xuICAgIH0sIHt9KVxuICB9XG5cbiAgX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMgKGh0bWwpIHtcbiAgICBzdXBlci5fcmVzdG9yZVNjcm9sbFBvc2l0aW9ucyhodG1sKVxuICAgIGNvbnN0IHNlbGVjdG9ycyA9IFsnLnJpZ2h0LXBhbmVsIC50YWIuZGV2ZWxvcG1lbnQgb2wnXVxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMuX3Njcm9sbFBvc2l0aW9uc1ggfHwge31cbiAgICBmb3IgKGNvbnN0IHNlbCBvZiBzZWxlY3RvcnMpIHtcbiAgICAgIGNvbnN0IGVsID0gaHRtbC5maW5kKHNlbClcbiAgICAgIGVsLmVhY2goKGksIGVsKSA9PiB7IGVsLnNjcm9sbExlZnQgPSBwb3NpdGlvbnNbc2VsXT8uW2ldIHx8IDAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIDVlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnYWN0b3InLCAnY2hhcmFjdGVyJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL2NoYXJhY3Rlci9pbmRleC5odG1sJyxcbiAgICAgIHdpZHRoOiA2ODcsXG4gICAgICBoZWlnaHQ6IDYyMyxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnJpZ2h0LXBhbmVsIC50YWInXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdza2lsbHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNPd25lcikge1xuICAgICAgLy8gTU9ESUY6IDAuOC54IG93bmVyIGRlcHJlY2F0ZWQgID0+IGlzT3duZXJcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlLmZsYWdnZWQ0ZGV2JylcbiAgICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2tpbGxEZXYoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnJlc2V0LW9jY3VwYXRpb24nKVxuICAgICAgICAuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5hY3Rvci5yZXNldE9jY3VwYXRpb24oKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yZXNldC1hcmNoZXR5cGUnKVxuICAgICAgICAuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5hY3Rvci5yZXNldEFyY2hldHlwZSgpKVxuICAgICAgaHRtbC5maW5kKCcub3Blbi1pdGVtJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGV0YWlscyhldmVudCkpXG4gICAgICAvLyBodG1sXG4gICAgICAvLyAgIC5maW5kKCdbbmFtZT1cImRhdGEuYXR0cmlicy5ocC52YWx1ZVwiXScpXG4gICAgICAvLyAgIC5jaGFuZ2UoYXN5bmMgZXZlbnQgPT57XG4gICAgICAvLyAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgLy8gICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAvLyAgICAgbGV0IHZhbHVlID0gTnVtYmVyKCBldmVudC5jdXJyZW50VGFyZ2V0Py52YWx1ZSlcbiAgICAgIC8vICAgICBpZiggIWlzTmFOKHZhbHVlKSkgYXdhaXQgdGhpcy5hY3Rvci5zZXRIcChldmVudClcbiAgICAgIC8vICAgICBlbHNlIHVpLm5vdGlmaWNhdGlvbnMud2FybignRXJyb3IgcGFyc2luZyBIUCB2YWx1ZScpXG4gICAgICAvLyAgIH0pXG4gICAgICBodG1sLmZpbmQoJy50b2dnbGUtbGlzdC1tb2RlJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgICB0aGlzLnRvZ2dsZVNraWxsTGlzdE1vZGUoZXZlbnQpXG4gICAgICB9KVxuICAgICAgaHRtbC5maW5kKCcudG9nZ2xlLXVuY29tbW9uLW1vZGUnKS5jbGljayhldmVudCA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlU2tpbGxVbmNvbW1vbk1vZGUoZXZlbnQpXG4gICAgICB9KVxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLnNhbml0eS1sb3NzLXR5cGUtYWRkJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25BZGRTYW5pdHlMb3NzUmVhc29uLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLnNhbml0eS1sb3NzLXR5cGUtZGVsZXRlJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25EZWxldGVTYW5pdHlMb3NzUmVhc29uLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWxcbiAgICAgICAgICAuZmluZCgnLm15dGhvc0VuY291bnRlcnNUb3RhbExvc3MnKVxuICAgICAgICAgIC5ibHVyKHRoaXMuX29uRWRpdFNhbml0eUxvc3NSZWFzb24uYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcudG9nZ2xlLWtlZXBlci1mbGFncycpXG4gICAgICAgICAgLmNsaWNrKHRoaXMuX29uVG9nZ2xlS2VlcGVyRmxhZ3MuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbC5maW5kKCcuYWRkLW1vbmV0YXJ5JykuY2xpY2sodGhpcy5fb25BZGRNb25ldGFyeS5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5yZW1vdmUtbW9uZXRhcnknKS5jbGljayh0aGlzLl9vblJlbW92ZU1vbmV0YXJ5LmJpbmQodGhpcykpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uQWRkTW9uZXRhcnkgKCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuYWN0b3Iuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuYWN0b3Iuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcykgOiBbXVxuICAgIHZhbHVlcy5wdXNoKHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgbWluOiBudWxsLFxuICAgICAgbWF4OiBudWxsLFxuICAgICAgY2FzaFR5cGU6IDAsXG4gICAgICBjYXNoVmFsdWU6ICcnLFxuICAgICAgYXNzZXRzVHlwZTogMCxcbiAgICAgIGFzc2V0c1ZhbHVlOiAnJyxcbiAgICAgIHNwZW5kaW5nVHlwZTogMCxcbiAgICAgIHNwZW5kaW5nVmFsdWU6ICcnXG4gICAgfSlcbiAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBfb25SZW1vdmVNb25ldGFyeSAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGRpdiA9IGEuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IHZhbHVlcyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuYWN0b3Iuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcylcbiAgICB2YWx1ZXMuc3BsaWNlKE51bWJlcihkaXYuZGF0YXNldC5pbmRleCksIDEpXG4gICAgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyc6IHZhbHVlcyB9KVxuICB9XG5cbiAgX29uVG9nZ2xlS2VlcGVyRmxhZ3MgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcpIHtcbiAgICAgIGNhc2UgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEZsYWcoXG4gICAgICAgICAgJ0NvQzcnLFxuICAgICAgICAgICdteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkJyxcbiAgICAgICAgICAhdGhpcy5hY3Rvci5teXRob3NJbnNhbml0eUV4cGVyaWVuY2VkXG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ215dGhvc0hhcmRlbmVkJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ215dGhvc0hhcmRlbmVkJywgIXRoaXMuYWN0b3IubXl0aG9zSGFyZGVuZWQpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQWRkU2FuaXR5TG9zc1JlYXNvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgbmV3IENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIoXG4gICAgICB7XG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLFxuICAgICAgICB0eXBlOiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZVxuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKS5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkVkaXRTYW5pdHlMb3NzUmVhc29uIChldmVudCkge1xuICAgIGNvbnN0IGlucHV0ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IG9mZnNldCA9IGlucHV0LmNsb3Nlc3QoJy5mbGV4cm93JykuZGF0YSgnb2Zmc2V0JylcbiAgICBpZiAodHlwZW9mIHRoaXMuYWN0b3Iuc3lzdGVtLnNhbml0eUxvc3NFdmVudHM/LltvZmZzZXRdPy50b3RhbExvc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cylcbiAgICAgIHNhbml0eUxvc3NFdmVudHNbb2Zmc2V0XS50b3RhbExvc3MgPSBwYXJzZUludChpbnB1dC52YWwoKSwgMTApXG4gICAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHMgfSlcbiAgICB9XG4gIH1cblxuICBfb25EZWxldGVTYW5pdHlMb3NzUmVhc29uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBvZmZzZXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAuY2xvc2VzdCgnLmZsZXhyb3cnKVxuICAgICAgLmRhdGEoJ29mZnNldCcpXG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9IHRoaXMuYWN0b3Iuc3lzdGVtLnNhbml0eUxvc3NFdmVudHMgPz8gW11cbiAgICBzYW5pdHlMb3NzRXZlbnRzLnNwbGljZShvZmZzZXQsIDEpXG4gICAgc2FuaXR5TG9zc0V2ZW50cy5zb3J0KGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xuICAgICAgcmV0dXJuIGxlZnQudHlwZS5sb2NhbGVDb21wYXJlKHJpZ2h0LnR5cGUpXG4gICAgfSlcbiAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHMgfSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVNraWxsTGlzdE1vZGUgKGV2ZW50KSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ3NraWxsTGlzdE1vZGUnLFxuICAgICAgIXRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJylcbiAgICApXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyB0b2dnbGVTa2lsbFVuY29tbW9uTW9kZSAoZXZlbnQpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoXG4gICAgICAnQ29DNycsXG4gICAgICAnc2tpbGxTaG93VW5jb21tb24nLFxuICAgICAgIXRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpXG4gICAgKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uU2tpbGxEZXYgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICBhd2FpdCB0aGlzLmFjdG9yLmRldmVsb3BTa2lsbChza2lsbElkLCBldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIF9vbkl0ZW1EZXRhaWxzIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB0eXBlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGVcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvclt0eXBlXVxuICAgIGlmIChpdGVtKSBpdGVtLnNoZWV0LnJlbmRlcih0cnVlKVxuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLm1vbmV0YXJ5Py52YWx1ZXMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJ10gPSBPYmplY3QudmFsdWVzKHN5c3RlbS5tb25ldGFyeS52YWx1ZXMgfHwgW10pXG4gICAgfVxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgc3RhdGljIHJlbmRlclNoZWV0IChzaGVldCwgaHRtbCkge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvdmVycmlkZVNoZWV0QXJ0d29yaycpKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJykudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAnbnVsbCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1tYWluLXNoZWV0LWJnJyxcbiAgICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1tYWluLXNoZWV0LWJnJyxcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgIClcbiAgICAgICAgICAvLyBjb25zdCBib3JkZXJJbWFnZSA9IHNoZWV0LmVsZW1lbnQuZmluZCgnZm9ybScpLmNzcygnYm9yZGVyLWltYWdlJyk7XG4gICAgICAgICAgLy8gc2hlZXQuZWxlbWVudC5maW5kKCdmb3JtJykuY3NzKCdib3JkZXItaW1hZ2UnLCAnJyk7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnKSAhPT0gJ3NsaWNlJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgbGV0IHN0eWxlU2hlZXQsIGNzc1J1bGVJbmRleFxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkb2N1bWVudC5zdHlsZVNoZWV0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQuc3R5bGVTaGVldHNbaV0uaHJlZj8uZW5kc1dpdGgoJ2NvYzdnLmNzcycpKSB7XG4gICAgICAgICAgICAgICAgc3R5bGVTaGVldCA9IGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3R5bGVTaGVldCkge1xuICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlU2hlZXQucnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBzdHlsZVNoZWV0LnJ1bGVzW2ldLnNlbGVjdG9yVGV4dCA9PT0gJy5zaGVldFYyLmNoYXJhY3RlciBmb3JtJ1xuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgY3NzUnVsZUluZGV4ID0gaVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjc3NSdWxlSW5kZXgpIHtcbiAgICAgICAgICAgICAgY29uc3QgQ1NTU3R5bGUgPSBzdHlsZVNoZWV0LnJ1bGVzW2Nzc1J1bGVJbmRleF0uc3R5bGVcbiAgICAgICAgICAgICAgQ1NTU3R5bGUucmVtb3ZlUHJvcGVydHkoJ2JvcmRlci1pbWFnZScpXG4gICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kJyxcbiAgICAgICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBzd2l0Y2ggKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJykpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdhdXRvJzpcbiAgICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnYXV0bycpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbnRhaW4nOlxuICAgICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdjb250YWluJylcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnY292ZXInOlxuICAgICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdjb3ZlcicpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2F1dG8nKVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3NcbiAgICAgICAgICAgIC5nZXQoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJylcbiAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpID09PSAnbnVsbCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1vdGhlci1zaGVldC1iZycsXG4gICAgICAgICAgICBcInVybCggJy4vYXNzZXRzL2ltYWdlcy92b2lkLndlYnAnKVwiXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICAgJy0tb3RoZXItc2hlZXQtYmcnLFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJykpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJykudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAnbnVsbCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1tYWluLXNoZWV0LWltYWdlJyxcbiAgICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1tYWluLXNoZWV0LWltYWdlJyxcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtTaGVldEltYWdlJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtGcm9udENvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1mcm9udC1jb2xvcicsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0JhY2tncm91bmRDb2xvcicpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtYmFjay1jb2xvcicsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0JhY2tncm91bmRDb2xvcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtaW50ZXJhY3RpdmUtY29sb3InLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKCctLXNraWxsLWxlbmd0aCcsICdhdXRvJylcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoJy0tc2tpbGwtc3BlY2lhbGl6YXRpb24tbGVuZ3RoJywgJ2F1dG8nKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250JykpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tU2hlZXRGb250ID0gbmV3IEZvbnRGYWNlKFxuICAgICAgICAgICdjdXN0b21TaGVldEZvbnQnLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udCcpXG4gICAgICAgIClcbiAgICAgICAgY3VzdG9tU2hlZXRGb250XG4gICAgICAgICAgLmxvYWQoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChsb2FkZWRGYWNlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5mb250cy5hZGQobG9hZGVkRmFjZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udEJvbGQnKSkge1xuICAgICAgICBjb25zdCBjdXN0b21TaGVldEN1cnNpdmVGb250ID0gbmV3IEZvbnRGYWNlKFxuICAgICAgICAgICdjdXN0b21TaGVldEZvbnQnLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udEJvbGQnKSxcbiAgICAgICAgICB7IHdlaWdodDogJ2JvbGQnIH1cbiAgICAgICAgKVxuICAgICAgICBjdXN0b21TaGVldEN1cnNpdmVGb250XG4gICAgICAgICAgLmxvYWQoKVxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChsb2FkZWRGYWNlKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5mb250cy5hZGQobG9hZGVkRmFjZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyb3IpXG4gICAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udFNpemUnKSkge1xuICAgICAgICBjb25zdCBzaXplID0gYCR7Z2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250U2l6ZScpfXB4YFxuICAgICAgICBpZiAoc2l6ZSAhPT0gJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScpKSB7XG4gICAgICAgICAgJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScsIHNpemUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHNoZWV0LmFjdG9yPy5zeXN0ZW0ucGFubmVsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2hlZXQuYWN0b3Iuc3lzdGVtLnBhbm5lbCkpIHtcbiAgICAgICAgY29uc3QgcGFubmVsQ2xhc3MgPSBjaGF0SGVscGVyLmNhbWVsQ2FzZVRvSHlwaGVuKGtleSlcbiAgICAgICAgY29uc3QgcGFubmVsID0gaHRtbC5maW5kKGAucGFubmVsLiR7cGFubmVsQ2xhc3N9YClcbiAgICAgICAgaWYgKHZhbHVlLmV4cGFuZGVkKSBwYW5uZWwuYWRkQ2xhc3MoJ2V4cGFuZGVkJylcbiAgICAgICAgZWxzZSBwYW5uZWwucmVtb3ZlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NvbWJhdCB7XG4gIHN0YXRpYyByZW5kZXJDb21iYXRUcmFja2VyIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICBjb25zdCBjdXJyZW50Q29tYmF0ID0gZGF0YS5jb21iYXRzW2RhdGEuY3VycmVudEluZGV4IC0gMV1cbiAgICBpZiAoIWN1cnJlbnRDb21iYXQpIHJldHVyblxuXG4gICAgLy8gVE9ETyA6IFNpIGxlIGNvbWJhdCBlc3QgZGVqYSBkZWJ1dMOpIGF2YW50IGNoYXJnZW1lbnQgbGEgZm9uY3Rpb24gZCdpbml0aWF0aXZlIHBvaW50ZSB2ZXJzIGwnYW5jaWVubmUuXG4gICAgLy8gbGEgZm9uY3Rpb24gYXR0cmlidcOpZSBlc3QgZGF0YS5jb21iYXQucm9sbEluaXRpYXRpdmVcbiAgICBodG1sLmZpbmQoJy5jb21iYXRhbnQnKS5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgLy8gaWYoIGdhbWUuY29tYmF0LnN0YXJ0ZWQpe1xuXG4gICAgICBjb25zdCBjb21iSWQgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29tYmF0YW50LWlkJylcbiAgICAgIGNvbnN0IGNvbWJhdGFudENvbnRyb2xzRGl2ID0gZWwucXVlcnlTZWxlY3RvcignLmNvbWJhdGFudC1jb250cm9scycpXG4gICAgICAvLyBjb25zdCBjb21iYXRhbnQgPSBnYW1lLmNvbWJhdC5nZXRDb21iYXRhbnQoY29tYklkKTtcbiAgICAgIGNvbnN0IGNvbWJhdGFudCA9IGN1cnJlbnRDb21iYXQuY29tYmF0YW50cy5nZXQoY29tYklkKVxuXG4gICAgICBpZiAoY29tYmF0YW50LmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcbiAgICAgICAgJChjb21iYXRhbnRDb250cm9sc0RpdikucHJlcGVuZChcbiAgICAgICAgICBgPGEgY2xhc3M9XCJjb21iYXRhbnQtY29udHJvbCBhY3RpdmUgYWRkLWluaXRcIiB0aXRsZT1cIiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuUHV0R3VuQXdheSdcbiAgICAgICAgICApfVwiIGRhdGEtY29udHJvbD1cImRyYXdHdW5cIj48aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tcmV2b2x2ZXJcIj48L2k+PC9hPmBcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChjb21iYXRhbnRDb250cm9sc0RpdikucHJlcGVuZChcbiAgICAgICAgICBgPGEgY2xhc3M9XCJjb21iYXRhbnQtY29udHJvbCBhZGQtaW5pdFwiIHRpdGxlPVwiJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5EcmF3R3VuJ1xuICAgICAgICAgICl9XCIgZGF0YS1jb250cm9sPVwiZHJhd0d1blwiPjxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1yZXZvbHZlclwiPjwvaT48L2E+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2luaXRpYXRpdmVSdWxlJykgPT09ICdvcHRpb25hbCcgJiZcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUluaXRBc1RleHQnKVxuICAgICAgKSB7XG4gICAgICAgIGlmIChjb21iYXRhbnQuaW5pdGlhdGl2ZSkge1xuICAgICAgICAgIGNvbnN0IHRva2VuSW5pdGlhdGl2ZSA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy50b2tlbi1pbml0aWF0aXZlJylcbiAgICAgICAgICBjb25zdCBpbml0aWF0aXZlVGVzdCA9IHRva2VuSW5pdGlhdGl2ZS5xdWVyeVNlbGVjdG9yKCcuaW5pdGlhdGl2ZScpXG4gICAgICAgICAgY29uc3Qgcm9sbCA9XG4gICAgICAgICAgICAxMDAgKiBjb21iYXRhbnQuaW5pdGlhdGl2ZSAtIDEwMCAqIE1hdGguZmxvb3IoY29tYmF0YW50LmluaXRpYXRpdmUpXG4gICAgICAgICAgc3dpdGNoIChNYXRoLmZsb29yKGNvbWJhdGFudC5pbml0aWF0aXZlKSkge1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZTpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2Z1bWJsZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZmFpbHVyZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ3JlZ3VsYXItc3VjY2VzcycpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eVJlZ3VsYXInXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2hhcmQtc3VjY2VzcycpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eUhhcmQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2V4dHJlbWUtc3VjY2VzcycpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eUV4dHJlbWUnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdjcml0aWNhbCcpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsRGlmZmljdWx0eUNyaXRpY2FsJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjb21iYXRhbnQuaW5pdGlhdGl2ZSA8IDApIHtcbiAgICAgICAgY29uc3QgaDQgPSBlbC5xdWVyeVNlbGVjdG9yKCcudG9rZW4tbmFtZScpLnF1ZXJ5U2VsZWN0b3IoJ2g0JylcbiAgICAgICAgY29uc3Qgc3BhbiA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4uaW5pdGlhdGl2ZScpXG4gICAgICAgIGg0LnN0eWxlLmZvbnRXZWlnaHQgPSAnOTAwJ1xuICAgICAgICBoNC5zdHlsZS50ZXh0U2hhZG93ID0gJzFweCAxcHggNHB4IGRhcmtyZWQnXG4gICAgICAgIHNwYW4uc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICAgIHNwYW4uc3R5bGUudGV4dFNoYWRvdyA9ICcxcHggMXB4IDRweCBkYXJrcmVkJ1xuXG4gICAgICAgIGVsLnN0eWxlLmNvbG9yID0gJ2RhcmtyZWQnXG4gICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmQgPSAnYmxhY2snXG4gICAgICAgIGVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnOTAwJ1xuICAgICAgfVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcuYWRkLWluaXQnKS5jbGljayhldmVudCA9PiBDb0M3Q29tYmF0Ll9vblRvZ2dsZUd1bihldmVudCkpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uVG9nZ2xlR3VuIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IGJ0biA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsaSA9IGJ0bi5jbG9zZXN0KCcuY29tYmF0YW50JylcbiAgICBjb25zdCBjID0gYXdhaXQgZ2FtZS5jb21iYXQuY29tYmF0YW50cy5nZXQobGkuZGF0YXNldC5jb21iYXRhbnRJZClcbiAgICBpZiAoYy5hY3Rvci5pc093bmVyKSB7XG4gICAgICBpZiAoYy5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpKSB7XG4gICAgICAgIGF3YWl0IGMuc2V0RmxhZygnQ29DNycsICdoYXNHdW4nLCBmYWxzZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IGMuc2V0RmxhZygnQ29DNycsICdoYXNHdW4nLCB0cnVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG5ld0luaXQgPSBhd2FpdCBjLmFjdG9yLnJvbGxJbml0aWF0aXZlKCEhYy5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpKVxuICAgIGlmIChjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcbiAgICAgIGlmIChjLmluaXRpYXRpdmUgPCBuZXdJbml0KSBnYW1lLmNvbWJhdC5zZXRJbml0aWF0aXZlKGMuaWQsIG5ld0luaXQpXG4gICAgfSBlbHNlIGdhbWUuY29tYmF0LnNldEluaXRpYXRpdmUoYy5pZCwgbmV3SW5pdClcbiAgfVxufVxuXG4vKipcbiAqIFJvbGwgaW5pdGlhdGl2ZSBmb3Igb25lIG9yIG11bHRpcGxlIENvbWJhdGFudHMgd2l0aGluIHRoZSBDb21iYXQgZW50aXR5XG4gKiBAcGFyYW0ge3N0cmluZ3xzdHJpbmdbXX0gaWRzICAgICBBIENvbWJhdGFudCBpZCBvciBBcnJheSBvZiBpZHMgZm9yIHdoaWNoIHRvIHJvbGxcbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucz17fV0gICAgIEFkZGl0aW9uYWwgb3B0aW9ucyB3aGljaCBtb2RpZnkgaG93IGluaXRpYXRpdmUgcm9sbHMgYXJlIGNyZWF0ZWQgb3IgcHJlc2VudGVkLlxuICogQHBhcmFtIHtzdHJpbmd8bnVsbH0gW29wdGlvbnMuZm9ybXVsYV0gICAgICAgICBBIG5vbi1kZWZhdWx0IGluaXRpYXRpdmUgZm9ybXVsYSB0byByb2xsLiBPdGhlcndpc2UgdGhlIHN5c3RlbSBkZWZhdWx0IGlzIHVzZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnVwZGF0ZVR1cm49dHJ1ZV0gICAgIFVwZGF0ZSB0aGUgQ29tYmF0IHR1cm4gYWZ0ZXIgYWRkaW5nIG5ldyBpbml0aWF0aXZlIHNjb3JlcyB0byBrZWVwIHRoZSB0dXJuIG9uIHRoZSBzYW1lIENvbWJhdGFudC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9ucy5tZXNzYWdlT3B0aW9ucz17fV0gICAgQWRkaXRpb25hbCBvcHRpb25zIHdpdGggd2hpY2ggdG8gY3VzdG9taXplIGNyZWF0ZWQgQ2hhdCBNZXNzYWdlc1xuICogQHJldHVybiB7UHJvbWlzZTxDb21iYXQ+fSAgICAgICAgQSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIHRoZSB1cGRhdGVkIENvbWJhdCBlbnRpdHkgb25jZSB1cGRhdGVzIGFyZSBjb21wbGV0ZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJvbGxJbml0aWF0aXZlIChcbiAgaWRzLFxuICB7IGZvcm11bGEgPSBudWxsLCB1cGRhdGVUdXJuID0gdHJ1ZSwgbWVzc2FnZU9wdGlvbnMgPSB7fSB9ID0ge31cbikge1xuICAvLyBJdGVyYXRlIG92ZXIgQ29tYmF0YW50cywgcGVyZm9ybWluZyBhbiBpbml0aWF0aXZlIHJvbGwgZm9yIGVhY2hcbiAgY29uc3QgdXBkYXRlcyA9IFtdXG4gIGZvciAoY29uc3QgWywgaWRdIG9mIGlkcy5lbnRyaWVzKCkpIHtcbiAgICAvLyBHZXQgQ29tYmF0YW50IGRhdGEgKG5vbi1zdHJpY3RseSlcbiAgICBjb25zdCBjb21iYXRhbnQgPSB0aGlzLmNvbWJhdGFudHMuZ2V0KGlkKVxuXG4gICAgLy8gUHJvZHVjZSBhbiBpbml0aWF0aXZlIHJvbGwgZm9yIHRoZSBDb21iYXRhbnRcbiAgICBjb25zdCByb2xsID0gYXdhaXQgY29tYmF0YW50LmFjdG9yLnJvbGxJbml0aWF0aXZlKFxuICAgICAgISFjb21iYXRhbnQuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKVxuICAgIClcbiAgICB1cGRhdGVzLnB1c2goeyBfaWQ6IGlkLCBpbml0aWF0aXZlOiByb2xsIH0pXG4gIH1cbiAgaWYgKCF1cGRhdGVzLmxlbmd0aCkgcmV0dXJuIHRoaXNcblxuICAvLyBVcGRhdGUgbXVsdGlwbGUgY29tYmF0YW50c1xuICBhd2FpdCB0aGlzLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdDb21iYXRhbnQnLCB1cGRhdGVzKVxuXG4gIHJldHVybiB0aGlzXG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIEl0ZW0gKi9cbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0NJREJhdGNoIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY29jLWlkLWVkaXRvciddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY29jLWlkLWJhdGNoLmhicycsXG4gICAgICB3aWR0aDogNzAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICB0aXRsZTogJ0NvQzcuQ29DSURGbGFnLnRpdGxlJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgc3VibWl0T25DbG9zZTogZmFsc2UsXG4gICAgICBzdWJtaXRPbkNoYW5nZTogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG4gICAgc2hlZXREYXRhLmZvdW5kS2V5cyA9IE9iamVjdC5rZXlzKHNoZWV0RGF0YS5vYmplY3QuZm91bmRLZXlzKS5yZWR1Y2UoKG91dCwga2V5KSA9PiB7XG4gICAgICBvdXQucHVzaCh7IG5hbWU6IGtleSwga2V5OiBzaGVldERhdGEub2JqZWN0LmZvdW5kS2V5c1trZXldIH0pXG4gICAgICByZXR1cm4gb3V0XG4gICAgfSwgW10pLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgIHNoZWV0RGF0YS5taXNzaW5nTmFtZXMgPSBPYmplY3Qua2V5cyhzaGVldERhdGEub2JqZWN0Lm1pc3NpbmdOYW1lcykucmVkdWNlKChvdXQsIGtleSkgPT4ge1xuICAgICAgb3V0LnB1c2goeyBrZXk6IHNoZWV0RGF0YS5vYmplY3QuZm91bmRLZXlzW2tleV0gPz8gJycsIG5hbWU6IGtleSwgY3VzdG9tOiBzaGVldERhdGEub2JqZWN0Lm1pc3NpbmdOYW1lc1trZXldLCBzdWZmaXg6IHNoZWV0RGF0YS5vYmplY3QubWlzc2luZ05hbWVzW2tleV0ucmVwbGFjZSh0aGlzLm9iamVjdC5zdWZmaXhSZWdFeHAsICcnKSB9KVxuICAgICAgcmV0dXJuIG91dFxuICAgIH0sIFtdKS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcuZXhpc3RpbmcnKS5jaGFuZ2UodGhpcy5vblNldE5hbWUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5mYS13YW5kLW1hZ2ljJykuY2xpY2sodGhpcy5vbkNsaWNrR3Vlc3MuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2lucHV0Jykua2V5dXAodGhpcy5vbktleXVwLmJpbmQodGhpcykpXG4gIH1cblxuICBvblNldE5hbWUgKGV2ZW50KSB7XG4gICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIHRoaXMub2JqZWN0Lm1pc3NpbmdOYW1lc1tvYmouY2xvc2VzdCgnbGknKS5kYXRhKCduYW1lJyldID0gb2JqLnZhbCgpXG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIG9uQ2xpY2tHdWVzcyAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbmFtZSA9IG9iai5jbG9zZXN0KCdsaScpLmRhdGEoJ25hbWUnKVxuICAgIHRoaXMub2JqZWN0Lm1pc3NpbmdOYW1lc1tuYW1lXSA9IHRoaXMub2JqZWN0LmlkUHJlZml4ICsgQ29DN1V0aWxpdGllcy50b0tlYmFiQ2FzZShuYW1lKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBvbktleXVwIChldmVudCkge1xuICAgIGNvbnN0IG9iaiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBuYW1lID0gb2JqLmNsb3Nlc3QoJ2xpJykuZGF0YSgnbmFtZScpXG4gICAgdGhpcy5vYmplY3QubWlzc2luZ05hbWVzW25hbWVdID0gdGhpcy5vYmplY3QuaWRQcmVmaXggKyBvYmoudmFsKClcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGlmIChldmVudC5zdWJtaXR0ZXIpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC50eXBlTmFtZSA9PT0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNraWxsJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIGF3YWl0IENvQ0lEQmF0Y2gucHJvY2Vzc1NraWxsS2V5cyh0aGlzLm9iamVjdC51cGRhdGVMaXN0LCB0aGlzLm9iamVjdC5taXNzaW5nTmFtZXMpXG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5yZXNvbHZlKHRydWUpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHByb2Nlc3NTa2lsbEtleXMgKHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcykge1xuICAgIGNvbnN0IGl0ZW1zID0gW11cbiAgICBjb25zdCBhY3RvcnMgPSB7fVxuICAgIGNvbnN0IHNjZW5lcyA9IHt9XG4gICAgZm9yIChjb25zdCB1cGRhdGUgb2YgdXBkYXRlTGlzdCkge1xuICAgICAgdXBkYXRlLmNvY2lkRmxhZy5pZCA9IG1pc3NpbmdOYW1lc1t1cGRhdGUubmFtZV1cbiAgICAgIGlmICh0eXBlb2YgdXBkYXRlLmNvY2lkRmxhZy5sYW5nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGUuY29jaWRGbGFnLmxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuY29jaWRGbGFnLnByaW9yaXR5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGUuY29jaWRGbGFnLnByaW9yaXR5ID0gMFxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuY29jaWRGbGFnLmVyYXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZS5jb2NpZEZsYWcuZXJhcyA9IHt9XG4gICAgICB9XG4gICAgICBjb25zdCBmbGFncyA9IGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdCh7IGZsYWdzOiB7IENvQzc6IHsgY29jaWRGbGFnOiB1cGRhdGUuY29jaWRGbGFnIH0gfSB9KVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuc2NlbmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2NlbmVzW3VwZGF0ZS5zY2VuZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQodXBkYXRlLnNjZW5lKVxuICAgICAgICAgIHNjZW5lc1t1cGRhdGUuc2NlbmVdID0gc2NlbmUudG9PYmplY3QoKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRva2VuT2Zmc2V0ID0gc2NlbmVzW3VwZGF0ZS5zY2VuZV0udG9rZW5zLmZpbmRJbmRleCh0ID0+IHQuX2lkID09PSB1cGRhdGUudG9rZW4pXG4gICAgICAgIGlmICh0b2tlbk9mZnNldCA+IC0xKSB7XG4gICAgICAgICAgY29uc3QgaXRlbU9mZnNldCA9IHNjZW5lc1t1cGRhdGUuc2NlbmVdLnRva2Vuc1t0b2tlbk9mZnNldF0uYWN0b3JEYXRhLml0ZW1zLmZpbmRJbmRleChpID0+IGkuX2lkID09PSB1cGRhdGUuaXRlbSlcbiAgICAgICAgICBpZiAoaXRlbU9mZnNldCA+IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBleHBhbmRlZEZsYWdzID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoT2JqZWN0LmVudHJpZXMoZmxhZ3MpLnJlZHVjZSgob3V0LCBlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICBpZiAoZW50cnlbMF0ubWF0Y2goL15mbGFnc1xcLkNvQzdcXC5jb2NpZEZsYWcvKSkge1xuICAgICAgICAgICAgICAgIG91dFtlbnRyeVswXV0gPSBlbnRyeVsxXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBvdXRcbiAgICAgICAgICAgIH0sIHt9KSlcbiAgICAgICAgICAgIHNjZW5lc1t1cGRhdGUuc2NlbmVdLnRva2Vuc1t0b2tlbk9mZnNldF0uYWN0b3JEYXRhLml0ZW1zW2l0ZW1PZmZzZXRdID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzY2VuZXNbdXBkYXRlLnNjZW5lXS50b2tlbnNbdG9rZW5PZmZzZXRdLmFjdG9yRGF0YS5pdGVtc1tpdGVtT2Zmc2V0XSwgZXhwYW5kZWRGbGFncylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHVwZGF0ZS5hY3RvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBhY3RvcnNbdXBkYXRlLmFjdG9yXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBhY3RvcnNbdXBkYXRlLmFjdG9yXSA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgICBfaWQ6IHVwZGF0ZS5pdGVtXG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoZmxhZ3MpKSB7XG4gICAgICAgICAgaWYgKGtleS5tYXRjaCgvXmZsYWdzXFwuQ29DN1xcLmNvY2lkRmxhZy8pKSB7XG4gICAgICAgICAgICBpdGVtW2tleV0gPSBmbGFnc1trZXldXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGFjdG9yc1t1cGRhdGUuYWN0b3JdLnB1c2goaXRlbSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB7XG4gICAgICAgICAgX2lkOiB1cGRhdGUuaXRlbVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGZsYWdzKSkge1xuICAgICAgICAgIGlmIChrZXkubWF0Y2goL15mbGFnc1xcLkNvQzdcXC5jb2NpZEZsYWcvKSkge1xuICAgICAgICAgICAgaXRlbVtrZXldID0gZmxhZ3Nba2V5XVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpdGVtcy5sZW5ndGgpIHtcbiAgICAgIGF3YWl0IEl0ZW0udXBkYXRlRG9jdW1lbnRzKGl0ZW1zKVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMoYWN0b3JzKS5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3QgYWN0b3JJZCBvZiBPYmplY3Qua2V5cyhhY3RvcnMpKSB7XG4gICAgICAgIGF3YWl0IEl0ZW0udXBkYXRlRG9jdW1lbnRzKGFjdG9yc1thY3RvcklkXSwgeyBwYXJlbnQ6IGdhbWUuYWN0b3JzLmdldChhY3RvcklkKSB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMoc2NlbmVzKS5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3Qgc2NlbmVJZCBvZiBPYmplY3Qua2V5cyhzY2VuZXMpKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIHNjZW5lLnVwZGF0ZShzY2VuZXNbc2NlbmVJZF0pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcG9wdWxhdGVTa2lsbEtleXMgKHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcywgZm91bmRLZXlzKSB7XG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBnYW1lLmFjdG9ycy5jb250ZW50cykge1xuICAgICAgY29uc3QgYWN0b3JEYXRhID0gYWN0b3IudG9PYmplY3QoKVxuICAgICAgaWYgKGFjdG9yRGF0YS5pdGVtcykge1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWN0b3JEYXRhLml0ZW1zKSB7XG4gICAgICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGl0ZW0udG9PYmplY3QoKSA6IGl0ZW1cbiAgICAgICAgICBpZiAoaXRlbURhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgaWYgKCFpdGVtRGF0YS5mbGFncy5Db0M3Py5jb2NpZEZsYWc/LmlkPy5tYXRjaCgvXmkuc2tpbGwvKSkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPSAnJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHVwZGF0ZUxpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgYWN0b3I6IGFjdG9yLl9pZCxcbiAgICAgICAgICAgICAgICBpdGVtOiBpdGVtRGF0YS5faWQsXG4gICAgICAgICAgICAgICAgbmFtZTogaXRlbURhdGEubmFtZSxcbiAgICAgICAgICAgICAgICBjb2NpZEZsYWc6IGl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZyA/PyB7fVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZm91bmRLZXlzW2l0ZW1EYXRhLm5hbWVdID0gaXRlbURhdGEuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGdhbWUuaXRlbXMuY29udGVudHMpIHtcbiAgICAgIGNvbnN0IGl0ZW1EYXRhID0gaXRlbSBpbnN0YW5jZW9mIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPyBpdGVtLnRvT2JqZWN0KCkgOiBpdGVtXG4gICAgICBpZiAoaXRlbURhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICBpZiAoIWl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQ/Lm1hdGNoKC9eaS5za2lsbC8pKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPSAnJ1xuICAgICAgICAgIH1cbiAgICAgICAgICB1cGRhdGVMaXN0LnB1c2goe1xuICAgICAgICAgICAgaXRlbTogaXRlbURhdGEuX2lkLFxuICAgICAgICAgICAgbmFtZTogaXRlbURhdGEubmFtZSxcbiAgICAgICAgICAgIGNvY2lkRmxhZzogaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnID8/IHt9XG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3VuZEtleXNbaXRlbURhdGEubmFtZV0gPSBpdGVtRGF0YS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc2NlbmUgb2YgZ2FtZS5zY2VuZXMpIHtcbiAgICAgIGNvbnN0IHNjZW5lRGF0YSA9IHNjZW5lLnRvT2JqZWN0KClcbiAgICAgIGZvciAoY29uc3QgdG9rZW4gb2Ygc2NlbmVEYXRhLnRva2VucyA/PyBbXSkge1xuICAgICAgICBpZiAodG9rZW4uYWN0b3JJZCAmJiAhdG9rZW4uYWN0b3JMaW5rKSB7XG4gICAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodG9rZW4uYWN0b3JEYXRhKVxuICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3RvckRhdGEuaXRlbXMgPz8gW10pIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1EYXRhID0gaXRlbSBpbnN0YW5jZW9mIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPyBpdGVtLnRvT2JqZWN0KCkgOiBpdGVtXG4gICAgICAgICAgICBpZiAoaXRlbURhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgICBpZiAoIWl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQ/Lm1hdGNoKC9eaS5za2lsbC8pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPSAnJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGVMaXN0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgc2NlbmU6IHNjZW5lRGF0YS5faWQsXG4gICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW4uX2lkLFxuICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbURhdGEuX2lkLFxuICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbURhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgIGNvY2lkRmxhZzogaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnID8/IHt9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3VuZEtleXNbaXRlbURhdGEubmFtZV0gPSBpdGVtRGF0YS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhtaXNzaW5nTmFtZXMpLmZpbHRlcihrZXkgPT4gbWlzc2luZ05hbWVzW2tleV0gPT09ICcnKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogL15pXFwuc2tpbGxcXC4vLCB0eXBlOiAnaScsIGVyYTogZmFsc2UgfSlcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBmb3VuZEtleXNbaXRlbS5uYW1lXSA9IGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdChnYW1lLmkxOG4udHJhbnNsYXRpb25zLkNvQzcuQ29DSURGbGFnLmtleXMgPz8ge30pKSB7XG4gICAgICAgIGZvdW5kS2V5c1tnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5rZXlzLicgKyBrZXkpXSA9IGtleVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBuYW1lIGluIG1pc3NpbmdOYW1lcykge1xuICAgICAgICBpZiAodHlwZW9mIGZvdW5kS2V5c1tuYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBtaXNzaW5nTmFtZXNbbmFtZV0gPSBmb3VuZEtleXNbbmFtZV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKHR5cGUpIHtcbiAgICBjb25zdCB1cGRhdGVMaXN0ID0gW11cbiAgICBjb25zdCBtaXNzaW5nTmFtZXMgPSB7fVxuICAgIGNvbnN0IGZvdW5kS2V5cyA9IHt9XG4gICAgbGV0IHR5cGVOYW1lID0gJydcbiAgICBsZXQgaWRQcmVmaXggPSAnJ1xuICAgIGxldCBzdWZmaXhSZWdFeHAgPSBudWxsXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgIHR5cGVOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNraWxsJylcbiAgICAgICAgaWRQcmVmaXggPSAnaS5za2lsbC4nXG4gICAgICAgIHN1ZmZpeFJlZ0V4cCA9IC9eaVxcLnNraWxsXFwuL1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGF3YWl0IENvQ0lEQmF0Y2gucG9wdWxhdGVTa2lsbEtleXModXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzLCBmb3VuZEtleXMpXG4gICAgaWYgKE9iamVjdC5rZXlzKG1pc3NpbmdOYW1lcykuZmlsdGVyKGtleSA9PiBtaXNzaW5nTmFtZXNba2V5XSA9PT0gJycpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYXdhaXQgQ29DSURCYXRjaC5wcm9jZXNzU2tpbGxLZXlzKHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcylcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDb0NJREJhdGNoKHsgdHlwZU5hbWUsIGlkUHJlZml4LCBzdWZmaXhSZWdFeHAsIHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcywgZm91bmRLZXlzLCByZXNvbHZlIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgRGlhbG9nLCBmb3VuZHJ5LCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0NJREJhdGNoIH0gZnJvbSAnLi9hcHBzL2NvYy1pZC1iYXRjaC5qcydcblxuZXhwb3J0IGNsYXNzIFVwZGF0ZXIge1xuICBzdGF0aWMgYXN5bmMgY2hlY2tGb3JVcGRhdGUgKCkge1xuICAgIGxldCBzeXN0ZW1VcGRhdGVWZXJzaW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicpXG4gICAgaWYgKGdhbWUuYWN0b3JzLnNpemUgKyBnYW1lLnNjZW5lcy5zaXplICsgZ2FtZS5pdGVtcy5zaXplICsgZ2FtZS5qb3VybmFsLnNpemUgKyBnYW1lLnRhYmxlcy5zaXplID09PSAwKSB7XG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gYWN0b3JzLCBpdGVtcywgam91cm5hbHMsIHJvbGwgdGFibGVzLCBvciBzY2VuZXMgc2tpcCB3b3JsZCB1cGRhdGVcbiAgICAgIHN5c3RlbVVwZGF0ZVZlcnNpb24gPSBnYW1lLnN5c3RlbS52ZXJzaW9uXG4gICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgc3lzdGVtVXBkYXRlVmVyc2lvbilcbiAgICB9XG4gICAgY29uc3QgcnVuTWlncmF0ZSA9IGZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS5zeXN0ZW0udmVyc2lvbiwgc3lzdGVtVXBkYXRlVmVyc2lvbiA/PyAnMCcpXG4gICAgdGhpcy51cGRhdGVkTW9kdWxlcyA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJykgfHwge31cbiAgICB0aGlzLmN1cnJlbnRNb2R1bGVzID0ge31cbiAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgaWYgKCFbJ0NvQzcnLCAnd29ybGQnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lKSAmJiBbJ0FjdG9yJywgJ0l0ZW0nLCAnU2NlbmUnXS5pbmNsdWRlcyhwYWNrLm1ldGFkYXRhLnR5cGUpKSB7XG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuY3VycmVudE1vZHVsZXMsIHBhY2subWV0YWRhdGEucGFja2FnZU5hbWUpKSB7XG4gICAgICAgICAgLy8gT25seSBuZWVkIHRvIGNoZWNrIGVhY2ggbW9kdWxlIG9uY2VcbiAgICAgICAgICBjb25zdCBtb2R1bGUgPSBnYW1lLm1vZHVsZXMuZ2V0KHBhY2subWV0YWRhdGEucGFja2FnZU5hbWUpXG4gICAgICAgICAgaWYgKG1vZHVsZSkge1xuICAgICAgICAgICAgaWYgKHJ1bk1pZ3JhdGUgfHwgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLnVwZGF0ZWRNb2R1bGVzLCBtb2R1bGUuaWQpIHx8IFN0cmluZyh0aGlzLnVwZGF0ZWRNb2R1bGVzW21vZHVsZS5pZF0pICE9PSBTdHJpbmcobW9kdWxlLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAgIC8vIEEgbWlncmF0aW9uIGlzIHJlcXVpcmVkLCBtb2R1bGUgaGFzIG5vdCBiZWVuIHVwZGF0ZWQgYmVmb3JlLCBvciB0aGUgdmVyc2lvbiBudW1iZXIgaGFzIGNoYW5nZWRcbiAgICAgICAgICAgICAgdGhpcy5jdXJyZW50TW9kdWxlc1ttb2R1bGUuaWRdID0gbW9kdWxlLnZlcnNpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJ1bk1pZ3JhdGUgfHwgT2JqZWN0LmtleXModGhpcy5jdXJyZW50TW9kdWxlcykubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIG5ldyBEaWFsb2coe1xuICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UaXRsZScpLFxuICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRNb2R1bGVzKS5sZW5ndGggPT09IDBcbiAgICAgICAgICAgICAgPyAnQ29DNy5NaWdyYXRlLk1lc3NhZ2UnXG4gICAgICAgICAgICAgIDogJ0NvQzcuTWlncmF0ZS5XaXRoTW9kdWxlc01lc3NhZ2UnLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB2ZXJzaW9uOiBnYW1lLnN5c3RlbS52ZXJzaW9uLFxuICAgICAgICAgICAgICBtb2R1bGVzOlxuICAgICAgICAgICAgICAgICc8dWw+PGxpPicgK1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpXG4gICAgICAgICAgICAgICAgICAubWFwKG1vZCA9PiBnYW1lLm1vZHVsZXMuZ2V0KG1vZCkudGl0bGUpXG4gICAgICAgICAgICAgICAgICAuam9pbignPC9saT48bGk+JykgK1xuICAgICAgICAgICAgICAgICc8L2xpPjwvdWw+J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25VcGRhdGUnKSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IFVwZGF0ZXIudXBkYXRlKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBza2lwOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25Ta2lwJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pLnJlbmRlcih0cnVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IERpYWxvZyh7XG4gICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRpdGxlJyksXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkdNUmVxdWlyZWQnLCB7XG4gICAgICAgICAgICB2ZXJzaW9uOiBnYW1lLnN5c3RlbS52ZXJzaW9uXG4gICAgICAgICAgfSksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgT0s6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvbk9rYXknKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZSAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGVEb2N1bWVudHMoKVxuXG4gICAgLy8gLy8gSWYgd2UgcHV0IHVwIGEgdGVtcG9yYXJ5IHNjZW5lIHJldHVybiB0aGUgdXNlciBhbmQgcmVtb3ZlIGl0XG4gICAgLy8gaWYgKFxuICAgIC8vICAgdHlwZW9mIHRoaXMudGVtcG9yYXJ5U2NlbmUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gICB0eXBlb2YgdGhpcy5vcmlnaW5hbFNjZW5lICE9PSAndW5kZWZpbmVkJ1xuICAgIC8vICkge1xuICAgIC8vICAgYXdhaXQgdGhpcy5vcmlnaW5hbFNjZW5lLnZpZXcoKVxuICAgIC8vICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKVxuICAgIC8vICAgYXdhaXQgdGhpcy50ZW1wb3JhcnlTY2VuZS5kZWxldGUoKVxuICAgIC8vIH1cblxuICAgIC8vIE1pZ3JhdGUgU2V0dGluZ3MgaWYgUHVscCBSdWxlcyBpcyBlbmFibGVkIHR1cm4gb24gYWxsIHJ1bGVzXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlcycpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZURvdWJsZU1heEhlYWx0aCcsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2snLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVPcmdhbml6YXRpb24nLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRmFzdGVyUmVjb3ZlcnknLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcycsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycsIHRydWUpXG4gICAgfVxuXG4gICAgYXdhaXQgQ29DSURCYXRjaC5jcmVhdGUoJ3NraWxsJylcblxuICAgIGNvbnN0IHNldHRpbmdzID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0aGlzLnVwZGF0ZWRNb2R1bGVzIHx8IHt9LCB0aGlzLmN1cnJlbnRNb2R1bGVzKVxuICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywgc2V0dGluZ3MpXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIGdhbWUuc3lzdGVtLnZlcnNpb24pXG5cbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkNvbXBsZXRlJyksIHtcbiAgICAgIHBlcm1hbmVudDogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlRG9jdW1lbnRzICgpIHtcbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yc1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB0aGlzLm1pZ3JhdGVBY3RvckRhdGEoYWN0b3IudG9PYmplY3QoKSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIEFjdG9yIGRvY3VtZW50ICR7YWN0b3IubmFtZX1gKVxuICAgICAgICAgIGF3YWl0IGFjdG9yLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckFjdG9yJywge1xuICAgICAgICAgIG5hbWU6IGFjdG9yLm5hbWUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEl0ZW1zXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGdhbWUuaXRlbXMuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVJdGVtRGF0YShpdGVtLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBJdGVtIGRvY3VtZW50ICR7aXRlbS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JJdGVtJywge1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgVGFibGVzXG4gICAgZm9yIChjb25zdCB0YWJsZSBvZiBnYW1lLnRhYmxlcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVRhYmxlRGF0YSh0YWJsZS50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgVGFibGUgZG9jdW1lbnQgJHt0YWJsZS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgdGFibGUudXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yVGFibGUnLCB7XG4gICAgICAgICAgbmFtZTogdGFibGUubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgTWFjcm9zXG4gICAgZm9yIChjb25zdCBtYWNybyBvZiBnYW1lLm1hY3Jvcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZU1hY3JvRGF0YShtYWNyby50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgTWFjcm8gZG9jdW1lbnQgJHttYWNyby5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgbWFjcm8udXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yTWFjcm8nLCB7XG4gICAgICAgICAgbmFtZTogbWFjcm8ubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgU2NlbmVzIFtUb2tlbl0gQWN0b3JzXG4gICAgZm9yIChjb25zdCBzY2VuZSBvZiBnYW1lLnNjZW5lcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVNjZW5lRGF0YShzY2VuZSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIFNjZW5lIGRvY3VtZW50ICR7c2NlbmUubmFtZX1gKVxuICAgICAgICAgIC8vIGlmIChcbiAgICAgICAgICAvLyAgIHNjZW5lLmlkID09PSBnYW1lLnNjZW5lcy5jdXJyZW50LmlkICYmXG4gICAgICAgICAgLy8gICB0eXBlb2YgdGhpcy50ZW1wb3JhcnlTY2VuZSA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAvLyAgIHR5cGVvZiB0aGlzLm9yaWdpbmFsU2NlbmUgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgLy8gKSB7XG4gICAgICAgICAgLy8gICB0aGlzLnRlbXBvcmFyeVNjZW5lID0gYXdhaXQgU2NlbmUuY3JlYXRlKHtcbiAgICAgICAgICAvLyAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLlVwZGF0ZUN1cnJlbnRTY2VuZScpLFxuICAgICAgICAgIC8vICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMDAwMDAwJ1xuICAgICAgICAgIC8vICAgfSlcbiAgICAgICAgICAvLyAgIHRoaXMub3JpZ2luYWxTY2VuZSA9IHNjZW5lXG4gICAgICAgICAgLy8gICBhd2FpdCBEcmF3aW5nRG9jdW1lbnQuY3JlYXRlKFxuICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgLy8gICAgICAgYXV0aG9yOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgICAgLy8gICAgICAgc2hhcGU6IHtcbiAgICAgICAgICAvLyAgICAgICAgIHR5cGU6ICdyJyxcbiAgICAgICAgICAvLyAgICAgICAgIHdpZHRoOiAxNjAwLFxuICAgICAgICAgIC8vICAgICAgICAgaGVpZ2h0OiAyMDBcbiAgICAgICAgICAvLyAgICAgICB9LFxuICAgICAgICAgIC8vICAgICAgIHg6IDIyMDAsXG4gICAgICAgICAgLy8gICAgICAgeTogMjIwMCxcbiAgICAgICAgICAvLyAgICAgICB6OiAwLFxuICAgICAgICAgIC8vICAgICAgIHN0cm9rZVdpZHRoOiAwLFxuICAgICAgICAgIC8vICAgICAgIHRleHQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5VcGRhdGVDdXJyZW50U2NlbmUnKSxcbiAgICAgICAgICAvLyAgICAgICBmb250RmFtaWx5OiAnU2lnbmlrYScsXG4gICAgICAgICAgLy8gICAgICAgZm9udFNpemU6IDEyOCxcbiAgICAgICAgICAvLyAgICAgICB0ZXh0Q29sb3I6ICcjRkZGRkZGJyxcbiAgICAgICAgICAvLyAgICAgICB0ZXh0QWxwaGE6IDEsXG4gICAgICAgICAgLy8gICAgICAgaGlkZGVuOiBmYWxzZSxcbiAgICAgICAgICAvLyAgICAgICBsb2NrZWQ6IHRydWVcbiAgICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgICAvLyAgICAge1xuICAgICAgICAgIC8vICAgICAgIHBhcmVudDogdGhpcy50ZW1wb3JhcnlTY2VuZVxuICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgLy8gICApXG4gICAgICAgICAgLy8gICBhd2FpdCB0aGlzLnRlbXBvcmFyeVNjZW5lLnZpZXcoKVxuICAgICAgICAgIC8vICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKVxuICAgICAgICAgIC8vIH1cbiAgICAgICAgICBhd2FpdCBzY2VuZS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2NlbmUudG9rZW5zLmZvckVhY2godCA9PiAodC5fYWN0b3IgPSBudWxsKSlcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JTY2VuZScsIHtcbiAgICAgICAgICBuYW1lOiBzY2VuZS5uYW1lLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBDb21wZW5kaXVtIFBhY2tzXG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZSAhPT0gJ0NvQzcnICYmXG4gICAgICAgIFsnQWN0b3InLCAnSXRlbScsICdNYWNybycsICdSb2xsVGFibGUnLCAnU2NlbmUnXS5pbmNsdWRlcyhcbiAgICAgICAgICBwYWNrLm1ldGFkYXRhLnR5cGVcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IFVwZGF0ZXIubWlncmF0ZUNvbXBlbmRpdW1EYXRhKHBhY2spXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVBY3RvckRhdGEgKGFjdG9yKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yQXJ0d29yayhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JLZWVwZXJOb3RlcyhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JOcGNDcmVhdHVyZShhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JTdGF0dXNFZmZlY3RBY3RpdmUoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yU2FuTG9zc1JlYXNvbnMoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yTW9uZXRhcnkoYWN0b3IsIHVwZGF0ZURhdGEpXG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yIEl0ZW1zXG4gICAgaWYgKGFjdG9yLml0ZW1zKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGFjdG9yLml0ZW1zLnJlZHVjZSgoYXJyLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1EYXRhID1cbiAgICAgICAgICBpIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGkudG9PYmplY3QoKSA6IGlcbiAgICAgICAgY29uc3QgaXRlbVVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW1EYXRhKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eShpdGVtVXBkYXRlKSkge1xuICAgICAgICAgIGl0ZW1VcGRhdGUuX2lkID0gaXRlbURhdGEuX2lkXG4gICAgICAgICAgYXJyLnB1c2goZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoaXRlbVVwZGF0ZSkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyclxuICAgICAgfSwgW10pXG4gICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICB1cGRhdGVEYXRhLml0ZW1zID0gaXRlbXNcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG1pZ3JhdGVDb21wZW5kaXVtRGF0YSAocGFjaykge1xuICAgIGNvbnN0IGRvY3VtZW50VHlwZSA9IHBhY2subWV0YWRhdGEudHlwZVxuICAgIGlmIChcbiAgICAgICFbJ0FjdG9yJywgJ0l0ZW0nLCAnTWFjcm8nLCAnUm9sbFRhYmxlJywgJ1NjZW5lJ10uaW5jbHVkZXMoZG9jdW1lbnRUeXBlKVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVW5sb2NrIHRoZSBwYWNrIGZvciBlZGl0aW5nXG4gICAgY29uc3Qgd2FzTG9ja2VkID0gcGFjay5sb2NrZWRcbiAgICBhd2FpdCBwYWNrLmNvbmZpZ3VyZSh7IGxvY2tlZDogZmFsc2UgfSlcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwYWNrLm1pZ3JhdGUoKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coJ3BhY2sgbWlncmF0ZSBmYWlsZWQnLCBwYWNrLCBlcnIpXG4gICAgfVxuICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnRzKClcblxuICAgIC8vIEl0ZXJhdGUgb3ZlciBjb21wZW5kaXVtIGVudHJpZXMgLSBhcHBseWluZyBmaW5lLXR1bmVkIG1pZ3JhdGlvbiBmdW5jdGlvbnNcbiAgICBmb3IgKGNvbnN0IGRvYyBvZiBkb2N1bWVudHMpIHtcbiAgICAgIGxldCB1cGRhdGVEYXRhID0ge31cbiAgICAgIHRyeSB7XG4gICAgICAgIHN3aXRjaCAoZG9jdW1lbnRUeXBlKSB7XG4gICAgICAgICAgY2FzZSAnQWN0b3InOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUFjdG9yRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnSXRlbSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlSXRlbURhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ01hY3JvJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVNYWNyb0RhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ1JvbGxUYWJsZSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlVGFibGVEYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdTY2VuZSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlU2NlbmVEYXRhKGRvYylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgLy8gU2F2ZSB0aGUgZW50cnksIGlmIGRhdGEgd2FzIGNoYW5nZWRcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBNaWdyYXRlZCAke2RvY3VtZW50VHlwZX0gZG9jdW1lbnQgJHtkb2MubmFtZX0gaW4gQ29tcGVuZGl1bSAke3BhY2suY29sbGVjdGlvbn1gXG4gICAgICAgICAgKVxuICAgICAgICAgIGF3YWl0IGRvYy51cGRhdGUodXBkYXRlRGF0YSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckRvY3VtZW50UGFjaycsIHtcbiAgICAgICAgICBuYW1lOiBkb2MubmFtZSxcbiAgICAgICAgICBjb2xsZWN0aW9uOiBwYWNrLmNvbGxlY3Rpb24sXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBcHBseSB0aGUgb3JpZ2luYWwgbG9ja2VkIHN0YXR1cyBmb3IgdGhlIHBhY2tcbiAgICBhd2FpdCBwYWNrLmNvbmZpZ3VyZSh7IGxvY2tlZDogd2FzTG9ja2VkIH0pXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZUl0ZW1EYXRhIChpdGVtKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgSXRlbVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtRW1iZWRkZWR2MTAoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUV4cGVyaWVuY2UoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUFydHdvcmsoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUJvb2tBdXRvbWF0ZWQoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUtlZXBlck5vdGVzKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1TcGVsbEF1dG9tYXRlZChpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXNNZXJnZShpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtRXJhcyhpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtdjEwKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1Cb29rVW5pdHMoaXRlbSwgdXBkYXRlRGF0YSlcblxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZU1hY3JvRGF0YSAodGFibGUpIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cblxuICAgIC8vIFVwZGF0ZSBXb3JsZCBBY3RvclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVNYWNyb0FydHdvcmsodGFibGUsIHVwZGF0ZURhdGEpXG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVUYWJsZURhdGEgKHRhYmxlKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlVGFibGVBcnR3b3JrKHRhYmxlLCB1cGRhdGVEYXRhKVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlU2NlbmVEYXRhIChzY2VuZSkge1xuICAgIGNvbnN0IHJldHVybnMgPSB7XG4gICAgICB0b2tlbnM6IFtdXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NlbmUudG9rZW5zICE9PSAndW5kZWZpbmVkJyAmJiBzY2VuZS50b2tlbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm5zLnRva2VucyA9IHNjZW5lLnRva2Vucy5tYXAodG9rZW4gPT4ge1xuICAgICAgICBjb25zdCB0ID0gdG9rZW4udG9PYmplY3QoKVxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICAgICAgVXBkYXRlci5fbWlncmF0ZVRva2VuQXJ0d29yayh0LCB1cGRhdGVEYXRhKVxuICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRGF0YSkubGVuZ3RoKSB7XG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0LCB1cGRhdGVEYXRhKVxuICAgICAgICB9XG4gICAgICAgIGlmICghdC5hY3RvcklkIHx8IHQuYWN0b3JMaW5rKSB7XG4gICAgICAgICAgdC5hY3RvckRhdGEgPSB7fVxuICAgICAgICB9IGVsc2UgaWYgKCFnYW1lLmFjdG9ycy5oYXModC5hY3RvcklkKSkge1xuICAgICAgICAgIHQuYWN0b3JJZCA9IG51bGxcbiAgICAgICAgICB0LmFjdG9yRGF0YSA9IHt9XG4gICAgICAgIH0gZWxzZSBpZiAoIXQuYWN0b3JMaW5rKSB7XG4gICAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodC5hY3RvckRhdGEpXG4gICAgICAgICAgYWN0b3JEYXRhLnR5cGUgPSB0b2tlbi5hY3Rvcj8udHlwZVxuICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUFjdG9yRGF0YShhY3RvckRhdGEpXG4gICAgICAgICAgO1snaXRlbXMnLCAnZWZmZWN0cyddLmZvckVhY2goZW1iZWRkZWROYW1lID0+IHtcbiAgICAgICAgICAgIGlmICghdXBkYXRlW2VtYmVkZGVkTmFtZV0/Lmxlbmd0aCkge1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXcgTWFwKHVwZGF0ZVtlbWJlZGRlZE5hbWVdLm1hcCh1ID0+IFt1Ll9pZCwgdV0pKVxuICAgICAgICAgICAgdC5hY3RvckRhdGFbZW1iZWRkZWROYW1lXS5mb3JFYWNoKG9yaWdpbmFsID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlID0gdXBkYXRlcy5nZXQob3JpZ2luYWwuX2lkKVxuICAgICAgICAgICAgICBpZiAodXBkYXRlKSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9yaWdpbmFsLCB1cGRhdGUpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgZGVsZXRlIHVwZGF0ZVtlbWJlZGRlZE5hbWVdXG4gICAgICAgICAgfSlcbiAgICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHQuYWN0b3JEYXRhLCB1cGRhdGUpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiByZXR1cm5zXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXMgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBbXG4gICAgICAgICdhcmNoZXR5cGUnLFxuICAgICAgICAnY2hhc2UnLFxuICAgICAgICAnaXRlbScsXG4gICAgICAgICdvY2N1cGF0aW9uJyxcbiAgICAgICAgJ3NldHVwJyxcbiAgICAgICAgJ3NraWxsJyxcbiAgICAgICAgJ3NwZWxsJyxcbiAgICAgICAgJ3N0YXR1cycsXG4gICAgICAgICd0YWxlbnQnLFxuICAgICAgICAnd2VhcG9uJ1xuICAgICAgXS5pbmNsdWRlcyhpdGVtLnR5cGUpXG4gICAgKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24nXSA9IHtcbiAgICAgICAgICB2YWx1ZTogaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24sXG4gICAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uJ10gPSB7XG4gICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUV4cGVyaWVuY2UgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSddID0gMFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUFydHdvcmsgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcoaXRlbS5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NldHVwJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uaXRlbXMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5za2lsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IFtvLCBnXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5ncm91cHMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGcuc2tpbGxzKSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBpdGVtLnN5c3RlbS5ncm91cHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLmltZyA9XG4gICAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc3BlbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlbGxzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9IGl0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWxscyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9IGl0ZW0uc3lzdGVtLnNraWxsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbVNwZWxsQXV0b21hdGVkIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyAmJiB0eXBlb2YgaXRlbS5zeXN0ZW0uY29zdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jYXN0aW5nVGltZSddID0gaXRlbS5zeXN0ZW0uY2FzdGluZ1RpbWUgfHwgJydcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5oaXRQb2ludHMnXSA9IGl0ZW0uc3lzdGVtLmNvc3QuaHAgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLm1hZ2ljUG9pbnRzJ10gPSBpdGVtLnN5c3RlbS5jb3N0Lm1wIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5zYW5pdHknXSA9IGl0ZW0uc3lzdGVtLmNvc3Quc2FuIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5wb3dlciddID0gaXRlbS5zeXN0ZW0uY29zdC5wb3cgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLm90aGVycyddID0gJydcblxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09Y29zdCddID0gbnVsbFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLi09dW5pZGVudGlmaWVkJ10gPSBudWxsXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCb29rIGF1dG9tYXRpb24gd2FzIGluY3JlYXNlZCBpbiAwLjYuNVxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbSBEb2N1bWVudCBkYXRhIGV4cHJlc3NlZCBhcyBhIHBsYWluIG9iamVjdFxuICAgKiBAcGFyYW0ge2pzb259IHVwZGF0ZURhdGEgRGlmZmVyZW50aWFsIHVwZGF0ZSBkYXRhIHdoaWNoIG1vZGlmaWVzIHRoZSBleGlzdGluZyB2YWx1ZXMgb2YgdGhpcyBkb2N1bWVudCBkYXRhXG4gICAqIEByZXR1cm5zIHtqc29ufSBEaWZmZXJlbnRpYWwgdXBkYXRlIGRhdGEgd2hpY2ggbW9kaWZpZXMgdGhlIGV4aXN0aW5nIHZhbHVlcyBvZiB0aGlzIGRvY3VtZW50IGRhdGFcbiAgICovXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICAvKiogSWYgYm9vayBzdGlsbCBoYXMgdGhlIHN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWQga2V5IHRoZW4gcnVuIG1pZ3JhdGUgb24gaXQgKi9cbiAgICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udW5pZGVudGlmaWVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKiogRmllbGRzIGNoYW5nZWQgZnJvbSBudWxsIGRlZmF1bHQgdG8gZW1wdHkgc3RyaW5nICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdXRob3InXSA9IGl0ZW0uc3lzdGVtLmF1dGhvciB8fCAnJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGF0ZSddID0gaXRlbS5zeXN0ZW0uZGF0ZSB8fCAnJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubGFuZ3VhZ2UnXSA9IGl0ZW0uc3lzdGVtLmxhbmd1YWdlIHx8ICcnXG4gICAgICAgIC8qKiBGaWVsZHMgY2hhbmdlZCBmcm9tIG51bGwvc3RyaW5nIGRlZmF1bHRzIHRvIGludGVnZXIgdG8gMCAqL1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2FuaXR5TG9zcyddID0gaXRlbS5zeXN0ZW0uc2FuTG9zcyB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5teXRob3NSYXRpbmcnXSA9IE51bWJlcihpdGVtLnN5c3RlbS5teXRob3NSYXRpbmcpIHx8IDBcbiAgICAgICAgLyoqIFJlbmFtZWQvbW92ZWQgZmllbGRzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb250ZW50J10gPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWRcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXNcbiAgICAgICAgLyoqIE5ldyBmaWVsZHMgc2V0IGRlZmF1bHQgdmFsdWVzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kaWZmaWN1bHR5TGV2ZWwnXSA9ICdyZWd1bGFyJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZnVsbFN0dWRpZXMnXSA9IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluaXRpYWxSZWFkaW5nJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ua2VlcGVyTm90ZXMnXSA9ICcnXG4gICAgICAgIC8qKiBNb3ZlIGFuZCByZW5hbWUgZ2FpbiBmaWVsZHMgdG8gZ2FpbnMsIGRlZmF1bHQgTmFOIHZhbHVlcyB0byAwICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4uY3RodWxodU15dGhvcy5DTUkpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuZmluYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4uY3RodWxodU15dGhvcy5DTUYpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLm9jY3VsdCddID0gTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4ub2NjdWx0KSB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5vdGhlcnMnXSA9IFtdXG4gICAgICAgIC8qKiBOZXcgc3R1ZHkgZmllbGQgZGVmYXVsdCBuZWNlc3NhcnkgdG8gaW50ZWdlciBvZiB3ZWVrc1N0dWR5VGltZSBvciAwIGlmIG5vdCBzZXQgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnN0dWR5J10gPSB7XG4gICAgICAgICAgbmVjZXNzYXJ5OiBOdW1iZXIoaXRlbS5zeXN0ZW0ud2Vla3NTdHVkeVRpbWUpIHx8IDAsXG4gICAgICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgdW5pdHM6ICdDb0M3LndlZWtzJ1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZW1vdmUgb2xkIGtleXMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09c2FuTG9zcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT13ZWVrc1N0dWR5VGltZSddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1nYWluJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi4tPXVuaWRlbnRpZmllZCddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ2FpbnMuLT1vdGhlciddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1wcm9wZXJ0aWVzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWZsYWdzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtQm9va1VuaXRzIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zdHVkeS51bml0cyA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3R1ZHkudW5pdHMnXSA9ICdDb0M3LndlZWtzJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyB8fCBpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5ub3RlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciArIGl0ZW0uc3lzdGVtLm5vdGVzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ubm90ZXNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1ub3RlcyddID0gbnVsbFxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5rZWVwZXJOb3RlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmtlZXBlck5vdGVzICsgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ua2VlcGVyTm90ZXNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1rZWVwZXJOb3RlcyddID0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1FbWJlZGRlZHYxMCAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdvY2N1cGF0aW9uJykge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbbywgZ10gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZ3JvdXBzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnLnNraWxscykpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5ncm91cHNbb10uc2tpbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxuICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ3NldHVwJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uaXRlbXMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uaXRlbXNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ10gPSBpdGVtLnN5c3RlbS5pdGVtc1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoWydhcmNoZXR5cGUnLCAnb2NjdXBhdGlvbiddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbHNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ2Jvb2snXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5zcGVsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9IGl0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW12MTAgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBpdGVtLnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICh0eXBlb2YgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID09PSAndW5kZWZpbmVkJyB8fCBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPT09ICcnKVxuICAgICkge1xuICAgICAgdXBkYXRlRGF0YS5uYW1lID0gaXRlbS5uYW1lXG4gICAgICAvLyBVcGRhdGUgUG9saXNoIGRvZGdlIHRyYW5zbGF0aW9uIGZyb20gVW5pa2kgdG8gVW5payB0byBtYXRjaCB1cGRhdGUgdG8gbGFuZy9wbC5qc29uXG4gICAgICBpZiAodXBkYXRlRGF0YS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgIHVwZGF0ZURhdGEubmFtZSA9ICdVbmlrJ1xuICAgICAgfVxuICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICB1cGRhdGVEYXRhLm5hbWUsXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgPyBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgIDogaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgIClcbiAgICAgIHVwZGF0ZURhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5pdGVtcykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10ubmFtZSA9PT0gJ1VuaWtpJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHYubmFtZVxuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW28sIGddIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLmdyb3VwcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZy5za2lsbHMpKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICB2LnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPT09ICdVbmlraScpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPSAnVW5paydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lLFxuICAgICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICA/IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uLmdyb3VwXG4gICAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5za2lsbE5hbWUgPVxuICAgICAgICAgICAgICAgIHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9XG4gICAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2FyY2hldHlwZScpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHYubmFtZVxuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtRXJhcyAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZXJhcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIDE5MjAgPT4gc3RhbmRhcmRcbiAgICAgIC8vIG1kcm4gPT4gbW9kZXJuIC8gbW9kZXJuUHVscFxuICAgICAgLy8gcHVscCA9PiBwdWxwXG4gICAgICAvLyBkZHRzID0+IGRvd25EYXJrZXJUcmFpbHMgLyBkb3duRGFya2VyVHJhaWxzUHVscFxuICAgICAgLy8gZHJrYSA9PiBkYXJrQWdlcyAvIGRhcmtBZ2VzUHVscFxuICAgICAgLy8gZ2xpdCA9PiBnYXNMaWdodFxuICAgICAgLy8gbnZjdCA9PiBpbnZpY3R1c1xuICAgICAgbGV0IGVyYXMgPSB7fVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZXJhcykpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlIHx8ICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZS5zZWxlY3RlZCAhPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJzE5MjAnOlxuICAgICAgICAgICAgICBlcmFzLnN0YW5kYXJkID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbWRybic6XG4gICAgICAgICAgICAgIGVyYXMubW9kZXJuID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLm1vZGVyblB1bHAgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdwdWxwJzpcbiAgICAgICAgICAgICAgZXJhcy5wdWxwID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnZGR0cyc6XG4gICAgICAgICAgICAgIGVyYXMuZG93bkRhcmtlclRyYWlscyA9IHRydWVcbiAgICAgICAgICAgICAgZXJhcy5kb3duRGFya2VyVHJhaWxzUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2Rya2EnOlxuICAgICAgICAgICAgICBlcmFzLmRhcmtBZ2VzID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLmRhcmtBZ2VzUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2dsaXQnOlxuICAgICAgICAgICAgICBlcmFzLmdhc0xpZ2h0ID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbnZjdCc6XG4gICAgICAgICAgICAgIGVyYXMuaW52aWN0dXMgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICAgIC8vIElmIG1vcmUgdGhhbiBvbmUgZXJhIHRha2UgdGhlIGZpcnN0IG9uZSBvbmx5XG4gICAgICAgIGNvbnN0IGtleSA9IE9iamVjdC5rZXlzKGVyYXMpWzBdXG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICBlcmFzID0geyBba2V5XTogdHJ1ZSB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgbm8gZXJhcyBkZWZhdWx0IHRvIHN0YW5kYXJkXG4gICAgICAgICAgZXJhcyA9IHsgc3RhbmRhcmQ6IHRydWUgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBDb0M3ID0ge1xuICAgICAgICBjb2NpZEZsYWc6IHtcbiAgICAgICAgICBpZDogJycsXG4gICAgICAgICAgbGFuZzogZ2FtZS5pMThuLmxhbmcsXG4gICAgICAgICAgcHJpb3JpdHk6IDAsXG4gICAgICAgICAgZXJhc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uZmxhZ3M/LkNvQzcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGl0ZW0uZmxhZ3MuQ29DNyA9IENvQzdcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNyddID0gQ29DN1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnID0gQ29DNy5jb2NpZEZsYWdcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnXSA9IENvQzcuY29jaWRGbGFnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMgPSBDb0M3LmNvY2lkRmxhZy5lcmFzXG4gICAgICAgIHVwZGF0ZURhdGFbJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMnXSA9IENvQzcuY29jaWRGbGFnLmVyYXNcbiAgICAgIH1cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWVyYXMnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvckFydHdvcmsgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgbGV0IGltYWdlID0gU3RyaW5nKGFjdG9yLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgYWN0b3IucHJvdG90eXBlVG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZT8uc3JjICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMpLm1hdGNoKFxuICAgICAgICAvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispL1xuICAgICAgKVxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3Byb3RvdHlwZVRva2VuLnRleHR1cmUuc3JjJ10gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhY3Rvci5lZmZlY3RzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoYWN0b3IuZWZmZWN0cykpIHtcbiAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pY29uKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhLmVmZmVjdHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhLmVmZmVjdHMgPSBhY3Rvci5lZmZlY3RzXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0c1trXS5pY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvcktlZXBlck5vdGVzIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmRlc2NyaXB0aW9uID09PSAndW5kZWZpbmVkJ1xuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbiddID0ge1xuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yTW9uZXRhcnkgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmIHR5cGVvZiBhY3Rvci5zeXN0ZW0uY3JlZGl0Py5tdWx0aXBsaWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdD8ubW9uZXRhcnlTeW1ib2wgPyBhY3Rvci5zeXN0ZW0uY3JlZGl0Lm1vbmV0YXJ5U3ltYm9sIDogJyQnXG4gICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCddLnRvU3RyaW5nKCkudHJpbSgpID09PSAnJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuc3ltYm9sJ10gPSAnJCdcbiAgICAgIH1cbiAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBwYXJzZUludChhY3Rvci5zeXN0ZW0uY3JlZGl0Lm11bHRpcGxpZXIpID8gcGFyc2VJbnQoYWN0b3Iuc3lzdGVtLmNyZWRpdC5tdWx0aXBsaWVyKSA6IDFcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS5zcGVudCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5zcGVudFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmFzc2V0c0RldGFpbHMnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuYXNzZXRzRGV0YWlsc1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnNwZW5kaW5nTGV2ZWwnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuc3BlbmRpbmdMZXZlbFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmNhc2gnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuY2FzaFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmFzc2V0cyddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5hc3NldHNcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGFjdG9yLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMpXG4gICAgICBpZiAobXVsdGlwbGllciAhPT0gMSkge1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSkge1xuICAgICAgICAgIHZhbHVlLmNhc2hWYWx1ZSA9IG11bHRpcGxpZXIgKiB2YWx1ZS5jYXNoVmFsdWVcbiAgICAgICAgICB2YWx1ZS5hc3NldHNWYWx1ZSA9IG11bHRpcGxpZXIgKiB2YWx1ZS5hc3NldHNWYWx1ZVxuICAgICAgICAgIHZhbHVlLnNwZW5kaW5nVmFsdWUgPSBtdWx0aXBsaWVyICogdmFsdWUuc3BlbmRpbmdWYWx1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1jcmVkaXQnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvclNhbkxvc3NSZWFzb25zIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmXG4gICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtPy5lbmNvdW50ZXJlZENyZWF0dXJlcyAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IGdyb3VwcyA9IHt9XG4gICAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiBhY3Rvci5zeXN0ZW0uZW5jb3VudGVyZWRDcmVhdHVyZXMpIHtcbiAgICAgICAgaWYgKHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MgPiAwKSB7XG4gICAgICAgICAgZ3JvdXBzW3Nhbml0eUxvc3NFdmVudC5uYW1lXSA9IE1hdGgubWF4KFxuICAgICAgICAgICAgZ3JvdXBzW3Nhbml0eUxvc3NFdmVudC5uYW1lXSA/PyAwLFxuICAgICAgICAgICAgc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zc1xuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gZ3JvdXBzKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaCh7XG4gICAgICAgICAgdHlwZTogbmFtZSxcbiAgICAgICAgICB0b3RhbExvc3M6IGdyb3Vwc1tuYW1lXSxcbiAgICAgICAgICBpbW11bml0eTogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJ10gPSBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1lbmNvdW50ZXJlZENyZWF0dXJlcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yU3RhdHVzRWZmZWN0QWN0aXZlIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAodHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXMgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5jb25kaXRpb25zID09PSAndW5kZWZpbmVkJylcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5jcml0aWNhbFdvdW5kcy52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudW5jb25zY2lvdXMudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmR5aW5nLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5kZWFkLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5wcm9uZS52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudGVtcG9JbnNhbmUudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmluZGVmSW5zYW5lLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmNyaXRpY2FsV291bmRzPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5jcml0aWNhbFdvdW5kcy52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5jcml0aWNhbFdvdW5kcy52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udW5jb25zY2lvdXM/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnVuY29uc2Npb3VzLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnVuY29uc2Npb3VzLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5keWluZz8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uZHlpbmcudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuZHlpbmcudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmRlYWQ/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmRlYWQudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuZGVhZC52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8ucHJvbmU/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnByb25lLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnByb25lLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy50ZW1wb0luc2FuZT8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udGVtcG9JbnNhbmUudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudGVtcG9JbnNhbmUudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmluZGVmSW5zYW5lPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5pbmRlZkluc2FuZS52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5pbmRlZkluc2FuZS52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgYWN0b3IuZWZmZWN0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBlZmZlY3RzID0gYWN0b3IuZWZmZWN0c1xuICAgICAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBlZmZlY3RzLmxlbmd0aDsgaSA8IGltOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVmZmVjdCA9IGVmZmVjdHNbaV1cbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gZWZmZWN0Lmljb24ubWF0Y2goXG4gICAgICAgICAgICAgIC9cXC8oaGFuZ2luZy1zcGlkZXJ8dGVudGFjbGVzLXNrdWxsfGFybS1zbGluZ3xoZWFydC1iZWF0c3x0b21ic3RvbmV8a25vY2tlZC1vdXQtc3RhcnN8ZmFsbGluZ3xza3VsbHx1bmNvbnNjaW91cylcXC4vXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAobWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgbGV0IHN0YXR1c0lkID0gJydcbiAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hhbmdpbmctc3BpZGVyJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3RlbXBvSW5zYW5lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICd0ZW50YWNsZXMtc2t1bGwnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnaW5kZWZJbnNhbmUnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FybS1zbGluZyc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdjcml0aWNhbFdvdW5kcydcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnaGVhcnQtYmVhdHMnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnZHlpbmcnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvbWJzdG9uZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2t1bGwnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnZGVhZCdcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAna25vY2tlZC1vdXQtc3RhcnMnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3VuY29uc2Npb3VzJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3VuY29uc2Npb3VzJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWxsaW5nJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3Byb25lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc3RhdHVzSWQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1cGRhdGVEYXRhW2BzeXN0ZW0uY29uZGl0aW9ucy4ke3N0YXR1c0lkfS52YWx1ZWBdKSB7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uY29uZGl0aW9ucy4ke3N0YXR1c0lkfS52YWx1ZWBdID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVmZmVjdC5mbGFncy5jb3JlPy5zdGF0dXNJZCAhPT0gc3RhdHVzSWQpIHtcbiAgICAgICAgICAgICAgICAgIGVmZmVjdHNbaV0gPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGVmZmVjdCwge1xuICAgICAgICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c0lkXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0cyA9IGVmZmVjdHNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09c3RhdHVzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3Rvck5wY0NyZWF0dXJlIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ25wYyddLmluY2x1ZGVzKGFjdG9yLnR5cGUpICYmIHR5cGVvZiBhY3Rvci5zeXN0ZW0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodHlwZW9mIGFjdG9yLnN5c3RlbS5zcGVjaWFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlY2lhbCddID0ge1xuICAgICAgICAgIGNoZWNrUGFzc2VkOiBudWxsLFxuICAgICAgICAgIGNoZWNrRmFpbGxlZDogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRhY2tzUGVyUm91bmQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRhY2tzUGVyUm91bmQnXSA9IDFcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yQ2hhcmFjdGVyU2FuaXR5IChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmXG4gICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtPy5hdHRyaWJzPy5zYW4gIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCBvbmVGaWZ0aFNhbml0eSA9IE1hdGguY2VpbChhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgLyA1KVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnXSA9IDBcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5ID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5J10gPSAnIC8gJyArIG9uZUZpZnRoU2FuaXR5XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyddID0gMFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlJ10gPSAwXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC5tYXgnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID09PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJ10gPSBvbmVGaWZ0aFNhbml0eVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLm1heCA9PT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5tcC5tYXgnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5ub3RlcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLm5vdGVzID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm5vdGVzJ10gPSAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlTWFjcm9BcnR3b3JrICh0YWJsZSwgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IGltYWdlID0gU3RyaW5nKHRhYmxlLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlVGFibGVBcnR3b3JrICh0YWJsZSwgdXBkYXRlRGF0YSkge1xuICAgIGxldCBpbWFnZSA9IFN0cmluZyh0YWJsZS5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXModGFibGUucmVzdWx0cykpIHtcbiAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGEucmVzdWx0cyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhLnJlc3VsdHMgPSB0YWJsZS5yZXN1bHRzXG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlRGF0YS5yZXN1bHRzW2tdLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlVG9rZW5BcnR3b3JrICh0b2tlbiwgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IGltYWdlID0gU3RyaW5nKHRva2VuLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbi8qKlxuICogbmFtZUNoYXJhY3RlcnMgbGlzdCBvZiBjaGFyYWN0ZXJzIHRoYXQgY2FuIGJlIHBhcnQgb2YgYSBbXSBmb3IgY2hhcmFjdGVyLCBza2lsbCwgb3Igd2VhcG9uIG5hbWVzIHVzZWQgaW4gYnJhY2tldCBleHByZXNzaW9uLlxuICpcbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmRlc2NyaXB0aW9uXCIgbGFuZyBrZXkgdG8gc2hvdyBpbiB0aGUgbGFuZ3VhZ2Ugc2VsZWN0aW9uIGRpYWxvZyBib3guXG4gKiBcImtleXMuPGxhbmd1YWdlPi5kYk5vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gRGFtYWdlIEJvbnVzIGUuZy4gREI6IFwiZGJOb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5hcm1vck5vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gQXJtb3VyIEJvbnVzIGUuZy4gQXJtb3I6IFwiYXJtb3JOb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmROb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIGF0dGFja3MgZS5nLiBBdHRhY2tzIFBlciBSb3VuZDogXCJhdHRhY2tzUGVyUm91bmROb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zYW5Mb3NzTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBzYW5pdHkgbG9zcyBlLmcuIFNBTiBsb3NzOiBcInNhbkxvc3NOb25lXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5mdWxsZGJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgZGFtYWdlIGJvbnVzIGluIGF0dHJpYnV0ZXMgYW5kIHdlYXBvbiBkYW1hZ2UgZS5nLiBEQjogXCJmdWxsZGJcIiAvIFdlYXBvbiA1MCUgKDI1LzEwKSwgZGFtYWdlIDFENiArIFwiZnVsbGRiXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5oYWxmZGJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgaGFsZiBkYW1hZ2UgYm9udXMgaW4gd2VhcG9uIGRhbWFnZSBlLmcuIFdlYXBvbiA1MCUgKDI1LzEwKSwgZGFtYWdlIDFENiArIFwiaGFsZmRiXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uQ29tYmF0c1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIGNvbWJhdCAvIHdlYXBvbiBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5uZXdDb21iYXRIZWFkZXJcIiBJZiB0aGVyZSBpcyBubyBjb21iYXQgLyB3ZWFwb24gc2VjdGlvbiwgYWRkIHRoaXMgc2VjdGlvbiB3ZXJlIGl0IHByb2JhYmx5IGlzLCB0aGlzIG5lZWRzIHRvIG1hdGNoZWQgYnkgXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvbkNvbWJhdHNcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Ta2lsbHNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBza2lsbHMgc2VjdGlvbiBvZiB0ZXh0LlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvbkxhbmdhdWdlc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIGxhbmd1YWdlcyBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uU3BlbGxzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgc3BlbGxzIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmhhbmRndW5cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgaGFuZGd1biB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4ucmlmbGVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgcmlmbGUgdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNtYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBzdWJtYWNoaW5lIGd1biB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4ubWFjaGluZUd1blwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBtYWNoaW5lIGd1biB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4ubGF1bmNoZWRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgbGF1bmNoZWQgdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmV4YW1wbGVcIiBTdHJpbmcgdGhhdCBzaG91bGQgc2hvdyBhcyBhIHBsYWNlaG9sZGVyIGV4YW1wbGUuXG4gKlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5hZ2VcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGFnZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxhZ2U+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5vY2N1cGF0aW9uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBvY2N1cGF0aW9uLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG9jY3VwYXRpb24+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zdHJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHN0cmVuZ3RoIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHN0cj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmNvblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29uc3RpdHV0aW9uIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGNvbj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNpelwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2l6ZSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxzaXo+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5pbnRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGludGVsbGlnZW5jZSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxpbnQ+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5wb3dcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHBvd2VyIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHBvdz4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmRleFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZGV4dGVyaXR5IGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGRleD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFwcFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYXBwZWFyYW5jZSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxhcHA+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5lZHVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGVkdWNhdGlvbiBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxlZHU+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zYW5cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNhbml0eSBwb2ludHMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHNhbj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmhwXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBoaXQgcG9pbnRzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxocD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm1wXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBtYWdpYyBwb2ludHMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG1wPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uZGJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGRhbWFnZSBib251cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGI+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LmRiTm9uZVwiIHRoZW4gMC5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYnVpbGRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGJ1aWxkIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxidWlsZD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFybW9yXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBkYW1hZ2UgYm9udXMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGRiPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5hcm1vck5vbmVcIiB0aGVuIDAuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm1vdlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgbW92ZW1lbnQgcmF0ZSBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bW92Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubGNrXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBsdWNrIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxsY2s+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmRcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGF0dGFja3MgcGVyIHJvdW5kLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGF0dGFja3NQZXJSb3VuZD4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uYXR0YWNrc1BlclJvdW5kTm9uZVwiIHRoZW4gMC5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2FuTG9zc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2FuIGxvc3MgbWluL21heCwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxzYW5Mb3NzPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5zYW5Mb3NzTm9uZVwiIHRoZW4gbm9uZS5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ud2VhcG9uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIHdlYXBvbiA8bmFtZT4sIG9wdGlvbmFsIDxwZXJjZW50YWdlPiwgYW5kIDxkYW1hZ2U+LiBEYW1hZ2UgY2FuIGNvbnRhaW4gXCJrZXlzLjxsYW5ndWFnZT4uZnVsbGRiXCIgYW5kIFwia2V5cy48bGFuZ3VhZ2U+LmhhbGZkYlwiLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi53ZWFwb25Eb2RnZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gZG9kZ2Ugc2tpbGwsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bmFtZT4gYW5kIDxwZXJjZW50YWdlPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2tpbGxcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNraWxsIHNlY3Rpb24gc2tpbGwgbmFtZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxuYW1lPiBhbmQgPHBlcmNlbnRhZ2U+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5ndWVzc1N0YXJ0Q29tYmF0XCIgUmVndWxhciBleHByZXNzaW9uIGlmIHRoZXJlIGlzIG5vIGNvbWJhdCBzZWN0aW9uIGZpbmQgdGhlc2UgYXJlIGxpa2VseSB0byBiZSB0aGUgZmlyc3Qgd2VhcG9uIG5hbWUsIFwia2V5cy48bGFuZ3VhZ2U+Lm5ld0NvbWJhdEhlYWRlclwiIGlzIHRoZW4gYWRkZWQgYmVmb3JlIGl0IHRvIGdldCB0aGUgZ3JvdXBzXG4gKlxuICogVGhlc2Ugc2hvdWxkIG5vdCBiZSBlZGl0ZWQgYXMgdGhleSBzaG91bGQgd29yayBhcyBpc1xuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5uYW1lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBuYW1lLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG5hbWU+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zZWN0aW9uc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBzcGxpdCB0ZXh0IGludG8gY29tYmF0LCBza2lsbCwgbGFuZ3VhZ2UsIGFuZCBzcGVsbHMgc2VjdGlvblxuICpcbiAqIElmIHRoZXJlIGlzIG5ldyBmdW5jdGlvbmFsaXR5IGNoZWNrIGZvciB0aGlzIHN0cmluZyBpbiB0aGUgdHJhbnNsYXRpb25zIC8ga2V5cyBmb3IgeW91ciBsYW5ndWFnZSBcIk5FVyBLRVkgQkVMT1cgLSBUUkFOU0xBVElPTiBSRVFVSVJFRFwiXG4gKi9cbmNvbnN0IG5hbWVDaGFyYWN0ZXJzID1cbiAgJ1xcXFx1MzAwMFxcXFx1MzQwMC1cXFxcdTREQkZcXFxcdTRFMDAtXFxcXHU5RkZGXFxcXHdcXFxcKFxcXFwpXFxcXC1cXFxcLyZcIlxcJycgK1xuICBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKFxuICAgICdhzIFlzIFpzIFvzIHDoMOow6zDssO5w4DDiMOMw5LDmcOhw6nDrcOzw7rDvcOBw4nDjcOTw5rDncOiw6rDrsO0w7vDgsOKw47DlMObw6PDscO1w4PEgMORw5XDpMOrw6/DtsO8w7/DhMOLw4/DlsOcxbjDoMOow6fDh8Ofw5jDuMOFw6XDhsOmxZPigJzigJ3Cq8K7xIXEh8SZxYLFhMOzxZvFusW8xITEhsSYxYHFg8OTxZrFucW7J1xuICApXG5cbmNvbnN0IGtleXMgPSB7XG4gIGVuOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LkVuZ2xpc2gnLFxuICAgIGRiTm9uZTogJ25vbmUnLFxuICAgIGFybW9yTm9uZTogJ25vbmUnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdub25lJyxcbiAgICBzYW5Mb3NzTm9uZTogJ25vbmUnLFxuICAgIGZ1bGxkYjogJygnICsgJ0RhbWFnZSBCb251c3xEQicgKyAnKScsXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18aGFsZicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ2NvbWJhdHxmaWdodGluZyBhdHRhY2tzJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdza2lsbHMnICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ2xhbmd1YWdlcycgKyAnKVs6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnc3BlbGxzJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnIEd1bnxSZXZvbHZlcnxQaXN0b2x8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgKyAnUmlmbGV8U2hvdGd1bnxDYXJiaW5lfEdhdWdlIHxMZWUtRW5maWVsZHxFbGVwaGFudCcgKyAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1Ym1hY2hpbmUgR3VufFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnMnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZScgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdFeGFtcGxlIENoYXJhY3RlciwgYWdlIDI3XFxuU1RSIDc1IENPTiA2MCBTSVogODAgREVYIDcwIEFQUCA2MCBJTlQgODBcXG5QT1cgNTAgRURVIDg1IFNBTiA1NSBIUCAxNCBEQjogMUQ0XFxuQnVpbGQ6IDEgTW92ZTogNyBNUDogMTAgTHVjazogNDAgQXJtb3I6IDFcXG5BdHRhY2tzIHBlciByb3VuZDogMyBTQU4gbG9zczogMWQ0LzFkOFxcbkNvbWJhdFxcbkJpdGUgNTAlICgyNS8xMCksIGRhbWFnZSAxRDZcXG5CcmF3bCAzMCUgKDE1LzYpLCBkYW1hZ2UgMUQzXFxuRGVycmluZ2VyIDQwJSAoMjAvOCksIGRhbWFnZSAxRDgrMVxcbkRvZGdlIDUwJSAoMjUvMTApXFxuU2tpbGxzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5MYW5ndWFnZXM6IEVuZ2xpc2ggODAlLCBFa2xvIDUlLlxcblNwZWxsczogU3VtbW9uIE5QQywgRGlzcGVsIE5QQy4nXG4gIH0sXG4gIGRlOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3Lkdlcm1hbicsXG4gICAgZGJOb25lOiAnbm9uZScsXG4gICAgYXJtb3JOb25lOiAnbm9uZScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25vbmUnLFxuICAgIHNhbkxvc3NOb25lOiAnbm9uZScsXG4gICAgZGljZVNob3J0OiAnd3xkJyxcbiAgICBmdWxsZGI6ICcoJyArICdTY2hhZGVuc2JvbnVzfFNiJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXwxLzIgU2NoYWRlbnNib251c3xTYi8yJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnS2FtcGZ8QW5ncmlmZjp8QU5HUklGRkUnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnS2FtcGYnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnRmVydGlna2VpdGVuJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdTcHJhY2hlbicgKyAnKVs6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnWmF1YmVyJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnIEd1bnxSZXZvbHZlcnxQaXN0b2xlfEhhbmRndW58RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdHZXdlaHJ8U2Nocm90ZmxpbnRlfENhcmFiaW5lcnxLYXJhYmluZXJ8R2F1Z2UgfExlZS1FbmZpZWxkfEVsZWZhbnRlbicgK1xuICAgICAgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTdWJtYWNoaW5lIEd1bnxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyYW5hdGV8RHluYW1pdCcgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdWb3JuYW1lIE5hY2huYW1lXFxuQWx0ZXI6IDI5XFxuQmVydWY6IEVpbiBCZXJ1ZlxcblNUIDUwXFxuTUEgNjBcXG5LTyA2MFxcbkdFIDYwXFxuR1IgNTVcXG5FUiA2NVxcbklOIDgwXFxuQkkgODVcXG5UcmVmZmVycHVua3RlOiAxMVxcbkdlaXN0aWdlIFN0YWJpbGl0w6R0OiA2MFxcblNjaGFkZW5zYm9udXM6IDBcXG5TdGF0dXI6IDBcXG5NYWdpZXB1bmt0ZTogMTJcXG5CZXdlZ3VuZ3N3ZWl0ZTogOFxcblxcbkthbXBmXFxuQW5ncmlmZmU6IDFcXG5IYW5kZ2VtZW5nZSAzMCUgKDE1LzYpLCBTY2hhZGVuIDFEM1xcbk1lc3NlciAzMCUgKDE1LzYpLCBTY2hhZGVuIDFENFxcbkF1c3dlaWNoZW4gMzAlICgxNS82KVxcblxcbkZlcnRpZ2tlaXRlbjogQW50aHJvcG9sb2dpZSA3MCUgKDM1LzE0KSwgQXJjaMOkb2xvZ2llIDMwJSAoMTUvNiksIEJpYmxpb3RoZWtzbnV0enVuZyA1MCUgKDI1LzEwKSwgRXJzdGUgSGlsZmUgNTAlICgyNS8xMCksIEZpbmFuemtyYWZ0IDQwJSAoMjAvOCksIEdlc2NoaWNodGUgNjAlICgzMC8xMiksIEtsZXR0ZXJuIDUwJSAoMjUvMTApXFxuXFxuU3ByYWNoZW46IEVuZ2xpc2NoIDg1JSAoNDIvMTcpOyBEZXV0c2NoIDQ1JSAoMjIvOSksIExhdGVpbiA0NSUgKDIyLzkpJ1xuICB9LFxuICBwbDoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5Qb2xpc2gnLFxuICAgIGRiTm9uZTogJ2JyYWsnLFxuICAgIGFybW9yTm9uZTogJ2JyYWsnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdicmFrJyxcbiAgICBzYW5Mb3NzTm9uZTogJ2JyYWsnLFxuICAgIGRpY2VTaG9ydDogJ2t8ZCcsXG4gICAgZnVsbGRiOiAnKCcgKyAnTW9keWZpa2F0b3IgT2JyYcW8ZcWEfE1PJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXwxLzIgTU98TU8vMicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ1dhbGthfEF0YWtpJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ1dhbGthJyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ1VtaWVqxJl0bm/Fm2NpJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdKxJl6eWtpJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdaYWtsxJljaWEnICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICcgUGlzdG9sZXR8UmV3b2x3ZXJ8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdLYXJhYmlufFN0cnplbGJhfFdpYXRyw7N3a2F8R2FyYW5kfEdhdWdlIHxMZWUtRW5maWVsZHxTdHJ6ZWxiYSBuYSBzxYJvbmllJyArXG4gICAgICAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1Bpc3RvbGV0IG1hc3p5bm93eXxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb8WCb3Rvd2F8R3JhbmF0fExhc2thIGR5bmFtaXR1fER5bmFtaXQnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnUHJ6eWvFgmFkb3dhIHBvc3RhxIcsIDI3IGxhdFxcbkJpYmxpb3Rla2FyelxcblMgNzUgS09OIDYwIEJDIDgwIFpSIDcwIFdZRyA2MCBJTlQgODBcXG5NT0MgNTAgV1lLIDg1IFAgNTUgUFcgMTQgTU86IDFENFxcbktyemVwYTogMSBSdWNoOiA3IFBNOiAxMCBTemN6xJnFm2NpZTogNDAgUGFuY2VyejogMVxcbkF0YWtpIHcgcnVuZHppZTogMyBVdHJhdGEgUG9jenl0YWxub8WbY2k6IDFLNC8xSzhcXG5XYWxrYVxcblVncnl6aWVuaWUgNTAlICgyNS8xMCksIG9icmHFvGVuaWEgMUs2XFxuV2Fsa2EgMzAlICgxNS82KSwgb2JyYcW8ZW5pYSAxSzNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgb2JyYcW8ZW5pYSAxSzgrMVxcblVuaWsgNTAlICgyNS8xMClcXG5VbWllasSZdG5vxZtjaVxcblRyZXN1cmEgWndpZXJ6xIV0IDU1JSwgVXJvayBPc29iaXN0eSAzMCUsIFBpZXJ3c3phIFBvbW9jIDI1JSwgVWtyeXdhbmllIDIwJSxcXG5OYXPFgnVjaGl3YW5pZSA1MCUsIE1lZHljeW5hIDQ1JSwgUHJ6ZWtvbnl3YW5pZSAyNSUsIFBzeWNob2xvZ2lhIDc1JSxcXG5OYXVrYSAoQXN0cm9ub21pYSkgOTAlLCBOYXVrYSAoQm90YW5pa2EpIDM1JSwgTmF1a2EgKFpvb2xvZ2lhKSAxMCUsXFxuU3Bvc3RyemVnYXdjem/Fm8SHIDM1JSwgVWtyeXdhbmllIDEwJVxcbkrEmXp5a2k6IEFuZ2llbHNraSA4MCUsIEVrbG8gNSUuXFxuWmFrbMSZY2lhOiBQcnp5endhbmllIE5QQywgT2Rlc8WCYW5pZSBOUEMuJ1xuICB9LFxuICBmcjoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5GcmVuY2gnLFxuICAgIGRiTm9uZTogJ0FjdW5lJyxcbiAgICBhcm1vck5vbmU6ICcoPzpBY3VuZXxhdWN1bmUpJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnQWN1bmUnLFxuICAgIHNhbkxvc3NOb25lOiAnQWN1bmUnLFxuICAgIGZ1bGxkYjogJygnICsgJ0JEfEJvbnVzIGF1eCBkb21tYWdlc3xJbXBhY3R8SW1wJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXwxLzIgSW1wfEltcC8yJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnQ29tYmF0fEFybWVzfEF0dGFxdWVzJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdDb21ww6l0ZW5jZXMnICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0xhbmd1ZXM/JyArICcpXFxcXHMqWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdTb3J0aWzDqGdlc1xcXFxzKnxTb3J0cycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ1Jldm9sdmVyfFBpc3RvbGV0fERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOiAnKD88dHlwZT4nICsgJ0NhcmFiaW5lfExlZS1FbmZpZWxkfEZ1c2lsJyArICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU01HfFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnN8TWl0cmFpbGxldXNlJyArICcpJyxcbiAgICBsYXVuY2hlZDpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ0Jvb21lcmFuZyBkZSBndWVycmV8SmF2ZWxpbmV8UGllcnJlfFNodXJpa2VufELDonRvbiBkZSBkeW5hbWl0ZXxDb2NrdGFpbCBNb2xvdG92fEdyZW5hZGUgw6AgbWFpbnxNb2xvdG92fEdyZW5hZGV8RHluYW1pdGUnICtcbiAgICAgICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ0V4YW1wbGUgQ2hhcmFjdGVyLCAyNyBhbnNcXG5GT1IgNzUgQ09OIDYwIFRBSSA4MCBERVggNzAgQVBQIDYwIElOVCA4MFxcblBPVSA1MCDDiURVIDg1IFNBTiA1NSBQViAxNCBCRDogMUQ0XFxuQ2FycnVyZTogMSBNdnQ6IDcgUE06IDEwIENoYW5jZTogNDAgQXJtdXJlOiAxXFxuQXR0YXF1ZXMgcGFyIHJvdW5kIDMgUGVydGUgZGUgU0FOOiAxZDQvMWQ4XFxuQXR0YXF1ZXNcXG5CaXRlIDUwJSAoMjUvMTApLCBkb21tYWdlIDFENlxcbkJyYXdsIDMwJSAoMTUvNiksIGRvbW1hZ2UgMUQzXFxuRGVycmluZ2VyIDQwJSAoMjAvOCksIGRvbW1hZ2UgMUQ4KzFcXG5Fc3F1aXZlciA1MCUgKDI1LzEwKVxcbkNvbXDDqXRlbmNlc1xcbkFuaW1hbCBIYW5kbGluZyA1NSUsIENoYXJtIDMwJSwgRmlyc3QgQWlkIDI1JSwgRGlzZ3Vpc2UgMjAlLFxcbkxpc3RlbiA1MCUsIE1lZGljaW5lIDQ1JSwgUGVyc3VhZGUgMjUlLCBQc3ljaG9sb2d5IDc1JSxcXG5TY2llbmNlIChBc3Ryb25vbXkpIDkwJSwgU2NpZW5jZSAoQm90YW55KSAzNSUsIFNjaWVuY2UgKFpvb2xvZ3kpIDEwJSxcXG5TcG90IEhpZGRlbiAzNSUsIFN0ZWFsdGggMTAlXFxuTGFuZ3VlOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5Tb3J0aWzDqGdlczogU3VtbW9uIE5QQywgRGlzcGVsIE5QQy4nXG4gIH0sXG4gIGVzOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LlNwYW5pc2gnLFxuICAgIGRiTm9uZTogJ25pbmd1bmEnLFxuICAgIGFybW9yTm9uZTogJ25pbmd1bmEnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICduaW5ndW5vJyxcbiAgICBzYW5Mb3NzTm9uZTogJ25vJyxcbiAgICBmdWxsZGI6ICcoJyArICdCRHxiZHxib25pZmljYWNpw7NuIGRlIGRhw7FvJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXxtZWRpbyBkYcOxb3xtaXRhZHxkYcOxbyBhIGxhIG1pdGFkJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnQ29tYmF0ZXxBcm1hcycgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXRlJyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ0hhYmlsaWRhZGVzJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdJZGlvbWFzfExlbmd1YWplc3xMZW5ndWFzJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdDb25qdXJvc3xIZWNoaXpvcycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ1Jldm9sdmVyfFBpc3RvbGF8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdSaWZsZXxDYXJhYmluYXxMZWUtRW5maWVsZHxDYXphIEVsZWZhbnRlc3xGdXNpbHxFc2NvcGV0YXxHYWxnYXxSZWNvcnRhZGEnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3ViZnVzaWx8VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2Vyc3xBbWV0cmFsbGFkb3JhJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyYW5hZGF8RGluYW1pdGEnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIDI3IGHDsW9zXFxuRlVFIDc1IENPTiA2MCBUQU0gODAgREVTIDcwIEFQQSA2MCBJTlQgODBcXG5QT0QgNTAgRURVIDg1IENPUiA1NSBQViAxNCBCRDogMUQ0XFxuQ29ycHVsZW5jaWE6IDEgTW92aW1pZW50bzogNyBQTTogMTAgU3VlcnRlOiA0MCBBcm1hZHVyYTogMVxcbk7Dum1lcm8gZGUgQXRhcXVlcyAzIFDDqXJkaWRhIGRlIGNvcmR1cmE6IDFkNC8xZDhcXG5Db21iYXRlXFxuQml0ZSA1MCUgKDI1LzEwKSwgZGHDsW8gMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZGHDsW8gMUQzXFxuRGVycmluZ2VyIDQwJSAoMjAvOCksIGRhw7FvIDFEOCsxXFxuRXNxdWl2YXIgNTAlICgyNS8xMClcXG5IYWJpbGlkYWRlc1xcbkFuaW1hbCBIYW5kbGluZyA1NSUsIENoYXJtIDMwJSwgRmlyc3QgQWlkIDI1JSwgRGlzZ3Vpc2UgMjAlLFxcbkxpc3RlbiA1MCUsIE1lZGljaW5lIDQ1JSwgUGVyc3VhZGUgMjUlLCBQc3ljaG9sb2d5IDc1JSxcXG5TY2llbmNlIChBc3Ryb25vbXkpIDkwJSwgU2NpZW5jZSAoQm90YW55KSAzNSUsIFNjaWVuY2UgKFpvb2xvZ3kpIDEwJSxcXG5TcG90IEhpZGRlbiAzNSUsIFN0ZWFsdGggMTAlXFxuSWRpb21hczogRW5nbGlzaCA4MCUsIEVrbG8gNSUuXFxuQ29uanVyb3M6IFN1bW1vbiBOUEMsIERpc3BlbCBOUEMuJ1xuICB9LFxuICAnemgtVFcnOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LlRyYWRpdGlvbmFsQ2hpbmVzZScsXG4gICAgZGJOb25lOiAnbm9uZScsXG4gICAgYXJtb3JOb25lOiAnbm9uZScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25vbmUnLFxuICAgIHNhbkxvc3NOb25lOiAnbm9uZScsXG4gICAgZnVsbGRiOiAnKCcgKyAnRGFtYWdlIEJvbnVzfERCfOWCt+Wus+WKoOWAvCcgKyAnKScsXG4gICAgLyogTkVXIEtFWSBCRUxPVyAtIFRSQU5TTEFUSU9OIFJFUVVJUkVEICovXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18aGFsZicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6XG4gICAgICAnXFxuKD86JyArICdjb21iYXR8ZmlnaHRpbmcgYXR0YWNrc3zmiLDprKXmioDog7185oiw6ayl5YiX6KGofOatpuWZqCcgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXQnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczpcbiAgICAgICdcXG4oPzonICsgJyg/OlNraWxsc3zmioDog73liJfooagpJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdMYW5ndWFnZXN86Kqe6KiAJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdzcGVsbHN85ZKS5paH5YiX6KGofOWSkuaWhycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyDpgYLnmbzmp418XFxcXC4yMuefreWPo+iHquWLleaJi+anjXxcXFxcLjI155+t5Y+j5omL5qeNKOWWrueuoSl8XFxcXC4zMuaIljdcXFxcLjY1bW3lt6bovKrmiYvmp418XFxcXC4zMuaIljdcXFxcLjY1bW3oh6rli5XmiYvmp418XFxcXC4zNTcgTWFnbnVt5bem6Lyq5omL5qeNfFxcXFwuMzjmiJY5bW3lt6bovKrmiYvmp418XFxcXC4zOOiHquWLleaJi+anjXzosp3pm7floZRNOXzmoLzmtJvlhYsxN3w5bW3oh6rli5XmiYvmp4186a2v5qC8UDA4fFxcXFwuNDHlt6bovKrmiYvmp418XFxcXC40NOmmrOagvOWNl+W3pui8quaJi+anjXxcXFxcLjQ15bem6Lyq5omL5qeNfFxcXFwuNDXoh6rli5XmiYvmp4185rKZ5ryg5LmL6be5fEd1bnxSZXZvbHZlcnxQaXN0b2x8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ+atpeanjXzljaHos5Pmp4185Y2K6Ieq5YuV5q2l5qeNfOeNteixoeanjXxSaWZsZXxTaG90Z3VufENhcmJpbmV8R2F1Z2UgfExlZS1FbmZpZWxkfEVsZXBoYW50JyArXG4gICAgICAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1Ym1hY2hpbmUgR3VufFRob21wc29ufOihnemLkuanjScgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzfOapn+anjScgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmVuYWRlfER5bmFtaXRl54iG54K454mpfOaJi+amtOW9iHzph43mrablmagnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAn56S656+E6KeS6ImyLCDlubTpvaEgMjdcXG7lipvph48gNzUg6auU6LOqIDYwIOmrlOWeiyA4MCDmlY/mjbcgNzAg5aSW6LKOIDYwIOaZuuWKmyA4MFxcbuaEj+W/lyA1MCDmlZnogrIgODUgU0FOIDU1IEhQIDE0IERCOiAxRDRcXG7pq5TmoLw6IDEgTW92ZTogNyBNUDogMTAg5bm46YGLOiA0MCDorbfnlLI6IDFcXG7mlLvmk4rmrKHmlbg6IDMg55CG5pm65Zaq5aSxOiAxZDQvMWQ4XFxu5oiw6ayl5YiX6KGoXFxu5ZKsIDUwJSAoMjUvMTApLCDlgrflrrMgMUQ2XFxu56m65omLIDMwJSAoMTUvNiksIOWCt+WusyAxRDNcXG7miYvmp40gNDAlICgyMC84KSwg5YK35a6zIDFEOCsxXFxu6ZaD6YG/IDUwJSAoMjUvMTApXFxu5oqA6IO95YiX6KGoXFxu5YuV54mp6aa06aSKIDU1JSwg5Y+W5oKFIDMwJSwg5oCl5pWRIDI1JSwg5r2b6KGMIDIwJSxcXG7ogYbogb0gNTAlLCDol6XlrbggNDUlLCDnsr7npZ7liIbmnpAgMjUlLCDlv4PnkIblrbggNzUlLFxcbuenkeWtuCAo5Y+45rOV56eR5a24KSA5MCUsIOenkeWtuCAo5a+G56K85a24KSAzNSUsIFxcbuWBteafpSAzNSUsIOWWrOijnSAxMCVcXG7oqp7oqIA6IOeyteiqniA4MCUsIOiugOWUhyA1JS5cXG7lkpLmloc6IOWPrOWWmiBOUEMsIOaMh+aPriBOUEMuJ1xuICB9XG59XG5cbmNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcbiAgZW46IHtcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdhZ2UnICsgJyhcXFxccyo6KT9cXFxccysoPzxhZ2U+XFxcXGQrKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjpcbiAgICAgICdbLFxcXFxzXSonICsgJ09jY3VwYXRpb24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnU1RSJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnU0laJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9XJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVYJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBQJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnRURVJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICsgJ1NBTnxTYW5pdHknICsgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnSFB8SGl0IHBvaW50cycgKyAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNUHxNYWdpYyBwb2ludHMnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5lbi5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZW4uZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDogJyg/PCFbYS16XSknICsgJ0J1aWxkJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnQXJtb3InICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmVuLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ01vdmUnICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnTHVjaycgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXR0YWNrcyBwZXIgcm91bmR8IyBBdHRhY2tzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmVuLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1Nhbml0eSBsb3NzfFNBTiBsb3NzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5lbi5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqJyArXG4gICAgICAnZGFtYWdlJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5lbi5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdEb2RnZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICAvLyBTa2lsbCBzaG91bGQgbm90IGJlIG5hbWVkIFwiVGhlIHBsYXllciBoYXNcIiAvIFwiYnV0IHRoZXkgcmVnZW5lcmF0ZVwiIHJlcXVpcmVkIGZvciBcIkEgQ29sZCBGaXJlIFdpdGhpblwiXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OiAnKF58KD88ISwpXFxuKSgnICsgJ0ZpZ2h0aW5nfEZpcmVhcm1zfEJyYXdsfEJpdGUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVuLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gIGRlOiB7XG4gICAgYWdlOiAnKD88IVthLXpdKScgKyAnQWx0ZXInICsgJyhcXFxccyo6KT9cXFxccysoPzxhZ2U+XFxcXGQrKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjogJ1ssXFxcXHNdKicgKyAnQmVydWYnICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnU1QnICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdLTycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ0dSJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU4nICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdNQScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0dFJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnRVInICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdCSScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnZ1N8U1RBfEdlaXN0aWdlIFN0YWJpbGl0w6R0JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnVFB8VHJlZmZlcnB1bmt0ZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTVB8TWFnaWVwdW5rdGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5kZS5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfER8V1xcXFxkKyk/fCcgK1xuICAgICAga2V5cy5kZS5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTdGF0dXJ8U3RhdC4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ1BhbnplcnVuZycgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZGUuYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdCV3xCZXdlZ3VuZ3N3ZWl0ZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ0dsw7xjaycgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQW5ncmlmZmUgcHJvIFJ1bmRlfEFuZ3JpZmZlfFBybyBSdW5kZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5kZS5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTdGFiaWxpdMOkdHN2ZXJsdXN0JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5kZS5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkW0RXXT9bK1xcXFxkXSpcXFxcL1xcXFxkW0RXXT9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqJyArXG4gICAgICAnU2NoYWRlbicgK1xuICAgICAgJyk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK3d8ZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5kZS5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZGUuaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkfHcpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0F1c3dlaWNoZW4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgLy8gU2tpbGwgc2hvdWxkIG5vdCBiZSBuYW1lZCBcIlRoZSBwbGF5ZXIgaGFzXCIgLyBcImJ1dCB0aGV5IHJlZ2VuZXJhdGVcIiByZXF1aXJlZCBmb3IgXCJBIENvbGQgRmlyZSBXaXRoaW5cIlxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLiw7XT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6XG4gICAgICAnKF58KD88ISwpXFxuKSgnICtcbiAgICAgICdBbmdyaWZmZXxIYW5kZ2VtZW5nZXxOYWhrYW1wZnxGYXVzdGZldWVyd2FmZmV8QmVpw59lbicgK1xuICAgICAgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuZGUuc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZGUuc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmRlLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gIHBsOiB7XG4gICAgYWdlOiAnKD88YWdlPlxcXFxkKyknICsgJ1xcXFxzKyg/OicgKyAnbGF0YXxsYXR8cm9rJyArICcpWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOiAnWyxcXFxcc10qJyArICdaYXfDs2QnICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnUycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0tPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ0JDJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnTU9DJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnWlInICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdXWUcnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdXWUsnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1B8UG9jenl0YWxub8WbxIcnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQV3xQdW5rdHkgV3l0cnp5bWHFgm/Fm2NpJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQTXxQdW5rdHkgTWFnaWknICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5wbC5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfER8S1xcXFxkKyk/fCcgK1xuICAgICAga2V5cy5wbC5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOiAnKD88IVthLXpdKScgKyAnS3J6ZXBhJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnUGFuY2VyeicgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMucGwuYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnUnVjaCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdTemN6xJnFm2NpZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXRha2kgdyBydW5kemllfCMgQXRha2knICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMucGwuYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnVXRyYXRhIFBvY3p5dGFsbm/Fm2NpfHV0cmF0YSBQJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5wbC5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkW0RLXT9bK1xcXFxkXSpcXFxcL1xcXFxkW0RLXT9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqJyArXG4gICAgICAnb2JyYcW8ZW5pYScgK1xuICAgICAgJyk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2t8ZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5wbC5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMucGwuaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdVbmlrJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIC8vIFNraWxsIHNob3VsZCBub3QgYmUgbmFtZWQgXCJUaGUgcGxheWVyIGhhc1wiIC8gXCJidXQgdGhleSByZWdlbmVyYXRlXCIgcmVxdWlyZWQgZm9yIFwiQSBDb2xkIEZpcmUgV2l0aGluXCJcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6XG4gICAgICAnKF58KD88ISwpXFxuKSgnICsgJ1dhbGthfEJyb8WEIFBhbG5hfEJpamF0eWthfFVncnl6aWVuaWUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMucGwuc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMucGwuc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLnBsLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gIGZyOiB7XG4gICAgYWdlOiAnKD88YWdlPlxcXFxkKylcXFxccyonICsgJ2FucycgKyAnKD8hW2Etel0pWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2NjdXBhdGlvbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdGT1InICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdUQUknICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1UnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVgnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFAnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICfDiURVJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCEoW2Etel18ZGVcXFxccykpKD86JyArXG4gICAgICAnU0FOfFNhbnTDqSBNZW50YWxlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUFZ8UG9pbnRzIGRlIHZpZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUE18UG9pbnRzIGRlIG1hZ2llJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMuZnIuZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmZyLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKScgKyAnQ2FycnVyZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0FybXVyZXxQcm90ZWN0aW9uJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZnIuYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNdnR8TW91dmVtZW50fETDqXBsYWNlbWVudCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ0NoYW5jZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXR0YXF1ZXMgcGFyIHJvdW5kJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmZyLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BlcnRlIGRlIFNhbnTDqSBtZW50YWxlfFBlcnRlIGRlIFNBTicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMuZnIuc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKig/OicgK1xuICAgICAgJ2RvbW1hZ2V8ZMOpZ8OidHMnICtcbiAgICAgICcpKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5mci5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdFc3F1aXZlcj8nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxuICAgICAgJyhefCg/PCEsKVxcbikoJyArICdBdSBjb250YWN0fMOAIGRpc3RhbmNlfENvbWJhdCByYXBwcm9jaMOpfEJpdGUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gIGVzOiB7XG4gICAgYWdlOiAnKD88YWdlPlxcXFxkKylcXFxccyonICsgJ2Fbw7HDkV1vcycgKyAnKD8hW2Etel0pWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2N1cGFjacOzbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdGVUUnICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdUQU0nICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT0QnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVMnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUEEnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdFRFUnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnQ09SfENvcmR1cmEnICsgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BWfFB1bnRvcyBkZSB2aWRhfFBcXFxcLiA/VlxcXFwuJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQTXxQdW50b3MgTcOhZ2ljb3N8UHVudG9zIGRlIE1hZ2lhJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMuZXMuZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmVzLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKScgKyAnQ29ycHVsZW5jaWEnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdBcm1hZHVyYScgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZXMuYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnTW92aW1pZW50bycgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdTdWVydGUnICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ07Dum1lcm8gZGUgQXRhcXVlcycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5lcy5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQw6lyZGlkYSBkZSBjb3JkdXJhfFDDqXJkaWRhIGRlIENPUicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMuZXMuc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xuICAgICAgJ2Rhw7FvJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5cy5lcy5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdFc3F1aXZhcicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6XG4gICAgICAnKF58KD88ISwpXFxuKSgnICsgJ0NvbWJhdGlyfEFybWFzIGRlIGZ1ZWdvfFBlbGVhfE1vcmRpc2NvJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICAnemgtVFcnOiB7XG4gICAgYWdlOiAnKD88IVthLXpdKScgKyAnYWdlfOW5tOm9oScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcbiAgICAvKiBORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRUQgKi9cbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2NjdXBhdGlvbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVFJ85Yqb6YePJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OfOmrlOizqicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1NJWnzpq5TlnosnICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlR85pm65YqbJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9XfOaEj+W/lycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFWHzmlY/mjbcnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFB85aSW6LKOJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnRURVfOaVmeiCsicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU0FOfFNhbml0eXznkIbmmbonICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdIUHxIaXQgcG9pbnRzfOeUn+WRvScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTVB8TWFnaWMgcG9pbnRzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXNbJ3poLVRXJ10uZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKScgKyAnQnVpbGR86auU5qC8JyArICcoXFxcXHMqOik/XFxcXHMqKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnQXJtb3J86K2355SyJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKig/PGFybW9yPicgK1xuICAgICAga2V5c1snemgtVFcnXS5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdNb3ZlJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ0x1Y2t85bm46YGLJyArICcoXFxcXHMqOik/XFxcXHMqKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdHRhY2tzIHBlciByb3VuZHwjIEF0dGFja3N85pS75pOK5qyh5pW4fCMg5pS75pOKJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1Nhbml0eSBsb3NzfFNBTiBsb3NzfOeQhuaZuuWWquWksXxTQU7lgLzmkI3lpLF8U0FO5YC85Zaq5aSxfOaJo1NBTicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKig/OicgK1xuICAgICAgJ2RhbWFnZXzlgrflrrMnICtcbiAgICAgICcpKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrZCk/XFxcXGQrKFxcXFxzKi9cXFxccyp8XFxcXHMqWystXVxcXFxzKig/OicgK1xuICAgICAga2V5c1snemgtVFcnXS5mdWxsZGIgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uaGFsZmRiICtcbiAgICAgICcpXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooOj9cXFxcZCtkKT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdEb2RnZXzploPpgb986ZaD6LqyJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6ICcoXnwoPzwhLClcXG4pKCcgKyAn6L+R5oiw5oqA6IO9fOWwhOaTiuaKgOiDvXxCcmF3bHxCaXRlJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCB7XG4gIHN0YXRpYyBjaGVja0xhbmd1YWdlIChsYW5nID0gbnVsbCkge1xuICAgIGlmICghbGFuZykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIGlmICh0eXBlb2YgdHJhbnNsYXRpb25zW2xhbmddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgbGFuZyA9ICdlbidcbiAgICB9XG4gICAgcmV0dXJuIGxhbmdcbiAgfVxuXG4gIHN0YXRpYyBnZXRFeGFtcGxlVGV4dCAobGFuZykge1xuICAgIGxldCBleGFtcGxlID0ga2V5cy5lbi5leGFtcGxlXG4gICAgaWYgKHR5cGVvZiBrZXlzW2xhbmddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZXhhbXBsZSA9IGtleXNbbGFuZ10uZXhhbXBsZVxuICAgIH1cbiAgICByZXR1cm4gZXhhbXBsZVxuICB9XG5cbiAgc3RhdGljIGdldFRyYW5zbGF0aW9ucyAoKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0ge31cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBrZXlzKSB7XG4gICAgICBvdXRwdXRba2V5XSA9IGtleXNba2V5XS5kZXNjcmlwdGlvblxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICBzdGF0aWMgZ2V0S2V5cyAobGFuZykge1xuICAgIHJldHVybiBrZXlzW2xhbmddIHx8IGtleXMuZW5cbiAgfVxuXG4gIHN0YXRpYyBnZXRSZWd1bGFyRXhwcmVzc2lvbnMgKGxhbmcpIHtcbiAgICByZXR1cm4gdHJhbnNsYXRpb25zW2xhbmddIHx8IHRyYW5zbGF0aW9ucy5lblxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyUmVnRXhwIH0gZnJvbSAnLi9hY3Rvci1pbXBvcnRlci1yZWdleHAuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogQ29DN0FjdG9ySW1wb3J0ZXIgaGVscGVyIGNsYXNzIHRvIGltcG9ydCBhbiBBY3RvciBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMucGFyc2VkID0ge31cbiAgICB0aGlzLml0ZW1Mb2NhdGlvbnMgPSAnJ1xuICB9XG5cbiAgc3RhdGljIGdldCBhc051bWJlciAoKSB7XG4gICAgcmV0dXJuICduJ1xuICB9XG5cbiAgc3RhdGljIGdldCBhc1N0cmluZyAoKSB7XG4gICAgcmV0dXJuICdzJ1xuICB9XG5cbiAgLyoqXG4gICAqIGdldFJlZ0V4LCBnZXQgUmVnRXhwIG9iamVjdCBpZiBub3QgY3VycmVudGx5IGEgUmVnRXhwIG9iamVjdFxuICAgKiBAcGFyYW0ge01peGVkfSByZWdleCBSZWdFeHAgb3Igc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtb2RpZmllcnMgaWYgc3RyaW5nIHdhcyBzdXBwbGllZCBpbiByZWdleCBsaXN0IG9mIG1vZGlmaWVycyB0byBhZGQgdG8gdGhlIFJlZ0V4cFxuICAgKiBAcmV0dXJucyB7UmVnRXhwfVxuICAgKi9cbiAgZ2V0UmVnRXggKHJlZ2V4LCBtb2RpZmllcnMgPSAnaXUnKSB7XG4gICAgaWYgKHJlZ2V4LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnUmVnRXhwJykge1xuICAgICAgcmV0dXJuIHJlZ2V4XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVnRXhwKHJlZ2V4LCBtb2RpZmllcnMpXG4gIH1cblxuICAvKipcbiAgICogY2xlYW5TdHJpbmcsIHJlbW92ZXMgbmV3IGxpbmUgYW5kIGNhcnJpZXIgcmV0dXJuIGNoYXJhY3RlciBhbmQgbGF0ZXJhbCBzcGFjZXMgZnJvbSBhIHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgc3RyaW5nIHRvIGNsZWFuXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBjbGVhbmVkIHN0cmluZ1xuICAgKi9cbiAgY2xlYW5TdHJpbmcgKHMpIHtcbiAgICByZXR1cm4gc1xuICAgICAgLnJlcGxhY2UoLyhcXG58XFxyKS9nLCAnICcpXG4gICAgICAucmVwbGFjZSgvXlxccyovLCAnJylcbiAgICAgIC5yZXBsYWNlKC9cXHMqXFwuP1xccypcXC4/JC8sICcnKVxuICB9XG5cbiAgLyoqXG4gICAqIHRyYW5zbGF0ZVJvbGwsIHRyYW5zbGF0ZXMgbGFuZ3VhZ2Ugc3BlY2lmaWMgc2hvcnRmb3JtIG9mIGRpY2UgKEQpIGluIHJvbGxzXG4gICAqIEV4YW1wbGUgZm9yIEdlcm1hbiByb2xsczogMVc0ID0+IDFENC5cbiAgICogRGljZSBzaG9ydGZvcm0gaXMgY29uZmlndXJlZCB1c2luZyBrZXlzLmRpY2VTaG9ydFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgcm9sbCB0byBiZSB0cmFuc2xhdGVkXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSB0cmFuc2xhdGVkIHJvbGxcbiAgICovXG4gIHRyYW5zbGF0ZVJvbGwgKHMpIHtcbiAgICBpZiAodHlwZW9mIHMgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gc1xuICAgIGlmICh0eXBlb2YgdGhpcy5rZXlzLmRpY2VTaG9ydCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICAgJyg/PG4xPlxcXFxkKyknICsgdGhpcy5rZXlzLmRpY2VTaG9ydCArICcoPzxuMj5cXFxcZCspJyxcbiAgICAgICAgJ2l1ZydcbiAgICAgIClcbiAgICAgIHJldHVybiBzLnJlcGxhY2UocmVnRXgsICckPG4xPkQkPG4yPicpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHRvSFRNTCwgY29udmVydHMgYSBzdHJpbmcgdG8gSFRNTCBzdHJpcGluZyBvdXQgZW1wdHkgbGluZXMgb3IgbGluZXMgdGhhdCBjb250YWluIGp1c3QgLCBvciAuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzIHRoZSBzdHJpbmcgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgSFRNTCBvciBhbiBlbXB0eSBzdHJpbmdcbiAgICovXG4gIHRvSFRNTCAocykge1xuICAgIGlmIChzLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBzID0gc1xuICAgICAgLnRyaW0oKVxuICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgLm1hcCh0ZXh0ID0+IHRleHQudHJpbSgpLnJlcGxhY2UoL15bLC5cXHNdKyQvLCAnJykpXG4gICAgICAuZmlsdGVyKHRleHQgPT4gdGV4dClcbiAgICAgIC5qb2luKCc8L3A+PHA+JylcbiAgICBpZiAocy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gJzxwPicgKyBzICsgJzwvcD4nXG4gIH1cblxuICAvKipcbiAgICogY2hlY2sgZXhwZWN0cyBhIGtleSBmcm9tIHRoaXMucmVnRXggd2lsbCBhdHRlbXB0IHRvIG1hdGNoIHRoZSB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZWdFeEtleSBrZXkgaW4gdGhpcy5yZWdFeFxuICAgKiBAcGFyYW0ge0pTT059XG4gICAqIC0gcmVtb3ZlRnJvbVRleHQgcmVtb3ZlIGZyb20gdGhpcy50ZXh0XG4gICAqIC0gc2F2ZUtleXMgYWRkIGdyb3VwIGtleXMgdG8gdGhpcy5wYXJzZWRcbiAgICogLSB0eXBlIElmIGFkZGluZyB3aXRoIHNhdmVLZXlzIHNldCB0eXBlIChDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZyAvIENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyKVxuICAgKiAtIHRleHQgSWYgc2V0IHVzZSB0aGlzIGluc3RlYWQgb2YgdGhpcy50ZXh0XG4gICAqIC0gcmVxdWlyZWRHcm91cCBJZiBub3QgZmFsc2UgcmVxdWlyZSBzcGVjaWZpZWQga2V5IGluIFJlZ0V4cCBncm91cHNcbiAgICogQHJldHVybnMge0ZhbHNlfS97SlNPTiBncm91cHMgJycgaXMgbWF0Y2hlZCBzdHJpbmd9XG4gICAqL1xuICBjaGVjayAoXG4gICAgcmVnRXhLZXksXG4gICAge1xuICAgICAgcmVtb3ZlRnJvbVRleHQgPSB0cnVlLFxuICAgICAgc2F2ZUtleXMgPSB0cnVlLFxuICAgICAgdHlwZSA9IENvQzdBY3RvckltcG9ydGVyLmFzU3RyaW5nLFxuICAgICAgdGV4dCA9IGZhbHNlLFxuICAgICAgcmVxdWlyZWRHcm91cCA9IGZhbHNlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGxldCBvdXRwdXQgPSBmYWxzZVxuICAgIGxldCByZWdFeHAgPSBmYWxzZVxuICAgIGlmICh0eXBlb2YgdGhpcy5yZWdFeFtyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMucmVnRXhbcmVnRXhLZXldKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMua2V5c1tyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMua2V5c1tyZWdFeEtleV0pXG4gICAgfVxuICAgIGlmIChyZWdFeHAgIT09IGZhbHNlKSB7XG4gICAgICBpZiAodGV4dCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGV4dCA9IHRoaXMudGV4dFxuICAgICAgfVxuICAgICAgY29uc3QgY2hlY2sgPSByZWdFeHAuZXhlYyh0ZXh0KVxuICAgICAgbGV0IHZhbHVlID0gbnVsbFxuICAgICAgaWYgKFxuICAgICAgICBjaGVjayAhPT0gbnVsbCAmJlxuICAgICAgICAocmVxdWlyZWRHcm91cCA9PT0gZmFsc2UgfHxcbiAgICAgICAgICB0eXBlb2YgKGNoZWNrLmdyb3VwcyB8fCB7fSlbcmVxdWlyZWRHcm91cF0gIT09ICd1bmRlZmluZWQnKVxuICAgICAgKSB7XG4gICAgICAgIG91dHB1dCA9IGNoZWNrLmdyb3VwcyB8fCB7fVxuICAgICAgICBpZiAocmVtb3ZlRnJvbVRleHQpIHtcbiAgICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZShjaGVja1swXS50cmltKCksICdcXG4nKS50cmltKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2F2ZUtleXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhjaGVjay5ncm91cHMpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZzpcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFtrZXldID0gU3RyaW5nKGNoZWNrLmdyb3Vwc1trZXldKS5yZXBsYWNlKCdcXG4nLCAnICcpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlcjpcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRba2V5XSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0Wyctc291cmNlJ10gPSBjaGVja1swXVxuICAgICAgICBvdXRwdXRbJy1pbmRleCddID0gY2hlY2suaW5kZXhcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLyoqXG4gICAqIHByb2Nlc3NDb21iYXQgZXh0cmFjdHMgY29tYmF0IC8gZG9kZ2UgaW5mb3JtYXRpb24gZnJvbSBhIHN1YnNlY3Rpb24gb2YgdGV4dFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIGNvbWJhdCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NDb21iYXQgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjb21iYXQgdGV4dCcsIHRleHQpXG4gICAgfVxuICAgIGxldCB3ZWFwb25cbiAgICBsZXQgZG9kZ2VcbiAgICBsZXQgbmV3bGluZVxuICAgIGxldCBsYXN0UGVyY2VudCA9IGZhbHNlXG4gICAgbGV0IG1heExvb3BzID0gNDBcbiAgICBkbyB7XG4gICAgICBtYXhMb29wcy0tXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKClcbiAgICAgIGlmIChcbiAgICAgICAgKGRvZGdlID0gdGhpcy5jaGVjaygnd2VhcG9uRG9kZ2UnLCB7IHNhdmVLZXlzOiBmYWxzZSwgdGV4dCB9KSlcbiAgICAgICkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKGRvZGdlWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLnNraWxscyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLnBhcnNlZC5za2lsbHMgPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkLnNraWxscy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmNsZWFuU3RyaW5nKGRvZGdlLm5hbWUpLFxuICAgICAgICAgIHZhbHVlOiBOdW1iZXIoZG9kZ2UucGVyY2VudGFnZSksXG4gICAgICAgICAgcHVzaDogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICh3ZWFwb24gPSB0aGlzLmNoZWNrKCd3ZWFwb24nLCB7XG4gICAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICAgIHRleHQsXG4gICAgICAgICAgcmVxdWlyZWRHcm91cDogbGFzdFBlcmNlbnQgPT09IGZhbHNlID8gJ3BlcmNlbnRhZ2UnIDogZmFsc2VcbiAgICAgICAgfSkpXG4gICAgICApIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSh3ZWFwb25bJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmNsZWFuU3RyaW5nKHdlYXBvbi5uYW1lIHx8ICcnKVxuICAgICAgICBsZXQgZGFtYWdlID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMuY2xlYW5TdHJpbmcod2VhcG9uLmRhbWFnZSB8fCAnJykpXG4gICAgICAgIGNvbnN0IGlzUmFuZ2VkID0gISEoXG4gICAgICAgICAgdGhpcy5jaGVjaygnaGFuZGd1bicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ3JpZmxlJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnc21iJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnbWFjaGluZUd1bicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ2xhdW5jaGVkJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHdlYXBvbi5wZXJjZW50YWdlICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHdlYXBvbi5wZXJjZW50YWdlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICBsYXN0UGVyY2VudCA9IE51bWJlcih3ZWFwb24ucGVyY2VudGFnZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0UGVyY2VudCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBsZXQgZm91bmRcbiAgICAgICAgbGV0IGFoZGIgPSBmYWxzZVxuICAgICAgICBsZXQgYWRkYiA9IGZhbHNlXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBmb3VuZCA9IHRoaXMuZ2V0UmVnRXgoXG4gICAgICAgICAgICAnXFxcXHMqWystXT9cXFxccyooJyArXG4gICAgICAgICAgICAgIHRoaXMua2V5cy5oYWxmZGIgK1xuICAgICAgICAgICAgICAnKVxcXFxzKignICtcbiAgICAgICAgICAgICAgdGhpcy5rZXlzLmZ1bGxkYiArXG4gICAgICAgICAgICAgICcpP1stK10/XFxcXHMqKCcgK1xuICAgICAgICAgICAgICB0aGlzLnBhcnNlZC5kYi5yZXBsYWNlKC9eWy0rXS8sICcnKSArXG4gICAgICAgICAgICAgICcpPydcbiAgICAgICAgICApLmV4ZWMoZGFtYWdlKVxuICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgYWhkYiA9IHRydWVcbiAgICAgICAgICAgIGRhbWFnZSA9IGRhbWFnZS5yZXBsYWNlKGZvdW5kWzBdLCAnJylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJlZ0V4KFxuICAgICAgICAgICAgICAnXFxcXHMqWystXT9cXFxccyooJyArXG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzLmZ1bGxkYiArXG4gICAgICAgICAgICAgICAgJylcXFxccypbLStdP1xcXFxzKignICtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZC5kYi5yZXBsYWNlKC9eWy0rXS8sICcnKSArXG4gICAgICAgICAgICAgICAgJyk/J1xuICAgICAgICAgICAgKS5leGVjKGRhbWFnZSlcbiAgICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgICBhZGRiID0gdHJ1ZVxuICAgICAgICAgICAgICBkYW1hZ2UgPSBkYW1hZ2UucmVwbGFjZShmb3VuZFswXSwgJycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChmb3VuZClcbiAgICAgICAgY29uc3QgZGFtYWdlcyA9IGRhbWFnZS5zcGxpdCgnLycpXG4gICAgICAgIGNvbnN0IGlzU2hvdGd1biA9IGRhbWFnZXMubGVuZ3RoID09PSAzXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgIHNraWxsOiB7XG4gICAgICAgICAgICAgIGlkOiBsYXN0UGVyY2VudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgbm9ybWFsOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGlzU2hvdGd1biA/IDEwIDogMCxcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IGRhbWFnZXNbMF1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbG9uZzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyAyMCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzFdIDogJydcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXh0cmVtZToge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyA1MCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzJdIDogJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgc29tZSBvZiB0aGUgcHJvcGVydGllc1xuICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4gPSBpc1Nob3RndW5cbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkID0gaXNSYW5nZWQgfHwgaXNTaG90Z3VuXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMubWVsZWUgPSAhZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuYWhkYiA9IGFoZGJcbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5hZGRiID0gYWRkYlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLmF0dGFja3MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcyA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcy5wdXNoKGRhdGEpXG4gICAgICB9IGVsc2UgaWYgKChuZXdsaW5lID0gdGV4dC5tYXRjaCgvXiguKylcXG4vKSkpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShuZXdsaW5lWzBdLCAnXFxuJylcbiAgICAgIH0gZWxzZSBpZiAoKG5ld2xpbmUgPSB0ZXh0Lm1hdGNoKC9eW15cXG5dKyQvKSkpIHtcbiAgICAgICAgdGV4dCA9ICcnXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmICghIXdlYXBvbiB8fCAhIWRvZGdlIHx8ICEhdGV4dCkpXG4gICAgaWYgKG1heExvb3BzID09PSAwKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvclVuZXhwZWN0ZWRXZWFwb25UZXh0JylcbiAgICAgIClcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1VuZXhwZWN0ZWQgd2VhcG9uczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU2tpbGxzIGV4dHJhY3RzIHNraWxscyAvIGxhbmd1YWdlIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBza2lsbHMgLyBsYW5ndWFnZSBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTa2lsbHMgKHRleHQsIGtleSA9ICdza2lsbHMnKSB7XG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGJyZWFrcyA9IHRleHQuc3BsaXQoL1xcLlxccj9cXG4vKVxuICAgIGlmIChicmVha3MubGVuZ3RoID4gMSkge1xuICAgICAgdGV4dCA9IGJyZWFrc1swXVxuICAgIH1cbiAgICBsZXQgc2tpbGxcbiAgICBsZXQgbWF4TG9vcHMgPSA0MFxuICAgIGRvIHtcbiAgICAgIG1heExvb3BzLS1cbiAgICAgIHRleHQgPSB0ZXh0LnRyaW0oKVxuICAgICAgc2tpbGwgPSB0aGlzLmNoZWNrKCdza2lsbCcsIHsgc2F2ZUtleXM6IGZhbHNlLCB0ZXh0IH0pXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShza2lsbFsnLXNvdXJjZSddLCAnXFxuJylcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZFtrZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMucGFyc2VkW2tleV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkW2tleV0ucHVzaCh7XG4gICAgICAgICAgbmFtZTogdGhpcy5jbGVhblN0cmluZyhza2lsbC5uYW1lKSxcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHNraWxsLnBlcmNlbnRhZ2UpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmIHNraWxsKVxuICAgIGlmIChtYXhMb29wcyA9PT0gMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JVbmV4cGVjdGVkU2tpbGxzVGV4dCcpXG4gICAgICApXG4gICAgICBjb25zb2xlLmRlYnVnKCdVbmV4cGVjdGVkIHNraWxsczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU3BlbGxzIGV4dHJhY3RzIHNwZWxsIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBzcGVsbCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTcGVsbHMgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgYnJlYWtzID0gdGV4dC5zcGxpdCgvXFwuXFxyP1xcbi8pXG4gICAgaWYgKGJyZWFrcy5sZW5ndGggPiAxKSB7XG4gICAgICB0ZXh0ID0gYnJlYWtzWzBdXG4gICAgfVxuICAgIGNvbnN0IHNwZWxsc0FyciA9IHRleHQucmVwbGFjZSgvKFtcXG5cXHJdKykvZywgJyAnKS5zcGxpdCgvKD88IVxcKFteKV0rKSwvKVxuICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC5yZXBsYWNlKHRleHQudHJpbSgpLCAnXFxuJylcbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxsc0Fycikge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZC5zcGVsbHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMucGFyc2VkLnNwZWxscyA9IFtdXG4gICAgICB9XG4gICAgICB0aGlzLnBhcnNlZC5zcGVsbHMucHVzaCh0aGlzLmNsZWFuU3RyaW5nKHNwZWxsKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcGFyc2VDaGFyYWN0ZXIgZXh0cmFjdHMgaW5mb3JtYXRpb24gZnJvbSB0aGUgcmF3IHRleHQgZGVzY3JpcHRpb24gb2YgYW4gZW50aXR5IChOUEMgb3IgQ3JlYXR1cmUpXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgZW50aXR5XG4gICAqIEByZXR1cm5zIGV4dHJhY3RlZERhdGEgb2JqZWN0IHdpdGggdGhlIGVudGl0eSBkYXRhXG4gICAqL1xuICBhc3luYyBwYXJzZUNoYXJhY3RlciAodGV4dCkge1xuICAgIC8vIFJlcGxhY2UgXCJFbiBEYXNoXCIgYW5kIFwiRW0gRGFzaFwiIGRhc2hlcyB3aXRoIC0gYW5kIFwiUmlnaHQgU2luZ2xlIFF1b3RhdGlvbiBNYXJrXCIgd2l0aCAnXG4gICAgdGhpcy50ZXh0ID0gU3RyaW5nKHRleHQpXG4gICAgICAudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXFx1MjAxM3xcXHUyMDE0fFxcdTIyMTIvZywgJy0nKVxuICAgICAgLnJlcGxhY2UoL1xcdTIwMTkvZywgXCInXCIpXG4gICAgICAucmVwbGFjZSgvW1xcdWRiYzAtXFx1ZGJmZV1bXFx1ZGMwMC1cXHVkZmZmXS9nLCAnJylcbiAgICAvLyBFYXJsaWVzdCBjaGFyYWN0ZXIgdGhhdCBoYXMgYmVlbiB1c2VkLCB0byB3b3JrIG91dCB0aGUgaGVhZGVyXG4gICAgbGV0IG1pbiA9IHRoaXMudGV4dC5sZW5ndGhcbiAgICAvLyBTVFIsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgbGV0IGNoZWNrID0gdGhpcy5jaGVjaygnc3RyJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVtcbiAgICAgICctaW5kZXgnXG4gICAgXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBDT04sIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdjb24nLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBTSVosIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdzaXonLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBJTlQsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdpbnQnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBQT1csIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdwb3cnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBERVgsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdkZXgnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBBUFAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdhcHAnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBFRFUsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdlZHUnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBTQU4sIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdzYW4nLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBIUCwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2hwJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gTVAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdtcCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIFdvcmsgb3V0IHRoZSBoZWFkZXIgYmFzZWQgb24gcHJldmlvdXMgbWluaW11bSBtYXRjaGVkIGNoYXJhY3RlclxuICAgIGxldCBoZWFkZXJcbiAgICBpZiAobWluID4gMCkge1xuICAgICAgaGVhZGVyID0gdGhpcy50ZXh0LnN1YnN0cigwLCBtaW4pXG4gICAgICAvLyBHZXQgbmFtZSBmcm9tIGhlYWRlclxuICAgICAgY2hlY2sgPSB0aGlzLmNoZWNrKCduYW1lJywgeyB0ZXh0OiBoZWFkZXIgfSlcbiAgICAgIGlmIChjaGVjayA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gSWYgbm90IGZvdW5kIHVzZSBkZWZhdWx0IE5QQyBuYW1lXG4gICAgICAgIHRoaXMucGFyc2VkLm5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRVbm5hbWVkQ2hhcmFjdGVyJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJlbW92ZSBuYW1lIGZyb20gaGVhZGVyXG4gICAgICAgIGhlYWRlciA9IGhlYWRlci5yZXBsYWNlKGNoZWNrWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgfVxuICAgICAgLy8gR2V0IGFnZSBmcm9tIGhlYWRlclxuICAgICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdhZ2UnLCB7IHRleHQ6IGhlYWRlciB9KVxuICAgICAgaWYgKGNoZWNrICE9PSBmYWxzZSkge1xuICAgICAgICAvLyBJZiBmb3VuZCByZW1vdmUgYWdlIGZyb20gaGVhZGVyXG4gICAgICAgIGhlYWRlciA9IGhlYWRlci5yZXBsYWNlKGNoZWNrWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgfVxuICAgICAgLy8gR2V0IG9jY3VwYXRpb24gZnJvbSBoZWFkZXJcbiAgICAgIGlmICghdGhpcy5jaGVjaygnb2NjdXBhdGlvbicsIHsgdGV4dDogaGVhZGVyIH0pICYmIGhlYWRlci50cmltKCkgIT09ICcnKSB7XG4gICAgICAgIC8vIElmIG9jY3VwYXRpb24gaXMgbm90IGZvdW5kIGJ1dCB0aGVyZSBpcyBhIGhlYWRlciBzZXQgdGhlIG9jY3VwYXRpb24gdG8gdGhlIHJlbWFpbmluZyBoZWFkZXJcbiAgICAgICAgbGV0IG9jY3VwYXRpb24gPSBoZWFkZXJcbiAgICAgICAgaWYgKGhlYWRlci5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZnVsbCBzdG9wIGp1c3QgdXNlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBoZWFkZXIgYXMgdGhlIG9jY3VwYXRpb25cbiAgICAgICAgICBvY2N1cGF0aW9uID0gaGVhZGVyLnN1YnN0cigwLCBoZWFkZXIuaW5kZXhPZignLicpICsgMSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uID0gb2NjdXBhdGlvblxuICAgICAgICAgIC5yZXBsYWNlKC8oW1xcblxccl0rKS9nLCAnICcpXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC5yZXBsYWNlKC8sJC8sICcnKVxuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZShvY2N1cGF0aW9uLnRyaW0oKSwgJ1xcbicpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZXJlIGlzIG5vIGhlYWRlciBzZXQgZGVmYXVsdCBOUEMgbmFtZVxuICAgICAgdGhpcy5wYXJzZWQubmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbXBvcnRlZFVubmFtZWRDaGFyYWN0ZXInKVxuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBvY2N1cGF0aW9uIGJ1dCBubyBhZ2UgY2hlY2sgaWYgdGhlIG9jY3VwYXRpb24gc3RhcnRzIG51bWJlciBzcGxpdCBhZ2UgYW5kIG9jY3VwYXRpb25cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5wYXJzZWQub2NjdXBhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLnBhcnNlZC5hZ2UgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCBvY2N1cGF0aW9uQWdlID0gdGhpcy5wYXJzZWQub2NjdXBhdGlvbi5tYXRjaChcbiAgICAgICAgL14oPzxhZ2U+XFxkKyksKD88b2NjdXBhdGlvbj4uKykkL1xuICAgICAgKVxuICAgICAgaWYgKG9jY3VwYXRpb25BZ2UpIHtcbiAgICAgICAgdGhpcy5wYXJzZWQuYWdlID0gb2NjdXBhdGlvbkFnZS5ncm91cHMuYWdlXG4gICAgICAgIHRoaXMucGFyc2VkLm9jY3VwYXRpb24gPSBvY2N1cGF0aW9uQWdlLmdyb3Vwcy5vY2N1cGF0aW9uLnRyaW0oKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBHZXQgZGFtYWdlIGJvbnVzLCBpZiBub3QgZm91bmQgb3Igbm9uZSBzZXQgdG8gMFxuICAgIGlmIChcbiAgICAgICF0aGlzLmNoZWNrKCdkYicpIHx8XG4gICAgICB0aGlzLmNoZWNrKCdkYk5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5kYlxuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHRoaXMucGFyc2VkLmRiID0gJzAnXG4gICAgfVxuICAgIHRoaXMucGFyc2VkLmRiID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMucGFyc2VkLmRiKVxuICAgIC8vIEdldCBidWlsZFxuICAgIHRoaXMuY2hlY2soJ2J1aWxkJylcbiAgICAvLyBHZXQgYXJtb3IsIGlmIG5vdCBmb3VuZCBvciBub25lIHNldCB0byAwXG4gICAgaWYgKFxuICAgICAgIXRoaXMuY2hlY2soJ2FybW9yJykgfHxcbiAgICAgIHRoaXMuY2hlY2soJ2FybW9yTm9uZScsIHtcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgIHRleHQ6IHRoaXMucGFyc2VkLmFybW9yXG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGhpcy5wYXJzZWQuYXJtb3IgPSAnMCdcbiAgICB9XG4gICAgLy8gR2V0IG1vdmVtZW50XG4gICAgdGhpcy5jaGVjaygnbW92JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVxuICAgIC8vIEdldCBsdWNrXG4gICAgdGhpcy5jaGVjaygnbGNrJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVxuICAgIC8vIEdldCBzYW5pdHkgbG9zc1xuICAgIHRoaXMuY2hlY2soJ3Nhbkxvc3MnKVxuICAgIHRoaXMucGFyc2VkLnNhbkxvc3MgPSB0aGlzLnRyYW5zbGF0ZVJvbGwodGhpcy5wYXJzZWQuc2FuTG9zcylcbiAgICAvLyBHZXQgYXR0YWNrcyBwZXIgcm91bmQsIGlmIG5vdCBmb3VuZCBvciBub25lIHNldCB0byAwXG4gICAgaWYgKFxuICAgICAgdGhpcy5jaGVjaygnYXR0YWNrc1BlclJvdW5kJykgJiZcbiAgICAgIHRoaXMuY2hlY2soJ2F0dGFja3NQZXJSb3VuZE5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5hdHRhY2tzUGVyUm91bmRcbiAgICAgIH0pXG4gICAgKSB7XG4gICAgICB0aGlzLnBhcnNlZC5hdHRhY2tzUGVyUm91bmQgPSAnMCdcbiAgICB9XG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBjb21iYXQgc2VjdGlvblxuICAgIHRoaXMudGV4dCA9ICdcXG4nICsgdGhpcy50ZXh0XG4gICAgbGV0IHNlY3Rpb25zID0gdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvbkNvbWJhdHMgKyAnKScsICdpJylcbiAgICBpZiAodGhpcy50ZXh0Lm1hdGNoKHNlY3Rpb25zKSA9PT0gbnVsbCkge1xuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gY29tYmF0IHNlY3Rpb24gZ3Vlc3Mgd2hlcmUgaXQgc3RhcnRzXG4gICAgICBzZWN0aW9ucyA9IHRoaXMuY2hlY2soJ2d1ZXNzU3RhcnRDb21iYXQnLCB7XG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlXG4gICAgICB9KVxuICAgICAgaWYgKHNlY3Rpb25zKSB7XG4gICAgICAgIC8vIEFkZCBhIGhlYWRlciB0byB0aGUgc3RhcnQgb2YgdGhlIGNvbWJhdCBzZWN0aW9uXG4gICAgICAgIHRoaXMudGV4dCA9IFtcbiAgICAgICAgICB0aGlzLnRleHQuc2xpY2UoMCwgc2VjdGlvbnNbJy1pbmRleCddKSxcbiAgICAgICAgICB0aGlzLmtleXMubmV3Q29tYmF0SGVhZGVyLFxuICAgICAgICAgIHRoaXMudGV4dC5zbGljZShzZWN0aW9uc1snLWluZGV4J10pXG4gICAgICAgIF0uam9pbignJylcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU3BsaXQgdGhlIHNlY3Rpb25zIENvbWJhdCwgU2tpbGxzLCBMYW5ndWFnZXMsIGFuZCBTcGVsbHNcbiAgICBjb25zdCByZWdFeHBTZWN0aW9ucyA9IHRoaXMuZ2V0UmVnRXgodGhpcy5yZWdFeC5zZWN0aW9ucywgJ2knKVxuICAgIHNlY3Rpb25zID0gdGhpcy50ZXh0LnNwbGl0KHJlZ0V4cFNlY3Rpb25zKVxuICAgIGlmIChzZWN0aW9ucyAhPT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGltID0gc2VjdGlvbnMubGVuZ3RoOyBpIDwgaW07IGkrKykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uQ29tYmF0cyArICcpJywgJ2knKVxuICAgICAgICAgICkgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIGNvbWJhdFxuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIHRoaXMucHJvY2Vzc0NvbWJhdChzZWN0aW9uc1tpICsgMV0pXG4gICAgICAgICAgaSsrXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uU2tpbGxzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgc2tpbGxzXG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzU2tpbGxzKHNlY3Rpb25zW2kgKyAxXSlcbiAgICAgICAgICBpKytcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25MYW5nYXVnZXMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBsYW5ndWFnZXNcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTa2lsbHMoc2VjdGlvbnNbaSArIDFdLCAnbGFuZ3VhZ2VzJylcbiAgICAgICAgICBpKytcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25TcGVsbHMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBzcGVsbHNcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTcGVsbHMoc2VjdGlvbnNbaSArIDFdKVxuICAgICAgICAgIGkrK1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEFueSByZW1haW5pbmcgdGV4dCBhZGQgdG8gR00gbm90ZXMgc28geW91IGNhbiBlYXNpbHkgc2VlIGlmIHRoZXJlIGFyZSBhbnkgb2J2aW91cyBpc3N1ZSBvciBqdXN0IGdlbmVyYWwgbm90ZXNcbiAgICB0aGlzLnBhcnNlZC5nbW5vdGVzID0gdGhpcy50b0hUTUwodGhpcy50ZXh0KVxuICAgIHJldHVybiB0aGlzLnBhcnNlZFxuICB9XG5cbiAgZGlzYWJsZUF0dHJpYkF1dG8gKGtleSwgYXR0cmliVmFsdWUsIGNoZWNrLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgdmFsdWUgPSBNYXRoLm1heCgwLCBOdW1iZXIoYXR0cmliVmFsdWUpKVxuICAgIGlmICh2YWx1ZSAhPT0gTnVtYmVyKGNoZWNrKSkge1xuICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9LmF1dG9gXSA9IGZhbHNlXG4gICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uYXR0cmlicy4ke2tleX0udmFsdWVgXSA9IHZhbHVlXG4gICAgICBpZiAoa2V5ID09PSAnYnVpbGQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbYHN5c3RlbS5hdHRyaWJzLiR7a2V5fS5jdXJyZW50YF0gPSB2YWx1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9Lm1heGBdID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gZW50aXR5IChgbnBjYCBvciBgY3JlYXR1cmVgKSBmcm9tIHRoZSBvYmplY3Qgd2l0aCB0aGUgYWxyZWFkeSBwYXJzZWQgZW50aXR5IGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IGNoYXJhY3RlckRhdGEgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZW50aXR5VHlwZVN0cmluZyBlbnRpdHkgdHlwZSBvYnRhaW5lZCBmcm9tIHRoZSB1c2VyIGlucHV0XG4gICAqIEByZXR1cm5zIHtBY3Rvcn0gdGhlIGNyZWF0ZWQgZm91bmRyeSBgQWN0b3JgXG4gICAqL1xuICBhc3luYyBjcmVhdGVFbnRpdHkgKGNoYXJhY3RlckRhdGEsIGVudGl0eVR5cGUpIHtcbiAgICBjb25zdCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPVxuICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5jcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMoKVxuICAgIGlmIChlbnRpdHlUeXBlICE9PSAnbnBjJykge1xuICAgICAgZW50aXR5VHlwZSA9ICdjcmVhdHVyZSdcbiAgICB9XG4gICAgY29uc3QgYWN0b3JEYXRhID0ge1xuICAgICAgbmFtZTogY2hhcmFjdGVyRGF0YS5uYW1lLFxuICAgICAgdHlwZTogZW50aXR5VHlwZSxcbiAgICAgIGZvbGRlcjogaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyLmlkLFxuICAgICAgZGF0YTogY2hhcmFjdGVyRGF0YS5hY3RvclxuICAgIH1cbiAgICBjb25zdCBucGMgPSBhd2FpdCBBY3Rvci5jcmVhdGUoYWN0b3JEYXRhKVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGNoYXJhY3RlckRhdGEuaXRlbXMsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgbGV0IHZhbHVlID0gMFxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmhwPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdocCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5ocC52YWx1ZSxcbiAgICAgICAgbnBjLmhwTWF4LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1wPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdtcCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tcC52YWx1ZSxcbiAgICAgICAgbnBjLm1wTWF4LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1vdj8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnbW92JyxcbiAgICAgICAgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1vdi52YWx1ZSxcbiAgICAgICAgbnBjLm1vdixcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5idWlsZD8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnYnVpbGQnLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuYnVpbGQudmFsdWUsXG4gICAgICAgIG5wYy5idWlsZCxcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5kYj8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyhjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuZGIudmFsdWUpLnJlcGxhY2UoL15cXCtcXHMqLywgJycpXG4gICAgICBpZiAodmFsdWUgIT09IFN0cmluZyhucGMuZGIpKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmRiLmF1dG8nXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJ10gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRGF0YSkubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygndXBkYXRlRGF0YTonLCB1cGRhdGVEYXRhKVxuICAgICAgfVxuICAgICAgYXdhaXQgbnBjLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgIH1cbiAgICBjb25zdCB1cGRhdGVJdGVtRGF0YSA9IFtdXG4gICAgbGV0IGxhc3RXZWFwb25Ta2lsbCA9IG51bGxcbiAgICBmb3IgKGNvbnN0IHBhaXIgb2YgdGhpcy53ZWFwb25Ta2lsbHMpIHtcbiAgICAgIGlmIChwYWlyWzBdICE9PSBmYWxzZSkge1xuICAgICAgICBsYXN0V2VhcG9uU2tpbGwgPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICAgIGkgPT4gaS5uYW1lID09PSBwYWlyWzBdLm5hbWUgJiZcbiAgICAgICAgICAgIGkudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgTnVtYmVyKGkuc3lzdGVtLnZhbHVlKSA9PT0gTnVtYmVyKHBhaXJbMF0uc3lzdGVtLnZhbHVlKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb25zdCB3ZWFwb24gPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICBpID0+IGkubmFtZSA9PT0gcGFpclsxXS5uYW1lICYmXG4gICAgICAgICAgaS50eXBlID09PSAnd2VhcG9uJyAmJlxuICAgICAgICAgIGkuc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UgPT09IHBhaXJbMV0uc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2VcbiAgICAgIClcbiAgICAgIGlmIChsYXN0V2VhcG9uU2tpbGxbMF0gJiYgd2VhcG9uWzBdKSB7XG4gICAgICAgIHVwZGF0ZUl0ZW1EYXRhLnB1c2goe1xuICAgICAgICAgIF9pZDogd2VhcG9uWzBdLmlkLFxuICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IGxhc3RXZWFwb25Ta2lsbFswXS5pZCxcbiAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4ubmFtZSc6IGxhc3RXZWFwb25Ta2lsbFswXS5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh1cGRhdGVJdGVtRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCd1cGRhdGVJdGVtRGF0YTonLCB1cGRhdGVJdGVtRGF0YSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5wYy51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHVwZGF0ZUl0ZW1EYXRhKVxuICAgIH1cbiAgICByZXR1cm4gbnBjXG4gIH1cblxuICAvKipcbiAgICogYWN0b3JEYXRhLCBjb252ZXJ0IHBhcnNlQ2hhcmFjdGVyIGRhdGEgaW50byBBY3RvciBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYyBvYmplY3Qgd2l0aCB0aGUgZGF0YSBleHRyYWN0ZWQgZnJvbSB0aGUgY2hhcmFjdGVyIGFzIHJldHVybmVkIGZyb20gYHBhcnNlQ2hhcmFjdGVyYFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBmb3JtYXR0ZWQgQWN0b3IgZGF0YVxuICAgKi9cbiAgYWN0b3JEYXRhIChwYykge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBjaGFyYWN0ZXJpc3RpY3M6IHt9LFxuICAgICAgYXR0cmliczoge30sXG4gICAgICBpbmZvczoge30sXG4gICAgICBzcGVjaWFsOiB7fSxcbiAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgIGtlZXBlcjogJydcbiAgICAgIH0sXG4gICAgICBmbGFnczoge1xuICAgICAgICBsb2NrZWQ6IGZhbHNlLFxuICAgICAgICBkaXNwbGF5Rm9ybXVsYTogZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgJ3N0cicsXG4gICAgICAnY29uJyxcbiAgICAgICdzaXonLFxuICAgICAgJ2RleCcsXG4gICAgICAnYXBwJyxcbiAgICAgICdpbnQnLFxuICAgICAgJ3BvdycsXG4gICAgICAnZWR1J1xuICAgIF0pIHtcbiAgICAgIGlmICh0eXBlb2YgcGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XSA9IHtcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHBjW2tleV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydzYW4nLCAnbW92JywgJ2J1aWxkJywgJ2FybW9yJywgJ2xjaycsICdocCcsICdtcCddKSB7XG4gICAgICBpZiAodHlwZW9mIHBjW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRhdGEuYXR0cmlic1trZXldID0ge1xuICAgICAgICAgIHZhbHVlOiBOdW1iZXIocGNba2V5XSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHBjLmRiICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5hdHRyaWJzLmRiID0ge1xuICAgICAgICB2YWx1ZTogcGMuZGJcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydhZ2UnLCAnb2NjdXBhdGlvbiddKSB7XG4gICAgICBpZiAodHlwZW9mIHBjW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRhdGEuaW5mb3Nba2V5XSA9IHBjW2tleV1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYy5zYW5Mb3NzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgW3Bhc3NlZCwgZmFpbGVkXSA9IHBjLnNhbkxvc3Muc3BsaXQoJy8nKVxuICAgICAgZGF0YS5zcGVjaWFsLnNhbkxvc3MgPSB7XG4gICAgICAgIGNoZWNrUGFzc2VkOiBwYXNzZWQsXG4gICAgICAgIGNoZWNrRmFpbGxlZDogZmFpbGVkXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGMuYXR0YWNrc1BlclJvdW5kICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5zcGVjaWFsLmF0dGFja3NQZXJSb3VuZCA9IE51bWJlcihwYy5hdHRhY2tzUGVyUm91bmQpXG4gICAgfVxuICAgIGRhdGEuZGVzY3JpcHRpb24ua2VlcGVyID0gcGMuZ21ub3Rlc1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdhY3RvckRhdGE6JywgZGF0YSlcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBpdGVtc0RhdGEsIGNvbnZlcnQgcGFyc2VDaGFyYWN0ZXIgZGF0YSBpbnRvIEFjdG9yIGl0ZW0gZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gcGMgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlciBhcyByZXR1cm5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybnMge09iamVjdH0gZm9ybWF0dGVkIEFjdG9yIGRhdGFcbiAgICovXG4gIGFzeW5jIGl0ZW1zRGF0YSAocGMpIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdXG4gICAgdGhpcy53ZWFwb25Ta2lsbHMgPSBbXVxuICAgIC8vIFdlYXBvbiBza2lsbHNcbiAgICBpZiAodHlwZW9mIHBjLmF0dGFja3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IGF0dGFjayBvZiBwYy5hdHRhY2tzKSB7XG4gICAgICAgIGxldCBza2lsbCA9IGZhbHNlXG4gICAgICAgIGlmIChhdHRhY2suc3lzdGVtPy5za2lsbD8uaWQgIT09IHRydWUpIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMud2VhcG9uU2tpbGwoYXR0YWNrKVxuICAgICAgICAgIGl0ZW1zLnB1c2goc2tpbGwpXG4gICAgICAgIH1cbiAgICAgICAgYXR0YWNrLnN5c3RlbS5za2lsbC5pZCA9IG51bGxcbiAgICAgICAgaXRlbXMucHVzaChhdHRhY2spXG4gICAgICAgIHRoaXMud2VhcG9uU2tpbGxzLnB1c2goW3NraWxsLCBhdHRhY2tdKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBTa2lsbHNcbiAgICBpZiAodHlwZW9mIHBjLnNraWxscyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgcGMuc2tpbGxzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgc2tpbGwubmFtZSwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgaWYgKHR5cGVvZiBza2lsbC5wdXNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBza2lsbC5wdXNoXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoY2xvbmVkKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcHRpb25zID0ge31cbiAgICAgICAgICBpZiAodHlwZW9mIHNraWxsLnB1c2ggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBvcHRpb25zLnB1c2ggPSBza2lsbC5wdXNoXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goQ29DQWN0b3IuZW1wdHlTa2lsbChza2lsbC5uYW1lLCBza2lsbC52YWx1ZSwgb3B0aW9ucykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gTGFuZ3VhZ2VzXG4gICAgaWYgKHR5cGVvZiBwYy5sYW5ndWFnZXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHBjLmxhbmd1YWdlcykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsIHNraWxsLm5hbWUsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgICB9KVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLmJhc2UgPSBza2lsbC52YWx1ZVxuICAgICAgICAgIGl0ZW1zLnB1c2goZm91bmRyeS51dGlscy5kdXBsaWNhdGUoY2xvbmVkKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtcy5wdXNoKFxuICAgICAgICAgICAgQ29DQWN0b3IuZW1wdHlTa2lsbChza2lsbC5uYW1lLCBza2lsbC52YWx1ZSwge1xuICAgICAgICAgICAgICBpbWc6IENvQzdJdGVtLmljb25MYW5ndWFnZSxcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246ICdMYW5ndWFnZSdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNwZWxsc1xuICAgIGlmICh0eXBlb2YgcGMuc3BlbGxzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBuYW1lIG9mIHBjLnNwZWxscykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdzcGVsbCcsIG5hbWUsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgICB9KVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBpdGVtcy5wdXNoKGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGNsb25lZCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbXMucHVzaChDb0NBY3Rvci5lbXB0eVNwZWxsKG5hbWUpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgLyoqIHdlYXBvblNraWxsIHRyaWVzIHRvIGd1ZXNzIHdoYXQga2luZCBvZiB3ZWFwb24gc2tpbGwgdG8gdXNlIGZvciB3ZWFwb24gZnJvbSBpdCdzIG5hbWVcbiAgICogQHBhcmFtIHdlYXBvbjogSlNPTiwgd2VhcG9uIGRhdGFcbiAgICovXG4gIGFzeW5jIHdlYXBvblNraWxsICh3ZWFwb24pIHtcbiAgICBsZXQgc2tpbGwgPSBudWxsXG4gICAgaWYgKHRoaXMuZ2V0UmVnRXgoJ2hhbmRndW4nKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnSGFuZGd1bicsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgSGFuZGd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgncmlmbGUnKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnUmlmbGUvU2hvdGd1bicsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnUmlmbGUnLCB7XG4gICAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsICdTaG90Z3VuJywge1xuICAgICAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIFJpZmxlIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KCdzbWInKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnU3VibWFjaGluZSBHdW4nLCB7XG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgIH0pXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIFN1Ym1hY2hpbmUgR3VuIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KCdtYWNoaW5lR3VuJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ01hY2hpbmUgR3VuJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBNYWNoaW5lIEd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgnbGF1bmNoZWQnKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnTGF1bmNoJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBMYXVuY2ggc2tpbGw6ICR7c2tpbGx9YClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNraWxsICE9PSBudWxsICYmIHR5cGVvZiBza2lsbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHNraWxsQ2xvbmUgPSBza2lsbC5jbG9uZSh7XG4gICAgICAgIHN5c3RlbToge1xuICAgICAgICAgIHZhbHVlOiB3ZWFwb24uc3lzdGVtPy5za2lsbD8uaWRcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiBza2lsbENsb25lXG4gICAgfVxuICAgIGNvbnN0IGZpcmVhcm1zID0gd2VhcG9uLnN5c3RlbT8ucHJvcGVydGllcz8ucm5nZFxuICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgIHdlYXBvbi5uYW1lLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKVxuICAgIClcbiAgICBjb25zdCBuZXdTa2lsbCA9IHtcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBuYW1lOiBwYXJ0cy5uYW1lLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHNraWxsTmFtZTogcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiB0cnVlLFxuICAgICAgICAgIGZpZ2h0aW5nOiAhZmlyZWFybXMsXG4gICAgICAgICAgZmlyZWFybTogZmlyZWFybXMsXG4gICAgICAgICAgY29tYmF0OiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGJhc2U6IHdlYXBvbi5zeXN0ZW0/LnNraWxsPy5pZCxcbiAgICAgICAgdmFsdWU6IHdlYXBvbi5zeXN0ZW0/LnNraWxsPy5pZFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgYFdlYXBvbiBza2lsbCBub3QgZm91bmQgZm9yICR7d2VhcG9uLm5hbWV9LCBjcmVhdGluZyBhIG5ldyBvbmVgLFxuICAgICAgICBuZXdTa2lsbFxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gbmV3U2tpbGxcbiAgfVxuXG4gIC8qKlxuICAgKiBuZWVkc0NvbnZlcnNpb24gZG9lcyBhbiBldmFsdWF0aW9uIHRvIHNlZSBpZiB0aGUgZ2l2ZW4gbnBjIG5lZWRzIHRvIGJlIGNvbnZlcnRlZCB0byA3dGggRWRpdGlvblxuICAgKiBSZXR1cm5zIGBmYWxzZWAgd2hlbiBhbnkgb2YgdGhlIENoYXJhY3RlcmlzdGljcyB2YWx1ZSBpdCdzIGFib3ZlIDI5XG4gICAqL1xuICBuZWVkc0NvbnZlcnNpb24gKG5wYykge1xuICAgIGxldCBuZWVkc0NvbnZlcnNpb25SZXN1bHQgPSB0cnVlXG4gICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgJ3N0cicsXG4gICAgICAnY29uJyxcbiAgICAgICdzaXonLFxuICAgICAgJ2RleCcsXG4gICAgICAnYXBwJyxcbiAgICAgICdpbnQnLFxuICAgICAgJ3BvdycsXG4gICAgICAnZWR1J1xuICAgIF0pIHtcbiAgICAgIGlmICh0eXBlb2YgbnBjW2tleV0gIT09ICd1bmRlZmluZWQnICYmIG5wY1trZXldID4gMzApIHtcbiAgICAgICAgbmVlZHNDb252ZXJzaW9uUmVzdWx0ID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ25lZWRzQ29udmVyc2lvbjonLCBuZWVkc0NvbnZlcnNpb25SZXN1bHQpXG4gICAgfVxuICAgIHJldHVybiBuZWVkc0NvbnZlcnNpb25SZXN1bHRcbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGVBY3RvciBtYWluIG1ldGhvZCB0byBjcmVhdGUgYW4gYEFjdG9yYCBmcm9tIGEgZ2l2ZSB1c2VyIGlucHV0LCB0YWtlcyBvbiBhY2NvdW50IHRoZSBsYW5nLCBlbnRpdHkgdHlwZSxcbiAgICogdGhlIGNvbnZlcnQgdG8gNyBFZGl0aW9uIGZsYWcsIGFuZCB0aGUgcmF3IGVudGl0eSBkYXRhLlxuICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRzIGlucHV0cyBmcm9tIHRoZSBmb3JtIHRvIGNyZWF0ZSBhbiBBY3RvclxuICAgKiBAcmV0dXJucyB7QWN0b3J9IHRoZSBmb3VuZHJ5IGBBY3RvcmAgZnJvbSB0aGUgZ2l2ZW4gYGlucHV0YCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBjcmVhdGVBY3RvciAoaW5wdXRzKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NyZWF0ZUFjdG9yOicsIGlucHV0cylcbiAgICB9XG4gICAgY29uc3QgbGFuZyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UoaW5wdXRzLmxhbmcpXG4gICAgdGhpcy5rZXlzID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0S2V5cyhsYW5nKVxuICAgIHRoaXMucmVnRXggPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRSZWd1bGFyRXhwcmVzc2lvbnMobGFuZylcbiAgICB0aGlzLml0ZW1Mb2NhdGlvbnMgPSBpbnB1dHMuc291cmNlXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1JlZ3VsYXIgRXhwcmVzc2lvbnM6JywgbGFuZywgdGhpcy5rZXlzLCB0aGlzLnJlZ0V4KVxuICAgIH1cbiAgICBsZXQgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5wYXJzZUNoYXJhY3RlcihpbnB1dHMudGV4dClcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygncGFyc2VDaGFyYWN0ZXI6JywgY2hhcmFjdGVyKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAoaW5wdXRzLmNvbnZlcnRGcm9tNkUgPT09ICdjb2MtZ3Vlc3MnICYmXG4gICAgICAgIHRoaXMubmVlZHNDb252ZXJzaW9uKGNoYXJhY3RlcikpIHx8XG4gICAgICBpbnB1dHMuY29udmVydEZyb202RSA9PT0gJ2NvYy1jb252ZXJ0J1xuICAgICkge1xuICAgICAgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5jb252ZXJ0N0UoY2hhcmFjdGVyKVxuICAgIH1cbiAgICBjb25zdCBjaGFyYWN0ZXJEYXRhID0ge1xuICAgICAgbmFtZTogY2hhcmFjdGVyLm5hbWUsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvckRhdGEoY2hhcmFjdGVyKSxcbiAgICAgIGl0ZW1zOiBhd2FpdCB0aGlzLml0ZW1zRGF0YShjaGFyYWN0ZXIpXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBpbnB1dHMudGVzdE1vZGUgIT09ICd1bmRlZmluZWQnICYmIGlucHV0cy50ZXN0TW9kZSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIGNoYXJhY3RlckRhdGFcbiAgICB9XG4gICAgY29uc3QgbnBjID0gYXdhaXQgdGhpcy5jcmVhdGVFbnRpdHkoY2hhcmFjdGVyRGF0YSwgaW5wdXRzLmVudGl0eSlcbiAgICByZXR1cm4gbnBjXG4gIH1cblxuICAvKipcbiAgICogY29udmVydDdFIENvbnZlcnRzIHRoZSBnaXZlbiBlbnRpdHkgZnJvbSA2IGVkaXRpb24gdG8gNyBlZGl0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0aGUgZW50aXR5IG9iamVjdCBhcyBvYnRhaW5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybiB0aGUgc2FtZSBvYmplY3QgYnV0IHdpdGggdXBkYXRlZCBjaGFyYWN0ZXJpc3RpY3MgZm9yIDcgZWRpdGlvblxuICAgKi9cbiAgYXN5bmMgY29udmVydDdFIChjcmVhdHVyZSkge1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdDb252ZXJ0aW5nIG5wYycsIGNyZWF0dXJlKVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdyddKSB7XG4gICAgICBpZiAodHlwZW9mIGNyZWF0dXJlW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNyZWF0dXJlW2tleV0gKj0gNVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNyZWF0dXJlLmVkdSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChjcmVhdHVyZS5lZHUgPD0gMTgpIHtcbiAgICAgICAgY3JlYXR1cmUuZWR1ICo9IDVcbiAgICAgIH0gZWxzZSBpZiAoY3JlYXR1cmUuZWR1IDw9IDI2KSB7XG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IGNyZWF0dXJlLmVkdSArIDkwIC0gMThcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNyZWF0dXJlLmVkdSA+PTI4XG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IDk5XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY3JlYXR1cmUuZGIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoY3JlYXR1cmUuZGIgPT09ICctMWQ0Jykge1xuICAgICAgICBjcmVhdHVyZS5kYiA9IC0xXG4gICAgICB9IGVsc2UgaWYgKGNyZWF0dXJlLmRiID09PSAnLTFkNicpIHtcbiAgICAgICAgY3JlYXR1cmUuZGIgPSAtMlxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnY29udmVydDdFOiAnLCBjcmVhdHVyZSlcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0dXJlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBGaWxlLCBGaWxlUGlja2VyLCBnYW1lLCB1aSAqL1xuZXhwb3J0IGNsYXNzIENvQzdEaXJlY3RvcnlQaWNrZXIgZXh0ZW5kcyBGaWxlUGlja2VyIHtcbiAgZ2V0IHRpdGxlICgpIHtcbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBpY2tEaXJlY3RvcnknKVxuICB9XG5cbiAgX29uU3VibWl0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwYXRoID0gZXZlbnQudGFyZ2V0LnRhcmdldC52YWx1ZVxuICAgIGNvbnN0IGFjdGl2ZVNvdXJjZSA9IHRoaXMuYWN0aXZlU291cmNlXG4gICAgY29uc3QgYnVja2V0ID0gZXZlbnQudGFyZ2V0LmJ1Y2tldCA/IGV2ZW50LnRhcmdldC5idWNrZXQudmFsdWUgOiBudWxsXG4gICAgdGhpcy5maWVsZC52YWx1ZSA9IENvQzdEaXJlY3RvcnlQaWNrZXIuZm9ybWF0KHtcbiAgICAgIGFjdGl2ZVNvdXJjZSxcbiAgICAgIGJ1Y2tldCxcbiAgICAgIHBhdGhcbiAgICB9KVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIERlZmF1bHREaXJlY3RvcnkgKHZhbCkge1xuICAgIHJldHVybiB2YWwgPT09IG51bGwgPyAnJyA6IFN0cmluZyh2YWwpXG4gIH1cblxuICBzdGF0aWMgZm9ybWF0ICh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5idWNrZXQgIT09IG51bGxcbiAgICAgID8gYFske3ZhbHVlLmFjdGl2ZVNvdXJjZX06JHt2YWx1ZS5idWNrZXR9XSAke3ZhbHVlLnBhdGh9YFxuICAgICAgOiBgWyR7dmFsdWUuYWN0aXZlU291cmNlfV0gJHt2YWx1ZS5wYXRofWBcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZSAocmF3KSB7XG4gICAgY29uc3Qgc3RyID0gcmF3ID8/ICcnXG4gICAgY29uc3QgbWF0Y2hlcyA9IHN0ci5tYXRjaCgvXlxcWyhbXjpdKykoOiguKykpP1xcXVxccyooLispPyQvdSlcblxuICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhY3RpdmVTb3VyY2U6IG1hdGNoZXNbMV0sXG4gICAgICAgIGJ1Y2tldDogbWF0Y2hlc1szXSA/PyAnJyxcbiAgICAgICAgY3VycmVudDogbWF0Y2hlc1s0XVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgYWN0aXZlU291cmNlOiAnZGF0YScsXG4gICAgICBidWNrZXQ6IG51bGwsXG4gICAgICBjdXJyZW50OiBzdHJcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcHJvY2Vzc0h0bWwgKGh0bWwpIHtcbiAgICAkKGh0bWwpXG4gICAgICAuZmluZCgnaW5wdXRbZGF0YS1kdHlwZT1cIkRlZmF1bHREaXJlY3RvcnlcIl0nKVxuICAgICAgLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gJChlbClcbiAgICAgICAgaW5wdXQucHJvcCgncmVhZG9ubHknLCB0cnVlKVxuICAgICAgICBpZiAoIWlucHV0Lm5leHQoKS5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBwaWNrZXIgPSBuZXcgQ29DN0RpcmVjdG9yeVBpY2tlcih7XG4gICAgICAgICAgICBmaWVsZDogaW5wdXRbMF0sXG4gICAgICAgICAgICAuLi5Db0M3RGlyZWN0b3J5UGlja2VyLnBhcnNlKGlucHV0LnZhbCgpKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgY29uc3QgcGlja2VyQnV0dG9uID0gJChcbiAgICAgICAgICAgICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImZpbGUtcGlja2VyXCIgdGl0bGU9XCInICtcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBpY2tEaXJlY3RvcnknKSArXG4gICAgICAgICAgICAgICdcIj48aSBjbGFzcz1cImZhcyBmYS1maWxlLWltcG9ydCBmYS1md1wiPjwvaT48L2J1dHRvbj4nXG4gICAgICAgICAgKVxuICAgICAgICAgIENvQzdEaXJlY3RvcnlQaWNrZXIuY3JlYXRlRGVmYXVsdERpcmVjdG9yeSgpXG4gICAgICAgICAgcGlja2VyQnV0dG9uLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHBpY2tlci5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlucHV0LnBhcmVudCgpLmFwcGVuZChwaWNrZXJCdXR0b24pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAkKGh0bWwpLmZpbmQoJ29sLmZpbGVzLWxpc3QnKS5yZW1vdmUoKVxuICAgICQoaHRtbCkuZmluZCgnZm9vdGVyIGRpdicpLnJlbW92ZSgpXG4gICAgJChodG1sKS5maW5kKCdmb290ZXIgYnV0dG9uJykudGV4dChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGlja0RpcmVjdG9yeScpKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZURlZmF1bHREaXJlY3RvcnkgKCkge1xuICAgIGNvbnN0IHBhcnNlZCA9IENvQzdEaXJlY3RvcnlQaWNrZXIucGFyc2UoXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaG9sZVVwbG9hZERpcmVjdG9yeScpXG4gICAgKVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBDb0M3RGlyZWN0b3J5UGlja2VyLmNyZWF0ZURpcmVjdG9yeShcbiAgICAgICAgcGFyc2VkLmFjdGl2ZVNvdXJjZSxcbiAgICAgICAgcGFyc2VkLmN1cnJlbnQsXG4gICAgICAgIHsgYnVja2V0OiBwYXJzZWQuYnVja2V0IH1cbiAgICAgIClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLm1lc3NhZ2Uuc3RhcnRzV2l0aCgnRUVYSVNUJykpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlclVwbG9hZEVycm9yJylcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBsb2FkVG9EZWZhdWx0RGlyZWN0b3J5IChmaWxlLCBmaWxlbmFtZSkge1xuICAgIGNvbnN0IHBhcnNlZCA9IENvQzdEaXJlY3RvcnlQaWNrZXIucGFyc2UoXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaG9sZVVwbG9hZERpcmVjdG9yeScpXG4gICAgKVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgRmlsZVBpY2tlci51cGxvYWQoXG4gICAgICBwYXJzZWQuYWN0aXZlU291cmNlLFxuICAgICAgcGFyc2VkLmN1cnJlbnQsXG4gICAgICBuZXcgRmlsZShbZmlsZV0sIGZpbGVuYW1lLCB7XG4gICAgICAgIHR5cGU6ICdpbWFnZS9wbmcnXG4gICAgICB9KSxcbiAgICAgIHsgYnVja2V0OiBwYXJzZWQuYnVja2V0IH1cbiAgICApXG4gICAgaWYgKCFyZXNwb25zZS5wYXRoKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaWxlVXBsb2FkRXJyb3InKSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkLmN1cnJlbnQgKyAnLycgKyBmaWxlbmFtZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgdWksIGZldGNoICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdEaXJlY3RvcnlQaWNrZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogQ29DN0FjdG9ySW1wb3J0ZXIgaGVscGVyIGNsYXNzIHRvIGltcG9ydCBhbiBBY3RvciBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlciB7XG4gIC8qKlxuICAgKiBDb21wb3NlIHRoZSBCYWNrc3RvcnkgZnJvbSB0aGUgZGlmZmVyZW50IGJsb2Nrcy5cbiAgICogQHBhcmFtIHt9IGJhY2tzdG9yeUpTT04gRGhvbGVIb3VzZSBiYWNrc3RvcnkgSlNPTlxuICAgKiBAcmV0dXJucyBIVE1MIHdpdGggdGhlIGZvcm1hdHRlZCBiYWNrc3RvcnlcbiAgICovXG4gIHN0YXRpYyBnZXRCYWNrc3RvcnkgKGJhY2tzdG9yeUpTT04pIHtcbiAgICBjb25zdCBzZWN0aW9ucyA9IFtcbiAgICAgIFsnZGVzY3JpcHRpb24nLCAnRGVzY3JpcHRpb24nXSxcbiAgICAgIFsndHJhaXRzJywgJ1RyYWl0cyddLFxuICAgICAgWydpZGVvbG9neScsICdJZGVvbG9neSddLFxuICAgICAgWydpbmp1cnVlcycsICdJbmp1cmllcycsICdpbmp1cmllcyddLFxuICAgICAgWydwZW9wbGUnLCAnUGVvcGxlJ10sXG4gICAgICBbJ3Bob2JpYXMnLCAnUGhvYmlhcyddLFxuICAgICAgWydsb2NhdGlvbnMnLCAnTG9jYXRpb25zJ10sXG4gICAgICBbJ3RvbWVzJywgJ1RvbWVzJ10sXG4gICAgICBbJ3Bvc3Nlc3Npb25zJywgJ1Bvc3Nlc3Npb25zJ10sXG4gICAgICBbJ2VuY291bnRlcnMnLCAnRW5jb3VudGVycyddXG4gICAgXVxuICAgIGNvbnN0IGJhY2tzdG9yeSA9IHtcbiAgICAgIGJsb2NrOiBbXSxcbiAgICAgIHNlY3Rpb25zOiBbXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNlY3Rpb24gb2Ygc2VjdGlvbnMpIHtcbiAgICAgIGlmIChiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VjdGlvblsyXSA9PT0gJ3VuZGVmaW5lZCcgfHwgc2VjdGlvblsyXSA9PT0gJycpIHtcbiAgICAgICAgICBzZWN0aW9uWzJdID0gc2VjdGlvblswXVxuICAgICAgICB9XG4gICAgICAgIGJhY2tzdG9yeS5ibG9jay5wdXNoKFxuICAgICAgICAgIGA8aDM+JHtzZWN0aW9uWzFdfTwvaDM+XFxuPGRpdiBjbGFzcz1cIiR7c2VjdGlvblsyXX1cIj5cXG4ke1xuICAgICAgICAgICAgYmFja3N0b3J5SlNPTltzZWN0aW9uWzBdXVxuICAgICAgICAgIH1cXG48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgYmFja3N0b3J5LnNlY3Rpb25zLnB1c2goe1xuICAgICAgICAgIHRpdGxlOiBzZWN0aW9uWzFdLFxuICAgICAgICAgIHZhbHVlOiBiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGJhY2tzdG9yeS5ibG9jayA9XG4gICAgICAnPGgyPkJhY2tzdG9yeTwvaDI+XFxuJyArIGJhY2tzdG9yeS5ibG9jay5qb2luKCdcXG4nLCBiYWNrc3RvcnkuYmxvY2spXG4gICAgcmV0dXJuIGJhY2tzdG9yeVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SlNPTn0gZGhvbGVIb3VzZURhdGEgRGhvbGVIb3VzZUpTT05cbiAgICogQHJldHVybnNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEgKGRob2xlSG91c2VEYXRhLCBvcHRpb25zKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTb3VyY2U6JywgZGhvbGVIb3VzZURhdGEpXG4gICAgfVxuICAgIGRob2xlSG91c2VEYXRhID0gZGhvbGVIb3VzZURhdGEuSW52ZXN0aWdhdG9yXG4gICAgY29uc3QgYmFja3N0b3JpZXMgPSBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZ2V0QmFja3N0b3J5KFxuICAgICAgZGhvbGVIb3VzZURhdGEuQmFja3N0b3J5XG4gICAgKVxuICAgIGNvbnN0IGNEYXRhID0ge1xuICAgICAgbmFtZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLk5hbWUsXG4gICAgICBhY3Rvcjoge1xuICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IHtcbiAgICAgICAgICBzdHI6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TVFIsIDEwKSB9LFxuICAgICAgICAgIGNvbjogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkNPTiwgMTApIH0sXG4gICAgICAgICAgc2l6OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU0laLCAxMCkgfSxcbiAgICAgICAgICBkZXg6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5ERVgsIDEwKSB9LFxuICAgICAgICAgIGFwcDogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkFQUCwgMTApIH0sXG4gICAgICAgICAgaW50OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSU5ULCAxMCkgfSxcbiAgICAgICAgICBwb3c6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5QT1csIDEwKSB9LFxuICAgICAgICAgIGVkdTogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkVEVSwgMTApIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXR0cmliczoge1xuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TYW5pdHksIDEwKSxcbiAgICAgICAgICAgIG1heDogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlNhbml0eU1heCwgMTApLFxuICAgICAgICAgICAgZGFpbHlMaW1pdDogTWF0aC5mbG9vcihkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU2FuaXR5IC8gNSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhwOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkhpdFB0cywgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSGl0UHRzTWF4LCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1wOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLk1hZ2ljUHRzLCAxMCksXG4gICAgICAgICAgICBtYXg6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5NYWdpY1B0c01heCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTHVjaywgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtb3Y6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTW92ZSwgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTW92ZSwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYjogeyB2YWx1ZTogZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkRhbWFnZUJvbnVzIH0sXG4gICAgICAgICAgYnVpbGQ6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5CdWlsZCwgMTApIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5mb3M6IHtcbiAgICAgICAgICBvY2N1cGF0aW9uOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuT2NjdXBhdGlvbixcbiAgICAgICAgICBhZ2U6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5BZ2UsXG4gICAgICAgICAgc2V4OiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuR2VuZGVyLFxuICAgICAgICAgIHJlc2lkZW5jZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLlJlc2lkZW5jZSxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuQmlydGhwbGFjZVxuICAgICAgICB9LFxuICAgICAgICBiYWNrc3Rvcnk6IGJhY2tzdG9yaWVzLmJsb2NrLFxuICAgICAgICBiaW9ncmFwaHk6IGJhY2tzdG9yaWVzLnNlY3Rpb25zLFxuICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgIGtlZXBlcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRob2xlSG91c2VBY3RvckltcG9ydGVyU291cmNlJylcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNraWxsczogYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmV4dHJhY3RTa2lsbHMoXG4gICAgICAgIGRob2xlSG91c2VEYXRhLlNraWxscy5Ta2lsbCA/PyBbXSxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKSxcbiAgICAgIHBvc3Nlc2lvbnM6IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0UG9zc2Vzc2lvbnMoXG4gICAgICAgIGRob2xlSG91c2VEYXRhLlBvc3Nlc3Npb25zPy5pdGVtID8/IFtdLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBjRGF0YVxuICB9XG5cbiAgc3RhdGljIG1ha2VTa2lsbE5hbWUgKG5hbWUsIHNwZWNpYWxpemF0aW9uKSB7XG4gICAgaWYgKHNwZWNpYWxpemF0aW9uID09PSAnTm9uZScpIHtcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gJ0FueSdcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdMYW5ndWFnZSAoT3RoZXIpJyB8fCBuYW1lID09PSAnTGFuZ3VhZ2UgKE93biknKSB7XG4gICAgICBuYW1lID0gJ0xhbmd1YWdlJ1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ09wZXJhdGUgSGVhdnkgTWFjaGluZScpIHtcbiAgICAgIG5hbWUgPSAnT3BlcmF0ZSBIZWF2eSBNYWNoaW5lcnknXG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnVGhyb3cnICYmIHNwZWNpYWxpemF0aW9uID09PSAnJykge1xuICAgICAgbmFtZSA9ICdGaWdodGluZydcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gJ1Rocm93J1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc2tpbGxOYW1lOiBzcGVjaWFsaXphdGlvbiA9PT0gJycgPyBuYW1lIDogc3BlY2lhbGl6YXRpb24sXG4gICAgICBzcGVjaWFsaXphdGlvbjogc3BlY2lhbGl6YXRpb24gPT09ICcnID8gJycgOiBuYW1lLFxuICAgICAgbmFtZTogbmFtZSArIChzcGVjaWFsaXphdGlvbiA9PT0gJycgPyAnJyA6ICcgKCcgKyBzcGVjaWFsaXphdGlvbiArICcpJylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZXh0cmFjdFNraWxscyAoZGhvbGVIb3VzZXNraWxscywgb3B0aW9ucykge1xuICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiBkaG9sZUhvdXNlc2tpbGxzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHNraWxsLnN1YnNraWxsID09PSAnTm9uZScgJiZcbiAgICAgICAgc2tpbGwudmFsdWUgPT09ICcxJyAmJlxuICAgICAgICBza2lsbC5oYWxmID09PSAnMCcgJiZcbiAgICAgICAgc2tpbGwuZmlmdGggPT09ICcwJ1xuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0cyA9IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5tYWtlU2tpbGxOYW1lKFxuICAgICAgICBza2lsbC5uYW1lLFxuICAgICAgICBza2lsbC5zdWJza2lsbCA/PyAnJ1xuICAgICAgKVxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBwYXJ0cy5uYW1lLCB7XG4gICAgICAgIHNvdXJjZTogb3B0aW9ucy5zb3VyY2UsXG4gICAgICAgIGZhbGxiYWNrQW55OiB0cnVlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nLnRvT2JqZWN0KCkpXG4gICAgICAgIGNsb25lZC5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsb25lZCA9IENvQ0FjdG9yLmVtcHR5U2tpbGwoXG4gICAgICAgICAgcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICAgIHBhcnNlSW50KHNraWxsLnZhbHVlID8/IDAsIDEwKSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjpcbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb24gPT09ICcnID8gZmFsc2UgOiBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPSBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPz8ge31cbiAgICAgICAgaWYgKHBhcnRzLnNwZWNpYWxpemF0aW9uID09PSAnRmlnaHRpbmcnKSB7XG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPSB0cnVlXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKHBhcnRzLnNwZWNpYWxpemF0aW9uID09PSAnRmlyZWFybXMnKSB7XG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gPSB0cnVlXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9IHRydWVcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucHVzaCA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAocGFydHMuc2tpbGxOYW1lID09PSAnRG9kZ2UnKSB7XG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY2xvbmVkLnN5c3RlbS5za2lsbE5hbWUgPT09ICdBbnknKSB7XG4gICAgICAgIGNsb25lZC5uYW1lID0gY2xvbmVkLm5hbWUucmVwbGFjZSgnIChBbnkpJywgJyAoTm9uZSknKVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsTmFtZSA9ICdOb25lJ1xuICAgICAgfVxuICAgICAgY2xvbmVkLnN5c3RlbS5iYXNlID0gcGFyc2VJbnQoc2tpbGwudmFsdWUgPz8gMCwgMTApXG4gICAgICBjbG9uZWQuc3lzdGVtLnZhbHVlID0gcGFyc2VJbnQoc2tpbGwudmFsdWUgPz8gMCwgMTApXG4gICAgICBjbG9uZWQuc3lzdGVtLmZsYWdzID0gY2xvbmVkLnN5c3RlbS5mbGFncyA/PyB7fVxuICAgICAgY2xvbmVkLnN5c3RlbS5mbGFncy5vY2N1cGF0aW9uID1cbiAgICAgICAgc2tpbGwub2NjdXBhdGlvbiA9PT0gdHJ1ZSB8fCBza2lsbC5vY2N1cGF0aW9uID09PSAndHJ1ZSdcbiAgICAgIHNraWxscy5wdXNoKGNsb25lZClcbiAgICB9XG4gICAgcmV0dXJuIHNraWxsc1xuICB9XG5cbiAgc3RhdGljIGZpbmRXZWFwb25Ta2lsbElkIChza2lsbE5hbWUsIGNoYXJhY3Rlcikge1xuICAgIGNvbnN0IHNraWxscyA9IGNoYXJhY3Rlci5nZXRFbWJlZGRlZENvbGxlY3Rpb24oJ0l0ZW0nKVxuICAgIGNvbnN0IGNoZWNrTmFtZSA9IHNraWxsTmFtZS5yZXBsYWNlKC9eXFwoKC4rKVxcKSQvLCAnJDEnKVxuICAgIGNvbnN0IGNoYXJhY3RlclNraWxsID0gc2tpbGxzLmZpbmQoaSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBpLnN5c3RlbT8uc2tpbGxOYW1lID09PSBjaGVja05hbWUgfHxcbiAgICAgICAgaS5zeXN0ZW0/LnNraWxsTmFtZT8uaW5kZXhPZihjaGVja05hbWUpID4gLTFcbiAgICAgIClcbiAgICB9KVxuICAgIHJldHVybiBjaGFyYWN0ZXJTa2lsbFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGV4dHJhY3RQb3NzZXNzaW9ucyAoZGhvbGVob3VzZVBvc3Nlc3Npb25zLCBvcHRpb25zKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIGlmICghQXJyYXkuaXNBcnJheShkaG9sZWhvdXNlUG9zc2Vzc2lvbnMpICYmIGRob2xlaG91c2VQb3NzZXNzaW9ucyAhPSBudWxsKSB7XG4gICAgICBkaG9sZWhvdXNlUG9zc2Vzc2lvbnMgPSBbZGhvbGVob3VzZVBvc3Nlc3Npb25zXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGhvbGVob3VzZVBvc3Nlc3Npb25zKSB7XG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdpdGVtJywgaXRlbS5kZXNjcmlwdGlvbiwge1xuICAgICAgICBzb3VyY2U6IG9wdGlvbnMuc291cmNlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nLnRvT2JqZWN0KCkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9uZWQgPSB7XG4gICAgICAgICAgbmFtZTogaXRlbS5kZXNjcmlwdGlvbixcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaXRlbXMucHVzaChjbG9uZWQpXG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGV4dHJhY3RXZWFwb25zIChkaG9sZWhvdXNlV2VhcG9ucywgY2hhcmFjdGVyLCBvcHRpb25zKSB7XG4gICAgY29uc3Qgd2VhcG9ucyA9IFtdXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KGRob2xlaG91c2VXZWFwb25zKSkge1xuICAgICAgZGhvbGVob3VzZVdlYXBvbnMgPSBbZGhvbGVob3VzZVdlYXBvbnNdXG4gICAgfVxuICAgIGZvciAoY29uc3Qgd2VhcG9uIG9mIGRob2xlaG91c2VXZWFwb25zKSB7XG4gICAgICBjb25zdCBza2lsbCA9IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5maW5kV2VhcG9uU2tpbGxJZChcbiAgICAgICAgd2VhcG9uLnNraWxsbmFtZSxcbiAgICAgICAgY2hhcmFjdGVyXG4gICAgICApXG4gICAgICBjb25zdCBkYW1hZ2UgPSB3ZWFwb24uZGFtYWdlLnJlcGxhY2UoL1xcK0RCL2ksICcnKVxuICAgICAgY29uc3QgYWRkYiA9IGRhbWFnZSAhPT0gd2VhcG9uLmRhbWFnZVxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnd2VhcG9uJywgd2VhcG9uLm5hbWUsIHtcbiAgICAgICAgc291cmNlOiBvcHRpb25zLnNvdXJjZVxuICAgICAgfSlcbiAgICAgIGxldCBjbG9uZWQgPSBudWxsXG4gICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjbG9uZWQgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsLm1haW4ubmFtZSA9IHNraWxsPy5uYW1lID8/ICcnXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHNraWxsPy5pZCA/PyAnJ1xuICAgICAgICBjbG9uZWQuc3lzdGVtLnJhbmdlID0gY2xvbmVkLnN5c3RlbS5yYW5nZSA/PyB7fVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnJhbmdlLm5vcm1hbCA9IGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsID8/IHt9XG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSA9IGRhbWFnZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLmFtbW8gPSB3ZWFwb24uYW1tb1xuICAgICAgICBjbG9uZWQuc3lzdGVtLm1hbGZ1bmN0aW9uID0gd2VhcG9uLm1hbGZcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID0gY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID8/IHt9XG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSA9XG4gICAgICAgICAgc2tpbGw/LnN5c3RlbS5wcm9wZXJ0aWVzPy5maWdodGluZyA/PyBmYWxzZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucm5nZCA9XG4gICAgICAgICAgc2tpbGw/LnN5c3RlbS5wcm9wZXJ0aWVzPy5maXJlYXJtID8/IGZhbHNlXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5hZGRiID0gYWRkYlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xvbmVkID0ge1xuICAgICAgICAgIG5hbWU6IHdlYXBvbi5uYW1lLFxuICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgIHN5c3RlbToge1xuICAgICAgICAgICAgc2tpbGw6IHtcbiAgICAgICAgICAgICAgbWFpbjoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNraWxsPy5uYW1lID8/ICcnLFxuICAgICAgICAgICAgICAgIGlkOiBza2lsbD8uaWQgPz8gJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICAgIG5vcm1hbDoge1xuICAgICAgICAgICAgICAgIGRhbWFnZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYW1tbzogd2VhcG9uLmFtbW8sXG4gICAgICAgICAgICBtYWxmdW5jdGlvbjogd2VhcG9uLm1hbGYsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIG1lbGVlOiBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpZ2h0aW5nID8/IGZhbHNlLFxuICAgICAgICAgICAgICBybmdkOiBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpcmVhcm0gPz8gZmFsc2UsXG4gICAgICAgICAgICAgIGFkZGJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdlYXBvbnMucHVzaChjbG9uZWQpXG4gICAgfVxuICAgIHJldHVybiB3ZWFwb25zXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2F2ZVBvcnRyYWl0IChiYXNlNjRQb3J0cmFpdCwgZmlsZU5hbWUpIHtcbiAgICBjb25zdCBiYXNlNjRSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgYmFzZTY0UG9ydHJhaXRcbiAgICApXG4gICAgY29uc3QgaW1hZ2VCbG9iID0gYXdhaXQgYmFzZTY0UmVzcG9uc2UuYmxvYigpXG4gICAgY29uc3QgZmlsZVBhdGggPSBDb0M3RGlyZWN0b3J5UGlja2VyLnVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeShcbiAgICAgIGltYWdlQmxvYixcbiAgICAgIGZpbGVOYW1lXG4gICAgKVxuICAgIHJldHVybiBmaWxlUGF0aFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlIChkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSwgb3B0aW9ucykge1xuICAgIGlmICghZ2FtZS51c2VyPy5jYW4oJ0ZJTEVTX1VQTE9BRCcpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlclVwbG9hZEVycm9yJylcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBjaGFyYWN0ZXJEYXRhID1cbiAgICAgIGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5jb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEoXG4gICAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDaGFyYWN0ZXIgRGF0YTonLCBjaGFyYWN0ZXJEYXRhKVxuICAgIH1cbiAgICBjb25zdCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPVxuICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5jcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMoKVxuICAgIGlmICghQ29DN0RpcmVjdG9yeVBpY2tlci5jcmVhdGVEZWZhdWx0RGlyZWN0b3J5KCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBhY3RvckRhdGEgPSB7XG4gICAgICBuYW1lOiBjaGFyYWN0ZXJEYXRhLm5hbWUsXG4gICAgICB0eXBlOiAnY2hhcmFjdGVyJyxcbiAgICAgIGZvbGRlcjogaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyLmlkLFxuICAgICAgZGF0YTogY2hhcmFjdGVyRGF0YS5hY3RvclxuICAgIH1cbiAgICBjb25zdCBucGMgPSBhd2FpdCBBY3Rvci5jcmVhdGUoYWN0b3JEYXRhKVxuICAgIC8vIElmIHBvc3NpYmxlIHVwbG9hZCB0aGUgaW1hZ2UgcG9ydHJhaXRcbiAgICBpZiAoXG4gICAgICBkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YS5JbnZlc3RpZ2F0b3IuUGVyc29uYWxEZXRhaWxzLlBvcnRyYWl0Py5sZW5ndGggPiAxMFxuICAgICkge1xuICAgICAgY29uc3QgZmlsZU5hbWUgPSAnYXZhdGFyLScgKyBucGMuaWQgKyAnLnBuZydcbiAgICAgIGNvbnN0IHBvcnRyYWl0ID0gYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLnNhdmVQb3J0cmFpdChcbiAgICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEuSW52ZXN0aWdhdG9yLlBlcnNvbmFsRGV0YWlscy5Qb3J0cmFpdCxcbiAgICAgICAgZmlsZU5hbWVcbiAgICAgIClcbiAgICAgIGlmIChwb3J0cmFpdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgbnBjLnVwZGF0ZSh7XG4gICAgICAgICAgaW1nOiBwb3J0cmFpdFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5sb2coJ0l0ZW1zOiAnLCBjaGFyYWN0ZXJEYXRhLml0ZW1zKVxuICAgIH1cbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBjaGFyYWN0ZXJEYXRhLnNraWxscywge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBjaGFyYWN0ZXJEYXRhLnBvc3Nlc2lvbnMsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gICAgY29uc3Qgd2VhcG9ucyA9IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0V2VhcG9ucyhcbiAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLkludmVzdGlnYXRvci5XZWFwb25zPy53ZWFwb24gPz8gW10sXG4gICAgICBucGMsXG4gICAgICBvcHRpb25zXG4gICAgKVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmxvZygnV2VhcG9uczogJywgd2VhcG9ucylcbiAgICB9XG4gICAgYXdhaXQgbnBjLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgd2VhcG9ucywge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcblxuICAgIHJldHVybiBucGNcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBnYW1lLCBIb29rcywgdWksIEZpbGVSZWFkZXIgKi9cblxuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXIgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyIH0gZnJvbSAnLi9kaG9sZWhvdXNlX2ltcG9ydGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLXJlZ2V4cC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnYWN0b3ItaW1wb3J0ZXInXSxcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlcicpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvYWN0b3ItaW1wb3J0ZXIuaHRtbCcsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHdpZHRoOiA2MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgIH0pXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEuaW1wb3J0VHlwZSA9IGRhdGEub2JqZWN0LmltcG9ydFR5cGVcbiAgICBkYXRhLmNvbnZlcnQ2RSA9IGRhdGEub2JqZWN0LmNvbnZlcnQ2RVxuICAgIGRhdGEuc291cmNlID0gZGF0YS5vYmplY3Quc291cmNlXG4gICAgZGF0YS5jaGFyYWN0ZXJEYXRhID0gZGF0YS5vYmplY3QuY2hhcmFjdGVyRGF0YVxuICAgIGRhdGEuY2FuVXBsb2FkID0gZ2FtZS51c2VyPy5jYW4oJ0ZJTEVTX1VQTE9BRCcpXG4gICAgaWYgKFsnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXMoZGF0YS5pbXBvcnRUeXBlKSkge1xuICAgICAgZGF0YS5sYW5ndWFnZXMgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRUcmFuc2xhdGlvbnMoKVxuICAgICAgZGF0YS5sYW5ndWFnZSA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UoXG4gICAgICAgIGRhdGEub2JqZWN0Lmxhbmd1YWdlXG4gICAgICApXG4gICAgICBkYXRhLnBsYWNlaG9sZGVyID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0RXhhbXBsZVRleHQoZGF0YS5sYW5ndWFnZSlcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCcjZGhvbGVob3VzZS1jaGFyYWN0ZXItcHJldmlldycpLmhpZGUoKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcjY29jLWVudGl0eS10eXBlLCNjb2MtZW50aXR5LWxhbmcnKVxuICAgICAgLmNoYW5nZSh0aGlzLl9vbkNoYW5nZVN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcjZGhvbGVob3VzZS1qc29uLWZpbGUtcGlja2VyJylcbiAgICAgIC5jaGFuZ2UodGhpcy5fb25KU09ORmlsZVNlbGVjdGVkLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnI2NvYy1wYXN0ZWQtY2hhcmFjdGVyLWRhdGEnKVxuICAgICAgLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlcnNUb29FeHRlbmRlZCA9ICQodGhpcylcbiAgICAgICAgICAudmFsKClcbiAgICAgICAgICAubWF0Y2goL1tcXHVkYmMwLVxcdWRiZmVdW1xcdWRjMDAtXFx1ZGZmZl0vKVxuICAgICAgICBjb25zdCBwcm9tcHQgPSAkKCcjY29jLXByb21wdCcpXG4gICAgICAgIGlmIChwcm9tcHQuZGF0YSgnZXh0ZW5kZWQnKSAmJiBjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQpIHtcbiAgICAgICAgICBwcm9tcHRcbiAgICAgICAgICAgIC5odG1sKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UZXh0RmllbGRJbnZhbGlkQ2hhcmFjdGVycycpKVxuICAgICAgICAgICAgLmFkZENsYXNzKCdlcnJvcicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvbXB0Lmh0bWwocHJvbXB0LmRhdGEoJ3RleHQnKSkucmVtb3ZlQ2xhc3MoJ2Vycm9yJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50cmlnZ2VyKCdrZXl1cCcpXG5cbiAgICBodG1sLmZpbmQoJy5zdWJtaXQtYnV0dG9uJykuY2xpY2sodGhpcy5fb25DbGlja1N1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnZm9ybScpLnN1Ym1pdChlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHJldHVybnMgZ2V0SW5wdXRzIGV4dHJhY3RzIHRoZSBkYXRhIGZyb20gdGhlIGlucHV0IGZpZWxkcyBhbmRcbiAgICogYWRkcyBhIGAuYCBhdCB0aGUgZW5kIGlmIGl0J3Mgbm90IGFscmVhZHkgdGhlcmUuXG4gICAqL1xuICBzdGF0aWMgZ2V0SW5wdXRzIChmb3JtKSB7XG4gICAgY29uc3QgaW5wdXRzID0ge31cbiAgICBpbnB1dHMuZW50aXR5ID0gZm9ybS5maW5kKCcjY29jLWVudGl0eS10eXBlJykudmFsKCkudHJpbSgpXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2VudGl0eSB0eXBlOicsIGlucHV0cy5lbnRpdHkpXG4gICAgfVxuICAgIGlmIChmb3JtLmZpbmQoJyNjb2MtY29udmVydC02RScpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlucHV0cy5jb252ZXJ0RnJvbTZFID0gZm9ybS5maW5kKCcjY29jLWNvbnZlcnQtNkUnKS52YWwoKS50cmltKClcbiAgICB9XG4gICAgaWYgKGZvcm0uZmluZCgnI2NvYy1lbnRpdHktbGFuZycpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlucHV0cy5sYW5nID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuY2hlY2tMYW5ndWFnZShcbiAgICAgICAgZm9ybS5maW5kKCcjY29jLWVudGl0eS1sYW5nJykudmFsKCkudHJpbSgpXG4gICAgICApXG4gICAgfVxuICAgIGlmIChmb3JtLmZpbmQoJyNzb3VyY2UnKS5sZW5ndGggPiAwKSB7XG4gICAgICBpbnB1dHMuc291cmNlID0gZm9ybS5maW5kKCcjc291cmNlJykudmFsKCkudHJpbSgpXG4gICAgfVxuICAgIGlmIChmb3JtLmZpbmQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJykubGVuZ3RoID4gMCkge1xuICAgICAgaW5wdXRzLnRleHQgPSBmb3JtLmZpbmQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJykudmFsKCkudHJpbSgpXG4gICAgfVxuXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3JlY2VpdmVkIHRleHQnLCAnIyMnICsgaW5wdXRzLnRleHQgKyAnIyMnKVxuICAgIH1cbiAgICByZXR1cm4gaW5wdXRzXG4gIH1cblxuICBfb25KU09ORmlsZVNlbGVjdGVkIChldmVudCkge1xuICAgIGNvbnN0IGpzb25GaWxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGhvbGVob3VzZS1qc29uLWZpbGUtcGlja2VyJylcbiAgICBjb25zdCBwb3J0cmFpdEltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAnZGhvbGVob3VzZS1jaGFyYWN0ZXItcG9ydHJhaXQnXG4gICAgKVxuICAgIGNvbnN0IGNoYXJhY3Rlck5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGhvbGVob3VzZS1jaGFyYWN0ZXItbmFtZScpXG4gICAgY29uc3QgcHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaG9sZWhvdXNlLWNoYXJhY3Rlci1wcmV2aWV3JylcbiAgICBjb25zdCBmaWxlID0ganNvbkZpbGVJbnB1dC5maWxlc1swXVxuICAgIGNvbnN0IGRpYWxvZyA9IHRoaXNcbiAgICBjb25zdCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRpYWxvZy5jaGFyYWN0ZXJKU09OID0gSlNPTi5wYXJzZShmaWxlUmVhZGVyLnJlc3VsdClcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgJCgnI2NvYy1wcm9tcHQnKVxuICAgICAgICAgIC5odG1sKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UZXh0RmllbGRJbnZhbGlkSlNPTicpKVxuICAgICAgICAgIC5hZGRDbGFzcygnZXJyb3InKVxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3QgcGVyc29uYWxEZXRhaWxzID1cbiAgICAgICAgZGlhbG9nLmNoYXJhY3RlckpTT04/LkludmVzdGlnYXRvcj8uUGVyc29uYWxEZXRhaWxzXG4gICAgICBpZiAoIXBlcnNvbmFsRGV0YWlscykge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EaG9sZUhvdXNlSW52YWxpZEFjdG9yJylcbiAgICAgICAgKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNoYXJhY3Rlck5hbWUudGV4dENvbnRlbnQgPSBwZXJzb25hbERldGFpbHMuTmFtZVxuICAgICAgcG9ydHJhaXRJbWFnZS5zcmMgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyBwZXJzb25hbERldGFpbHMuUG9ydHJhaXRcbiAgICAgIHByZXZpZXcuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICAgICQoJy5kaWFsb2cuYWN0b3ItaW1wb3J0ZXInKS5oZWlnaHQoJ2F1dG8nKVxuICAgIH1cbiAgICBmaWxlUmVhZGVyLnJlYWRBc1RleHQoZmlsZSlcbiAgfVxuXG4gIF9vbkNoYW5nZVN1Ym1pdCAoZXZlbnQpIHtcbiAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrU3VibWl0IChldmVudCkge1xuICAgIGNvbnN0IGlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmJ1dHRvblxuICAgIGlmIChpZCA9PT0gJ25vJykge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfSBlbHNlIGlmIChpZCA9PT0gJ2dldEV4YW1wbGVOb3cnKSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0RXhhbXBsZVRleHQoXG4gICAgICAgIHRoaXMub2JqZWN0Lmxhbmd1YWdlXG4gICAgICApXG4gICAgICBDb0M3VXRpbGl0aWVzLmNvcHlUb0NsaXBib2FyZChjb250ZW50KS50aGVuKCgpID0+IHtcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29waWVkJykpXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoaWQgPT09ICdpbXBvcnQnKSB7XG4gICAgICBjb25zdCBhcHAgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJ2Rpdi5kaWFsb2cuYWN0b3ItaW1wb3J0ZXInKVxuICAgICAgYXBwLmhpZGUoKVxuICAgICAgY29uc3QgZm9ybSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnZm9ybScpXG4gICAgICBjb25zdCBpbnB1dHMgPSBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5nZXRJbnB1dHMoZm9ybSlcbiAgICAgIGlmIChpbnB1dHMuZW50aXR5ID09PSAnZGhvbGVob3VzZScgJiYgdGhpcy5jaGFyYWN0ZXJKU09OKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlciA9XG4gICAgICAgICAgYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlKFxuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJKU09OLFxuICAgICAgICAgICAgeyBzb3VyY2U6IGlucHV0cy5zb3VyY2UgfVxuICAgICAgICAgIClcbiAgICAgICAgaWYgKGNoYXJhY3RlciAhPT0gZmFsc2UpIHtcbiAgICAgICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnY2hhcmFjdGVyOicsIGNoYXJhY3RlcilcbiAgICAgICAgICB9XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BY3RvckltcG9ydGVkJywge1xuICAgICAgICAgICAgICBhY3RvclR5cGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5DaGFyYWN0ZXInKSxcbiAgICAgICAgICAgICAgYWN0b3JOYW1lOiBjaGFyYWN0ZXIubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgYXdhaXQgY2hhcmFjdGVyLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFwcC5zaG93KClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpbnB1dHMudGV4dCAmJiBpbnB1dHMudGV4dCAhPT0gJycpIHtcbiAgICAgICAgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuaW1wb3J0QWN0b3IoaW5wdXRzKVxuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwcC5zaG93KClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlXG4gICAqIEEgc3ViY2xhc3Mgb2YgdGhlIEZvcm1BcHBsaWNhdGlvbiBtdXN0IGltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QuXG4gICAqL1xuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICB0aGlzLm9iamVjdC5pbXBvcnRUeXBlID0gZm9ybURhdGFbJ2NvYy1lbnRpdHktdHlwZSddXG4gICAgdGhpcy5vYmplY3QuY2hhcmFjdGVyRGF0YSA9IGZvcm1EYXRhWydjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJ10/LnRyaW0oKVxuICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1jb252ZXJ0LTZFJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5jb252ZXJ0NkUgPSBmb3JtRGF0YVsnY29jLWNvbnZlcnQtNkUnXVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2MtZW50aXR5LWxhbmcnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmxhbmd1YWdlID0gZm9ybURhdGFbJ2NvYy1lbnRpdHktbGFuZyddXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZm9ybURhdGEuc291cmNlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc291cmNlID0gZm9ybURhdGEuc291cmNlXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICAvKipcbiAgICogaW1wb3J0QWN0b3IgaW1wb3J0cyBhbiBBY3RvciB1c2luZyB0aGUgZGlhbG9nIGRhdGFcbiAgICogQHBhcmFtIHtodG1sfSBodG1sXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaW1wb3J0QWN0b3IgKGlucHV0cykge1xuICAgIGlmIChpbnB1dHMudGV4dFtpbnB1dHMudGV4dC5sZW5ndGhdICE9PSAnLicpIHtcbiAgICAgIGlucHV0cy50ZXh0ICs9ICcuJyAvLyBBZGQgYSBkb3QgYSB0aGUgZW5kIHRvIGhlbHAgdGhlIHJlZ2V4IGZpbmQgdGhlIGVuZFxuICAgIH1cbiAgICBjb25zdCBhY3RvciA9IG5ldyBDb0M3QWN0b3JJbXBvcnRlcigpXG4gICAgY29uc3QgY3JlYXRlZEFjdG9yID0gYXdhaXQgYWN0b3IuY3JlYXRlQWN0b3IoaW5wdXRzKVxuICAgIC8vIEFjdG9yIGNyZWF0ZWQsIE5vdGlmeSB0aGUgdXNlciBhbmQgc2hvdyB0aGUgc2hlZXQuXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NyZWF0ZWRBY3RvcjonLCBjcmVhdGVkQWN0b3IpXG4gICAgfVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQWN0b3JJbXBvcnRlZCcsIHtcbiAgICAgICAgYWN0b3JUeXBlOiBjcmVhdGVkQWN0b3IudHlwZT8udG9VcHBlckNhc2UoKSxcbiAgICAgICAgYWN0b3JOYW1lOiBjcmVhdGVkQWN0b3IubmFtZVxuICAgICAgfSlcbiAgICApXG4gICAgYXdhaXQgY3JlYXRlZEFjdG9yLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIC8vIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCBVcGRhdGVyLnVwZGF0ZUFjdG9yKG5wYylcbiAgICAvLyBjb25zb2xlLmRlYnVnKCd1cGRhdGVkOicsIHVwZGF0ZWQpXG4gIH1cblxuICAvLyAvKipcbiAgLy8gICogY3JlYXRlIGl0J3MgdGhlIGRlZmF1bHQgd2ViIHRvIGNyYXRlIHRoZSBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZ1xuICAvLyAgKi9cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAob3B0aW9ucyA9IHt9KSB7XG4gICAgb3B0aW9ucy5pbXBvcnRUeXBlID0gb3B0aW9ucy5pbXBvcnRUeXBlID8/ICducGMnXG4gICAgb3B0aW9ucy5sYW5ndWFnZSA9XG4gICAgICBvcHRpb25zLmxhbmd1YWdlID8/IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UobnVsbClcbiAgICBvcHRpb25zLmNvbnZlcnQ2RSA9IG9wdGlvbnMubGFuZ3VhZ2UgPz8gJ2NvYy1ndWVzcydcbiAgICBvcHRpb25zLnNvdXJjZSA9IG9wdGlvbnMuc291cmNlID8/ICdpd21zJ1xuICAgIG9wdGlvbnMuY2hhcmFjdGVyRGF0YSA9IG9wdGlvbnMuY2hhcmFjdGVyRGF0YSA/PyAnJ1xuXG4gICAgbmV3IENvQzdBY3RvckltcG9ydGVyRGlhbG9nKG9wdGlvbnMpLnJlbmRlcih0cnVlKVxuICB9XG59XG5cbkhvb2tzLm9uY2UoJ3JlYWR5JywgKCkgPT4ge1xuICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnQ29DNy1JbXBvcnRlci1UZXN0cycpPy5hY3RpdmUpIHtcbiAgICB3aW5kb3cuQ29DN0FjdG9ySW1wb3J0ZXIgPSBDb0M3QWN0b3JJbXBvcnRlclxuICB9XG59KVxuIiwiLyogZ2xvYmFsIERpYWxvZywgZm91bmRyeSwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIERyb3BDb0NJRCBleHRlbmRzIERpYWxvZyB7XG4gIHN0YXRpYyBwcm9jZXNzRm9ybSAocmVzcG9uc2UsIGVsZW1lbnQsIHJlc29sdmUpIHtcbiAgICBpZiAoZWxlbWVudC5maW5kKCdpbnB1dCcpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdkcm9wQ29DSUQnLCAocmVzcG9uc2UgPyAnWScgOiAnTicpKVxuICAgIH1cbiAgICByZXNvbHZlKHJlc3BvbnNlKVxuICB9XG5cbiAgc3RhdGljIHByb2Nlc3NJdGVtIChyZXNwb25zZSwgaXRlbSkge1xuICAgIGlmIChyZXNwb25zZSAmJiBpdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkKSB7XG4gICAgICByZXR1cm4gaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgIH1cbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoaXRlbSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKCkge1xuICAgIGNvbnN0IGRyb3BDb0NJRCA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Ryb3BDb0NJRCcpXG4gICAgc3dpdGNoIChkcm9wQ29DSUQpIHtcbiAgICAgIGNhc2UgJyc6XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICBjb25zdCBkbGcgPSBuZXcgRHJvcENvQ0lEKHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5OYW1lJyksXG4gICAgICAgICAgICBjb250ZW50OiAnPHA+JyArIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELkRpYWxvZycpICsgJzwvcD48cD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCJyZW1lbWJlcnRoaXNcIiBzdHlsZT1cInZlcnRpY2FsLWFsaWduOiBzdWI7XCI+PGxhYmVsIGZvcj1cInJlbWVtYmVydGhpc1wiPicgKyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5SZW1lbWJlcicpICsgJzwvbGFiZWw+PC9wPicsXG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnYXBwJywgJ2RpYWxvZyddLFxuICAgICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgICB5ZXM6IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdZZXMnKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKGVsZW1lbnQpID0+IHsgRHJvcENvQ0lELnByb2Nlc3NGb3JtKHRydWUsIGVsZW1lbnQsIHJlc29sdmUpIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbm86IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdObycpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoZWxlbWVudCkgPT4geyBEcm9wQ29DSUQucHJvY2Vzc0Zvcm0oZmFsc2UsIGVsZW1lbnQsIHJlc29sdmUpIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgICAgICB9KVxuICAgICAgY2FzZSAnWSc6XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgICBjYXNlICdOJzpcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRHJhZ0Ryb3AsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgRHJvcENvQ0lEIH0gZnJvbSAnLi4vLi4vYXBwcy9kcm9wLWNvYy1pZC5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN09jY3VwYXRpb25TaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ3NraWxscycpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1kZWxldGUnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ3NraWxscycpKVxuXG4gICAgaHRtbC5maW5kKCcuZ3JvdXAtaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vbkdyb3VwSXRlbURlbGV0ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmdyb3VwLWNvbnRyb2wnKS5jbGljayh0aGlzLl9vbkdyb3VwQ29udHJvbC5iaW5kKHRoaXMpKVxuXG4gICAgY29uc3QgZHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLmRyb3BwYWJsZScsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wLmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgZHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc2tpbGwnLCBjb2xsZWN0aW9uTmFtZSA9ICdza2lsbHMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBvcHRpb25hbFNraWxsID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/LmNsYXNzTGlzdD8uY29udGFpbnMoJ29wdGlvbmFsLXNraWxscycpXG4gICAgY29uc3Qgb2wgPSBldmVudD8uY3VycmVudFRhcmdldD8uY2xvc2VzdCgnb2wnKVxuICAgIGNvbnN0IGluZGV4ID0gb2w/LmRhdGFzZXQ/Lmdyb3VwXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGxldCB1c2VDb0NJRCA9IDBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5ncm91cHMpIDogW11cblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcbiAgICAgIGlmICghW3R5cGVdLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbmFsU2tpbGwpIHtcbiAgICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgICAvLyBHZW5lcmljIHNwZWNpYWxpemF0aW9uIGNhbiBiZSBpbmNsdWRlZCBtYW55IHRpbWVzXG4gICAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZSAvLyBJZiBza2lsbCBpcyBhbHJlYWR5IGluIG1haW4gZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChncm91cHNbaW5kZXhdLnNraWxscy5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlIC8vIElmIHNraWxsIGlzIGFscmVhZHkgaW4gZ3JvdXAgZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzZUNvQ0lEID09PSAwKSB7XG4gICAgICAgICAgdXNlQ29DSUQgPSBhd2FpdCBEcm9wQ29DSUQuY3JlYXRlKClcbiAgICAgICAgfVxuICAgICAgICBncm91cHNbaW5kZXhdLnNraWxscyA9IGdyb3Vwc1tpbmRleF0uc2tpbGxzLmNvbmNhdChbRHJvcENvQ0lELnByb2Nlc3NJdGVtKHVzZUNvQ0lELCBpdGVtKV0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICAgIC8vIEdlbmVyaWMgc3BlY2lhbGl6YXRpb24gY2FuIGJlIGluY2x1ZGVkIG1hbnkgdGltZXNcbiAgICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBzYW1lIHNraWxsIGlzIGluIG9uZSBvZiB0aGUgZ3JvdXAgcmVtb3ZlIGl0IGZyb20gdGhlIGdyb3Vwc1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBncm91cHNbaV0uc2tpbGxzLmZpbmRJbmRleChcbiAgICAgICAgICAgICAgZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgIGdyb3Vwc1tpXS5za2lsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlQ29DSUQgPT09IDApIHtcbiAgICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgICB9XG4gICAgICAgIGNvbGxlY3Rpb24ucHVzaChEcm9wQ29DSUQucHJvY2Vzc0l0ZW0odXNlQ29DSUQsIGl0ZW0pKVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgYXN5bmMgX29uR3JvdXBDb250cm9sIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuXG4gICAgLy8gQWRkIG5ldyBkYW1hZ2UgY29tcG9uZW50XG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGQtZ3JvdXAnKSkge1xuICAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpIC8vIFN1Ym1pdCBhbnkgdW5zYXZlZCBjaGFuZ2VzXG4gICAgICBjb25zdCBncm91cHMgPSB0aGlzLml0ZW0uc3lzdGVtLmdyb3Vwc1xuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uZ3JvdXBzJzogZ3JvdXBzLmNvbmNhdChbeyBvcHRpb25zOiAwLCBza2lsbHM6IFtdIH1dKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ3JlbW92ZS1ncm91cCcpKSB7XG4gICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCkgLy8gU3VibWl0IGFueSB1bnNhdmVkIGNoYW5nZXNcbiAgICAgIGNvbnN0IGdyb3VwcyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzKVxuICAgICAgY29uc3Qgb2wgPSBhLmNsb3Nlc3QoJy5pdGVtLWxpc3QuZ3JvdXAnKVxuICAgICAgZ3JvdXBzLnNwbGljZShOdW1iZXIob2wuZGF0YXNldC5ncm91cCksIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbGkgPSBvYmoucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGdyb3VwID0gb2JqLmNsb3Nlc3QoJy5ncm91cCcpXG4gICAgbGV0IGl0ZW1cbiAgICBpZiAoZ3JvdXAubGVuZ3RoKSB7XG4gICAgICBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbS5ncm91cHNbZ3JvdXAuZGF0YSgnZ3JvdXAnKV1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiB0aGlzLml0ZW0uZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHsgcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgY29uc3QgQ29DSWQgPSBpdGVtLmRhdGEoJ2NvY2lkJylcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgoaSA9PiAoaXRlbUlkICYmIGkuX2lkID09PSBpdGVtSWQpIHx8IChDb0NJZCAmJiBpID09PSBDb0NJZCkpXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Hcm91cEl0ZW1EZWxldGUgKGV2ZW50KSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGdyb3VwID0gTnVtYmVyKGl0ZW0uY2xvc2VzdCgnLml0ZW0tbGlzdC5ncm91cCcpLmRhdGEoJ2dyb3VwJykpXG4gICAgY29uc3QgZ3JvdXBzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5ncm91cHMpXG4gICAgaWYgKHR5cGVvZiBncm91cHNbZ3JvdXBdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgaXRlbUlkID0gaXRlbS5kYXRhKCdpdGVtLWlkJylcbiAgICAgIGNvbnN0IENvQ0lkID0gaXRlbS5kYXRhKCdjb2NpZCcpXG4gICAgICBjb25zdCBpdGVtSW5kZXggPSBncm91cHNbZ3JvdXBdLnNraWxscy5maW5kSW5kZXgoaSA9PiAoaXRlbUlkICYmIGkuX2lkID09PSBpdGVtSWQpIHx8IChDb0NJZCAmJiBpID09PSBDb0NJZCkpXG4gICAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgICAgZ3JvdXBzW2dyb3VwXS5za2lsbHMuc3BsaWNlKGl0ZW1JbmRleCwgMSlcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uZ3JvdXBzJzogZ3JvdXBzIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdvY2N1cGF0aW9uJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvb2NjdXBhdGlvbi5odG1sJyxcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScgfV0sXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG5cbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG5cbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIGZvciAobGV0IGluZGV4ID0gMCwgbGVuID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGluZGV4IDwgbGVuOyBpbmRleCsrKSB7XG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyB9KVxuXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5pc0VtcHR5ID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLm9jY3VwYXRpb25Qb2ludHNTdHJpbmcgPSBDb0M3T2NjdXBhdGlvblNoZWV0Lm9jY3VwYXRpb25Qb2ludHNTdHJpbmcoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cylcblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0udHlwZSkpIHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChDT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzW2tleV0gPyBDT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzW2tleV0gOiBudWxsKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIHN0YXRpYyBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nIChvY2N1cGF0aW9uU2tpbGxQb2ludHMpIHtcbiAgICBjb25zdCBvcHRpb25uYWwgPSBbXVxuICAgIGNvbnN0IG1hbmRhdG9yeSA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCBjYXJhY10gb2YgT2JqZWN0LmVudHJpZXMob2NjdXBhdGlvblNraWxsUG9pbnRzKSkge1xuICAgICAgaWYgKGNhcmFjLm11bHRpcGxpZXIpIHtcbiAgICAgICAgY29uc3QgY2FyYWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDSEFSQUMuJHtrZXkudG9VcHBlckNhc2UoKX1gKVxuICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQgJiYgY2FyYWMub3B0aW9uYWwpIHtcbiAgICAgICAgICBvcHRpb25uYWwucHVzaChgJHtjYXJhY05hbWV9eCR7Y2FyYWMubXVsdGlwbGllcn1gKVxuICAgICAgICB9XG4gICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCAmJiAhY2FyYWMub3B0aW9uYWwpIHtcbiAgICAgICAgICBtYW5kYXRvcnkucHVzaChgJHtjYXJhY05hbWV9eCR7Y2FyYWMubXVsdGlwbGllcn1gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nID0gJydcbiAgICBjb25zdCBvclN0cmluZyA9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKX0gYFxuICAgIGlmIChtYW5kYXRvcnkubGVuZ3RoKSBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IG1hbmRhdG9yeS5qb2luKCcgKyAnKVxuICAgIGlmIChvcHRpb25uYWwubGVuZ3RoICYmIG1hbmRhdG9yeS5sZW5ndGgpIHtcbiAgICAgIG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKz0gYCArICgke29wdGlvbm5hbC5qb2luKG9yU3RyaW5nKX0pYFxuICAgIH1cbiAgICBpZiAob3B0aW9ubmFsLmxlbmd0aCAmJiAhbWFuZGF0b3J5Lmxlbmd0aCkge1xuICAgICAgb2NjdXBhdGlvblBvaW50c1N0cmluZyArPSBvcHRpb25uYWwuam9pbihvclN0cmluZylcbiAgICB9XG4gICAgcmV0dXJuIG9jY3VwYXRpb25Qb2ludHNTdHJpbmdcbiAgfVxuXG4gIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHN5c3RlbSA9IGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGZvcm1EYXRhKT8uc3lzdGVtXG4gICAgaWYgKHN5c3RlbS5ncm91cHMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBPYmplY3QudmFsdWVzKFxuICAgICAgICBzeXN0ZW0uZ3JvdXBzIHx8IFtdXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5pdGVtLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGZvcm1EYXRhW2BzeXN0ZW0uZ3JvdXBzLiR7aW5kZXh9LnNraWxsc2BdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICAgICAgdGhpcy5pdGVtLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxsc1xuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvciwgQ2hhdE1lc3NhZ2UsIENPTlNULCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIEhvb2tzLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgVGV4dEVkaXRvciwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdPY2N1cGF0aW9uU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvb2NjdXBhdGlvbi5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QtZGlhbG9nLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0ludmVzdGlnYXRvcldpemFyZCBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBpZDogJ2ludmVzdGlnYXRvci13aXphcmQtYXBwbGljYXRpb24nLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdpbnZlc3RpZ2F0b3Itd2l6YXJkJ10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5UaXRsZScpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5oYnMnLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNjAwLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICBzY3JvbGxZOiBbJy5zY3JvbGxzZWN0aW9uJ10sXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLmRyYWdnYWJsZScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XVxuICAgIH0pXG4gIH1cblxuICBnZXQgcGFnZUxpc3QgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBQQUdFX05PTkU6IC0xLFxuICAgICAgUEFHRV9JTlRST0RVQ1RJT046IDAsXG4gICAgICBQQUdFX0NPTkZJR1VSQVRJT046IDEsXG4gICAgICBQQUdFX1NFVFVQUzogMixcbiAgICAgIFBBR0VfQVJDSEVUWVBFUzogMyxcbiAgICAgIFBBR0VfQ0hBUkFDVElTVElDUzogNCxcbiAgICAgIFBBR0VfQVRUUklCVVRFUzogNSxcbiAgICAgIFBBR0VfVklFV19BVFRSSUJVVEVTOiA2LFxuICAgICAgUEFHRV9PQ0NVUEFUSU9OUzogNyxcbiAgICAgIFBBR0VfT0NDVVBBVElPTl9TS0lMTFM6IDgsXG4gICAgICBQQUdFX0FSQ0hFVFlQRV9TS0lMTFM6IDksXG4gICAgICBQQUdFX1BPSU5UU19TS0lMTFM6IDEwLFxuICAgICAgUEFHRV9JTlZFU1RJR0FUT1I6IDExLFxuICAgICAgUEFHRV9CQUNLU1RPUlk6IDEyLFxuICAgICAgUEFHRV9DUkVBVEU6IDEzXG4gICAgfVxuICB9XG5cbiAgZ2V0IGNoYXJhY3RlcmlzdGljc01ldGhvZHMgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBNRVRIT0RfREVGQVVMVDogMSxcbiAgICAgIE1FVEhPRF9ST0xMOiAxLFxuICAgICAgTUVUSE9EX1BPSU5UUzogMixcbiAgICAgIE1FVEhPRF9WQUxVRVM6IDNcbiAgICB9XG4gIH1cblxuICBnZXQgY29jaWRDcmVkaXRSYXRpbmcgKCkge1xuICAgIHJldHVybiAnaS5za2lsbC5jcmVkaXQtcmF0aW5nJ1xuICB9XG5cbiAgZ2V0IGNvY2lkTGFuZ3VhZ2VPd24gKCkge1xuICAgIHJldHVybiAnaS5za2lsbC5sYW5ndWFnZS1vd24nXG4gIH1cblxuICBnZXQgcGFnZU9yZGVyICgpIHtcbiAgICBjb25zdCBwYWdlcyA9IHRoaXMucGFnZUxpc3RcbiAgICBsZXQgcGFnZU9yZGVyID0gW1xuICAgICAgcGFnZXMuUEFHRV9JTlRST0RVQ1RJT05cbiAgICBdXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX0NPTkZJR1VSQVRJT04pXG4gICAgfVxuICAgIGlmICh0aGlzLm9iamVjdC5kZWZhdWx0U2V0dXAgPT09ICcnKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX1NFVFVQUylcbiAgICB9XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykpIHtcbiAgICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfQVJDSEVUWVBFUylcbiAgICB9XG4gICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9DSEFSQUNUSVNUSUNTKVxuICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMnKSkge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9BVFRSSUJVVEVTKVxuICAgIH1cbiAgICBwYWdlT3JkZXIgPSBwYWdlT3JkZXIuY29uY2F0KFtcbiAgICAgIHBhZ2VzLlBBR0VfVklFV19BVFRSSUJVVEVTLFxuICAgICAgcGFnZXMuUEFHRV9PQ0NVUEFUSU9OUyxcbiAgICAgIHBhZ2VzLlBBR0VfT0NDVVBBVElPTl9TS0lMTFNcbiAgICBdKVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX0FSQ0hFVFlQRV9TS0lMTFMpXG4gICAgfVxuICAgIHBhZ2VPcmRlciA9IHBhZ2VPcmRlci5jb25jYXQoW1xuICAgICAgcGFnZXMuUEFHRV9QT0lOVFNfU0tJTExTLFxuICAgICAgcGFnZXMuUEFHRV9JTlZFU1RJR0FUT1IsXG4gICAgICBwYWdlcy5QQUdFX0JBQ0tTVE9SWSxcbiAgICAgIHBhZ2VzLlBBR0VfQ1JFQVRFXG4gICAgXSlcbiAgICByZXR1cm4gcGFnZU9yZGVyXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgbG9hZENhY2hlSXRlbUJ5Q29DSUQgKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IC9eaVxcLi8sIHR5cGU6ICdpJywgc2hvd0xvYWRpbmc6IHRydWUgfSkudGhlbigoaXRlbXMpID0+IHtcbiAgICAgICAgY29uc3QgbGlzdCA9IHt9XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICAgIGxpc3RbaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZF0gPSBpdGVtXG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShsaXN0KVxuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCAocmVnZXhwKSB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGF3YWl0IHRoaXMub2JqZWN0LmNhY2hlQ29DSUQpLmZpbHRlcihlbnRyeSA9PiBlbnRyeVswXS5tYXRjaChyZWdleHApKS5tYXAoZW50cnkgPT4gZW50cnlbMV0pXG4gIH1cblxuICBhc3luYyBnZXRDYWNoZUl0ZW1CeUNvQ0lEIChpZCkge1xuICAgIHJldHVybiAoYXdhaXQgdGhpcy5vYmplY3QuY2FjaGVDb0NJRClbaWRdID8/IGZhbHNlXG4gIH1cblxuICBhc3luYyBleHBhbmRJdGVtQXJyYXkgKGl0ZW1MaXN0KSB7XG4gICAgY29uc3QgaXRlbXMgPSBpdGVtTGlzdC5maWx0ZXIoaXQgPT4gdHlwZW9mIGl0ICE9PSAnc3RyaW5nJylcbiAgICBjb25zdCBjb2NpZHMgPSBpdGVtTGlzdC5maWx0ZXIoaXQgPT4gdHlwZW9mIGl0ID09PSAnc3RyaW5nJylcbiAgICBpZiAoY29jaWRzLmxlbmd0aCkge1xuICAgICAgY29uc3Qgc291cmNlID0gYXdhaXQgdGhpcy5vYmplY3QuY2FjaGVDb0NJRFxuICAgICAgY29uc3QgbWlzc2luZyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGNvY2lkIG9mIGNvY2lkcykge1xuICAgICAgICBpZiAodHlwZW9mIHNvdXJjZVtjb2NpZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbXMucHVzaChzb3VyY2VbY29jaWRdKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1pc3NpbmcucHVzaChjb2NpZClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1pc3NpbmcubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGVyYSA9IGdhbWUuaTE4bi5mb3JtYXQoQ09DNy5lcmFzW3RoaXMub2JqZWN0LmRlZmF1bHRFcmFdID8/ICdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhOiB0aGlzLm9iamVjdC5kZWZhdWx0RXJhIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci5kb2N1bWVudHMtbm90LWZvdW5kJywgeyBjb2NpZHM6IG1pc3Npbmcuam9pbignLCAnKSwgbGFuZzogZ2FtZS5pMThuLmxhbmcsIGVyYSB9KSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zXG4gIH1cblxuICBnZXRBZ2VBZGp1c3RtZW50cyAoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0gPSAwXG4gICAgfVxuICAgIC8vIGVkdTogb3B0aW9uYWwgLSBudW1iZXIgb2YgZWR1IGltcHJvdmVtZW50IGNoZWNrc1xuICAgIC8vIGRlZHVjdDogb3B0aW9uYWwgLSBkZWR1Y3QgW3RvdGFsXSBiZXR3ZWVuIFtmcm9tXVxuICAgIC8vIHJlZHVjZTogb3B0aW9uYWwgLSBkZWR1Y3QgW3RvdGxhXSBmcm9tIFtmcm9tXVxuICAgIC8vIGx1Y2s6IG9wdGlvbmFsIC0gcmVyb2xsIGx1Y2sgYW5kIHRha2UgaGlnaGVyXG4gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3QuYWdlID49IDQwKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IE1hdGguZmxvb3IodGhpcy5vYmplY3QuYWdlIC8gMTApXG4gICAgICAgIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMgPSB7XG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB0b3RhbDogKGtleSAtIDIgPiA0ID8gNCA6IGtleSAtIDIpLFxuICAgICAgICAgICAgcm9sbGVkOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVkdWN0OiB7XG4gICAgICAgICAgICB0b3RhbDogKGtleSA+IDEgPyA1ICogTWF0aC5wb3coMiwga2V5IC0gNCkgOiAwKSxcbiAgICAgICAgICAgIGZyb206IFsnc3RyJywgJ2NvbicsICdkZXgnXSxcbiAgICAgICAgICAgIHZhbHVlczoge31cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlZHVjZToge1xuICAgICAgICAgICAgdG90YWw6IChrZXkgLSAzKSAqIDUsXG4gICAgICAgICAgICBmcm9tOiAnYXBwJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5hZ2UgPj0gMjApIHtcbiAgICAgICAgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cyA9IHtcbiAgICAgICAgICBlZHU6IHtcbiAgICAgICAgICAgIHRvdGFsOiAxLFxuICAgICAgICAgICAgcm9sbGVkOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5hZ2UgPj0gMTUpIHtcbiAgICAgICAgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cyA9IHtcbiAgICAgICAgICBkZWR1Y3Q6IHtcbiAgICAgICAgICAgIHRvdGFsOiA1LFxuICAgICAgICAgICAgZnJvbTogWydzdHInLCAnc2l6J10sXG4gICAgICAgICAgICB2YWx1ZXM6IHt9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZWR1Y2U6IHtcbiAgICAgICAgICAgIHRvdGFsOiA1LFxuICAgICAgICAgICAgZnJvbTogJ2VkdSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIGx1Y2s6IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLnJlZHVjZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNbdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UuZnJvbV0gPSAtdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UudG90YWxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG5cbiAgICBzaGVldERhdGEucGFnZXMgPSB0aGlzLnBhZ2VMaXN0XG5cbiAgICBzaGVldERhdGEuY2FuTmV4dCA9IGZhbHNlXG4gICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IGZhbHNlXG5cbiAgICBsZXQgc2V0dXBcbiAgICBsZXQgYXJjaGV0eXBlXG4gICAgbGV0IG9jY3VwYXRpb25cblxuICAgIGxldCBzaG93TW9uZXRhcnkgPSBmYWxzZVxuXG4gICAgc3dpdGNoIChzaGVldERhdGEub2JqZWN0LnN0ZXApIHtcbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfSU5UUk9EVUNUSU9OOlxuICAgICAgICBzaGVldERhdGEuZXJhID0gZ2FtZS5pMThuLmZvcm1hdChDT0M3LmVyYXNbc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0RXJhXSA/PyAnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0RXJhIH0pXG4gICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0NPTkZJR1VSQVRJT046XG4gICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgIHNoZWV0RGF0YS5zZXR1cHMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwuc2V0dXBcXC4vKVxuICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9ucyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5vY2N1cGF0aW9uXFwuLylcbiAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlcyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5hcmNoZXR5cGVcXC4vKVxuICAgICAgICAgIHNldHVwID0gc2hlZXREYXRhLnNldHVwcy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0U2V0dXApXG4gICAgICAgICAgaWYgKHR5cGVvZiBzZXR1cCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5vYmplY3QuZGVmYXVsdFNldHVwID0gJydcbiAgICAgICAgICAgIHNoZWV0RGF0YS5vYmplY3Quc2V0dXAgPSAnJ1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzaGVldERhdGEuZGVzY3JpcHRpb24gPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICAgICAgICAgIHNldHVwLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNlY3JldHM6IGdhbWUudXNlci5pc0dNXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLm93bmVyc2hpcCA9IHtcbiAgICAgICAgICAgIFtDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVdOiAnT1dORVJTSElQLk5PTkUnLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTElNSVRFRF06ICdPV05FUlNISVAuTElNSVRFRCcsXG4gICAgICAgICAgICBbQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PQlNFUlZFUl06ICdPV05FUlNISVAuT0JTRVJWRVInLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVJdOiAnT1dORVJTSElQLk9XTkVSJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuX2VyYXMgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5fZXJhcy5wdXNoKHtcbiAgICAgICAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMgPSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHNcbiAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0RFRkFVTFRcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfUE9JTlRTXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFU1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuX2VyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgc2hlZXREYXRhLmhhc0FyY2hldHlwZXMgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpXG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9TRVRVUFM6XG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LmRlZmF1bHRTZXR1cCA9PT0gJycpIHtcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLnNldHVwXFwuLylcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgICAgICAgc2V0dXAgPSBzaGVldERhdGEuc2V0dXBzLmZpbmQocyA9PiBzLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBzaGVldERhdGEub2JqZWN0LnNldHVwKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZXR1cCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIHNldHVwLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIHNlY3JldHM6IGdhbWUudXNlci5pc0dNXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0FSQ0hFVFlQRVM6XG4gICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGVzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLmFyY2hldHlwZVxcLi8pXG4gICAgICAgIGlmIChzaGVldERhdGEuYXJjaGV0eXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICAgICAgICBhcmNoZXR5cGUgPSBzaGVldERhdGEuYXJjaGV0eXBlcy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyY2hldHlwZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIGFyY2hldHlwZS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzZWNyZXRzOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBzaGVldERhdGEuYm9udXNQb2ludHMgPSBhcmNoZXR5cGUuc3lzdGVtLmJvbnVzUG9pbnRzXG4gICAgICAgICAgICAgIGNvbnN0IGNvcmVDaGFyYWN0ZXJpc3RpY3MgPSBbXVxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvcmVDaGFyYWN0ZXJpc3RpYyBpbiBhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzW2NvcmVDaGFyYWN0ZXJpc3RpY10pIHtcbiAgICAgICAgICAgICAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpY3MucHVzaChjb3JlQ2hhcmFjdGVyaXN0aWMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChjb3JlQ2hhcmFjdGVyaXN0aWNzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyA9ICcnXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoY29yZUNoYXJhY3RlcmlzdGljcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgPSBjb3JlQ2hhcmFjdGVyaXN0aWNzWzBdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpYyA9IGNvcmVDaGFyYWN0ZXJpc3RpY3MubWFwKGMgPT4gYy50b0xvY2FsZVVwcGVyQ2FzZSgpKS5qb2luKCcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpICsgJyAnKVxuICAgICAgICAgICAgICBjb25zdCBza2lsbHMgPSBbXVxuICAgICAgICAgICAgICBhcmNoZXR5cGUuc3lzdGVtLnNraWxscyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KGFyY2hldHlwZS5zeXN0ZW0uc2tpbGxzKVxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGFyY2hldHlwZS5zeXN0ZW0uc2tpbGxzKSB7XG4gICAgICAgICAgICAgICAgc2tpbGxzLnB1c2goc2tpbGwubmFtZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzaGVldERhdGEuc2tpbGxzID0gc2tpbGxzLmpvaW4oJywgJylcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnN1Z2dlc3RlZE9jY3VwYXRpb25zID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIGFyY2hldHlwZS5zeXN0ZW0uc3VnZ2VzdGVkT2NjdXBhdGlvbnMsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzZWNyZXRzOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBzaGVldERhdGEuc3VnZ2VzdGVkVHJhaXRzID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICAgIGFyY2hldHlwZS5zeXN0ZW0uc3VnZ2VzdGVkVHJhaXRzLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2VjcmV0czogZ2FtZS51c2VyLmlzR01cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQ0hBUkFDVElTVElDUzpcbiAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMgPSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHNcbiAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9ST0xMXG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgICAgIHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAoc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCB8fCB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9QT0lOVFNcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFU1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLnNldHVwID0ge1xuICAgICAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICAgICAgcG9pbnRzOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZSxcbiAgICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWNzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnc3RyJyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuc3RyLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU3RyZW5ndGgnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdjb24nLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5jb24sXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdzaXonLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5zaXosXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TaXplJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnZGV4JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZGV4LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRGV4dGVyaXR5J1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnYXBwJyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuYXBwLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ2ludCcsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmludCxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkludGVsbGlnZW5jZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ3BvdycsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLnBvdyxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlBvd2VyJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnZWR1JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZWR1LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgbHVjazoge1xuICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMubHVjayxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0NvQzcuTHVjaydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3MgPSBbXVxuICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3QuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgICAgICAgICBhcmNoZXR5cGUgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3QuYXJjaGV0eXBlKVxuICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyY2hldHlwZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvcmVDaGFyYWN0ZXJpc3RpYyBpbiBhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NbY29yZUNoYXJhY3RlcmlzdGljXSkge1xuICAgICAgICAgICAgICAgICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IGNvcmVDaGFyYWN0ZXJpc3RpYyxcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KHNoZWV0RGF0YS5zZXR1cC5jaGFyYWN0ZXJpc3RpY3MuZmluZChjID0+IGMua2V5ID09PSBjb3JlQ2hhcmFjdGVyaXN0aWMpPy5sYWJlbCA/PyAnVW5rbm93bicpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5zZXR1cC5jaGFyYWN0ZXJpc3RpY3MuZmluZChjID0+IGMua2V5ID09PSB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMpLnJvbGwgPSBhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZW1wdGllcyA9IGZhbHNlXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzaGVldERhdGEub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPT0gJ2x1Y2snKSB7XG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEuc2V0dXAudG90YWwgKz0gcGFyc2VJbnQoc2hlZXREYXRhLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW1wdGllcyA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICAgICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljID0gdGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljLnRvTG9jYWxlVXBwZXJDYXNlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZW1wdGllcyAmJiB0aGlzLm9iamVjdC5hZ2UgPj0gMTUpIHtcbiAgICAgICAgICAgICAgaWYgKFtzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfUk9MTCwgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFU10uaW5jbHVkZXMoc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCkpIHtcbiAgICAgICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGVldERhdGEuc2V0dXAudG90YWwudG9TdHJpbmcoKSA9PT0gc2hlZXREYXRhLnNldHVwLnBvaW50cy50b1N0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9BVFRSSUJVVEVTOlxuICAgICAgICBzaGVldERhdGEucHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpXG4gICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICBzaGVldERhdGEucG9pbnRzID0ge31cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMpIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzW2tleV0gPSB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApLFxuICAgICAgICAgICAgbWluOiAtcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgMSxcbiAgICAgICAgICAgIGxhYmVsOiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMoa2V5KS5sYWJlbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1ICE9PSAndW5kZWZpbmVkJyAmJiAhdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUucm9sbGVkKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5kZWR1Y3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmRlZHVjdFRvdGFsID0gMFxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LmZyb20pIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCA9IHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCAtIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuZGVkdWN0RnJvbSA9IHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LmZyb20ubWFwKG4gPT4gZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuJyArIG4udG9VcHBlckNhc2UoKSkpLmpvaW4oJywgJykucmVwbGFjZSgvKCwgKShbXixdKykkLywgJyQxJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpICsgJyAkMicpLnJlcGxhY2UoL14oW14sXSspLChbXixdKykkLywgJyQxJDInKVxuICAgICAgICAgIGlmIChzaGVldERhdGEuZGVkdWN0VG90YWwgIT09IHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LnRvdGFsKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnJlZHVjZUZyb20gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy4nICsgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UuZnJvbS50b1VwcGVyQ2FzZSgpKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5sdWNrICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNoZWV0RGF0YS5sdWNrVmFsdWUgPSBNYXRoLm1heCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5sdWNrLCB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5sdWNrKVxuICAgICAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5sdWNrID09PSAwKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfVklFV19BVFRSSUJVVEVTOlxuICAgICAgICBzaGVldERhdGEucG9pbnRzID0ge31cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMpIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzW2tleV0gPSB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApLFxuICAgICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICAgIHN1ZmZpeDogJyUnLFxuICAgICAgICAgICAgbGFiZWw6IENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhrZXkpLmxhYmVsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMuZGIgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLmRiRnJvbUNoYXJhY3RlcmlzdGljcyhzaGVldERhdGEucG9pbnRzKSxcbiAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgIHN1ZmZpeDogJycsXG4gICAgICAgICAgbGFiZWw6ICdDb0M3LkJvbnVzRGFtYWdlJ1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05hTihzaGVldERhdGEucG9pbnRzLmRiLnZhbHVlKSB8fCBOdW1iZXIoc2hlZXREYXRhLnBvaW50cy5kYi52YWx1ZSkgPj0gMCkge1xuICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMuZGIucHJlZml4ID0gJysnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5idWlsZCA9IHtcbiAgICAgICAgICB2YWx1ZTogQ29DQWN0b3IuYnVpbGRGcm9tQ2hhcmFjdGVyaXN0aWNzKHNoZWV0RGF0YS5wb2ludHMpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuQnVpbGQnXG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlcihzaGVldERhdGEucG9pbnRzLmJ1aWxkLnZhbHVlKSA+PSAwKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnBvaW50cy5idWlsZC5wcmVmaXggPSAnKydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLmhwID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5ocEZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cywgJ2NoYXJhY3RlcicpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuSGl0UG9pbnRzJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMuaHAucHJlZml4ID0gc2hlZXREYXRhLnBvaW50cy5ocC52YWx1ZSArICcvJ1xuICAgICAgICBzaGVldERhdGEucG9pbnRzLm1wID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5tcEZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cyksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5NYWdpY1BvaW50cydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLm1wLnByZWZpeCA9IHNoZWV0RGF0YS5wb2ludHMubXAudmFsdWUgKyAnLydcbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5zYW4gPSB7XG4gICAgICAgICAgdmFsdWU6IHNoZWV0RGF0YS5wb2ludHMucG93LnZhbHVlLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnLzk5JyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuU2FuaXR5J1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMubW92ID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5tb3ZGcm9tQ2hhcmFjdGVyaXN0aWNzKHNoZWV0RGF0YS5wb2ludHMsICdjaGFyYWN0ZXInLCB0aGlzLm9iamVjdC5hZ2UpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuTW92ZW1lbnQnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfT0NDVVBBVElPTlM6XG4gICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9ucyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5vY2N1cGF0aW9uXFwuLylcbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb25zLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5vY2N1cGF0aW9uICE9PSAnJykge1xuICAgICAgICAgIG9jY3VwYXRpb24gPSBzaGVldERhdGEub2NjdXBhdGlvbnMuZmluZChzID0+IHMuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPT09IHNoZWV0RGF0YS5vYmplY3Qub2NjdXBhdGlvbilcbiAgICAgICAgICBpZiAodHlwZW9mIG9jY3VwYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuZGVzY3JpcHRpb24gPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICAgICAgICAgIG9jY3VwYXRpb24uc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgICAgICAgICAgc2VjcmV0czogZ2FtZS51c2VyLmlzR01cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb25Qb2ludHNTdHJpbmcgPSBDb0M3T2NjdXBhdGlvblNoZWV0Lm9jY3VwYXRpb25Qb2ludHNTdHJpbmcob2NjdXBhdGlvbi5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKVxuICAgICAgICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZyA9IG9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZ1xuICAgICAgICAgICAgc2hlZXREYXRhLnBlcnNvbmFsID0gb2NjdXBhdGlvbi5zeXN0ZW0ucGVyc29uYWxcbiAgICAgICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbFRleHQgPSBvY2N1cGF0aW9uLnN5c3RlbS5wZXJzb25hbFRleHRcbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbHMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5za2lsbHMpXG4gICAgICAgICAgICBzaGVldERhdGEuZ3JvdXBzID0ge31cbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5ncm91cHNbaW5kZXhdID0ge1xuICAgICAgICAgICAgICAgIG9wdGlvbnM6IG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwc1tpbmRleF0ub3B0aW9ucyxcbiAgICAgICAgICAgICAgICBza2lsbHM6IFtdXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLmdyb3Vwc1tpbmRleF0uc2tpbGxzID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkob2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEucG9pbnRzID0gMFxuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGNhcmFjXSBvZiBPYmplY3QuZW50cmllcyhvY2N1cGF0aW9uLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHMpKSB7XG4gICAgICAgICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGlmIChjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKGNhcmFjLm11bHRpcGxpZXIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLnBvaW50cyArPSBjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnBvaW50cyArPSBNYXRoLm1heCguLi5vcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfSU5WRVNUSUdBVE9SOlxuICAgICAgICBzaGVldERhdGEubGFuZ3VhZ2UgPSAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNbdGhpcy5jb2NpZExhbmd1YWdlT3duXSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgIGlmIChzaGVldERhdGEubGFuZ3VhZ2UpIHtcbiAgICAgICAgICBzaGVldERhdGEubGFuZ3VhZ2VOYW1lID0gdGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkTGFuZ3VhZ2VPd25dLml0ZW0ubmFtZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNoZWV0RGF0YS5sYW5ndWFnZU5hbWUgPSAnJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX09DQ1VQQVRJT05fU0tJTExTOlxuICAgICAgICBzaGVldERhdGEuZGVmYXVsdCA9IDBcbiAgICAgICAgc2hlZXREYXRhLnNlbGVjdGVkID0gMFxuICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcyA9IFtdXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNraWxsSXRlbXMpIHtcbiAgICAgICAgICBsZXQgZ3JvdXAgPSAnb3RoZXInXG4gICAgICAgICAgY29uc3Qgcm93cyA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MubGVuZ3RoXG4gICAgICAgICAgY29uc3QgaXNNdWx0aXBsZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLmZsYWdzLmlzTXVsdGlwbGVcbiAgICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgaW5kZXg6IC0xLFxuICAgICAgICAgICAgICBuYW1lOiBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLm5hbWUsXG4gICAgICAgICAgICAgIGdyb3VwLFxuICAgICAgICAgICAgICB0b2dnbGU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc0NyZWRpdFJhdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzTXVsdGlwbGU6IHRydWUsXG4gICAgICAgICAgICAgIGlzUGlja2FibGU6IGZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcm93czsgaW5kZXgrKykge1xuICAgICAgICAgICAgbGV0IGlzUGlja2FibGUgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmlzT2NjdXBhdGlvbkRlZmF1bHQpIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSAnZGVmYXVsdCdcbiAgICAgICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICBpc1BpY2thYmxlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5kZWZhdWx0KytcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uaW5PY2N1cGF0aW9uR3JvdXAgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGdyb3VwID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uaW5PY2N1cGF0aW9uR3JvdXBcbiAgICAgICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICBpc1BpY2thYmxlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBncm91cCA9ICdvdGhlcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0b2dnbGUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5vY2N1cGF0aW9uVG9nZ2xlXG4gICAgICAgICAgICBpZiAoaXNQaWNrYWJsZSkge1xuICAgICAgICAgICAgICB0b2dnbGUgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNwZWNpYWxpemF0aW9uID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIGxldCBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgIGxldCBwaWNrZWQgPSBmYWxzZVxuICAgICAgICAgICAgbGV0IGRlbGV0ZWFibGUgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgcGlja2VkID0gdHJ1ZVxuICAgICAgICAgICAgICBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZFxuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgcGlja2VkID0gdHJ1ZVxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbiA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZC5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG9nZ2xlIHx8IChpc1BpY2thYmxlICYmIHBpY2tlZCkpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnNlbGVjdGVkKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lXG4gICAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmNvY2lkTGFuZ3VhZ2VPd24pIHtcbiAgICAgICAgICAgICAgbmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNQaWNrYWJsZSAmJiBwaWNrZWQpIHtcbiAgICAgICAgICAgICAgbmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BpY2thYmxlICYmIHBpY2tlZCkge1xuICAgICAgICAgICAgICBkZWxldGVhYmxlID0gIXNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmFyY2hldHlwZVRvZ2dsZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgIGdyb3VwOiBncm91cC50b1N0cmluZygpLFxuICAgICAgICAgICAgICB0b2dnbGUsXG4gICAgICAgICAgICAgIGlzQ3JlZGl0UmF0aW5nOiBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pc0NyZWRpdFJhdGluZyxcbiAgICAgICAgICAgICAgaXNNdWx0aXBsZTogZmFsc2UsXG4gICAgICAgICAgICAgIGlzUGlja2FibGUsXG4gICAgICAgICAgICAgIHBpY2tlZCxcbiAgICAgICAgICAgICAgZGVsZXRlYWJsZSxcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICAgIHNraWxsTmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLm1heCA9IChwYXJzZUludChzaGVldERhdGEuZGVmYXVsdCwgMTApIHx8IDApICsgKHBhcnNlSW50KHNoZWV0RGF0YS5vYmplY3QucGVyc29uYWwsIDEwKSB8fCAwKSArIE9iamVjdC52YWx1ZXMoc2hlZXREYXRhLm9iamVjdC5vY2N1cGF0aW9uR3JvdXBzKS5yZWR1Y2UoKHMsIHYpID0+IHMgKyAocGFyc2VJbnQodiwgMTApIHx8IDApLCAwKVxuICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgaWYgKHNoZWV0RGF0YS5zZWxlY3RlZCA9PT0gc2hlZXREYXRhLm1heCkge1xuICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQVJDSEVUWVBFX1NLSUxMUzpcbiAgICAgICAgc2hlZXREYXRhLm1heCA9IDBcbiAgICAgICAgc2hlZXREYXRhLnNlbGVjdGVkID0gMFxuICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcyA9IFtdXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNraWxsSXRlbXMpIHtcbiAgICAgICAgICBsZXQgZ3JvdXAgPSAnb3RoZXInXG4gICAgICAgICAgY29uc3Qgcm93cyA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MubGVuZ3RoXG4gICAgICAgICAgY29uc3QgaXNNdWx0aXBsZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLmZsYWdzLmlzTXVsdGlwbGVcbiAgICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgaW5kZXg6IC0xLFxuICAgICAgICAgICAgICBuYW1lOiBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLm5hbWUsXG4gICAgICAgICAgICAgIGdyb3VwLFxuICAgICAgICAgICAgICB0b2dnbGU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc0NyZWRpdFJhdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzTXVsdGlwbGU6IHRydWUsXG4gICAgICAgICAgICAgIGlzUGlja2FibGU6IGZhbHNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcm93czsgaW5kZXgrKykge1xuICAgICAgICAgICAgbGV0IGlzUGlja2FibGUgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmlzQXJjaGV0eXBlRGVmYXVsdCkge1xuICAgICAgICAgICAgICBncm91cCA9ICdkZWZhdWx0J1xuICAgICAgICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIGlzUGlja2FibGUgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLm1heCsrXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBncm91cCA9ICdvdGhlcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB0b2dnbGUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5hcmNoZXR5cGVUb2dnbGVcbiAgICAgICAgICAgIGlmIChpc1BpY2thYmxlKSB7XG4gICAgICAgICAgICAgIHRvZ2dsZSA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc3BlY2lhbGl6YXRpb24gPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgbGV0IHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgbGV0IHBpY2tlZCA9IGZhbHNlXG4gICAgICAgICAgICBsZXQgZGVsZXRlYWJsZSA9IGZhbHNlXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBwaWNrZWQgPSB0cnVlXG4gICAgICAgICAgICAgIHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBwaWNrZWQgPSB0cnVlXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgIHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b2dnbGUgfHwgKGlzUGlja2FibGUgJiYgcGlja2VkKSkge1xuICAgICAgICAgICAgICBzaGVldERhdGEuc2VsZWN0ZWQrK1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLm5hbWVcbiAgICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuY29jaWRMYW5ndWFnZU93bikge1xuICAgICAgICAgICAgICBuYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1BpY2thYmxlICYmIHBpY2tlZCkge1xuICAgICAgICAgICAgICBuYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzUGlja2FibGUgJiYgcGlja2VkKSB7XG4gICAgICAgICAgICAgIGRlbGV0ZWFibGUgPSAhc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0ub2NjdXBhdGlvblRvZ2dsZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgIGdyb3VwOiBncm91cC50b1N0cmluZygpLFxuICAgICAgICAgICAgICB0b2dnbGUsXG4gICAgICAgICAgICAgIGlzQ3JlZGl0UmF0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNNdWx0aXBsZTogZmFsc2UsXG4gICAgICAgICAgICAgIGlzUGlja2FibGUsXG4gICAgICAgICAgICAgIHBpY2tlZCxcbiAgICAgICAgICAgICAgZGVsZXRlYWJsZSxcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICAgIHNraWxsTmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgIGlmIChzaGVldERhdGEuc2VsZWN0ZWQgPT09IHNoZWV0RGF0YS5tYXgpIHtcbiAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX1BPSU5UU19TS0lMTFM6XG4gICAgICAgIHNoZWV0RGF0YS5za2lsbHMgPSBbXVxuICAgICAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nT2theSA9ICEodGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1heCA+IDApXG4gICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbCA9IHtcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICB0b3RhbDogMiAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5pbnQsIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzLmludCwgMTApKSxcbiAgICAgICAgICByZW1haW5pbmc6IDBcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbiA9IHtcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICByZW1haW5pbmc6IDBcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlID0ge1xuICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgIHJlbWFpbmluZzogMFxuICAgICAgICB9XG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgICAgIHNob3dNb25ldGFyeSA9IChhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQoc2hlZXREYXRhLm9iamVjdC5zZXR1cCkpLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMubGVuZ3RoID4gMFxuICAgICAgICB9XG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0Lm9jY3VwYXRpb24gIT09ICcnKSB7XG4gICAgICAgICAgb2NjdXBhdGlvbiA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5vY2N1cGF0aW9uKVxuICAgICAgICAgIGlmIChvY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gW11cbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb24uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgICAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbi50b3RhbCArPSBjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24udG90YWwgKz0gTWF0aC5tYXgoLi4ub3B0aW9ucylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub2JqZWN0LmFyY2hldHlwZSAhPT0gJycpIHtcbiAgICAgICAgICBjb25zdCBhcmNoZXR5cGUgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKHRoaXMub2JqZWN0LmFyY2hldHlwZSlcbiAgICAgICAgICBpZiAoYXJjaGV0eXBlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZS50b3RhbCA9IGFyY2hldHlwZVswXS5zeXN0ZW0uYm9udXNQb2ludHNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMub2JqZWN0LnNraWxsSXRlbXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zKSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XVxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IHNraWxsLnJvd3MubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJvdyA9IHNraWxsLnJvd3NbaW5kZXhdXG4gICAgICAgICAgICAgIGlmICghc2tpbGwuZmxhZ3MuaXNNdWx0aXBsZSB8fCByb3cuc2VsZWN0ZWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShza2lsbC5pdGVtKVxuICAgICAgICAgICAgICAgIGlmIChyb3cuc2VsZWN0ZWQgIT09IGZhbHNlICYmIHR5cGVvZiByb3cuc2VsZWN0ZWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICBpdGVtID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUocm93LnNlbGVjdGVkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgYmFzZSA9IGl0ZW0uc3lzdGVtLmJhc2VcbiAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cCgnQCcgKyBrZXksICdpJylcbiAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGJhc2UucmVwbGFjZShyZWdFeCwgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgICAgICAgIGJhc2UgPSBNYXRoLmZsb29yKG5ldyBSb2xsKGJhc2UpLmV2YWx1YXRlKHsgYXN5bmM6IGZhbHNlIH0pLnRvdGFsKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgdG90YWxQb2ludHMgPSBwYXJzZUludChiYXNlLCAxMClcbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5wZXJzb25hbFBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIocm93LnBlcnNvbmFsUG9pbnRzKVxuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLnBlcnNvbmFsLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5vY2N1cGF0aW9uUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cub2NjdXBhdGlvblBvaW50cylcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbnVtID0gTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpXG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5leHBlcmllbmNlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cuZXhwZXJpZW5jZVBvaW50cylcbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzID0gdG90YWxQb2ludHMgKyBudW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmNvY2lkTGFuZ3VhZ2VPd24pIHtcbiAgICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyBpdGVtLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNraWxsLmZsYWdzLmlzQ3JlZGl0UmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZSArICcgWycgKyB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWluICsgJyAtICcgKyB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4ICsgJ10nXG4gICAgICAgICAgICAgICAgICBpZiAodG90YWxQb2ludHMgPj0gdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1pbiAmJiB0b3RhbFBvaW50cyA8PSB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4KSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdPa2F5ID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJvdy5zZWxlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyByb3cuc2VsZWN0ZWQgKyAnKSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLnNraWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgIGlzT2NjdXBhdGlvbjogcm93Lm9jY3VwYXRpb25Ub2dnbGUsXG4gICAgICAgICAgICAgICAgICBpc0FyY2hldHlwZTogcm93LmFyY2hldHlwZVRvZ2dsZSxcbiAgICAgICAgICAgICAgICAgIGJhc2UsXG4gICAgICAgICAgICAgICAgICBwZXJzb25hbFBvaW50czogcm93LnBlcnNvbmFsUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgb2NjdXBhdGlvblBvaW50czogcm93Lm9jY3VwYXRpb25Qb2ludHMsXG4gICAgICAgICAgICAgICAgICBhcmNoZXR5cGVQb2ludHM6IHJvdy5hcmNoZXR5cGVQb2ludHMsXG4gICAgICAgICAgICAgICAgICBleHBlcmllbmNlUG9pbnRzOiByb3cuZXhwZXJpZW5jZVBvaW50cyxcbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgc2hvd0NyZWRpdFJhdGluZzogc2hvd01vbmV0YXJ5ICYmIGtleSA9PT0gdGhpcy5jb2NpZENyZWRpdFJhdGluZ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLmNyZWRpdFJhdGluZ09rYXkpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbC5yZW1haW5pbmcgPSBzaGVldERhdGEucGVyc29uYWwudG90YWwgLSBzaGVldERhdGEucGVyc29uYWwuY291bnRcbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24ucmVtYWluaW5nID0gc2hlZXREYXRhLm9jY3VwYXRpb24udG90YWwgLSBzaGVldERhdGEub2NjdXBhdGlvbi5jb3VudFxuICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLnJlbWFpbmluZyA9IHNoZWV0RGF0YS5hcmNoZXR5cGUudG90YWwgLSBzaGVldERhdGEuYXJjaGV0eXBlLmNvdW50XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQkFDS1NUT1JZOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgYWxsQmFja3N0b3JpZXMgPSBhd2FpdCB0aGlzLm9iamVjdC5jYWNoZUJhY2tzdG9yaWVzXG4gICAgICAgICAgc2hlZXREYXRhLmJhY2tzdG9yaWVzID0ge31cbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuYmFja3N0b3JpZXNbaW5kZXhdID0ge1xuICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLm5hbWUsXG4gICAgICAgICAgICAgIHJvbGxzOiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCh0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0ua2V5LCBhbGxCYWNrc3RvcmllcykubGVuZ3RoID8gdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLmtleSA6ICcnKSxcbiAgICAgICAgICAgICAgdmFsdWU6IHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQ1JFQVRFOlxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5rZXlwcmVzcyhlID0+IC90ZXh0YXJlYS9pLnRlc3QoKGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudCkudGFnTmFtZSkgfHwgKGUua2V5Q29kZSB8fCBlLndoaWNoIHx8IGUuY2hhckNvZGUgfHwgMCkgIT09IDEzKVxuICAgIGh0bWwuZmluZCgnLnN1Ym1pdF9vbl9jaGFuZ2UnKS5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yb2xsLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pbmNyZWFzZS0xMC1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYzEwLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaW5jcmVhc2UtY2hhcmFjdGVyaXN0aWMnKS5jbGljayh0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWNyZWFzZS1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRlY3JlYXNlLTEwLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5yb2xsX2FsbCcpLmNsaWNrKHRoaXMuX29uUm9sbEFsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uLnJvbGxfZWR1JykuY2xpY2sodGhpcy5fb25Sb2xsRWR1LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24ucm9sbF9sdWNrJykuY2xpY2sodGhpcy5fb25Sb2xsTHVjay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0gaW5wdXQuc3VibWl0X29uX2JsdXInKS5ibHVyKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbSBpbnB1dC5zYXZlLWNoYXJhY3RlcmlzdGljLW9uLWJsdXInKS5ibHVyKHRoaXMuX29uQ2hhbmdlU2F2ZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbS50b2dnbGVhYmxlJykuY2xpY2sodGhpcy5fb25Ub2dnbGVTa2lsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0uY2xpY2thYmxlJykuY2xpY2sodGhpcy5fb25DbGlja1BpY2tTa2lsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNraWxscy1saXN0IGlucHV0JykuY2xpY2sodGhpcy5fb25DbGlja1NraWxsU3BlY2lhbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNraWxscy1saXN0IC5yZW1vdmUtc2tpbGwnKS5jbGljayh0aGlzLl9vbkNsaWNrUmVtb3ZlU2tpbGwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtIGlucHV0LnNraWxsLWFkanVzdG1lbnQnKS5ibHVyKHRoaXMuX29uQ2hhbmdlU2tpbGxQb2ludHMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ3RleHRhcmVhLmJhY2tzdG9yeS10ZXh0Jykua2V5dXAodGhpcy5fb25DaGFuZ2VCYWNrc3RvcnlUZXh0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24uYmFja3N0b3J5LXJvbGwnKS5jbGljayh0aGlzLl9vblJvbGxCYWNrc3RvcnkuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5iYWNrc3RvcnktcmVzZXQnKS5jbGljayh0aGlzLl9vblJlc2V0QmFja3N0b3J5LmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyByb2xsTWVzc2FnZSAocm9sbHMpIHtcbiAgICBpZiAocm9sbHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBodG1sID0gW11cbiAgICAgIGZvciAoY29uc3Qgcm9sbCBvZiByb2xscykge1xuICAgICAgICBodG1sLnB1c2goYXdhaXQgcmVuZGVyVGVtcGxhdGUoUm9sbC5DSEFUX1RFTVBMQVRFLCB7XG4gICAgICAgICAgZm9ybXVsYTogKENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhyb2xsWzBdKT8ubGFiZWwgPz8gcm9sbFswXSkgKyAnOiAnICsgcm9sbFsxXSxcbiAgICAgICAgICB0b29sdGlwOiBhd2FpdCByb2xsWzJdLmdldFRvb2x0aXAoKSxcbiAgICAgICAgICB0b3RhbDogcm9sbFsyXS50b3RhbFxuICAgICAgICB9KSlcbiAgICAgIH1cbiAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgc3BlYWtlcjoge1xuICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiBodG1sLmpvaW4oJzxkaXY+Jm5ic3A7PC9kaXY+JyksXG4gICAgICAgIHdoaXNwZXI6IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFkZEl0ZW1Ub0xpc3QgKGl0ZW0sIHsgaXNPY2N1cGF0aW9uRGVmYXVsdCA9IGZhbHNlLCBpbk9jY3VwYXRpb25Hcm91cCA9IGZhbHNlLCBvY2N1cGF0aW9uVG9nZ2xlID0gZmFsc2UsIGlzQXJjaGV0eXBlRGVmYXVsdCA9IGZhbHNlLCBhcmNoZXR5cGVUb2dnbGUgPSBmYWxzZSwgaXNDcmVkaXRSYXRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBjb25zdCBrZXkgPSAoaXRlbS5mbGFncy5Db0M3Py5jb2NpZEZsYWc/LmlkID8/IGl0ZW0ubmFtZSlcbiAgICBpZiAoaXRlbS50eXBlICE9PSAnc2tpbGwnKSB7XG4gICAgICB0aGlzLm9iamVjdC5pbnZlc3RpZ2F0b3JJdGVtcy5wdXNoKGl0ZW0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgaXNNdWx0aXBsZSA9ICEhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCAmJiAoKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMucmVxdWlyZXNuYW1lICYmICEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5vbmx5b25lID8/IGZhbHNlKSkgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5waWNrbmFtZW9ubHkgfHwgaXRlbS5uYW1lID09PSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFueVNwZWNOYW1lJykpKVxuICAgIGNvbnN0IGZsYWdzID0ge1xuICAgICAgaXNPY2N1cGF0aW9uRGVmYXVsdCxcbiAgICAgIGluT2NjdXBhdGlvbkdyb3VwLFxuICAgICAgaXNBcmNoZXR5cGVEZWZhdWx0LFxuICAgICAgaXNDcmVkaXRSYXRpbmcsXG4gICAgICBvY2N1cGF0aW9uVG9nZ2xlLFxuICAgICAgYXJjaGV0eXBlVG9nZ2xlXG4gICAgfVxuICAgIGNvbnN0IHJvd3MgPSB7XG4gICAgICBvY2N1cGF0aW9uUG9pbnRzOiAnJyxcbiAgICAgIGFyY2hldHlwZVBvaW50czogJycsXG4gICAgICBleHBlcmllbmNlUG9pbnRzOiAnJyxcbiAgICAgIHBlcnNvbmFsUG9pbnRzOiAnJyxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSA9IHtcbiAgICAgICAgaXRlbSxcbiAgICAgICAgZmxhZ3M6IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoZmxhZ3MsIHsgaXNNdWx0aXBsZSB9LCB7IGlucGxhY2U6IGZhbHNlIH0pLFxuICAgICAgICByb3dzOiBbXVxuICAgICAgfVxuICAgICAgaWYgKCFpc011bHRpcGxlIHx8ICEoaXNPY2N1cGF0aW9uRGVmYXVsdCA9PT0gZmFsc2UgJiYgaW5PY2N1cGF0aW9uR3JvdXAgPT09IGZhbHNlICYmIGlzQXJjaGV0eXBlRGVmYXVsdCA9PT0gZmFsc2UpKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLnB1c2goZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChmbGFncywgcm93cywgeyBpbnBsYWNlOiBmYWxzZSB9KSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFpc011bHRpcGxlKSB7XG4gICAgICAgIGZvciAoY29uc3QgZmxhZyBpbiBmbGFncykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzWzBdW2ZsYWddID0gdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbMF1bZmxhZ10gfHwgZmxhZ3NbZmxhZ11cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MucHVzaChmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGZsYWdzLCByb3dzLCB7IGlucGxhY2U6IGZhbHNlIH0pKVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmbGFnIGluIGZsYWdzKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFnc1tmbGFnXSA9IHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFnc1tmbGFnXSB8fCBmbGFnc1tmbGFnXVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzTXVsdGlwbGUgJiYgZmxhZ3MuaXNDcmVkaXRSYXRpbmcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzWzBdLm9jY3VwYXRpb25Qb2ludHMgPSB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWluXG4gICAgfVxuICB9XG5cbiAgY2xlYXJTZXR1cFBvaW50cyAoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBQb2ludHMpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSAnJ1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldFNraWxsTGlzdHMgKCkge1xuICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXMgPSB7fVxuICAgIHRoaXMub2JqZWN0Lm9jY3VwYXRpb25Hcm91cHMgPSB7fVxuICAgIHRoaXMub2JqZWN0LmludmVzdGlnYXRvckl0ZW1zID0gW11cbiAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMpXG4gICAgY29uc3Qgc2V0dXAgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Quc2V0dXApXG4gICAgY29uc3Qgb2NjdXBhdGlvbiA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5vY2N1cGF0aW9uKVxuICAgIGxldCBhcmNoZXR5cGUgPSBmYWxzZVxuICAgIGlmICh0aGlzLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICBhcmNoZXR5cGUgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3QuYXJjaGV0eXBlKVxuICAgIH1cbiAgICBpZiAoc2V0dXAgJiYgb2NjdXBhdGlvbiAmJiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykgfHwgYXJjaGV0eXBlKSkge1xuICAgICAgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnMgPSBbXVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNldHVwLnN5c3RlbS5iaW9TZWN0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnMucHVzaCh7XG4gICAgICAgICAgbmFtZTogc2V0dXAuc3lzdGVtLmJpb1NlY3Rpb25zW2luZGV4XSxcbiAgICAgICAgICB2YWx1ZTogJycsXG4gICAgICAgICAga2V5OiAncnQuLmJhY2tzdG9yeS0nICsgQ29DN1V0aWxpdGllcy50b0tlYmFiQ2FzZShzZXR1cC5zeXN0ZW0uYmlvU2VjdGlvbnNbaW5kZXhdKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgdGhpcy5vYmplY3QucGVyc29uYWwgPSBvY2N1cGF0aW9uLnN5c3RlbS5wZXJzb25hbFxuICAgICAgdGhpcy5vYmplY3QucGVyc29uYWxUZXh0ID0gb2NjdXBhdGlvbi5zeXN0ZW0ucGVyc29uYWxUZXh0XG4gICAgICB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcgPSBvY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmdcbiAgICAgIGxldCBpdGVtcyA9IFtdXG4gICAgICBpdGVtcyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KHNldHVwLnN5c3RlbS5pdGVtcylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBpdGVtcy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KGl0ZW1zW2luZGV4XSlcbiAgICAgIH1cbiAgICAgIGl0ZW1zID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkob2NjdXBhdGlvbi5zeXN0ZW0uc2tpbGxzKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbXNbaW5kZXhdLCB7IGlzT2NjdXBhdGlvbkRlZmF1bHQ6IHRydWUsIG9jY3VwYXRpb25Ub2dnbGU6IHRydWUgfSlcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGdyb3VwID0gMCwgZ20gPSBvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBncm91cCA8IGdtOyBncm91cCsrKSB7XG4gICAgICAgIHRoaXMub2JqZWN0Lm9jY3VwYXRpb25Hcm91cHNbZ3JvdXBdID0gb2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzW2dyb3VwXS5vcHRpb25zXG4gICAgICAgIGl0ZW1zID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkob2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzW2dyb3VwXS5za2lsbHMpXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBpdGVtcy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbXNbaW5kZXhdLCB7IGluT2NjdXBhdGlvbkdyb3VwOiBncm91cCB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYXJjaGV0eXBlKSB7XG4gICAgICAgIGl0ZW1zID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkoYXJjaGV0eXBlLnN5c3RlbS5za2lsbHMpXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBpdGVtcy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbXNbaW5kZXhdLCB7IGlzQXJjaGV0eXBlRGVmYXVsdDogdHJ1ZSwgYXJjaGV0eXBlVG9nZ2xlOiB0cnVlIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChOdW1iZXIodGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1heCkgPiAwKSB7XG4gICAgICAgIGNvbnN0IG5hbWVDcmVkaXRSYXRpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5rZXlzLicgKyB0aGlzLmNvY2lkQ3JlZGl0UmF0aW5nKVxuICAgICAgICBjb25zdCBmbGFncyA9IHsgaXNPY2N1cGF0aW9uRGVmYXVsdDogdHJ1ZSwgb2NjdXBhdGlvblRvZ2dsZTogdHJ1ZSwgaXNDcmVkaXRSYXRpbmc6IHRydWUgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNbdGhpcy5jb2NpZENyZWRpdFJhdGluZ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KHRoaXMub2JqZWN0LnNraWxsSXRlbXNbdGhpcy5jb2NpZENyZWRpdFJhdGluZ10uaXRlbSwgZmxhZ3MpXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNbbmFtZUNyZWRpdFJhdGluZ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KHRoaXMub2JqZWN0LnNraWxsSXRlbXNbbmFtZUNyZWRpdFJhdGluZ10uaXRlbSwgZmxhZ3MpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKHRoaXMuY29jaWRDcmVkaXRSYXRpbmcpXG4gICAgICAgICAgaWYgKHNraWxsLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KHNraWxsWzBdLCBmbGFncylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfb25EcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY0tleSkge1xuICAgICAgY29uc3QgZHJhZ0RhdGEgPSB7IHR5cGU6ICdpbnZlc3RpZ2F0b3JDaGFyYWN0ZXJpc3RpYycsIGtleTogZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5LCB2YWx1ZTogZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnZhbHVlIH1cbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGFMaXN0ID0gSlNPTi5wYXJzZShldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpKVxuICAgICAgaWYgKHR5cGVvZiBkYXRhTGlzdC50eXBlICE9PSAndW5kZWZpbmVkJyAmJiBkYXRhTGlzdC50eXBlID09PSAnaW52ZXN0aWdhdG9yQ2hhcmFjdGVyaXN0aWMnKSB7XG4gICAgICAgIGRhdGFMaXN0LmRlc3RpbmF0aW9uID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY0tleVxuICAgICAgICBkYXRhTGlzdC5va2F5ID0gZmFsc2VcbiAgICAgICAgaWYgKGRhdGFMaXN0LmtleSA9PT0gJy0nICYmIHR5cGVvZiB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLm9iamVjdC5wbGFjZWFibGUuaW5kZXhPZihwYXJzZUludChkYXRhTGlzdC52YWx1ZSwgMTApKVxuICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUucHVzaChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0sIDEwKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3QuZGVzdGluYXRpb25dID0gcGFyc2VJbnQoZGF0YUxpc3QudmFsdWUsIDEwKVxuICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5zb3J0KCkucmV2ZXJzZSgpXG4gICAgICAgICAgZGF0YUxpc3Qub2theSA9IHRydWVcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgZGF0YUxpc3QuZGVzdGluYXRpb24gPT09ICctJykge1xuICAgICAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldICE9PSAnJykge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnB1c2gocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSwgMTApKVxuICAgICAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSA9ICcnXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUuc29ydCgpLnJldmVyc2UoKVxuICAgICAgICAgICAgZGF0YUxpc3Qub2theSA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgdGVtcCA9ICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldID09PSAnJyA/ICcnIDogcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSwgMTApKVxuICAgICAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gPSAodGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3QuZGVzdGluYXRpb25dID09PSAnJyA/ICcnIDogcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3QuZGVzdGluYXRpb25dLCAxMCkpXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3QuZGVzdGluYXRpb25dID0gdGVtcFxuICAgICAgICAgIGRhdGFMaXN0Lm9rYXkgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGFMaXN0Lm9rYXkpIHtcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgfVxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuICAgIGlmIChbdGhpcy5wYWdlTGlzdC5QQUdFX0FSQ0hFVFlQRV9TS0lMTFMsIHRoaXMucGFnZUxpc3QuUEFHRV9PQ0NVUEFUSU9OX1NLSUxMU10uaW5jbHVkZXModGhpcy5vYmplY3Quc3RlcCkpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgdGhpcy5hZGRJdGVtVG9MaXN0KGl0ZW0pXG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vbkNsaWNrU2tpbGxTcGVjaWFsIChldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gIH1cblxuICBfb25DbGlja1JlbW92ZVNraWxsIChldmVudCkge1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3Qga2V5ID0gZXZlbnQuY3VycmVudFRhcmdldD8ucGFyZW50Tm9kZT8uZGF0YXNldD8ua2V5XG4gICAgY29uc3QgaW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0Py5wYXJlbnROb2RlPy5kYXRhc2V0Py5pbmRleFxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldPy5yb3dzW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLnNwbGljZShpbmRleCwgaW5kZXgpXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZVNraWxsIChldmVudCkge1xuICAgIGNvbnN0IGtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LmtleVxuICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8uaW5kZXhcbiAgICBjb25zdCB0b2dnbGVLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py50b2dnbGVLZXlcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XT8ucm93c1tpbmRleF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bdG9nZ2xlS2V5XSA9ICF0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bdG9nZ2xlS2V5XVxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25DbGlja1BpY2tTa2lsbCAoZXZlbnQpIHtcbiAgICBjb25zdCBrZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py5rZXlcbiAgICBjb25zdCBpbmRleCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LmluZGV4XG4gICAgY29uc3QgdG9nZ2xlS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8udG9nZ2xlS2V5XG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bdG9nZ2xlS2V5XSA9IGZhbHNlXG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgICBsZXQgc2tpbGxMaXN0ID0gW11cbiAgICAgIGNvbnN0IGdyb3VwID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmd1ZXNzR3JvdXBGcm9tS2V5KGtleSlcbiAgICAgIGlmIChncm91cCkge1xuICAgICAgICBza2lsbExpc3QgPSAoYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoZ3JvdXApICsgJy4rJCcpLCB0eXBlOiAnaScgfSkpLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgICByZXR1cm4gIShpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmICEhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSB8fCBpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5waWNrbmFtZW9ubHkpKVxuICAgICAgICB9KVxuICAgICAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHNraWxsRGF0YSA9IGF3YWl0IFNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgc2tpbGxzOiBza2lsbExpc3QsXG4gICAgICAgIGFsbG93Q3VzdG9tOiAodGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSA/PyBmYWxzZSksXG4gICAgICAgIGZpeGVkQmFzZVZhbHVlOiB0cnVlLFxuICAgICAgICBzcGVjaWFsaXphdGlvbk5hbWU6IHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbixcbiAgICAgICAgbGFiZWw6IHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLm5hbWVcbiAgICAgIH0pXG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBpZiAoc2tpbGxEYXRhLnNlbGVjdGVkICE9PSAnJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCA9IHNraWxsTGlzdC5maW5kKGkgPT4gaS5pZCA9PT0gc2tpbGxEYXRhLnNlbGVjdGVkKVxuICAgICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5uYW1lICE9PSAnJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCA9IHNraWxsRGF0YS5uYW1lXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdW3RvZ2dsZUtleV0gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBzZWxlY3RlZCA9IGZhbHNlXG4gICAgICAgIGlmIChza2lsbERhdGEuc2VsZWN0ZWQgIT09ICcnKSB7XG4gICAgICAgICAgc2VsZWN0ZWQgPSBza2lsbExpc3QuZmluZChpID0+IGkuaWQgPT09IHNraWxsRGF0YS5zZWxlY3RlZClcbiAgICAgICAgfSBlbHNlIGlmIChza2lsbERhdGEubmFtZSAhPT0gJycpIHtcbiAgICAgICAgICBzZWxlY3RlZCA9IHNraWxsRGF0YS5uYW1lXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MucHVzaCh7XG4gICAgICAgICAgaXNPY2N1cGF0aW9uRGVmYXVsdDogZmFsc2UsXG4gICAgICAgICAgaW5PY2N1cGF0aW9uR3JvdXA6IGZhbHNlLFxuICAgICAgICAgIGlzQXJjaGV0eXBlRGVmYXVsdDogZmFsc2UsXG4gICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IGZhbHNlLFxuICAgICAgICAgIG9jY3VwYXRpb25Ub2dnbGU6ICh0b2dnbGVLZXkgPT09ICdvY2N1cGF0aW9uVG9nZ2xlJyksXG4gICAgICAgICAgYXJjaGV0eXBlVG9nZ2xlOiAodG9nZ2xlS2V5ID09PSAnYXJjaGV0eXBlVG9nZ2xlJyksXG4gICAgICAgICAgb2NjdXBhdGlvblBvaW50czogJycsXG4gICAgICAgICAgYXJjaGV0eXBlUG9pbnRzOiAnJyxcbiAgICAgICAgICBleHBlcmllbmNlUG9pbnRzOiAnJyxcbiAgICAgICAgICBwZXJzb25hbFBvaW50czogJycsXG4gICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlU2tpbGxQb2ludHMgKGV2ZW50KSB7XG4gICAgY29uc3QgaW5wdXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgYWRqdXN0bWVudCA9IGlucHV0LmRhdGEoJ2FkanVzdG1lbnQnKVxuICAgIGNvbnN0IGxpID0gaW5wdXQuY2xvc2VzdCgnbGknKVxuICAgIGNvbnN0IGtleSA9IGxpLmRhdGEoJ2tleScpXG4gICAgY29uc3QgaW5kZXggPSBsaS5kYXRhKCdpbmRleCcpXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0/LnJvd3NbaW5kZXhdW2FkanVzdG1lbnRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdW2FkanVzdG1lbnRdID0gaW5wdXQudmFsKClcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYW5nZUJhY2tzdG9yeVRleHQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGV4dGFyZWEgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgaW5kZXggPSB0ZXh0YXJlYS5kYXRhKCdpbmRleCcpXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWUgPSB0ZXh0YXJlYS52YWwoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxCYWNrc3RvcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IGluZGV4ID0gYnV0dG9uLmRhdGEoJ2luZGV4JylcbiAgICBjb25zdCBrZXkgPSBidXR0b24uZGF0YSgna2V5JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHJvbGx0YWJsZSA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSUQoa2V5KVxuICAgICAgaWYgKHJvbGx0YWJsZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3QgdGFibGVSZXN1bHQgPSBhd2FpdCByb2xsdGFibGVbMF0ucm9sbCgpXG4gICAgICAgIGlmICh0YWJsZVJlc3VsdC5yZXN1bHRzWzBdLnR5cGUgPT09IENPTlNULlRBQkxFX1JFU1VMVF9UWVBFUy5URVhUKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLnZhbHVlID0gKHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSArICdcXG4nICsgdGFibGVSZXN1bHQucmVzdWx0c1swXS50ZXh0LnRyaW0oKSkudHJpbSgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0QmFja3N0b3J5IChldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBpbmRleCA9IGJ1dHRvbi5kYXRhKCdpbmRleCcpXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWUgPSAnJ1xuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEx1Y2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgc2V0dXAgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Quc2V0dXApXG4gICAgaWYgKHNldHVwKSB7XG4gICAgICBjb25zdCBkaWUgPSBhd2FpdCBuZXcgUm9sbChzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmx1Y2sudG9TdHJpbmcoKSkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMubHVjayA9IFtkaWUudG90YWxdXG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoUm9sbC5DSEFUX1RFTVBMQVRFLCB7XG4gICAgICAgIGZvcm11bGE6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbnZlc3RpZ2F0b3JXaXphcmQuUm9sbFR3aWNlRm9yTHVjaycpICsgJzogJyArIHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMubHVjay50b1N0cmluZygpLFxuICAgICAgICB0b29sdGlwOiBhd2FpdCBkaWUuZ2V0VG9vbHRpcCgpLFxuICAgICAgICB0b3RhbDogZGllLnRvdGFsXG4gICAgICB9KVxuICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIHdoaXNwZXI6IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgICB9KVxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Sb2xsRWR1IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKCF0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS5yb2xsZWQgJiYgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUudG90YWwpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHMuZWR1LCAxMClcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IFtdXG4gICAgICAgIGZvciAobGV0IHJvbGxzID0gdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUudG90YWw7IHJvbGxzID4gMDsgcm9sbHMtLSkge1xuICAgICAgICAgIGNvbnN0IGRpZSA9IGF3YWl0IG5ldyBSb2xsKCcxZDEwMCcpLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICBpZiAoZGllLnRvdGFsID4gdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGF1Z21lbnREaWUgPSBhd2FpdCBuZXcgUm9sbCgnMWQxMCcpLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgIG1lc3NhZ2UucHVzaChgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3LkRldlN1Y2Nlc3MnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbTogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRWR1Y2F0aW9uJyksXG4gICAgICAgICAgICAgICAgZGllOiBkaWUudG90YWwsXG4gICAgICAgICAgICAgICAgc2NvcmU6IHZhbHVlLFxuICAgICAgICAgICAgICAgIGF1Z21lbnQ6IGF1Z21lbnREaWUudG90YWxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKX08L3NwYW4+PGJyPmApXG4gICAgICAgICAgICB2YWx1ZSA9IHZhbHVlICsgcGFyc2VJbnQoYXVnbWVudERpZS50b3RhbCwgMTApXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lc3NhZ2UucHVzaChgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLWZhaWxlZFwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2RmFpbHVyZScsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5FZHVjYXRpb24nKSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogdmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKX08L3NwYW4+PGJyPmApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbEFsbDREZXYnKSxcbiAgICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgICAgc3BlYWtlcjoge1xuICAgICAgICAgICAgYWxpYXM6IGdhbWUudXNlci5uYW1lXG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLmpvaW4oJycpLFxuICAgICAgICAgIHdoaXNwZXI6IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzLmVkdSA9IHZhbHVlIC0gcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHMuZWR1LCAxMClcbiAgICAgICAgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUucm9sbGVkID0gdHJ1ZVxuICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxBbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHJvbGxzID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdycsICdlZHUnLCAnbHVjayddKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhrZXkpXG4gICAgICBpZiAocmVzdWx0ICE9PSBmYWxzZSkge1xuICAgICAgICByb2xscy5wdXNoKHJlc3VsdClcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yb2xsTWVzc2FnZShyb2xscylcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYzEwIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGlmICh0eXBlb2YgbGkuZGF0YXNldC5vZmZzZXQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1pbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWF4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlPZmZzZXQobGkuZGF0YXNldC5vZmZzZXQsIDEwLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAxMClcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgMSwgbGkuZGF0YXNldC5taW4sIGxpLmRhdGFzZXQubWF4KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpLmRhdGFzZXQua2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlDaGFyYWN0ZXJpc3RpYyhsaS5kYXRhc2V0LmtleSwgMSlcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgLTEsIGxpLmRhdGFzZXQubWluLCBsaS5kYXRhc2V0Lm1heClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaS5kYXRhc2V0LmtleSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5Q2hhcmFjdGVyaXN0aWMobGkuZGF0YXNldC5rZXksIC0xKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYzEwIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGlmICh0eXBlb2YgbGkuZGF0YXNldC5vZmZzZXQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1pbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWF4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlPZmZzZXQobGkuZGF0YXNldC5vZmZzZXQsIC0xMCwgbGkuZGF0YXNldC5taW4sIGxpLmRhdGFzZXQubWF4KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpLmRhdGFzZXQua2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlDaGFyYWN0ZXJpc3RpYyhsaS5kYXRhc2V0LmtleSwgLTEwKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgbW9kaWZ5T2Zmc2V0IChrZXksIHZhbHVlLCBtaW4sIG1heCkge1xuICAgIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0gPSBNYXRoLm1heChNYXRoLm1pbihwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkgKyB2YWx1ZSwgcGFyc2VJbnQobWF4LCAxMCkpLCBwYXJzZUludChtaW4sIDEwKSlcbiAgfVxuXG4gIG1vZGlmeUNoYXJhY3RlcmlzdGljIChrZXksIHZhbHVlKSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpICsgdmFsdWVcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICAgIGlmIChyZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICB0aGlzLnJvbGxNZXNzYWdlKFtyZXN1bHRdKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgcm9sbENoYXJhY3RlcmlzdGljIChrZXkpIHtcbiAgICBjb25zdCBsaSA9ICQoYCNpbnZlc3RpZ2F0b3Itd2l6YXJkLWFwcGxpY2F0aW9uIGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaS5maW5kKCdpbnB1dCcpXG4gICAgY29uc3QgZm9ybXVsYSA9IGxpLmRhdGEoJ3JvbGwnKVxuICAgIGlmIChpbnB1dCAmJiBmb3JtdWxhKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3QucmVyb2xsc0VuYWJsZWQgfHwgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSA9PT0gJycpIHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGZvcm11bGEudG9TdHJpbmcoKSlcbiAgICAgICAgYXdhaXQgcm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGlucHV0LnZhbChyb2xsLnRvdGFsKVxuICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID0gTnVtYmVyKHJvbGwudG90YWwpXG4gICAgICAgIHJldHVybiBba2V5LCBmb3JtdWxhLnRvU3RyaW5nKCksIHJvbGxdXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF9vbkNoYW5nZVN1Ym1pdCBtZXRob2QuXG4gICAqL1xuICBfb25DaGFuZ2VTdWJtaXQgKGV2ZW50KSB7XG4gICAgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gIH1cblxuICBfb25DaGFuZ2VTYXZlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IG5hbWUgPSBvYmoucHJvcCgnbmFtZScpXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tuYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW25hbWVdID0gb2JqLnZhbCgpXG4gICAgICBsZXQgZW1wdGllcyA9IGZhbHNlXG4gICAgICBsZXQgdG90YWwgPSAwXG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cFBvaW50cykge1xuICAgICAgICBpZiAodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSAhPT0gJycpIHtcbiAgICAgICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcbiAgICAgICAgICAgIHRvdGFsICs9IHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbXB0aWVzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBvYmpUb3RhbCA9IG9iai5jbG9zZXN0KCdvbC5pdGVtLWxpc3QnKS5maW5kKCdzcGFuLnRvdGFsJylcbiAgICAgIGNvbnN0IG1heCA9IHBhcnNlSW50KG9ialRvdGFsLnNpYmxpbmdzKCdzcGFuLnZhbHVlJykudGV4dCgpLCAxMClcbiAgICAgIG9ialRvdGFsLnRleHQodG90YWwpXG4gICAgICBpZiAodG90YWwgPT09IG1heCAmJiAhZW1wdGllcykge1xuICAgICAgICBpZiAob2JqLmNsb3Nlc3QoJ2Zvcm0nKS5maW5kKCdidXR0b24uc3VibWl0LWJ1dHRvbltkYXRhLWJ1dHRvbj1uZXh0XScpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChvYmouY2xvc2VzdCgnZm9ybScpLmZpbmQoJ2J1dHRvbi5zdWJtaXQtYnV0dG9uW2RhdGEtYnV0dG9uPW5leHRdJykubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXRQYWdlTnVtYmVyIChkaXJlY3Rpb24pIHtcbiAgICBjb25zdCBwYWdlT3JkZXIgPSB0aGlzLnBhZ2VPcmRlclxuICAgIGNvbnN0IGtleSA9IHBhcnNlSW50KE9iamVjdC5rZXlzKHBhZ2VPcmRlcikuZmluZChrZXkgPT4gcGFnZU9yZGVyW2tleV0gPT09IHRoaXMub2JqZWN0LnN0ZXApLCAxMCkgKyBkaXJlY3Rpb25cbiAgICByZXR1cm4gcGFnZU9yZGVyW2tleV1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGVcbiAgICogQSBzdWJjbGFzcyBvZiB0aGUgRm9ybUFwcGxpY2F0aW9uIG11c3QgaW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZC5cbiAgICovXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGlmIChbJ2JhY2snLCAnbmV4dCddLmluY2x1ZGVzKGV2ZW50LnN1Ym1pdHRlcj8uZGF0YXNldC5idXR0b24pKSB7XG4gICAgICBpZiAoZXZlbnQuc3VibWl0dGVyLmNsYXNzTmFtZS5pbmRleE9mKCdjdXJyZW50bHktc3VibWl0dGluZycpID4gLTEpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lID0gZXZlbnQuc3VibWl0dGVyLmNsYXNzTmFtZSArICcgY3VycmVudGx5LXN1Ym1pdHRpbmcnXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtc2V0dXAnXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGZvcm1EYXRhWyd3b3JsZC1lcmEnXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGZvcm1EYXRhWydkZWZhdWx0LW93bmVyc2hpcCddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LmRlZmF1bHRTZXR1cCAhPT0gZm9ybURhdGFbJ2RlZmF1bHQtc2V0dXAnXSkge1xuICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0U2V0dXAgPSBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFNldHVwJywgdGhpcy5vYmplY3QuZGVmYXVsdFNldHVwKVxuICAgICAgICB0aGlzLm9iamVjdC5zZXR1cCA9IHRoaXMub2JqZWN0LmRlZmF1bHRTZXR1cFxuICAgICAgICB0aGlzLmNsZWFyU2V0dXBQb2ludHMoKVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMub2JqZWN0LmRlZmF1bHRPd25lcnNoaXAgIT09IGZvcm1EYXRhWydkZWZhdWx0LW93bmVyc2hpcCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRPd25lcnNoaXAgPSBmb3JtRGF0YVsnZGVmYXVsdC1vd25lcnNoaXAnXVxuICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRPd25lcnNoaXAnLCB0aGlzLm9iamVjdC5kZWZhdWx0T3duZXJzaGlwKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMub2JqZWN0LmRlZmF1bHRFcmEgIT09IGZvcm1EYXRhWyd3b3JsZC1lcmEnXSkge1xuICAgICAgICBjb25zdCBvYmogPSAkKHRoaXMuZWxlbWVudC5maW5kKCdmb3JtJykpXG4gICAgICAgIGNvbnN0IHN0YXJ0ZWQgPSBEYXRlLm5vdygpXG4gICAgICAgIG9iai5maW5kKCcuZGlhbG9nLWJ1dHRvbnM6Zmlyc3QnKS5oaWRlKClcbiAgICAgICAgb2JqLmZpbmQoJy5zY3JvbGxzZWN0aW9uOmZpcnN0JykuaGlkZSgpXG4gICAgICAgIG9iai5maW5kKCcuZXJhY2hhbmdlOmZpcnN0Jykuc2hvdygpXG4gICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRFcmEgPSBmb3JtRGF0YVsnd29ybGQtZXJhJ11cbiAgICAgICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnd29ybGRFcmEnLCB0aGlzLm9iamVjdC5kZWZhdWx0RXJhKVxuICAgICAgICB0aGlzLm9iamVjdC5jYWNoZUNvQ0lEID0gYXdhaXQgQ29DN0ludmVzdGlnYXRvcldpemFyZC5sb2FkQ2FjaGVJdGVtQnlDb0NJRCgpXG4gICAgICAgIC8vIFRvIHByZXZlbnQgZmxhc2hpbmcgc2hvdyBtZXNzYWdlIGZvciBhdCBsZWFzdCA1MDAgbXNcbiAgICAgICAgY29uc3QgYnVmZmVyID0gNTAwIC0gKERhdGUubm93KCkgLSBzdGFydGVkKVxuICAgICAgICAvLyBEb24ndCBib3RoZXIgaWYgbGVzcyB0aGFuIDEwbXMgcmVtYWluaW5nXG4gICAgICAgIGlmIChidWZmZXIgPiAxMCkge1xuICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBidWZmZXIpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoKHR5cGVvZiBmb3JtRGF0YVsnY2hhcmFjdGVyaXN0aWNzLW1ldGhvZCddICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IE51bWJlcihmb3JtRGF0YVsnY2hhcmFjdGVyaXN0aWNzLW1ldGhvZCddKVxuICAgICAgICBpZiAodHlwZSA9PT0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9ERUZBVUxUKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZW5mb3JjZVBvaW50QnV5ID0gZmFsc2VcbiAgICAgICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMgPSBbXVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IHRoaXMuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfUE9JTlRTKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZW5mb3JjZVBvaW50QnV5ID0gdHJ1ZVxuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFtdXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9WQUxVRVMpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSBmYWxzZVxuICAgICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMgPSBbOTAsIDgwLCA3MCwgNjAsIDYwLCA1MCwgNTAsIDQwXVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMgPSBbODAsIDcwLCA2MCwgNjAsIDUwLCA1MCwgNTAsIDQwXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRQb2ludEJ1eScsIHRoaXMub2JqZWN0LmVuZm9yY2VQb2ludEJ1eSlcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVpY2tGaXJlJywgdGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzKVxuICAgICAgfVxuICAgICAgdGhpcy5vYmplY3QucmVyb2xsc0VuYWJsZWQgPSAodHlwZW9mIGZvcm1EYXRhWydyZXJvbGxzLWVuYWJsZWQnXSA9PT0gJ3N0cmluZycpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRSZXJvbGxzJywgdGhpcy5vYmplY3QucmVyb2xsc0VuYWJsZWQpXG4gICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMubGVuZ3RoOyBpIDwgaW07IGkrKykge1xuICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIoZm9ybURhdGFbJ3F1aWNrLWZpcmUtdmFsdWVzLScgKyBpXSlcbiAgICAgICAgaWYgKG51bSA+IDApIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXNbaV0gPSBudW1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzLnNvcnQoKS5yZXZlcnNlKClcbiAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcylcbiAgICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtZW5hYmxlZCddID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5LnRvU3RyaW5nKCkgPT09ICcwJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSA9IDFcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScsIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkgPSBmb3JtRGF0YVsnZGVmYXVsdC1xdWFudGl0eSddXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknLCB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5LnRvU3RyaW5nKCkgIT09ICcwJykge1xuICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkgPSAwXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JywgdGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2Mtc2V0dXAnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cCAhPT0gZm9ybURhdGFbJ2NvYy1zZXR1cCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwID0gZm9ybURhdGFbJ2NvYy1zZXR1cCddXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5hcmNoZXR5cGUgIT09IGZvcm1EYXRhWydjb2MtYXJjaGV0eXBlJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuYXJjaGV0eXBlID0gZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXVxuICAgICAgICB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgPSAnJ1xuICAgICAgICB0aGlzLmNsZWFyU2V0dXBQb2ludHMoKVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0Lm9jY3VwYXRpb24gIT09IGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0Lm9jY3VwYXRpb24gPSBmb3JtRGF0YVsnY29jLW9jY3VwYXRpb24nXVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cFBvaW50cykge1xuICAgICAgICBpZiAodHlwZW9mIGZvcm1EYXRhW2tleV0gIT09ICd1bmRlZmluZWQnICYmIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gIT09IGZvcm1EYXRhW2tleV0pIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID0gZm9ybURhdGFba2V5XVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgIT09IGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyA9IGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcylcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgZmxhdEtleXMgPSBbJ25hbWUnLCAnYWdlJywgJ3Jlc2lkZW5jZScsICdiaXJ0aHBsYWNlJywgJ2xhbmd1YWdlJywgJ2F2YXRhcicsICd0b2tlbiddXG4gICAgZm9yIChjb25zdCBrZXkgb2YgZmxhdEtleXMpIHtcbiAgICAgIGlmICh0eXBlb2YgZm9ybURhdGFba2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5vYmplY3Rba2V5XSAhPT0gZm9ybURhdGFba2V5XSkge1xuICAgICAgICB0aGlzLm9iamVjdFtrZXldID0gZm9ybURhdGFba2V5XVxuICAgICAgICBpZiAoa2V5ID09PSAnYWdlJykge1xuICAgICAgICAgIHRoaXMuZ2V0QWdlQWRqdXN0bWVudHMoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChldmVudC5zdWJtaXR0ZXI/LmRhdGFzZXQuYnV0dG9uID09PSAnYmFjaycpIHtcbiAgICAgIGNvbnN0IHBhZ2VOdW1iZXIgPSB0aGlzLmdldFBhZ2VOdW1iZXIoLTEpXG4gICAgICBpZiAodHlwZW9mIHBhZ2VOdW1iZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnN0ZXAgPSBwYWdlTnVtYmVyXG4gICAgICAgIC8vIFdoZW4gbW92aW5nIHN0ZXAgcmVzZXQgc2Nyb2xsIGhlaWdodFxuICAgICAgICBjb25zdCBvYmogPSB0aGlzLmVsZW1lbnQuZmluZCgnLnNjcm9sbHNlY3Rpb24nKVxuICAgICAgICBpZiAob2JqLmxlbmd0aCAmJiBvYmpbMF0uc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgb2JqWzBdLnNjcm9sbFRvcCA9IDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZXZlbnQuc3VibWl0dGVyPy5kYXRhc2V0LmJ1dHRvbiA9PT0gJ25leHQnKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3Quc3RlcCA9PT0gdGhpcy5wYWdlTGlzdC5QQUdFX0NSRUFURSB8fCAodGhpcy5vYmplY3Quc3RlcCA9PT0gdGhpcy5wYWdlTGlzdC5QQUdFX0JBQ0tTVE9SWSAmJiBnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZSkpIHtcbiAgICAgICAgdGhpcy5hdHRlbXB0VG9DcmVhdGUoKVxuICAgICAgICByZXR1cm5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHBhZ2VOdW1iZXIgPSB0aGlzLmdldFBhZ2VOdW1iZXIoMSlcbiAgICAgICAgaWYgKHR5cGVvZiBwYWdlTnVtYmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnN0ZXAgPSBwYWdlTnVtYmVyXG4gICAgICAgICAgLy8gV2hlbiBtb3Zpbmcgc3RlcCByZXNldCBzY3JvbGwgaGVpZ2h0XG4gICAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5lbGVtZW50LmZpbmQoJy5zY3JvbGxzZWN0aW9uJylcbiAgICAgICAgICBpZiAob2JqLmxlbmd0aCAmJiBvYmpbMF0uc2Nyb2xsVG9wKSB7XG4gICAgICAgICAgICBvYmpbMF0uc2Nyb2xsVG9wID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgYXR0ZW1wdFRvQ3JlYXRlICgpIHtcbiAgICBjb25zdCBhY3RvckRhdGEgPSBhd2FpdCB0aGlzLm5vcm1hbGl6ZUNoYXJhY3RlckRhdGEodGhpcy5vYmplY3QpXG4gICAgaWYgKGdhbWUudXNlci5pc0dNIHx8IGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGF3YWl0IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQuY3JlYXRlQ2hhcmFjdGVyKGFjdG9yRGF0YSlcbiAgICAgIGFjdG9yLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGtlZXBlcnMgPSBnYW1lLnVzZXJzLmZpbHRlcih1ID0+IHUuYWN0aXZlICYmIHUuaXNHTSlcbiAgICAgIGlmIChrZWVwZXJzLmxlbmd0aCkge1xuICAgICAgICBhY3RvckRhdGEub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3Rlci13aXphcmQnLFxuICAgICAgICAgIGxpc3RlbmVyOiBrZWVwZXJzWzBdLmlkLFxuICAgICAgICAgIHBheWxvYWQ6IGFjdG9yRGF0YVxuICAgICAgICB9XG4gICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbnZlc3RpZ2F0b3JXaXphcmQuQ3JlYXRpbmdJbnZlc3RpZ2F0b3InKVxuICAgICAgICApXG4gICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNaXNzaW5nS2VlcGVyVXNlcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBub3JtYWxpemVDaGFyYWN0ZXJEYXRhIChkYXRhKSB7XG4gICAgY29uc3Qgd2VhcG9uU2tpbGxzID0ge1xuICAgICAgbWVsZWU6IHt9LFxuICAgICAgcm5nZDoge31cbiAgICB9XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEuc2tpbGxJdGVtcykge1xuICAgICAgY29uc3Qgc2tpbGwgPSBkYXRhLnNraWxsSXRlbXNba2V5XVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IHNraWxsLnJvd3MubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IHNraWxsLnJvd3NbaW5kZXhdXG4gICAgICAgIGlmICghc2tpbGwuZmxhZ3MuaXNNdWx0aXBsZSB8fCByb3cuc2VsZWN0ZWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShza2lsbC5pdGVtKVxuICAgICAgICAgIGlmIChyb3cuc2VsZWN0ZWQgIT09IGZhbHNlICYmIHR5cGVvZiByb3cuc2VsZWN0ZWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpdGVtID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUocm93LnNlbGVjdGVkKVxuICAgICAgICAgICAgcm93LnNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJvdy5vY2N1cGF0aW9uVG9nZ2xlKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5mbGFncy5vY2N1cGF0aW9uID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocm93LmFyY2hldHlwZVRvZ2dsZSkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uZmxhZ3MuYXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgYmFzZSA9IGl0ZW0uc3lzdGVtLmJhc2VcbiAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEuc2V0dXBQb2ludHMpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKCdAJyArIGtleSwgJ2knKVxuICAgICAgICAgICAgICBiYXNlID0gYmFzZS5yZXBsYWNlKHJlZ0V4LCBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgIGJhc2UgPSBNYXRoLmZsb29yKG5ldyBSb2xsKGJhc2UpLmV2YWx1YXRlKHsgYXN5bmM6IGZhbHNlIH0pLnRvdGFsKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtLnN5c3RlbS5iYXNlID0gYmFzZVxuICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzID0gaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMgPz8ge31cbiAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5wZXJzb25hbFBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cy5wZXJzb25hbCA9IHBhcnNlSW50KHJvdy5wZXJzb25hbFBvaW50cywgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChOdW1iZXIocm93Lm9jY3VwYXRpb25Qb2ludHMpID4gMCkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMub2NjdXBhdGlvbiA9IHBhcnNlSW50KHJvdy5vY2N1cGF0aW9uUG9pbnRzLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKE51bWJlcihyb3cuYXJjaGV0eXBlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmFyY2hldHlwZSA9IHBhcnNlSW50KHJvdy5hcmNoZXR5cGVQb2ludHMsIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5leHBlcmllbmNlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UgPSBwYXJzZUludChyb3cuZXhwZXJpZW5jZVBvaW50cywgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuY29jaWRMYW5ndWFnZU93bikge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID0gZGF0YS5sYW5ndWFnZVxuICAgICAgICAgICAgaXRlbS5uYW1lID0gaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygcm93LnNlbGVjdGVkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID0gcm93LnNlbGVjdGVkXG4gICAgICAgICAgICBpdGVtLl9pZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoKVxuICAgICAgICAgICAgaXRlbS5uYW1lID0gaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0uZmxhZ3MuQ29DNz8uY29jaWRGbGFnPy5pZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5ndWVzc0lkKGl0ZW0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5maWdodGluZykge1xuICAgICAgICAgICAgd2VhcG9uU2tpbGxzLm1lbGVlW2l0ZW0ubmFtZV0gPSBpdGVtLl9pZFxuICAgICAgICAgICAgd2VhcG9uU2tpbGxzLm1lbGVlW2l0ZW0uc3lzdGVtLnNraWxsTmFtZV0gPSBpdGVtLl9pZFxuICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uZmlyZWFybSkge1xuICAgICAgICAgICAgd2VhcG9uU2tpbGxzLnJuZ2RbaXRlbS5uYW1lXSA9IGl0ZW0uX2lkXG4gICAgICAgICAgICB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLnN5c3RlbS5za2lsbE5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbXMucHVzaChpdGVtKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qgc291cmNlSXRlbSBvZiBkYXRhLmludmVzdGlnYXRvckl0ZW1zKSB7XG4gICAgICBjb25zdCBpdGVtID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoc291cmNlSXRlbSlcbiAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2VhcG9uU2tpbGxzLm1lbGVlW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHdlYXBvblNraWxscy5tZWxlZVtpdGVtLnN5c3RlbS5za2lsbC5tYWluLm5hbWVdXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkID0gd2VhcG9uU2tpbGxzLm1lbGVlW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLnN5c3RlbS5za2lsbC5tYWluLm5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsLm1haW4uaWQgPSB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLnN5c3RlbS5za2lsbC5tYWluLm5hbWVdXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgPSB3ZWFwb25Ta2lsbHMucm5nZFtpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWVdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGl0ZW1zLnB1c2goaXRlbSlcbiAgICB9XG4gICAgbGV0IG1vbmV0YXJ5ID0ge31cbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5zZXR1cClcbiAgICBpZiAoc2V0dXApIHtcbiAgICAgIG1vbmV0YXJ5ID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoc2V0dXAuc3lzdGVtLm1vbmV0YXJ5KVxuICAgIH1cbiAgICBjb25zdCBkZXZlbG9wbWVudCA9IHtcbiAgICAgIHBlcnNvbmFsOiAyICogKHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmludCwgMTApKSxcbiAgICAgIG9jY3VwYXRpb246IDAsXG4gICAgICBhcmNoZXR5cGU6IDBcbiAgICB9XG4gICAgaWYgKGRhdGEuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgY29uc3QgYXJjaGV0eXBlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRChkYXRhLmFyY2hldHlwZSlcbiAgICAgIGlmIChhcmNoZXR5cGUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGl0ZW1zLnB1c2goYXJjaGV0eXBlWzBdLnRvT2JqZWN0KCkpXG4gICAgICAgIGRldmVsb3BtZW50LmFyY2hldHlwZSA9IGFyY2hldHlwZVswXS5zeXN0ZW0uYm9udXNQb2ludHNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRhdGEub2NjdXBhdGlvbiAhPT0gJycpIHtcbiAgICAgIGNvbnN0IG9jY3VwYXRpb24gPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKGRhdGEub2NjdXBhdGlvbilcbiAgICAgIGlmIChvY2N1cGF0aW9uLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpdGVtcy5wdXNoKG9jY3VwYXRpb25bMF0udG9PYmplY3QoKSlcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb25bMF0uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgICAgICBvcHRpb25zLnB1c2goY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRldmVsb3BtZW50Lm9jY3VwYXRpb24gKz0gY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZGV2ZWxvcG1lbnQub2NjdXBhdGlvbiArPSBNYXRoLm1heCguLi5vcHRpb25zKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGJpb2dyYXBoeSA9IFtdXG4gICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGRhdGEuYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICBiaW9ncmFwaHkucHVzaCh7XG4gICAgICAgIHRpdGxlOiBkYXRhLmJpb1NlY3Rpb25zW2luZGV4XS5uYW1lLFxuICAgICAgICB2YWx1ZTogZGF0YS5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWVcbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHtcbiAgICAgIHR5cGU6ICdjaGFyYWN0ZXInLFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgaW1nOiBkYXRhLmF2YXRhcixcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IHtcbiAgICAgICAgICBzdHI6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnN0ciwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5zdHIsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29uOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5jb24sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuY29uLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpejoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuc2l6LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLnNpeiwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXg6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmRleCwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5kZXgsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXBwOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5hcHAsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuYXBwLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGludDoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmludCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3c6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnBvdywgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5wb3csIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5lZHUsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuZWR1LCAxMClcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgICBsY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBNYXRoLm1heChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmx1Y2ssIDEwKSwgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5sdWNrLCAxMCkpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzYW46IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnBvdywgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5wb3csIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5mb3M6IHtcbiAgICAgICAgICBhZ2U6IGRhdGEuYWdlLFxuICAgICAgICAgIHJlc2lkZW5jZTogZGF0YS5yZXNpZGVuY2UsXG4gICAgICAgICAgYmlydGhwbGFjZTogZGF0YS5iaXJ0aHBsYWNlXG4gICAgICAgIH0sXG4gICAgICAgIGRldmVsb3BtZW50LFxuICAgICAgICBiaW9ncmFwaHksXG4gICAgICAgIG1vbmV0YXJ5XG4gICAgICB9LFxuICAgICAgcHJvdG90eXBlVG9rZW46IHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhY3Rvckxpbms6IHRydWUsXG4gICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICBzcmM6IGRhdGEudG9rZW5cbiAgICAgICAgfSxcbiAgICAgICAgZGlzcG9zaXRpb246IENPTlNULlRPS0VOX0RJU1BPU0lUSU9OUy5GUklFTkRMWSxcbiAgICAgICAgc2lnaHQ6IHtcbiAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpdGVtcyxcbiAgICAgIG93bmVyc2hpcDoge1xuICAgICAgICBkZWZhdWx0OiBwYXJzZUludChkYXRhLmRlZmF1bHRPd25lcnNoaXAsIDEwKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0b3JEYXRhXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQ2hhcmFjdGVyRnJvbURhdGEgKGFjdG9yRGF0YSkge1xuICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGVDaGFyYWN0ZXIoYWN0b3JEYXRhKVxuICAgIGNvbnN0IGZ1bmN0aW9uSWQgPSBIb29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgICAgIGlmIChhcHAub2JqZWN0LmlkID09PSBhY3Rvci5pZCkge1xuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgICAgICB0eXBlOiAnb3Blbi1jaGFyYWN0ZXInLFxuICAgICAgICAgIGxpc3RlbmVyOiBPYmplY3Qua2V5cyhhY3RvckRhdGEub3duZXJzaGlwKS5maW5kKGsgPT4gayAhPT0gJ2RlZmF1bHQnKSxcbiAgICAgICAgICBwYXlsb2FkOiBhY3Rvci5pZFxuICAgICAgICB9KVxuICAgICAgICBIb29rcy5vZmYoJ3JlbmRlckFjdG9yU2hlZXQnLCBmdW5jdGlvbklkKVxuICAgICAgfVxuICAgIH0pXG4gICAgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQ2hhcmFjdGVyIChhY3RvckRhdGEpIHtcbiAgICBjb25zdCBhY3RvciA9IGF3YWl0IEFjdG9yLmNyZWF0ZShhY3RvckRhdGEpXG4gICAgYXdhaXQgYWN0b3IudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6IGFjdG9yLnJhd0hwTWF4LFxuICAgICAgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzogYWN0b3IucmF3TXBNYXgsXG4gICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLm1heCc6IGFjdG9yLnJhd01wTWF4XG4gICAgfSlcbiAgICBhd2FpdCBhY3Rvci5yZXNldERhaWx5U2FuaXR5KClcbiAgICByZXR1cm4gYWN0b3JcbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGUgaXQncyB0aGUgZGVmYXVsdCB3YXkgdG8gY3JlYXRlIHRoZSBDb0M3Q2hhcmFjdGVyV2l6YXJkXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICAvLyBUcnkgYW5kIHByZXJlcXVzdCBhcyBtYW55IENvQ0lEcyBkdWUgdG8gdGhlIHdheSB0aGV5IGhhdmUgdG8gYmUgbG9hZGVkXG4gICAgb3B0aW9ucyA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoe1xuICAgICAgc3RlcDogMCxcbiAgICAgIGRlZmF1bHRTZXR1cDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnKSxcbiAgICAgIGRlZmF1bHRRdWFudGl0eTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknKSxcbiAgICAgIGRlZmF1bHRPd25lcnNoaXA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZE93bmVyc2hpcCcpLFxuICAgICAgZGVmYXVsdEVyYTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKSxcbiAgICAgIHJlcm9sbHNFbmFibGVkOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRSZXJvbGxzJyksXG4gICAgICBlbmZvcmNlUG9pbnRCdXk6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFBvaW50QnV5JyksXG4gICAgICBxdWlja0ZpcmVWYWx1ZXM6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1aWNrRmlyZScpLFxuICAgICAgcGxhY2VhYmxlOiBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWlja0ZpcmUnKSksXG4gICAgICBjYWNoZUNvQ0lEOiBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmxvYWRDYWNoZUl0ZW1CeUNvQ0lEKCksXG4gICAgICBjYWNoZUJhY2tzdG9yaWVzOiBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IC9ecnRcXC5cXC5iYWNrc3RvcnktLywgdHlwZTogJ3J0JyB9KSxcbiAgICAgIGNhY2hlSXRlbXM6IHt9LFxuICAgICAgc2V0dXA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFNldHVwJyksXG4gICAgICBza2lsbEl0ZW1zOiB7fSxcbiAgICAgIG9jY3VwYXRpb25Hcm91cHM6IHt9LFxuICAgICAgaW52ZXN0aWdhdG9ySXRlbXM6IFtdLFxuICAgICAgc2V0dXBQb2ludHM6IHtcbiAgICAgICAgc3RyOiAnJyxcbiAgICAgICAgY29uOiAnJyxcbiAgICAgICAgc2l6OiAnJyxcbiAgICAgICAgZGV4OiAnJyxcbiAgICAgICAgYXBwOiAnJyxcbiAgICAgICAgaW50OiAnJyxcbiAgICAgICAgcG93OiAnJyxcbiAgICAgICAgZWR1OiAnJyxcbiAgICAgICAgbHVjazogJydcbiAgICAgIH0sXG4gICAgICBzZXR1cE1vZGlmaWVyczoge1xuICAgICAgICBzdHI6IDAsXG4gICAgICAgIGNvbjogMCxcbiAgICAgICAgc2l6OiAwLFxuICAgICAgICBkZXg6IDAsXG4gICAgICAgIGFwcDogMCxcbiAgICAgICAgaW50OiAwLFxuICAgICAgICBwb3c6IDAsXG4gICAgICAgIGVkdTogMCxcbiAgICAgICAgbHVjazogMFxuICAgICAgfSxcbiAgICAgIGFyY2hldHlwZTogJycsXG4gICAgICBjb3JlQ2hhcmFjdGVyaXN0aWM6ICcnLFxuICAgICAgb2NjdXBhdGlvbjogJycsXG4gICAgICBiaW9TZWN0aW9uczogW10sXG4gICAgICBwZXJzb25hbDogMCxcbiAgICAgIHBlcnNvbmFsVGV4dDogJycsXG4gICAgICBjcmVkaXRSYXRpbmc6IHtcbiAgICAgICAgbWluOiAwLFxuICAgICAgICBtYXg6IDBcbiAgICAgIH0sXG4gICAgICBuYW1lOiAnJyxcbiAgICAgIGFnZTogJycsXG4gICAgICByZXF1aXJlc0FnZUFkanVzdG1lbnRzOiBmYWxzZSxcbiAgICAgIHJlc2lkZW5jZTogJycsXG4gICAgICBiaXJ0aHBsYWNlOiAnJyxcbiAgICAgIGxhbmd1YWdlOiAnJyxcbiAgICAgIGF2YXRhcjogJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnLFxuICAgICAgdG9rZW46ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJ1xuICAgIH0sIG9wdGlvbnMpXG4gICAgbmV3IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQob3B0aW9ucykucmVuZGVyKHRydWUpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIGZvdW5kcnksIGdhbWUsIFBsYWNlYWJsZXNMYXllciAqL1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuL2NoYXQuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyB9IGZyb20gJy4vYXBwcy9hY3Rvci1pbXBvcnRlci1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3Q29udGVudExpbmtEaWFsb2cgfSBmcm9tICcuL2FwcHMvY29jNy1jb250ZW50LWxpbmstZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0ludmVzdGlnYXRvcldpemFyZCB9IGZyb20gJy4vYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkLmpzJ1xuXG5jbGFzcyBDb0M3TWVudUxheWVyIGV4dGVuZHMgUGxhY2VhYmxlc0xheWVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLm9iamVjdHMgPSB7fVxuICB9XG5cbiAgc3RhdGljIGdldCBsYXllck9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmxheWVyT3B0aW9ucywge1xuICAgICAgbmFtZTogJ2NvYzdtZW51JyxcbiAgICAgIHpJbmRleDogNjBcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGdldCBkb2N1bWVudE5hbWUgKCkge1xuICAgIHJldHVybiAnVG9rZW4nXG4gIH1cblxuICBnZXQgcGxhY2VhYmxlcyAoKSB7XG4gICAgcmV0dXJuIFtdXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdNZW51IHtcbiAgc3RhdGljIGdldEJ1dHRvbnMgKGNvbnRyb2xzKSB7XG4gICAgY2FudmFzLmNvYzdnbXRvb2xzID0gbmV3IENvQzdNZW51TGF5ZXIoKVxuICAgIGNvbnN0IGlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBjb25zdCBzaG93SGlkZGVuRGV2TWVudSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKVxuICAgIGNvbnRyb2xzLnB1c2goe1xuICAgICAgbmFtZTogJ2NvYzdtZW51JyxcbiAgICAgIHRpdGxlOiAnQ29DNy5HbVRvb2xzJyxcbiAgICAgIGxheWVyOiAnY29jN2dtdG9vbHMnLFxuICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tdGVudGFjbGUtc3RyaWtlJyxcbiAgICAgIHZpc2libGU6IGlzS2VlcGVyLFxuICAgICAgdG9vbHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLWFuZ2xlLWRvdWJsZS11cCcsXG4gICAgICAgICAgbmFtZTogJ2RldnBoYXNlJyxcbiAgICAgICAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5EZXZQaGFzZScsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgdG9nZ2xlID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlRGV2UGhhc2UodG9nZ2xlKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtdXNlci1lZGl0JyxcbiAgICAgICAgICBuYW1lOiAnY2hhcmNyZWF0ZScsXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJyksXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkNoYXJDcmVhdGlvbk1vZGUnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIHRvZ2dsZSA9PlxuICAgICAgICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVDaGFyQ3JlYXRpb24odG9nZ2xlKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtdXNlci1wbHVzJyxcbiAgICAgICAgICBuYW1lOiAnYWN0b3ItaW1wb3J0JyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuQWN0b3JJbXBvcnRlcicsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4gYXdhaXQgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuY3JlYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLXVzZXItY2hlY2snLFxuICAgICAgICAgIG5hbWU6ICdpbnZlc3RpZ2F0b3Itd2l6YXJkJyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuSW52ZXN0aWdhdG9yV2l6YXJkLlRpdGxlJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1jZXJ0aWZpY2F0ZScsXG4gICAgICAgICAgY2xhc3M6ICd4cF90b2dnbGUnLFxuICAgICAgICAgIG5hbWU6ICd4cHRvZ2dsZScsXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcudG9nZ2xlWFAnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIHRvZ2dsZSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZVhQR2Fpbih0b2dnbGUpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tY2FyZC1qb2tlcicsXG4gICAgICAgICAgbmFtZTogJ2Zha2Vyb2xsJyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuRmFrZVJvbGwnLFxuICAgICAgICAgIG9uQ2xpY2s6IENvQzdDaGF0LmZha2VSb2xsTWVzc2FnZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtbW9vbicsXG4gICAgICAgICAgbmFtZTogJ3N0YXJ0cmVzdCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LnN0YXJ0UmVzdCcsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXRUYXJnZXQoKVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgICBpZiAoc2hvd0hpZGRlbkRldk1lbnUpIHtcbiAgICAgIGNhbnZhcy5jb2M3RGV2VG9vbHMgPSBuZXcgQ29DN01lbnVMYXllcigpXG4gICAgICBjb250cm9scy5wdXNoKHtcbiAgICAgICAgbmFtZTogJ2NvYzdEZXZNZW51JyxcbiAgICAgICAgdGl0bGU6XG4gICAgICAgICAgXCJEZXYgdG9vbHMuIElmIHlvdSBkb24ndCBrbm93IHdoYXQgaXQgaXMsIHlvdSBkb24ndCBuZWVkIGl0IGFuZCB5b3Ugc2hvdWxkbid0IHVzZSBpdCAhIVwiLFxuICAgICAgICBsYXllcjogJ2NvYzdEZXZUb29scycsXG4gICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLXBvbGljZS1iYWRnZScsXG4gICAgICAgIHZpc2libGU6IGlzS2VlcGVyLFxuICAgICAgICB0b29sczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLWRpY2UtZmlyZScsXG4gICAgICAgICAgICBuYW1lOiAnYWx3YXlzQ3JpdCcsXG4gICAgICAgICAgICBhY3RpdmU6IGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNDcml0LFxuICAgICAgICAgICAgdGl0bGU6ICdBbGwgcm9sbHMgd2lsbCBjcml0JyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUgPSBmYWxzZVxuICAgICAgICAgICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzQ3JpdCA9IHRvZ2dsZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tZmlyZS1leHRpbmd1aXNoZXInLFxuICAgICAgICAgICAgbmFtZTogJ2Fsd2F5c0Z1bWJsZScsXG4gICAgICAgICAgICBhY3RpdmU6IGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUsXG4gICAgICAgICAgICB0aXRsZTogJ0FsbCByb2xscyB3aWxsIGZ1bWJsZScsXG4gICAgICAgICAgICBvbkNsaWNrOiB0b2dnbGUgPT4ge1xuICAgICAgICAgICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzRnVtYmxlID0gdG9nZ2xlXG4gICAgICAgICAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNDcml0ID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHJlbmRlckNvbnRyb2xzIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICBjb25zdCBpc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgY29uc3Qga2VlcGVyTWVudSA9IGh0bWwuZmluZCgnLmdhbWUtaWNvbi10ZW50YWNsZS1zdHJpa2UnKS5wYXJlbnQoKVxuICAgIGtlZXBlck1lbnUuYWRkQ2xhc3MoJ2NvYzctbWVudScpXG4gICAgaWYgKGlzS2VlcGVyKSB7XG4gICAgICBrZWVwZXJNZW51LmFmdGVyKFxuICAgICAgICAnPGxpIGNsYXNzPVwic2NlbmUtY29udHJvbCBjb2M3LW1lbnUgY29jNy1jcmVhdGUtbGlua1wiIHRpdGxlPVwiJyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyZWF0ZUxpbmsnKSArXG4gICAgICAgICAgJ1wiPjxpIGNsYXNzPVwiZmFzIGZhLWxpbmtcIj48L2k+PC9saT4nXG4gICAgICApXG4gICAgfVxuICAgIGtlZXBlck1lbnUuYWZ0ZXIoXG4gICAgICAnPGxpIGNsYXNzPVwic2NlbmUtY29udHJvbCBjb2M3LW1lbnUgY29jNy1kaWNlLXJvbGxcIiB0aXRsZT1cIicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpY2UnKSArXG4gICAgICAgICdcIj48aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tZDEwXCI+PC9pPjwvbGk+J1xuICAgIClcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmNvYzctbWVudS5jb2M3LWRpY2Utcm9sbCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gQ29DN1V0aWxpdGllcy5yb2xsRGljZShldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5jb2M3LW1lbnUuY29jNy1jcmVhdGUtbGluaycpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZShldmVudCkpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi9jb2M3LWxpbmsuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2FudmFzIHtcbiAgc3RhdGljIGdldCBDT0M3X1RZUEVTX1NVUFBPUlRFRCAoKSB7XG4gICAgcmV0dXJuIFsnQ29DN0xpbmsnLCAnbG9jYXRvcicsICdnZXRUb2tlbiddXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgb25Ecm9wU29tZXRoaW5nIChjYW52YXMsIGRhdGEpIHtcbiAgICBpZiAoXG4gICAgICBkYXRhLnR5cGUgJiZcbiAgICAgIENvQzdDYW52YXMuQ09DN19UWVBFU19TVVBQT1JURUQuaW5jbHVkZXMoZGF0YS50eXBlKVxuICAgICkge1xuICAgICAgY29uc3QgZ3JpZFNpemUgPSBjYW52YXMuc2NlbmUuZ3JpZC5zaXplXG4gICAgICBjb25zdCB4ID0gZGF0YS54IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCB5ID0gZGF0YS55IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCBoZWlnaHQgPSBncmlkU2l6ZVxuICAgICAgY29uc3Qgd2lkdGggPSBncmlkU2l6ZVxuICAgICAgbGV0IGRyb3BUYXJnZXRUb2tlbnMgPSBjYW52YXMudG9rZW5zLnBsYWNlYWJsZXMuZmlsdGVyKG9iaiA9PiB7XG4gICAgICAgIGNvbnN0IGMgPSBvYmouY2VudGVyXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy54LCB4LCB4ICsgd2lkdGgpICYmXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy55LCB5LCB5ICsgaGVpZ2h0KVxuICAgICAgICApXG4gICAgICB9KSAvLyBGaW5kIGRyb3AgdGFyZ2V0LlxuICAgICAgaWYgKCFkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkgZHJvcFRhcmdldFRva2VucyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCAvLyBJZiBubyB0YXJnZXQgd2hpc3BlciB0byBzZWxlY3RlZCB0b2tlblxuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnQ29DN0xpbmsnOlxuICAgICAgICAgIGlmIChkYXRhLmNoZWNrID09PSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCkge1xuICAgICAgICAgICAgaWYgKGRyb3BUYXJnZXRUb2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgZHJvcFRhcmdldFRva2Vucykge1xuICAgICAgICAgICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKHRva2VuLmFjdG9yLCBkYXRhKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBBcHBseSB0byBldmVyeW9uZSA/IG9yIG9ubHkgcGxheWVycyA/IG9yIG5vYm9keVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZHJvcFRhcmdldFRva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UoZGF0YSwgZHJvcFRhcmdldFRva2Vucy5maWx0ZXIodCA9PiB0LmFjdG9yLm93bmVycy5sZW5ndGgpLm1hcCh0ID0+IHQuYWN0b3IpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb0M3TGluay50b1doaXNwZXJNZXNzYWdlKGRhdGEsIGdhbWUudXNlcnMucGxheWVycy5maWx0ZXIodSA9PiAhIXUuY2hhcmFjdGVyKS5tYXAodSA9PiB1LmNoYXJhY3RlcikpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2dldFRva2VuJzpcbiAgICAgICAgICBpZiAodHlwZW9mIGRhdGEuYXBwSWQgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkYXRhLmNhbGxCYWNrID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgdWkud2luZG93c1tkYXRhLmFwcElkXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHVpLndpbmRvd3NbZGF0YS5hcHBJZF1bZGF0YS5jYWxsQmFja10gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHVpLndpbmRvd3NbZGF0YS5hcHBJZF1bZGF0YS5jYWxsQmFja10oZHJvcFRhcmdldFRva2VucylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICAvLyBIYW5kbGVzIGdlbmVyaWMgY2FudmEgZHJvcC5cbiAgICAgICAgLy8gZGF0YVRyYW5zZmVyIG11c3QgaW5jbHVkZSA6XG4gICAgICAgIC8vIC0gZG9jVXVpZCA6IHRoZSBVdWlkIG9mIHRoZSBkb2N1bWVudCB0byBjYWxsXG4gICAgICAgIC8vIC0gY2FsbEJhY2sgOiB0aGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24gdG8gY2FsbCBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICAgIC8vIFVzZWQgdG8gc2VsZWN0IGxvY2F0aW9uIGZvciBjaGFzZVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGlmIChkYXRhLmRvY1V1aWQgJiYgZGF0YS5jYWxsQmFjaykge1xuICAgICAgICAgICAgY29uc3QgZG9jID0gQ29DN1V0aWxpdGllcy5TZnJvbVV1aWQoZGF0YS5kb2NVdWlkKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBkb2NbZGF0YS5jYWxsQmFja10gJiZcbiAgICAgICAgICAgICAgdHlwZW9mIGRvY1tkYXRhLmNhbGxCYWNrXSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZGF0YS5zY2VuZSA9IGNhbnZhcy5zY2VuZS51dWlkXG4gICAgICAgICAgICAgICAgZG9jW2RhdGEuY2FsbEJhY2tdKGRhdGEpXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycm9yLm1lc3NhZ2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcsIERpYWxvZywgZ2FtZSwgU2V0dGluZ3MgKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2V0dGluZ3NEaXJlY3RvcnkgZXh0ZW5kcyBTZXR0aW5ncyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJyNzZXR0aW5ncy1nYW1lJylcbiAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cInRyaWdnZXItZGF0YS1taWdyYXRpb25cIj48aSBjbGFzcz1cImZhcyBmYS13cmVuY2hcIj48L2k+ICcgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVHJpZ2dlckJ1dHRvbicpICtcbiAgICAgICAgICAgICc8L2J1dHRvbj4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnI3NldHRpbmdzLWRvY3VtZW50YXRpb24nKVxuICAgICAgICAuYXBwZW5kKCc8YnV0dG9uIGNsYXNzPVwidHJpZ2dlci1zeXN0ZW0tbWFudWFsXCI+PGkgY2xhc3M9XCJmYXMgZmEtYm9va3NcIj48L2k+ICcgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3lzdGVtLkRvY3VtZW50YXRpb24nKSArXG4gICAgICAgICc8L2J1dHRvbj4nKVxuICAgICAgaHRtbC5maW5kKCcudHJpZ2dlci1kYXRhLW1pZ3JhdGlvbicpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgbmV3IERpYWxvZyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVHJpZ2dlclRpdGxlJyksXG4gICAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyQ29udGVudHMnKSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgbWlncmF0ZToge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyUmVzdGFydCcpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgMClcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2xvc2U6IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtYmFuXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ2FuY2VsJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHt9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2xvc2UnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7fVxuICAgICAgICApLnJlbmRlcih0cnVlKVxuICAgICAgfSlcbiAgICAgIGh0bWwuZmluZCgnLnRyaWdnZXItc3lzdGVtLW1hbnVhbCcpLmNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgKGF3YWl0IGdhbWUucGFja3MuZ2V0KCdDb0M3LnN5c3RlbS1kb2MnKS5nZXREb2N1bWVudChDT05GSUcuQ29DNy5NYW51YWwpKT8uc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENvbXBlbmRpdW1EaXJlY3RvcnksIERpYWxvZywgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDb21wZW5kaXVtRGlyZWN0b3J5IGV4dGVuZHMgQ29tcGVuZGl1bURpcmVjdG9yeSB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBsZXQgdHJhbnNsYXRlZCA9IGZhbHNlXG4gICAgaWYgKGdhbWUuaTE4bi5sYW5nID09PSAnZW4nKSB7XG4gICAgICB0cmFuc2xhdGVkID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGdhbWUuYmFiZWxlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCB2IG9mIE9iamVjdC52YWx1ZXMoZ2FtZS5iYWJlbGUubW9kdWxlcykpIHtcbiAgICAgICAgaWYgKHYubGFuZyA9PT0gZ2FtZS5pMThuLmxhbmcpIHtcbiAgICAgICAgICB0cmFuc2xhdGVkID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdHJhbnNsYXRlZCkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxuICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICc8YSBjbGFzcz1cImNvbXBlbmRpdW0tdHJhbnNsYXRpb25cIiB0aXRsZT1cIicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlVGl0bGUnKSArXG4gICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpICtcbiAgICAgICAgICAgICc8L2E+J1xuICAgICAgICApXG4gICAgICBodG1sLmZpbmQoJy5jb21wZW5kaXVtLXRyYW5zbGF0aW9uJykuY2xpY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlV2FybmluZycpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVJbnN0YWxsQmFiZWxlJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUluc3RhbGxUcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVFbmFibGVUcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVOb1RyYW5zbGF0aW9uJykgK1xuICAgICAgICAgICc8L3A+J1xuICAgICAgICBuZXcgRGlhbG9nKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpLFxuICAgICAgICAgICAgY29udGVudDogbWVzc2FnZSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgICAgZGVmYXVsdDogJ2Nsb3NlJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAge31cbiAgICAgICAgKS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3JEaXJlY3RvcnksIENPTlNULCBnYW1lICovXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyB9IGZyb20gJy4vYXBwcy9hY3Rvci1pbXBvcnRlci1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkIH0gZnJvbSAnLi9hcHBzL2ludmVzdGlnYXRvci13aXphcmQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JEaXJlY3RvcnkgZXh0ZW5kcyBBY3RvckRpcmVjdG9yeSB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIC8vIEFsbG93IEludmVzdGlnYXRvciBXaXphcmRcbiAgICAvLyAgKiBJZiB0aGUgdXNlciByb2xlIGlzIGFsbG93ZWQgdG8gY3JlYXRlIGFjdG9yc1xuICAgIC8vICAqIElmIHRoZSB1c2VyIGhhcyBsZXNzIG93bmVkIGFjdG9ycyB0aGFuIGFsbG93ZWQgaW4gc2V0dGluZ3NcbiAgICBsZXQgYWxsb3dXaXphcmQgPSBnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZVxuICAgIGlmICghYWxsb3dXaXphcmQpIHtcbiAgICAgIGNvbnN0IGFsbG93ZWQgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScpXG4gICAgICBpZiAoYWxsb3dlZCA+IDApIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBnYW1lLmFjdG9ycy5maWx0ZXIoYSA9PiBbYS5vd25lcnNoaXAuZGVmYXVsdCwgKGEub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FKV0uaW5jbHVkZXMoQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUikpLmxlbmd0aFxuICAgICAgICBhbGxvd1dpemFyZCA9IGV4aXN0aW5nIDwgYWxsb3dlZFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhbGxvd1dpemFyZCkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxuICAgICAgICAuYXBwZW5kKCc8YSBjbGFzcz1cImludmVzdGlnYXRvci13aXphcmRcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5UaXRsZScpICsgJzwvYT4nKVxuICAgICAgaHRtbC5maW5kKCcuaW52ZXN0aWdhdG9yLXdpemFyZCcpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGUoKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLnJvbGUgPj0gQ09OU1QuVVNFUl9QRVJNSVNTSU9OUy5BQ1RPUl9DUkVBVEUuZGVmYXVsdFJvbGUpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ2Zvb3Rlci5kaXJlY3RvcnktZm9vdGVyJylcbiAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAnPGEgY2xhc3M9XCJhY3Rvci1pbXBvcnRcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyJykgK1xuICAgICAgICAgICAgJzwvYT4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnLmFjdG9yLWltcG9ydCcpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuY3JlYXRlKClcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdEZWNhZGVyRFNORmFjZXMge1xuICBjb25zdHJ1dG9yICgpIHtcbiAgICB0aGlzLnNlbGVjdGVkID0gJydcbiAgfVxuXG4gIHNldEZhY2VzICgpIHtcbiAgICBsZXQgc2VsZWN0ZWQgPSBnYW1lLnVzZXIuZ2V0RmxhZygnZGljZS1zby1uaWNlJywgJ2FwcGVhcmFuY2UnKT8uZ2xvYmFsXG4gICAgICAuc3lzdGVtXG4gICAgaWYgKHNlbGVjdGVkICE9PSB0aGlzLnNlbGVjdGVkKSB7XG4gICAgICBsZXQgZGF0YVxuICAgICAgbGV0IGRlc3RpbmF0aW9uXG4gICAgICBsZXQgc291cmNlRGllID0gZ2FtZS5kaWNlM2QuRGljZUZhY3Rvcnkuc3lzdGVtc1tzZWxlY3RlZF0/LmRpY2UuZmluZChcbiAgICAgICAgZCA9PiBkLnR5cGUgPT09ICdkMTAwJ1xuICAgICAgKVxuICAgICAgaWYgKHR5cGVvZiBzb3VyY2VEaWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNvdXJjZURpZSA9IGdhbWUuZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXMuc3RhbmRhcmQuZGljZS5maW5kKFxuICAgICAgICAgIGQgPT4gZC50eXBlID09PSAnZDEwMCdcbiAgICAgICAgKVxuICAgICAgICBzZWxlY3RlZCA9ICdzdGFuZGFyZCdcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygc291cmNlRGllICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBkZXN0aW5hdGlvbiA9IGdhbWUuZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXMuc3RhbmRhcmQuZGljZS5maW5kSW5kZXgoXG4gICAgICAgICAgZCA9PiBkLnR5cGUgPT09ICdkdCdcbiAgICAgICAgKVxuICAgICAgICBkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgc291cmNlRGllKVxuICAgICAgICBkYXRhLnR5cGUgPSAnZHQnXG4gICAgICAgIGdhbWUuZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXMuc3RhbmRhcmQuZGljZVtkZXN0aW5hdGlvbl0gPVxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oc291cmNlRGllLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgZGF0YSlcbiAgICAgIH1cbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3RlZFxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBEaWFsb2csIGZvdW5kcnksIGdhbWUsIFJvbGwsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NwZWxsIGV4dGVuZHMgQ29DN0l0ZW0ge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3BlbnRhZ3JhbS1yb3NlLnN2ZydcbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0XG4gIH1cblxuICBhc3luYyBjYXN0ICgpIHtcbiAgICBpZiAoIXRoaXMuaXNPd25lZCkge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfVxuICAgIGNvbnN0IGNvc3RzID0gdGhpcy5zeXN0ZW0uY29zdHNcbiAgICBjb25zdCBsb3NzZXMgPSBbXVxuICAgIGxldCBjb252ZXJ0U3VycGx1c0ludG9IaXRQb2ludHNcbiAgICBjb3N0cy5tYWdpY1BvaW50cyA9IENvQzdVdGlsaXRpZXMuaXNGb3JtdWxhKGNvc3RzLm1hZ2ljUG9pbnRzKVxuICAgICAgPyAoYXdhaXQgbmV3IFJvbGwoY29zdHMubWFnaWNQb2ludHMpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgIDogcGFyc2VJbnQoY29zdHMubWFnaWNQb2ludHMpXG4gICAgaWYgKFxuICAgICAgY29zdHMubWFnaWNQb2ludHMgJiZcbiAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzID4gdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZVxuICAgICkge1xuICAgICAgY29udmVydFN1cnBsdXNJbnRvSGl0UG9pbnRzID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnZlcnRlZEhpdFBvaW50cyA9XG4gICAgICAgICAgY29zdHMubWFnaWNQb2ludHMgLSB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlXG4gICAgICAgIGNvbnN0IGNvbnZlcnRlZE1hZ2ljUG9pbnRzID0gY29zdHMubWFnaWNQb2ludHMgLSBjb252ZXJ0ZWRIaXRQb2ludHNcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0aXRsZTogJyAnLFxuICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTm90RW5vdWdoTWFnaWNQb2ludHMnLCB7XG4gICAgICAgICAgICBhY3Rvck1hZ2ljUG9pbnRzOiB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlLFxuICAgICAgICAgICAgY29udmVydGVkSGl0UG9pbnRzLFxuICAgICAgICAgICAgY29udmVydGVkTWFnaWNQb2ludHMsXG4gICAgICAgICAgICBvcmlnaW5hbE1hZ2ljUG9pbnRzOiBjb3N0cy5tYWdpY1BvaW50cyxcbiAgICAgICAgICAgIHNwZWxsOiB0aGlzLm5hbWVcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICBjYW5jZWw6IHtcbiAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2FuY2VsJyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9jZWVkOiB7XG4gICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlByb2NlZWQnKSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb3N0cy5oaXRQb2ludHMgPSBjb252ZXJ0ZWRIaXRQb2ludHNcbiAgICAgICAgICAgICAgICBjb3N0cy5tYWdpY1BvaW50cyA9IGNvbnZlcnRlZE1hZ2ljUG9pbnRzXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVmYXVsdDogJ2NhbmNlbCcsXG4gICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZyddXG4gICAgICAgIH1cbiAgICAgICAgbmV3IERpYWxvZyhkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgICBpZiAoIWNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cykgcmV0dXJuXG4gICAgfVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNvc3RzKSkge1xuICAgICAgaWYgKCF2YWx1ZSB8fCBOdW1iZXIodmFsdWUpID09PSAwKSBjb250aW51ZVxuICAgICAgbG9zc2VzLnB1c2goYXdhaXQgdGhpcy5yZXNvbHZlTG9zc2VzKGtleSwgdmFsdWUpKVxuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL2NoYXQuaHRtbCdcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7IGRlc2NyaXB0aW9uLCBsb3NzZXMgfSlcbiAgICByZXR1cm4gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogdGhpcy5uYW1lLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNvbHZlTG9zc2VzIChjaGFyYWN0ZXJpc3RpYywgdmFsdWUpIHtcbiAgICBsZXQgY2hhcmFjdGVyaXN0aWNOYW1lXG4gICAgbGV0IGxvc3NcbiAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEodmFsdWUpKSB7XG4gICAgICBsb3NzID0gKGF3YWl0IG5ldyBSb2xsKHZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgfSBlbHNlIHtcbiAgICAgIGxvc3MgPSBwYXJzZUludCh2YWx1ZSlcbiAgICB9XG4gICAgY29uc3QgYWN0b3JEYXRhID0gdGhpcy5hY3Rvci5zeXN0ZW1cbiAgICBzd2l0Y2ggKGNoYXJhY3RlcmlzdGljKSB7XG4gICAgICBjYXNlICdoaXRQb2ludHMnOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGl0UG9pbnRzJylcbiAgICAgICAgdGhpcy5hY3Rvci5kZWFsRGFtYWdlKGxvc3MsIHsgaWdub3JlQXJtb3I6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Nhbml0eSc6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHlQb2ludHMnKVxuICAgICAgICB0aGlzLmdyYW50U2FuaXR5TG9zcyhsb3NzKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbWFnaWNQb2ludHMnOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFnaWNQb2ludHMnKVxuICAgICAgICB0aGlzLmFjdG9yLnNldE1wKGFjdG9yRGF0YS5hdHRyaWJzLm1wLnZhbHVlIC0gbG9zcylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Bvd2VyJzpcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUG93ZXInKVxuICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlJzpcbiAgICAgICAgICAgIGFjdG9yRGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC0gbG9zc1xuICAgICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4geyBjaGFyYWN0ZXJpc3RpY05hbWUsIGxvc3MgfVxuICB9XG5cbiAgLyoqIEJ5cGFzcyB0aGUgU2FuaXR5IGNoZWNrIGFuZCBqdXN0IHJvbGwgdGhlIGRhbWFnZSAqL1xuICBhc3luYyBncmFudFNhbml0eUxvc3MgKHZhbHVlKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DYXN0aW5nU3BlbGwnLCB7XG4gICAgICAgIHNwZWxsOiB0aGlzLm5hbWVcbiAgICAgIH0pLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH0pXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IG1lc3NhZ2UuZ2V0SFRNTCgpXG4gICAgaWYgKHR5cGVvZiBjYXJkLmxlbmd0aCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2FyZC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3MgPSB2YWx1ZVxuICAgICAgaHRtbCA9IGNhcmQuZmluZCgnLmNoYXQtY2FyZCcpWzBdXG4gICAgICBodG1sLmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuaWQsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGZhbHNlLFxuICAgICAgICAgIHNhbkRhdGE6IHtcbiAgICAgICAgICAgIHNhbk1pbjogc2FuaXR5TG9zcyxcbiAgICAgICAgICAgIHNhbk1heDogc2FuaXR5TG9zc1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIGNvbnN0IHNhbml0eUNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGh0bWwpXG4gICAgICBhd2FpdCBzYW5pdHlDaGVjay5ieXBhc3NSb2xsU2FuKClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLnJvbGxTYW5Mb3NzKClcbiAgICAgIHNhbml0eUNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGUgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5jb250ZXh0LnBhcmVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLmNvbnRleHQuYm9va0lkICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgbGV0IGl0ZW1cbiAgICAgIGxldCBib29rXG4gICAgICAvLyBsZXQgc3BlbGxEYXRhXG4gICAgICBpZiAodGhpcy5jb250ZXh0LnBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5jb250ZXh0LmJvb2tJZClcbiAgICAgICAgYm9vayA9IGl0ZW0udG9PYmplY3QoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYm9vayA9IHRoaXMuY29udGV4dC5wYXJlbnQuaXRlbXMuZ2V0KHRoaXMuY29udGV4dC5ib29rSWQpLnRvT2JqZWN0KClcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IGJvb2suc3lzdGVtLnNwZWxscy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGlmIChib29rLnN5c3RlbS5zcGVsbHNbaV0uX2lkID09PSB0aGlzLmlkKSB7XG4gICAgICAgICAgYm9vay5zeXN0ZW0uc3BlbGxzW2ldID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChib29rLnN5c3RlbS5zcGVsbHNbaV0sIGRhdGEpXG4gICAgICAgICAgLy8gc3BlbGxEYXRhID0gYm9vay5zeXN0ZW0uc3BlbGxzW2ldXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbnRleHQucGFyZW50ID09PSBudWxsKSB7XG4gICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAnc3lzdGVtLnNwZWxscyc6IGJvb2suc3lzdGVtLnNwZWxsc1xuICAgICAgICB9KVxuICAgICAgICB0aGlzLnNoZWV0Lm9iamVjdCA9IG5ldyBDb0M3U3BlbGwoXG4gICAgICAgICAgYm9vay5zeXN0ZW0uc3BlbGxzLmZpbmQoc3BlbGwgPT4gc3BlbGwuX2lkID09PSB0aGlzLmlkKSxcbiAgICAgICAgICB0aGlzLmNvbnRleHRcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jb250ZXh0LnBhcmVudC51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtib29rXSlcbiAgICAgICAgdGhpcy5zaGVldC5vYmplY3QgPSBuZXcgQ29DN1NwZWxsKFxuICAgICAgICAgIGJvb2suc3lzdGVtLnNwZWxscy5maW5kKHNwZWxsID0+IHNwZWxsLl9pZCA9PT0gdGhpcy5pZCksXG4gICAgICAgICAgdGhpcy5jb250ZXh0XG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHN1cGVyLnVwZGF0ZShkYXRhLCBjb250ZXh0KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBmb3VuZHJ5LCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3U3BlbGwgfSBmcm9tICcuLi9zcGVsbC9kYXRhLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0Jvb2sgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2VjcmV0LWJvb2suc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgLyoqIENvbnZlcnQgdGhlIGRpZmZpY3VsdHkgb24gdGhlIHNlbGVjdCBlbGVtZW50IHRvIGEgZm9ybWF0IGFjY2VwdGVkICovXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgICAgY2FzZSAnaGFyZCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICdjcml0aWNhbCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgICBjYXNlICd1bnJlYWRhYmxlJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgdGhlIGZ1dHVyZTogYWRkIGFkdmFuY2VkIHJ1bGVzIGZvciBsZWFybmluZyBzcGVsbHMsIHBnLiAxNzZcbiAgICogQHBhcmFtIFt7RG9jdW1lbnR9XSBzcGVsbHNcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgYWRkU3BlbGxzIChzcGVsbHMpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5zeXN0ZW0uc3BlbGxzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnNwZWxscylcbiAgICAgIDogW11cbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxscykge1xuICAgICAgY29sbGVjdGlvbi5wdXNoKHNwZWxsKVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnNwZWxscyc6IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIHNwZWxsRGV0YWlsIChpbmRleCkge1xuICAgIGNvbnN0IGlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBjb25zdCBkYXRhID0gdGhpcy5zeXN0ZW0uc3BlbGxzW2luZGV4XVxuICAgIGNvbnN0IHBhcmVudCA9IHRoaXMuYWN0b3IgPyB0aGlzLmFjdG9yIDogbnVsbFxuICAgIGNvbnN0IHNwZWxsID0gbmV3IENvQzdTcGVsbChkYXRhLCB7IHBhcmVudCwgYm9va0lkOiB0aGlzLmlkIH0pXG4gICAgaWYgKGlzS2VlcGVyIHx8IHNwZWxsLnN5c3RlbS5sZWFybmVkKSB7XG4gICAgICByZXR1cm4gYXdhaXQgc3BlbGwuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYWxsIHRoZSBsb2dpYyBpbnZvbHZpbmcgdGhlIGF0dGVtcHQgb2YgaW5pdGlhbCByZWFkaW5nXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBAc2VlIGxpc3RlbiBAc2VlIGdyYW50SW5pdGlhbFJlYWRpbmdcbiAgICovXG4gIGFzeW5jIGF0dGVtcHRJbml0aWFsUmVhZGluZyAoKSB7XG4gICAgLyoqIENvbnZlcnRzIHRoZSBkaWZmaWN1bHR5IHZhbHVlIHRvIHNvbWV0aGluZyBhY2NlcHRlZCBieSBDb0M3Q2hlY2sgKi9cbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0Jvb2suY29udmVydERpZmZpY3VsdHkoXG4gICAgICB0aGlzLnN5c3RlbS5kaWZmaWN1bHR5TGV2ZWxcbiAgICApXG4gICAgY29uc3QgbGFuZ3VhZ2UgPSB0aGlzLnN5c3RlbS5sYW5ndWFnZVxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uZ2V0U2tpbGxzQnlOYW1lKGxhbmd1YWdlKVxuICAgIGlmICghc2tpbGwpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH0gZWxzZSBpZiAoc2tpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAvKipcbiAgICAgICAqIFRoZSBBY3RvciB3aG8gb3ducyB0aGlzIGRvZXMgbm90IGhhdmUgdGhlIHNraWxsIG9mXG4gICAgICAgKiB0aGUgbGFuZ3VhZ2UgaW4gd2hpY2ggaXQgd2FzIHdyaXR0ZW5cbiAgICAgICAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVW5rbm93bkxhbmd1YWdlJywgeyBhY3RvcjogdGhpcy5hY3Rvci5uYW1lIH0pXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIGNoZWNrLnNraWxsID0gc2tpbGxbMF0uaWRcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjaGVjay5wYXJlbnQgPSB0aGlzLnV1aWRcbiAgICAgIGNoZWNrLmNvbnRleHQgPSAnSU5JVElBTF9SRUFESU5HJ1xuICAgICAgY2hlY2suZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWFkQXR0ZW1wdCcsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lLFxuICAgICAgICBsYW5ndWFnZSxcbiAgICAgICAgZGlmZmljdWx0eTogdGhpcy5zeXN0ZW0uZGlmZmljdWx0eUxldmVsXG4gICAgICB9KVxuICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICByZXR1cm4gYXdhaXQgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRzIGlzIGNhbGxlZCBldmVyeSB0aW1lIHRoZSB1c2VyIGludGVyYWN0cyBpbiBzb21lIHdheSB3aXRoIHByb2dyZXNzIGJhclxuICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZSAncmVzZXQnIHx8ICdpbmNyZWFzZScgfHwgJ2RlY3JlYXNlJ1xuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUganVzdCBzbyB0aGF0IHByb2dyZXNzIGlzIG5vdCBncmVhdGVyIHRoYW4gbmVjZXNzYXJ5XG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGNoYW5nZVByb2dyZXNzIChtb2RlLCB2YWx1ZSkge1xuICAgIGlmICghdGhpcy5pc093bmVkICYmIG1vZGUgIT09ICdyZXNldCcpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nICYmIG1vZGUgIT09ICdyZXNldCcpIHtcbiAgICAgIC8qKiBBY3RvciBkaWQgbm90IHBlcmZvcm1lZCBhbiBpbml0aWFsIHJlYWRpbmcgZmlyc3QgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYWxSZWFkaW5nTmVlZGVkJywge1xuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuICAgIGlmICghdGhpcy5zeXN0ZW0udHlwZS5teXRob3MgJiYgbW9kZSAhPT0gJ3Jlc2V0Jykge1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE15dGhvc1RvbWUnKSlcbiAgICB9XG4gICAgY29uc3QgbmVjZXNzYXJ5ID0gdGhpcy5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5XG4gICAgbGV0IGZ1bGxTdHVkeSA9IHRoaXMuc3lzdGVtLmZ1bGxTdHVkeVxuICAgIGxldCBwcm9ncmVzcyA9IHRoaXMuc3lzdGVtLnN0dWR5LnByb2dyZXNzXG4gICAgaWYgKGlzTmFOKHByb2dyZXNzKSkge1xuICAgICAgLyoqIEl0IHNlZW1zIGEgbGl0dGxlIGltcG9zc2libGUsIGJ1dCB5b3UgbmV2ZXIga25vdyAqL1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IDBcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICh2YWx1ZSAmJiBwcm9ncmVzcyA+IHZhbHVlKSB7XG4gICAgICAvKipcbiAgICAgICAqIFByb2dyZXNzIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB2YWx1ZSBlbnRlcmVkIGJ5IHVzZXIgYXMgbmVjZXNzYXJ5LFxuICAgICAgICogcmVzZXQgcHJvZ3Jlc3MgdG8gYmUgZXF1YWwgbmVjZXNzYXJ5IGFuZCBjb21wbGV0ZSBmdWxsIHN0dWR5XG4gICAgICAgKi9cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5mdWxsU3R1ZHknOiArK2Z1bGxTdHVkeSxcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IHZhbHVlXG4gICAgICB9KVxuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY29tcGxldGVGdWxsU3R1ZHkoKVxuICAgIH1cbiAgICBpZiAobW9kZSA9PT0gJ2luY3JlYXNlJyAmJiBwcm9ncmVzcyA8IG5lY2Vzc2FyeSkge1xuICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBwbHVzIGljb24gdG8gaW5jcmVhc2UgcHJvZ3Jlc3MgKi9cbiAgICAgIGlmICgoYXdhaXQgdGhpcy5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlKSByZXR1cm5cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6ICsrcHJvZ3Jlc3NcbiAgICAgIH0pXG4gICAgICBpZiAocHJvZ3Jlc3MgPT09IG5lY2Vzc2FyeSkge1xuICAgICAgICAvKiogQ29tcGxldGUgZnVsbCBzdHVkeSBpZiBwcm9ncmVzcyBpcyBlcXVhbCBuZWNlc3NhcnkgKi9cbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZ1bGxTdHVkeSc6ICsrZnVsbFN0dWR5IH0pXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50RnVsbFN0dWR5KClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdkZWNyZWFzZScgJiYgcHJvZ3Jlc3MgPiAwKSB7XG4gICAgICAvKiogVXNlciBjbGlja2VkIG9uIG1pbnVzIGljb24gdG8gZGVjcmVhc2UgcHJvZ3Jlc3MgKi9cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAtLXByb2dyZXNzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNoZWNrRXhoYXVzdGlvbiAoKSB7XG4gICAgY29uc3QgYWN0b3JNeXRob3NWYWx1ZSA9IHRoaXMuYWN0b3I/LmN0aHVsaHVNeXRob3NcbiAgICBjb25zdCBteXRob3NSYXRpbmcgPSB0aGlzLnN5c3RlbS5teXRob3NSYXRpbmdcbiAgICBpZiAodGhpcy5zeXN0ZW0uaW5pdGlhbFJlYWRpbmcpIHtcbiAgICAgIGlmIChhY3Rvck15dGhvc1ZhbHVlID49IG15dGhvc1JhdGluZykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IHRoaXMuc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQm9va0hhc05vdGhpbmdNb3JlVG9UZWFjaCcsIHtcbiAgICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9IGVsc2UgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ3JhbnRGdWxsU3R1ZHkgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0udHlwZS5teXRob3MpIHJldHVyblxuICAgIGlmICgoYXdhaXQgdGhpcy5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlKSByZXR1cm5cbiAgICBjb25zdCBhY3Rvck15dGhvc1ZhbHVlID0gdGhpcy5hY3Rvci5jdGh1bGh1TXl0aG9zXG4gICAgY29uc3QgZGV2ZWxvcG1lbnRzID0gW11cbiAgICBjb25zdCBteXRob3NSYXRpbmcgPSB0aGlzLnN5c3RlbS5teXRob3NSYXRpbmdcbiAgICBsZXQgbXl0aG9zRmluYWwgPSB0aGlzLnN5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmZpbmFsXG4gICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgKyBteXRob3NGaW5hbCA+IG15dGhvc1JhdGluZykge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8PSBteXRob3NGaW5hbDsgaW5kZXgrKykge1xuICAgICAgICBpZiAoYWN0b3JNeXRob3NWYWx1ZSArIG15dGhvc0ZpbmFsIC0gaW5kZXggPD0gbXl0aG9zUmF0aW5nKSB7XG4gICAgICAgICAgbXl0aG9zRmluYWwgLT0gaW5kZXhcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcmVhZGVyIGF1dG9tYXRpY2FsbHkgZ2FpbnMgYSBza2lsbCB0aWNrIGZvciB0aGVcbiAgICAgKiBsYW5ndWFnZSBpbiB3aGljaCB0aGUgYm9vayBpcyB3cml0dGVuXG4gICAgICovXG4gICAgZGV2ZWxvcG1lbnRzLnB1c2goXG4gICAgICB7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmN0aHVsaHUtbXl0aG9zJyksXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG15dGhvc0ZpbmFsKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0ubGFuZ3VhZ2UsXG4gICAgICAgIGdhaW46ICdkZXZlbG9wbWVudCdcbiAgICAgIH1cbiAgICApXG4gICAgYXdhaXQgdGhpcy5ncmFudFNraWxsRGV2ZWxvcG1lbnQoZGV2ZWxvcG1lbnRzKVxuICAgIGF3YWl0IHRoaXMucm9sbFNhbml0eUxvc3MoKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmZ1bGxTdHVkaWVzJzogKyt0aGlzLnN5c3RlbS5mdWxsU3R1ZGllc1xuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgZ3JhbnRJbml0aWFsUmVhZGluZyAoKSB7XG4gICAgLyoqIElmIGluaXRpYWwgcmVhZGluZyBoYXMgYWxyZWFkeSBiZWVuIGRvbmUgdGhlcmUgaXMgbm90aGluZyB0byBkbyBoZXJlICovXG4gICAgaWYgKHRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nKSByZXR1cm5cbiAgICBjb25zdCBkZXZlbG9wbWVudHMgPSBbXVxuICAgIGNvbnN0IG15dGhvcyA9IHtcbiAgICAgIGdhaW5zOiB0aGlzLnN5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwsXG4gICAgICB0eXBlOiB0aGlzLnN5c3RlbS50eXBlLm15dGhvc1xuICAgIH1cbiAgICBjb25zdCBvY2N1bHQgPSB7XG4gICAgICBnYWluczogdGhpcy5zeXN0ZW0uZ2FpbnMub2NjdWx0LFxuICAgICAgdHlwZTogdGhpcy5zeXN0ZW0udHlwZS5vY2N1bHRcbiAgICB9XG4gICAgY29uc3Qgb3RoZXIgPSB7XG4gICAgICBnYWluczogdGhpcy5zeXN0ZW0uZ2FpbnMub3RoZXJzLFxuICAgICAgdHlwZTogdGhpcy5zeXN0ZW0udHlwZS5vdGhlclxuICAgIH1cbiAgICBpZiAobXl0aG9zLnR5cGUgJiYgbXl0aG9zLmdhaW5zKSB7XG4gICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmN0aHVsaHUtbXl0aG9zJyksXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG15dGhvcy5nYWlucylcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChvY2N1bHQudHlwZSAmJiBvY2N1bHQuZ2FpbnMpIHtcbiAgICAgIGRldmVsb3BtZW50cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9jY3VsdCcpLFxuICAgICAgICBnYWluOiBwYXJzZUludChvY2N1bHQuZ2FpbnMpXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAob3RoZXIudHlwZSkge1xuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBvdGhlci5nYWlucykge1xuICAgICAgICBjb25zdCBwYXR0ZXJuID0gc2tpbGwubmFtZS5tYXRjaCgvXiguKykgXFwoKC4rKVxcKSQvKVxuICAgICAgICAvKiogU2FuaXRpemF0aW9uIHRvIGRlYWwgd2l0aCBzcGVjaWFsaXphdGlvbnMgKi9cbiAgICAgICAgaWYgKHBhdHRlcm4pIHtcbiAgICAgICAgICBza2lsbC5zcGVjaWFsaXphdGlvbiA9IHBhdHRlcm5bMV1cbiAgICAgICAgICBza2lsbC5uYW1lID0gcGF0dGVyblsyXVxuICAgICAgICB9XG4gICAgICAgIGlmIChza2lsbC52YWx1ZSAhPT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICAgIHNraWxsLnZhbHVlID0gKFxuICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoc2tpbGwudmFsdWUpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICkudG90YWxcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2tpbGwudmFsdWUpIHtcbiAgICAgICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBza2lsbC5uYW1lLFxuICAgICAgICAgICAgZ2Fpbjogc2tpbGwudmFsdWUsXG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogc2tpbGwuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuZ3JhbnRTa2lsbERldmVsb3BtZW50KGRldmVsb3BtZW50cylcbiAgICBpZiAoKG15dGhvcy50eXBlIHx8IG9jY3VsdC50eXBlKSAmJiB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzKSB7XG4gICAgICBhd2FpdCB0aGlzLnJvbGxTYW5pdHlMb3NzKClcbiAgICB9XG4gICAgLyoqIE1hcmsgaW5pdGlhbCByZWFkaW5nIGFzIGNvbXBsZXRlICovXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5pbml0aWFsUmVhZGluZyc6IHRydWUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0l0ZW19IHNwZWxsbGVhcm5lZCBUaGUgc3BlbGwgdGhhdCB3YXMgbGVhcm5lZCBzdWNjZXNzZnVsbHkgZnJvbSBib29rXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3luYyBncmFudFNwZWxsTGVhcm5pbmcgKHNwZWxsbGVhcm5lZCkge1xuICAgIGZvciAoY29uc3Qgc3BlbGwgb2YgdGhpcy5zeXN0ZW0uc3BlbGxzKSB7XG4gICAgICBpZiAoc3BlbGwuX2lkID09PSBzcGVsbGxlYXJuZWQuX2lkKSB7XG4gICAgICAgIHNwZWxsLnN5c3RlbS5sZWFybmVkID0gdHJ1ZVxuICAgICAgICAvLyBEb2VzIHRoZSBhY3RvciBhbHJlYWR5IGhhcyBhIHNwZWxsIG9mIHRoYXQgbmFtZT8gVGhlbiBkbyBub3QgYWRkIHRoZSBzcGVsbFxuICAgICAgICBjb25zdCBleGlzdGluZ1NwZWxsID0gYXdhaXQgdGhpcy5hY3Rvci5pdGVtcy5maW5kKFxuICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgIGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyAmJiBpdGVtLm5hbWUgPT09IHNwZWxsbGVhcm5lZC5uYW1lXG4gICAgICAgIClcbiAgICAgICAgaWYgKCFleGlzdGluZ1NwZWxsKSB7XG4gICAgICAgICAgc3BlbGxsZWFybmVkLnN5c3RlbS5sZWFybmVkID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbGxBbHJlYWR5TGVhcm5lZCcsIHtcbiAgICAgICAgICAgICAgc3BlbGw6IHNwZWxsbGVhcm5lZC5uYW1lLFxuICAgICAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNhdmUgc3BlbGwgbGlzdCBvZiBib29rXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnNwZWxscyc6IHRoaXMuc3lzdGVtLnNwZWxscyB9KVxuICAgIC8vIEFkZCBsZWFybmVkIHNwZWxsIHRvIGFjdG9yXG4gICAgaWYgKHNwZWxsbGVhcm5lZC5zeXN0ZW0ubGVhcm5lZCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZWxsU3VjY2Vzc2Z1bGx5TGVhcm5lZCcsIHtcbiAgICAgICAgICBzcGVsbDogc3BlbGxsZWFybmVkLm5hbWUsXG4gICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xuICAgICAgICBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShzcGVsbGxlYXJuZWQpXG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNlaXZlcyBhbiBBcnJheSBvZiBza2lsbHMgYW5kIGhhbmRsZXMgYWxsIHRoZSBsb2dpYyB0byBkZXZlbG9wIHRoZW1cbiAgICogQHBhcmFtIHtBcnJheX0gZGV2ZWxvcG1lbnRzIEBzZWUgZ3JhbnRJbml0aWFsUmVhZGluZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBncmFudFNraWxsRGV2ZWxvcG1lbnQgKGRldmVsb3BtZW50cykge1xuICAgIGlmIChkZXZlbG9wbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm5cbiAgICBmb3IgKGNvbnN0IGRldmVsb3BtZW50IG9mIGRldmVsb3BtZW50cykge1xuICAgICAgLyoqIFRlc3QgaWYgdGhlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvICovXG4gICAgICBpZiAoIWRldmVsb3BtZW50LmdhaW4pIGNvbnRpbnVlXG4gICAgICBsZXQgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmdldFNraWxsc0J5TmFtZShkZXZlbG9wbWVudC5uYW1lKVxuICAgICAgLyoqIFRoZSBBY3RvciBkb2VzIG5vdCBvd24gdGhpcyBza2lsbCwgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICogRmlyc3QsIGNoZWNrIGlmIHRoZXJlIGlzIGFueSBza2lsbCBpbiB0aGUgZ2FtZSB3aXRoIHRoZSBzYW1lIG5hbWVcbiAgICAgICAqIEluIHRoZSBsYXN0IGFsdGVybmF0aXZlIGp1c3QgY3JlYXRlIGEgbmV3IGdlbmVyaWMgc2tpbGxcbiAgICAgICAqL1xuICAgICAgaWYgKHNraWxsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1NraWxsID0gYXdhaXQgZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgIGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJiBpdGVtLm5hbWUgPT09IGRldmVsb3BtZW50Lm5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoZXhpc3RpbmdTa2lsbCkge1xuICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtcbiAgICAgICAgICAgIGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGV4aXN0aW5nU2tpbGwpXG4gICAgICAgICAgXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuYWN0b3IuY3JlYXRlU2tpbGwoZGV2ZWxvcG1lbnQubmFtZSwgMClcbiAgICAgICAgICBpZiAoZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHNraWxsWzBdLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICAgICAgJ3N5c3RlbS5zcGVjaWFsaXphdGlvbic6IGRldmVsb3BtZW50LnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2tpbGwgPSBza2lsbFswXVxuICAgICAgaWYgKGRldmVsb3BtZW50LmdhaW4gPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgLyoqIFNpbXBseSBtYXJrIHRoZSBza2lsbCBmb3IgZGV2ZWxvcG1lbnQgKi9cbiAgICAgICAgYXdhaXQgc2tpbGwuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIHJlY2VpdmVkIHZhbHVlIGdhaW5lZCBpcyBudW1lcmljLCBlbnN1cmUgdGhhdCB0aGUgYW1vdW50XG4gICAgICAgICAqIHdpbGwgbm90IGV4Y2VlZCB0aGUgbWF4aW11bSB2YWx1ZSBvZiA5OVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHNraWxsLnZhbHVlICsgZGV2ZWxvcG1lbnQuZ2FpbiA+IDk5KSB7XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8PSBkZXZlbG9wbWVudC5nYWluOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBpZiAoc2tpbGwudmFsdWUgKyBkZXZlbG9wbWVudC5nYWluIC0gaW5kZXggPD0gOTkpIHtcbiAgICAgICAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiAtPSBpbmRleFxuICAgICAgICAgICAgICBhd2FpdCBza2lsbC5pbmNyZWFzZUV4cGVyaWVuY2UoZGV2ZWxvcG1lbnQuZ2FpbilcbiAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGRldmVsb3BtZW50LmdhaW4pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNob3dEZXZlbG9wbWVudHNUYWJsZShkZXZlbG9wbWVudHMpXG4gIH1cblxuICAvKipcbiAgICogU3Vic2VxdWVudCBwZXJpb2RzIG9mIGZ1bGwgc3R1ZHkgbWF5IGJlIHVuZGVydGFrZW4sIHRoZSBkaWZmZXJlbmNlIGJlaW5nXG4gICAqIHRoYXQgZWFjaCBzdHVkeSB3aWxsIHRha2UgdHdpY2UgYXMgbG9uZyBhcyB0aGUgcHJldmlvdXMgb25lXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyByZWRvRnVsbFN0dWR5ICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAwIH0pXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5JzogdGhpcy5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5ICogMlxuICAgIH0pXG4gIH1cblxuICAvKiogQnlwYXNzIHRoZSBTYW5pdHkgY2hlY2sgYW5kIGp1c3Qgcm9sbCB0aGUgZGFtYWdlICovXG4gIGFzeW5jIHJvbGxTYW5pdHlMb3NzICgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc3lzdGVtLnNhbml0eUxvc3NcbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnJykgcmV0dXJuXG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWFkaW5nTXl0aG9zVG9tZScsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICB9KSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBtZXNzYWdlLmdldEhUTUwoKVxuICAgIGlmICh0eXBlb2YgY2FyZC5sZW5ndGggIT09ICd1bmRlZmluZWQnICYmIGNhcmQubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzID0gKGF3YWl0IG5ldyBSb2xsKHZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cbiAgICAgIGh0bWwuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICAgICAgc2FuRGF0YToge1xuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxuICAgICAgICAgICAgc2FuTWF4OiBzYW5pdHlMb3NzXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgY29uc3Qgc2FuaXR5Q2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgc2FuaXR5Q2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgdGFibGUgaW4gdGhlIGNoYXQgd2l0aCBhbGwgc2tpbGwgZGV2ZWxvcG1lbnRzIG9idGFpbmVkXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gZGV2ZWxvcG1lbnRzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gY3JlYXRlIENoYXRNZXNzYWdlXG4gICAqL1xuICBhc3luYyBzaG93RGV2ZWxvcG1lbnRzVGFibGUgKGRldmVsb3BtZW50cykge1xuICAgIC8qKiBQcmVwYXJlIHRoZSBBcnJheSBkYXRhIHRvIGJlIHNob3duIHRvIHRoZSBlbmQgdXNlciBpbiBjaGF0ICovXG4gICAgZm9yIChjb25zdCBkZXZlbG9wbWVudCBvZiBkZXZlbG9wbWVudHMpIHtcbiAgICAgIGlmIChkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICBkZXZlbG9wbWVudC5uYW1lID0gYCR7ZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb259ICgke2RldmVsb3BtZW50Lm5hbWV9KWBcbiAgICAgIH1cbiAgICAgIGlmIChkZXZlbG9wbWVudC5nYWluID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGRldmVsb3BtZW50LmdhaW4gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFya2VkRm9yRGV2ZWxvcG1lbnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiA9IGArJHtkZXZlbG9wbWVudC5nYWlufSAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Qb2ludHMnXG4gICAgICAgICl9YFxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svZGV2ZWxvcG1lbnQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHsgZGV2ZWxvcG1lbnRzIH0pXG4gICAgcmV0dXJuIGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHsgYWN0b3I6IHRoaXMuYWN0b3IgfSksXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuR2FpbnNGb3JSZWFkaW5nJywgeyBib29rOiB0aGlzLm5hbWUgfSksXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGF0dGVtcHRTcGVsbExlYXJuaW5nIChpZCkge1xuICAgIGlmICghdGhpcy5pc093bmVkKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZykge1xuICAgICAgLyoqIEFjdG9yIGRpZCBub3QgcGVyZm9ybWVkIGFuIGluaXRpYWwgcmVhZGluZyBmaXJzdCAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhbFJlYWRpbmdOZWVkZWQnLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gICAgY29uc3Qgc3BlbGwgPSB0aGlzLnN5c3RlbS5zcGVsbHMuZmluZChzcGVsbCA9PiB7XG4gICAgICByZXR1cm4gc3BlbGwuX2lkID09PSBpZFxuICAgIH0pXG4gICAgaWYgKHNwZWxsKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgICBjaGVjay5wYXJlbnQgPSB0aGlzLnV1aWRcbiAgICAgIGNoZWNrLmZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTGVhcm5TcGVsbEF0dGVtcHQnLCB7XG4gICAgICAgIGJvb2s6IHRoaXMubmFtZSxcbiAgICAgICAgc3BlbGw6IHNwZWxsLm5hbWVcbiAgICAgIH0pXG4gICAgICBjaGVjay5jb250ZXh0ID0gJ1NQRUxMX0xFQVJOSU5HJ1xuICAgICAgY2hlY2suc3BlbGwgPSBzcGVsbFxuICAgICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICAgICAgYXdhaXQgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICAvKiogTGlzdGVuIHRvIGNoYW5nZXMgb24gdGhlIGNoZWNrIGNhcmQgKi9cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xuICAgIGNvbnN0IGNoZWNrID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHJvbGwpXG5cbiAgICAvKiogV2lsbCBrbm93IGlmIHVzZXIgcHVzaCB0aGUgcm9sbCBvciBzcGVuZCBMdWNrICovXG4gICAgaWYgKGNoZWNrLnBhc3NlZCkge1xuICAgICAgaWYgKGNoZWNrLmNvbnRleHQgPT09ICdJTklUSUFMX1JFQURJTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50SW5pdGlhbFJlYWRpbmcoKVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5jb250ZXh0ID09PSAnU1BFTExfTEVBUk5JTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50U3BlbGxMZWFybmluZyhjaGVjay5zcGVsbClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgRm9ybURhdGFFeHRlbmRlZCwgZm91bmRyeSwgZnJvbVV1aWQsIGdhbWUsIEhvb2tzLCByZW5kZXJUZW1wbGF0ZSwgc29ja2V0bGliLCB1aSAqL1xuXG5jb25zdCBFQ0NfQ0xBU1MgPSAnZW5oYW5jZWQtY2hhdC1jYXJkJ1xuXG5jb25zdCBQRVJNSVNTSU9OX1RZUEUgPSB7XG4gIEdNOiAnZ20nLCAvLyB1c2VyIGlzIEdNXG4gIE5PVF9HTTogJyFnbScsIC8vIHVzZXIgaXMgTk9UIGdtIChoaWRlIHRvIEdNIGluIGNhc2Ugb2YgdmlzaWJpbGl0eSlcbiAgU1BFQUtFUjogJ3NwZWFrZXInLCAvLyB0aGUgc3BlYWtlciBpcyBhbiBhY3RvciBjb250cm9sZWQvb3duZWQgYnkgdGhlIHVzZXJcbiAgVVNFUjogJ3VzZXInLCAvLyB0aGUgdXNlciBpcyB0aGUgbWVzc2FnZSdzIGF1dGhvclxuICBFVkVSWU9ORTogJ2FsbCcsIC8vIGVxdWl2YWxlbnQgdG8gZW1wdHkgc3RyaW5nXG4gIEJMQUNLTElTVDogJ2JsYWNrbGlzdCcgLy8gaW52ZXJ0IHRoZSBsb2dpY1xufVxuXG5jb25zdCBTVEFURSA9IHtcbiAgT046ICdzd2l0Y2hlZC1vbicsXG4gIE9GRjogJ3N3aXRjaGVkLW9mZidcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRFQ0MgKC4uLmNhcmRjbGFzcykge1xuICAvLyBIb29rcy5vbmNlKCdpbml0JywgZnVuY3Rpb24gKCkge1xuICAvLyB9KVxuXG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TG9nJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLmluamVjdENTUyhhcHAsIGh0bWwsIGRhdGEpXG4gIClcblxuICBIb29rcy5vbmNlKCdzb2NrZXRsaWIucmVhZHknLCBmdW5jdGlvbiAoKSB7XG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5yZWdpc3RlcihjYXJkY2xhc3MpXG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQgPSBzb2NrZXRsaWIucmVnaXN0ZXJTeXN0ZW0oZ2FtZS5zeXN0ZW0uaWQpIC8vIFNvY2tldCBpcyBhdHRhY2hlZCB0byBjdXJyZW50IHN5c3RlbVxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCd1cGRhdGVNZXNzYWdlJywgdXBkYXRlTWVzc2FnZSlcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcignR01VcGRhdGUnLCBHTVVwZGF0ZSlcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcignYWR2aXNlJywgYWR2aXNlKVxuICAgIC8vIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCdnbXRyYWRlaXRlbXRvJywgZ210cmFkZWl0ZW10bylcbiAgfSlcblxuICBIb29rcy5vbigncmVuZGVyQ2hhdE1lc3NhZ2UnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICAgIEVuaGFuY2VkQ2hhdENhcmQuYmluZExpc3RlbmVycyhodG1sKVxuICApXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2UgKG1lc3NhZ2VJZCwgbmV3Q29udGVudCkge1xuICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcblxuICBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgIGNvbnRlbnQ6IG5ld0NvbnRlbnRcbiAgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gR01VcGRhdGUgKGRhdGEsIG9wdGlvbnMsIGNhcmRDbGFzc05hbWUsIG1lc3NhZ2VJZCA9IHVuZGVmaW5lZCkge1xuICBjb25zdCBjYXJkID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZC5mcm9tRGF0YShcbiAgICBkYXRhLFxuICAgIG9wdGlvbnMsXG4gICAgY2FyZENsYXNzTmFtZSxcbiAgICBtZXNzYWdlSWRcbiAgKVxuICBhd2FpdCBjYXJkLkdNVXBkYXRlKClcbiAgLy8gY29uc3QgZGlmZiA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdCggZGF0YSwgY2FyZC50b09iamVjdCgpKVxuICByZXR1cm4gY2FyZC50b09iamVjdCgpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkdmlzZSAoKSB7fVxuXG5jbGFzcyBFbmhhbmNlZENoYXRDYXJkTGliIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMudHlwZXMgPSBuZXcgTWFwKClcbiAgICB0aGlzLnNvY2tldCA9IG51bGxcbiAgICAvLyB0aGlzLmVuaGFuY2VkQ2hhdENhcmRDbGFzcyA9IEVuaGFuY2VkQ2hhdENhcmRcbiAgfVxuXG4gIHN0YXRpYyBpbmplY3RDU1MgKCkge1xuICAgIGxldCBzdHlsZSA9ICQoJ2hlYWQnKS5maW5kKCdzdHlsZScpXG4gICAgaWYgKCFzdHlsZT8ubGVuZ3RoKSB7XG4gICAgICAkKCdoZWFkJykuYXBwZW5kKCQoJzxzdHlsZSAgdHlwZT1cInRleHQvY3NzXCI+PC9zdHlsZT4nKSlcbiAgICAgIHN0eWxlID0gJCgnaGVhZCcpLmZpbmQoJ3N0eWxlJylcbiAgICB9XG4gICAgc3R5bGUuYXBwZW5kKFxuICAgICAgYC5lY2MtcmVzdHJpY3RlZCB7Y29sb3I6IHJlZH1cbiAgICAuZWNjLXJlc3RyaWN0ZWQ6aG92ZXIge2N1cnNvcjogbm90LWFsbG93ZWR9YFxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBzZXQgc29ja2V0ICh4KSB7XG4gICAgaWYgKCFnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliKSB7XG4gICAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliID0gbmV3IEVuaGFuY2VkQ2hhdENhcmRMaWIoKVxuICAgIH1cbiAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldCA9IHhcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc29ja2V0ICgpIHtcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0VDQyBub3QgSW5pdGlhbGl6ZWQnKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdFQ0Mgbm8gc29ja2V0JylcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0XG4gIH1cblxuICBzdGF0aWMgZ2V0IHR5cGVzICgpIHtcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcbiAgICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIgPSBuZXcgRW5oYW5jZWRDaGF0Q2FyZExpYigpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnR5cGVzXG4gIH1cblxuICBzdGF0aWMgcmVnaXN0ZXIgKGNhcmRDb25zdHJ1Y3RvcnMpIHtcbiAgICBjYXJkQ29uc3RydWN0b3JzLmZvckVhY2goY2FyZENvbnN0cnVjdG9yID0+IHtcbiAgICAgIGlmICghRW5oYW5jZWRDaGF0Q2FyZExpYi50eXBlcy5nZXQoY2FyZENvbnN0cnVjdG9yLm5hbWUpKSB7XG4gICAgICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIudHlwZXMuc2V0KGNhcmRDb25zdHJ1Y3Rvci5uYW1lLCBjYXJkQ29uc3RydWN0b3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHN0YXRpYyBnbV9vblRvZ2dsZSAoZGF0YSl7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCAnZ21fb25Ub2dnbGUnKVxuICAvLyB9XG59XG5cbmZ1bmN0aW9uIHNldEJ5UGF0aCAob2JqLCBwYXRoLCB2YWx1ZSkge1xuICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKVxuICBsZXQgbyA9IG9ialxuICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBpZiAoIW9bcGFydHNbaV1dKSBvW3BhcnRzW2ldXSA9IHt9XG4gICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICB9XG4gIH1cblxuICBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXSA9IHZhbHVlXG59XG5cbmZ1bmN0aW9uIGdldEJ5UGF0aCAob2JqLCBwYXRoKSB7XG4gIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gIGxldCBvID0gb2JqXG4gIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGlmICghb1twYXJ0c1tpXV0pIHJldHVybiB1bmRlZmluZWRcbiAgICAgIG8gPSBvW3BhcnRzW2ldXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXVxufVxuXG5leHBvcnQgY2xhc3MgRW5oYW5jZWRDaGF0Q2FyZCB7XG4gIC8vIHN0YXRpYyByZWdpc3RlciAoY2FyZENvbnN0cnVjdG9yKSB7XG4gIC8vICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5yZWdpc3RlcihjYXJkQ29uc3RydWN0b3IpXG4gIC8vIH1cblxuICBjb25zdHJ1Y3RvciAoZGF0YSA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhXG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MpIHRoaXMuZGF0YS5mbGFncyA9IHt9XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgb25seSBvbmNlIGJlZm9yZSBzZW5kaW5nIG1lc3NhZ2UgdG8gY2hhdC5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplICgpIHt9XG5cbiAgZ2V0IG9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdE9wdGlvbnMsIHRoaXMuX29wdGlvbnMpXG4gIH1cblxuICBzZXQgb3B0aW9ucyAoeCkge1xuICAgIHRoaXMuX29wdGlvbnMgPSB4XG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMudGVtcGxhdGVcbiAgfVxuXG4gIGdldCBjc3NDbGFzc2VzICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsYXNzZXM/LmpvaW4oJyAnKVxuICB9XG5cbiAgZ2V0IHNwZWFrZXIgKCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMub29jKSByZXR1cm4gZ2FtZS51c2VyXG4gICAgaWYgKFxuICAgICAgdGhpcy5vcHRpb25zLnNwZWFrZXIgJiZcbiAgICAgIENoYXRNZXNzYWdlLmdldFNwZWFrZXJBY3Rvcih0aGlzLm9wdGlvbnMuc3BlYWtlcilcbiAgICApIHtcbiAgICAgIHJldHVybiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3IodGhpcy5vcHRpb25zLnNwZWFrZXIpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLnVzZXJcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIC8vIGF3YWl0IHRoaXMuYXNzaWduT2JqZWN0cygpXG4gICAgcmV0dXJuIHtcbiAgICAgIGNhcmQ6IHRoaXMsXG4gICAgICBmbGFnczogdGhpcy5mbGFncyxcbiAgICAgIGRhdGE6IHRoaXMudG9PYmplY3QoKSxcbiAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9ucyxcbiAgICAgIGNzczogdGhpcy5jc3NDbGFzc2VzLFxuICAgICAgdXNlcjogZ2FtZS51c2VyLFxuICAgICAgc3BlYWtlcjogdGhpcy5zcGVha2VyXG4gICAgfVxuICB9XG5cbiAgdG9PYmplY3QgKCkge1xuICAgIGlmICghdGhpcy5kYXRhKSByZXR1cm5cbiAgICBjb25zdCBkYXRhID0ge31cbiAgICBmb3IgKGNvbnN0IGsgb2YgT2JqZWN0LmtleXModGhpcy5kYXRhKSkge1xuICAgICAgY29uc3QgdiA9IHRoaXMuZGF0YVtrXVxuICAgICAgaWYgKHYgaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgZGF0YVtrXSA9IHYudG9PYmplY3QgPyB2LnRvT2JqZWN0KCkgOiBmb3VuZHJ5LnV0aWxzLmRlZXBDbG9uZSh2KVxuICAgICAgfSBlbHNlIGRhdGFba10gPSB2XG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKG9wdGlvbm5hbENoYXREYXRhID0ge30pIHtcbiAgICAvLyBNYXAgZWNjIGNhcmQgdHlwZSBpZiBub3QgcmVnaXN0ZXJlZCBhbHJlYWR5XG4gICAgLy8gdGhpcy5yZWdpc3RlckVDQ0NsYXNzKClcblxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpXG5cbiAgICAvLyBQdWJsaXNoIGJ5IGN1cnJlbnQgdXNlciBieSBkZWZhdWx0IHVubGVzcyBvcHRpb25zLkdNY2hhdENhcmRcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5nZXREYXRhKClcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgZGF0YSlcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpWzBdXG4gICAgaWYgKHRoaXMub3B0aW9ucy5hdHRhY2hPYmplY3QpIHtcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLm9iamVjdERhdGFTdHJpbmcpXG4gICAgfVxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmVjY0NsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5vcHRpb25zLmNsYXNzZXMpXG5cbiAgICBjb25zdCBzcGVha2VyID1cbiAgICAgIHRoaXMub3B0aW9ucy5zcGVha2VyICYmICF0aGlzLm9wdGlvbnMub29jXG4gICAgICAgID8gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih0aGlzLm9wdGlvbnMuc3BlYWtlcilcbiAgICAgICAgOiB7fVxuXG4gICAgLy8gY29uc3QgdXNlcklkID0gdGhpcy5vcHRpb25zLnVzZXJJZCA/IHRoaXMub3B0aW9ucy51c2VySWQgOiBnYW1lLnVzZXIuaWRcblxuICAgIGNvbnN0IGNoYXREYXRhID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChcbiAgICAgIHtcbiAgICAgICAgLy8gdXNlcjogdXNlcklkLFxuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIHNwZWFrZXIsXG4gICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMub3B0aW9ucy50aXRsZSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0sXG4gICAgICBvcHRpb25uYWxDaGF0RGF0YVxuICAgIClcblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnc2VsZnJvbGwnKSBjaGF0RGF0YS53aGlzcGVyID0gW2dhbWUudXNlci5pZF1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICh7IGF0dGFjaE9iamVjdCA9IHRydWUgfSA9IHt9KSB7XG4gICAgLy8gVE9ETyB0aGUgd2hvbGUgZnVuY3Rpb24gaGFzIHRvIGJlIGV4ZWN1dGVkIGJ5IEdNIGlmIG9wdGlvbnMuR01jaGF0Q2FyZFxuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcHV0ZSkgYXdhaXQgdGhpcy5sb2NhbENvbXB1dGUoKVxuICAgIGlmICh0aGlzLm9wdGlvbnMuR01VcGRhdGUpIGF3YWl0IHRoaXMuRXhlY3V0ZUdNVXBkYXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmdldERhdGEoKVxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIGRhdGEpXG4gICAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgICAvLyBBdHRhY2ggdGhlIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGlmIChhdHRhY2hPYmplY3QgJiYgIXRoaXMuZGF0YS5FRUNfQUNUSU9OPy5kZXRhY2hEYXRhKSB7XG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLm9iamVjdERhdGFTdHJpbmcpXG4gICAgICB9XG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5lY2NDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5vcHRpb25zLmNsYXNzZXMpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0LmV4ZWN1dGVBc0dNKFxuICAgICAgICAndXBkYXRlTWVzc2FnZScsXG4gICAgICAgIHRoaXMubWVzc2FnZUlkLFxuICAgICAgICBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICApXG4gICAgICAvLyBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgICAvLyBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoeyAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XG4gICAgICAvLyBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIH0pIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKSAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XG4gICAgICAvLyByZXR1cm4gbXNnIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIC8vIGh0bWwub24oXG4gICAgLy8gICAnY2xpY2snLFxuICAgIC8vICAgYC4ke0VDQ19DTEFTU30gLmVjYy1yYWRpby1zd2l0Y2hgLFxuICAgIC8vICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIC8vIClcbiAgICBodG1sLm9uKCdjaGFuZ2UnLCAnaW5wdXQsc2VsZWN0LHRleHRhcmVhJywgdGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsIGAuJHtFQ0NfQ0xBU1N9IC5lY2Mtc3dpdGNoYCwgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsIGAuJHtFQ0NfQ0xBU1N9IC5zdWJtaXRgLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2ZvY3Vzb3V0JywgYC4ke0VDQ19DTEFTU30gaW5wdXRgLCB0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gYnV0dG9uYCwgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdrZXlkb3duJywgYC4ke0VDQ19DTEFTU30gZm9ybWAsIHRoaXMuX29uS2V5LmJpbmQodGhpcykpXG5cbiAgICAvLyBjb25zdCB2aXNpID0gaHRtbC5maW5kKCdbZGF0YS1lY2MtdmlzaWJpbGl0eV0nKVxuICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdmlzaS5sZW5ndGg7IGkrKykge1xuICAgIC8vICAgY29uc3QgZWwgPSB2aXNpW2ldO1xuICAgIC8vICAgYXdhaXQgdGhpcy5zZXRWaXNpYmlsaXR5KGVsKVxuXG4gICAgLy8gfVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ1tkYXRhLWVjYy12aXNpYmlsaXR5XScpXG4gICAgICAuZWFjaChhc3luYyAoaSwgZWwpID0+IGF3YWl0IHRoaXMuc2V0VmlzaWJpbGl0eShlbCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ1tkYXRhLWVjYy1wZXJtaXNzaW9uc10nKVxuICAgICAgLmVhY2goYXN5bmMgKGksIGVsKSA9PiBhd2FpdCB0aGlzLnNldFBlcm1pc3Npb24oZWwpKVxuICAgIGh0bWwuZmluZChgLiR7RUNDX0NMQVNTfSAuZWNjLXN3aXRjaGApLmVhY2goKGksIGVsKSA9PiB0aGlzLnNldFN0YXRlKGVsKSlcbiAgICBodG1sXG4gICAgICAuZmluZChgLiR7RUNDX0NMQVNTfSBpbnB1dFt0eXBlPVwicmFkaW9cIl1gKVxuICAgICAgLmVhY2goKGksIGVsKSA9PiB0aGlzLnNldFJhZGlvU3RhdGUoZWwpKVxuICAgIC8vIGh0bWwuZmluZChgLiR7RUNDX0NMQVNTfSAuZWNjLXJhZGlvLXN3aXRjaGApLmVhY2goIChpLCBlbCkgPT4gdGhpcy5zZXRTdGF0ZShlbCkpXG4gIH1cblxuICBzZXRTdGF0ZSAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgaWYgKGVsZW1lbnQuZGF0YXNldC5mbGFnKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXG4gICAgICAgIHRoaXMuZmxhZ3NbZWxlbWVudC5kYXRhc2V0LmZsYWddID8gU1RBVEUuT04gOiBTVEFURS5PRkZcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGVsZW1lbnQuZGF0YXNldC5uYW1lKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBlbGVtZW50LmRhdGFzZXQubmFtZSlcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh2YWx1ZSA/IFNUQVRFLk9OIDogU1RBVEUuT0ZGKVxuICAgIH1cbiAgfVxuXG4gIHNldFJhZGlvU3RhdGUgKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQgfHwgIWVsZW1lbnQubmFtZSkgcmV0dXJuXG4gICAgY29uc3Qgc3BsaXRlZCA9IGVsZW1lbnQubmFtZS5zcGxpdCgnLicpXG4gICAgaWYgKHNwbGl0ZWRbMF0udG9Mb3dlckNhc2UoKSAhPT0gJ2RhdGEnKSByZXR1cm5cbiAgICBpZiAodGhpcy5kYXRhICYmIHR5cGVvZiB0aGlzLmRhdGFbc3BsaXRlZFsxXV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5kYXRhW3NwbGl0ZWRbMV1dID09PSBlbGVtZW50LnZhbHVlKSB7XG4gICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBzZXRWaXNpYmlsaXR5IChlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50LmRhdGFzZXQuZWNjVmlzaWJpbGl0eSkgcmV0dXJuXG4gICAgY29uc3QgY2FuWW91U2VlID0gYXdhaXQgdGhpcy5oYXNQZXJtKGVsZW1lbnQuZGF0YXNldC5lY2NWaXNpYmlsaXR5LCB0cnVlKVxuICAgIGlmICghY2FuWW91U2VlKSBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgfVxuXG4gIGFzeW5jIHNldFBlcm1pc3Npb24gKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQuZGF0YXNldC5lY2NQZXJtaXNzaW9ucykgcmV0dXJuXG4gICAgY29uc3QgY2FuWW91TW9kID0gYXdhaXQgdGhpcy5oYXNQZXJtKGVsZW1lbnQuZGF0YXNldC5lY2NQZXJtaXNzaW9ucylcbiAgICBpZiAoIWNhbllvdU1vZCkge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlY2MtcmVzdHJpY3RlZCcpXG4gICAgICBpZiAoJChlbGVtZW50KS5pcygnaW5wdXQnKSkge1xuICAgICAgICBpZiAoZWxlbWVudC50eXBlID09PSAncmFuZ2UnKSAkKGVsZW1lbnQpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgZWxzZSAkKGVsZW1lbnQpLmF0dHIoJ3JlYWRvbmx5JywgdHJ1ZSlcbiAgICAgIH1cbiAgICAgIGlmICgkKGVsZW1lbnQpLmlzKCdzZWxlY3QnKSkgJChlbGVtZW50KS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgYXMgcGVybWlzc2lvbiBhZ2FpbnN0IGEgc3RyaW5nIG9mIGFsbG93ZWQgcGVyc29ucy5cbiAgICogSWYgdGhlIHN0cmluZyBpcyBlbXB0eSBwZXJtaXNzaW9uIGFyZSBhbGwgZ3JhbnRlZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzdHJpY3RlZFRvICAgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgc2V0IG9mIHBsYXllciBhbGxvd2VkLiBWYWx1ZSBjYW4gYmUgb3duZXIsIGdtLCBwbGF5ZXJzLCB1dWlkIHNlcGFyYXRlZCBieSBzcGFjZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZpc2lvbiAgICAgICAgaWYgdHJ1ZSBnbSB3aWxsIGJlIGNvbnNpZGVyZWQgZm9yIHBlcm1pc3Npb25zLiBmYWxzZSA9IGdtIGhhcyBhbHdheXMgcmlnaHQuIHRydWUgR00gcGVybWlzc2lvbiB3aWxsIGJlIGNoZWNrZWRcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGhhc1Blcm0gKHJlc3RyaWN0ZWRUbywgdmlzaW9uID0gZmFsc2UpIHtcbiAgICBpZiAoIXJlc3RyaWN0ZWRUby5sZW5ndGgpIHJldHVybiB0cnVlXG4gICAgbGV0IHBlcm1pc3Npb25zQXJyYXkgPSByZXN0cmljdGVkVG8uc3BsaXQoJyAnKVxuICAgIGNvbnN0IHdoaXRlTGlzdCA9ICFwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5CTEFDS0xJU1QpXG4gICAgaWYgKCF3aGl0ZUxpc3QpIHtcbiAgICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihcbiAgICAgICAgZSA9PiBlICE9PSBQRVJNSVNTSU9OX1RZUEUuQkxBQ0tMSVNUXG4gICAgICApXG4gICAgfVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF2aXNpb24pIHJldHVybiB0cnVlIC8vIEdNIGNhbiBhbHdheXMgbW9kaWZ5IGV2ZXJ5dGhpbmcgISBOYWhcbiAgICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5HTSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICB9XG4gICAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuTk9UX0dNKSkge1xuICAgICAgICByZXR1cm4gZmFsc2UgfHwgIXdoaXRlTGlzdFxuICAgICAgfVxuICAgIH1cblxuICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5HTSlcbiAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXG4gICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5OT1RfR01cbiAgICApXG5cbiAgICAvLyAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0IC8vSWYgcGFzcyB0aGUgZmlsdGVyIHJldHVybiBmYWxzZSB1bmxlc3MgaXQncyBhIGJsYWNrbGlzdFxuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoZSA9PiBlICE9IFBFUk1JU1NJT05fVFlQRS5HTSlcbiAgICAvLyB9XG5cbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuVVNFUikpIHtcbiAgICAgIGlmICh0aGlzLm1lc3NhZ2UuaXNBdXRob3IpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdCAvLyBpc0F1dGhvciB2cyB1c2VyLmlzT3duZXIgP1xuICAgICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKFxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5VU0VSXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLlNQRUFLRVIpKSB7XG4gICAgICBjb25zdCBzcGVha2VyID0gdGhpcy5tZXNzYWdlLmRhdGEuc3BlYWtlclxuICAgICAgaWYgKHNwZWFrZXIudG9rZW4gJiYgc3BlYWtlci5zY2VuZSkge1xuICAgICAgICBjb25zdCBhY3RvciA9IGF3YWl0IGZyb21VdWlkKFxuICAgICAgICAgIGBTY2VuZS4ke3NwZWFrZXIuc2NlbmV9LlRva2VuLiR7c3BlYWtlci50b2tlbn1gXG4gICAgICAgIClcbiAgICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgICAgaWYgKGFjdG9yLmlzT3duZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNwZWFrZXIuYWN0b3IpIHtcbiAgICAgICAgY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3RvcilcbiAgICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgICAgaWYgKGFjdG9yLmlzT3duZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBlbHNlIGlmIChzcGVha2VyLnVzZXIpIHtcbiAgICAgIC8vICAgaWYgKGdhbWUudXNlci5pZCA9PSBzcGVha2VyLnVzZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgLy8gfVxuICAgICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKFxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5TUEVBS0VSXG4gICAgICApXG4gICAgfVxuICAgIC8vIEFsbCBmaWx0ZXIgcGFzc2VkLCBhcnJheSBzaG91bGQgY29udGFpbnMgb25seSB1dWlkcyBvciBhY3Rvci90b2tlbiBpZHNcbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGVybWlzc2lvbnNBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB1dWlkID0gcGVybWlzc2lvbnNBcnJheVtpXVxuICAgICAgICBsZXQgYWN0b3IgPSBhd2FpdCBmcm9tVXVpZCh1dWlkKVxuICAgICAgICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCh1dWlkKVxuICAgICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgICByZXR1cm4gYWN0b3IuaXNPd25lclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoYFVuYWJsZSB0byBmaW5kIGFjdG9yICR7dXVpZH1gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0IC8vIElmIHBhc3MgdGhlIGZpbHRlciByZXR1cm4gZmFsc2UgdW5sZXNzIGl0J3MgYSBibGFja2xpc3RcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVuZXJzIChodG1sKSB7XG4gICAgY29uc3QgaHRtbE1lc3NhZ2VFbGVtZW50ID0gaHRtbFswXVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9IGh0bWxNZXNzYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtFQ0NfQ0xBU1N9YClcbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudCkgcmV0dXJuXG5cbiAgICBjb25zdCBjYXJkID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGh0bWxDYXJkRWxlbWVudClcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNhcmQuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIGdldCBmbGFncyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5mbGFnc1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRvIHJlYXNzaWduIG9iamVjdCBmcm9tIHRoZSBkYXRhIHN0cnVjdHVyZS5cbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGFzc2lnbk9iamVjdHMgKCkge31cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gdXBkYXRlIG9iamVjdCBhZnRlciBkYXRhIGNoYW5nZS5cbiAgICogVGhpcyBpcyBjYWxsZWQgYnkgdGhlIGxvY2FsIGNsaWVudFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgbG9jYWxDb21wdXRlICgpIHt9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRvIHVwZGF0ZSBvYmplY3QgYWZ0ZXIgZGF0YSBjaGFuZ2UuXG4gICAqIFRoaXMgaXMgY2FsbGVkIGJ5IG9uZSBvZiB0aGUgR00gY2xpZW50cy5cbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIEdNVXBkYXRlICgpIHt9XG5cbiAgYXN5bmMgRXhlY3V0ZUdNVXBkYXRlICgpIHtcbiAgICBjb25zdCBuZXdEYXRhID0gYXdhaXQgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQuZXhlY3V0ZUFzR00oXG4gICAgICAnR01VcGRhdGUnLFxuICAgICAgdGhpcy50b09iamVjdCgpLFxuICAgICAgdGhpcy5fb3B0aW9ucyxcbiAgICAgIHRoaXMuY29uc3RydWN0b3IubmFtZSxcbiAgICAgIHRoaXMubWVzc2FnZUlkXG4gICAgKVxuXG4gICAgdGhpcy5kYXRhID0gbmV3RGF0YVxuICAgIGF3YWl0IHRoaXMuYXNzaWduT2JqZWN0cygpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudCB3aWxsIGNoZWNrIGZvciBhbiBhY3Rpb24gKGRhdGEtYWN0aW9uKVxuICAgKiBpZiBhIG1ldGhvZCB3aXRoIHRoYXQgbmFtZSBleGlzdCBpdCB3aWxsIGJlIHRyaWdnZXJlZC5cbiAgICovXG4gIGFzeW5jIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJyAvLyBBdm9pZCBtdWx0aXBsZSBwdXNoXG4gICAgY29uc3QgYWN0aW9uID0gdGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG5cbiAgICBsZXQgZm9ybVVwZGF0ZVxuICAgIGxldCBhY3Rpb25VcGRhdGUgPSBmYWxzZVxuXG4gICAgLy8gaWYgKCdzdWJtaXQnID09IHRhcmdldC50eXBlKSB7XG4gICAgLy8gICBjb25zb2xlLndhcm4oJ0J1dHRvbiBpcyBhbHNvIGEgc3VibWl0JylcbiAgICAvLyB9XG5cbiAgICAvLyBQZXJmb3JtIGNhcmQgdXBkYXRlIGZpcnN0XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KGAuJHtFQ0NfQ0xBU1N9YClcbiAgICBpZiAoY2FyZCkgZm9ybVVwZGF0ZSA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYENvdWxkIG5vdCBmaW5kIGEgRUVDIGNsYXNzIGZvciB0aGlzIGNhcmQ6ICR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBvcmlnaW5hbERpc3BsYXlTdHlsZSA9IHRhcmdldC5zdHlsZS5kaXNwbGF5XG5cbiAgICBpZiAoIWFjdGlvbikge1xuICAgICAgY29uc29sZS53YXJuKCdubyBhY3Rpb24gYXNzb2NpYXRlZCB3aXRoIHRoaXMgYnV0dG9uJylcbiAgICAgIGlmICghZm9ybVVwZGF0ZSkgcmV0dXJuIC8vIElmIHRoZSBmb3JtIHdhcyB1cGRhdGVkIHdlIHN0aWxsIHVwZGF0ZSB0aGUgY2FyZFxuICAgIH1cbiAgICBpZiAoIXRoaXNbYWN0aW9uXSkge1xuICAgICAgY29uc29sZS53YXJuKGBubyAke2FjdGlvbn0gYWN0aW9uIGZvdW5kIGZvciB0aGlzIGNhcmRgKVxuICAgICAgaWYgKCFmb3JtVXBkYXRlKSByZXR1cm4gLy8gSWYgdGhlIGZvcm0gd2FzIHVwZGF0ZWQgd2Ugc3RpbGwgdXBkYXRlIHRoZSBjYXJkXG4gICAgfVxuICAgIGlmICh0aGlzW2FjdGlvbl0pIHtcbiAgICAgIGFjdGlvblVwZGF0ZSA9IGF3YWl0IHRoaXNbYWN0aW9uXSh7IGV2ZW50LCB1cGRhdGVDYXJkOiBmYWxzZSB9KVxuICAgIH1cblxuICAgIGlmIChmb3JtVXBkYXRlIHx8IGFjdGlvblVwZGF0ZSkgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgZWxzZSB0YXJnZXQuc3R5bGUuZGlzcGxheSA9IG9yaWdpbmFsRGlzcGxheVN0eWxlXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKiBAcmV0dXJucyBmYWxzZSBpZiBrZXkgaXMgZW50ZXIgdG8gYXZvaWQgZ2xvYmFsIHN1Ym1pc3Npb25cbiAgICovXG4gIF9vbktleSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICByZXR1cm4gZXZlbnQua2V5ICE9PSAnRW50ZXInXG4gIH1cblxuICBfb25DaGFuZ2UgKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdWJtaXRPbkNoYW5nZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICAgIH1cbiAgfVxuXG4gIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdGFnTmFtZSA9IHRhcmdldC50YWdOYW1lXG4gICAgaWYgKHRhZ05hbWUgPT09ICdCVVRUT04nICYmICdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gLy9cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoYC4ke0VDQ19DTEFTU31gKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3QgdXBkYXRlcyA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGlmICh1cGRhdGVzKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgZm9ybSBmcm9tIHRoZSBjYXJkIGFuZCB1cGRhdGUgdGhlIGRhdGEgc3RydWN0dXJlXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmRcbiAgICogQHJldHVybnNcbiAgICovXG4gIF91cGRhdGUgKGNhcmQpIHtcbiAgICBjb25zdCBmb3JtcyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXG4gICAgbGV0IHVwZGF0ZXMgPSBmYWxzZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZvcm0gPSBmb3Jtc1tpXVxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZChmb3JtKVxuICAgICAgY29uc3QgZGF0YSA9IGZkLm9iamVjdFxuICAgICAgLy8gZGF0YSA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdChcbiAgICAgIC8vICAgdGhpcy5kYXRhLFxuICAgICAgLy8gICBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChkYXRhKVxuICAgICAgLy8gKVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBnZXRCeVBhdGgodGhpcywga2V5KVxuICAgICAgICBpZiAoIShvbGRWYWx1ZSA9PT0gdmFsdWUpKSB7XG4gICAgICAgICAgc2V0QnlQYXRoKHRoaXMsIGtleSwgdmFsdWUpXG4gICAgICAgICAgdXBkYXRlcyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlc1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXR0YWNoT2JqZWN0OiB0cnVlLFxuICAgICAgY2xhc3NlczogW0VDQ19DTEFTU10sXG4gICAgICBleGNsdWRlOiBbXSxcbiAgICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfJyxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgb29jOiBmYWxzZSwgLy8gICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5vb2M9ZmFsc2VdICBVc2UgdGhlIHNwZWFrZXIvZ2V0c3BlYWtlci4gaWYgdHJ1ZSB1c2UgdGhlIHVzZXIgaW5zdGVhZFxuICAgICAgY29tcHV0ZTogdHJ1ZSwgLy8gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNvbXB1dGUubG9jYWw9dHJ1ZV0gaW52b3F1ZSB0aGUgY29tcHV0ZSBtZXRob2QgYXMgbG9jYWwgdXNlciA9PiBuZWVkIHRvIG92ZXJyaWRlIGxvY2FsQ29tcHV0ZVxuICAgICAgR01VcGRhdGU6IGZhbHNlIC8vICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jb21wdXRlLkdNPWZhbHNlXSBpbnZvcXVlIHRoZSBHTVVwZGF0ZSBtZXRob2QgYXMgR00gPT4gbmVlZCB0byBvdmVycmlkZSBHTVVwZGF0ZVxuICAgIH1cbiAgfVxuXG4gIGdldCBvYmplY3REYXRhU3RyaW5nICgpIHtcbiAgICBjb25zdCBzYXZlRGF0YSA9IHtcbiAgICAgIGRhdGE6IHRoaXMuZGF0YSxcbiAgICAgIG9wdGlvbnM6IHRoaXMuX29wdGlvbnNcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHNhdmVEYXRhLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCh0aGlzLm9wdGlvbnMuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pXG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlKG1lc3NhZ2UpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlIChtZXNzYWdlKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSAkKG1lc3NhZ2UuZGF0YS5jb250ZW50KVswXVxuICAgIGlmICghY2FyZEVsZW1lbnQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21IVE1MQ2FyZEVsZW1lbnQgKGh0bW1sQ2FyZCkge1xuICAgIGlmICghaHRtbWxDYXJkKSByZXR1cm5cbiAgICBpZiAoIWh0bW1sQ2FyZC5kYXRhc2V0LmVjY0NsYXNzKSByZXR1cm5cbiAgICBpZiAoIWh0bW1sQ2FyZC5kYXRhc2V0Lm9iamVjdCkgcmV0dXJuXG4gICAgY29uc3QgY2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGh0bW1sQ2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgY29uc3QgbWVzc2FnZSA9IGh0bW1sQ2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZT8uZGF0YXNldD8ubWVzc2FnZUlkXG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShcbiAgICAgIGNhcmREYXRhLmRhdGEsXG4gICAgICBjYXJkRGF0YS5vcHRpb25zLFxuICAgICAgaHRtbWxDYXJkLmRhdGFzZXQuZWNjQ2xhc3MsXG4gICAgICBtZXNzYWdlSWRcbiAgICApXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbURhdGEgKGRhdGEsIG9wdGlvbnMsIGNhcmRDbGFzc05hbWUsIG1lc3NhZ2VJZCA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IENhcmRDbGFzcyA9IGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIudHlwZXMuZ2V0KGNhcmRDbGFzc05hbWUpXG5cbiAgICBpZiAoIUNhcmRDbGFzcykge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5rbm93biBjaGF0IGNhcmQgdHlwZTogJHtjYXJkQ2xhc3NOYW1lfWApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkQ2xhc3MoZGF0YSwgb3B0aW9ucylcbiAgICBpZiAobWVzc2FnZUlkKSBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIGF3YWl0IGNhcmQuYXNzaWduT2JqZWN0cygpXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHNldERhdGEgKG5hbWUpIHtcbiAgICBpZiAoIW5hbWUgJiYgISgkLnR5cGUobmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsIHRydWUpXG4gIH1cblxuICB1bnNldERhdGEgKG5hbWUpIHtcbiAgICBpZiAoIW5hbWUgJiYgISgkLnR5cGUobmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsIGZhbHNlKVxuICB9XG5cbiAgdG9nZ2xlRGF0YSAobmFtZSkge1xuICAgIGlmICghbmFtZSAmJiAhKCQudHlwZShuYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICBjb25zdCB2YWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBuYW1lKVxuICAgIHNldEJ5UGF0aCh0aGlzLCBuYW1lLCAhdmFsdWUpXG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgYW5zd2VyID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQuZXhlY3V0ZUFzR00oJ2dtX29uVG9nZ2xlJywge1xuICAgIC8vICAgZXZlbnQ6IGV2ZW50LFxuICAgIC8vICAgY2FyZDogdGhpc1xuICAgIC8vIH0pXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICgnYWN0aW9uJyBpbiB0YXJnZXQuZGF0YXNldCkgcmV0dXJuIHRoaXMuX29uQnV0dG9uKGV2ZW50KVxuICAgIGlmIChcbiAgICAgIHRhcmdldCAmJlxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZ20tc2VsZWN0LW9ubHknKSAmJlxuICAgICAgIWdhbWUudXNlci5pc0dNXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgbmFtZSA9IHRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICAgID8gYGRhdGEuZmxhZ3MuJHt0YXJnZXQuZGF0YXNldC5mbGFnfWBcbiAgICAgIDogdGFyZ2V0LmRhdGFzZXQubmFtZVxuICAgIGlmICghbmFtZSkgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmNsb3Nlc3QoJy5lY2MtcmFkaW8nKVxuICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICB0aGlzLnRvZ2dsZURhdGEobmFtZSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYnV0dG9ucyA9IHRvZ2dsZS5xdWVyeVNlbGVjdG9yQWxsKCcuZWNjLXN3aXRjaCcpXG4gICAgICBmb3IgKGNvbnN0IGIgb2YgYnV0dG9ucykge1xuICAgICAgICBjb25zdCBiTmFtZSA9IGIuZGF0YXNldC5mbGFnXG4gICAgICAgICAgPyBgZGF0YS5mbGFncy4ke2IuZGF0YXNldC5mbGFnfWBcbiAgICAgICAgICA6IGIuZGF0YXNldC5uYW1lXG4gICAgICAgIHRoaXMudW5zZXREYXRhKGJOYW1lKVxuICAgICAgfVxuICAgICAgdGhpcy5zZXREYXRhKG5hbWUpXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChgLiR7RUNDX0NMQVNTfWApXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdWJtaXRPbkNoYW5nZSkge1xuICAgICAgaWYgKGNhcmQpIHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKCkgLy8gU3VibWl0IG9uIGNoYW5nZSA/XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgX3BhcnRpY2lwYW50IHtcbiAgY29uc3RydWN0b3IgKGRhdGEgPSB7fSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGFcbiAgfVxuXG4gIF9mZXRjaCAoKSB7XG4gICAgaWYgKCF0aGlzLl9kb2MgJiYgdGhpcy5kYXRhLmRvY1V1aWQpIHtcbiAgICAgIHRoaXMuX2RvYyA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5fYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLl9kb2MpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLl9kb2MuY29uc3RydWN0b3I/Lm5hbWUpIHtcbiAgICAgICAgICBjYXNlICdUb2tlbkRvY3VtZW50JzpcbiAgICAgICAgICAgIHRoaXMuX2FjdG9yID0gdGhpcy5fZG9jLmFjdG9yXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnQ29DQWN0b3InOlxuICAgICAgICAgICAgdGhpcy5fYWN0b3IgPSB0aGlzLl9kb2NcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB0aGlzLl9hY3RvciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgdGhpcy5fZmV0Y2goKVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IGlzQWN0b3IgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0FjdG9yIHx8IHRoaXMuaGFzVmVoaWNsZVxuICB9XG5cbiAgZ2V0IGlzQWN0aXZlICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmFjdGl2ZSB8fCBmYWxzZVxuICB9XG5cbiAgZ2V0IGtleSAoKSB7XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5hY3RvcktleVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5hY3RvcktleVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBpY29uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNBY3Rvcikge1xuICAgICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5pbWdcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuaW1nXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRyaXZlciAoKSB7XG4gICAgaWYgKCF0aGlzLl9kcml2ZXIpIHtcbiAgICAgIHRoaXMuX2RyaXZlciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZHJpdmVyXG4gIH1cblxuICBnZXQgdmVoaWNsZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS52ZWhpY2xlS2V5KSB7XG4gICAgICB0aGlzLl92ZWhpY2xlID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5kYXRhLnZlaGljbGVLZXkpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl92ZWhpY2xlXG4gIH1cblxuICBnZXQgaGFzQWN0b3IgKCkge1xuICAgIHJldHVybiAhIXRoaXMuYWN0b3JcbiAgfVxuXG4gIGdldCBoYXNWZWhpY2xlICgpIHtcbiAgICByZXR1cm4gISF0aGlzLnZlaGljbGVcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSByZXR1cm4gdGhpcy52ZWhpY2xlLm5hbWVcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICAgIHJldHVybiB0aGlzLmRhdGEubmFtZSB8fCB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBtb3YgKCkge1xuICAgIGlmICghdGhpcy5kYXRhLm1vdikge1xuICAgICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgdGhpcy5kYXRhLm1vdiA9IHRoaXMudmVoaWNsZS5tb3ZcbiAgICAgIGVsc2UgaWYgKHRoaXMuaGFzQWN0b3IpIHRoaXMuZGF0YS5tb3YgPSB0aGlzLmFjdG9yLm1vdlxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEubW92KSB7XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhdGEubW92KSkpIHRoaXMuZGF0YS5oYXNWYWxpZE1vdiA9IHRydWVcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEuaGFzVmFsaWRNb3YgPSBmYWxzZVxuICAgICAgICB0aGlzLmRhdGEubW92ID0gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tb3ZcbiAgfVxuXG4gIGdldCB1dWlkICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLnV1aWRcbiAgfVxuXG4gIGdldCBoYXNNYXhCb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAyXG4gIH1cblxuICBnZXQgYm9udXNEaWNlICgpIHtcbiAgICBpZiAoXG4gICAgICBpc05hTih0aGlzLmRhdGEuYm9udXNEaWNlKSB8fFxuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA8IDAgfHxcbiAgICAgIHRoaXMuZGF0YS5ib251c0RpY2UgPiAyXG4gICAgKSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kYXRhLmJvbnVzRGljZVxuICB9XG5cbiAgc2V0IGJvbnVzRGljZSAoeCkge1xuICAgIGlmIChpc05hTih4KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQm9udXMgZGljZSBjYW4gT25seSBiZSBhIG51bWJlcicpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHggPiAyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdNYXggMiBib251cyBkaWNlJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoeCA8IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ05vIG5lZ2F0aXYgYm9udXMgZGljZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSA9IHhcbiAgfVxuXG4gIGdldCBocCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuaHApIHtcbiAgICAgIHRoaXMuZGF0YS5ocCA9IDBcbiAgICB9XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuZGF0YS5ocCA9IHRoaXMuYWN0b3IuaHBcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLmhwXG4gIH1cblxuICBzZXQgaHAgKHgpIHtcbiAgICB0aGlzLmRhdGEuaHAgPSB4XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuYWN0b3Iuc2V0SHAoeClcbiAgICB9XG4gIH1cblxuICBhZGRCb251c0RpY2UgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuYm9udXNEaWNlID49IDIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0FscmVhZHkgaGF2ZSBtYXggYm9udXMgZGljZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSArPSAxXG4gIH1cblxuICByZW1vdmVCb251c0RpY2UgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuYm9udXNEaWNlIDw9IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0FscmVhZHkgaGF2ZSAwIGJvbnVzIGRpY2UnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuZGF0YS5ib251c0RpY2UgLT0gMVxuICB9XG5cbiAgcmVzZXRCb251c0RpY2UgKCkge1xuICAgIHRoaXMuZGF0YS5ib251c0RpY2UgPSAwXG4gIH1cblxuICBnZXQgaGFzQm9udXNEaWNlICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNPbmVCb251c0RpY2UgfHwgdGhpcy5oYXNUd29Cb251c0RpY2VcbiAgfVxuXG4gIGdldCBoYXNPbmVCb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAxXG4gIH1cblxuICBnZXQgaGFzVHdvQm9udXNEaWNlICgpIHtcbiAgICByZXR1cm4gdGhpcy5ib251c0RpY2UgPj0gMlxuICB9XG5cbiAgZ2V0IGNhbkFzc2lzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNzaXN0Py5sZW5ndGggPiAwXG4gIH1cblxuICBnZXQgY2FuQmVDYXV0aW91cyAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmhhc01heEJvbnVzRGljZVxuICB9XG5cbiAgZ2V0IGFzc2lzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5hc3Npc3QgfHwgW11cbiAgfVxuXG4gIGdldCBkZXggKCkge1xuICAgIGlmICghdGhpcy5kYXRhLmRleCkge1xuICAgICAgaWYgKHRoaXMuaGFzVmVoaWNsZSAmJiB0aGlzLmhhc0RyaXZlcikge1xuICAgICAgICB0aGlzLmRhdGEuZGV4ID0gdGhpcy5kcml2ZXIuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmhhc0FjdG9yKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kZXggPSB0aGlzLmFjdG9yLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLmRleCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5kYXRhLmRleCkpKSB0aGlzLmRhdGEuaGFzVmFsaWREZXggPSB0cnVlXG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRhLmhhc1ZhbGlkRGV4ID0gZmFsc2VcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLmRleFxuICB9XG5cbiAgZ2V0IGhhc0FHdW5SZWFkeSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5oYXNBR3VuUmVhZHkgfHwgZmFsc2VcbiAgfVxuXG4gIGdldCBpbml0aWF0aXZlICgpIHtcbiAgICBsZXQgaW5pdCA9IHRoaXMuZGV4XG4gICAgaWYgKHRoaXMuaGFzQUd1blJlYWR5KSB7XG4gICAgICBpbml0ICs9IDUwXG4gICAgfVxuICAgIC8vIGlmKCB0aGlzLnNwZWVkQ2hlY2spe1xuICAgIC8vICAgaWYodGhpcy5zcGVlZENoZWNrLnNjb3JlKSBpbml0ICs9IHRoaXMuc3BlZWRDaGVjay5zY29yZS8xMDBcbiAgICAvLyB9XG5cbiAgICByZXR1cm4gaW5pdFxuICB9XG5cbiAgZ2V0IGlzQ2hhc2VyICgpIHtcbiAgICByZXR1cm4gISF0aGlzLmRhdGEuY2hhc2VyXG4gIH1cblxuICBnZXQgaXNQcmV5ICgpIHtcbiAgICByZXR1cm4gIXRoaXMuaXNDaGFzZXJcbiAgfVxuXG4gIGdldCBpc1ZhbGlkICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNWYWxpZERleCAmJiB0aGlzLmhhc1ZhbGlkTW92XG4gIH1cblxuICBnZXQgaGFzVmFsaWREZXggKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5kZXgpKVxuICB9XG5cbiAgZ2V0IGhhc1ZhbGlkTW92ICgpIHtcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLmRhdGEubW92KSlcbiAgfVxuXG4gIGdldCBoYXNEcml2ZXIgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc1ZlaGljbGUgJiYgdGhpcy5oYXNBY3RvclxuICB9XG5cbiAgZ2V0IG1vdkFkanVzdG1lbnQgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ucm9sbERhdGFTdHJpbmcpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcodGhpcy5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcpXG4gICAgICBpZiAocm9sbCkge1xuICAgICAgICBpZiAoIXJvbGwuc3RhbmRieSkge1xuICAgICAgICAgIGlmIChyb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUpIHJldHVybiAxXG4gICAgICAgICAgZWxzZSBpZiAocm9sbC5mYWlsZWQpIHJldHVybiAtMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgYWRqdXN0ZWRNb3YgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5tb3YgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKGlzTmFOKE51bWJlcih0aGlzLm1vdikpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIE51bWJlcih0aGlzLm1vdikgKyB0aGlzLm1vdkFkanVzdG1lbnRcbiAgfVxuXG4gIGdldCBoYXNNb3ZBZGp1c3RtZW50ICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNCb251c01vdiB8fCB0aGlzLmhhc01hbHVzTW92XG4gIH1cblxuICBnZXQgaGFzQm9udXNNb3YgKCkge1xuICAgIGlmICh0aGlzLmRhdGEubW92QWRqdXN0bWVudCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaGFzTWFsdXNNb3YgKCkge1xuICAgIGlmICh0aGlzLmRhdGEubW92QWRqdXN0bWVudCA8IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBnZXQgb3B0aW9ucygpe1xuICAvLyAgcmV0dXJuIHtcbiAgLy8gICAgZXhjbHVkZTogW10sXG4gIC8vICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfJ1xuICAvLyAgfTtcbiAgLy8gfVxuXG4gIC8vIGdldCBkYXRhU3RyaW5nKCl7XG4gIC8vICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSx2YWx1ZSk9PntcbiAgLy8gICAgaWYoIG51bGwgPT09IHZhbHVlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAvLyAgICBpZiggdGhpcy5vcHRpb25zLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIGlmKCBrZXkuc3RhcnRzV2l0aCh0aGlzLm9wdGlvbnMuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIHJldHVybiB2YWx1ZTtcbiAgLy8gIH0pO1xuICAvLyB9XG5cbiAgdG9vU2xvdyAoKSB7XG4gICAgdGhpcy5kYXRhLmV4Y2x1ZGVkID0gdHJ1ZVxuICB9XG5cbiAgaW5jbHVkZUluQ2hhc2UgKCkge1xuICAgIHRoaXMuZGF0YS5leGNsdWRlZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLmVzY2FwZWQgPSBmYWxzZVxuICB9XG5cbiAgZXNjYXBlZCAoKSB7XG4gICAgdGhpcy5kYXRhLmVzY2FwZWQgPSB0cnVlXG4gIH1cblxuICBzZXQgc2xvd2VzdCAoeCkge1xuICAgIHRoaXMuZGF0YS5zbG93ZXN0ID0geFxuICB9XG5cbiAgZ2V0IHNsb3dlc3QgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuc2xvd2VzdFxuICB9XG5cbiAgc2V0IGZhc3Rlc3QgKHgpIHtcbiAgICB0aGlzLmRhdGEuZmFzdGVzdCA9IHhcbiAgfVxuXG4gIGdldCBmYXN0ZXN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmZhc3Rlc3RcbiAgfVxuXG4gIGNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyAobWluTW92KSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHRoaXMubW92ZW1lbnRBY3Rpb24gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2YgdGhpcy5hZGp1c3RlZE1vdiA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIGlzTmFOKG1pbk1vdilcbiAgICApIHtcbiAgICAgIHRoaXMubW92ZW1lbnRBY3Rpb24gPSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubW92ZW1lbnRBY3Rpb24gPSAxICsgKHRoaXMuYWRqdXN0ZWRNb3YgLSBtaW5Nb3YpXG4gICAgfVxuICAgIC8vIGlmKCB0aGlzLm1vdmVtZW50QWN0aW9uIDwgMCkgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDBcbiAgfVxuXG4gIHNldCBtb3ZlbWVudEFjdGlvbiAoeCkge1xuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA9IHhcbiAgfVxuXG4gIGdldCBtb3ZlbWVudEFjdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvblxuICB9XG5cbiAgc2V0IGN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKHgpIHtcbiAgICB0aGlzLmRhdGEuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHhcbiAgfVxuXG4gIGdldCBjdXJyZW50TW92ZW1lbnRBY3Rpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgfHwgMFxuICB9XG5cbiAgZ2V0IGhhc01heE12dEFjdGlvbnMgKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPj0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICB9XG5cbiAgZ2V0IGhhc05vTXZ0QWN0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8PSAwXG4gIH1cblxuICBhZGRNb3ZlbWVudEFjdGlvbnMgKHggPSAxKSB7XG4gICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHhcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gdGhpcy5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICAgIH1cbiAgfVxuXG4gIGFsdGVyTW92ZW1lbnRBY3Rpb25zICh4KSB7XG4gICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHhcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gdGhpcy5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICAgIH1cbiAgfVxuXG4gIGdldCBtb3ZlbWVudEFjdGlvbkFycmF5ICgpIHtcbiAgICBjb25zdCBiYXNlQXJyYXkgPSBBcnJheSh0aGlzLm1vdmVtZW50QWN0aW9uKS5maWxsKCdiYXNlJylcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID49IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zOyBpKyspIHtcbiAgICAgICAgYmFzZUFycmF5W2ldID0gJ2Jhc2UgYXZhaWxhYmxlJ1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VBcnJheVxuICAgIH1cblxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPCAwKSB7XG4gICAgICBjb25zdCBkZWZpY2l0QXJyYXkgPSBBcnJheShNYXRoLmFicyh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMpKS5maWxsKFxuICAgICAgICAnZGVmaWNpdCdcbiAgICAgIClcbiAgICAgIHJldHVybiBkZWZpY2l0QXJyYXkuY29uY2F0KGJhc2VBcnJheSlcbiAgICB9XG4gIH1cblxuICBnZXQgY3NzQ2xhc3MgKCkge1xuICAgIGNvbnN0IGNzc0NsYXNzZXMgPSBbXVxuICAgIGlmICh0aGlzLmlzQ2hhc2VyKSBjc3NDbGFzc2VzLnB1c2goJ2NoYXNlcicpXG4gICAgZWxzZSBjc3NDbGFzc2VzLnB1c2goJ3ByZXknKVxuICAgIGlmICh0aGlzLmRhdGEuZXhjbHVkZWQpIGNzc0NsYXNzZXMucHVzaCgnZXhjbHVkZWQnLCAndG9vX3Nsb3cnKVxuICAgIGlmICh0aGlzLmRhdGEuZXNjYXBlZCkgY3NzQ2xhc3Nlcy5wdXNoKCdlc2NhcGVkJylcbiAgICBpZiAodGhpcy5kYXRhLmZhc3Rlc3QpIGNzc0NsYXNzZXMucHVzaCgnZmFzdGVzdCcpXG4gICAgaWYgKHRoaXMuZGF0YS5zbG93ZXN0KSBjc3NDbGFzc2VzLnB1c2goJ3Nsb3dlc3QnKVxuICAgIGlmICh0aGlzLmRhdGEuYWN0aXZlKSBjc3NDbGFzc2VzLnB1c2goJ2FjdGl2ZScpXG4gICAgaWYgKHRoaXMuZGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDw9IDApIGNzc0NsYXNzZXMucHVzaCgnbm8tYWN0aW9ucycpXG4gICAgcmV0dXJuIGNzc0NsYXNzZXMuam9pbignICcpXG4gIH1cblxuICBnZXQgc3BlZWRDaGVjayAoKSB7XG4gICAgY29uc3QgY2hlY2sgPSB7fVxuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ubmFtZSkgY2hlY2submFtZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLm5hbWVcbiAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnNjb3JlKSBjaGVjay5zY29yZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLnNjb3JlXG4gICAgY2hlY2suY3NzQ2xhc3NlcyA9ICcnXG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5yb2xsRGF0YVN0cmluZykge1xuICAgICAgY2hlY2sucm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcbiAgICAgIGlmIChjaGVjay5yb2xsKSB7XG4gICAgICAgIGlmICghY2hlY2sucm9sbC5zdGFuZGJ5IHx8IGNoZWNrLnJvbGwuaGFzQ2FyZCkge1xuICAgICAgICAgIGNoZWNrLnJvbGxlZCA9IHRydWVcbiAgICAgICAgICBjaGVjay5pbmxpbmVSb2xsID0gY2hlY2sucm9sbC5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICAgICAgICBjaGVjay5jc3NDbGFzc2VzICs9ICdyb2xsZWQnXG4gICAgICAgICAgaWYgKCFjaGVjay5yb2xsLnN0YW5kYnkpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgICAgICAgY2hlY2subW9kaWZpZXJDc3MgPSAndXBncmFkZSdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hlY2sucm9sbC5mYWlsZWQpIGNoZWNrLm1vZGlmaWVyQ3NzID0gJ2Rvd25ncmFkZSdcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY2hlY2sucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lIHx8XG4gICAgICAgICAgICAgIGNoZWNrLnJvbGwuZmFpbGVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY2hlY2suaGFzTW9kaWZpZXIgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSB7XG4gICAgICBjaGVjay5vcHRpb25zID0gW11cbiAgICAgIGZvciAoY29uc3QgYyBvZiBbJ2NvbiddKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljID0gdGhpcy5hY3Rvci5nZXRDaGFyYWN0ZXJpc3RpYyhjKVxuICAgICAgICBpZiAoY2hhcmFjdGVyaXN0aWM/LnZhbHVlKSBjaGVjay5vcHRpb25zLnB1c2goY2hhcmFjdGVyaXN0aWMubGFiZWwpXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmFjdG9yLmRyaXZlU2tpbGxzKSB7XG4gICAgICAgIGNoZWNrLm9wdGlvbnMucHVzaChzLm5hbWUpXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmFjdG9yLnBpbG90U2tpbGxzKSB7XG4gICAgICAgIGNoZWNrLm9wdGlvbnMucHVzaChzLm5hbWUpXG4gICAgICB9XG4gICAgICBjaGVjay5oYXNPcHRpb25zID0gISFjaGVjay5vcHRpb25zLmxlbmd0aFxuXG4gICAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LmlkKSB7XG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5hY3Rvci5maW5kKHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICBjb25zdCBnYW1lSXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgICAgIGlmIChnYW1lSXRlbSkgaXRlbSA9IHRoaXMuYWN0b3IuZmluZChnYW1lSXRlbS5uYW1lKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnaXRlbScgJiYgaXRlbS52YWx1ZS5kYXRhPy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5uYW1lXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ3NraWxsJ1xuICAgICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnY2hhcmFjdGVyaXN0aWMnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgICAgIGNoZWNrLmlzQ2hhcmFjdGVyaXN0aWMgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2F0dHJpYnV0ZSdcbiAgICAgICAgICAgIGNoZWNrLmlzQXR0cmlidXRlID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLmZpbmQodGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZSlcbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnaXRlbScgJiYgaXRlbS52YWx1ZS5kYXRhPy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5uYW1lXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ3NraWxsJ1xuICAgICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnY2hhcmFjdGVyaXN0aWMnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgICAgIGNoZWNrLmlzQ2hhcmFjdGVyaXN0aWMgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2F0dHJpYnV0ZSdcbiAgICAgICAgICAgIGNoZWNrLmlzQXR0cmlidXRlID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uaWQpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmdldCh0aGlzLmRhdGEuc3BlZWRDaGVjay5pZClcbiAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtXG4gICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICBjaGVjay5yZWZTZXQgPSBmYWxzZVxuICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS5iYXNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lICYmIHRoaXMuZGF0YS5zcGVlZENoZWNrPy5zY29yZSkge1xuICAgICAgY2hlY2submFtZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLm5hbWVcbiAgICAgIGNoZWNrLnNjb3JlID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2suc2NvcmVcbiAgICAgIGNoZWNrLnJlZlNldCA9IGZhbHNlXG4gICAgfVxuXG4gICAgY2hlY2suY2FuQmVSb2xsZWQgPSB0cnVlXG5cbiAgICBpZiAoIWNoZWNrLnJvbGxlZCAmJiAhY2hlY2suc2NvcmUpIHtcbiAgICAgIGNoZWNrLmNzc0NsYXNzZXMgKz0gJyBpbnZhbGlkJ1xuICAgICAgY2hlY2suY2FuQmVSb2xsZWQgPSBmYWxzZVxuICAgIH1cbiAgICBjaGVjay5pc1ZhbGlkID0gY2hlY2sucm9sbGVkICYmICFpc05hTihjaGVjay5zY29yZSlcblxuICAgIHJldHVybiBjaGVja1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0QnlSb2xlQW5kRGV4IChhLCBiKSB7XG4gIGlmICghYSAmJiBiKSByZXR1cm4gMVxuICBpZiAoIWIgJiYgYSkgcmV0dXJuIC0xXG4gIGlmICghYSAmJiAhYikgcmV0dXJuIDBcbiAgLy8gUHV0IGNoYXNlcnMgZmlyc3RcbiAgaWYgKGIuY2hhc2VyICYmICFhLmNoYXNlcikgcmV0dXJuIDFcbiAgaWYgKGEuY2hhc2VyICYmICFiLmNoYXNlcikgcmV0dXJuIC0xXG4gIC8vIElmIHNhbWV0eXBlIHNvcnQgYnkgZGV4XG4gIHJldHVybiBhLmRleCAtIGIuZGV4XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgRW5oYW5jZWRDaGF0Q2FyZCB9IGZyb20gJy4uLy4uL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBfcGFydGljaXBhbnQgfSBmcm9tICcuLi8uLi9pdGVtcy9jaGFzZS9wYXJ0aWNpcGFudC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBjcmVhdGVJbmxpbmVSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ2hhc2VPYnN0YWNsZUNhcmQgZXh0ZW5kcyBFbmhhbmNlZENoYXRDYXJkIHtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICBjb25zdCBvcHRpb25zID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuaHRtbCcsXG4gICAgICBHTVVwZGF0ZTogdHJ1ZVxuICAgIH0pXG4gICAgb3B0aW9ucy5jbGFzc2VzLnB1c2goJ29ic3RhY2xlLWNhcmQnKVxuICAgIHJldHVybiBvcHRpb25zXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEuc3RhdHVzID0gW11cbiAgICBkYXRhLnN0cmluZ3MgPSB7fVxuICAgIGRhdGEuZGlzcGxheUFjdG9yT25DYXJkID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgICAvLyBkYXRhLnBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLnBhcnRpY2lwYW50RGF0YSlcblxuICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgbmFtZTpcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdGlvbkNvc3QnKSArIGAgOiR7dGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdH1gXG4gICAgfSlcblxuICAgIGRhdGEuY2FyZC5icmVha2FibGVPYnN0YWNsZSA9XG4gICAgICBkYXRhLmRhdGEub2JzdGFjbGU/LmJhcnJpZXIgJiYgZGF0YS5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cyAvLyBUT0RPOiBDaGVjayBpZiB1c2VmdWxsXG4gICAgZGF0YS5jYXJkLnZhbGlkQ2hlY2sgPSBmYWxzZVxuXG4gICAgaWYgKFxuICAgICAgZGF0YS5kYXRhLnN0YXRlcz8ub2JzdGFjbGVEZWZpbmVkICYmXG4gICAgICAoZGF0YS5kYXRhLm9ic3RhY2xlLmhhemFyZCB8fFxuICAgICAgICAoZGF0YS5kYXRhLm9ic3RhY2xlLmJhcnJpZXIgJiYgIWRhdGEuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpKVxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IHRydWVcbiAgICAgIGRhdGEuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50Py5hY3Rvcikge1xuICAgICAgZGF0YS5za2lsbCA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZmluZChkYXRhLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lKVxuICAgICAgZGF0YS5jaGVja09wdGlvbnMgPSB0aGlzLmNoYXNlLmdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzKFxuICAgICAgICB0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkXG4gICAgICApXG4gICAgICBpZiAoZGF0YS5za2lsbCkge1xuICAgICAgICBkYXRhLnZhbGlkQ2hlY2sgPSB0cnVlXG4gICAgICAgIGRhdGEudmFsaWRTa2lsbCA9IHRydWVcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSAmJiBkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIHtcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhLmNoZWNrT3B0aW9ucyA9IHRoaXMuY2hhc2UuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzXG4gICAgICBkYXRhLmR1bW15QWN0b3IgPSB0cnVlXG4gICAgICBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSAmJiBkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIHtcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZGF0YS5kYXRhLmJvbnVzRGljZSkgZGF0YS5kYXRhLmJvbnVzRGljZSA9IDBcblxuICAgIGlmIChcbiAgICAgIGRhdGEuZGF0YS5ib251c0RpY2UgPCAyICYmXG4gICAgICBkYXRhLmRhdGEudG90YWxBY3Rpb25Db3N0IDwgZGF0YS5kYXRhLm1vdmVtZW50QWN0aW9uXG4gICAgKSB7XG4gICAgICBkYXRhLmNhblRha2VDYXV0aW91c0FwcHJvYWNoID0gdHJ1ZVxuICAgIH1cblxuICAgIGRhdGEuY3VzdG9tV2VhcG9uID0gZmFsc2VcbiAgICBpZiAodGhpcy5kYXRhLndlYXBvbkNob2ljZSA9PT0gJzAnKSB7XG4gICAgICBkYXRhLmN1c3RvbVdlYXBvbiA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoZGF0YS52YWxpZENoZWNrKSB7XG4gICAgICBsZXQgY2hlY2tOYW1lLCB2YWx1ZVxuICAgICAgaWYgKGRhdGEuc2tpbGwpIHtcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5za2lsbC52YWx1ZS5uYW1lXG4gICAgICAgIHZhbHVlID0gZGF0YS5za2lsbC52YWx1ZS52YWx1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZVxuICAgICAgICB2YWx1ZSA9IGRhdGEuZGF0YS5jaGVja1RocmVzaG9sZFxuICAgICAgfVxuICAgICAgZGF0YS5zdHJpbmdzLmNoZWNrUm9sbFJlcXVlc3QgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFza1JvbGwnLCB7XG4gICAgICAgIG5hbWU6IGNoZWNrTmFtZSxcbiAgICAgICAgdmFsdWVcbiAgICAgIH0pXG4gICAgICBpZiAoZGF0YS5kYXRhLmJvbnVzRGljZSAhPT0gMCkge1xuICAgICAgICBpZiAoZGF0YS5kYXRhLmJvbnVzRGljZSA+IDApIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCArPSBgICgrJHtkYXRhLmRhdGEuYm9udXNEaWNlfSlgXG4gICAgICAgIH0gZWxzZSBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCArPSBgICgke2RhdGEuZGF0YS5ib251c0RpY2V9KWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5kYXRhLnN0YXRlcz8ub2JzdGFjbGVEZWZpbmVkKSB7XG4gICAgICBkYXRhLnN0cmluZ3Mub2JzdGFjbGVEZWZpbmVkID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWNpbmdPYnN0YWNsZScsIHtcbiAgICAgICAgdHlwZTogZGF0YS5kYXRhLm9ic3RhY2xlLmJhcnJpZXJcbiAgICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BQmFycmllcicpXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQUhhemFyZCcpXG4gICAgICB9KVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5uYW1lKSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURlZmluZWQgKz0gYCAoJHtkYXRhLmRhdGEub2JzdGFjbGUubmFtZX0pYFxuICAgICAgfVxuXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmNhbkFza1JvbGwgPSB0cnVlXG4gICAgICAvLyBkYXRhLmRhdGEuc3RhdGVzLm9ic3RhY2xlQ2FuQmVCcm9rZW4gPSBmYWxzZVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5iYXJyaWVyKSB7XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmFycmllcicpIH0pXG4gICAgICAgIGlmIChkYXRhLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSB7XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5CcmVha2FibGUnKSB9KVxuICAgICAgICAgIC8vIGRhdGEuZGF0YS5zdGF0ZXMub2JzdGFjbGVDYW5CZUJyb2tlbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHtcbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXphcmQnKSB9KVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xuICAgICAgICBpZiAoIWRhdGEudmFsaWRDaGVjaykge1xuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vVmFsaWRDaGVjaycpLFxuICAgICAgICAgICAgY3NzOiAnZXJyb3InXG4gICAgICAgICAgfSlcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuRW50ZXJWYWx1ZVRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICdDb0M3LlNraWxsU2VsZWN0QmFzZScsXG4gICAgICAgICAgICB7IG5hbWU6IGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgfVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoIWRhdGEuZGF0YS5jaGVja1RocmVzaG9sZCkgZGF0YS5kYXRhLnN0YXRlcy5jYW5Bc2tSb2xsID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIGlmICghZGF0YS52YWxpZFNraWxsKSB7XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9WYWxpZFNraWxsJyksXG4gICAgICAgICAgICBjc3M6ICd3YXJuaW5nJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhaykge1xuICAgICAgICBsZXQgZGFtYWdlU3RhdHVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJyZWFrRG93bicpXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8ub2JzdGFjbGVEYW1hZ2VSb2xsPy50b3RhbCkge1xuICAgICAgICAgIGRhbWFnZVN0YXR1cyArPSBgIDogJHt0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwudG90YWx9YFxuICAgICAgICB9XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IGRhbWFnZVN0YXR1c1xuICAgICAgICB9KVxuXG4gICAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGFtYWdlUm9sbGVkKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGw/LnRvdGFsIDw9IDApIHtcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURhbWFnZSA9XG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob0RhbWFnZURlYWx0JylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YS5pbmxpbmVEYW1hZ2VSb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsXG4gICAgICAgICAgICApPy5vdXRlckhUTUxcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURhbWFnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGFtYWdlRGVhbHQnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBkYXRhLmlubGluZURhbWFnZVJvbGxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlKSB7XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmVnb3RpYXRlJykgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2gpIHtcbiAgICAgICAgY29uc3QgY2F1dGlvdXNTdGF0dXMgPSB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhdXRpb3VzJyksXG4gICAgICAgICAgY3NzOiAnJ1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoID4gMSkge1xuICAgICAgICAgIGNhdXRpb3VzU3RhdHVzLmNzcyA9ICdzdHJvbmcnXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLmNhdXRpb3VzQXBwcm9hY2hUeXBlID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuQmVpbmdWZXJ5Q2F1dGlvdXMnXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jYXV0aW91c0FwcHJvYWNoVHlwZSA9XG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmVpbmdDYXV0aW91cycpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UpIGNhdXRpb3VzU3RhdHVzLmNzcyArPSAnIGNvbnN1bWUnXG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goY2F1dGlvdXNTdGF0dXMpXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2spIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZSAvLyBPbiBoYXphcmQsIHlvdSBwYXNzIGV2ZW4gaWYgeW91IGZhaWwgeW91ciByb2xsXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5wYXNzZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5tb3ZlUGxheWVyID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPSB0cnVlXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlUGFzc2VkID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuT2JzdGFjbGVQYXNzZWQnXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5sdWNrU3BlbnQpIHtcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZVBhc3NlZCArPSBgICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuR290THVja3knXG4gICAgICAgICAgICApfSlgXG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlN1Y2Nlc3MnKSxcbiAgICAgICAgICAgIGNzczogJ3N1Y2Nlc3MnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5pc0Z1bWJsZSkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jaGVja0ZhaWxlZCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PYnN0YWNsZUZ1bWJsZScpXG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJyksXG4gICAgICAgICAgICBjc3M6ICdmdW1ibGUnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tGYWlsZWQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT2JzdGFjbGVGYWlsJylcbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJyksXG4gICAgICAgICAgICBjc3M6ICdmYWlsdXJlJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5wbGF5ZXJBY3Rpb25EZWZpbmVkKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCkge1xuICAgICAgICBkYXRhLnN0cmluZ3MucGxheWVySW50ZW50aW9ucyA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5UcnlUb05lZ290aWF0ZUhhemFyZCdcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuYmFycmllcikge1xuICAgICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5wbGF5ZXJJbnRlbnRpb25zID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuVHJ5VG9HZXRQYXN0QmFycmllcnMnXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhaykge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5wbGF5ZXJJbnRlbnRpb25zID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRyeVRvQnJlYWsnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2hlY2tSb2xsZWQpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCkge1xuICAgICAgICAvLyBJZiB0aGUgY2FyZCBpcyByZXNvbHZlZCB0aGUgY2hlY2sgaXMgZnJvemVuXG4gICAgICAgIGRhdGEuaHRtbENoZWNrID0gYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suaW5saW5lQ2hlY2s/Lm91dGVySFRNTFxuICAgICAgfSBlbHNlIGRhdGEuaHRtbENoZWNrID0gYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suZ2V0SHRtbFJvbGwoKVxuICAgIH1cblxuICAgIC8vIGlmICh0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkRGFtYWdlUm9sbCkge1xuICAgIC8vICAgaWYgKCFkYXRhLmRhdGEuYXJtb3IpIHtcbiAgICAvLyAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IpXG4gICAgLy8gICAgICAgZGF0YS5kYXRhLmFybW9yID1cbiAgICAvLyAgICAgICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IudmFsdWUgfHwgMFxuICAgIC8vICAgfVxuICAgIC8vICAgaWYgKGRhdGEuZGF0YS5hcm1vcikge1xuICAgIC8vICAgICBpZiAoaXNOYU4oTnVtYmVyKGRhdGEuZGF0YS5hcm1vcikpKSBkYXRhLmRhdGEuYXJtb3IgPSBudWxsXG4gICAgLy8gICB9XG4gICAgLy8gfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkKSB7XG4gICAgICBkYXRhLnBsYXllckRhbWFnZVRha2VuID0gZmFsc2VcbiAgICAgIGRhdGEub2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCA9IGZhbHNlXG5cbiAgICAgIC8vIEhhcyB0aGUgb2JzdGFjbGUgY2hhbmdlZCA/XG4gICAgICBjb25zdCBkaWZmID0gdGhpcy5saXN0Q2hhbmdlcygpXG4gICAgICBpZiAoZGlmZi5jaGFuZ2VzKSB7XG4gICAgICAgIGRhdGEub2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gSXMgcGxheWVyIHRha2luZyBkYW1hZ2VcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlICYmIHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjaz8uaXNGYWlsdXJlKSB7XG4gICAgICAgIGRhdGEucGxheWVyRGFtYWdlVGFrZW4gPSB0cnVlXG4gICAgICAgIGRhdGEuaW5saW5lRGFtYWdlVGFrZW5Sb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsXG4gICAgICAgICk/Lm91dGVySFRNTFxuICAgICAgICAvLyBpZiAoZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPCAwKVxuICAgICAgICAvLyAgIGRhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gMFxuXG4gICAgICAgIGlmIChkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA9PT0gMCkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5kYW1hZ2VUYWtlbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Zb3VUYWtlTm9EYW1hZ2UnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5kYW1hZ2VUYWtlbiA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAnQ29DNy5Zb3VUYWtlU29tZURhbWFnZScsXG4gICAgICAgICAgICB7IGFtb3VudDogZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvdGFsRGFtYWdlJykgK1xuICAgICAgICAgICAgYCA6JHtkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbn1gXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCAmJlxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2s/LmlzRmFpbHVyZVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEuYWN0aW9uTG9zdCA9IHRydWVcbiAgICAgICAgZGF0YS5zdHJpbmdzLmFjdGlvbkxvc3QgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWW91TG9zdFRpbWUnKVxuICAgICAgICBkYXRhLmlubGluZUFjdGlvbkxvc3RSb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsXG4gICAgICAgICk/Lm91dGVySFRNTFxuICAgICAgfVxuXG4gICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhcmRSZXNvbHZlZCcpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCkge1xuICAgICAgaWYgKHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5maW5hbE91dGNvbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTW92ZVRvTG9jYXRpb24nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YS5zdHJpbmdzLmZpbmFsT3V0Y29tZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Eb250TW92ZVRvTG9jYXRpb24nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgR01VcGRhdGUgKCkge1xuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvQzc6IEdNVXBkYXRlIGNhbGxlZCBmcm9tIG5vbiBHTSB1c2VyJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQpIHtcbiAgICAgIC8vIENhcmQgaXMgcmVzb2x2ZWQsIGNvbXB1dGUgYWxsIGZvcm11bGFzIGFuZCBkYW1hZ2UuXG4gICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZERhbWFnZVJvbGw/LnRvdGFsKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsRGFtYWdlID0gdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbC50b3RhbFxuICAgICAgICBjb25zdCBhcm1vclZhbHVlID0gdGhpcy5kYXRhLmZsYWdzLmlnbm9yZUFybW9yID8gMCA6IHRoaXMuZGF0YS5hcm1vclxuICAgICAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEoYXJtb3JWYWx1ZSkpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPSAoXG4gICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChhcm1vclZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICApLnRvdGFsXG4gICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihhcm1vclZhbHVlKSkpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPSBOdW1iZXIoYXJtb3JWYWx1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPSB0b3RhbERhbWFnZSAtIHRoaXMuZGF0YS5hcm1vclxuICAgICAgICAgIGlmICh0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEucmVmbGVjdE9ic3RhbGVDaGFuZ2VzKSB7XG4gICAgICAgIHRoaXMuZGF0YS5yZWZsZWN0T2JzdGFsZUNoYW5nZXMgPSB0cnVlIC8vIEJ5IGRlZmF1bHQgcmVmbGVjdCBjaGFuZ2VzXG4gICAgICB9XG5cbiAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XG4gICAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID1cbiAgICAgICAgICAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSB8fCB0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkKSAmJlxuICAgICAgICAgICF0aGlzLmRhdGEuc3RhdGVzLmZhaWxlZENvbnNlcXVlbmNlc1JvbGxlZFxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5iYXJyaWVyICYmXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHM/Lm9ic3RhY2xlRGFtYWdlUm9sbD8udG90YWxcbiAgICAgICkge1xuICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZSkge1xuICAgICAgICAgIHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlID1cbiAgICAgICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbC50b3RhbFxuICAgICAgICB9XG4gICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5mbGFncy5vYnN0YWNsZURlc3RveWVkKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLmZsYWdzLm9ic3RhY2xlRGVzdG95ZWQgPVxuICAgICAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cyAtIHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlIDw9IDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCkge1xuICAgICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uQXJyYXkgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbkFycmF5XG4gICAgICApXG4gICAgICB0aGlzLmRhdGEuRUVDX0FDVElPTiA9IHsgZGV0YWNoRGF0YTogdHJ1ZSB9XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBsb2NhbENvbXB1dGUgKCkge31cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGFzc2lnbk9iamVjdHMgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjayAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0J1xuICAgICkge1xuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2sgPSBDb0M3Q2hlY2suZnJvbURhdGEodGhpcy5kYXRhLm9iamVjdHMuY2hlY2spXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9iamVjdHM/Lm9ic3RhY2xlRGFtYWdlUm9sbCAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcbiAgICApIHtcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbCA9IFJvbGwuZnJvbURhdGEoXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkRGFtYWdlUm9sbCAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbD8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsID0gUm9sbC5mcm9tRGF0YShcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkQWN0aW9uUm9sbCAmJlxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbD8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsID0gUm9sbC5mcm9tRGF0YShcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZSAoKSB7XG4gICAgLy8gY29uc3QgY2hhc2UgPSBhd2FpdCBmcm9tVXVpZCh0aGlzLmRhdGEuY2hhc2VVdWlkKVxuICAgIGlmICghdGhpcy5jaGFzZSkgcmV0dXJuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmNoYXNlLmFjdGl2ZVBhcnRpY2lwYW50RGF0YT8udXVpZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhID0ge31cbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5zdGF0ZXMgPT09ICd1bmRlZmluZWQnKSB0aGlzLmRhdGEuc3RhdGVzID0ge31cblxuICAgIC8vIGNvbnN0IGxvY2F0aW9uID0gY2hhc2UuZ2V0TG9jYXRpb25EYXRhKHRoaXMuZGF0YS5sb2NhdGlvblV1aWQpXG4gICAgdGhpcy5kYXRhLm9ic3RhY2xlID0gdGhpcy5sb2NhdGlvbj8ub2JzdGFjbGVEZXRhaWxzIC8vIEZlZWQgdGhlIG9ic3RhY2xlIGRlZmluaXRpb25cbiAgICAvLyB0aGlzLmRhdGEucGFydGljaXBhbnREYXRhID0gY2hhc2UuYWN0aXZlUGFydGljaXBhbnREYXRhXG4gICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50VXVpZCA9IHRoaXMuY2hhc2UuYWN0aXZlUGFydGljaXBhbnREYXRhLnV1aWRcblxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50RGF0YT8uYm9udXNEaWNlID4gMCkge1xuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA9IHRoaXMucGFydGljaXBhbnREYXRhLmJvbnVzRGljZVxuICAgICAgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSB0cnVlXG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuaGFzQm9udXNEaWNlID0gdGhpcy5wYXJ0aWNpcGFudC5oYXNCb251c0RpY2VcbiAgICB9XG5cbiAgICB0aGlzLmRhdGEubW92ZW1lbnRBY3Rpb25BcnJheSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbkFycmF5XG4gICAgKVxuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA9IHRoaXMucGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgPSAwXG4gIH1cblxuICBnZXQgcGFydGljaXBhbnQgKCkge1xuICAgIGlmICghdGhpcy5wYXJ0aWNpcGFudERhdGEpIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyBpZiAoIXRoaXMuX3BhcnRpY2lwYW50KVxuICAgIC8vICAgdGhpcy5fcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMucGFydGljaXBhbnREYXRhKVxuICAgIC8vIHJldHVybiB0aGlzLl9wYXJ0aWNpcGFudFxuICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHRoaXMucGFydGljaXBhbnREYXRhKSAvLyBUTyBSRVNFVFxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50RGF0YSAoKSB7XG4gICAgaWYgKCF0aGlzLmNoYXNlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuY2hhc2UuZ2V0UGFydGljaXBhbnREYXRhKHRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWQpXG4gIH1cblxuICBnZXQgbG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5jaGFzZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmNoYXNlLmdldExvY2F0aW9uRGF0YSh0aGlzLmRhdGEubG9jYXRpb25VdWlkKVxuICB9XG5cbiAgZ2V0IG9ic3RhY2xlICgpIHtcbiAgICBpZiAoIXRoaXMubG9jYXRpb24pIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5vYnN0YWNsZURldGFpbHNcbiAgfVxuXG4gIGdldCBjaGFzZSAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuY2hhc2VVdWlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLl9jaGFzZSkgdGhpcy5fY2hhc2UgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZCh0aGlzLmRhdGEuY2hhc2VVdWlkKVxuICAgIHJldHVybiB0aGlzLl9jaGFzZVxuICB9XG5cbiAgZ2V0IHJvbGwgKCkge1xuICAgIGxldCByb2xsRGF0YVxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LmFjdG9yICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUpIHtcbiAgICAgIGNvbnN0IGFjdG9yU2tpbGwgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmZpbmQoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWVcbiAgICAgIClcbiAgICAgIGlmICh0eXBlb2YgYWN0b3JTa2lsbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcm9sbERhdGEgPSBhY3RvclNraWxsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb2xsRGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lLFxuICAgICAgICAgICAgdGhyZXNob2xkOiB0aGlzLmRhdGEuY2hlY2tUaHJlc2hvbGRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJvbGxEYXRhLmFjdG9yID0geyBhY3RvcktleTogdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5pZCB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lICYmIHRoaXMuZGF0YS5jaGVja1RocmVzaG9sZCkge1xuICAgICAgICByb2xsRGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lLFxuICAgICAgICAgICAgdGhyZXNob2xkOiB0aGlzLmRhdGEuY2hlY2tUaHJlc2hvbGRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFjdG9yOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLnBhcnRpY2lwYW50Lm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJvbGxEYXRhKSB7XG4gICAgICByb2xsRGF0YS5kaWNlTW9kaWZpZXIgPSB0aGlzLmRhdGE/LmJvbnVzRGljZSB8fCAwXG4gICAgICByb2xsRGF0YS5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICByb2xsRGF0YS5kZW55UHVzaCA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIHJvbGxEYXRhIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHZhbGlkRmFpbGVkUm9sbHMgKCkge1xuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrPy5pc0ZhaWx1cmUpIHJldHVybiBmYWxzZVxuICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlKSB7XG4gICAgICBjb25zdCBkYW1hZ2UgPVxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlfWBcbiAgICAgICAgICA6IHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZVxuICAgICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UpIHJldHVybiBmYWxzZVxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UgJiZcbiAgICAgICAgIVJvbGwudmFsaWRhdGUoZGFtYWdlKSAvLyBWYWxpZGF0ZSBvbmx5IHRha2UgYSBzdHJpbmcsIGlmIGRhbWFnZSBpcyBhIG51bWJlciBjb252ZXJ0IHRvIGEgc3RyaW5nXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNBY3Rpb25Db3N0KSB7XG4gICAgICBjb25zdCBhY3Rpb25Db3N0ID1cbiAgICAgICAgdHlwZW9mIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3R9YFxuICAgICAgICAgIDogdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3RcbiAgICAgIGlmICghdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QpIHJldHVybiBmYWxzZVxuICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ICYmICFSb2xsLnZhbGlkYXRlKGFjdGlvbkNvc3QpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IHdlYXBvbnNPcHRpb25zICgpIHtcbiAgICBjb25zdCB3ZWFwb25zID0gW11cbiAgICB0aGlzLnBhcnRpY2lwYW50LmFjdG9yPy5pdGVtVHlwZXM/LndlYXBvbj8uZm9yRWFjaCh3ID0+IHtcbiAgICAgIGxldCBmb3JtdWxhID0gdy5kYXRhLmRhdGEucmFuZ2Uubm9ybWFsLmRhbWFnZVxuICAgICAgbGV0IGRiID0gdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kYlxuICAgICAgaWYgKGRiID09PSBudWxsIHx8IE51bWJlcihkYikgPT09IDApIHtcbiAgICAgICAgZGIgPSAnJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGIgPSBgJHtkYn1gXG4gICAgICB9XG5cbiAgICAgIGlmIChkYiAmJiAhZGIuc3RhcnRzV2l0aCgnLScpKSBkYiA9ICcrJyArIGRiXG4gICAgICBpZiAody5kYXRhLmRhdGEucHJvcGVydGllcy5hZGRiKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiXG4gICAgICBpZiAody5kYXRhLmRhdGEucHJvcGVydGllcy5haGJkKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiICsgJy8yJ1xuICAgICAgd2VhcG9ucy5wdXNoKHtcbiAgICAgICAgbmFtZTogYCR7dy5kYXRhLm5hbWV9ICgke2Zvcm11bGF9KWAsXG4gICAgICAgIGRhbWFnZTogZm9ybXVsYSxcbiAgICAgICAgdXVpZDogdy51dWlkXG4gICAgICB9KVxuICAgIH0pXG4gICAgd2VhcG9ucy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIGlmIChcbiAgICAgICF3ZWFwb25zLmZpbmQodyA9PlxuICAgICAgICB3Lm5hbWVcbiAgICAgICAgICAudG9VcHBlckNhc2UoKVxuICAgICAgICAgIC5zdGFydHNXaXRoKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYXJtZWRXZWFwb25OYW1lJyk/LnRvVXBwZXJDYXNlKClcbiAgICAgICAgICApXG4gICAgICApXG4gICAgKSB7XG4gICAgICBsZXQgZGIgPSAnJ1xuICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IpIHtcbiAgICAgICAgZGIgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRiXG4gICAgICAgIGlmIChkYiAmJiAhZGIuc3RhcnRzV2l0aCgnLScpKSBkYiA9ICcrJyArIGRiXG4gICAgICAgIGlmIChkYiA9PT0gbnVsbCB8fCBOdW1iZXIoZGIpID09PSAwKSBkYiA9ICcnXG4gICAgICB9XG5cbiAgICAgIHdlYXBvbnMudW5zaGlmdCh7XG4gICAgICAgIG5hbWU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFybWVkV2VhcG9uTmFtZScpfSAoMUQzJHtkYn0pYCxcbiAgICAgICAgZGFtYWdlOiBgMUQzJHtkYn1gLFxuICAgICAgICB1dWlkOiAndW5hcm1lZCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgd2VhcG9ucy5wdXNoKHtcbiAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PdGhlcicpLFxuICAgICAgZGFtYWdlOiB0aGlzLmRhdGE/LmN1c3RvbVdlYXBvbkRhbWFnZSB8fCBudWxsLFxuICAgICAgdXVpZDogMFxuICAgIH0pXG4gICAgcmV0dXJuIHdlYXBvbnNcbiAgfVxuXG4gIGdldCB1c2VkV2VhcG9uICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YT8ud2VhcG9uQ2hvaWNlKSB7XG4gICAgICBpZiAoIXRoaXMud2VhcG9uc09wdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICghdGhpcy5kYXRhKSB0aGlzLmRhdGEgPSB7fSAvLyB1c2VsZXNzICEhIVxuICAgICAgdGhpcy5kYXRhLndlYXBvbkNob2ljZSA9IHRoaXMud2VhcG9uc09wdGlvbnNbMF0udXVpZFxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEud2VhcG9uQ2hvaWNlKSB7XG4gICAgICBjb25zdCB3ZWFwb24gPSB0aGlzLndlYXBvbnNPcHRpb25zLmZpbmQoXG4gICAgICAgIGUgPT4gZS51dWlkID09PSB0aGlzLmRhdGEud2VhcG9uQ2hvaWNlXG4gICAgICApXG4gICAgICBpZiAod2VhcG9uKSByZXR1cm4gd2VhcG9uXG4gICAgfVxuICB9XG5cbiAgZ2V0IGluZmxpY3RlZERhbWFnZUZvcm11bGEgKCkge1xuICAgIGlmICh0aGlzLnVzZWRXZWFwb24pIHtcbiAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMudXNlZFdlYXBvblxuICAgICAgaWYgKHdlYXBvbiAmJiB3ZWFwb24uZGFtYWdlICYmIFJvbGwudmFsaWRhdGUod2VhcG9uLmRhbWFnZSkpIHtcbiAgICAgICAgcmV0dXJuIHdlYXBvbi5kYW1hZ2VcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHZhbGlkT2JzdGFjbGVEYW1hZ2UgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMgJiZcbiAgICAgICFpc05hTihOdW1iZXIodGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cykpICYmXG4gICAgICBOdW1iZXIodGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cykgPiAwICYmXG4gICAgICB0aGlzLmluZmxpY3RlZERhbWFnZUZvcm11bGFcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHN0cmluZ3MgKCkge1xuICAgIGNvbnN0IHN0cmluZ3MgPSB7fVxuICAgIHN0cmluZ3MuZGFtYWdlUm9sbFJlcXVlc3QgPSB0aGlzLnVzZWRXZWFwb24ubmFtZVxuXG4gICAgcmV0dXJuIHN0cmluZ3NcbiAgfVxuXG4gIC8vIEFjdGlvbnMgOlxuICBhc3luYyB2YWxpZGF0ZUNhcmQgKG9wdGlvbnMpIHtcbiAgICBsZXQgbG9hY3Rpb25DaGFuZ2VkXG4gICAgbGV0IHBhcnRpY2lwYW50Q2hhZ2VkID0gZmFsc2VcbiAgICBjb25zdCBvYnN0YWNsZVVwZGF0ZSA9IHt9XG4gICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzID0ge31cbiAgICBjb25zdCBwYXJ0aWNpcGFudFVwZGF0ZSA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5mbGFncy5vYnN0YWNsZURlc3RveWVkKSB7XG4gICAgICBsb2FjdGlvbkNoYW5nZWQgPSB0cnVlXG4gICAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZSA9IGZhbHNlXG4gICAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZURldGFpbHMuaGF6YXJkID0gZmFsc2VcbiAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyID0gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBkaWZmID0gdGhpcy5saXN0Q2hhbmdlcygpXG4gICAgaWYgKGRpZmYuY2hhbmdlcykge1xuICAgICAgaWYgKHRoaXMuZGF0YS5yZWZsZWN0T2JzdGFsZUNoYW5nZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGlmZi5vYnN0YWNsZSkpIHtcbiAgICAgICAgICBpZiAoa2V5ICE9PSAndHlwZScpIHtcbiAgICAgICAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlsc1t2YWx1ZS5rZXldID0gdmFsdWUubmV3XG4gICAgICAgICAgICBsb2FjdGlvbkNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlID4gMCAmJiB0aGlzLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSB7XG4gICAgICBsZXQgcmVtYWluaW5nSHAgPSB0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzXG4gICAgICByZW1haW5pbmdIcCAtPSB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZVxuICAgICAgaWYgKHJlbWFpbmluZ0hwIDwgMCkgcmVtYWluaW5nSHAgPSAwXG4gICAgICBpZiAodGhpcy5vYnN0YWNsZS5IaXRQb2ludHMgIT09IHJlbWFpbmluZ0hwKSB7XG4gICAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlscy5IaXRQb2ludHMgPSByZW1haW5pbmdIcFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzID0gcmVtYWluaW5nSHBcbiAgICAgICAgbG9hY3Rpb25DaGFuZ2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA+IDApIHtcbiAgICAgIHBhcnRpY2lwYW50Q2hhZ2VkID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kZWFsRGFtYWdlKFxuICAgICAgICAgIHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuLFxuICAgICAgICAgIHsgaWdub3JlQXJtb3I6IHRydWUgfVxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5ocCA9IHRoaXMucGFydGljaXBhbnREYXRhLmhwXG4gICAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmhwIC09IHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuXG4gICAgICAgIGlmIChwYXJ0aWNpcGFudFVwZGF0ZS5ocCA8IDApIHBhcnRpY2lwYW50VXBkYXRlLmhwID0gMFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0ID4gMCkge1xuICAgICAgcGFydGljaXBhbnRDaGFnZWQgPSB0cnVlXG4gICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID1cbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudERhdGEuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgICAgcGFydGljaXBhbnRVcGRhdGUuY3VycmVudE1vdmVtZW50QWN0aW9ucyAtPSB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID0gdHJ1ZSAvLyBCb251cyBkaWNlIGF3YXJkZWQgZHVyaW5nIGZsb3cgYXJlIGJlaW5nIGNvbnN1bWVkXG5cbiAgICBpZiAodGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UpIHtcbiAgICAgIHBhcnRpY2lwYW50Q2hhZ2VkID0gdHJ1ZVxuICAgICAgcGFydGljaXBhbnRVcGRhdGUuYm9udXNEaWNlID0gMFxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoXG4gICAgICAgICFpc05hTih0aGlzLmRhdGEuYm9udXNEaWNlKSAmJlxuICAgICAgICB0aGlzLmRhdGEuYm9udXNEaWNlICE9PSB0aGlzLnBhcnRpY2lwYW50LmJvbnVzRGljZVxuICAgICAgKSB7XG4gICAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmJvbnVzRGljZSA9IHRoaXMuZGF0YS5ib251c0RpY2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLm1vdmVQbGF5ZXIpIHtcbiAgICAgIGxldCB0YXJnZXRMb2NhdGlvblxuICAgICAgaWYgKHRoaXMuZGF0YS5mb3J3YXJkKSB7XG4gICAgICAgIHRhcmdldExvY2F0aW9uID0gdGhpcy5sb2NhdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0TG9jYXRpb24gPSB0aGlzLmNoYXNlLmdldExvY2F0aW9uU2hpZnQodGhpcy5sb2NhdGlvbi51dWlkLCB7XG4gICAgICAgICAgc2tpcDogLTFcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRhcmdldExvY2F0aW9uLnV1aWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jaGFzZS5tb3ZlUGFydGljaXBhbnRUb0xvY2F0aW9uKFxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnREYXRhLnV1aWQsXG4gICAgICAgICAgdGFyZ2V0TG9jYXRpb24udXVpZCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzY3JvbGxUb0xvY2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgYWN0aXZhdGVMb2NhdGlvbjogZmFsc2UsXG4gICAgICAgICAgICByZW5kZXI6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxvYWN0aW9uQ2hhbmdlZCkge1xuICAgICAgYXdhaXQgdGhpcy5jaGFzZS51cGRhdGVMb2NhdGlvbih0aGlzLmxvY2F0aW9uLnV1aWQsIG9ic3RhY2xlVXBkYXRlLCB7XG4gICAgICAgIHJlbmRlcjogZmFsc2VcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChwYXJ0aWNpcGFudENoYWdlZCkge1xuICAgICAgYXdhaXQgdGhpcy5jaGFzZS51cGRhdGVQYXJ0aWNpcGFudChcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudERhdGEudXVpZCxcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUsXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgfVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2xvc2VkID0gdHJ1ZVxuICAgIGF3YWl0IHRoaXMuY2hhc2UuYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKCkgLy8gUmVuZGVyIHdpbGwgYmUgZG9uZSB0aGVyZSAhXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGRlZmluZU9ic3RhY2xlIChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuc3RhdGVzKSB0aGlzLmRhdGEuc3RhdGVzID0ge31cbiAgICB0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGVmaW5lZCA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgdHJ5VG9OZWdvdGlhdGVPYnN0YWNsZSAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSB0cnVlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IHRydWVcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB0cnlUb0JyZWFrRG93bk9ic3RhY2xlIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5icmVha09yTmVnb3RpYXRlRGVmaW5lZCA9IHRydWVcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGNhbmNlbE9ic3RhY2xlRGVmaW5pdGlvbiAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEZWZpbmVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyBjYW5jZWxCcmVha09yUGFzc0Nob2ljZSAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cykgcmV0dXJuIHRoaXMuY2FuY2VsT2JzdGFjbGVEZWZpbml0aW9uKClcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyByZXF1ZXN0Um9sbCAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMucGxheWVyQWN0aW9uRGVmaW5lZCA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgdGFrZUNhdXRpb3VzQXBwcm9hY2ggKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2gpIHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2ggPSAwXG4gICAgdGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCArPSAxXG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSArPSAxXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSkge1xuICAgICAgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSB0cnVlXG4gICAgfVxuICAgIGlmICghdGhpcy5kYXRhLmZsYWdzLmhhc0JvbnVzRGljZSkge1xuICAgICAgdGhpcy5kYXRhLmZsYWdzLmhhc0JvbnVzRGljZSA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA8PSB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0KSB7IC8vIEFsbCBtb3YgYWN0aW9uIGhhdmUgYmVlbiB1c2VkIHRvIHRha2UgY3VhdGlvdXMgYXBwcm9hY2guXG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9IGZhbHNlIC8vIERvIG5vdCBjb25zdW1lIHRoZSBib251cyBkaWNlLlxuICAgICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgICB0aGlzLmRhdGEubW92ZVBsYXllciA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyByb2xsU2tpbGxDaGVjayAob3B0aW9ucykge1xuICAgIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMuZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSByZXR1cm5cbiAgICB0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnKVxuICAgIGlmICghdGhpcy5yb2xsKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RoaW5nVG9Sb2xsJykpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEub2JqZWN0cykgdGhpcy5kYXRhLm9iamVjdHMgPSB7fVxuICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrID0gQ29DN0NoZWNrLmNyZWF0ZUZyb21BY3RvclJvbGxEYXRhKHRoaXMucm9sbClcbiAgICBpZiAoIXRoaXMuZGF0YS5vYmplY3RzLmNoZWNrKSByZXR1cm4gZmFsc2VcbiAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5kZW55UHVzaCA9IHRydWUgLy8gT2JzdGFjbGUgY2hlY2sgY2FuJ3QgYmUgcHVzaGVkXG4gICAgYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suX3BlcmZvcm0oeyBmb3JjZURTTjogdHJ1ZSB9KVxuICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gMVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2hlY2tSb2xsZWQgPSB0cnVlXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJylcbiAgICBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2sucGFzc2VkKSB7XG4gICAgICB0aGlzLmRhdGEubW92ZVBsYXllciA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5hcm1vciA9PT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvcikge1xuICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPVxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IudmFsdWUgfHwgMFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB1c2VMdWNrIChvcHRpb25zKSB7XG4gICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLCAndXNlTHVjaycsIHtcbiAgICAgIHRhcmdldDogb3B0aW9ucy5ldmVudC5jdXJyZW50VGFyZ2V0LFxuICAgICAgdXBkYXRlOiBmYWxzZVxuICAgIH0pXG4gICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLnBhc3NlZCkge1xuICAgICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgICB0aGlzLmRhdGEubW92ZVBsYXllciA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gMVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgcm9sbEZhaWxDb25zZXF1ZW5jZXMgKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5vYmplY3RzKSB0aGlzLmRhdGEub2JqZWN0cyA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNEYW1hZ2UgJiYgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2s/LmlzRmFpbHVyZSkge1xuICAgICAgY29uc3QgZGFtYWdlID1cbiAgICAgICAgdHlwZW9mIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZSA9PT0gJ251bWJlcidcbiAgICAgICAgICA/IGAke3RoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZX1gXG4gICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2VcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGwgPSBuZXcgUm9sbChkYW1hZ2UpXG4gICAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2s/LmlzRmFpbHVyZVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGFjdGlvbkNvc3QgPVxuICAgICAgICAgIHR5cGVvZiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdCA9PT0gJ251bWJlcidcbiAgICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3R9YFxuICAgICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdFxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsID0gbmV3IFJvbGwoYWN0aW9uQ29zdClcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gKHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwudG90YWwgLSAxKSAvLyAxIGFjdGlvbiBhbHJlYWR5IHNwZW5kIGZvciBza2lsbCBjaGVja1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuZmFpbGVkQ29uc2VxdWVuY2VzUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyBhc2tSb2xsT2JzdGFjbGVEYW1hZ2UgKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnBsYXllckFjdGlvbkRlZmluZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHJvbGxPYnN0YWNsZURhbWFnZSAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMpIHRoaXMuZGF0YS5vYmplY3RzID0ge31cbiAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwgPSBuZXcgUm9sbCh0aGlzLnVzZWRXZWFwb24/LmRhbWFnZSlcbiAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbClcbiAgICB0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGFtYWdlUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gMVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyBMaXN0IGFsbCBjaGFuZ2VzXG4gIGxpc3RDaGFuZ2VzICh2YWxpZGF0ZSA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGlmZiA9IHtcbiAgICAgIG9ic3RhY2xlOiB7fSxcbiAgICAgIHBsYXllcjoge30sXG4gICAgICBjaGFuZ2VzOiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBuYW1lcyA9IHtcbiAgICAgIGJhcnJpZXI6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UeXBlJyksXG4gICAgICBoYXphcmQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UeXBlJyksXG4gICAgICBoYXNIaXRQb2ludHM6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5CcmVha2FibGUnKSxcbiAgICAgIEhpdFBvaW50czogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhpdFBvaW50cycpLFxuICAgICAgaGFzQWN0aW9uQ29zdDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdGlvbkNvc3QnKSxcbiAgICAgIGZhaWxlZEFjdGlvbkNvc3Q6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3Rpb25Db3N0JyksXG4gICAgICBoYXNEYW1hZ2U6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaWdodEJhY2snKSxcbiAgICAgIGZhaWxlZENoZWNrRGFtYWdlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uRGFtYWdlJyksXG4gICAgICBjaGVja05hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGVjaycpLFxuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5hbWUnKVxuICAgIH1cblxuICAgIGlmICh2YWxpZGF0ZSAmJiAhdGhpcy5kYXRhLnZhbGlkYXRpb24pIHtcbiAgICAgIHRoaXMuZGF0YS52YWxpZGF0aW9uID0ge31cbiAgICB9XG5cbiAgICBjb25zdCBuZXdPYnN0YWNsZSA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdChcbiAgICAgIHRoaXMub2JzdGFjbGUsXG4gICAgICB0aGlzLmRhdGEub2JzdGFjbGVcbiAgICApXG4gICAgLy8gY29uc3Qgb2xkT2JzdGFjbGUgPSBmb3VuZHJ5LnV0aWxzLmRpZmZPYmplY3QodGhpcy5kYXRhLm9ic3RhY2xlLCB0aGlzLm9ic3RhY2xlKVxuXG4gICAgZm9yIChjb25zdCBba2V5XSBvZiBPYmplY3QuZW50cmllcyhuZXdPYnN0YWNsZSkpIHtcbiAgICAgIC8vIGlmICgnYmFycmllcicgPT0ga2V5IHx8ICdoYXphcmQnID09IGtleSlcbiAgICAgIC8vIHtcbiAgICAgIC8vICAgZGlmZi5jaGFuZ2VzID0gdHJ1ZVxuICAgICAgLy8gICBkaWZmLm9ic3RhY2xlLnR5cGUgPSB7XG4gICAgICAvLyAgICAgb2xkOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAvLyAgICAgICB0aGlzLm9ic3RhY2xlLmJhcnJpZXIgPyAnQ29DNy5CYXJyaWVyJyA6ICdDb0M3LkhhemFyZCdcbiAgICAgIC8vICAgICApLFxuICAgICAgLy8gICAgIG5ldzogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgLy8gICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmJhcnJpZXIgPyAnQ29DNy5CYXJyaWVyJyA6ICdDb0M3LkhhemFyZCdcbiAgICAgIC8vICAgICApLFxuICAgICAgLy8gICAgIGtleTogJ3R5cGUnLFxuICAgICAgLy8gICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UeXBlJylcbiAgICAgIC8vICAgfVxuICAgICAgLy8gICBpZiAodmFsaWRhdGUpIHtcbiAgICAgIC8vICAgICB0aGlzLmRhdGEudmFsaWRhdGlvbltrZXldID0gdHJ1ZVxuICAgICAgLy8gICAgIHRoaXMuZGF0YS52YWxpZGF0aW9uLnR5cGUgPSB0cnVlXG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH1cbiAgICAgIC8vIGVsc2VcbiAgICAgIC8vIHtcbiAgICAgIGlmIChcbiAgICAgICAgIShcbiAgICAgICAgICAobmV3T2JzdGFjbGVba2V5XSA9PT0gJycgJiYgdGhpcy5vYnN0YWNsZVtrZXldID09PSBudWxsKSB8fFxuICAgICAgICAgICghaXNOYU4oTnVtYmVyKG5ld09ic3RhY2xlW2tleV0pKSAmJlxuICAgICAgICAgICAgTnVtYmVyKG5ld09ic3RhY2xlW2tleV0pID09PSB0aGlzLm9ic3RhY2xlW2tleV0pXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBkaWZmLmNoYW5nZXMgPSB0cnVlXG5cbiAgICAgICAgZGlmZi5vYnN0YWNsZVtrZXldID0ge1xuICAgICAgICAgIG9sZDogdGhpcy5vYnN0YWNsZVtrZXldLFxuICAgICAgICAgIG5ldzogbmV3T2JzdGFjbGVba2V5XSxcbiAgICAgICAgICBuYW1lOiBuYW1lc1trZXldLFxuICAgICAgICAgIGtleVxuICAgICAgICB9XG4gICAgICAgIGlmICh2YWxpZGF0ZSkgdGhpcy5kYXRhLnZhbGlkYXRpb25ba2V5XSA9IHRydWVcbiAgICAgIH1cbiAgICAgIC8vIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGlmZlxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgY2FudmFzLCBEaWFsb2csIGZvdW5kcnksIGdhbWUsIFBJWEksIFRva2VuLCBUb2tlbkRvY3VtZW50LCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDaGFzZU9ic3RhY2xlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBfcGFydGljaXBhbnQsIHNvcnRCeVJvbGVBbmREZXggfSBmcm9tICcuL3BhcnRpY2lwYW50LmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXNlIGV4dGVuZHMgQ29DN0l0ZW0ge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3J1bm5pbmctc29saWQuc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHRcbiAgfVxuXG4gIC8vIEhhbmRsZSBwYXJ0aWNpcGFudHNcbiAgZ2V0IHBhcnRpY2lwYW50cyAoKSB7XG4gICAgY29uc3QgcExpc3QgPSBbXVxuICAgIGNvbnN0IHByZXlzID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAuZmlsdGVyKHAgPT4gIXAuY2hhc2VyKVxuICAgICAgLm1hcChwID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocClcbiAgICAgIH0pXG4gICAgY29uc3QgY2hhc2VycyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgLmZpbHRlcihwID0+IHAuY2hhc2VyKVxuICAgICAgLm1hcChwID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocClcbiAgICAgIH0pXG4gICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICAvLyBwLmluZGV4ID0gcExpc3QubGVuZ3RoIC0gMVxuICAgICAgcC5hc3Npc3QgPSBbXVxuICAgICAgaWYgKHAuY2hhc2VyKSB7XG4gICAgICAgIHAuYXNzaXN0ID0gY2hhc2Vyc1xuICAgICAgICAgIC5maWx0ZXIoYyA9PiBjLnV1aWQgIT09IHAudXVpZCAmJiAhYy5oYXNNYXhCb251c0RpY2UpXG4gICAgICAgICAgLm1hcChjID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IHV1aWQ6IGMudXVpZCwgbmFtZTogYy5uYW1lIH1cbiAgICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcC5hc3Npc3QgPSBwcmV5c1xuICAgICAgICAgIC5maWx0ZXIoYyA9PiBjLnV1aWQgIT09IHAudXVpZCAmJiAhYy5oYXNNYXhCb251c0RpY2UpXG4gICAgICAgICAgLm1hcChjID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IHV1aWQ6IGMudXVpZCwgbmFtZTogYy5uYW1lIH1cbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgICAgY29uc3QgcGFydGljcGFudCA9IG5ldyBfcGFydGljaXBhbnQocClcbiAgICAgIC8vIHBhcnRpY3BhbnQubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24oIHBhcnRpY3BhbnQudXVpZCkgLy8gUmVjdXJzaXZpdHlcbiAgICAgIHBMaXN0LnB1c2gocGFydGljcGFudClcbiAgICB9KVxuICAgIHJldHVybiBwTGlzdFxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50c09iamVjdCAoKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICBwYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIHAubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocC51dWlkKVxuICAgIH0pXG4gICAgcmV0dXJuIHBhcnRpY2lwYW50c1xuICB9XG5cbiAgZ2V0IGFjdGl2ZVBhcnRpY2lwYW50RGF0YSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gcC5hY3RpdmUpXG4gIH1cblxuICBnZXQgYWN0aXZlQWN0b3IgKCkge1xuICAgIGNvbnN0IHAgPSB0aGlzLmFjdGl2ZVBhcnRpY2lwYW50RGF0YVxuICAgIGlmICghcCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChwLmRvY1V1aWQpIHtcbiAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRnJvbUtleShwLmRvY1V1aWQpXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92ICgpIHtcbiAgICBjb25zdCBwTGlzdCA9IHRoaXMuYWN0dWFsUGFydGljaXBhbnRzLnNvcnQoXG4gICAgICAoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3ZcbiAgICApXG4gICAgcExpc3QuZm9yRWFjaChwID0+IHtcbiAgICAgIHAubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocC51dWlkKVxuICAgIH0pXG4gICAgcmV0dXJuIHBMaXN0XG4gIH1cblxuICBnZXQgcGFydGljaXBhbnRzQnlJbml0aWF0aXZlICgpIHtcbiAgICBjb25zdCBwTGlzdCA9IHRoaXMuYWN0dWFsUGFydGljaXBhbnRzLnNvcnQoXG4gICAgICAoYSwgYikgPT4gYi5pbml0aWF0aXZlIC0gYS5pbml0aWF0aXZlXG4gICAgKVxuICAgIHBMaXN0LmZvckVhY2gocCA9PiB7XG4gICAgICBwLmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHAudXVpZClcbiAgICB9KVxuICAgIHJldHVybiBwTGlzdFxuICB9XG5cbiAgZ2V0IHByZXlzICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gIXAuaXNDaGFzZXIgJiYgcC5pc1ZhbGlkKSB8fCBbXVxuICB9XG5cbiAgZ2V0IGNoYXNlcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiBwLmlzQ2hhc2VyICYmIHAuaXNWYWxpZCkgfHwgW11cbiAgfVxuXG4gIGdldCBhbGxIYXZlVmFsaWRNb3YgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5ldmVyeShlID0+IGUuaGFzVmFsaWRNb3YpXG4gIH1cblxuICBnZXQgYWxsSGF2ZVNwZWVkUm9sbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmV2ZXJ5KHAgPT4gcC5zcGVlZENoZWNrPy5yb2xsZWQpXG4gIH1cblxuICBnZXRQYXJ0aWNpcGFudExvY2F0aW9uIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmxvY2F0aW9ucz8ubGlzdD8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIGlmICghdGhpcy5zdGFydGVkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5sb2NhdGlvbnNcblxuICAgIGNvbnN0IGxvY2F0aW9uID0gbG9jYXRpb25zLmZpbmQobCA9PiB7XG4gICAgICBjb25zdCBscCA9IGwucGFydGljaXBhbnRzPy5maW5kKHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWQpXG4gICAgICByZXR1cm4gISFscFxuICAgIH0pXG4gICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICByZXR1cm4gbG9jYXRpb25cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0UGFydGljaXBhbnREYXRhIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBpZiAocGFydGljaXBhbnQpIHJldHVybiBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShwYXJ0aWNpcGFudCkgLy8gVE9ETyA6IGNoZWNrIGlmIHdlIG5lZWQgdG8gZHVwbGljYXRlXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0UGFydGljaXBhbnQgKHBhcnRpY2lwYW50VXVpZCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50RGF0YSA9IHRoaXMuZ2V0UGFydGljaXBhbnREYXRhKHBhcnRpY2lwYW50VXVpZClcbiAgICBpZiAocGFydGljaXBhbnREYXRhKSByZXR1cm4gbmV3IF9wYXJ0aWNpcGFudChwYXJ0aWNpcGFudERhdGEpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IG5leHRBY3RpdmVQYXJ0aWNpcGFudCAoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmUuZmluZChcbiAgICAgIHAgPT4gcC5kYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiAwXG4gICAgKVxuICB9XG5cbiAgZ2V0IHNsb3dlc3RQcmV5ICgpIHtcbiAgICBjb25zdCBwcmV5cyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3YpXG4gICAgICA/LmZpbHRlcihwID0+IHAuaXNQcmV5KVxuICAgIGlmIChwcmV5cy5sZW5ndGggPiAwKSByZXR1cm4gcHJleXNbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZmFzdGVzdENoYXNlciAoKSB7XG4gICAgY29uc3QgY2hhc2VycyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3YpXG4gICAgICA/LmZpbHRlcihwID0+IHAuaXNDaGFzZXIpXG4gICAgaWYgKGNoYXNlcnMubGVuZ3RoID4gMCkgcmV0dXJuIGNoYXNlcnMuc2xpY2UoLTEpLnBvcCgpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGFjdHVhbFBhcnRpY2lwYW50cyAoKSB7XG4gICAgY29uc3Qgc2xvd2VzdFByZXkgPSB0aGlzLnNsb3dlc3RQcmV5XG4gICAgY29uc3QgZmFzdGVzdENoYXNlciA9IHRoaXMuZmFzdGVzdENoYXNlclxuICAgIGxldCBwTGlzdCA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbmNsdWRlTGF0ZWNvbWVycyAmJiBzbG93ZXN0UHJleSkge1xuICAgICAgcExpc3QgPSBwTGlzdC5maWx0ZXIocCA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgcC5pc1ByZXkgfHwgKHAuaXNDaGFzZXIgJiYgcC5hZGp1c3RlZE1vdiA+PSBzbG93ZXN0UHJleS5hZGp1c3RlZE1vdilcbiAgICAgICAgKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3lzdGVtLmluY2x1ZGVFc2NhcGVkICYmIGZhc3Rlc3RDaGFzZXIpIHtcbiAgICAgIHBMaXN0ID0gcExpc3QuZmlsdGVyKHAgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHAuaXNDaGFzZXIgfHwgKHAuaXNQcmV5ICYmIHAuYWRqdXN0ZWRNb3YgPD0gZmFzdGVzdENoYXNlci5hZGp1c3RlZE1vdilcbiAgICAgICAgKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gcExpc3RcbiAgfVxuXG4gIGdldCBzbG93ZXN0UGFydGljaXBhbnQgKCkge1xuICAgIGNvbnN0IHBMaXN0ID0gdGhpcy5wYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92XG4gICAgaWYgKHBMaXN0Lmxlbmd0aCA+IDApIHJldHVybiBwTGlzdFswXVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVBhcnRpY2lwYW50cyAobGlzdCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSB0aGlzLmNsZWFuUGFydGljaXBhbnRMaXN0KGxpc3QpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyB1cGRhdGVQYXJ0aWNpcGFudCAocGFydGljaWFudFV1aWQsIHVwZGF0ZURhdGEsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgY29uc3QgdXBkYXRlID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodXBkYXRlRGF0YSlcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaWFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBpZiAocGFydGljaXBhbnRJbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodXBkYXRlLnV1aWQpIGRlbGV0ZSB1cGRhdGUudXVpZFxuICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QocGFydGljaXBhbnRzW3BhcnRpY2lwYW50SW5kZXhdLCB1cGRhdGUsIHtcbiAgICAgIG92ZXJ3cml0ZTogdHJ1ZVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgY2xlYW5QYXJ0aWNpcGFudExpc3QgKGxpc3QpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gbGlzdCB8fCBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgbGlzdC5mb3JFYWNoKHAgPT4ge1xuICAgICAgbGV0IGRhdGFcbiAgICAgIGlmIChwLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdfcGFydGljaXBhbnQnKSB7XG4gICAgICAgIGRhdGEgPSBwLmRhdGFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEgPSBwXG4gICAgICB9XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZEluZGV4KHBhcnRpY2lwYW50c0RhdGEsIGRhdGEudXVpZClcbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgcGFydGljaXBhbnRzRGF0YS5wdXNoKGRhdGEpXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGFydGljaXBhbnREYXRhTWlzc2luZycpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydGljaXBhbnRzRGF0YVtpbmRleF0gPSBkYXRhXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gcGFydGljaXBhbnRzRGF0YVxuICB9XG5cbiAgYXN5bmMgYXNzaXN0UGFydGljaXBhbnQgKFxuICAgIGFzc2lzdGFudFV1aWQsXG4gICAgYmVuZWZpY2lhcnlVdWlkLFxuICAgIHsgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgYXNzaXN0YW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChhc3Npc3RhbnRVdWlkKVxuICAgIGNvbnN0IGJlbmVmaWNpYXJ5ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChiZW5lZmljaWFyeVV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IGFzc2lzdGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IGFzc2lzdGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBjb25zdCBiZW5lZmljaWFyeUluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IGJlbmVmaWNpYXJ5VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuXG4gICAgaWYgKCFhc3Npc3RhbnQgfHwgIWJlbmVmaWNpYXJ5KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QYXJ0aWNpcGFudE5vdEZvdW5kJykpXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgaWYgKGJlbmVmaWNpYXJ5Lmhhc01heEJvbnVzRGljZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckJlbmVmaWNpYXJ5QXRNYXhCb251cycsIHtcbiAgICAgICAgICBuYW1lOiBiZW5lZmljaWFyeS5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgaWYgKHVzZU1vdmVtZW50QWN0aW9ucykge1xuICAgICAgaWYgKGFzc2lzdGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgMSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnROb3RFbm91Z2hNb3ZlbWVudCcsIHtcbiAgICAgICAgICAgIGFzc2lzdGFudFV1aWQsXG4gICAgICAgICAgICBhY3Rpb25zOiBhc3Npc3RhbnQuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgYXNzaXN0YW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKC0xKVxuICAgICAgcGFydGljaXBhbnRzRGF0YVthc3Npc3RhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShhc3Npc3RhbnQuZGF0YSlcbiAgICB9XG5cbiAgICBiZW5lZmljaWFyeS5hZGRCb251c0RpY2UoKVxuICAgIHBhcnRpY2lwYW50c0RhdGFbYmVuZWZpY2lhcnlJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIGJlbmVmaWNpYXJ5LmRhdGFcbiAgICApXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZUJvbnVzRGljZSAocGFydGljaXBhbnRVdWlkLCBkaWNlTnVtYmVyLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcblxuICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50LmJvbnVzRGljZSA+PSBkaWNlTnVtYmVyKSBwYXJ0aWNpcGFudC5yZW1vdmVCb251c0RpY2UoKVxuICAgIGVsc2UgcGFydGljaXBhbnQuYWRkQm9udXNEaWNlKClcbiAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyBjYXV0aW91c0FwcHJvYWNoIChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgeyB1c2VNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLCByZW5kZXIgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuXG4gICAgaWYgKCFwYXJ0aWNpcGFudCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudFV1aWROb3RGb3VuZCcsIHtcbiAgICAgICAgICBwYXJ0aWNpcGFudFV1aWRcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICApXG4gICAgY29uc3QgcGFydGljaXBhbnRJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBpZiAocGFydGljaXBhbnQuaGFzTWF4Qm9udXNEaWNlKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yUGFydGljaXBhbnRBdE1heEJvbnVzJywge1xuICAgICAgICAgIHBhcnRpY2lwYW50VXVpZFxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh1c2VNb3ZlbWVudEFjdGlvbnMpIHtcbiAgICAgIGlmIChwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgMSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnROb3RFbm91Z2hNb3ZlbWVudCcsIHtcbiAgICAgICAgICAgIGFzc2lzdGFudFV1aWQ6IHBhcnRpY2lwYW50VXVpZCxcbiAgICAgICAgICAgIGFjdGlvbnM6IHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIHBhcnRpY2lwYW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKC0xKVxuICAgIH1cbiAgICBwYXJ0aWNpcGFudC5hZGRCb251c0RpY2UoKVxuICAgIHBhcnRpY2lwYW50c0RhdGFbcGFydGljaXBhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHBhcnRpY2lwYW50LmRhdGFcbiAgICApXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIGFsdGVyUGFydGljaXBhbnRNb3ZlbWVudEFjdGlvbiAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIGNvdW50LFxuICAgIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcblxuICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG5cbiAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucyhjb3VudClcblxuICAgIHBhcnRpY2lwYW50c0RhdGFbcGFydGljaXBhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHBhcnRpY2lwYW50LmRhdGFcbiAgICApXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybiAoe1xuICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgIHJlbmRlciA9IHRydWUsXG4gICAgaHRtbCA9IG51bGxcbiAgfSA9IHt9KSB7XG4gICAgY29uc3QgYWN0aXZlUGFydGljaXBhbnQgPSB0aGlzLm5leHRBY3RpdmVQYXJ0aWNpcGFudFxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbixcbiAgICAgIHJlbmRlcixcbiAgICAgIGh0bWxcbiAgICB9XG4gICAgaWYgKCFhY3RpdmVQYXJ0aWNpcGFudCkgcmV0dXJuIHRoaXMuYWN0aXZhdGVQYXJ0aWNpcGFudCh1bmRlZmluZWQsIG9wdGlvbnMpXG4gICAgcmV0dXJuIHRoaXMuYWN0aXZhdGVQYXJ0aWNpcGFudChhY3RpdmVQYXJ0aWNpcGFudC51dWlkLCBvcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVQYXJ0aWNpcGFudCAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIHtcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICByZW5kZXIgPSB0cnVlLFxuICAgICAgaHRtbCA9IG51bGxcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgZGF0YVVwZGF0ZSA9IHRoaXMuZ2V0QWN0aXZhdGVQYXJ0aWNpcGFudFVwZGF0ZURhdGEocGFydGljaXBhbnRVdWlkLCB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgYWN0aXZlTG9jYXRpb246IGFjdGl2YXRlTG9jYXRpb24sXG4gICAgICBodG1sXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShkYXRhVXBkYXRlLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgZ2V0QWN0aXZhdGVQYXJ0aWNpcGFudFVwZGF0ZURhdGEgKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICB7IHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLCBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSwgaHRtbCA9IG51bGwgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHBVdWlkID0gcGFydGljaXBhbnRVdWlkXG4gICAgLy8gICA/IHBhcnRpY2lwYW50VXVpZFxuICAgIC8vICAgOiB0aGlzLnBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZVswXT8udXVpZFxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGFVcGRhdGUgPSB7fVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBkZWxldGUgcC5hY3RpdmVcbiAgICAgIGlmIChwVXVpZCAmJiBwVXVpZCA9PT0gcC51dWlkKSBwLmFjdGl2ZSA9IHRydWVcbiAgICB9KVxuICAgIHBhcnRpY2lwYW50c0RhdGFVcGRhdGVbJ3N5c3RlbS5wYXJ0aWNpcGFudHMnXSA9IHBhcnRpY2lwYW50c1xuXG4gICAgY29uc3QgcGFydGljaXBhbnRMb2NhdGlvbiA9IHRoaXMuZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwVXVpZClcbiAgICBsZXQgbG9jYXRpb25zRGF0YVVwZGF0ZSA9IG51bGxcbiAgICBpZiAocGFydGljaXBhbnRMb2NhdGlvbikge1xuICAgICAgaWYgKGFjdGl2YXRlTG9jYXRpb24pIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZSA9IHRoaXMuZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEoXG4gICAgICAgICAgcGFydGljaXBhbnRMb2NhdGlvbi51dWlkLFxuICAgICAgICAgIHsgc2Nyb2xsVG9Mb2NhdGlvbiwgaHRtbCB9XG4gICAgICAgIClcbiAgICAgIH0gZWxzZSBpZiAoc2Nyb2xsVG9Mb2NhdGlvbikge1xuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlID0ge31cbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLmZyb20nXSA9XG4gICAgICAgICAgdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uXG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGVbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byddID1cbiAgICAgICAgICB0aGlzLmdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uKHBhcnRpY2lwYW50TG9jYXRpb24udXVpZCwge1xuICAgICAgICAgICAgaHRtbFxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGUgPSB0aGlzLmdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhKHVuZGVmaW5lZCwge1xuICAgICAgICBzY3JvbGxUb0xvY2F0aW9uXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbnNEYXRhVXBkYXRlKSB7XG4gICAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChcbiAgICAgICAgcGFydGljaXBhbnRzRGF0YVVwZGF0ZSxcbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZVxuICAgICAgKVxuICAgIH0gZWxzZSByZXR1cm4gcGFydGljaXBhbnRzRGF0YVVwZGF0ZVxuICB9XG5cbiAgYWN0aXZlUGFydGljaXBhbnRPYnN0YWNsZUNoZWNrIChcbiAgICBsb2NhdGlvblV1aWQsXG4gICAgeyBtb3ZlUGFydGljaXBhbnQgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENoYXNlT2JzdGFjbGVDYXJkKHtcbiAgICAgIGNoYXNlVXVpZDogdGhpcy51dWlkLFxuICAgICAgbG9jYXRpb25VdWlkLFxuICAgICAgbW92ZVBhcnRpY2lwYW50LFxuICAgICAgZm9yd2FyZDogbG9jYXRpb25VdWlkICE9PSB0aGlzLmFjdGl2ZUxvY2F0aW9uLnV1aWRcbiAgICB9KVxuICAgIGNhcmQudG9NZXNzYWdlKClcblxuICAgIC8vIGNvbnN0IHRlc3QgPSBuZXcgdGVzdENhcmQoKVxuICAgIC8vIHRlc3QuaW5pdGlhbGl6ZSh7fSlcbiAgICAvLyB0ZXN0LnRvTWVzc2FnZSgpXG4gIH1cblxuICAvLyBIYW5kbGUgcm91bmRzXG5cbiAgYXN5bmMgcHJvZ3Jlc3NUb05leHRSb3VuZCAoeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgcC5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgICBwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKz0gcC5tb3ZlbWVudEFjdGlvblxuICAgICAgICBpZiAocC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gcC5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgICAgIHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHAubW92ZW1lbnRBY3Rpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICB0aGlzLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybih7IHJlbmRlciB9KVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyB1cGRhdGVSb2xsIChyb2xsU3RyaW5nKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHJvbGxTdHJpbmcpXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICAgIDogW11cbiAgICAgIGNvbnN0IGluZGV4ID0gcGFydGljaXBhbnRzLmZpbmRJbmRleChwID0+IHAucm9sbFV1aWQgPT09IHJvbGwudXVpZClcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBkYXRhOiByb2xsU3RyaW5nLFxuICAgICAgICB0eXBlOiAnaW52b2tlJyxcbiAgICAgICAgbWV0aG9kOiAndXBkYXRlUm9sbCcsXG4gICAgICAgIGl0ZW06IHRoaXMudXVpZFxuICAgICAgfVxuICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgIH1cbiAgfVxuXG4gIC8vIGhhbmRsZSBsb2NhdGlvbnNcbiAgZ2V0IGxvY2F0aW9ucyAoKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5zdGFydGVkXG4gICAgICA/IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICAgIDogW11cbiAgICAgIDogdGhpcy5pbml0VHJhY2tcbiAgICB0aGlzLnByb2Nlc3NMb2NhdGlvbnMobG9jYXRpb25zKVxuICAgIHJldHVybiBsb2NhdGlvbnNcbiAgfVxuXG4gIGdldExvY2F0aW9uRGF0YSAobG9jYXRpb25VdWlkLCB7IGR1cGxpY2F0ZURhdGEgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZURhdGFcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5sb2NhdGlvbnMpXG4gICAgICA6IHRoaXMubG9jYXRpb25zXG4gICAgcmV0dXJuIGxvY2F0aW9ucy5maW5kKGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gIH1cblxuICBwcm9jZXNzTG9jYXRpb25zIChsb2NhdGlvbnMpIHtcbiAgICBpZiAoIWxvY2F0aW9ucz8ubGVuZ3RoKSByZXR1cm5cbiAgICBsb2NhdGlvbnNbMF0uZmlyc3QgPSB0cnVlXG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbG9jYXRpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgY2xhc3NlcyA9IFtdXG4gICAgICBjb25zdCBsb2NhdGlvbiA9IGxvY2F0aW9uc1tpbmRleF1cbiAgICAgIGlmICghbG9jYXRpb24ubmFtZSkgY2xhc3Nlcy5wdXNoKCdlbXB0eScpXG4gICAgICBpZiAobG9jYXRpb24uYWN0aXZlKSBjbGFzc2VzLnB1c2goJ2FjdGl2ZScpXG4gICAgICBpZiAobG9jYXRpb24uaW5pdCAmJiAhdGhpcy5zdGFydGVkKSBjbGFzc2VzLnB1c2goJ2luaXQnKVxuICAgICAgbG9jYXRpb24uY3NzQ2xhc3NlcyA9IGNsYXNzZXMuam9pbignICcpXG4gICAgfVxuXG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAxKSBsb2NhdGlvbnNbbG9jYXRpb25zLmxlbmd0aCAtIDFdLmxhc3QgPSB0cnVlXG5cbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGlmIChsLnBhcnRpY2lwYW50cyAmJiBsLnBhcnRpY2lwYW50cy5sZW5ndGgpIHtcbiAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiAhKHAgPT09IG51bGwpKVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGwucGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZWxlbSA9IGwucGFydGljaXBhbnRzW2ldIC8vIEluaXQgdHJhY2sgPSBvbmx5IHV1aWQsIHVwZGF0ZSBsb2NhdGlvbiBsaXN0IGNoYW5nZSBmb3IgdXVpZFxuXG4gICAgICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5lcnJvcihgVHlwZSA6ICR7dHlwZW9mIGVsZW19YClcbiAgICAgICAgICBsZXQgcFxuICAgICAgICAgIGlmICh0eXBlb2YgZWxlbSA9PT0gJ3N0cmluZycgfHwgZWxlbSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICAgICAgcCA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gZWxlbSA9PT0gcC51dWlkKSAvLyBSZXRyaWV2ZSBwYXJ0aWNpcGFudCBkYXRhIGZyb20gbGlzdC5cbiAgICAgICAgICB9IGVsc2UgaWYgKGVsZW0/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnX3BhcnRpY2lwYW50Jykge1xuICAgICAgICAgICAgcCA9IHVuZGVmaW5lZCAvLyBwYXJ0aWNpcGFudCBpcyBhbHJlYWR5IHByb2Nlc3NlZC5cbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhcnRpY2lwYW50QWxyZWFkeVByb2Nlc3NlZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSBlbHNlIHAgPSB1bmRlZmluZWRcblxuICAgICAgICAgIGlmICh0eXBlb2YgcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGwucGFydGljaXBhbnRzW2ldID0gbmV3IF9wYXJ0aWNpcGFudChwKSAvLyByZXBsYWNlIHV1aWQgd2l0aCBfcGFydGljaXBhbnRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gcGFydGljaXBhbnRzLnB1c2goIG51bGwpXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAnVW5kZWZpbmVkIHBhdGljaXBhbnQgd2hpbGUgcHJvY2Vzc2luZyBwYXJ0aWNpcGFudHMgYXJyYXknXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGwucGFydGljaXBhbnRzLnNvcnQoc29ydEJ5Um9sZUFuZERleCkgLy8gVE9ETyA6IHRlc3QgaWYgc29ydGluZyB3b3Jrc1xuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBnZXQgaW5pdFRyYWNrICgpIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QgfHxcbiAgICAgIHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aCA9PT0gMFxuICAgICkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IFtdIC8vICEhISEhISEgbG9jYXRpb25zIHZzIGluaXQgbG9jYXRpb25zICEhIVxuXG4gICAgY29uc3QgaW5pdCA9IHRoaXMuc3RhcnRpbmdMaW5lXG4gICAgbGV0IGxvY2F0aW9uc0luZGV4U3RhcnQsIGluaXRJbmRleFN0YXJ0LCBsb2NhdGlvbnNMZW5ndGhcbiAgICBpZiAoaW5pdC5sZW5ndGggPD0gMCkgbG9jYXRpb25zSW5kZXhTdGFydCA9IDBcbiAgICBlbHNlIGlmICh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4ID49IGluaXQubGVuZ3RoKSB7XG4gICAgICBsb2NhdGlvbnNJbmRleFN0YXJ0ID0gMFxuICAgIH0gZWxzZSBsb2NhdGlvbnNJbmRleFN0YXJ0ID0gaW5pdC5sZW5ndGggLSB0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4XG5cbiAgICBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA8PSAwKSBpbml0SW5kZXhTdGFydCA9IDBcbiAgICBlbHNlIGlmICh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4IDw9IGluaXQubGVuZ3RoKSBpbml0SW5kZXhTdGFydCA9IDBcbiAgICBlbHNlIGluaXRJbmRleFN0YXJ0ID0gdGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCAtIGluaXQubGVuZ3RoXG5cbiAgICBpZiAobG9jYXRpb25zSW5kZXhTdGFydCA9PT0gMCkge1xuICAgICAgbG9jYXRpb25zTGVuZ3RoID0gdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uc0xlbmd0aCA9XG4gICAgICAgIHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aCArIGxvY2F0aW9uc0luZGV4U3RhcnRcbiAgICB9XG5cbiAgICBpZiAoaW5pdC5sZW5ndGggIT09IDApIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4IDwgMCkge1xuICAgICAgICBmb3IgKFxuICAgICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgICAgaW5kZXggPCBNYXRoLmFicyh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4KTtcbiAgICAgICAgICBpbmRleCsrXG4gICAgICAgICkge1xuICAgICAgICAgIGluaXQucHVzaCh7XG4gICAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hhc2VMb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMpXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxvY2F0aW9uc0xlbmd0aDsgaW5kZXgrKykge1xuICAgICAgbGV0IGxvY2F0aW9uID0ge31cbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IFtdXG4gICAgICBpZiAoXG4gICAgICAgIGluZGV4ID49IGxvY2F0aW9uc0luZGV4U3RhcnQgJiZcbiAgICAgICAgaW5kZXggLSBsb2NhdGlvbnNJbmRleFN0YXJ0IDwgY2hhc2VMb2NhdGlvbnMubGlzdC5sZW5ndGhcbiAgICAgICkge1xuICAgICAgICBsb2NhdGlvbiA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgICAgIGNoYXNlTG9jYXRpb25zLmxpc3RbaW5kZXggLSBsb2NhdGlvbnNJbmRleFN0YXJ0XVxuICAgICAgICApXG4gICAgICAgIGxvY2F0aW9uLmluaXQgPSBmYWxzZVxuICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHM/LmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgaWYgKHAgIT0gbnVsbCkgcGFydGljaXBhbnRzLnB1c2gocClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmIChpbmRleCA+PSBpbml0SW5kZXhTdGFydCAmJiBpbmRleCAtIGluaXRJbmRleFN0YXJ0IDwgaW5pdC5sZW5ndGgpIHtcbiAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChsb2NhdGlvbiwgaW5pdFtpbmRleCAtIGluaXRJbmRleFN0YXJ0XSwge1xuICAgICAgICAgIG92ZXJ3cml0ZTogZmFsc2VcbiAgICAgICAgfSlcblxuICAgICAgICBpbml0W2luZGV4IC0gaW5pdEluZGV4U3RhcnRdLnBhcnRpY2lwYW50cz8uZm9yRWFjaChwID0+IHtcbiAgICAgICAgICBpZiAocCAhPSBudWxsKSBwYXJ0aWNpcGFudHMucHVzaChwKVxuICAgICAgICB9KVxuXG4gICAgICAgIGxvY2F0aW9uLnBhcnRpY2lwYW50cyA9IHBhcnRpY2lwYW50c1xuICAgICAgfVxuICAgICAgbG9jYXRpb24uZmlyc3QgPSBmYWxzZVxuICAgICAgbG9jYXRpb24uZW5kID0gZmFsc2VcbiAgICAgIGxvY2F0aW9ucy5wdXNoKGxvY2F0aW9uKVxuICAgIH1cblxuICAgIHJldHVybiBsb2NhdGlvbnNcbiAgfVxuXG4gIGdldCBzdGFydGluZ0xpbmUgKCkge1xuICAgIC8vIEdldCBwcmV5cyBhbmQgY2hlY2sgZm9yIGVzY2FwZWRcbiAgICBjb25zdCBwcmV5cyA9IHRoaXMuc3lzdGVtLmluY2x1ZGVFc2NhcGVkXG4gICAgICA/IHRoaXMucHJleXNcbiAgICAgIDogdGhpcy5wcmV5cz8uZmlsdGVyKHAgPT4gIXAuZGF0YS5lc2NhcGVkKVxuICAgIC8vIEdldCBjaGFzZXJzXG4gICAgY29uc3QgY2hhc2VycyA9IHRoaXMuc3lzdGVtLmluY2x1ZGVMYXRlY29tZXJzXG4gICAgICA/IHRoaXMuY2hhc2Vyc1xuICAgICAgOiB0aGlzLmNoYXNlcnM/LmZpbHRlcihjID0+ICFjLmRhdGEuZXhjbHVkZWQpXG5cbiAgICAvLyBSZWN1cnNpdml0eSAhISB3aXRoIGdldFBhcnRpY2lwYW50TG9jYXRpb24gYW5kIGdldCBwYXJ0aWNpcGFudHNcblxuICAgIC8vIElmIG5vIHByZXkgb3Igbm8gY2hhc3NlclxuICAgIC8vIGlmICgwID09IGNoYXNlcnMubGVuZ3RoKSB7XG4gICAgLy8gICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ05vIGNoYXNlcnMnKVxuICAgIC8vICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIH1cbiAgICAvLyBpZiAoMCA9PSBwcmV5cy5sZW5ndGgpIHtcbiAgICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignTm8gcHJleXMnKVxuICAgIC8vICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIH1cblxuICAgIC8vIEJ1aWxkIHN0YXJ0aW5nIHRyYWNrXG4gICAgY29uc3QgY2hhc2VUcmFjayA9IFtdXG5cbiAgICBjb25zdCBjaGFzZXJzTWluTW92ID0gdGhpcy5maW5kTWluTW92KGNoYXNlcnMpXG4gICAgY29uc3QgY2hhc2Vyc01heE1vdiA9IHRoaXMuZmluZE1heE1vdihjaGFzZXJzKVxuICAgIGNvbnN0IHByZXlzTWluTW92ID0gdGhpcy5maW5kTWluTW92KHByZXlzKVxuICAgIGNvbnN0IHByZXlzTWF4TW92ID0gdGhpcy5maW5kTWF4TW92KHByZXlzKVxuXG4gICAgaWYgKGNoYXNlcnNNaW5Nb3YgIT09IC0xICYmIGNoYXNlcnNNYXhNb3YgIT09IC0xKSB7XG4gICAgICAvLyBBZGQgY2hhc2VycyB0byB0aGUgdHJhY2suXG4gICAgICBmb3IgKGxldCBtb3YgPSBjaGFzZXJzTWluTW92OyBtb3YgPD0gY2hhc2Vyc01heE1vdjsgbW92KyspIHtcbiAgICAgICAgLy8gRmluZCBhbGwgd2l0aCB0aGF0IG1vdlxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHtcbiAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgcGFydGljaXBhbnRzOiBbXVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdCA9IGNoYXNlcnNcbiAgICAgICAgICAuZmlsdGVyKHAgPT4gbW92ID09PSBwLmFkanVzdGVkTW92KVxuICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmRleCAtIGIuZGV4KVxuICAgICAgICBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QuZm9yRWFjaChwID0+XG4gICAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzLnB1c2gocC51dWlkKVxuICAgICAgICApXG4gICAgICAgIGNoYXNlVHJhY2sucHVzaChsb2NhdGlvbilcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHNwYWNlIGJldHdlZW4gY2hhc2VycyBhbmQgcHJleXMuXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5zeXN0ZW0uc3RhcnRpbmdSYW5nZTsgaW5kZXgrKykge1xuICAgICAgICBjaGFzZVRyYWNrLnB1c2goe1xuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXG4gICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByZXlzTWluTW92ICE9PSAtMSAmJiBwcmV5c01heE1vdiAhPT0gLTEpIHtcbiAgICAgIC8vIEFkZCBwcmV5cyB0byB0aGUgdHJhY2suXG4gICAgICBmb3IgKGxldCBtb3YgPSBwcmV5c01pbk1vdjsgbW92IDw9IHByZXlzTWF4TW92OyBtb3YrKykge1xuICAgICAgICAvLyBGaW5kIGFsbCB3aXRoIHRoYXQgbW92XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0ge1xuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXG4gICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYXRpb25QYXJ0aWNpcGFudHNMaXN0ID0gcHJleXNcbiAgICAgICAgICAuZmlsdGVyKHAgPT4gbW92ID09PSBwLmFkanVzdGVkTW92KVxuICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBhLmRleCAtIGIuZGV4KVxuICAgICAgICBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QuZm9yRWFjaChwID0+XG4gICAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzLnB1c2gocC51dWlkKVxuICAgICAgICApXG4gICAgICAgIGNoYXNlVHJhY2sucHVzaChsb2NhdGlvbilcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gY2hhc2VUcmFja1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlTG9jYXRpb25zTGlzdCAobGlzdCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIC8vIFJlbW92ZSBhbGwgdW5uZWNlc3NhcnkgaXRlbXMgKGNzc0NsYXNzLCApXG4gICAgY29uc3QgdXBkYXRlZExpc3QgPSB0aGlzLmNsZWFuTG9jYXRpb25zTGlzdChsaXN0KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLmxvY2F0aW9ucy5saXN0JzogdXBkYXRlZExpc3QgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyB1cGRhdGVMb2NhdGlvbiAobG9jYXRpb25VdWlkLCB1cGRhdGVEYXRhLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgdXBkYXRlID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodXBkYXRlRGF0YSlcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh1cGRhdGUudXVpZCkgZGVsZXRlIHVwZGF0ZS51dWlkXG4gICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0sIHVwZGF0ZSwge1xuICAgICAgb3ZlcndyaXRlOiB0cnVlXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgY2xlYW5Mb2NhdGlvbnNMaXN0IChsaXN0KSB7XG4gICAgY29uc3QgdXBkYXRlZExpc3QgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShsaXN0KVxuICAgIGNvbnN0IHBhcnRpcGFudHNVdWlkQXJyYXkgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMubWFwKHAgPT4gcC51dWlkKVxuXG4gICAgdXBkYXRlZExpc3QuZm9yRWFjaChsID0+IHtcbiAgICAgIC8vIGRlbGV0ZSBsLmFjdGl2ZVxuICAgICAgZGVsZXRlIGwuY3NzQ2xhc3Nlc1xuICAgICAgZGVsZXRlIGwuZmlyc3RcbiAgICAgIGRlbGV0ZSBsLmxhc3RcbiAgICAgIGRlbGV0ZSBsLmVuZFxuICAgICAgaWYgKGwucGFydGljaXBhbnRzICYmIGwucGFydGljaXBhbnRzLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGwucGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiAhKHAgPT09IG51bGwpKSAvLyBSZW1vdmUgbnVsbCBlbGVtZW50c1xuICAgICAgICAgIC8vIFJlcGxhY2UgX1BhcnRpY2lwYW50cyBieSB1dWlkXG4gICAgICAgICAgaWYgKGwucGFydGljaXBhbnRzW2ldLmRhdGE/LnV1aWQpIHtcbiAgICAgICAgICAgIGwucGFydGljaXBhbnRzW2ldID0gbC5wYXJ0aWNpcGFudHNbaV0uZGF0YS51dWlkXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHVua293biBwYXJ0aWNpY3BhbnRzXG4gICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKHV1aWQgPT5cbiAgICAgICAgICBwYXJ0aXBhbnRzVXVpZEFycmF5LmluY2x1ZGVzKHV1aWQpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgcmV0dXJuIHVwZGF0ZWRMaXN0XG4gIH1cblxuICBhc3luYyBpbnNlcnRMb2NhdGlvbiAoXG4gICAgaW5zZXJ0QXRVdWlkLFxuICAgIHsgc2hpZnQgPSAwLCBsb2NEYXRhID0ge30sIHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgZGVsZXRlIGwuYWN0aXZlXG4gICAgfSlcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGluc2VydEF0VXVpZCA9PT0gbC51dWlkKVxuICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IG5ld0xvY2F0aW9uSW5kZXggPSBsb2NhdGlvbkluZGV4ICsgc2hpZnRcbiAgICBpZiAobmV3TG9jYXRpb25JbmRleCA+IGxvY2F0aW9ucy5sZW5ndGgpIHJldHVybiBmYWxzZVxuICAgIGNvbnN0IG5ld0xvY2F0aW9uID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUobG9jRGF0YSlcbiAgICBuZXdMb2NhdGlvbi51dWlkID0gdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKVxuICAgIG5ld0xvY2F0aW9uLmluaXQgPSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0uaW5pdFxuICAgIG5ld0xvY2F0aW9uLmFjdGl2ZSA9IHRydWVcbiAgICBsb2NhdGlvbnMuc3BsaWNlKG5ld0xvY2F0aW9uSW5kZXgsIDAsIG5ld0xvY2F0aW9uKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgYXN5bmMgcmVtb3ZlTG9jYXRpb24gKHV1aWQsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IHV1aWQgPT09IGwudXVpZClcbiAgICBsb2NhdGlvbnMuc3BsaWNlKGxvY2F0aW9uSW5kZXgsIDEpXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBkZWxldGUgbC5hY3RpdmVcbiAgICB9KVxuICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IGluZGV4ID0gbG9jYXRpb25JbmRleCAtIDFcbiAgICAgIGlmIChpbmRleCA8IDApIGluZGV4ID0gMFxuICAgICAgbG9jYXRpb25zW2luZGV4XS5hY3RpdmUgPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVMb2NhdGlvbiAoXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHsgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsIHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB0aGlzLmdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhKGxvY2F0aW9uVXVpZCwge1xuICAgICAgc2Nyb2xsVG9Mb2NhdGlvblxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUodXBkYXRlRGF0YSwgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGdldENsZWFyQWN0aXZlTG9jYXRpb25VcGRhdGVEYXRhICh7XG4gICAgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsXG4gICAgaHRtbCA9IG51bGxcbiAgfSA9IHt9KSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3RcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICA6IFtdXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBkZWxldGUgbC5hY3RpdmVcbiAgICB9KVxuICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5sb2NhdGlvbnMubGlzdCddID0gdGhpcy5jbGVhbkxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuXG4gICAgaWYgKHNjcm9sbFRvTG9jYXRpb24pIHtcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay5mcm9tJ10gPSAwXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2sudG8nXSA9IC0xXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBnZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YSAoXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHsgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsIGh0bWwgPSBudWxsIH0gPSB7fVxuICApIHtcbiAgICBpZiAoIWxvY2F0aW9uVXVpZCkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2xlYXJBY3RpdmVMb2NhdGlvblVwZGF0ZURhdGEoe1xuICAgICAgICBzY3JvbGxUb0xvY2F0aW9uXG4gICAgICB9KVxuICAgIH1cbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgIDogW11cbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGRlbGV0ZSBsLmFjdGl2ZVxuICAgICAgaWYgKGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKSBsLmFjdGl2ZSA9IHRydWVcbiAgICB9KVxuICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5sb2NhdGlvbnMubGlzdCddID0gdGhpcy5jbGVhbkxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAgIC8vIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGlmIChzY3JvbGxUb0xvY2F0aW9uKSB7XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2suZnJvbSddID1cbiAgICAgICAgdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2sudG8nXSA9XG4gICAgICAgIHRoaXMuZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24obG9jYXRpb25VdWlkLCB7IGh0bWwgfSlcbiAgICAgIC8vIGF3YWl0IHRoaXMuc2V0Y2hhc2VUcmFja1Njcm9sbCh7XG4gICAgICAvLyAgIGZyb206IHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbixcbiAgICAgIC8vICAgdG86IHRoaXMuY2hhc2VUcmFja0FjdGl2ZUxvY2F0aW9uU2Nyb2xsUG9zaXRpb25cbiAgICAgIC8vIH0pXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICAvLyBMb2NhdGlvbnMgbmF2aWdhdGlvblxuICBnZXQgYWN0aXZlTG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb25zLmZpbmQobCA9PiBsLmFjdGl2ZSlcbiAgICBpZiAoIWxvY2F0aW9uKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKGxvY2F0aW9uLnBhcnRpY2lwYW50cz8ubGVuZ3RoKSBsb2NhdGlvbi5oYXNQYXJ0aWNpcGFudCA9IHRydWVcbiAgICBjb25zdCBhY3RvciA9IHRoaXMuYWN0aXZlQWN0b3JcbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGNvbnN0IHRlc3QgPSBhY3Rvci5maW5kKGxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKVxuICAgICAgaWYgKHRlc3QpIHtcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JIYXNTa2lsbCA9IHRydWVcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JUZXN0ID0gdGVzdFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbG9jYXRpb25cbiAgfVxuXG4gIGdldCBwcmV2aW91c0xvY2F0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMubG9jYXRpb25zKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLmxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLmFjdGl2ZSlcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSAwKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uc1thY3RpdmVJbmRleCAtIDFdXG4gICAgY29uc3QgYWN0b3IgPSB0aGlzLmFjdGl2ZUFjdG9yXG4gICAgaWYgKGFjdG9yKSB7XG4gICAgICBjb25zdCB0ZXN0ID0gYWN0b3IuZmluZChsb2NhdGlvbi5vYnN0YWNsZURldGFpbHM/LmNoZWNrTmFtZSlcbiAgICAgIGlmICh0ZXN0KSB7XG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9ySGFzU2tpbGwgPSB0cnVlXG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9yVGVzdCA9IHRlc3RcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvY2F0aW9uXG4gIH1cblxuICBnZXQgbmV4dExvY2F0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMubG9jYXRpb25zKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgYWN0aXZlSW5kZXggPSB0aGlzLmxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLmFjdGl2ZSlcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSB0aGlzLmxvY2F0aW9ucy5sZW5ndGggLSAxKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uc1thY3RpdmVJbmRleCArIDFdXG4gICAgY29uc3QgYWN0b3IgPSB0aGlzLmFjdGl2ZUFjdG9yXG4gICAgaWYgKGFjdG9yKSB7XG4gICAgICBjb25zdCB0ZXN0ID0gYWN0b3IuZmluZChsb2NhdGlvbi5vYnN0YWNsZURldGFpbHM/LmNoZWNrTmFtZSlcbiAgICAgIGlmICh0ZXN0KSB7XG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9ySGFzU2tpbGwgPSB0cnVlXG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9yVGVzdCA9IHRlc3RcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvY2F0aW9uXG4gIH1cblxuICBhc3luYyBsb2NhdG9yRHJvcHBlZCAoZGF0YSkge1xuICAgIGF3YWl0IHRoaXMuc2V0TG9jYXRpb25Db29yZGluYXRlcyhcbiAgICAgIGRhdGEubG9jYXRpb25VdWlkLFxuICAgICAgZGF0YS54LFxuICAgICAgZGF0YS55LFxuICAgICAgZGF0YS5zY2VuZVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHNldExvY2F0aW9uQ29vcmRpbmF0ZXMgKFxuICAgIGxvY2F0aW9uVXVpZCxcbiAgICB4LFxuICAgIHksXG4gICAgc2NlbmVJZCxcbiAgICB7IHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLmNvb3JkaW5hdGVzID0geyB4LCB5LCBzY2VuZTogc2NlbmVJZCB9XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGFzeW5jIGNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcyAoeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGlmICh0aGlzLmFjdGl2ZUxvY2F0aW9uKSB7XG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5jbGVhckxvY2F0aW9uQ29vcmRpbmF0ZXModGhpcy5hY3RpdmVMb2NhdGlvbi51dWlkLCB7XG4gICAgICAgIHJlbmRlclxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBjbGVhckxvY2F0aW9uQ29vcmRpbmF0ZXMgKGxvY2F0aW9uVXVpZCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgZGVsZXRlIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5jb29yZGluYXRlc1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICAvLyBnZXQgYWN0aXZlUGFydGljaXBhbnRIYXZlQWN0aXZlTG9jYXRpb25Ta2lsbCAoKXtcbiAgLy8gICBpZiggIXRoaXMuYWN0aXZlQWN0b3IpIHJldHVybiBmYWxzZVxuICAvLyAgIGlmKCB0aGlzLmFjdGl2ZUFjdG9yLmZpbmQoIHRoaXMuYWN0aXZlTG9jYXRpb24ub2JzdGFjbGVEZXRhaWxzPy5jaGVja05hbWUpKSByZXR1cm4gdHJ1ZVxuICAvLyAgIHJldHVybiBmYWxzZVxuICAvLyB9XG5cbiAgLy8gSGFuZGxlIG1lY2hhbmljc1xuICBhc3luYyBjdXRUb1RoZUNoYXNlICgpIHtcbiAgICBpZiAoIXRoaXMuYWxsSGF2ZVNwZWVkUm9sbCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RBbGxIYXZlU3BlZWRSb2xsJykpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHRoaXMuYWN0dWFsUGFydGljaXBhbnRzPy5sZW5ndGggPCAyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5lZWRNaW4yUGFydGljaXBhbnRzJykpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHRoaXMuYWxsSGF2ZVZhbGlkTW92KSB7XG4gICAgICAvLyBUT0RPIDogQ2hlY2sgZm9yIHNwZWVkIHJvbGwgPz9cblxuICAgICAgLy8gQ2FsY3VsYXRlIG1vdmVtZW50IGFjdGlvbnNcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgICBjb25zdCBtaW5Nb3YgPSB0aGlzLmZpbmRNaW5Nb3YodGhpcy5hY3R1YWxQYXJ0aWNpcGFudHMpXG4gICAgICBwYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgICAgLy8gcC5kYXRhLm1vdmVtZW50QWN0aW9uID0gMSArIChwLmFkanVzdGVkTW92IC0gbWluTW92KVxuICAgICAgICBwLmNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyhtaW5Nb3YpXG4gICAgICAgIHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHAubW92ZW1lbnRBY3Rpb25cbiAgICAgICAgcC5ib251c0RpY2UgPSAwXG4gICAgICB9KVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdCh0aGlzLmxvY2F0aW9ucywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgICBhd2FpdCB0aGlzLnN0YXJ0KClcbiAgICB9XG4gIH1cblxuICBhc3luYyByZXN0YXJ0ICgpIHtcbiAgICAvLyBhd2FpdCB0aGlzLmNsZWFuTG9jYXRpb25zKCkgLy9UcmFuc2ZlcnJlZCBpbiB1cGRhdGVMb2NhdGlvbkxpc3RcbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLmxvY2F0aW9ucy5maWx0ZXIobCA9PiAhbC5pbml0KVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAobG9jYXRpb25zW2ldLnBhcnRpY2lwYW50cykgbG9jYXRpb25zW2ldLnBhcnRpY2lwYW50cyA9IFtdXG4gICAgICBpZiAobG9jYXRpb25zW2ldLmFjdGl2ZSkgZGVsZXRlIGxvY2F0aW9uc1tpXS5hY3RpdmVcbiAgICB9XG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0aWNpcGFudHNEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocGFydGljaXBhbnRzRGF0YVtpXS5hY3RpdmUpIGRlbGV0ZSBwYXJ0aWNpcGFudHNEYXRhW2ldLmFjdGl2ZVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnNldGNoYXNlVHJhY2tTY3JvbGwoMCwgMCwgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzRGF0YSwgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgYXdhaXQgdGhpcy5zdG9wKClcbiAgfVxuXG4gIGdldExvY2F0aW9uU2hpZnQgKGxvY2F0aW9uVXVpZCwgeyBza2lwID0gMSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBvcmlnaW5JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBjb25zdCBkZXN0aW5hdGlvbkluZGV4ID0gb3JpZ2luSW5kZXggKyBza2lwXG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiBudWxsXG4gICAgaWYgKGRlc3RpbmF0aW9uSW5kZXggPj0gbG9jYXRpb25zLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGxvY2F0aW9uc1tsb2NhdGlvbnMubGVuZ3RoIC0gMV1cbiAgICB9XG4gICAgaWYgKGRlc3RpbmF0aW9uSW5kZXggPCAwKSByZXR1cm4gbG9jYXRpb25zWzBdXG4gICAgcmV0dXJuIGxvY2F0aW9uc1tkZXN0aW5hdGlvbkluZGV4XSAvLyBFUlJPUiBNT1ZFIDIgRk9SIFNLSVAgKzFcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZVBhcnRpY2lwYW50IChwYXJ0aWNpcGFudFV1aWQsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZW1vdmVQYXJ0aWNpcGFudCcpLFxuICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZW1vdmVQYXJ0aWNpcGFudEhpbnQnLCB7XG4gICAgICAgIG5hbWU6IHAubmFtZVxuICAgICAgfSl9PC9wPmAsXG4gICAgICB5ZXM6IGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgICApXG4gICAgICAgIGNvbnN0IG5ld1BhcnRpY2lwYW50c0RhdGEgPSBwYXJ0aWNpcGFudHNEYXRhLmZpbHRlcihcbiAgICAgICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCAhPT0gcC51dWlkXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgbG9jYXRpb25zRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgICAgIHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICAgIClcbiAgICAgICAgbG9jYXRpb25zRGF0YS5mb3JFYWNoKGwgPT4ge1xuICAgICAgICAgIGlmIChsLnBhcnRpY2lwYW50cyAmJiBsLnBhcnRpY2lwYW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKFxuICAgICAgICAgICAgICB1dWlkID0+IHBhcnRpY2lwYW50VXVpZCAhPT0gdXVpZFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMobmV3UGFydGljaXBhbnRzRGF0YSwgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnNEYXRhLCB7IHJlbmRlciB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBhZGRQYXJ0aWNpcGFudCAoXG4gICAgcGFydGljaXBhbnQsXG4gICAge1xuICAgICAgcmVuZGVyID0gdHJ1ZSxcbiAgICAgIGxvY2F0aW9uVXVpZCA9IG51bGwsXG4gICAgICByZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsXG4gICAgICB1cGRhdGUgPSBmYWxzZVxuICAgIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cblxuICAgIGlmIChwYXJ0aWNpcGFudC5kYXRhLmNoYXNlVXVpZCkgZGVsZXRlIHBhcnRpY2lwYW50LmRhdGEuY2hhc2VVdWlkXG4gICAgaWYgKHBhcnRpY2lwYW50LmRhdGEubG9jYXRpb25VdWlkKSBkZWxldGUgcGFydGljaXBhbnQuZGF0YS5sb2NhdGlvblV1aWRcbiAgICBpZiAocGFydGljaXBhbnQuZGF0YS51cGRhdGUpIGRlbGV0ZSBwYXJ0aWNpcGFudC5kYXRhLnVwZGF0ZVxuXG4gICAgaWYgKCFwYXJ0aWNpcGFudC51dWlkKSB7XG4gICAgICBsZXQgdW5pcXVlID0gZmFsc2VcbiAgICAgIHdoaWxlICghdW5pcXVlKSB7XG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEudXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgICAgIHVuaXF1ZSA9XG4gICAgICAgICAgcGFydGljaXBhbnRzRGF0YS5maWx0ZXIocCA9PiBwLnV1aWQgPT09IHBhcnRpY2lwYW50LnV1aWQpLmxlbmd0aCA9PT0gMFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh1cGRhdGUpIHtcbiAgICAgIGlmIChwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgICAgcGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uXG4gICAgICB9XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSBwYXJ0aWNpcGFudC51dWlkKVxuICAgICAgcGFydGljaXBhbnRzRGF0YVtpbmRleF0gPSBwYXJ0aWNpcGFudC5kYXRhXG4gICAgfSBlbHNlIHBhcnRpY2lwYW50c0RhdGEucHVzaChwYXJ0aWNpcGFudC5kYXRhKVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzRGF0YSwge1xuICAgICAgcmVuZGVyOiByZW5kZXIgJiYgIXRoaXMuc3RhcnRlZCAmJiAhdGhpcy5yZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9uc1xuICAgIH0pXG5cbiAgICBpZiAocmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMpIHtcbiAgICAgIGNvbnN0IHNsb3dlc3QgPSB0aGlzLnNsb3dlc3RQYXJ0aWNpcGFudD8uYWRqdXN0ZWRNb3ZcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgICBwYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHAuY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKHNsb3dlc3QpKVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7XG4gICAgICAgIHJlbmRlcjogcmVuZGVyICYmICF0aGlzLnN0YXJ0ZWRcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5zdGFydGVkICYmXG4gICAgICAhKHBhcnRpY2lwYW50LmRhdGEuZXNjYXBlZCB8fCBwYXJ0aWNpcGFudC5kYXRhLmV4Y2x1ZGVkKVxuICAgICkge1xuICAgICAgY29uc3QgbG9jYXRpb25zRGF0YSA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICAgIDogW11cblxuICAgICAgaWYgKGxvY2F0aW9uc0RhdGEubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yRW1wdHlMb2NhdGlvbnNMaXN0JylcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBsZXQgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9uc0RhdGEuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIGxvY2F0aW9uSW5kZXggPSAwXG4gICAgICBpZiAoIWxvY2F0aW9uc0RhdGFbbG9jYXRpb25JbmRleF0ucGFydGljaXBhbnRzKSB7XG4gICAgICAgIGxvY2F0aW9uc0RhdGFbbG9jYXRpb25JbmRleF0ucGFydGljaXBhbnRzID0gW11cbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMuZmluZEluZGV4KFxuICAgICAgICAgIHAgPT4gcCA9PT0gcGFydGljaXBhbnQudXVpZFxuICAgICAgICApID09PSAtMVxuICAgICAgKSB7XG4gICAgICAgIGxvY2F0aW9uc0RhdGFbbG9jYXRpb25JbmRleF0ucGFydGljaXBhbnRzLnB1c2gocGFydGljaXBhbnQudXVpZClcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnNEYXRhLCB7IHJlbmRlciB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGVkaXRQYXJ0aWNpcGFudCAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIHtcbiAgICAgIHVzZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsXG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVQYXJ0aWNpcGFudCA9IHRydWUsXG4gICAgICByZW5kZXIgPSB0cnVlXG4gICAgfSA9IHt9XG4gICkge31cblxuICAvKipcbiAgICogTW92ZSBhIHBhcnRpY2lwYW50IGZvciBhIG51bWJlciBvZiBsb2NhdGlvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IHBhcnRpY2lwYW50VXVpZCAgICAgVXVpZCBvZiBwYXJ0aWNpcGFudFxuICAgKiBAcGFyYW0geyp9IGxvY2F0aW9uTW92ZWQgICAgICAgICAgICAgICAgIE51bWJlciBvZiBsb2NhdGlvbnMgbW92cmVkXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9ICAgICAgICAgICAgICAgICAgICAgICAgVG90YWwgbnVtYmVyIG9mIGxvY2F0aW9ucyBjcm9zc2VkXG4gICAqL1xuICBhc3luYyBtb3ZlUGFydGljaXBhbnQgKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICBsb2NhdGlvbk1vdmVkLFxuICAgIHtcbiAgICAgIHVzZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsXG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVQYXJ0aWNpcGFudCA9IHRydWUsXG4gICAgICByZW5kZXIgPSB0cnVlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIC8vIGNvbnN0IHNlbGVjdG9yID0gYCNpdGVtLSR7dGhpcy5pZH0gLmNoYXNlLXRyYWNrYFxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYG1vdmVQYXJ0aWNpcGFudCA6IEpxdWVyeSByb290OiAkeyQoJzpyb290JykuZmluZChzZWxlY3Rvcikuc2Nyb2xsTGVmdCgpfWApXG4gICAgbGV0IG1vZGlmaWVkID0gZmFsc2VcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBvcmlnaW5JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PlxuICAgICAgbC5wYXJ0aWNpcGFudHM/LmluY2x1ZGVzKHBhcnRpY2lwYW50VXVpZClcbiAgICApXG4gICAgbGV0IGRlc3RpbmF0aW9uSW5kZXggPSBvcmlnaW5JbmRleCArIGxvY2F0aW9uTW92ZWRcbiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA+IGxvY2F0aW9ucy5sZW5ndGggLSAxKSB7XG4gICAgICBkZXN0aW5hdGlvbkluZGV4ID0gbG9jYXRpb25zLmxlbmd0aCAtIDFcbiAgICB9XG5cbiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA8IDApIHtcbiAgICAgIGRlc3RpbmF0aW9uSW5kZXggPSAwXG4gICAgfVxuXG4gICAgY29uc3QgdG90YWxNb3ZlID0gZGVzdGluYXRpb25JbmRleCAtIG9yaWdpbkluZGV4XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICApXG4gICAgY29uc3QgcGFydGljaXBhbnRJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcblxuICAgIGlmICh1c2VNb3ZlbWVudEFjdGlvbnMpIHtcbiAgICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xuICAgICAgICAgICAgcGFydGljaXBhbnRVdWlkOiB0aGlzLnBhcnRpY2lwYW50VXVpZFxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgaWYgKHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPCBNYXRoLmFicyh0b3RhbE1vdmUpKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudE5vdEVub3VnaE1vdmVtZW50Jywge1xuICAgICAgICAgICAgYXNzaXN0YW50VXVpZDogcGFydGljaXBhbnRVdWlkLFxuICAgICAgICAgICAgYWN0aW9uczogcGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgcGFydGljaXBhbnQuYWx0ZXJNb3ZlbWVudEFjdGlvbnMoMCAtIE1hdGguYWJzKHRvdGFsTW92ZSkpXG4gICAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGFcbiAgICAgIClcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgICB7IHJlbmRlcjogZmFsc2UgfVxuICAgICAgKVxuICAgICAgbW9kaWZpZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKHRvdGFsTW92ZSAhPT0gMCkge1xuICAgICAgYXdhaXQgdGhpcy5tb3ZlUGFydGljaXBhbnRUb0xvY2F0aW9uKFxuICAgICAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgICAgIGxvY2F0aW9uc1tkZXN0aW5hdGlvbkluZGV4XS51dWlkLFxuICAgICAgICB7IHJlbmRlcjogZmFsc2UgfVxuICAgICAgKVxuICAgICAgbW9kaWZpZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGFjdGl2YXRlUGFydGljaXBhbnQpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQsIHtcbiAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvbixcbiAgICAgICAgYWN0aXZhdGVMb2NhdGlvbixcbiAgICAgICAgcmVuZGVyOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChhY3RpdmF0ZUxvY2F0aW9uICYmICFhY3RpdmF0ZVBhcnRpY2lwYW50KSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdGl2YXRlTG9jYXRpb24obG9jYXRpb25zW2Rlc3RpbmF0aW9uSW5kZXhdLnV1aWQsIHtcbiAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvbixcbiAgICAgICAgcmVuZGVyOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChtb2RpZmllZCAmJiByZW5kZXIpIGF3YWl0IHRoaXMuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgcmV0dXJuIHRvdGFsTW92ZVxuICB9XG5cbiAgYXN5bmMgbW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbiAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIGxvY2F0aW9uVXVpZCxcbiAgICB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYW5pbWF0ZSA9IG51bGwsXG4gICAgICBtb3ZlVG9rZW4gPSB0cnVlLFxuICAgICAgcmVuZGVyID0gdHJ1ZVxuICAgIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcblxuICAgIC8vIEZpbmQgZGVzdGluYXRpb24gbG9jYXRpb24uXG4gICAgY29uc3QgZGVzdGluYXRpb24gPSBsb2NhdGlvbnMuZmluZChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGlmICghZGVzdGluYXRpb24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBGYWlsZWQgdG8gbW92ZSAke3BhcnRpY2lwYW50VXVpZH0uIExvY2F0aW9uICR7bG9jYXRpb25VdWlkfSB1bmtub3duYFxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gRmluZCBvcmlnaW4gbG9jYXRpb25cbiAgICBjb25zdCBvcmlnaW4gPSBsb2NhdGlvbnMuZmluZChsID0+XG4gICAgICBsLnBhcnRpY2lwYW50cz8uaW5jbHVkZXMocGFydGljaXBhbnRVdWlkKVxuICAgIClcblxuICAgIGlmICghb3JpZ2luKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gZmluZCAke3BhcnRpY2lwYW50VXVpZH0gaW4gbG9jYXRpb25zYClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICghZGVzdGluYXRpb24ucGFydGljaXBhbnRzKSBkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMgPSBbXVxuICAgIGlmIChkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMuaW5jbHVkZXMocGFydGljaXBhbnRVdWlkKSkgcmV0dXJuIC8vIG1vdmluZyBwYXJ0aWNwYW50IHRvIGEgbG9jYXRpb24gaGUgYWxyZWFkeSBvY2N1cGllc1xuICAgIGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cy5wdXNoKHBhcnRpY2lwYW50VXVpZClcbiAgICAvLyBkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMuc29ydChzb3J0QnlSb2xlQW5kRGV4KVxuXG4gICAgY29uc3Qgb2xkUGFydGljaXBhbnRzTGlzdCA9IG9yaWdpbi5wYXJ0aWNpcGFudHMuZmlsdGVyKFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgIT09IHBcbiAgICApXG4gICAgb3JpZ2luLnBhcnRpY2lwYW50cyA9IG9sZFBhcnRpY2lwYW50c0xpc3RcblxuICAgIGlmIChtb3ZlVG9rZW4gJiYgZGVzdGluYXRpb24uY29vcmRpbmF0ZXMpIHtcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgICBsZXQgcGFydGljcGFudERvY3VtZW50ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoXG4gICAgICAgIHBhcnRpY2lwYW50Py5kYXRhPy5kb2NVdWlkXG4gICAgICApXG4gICAgICAvLyBGaW5kIHRva2VuXG4gICAgICBpZiAocGFydGljcGFudERvY3VtZW50ICYmICEocGFydGljcGFudERvY3VtZW50IGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCB8fCBwYXJ0aWNwYW50RG9jdW1lbnQ/Lm9iamVjdCBpbnN0YW5jZW9mIFRva2VuKSkge1xuICAgICAgICBjb25zdCBmb3VuZFRva2VucyA9IGNhbnZhcy5zY2VuZS50b2tlbnMuZmlsdGVyKGQgPT4gZC5hY3RvckxpbmsgJiYgZC5hY3Rvcj8uaWQgPT09IHBhcnRpY3BhbnREb2N1bWVudC5pZClcbiAgICAgICAgaWYgKGZvdW5kVG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudCA9IGZvdW5kVG9rZW5zWzBdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgcGFydGljcGFudERvY3VtZW50ICYmXG4gICAgICAgICEoXG4gICAgICAgICAgLyogcGFydGljcGFudERvY3VtZW50LmlzVG9rZW4gfHwgKi8gKFxuICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50IGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCB8fFxuICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Py5vYmplY3QgaW5zdGFuY2VvZiBUb2tlblxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignTm8gdG9rZW4gYXNzb2NpYXRlZCB3aXRoIHRoaXMgYWN0b3InKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnNjZW5lICE9PSBnYW1lLnNjZW5lcy52aWV3ZWQudXVpZCkge1xuICAgICAgICAgIGNvbnNvbGUud2FybignQ2F1dGlvbiB0aGUgc2NlbmUgaXMgbm90IHRoZSBhY3RpdmUgc2NlbmUnKVxuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJ0aWNwYW50RG9jdW1lbnQucGFyZW50Py51dWlkICE9PSBkZXN0aW5hdGlvbi5jb29yZGluYXRlcy5zY2VuZSkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JUb2tlbk5vdE9uU2NlbmUnKVxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBzY2VuZSA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KFxuICAgICAgICAgICAgZGVzdGluYXRpb24uY29vcmRpbmF0ZXMuc2NlbmVcbiAgICAgICAgICApXG4gICAgICAgICAgbGV0IHggPSBkZXN0aW5hdGlvbi5jb29yZGluYXRlcy54XG4gICAgICAgICAgY29uc3QgeSA9IGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnlcbiAgICAgICAgICBsZXQgdGFyZ2V0UmVjdCA9IG5ldyBQSVhJLlJlY3RhbmdsZShcbiAgICAgICAgICAgIHgsXG4gICAgICAgICAgICB5LFxuICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC53aWR0aCxcbiAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudC5vYmplY3QuaGVpZ2h0XG4gICAgICAgICAgKS5ub3JtYWxpemUoKVxuICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IFtdXG4gICAgICAgICAgbGV0IGZvdW5kRnJlZVNwYWNlID0gZmFsc2VcbiAgICAgICAgICB3aGlsZSAoIWZvdW5kRnJlZVNwYWNlKSB7XG4gICAgICAgICAgICBjb25zdCBvdmVybGFwaW5nVG9rZW4gPSBzY2VuZS50b2tlbnMuZmluZCh0ID0+IHtcbiAgICAgICAgICAgICAgaWYgKHQuaWQgPT09IHBhcnRpY3BhbnREb2N1bWVudC5pZCkgcmV0dXJuIGZhbHNlIC8vIFlvdSBjYW4ndCBvdmVybGFwIHdpdGggeW91cnNlbGZcbiAgICAgICAgICAgICAgcmV0dXJuIHQub2JqZWN0LmJvdW5kcy5pbnRlcnNlY3RzKHRhcmdldFJlY3QpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKG92ZXJsYXBpbmdUb2tlbikge1xuICAgICAgICAgICAgICB4ID0gb3ZlcmxhcGluZ1Rva2VuLm9iamVjdC5ib3VuZHMucmlnaHQgKyAxXG4gICAgICAgICAgICAgIHRhcmdldFJlY3QgPSBuZXcgUElYSS5SZWN0YW5nbGUoXG4gICAgICAgICAgICAgICAgeCxcbiAgICAgICAgICAgICAgICB5LFxuICAgICAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudC5vYmplY3Qud2lkdGgsXG4gICAgICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC5oZWlnaHRcbiAgICAgICAgICAgICAgKS5ub3JtYWxpemUoKVxuICAgICAgICAgICAgfSBlbHNlIGZvdW5kRnJlZVNwYWNlID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHVwZGF0ZS5wdXNoKHtcbiAgICAgICAgICAgIF9pZDogcGFydGljcGFudERvY3VtZW50LmlkLFxuICAgICAgICAgICAgeCxcbiAgICAgICAgICAgIHlcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgLy8gZGVzdGluYXRpb24ucGFydGljaXBhbnRzPy5mb3JFYWNoKCBwVXVpZCA9PntcbiAgICAgICAgICAvLyAgIGNvbnN0IHAgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBVdWlkKVxuICAgICAgICAgIC8vICAgY29uc3QgcERvYyA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KCBwPy5kYXRhPy5kb2NVdWlkKVxuICAgICAgICAgIC8vICAgaWYoIHBEb2MgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50ICYmIHBEb2Mub2JqZWN0IGluc3RhbmNlb2YgVG9rZW4pe1xuICAgICAgICAgIC8vICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgICAgIC8vICAgICB1cGRhdGUucHVzaCh7XG4gICAgICAgICAgLy8gICAgICAgX2lkOiBwRG9jLmlkLFxuICAgICAgICAgIC8vICAgICAgIHg6eCxcbiAgICAgICAgICAvLyAgICAgICB5OnlcbiAgICAgICAgICAvLyAgICAgfSlcbiAgICAgICAgICAvLyAgICAgaWYoIHBEb2Mub2JqZWN0LndpZHRoKSB4ICs9IHBEb2Mub2JqZWN0LndpZHRoXG4gICAgICAgICAgLy8gICB9XG4gICAgICAgICAgLy8gfSlcbiAgICAgICAgICBjb25zdCBzaG93VG9rZW5Nb3ZlbWVudCA9XG4gICAgICAgICAgICB0eXBlb2YgYW5pbWF0ZSA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICAgID8gYW5pbWF0ZVxuICAgICAgICAgICAgICA6IHRoaXMuc3lzdGVtLnNob3dUb2tlbk1vdmVtZW50XG4gICAgICAgICAgYXdhaXQgcGFydGljcGFudERvY3VtZW50LnBhcmVudC51cGRhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgICAgICAgICdUb2tlbicsXG4gICAgICAgICAgICB1cGRhdGUsXG4gICAgICAgICAgICB7IGFuaW1hdGU6IHNob3dUb2tlbk1vdmVtZW50IH1cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgLy8gSGFuZGxlIHNjcm9sbGluZ1xuICBhc3luYyBzZXRjaGFzZVRyYWNrU2Nyb2xsICh7XG4gICAgZnJvbSA9IHVuZGVmaW5lZCxcbiAgICB0byA9IC0xLFxuICAgIHJlbmRlciA9IHRydWVcbiAgfSA9IHt9KSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7XG4gICAgICAgICdzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2suZnJvbSc6XG4gICAgICAgICAgdW5kZWZpbmVkID09PSBmcm9tID8gdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uIDogZnJvbSxcbiAgICAgICAgJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byc6XG4gICAgICAgICAgdW5kZWZpbmVkID09PSB0byA/IHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbiA6IHRvXG4gICAgICB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGdldCBjaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uICgpIHtcbiAgICBjb25zdCBodG1sID0gdGhpcy5zaGVldD8uX2VsZW1lbnRcbiAgICBpZiAoIWh0bWwpIHJldHVybiAtMVxuICAgIGNvbnN0IGNoYXNlVHJhY2sgPSBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpXG4gICAgaWYgKCFjaGFzZVRyYWNrKSByZXR1cm4gLTFcbiAgICAvLyBjb25zdCBzZWxlY3RvciA9IGAjaXRlbS0ke3RoaXMuaWR9IC5jaGFzZS10cmFja2BcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBEQVRBIDogSnF1ZXJ5IHJvb3Q6ICR7JCgnOnJvb3QnKS5maW5kKHNlbGVjdG9yKS5zY3JvbGxMZWZ0KCl9YClcbiAgICAvLyByZXR1cm4gJCgnOnJvb3QnKS5maW5kKHNlbGVjdG9yKS5zY3JvbGxMZWZ0KClcblxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYERBVEEgOiBKcXVlcnkgcm9vdDogJHskKCc6cm9vdCcpLmZpbmQoJyNpdGVtLVZOaHRxeEEyd0pKbldTdFQgLmNoYXNlLXRyYWNrJykuc2Nyb2xsTGVmdCgpfS5DaGFzZSB0cmFjayBvZmZzZXQ6ICR7Y2hhc2VUcmFjay5zY3JvbGxMZWZ0fSwgRG9jdW1lbnQgb2Zmc2V0OiR7ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2l0ZW0tVk5odHF4QTJ3SkpuV1N0VCcpLnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpLnNjcm9sbExlZnR9YClcbiAgICByZXR1cm4gY2hhc2VUcmFjay5zY3JvbGxMZWZ0XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBvZmZzZXQgcG9zaXRpb24gb2YgdGhlIGFjdGl2ZSBsb2NhdGlvblxuICAgKiB0aGUgY2VudGVyIG9mIHRoZSBhY3RpdmUgbG9jYXRpb24gd2lsbCBiZSBjZW50ZXJlZFxuICAgKiBpbiB0aGUgcGFyZW50LlxuICAgKi9cbiAgZ2V0IGNoYXNlVHJhY2tBY3RpdmVMb2NhdGlvblNjcm9sbFBvc2l0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0aXZlTG9jYXRpb24pIHJldHVybiAtMVxuICAgIHJldHVybiB0aGlzLmdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uKHRoaXMuYWN0aXZlTG9jYXRpb24udXVpZClcbiAgfVxuXG4gIGdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uIChsb2NhdGlvblV1aWQsIHsgaHRtbCA9IG51bGwgfSkge1xuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gaHRtbCB8fCB0aGlzLnNoZWV0Py5fZWxlbWVudFxuICAgIGlmICghaHRtbEVsZW1lbnQgfHwgIWh0bWxFbGVtZW50WzBdKSByZXR1cm4gLTFcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gaHRtbEVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJylcbiAgICBpZiAoIWNoYXNlVHJhY2spIHJldHVybiAtMVxuICAgIGNvbnN0IGFjdGl2ZUxvY2F0aW9uRWxlbWVudCA9IGNoYXNlVHJhY2sucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuY2hhc2UtbG9jYXRpb25bZGF0YS11dWlkPVwiJHtsb2NhdGlvblV1aWR9XCJdYFxuICAgIClcbiAgICBpZiAoIWFjdGl2ZUxvY2F0aW9uRWxlbWVudCkgcmV0dXJuIC0xXG4gICAgY29uc3QgbGVmdFNjcm9sbCA9XG4gICAgICBhY3RpdmVMb2NhdGlvbkVsZW1lbnQub2Zmc2V0TGVmdCArXG4gICAgICBhY3RpdmVMb2NhdGlvbkVsZW1lbnQuY2xpZW50V2lkdGggLyAyIC1cbiAgICAgIGNoYXNlVHJhY2suY2xpZW50V2lkdGggLyAyXG4gICAgcmV0dXJuIGxlZnRTY3JvbGwgPCAwID8gMCA6IE1hdGguZmxvb3IobGVmdFNjcm9sbClcbiAgfVxuXG4gIC8vIFNob3VsZCBiZSByZW1vdmVkXG4gIGZpbmRNaW5Nb3YgKGxpc3QpIHtcbiAgICBpZiAoIWxpc3Q/Lmxlbmd0aCkgcmV0dXJuIC0xXG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PlxuICAgICAgcHJldi5hZGp1c3RlZE1vdiA8IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudFxuICAgICkuYWRqdXN0ZWRNb3ZcbiAgfVxuXG4gIGZpbmRNYXhNb3YgKGxpc3QpIHtcbiAgICBpZiAoIWxpc3Q/Lmxlbmd0aCkgcmV0dXJuIC0xXG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PlxuICAgICAgcHJldi5hZGp1c3RlZE1vdiA+IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudFxuICAgICkuYWRqdXN0ZWRNb3ZcbiAgfVxuXG4gIC8vIFV0aWxpdGllc1xuICBmaW5kSW5kZXggKGxpc3QsIHV1aWQpIHtcbiAgICByZXR1cm4gbGlzdC5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBnZXQgc3RhcnRlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RmxhZygnQ29DNycsICdzdGFydGVkJylcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0ICgpIHtcbiAgICBjb25zdCByZW1TdHJpbmcgPSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJylcbiAgICBjb25zdCByZW1TaXplID0gTnVtYmVyKHJlbVN0cmluZy5yZXBsYWNlKCdweCcsICcnKSlcbiAgICBjb25zdCBwQ291bnQgPSB0aGlzLmFjdHVhbFBhcnRpY2lwYW50cy5sZW5ndGhcbiAgICBjb25zdCB3aWR0aCA9IE1hdGgubWF4KChwQ291bnQgKiAxMS4yICsgMykgKiByZW1TaXplLCA0MCAqIHJlbVNpemUpXG4gICAgdGhpcy5zaGVldC5fdGFic1swXS5hY3RpdmUgPSAnc2V0dXAnXG4gICAgdGhpcy5zaGVldC5wb3NpdGlvbi53aWR0aCA9IHdpZHRoXG4gICAgYXdhaXQgdGhpcy5zZXRGbGFnKCdDb0M3JywgJ3N0YXJ0ZWQnLCB0cnVlKVxuICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKClcbiAgfVxuXG4gIGFzeW5jIHN0b3AgKCkge1xuICAgIHJldHVybiB0aGlzLnVuc2V0RmxhZygnQ29DNycsICdzdGFydGVkJylcbiAgfVxuXG4gIGdlbmVyYXRlTmV3VXVpZCAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gIH1cblxuICBnZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyAocGFydGljaXBhbnRVdWlkKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICBpZiAoIXBhcnRpY2lwYW50LmFjdG9yKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbGlzdCA9IFtdXG4gICAgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZm9yRWFjaChjID0+XG4gICAgICBsaXN0LnB1c2goXG4gICAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnKX0gKCR7Yy5zaG9ydE5hbWV9KWBcbiAgICAgIClcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICApfSlgXG4gICAgKVxuICAgIGxpc3QucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5TQU4nXG4gICAgICApfSlgXG4gICAgKVxuICAgIHBhcnRpY2lwYW50LmFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT4gbGlzdC5wdXNoKHMubmFtZSkpXG4gICAgcmV0dXJuIGxpc3RcbiAgfVxuXG4gIGdldCBhY3RpdmVBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgY29uc3QgcGFydGljaWNwYW50RGF0YSA9IHRoaXMuYWN0aXZlUGFydGljaXBhbnREYXRhXG4gICAgaWYgKCFwYXJ0aWNpY3BhbnREYXRhKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuZ2V0QWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MocGFydGljaWNwYW50RGF0YS51dWlkKVxuICB9XG5cbiAgZ2V0IGFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgY29uc3QgbGlzdCA9IFtdXG4gICAgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZm9yRWFjaChjID0+XG4gICAgICBsaXN0LnB1c2goXG4gICAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnKX0gKCR7Yy5zaG9ydE5hbWV9KWBcbiAgICAgIClcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICApfSlgXG4gICAgKVxuICAgIGxpc3QucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5TQU4nXG4gICAgICApfSlgXG4gICAgKVxuXG4gICAgZ2FtZS5Db0M3LnNraWxsTGlzdD8uZm9yRWFjaChzID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIWxpc3QuaW5jbHVkZXMocy5uYW1lKSAmJlxuICAgICAgICAhcy5uYW1lXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAuaW5jbHVkZXMoYCgke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnlTcGVjTmFtZScpfSlgLnRvTG93ZXJDYXNlKCkpXG4gICAgICApIHtcbiAgICAgICAgbGlzdC5wdXNoKHMubmFtZSlcbiAgICAgIH1cbiAgICB9KSAvLyBUT0RPOiBSZW1vdmUgPz9cbiAgICB0aGlzLnBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWN0b3IpIHtcbiAgICAgICAgcC5hY3Rvci5za2lsbHMuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICBpZiAoIWxpc3QuaW5jbHVkZXMocy5uYW1lKSkgbGlzdC5wdXNoKHMubmFtZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBsaXN0LnNvcnQoSW50bC5Db2xsYXRvcigpLmNvbXBhcmUpXG4gIH1cblxuICBnZXQgYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzU2hvcnQgKCkge1xuICAgIGNvbnN0IGxpc3QgPSBbXVxuICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PiBsaXN0LnB1c2goYCR7Yy5sYWJlbH1gKSlcbiAgICBsaXN0LnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKX1gKVxuICAgIGxpc3QucHVzaChgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJyl9YClcblxuICAgIGdhbWUuQ29DNy5za2lsbExpc3Q/LmZvckVhY2gocyA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgICFsaXN0LmluY2x1ZGVzKHMubmFtZSkgJiZcbiAgICAgICAgIXMubmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKGAoJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55U3BlY05hbWUnKX0pYC50b0xvd2VyQ2FzZSgpKVxuICAgICAgKSB7XG4gICAgICAgIGxpc3QucHVzaChzLm5hbWUpXG4gICAgICB9XG4gICAgfSkgLy8gVE9ETzogUmVtb3ZlID8/XG4gICAgdGhpcy5wYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFjdG9yKSB7XG4gICAgICAgIHAuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiB7XG4gICAgICAgICAgaWYgKCFsaXN0LmluY2x1ZGVzKHMubmFtZSkpIGxpc3QucHVzaChzLm5hbWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gbGlzdC5zb3J0KEludGwuQ29sbGF0b3IoKS5jb21wYXJlKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHRoZSBkYXRhIG9mIGFsbCBwYXJhc2l0ZSBwYXJ0aWNpcGFudHMgaW4gbG9jYXRpb25zLlxuICAgKiBTaG91bGQgbmV2ZXIgaGFwcGVuXG4gICAqL1xuICAvLyBhc3luYyBjbGVhbkxvY2F0aW9ucyAoKSB7XG4gIC8vICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gIC8vICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gIC8vICAgICBjb25zdCBwYXJ0aXBhbnRzVXVpZEFycmF5ID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLm1hcChwID0+IHAudXVpZClcbiAgLy8gICAgIGlmIChsLnBhcnRpY2lwYW50cykge1xuICAvLyAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcih1dWlkID0+XG4gIC8vICAgICAgICAgcGFydGlwYW50c1V1aWRBcnJheS5pbmNsdWRlcyh1dWlkKVxuICAvLyAgICAgICApXG4gIC8vICAgICB9XG4gIC8vICAgfSlcbiAgLy8gICB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAvLyB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NraWxsIGV4dGVuZHMgQ29DN0l0ZW0ge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5zeXN0ZW0/LnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gQ29DN1NraWxsLmd1ZXNzTmFtZVBhcnRzKGRhdGEubmFtZSlcbiAgICAgIGNvbnN0IHsgbmFtZSwgc2tpbGxOYW1lLCBzcGVjaWFsaXphdGlvbiwgLi4ubmV3UHJvcGVydGllcyB9ID0gc2tpbGxcbiAgICAgIGRhdGEubmFtZSA9IG5hbWVcbiAgICAgIGRhdGEuc3lzdGVtIHx8PSB7fVxuICAgICAgY29uc3QgcHJvcGVydGllcyA9IHsgLi4uZGF0YS5zeXN0ZW0ucHJvcGVydGllcywgLi4ubmV3UHJvcGVydGllcyB9XG4gICAgICBkYXRhLnN5c3RlbSA9IHsgLi4uZGF0YS5zeXN0ZW0sIHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24sIHByb3BlcnRpZXMgfVxuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgc3RhdGljIGd1ZXNzTmFtZVBhcnRzIChza2lsbE5hbWUpIHtcbiAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICBjb21iYXQ6IGZhbHNlLFxuICAgICAgZmlnaHRpbmc6IGZhbHNlLFxuICAgICAgZmlyZWFybTogZmFsc2UsXG4gICAgICBuYW1lOiBza2lsbE5hbWUsXG4gICAgICBza2lsbE5hbWUsXG4gICAgICBzcGVjaWFsOiBmYWxzZSxcbiAgICAgIHNwZWNpYWxpemF0aW9uOiAnJ1xuICAgIH1cblxuICAgIGNvbnN0IG1hdGNoID0gc2tpbGxOYW1lLm1hdGNoKC9eKC4rKVxccypcXCgoW14pXSspXFwpJC8pXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBvdXRwdXQuc2tpbGxOYW1lID0gbWF0Y2hbMl0udHJpbSgpXG4gICAgICBvdXRwdXQuc3BlY2lhbCA9IHRydWVcblxuICAgICAgY29uc3Qgc3BlY2lhbGl6YXRpb24gPSBtYXRjaFsxXS50cmltKClcbiAgICAgIG91dHB1dC5zcGVjaWFsaXphdGlvbiA9IHNwZWNpYWxpemF0aW9uXG4gICAgICBvdXRwdXQubmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIG91dHB1dC5za2lsbE5hbWUgKyAnKSdcbiAgICAgIG91dHB1dC5maWdodGluZyA9IHNwZWNpYWxpemF0aW9uID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgb3V0cHV0LmZpcmVhcm0gPSBzcGVjaWFsaXphdGlvbiA9PT0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgb3V0cHV0LmNvbWJhdCA9IG91dHB1dC5maWdodGluZyB8fCBvdXRwdXQuZmlyZWFybVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICBnZXQgaGFzQWN0aXZlRWZmZWN0cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlRWZmZWN0cy5sZW5ndGggPiAwXG4gIH1cblxuICBnZXQgYWN0aXZlRWZmZWN0cyAoKSB7XG4gICAgaWYgKHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LmVmZmVjdHMpIHtcbiAgICAgIGNvbnN0IGVmZmVjdEtleUZ1bGwgPSBgc2tpbGwuJHt0aGlzLm5hbWV9YC50b0xvd2VyQ2FzZSgpXG4gICAgICBjb25zdCBlZmZlY3RLZXlTaG9ydCA9IGBza2lsbC4ke3RoaXMuc3lzdGVtLnNraWxsTmFtZX1gLnRvTG93ZXJDYXNlKClcbiAgICAgIGxldCBjaGFuZ2VzID0gdGhpcy5wYXJlbnQuZWZmZWN0cy5yZWR1Y2UoKGNoYW5nZXMsIGUpID0+IHtcbiAgICAgICAgaWYgKGUuZGlzYWJsZWQgfHwgZS5pc1N1cHByZXNzZWQpIHJldHVybiBjaGFuZ2VzXG4gICAgICAgIHJldHVybiBjaGFuZ2VzLmNvbmNhdChcbiAgICAgICAgICBlLmRhdGEuY2hhbmdlcy5tYXAoYyA9PiB7XG4gICAgICAgICAgICBjID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYylcbiAgICAgICAgICAgIGMuZWZmZWN0ID0gZVxuICAgICAgICAgICAgYy5wcmlvcml0eSA9IGMucHJpb3JpdHkgPz8gYy5tb2RlICogMTBcbiAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfSwgW10pXG4gICAgICBjaGFuZ2VzLnNvcnQoKGEsIGIpID0+IGEucHJpb3JpdHkgLSBiLnByaW9yaXR5KVxuICAgICAgY2hhbmdlcyA9IGNoYW5nZXMuZmlsdGVyKFxuICAgICAgICBlID0+XG4gICAgICAgICAgZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gZWZmZWN0S2V5U2hvcnQgfHxcbiAgICAgICAgICBlLmtleS50b0xvd2VyQ2FzZSgpID09PSBlZmZlY3RLZXlGdWxsXG4gICAgICApXG4gICAgICByZXR1cm4gY2hhbmdlc1xuICAgIH1cbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIC8qKlxuICAqIFVuaXF1ZSBpZGVudGlmaWVyIHNob3VsZCBiZSB1c2VkIHRvIHN0b3JlIGFuZCBvYnRhaW4gaXRlbSB0byBhc3Nlc3MgaXRlbSB1bmlxdWVuZXNzLlxuICAqIEZvciBvbGQgaXRlbXMgd2l0aG91dCBpZCwgZmFsbGJhY2sgb2Ygc2tpbGxOYW1lIG1heSBzdGlsbCBiZSB1c2VkXG4gICogYnV0IGlmIHNraWxsIG5hbWUgaXMgbm90IHVuaXF1ZSBpdCB3aWxsIGNhdXNlIHByb2JsZW1zLlxuICAqL1xuICBnZXQgaXRlbUlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiB0aGlzLm5hbWVcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSB2YWx1ZSBvZiB0aGUgc2tpbGwgc2NvcmUgdW5hZmZlY3RlZCBieSBhY3RpdmUgZWZmZWN0c1xuICAgKi9cbiAgZ2V0IHJhd1ZhbHVlICgpIHtcbiAgICBsZXQgdmFsdWUgPSAwXG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIC8vIEZvciBhbiBhY3RvciB3aXRoIGV4cGVyaWVuY2Ugd2UgbmVlZCB0byBjYWxjdWxhdGUgc2tpbGwgdmFsdWVcbiAgICAgIHZhbHVlID0gdGhpcy5iYXNlXG4gICAgICB2YWx1ZSArPSB0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ucGVyc29uYWxcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ucGVyc29uYWwpXG4gICAgICAgIDogMFxuICAgICAgdmFsdWUgKz0gdGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb25cbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbilcbiAgICAgICAgOiAwXG4gICAgICB2YWx1ZSArPSB0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlKVxuICAgICAgICA6IDBcbiAgICAgIGlmIChcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKSAmJlxuICAgICAgICB0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uYXJjaGV0eXBlXG4gICAgICApIHtcbiAgICAgICAgdmFsdWUgKz0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmFyY2hldHlwZSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9yIGFsbCBvdGhlcnMgYWN0b3Igd2Ugc3RvcmUgdGhlIHZhbHVlIGRpcmVjdGx5XG4gICAgICB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gIWlzTmFOKHZhbHVlKSA/IHZhbHVlIDogbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHNraWxsJ3MgdmFsdWUgYWZ0ZXIgYWN0aXZlIGVmZmVjdHMgaGF2ZSBiZWVuIGFwcGxpZWRcbiAgICovXG4gIGdldCB2YWx1ZSAoKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnBhcmVudD8uc3lzdGVtLnNraWxscz8uW2Ake3RoaXMuaXRlbUlkZW50aWZpZXJ9YF0/LnZhbHVlXG4gICAgcmV0dXJuIHZhbHVlIHx8IHRoaXMucmF3VmFsdWVcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVZhbHVlICh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBjb25zdCBkZWx0YSA9IHBhcnNlSW50KHZhbHVlKSAtIHRoaXMucmF3VmFsdWVcbiAgICAgIGNvbnN0IGV4cCA9XG4gICAgICAgICh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICA6IDApICsgZGVsdGFcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogZXhwID4gMCA/IGV4cCA6IDBcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBpbmNyZWFzZUV4cGVyaWVuY2UgKHgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBjb25zdCBleHAgPVxuICAgICAgICAodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UpXG4gICAgICAgICAgOiAwKSArIHBhcnNlSW50KHgpXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IGV4cCA+IDAgPyBleHAgOiAwXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8vIGdldCB2YWx1ZSAoKSB7XG4gIC8vICAgbGV0IHBWYWx1ZVxuICAvLyAgIGlmKCB0aGlzLnBhcmVudCl7XG5cbiAgLy8gICB9XG4gIC8vICAgY29uc3QgdmFsdWUgPSBzdXBlci52YWx1ZVxuICAvLyAgIGxldCB1cGRhdGVkID0gdmFsdWVcbiAgLy8gICBmb3IgKGNvbnN0IGNoYW5nZSBvZiB0aGlzLmFjdGl2ZUVmZmVjdHMpIHtcbiAgLy8gICAgIGNvbnN0IG1vZGlmaWVyID0gTnVtYmVyLmZyb21TdHJpbmcoY2hhbmdlLnZhbHVlKVxuICAvLyAgICAgaWYgKCFpc05hTihtb2RpZmllcikpIHtcbiAgLy8gICAgICAgY29uc3QgbW9kZXMgPSBDT05TVC5BQ1RJVkVfRUZGRUNUX01PREVTXG4gIC8vICAgICAgIHN3aXRjaCAoY2hhbmdlLm1vZGUpIHtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLkFERDpcbiAgLy8gICAgICAgICAgIHVwZGF0ZWQgKz0gbW9kaWZpZXJcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5NVUxUSVBMWTpcbiAgLy8gICAgICAgICAgIHVwZGF0ZWQgPSBNYXRoLnJvdW5kKHVwZGF0ZWQgKiBtb2RpZmllcilcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5PVkVSUklERTpcbiAgLy8gICAgICAgICAgIHVwZGF0ZWQgPSBtb2RpZmllclxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLlVQR1JBREU6XG4gIC8vICAgICAgICAgICBpZiAobW9kaWZlciA+IHVwZGF0ZWQpIHVwZGF0ZWQgPSBtb2RpZmllclxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLkRPV05HUkFERTpcbiAgLy8gICAgICAgICAgIGlmIChtb2RpZmVyIDwgdXBkYXRlZCkgdXBkYXRlZCA9IG1vZGlmaWVyXG4gIC8vICAgICAgICAgICBicmVha1xuICAvLyAgICAgICB9XG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyAgIGlmICghaXNOYU4odXBkYXRlZCkgJiYgdXBkYXRlZCAhPSB2YWx1ZSkge1xuICAvLyAgICAgaWYgKHVwZGF0ZWQgPCAwKSB1cGRhdGVkID0gMFxuICAvLyAgICAgcmV0dXJuIHVwZGF0ZWRcbiAgLy8gICB9IHJldHVybiB2YWx1ZVxuICAvLyB9XG59XG4iLCJpbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9yLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1ZlaGljbGUgZXh0ZW5kcyBDb0NBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvamVlcC5zdmcnXG4gICAgfVxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICBnZXQgcmF3QnVpbGQgKCkge1xuICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gIH1cblxuICBnZXQgYnVpbGQgKCkge1xuICAgIGNvbnN0IGJ1aWxkID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSlcbiAgICByZXR1cm4gaXNOYU4oYnVpbGQpID8gbnVsbCA6IGJ1aWxkXG4gIH1cblxuICBnZXQgaHAgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCA9PT0gbnVsbCB8fFxuICAgICAgdW5kZWZpbmVkID09PSB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgfHxcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCA9PT0gJydcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWVcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gICAgfVxuICAgIGNvbnN0IGhwID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50KVxuICAgIHJldHVybiBpc05hTihocCkgPyBudWxsIDogaHBcbiAgfVxuXG4gIGdldCBocE1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgfVxuXG4gIGdldCByYXdIcE1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgfVxuXG4gIGFzeW5jIHNldEhwICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA+IHRoaXMuYnVpbGQpIHZhbHVlID0gdGhpcy5idWlsZFxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50JzogdmFsdWUgfSlcbiAgfVxuXG4gIGdldCByYXdEYiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGJcbiAgfVxuXG4gIGdldCBkYiAoKSB7XG4gICAgY29uc3QgZGIgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmRiPy52YWx1ZSlcbiAgICByZXR1cm4gaXNOYU4oZGIpID8gbnVsbCA6IGRiXG4gIH1cblxuICBnZXQgcmF3TW92ICgpIHtcbiAgICByZXR1cm4gdGhpcy5tb3ZcbiAgfVxuXG4gIGdldCBtb3YgKCkge1xuICAgIGNvbnN0IG1vdiA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubW92Py52YWx1ZSlcbiAgICByZXR1cm4gaXNOYU4obW92KSA/IG51bGwgOiBtb3ZcbiAgfVxuXG4gIGdldCBtcE1heCAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1wPy5tYXgpIHx8IDBcbiAgfVxuXG4gIGdldCByYXdNcE1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMubXBNYXhcbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgcmF3U2FuTWF4ICgpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGljZVRlcm0gKi9cblxuZXhwb3J0IGNsYXNzIENvQzdEZWNhZGVyRGllIGV4dGVuZHMgRGljZVRlcm0ge1xuICBjb25zdHJ1Y3RvciAodGVybURhdGEpIHtcbiAgICBzdXBlcih0ZXJtRGF0YSlcbiAgICB0aGlzLmZhY2VzID0gMTBcbiAgfVxuXG4gIGdldCB0b3RhbCAoKSB7XG4gICAgY29uc3QgdG90YWwgPSBzdXBlci50b3RhbFxuICAgIHJldHVybiB0b3RhbCA9PT0gMTAgPyAwIDogdG90YWwgKiAxMFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IERFTk9NSU5BVElPTiAoKSB7XG4gICAgcmV0dXJuICd0J1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb0M3RGVjYWRlckRpZSB9IGZyb20gJy4vZGVjYWRlci1kaWUuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3RGVjYWRlckRpZU90aGVyIGV4dGVuZHMgQ29DN0RlY2FkZXJEaWUge1xuICBzdGF0aWMgZ2V0IERFTk9NSU5BVElPTiAoKSB7XG4gICAgcmV0dXJuICdvJ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUgKi9cbmNvbnN0IFNFVFRJTkdTID0ge1xuICBwdWxwUnVsZXM6IHtcbiAgICBuYW1lOiAnJyxcbiAgICBoaW50OiAnJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgaW5pdGlhdGl2ZVJ1bGU6IHtcbiAgICBuYW1lOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGUnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogJ2Jhc2ljJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgYmFzaWM6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZUJhc2ljJyxcbiAgICAgIG9wdGlvbmFsOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGVPcHRpb25hbCdcbiAgICB9LFxuICAgIG9uQ2hhbmdlOiBydWxlID0+IF9zZXRJbml0aWF0aXZlT3B0aW9ucyhydWxlKVxuICB9LFxuICBkZXZlbG9wbWVudFJvbGxGb3JMdWNrOiB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRldmVsb3BtZW50Um9sbEZvckx1Y2snLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kZXZlbG9wbWVudFJvbGxGb3JMdWNrSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlRG91YmxlTWF4SGVhbHRoOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkRvdWJsZU1heEhlYWx0aC5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRG91YmxlTWF4SGVhbHRoLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2s6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRGV2ZWxvcG1lbnRSb2xsTHVjay5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRGV2ZWxvcG1lbnRSb2xsTHVjay5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVBcmNoZXR5cGU6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuQXJjaGV0eXBlLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5BcmNoZXR5cGUuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlT3JnYW5pemF0aW9uOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLk9yZ2FuaXphdGlvbi5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuT3JnYW5pemF0aW9uLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZVRhbGVudHM6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuVGFsZW50cy5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuVGFsZW50cy5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVGYXN0ZXJSZWNvdmVyeToge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5GYXN0ZXJSZWNvdmVyeS5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRmFzdGVyUmVjb3ZlcnkuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHM6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlTWFqb3JXb3VuZHMuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLklnbm9yZU1ham9yV291bmRzLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllczoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5JZ25vcmVBZ2VQZW5hbHRpZXMuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLklnbm9yZUFnZVBlbmFsdGllcy5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgb3Bwb3NlZFJvbGxUaWVCcmVha2VyOiB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLk9wcG9zZWRSb2xsVGllQnJlYWtlcicsXG4gICAgaGludDogJ1NFVFRJTkdTLk9wcG9zZWRSb2xsVGllQnJlYWtlckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9XG59XG5cbmZ1bmN0aW9uIF9zZXRJbml0aWF0aXZlT3B0aW9ucyAocnVsZSkge1xuICBsZXQgZGVjaW1hbHMgPSAwXG4gIHN3aXRjaCAocnVsZSkge1xuICAgIGNhc2UgJ29wdGlvbmFsJzpcbiAgICAgIGRlY2ltYWxzID0gMlxuICAgICAgYnJlYWtcbiAgICBjYXNlICdiYXNpYyc6XG4gICAgICBkZWNpbWFscyA9IDBcbiAgICAgIGJyZWFrXG4gIH1cbiAgQ09ORklHLkNvbWJhdC5pbml0aWF0aXZlID0ge1xuICAgIGZvcm11bGE6IG51bGwsXG4gICAgZGVjaW1hbHNcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN0dhbWVSdWxlU2V0dGluZ3MgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGl0bGU6ICdTRVRUSU5HUy5UaXRsZVJ1bGVzJyxcbiAgICAgIGlkOiAncnVsZXMtc2V0dGluZ3MnLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL3N5c3RlbS9ydWxlLXNldHRpbmdzLmh0bWwnLFxuICAgICAgd2lkdGg6IDU1MCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgY2xvc2VPblN1Ym1pdDogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBnZXREYXRhICgpIHtcbiAgICBjb25zdCBvcHRpb25zID0ge31cbiAgICBjb25zdCBwdWxwUnVsZXMgPSB7XG4gICAgICB0cnVlOiBmYWxzZSxcbiAgICAgIGZhbHNlOiBmYWxzZVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhTRVRUSU5HUykpIHtcbiAgICAgIG9wdGlvbnNba10gPSB7XG4gICAgICAgIHZhbHVlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsIGspLFxuICAgICAgICBzZXR0aW5nOiB2XG4gICAgICB9XG4gICAgICBpZiAoay5tYXRjaCgvXnB1bHBSdWxlLnsyLH0kLykpIHtcbiAgICAgICAgcHVscFJ1bGVzW29wdGlvbnNba10udmFsdWVdID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBvcHRpb25zLnB1bHBTZWxlY3Rpb24gPSBwdWxwUnVsZXMudHJ1ZVxuICAgICAgPyBwdWxwUnVsZXMuZmFsc2VcbiAgICAgICAgPyAnc29tZSdcbiAgICAgICAgOiAnYWxsJ1xuICAgICAgOiAnbm9uZSdcbiAgICByZXR1cm4gb3B0aW9uc1xuICB9XG5cbiAgc3RhdGljIHJlZ2lzdGVyU2V0dGluZ3MgKCkge1xuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKFNFVFRJTkdTKSkge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsIGssIHYpXG4gICAgfVxuICAgIF9zZXRJbml0aWF0aXZlT3B0aW9ucyhnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdpbml0aWF0aXZlUnVsZScpKVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcjcHVscFJ1bGVzU2VsZWN0JylcbiAgICAgIC5vbignY2hhbmdlJywgZXZlbnQgPT4gdGhpcy5vbkNoYW5nZVB1bHBTZWxlY3QoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdpbnB1dC5wdWxwUnVsZXNTZWxlY3RbdHlwZT1jaGVja2JveF0nKVxuICAgICAgLm9uKCdjbGljaycsIGV2ZW50ID0+IHRoaXMub25DbGlja1B1bHAoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdidXR0b25bbmFtZT1yZXNldF0nKVxuICAgICAgLm9uKCdjbGljaycsIGV2ZW50ID0+IHRoaXMub25SZXNldERlZmF1bHRzKGV2ZW50KSlcbiAgfVxuXG4gIG9uQ2hhbmdlUHVscFNlbGVjdCAoZXZlbnQpIHtcbiAgICBjb25zdCB2YWwgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnZhbCgpXG4gICAgaWYgKHZhbCA9PT0gJ25vbmUnIHx8IHZhbCA9PT0gJ2FsbCcpIHtcbiAgICAgICQoJyNydWxlcy1zZXR0aW5ncycpXG4gICAgICAgIC5maW5kKCdpbnB1dC5wdWxwUnVsZXNTZWxlY3RbdHlwZT1jaGVja2JveF0nKVxuICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2tib3ggPSAkKHRoaXMpXG4gICAgICAgICAgaWYgKHZhbCA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgZmFsc2UpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnLCB0cnVlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBvbkNsaWNrUHVscCAoZXZlbnQpIHtcbiAgICBjb25zdCBwdWxwUnVsZXMgPSB7XG4gICAgICB0cnVlOiBmYWxzZSxcbiAgICAgIGZhbHNlOiBmYWxzZVxuICAgIH1cbiAgICAkKCcjcnVsZXMtc2V0dGluZ3MnKVxuICAgICAgLmZpbmQoJ2lucHV0LnB1bHBSdWxlc1NlbGVjdFt0eXBlPWNoZWNrYm94XScpXG4gICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gJCh0aGlzKVxuICAgICAgICBpZiAoY2hlY2tib3gucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICAgICAgcHVscFJ1bGVzLnRydWUgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHVscFJ1bGVzLmZhbHNlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICQoJyNwdWxwUnVsZXNTZWxlY3QnKS52YWwoXG4gICAgICBwdWxwUnVsZXMudHJ1ZSA/IChwdWxwUnVsZXMuZmFsc2UgPyAnc29tZScgOiAnYWxsJykgOiAnbm9uZSdcbiAgICApXG4gIH1cblxuICBhc3luYyBvblJlc2V0RGVmYXVsdHMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGZvciBhd2FpdCAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKFNFVFRJTkdTKSkge1xuICAgICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCBrLCB2Py5kZWZhdWx0KVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZW5kZXIoKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGRhdGEpIHtcbiAgICBjb25zdCBwdWxwUnVsZXMgPSB7XG4gICAgICB0cnVlOiBmYWxzZSxcbiAgICAgIGZhbHNlOiBmYWxzZVxuICAgIH1cbiAgICBmb3IgYXdhaXQgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhTRVRUSU5HUykpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3Jywga2V5LCBkYXRhW2tleV0pXG4gICAgICBpZiAoa2V5Lm1hdGNoKC9ecHVscFJ1bGUuezIsfSQvKSkge1xuICAgICAgICBwdWxwUnVsZXNbZGF0YVtrZXldXSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVzJywgcHVscFJ1bGVzLnRydWUgJiYgIXB1bHBSdWxlcy5mYWxzZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBEcm9wQ29DSUQgfSBmcm9tICcuLi8uLi9hcHBzL2Ryb3AtY29jLWlkLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QXJjaGV0eXBlU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtIC5pdGVtLW5hbWUgaDQnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdza2lsbHMnKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tZGVsZXRlJylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZWxldGUoZXZlbnQsICdza2lsbHMnKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NraWxsJywgY29sbGVjdGlvbk5hbWUgPSAnc2tpbGxzJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBsZXQgdXNlQ29DSUQgPSAwXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5zeXN0ZW0pIGNvbnRpbnVlXG4gICAgICBpZiAoIVt0eXBlXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh1c2VDb0NJRCA9PT0gMCkge1xuICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgfVxuICAgICAgY29sbGVjdGlvbi5wdXNoKERyb3BDb0NJRC5wcm9jZXNzSXRlbSh1c2VDb0NJRCwgaXRlbSkpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBhc3luYyBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICB9KVxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiB0aGlzLml0ZW0uZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHsgcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgY29uc3QgQ29DSWQgPSBpdGVtLmRhdGEoJ2NvY2lkJylcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgoaSA9PiAoaXRlbUlkICYmIGkuX2lkID09PSBpdGVtSWQpIHx8IChDb0NJZCAmJiBpID09PSBDb0NJZCkpXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ29jY3VwYXRpb24nXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9hcmNoZXR5cGUuaHRtbCcsXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuXG4gICAgY29uc3QgY29yZUNoYXJhY3RlcmlzdGljcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCBzZWxlY3RlZF0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1xuICAgICkpIHtcbiAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICBjb25zdCBjaGFyYWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDSEFSQUMuJHtrZXkudG9VcHBlckNhc2UoKX1gKVxuICAgICAgICBjb3JlQ2hhcmFjdGVyaXN0aWNzLnB1c2goY2hhcmFjTmFtZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkU3VnZ2VzdGVkT2NjdXBhdGlvbnMgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc3VnZ2VzdGVkT2NjdXBhdGlvbnMsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWRTdWdnZXN0ZWRUcmFpdHMgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc3VnZ2VzdGVkVHJhaXRzLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscyB9KVxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RFbXB0eSA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NTdHJpbmcgPSAnJ1xuICAgIGNvbnN0IG9yU3RyaW5nID0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpfSBgXG4gICAgaWYgKGNvcmVDaGFyYWN0ZXJpc3RpY3MubGVuZ3RoKSB7XG4gICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljc1N0cmluZyArPSBjb3JlQ2hhcmFjdGVyaXN0aWNzLmpvaW4ob3JTdHJpbmcpXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlB1bHBUYWxlbnRzJyl9OiAke3NoZWV0RGF0YS5kYXRhLnN5c3RlbS50YWxlbnRzfWBcbiAgICApXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNQb2ludHMnKX06ICR7c2hlZXREYXRhLmRhdGEuc3lzdGVtLmJvbnVzUG9pbnRzfWBcbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Qm9va1NoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9ib29rL21haW4uaHRtbCcsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnaXRlbScsICdib29rJ10sXG4gICAgICB3aWR0aDogNTAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5zcGVsbHMnLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICBzY3JvbGxZOiBbJy5ib2R5J10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG4gICAgc2hlZXREYXRhLmluaXRpYWxSZWFkaW5nID0gdGhpcy5pdGVtLnN5c3RlbS5pbml0aWFsUmVhZGluZ1xuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmlzT3duZXIgPSB0aGlzLml0ZW0uaXNPd25lclxuICAgIHNoZWV0RGF0YS5zcGVsbHNMZWFybmVkID0gdGhpcy5zcGVsbHNMZWFybmVkXG4gICAgc2hlZXREYXRhLmV4aGF1c3RlZCA9IChhd2FpdCB0aGlzLml0ZW0uY2hlY2tFeGhhdXN0aW9uKCkpICE9PSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zdHVkeUNvbXBsZXRlZCA9IHRoaXMuaXRlbS5zeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MgPT09IHRoaXMuaXRlbS5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5XG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcbiAgICBzaGVldERhdGEuc3BlbGxMaXN0RW1wdHkgPSB0aGlzLml0ZW0uc3lzdGVtLnNwZWxscy5sZW5ndGggPT09IDBcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWRDb250ZW50ID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNvbnRlbnQsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBnZXQgc3BlbGxzTGVhcm5lZCAoKSB7XG4gICAgbGV0IGFtb3VudCA9IDBcbiAgICBjb25zdCBzcGVsbHMgPSB0aGlzLml0ZW0uc3lzdGVtLnNwZWxsc1xuICAgIGZvciAoY29uc3Qgc3BlbGwgb2Ygc3BlbGxzKSB7XG4gICAgICBpZiAoc3BlbGwuc3lzdGVtLmxlYXJuZWQpIGFtb3VudCsrXG4gICAgfVxuICAgIHJldHVybiBgJHthbW91bnR9IC8gJHtzcGVsbHMubGVuZ3RofWBcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJyNhdHRlbXB0LWluaXRpYWwtcmVhZGluZycpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIHRoaXMuaXRlbS5hdHRlbXB0SW5pdGlhbFJlYWRpbmcoKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXNwZWxsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25EZWxldGUoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLmVkaXQtc3BlbGwnKS5jbGljayhldmVudCA9PiB0aGlzLl9vblNwZWxsRGV0YWlsKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5zcGVsbC1uYW1lJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25TcGVsbERldGFpbChldmVudCkpXG4gICAgaHRtbC5maW5kKCcudGVhY2gtc3BlbGwnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBjb25zdCBpZCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnbGknKS5kYXRhKCdpZCcpXG4gICAgICB0aGlzLml0ZW0uYXR0ZW1wdFNwZWxsTGVhcm5pbmcoaWQpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJ1tuYW1lPVwic3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVwiXScpLmNoYW5nZShldmVudCA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICB0aGlzLml0ZW0uY2hhbmdlUHJvZ3Jlc3MoJ3Jlc2V0JywgdmFsdWUpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJyNpbmNyZWFzZS1wcm9ncmVzcycpLmNsaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuaXRlbS5jaGFuZ2VQcm9ncmVzcygnaW5jcmVhc2UnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcjZGVjcmVhc2UtcHJvZ3Jlc3MnKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLml0ZW0uY2hhbmdlUHJvZ3Jlc3MoJ2RlY3JlYXNlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmFkZC1vdGhlci1nYWlucycpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMoZXZlbnQsICdhZGQnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcuY2hhbmdlLW90aGVyLWdhaW5zJykuY2hhbmdlKGV2ZW50ID0+IHtcbiAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMoZXZlbnQsICdjaGFuZ2UnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcjcmVkby1mdWxsLXN0dWR5JykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5pdGVtLnJlZG9GdWxsU3R1ZHkoKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcucmVtb3ZlLW90aGVyLWdhaW5zJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhldmVudCwgJ3JlbW92ZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5vcHRpb24nKS5jbGljayhldmVudCA9PiB0aGlzLm1vZGlmeVR5cGUoZXZlbnQpKVxuICB9XG5cbiAgYXN5bmMgX29uU3BlbGxEZXRhaWwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGVsZW1lbnQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgLyoqIEBzZWUgZGF0YS1pbmRleCBwcm9wZXJ0eSBvbiB0ZW1wbGF0ZSAqL1xuICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudC5wYXJlbnRzKCdsaScpLmRhdGEoJ2luZGV4JylcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5pdGVtLnNwZWxsRGV0YWlsKGluZGV4KVxuICB9XG5cbiAgLyoqXG4gICAqIEl0IGlzIGNhbGxlZCBldmVyeSB0aW1lIHRoZSB1c2VyIGRlbGV0ZSBhIHNwZWxsIG9uIHRoZSBzaGVldFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgX29uRGVsZXRlIChldmVudCkge1xuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHJldHVyblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIC8qKiBAc2VlIGRhdGEtaW5kZXggcHJvcGVydHkgb24gdGVtcGxhdGUgKi9cbiAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQucGFyZW50cygnbGknKS5kYXRhKCdpbmRleCcpXG4gICAgLyoqIEFsd2F5cyBoYXMgdG8gYmUgQHR5cGUge0FycmF5fSAqL1xuICAgIGNvbnN0IHNwZWxscyA9IHRoaXMuaXRlbS5zeXN0ZW0uc3BlbGxzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uc3BlbGxzKVxuICAgICAgOiBbXVxuICAgIGlmIChpbmRleCA+PSAwKSBzcGVsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5zcGVsbHMnOiBzcGVsbHMgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBJdCBpcyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdXNlciBkcmFncyBhbiBpdGVtIHRvIHRoZSBzaGVldFxuICAgKiBGaWx0ZXJzIG9ubHkgJ3NwZWxsJyBpdGVtcyBhbmQgaW5zZXJ0cyB0aGVtIGluIGEgQHR5cGUge0FycmF5fVxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc3BlbGwnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8qKiBQcmV2ZW50cyBwcm9wYWdhdGlvbiBvZiB0aGUgc2FtZSBldmVudCBmcm9tIGJlaW5nIGNhbGxlZCAqL1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGNvbnN0IHNwZWxscyA9IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIVsnc2tpbGwnLCAnc3BlbGwnXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSBjb250aW51ZVxuICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJykge1xuICAgICAgICBzcGVsbHMucHVzaChpdGVtKVxuICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcgJiYgdGhpcy5pdGVtLnN5c3RlbS50eXBlLm90aGVyKSB7XG4gICAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMobnVsbCwgJ2FkZCcsIHsgbmFtZTogaXRlbS5uYW1lIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS5hZGRTcGVsbHMoc3BlbGxzKVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgY2hlY2tib3hlcyBmb3IgdHlwZSB3aGVuIHVzZXIgY2xpY2tzIG9uIHRoZSBjb3JyZXNwb25kaW5nXG4gICAqIGxhYmVsLCBub3Qgc3VyZSBpZiB0aGlzIHdvcmtzIG9uIGVuZ2luZXMgb3RoZXIgdGhhbiBWOFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7alF1ZXJ5LkV2ZW50fSBjbGlja1xuICAgKi9cbiAgbW9kaWZ5VHlwZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLyoqIFByZXZlbnRzIHByb3BhZ2F0aW9uIG9mIHRoZSBzYW1lIGV2ZW50IGZyb20gYmVpbmcgY2FsbGVkICovXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0b2dnbGVTd2l0Y2ggPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgcmV0dXJuIHRvZ2dsZVN3aXRjaC5wcmV2KCkudHJpZ2dlcignY2xpY2snKVxuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmeSBJdGVtIGRhdGEgYmFzZWQgb24gdXNlciBpbnRlcmFjdGlvbnMgd2l0aCB0aGUgb3RoZXIgc2tpbGxcbiAgICogZ2FpbnMgdGFibGUgb24gZGV0YWlscyB0YWIgb24gdGhpcyBzaGVldFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZSAnYWRkJyB8fCAnY2hhbmdlJyB8fCAncmVtb3ZlJ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBtb2RpZnlPdGhlcnNHYWlucyAoZXZlbnQsIG1vZGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIC8qKiBObyBuZWVkIHRvIGNoZWNrIGlmIHVzZXIgaXMgR00gYmVjYXVzZSBvbmx5IHRoZXkgY2FuIHNlZSBkZXRhaWxzIHRhYiAqL1xuICAgIGxldCBpbmRleCA9IG51bGxcbiAgICBsZXQgZWxlbWVudCA9IG51bGxcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGVsZW1lbnQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAvKiogQHNlZSBkYXRhLWluZGV4IHByb3BlcnR5IG9uIHRlbXBsYXRlICovXG4gICAgICBpbmRleCA9IGVsZW1lbnQucGFyZW50cygndHInKS5kYXRhKCdpbmRleCcpXG4gICAgICAvKiogQWx3YXlzIGhhcyB0byBiZSBAdHlwZSB7QXJyYXl9ICovXG4gICAgfVxuICAgIGNvbnN0IHNraWxscyA9IHRoaXMuaXRlbS5zeXN0ZW0uZ2FpbnMub3RoZXJzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ2FpbnMub3RoZXJzKVxuICAgICAgOiBbXVxuICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgY2FzZSAnYWRkJzpcbiAgICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBwbHVzIGljb24gdG8gYWRkIGEgbmV3IHNraWxsIG9uIG90aGVyIGdhaW5zIHRhYmxlICovXG4gICAgICAgIHNraWxscy5wdXNoKHtcbiAgICAgICAgICAvKiogbmV3IHNraWxsICovXG4gICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lIHx8IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5OZXdTa2lsbE5hbWUnKSxcbiAgICAgICAgICAvKiogZGV2ZWxvcG1lbnQgYnkgZGVmYXVsdCwgdmFsdWUgY2FuIGFsc28gYmUgMWQ2IG9yIDFkMTAgKi9cbiAgICAgICAgICB2YWx1ZTogJ2RldmVsb3BtZW50J1xuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhbmdlJzpcbiAgICAgICAgLyoqIFVzZXIgY2hhbmdlZCBuYW1lIChpbnB1dCkgb3IgdmFsdWUgKHNlbGVjdCkgb2YgYSBza2lsbCBvbiB0YWJsZSAqL1xuICAgICAgICBza2lsbHNbaW5kZXhdID0ge1xuICAgICAgICAgIG5hbWU6IGVsZW1lbnQuaXMoJ2lucHV0JykgPyBlbGVtZW50LnZhbCgpIDogc2tpbGxzW2luZGV4XS5uYW1lLFxuICAgICAgICAgIHZhbHVlOiBlbGVtZW50LmlzKCdzZWxlY3QnKSA/IGVsZW1lbnQudmFsKCkgOiBza2lsbHNbaW5kZXhdLnZhbHVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3JlbW92ZSc6XG4gICAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gbWludXMgaWNvbiB0byByZW1vdmUgYSBza2lsbCBvbiBvdGhlciBnYWlucyB0YWJsZSAqL1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkgc2tpbGxzLnNwbGljZShpbmRleCwgMSlcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmdhaW5zLm90aGVycyc6IHNraWxscyB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3JTaGVldCwgQ09OU1QsIERpYWxvZywgRm9ybURhdGEsIGZvdW5kcnksIGdhbWUsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NvbnRhaW5lclNoZWV0IGV4dGVuZHMgQWN0b3JTaGVldCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnc3RvcmFnZSddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9zdG9yYWdlLXNoZWV0Lmh0bWwnLFxuICAgICAgd2lkdGg6IDY3MixcbiAgICAgIGhlaWdodDogNzY1LFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2l0ZW1zJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5hY3Rvci5pdGVtcy50b09iamVjdCgpIHx8IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uc3lzdGVtKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBpZiAoIVsnYm9vaycsICdpdGVtJywgJ3NwZWxsJywgJ3dlYXBvbiddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIGl0ZW1zLnB1c2goaXRlbS50b09iamVjdCgpKVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZSh7IGl0ZW1zIH0pXG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge31cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBzaGVldERhdGEuZWRpdGFibGUgPSB0aGlzLmlzRWRpdGFibGVcblxuICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSA9IHt9XG4gICAgaWYgKHNoZWV0RGF0YS5pdGVtcykge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHNoZWV0RGF0YS5pdGVtcykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSxcbiAgICAgICAgICAgIGl0ZW0udHlwZVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdLnB1c2goaXRlbSlcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgaXRlbVR5cGUgaW4gc2hlZXREYXRhLml0ZW1zQnlUeXBlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtVHlwZV0uc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLmFsbG93VW5sb2NrID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxuICAgICAgZ2FtZS51c2VyLmlzR01cblxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2l0ZW0nKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdib29rJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3NwZWxsJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICd0YWxlbnQnKSB8fFxuICAgICAgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkICYmXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlVGFsZW50cycpKVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9ucyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnd2VhcG9uJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG5cbiAgICBzaGVldERhdGEuaGFzSW52ZW50b3J5ID1cbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tZWRpdCcpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgICBpdGVtLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5pbnZlbnRvcnktaGVhZGVyJykuY2xpY2sodGhpcy5fb25JbnZlbnRvcnlIZWFkZXIuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tdHJhZGUnKS5jbGljayh0aGlzLl9vblRyYWRlSXRlbS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNob3ctZGV0YWlsJykuY2xpY2sodGhpcy5fb25JdGVtU3VtbWFyeS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayhhc3luYyBldiA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoZXYuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgICAgY29uc3QgaXRlbVRvRGVsZXRlID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJyksIHtcbiAgICAgICAgc3RyaWN0OiB0cnVlXG4gICAgICB9KVxuICAgICAgYXdhaXQgaXRlbVRvRGVsZXRlLmRlbGV0ZSgpXG4gICAgICBsaS5zbGlkZVVwKDIwMCwgKCkgPT4gdGhpcy5yZW5kZXIoZmFsc2UpKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtaXRlbScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIHN3aXRjaCAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGUpIHtcbiAgICAgICAgY2FzZSAnYm9vayc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUJvb2soZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUl0ZW0oZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTa2lsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdzcGVsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNwZWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3dlYXBvbic6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVdlYXBvbihldilcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5sb2NrJykuY2xpY2sodGhpcy5fb25Mb2NrQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uTG9ja0NsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGlzTG9ja2VkID0gdGhpcy5hY3Rvci5sb2NrZWRcbiAgICB0aGlzLmFjdG9yLmxvY2tlZCA9ICFpc0xvY2tlZFxuICB9XG5cbiAgYXN5bmMgX29uVHJhZGVJdGVtIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgIGxldCBjb250ZW50ID0gJzxwPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVNlbGVjdFVzZXJUb0dpdmVUbycpXG4gICAgY29uc3QgbWVzc2FnZSA9IHtcbiAgICAgIGFjdG9yRnJvbTogdGhpcy5hY3Rvci5pZCxcbiAgICAgIHNjZW5lOiBudWxsLFxuICAgICAgYWN0b3JUbzogdGhpcy5hY3Rvci5pZCxcbiAgICAgIGl0ZW06IGl0ZW0uaWRcbiAgICB9XG4gICAgaWYgKHRoaXMudG9rZW4/LmFjdG9yKSB7XG4gICAgICBtZXNzYWdlLmFjdG9yRnJvbSA9IHRoaXMudG9rZW4uaWRcbiAgICAgIG1lc3NhZ2Uuc2NlbmUgPSB0aGlzLnRva2VuLnBhcmVudC5pZFxuICAgIH1cbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9ycy5maWx0ZXIoZSA9PiB7XG4gICAgICBpZiAoIVsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZScsICdjb250YWluZXInXS5pbmNsdWRlcyhlLnR5cGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYWN0b3IuaWQgPT09IGUuaWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBsZXQgdmlzaWJsZSA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhlLm93bmVyc2hpcCkpIHtcbiAgICAgICAgaWYgKGsgPT09ICdkZWZhdWx0JyB8fCBrID09PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgICAgICB2aXNpYmxlID1cbiAgICAgICAgICAgIHZpc2libGUgfHxcbiAgICAgICAgICAgIHYgIT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTk9ORVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmlzaWJsZVxuICAgIH0pXG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgY29udGVudCA9XG4gICAgICAgIGNvbnRlbnQgKyAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhY3Rvci5pZCArICdcIj4nICsgYWN0b3IubmFtZSArICc8L29wdGlvbj4nXG4gICAgfVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzwvc2VsZWN0PjwvZm9ybT48L3A+J1xuICAgIGF3YWl0IERpYWxvZy5wcm9tcHQoe1xuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlVGl0bGVTZWxlY3RVc2VyVG9HaXZlVG8nKSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKSlcbiAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGZvcm1EYXRhKSB7XG4gICAgICAgICAgaWYgKG5hbWUgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgbWVzc2FnZS5hY3RvclRvID0gdmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIGF3YWl0IGdhbWUuQ29DN3NvY2tldC5leGVjdXRlQXNHTSgnZ210cmFkZWl0ZW10bycsIG1lc3NhZ2UpXG4gIH1cblxuICBhc3luYyBfb25JdGVtU3VtbWFyeSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbS1pZCcpKVxuICAgIGNvbnN0IGNoYXREYXRhID0gYXdhaXQgaXRlbS5nZXRDaGF0RGF0YSh7IHNlY3JldHM6IHRoaXMuYWN0b3IuaXNPd25lciB9KVxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+PC9kaXY+JylcblxuICAgICAgY29uc3QgbGFiZWxzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5sYWJlbHMpIHtcbiAgICAgICAgbGFiZWxzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxcIj48c3BhbiBjbGFzcz1cImxhYmVsLW5hbWVcIj4ke3AubmFtZX0gOjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsLXZhbHVlXCI+JHtwLnZhbHVlfTwvc3Bhbj48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQobGFiZWxzKVxuXG4gICAgICBkaXYuYXBwZW5kKFxuICAgICAgICAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1kZXNjcmlwdGlvblwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24udmFsdWV9PC9kaXY+YClcbiAgICAgIClcbiAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGNsKSB7XG4gICAgICAgIGNvbnN0IHNwZWNpYWxEaXYgPSAkKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaXRlbS1zcGVjaWFsXCI+JHtjaGF0RGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsfTwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgICBkaXYuYXBwZW5kKHNwZWNpYWxEaXYpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykge1xuICAgICAgICBwcm9wcy5hcHBlbmQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJ0YWcgaXRlbS1wcm9wZXJ0eVwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKHApfTwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcblxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgICAvLyAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpO1xuICB9XG5cbiAgX29uSW52ZW50b3J5SGVhZGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnNpYmxpbmdzKCdsaScpLnNsaWRlVG9nZ2xlKDIwMClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERyYWdEcm9wLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgX3BhcnRpY2lwYW50IH0gZnJvbSAnLi4vaXRlbXMvY2hhc2UvcGFydGljaXBhbnQuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlciBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFkZEFjdG9yVG9DaGFzZScpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY2hhc2UtcGFydGljaXBhbnQtaW1wb3J0ZXIuaHRtbCcsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyJ10sXG4gICAgICBlZGl0YWJsZTogdHJ1ZSxcbiAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICBzdWJtaXRPbkNoYW5nZTogdHJ1ZSxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgd2lkdGg6IDMwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgfSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50RHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLmZvcm0tY29udGFpbmVyJyxcbiAgICAgIHBlcm1pc3Npb25zOiB7IGRyb3A6IGdhbWUudXNlci5pc0dNIH0sXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wUGFydGljaXBhbnQuYmluZCh0aGlzKSB9XG4gICAgfSlcbiAgICBwYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGNvbnN0IHRva2VuU2VsZWN0b3JEcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcmFnU2VsZWN0b3I6ICcuY2hhc2UtdG9rZW4nLFxuICAgICAgcGVybWlzc2lvbnM6IHtcbiAgICAgICAgZHJhZ3N0YXJ0OiBnYW1lLnVzZXIuaXNHTVxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX29uVG9rZW5TZWxlY3RvckRyYWdTdGFydC5iaW5kKHRoaXMpXG4gICAgICB9XG4gICAgfSlcbiAgICB0b2tlblNlbGVjdG9yRHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgaHRtbC5maW5kKCcucmVzZXQtcGFydGljaXBhbnQnKS5jbGljayhhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLm9iamVjdCA9IHt9XG4gICAgICB0aGlzLl9hY3RvciA9IG51bGxcbiAgICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmZvb2QtY2hhaW4nKS5jbGljayhhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLm9iamVjdC5jaGFzZXIgPSAhdGhpcy5vYmplY3QuY2hhc2VyXG4gICAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJ1tkYXRhLWFjdGlvbl0nKS5jbGljayh0aGlzLl9vbkFjdGlvbi5iaW5kKHRoaXMpKVxuXG4gICAgLy8gaHRtbC5maW5kKCdidXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uVG9rZW5TZWxlY3RvckRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdHlwZTogJ2dldFRva2VuJyxcbiAgICAgIGFwcElkOiB0aGlzLmFwcElkLFxuICAgICAgY2FsbEJhY2s6ICdhZGRUb2tlblRvQ2hhc2UnXG4gICAgfVxuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBpZiAoIXRoaXMub2JqZWN0LmluaXRpYXRpdmUpIHtcbiAgICAgIGNvbnN0IGluaXQgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5maW5kKFxuICAgICAgICBjID0+IGMua2V5ID09PSAnZGV4J1xuICAgICAgKVxuICAgICAgdGhpcy5vYmplY3QuaW5pdGlhdGl2ZSA9IGluaXQubGFiZWxcbiAgICAgIC8vIHRoaXMub2JqZWN0LmluaXRpYXRpdmUgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAvLyAgICdDb0M3LkNoYXJhY3RlcmlzdGljcydcbiAgICAgIC8vICl9ICgke2luaXQuc2hvcnROYW1lfSlgXG4gICAgfVxuICAgIGlmICghdGhpcy5vYmplY3Quc3BlZWRDaGVjaykge1xuICAgICAgY29uc3Qgc3BlZWRDaGVjayA9IENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZpbmQoXG4gICAgICAgIGMgPT4gYy5rZXkgPT09ICdjb24nXG4gICAgICApXG4gICAgICB0aGlzLm9iamVjdC5zcGVlZENoZWNrID0ge1xuICAgICAgICBuYW1lOiBzcGVlZENoZWNrLmxhYmVsXG4gICAgICB9XG4gICAgICAvLyB0aGlzLm9iamVjdC5zcGVlZENoZWNrID0ge1xuICAgICAgLy8gICBuYW1lOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWNzJyl9ICgke1xuICAgICAgLy8gICAgIHNwZWVkQ2hlY2suc2hvcnROYW1lXG4gICAgICAvLyAgIH0pYFxuICAgICAgLy8gfVxuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGVQYXJ0aWNpcGFudCgpXG5cbiAgICAvLyBjb25zdCBzcGVlZENoZWNrID0gdGhpcy5hY3Rvcj8uZmluZCggdGhpcy5vYmplY3Quc3BlZWRDaGVjaz8ubmFtZSlcbiAgICAvLyBpZiggc3BlZWRDaGVjayl7XG4gICAgLy8gICB0aGlzLm9iamVjdC5zcGVlZENoZWNrID0gc3BlZWRDaGVja1xuICAgIC8vIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEucGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMub2JqZWN0KVxuICAgIGlmIChkYXRhLm9iamVjdC5zcGVlZENoZWNrLm5hbWUgJiYgdGhpcy5hY3Rvcikge1xuICAgICAgY29uc3Qgc3BlZWRDaGVjayA9IHRoaXMuYWN0b3IuZmluZChkYXRhLm9iamVjdC5zcGVlZENoZWNrLm5hbWUpXG4gICAgICBpZiAoc3BlZWRDaGVjaykge1xuICAgICAgICBkYXRhLm9iamVjdC5zcGVlZENoZWNrLnNjb3JlID0gc3BlZWRDaGVjay52YWx1ZS52YWx1ZVxuICAgICAgICBkYXRhLnNwZWVkQ2hlY2tSZWFkT25seSA9IHRydWVcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGRhdGEucGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSAmJlxuICAgICAgICAhdGhpcy5vYmplY3Quc3BlZWRDaGVjaz8uc2NvcmVcbiAgICAgICkge1xuICAgICAgICBkYXRhLm9iamVjdC5zcGVlZENoZWNrLnNjb3JlID0gZGF0YS5wYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEub2JqZWN0LmluaXRpYXRpdmUgJiYgdGhpcy5hY3Rvcikge1xuICAgICAgY29uc3QgaW5pdGlhdGl2ZSA9IHRoaXMuYWN0b3IuZmluZChkYXRhLm9iamVjdC5pbml0aWF0aXZlKVxuICAgICAgaWYgKGluaXRpYXRpdmUpIHtcbiAgICAgICAgZGF0YS5vYmplY3QuZGV4ID0gaW5pdGlhdGl2ZS52YWx1ZS52YWx1ZVxuICAgICAgICBkYXRhLmluaXRSZWFkT25seSA9IHRydWVcbiAgICAgIH0gZWxzZSBkYXRhLm9iamVjdC5kZXggPSBkYXRhLnBhcnRpY2lwYW50LmluaXRpYXRpdmVcbiAgICB9XG5cbiAgICBkYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgIGRhdGEuY2hhc2UgPSB0aGlzLmNoYXNlXG4gICAgZGF0YS5kYXRhID0gdGhpcy5kYXRhXG5cbiAgICBkYXRhLm9wdGlvbnNMaXN0ID0ge31cbiAgICBpZiAodGhpcy5jaGFzZSkge1xuICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0ID1cbiAgICAgICAgdGhpcy5jaGFzZS5hbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NTaG9ydFxuICAgIH1cblxuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QgPSBbXVxuICAgICAgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZm9yRWFjaChjID0+XG4gICAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdC5wdXNoKGAke2MubGFiZWx9YClcbiAgICAgIClcbiAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdC5wdXNoKFxuICAgICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpfWBcbiAgICAgIClcbiAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdC5wdXNoKFxuICAgICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJyl9YFxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci5za2lsbHMuZm9yRWFjaChzID0+XG4gICAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdC5wdXNoKHMubmFtZSlcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgZ2V0IGNoYXNlICgpIHtcbiAgICBpZiAoIXRoaXMuX2NoYXNlKSB7XG4gICAgICB0aGlzLl9jaGFzZSA9IENvQzdVdGlsaXRpZXMuU2Zyb21VdWlkKHRoaXMub2JqZWN0LmNoYXNlVXVpZClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NoYXNlXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5vYmplY3QuZG9jVXVpZCkgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuX2FjdG9yKSB7XG4gICAgICB0aGlzLl9hY3RvciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHRoaXMub2JqZWN0LmRvY1V1aWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0aGlzLCBmb3JtRGF0YSlcbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IGRyb3BTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgY29uc3QgZHJvcERhdGEgPSBKU09OLnBhcnNlKGRyb3BTdHJpbmcpXG5cbiAgICBjb25zdCBkb2NVdWlkID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhKGRyb3BEYXRhKVxuXG4gICAgdGhpcy5vYmplY3QuZG9jVXVpZCA9IGRvY1V1aWRcblxuICAgIC8vIElmIGFjdG9yIGlzIGNvbnRyb2xsZWQgYnkgR00gb25seSB3ZSBhc3N1bWUgaGUgaXMgYSBjaGFzZXJcbiAgICB0aGlzLm9iamVjdC5jaGFzZXIgPSB0aGlzLmFjdG9yPy5vd25lcnM/LmZpbHRlcih1ID0+ICF1LmlzR00pLmxlbmd0aCA9PT0gMFxuICAgIGlmICh0aGlzLm9iamVjdC5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nKSB7XG4gICAgICBkZWxldGUgdGhpcy5vYmplY3Quc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZ1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBhZGRUb2tlblRvQ2hhc2UgKHRva2Vucykge1xuICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLm9iamVjdC5kb2NVdWlkID0gdG9rZW5zWzBdLmRvY3VtZW50Py51dWlkXG4gICAgICAvLyBJZiBhY3RvciBpcyBjb250cm9sbGVkIGJ5IEdNIG9ubHkgd2UgYXNzdW1lIGhlIGlzIGEgY2hhc2VyXG4gICAgICB0aGlzLm9iamVjdC5jaGFzZXIgPSB0aGlzLmFjdG9yPy5vd25lcnM/LmZpbHRlcih1ID0+ICF1LmlzR00pLmxlbmd0aCA9PT0gMFxuICAgICAgaWYgKHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JUb2tlbkluY29ycmVjdCcpKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkFjdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBhY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2NoYXNlLWNhbmNlbCc6XG4gICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhc2UtYWRkJzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcblxuICAgICAgICAgIGlmICh0aGlzLmNoYXNlLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIShwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbiAmJiBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbiA+IDApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Eb2VzTm90TWVldE1pbmltdW1SZXFUb0JlQWRkZWQnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5vdmVycmlkZU1vdmVtZW50QWN0aW9uKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNsb3dlc3QgPSB0aGlzLmNoYXNlLnNsb3dlc3RQYXJ0aWNpcGFudFxuICAgICAgICAgICAgICBpZiAoaXNOYU4ocGFydGljaXBhbnQuYWRqdXN0ZWRNb3YpKSB7XG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnQubW92ID0gc2xvd2VzdC5hZGp1c3RlZE1vdlxuICAgICAgICAgICAgICB9IC8qKiBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLm1vdiA9XG4gICAgICAgICAgICAgICAgICBzbG93ZXN0LmFkanVzdGVkTW92ICsgcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gLSAxXG4gICAgICAgICAgICAgIH0gKi9cbiAgICAgICAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGF3YWl0IHRoaXMuY2hhc2UuYWRkUGFydGljaXBhbnQocGFydGljaXBhbnQsIHtcbiAgICAgICAgICAgIGxvY2F0aW9uVXVpZDogdGhpcy5vYmplY3QubG9jYXRpb25VdWlkLFxuICAgICAgICAgICAgcmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnM6IHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkLFxuICAgICAgICAgICAgdXBkYXRlOiB0aGlzLm9iamVjdC51cGRhdGVcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3JvbGwtc3BlZWQtY2hlY2snOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMub2JqZWN0KVxuICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlNldCkge1xuICAgICAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsZWQgPSB0cnVlXG4gICAgICAgICAgICByb2xsLmFjdG9yID0gcGFydGljaXBhbnQuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQ2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsQ2hhcmFjdGVyaXN0aWMocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNTa2lsbCkge1xuICAgICAgICAgICAgICByb2xsLnNraWxsID0gcGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZcbiAgICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsKClcbiAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQXR0cmlidXRlKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbEF0dHJpYnV0ZShwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZi5rZXkpXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvbGxEYXRhID0ge1xuICAgICAgICAgICAgICByYXdWYWx1ZTogcGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2submFtZSxcbiAgICAgICAgICAgICAgYWN0b3JOYW1lOiBwYXJ0aWNpcGFudC5uYW1lID8gcGFydGljaXBhbnQubmFtZSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50Lmhhc0FjdG9yKSB7XG4gICAgICAgICAgICAgIHJvbGxEYXRhLmFjdG9yID0gcGFydGljaXBhbnQuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suY3JlYXRlKHJvbGxEYXRhKVxuICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsKClcbiAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcy5vYmplY3QsIHBhcnRpY2lwYW50LmRhdGEpXG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgdmFsaWRhdGVQYXJ0aWNpcGFudCAoKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMub2JqZWN0KVxuICAgIGlmICghdGhpcy5kYXRhKSB0aGlzLmRhdGEgPSB7fVxuICAgIHRoaXMub2JqZWN0LmV4Y2x1ZGVkID0gZmFsc2VcbiAgICB0aGlzLm9iamVjdC5lc2NhcGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50RXhjbHVkZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbkRlbHRhID0gMFxuXG4gICAgaWYgKCF0aGlzLmRhdGEub3ZlcnJpZGVNb3ZlbWVudEFjdGlvbikge1xuICAgICAgY29uc3Qgc2xvd2VzdFByZXkgPSB0aGlzLmNoYXNlLnNsb3dlc3RQcmV5XG4gICAgICBjb25zdCBmYXN0ZXN0Q2hhc2VyID0gdGhpcy5jaGFzZS5mYXN0ZXN0Q2hhc2VyXG4gICAgICBjb25zdCBzbG93ZXN0ID0gdGhpcy5jaGFzZS5zbG93ZXN0UGFydGljaXBhbnRcblxuICAgICAgaWYgKHBhcnRpY2lwYW50LmFkanVzdGVkTW92IDwgc2xvd2VzdD8uYWRqdXN0ZWRNb3YpIHtcbiAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSB0cnVlXG4gICAgICAgIHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uID0gMVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgICAgICBwYXJ0aWNpcGFudC5jYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMoc2xvd2VzdD8uYWRqdXN0ZWRNb3YpXG4gICAgICB9XG4gICAgICBpZiAocGFydGljaXBhbnQuaXNDaGFzZXIpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHNsb3dlc3RQcmV5ICYmXG4gICAgICAgICAgIXRoaXMuY2hhc2Uuc3lzdGVtLmluY2x1ZGVMYXN0Q29tbWVycyAmJlxuICAgICAgICAgIHBhcnRpY2lwYW50LmFkanVzdGVkTW92IDwgc2xvd2VzdFByZXkuYWRqdXN0ZWRNb3ZcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZXhjbHVkZWQgPSB0cnVlXG4gICAgICAgICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50RXhjbHVkZWQgPSB0cnVlXG4gICAgICAgICAgdGhpcy5kYXRhLmV4Y2x1ZGVkQmVjYXVzZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29TbG93JylcbiAgICAgICAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnRpY2lwYW50LmlzUHJleSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZmFzdGVzdENoYXNlciAmJlxuICAgICAgICAgICF0aGlzLmNoYXNlLnN5c3RlbS5pbmNsdWRlRXNjYXBlZCAmJlxuICAgICAgICAgIHBhcnRpY2lwYW50LmFkanVzdGVkTW92ID4gZmFzdGVzdENoYXNlci5hZGp1c3RlZE1vdlxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lc2NhcGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudEV4Y2x1ZGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuZGF0YS5leGNsdWRlZEJlY2F1c2UgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vRmFzdCcpXG4gICAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGlmIChkYXRhLmRyb3BEYXRhKSB7XG4gICAgICBjb25zdCBkb2NVdWlkID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhKGRhdGEuZHJvcERhdGEpXG4gICAgICBpZiAoZG9jVXVpZCkgZGF0YS5kb2NVdWlkID0gZG9jVXVpZFxuICAgICAgZGVsZXRlIGRhdGEuZHJvcERhdGFcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyKGRhdGEpLnJlbmRlcih0cnVlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRGlhbG9nLCBEcmFnRHJvcCwgRm9ybURhdGFFeHRlbmRlZCwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yLCB1aSAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIgfSBmcm9tICcuLi8uLi9hcHBzL2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBfcGFydGljaXBhbnQgfSBmcm9tICcuL3BhcnRpY2lwYW50LmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXNlU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICBjb25zdCBvcHRpb25zID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnaXRlbScsICdjaGFzZSddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2NoYXNlLmh0bWwnLFxuICAgICAgd2lkdGg6IDU1MCxcbiAgICAgIGhlaWdodDogNTAwLFxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3BhcnRpY2lwYW50cydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG5cbiAgICByZXR1cm4gb3B0aW9uc1xuXG4gICAgLy8gY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgLy8gc3VibWl0T25DbG9zZTogdHJ1ZSxcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgc3RhdGljIGdldCB0eXBlICgpIHtcbiAgICByZXR1cm4gJ2NvYzdDaGFzZVNoZWV0J1xuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKG9wdGlvbnMpXG5cbiAgICBzaGVldERhdGEucGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnBhcnRpY2lwYW50c09iamVjdFxuICAgIHNoZWV0RGF0YS5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmUgPSB0aGlzLml0ZW0ucGFydGljaXBhbnRzQnlJbml0aWF0aXZlXG4gICAgc2hlZXREYXRhLnByZXlzID0gdGhpcy5pdGVtLnByZXlzXG4gICAgc2hlZXREYXRhLmNoYXNlcnMgPSB0aGlzLml0ZW0uY2hhc2Vyc1xuXG4gICAgc2hlZXREYXRhLnByZXlzTWluTW92ID0gc2hlZXREYXRhLnByZXlzLmxlbmd0aCA/IHNoZWV0RGF0YS5wcmV5cy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHByZXYuYWRqdXN0ZWRNb3YgPCBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnQpLmFkanVzdGVkTW92IDogLTFcblxuICAgIHNoZWV0RGF0YS5wcmV5c01heE1vdiA9IHNoZWV0RGF0YS5wcmV5cy5sZW5ndGggPyBzaGVldERhdGEucHJleXMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXG5cbiAgICBzaGVldERhdGEuY2hhc2Vyc01pbk1vdiA9IHNoZWV0RGF0YS5jaGFzZXJzLmxlbmd0aCA/IHNoZWV0RGF0YS5jaGFzZXJzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gcHJldi5hZGp1c3RlZE1vdiA8IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudCkuYWRqdXN0ZWRNb3YgOiAtMVxuXG4gICAgc2hlZXREYXRhLmNoYXNlcnNNYXhNb3YgPSBzaGVldERhdGEuY2hhc2Vycy5sZW5ndGggPyBzaGVldERhdGEuY2hhc2Vycy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHByZXYuYWRqdXN0ZWRNb3YgPiBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnQpLmFkanVzdGVkTW92IDogLTFcblxuICAgIHNoZWV0RGF0YS5jaGFzZXJzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5hZGp1c3RlZE1vdiA8IHNoZWV0RGF0YS5wcmV5c01pbk1vdikge1xuICAgICAgICBwLnRvb1Nsb3coKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcC5pbmNsdWRlSW5DaGFzZSgpXG4gICAgICB9XG4gICAgICBwLmZhc3Rlc3QgPSBwLmFkanVzdGVkTW92ID09PSBzaGVldERhdGEuY2hhc2Vyc01heE1vdlxuICAgICAgcC5zbG93ZXN0ID0gcC5hZGp1c3RlZE1vdiA9PT0gc2hlZXREYXRhLmNoYXNlcnNNaW5Nb3ZcbiAgICB9KVxuXG4gICAgc2hlZXREYXRhLnByZXlzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5hZGp1c3RlZE1vdiA+IHNoZWV0RGF0YS5jaGFzZXJzTWF4TW92KSB7XG4gICAgICAgIHAuZXNjYXBlZCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwLmluY2x1ZGVJbkNoYXNlKClcbiAgICAgIH1cbiAgICAgIHAuZmFzdGVzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5wcmV5c01heE1vdlxuICAgICAgcC5zbG93ZXN0ID0gcC5hZGp1c3RlZE1vdiA9PT0gc2hlZXREYXRhLnByZXlzTWluTW92XG4gICAgfSlcblxuICAgIHNoZWV0RGF0YS5sb2NhdGlvbnMgPSB0aGlzLml0ZW0ubG9jYXRpb25zXG4gICAgc2hlZXREYXRhLmFsbEhhdmVWYWxpZE1vdiA9IHRoaXMuYWxsSGF2ZVZhbGlkTW92XG4gICAgc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uID0gdGhpcy5pdGVtLmFjdGl2ZUxvY2F0aW9uXG4gICAgaWYgKHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbikge1xuICAgICAgc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uLnRpdGxlID0gc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uLmNvb3JkaW5hdGVzXG4gICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Mb2NhdGlvbkNvb3JkaW5hdGUnLCB7XG4gICAgICAgICAgeDogc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uLmNvb3JkaW5hdGVzLngsXG4gICAgICAgICAgeTogc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uLmNvb3JkaW5hdGVzLnlcbiAgICAgICAgfSlcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRHJhZ09uQ2FudmFzJylcbiAgICB9XG4gICAgc2hlZXREYXRhLnByZXZpb3VzTG9jYXRpb24gPSB0aGlzLml0ZW0ucHJldmlvdXNMb2NhdGlvblxuICAgIHNoZWV0RGF0YS5uZXh0TG9jYXRpb24gPSB0aGlzLml0ZW0ubmV4dExvY2F0aW9uXG4gICAgc2hlZXREYXRhLnN0YXJ0ZWQgPSB0aGlzLml0ZW0uc3RhcnRlZFxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIC8vIGdldCBhY3RpdmVQYXJ0aWNpcGFudCAoKSB7XG4gIC8vICAgaWYgKCF0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cykgcmV0dXJuIHVuZGVmaW5lZFxuICAvLyAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IHAuYWN0aXZlKVxuICAvLyAgIGlmICghcGFydGljaXBhbnQpIHJldHVybiB1bmRlZmluZWRcbiAgLy8gICByZXR1cm4gbmV3IF9wYXJ0aWNpcGFudChwYXJ0aWNpcGFudClcbiAgLy8gfVxuXG4gIC8vIGdldCBhY3RpdmVQYXJ0aWNpcGFudExvY2F0aW9uICgpIHtcbiAgLy8gICBpZiAoIXRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKSByZXR1cm4gdW5kZWZpbmVkXG4gIC8vICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gcC5hY3RpdmUpXG4gIC8vIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIC8vIGh0bWwuZmluZCgnLmNoYXNlLXRyYWNrJykucmVhZHkoYXN5bmMgaHRtbCA9PiBhd2FpdCB0aGlzLl9vblNoZWV0UmVhZHkoaHRtbCkpXG5cbiAgICAvLyBIYW5kbGUgRHJvcHJvd25cbiAgICBodG1sXG4gICAgICAuZmluZCgnLmRyb3Bkb3duLWVsZW1lbnQnKVxuICAgICAgLm9uKCdjbGljaycsIGV2ZW50ID0+IHRoaXMuX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcuZHJvcGJ0bicpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBjb25zdCBkcm9wZG93biA9IHRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24nKVxuICAgICAgY29uc3QgZHJvcGRvd25Db250ZW50ID0gZHJvcGRvd24ucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKVxuICAgICAgZHJvcGRvd25Db250ZW50LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKVxuICAgIH0pXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5kcm9wZG93bicpXG4gICAgICAubW91c2VsZWF2ZShldmVudCA9PlxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JylcbiAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpXG4gICAgICApXG5cbiAgICBodG1sLm9uKCdkYmxjbGljaycsICcub3Blbi1hY3RvcicsIENvQzdDaGF0Ll9vbk9wZW5BY3Rvci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5waW4tbG9jYXRpb24nKVxuICAgICAgLmNvbnRleHRtZW51KHRoaXMuY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ2VudGVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdvdmVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdsZWF2ZScsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcm9wJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmVQYXJ0aWNpcGFudChldmVudCkpXG5cbiAgICBodG1sLmZpbmQoJy5wLXNpZGUnKS5jbGljayh0aGlzLl9vbkNoYW5nZVNpZGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWxldGUtcGFydGljaXBhbnQnKS5jbGljayh0aGlzLl9vbkRlbGV0ZVBhcnRpY2lwYW50LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcucmVzZXQtcm9sbCcpLmNsaWNrKHRoaXMuX29uUmVzZXRSb2xsLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLWRyaXZlcicpLmNsaWNrKHRoaXMuX29uRGVsZXRlRHJpdmVyLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdlbnRlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ292ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdsZWF2ZScsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJvcCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLXNpZ24nKS5jbGljayh0aGlzLl9vbkFkZFBhcnRpY2lwYW50LmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5yb2xsLXBhcnRpY2lwYW50JykuY2xpY2sodGhpcy5fb25Sb2xsUGFydGljaXBhbnQuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLmJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQnV0dG9uQ2xpY2suYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLm5hbWUtY29udGFpbmVyJykuY2xpY2sodGhpcy5fb25Mb2NhdGlvbkNsaWNrLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5vYnN0YWNsZS10eXBlJykuY2xpY2sodGhpcy5fb25PYnN0YWNsZVR5cGVDbGljay5iaW5kKHRoaXMpKVxuICAgIC8vIGh0bWwuZmluZCgnLm9ic3RhY2xlLXRvZ2dsZScpLmNsaWNrKHRoaXMuX29uT2JzdGFjbGVUb2dnbGVDbGljay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZScpLmNsaWNrKHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudC1jb250cm9sJylcbiAgICAgIC5jbGljayh0aGlzLl9vblBhcnRpY2lwYW50Q29udHJvbENsaWNrZWQuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLmNoYXNlLWNvbnRyb2wnKS5jbGljayh0aGlzLl9vbkNoYXNlQ29udHJvbENsaWNrZWQuYmluZCh0aGlzKSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubG9jYXRpb24tY29udHJvbCcpXG4gICAgICAuY2xpY2sodGhpcy5fb25Mb2NhdGlvbkNvbnRyb2xDbGljay5iaW5kKHRoaXMpKVxuICAgIC8vIGh0bWxcbiAgICAvLyAgIC5maW5kKCcubW92ZW1lbnQtYWN0aW9uIC5kZWNyZWFzZScpXG4gICAgLy8gICAuY2xpY2sodGhpcy5fb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMuYmluZCh0aGlzLCAtMSkpXG4gICAgLy8gaHRtbFxuICAgIC8vICAgLmZpbmQoJy5tb3ZlbWVudC1hY3Rpb24gLmluY3JlYXNlJylcbiAgICAvLyAgIC5jbGljayh0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucy5iaW5kKHRoaXMsIDEpKVxuXG4gICAgLy8gaHRtbFxuICAgIC8vIC5maW5kKCcucGluLWxvY2F0aW9uJylcbiAgICAvLyAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uUGluTG9jYXRpb25EcmFnU3RhcnQoZXZlbnQpKVxuXG4gICAgY29uc3QgcGluTG9jYXRpb25TZWxlY3RvckRyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyYWdTZWxlY3RvcjogJy5waW4tbG9jYXRpb24nLFxuICAgICAgcGVybWlzc2lvbnM6IHtcbiAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9jYW5QaW5Mb2NhdGlvbkRyYWdTdGFydC5iaW5kKHRoaXMpXG4gICAgICB9LFxuICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgIGRyYWdzdGFydDogdGhpcy5fb25QaW5Mb2NhdGlvbkRyYWdTdGFydC5iaW5kKHRoaXMpXG4gICAgICB9XG4gICAgfSlcbiAgICBwaW5Mb2NhdGlvblNlbGVjdG9yRHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgY29uc3QgcGFydGljaXBhbnREcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcm9wU2VsZWN0b3I6ICcucGFydGljaXBhbnQnLFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uRHJvcFBhcnRpY2lwYW50LmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgcGFydGljaXBhbnREcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBjb25zdCBuZXdQYXJ0aWNpcGFudERyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5uZXctcGFydGljaXBhbnQnLFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uQWRkUGFydGljaXBhbnQuYmluZCh0aGlzKSB9XG4gICAgfSlcbiAgICBuZXdQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGlmICh0aGlzLml0ZW0uc3RhcnRlZCkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXNlLWxvY2F0aW9uIC5jaGFzZS1wYXJ0aWNpcGFudCcpXG4gICAgICAgIC5jbGljayh0aGlzLl9vbkNoYXNlUGFydGljaXBhbnRDbGljay5iaW5kKHRoaXMpKVxuXG4gICAgICBjb25zdCBjaGFzZVBhcnRpY2lwYW50RHJhZ3BEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgICAgZHJhZ1NlbGVjdG9yOiAnLmNoYXNlLXBhcnRpY2lwYW50JyxcbiAgICAgICAgZHJvcFNlbGVjdG9yOiAnLmNoYXNlLWxvY2F0aW9uJyxcbiAgICAgICAgcGVybWlzc2lvbnM6IHtcbiAgICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX2NhbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQuYmluZCh0aGlzKSxcbiAgICAgICAgICBkcm9wOiB0aGlzLl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZCh0aGlzKVxuICAgICAgICB9LFxuICAgICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydC5iaW5kKHRoaXMpLFxuICAgICAgICAgIGRyb3A6IHRoaXMuX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQodGhpcyksXG4gICAgICAgICAgZHJhZ292ZXI6IHRoaXMuX29uRHJhZ0VudGVyLmJpbmQodGhpcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGNoYXNlUGFydGljaXBhbnREcmFncERyb3AuYmluZChodG1sWzBdKVxuXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhc2UtbG9jYXRpb24nKVxuICAgICAgICAub24oJ2RyYWdsZWF2ZScsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlKGV2ZW50KSlcbiAgICB9XG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgRm9ybSBTdWJtaXNzaW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgX2dldFN1Ym1pdERhdGEgKHVwZGF0ZURhdGEgPSB7fSkge1xuICAgIC8vIENyZWF0ZSB0aGUgZXhwYW5kZWQgdXBkYXRlIGRhdGEgb2JqZWN0XG4gICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZCh0aGlzLmZvcm0sIHsgZWRpdG9yczogdGhpcy5lZGl0b3JzIH0pXG4gICAgbGV0IGRhdGEgPSBmZC5vYmplY3RcbiAgICBpZiAodXBkYXRlRGF0YSkge1xuICAgICAgZGF0YSA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YSA9IGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGRhdGEpXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgdGhhdCBzdGFydGluZyBwb3NpdGlvbiBpcyBub3Qgb3V0c2lkZSBvZiBjaGFzZSByYW5nZS5cbiAgICBpZiAoXG4gICAgICB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucz8ubGlzdD8ubGVuZ3RoICYmXG4gICAgICBkYXRhLnN5c3RlbS5zdGFydGluZ0luZGV4ID4gdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGhcbiAgICApIHtcbiAgICAgIGRhdGEuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgIH1cblxuICAgIGlmIChkYXRhLnN5c3RlbS5wYXJ0aWNpcGFudHMpIHtcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgLy8gSGFuZGxlIHBhcnRpY2lwYW50cyBhcnJheVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5zeXN0ZW0ucGFydGljaXBhbnRzKSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IGspXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ1BhcnRpY2lwYW50IHRhYmxlIGNvcnJ1cHRlZCcpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gcGFydGljaXBhbnRzW2luZGV4XVxuICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbih2KVxuICAgICAgICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qob3JpZ2luYWwsIGNsZWFuZWQpXG4gICAgICAgICAgcGFydGljaXBhbnRzW2luZGV4XSA9IG9yaWdpbmFsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZGF0YS5zeXN0ZW0ucGFydGljaXBhbnRzID0gcGFydGljaXBhbnRzXG4gICAgfVxuXG4gICAgaWYgKGRhdGEubG9jYXRpb25zKSB7XG4gICAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgLy8gSGFuZGxlIGxvY2F0aW9ucyBsaXN0XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmxvY2F0aW9ucykpIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLnV1aWQgPT09IGtleSlcbiAgICAgICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignTG9jYXRpb25zIHRhYmxlIGNvcnJ1cHRlZCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxMb2NhdGlvbiA9IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XVxuICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbih2YWx1ZSlcbiAgICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9yaWdpbmFsTG9jYXRpb24sIGNsZWFuZWQpXG4gICAgICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdID0gb3JpZ2luYWxMb2NhdGlvblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBkYXRhLmxvY2F0aW9uc1xuICAgICAgZGF0YS5zeXN0ZW0ubG9jYXRpb25zID0geyBsaXN0OiBsb2NhdGlvbnMgfVxuICAgIH1cbiAgICAvLyBjb25zdCBwYXJ0aWNpcGFudHMgPSBkYXRhLnN5c3RlbT8ucGFydGljaXBhbnRzO1xuICAgIC8vIGlmKCBwYXJ0aWNpcGFudHMpIGRhdGEuc3lzdGVtLnBhcnRpY2lwYW50cyA9IE9iamVjdC52YWx1ZXMoIHBhcnRpY2lwYW50cykubWFwKCBwID0+IGNsZWFuKHApKTtcblxuICAgIC8vIFJldHVybiB0aGUgZmxhdHRlbmVkIHN1Ym1pc3Npb24gZGF0YVxuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLmZsYXR0ZW5PYmplY3QoZGF0YSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgLy8gYXN5bmMgX29uU3VibWl0KC4uLmFyZ3MpIHtcbiAgLy8gIGF3YWl0IHN1cGVyLl9vblN1Ym1pdCguLi5hcmdzKTtcbiAgLy8gfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBvdmVycmlkZSA9IHRhcmdldD8uZGF0YXNldD8ub3ZlcnJpZGUgPT09ICd0cnVlJ1xuICAgIGlmICh0YXJnZXQ/Lm5hbWU/LmluY2x1ZGVzKCcuaHAnKSkge1xuICAgICAgY29uc3QgWywgLCB1dWlkXSA9IHRhcmdldC5uYW1lLnNwbGl0KCcuJylcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5pdGVtLmdldFBhcnRpY2lwYW50KHV1aWQpXG4gICAgICBpZiAocGFydGljaXBhbnQgJiYgcGFydGljaXBhbnQuYWN0b3IpIHtcbiAgICAgICAgaWYgKCFpc05hTihOdW1iZXIodGFyZ2V0LnZhbHVlKSkpIHtcbiAgICAgICAgICBhd2FpdCBwYXJ0aWNpcGFudC5hY3Rvci5zZXRIcChOdW1iZXIodGFyZ2V0LnZhbHVlKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3ZlcnJpZGUpIHtcbiAgICAgIGNvbnN0IFssIHR5cGUsIHV1aWQsIHN1YlR5cGUsIGRhdGFdID0gdGFyZ2V0Lm5hbWUuc3BsaXQoJy4nKVxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgICBpZiAoXG4gICAgICAgIHR5cGUgPT09ICdwYXJ0aWNpcGFudHMnICYmXG4gICAgICAgICFpc05hTihpbmRleCkgJiZcbiAgICAgICAgc3ViVHlwZSA9PT0gJ3NwZWVkLWNoZWNrJ1xuICAgICAgKSB7XG4gICAgICAgIGlmIChkYXRhID09PSAnbmFtZScpIHtcbiAgICAgICAgICAvLyBDaGFuZ2luZyBuYW1lIHdpbGwgcmVtb3ZlIGFsbCBvdGhlciByZWYgIVxuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAgICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgICAgICAgOiBbXVxuICAgICAgICAgIGlmIChwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2spIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2suaWRcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sudHlwZVxuICAgICAgICAgIH0gZWxzZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sgPSB7fVxuICAgICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5uYW1lID0gdGFyZ2V0LnZhbHVlXG4gICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2V0U2Nyb2xsIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICBpZiAoIWRhdGEuZWRpdGFibGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBpbml0aWFsT3BlbmluZyA9IGh0bWxbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCd3aW5kb3ctYXBwJylcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxuICAgIGlmICghY2hhc2VUcmFjaykgcmV0dXJuXG5cbiAgICBsZXQgc3RhcnQgPSBkYXRhLmRhdGEuc2Nyb2xsPy5jaGFzZVRyYWNrLmZyb21cbiAgICBsZXQgZW5kID0gZGF0YS5kYXRhLnNjcm9sbD8uY2hhc2VUcmFjay50b1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzdGFydCA9IDBcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlbmQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBlbmQgPSAtMVxuICAgIH1cblxuICAgIGlmIChpbml0aWFsT3BlbmluZykge1xuICAgICAgY29uc3QgcmVtU3RyaW5nID0gJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScpXG4gICAgICBjb25zdCByZW1TaXplID0gTnVtYmVyKHJlbVN0cmluZy5yZXBsYWNlKCdweCcsICcnKSlcbiAgICAgIGlmIChhcHAuaXRlbS5zdGFydGVkKSB7XG4gICAgICAgIGNvbnN0IHBDb3VudCA9IGFwcC5pdGVtLmFjdHVhbFBhcnRpY2lwYW50cz8ubGVuZ3RoXG4gICAgICAgIGNvbnN0IHdpZHRoID0gKHBDb3VudCAqIDExLjIgKyAzKSAqIHJlbVNpemVcbiAgICAgICAgYXBwLmFjdGl2YXRlVGFiKCdzZXR1cCcpXG4gICAgICAgIC8vIGFwcC5fdGFic1swXS5hY3RpdmUgPSAnc2V0dXAnXG4gICAgICAgIGFwcC5wb3NpdGlvbi53aWR0aCA9IE1hdGgubWF4KHdpZHRoLCA0MCAqIHJlbVNpemUpXG4gICAgICAgIC8vIGh0bWwuY3NzKCd3aWR0aCcsIGAke3dpZHRofXB4YClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwcC5wb3NpdGlvbi53aWR0aCA9IDQ1ICogcmVtU2l6ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIGF3YWl0IGFwcC5pdGVtLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybih7IGh0bWwgfSkgLy8gaHRtbCBpcyBub3QgcmVuZGVyZWQsIGVsZW1lbnQgaGF2ZSBzaXplID0gMFxuICAgICAgLy8gaWYgKGVuZCA+IDApIHtcbiAgICAgIC8vICAgc3RhcnQgPSAwXG4gICAgICAvLyB9IGVsc2UgaWYgKHN0YXJ0ID4gMCkge1xuICAgICAgLy8gICBlbmQgPSBzdGFydFxuICAgICAgLy8gICBzdGFydCA9IDBcbiAgICAgIC8vIH1cbiAgICB9XG5cbiAgICBpZiAoc3RhcnQgJiYgc3RhcnQgIT09IC0xKSB7XG4gICAgICBjaGFzZVRyYWNrLnNjcm9sbFRvKHtcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiBzdGFydCxcbiAgICAgICAgYmVoYXZpb3I6ICdpbnN0YW50J1xuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZW5kICE9PSAtMSkge1xuICAgICAgY2hhc2VUcmFjay5zY3JvbGxUbyh7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogZW5kLFxuICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gYXdhaXQgYXBwLml0ZW0udXBkYXRlKHsgJ2RhdGEudHJhY2tTY3JvbGxQb3NpdGlvbic6IGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgfSlcbiAgfVxuXG4gIHN0YXRpYyBvbkNsb3NlIChhcHAsIGh0bWwpIHtcbiAgICBhcHAuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiAtMSB9KVxuICB9XG5cbiAgLy8gYXN5bmMgX29uU2hlZXRSZWFkeSAoaHRtbCkge1xuICAvLyAgIGNvbnN0IHRyYWNrID0gaHRtbC5maW5kKCcuY2hhc2UtdHJhY2snKVxuICAvLyAgIGNvbnN0IGVsZW1lbnQgPSAkKHRyYWNrKS5maW5kKCcuYWN0aXZlJylcblxuICAvLyAgIGNvbnN0IGVsZW1lbnRsZWZ0ID0gZWxlbWVudFswXS5vZmZzZXRMZWZ0XG4gIC8vICAgY29uc3QgZGl2V2lkdGggPSB0cmFja1swXS5jbGllbnRXaWR0aFxuICAvLyAgIGxldCBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0ID0gZWxlbWVudGxlZnQgLSBkaXZXaWR0aCAvIDJcbiAgLy8gICBpZiAoZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA8IDApIGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgPSAwXG5cbiAgLy8gICBjb25zdCBzY3JvbGxQb3NpdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW0udHJhY2tTY3JvbGxQb3NpdGlvblxuICAvLyAgIGlmICghdHJhY2subGVuZ3RoKSByZXR1cm5cbiAgLy8gICBpZiAoIXNjcm9sbFBvc2l0aW9uKSByZXR1cm5cbiAgLy8gICBjb25zdCB0cmFja0VsZW1lbnQgPSB0cmFja1swXVxuICAvLyAgIHRyYWNrRWxlbWVudC5zY3JvbGxUbyh7XG4gIC8vICAgICB0b3A6IDAsXG4gIC8vICAgICBsZWZ0OiBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0LFxuICAvLyAgICAgYmVoYXZpb3I6ICdpbnN0YW50J1xuICAvLyAgIH0pXG5cbiAgLy8gICAvL1RPRE8gOiBjb3VsZGQgdXNlIHBhcmVudC5vZmZzZXRUb3AgZXQgY2hpbGQub2Zmc2V0VG9wIHRvIGNlbnRlciB0aGUgYWN0aXZlIGVsZW1lbnRcblxuICAvLyAgIC8vIGNvbnN0IGFjdGl2ZSA9IGh0bWwuZmluZCgnLm5hbWUtY29udGFpbmVyLmFjdGl2ZScpXG4gIC8vICAgLy8gaWYoIGFjdGl2ZSl7XG4gIC8vICAgLy8gICBjb25zdCBlbGVtZW50ID0gYWN0aXZlWzBdXG4gIC8vICAgLy8gICBlbGVtZW50LnNjcm9sbEludG9WaWV3KHtiZWhhdmlvcjogXCJzbW9vdGhcIiwgYmxvY2s6IFwiZW5kXCIsIGlubGluZTogXCJjZW50ZXJcIn0pXG4gIC8vICAgLy8gZWxlbWVudC5zY3JvbGxJbnRvVmlldyhmYWxzZSlcbiAgLy8gICAvLyB9XG4gIC8vICAgLy8gfSlcbiAgLy8gfVxuXG4gIGZpbmRQYXJ0aWNpcGFudEluZGV4ICh1dWlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzLmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGZpbmRMb2NhdGlvbkluZGV4ICh1dWlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgZmluZExvY2F0aW9uICh1dWlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QuZmluZChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGZpbmRJbmRleCAobGlzdCwgdXVpZCkge1xuICAgIHJldHVybiBsaXN0LmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKT8uY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXG4gICAgY29uc3QgYXNzaXN0YW50VXVpZCA9IHRhcmdldC5jbG9zZXN0KCcuaW5pdGlhdGl2ZS1ibG9jaycpPy5kYXRhc2V0Py51dWlkXG4gICAgY29uc3QgYmVuZWZpY2lhcnlVdWlkID0gdGFyZ2V0LmRhdGFzZXQuYmVuZWZpY2lhcnlVdWlkXG4gICAgYXdhaXQgdGhpcy5pdGVtLmFzc2lzdFBhcnRpY2lwYW50KGFzc2lzdGFudFV1aWQsIGJlbmVmaWNpYXJ5VXVpZClcbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgLy8gY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5sb2NhdGlvbi5vYnN0YWNsZScpXG4gICAgLy8gY29uc3QgdXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICAvLyBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIC8vIGNvbnN0IGxvY2F0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleChsb2NhdGlvbnMsIHV1aWQpXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgndG9nZ2xlJylcbiAgICBjb25zdCBkYXRhID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3Qoe1xuICAgICAgW3RvZ2dsZV06ICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzd2l0Y2hlZC1vbicpXG4gICAgfSlcbiAgICBpZiAoZGF0YS5sb2NhdGlvbnMpIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmxvY2F0aW9ucykpIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLnV1aWQgPT09IGtleSlcbiAgICAgICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignTG9jYXRpb25zIHRhYmxlIGNvcnJ1cHRlZCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxMb2NhdGlvbiA9IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XVxuICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbih2YWx1ZSlcbiAgICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KG9yaWdpbmFsTG9jYXRpb24sIGNsZWFuZWQpXG4gICAgICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdID0gb3JpZ2luYWxMb2NhdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gICAgfVxuICB9XG5cbiAgLy8gYXN5bmMgX29uT2JzdGFjbGVUb2dnbGVDbGljayAoZXZlbnQpIHtcbiAgLy8gICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gIC8vICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5vYnN0YWNsZScpXG4gIC8vICAgY29uc3QgdXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgLy8gICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAvLyAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleChsb2NhdGlvbnMsIHV1aWQpXG4gIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlID0gIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZVxuICAvLyAgIGlmICghbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscykge1xuICAvLyAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscyA9IHtcbiAgLy8gICAgICAgYmFycmllcjogdHJ1ZVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gIC8vIH1cblxuICBhc3luYyBfb25PYnN0YWNsZVR5cGVDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5vYnN0YWNsZScpXG4gICAgY29uc3QgdXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleChsb2NhdGlvbnMsIHV1aWQpXG4gICAgaWYgKCFsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzKSB7XG4gICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzID0ge31cbiAgICB9XG4gICAgY29uc3Qgb2JzdGFjbGUgPSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzXG4gICAgY29uc3QgdHlwZSA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JhcnJpZXInKSA/ICdiYXJyaWVyJyA6ICdoYXphcmQnXG4gICAgY29uc3QgYWN0aXZlID0gb2JzdGFjbGVbdHlwZV1cbiAgICBvYnN0YWNsZS5iYXJyaWVyID0gZmFsc2VcbiAgICBvYnN0YWNsZS5oYXphcmQgPSBmYWxzZVxuICAgIG9ic3RhY2xlW3R5cGVdID0gIWFjdGl2ZVxuICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZSA9ICFhY3RpdmVcbiAgICAvLyBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmFycmllcicpKSB7XG4gICAgLy8gICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXIgPSAhbG9jYXRpb25zW1xuICAgIC8vICAgICBsb2NhdGlvbkluZGV4XG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyXG4gICAgLy8gICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZCA9ICFsb2NhdGlvbnNbXG4gICAgLy8gICAgIGxvY2F0aW9uSW5kZXhcbiAgICAvLyAgIF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXJcbiAgICAvLyB9IGVsc2UgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hhemFyZCcpKSB7XG4gICAgLy8gICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZCA9ICFsb2NhdGlvbnNbXG4gICAgLy8gICAgIGxvY2F0aW9uSW5kZXhcbiAgICAvLyAgIF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZFxuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyID0gIWxvY2F0aW9uc1tcbiAgICAvLyAgICAgbG9jYXRpb25JbmRleFxuICAgIC8vICAgXS5vYnN0YWNsZURldGFpbHMuaGF6YXJkXG4gICAgLy8gfVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2F0aW9uQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcuY2hhc2UtbG9jYXRpb24nKVxuICAgIGNvbnN0IGxVdWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS5hY3RpdmF0ZUxvY2F0aW9uKGxVdWlkKVxuICB9XG5cbiAgYXN5bmMgX29uTG9jYXRpb25Db250cm9sQ2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5hY3RpdmUnKSkgcmV0dXJuXG4gICAgY29uc3QgYWN0aW9uID0gdGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5jaGFzZS1sb2NhdGlvbicpXG4gICAgY29uc3QgbFV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3JlbW92ZSc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5yZW1vdmVMb2NhdGlvbihsVXVpZClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2FkZC1hZnRlcic6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5pbnNlcnRMb2NhdGlvbihsVXVpZCwgeyBzaGlmdDogMSB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdhZGQtYmVmb3JlJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLmluc2VydExvY2F0aW9uKGxVdWlkLCB7IHNoaWZ0OiAwIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2FkZC1wYXJ0aWNpcGFudCc6XG4gICAgICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKHtcbiAgICAgICAgICBjaGFzZVV1aWQ6IHRoaXMuaXRlbS51dWlkLFxuICAgICAgICAgIGxvY2F0aW9uVXVpZDogbFV1aWQsXG4gICAgICAgICAgZHJvcERhdGE6IHt9XG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgTG9jYXRpb24gJHtsVXVpZH0gQ2xpY2tlZC4gQWN0aW9uOiAke2FjdGlvbn1gKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhc2VQYXJ0aWNpcGFudENsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHBVdWlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Py51dWlkXG4gICAgYXdhaXQgdGhpcy5pdGVtLmFjdGl2YXRlUGFydGljaXBhbnQocFV1aWQpXG4gIH1cblxuICBhc3luYyBfb25QYXJ0aWNpcGFudENvbnRyb2xDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luYWN0aXZlJykpIHJldHVyblxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkcm9wZG93bicpKSByZXR1cm5cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgcGFydGljaXBhbnRVdWlkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbml0aWF0aXZlLWJsb2NrJyk/LmRhdGFzZXQ/LnV1aWRcbiAgICBpZiAoIXBhcnRpY2lwYW50VXVpZCkgcmV0dXJuXG4gICAgc3dpdGNoICh0YXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2RyYXdHdW4nOlxuICAgICAgICBhd2FpdCB0aGlzLnRvZ2dsZVBhcnRpY2lwYW50R3VuKHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2RlY3JlYXNlQWN0aW9ucyc6XG4gICAgICAgIGF3YWl0IHRoaXMuX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zKC0xLCBldmVudClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2luY3JlYXNlQWN0aW9ucyc6XG4gICAgICAgIGF3YWl0IHRoaXMuX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zKDEsIGV2ZW50KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbW92ZUJhY2t3YXJkJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLm1vdmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQsIC0xLCB7IHJlbmRlcjogdHJ1ZSB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbW92ZUZvcndhcmQnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0ubW92ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZCwgMSwgeyByZW5kZXI6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2FjdGl2YXRlUGFydGljaXBhbnQnOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pdGVtLmFjdGl2YXRlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgICAgY2FzZSAnYm9udXNEaWNlJzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IGRpY2VOdW1iZXIgPSB0YXJnZXQuZGF0YXNldC5jb3VudFxuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVCb251c0RpY2UocGFydGljaXBhbnRVdWlkLCBkaWNlTnVtYmVyKVxuICAgICAgICAgIHRoaXMuaXRlbS5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjYXV0aW91c0FwcHJvYWNoJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLmNhdXRpb3VzQXBwcm9hY2gocGFydGljaXBhbnRVdWlkKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZWRpdFBhcnRpY2lwYW50JzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5pdGVtLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMuaXRlbS5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLmNoYXNlVXVpZCA9IHRoaXMuaXRlbS51dWlkXG4gICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5sb2NhdGlvblV1aWQgPSBsb2NhdGlvbi51dWlkXG4gICAgICAgICAgcGFydGljaXBhbnQuZGF0YS51cGRhdGUgPSB0cnVlXG4gICAgICAgICAgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlci5jcmVhdGUocGFydGljaXBhbnQuZGF0YSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncmVtb3ZlUGFydGljaXBhbnQnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0ucmVtb3ZlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgICB0aGlzLml0ZW0uYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKClcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlQ29udHJvbENsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgbG9jYXRpb25VdWlkID0gdGFyZ2V0LmNsb3Nlc3QoJy5vYnN0YWNsZScpPy5kYXRhc2V0Py51dWlkXG4gICAgaWYgKCFsb2NhdGlvblV1aWQpIHJldHVyblxuICAgIHN3aXRjaCAodGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdvYnN0YWNsZS1za2lsbC1jaGVjayc6XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW0uYWN0aXZlUGFydGljaXBhbnRPYnN0YWNsZUNoZWNrKGxvY2F0aW9uVXVpZClcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMgKGNvdW50LCBldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudFV1aWQgPSB0YXJnZXQuY2xvc2VzdCgnLmluaXRpYXRpdmUtYmxvY2snKT8uZGF0YXNldD8udXVpZFxuICAgIGlmICghcGFydGljaXBhbnRVdWlkKSByZXR1cm5cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0ucGFydGljaXBhbnRzXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHMuZmluZChwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkKVxuICAgIGlmIChwYXJ0aWNpcGFudC5oYXNNYXhNdnRBY3Rpb25zICYmIGNvdW50ID4gMCkgcmV0dXJuXG4gICAgcGFydGljaXBhbnQuYWx0ZXJNb3ZlbWVudEFjdGlvbnMoY291bnQpXG5cbiAgICAvLyBjb25zdCBzaGVldCA9IHRhcmdldC5jbG9zZXN0KCcuY29jNy5pdGVtLmNoYXNlJylcbiAgICAvLyBjb25zdCBjaGFzZVRyYWNrID0gc2hlZXQucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJylcbiAgICAvLyBpZiAoY2hhc2VUcmFjaylcbiAgICAvLyAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoe1xuICAgIC8vICAgICAnZGF0YS50cmFja1Njcm9sbFBvc2l0aW9uJzogY2hhc2VUcmFjay5zY3JvbGxMZWZ0XG4gICAgLy8gICB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS5zZXRjaGFzZVRyYWNrU2Nyb2xsKHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKVxuICB9XG5cbiAgYXN5bmMgX29uQnV0dG9uQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IHRhcmdldC5kYXRhc2V0Py5hY3Rpb25cbiAgICBpZiAoIWFjdGlvbikgcmV0dXJuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2luaXQnOlxuICAgICAgICBpZiAoXG4gICAgICAgICAgIWlzTmFOKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLnRvdGFsKSAmJlxuICAgICAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLnRvdGFsID4gMFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBsb2NhdGlvbnMgPSBBcnJheS5hcHBseShcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBBcnJheSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy50b3RhbClcbiAgICAgICAgICApLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KSB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBsb2NhdGlvbnNbMF0ubmFtZSA9ICdTdGFydCdcbiAgICAgICAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA+IDEpIGxvY2F0aW9uc1tsb2NhdGlvbnMubGVuZ3RoIC0gMV0ubmFtZSA9ICdFbmQnXG4gICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Jlc2V0JzpcbiAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybVJlc2V0Q2hhc2UnKX1gLFxuICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtUmVzZXRDaGFzZUhpbnQnKX08L3A+YCxcbiAgICAgICAgICB5ZXM6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KFtdKVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnN0b3AoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnY3V0MmNoYXNlJzpcbiAgICAgICAgaWYgKHRoaXMuaXRlbS5hbGxIYXZlU3BlZWRSb2xsKSB7XG4gICAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtQ3V0MkNoYXNlJyl9YCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuQ29uZmlybUN1dDJDaGFzZUhpbnQnXG4gICAgICAgICAgICApfTwvcD5gLFxuICAgICAgICAgICAgeWVzOiAoKSA9PiB0aGlzLml0ZW0uY3V0VG9UaGVDaGFzZSgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdEFsbEhhdmVTcGVlZFJvbGwnKSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdyZXN0YXJ0JzpcbiAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybVJlc3RhcnRDaGFzZScpfWAsXG4gICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuQ29uZmlybVJlc3RhcnRDaGFzZUhpbnQnXG4gICAgICAgICAgKX08L3A+YCxcbiAgICAgICAgICB5ZXM6ICgpID0+IHRoaXMuaXRlbS5yZXN0YXJ0KClcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnbmV4dFJvdW5kJzpcbiAgICAgICAgaWYgKHRoaXMuaXRlbS5uZXh0QWN0aXZlUGFydGljaXBhbnQpIHtcbiAgICAgICAgICBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1OZXh0Q2hhc2VSb3VuZCcpfWAsXG4gICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LkNvbmZpcm1OZXh0Q2hhc2VSb3VuZEhpbnQnXG4gICAgICAgICAgICApfTwvcD5gLFxuICAgICAgICAgICAgeWVzOiAoKSA9PiB0aGlzLml0ZW0ucHJvZ3Jlc3NUb05leHRSb3VuZCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHRoaXMuaXRlbS5wcm9ncmVzc1RvTmV4dFJvdW5kKClcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBfY2FuUGluTG9jYXRpb25EcmFnU3RhcnQgKHNlbGVjdG9yKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgX29uUGluTG9jYXRpb25EcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBpID0gYS5xdWVyeVNlbGVjdG9yKCdpLmljb24nKVxuICAgIGNvbnN0IGRyYWdJY29uID0gYS5xdWVyeVNlbGVjdG9yKCcucGluLWltYWdlJylcblxuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZHJhZ0ljb24sIDAsIGRyYWdJY29uLmhlaWdodClcblxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IGEuY2xvc2VzdCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICBjb25zdCBkYXRhID0ge31cblxuICAgIGRhdGEudHlwZSA9ICdsb2NhdG9yJ1xuICAgIGRhdGEuQ29DN1R5cGUgPSAnY2hhc2UnXG4gICAgZGF0YS5pY29uID0gaS5kYXRhc2V0LmxpbmtJY29uXG4gICAgZGF0YS5sb2NhdGlvblV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgZGF0YS5kb2NVdWlkID0gdGhpcy5pdGVtLnV1aWRcbiAgICBkYXRhLmNhbGxCYWNrID0gJ2xvY2F0b3JEcm9wcGVkJ1xuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG5cbiAgICAvLyBjb25zdCBkcmFnRGF0YSA9IHsgdXVpZDogbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZCwgY2hhc2VVdWlkOiB0aGlzLml0ZW0udXVpZCB9XG4gICAgLy8gZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICB9XG5cbiAgX2NhbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQgKHNlbGVjdG9yKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgX2NhbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCAoc2VsZWN0b3IpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBfb25DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0IChkcmFnRXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGRyYWdEYXRhID0geyB1dWlkOiB0YXJnZXQuZGF0YXNldC51dWlkLCB0eXBlOiAncGFydGljaXBhbnQnIH1cbiAgICBkcmFnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gIH1cblxuICBhc3luYyBfb25DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBkcmFnRXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG5cbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0Ryb3BwZWQnKVxuICAgIHRoaXMuX29uRHJhZ0xlYXZlKGRyYWdFdmVudClcblxuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbG9jYXRpb25VdWlkID0gdGFyZ2V0LmRhdGFzZXQudXVpZFxuXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3BhcnRpY2lwYW50Jykge1xuICAgICAgY29uc3Qgb2xkTG9jYXRpb24gPSB0aGlzLmZpbmRMb2NhdGlvbihsb2NhdGlvblV1aWQpXG4gICAgICBpZiAob2xkTG9jYXRpb24pIHtcbiAgICAgICAgaWYgKG9sZExvY2F0aW9uLnBhcnRpY2lwYW50cz8uaW5jbHVkZXMoZGF0YS51dWlkKSkgcmV0dXJuXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLml0ZW0uc2V0Y2hhc2VUcmFja1Njcm9sbCh7IHJlbmRlcjogZmFsc2UgfSlcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS5tb3ZlUGFydGljaXBhbnRUb0xvY2F0aW9uKGRhdGEudXVpZCwgbG9jYXRpb25VdWlkKVxuICAgIH0gZWxzZSB7XG4gICAgICBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyLmNyZWF0ZSh7XG4gICAgICAgIGNoYXNlVXVpZDogdGhpcy5pdGVtLnV1aWQsXG4gICAgICAgIGxvY2F0aW9uVXVpZCxcbiAgICAgICAgZHJvcERhdGE6IGRhdGFcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgX29uRHJhZ092ZXIgKGRyYWdFdmVudCkge1xuICAgIHRoaXMuX29uRHJhZ0VudGVyKGRyYWdFdmVudClcbiAgfVxuXG4gIF9vbkRyYWdFbnRlciAoZHJhZ0V2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZHJhZ0V2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIF9vbkRyYWdMZWF2ZSAoZHJhZ0V2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZHJhZ0V2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0Py5yZW1vdmUoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHV1aWQgPSB0YXJnZXQuZGF0YXNldD8udXVpZFxuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICBhd2FpdCB0aGlzLmFsdGVyUGFydGljaXBhbnQoZGF0YSwgdXVpZClcbiAgfVxuXG4gIGFzeW5jIF9vbkFkZFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBkYXRhID0geyBjaGFzZVV1aWQ6IHRoaXMuaXRlbS51dWlkIH1cbiAgICBpZiAoZXZlbnQuZGF0YVRyYW5zZmVyKSB7XG4gICAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgICAgZGF0YS5kcm9wRGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICB9XG4gICAgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlci5jcmVhdGUoZGF0YSlcbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnRFbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50RWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudChwYXJ0aWNpcGFudHNbaW5kZXhdKVxuICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlNldCkge1xuICAgICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgcm9sbC5wYXJlbnQgPSB0aGlzLml0ZW0udXVpZFxuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsZWQgPSB0cnVlXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxVdWlkID0gcm9sbC51dWlkXG4gICAgICByb2xsLmFjdG9yID0gcGFydGljaXBhbnQuYWN0b3IuYWN0b3JLZXlcbiAgICAgIGlmICghZXZlbnQuc2hpZnRLZXkgJiYgcGFydGljaXBhbnQuYWN0b3IucGxheWVyKSB7XG4gICAgICAgIHJvbGwuc3RhbmRieSA9IHRydWVcbiAgICAgICAgcm9sbC5zdGFuZGJ5VGV4dCA9ICdDb0M3LkNoYXNlJ1xuICAgICAgICByb2xsLnN0YW5kYnlSaWdodEljb24gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9ydW5uaW5nLXNvbGlkLnN2ZydcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNDaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICBhd2FpdCByb2xsLnJvbGxDaGFyYWN0ZXJpc3RpYyhwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZi5rZXkpXG4gICAgICAgIGF3YWl0IHJvbGwudG9NZXNzYWdlKClcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzU2tpbGwpIHtcbiAgICAgICAgcm9sbC5za2lsbCA9IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmXG4gICAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICAgIGF3YWl0IHJvbGwudG9NZXNzYWdlKClcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQXR0cmlidXRlKSB7XG4gICAgICAgIGF3YWl0IHJvbGwucm9sbEF0dHJpYnV0ZShwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZi5rZXkpXG4gICAgICAgIGF3YWl0IHJvbGwudG9NZXNzYWdlKClcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSkge1xuICAgICAgY29uc3Qgcm9sbERhdGEgPSB7XG4gICAgICAgIHJhd1ZhbHVlOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlLFxuICAgICAgICBkaXNwbGF5TmFtZTogcGFydGljaXBhbnQuc3BlZWRDaGVjay5uYW1lLFxuICAgICAgICBhY3Rvck5hbWU6IHBhcnRpY2lwYW50Lm5hbWUgPyBwYXJ0aWNpcGFudC5uYW1lIDogdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBpZiAocGFydGljaXBhbnQuaGFzQWN0b3IpIHJvbGxEYXRhLmFjdG9yID0gcGFydGljaXBhbnQuYWN0b3IuYWN0b3JLZXlcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suY3JlYXRlKHJvbGxEYXRhKVxuICAgICAgcm9sbC5wYXJlbnQgPSB0aGlzLml0ZW0udXVpZFxuICAgICAgYXdhaXQgcm9sbC5yb2xsKClcbiAgICAgIGF3YWl0IHJvbGwudG9NZXNzYWdlKClcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsVXVpZCA9IHJvbGwudXVpZFxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIF9vbkRyYWdFbnRlclBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIF9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYW5nZVNpZGUgKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgdGVzdCA9IGF3YWl0IGZyb21VdWlkKCAnU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5uQ2RvQ3lvaXVkdGpyTmt1Jyk7XG4gICAgLy8gY29uc3QgaXRlbVRlc3QgPSBhd2FpdCBmcm9tVXVpZCggJ0l0ZW0ucGxJRW1OUlA2TzdQdmVOdi5yb2xsLnEyc0F6c0h0NEZzcXNkZkQnKTtcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRhcmdldC5jbG9zZXN0KCcucGFydGljaXBhbnQnKVxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLmNoYXNlciA9ICFwYXJ0aWNpcGFudHNbaW5kZXhdLmNoYXNlclxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRlbGV0ZURyaXZlciAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZHJpdmVyID0gdGFyZ2V0LmNsb3Nlc3QoJy5kcml2ZXInKVxuICAgIGNvbnN0IHV1aWQgPSBkcml2ZXIuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHNbaW5kZXhdXG4gICAgZGVsZXRlIHBhcnRpY2lwYW50LmRvY1V1aWRcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBfb25EZWxldGVQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgcGFydGljaXBhbnRzLnNwbGljZShpbmRleCwgMSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBfb25SZXNldFJvbGwgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBhbHRlclBhcnRpY2lwYW50IChkYXRhLCB1dWlkKSB7XG4gICAgbGV0IGRvY1V1aWQsIGFjdG9yXG4gICAgaWYgKGRhdGEudG9rZW5VdWlkKSBkb2NVdWlkID0gZGF0YS50b2tlblV1aWRcbiAgICBlbHNlIHtcbiAgICAgIGRvY1V1aWQgPVxuICAgICAgICBkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkXG4gICAgICAgICAgPyBgU2NlbmUuJHtkYXRhLnNjZW5lSWR9LlRva2VuLiR7ZGF0YS50b2tlbklkfWBcbiAgICAgICAgICA6IGRhdGEuYWN0b3JJZCB8fCBkYXRhLmFjdG9yS2V5IHx8IGRhdGEuaWRcbiAgICB9XG5cbiAgICBpZiAoZGF0YS50eXBlID09PSAnVG9rZW4nKSB7XG4gICAgICBkb2NVdWlkID0gZGF0YS51dWlkXG4gICAgfSBlbHNlIGlmIChkb2NVdWlkKSB7XG4gICAgICBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGRvY1V1aWQpXG4gICAgICBpZiAoIWFjdG9yICYmIGRhdGEudHlwZSA9PT0gJ0l0ZW0nKSBkb2NVdWlkID0gbnVsbFxuICAgIH1cblxuICAgIGlmIChhY3RvciAmJiBkb2NVdWlkICE9PSBhY3Rvci51dWlkKSB7XG4gICAgICBkb2NVdWlkID0gYWN0b3IudXVpZFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0ge31cbiAgICBpZiAoZG9jVXVpZCkgcGFydGljaXBhbnQuZG9jVXVpZCA9IGRvY1V1aWRcblxuICAgIHN3aXRjaCAoZGF0YS50eXBlPy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdhY3Rvcic6XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5kYXRhPy5faWQgfHwgZGF0YS5pZCxcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWMnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhdHRyaWJ1dGUnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2F0dHJpYnV0ZSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIC8vIFRPRE86Q2hlY2sgZm9yIHNwZWVkIGNoZWNrLCBpZiBub25lIGFkZCBzcGVlZGNoZWNrXG4gICAgLy8gc3BlZWRDaGVjayA9IHtcbiAgICAvLyAgIGlkOiAnc3RyJ1xuICAgIC8vICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xuICAgIC8vIH1cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBvbGRQYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50c1tpbmRleF1cbiAgICBpZiAob2xkUGFydGljaXBhbnQubW92KSBkZWxldGUgb2xkUGFydGljaXBhbnQubW92XG4gICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChvbGRQYXJ0aWNpcGFudCwgcGFydGljaXBhbnQpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzICgpIHtcbiAgICBhd2FpdCB0aGlzLml0ZW0uY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzKClcbiAgfVxuXG4gIGFzeW5jIGFkZFBhcnRpY2lwYW50IChkYXRhKSB7XG4gICAgLy8gbGV0IHByb3V0ID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoXG4gICAgLy8gICAnU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5ReUZUaWlFWmlYOXZUZmlDJ1xuICAgIC8vIClcbiAgICAvLyBwcm91dCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxuICAgIC8vICAgJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4udWJMemhlNTdKT1RITUlyOSdcbiAgICAvLyApXG4gICAgLy8gcHJvdXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSgnQWN0b3IudWlZM2NhcFNVZUxMdlNMaScpXG4gICAgLy8gcHJvdXQgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleSggJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4uUXlGVGlpRVppWDl2VGZpQy5JdGVtLkdyT0hlTFhmZUVwaHNSTVonKVxuICAgIC8vIHByb3V0ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoIFwiU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5ZcXNOUVBEaEZDUGxTUnFKXCIpXG4gICAgLy8gcHJvdXQgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleSggXCJTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLllxc05RUERoRkNQbFNScUouSXRlbS44SkVuVGpKT0dGWG1sNHdrXCIpXG5cbiAgICAvLyB0cnkgdG8gZmluZCBhIHZhbGlkIGRvY3VtZW50XG4gICAgbGV0IGRvY1V1aWQsIGFjdG9yXG4gICAgaWYgKGRhdGEudG9rZW5VdWlkKSBkb2NVdWlkID0gZGF0YS50b2tlblV1aWRcbiAgICBlbHNlIHtcbiAgICAgIGRvY1V1aWQgPVxuICAgICAgICBkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkXG4gICAgICAgICAgPyBgU2NlbmUuJHtkYXRhLnNjZW5lSWR9LlRva2VuLiR7ZGF0YS50b2tlbklkfWBcbiAgICAgICAgICA6IGRhdGEuYWN0b3JJZCB8fCBkYXRhLmFjdG9yS2V5IHx8IGRhdGEuaWRcbiAgICB9XG5cbiAgICBpZiAoZGF0YS50eXBlID09PSAnVG9rZW4nKSB7XG4gICAgICBkb2NVdWlkID0gZGF0YS51dWlkXG4gICAgfSBlbHNlIGlmIChkb2NVdWlkKSB7XG4gICAgICBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGRvY1V1aWQpXG4gICAgICBpZiAoIWFjdG9yICYmIGRhdGEudHlwZSA9PT0gJ0l0ZW0nKSBkb2NVdWlkID0gbnVsbFxuICAgIH1cblxuICAgIGlmIChhY3RvciAmJiBkb2NVdWlkICE9PSBhY3Rvci51dWlkKSB7XG4gICAgICBkb2NVdWlkID0gYWN0b3IudXVpZFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0ge31cbiAgICBpZiAoZG9jVXVpZCkgcGFydGljaXBhbnQuZG9jVXVpZCA9IGRvY1V1aWRcblxuICAgIHN3aXRjaCAoZGF0YS50eXBlPy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdhY3Rvcic6XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgaWYgKGRhdGEuaWQpIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoZGF0YS5pZClcbiAgICAgICAgICBpZiAoaXRlbT8uZGF0YT8udHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLmRhdGE/Ll9pZCB8fCBkYXRhLmlkLFxuICAgICAgICAgIHR5cGU6ICdpdGVtJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjaGFyYWN0ZXJpc3RpYyc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2F0dHJpYnV0ZSc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnYXR0cmlidXRlJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgLy8gVE9ETzpDaGVjayBmb3Igc3BlZWQgY2hlY2ssIGlmIG5vbmUgYWRkIHNwZWVkY2hlY2sgY29uIG5vbiB2ZWhpY2xlLCBkcml2ZSBhdXRvIGZvciB2ZWhpY2xlXG4gICAgLy8gc3BlZWRDaGVjayA9IHtcbiAgICAvLyAgIGlkOiAnY29uJ1xuICAgIC8vICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xuICAgIC8vIH1cblxuICAgIGlmICghcGFydGljaXBhbnQuc3BlZWRDaGVjaykge1xuICAgICAgaWYgKCF0aGlzLml0ZW0uc3lzdGVtLnZlaGljbGUpIHtcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogJ2NvbicsXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Db25zdGl0dXRpb24nKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5kcml2ZS1hdXRvJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cblxuICAgIGxldCB1bmlxdWUgPSBmYWxzZVxuICAgIHdoaWxlICghdW5pcXVlKSB7XG4gICAgICBwYXJ0aWNpcGFudC51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICAgIHVuaXF1ZSA9XG4gICAgICAgIHBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiBwLnV1aWQgPT09IHBhcnRpY2lwYW50LnV1aWQpLmxlbmd0aCA9PT0gMFxuICAgIH1cblxuICAgIHBhcnRpY2lwYW50cy5wdXNoKHBhcnRpY2lwYW50KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVBhcnRpY2lwYW50R3VuIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50cy5maW5kKHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWQpXG4gICAgaWYgKCFwYXJ0aWNpcGFudCkgcmV0dXJuXG4gICAgcGFydGljaXBhbnQuaGFzQUd1blJlYWR5ID0gIXBhcnRpY2lwYW50Lmhhc0FHdW5SZWFkeVxuICAgIGF3YWl0IHRoaXMuaXRlbS5zZXRjaGFzZVRyYWNrU2Nyb2xsKHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbiAob2JqKSB7XG4gIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gb2JqKSB7XG4gICAgY29uc3QgdHAgPSBmb3VuZHJ5LnV0aWxzLmdldFR5cGUob2JqW3Byb3BOYW1lXSlcbiAgICBpZiAodHAgPT09ICdPYmplY3QnKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gY2xlYW4ob2JqW3Byb3BOYW1lXSlcbiAgICB9XG5cbiAgICBpZiAodHAgPT09ICdPYmplY3QnICYmICFPYmplY3QuZW50cmllcyhvYmpbcHJvcE5hbWVdKS5sZW5ndGgpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBudWxsXG4gICAgfSBlbHNlIGlmICh0cCA9PT0gJ3N0cmluZycgJiYgIW9ialtwcm9wTmFtZV0ubGVuZ3RoKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gbnVsbFxuICAgIH0gZWxzZSBpZiAodHAgPT09ICdzdHJpbmcnICYmICFpc05hTihOdW1iZXIob2JqW3Byb3BOYW1lXSkpKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gTnVtYmVyKG9ialtwcm9wTmFtZV0pXG4gICAgfVxuICB9XG4gIHJldHVybiBvYmpcbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgQ29DN0FjdGl2ZUVmZmVjdCBmcm9tICcuLi8uLi9hY3RpdmUtZWZmZWN0LmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0VjIgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnaXRlbSddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2l0ZW0tc2hlZXRWMi5odG1sJyxcbiAgICAgIHdpZHRoOiA1MDAsXG4gICAgICBoZWlnaHQ6IDQ1MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YSAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YShvcHRpb25zKVxuXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPSBDb0M3QWN0aXZlRWZmZWN0LnByZXBhcmVBY3RpdmVFZmZlY3RDYXRlZ29yaWVzKHRoaXMuaXRlbS5lZmZlY3RzLCB7IHN0YXR1czogZmFsc2UgfSlcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuaXRlbSkpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5ICovXG5cbmltcG9ydCB7IENvQzdJdGVtU2hlZXRWMiB9IGZyb20gJy4vaXRlbS1zaGVldFYyLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0IGV4dGVuZHMgQ29DN0l0ZW1TaGVldFYyIHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDUwNlxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBKb3VybmFsU2hlZXQgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Sm91cm5hbFNoZWV0IGV4dGVuZHMgSm91cm5hbFNoZWV0IHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBNYWNyb0NvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdNYWNyb0NvbmZpZyBleHRlbmRzIE1hY3JvQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBQbGF5bGlzdENvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdQbGF5bGlzdENvbmZpZyBleHRlbmRzIFBsYXlsaXN0Q29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBSb2xsVGFibGVDb25maWcgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Um9sbFRhYmxlQ29uZmlnIGV4dGVuZHMgUm9sbFRhYmxlQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBTY2VuZUNvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTY2VuZUNvbmZpZyBleHRlbmRzIFNjZW5lQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IERyb3BDb0NJRCB9IGZyb20gJy4uLy4uL2FwcHMvZHJvcC1jb2MtaWQuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1NldHVwU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdpdGVtcycpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGVsZXRlKGV2ZW50LCAnaXRlbXMnKSlcbiAgICBodG1sLmZpbmQoJy5hZGQtYmlvJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRCaW8oKSlcbiAgICBodG1sLmZpbmQoJy5yZW1vdmUtc2VjdGlvbicpLmNsaWNrKHRoaXMuX29uUmVtb3ZlU2VjdGlvbi5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuYWRkLW1vbmV0YXJ5JykuY2xpY2sodGhpcy5fb25BZGRNb25ldGFyeS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1tb25ldGFyeScpLmNsaWNrKHRoaXMuX29uUmVtb3ZlTW9uZXRhcnkuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgcHJvcGVydHlJZCxcbiAgICAgIGlzQ3RybEtleShldmVudClcbiAgICApXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGxldCB1c2VDb0NJRCA9IDBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcbiAgICAgIGlmICghWydpdGVtJywgJ3dlYXBvbicsICdza2lsbCcsICdib29rJywgJ3NwZWxsJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh1c2VDb0NJRCA9PT0gMCkge1xuICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgfVxuICAgICAgY29sbGVjdGlvbi5wdXNoKERyb3BDb0NJRC5wcm9jZXNzSXRlbSh1c2VDb0NJRCwgaXRlbSkpXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlbW92ZVNlY3Rpb24gKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkaXYgPSBhLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBiaW8gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmJpb1NlY3Rpb25zKVxuICAgIGJpby5zcGxpY2UoTnVtYmVyKGRpdi5kYXRhc2V0LmluZGV4KSwgMSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5iaW9TZWN0aW9ucyc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQmlvICgpIHtcbiAgICBjb25zdCBiaW8gPSB0aGlzLml0ZW0uc3lzdGVtLmJpb1NlY3Rpb25zID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5iaW9TZWN0aW9ucykgOiBbXVxuICAgIGJpby5wdXNoKG51bGwpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvU2VjdGlvbnMnOiBiaW8gfSlcbiAgfVxuXG4gIF9vbkFkZE1vbmV0YXJ5ICgpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLml0ZW0uc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKSA6IFtdXG4gICAgdmFsdWVzLnB1c2goe1xuICAgICAgbmFtZTogJycsXG4gICAgICBtaW46IG51bGwsXG4gICAgICBtYXg6IG51bGwsXG4gICAgICBjYXNoVHlwZTogMCxcbiAgICAgIGNhc2hWYWx1ZTogJycsXG4gICAgICBhc3NldHNUeXBlOiAwLFxuICAgICAgYXNzZXRzVmFsdWU6ICcnLFxuICAgICAgc3BlbmRpbmdUeXBlOiAwLFxuICAgICAgc3BlbmRpbmdWYWx1ZTogJydcbiAgICB9KVxuICAgIHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyc6IHZhbHVlcyB9KVxuICB9XG5cbiAgX29uUmVtb3ZlTW9uZXRhcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkaXYgPSBhLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCB2YWx1ZXMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcylcbiAgICB2YWx1ZXMuc3BsaWNlKE51bWJlcihkaXYuZGF0YXNldC5pbmRleCksIDEpXG4gICAgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBhc3luYyBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICB9KVxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiB0aGlzLml0ZW0uZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHsgcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgY29uc3QgQ29DSWQgPSBpdGVtLmRhdGEoJ2NvY2lkJylcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgoaSA9PiAoaXRlbUlkICYmIGkuX2lkID09PSBpdGVtSWQpIHx8IChDb0NJZCAmJiBpID09PSBDb0NJZCkpXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3NldHVwJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc2V0dXAuaHRtbCcsXG4gICAgICB3aWR0aDogNTY1LFxuICAgICAgaGVpZ2h0OiA1MzAsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuXG4gICAgY29uc3QgZXJhID0gT2JqZWN0LmVudHJpZXModGhpcy5pdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pXG5cbiAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogdGhpcy5pdGVtLnN5c3RlbS5pdGVtcywgZXJhOiAodHlwZW9mIGVyYVswXSAhPT0gJ3VuZGVmaW5lZCcgPyBlcmFbMF0gOiB0cnVlKSB9KVxuXG4gICAgc2hlZXREYXRhLnNraWxscyA9IGl0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgIHNoZWV0RGF0YS5vdGhlckl0ZW1zID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgIT09ICdza2lsbCcpXG5cbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxuICAgIHNoZWV0RGF0YS5pdGVtc0xpc3RFbXB0eSA9IHNoZWV0RGF0YS5vdGhlckl0ZW1zLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS5fZXJhcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6ICh0aGlzLml0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLl9lcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeUZvcm1hdHMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlGb3JtYXRzKSB7XG4gICAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5Rm9ybWF0c1trZXldKSB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5zaG93Q3VycmVuY3lTeW1ib2wgPSBbJ2RlY2ltYWxMZWZ0JywgJ2RlY2ltYWxSaWdodCcsICdpbnRlZ2VyTGVmdCcsICdpbnRlZ2VyUmlnaHQnXS5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KVxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeVR5cGVzID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBDT0M3Lm1vbmV0YXJ5VHlwZXMpIHtcbiAgICAgIGlmIChDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5maWx0ZXIubGVuZ3RoID09PSAwIHx8IENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KSkge1xuICAgICAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMucHVzaCh7IGtleSwgdmFsOiBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5tb25ldGFyeVR5cGVzW2tleV0ubmFtZSkgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmFja3N0b3J5ID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJhY2tzdG9yeSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLmJpb1NlY3Rpb25zKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmJpb1NlY3Rpb25zJ10gPSBPYmplY3QudmFsdWVzKFxuICAgICAgICBzeXN0ZW0uYmlvU2VjdGlvbnMgfHwgW11cbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHN5c3RlbS5tb25ldGFyeS52YWx1ZXMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJ10gPSBPYmplY3QudmFsdWVzKHN5c3RlbS5tb25ldGFyeS52YWx1ZXMgfHwgW10pXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkJykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCddID0gIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2hlY2tlZFxuICAgIH1cblxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Py5uYW1lID09PSAnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lbmFibGVkJykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQnXSA9ICFldmVudC5jdXJyZW50VGFyZ2V0LmNoZWNrZWRcbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uLy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2tpbGxTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncylcbiAgICB0aGlzLl9zaGVldFRhYiA9ICdpdGVtcydcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnaXRlbSddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gYHN5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvJHt0aGlzLml0ZW0udHlwZX0tc2hlZXQuaHRtbGBcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICAvLyB0aGlzLml0ZW0uY2hlY2tTa2lsbFByb3BlcnRpZXMoKTtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG4gICAgc2hlZXREYXRhLmhhZE5vbkNoYXJhY3Rlck93bmVyID0gc2hlZXREYXRhLmhhc093bmVyICYmIHRoaXMuYWN0b3I/LnR5cGUgIT09ICdjaGFyYWN0ZXInXG5cbiAgICBzaGVldERhdGEuZWZmZWN0cyA9IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMoXG4gICAgICB0aGlzLml0ZW0uZWZmZWN0c1xuICAgIClcblxuICAgIHNoZWV0RGF0YS5fcHJvcGVydGllcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMucHVzaCh7XG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IHZhbHVlLFxuICAgICAgICBpc0VuYWJsZWQ6IHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5fZXJhcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6ICh0aGlzLml0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLl9lcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLmlzU3BlY2lhbGl6ZWQgPSB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgIHNoZWV0RGF0YS5jYW5Nb2RpZnlTcGVjID1cbiAgICAgICF0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSAmJlxuICAgICAgIXRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZ1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgKVxuICB9XG5cbiAgLy8gYXN5bmMgX29uQ2xpY2tBdHRyaWJ1dGVDb250cm9sKGV2ZW50KSB7XG4gIC8vICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy8gICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgLy8gICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uO1xuICAvLyAgIGNvbnN0IGF0dHJzID0gdGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXM7XG4gIC8vICAgY29uc3QgZm9ybSA9IHRoaXMuZm9ybTtcblxuICAvLyAgIC8vIEFkZCBuZXcgYXR0cmlidXRlXG4gIC8vICAgaWYgKGFjdGlvbiA9PT0gXCJjcmVhdGVcIikge1xuICAvLyAgICAgY29uc3QgbmsgPSBPYmplY3Qua2V5cyhhdHRycykubGVuZ3RoICsgMTtcbiAgLy8gICAgIGxldCBuZXdLZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAvLyAgICAgbmV3S2V5LmlubmVySFRNTCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiZGF0YS5hdHRyaWJ1dGVzLmF0dHIke25rfS5rZXlcIiB2YWx1ZT1cImF0dHIke25rfVwiLz5gO1xuICAvLyAgICAgbmV3S2V5ID0gbmV3S2V5LmNoaWxkcmVuWzBdO1xuICAvLyAgICAgZm9ybS5hcHBlbmRDaGlsZChuZXdLZXkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlbW92ZSBleGlzdGluZyBhdHRyaWJ1dGVcbiAgLy8gICBlbHNlIGlmIChhY3Rpb24gPT09IFwiZGVsZXRlXCIpIHtcbiAgLy8gICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KFwiLmF0dHJpYnV0ZVwiKTtcbiAgLy8gICAgIGxpLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQobGkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAvLyBfdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSkge1xuICAvLyAgIC8vIEhhbmRsZSB0aGUgZnJlZS1mb3JtIGF0dHJpYnV0ZXMgbGlzdFxuICAvLyAgIGNvbnN0IGZvcmQgPSBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChmb3JtRGF0YSk7XG4gIC8vICAgY29uc3QgZm9ybUF0dHJzID0gZm91bmRyeS51dGlscy5leHBhbmRPYmplY3QoZm9ybURhdGEpLmRhdGEuYXR0cmlidXRlcyB8fCB7fTtcbiAgLy8gICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LnZhbHVlcyhmb3JtQXR0cnMpLnJlZHVjZSgob2JqLCB2KSA9PiB7XG4gIC8vICAgICBsZXQgayA9IHZbXCJrZXlcIl0udHJpbSgpO1xuICAvLyAgICAgaWYgKC9bXFxzXFwuXS8udGVzdChrKSkgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXCJBdHRyaWJ1dGUga2V5cyBtYXkgbm90IGNvbnRhaW4gc3BhY2VzIG9yIHBlcmlvZHNcIik7XG4gIC8vICAgICBkZWxldGUgdltcImtleVwiXTtcbiAgLy8gICAgIG9ialtrXSA9IHY7XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHt9KTtcblxuICAvLyAgIC8vIFJlbW92ZSBhdHRyaWJ1dGVzIHdoaWNoIGFyZSBubyBsb25nZXIgdXNlZFxuICAvLyAgIGZvciAobGV0IGsgb2YgT2JqZWN0LmtleXModGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXMpKSB7XG4gIC8vICAgICBpZiAoIWF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoaykpIGF0dHJpYnV0ZXNbYC09JHtrfWBdID0gbnVsbDtcbiAgLy8gICB9XG5cbiAgLy8gICAvLyBSZS1jb21iaW5lIGZvcm1EYXRhXG4gIC8vICAgZm9ybURhdGEgPSBPYmplY3QuZW50cmllcyhmb3JtRGF0YSkuZmlsdGVyKGUgPT4gIWVbMF0uc3RhcnRzV2l0aChcImRhdGEuYXR0cmlidXRlc1wiKSkucmVkdWNlKChvYmosIGUpID0+IHtcbiAgLy8gICAgIG9ialtlWzBdXSA9IGVbMV07XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHsgX2lkOiB0aGlzLm9iamVjdC5faWQsIFwiZGF0YS5hdHRyaWJ1dGVzXCI6IGF0dHJpYnV0ZXMgfSk7XG5cbiAgLy8gICAvLyBVcGRhdGUgdGhlIEl0ZW1cbiAgLy8gICByZXR1cm4gdGhpcy5vYmplY3QudXBkYXRlKGZvcm1EYXRhKTtcbiAgLy8gfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHNraWxsTmFtZSA9IGZvcm1EYXRhWydzeXN0ZW0uc2tpbGxOYW1lJ10gfHwgdGhpcy5pdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsKSB7XG4gICAgICBjb25zdCBzcGVjaWFsaXphdGlvbiA9IGZvcm1EYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSB8fCB0aGlzLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICBmb3JtRGF0YS5uYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1EYXRhLm5hbWUgPSBza2lsbE5hbWVcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZm91bmRyeSwgZ2FtZSwgSXRlbVNoZWV0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NwZWxsU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL21haW4uaHRtbCcsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnaXRlbScsICdzcGVsbCddLFxuICAgICAgd2lkdGg6IDUwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgIHNjcm9sbFk6IFsnLmJvZHknXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLm5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmlzT3duZXIgPSB0aGlzLml0ZW0uaXNPd25lclxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJy5vcHRpb24nKS5jbGljayhldmVudCA9PiB0aGlzLm1vZGlmeVR5cGUoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnI2Nhc3Qtc3BlbGwnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLml0ZW0uY2FzdCgpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgdGhlIGNoZWNrYm94ZXMgZm9yIHR5cGUgd2hlbiB1c2VyIGNsaWNrcyBvbiB0aGUgY29ycmVzcG9uZGluZ1xuICAgKiBsYWJlbCwgbm90IHN1cmUgaWYgdGhpcyB3b3JrcyBvbiBlbmdpbmVzIG90aGVyIHRoYW4gVjhcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge2pRdWVyeS5FdmVudH0gY2xpY2tcbiAgICovXG4gIG1vZGlmeVR5cGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8qKiBQcmV2ZW50cyBwcm9wYWdhdGlvbiBvZiB0aGUgc2FtZSBldmVudCBmcm9tIGJlaW5nIGNhbGxlZCAqL1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgdG9nZ2xlU3dpdGNoID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIHJldHVybiB0b2dnbGVTd2l0Y2gucHJldigpLnRyaWdnZXIoJ2NsaWNrJylcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uLy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U3RhdHVzU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICpcbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc3RhdHVzJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3RhdHVzLmh0bWwnLFxuICAgICAgd2lkdGg6IDUyNSxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuaXRlbSkpXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuZWZmZWN0cyA9IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5pdGVtLmVmZmVjdHMsIHsgc3RhdHVzOiBmYWxzZSB9KVxuXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuaXRlbS5zeXN0ZW0udHlwZSkpIHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgICAgICBDT0M3LnN0YXR1c1R5cGVba2V5XSA/IENPQzcuc3RhdHVzVHlwZVtrZXldIDogbnVsbFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uTm90ZXMgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXMsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiB0cnVlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUsIEl0ZW1TaGVldCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdUYWxlbnRTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICd0YWxlbnQnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy90YWxlbnQuaHRtbCcsXG4gICAgICB3aWR0aDogNTI1LFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICAvKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5pdGVtLnN5c3RlbS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgICAgIENPQzcudGFsZW50VHlwZVtrZXldID8gQ09DNy50YWxlbnRUeXBlW2tleV0gOiBudWxsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25Ob3RlcyA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5ub3RlcyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgQ29DN0FjdG9yU2hlZXQgfSBmcm9tICcuL2Jhc2UuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3VmVoaWNsZVNoZWV0IGV4dGVuZHMgQ29DN0FjdG9yU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnYWN0b3InLCAnaXRlbScsICd2ZWhpY2xlJ10sXG4gICAgICB3aWR0aDogNTU1LFxuICAgICAgaGVpZ2h0OiA0MjAsXG4gICAgICByZXNpemFibGU6IHRydWUsXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3ZlaGljbGUuaHRtbCcsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLmFjdG9yJywgZHJvcFNlbGVjdG9yOiAnLmRyb3Bab25lJyB9XSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgLy8gICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXhwZXJpbWVudGFsRmVhdHVyZXNXYXJuaW5nJylcbiAgICAvLyApXG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEucHJvcGVydGllcyA9IFtdXG4gICAgaWYgKHRoaXMuYWN0b3Iuc3lzdGVtLnByb3BlcnRpZXMuYXJtZWQpIHtcbiAgICAgIHNoZWV0RGF0YS5wcm9wZXJ0aWVzLnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybWVkVmVoaWNsZScpKVxuICAgIH1cblxuICAgIGNvbnN0IGV4cGFuZGVkID0gdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ2V4cGFuZGVkJylcbiAgICBpZiAodHlwZW9mIGV4cGFuZGVkID09PSAndW5kZWZpbmVkJykgc2hlZXREYXRhLmV4cGFuZGVkID0gdHJ1ZVxuICAgIGVsc2Ugc2hlZXREYXRhLmV4cGFuZGVkID0gZXhwYW5kZWRcbiAgICBpZiAoc2hlZXREYXRhLmV4cGFuZGVkKSB7XG4gICAgICBzaGVldERhdGEub3B0aW9ucy5oZWlnaHQgPSA0MjBcbiAgICB9IGVsc2Ugc2hlZXREYXRhLm9wdGlvbnMuaGVpZ2h0ID0gJ2F1dG8nXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gYXdhaXQgVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25Ob3RlcyA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5ub3RlcyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIC8vIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzaGVldERhdGEuZGF0YS50eXBlKSkge1xuICAgIC8vICAgaWYoIHZhbHVlKSBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaCggQ09DNy5ib29rVHlwZVtrZXldP0NPQzcuYm9va1R5cGVba2V5XTpudWxsKTtcbiAgICAvLyB9XG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnLmFkZC1hcm1vcicpLmNsaWNrKGFzeW5jICgpID0+IGF3YWl0IHRoaXMuX29uQWRkQXJtb3IoKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnJlbW92ZS1hcm1vcicpXG4gICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gYXdhaXQgdGhpcy5fb25SZW1vdmVBcm1vcihldmVudCkpXG4gICAgaHRtbC5maW5kKCcuZXhwYW5kLWJ1dHRvbicpLmNsaWNrKHRoaXMuX29uVG9nZ2xlRXhwYW5kLmJpbmQodGhpcykpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIC8vIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm47XG4gICAgLy8gaHRtbC5vbignZHJvcCcsIChldmVudCkgPT4gdGhpcy5fb25Ecm9wKGV2ZW50KSk7XG4gICAgLy8gaHRtbC5maW5kKCcuc3BlbGwgLnNwZWxsLW5hbWUgaDQnKS5jbGljayhldmVudCA9PiB0aGlzLl9vblNwZWxsU3VtbWFyeShldmVudCkpO1xuICAgIC8vIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2sodGhpcy5fb25TcGVsbERlbGV0ZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZUV4cGFuZCAoKSB7XG4gICAgY29uc3QgZXhwYW5kZWQgPSB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnKVxuICAgIGlmIChleHBhbmRlZCkge1xuICAgICAgdGhpcy5vbGRTaXplID0gdGhpcy5wb3NpdGlvbi5oZWlnaHRcbiAgICAgIHRoaXMucG9zaXRpb24uaGVpZ2h0ID0gJ2F1dG8nIC8vIFJlc2V0IHRoZSBzdG9yZWQgcG9zaXRpb24gdG8gZm9yY2UgdG8gcmVjYWxjdWxhdGUgd2luZG93IHNpemUgVE9ETzogU3RvcmUgcHJldmlvdXMgcG9zaXRpb24gdG8gcmVzdG9yZSBpdCBpbnN0ZWFkIG9mIGF1dG9cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wb3NpdGlvbi5oZWlnaHQgPSB0aGlzLm9sZFNpemUgfHwgNDIwIC8vIFJlc2V0IHRoZSBzdG9yZWQgcG9zaXRpb24gdG8gZm9yY2UgdG8gcmVjYWxjdWxhdGUgd2luZG93IHNpemUgVE9ETzogU3RvcmUgcHJldmlvdXMgcG9zaXRpb24gdG8gcmVzdG9yZSBpdCBpbnN0ZWFkIG9mIGF1dG9cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ2V4cGFuZGVkJywgIWV4cGFuZGVkKVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQXJtb3IgKCkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwgW11cbiAgICApXG4gICAgbG9jYXRpb25zLnB1c2goeyBuYW1lOiBudWxsLCB2YWx1ZTogbnVsbCB9KVxuICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyc6IGxvY2F0aW9ucyB9KVxuICB9XG5cbiAgYXN5bmMgX29uUmVtb3ZlQXJtb3IgKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uID0gYnV0dG9uLmNsb3Nlc3QoJy5hcm1vcicpXG4gICAgY29uc3QgaW5kZXggPSBsb2NhdGlvbi5kYXRhc2V0LmluZGV4XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyB8fCBudWxsXG4gICAgKVxuICAgIGlmICghbG9jYXRpb25zKSByZXR1cm5cbiAgICBsb2NhdGlvbnMuc3BsaWNlKGluZGV4LCAxKVxuICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyc6IGxvY2F0aW9ucyB9KVxuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHtcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxuICAgIC8vIHRoaXMuYWN0b3IubG9ja2VkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qICBGb3JtIFN1Ym1pc3Npb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHN5c3RlbSA9IGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGZvcm1EYXRhKT8uc3lzdGVtXG4gICAgaWYgKHN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyddID0gT2JqZWN0LnZhbHVlcyhcbiAgICAgICAgc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zIHx8IFtdXG4gICAgICApXG4gICAgfVxuXG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5LCBnYW1lLCBJdGVtU2hlZXQsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3V2VhcG9uU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICpcbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnaXRlbSddLFxuICAgICAgd2lkdGg6IDU0NSxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtdGFicycsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdza2lsbHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIGNvbnN0IHBhdGggPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcydcbiAgICByZXR1cm4gYCR7cGF0aH0vd2VhcG9uLXNoZWV0Lmh0bWxgXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuY29tYmF0U2tpbGwgPSBbXVxuXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcbiAgICBpZiAoc2hlZXREYXRhLmhhc093bmVyKSB7XG4gICAgICBzaGVldERhdGEuZmlyZWFybVNraWxscyA9IHRoaXMuYWN0b3IuZmlyZWFybVNraWxsc1xuICAgICAgc2hlZXREYXRhLmZpZ2h0aW5nU2tpbGxzID0gdGhpcy5hY3Rvci5maWdodGluZ1NraWxsc1xuICAgICAgc2hlZXREYXRhLmNvbWJhdFNraWxsID0gdGhpcy5pdGVtLmFjdG9yLml0ZW1zLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9KVxuXG4gICAgICBzaGVldERhdGEuY29tYmF0U2tpbGwuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLl9wcm9wZXJ0aWVzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMucHVzaCh7XG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IHZhbHVlLFxuICAgICAgICBpc0VuYWJsZWQ6IHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5fZXJhcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xuICAgICAgICBwcmljZTogdGhpcy5pdGVtLnN5c3RlbS5wcmljZVtrZXldID8/IDAsXG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSksXG4gICAgICAgIGlzRW5hYmxlZDogKHRoaXMuaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID8/IHt9KVtrZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICBzaGVldERhdGEuX2VyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEudXNlc0FsdGVybmF0ZVNraWxsID1cbiAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5hdXRvID09PSB0cnVlIHx8XG4gICAgICB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuYnJzdCA9PT0gdHJ1ZSB8fFxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnRocm93biA9PT0gdHJ1ZVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IHRydWUsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uU3BlY2lhbCA9IGF3YWl0IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5zcGVjaWFsLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBhd2FpdCBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogdHJ1ZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cbiAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25DbGlja1RvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLndlYXBvbi1wcm9wZXJ0eScpLmNsaWNrKHRoaXMuX29uUHJvcGVydHlDbGljay5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnRcbiAgICovXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkoXG4gICAgICBwcm9wZXJ0eUlkLFxuICAgICAgaXNDdHJsS2V5KGV2ZW50KVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIF9vblByb3BlcnR5Q2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy53ZWFwb24tcHJvcGVydHknKS5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZVByb3BlcnR5KHByb3BlcnR5SWQpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lLCBIb29rcyAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1GaWx0ZXIgKGUpIHtcbiAgY29uc3QgYXBwSWQgPSBlLmN1cnJlbnRUYXJnZXQubmFtZS5yZXBsYWNlKC9eY29jN1teMC05XSsoXFxkKykkLywgJyQxJylcbiAgY29uc3QgYXBwID0gJCgnZGl2LmFwcFtkYXRhLWFwcGlkPScgKyBhcHBJZCArICddJylcbiAgY29uc3QgdHlwZSA9IGFwcC5maW5kKCdzZWxlY3RbbmFtZT1jb2M3dHlwZScgKyBhcHBJZCArICddJykudmFsKClcbiAgY29uc3QgbmFtZSA9IGFwcC5maW5kKCdpbnB1dFtuYW1lPXNlYXJjaF0nKS52YWwoKVxuICBjb25zdCBlcmFFbGVtZW50ID0gYXBwLmZpbmQoJ3NlbGVjdFtuYW1lPWNvYzdlcmEnICsgYXBwSWQgKyAnXScpXG4gIGxldCBlcmEgPSAnJ1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdzZXR1cCc6XG4gICAgY2FzZSAnc2tpbGwnOlxuICAgIGNhc2UgJ3dlYXBvbic6XG4gICAgICBlcmFFbGVtZW50LmNsb3Nlc3QoJ2Rpdi5lcmFfc2VsZWN0Jykuc2hvdygpXG4gICAgICBlcmEgPSBlcmFFbGVtZW50LnZhbCgpXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBlcmFFbGVtZW50LmNsb3Nlc3QoJ2Rpdi5lcmFfc2VsZWN0JykuaGlkZSgpXG4gIH1cbiAgY29uc3QgaXRlbXMgPSBhd2FpdCBnYW1lLnBhY2tzLmdldChhcHAuZGF0YSgncGFja0lkJykpPy5nZXREb2N1bWVudHMoKVxuICBpZiAodHlwZW9mIGl0ZW1zID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVyblxuICB9XG4gIGNvbnN0IHNob3cgPSBbXVxuICBjb25zdCBuYW1lRmlsdGVyID0gbmV3IFJlZ0V4cChSZWdFeHAuZXNjYXBlKG5hbWUpLCAnaScpXG4gIGZvciAoY29uc3QgWywgaXRlbV0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbXMpKSB7XG4gICAgbGV0IGZpbHRlciA9IHRydWVcbiAgICBpZiAoZmlsdGVyICYmIG5hbWUgIT09ICcnKSB7XG4gICAgICBmaWx0ZXIgPSBpdGVtLm5hbWUubWF0Y2gobmFtZUZpbHRlcilcbiAgICB9XG4gICAgaWYgKGZpbHRlciAmJiB0eXBlICE9PSAnJykge1xuICAgICAgZmlsdGVyID0gaXRlbS50eXBlID09PSB0eXBlXG4gICAgfVxuICAgIGlmIChmaWx0ZXIgJiYgZXJhICE9PSAnJykge1xuICAgICAgY29uc3QgZXJhcyA9IGl0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhc1xuICAgICAgaWYgKGVyYXMgJiYgT2JqZWN0LmtleXMoZXJhcykubGVuZ3RoID4gMCAmJiAhKGVyYXNbZXJhXSA/PyBmYWxzZSkpIHtcbiAgICAgICAgZmlsdGVyID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZpbHRlcikge1xuICAgICAgc2hvdy5wdXNoKGl0ZW0uaWQpXG4gICAgfVxuICB9XG4gIGFwcC5maW5kKCdvbC5kaXJlY3RvcnktbGlzdCBsaScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IHNob3cuaW5jbHVkZXModGhpcy5kYXRhc2V0LmRvY3VtZW50SWQpXG4gICAgICA/ICdmbGV4J1xuICAgICAgOiAnbm9uZSdcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBlbmRpdW1GaWx0ZXIgKCkge1xuICBIb29rcy5vbigncmVuZGVyQ29tcGVuZGl1bScsIGFzeW5jIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgICBpZiAoYXBwLmNvbGxlY3Rpb24uZG9jdW1lbnROYW1lID09PSAnSXRlbScpIHtcbiAgICAgIGF3YWl0IGFwcC5jb2xsZWN0aW9uLmdldEluZGV4KClcbiAgICAgIGNvbnN0IHR5cGVzID0gWy4uLm5ldyBTZXQoZGF0YS5pbmRleC5maWx0ZXIoaSA9PiBpLm5hbWUgIT09ICcjW0NGX3RlbXBFbnRpdHldJykubWFwKGl0ZW0gPT4gaXRlbS50eXBlKSldXG4gICAgICBjb25zdCBzZWxlY3QgPSBbXVxuICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICc8b3B0aW9uIHZhbHVlPVwiXCI+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbGwnKSArICc8L29wdGlvbj4nXG4gICAgICApXG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ2FyY2hldHlwZScpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiYXJjaGV0eXBlXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuQXJjaGV0eXBlJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdib29rJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJib29rXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuQm9vaycpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnaXRlbScpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiaXRlbVwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLkl0ZW0nKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ29jY3VwYXRpb24nKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIm9jY3VwYXRpb25cIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5PY2N1cGF0aW9uJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdzZXR1cCcpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwic2V0dXBcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5TZXR1cCcpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnc2tpbGwnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInNraWxsXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU2tpbGwnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3NwZWxsJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJzcGVsbFwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNwZWxsJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdzdGF0dXMnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInN0YXR1c1wiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlN0YXR1cycpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygndGFsZW50JykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJ0YWxlbnRcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5UYWxlbnQnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3dlYXBvbicpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwid2VhcG9uXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuV2VhcG9uJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgY29uc3QgZXJhcyA9IFtdXG4gICAgICBlcmFzLnB1c2goXG4gICAgICAgICc8b3B0aW9uIHZhbHVlPVwiXCI+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbGwnKSArICc8L29wdGlvbj4nXG4gICAgICApXG4gICAgICBmb3IgKGNvbnN0IGVyYSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpLm1hcChlID0+IHsgcmV0dXJuIHsgaWQ6IGVbMF0sIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZShlWzFdKSB9IH0pLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KSkge1xuICAgICAgICBlcmFzLnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCInICtcbiAgICAgICAgICAgIGVyYS5pZCArXG4gICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICBlcmEubmFtZSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBodG1sLmRhdGEoJ3BhY2tJZCcsIGFwcC5tZXRhZGF0YS5pZClcbiAgICAgIGxldCB1bmNvbW1vbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbFJhcml0eVNob3J0JylcbiAgICAgIGlmICh1bmNvbW1vbiA9PT0gJ0NvQzcuU2tpbGxSYXJpdHlTaG9ydCcpIHtcbiAgICAgICAgdW5jb21tb24gPSAnPz8nXG4gICAgICB9XG4gICAgICBodG1sLmZpbmQoJ2xpLmRpcmVjdG9yeS1pdGVtJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9ICQodGhpcylcbiAgICAgICAgbGV0IGl0ZW0gPSBbXVxuICAgICAgICBpZiAodHlwZW9mIGRhdGEuaW5kZXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgLy8gREVQUkVDSUFURUQgSU4gdjExXG4gICAgICAgICAgaXRlbSA9IGRhdGEuaW5kZXguZmluZChpID0+IGkuX2lkID09PSByb3cuZGF0YSgnZG9jdW1lbnQtaWQnKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtID0gYXBwLmNvbGxlY3Rpb24uaW5kZXguZ2V0KHJvdy5kYXRhKCdkb2N1bWVudC1pZCcpKVxuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtICYmIGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgIHJvdy5maW5kKCdhJykuaHRtbChpdGVtLm5hbWUgKyAnICgnICsgKGl0ZW0uc3lzdGVtPy5iYXNlID8/ICc/JykgKyAnJScgKyAoKGl0ZW0uc3lzdGVtPy5wcm9wZXJ0aWVzPy5yYXJpdHkgPz8gZmFsc2UpID8gJyAnICsgdW5jb21tb24gOiAnJykgKyAnKScpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCdoZWFkZXIuZGlyZWN0b3J5LWhlYWRlcicpXG4gICAgICAgIC5hZnRlcihcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbXBlbmRpdW1maWx0ZXJcIj4nICtcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImhlYWRlci1zZWFyY2ggZmxleHJvd1wiPjxpIGNsYXNzPVwiZmFzIGZhLWxheWVyLWdyb3VwXCI+PC9pPjxzZWxlY3QgbmFtZT1cImNvYzd0eXBlJyArIGFwcC5hcHBJZCArICdcIiBzdHlsZT1cIlwiPicgKyBzZWxlY3Quam9pbignJykgKyAnPC9zZWxlY3Q+PC9kaXY+JyArXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJoZWFkZXItc2VhcmNoIGZsZXhyb3cgZXJhX3NlbGVjdFwiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+PGkgY2xhc3M9XCJmYXMgZmEtbGF5ZXItZ3JvdXBcIj48L2k+PHNlbGVjdCBuYW1lPVwiY29jN2VyYScgKyBhcHAuYXBwSWQgKyAnXCIgc3R5bGU9XCJcIj4nICsgZXJhcy5qb2luKCcnKSArICc8L3NlbGVjdD48L2Rpdj4nICtcbiAgICAgICAgICAnPC9kaXY+J1xuICAgICAgICApXG4gICAgICBodG1sLmZpbmQoJ3NlbGVjdCcpLmNoYW5nZShwZXJmb3JtRmlsdGVyLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJ2lucHV0Jykua2V5dXAocGVyZm9ybUZpbHRlci5iaW5kKHRoaXMpKVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBBY3RvciwgQ2FyZCwgQ09ORklHLCBmb3VuZHJ5LCBnYW1lLCBJdGVtLCBKb3VybmFsRW50cnksIE1hY3JvLCBQbGF5bGlzdCwgUm9sbFRhYmxlLCBTY2VuZSwgU2NlbmVOYXZpZ2F0aW9uLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0NJRCB7XG4gIHN0YXRpYyBpbml0ICgpIHtcbiAgICBDT05GSUcuQWN0b3IuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICAvLyBDT05GSUcuQ2FyZHMuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuSXRlbS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5JdGVtLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdzeXN0ZW0uYmFzZScpXG4gICAgQ09ORklHLkl0ZW0uY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ3N5c3RlbS5wcm9wZXJ0aWVzJylcbiAgICBDT05GSUcuSm91cm5hbEVudHJ5LmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLk1hY3JvLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLlBsYXlsaXN0LmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLlJvbGxUYWJsZS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5TY2VuZS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIGdhbWUuc3lzdGVtLmFwaSA9IHtcbiAgICAgIGNvY2lkOiBDb0NJRFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIFJlZ0V4cCBmb3IgdmFsaWQgdHlwZSBhbmQgZm9ybWF0XG4gICAqIEByZXR1cm5zIFJlZ0V4cFxuICAgKi9cbiAgc3RhdGljIHJlZ0V4S2V5ICgpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXignICsgT2JqZWN0LmtleXMoQ29DSUQuZ2FtZVByb3BlcnR5TG9va3VwKS5qb2luKCd8JykgKyAnKVxcXFwuKC4qPylcXFxcLiguKykkJylcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQ29DSUQgdHlwZS5zdWJ0eXBlLiBiYXNlZCBvbiBkb2N1bWVudFxuICAgKiBAcGFyYW0gZG9jdW1lbnRcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ2V0UHJlZml4IChkb2N1bWVudCkge1xuICAgIGZvciAoY29uc3QgdHlwZSBpbiBDb0NJRC5kb2N1bWVudE5hbWVMb29rdXApIHtcbiAgICAgIGlmIChkb2N1bWVudCBpbnN0YW5jZW9mIENvQ0lELmRvY3VtZW50TmFtZUxvb2t1cFt0eXBlXSkge1xuICAgICAgICByZXR1cm4gdHlwZSArICcuJyArIChkb2N1bWVudC50eXBlID8/ICcnKSArICcuJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQ29DSUQgdHlwZS5zdWJ0eXBlLm5hbWUgYmFzZWQgb24gZG9jdW1lbnRcbiAgICogQHBhcmFtIGRvY3VtZW50XG4gICAqIEByZXR1cm5zIHN0cmluZ1xuICAgKi9cbiAgc3RhdGljIGd1ZXNzSWQgKGRvY3VtZW50KSB7XG4gICAgcmV0dXJuIENvQ0lELmdldFByZWZpeChkb2N1bWVudCkgKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKGRvY3VtZW50Lm5hbWUpXG4gIH1cblxuICAvKipcbiAgICogR2V0IENvQ0lEIHR5cGUuc3VidHlwZS5wYXJ0aWFsLW5hbWUoLXJlbW92ZWQpXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ3Vlc3NHcm91cEZyb21LZXkgKGlkKSB7XG4gICAgaWYgKGlkKSB7XG4gICAgICBjb25zdCBrZXkgPSBpZC5yZXBsYWNlKC8oW15cXFxcLi1dKykkLywgJycpXG4gICAgICBpZiAoa2V5LnN1YnN0cigtMSkgPT09ICctJykge1xuICAgICAgICByZXR1cm4ga2V5XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDb0NJRCB0eXBlLnN1YnR5cGUucGFydGlhbC1uYW1lKC1yZW1vdmVkKVxuICAgKiBAcGFyYW0gZG9jdW1lbnRcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ3Vlc3NHcm91cEZyb21Eb2N1bWVudCAoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gQ29DSUQuZ3Vlc3NHcm91cEZyb21LZXkoZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cmFuc2xhdGlvbiBvZiBlcmEga2V5XG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZXJhVGV4dCAoZXJhKSB7XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55JylcbiAgICB9IGVsc2UgaWYgKGVyYSA9PT0gdHJ1ZSkge1xuICAgICAgZXJhID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKVxuICAgIH1cblxuICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KENPQzcuZXJhc1tlcmFdID8/ICdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhIH0pXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgaXRlbXMgd2l0aCBtYXRjaGluZyBDb0NJRHMsIGxhbmd1YWdlLCBhbmQgZXJhc1xuICAgKiB1aS5ub3RpZmljYXRpb25zLndhcm4gZm9yIG1pc3Npbmcga2V5c1xuICAgKiBAcGFyYW0gaXRlbUxpc3QgYXJyYXkgb2YgQ29DSURzXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZXhwYW5kSXRlbUFycmF5ICh7IGl0ZW1MaXN0LCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgbGV0IGl0ZW1zID0gW11cbiAgICBjb25zdCBjb2NpZHMgPSBpdGVtTGlzdC5maWx0ZXIoaXQgPT4gdHlwZW9mIGl0ID09PSAnc3RyaW5nJylcbiAgICBpdGVtcyA9IGl0ZW1MaXN0LmZpbHRlcihpdCA9PiB0eXBlb2YgaXQgIT09ICdzdHJpbmcnKVxuXG4gICAgaWYgKGNvY2lkcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGZvdW5kID0gYXdhaXQgQ29DSUQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IENvQ0lELm1ha2VHcm91cFJlZ0V4KGNvY2lkcyksIHR5cGU6ICdpJywgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gICAgICBjb25zdCBhbGwgPSBbXVxuICAgICAgZm9yIChjb25zdCBjb2NpZCBvZiBjb2NpZHMpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGZvdW5kLmZpbmQoaSA9PiBpLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBjb2NpZClcbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBhbGwucHVzaChpdGVtKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYWxsLmxlbmd0aCA8IGNvY2lkcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgbm90bWlzc2luZyA9IFtdXG4gICAgICAgIGZvciAoY29uc3QgZG9jIG9mIGFsbCkge1xuICAgICAgICAgIG5vdG1pc3NpbmcucHVzaChkb2MuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVyYSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIGVyYSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJylcbiAgICAgICAgfVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IuZG9jdW1lbnRzLW5vdC1mb3VuZCcsIHsgY29jaWRzOiBjb2NpZHMuZmlsdGVyKHggPT4gIW5vdG1pc3NpbmcuaW5jbHVkZXMoeCkpLmpvaW4oJywgJyksIGxhbmcsIGVyYTogQ29DSUQuZXJhVGV4dChlcmEpIH0pKVxuICAgICAgfVxuICAgICAgaXRlbXMgPSBpdGVtcy5jb25jYXQoYWxsKVxuICAgIH1cbiAgICByZXR1cm4gaXRlbXNcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGl0ZW0gd2l0aCBtYXRjaGluZyBDb0NJRHMgZnJvbSBsaXN0XG4gICAqIEVtcHR5IGFycmF5IHJldHVybiBmb3IgbWlzc2luZyBrZXlzXG4gICAqIEBwYXJhbSBjb2NpZCBhIHNpbmdsZSBjb2NpZFxuICAgKiBAcGFyYW0gbGlzdCBhcnJheSBvZiBpdGVtc1xuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGZpbmRDb2NJZEluTGlzdCAoY29jaWQsIGxpc3QpIHtcbiAgICBsZXQgaXRlbU5hbWUgPSAnJ1xuICAgIGNvbnN0IENvQ0lES2V5cyA9IGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdChnYW1lLmkxOG4udHJhbnNsYXRpb25zLkNvQzcuQ29DSURGbGFnLmtleXMpXG4gICAgaWYgKHR5cGVvZiBDb0NJREtleXNbY29jaWRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaXRlbU5hbWUgPSBDb0NJREtleXNbY29jaWRdXG4gICAgfVxuICAgIHJldHVybiAodHlwZW9mIGxpc3QuZmlsdGVyID09PSAndW5kZWZpbmVkJyA/IE9iamVjdC52YWx1ZXMobGlzdCkgOiBsaXN0KS5maWx0ZXIoaSA9PiBpLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkID09PSBjb2NpZCB8fCAoaXRlbU5hbWUgIT09ICcnICYmIGl0ZW1OYW1lID09PSBpLm5hbWUpKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgUmVnRXhwIG1hdGNoaW5nIGFsbCBzdHJpbmdzIGluIGFycmF5XG4gICAqIEBwYXJhbSBjb2NpZHMgYW4gYXJyYXkgb2YgQ29DSUQgc3RyaW5nc1xuICAgKiBAcGFyYW0gbGlzdCBhcnJheSBvZiBpdGVtc1xuICAgKiBAcmV0dXJucyBSZWdFeHBcbiAgICovXG4gIHN0YXRpYyBtYWtlR3JvdXBSZWdFeCAoY29jaWRzKSB7XG4gICAgaWYgKHR5cGVvZiBjb2NpZHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb2NpZHMgPSBbY29jaWRzXVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvY2lkcyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGNvY2lkcy5maWx0ZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgY29uc3Qgc3BsaXRzID0ge31cbiAgICBjb25zdCByZ3ggPSBDb0NJRC5yZWdFeEtleSgpXG4gICAgZm9yIChjb25zdCBpIG9mIGNvY2lkcykge1xuICAgICAgY29uc3Qga2V5ID0gaS5tYXRjaChyZ3gpXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3BsaXRzW2tleVsxXV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc3BsaXRzW2tleVsxXV0gPSB7fVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygc3BsaXRzW2tleVsxXV1ba2V5WzJdXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzcGxpdHNba2V5WzFdXVtrZXlbMl1dID0gW11cbiAgICAgICAgfVxuICAgICAgICBzcGxpdHNba2V5WzFdXVtrZXlbMl1dLnB1c2goa2V5WzNdKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2xpZW50bHkgZXJyb3JcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVnRXhQYXJ0cyA9IFtdXG4gICAgZm9yIChjb25zdCB0IGluIHNwbGl0cykge1xuICAgICAgY29uc3Qgcm93ID0gW11cbiAgICAgIGZvciAoY29uc3QgcyBpbiBzcGxpdHNbdF0pIHtcbiAgICAgICAgaWYgKHNwbGl0c1t0XVtzXS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgcm93LnB1c2gocyArICdcXFxcLicgKyAnKCcgKyBzcGxpdHNbdF1bc10uam9pbignfCcpICsgJyknKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJvdy5wdXNoKHMgKyAnXFxcXC4nICsgc3BsaXRzW3RdW3NdLmpvaW4oJycpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocm93Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmVnRXhQYXJ0cy5wdXNoKHQgKyAnXFxcXC4nICsgJygnICsgcm93LmpvaW4oJ3wnKSArICcpJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZ0V4UGFydHMucHVzaCh0ICsgJ1xcXFwuJyArIHJvdy5qb2luKCcnKSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJlZ0V4UGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14oJyArIHJlZ0V4UGFydHMuam9pbignfCcpICsgJykkJylcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcmVnRXhQYXJ0cy5qb2luKCcnKSArICckJylcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCBkb2N1bWVudHMgd2l0aCBhbiBDb0NJRCBtYXRjaGluZyB0aGUgcmVnZXggYW5kIG1hdGNoaW5nIHRoZSBkb2N1bWVudCB0eXBlXG4gICAqIGFuZCBsYW5ndWFnZSwgZnJvbSB0aGUgc3BlY2lmaWVkIHNjb3BlLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKCdlbicsICdlcycsIC4uLilcbiAgICogQHBhcmFtIHNjb3BlIGRlZmluZXMgd2hlcmUgaXQgd2lsbCBsb29rOlxuICAgKiAqKm1hdGNoKiogc2FtZSBsb2dpYyBhcyBmcm9tQ29DSUQgZnVuY3Rpb24sXG4gICAqICoqYWxsKio6IGZpbmQgaW4gYm90aCB3b3JsZCAmIGNvbXBlbmRpYSxcbiAgICogKip3b3JsZCoqOiBvbmx5IHNlYXJjaCBpbiB3b3JsZCxcbiAgICogKipjb21wZW5kaXVtcyoqOiBvbmx5IHNlYXJjaCBpbiBjb21wZW5kaXVtc1xuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBmcm9tQ29DSURSZWdleEFsbCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgc2NvcGUgPSAnbWF0Y2gnLCBsYW5nRmFsbGJhY2sgPSB0cnVlLCBzaG93TG9hZGluZyA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGlmICghY29jaWRSZWdFeHApIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBbXVxuXG4gICAgbGV0IGNvdW50ID0gMFxuICAgIGlmIChzaG93TG9hZGluZykge1xuICAgICAgaWYgKFsnbWF0Y2gnLCAnYWxsJywgJ3dvcmxkJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICAgIGNvdW50KytcbiAgICAgIH1cbiAgICAgIGlmIChbJ21hdGNoJywgJ2FsbCcsICdjb21wZW5kaXVtcyddLmluY2x1ZGVzKHNjb3BlKSkge1xuICAgICAgICBjb3VudCA9IGNvdW50ICsgZ2FtZS5wYWNrcy5zaXplXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFsnbWF0Y2gnLCAnYWxsJywgJ3dvcmxkJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICBjb25zdCB3b3JsZERvY3VtZW50cyA9IGF3YWl0IENvQ0lELmRvY3VtZW50c0Zyb21Xb3JsZCh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgcHJvZ3Jlc3NCYXI6IGNvdW50IH0pXG4gICAgICBpZiAoc2NvcGUgPT09ICdtYXRjaCcgJiYgd29ybGREb2N1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChzaG93TG9hZGluZykge1xuICAgICAgICAgIFNjZW5lTmF2aWdhdGlvbi5kaXNwbGF5UHJvZ3Jlc3NCYXIoeyBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRVUC5QYWNrYWdlc0xvYWRpbmcnKSwgcGN0OiAxMDAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJBbGxDb0NJRCh3b3JsZERvY3VtZW50cywgbGFuZ0ZhbGxiYWNrICYmIGxhbmcgIT09ICdlbicpXG4gICAgICB9XG4gICAgICByZXN1bHQuc3BsaWNlKDAsIDAsIC4uLndvcmxkRG9jdW1lbnRzKVxuICAgIH1cblxuICAgIGlmIChbJ21hdGNoJywgJ2FsbCcsICdjb21wZW5kaXVtcyddLmluY2x1ZGVzKHNjb3BlKSkge1xuICAgICAgY29uc3QgY29tcGVuZGlhRG9jdW1lbnRzID0gYXdhaXQgQ29DSUQuZG9jdW1lbnRzRnJvbUNvbXBlbmRpYSh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgcHJvZ3Jlc3NCYXI6IGNvdW50IH0pXG5cbiAgICAgIHJlc3VsdC5zcGxpY2UocmVzdWx0Lmxlbmd0aCwgMCwgLi4uY29tcGVuZGlhRG9jdW1lbnRzKVxuICAgIH1cblxuICAgIGlmIChzaG93TG9hZGluZykge1xuICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IDEwMCB9KVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmZpbHRlckFsbENvQ0lEKHJlc3VsdCwgbGFuZ0ZhbGxiYWNrICYmIGxhbmcgIT09ICdlbicpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgZG9jdW1lbnRzIHdpdGggYW4gQ29DSUQsIGxhbmd1YWdlLCBhbmQgZXJhIGZyb20gdGhlIHNwZWNpZmllZCBzY29wZS5cbiAgICogRW1wdHkgYXJyYXkgcmV0dXJuIGZvciBubyBtYXRjaGVzXG4gICAqIEBwYXJhbSBjb2NpZCBhIHNpbmdsZSBjb2NpZFxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBzY29wZSBkZWZpbmVzIHdoZXJlIGl0IHdpbGwgbG9vazpcbiAgICogKiptYXRjaCoqIHNhbWUgbG9naWMgYXMgZnJvbUNvQ0lEIGZ1bmN0aW9uLFxuICAgKiAqKmFsbCoqOiBmaW5kIGluIGJvdGggd29ybGQgJiBjb21wZW5kaWEsXG4gICAqICoqd29ybGQqKjogb25seSBzZWFyY2ggaW4gd29ybGQsXG4gICAqICoqY29tcGVuZGl1bXMqKjogb25seSBzZWFyY2ggaW4gY29tcGVuZGl1bXNcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbUNvQ0lEQWxsICh7IGNvY2lkLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IGZhbHNlLCBzY29wZSA9ICdtYXRjaCcsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFjb2NpZCB8fCB0eXBlb2YgY29jaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgY29uc3QgcGFydHMgPSBjb2NpZC5tYXRjaChDb0NJRC5yZWdFeEtleSgpKVxuICAgIGlmICghcGFydHMpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBpZiAobGFuZyA9PT0gJycpIHtcbiAgICAgIGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIH1cbiAgICByZXR1cm4gQ29DSUQuZnJvbUNvQ0lEUmVnZXhBbGwoeyBjb2NpZFJlZ0V4cDogbmV3IFJlZ0V4cCgnXicgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKGNvY2lkKSArICckJyksIHR5cGU6IHBhcnRzWzFdLCBsYW5nLCBlcmEsIHNjb3BlLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBvbmx5IHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50cyBmb3IgZWFjaCBDb0NJRCB0aGF0IG1hdGNoZXMgdGhlIFJlZ0V4cCBhbmRcbiAgICogbGFuZ3VhZ2UsIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnRzIGluIHRoZSBXb3JsZCB0YWtpbmcgcHJlY2VkZW5jZSBvdmVyXG4gICAqIGFueSBkb2N1bWVudHMgaW4gY29tcGVuZGl1bSBwYWNrcy5cbiAgICogRW1wdHkgYXJyYXkgcmV0dXJuIGZvciBubyBtYXRjaGVzXG4gICAqIEBwYXJhbSBjb2NpZFJlZ0V4cCByZWdleCB1c2VkIG9uIHRoZSBDb0NJRFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgd2FudGVkIENvQ0lELCBmb3IgZXhhbXBsZSAnaScsICdhJywgJ2plJ1xuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoXCJlblwiLCBcImVzXCIsIC4uLilcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0XG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gc2hvd0xvYWRpbmcgU2hvdyBsb2FkaW5nIGJhclxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZyb21Db0NJRFJlZ2V4QmVzdCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSB0cnVlLCBsYW5nRmFsbGJhY2sgPSB0cnVlLCBzaG93TG9hZGluZyA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGlmIChlcmEgPT09IGZhbHNlKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLnVua25vd24tZXJhJywgeyBlcmE6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnknKSB9KSlcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBjb25zdCBhbGxEb2N1bWVudHMgPSBhd2FpdCB0aGlzLmZyb21Db0NJRFJlZ2V4QWxsKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgc2NvcGU6ICdhbGwnLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gICAgY29uc3QgYmVzdERvY3VtZW50cyA9IHRoaXMuZmlsdGVyQmVzdENvQ0lEKGFsbERvY3VtZW50cylcbiAgICByZXR1cm4gYmVzdERvY3VtZW50c1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgb25seSB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudCBmb3IgQ29DSUQgdGhhdCBtYXRjaGVzIHRoZSBsYW5ndWFnZSxcbiAgICogd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudHMgaW4gdGhlIFdvcmxkIHRha2luZyBwcmVjZWRlbmNlIG92ZXJcbiAgICogYW55IGRvY3VtZW50c1xuICAgKiBpbiBjb21wZW5kaXVtIHBhY2tzLlxuICAgKiBAcGFyYW0gY29jaWQgc3RyaW5nIENvQ0lEXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0IChcImVuXCIsIFwiZXNcIiwgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHRcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqL1xuICBzdGF0aWMgZnJvbUNvQ0lEIChjb2NpZCwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSB0cnVlLCBsYW5nRmFsbGJhY2sgPSB0cnVlKSB7XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueScpIH0pKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURCZXN0KHsgY29jaWQsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrIH0pXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBvbmx5IHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50IGZvciBDb0NJRCB0aGF0IG1hdGNoZXMgdGhlIGxhbmd1YWdlLFxuICAgKiB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50cyBpbiB0aGUgV29ybGQgdGFraW5nIHByZWNlZGVuY2Ugb3ZlclxuICAgKiBhbnkgZG9jdW1lbnRzXG4gICAqIGluIGNvbXBlbmRpdW0gcGFja3MuXG4gICAqIEBwYXJhbSBjb2NpZCBzdHJpbmcgQ29DSURcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKFwiZW5cIiwgXCJlc1wiLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdFxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICovXG4gIHN0YXRpYyBmcm9tQ29DSURCZXN0ICh7IGNvY2lkLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFjb2NpZCB8fCB0eXBlb2YgY29jaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueScpIH0pKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSBjb2NpZC5zcGxpdCgnLicpWzBdXG4gICAgY29uc3QgY29jaWRSZWdFeHAgPSBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoY29jaWQpICsgJyQnKVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gIH1cblxuICAvKipcbiAgICogRm9yIGFuIGFycmF5IG9mIGRvY3VtZW50cyBhbHJlYWR5IHByb2Nlc3NlZCBieSBmaWx0ZXJBbGxDb0NJRCwgcmV0dXJucyBvbmx5IHRob3NlIHRoYXQgYXJlIHRoZSBcImJlc3RcIiB2ZXJzaW9uIG9mIHRoZWlyIENvQ0lEXG4gICAqIEBwYXJhbSBkb2N1bWVudHNcbiAgICogQHJldHVybnNcbiAgICovXG4gIHN0YXRpYyBmaWx0ZXJCZXN0Q29DSUQgKGRvY3VtZW50cykge1xuICAgIGNvbnN0IGJlc3RNYXRjaERvY3VtZW50cyA9IG5ldyBNYXAoKVxuICAgIGZvciAoY29uc3QgZG9jIG9mIGRvY3VtZW50cykge1xuICAgICAgY29uc3QgZG9jQ29DSUQgPSBkb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8uaWRcbiAgICAgIGlmIChkb2NDb0NJRCkge1xuICAgICAgICBjb25zdCBjdXJyZW50RG9jID0gYmVzdE1hdGNoRG9jdW1lbnRzLmdldChkb2NDb0NJRClcbiAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50RG9jID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGJlc3RNYXRjaERvY3VtZW50cy5zZXQoZG9jQ29DSUQsIGRvYylcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJlZmVyIHBhY2sgPT09ICcnIGlmIHBvc3NpYmxlXG4gICAgICAgIGNvbnN0IGRvY1BhY2sgPSAoZG9jLnBhY2sgPz8gJycpXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUGFjayA9IChjdXJyZW50RG9jPy5wYWNrID8/ICcnKVxuICAgICAgICBjb25zdCBwcmVmZXJXb3JsZCA9IGRvY1BhY2sgPT09ICcnIHx8IGV4aXN0aW5nUGFjayAhPT0gJydcbiAgICAgICAgaWYgKCFwcmVmZXJXb3JsZCkge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcmVmZXIgaGlnaGVzdCBwcmlvcml0eVxuICAgICAgICBsZXQgZG9jUHJpb3JpdHkgPSBwYXJzZUludChkb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ucHJpb3JpdHkgPz8gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIDEwKVxuICAgICAgICBkb2NQcmlvcml0eSA9IGlzTmFOKGRvY1ByaW9yaXR5KSA/IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSIDogZG9jUHJpb3JpdHlcbiAgICAgICAgbGV0IGV4aXN0aW5nUHJpb3JpdHkgPSBwYXJzZUludChjdXJyZW50RG9jLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LnByaW9yaXR5ID8/IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLCAxMClcbiAgICAgICAgZXhpc3RpbmdQcmlvcml0eSA9IGlzTmFOKGV4aXN0aW5nUHJpb3JpdHkpID8gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIgOiBleGlzdGluZ1ByaW9yaXR5XG4gICAgICAgIGNvbnN0IHByZWZlclByaW9yaXR5ID0gZG9jUHJpb3JpdHkgPj0gZXhpc3RpbmdQcmlvcml0eVxuICAgICAgICBpZiAoIXByZWZlclByaW9yaXR5KSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIGJlc3RNYXRjaERvY3VtZW50cy5zZXQoZG9jQ29DSUQsIGRvYylcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFsuLi5iZXN0TWF0Y2hEb2N1bWVudHMudmFsdWVzKCldXG4gIH1cblxuICAvKipcbiAgICogRm9yIGFuIGFycmF5IG9mIGRvY3VtZW50cywgcmV0dXJucyBmaWx0ZXIgb3V0IGVuIGRvY3VtZW50cyBpZiBhIHRyYW5zbGF0ZWQgb25lIGV4aXN0cyBtYXRjaGluZyB0aGUgc2FtZSBlcmFzXG4gICAqIEBwYXJhbSBkb2N1bWVudHNcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW4gY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgc3RhdGljIGZpbHRlckFsbENvQ0lEIChkb2N1bWVudHMsIGxhbmdGYWxsYmFjaykge1xuICAgIGlmICghbGFuZ0ZhbGxiYWNrKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnRzXG4gICAgfVxuICAgIGNvbnN0IGJlc3RNYXRjaERvY3VtZW50cyA9IG5ldyBNYXAoKVxuICAgIGZvciAoY29uc3QgZG9jIG9mIGRvY3VtZW50cykge1xuICAgICAgY29uc3QgZG9jQ29DSUQgPSBkb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8uaWRcbiAgICAgIGlmIChkb2NDb0NJRCkge1xuICAgICAgICBjb25zdCBkb2NFcmFzID0gT2JqZWN0LmVudHJpZXMoZG9jLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LmVyYXMgPz8ge30pLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pLnNvcnQoKS5qb2luKCcvJylcbiAgICAgICAgbGV0IGRvY1ByaW9yaXR5ID0gcGFyc2VJbnQoZG9jLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LnByaW9yaXR5ID8/IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSLCAxMClcbiAgICAgICAgZG9jUHJpb3JpdHkgPSBpc05hTihkb2NQcmlvcml0eSkgPyBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiA6IGRvY1ByaW9yaXR5XG4gICAgICAgIGNvbnN0IGtleSA9IGRvY0NvQ0lEICsgJy8nICsgZG9jRXJhcyArICcvJyArIChpc05hTihkb2NQcmlvcml0eSkgPyBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiA6IGRvY1ByaW9yaXR5KVxuXG4gICAgICAgIGNvbnN0IGN1cnJlbnREb2MgPSBiZXN0TWF0Y2hEb2N1bWVudHMuZ2V0KGtleSlcbiAgICAgICAgaWYgKHR5cGVvZiBjdXJyZW50RG9jID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGJlc3RNYXRjaERvY3VtZW50cy5zZXQoa2V5LCBkb2MpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRvY0xhbmcgPSBkb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ubGFuZyA/PyAnZW4nXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nTGFuZyA9IGN1cnJlbnREb2M/LmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LmxhbmcgPz8gJ2VuJ1xuICAgICAgICBpZiAoZXhpc3RpbmdMYW5nID09PSAnZW4nICYmIGV4aXN0aW5nTGFuZyAhPT0gZG9jTGFuZykge1xuICAgICAgICAgIGJlc3RNYXRjaERvY3VtZW50cy5zZXQoa2V5LCBkb2MpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFsuLi5iZXN0TWF0Y2hEb2N1bWVudHMudmFsdWVzKCldXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBhbGwgZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBDb0NJRCByZWdleCwgbGFuZ3VhZ2UsIGFuZCBlcmEgZnJvbSB0aGUgd29ybGQuXG4gICAqIFRoZSBkb2N1bWVudCBsaXN0IGlzIHNvcnRlZCB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IGZpcnN0LlxuICAgKiBAcGFyYW0gY29jaWRSZWdFeHAgcmVnZXggdXNlZCBvbiB0aGUgQ29DSURcbiAgICogQHBhcmFtIHR5cGUgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHdhbnRlZCBDb0NJRCwgZm9yIGV4YW1wbGUgJ2knLCAnYScsICdqZSdcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHByb2dyZXNzQmFyIElmIGdyZWF0ZXIgdGhhbiB6ZXJvIHNob3cgcGVyY2VudGFnZVxuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRvY3VtZW50c0Zyb21Xb3JsZCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgcHJvZ3Jlc3NCYXIgPSAwIH0gPSB7fSkge1xuICAgIGlmICghY29jaWRSZWdFeHApIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBpZiAobGFuZyA9PT0gJycpIHtcbiAgICAgIGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIH1cbiAgICBpZiAoZXJhID09PSB0cnVlKSB7XG4gICAgICBlcmEgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpXG4gICAgfVxuXG4gICAgaWYgKHByb2dyZXNzQmFyID4gMCkge1xuICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IE1hdGguZmxvb3IoMTAwIC8gcHJvZ3Jlc3NCYXIpIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZ2FtZVByb3BlcnR5ID0gQ29DSUQuZ2V0R2FtZVByb3BlcnR5KGAke3R5cGV9Li5gKVxuXG4gICAgY29uc3QgY2FuZGlkYXRlRG9jdW1lbnRzID0gZ2FtZVtnYW1lUHJvcGVydHldPy5maWx0ZXIoKGQpID0+IHtcbiAgICAgIGNvbnN0IGNvY2lkRmxhZyA9IGQuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKVxuICAgICAgaWYgKHR5cGVvZiBjb2NpZEZsYWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgY29uc3QgZXJhcyA9IChjb2NpZEZsYWcuZXJhcyA/PyBbXSlcbiAgICAgIGNvbnN0IG1hdGNoaW5nRXJhcyA9IChlcmEgPT09IGZhbHNlIHx8IE9iamVjdC5lbnRyaWVzKGVyYXMpLmxlbmd0aCA9PT0gMCB8fCAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGVyYXMsIGVyYSkgJiYgZXJhc1tlcmFdKSlcbiAgICAgIHJldHVybiBjb2NpZFJlZ0V4cC50ZXN0KGNvY2lkRmxhZy5pZCkgJiYgW2xhbmcsIChsYW5nRmFsbGJhY2sgPyAnZW4nIDogJy0nKV0uaW5jbHVkZXMoY29jaWRGbGFnLmxhbmcpICYmIG1hdGNoaW5nRXJhc1xuICAgIH0pXG5cbiAgICBpZiAoY2FuZGlkYXRlRG9jdW1lbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIHJldHVybiBjYW5kaWRhdGVEb2N1bWVudHMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGxpc3Qgb2YgYWxsIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgQ29DSUQgcmVnZXgsIGxhbmd1YWdlLCBhbmQgZXJhIGZyb20gdGhlIGNvbXBlbmRpdW1zLlxuICAgKiBUaGUgZG9jdW1lbnQgbGlzdCBpcyBzb3J0ZWQgd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBmaXJzdC5cbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKCdlbicsICdlcycsIC4uLilcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBwcm9ncmVzc0JhciBJZiBncmVhdGVyIHRoYW4gemVybyBzaG93IHBlcmNlbnRhZ2VcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBkb2N1bWVudHNGcm9tQ29tcGVuZGlhICh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IGZhbHNlLCBsYW5nRmFsbGJhY2sgPSB0cnVlLCBwcm9ncmVzc0JhciA9IDAgfSkge1xuICAgIGlmICghY29jaWRSZWdFeHApIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBpZiAobGFuZyA9PT0gJycpIHtcbiAgICAgIGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIH1cbiAgICBpZiAoZXJhID09PSB0cnVlKSB7XG4gICAgICBlcmEgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpXG4gICAgfVxuICAgIGNvbnN0IGVyYVRleHQgPSBDb0NJRC5lcmFUZXh0KGVyYSlcblxuICAgIGNvbnN0IGRvY3VtZW50VHlwZSA9IENvQ0lELmdldERvY3VtZW50VHlwZSh0eXBlKS5zY2hlbWEubmFtZVxuICAgIGNvbnN0IGNhbmRpZGF0ZURvY3VtZW50cyA9IFtdXG5cbiAgICBsZXQgY291bnQgPSAxXG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChwcm9ncmVzc0JhciA+IDApIHtcbiAgICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IE1hdGguZmxvb3IoY291bnQgKiAxMDAgLyBwcm9ncmVzc0JhcikgfSlcbiAgICAgICAgY291bnQrK1xuICAgICAgfVxuICAgICAgaWYgKHBhY2suZG9jdW1lbnROYW1lID09PSBkb2N1bWVudFR5cGUpIHtcbiAgICAgICAgaWYgKCFwYWNrLmluZGV4ZWQpIHtcbiAgICAgICAgICBhd2FpdCBwYWNrLmdldEluZGV4KClcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleEluc3RhbmNlcyA9IHBhY2suaW5kZXguZmlsdGVyKChpKSA9PiB7XG4gICAgICAgICAgY29uc3QgY29jaWRGbGFnID0gaS5mbGFncz8uQ29DNz8uY29jaWRGbGFnXG4gICAgICAgICAgaWYgKHR5cGVvZiBjb2NpZEZsYWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXJhcyA9IChjb2NpZEZsYWcuZXJhcyA/PyBbXSlcbiAgICAgICAgICBjb25zdCBtYXRjaGluZ0VyYXMgPSAoZXJhID09PSBmYWxzZSB8fCBPYmplY3QuZW50cmllcyhlcmFzKS5sZW5ndGggPT09IDAgfHwgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlcmFzLCBlcmEpICYmIGVyYXNbZXJhXSkpXG4gICAgICAgICAgcmV0dXJuIGNvY2lkUmVnRXhwLnRlc3QoY29jaWRGbGFnLmlkKSAmJiBbbGFuZywgKGxhbmdGYWxsYmFjayA/ICdlbicgOiAnLScpXS5pbmNsdWRlcyhjb2NpZEZsYWcubGFuZykgJiYgbWF0Y2hpbmdFcmFzXG4gICAgICAgIH0pXG4gICAgICAgIGZvciAoY29uc3QgaW5kZXggb2YgaW5kZXhJbnN0YW5jZXMpIHtcbiAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnQoaW5kZXguX2lkKVxuICAgICAgICAgIGlmICghZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLmRvY3VtZW50LW5vdC1mb3VuZCcsIHtcbiAgICAgICAgICAgICAgY29jaWQ6IGNvY2lkUmVnRXhwLFxuICAgICAgICAgICAgICBsYW5nLFxuICAgICAgICAgICAgICBlcmE6IGVyYVRleHRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKG1zZylcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb0M3IHwnLCBtc2csIGluZGV4KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FuZGlkYXRlRG9jdW1lbnRzLnB1c2goZG9jdW1lbnQpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYW5kaWRhdGVEb2N1bWVudHMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICB9XG5cbiAgLyoqXG4gICAqIFNvcnQgYSBsaXN0IG9mIGRvY3VtZW50IG9uIENvQ0lEIHByaW9yaXR5IC0gdGhlIGhpZ2hlc3QgZmlyc3QuXG4gICAqIEBleGFtcGxlXG4gICAqIGFMaXN0T2ZEb2N1bWVudHMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICAgKi9cbiAgc3RhdGljIGNvbXBhcmVDb0NJRFByaW8gKGEsIGIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgYi5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5wcmlvcml0eSAtXG4gICAgICBhLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LnByaW9yaXR5XG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgdGhlIGZpcnN0IHBhcnQgb2YgYSBDb0NJRCB0byB3aGF0IHRob3NlIGRvY3VtZW50cyBhcmUgY2FsbGVkIGluIHRoZSBgZ2FtZWAgb2JqZWN0LlxuICAgKiBAcGFyYW0gY29jaWQgYSBzaW5nbGUgY29jaWRcbiAgICovXG4gIHN0YXRpYyBnZXRHYW1lUHJvcGVydHkgKGNvY2lkKSB7XG4gICAgY29uc3QgdHlwZSA9IGNvY2lkLnNwbGl0KCcuJylbMF1cbiAgICBjb25zdCBnYW1lUHJvcGVydHkgPSBDb0NJRC5nYW1lUHJvcGVydHlMb29rdXBbdHlwZV1cbiAgICBpZiAoIWdhbWVQcm9wZXJ0eSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLmluY29ycmVjdC50eXBlJykpXG4gICAgICBjb25zb2xlLmxvZygnQ29DNyB8ICcsIGNvY2lkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAgICB9XG4gICAgcmV0dXJuIGdhbWVQcm9wZXJ0eVxuICB9XG5cbiAgc3RhdGljIGdldCBnYW1lUHJvcGVydHlMb29rdXAgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhOiAnYWN0b3JzJyxcbiAgICAgIGM6ICdjYXJkcycsXG4gICAgICBpOiAnaXRlbXMnLFxuICAgICAgamU6ICdqb3VybmFsJyxcbiAgICAgIG06ICdtYWNyb3MnLFxuICAgICAgcDogJ3BsYXlsaXN0cycsXG4gICAgICBydDogJ3RhYmxlcycsXG4gICAgICBzOiAnc2NlbmVzJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIHRoZSBmaXJzdCBwYXJ0IG9mIGEgQ29DSUQgdG8gd2hhdCB0aG9zZSBkb2N1bWVudHMgYXJlIGNhbGxlZCBpbiB0aGUgYGdhbWVgIG9iamVjdC5cbiAgICogQHBhcmFtIGNvY2lkIGEgc2luZ2xlIGNvY2lkXG4gICAqL1xuICBzdGF0aWMgZ2V0RG9jdW1lbnRUeXBlIChjb2NpZCkge1xuICAgIGNvbnN0IHR5cGUgPSBjb2NpZC5zcGxpdCgnLicpWzBdXG4gICAgY29uc3QgZG9jdW1lbnRUeXBlID0gQ29DSUQuZG9jdW1lbnROYW1lTG9va3VwW3R5cGVdXG4gICAgaWYgKCFkb2N1bWVudFR5cGUpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci5pbmNvcnJlY3QudHlwZScpKVxuICAgICAgY29uc29sZS5sb2coJ0NvQzcgfCAnLCBjb2NpZClcbiAgICAgIHRocm93IG5ldyBFcnJvcigpXG4gICAgfVxuICAgIHJldHVybiBkb2N1bWVudFR5cGVcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZG9jdW1lbnROYW1lTG9va3VwICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYTogQWN0b3IsXG4gICAgICBjOiBDYXJkLFxuICAgICAgaTogSXRlbSxcbiAgICAgIGplOiBKb3VybmFsRW50cnksXG4gICAgICBtOiBNYWNybyxcbiAgICAgIHA6IFBsYXlsaXN0LFxuICAgICAgcnQ6IFJvbGxUYWJsZSxcbiAgICAgIHM6IFNjZW5lXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmltcG9ydCB7IGNvbmZpZ3VyZURvY3VtZW50cyB9IGZyb20gJy4uL3NjcmlwdHMvY29uZmlndXJlLWRvY3VtZW50cy5qcydcbmltcG9ydCB7IHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzIH0gZnJvbSAnLi4vc2NyaXB0cy9sb2FkLXRlbXBsYXRlcy5qcydcbmltcG9ydCB7IHJlZ2lzdGVyU2V0dGluZ3MgfSBmcm9tICcuLi9zY3JpcHRzL3JlZ2lzdGVyLXNldHRpbmdzLmpzJ1xuaW1wb3J0IHsgcmVnaXN0ZXJTaGVldHMgfSBmcm9tICcuLi9zY3JpcHRzL3JlZ2lzdGVyLXNoZWV0cy5qcydcbmltcG9ydCB7IGhhbmRsZWJhcnNIZWxwZXIgfSBmcm9tICcuLi9zY3JpcHRzL2hhbmRsZWJhcnMtaGVscGVyLmpzJ1xuaW1wb3J0IHsgY29tcGVuZGl1bUZpbHRlciB9IGZyb20gJy4uL3NjcmlwdHMvY29tcGVuZGl1bS1maWx0ZXIuanMnXG5pbXBvcnQgeyBDb0NJRCB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuLi9hcHBzL2NvYzctbGluay5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uY2UoJ2luaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uZmlndXJlRG9jdW1lbnRzKClcbiAgICBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcygpXG4gICAgcmVnaXN0ZXJTZXR0aW5ncygpXG4gICAgcmVnaXN0ZXJTaGVldHMoKVxuICAgIGhhbmRsZWJhcnNIZWxwZXIoKVxuICAgIGNvbXBlbmRpdW1GaWx0ZXIoKVxuICAgIENvQ0lELmluaXQoKVxuICAgIENvQzdMaW5rLmluaXQoKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRyAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Qm9vayB9IGZyb20gJy4uL2l0ZW1zL2Jvb2svZGF0YS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdTcGVsbCB9IGZyb20gJy4uL2l0ZW1zL3NwZWxsL2RhdGEuanMnXG5pbXBvcnQgeyBDb0M3Q2hhc2UgfSBmcm9tICcuLi9pdGVtcy9jaGFzZS9kYXRhLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENvQzdTa2lsbCB9IGZyb20gJy4uL2l0ZW1zL3NraWxsL2RhdGEuanMnXG5pbXBvcnQgeyBDb0M3VmVoaWNsZSB9IGZyb20gJy4uL2FjdG9ycy92ZWhpY2xlL2RhdGEuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVEb2N1bWVudHMgKCkge1xuICBDT05GSUcuQWN0aXZlRWZmZWN0LmRvY3VtZW50Q2xhc3MgPSBDb0M3QWN0aXZlRWZmZWN0XG4gIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzID0gQ29DQWN0b3JcbiAgQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3NlcyA9IHtcbiAgICB2ZWhpY2xlOiBDb0M3VmVoaWNsZVxuICB9XG4gIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPSBDb0M3SXRlbVxuICBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMgPSB7XG4gICAgYm9vazogQ29DN0Jvb2ssXG4gICAgc3BlbGw6IENvQzdTcGVsbCxcbiAgICBjaGFzZTogQ29DN0NoYXNlLFxuICAgIHNraWxsOiBDb0M3U2tpbGxcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGxvYWRUZW1wbGF0ZXMgKi9cblxuLyoqXG4gKiBEZWZpbmUgYSBzZXQgb2YgdGVtcGxhdGUgcGF0aHMgdG8gcHJlLWxvYWRcbiAqIFByZS1sb2FkZWQgdGVtcGxhdGVzIGFyZSBjb21waWxlZCBhbmQgY2FjaGVkIGZvciBmYXN0IGFjY2VzcyB3aGVuIHJlbmRlcmluZ1xuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGNvbnN0IHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICAvKiogRGVmaW5lIHRlbXBsYXRlIHBhdGhzIHRvIGxvYWQgKi9cbiAgY29uc3QgdGVtcGxhdGVQYXRocyA9IFtcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvbnBjLXNraWxscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvbnBjLWNvbWJhdC5odG1sJyxcblxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1pbnZlbnRvcnkuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWludmVudG9yeS1pdGVtcy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItYmFja2dyb3VuZC5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jb21tb24vYWN0aXZlLWVmZmVjdHMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItbXl0aG9zLWVub3VudGVycy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1rZWVwZXItbXl0aG9zLWVub3VudGVycy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1za2lsbHMtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2NoYXJhY3Rlci1kZXZlbG9wbWVudC12Mi5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvZGV2ZWxvcG1lbnQtY29udHJvbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL3ZpdGFscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvY29tYmF0Lmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9jaGFyYWN0ZXItc2hlZXQtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL2NoYXJhY3Rlci9zdW1tYXJ5Lmh0bWwnLFxuXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9kZXRhaWxzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL2RldGFpbHMuaHRtbCcsXG5cbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvaW50cm9kdWN0aW9uLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2NvbmZpZ3VyYXRpb24uaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2VsZWN0LXNldHVwLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NlbGVjdC1hcmNoZXR5cGUuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2VsZWN0LW9jY3VwYXRpb24uaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LWNoYXJhY3RlcmlzdGljcy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZXQtYXR0cmlidXRlcy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC92aWV3LWF0dHJpYnV0ZXMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LWludmVzdGlnYXRvci5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZXQtb2NjdXBhdGlvbi1za2lsbHMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvdG9nZ2xlLXNraWxsLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NldC1hcmNoZXR5cGUtc2tpbGxzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3BvaW50cy1za2lsbHMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvYmFja3N0b3J5LmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2NyZWF0ZS5oYnMnXG4gIF1cblxuICAvKiogTG9hZCB0aGUgdGVtcGxhdGUgcGFydHMgKi9cbiAgcmV0dXJuIGxvYWRUZW1wbGF0ZXModGVtcGxhdGVQYXRocylcbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIENPTlNULCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdEZWNhZGVyRGllIH0gZnJvbSAnLi4vYXBwcy9kZWNhZGVyLWRpZS5qcydcbmltcG9ydCB7IENvQzdEZWNhZGVyRGllT3RoZXIgfSBmcm9tICcuLi9hcHBzL2RlY2FkZXItZGllLW90aGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0dhbWVSdWxlU2V0dGluZ3MgfSBmcm9tICcuL2dhbWUtcnVsZXMuanMnXG5pbXBvcnQgeyBDb0M3RGlyZWN0b3J5UGlja2VyIH0gZnJvbSAnLi9jb2M3LWRpcmVjdG9yeS1waWNrZXIuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNldHRpbmdzICgpIHtcbiAgLyoqXG4gICAqIFJ1bGVzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyTWVudSgnQ29DNycsICdnYW1lUnVsZXMnLCB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUnVsZXMuTmFtZScsXG4gICAgbGFiZWw6ICdDb0M3LlNldHRpbmdzLlJ1bGVzLkxhYmVsJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5SdWxlcy5IaW50JyxcbiAgICBpY29uOiAnZmFzIGZhLWJvb2snLFxuICAgIHR5cGU6IENvQzdHYW1lUnVsZVNldHRpbmdzLFxuICAgIHJlc3RyaWN0ZWQ6IHRydWVcbiAgfSlcbiAgQ29DN0dhbWVSdWxlU2V0dGluZ3MucmVnaXN0ZXJTZXR0aW5ncygpXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd1c2VDb250ZXh0TWVudXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlVzZUNvbnRleHRNZW51cycsXG4gICAgaGludDogJ1NFVFRJTkdTLlVzZUNvbnRleHRNZW51c0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaG9sZVVwbG9hZERpcmVjdG9yeScsIHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5EaG9sZVVwbG9hZC5EaXJlY3RvcnkuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuRGhvbGVVcGxvYWQuRGlyZWN0b3J5LkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBDb0M3RGlyZWN0b3J5UGlja2VyLkRlZmF1bHREaXJlY3RvcnksXG4gICAgZGVmYXVsdDogJ1tkYXRhXSB3b3JsZHMvJyArIGdhbWUud29ybGQuaWQgKyAnL2Rob2xlLWltYWdlcydcbiAgfSlcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3dvcmxkRXJhJywge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLldvcmxkRXJhLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLldvcmxkRXJhLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnc3RhbmRhcmQnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiBDT0M3LmVyYXMsXG4gICAgb25DaGFuZ2U6ICgpID0+IHtcbiAgICAgIHVpLnBsYXllcnMucmVuZGVyKHRydWUpXG4gICAgfVxuICB9KVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZHJvcENvQ0lEJywge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICcnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICAnJzogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELlByb21wdCcsXG4gICAgICBZOiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuVXNlQ29DSUQnLFxuICAgICAgTjogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELklnbm9yZUNvQ0lEJ1xuICAgIH1cbiAgfSlcblxuICAvKipcbiAgICogSW5pdGlhdGl2ZVxuICAgKi9cbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5SW5pdERpY2VzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdERpY2VzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuZGlzcGxheUluaXREaWNlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5SW5pdEFzVGV4dCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheUluaXRBc1RleHQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdEFzVGV4dEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogUm9sbCBjdXN0b21pc2Fpb25zXG4gICAqL1xuICAvKiogU3RhbmRieSByb2xscyBtYWRlIGJ5IEdNIGZyb20gcGxheWVyIHNoZWV0ICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU3RhbmJ5R01Sb2xscycsXG4gICAgaGludDogJ1NFVFRJTkdTLlN0YW5ieUdNUm9sbHNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBBbGxvdyB1c2FnZSBvZiBhIGZsYXQgZGljZSBtb2RpZmllciAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FsbG93RmxhdERpY2VNb2RpZmllcicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0RGljZU1vZGlmaWVyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuQWxsb3dGbGF0RGljZU1vZGlmaWVySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIEFsbG93IHVzYWdlIG9mIGEgZmxhdCB0aHJlc2hvbGQgbW9kaWZpZXIgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5BbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGVmYXVsdERpZmZpY3VsdHknLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EZWZhdWx0RGlmZmljdWx0eUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAncmVndWxhcicsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIHJlZ3VsYXI6ICdTRVRUSU5HUy5DaGVja0RpZmZpY3VsdHlSZWd1bGFyJyxcbiAgICAgIHVua25vd246ICdTRVRUSU5HUy5DaGVja0RpZmZpY3VsdHlVbmtub3duJ1xuICAgIH1cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzZWxmUm9sbFdoaXNwZXJUYXJnZXQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNlbGZSb2xsV2hpc3BlclRhcmdldCcsXG4gICAgaGludDogJ1NFVFRJTkdTLlNlbGZSb2xsV2hpc3BlclRhcmdldEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnZXZlcnlvbmUnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBub2JvZHk6ICdTRVRUSU5HUy5Eb05vdEFkdmlzZScsXG4gICAgICBvd25lcnM6ICdTRVRUSU5HUy5BZHZpc2VPd25lcnNPbmx5JyxcbiAgICAgIGV2ZXJ5b25lOiAnU0VUVElOR1MuQWR2aXNlQWxsUGxheWVyJ1xuICAgIH1cbiAgfSlcblxuICAvKipcbiAgICogQ2hhdCBDYXJkc1xuICAgKi9cbiAgLyoqIFRydXN0ZWQgcGxheWVycyB3aWxsIGJlIGFsbG93ZWQgdG8gbW9kaWZ5IGNoYXQgY2FyZHMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuVHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5UcnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBUcnVzdGVkIHBsYXllcnMgd2lsbCBiZSBhbGxvd2VkIHRvIHNlZSBjaGF0IGNhcmRzIHByaXZhdGUgc2VjdGlvbnMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0cnVzdGVkQ2FuU2VlQ2hhdENhcmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlRydXN0ZWRDYW5TZWVDaGF0Q2FyZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLlRydXN0ZWRDYW5TZWVDaGF0Q2FyZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBTZXQgdGhlIG5lZWQgdG8gZGlzcGxheSBhY3RvciBpbWFnZSBvbiBjaGF0IGNhcmRzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5QWN0b3JPbkNhcmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNwbGF5QWN0b3JPbkNhcmRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsJyxcbiAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlSZXN1bHRUeXBlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5UmVzdWx0VHlwZScsXG4gICAgc2NvcGU6ICdjbGllbnQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBTZXQgdGhlIHVzZSBvZiB0b2tlbiBpbnN0ZWFkIG9mIHBvcnRyYWl0cyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3VzZVRva2VuJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Vc2VUb2tlbicsXG4gICAgaGludDogJ1NFVFRJTkdTLlVzZVRva2VuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogU2NlbmUgU2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkVuYWJsZVN0YXR1c0ljb25zJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRW5hYmxlU3RhdHVzSWNvbnNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZ3JpZFNwYWNlcycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuUmVzdHJpY3RHcmlkU3BhY2VzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuUmVzdHJpY3RHcmlkU3BhY2VzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXN0YW5jZUVsZXZhdGlvbicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQ2hlY2tFbGV2YXRpb24nLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5DaGVja0VsZXZhdGlvbkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXN0YW5jZVRoZWF0cmVPZlRoZU1pbmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNjZW5lRGlzdGFuY2VOb3RDYWxjdWFsdGVkTm9FcnJvcicsXG4gICAgaGludDogJ1NFVFRJTkdTLlNjZW5lRGlzdGFuY2VOb3RDYWxjdWFsdGVkTm9FcnJvckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG5cbiAgLyoqXG4gICAqIEdhbWUgQXJ0d29yayBTZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdvdmVycmlkZUdhbWVBcnR3b3JrJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PdmVycmlkZUdhbWVBcnR3b3JrJyxcbiAgICBoaW50OiAnU0VUVElOR1MuT3ZlcnJpZGVHYW1lQXJ0d29ya0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvdmVycmlkZUdhbWVBcnR3b3JrJykpIHtcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0UGF1c2VJbWFnZScsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0UGF1c2VJbWFnZUhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90aW1lLXRyYXAuc3ZnJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRQYXVzZVRleHQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0UGF1c2VUZXh0JyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRQYXVzZVRleHRIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ1RoZSBCbGluZCBJZGlvdCBHb2QgaXMgZHJlYW1pbmcuLi4nLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBTaGVldCBzZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5UGxheWVyTmFtZU9uU2hlZXQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRpc3BsYXlQbGF5ZXJOYW1lT25TaGVldCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0b29sVGlwRGVsYXknLCB7XG4gICAgbmFtZTogJ0NvQzcudG9vbFRpcERlbGF5JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogMjAwMCxcbiAgICB0eXBlOiBOdW1iZXJcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzaG93SWNvbnNPbmx5Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5zaG93SWNvbnNPbmx5JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogQWxsb3cgcGxheWVyIHRvIHVubG9jayB0aGUgc2hlZXQgb3V0c2lkZSBvZiBjcmVhdGlvbiBtb2RlICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5QbGF5ZXJVbmxvY2tTaGVldE1vZGUnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnYWx3YXlzJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgYWx3YXlzOiAnU0VUVElOR1MuQWx3YXlzRWRpdGFibGUnLFxuICAgICAgY3JlYXRpb246ICdTRVRUSU5HUy5DcmVhdGlvbk1vZGVPbmx5JyxcbiAgICAgIG5ldmVyOiAnU0VUVElOR1MuTmV2ZXJFZGl0YWJsZSdcbiAgICB9XG4gIH0pXG4gIC8qKiBBbGxvdyBwbGF5ZXIgdG8gbW9kaWZ5IHN0YXR1cyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N0YXR1c1BsYXllckVkaXRhYmxlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TdGF0dXNQbGF5ZXJFZGl0YWJsZScsXG4gICAgaGludDogJ1NFVFRJTkdTLlN0YXR1c1BsYXllckVkaXRhYmxlSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PbmVCbG9ja0JhY2tTdG9yeScsXG4gICAgaGludDogJ1NFVFRJTkdTLk9uZUJsb2NrQmFja1N0b3J5SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdvdmVycmlkZVNoZWV0QXJ0d29yaycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3ZlcnJpZGVTaGVldEFydHdvcmsnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PdmVycmlkZVNoZWV0QXJ0d29ya0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvdmVycmlkZVNoZWV0QXJ0d29yaycpKSB7XG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmQnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmRIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoJy4vYXNzZXRzL2ltYWdlcy9iYWNrZ3JvdW5kLndlYnAnKSA0IHJlcGVhdFwiLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3NsaWNlJyxcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGNob2ljZXM6IHtcbiAgICAgICAgc2xpY2U6ICdTRVRUSU5HUy5CYWNrZ3JvdW5kU2xpY2UnLFxuICAgICAgICBhdXRvOiAnU0VUVElOR1MuQmFja2dyb3VuZEF1dG8nLFxuICAgICAgICBjb250YWluOiAnU0VUVElOR1MuQmFja2dyb3VuZENvbnRhaW4nLFxuICAgICAgICBjb3ZlcjogJ1NFVFRJTkdTLkJhY2tncm91bmRDb3ZlcidcbiAgICAgIH1cbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmQud2VicCcpXCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya1NoZWV0SW1hZ2UnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtTaGVldEltYWdlSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IFwidXJsKCcuL2Fzc2V0cy9pbWFnZXMvdGVudGFjbGVzLndlYnAnKVwiLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtGcm9udENvbG9yJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtGcm9udENvbG9yJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrRnJvbnRDb2xvckhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAncmdiYSg0Myw1NSw4MywxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0JhY2tncm91bmRDb2xvcicsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrQmFja2dyb3VuZENvbG9yJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrQmFja2dyb3VuZENvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDEwMywxMSwxMSwxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0ludGVyYWN0aXZlQ29sb3InLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0ludGVyYWN0aXZlQ29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtJbnRlcmFjdGl2ZUNvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDEwMywxMSwxMSwxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtGaXhlZFNraWxsTGVuZ3RoSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgICB0eXBlOiBCb29sZWFuXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrTWFpbkZvbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnRCb2xkJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udEJvbGQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udFNpemUnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAxNixcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIG9uQ2hhbmdlOiBzaXplID0+IF9zZXRSb290Rm9udFNpemUoc2l6ZSlcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gX3NldFJvb3RGb250U2l6ZSAoc2l6ZSkge1xuICAgICAgJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScsIHNpemUpXG4gICAgICB1aS5zaWRlYmFyLnJlbmRlcih0cnVlKVxuICAgICAgZm9yIChjb25zdCBbLCB3XSBvZiBPYmplY3QuZW50cmllcyh1aS53aW5kb3dzKSkge1xuICAgICAgICB3LnJlbmRlcih0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXZWFwb25zXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3JlZ2FyZFVzZVBlclJvdW5kJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNyZWdhcmRVc2VQZXJSb3VuZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLkRpc3JlZ2FyZFVzZVBlclJvdW5kSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNyZWdhcmRBbW1vJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNyZWdhcmRBbW1vJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGlzcmVnYXJkQW1tb0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG5cbiAgLyoqXG4gICAqIENoYXNlc1xuICAgKi9cbiAgLy8gTU9WRUQgVE8gQ0hBU1NFIElORElWSURVQUwgU0VUVElOR1xuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2NoYXNlU2hvd1Rva2VuTW92ZW1lbnQnLCB7XG4gIC8vICAgbmFtZTogJ1NFVFRJTkdTLkNoYXNlU2hvd1Rva2VuTW92ZW1lbnQnLFxuICAvLyAgIGhpbnQ6ICdTRVRUSU5HUy5DaGFzZVNob3dUb2tlbk1vdmVtZW50SGludCcsXG4gIC8vICAgc2NvcGU6ICd3b3JsZCcsXG4gIC8vICAgY29uZmlnOiB0cnVlLFxuICAvLyAgIGRlZmF1bHQ6IHRydWUsXG4gIC8vICAgdHlwZTogQm9vbGVhblxuICAvLyB9KVxuXG4gIC8qKlxuICAgKiBEaWNlIFNvIE5pY2VcbiAgICovXG4gIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzeW5jRGljZTNkJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLlN5bmNEaWNlM0QnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLlN5bmNEaWNlM0RIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgIHR5cGU6IEJvb2xlYW5cbiAgICB9KVxuICAgIGNvbnN0IFt2ZXJzaW9uXSA9IGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy52ZXJzaW9uLnNwbGl0KCcuJylcbiAgICBpZiAoIWlzTmFOKE51bWJlcih2ZXJzaW9uKSkgJiYgTnVtYmVyKHZlcnNpb24pID49IDMpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndGVuRGllQm9udXMnLCB7XG4gICAgICAgIG5hbWU6ICdTRVRUSU5HUy5UZW5EaWVCb251cycsXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5UZW5EaWVCb251c0hpbnQnLFxuICAgICAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ2Jyb256ZScsXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgfSlcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndGVuRGllUGVuYWx0eScsIHtcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLlRlbkRpZVBlbmFsdHknLFxuICAgICAgICBoaW50OiAnU0VUVElOR1MuVGVuRGllUGVuYWx0eUhpbnQnLFxuICAgICAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ2Jsb29kbW9vbicsXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGV2ZWxvcGVyIGFuZCBkZWJ1ZyBzZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkZWJ1Z21vZGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRlYnVnTW9kZScsXG4gICAgaGludDogJ1NFVFRJTkdTLkRlYnVnTW9kZUhpbnQnLFxuICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2V4cGVyaW1lbnRhbEZlYXR1cmVzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TaG93RXhwZXJpbWVudGFsRmVhdHVyZXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5TaG93RXhwZXJpbWVudGFsRmVhdHVyZXNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICAvKipcbiAgICogT3RoZXIgc2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScsIHtcbiAgICBuYW1lOiAnSGlkZGVuIGRldiBtZW51JyxcbiAgICBoaW50OiAnVXNlIGF0IHlvdXIgb3duIHJpc2snLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcsIHtcbiAgICBuYW1lOiAnRGV2IHBoYXNlZCBhbGxvd2VkJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgLyoqIEZlYXQ6IHdlbGNvbWUgbWVzc2FnZSAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dXZWxjb21lTWVzc2FnZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1Muc2hvd1dlbGNvbWVNZXNzYWdlJyxcbiAgICBoaW50OiAnU0VUVElOR1Muc2hvd1dlbGNvbWVNZXNzYWdlJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnLCB7XG4gICAgbmFtZTogJ0NoYXIgY3JlYXRpb24gYWxsb3dlZCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIHtcbiAgICBuYW1lOiAnU3lzdGVtIHVwZGF0ZSB2ZXJzaW9uJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnMCdcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzeXN0ZW1VcGRhdGVkTW9kdWxlVmVyc2lvbicsIHtcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IHt9XG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAneHBFbmFibGVkJywge1xuICAgIG5hbWU6ICdFbmFibGUgWFAgZ2FpbicsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzaG93SW5zdHJ1Y3Rpb25zJywge1xuICAgIG5hbWU6ICdTaG93IGNoYW5nZWxvZy9pbnN0cnVjdGlvbnMnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICcwJ1xuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFNldHVwJywge1xuICAgIG5hbWU6ICdGb3JjZSBzcGVjaWZpYyBzZXR1cCBDb0MgSUQgZm9yIEludmVzdGlnYXRvciBXaXphcmQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICcnXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknLCB7XG4gICAgbmFtZTogJ051bWJlciBvZiBpbnZlc3RpZ2F0b3JzIGEgc2luZ2xlIHVzZXIgd2l0aG91dCBjcmVhdGUgYWN0b3IgcmlnaHRzIGNhbiBvd24nLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogTnVtYmVyLFxuICAgIGRlZmF1bHQ6IDBcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRPd25lcnNoaXAnLCB7XG4gICAgbmFtZTogJ0RlZmF1bHQgcGVybWlzc2lvbnMgZm9yIG5vbiBvd25lciBwbGF5ZXJzJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRSZXJvbGxzJywge1xuICAgIG5hbWU6ICdBbGxvdyBwbGF5ZXJzIHRvIHJlcm9sbCBjaGFyYWN0ZXJpc3RpY3MnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFBvaW50QnV5Jywge1xuICAgIG5hbWU6ICdGb3JjZSBwb2ludCBidXkgaW5zdGVhZCBvZiBzZXR1cCBjaG9pY2UnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1aWNrRmlyZScsIHtcbiAgICBuYW1lOiAnUXVpY2sgZmlyZSBzZXR1cCB2YWx1ZXMnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQXJyYXksXG4gICAgZGVmYXVsdDogW11cbiAgfSlcbiAgLyoqIFNldCBhbiBpbml0aWF0aXZlIGZvcm11bGEgZm9yIHRoZSBzeXN0ZW0gKi9cbiAgQ09ORklHLkNvbWJhdC5pbml0aWF0aXZlID0ge1xuICAgIGZvcm11bGE6ICdAY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZScsXG4gICAgZGVjaW1hbHM6IDRcbiAgfVxuICBDT05GSUcuZGVidWcuaG9va3MgPSAhIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlYnVnbW9kZScpXG4gIENPTkZJRy5EaWNlLnRlcm1zLnQgPSBDb0M3RGVjYWRlckRpZVxuICBDT05GSUcuRGljZS50ZXJtcy5vID0gQ29DN0RlY2FkZXJEaWVPdGhlclxufVxuIiwiLyogZ2xvYmFsIEFjdG9ycywgQWN0b3JTaGVldCwgSXRlbXMsIEl0ZW1TaGVldCwgSm91cm5hbCwgSm91cm5hbFNoZWV0LCBNYWNyb0NvbmZpZywgTWFjcm9zLCBQbGF5bGlzdENvbmZpZywgUGxheWxpc3RzLCBSb2xsVGFibGVzLCBSb2xsVGFibGVDb25maWcsIFNjZW5lcywgU2NlbmVDb25maWcgKi9cbmltcG9ydCB7IENvQzdBcmNoZXR5cGVTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9hcmNoZXR5cGUuanMnXG5pbXBvcnQgeyBDb0M3Qm9va1NoZWV0IH0gZnJvbSAnLi4vaXRlbXMvYm9vay9zaGVldC5qcydcbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY2hhcmFjdGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRhaW5lclNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9jb250YWluZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhc2VTaGVldCB9IGZyb20gJy4uL2l0ZW1zL2NoYXNlL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NyZWF0dXJlU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldFYyIH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXRWMi5qcydcbmltcG9ydCB7IENvQzdKb3VybmFsU2hlZXQgfSBmcm9tICcuLi9zaGVldHMvY29jNy1qb3VybmFsLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN01hY3JvQ29uZmlnIH0gZnJvbSAnLi4vc2hlZXRzL2NvYzctbWFjcm8tY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN05QQ1NoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3T2NjdXBhdGlvblNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMnXG5pbXBvcnQgeyBDb0M3UGxheWxpc3RDb25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1wbGF5bGlzdC1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Um9sbFRhYmxlQ29uZmlnIH0gZnJvbSAnLi4vc2hlZXRzL2NvYzctcm9sbC10YWJsZS1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3U2NlbmVDb25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1zY2VuZS1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3U2V0dXBTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9zZXR1cC5qcydcbmltcG9ydCB7IENvQzdTa2lsbFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3NraWxsLmpzJ1xuaW1wb3J0IHsgQ29DN1NwZWxsU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zcGVsbC9zaGVldC5qcydcbmltcG9ydCB7IENvQzdTdGF0dXNTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9zdGF0dXMuanMnXG5pbXBvcnQgeyBDb0M3VGFsZW50U2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvdGFsZW50LmpzJ1xuaW1wb3J0IHsgQ29DN1ZlaGljbGVTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvdmVoaWNsZS5qcydcbmltcG9ydCB7IENvQzdXZWFwb25TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy93ZWFwb24tc2hlZXQuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNoZWV0cyAoKSB7XG4gIEFjdG9ycy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBBY3RvclNoZWV0KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdOUENTaGVldCwge1xuICAgIHR5cGVzOiBbJ25wYyddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1ZlaGljbGVTaGVldCwge1xuICAgIHR5cGVzOiBbJ3ZlaGljbGUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDcmVhdHVyZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY3JlYXR1cmUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDb250YWluZXJTaGVldCwge1xuICAgIHR5cGVzOiBbJ2NvbnRhaW5lciddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NoYXJhY3RlclNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY2hhcmFjdGVyJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBJdGVtcy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBJdGVtU2hlZXQpXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U2tpbGxTaGVldCwge1xuICAgIHR5cGVzOiBbJ3NraWxsJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdXZWFwb25TaGVldCwge1xuICAgIHR5cGVzOiBbJ3dlYXBvbiddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Qm9va1NoZWV0LCB7XG4gICAgdHlwZXM6IFsnYm9vayddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U3BlbGxTaGVldCwge1xuICAgIHR5cGVzOiBbJ3NwZWxsJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdUYWxlbnRTaGVldCwge1xuICAgIHR5cGVzOiBbJ3RhbGVudCddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U3RhdHVzU2hlZXQsIHtcbiAgICB0eXBlczogWydzdGF0dXMnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN09jY3VwYXRpb25TaGVldCwge1xuICAgIHR5cGVzOiBbJ29jY3VwYXRpb24nXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0FyY2hldHlwZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsnYXJjaGV0eXBlJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTZXR1cFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc2V0dXAnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NoYXNlU2hlZXQsIHtcbiAgICB0eXBlczogWydjaGFzZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3SXRlbVNoZWV0LCB7IHR5cGVzOiBbJ2l0ZW0nXSB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0l0ZW1TaGVldFYyLCB7XG4gICAgdHlwZXM6IFsnaXRlbSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG5cbiAgU2NlbmVzLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIFNjZW5lQ29uZmlnKVxuICBTY2VuZXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTY2VuZUNvbmZpZywge1xuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG5cbiAgSm91cm5hbC51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBKb3VybmFsU2hlZXQpXG4gIEpvdXJuYWwucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdKb3VybmFsU2hlZXQsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIFJvbGxUYWJsZXMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgUm9sbFRhYmxlQ29uZmlnKVxuICBSb2xsVGFibGVzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Um9sbFRhYmxlQ29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBNYWNyb3MudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgTWFjcm9Db25maWcpXG4gIE1hY3Jvcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN01hY3JvQ29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBQbGF5bGlzdHMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgUGxheWxpc3RDb25maWcpXG4gIFBsYXlsaXN0cy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1BsYXlsaXN0Q29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIYW5kbGViYXJzICovXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5cbmV4cG9ydCBjb25zdCBoYW5kbGViYXJzSGVscGVyID0gZnVuY3Rpb24gKCkge1xuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdyb2xsQWN0b3JJbWcnLCBmdW5jdGlvbiAoYWN0b3JLZXkpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleShhY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9KVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUgKi9cbmV4cG9ydCBjbGFzcyBDb0M3VG9vbHRpcHMge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5Ub29sVGlwSG92ZXIgPSBudWxsXG4gICAgdGhpcy50b29sVGlwVGltZXIgPSBudWxsXG4gIH1cblxuICBkaXNwbGF5VG9vbFRpcCAodG9vbFRpcCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBib3VuZHMgPSB0aGlzLlRvb2xUaXBIb3Zlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgaWYgKCFpc05hTihib3VuZHMubGVmdCB8fCAnJykgJiYgIWlzTmFOKGJvdW5kcy50b3AgfHwgJycpKSB7XG4gICAgICAgIGxldCBsZWZ0ID0gYm91bmRzLmxlZnRcbiAgICAgICAgbGV0IHRvcCA9IGJvdW5kcy50b3BcbiAgICAgICAgY29uc3QgaGVpZ2h0VGV4dCA9ICQodGhpcy5Ub29sVGlwSG92ZXIpLm91dGVySGVpZ2h0KClcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImhlbHAtdG9vbHRpcFwiPicgKyB0b29sVGlwICsgJzwvZGl2PicpXG4gICAgICAgIGNvbnN0IHRpcCA9ICQoJyNoZWxwLXRvb2x0aXAnKVxuICAgICAgICBjb25zdCBoZWlnaHRUaXAgPSB0aXAub3V0ZXJIZWlnaHQoKVxuICAgICAgICBjb25zdCB3aWR0aFRpcCA9IHRpcC5vdXRlcldpZHRoKClcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCA8IGhlaWdodFRleHQgKiAxLjUgKyBoZWlnaHRUaXAgKyB0b3ApIHtcbiAgICAgICAgICB0b3AgPSB0b3AgLSBoZWlnaHRUaXBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b3AgPSB0b3AgKyBoZWlnaHRUZXh0ICogMS41XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgd2lkdGhUaXAgKyBsZWZ0KSB7XG4gICAgICAgICAgbGVmdCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gd2lkdGhUaXBcbiAgICAgICAgfVxuICAgICAgICB0aXAuY3NzKHtcbiAgICAgICAgICBsZWZ0OiBsZWZ0ICsgJ3B4JyxcbiAgICAgICAgICB0b3A6IHRvcCArICdweCdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0b29sVGlwTGVhdmUgKGV2ZW50KSB7XG4gICAgaWYgKGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lcilcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IG51bGxcbiAgICAgICQoJyNoZWxwLXRvb2x0aXAnKS5yZW1vdmUoKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIE11dGF0aW9uT2JzZXJ2ZXIsIFRvdXIsIHVpICovXG5sZXQgQ29DN1RvdXIgPSBjbGFzcyBpbnRlcm5hbENvQzdUb3VyIHt9XG5pZiAodHlwZW9mIFRvdXIgIT09ICd1bmRlZmluZWQnKSB7XG4gIENvQzdUb3VyID0gY2xhc3MgaW50ZXJuYWxDb0M3VG91ciBleHRlbmRzIFRvdXIge1xuICAgIGFzeW5jIHdhaXRGb3JFbGVtZW50IChzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMsIG9ic2VydmVyKSA9PiB7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcblxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBhc3luYyBfcHJlU3RlcCAoKSB7XG4gICAgICBhd2FpdCBzdXBlci5fcHJlU3RlcCgpXG5cbiAgICAgIC8vIENsb3NlIGN1cnJlbnRseSBvcGVuIGFwcGxpY2F0aW9uc1xuICAgICAgaWYgKHRoaXMuc3RlcEluZGV4ID09PSAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgYXBwIG9mIE9iamVjdC52YWx1ZXModWkud2luZG93cykpIHtcbiAgICAgICAgICBhcHAuY2xvc2UoKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMud2FpdEZvckVsZW1lbnQodGhpcy5jdXJyZW50U3RlcC5zZWxlY3RvcilcblxuICAgICAgaWYgKHR5cGVvZiB0aGlzLmN1cnJlbnRTdGVwLnNpZGViYXJUYWIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVpLnNpZGViYXIuYWN0aXZhdGVUYWIodGhpcy5jdXJyZW50U3RlcC5zaWRlYmFyVGFiKVxuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIF9wb3N0U3RlcCAoKSB7XG4gICAgICBhd2FpdCBzdXBlci5fcG9zdFN0ZXAoKVxuICAgICAgaWYgKHRoaXMuc3RlcEluZGV4IDwgMCB8fCAhdGhpcy5oYXNOZXh0KSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuY3VycmVudFN0ZXAuYWN0aW9uKSB7XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5pc1Jlc2V0dGluZykge1xuICAgICAgICB0aGlzLmlzUmVzZXR0aW5nID0gZmFsc2VcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAodGhpcy5jdXJyZW50U3RlcC5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSAnY2xpY2snOlxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5jdXJyZW50U3RlcC5zZWxlY3RvcikuY2xpY2soKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgcmVzZXQgKCkge1xuICAgICAgaWYgKHRoaXMuc3RhdHVzICE9PSAnY29tcGxldGVkJykge1xuICAgICAgICB0aGlzLmlzUmVzZXR0aW5nID0gdHJ1ZVxuICAgICAgfVxuICAgICAgYXdhaXQgc3VwZXIucmVzZXQoKVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBDb0M3VG91ciB9XG4iLCIvKiBnbG9iYWwgZm91bmRyeSAqL1xuaW1wb3J0IHsgQ29DN1RvdXIgfSBmcm9tICcuLi9hcHBzL2NvYzctdG91ci5qcydcblxuZXhwb3J0IGNsYXNzIEVuYWJsZVZhcmlhbnRSdWxlc0VuIGV4dGVuZHMgQ29DN1RvdXIge1xuICBjb25zdHJ1Y3RvciAoY29uZmlnKSB7XG4gICAgc3VwZXIoZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh7XG4gICAgICB0aXRsZTogJ0VuYWJsZSBvcHRpb25hbC92YXJpYW50IHJ1bGVzLicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0xlYXJuIGhvdyB0byBlbmFibGUgUHVscCBDdGh1bGh1IHJ1bGVzLCBvciBvdGhlciB2YXJpYW50IHJ1bGVzJyxcbiAgICAgIGNhbkJlUmVzdW1lZDogZmFsc2UsXG4gICAgICBkaXNwbGF5OiB0cnVlLFxuICAgICAgc3RlcHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ290by1zZXR0aW5ncycsXG4gICAgICAgICAgc2VsZWN0b3I6ICcudGFicz5hW2RhdGEtdGFiPVwic2V0dGluZ3NcIl0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc1RpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc0NvbnRlbnQnLFxuICAgICAgICAgIHNpZGViYXJUYWI6ICdzZXR0aW5ncydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ290by1jb25maWd1cmUnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtYWN0aW9uPVwiY29uZmlndXJlXCJdJyxcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlVGl0bGUnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZUNvbnRlbnQnLFxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdnb3RvLXN5c3RlbS1zZXR0aW5ncycsXG4gICAgICAgICAgc2VsZWN0b3I6ICdbZGF0YS10YWI9XCJzeXN0ZW1cIl0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc1RpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc0NvbnRlbnQnLFxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdnb3RvLWdhbWUtcnVsZXMnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtY2F0ZWdvcnk9XCJzeXN0ZW1cIl0gW2RhdGEta2V5PVwiQ29DNy5nYW1lUnVsZXNcIl0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzQ29udGVudCcsXG4gICAgICAgICAgYWN0aW9uOiAnY2xpY2snXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3NhdmUtZ2FtZS1ydWxlcycsXG4gICAgICAgICAgc2VsZWN0b3I6ICcjcnVsZXMtc2V0dGluZ3MgW25hbWU9c3VibWl0XScsXG4gICAgICAgICAgdGl0bGU6ICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc1RpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNDb250ZW50J1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgbG9jYWxpemF0aW9uOiB7XG4gICAgICAgICdDT0M3LlRvdXIuR290b1NldHRpbmdzVGl0bGUnOiAnR2FtZSBTZXR0aW5ncycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1NldHRpbmdzQ29udGVudCc6ICdHbyB0byB0aGUgR2FtZSBTZXR0aW5ncyB0YWInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVUaXRsZSc6ICdDb25maWd1cmUgU2V0dGluZ3MnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVDb250ZW50JzogJ0NsaWNrIG9uIHRoZSBDb25maWd1cmUgU2V0dGluZ3MgYnV0dG9uJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NUaXRsZSc6ICdTeXN0ZW0gU2V0dGluZ3MnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc0NvbnRlbnQnOiAnR28gdG8gdGhlIFN5c3RlbSBTZXR0aW5ncyB0YWInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNUaXRsZSc6ICdDb25maWd1cmUgVmFyaWFudC9PcHRpb25hbCBSdWxlcycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc0NvbnRlbnQnOiAnQ2xpY2sgb24gdGhlIENvbmZpZ3VyZSBWYXJpYW50L09wdGlvbmFsIFJ1bGVzIGJ1dHRvbicsXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc1RpdGxlJzogJ1NhdmUgcnVsZSBjaGFuZ2VzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzQ29udGVudCc6ICdPbmNlIHlvdSBoYXZlIG1hZGUgeW91ciBjaGFuZ2VzIGNsaWNrIG9uIHRoZSBTYXZlIENoYW5nZXMgYnV0dG9uJ1xuICAgICAgfVxuICAgIH0sIGNvbmZpZykpXG4gIH1cbn1cbiIsImltcG9ydCB7IEVuYWJsZVZhcmlhbnRSdWxlc0VuIH0gZnJvbSAnLi9lbmFibGUtdmFyaWFudC1ydWxlcy1lbi5qcydcblxuZXhwb3J0IGNsYXNzIEVuYWJsZVZhcmlhbnRSdWxlc0ZyIGV4dGVuZHMgRW5hYmxlVmFyaWFudFJ1bGVzRW4ge1xuICBjb25zdHJ1Y3RvciAoY29uZmlnKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdGl0bGU6ICdBY3RpdmV6IGxlcyByw6hnbGVzIG9wdGlvbm5lbGxlcy4nLFxuICAgICAgZGVzY3JpcHRpb246ICdBY3RpdmV6IGxlcyByw6hnbGVzIG9wdGlvbmVsbGVzIGV0IFB1bHAgQ3RodWxodScsXG4gICAgICBsb2NhbGl6YXRpb246IHtcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NUaXRsZSc6ICdQYXJhbcOodHJlcycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1NldHRpbmdzQ29udGVudCc6ICdPdXZyaXIgbFxcJ29uZ2xldCBcIlBhcmFtw6h0cmVzXCInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVUaXRsZSc6ICdDb25maWd1cmF0aW9uIGRlcyBvcHRpb25zJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlQ29udGVudCc6ICdDbGlxdWV6IHN1ciBcIkNvbmZpZ3VyYXRpb24gZGVzIG9wdGlvbnNcIicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzVGl0bGUnOiAnU3lzdMOobWUgZGUgamV1JyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NDb250ZW50JzogJ091dnJleiBsXFwnb25nbGV0IFwiU3lzdMOobWUgZGUgamV1XCInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNUaXRsZSc6ICdDb25maWd1cmVyIGxlcyB2YXJpYW50ZXMvcsOoZ2xlcyBvcHRpb25uZWxsZXMnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNDb250ZW50JzogJ0NsaWNrZXogc3VyIGxlIGJvdXR0b24gXCJDb25maWd1cmVyIGxlcyB2YXJpYW50ZXMvcsOoZ2xlcyBvcHRpb25uZWxsZXNcIicsXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc1RpdGxlJzogJ1NhdXZlZ2FyZGVyIGxlcyBtb2RpZmljYXRpb25zJyxcbiAgICAgICAgJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzQ29udGVudCc6ICdBcHJlcyBhdm9pciBjaG9pc2lzIGxlcyBvcHRpb25zIGNsaXF1ZXogc3VyIGxlIGJvdXRvbiBcIlNhdXZlZ2FyZGVyIGxlcyBtb2RpZmljYXRpb25zXCInXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZm91bmRyeSwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdUb29sdGlwcyB9IGZyb20gJy4uL2FwcHMvdG9vbHRpcHMuanMnXG4vLyBpbXBvcnQgeyBDb0M3V2VsY29tZU1lc3NhZ2UgfSBmcm9tICcuLi9hcHBzL3dlbGNvbWUtbWVzc2FnZS5qcydcbmltcG9ydCB7IHJlZ2lzdGVyVG91cnMgfSBmcm9tICcuLi9zY3JpcHRzL3JlZ2lzdGVyLXRvdXJzLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub25jZSgncmVhZHknLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0NhbGwgb2YgQ3RodWxodSA3dGggRWRpdGlvbiB8IFJlYWR5JylcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2hvd1dlbGNvbWVNZXNzYWdlJykgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIC8qKiBUaGlzIHdpbGwgcHJvbXB0IHRoZSB3ZWxjb21lIG1lc3NhZ2Ugd2hlbiBpdCBpcyAgZmluaXNoZWQgKi9cbiAgICAgIC8vIGF3YWl0IENvQzdXZWxjb21lTWVzc2FnZS5jcmVhdGUoKVxuICAgIH1cbiAgICBnYW1lLkNvQzdUb29sdGlwcyA9IG5ldyBDb0M3VG9vbHRpcHMoKVxuXG4gICAgY29uc3QgaW5zdHJ1Y3Rpb25zVmVyc2lvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dJbnN0cnVjdGlvbnMnKVxuICAgIGxldCBsYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICBjb25zdCByZWFkTWUgPSB7XG4gICAgICBlbjogJ3N4QjJPWGJmd1Y2TTBueVEnLFxuICAgICAgZXM6ICczNUZNN1pPZHpDNkwyeGxqJyxcbiAgICAgIGZyOiAndGRha3l6VFZPUXNBTWRTbSdcbiAgICB9XG4gICAgaWYgKHR5cGVvZiByZWFkTWVbbGFuZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsYW5nID0gJ2VuJ1xuICAgIH1cbiAgICBDT05GSUcuQ29DNyA9IENPTkZJRy5Db0M3ID8/IHt9XG4gICAgQ09ORklHLkNvQzcuTWFudWFsID0gcmVhZE1lW2xhbmddXG4gICAgaWYgKGZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS5zeXN0ZW0udmVyc2lvbiwgaW5zdHJ1Y3Rpb25zVmVyc2lvbiA/PyAnMCcpKSB7XG4gICAgICAoYXdhaXQgZ2FtZS5wYWNrcy5nZXQoJ0NvQzcuc3lzdGVtLWRvYycpLmdldERvY3VtZW50KENPTkZJRy5Db0M3Lk1hbnVhbCkpPy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3Nob3dJbnN0cnVjdGlvbnMnLCBnYW1lLnN5c3RlbS52ZXJzaW9uKVxuICAgIH1cbiAgICByZWdpc3RlclRvdXJzKClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5pbXBvcnQgeyBFbmFibGVWYXJpYW50UnVsZXNFbiB9IGZyb20gJy4uL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWVuLmpzJ1xuaW1wb3J0IHsgRW5hYmxlVmFyaWFudFJ1bGVzRnIgfSBmcm9tICcuLi90b3Vycy9lbmFibGUtdmFyaWFudC1ydWxlcy1mci5qcydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyVG91cnMgKCkge1xuICB0cnkge1xuICAgIGxldCBsYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICBjb25zdCB0b3VycyA9IHtcbiAgICAgIGVuOiB7XG4gICAgICAgICdlbmFibGUtdmFyaWFudC1ydWxlcyc6IEVuYWJsZVZhcmlhbnRSdWxlc0VuXG4gICAgICB9LFxuICAgICAgZnI6IHtcbiAgICAgICAgJ2VuYWJsZS12YXJpYW50LXJ1bGVzJzogRW5hYmxlVmFyaWFudFJ1bGVzRnJcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b3Vyc1tsYW5nXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxhbmcgPSAnZW4nXG4gICAgfVxuICAgIGZvciAoY29uc3QgdG91ck5hbWUgaW4gdG91cnNbbGFuZ10pIHtcbiAgICAgIGdhbWUudG91cnMucmVnaXN0ZXIoJ0NvQzcnLCB0b3VyTmFtZSwgbmV3IHRvdXJzW2xhbmddW3RvdXJOYW1lXSgpKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignVE9VUiBFUlJPUicsIGVycilcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgQ3JlYXRlVG9rZW4gZnJvbSAnLi9jcmVhdGUtdG9rZW4uanMnXG5pbXBvcnQgKiBhcyBEaWNlU29OaWNlUmVhZHkgZnJvbSAnLi9kaWNlLXNvLW5pY2UtcmVhZHkuanMnXG5pbXBvcnQgKiBhcyBEaWNlU29OaWNlUm9sbFN0YXJ0IGZyb20gJy4vZGljZS1zby1uaWNlLXJvbGwtc3RhcnQuanMnXG5pbXBvcnQgKiBhcyBJbml0IGZyb20gJy4vaW5pdC5qcydcbmltcG9ydCAqIGFzIFJlYWR5IGZyb20gJy4vcmVhZHkuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJBY3RvclNoZWV0IGZyb20gJy4vcmVuZGVyLWFjdG9yLXNoZWV0LmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyQ2hhdE1lc3NhZ2UgZnJvbSAnLi9yZW5kZXItY2hhdC1tZXNzYWdlLmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyRGlhbG9nIGZyb20gJy4vcmVuZGVyLWRpYWxvZy5qcydcbmltcG9ydCAqIGFzIFJlbmRlckl0ZW1TaGVldCBmcm9tICcuL3JlbmRlci1pdGVtLXNoZWV0LmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyUGF1c2UgZnJvbSAnLi9yZW5kZXItcGF1c2UuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJQbGF5ZXJMaXN0IGZyb20gJy4vcmVuZGVyLXBsYXllci1saXN0LmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyU2V0dGluZ3NDb25maWcgZnJvbSAnLi9yZW5kZXItc2V0dGluZ3MtY29uZmlnLmpzJ1xuXG5leHBvcnQgY29uc3QgQ29DN0hvb2tzID0ge1xuICBsaXN0ZW4gKCkge1xuICAgIENyZWF0ZVRva2VuLmxpc3RlbigpXG4gICAgRGljZVNvTmljZVJlYWR5Lmxpc3RlbigpXG4gICAgRGljZVNvTmljZVJvbGxTdGFydC5saXN0ZW4oKVxuICAgIEluaXQubGlzdGVuKClcbiAgICBSZWFkeS5saXN0ZW4oKVxuICAgIFJlbmRlckFjdG9yU2hlZXQubGlzdGVuKClcbiAgICBSZW5kZXJDaGF0TWVzc2FnZS5saXN0ZW4oKVxuICAgIFJlbmRlckRpYWxvZy5saXN0ZW4oKVxuICAgIFJlbmRlckl0ZW1TaGVldC5saXN0ZW4oKVxuICAgIFJlbmRlclBhdXNlLmxpc3RlbigpXG4gICAgUmVuZGVyUGxheWVyTGlzdC5saXN0ZW4oKVxuICAgIFJlbmRlclNldHRpbmdzQ29uZmlnLmxpc3RlbigpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBIb29rcywgRGlhbG9nLCBnYW1lICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ2NyZWF0ZVRva2VuJywgYXN5bmMgKHRva2VuRG9jdW1lbnQsIG9wdGlvbnMsIGFjdG9ySWQpID0+IHtcbiAgICAvLyBTZXQgdG9rZW4gaWNvbiBjb3JyZWN0bHlcbiAgICBpZiAoXG4gICAgICB0b2tlbkRvY3VtZW50LnRleHR1cmUuc3JjID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycgJiZcbiAgICAgIHRva2VuRG9jdW1lbnQudGV4dHVyZS5zcmMgIT09IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5pbWcpIHtcbiAgICAgIHRva2VuRG9jdW1lbnQudGV4dHVyZS5zcmMgPSB0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3IuaW1nXG4gICAgfVxuXG4gICAgLy8gSWYgdGhlcmUgaXMgc29tZXRoaW5nIHRvIHJvbGwgYXNrIGlmIHdlIHNob3VsZCByb2xsIGl0XG4gICAgaWYgKHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci50eXBlICE9PSAnY2hhcmFjdGVyJyAmJiAodG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmhhc1JvbGxhYmxlQ2hhcmFjdGVyaXN0aWNzIHx8IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5ob3NSb2xsYWJsZVNraWxscykpIHtcbiAgICAgIG5ldyBEaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRva2VuQ3JlYXRpb25Sb2xsLlRpdGxlJyksXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRva2VuQ3JlYXRpb25Sb2xsLlByb21wdCcpLFxuICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgIHJvbGw6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5CdXR0b25Sb2xsJyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiBhd2FpdCB0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3Iucm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdmVyYWdlOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9rZW5DcmVhdGlvblJvbGwuQnV0dG9uQXZlcmFnZScpLFxuICAgICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4gYXdhaXQgdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSgpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2tpcDoge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuQnV0dG9uU2tpcCcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KS5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdEZWNhZGVyRFNORmFjZXMgfSBmcm9tICcuLi9hcHBzL2RlY2FkZXItZHNuLWZhY2VzLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub25jZSgnZGljZVNvTmljZVJlYWR5JywgZGljZTNkID0+IHtcbiAgICBkaWNlM2QuYWRkRGljZVByZXNldCh7XG4gICAgICB0eXBlOiAnZHQnLFxuICAgICAgbGFiZWxzOiBbJzEwJywgJzIwJywgJzMwJywgJzQwJywgJzUwJywgJzYwJywgJzcwJywgJzgwJywgJzkwJywgJzAwJ10sXG4gICAgICBmb250U2NhbGU6IDAuNzUsXG4gICAgICBzeXN0ZW06ICdzdGFuZGFyZCdcbiAgICB9KVxuICAgIGRpY2UzZC5hZGREaWNlUHJlc2V0KHtcbiAgICAgIHR5cGU6ICdkbycsXG4gICAgICBsYWJlbHM6IFsnMTAnLCAnMjAnLCAnMzAnLCAnNDAnLCAnNTAnLCAnNjAnLCAnNzAnLCAnODAnLCAnOTAnLCAnMDAnXSxcbiAgICAgIGZvbnRTY2FsZTogMC43NSxcbiAgICAgIHN5c3RlbTogJ3N0YW5kYXJkJ1xuICAgIH0pXG4gICAgZ2FtZS5Db0M3RGVjYWRlckRTTkZhY2VzID0gbmV3IENvQzdEZWNhZGVyRFNORmFjZXMoKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEhvb2tzICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ2RpY2VTb05pY2VSb2xsU3RhcnQnLCBkaWNlM2QgPT4ge1xuICAgIGdhbWUuQ29DN0RlY2FkZXJEU05GYWNlcy5zZXRGYWNlcygpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIGFzeW5jIChkYXRhLCBodG1sLCBvcHRpb25zKSA9PiB7fSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi9jaGF0LmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckNoYXRNZXNzYWdlJywgKGFwcCwgaHRtbCwgZGF0YSkgPT4ge1xuICAgIENvQzdDaGF0LnJlbmRlck1lc3NhZ2VIb29rKGFwcCwgaHRtbCwgZGF0YSlcbiAgICBDb0M3Q2hhdC5yZW5kZXJDaGF0TWVzc2FnZUhvb2soYXBwLCBodG1sLCBkYXRhKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEhvb2tzICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckRpYWxvZycsIChkaWFsb2csIGh0bWwpID0+IHtcbiAgICBjb25zdCBmb3JtID0gaHRtbC5maW5kKCdmb3JtJylcbiAgICBpZiAoZm9ybS5pcygnI2RvY3VtZW50LWNyZWF0ZScpICYmIGZvcm0uZmluZCgnc2VsZWN0JykubGVuZ3RoICE9PSAwKSB7XG4gICAgICBjb25zdCBlbnRpdHlDcmVhdGVTZWxlY3RUYWcgPSBmb3JtLmZpbmQoXCJbbmFtZT0ndHlwZSddXCIpXG4gICAgICBjb25zdCBlbnRpdHlTb3J0ZWRMaXN0ID0gW11cbiAgICAgIGNvbnN0IHNob3dFeHBlcmltZW50YWwgPSAhIWdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgICAnQ29DNycsXG4gICAgICAgICdleHBlcmltZW50YWxGZWF0dXJlcydcbiAgICAgIClcbiAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy5jaGlsZHJlbigpLmVhY2goKG8sIGVudGl0eU9wdGlvbikgPT4ge1xuICAgICAgICBjb25zdCBrZXkgPSBlbnRpdHlPcHRpb24udGV4dENvbnRlbnQ/LmNhcGl0YWxpemUoKVxuICAgICAgICBpZiAoZ2FtZS5pMThuLmhhcyhgQ29DNy5FbnRpdGllcy4ke2tleX1gKSkge1xuICAgICAgICAgIGVudGl0eU9wdGlvbi50ZXh0Q29udGVudCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShgQ29DNy5FbnRpdGllcy4ke2tleX1gKVxuICAgICAgICB9XG4gICAgICAgIGlmIChzaG93RXhwZXJpbWVudGFsIHx8ICFbJ3ZlaGljbGUnXS5pbmNsdWRlcyhlbnRpdHlPcHRpb24udmFsdWUpKSB7XG4gICAgICAgICAgZW50aXR5U29ydGVkTGlzdC5wdXNoKGVudGl0eU9wdGlvbilcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy5lbXB0eSgpXG4gICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcuYXBwZW5kKFxuICAgICAgICBlbnRpdHlTb3J0ZWRMaXN0LnNvcnQoKGZpcnN0LCBzZWNvbmQpID0+XG4gICAgICAgICAgZmlyc3QuaW5uZXJUZXh0LmxvY2FsZUNvbXBhcmUoc2Vjb25kLmlubmVyVGV4dClcbiAgICAgICAgKVxuICAgICAgKVxuICAgICAgaWYgKGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoKSA9PT0gJ2FjdG9yJykge1xuICAgICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcudmFsKCdjaGFyYWN0ZXInKVxuICAgICAgfSBlbHNlIGlmIChlbnRpdHlDcmVhdGVTZWxlY3RUYWcudmFsKCkgPT09ICdib29rJykge1xuICAgICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcudmFsKCdpdGVtJylcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJJdGVtU2hlZXQnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge30pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJQYXVzZScsIGFzeW5jIChkYXRhLCBodG1sLCBvcHRpb25zKSA9PiB7XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlR2FtZUFydHdvcmsnKSkge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnKS50b0xvd2VyQ2FzZSgpID09PSAnbnVsbCcpIHtcbiAgICAgICAgaHRtbC5maW5kKCdpbWcnKS5yZW1vdmUoKVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnKSAhPT0gJycpIHtcbiAgICAgICAgaHRtbC5maW5kKCdpbWcnKS5hdHRyKCdzcmMnLCBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZUltYWdlJykpXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZVRleHQnKSAhPT0gJycpIHtcbiAgICAgICAgaHRtbC5maW5kKCdoMycpLmh0bWwoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VUZXh0JykpXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUsIEhvb2tzICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlclBsYXllckxpc3QnLCAocGxheWVyTGlzdCwgaHRtbCwgZGF0YSkgPT4ge1xuICAgICQoJzxoND4nKS5hcHBlbmQoJzxkaXY+PGkgY2xhc3M9XCJmYS1yZWd1bGFyIGZhLWNhbGVuZGFyXCI+PC9pPicgKyBnYW1lLmkxOG4uZm9ybWF0KENPQzcuZXJhc1tnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpXSA/PyAnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKSB9KSArICc8L2Rpdj4nKS5pbnNlcnRBZnRlcigkKCdoMycsIGh0bWwpKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5pbXBvcnQgeyBDb0M3RGlyZWN0b3J5UGlja2VyIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2M3LWRpcmVjdG9yeS1waWNrZXIuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyU2V0dGluZ3NDb25maWcnLCAoYXBwLCBodG1sLCB1c2VyKSA9PiB7XG4gICAgQ29DN0RpcmVjdG9yeVBpY2tlci5wcm9jZXNzSHRtbChodG1sKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHNvY2tldGxpYiwgdWkgKi9cbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4uL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIENvQzdTb2NrZXQgKCkge1xuICBnYW1lLkNvQzdzb2NrZXQgPSBzb2NrZXRsaWIucmVnaXN0ZXJTeXN0ZW0oJ0NvQzcnKVxuICBnYW1lLkNvQzdzb2NrZXQucmVnaXN0ZXIoJ2dtY3JlYXRlbWVzc2FnZWFzJywgZ21jcmVhdGVtZXNzYWdlYXMpXG4gIGdhbWUuQ29DN3NvY2tldC5yZWdpc3RlcignZ210cmFkZWl0ZW10bycsIGdtdHJhZGVpdGVtdG8pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdtY3JlYXRlbWVzc2FnZWFzIChkYXRhKSB7XG4gIGNvbnN0IG1lbGVlVGFyZ2V0ID0gbmV3IENvQzdNZWxlZVRhcmdldChcbiAgICBkYXRhLnRhcmdldEtleSxcbiAgICBkYXRhLm1lc3NhZ2VJZCxcbiAgICBkYXRhLmZhc3RGb3J3YXJkXG4gIClcbiAgbWVsZWVUYXJnZXQuaW5pdGlhdG9yS2V5ID0gZGF0YS5hY3RvcktleVxuICBjb25zdCBtZXNzYWdlID0gYXdhaXQgbWVsZWVUYXJnZXQuY3JlYXRlQ2hhdENhcmQoKVxuICByZXR1cm4gbWVzc2FnZVxufVxuXG5hc3luYyBmdW5jdGlvbiBnbXRyYWRlaXRlbXRvIChkYXRhKSB7XG4gIHRyeSB7XG4gICAgbGV0IGFjdG9yXG4gICAgaWYgKGRhdGEuc2NlbmUpIHtcbiAgICAgIGFjdG9yID0gZ2FtZS5zY2VuZXMuZ2V0KGRhdGEuc2NlbmUpLnRva2Vucy5nZXQoZGF0YS5hY3RvckZyb20pLmFjdG9yXG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGRhdGEuYWN0b3JGcm9tKVxuICAgIH1cbiAgICBjb25zdCBpdGVtID0gYWN0b3IuaXRlbXMuZ2V0KGRhdGEuaXRlbSlcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgZ2FtZS5hY3RvcnNcbiAgICAgIC5nZXQoZGF0YS5hY3RvclRvKVxuICAgICAgLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2l0ZW0udG9KU09OKCldKVxuICAgIGlmIChjcmVhdGVkKSB7XG4gICAgICBhY3Rvci5kZWxldGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLmlkXSlcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGUpXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgcmV0dXJuIHRydWVcbn1cbiIsIi8qIGdsb2JhbCBmcm9tVXVpZCwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQgfSBmcm9tICcuL2ludmVzdGlnYXRvci13aXphcmQuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuanMnXG5pbXBvcnQgeyBPcHBvc2VkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U3lzdGVtU29ja2V0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhICAgICAgICAgICAgICAgICAgICAgICBEYXRhIHRvIHNlbmQgdG8gc29ja2V0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW2RhdGEudHlwZV0gICAgICAgICAgICAgICAgQWN0aW9uIHRvIHJ1blxuICAgKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IFtkYXRhLmxpc3RlbmVyXSAgb25seSB0aGlzIHNwZWNmaWMgdXNlciBzaG91bGQgcnVuIHRoZSBhY3Rpb25cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHN0YXRpYyBhc3luYyBjYWxsU29ja2V0IChkYXRhKSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmxpc3RlbmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGdhbWUudXNlci5pZCA9PT0gZGF0YS5saXN0ZW5lcikge1xuICAgICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2NoYXJhY3Rlci13aXphcmQnOlxuICAgICAgICAgICAgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGVDaGFyYWN0ZXJGcm9tRGF0YShkYXRhLnBheWxvYWQpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ29wZW4tY2hhcmFjdGVyJzpcbiAgICAgICAgICAgIGdhbWUuYWN0b3JzLmdldChkYXRhLnBheWxvYWQpLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgICBjYXNlIE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlOlxuICAgICAgICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlIENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZTpcbiAgICAgICAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2ludm9rZSc6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCBmcm9tVXVpZChkYXRhLml0ZW0pXG4gICAgICAgICAgICAgIGl0ZW1bZGF0YS5tZXRob2RdKGRhdGEuZGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3VwZGF0ZUNoYXInOlxuICAgICAgICAgIENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdCBLZWVwZXIgYWN0aW9uLCBpZiB5b3UgYXJlIGEga2VlcGVyIHJ1biB5b3Vyc2VsZiwgaWYgdGhlcmUgaXMgbm8gYWN0aXZlIEdNIHNob3cgZXJyb3JcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgICAgRGF0YSB0byBzZW5kIHRvIHNvY2tldC5cbiAgICovXG4gIHN0YXRpYyByZXF1ZXN0S2VlcGVyQWN0aW9uIChkYXRhKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBkYXRhLmxpc3RlbmVyID0gZ2FtZS51c2VyLmlkXG4gICAgICBDb0M3U3lzdGVtU29ja2V0LmNhbGxTb2NrZXQoZGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qga2VlcGVycyA9IGdhbWUudXNlcnMuZmlsdGVyKHUgPT4gdS5hY3RpdmUgJiYgdS5pc0dNKVxuICAgICAgaWYgKGtlZXBlcnMubGVuZ3RoKSB7XG4gICAgICAgIGRhdGEubGlzdGVuZXIgPSBrZWVwZXJzWzBdLmlkXG4gICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTWlzc2luZ0tlZXBlclVzZXInKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgdXNlciBhY3Rpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgICAgRGF0YSB0byBzZW5kIHRvIHNvY2tldC5cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVsbH0gdXNlcklkICAgICAgT25seSB0aGlzIHVzZXIgaWQgc2hvdWxkIHJ1biB0aGUgYWN0aW9uLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGVycm9ySWZNaXNzaW5nICBJZiByZXF1ZXN0aW5nIGEgc3BlY2lmaWMgdXNlciBzaG91bGQgcnVuIHRoZSBhY3Rpb24gZXJyb3IgaWYgdXNlciBub3QgZm91bmQgLyBsb2dnZWQgaW4uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5jbHVkZVNlbGYgICAgIElmIHJ1bm5pbmcgYXMgYWxsIHVzZXJzIHNob3VsZCB0aGUgY3VycmVudCB1c2VyIGFsc28gcnVuIHRoZSBhY3Rpb24uXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBzdGF0aWMgcmVxdWVzdFVzZXJBY3Rpb24gKFxuICAgIGRhdGEsXG4gICAgeyB1c2VySWQgPSBudWxsLCBlcnJvcklmTWlzc2luZyA9IHRydWUsIGluY2x1ZGVTZWxmID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgaWYgKHVzZXJJZCAmJiB0eXBlb2YgdXNlcklkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHVzZXJJZCA9PT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICAgIGRhdGEubGlzdGVuZXIgPSBnYW1lLnVzZXIuaWRcbiAgICAgICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB1c2VyID0gZ2FtZS51c2Vycy5nZXQodXNlcklkKVxuICAgICAgICBpZiAodHlwZW9mIHVzZXIuaWQgIT09ICd1bmRlZmluZWQnICYmIHVzZXIuYWN0aXZlKSB7XG4gICAgICAgICAgZGF0YS5saXN0ZW5lciA9IHVzZXIuaWRcbiAgICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3JJZk1pc3NpbmcpIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck1pc3NpbmdVc2VyJykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGluY2x1ZGVTZWxmKSB7XG4gICAgICAgIENvQzdTeXN0ZW1Tb2NrZXQuY2FsbFNvY2tldChkYXRhKVxuICAgICAgfVxuICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENvbWJhdCwgQ09ORklHLCBmb3VuZHJ5LCBnYW1lLCBIb29rcywgSXRlbURpcmVjdG9yeSAqL1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi9hY3RpdmUtZWZmZWN0LmpzJ1xuaW1wb3J0IHsgQ29DN05QQ1NoZWV0IH0gZnJvbSAnLi9hY3RvcnMvc2hlZXRzL25wYy1zaGVldC5qcydcbmltcG9ydCB7IENvQzdDcmVhdHVyZVNoZWV0IH0gZnJvbSAnLi9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXJhY3RlclNoZWV0IH0gZnJvbSAnLi9hY3RvcnMvc2hlZXRzL2NoYXJhY3Rlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ29DN0NvbWJhdCwgcm9sbEluaXRpYXRpdmUgfSBmcm9tICcuL2NvbWJhdC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuL2NvbmZpZy5qcydcbmltcG9ydCB7IFVwZGF0ZXIgfSBmcm9tICcuL3VwZGF0ZXIuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN01lbnUgfSBmcm9tICcuL21lbnUuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcbmltcG9ydCB7IENvQzdDYW52YXMgfSBmcm9tICcuL2FwcHMvY2FudmFzLmpzJ1xuaW1wb3J0IHsgQ29DN1NldHRpbmdzRGlyZWN0b3J5IH0gZnJvbSAnLi9zZXR0aW5ncy1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSB9IGZyb20gJy4vY29tcGVuZGl1bS1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JEaXJlY3RvcnkgfSBmcm9tICcuL2FjdG9yLWRpcmVjdG9yeS5qcydcbmltcG9ydCB7IENvQzdIb29rcyB9IGZyb20gJy4vaG9va3MvaW5kZXguanMnXG5pbXBvcnQgKiBhcyBEaWNlQm90IGZyb20gJy4vZGljZWJvdC5qcydcbmltcG9ydCAnLi4vc3R5bGVzL3N5c3RlbS9pbmRleC5sZXNzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlU2hlZXQgfSBmcm9tICcuL2l0ZW1zL2NoYXNlL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN1NvY2tldCB9IGZyb20gJy4vaG9va3Mvc29ja2V0LmpzJ1xuaW1wb3J0IHsgQ29DN1N5c3RlbVNvY2tldCB9IGZyb20gJy4vYXBwcy9jb2M3LXN5c3RlbS1zb2NrZXQuanMnXG5pbXBvcnQgeyBEcm9wQWN0b3JTaGVldERhdGEgfSBmcm9tICcuL2hvb2tzL2Ryb3AtYWN0b3Itc2hlZXQtZGF0YS5qcydcblxuLy8gQ2FyZCBpbml0XG5pbXBvcnQgeyBpbml0RUNDIH0gZnJvbSAnLi9jb21tb24vY2hhdGNhcmRsaWIvc3JjL2NoYXRjYXJkbGliLmpzJ1xuaW1wb3J0IHsgQ2hhc2VPYnN0YWNsZUNhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuanMnXG5pbXBvcnQgeyBDb0M3Q29udGV4dE1lbnUgfSBmcm9tICcuL2NvbnRleHQtbWVudS5qcydcblxuSG9va3Mub24oJ3JlbmRlclNldHRpbmdzQ29uZmlnJywgKGFwcCwgaHRtbCwgb3B0aW9ucykgPT4ge1xuICBjb25zdCBzeXN0ZW1UYWIgPSAkKGFwcC5mb3JtKS5maW5kKCcudGFiW2RhdGEtdGFiPXN5c3RlbV0nKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kaXNwbGF5SW5pdERpY2VzXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVJbml0aWF0aXZlJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5zdGFuYnlHTVJvbGxzXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVSb2xsJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC50cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlQ2hhdENhcmRzJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5lbmFibGVTdGF0dXNJY29uc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlU2NlbmUnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLm92ZXJyaWRlR2FtZUFydHdvcmtdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUdhbWVBcnR3b3JrJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kaXNwbGF5UGxheWVyTmFtZU9uU2hlZXRdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVNoZWV0JykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kaXNyZWdhcmRVc2VQZXJSb3VuZF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlV2VhcG9uJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5zeW5jRGljZTNkXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVEaWNlU29OaWNlJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kZWJ1Z21vZGVdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZURldmVsb3BlckRlYnVnJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnc2VsZWN0W25hbWU9Q29DN1xcXFwuYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZV0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlUm9sbFRhYmxlJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICAvLyBNT1ZFRCBUTyBDSEFTU0UgSU5ESVZJRFVBTCBTRVRUSU5HXG4gIC8vIHN5c3RlbVRhYlxuICAvLyAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmNoYXNlU2hvd1Rva2VuTW92ZW1lbnRdJylcbiAgLy8gICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAvLyAgIC5iZWZvcmUoXG4gIC8vICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgLy8gICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUNoYXNlU2V0dGluZ3MnKSArXG4gIC8vICAgICAgICc8L2gyPidcbiAgLy8gICApXG59KVxuXG5Ib29rcy5vbmNlKCdpbml0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICBnYW1lLkNvQzcgPSB7XG4gICAgbWFjcm9zOiB7XG4gICAgICBza2lsbENoZWNrOiBDb0M3VXRpbGl0aWVzLnNraWxsQ2hlY2tNYWNybyxcbiAgICAgIHdlYXBvbkNoZWNrOiBDb0M3VXRpbGl0aWVzLndlYXBvbkNoZWNrTWFjcm8sXG4gICAgICBjaGVjazogQ29DN1V0aWxpdGllcy5jaGVja01hY3JvXG4gICAgfSxcbiAgICBjYXJkczoge1xuICAgICAgRGFtYWdlQ2FyZFxuICAgIH0sXG4gICAgZGV2OiB7XG4gICAgICBkaWNlOiB7XG4gICAgICAgIGFsd2F5c0NyaXQ6IGZhbHNlLFxuICAgICAgICBhbHdheXNGdW1ibGU6IGZhbHNlXG4gICAgICB9XG4gICAgfSxcbiAgICBlcmFzOiAoZXJhLCBuYW1lKSA9PiB7XG4gICAgICBDT0M3LmVyYXNbZXJhXSA9IG5hbWVcbiAgICB9XG4gIH1cbiAgQ29tYmF0LnByb3RvdHlwZS5yb2xsSW5pdGlhdGl2ZSA9IHJvbGxJbml0aWF0aXZlXG59KVxuXG5pbml0RUNDKENoYXNlT2JzdGFjbGVDYXJkKVxuXG5Ib29rcy5vbigncmVuZGVyQ29tYmF0VHJhY2tlcicsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDb21iYXQucmVuZGVyQ29tYmF0VHJhY2tlcihhcHAsIGh0bWwsIGRhdGEpXG4pXG5cbkRpY2VCb3QubGlzdGVuKClcbkNvQzdIb29rcy5saXN0ZW4oKVxuXG5Ib29rcy5vbmNlKCdzb2NrZXRsaWIucmVhZHknLCBDb0M3U29ja2V0KVxuXG5Ib29rcy5vbmNlKCdzZXR1cCcsIGZ1bmN0aW9uICgpIHtcbiAgLy8gTG9jYWxpemUgQ09ORklHIG9iamVjdHMgb25jZSB1cC1mcm9udFxuICBjb25zdCB0b0xvY2FsaXplID0gW1xuICAgICdzcGVsbFByb3BlcnRpZXMnLFxuICAgICdib29rVHlwZScsXG4gICAgJ3RhbGVudFR5cGUnLFxuICAgICdvY2N1cGF0aW9uUHJvcGVydGllcycsXG4gICAgJ3N0YXR1c1R5cGUnXG4gIF1cblxuICBmb3IgKGNvbnN0IG8gb2YgdG9Mb2NhbGl6ZSkge1xuICAgIGNvbnN0IGxvY2FsaXplZCA9IE9iamVjdC5lbnRyaWVzKENPQzdbb10pLm1hcChlID0+IHtcbiAgICAgIHJldHVybiBbZVswXSwgZ2FtZS5pMThuLmxvY2FsaXplKGVbMV0pXVxuICAgIH0pXG4gICAgQ09DN1tvXSA9IGxvY2FsaXplZC5yZWR1Y2UoKG9iaiwgZSkgPT4ge1xuICAgICAgb2JqW2VbMF1dID0gZVsxXVxuICAgICAgcmV0dXJuIG9ialxuICAgIH0sIHt9KVxuICB9XG5cbiAgbGV0IGVmZmVjdEluZGV4ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmluZEluZGV4KFxuICAgIHQgPT4gdC5pZCA9PT0gQ09DNy5zdGF0dXMuZGVhZFxuICApXG4gIGlmIChlZmZlY3RJbmRleCAhPT0gLTEpIHtcbiAgICBDT05GSUcuc3RhdHVzRWZmZWN0c1tlZmZlY3RJbmRleF0uaWNvbiA9XG4gICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90b21ic3RvbmUuc3ZnJ1xuICB9XG4gIGVmZmVjdEluZGV4ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmluZEluZGV4KFxuICAgIHQgPT4gdC5pZCA9PT0gQ09DNy5zdGF0dXMudW5jb25zY2lvdXNcbiAgKVxuICBpZiAoZWZmZWN0SW5kZXggIT09IC0xKSB7XG4gICAgQ09ORklHLnN0YXR1c0VmZmVjdHNbZWZmZWN0SW5kZXhdLmljb24gPVxuICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMva25vY2tlZC1vdXQtc3RhcnMuc3ZnJ1xuICB9XG4gIC8vIEZvdW5kcnlWVFQgdjEwXG4gIGNvbnN0IGVmZmVjdE5hbWVLZXkgPSAoIWZvdW5kcnkudXRpbHMuaXNOZXdlclZlcnNpb24oZ2FtZS52ZXJzaW9uLCAnMTEnKSA/ICdsYWJlbCcgOiAnbmFtZScpXG4gIENPTkZJRy5zdGF0dXNFZmZlY3RzLnVuc2hpZnQoXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lLFxuICAgICAgW2VmZmVjdE5hbWVLZXldOiAnQ29DNy5Cb3V0T2ZNYWRuZXNzTmFtZScsXG4gICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9oYW5naW5nLXNwaWRlci5zdmcnXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmUsXG4gICAgICBbZWZmZWN0TmFtZUtleV06ICdDb0M3Lkluc2FuaXR5TmFtZScsXG4gICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90ZW50YWNsZXMtc2t1bGwuc3ZnJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzLFxuICAgICAgW2VmZmVjdE5hbWVLZXldOiAnQ29DNy5Dcml0aWNhbFdvdW5kcycsXG4gICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9hcm0tc2xpbmcuc3ZnJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLmR5aW5nLFxuICAgICAgW2VmZmVjdE5hbWVLZXldOiAnQ29DNy5EeWluZycsXG4gICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9oZWFydC1iZWF0cy5zdmcnXG4gICAgfVxuICApXG59KVxuXG5Ib29rcy5vbignY3JlYXRlQWN0aXZlRWZmZWN0JywgKGRhdGEsIG9wdGlvbnMsIHVzZXJJZCkgPT4ge1xuICBpZiAoZ2FtZS51c2VySWQgPT09IHVzZXJJZCkge1xuICAgIGNvbnN0IHN0YXR1c0tleSA9IENvQzdBY3RpdmVFZmZlY3QuZ2V0U3RhdHVzS2V5KGRhdGEpXG4gICAgaWYgKHN0YXR1c0tleSkge1xuICAgICAgc3dpdGNoIChzdGF0dXNLZXkpIHtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy51bmNvbnNjaW91czpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kczpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5wcm9uZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICAgIGRhdGEucGFyZW50LnNldENvbmRpdGlvbihzdGF0dXNLZXksIHtcbiAgICAgICAgICAgIGZvcmNlVmFsdWU6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcmVhbFRpbWUgPSBkYXRhLmZsYWdzLkNvQzc/LnJlYWxUaW1lXG4gICAgICAgICAgICBsZXQgZHVyYXRpb24gPSBudWxsXG4gICAgICAgICAgICBpZiAocmVhbFRpbWUgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uPy5yb3VuZHNcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVhbFRpbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGR1cmF0aW9uID0gZGF0YS5kdXJhdGlvbj8uc2Vjb25kc1xuICAgICAgICAgICAgICBpZiAoIWlzTmFOKGR1cmF0aW9uKSkge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uID0gTWF0aC5mbG9vcihkdXJhdGlvbiAvIDM2MDApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRhdGEucGFyZW50LnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSwge1xuICAgICAgICAgICAgICBmb3JjZVZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgICByZWFsVGltZSxcbiAgICAgICAgICAgICAgZHVyYXRpb25cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG59KVxuXG5Ib29rcy5vbignZGVsZXRlQWN0aXZlRWZmZWN0JywgKGRhdGEsIG9wdGlvbnMsIHVzZXJJZCkgPT4ge1xuICBpZiAoZ2FtZS51c2VySWQgPT09IHVzZXJJZCkge1xuICAgIGNvbnN0IHN0YXR1c0tleSA9IENvQzdBY3RpdmVFZmZlY3QuZ2V0U3RhdHVzS2V5KGRhdGEpXG4gICAgaWYgKHN0YXR1c0tleSkge1xuICAgICAgc3dpdGNoIChzdGF0dXNLZXkpIHtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy51bmNvbnNjaW91czpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kczpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5wcm9uZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICAgIGRhdGEucGFyZW50LnVuc2V0Q29uZGl0aW9uKHN0YXR1c0tleSwge1xuICAgICAgICAgICAgZm9yY2VWYWx1ZTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG59KVxuXG4vLyBUaGlzIHdpbGwgaGlkZSB0aGUgaXRlbSBjYWxsZWQgJ19fQ29DN0ludGVybmFsSXRlbV9fJ1xuLy8gVGhpcyBpdGVtIGlzIHVzZWQgZm9yIGludGVybmFsIHB1cnBvc2VzIGFuZCBzaG91bGQgbm90IGJlIHNlZW4gYnkgYW55b25lXG5Ib29rcy5vbignY2hhbmdlU2lkZWJhclRhYicsIGRpcmVjdG9yeSA9PiB7XG4gIGlmIChkaXJlY3RvcnkgaW5zdGFuY2VvZiBJdGVtRGlyZWN0b3J5KSB7XG4gICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZmluZChpID0+IGkubmFtZSA9PT0gJ19fQ29DN0ludGVybmFsSXRlbV9fJylcbiAgICBpZiAoaXRlbSkge1xuICAgICAgY29uc3QgaHRtbCA9IGRpcmVjdG9yeS5fZWxlbWVudFxuICAgICAgY29uc3QgaXRlbUVsZW1lbnQgPSBodG1sLmZpbmQoYFtkYXRhLWRvY3VtZW50LWlkPScke2l0ZW0uaWR9J11gKVxuICAgICAgaWYgKGl0ZW1FbGVtZW50KSBpdGVtRWxlbWVudFswXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfVxuICB9XG59KVxuXG5Ib29rcy5vbignaG90YmFyRHJvcCcsIChiYXIsIGRhdGEsIHNsb3QpID0+IHtcbiAgcmV0dXJuIENvQzdVdGlsaXRpZXMuY3JlYXRlTWFjcm8oYmFyLCBkYXRhLCBzbG90KVxufSlcblxuSG9va3Mub24oJ3JlbmRlckNoYXRMb2cnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q2hhdC5jaGF0TGlzdGVuZXJzKGFwcCwgaHRtbCwgZGF0YSlcbilcbkhvb2tzLm9uKCd1cGRhdGVDaGF0TWVzc2FnZScsIChjaGF0TWVzc2FnZSwgY2hhdERhdGEsIGRpZmYsIHNwZWFrZXIpID0+XG4gIENvQzdDaGF0Lm9uVXBkYXRlQ2hhdE1lc3NhZ2UoY2hhdE1lc3NhZ2UsIGNoYXREYXRhLCBkaWZmLCBzcGVha2VyKVxuKVxuXG5Ib29rcy5vbigncmVhZHknLCBhc3luYyAoKSA9PiB7XG4gIGF3YWl0IFVwZGF0ZXIuY2hlY2tGb3JVcGRhdGUoKVxuXG4gIC8vIGdhbWUuQ29DNy5tZW51cyA9IG5ldyBDb0M3TWVudSgpO1xuXG4gIGFjdGl2YXRlR2xvYmFsTGlzdGVuZXIoKVxuXG4gIC8vIHNldEdsb2JhbENzc1ZhcigpXG5cbiAgZ2FtZS5Db0M3LnNraWxsTGlzdCA9IGF3YWl0IGdhbWUucGFja3MuZ2V0KCdDb0M3LnNraWxscycpPy5nZXREb2N1bWVudHMoKVxuXG4gIGdhbWUuc29ja2V0Lm9uKCdzeXN0ZW0uQ29DNycsIGFzeW5jIGRhdGEgPT4ge1xuICAgIENvQzdTeXN0ZW1Tb2NrZXQuY2FsbFNvY2tldChkYXRhKVxuICB9KVxuXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleFwiOiBcIlBob2JpYXMgaW5kZXhcIixcbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4SGludFwiOiBcIlRoZSBpbmRleCAocm9sbCByZXN1bHQpIHRoYXQgd2lsbCB0cmlnZ2VyIGEgcm9sbCBpbiB0aGUgcGhvYmlhcyB0YWJsZVwiLFxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleFwiOiBcIk1hbmlhcyBpbmRleFwiLFxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleEhpbnRcIjogXCJUaGUgaW5kZXggKHJvbGwgcmVzdWx0KSB0aGF0IHdpbGwgdHJpZ2dlciBhIHJvbGwgaW4gdGhlIG1hbmlhcyB0YWJsZVwiLFxuICAvLyBcIlNFVFRJTkdTLlNhbXBsZVBob2JpYXNUYWJsZVwiOiBcIlNhbXBsZSBwaG9iaWFzIHRhYmxlXCIsXG4gIC8vIFwiU0VUVElOR1MuU2FtcGxlTWFuaWFzVGFibGVcIjogXCJTYW1wbGUgTWFuaWFzIHRhYmxlXCIsXG5cbiAgZnVuY3Rpb24gX3RhYmxlU2V0dGluZ3NDaGFuZ2VkICh0YWJsZSwgaWQpIHtcbiAgICBpZiAoaWQgPT09ICdub25lJykgZ2FtZS5Db0M3LnRhYmxlc1t0YWJsZV0gPSBudWxsXG4gICAgZWxzZSBnYW1lLkNvQzcudGFibGVzW3RhYmxlXSA9IGdhbWUudGFibGVzLmdldChpZClcbiAgfVxuXG4gIC8vIGZ1bmN0aW9uIF90YWJsZUluZGV4Q2hhbmdlZCggdGFibGUsIGluZGV4KXtcbiAgLy8gIGdhbWUuQ29DNy50YWJsZXNbdGFibGVdPWluZGV4O1xuICAvLyB9XG5cbiAgY29uc3QgdGFibGVDaG9pY2UgPSB7IG5vbmU6ICdTRVRUSU5HUy5MZXRLZWVwZXJEZWNpZGUnIH1cbiAgZm9yIChjb25zdCB0IG9mIGdhbWUudGFibGVzKSB7XG4gICAgdGFibGVDaG9pY2VbdC5faWRdID0gdC5uYW1lXG4gIH1cblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGUnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnbm9uZScsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAgIG9uQ2hhbmdlOiBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoJ2JvdXRPZk1hZG5lc3NfU3VtbWFyeScsIGlkKVxuICB9KVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ25vbmUnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB0YWJsZUNob2ljZSxcbiAgICBvbkNoYW5nZTogaWQgPT4gX3RhYmxlU2V0dGluZ3NDaGFuZ2VkKCdib3V0T2ZNYWRuZXNzX1JlYWxUaW1lJywgaWQpXG4gIH0pXG5cbiAgLy8gZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4Jyx7XG4gIC8vICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleCcsXG4gIC8vICBoaW50OiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleEhpbnQnLFxuICAvLyAgc2NvcGU6ICd3b3JsZCcsXG4gIC8vICBjb25maWc6IHRydWUsXG4gIC8vICBkZWZhdWx0OiA5LFxuICAvLyAgdHlwZTogTnVtYmVyLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVJbmRleENoYW5nZWQoICdwaG9iaWFzSW5kZXgnLCBpZClcbiAgLy8gfSk7XG5cbiAgLy8gZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXgnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXgnLFxuICAvLyAgaGludDogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleEhpbnQnLFxuICAvLyAgc2NvcGU6ICd3b3JsZCcsXG4gIC8vICBjb25maWc6IHRydWUsXG4gIC8vICBkZWZhdWx0OiAxMCxcbiAgLy8gIHR5cGU6IE51bWJlcixcbiAgLy8gIG9uQ2hhbmdlOiAgaWQgPT4gX3RhYmxlSW5kZXhDaGFuZ2VkKCAnbWFuaWFzSW5kZXgnLCBpZClcbiAgLy8gfSk7XG5cbiAgLy8gZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzYW1wbGVQaG9iaWFzVGFibGUnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5TYW1wbGVQaG9iaWFzVGFibGUnLFxuICAvLyAgc2NvcGU6ICd3b3JsZCcsXG4gIC8vICBjb25maWc6IHRydWUsXG4gIC8vICBkZWZhdWx0OiAnbm9uZScsXG4gIC8vICB0eXBlOiBTdHJpbmcsXG4gIC8vICBjaG9pY2VzOiB0YWJsZUNob2ljZSxcbiAgLy8gIG9uQ2hhbmdlOiAgaWQgPT4gX3RhYmxlU2V0dGluZ3NDaGFuZ2VkKCAncGhvYmlhcycsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NhbXBsZU1hbmlhc1RhYmxlJyx7XG4gIC8vICBuYW1lOiAnU0VUVElOR1MuU2FtcGxlTWFuaWFzVGFibGUnLFxuICAvLyAgc2NvcGU6ICd3b3JsZCcsXG4gIC8vICBjb25maWc6IHRydWUsXG4gIC8vICBkZWZhdWx0OiAnbm9uZScsXG4gIC8vICB0eXBlOiBTdHJpbmcsXG4gIC8vICBjaG9pY2VzOiB0YWJsZUNob2ljZSxcbiAgLy8gIG9uQ2hhbmdlOiAgaWQgPT4gX3RhYmxlU2V0dGluZ3NDaGFuZ2VkKCAnbWFuaWFzJywgaWQpXG4gIC8vIH0pO1xuXG4gIGdhbWUuQ29DNy50YWJsZXMgPSB7XG4gICAgYm91dE9mTWFkbmVzc19TdW1tYXJ5OlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScpID09PSAnbm9uZSdcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogZ2FtZS50YWJsZXMuZ2V0KFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGUnKVxuICAgICAgICApLFxuICAgIGJvdXRPZk1hZG5lc3NfUmVhbFRpbWU6XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScpID09PSAnbm9uZSdcbiAgICAgICAgPyBudWxsXG4gICAgICAgIDogZ2FtZS50YWJsZXMuZ2V0KFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJylcbiAgICAgICAgKVxuICAgIC8vIG1hbmlhc0luZGV4OiBnZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleCcpLFxuICAgIC8vIHBob2JpYXNJbmRleDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc01hbmlhc0luZGV4JyksXG4gICAgLy8gcGhvYmlhczogKCdub25lJyA9PSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzYW1wbGVQaG9iaWFzVGFibGUnKSk/bnVsbDpnYW1lLnRhYmxlcy5nZXQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlUGhvYmlhc1RhYmxlJykpLFxuICAgIC8vIG1hbmlhczogKCdub25lJyA9PSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzYW1wbGVNYW5pYXNUYWJsZScpKT9udWxsOmdhbWUudGFibGVzLmdldChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzYW1wbGVNYW5pYXNUYWJsZScpKSxcbiAgfVxufSlcblxuLy8gSG9va3Mub24oJ3ByZUNyZWF0ZUFjdG9yJywgKGNyZWF0ZURhdGEpID0+IENvQ0FjdG9yLmluaXRUb2tlbiggY3JlYXRlRGF0YSkpO1xuXG5Ib29rcy5vbihcbiAgJ3JlbmRlckNvQzdDaGFzZVNoZWV0JyxcbiAgLyoqIGFzeW5jICovIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gICAgLyoqIGF3YWl0ICovIENvQzdDaGFzZVNoZWV0LnNldFNjcm9sbChhcHAsIGh0bWwsIGRhdGEpXG4pXG5cbkhvb2tzLm9uKCdjbG9zZUNvQzdDaGFzZVNoZWV0JywgKGFwcCwgaHRtbCkgPT5cbiAgQ29DN0NoYXNlU2hlZXQub25DbG9zZShhcHAsIGh0bWwpXG4pXG5cbi8vIENhbGxlZCBvbiBjbG9zaW5nIGEgY2hhcmFjdGVyIHNoZWV0IHRvIGxvY2sgaXQgb24gZ2V0dGluZyBpdCB0byBkaXNwbGF5IHZhbHVlc1xuSG9va3Mub24oJ2Nsb3NlQWN0b3JTaGVldCcsIGNoYXJhY3RlclNoZWV0ID0+IGNoYXJhY3RlclNoZWV0Lm9uQ2xvc2VTaGVldCgpKVxuSG9va3Mub24oJ3JlbmRlckNvQzdDcmVhdHVyZVNoZWV0JywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgQ29DN0NyZWF0dXJlU2hlZXQuZm9yY2VBdXRvKGFwcCwgaHRtbCwgZGF0YSlcbilcbkhvb2tzLm9uKCdyZW5kZXJDb0M3TlBDU2hlZXQnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3TlBDU2hlZXQuZm9yY2VBdXRvKGFwcCwgaHRtbCwgZGF0YSlcbilcbi8vIEhvb2tzLm9uKCd1cGRhdGVBY3RvcicsIChhY3RvciwgZGF0YVVwZGF0ZSkgPT4gQ29DQWN0b3IudXBkYXRlQWN0b3IoIGFjdG9yLCBkYXRhVXBkYXRlKSk7XG4vLyBIb29rcy5vbigndXBkYXRlVG9rZW4nLCAoc2NlbmUsIHRva2VuLCBkYXRhVXBkYXRlKSA9PiBDb0NBY3Rvci51cGRhdGVUb2tlbiggc2NlbmUsIHRva2VuLCBkYXRhVXBkYXRlKSk7XG5cbkhvb2tzLm9uKCdjaGF0TWVzc2FnZScsIENvQzdVdGlsaXRpZXMuUGFyc2VDaGF0RW50cnkpXG4vLyBIb29rcy5vbigncHJlQ3JlYXRlVG9rZW4nLCAoIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpID0+IENvQ0FjdG9yLnByZUNyZWF0ZVRva2VuKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSlcbi8vIEhvb2tzLm9uKCdjcmVhdGVUb2tlbicsICggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkgPT4gQ29DQWN0b3IucHJlQ3JlYXRlVG9rZW4oIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpKVxuLy8gSG9va3Mub24oXCJyZW5kZXJDaGF0TG9nXCIsIChhcHAsIGh0bWwsIGRhdGEpID0+IENvQzdJdGVtLmNoYXRMaXN0ZW5lcnMoaHRtbCkpO1xuXG5Ib29rcy5vbignZ2V0U2NlbmVDb250cm9sQnV0dG9ucycsICgvKiBjb250cm9scyAqLykgPT4ge1xuICAvLyBpZiggZ2FtZS51c2VyLmlzR00pe1xuICAvLyAgbGV0IGdyb3VwID0gY29udHJvbHMuZmluZChiID0+IGIubmFtZSA9PSAndG9rZW4nKTtcbiAgLy8gIGdyb3VwLnRvb2xzLnB1c2goe1xuICAvLyAgICB0b2dnbGU6IHRydWUsXG4gIC8vICAgIGljb24gOiAnZmFzIGZhLWFuZ2xlLWRvdWJsZS11cCcsXG4gIC8vICAgIG5hbWU6ICdkZXZwaGFzZScsXG4gIC8vICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJyksXG4gIC8vICAgIHRpdGxlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKT8gZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5EZXZQaGFzZUVuYWJsZWQnKTogZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5EZXZQaGFzZURpc2FibGVkJyksXG4gIC8vICAgIG9uQ2xpY2sgOmFzeW5jICgpID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlRGV2UGhhc2UoKVxuICAvLyAgfSk7XG4gIC8vICBncm91cC50b29scy5wdXNoKHtcbiAgLy8gICAgdG9nZ2xlOiB0cnVlLFxuICAvLyAgICBpY29uIDogJ2ZhcyBmYXMgZmEtdXNlci1lZGl0JyxcbiAgLy8gICAgbmFtZTogJ2NoYXJjcmVhdGUnLFxuICAvLyAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKSxcbiAgLy8gICAgdGl0bGU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKT8gZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5DaGFyQ3JlYXRpb25FbmFibGVkJyk6IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuQ2hhckNyZWF0aW9uRGlzYWJsZWQnKSxcbiAgLy8gICAgb25DbGljayA6YXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVDaGFyQ3JlYXRpb24oKVxuICAvLyAgfSk7XG4gIC8vIH1cbn0pXG5cbi8vIEhvb2tzLm9uKCdyZW5kZXJTY2VuZUNvbnRyb2xzJywgKCkgPT4gQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKCkpO1xuLy8gSG9va3Mub24oJ3JlbmRlclNjZW5lTmF2aWdhdGlvbicsICgpID0+IENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpKTtcbi8vIFNoZWV0IGNzcyBvcHRpb25zXG4vLyBIb29rcy5vbigncmVuZGVyQ29DN0NoYXJhY3RlclNoZWV0JywgQ29DN0NoYXJhY3RlclNoZWV0LnJlbmRlclNoZWV0KTtcbkhvb2tzLm9uKCdyZW5kZXJBY3RvclNoZWV0JywgQ29DN0NoYXJhY3RlclNoZWV0LnJlbmRlclNoZWV0KVxuSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldC5yZW5kZXJTaGVldClcblxuSG9va3Mub24oJ2dldFNjZW5lQ29udHJvbEJ1dHRvbnMnLCBDb0M3TWVudS5nZXRCdXR0b25zKVxuSG9va3Mub24oJ3JlbmRlclNjZW5lQ29udHJvbHMnLCBDb0M3TWVudS5yZW5kZXJDb250cm9scylcblxuSG9va3Mub24oJ2Ryb3BDYW52YXNEYXRhJywgQ29DN0NhbnZhcy5vbkRyb3BTb21ldGhpbmcpXG5cbkhvb2tzLm9uKCdkcm9wQWN0b3JTaGVldERhdGEnLCBEcm9wQWN0b3JTaGVldERhdGEpXG5cbmZ1bmN0aW9uIGFjdGl2YXRlR2xvYmFsTGlzdGVuZXIgKCkge1xuICBjb25zdCBib2R5ID0gJCgnYm9keScpXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgQ29DN0NvbnRleHRNZW51LmNsb3NlQWxsKVxuICBib2R5Lm9uKCdjbGljaycsICdhLmNvYzctaW5saW5lLWNoZWNrJywgQ29DN0NoZWNrLl9vbkNsaWNrSW5saW5lUm9sbClcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgX29uTGVmdENsaWNrKVxufVxuXG5mdW5jdGlvbiBfb25MZWZ0Q2xpY2sgKGV2ZW50KSB7XG4gIHJldHVybiBldmVudC5zaGlmdEtleVxufVxuXG5DT05GSUcudWkuc2V0dGluZ3MgPSBDb0M3U2V0dGluZ3NEaXJlY3RvcnlcbkNPTkZJRy51aS5jb21wZW5kaXVtID0gQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnlcbkNPTkZJRy51aS5hY3RvcnMgPSBDb0M3QWN0b3JEaXJlY3RvcnlcbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgSG9va3MsIFJvbGwsIHVpICovXG5cbi8qKlxuICpDYWxsb2ZDdGh1bGh1KDd0aEVkLikgRGVmaW5lIHlvdXIgb3duIGNvbW1hbmRzXG4gKkhlcmUsIHdlIHJlY2VpdmUgdGhlIGNoYXQgTWVzc2FnZXMgYW5kIGRldGVybWluZSBlYWNoIGNvbW1hbmQuXG4gKlsvQ0NdRGVmaW5lIGEgY29tbWFuZCB0byBqdWRnZSBhIG5vcm1hbCBkaWNlLlxuICpbL0NCUl0gQ29tbWFuZCB0byBkZWZpbmUgdGhlIGRlY2lzaW9uIG9uIGNvbWJpbmF0aW9uIHJvbGxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ2NoYXRNZXNzYWdlJywgKGh0bWwsIGNvbnRlbnQpID0+IHtcbiAgICAvLyBJJ20gY3VycmVudGx5IHVzaW5nIGl0IGZvciB0ZXN0aW5nIGJvbnVzIGRpY2UuXG4gICAgaWYgKGNvbnRlbnQubWF0Y2goL15cXC8oY2JyfGNjKS9pKSkge1xuICAgICAgLy8gRXh0cmFjdGluZyBudW1iZXJzIGZyb20gY29tYmluYXRpb24gcm9sbHNcbiAgICAgIGNvbnN0IGNvbW1hbmRzID0gY29udGVudC5tYXRjaCgvKFxcZCspL2cpXG4gICAgICBpZiAoY29tbWFuZHMpIHtcbiAgICAgICAgbmV3IFJvbGwoJzFkMTAwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pLnRoZW4ociA9PiB7XG4gICAgICAgICAgY29uc3QgcyA9IHIucmVzdWx0XG4gICAgICAgICAgY29uc3QgcmVzID0gY29tbWFuZHNcbiAgICAgICAgICAgIC5tYXAobSA9PiB7XG4gICAgICAgICAgICAgIGxldCByZXMgPSAnJ1xuICAgICAgICAgICAgICBpZiAocyA8PSAxKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgICAgICAgZWxzZSBpZiAocyA+PSAxMDApIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgICAgICAgICBlbHNlIGlmIChzIDw9IG0gLyA1KSB7XG4gICAgICAgICAgICAgICAgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzIDw9IG0gLyAyKSB7XG4gICAgICAgICAgICAgICAgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzIDw9IG0pIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHMgPj0gOTYpIHtcbiAgICAgICAgICAgICAgICBpZiAobSA8IDUwKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgICAgICAgICBlbHNlIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgICAgICAgfSBlbHNlIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBmaXJzdCByZXN1bHRzLlxuICAgICAgICAgICAgICByZXMgKz0gJyAnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbHVlJykgKyAnICcgKyBtXG4gICAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbignIC8gJylcbiAgICAgICAgICByLnRvTWVzc2FnZSh7XG4gICAgICAgICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICAgICAgICBmbGF2b3I6IHJlc1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdJbmNvcnJlY3QgdXNhZ2Ugb2YgY29tbWFuZCcpXG4gICAgICB9XG4gICAgICAvLyByZXR1cm4gdG8gYXZvaWQgZXJyb3JzIGluIHRoZSBjb21tYW5kLlxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmV4cG9ydCBmdW5jdGlvbiBEcm9wQWN0b3JTaGVldERhdGEgKGFjdG9yLCBzaGVldCwgZGF0YSkge1xuICBpZiAoZGF0YS50eXBlID09PSAnSXRlbScgJiYgZGF0YS5hY3RvcklkKSB7XG4gICAgaWYgKGFjdG9yLmRhdGEuX2lkID09PSBkYXRhLmFjdG9ySWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBsZXQgYWN0b3JGcm9tID0gbnVsbFxuICAgIGlmIChkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkKSB7XG4gICAgICBhY3RvckZyb20gPSBnYW1lLnNjZW5lcy5nZXQoZGF0YS5zY2VuZUlkKS50b2tlbnMuZ2V0KGRhdGEudG9rZW5JZCkuYWN0b3JcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0b3JGcm9tID0gZ2FtZS5hY3RvcnMuZ2V0KGRhdGEuYWN0b3JJZClcbiAgICB9XG4gICAgc3dpdGNoIChhY3Rvci5kYXRhLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NoYXJhY3Rlcic6XG4gICAgICBjYXNlICducGMnOlxuICAgICAgY2FzZSAnY3JlYXR1cmUnOlxuICAgICAgICBpZiAoIVsnY2hhc2UnXS5pbmNsdWRlcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAndmVoaWNsZSc6XG4gICAgICAgIHJldHVyblxuICAgICAgY2FzZSAnY29udGFpbmVyJzpcbiAgICAgICAgaWYgKCFbJ2Jvb2snLCAnaXRlbScsICdzcGVsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWN0b3JGcm9tKSB7XG4gICAgICBhY3RvckZyb20uZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YS5kYXRhLl9pZF0pXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiQ09DNyIsInN0YW5kYXJkIiwibW9kZXJuIiwibW9kZXJuUHVscCIsInB1bHAiLCJkb3duRGFya2VyVHJhaWxzIiwiZG93bkRhcmtlclRyYWlsc1B1bHAiLCJkYXJrQWdlcyIsImRhcmtBZ2VzUHVscCIsInJlZ2VuY3kiLCJyZWdlbmN5UHVscCIsImdhc0xpZ2h0IiwiaW52aWN0dXMiLCJkZWNpbWFsTGVmdCIsImRlY2ltYWxSaWdodCIsImludGVnZXJMZWZ0IiwiaW50ZWdlclJpZ2h0IiwibHNkIiwicm9tYW4iLCJub25lIiwiYXNzZXMiLCJzZXN0ZXJ0aWkiLCJxdWluYXJpaSIsImRlbmFyaWkiLCJkIiwicyIsInZhbHVlIiwibXVsdGlwbGllciIsIm5hbWUiLCJmaWx0ZXIiLCJzdHIiLCJjb24iLCJzaXoiLCJkZXgiLCJhcHAiLCJpbnQiLCJwb3ciLCJlZHUiLCJub2FkanVzdG1lbnRzIiwibm94cGdhaW4iLCJzcGVjaWFsIiwicmFyaXR5IiwicHVzaCIsImNvbWJhdCIsImZpZ2h0aW5nIiwiZmlyZWFybSIsInJlcXVpcmVzbmFtZSIsImtlZXBiYXNldmFsdWUiLCJwaWNrbmFtZW9ubHkiLCJvbmx5b25lIiwibWVsZWUiLCJybmdkIiwibW52ciIsInRocm93biIsInNob3RndW4iLCJkYnJsIiwiaW1wbCIsImJyc3QiLCJhdXRvIiwiYWhkYiIsImFkZGIiLCJzbG50Iiwic3BjbCIsIm1vbnQiLCJibHN0Iiwic3R1biIsInJhcmUiLCJidXJuIiwiY2FsbCIsImRpc21pc3MiLCJjb250YWN0Iiwic3VtbW9uIiwiYmluZCIsImVuY2hhbnRtZW50IiwiZ2F0ZSIsIm15dGhvcyIsIm9jY3VsdCIsIm90aGVyIiwicGh5c2ljYWwiLCJtZW50YWwiLCJtaXNjZWxsYW5lb3VzIiwiYmFzaWMiLCJpbnNhbmUiLCJtYW5pYSIsInBob2JpYSIsImNsYXNzaWMiLCJsb3ZlY3JhZnRpYW4iLCJmb3JtdWxhIiwiYWN0b3IiLCJhY3RvcnNoZWV0Iiwic3RhdHVzIiwidGVtcG9JbnNhbmUiLCJpbmRlZkluc2FuZSIsInVuY29uc2Npb3VzIiwiY3JpdGljYWxXb3VuZHMiLCJkeWluZyIsInByb25lIiwiZGVhZCIsIm5ld0Jvb2tOYW1lIiwibmV3U2tpbGxOYW1lIiwibmV3U3BlbGxOYW1lIiwibmV3SXRlbU5hbWUiLCJuZXdXZWFwb25OYW1lIiwiY3JlYXR1cmVGaWdodGluZ1NraWxsIiwiZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUiLCJmaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lIiwiY29tYmF0Q2FyZHMiLCJmaWdodEJhY2siLCJkb2RnZSIsIm1hbmV1dmVyIiwibm9SZXNwb25zZSIsIkNvQzdBY3RpdmVFZmZlY3QiLCJBY3RpdmVFZmZlY3QiLCJhcHBseSIsImNoYW5nZSIsImtleSIsImlzTmFOIiwic3lzdGVtIiwiYXR0cmlicyIsImFybW9yIiwiTnVtYmVyIiwiZGIiLCJTdHJpbmciLCJzdXBlciIsIm9uTWFuYWdlQWN0aXZlRWZmZWN0IiwiZXZlbnQiLCJvd25lciIsInByZXZlbnREZWZhdWx0IiwiYSIsImN1cnJlbnRUYXJnZXQiLCJsaSIsImNsb3Nlc3QiLCJlZmZlY3QiLCJkYXRhc2V0IiwiZWZmZWN0SWQiLCJlZmZlY3RzIiwiZ2V0IiwiYWN0aW9uIiwiY3JlYXRlRW1iZWRkZWREb2N1bWVudHMiLCJsYWJlbCIsImdhbWUiLCJpMThuIiwibG9jYWxpemUiLCJpY29uIiwib3JpZ2luIiwidXVpZCIsImVmZmVjdFR5cGUiLCJ1bmRlZmluZWQiLCJkaXNhYmxlZCIsInNoZWV0IiwicmVuZGVyIiwiZGVsZXRlIiwidXBkYXRlIiwiX3ByZXBhcmVEdXJhdGlvbiIsImR1cmF0aW9uIiwidHlwZSIsInNlY29uZHMiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzbGljZSIsImZpbHRlckFjdGl2ZUVmZmVjdHMiLCJjb25kaXRpb25OYW1lIiwiZm91bmRyeSIsInV0aWxzIiwiaXNOZXdlclZlcnNpb24iLCJ2ZXJzaW9uIiwic3RhdHVzZXMiLCJoYXMiLCJmbGFncyIsImNvcmUiLCJzdGF0dXNJZCIsImdldFN0YXR1c0tleSIsIm9wdGlvbnMiLCJzaXplIiwidmFsdWVzIiwiZ2V0RmxhZyIsImZpbmQiLCJ2IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJpc1N0YXR1cyIsInRoaXMiLCJwcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyIsImNhdGVnb3JpZXMiLCJ0ZW1wb3JhcnkiLCJwYXNzaXZlIiwiaW5hY3RpdmUiLCJzdXBwcmVzc2VkIiwiaW5mbyIsImUiLCJpc1N1cHByZXNzZWQiLCJpc1RlbXBvcmFyeSIsImhpZGRlbiIsImxlbmd0aCIsInByZXBhcmVOUENBY3RpdmVFZmZlY3RDYXRlZ29yaWVzIiwiY291bnQiLCJhY3RpdmUiLCJfZ2V0U291cmNlTmFtZSIsImV4cGVuZGVkIiwiQ29DN0RpY2UiLCJyb2xsIiwibW9kaWYiLCJyb2xsTW9kZSIsImhpZGVEaWNlIiwiYWx0ZXJuYXRpdmVEaWNlIiwibW9kdWxlcyIsInNldHRpbmdzIiwiQ29DNyIsImRldiIsImRpY2UiLCJhbHdheXNDcml0IiwiUm9sbCIsImZyb21EYXRhIiwiY3JpdDAxIiwiYWx3YXlzRnVtYmxlIiwiZnVtYmxlOTkiLCJyZXBlYXQiLCJNYXRoIiwiYWJzIiwiYXN5bmMiLCJyZXN1bHQiLCJ1bml0IiwidG90YWwiLCJyZXN1bHRzIiwidGVucyIsIkNPTkZJRyIsIkRpY2UiLCJ0ZXJtcyIsInQiLCJpbmNsdWRlcyIsIm1heCIsIm1pbiIsInNob3dSb2xsRGljZTNkIiwic3luY0RpY2UiLCJjaGF0RGF0YSIsIndoaXNwZXIiLCJibGluZCIsIkNoYXRNZXNzYWdlIiwiYXBwbHlSb2xsTW9kZSIsImRpY2UzZCIsInNob3dGb3JSb2xsIiwidXNlciIsImNvbWJpbmVkUm9sbCIsInBvb2wiLCJrZXlzIiwibWFwIiwicGFyc2VJbnQiLCJwZW5hbHR5RGljZSIsImJvbnVzRGljZSIsImhhc0RTTiIsImpvaW4iLCJncm91cHMiLCJiYXNlRGllIiwiYmFzZVNldCIsIm91dHB1dCIsIm1vZGlmaWVyIiwib2Zmc2V0Iiwic3RhdGljIiwiY2xhc3MiLCJldmFsdWF0ZWQiLCJudW1iZXIiLCJmYWNlcyIsIm1vZGlmaWVycyIsIm9wZXJhdG9yIiwiQ29DN0l0ZW0iLCJJdGVtIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY29udGV4dCIsImRvY3VtZW50Q2xhc3NlcyIsImV4dGVuZGVkIiwiaW1nIiwiX2NyZWF0ZURvY3VtZW50TGluayIsImV2ZW50RGF0YSIsIm1hdGNoIiwicmVsYXRpdmVUbyIsIkpvdXJuYWxFbnRyeVBhZ2UiLCJkb2N1bWVudENsYXNzIiwiaXRlbSIsImZyb21VdWlkIiwiaWNvbkxhbmd1YWdlIiwibWFsZnVuY3Rpb24iLCJ0b2dnbGVQcm9wZXJ0eSIsInByb3BlcnR5SWQiLCJvdmVycmlkZSIsImZpcmVhcm1zIiwiY2hlY2tlZFByb3BzIiwiZXJhcyIsIkNvQ0lERWRpdG9yIiwiZXJhVG9nZ2xlIiwicHJvcGVydGllcyIsInNraWxsTmFtZSIsInBhcnRzIiwiZ2V0TmFtZVBhcnRzU3BlYyIsInNwZWNpYWxpemF0aW9uIiwibWVsZWVXZWFwb24iLCJwcm9wTmFtZSIsInByb3BWYWx1ZSIsInRoZW4iLCJoYXNQcm9wZXJ0eSIsImlzSW5jbHVkZWRJblNldCIsInNob3J0TmFtZSIsInVwZGF0ZVJvbGwiLCJzcGVjTmFtZVJlZ2V4IiwiUmVnRXhwIiwiQ29DN1V0aWxpdGllcyIsInF1b3RlUmVnRXhwIiwiZ2V0TmFtZVdpdGhvdXRTcGVjIiwiaXNBbnlTcGVjIiwidG9Mb3dlckNhc2UiLCJza2lsbCIsImd1ZXNzTmFtZVBhcnRzIiwiY2hlY2tTa2lsbFByb3BlcnRpZXMiLCJzZXQiLCJpbmRleE9mIiwiZmxhZ0ZvckRldmVsb3BlbWVudCIsImlzR00iLCJ1bmZsYWdGb3JEZXZlbG9wZW1lbnQiLCJkZXZlbG9wZW1lbnRGbGFnIiwiZ2V0SXRlbUZsYWciLCJ0b2dnbGVJdGVtRmxhZyIsImZsYWdOYW1lIiwiZXJhc2VBZGp1c3RtZW50IiwiZmxhZ1ZhbHVlIiwidWkiLCJub3RpZmljYXRpb25zIiwic2V0SXRlbUZsYWciLCJ1bnNldEl0ZW1GbGFnIiwibG9ja2VkIiwidXNlc0FsdGVybmF0aXZlU2tpbGwiLCJtYXhVc2VzUGVyUm91bmQiLCJtdWx0aVNob3QiLCJ1c2VzUGVyUm91bmQiLCJzaW5nbGVTaG90Iiwibm9ybWFsIiwidXNlc1BlclJvdW5kU3RyaW5nIiwiYnVyc3QiLCJtdWx0aXBsZVNob3RzIiwiYmFzZVJhbmdlIiwicmFuZ2UiLCJsb25nUmFuZ2UiLCJsb25nIiwiZXh0cmVtZVJhbmdlIiwiZXh0cmVtZSIsInNraWxsUHJvcGVydGllcyIsImVudHJpZXMiLCJjYWxjdWxhdGVCYXNlIiwiYmFzZSIsInBhcnNlZCIsInN0YXJ0c1dpdGgiLCJzdWJzdHJpbmciLCJnZXRQcm9wZXJ0eSIsImZsb29yIiwiZXZhbHVhdGUiLCJtYXhpbWl6ZSIsImVyciIsIl9iYXNlIiwiYXN5bmNCYXNlIiwiY29uc29sZSIsInBhcmVudCIsImdldEJ1bGxldExlZnQiLCJhbW1vIiwic2V0QnVsbGV0cyIsInJlbG9hZCIsIm1heEJ1bGxldCIsImJ1bGxldHMiLCJhZGRCdWxsZXQiLCJtYXhCdWxsZXRzIiwic2hvb3RCdWxsZXRzIiwieCIsIm1lcmdlT3B0aW9uYWxTa2lsbHMiLCJza2lsbExpc3QiLCJjb25jYXQiLCJyZWR1Y2UiLCJuZXdBcnJheSIsInNvcnQiLCJzb3J0QnlOYW1lS2V5IiwiX2dldENoYXRDYXJkQWN0b3IiLCJjYXJkIiwidG9rZW5LZXkiLCJ0b2tlbklkIiwic2NlbmVJZCIsInNwbGl0IiwiYWN0b3JzIiwidG9rZW5zIiwic2NlbmUiLCJzY2VuZXMiLCJ0b2tlbkRhdGEiLCJnZXRFbWJlZGRlZERvY3VtZW50IiwiVG9rZW4iLCJhY3RvcklkIiwiZ2V0Q2hhdERhdGEiLCJodG1sT3B0aW9ucyIsImR1cGxpY2F0ZSIsImRlc2NyaXB0aW9uIiwibGFiZWxzIiwiVGV4dEVkaXRvciIsImVucmljaEhUTUwiLCJwcm9wcyIsImZuIiwicCIsIl93ZWFwb25DaGF0RGF0YSIsIndlYXBvblByb3BlcnRpZXMiLCJza2lsbExhYmVsIiwiZm91bmQiLCJtYWluIiwiaWQiLCJpdGVtcyIsImFsdGVybmF0aXYiLCJjYW5CZVB1c2hlZCIsImltcGFsZSIsImlzRG9kZ2UiLCJjcmVhdGVJbmxpbmVSb2xsIiwiY2xzIiwidGl0bGUiLCJlc2NhcGUiLCJKU09OIiwic3RyaW5naWZ5IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiayIsImlubmVySFRNTCIsImlzQ3RybEtleSIsIm1ldGFLZXkiLCJjdHJsS2V5Iiwia2V5Q29kZSIsImNoYXRIZWxwZXIiLCJoeXBoZW5Ub0NhbWVsQ2FzZSIsInN0cmluZyIsInJlcGxhY2UiLCJ0b1VwcGVyQ2FzZSIsImNyZWF0ZU1lc3NhZ2UiLCJtZXNzYWdlIiwibWVzc2FnZURhdGEiLCJmbGF2b3IiLCJzcGVha2VyIiwiZ2V0U3BlYWtlciIsIkNPTlNUIiwiQ0hBVF9NRVNTQUdFX1RZUEVTIiwiV0hJU1BFUiIsIlJPTEwiLCJESUNFX1JPTExfTU9ERVMiLCJTRUxGIiwiY29udGVudCIsImNyZWF0ZSIsIm1zZyIsImNhbWVsQ2FzZVRvSHlwaGVuIiwiZ2V0QWN0b3JGcm9tS2V5IiwiaXNEb2N1bWVudFV1aWQiLCJpc0RvY3VtZW50VXVpZFBhY2siLCJTZnJvbVV1aWQiLCJ0b2tlbiIsImdldFRva2VuRnJvbUtleSIsImdldFNwZWFrZXJGcm9tS2V5IiwiYWN0b3JLZXkiLCJhbGlhcyIsImF0dGFjaE9iamVjdFRvRWxlbWVudCIsIm9iamVjdCIsImVsZW1lbnQiLCJvYmplY3ROYW1lIiwicHJvcCIsImdldE9iamVjdEZyb21FbGVtZW50IiwiZGVzZXJpYWxpemUiLCJvYmoiLCJvYmpQcm9wIiwib2JqTmFtZSIsInRvU3RyaW5nIiwidG9rZW5Eb2MiLCJnZXRBY3RvclRva2VuIiwicHJvdG90eXBlVG9rZW4iLCJnZXRBY3RvckltZ0Zyb21LZXkiLCJ0ZXh0dXJlIiwic3JjIiwiZ2V0RGlzdGFuY2UiLCJzdGFydFRva2VuIiwiZW5kVG9rZW4iLCJjZW50ZXIiLCJkaXN0YW5jZSIsImdyaWRVbml0IiwiY2FudmFzIiwiZ3JpZCIsInVuaXRzIiwicmF5IiwiUmF5Iiwic2VnbWVudCIsIm1lYXN1cmVEaXN0YW5jZXMiLCJncmlkU3BhY2VzIiwiZWxldmF0aW9uIiwic3FydCIsIndhcm4iLCJ0b1lhcmRzIiwiQ29DN1JvbGwiLCJnZXRGcm9tQ2FyZCIsInJvbGxEaXYiLCJxdWVyeVNlbGVjdG9yIiwicmVzdWx0VHlwZSIsInN1Y2Nlc3NMZXZlbCIsIkNvQzdDaGVjayIsInJlZ3VsYXIiLCJmb3JtYXQiLCJoYXJkIiwiY3JpdGljYWwiLCJmdW1ibGUiLCJmYWlsdXJlIiwiaXRlbUlkIiwic2tpbGxJZCIsInNob3dEaWNlUm9sbCIsImRpY2VSZXN1bHRzIiwiZGllUmVzdWx0IiwiZGljZXMiLCJkaWNlRGF0YSIsInNob3ciLCJnZXRGcm9tRWxlbWVudCIsImhhc0JvbnVzIiwiZGljZU1vZGlmaWVyIiwiYm9udXMiLCJib251c1R5cGUiLCJ0ZW5EaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsImRpZSIsInNlbGVjdGVkIiwiaXNNYXgiLCJpc01pbiIsInVuaXREaWUiLCJpbmNyZWFzZVN1Y2Nlc3MiLCJpc2wiLCJuZXdTdWNjZXNMZXZlbCIsImx1Y2tOZWVkZWQiLCJsdWNrTmVlZGVkVHh0IiwibHVja05lZWRlZFZhbHVlIiwiZ2V0RnJvbUNoZWNrIiwiY2hlY2siLCJyb2xsVHlwZSIsInNpZGUiLCJyZWZNZXNzYWdlSWQiLCJyZWZlcmVuY2VNZXNzYWdlSWQiLCJkaWZmaWN1bHR5IiwiZGljZU1vZCIsInJhd1ZhbHVlIiwiaXNGdW1ibGUiLCJpc0NyaXRpY2FsIiwiY2hhcmFjdGVyaXN0aWMiLCJpc1Rva2VuIiwiYXR0YWNoQ2hlY2tUb0VsZW1lbnQiLCJodG1sRWxlbWVudCIsImF0dGFjaFRvRWxlbWVudCIsIkNvQzdEYW1hZ2UiLCJnZXRNYWluRGllIiwiZGFtYWdlU3RyaW5nIiwiZGFtYWdlIiwicm9sbHMiLCJyIiwiQ2hhdENhcmRBY3RvciIsImZhc3RGb3J3YXJkIiwiZGlzcGxheUFjdG9yT25DYXJkIiwiaXNCbGluZCIsIl9pc0JsaW5kIiwiX3JvbGxNb2RlIiwid2VhcG9uIiwidGFyZ2V0ZWRUb2tlbnMiLCJ0YXJnZXRzIiwidGFyZ2V0IiwidGFyZ2V0VG9rZW4iLCJ0YXJnZXRBY3RvciIsIl90YXJnZXRUb2tlbiIsIl90YXJnZXRLZXkiLCJwb3AiLCJfdGFyZ2V0QWN0b3IiLCJ0YXJnZXRLZXkiLCJoYXNUYXJnZXQiLCJza2lsbHMiLCJnZXRXZWFwb25Ta2lsbHMiLCJ0YXJnZXRJbWciLCJ0YXJnZXROYW1lIiwiYWN0b3JJbWciLCJzYXkiLCJzcGVha2VyRGF0YSIsImdldFdoaXNwZXJSZWNpcGllbnRzIiwicmVwbGFjZXIiLCJKU09OUm9sbERhdGEiLCJTYW5DaGVja0NhcmQiLCJzYW5EYXRhIiwiQm9vbGVhbiIsInNhblJlYXNvbiIsInNhbk1vZGlmaWVyIiwic2FuRGlmZmljdWx0eSIsInN0YXRlIiwiZGlmZmljdWx0eUxldmVsIiwic2FuTG9zc1NvdXJjZSIsImludm9sdW50YXJ5QWN0aW9uIiwic2FuUm9sbGVkIiwic2FuQ2hlY2siLCJpc0ZhaWx1cmUiLCJzYW5Mb3NzRm9ybXVsYSIsInNhbk1heCIsImZhaWxlZCIsInNhbk1pbiIsInBhc3NlZCIsInNhbkxvc3RUb1JlYXNvbiIsIm1heFBvc3NpYmxlU2FuTG9zcyIsIm1heExvc3NUb1NhblJlYXNvbiIsIm1heFNhbkxvc3MiLCJzYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQiLCJmaXJzdEVuY291bnRlciIsIm15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQiLCJpc0FjdG9yTG9vc2luZ1NhbiIsImhhc1RlbXBvSW5zYW5lIiwiaW1tdW5lVG9DcmVhdHVyZSIsImJvdXREdXJhdGlvblRleHQiLCJib3V0RHVyYXRpb24iLCJib3V0UmVhbFRpbWUiLCJib3V0U3VtbWFyeSIsInlvdUdhaW5DdGh1bGh1TXl0aG9zU3RyaW5nIiwibXl0aG9zR2FpbiIsImFkdmFuY2VTdGF0ZSIsImtlZXBDcmVhdHVyZVNhbkRhdGEiLCJmaW5pc2giLCJhcHBseVNhbkxvc3MiLCJib3V0UmVzdWx0IiwiZW50ZXJCb3V0T2ZNYWRuZXNzIiwiYm91dE9mTWFkbmVzc1Jlc29sdmVkIiwiYm91dE9mTWFkbmVzc092ZXIiLCJ0cmlnZ2VySW5zYW5pdHkiLCJ1bnNldENvbmRpdGlvbiIsImN0aHVsaHVNeXRob3NBd2FyZGVkIiwiYW1vdW50R2FpbmVkIiwiZXhwZXJpZW5jZUZpcnN0TXl0aG9zSW5zYW5pdHkiLCJjdGh1bGh1TXl0aG9zU2tpbGwiLCJvbGRWYWx1ZSIsImFkanVzdG1lbnRzIiwiZXhwZXJpZW5jZSIsImJ5cGFzc1JvbGxTYW4iLCJpc0J5cGFzc2VkIiwiYXR0cmlidXRlIiwiX3BlcmZvcm0iLCJmb3JjZURTTiIsImludm9sdW50YXJ5QWN0aW9uUGVyZm9ybWVkIiwic2FuTG9zc1JvbGxlZCIsImlnbm9yZVNhbkNoZWNrIiwic2FuTG9zcyIsInJvbGxTYW4iLCJsaW1pdGVkTG9zc1RvQ3JlYXR1cmUiLCJtaW5pbWl6ZSIsImltbXVuZUFscmVhZHlJbkJvdXQiLCJzYW5Mb3NzQXBwbGllZCIsImludFJvbGxlZCIsImluc2FuaXR5Iiwicm9sbFNhbkxvc3MiLCJzYW5Mb3NzUm9sbCIsImxvb3NlU2FuIiwiYWN0b3JMb3N0U2FuIiwic2FuIiwicGVybWFuZW50bHlJbnNhbmUiLCJoYXNJbmRlZkluc2FuZSIsInNoYWtlbiIsImluc2FuaXR5VGFibGVSb2xsZWQiLCJkYWlseVNhbkxvc3MiLCJkYWlseVNhbkxpbWl0IiwidGVtcG9yYXJ5SW5zYW5lIiwiaW5kZWZpbml0ZWx5SW5zYW5lIiwibWVtb3J5UmVwcmVzc2VkIiwicm9sbEludCIsImludENoZWNrIiwiaW50RGlmZmljdWx0eSIsImludE1vZGlmaWVyIiwiYWxyZWFkeUluc2FuZSIsInNldENvbmRpdGlvbiIsImNsZWFyU2FuTG9zc1JlYXNvbiIsInNldFJlYXNvblNhbkxvc3MiLCJ1cGRhdGVDaGF0Q2FyZCIsIl9faW5saW5lU2FuQ2hlY2siLCJpbmxpbmVDaGVjayIsIm91dGVySFRNTCIsIl9faW5saW5lU2FuTG9zc1JvbGwiLCJfX2lubGluZUludENoZWNrIiwiaHRtbCIsInJlbmRlclRlbXBsYXRlIiwidGVtcGxhdGUiLCJodG1sQ2FyZEVsZW1lbnQiLCIkIiwicGFyc2VIVE1MIiwiY2hhdE1lc3NhZ2UiLCJtZXNzYWdlcyIsIm1lc3NhZ2VJZCIsImNoYXQiLCJ1cGRhdGVNZXNzYWdlIiwiY2hlY2tUYXJnZXRzIiwiYXJncyIsImNoYXRDYXJkIiwiZ2V0RnJvbU1lc3NhZ2VJZCIsImh0bWxDYXJkIiwic2FuQ2hlY2tDYXJkRGF0YSIsInBhcnNlIiwidW5lc2NhcGUiLCJzYW5DaGVja0NhcmQiLCJhc3NpZ24iLCJDb0M3TGluayIsIkNIRUNLX1RZUEUiLCJDSEVDSyIsIlNBTkxPU1MiLCJJVEVNIiwiRUZGRUNUIiwiTElOS19UWVBFIiwiQ0hBUkFDVEVSSVNUSUMiLCJBVFRSSUJVVEUiLCJTS0lMTCIsImluaXQiLCJib2R5Iiwib24iLCJfb25MaW5rQ2xpY2siLCJfb25EcmFnQ29DN0xpbmsiLCJlbnJpY2hlcnMiLCJwYXR0ZXJuIiwiZW5yaWNoZXIiLCJfY3JlYXRlTGluayIsIl9saW5rRnJvbUV2ZW50IiwiaSIsIm9sZFR5cGUiLCJsaW5rVHlwZSIsImxpbmtJY29uIiwiZGlzcGxheU5hbWUiLCJpbm5lclRleHQiLCJjb252ZXJ0RGlmZmljdWx0eSIsIm9yaWdpbmFsRXZlbnQiLCJkYXRhVHJhbnNmZXIiLCJzZXREYXRhIiwiZnJvbURyb3BEYXRhIiwibWVyZ2VPYmplY3QiLCJjaGFuZ2VzIiwiZXh0ZXJuYWwiLCJtYXRjaGVzIiwibWF0Y2hBbGwiLCJBcnJheSIsImZyb20iLCJkaWZmaWN1bHR5U3RyaW5nIiwiaHVtYW5OYW1lIiwiZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyIsImRyYWdnYWJsZSIsInBhY2siLCJsaW5rIiwiX29uTGlua0FjdG9yQ2xpY2siLCJjaGFyYWN0ZXJpc3RpY0NoZWNrIiwic2hpZnRLZXkiLCJza2lsbENoZWNrIiwiYXR0cmlidXRlQ2hlY2siLCJ3ZWFwb25DaGVjayIsInRvQ2hhdE1lc3NhZ2UiLCJvcHRpb24iLCJ0b1doaXNwZXJNZXNzYWdlIiwib3duZXJzIiwiQ29DN0NvbnRlbnRMaW5rRGlhbG9nIiwiY29udHJvbGxlZCIsImdldFNwZWFrZXJBY3RvciIsIm93bmVyc2hpcCIsImRlZmF1bHQiLCJET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTIiwiT0JTRVJWRVIiLCJzZXRWYWx1ZSIsImNoZWNrVHlwZSIsImNoZWNrTmFtZSIsImlzQ2hhcmFjdGVyaXN0aWNDaGVjayIsImNoYXJhY3RlcmlzdGljcyIsIkNvQ0FjdG9yIiwiZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uIiwiYyIsImlzQ2hlY2siLCJpc0F0dHJpYnV0ZUNoZWNrIiwiaXNTa2lsbENoZWNrIiwiaXNJdGVtQ2hlY2siLCJpc1Nhbkxvc3NDaGVjayIsImlzRWZmZWN0IiwiRm9ybUFwcGxpY2F0aW9uIiwiZGVmYXVsdE9wdGlvbnMiLCJjbGFzc2VzIiwiZHJhZ0Ryb3AiLCJkcmFnU2VsZWN0b3IiLCJkcm9wU2VsZWN0b3IiLCJjbG9zZU9uU3VibWl0Iiwid2lkdGgiLCJoZWlnaHQiLCJ0YWJzIiwibmF2U2VsZWN0b3IiLCJjb250ZW50U2VsZWN0b3IiLCJpbml0aWFsIiwiZ2V0RGF0YSIsInNoZWV0RGF0YSIsImF0dHJpYnV0ZVR5cGUiLCJlZmZlY3RNb2RlcyIsIkFDVElWRV9FRkZFQ1RfTU9ERVMiLCJjaGFyYWN0ZXJpc3RpY1R5cGUiLCJmcm9tR2FtZSIsImZyb21EaXJlY3RvcnkiLCJoYXNJRCIsImZyb21Db21wZW5kaXVtIiwiaXNTZXRGcm9tR2FtZSIsImFjdG9yTmFtZXMiLCJhY3RpdmF0ZUxpc3RlbmVycyIsIl9vbkNoYW5nZVN1Ym1pdCIsImNsaWNrIiwiX29uRWZmZWN0Q29udHJvbCIsIl9vblN1Ym1pdCIsImJ1dHRvbiIsIl9hZGRFZmZlY3RDaGFuZ2UiLCJyZW1vdmUiLCJpZHgiLCJzdWJtaXQiLCJwcmV2ZW50Q2xvc2UiLCJ1cGRhdGVEYXRhIiwibW9kZSIsIkFERCIsIl91cGRhdGVPYmplY3QiLCJmb3JtRGF0YSIsImhhc0VmZmVjdCIsInRpbnQiLCJyb3VuZHMiLCJ0dXJucyIsInN1Ym1pdHRlciIsImNvcHlUb0NsaXBib2FyZCIsIl9vbkRyb3AiLCJkYXRhU3RyaW5nIiwic2V0TGluayIsImRvY3VtZW50TmFtZSIsImRhdGFMaXN0IiwiZ2V0RGF0YUZyb21Ecm9wRXZlbnQiLCJoYXNNb2RpZmllcnMiLCJoYXNMYWJlbCIsImhhc0ljb24iLCJsaW5rRGF0YSIsImRpYWxvZyIsIlJvbGxEaWFsb2ciLCJ1bmtub3duIiwidW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0IiwiYWxsb3dGbGF0RGljZU1vZGlmaWVyIiwiZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIiLCJhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllciIsImRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJoaWRlRGlmZmljdWx0eSIsImNhcmRUeXBlIiwiZm9yY2VkQ2FyZFR5cGUiLCJjYXJkVHlwZXMiLCJDb0M3Q2hhdE1lc3NhZ2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsImRsZyIsIkRpYWxvZyIsImJ1dHRvbnMiLCJjYWxsYmFjayIsIkZvcm1EYXRhIiwiY2xvc2UiLCJSb2xsQ2FyZCIsImluaXRpYXRvciIsImZyb21NZXNzYWdlSWQiLCJmcm9tTWVzc2FnZSIsImNhcmRFbGVtZW50IiwiZnJvbUhUTUxDYXJkRWxlbWVudCIsImNhcmREYXRhIiwiaW5kZXgiLCJyb2xsZWQiLCJfaHRtbFJvbGwiLCJnZXRIdG1sUm9sbCIsIl9vblRvZ2dsZSIsInNwYW4iLCJjb250YWlucyIsImZsYWciLCJ0b2dnbGUiLCJiIiwidW5zZXRGbGFnIiwic2V0RmxhZyIsInRvZ2dsZUZsYWciLCJkaXNwYXRjaCIsImNvbGxlY3Rpb24iLCJkZWZhdWx0Q29uZmlnIiwidGltZXN0YW1wIiwicHJvY2VzcyIsInNvY2tldCIsImVtaXQiLCJ0b01lc3NhZ2UiLCJjb25maWciLCJjb21wdXRlIiwiY2xvc2VkIiwiZnJvbUdNIiwicmFuayIsImFkZFJvbGxEYXRhIiwiYWRkUm9sbCIsInJlbW92ZVJvbGwiLCJzcGxpY2UiLCJfbWVzc2FnZSIsIl9tZXNzYWdlSWQiLCJleGNsdWRlIiwiZXhjbHVkZVN0YXJ0V2l0aCIsIndpbm5lcnMiLCJ3aW5uZXIiLCJsb29zZXJzIiwibG9vc2VyIiwiaGFzV2lubmVyIiwiaXNLZWVwZXIiLCJDb21iaW5lZENoZWNrQ2FyZCIsImJpbmRMaXN0ZXJuZXJzIiwiX29uQ2xpY2siLCJzdWNjZXNzQ291bnQiLCJtYWluQWN0b3JLZXkiLCJzdWNjZXNzIiwiYW55IiwiYWxsIiwiY2hlY2tHTUluaXRpYXRvciIsInVzZXJzIiwiX3JvbGwiLCJzaWxlbnQiLCJoaWRlU3VjY2VzcyIsImFzc2lnblJvbGwiLCJjbG9zZUNhcmQiLCJBdWRpb0hlbHBlciIsInBsYXkiLCJzb3VuZHMiLCJhbHRlciIsImZsYXREaWNlTW9kaWZpZXIiLCJmbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJoaWRlRGljZVJlc3VsdCIsIkludGVyYWN0aXZlQ2hhdENhcmQiLCJfb3B0aW9ucyIsImNzc0NsYXNzZXMiLCJvcHRpb25uYWxDaGF0RGF0YSIsImNhcmRDbGFzcyIsIl9vbkJ1dHRvbiIsIl9vbktleSIsImJpbmRMaXN0ZW5lcnMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiY2FyZHMiLCJ0eXBlZENhcmQiLCJhc3NpZ25PYmplY3QiLCJfdXBkYXRlIiwiZm9ybXMiLCJ1cGRhdGVzIiwiZm9ybSIsIkZvcm1EYXRhRXh0ZW5kZWQiLCJ0b09iamVjdCIsImRpZmZPYmplY3QiLCJleHBhbmRPYmplY3QiLCJpc1RhcmdldE93bmVyIiwiaXNPd25lciIsIkRhbWFnZUNhcmQiLCJkYW1hZ2VSb2xsIiwiX2ltcGFsZSIsImlzRGFtYWdlRm9ybXVsYSIsImRhbWFnZUZvcm11bGEiLCJ2YWxpZGF0ZSIsImlzRGFtYWdlTnVtYmVyIiwiaXNBcm1vckZvcnVsYSIsInRvdGFsRGFtYWdlU3RyaW5nIiwiaWdub3JlQXJtb3IiLCJub0RhbWFnZSIsInJvbGxEYW1hZ2UiLCJoYXJkcm9sbGVkIiwiZGFtYWdlSW5mbGljdGVkIiwiZGVhbERhbWFnZSIsIl9odG1sSW5saW5lUm9sbCIsInJvbGxBcm1vciIsImRlYWxEYW1hZ2VUb1NlbGVjdGVkVGFyZ2V0IiwiZXJyb3IiLCJzZWxlY3RlZFBsYXllcnMiLCJvbmUiLCJjb25maXJtRGFtYWdlIiwidHdvIiwiaW5jbHVlcyIsInRyaW0iLCJtYXhEYW1hZ2UiLCJyb2xsU3RyaW5nIiwiX2FybW9yIiwiT3Bwb3NlZENoZWNrQ2FyZCIsImF0dGFja2VyUm9sbCIsImF0dGFja2VyIiwiZGVmZW5kZXJSb2xsIiwiZGVmZW5kZXIiLCJkZWZlbmRlcklzRG9kZ2luZyIsImRvZGdlU2tpbGwiLCJhZHZhbnRhZ2VBdHRhY2tlciIsIl9hYSIsIndpbm5lclJvbGxzRGFtYWdlIiwiX2FkIiwiYWR2YW50YWdlRGVmZW5kZXIiLCJpc1RpZSIsIndpbm5lckNvdW50IiwibmVlZHNUaWVCcmVha2VyIiwiaXNBdHRhY2tNYW5ldXZlciIsInJlc3VsdFRleHQiLCJkYW1hZ2VDaGF0Q2FyZCIsImlzRXh0cmVtZVN1Y2Nlc3MiLCJ0aWUiLCJyZXNvbHZlZCIsIm1vZGlmaWVkUmVzdWx0Iiwid2luQ291bnQiLCJTYW5EYXRhRGlhbG9nIiwiX3RvZ2dsZUlucHV0IiwiVmFsaWRhdGUiLCJST0xMX1RZUEVfQVRUUklCVVRFIiwiUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDIiwiUk9MTF9UWVBFX0NPTUJBVCIsIlJPTExfVFlQRV9TS0lMTCIsIlJPTExfVFlQRV9FTkNPVU5URVIiLCJDQVJEX1RZUEVfQ09NQklORUQiLCJDQVJEX1RZUEVfR1JPVVAiLCJDQVJEX1RZUEVfTk9STUFMIiwiQ0FSRF9UWVBFX09QUE9TRUQiLCJDQVJEX1RZUEVfU0FOX0NIRUNLIiwiQ0FSRF9UWVBFX05PTkUiLCJzZWxlY3QiLCJub3JtYWxpemVSZXF1ZXN0Iiwic2tpbGxJZHMiLCJnZXRTa2lsbHNCeU5hbWUiLCJhbHRLZXkiLCJjcmVhdGVFbmNvdW50ZXIiLCJvcGVuTGlua1Rvb2wiLCJzZW5kVG9DaGF0Iiwic2VuZFRvQ2xpcGJvYXJkIiwiaXNDb21iYXQiLCJwcmV2ZW50U3RhbmRieSIsImRpYWxvZ09wdGlvbnMiLCJwYXJlbnRFbGVtZW50IiwiYXR0cmliIiwid2VhcG9uQWx0U2tpbGwiLCJ3ZWFwb25OYW1lIiwiaGFzUGxheWVyT3duZXIiLCJ0cmlnZ2VyIiwiY3JlYXRlTGluayIsIml0ZW1Nb2RpZmllcnMiLCJmb3VuZHJ5SUQiLCJjcmVhdGVSb2xsIiwicnVuUm9sbCIsImNoZWNrUGFzc2VkIiwiY2hlY2tGYWlsbGVkIiwiaW5mb3MiLCJ1c2FnZSIsInByb21wdExhYmVsIiwic3RhbmRieSIsInJvbGxBdHRyaWJ1dGUiLCJyb2xsQ2hhcmFjdGVyaXN0aWMiLCJyb2xsZWRTdWNjZXNzTGV2ZWwiLCJzdWNjZXNzTGV2ZWxzIiwicmVndWxhclRocmVzaG9sZCIsImhhcmRUaHJlc2hvbGQiLCJleHRyZW1lVGhyZXNob2xkIiwiZGVueVB1c2giLCJDb0M3Q29uQ2hlY2siLCJfYWN0b3JJZCIsImlzU3VjY2VzcyIsImlzUm9sbGVkIiwiY29uQ2hlY2siLCJodG1sQ2hlY2siLCJnZXRDaGVja0VsZW1lbnQiLCJyb2xsQ29uIiwicmVwbGFjZVdpdGgiLCJzdGF5QWxpdmUiLCJhcHBsaWVkIiwiU2tpbGxTZWxlY3REaWFsb2ciLCJfb25TZWxlY3RTa2lsbENsaWNrZWQiLCJzdHlsZSIsImRpc3BsYXkiLCJhZGRlZCIsIm9wdGlvbnNDb3VudCIsIlBvaW50U2VsZWN0RGlhbG9nIiwiX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMiLCJfb25CdXR0b25DbGlja2VkIiwiaXRlbUxpc3QiLCJvcHRpb25hbCIsInRvZ2dsZUNsYXNzIiwiQ2hhcmFjU2VsZWN0RGlhbG9nIiwiQ2hhcmFjUm9sbERpYWxvZyIsIl9vbkNoYW5nZUlucHV0IiwiX29uUm9sbENoYXJhY3RlcmlzdGljIiwiX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyIsIl9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJfb25SZXNldENoYXJhY3RlcmlzdGljIiwiY2hhcmFjS2V5IiwiaW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyIsImRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJyZXNldENoYXJhY3RlcmlzdGljIiwiY2hhciIsImNoZWNrVG90YWwiLCJfZWxlbWVudCIsImlucHV0IiwibGlzdCIsInBvaW50cyIsInZhbGlkYXRpb24iLCJlbmFibGVkIiwidmFsIiwicG9pbnRzV2FybmluZyIsIlNraWxsU3BlY1NlbGVjdERpYWxvZyIsInNwZWNpYWxpemF0aW9uTmFtZSIsImJhc2VWYWx1ZSIsImhhc1NraWxscyIsIlNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2ciLCJfb25DbGlja1N1Ym1pdCIsIl9vblNlbGVjdENoYW5nZSIsImFsbG93Q3VzdG9tIiwiZml4ZWRCYXNlVmFsdWUiLCJhbGxvd1NlbGVjdCIsIlNraWxsVmFsdWVEaWFsb2ciLCJDb0M3TWVsZWVSZXNvbHRpb24iLCJpbml0aWF0b3JNZXNzYWdlIiwidGFyZ2V0TWVzc2FnZSIsInByZUNyZWF0ZU1lc3NhZ2UiLCJDb0M3TWVsZWVUYXJnZXQiLCJDb0M3TWVsZWVJbml0aWF0b3IiLCJpbml0aWF0b3JUb2tlbiIsInJlc3VsdFN0cmluZyIsIndpbm5lckltZyIsIndpbm5lclRpdGxlIiwiY3JpdGljYWxEYW1hZ2UiLCJkb2N1bW1lbnQiLCJwYXJlbnRNZXNzYWdlSWQiLCJpbml0aWF0b3JLZXkiLCJvdXRudW1iZXJlZCIsInN1cnByaXNlZCIsImF1dG9TdWNjZXNzIiwiYWR2YW50YWdlIiwiZGlzYWR2YW50YWdlIiwiZG9kZ2luZyIsIm5vdFJlc3BvbmRpbmciLCJmaWdodGluZ0JhY2siLCJtYW5ldXZlcmluZyIsImFjdGlvblNlbGVjdGVkIiwiX2luaXRpYXRvcktleSIsIl9pbml0aWF0b3IiLCJtZWxlZUluaXRpYXRvciIsInVwZGF0ZUNhcmRTd2l0Y2giLCJwdWJsaXNoVXBkYXRlIiwiY2FtZWxGbGFnIiwiY3JlYXRlQ2hhdENhcmQiLCJnbXMiLCJPV05FUiIsInByb21wdCIsImdldFVwZGF0ZWRDaGF0Q2FyZCIsInVwZGF0ZVNlbGVjdGVkIiwid2VhcG9uSWQiLCJwZXJmb3JtU2tpbGxDaGVjayIsInB1Ymxpc2giLCJpc1Vua29ud24iLCJwdWJsaXNoTm9SZXBvbnNlUmVzdWx0IiwicmVzb2x1dGlvbkNhcmQiLCJyZXNvbHV0aW9uTWVzc2FnZSIsInB1Ymxpc2hDaGVja1Jlc3VsdCIsInJvbGxJY29ucyIsInJvbGxDb2xvciIsInJvbGxUaXRsZSIsInVwZ3JhZGVSb2xsIiwibHVja0Ftb3VudCIsIm5ld1N1Y2Nlc3NMZXZlbCIsIm9sZENhcmQiLCJzcGVuZEx1Y2siLCJsdWNrU3BlbnQiLCJwcm9jZXNzZWQiLCJkaWNlUm9sbHMiLCJyZXN1bERldGFpbHMiLCJkaWNlVG90YWwiLCJDb0M3Q2hhdCIsIkNvQzdSYW5nZUluaXRpYXRvciIsImNvdmVyIiwidGFyZ2V0Q2FyZCIsImZ1bGxBdXRvIiwiYWltZWQiLCJ0b3RhbEJ1bGxldHNGaXJlZCIsIl90YXJnZXRzIiwiQ29DN1JhbmdlVGFyZ2V0Iiwicm91bmRlZERpc3RhbmNlIiwicm91bmQiLCJkaXN0YW5jZVVuaXQiLCJkaXN0SW5ZZCIsInBvaW50QmxhbmtSYW5nZSIsIm91dE9mUmFuZ2UiLCJtYWluV2VhcG9uU2tpbGwiLCJhdXRvV2VhcG9uU2tpbGwiLCJhdXRvRmlyZSIsIm11bHRpVGFyZ2V0IiwiYWltaW5nIiwiX2FpbWluZyIsImdldEFjdG9yRmxhZyIsImFjdGl2ZVRhcmdldCIsInNob3RzIiwiX3Nob3RzIiwiY3VycmVudFNob3RSYW5rIiwiYWN0aXZlVGFyZ2V0U2hvdERpZmZpY3VsdHkiLCJzaG90RGlmZmljdWx0eSIsImRpZEFueVNob3RIaXQiLCJhbnlIaXQiLCJzdWNjZXNzZnVsSGl0cyIsImhpdHMiLCJoaXQiLCJzaG90Iiwic2hvdEZpcmVkIiwidG90YWxBbW1vIiwibWF4U2hvdHMiLCJpZ25vcmVBbW1vIiwiaWdub3JlVXNlc1BlclJvdW5kIiwib3V0T2ZBbW1vIiwib3V0T2ZTaG90cyIsInZvbGxleVNpemUiLCJfdm9sbGV5U2l6ZSIsImlzVm9sbGV5TWluU2l6ZSIsImlzVm9sbGV5TWF4U2l6ZSIsImdldFRhcmdldEZyb21LZXkiLCJjYWxjVGFyZ2V0c0RpZmZpY3VsdHkiLCJkaWZmaWN1bHR5TmFtZSIsImltcG9zc2libGUiLCJsZXZlbCIsImFkZFNob3RBdEN1cnJlbnRUYXJnZXQiLCJhY3Rvck5hbWUiLCJidWxsZXRzU2hvdCIsInRyYW5zaXRCdWxsZXRzIiwiYnVsbGV0c1Nob3RUcmFuc2l0IiwidHJhbnNpdCIsImJ1bGxldExlZnQiLCJwcmV2aW91c1Nob3QiLCJyZXNvbHZlQ2FyZCIsIndlYXBvbk1hbGZ1bmN0aW9uIiwic2hvb3RBdFRhcmdldCIsImhhc01hbGZ1bmN0aW9uIiwiYnVsbGV0RmlyZWQiLCJkZXRhaWxzIiwiY2hhbmdlVm9sbGV5U2l6ZSIsInBhc3NSb2xsIiwicm9sbEluZGV4IiwidXBncmFkZWluZGV4IiwiaW5jcmVhc2VkU3VjY2VzcyIsInJhbmdlSW5pdGlhdG9yIiwiY2FyZFRhcmdldHMiLCJjYXJkU2hvdHMiLCJkYW1hZ2VSb2xscyIsImRyIiwiaCIsImRhbWFnZURpZSIsImNyaXRpY2FsRGFtYWdlRm9ybXVsYSIsImNyaXRpY2FsRGFtYWdlRGllIiwiaW1wYWxpbmdTaG90cyIsInN1Y2Nlc3NmdWxTaG90cyIsImRlYWx0IiwiZGFtYWdlUm9sbGVkIiwiZEluZGV4IiwidG90YWxUYWtlbiIsInRvdGFsQWJzb3JiZWQiLCJySW5kZXgiLCJkZWFsdEFtb3VudCIsInRha2VuIiwiYWJzb3JiZWQiLCJkYW1hZ2VEZWFsdCIsImluTWVsZWUiLCJiaWciLCJfYmlnIiwiYnVpbGQiLCJzbWFsbCIsIl9zbWFsbCIsImlzRmFzdCIsIm1vdiIsImZhc3QiLCJfZmFzdCIsIl9hY3RvciIsIl90b2tlbiIsInNpemVUZXh0Iiwic2l6ZUxhYmVsIiwiY2hhbmdlRGlzcGxheWVkVGFyZ2V0IiwiQ0hBVF9DT0M3X01FU1NBR0UiLCJyZW5kZXJDaGF0TWVzc2FnZUhvb2siLCJmYWtlUm9sbE1lc3NhZ2UiLCJwbGF5ZXJzIiwiR01TZWxmUm9sbCIsInJlbW92ZVdpc3BlclRhcmdldHMiLCJmYWtlUm9sbCIsInJlYWR5IiwiY2hhdExpc3RlbmVycyIsIl9vbkNoYXRDYXJkQWN0aW9uIiwiX29uQ2hhdENhcmRUb2dnbGVDb250ZW50IiwiX29uQ2hhdENhcmRSYWRpb1N3aXRjaCIsIl9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoIiwiX29uQ2hhdENhcmRWb2xsZXlTaXplIiwiX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQiLCJfb25Ub2dnbGVTZWxlY3RlZCIsIl9vblRhcmdldFNlbGVjdCIsIl9vbk9wZW5BY3RvciIsIl9vbklubGluZSIsIm9uVXBkYXRlQ2hhdE1lc3NhZ2UiLCJzY3JvbGxCb3R0b20iLCJjaGVja1JldmVhbGVkIiwicmV2ZWFsQ2hlY2siLCJyZW5kZXJNZXNzYWdlSG9vayIsInJlbW92ZUNsYXNzIiwibW91c2VsZWF2ZSIsImRlZmVuZGFudElkIiwiaW5pdGlhdG9ySWQiLCJ1cGRhdGVDb21iYXRDYXJkVGFyZ2V0IiwidXNlck9ubHkiLCJnZXRBdHRyaWJ1dGUiLCJnbU9ubHkiLCJ6b25lIiwidXNlclZpc2libGVPbmx5IiwiZWxlbSIsImdtVmlzaWJsZU9ubHkiLCJpc1RydXN0ZWQiLCJvd25lclZpc2libGVPbmx5IiwiX2dldEFjdG9yRnJvbUtleSIsIm93bmVyT25seSIsImdtU2VsZWN0T25seSIsImFjdGlvblR5cGVTdHJpbmciLCJ0YXJnZXRzU2VsZWN0b3IiLCJib3JkZXIiLCJ0YXJnZXRUb0Rpc3BsYXkiLCJkcm9wRG93bkJveGVzIiwiZHBkbkJveCIsInNlbGVjdGVkQm94IiwiYWN0aW9uVHlwZSIsImRlZmVuZGVyQ2hvaWNlIiwic2tpbGxWYWx1ZSIsIml0ZW1OYW1lIiwiX2NvbGxhcHNlSW5saW5lUmVzdWx0IiwiX2V4cGFuZElubGluZVJlc3VsdCIsIm9wdGlvbkxpc3QiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicHJvcGVydHkiLCJyYW5nZUNhcmQiLCJjaGFyYWN0ZXIiLCJpc0NhcmRPd25lciIsIm93bm5lciIsImdldEFjdG9yRnJvbVRva2VuIiwiZ2V0VG9rZW4iLCJtZXNzSWQiLCJvcmlnaW5NZXNzYWdlIiwibWVsZWVDYXJkIiwicm9sbFJlc3VsdCIsInVwZ3JhZGVJbmRleCIsImZvcmNlUGFzcyIsInVwZ3JhZGVDaGVjayIsImRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIiLCJuZXdDYXJkIiwiY2xvbmVOb2RlIiwicHVzaGVkUm9sbCIsImRlZmVuZGVyS2V5IiwicmVzcG9uc2VUeXBlIiwiZGVhbGVyIiwiYW1vdW50IiwiYXBwZW5kIiwiZm9yY2VGYWlsIiwiaW5jcmVhc2VTdWNjZXNzTGV2ZWwiLCJkZWNyZWFzZVN1Y2Nlc3NMZXZlbCIsImNvbXB1dGVDaGVjayIsIm1ha2VQdWJsaWMiLCJmb3JjZVJvbGwiLCJDb0M3c29ja2V0IiwiZXhlY3V0ZUFzR00iLCJfaWQiLCJyb2xsRGFtYWdlQnV0dG9uIiwiQWN0b3IiLCJpbml0aWFsaXplIiwiY3JlYXR1cmVJbml0IiwicHJlcGFyZUJhc2VEYXRhIiwiaXRlbUlkZW50aWZpZXIiLCJjb2NpZCIsImNvY2lkRmxhZyIsImRhaWx5TGltaXQiLCJvbmVGaWZ0aFNhbml0eSIsInJhd01vdiIsInJhd0RiIiwicmF3QnVpbGQiLCJjdXJyZW50IiwiaHAiLCJwcmVwYXJlRW1iZWRkZWREb2N1bWVudHMiLCJwcmVwYXJlRGVyaXZlZERhdGEiLCJyYXdIcE1heCIsIm1wIiwicmF3TXBNYXgiLCJyYXdTYW5NYXgiLCJmaWx0ZXJNYXRyaXgiLCJwcmlvcml0eSIsInNlbGVjdENoYW5nZXMiLCJocE1heCIsIm1wTWF4IiwiYWN0b3JMaW5rIiwiZGlzcG9zaXRpb24iLCJzaWdodCIsImNoZWNrVW5kZWZpbmVkQXV0byIsInJldHVybkRhdGEiLCJzaG9ydCIsImluaXRUb2tlbiIsImNyZWF0ZURhdGEiLCJoYXNDb25kaXRpb25TdGF0dXMiLCJnZXRUZW1wb0luc2FuZUR1cmF0aW9uVGV4dCIsImhhc0NvbmRpdGlvblZhbHVlIiwicG9ydHJhaXQiLCJyZWFsVGltZSIsImJvdXRPZk1hZG5lc3NUYWJsZUlkIiwiYm91dE9mTWFkbmVzc1RhYmxlIiwidGFibGVzIiwidGFibGVSb2xsIiwiVEFCTEVfUkVTVUxUX1RZUEVTIiwiRE9DVU1FTlQiLCJkb2N1bWVudElkIiwiaXRlbURhdGEiLCJURVhUIiwidGV4dCIsImVtcHR5U2tpbGwiLCJjcmVhdGVTa2lsbCIsInNob3dTaGVldCIsInJlbmRlclNoZWV0IiwiY3JlYXRlV2VhcG9uU2tpbGwiLCJza2lsbERhdGEiLCJwZXJzb25hbCIsIm9jY3VwYXRpb24iLCJhcmNoZXR5cGUiLCJhdHRhY2siLCJ3cG5UeXBlIiwiY3JlYXRlZEF0dGFjayIsInNldEFjdG9yRmxhZyIsImNyZWF0ZUl0ZW0iLCJxdWFudGl0eSIsImNyZWF0ZUVtcHR5Qm9vayIsImdldEl0ZW1JZEJ5TmFtZSIsImNyZWF0ZUJvb2siLCJjcmVhdGVFbXB0eVNwZWxsIiwiY3JlYXRlU3BlbGwiLCJlbXB0eVNwZWxsIiwiY3JlYXRlRW1wdHlTa2lsbCIsImNyZWF0ZUVtcHR5SXRlbSIsImNyZWF0ZUVtcHR5V2VhcG9uIiwiY3JlYXRlQmlvU2VjdGlvbiIsImJpbyIsImJpb2dyYXBoeSIsInVwZGF0ZUJpb1ZhbHVlIiwidXBkYXRlQmlvVGl0bGUiLCJkZWxldGVCaW9TZWN0aW9uIiwibW92ZUJpb1NlY3Rpb25VcCIsIm1vdmVCaW9TZWN0aW9uRG93biIsInVwZGF0ZVRleHRBcmVhIiwidGV4dEFyZWEiLCJhcmVhTmFtZSIsImVtYmVkZGVkTmFtZSIsImRhdGFBcnJheSIsInByb2Nlc3NlZERhdGFBcnJheSIsImJhc2VDYWxjdWxhdGVkIiwicGFyc2VDaGFyYWN0ZXJpc3RpY3MiLCJhZGRUaGlzIiwiaXNBbnlCdXROb3RGbGFnZ2VkIiwiZ3JvdXAiLCJhcGkiLCJndWVzc0dyb3VwRnJvbURvY3VtZW50IiwiZnJvbUNvQ0lEUmVnZXhCZXN0IiwiY29jaWRSZWdFeHAiLCJleGlzdGluZ1NraWxscyIsImVsIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJmaW5kSW5kZXgiLCJleGlzdGluZ0l0ZW0iLCJ1cGRhdGVFbWJlZGRlZERvY3VtZW50cyIsImV4aXN0aW5nIiwia2VlcEJhc2UiLCJtYWluU2tpbGwiLCJhZGRJdGVtcyIsInNlY29uZFNraWxsIiwiZW5hYmxlQ2hhcmFjdGVyaXNpdGljcyIsImdldENoYXJhY3RlcmlzdGljIiwibHVjayIsImVyYSIsImV4cGFuZEl0ZW1BcnJheSIsIml0Iiwib3RoZXJzSXRlbXMiLCJhZGRVbmlxdWVJdGVtcyIsImJhY2tzdG9yeSIsInNlY3Rpb25OYW1lIiwiYmlvU2VjdGlvbnMiLCJtb25ldGFyeSIsInNldFRpbWVvdXQiLCJfc3RhdGUiLCJBcHBsaWNhdGlvbiIsIlJFTkRFUl9TVEFURVMiLCJSRU5ERVJJTkciLCJIb29rcyIsInJlc2V0QXJjaGV0eXBlIiwiY29uZmlybSIsInllcyIsImRlZmF1bHRZZXMiLCJjb3JlQ2hhcmFjIiwiZW50cnkiLCJjb3JlQ2hhcmFjdGVyaXN0aWNzIiwiY2hhcmFjIiwiY2hhckRpYWxvZ0RhdGEiLCJjb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYSIsInJlc2V0T2NjdXBhdGlvbiIsImNyZWRpdFJhdGluZyIsImFjdG9yQ3JlZGl0UmF0aW5nIiwiZmluZENvY0lkSW5MaXN0IiwicG9pbnRzRGlhbG9nRGF0YSIsIm9jY3VwYXRpb25Ta2lsbFBvaW50cyIsIm9wdGlvbmFsQ2hhciIsImRpYWxvZ0RhdGEiLCJza2lsbENvdW50IiwibWVyZ2VkIiwiY3JlZGl0UmF0aW5nU2tpbGwiLCJhcmNoZXR5cGVQb2ludHMiLCJvY2N1cGF0aW9uUG9pbnRzIiwicGVyc29uYWxQb2ludHMiLCJnZXRJdGVtc0J5TmFtZSIsImdldEZpcnN0U2tpbGxCeUNvQ0lEIiwidGVtcGxhdGVzIiwiY2hhck5hbWUiLCJhdHRyaWJOYW1lIiwibGNrIiwiZXJhc2VPbGQiLCJvY2N1cGF0aW9uU2tpbGwiLCJhcmNoZXR5cGVTa2lsbCIsInNldEx1Y2siLCJocEZyb21DaGFyYWN0ZXJpc3RpY3MiLCJfc2V0SHAiLCJhZGRVbmlxdWVJdGVtIiwibXBGcm9tQ2hhcmFjdGVyaXN0aWNzIiwiZ2V0UmVhc29uU2FuTG9zcyIsInNhbml0eUxvc3NFdmVudHMiLCJ0b3RhbExvc3MiLCJpbW11bml0eSIsImxlZnQiLCJyaWdodCIsImxvY2FsZUNvbXBhcmUiLCJzYW5NYXhGb3JtdWxhIiwic2FuaXR5TG9zc0V2ZW50Iiwic2V0U2FuIiwic2FuTG9zc0NoZWNrUGFzc2VkIiwic2FuTG9zc0NoZWNrRmFpbGxlZCIsInNhbkxvc3NNYXgiLCJzYW5Mb3NzTWluIiwiZGFpbHlMb3NzIiwiY3RodWxodU15dGhvcyIsInNldE1wIiwib2NjdXBhdGlvblBvaW50c1NwZW50IiwicmVzZXRPY2N1cGF0aW9uUG9pbnRzIiwicmVzZXRBcmNoZXR5cGVQb2ludHMiLCJyZXNldFBlcnNvbmFsUG9pbnRzIiwiYXJjaGV0eXBlUG9pbnRzU3BlbnQiLCJib251c1BvaW50cyIsImV4cGVyaWVuY2VQb2ludHMiLCJwZXJzb25hbFBvaW50c1NwZW50IiwiaGFzRGV2ZWxvcG1lbnRQaGFzZSIsImRldmVsb3BlbWVudCIsIm9ubHlSdW5PbmNlUGVyU2Vzc2lvbiIsImxvc3MiLCJzZXRBdHRyaWJBdXRvIiwidXBkYXRlZEtleSIsInRvZ2dsZUF0dHJpYkF1dG8iLCJkYkZyb21DaGFyYWN0ZXJpc3RpY3MiLCJzdW0iLCJidWlsZEZyb21DaGFyYWN0ZXJpc3RpY3MiLCJkaXZpc29yIiwibW92RnJvbUNoYXJhY3RlcmlzdGljcyIsImFnZSIsIk1PViIsImdldEl0ZW1zRnJvbU5hbWUiLCJ0b2dnbGVBY3RvckZsYWciLCJhdHRyaWJ1dGVOYW1lIiwibWlzc2luZyIsImNoYXJhY3RlcmlzdGljTmFtZSIsInNraWxsSWRlbnRpZmllciIsInBhY2tzIiwibWV0YWRhdGEiLCJlbnRpdHkiLCJnZXREb2N1bWVudCIsImxvZyIsIl9yYXdWYWx1ZSIsInVwZGF0ZVZhbHVlIiwid2VhcG9uRGF0YSIsIndlYXBvbnMiLCJ0b0pTT04iLCJyb2xsSW5pdGlhdGl2ZSIsImhhc0d1biIsImRlbnlMdWNrIiwiZGVueUJsaW5kVGFtcGVyaW5nIiwidW5zZXRBY3RvckZsYWciLCJmcm9tVXVpZFN5bmMiLCJleGVjIiwiY2hhcktleSIsImF0dHJpYktleSIsImF0dHIiLCJwaWxvdFNraWxscyIsImRyaXZlU2tpbGxzIiwidG9rZW5VdWlkIiwiaGFzUm9sbGFibGVDaGFyYWN0ZXJpc3RpY3MiLCJob3NSb2xsYWJsZVNraWxscyIsInJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsInJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlIiwiYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlIiwiYXZlcmFnZSIsImNoYXJWYWx1ZSIsInNldENoYXJhY3RlcmlzdGljIiwiZGV2ZWxvcGVtZW50UGhhc2UiLCJza2lsbHNSb2xsZWQiLCJEaWUiLCJhdWdtZW50Iiwic2tpbGxNYXN0ZXJpbmdNZXNzYWdlIiwiYXVnbWVudERpZSIsImF1Z21lbnRTQU5EaWUiLCJzYW5HYWluZWQiLCJzYW5HYWluZWRNZXNzYWdlIiwiZGVidWciLCJzY29yZSIsImluY3JlYXNlRXhwZXJpZW5jZSIsImNoYW5nZWQiLCJkZXZlbG9wTHVjayIsImN1cnJlbnRMdWNrIiwicHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrIiwiaGlnaGVyVGhhbkN1cnJlbnRMdWNrIiwiYXVnbWVudFJvbGwiLCJhdWdtZW50VmFsdWUiLCJkZXZlbG9wU2tpbGwiLCJjb25kaXRpb25WYWx1ZSIsImNvbmRpdGlvbnMiLCJmaWVsZCIsInRvZ2dsZUNvbmRpdGlvbiIsImZvcmNlVmFsdWUiLCJjdXN0b20iLCJvdmVybGF5Iiwic3RhdHVzRWZmZWN0cyIsInNvdXJjZSIsImVmZmVjdERhdGEiLCJmaWVsZHMiLCJqdXN0VGhpcyIsImRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzIiwicmVzZXRDb3VudGVyIiwiY291bnRlciIsInJlc2V0RGFpbHlTYW5pdHkiLCJmaWdodGluZ1NraWxscyIsImNsb3NlQ29tYmF0V2VhcG9ucyIsIndlYXBvbkxpc3QiLCJmaXJlYXJtU2tpbGxzIiwiQ00iLCJteXRob3NIYXJkZW5lZCIsInNldE15dGhvc0hhcmRlbmVkIiwiQ1IiLCJtb25ldGFyeUZvcm1hdCIsInN5bWJvbCIsIm1vbmV0YXJ5Rm9ybWF0S2V5cyIsInRvTG9jYWxlU3RyaW5nIiwibWluaW11bUZyYWN0aW9uRGlnaXRzIiwibW9uZXRhcnlWYWx1ZSIsInJvdyIsIm1vbmV0YXJ5VHlwZUtleXMiLCJzcGVuZGluZ0xldmVsIiwiY2FzaCIsImFzc2V0cyIsInUiLCJ0ZXN0VXNlclBlcm1pc3Npb24iLCJwbGF5ZXIiLCJjaGFyYWN0ZXJVc2VyIiwiY29udGVudHMiLCJzZXRIcCIsImhlYWx0aEJlZm9yZSIsImRhbWFnZVRha2VuIiwiYXJtb3JEYXRhIiwiZ3Jvc3NEYW1hZ2UiLCJhcm1vclZhbHVlIiwiaXNGb3JtdWxhIiwibmV0RGFtYWdlIiwiY2VpbCIsImhhc01ham9yV291bmQiLCJtYWpvcldvdW5kIiwicHVzaGluZyIsImlzVW5rbm93biIsIl91dWlkIiwicmFuZG9tSUQiLCJoYXNDYXJkIiwicmF3VmFsdWVTdHJpbmciLCJjcml0aWNhbFRocmVzaG9sZCIsImZ1bWJsZVRocmVzaG9sZCIsInN1Y2Nlc1RocmVzaG9sZCIsIl9tb2RpZmllZFJlc3VsdCIsIm1vZGlmaWVkIiwiZmxhdERpY2VNb2RpZmllclN0cmluZyIsImlzU2ltcGxlUm9sbCIsImhhc1BlbmFsdHkiLCJoYXNNb2RpZmllciIsIl9kaWNlTW9kaWZpZXIiLCJmdWxsTmFtZSIsIl9kaWZmaWN1bHR5Iiwib2xkQ2hlY2siLCJzdWNjZXNzTGV2ZWxJY29ucyIsInVua25vd25EaWZmaWN1bHR5IiwiaWNvbnMiLCJzdWNjZXNzSGludCIsImNzc0NsYXNzIiwiaGludCIsImZhaWx1cmVIaW50IiwiZ21EaWZmaWN1bHR5Q3JpdGljYWwiLCJnbURpZmZpY3VsdHlFeHRyZW1lIiwiZ21EaWZmaWN1bHR5SGFyZCIsImdtRGlmZmljdWx0eVJlZ3VsYXIiLCJfc2tpbGwiLCJfZ2V0SXRlbUZyb21JZCIsIl9pdGVtIiwiaXNEdW1teSIsImRpc3BsYXlSZXN1bHRUeXBlIiwiZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsIiwiZGlzcGxheUJvdGhTdWNjZXNzTGV2ZWwiLCJkb250RGlzcGxheVN1Y2Nlc3NMZXZlbCIsImltYWdlIiwiZ2V0TGlua0VsZW1lbnQiLCJjcmVhdGVGcm9tQWN0b3JSb2xsRGF0YSIsInJvbGxEYXRhIiwidGhyZXNob2xkIiwicm9sbFZhbHVlIiwidGVuUmVzdWx0IiwidGVuT25seU9uZURpZSIsImlzVmFsdWUiLCJpc0NoYXJhY3RpcmlzdGljIiwiaXNTa2lsbCIsImlzSXRlbSIsImlzQXR0cmlidXRlIiwic3VjY2Vzc1JlcXVpcmVkIiwibWFsZnVuY3Rpb25UeHQiLCJoYXNFbm91Z2hMdWNrIiwibmV4dExldmVsIiwibHVja1RvU3BlbmQiLCJjYW5JbmNyZWFzZVN1Y2Nlc3MiLCJjYW5Bd2FyZEV4cGVyaWVuY2UiLCJmb3JjZWQiLCJKU09OUm9sbFN0cmluZyIsImNzc0NsYXNzTGlzdCIsInBsYXllckNzc0NsYXNzIiwiZm9yY2VkU3VjY2VzcyIsImZvcmNlZEZhaWx1cmUiLCJ0b3RhbEx1Y2tTcGVudCIsInNoaWZ0IiwicmVtb3ZlVXBncmFkZXMiLCJmb3JjZVN1Y2Nlc3NMZXZlbCIsIl9mb3JjZUNoZWNrIiwiaGlnaCIsImxvdyIsInJhbmRvbSIsInVuaXRUb3RhbCIsInRlblRvdGFsIiwiaGFzRW5vdWdoIiwidGVuIiwiZmxhZ2dlZEZvckRldmVsb3BtZW50IiwiX2ZsYXZvciIsIl9jb250ZXh0IiwicGFyZW50VXVpZCIsInJhd3ZhbHVlIiwidG9vbHRpcEhlYWRlciIsImdldEh0bWxSb2xsRWxlbWVudCIsIm9yaWdpbmFsU3BlYWtlciIsIm5ld0NvbnRlbnQiLCJodG1sTWVzc2FnZSIsInJvbGxSZXN1bHRFbGVtZW50IiwiT1RIRVIiLCJ0b29sdGlwIiwicm9sbFRvb2xUaXAiLCJmYWNlIiwiZnJvbVJvbGxTdHJpbmciLCJjb21tYW5kIiwiX29uQ2xpY2tJbmxpbmVSb2xsIiwidGlwIiwiY2hpbGRyZW4iLCJhcHBlbmRDaGlsZCIsInBhIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicHQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwidG9wIiwieSIsImlubmVySGVpZ2h0IiwiemkiLCJnZXRDb21wdXRlZFN0eWxlIiwiekluZGV4IiwiaXNOdW1lcmljIiwiUGFyc2VDaGF0RW50cnkiLCJfRXhlY0NvbW1hbmQiLCJlc2NhcGVkIiwiYXNrIiwidGhyZXNob2xkU3RyIiwiZGlmZmljdWx0eVN0ciIsImFza1ZhbHVlIiwidGVzdCIsImdldEFjdG9yRnJvbVN0cmluZyIsImFjdG9yU3RyaW5nIiwic2tpbGxDaGVja01hY3JvIiwid2VhcG9uQ2hlY2tNYWNybyIsImJhc2VBY3RvciIsImdldERvY3VtZW50Q2xhc3MiLCJjaGVja01hY3JvIiwicm9sbERpY2UiLCJjcmVhdGVNYWNybyIsImJhciIsInNsb3QiLCJtYWNybyIsIm1hY3JvcyIsIm0iLCJhc3NpZ25Ib3RiYXJNYWNybyIsIk1hY3JvIiwidG9nZ2xlRGV2UGhhc2UiLCJ1cGRhdGVDaGFyU2hlZXRzIiwidG9nZ2xlQ2hhckNyZWF0aW9uIiwiZ2V0VGFyZ2V0IiwiY2hlY2tPcHRpb25zIiwicGxheWVyVG9rZW5JZHMiLCJzZWxlY3RlZFBsYXllcklkcyIsImZvckVhY2giLCJjaGVja2VkIiwic3RhcnRSZXN0IiwiY2hhdENvbnRlbnQiLCJxdWlja0hlYWxlciIsImlzQ3JpdGljYWxXb3VuZHMiLCJkYWlseVNhbml0eUxvc3MiLCJocFZhbHVlIiwibXBWYWx1ZSIsImhlYWxBbW91bnQiLCJob3VycyIsIm1hZ2ljQW1vdW50IiwidG9nZ2xlWFBHYWluIiwidGsiLCJyZW5kZXJlZCIsImVudGl0eVR5cGUiLCJmb2xkZXIiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJpc1NlY3VyZUNvbnRleHQiLCJ3cml0ZVRleHQiLCJwb3NpdGlvbiIsImZvY3VzIiwicmVqZWN0IiwiZXhlY0NvbW1hbmQiLCJFcnJvciIsImNhdGNoIiwibGVuIiwicVN0cmluZyIsImNoYXJBdCIsImNoYXJDb2RlQXQiLCJqIiwic2V0QnlQYXRoIiwicGF0aCIsIm8iLCJnZXRCeVBhdGgiLCJkb2MiLCJkb2NOYW1lIiwiZG9jSWQiLCJpbnN0YW5jZSIsImVtYmVkZGVkSWQiLCJpZGVudGlmaWVycyIsImdldEFjdG9yRG9jdW1lbnRGcm9tRHJvcERhdGEiLCJkcm9wRGF0YSIsImRvY1V1aWQiLCJnZXREb2N1bWVudEZyb21LZXkiLCJjcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMiLCJmb2xkZXJOYW1lIiwiaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyIiwiZm9sZGVycyIsIkZvbGRlciIsImd1ZXNzSXRlbSIsIm9NIiwicGFja2FnZSIsImdldERvY3VtZW50cyIsImZhbGxiYWNrQW55IiwidG9LZWJhYkNhc2UiLCJub3JtYWxpemUiLCJzdWJtaXRPbkNsb3NlIiwic3VibWl0T25DaGFuZ2UiLCJzdXBwb3J0ZWRMYW5ndWFnZXMiLCJlZGl0YWJsZSIsImlzRWRpdGFibGUiLCJndWVzc0NvZGUiLCJndWVzc0lkIiwiaWRQcmVmaXgiLCJnZXRQcmVmaXgiLCJsYW5nIiwiaXNFbmFibGVkIiwiQ29DSURLZXlzIiwiZmxhdHRlbk9iamVjdCIsInRyYW5zbGF0aW9ucyIsIkNvQ0lERmxhZyIsInByZWZpeCIsImV4aXN0aW5nS2V5cyIsImlzU3lzdGVtSUQiLCJfZXhpc3RpbmciLCJ3b3JsZERvY3VtZW50cyIsImZyb21Db0NJREFsbCIsInNjb3BlIiwidXNlZEVyYXMiLCJ1bmlxdWVXb3JsZFByaW9yaXR5Iiwid29ybGREb2N1bWVudEluZm8iLCJ3YXJuRHVwbGljYXRlV29ybGRQcmlvcml0eSIsIndvcmxkRHVwbGljYXRlcyIsImNvbXBlbmRpdW1Eb2N1bWVudHMiLCJ1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHkiLCJjb21wZW5kaXVtRG9jdW1lbnRJbmZvIiwid2FybkR1cGxpY2F0ZUNvbXBlbmRpdW1Qcmlvcml0eSIsImNvbXBlbmRpdW1EdXBsaWNhdGVzIiwic2libGluZ3MiLCJfb25DbGlja1RvZ2dsZSIsImd1ZXNzIiwiY3NzIiwiY29sb3IiLCJhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIiwiaGVhZGVyQnV0dG9ucyIsInNoZWV0Q29DSUQiLCJDb0NJREVkaXRvckJ1dHRvbiIsIm9uY2xpY2siLCJudW1iZXJPZkJ1dHRvbnMiLCJDb0M3Q29udGV4dE1lbnUiLCJtZW51IiwiX2NhbGxiYWNrIiwiX2h0bWwiLCJfbWVudSIsIm1lbnVUcmlnZ2VyIiwiY29udGV4dG1lbnUiLCJfb25Db250ZXh0TWVudSIsIm1lbnVFbGVtZW50IiwiQ3JlYXRlTWVudSIsIl9vbk1lbnVBY3Rpb24iLCJtZW51Q29udGFpbmVyIiwiY2xvc2VBbGwiLCJlYWNoIiwidmlzaWJpbGl0eSIsIm1lbnVOYW1lIiwiY29udGV4dE1lbnUiLCJ3cmFwcGVyIiwic3ViTWVudSIsImNsaWVudFgiLCJjbGllbnRZIiwibWVudUhlaWdodCIsIm91dGVySGVpZ2h0IiwibWVudVdpZHRoIiwib3V0ZXJXaWR0aCIsImNhblNlZSIsImFkZENsYXNzIiwic2VjdGlvbiIsIkNyZWF0ZVNlY3Rpb24iLCJtdWx0aSIsInN1YiIsIkNvQzdBY3RvclNoZWV0IiwiQWN0b3JTaGVldCIsIl9nZXRIZWFkZXJCdXR0b25zIiwic2hvd0hpZGRlbkRldk1lbnUiLCJjYW5EcmFnVG9rZW4iLCJsaW5rZWRBY3RvciIsIml0ZW1zQnlUeXBlIiwiY29tYmF0U2tpbGxzIiwicmFuZ2VXcG4iLCJtZWxlZVdwbiIsImFjdG9yRmxhZ3MiLCJwZXJtaXNzaW9uTGltaXRlZCIsIkxJTUlURUQiLCJhbGxvd1VubG9jayIsInBlcnNvbmFsRGVzY3JpcHRpb24iLCJzZXgiLCJyZXNpZGVuY2UiLCJiaXJ0aHBsYWNlIiwib3JnYW5pemF0aW9uIiwicGxheWVybmFtZSIsIm1hbnVhbENyZWRpdCIsImNyZWRpdCIsIm1vbmV0YXJ5U3ltYm9sIiwic3BlbnQiLCJhc3NldHNEZXRhaWxzIiwiZGV2ZWxvcG1lbnQiLCJwdWxwUnVsZUFyY2hldHlwZSIsInB1bHBSdWxlT3JnYW5pemF0aW9uIiwiaXNEZWFkIiwiaXNEeWluZyIsIml0ZW1Ub1VwZGF0ZSIsInVwZGF0ZWRFeHAiLCJpdGVtVHlwZSIsIm1lbGVlU2tpbGxzIiwicmFuZ2VTa2lsbHMiLCJjYnRTa2lsbHMiLCJ1c2VzQWx0ZXJuYXRlU2tpbGwiLCJza2lsbFNldCIsIl9wcm9wZXJ0aWVzIiwiaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhIiwiaXNGaXJzdCIsImlzTGFzdCIsInNob3dJbnZlbnRvcnlJdGVtcyIsInNob3dJbnZlbnRvcnlCb29rcyIsInNob3dJbnZlbnRvcnlTcGVsbHMiLCJzaG93SW52ZW50b3J5VGFsZW50cyIsInNob3dJbnZlbnRvcnlTdGF0dXNlcyIsInNob3dJbnZlbnRvcnlXZWFwb25zIiwiaGFzQ29uZGl0aW9ucyIsImNvbmRpdGlvbiIsIm9uQ2xvc2VTaGVldCIsIl9vblNlY3Rpb25IZWFkZXIiLCJfb25JdGVtSGVhZGVyIiwiX29uSW52ZW50b3J5SGVhZGVyIiwiZGJsY2xpY2siLCJfdG9nZ2xlUmVhZE9ubHkiLCJfb25BZGRBbW8iLCJfb25SZWxvYWRXZWFwb24iLCJjb21wZW5kaXVtIiwiX29uTG9ja0NsaWNrZWQiLCJfb25GbGFnQ2xpY2tlZCIsIl9vbkZvcm11bGFDbGlja2VkIiwiX29uQXV0b1RvZ2dsZSIsIm1lbnVzIiwicm9sbE1lbnUiLCJzYW5NZW51Iiwicm9sbENvbnRleHRNZW51IiwiX29uQ29udGV4dE1lbnVDbGljayIsInNhbkNvbnRleHRNZW51IiwiX29uT3Bwb3NlZFJvbGwiLCJfb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QiLCJfb25Sb2xsU2tpbGxUZXN0IiwiX29uUm9sbEF0dHJpYlRlc3QiLCJfb25EcmFnVG9rZW5TdGFydCIsIl9vbkRyYWdDaGFyYWN0ZXJpc3RpYyIsIl9vbkRyYWdBdHRyaWJ1dGUiLCJfb25EcmFnU2FuQ2hlY2siLCJfb25Sb2xsQ2hhcmFjdGVyaXRpY3NWYWx1ZSIsIl9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlIiwiX29uUmVzZXRDb3VudGVyIiwiX29uQ29uZGl0aW9uVG9nZ2xlIiwiaGVhbCIsInJldml2ZSIsImNoZWNrRm9yRGVhdGgiLCJfb25JdGVtUm9sbCIsIl9vbldlYXBvblJvbGwiLCJfb25FZmZlY3QiLCJfb25XZWFwb25Ta2lsbFJvbGwiLCJfb25XZWFwb25EYW1hZ2UiLCJ3aGVlbElucHV0cyIsIndoZWVsSW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiX29uV2hlZWwiLCJfb25JdGVtU3VtbWFyeSIsIl9vbkl0ZW1Qb3B1cCIsIl9vblJlbmRlckl0ZW1TaGVldCIsImV2IiwicGFyZW50cyIsIml0ZW1Ub0RlbGV0ZSIsInN0cmljdCIsInNsaWRlVXAiLCJzdG9wUHJvcGFnYXRpb24iLCJfb25UcmFkZUl0ZW0iLCJkZXRhaWwiLCJkaXNhYmxlIiwibW91c2VlbnRlciIsInRvb2xUaXBTa2lsbEVudGVyIiwiQ29DN1Rvb2x0aXBzIiwidG9vbFRpcExlYXZlIiwidG9vbFRpcENoYXJhY3RlcmlzdGljRW50ZXIiLCJ0b29sVGlwQXR0cmlidXRlRW50ZXIiLCJ0b29sVGlwQXV0b0VudGVyIiwidG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudCIsImRlbGF5IiwiVG9vbFRpcEhvdmVyIiwidG9vbFRpcFRpbWVyIiwidG9vbFRpcCIsImRpc3BsYXlUb29sVGlwIiwiY2hhcklkIiwiYXR0cmlidXRlSWQiLCJhdHRyaWJ1dGVzIiwidGFyZ2V0VHlwZSIsInJvbGxPcHRpb25zIiwiYWN0b3JGcm9tIiwiYWN0b3JUbyIsInZpc2libGUiLCJOT05FIiwiX29uRHJhZ1N0YXJ0IiwiZHJhZ0RhdGEiLCJib3giLCJDb0M3VHlwZSIsImlzTG9ja2VkIiwiZGVsdGFZIiwicmVhZE9ubHkiLCJzZWNyZXRzIiwiaGFzQ2xhc3MiLCJzdW1tYXJ5IiwiZGl2Iiwic3BlY2lhbERpdiIsImhpZGUiLCJzbGlkZURvd24iLCJwYW5uZWxDbGFzcyIsInBhbm5lbCIsImlzIiwib2wiLCJuZXh0IiwicG9wdXBTa2lsbCIsImVucmljaGVkVmFsdWUiLCJzY3JvbGxZIiwicHJvY2VlZFdpdGhvdXRUYXJnZXQiLCJjYW5jZWwiLCJwcm9jZWVkIiwicm9sbEZvcm11bGEiLCJvdmVycmlkZXMiLCJjcmVkaXRWYWx1ZSIsInNlbGVjdGVkSW5kZXgiLCJDb0M3TlBDU2hlZXQiLCJhbGxvd0Zvcm11bGEiLCJkaXNwbGF5Rm9ybXVsYSIsImhhc1NhbiIsImhhc01wIiwiaGFzTHVjayIsImlzQ3JlYXR1cmUiLCJoYXNJbnZlbnRvcnkiLCJlbnJpY2hlZEJpb2dyYXBoeVBlcnNvbmFsRGVzY3JpcHRpb24iLCJlbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyIiwia2VlcGVyIiwic2FubG9zc01lbnUiLCJzYW5sb3NzQ29udGV4dE1lbnUiLCJfb25TYW5Mb3NzQ29udGV4dE1lbnVDbGljayIsIl9vblNhbkNoZWNrIiwicmVzaXphYmxlIiwibWluaW1pemFibGUiLCJmb3JjZUF1dG8iLCJzZXRQb3NpdGlvbiIsIkNvQzdDcmVhdHVyZVNoZWV0IiwiQ29DN0NyZWF0ZU15dGhvc0VuY291bnRlciIsImlzSW1tdW5pdHkiLCJfb25CdXR0b25DbGljayIsIkNvQzdDaGFyYWN0ZXJTaGVldCIsInN1bW1hcml6ZWQiLCJ0b2dnbGVTaGVldE1vZGUiLCJza2lsbExpc3RNb2RlVmFsdWUiLCJza2lsbFNob3dVbmNvbW1vbiIsInNob3dJY29uc09ubHkiLCJvY2N1cGF0aW9uU2V0IiwiYXJjaGV0eXBlU2V0IiwidG90YWxFeHBlcmllbmNlIiwidG90YWxPY2N1cGF0aW9uIiwiaW52YWxpZE9jY3VwYXRpb25Qb2ludHMiLCJ0b3RhbEFyY2hldHlwZSIsImludmFsaWRBcmNoZXR5cGVQb2ludHMiLCJ0b3RhbFBlcnNvbmFsIiwiaW52YWxpZFBlcnNvbmFsUG9pbnRzIiwiY3JlZGl0UmF0aW5nTWF4IiwiY3JlZGl0UmF0aW5nTWluIiwiaW52YWxpZENyZWRpdFJhdGluZyIsInB1bHBUYWxlbnRDb3VudCIsInRhbGVudCIsIm1pblB1bHBUYWxlbnRzIiwidGFsZW50cyIsImludmFsaWRQdWxwVGFsZW50cyIsImFsbG93RGV2ZWxvcG1lbnQiLCJhbGxvd0NoYXJDcmVhdGlvbiIsImRldmVsb3BtZW50Um9sbEZvckx1Y2siLCJzaG93RGV2UGFubmVsIiwiX21vbmV0YXJ5Rm9ybWF0cyIsIm1vbmV0YXJ5Rm9ybWF0cyIsInNob3dDdXJyZW5jeVN5bWJvbCIsIl9tb25ldGFyeVR5cGVzIiwibW9uZXRhcnlUeXBlcyIsIm9uZUJsb2NrQmFja1N0b3J5IiwicHJldmlvdXNTcGVjIiwiaXNTcGVjaWFsaXphdGlvbiIsInNraWxsc0J5VmFsdWUiLCJ0b3BTa2lsbHMiLCJ0b3BXZWFwb25zIiwicmV2ZXJzZSIsImRpc3BsYXlQbGF5ZXJOYW1lIiwic2tpbGxMaXN0RW1wdHkiLCJlbnJpY2hlZEJhY2tzdG9yeSIsIl9zYXZlU2Nyb2xsUG9zaXRpb25zIiwiX3Njcm9sbFBvc2l0aW9uc1giLCJwb3MiLCJzZWwiLCJzY3JvbGxMZWZ0IiwiX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMiLCJzZWxlY3RvcnMiLCJwb3NpdGlvbnMiLCJfb25Ta2lsbERldiIsIl9vbkl0ZW1EZXRhaWxzIiwidG9nZ2xlU2tpbGxMaXN0TW9kZSIsInRvZ2dsZVNraWxsVW5jb21tb25Nb2RlIiwiX29uQWRkU2FuaXR5TG9zc1JlYXNvbiIsIl9vbkRlbGV0ZVNhbml0eUxvc3NSZWFzb24iLCJibHVyIiwiX29uRWRpdFNhbml0eUxvc3NSZWFzb24iLCJfb25Ub2dnbGVLZWVwZXJGbGFncyIsIl9vbkFkZE1vbmV0YXJ5IiwiX29uUmVtb3ZlTW9uZXRhcnkiLCJjYXNoVHlwZSIsImNhc2hWYWx1ZSIsImFzc2V0c1R5cGUiLCJhc3NldHNWYWx1ZSIsInNwZW5kaW5nVHlwZSIsInNwZW5kaW5nVmFsdWUiLCJzdHlsZVNoZWV0IiwiY3NzUnVsZUluZGV4Iiwic3R5bGVTaGVldHMiLCJocmVmIiwiZW5kc1dpdGgiLCJydWxlcyIsInNlbGVjdG9yVGV4dCIsIkNTU1N0eWxlIiwicmVtb3ZlUHJvcGVydHkiLCJzZXRQcm9wZXJ0eSIsIkZvbnRGYWNlIiwibG9hZCIsImxvYWRlZEZhY2UiLCJmb250cyIsIndlaWdodCIsImV4cGFuZGVkIiwiQ29DN0NvbWJhdCIsInJlbmRlckNvbWJhdFRyYWNrZXIiLCJjdXJyZW50Q29tYmF0IiwiY29tYmF0cyIsImN1cnJlbnRJbmRleCIsImNvbWJJZCIsImNvbWJhdGFudENvbnRyb2xzRGl2IiwiY29tYmF0YW50IiwiY29tYmF0YW50cyIsInByZXBlbmQiLCJpbml0aWF0aXZlIiwidG9rZW5Jbml0aWF0aXZlIiwiaW5pdGlhdGl2ZVRlc3QiLCJoNCIsImZvbnRXZWlnaHQiLCJ0ZXh0U2hhZG93IiwiYmFja2dyb3VuZCIsIl9vblRvZ2dsZUd1biIsImNvbWJhdGFudElkIiwibmV3SW5pdCIsInNldEluaXRpYXRpdmUiLCJpZHMiLCJDb0NJREJhdGNoIiwiZm91bmRLZXlzIiwib3V0IiwibWlzc2luZ05hbWVzIiwic3VmZml4Iiwic3VmZml4UmVnRXhwIiwib25TZXROYW1lIiwib25DbGlja0d1ZXNzIiwia2V5dXAiLCJvbktleXVwIiwidHlwZU5hbWUiLCJwcm9jZXNzU2tpbGxLZXlzIiwidXBkYXRlTGlzdCIsInRva2VuT2Zmc2V0IiwiaXRlbU9mZnNldCIsImFjdG9yRGF0YSIsImV4cGFuZGVkRmxhZ3MiLCJ1cGRhdGVEb2N1bWVudHMiLCJwb3B1bGF0ZVNraWxsS2V5cyIsInNjZW5lRGF0YSIsIlVwZGF0ZXIiLCJjaGVja0ZvclVwZGF0ZSIsInN5c3RlbVVwZGF0ZVZlcnNpb24iLCJqb3VybmFsIiwicnVuTWlncmF0ZSIsInVwZGF0ZWRNb2R1bGVzIiwiY3VycmVudE1vZHVsZXMiLCJwYWNrYWdlTmFtZSIsIm1vZHVsZSIsIm1vZCIsInNraXAiLCJPSyIsInBlcm1hbmVudCIsIm1pZ3JhdGVBY3RvckRhdGEiLCJpc0VtcHR5IiwiZW5mb3JjZVR5cGVzIiwibWlncmF0ZUl0ZW1EYXRhIiwidGFibGUiLCJtaWdyYXRlVGFibGVEYXRhIiwibWlncmF0ZU1hY3JvRGF0YSIsIm1pZ3JhdGVTY2VuZURhdGEiLCJtaWdyYXRlQ29tcGVuZGl1bURhdGEiLCJfbWlncmF0ZUFjdG9yQ2hhcmFjdGVyU2FuaXR5IiwiX21pZ3JhdGVBY3RvckFydHdvcmsiLCJfbWlncmF0ZUFjdG9yS2VlcGVyTm90ZXMiLCJfbWlncmF0ZUFjdG9yTnBjQ3JlYXR1cmUiLCJfbWlncmF0ZUFjdG9yU3RhdHVzRWZmZWN0QWN0aXZlIiwiX21pZ3JhdGVBY3RvclNhbkxvc3NSZWFzb25zIiwiX21pZ3JhdGVBY3Rvck1vbmV0YXJ5IiwiYXJyIiwiaXRlbVVwZGF0ZSIsImRvY3VtZW50VHlwZSIsIndhc0xvY2tlZCIsImNvbmZpZ3VyZSIsIm1pZ3JhdGUiLCJkb2N1bWVudHMiLCJfbWlncmF0ZUl0ZW1FbWJlZGRlZHYxMCIsIl9taWdyYXRlSXRlbUV4cGVyaWVuY2UiLCJfbWlncmF0ZUl0ZW1BcnR3b3JrIiwiX21pZ3JhdGVJdGVtQm9va0F1dG9tYXRlZCIsIl9taWdyYXRlSXRlbUtlZXBlck5vdGVzIiwiX21pZ3JhdGVJdGVtU3BlbGxBdXRvbWF0ZWQiLCJfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIiwiX21pZ3JhdGVJdGVtRXJhcyIsIl9taWdyYXRlSXRlbXYxMCIsIl9taWdyYXRlSXRlbUJvb2tVbml0cyIsIl9taWdyYXRlTWFjcm9BcnR3b3JrIiwiX21pZ3JhdGVUYWJsZUFydHdvcmsiLCJyZXR1cm5zIiwiX21pZ3JhdGVUb2tlbkFydHdvcmsiLCJNYXAiLCJvcmlnaW5hbCIsImciLCJzcGVsbHMiLCJjb3N0IiwiY2FzdGluZ1RpbWUiLCJ1bmlkZW50aWZpZWQiLCJhdXRob3IiLCJkYXRlIiwibGFuZ3VhZ2UiLCJteXRob3NSYXRpbmciLCJub3RlcyIsImdhaW4iLCJDTUkiLCJDTUYiLCJuZWNlc3NhcnkiLCJ3ZWVrc1N0dWR5VGltZSIsInByb2dyZXNzIiwic3R1ZHkiLCJrZWVwZXJOb3RlcyIsImVuY291bnRlcmVkQ3JlYXR1cmVzIiwiaW0iLCJhdHRhY2tzUGVyUm91bmQiLCJpbmRlZmluaXRlSW5zYW5pdHlMZXZlbCIsIm5hbWVDaGFyYWN0ZXJzIiwiZW4iLCJkYk5vbmUiLCJhcm1vck5vbmUiLCJhdHRhY2tzUGVyUm91bmROb25lIiwic2FuTG9zc05vbmUiLCJmdWxsZGIiLCJoYWxmZGIiLCJzZWN0aW9uQ29tYmF0cyIsIm5ld0NvbWJhdEhlYWRlciIsInNlY3Rpb25Ta2lsbHMiLCJzZWN0aW9uTGFuZ2F1Z2VzIiwic2VjdGlvblNwZWxscyIsImhhbmRndW4iLCJyaWZsZSIsInNtYiIsIm1hY2hpbmVHdW4iLCJsYXVuY2hlZCIsImV4YW1wbGUiLCJkZSIsImRpY2VTaG9ydCIsInBsIiwiZnIiLCJlcyIsIndlYXBvbkRvZGdlIiwiZ3Vlc3NTdGFydENvbWJhdCIsInNlY3Rpb25zIiwiQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAiLCJjaGVja0xhbmd1YWdlIiwiZ2V0RXhhbXBsZVRleHQiLCJnZXRUcmFuc2xhdGlvbnMiLCJnZXRLZXlzIiwiZ2V0UmVndWxhckV4cHJlc3Npb25zIiwiQ29DN0FjdG9ySW1wb3J0ZXIiLCJpdGVtTG9jYXRpb25zIiwiYXNOdW1iZXIiLCJhc1N0cmluZyIsImdldFJlZ0V4IiwicmVnZXgiLCJjbGVhblN0cmluZyIsInRyYW5zbGF0ZVJvbGwiLCJyZWdFeCIsInRvSFRNTCIsInJlZ0V4S2V5IiwicmVnRXhwIiwicmVxdWlyZWRHcm91cCIsInJlbW92ZUZyb21UZXh0Iiwic2F2ZUtleXMiLCJwcm9jZXNzQ29tYmF0IiwibmV3bGluZSIsIkNvQzdJbXBvcnRlciIsImxhc3RQZXJjZW50IiwibWF4TG9vcHMiLCJwZXJjZW50YWdlIiwiaXNSYW5nZWQiLCJkYW1hZ2VzIiwiaXNTaG90Z3VuIiwiYXR0YWNrcyIsInByb2Nlc3NTa2lsbHMiLCJicmVha3MiLCJwcm9jZXNzU3BlbGxzIiwic3BlbGxzQXJyIiwic3BlbGwiLCJwYXJzZUNoYXJhY3RlciIsImhlYWRlciIsInN1YnN0ciIsIm9jY3VwYXRpb25BZ2UiLCJyZWdFeHBTZWN0aW9ucyIsImdtbm90ZXMiLCJkaXNhYmxlQXR0cmliQXV0byIsImF0dHJpYlZhbHVlIiwiY3JlYXRlRW50aXR5IiwiY2hhcmFjdGVyRGF0YSIsIm5wYyIsInVwZGF0ZUl0ZW1EYXRhIiwibGFzdFdlYXBvblNraWxsIiwicGFpciIsIndlYXBvblNraWxscyIsInBjIiwiaXRlbXNEYXRhIiwid2VhcG9uU2tpbGwiLCJjbG9uZWQiLCJsYW5ndWFnZXMiLCJjbG9uZSIsIm5ld1NraWxsIiwibmVlZHNDb252ZXJzaW9uIiwibmVlZHNDb252ZXJzaW9uUmVzdWx0IiwiY3JlYXRlQWN0b3IiLCJpbnB1dHMiLCJjb252ZXJ0RnJvbTZFIiwiY29udmVydDdFIiwidGVzdE1vZGUiLCJjcmVhdHVyZSIsIkNvQzdEaXJlY3RvcnlQaWNrZXIiLCJGaWxlUGlja2VyIiwiYWN0aXZlU291cmNlIiwiYnVja2V0IiwiRGVmYXVsdERpcmVjdG9yeSIsInJhdyIsInByb2Nlc3NIdG1sIiwicGlja2VyIiwicGlja2VyQnV0dG9uIiwiY3JlYXRlRGVmYXVsdERpcmVjdG9yeSIsImNyZWF0ZURpcmVjdG9yeSIsInVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeSIsImZpbGUiLCJmaWxlbmFtZSIsInVwbG9hZCIsIkZpbGUiLCJDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIiLCJnZXRCYWNrc3RvcnkiLCJiYWNrc3RvcnlKU09OIiwiYmxvY2siLCJjb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEiLCJkaG9sZUhvdXNlRGF0YSIsIkludmVzdGlnYXRvciIsImJhY2tzdG9yaWVzIiwiQmFja3N0b3J5IiwiUGVyc29uYWxEZXRhaWxzIiwiTmFtZSIsIkNoYXJhY3RlcmlzdGljcyIsIlNUUiIsIkNPTiIsIlNJWiIsIkRFWCIsIkFQUCIsIklOVCIsIlBPVyIsIkVEVSIsIlNhbml0eSIsIlNhbml0eU1heCIsIkhpdFB0cyIsIkhpdFB0c01heCIsIk1hZ2ljUHRzIiwiTWFnaWNQdHNNYXgiLCJMdWNrIiwiTW92ZSIsIkRhbWFnZUJvbnVzIiwiQnVpbGQiLCJPY2N1cGF0aW9uIiwiQWdlIiwiR2VuZGVyIiwiUmVzaWRlbmNlIiwiQmlydGhwbGFjZSIsImV4dHJhY3RTa2lsbHMiLCJTa2lsbHMiLCJTa2lsbCIsInBvc3Nlc2lvbnMiLCJleHRyYWN0UG9zc2Vzc2lvbnMiLCJQb3NzZXNzaW9ucyIsIm1ha2VTa2lsbE5hbWUiLCJkaG9sZUhvdXNlc2tpbGxzIiwic3Vic2tpbGwiLCJoYWxmIiwiZmlmdGgiLCJmaW5kV2VhcG9uU2tpbGxJZCIsImdldEVtYmVkZGVkQ29sbGVjdGlvbiIsImRob2xlaG91c2VQb3NzZXNzaW9ucyIsImlzQXJyYXkiLCJleHRyYWN0V2VhcG9ucyIsImRob2xlaG91c2VXZWFwb25zIiwic2tpbGxuYW1lIiwibWFsZiIsInNhdmVQb3J0cmFpdCIsImJhc2U2NFBvcnRyYWl0IiwiZmlsZU5hbWUiLCJiYXNlNjRSZXNwb25zZSIsImZldGNoIiwiaW1hZ2VCbG9iIiwiYmxvYiIsImNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlIiwiZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEiLCJjYW4iLCJQb3J0cmFpdCIsIldlYXBvbnMiLCJDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyIsImltcG9ydFR5cGUiLCJjb252ZXJ0NkUiLCJjYW5VcGxvYWQiLCJwbGFjZWhvbGRlciIsIl9vbkpTT05GaWxlU2VsZWN0ZWQiLCJjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQiLCJnZXRJbnB1dHMiLCJqc29uRmlsZUlucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJwb3J0cmFpdEltYWdlIiwiY2hhcmFjdGVyTmFtZSIsInByZXZpZXciLCJmaWxlcyIsImZpbGVSZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiY2hhcmFjdGVySlNPTiIsInBlcnNvbmFsRGV0YWlscyIsInRleHRDb250ZW50IiwicmVhZEFzVGV4dCIsImFjdG9yVHlwZSIsImltcG9ydEFjdG9yIiwiY3JlYXRlZEFjdG9yIiwib25jZSIsIkRyb3BDb0NJRCIsInByb2Nlc3NGb3JtIiwicmVzcG9uc2UiLCJwcm9jZXNzSXRlbSIsIm5vIiwiQ29DN09jY3VwYXRpb25TaGVldCIsIkl0ZW1TaGVldCIsIl9vbkl0ZW1EZWxldGUiLCJfb25Hcm91cEl0ZW1EZWxldGUiLCJfb25Hcm91cENvbnRyb2wiLCJEcmFnRHJvcCIsImNhbGxiYWNrcyIsImRyb3AiLCJjb2xsZWN0aW9uTmFtZSIsIm9wdGlvbmFsU2tpbGwiLCJ1c2VDb0NJRCIsIkNvQ0lkIiwiaXRlbUluZGV4IiwiaGFzT3duZXIiLCJpc0VtYmVkZGVkIiwib2NjdXBhdGlvblBvaW50c1N0cmluZyIsIml0ZW1Qcm9wZXJ0aWVzIiwib2NjdXBhdGlvblByb3BlcnRpZXMiLCJlbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUiLCJvcHRpb25uYWwiLCJtYW5kYXRvcnkiLCJjYXJhYyIsImNhcmFjTmFtZSIsIm9yU3RyaW5nIiwiQ29DN0ludmVzdGlnYXRvcldpemFyZCIsInBhZ2VMaXN0IiwiUEFHRV9OT05FIiwiUEFHRV9JTlRST0RVQ1RJT04iLCJQQUdFX0NPTkZJR1VSQVRJT04iLCJQQUdFX1NFVFVQUyIsIlBBR0VfQVJDSEVUWVBFUyIsIlBBR0VfQ0hBUkFDVElTVElDUyIsIlBBR0VfQVRUUklCVVRFUyIsIlBBR0VfVklFV19BVFRSSUJVVEVTIiwiUEFHRV9PQ0NVUEFUSU9OUyIsIlBBR0VfT0NDVVBBVElPTl9TS0lMTFMiLCJQQUdFX0FSQ0hFVFlQRV9TS0lMTFMiLCJQQUdFX1BPSU5UU19TS0lMTFMiLCJQQUdFX0lOVkVTVElHQVRPUiIsIlBBR0VfQkFDS1NUT1JZIiwiUEFHRV9DUkVBVEUiLCJjaGFyYWN0ZXJpc3RpY3NNZXRob2RzIiwiTUVUSE9EX0RFRkFVTFQiLCJNRVRIT0RfUk9MTCIsIk1FVEhPRF9QT0lOVFMiLCJNRVRIT0RfVkFMVUVTIiwiY29jaWRDcmVkaXRSYXRpbmciLCJjb2NpZExhbmd1YWdlT3duIiwicGFnZU9yZGVyIiwicGFnZXMiLCJkZWZhdWx0U2V0dXAiLCJsb2FkQ2FjaGVJdGVtQnlDb0NJRCIsInNob3dMb2FkaW5nIiwiZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCIsInJlZ2V4cCIsImNhY2hlQ29DSUQiLCJnZXRDYWNoZUl0ZW1CeUNvQ0lEIiwiY29jaWRzIiwiZGVmYXVsdEVyYSIsImdldEFnZUFkanVzdG1lbnRzIiwic2V0dXBNb2RpZmllcnMiLCJyZXF1aXJlc0FnZUFkanVzdG1lbnRzIiwiZGVkdWN0Iiwic2V0dXAiLCJjYW5OZXh0IiwiY3JlYXRlQnV0dG9uIiwic2hvd01vbmV0YXJ5Iiwic3RlcCIsInNldHVwcyIsIm9jY3VwYXRpb25zIiwiYXJjaGV0eXBlcyIsIl9lcmFzIiwiY2hhcmFjdGVyaXN0aWNzTWV0aG9kIiwiZW5mb3JjZVBvaW50QnV5IiwicXVpY2tGaXJlVmFsdWVzIiwiaGFzQXJjaGV0eXBlcyIsImNvcmVDaGFyYWN0ZXJpc3RpYyIsInRvTG9jYWxlVXBwZXJDYXNlIiwic3VnZ2VzdGVkT2NjdXBhdGlvbnMiLCJzdWdnZXN0ZWRUcmFpdHMiLCJlbXB0aWVzIiwic2V0dXBQb2ludHMiLCJwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcyIsImRlZHVjdFRvdGFsIiwiZGVkdWN0RnJvbSIsIm4iLCJyZWR1Y2VGcm9tIiwibHVja1ZhbHVlIiwicGVyc29uYWxUZXh0Iiwic2tpbGxJdGVtcyIsImxhbmd1YWdlTmFtZSIsInJvd3MiLCJpc011bHRpcGxlIiwiaXNDcmVkaXRSYXRpbmciLCJpc1BpY2thYmxlIiwiaXNPY2N1cGF0aW9uRGVmYXVsdCIsImluT2NjdXBhdGlvbkdyb3VwIiwib2NjdXBhdGlvblRvZ2dsZSIsInBpY2tlZCIsImRlbGV0ZWFibGUiLCJhcmNoZXR5cGVUb2dnbGUiLCJvY2N1cGF0aW9uR3JvdXBzIiwiaXNBcmNoZXR5cGVEZWZhdWx0IiwiY3JlZGl0UmF0aW5nT2theSIsInJlbWFpbmluZyIsImZyb21Db0NJRCIsInRvdGFsUG9pbnRzIiwibnVtIiwiaXNPY2N1cGF0aW9uIiwiaXNBcmNoZXR5cGUiLCJzaG93Q3JlZGl0UmF0aW5nIiwiYWxsQmFja3N0b3JpZXMiLCJjYWNoZUJhY2tzdG9yaWVzIiwicm9sZSIsIlVTRVJfUEVSTUlTU0lPTlMiLCJBQ1RPUl9DUkVBVEUiLCJkZWZhdWx0Um9sZSIsImtleXByZXNzIiwic3JjRWxlbWVudCIsInRhZ05hbWUiLCJ3aGljaCIsImNoYXJDb2RlIiwiX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYzEwIiwiX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYzEwIiwiX29uUm9sbEFsbCIsIl9vblJvbGxFZHUiLCJfb25Sb2xsTHVjayIsIl9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYyIsIl9vblRvZ2dsZVNraWxsIiwiX29uQ2xpY2tQaWNrU2tpbGwiLCJfb25DbGlja1NraWxsU3BlY2lhbCIsIl9vbkNsaWNrUmVtb3ZlU2tpbGwiLCJfb25DaGFuZ2VTa2lsbFBvaW50cyIsIl9vbkNoYW5nZUJhY2tzdG9yeVRleHQiLCJfb25Sb2xsQmFja3N0b3J5IiwiX29uUmVzZXRCYWNrc3RvcnkiLCJyb2xsTWVzc2FnZSIsIkNIQVRfVEVNUExBVEUiLCJnZXRUb29sdGlwIiwiYWRkSXRlbVRvTGlzdCIsImludmVzdGlnYXRvckl0ZW1zIiwiaW5wbGFjZSIsImNsZWFyU2V0dXBQb2ludHMiLCJzZXRTa2lsbExpc3RzIiwicGxhY2VhYmxlIiwiZ20iLCJuYW1lQ3JlZGl0UmF0aW5nIiwiY2hhcmFjdGVyaXN0aWNLZXkiLCJkZXN0aW5hdGlvbiIsIm9rYXkiLCJ0ZW1wIiwicGFyZW50Tm9kZSIsInRvZ2dsZUtleSIsImd1ZXNzR3JvdXBGcm9tS2V5IiwiYWRqdXN0bWVudCIsInRleHRhcmVhIiwicm9sbHRhYmxlIiwidGFibGVSZXN1bHQiLCJtb2RpZnlPZmZzZXQiLCJtb2RpZnlDaGFyYWN0ZXJpc3RpYyIsInJlcm9sbHNFbmFibGVkIiwib2JqVG90YWwiLCJnZXRQYWdlTnVtYmVyIiwiZGlyZWN0aW9uIiwiY2xhc3NOYW1lIiwiZGVmYXVsdE93bmVyc2hpcCIsInN0YXJ0ZWQiLCJub3ciLCJidWZmZXIiLCJkZWZhdWx0UXVhbnRpdHkiLCJmbGF0S2V5cyIsInBhZ2VOdW1iZXIiLCJzY3JvbGxUb3AiLCJhdHRlbXB0VG9DcmVhdGUiLCJub3JtYWxpemVDaGFyYWN0ZXJEYXRhIiwiY3JlYXRlQ2hhcmFjdGVyIiwia2VlcGVycyIsImxpc3RlbmVyIiwicGF5bG9hZCIsInNvdXJjZUl0ZW0iLCJhdmF0YXIiLCJUT0tFTl9ESVNQT1NJVElPTlMiLCJGUklFTkRMWSIsImNyZWF0ZUNoYXJhY3RlckZyb21EYXRhIiwiZnVuY3Rpb25JZCIsIm9mZiIsImNhY2hlSXRlbXMiLCJDb0M3TWVudUxheWVyIiwiUGxhY2VhYmxlc0xheWVyIiwib2JqZWN0cyIsImxheWVyT3B0aW9ucyIsInBsYWNlYWJsZXMiLCJDb0M3TWVudSIsImdldEJ1dHRvbnMiLCJjb250cm9scyIsImNvYzdnbXRvb2xzIiwibGF5ZXIiLCJ0b29scyIsIm9uQ2xpY2siLCJjb2M3RGV2VG9vbHMiLCJyZW5kZXJDb250cm9scyIsImtlZXBlck1lbnUiLCJhZnRlciIsIkNvQzdDYW52YXMiLCJDT0M3X1RZUEVTX1NVUFBPUlRFRCIsIm9uRHJvcFNvbWV0aGluZyIsImdyaWRTaXplIiwiZHJvcFRhcmdldFRva2VucyIsImJldHdlZW4iLCJhcHBJZCIsImNhbGxCYWNrIiwid2luZG93cyIsIkNvQzdTZXR0aW5nc0RpcmVjdG9yeSIsIlNldHRpbmdzIiwibG9jYXRpb24iLCJNYW51YWwiLCJDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSIsIkNvbXBlbmRpdW1EaXJlY3RvcnkiLCJ0cmFuc2xhdGVkIiwiYmFiZWxlIiwiQ29DN0FjdG9yRGlyZWN0b3J5IiwiQWN0b3JEaXJlY3RvcnkiLCJhbGxvd1dpemFyZCIsImFsbG93ZWQiLCJDb0M3RGVjYWRlckRTTkZhY2VzIiwiY29uc3RydXRvciIsInNldEZhY2VzIiwiZ2xvYmFsIiwic291cmNlRGllIiwiRGljZUZhY3RvcnkiLCJzeXN0ZW1zIiwiQ29DN1NwZWxsIiwiY2FzdCIsImlzT3duZWQiLCJjb3N0cyIsImxvc3NlcyIsImNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cyIsIm1hZ2ljUG9pbnRzIiwiY29udmVydGVkSGl0UG9pbnRzIiwiY29udmVydGVkTWFnaWNQb2ludHMiLCJhY3Rvck1hZ2ljUG9pbnRzIiwib3JpZ2luYWxNYWdpY1BvaW50cyIsImhpdFBvaW50cyIsInJlc29sdmVMb3NzZXMiLCJncmFudFNhbml0eUxvc3MiLCJnZXRIVE1MIiwic2FuaXR5TG9zcyIsInNhbml0eUNoZWNrIiwiYm9va0lkIiwiYm9vayIsIkNvQzdCb29rIiwiYWRkU3BlbGxzIiwic3BlbGxEZXRhaWwiLCJsZWFybmVkIiwiYXR0ZW1wdEluaXRpYWxSZWFkaW5nIiwiY2hhbmdlUHJvZ3Jlc3MiLCJpbml0aWFsUmVhZGluZyIsImZ1bGxTdHVkeSIsImNvbXBsZXRlRnVsbFN0dWR5IiwiY2hlY2tFeGhhdXN0aW9uIiwiZ3JhbnRGdWxsU3R1ZHkiLCJhY3Rvck15dGhvc1ZhbHVlIiwiZGV2ZWxvcG1lbnRzIiwibXl0aG9zRmluYWwiLCJnYWlucyIsImZpbmFsIiwiZ3JhbnRTa2lsbERldmVsb3BtZW50Iiwicm9sbFNhbml0eUxvc3MiLCJmdWxsU3R1ZGllcyIsImdyYW50SW5pdGlhbFJlYWRpbmciLCJvdGhlcnMiLCJncmFudFNwZWxsTGVhcm5pbmciLCJzcGVsbGxlYXJuZWQiLCJleGlzdGluZ1NraWxsIiwic2hvd0RldmVsb3BtZW50c1RhYmxlIiwicmVkb0Z1bGxTdHVkeSIsImF0dGVtcHRTcGVsbExlYXJuaW5nIiwiRUNDX0NMQVNTIiwiUEVSTUlTU0lPTl9UWVBFIiwiU1RBVEUiLCJHTVVwZGF0ZSIsImNhcmRDbGFzc05hbWUiLCJFbmhhbmNlZENoYXRDYXJkIiwiYWR2aXNlIiwiRW5oYW5jZWRDaGF0Q2FyZExpYiIsInR5cGVzIiwiaW5qZWN0Q1NTIiwiZW5oYW5jZWRDaGF0Q2FyZHNMaWIiLCJyZWdpc3RlciIsImNhcmRDb25zdHJ1Y3RvcnMiLCJjYXJkQ29uc3RydWN0b3IiLCJvb2MiLCJkZWVwQ2xvbmUiLCJhdHRhY2hPYmplY3QiLCJvYmplY3REYXRhU3RyaW5nIiwiZWNjQ2xhc3MiLCJsb2NhbENvbXB1dGUiLCJFeGVjdXRlR01VcGRhdGUiLCJFRUNfQUNUSU9OIiwiZGV0YWNoRGF0YSIsIl9vbkNoYW5nZSIsInNldFZpc2liaWxpdHkiLCJzZXRQZXJtaXNzaW9uIiwic2V0U3RhdGUiLCJzZXRSYWRpb1N0YXRlIiwic3BsaXRlZCIsImVjY1Zpc2liaWxpdHkiLCJoYXNQZXJtIiwiZWNjUGVybWlzc2lvbnMiLCJyZXN0cmljdGVkVG8iLCJ2aXNpb24iLCJwZXJtaXNzaW9uc0FycmF5Iiwid2hpdGVMaXN0IiwiaXNBdXRob3IiLCJhc3NpZ25PYmplY3RzIiwibmV3RGF0YSIsImZvcm1VcGRhdGUiLCJhY3Rpb25VcGRhdGUiLCJvcmlnaW5hbERpc3BsYXlTdHlsZSIsInVwZGF0ZUNhcmQiLCJzYXZlRGF0YSIsImh0bW1sQ2FyZCIsIkNhcmRDbGFzcyIsInVuc2V0RGF0YSIsInRvZ2dsZURhdGEiLCJiTmFtZSIsIl9wYXJ0aWNpcGFudCIsIl9mZXRjaCIsIl9kb2MiLCJpc0FjdG9yIiwiaGFzQWN0b3IiLCJoYXNWZWhpY2xlIiwiaXNBY3RpdmUiLCJ2ZWhpY2xlIiwiZHJpdmVyIiwiX2RyaXZlciIsInZlaGljbGVLZXkiLCJfdmVoaWNsZSIsImhhc1ZhbGlkTW92IiwiaGFzTWF4Qm9udXNEaWNlIiwiYWRkQm9udXNEaWNlIiwicmVtb3ZlQm9udXNEaWNlIiwicmVzZXRCb251c0RpY2UiLCJoYXNCb251c0RpY2UiLCJoYXNPbmVCb251c0RpY2UiLCJoYXNUd29Cb251c0RpY2UiLCJjYW5Bc3Npc3QiLCJhc3Npc3QiLCJjYW5CZUNhdXRpb3VzIiwiaGFzRHJpdmVyIiwiaGFzVmFsaWREZXgiLCJoYXNBR3VuUmVhZHkiLCJpc0NoYXNlciIsImNoYXNlciIsImlzUHJleSIsImlzVmFsaWQiLCJtb3ZBZGp1c3RtZW50Iiwic3BlZWRDaGVjayIsInJvbGxEYXRhU3RyaW5nIiwiYWRqdXN0ZWRNb3YiLCJoYXNNb3ZBZGp1c3RtZW50IiwiaGFzQm9udXNNb3YiLCJoYXNNYWx1c01vdiIsInRvb1Nsb3ciLCJleGNsdWRlZCIsImluY2x1ZGVJbkNoYXNlIiwic2xvd2VzdCIsImZhc3Rlc3QiLCJjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMiLCJtaW5Nb3YiLCJtb3ZlbWVudEFjdGlvbiIsImN1cnJlbnRNb3ZlbWVudEFjdGlvbnMiLCJoYXNNYXhNdnRBY3Rpb25zIiwiaGFzTm9NdnRBY3Rpb25zIiwiYWRkTW92ZW1lbnRBY3Rpb25zIiwiYWx0ZXJNb3ZlbWVudEFjdGlvbnMiLCJtb3ZlbWVudEFjdGlvbkFycmF5IiwiYmFzZUFycmF5IiwiZmlsbCIsImlubGluZVJvbGwiLCJtb2RpZmllckNzcyIsImhhc09wdGlvbnMiLCJnYW1lSXRlbSIsInJlZiIsInJlZlNldCIsImlzQ2hhcmFjdGVyaXN0aWMiLCJjYW5CZVJvbGxlZCIsInNvcnRCeVJvbGVBbmREZXgiLCJDaGFzZU9ic3RhY2xlQ2FyZCIsInN0cmluZ3MiLCJ0b3RhbEFjdGlvbkNvc3QiLCJicmVha2FibGVPYnN0YWNsZSIsIm9ic3RhY2xlIiwiYmFycmllciIsImhhc0hpdFBvaW50cyIsInZhbGlkQ2hlY2siLCJzdGF0ZXMiLCJvYnN0YWNsZURlZmluZWQiLCJoYXphcmQiLCJ0cnlUb05lZ290aWF0ZSIsInRyeVRvQnJlYWsiLCJicmVha09yTmVnb3RpYXRlRGVmaW5lZCIsInBhcnRpY2lwYW50IiwiY2hhc2UiLCJnZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyIsInBhcnRpY2lwYW50VXVpZCIsInZhbGlkU2tpbGwiLCJjaGVja1RocmVzaG9sZCIsImFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljcyIsImR1bW15QWN0b3IiLCJjYW5UYWtlQ2F1dGlvdXNBcHByb2FjaCIsImN1c3RvbVdlYXBvbiIsIndlYXBvbkNob2ljZSIsImNoZWNrUm9sbFJlcXVlc3QiLCJjYW5Bc2tSb2xsIiwiRW50ZXJWYWx1ZVRpdGxlIiwiZGFtYWdlU3RhdHVzIiwib2JzdGFjbGVEYW1hZ2VSb2xsIiwib2JzdGFjbGVEYW1hZ2VSb2xsZWQiLCJvYnN0YWNsZURhbWFnZSIsImlubGluZURhbWFnZVJvbGwiLCJ0b3RhbENhdXRpb3VzQXBwcm9hY2giLCJjYXV0aW91c1N0YXR1cyIsImNhdXRpb3VzQXBwcm9hY2hUeXBlIiwiY29uc3VtZUJvbnVzRGljZSIsIm1vdmVQbGF5ZXIiLCJvYnN0YWNsZVBhc3NlZCIsImNoZWNrRmFpbGVkIiwicGxheWVyQWN0aW9uRGVmaW5lZCIsInBsYXllckludGVudGlvbnMiLCJjaGVja1JvbGxlZCIsImNhcmRSZXNvbHZlZCIsInBsYXllckRhbWFnZVRha2VuIiwib2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCIsImxpc3RDaGFuZ2VzIiwiaGFzRGFtYWdlIiwiaW5saW5lRGFtYWdlVGFrZW5Sb2xsIiwiZmFpbGVkRGFtYWdlUm9sbCIsInRvdGFsUGxheWVyRGFtYWdlVGFrZW4iLCJoYXNBY3Rpb25Db3N0IiwiYWN0aW9uTG9zdCIsImlubGluZUFjdGlvbkxvc3RSb2xsIiwiZmFpbGVkQWN0aW9uUm9sbCIsImZpbmFsT3V0Y29tZSIsInRvdGFsRGFtYWdlIiwicmVmbGVjdE9ic3RhbGVDaGFuZ2VzIiwiZmFpbGVkQ29uc2VxdWVuY2VzUm9sbGVkIiwidG90YWxPYnN0YWNsZURhbWFnZSIsIm9ic3RhY2xlRGVzdG95ZWQiLCJIaXRQb2ludHMiLCJhY3RpdmVQYXJ0aWNpcGFudERhdGEiLCJvYnN0YWNsZURldGFpbHMiLCJwYXJ0aWNpcGFudERhdGEiLCJnZXRQYXJ0aWNpcGFudERhdGEiLCJnZXRMb2NhdGlvbkRhdGEiLCJsb2NhdGlvblV1aWQiLCJjaGFzZVV1aWQiLCJfY2hhc2UiLCJhY3RvclNraWxsIiwidmFsaWRGYWlsZWRSb2xscyIsImZhaWxlZENoZWNrRGFtYWdlIiwiYWN0aW9uQ29zdCIsImZhaWxlZEFjdGlvbkNvc3QiLCJ3ZWFwb25zT3B0aW9ucyIsIml0ZW1UeXBlcyIsInciLCJhaGJkIiwidW5zaGlmdCIsImN1c3RvbVdlYXBvbkRhbWFnZSIsInVzZWRXZWFwb24iLCJpbmZsaWN0ZWREYW1hZ2VGb3JtdWxhIiwidmFsaWRPYnN0YWNsZURhbWFnZSIsImRhbWFnZVJvbGxSZXF1ZXN0IiwidmFsaWRhdGVDYXJkIiwibG9hY3Rpb25DaGFuZ2VkIiwicGFydGljaXBhbnRDaGFnZWQiLCJvYnN0YWNsZVVwZGF0ZSIsInBhcnRpY2lwYW50VXBkYXRlIiwiZGlmZiIsIm5ldyIsInJlbWFpbmluZ0hwIiwidGFyZ2V0TG9jYXRpb24iLCJmb3J3YXJkIiwiZ2V0TG9jYXRpb25TaGlmdCIsIm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24iLCJzY3JvbGxUb0xvY2F0aW9uIiwiYWN0aXZhdGVMb2NhdGlvbiIsInVwZGF0ZUxvY2F0aW9uIiwidXBkYXRlUGFydGljaXBhbnQiLCJhY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4iLCJkZWZpbmVPYnN0YWNsZSIsInRyeVRvTmVnb3RpYXRlT2JzdGFjbGUiLCJ0cnlUb0JyZWFrRG93bk9ic3RhY2xlIiwiY2FuY2VsT2JzdGFjbGVEZWZpbml0aW9uIiwiY2FuY2VsQnJlYWtPclBhc3NDaG9pY2UiLCJyZXF1ZXN0Um9sbCIsInRha2VDYXV0aW91c0FwcHJvYWNoIiwicm9sbFNraWxsQ2hlY2siLCJ1c2VMdWNrIiwicm9sbEZhaWxDb25zZXF1ZW5jZXMiLCJhc2tSb2xsT2JzdGFjbGVEYW1hZ2UiLCJyb2xsT2JzdGFjbGVEYW1hZ2UiLCJuYW1lcyIsIm5ld09ic3RhY2xlIiwib2xkIiwiQ29DN0NoYXNlIiwicGFydGljaXBhbnRzIiwicExpc3QiLCJwcmV5cyIsImNoYXNlcnMiLCJwYXJ0aWNwYW50IiwicGFydGljaXBhbnRzT2JqZWN0IiwiZ2V0UGFydGljaXBhbnRMb2NhdGlvbiIsImFjdGl2ZUFjdG9yIiwicGFydGljaXBhbnRzQnlBZGp1c3RlZE1vdiIsImFjdHVhbFBhcnRpY2lwYW50cyIsInBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZSIsImFsbEhhdmVWYWxpZE1vdiIsImV2ZXJ5IiwiYWxsSGF2ZVNwZWVkUm9sbCIsImxvY2F0aW9ucyIsImwiLCJscCIsImdldFBhcnRpY2lwYW50IiwibmV4dEFjdGl2ZVBhcnRpY2lwYW50Iiwic2xvd2VzdFByZXkiLCJmYXN0ZXN0Q2hhc2VyIiwiaW5jbHVkZUxhdGVjb21lcnMiLCJpbmNsdWRlRXNjYXBlZCIsInNsb3dlc3RQYXJ0aWNpcGFudCIsInVwZGF0ZVBhcnRpY2lwYW50cyIsInBhcnRpY2lwYW50c0RhdGEiLCJjbGVhblBhcnRpY2lwYW50TGlzdCIsInBhcnRpY2lhbnRVdWlkIiwicGFydGljaXBhbnRJbmRleCIsIm92ZXJ3cml0ZSIsImFzc2lzdFBhcnRpY2lwYW50IiwiYXNzaXN0YW50VXVpZCIsImJlbmVmaWNpYXJ5VXVpZCIsImFzc2lzdGFudCIsImJlbmVmaWNpYXJ5IiwiYXNzaXN0YW50SW5kZXgiLCJiZW5lZmljaWFyeUluZGV4IiwidXNlTW92ZW1lbnRBY3Rpb25zIiwiYWN0aW9ucyIsInRvZ2dsZUJvbnVzRGljZSIsImRpY2VOdW1iZXIiLCJjYXV0aW91c0FwcHJvYWNoIiwiYWx0ZXJQYXJ0aWNpcGFudE1vdmVtZW50QWN0aW9uIiwiYWN0aXZlUGFydGljaXBhbnQiLCJhY3RpdmF0ZVBhcnRpY2lwYW50IiwiZGF0YVVwZGF0ZSIsImdldEFjdGl2YXRlUGFydGljaXBhbnRVcGRhdGVEYXRhIiwiYWN0aXZlTG9jYXRpb24iLCJwVXVpZCIsInBhcnRpY2lwYW50c0RhdGFVcGRhdGUiLCJwYXJ0aWNpcGFudExvY2F0aW9uIiwibG9jYXRpb25zRGF0YVVwZGF0ZSIsImdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhIiwiY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbiIsImdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uIiwiYWN0aXZlUGFydGljaXBhbnRPYnN0YWNsZUNoZWNrIiwibW92ZVBhcnRpY2lwYW50IiwicHJvZ3Jlc3NUb05leHRSb3VuZCIsInJvbGxVdWlkIiwibWV0aG9kIiwiaW5pdFRyYWNrIiwicHJvY2Vzc0xvY2F0aW9ucyIsImR1cGxpY2F0ZURhdGEiLCJmaXJzdCIsImxhc3QiLCJzdGFydGluZ0xpbmUiLCJsb2NhdGlvbnNJbmRleFN0YXJ0IiwiaW5pdEluZGV4U3RhcnQiLCJsb2NhdGlvbnNMZW5ndGgiLCJzdGFydGluZ0luZGV4IiwiZ2VuZXJhdGVOZXdVdWlkIiwiY2hhc2VMb2NhdGlvbnMiLCJlbmQiLCJjaGFzZVRyYWNrIiwiY2hhc2Vyc01pbk1vdiIsImZpbmRNaW5Nb3YiLCJjaGFzZXJzTWF4TW92IiwiZmluZE1heE1vdiIsInByZXlzTWluTW92IiwicHJleXNNYXhNb3YiLCJzdGFydGluZ1JhbmdlIiwidXBkYXRlTG9jYXRpb25zTGlzdCIsInVwZGF0ZWRMaXN0IiwiY2xlYW5Mb2NhdGlvbnNMaXN0IiwibG9jYXRpb25JbmRleCIsInBhcnRpcGFudHNVdWlkQXJyYXkiLCJpbnNlcnRMb2NhdGlvbiIsImluc2VydEF0VXVpZCIsIm5ld0xvY2F0aW9uSW5kZXgiLCJuZXdMb2NhdGlvbiIsImxvY0RhdGEiLCJyZW1vdmVMb2NhdGlvbiIsImdldENsZWFyQWN0aXZlTG9jYXRpb25VcGRhdGVEYXRhIiwiaGFzUGFydGljaXBhbnQiLCJhY3RpdmVBY3Rvckhhc1NraWxsIiwiYWN0aXZlQWN0b3JUZXN0IiwicHJldmlvdXNMb2NhdGlvbiIsImFjdGl2ZUluZGV4IiwibmV4dExvY2F0aW9uIiwibG9jYXRvckRyb3BwZWQiLCJzZXRMb2NhdGlvbkNvb3JkaW5hdGVzIiwiY29vcmRpbmF0ZXMiLCJjbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMiLCJjbGVhckxvY2F0aW9uQ29vcmRpbmF0ZXMiLCJjdXRUb1RoZUNoYXNlIiwic3RhcnQiLCJyZXN0YXJ0Iiwic2V0Y2hhc2VUcmFja1Njcm9sbCIsInN0b3AiLCJkZXN0aW5hdGlvbkluZGV4IiwicmVtb3ZlUGFydGljaXBhbnQiLCJuZXdQYXJ0aWNpcGFudHNEYXRhIiwibG9jYXRpb25zRGF0YSIsImFkZFBhcnRpY2lwYW50IiwidW5pcXVlIiwicmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMiLCJlZGl0UGFydGljaXBhbnQiLCJsb2NhdGlvbk1vdmVkIiwib3JpZ2luSW5kZXgiLCJ0b3RhbE1vdmUiLCJvbGRQYXJ0aWNpcGFudHNMaXN0IiwibW92ZVRva2VuIiwicGFydGljcGFudERvY3VtZW50IiwiVG9rZW5Eb2N1bWVudCIsImZvdW5kVG9rZW5zIiwidmlld2VkIiwidGFyZ2V0UmVjdCIsIlBJWEkiLCJSZWN0YW5nbGUiLCJmb3VuZEZyZWVTcGFjZSIsIm92ZXJsYXBpbmdUb2tlbiIsImJvdW5kcyIsImludGVyc2VjdHMiLCJzaG93VG9rZW5Nb3ZlbWVudCIsImFuaW1hdGUiLCJ0byIsImNoYXNlVHJhY2tBY3RpdmVMb2NhdGlvblNjcm9sbFBvc2l0aW9uIiwiYWN0aXZlTG9jYXRpb25FbGVtZW50IiwibGVmdFNjcm9sbCIsIm9mZnNldExlZnQiLCJjbGllbnRXaWR0aCIsInByZXYiLCJyZW1TdHJpbmciLCJyZW1TaXplIiwicENvdW50IiwiX3RhYnMiLCJhY3RpdmVBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyIsInBhcnRpY2ljcGFudERhdGEiLCJJbnRsIiwiQ29sbGF0b3IiLCJjb21wYXJlIiwiYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzU2hvcnQiLCJDb0M3U2tpbGwiLCJuZXdQcm9wZXJ0aWVzIiwiaGFzQWN0aXZlRWZmZWN0cyIsImFjdGl2ZUVmZmVjdHMiLCJlZmZlY3RLZXlGdWxsIiwiZWZmZWN0S2V5U2hvcnQiLCJkZWx0YSIsImV4cCIsIkNvQzdWZWhpY2xlIiwiQ29DN0RlY2FkZXJEaWUiLCJEaWNlVGVybSIsInRlcm1EYXRhIiwiREVOT01JTkFUSU9OIiwiQ29DN0RlY2FkZXJEaWVPdGhlciIsIlNFVFRJTkdTIiwicHVscFJ1bGVzIiwiaW5pdGlhdGl2ZVJ1bGUiLCJjaG9pY2VzIiwib25DaGFuZ2UiLCJydWxlIiwiX3NldEluaXRpYXRpdmVPcHRpb25zIiwicHVscFJ1bGVEb3VibGVNYXhIZWFsdGgiLCJwdWxwUnVsZVRhbGVudHMiLCJwdWxwUnVsZUZhc3RlclJlY292ZXJ5IiwicHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcyIsIm9wcG9zZWRSb2xsVGllQnJlYWtlciIsImRlY2ltYWxzIiwiQ29tYmF0IiwiQ29DN0dhbWVSdWxlU2V0dGluZ3MiLCJ0cnVlIiwiZmFsc2UiLCJzZXR0aW5nIiwicHVscFNlbGVjdGlvbiIsInJlZ2lzdGVyU2V0dGluZ3MiLCJvbkNoYW5nZVB1bHBTZWxlY3QiLCJvbkNsaWNrUHVscCIsIm9uUmVzZXREZWZhdWx0cyIsImNoZWNrYm94IiwiQ29DN0FyY2hldHlwZVNoZWV0IiwiY2hhcmFjTmFtZSIsImVucmljaGVkU3VnZ2VzdGVkT2NjdXBhdGlvbnMiLCJlbnJpY2hlZFN1Z2dlc3RlZFRyYWl0cyIsImNvcmVDaGFyYWN0ZXJpc3RpY3NTdHJpbmciLCJDb0M3Qm9va1NoZWV0Iiwic3BlbGxzTGVhcm5lZCIsImV4aGF1c3RlZCIsInN0dWR5Q29tcGxldGVkIiwic3BlbGxMaXN0RW1wdHkiLCJlbnJpY2hlZENvbnRlbnQiLCJfb25EZWxldGUiLCJfb25TcGVsbERldGFpbCIsIm1vZGlmeU90aGVyc0dhaW5zIiwibW9kaWZ5VHlwZSIsIkNvQzdDb250YWluZXJTaGVldCIsInNsaWRlVG9nZ2xlIiwiQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlciIsInBlcm1pc3Npb25zIiwiX29uRHJvcFBhcnRpY2lwYW50IiwiZHJhZ3N0YXJ0IiwiX29uVG9rZW5TZWxlY3RvckRyYWdTdGFydCIsIl9vbkFjdGlvbiIsInZhbGlkYXRlUGFydGljaXBhbnQiLCJzcGVlZENoZWNrUmVhZE9ubHkiLCJpbml0UmVhZE9ubHkiLCJvcHRpb25zTGlzdCIsInNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QiLCJkcm9wU3RyaW5nIiwiYWRkVG9rZW5Ub0NoYXNlIiwib3ZlcnJpZGVNb3ZlbWVudEFjdGlvbiIsInJlY2FsY3VsYXRpb25OZWVkZWQiLCJwYXJ0aWNpcGFudEV4Y2x1ZGVkIiwibW92ZW1lbnRBY3Rpb25EZWx0YSIsImluY2x1ZGVMYXN0Q29tbWVycyIsImV4Y2x1ZGVkQmVjYXVzZSIsIkNvQzdDaGFzZVNoZWV0IiwiX29uRHJhZ0VudGVyUGFydGljaXBhbnQiLCJfb25EcmFnTGVhdmVQYXJ0aWNpcGFudCIsIl9vbkNoYW5nZVNpZGUiLCJfb25EZWxldGVQYXJ0aWNpcGFudCIsIl9vblJlc2V0Um9sbCIsIl9vbkRlbGV0ZURyaXZlciIsIl9vbkFkZFBhcnRpY2lwYW50IiwiX29uUm9sbFBhcnRpY2lwYW50IiwiX29uTG9jYXRpb25DbGljayIsIl9vbk9ic3RhY2xlVHlwZUNsaWNrIiwiX29uUGFydGljaXBhbnRDb250cm9sQ2xpY2tlZCIsIl9vbkNoYXNlQ29udHJvbENsaWNrZWQiLCJfb25Mb2NhdGlvbkNvbnRyb2xDbGljayIsIl9jYW5QaW5Mb2NhdGlvbkRyYWdTdGFydCIsIl9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IiwiX29uQ2hhc2VQYXJ0aWNpcGFudENsaWNrIiwiX2NhbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQiLCJfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIiwiX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCIsIl9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCIsImRyYWdvdmVyIiwiX29uRHJhZ0VudGVyIiwiX29uRHJhZ0xlYXZlIiwiX2dldFN1Ym1pdERhdGEiLCJlZGl0b3JzIiwiY2xlYW5lZCIsImNsZWFuIiwib3JpZ2luYWxMb2NhdGlvbiIsInN1YlR5cGUiLCJmaW5kUGFydGljaXBhbnRJbmRleCIsInNldFNjcm9sbCIsImluaXRpYWxPcGVuaW5nIiwic2Nyb2xsIiwiYWN0aXZhdGVUYWIiLCJzY3JvbGxUbyIsImJlaGF2aW9yIiwib25DbG9zZSIsImZpbmRMb2NhdGlvbkluZGV4IiwiZmluZExvY2F0aW9uIiwibFV1aWQiLCJ0b2dnbGVQYXJ0aWNpcGFudEd1biIsIl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucyIsInNlbGVjdG9yIiwiZHJhZ0ljb24iLCJzZXREcmFnSW1hZ2UiLCJsb2NhdGlvbkVsZW1lbnQiLCJkcmFnRXZlbnQiLCJvbGRMb2NhdGlvbiIsIl9vbkRyYWdPdmVyIiwiYWx0ZXJQYXJ0aWNpcGFudCIsInN0YW5kYnlUZXh0Iiwic3RhbmRieVJpZ2h0SWNvbiIsIm9sZFBhcnRpY2lwYW50IiwidHAiLCJnZXRUeXBlIiwiQ29DN0l0ZW1TaGVldFYyIiwiQ29DN0l0ZW1TaGVldCIsIkNvQzdKb3VybmFsU2hlZXQiLCJKb3VybmFsU2hlZXQiLCJDb0M3TWFjcm9Db25maWciLCJNYWNyb0NvbmZpZyIsIkNvQzdQbGF5bGlzdENvbmZpZyIsIlBsYXlsaXN0Q29uZmlnIiwiQ29DN1JvbGxUYWJsZUNvbmZpZyIsIlJvbGxUYWJsZUNvbmZpZyIsIkNvQzdTY2VuZUNvbmZpZyIsIlNjZW5lQ29uZmlnIiwiQ29DN1NldHVwU2hlZXQiLCJfb25BZGRCaW8iLCJfb25SZW1vdmVTZWN0aW9uIiwib3RoZXJJdGVtcyIsIml0ZW1zTGlzdEVtcHR5IiwiQ29DN1NraWxsU2hlZXQiLCJfc2hlZXRUYWIiLCJoYWROb25DaGFyYWN0ZXJPd25lciIsImlzU3BlY2lhbGl6ZWQiLCJjYW5Nb2RpZnlTcGVjIiwiQ29DN1NwZWxsU2hlZXQiLCJDb0M3U3RhdHVzU2hlZXQiLCJzdGF0dXNUeXBlIiwiZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzIiwiQ29DN1RhbGVudFNoZWV0IiwidGFsZW50VHlwZSIsIkNvQzdWZWhpY2xlU2hlZXQiLCJhcm1lZCIsIl9vbkFkZEFybW9yIiwiX29uUmVtb3ZlQXJtb3IiLCJfb25Ub2dnbGVFeHBhbmQiLCJvbGRTaXplIiwiQ29DN1dlYXBvblNoZWV0IiwiY29tYmF0U2tpbGwiLCJwcmljZSIsImVucmljaGVkRGVzY3JpcHRpb25TcGVjaWFsIiwiX29uUHJvcGVydHlDbGljayIsInBlcmZvcm1GaWx0ZXIiLCJlcmFFbGVtZW50IiwibmFtZUZpbHRlciIsIkNvQ0lEIiwiY29tcGVuZGl1bUluZGV4RmllbGRzIiwiSm91cm5hbEVudHJ5IiwiUGxheWxpc3QiLCJSb2xsVGFibGUiLCJTY2VuZSIsImdhbWVQcm9wZXJ0eUxvb2t1cCIsImRvY3VtZW50TmFtZUxvb2t1cCIsImVyYVRleHQiLCJtYWtlR3JvdXBSZWdFeCIsImxhbmdGYWxsYmFjayIsIm5vdG1pc3NpbmciLCJzcGxpdHMiLCJyZ3giLCJyZWdFeFBhcnRzIiwiZnJvbUNvQ0lEUmVnZXhBbGwiLCJkb2N1bWVudHNGcm9tV29ybGQiLCJwcm9ncmVzc0JhciIsIlNjZW5lTmF2aWdhdGlvbiIsImRpc3BsYXlQcm9ncmVzc0JhciIsInBjdCIsImZpbHRlckFsbENvQ0lEIiwiY29tcGVuZGlhRG9jdW1lbnRzIiwiZG9jdW1lbnRzRnJvbUNvbXBlbmRpYSIsImFsbERvY3VtZW50cyIsImZpbHRlckJlc3RDb0NJRCIsImZyb21Db0NJREJlc3QiLCJiZXN0TWF0Y2hEb2N1bWVudHMiLCJkb2NDb0NJRCIsImN1cnJlbnREb2MiLCJkb2NQcmlvcml0eSIsIk1JTl9TQUZFX0lOVEVHRVIiLCJleGlzdGluZ1ByaW9yaXR5IiwiZG9jRXJhcyIsImRvY0xhbmciLCJleGlzdGluZ0xhbmciLCJnYW1lUHJvcGVydHkiLCJnZXRHYW1lUHJvcGVydHkiLCJjYW5kaWRhdGVEb2N1bWVudHMiLCJtYXRjaGluZ0VyYXMiLCJjb21wYXJlQ29DSURQcmlvIiwiZ2V0RG9jdW1lbnRUeXBlIiwic2NoZW1hIiwiaW5kZXhlZCIsImdldEluZGV4IiwiaW5kZXhJbnN0YW5jZXMiLCJqZSIsInJ0IiwiQ2FyZCIsImxvYWRUZW1wbGF0ZXMiLCJwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyIsInJlZ2lzdGVyTWVudSIsInJlc3RyaWN0ZWQiLCJ3b3JsZCIsIlkiLCJOIiwibm9ib2R5IiwiZXZlcnlvbmUiLCJhbHdheXMiLCJjcmVhdGlvbiIsIm5ldmVyIiwiX3NldFJvb3RGb250U2l6ZSIsInNpZGViYXIiLCJjb250YWluIiwiaG9va3MiLCJBY3RvcnMiLCJ1bnJlZ2lzdGVyU2hlZXQiLCJyZWdpc3RlclNoZWV0IiwibWFrZURlZmF1bHQiLCJJdGVtcyIsIlNjZW5lcyIsIkpvdXJuYWwiLCJSb2xsVGFibGVzIiwiTWFjcm9zIiwiUGxheWxpc3RzIiwiSGFuZGxlYmFycyIsInJlZ2lzdGVySGVscGVyIiwiU2V0IiwidW5jb21tb24iLCJjb21wZW5kaXVtRmlsdGVyIiwiaGVpZ2h0VGV4dCIsImhlaWdodFRpcCIsIndpZHRoVGlwIiwiY2xlYXJUaW1lb3V0IiwiQ29DN1RvdXIiLCJUb3VyIiwid2FpdEZvckVsZW1lbnQiLCJNdXRhdGlvbk9ic2VydmVyIiwibXV0YXRpb25zIiwib2JzZXJ2ZXIiLCJkaXNjb25uZWN0Iiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJfcHJlU3RlcCIsInN0ZXBJbmRleCIsImN1cnJlbnRTdGVwIiwic2lkZWJhclRhYiIsIl9wb3N0U3RlcCIsImhhc05leHQiLCJpc1Jlc2V0dGluZyIsInJlc2V0IiwiRW5hYmxlVmFyaWFudFJ1bGVzRW4iLCJjYW5CZVJlc3VtZWQiLCJzdGVwcyIsImxvY2FsaXphdGlvbiIsIkVuYWJsZVZhcmlhbnRSdWxlc0ZyIiwiaW5zdHJ1Y3Rpb25zVmVyc2lvbiIsInJlYWRNZSIsInRvdXJzIiwidG91ck5hbWUiLCJyZWdpc3RlclRvdXJzIiwiQ29DN0hvb2tzIiwibGlzdGVuIiwidG9rZW5Eb2N1bWVudCIsIl9vYmplY3QiLCJhZGREaWNlUHJlc2V0IiwiZm9udFNjYWxlIiwiZW50aXR5Q3JlYXRlU2VsZWN0VGFnIiwiZW50aXR5U29ydGVkTGlzdCIsInNob3dFeHBlcmltZW50YWwiLCJlbnRpdHlPcHRpb24iLCJjYXBpdGFsaXplIiwiZW1wdHkiLCJzZWNvbmQiLCJwbGF5ZXJMaXN0IiwiaW5zZXJ0QWZ0ZXIiLCJnbWNyZWF0ZW1lc3NhZ2VhcyIsIm1lbGVlVGFyZ2V0IiwiZ210cmFkZWl0ZW10byIsIkNvQzdTeXN0ZW1Tb2NrZXQiLCJjYWxsU29ja2V0IiwicmVxdWVzdEtlZXBlckFjdGlvbiIsInJlcXVlc3RVc2VyQWN0aW9uIiwidXNlcklkIiwiZXJyb3JJZk1pc3NpbmciLCJpbmNsdWRlU2VsZiIsIl9vbkxlZnRDbGljayIsInN5c3RlbVRhYiIsImJlZm9yZSIsImNhcmRjbGFzcyIsInNvY2tldGxpYiIsInJlZ2lzdGVyU3lzdGVtIiwiaW5pdEVDQyIsImNvbW1hbmRzIiwicmVzIiwidG9Mb2NhbGl6ZSIsImxvY2FsaXplZCIsImVmZmVjdEluZGV4IiwiZWZmZWN0TmFtZUtleSIsInN0YXR1c0tleSIsImRpcmVjdG9yeSIsIkl0ZW1EaXJlY3RvcnkiLCJpdGVtRWxlbWVudCIsIl90YWJsZVNldHRpbmdzQ2hhbmdlZCIsImFjdGl2YXRlR2xvYmFsTGlzdGVuZXIiLCJ0YWJsZUNob2ljZSIsImJvdXRPZk1hZG5lc3NfU3VtbWFyeSIsImJvdXRPZk1hZG5lc3NfUmVhbFRpbWUiLCJjaGFyYWN0ZXJTaGVldCJdLCJzb3VyY2VSb290IjoiIn0=