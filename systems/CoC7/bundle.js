(()=>{"use strict";const COC7={eras:{standard:"CoC7.Era1920",modern:"CoC7.EraModern",modernPulp:"CoC7.EraModernPulp",pulp:"CoC7.EraPulp",downDarkerTrails:"CoC7.EraDownDarkerTrails",downDarkerTrailsPulp:"CoC7.EraDownDarkerTrailsPulp",darkAges:"CoC7.EraDarkAges",darkAgesPulp:"CoC7.EraDarkAgesPulp",regency:"CoC7.EraRegency",regencyPulp:"CoC7.EraRegencyPulp",gasLight:"CoC7.EraGasLight",invictus:"CoC7.EraInvictus"},monetaryFormatKeys:{decimalLeft:"decimalLeft",decimalRight:"decimalRight",integerLeft:"integerLeft",integerRight:"integerRight",lsd:"lsd",roman:"roman"},monetaryFormats:{decimalLeft:"CoC7.MonetaryFormatDecimalLeft",decimalRight:"CoC7.MonetaryFormatDecimalRight",integerLeft:"CoC7.MonetaryFormatIntegerLeft",integerRight:"CoC7.MonetaryFormatIntegerRight",lsd:"CoC7.MonetaryFormatLsd",roman:"CoC7.MonetaryFormatRoman"},monetaryTypeKeys:{none:"none",asses:"asses",sestertii:"sestertii",quinarii:"quinarii",denarii:"denarii",d:"d",s:"s",value:"value",multiplier:"multiplier"},monetaryTypes:{none:{name:"CoC7.MonetaryTypeNone",filter:[]},asses:{name:"CoC7.MonetaryTypeAsses",filter:["roman"]},sestertii:{name:"CoC7.MonetaryTypeSestertii",filter:["roman"]},quinarii:{name:"CoC7.MonetaryTypeQuinarii",filter:["roman"]},denarii:{name:"CoC7.MonetaryTypeDenarii",filter:["roman"]},d:{name:"CoC7.MonetaryTypeDeniers",filter:["lsd"]},s:{name:"CoC7.MonetaryTypeSous",filter:["lsd"]},value:{name:"CoC7.MonetaryTypeOne",filter:[]},multiplier:{name:"CoC7.MonetaryTypeCreditRating",filter:[]}},characteristics:{str:"CoC7.CharacStr",con:"CoC7.CharacCon",siz:"CoC7.CharacSiz",dex:"CoC7.CharacDex",app:"CoC7.CharacApp",int:"CoC7.CharacInt",pow:"CoC7.CharacPow",edu:"CoC7.CharacEdu"},skillProperties:{noadjustments:"CoC7.SkillNoAdjustments",noxpgain:"CoC7.SkillNoXpGain",special:"CoC7.SkillSpecial",rarity:"CoC7.SkillRarity",push:"CoC7.SkillPush",combat:"CoC7.SkillCombat",fighting:"CoC7.SkillFighting",firearm:"CoC7.SkillFirearm",requiresname:"CoC7.SkillRequiresName",keepbasevalue:"CoC7.SkillKeepBaseValue",picknameonly:"CoC7.SkillPickNameOnly",onlyone:"CoC7.SkillSpecializationIsUnique"},weaponProperties:{melee:"CoC7.Weapon.Property.Melee",rngd:"CoC7.WeaponRngd",mnvr:"CoC7.WeaponProperyManeuver",thrown:"CoC7.Weapon.Property.Thrown",shotgun:"CoC7.Weapon.Property.Shotgun",dbrl:"CoC7.WeaponDbrl",impl:"CoC7.WeaponImpl",brst:"CoC7.WeaponBrst",auto:"CoC7.WeaponAuto",ahdb:"CoC7.WeaponAhdb",addb:"CoC7.WeaponAddb",slnt:"CoC7.WeaponSlnt",spcl:"CoC7.WeaponSpcl",mont:"CoC7.WeaponMont",blst:"CoC7.WeaponBlst",stun:"CoC7.WeaponStun",rare:"CoC7.WeaponRare",burn:"CoC7.Weapon.Property.Burn"},spellProperties:{call:"CoC7.CallSpell",dismiss:"CoC7.DismissSpell",contact:"CoC7.ContactSpell",summon:"CoC7.SummonSpell",bind:"CoC7.BindSpell",enchantment:"CoC7.EnchantmentSpell",gate:"CoC7.GateSpell",combat:"CoC7.CombatSpell"},bookType:{mythos:"CoC7.MythosBook",occult:"CoC7.OccultBook",other:"CoC7.Other"},talentType:{physical:"CoC7.PhysicalTalent",mental:"CoC7.MentalTalent",combat:"CoC7.CombatTalent",miscellaneous:"CoC7.MiscellaneousTalent",basic:"CoC7.BasicTalent",insane:"CoC7.InsaneTalent",other:"CoC7.OtherTalent"},statusType:{mania:"CoC7.Mania",phobia:"CoC7.Phobia"},occupationProperties:{classic:"CoC7.Classic",lovecraftian:"CoC7.Lovecraftian",modern:"CoC7.Modern",pulp:"CoC7.Pulp"},formula:{}};COC7.formula.actor={"@STR":"this.system.characteristics.str.value","@CON":"this.system.characteristics.con.value","@SIZ":"this.system.characteristics.siz.value","@DEX":"this.system.characteristics.dex.value","@APP":"this.system.characteristics.app.value","@INT":"this.system.characteristics.int.value","@POW":"this.system.characteristics.pow.value","@EDU":"this.system.characteristics.edu.value"},COC7.formula.actorsheet={"@STR":"this.actor.system.characteristics.str.value","@CON":"this.actor.system.characteristics.con.value","@SIZ":"this.actor.system.characteristics.siz.value","@DEX":"this.actor.system.characteristics.dex.value","@APP":"this.actor.system.characteristics.app.value","@INT":"this.actor.system.characteristics.int.value","@POW":"this.actor.system.characteristics.pow.value","@EDU":"this.actor.system.characteristics.edu.value"},COC7.status={tempoInsane:"tempoInsane",indefInsane:"indefInsane",unconscious:"unconscious",criticalWounds:"criticalWounds",dying:"dying",prone:"prone",dead:"dead"},COC7.newBookName="CoC7.NewBookName",COC7.newSkillName="CoC7.NewSkillName",COC7.newSpellName="CoC7.NewSpellName",COC7.newItemName="CoC7.NewItemName",COC7.newWeaponName="CoC7.NewWeaponName",COC7.creatureFightingSkill="CoC7.creatureFightingSkill",COC7.fightingSpecializationName="CoC7.FightingSpecializationName",COC7.firearmSpecializationName="CoC7.FirearmSpecializationName",COC7.combatCards={fightBack:"CoC7.FightBack",dodge:"CoC7.Dodge",maneuver:"CoC7.Maneuver",noResponse:"CoC7.NoResponse"};class CoC7Dice{static async roll(modif=0,rollMode=null,hideDice=!1){let roll,alternativeDice="";game.modules.get("dice-so-nice")?.active&&(modif<0?alternativeDice=game.settings.get("CoC7","tenDiePenalty"):modif>0&&(alternativeDice=game.settings.get("CoC7","tenDieBonus"))),roll=game.CoC7.dev.dice.alwaysCrit&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.crit01):game.CoC7.dev.dice.alwaysFumble&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.fumble99):await new Roll("1dt"+(""!==alternativeDice?"+1do["+alternativeDice+"]":"+1dt").repeat(Math.abs(modif))+"+1d10").roll({async:!0});const result={unit:{total:0,results:[]},tens:{total:0,results:[]},total:0,roll};rollMode&&(result.rollMode=rollMode),hideDice&&(result.hideDice=hideDice);for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?result.tens.results.push(d.total):(result.unit.total=10===d.total?0:d.total,result.unit.results.push(result.unit.total));if(modif<0)result.tens.total=0===result.unit.total&&result.tens.results.includes(0)?100:Math.max(...result.tens.results);else if(0===result.unit.total){const dice=result.tens.results.filter((t=>t>0));result.tens.total=0===dice.length?100:Math.min(...dice)}else result.tens.total=Math.min(...result.tens.results);return result.total=result.unit.total+result.tens.total,result}static async showRollDice3d(roll){if(game.modules.get("dice-so-nice")?.active){const syncDice=game.settings.get("CoC7","syncDice3d"),chatData={whisper:null,blind:!1};ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode")),await game.dice3d.showForRoll(roll,game.user,syncDice,chatData.whisper,chatData.blind)}}static async combinedRoll(options){options.pool=options.pool??{},options.pool[0]=!1;const keys=Object.keys(options.pool).map((v=>parseInt(v,10)));let penaltyDice=Math.abs(Math.min(0,Math.min(...keys))),bonusDice=Math.max(0,Math.max(...keys));const hasDSN=game.modules.get("dice-so-nice")?.active,pool=[];pool.push("1dt+1d10"),penaltyDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDiePenalty")+"]":"1dt").repeat(Math.abs(penaltyDice))),bonusDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDieBonus")+"]":"1dt").repeat(Math.abs(bonusDice)));const roll=await new Roll(pool.join("")).roll({async:!0}),result={groups:{baseDie:0,penaltyDice:[],bonusDice:[]},unit:0,roll};let baseSet=!1;for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?baseSet?penaltyDice>0?(result.groups.penaltyDice.push(d.total),penaltyDice--):(result.groups.bonusDice.push(d.total),bonusDice--):(result.groups.baseDie=d.total,baseSet=!0):result.unit=10===d.total?0:d.total;const output={};for(const key in options.pool){output[key]={unit:{total:result.unit,results:[result.unit]},tens:{total:0,results:[]},total:0,roll};const modif=parseInt(key,10);let modifier=modif;output[key].tens.results.push(result.groups.baseDie);for(const offset=Math.abs(modifier);modifier<0;modifier++)output[key].tens.results.push(result.groups.penaltyDice[modifier+offset]);for(const offset=modifier;modifier>0;modifier--)output[key].tens.results.push(result.groups.bonusDice[Math.abs(modifier-offset)]);if(modif<0)output[key].tens.total=0===output[key].unit.total&&output[key].tens.results.includes(0)?100:Math.max(...output[key].tens.results);else if(0===output[key].unit.total){const dice=output[key].tens.results.filter((t=>t>0));output[key].tens.total=0===dice.length?100:Math.min(...dice)}else output[key].tens.total=Math.min(...output[key].tens.results);output[key].total=output[key].unit.total+output[key].tens.total}return output}static fumble99={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]}],total:99,evaluated:!0};static crit01={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:10,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:1,active:!0}]}],total:1,evaluated:!0}}class CoC7ContentLinkDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{id:"link-creation",classes:["coc7","active-effect-sheet"],title:game.i18n.localize("CoC7.CreateLink"),dragDrop:[{dragSelector:null,dropSelector:".container"}],template:"systems/CoC7/templates/apps/link-creation.html",closeOnSubmit:!1,width:560,height:"auto",tabs:[{navSelector:".tabs",contentSelector:".effect-options",initial:"details"}]})}async getData(){const sheetData=await super.getData();return sheetData.checkType=[{key:CoC7Link.CHECK_TYPE.CHECK,label:game.i18n.localize("CoC7.Check")},{key:CoC7Link.CHECK_TYPE.SANLOSS,label:game.i18n.localize("CoC7.SanityCheck")},{key:CoC7Link.CHECK_TYPE.ITEM,label:game.i18n.localize("CoC7.ItemWeapon")},{key:CoC7Link.CHECK_TYPE.EFFECT,label:game.i18n.localize("EFFECT.TabEffects")}],sheetData.linkType=[{key:CoC7Link.LINK_TYPE.CHARACTERISTIC,label:game.i18n.localize("CoC7.Characteristic")},{key:CoC7Link.LINK_TYPE.ATTRIBUTE,label:game.i18n.localize("CoC7.Attribute")},{key:CoC7Link.LINK_TYPE.SKILL,label:game.i18n.localize("CoC7.Skill")}],sheetData.attributeType=[{key:"lck",label:game.i18n.localize("CoC7.Luck")},{key:"san",label:game.i18n.localize("CoC7.Sanity")}],sheetData.effectModes=Object.entries(CONST.ACTIVE_EFFECT_MODES).reduce(((obj,e)=>(obj[e[1]]=game.i18n.localize("EFFECT.MODE_"+e[0]),obj)),{}),sheetData.characteristicType=CoCActor.getCharacteristicDefinition(),sheetData.link=sheetData.object.link,sheetData.fromGame=sheetData.link.isItemCheck||sheetData.link.isSkillCheck,sheetData.fromDirectory="fromDirectory"===sheetData.object.hasID,sheetData.fromCompendium="fromCompendium"===sheetData.object.hasID,sheetData.isSetFromGame=sheetData.link.id&&(sheetData.fromDirectory||sheetData.fromCompendium),sheetData.difficultyLevel=CoC7Check.difficultyLevel,sheetData.actorNames=sheetData.object.actors.map((a=>a.name)).join(", "),sheetData}activateListeners(html){super.activateListeners(html),html.find("select[name=type],select[name=check],select[name=attributeKey],select[name=characteristicKey],input[type=checkbox]").change(this._onChangeSubmit.bind(this)),html.find(".effect-control").click(this._onEffectControl.bind(this))}_onChangeSubmit(event){switch(event.currentTarget.name){case"fromCompendium":case"fromDirectory":this.object.hasID=event.currentTarget.name===this.object.hasID?"":event.currentTarget.name}this._onSubmit(event)}_onEffectControl(event){event.preventDefault();const button=event.currentTarget;switch(button.dataset.action){case"add":return this._addEffectChange();case"delete":button.closest(".effect-change").remove(),this._onSubmit(event)}}async _addEffectChange(){const idx=this.object.link.effect.changes.length;return this.submit({preventClose:!0,updateData:{[`effect.changes.${idx}`]:{key:"",mode:CONST.ACTIVE_EFFECT_MODES.ADD,value:""}}})}async _updateObject(event,formData){let hasEffect=!1;const effect={duration:{},changes:[]};for(const key in formData)switch(key){case"checkName":this.object.link.setValue("name",formData.checkName);break;case"blind":case"difficulty":case"displayName":case"icon":case"id":case"modifier":case"pack":case"sanMin":case"sanMax":case"sanReason":this.object.link.setValue(key,formData[key]);break;case"hasModifiers":case"hasLabel":case"hasIcon":this.object[key]=formData[key];break;case"effect.label":effect.label=formData[key],hasEffect=!0;break;case"effect.icon":effect.icon=formData[key],hasEffect=!0;break;case"effect.tint":effect.tint=formData[key],hasEffect=!0;break;case"effect.disabled":effect.disabled=formData[key],hasEffect=!0;break;case"effect.duration.seconds":effect.duration.seconds=formData[key],hasEffect=!0;break;case"effect.duration.rounds":effect.duration.rounds=formData[key],hasEffect=!0;break;case"effect.duration.turns":effect.duration.turns=formData[key],hasEffect=!0;break;default:{const match=key.match(/^effect\.changes\.(\d+)\.key$/);match&&(effect.changes.push({key:formData[key],mode:formData["effect.changes."+match[1]+".mode"],value:formData["effect.changes."+match[1]+".value"]}),hasEffect=!0)}}hasEffect&&this.object.link.setValue("object",effect);const target=event.currentTarget;if(target){switch(target.name){case"type":this.object.link.setValue("check",target.value),target.value===CoC7Link.CHECK_TYPE.CHECK&&(this.object.link.setValue("linkType",CoC7Link.LINK_TYPE.SKILL),this.object.link.setValue("name",""));break;case"check":this.object.link.setValue("linkType",target.value),target.value===CoC7Link.LINK_TYPE.CHARACTERISTIC?this.object.link.setValue("name",CoCActor.getCharacteristicDefinition()[0].key):target.value===CoC7Link.LINK_TYPE.ATTRIBUTE?this.object.link.setValue("name","lck"):this.object.link.setValue("name","");break;case"attributeKey":case"characteristicKey":this.object.link.setValue("name",target.value)}if("submit"===event.type){switch(event.submitter.dataset.action){case"clipboard":CoC7Utilities.copyToClipboard(this.object.link.link);break;case"chat":CoC7Link.toChatMessage(this.object.link.object);break;case"whisper-owner":CoC7Link.toWhisperMessage(this.object.link.object,this.object.actors);break;case"whisper-selected":if(!canvas.tokens.controlled.length)return void ui.notifications.warn(game.i18n.localize("CoC7.ErrorNoTokensSelected"));CoC7Link.toWhisperMessage(this.object.link.object,canvas.tokens.controlled.filter((t=>t.actor.owners.length)).map((t=>t.actor)))}return}}this.render(!0)}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("CoC7Link"===data.type)this.setLink(await CoC7Link.fromDropData(data)),this.render(!0);else if("Folder"===data.type&&"Actor"===data.documentName||["Item","Actor"].includes(data.type)){const dataList=await CoC7Utilities.getDataFromDropEvent(event,data.documentName??data.type);data.documentName??"Actor"===data.type?(this.object.actors=dataList.filter((a=>a.owners.length)),this.render(!0)):1===dataList.length&&["skill","weapon"].includes(dataList[0].type)&&(dataList[0].pack?(this.object.hasID="fromCompendium",this.object.link.setValue("pack",dataList[0].pack)):this.object.hasID="fromDirectory",this.object.link.setValue("id",dataList[0].id),this.object.link.setValue("name",dataList[0].name),this.render(!0))}}setLink(link){return this.object.link=link,""!==link.pack?this.object.hasID="fromCompendium":""!==link.id&&(this.object.hasID="fromDirectory"),link.difficulty===CoC7Check.difficultyLevel.regular&&0===parseInt(link.modifier,10)||(this.object.hasModifiers=!0),""!==link.displayName&&(this.object.hasLabel=!0),""!==link.icon&&(this.object.hasIcon=!0),""}static async create(linkData={},option={}){const object=mergeObject({link:null,hasID:"",hasModifiers:!1,hasLabel:!1,hasIcon:!1,actors:[]},option),dialog=new CoC7ContentLinkDialog(object,{});dialog.setLink(await CoC7Link.fromDropData(linkData)),dialog.render(!0)}}function createInlineRoll(roll){const data={cls:["inline-roll"],dataset:{}};try{data.cls.push("inline-result"),data.result=roll.total,data.title=roll.formula,data.dataset.roll=escape(JSON.stringify(roll))}catch(err){return null}const a=document.createElement("a");a.classList.add(...data.cls),a.title=data.title;for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.innerHTML=`<i class="fas fa-dice-d20"></i> ${data.result}`,a}function isCtrlKey(event){return!1!==event&&(event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}class chatHelper{static hyphenToCamelCase(string){return string.replace(/-([a-z])/g,(function(string){return string[1].toUpperCase()}))}static async createMessage(title,message,options={}){const messageData={};messageData.flavor=title,messageData.speaker=options.speaker||ChatMessage.getSpeaker(),options.whisper&&(messageData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER,messageData.whisper=options.whisper),void 0!==options.roll&&(messageData.roll=options.roll,messageData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,messageData.rollMode=CONST.DICE_ROLL_MODES.SELF),messageData.user=game.user.id,messageData.content=message,ChatMessage.create(messageData).then((msg=>msg))}static camelCaseToHyphen(string){return string.replace(/([A-Z])/g,(function(string){return"-"+string.toLowerCase()}))}static getActorFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const token=chatHelper.getTokenFromKey(key);return token?.actor}return game.actors.get(key)||null}static getSpeakerFromKey(actorKey){const speaker={},actor=chatHelper.getActorFromKey(actorKey);if(actorKey.includes(".")){const[sceneId,tokenId]=actorKey.split(".");speaker.token=tokenId,speaker.scene=sceneId,actor.token?.name&&(speaker.alias=actor.token.name),speaker.actor=actor.id}else speaker.actor=actorKey,speaker.alias=actor.name;return speaker}static attachObjectToElement(object,element,objectName=""){for(const prop of Object.keys(object))prop.startsWith("_")||("object"==typeof object[prop]?chatHelper.attachObjectToElement(object[prop],element,`${objectName}:${prop}:`):element.dataset[`${objectName}${prop}`]=object[prop])}static getObjectFromElement(object,element){function deserialize(obj,key,value){if(key.startsWith(":")){const s=key.slice(1),objProp=s.slice(s.indexOf(":")+1),objName=s.substring(0,s.indexOf(":"));void 0===obj[objName]&&(obj[objName]={}),deserialize(obj[objName],objProp,value)}else"true"===value?obj[key]=!0:"false"===value?obj[key]=!1:Number(value).toString()===value?obj[key]=Number(value):obj[key]=value}if(element&&object)for(const prop of Object.keys(element.dataset)){if("template"===prop)return;deserialize(object,prop,element.dataset[prop])}}static getTokenFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=duplicate(scene.document)),token}}{const actor=game.actors.get(key);return chatHelper.getActorToken(actor)}}static getActorToken(actor){return actor?actor.token||actor.prototypeToken:null}static getActorImgFromKey(actorKey){if(!actorKey)return null;if(game.settings.get("CoC7","useToken")){const token=chatHelper.getTokenFromKey(actorKey);if(token&&(token.document||token).texture.src&&-1===(token.document||token).texture.src.indexOf("*"))return(token.document||token).texture.src}const actor=chatHelper.getActorFromKey(actorKey);return game.settings.get("CoC7","useToken")&&actor.prototypeToken&&actor.prototypeToken.texture.src&&-1===actor.prototypeToken.texture.src?.indexOf("*")?actor.prototypeToken.texture.src:actor.img}static getDistance(startToken,endToken){if(void 0===endToken.center&&void 0!==endToken.id&&startToken.scene?.id){const scene=game.scenes.get(startToken.scene.id);if(void 0!==scene?.tokens){const tokens=scene?.tokens.filter((token=>token.actor.id===endToken.data.document.id)).map((token=>token.object));1===tokens.length&&(endToken=tokens[0])}}let distance={gridUnit:0,value:0,unit:canvas.scene.grid.units};if(void 0!==startToken&&void 0!==startToken.center&&void 0!==endToken&&void 0!==endToken.center){const ray=new Ray(startToken.center,endToken.center),segment=[{ray}];if(distance={gridUnit:ray.distance/canvas.scene.grid.size,value:canvas.grid.measureDistances(segment,{gridSpaces:game.settings.get("CoC7","gridSpaces")})[0],unit:canvas.scene.grid.units},game.settings.get("CoC7","distanceElevation")){const elevation=Math.abs((startToken.document.elevation||0)-(endToken.document.elevation||0));distance.value=Math.sqrt(distance.value*distance.value+elevation*elevation)}}else ui.notifications.warn(game.i18n.localize("CoC7.MessageDistanceCalculationFailure"));return distance}static toYards(distance){return"ft"===distance.unit?distance.value/3:distance.value}}class CoC7Roll{static getFromCard(card){const rollDiv=card.querySelector("div.dice-roll");if(!rollDiv)return null;const roll=new CoC7Roll;return chatHelper.getObjectFromElement(roll,rollDiv),roll}get resultType(){switch(this.successLevel=parseInt(this.successLevel),this.successLevel){case CoC7Check.successLevel.regular:return game.i18n.format("CoC7.RegularSuccess");case CoC7Check.successLevel.hard:return game.i18n.format("CoC7.HardSuccess");case CoC7Check.successLevel.extreme:return game.i18n.format("CoC7.ExtremeSuccess");case CoC7Check.successLevel.critical:return game.i18n.format("CoC7.CriticalSuccess");case CoC7Check.successLevel.fumble:return game.i18n.format("CoC7.Fumble");case CoC7Check.successLevel.failure:return game.i18n.format("CoC7.Failure");default:return null}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get item(){return this.itemId&&this.actor?this.actor.items.get(this.itemId):null}get skill(){return this.skillId&&this.actor?this.actor.items.get(this.skillId):null}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}static getFromElement(element,object=null){if(!element)return;const roll=object||new CoC7Roll;chatHelper.getObjectFromElement(roll,element),roll.dices={tens:[],unit:{}},chatHelper.getObjectFromElement(roll.dices,element.querySelector(".dice-result")),roll.dices.hasBonus=0!==roll.diceModifier,roll.dices.bonus=Math.abs(roll.diceModifier),roll.dices.bonusType=roll.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus");const tenDice=element.querySelector(".ten-dice");if(tenDice)for(const d of tenDice.querySelectorAll("li")){const die={selected:!1,isMax:!1,isMin:!1,value:-1};chatHelper.getObjectFromElement(die,d),roll.dices.tens.push(die)}const unitDie=element.querySelector(".unit-die")?element.querySelector(".unit-die").querySelector("li"):null;roll.dices.unit.value=unitDie?parseInt(unitDie.dataset.value):null,roll.increaseSuccess=[];const increaseSuccess=element.querySelector(".increase-success");if(increaseSuccess&&increaseSuccess.querySelectorAll("button"))for(const isl of increaseSuccess.querySelectorAll("button")){const newSuccesLevel={};chatHelper.getObjectFromElement(newSuccesLevel,isl),roll.increaseSuccess.push(newSuccesLevel)}return roll.luckNeeded&&(roll.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:roll.luckNeeded})),object?void 0:roll}static getFromCheck(check){const roll=new CoC7Roll;return roll.rollType=check.rollType,roll.side=check.side,roll.action=check.action,roll.refMessageId=check.refMessageId,roll.referenceMessageId=check.referenceMessageId,roll.successLevel=check.successLevel,roll.difficulty=check.difficulty,roll.skillId=check.skill?check.skill.id:null,roll.itemId=check.item?check.item.id:null,roll.diceMod=check.diceModifier,roll.value=parseInt(check.rawValue),roll.fumble=check.isFumble,roll.critical=check.isCritical,roll.characteristic=check.characteristic?check.characteristic:null,roll.result=check.dice.total,roll.actorKey=check.actor.tokenKey,check.actor.isToken?(roll.tokenId=check.actor.tokenKey,roll.actorId=null):(roll.tokenKey=null,roll.actorId=check.actor.tokenKey),roll}static attachCheckToElement(htmlElement,check){const roll=CoC7Roll.getFromCheck(check);return roll.attachToElement(htmlElement),roll}attachToElement(htmlElement){chatHelper.attachObjectToElement(this,htmlElement)}}class CoC7Damage{static getMainDie(damageString){return damageString.toLowerCase().includes("d20")?"d20":damageString.toLowerCase().includes("d12")?"d12":damageString.toLowerCase().includes("d10")?"d10":damageString.toLowerCase().includes("d8")?"d8":damageString.toLowerCase().includes("d4")?"d4":"d6"}static getFromElement(element,object=null){if(!element)return;const damage=object||{};chatHelper.getObjectFromElement(damage,element);const rolls=element.querySelector(".dice-rolls").querySelectorAll("li");damage.rolls=[];for(const r of rolls){const roll={};chatHelper.getObjectFromElement(roll,r),damage.rolls.push(roll)}return object?void 0:damage}}class RollDialog{static async create(options={}){options.difficulty&&(options.difficultyLevel={},CoC7Check.difficultyLevel.unknown===options.difficulty&&(options.difficultyLevel.unknown=!0),CoC7Check.difficultyLevel.regular===options.difficulty&&(options.difficultyLevel.regular=!0),CoC7Check.difficultyLevel.hard===options.difficulty&&(options.difficultyLevel.hard=!0),CoC7Check.difficultyLevel.extreme===options.difficulty&&(options.difficultyLevel.extreme=!0)),options.name&&!options.displayName&&(options.displayName=options.name);const unknownDifficultyDefault="unknown"===game.settings.get("CoC7","defaultCheckDifficulty"),data={allowFlatDiceModifier:game.settings.get("CoC7","allowFlatDiceModifier")&&!options.disableFlatDiceModifier,allowFlatThresholdModifier:game.settings.get("CoC7","allowFlatThresholdModifier")&&!options.disableFlatThresholdModifier,difficulty:CoC7Check.difficultyLevel,unknownDifficultyDefault,hideDifficulty:options.hideDifficulty??!1,options};void 0!==options.cardType&&(!options.forcedCardType??1)&&(data.cardTypes=CoC7ChatMessage.cardTypes(options));const html=await renderTemplate("systems/CoC7/templates/apps/bonus.html",data);return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:options.displayName?game.i18n.format("CoC7.BonusSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.BonusSelectionWindow"),content:html,buttons:{roll:{label:game.i18n.localize("CoC7.RollDice"),callback:html=>(formData=new FormData(html[0].querySelector("#bonus-roll-form")),resolve(formData))}},default:"roll",close:()=>{}});dlg.render(!0)}))}}class RollCard{constructor(){this.rolls=[],this.initiator=null}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);for(let index=0;index<card.rolls.length;index++)"Object"===card.rolls[index]?.constructor?.name&&(card.rolls[index]=Object.assign(new CoC7Check,card.rolls[index]),card.rolls[index].rolled&&(card.rolls[index]._htmlRoll=await card.rolls[index].getHtmlRoll()));return card}static async _onToggle(event){event.preventDefault();const span=event.currentTarget;if(span&&span.classList.contains("gm-select-only")&&!game.user.isGM)return;const message=span.closest(".chat-message"),card=await this.fromMessageId(message.dataset.messageId);if(!card)return;const flag=span.dataset.flag;if(!flag)return;const toggle=span.closest(".toggle");if(toggle){const buttons=toggle.querySelectorAll(".toggle-switch");for(const b of buttons)card.unsetFlag(b.dataset.flag);card.setFlag(flag)}else card.toggleFlag(flag);card.updateChatCard()}static async dispatch(data){if(game.user.isGM){let card,messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===data.roll.initiator)));if(messages.length){const timestamp=new Date(messages[0].timestamp);86400<(new Date-timestamp)/1e3&&(await messages[0].setFlag("CoC7","state","resolved"),messages=[])}card=messages.length?await this.fromMessage(messages[0]):new this,void 0!==data._rollMode&&(card._rollMode=data._rollMode),await card.process(data)}else game.socket.emit("system.CoC7",data)}async toMessage(){const html=await renderTemplate(this.config.template,this),htmlCardElement=$(html);htmlCardElement[0].dataset.object=escape(this.dataString);const chatData={user:game.user.id,flavor:game.i18n.localize(this.config.title),content:htmlCardElement[0].outerHTML,flags:{CoC7:{type:this.config.type,state:"initiated",initiator:this.initiator}}};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0);return await ChatMessage.create(chatData)}async updateChatCard(){if(await this.compute(),this.messageId){const html=await renderTemplate(this.config.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}await this.toMessage()}updateRoll(data){data.fromGM||Object.assign(this.rolls[data.rank],data.roll)}addRollData(data){const check=Object.assign(new CoC7Check,data.roll);this.rolls.push(check),"combinedCard"===this.config.type&&(this.initiator=data.roll.initiator)}addRoll(data){this.rolls.push(data)}removeRoll(rank){this.rolls.splice(rank,1)}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultConfig(){return{exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get winners(){return this.rolls.filter((r=>r.winner))}get winner(){if(this.winners.length)return this.winners[0]}get loosers(){return this.rolls.filter((r=>!r.winner))}get looser(){if(this.loosers.length)return this.loosers[0]}get hasWinner(){return this.winners.length>0}get isKeeper(){return game.user.isGM}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.config.exclude?.includes(key)&&!key.startsWith(this.config.excludeStartWith))return value}))}}class CombinedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.combined .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.combined a",CombinedCheckCard._onClick.bind(this)),html.on("click",".roll-card.combined button",CombinedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/combined-roll.html",type:"combinedCard",title:"CoC7.CombinedRollCard"})}get config(){return CombinedCheckCard.defaultConfig}get successCount(){if(this.rolled){let count=0;for(const r of this.rolls)r.passed&&(count+=1);return count}}get mainActorKey(){return this.rolls[0]?.actor?.actorKey||void 0}get success(){if(void 0!==this.successCount)return this.any?this.successCount>0:this.all?this.successCount===this.rolls.length:void 0}get failure(){if(void 0!==this.success)return!this.success}get checkGMInitiator(){return game.users.get(this.initiator)?.isGM}async getHtmlRoll(){if(!this.rolled)return;const check=new CoC7Check;return await check._perform({roll:this._roll[check.diceModifier||0],silent:!0}),await check.getHtmlRoll({hideSuccess:!0})}process(data){switch(data.action){case"new":case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data);break;case"assignRoll":this.assignRoll(data)}game.user.isGM?this.updateChatCard():game.socket.emit("system.CoC7",data)}async assignRoll(data){game.user.isGM&&(this.rolled||(this.rolled=!0,this._roll=data.roll))}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await CombinedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-card":{const pool={};for(const dice of card.rolls){const diceModifier=parseInt(dice.diceModifier,10);isNaN(diceModifier)||(pool[diceModifier]=!1)}const roll=await CoC7Dice.combinedRoll({pool});roll.initiator=game.user.id;const data={type:this.defaultConfig.type,action:"assignRoll",fromGM:game.user.isGM,roll};AudioHelper.play({src:CONFIG.sounds.dice},!0),card.process(data);break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM,roll:{initiator:game.user.id}};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(){if(this._roll){this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.data));for(const r of this.rolls)r.rolled||(r.modifier=r.diceModifier||0,r.difficulty=r.difficulty||CoC7Check.difficultyLevel.regular,r.flatDiceModifier=r.flatDiceModifier||0,r.flatThresholdModifier=r.flatThresholdModifier||0,await r._perform({roll:this._roll[r.modifier],silent:!0}));for(let i=0;i<this.rolls.length;i++)this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));this._htmlRoll=await this.getHtmlRoll()}}closeCard(){this.closed=!0}}class InteractiveChatCard{constructor(options={}){this._options=options}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this),htmlCardElement=$(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatData=mergeObject({user:game.user.id,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}this.toMessage()}activateListeners(html){html.on("click",".interactive-card .ic-radio-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .ic-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .submit",this._onSubmit.bind(this)),html.on("focusout","input",this._onSubmit.bind(this)),html.on("click",".interactive-card button",this._onButton.bind(this)),html.on("keydown","form",this._onKey.bind(this))}static async bindListeners(html){const htmlCardElement=html[0].querySelector(".chat-card");if(!htmlCardElement)return;if(!htmlCardElement.dataset.cardClass)return;if(!Object.getOwnPropertyNames(game.CoC7.cards).includes(htmlCardElement.dataset.cardClass))return;const card=await InteractiveChatCard.fromHTMLCardElement(htmlCardElement),typedCard=Object.assign(new game.CoC7.cards[htmlCardElement.dataset.cardClass],card);typedCard.assignObject(),typedCard.activateListeners(html)}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;this[action]&&this[action]({event,update:!0})}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(".interactive-card");if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).toObject();data=diffObject(this,expandObject(data));for(const[key,value]of Object.entries(data))this[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{classes:["interactive-card"],exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));if(!cardData.messageId){const message=card.closest(".message");cardData.messageId=message?.dataset?.messageId}return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);return await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ic-radio");if(toggle){const buttons=toggle.querySelectorAll(".ic-radio-switch");for(const b of buttons)this.unsetFlag(b.dataset.flag);this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(".interactive-card");card&&this._update(card),this.updateChatCard()}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get isTargetOwner(){return this.target.isOwner}get isKeeper(){return game.user.isGM}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor||this.targetToken.data.actor||this.targetToken.data.document:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}}class DamageCard extends InteractiveChatCard{static get defaultOptions(){return mergeObject(super.defaultOptions,{exclude:["_targetToken","_targetActor","_htmlRoll","_htmlInlineRoll"].concat(super.defaultOptions.exclude),template:"systems/CoC7/templates/chat/cards/damage.html"})}async assignObject(){this.damageRoll&&"Object"===this.damageRoll.constructor.name&&(this.damageRoll=Roll.fromData(this.damageRoll))}_onButton(event){super._onButton(event)}get critical(){return this.options.critical}set critical(x){this._options.critical=x}get impale(){return void 0===this._impale?this.weapon.impale:this._impale}set impale(x){this._impale=x}get isDamageFormula(){return"string"==typeof this.damageFormula&&(!!isNaN(Number(this.damageFormula))&&Roll.validate(this.damageFormula))}get isDamageNumber(){return!isNaN(Number(this.damageFormula))}get isArmorForula(){return"string"==typeof this.armor&&(!!isNaN(Number(this.armor))&&Roll.validate(this.armor))}get totalDamageString(){let damage=Number(this.isDamageNumber?this.damageFormula:this.roll.total);return!this.ignoreArmor&&((isNaN(Number(this.armor))||Number(this.armor)>0)&&(damage-=Number(this.armor)),!isNaN(Number(this.armor))&&damage<=0)?game.i18n.localize("CoC7.ArmorAbsorbsDamage"):damage}get noDamage(){if(this.rolled){const damage=this.isDamageNumber?this.damageFormula:this.roll.total;return this.ignoreArmor?!!(damage<=0):!isNaN(Number(this.armor))&&!!(damage-Number(this.armor)<=0)}return!1}async updateChatCard(){if(!this.options.fastForward||this.roll||this.isDamageNumber||await this.rollDamage({update:!1}),this.isDamageNumber||this.roll&&null!=this.roll.total||this.hardrolled?this.rolled=!0:this.rolled=!1,!this.options.fastForward||this.damageInflicted||this.noDamage||await this.dealDamage({update:!1}),this.rolled&&this.roll){"Object"===this.roll.constructor.name&&(this.roll=Roll.fromData(this.roll));const a=createInlineRoll(this.roll);this._htmlInlineRoll=a.outerHTML,this._htmlRoll=await this.roll.render()}await super.updateChatCard()}async rollDamage(options={update:!0}){this.roll=await new Roll(this.damageFormula||"0").evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.roll),this.hardrolled=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async rollArmor(options={update:!0}){const roll=await new Roll(this.armor).evaluate({async:!0});this.armor=roll.total,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async dealDamageToSelectedTarget(options={update:!0}){if(this.isArmorForula&&await this.rollArmor(),isNaN(Number(this.totalDamageString)))return void ui.notifications.error(game.i18n.localize("CoC7.ErrorEvaluatingDamage"));const targets=[],targetName=[],selectedPlayers=canvas.tokens.controlled.map((token=>token.actor));for(let index=0;index<selectedPlayers.length;index++)this.actor.id!==selectedPlayers[index].id&&(targetName.push(selectedPlayers[index].name),targets.push(selectedPlayers[index]));const data={title:" ",content:game.i18n.format("CoC7.DealDamage",{damage:this.totalDamageString,target:targetName}),buttons:{one:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>{this.confirmDamage(targets)}},two:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>{}}},default:"two"};targetName.length>0&&new Dialog(data).render(!0)}async confirmDamage(targets){for(let index=0;index<targets.length;index++)await targets[index].dealDamage(Number(this.totalDamageString),{ignoreArmor:!1}),ChatMessage.create({content:game.i18n.format("CoC7.DamageDealTo",{name:targets[index].name,damage:this.totalDamageString})})}async dealDamage(options={update:!0}){this.isArmorForula&&await this.rollArmor();let damage=this.totalDamageString;if(isNaN(Number(damage))){if(game.i18n.localize("CoC7.ArmorAbsorbsDamage")!==damage)return void ui.notifications.error("Error evaluating damage");damage=0}this.targetActor&&await this.targetActor.dealDamage(Number(damage),{ignoreArmor:!0}),this.damageInflicted=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}get range(){return this.options.range||"normal"}set range(x){["normal","long","extreme"].inclues(x.toLowerCase())&&(this._options.range=x)}get damageFormula(){const range=this.range;let formula=this.weapon?.system?.range[range]?.damage,db=this.actor.db;if(db=(""===(db??"").toString().trim()?0:db).toString().trim(),db.startsWith("-")||(db="+"+db),this.weapon.system.properties.addb&&(formula+=db),this.weapon.system.properties.ahdb&&(formula=formula+"+ floor("+db+"/2)"),formula){const maxDamage=new Roll(formula).evaluate({maximize:!0}).total;let rollString;return this.critical?this.impale?(rollString=formula+"+"+maxDamage,rollString):maxDamage:formula}}get armor(){return void 0!==this._armor&&""!==this._armor?this._armor:this.target?this.targetActor.system.attribs.armor.value:0}set armor(x){this._armor=x}}class OpposedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.opposed .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.opposed a",OpposedCheckCard._onClick.bind(this)),html.on("click",".roll-card.opposed button",OpposedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/opposed-roll.html",type:"opposedCard"})}get config(){return OpposedCheckCard.defaultConfig}get attackerRoll(){if(this.combat){if(this.rolls?.length){const attacker=this.rolls.filter((r=>0===r.index||r.attacker));if(attacker.length)return attacker[0]}}else;}get defenderRoll(){if(this.combat){if(this.rolls?.length){const defender=this.rolls.filter((r=>0!==r.index||!r.attacker));if(defender.length)return defender[0]}}else;}get defenderIsDodging(){return!(!this.defenderRoll?.actor?.dodgeSkill?.name||!this.defenderRoll?.skill?.name)&&this.defenderRoll.actor.dodgeSkill.name.toLowerCase()===this.defenderRoll.skill.name.toLowerCase()}get advantageAttacker(){return void 0===this._aa?!!this.defenderRoll&&!this.defenderIsDodging:this._aa}get winnerRollsDamage(){return!!(this.combat&&this.rolls.length>=2&&this.hasWinner&&"weapon"===this.winner?.item?.type)}set advantageAttacker(x){this._aa=!0,this._ad=!1}get advantageDefender(){return void 0===this._ad?this.defenderIsDodging:this._ad}set advantageDefender(x){this._ad=!0,this._aa=!1}get isTie(){return this.winnerCount>1}get needsTieBreaker(){return!!this.combat&&!(!this.attackerRoll||!this.defenderRoll||this.attackerRoll.successLevel!==this.defenderRoll.successLevel)}get winnerCount(){let count=0;for(const r of this.rolls)r.winner&&(count+=1);return count}get isAttackManeuver(){return!(!this.combat||!this.attackerRoll||this.attackerRoll?.item&&!this.attackerRoll?.item.system.properties?.mnvr)}get resultText(){if(this.combat&&this.attackerRoll&&this.defenderRoll){if(!this.attackerRoll.winner&&!this.defenderRoll.winner)return game.i18n.localize("CoC7.NoWinner");if(this.attackerRoll.winner)return this.attackerRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.attackerRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.attackerRoll.actor.name});if(this.defenderRoll.winner)return this.defenderRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.defenderRoll.actor.name}):this.defenderIsDodging?game.i18n.format("CoC7.DodgeSuccess",{name:this.defenderRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.defenderRoll.actor.name})}}async process(data){switch(data.action){case"new":this.rolls?.length||(this.combat=data.combat||void 0,this.combat&&(data.roll.attacker=!0)),data.roll.index=this.rolls.length,this.addRollData(data);break;case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data)}game.user.isGM?await this.updateChatCard():game.socket.emit("system.CoC7",data)}async roll(rank){await this.rolls[rank]._perform();const data={type:this.config.type,action:"updateRoll",rank,fromGM:game.user.isGM};return game.user.isGM||(data.roll=this.rolls[rank].JSONRollData),data}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await OpposedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"toggle-combat":card.combat=!card.combat,await card.updateChatCard();break;case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-check":{const speaker=ChatMessage.getSpeaker();card.rolls[rank].actorKey||(card.rolls[rank].actorKey=`${speaker.scene}.${speaker.token}`);const data=await card.roll(rank);await card.process(data);break}case"roll-damage":{card.closeCard(),await card.updateChatCard();const damageChatCard=new DamageCard({critical:card.winner.isExtremeSuccess,fastForward:event.shiftKey});damageChatCard.actorKey=card.winner.actor.actorKey,damageChatCard.targetKey=card.looser.actor.actorKey,damageChatCard.itemId=card.winner.itemId,damageChatCard.updateChatCard();break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(rank=void 0){if(this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.actorKey)),rank)this.rolls[rank].rolled&&(this.rolls[rank]._htmlRoll=await this.rolls[rank].getHtmlRoll({hideDiceResult:!0}));else for(let i=0;i<this.rolls.length;i++)delete this.rolls[i].maneuver,this.combat&&(!this.rolls[i].item||this.rolls[i].item.system.properties?.mnvr)&&(this.rolls[i]?.actor?.dodgeSkill?.name&&this.rolls[i]?.skill?.name&&this.rolls[i].actor.dodgeSkill.name.toLowerCase()!==this.rolls[i].skill.name.toLowerCase()||!this.rolls[i]?.actor?.dodgeSkill?.name)&&(this.rolls[i].maneuver=!0),this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));if(this.combat){if(this.rolls.sort(((a,b)=>a.index>b.index?1:a.index<b.index?-1:0)),this.rolls.length>1){this.rolls=[this.rolls[0],this.rolls[1]];for(const r of this.rolls)delete r.winner,delete r.tie}this.rolls[0]&&(this.rolls[0].attacker=!0),this.rolls[0]?.rolled&&this.rolls[1]?.rolled&&(this.rolls[0].passed||this.rolls[1].passed)&&(this.rolls[0].successLevel>this.rolls[1].successLevel?this.rolls[0].winner=!0:this.rolls[1].successLevel>this.rolls[0].successLevel?this.rolls[1].winner=!0:this.advantageAttacker?this.rolls[0].winner=!0:this.rolls[1].winner=!0)}else{if(this.rolls.sort(((a,b)=>{if(a.rolled&&!b.rolled)return-1;if(!a.rolled&&b.rolled)return 1;if(!a.rolled&&!b.rolled)return 0;if(a.successLevel>b.successLevel)return this.resolved=!0,-1;if(a.successLevel<b.successLevel)return this.resolved=!0,1;if(game.settings.get("CoC7","opposedRollTieBreaker")){if(a.modifiedResult>b.modifiedResult)return this.resolved=!0,-1;if(a.modifiedResult<b.modifiedResult)return this.resolved=!0,1}else{if(a.rawValue>b.rawValue)return this.resolved=!0,-1;if(a.rawValue<b.rawValue)return this.resolved=!0,1}return 0})),this.winCount=0,this.rolls[0]&&this.rolls[0].rolled&&!this.rolls[0].failed){this.winCount=1;for(let i=1;i<this.rolls.length;i++)this.rolls[i]&&this.rolls[i].rolled&&this.rolls[0].successLevel===this.rolls[i].successLevel&&(game.settings.get("CoC7","opposedRollTieBreaker")?this.rolls[0].modifiedResult===this.rolls[i].modifiedResult:this.rolls[0].rawValue===this.rolls[i].rawValue)&&(this.winCount=this.winCount+1)}for(let i=0;i<this.rolls.length;i++)this.rolls[i].winner=i<this.winCount,this.rolls[i].tie=this.rolls[i].winner&&this.winCount>1}}closeCard(){this.closed=!0}}class ChatCardActor{constructor(actorKey=null,fastForward=!1){this.actorKey=actorKey,this.fastForward=fastForward}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){this._rollMode=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}async say(message,flavor=null){const speakerData={};let speaker;this.actor?(speakerData.actor=this.actor,this.token&&(speakerData.token=this.token.document),speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor,content:message};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}}function replacer(key,value){if(key.startsWith("__"))return;if(["_actor"].includes(key))return;return["sanCheck","intCheck"].includes(key)?value.JSONRollData:value}class SanCheckCard extends ChatCardActor{constructor(actorKey=null,sanData={},options={}){super(actorKey,void 0!==options.fastForward&&Boolean(options.fastForward)),sanData.sanReason=sanData.sanReason??"",this.sanData=sanData,this.options=options,sanData.modifier&&!isNaN(Number(sanData.modifier))&&(this.options.sanModifier=Number(sanData.modifier)),sanData.difficulty&&!isNaN(Number(sanData.difficulty))&&(this.options.sanDifficulty=Number(sanData.difficulty)),this.state={}}get isBlind(){return void 0!==this.options.isBlind?Boolean(this.options.isBlind):super.isBlind}get difficulty(){return void 0!==this.options.difficulty?this.options.difficulty:CoC7Check.difficultyLevel.regular}get modifier(){return void 0!==this.options.modifier?this.options.modifier:0}get sanLossSource(){return this.sanData.tokenKey?chatHelper.getActorFromKey(this.sanData.tokenKey):null}get involuntaryAction(){return!(!this.state.sanRolled||!this.sanCheck.isFailure&&!this.sanCheck.isFumble)}get sanLossFormula(){return this.state.sanRolled?this.sanData.sanMax&&this.sanCheck.failed?isNaN(Number(this.sanData.sanMax))?this.sanData.sanMax:Number(this.sanData.sanMax):this.sanData.sanMin&&this.sanCheck.passed?isNaN(Number(this.sanData.sanMin))?this.sanData.sanMin:Number(this.sanData.sanMin):0:null}get sanLostToReason(){return this.actor.sanLostToReason(this.sanData.sanReason)}get maxPossibleSanLoss(){return this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)}get maxSanLoss(){return new Roll(this.sanData.sanMax.toString()).evaluate({maximize:!0}).total}get sanLossReasonEncountered(){return this.actor.sanLossReasonEncountered(this.sanData.sanReason)}get firstEncounter(){return!this.actor.mythosInsanityExperienced}get isActorLoosingSan(){return!this.actor.hasTempoInsane&&(0!==this.sanLossFormula&&(!this.sanData.sanReason||0!==this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)||(this.state.immuneToCreature=!0,!1)))}get boutDurationText(){if(this.boutDuration){if(this.boutRealTime)return`${this.boutDuration} ${game.i18n.localize("CoC7.rounds")}`;if(this.boutSummary)return`${this.boutDuration} ${game.i18n.localize("CoC7.hours")}`}return null}get youGainCthulhuMythosString(){return this.mythosGain?game.i18n.format("CoC7.YouGainedCthulhuMythos",{value:this.mythosGain}):null}async advanceState(state){switch(state){case"keepCreatureSanData":this.state.keepCreatureSanData=!0;break;case"involuntaryActionPerformed":this.state[state]=!0,this.isActorLoosingSan||(this.state.finish=!0);break;case"sanLossApplied":await this.applySanLoss();break;case"enterBoutOfMadnessRealTime":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!0,this.boutSummary=!1,this.boutResult=await this.actor.enterBoutOfMadness(!0,this.boutDuration),this.state.boutOfMadnessResolved=!0,this.state.boutOfMadnessOver=!1;break;case"enterBoutOfMadnessSummary":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!1,this.boutSummary=!0,this.boutResult=await this.actor.enterBoutOfMadness(!1,this.boutDuration),this.state.boutOfMadnessResolved=!0,await this.triggerInsanity();break;case"boutOfMadnessOver":await this.actor.unsetCondition(COC7.status.tempoInsane),await this.triggerInsanity();break;case"noMythosGained":this.state.cthulhuMythosAwarded=!0,this.mythosGain=0;break;case"cthulhuMythosAwarded":{let amountGained=1;this.actor.mythosInsanityExperienced||(amountGained=5,await this.actor.experienceFirstMythosInsanity()),this.state.cthulhuMythosAwarded=!0;const cthulhuMythosSkill=this.actor.cthulhuMythosSkill,oldValue=cthulhuMythosSkill.data.data.adjustments.experience||0;cthulhuMythosSkill&&await cthulhuMythosSkill.update({"data.adjustments.experience":oldValue+amountGained}),this.mythosGain=amountGained;break}}}async bypassRollSan(){this.isBypassed=!0,this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.state.sanLossRolled=!0,this.state.ignoreSanCheck=!0,this.sanLoss=this.sanLossFormula}async rollSan(){if(this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.isActorLoosingSan){if("number"==typeof this.sanLossFormula)this.state.sanLossRolled=!0,this.sanData.sanReason?(this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanLossFormula),this.sanLoss<this.sanLossFormula&&(this.state.limitedLossToCreature=!0)):this.sanLoss=this.sanLossFormula;else if(this.sanCheck.isFumble)this.state.sanLossRolled=!0,this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);else if(this.sanData.sanReason){const min=new Roll(this.sanLossFormula).evaluate({minimize:!0}).total,max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);min>=max&&(this.state.sanLossRolled=!0,this.sanLoss=max,this.state.limitedLossToCreature=!0)}}else this.state.finish=!0,this.actor.hasTempoInsane&&(this.state.immuneAlreadyInBout=!0,this.sanCheck.passed||(this.state.finish=!1)),this.state.sanLossRolled=!0,this.state.sanLossApplied=!0,this.state.intRolled=!0,this.state.insanity=!1,this.sanLoss=0}async rollSanLoss(){this.sanLossRoll=new Roll(`${this.sanLossFormula}`),await this.sanLossRoll.roll({async:!0}),await CoC7Dice.showRollDice3d(this.sanLossRoll);const max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);this.sanLossRoll.total>max&&(this.state.limitedLossToCreature=!0),this.sanLoss=Math.min(this.sanLossRoll.total,max),this.state.sanLossRolled=!0}async applySanLoss(){if(await this.actor.looseSan(this.sanData.sanReason,this.sanLoss),this.sanLoss>0&&(this.state.actorLostSan=!0),this.state.sanLossApplied=!0,this.actor.san<=0)return this.state.intRolled=!0,this.state.boutOfMadnessOver=!0,this.state.insanity=!0,this.state.permanentlyInsane=!0,void(this.state.finish=!0);this.sanLoss<5?(this.state.intRolled=!0,this.actor.hasIndefInsane?(this.state.insanity=!0,this.state.shaken=!0,this.state.insanityTableRolled=!1,this.state.finish=!1,this.state.intRolled=!0):(this.state.insanity=!1,this.state.shaken=!0,this.state.insanityTableRolled=!0,this.state.finish=!0)):this.state.intRolled=!1,this.actor.dailySanLoss>=this.actor.dailySanLimit&&(this.state.insanity=!0,this.state.intRolled=!0,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!0,this.state.insanityTableRolled=!1,this.state.memoryRepressed=!1,this.state.finish=!1)}async rollInt(){this.intCheck=new CoC7Check,this.intCheck.actor=this.actorKey,this.intCheck.characteristic="int",this.intCheck.difficulty=this.options.intDifficulty||CoC7Check.difficultyLevel.regular,this.intCheck.diceModifier=this.options.intModifier||0,await this.intCheck._perform({forceDSN:!0}),this.state.intRolled=!0,this.intCheck.passed||this.state.alreadyInsane?(this.state.insanity=!0,this.state.temporaryInsane=!0,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!1):(this.state.insanity=!1,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!0,this.state.finish=!0)}async triggerInsanity(){this.state.boutOfMadnessOver=!0,this.state.indefinitelyInsane&&await this.actor.setCondition(COC7.status.indefInsane),this.state.finish=!0}async clearSanLossReason(){await this.actor.setReasonSanLoss(this.sanData.sanReason,0),this.sanLossReasonEncountered||(this.state.keepCreatureSanData=!0)}async updateChatCard(){if(this.state.sanRolled&&(this.__inlineSanCheck=this.sanCheck.inlineCheck.outerHTML),this.sanLossRoll){const a=createInlineRoll(this.sanLossRoll);this.__inlineSanLossRoll=a.outerHTML}this.state.intRolled&&this.intCheck&&(this.__inlineIntCheck=this.intCheck.inlineCheck.outerHTML);const html=await renderTemplate(SanCheckCard.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(this,replacer));const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static get template(){return"systems/CoC7/templates/chat/cards/san-check.html"}static checkTargets(sanData,fastForward=!1){const targets=[...game.user.targets];if(targets.length)for(const t of targets)t.actor.isToken?SanCheckCard.create(t.actor.tokenKey,sanData,{fastForward}):SanCheckCard.create(t.actor.id,sanData,{fastForward});else ui.notifications.warn(game.i18n.localize("CoC7.WarnNoTargetsSanCheck"))}static async create(...args){const chatCard=new SanCheckCard(...args);chatCard.actor.hasIndefInsane&&(chatCard.state.alreadyInsane=!0),chatCard.actor.san<=0&&(chatCard.state.intRolled=!0,chatCard.state.boutOfMadnessOver=!0,chatCard.state.insanity=!0,chatCard.state.permanentlyInsane=!0,chatCard.state.finish=!0);const html=await renderTemplate(SanCheckCard.template,chatCard),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(chatCard,replacer)),await chatCard.say(htmlCardElement.outerHTML)}static getFromMessageId(messageId){const message=game.messages.get(messageId),htmlCard=$.parseHTML(message.content)[0].querySelector(".chat-card");return SanCheckCard.getFromCard(htmlCard)}static getFromCard(card){const sanCheckCardData=JSON.parse(unescape(card.dataset.object)),sanCheckCard=new SanCheckCard;return Object.assign(sanCheckCard,sanCheckCardData),sanCheckCard.messageId||(sanCheckCard.messageId=card.closest(".message").dataset.messageId),"Object"===sanCheckCard.sanCheck?.constructor?.name&&(sanCheckCard.sanCheck=Object.assign(new CoC7Check,sanCheckCard.sanCheck)),"Object"===sanCheckCard.intCheck?.constructor?.name&&(sanCheckCard.intCheck=Object.assign(new CoC7Check,sanCheckCard.intCheck)),"Object"===sanCheckCard.sanLossRoll?.constructor?.name&&(sanCheckCard.sanLossRoll=Roll.fromData(sanCheckCard.sanLossRoll)),sanCheckCard}}class SanDataDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(":checkbox").click((()=>this._toggleInput(html)))}_toggleInput(html){html.find('*[name="customname"]').toggle()}static async create(options={}){const html=await renderTemplate("systems/CoC7/templates/apps/sandata.html",options);return new Promise((resolve=>{let formData=null;const dlg=new SanDataDialog({title:options.displayName?game.i18n.format("CoC7.SanDataSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.SanDataSelectionWindow"),content:html,buttons:{Validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#san-data-form")),resolve(formData))}},default:"Validate",close:()=>{}});dlg.render(!0)}))}}class CoC7ChatMessage{static get ROLL_TYPE_ATTRIBUTE(){return"R/AT"}static get ROLL_TYPE_CHARACTERISTIC(){return"R/CH"}static get ROLL_TYPE_COMBAT(){return"R/CO"}static get ROLL_TYPE_SKILL(){return"R/SK"}static get ROLL_TYPE_ENCOUNTER(){return"R/EC"}static get CARD_TYPE_COMBINED(){return"C/CO"}static get CARD_TYPE_GROUP(){return"C/GR"}static get CARD_TYPE_NORMAL(){return"C/NO"}static get CARD_TYPE_OPPOSED(){return"C/OP"}static get CARD_TYPE_SAN_CHECK(){return"C/SC"}static get CARD_TYPE_NONE(){return"C/NO"}static cardTypes(config){if(config.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)return null;const select={[CoC7ChatMessage.CARD_TYPE_NORMAL]:"CoC7.RegularRollCard",[CoC7ChatMessage.CARD_TYPE_COMBINED]:"CoC7.CombinedRollCard",[CoC7ChatMessage.CARD_TYPE_OPPOSED]:"CoC7.OpposedRollCard"};return config.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE&&"san"===config.attribute&&(select[CoC7ChatMessage.CARD_TYPE_SAN_CHECK]="CoC7.SanityLossEncounter"),select}static normalizeRequest(options){if(void 0!==options.event||void 0===options.cardType||void 0===options.actor||void 0===options.skillId&&void 0===options.skillName&&void 0===options.attribute&&void 0===options.characteristic&&options.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER){if(void 0===options.event||void 0===options.cardType||void 0===options.rollType)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{value:game.i18n.localize("CoC7.Roll")})),!1}else if(void 0!==options.skillId)options.actor.items.get(options.skillId)&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL);else if(void 0!==options.skillName){const skillIds=options.actor.getSkillsByName(options.skillName);skillIds.length>0&&(options.skillId=skillIds[0].id,options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL)}else void 0!==options.attribute&&["lck","san"].includes(options.attribute)?options.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:void 0!==options.characteristic&&void 0!==options.actor.system.characteristics[options.characteristic]&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC);if(![CoC7ChatMessage.CARD_TYPE_COMBINED,CoC7ChatMessage.CARD_TYPE_GROUP,CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_OPPOSED,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(options.cardType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidCardType")})),!1;if(![CoC7ChatMessage.ROLL_TYPE_SKILL,CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,CoC7ChatMessage.ROLL_TYPE_ENCOUNTER].includes(options.rollType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidRollType")})),!1;const config={options:{cardType:options.cardType,shiftKey:options.fastForward??options.event?.shiftKey??options.fastForward??!1,altKey:options.event?.altKey??!1,isCtrlKey:isCtrlKey(options.event??!1),createEncounter:options.createEncounter??!1,openLinkTool:options.openLinkTool??!1,sendToChat:options.sendToChat??!1,sendToClipboard:options.sendToClipboard??!1,isCombat:options.event?.currentTarget.classList?.contains("combat")??!1,preventStandby:options.preventStandby??!1,bonusDice:0},dialogOptions:{rollType:options.rollType,cardType:options.cardType,attribute:"",chatMessage:options.chatMessage??!0,forcedCardType:options.forcedCardType??!1,hideDifficulty:options.hideDifficulty??!1}};switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:if(config.options.skillId=options.skillId??options.event?.currentTarget.closest(".item")?.dataset.skillId,config.options.itemId=options.event?.currentTarget.closest(".item")?.dataset.itemId,config.options.characteristic=options.characteristic??options.event?.currentTarget.parentElement.dataset.characteristic,config.options.attribute=options.attribute??options.event?.currentTarget.parentElement.dataset.attrib,config.dialogOptions.attribute=config.options.attribute,config.options.actorId=options.event?.currentTarget.closest("form").dataset.actorId??options.actor.id,config.options.tokenKey=options.event?.currentTarget.closest("form").dataset.tokenId??options.actor.tokenKey,config.options.weaponAltSkill=options.event?.currentTarget.classList.contains("alternativ-skill"),config.options.actor=options.actor,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&config.options.isCombat){const item=config.options.actor.items.get(config.options.itemId);if(!item)return!1;"weapon"===item.type&&(config.options.weaponName=item.name,config.dialogOptions.rollType=CoC7ChatMessage.ROLL_TYPE_COMBAT)}if(void 0===config.options.actorId||void 0===config.options.tokenKey&&void 0===config.options.actor)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorActor")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&void 0===config.options.skillId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Skill")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC){if(void 0===config.options.characteristic)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Characteristic")})),!1;if(!game.user.isGM&&!config.options.actor.system.characteristics[config.options.characteristic]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE){if(void 0===config.options.attribute)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Attribute")})),!1;if(!game.user.isGM&&!config.options.actor.system.attribs[config.options.attribute]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT){if(void 0===config.options.itemId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Weapon")})),!1;if(config.options.altKey)return!1}config.options.hasPlayerOwner=config.options.actor.hasPlayerOwner??!1,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC?(config.dialogOptions.disableFlatThresholdModifier=config.options.isCtrlKey,config.dialogOptions.disableFlatDiceModifier=config.options.isCtrlKey):(config.dialogOptions.disableFlatThresholdModifier=!1,config.dialogOptions.disableFlatDiceModifier=!1),config.dialogOptions.modifier=0,config.dialogOptions.difficulty=options.difficulty??CoC7Check.difficultyLevel[game.settings.get("CoC7","defaultCheckDifficulty")],config.dialogOptions.flatDiceModifier=0,config.dialogOptions.flatThresholdModifier=0}return config}static async trigger(options={}){const config=CoC7ChatMessage.normalizeRequest(options);if(!1!==config)if(config.options.isCtrlKey&&game.user.isGM&&[CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(config.dialogOptions.cardType))CoC7ChatMessage.createLink(config);else{if(!(config.options.sendToChat||config.options.sendToClipboard||config.options.openLinkTool||config.options.createEncounter)||!game.user.isGM||CoC7ChatMessage.CARD_TYPE_NONE!==config.dialogOptions.cardType){if(void 0!==config.options.actor){if(void 0!==config.options.attribute){const bonusDice=config.options.actor.system?.attribs?.[config.options.attribute]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.characteristic){const bonusDice=config.options.actor.system?.characteristics?.[config.options.characteristic]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.itemId){const itemModifiers=Object.values(config.options.actor.system.skills).find((k=>k.foundryID===config.options.itemId));void 0!==itemModifiers.bonusDice&&(config.dialogOptions.modifier=itemModifiers.bonusDice)}config.dialogOptions.modifier=Math.min(Math.max(config.dialogOptions.modifier,-2),2)}return config.options.shiftKey||await CoC7ChatMessage.createRoll(config),CoC7ChatMessage.runRoll(config)}CoC7ChatMessage.createLink(config)}}static createLink(config){switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_COMBAT:case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:{const linkData={type:"CoC7Link"};if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL){if(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.SKILL,linkData.name=config.options.actor.items.get(config.options.skillId)?.shortName,!linkData.name)return}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC)linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.CHARACTERISTIC,linkData.name=config.options.characteristic;else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE)(config.options.altKey||config.options.createEncounter)&&"san"===config.options.attribute?linkData.check=CoC7Link.CHECK_TYPE.SANLOSS:(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.ATTRIBUTE,linkData.name=config.options.attribute);else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)linkData.check=CoC7Link.CHECK_TYPE.ITEM,linkData.name=config.options.weaponName;else{if(config.dialogOptions.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER)return;linkData.check=CoC7Link.CHECK_TYPE.SANLOSS,linkData.sanMin=config.options.actor?.system?.special?.sanLoss?.checkPassed,linkData.sanMax=config.options.actor?.system?.special?.sanLoss?.checkFailled,linkData.sanReason=config.options.actor.system.infos.type?.length?config.options.actor.system.infos.type:config.options.actor.name}"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),config.options.sendToChat?CoC7Link.toChatMessage(linkData):config.options.sendToClipboard?CoC7Link.fromDropData(linkData).then((link=>{CoC7Utilities.copyToClipboard(link.link)})):CoC7ContentLinkDialog.create(linkData,{actors:[config.options.actor].filter((a=>a.owners.length)),hasModifiers:config.options.shiftKey})}}}static async createRoll(config){const usage=await RollDialog.create(config.dialogOptions);if(usage){const cardType=usage.get("cardType");cardType&&(config.dialogOptions.cardType=cardType),config.dialogOptions.modifier=Number(usage.get("bonusDice")),config.dialogOptions.difficulty=Number(usage.get("difficulty")),config.dialogOptions.flatDiceModifier=Number(usage.get("flatDiceModifier")),config.dialogOptions.flatThresholdModifier=Number(usage.get("flatThresholdModifier"))}}static async runRoll(config){switch(config.dialogOptions.cardType){case CoC7ChatMessage.CARD_TYPE_SAN_CHECK:{const sanData=await SanDataDialog.create({promptLabel:!0});if(sanData){let sanMin=sanData.get("sanMin")||0,sanMax=sanData.get("sanMax")||0;const sanReason=sanData.get("sanReason");isNaN(Number(sanMin))||(sanMin=Number(sanMin)),isNaN(Number(sanMax))||(sanMax=Number(sanMax)),SanCheckCard.create(config.options.actor.actorKey,{sanMin,sanMax,sanReason},{sanModifier:config.dialogOptions.modifier,sanDifficulty:config.dialogOptions.difficulty,fastForward:config.options.shiftKey})}}break;case CoC7ChatMessage.CARD_TYPE_NORMAL:{const check=new CoC7Check;return check.diceModifier=config.dialogOptions.modifier,check.difficulty=config.dialogOptions.difficulty,check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.flatDiceModifier=config.dialogOptions.flatDiceModifier,check.flatThresholdModifier=config.dialogOptions.flatThresholdModifier,check.standby=!config.options.preventStandby&&game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&config.options.hasPlayerOwner,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL?(check.skill=config.options.skillId,await check.roll()):config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE?await check.rollAttribute(config.options.attribute):await check.rollCharacteristic(config.options.characteristic),config.dialogOptions.chatMessage&&check.toMessage(),{result:check.modifiedResult,successLevel:check.rolledSuccessLevel,isFumble:check.isFumble,isCritical:check.isCritical,successLevels:{1:check.regularThreshold,2:check.hardThreshold,3:check.extremeThreshold},passed:check.passed}}case CoC7ChatMessage.CARD_TYPE_OPPOSED:case CoC7ChatMessage.CARD_TYPE_COMBINED:{const check=new CoC7Check;check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.characteristic=config.options.characteristic,check.attribute=config.options.attribute,check.skillId=config.options.skillId,check.rollMode=game.settings.get("core","rollMode"),check.initiator=game.user.id;let data={};config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?(data={type:OpposedCheckCard.defaultConfig.type,combat:config.options.isCombat,action:"new"},check.item=config.options.itemId,check.weaponAltSkill=config.options.weaponAltSkill,check.denyPush=!0,await check._perform()):(data={type:CombinedCheckCard.defaultConfig.type,action:"new"},check.difficulty=config.dialogOptions.difficulty),data.roll=check.JSONRollData,data._rollMode=game.settings.get("core","rollMode"),config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?OpposedCheckCard.dispatch(data):CombinedCheckCard.dispatch(data)}}}}class CoC7ConCheck{constructor(actorId=null,difficulty=CoC7Check.difficultyLevel.regular){this.check=new CoC7Check(actorId),this.check.characteristic="con",this.check.difficulty=difficulty,this.check.denyPush=!0,this.actorId=actorId}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get actor(){return this.actorId?chatHelper.getActorFromKey(this.actorId):null}set actorId(x){this._actorId=x,this.check.actor=x}get actorId(){return this._actorId?this._actorId:null}get tokenKey(){return this.actor.isToken?this.actor.tokenKey:null}get isSuccess(){return!!this.check&&this.check.isSuccess}get isRolled(){return!!(this.check&&this.check.dices&&this.check.dices.total)}static getFromCard(card){const conCheck=new CoC7ConCheck;chatHelper.getObjectFromElement(conCheck,card);const htmlCheck=card.querySelector(".roll-result");return CoC7Roll.getFromElement(htmlCheck,conCheck.check),conCheck.messageId=card.closest(".message").dataset.messageId,conCheck}async getCheckElement(){const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this.check),htmlElement=$.parseHTML(html)[0];return htmlElement?(htmlElement.classList.remove("chat-card","item-card","roll-card"),htmlElement):null}async toMessage(fastForward=!1){fastForward&&await this.rollCon();const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(fastForward){htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement())}const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:htmlElement.outerHTML};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async rollCon(){this.check.hideDiceResult=!0,await this.check._perform(),this.isBlind||this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),this.applied=!0}async updateChatCard(){const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement()),this.isBlind||!this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),!this.messageId)return;const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}}class SkillSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".select-skill").click((async event=>this._onSelectSkillClicked(event)))}async _onSelectSkillClicked(event){const li=event.currentTarget.closest(".item");this.data.data.skills[Number(li.dataset.index)].selected=!0,event.currentTarget.style.display="none",this.data.data.added||(this.data.data.added=0),this.data.data.added++;event.currentTarget.closest(".skill-selector").querySelector(".count").innerText=this.data.data.added,this.data.data.added>=this.data.data.optionsCount&&this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/skill-select.html",data);return new Promise((resolve=>{new SkillSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>{if(!data.added>=data.optionsCount)return resolve(!1);const selected=data.skills.filter((skill=>skill.selected));return resolve(selected)}},{classes:["coc7","dialog","skill-select"]}).render(!0)}))}}class PointSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event))),html.find("button").click((event=>this._onButtonClicked(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item"),itemList=li.closest(".item-list");for(const item of itemList.querySelectorAll(".selectable"))item.classList.remove("selected"),this.data.data.characteristics[item.dataset.key].selected=!1,this.data.data.characteristics[item.dataset.key].optional=!1;$(li).toggleClass("selected"),this.data.data.characteristics[li.dataset.key].selected=!0;li.closest("#skill-selection-form").querySelector(".points").innerText=this.data.data.total+this.data.data.characteristics[li.dataset.key].multiplier*this.data.data.characteristics[li.dataset.key].value;li.closest("#skill-selection-form").querySelector("button.validate").classList.remove("inactive"),this.data.data.resolved=!0}async _onButtonClicked(event){event.preventDefault(),event.currentTarget.classList.contains("inactive")||super.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/point-select.html",data);return new Promise((resolve=>{new PointSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.resolved?resolve(data):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");this.data.data.selected=li.dataset.key,this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/char-select.html",data);return new Promise((resolve=>{new CharacSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.selected?resolve(data.selected):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacRollDialog extends Dialog{constructor(data,options){super(data,options),this.rolled=data.rolled||{}}activateListeners(html){super.activateListeners(html),html.on("change","input",this._onChangeInput.bind(this)),html.on("submit","form",this._onSubmit.bind(this)),html.on("click",".roll-characteristic",this._onRollCharacteristic.bind(this)),html.on("click",".increase-characteristic",this._onIncreaseCharacteristic.bind(this)),html.on("click",".decrease-characteristic",this._onDecreaseCharacteristic.bind(this)),html.on("click",".reset-characteristic",this._onResetCharacteristic.bind(this)),html.on("click","button",this._onButton.bind(this))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;await this.rollCharacteristic(characKey)}async _onIncreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.increaseCharacteristic(characKey)}async _onDecreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.decreaseCharacteristic(characKey)}async _onResetCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.resetCharacteristic(characKey)}async _onButton(event){const action=event.currentTarget.dataset.action;if("roll"===action)for(const char of["str","con","siz","dex","app","int","pow","edu","luck"])await this.rollCharacteristic(char);"validate"!==action||event.currentTarget.classList.contains("inactive")||(this.checkTotal(),this.close())}async rollCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input"),formula=this.data.data.characteristics.rolls[key];if(input&&formula){if(isNaN(Number(formula))){const roll=new Roll(formula);await roll.evaluate({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:this.data.data.characteristics.list[key].label,formula})}),input.value=roll.total}else input.value=Number(formula);this.data.data.characteristics.values[key]=Number(input.value),this.rolled||(this.rolled={}),this.rolled[key]=!0}this.checkTotal()}async increaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async decreaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&Number(input.value)>0&&(input.value=Number(input.value)-1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async resetCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=null,this.data.data.characteristics.values[key]=0),this.checkTotal()}async _onChangeInput(event){event.preventDefault();const input=event.currentTarget,value=Number(input.value);isNaN(value)||(this.data.data.characteristics.values[input.name]=value),this.checkTotal()}checkTotal(){this.data.data.characteristics.points.total=0;for(const[key,value]of Object.entries(this.data.data.characteristics.values))"luck"!==key&&(this.data.data.characteristics.points.total+=value);const validation=this._element[0].querySelector(".points");if(this.data.data.characteristics.points.enabled){if(Number(this.data.data.characteristics.points.total)!==Number(this.data.data.characteristics.points.value))validation.classList.add("warning");else{validation.classList.remove("warning");this._element[0].querySelector("button.validate").classList.remove("inactive"),this.data.data.validate=!0}validation.querySelector(".value").innerText=this.data.data.characteristics.points.value}if(validation.querySelector(".total").innerText=this.data.data.characteristics.points.total,this.data.data.characteristics.rolls.enabled&&this.rolled&&(this.data.data.validate=!Object.entries(this.rolled).find((el=>!el))&&9===Object.entries(this.rolled).length,this.data.data.validate)){this._element[0].querySelector("button.validate").classList.remove("inactive")}}async _onSubmit(event){event.preventDefault()}static async create(data){const rolled={};data.characteristics.points.total=0;for(const[key,value]of Object.entries(data.characteristics.values))"luck"!==key&&(data.characteristics.points.total+=value||0),!isNaN(value)&&value>0&&(rolled[key]=!0);data.characteristics.points.enabled&&Number(data.characteristics.points.total)!==Number(data.characteristics.points.value)&&(data.pointsWarning=!0);const html=await renderTemplate("systems/CoC7/templates/apps/char-roll.html",data);return new Promise((resolve=>{new CharacRollDialog({title:data.title,content:html,data,rolled,buttons:{},close:()=>data.validate?resolve(!0):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class SkillSpecSelectDialog{static async create(skills,specializationName,baseValue=null,name=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-spec-select.html",{hasSkills:skills.length>0,skills,base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:name?game.i18n.format("CoC7.SkillSelectBase",{name}):game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:specializationName}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class SkillSpecializationSelectDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","skill-name-dialog"],title:"",template:"systems/CoC7/templates/apps/skill-specialization-select.hbs",width:400,height:"auto",closeOnSubmit:!1})}get title(){return game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:this.object.specializationName})}activateListeners(html){super.activateListeners(html),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("[name=existing-skill]").change(this._onSelectChange.bind(this))}async _onSelectChange(event){this.object.selected=event.currentTarget.value,this.render(!0)}async _onClickSubmit(event){if(""===this.object.selected){const obj=$(event.currentTarget).closest("form");this.object.name=obj.find("input[name=new-skill-name]").val()??"",this.object.baseValue=obj.find("input[name=base-value]").val()??""}if(""===this.object.selected&&""===this.object.name)return!1;this.object.resolve({selected:this.object.selected,name:this.object.name,baseValue:this.object.baseValue}),this.close()}async _updateObject(event,formData){}static async create({skills=[],allowCustom=!1,fixedBaseValue=!1,specializationName="",label="",baseValue=null}={}){const select=[];for(const skill of skills)select.push({id:skill.id,name:skill.name,base:skill.system.base});return await new Promise((resolve=>{new SkillSpecializationSelectDialog({specializationName,allowCustom,fixedBaseValue,allowSelect:skills.length>0,skills:select,selected:"",name:"",label,baseValue,resolve},{}).render(!0)}))}}class SkillValueDialog{static async create(name=null,baseValue=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-value.html",{base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:game.i18n.format("CoC7.SkillValue",{name}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class CoC7MeleeResoltion{constructor(initiatorMessage=null,targetMessage=null,messageId=null){this.initiatorMessage=initiatorMessage,this.targetMessage=targetMessage,this.messageId=messageId}async preCreateMessage(){const html=await renderTemplate(this.template,this),chatData={user:game.user.id,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const chatMessage=await ChatMessage.create(chatData);return this.messageId=chatMessage.id,chatMessage}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get target(){return this.targetMessage?CoC7MeleeTarget.getFromMessageId(this.targetMessage):null}get targetToken(){return this.target?chatHelper.getTokenFromKey(this.target.actorKey):null}get initiator(){return this.initiatorMessage?CoC7MeleeInitiator.getFromMessageId(this.initiatorMessage):null}get initiatorToken(){return this.initiator?chatHelper.getTokenFromKey(this.initiator.actorKey):null}async resolve(){if(this.target)switch(this.target.action){case"noResponse":this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.action="roll-melee-damage",this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target;break;case"dodge":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.action="roll-melee-damage",this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.DodgeSuccess",{name:this.target.name}),this.winner=this.target,this.looser=this.initiator,this.winnerImg=this.target.skill.img,this.winnerTitle=this.target.skill.name,this.action="dodge",this.rollDamage=!1);break;case"fightBack":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.weapon.img,this.winnerTitle=this.target.weapon.name,this.looser=this.initiator,this.rollDamage=!0);break;case"maneuver":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.ManeuverSuccess",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.looser=this.initiator,this.rollDamage=!1)}else this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1);this.winner&&(this.winner.roll.successLevel>=CoC7Check.successLevel.extreme?this.winner.roll.criticalDamage=!0:this.winner.roll.criticalDamage=!1),this.resolved=!0;const html=await renderTemplate(this.template,this);if(this.messageId){const message=game.messages.get(this.messageId),speakerData={};this.winner&&(this.winner.token&&(speakerData.token=this.winner.token.documment),this.winner.actor&&(speakerData.actor=this.winner.actor));const speaker=this.winner?ChatMessage.getSpeaker(speakerData):null,user=this.winner&&this.winner.actor.user?this.winner.actor.user:game.user;let msg;return message?(msg=speaker?await message.update({user:user.id,speaker,content:html}):await message.update({user:user.id,content:html}),await ui.chat.updateMessage(msg,!1),msg):void ui.notifications.warn("Resolition card missing, was deleted ?")}}get template(){return"systems/CoC7/templates/chat/combat/melee-resolution.html"}}class CoC7MeleeTarget extends ChatCardActor{constructor(actorKey,parentMessageId=null,fastForward=!1){super(actorKey,fastForward),this.actorKey=actorKey,this.initiatorKey=null,this.parentMessageId=parentMessageId,this.fastForward=fastForward,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.skillId=null,this.itemId=null,this.dodging=!1,this.notResponding=!1,this.fightingBack=!1,this.maneuvering=!1}get actionSelected(){return this.dodging||this.notResponding||this.fightingBack||this.maneuvering}get action(){return this.dodging?"dodge":this.notResponding?"noResponse":this.fightingBack?"fightBack":this.maneuvering?"maneuver":null}get weapon(){return this.actor.items.get(this.itemId)}get skill(){return this.actor.items.get(this.skillId)}set initiatorKey(x){this._initiatorKey=x,this.targetKey=x}get initiatorKey(){return this._initiatorKey||(!this._initiator&&this.parentMessageId&&(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator&&(this._initiatorKey=this._initiator.actorKey)),this._initiatorKey?this._initiatorKey:(ui.notifications.error(`No initiator found for target : ${this.actor.name}`),null)}get initiator(){if(!this.initiatorKey){if(!this.parentMessageId)return null;this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId),this.initiatorKey=this._initiator.actorKey}return chatHelper.getActorFromKey(this.initiatorKey)}get meleeInitiator(){return this._initiator||(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator}get template(){return"systems/CoC7/templates/chat/combat/melee-target.html"}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],target=CoC7MeleeTarget.getFromCard(card,messageId);return target.messageId=messageId,target}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.target"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const target=CoC7MeleeTarget.getFromCard(card);target.toggleFlag(flag),target.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async createChatCard(){const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData);this.actor.isToken&&(speaker.alias=this.actor.token.name);let user=game.user;if(void 0===this.actor.user){let owners=[];const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(this.actor.ownership))if(v===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER){if("default"===k){owners=game.users.map((a=>a.id));break}gms.includes(k)||owners.push(k)}let content="";switch(owners.length){case 0:break;case 1:void 0!==game.users.get(owners[0])&&(user=game.users.get(owners[0]));break;default:content="<p>"+game.i18n.localize("CoC7.MessageSelectSingleUserForTarget"),content+='<form id="selectform"><select name="user">';for(const k of owners)content=content+'<option value="'+k+'">'+game.users.get(k).name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectSingleUserForTarget"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(user=game.users.get(value))}})}}else void 0!==this.actor.user&&(user=this.actor.user);const chatData={user:user.id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const message=await ChatMessage.create(chatData);return this.messageId=message.id,message}async updateChatCard(){const message=game.messages.get(this.messageId);if(!game.user.isGM&&message.user.id!==game.user.id)return void ui.notifications.info(game.i18n.localize("CoC7.UnableToInteractWithChatCard"));const html=await renderTemplate(this.template,this),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}async getUpdatedChatCard(){renderTemplate(this.template,this).then((html=>html))}static async updateSelected(card,event){const target=CoC7MeleeTarget.getFromCard(card);switch(event.currentTarget.dataset.action){case"dodge":target.dodging=!0,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null;break;case"noResponse":target.dodging=!1,target.notResponding=!0,target.fightingBack=!1,target.maneuvering=!1,target.skillId=null,target.itemId=null;break;case"fightBack":target.dodging=!1,target.notResponding=!1,target.fightingBack=!0,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=event.currentTarget.dataset.weaponId;break;case"maneuver":target.dodging=!1,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!0,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null}return target.updateChatCard(),target}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;return check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="target",check.action=this.action,check.actor=this.actor,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),check}async publishNoReponseResult(){this.rolled=!0,this.resolved=!0,this.notResponding=!0;const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}static getFromCard(card,messageId=null){const actorKey=card.dataset.actorKey,parentMessageId=card.dataset.parentMessageId,fastForward="true"===card.dataset.fastForward,target=new CoC7MeleeTarget(actorKey,parentMessageId,fastForward);return target.roll=CoC7Roll.getFromCard(card),chatHelper.getObjectFromElement(target,card),card.closest(".message")?target.messageId=card.closest(".message").dataset.messageId:target.messageId=messageId,target}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total");switch(newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoC7RangeInitiator{constructor(actorKey=null,itemId=null,fastForward=!1){this.actorKey=actorKey,this.itemId=itemId,this.fastForward=fastForward,this.resolved=!1,this.cover=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1,this.singleShot=!1,this.multipleShots=!1,this.burst=!1,this.fullAuto=!1,this.tokenKey=null,this.aimed=!1,this.totalBulletsFired=0,this._targets=[];for(const t of[...game.user.targets]){const target=new CoC7RangeTarget(`${t.scene.id}.${t.id}`);target.token=t,this._targets.push(target)}if(this._targets.length)this._targets[0].active=!0;else{const target=new CoC7RangeTarget;target.active=!0,this._targets.push(target)}if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);if(this.token=chatHelper.getTokenFromKey(actorKey),this.token&&(this.tokenKey=actor.tokenKey),itemId){actor.items.get(itemId)&&(this.weapon.singleShot?this.singleShot=!0:this.weapon.system.properties.auto&&(this.fullAuto=!0))}}if(this.tokenKey)for(const t of this._targets)if(t.token&&this.token){t.distance=chatHelper.getDistance(t.token,this.token),t.roundedDistance=Math.round(100*t.distance.value)/100,t.distanceUnit=t.distance.unit;const distInYd=Math.round(100*chatHelper.toYards(t.distance))/100;if(this.actor){t.pointBlankRange=!1;distInYd<=this.actor.system.characteristics.dex.value/15&&(t.pointBlankRange=!0)}this.weapon&&this.weapon.baseRange&&(t.baseRange=!1,t.longRange=!1,t.extremeRange=!1,t.outOfRange=!1,this.weapon.system.properties.shotgun?(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=this.weapon.longRange&&(t.longRange=!0),distInYd>this.weapon.longRange&&distInYd<=this.weapon.extremeRange&&(t.extremeRange=!0),distInYd>this.weapon.extremeRange&&(t.outOfRange=!0)):(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=2*this.weapon.baseRange&&(t.longRange=!0),distInYd>2*this.weapon.baseRange&&distInYd<=4*this.weapon.baseRange&&(t.extremeRange=!0),distInYd>4*this.weapon.baseRange&&(t.outOfRange=!0)),t.baseRange||t.longRange||t.extremeRange||t.outOfRange||(t.baseRange=!0))}else t.baseRange=!0}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}get actor(){return chatHelper.getActorFromKey(this.actorKey)}get item(){return this.actor.items.get(this.itemId)}get weapon(){return this.item}get targets(){return this._targets||(this._targets=[]),this._targets}get target(){return this.targets&&this.targets.length?this.targets.pop():null}get skills(){return this.actor.getWeaponSkills(this.itemId)}get mainWeaponSkill(){return this.actor.items.get(this.weapon.system.skill.main.id)}get autoWeaponSkill(){return this.weapon.system.skill.alternativ.id?this.actor.items.get(this.weapon.system.skill.alternativ.id):this.mainWeaponSkill}get autoFire(){return this.burst||this.fullAuto}get multiTarget(){return this.fullAuto||this.multipleShots}get aiming(){return void 0===this._aiming&&(this._aiming=this.actor.getActorFlag("aiming")),this._aiming}get activeTarget(){return this._targets.length?this._targets.find((t=>t.active)):null}get shots(){return void 0===this._shots&&(this._shots=[]),this._shots}get currentShotRank(){return this.shots.length+1}get activeTargetShotDifficulty(){return this.shotDifficulty()}set aiming(b){this._aiming=b}get didAnyShotHit(){let anyHit=!1;for(const r of this.rolls)anyHit=anyHit||r.isSuccess;return anyHit}get successfulHits(){const hits=[];for(let index=0;index<this.rolls.length;index++)if(this.rolls[index].isSuccess){const hit={roll:this.rolls[index],shot:this.shots[index]};hits.push(hit)}return 0!==hits.length?hits:null}get shotFired(){return this.shots?this.shots.length:0}get totalAmmo(){return this.weapon.getBulletLeft()}get maxShots(){return this.fullAuto?"∞":this.weapon.system.usesPerRound.max?parseInt(this.weapon.system.usesPerRound.max):1}get ignoreAmmo(){return game.settings.get("CoC7","disregardAmmo")}get ignoreUsesPerRound(){return game.settings.get("CoC7","disregardUsePerRound")}get outOfAmmo(){return!this.ignoreAmmo&&this.totalBulletsFired>=this.weapon.getBulletLeft()}get outOfShots(){return!this.ignoreUsesPerRound&&(!!this.shots&&this.shots.length>=this.maxShots)}get volleySize(){if(!this.weapon.system.properties.auto)return 1;if(this._volleySize)return this._volleySize;const size=Math.floor(this.autoWeaponSkill.value/10);return size<3?3:size}set volleySize(x){x>=Math.floor(this.autoWeaponSkill.value/10)?this._volleySize=Math.floor(this.autoWeaponSkill.value/10):x<=3&&(this._volleySize=3),this._volleySize=parseInt(x)}get isVolleyMinSize(){return 3===this.volleySize}get isVolleyMaxSize(){return(Math.floor(this.autoWeaponSkill.value/10)<3?3:Math.floor(this.autoWeaponSkill.value/10))===this.volleySize}getTargetFromKey(key){return this._targets.find((t=>key===t.actorKey))}calcTargetsDifficulty(){for(const t of this.targets)t.shotDifficulty=this.shotDifficulty(t)}shotDifficulty(t=null){const target=t||this.activeTarget;let damage=this.weapon.system.range.normal.damage;this.weapon.system.properties.shotgun&&(t.longRange&&(damage=this.weapon.system.range.long.damage),t.extremeRange&&(damage=this.weapon.system.range.extreme.damage));let difficulty,modifier=target.modifier;difficulty=this.weapon.system.properties.shotgun?1:target.difficulty;let difficultyName="";if(this.aiming&&1===this.currentShotRank&&modifier++,this.advantage&&modifier++,this.disadvantage&&modifier--,this.reload&&modifier--,this.multipleShots&&!this.fullAuto&&modifier--,this.fullAuto&&(modifier-=this.currentShotRank-1),modifier<-2){difficulty+=Math.abs(modifier+2),difficulty>CoC7Check.difficultyLevel.critical&&(difficulty=CoC7Check.difficultyLevel.impossible),modifier=-2}return CoC7Check.difficultyLevel.regular===difficulty&&(difficultyName="Regular"),CoC7Check.difficultyLevel.hard===difficulty&&(difficultyName="Hard"),CoC7Check.difficultyLevel.extreme===difficulty&&(difficultyName="Extreme"),CoC7Check.difficultyLevel.critical===difficulty&&(difficultyName="Critical"),CoC7Check.difficultyLevel.impossible===difficulty&&(difficultyName="Impossible"),{level:difficulty,name:difficultyName,modifier,damage,impossible:difficulty===CoC7Check.difficultyLevel.impossible}}addShotAtCurrentTarget(){this.calcTargetsDifficulty();const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:1,transitBullets:0,bulletsShotTransit:1,transit:!1};let bulletLeft=this.totalAmmo-this.totalBulletsFired;if(this.fullAuto){if(this.currentShotRank>1){const previousShot=this.shots[this.currentShotRank-2];if(previousShot.actorKey!==this.activeTarget.actorKey){const distance=chatHelper.getDistance(chatHelper.getTokenFromKey(previousShot.actorKey),chatHelper.getTokenFromKey(this.activeTarget.actorKey));shot.transitBullets=Math.floor(chatHelper.toYards(distance)),shot.transitBullets>=bulletLeft&&!this.ignoreAmmo&&(shot.transitBullets=bulletLeft,bulletLeft=0),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.transitBullets,shot.transit=!0}}shot.bulletsShot=this.volleySize,shot.bulletsShot<=3&&(shot.bulletsShot=3),shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0),shot.bulletsShotTransit=shot.bulletsShot+shot.transitBullets}this.burst&&(shot.bulletsShot=parseInt(this.weapon.system.usesPerRound.burst)?parseInt(this.weapon.system.usesPerRound.burst):1,shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0)),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.bulletsShot,this.aiming&&(this.aiming=!1,this.aimed=!0),this.shots.push(shot)}get template(){return"systems/CoC7/templates/chat/combat/range-initiator.html"}async createChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;"singleShot"===flag||"multipleShots"===flag||"fullAuto"===flag?(this.singleShot=!1,this.multipleShots=!1,this.fullAuto=!1,"fullAuto"===flag&&(this.burst=!1),this[flag]=!0):"burst"===flag?(this.fullAuto=!1,this.singleShot||this.multipleShots||(this.singleShot=!0),this.burst=!this.burst):this[flag]=!this[flag]}async resolveCard(){if(this.rolls=[],this.multiTarget){let weaponMalfunction=!1,index=0;for(;!weaponMalfunction&&this.shots.length>index;){const roll=await this.shootAtTarget(this.shots[index]);roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll),await this.weapon.shootBullets(parseInt(this.shots[index].bulletsShot)+parseInt(this.shots[index].transitBullets)),roll.hasMalfunction&&(roll.isSuccess=!1,weaponMalfunction=!0),index++,this.rolls.push(roll)}}else{const roll=await this.shootAtTarget();roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll);let bulletFired=this.burst?parseInt(this.weapon.system.usesPerRound.burst):1;bulletFired>=this.totalAmmo&&(bulletFired=this.totalAmmo);const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:bulletFired,transitBullets:0,transit:!1};await this.weapon.shootBullets(bulletFired),roll.hasMalfunction&&(roll.isSuccess=!1),this.shots.push(shot),this.rolls.push(roll)}this.resolved=!0,this.rolled=!0,await this.updateChatCard()}async shootAtTarget(shot=null){const target=shot?this.getTargetFromKey(shot.actorKey):this.activeTarget,check=new CoC7Check;return check.actorKey=this.actorKey,check.actor=this.actorKey,check.item=this.itemId,check.isBlind=!1,check.isUnkonwn=!1,this.autoFire?check.skill=this.autoWeaponSkill:check.skill=this.mainWeaponSkill,this.multiTarget?(check.difficulty=shot.difficulty,check.diceModifier=shot.modifier):(this.calcTargetsDifficulty(),this.totalBulletsFired=parseInt(this.totalBulletsFired)+1,this.aiming&&(this.aiming=!1,this.aimed=!0),check.difficulty=this.activeTarget.shotDifficulty.level,check.diceModifier=this.activeTarget.shotDifficulty.modifier),check.details=`${game.i18n.localize("CoC7.Target")}: ${target.name}`,check.targetKey=target.actorKey,await check.roll(),check}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7RangeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}changeVolleySize(x){this.volleySize=this.volleySize+x,this.updateChatCard()}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".range.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7RangeInitiator.getFromCard(card);if(event.currentTarget.classList.contains("target-flag")){const target=event.currentTarget.closest(".target"),key=parseInt(target.dataset.targetKey);initiator.targets[key].toggleFlag(camelFlag)}else initiator.toggleFlag(camelFlag);initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}passRoll(rollIndex){const roll=this.rolls[rollIndex],luckAmount=parseInt(roll.luckNeeded);this.actor.spendLuck(luckAmount)?(roll.successLevel=roll.difficulty,roll.isSuccess=!0,roll.luckSpent=!0,this.updateChatCard()):ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`)}upgradeRoll(rollIndex,upgradeindex){const roll=this.rolls[rollIndex],increasedSuccess=roll.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel);roll.successLevel=newSuccessLevel,roll.difficulty<=newSuccessLevel&&(roll.isSuccess=!0),roll.luckSpent=!0,this.updateChatCard()}static getFromCard(card,messageId=null){const rangeInitiator=new CoC7RangeInitiator;rangeInitiator._targets=[],messageId?rangeInitiator.messageId=messageId:card.closest(".message")&&(rangeInitiator.messageId=card.closest(".message").dataset.messageId),chatHelper.getObjectFromElement(rangeInitiator,card);const cardTargets=card.querySelectorAll(".target");for(const t of cardTargets){const target=CoC7RangeTarget.getFromElement(t);rangeInitiator.targets.push(target)}const cardShots=card.querySelectorAll(".shot");if(cardShots)for(const s of cardShots){const shot={};chatHelper.getObjectFromElement(shot,s),rangeInitiator.shots.push(shot)}rangeInitiator.rolls=[];const rolls=card.querySelectorAll(".roll-result");for(const r of rolls){const roll=CoC7Roll.getFromElement(r);rangeInitiator.rolls.push(roll)}rangeInitiator.damage=[];const damageRolls=card.querySelectorAll(".damage-results");for(const dr of damageRolls){const damageRoll=CoC7Damage.getFromElement(dr);rangeInitiator.damage.push(damageRoll)}return rangeInitiator}async rollDamage(){this.damage=[];const hits=this.successfulHits;for(let i=0;i<hits.length;i++){const h=hits[i],volleySize=parseInt(h.shot.bulletsShot),damageRolls=[];if(volleySize>0){let damageFormula=String(h.shot.damage);damageFormula&&""!==damageFormula||(damageFormula="0");const damageDie=CoC7Damage.getMainDie(damageFormula),maxDamage=new Roll(damageFormula).evaluate({maximize:!0}).total,criticalDamageFormula=this.weapon.impale?`${damageFormula} + ${maxDamage}`:`${maxDamage}`,criticalDamageDie=CoC7Damage.getMainDie(criticalDamageFormula);let impalingShots=0,successfulShots=0,critical=!1;(this.fullAuto||this.burst)&&(successfulShots=Math.floor(volleySize/2)),0===successfulShots&&(successfulShots=1),h.roll.successLevel>=CoC7Check.difficultyLevel.extreme&&(impalingShots=successfulShots,successfulShots=volleySize-impalingShots,critical=!0,CoC7Check.difficultyLevel.critical!==h.roll.successLevel&&(CoC7Check.difficultyLevel.extreme<=h.roll.difficulty||h.shot.extremeRange)&&(successfulShots=volleySize,impalingShots=0,critical=!1));let total=0;for(let index=0;index<successfulShots;index++){const roll=new Roll(damageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:damageFormula,total:roll.total,die:damageDie,critical:!1}),total+=roll.total}for(let index=0;index<impalingShots;index++){const roll=new Roll(criticalDamageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:criticalDamageFormula,total:roll.total,die:criticalDamageDie,critical:!0}),total+=roll.total}let targetName="dummy",target=chatHelper.getTokenFromKey(h.roll.targetKey);target||(target=chatHelper.getActorFromKey(h.roll.targetKey)),target&&(targetName=target.name),this.damage.push({targetKey:h.roll.targetKey,targetName,rolls:damageRolls,total,critical,dealt:!1,resultString:game.i18n.format("CoC7.rangeCombatDamage",{name:targetName,total})})}}this.damageRolled=0!==this.damage.length,this.updateChatCard()}async dealDamage(){for(let dIndex=0;dIndex<this.damage.length;dIndex++){const actor=chatHelper.getActorFromKey(this.damage[dIndex].targetKey);if(null===actor)ui.notifications.error(game.i18n.localize("CoC7.NoTargetToDamage"));else{this.damage[dIndex].totalTaken=0,this.damage[dIndex].totalAbsorbed=0;for(let rIndex=0;rIndex<this.damage[dIndex].rolls.length;rIndex++){const dealtAmount=await actor.dealDamage(this.damage[dIndex].rolls[rIndex].total);this.damage[dIndex].totalTaken+=dealtAmount,this.damage[dIndex].rolls[rIndex].taken=dealtAmount,this.damage[dIndex].rolls[rIndex].absorbed=this.damage[dIndex].rolls[rIndex].total-dealtAmount,this.damage[dIndex].totalAbsorbed+=this.damage[dIndex].rolls[rIndex].total-dealtAmount}this.damage[dIndex].dealt=!0,this.damage[dIndex].resultString=game.i18n.format("CoC7.rangeCombatDamageArmor",{name:this.damage[dIndex].targetName,total:this.damage[dIndex].totalTaken,armor:this.damage[dIndex].totalAbsorbed})}}this.damageDealt=!0,this.updateChatCard()}}class CoC7RangeTarget{constructor(actorKey=null){this.actorKey=actorKey,this.cover=!1,this.pointBlankRange=!1,this.baseRange=!0,this.longRange=!1,this.extremeRange=!1,this.inMelee=!1}get big(){return void 0===this._big&&(this.actor&&this.actor.build?this._big=this.actor.build>=4:this._big=!1),this._big}set big(b){this._big=b}get small(){return void 0===this._small&&(this.actor&&this.actor.build?this._small=this.actor.build<=-2:this._small=!1),this._small}set small(b){this._small=b}get normal(){return!this.big&&!this.small}set normal(b){this._big=!1,this._small=!1}get isFast(){return!(!this.actor||!this.actor.mov)&&this.actor.mov>=8}get fast(){return void 0===this._fast&&(this._fast=!1),this._fast}set fast(b){this._fast=b}get actor(){return this.actorKey&&!this._actor&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this._actor}get name(){return this.token?this.token.name:this.actor?this.actor.name:"Dummy"}get img(){return this.token&&this.token.document?.texture.src?this.token.document?.texture.src:this.actor?this.actor.data.img:"../icons/svg/mystery-man-black.svg"}get token(){return!this._token&&this.actorKey&&(this._token=chatHelper.getTokenFromKey(this.actorKey)),this._token}get sizeText(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTargetTitle"):this.small?game.i18n.localize("CoC7.rangeCombatCard.SmallTargetTitle"):game.i18n.localize("CoC7.rangeCombatCard.NormalTargetTitle")}get sizeLabel(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTarget"):this.small?game.i18n.localize("CoC7.combatCard.SmallTarget"):game.i18n.localize("CoC7.rangeCombatCard.NormalTarget")}get difficulty(){return this.baseRange||this.pointBlankRange?CoC7Check.difficultyLevel.regular:this.longRange?CoC7Check.difficultyLevel.hard:this.extremeRange?CoC7Check.difficultyLevel.extreme:CoC7Check.difficultyLevel.impossible}get modifier(){let modifier=0;return this.cover&&modifier--,this.pointBlankRange&&modifier++,this.fast&&modifier--,this.small&&modifier--,this.big&&modifier++,this.inMelee&&modifier--,this.surprised&&modifier++,modifier}set token(t){this._token=t}static getFromElement(element){const target=new CoC7RangeTarget;return chatHelper.getObjectFromElement(target,element),target}static changeDisplayedTarget(event){if(!event.currentTarget.classList.contains("target-selector"))return null;return event.currentTarget.closest(".targets").querySelectorAll(".target")}attachToElement(element){chatHelper.attachObjectToElement(this,element)}toggleFlag(flag){"baseRange"===flag||"longRange"===flag||"extremeRange"===flag||"pointBlankRange"===flag?(this.pointBlankRange=!1,this.baseRange=!1,this.longRange=!1,this.extremeRange=!1,this.outOfRange=!1,this[flag]=!0):"size"===flag?this.small?(this.small=!1,this.big=!0):this.big?(this.small=!1,this.big=!1):this.small=!0:this[flag]=!this[flag],"fast"===flag&&this.fast&&!this.isFast&&ui.notifications.warn(game.i18n.format("CoC7.WarnFastTargetWithWrongMOV",{mov:this.actor.mov}))}}const CHAT_COC7_MESSAGE_FAKEROLL='<div class="dice-roll"><div class="dice-result"><div class="dice-formula">???</div><h4 class="dice-total">?</h4></div></div>';class CoC7Chat{static renderChatMessageHook(chatMessage,html){chatMessage.getFlag("CoC7","GMSelfRoll")&&!game.user.isGM&&(html.find(".whisper-to").remove(),html.find(".flavor-text").replaceWith(`<span class="flavor-text">${game.i18n.localize("CoC7.RollSecretDice")}</span>`),html.find(".message-content").replaceWith(`<div class="message-content">${CHAT_COC7_MESSAGE_FAKEROLL}</div>`)),chatMessage.getFlag("CoC7","removeWisperTargets")&&!game.user.isGM&&html.find(".whisper-to").remove(),chatMessage.getFlag("CoC7","fakeRoll")&&game.user.isGM&&(html.find(".flavor-text").replaceWith(game.i18n.localize("CoC7.KeeperSentDecoy")),html.find(".message-content").remove())}static fakeRollMessage(){const chatData={user:game.user.id,flavor:game.i18n.localize("CoC7.RollSecretDice"),whisper:game.users.players,type:CONST.CHAT_MESSAGE_TYPES.WHISPER,flags:{CoC7:{GMSelfRoll:!1,removeWisperTargets:!0,fakeRoll:!0}},content:CHAT_COC7_MESSAGE_FAKEROLL};ChatMessage.create(chatData)}static ready(){game.CoC7="init"}static async chatListeners(app,html){html.on("click",".card-buttons button",CoC7Chat._onChatCardAction.bind(this)),html.on("click",".card-title",CoC7Chat._onChatCardToggleContent.bind(this)),html.on("click",".radio-switch",CoC7Chat._onChatCardRadioSwitch.bind(this)),html.on("click",".panel-switch",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".simple-flag",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".volley-size",CoC7Chat._onChatCardVolleySize.bind(this)),html.on("click",".dropdown-element",CoC7Chat._onDropDownElementSelected.bind(this)),html.on("click",".simple-toggle",CoC7Chat._onToggleSelected.bind(this)),html.on("click",".target-selector",CoC7Chat._onTargetSelect.bind(this)),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),CoC7Link.bindEventsHandler(html),html.on("click","coc7-inline-result",CoC7Chat._onInline.bind(this)),OpposedCheckCard.bindListerners(html),CombinedCheckCard.bindListerners(html)}static _onOpenActor(event){event.preventDefault();const actorKey=event.currentTarget.dataset.actorKey;if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);actor.isOwner&&actor.sheet.render(!0)}}static async onUpdateChatMessage(chatMessage){if(ui.chat.scrollBottom(),game.user.isGM&&0===chatMessage.type){const card=$(chatMessage.content)[0];if(card.classList.contains("melee")&&"true"===card.dataset.resolved){if(card.classList.contains("initiator"))if(card.dataset.targetCard){const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id),target=CoC7MeleeTarget.getFromMessageId(initiator.targetCard);if(target.resolved){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,target.messageId,target.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}else{const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id);if(initiator.resolutionCard){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,null,initiator.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}if(card.classList.contains("target")){const target=CoC7MeleeTarget.getFromMessageId(chatMessage.id),resolutionCard=new CoC7MeleeResoltion(target.parentMessageId,chatMessage.id,target.resolutionCard);await resolutionCard.resolve(),target.meleeInitiator.checkRevealed||await target.meleeInitiator.revealCheck()}}}}static async renderMessageHook(message,html){if(ui.chat.scrollBottom(),InteractiveChatCard.bindListeners(html),message.getFlag("CoC7","checkRevealed")&&(html.find(".dice-roll").removeClass("gm-visible-only"),html[0].dataset.checkRevealed=!0),html.find(".dropbtn").click((event=>event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show"))),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),game.user.isGM){const card=html[0].querySelector(".coc7.chat-card");if(card&&card.classList.contains("roll-card")&&"true"!==card.dataset.processed&&card.dataset.refMessageId){const roll=CoC7Roll.getFromElement(card);"target"===card.dataset.side&&(roll.defendantId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),"initiator"===card.dataset.side&&(roll.initiatorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),card.dataset.processed="true",CoC7Chat.updateCombatCardTarget(roll)}}const userOnly=html.find(".target-only");for(const element of userOnly)if(!game.user.isGM){element.style.display="none";const actorId=element.getAttribute("data-actor-id");actorId&&game.actors.get(actorId).isOwner&&(element.style.display="block")}const gmOnly=html.find(".gm-only");for(const zone of gmOnly)game.user.isGM||(zone.style.display="none");const userVisibleOnly=html.find(".user-visible-only");for(const elem of userVisibleOnly)game.user.isGM&&(elem.style.display="none");const gmVisibleOnly=html.find(".gm-visible-only");for(const elem of gmVisibleOnly)game.user.isGM||game.user.isTrusted&&game.settings.get("CoC7","trustedCanSeeChatCard")||(elem.style.display="none");const ownerVisibleOnly=html.find(".owner-visible-only");for(const zone of ownerVisibleOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||game.user.isGM)&&(zone.style.display="none")}if(!game.user.isGM){const ownerOnly=html.find(".owner-only");for(const zone of ownerOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey||zone.dataset?.actorId);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||!actor&&!game.user.isGM)&&(zone.style.display="none")}const gmSelectOnly=html.find(".gm-select-only");if(!game.user.isTrusted||!game.settings.get("CoC7","trustedCanModfyChatCard"))for(const select of gmSelectOnly)select.classList.add("inactive"),select.classList.remove("simple-flag")}}static get actionTypeString(){return{fightBack:"CoC7.fightBack",maneuver:"CoC7.maneuver",dodging:"CoC7.dodge"}}static _onTargetSelect(event){const index=parseInt(event.currentTarget.dataset.key),targetsSelector=event.currentTarget.closest(".targets-selector");for(const i of targetsSelector.querySelectorAll("img"))i.style.border="none";targetsSelector.querySelector(`[data-key="${index}"]`).querySelector("img").style.border="1px solid #000";const targets=event.currentTarget.closest(".targets");for(const t of targets.querySelectorAll(".target"))t.style.display="none",t.dataset.active="false";const targetToDisplay=targets.querySelector(`[data-target-key="${index}"]`);targetToDisplay.style.display="block",targetToDisplay.dataset.active="true"}static _onDropDownElementSelected(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.closest(".toggle-switch").classList.add("switched-on"),event.currentTarget.closest(".dropdown-content").classList.toggle("show");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");switch(button.dataset.action="defending",button.dataset.actionType=event.currentTarget.dataset.action,button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.dataset.itemId=event.currentTarget.dataset.weaponId,button.dataset.itemName=event.currentTarget.dataset.weaponName,event.currentTarget.dataset.action){case"maneuver":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`;break;case"fightBack":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.weaponName} (${event.currentTarget.dataset.skillValue}%)`}}static async _onInline(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("inline-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _onToggleSelected(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);if(""===event.currentTarget.dataset.skillId)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorNoDodgeSkill"));const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.classList.add("switched-on");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");button.dataset.action="defending",button.dataset.actionType="dodging",button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`}static _onChatCardRadioSwitch(event){event.preventDefault();const optionList=event.currentTarget.parentElement.getElementsByClassName("radio-switch");let index;for(index=0;index<optionList.length;index++){const element=optionList[index];element.dataset.property===event.currentTarget.dataset.property?element.classList.add("switched-on"):element.classList.remove("switched-on")}event.currentTarget.parentElement.dataset.selected=event.currentTarget.dataset.property}static async _onChatCardVolleySize(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("range")&&card.classList.contains("initiator")){const rangeCard=CoC7RangeInitiator.getFromCard(card);event.currentTarget.classList.contains("increase")?rangeCard.changeVolleySize(1):event.currentTarget.classList.contains("decrease")&&rangeCard.changeVolleySize(-1)}}static async _onChatCardToggleSwitch(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");card.classList.contains("melee")&&(card.classList.contains("initiator")&&CoC7MeleeInitiator.updateCardSwitch(event),card.classList.contains("target")&&CoC7MeleeTarget.updateCardSwitch(event)),card.classList.contains("range")&&card.classList.contains("initiator")&&CoC7RangeInitiator.updateCardSwitch(event),card.classList.contains("damage"),card.classList.contains("roll-card")&&CoC7Check.updateCardSwitch(event)}static _getChatCardActor(card){const cardData=card.dataset.object?JSON.parse(unescape(card.dataset.object)):card.dataset;if(cardData.actorKey)return CoC7Chat._getActorFromKey(cardData.actorKey);const tokenKey=cardData.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}const actorId=cardData.actorId;if(actorId)return game.actors.get(actorId);const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){const chatMessage=game.messages.get(messageId);if(chatMessage.user)return chatMessage.user.character}return null}static isCardOwner(card){const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){return game.messages.get(messageId).ownner||!1}return!1}static _getActorFromKey(key){if(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}return game.actors.get(key)||null}}static getActorFromToken(tokenKey){const token=CoC7Chat.getToken(tokenKey);return token?token.actor:null}static getToken(tokenKey){if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token||new Token(tokenData):null}}return null}static async updateChatCard(card,messId=null){const messageId=null==messId?card.closest(".message").dataset.messageId:messId,message=game.messages.get(messageId),msg=await message.update({content:card.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static async _onChatCardAction(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card");if(!card)return;const originMessage=button.closest(".message"),action=button.dataset.action;if(CoC7Chat._getChatCardActor(card))switch(action){case"useLuck":{const luckAmount=parseInt(button.dataset.luckAmount),newSuccessLevel=parseInt(event.currentTarget.dataset.newSuccessLevel);if(card.classList.contains("melee")){let meleeCard;card.classList.contains("target")&&(meleeCard=CoC7MeleeTarget.getFromCard(card)),card.classList.contains("initiator")&&(meleeCard=CoC7MeleeInitiator.getFromCard(card)),meleeCard.upgradeRoll(luckAmount,newSuccessLevel,card)}else if(card.classList.contains("range")){const rangeCard=CoC7RangeInitiator.getFromCard(card),rollResult=button.closest(".roll-result"),rollIndex=rollResult?parseInt(rollResult.dataset.index):null;if(button.classList.contains("pass-check"))rangeCard.passRoll(rollIndex);else{const upgradeIndex=parseInt(button.dataset.index);rangeCard.upgradeRoll(rollIndex,upgradeIndex)}}else if(card.classList.contains("roll-card")||null!=card.querySelector(".roll-result")){const check=await CoC7Check.getFromCard(card);if(button.classList.contains("pass-check")){const luckAmount=parseInt(button.dataset.luckAmount);check.forcePass(luckAmount)}else{const upgradeIndex=parseInt(button.dataset.index);await check.upgradeCheck(upgradeIndex)}}else{const actor=CoC7Chat._getChatCardActor(card),detailedResultPlaceHolder=card.querySelector(".result-details");if(actor.spendLuck(luckAmount)){const result=card.querySelector(".dice-total");switch(card.dataset.successLevel=newSuccessLevel,card.dataset.processed="false",newSuccessLevel){case CoC7Check.successLevel.regular:result.innerText=game.i18n.localize("CoC7.RegularSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:result.innerText=game.i18n.localize("CoC7.HardSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:result.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:result.innerText=game.i18n.localize("CoC7.CriticalSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}result.classList.replace("failure","success"),result.classList.remove("fumble"),card.querySelector(".card-buttons").remove(),card.querySelector(".dice-tooltip").style.display="none",await CoC7Chat.updateChatCard(card)}else ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}))}break}case"push":{const newCard=card.cloneNode(!0),result=newCard.querySelector(".dice-total");result.innerText=result.innerText+game.i18n.localize("CoC7.PushingSkill"),result.classList.remove("failure"),newCard.querySelector(".card-buttons").remove(),newCard.dataset.pushedRoll=!0,await CoC7Chat.updateChatCard(newCard,originMessage.dataset.messageId),await CoC7Check.push(card);break}case"defending":{let defender,defenderKey=event.currentTarget.closest(".defender-action-select").dataset.tokenId;defenderKey?defender=this.getActorFromToken(defenderKey):(defenderKey=event.currentTarget.closest(".defender-action-select").dataset.actorId,defender=game.actors.get(defenderKey));const responseType=event.currentTarget.dataset.actionType,outnumbered="true"===event.currentTarget.dataset.outnumbered,check=new CoC7Check;switch(check.referenceMessageId=originMessage.dataset.messageId,check.rollType="opposed",check.side="target",check.action=responseType,responseType){case"dodging":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"fightBack":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.item=event.currentTarget.dataset.itemId,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"maneuver":{const actor=CoC7Chat._getChatCardActor(card);if(defender.build<=actor.build-3)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorManeuverNotPossible"));check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),defender.build<actor.build&&(check.diceModifier=check.diceModifier-(actor.build-defender.build)),check.diceModifier<-2&&(check.difficulty=check.difficulty+Math.abs(check.diceModifier)-2,check.diceModifier=-2),await check.roll(),check.toMessage();break}}break}case"melee-initiator-roll":{const initiator=CoC7MeleeInitiator.getFromCard(card),check=await initiator.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await initiator.publishCheckResult();break}case"melee-target-no-response":{const target=CoC7MeleeTarget.getFromCard(card);await target.publishNoReponseResult();break}case"melee-target-roll":{const target=CoC7MeleeTarget.getFromCard(card),check=await target.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await target.publishCheckResult();break}case"roll-melee-damage":{const damageChatCard=new DamageCard({critical:"true"===button.dataset.critical,fastForward:event.shiftKey});damageChatCard.actorKey=button.dataset.dealer,damageChatCard.targetKey=button.dataset.target,damageChatCard.itemId=button.dataset.weapon,originMessage.dataset.messageId&&(damageChatCard.messageId=originMessage.dataset.messageId),damageChatCard.updateChatCard();break}case"range-initiator-shoot":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);rangeInitiator.addShotAtCurrentTarget(),await rangeInitiator.updateChatCard();break}case"range-initiator-roll":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.resolveCard();break}case"roll-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.rollDamage();break}case"deal-melee-damage":{const targetKey=card.dataset.targetKey,amount=card.dataset.result,targetActor=chatHelper.getActorFromKey(targetKey);await targetActor.dealDamage(amount);const buttons=card.querySelector(".card-buttons"),diceTotal=card.querySelector(".dice-total");$(diceTotal).append('<i class="fas fa-check"></i>'),buttons&&buttons.remove(),await CoC7Chat.updateChatCard(card);break}case"deal-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.dealDamage();break}case"testcheck":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-pass":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-fail":(await CoC7Check.getFromCard(card)).forceFail();break;case"increase-success-level":(await CoC7Check.getFromCard(card)).increaseSuccessLevel();break;case"decrease-success-level":(await CoC7Check.getFromCard(card)).decreaseSuccessLevel();break;case"reveal-check":{const check=await CoC7Check.getFromCard(card);check.isBlind=!1,check.computeCheck(),isCtrlKey(event),check.updateChatCard({makePublic:!0});break}case"roll-check-card":{const check=await CoC7Check.getFromCard(card);check.standby=!1,await check._perform(),check.updateChatCard({forceRoll:!0});break}case"flag-for-development":{const check=await CoC7Check.getFromCard(card);await check.flagForDevelopement(),check.computeCheck(),check.updateChatCard();break}case"reset-creature-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.clearSanLossReason(),await sanCheck.updateChatCard();break}case"roll-san-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSan(),await sanCheck.updateChatCard();break}case"advance-state":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.advanceState(button.dataset.state),await sanCheck.updateChatCard();break}case"roll-san-loss":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSanLoss(),sanCheck.updateChatCard();break}case"roll-int-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollInt(),sanCheck.updateChatCard();break}case"roll-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);await conCheck.rollCon(),conCheck.updateChatCard();break}case"reveal-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);conCheck.isBlind=!1,conCheck.updateChatCard();break}}}static _onChatCardToggleContent(event){event.preventDefault();const content=event.currentTarget.closest(".chat-card").querySelector(".card-content");content&&(content.style.display?content.style.display="none"===content.style.display?"block":"none":content.style.display="block")}}class CoC7MeleeInitiator extends ChatCardActor{constructor(actorKey=null,itemId=null,fastForward=!1){super(actorKey,fastForward),this.itemId=itemId,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1}get template(){return"systems/CoC7/templates/chat/combat/melee-initiator.html"}async revealCheck(){const chatMessage=game.messages.get(this.messageId);await chatMessage.setFlag("CoC7","checkRevealed",!0),await ui.chat.updateMessage(chatMessage,!1)}async createChatCard(){chatHelper.getActorImgFromKey(this.actorKey);const html=await renderTemplate(this.template,this),speakerData={};this.token?speakerData.token=this:speakerData.actor=this;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;if(check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="initiator",check.action="attack",check.actor=this.actorKey,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,game.user.isGM?this.checkRevealed=!1:this.checkRevealed=!0,this.outnumbered&&(check.diceModifier+=1),this.surprised&&(check.diceModifier+=1),this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),this.criticalDamage=check.successLevel===CoC7Check.successLevel.extreme||check.successLevel===CoC7Check.successLevel.critical,this.hasTarget&&!this.autoSuccess){const message=await game.CoC7socket.executeAsGM("gmcreatemessageas",{targetKey:this.targetKey,messageId:this.messageId,fastForward:this.fastForward,actorKey:this.actorKey});this.targetCard=message.id||message._id}return this.autoSuccess&&!this.check.isFumble&&this.check.forcePass(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");if(!this.targetCard&&!this.autoSuccess&&this.hasTarget){const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id}await this.updateChatCard()}static getFromCard(card,messageId=null){const initiator=new CoC7MeleeInitiator;return chatHelper.getObjectFromElement(initiator,card),initiator.roll=CoC7Roll.getFromCard(card),card.closest(".message")?initiator.messageId=card.closest(".message").dataset.messageId:initiator.messageId=messageId,initiator}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7MeleeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7MeleeInitiator.getFromCard(card);initiator.toggleFlag(flag),initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(game.i18n.format("CoC7.LuckNotEnough",{name:this.actor.name})),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total"),rollDamageButton=oldCard.querySelector('button[data-action="roll-melee-damage"]');switch(rollDamageButton&&rollDamageButton.classList.remove("invisible"),newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoCActor extends Actor{constructor(data,context){if(data.type in CONFIG.Actor.documentClasses&&!context?.extended)return new CONFIG.Actor.documentClasses[data.type](data,{extended:!0,...context});super(data,context)}async initialize(){super.initialize(),await this.creatureInit()}prepareBaseData(){if(["character","npc","creature"].includes(this.type)){this.system.skills={};for(const i of this.items)"skill"===i.type&&(this.system.skills[`${i.itemIdentifier}`]={foundryID:i.id,cocid:i.flags?.CoC7?.cocidFlag?.id,value:i.rawValue,bonusDice:i.system.bonusDice});if(void 0===this.system.attribs.san.dailyLimit)if(this.system.attribs.san.oneFifthSanity){const s=this.system.attribs.san.oneFifthSanity.split("/");s[1]&&!isNaN(Number(s[1]))?this.system.attribs.san.dailyLimit=Number(s[1]):this.system.attribs.san.dailyLimit=0}else this.system.attribs.san.dailyLimit=0;this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.build.current=this.hp}super.prepareBaseData()}prepareEmbeddedDocuments(){super.prepareEmbeddedDocuments()}prepareDerivedData(){if(["character","npc","creature"].includes(this.type)){super.prepareDerivedData(),this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.hp.max=this.rawHpMax,null===this.hp&&(this.system.attribs.hp.value=this.rawHpMax),this.system.attribs.mp.max=this.rawMpMax,null===this.mp&&(this.system.attribs.mp.value=this.rawMpMax),this.system.attribs.san.max=this.rawSanMax,null===this.san&&(this.system.attribs.san.value=this.rawSanMax);const filterMatrix=[];this.system.attribs.hp.auto&&filterMatrix.push("system.attribs.hp.max"),this.system.attribs.mp.auto&&filterMatrix.push("system.attribs.mp.max"),this.system.attribs.san.auto&&filterMatrix.push("system.attribs.san.max"),this.system.attribs.mov.auto&&filterMatrix.push("system.attribs.mov.value"),this.system.attribs.db.auto&&filterMatrix.push("system.attribs.db.value"),this.system.attribs.build.auto&&filterMatrix.push("system.attribs.build.value");const changes=this.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);changes.sort(((a,b)=>a.priority-b.priority));const selectChanges=changes.filter((e=>filterMatrix.includes(e.key)));for(const change of selectChanges)change.effect.apply(this,change);this.hpMax&&this.hpMax<this.hp&&(this.system.attribs.hp.value=this.hpMax),this.mpMax&&this.mpMax<this.mp&&(this.system.attribs.mp.value=this.mpMax),this.sanMax&&this.sanMax<this.san&&(this.system.attribs.san.value=this.sanMax)}}static async create(data,options={}){return"character"===data.type?data.prototypeToken=mergeObject(data.prototypeToken||{},{actorLink:!0,disposition:1,sight:{enabled:!0}}):"npc"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/cultist.svg"):"creature"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/floating-tentacles.svg"):"container"===data.type&&(void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="icons/svg/chest.svg"),data.prototypeToken=mergeObject(data.prototypeToken||{},{actorLink:!0})),super.create(data,options)}checkUndefinedAuto(){const returnData={attribs:{hp:{},mp:{},san:{},mov:{},db:{},build:{}}};return void 0===this.system.attribs?.hp?.auto&&(returnData.attribs.hp.auto=!0),void 0===this.system.attribs?.mp?.auto&&(returnData.attribs.mp.auto=!0),void 0===this.system.attribs?.san?.auto&&(returnData.attribs.san.auto=!0),void 0===this.system.attribs?.mov?.auto&&(returnData.attribs.mov.auto=!0),void 0===this.system.attribs?.db?.auto&&(returnData.attribs.db.auto=!0),void 0===this.system.attribs?.build?.auto&&(returnData.attribs.build.auto=!0),returnData}get characteristics(){const characteristics={str:{value:null,shortName:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,shortName:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,shortName:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,shortName:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,shortName:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,shortName:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,shortName:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,shortName:"CHARAC.EDU",label:"CHARAC.Education",formula:null}};if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))characteristics[key]={key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value,hard:Math.floor(value.value/2)||null,extreme:Math.floor(value.value/5)||null,formula:value.formula};return characteristics}static async initToken(createData){}get hasTempoInsane(){return this.hasConditionStatus(COC7.status.tempoInsane)}get getTempoInsaneDurationText(){return this.hasConditionValue(COC7.status.tempoInsane,"durationText")}get hasIndefInsane(){return this.hasConditionStatus(COC7.status.indefInsane)}get portrait(){return game.settings.get("CoC7","useToken")&&(this.token?.texture?.src||this.prototypeToken?.texture?.src)||this.img}async enterBoutOfMadness(realTime=!0,duration=1){let result=null;const boutOfMadnessTableId=realTime?game.settings.get("CoC7","boutOfMadnessRealTimeTable"):game.settings.get("CoC7","boutOfMadnessSummaryTable");if("none"!==boutOfMadnessTableId){result={phobia:!1,mania:!1,description:null};const boutOfMadnessTable=game.tables.get(boutOfMadnessTableId);if(result.tableRoll=await boutOfMadnessTable.roll(),void 0!==result.tableRoll.results[0]){if(CONST.TABLE_RESULT_TYPES.DOCUMENT===result.tableRoll.results[0].type){const item=game.items.get(result.tableRoll.results[0].documentId);if(void 0!==item){item.system?.type?.phobia&&(result.phobia=!0),item.system?.type?.mania&&(result.mania=!0),result.description=`${item.name}:${TextEditor.enrichHTML(item.system.description.value,{async:!1})}`,result.name=item.name;const itemData=item.toObject();delete itemData._id,await this.createEmbeddedDocuments("Item",[itemData])}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessItemNotFound"))}CONST.TABLE_RESULT_TYPES.TEXT===result.tableRoll.results[0].type&&(result.description=TextEditor.enrichHTML(result.tableRoll.results[0].text,{async:!1}))}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessTableNotFound"))}return realTime?(this.setCondition(COC7.status.tempoInsane,{realTime,duration}),result):result}static emptySkill(skillName,value,{rarity=!1,push=!0,combat=!1,img=!1,specialization=!1}={}){const data={name:skillName,type:"skill",system:{value,skillName,specialization:"",properties:{special:!1,rarity,push,combat}}};if(!1!==img&&(data.img=img),!1!==specialization){const parts=CoC7Item.getNamePartsSpec(skillName,specialization);data.system.specialization=parts.specialization,data.system.skillName=parts.skillName,data.name=parts.name,data.system.properties.special=!0}return data}async createSkill(skillName,value,showSheet=!1){const data=CoCActor.emptySkill(skillName,value);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createWeaponSkill(name,firearms=!1,base=null){const skillData=await SkillSpecSelectDialog.create([],game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),0,name),value=Number(skillData.get("base-value")),parts=CoC7Item.getNamePartsSpec(name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),data={name:parts.name,type:"skill",system:{base:isNaN(value)?0:value,adjustments:{personal:null,occupation:null,archetype:null,experience:null},skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}};await this.createEmbeddedDocuments("Item",[data],{renderSheet:!base});return this.getSkillsByName(name)[0]}async creatureInit(){if("creature"!==this.type)return;if(this.getActorFlag("initialized"))return;if(0===this.getSkillsByName(game.i18n.localize(COC7.creatureFightingSkill)).length){try{const parts=CoC7Item.getNamePartsSpec(game.i18n.localize(COC7.creatureFightingSkill),game.i18n.localize(COC7.fightingSpecializationName)),data={type:"skill",name:parts.name,system:{base:0,value:null,skillName:parts.skillName,specialization:parts.specialization,properties:{combat:!0,fighting:!0,special:!0},flags:{}}},skill=await this.createEmbeddedDocuments("Item",[data],{renderSheet:!1}),attack=await this.createEmbeddedDocuments("Item",[{name:"Innate attack",type:"weapon",system:{description:{value:"Creature's natural attack",chat:"Creature's natural attack"},wpnType:"innate",properties:{addb:!0,slnt:!0}}}],{renderSheet:!1});if(skill.length>0&&attack.length>0){const createdAttack=this.items.get(attack[0].id);await createdAttack.update({"system.skill.main.id":skill[0].id,"system.skill.main.name":skill[0].name})}}catch(err){console.error("Creature init: "+err.message)}await this.setActorFlag("initialized")}}async createItem(itemName,quantity=1,showSheet=!1){const data={name:itemName,type:"item",system:{quantity}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptyBook(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newBookName)))return this.createBook(game.i18n.localize(COC7.newBookName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newBookName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newBookName)+" "+index;return this.createBook(itemName,showSheet)}async createBook(itemName,showSheet=!1){const data={name:itemName,type:"book",system:{}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySpell(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSpellName)))return this.createSpell(game.i18n.localize(COC7.newSpellName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;return this.createSpell(itemName,showSheet)}static emptySpell(itemName){return{name:itemName,type:"spell",system:{}}}async createSpell(itemName,showSheet=!1){const data=CoCActor.emptySpell(itemName);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySkill(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSkillName)))return this.createSkill(game.i18n.localize(COC7.newSkillName),"character"!==this.type?1:null,showSheet);let index=0,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;for(;this.getItemIdByName(skillName);)index++,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;return this.createSkill(skillName,null,showSheet)}async createEmptyItem(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newItemName)))return this.createItem(game.i18n.localize(COC7.newItemName),1,showSheet);let index=0,itemName=game.i18n.localize(COC7.newItemName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newItemName)+" "+index;return this.createItem(itemName,1,showSheet)}async createEmptyWeapon(event=null,properties={}){const showSheet=!event||!event.shiftKey;let weaponName=game.i18n.localize(COC7.newWeaponName);if(this.getItemIdByName(game.i18n.localize(COC7.newWeaponName))){let index=0;for(weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index;this.getItemIdByName(weaponName);)index++,weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index}const data={name:weaponName,type:"weapon",system:{properties:{}}};for(const[key]of Object.entries(COC7.weaponProperties))data.system.properties[key]=Object.prototype.hasOwnProperty.call(properties,key)??!1;await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createBioSection(title=null){const bio=this.system.biography?duplicate(this.system.biography):[];bio.push({title,value:null}),await this.update({"system.biography":bio},{renderSheet:!1})}async updateBioValue(index,content){const bio=duplicate(this.system.biography);bio[index].value=content,await this.update({"system.biography":bio},{render:!1})}async updateBioTitle(index,title){const bio=duplicate(this.system.biography);bio[index].title=title,await this.update({"system.biography":bio})}async deleteBioSection(index){const bio=duplicate(this.system.biography);bio.splice(index,1),await this.update({"system.biography":bio})}async moveBioSectionUp(index){if(0===index)return;const bio=duplicate(this.system.biography);if(index>=bio.length)return;const elem=bio.splice(index,1)[0];bio.splice(index-1,0,elem),await this.update({"system.biography":bio})}async moveBioSectionDown(index){const bio=duplicate(this.system.biography);if(index>=bio.length-1)return;const elem=bio.splice(index,1)[0];bio.splice(index+1,0,elem),await this.update({"system.biography":bio})}async updateTextArea(textArea){const name="system."+textArea.dataset.areaName;await this.update({[name]:textArea.value})}async createEmbeddedDocuments(embeddedName,dataArray,options){const processedDataArray=[];let baseValue=0,baseCalculated=0,archetype=!1,occupation=!1;for(let data of dataArray)switch(data.type){case"skill":{if(baseValue=data.system.base,baseCalculated=await CoC7Item.calculateBase(this,data),"character"!==this.type){if(this.getItemIdByName(data.name))return;if(baseValue&&String(baseValue)!==String(data.system.value)&&(data.system.value=baseCalculated),isNaN(Number(data.system.value))){let value;try{value=(await new Roll(data.system.value,this.parseCharacteristics()).evaluate({async:!0})).total}catch(err){value=null}value&&(data.system.value=Math.floor(value))}}else data.system.value=null;let addThis=!0;if(CoC7Item.isAnySpec(data)){const isAnyButNotFlagged=(!data.system.properties?.requiresname??!1)&&!data.system.properties?.picknameonly;let skillList=[];const group=game.system.api.cocid.guessGroupFromDocument(data);if(group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>(item.system.properties?.special??!1)&&!item.system.properties?.requiresname&&!item.system.properties?.picknameonly))),data.system?.flags?.occupation||data.system?.flags?.archetype){const existingSkills=this.skills.filter((el=>!!el.system.specialization&&((!data.system?.flags?.occupation||!el.system.flags?.occupation)&&((!data.system?.flags?.archetype||!el.system.flags?.archetype)&&data.system.specialization.toLocaleLowerCase()===el.system.specialization.toLocaleLowerCase()))));if(existingSkills.length>0)if(skillList.length>0){for(let i=existingSkills.length-1;i>=0;i--){const found=skillList.findIndex((item=>item.name===existingSkills[i].name||item.flags?.CoC7?.cocidFlag?.id===existingSkills[i].flags?.CoC7?.cocidFlag?.id));found>-1&&skillList.splice(found,1)}skillList=skillList.concat(existingSkills)}else skillList=existingSkills}skillList.length>0&&skillList.sort(CoC7Utilities.sortByNameKey);const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:isAnyButNotFlagged||(data.system.properties?.requiresname??!1),fixedBaseValue:data.system.properties?.keepbasevalue??!1,specializationName:data.system.specialization,label:data.name,baseValue:data.system.base});if(Object.prototype.hasOwnProperty.call(skillData,"selected"))if(skillData.selected){const existingItem=this.items.get(skillData.selected);if(existingItem){const changes={};data.system.properties?.keepbasevalue||""!==skillData.baseValue&&(baseCalculated=skillData.baseValue,changes["system.value"]=baseCalculated);for(const[key,value]of Object.entries(data.system.flags))value&&(changes[`system.flags.${key}`]=!0);Object.keys(changes).length>0&&(changes._id=existingItem.id,await this.updateEmbeddedDocuments("Item",[changes])),data.name=CoC7Item.getNameWithoutSpec(existingItem),addThis=!1}else{const existing=skillList.find((i=>i.id===skillData.selected));if(existing){const flags=data.system?.flags;data=duplicate(existing);for(const[key,value]of Object.entries(flags))value&&(data.system.flags[key]=!0);data.system.properties?.keepbasevalue||(""!==skillData.baseValue?(baseCalculated=skillData.baseValue,data.system.value=baseCalculated):baseValue=data.system.value)}}}else{const parts=CoC7Item.getNamePartsSpec(skillData.name,data.system.specialization);data.system.properties?.keepbasevalue||(""!==skillData.baseValue?(baseCalculated=skillData.baseValue,data.system.value=baseCalculated):baseValue=data.system.value),data.system.skillName=parts.skillName,data.name=parts.name}}addThis&&(String(baseValue)!==String(baseCalculated)&&(data.system.base=baseCalculated),processedDataArray.push(duplicate(data)));break}case"weapon":if("container"!==this.type){const mainSkill=data.system?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill,existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(mainSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.main.id=skill.id)}const secondSkill=data.system?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=secondSkill.match(/\(([^)]+)\)/)?secondSkill.match(/\(([^)]+)\)/)[1]:secondSkill,existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(secondSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.alternativ.id=skill.id)}}processedDataArray.push(duplicate(data));break;case"setup":{if(data.system.enableCharacterisitics){data.system.characteristics.list={},data.system.characteristics.list.str=this.getCharacteristic("str"),data.system.characteristics.list.con=this.getCharacteristic("con"),data.system.characteristics.list.siz=this.getCharacteristic("siz"),data.system.characteristics.list.dex=this.getCharacteristic("dex"),data.system.characteristics.list.app=this.getCharacteristic("app"),data.system.characteristics.list.int=this.getCharacteristic("int"),data.system.characteristics.list.pow=this.getCharacteristic("pow"),data.system.characteristics.list.edu=this.getCharacteristic("edu"),data.system.characteristics.list.luck={},data.system.characteristics.list.luck.value=isNaN(this.luck)?null:this.luck,data.system.characteristics.list.luck.label=game.i18n.localize("CoC7.Luck"),data.system.characteristics.list.luck.shortName=game.i18n.localize("CoC7.Luck"),data.system.characteristics.values||(data.system.characteristics.values={}),data.system.characteristics.values.str=data.system.characteristics.list.str.value,data.system.characteristics.values.con=data.system.characteristics.list.con.value,data.system.characteristics.values.siz=data.system.characteristics.list.siz.value,data.system.characteristics.values.dex=data.system.characteristics.list.dex.value,data.system.characteristics.values.app=data.system.characteristics.list.app.value,data.system.characteristics.values.int=data.system.characteristics.list.int.value,data.system.characteristics.values.pow=data.system.characteristics.list.pow.value,data.system.characteristics.values.edu=data.system.characteristics.list.edu.value,data.system.characteristics.values.luck=data.system.characteristics.list.luck.value,data.system.characteristics.points.enabled?data.system.title=game.i18n.localize("CoC7.SpendPoints"):data.system.title=game.i18n.localize("CoC7.RollCharac"),data.system.pointsWarning=!(null!==data.system.characteristics.values.str&&null!==data.system.characteristics.values.con&&null!==data.system.characteristics.values.siz&&null!==data.system.characteristics.values.dex&&null!==data.system.characteristics.values.app&&null!==data.system.characteristics.values.int&&null!==data.system.characteristics.values.pow&&null!==data.system.characteristics.values.edu);if(!await CharacRollDialog.create(data.system))return;{const updateData={};for(const key of["str","con","siz","dex","app","int","pow","edu"])data.system.characteristics.values[key]&&(updateData[`system.characteristics.${key}.value`]=data.system.characteristics.values[key],updateData[`system.characteristics.${key}.formula`]=data.system.characteristics.rolls[key]);data.system.characteristics.values.luck&&(updateData["system.attribs.lck.value"]=data.system.characteristics.values.luck),data.system.characteristics.values.pow&&(updateData["system.attribs.san.value"]=data.system.characteristics.values.pow,updateData["system.attribs.san.dailyLimit"]=Math.floor(data.system.characteristics.values.pow/5),updateData["system.attribs.mp.max"]=Math.floor(data.system.characteristics.values.pow/5)),await this.update(updateData,{renderSheet:!1}),await this.update({"system.attribs.hp.value":this.rawHpMax,"system.attribs.hp.max":this.rawHpMax},{renderSheet:!1})}}const era=Object.entries(data.flags?.CoC7?.cocidFlag?.eras).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:data.system.items,era:void 0===era[0]||era[0]}),skills=items.filter((it=>"skill"===it.type)),othersItems=items.filter((it=>"skill"!==it.type));if(await this.addUniqueItems(skills),await this.addItems(othersItems),game.settings.get("CoC7","oneBlockBackstory"))await this.update({"system.backstory":data.system.backstory},{renderSheet:!1});else for(const sectionName of data.system.bioSections)!this.system.biography?.find((el=>sectionName===el.title))&&sectionName&&await this.createBioSection(sectionName);const monetary=mergeObject(this.system.monetary,duplicate(data.system.monetary)),sheet=this.sheet;let state=!1;do{state=await new Promise((resolve=>setTimeout((()=>{resolve(sheet._state)}),100)))}while(state===Application.RENDER_STATES.RENDERING);await this.update({"system.monetary":monetary}),Hooks.call("setupFinishedCoC7");break}case"archetype":if("character"===this.type){if(this.archetype){let resetArchetype=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetArchetype"),content:`<p>${game.i18n.format("CoC7.ResetArchetypeHint",{name:this.name})}</p>`,yes:()=>{resetArchetype=!0},defaultYes:!1}),!resetArchetype)return;await this.resetArchetype()}const coreCharac=[];for(const entry of Object.entries(data.system.coreCharacteristics)){const[key,value]=entry;if(data.system.coreCharacteristics[key]=!1,value){const char=this.getCharacteristic(key);char.key=key,coreCharac.push(char)}}let charac;if(coreCharac.length>1){const charDialogData={};charDialogData.characteristics=coreCharac,charDialogData.title=game.i18n.localize("CoC7.SelectCoreCharac"),charac=await CharacSelectDialog.create(charDialogData)}else 1===coreCharac.length&&(charac=coreCharac[0].key);if(!charac)return;if(data.system.coreCharacteristics[charac]=!0,data.system.coreCharacteristicsFormula.enabled){let value=Number(data.system.coreCharacteristicsFormula.value);if(isNaN(value)){const char=this.getCharacteristic(charac),roll=new Roll(data.system.coreCharacteristicsFormula.value);await roll.roll({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:char.label,formula:data.system.coreCharacteristicsFormula.value})}),value=char.value<roll.total?roll.total:char.value}await this.update({[`system.characteristics.${charac}.value`]:value})}data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),await this.addUniqueItems(data.system.skills,"archetype"),processedDataArray.push(duplicate(data)),archetype=!0}break;case"occupation":if("character"===this.type){if(this.occupation){let resetOccupation=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetOccupation"),content:`<p>${game.i18n.format("CoC7.ResetOccupationHint",{name:this.name})}</p>`,yes:()=>{resetOccupation=!0},defaultYes:!1}),!resetOccupation)return;await this.resetOccupation()}if(data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),Number(data.system.creditRating.max)>0){const actorCreditRating=game.system.api.cocid.findCocIdInList("i.skill.credit-rating",data.system.skills);0===actorCreditRating.length?0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&(data.system.skills.push("i.skill.credit-rating"),data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills})):0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&data.system.skills.push(actorCreditRating[0])}const pointsDialogData={};pointsDialogData.characteristics=data.system.occupationSkillPoints;let total=0,optionalChar=!1;for(const entry of Object.entries(data.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);pointsDialogData.characteristics[key].name=char.label,pointsDialogData.characteristics[key].value=char.value,value.selected&&(pointsDialogData.characteristics[key].total=char.value*Number(pointsDialogData.characteristics[key].multiplier),value.optional?optionalChar=!0:total+=pointsDialogData.characteristics[key].total)}if(pointsDialogData.total=total,optionalChar){if(!await PointSelectDialog.create(pointsDialogData))return}for(let index=0;index<data.system.groups.length;index++){data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:data.system.groups[index].skills});const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.groups[index].options),dialogData.title=game.i18n.localize("CoC7.SkillSelectionWindow");for(const value of data.system.groups[index].skills)if(CoC7Item.isAnySpec(value))dialogData.skills.push(value);else{const skill=this.items.find((item=>item.name===value.name&&"skill"===item.type));if(!skill||!skill.system.flags?.occupation){data.system.skills.find((item=>item.name===value.name))||dialogData.skills.push(value)}}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}if(Number(data.system.personal)){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.personal),dialogData.title=game.i18n.format("CoC7.SelectPersonalSkills",{number:Number(data.system.personal)});for(const s of this.skills)if(!s.system.flags.occupation&&!s.system.properties.noadjustments&&!s.system.properties.noxpgain){data.system.skills.find((item=>item.name===s.name))||dialogData.skills.push(s)}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}await this.addUniqueItems(data.system.skills,"occupation"),await(this.creditRatingSkill?.setItemFlag("occupation")),await(this.creditRatingSkill?.update({"system.adjustments.occupation":Number(data.system.creditRating.min)})),processedDataArray.push(duplicate(data)),occupation=!0}break;default:processedDataArray.push(duplicate(data))}if(0===processedDataArray.length)return[];const processed=await super.createEmbeddedDocuments(embeddedName,processedDataArray,options);return archetype&&(await this.update({"system.development.archetype":this.archetypePoints}),Hooks.call("archetypeFinishedCoC7")),occupation&&(await this.update({"system.development.occupation":this.occupationPoints,"system.development.personal":this.personalPoints}),Hooks.call("occupationFinishedCoC7")),processed}getItemIdByName(itemName){let id=null;const name=itemName.match(/\(([^)]+)\)/)?itemName.match(/\(([^)]+)\)/)[1]:itemName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&(id=value.id);return id}getItemsByName(itemName){const itemList=[];for(const value of this.items)value.name===itemName&&itemList.push(value);return itemList}getSkillsByName(skillName){const skillList=[],name=skillName.match(/\(([^)]+)\)/)?skillName.match(/\(([^)]+)\)/)[1]:skillName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()!==name.toLowerCase()&&value.flags?.CoC7?.cocidFlag?.id!==skillName||"skill"!==value.type||skillList.push(value);return skillList}getFirstSkillByCoCID(cocid){return this.items.find((i=>i.flags?.CoC7?.cocidFlag?.id===cocid))}parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actor))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}parseCharacteristics(){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actor))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));return parsed}static getCharacteristicDefinition(){const characteristics=[];for(const[key,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))characteristics.push({key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label)});return characteristics}getCharacteristic(charName){if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))if(game.i18n.localize(value.short).toLowerCase()===charName.toLowerCase()||game.i18n.localize(value.label).toLowerCase()===charName.toLowerCase()||key===charName.toLowerCase())return{key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value};return null}getAttribute(attribName){return["lck","luck",game.i18n.localize("CoC7.Luck").toLowerCase()].includes(attribName.toLowerCase())?{key:"lck",shortName:"luck",label:game.i18n.localize("CoC7.Luck"),value:this.system.attribs.lck.value}:["san",game.i18n.localize("CoC7.SAN").toLowerCase(),game.i18n.localize("CoC7.Sanity").toLowerCase()].includes(attribName.toLowerCase())?{key:"san",shortName:game.i18n.localize("CoC7.SAN"),label:game.i18n.localize("CoC7.Sanity"),value:this.system.attribs.san.value}:null}async runRoll(options={}){void 0===options.cardType&&(options.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL),void 0===options.preventStandby&&(options.preventStandby=!0),options.actor=this;return await CoC7ChatMessage.trigger(options)}get occupation(){return this.items.filter((item=>"occupation"===item.type))[0]}get archetype(){return this.items.filter((item=>"archetype"===item.type))[0]}async resetOccupation(eraseOld=!0){if(eraseOld){const occupationSkill=this.items.filter((item=>item.getItemFlag("occupation")));for(let index=0;index<occupationSkill.length;index++)await occupationSkill[index].unsetItemFlag("occupation")}this.occupation&&await this.occupation.delete(),await this.update({"system.development.occupation":null})}async resetArchetype(eraseOld=!0){if(eraseOld){const archetypeSkill=this.items.filter((item=>item.getItemFlag("archetype")));for(let index=0;index<archetypeSkill.length;index++)await archetypeSkill[index].unsetItemFlag("archetype")}this.archetype&&await this.archetype.delete(),await this.update({"system.development.archetype":null})}get luck(){return parseInt(this.system.attribs?.lck?.value)}async setLuck(value){return await this.update({"system.attribs.lck.value":value})}async spendLuck(amount){return amount=parseInt(amount),this.luck>=amount&&this.setLuck(this.luck-amount)}get hp(){return parseInt(this.system.attribs.hp.value)}get rawHpMax(){return this.system.attribs.hp.auto?null!=this.system.characteristics.siz.value&&null!=this.system.characteristics.con.value?CoCActor.hpFromCharacteristics(this.system.characteristics,this.type):this.system.attribs.hp.max?parseInt(this.system.attribs.hp.max):null:parseInt(this.system.attribs.hp.max)}get hpMax(){return parseInt(this.system.attribs.hp.max)}async _setHp(value){return value<0&&(value=0),value>this.system.attribs.hp.max&&(value=parseInt(this.system.attribs.hp.max)),await this.update({"system.attribs.hp.value":value})}async addUniqueItems(skillList,flag=null){const processed=[];for(let skill of skillList)if(skill=duplicate(skill),flag&&(Object.prototype.hasOwnProperty.call(skill.system,"flags")||(skill.system.flags={}),skill.system.flags[flag]=!0),CoC7Item.isAnySpec(skill))processed.push(skill);else{const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else processed.push(skill)}0!==processed.length&&await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addItems(itemList,flag=null){const processed=[];for(const item of itemList)flag&&(item.system.flags||(item.system.flags={}),item.system.flags[flag]=!0),processed.push(duplicate(item));if(0!==processed.length)return await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addUniqueItem(skill,flag=null){const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.system.flags||(skill.system.flags={}),skill.system.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}get rawMpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?CoCActor.mpFromCharacteristics(this.system.characteristics):0:parseInt(this.system.attribs.mp.max)}getReasonSanLoss(sanReason){return"string"==typeof sanReason?this.system.sanityLossEvents.filter((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()))[0]??{type:"",totalLoss:0,immunity:!1}:{type:"",totalLoss:0,immunity:!1}}sanLostToReason(sanReason){if(sanReason){return this.getReasonSanLoss(sanReason).totalLoss}return 0}sanLossReasonEncountered(sanReason){if(sanReason){return""!==this.getReasonSanLoss(sanReason).type}return!1}setReasonSanLoss(sanReason,sanLoss){if("string"==typeof sanReason&&""!==sanReason){const sanityLossEvents=duplicate(this.system.sanityLossEvents),index=sanityLossEvents.findIndex((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()));return sanLoss>0?-1===index?sanityLossEvents.push({type:sanReason,totalLoss:sanLoss,immunity:!1}):sanityLossEvents[index].totalLoss+=sanLoss:index>-1&&(sanityLossEvents.splice(index,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)}))),this.update({"system.sanityLossEvents":sanityLossEvents})}}maxLossToSanReason(sanReason,sanMaxFormula){const sanMax=new Roll(sanMaxFormula.toString()).evaluate({maximize:!0}).total,sanityLossEvent=this.getReasonSanLoss(sanReason);return sanityLossEvent.immunity?0:Math.max(0,sanMax-sanityLossEvent.totalLoss)}async looseSan(sanReason,sanLoss){return this.getReasonSanLoss(sanReason).immunity?0:(await this.setSan(this.san-sanLoss),this.setReasonSanLoss(sanReason,sanLoss),sanLoss)}sanLoss(checkPassed){return checkPassed?this.sanLossCheckPassed:this.sanLossCheckFailled}get sanLossCheckPassed(){return this.system.special?.sanLoss?.checkPassed}get sanLossCheckFailled(){return this.system.special?.sanLoss?.checkFailled}get sanLossMax(){return this.sanLossCheckFailled?isNaN(Number(this.sanLossCheckFailled))?new Roll(this.sanLossCheckFailled).evaluate({maximize:!0}).total:Number(this.sanLossCheckFailled):0}get sanLossMin(){return this.sanLossCheckPassed?isNaN(Number(this.sanLossCheckPassed))?new Roll(this.sanLossCheckPassed).evaluate({maximize:!0}).total:Number(this.sanLossCheckPassed):0}get dailySanLoss(){return this.system.attribs.san?.dailyLoss||0}get dailySanLimit(){return this.system.attribs.san?.dailyLimit||0}get rawSanMax(){if(this.system.attribs)return this.system.attribs?.san?.auto?this.cthulhuMythos?Math.max(99-this.cthulhuMythos,0):99:parseInt(this.system.attribs.san.max)}get sanMax(){return parseInt(this.system.attribs.san.max)}get mp(){return parseInt(this.system.attribs.mp.value)}get mpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?Math.floor(this.system.characteristics.pow.value/5):0:parseInt(this.system.attribs.mp.max)}async setMp(value){return value<0&&(value=0),value>parseInt(this.system.attribs.mp.max)&&(value=parseInt(this.system.attribs.mp.max)),await this.update({"system.attribs.mp.value":value})}get san(){return parseInt(this.system.attribs.san.value)}get int(){return this.getCharacteristic("int")}get occupationPointsSpent(){let occupationPoints=0;for(const skill of this.skills)skill.system.adjustments?.occupation&&(occupationPoints+=skill.system.adjustments.occupation);return occupationPoints}get occupationPoints(){if(!this.occupation)return 0;let points=0;for(const entry of Object.entries(this.occupation.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);value.selected&&(points+=char.value*Number(value.multiplier))}return points}async resetOccupationPoints(){await this.update({"system.development.occupation":this.occupationPoints})}async resetArchetypePoints(){await this.update({"system.development.archetype":this.occupationPoints})}async resetPersonalPoints(){await this.update({"system.development.personal":this.personalPoints})}get archetypePointsSpent(){let archetypePoints=0;for(const skill of this.skills)skill.system.adjustments?.archetype&&(archetypePoints+=skill.system.adjustments.archetype);return archetypePoints}get archetypePoints(){return this.archetype?this.archetype.system.bonusPoints:0}get experiencePoints(){let experiencePoints=0;for(const skill of this.skills)skill.system.adjustments?.experience&&(experiencePoints+=skill.system.adjustments.experience);return experiencePoints}get personalPointsSpent(){let personalPoints=0;for(const skill of this.skills)skill.system.adjustments?.personal&&(personalPoints+=skill.system.adjustments.personal);return personalPoints}get personalPoints(){return 2*Number(this.system.characteristics.int.value)}get hasDevelopmentPhase(){for(const skill of this.skills)if(skill.system.flags?.developement)return!0;if(this.onlyRunOncePerSession)return!1;for(const sanityLossEvent of this.system.sanityLossEvents)if(!sanityLossEvent.immunity)return!0;return!1}async setSan(value){value<0&&(value=0),value>this.system.attribs.san.max&&(value=this.system.attribs.san.max);const loss=parseInt(this.system.attribs.san.value)-value;if(loss>0){let totalLoss=parseInt(this.system.attribs.san.dailyLoss)?parseInt(this.system.attribs.san.dailyLoss):0;totalLoss+=loss,loss>=5&&await this.setCondition(COC7.status.tempoInsane),totalLoss>=this.system.attribs.san.dailyLimit&&await this.setCondition(COC7.status.indefInsane),await this.update({"system.attribs.san.value":value,"system.attribs.san.dailyLoss":totalLoss})}else await this.update({"system.attribs.san.value":value});return value}async setAttribAuto(value,attrib){const updatedKey=`system.attribs.${attrib}.auto`;return await this.update({[updatedKey]:value})}async toggleAttribAuto(attrib){this.setAttribAuto(!this.system.attribs[attrib].auto,attrib)}static dbFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?"1D4":`${Math.floor((sum-45)/80)}D6`}static buildFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?1:Math.floor((sum-45)/80)+1}static hpFromCharacteristics(characteristics,type){const sum=parseInt(characteristics.siz.value??0,10)+parseInt(characteristics.con.value??0,10),divisor=game.settings.get("CoC7","pulpRuleDoubleMaxHealth")&&"character"===type?5:10;return Math.floor(sum/divisor)}static mpFromCharacteristics(characteristics){return Math.floor(characteristics.pow.value/5)}static movFromCharacteristics(characteristics,type,age){let MOV;return MOV=characteristics.dex.value>characteristics.siz.value&&characteristics.str.value>characteristics.siz.value?9:characteristics.dex.value>=characteristics.siz.value||characteristics.str.value>=characteristics.siz.value?8:7,"creature"===type||game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||isNaN(parseInt(age))||(MOV=parseInt(age)>=40?MOV-Math.floor(parseInt(age)/10)+3:MOV),Math.max(0,MOV)}get rawBuild(){return this.system.attribs&&this.system.attribs.build?("auto"===this.system.attribs.build.value&&(this.system.attribs.build.auto=!0),this.system.attribs.build.auto?CoCActor.buildFromCharacteristics(this.system.characteristics):this.system.attribs.build.value):null}get build(){return this.system.attribs.build.value}get rawDb(){return this.system.attribs&&this.system.attribs.db?("auto"===this.system.attribs.db.value&&(this.system.attribs.db.auto=!0),this.system.attribs.db.auto?CoCActor.dbFromCharacteristics(this.system.characteristics):this.system.attribs.db.value):null}get db(){return this.system.attribs.db.value}get rawMov(){if(!this.system.attribs)return null;if(!this.system.attribs.mov)return null;if("auto"===this.system.attribs.mov.value&&(this.system.attribs.mov.auto=!0),this.system.attribs.mov.auto){const MOV=CoCActor.movFromCharacteristics(this.system.characteristics,this.system.type,this.system.infos.age);if(MOV>0)return MOV}return this.system.attribs.mov.value}get mov(){return this.system.attribs.mov.value}get tokenId(){return this.token?`${this.token.scene._id}.${this.token.id}`:null}get locked(){return this.system.flags||(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),this.update({"system.flags.locked":!1})),this.system.flags.locked}getItemsFromName(name){return this.items.filter((i=>i.name===name))}set locked(value){this.update({"system.flags.locked":value})}async toggleActorFlag(flagName){const flagValue=!this.system.flags[flagName],name=`system.flags.${flagName}`;await this.update({[name]:flagValue})}async attributeCheck(attributeName,fastForward=!1,options={}){const attrib=this.getAttribute(attributeName.toLowerCase());if(!attrib)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{missing:attributeName})),null;const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollAttribute(attrib.key),check.toMessage()}async characteristicCheck(characteristicName,fastForward=!1,options={}){const char=this.getCharacteristic(characteristicName);if(!char)return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:characteristicName,actor:this.name}));const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){options.displayName=char.label;const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollCharacteristic(char.key),check.toMessage()}async skillCheck(skillData,fastForward,options={}){const skillIdentifier=skillData.name?skillData.name:skillData;console.log(skillIdentifier);let skill=[];if(!!skillIdentifier.match(/^i\.skill\./)){const item=this.getFirstSkillByCoCID(skillIdentifier);item&&skill.push(item)}if(skill.length||(skill=this.getSkillsByName(skillIdentifier)),!skill.length){let item=null;if(skillData.pack){const pack=game.packs.get(skillData.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(skillData.id)}else skillData.id&&(item=game.items.get(skillData.id));if(!item){const check=new CoC7Check;check._rawValue="?",await check.roll(),check.toMessage()}if(!item)return ui.notifications.warn(game.i18n.format("CoC7.NoSkill")+" "+game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:skillData.name?skillData.name:skillData,actor:this.name}));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:skillData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;if(await this.createEmbeddedDocuments("Item",[duplicate(item)]),skill=this.getSkillsByName(item.name),!skill.length)return;if(game.user.isGM){const skillValue=await SkillValueDialog.create(skill[0].name,skill[0].base),value=Number(skillValue.get("base-value"));await skill[0].updateValue(value)}}const check=new CoC7Check;if(void 0!==options.modifier&&(check.diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,check.skill=skill[0].id,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.roll(),check.toMessage()}async weaponCheck(weaponData,fastForward=!1){let weapon;if(void 0!==weaponData.uuid&&(weapon=await fromUuid(weaponData.uuid)),void 0!==weaponData.id&&(weapon=this.items.get(weaponData.id)),!weapon){let weapons=this.getItemsFromName(weaponData.name);if(0===weapons.length){if(!game.user.isGM)return void ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasNoWeaponNamed",{actorName:this.name,weaponName:weaponData.name}));{let item=null;const pack=weaponData.pack?game.packs.get(weaponData.pack):null;if(pack){if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(weaponData.id)}else weaponData.id&&(item=game.items.get(weaponData.id));if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));let create=!1;await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:weaponData.name,actor:this.name})}</p>`,yes:()=>{create=!0}});const actor=void 0!==this.parent?.actor?this.parent.actor:this;if(!0!==create)return;if(await actor.createEmbeddedDocuments("Item",[item.toJSON()]),weapons=actor.getItemsFromName(item.name),!weapons.length)return;await weapons[0].reload()}}else weapons.length>1&&ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasTooManyWeaponsNamed",{actorName:this.name,weaponName:weaponData.name}));weapon=weapons[0]}if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}}async rollInitiative(hasGun=!1){if("optional"===game.settings.get("CoC7","initiativeRule")){const roll=new CoC7Check(this.actorKey);return roll.denyPush=!0,roll.denyLuck=!0,roll.denyBlindTampering=!0,roll.hideDice=!1===game.settings.get("CoC7","displayInitDices"),roll.flavor="Initiative roll",await roll.rollCharacteristic("dex",hasGun?1:0),roll.toMessage(),roll.successLevel+this.system.characteristics.dex.value/100}return hasGun?this.system.characteristics.dex.value+50:this.system.characteristics.dex.value}getActorFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}async setActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!1})}getWeaponSkills(itemId){let weapon=fromUuidSync(itemId);if(weapon?void 0===weapon.system&&(weapon=game.packs.get(weapon.pack).get(weapon._id)):weapon=this.items.get(itemId),"weapon"!==weapon.type)return null;const skills=[];return weapon.system.skill.main.id&&skills.push(this.items.get(weapon.system.skill.main.id)),weapon.usesAlternativeSkill&&weapon.system.skill.alternativ.id&&skills.push(this.items.get(weapon.system.skill.alternativ.id)),skills}find(name){if(!name)return;const item=this.items.get(name);if(item)return{type:"item",value:item};const matches=/\(([^)]+)\)/.exec(name);let shortName=null;matches&&matches.length&&(shortName=matches[1]);const skill=this.skills.filter((s=>!!s.name&&(s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===shortName?.toLocaleLowerCase().replace(/\s/g,""))));if(skill.length)return{type:"item",value:skill[0]};const charKey=["str","con","siz","dex","app","int","pow","edu"];for(let i=0;i<charKey.length;i++){const char=this.getCharacteristic(charKey[i]);if(char){if(char.name=char.label,char.key?.toLocaleLowerCase()===name.toLowerCase()||char.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.shortName?.toLocaleLowerCase()===name.toLowerCase()||char.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.label?.toLocaleLowerCase()===name.toLowerCase()||char.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char}}}const attribKey=["lck","san"];for(let i=0;i<attribKey.length;i++){const attr=this.getAttribute(attribKey[i]);if(attr){if(attr.name=attr.label,attr.key?.toLocaleLowerCase()===name.toLowerCase()||attr.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.shortName?.toLocaleLowerCase()===name.toLowerCase()||attr.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.label?.toLocaleLowerCase()===name.toLowerCase()||attr.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr}}}}get pilotSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.PilotSpecializationName")?.toLocaleLowerCase()))}get driveSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.DriveSpecializationName")?.toLocaleLowerCase()))}get tokenUuid(){return this.sheet.token?this.sheet.token.uuid:null}get tokenKey(){return this.sheet.token?`${this.sheet.token.parent.id}.${this.sheet.token.id}`:this.id}get actorKey(){return this.prototypeToken.actorLink?this.id:this.tokenKey}static getActorFromKey(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}return game.actors.get(key)||null}async rollCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const r=new Roll(value.formula);await r.roll({async:!0}),r.total&&(characteristics[`system.characteristics.${key}.value`]=Math.floor(r.total))}await this.update(characteristics),await this.reportCharactedriticsValue()}async averageCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const max=new Roll(value.formula).evaluate({maximize:!0}).total,min=new Roll(value.formula).evaluate({minimize:!0}).total,average=Math.floor((max+min)/2),charValue=average%5==0?average:10*Math.round(average/10);charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics),await this.reportCharactedriticsValue()}async reportCharactedriticsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&value.formula.startsWith("@")){let charValue;try{charValue=new Roll(value.formula,this.parseCharacteristics()).evaluate({maximize:!0}).total}catch(err){charValue=null}charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics)}async setCharacteristic(name,value){const characteristic={},charValue=isNaN(parseInt(value))?null:parseInt(value);if(characteristic[name]=charValue,!charValue&&value.startsWith("@")){characteristic[name.replace(".value",".formula")]=value}await this.update(characteristic),await this.reportCharactedriticsValue()}async developementPhase(fastForward=!1){const failure=[],success=[],title=game.i18n.localize("CoC7.RollAll4Dev");let skillsRolled=0,message='<p class="chat-card">';for(const item of this.items)if("skill"===item.type&&item.developementFlag){skillsRolled++;const die=await new Die({faces:100}).evaluate({async:!0}),skillValue=item.value;let augment=null,skillMasteringMessage=null;if(die.total>skillValue||die.total>=95){const augmentDie=await new Die({faces:10}).evaluate({async:!0});if(success.push(item.id),skillValue<90&&skillValue+augmentDie.total>=90){const augmentSANDie=await new Die({faces:6,number:2}).evaluate({async:!0}),sanGained=augmentSANDie.total,sanGainedMessage=`Gained 2d6 (${augmentSANDie.values[0]} + ${augmentSANDie.values[1]} = ${sanGained}) SAN`;console.debug(sanGainedMessage),skillMasteringMessage=`<span class="upgrade-success">${game.i18n.format("CoC7.SanGained",{results:`${augmentSANDie.values[0]} + ${augmentSANDie.values[1]}`,sanGained,skill:item.name,skillValue:skillValue+augmentDie.total})}</span><br>`,await this.setSan(this.san+sanGained)}augment+=augmentDie.total,message+=`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:item.name,die:die.total,score:item.value,augment:augmentDie.total})}</span><br>`,null!==skillMasteringMessage&&(message+=skillMasteringMessage),await item.increaseExperience(augment)}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:item.name,die:die.total,score:item.value})}</span><br>`,failure.push(item.id);await item.unflagForDevelopement()}const sanityLossEvents=[];let changed=!1;for(const sanityLossEvent of this.system.sanityLossEvents)sanityLossEvent.immunity?sanityLossEvents.push(sanityLossEvent):sanityLossEvent.totalLoss>1?(sanityLossEvent.totalLoss--,sanityLossEvents.push(sanityLossEvent),changed=!0):changed=!0;if(changed&&(skillsRolled&&(message+="<br>"),message+=`<span>${game.i18n.format("CoC7.ReduceSanityLimits")}</span>`,await this.update({"system.sanityLossEvents":sanityLossEvents})),!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(skillsRolled?title:"",message,{speaker}),this.onlyRunOncePerSession=!0}return{failure,success}}async developLuck(fastForward=!1){const currentLuck=this.system.attribs.lck.value;currentLuck||await this.update({"system.attribs.lck.value":0});const pulpRuleDevelopmentRollLuck=game.settings.get("CoC7","pulpRuleDevelopmentRollLuck"),upgradeRoll=(await new Roll("1D100").roll({async:!0})).total,higherThanCurrentLuck=upgradeRoll>currentLuck;let augmentRoll;pulpRuleDevelopmentRollLuck?augmentRoll=higherThanCurrentLuck?"2D10+10":"1D10+5":higherThanCurrentLuck&&(augmentRoll="1D10");const title=game.i18n.localize("CoC7.RollLuck4Dev");let message='<p class="chat-card">';if(pulpRuleDevelopmentRollLuck||higherThanCurrentLuck){const augmentValue=(await new Roll(augmentRoll).roll({async:!0})).total;await this.update({"system.attribs.lck.value":this.system.attribs.lck.value+augmentValue}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll,score:currentLuck,augment:augmentValue})}</span>`}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.LuckNotIncreased",{die:upgradeRoll,score:currentLuck})}</span>`;if(!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(title,message,{speaker})}}async developSkill(skillId,fastForward=!1){const skill=this.items.get(skillId);if(!skill)return;let title="",message="";const upgradeRoll=new Roll("1D100");if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>skill.value||upgradeRoll.total>=95){const augmentRoll=new Roll("1D10");await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),message=game.i18n.format("CoC7.DevSuccessDetails",{item:skill.name,augment:augmentRoll.total}),title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),await skill.increaseExperience(augmentRoll.total)}else title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),message=game.i18n.format("CoC7.DevFailureDetails",{item:skill.name});const speaker={actor:this._id};await chatHelper.createMessage(title,message,{speaker}),await skill.unflagForDevelopement()}hasConditionStatus(conditionName){const conditionValue=this.system.conditions?.[conditionName]?.value;return"boolean"==typeof conditionValue&&conditionValue}hasConditionValue(conditionName,field){if(this.hasConditionStatus(conditionName)){if(conditionName===COC7.status.tempoInsane&&"durationText"===field){const realTime=this.hasConditionValue(conditionName,"realTime"),duration=this.hasConditionValue(conditionName,"duration");if(void 0!==duration){if(!0===realTime)return duration+" "+game.i18n.localize("CoC7.rounds");if(!1===realTime)return duration+" "+game.i18n.localize("CoC7.hours")}return""}return this.system.conditions?.[conditionName]?.[field]}}async toggleCondition(conditionName){this.hasConditionStatus(conditionName)?await this.unsetCondition(conditionName):await this.setCondition(conditionName)}async setCondition(conditionName,{forceValue=!1,justThis=!1,realTime=null,duration=null}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>effect.flags.core?.statusId===conditionName)).map((effect=>effect.id)),custom={};switch(conditionName){case COC7.status.dead:custom.flags={core:{overlay:!0}};break;case COC7.status.tempoInsane:custom.flags={CoC7:{realTime:void 0}},custom.duration={rounds:void 0,seconds:void 0},!0!==realTime&&!1!==realTime||(custom.flags.CoC7.realTime=realTime,custom.flags={CoC7:{realTime}},null!=duration&&(realTime?custom.duration.rounds=duration:custom.duration.seconds=3600*duration))}if(0===effects.length){const effect=CONFIG.statusEffects.filter((effect=>effect.id===conditionName));if(1===effect.length){const effectData=mergeObject({label:game.i18n.localize(effect[0].label),icon:effect[0].icon,flags:{core:{statusId:effect[0].id}},disabled:!1},custom);await super.createEmbeddedDocuments("ActiveEffect",[effectData])}else forceValue=!0}else custom._id=effects[0],await super.updateEmbeddedDocuments("ActiveEffect",[custom]),forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons")){switch(conditionName){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.value`]:!0});break;case COC7.status.tempoInsane:{const fields={};fields[`system.conditions.${conditionName}.value`]=!0,!0!==realTime&&!1!==realTime||(fields[`system.conditions.${conditionName}.realTime`]=realTime,null!=duration&&(fields[`system.conditions.${conditionName}.duration`]=duration)),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.realTime`)||(fields[`system.conditions.${conditionName}.-=realTime`]=null),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.duration`)||(fields[`system.conditions.${conditionName}.-=duration`]=null),await this.update(fields)}}if(!justThis)switch(conditionName){case COC7.status.criticalWounds:if(await this.setCondition(COC7.status.prone),!this.hasConditionStatus(COC7.status.unconscious)&&!this.hasConditionStatus(COC7.status.dead)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}break;case COC7.status.dead:await this.unsetCondition(COC7.status.criticalWounds),await this.unsetCondition(COC7.status.dying),await this.unsetCondition(COC7.status.unconscious)}}}async unsetCondition(conditionName,{forceValue=!1}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>effect.flags.core?.statusId===conditionName)).map((effect=>effect.id));effects.length>0?await super.deleteEmbeddedDocuments("ActiveEffect",effects):forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons"))switch(conditionName){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.-=value`]:null}),await this.update({[`system.conditions.${conditionName}.value`]:!1})}}async resetCounter(counter){await this.update({[counter]:0})}async resetDailySanity(){await this.update({"system.attribs.san.dailyLimit":Math.floor(this.system.attribs.san.value/5),"system.attribs.san.dailyLoss":0})}get fightingSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.fighting&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get closeCombatWeapons(){const weaponList=[];for(const value of this.items)if("weapon"===value.type&&!value.system.properties.rngd){const skill=this.items.get(value.system.skill.main.id);value.system.skill.main.value=skill?skill.value:0,weaponList.push(value)}return weaponList.sort(CoC7Utilities.sortByNameKey),weaponList}get firearmSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.firearm&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get user(){return game.users.find((user=>!(!user.character||user.character.id!==this.id)))}get dodgeSkill(){const skill=this.getFirstSkillByCoCID("i.skill.dodge");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge"));return 0!==skillList.length?skillList[0]:null}get creditRatingSkill(){const skill=this.getFirstSkillByCoCID("i.skill.credit-rating");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythosSkill(){const skill=this.getFirstSkillByCoCID("i.skill.cthulhu-mythos");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythos(){const CM=this.cthulhuMythosSkill;if(CM){const value=CM.value;return value||parseInt(CM.system.value)}return 0}get mythosHardened(){return this.getFlag("CoC7","mythosHardened")||!1}async setMythosHardened(){await this.setFlag("CoC7","mythosHardened",!0)}get mythosInsanityExperienced(){return this.getFlag("CoC7","mythosInsanityExperienced")||!1}async experienceFirstMythosInsanity(){await this.setFlag("CoC7","mythosInsanityExperienced",!0)}get creditRating(){const CR=this.creditRatingSkill;if(CR){const value=CR.value;return value||parseInt(CR.system.value)}return 0}static monetaryFormat(format,symbol,value){switch(format){case COC7.monetaryFormatKeys.lsd:return Math.floor(value/240)+"/"+Math.floor(value/12)%20+"/"+value%12;case COC7.monetaryFormatKeys.roman:return Math.floor(value/400)+"/"+Math.floor(value/16)%25+"/"+Math.floor(value/8)%2+"/"+Math.floor(value/4)%2+"/"+value%4;case COC7.monetaryFormatKeys.decimalLeft:return symbol+Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"");case COC7.monetaryFormatKeys.decimalRight:return Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"")+" "+symbol;case COC7.monetaryFormatKeys.integerLeft:return symbol+Number(value).toLocaleString();case COC7.monetaryFormatKeys.integerRight:return Number(value).toLocaleString()+" "+symbol}return"0"}static monetaryValue(format,values,CR,type,value){CR=CR||0;const row=values.find((r=>("object"==typeof r.min||r.min<=CR)&&("object"==typeof r.max||r.max>=CR)));if(void 0!==row&&void 0!==row[type]&&void 0!==row[value])switch(format){case COC7.monetaryFormatKeys.lsd:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 240*CR*row[value];case COC7.monetaryTypeKeys.value:return 240*row[value];case COC7.monetaryTypeKeys.s:return 12*row[value];case COC7.monetaryTypeKeys.d:return 1*row[value]}break;case COC7.monetaryFormatKeys.roman:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 400*CR*row[value];case COC7.monetaryTypeKeys.value:return 400*row[value];case COC7.monetaryTypeKeys.denarii:return 16*row[value];case COC7.monetaryTypeKeys.quinarii:return 8*row[value];case COC7.monetaryTypeKeys.sestertii:return 4*row[value];case COC7.monetaryTypeKeys.asses:return 1*row[value]}break;default:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return CR*row[value];case COC7.monetaryTypeKeys.value:return 1*row[value]}}return 0}get spendingLevel(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"spendingType","spendingValue")}get cash(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"cashType","cashValue")}get assets(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"assetsType","assetsValue")}get skills(){const skillList=[];for(const value of this.items)"skill"===value.type&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get owners(){return game.users.filter((u=>this.testUserPermission(u,"OWNER")&&!u.isGM))}get player(){return this.owners.filter((u=>u.character?.id===this.id))}get characterUser(){return game.users.contents.filter((u=>u.character?.id===this.id))[0]||null}async setHp(value){value<0&&(value=0),value>this.system.attribs.hp.max&&(value=this.system.attribs.hp.max);const healthBefore=this.hp;let damageTaken;return isNaN(healthBefore)||value>=healthBefore?await this._setHp(value):(damageTaken=healthBefore-value,await this.dealDamage(damageTaken,{ignoreArmor:!0})),value}async dealDamage(amount,options={}){const armorData=options.armor?options.armor:this.system.attribs.armor,grossDamage=parseInt(amount);let armorValue=0;options.ignoreArmor||null===armorData||(CoC7Utilities.isFormula(armorData)?armorValue=(await new Roll(armorData).roll({async:!0})).total:isNaN(Number(armorData))?isNaN(Number(armorData?.value))?ui.notifications.warn(game.i18n.format("CoC7.ErrorUnableToParseArmorFormula",{value:armorData})):armorValue=Number(armorData.value):armorValue=Number(armorData));const netDamage=grossDamage-armorValue;if(netDamage<=0)return 0;if(await this._setHp(this.hp-netDamage),netDamage>=this.system.attribs.hp.max)await this.setCondition(COC7.status.dead);else if(game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")){if(0===this.hp)netDamage>=Math.ceil(this.system.attribs.hp.max/2)?this.setCondition(COC7.status.dying):this.setCondition(COC7.status.unconscious);else if(netDamage>=Math.ceil(this.system.attribs.hp.max/2)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}}else{let hasMajorWound=!1;netDamage>=Math.ceil(this.system.attribs.hp.max/2)?(await this.setCondition(COC7.status.criticalWounds),hasMajorWound=!0):hasMajorWound=this.hasConditionStatus(COC7.status.criticalWounds),0===this.hp&&(await this.setCondition(COC7.status.unconscious),hasMajorWound&&this.setCondition(COC7.status.dying))}return netDamage}get majorWound(){return this.hasConditionStatus(COC7.status.criticalWounds)}get dying(){return this.hasConditionStatus(COC7.status.dying)}get unconscious(){return this.hasConditionStatus(COC7.status.unconscious)}get dead(){return this.hasConditionStatus(COC7.status.dead)}get prone(){return this.hasConditionStatus(COC7.status.prone)}}class CoC7Link{static get CHECK_TYPE(){return{CHECK:"check",SANLOSS:"sanloss",ITEM:"item",EFFECT:"effect"}}static get LINK_TYPE(){return{CHARACTERISTIC:"characteristic",ATTRIBUTE:"attribute",SKILL:"skill"}}static init(){CONFIG.CoC7Link={documentClass:CoC7Link}}static bindEventsHandler(html){html.find("a.coc7-link:not(.hascoc7linked)").on("click",(event=>CoC7Link._onLinkClick(event))).on("dragstart",(event=>CoC7Link._onDragCoC7Link(event))).addClass("hascoc7linked")}static _linkFromEvent(event){const a=event.currentTarget,i=a.querySelector("[data-link-icon]"),data=duplicate(a.dataset),oldType=data.type;return data.type="CoC7Link",data.icon=null,oldType&&(data.linkType=oldType),data.object&&("string"==typeof data.object||data.object instanceof String)&&(data.object=JSON.parse(data.object)),i.dataset&&i.dataset.linkIcon&&"fas fa-dice"!==i.dataset.linkIcon&&(data.icon=i.dataset.linkIcon),data.displayName=a.dataset.displayName?a.innerText:null,data.difficulty&&(data.difficulty=CoC7Utilities.convertDifficulty(data.difficulty)),data}static _onDragCoC7Link(event){const data=CoC7Link._linkFromEvent(event);event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}static async fromDropData(data,options={}){const cls=new CoC7Link;cls.object=mergeObject({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.CHECK,linkType:CoC7Link.LINK_TYPE.SKILL,difficulty:CoC7Check.difficultyLevel.regular,modifier:0,object:{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",changes:[]}},data);for(const key of["name","displayName","icon","id","pack","sanMin","sanMax","sanReason"])cls.object[key]=cls.object[key]??"";return void 0!==cls.object.object.icon&&void 0!==cls.object.object.external&&["http","https"].includes(cls.object.object.external)&&(cls.object.object.icon=cls.object.object.external+"://"+cls.object.object.icon),cls.options=options,cls}static _createLink(match){const name=match[4]??void 0,options=match[3]??void 0,type=match[2]??void 0,data={cls:["coc7-link"],dataset:{check:type},icon:null,blind:!1,name};if(type===CoC7Link.CHECK_TYPE.EFFECT)data.effect=JSON.parse(options),data.dataset.object=options,void 0!==data.effect.icon&&void 0!==data.effect.external&&["http","https"].includes(data.effect.external)&&(data.effect.icon=data.effect.external+"://"+data.effect.icon);else{const matches=options.matchAll(/[^,]+/gi);for(const match of Array.from(matches)){let[key,value]=match[0].split(":");"icon"===key&&(data.icon=value),"blind"===key&&void 0===value&&(value=!0,data.blind=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase())),data.dataset[key]=value}void 0!==data.dataset.icon&&void 0!==data.dataset.external&&["http","https"].includes(data.dataset.external)&&(data.dataset.icon=data.dataset.external+"://"+data.dataset.icon,data.icon=data.dataset.icon)}let title;const difficulty=CoC7Check.difficultyString(data.dataset.difficulty);switch(type.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{let humanName=data.dataset.name;["attributes","attribute","attrib","attribs"].includes(data.dataset.type?.toLowerCase())&&("lck"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Luck")),"san"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Sanity"))),["charac","char","characteristic","characteristics"].includes(data.dataset.type?.toLowerCase())&&(humanName=CoC7Utilities.getCharacteristicNames(data.dataset.name)?.label),title=game.i18n.format(`CoC7.LinkCheck${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:humanName});break}case CoC7Link.CHECK_TYPE.SANLOSS:title=game.i18n.format(`CoC7.LinkSanLoss${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,sanMin:data.dataset.sanMin,sanMax:data.dataset.sanMax});break;case CoC7Link.CHECK_TYPE.ITEM:title=game.i18n.format(`CoC7.LinkItem${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:data.dataset.name});break;case CoC7Link.CHECK_TYPE.EFFECT:title=data.effect.label}name?data.dataset.displayName=!0:data.name=title;const a=document.createElement("a");a.title=game.user.isGM?data.name:title,a.classList.add(...data.cls);for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.draggable=!0,data.icon=data.icon??data.effect?.icon??"fas fa-dice",(data.icon.includes("\\")||data.icon.includes("."))&&(data.img=data.icon),data.blind&&(a.innerHTML+='<i class="fas fa-eye-slash"></i>'),data.img?a.innerHTML+=`<img data-link-icon="${data.icon}" src="${data.img}">`:a.innerHTML+=`<i data-link-icon="${data.icon}" class="link-icon ${data.icon}"></i>`,a.innerHTML+=`<span>${data.name}</span>`,a}_createDocumentLink(eventData,{relativeTo,label}={}){if(!eventData.check)return"";switch(eventData.check.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{if(!eventData.linkType||!eventData.name)return"";let options=`${eventData.blind?"blind,":""}type:${eventData.linkType},name:${eventData.name}`;if(void 0!==eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),void 0!==eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.check[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.SANLOSS:{if(!eventData.sanMax||!eventData.sanMin)return"";let options=`${eventData.blind?"blind,":""}sanMax:${eventData.sanMax},sanMin:${eventData.sanMin}`;if(eventData.sanReason&&(options+=`,sanReason:${eventData.sanReason}`),eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}let link=`@coc7.sanloss[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.ITEM:{if(!eventData.name)return"";let options=`${eventData.blind?"blind,":""}name:${eventData.name}`;if(eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.item[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.EFFECT:{const parts=eventData.object.icon.match(/^(https?):\/\/(.+)$/);parts&&(eventData.object.external=parts[1],eventData.object.icon=parts[2]);let link=`@coc7.effect[${JSON.stringify(eventData.object)}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}}return"?"}static async _onLinkActorClick(actor,options,{shiftKey=!1}={}){switch(options.check){case CoC7Link.CHECK_TYPE.CHECK:if(["charac","char","characteristic","characteristics"].includes(options.linkType.toLowerCase()))return actor.characteristicCheck(options.name,shiftKey,options);if(["skill"].includes(options.linkType.toLowerCase()))return actor.skillCheck(options,shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.linkType.toLowerCase()))return actor.attributeCheck(options.name,shiftKey,options);break;case CoC7Link.CHECK_TYPE.SANLOSS:return void SanCheckCard.create(actor.actorKey,options,{fastForward:shiftKey});case CoC7Link.CHECK_TYPE.ITEM:return actor.weaponCheck(options,shiftKey);case CoC7Link.CHECK_TYPE.EFFECT:await actor.createEmbeddedDocuments("ActiveEffect",[{label:options.object.label,icon:options.object.icon,changes:options.object.changes}])}}static toChatMessage(options){const option={speaker:{alias:game.user.name}};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}),chatHelper.createMessage(null,message,option)}static toWhisperMessage(options,actors){for(const actor of actors){const option={speaker:{alias:game.user.name},whisper:actor.owners.map((a=>a.id))};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageTargetCheckRequested",{name:actor.name,check:link}),chatHelper.createMessage(null,message,option)}}static async _onLinkClick(event){const options=CoC7Link._linkFromEvent(event);if(game.user.isGM){if(isCtrlKey(event))return void CoC7ContentLinkDialog.create(options);if(canvas.tokens.controlled.length){for(const token of canvas.tokens.controlled)CoC7Link._onLinkActorClick(token.actor,options,{shiftKey:event.shiftKey});return}const speaker=ChatMessage.getSpeaker(),actor=ChatMessage.getSpeakerActor(speaker);return actor?void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey}):void CoC7Link.toChatMessage(options)}{const speaker=ChatMessage.getSpeaker();let actor=ChatMessage.getSpeakerActor(speaker);if(!actor){const actors=game.actors.filter((a=>(a.ownership[game.user.id]??a.ownership.default)>=CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER));1===actors.length&&(actor=actors[0])}if(actor)return void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey})}ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor"))}setValue(key,value){this.object[key]=value}get link(){return this._createDocumentLink(this.object)}get id(){return this.object.id}get pack(){return this.object.pack}get checkType(){return this.object.check}get difficulty(){return this.object.difficulty}get icon(){return this.object.icon}get displayName(){return this.object.displayName}get modifier(){return this.object.modifier}get linkType(){return this.object.linkType}get sanMin(){return this.object.sanMin}get sanMax(){return this.object.sanMax}get sanReason(){return this.object.sanReason}get effect(){return this.object.object}get checkName(){if(this.isCharacteristicCheck){const characteristics=CoCActor.getCharacteristicDefinition();return characteristics.find((c=>c.key===this.object.name||c.shortName===this.object.name||c.label===this.object.name))?.key??""}return this.object.name}get isCheck(){return this.object.check===CoC7Link.CHECK_TYPE.CHECK}get isCharacteristicCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.CHARACTERISTIC}get isAttributeCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.ATTRIBUTE}get isSkillCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.SKILL}get isItemCheck(){return this.object.check===CoC7Link.CHECK_TYPE.ITEM}get isSanLossCheck(){return this.object.check===CoC7Link.CHECK_TYPE.SANLOSS}get isEffect(){return this.object.check===CoC7Link.CHECK_TYPE.EFFECT}get isBlind(){return this.isCheck&&this.object.blind}}class CoC7Parser{static enrichHTML(content){const html=document.createElement("div");html.innerHTML=String(content);let text=[];text=TextEditor._getTextNodes(html);const rgx=new RegExp("@(coc7)\\.(check|effect|item|sanloss)\\[([^\\[\\]]*(?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\])*[^\\[\\]]*\\])*[^\\[\\]]*)\\](?:{([^}]+)})?","gi");return TextEditor._replaceTextContent(text,rgx,CoC7Link._createLink),html.innerHTML}static ParseSheetContent(app,html){for(const element of html.find("div.editor-content > *, p"))element.outerHTML.toLocaleLowerCase().includes("@coc7")&&(element.outerHTML=CoC7Parser.enrichHTML(element.outerHTML));CoC7Link.bindEventsHandler(html)}static ParseMessage(app,html,data){if(app.isContentVisible){if(data.message.content.toLocaleLowerCase().includes("@coc7")){const parsedContent=CoC7Parser.enrichHTML(data.message.content);html.find(".message-content").html(parsedContent),data.message.content=parsedContent}return!0}}}class CoC7Item extends Item{constructor(data,context){if(data.type in CONFIG.Item.documentClasses&&!context?.extended)return new CONFIG.Item.documentClasses[data.type](data,{extended:!0,...context});void 0===data.img&&("skill"===data.type?data.img="systems/CoC7/assets/icons/skills.svg":"status"===data.type?data.img="icons/svg/aura.svg":"weapon"===data.type&&(data.img="icons/svg/sword.svg")),super(data,context)}async _createDocumentLink(eventData,{relativeTo,label}={}){if("string"==typeof eventData.type&&"string"==typeof eventData.uuid&&"Item"===eventData.type&&eventData.uuid.match(/^Actor\./)&&relativeTo instanceof CONFIG.JournalEntryPage.documentClass){const item=await fromUuid(eventData.uuid);if(["skill","weapon"].includes(item.type))return"@coc7.check[type:"+item.type+",name:"+item.name+"]"}return super._createDocumentLink(eventData,{relativeTo,label})}static get iconLanguage(){return"systems/CoC7/assets/icons/skills/language.svg"}static get flags(){return{malfunction:"malfc"}}async toggleProperty(propertyId,override=!1){let fighting,firearms,checkedProps={};if(void 0!==COC7.eras[propertyId])return CoCIDEditor.eraToggle(this,propertyId);if("weapon"!==this.type||override){if("skill"===this.type&&!override){let modif=!1;if("combat"===propertyId&&(this.system.properties.combat?checkedProps={"system.properties.combat":!1,"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.specialization":"",name:this.system.skillName}:this.system.properties.firearm?firearms=!0:fighting=!0,modif=!0),"fighting"===propertyId&&(this.system.properties.fighting?(firearms=!0,fighting=!1):(firearms=!1,fighting=!0),modif=!0),"firearm"===propertyId&&(this.system.properties.firearm?(firearms=!1,fighting=!0):(firearms=!0,fighting=!1),modif=!0),modif){if(fighting){checkedProps={"system.properties.fighting":!0,"system.properties.firearm":!1,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.fightingSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}if(firearms){checkedProps={"system.properties.fighting":!1,"system.properties.firearm":!0,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.firearmSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}}}}else if("ahdb"===propertyId&&(checkedProps=this.system.properties.ahdb?{"system.properties.ahdb":!1}:{"system.properties.ahdb":!0,"system.properties.addb":!1}),"addb"===propertyId&&(checkedProps=this.system.properties.addb?{"system.properties.addb":!1}:{"system.properties.addb":!0,"system.properties.ahdb":!1}),"shotgun"===propertyId&&(checkedProps=this.system.properties.shotgun?{"system.properties.shotgun":!1,"system.range.extreme.value":null,"system.range.extreme.damage":null,"system.range.long.value":null,"system.range.long.damage":null}:{"system.properties.rngd":!0,"system.properties.melee":!1,"system.properties.shotgun":!0}),"melee"===propertyId||"rngd"===propertyId){let meleeWeapon;"melee"!==propertyId||this.system.properties.melee||(meleeWeapon=!0),"melee"===propertyId&&this.system.properties.melee&&(meleeWeapon=!1),"rngd"!==propertyId||this.system.properties.rngd||(meleeWeapon=!1),"rngd"===propertyId&&this.system.properties.rngd&&(meleeWeapon=!0),checkedProps=meleeWeapon?{"system.properties.melee":!0,"system.properties.rngd":!1,"system.properties.shotgun":!1,"system.properties.brst":!1,"system.properties.auto":!1,"system.properties.dbrl":!1}:{"system.properties.melee":!1,"system.properties.rngd":!0}}if("special"===propertyId&&(checkedProps=this.system.properties[propertyId]?{"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.combat":!1,"system.specialization":"",name:this.system.skillName}:{"system.properties.special":!0,name:this.system.specialization+" ("+this.system.skillName+")"}),Object.keys(checkedProps).length>0){return await this.update(checkedProps)}{const propName=`system.properties.${propertyId}`,propValue=!this.system.properties[propertyId];await this.update({[propName]:propValue}).then((item=>item))}}hasProperty(propertyId){return this.isIncludedInSet("properties",propertyId)}get shortName(){return this.system.properties.special?this.system.skillName:this.name}async updateRoll(roll){return"updateRoll"in this.sheet?await this.sheet.updateRoll(roll):"updateRoll"in this?await this.updateRoll(roll):void 0}static getNamePartsSpec(skillName,specialization){if(!specialization)return{name:skillName,specialization:"",skillName};const specNameRegex=new RegExp("^("+CoC7Utilities.quoteRegExp(specialization)+")\\s*\\((.+)\\)$","i"),match=skillName.match(specNameRegex);return match&&(specialization=match[1],skillName=match[2]),{name:specialization+" ("+skillName+")",specialization,skillName}}static getNameWithoutSpec(item){if(item instanceof CoC7Item){if(item.system?.properties?.special&&void 0!==item.system.skillName)return item.system.skillName}else if(item.properties?.special&&void 0!==item.skillName)return item.skillName;return item.name}static isAnySpec(item){return!("skill"!==item.type||!item.system.properties?.special)&&(!(!item.system.properties?.requiresname&&!item.system.properties?.picknameonly)||[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CONFIG.Item.documentClasses.skill.guessNameParts(item.name).skillName.toLowerCase()))}async checkSkillProperties(){if("skill"!==this.type)return;const checkedProps={};return this.system.properties.combat?(this.system.properties.special||(this.system.properties.special=!0,checkedProps["system.properties.special"]=!0),this.system.properties.fighting||this.system.properties.firearm||(this.system.properties.fighting=!0,checkedProps["system.properties.fighting"]=!0),!this.system.properties.fighting||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.fightingSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.fightingSpecializationName)),!this.system.properties.firearm||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.firearmSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.firearmSpecializationName))):(this.system.properties.fighting&&(this.system.properties.fighting=!1,checkedProps["system.properties.fighting"]=!1),this.system.properties.firearm&&(this.system.properties.firearm=!1,checkedProps["system.properties.firearm"]=!1)),Object.keys(checkedProps).length>0&&await this.update(checkedProps),checkedProps}isIncludedInSet(set,propertyId){this.system[set]||(this.system[set]=[]);return this.system[set].indexOf(propertyId)>-1}async flagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!0}))}async unflagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!1}))}get developementFlag(){return this.getItemFlag("developement")}async toggleItemFlag(flagName,eraseAdjustment=!0){const flagValue=!this.getItemFlag(flagName),name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||flagValue||!eraseAdjustment?"developement"===flagName?game.settings.get("CoC7","xpEnabled")||game.user.isGM?await this.update({[name]:flagValue}):ui.notifications.info(game.i18n.localize("CoC7.SkillXpGainDisabled")):await this.update({[name]:flagValue}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:flagValue})}async setItemFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetItemFlag(flagName,eraseAdjustment=!0){const name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||!eraseAdjustment?await this.update({[name]:!1}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:!1})}getItemFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}get usesAlternativeSkill(){return"weapon"===this.type&&(!0===this.system.properties?.auto||!0===this.system.properties?.brst||!0===this.system.properties?.thrown)}get maxUsesPerRound(){if("weapon"!==this.type)return null;const multiShot=parseInt(this.system.usesPerRound.max);return isNaN(multiShot)?0:multiShot}get usesPerRound(){if("weapon"!==this.type)return null;const singleShot=parseInt(this.system.usesPerRound.normal);return isNaN(singleShot)?0:singleShot}get usesPerRoundString(){let usesPerRound;return usesPerRound=this.system.usesPerRound.normal?this.system.usesPerRound.normal:"1",this.system.usesPerRound.max&&(usesPerRound+=`(${this.system.usesPerRound.max})`),this.system.properties.auto&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponAuto")}`),this.system.properties.brst&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponBrst")}`,this.system.usesPerRound.burst&&(usesPerRound+=`(${this.system.usesPerRound.burst})`)),usesPerRound}get multipleShots(){return"weapon"!==this.type?null:!(this.maxUsesPerRound<=1)}get singleShot(){return"weapon"!==this.type?null:!!this.usesPerRound}get baseRange(){return parseInt(this.system.range.normal.value)}get longRange(){return parseInt(this.system.range.long.value)}get extremeRange(){return parseInt(this.system.range.extreme.value)}get skillProperties(){if("skill"!==this.type)return[];const skillProperties=[];for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&skillProperties.push(game.i18n.localize(value));return skillProperties}static async calculateBase(actor,data){if("skill"!==data.type)return null;if(String(data.system.base).includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.actor.")&&(parsed[key.substring(1)]=getProperty(actor,value.substring(11)));let value;try{value=Math.floor(new Roll(data.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return value}return isNaN(parseInt(data.system.base))?null:parseInt(data.system.base)}get _base(){if("skill"!==this.type)return[null,!1];if("string"!=typeof this.system.base)return[this.system.base,!1];if(this.system.base.includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));let value;try{value=Math.floor(new Roll(this.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return[value,!0]}return[isNaN(parseInt(this.system.base))?null:parseInt(this.system.base),!1]}async asyncBase(){const e=this._base;return e[1]&&(console.info(`[COC7] (${this.parent?.name}) Evaluating skill ${this.name}:${this.system.base} to ${e[0]}`),await this.update({"system.base":e[0]})),e[0]}get base(){const e=this._base;return e[1]&&this.update({"system.base":e[0]}),e[0]}getBulletLeft(){return"weapon"!==this.type?null:this.system.ammo?this.system.ammo:(this.setBullets(0),0)}async reload(){if("weapon"!==this.type)return null;const maxBullet=this.system.bullets?parseInt(this.system.bullets):1;await this.setBullets(maxBullet)}async setBullets(bullets){if("weapon"!==this.type)return null;await this.update({"system.ammo":bullets||0})}async addBullet(){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft(),maxBullets=this.system.bullets?parseInt(this.system.bullets):1;bullets+1>=maxBullets?await this.setBullets(maxBullets):await this.setBullets(bullets+1)}async shootBullets(x){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft();x>bullets?await this.setBullets(0):await this.setBullets(bullets-x)}static mergeOptionalSkills(skillList,options){return skillList.concat(options).reduce(((newArray,item)=>!CoC7Item.isAnySpec(item)&&newArray.find((skill=>skill.name===item.name))?newArray:[...newArray,item]),[]).sort(CoC7Utilities.sortByNameKey)}static _getChatCardActor(card){const tokenKey=card.dataset.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}const actorId=card.dataset.actorId;return game.actors.get(actorId)||null}getChatData(htmlOptions={}){htmlOptions.async=!1;const data=duplicate(this.system);"string"==typeof data.description&&(data.description={value:data.description,special:""}),void 0===data.description.value&&(data.description.value=""),void 0===data.description.special&&(data.description.special="");const labels=[];data.description.value=TextEditor.enrichHTML(data.description.value,htmlOptions),data.description.value=CoC7Parser.enrichHTML(data.description.value),data.description.special=TextEditor.enrichHTML(data.description.special,htmlOptions),data.description.special=CoC7Parser.enrichHTML(data.description.special);const props=[],fn=this[`_${this.type}ChatData`];if(fn&&fn.bind(this)(data,labels,props,htmlOptions),"skill"===this.type)for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&props.push(value);return data.properties=props.filter((p=>!!p)),data.labels=labels,data}_weaponChatData(data,labels,props){for(const[key,value]of Object.entries(COC7.weaponProperties))!0===this.system.properties[key]&&props.push(value);let skillLabel=game.i18n.localize("CoC7.Skill"),skillName="",found=!1;if(this.system.skill.main.id){const skill=this.actor?.items.get(this.system.skill.main.id);skill&&(skillName+=CoC7Item.getNameWithoutSpec(skill),found=!0)}if(this.usesAlternativeSkill&&this.system.skill.alternativ.id){skillLabel=game.i18n.localize("CoC7.Skills");const skill=this.actor?.items.get(this.system.skill.alternativ.id);skill&&(skillName+=`/${CoC7Item.getNameWithoutSpec(skill)}`,found=!0)}found||(skillName=this.system.skill.main.name,this.usesAlternativeSkill&&this.system.skill.alternativ.name&&(skillName+=`/${this.system.skill.alternativ.name}`)),skillName&&labels.push({name:skillLabel,value:skillName}),labels.push({name:game.i18n.localize("CoC7.WeaponUsesPerRound"),value:this.usesPerRoundString}),labels.push({name:game.i18n.localize("CoC7.WeaponMalfunction"),value:this.system.malfunction?this.system.malfunction:"-"}),this.system.bullets&&labels.push({name:game.i18n.localize("CoC7.WeaponBulletsInMag"),value:this.system.bullets})}canBePushed(){return!("skill"!==this.type||!this.system.properties.push)}get impale(){return this.system.properties.impl}get isDodge(){return"skill"===this.type&&this.name.toLowerCase()===game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge").toLowerCase()}}class CoC7Check{constructor(actor=null,skill=null,item=null,diceMod=0,difficulty=null,flatThresholdModifier=0,flatDiceModifier=0){if(this.actor=actor,this.skill=skill,this.item=item,this.difficulty=difficulty,this.diceModifier=diceMod,this.rawValue=0,this.successLevel=null,this.referenceMessageId=null,this.pushing=!1,this.flatDiceModifier=flatDiceModifier,this.flatThresholdModifier=flatThresholdModifier,null===difficulty){const isUnknown="unknown"===game.settings.get("CoC7","defaultCheckDifficulty");this.difficulty=isUnknown?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular}}static get cardType(){return"rollCard"}static get difficultyLevel(){return{unknown:-1,regular:1,hard:2,extreme:3,critical:4,impossible:9}}static get successLevel(){return{fumble:-99,failure:0,regular:1,hard:2,extreme:3,critical:4}}static get type(){return{characteristic:"characteristic",attribute:"attribute",skill:"item",item:"item",value:"value"}}static difficultyString(difficultyLevel){switch(isNaN(Number(difficultyLevel))?difficultyLevel:Number(difficultyLevel)){case"?":return game.i18n.localize("CoC7.UnknownDifficulty");case"+":return game.i18n.localize("CoC7.HardDifficulty");case"++":return game.i18n.localize("CoC7.ExtremeDifficulty");case"+++":return game.i18n.localize("CoC7.CriticalDifficulty");case 0:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.localize("CoC7.UnknownDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.localize("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.extreme:return game.i18n.localize("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.localize("CoC7.CriticalDifficulty");default:return null}}get rawValue(){if(this._rawValue||(this.characteristic&&(this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.rawValue=this.skill.value),this.attribute&&(this.rawValue=this.actor.system.attribs[this.attribute].value)),this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this._rawValue+this.flatThresholdModifier<1?1:this._rawValue+this.flatThresholdModifier:this._rawValue}set rawValue(x){this._rawValue=x}set uuid(x){this._uuid=x}get uuid(){return this._uuid||(this._uuid=foundry.utils.randomID(16)),this._uuid}get hasCard(){return ui.chat.collection.filter((message=>this.uuid===message.getFlag("CoC7","uuid")&&CoC7Check.cardType===message.getFlag("CoC7","type"))).length>0}get rawValueString(){if(this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this.flatThresholdModifier<0?this._rawValue.toString()+this.flatThresholdModifier.toString():this._rawValue.toString()+"+"+this.flatThresholdModifier.toString():this._rawValue.toString()}get criticalThreshold(){return 1}get regularThreshold(){return this.rawValue?this.rawValue>=100?99:parseInt(this.rawValue):null}get hardThreshold(){return this.rawValue?Math.floor(this.rawValue/2):null}get extremeThreshold(){return this.rawValue?Math.floor(this.rawValue/5):null}get fumbleThreshold(){if(this.rawValue){if(this.difficulty){if(this.difficulty>=CoC7Check.difficultyLevel.extreme)return this.extremeThreshold<50?96:100;if(this.difficulty>=CoC7Check.difficultyLevel.hard)return this.hardThreshold<50?96:100}return this.rawValue<50?96:100}return null}get succesThreshold(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return this.extremeThreshold;case CoC7Check.difficultyLevel.hard:return this.hardThreshold;case CoC7Check.difficultyLevel.regular:return this.regularThreshold;case CoC7Check.difficultyLevel.critical:return this.criticalThreshold;case CoC7Check.difficultyLevel.unknown:return-1;default:return this.rawValue}return null}get difficultyString(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return game.i18n.format("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.format("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.format("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.format("CoC7.CriticalDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.format("CoC7.UnknownDifficulty");default:return""}return""}get modifiedResult(){if(!this.standby){if(void 0!==this._modifiedResult)return this._modifiedResult;if(this.flatDiceModifier){const modified=this.dices.total+this.flatDiceModifier;return modified<1?1:modified>100?100:modified}return this.dices.total}}set modifiedResult(x){this._modifiedResult=x}get flatDiceModifierString(){return this.flatDiceModifier?this.flatDiceModifier>0?`+${this.flatDiceModifier}`:this.flatDiceModifier.toString():null}get isFumble(){if(!this.standby&&!this.isSimpleRoll)return this.modifiedResult>=this.fumbleThreshold}get isCritical(){if(!this.standby)return 1===this.modifiedResult}get isExtremeSuccess(){if(!this.standby)return this.successLevel>=CoC7Check.successLevel.extreme}get passed(){if(!this.standby&&!this.isSimpleRoll)return this.luckSpent?this.difficulty<=this.successLevel:this.succesThreshold>=this.modifiedResult||this.isCritical}get failed(){if(!this.standby&&!this.isSimpleRoll)return!this.passed}get isSimpleRoll(){return void 0===this.rawValue}get hasBonus(){return!!(this.diceModifier&&this.diceModifier>0)}get hasPenalty(){return!!(this.diceModifier&&this.diceModifier<0)}get hasModifier(){return!(!this.diceModifier||0===this.diceModifier)}get diceModifier(){return this._diceModifier?this._diceModifier:null}set diceModifier(x){this._diceModifier=parseInt(x)}get name(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.label;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.Sanity")}}return null}get shortName(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.short;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.SAN")}}return null}get fullName(){const difficulty=this._difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(this._difficulty),modifier=this._diceModifier>0?`+${this._diceModifier}`:this._diceModifier.toString();return game.i18n.format(`CoC7.LinkCheck${difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier,name:this.name})}get rolled(){return!!this.dice}static getFromCard(card){const rollResult=card.classList.contains("roll-result")?card:card.querySelector(".roll-result"),check=new CoC7Check;CoC7Roll.getFromElement(rollResult,check);const message=card.closest(".message");return check.messageId=message?message.dataset.messageId:null,check}static async push(card,publish=!0){const oldCheck=CoC7Check.getFromCard(card),actorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId,skillId=card.dataset.skillId,charac=card.dataset.characteristic,itemId=card.dataset.itemId,diceMod=card.dataset.diceMod,difficulty=card.dataset.difficulty;let pushedRoll;if(skillId)pushedRoll=new CoC7Check(actorId,skillId,itemId,diceMod,difficulty);else{if(!charac)return;pushedRoll=new CoC7Check,pushedRoll.diceModifier=diceMod,pushedRoll.difficulty=difficulty,pushedRoll.actor=actorId,pushedRoll.characteristic=charac}oldCheck.uuid&&(pushedRoll.context=oldCheck.context,pushedRoll.uuid=oldCheck.uuid),oldCheck.parent&&(pushedRoll.parent=oldCheck.parent),pushedRoll.pushing=!0,await pushedRoll.roll(),publish&&pushedRoll.toMessage(!0,card)}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}set actor(x){if(this.actorKey=x,null!=x){if(x instanceof Actor)return this._actor=x,this._actor.alias=this.actor.name,void(x.token&&x.token.scene&&x.token.scene.id?this.actorKey=`${x.token.scene.id}.${x.token.id}`:this.actorKey=x.id);if(x.includes(".")){const[sceneId,tokenId]=x.split(".");if("TOKEN"===sceneId)this._actor=game.actors.tokens[tokenId],this._actor.alias=this._actor.name;else{const scene=game.scenes.get(sceneId);if(!scene)return;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return;const token=new Token(tokenData);this._actor=token.actor,this._actor.alias=token.name}}else this._actor=game.actors.get(x),this.actor.alias=this.actor.name}else this._actor=x}get successLevelIcons(){if(this.unknownDifficulty)return null;if(this.isSimpleRoll)return null;if(this.successLevel>=this.difficulty){const icons=[];for(let index=0;index<this.successLevel-this.difficulty+1;index++)icons.push(this.isCritical?"medal":"star");const successHint=game.i18n.format("CoC7.SuccesLevelHint",{value:this.successLevel-this.difficulty+1});return{success:!0,cssClass:this.isCritical?"critical":"success",hint:successHint,icons}}{const icons=[],successLevel=this.isFumble?-1:this.successLevel;for(let index=0;index<this.difficulty-successLevel;index++)icons.push(this.isFumble?"skull":"spider");const failureHint=game.i18n.format("CoC7.FailureLevelHint",{value:this.difficulty-successLevel});return{success:!1,cssClass:this.isFumble?"fumble":"failure",hint:failureHint,icons}}}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get unknownDifficulty(){return!(this.gmDifficultyCritical||this.gmDifficultyExtreme||this.gmDifficultyHard||this.gmDifficultyRegular)&&CoC7Check.difficultyLevel.unknown===this.difficulty}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}set skill(x){this._skill=this._getItemFromId(x),this.skillId=x}set item(x){this._item=this._getItemFromId(x),"weapon"===this._item?.type?this.itemId=x:(this._item=void 0,this.itemId=void 0)}_getItemFromId(x){return null==x?null:x instanceof Item?x:this._actor?this._actor.items.get(x):game.items.get(x)}get actor(){if(this._actor&&this._actor?.id){if("Object"===this._actor.constructor.name){const actor=new CoCActor(this._actor);this._actor=actor}}else if(this.actorKey&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this.actorId&&(this._actor=chatHelper.getActorFromKey(this.actorId)),!this._actor)return{isDummy:!0,name:this.actorName?this.actorName:void 0,id:void 0,img:"systems/CoC7/assets/icons/question-circle-regular.svg",portrait:"systems/CoC7/assets/icons/question-circle-regular.svg"};return this._actor}get skill(){return!this._skill&&this.skillId&&(this._skill=this.actor?.items.get(this.skillId)),!this._skill&&this.item&&this.item.system.skill&&(this.item.system.skill.main.id&&!this.weaponAltSkill?this._skill=this._actor.items.get(this.item.system.skill.main.id):this.item.system.skill.alternativ.id&&this.weaponAltSkill&&(this._skill=this._actor.items.get(this.item.system.skill.alternativ.id))),this._skill}get item(){return!this._item&&this.itemId&&this.actor&&(this._item=this.actor.items.get(this.itemId)),this._item}get displayResultType(){return game.settings.get("CoC7","displayResultType")}get displayCheckSuccessLevel(){return game.settings.get("CoC7","displayCheckSuccessLevel")}get displayBothSuccessLevel(){return this.displayResultType&&this.displayCheckSuccessLevel}get dontDisplaySuccessLevel(){return!this.displayResultType&&!this.displayCheckSuccessLevel}get image(){return this.skill?this.skill.img:this.item?this.item.img:void 0}get link(){return this.getLinkElement().outerHTML}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}getLinkElement(classes=null){const data={cls:["coc7-link","coc7-roll"].concat(classes),dataset:{check:"check"},icon:this.image?`<div style="background-image: url(${this.image})"></div>`:'<i class="fas fa-dice"></i>',blind:this.isBlind},difficulty=CoC7Check.difficultyString(this._difficulty),title=game.i18n.format(`CoC7.LinkCheck${this._difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier:this._diceModifier,name:this.name}),a=document.createElement("a");return a.title=title,a.classList.add(...data.cls),a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}${data.icon}${this.name}`,a}async roll(diceMod=null,difficulty=null,options={}){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.standby||await this._perform(options)}static createFromActorRollData(rollData){const roll={};switch(rollData.difficulty&&(roll.difficulty=rollData.difficulty),rollData.diceModifier&&(roll.diceModifier=rollData.diceModifier),!0===rollData.denyPush&&(roll.denyPush=!0),rollData.flatDiceModifier&&(roll.flatDiceModifier=rollData.flatDiceModifier),rollData.flatThresholdModifier&&(roll.flatThresholdModifier=rollData.flatThresholdModifier),rollData.actor?.actorKey?roll.actorKey=rollData.actor.actorKey:rollData.actor?.name&&(roll.actorName=rollData.actor.name),rollData.type){case CoC7Check.type.characteristic:roll.characteristic=rollData.value?.key;break;case CoC7Check.type.attribute:roll.attribute=rollData.value?.key;break;case CoC7Check.type.item:roll.actorKey=rollData.value.actor.actorKey,"skill"===rollData.value?.type?roll.skill=rollData.value.id:roll.item=rollData.value.id;break;case CoC7Check.type.skill:roll.actorKey=rollData.value.actor.actorKey,roll.skill=rollData.value.id;break;case CoC7Check.type.value:roll.displayName=rollData.value.name,roll.rawValue=rollData.value.threshold}return CoC7Check.create(roll)}static create({difficulty=CoC7Check.difficultyLevel.regular,diceModifier=null,actorKey=null,characteristic=null,attribute=null,rawValue=0,item=null,skill=null,flatDiceModifier=0,flatThresholdModifier=0,displayName=null,actorName=null,denyPush}={}){const check=new CoC7Check;return check.difficulty=difficulty,!0===denyPush&&(check.denyPush=!0),diceModifier&&(check.diceModifier=diceModifier),flatDiceModifier&&(check.flatDiceModifier=flatDiceModifier),flatThresholdModifier&&(check.flatThresholdModifier=flatThresholdModifier),displayName&&(check.displayName=displayName),actorKey&&(check.actor=actorKey),actorName&&(check.actorName=actorName),isNaN(Number(rawValue))||(check.rawValue=Number(rawValue)),check.actor&&!check.actor.isDummy&&(skill?check.skill=skill:characteristic?check.characteristic=characteristic:attribute?check.attribute=attribute:item&&(check.item=item)),check}async rollCharacteristic(char,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.characteristic=char,this.standby||await this._perform()}async rollAttribute(attrib,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.attribute=attrib,this.standby||await this._perform()}async rollValue(val,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.rawValue=val,this.standby||await this._perform()}get rolledSuccessLevel(){return this.successLevel}async _perform(options={}){this.dice=options.roll||await CoC7Dice.roll(this.diceModifier,this.rollMode,this.isBlind),options.silent||game.modules.get("dice-so-nice")?.active||AudioHelper.play({src:CONFIG.sounds.dice},!0),options.forceDSN&&await CoC7Dice.showRollDice3d(this.dice.roll),this.dices={tens:[],unit:{value:this.dice.unit.total},total:this.dice.total,tenResult:this.dice.total-this.dice.unit.total,hasBonus:!!this.diceModifier,bonus:Math.abs(this.diceModifier),bonusType:this.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus"),difficulty:this.difficulty};const max=0===this.dice.unit.total?100:90,min=0===this.dice.unit.total?10:0;let selected=this.dice.total-this.dice.unit.total;for(let i=0;i<this.dice.tens.results.length;i++){const die={};die.value=this.dice.tens.results[i],die.value===selected?(selected=101,die.selected=!0,this.dices.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck()}async computeCheck(){switch(this.isUnknown=this.unknownDifficulty,this.gmDifficultyRegular&&(this.difficulty=CoC7Check.difficultyLevel.regular),this.gmDifficultyHard&&(this.difficulty=CoC7Check.difficultyLevel.hard),this.gmDifficultyExtreme&&(this.difficulty=CoC7Check.difficultyLevel.extreme),this.gmDifficultyCritical&&(this.difficulty=CoC7Check.difficultyLevel.critical),this.tenOnlyOneDie=1===this.dices.tens.length,this.isValue=!1,this.isCharactiristic=!1,this.isSkill=!1,this.isItem=!1,this.isAttribute=!1,this.isSimpleRoll?(this.denyPush=!0,this.denyLuck=!0):null==this.actor?this.isValue=!0:(this.characteristic&&(this.isCharactiristic=!0,this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.isSkill=!0,this.rawValue=this.skill.value),this.attribute&&(this.isAttribute=!0,this.rawValue=this.actor.system.attribs[this.attribute].value)),this.luckSpent||this.isSimpleRoll||(this.modifiedResult<=this.rawValue&&(this.successLevel=CoC7Check.successLevel.regular),this.modifiedResult<=this.hardThreshold&&(this.successLevel=CoC7Check.successLevel.hard),this.modifiedResult<=this.extremeThreshold&&(this.successLevel=CoC7Check.successLevel.extreme),this.modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.fumbleThreshold<=this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.fumble)),this.successLevel){case CoC7Check.successLevel.regular:this.resultType=game.i18n.format("CoC7.RegularSuccess");break;case CoC7Check.successLevel.hard:this.resultType=game.i18n.format("CoC7.HardSuccess");break;case CoC7Check.successLevel.extreme:this.resultType=game.i18n.format("CoC7.ExtremeSuccess");break;case CoC7Check.successLevel.critical:this.resultType=game.i18n.format("CoC7.CriticalSuccess");break;case CoC7Check.successLevel.fumble:this.resultType=game.i18n.format("CoC7.Fumble");break;case CoC7Check.successLevel.failure:this.resultType=game.i18n.format("CoC7.Failure")}if(this.unknownDifficulty?this.successRequired="":this.isSimpleRoll||(this.successRequired=game.i18n.format("CoC7.SuccessRequired",{successRequired:this.difficultyString})),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.luckSpent||this.isUnknown||this.isSimpleRoll||(this.isFailure=this.failed,this.isSuccess=this.passed),this.hasMalfunction=!1,this.isFumble&&(this.successLevel=CoC7Check.successLevel.fumble),this.item&&(this.isItem=!0,this.item.system.malfunction&&Number(this.modifiedResult)>=Number(this.item.system.malfunction)&&(this.hasMalfunction=!0,this.malfunctionTxt=game.i18n.format("CoC7.Malfunction",{itemName:this.item.name}),await this.item.toggleItemFlag(CoC7Item.flags.malfunction))),void 0===this.canBePushed&&(this.canBePushed=!!this.skill&&this.skill.canBePushed(),null!=this.characteristic&&(this.canBePushed=!0),this.isFumble&&(this.canBePushed=!1),this.denyPush&&(this.canBePushed=!1)),!this.denyLuck&&this.actor){if(!(this.luckSpent||this.passed||this.isFumble||this.difficulty===CoC7Check.difficultyLevel.critical||this.unknownDifficulty)&&(this.skill||this.characteristic)){const luckNeeded=this.modifiedResult-this.succesThreshold;this.actor.luck>luckNeeded&&(this.hasEnoughLuck=!0,this.luckNeeded=luckNeeded,this.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:luckNeeded}))}if(!this.luckSpent&&(this.increaseSuccess=[],!this.pushing&&"lck"!==this.attribute&&"san"!==this.attribute)){if(this.unknownDifficulty&&this.modifiedResult>this.regularThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.RegularDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.regular,nextLevel.luckToSpend=this.modifiedResult-this.regularThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.regular&&this.modifiedResult>this.hardThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.HardDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.hard,nextLevel.luckToSpend=this.modifiedResult-this.hardThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.hard&&this.modifiedResult>this.extremeThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.ExtremeDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.extreme,nextLevel.luckToSpend=this.modifiedResult-this.extremeThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}}this.canIncreaseSuccess=this.increaseSuccess.length>0,this.isFumble&&(this.canIncreaseSuccess=!1)}if(this.canAwardExperience=this.skill&&!this.skill.system.properties.noxpgain,!(this.passed&&this.diceModifier<=0&&this.skill)||this.skill.system.properties.noxpgain||this.luckSpent||this.forced||this.isBlind||this.isUnknown||this.flagForDevelopement(),this.parent){const parent=await fromUuid(this.parent);parent&&"updateRoll"in parent&&await parent.updateRoll(this.JSONRollString)}}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}get cssClass(){let cssClass="";return this.isSuccess&&(cssClass="success"),this.isFailure&&(cssClass="failure"),this.isCritical&&!this.isFailure&&(cssClass="success critical"),this.isFumble&&!this.isSuccess&&(cssClass="failure fumble"),CoC7Check.successLevel.regular===this.successLevel&&(cssClass+=" regular-success"),CoC7Check.successLevel.hard===this.successLevel&&(cssClass+=" hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&(cssClass+=" extreme-success"),cssClass}get cssClassList(){const cssClass=[];return this.isSuccess&&cssClass.push("success"),this.isFailure&&cssClass.push("failure"),this.isCritical&&!this.isFailure&&cssClass.push("success","critical"),this.isFumble&&!this.isSuccess&&cssClass.push("failure","fumble"),CoC7Check.successLevel.regular===this.successLevel&&cssClass.push("regular-success"),CoC7Check.successLevel.hard===this.successLevel&&cssClass.push("hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&cssClass.push("extreme-success"),cssClass}get playerCssClass(){return this.isSuccess||this.forcedSuccess?"success":this.isFailure||this.forcedFailure?"failure":null}async upgradeCheck(upgradeindex,update=!0){const increasedSuccess=this.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount)||parseInt(increasedSuccess.luckToSpend);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:this.actor.name}));this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel)||parseInt(increasedSuccess.difficulty);this.successLevel=newSuccessLevel,this.difficulty<=newSuccessLevel&&(this.isSuccess=!0,this.isFailure=!1);for(let index=0;index<upgradeindex+1;index++)this.increaseSuccess.shift();for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;return this.luckSpent=!0,this.computeCheck(),update?await this.updateChatCard():void 0}removeUpgrades(){this.canIncreaseSuccess=!1,this.increaseSuccess=[],this.luckNeeded=0,this.luckNeededTxt=null,this.canBePushed=!1}forcePass(luckAmount=null,update=!0){if(luckAmount){this.actor.spendLuck(luckAmount),this.successLevel=this.difficulty;for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;this.luckSpent=!0,this.isSuccess=!0,this.isFailure=!1,this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount),this.computeCheck(),update&&this.updateChatCard()}else this.forced=!0,this.forcedSuccess=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.regular,update):this.forceSuccessLevel(this.difficulty,update)}forceFail(update=!0){this.forced=!0,this.forcedFailure=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.failure,update):this.forceSuccessLevel(this.difficulty-1,update)}_forceCheck(high,low,update=!0){let total=Math.floor(Math.random()*(high-low))+low+1;const unitTotal=total%10;let tenTotal=Math.floor(total/10);const tens=[];let hasEnough=Math.abs(this.diceModifier)===tens.length;for(;!hasEnough;){let ten=Math.floor(10*Math.random()),roll=10*ten+unitTotal;0===roll&&(roll=100,ten=100),this.hasPenalty&&roll<=high&&(tens.push(ten),roll>total&&(total=roll)),this.hasBonus&&roll>low&&(tens.push(ten),roll<total&&(total=roll)),hasEnough=tens.length===Math.abs(this.diceModifier)}10===tenTotal&&0===unitTotal&&(tenTotal=100),tens.splice(Math.floor(Math.random()*tens.length+1),0,10===tenTotal?0:tenTotal),this.dices.tens=[],this.dices.unit.value=unitTotal,this.modifiedResult=total,this.dices.total=total,this.dices.tenResult=total-unitTotal;const max=0===unitTotal?100:90,min=0===unitTotal?10:0;let selected=total-unitTotal;for(let i=0;i<tens.length;i++){const die={};die.value=tens[i],die.value===selected?(selected=101,die.selected=!0,this.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck(),update&&this.updateChatCard()}forceSuccessLevel(successLevel,update=!0){let high,low;CoC7Check.successLevel.fumble===successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.failure===successLevel&&(high=this.regularThreshold===this.fumbleThreshold-1?100:this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.regular===successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.hard===successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.extreme===successLevel&&(high=this.extremeThreshold,low=1),CoC7Check.successLevel.critical===successLevel&&(high=1,low=0),high===low&&low--,0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}increaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.fumble===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold===this.fumbleThreshold-1?this.hardThreshold:this.regularThreshold),CoC7Check.successLevel.failure===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.regular===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.extremeThreshold,low=this.criticalThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.criticalThreshold,low=0),high===low&&low--,this._forceCheck(high,low,update)}decreaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.failure===this.successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.regular===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.critical===this.successLevel&&(high=this.extremeThreshold,low=1),0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}async flagForDevelopement(){this.flaggedForDevelopment=!0,this.skill&&await this.skill.flagForDevelopement()}set difficulty(x){this._difficulty=parseInt(x)}get difficulty(){return this._difficulty}set flavor(x){this._flavor=x}set context(x){this._context=x}get context(){if(this._context)return this._context}set parent(x){this.uuid||(this.uuid=foundry.utils.randomID(16)),this.parentUuid=x}get parent(){if(this.parentUuid)return this.parentUuid}get flavor(){if(this._flavor)return this._flavor;let flavor="";return this.actor?.system&&(this.skill?flavor=game.i18n.format("CoC7.CheckResult",{name:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.item?flavor=game.i18n.format("CoC7.ItemCheckResult",{item:this.item.name,skill:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.characteristic?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(this.actor.system.characteristics[this.characteristic].label),value:this.rawValueString,difficulty:this.difficultyString}):this.attribute?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`),value:this.rawValueString,difficulty:this.difficultyString}):this.displayName&&(flavor=game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}))),flavor||this.rawValue&&(flavor=this.displayName?game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}):game.i18n.format("CoC7.CheckRawValue",{rawvalue:this.rawValue,difficulty:this.difficultyString})),this.pushing&&(flavor=`${game.i18n.format("CoC7.Pushing")} ${flavor}`),flavor}get tooltipHeader(){return this.attribute?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`)})+` (${this.actor.system.attribs[this.attribute].value}%)`:this.characteristic?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.localize(this.actor.system.characteristics[this.characteristic].label)})+` (${this.actor.system.characteristics[this.characteristic].value}%)`:this.skill?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.skill.name})+` (${this.skill.value}%)`:this.displayName?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.displayName})+` (${this.rawValueString}%)`:null}async getHtmlRollElement(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;const html=await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this);return html?$.parseHTML(html)[0]:null}async getHtmlRoll(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;return await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this)||void 0}async toMessage(pushing=!1){this.pushing=pushing;const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this),speakerData={};let speaker;this.actor?(this.actor.isToken?speakerData.token=this.token.document:this.actor.isDummy?this.actor.name&&(speaker={alias:this.actor.name}):speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor?.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:html,flags:{CoC7:{type:CoC7Check.cardType}}};if(this.uuid&&(chatData.flags.CoC7.uuid=this.uuid),this.context&&(chatData.flags.CoC7.context=this.context),"selfroll"===this.rollMode)if(game.user.isGM){if(chatData.user=game.user.id,chatData.flavor=`[${this.actor.name}] ${chatData.flavor}`,chatData.flags={CoC7:{GMSelfRoll:!0}},void 0!==chatData.speaker&&(chatData.flags.CoC7.originalSpeaker=duplicate(chatData.speaker)),game.user.isGM)switch(game.settings.get("CoC7","selfRollWhisperTarget")){case"owners":delete chatData.speaker,chatData.whisper=this.actor.owners,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;case"everyone":delete chatData.speaker,chatData.whisper=game.users.players,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;default:ChatMessage.applyRollMode(chatData,this.rollMode)}}else ChatMessage.applyRollMode(chatData,this.rollMode);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),this.dice?.roll&&!this.dice?.hideDice&&(chatData.roll=this.dice.roll,chatData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,chatData.rollMode=this.isBlind?"blindroll":this.rollMode),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({makePublic=!1,forceRoll=!1}={}){makePublic&&(this.rollMode=!1);const chatData={flavor:this.flavor};makePublic&&(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData)),chatData.blind&&(this.isBlind=!0);const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this);let newContent=html;if(!this.messageId)return $.parseHTML(html)[0];const message=game.messages.get(this.messageId),htmlMessage=$.parseHTML(message.content)[0];if(!htmlMessage.classList.contains("roll-result")){const htmlCheck=$.parseHTML(html)[0],rollResultElement=htmlMessage.querySelector(".roll-result");null!==rollResultElement&&rollResultElement.replaceWith(htmlCheck),newContent=htmlMessage.outerHTML}chatData.content=newContent,CONST.CHAT_MESSAGE_TYPES.ROLL===message.type&&(message.whisper?.length?chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER:chatData.type=CONST.CHAT_MESSAGE_TYPES.OTHER),forceRoll&&this.dice?.roll&&(game.user.isGM||!this.isBlind)&&await CoC7Dice.showRollDice3d(this.dice.roll);const msg=await message.update(chatData);return await ui.chat.updateMessage(msg,!1),msg}static async updateCardSwitch(event){const card=event.currentTarget.closest(".chat-card"),check=await CoC7Check.getFromCard(card);check.gmDifficultyRegular=!1,check.gmDifficultyHard=!1,check.gmDifficultyExtreme=!1,check.gmDifficultyCritical=!1,"gmDifficultyRegular"===event.currentTarget.dataset.flag&&(check.gmDifficultyRegular=!0),"gmDifficultyHard"===event.currentTarget.dataset.flag&&(check.gmDifficultyHard=!0),"gmDifficultyExtreme"===event.currentTarget.dataset.flag&&(check.gmDifficultyExtreme=!0),"gmDifficultyCritical"===event.currentTarget.dataset.flag&&(check.gmDifficultyCritical=!0),check.computeCheck(),check.updateChatCard()}get tooltip(){return renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",this)}get inlineCheck(){const a=document.createElement("a");return a.classList.add("coc7-inline-check"),a.classList.add("coc7-check-result"),a.classList.add("coc7-inline"),a.classList.add(...this.cssClassList),a.title=this.tooltipHeader,a.dataset.roll=escape(this.JSONRollString),a.innerHTML=`<i class="game-icon game-icon-d10"></i> ${this.modifiedResult||"??"}`,a}get rollToolTip(){if(this.standby)return;const parts=[],tens=this.dices.tens.map((r=>({result:r.value,selected:r.selected,classes:["die","d10",r.selected?null:"discarded",r.isMin?"min":null,r.isMax?"max":null].filter((c=>c)).join(" ")}))),unit=[{result:this.dices.unit.value,selected:!0,classes:"die d10"}];return parts.push({formula:this.tooltipHeader,total:this.modifiedResult,icons:this.successLevelIcons,class:this.cssClass,successRequired:this.successRequired,resultType:this.resultType,face:10,rolls:[...tens,...unit]}),renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",{parts})}get JSONRollData(){return JSON.parse(this.JSONRollString)}get JSONRollString(){return JSON.stringify(this,((key,value)=>{if(null===value)return;return["_actor","_skill","_item"].includes(key)?void 0:value}))}static fromData(data){return Object.assign(new CoC7Check,data)}static fromRollString(dataString){let data;try{data=JSON.parse(unescape(dataString))}catch(err){return ui.notifications.error(err.message),null}return CoC7Check.fromData(data)}static async alter(check,command,options={}){switch(command){case"useLuck":if(options.target.classList.contains("pass-check")){const luckAmount=parseInt(options.target.dataset.luckAmount);check.forcePass(luckAmount,options.update)}else{const upgradeIndex=parseInt(options.target.dataset.index);await check.upgradeCheck(upgradeIndex,options.update)}break;case"force-pass":check.forcePass(null,options.update);break;case"force-fail":check.forceFail(options.update);break;case"increase-success-level":check.increaseSuccessLevel(options.update);break;case"decrease-success-level":check.decreaseSuccessLevel(options.update);break;case"reveal-check":check.isBlind=!1,check.rollMode=!1,check.computeCheck(),options.update&&check.updateChatCard();break;case"flag-for-development":await check.flagForDevelopement(),check.computeCheck(),options.update&&check.updateChatCard();break;case"push":await check._perform(),check.pushing=!0,options.update&&check.updateChatCard()}}static async _onClickInlineRoll(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("coc7-check-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _collapseInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(!a.classList.contains("expanded"))return;const tooltip=a.querySelector(".coc7-check-tooltip");return tooltip&&tooltip.remove(),a.classList.remove("expanded")}static async _expandInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(a.classList.contains("expanded"))return;const check=Object.assign(new CoC7Check,JSON.parse(unescape(a.dataset.roll)));if(check.standby)return;const tip=document.createElement("div");tip.innerHTML=await check.rollToolTip;const tooltip=tip.children[0];a.appendChild(tooltip),a.classList.add("expanded");const pa=a.getBoundingClientRect(),pt=tooltip.getBoundingClientRect();tooltip.style.left=`${Math.min(pa.x,window.innerWidth-(pt.width+3))}px`,tooltip.style.top=`${Math.min(pa.y+pa.height+3,window.innerHeight-(pt.height+3))}px`;const zi=getComputedStyle(a).zIndex;tooltip.style.zIndex=Number.isNumeric(zi)?zi+1:100}}class CoC7Utilities{static isFormula(x){return"string"==typeof x&&(!!isNaN(Number(x))&&Roll.validate(x))}static ParseChatEntry(html,content){const terms=content.match(/(\S+)/g);if(terms[0]?.toLowerCase().match(/^\/r(oll)?$/)&&terms[1]?.toLowerCase().startsWith("1d%"))return setTimeout((function(){CoC7Utilities._ExecCommand(content)}),200),!1}static async _ExecCommand(content){const options=content.toLowerCase().split(" ")?.join("")?.replace(/\/r(oll)?1d%/,""),check=new CoC7Check;if(options.length){let threshold,flatDiceModifier,flatThresholdModifier,escaped=options,difficulty=CoC7Check.difficultyLevel.regular,diceModifier=0,ask=!1;const thresholdStr=escaped.match(/[^(]+(?=\))/);if(thresholdStr&&thresholdStr.length){threshold=Number(thresholdStr[0]);for(const match of thresholdStr)escaped=escaped.replace(`(${match})`,"")}const difficultyStr=escaped.match(/[^[]+(?=\])/);if(difficultyStr&&difficultyStr.length){difficulty=CoC7Utilities.convertDifficulty(difficultyStr[0]);for(const match of difficultyStr)escaped=escaped.replace(`[${match}]`,"")}if(escaped.includes("?")&&(ask=!0,escaped=escaped.replace("?","")),isNaN(Number(escaped))||(diceModifier=Number(escaped)),ask){const dialogOptions={threshold,modifier:diceModifier,difficulty,askValue:!0},usage=await RollDialog.create(dialogOptions);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold"))||threshold,flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,threshold&&(check.rawValue=isNaN(threshold)?void 0:threshold)}const speaker=ChatMessage.getSpeaker();if(speaker.token&&speaker.scene){const actor=chatHelper.getActorFromKey(`${speaker.scene}.${speaker.token}`);actor&&(check.actor=actor)}else if(speaker.actor){const actor=game.actors.get(speaker.actor);actor&&(check.actor=actor)}await check.roll(),check.toMessage()}static async test(){ui.notifications.infos("Do some stuff")}static getActorFromString(actorString){let actor;return game.actors.tokens[actorString]?game.actors.tokens[actorString]:(actor=game.actors.get(actorString),actor||(actor=Object.values(game.actors.tokens).find((t=>t.name.toLowerCase()===actorString.toLowerCase())),actor||(actor=game.actors.find((a=>a.name.toLowerCase()===actorString.toLowerCase()))),actor||null))}static getCharacteristicNames(char){const charKey=char.toLowerCase();switch(charKey){case"str":return{short:game.i18n.localize("CHARAC.STR"),label:game.i18n.localize("CHARAC.Strength")};case"con":return{short:game.i18n.localize("CHARAC.CON"),label:game.i18n.localize("CHARAC.Constitution")};case"siz":return{short:game.i18n.localize("CHARAC.SIZ"),label:game.i18n.localize("CHARAC.Size")};case"dex":return{short:game.i18n.localize("CHARAC.DEX"),label:game.i18n.localize("CHARAC.Dexterity")};case"app":return{short:game.i18n.localize("CHARAC.APP"),label:game.i18n.localize("CHARAC.Appearance")};case"int":return{short:game.i18n.localize("CHARAC.INT"),label:game.i18n.localize("CHARAC.Intelligence")};case"pow":return{short:game.i18n.localize("CHARAC.POW"),label:game.i18n.localize("CHARAC.Power")};case"edu":return{short:game.i18n.localize("CHARAC.EDU"),label:game.i18n.localize("CHARAC.Education")};case"luck":return{short:game.i18n.localize("CoC7.Luck"),label:game.i18n.localize("CoC7.Luck")};default:for(const[,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))if(charKey===game.i18n.localize(value.short).toLowerCase())return{short:game.i18n.localize(value.short),label:game.i18n.localize(value.label)};return null}}static convertDifficulty(difficulty){if("0"===String(difficulty))return CoC7Check.difficultyLevel.regular;if("string"!=typeof difficulty)return difficulty;if(!isNaN(Number(difficulty)))return Number(difficulty);switch(difficulty){case"?":return CoC7Check.difficultyLevel.unknown;case"+":return CoC7Check.difficultyLevel.hard;case"++":return CoC7Check.difficultyLevel.extreme;case"+++":return CoC7Check.difficultyLevel.critical;default:return CoC7Check.difficultyLevel.regular}}static skillCheckMacro(skill,event,options={}){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;speaker.token&&(actor=game.actors.tokens[speaker.token]),actor||(actor=game.actors.get(speaker.actor)),actor?actor.skillCheck(skill,event.shiftKey,options):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static weaponCheckMacro(weapon,event){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;if(speaker.token&&(actor=game.actors.tokens[speaker.token]),!actor)if(speaker.scene&&speaker.token){const baseActor=game.actors.get(speaker.actor),token=game.scenes.get(speaker.scene).tokens.get(speaker.token);actor=new(getDocumentClass("Actor"))(baseActor.toJSON(),{parent:token})}else actor=game.actors.get(speaker.actor);actor?actor.weaponCheck(weapon,event.shiftKey):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static async checkMacro(threshold=void 0,event=null){await CoC7Utilities.rollDice(event,{threshold})}static createMacro(bar,data,slot){if("Item"!==data.type)return;const item=fromUuidSync(data.uuid,bar);if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));if("weapon"!==item.type&&"skill"!==item.type)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroIncorrectType"));let command="";if("weapon"===item.type&&(command=`game.CoC7.macros.weaponCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`),"skill"===item.type){if(CoC7Item.isAnySpec(item))return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoGlobalSpec"));command=`game.CoC7.macros.skillCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`}if(""!==command){const macro=game.macros.contents.find((m=>m.name===item.name&&m.command===command));return macro?(game.user.assignHotbarMacro(macro,slot),!1):(Macro.create(duplicate({name:item.name,type:"script",img:item.img,command})).then((macro=>{game.user.assignHotbarMacro(macro,slot)})),!1)}return!0}static async toggleDevPhase(toggle){await game.settings.set("CoC7","developmentEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async toggleCharCreation(toggle){await game.settings.set("CoC7","charCreationEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets(),Hooks.call("toggleCharCreation",toggle)}static async getTarget(){const users=game.users.filter((user=>user.active)),actors=game.actors;let checkOptions=`<input type="checkbox" name="COCCheckAllPC" id="COCCheckAllPC">\n\n    <label for="COCCheckAllPC">${game.i18n.localize("CoC7.allActors")}</label>`;const playerTokenIds=users.map((u=>u.character?.id)).filter((id=>void 0!==id)),selectedPlayerIds=canvas.tokens.controlled.map((token=>token.actor.id));actors.forEach((actor=>{const checked=(selectedPlayerIds.includes(actor.id)||playerTokenIds.includes(actor.id))&&"checked";checkOptions+=`\n     <br>\n     <input type="checkbox" name="${actor.id}" id="${actor.id}" value="${actor.name}" ${checked}>\n\n     <label for="${actor.id}">${actor.name}</label>\n       `})),new Dialog({title:`${game.i18n.localize("CoC7.dreaming")}`,content:`${game.i18n.localize("CoC7.restTargets")}: ${checkOptions} <br>`,buttons:{whisper:{label:`${game.i18n.localize("CoC7.startRest")}`,callback:async html=>{const targets=[];let all=!1;const users=html.find('[type="checkbox"]');for(const user of users)"COCCheckAllPC"===user.name&&user.checked&&(all=!0),(user.checked||all)&&targets.push(user.id);await CoC7Utilities.startRest(targets)}}}}).render(!0)}static async startRest(targets){if(!targets.length)return;const actors=game.actors.filter((actor=>targets.includes(actor.id)));let chatContent=`<i>${game.i18n.localize("CoC7.dreaming")}...</i><br>`;for(const actor of actors)if(["character","npc","creature"].includes(actor.type)){let quickHealer=!1;for(const item of actor.items)"talent"===item.type&&item.name===`${game.i18n.localize("CoC7.quickHealer")}`&&(quickHealer=!0);const isCriticalWounds=!game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")&&actor.hasConditionStatus(COC7.status.criticalWounds),dailySanityLoss=actor.system.attribs.san.dailyLoss,hpValue=actor.system.attribs.hp.value,hpMax=actor.system.attribs.hp.max,mpValue=actor.system.attribs.mp.value,mpMax=actor.system.attribs.mp.max,pow=actor.system.characteristics.pow.value;if(chatContent+=`<br><b>${actor.name}. </b>`,hpValue<hpMax)if(!0===isCriticalWounds)chatContent+=`<b style="color:darkred">${game.i18n.localize("CoC7.hasCriticalWounds")}. </b>`;else{let healAmount=1;game.settings.get("CoC7","pulpRuleFasterRecovery")&&(healAmount=2),!0===quickHealer&&healAmount++,healAmount=Math.min(healAmount,hpMax-hpValue),chatContent+=1===healAmount?`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.healthRecovered")}. </b>`:`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:healAmount})}. </b>`,actor.update({"system.attribs.hp.value":actor.system.attribs.hp.value+healAmount})}dailySanityLoss>0&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.dailySanLossRestarted")}.</b>`,actor.update({"system.attribs.san.dailyLoss":0,"system.attribs.san.dailyLimit":Math.floor(actor.system.attribs.san.value/5)}));const hours=7;if(hours>0&&mpValue<mpMax){let magicAmount=hours*Math.ceil(pow/100);magicAmount=Math.min(magicAmount,mpMax-mpValue),chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.magicPointsRecovered")}: ${magicAmount}.</b>`,actor.update({"system.attribs.mp.value":actor.system.attribs.mp.value+magicAmount})}}const chatData={user:game.user.id,speaker:ChatMessage.getSpeaker(),content:chatContent,type:CONST.CHAT_MESSAGE_TYPES.OTHER};ChatMessage.create(chatData)}static async toggleXPGain(toggle){await game.settings.set("CoC7","xpEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled"))}static async rollDice(event,options={}){let diceModifier,difficulty,flatDiceModifier,flatThresholdModifier;options.askValue=!options.threshold;let threshold=options.threshold;if(void 0!==options.modifier&&(diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!event?.shiftKey&&!options.fastForward){const usage=await RollDialog.create(options);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const actors=[];if(game.user.isGM&&canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)actors.push(token.actor.tokenKey);else game.user.character&&actors.push(game.user.character.tokenKey);for(const tk of actors){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tk,await check.roll(),check.toMessage()}if(!actors.length){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,await check.roll(),check.toMessage()}}static updateCharSheets(){if(game.user.isGM)for(const a of game.actors.contents)"character"===a?.type&&a?.sheet&&a?.sheet?.rendered&&(a.update({"system.flags.locked":!0}),a.render(!1));else for(const a of game.actors.contents)a.isOwner&&(a.update({"system.flags.locked":!0}),a.render(!1))}static async getDataFromDropEvent(event,entityType="Item"){if(event.originalEvent)return[];try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if("Folder"===dataList.type&&dataList.documentName===entityType){const folder=await fromUuid(dataList.uuid);return folder?folder.contents:[]}if(dataList.type===entityType){const item=await fromUuid(dataList.uuid);return item?[item]:[]}return[]}catch(err){return[]}}static async copyToClipboard(text){try{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(text);{const textArea=document.createElement("textarea");return textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999px",textArea.style.top="-999px",document.body.appendChild(textArea),textArea.focus(),textArea.select(),new Promise(((resolve,reject)=>{document.execCommand("copy")?resolve():reject(new Error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))),textArea.remove()})).catch((err=>ui.notifications.error(err)))}}catch(err){ui.notifications.error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))}}static quoteRegExp(string){const len=string.length;let qString="";for(let current,i=0;i<len;++i)if(current=string.charAt(i),current>=" "&&current<="~")"\\"!==current&&"'"!==current||(qString+="\\"),qString+=current.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");else switch(current){case"\b":qString+="\\b";break;case"\f":qString+="\\f";break;case"\n":qString+="\\n";break;case"\r":qString+="\\r";break;case"\t":qString+="\\t";break;case"\v":qString+="\\v";break;default:qString+="\\u",current=current.charCodeAt(0).toString(16);for(let j=4;--j>=current.length;qString+="0");qString+=current}return qString}static setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}static getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}static SfromUuid(uuid){let doc,parts=uuid.split(".");if("Compendium"===parts[0])return null;{const[docName,docId]=parts.slice(0,2);parts=parts.slice(2);doc=CONFIG[docName].collection.instance.get(docId)}for(;doc&&parts.length>1;){const[embeddedName,embeddedId]=parts.slice(0,2);doc=doc.getEmbeddedDocument(embeddedName,embeddedId),parts=parts.slice(2)}return doc||null}static isDocumentUuidPack(uuid){return!!uuid.includes("Compendium")}static isDocumentUuid(uuid){const identifiers=["Actor","Scene","Token","Item","Compendium"];for(let i=0;i<identifiers.length;i++)if(uuid.includes(identifiers[i]))return!0;return!1}static getActorDocumentFromDropData(dropData){let docUuid,actor;return docUuid=dropData.tokenUuid?dropData.tokenUuid:void 0!==dropData.uuid?dropData.uuid:dropData.sceneId&&dropData.tokenId?`Scene.${dropData.sceneId}.Token.${dropData.tokenId}`:dropData.actorId||dropData.actorKey||dropData.id,"Token"===dropData.type?docUuid=dropData.uuid:docUuid&&(actor=CoC7Utilities.getActorFromKey(docUuid),actor||"Item"!==dropData.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid),docUuid}static getDocumentFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=duplicate(scene)),token}return game.actors.get(key)||null}static getActorFromKey(key){const doc=CoC7Utilities.getDocumentFromKey(key);return doc?doc.actor?doc.actor:"CoCActor"===doc.constructor?.name?doc:null:null}static async createImportCharactersFolderIfNotExists(){let folderName=game.i18n.localize("CoC7.ImportedCharactersFolder");"CoC7.ImportedCharactersFolder"===folderName&&(folderName="Imported characters");let importedCharactersFolder=game.folders.find((entry=>entry.name===folderName&&"Actor"===entry.type));return null==importedCharactersFolder&&(importedCharactersFolder=await Folder.create({name:folderName,type:"Actor",parent:null}),ui.notifications.info(game.i18n.localize("CoC7.CreatedImportedCharactersFolder"))),importedCharactersFolder}static async guessItem(type,name,{combat=null,source="",fallbackAny=!1}={}){let existing=null;name=name.toLocaleLowerCase();for(let o=0,oM=source.length;o<oM;o++)switch(source.substring(o,o+1)){case"i":if(existing=game.items.find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing;break;case"w":case"m":case"s":for(const pack of game.packs)if("Item"===pack.metadata.type&&("w"===source[o]&&"world"===pack.metadata.package||"S"===source[o]&&"CoC7"===pack.metadata.package||"s"===source[o]&&!["world","CoC7"].includes(pack.metadata.package))){if(existing=(await pack.getDocuments()).find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing}}if(fallbackAny&&"skill"===type){const match=name.match(/^(.+ \()(?!any).+(\))$/);if(match)return await CoC7Utilities.guessItem(type,match[1]+"any"+match[2],{combat,source})}}static toKebabCase(s){if(!s)return"";const match=s.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);return match?match.join("-").toLowerCase():""}static sortByNameKey(a,b){return a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase().localeCompare(b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase())}}class CoCIDEditor extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-editor.hbs",width:900,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!0,submitOnChange:!0})}async getData(){const sheetData=super.getData();sheetData.supportedLanguages=CONFIG.supportedLanguages,this.options.editable=this.object.sheet.isEditable,sheetData.guessCode=game.system.api.cocid.guessId(this.object),sheetData.idPrefix=game.system.api.cocid.getPrefix(this.object),sheetData.cocidFlag=this.object.flags?.CoC7?.cocidFlag,sheetData.id=sheetData.cocidFlag?.id||"",sheetData.lang=sheetData.cocidFlag?.lang||game.i18n.lang,sheetData.priority=sheetData.cocidFlag?.priority||0,sheetData.eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData.eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(sheetData.cocidFlag?.eras??{})[key]});sheetData.eras.sort(CoC7Utilities.sortByNameKey);const CoCIDKeys=flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys??{}),prefix=new RegExp("^"+CoC7Utilities.quoteRegExp(sheetData.idPrefix));sheetData.existingKeys=Object.keys(CoCIDKeys).reduce(((obj,k)=>(k.match(prefix)&&obj.push({k,name:CoCIDKeys[k]}),obj)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.isSystemID=void 0!==CoCIDKeys[sheetData.id];const match=sheetData.id.match(/^([^\\.]+)\.([^\\.]*)\.(.+)/);if(sheetData._existing=match&&void 0!==match[3]?match[3]:"",sheetData.id&&sheetData.lang){const worldDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"world"}),usedEras={},uniqueWorldPriority={};sheetData.worldDocumentInfo=worldDocuments.map((d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueWorldPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:TextEditor.enrichHTML(d.link,{async:!1}),folder:d?.folder?.name}})),Object.entries(uniqueWorldPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateWorldPriority=!0),sheetData.worldDuplicates=worldDocuments.length??0;const compendiumDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"compendiums"}),uniqueCompendiumPriority={};sheetData.compendiumDocumentInfo=compendiumDocuments.map((d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueCompendiumPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:TextEditor.enrichHTML(d.link,{async:!1}),folder:d?.folder?.name??""}})),Object.entries(uniqueCompendiumPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateCompendiumPriority=!0),sheetData.compendiumDuplicates=compendiumDocuments.length??0,sheetData.usedEras=[];for(const[key,value]of Object.entries(usedEras))sheetData.usedEras.push({id:key,name:game.i18n.localize(value)});sheetData.usedEras.sort(CoC7Utilities.sortByNameKey)}else sheetData.compendiumDocumentInfo=[],sheetData.worldDocumentInfo=[],sheetData.worldDuplicates=0,sheetData.compendiumDuplicates=0,sheetData.warnDuplicateWorldPriority=!1,sheetData.warnDuplicateCompendiumPriority=!1;return sheetData}activateListeners(html){super.activateListeners(html),html.find("a.copy-to-clipboard").click((function(e){CoC7Utilities.copyToClipboard($(this).siblings("input").val())})),this.object.sheet.isEditable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find("input[name=_existing").change((function(e){const obj=$(this),prefix=obj.data("prefix");let value=obj.val();""!==value&&(value=prefix+CoC7Utilities.toKebabCase(value)),html.find("input[name=id]").val(value).trigger("change")})),html.find("select[name=known]").change((function(e){const obj=$(this);html.find("input[name=id]").val(obj.val())})),html.find("a[data-guess]").click((async function(e){e.preventDefault();const guess=$(this).data("guess");html.find("input[name=id]").val(guess).trigger("change")})))}static async eraToggle(document,propertyId){if("setup"===document.type){const update={[propertyId]:!0};if(void 0!==document.flags?.CoC7?.cocidFlag?.eras)for(const[key]of Object.entries(document.flags.CoC7.cocidFlag.eras))key!==propertyId&&(update["-="+key]=null);await document.update({"flags.CoC7.cocidFlag.eras":update})}else void 0===document.flags?.CoC7?.cocidFlag?.eras?.[propertyId]?void 0===document.flags?.CoC7?.cocidFlag?.eras?await document.update({"flags.CoC7.cocidFlag.eras":{[propertyId]:!0}}):await document.update({[`flags.CoC7.cocidFlag.eras.${propertyId}`]:!0}):await document.update({[`flags.CoC7.cocidFlag.eras.-=${propertyId}`]:null})}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await CoCIDEditor.eraToggle(this.object,propertyId),this.render()}async _updateObject(event,formData){const id=formData.id||"";await this.object.update({"flags.CoC7.cocidFlag.id":id,"flags.CoC7.cocidFlag.lang":formData.lang||game.i18n.lang,"flags.CoC7.cocidFlag.priority":formData.priority||0,"flags.CoC7.cocidFlag.eras":this.object.flags?.CoC7?.cocidFlag?.eras??{}});const html=$(this.object.sheet.element).find("header.window-header a.header-button.edit-coc-id-warning,header.window-header a.header-button.edit-coc-id-exisiting");html.length&&html.css({color:id?"var(--color-text-light-highlight)":"red"}),this.render()}}function addCoCIDSheetHeaderButton(headerButtons,sheet){if(game.user.isGM){const sheetCoCID=sheet.object.flags?.CoC7?.cocidFlag,CoCIDEditorButton={class:void 0===sheetCoCID||void 0===sheetCoCID.id||""===sheetCoCID.id?"edit-coc-id-warning":"edit-coc-id-exisiting",label:"CoC7.CoCIDFlag.id",icon:"fas fa-fingerprint",onclick:()=>{new CoCIDEditor(sheet.object,{}).render(!0,{focus:!0})}},numberOfButtons=headerButtons.length;headerButtons.splice(numberOfButtons-1,0,CoCIDEditorButton)}}class CoC7ActiveEffect extends ActiveEffect{apply(actor,change){"system.attribs.armor.value"===change.key?isNaN(change.value)||isNaN(actor.system.attribs.armor.value)||(actor.system.attribs.armor.value=Number(actor.system.attribs.armor.value)):"system.attribs.db.value"===change.key&&isNaN(change.value)&&!isNaN(actor.system.attribs.db.value)&&(actor.system.attribs.db.value=String(actor.system.attribs.db.value));return super.apply(actor,change)}static onManageActiveEffect(event,owner){event.preventDefault();const a=event.currentTarget,li=a.closest("li"),effect=li.dataset.effectId?owner.effects.get(li.dataset.effectId):null;switch(a.dataset.action){case"create":return owner.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",origin:owner.uuid,"duration.rounds":"temporary"===li.dataset.effectType?1:void 0,disabled:"inactive"===li.dataset.effectType}]);case"edit":return effect.sheet.render(!0);case"delete":return effect.delete();case"toggle":return effect.update({disabled:!effect.disabled})}}_prepareDuration(){const duration=super._prepareDuration();return"seconds"===duration.type&&(duration.seconds>3600?duration.label=new Date(1e3*duration.seconds).toISOString().slice(11,19):duration.seconds>100&&(duration.label=new Date(1e3*duration.seconds).toISOString().slice(14,19))),duration}get isStatus(){const statusId=this.getFlag("core","statusId");return["tempoInsane","indefInsane","criticalWounds","dying","dead","unconscious","prone"].includes(statusId)}static prepareActiveEffectCategories(effects,{status=!0}={}){const categories={temporary:{type:"temporary",label:game.i18n.localize("Temporary"),effects:[]},passive:{type:"passive",label:game.i18n.localize("Passive"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]},suppressed:{type:"suppressed",label:game.i18n.localize("Suppressed"),effects:[],info:[game.i18n.localize("Unavailable")]}};status&&(categories.status={type:"status",label:game.i18n.localize("Status"),effects:[]});for(const e of effects)e._getSourceName(),e.isSuppressed?categories.suppressed.effects.push(e):e.isStatus?categories.status.effects.push(e):e.disabled?categories.inactive.effects.push(e):e.isTemporary?categories.temporary.effects.push(e):categories.passive.effects.push(e);return categories.suppressed.hidden=!categories.suppressed.effects.length,categories}static prepareNPCActiveEffectCategories(effects){let count=0;const categories={active:{type:"active",label:game.i18n.localize("Active"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]}};for(const e of effects)count+=1,e._getSourceName(),e.isSuppressed||e.disabled?categories.inactive.effects.push(e):categories.active.effects.push(e);return count>0&&(categories.expended=!0),categories}}class CoC7ContextMenu{bind(menu,html,callback){this._callback=callback,this._html=html,this._menu=menu;try{const menuTrigger=html.find(`[data-context-menu=${menu.id}]`);if(0===menuTrigger.length)return;menuTrigger.contextmenu(this._onContextMenu.bind(this));const menuElement=CoC7ContextMenu.CreateMenu(menu);menuElement.on("click",".menu-action",this._onMenuAction.bind(this)),0!==this.menu.length?this.menu.replaceWith(menuElement):this.menuContainer.append(menuElement)}catch(error){console.error(error)}}get menuContainer(){let menuContainer=this._html.find(".menu-container");return 0===menuContainer.length&&(this._html.append('<div class="menu-container"></div>'),menuContainer=this._html.find(".menu-container")),menuContainer}get menu(){return this.menuContainer.find(`.context-menu-wrapper.${this._menu.id}`)}_onMenuAction(event){return this._callback(event,this.target)}static closeAll(){$("body").find(".menu-container").find(".context-menu-wrapper").each((function(i,m){m.style.visibility="hidden"}))}_onContextMenu(event){event.preventDefault(!0),CoC7ContextMenu.closeAll();const target=event?.currentTarget;if(this.target=target,!target)return;const menuName=target.dataset?.contextMenu;if(menuName===this._menu.id){const wrapper=this.menu;if(wrapper.length>0){const subMenu=wrapper.find(".sub-menu");let left=event.clientX,top=event.clientY;const menuHeight=wrapper.outerHeight(),menuWidth=wrapper.outerWidth();window.innerHeight<menuHeight+top&&(top-=menuHeight),window.innerWidth<menuWidth+left&&(left=window.innerWidth-menuWidth),subMenu.length>0&&(window.innerWidth<menuWidth+left+subMenu.outerWidth()?subMenu.css({right:menuWidth-5+"px",left:""}):subMenu.css({left:menuWidth-5+"px",right:""})),wrapper.css({left:`${left}px`,top:`${top}px`,visibility:"visible"})}}}static canSee(visibility){switch(visibility.toLowerCase()){case"gm":return game.user.isGM;case"trusted":return game.user.isTrusted;default:return!0}}static CreateMenu(menu){const classes="string"==typeof menu.classes?[menu.classes]:menu.classes;classes.push("context-menu-wrapper");const wrapper=$("<div></div>");if(wrapper.addClass(menu.id),classes.forEach((c=>wrapper.addClass(c))),menu.section)menu.section.forEach((s=>{const section=CoC7ContextMenu.CreateSection(s,{multi:!0});section&&wrapper.append(section)}));else{const section=CoC7ContextMenu.CreateSection(menu);section&&wrapper.append(section)}return wrapper}static CreateSection(s,{multi=!1,subMenu=!1}={}){if(!s.items)return null;if(s.visibility&&!CoC7ContextMenu.canSee(s.visibility))return null;const classes=s.classes?"string"==typeof s.classes?[s.classes]:s.classes:[];multi&&classes.push("menu-section"),subMenu&&classes.push("sub-menu");const section=$("<ul></ul>");return classes.forEach((c=>section.addClass(c))),s.items.forEach((i=>{const li=$("<li></li>");if(li.addClass("menu-item"),i.action&&(li.addClass("menu-action"),li.attr("data-action",i.action)),"string"==typeof i.label?li.append(`<span>${i.label}</span>`):(i.label.icon&&li.append(`<i class="${i.label.icon}"></i>`),i.label.text&&li.append(`<span>${i.label.text}</span>`)),i.subMenu){li.addClass("sub-menu-button"),li.append('<i class="fas fa-caret-right"></i>');const sub=CoC7ContextMenu.CreateSection(i.subMenu,{subMenu:!0});sub&&li.append(sub)}section.append(li)})),section}}class CoC7ActorSheet extends ActorSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu"),sheetData.canDragToken=!!this.token&&game.user.isGM,sheetData.linkedActor=!0===this.actor.prototypeToken?.actorLink,sheetData.isToken=this.actor.isToken,sheetData.itemsByType={},sheetData.skills={},sheetData.combatSkills={},sheetData.weapons={},sheetData.rangeWpn=[],sheetData.meleeWpn=[],sheetData.actorFlags={},sheetData.effects="character"===this.actor.type?CoC7ActiveEffect.prepareActiveEffectCategories(this.actor.effects):CoC7ActiveEffect.prepareNPCActiveEffectCategories(this.actor.effects),sheetData.permissionLimited=!game.user.isGM&&(this.actor.ownership[game.user.id]??this.actor.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED,sheetData.isKeeper=game.user.isGM,sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM||"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled"),"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled")&&(sheetData.data.system.flags.locked=!1),"vehicle"!==this.actor.type&&(sheetData.data.system.characteristics||(sheetData.data.system.characteristics={str:{value:null,short:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,short:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,short:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,short:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,short:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,short:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,short:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,short:"CHARAC.EDU",label:"CHARAC.Education",formula:null}}),sheetData.data.system.attribs||(sheetData.data.system.attribs={hp:{value:null,max:null,short:"HP",label:"Hit points",auto:!0},mp:{value:null,max:null,short:"HP",label:"Magic points",auto:!0},lck:{value:null,short:"LCK",label:"Luck"},san:{value:null,max:99,short:"SAN",label:"Sanity",auto:!0},mov:{value:null,short:"MOV",label:"Movement rate",auto:!0},db:{value:null,short:"DB",label:"Damage bonus",auto:!0},build:{value:null,short:"BLD",label:"Build",auto:!0},armor:{value:null,auto:!1}}),sheetData.data.system.biography||(sheetData.data.system.biography={personalDescription:{type:"string",value:""}}),sheetData.data.system.infos||(sheetData.data.system.infos={occupation:"",age:"",sex:"",residence:"",birthplace:"",archetype:"",organization:"",playername:""}),sheetData.data.system.flags||(sheetData.data.system.flags={locked:!0,manualCredit:!1}),sheetData.data.system.credit||(sheetData.data.system.credit={monetarySymbol:null,multiplier:null,spent:null,assetsDetails:null}),sheetData.data.system.development||(sheetData.data.system.development={personal:null,occupation:null,archetype:null}),sheetData.data.system.biography||(sheetData.data.system.biography=[]),sheetData.pulpRuleArchetype=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.pulpRuleOrganization=game.settings.get("CoC7","pulpRuleOrganization")),sheetData.isDead=this.actor.dead,sheetData.isDying=this.actor.dying,sheetData.items){for(const item of sheetData.items){if("skill"===item.type)if(item.system.properties.special&&(item.system.properties.fighting&&(item.system.specialization=game.i18n.localize("CoC7.FightingSpecializationName")),item.system.properties.firearm&&(item.system.specialization=game.i18n.localize("CoC7.FirearmSpecializationName"))),"character"!==this.actor.type){if(isNaN(Number(item.system.value))){let value=null;const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));try{value=(await new Roll(item.system.value,parsed).evaluate({async:!0})).total}catch(err){console.warn(game.i18n.format("CoC7.ErrorUnableToParseSkillFormula",{value:item.system.value,name:item.name})),value=null}if(value){item.system.value=value;const itemToUpdate=this.actor.items.get(item._id);console.info(`[COC7] (Actor:${this.name}) Evaluating skill ${item.name}:${item.system.value} to ${value}`),await itemToUpdate.update({"system.value":value})}}const skill=this.actor.items.get(item._id),{base,rawValue,value}=skill.system;item.system.rawValue=rawValue||value||base,item.system.value=value||base}else{const skill=this.actor.items.get(item._id);if(item.system.base=await skill.asyncBase(),item.system.value){let updatedExp=(item.system.adjustments?.experience?parseInt(item.system.adjustments.experience):0)+parseInt(item.system.value)-skill.value;updatedExp<=0&&(updatedExp=null),console.info(`[COC7] Updating skill ${skill.name} experience. Experience missing: ${updatedExp}`),await this.actor.updateEmbeddedDocuments("Item",[{_id:item._id,"system.adjustments.experience":updatedExp,"system.value":null}]),item.system.adjustments||(item.system.adjustments={}),item.system.adjustments.experience=updatedExp,item.system.rawValue=skill.rawValue,item.system.value=skill.value}else item.system.value=skill.value,item.system.rawValue=skill.rawValue}let list=sheetData.itemsByType[item.type];list||(list=[],sheetData.itemsByType[item.type]=list),list.push(item)}for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey);sheetData.skills=sheetData.items.filter((item=>"skill"===item.type)).sort(CoC7Utilities.sortByNameKey),sheetData.meleeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.fighting)),sheetData.rangeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.firearm));const cbtSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat));if(cbtSkills)for(const skill of cbtSkills)sheetData.combatSkills[skill._id]=skill;const weapons=sheetData.itemsByType.weapon;if(weapons)for(const weapon of weapons){if(weapon.usesAlternateSkill=!0===weapon.system.properties.auto||!0===weapon.system.properties.brst,weapon.system.ammo||(weapon.system.ammo=0),weapon.skillSet=!0,""===weapon.system.skill.main.id)weapon.skillSet=!1;else{if(sheetData.combatSkills[weapon.system.skill.main.id]){const skill=this.actor.items.get(weapon.system.skill.main.id);weapon.system.skill.main.name=skill.system.skillName,weapon.system.skill.main.value=skill.value}else weapon.skillSet=!1;if(""!==weapon.system.skill.alternativ.id&&sheetData.combatSkills[weapon.system.skill.alternativ.id]){const skill=this.actor.items.get(weapon.system.skill.alternativ.id);weapon.system.skill.alternativ.name=skill.system.skillName,weapon.system.skill.alternativ.value=skill.value}}weapon.system._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.value=!0===weapon.system.properties[key],weapon.system._properties.push(property)}sheetData.weapons[weapon._id]=weapon,weapon.system.properties.rngd?sheetData.rangeWpn.push(weapon):sheetData.meleeWpn.push(weapon)}const token=this.token;if(sheetData.tokenId=token?`${token.parent?.id?token.parent.id:"TOKEN"}.${token.id}`:null,sheetData.hasEmptyValueWithFormula=!1,sheetData.data.system.characteristics)for(const characteristic of Object.values(sheetData.data.system.characteristics))characteristic.value||(characteristic.editable=!0),characteristic.hard=Math.floor(characteristic.value/2),characteristic.extreme=Math.floor(characteristic.value/5),characteristic.value||characteristic.formula?characteristic.display=!0:characteristic.display=!1,!characteristic.value&&characteristic.formula&&(characteristic.hasEmptyValueWithFormula=!0),sheetData.hasEmptyValueWithFormula=sheetData.hasEmptyValueWithFormula||characteristic.hasEmptyValueWithFormula}if(["vehicle","container"].includes(this.actor.type))sheetData.data.system.attribs.hp.auto=!1,sheetData.data.system.attribs.mp.auto=!1,sheetData.data.system.attribs.san.auto=!1,sheetData.data.system.attribs.mov.auto=!1,sheetData.data.system.attribs.db.auto=!1,sheetData.data.system.attribs.build.auto=!1;else{const auto=this.actor.checkUndefinedAuto();sheetData.data.system=mergeObject(sheetData.data.system,auto)}return sheetData.data.system.attribs.mp.value<0&&(sheetData.data.system.attribs.mp.value=null),sheetData.data.system.attribs.san.value<0&&(sheetData.data.system.attribs.san.value=null),["vehicle"].includes(this.actor.type)||sheetData.data.system.biography instanceof Array&&sheetData.data.system.biography.length&&(sheetData.data.system.biography[0].isFirst=!0,sheetData.data.system.biography[sheetData.data.system.biography.length-1].isLast=!0),sheetData.showInventoryItems=!1,sheetData.showInventoryBooks=!1,sheetData.showInventorySpells=!1,sheetData.showInventoryTalents=!1,sheetData.showInventoryStatuses=!1,sheetData.showInventoryWeapons=!1,sheetData.hasConditions=this.actor.effects.size>0||void 0!==this.actor.system.conditions&&Object.keys(this.actor.system.conditions).filter((condition=>this.actor.system.conditions[condition].value)).length>0,sheetData}static parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actorsheet))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}get tokenKey(){throw ui.notifications.error("DEPRECATED SHOULD NOT HAPPEN!"),new Error("base.js get tokenKey(): DEPRECATED SHOULD NOT HAPPEN!")}onCloseSheet(){}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const rollMenu={id:"skill-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"gm",items:[{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}},{action:"request-roll",label:"Request roll"}]}]},sanMenu={id:"san-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"encounter",label:"Encounter"},{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"trusted",items:[{action:"request-roll",label:"Request roll"},{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"},{action:"link-encounter",label:"Encounter"}]}}]}]},rollContextMenu=new CoC7ContextMenu;rollContextMenu.bind(rollMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(rollContextMenu);const sanContextMenu=new CoC7ContextMenu;sanContextMenu.bind(sanMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(sanContextMenu)}else html.find(".characteristic-label").contextmenu(this._onOpposedRoll.bind(this)),html.find(".skill-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".attribute-label.rollable").contextmenu(this._onOpposedRoll.bind(this));if(html.find(".characteristic-label").click(this._onRollCharacteriticTest.bind(this)),html.find(".skill-name.rollable").click(this._onRollSkillTest.bind(this)),html.find(".skill-image").click(this._onRollSkillTest.bind(this)),html.find(".attribute-label.rollable").click(this._onRollAttribTest.bind(this)),html.find(".token-drag-handle").on("dragstart",this._onDragTokenStart.bind(this)),this.actor.isOwner&&void 0===this.actor.compendium){html.find(".characteristic-label").on("dragstart",(event=>this._onDragCharacteristic(event))),html.find(".attribute-label").on("dragstart",(event=>this._onDragAttribute(event))),html.find(".san-check").on("dragstart",(event=>this._onDragSanCheck(event))),html.find(".weapon-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".lock").click(this._onLockClicked.bind(this)),html.find(".flag").click(this._onFlagClicked.bind(this)),html.find(".formula").click(this._onFormulaClicked.bind(this)),html.find(".roll-characteritics").click(this._onRollCharacteriticsValue.bind(this)),html.find(".average-characteritics").click(this._onAverageCharacteriticsValue.bind(this)),html.find(".toggle-switch").click(this._onToggle.bind(this)),html.find(".auto-toggle").click(this._onAutoToggle.bind(this)),(game.user.isGM||game.settings.get("CoC7","statusPlayerEditable"))&&(html.find(".reset-counter").click(this._onResetCounter.bind(this)),html.find(".condition-monitor").click(this._onConditionToggle.bind(this)),html.find(".is-dying").click(this.heal.bind(this)),html.find(".is-dead").click(this.revive.bind(this))),html.find(".dying-check").click(this.checkForDeath.bind(this)),html.find(".item .item-image").click((event=>this._onItemRoll(event))),html.find(".weapon-name.rollable").click((event=>this._onWeaponRoll(event))),html.find(".item-name.effect-name").click((event=>this._onEffect(event))),html.find(".weapon-skill.rollable").click((async event=>this._onWeaponSkillRoll(event))),html.find(".reload-weapon").click((event=>this._onReloadWeapon(event))),html.find(".reload-weapon").on("contextmenu",(event=>this._onReloadWeapon(event))),html.find(".add-ammo").click(this._onAddAmo.bind(this)),html.find(".read-only").dblclick(this._toggleReadOnly.bind(this)),html.on("click",".weapon-damage",this._onWeaponDamage.bind(this)),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".items-header").click(this._onItemHeader.bind(this)),html.find(".section-header").click(this._onSectionHeader.bind(this));const wheelInputs=html.find(".attribute-value");for(const wheelInput of wheelInputs)wheelInput.addEventListener("wheel",(event=>this._onWheel(event)),{passive:!0})}this.options.editable&&(html.find(".show-detail").click((event=>this._onItemSummary(event))),html.find(".item-popup").click(this._onItemPopup.bind(this)),html.find(".show-detail").dblclick((event=>this._onRenderItemSheet(event))),html.find(".item-edit").click((event=>this._onRenderItemSheet(event))),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.stopPropagation(),ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":{const properties={};ev.currentTarget.dataset.melee?properties.melee=!0:ev.currentTarget.dataset.rngd&&(properties.rngd=!0),this.actor.createEmptyWeapon(ev,properties)}}})),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".add-new-section").click((()=>{this.actor.createBioSection(),this.render()})),html.find(".delete-section").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.deleteBioSection(index)})),html.find(".move-section-up").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionUp(index)})),html.find(".move-section-down").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionDown(index)})),html.find(".development-flag").dblclick((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("developement")})),html.find(".occupation-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("occupation")})),html.find(".archetype-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("archetype")})),html.find(".skill-developement").click((event=>{this.actor.developementPhase(event.shiftKey)})),html.find(".luck-development").click((event=>{event.detail&&1!==event.detail||this.actor.developLuck(event.shiftKey)})),html.find(".clear_conditions").click((event=>{if(void 0!==this.actor.system.conditions){const disable={};for(const condition in this.actor.system.conditions)void 0!==this.actor.system.conditions[condition].value&&!0===this.actor.system.conditions[condition].value&&(disable[`system.conditions.${condition}.value`]=!1);Object.keys(disable).length>0&&this.actor.update(disable)}const effects=this.actor.effects.map((effect=>effect.id));effects.length>0&&this.actor.deleteEmbeddedDocuments("ActiveEffect",effects)})),CoC7Link.bindEventsHandler(html),html.find(".test-trigger").click((async event=>{if(!game.settings.get("CoC7","hiddendevmenu"))return null;await Item.create({name:"__CoC7InternalItem__",type:"item"}),ui.notifications.info("effect created !")})),html.find(".skill-name.rollable").mouseenter(this.toolTipSkillEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".characteristic-label").mouseenter(this.toolTipCharacteristicEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".attribute-label.rollable").mouseenter(this.toolTipAttributeEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".auto-toggle").mouseenter(this.toolTipAutoEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".item-control.development-flag").mouseenter(this.toolTipFlagForDevelopment.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.actor))))}toolTipSkillEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const isCombat=game.CoC7Tooltips.ToolTipHover.classList?.contains("combat"),item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId);let toolTip=game.i18n.format(isCombat?"CoC7.ToolTipCombat":"CoC7.ToolTipSkill",{skill:skill.name,regular:skill.value,hard:Math.floor(skill.value/2),extreme:Math.floor(skill.value/5)});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipCharacteristicEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const char=game.CoC7Tooltips.ToolTipHover.closest(".char-box");if(void 0!==char&&char){const charId=char.dataset.characteristic,characteristic=sheet.actor.characteristics[charId];let toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:characteristic.label,regular:characteristic.value??0,hard:characteristic.hard??0,extreme:characteristic.extreme??0});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipAttributeEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const attrib=game.CoC7Tooltips.ToolTipHover.closest(".attribute");if(void 0!==attrib){const attributeId=attrib.dataset.attrib;let toolTip="";const attributes=sheet.actor.system.attribs[attributeId];switch(attributeId){case"lck":toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:attributes.label,regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip);break;case"db":toolTip=game.i18n.localize("CoC7.ToolTipDB"),game.CoC7Tooltips.displayToolTip(toolTip);break;case"san":toolTip=game.i18n.format("CoC7.ToolTipSanity",{skill:"Sanity",regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.i18n.localize("CoC7.ToolTipKeeperSanity")+(game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):"")})),game.CoC7Tooltips.displayToolTip(toolTip)}}}}),delay)}}toolTipAutoEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const toolTip=game.i18n.localize("CoC7.ToolTipAutoToggle");game.CoC7Tooltips.displayToolTip(toolTip)}}),delay))}toolTipFlagForDevelopment(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId),toolTip=game.i18n.format("CoC7.ToolTipSkillFlagToggle",{status:game.i18n.localize(skill.system.flags.developement?"CoC7.ToolTipSkillFlagged":"CoC7.ToolTipSkillUnflagged")});game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}_onContextMenuClick(event,target){const targetType=target.dataset?.targetType,rollOptions={preventStandby:!0,fastForward:!1,actor:this.actor};switch(targetType){case"skill":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL,rollOptions.skillId=target.closest(".item")?.dataset.skillId;break;case"characteristic":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,rollOptions.characteristic=target.closest(".char-box").dataset.characteristic;break;case"attribute":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.attribute=target.closest(".attribute").dataset.attrib}switch(event.currentTarget.dataset.action){case"roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL;break;case"opposed-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_OPPOSED;break;case"combined-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED;break;case"request-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL,rollOptions.preventStandby=!1;break;case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToClipboard=!0;break;case"link-encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0;break;case"encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_SAN_CHECK,rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.fastForward=!0}CoC7ChatMessage.trigger(rollOptions)}_onRenderItemSheet(event){const li=$(event.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",message.actorTo=await new Promise((resolve=>{new Dialog({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,buttons:{confirm:{label:game.i18n.localize("CoC7.Validate"),callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)if("user"===name)return resolve(value)}}},default:"confirm",close:()=>{}}).render(!0)})),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onDragStart(event){if(super._onDragStart(event),this.token){const dragData=JSON.parse(event.dataTransfer.getData("text/plain"));dragData.tokenUuid=this.token.uuid,dragData.tokenId=this.token.id,dragData.sceneId=this.token.parent.id,event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}_onDragCharacteristic(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"characteristic",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.characteristic,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragAttribute(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"attribute",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.attrib,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragSanCheck(event){const sanMin=event.currentTarget.querySelector(".san-value.pass"),sanMax=event.currentTarget.querySelector(".san-value.failed"),data={CoC7Type:"link",linkType:"coc7-link",check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,sanMin:sanMin.innerText,sanMax:sanMax.innerText,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain");if(""===dataString)return!1;const data=JSON.parse(dataString);"CoC7Link"===data.type&&data.check===CoC7Link.CHECK_TYPE.EFFECT&&CoC7Link._onLinkActorClick(this.actor,data),await super._onDrop(event)}async _onConditionToggle(event){event.preventDefault(),event.currentTarget.dataset.condition&&await this.actor.toggleCondition(event.currentTarget.dataset.condition)}async revive(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dead)}async heal(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dying)}async checkForDeath(event){const conCheck=new CoC7ConCheck(this.actor.isToken?this.actor.tokenKey:this.actor.id);conCheck.stayAlive=!0,conCheck.toMessage(event.shiftKey)}async _onDragTokenStart(event){const data={type:"Token",uuid:this.token.uuid};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onResetCounter(event){event.preventDefault(),await this.actor.resetDailySanity()}async _onAutoToggle(event){if(event.currentTarget.closest(".attribute")){const attrib=event.currentTarget.closest(".attribute").dataset.attrib;this.actor.toggleAttribAuto(attrib)}}async _onToggle(event){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&weapon.toggleProperty(event.currentTarget.dataset.property,isCtrlKey(event))}async _onRollCharacteriticsValue(){await this.actor.rollCharacteristicsValue()}async _onAverageCharacteriticsValue(){this.actor.averageCharacteristicsValue()}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked,Hooks.call("actorLockClickedCoC7",[!isLocked])}async _onFlagClicked(event){event.preventDefault();const flagName=event.currentTarget.dataset.flag;this.actor.toggleActorFlag(flagName)}async _onFormulaClicked(event){event.preventDefault(),this.actor.toggleActorFlag("displayFormula")}async _onWheel(event){let value=parseInt(event.currentTarget.value)||null;switch(event.deltaY>0&&(value=0===value?0:value-1),event.deltaY<0&&(value+=1),event.currentTarget.name){case"system.attribs.hp.value":case"system.attribs.build.current":this.actor.setHp(value);break;case"system.attribs.mp.value":this.actor.setMp(value);break;case"system.attribs.san.value":this.actor.setSan(value);break;case"system.attribs.lck.value":this.actor.setLuck(value)}}_toggleReadOnly(event){event.currentTarget.readOnly=!event.currentTarget.readOnly,event.currentTarget.classList.toggle("read-only")}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>{summary.remove(),li.toggleClass("expanded")}))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Link.bindEventsHandler(div),div.slideDown(200,(()=>li.toggleClass("expanded")))}}async _onSectionHeader(event){event.preventDefault();const section=event.currentTarget.closest("section"),pannelClass=event.currentTarget.dataset.pannel;if(void 0===pannelClass)return;const pannel=$(section).find(`.pannel.${pannelClass}`);pannel.hasClass("expanded")?pannel.slideUp(200,(()=>pannel.toggleClass("expanded"))):pannel.slideDown(200,(()=>pannel.toggleClass("expanded")));const camelFlag=chatHelper.hyphenToCamelCase(`data.pannel.${pannelClass}.expanded`);this.actor.update({[camelFlag]:!pannel.hasClass("expanded")},{render:!1})}_onInventoryHeader(event){event.preventDefault();const li=$(event.currentTarget).siblings("li");li.is(":visible")?li.slideUp(200):li.slideDown(200)}_onItemHeader(event){event.preventDefault();const ol=$(event.currentTarget).next("ol");ol.is(":visible")?ol.slideUp(200):ol.slideDown(200)}async _onItemPopup(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id"));CoC7ActorSheet.popupSkill(item)}static async popupSkill(skill){skill.system.description.enrichedValue=TextEditor.enrichHTML(skill.system.description.value,{async:!1});new Dialog({title:game.i18n.localize("CoC7.SkillDetailsWindow"),content:skill,buttons:{},close:()=>{}},{classes:["coc7","sheet","skill"],width:520,height:480,scrollY:[".item-description"],template:"systems/CoC7/templates/apps/skill-details.html"}).render(!0)}async _onItemRoll(event){event.preventDefault()}async _onEffect(event){event.preventDefault();const effectId=event.currentTarget.closest("li").dataset.effectId,effect=this.actor.effects.get(effectId);isCtrlKey(event)&&game.user.isGM&&CoC7ContentLinkDialog.create({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.EFFECT,object:effect})}async _onWeaponRoll(event){event.preventDefault();const itemId=event.currentTarget.closest("li").dataset.itemId,fastForward=event.shiftKey,weapon=this.actor.items.get(itemId);let actorKey;if(actorKey=this.token?this.actor.isToken&&game.actors.tokens[this.token.id]?`TOKEN.${this.token.id}`:`${this.token.parent.id}.${this.token.id}`:this.actor.id,isCtrlKey(event)&&game.user.isGM){const linkData={check:CoC7Link.CHECK_TYPE.ITEM,name:weapon.name};CoC7ContentLinkDialog.create(linkData,{actors:[this.actor]})}else{let proceedWithoutTarget;if(game.user.targets.size<=0&&(proceedWithoutTarget=await new Promise((resolve=>{const data={title:" ",content:game.i18n.format("CoC7.NoTargetSelected",{weapon:weapon.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>resolve(!0)}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)}))),game.user.targets.size>0||proceedWithoutTarget){if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(actorKey,itemId,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(actorKey,itemId,fastForward).createChatCard()}}}}async _onReloadWeapon(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);0===event.button?event.shiftKey?await weapon.reload():await weapon.addBullet():2===event.button&&(event.shiftKey?await weapon.setBullets(0):await weapon.shootBullets(1))}async _onAddAmo(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);await weapon.addBullet()}async _onWeaponSkillRoll(event){event.preventDefault();const skillId=event.currentTarget.dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,itemId=event.currentTarget.closest("li")?event.currentTarget.closest("li").dataset.itemId:null,check=new CoC7Check;if(!event.shiftKey){const usage=await RollDialog.create();usage&&(check.diceModifier=usage.get("bonusDice"),check.difficulty=usage.get("difficulty"),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=tokenKey||actorId,check.skill=skillId,check.item=itemId,await check.roll(),check.toMessage()}async _onWeaponDamage(event){event.preventDefault();const itemId=event.currentTarget.closest(".weapon").dataset.itemId,range=event.currentTarget.closest(".weapon-damage").dataset.range,damageChatCard=new DamageCard({fastForward:event.shiftKey,range});damageChatCard.actorKey=this.actor.tokenKey,damageChatCard.itemId=itemId,damageChatCard.updateChatCard()}async _onOpposedRoll(event){if(event.preventDefault(),"db"===event.currentTarget.parentElement.dataset.attrib)return;const data={rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_OPPOSED,event,actor:this.actor};event.currentTarget.classList.contains("characteristic-label")?data.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:event.currentTarget.classList.contains("attribute-label")&&(data.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE),event.altKey&&(data.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED),CoC7ChatMessage.trigger(data)}async _onRollCharacteriticTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,characteristic:event.currentTarget.closest(".char-box").dataset.characteristic,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _onRollAttribTest(event){event.preventDefault();const attrib=event.currentTarget.parentElement.dataset.attrib;if("db"!==attrib)game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,attribute:event.currentTarget.closest(".attribute").dataset.attrib,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,cardType:event.altKey&&"san"===attrib?CoC7ChatMessage.CARD_TYPE_SAN_CHECK:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor});else if(!/^-{0,1}\d+$/.test(event.currentTarget.parentElement.dataset.rollFormula)){const r=new Roll(event.currentTarget.parentElement.dataset.rollFormula);await r.roll({async:!0}),isNaN(r.total)||void 0===r.total||r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:game.i18n.localize("CoC7.BonusDamageRoll")})}}_onRollSkillTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,skillId:event?.currentTarget.closest(".item")?.dataset.skillId,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _updateObject(event,formData){const overrides=foundry.utils.flattenObject(this.actor.overrides),name=event?.currentTarget?.name;if(name&&overrides&&overrides[name]&&ui.notifications.warn(game.i18n.format("CoC7.EffectAppliedCantOverride",{name})),event.currentTarget&&event.currentTarget.classList){if(event.currentTarget.classList.contains("skill-adjustment")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(item){const value=event.currentTarget.value?parseInt(event.currentTarget.value):null;if(event.currentTarget.value?isNaN(value)||await item.update({[event.currentTarget.name]:value}):await item.update({[event.currentTarget.name]:null}),game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating")===item.name&&void 0!==this.actor.occupation?.system?.creditRating?.max){const creditValue=(item.value||0)-(item.system.adjustments?.experience||0);(creditValue>Number(this.actor.occupation.system.creditRating.max)||creditValue<Number(this.actor.occupation.system.creditRating.min))&&ui.notifications.warn(game.i18n.format("CoC7.CreditOutOfRange",{min:Number(this.actor.occupation.system.creditRating.min),max:Number(this.actor.occupation.system.creditRating.max)}))}}}if(event.currentTarget.classList.contains("attribute-value")){if("system.attribs.san.value"===event.currentTarget.name)return await this.actor.setSan(parseInt(event.currentTarget.value)),void this.render(!0);if("system.attribs.hp.value"===event.currentTarget.name)return await this.actor.setHp(parseInt(event.currentTarget.value)),void this.render(!0)}if(event.currentTarget.classList.contains("text-area"))return void this.actor.updateTextArea(event.currentTarget);if(event.currentTarget.classList.contains("bio-section-value")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);await this.actor.updateBioValue(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("bio-section-title")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);this.actor.updateBioTitle(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("npc-skill-score")){const skill=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);skill&&await skill.updateValue(event.currentTarget.value)}if(event.currentTarget.classList.contains("skill-name")||event.currentTarget.classList.contains("item-name")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);if(item){const data={};if(item.system.properties.special){const parts=CoC7Item.getNamePartsSpec(event.currentTarget.value,item.system.specialization);data.name=parts.name,data["system.skillName"]=parts.skillName,data["system.specialization"]=parts.specialization}else data["system.skillName"]=event.currentTarget.value,data.name=event.currentTarget.value;await item.update(data)}}if(event.currentTarget.classList.contains("characteristic-formula")&&0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("attribute-value")&&0!==event.currentTarget.value.length&&"db"===event.currentTarget.closest(".attribute").dataset.attrib){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("weapon-skill")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId),skill=this.actor.items.get(event.currentTarget.options[event.currentTarget.selectedIndex].value);if(weapon&&skill)switch(event.currentTarget.dataset.skill){case"main":await weapon.update({"system.skill.main.id":skill.id,"system.skill.main.name":skill.name});break;case"alternativ":await weapon.update({"system.skill.alternativ.id":skill.id,"system.skill.alternativ.name":skill.name})}}if(event.currentTarget.classList.contains("weapon-name")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&await weapon.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("damage-formula")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(weapon)if(0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);if(await r.roll({async:!0}),isNaN(r.total)||void 0===r.total)ui.notifications.error(game.i18n.format("CoC7.ErrorUnableToParseFormula",{value:event.currentTarget.value}));else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":event.currentTarget.value});break;case"long":await weapon.update({"system.range.long.damage":event.currentTarget.value});break;case"extreme":await weapon.update({"system.range.extreme.damage":event.currentTarget.value})}}else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":null});break;case"long":await weapon.update({"system.range.long.damage":null});break;case"extreme":await weapon.update({"system.range.extreme.damage":null})}}}return this.object.update(formData)}}class CoC7NPCSheet extends CoC7ActorSheet{async getData(){const sheetData=await super.getData();return sheetData.allowFormula=!0,sheetData.displayFormula=this.actor.getActorFlag("displayFormula")||!1,sheetData.hasSan=null!==sheetData.data.system.attribs.san.value,sheetData.hasMp=null!==sheetData.data.system.attribs.mp.value,sheetData.hasLuck=null!==sheetData.data.system.attribs.lck.value,sheetData.isCreature=!1,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.showInventoryWeapons=!1,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBiographyPersonalDescription=TextEditor.enrichHTML(sheetData.data.system.biography.personalDescription?.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const sanlossMenu={id:"san-loss-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}]},sanlossContextMenu=new CoC7ContextMenu;sanlossContextMenu.bind(sanlossMenu,html,this._onSanLossContextMenuClick.bind(this)),this.menus.push(sanlossContextMenu)}html.find(".roll-san").click(this._onSanCheck.bind(this))}async _onSanLossContextMenuClick(event){const rollOptions={rollType:CoC7ChatMessage.ROLL_TYPE_ENCOUNTER,preventStandby:!0,fastForward:!1,event,cardType:CoC7ChatMessage.CARD_TYPE_SAN_CHECK,actor:this.actor};switch(event.currentTarget.dataset.action){case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToClipboard=!0}CoC7ChatMessage.trigger(rollOptions)}async _onSanCheck(event){if(event.preventDefault(),this.actor.system.special.sanLoss.checkPassed||this.actor.system.special.sanLoss.checkFailled)if(isCtrlKey(event)&&game.user.isGM){let difficulty,modifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")))}const linkData={check:"sanloss",sanMin:this.actor.system.special.sanLoss.checkPassed,sanMax:this.actor.system.special.sanLoss.checkFailled,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void 0!==modifier&&(linkData.modifier=modifier),void 0!==difficulty&&(linkData.difficulty=difficulty);const link=(new CoC7Link)._createDocumentLink(linkData);link&&chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}))}else{const sanData={sanMax:this.actor.sanLossCheckFailled,sanMin:this.actor.sanLossCheckPassed,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};SanCheckCard.checkTargets(sanData,event.shiftKey)}}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc"],dragDrop:[{dragSelector:".item",dropSelector:null}],template:"systems/CoC7/templates/actors/npc-sheet.html",width:580,resizable:!1,minimizable:!0})}async _updateObject(event,formData){if(!(event.currentTarget&&event.currentTarget.classList&&event.currentTarget.classList.contains("characteristic-score")))return super._updateObject(event,formData);this.actor.setCharacteristic(event.currentTarget.name,event.currentTarget.value)}static forceAuto(app,html){html.height("auto")}setPosition(a){super.setPosition(a),CoC7NPCSheet.forceAuto(a,this._element)}}class CoC7CreatureSheet extends CoC7NPCSheet{async getData(){const sheetData=await super.getData();return sheetData.isCreature=!0,sheetData}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc","creature"]})}}class CoC7CreateMythosEncounter extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7"],title:game.i18n.localize("CoC7.SanityLossTypeDialogTitle"),template:"systems/CoC7/templates/apps/sanity-loss-type.hbs",height:"auto"})}async getData(){const data=await super.getData();return data.isImmunity="immunity"===data.object.type,data}activateListeners(html){html.find(".field_type").change(this._onSelectChange.bind(this)),html.find(".dialog-button").click(this._onButtonClick.bind(this)),super.activateListeners(html)}_onButtonClick(event){if("add"===event.currentTarget.dataset.button){const html=$(event.currentTarget).closest(".window-content"),type=html.find(".field_type").val(),name=html.find(".field_name").val(),value=parseInt(html.find(".field_value").val()),sanityLossEvents=this.object.actor.system.sanityLossEvents??[];sanityLossEvents.push({type:name,totalLoss:value,immunity:"immunity"===type}),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.object.actor.update({"data.sanityLossEvents":sanityLossEvents})}this.close()}_onSelectChange(event){const html=$(event.currentTarget).closest(".window-content");this.object.name=html.find(".field_name").val(),this.object.type=html.find(".field_type").val(),this.render(!0)}async _updateObject(event,formData){}}class CoC7CharacterSheet extends CoC7ActorSheet{_getHeaderButtons(){if("CoC7CharacterSheet"===this.constructor.name){this.summarized||(this.summarized=!1);let buttons=super._getHeaderButtons();return buttons=[{label:this.summarized?game.i18n.localize("CoC7.Maximize"):game.i18n.localize("CoC7.Summarize"),class:"test-extra-icon",icon:this.summarized?"fas fa-window-maximize":"fas fa-window-minimize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}return super._getHeaderButtons()}async toggleSheetMode(event){this.summarized=!this.summarized,await this.close();const options=this.summarized?{classes:["coc7","actor","character","summarized"],height:200,resizable:!1,width:700}:CoC7CharacterSheet.defaultOptions;await this.render(!0,options)}async getData(){const sheetData=await super.getData();this.isEditable&&void 0===this.actor.getFlag("CoC7","skillListMode")&&await this.actor.setFlag("CoC7","skillListMode",!1),this.isEditable&&void 0===this.actor.getFlag("CoC7","skillShowUncommon")&&await this.actor.setFlag("CoC7","skillShowUncommon",!0),sheetData.skillListModeValue=this.actor.getFlag("CoC7","skillListMode")??!1,sheetData.skillShowUncommon=this.actor.getFlag("CoC7","skillShowUncommon")??!0,sheetData.showIconsOnly=game.settings.get("CoC7","showIconsOnly"),this.actor.occupation?(sheetData.data.system.infos.occupation=this.actor.occupation.name,sheetData.data.system.infos.occupationSet=!0):sheetData.data.system.infos.occupationSet=!1,this.actor.archetype?(sheetData.data.system.infos.archetype=this.actor.archetype.name,sheetData.data.system.infos.archetypeSet=!0):sheetData.data.system.infos.archetypeSet=!1,sheetData.totalExperience=this.actor.experiencePoints,sheetData.totalOccupation=this.actor.occupationPointsSpent,sheetData.invalidOccupationPoints=Number(this.actor.occupationPointsSpent)!==Number(this.actor.system.development?.occupation),sheetData.totalArchetype=this.actor.archetypePointsSpent,sheetData.invalidArchetypePoints=Number(this.actor.archetypePointsSpent)!==Number(this.actor.system.development?.archetype),sheetData.totalPersonal=this.actor.personalPointsSpent,sheetData.invalidPersonalPoints=Number(this.actor.personalPointsSpent)!==Number(this.actor.system.development?.personal),sheetData.creditRatingMax=Number(this.actor.occupation?.system.creditRating.max),sheetData.creditRatingMin=Number(this.actor.occupation?.system.creditRating.min),sheetData.invalidCreditRating=this.actor.creditRatingSkill?.system.adjustments?.occupation>sheetData.creditRatingMax||this.actor.creditRatingSkill?.system.adjustments?.occupation<sheetData.creditRatingMin,sheetData.pulpTalentCount=sheetData.itemsByType.talent?.length?sheetData.itemsByType.talent?.length:0,sheetData.minPulpTalents=this.actor.archetype?.system.talents?this.actor.archetype?.system.talents:0,sheetData.invalidPulpTalents=sheetData.pulpTalentCount<sheetData.minPulpTalents,sheetData.hasDevelopmentPhase=this.actor.hasDevelopmentPhase,sheetData.allowDevelopment=game.settings.get("CoC7","developmentEnabled"),sheetData.allowCharCreation=game.settings.get("CoC7","charCreationEnabled"),sheetData.developmentRollForLuck=game.settings.get("CoC7","developmentRollForLuck"),sheetData.showDevPannel=sheetData.allowDevelopment||sheetData.allowCharCreation,sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});sheetData.manualCredit=this.actor.getActorFlag("manualCredit"),sheetData.manualCredit||(sheetData.monetary={spendingLevel:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.spendingLevel),assets:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.assets),cash:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.cash)}),sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.summarized=this.summarized&&!sheetData.permissionLimited,sheetData.skillList=[];let previousSpec="";for(const skill of sheetData.skills)!sheetData.skillShowUncommon&&skill.system.properties.rarity||(skill.system.properties.special&&previousSpec!==skill.system.specialization&&(previousSpec=skill.system.specialization,sheetData.skillList.push({isSpecialization:!0,name:skill.system.specialization})),sheetData.skillList.push(skill));if(sheetData.skillsByValue=[...sheetData.skills].sort(((a,b)=>b.system.value-a.system.value)),sheetData.topSkills=[...sheetData.skillsByValue].slice(0,14),sheetData.skillsByValue=sheetData.skillsByValue.filter((skill=>sheetData.skillShowUncommon||!skill.system.properties.rarity)),sheetData.topWeapons=[...sheetData.meleeWpn,...sheetData.rangeWpn].sort(((a,b)=>a.system.skill.main?.value-b.system.skill.main?.value)).reverse().slice(0,3),sheetData.displayPlayerName=game.settings.get("CoC7","displayPlayerNameOnSheet"),sheetData.displayPlayerName&&!sheetData.data.system.infos.playername){const user=this.actor.characterUser;user&&(sheetData.data.system.infos.playername=user.name)}return sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBackstory=TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}_saveScrollPositions(html){super._saveScrollPositions(html);this._scrollPositionsX=[".right-panel .tab.development ol"].reduce(((pos,sel)=>{const el=html.find(sel);return pos[sel]=Array.from(el).map((el=>el.scrollLeft)),pos}),{})}_restoreScrollPositions(html){super._restoreScrollPositions(html);const selectors=[".right-panel .tab.development ol"],positions=this._scrollPositionsX||{};for(const sel of selectors){html.find(sel).each(((i,el)=>{el.scrollLeft=positions[sel]?.[i]||0}))}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","character"],template:"systems/CoC7/templates/actors/character/index.html",width:687,height:623,resizable:!0,dragDrop:[{dragSelector:".item",dropSelector:null}],scrollY:[".right-panel .tab"],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"skills"}]})}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&(html.find(".skill-name.rollable.flagged4dev").click((async event=>this._onSkillDev(event))),html.find(".reset-occupation").click((async()=>await this.actor.resetOccupation())),html.find(".reset-archetype").click((async()=>await this.actor.resetArchetype())),html.find(".open-item").click((event=>this._onItemDetails(event))),html.find(".toggle-list-mode").click((event=>{this.toggleSkillListMode(event)})),html.find(".toggle-uncommon-mode").click((event=>{this.toggleSkillUncommonMode(event)})),game.user.isGM&&(html.find(".sanity-loss-type-add").click(this._onAddSanityLossReason.bind(this)),html.find(".sanity-loss-type-delete").click(this._onDeleteSanityLossReason.bind(this)),html.find(".toggle-keeper-flags").click(this._onToggleKeeperFlags.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this))))}_onAddMonetary(){const values=this.actor.system.monetary.values?duplicate(this.actor.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.actor.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=duplicate(this.actor.system.monetary.values);values.splice(Number(div.dataset.index),1),this.actor.update({"system.monetary.values":values})}_onToggleKeeperFlags(event){switch(event.preventDefault(),event.currentTarget.dataset.flag){case"mythosInsanityExperienced":this.actor.setFlag("CoC7","mythosInsanityExperienced",!this.actor.mythosInsanityExperienced);break;case"mythosHardened":this.actor.setFlag("CoC7","mythosHardened",!this.actor.mythosHardened)}}async _onAddSanityLossReason(event){event.preventDefault(),new CoC7CreateMythosEncounter({actor:this.actor,type:event.currentTarget.dataset.type},{}).render(!0)}_onDeleteSanityLossReason(event){event.preventDefault();const offset=$(event.currentTarget).closest(".flexrow").data("offset"),sanityLossEvents=this.actor.system.sanityLossEvents??[];sanityLossEvents.splice(offset,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}async toggleSkillListMode(event){return await this.actor.setFlag("CoC7","skillListMode",!this.actor.getFlag("CoC7","skillListMode")),await this.render(!0)}async toggleSkillUncommonMode(event){return await this.actor.setFlag("CoC7","skillShowUncommon",!this.actor.getFlag("CoC7","skillShowUncommon")),await this.render(!0)}async _onSkillDev(event){event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.itemId;await this.actor.developSkill(skillId,event.shiftKey)}_onItemDetails(event){event.preventDefault();const type=event.currentTarget.dataset.type,item=this.actor[type];item&&item.sheet.render(!0)}_updateObject(event,formData){const system=expandObject(formData)?.system;system.monetary?.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),super._updateObject(event,formData)}static renderSheet(sheet,html){if(game.settings.get("CoC7","overrideSheetArtwork")){if(game.settings.get("CoC7","artWorkSheetBackground"))if("null"===game.settings.get("CoC7","artWorkSheetBackground").toLowerCase())sheet.element.css("--main-sheet-bg","url( './assets/images/void.webp')");else if(sheet.element.css("--main-sheet-bg",game.settings.get("CoC7","artWorkSheetBackground")),"slice"!==game.settings.get("CoC7","artWorkSheetBackgroundType")){let styleSheet,cssRuleIndex;for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href?.endsWith("coc7g.css")){styleSheet=document.styleSheets[i];break}if(styleSheet)for(let i=0;i<styleSheet.rules.length;i++)if(".sheetV2.character form"===styleSheet.rules[i].selectorText){cssRuleIndex=i;break}if(cssRuleIndex){const CSSStyle=styleSheet.rules[cssRuleIndex].style;switch(CSSStyle.removeProperty("border-image"),CSSStyle.setProperty("background",game.settings.get("CoC7","artWorkSheetBackground")),game.settings.get("CoC7","artWorkSheetBackgroundType")){case"auto":default:CSSStyle.setProperty("background-size","auto");break;case"contain":CSSStyle.setProperty("background-size","contain");break;case"cover":CSSStyle.setProperty("background-size","cover")}}}if(game.settings.get("CoC7","artWorkOtherSheetBackground")&&("null"===game.settings.get("CoC7","artWorkOtherSheetBackground").toLowerCase()?sheet.element.css("--other-sheet-bg","url( './assets/images/void.webp')"):sheet.element.css("--other-sheet-bg",game.settings.get("CoC7","artWorkOtherSheetBackground"))),game.settings.get("CoC7","artworkSheetImage")&&("null"===game.settings.get("CoC7","artworkSheetImage").toLowerCase()?sheet.element.css("--main-sheet-image","url( './assets/images/void.webp')"):sheet.element.css("--main-sheet-image",game.settings.get("CoC7","artworkSheetImage"))),game.settings.get("CoC7","artworkFrontColor")&&sheet.element.css("--main-sheet-front-color",game.settings.get("CoC7","artworkFrontColor")),game.settings.get("CoC7","artworkBackgroundColor")&&sheet.element.css("--main-sheet-back-color",game.settings.get("CoC7","artworkBackgroundColor")),game.settings.get("CoC7","artworkInteractiveColor")&&sheet.element.css("--main-sheet-interactive-color",game.settings.get("CoC7","artworkInteractiveColor")),game.settings.get("CoC7","artworkFixedSkillLength")||(sheet.element.css("--skill-length","auto"),sheet.element.css("--skill-specialization-length","auto")),game.settings.get("CoC7","artworkMainFont")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFont")).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontBold")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFontBold"),{weight:"bold"}).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontSize")){const size=`${game.settings.get("CoC7","artworkMainFontSize")}px`;size!==$(":root").css("font-size")&&$(":root").css("font-size",size)}}if(void 0!==sheet.actor?.system.pannel)for(const[key,value]of Object.entries(sheet.actor.system.pannel)){const pannelClass=chatHelper.camelCaseToHyphen(key),pannel=html.find(`.pannel.${pannelClass}`);value.expanded?pannel.addClass("expanded"):pannel.removeClass("expanded")}}}class CoC7Combat{static renderCombatTracker(app,html,data){const currentCombat=data.combats[data.currentIndex-1];currentCombat&&(html.find(".combatant").each(((i,el)=>{const combId=el.getAttribute("data-combatant-id"),combatantControlsDiv=el.querySelector(".combatant-controls"),combatant=currentCombat.combatants.get(combId);if(combatant.getFlag("CoC7","hasGun")?$(combatantControlsDiv).prepend(`<a class="combatant-control active add-init" title="${game.i18n.localize("CoC7.PutGunAway")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`):$(combatantControlsDiv).prepend(`<a class="combatant-control add-init" title="${game.i18n.localize("CoC7.DrawGun")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`),"optional"===game.settings.get("CoC7","initiativeRule")&&game.settings.get("CoC7","displayInitAsText")){if(combatant.initiative){const tokenInitiative=el.querySelector(".token-initiative"),initiativeTest=tokenInitiative.querySelector(".initiative"),roll=100*combatant.initiative-100*Math.floor(combatant.initiative);switch(Math.floor(combatant.initiative)){case CoC7Check.successLevel.fumble:tokenInitiative.classList.add("fumble"),initiativeTest.innerText=game.i18n.localize("CoC7.Fumble"),initiativeTest.title=roll;break;case CoC7Check.successLevel.failure:tokenInitiative.classList.add("failure"),initiativeTest.innerText=game.i18n.localize("CoC7.Failure"),initiativeTest.title=roll;break;case CoC7Check.successLevel.regular:tokenInitiative.classList.add("regular-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyRegular"),initiativeTest.title=roll;break;case CoC7Check.successLevel.hard:tokenInitiative.classList.add("hard-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyHard"),initiativeTest.title=roll;break;case CoC7Check.successLevel.extreme:tokenInitiative.classList.add("extreme-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyExtreme"),initiativeTest.title=roll;break;case CoC7Check.successLevel.critical:tokenInitiative.classList.add("critical"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyCritical"),initiativeTest.title=roll}}}else if(combatant.initiative<0){const h4=el.querySelector(".token-name").querySelector("h4"),span=el.querySelector("span.initiative");h4.style.fontWeight="900",h4.style.textShadow="1px 1px 4px darkred",span.style.fontWeight="900",span.style.textShadow="1px 1px 4px darkred",el.style.color="darkred",el.style.background="black",el.style.fontWeight="900"}})),html.find(".add-init").click((event=>CoC7Combat._onToggleGun(event))))}static async _onToggleGun(event){event.preventDefault(),event.stopPropagation();const li=event.currentTarget.closest(".combatant"),c=await game.combat.combatants.get(li.dataset.combatantId);c.actor.isOwner&&(c.getFlag("CoC7","hasGun")?await c.setFlag("CoC7","hasGun",!1):await c.setFlag("CoC7","hasGun",!0));const newInit=await c.actor.rollInitiative(!!c.getFlag("CoC7","hasGun"));c.getFlag("CoC7","hasGun")?c.initiative<newInit&&game.combat.setInitiative(c.id,newInit):game.combat.setInitiative(c.id,newInit)}}async function rollInitiative(ids,{formula=null,updateTurn=!0,messageOptions={}}={}){const updates=[];for(const[,id]of ids.entries()){const combatant=this.combatants.get(id),roll=await combatant.actor.rollInitiative(!!combatant.getFlag("CoC7","hasGun"));updates.push({_id:id,initiative:roll})}return updates.length?(await this.updateEmbeddedDocuments("Combatant",updates),this):this}class CoCIDBatch extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-batch.hbs",width:700,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!1,submitOnChange:!1})}async getData(){const sheetData=super.getData();return sheetData.foundKeys=Object.keys(sheetData.object.foundKeys).reduce(((out,key)=>(out.push({name:key,key:sheetData.object.foundKeys[key]}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.missingNames=Object.keys(sheetData.object.missingNames).reduce(((out,key)=>(out.push({key:sheetData.object.foundKeys[key]??"",name:key,custom:sheetData.object.missingNames[key],suffix:sheetData.object.missingNames[key].replace(this.object.suffixRegExp,"")}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData}activateListeners(html){super.activateListeners(html),html.find(".existing").change(this.onSetName.bind(this)),html.find(".fa-wand-magic").click(this.onClickGuess.bind(this)),html.find("input").keyup(this.onKeyup.bind(this))}onSetName(event){const obj=$(event.currentTarget);this.object.missingNames[obj.closest("li").data("name")]=obj.val(),this.render(!0)}onClickGuess(event){const name=$(event.currentTarget).closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+CoC7Utilities.toKebabCase(name),this.render(!0)}onKeyup(event){const obj=$(event.currentTarget),name=obj.closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+obj.val()}async _updateObject(event,formData){event.submitter&&(this.object.typeName===game.i18n.localize("CoC7.Entities.Skill")&&(this.close(),await CoCIDBatch.processSkillKeys(this.object.updateList,this.object.missingNames)),this.object.resolve(!0))}static async processSkillKeys(updateList,missingNames){const items=[],actors={},scenes={};for(const update of updateList){update.cocidFlag.id=missingNames[update.name],void 0===update.cocidFlag.lang&&(update.cocidFlag.lang=game.i18n.lang),void 0===update.cocidFlag.priority&&(update.cocidFlag.priority=0),void 0===update.cocidFlag.eras&&(update.cocidFlag.eras={});const flags=flattenObject({flags:{CoC7:{cocidFlag:update.cocidFlag}}});if(void 0!==update.scene){if(void 0===scenes[update.scene]){const scene=game.scenes.get(update.scene);scenes[update.scene]=scene.toObject()}const tokenOffset=scenes[update.scene].tokens.findIndex((t=>t._id===update.token));if(tokenOffset>-1){const itemOffset=scenes[update.scene].tokens[tokenOffset].actorData.items.findIndex((i=>i._id===update.item));if(itemOffset>-1){const expandedFlags=expandObject(Object.entries(flags).reduce(((out,entry)=>(entry[0].match(/^flags\.CoC7\.cocidFlag/)&&(out[entry[0]]=entry[1]),out)),{}));scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset]=mergeObject(scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset],expandedFlags)}}}else if(void 0!==update.actor){void 0===actors[update.actor]&&(actors[update.actor]=[]);const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);actors[update.actor].push(item)}else{const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);items.push(item)}}if(items.length&&await Item.updateDocuments(items),Object.keys(actors).length)for(const actorId of Object.keys(actors))await Item.updateDocuments(actors[actorId],{parent:game.actors.get(actorId)});if(Object.keys(scenes).length)for(const sceneId of Object.keys(scenes)){game.scenes.get(sceneId).update(scenes[sceneId])}return!0}static async populateSkillKeys(updateList,missingNames,foundKeys){for(const actor of game.actors.contents){const actorData=actor.toObject();if(actorData.items)for(const item of actorData.items){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({actor:actor._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}for(const item of game.items.contents){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}for(const scene of game.scenes){const sceneData=scene.toObject();for(const token of sceneData.tokens??[])if(token.actorId&&!token.actorLink){const actorData=duplicate(token.actorData);for(const item of actorData.items??[]){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({scene:sceneData._id,token:token._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}}if(Object.keys(missingNames).filter((key=>""===missingNames[key])).length>0){const items=await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\.skill\./,type:"i",era:!1});for(const item of items)foundKeys[item.name]=item.flags.CoC7.cocidFlag.id;for(const key in flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys??{}))foundKeys[game.i18n.format("CoC7.CoCIDFlag.keys."+key)]=key;for(const name in missingNames)void 0!==foundKeys[name]&&(missingNames[name]=foundKeys[name])}}static async create(type){const updateList=[],missingNames={},foundKeys={};let typeName="",idPrefix="",suffixRegExp=null;return"skill"===type&&(typeName=game.i18n.localize("CoC7.Entities.Skill"),idPrefix="i.skill.",suffixRegExp=/^i\.skill\./,await CoCIDBatch.populateSkillKeys(updateList,missingNames,foundKeys),0===Object.keys(missingNames).filter((key=>""===missingNames[key])).length?(await CoCIDBatch.processSkillKeys(updateList,missingNames),!0):new Promise((resolve=>{new CoCIDBatch({typeName,idPrefix,suffixRegExp,updateList,missingNames,foundKeys,resolve}).render(!0)})))}}class Updater{static async checkForUpdate(){let systemUpdateVersion=game.settings.get("CoC7","systemUpdateVersion");game.actors.size+game.scenes.size+game.items.size+game.journal.size+game.tables.size===0&&(systemUpdateVersion=game.system.version,await game.settings.set("CoC7","systemUpdateVersion",systemUpdateVersion));const runMigrate=isNewerVersion(game.system.version,systemUpdateVersion??"0");this.updatedModules=game.settings.get("CoC7","systemUpdatedModuleVersion")||{},this.currentModules={};for(const pack of game.packs)if(!["CoC7","world"].includes(pack.metadata.packageName)&&["Actor","Item","Scene"].includes(pack.metadata.type)&&!Object.prototype.hasOwnProperty.call(this.currentModules,pack.metadata.packageName)){const module=game.modules.get(pack.metadata.packageName);module&&(!runMigrate&&Object.prototype.hasOwnProperty.call(this.updatedModules,module.id)&&String(this.updatedModules[module.id])===String(module.version)||(this.currentModules[module.id]=module.version))}(runMigrate||Object.keys(this.currentModules).length>0)&&(game.user.isGM?new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format(0===Object.keys(this.currentModules).length?"CoC7.Migrate.Message":"CoC7.Migrate.WithModulesMessage",{version:game.system.version,modules:"<ul><li>"+Object.keys(this.currentModules).map((mod=>game.modules.get(mod).title)).join("</li><li>")+"</li></ul>"}),buttons:{update:{label:game.i18n.localize("CoC7.Migrate.ButtonUpdate"),callback:async()=>Updater.update()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0):new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.GMRequired",{version:game.system.version}),buttons:{OK:{label:game.i18n.localize("CoC7.Migrate.ButtonOkay")}}}).render(!0))}static async update(){await this.updateDocuments(),game.settings.get("CoC7","pulpRules")&&(game.settings.set("CoC7","pulpRuleDoubleMaxHealth",!0),game.settings.set("CoC7","pulpRuleDevelopmentRollLuck",!0),game.settings.set("CoC7","pulpRuleArchetype",!0),game.settings.set("CoC7","pulpRuleOrganization",!0),game.settings.set("CoC7","pulpRuleTalents",!0),game.settings.set("CoC7","pulpRuleFasterRecovery",!0),game.settings.set("CoC7","pulpRuleIgnoreMajorWounds",!0),game.settings.set("CoC7","pulpRuleIgnoreAgePenalties",!0)),await CoCIDBatch.create("skill");const settings=mergeObject(this.updatedModules||{},this.currentModules);game.settings.set("CoC7","systemUpdatedModuleVersion",settings),game.settings.set("CoC7","systemUpdateVersion",game.system.version),ui.notifications.info(game.i18n.format("CoC7.Migrate.Complete"),{permanent:!0})}static async updateDocuments(){for(const actor of game.actors.contents)try{const updateData=this.migrateActorData(actor.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Actor document ${actor.name}`),await actor.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorActor",{name:actor.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const item of game.items.contents)try{const updateData=Updater.migrateItemData(item.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Item document ${item.name}`),await item.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorItem",{name:item.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const table of game.tables.contents)try{const updateData=Updater.migrateTableData(table.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Table document ${table.name}`),await table.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorTable",{name:table.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const macro of game.macros.contents)try{const updateData=Updater.migrateMacroData(macro.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Macro document ${macro.name}`),await macro.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorMacro",{name:macro.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const scene of game.scenes)try{const updateData=Updater.migrateSceneData(scene);foundry.utils.isEmpty(updateData)||(console.log(`Migrating Scene document ${scene.name}`),await scene.update(updateData,{enforceTypes:!1})),scene.tokens.forEach((t=>t._actor=null))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorScene",{name:scene.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const pack of game.packs)"CoC7"!==pack.metadata.packageName&&["Actor","Item","Macro","RollTable","Scene"].includes(pack.metadata.type)&&await Updater.migrateCompendiumData(pack)}static migrateActorData(actor){const updateData={};if(Updater._migrateActorCharacterSanity(actor,updateData),Updater._migrateActorArtwork(actor,updateData),Updater._migrateActorKeeperNotes(actor,updateData),Updater._migrateActorNpcCreature(actor,updateData),Updater._migrateActorStatusEffectActive(actor,updateData),Updater._migrateActorSanLossReasons(actor,updateData),Updater._migrateActorMonetary(actor,updateData),actor.items){const items=actor.items.reduce(((arr,i)=>{const itemData=i instanceof CONFIG.Item.documentClass?i.toObject():i,itemUpdate=Updater.migrateItemData(itemData);return foundry.utils.isEmpty(itemUpdate)||(itemUpdate._id=itemData._id,arr.push(expandObject(itemUpdate))),arr}),[]);items.length>0&&(updateData.items=items)}return updateData}static async migrateCompendiumData(pack){const documentType=pack.metadata.type;if(!["Actor","Item","Macro","RollTable","Scene"].includes(documentType))return;const wasLocked=pack.locked;await pack.configure({locked:!1});try{await pack.migrate()}catch(err){console.log("pack migrate failed",pack,err)}const documents=await pack.getDocuments();for(const doc of documents){let updateData={};try{switch(documentType){case"Actor":updateData=Updater.migrateActorData(doc.toObject());break;case"Item":updateData=Updater.migrateItemData(doc.toObject());break;case"Macro":updateData=Updater.migrateMacroData(doc.toObject());break;case"RollTable":updateData=Updater.migrateTableData(doc.toObject());break;case"Scene":updateData=Updater.migrateSceneData(doc)}foundry.utils.isEmpty(updateData)||(console.log(`Migrated ${documentType} document ${doc.name} in Compendium ${pack.collection}`),await doc.update(updateData))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorDocumentPack",{name:doc.name,collection:pack.collection,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}}await pack.configure({locked:wasLocked})}static migrateItemData(item){const updateData={};return Updater._migrateItemEmbeddedv10(item,updateData),Updater._migrateItemExperience(item,updateData),Updater._migrateItemArtwork(item,updateData),Updater._migrateItemBookAutomated(item,updateData),Updater._migrateItemKeeperNotes(item,updateData),Updater._migrateItemSpellAutomated(item,updateData),Updater._migrateItemKeeperNotesMerge(item,updateData),Updater._migrateItemEras(item,updateData),Updater._migrateItemv10(item,updateData),Updater._migrateItemBookUnits(item,updateData),updateData}static migrateMacroData(table){const updateData={};return Updater._migrateMacroArtwork(table,updateData),updateData}static migrateTableData(table){const updateData={};return Updater._migrateTableArtwork(table,updateData),updateData}static migrateSceneData(scene){const returns={tokens:[]};return void 0!==scene.tokens&&scene.tokens.length&&(returns.tokens=scene.tokens.map((token=>{const t=token.toObject(),updateData={};if(Updater._migrateTokenArtwork(t,updateData),Object.keys(updateData).length&&foundry.utils.mergeObject(t,updateData),!t.actorId||t.actorLink)t.actorData={};else if(game.actors.has(t.actorId)){if(!t.actorLink){const actorData=foundry.utils.duplicate(t.actorData);actorData.type=token.actor?.type;const update=Updater.migrateActorData(actorData);["items","effects"].forEach((embeddedName=>{if(!update[embeddedName]?.length)return;const updates=new Map(update[embeddedName].map((u=>[u._id,u])));t.actorData[embeddedName].forEach((original=>{const update=updates.get(original._id);update&&mergeObject(original,update)})),delete update[embeddedName]})),mergeObject(t.actorData,update)}}else t.actorId=null,t.actorData={};return t}))),returns}static _migrateItemKeeperNotes(item,updateData){return["archetype","chase","item","occupation","setup","skill","spell","status","talent","weapon"].includes(item.type)&&("string"==typeof item.system.description?updateData["system.description"]={value:item.system.description,keeper:""}:void 0===item.system.description||null===item.system.description?updateData["system.description"]={value:"",keeper:""}:void 0===item.system.description.keeper&&(updateData["system.description.keeper"]="")),updateData}static _migrateItemExperience(item,updateData){return"skill"===item.type&&void 0===item.system.adjustments?.experience&&(updateData["system.adjustments.experience"]=0),updateData}static _migrateItemArtwork(item,updateData){let image=String(item.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),"setup"===item.type)for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].img="systems/CoC7/assets/icons/"+image[1]))}else if("book"===item.type)for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.spells"]&&(updateData["system.spells"]=item.system.spells),updateData["system.spells"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));return updateData}static _migrateItemSpellAutomated(item,updateData){"spell"===item.type&&void 0!==item.system.cost&&(updateData["system.castingTime"]=item.system.castingTime||"",updateData["system.costs.hitPoints"]=item.system.cost.hp||0,updateData["system.costs.magicPoints"]=item.system.cost.mp||0,updateData["system.costs.sanity"]=item.system.cost.san||0,updateData["system.costs.power"]=item.system.cost.pow||0,updateData["system.costs.others"]="",updateData["system.-=cost"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null)}static _migrateItemBookAutomated(item,updateData){return"book"===item.type&&void 0!==item.system.description.unidentified&&(updateData["system.author"]=item.system.author||"",updateData["system.date"]=item.system.date||"",updateData["system.language"]=item.system.language||"",updateData["system.sanityLoss"]=item.system.sanLoss||0,updateData["system.mythosRating"]=Number(item.system.mythosRating)||0,updateData["system.content"]=item.system.description.unidentified,updateData["system.description.keeper"]=item.system.description.notes,updateData["system.difficultyLevel"]="regular",updateData["system.fullStudies"]=0,updateData["system.initialReading"]=!1,updateData["system.keeperNotes"]="",updateData["system.gains.cthulhuMythos.initial"]=Number(item.system.gain.cthulhuMythos.CMI)||0,updateData["system.gains.cthulhuMythos.final"]=Number(item.system.gain.cthulhuMythos.CMF)||0,updateData["system.gains.occult"]=Number(item.system.gain.occult)||0,updateData["system.gains.others"]=[],updateData["system.study"]={necessary:Number(item.system.weeksStudyTime)||0,progress:0,units:"CoC7.weeks"},updateData["system.-=sanLoss"]=null,updateData["system.-=weeksStudyTime"]=null,updateData["system.-=gain"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null,updateData["system.gains.-=other"]=null,updateData["system.-=properties"]=null,updateData["system.-=flags"]=null),updateData}static _migrateItemBookUnits(item,updateData){"book"===item.type&&void 0!==item.system.study.necessary&&void 0===item.system.study.units&&(updateData["system.study.units"]="CoC7.weeks")}static _migrateItemKeeperNotesMerge(item,updateData){"spell"!==item.type&&"book"!==item.type||(void 0!==item.system.notes&&(void 0!==item.system.description.keeper?updateData["system.description.keeper"]=item.system.description.keeper+item.system.notes:updateData["system.description.keeper"]=item.system.notes,updateData["system.-=notes"]=null),void 0!==item.system.keeperNotes&&(void 0!==updateData["system.description.keeper"]?updateData["system.description.keeper"]=item.system.keeperNotes+updateData["system.description.keeper"]:updateData["system.description.keeper"]=item.system.keeperNotes,updateData["system.-=keeperNotes"]=null))}static _migrateItemEmbeddedv10(item,updateData){if("occupation"===item.type){let changed=!1;for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&void 0===v.system&&(item.system.groups[o].skills[k].system=v.data,changed=!0);changed&&(updateData["system.groups"]=item.system.groups)}if(["setup"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&void 0===v.system&&(item.system.items[k].system=v.data,changed=!0);changed&&(updateData["system.items"]=item.system.items)}if(["archetype","occupation"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&void 0===v.system&&(item.system.skills[k].system=v.data,changed=!0);changed&&(updateData["system.skills"]=item.system.skills)}if(["book"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&void 0===v.system&&(item.system.spells[k].system=v.data,changed=!0);changed&&(updateData["system.spells"]=item.system.spells)}}static _migrateItemv10(item,updateData){if("skill"!==item.type||void 0!==item.system.skillName&&""!==item.system.skillName){if("setup"===item.type){for(const[k,v]of Object.entries(item.system.items))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].name=v.name,"Uniki"===updateData["system.items"][k].name&&(updateData["system.items"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.items"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.items"][k].name=parts.name,updateData["system.items"][k].system.skillName=parts.skillName,updateData["system.items"][k].system.specialization=parts.specialization}}else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].name=v.name,"Uniki"===updateData["system.groups"][o].skills[k].name&&(updateData["system.groups"][o].skills[k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.groups"][o].skills[k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.groups"][o].skills[k].name=parts.name,updateData["system.groups"][o].skills[k].system.skillName=parts.skillName,updateData["system.groups"][o].skills[k].system.specialization=parts.specialization}}else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}}else{updateData.name=item.name,"Uniki"===updateData.name&&(updateData.name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData.name,"string"==typeof item.system.specialization?.group?item.system.specialization.group:item.system.specialization);updateData.name=parts.name,updateData["system.skillName"]=parts.skillName,updateData["system.specialization"]=parts.specialization}}static _migrateItemEras(item,updateData){if(void 0!==item.system.eras){let eras={};for(const[key,value]of Object.entries(item.system.eras))if(!0===value||"string"!=typeof value&&void 0!==value.selected)switch(key){case"1920":eras.standard=!0;break;case"mdrn":eras.modern=!0,eras.modernPulp=!0;break;case"pulp":eras.pulp=!0;break;case"ddts":eras.downDarkerTrails=!0,eras.downDarkerTrailsPulp=!0;break;case"drka":eras.darkAges=!0,eras.darkAgesPulp=!0;break;case"glit":eras.gasLight=!0;break;case"nvct":eras.invictus=!0}if("setup"===item.type){const key=Object.keys(eras)[0];eras=key?{[key]:!0}:{standard:!0}}const CoC7={cocidFlag:{id:"",lang:game.i18n.lang,priority:0,eras}};void 0===item.flags?.CoC7?(item.flags.CoC7=CoC7,updateData["flags.CoC7"]=CoC7):void 0===item.flags?.CoC7?.cocidFlag?(item.flags.CoC7.cocidFlag=CoC7.cocidFlag,updateData["flags.CoC7.cocidFlag"]=CoC7.cocidFlag):(item.flags.CoC7.cocidFlag.eras=CoC7.cocidFlag.eras,updateData["flags.CoC7.cocidFlag.eras"]=CoC7.cocidFlag.eras),updateData["system.-=eras"]=null}}static _migrateActorArtwork(actor,updateData){let image=String(actor.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),void 0!==actor.prototypeToken&&void 0!==actor.prototypeToken.texture?.src&&(image=String(actor.prototypeToken.texture.src).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(updateData["prototypeToken.texture.src"]="systems/CoC7/assets/icons/"+image[1])),void 0!==actor.effects)for(const[k,v]of Object.entries(actor.effects))image=String(v.icon).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.effects&&(updateData.effects=actor.effects),updateData.effects[k].icon="systems/CoC7/assets/icons/"+image[1])}static _migrateActorKeeperNotes(actor,updateData){["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&void 0===actor.system.description&&(updateData["system.description"]={keeper:""})}static _migrateActorMonetary(actor,updateData){if("character"===actor.type&&void 0!==actor.system.credit?.multiplier){updateData["system.monetary.symbol"]=actor.system.credit?.monetarySymbol?actor.system.credit.monetarySymbol:"$",""===updateData["system.monetary.symbol"].toString().trim()&&(updateData["system.monetary.symbol"]="$");const multiplier=parseInt(actor.system.credit.multiplier)?parseInt(actor.system.credit.multiplier):1;if(updateData["system.monetary.spent"]=actor.system.credit.spent,updateData["system.monetary.assetsDetails"]=actor.system.credit.assetsDetails,updateData["system.monetary.spendingLevel"]=actor.system.credit.spendingLevel,updateData["system.monetary.cash"]=actor.system.credit.cash,updateData["system.monetary.assets"]=actor.system.credit.assets,updateData["system.monetary.values"]=duplicate(actor.system.monetary.values),1!==multiplier)for(const value of updateData["system.monetary.values"])value.cashValue=multiplier*value.cashValue,value.assetsValue=multiplier*value.assetsValue,value.spendingValue=multiplier*value.spendingValue;updateData["system.-=credit"]=null}}static _migrateActorSanLossReasons(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.encounteredCreatures){const groups={};for(const sanityLossEvent of actor.system.encounteredCreatures)sanityLossEvent.totalLoss>0&&(groups[sanityLossEvent.name]=Math.max(groups[sanityLossEvent.name]??0,sanityLossEvent.totalLoss));const sanityLossEvents=[];for(const name in groups)sanityLossEvents.push({type:name,totalLoss:groups[name],immunity:!1});updateData["system.sanityLossEvents"]=sanityLossEvents,updateData["system.-=encounteredCreatures"]=null}}static _migrateActorStatusEffectActive(actor,updateData){if(["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&(void 0!==actor.system.status||void 0===actor.system.conditions)){if(updateData["system.conditions.criticalWounds.value"]=!1,updateData["system.conditions.unconscious.value"]=!1,updateData["system.conditions.dying.value"]=!1,updateData["system.conditions.dead.value"]=!1,updateData["system.conditions.prone.value"]=!1,updateData["system.conditions.tempoInsane.value"]=!1,updateData["system.conditions.indefInsane.value"]=!1,void 0!==actor.system.status?.criticalWounds?.value&&actor.system.status?.criticalWounds.value&&(updateData["system.conditions.criticalWounds.value"]=!0),void 0!==actor.system.status?.unconscious?.value&&actor.system.status?.unconscious.value&&(updateData["system.conditions.unconscious.value"]=!0),void 0!==actor.system.status?.dying?.value&&actor.system.status?.dying.value&&(updateData["system.conditions.dying.value"]=!0),void 0!==actor.system.status?.dead?.value&&actor.system.status?.dead.value&&(updateData["system.conditions.dead.value"]=!0),void 0!==actor.system.status?.prone?.value&&actor.system.status?.prone.value&&(updateData["system.conditions.prone.value"]=!0),void 0!==actor.system.status?.tempoInsane?.value&&actor.system.status?.tempoInsane.value&&(updateData["system.conditions.tempoInsane.value"]=!0),void 0!==actor.system.status?.indefInsane?.value&&actor.system.status?.indefInsane.value&&(updateData["system.conditions.indefInsane.value"]=!0),void 0!==actor.effects){const effects=actor.effects;let changed=!1;for(let i=0,im=effects.length;i<im;i++){const effect=effects[i],match=effect.icon.match(/\/(hanging-spider|tentacles-skull|arm-sling|heart-beats|tombstone|knocked-out-stars|falling|skull|unconscious)\./);if(null!==match){let statusId="";switch(match[1]){case"hanging-spider":statusId="tempoInsane";break;case"tentacles-skull":statusId="indefInsane";break;case"arm-sling":statusId="criticalWounds";break;case"heart-beats":statusId="dying";break;case"tombstone":case"skull":statusId="dead";break;case"knocked-out-stars":case"unconscious":statusId="unconscious";break;case"falling":statusId="prone"}""!==statusId&&(updateData[`system.conditions.${statusId}.value`]||(updateData[`system.conditions.${statusId}.value`]=!0,changed=!0),effect.flags.core?.statusId!==statusId&&(effects[i]=mergeObject(effect,{flags:{core:{statusId}}}),changed=!0))}}changed&&(updateData.effects=effects)}updateData["system.-=status"]=null}return updateData}static _migrateActorNpcCreature(actor,updateData){return["npc"].includes(actor.type)&&void 0!==actor.system&&(void 0===actor.system.special&&(updateData["system.special"]={checkPassed:null,checkFailled:null}),void 0===actor.system.attacksPerRound&&(updateData["system.attacksPerRound"]=1)),updateData}static _migrateActorCharacterSanity(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.attribs?.san){const oneFifthSanity=Math.ceil(actor.system.attribs.san.value/5);void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.attribs.san.oneFifthSanity&&null!==actor.system.attribs.san.oneFifthSanity||(updateData["system.attribs.san.oneFifthSanity"]=" / "+oneFifthSanity),void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.value&&null!==actor.system.indefiniteInsanityLevel.value||(updateData["system.indefiniteInsanityLevel.value"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.max&&null!==actor.system.indefiniteInsanityLevel.max||(updateData["system.indefiniteInsanityLevel.max"]=oneFifthSanity),void 0!==actor.system.attribs.mp&&(void 0!==actor.system.attribs.mp.value&&null!==actor.system.attribs.mp.value||(updateData["system.attribs.mp.value"]=oneFifthSanity),void 0!==actor.system.attribs.mp.max&&null!==actor.system.attribs.mp.max||(updateData["system.attribs.mp.max"]=oneFifthSanity)),void 0!==actor.system.notes&&null!==actor.system.notes||(updateData["system.notes"]="")}return updateData}static _migrateMacroArtwork(table,updateData){const image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}static _migrateTableArtwork(table,updateData){let image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(table.results))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.results&&(updateData.results=table.results),updateData.results[k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateTokenArtwork(token,updateData){const image=String(token.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}}const nameCharacters="\\u3000\\u3400-\\u4DBF\\u4E00-\\u9FFF\\w\\(\\)\\-\\/&\"'"+CoC7Utilities.quoteRegExp("áéíóàèìòùÀÈÌÒÙáéíóúýÁÉÍÓÚÝâêîôûÂÊÎÔÛãñõÃĀÑÕäëïöüÿÄËÏÖÜŸàèçÇßØøÅåÆæœ“”«»ąćęłńóśźżĄĆĘŁŃÓŚŹŻ"),keys={en:{description:"CoC7.English",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:skills(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:languages)[:\n]",sectionSpells:"\n(?:spells)[:\n]",handgun:"(?<type> Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Grenade|Dynamite)",example:"Example Character, age 27\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85 SAN 55 HP 14 DB: 1D4\nBuild: 1 Move: 7 MP: 10 Luck: 40 Armor: 1\nAttacks per round: 3 SAN loss: 1d4/1d8\nCombat\nBite 50% (25/10), damage 1D6\nBrawl 30% (15/6), damage 1D3\nDerringer 40% (20/8), damage 1D8+1\nDodge 50% (25/10)\nSkills\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLanguages: English 80%, Eklo 5%.\nSpells: Summon NPC, Dispel NPC."},de:{description:"CoC7.German",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",diceShort:"w|d",fulldb:"(Schadensbonus|Sb)",halfdb:"(½|1/2 Schadensbonus|Sb/2)",sectionCombats:"\n(?:Kampf|Angriff:|ANGRIFFE)[:\n]",newCombatHeader:"\nKampf\n",sectionSkills:"\n(?:Fertigkeiten(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Sprachen)[:\n]",sectionSpells:"\n(?:Zauber)[:\n]",handgun:"(?<type> Gun|Revolver|Pistole|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Gewehr|Schrotflinte|Carabiner|Karabiner|Gauge |Lee-Enfield|Elefanten)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Granate|Dynamit)",example:"Vorname Nachname\nAlter: 29\nBeruf: Ein Beruf\nST 50\nMA 60\nKO 60\nGE 60\nGR 55\nER 65\nIN 80\nBI 85\nTrefferpunkte: 11\nGeistige Stabilität: 60\nSchadensbonus: 0\nStatur: 0\nMagiepunkte: 12\nBewegungsweite: 8\n\nKampf\nAngriffe: 1\nHandgemenge 30% (15/6), Schaden 1D3\nMesser 30% (15/6), Schaden 1D4\nAusweichen 30% (15/6)\n\nFertigkeiten: Anthropologie 70% (35/14), Archäologie 30% (15/6), Bibliotheksnutzung 50% (25/10), Erste Hilfe 50% (25/10), Finanzkraft 40% (20/8), Geschichte 60% (30/12), Klettern 50% (25/10)\n\nSprachen: Englisch 85% (42/17); Deutsch 45% (22/9), Latein 45% (22/9)"},pl:{description:"CoC7.Polish",dbNone:"brak",armorNone:"brak",attacksPerRoundNone:"brak",sanLossNone:"brak",diceShort:"k|d",fulldb:"(Modyfikator Obrażeń|MO)",halfdb:"(½|1/2 MO|MO/2)",sectionCombats:"\n(?:Walka|Ataki)[:\n]",newCombatHeader:"\nWalka\n",sectionSkills:"\n(?:Umiejętności(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Języki)[:\n]",sectionSpells:"\n(?:Zaklęcia)[:\n]",handgun:"(?<type> Pistolet|Rewolwer|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Karabin|Strzelba|Wiatrówka|Garand|Gauge |Lee-Enfield|Strzelba na słonie)",smb:"(?<type>Pistolet maszynowy|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Mołotowa|Granat|Laska dynamitu|Dynamit)",example:"Przykładowa postać, 27 lat\nBibliotekarz\nS 75 KON 60 BC 80 ZR 70 WYG 60 INT 80\nMOC 50 WYK 85 P 55 PW 14 MO: 1D4\nKrzepa: 1 Ruch: 7 PM: 10 Szczęście: 40 Pancerz: 1\nAtaki w rundzie: 3 Utrata Poczytalności: 1K4/1K8\nWalka\nUgryzienie 50% (25/10), obrażenia 1K6\nWalka 30% (15/6), obrażenia 1K3\nDerringer 40% (20/8), obrażenia 1K8+1\nUnik 50% (25/10)\nUmiejętności\nTresura Zwierząt 55%, Urok Osobisty 30%, Pierwsza Pomoc 25%, Ukrywanie 20%,\nNasłuchiwanie 50%, Medycyna 45%, Przekonywanie 25%, Psychologia 75%,\nNauka (Astronomia) 90%, Nauka (Botanika) 35%, Nauka (Zoologia) 10%,\nSpostrzegawczość 35%, Ukrywanie 10%\nJęzyki: Angielski 80%, Eklo 5%.\nZaklęcia: Przyzwanie NPC, Odesłanie NPC."},fr:{description:"CoC7.French",dbNone:"Acune",armorNone:"(?:Acune|aucune)",attacksPerRoundNone:"Acune",sanLossNone:"Acune",fulldb:"(BD|Bonus aux dommages|Impact|Imp)",halfdb:"(½|1/2 Imp|Imp/2)",sectionCombats:"\n(?:Combat|Armes|Attaques)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:Compétences(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Langues?)\\s*[:\n]",sectionSpells:"\n(?:Sortilèges\\s*|Sorts)[:\n]",handgun:"(?<type>Revolver|Pistolet|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Carabine|Lee-Enfield|Fusil)",smb:"(?<type>SMG|Thompson)",machineGun:"(?<type>Browning|Vickers|Mitrailleuse)",launched:"(?<type>Boomerang de guerre|Javeline|Pierre|Shuriken|Bâton de dynamite|Cocktail Molotov|Grenade à main|Molotov|Grenade|Dynamite)",example:"Example Character, 27 ans\nFOR 75 CON 60 TAI 80 DEX 70 APP 60 INT 80\nPOU 50 ÉDU 85 SAN 55 PV 14 BD: 1D4\nCarrure: 1 Mvt: 7 PM: 10 Chance: 40 Armure: 1\nAttaques par round 3 Perte de SAN: 1d4/1d8\nAttaques\nBite 50% (25/10), dommage 1D6\nBrawl 30% (15/6), dommage 1D3\nDerringer 40% (20/8), dommage 1D8+1\nEsquiver 50% (25/10)\nCompétences\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLangue: English 80%, Eklo 5%.\nSortilèges: Summon NPC, Dispel NPC."},es:{description:"CoC7.Spanish",dbNone:"ninguna",armorNone:"ninguna",attacksPerRoundNone:"ninguno",sanLossNone:"no",fulldb:"(BD|bd|bonificación de daño)",halfdb:"(½|medio daño|mitad|daño a la mitad)",sectionCombats:"\n(?:Combate|Armas)[:\n]",newCombatHeader:"\nCombate\n",sectionSkills:"\n(?:Habilidades(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Idiomas|Lenguajes|Lenguas)[:\n]",sectionSpells:"\n(?:Conjuros|Hechizos)[:\n]",handgun:"(?<type>Revolver|Pistola|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Carabina|Lee-Enfield|Caza Elefantes|Fusil|Escopeta|Galga|Recortada)",smb:"(?<type>Subfusil|Thompson)",machineGun:"(?<type>Browning|Vickers|Ametralladora)",launched:"(?<type>Molotov|Granada|Dinamita)",example:"Example Character, 27 años\nFUE 75 CON 60 TAM 80 DES 70 APA 60 INT 80\nPOD 50 EDU 85 COR 55 PV 14 BD: 1D4\nCorpulencia: 1 Movimiento: 7 PM: 10 Suerte: 40 Armadura: 1\nNúmero de Ataques 3 Pérdida de cordura: 1d4/1d8\nCombate\nBite 50% (25/10), daño 1D6\nBrawl 30% (15/6), daño 1D3\nDerringer 40% (20/8), daño 1D8+1\nEsquivar 50% (25/10)\nHabilidades\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nIdiomas: English 80%, Eklo 5%.\nConjuros: Summon NPC, Dispel NPC."},"zh-TW":{description:"CoC7.TraditionalChinese",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB|傷害加值)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks|戰鬥技能|戰鬥列表|武器)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:(?:Skills|技能列表)(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Languages|語言)[:\n]",sectionSpells:"\n(?:spells|咒文列表|咒文)[:\n]",handgun:"(?<type> 遂發槍|\\.22短口自動手槍|\\.25短口手槍(單管)|\\.32或7\\.65mm左輪手槍|\\.32或7\\.65mm自動手槍|\\.357 Magnum左輪手槍|\\.38或9mm左輪手槍|\\.38自動手槍|貝雷塔M9|格洛克17|9mm自動手槍|魯格P08|\\.41左輪手槍|\\.44馬格南左輪手槍|\\.45左輪手槍|\\.45自動手槍|沙漠之鷹|Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>步槍|卡賓槍|半自動步槍|獵象槍|Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson|衝鋒槍)",machineGun:"(?<type>Browning|Vickers|機槍)",launched:"(?<type>Molotov|Grenade|Dynamite爆炸物|手榴彈|重武器)",example:"示範角色, 年齡 27\n力量 75 體質 60 體型 80 敏捷 70 外貎 60 智力 80\n意志 50 教育 85 SAN 55 HP 14 DB: 1D4\n體格: 1 Move: 7 MP: 10 幸運: 40 護甲: 1\n攻擊次數: 3 理智喪失: 1d4/1d8\n戰鬥列表\n咬 50% (25/10), 傷害 1D6\n空手 30% (15/6), 傷害 1D3\n手槍 40% (20/8), 傷害 1D8+1\n閃避 50% (25/10)\n技能列表\n動物馴養 55%, 取悅 30%, 急救 25%, 潛行 20%,\n聆聽 50%, 藥學 45%, 精神分析 25%, 心理學 75%,\n科學 (司法科學) 90%, 科學 (密碼學) 35%, \n偵查 35%, 喬裝 10%\n語言: 粵語 80%, 讀唇 5%.\n咒文: 召喚 NPC, 指揮 NPC."}},translations={en:{age:"(?<![a-z])age(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.en.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.en.dbNone+")[,\\s\n]*",build:"(?<![a-z])Build(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor(\\s*:)?\\s+(?<armor>"+keys.en.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks)(\\s*:)?\\s+(?<attacksPerRound>"+keys.en.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss)(\\s*:)?\\s+(?<sanLoss>"+keys.en.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*damage)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.en.fulldb+"|"+keys.en.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Fighting|Firearms|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.en.sectionCombats+"|"+keys.en.sectionSkills+"|"+keys.en.sectionLangauges+"|"+keys.en.sectionSpells+")"},de:{age:"(?<![a-z])Alter(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Beruf(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])ST(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KO(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])GR(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])IN(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MA(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])GE(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])ER(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])BI(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:gS|STA|Geistige Stabilität)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:TP|Trefferpunkte)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magiepunkte)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.de.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|W\\d+)?|"+keys.de.dbNone+")[,\\s\n]*",build:"(?<![a-z])(?:Statur|Stat.)(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Panzerung(\\s*:)?\\s+(?<armor>"+keys.de.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:BW|Bewegungsweite)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Glück(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Angriffe pro Runde|Angriffe|Pro Runde)(\\s*:)?\\s+(?<attacksPerRound>"+keys.de.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Stabilitätsverlust)(\\s*:)?\\s+(?<sanLoss>"+keys.de.sanLossNone+"|\\d[DW]?[+\\d]*\\/\\d[DW]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*Schaden)?\\s+(?<damage>(:?(:?\\d+w|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.de.fulldb+"|"+keys.de.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d|w)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Ausweichen)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,;]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Angriffe|Handgemenge|Nahkampf|Faustfeuerwaffe|Beißen)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.de.sectionCombats+"|"+keys.de.sectionSkills+"|"+keys.de.sectionLangauges+"|"+keys.de.sectionSpells+")"},pl:{age:"(?<age>\\d+)\\s+(?:lata|lat|rok)[,\\s]*",occupation:"[,\\s]*Zawód(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])S(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])BC(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MOC(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])ZR(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])WYG(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])WYK(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:P|Poczytalność)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PW|Punkty Wytrzymałości)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Punkty Magii)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.pl.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|K\\d+)?|"+keys.pl.dbNone+")[,\\s\n]*",build:"(?<![a-z])Krzepa(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Pancerz(\\s*:)?\\s+(?<armor>"+keys.pl.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Ruch(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Szczęście(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Ataki w rundzie|# Ataki)(\\s*:)?\\s+(?<attacksPerRound>"+keys.pl.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Utrata Poczytalności|utrata P)(\\s*:)?\\s+(?<sanLoss>"+keys.pl.sanLossNone+"|\\d[DK]?[+\\d]*\\/\\d[DK]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*obrażenia)?\\s+(?<damage>(:?(:?\\d+k|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.pl.fulldb+"|"+keys.pl.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Unik)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Walka|Broń Palna|Bijatyka|Ugryzienie)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.pl.sectionCombats+"|"+keys.pl.sectionSkills+"|"+keys.pl.sectionLangauges+"|"+keys.pl.sectionSpells+")"},fr:{age:"(?<age>\\d+)\\s*ans(?![a-z])[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FOR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAI(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POU(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])ÉDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<!([a-z]|de\\s))(?:SAN|Santé Mentale)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Points de vie)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Points de magie)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.fr.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.fr.dbNone+")[,\\s\n]*",build:"(?<![a-z])Carrure(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])(?:Armure|Protection)(\\s*:)?\\s+(?<armor>"+keys.fr.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:Mvt|Mouvement|Déplacement)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Chance(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attaques par round)(\\s*:)?\\s+(?<attacksPerRound>"+keys.fr.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Perte de Santé mentale|Perte de SAN)(\\s*:)?\\s+(?<sanLoss>"+keys.fr.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:dommage|dégâts))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.fr.fulldb+"|"+keys.fr.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquiver?)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Au contact|À distance|Combat rapproché|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.fr.sectionCombats+"|"+keys.fr.sectionSkills+"|"+keys.fr.sectionLangauges+"|"+keys.fr.sectionSpells+")"},es:{age:"(?<age>\\d+)\\s*a[ñÑ]os(?![a-z])[,\\s]*",occupation:"[,\\s]*Ocupación(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FUE(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAM(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POD(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DES(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APA(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:COR|Cordura)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Puntos de vida|P\\. ?V\\.)(\\s*:)?\\s+(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Puntos Mágicos|Puntos de Magia)(\\s*:)?\\s+(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.es.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.es.dbNone+")[,\\s\n]*",build:"(?<![a-z])Corpulencia(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armadura(\\s*:)?\\s+(?<armor>"+keys.es.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Movimiento(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Suerte(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Número de Ataques)(\\s*:)?\\s+(?<attacksPerRound>"+keys.es.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Pérdida de cordura|Pérdida de COR)(\\s*:)?\\s+(?<sanLoss>"+keys.es.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*daño)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.es.fulldb+"|"+keys.es.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquivar)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Combatir|Armas de fuego|Pelea|Mordisco)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.es.sectionCombats+"|"+keys.es.sectionSkills+"|"+keys.es.sectionLangauges+"|"+keys.es.sectionSpells+")"},"zh-TW":{age:"(?<![a-z])age|年齡(\\s*:)?\\s*(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR|力量(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON|體質(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ|體型(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT|智力(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW|意志(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX|敏捷(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP|外貎(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU|教育(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity|理智)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points|生命)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys["zh-TW"].fulldb+")(\\s*:)?\\s*(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys["zh-TW"].dbNone+")[,\\s\n]*",build:"(?<![a-z])Build|體格(\\s*:)?\\s*(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor|護甲(\\s*:)?\\s*(?<armor>"+keys["zh-TW"].armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck|幸運(\\s*:)?\\s*(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks|攻擊次數|# 攻擊)(\\s*:)?\\s*(?<attacksPerRound>"+keys["zh-TW"].attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss|理智喪失|SAN值損失|SAN值喪失|扣SAN)(\\s*:)?\\s*(?<sanLoss>"+keys["zh-TW"].sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:damage|傷害))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys["zh-TW"].fulldb+"|"+keys["zh-TW"].halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge|閃避|閃躲)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%?(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(近戰技能|射擊技能|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys["zh-TW"].sectionCombats+"|"+keys["zh-TW"].sectionSkills+"|"+keys["zh-TW"].sectionLangauges+"|"+keys["zh-TW"].sectionSpells+")"}};class CoC7ActorImporterRegExp{static checkLanguage(lang=null){return lang||(lang=game.i18n.lang),void 0===translations[lang]&&(lang="en"),lang}static getExampleText(lang){let example=keys.en.example;return void 0!==keys[lang]&&(example=keys[lang].example),example}static getTranslations(){const output={};for(const key in keys)output[key]=keys[key].description;return output}static getKeys(lang){return keys[lang]||keys.en}static getRegularExpressions(lang){return translations[lang]||translations.en}}class CoC7ActorImporter{constructor(){this.parsed={},this.itemLocations=""}static get asNumber(){return"n"}static get asString(){return"s"}getRegEx(regex,modifiers="iu"){return"RegExp"===regex.constructor?.name?regex:new RegExp(regex,modifiers)}cleanString(s){return s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*\.?\s*\.?$/,"")}translateRoll(s){if(void 0===s)return s;if(void 0!==this.keys.diceShort){const regEx=new RegExp("(?<n1>\\d+)"+this.keys.diceShort+"(?<n2>\\d+)","iug");return s.replace(regEx,"$<n1>D$<n2>")}return s}toHTML(s){return 0===s.trim().length||0===(s=s.trim().split("\n").map((text=>text.trim().replace(/^[,.\s]+$/,""))).filter((text=>text)).join("</p><p>")).length?"":"<p>"+s+"</p>"}check(regExKey,{removeFromText=!0,saveKeys=!0,type=CoC7ActorImporter.asString,text=!1,requiredGroup=!1}={}){let output=!1,regExp=!1;if(void 0!==this.regEx[regExKey]?regExp=this.getRegEx(this.regEx[regExKey]):void 0!==this.keys[regExKey]&&(regExp=this.getRegEx(this.keys[regExKey])),!1!==regExp){!1===text&&(text=this.text);const check=regExp.exec(text);let value=null;if(null!==check&&(!1===requiredGroup||void 0!==(check.groups||{})[requiredGroup])){if(output=check.groups||{},removeFromText&&(this.text=this.text.replace(check[0].trim(),"\n").trim()),saveKeys)for(const key of Object.keys(check.groups))switch(type){case CoC7ActorImporter.asString:this.parsed[key]=String(check.groups[key]).replace("\n"," ");break;case CoC7ActorImporter.asNumber:value=Number(check.groups[key]),isNaN(value)||(this.parsed[key]=Number(check.groups[key]))}output["-source"]=check[0],output["-index"]=check.index}}return output}processCombat(text){if(0===text.trim().length)return;let weapon,dodge,newline;CONFIG.debug.CoC7Importer&&console.log("combat text",text);let lastPercent=!1,maxLoops=40;do{if(maxLoops--,text=text.trim(),dodge=this.check("weaponDodge",{saveKeys:!1,text}))text=text.replace(dodge["-source"],"\n"),void 0===this.parsed.skills&&(this.parsed.skills=[]),this.parsed.skills.push({name:this.cleanString(dodge.name),value:Number(dodge.percentage),push:!1});else if(weapon=this.check("weapon",{saveKeys:!1,text,requiredGroup:!1===lastPercent&&"percentage"})){text=text.replace(weapon["-source"],"\n");const name=this.cleanString(weapon.name||"");let damage=this.translateRoll(this.cleanString(weapon.damage||""));const isRanged=!!(this.check("handgun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("rifle",{text:name,removeFromText:!1,saveKeys:!1})||this.check("smb",{text:name,removeFromText:!1,saveKeys:!1})||this.check("machineGun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("launched",{text:name,removeFromText:!1,saveKeys:!1}));let found;lastPercent=null===weapon.percentage||void 0===weapon.percentage||Number(weapon.percentage);let ahdb=!1,addb=!1;do{found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.halfdb+")\\s*("+this.keys.fulldb+")?[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found?(ahdb=!0,damage=damage.replace(found[0],"")):(found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.fulldb+")\\s*[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found&&(addb=!0,damage=damage.replace(found[0],"")))}while(found);const damages=damage.split("/"),isShotgun=3===damages.length,data={name,type:"weapon",system:{skill:{id:lastPercent},properties:{},range:{normal:{value:isShotgun?10:0,damage:damages[0]},long:{value:isShotgun?20:0,damage:isShotgun?damages[1]:""},extreme:{value:isShotgun?50:0,damage:isShotgun?damages[2]:""}}}};data.system.properties.shotgun=isShotgun,data.system.properties.rngd=isRanged||isShotgun,data.system.properties.melee=!data.system.properties.rngd,data.system.properties.ahdb=ahdb,data.system.properties.addb=addb,void 0===this.parsed.attacks&&(this.parsed.attacks=[]),this.parsed.attacks.push(data)}else(newline=text.match(/^(.+)\n/))?text=text.replace(newline[0],"\n"):(newline=text.match(/^[^\n]+$/))&&(text="")}while(maxLoops>0&&(weapon||dodge||text));0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedWeaponText")),console.debug("Unexpected weapons:",text))}processSkills(text,key="skills"){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);let skill;breaks.length>1&&(text=breaks[0]);let maxLoops=40;do{maxLoops--,text=text.trim(),skill=this.check("skill",{saveKeys:!1,text}),skill&&(text=text.replace(skill["-source"],"\n"),void 0===this.parsed[key]&&(this.parsed[key]=[]),this.parsed[key].push({name:this.cleanString(skill.name),value:Number(skill.percentage)}))}while(maxLoops>0&&skill);0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedSkillsText")),console.debug("Unexpected skills:",text))}processSpells(text){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);breaks.length>1&&(text=breaks[0]);const spellsArr=text.replace(/([\n\r]+)/g," ").split(/(?<!\([^)]+),/);this.text=this.text.replace(text.trim(),"\n");for(const spell of spellsArr)void 0===this.parsed.spells&&(this.parsed.spells=[]),this.parsed.spells.push(this.cleanString(spell))}async parseCharacter(text){this.text=String(text).trim().replace(/\u2013|\u2014|\u2212/g,"-").replace(/\u2019/g,"'").replace(/[\udbc0-\udbfe][\udc00-\udfff]/g,"");let header,min=this.text.length,check=this.check("str",{type:CoC7ActorImporter.asNumber})["-index"];if(isNaN(check)||(min=Math.min(min,check)),check=this.check("con",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("siz",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("int",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("pow",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("dex",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("app",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("edu",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("san",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("hp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("mp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),min>0){if(header=this.text.substr(0,min),check=this.check("name",{text:header}),!1===check?this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter"):header=header.replace(check["-source"],"\n"),check=this.check("age",{text:header}),!1!==check&&(header=header.replace(check["-source"],"\n")),!this.check("occupation",{text:header})&&""!==header.trim()){let occupation=header;header.indexOf(".")>-1&&(occupation=header.substr(0,header.indexOf(".")+1)),this.parsed.occupation=occupation.replace(/([\n\r]+)/g," ").trim().replace(/,$/,""),this.text=this.text.replace(occupation.trim(),"\n")}}else this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter");if(void 0!==this.parsed.occupation&&void 0===this.parsed.age){const occupationAge=this.parsed.occupation.match(/^(?<age>\d+),(?<occupation>.+)$/);occupationAge&&(this.parsed.age=occupationAge.groups.age,this.parsed.occupation=occupationAge.groups.occupation.trim())}this.check("db")&&!this.check("dbNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.db})||(this.parsed.db="0"),this.parsed.db=this.translateRoll(this.parsed.db),this.check("build"),this.check("armor")&&!this.check("armorNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.armor})||(this.parsed.armor="0"),this.check("mov",{type:CoC7ActorImporter.asNumber}),this.check("lck",{type:CoC7ActorImporter.asNumber}),this.check("sanLoss"),this.parsed.sanLoss=this.translateRoll(this.parsed.sanLoss),this.check("attacksPerRound")&&this.check("attacksPerRoundNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.attacksPerRound})&&(this.parsed.attacksPerRound="0"),this.text="\n"+this.text;let sections=this.getRegEx("("+this.keys.sectionCombats+")","i");null===this.text.match(sections)&&(sections=this.check("guessStartCombat",{saveKeys:!1,removeFromText:!1}),sections&&(this.text=[this.text.slice(0,sections["-index"]),this.keys.newCombatHeader,this.text.slice(sections["-index"])].join("")));const regExpSections=this.getRegEx(this.regEx.sections,"i");if(sections=this.text.split(regExpSections),null!==sections)for(let i=0,im=sections.length;i<im;i++)null!==sections[i].match(this.getRegEx("("+this.keys.sectionCombats+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processCombat(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSkills+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionLangauges+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1],"languages"),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSpells+")","i"))&&void 0!==sections[i+1]&&(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSpells(sections[i+1]),i++);return this.parsed.gmnotes=this.toHTML(this.text),this.parsed}disableAttribAuto(key,attribValue,check,updateData){const value=Math.max(0,Number(attribValue));return value!==Number(check)&&(updateData[`system.attribs.${key}.auto`]=!1,updateData[`system.attribs.${key}.value`]=value,"build"===key?updateData[`system.attribs.${key}.current`]=value:updateData[`system.attribs.${key}.max`]=value),updateData}async createEntity(characterData,entityType){const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();"npc"!==entityType&&(entityType="creature");const actorData={name:characterData.name,type:entityType,folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);await npc.createEmbeddedDocuments("Item",characterData.items,{renderSheet:!1});const updateData={};let value=0;void 0!==characterData.actor.attribs.hp?.value&&this.disableAttribAuto("hp",characterData.actor.attribs.hp.value,npc.hpMax,updateData),void 0!==characterData.actor.attribs.mp?.value&&this.disableAttribAuto("mp",characterData.actor.attribs.mp.value,npc.mpMax,updateData),void 0!==characterData.actor.attribs.mov?.value&&this.disableAttribAuto("mov",characterData.actor.attribs.mov.value,npc.mov,updateData),void 0!==characterData.actor.attribs.build?.value&&this.disableAttribAuto("build",characterData.actor.attribs.build.value,npc.build,updateData),void 0!==characterData.actor.attribs.db?.value&&(value=String(characterData.actor.attribs.db.value).replace(/^\+\s*/,""),value!==String(npc.db)&&(updateData["system.attribs.db.auto"]=!1,updateData["system.attribs.db.value"]=value)),Object.keys(updateData).length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateData:",updateData),await npc.update(updateData));const updateItemData=[];let lastWeaponSkill=null;for(const pair of this.weaponSkills){!1!==pair[0]&&(lastWeaponSkill=npc.items.filter((i=>i.name===pair[0].name&&"skill"===i.type&&Number(i.system.value)===Number(pair[0].system.value))));const weapon=npc.items.filter((i=>i.name===pair[1].name&&"weapon"===i.type&&i.system.range.normal.damage===pair[1].system.range.normal.damage));lastWeaponSkill[0]&&weapon[0]&&updateItemData.push({_id:weapon[0].id,"system.skill.main.id":lastWeaponSkill[0].id,"system.skill.main.name":lastWeaponSkill[0].name})}return updateItemData.length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateItemData:",updateItemData),await npc.updateEmbeddedDocuments("Item",updateItemData)),npc}actorData(pc){const data={characteristics:{},attribs:{},infos:{},special:{},description:{keeper:""},flags:{locked:!1,displayFormula:!1}};for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==pc[key]&&(data.characteristics[key]={value:Number(pc[key])});for(const key of["san","mov","build","armor","lck","hp","mp"])void 0!==pc[key]&&(data.attribs[key]={value:Number(pc[key])});void 0!==pc.db&&(data.attribs.db={value:pc.db});for(const key of["age","occupation"])void 0!==pc[key]&&(data.infos[key]=pc[key]);if(void 0!==pc.sanLoss){const[passed,failed]=pc.sanLoss.split("/");data.special.sanLoss={checkPassed:passed,checkFailled:failed}}return void 0!==pc.attacksPerRound&&(data.special.attacksPerRound=Number(pc.attacksPerRound)),data.description.keeper=pc.gmnotes,CONFIG.debug.CoC7Importer&&console.debug("actorData:",data),data}async itemsData(pc){const items=[];if(this.weaponSkills=[],void 0!==pc.attacks)for(const attack of pc.attacks){let skill=!1;!0!==attack.system?.skill?.id&&(skill=await this.weaponSkill(attack),items.push(skill)),attack.system.skill.id=null,items.push(attack),this.weaponSkills.push([skill,attack])}if(void 0!==pc.skills)for(const skill of pc.skills){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,void 0!==skill.push&&(cloned.system.properties.push=skill.push),items.push(duplicate(cloned))}else{const options={};void 0!==skill.push&&(options.push=skill.push),items.push(CoCActor.emptySkill(skill.name,skill.value,options))}}if(void 0!==pc.languages)for(const skill of pc.languages){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,items.push(duplicate(cloned))}else items.push(CoCActor.emptySkill(skill.name,skill.value,{img:CoC7Item.iconLanguage,specialization:"Language"}))}if(void 0!==pc.spells)for(const name of pc.spells){const existing=await CoC7Utilities.guessItem("spell",name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();items.push(duplicate(cloned))}else items.push(CoCActor.emptySpell(name))}return items}async weaponSkill(weapon){let skill=null;if(this.getRegEx("handgun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Handgun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Handgun skill: ${skill}`)):this.getRegEx("rifle").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Rifle/Shotgun",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Rifle",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Shotgun",{combat:!0,source:this.itemLocations}))),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Rifle skill: ${skill}`)):this.getRegEx("smb").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Submachine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Submachine Gun skill: ${skill}`)):this.getRegEx("machineGun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Machine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Machine Gun skill: ${skill}`)):this.getRegEx("launched").exec(weapon.name)&&(skill=await CoC7Utilities.guessItem("skill","Launch",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Launch skill: ${skill}`)),null!=skill){return skill.clone({system:{value:weapon.system?.skill?.id}})}const firearms=weapon.system?.properties?.rngd,parts=CoC7Item.getNamePartsSpec(weapon.name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),newSkill={type:"skill",name:parts.name,system:{skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0},base:weapon.system?.skill?.id,value:weapon.system?.skill?.id}};return CONFIG.debug.CoC7Importer&&console.debug(`Weapon skill not found for ${weapon.name}, creating a new one`,newSkill),newSkill}needsConversion(npc){let needsConversionResult=!0;for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==npc[key]&&npc[key]>30&&(needsConversionResult=!1);return CONFIG.debug.CoC7Importer&&console.debug("needsConversion:",needsConversionResult),needsConversionResult}async createActor(inputs){CONFIG.debug.CoC7Importer&&console.debug("createActor:",inputs);const lang=CoC7ActorImporterRegExp.checkLanguage(inputs.lang);this.keys=CoC7ActorImporterRegExp.getKeys(lang),this.regEx=CoC7ActorImporterRegExp.getRegularExpressions(lang),this.itemLocations=inputs.source,CONFIG.debug.CoC7Importer&&console.debug("Regular Expressions:",lang,this.keys,this.regEx);let character=await this.parseCharacter(inputs.text);CONFIG.debug.CoC7Importer&&console.debug("parseCharacter:",character),("coc-guess"===inputs.convertFrom6E&&this.needsConversion(character)||"coc-convert"===inputs.convertFrom6E)&&(character=await this.convert7E(character));const characterData={name:character.name,actor:this.actorData(character),items:await this.itemsData(character)};if(void 0!==inputs.testMode&&!0===inputs.testMode)return characterData;return await this.createEntity(characterData,inputs.entity)}async convert7E(creature){CONFIG.debug.CoC7Importer&&console.debug("Converting npc",creature);for(const key of["str","con","siz","dex","app","int","pow"])void 0!==creature[key]&&(creature[key]*=5);return void 0!==creature.edu&&(creature.edu<=18?creature.edu*=5:creature.edu<=26?creature.edu=creature.edu+90-18:creature.edu=99),void 0!==creature.db&&("-1d4"===creature.db?creature.db=-1:"-1d6"===creature.db&&(creature.db=-2)),CONFIG.debug.CoC7Importer&&console.debug("convert7E: ",creature),creature}}class CoC7DirectoryPicker extends FilePicker{get title(){return game.i18n.localize("CoC7.PickDirectory")}_onSubmit(event){event.preventDefault();const path=event.target.target.value,activeSource=this.activeSource,bucket=event.target.bucket?event.target.bucket.value:null;this.field.value=CoC7DirectoryPicker.format({activeSource,bucket,path}),this.close()}static DefaultDirectory(val){return null===val?"":String(val)}static format(value){return null!==value.bucket?`[${value.activeSource}:${value.bucket}] ${value.path}`:`[${value.activeSource}] ${value.path}`}static parse(raw){const str=raw??"",matches=str.match(/^\[([^:]+)(:(.+))?\]\s*(.+)?$/u);return matches?{activeSource:matches[1],bucket:matches[3]??"",current:matches[4]}:{activeSource:"data",bucket:null,current:str}}static processHtml(html){$(html).find('input[data-dtype="DefaultDirectory"]').each(((i,el)=>{const input=$(el);if(input.prop("readonly",!0),!input.next().length){const picker=new CoC7DirectoryPicker({field:input[0],...CoC7DirectoryPicker.parse(input.val())}),pickerButton=$('<button type="button" class="file-picker" title="'+game.i18n.localize("CoC7.PickDirectory")+'"><i class="fas fa-file-import fa-fw"></i></button>');CoC7DirectoryPicker.createDefaultDirectory(),pickerButton.on("click",(()=>{picker.render(!0)})),input.parent().append(pickerButton)}}))}activateListeners(html){super.activateListeners(html),$(html).find("ol.files-list").remove(),$(html).find("footer div").remove(),$(html).find("footer button").text(game.i18n.localize("CoC7.PickDirectory"))}static async createDefaultDirectory(){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));try{return await CoC7DirectoryPicker.createDirectory(parsed.activeSource,parsed.current,{bucket:parsed.bucket}),!0}catch(e){if(!e.startsWith("EEXIST"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1}}static async uploadToDefaultDirectory(file,filename){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));return(await FilePicker.upload(parsed.activeSource,parsed.current,new File([file],filename,{type:"image/png"}),{bucket:parsed.bucket})).path?parsed.current+"/"+filename:(ui.notifications.error(game.i18n.localize("CoC7.FileUploadError")),!1)}}class CoC7DholeHouseActorImporter{static getBackstory(backstoryJSON){const sections=[["description","Description"],["traits","Traits"],["ideology","Ideology"],["injurues","Injuries","injuries"],["people","People"],["phobias","Phobias"],["locations","Locations"],["tomes","Tomes"],["possessions","Possessions"],["encounters","Encounters"]],backstory={block:[],sections:[]};for(const section of sections)null!==backstoryJSON[section[0]]&&(void 0!==section[2]&&""!==section[2]||(section[2]=section[0]),backstory.block.push(`<h3>${section[1]}</h3>\n<div class="${section[2]}">\n${backstoryJSON[section[0]]}\n</div>`),backstory.sections.push({title:section[1],value:backstoryJSON[section[0]]}));return backstory.block="<h2>Backstory</h2>\n"+backstory.block.join("\n",backstory.block),backstory}static async convertDholeHouseCharacterData(dholeHouseData,options){CONFIG.debug.CoC7Importer&&console.log("Source:",dholeHouseData),dholeHouseData=dholeHouseData.Investigator;const backstories=CoC7DholeHouseActorImporter.getBackstory(dholeHouseData.Backstory);return{name:dholeHouseData.PersonalDetails.Name,actor:{characteristics:{str:{value:parseInt(dholeHouseData.Characteristics.STR,10)},con:{value:parseInt(dholeHouseData.Characteristics.CON,10)},siz:{value:parseInt(dholeHouseData.Characteristics.SIZ,10)},dex:{value:parseInt(dholeHouseData.Characteristics.DEX,10)},app:{value:parseInt(dholeHouseData.Characteristics.APP,10)},int:{value:parseInt(dholeHouseData.Characteristics.INT,10)},pow:{value:parseInt(dholeHouseData.Characteristics.POW,10)},edu:{value:parseInt(dholeHouseData.Characteristics.EDU,10)}},attribs:{san:{value:parseInt(dholeHouseData.Characteristics.Sanity,10),max:parseInt(dholeHouseData.Characteristics.SanityMax,10),dailyLimit:Math.floor(dholeHouseData.Characteristics.Sanity/5)},hp:{value:parseInt(dholeHouseData.Characteristics.HitPts,10),max:parseInt(dholeHouseData.Characteristics.HitPtsMax,10)},mp:{value:parseInt(dholeHouseData.Characteristics.MagicPts,10),max:parseInt(dholeHouseData.Characteristics.MagicPtsMax,10)},lck:{value:parseInt(dholeHouseData.Characteristics.Luck,10)},mov:{value:parseInt(dholeHouseData.Characteristics.Move,10),max:parseInt(dholeHouseData.Characteristics.Move,10)},db:{value:dholeHouseData.Characteristics.DamageBonus},build:{value:parseInt(dholeHouseData.Characteristics.Build,10)}},infos:{occupation:dholeHouseData.PersonalDetails.Occupation,age:dholeHouseData.PersonalDetails.Age,sex:dholeHouseData.PersonalDetails.Gender,residence:dholeHouseData.PersonalDetails.Residence,birthplace:dholeHouseData.PersonalDetails.Birthplace},backstory:backstories.block,biography:backstories.sections,description:{keeper:game.i18n.localize("CoC7.DholeHouseActorImporterSource")}},skills:await CoC7DholeHouseActorImporter.extractSkills(dholeHouseData.Skills.Skill??[],options),possesions:await CoC7DholeHouseActorImporter.extractPossessions(dholeHouseData.Possessions?.item??[],options)}}static makeSkillName(name,specialization){return"None"===specialization&&(specialization="Any"),"Language (Other)"===name||"Language (Own)"===name?name="Language":"Operate Heavy Machine"===name?name="Operate Heavy Machinery":"Throw"===name&&""===specialization&&(name="Fighting",specialization="Throw"),{skillName:""===specialization?name:specialization,specialization:""===specialization?"":name,name:name+(""===specialization?"":" ("+specialization+")")}}static async extractSkills(dholeHouseskills,options){const skills=[];for(const skill of dholeHouseskills){if("None"===skill.subskill&&"1"===skill.value&&"0"===skill.half&&"0"===skill.fifth)continue;const parts=CoC7DholeHouseActorImporter.makeSkillName(skill.name,skill.subskill??""),existing=await CoC7Utilities.guessItem("skill",parts.name,{source:options.source,fallbackAny:!0});let cloned=null;void 0!==existing?(cloned=duplicate(existing.toObject()),cloned.name=parts.name,cloned.system.skillName=parts.skillName,cloned.system.specialization=parts.specialization):(cloned=CoCActor.emptySkill(parts.skillName,parseInt(skill.value??0,10),{specialization:""!==parts.specialization&&parts.specialization}),cloned.system.properties=cloned.system.properties??{},"Fighting"===parts.specialization?(cloned.system.properties.fighting=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Firearms"===parts.specialization?(cloned.system.properties.firearm=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Dodge"===parts.skillName&&(cloned.system.properties.push=!1)),"Any"===cloned.system.skillName&&(cloned.name=cloned.name.replace(" (Any)"," (None)"),cloned.system.skillName="None"),cloned.system.base=parseInt(skill.value??0,10),cloned.system.value=parseInt(skill.value??0,10),cloned.system.flags=cloned.system.flags??{},cloned.system.flags.occupation=!0===skill.occupation||"true"===skill.occupation,skills.push(cloned)}return skills}static findWeaponSkillId(skillName,character){const skills=character.getEmbeddedCollection("Item"),checkName=skillName.replace(/^\((.+)\)$/,"$1");return skills.find((i=>i.system?.skillName===checkName||i.system?.skillName?.indexOf(checkName)>-1))}static async extractPossessions(dholehousePossessions,options){const items=[];for(const item of dholehousePossessions){const existing=await CoC7Utilities.guessItem("item",item.description,{source:options.source});let cloned=null;cloned=void 0!==existing?duplicate(existing.toObject()):{name:item.description,type:"item"},items.push(cloned)}return items}static async extractWeapons(dholehouseWeapons,character,options){const weapons=[];Array.isArray(dholehouseWeapons)||(dholehouseWeapons=[dholehouseWeapons]);for(const weapon of dholehouseWeapons){const skill=CoC7DholeHouseActorImporter.findWeaponSkillId(weapon.skillname,character),damage=weapon.damage.replace(/\+DB/i,""),addb=damage!==weapon.damage,existing=await CoC7Utilities.guessItem("weapon",weapon.name,{source:options.source});let cloned=null;void 0!==existing?(cloned=duplicate(existing.toObject()),cloned.system.skill.main.name=skill?.name??"",cloned.system.skill.main.id=skill?.id??"",cloned.system.range=cloned.system.range??{},cloned.system.range.normal=cloned.system.range.normal??{},cloned.system.range.normal.damage=damage,cloned.system.ammo=weapon.ammo,cloned.system.malfunction=weapon.malf,cloned.system.properties=cloned.system.properties??{},cloned.system.properties.melee=skill?.system.properties?.fighting??!1,cloned.system.properties.rngd=skill?.system.properties?.firearm??!1,cloned.system.properties.addb=addb):cloned={name:weapon.name,type:"weapon",system:{skill:{main:{name:skill?.name??"",id:skill?.id??""}},range:{normal:{damage}},ammo:weapon.ammo,malfunction:weapon.malf,properties:{melee:skill?.system.properties?.fighting??!1,rngd:skill?.system.properties?.firearm??!1,addb}}},weapons.push(cloned)}return weapons}static async savePortrait(base64Portrait,fileName){const base64Response=await fetch("data:image/png;base64,"+base64Portrait),imageBlob=await base64Response.blob();return CoC7DirectoryPicker.uploadToDefaultDirectory(imageBlob,fileName)}static async createNPCFromDholeHouse(dholeHouseCharacterData,options){if(!game.user?.can("FILES_UPLOAD"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1;const characterData=await CoC7DholeHouseActorImporter.convertDholeHouseCharacterData(dholeHouseCharacterData,options);CONFIG.debug.CoC7Importer&&console.log("Character Data:",characterData);const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();if(!CoC7DirectoryPicker.createDefaultDirectory())return!1;const actorData={name:characterData.name,type:"character",folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);if(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait?.length>10){const fileName="avatar-"+npc.id+".png",portrait=await CoC7DholeHouseActorImporter.savePortrait(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait,fileName);!1!==portrait&&npc.update({img:portrait})}CONFIG.debug.CoC7Importer&&console.log("Items: ",characterData.items),await npc.createEmbeddedDocuments("Item",characterData.skills,{renderSheet:!1}),await npc.createEmbeddedDocuments("Item",characterData.possesions,{renderSheet:!1});const weapons=await CoC7DholeHouseActorImporter.extractWeapons(dholeHouseCharacterData.Investigator.Weapons?.weapon??[],npc,options);return CONFIG.debug.CoC7Importer&&console.log("Weapons: ",weapons),await npc.createEmbeddedDocuments("Item",weapons,{renderSheet:!1}),npc}}class CoC7ActorImporterDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","dialog","actor-importer"],title:game.i18n.localize("CoC7.ActorImporter"),template:"systems/CoC7/templates/apps/actor-importer.html",closeOnSubmit:!1,width:600,height:"auto"})}async getData(){const data=await super.getData();return data.importType=data.object.importType,data.convert6E=data.object.convert6E,data.source=data.object.source,data.characterData=data.object.characterData,data.canUpload=game.user?.can("FILES_UPLOAD"),["npc","creature"].includes(data.importType)&&(data.languages=CoC7ActorImporterRegExp.getTranslations(),data.language=CoC7ActorImporterRegExp.checkLanguage(data.object.language),data.placeholder=CoC7ActorImporterRegExp.getExampleText(data.language)),data}activateListeners(html){super.activateListeners(html),html.find("#dholehouse-character-preview").hide(),html.find("#coc-entity-type,#coc-entity-lang").change(this._onChangeSubmit.bind(this)),html.find("#dholehouse-json-file-picker").change(this._onJSONFileSelected.bind(this)),html.find("#coc-pasted-character-data").on("keyup",(function(e){const charactersTooExtended=$(this).val().match(/[\udbc0-\udbfe][\udc00-\udfff]/),prompt=$("#coc-prompt");prompt.data("extended")&&charactersTooExtended?prompt.html(game.i18n.localize("CoC7.TextFieldInvalidCharacters")).addClass("error"):prompt.html(prompt.data("text")).removeClass("error")})).trigger("keyup"),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("form").submit((e=>{e.preventDefault()}))}static getInputs(form){const inputs={};return inputs.entity=form.find("#coc-entity-type").val().trim(),CONFIG.debug.CoC7Importer&&console.debug("entity type:",inputs.entity),form.find("#coc-convert-6E").length>0&&(inputs.convertFrom6E=form.find("#coc-convert-6E").val().trim()),form.find("#coc-entity-lang").length>0&&(inputs.lang=CoC7ActorImporterRegExp.checkLanguage(form.find("#coc-entity-lang").val().trim())),form.find("#source").length>0&&(inputs.source=form.find("#source").val().trim()),form.find("#coc-pasted-character-data").length>0&&(inputs.text=form.find("#coc-pasted-character-data").val().trim()),CONFIG.debug.CoC7Importer&&console.debug("received text","##"+inputs.text+"##"),inputs}_onJSONFileSelected(event){const jsonFileInput=document.getElementById("dholehouse-json-file-picker"),portraitImage=document.getElementById("dholehouse-character-portrait"),characterName=document.getElementById("dholehouse-character-name"),preview=document.getElementById("dholehouse-character-preview"),file=jsonFileInput.files[0],dialog=this,fileReader=new FileReader;fileReader.onload=function(e){try{dialog.characterJSON=JSON.parse(fileReader.result)}catch(e){return $("#coc-prompt").html(game.i18n.localize("CoC7.TextFieldInvalidJSON")).addClass("error"),void event.preventDefault()}const personalDetails=dialog.characterJSON?.Investigator?.PersonalDetails;personalDetails?(characterName.textContent=personalDetails.Name,portraitImage.src="data:image/png;base64,"+personalDetails.Portrait,preview.style.display="block",$(".dialog.actor-importer").height("auto")):ui.notifications.error(game.i18n.localize("CoC7.DholeHouseInvalidActor"))},fileReader.readAsText(file)}_onChangeSubmit(event){this._onSubmit(event)}async _onClickSubmit(event){const id=event.currentTarget.dataset.button;if("no"===id)this.close();else if("getExampleNow"===id){const content=CoC7ActorImporterRegExp.getExampleText(this.object.language);CoC7Utilities.copyToClipboard(content).then((()=>ui.notifications.info(game.i18n.localize("CoC7.Copied"))))}else if("import"===id){const app=$(event.currentTarget).closest("div.dialog.actor-importer");app.hide();const form=$(event.currentTarget).closest("form"),inputs=CoC7ActorImporterDialog.getInputs(form);if("dholehouse"===inputs.entity&&this.characterJSON){const character=await CoC7DholeHouseActorImporter.createNPCFromDholeHouse(this.characterJSON,{source:inputs.source});!1!==character?(CONFIG.debug.CoC7Importer&&console.debug("character:",character),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:game.i18n.localize("CoC7.Entities.Character"),actorName:character.name})),await character.sheet.render(!0),this.close()):app.show()}else inputs.text&&""!==inputs.text?(CoC7ActorImporterDialog.importActor(inputs),this.close()):app.show()}}async _updateObject(event,formData){this.object.importType=formData["coc-entity-type"],this.object.characterData=formData["coc-pasted-character-data"]?.trim(),void 0!==formData["coc-convert-6E"]&&(this.object.convert6E=formData["coc-convert-6E"]),void 0!==formData["coc-entity-lang"]&&(this.object.language=formData["coc-entity-lang"]),void 0!==formData.source&&(this.object.source=formData.source),this.render(!0)}static async importActor(inputs){"."!==inputs.text[inputs.text.length]&&(inputs.text+=".");const actor=new CoC7ActorImporter,createdActor=await actor.createActor(inputs);CONFIG.debug.CoC7Importer&&console.debug("createdActor:",createdActor),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:createdActor.type?.toUpperCase(),actorName:createdActor.name})),await createdActor.sheet.render(!0)}static async create(options={}){options.importType=options.importType??"npc",options.language=options.language??CoC7ActorImporterRegExp.checkLanguage(null),options.convert6E=options.language??"coc-guess",options.source=options.source??"iwms",options.characterData=options.characterData??"",new CoC7ActorImporterDialog(options).render(!0)}}Hooks.once("ready",(()=>{game.modules.get("CoC7-Importer-Tests")?.active&&(window.CoC7ActorImporter=CoC7ActorImporter)}));class DropCoCID extends Dialog{static processForm(response,element,resolve){element.find("input").is(":checked")&&game.settings.set("CoC7","dropCoCID",response?"Y":"N"),resolve(response)}static processItem(response,item){return response&&item.flags?.CoC7?.cocidFlag?.id?item.flags.CoC7.cocidFlag.id:duplicate(item)}static async create(){switch(game.settings.get("CoC7","dropCoCID")){case"":return new Promise((resolve=>{new DropCoCID({title:game.i18n.format("CoC7.Settings.DropCoCID.Name"),content:"<p>"+game.i18n.format("CoC7.Settings.DropCoCID.Dialog")+'</p><p><input type="checkbox" id="rememberthis" style="vertical-align: sub;"><label for="rememberthis">'+game.i18n.format("CoC7.Settings.DropCoCID.Remember")+"</label></p>",classes:["coc7","app","dialog"],buttons:{yes:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("Yes"),callback:element=>{DropCoCID.processForm(!0,element,resolve)}},no:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("No"),callback:element=>{DropCoCID.processForm(!1,element,resolve)}}}}).render(!0)}));case"Y":return!0;case"N":return!1}}}class CoC7OccupationSheet extends ItemSheet{activateListeners(html){if(super.activateListeners(html),!this.options.editable)return;html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))),html.find(".group-item-delete").click(this._onGroupItemDelete.bind(this)),html.find(".group-control").click(this._onGroupControl.bind(this));new DragDrop({dropSelector:".droppable",callbacks:{drop:this._onDrop.bind(this)}}).bind(html[0])}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const optionalSkill=event?.currentTarget?.classList?.contains("optional-skills"),ol=event?.currentTarget?.closest("ol"),index=ol?.dataset?.group,dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[],groups=this.item.system.groups?duplicate(this.item.system.groups):[];for(const item of dataList)if(item&&item.system&&[type].includes(item.type))if(optionalSkill){if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;if(groups[index].skills.find((el=>el.name===item.name)))continue}0===useCoCID&&(useCoCID=await DropCoCID.create()),groups[index].skills=groups[index].skills.concat([DropCoCID.processItem(useCoCID,item)])}else{if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;for(let i=0;i<groups.length;i++){const index=groups[i].skills.findIndex((el=>el.name===item.name));-1!==index&&groups[i].skills.splice(index,1)}}0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))}await this.item.update({"system.groups":groups}),await this.item.update({[`system.${collectionName}`]:collection})}async _onGroupControl(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("add-group")){await this._onSubmit(event);const groups=this.item.system.groups;await this.item.update({"system.groups":groups.concat([{options:0,skills:[]}])})}if(a.classList.contains("remove-group")){await this._onSubmit(event);const groups=duplicate(this.item.system.groups),ol=a.closest(".item-list.group");groups.splice(Number(ol.dataset.group),1),await this.item.update({"system.groups":groups})}}_onItemSummary(event,collectionName="items"){event.preventDefault();const obj=$(event.currentTarget),li=obj.parents(".item"),group=obj.closest(".group");let item;if(item=group.length?this.item.system.groups[group.data("group")][collectionName].find((s=>s._id===li.data("item-id"))):this.item.system[collectionName].find((s=>s._id===li.data("item-id"))),!item)return;const chatData=item.system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}async _onGroupItemDelete(event){const item=$(event.currentTarget).closest(".item"),group=Number(item.closest(".item-list.group").data("group")),groups=duplicate(this.item.system.groups);if(void 0!==groups[group]){const itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=groups[group].skills.findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));itemIndex>-1&&(groups[group].skills.splice(itemIndex,1),await this.item.update({"system.groups":groups}))}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/occupation.html",width:525,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey);for(let index=0,len=sheetData.data.system.groups.length;index<len;index++)sheetData.data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.groups[index].skills}),sheetData.data.system.groups[index].isEmpty=0===sheetData.data.system.groups[index].skills.length,sheetData.data.system.groups[index].skills.sort(CoC7Utilities.sortByNameKey);sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(sheetData.data.system.occupationSkillPoints),sheetData.itemProperties=[];for(const[key,value]of Object.entries(sheetData.data.system.type))value&&sheetData.itemProperties.push(COC7.occupationProperties[key]?COC7.occupationProperties[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}static occupationPointsString(occupationSkillPoints){const optionnal=[],mandatory=[];for(const[key,carac]of Object.entries(occupationSkillPoints))if(carac.multiplier){const caracName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);carac.selected&&carac.optional&&optionnal.push(`${caracName}x${carac.multiplier}`),carac.selected&&!carac.optional&&mandatory.push(`${caracName}x${carac.multiplier}`)}let occupationPointsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return mandatory.length&&(occupationPointsString+=mandatory.join(" + ")),optionnal.length&&mandatory.length&&(occupationPointsString+=` + (${optionnal.join(orString)})`),optionnal.length&&!mandatory.length&&(occupationPointsString+=optionnal.join(orString)),occupationPointsString}_updateObject(event,formData){const system=expandObject(formData)?.system;if(system.groups){formData["system.groups"]=Object.values(system.groups||[]);for(let index=0;index<this.item.system.groups.length;index++)formData[`system.groups.${index}.skills`]=duplicate(this.item.system.groups[index].skills)}super._updateObject(event,formData)}}class CoC7InvestigatorWizard extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{id:"investigator-wizard-application",classes:["coc7","dialog","investigator-wizard"],title:game.i18n.localize("CoC7.InvestigatorWizard.Title"),template:"systems/CoC7/templates/apps/investigator-wizard.hbs",width:520,height:600,closeOnSubmit:!1,scrollY:[".scrollsection"],dragDrop:[{dragSelector:".draggable",dropSelector:null}]})}get pageList(){return{PAGE_NONE:-1,PAGE_INTRODUCTION:0,PAGE_CONFIGURATION:1,PAGE_SETUPS:2,PAGE_ARCHETYPES:3,PAGE_CHARACTISTICS:4,PAGE_ATTRIBUTES:5,PAGE_VIEW_ATTRIBUTES:6,PAGE_OCCUPATIONS:7,PAGE_OCCUPATION_SKILLS:8,PAGE_ARCHETYPE_SKILLS:9,PAGE_POINTS_SKILLS:10,PAGE_INVESTIGATOR:11,PAGE_BACKSTORY:12,PAGE_CREATE:13}}get characteristicsMethods(){return{METHOD_DEFAULT:1,METHOD_ROLL:1,METHOD_POINTS:2,METHOD_VALUES:3}}get cocidCreditRating(){return"i.skill.credit-rating"}get cocidLanguageOwn(){return"i.skill.language-own"}get pageOrder(){const pages=this.pageList;let pageOrder=[pages.PAGE_INTRODUCTION];return game.user.isGM&&pageOrder.push(pages.PAGE_CONFIGURATION),""===this.object.defaultSetup&&pageOrder.push(pages.PAGE_SETUPS),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPES),pageOrder.push(pages.PAGE_CHARACTISTICS),game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||pageOrder.push(pages.PAGE_ATTRIBUTES),pageOrder=pageOrder.concat([pages.PAGE_VIEW_ATTRIBUTES,pages.PAGE_OCCUPATIONS,pages.PAGE_OCCUPATION_SKILLS]),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPE_SKILLS),pageOrder=pageOrder.concat([pages.PAGE_POINTS_SKILLS,pages.PAGE_INVESTIGATOR,pages.PAGE_BACKSTORY,pages.PAGE_CREATE]),pageOrder}static async loadCacheItemByCoCID(){return new Promise(((resolve,reject)=>{game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\./,type:"i",showLoading:!0}).then((items=>{const list={};for(const item of items)list[item.flags.CoC7.cocidFlag.id]=item;resolve(list)}))}))}async filterCacheItemByCoCID(regexp){return Object.entries(await this.object.cacheCoCID).filter((entry=>entry[0].match(regexp))).map((entry=>entry[1]))}async getCacheItemByCoCID(id){return(await this.object.cacheCoCID)[id]??!1}async expandItemArray(itemList){const items=itemList.filter((it=>"string"!=typeof it)),cocids=itemList.filter((it=>"string"==typeof it));if(cocids.length){const source=await this.object.cacheCoCID,missing=[];for(const cocid of cocids)void 0!==source[cocid]?items.push(source[cocid]):missing.push(cocid);if(missing.length){const era=game.i18n.format(COC7.eras[this.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:this.object.defaultEra});ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:missing.join(", "),lang:game.i18n.lang,era}))}}return items}getAgeAdjustments(){for(const key in this.object.setupModifiers)this.object.setupModifiers[key]=0;if(!game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")){if(this.object.age>=40){const key=Math.floor(this.object.age/10);this.object.requiresAgeAdjustments={edu:{total:key-2>4?4:key-2,rolled:!1},deduct:{total:key>1?5*Math.pow(2,key-4):0,from:["str","con","dex"],values:{}},reduce:{total:5*(key-3),from:"app"}}}else this.object.age>=20?this.object.requiresAgeAdjustments={edu:{total:1,rolled:!1}}:this.object.age>=15&&(this.object.requiresAgeAdjustments={deduct:{total:5,from:["str","siz"],values:{}},reduce:{total:5,from:"edu"},luck:!0});void 0!==this.object.requiresAgeAdjustments.reduce&&(this.object.setupModifiers[this.object.requiresAgeAdjustments.reduce.from]=-this.object.requiresAgeAdjustments.reduce.total)}}async getData(){const sheetData=await super.getData();let setup,archetype,occupation;sheetData.isKeeper=game.user.isGM,sheetData.pages=this.pageList,sheetData.canNext=!1,sheetData.createButton=!1;let showMonetary=!1;switch(sheetData.object.step){case sheetData.pages.PAGE_INTRODUCTION:sheetData.era=game.i18n.format(COC7.eras[sheetData.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:sheetData.object.defaultEra}),sheetData.canNext=!0;break;case sheetData.pages.PAGE_CONFIGURATION:if(game.user.isGM){sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.defaultSetup)),void 0===setup?(sheetData.object.defaultSetup="",sheetData.object.setup=""):sheetData.description=CoC7Parser.enrichHTML(setup.system.description.value),sheetData.ownership={[CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE]:"OWNERSHIP.NONE",[CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED]:"OWNERSHIP.LIMITED",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER]:"OWNERSHIP.OBSERVER",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER]:"OWNERSHIP.OWNER"},sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value)});sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_DEFAULT,sheetData.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.hasArchetypes=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.canNext=!0}break;case sheetData.pages.PAGE_SETUPS:""===sheetData.object.defaultSetup&&(sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.setups.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.setup&&(setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.setup)),void 0!==setup&&(sheetData.description=CoC7Parser.enrichHTML(setup.system.description.value),sheetData.canNext=!0)));break;case sheetData.pages.PAGE_ARCHETYPES:if(sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),0===sheetData.archetypes.length)sheetData.canNext=!0;else if(sheetData.archetypes.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.archetype&&(archetype=sheetData.archetypes.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.archetype)),void 0!==archetype)){sheetData.description=CoC7Parser.enrichHTML(archetype.system.description.value),sheetData.bonusPoints=archetype.system.bonusPoints;const coreCharacteristics=[];for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&coreCharacteristics.push(coreCharacteristic);0===coreCharacteristics.length?this.object.coreCharacteristic="":1===coreCharacteristics.length&&(this.object.coreCharacteristic=coreCharacteristics[0]),sheetData.coreCharacteristic=coreCharacteristics.map((c=>c.toLocaleUpperCase())).join(" "+game.i18n.localize("CoC7.Or")+" ");const skills=[];archetype.system.skills=await this.expandItemArray(archetype.system.skills);for(const skill of archetype.system.skills)skills.push(skill.name);sheetData.skills=skills.join(", "),sheetData.suggestedOccupations=CoC7Parser.enrichHTML(archetype.system.suggestedOccupations),sheetData.suggestedTraits=CoC7Parser.enrichHTML(archetype.system.suggestedTraits),sheetData.canNext=!0}break;case sheetData.pages.PAGE_CHARACTISTICS:if(sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_ROLL,""!==sheetData.object.setup&&(setup=await this.getCacheItemByCoCID(this.object.setup),void 0!==setup)){if(setup.system.characteristics.points.enabled||this.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData.setup={total:0,points:setup.system.characteristics.points.value,characteristics:[{key:"str",roll:setup.system.characteristics.rolls.str,label:"CHARAC.Strength"},{key:"con",roll:setup.system.characteristics.rolls.con,label:"CHARAC.Constitution"},{key:"siz",roll:setup.system.characteristics.rolls.siz,label:"CHARAC.Size"},{key:"dex",roll:setup.system.characteristics.rolls.dex,label:"CHARAC.Dexterity"},{key:"app",roll:setup.system.characteristics.rolls.app,label:"CHARAC.Appearance"},{key:"int",roll:setup.system.characteristics.rolls.int,label:"CHARAC.Intelligence"},{key:"pow",roll:setup.system.characteristics.rolls.pow,label:"CHARAC.Power"},{key:"edu",roll:setup.system.characteristics.rolls.edu,label:"CHARAC.Education"}],luck:{roll:setup.system.characteristics.rolls.luck,label:"CoC7.Luck"}},sheetData.coreCharacteristics=[],""!==sheetData.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype),void 0!==archetype)){for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&sheetData.coreCharacteristics.push({key:coreCharacteristic,name:game.i18n.format(sheetData.setup.characteristics.find((c=>c.key===coreCharacteristic))?.label??"Unknown")});sheetData.coreCharacteristics.sort(CoC7Utilities.sortByNameKey),""!==this.object.coreCharacteristic&&archetype.system.coreCharacteristicsFormula.enabled&&(sheetData.setup.characteristics.find((c=>c.key===this.object.coreCharacteristic)).roll=archetype.system.coreCharacteristicsFormula.value)}let empties=!1;for(const key in sheetData.object.setupPoints)""!==sheetData.object.setupPoints[key]?"luck"!==key&&(sheetData.setup.total+=parseInt(sheetData.object.setupPoints[key],10)):empties=!0;this.object.coreCharacteristic&&(sheetData.coreCharacteristic=this.object.coreCharacteristic.toLocaleUpperCase()),!empties&&this.object.age>=15&&([sheetData.characteristicsMethods.METHOD_ROLL,sheetData.characteristicsMethods.METHOD_VALUES].includes(sheetData.characteristicsMethod)||sheetData.setup.total.toString()===sheetData.setup.points)&&(sheetData.canNext=!0)}break;case sheetData.pages.PAGE_ATTRIBUTES:sheetData.pulpRuleIgnoreAgePenalties=game.settings.get("CoC7","pulpRuleIgnoreAgePenalties"),sheetData.canNext=!0,sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),min:1-parseInt(this.object.setupPoints[key],10),label:CoC7Utilities.getCharacteristicNames(key).label};if(void 0===this.object.requiresAgeAdjustments.edu||this.object.requiresAgeAdjustments.edu.rolled||(sheetData.canNext=!1),void 0!==this.object.requiresAgeAdjustments.deduct){sheetData.deductTotal=0;for(const key of this.object.requiresAgeAdjustments.deduct.from)sheetData.deductTotal=sheetData.deductTotal-parseInt(this.object.setupModifiers[key],10);sheetData.deductFrom=this.object.requiresAgeAdjustments.deduct.from.map((n=>n.toLocaleUpperCase())).join(", ").replace(/, ([a-z]+)$/i,", or $1"),sheetData.deductTotal!==this.object.requiresAgeAdjustments.deduct.total&&(sheetData.canNext=!1)}void 0!==this.object.requiresAgeAdjustments.reduce&&(sheetData.reduceFrom=this.object.requiresAgeAdjustments.reduce.from.toLocaleUpperCase()),void 0!==this.object.requiresAgeAdjustments.luck&&(sheetData.luckValue=Math.max(this.object.setupPoints.luck,this.object.setupModifiers.luck),0===this.object.setupModifiers.luck&&(sheetData.canNext=!1));break;case sheetData.pages.PAGE_VIEW_ATTRIBUTES:sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),prefix:"",suffix:"%",label:CoC7Utilities.getCharacteristicNames(key).label};sheetData.points.db={value:CoCActor.dbFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.BonusDamage"},(isNaN(sheetData.points.db.value)||Number(sheetData.points.db.value)>=0)&&(sheetData.points.db.prefix="+"),sheetData.points.build={value:CoCActor.buildFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.Build"},Number(sheetData.points.build.value)>=0&&(sheetData.points.build.prefix="+"),sheetData.points.hp={value:CoCActor.hpFromCharacteristics(sheetData.points,"character"),prefix:"",suffix:"",label:"CoC7.HitPoints"},sheetData.points.hp.prefix=sheetData.points.hp.value+"/",sheetData.points.mp={value:CoCActor.mpFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.MagicPoints"},sheetData.points.mp.prefix=sheetData.points.mp.value+"/",sheetData.points.san={value:sheetData.points.pow.value,prefix:"",suffix:"/99",label:"CoC7.Sanity"},sheetData.points.mov={value:CoCActor.movFromCharacteristics(sheetData.points,"character",this.object.age),prefix:"",suffix:"",label:"CoC7.Movement"},sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATIONS:if(sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.occupations.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.occupation&&(occupation=sheetData.occupations.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.occupation)),void 0!==occupation)){sheetData.description=CoC7Parser.enrichHTML(occupation.system.description.value),sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(occupation.system.occupationSkillPoints),sheetData.creditRating=occupation.system.creditRating,sheetData.personal=occupation.system.personal,sheetData.skills=await this.expandItemArray(occupation.system.skills),sheetData.groups={};for(let index=0;index<occupation.system.groups.length;index++)sheetData.groups[index]={options:occupation.system.groups[index].options,skills:[]},sheetData.groups[index].skills=await this.expandItemArray(occupation.system.groups[index].skills);sheetData.points=0;const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.points+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.points+=Math.max(...options)),sheetData.canNext=!0}break;case sheetData.pages.PAGE_INVESTIGATOR:sheetData.language=void 0!==this.object.skillItems[this.cocidLanguageOwn],sheetData.language?sheetData.languageName=this.object.skillItems[this.cocidLanguageOwn].item.name:sheetData.languageName="",sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATION_SKILLS:sheetData.default=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isOccupationDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.default++):!1!==sheetData.object.skillItems[key].rows[index].inOccupationGroup?(group=sheetData.object.skillItems[key].rows[index].inOccupationGroup,isMultiple&&(isPickable=!0)):group="other";let toggle=sheetData.object.skillItems[key].rows[index].occupationToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].archetypeToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:sheetData.object.skillItems[key].rows[index].isCreditRating,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.max=parseInt(sheetData.default,10)+parseInt(sheetData.object.personal,10)+Object.values(sheetData.object.occupationGroups).reduce(((s,v)=>s+parseInt(v,10)),0),sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_ARCHETYPE_SKILLS:sheetData.max=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isArchetypeDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.max++):group="other";let toggle=sheetData.object.skillItems[key].rows[index].archetypeToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].occupationToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:!1,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_POINTS_SKILLS:if(sheetData.skills=[],sheetData.creditRatingOkay=!(this.object.creditRating.max>0),sheetData.personal={count:0,total:2*(parseInt(this.object.setupPoints.int,10)+parseInt(this.object.setupModifiers.int,10)),remaining:0},sheetData.occupation={count:0,total:0,remaining:0},sheetData.archetype={count:0,total:0,remaining:0},""!==sheetData.object.setup&&(showMonetary=(await this.getCacheItemByCoCID(sheetData.object.setup)).system.monetary.values.length>0),""!==sheetData.object.occupation&&(occupation=await this.getCacheItemByCoCID(this.object.occupation),occupation)){const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.occupation.total+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.occupation.total+=Math.max(...options))}if(""!==this.object.archetype){const archetype=await game.system.api.cocid.fromCoCID(this.object.archetype);1===archetype.length&&(sheetData.archetype.total=archetype[0].system.bonusPoints)}if(Object.keys(this.object.skillItems).length>0){for(const key in this.object.skillItems){const skill=this.object.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=duplicate(row.selected));let base=item.system.base;if(!Number.isNumeric(base))for(const key in this.object.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new Roll(base).evaluate({async:!1}).total));let totalPoints=parseInt(base,10);if(Number(row.personalPoints)>0){const num=Number(row.personalPoints);sheetData.personal.count+=num,totalPoints+=num}if(Number(row.occupationPoints)>0){const num=Number(row.occupationPoints);sheetData.occupation.count+=num,totalPoints+=num}if(Number(row.archetypePoints)>0){const num=Number(row.archetypePoints);sheetData.archetype.count+=num,totalPoints+=num}if(Number(row.experiencePoints)>0){totalPoints+=Number(row.experiencePoints)}let name=item.name;key===this.cocidLanguageOwn?name=item.system.specialization+" ("+item.system.skillName+")":skill.flags.isCreditRating?(name=name+" ["+this.object.creditRating.min+" - "+this.object.creditRating.max+"]",totalPoints>=this.object.creditRating.min&&totalPoints<=this.object.creditRating.max&&(sheetData.creditRatingOkay=!0)):"string"==typeof row.selected&&(name=item.system.specialization+" ("+row.selected+")"),sheetData.skills.push({key,index,name,isOccupation:row.occupationToggle,isArchetype:row.archetypeToggle,base,personalPoints:row.personalPoints,occupationPoints:row.occupationPoints,archetypePoints:row.archetypePoints,experiencePoints:row.experiencePoints,totalPoints,showCreditRating:showMonetary&&key===this.cocidCreditRating})}}}sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData.creditRatingOkay&&(sheetData.canNext=!0)}sheetData.personal.remaining=sheetData.personal.total-sheetData.personal.count,sheetData.occupation.remaining=sheetData.occupation.total-sheetData.occupation.count,sheetData.archetype.remaining=sheetData.archetype.total-sheetData.archetype.count;break;case sheetData.pages.PAGE_BACKSTORY:{const allBackstories=await this.object.cacheBackstories;sheetData.backstories={};for(let index=0;index<this.object.bioSections.length;index++)sheetData.backstories[index]={index,name:this.object.bioSections[index].name,rolls:game.system.api.cocid.findCocIdInList(this.object.bioSections[index].key,allBackstories).length?this.object.bioSections[index].key:"",value:this.object.bioSections[index].value}}sheetData.canNext=!0,sheetData.createButton=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;break;case sheetData.pages.PAGE_CREATE:sheetData.canNext=!0,sheetData.createButton=!0}return sheetData}activateListeners(html){super.activateListeners(html),html.keypress((e=>/textarea/i.test((e.target||e.srcElement).tagName)||13!==(e.keyCode||e.which||e.charCode||0))),html.find(".submit_on_change").change(this._onChangeSubmit.bind(this)),html.find(".roll-characteristic").click(this._onRollCharacteristic.bind(this)),html.find(".increase-10-characteristic").click(this._onIncreaseCharacteristic10.bind(this)),html.find(".increase-characteristic").click(this._onIncreaseCharacteristic.bind(this)),html.find(".decrease-characteristic").click(this._onDecreaseCharacteristic.bind(this)),html.find(".decrease-10-characteristic").click(this._onDecreaseCharacteristic10.bind(this)),html.find("button.roll_all").click(this._onRollAll.bind(this)),html.find("button.roll_edu").click(this._onRollEdu.bind(this)),html.find("button.roll_luck").click(this._onRollLuck.bind(this)),html.find(".item input.submit_on_blur").blur(this._onChangeSubmit.bind(this)),html.find(".item input.save-characteristic-on-blur").blur(this._onChangeSaveCharacteristic.bind(this)),html.find(".item.toggleable").click(this._onToggleSkill.bind(this)),html.find(".item.clickable").click(this._onClickPickSkill.bind(this)),html.find(".skills-list input").click(this._onClickSkillSpecial.bind(this)),html.find(".skills-list .remove-skill").click(this._onClickRemoveSkill.bind(this)),html.find(".item input.skill-adjustment").blur(this._onChangeSkillPoints.bind(this)),html.find("textarea.backstory-text").keyup(this._onChangeBackstoryText.bind(this)),html.find("button.backstory-roll").click(this._onRollBackstory.bind(this)),html.find("button.backstory-reset").click(this._onResetBackstory.bind(this))}async rollMessage(rolls){if(rolls.length){const html=[];for(const roll of rolls)html.push(await renderTemplate(Roll.CHAT_TEMPLATE,{formula:(CoC7Utilities.getCharacteristicNames(roll[0])?.label??roll[0])+": "+roll[1],tooltip:await roll[2].getTooltip(),total:roll[2].total}));ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html.join("<div>&nbsp;</div>"),whisper:ChatMessage.getWhisperRecipients("GM")})}}addItemToList(item,{isOccupationDefault=!1,inOccupationGroup=!1,occupationToggle=!1,isArchetypeDefault=!1,archetypeToggle=!1,isCreditRating=!1}={}){const key=item.flags.CoC7?.cocidFlag?.id??item.name;if("skill"!==item.type)return void this.object.investigatorItems.push(item);const isMultiple=!(!item.system.properties.special||!(item.system.properties.requiresname&&!item.system.properties.onlyone||item.system.properties.picknameonly||item.name===game.i18n.format("CoC7.AnySpecName"))),flags={isOccupationDefault,inOccupationGroup,isArchetypeDefault,isCreditRating,occupationToggle,archetypeToggle},rows={occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected:!1};if(void 0===this.object.skillItems[key])this.object.skillItems[key]={item,flags:mergeObject(flags,{isMultiple},{inplace:!1}),rows:[]},isMultiple&&!1===isOccupationDefault&&!1===inOccupationGroup&&!1===isArchetypeDefault||this.object.skillItems[key].rows.push(mergeObject(flags,rows,{inplace:!1}));else{if(isMultiple)this.object.skillItems[key].rows.push(mergeObject(flags,rows,{inplace:!1}));else for(const flag in flags)this.object.skillItems[key].rows[0][flag]=this.object.skillItems[key].rows[0][flag]||flags[flag];for(const flag in flags)this.object.skillItems[key].flags[flag]=this.object.skillItems[key].flags[flag]||flags[flag]}!isMultiple&&flags.isCreditRating&&(this.object.skillItems[key].rows[0].occupationPoints=this.object.creditRating.min)}clearSetupPoints(){for(const key in this.object.setupPoints)this.object.setupPoints[key]=""}async setSkillLists(){this.object.skillItems={},this.object.occupationGroups={},this.object.investigatorItems=[],this.object.placeable=duplicate(this.object.quickFireValues);const setup=await this.getCacheItemByCoCID(this.object.setup),occupation=await this.getCacheItemByCoCID(this.object.occupation);let archetype=!1;if(""!==this.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype)),setup&&occupation&&(!game.settings.get("CoC7","pulpRuleArchetype")||archetype)){this.object.bioSections=[];for(let index=0;index<setup.system.bioSections.length;index++)this.object.bioSections.push({name:setup.system.bioSections[index],value:"",key:"rt..backstory-"+CoC7Utilities.toKebabCase(setup.system.bioSections[index])});this.object.personal=occupation.system.personal,this.object.creditRating=occupation.system.creditRating;let items=[];items=await this.expandItemArray(setup.system.items);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index]);items=await this.expandItemArray(occupation.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isOccupationDefault:!0,occupationToggle:!0});for(let group=0,gm=occupation.system.groups.length;group<gm;group++){this.object.occupationGroups[group]=occupation.system.groups[group].options,items=await this.expandItemArray(occupation.system.groups[group].skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{inOccupationGroup:group})}if(archetype){items=await this.expandItemArray(archetype.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isArchetypeDefault:!0,archetypeToggle:!0})}if(Number(this.object.creditRating.max)>0){const nameCreditRating=game.i18n.format("CoC7.CoCIDFlag.keys."+this.cocidCreditRating),flags={isOccupationDefault:!0,occupationToggle:!0,isCreditRating:!0};if(void 0!==this.object.skillItems[this.cocidCreditRating])this.addItemToList(this.object.skillItems[this.cocidCreditRating].item,flags);else if(void 0!==this.object.skillItems[nameCreditRating])this.addItemToList(this.object.skillItems[nameCreditRating].item,flags);else{const skill=await game.system.api.cocid.fromCoCID(this.cocidCreditRating);skill.length&&this.addItemToList(skill[0],flags)}}}}_onDragStart(event){if(event.currentTarget.dataset.characteristicKey){const dragData={type:"investigatorCharacteristic",key:event.currentTarget.dataset.characteristicKey,value:event.currentTarget.dataset.value};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}async _onDrop(event){try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if(void 0!==dataList.type&&"investigatorCharacteristic"===dataList.type){if(dataList.destination=event.target.closest("li").dataset.characteristicKey,dataList.okay=!1,"-"===dataList.key&&void 0!==this.object.setupPoints[dataList.destination]){const index=this.object.placeable.indexOf(parseInt(dataList.value,10));-1!==index&&this.object.placeable.splice(index,1),""!==this.object.setupPoints[dataList.destination]&&this.object.placeable.push(parseInt(this.object.setupPoints[dataList.destination],10)),this.object.setupPoints[dataList.destination]=parseInt(dataList.value,10),this.object.placeable.sort().reverse(),dataList.okay=!0}else if(void 0!==this.object.setupPoints[dataList.key]&&"-"===dataList.destination)""!==this.object.setupPoints[dataList.key]&&(this.object.placeable.push(parseInt(this.object.setupPoints[dataList.key],10)),this.object.setupPoints[dataList.key]="",this.object.placeable.sort().reverse(),dataList.okay=!0);else if(void 0!==this.object.setupPoints[dataList.key]&&void 0!==this.object.setupPoints[dataList.destination]){const temp=""===this.object.setupPoints[dataList.key]?"":parseInt(this.object.setupPoints[dataList.key],10);this.object.setupPoints[dataList.key]=""===this.object.setupPoints[dataList.destination]?"":parseInt(this.object.setupPoints[dataList.destination],10),this.object.setupPoints[dataList.destination]=temp,dataList.okay=!0}if(dataList.okay)return void this.render(!0)}}catch(err){}const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if([this.pageList.PAGE_ARCHETYPE_SKILLS,this.pageList.PAGE_OCCUPATION_SKILLS].includes(this.object.step))for(const item of dataList)"skill"===item.type&&(this.addItemToList(item),this.render(!0))}_onClickSkillSpecial(event){event.stopPropagation()}_onClickRemoveSkill(event){event.stopPropagation();const key=event.currentTarget?.parentNode?.dataset?.key,index=event.currentTarget?.parentNode?.dataset?.index;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows.splice(index,index),this.render(!0))}async _onToggleSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows[index][toggleKey]=!this.object.skillItems[key].rows[index][toggleKey],this.render(!0))}async _onClickPickSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;if(void 0!==this.object.skillItems[key]){index>-1&&(this.object.skillItems[key].rows[index][toggleKey]=!1,this.object.skillItems[key].rows[index].selected=!1,this.render(!0));let skillList=[];const group=game.system.api.cocid.guessGroupFromKey(key);group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>!(item.system.properties?.special&&(item.system.properties?.requiresname||item.system.properties?.picknameonly)))),skillList.length>1&&skillList.sort(CoC7Utilities.sortByNameKey));const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:this.object.skillItems[key].item.system.properties?.requiresname??!1,fixedBaseValue:!0,specializationName:this.object.skillItems[key].item.system.specialization,label:this.object.skillItems[key].item.name});if(index>-1)""!==skillData.selected?(this.object.skillItems[key].rows[index].selected=skillList.find((i=>i.id===skillData.selected)),this.object.skillItems[key].rows[index][toggleKey]=!0):""!==skillData.name&&(this.object.skillItems[key].rows[index].selected=skillData.name,this.object.skillItems[key].rows[index][toggleKey]=!0);else{let selected=!1;""!==skillData.selected?selected=skillList.find((i=>i.id===skillData.selected)):""!==skillData.name&&(selected=skillData.name),this.object.skillItems[key].rows.push({isOccupationDefault:!1,inOccupationGroup:!1,isArchetypeDefault:!1,isCreditRating:!1,occupationToggle:"occupationToggle"===toggleKey,archetypeToggle:"archetypeToggle"===toggleKey,occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected})}this.render(!0)}}async _onChangeSkillPoints(event){const input=$(event.currentTarget),adjustment=input.data("adjustment"),li=input.closest("li"),key=li.data("key"),index=li.data("index");void 0!==this.object.skillItems[key]?.rows[index][adjustment]&&(this.object.skillItems[key].rows[index][adjustment]=input.val()),this.render(!0)}async _onChangeBackstoryText(event){const textarea=$(event.currentTarget),index=textarea.data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=textarea.val())}async _onRollBackstory(event){const button=$(event.currentTarget),index=button.data("index"),key=button.data("key");if(void 0!==this.object.bioSections[index]){const rolltable=await game.system.api.cocid.fromCoCID(key);if(1===rolltable.length){const tableResult=await rolltable[0].roll();tableResult.results[0].type===CONST.TABLE_RESULT_TYPES.TEXT&&(this.object.bioSections[index].value=(this.object.bioSections[index].value+"\n"+tableResult.results[0].text.trim()).trim())}}this.render(!0)}async _onResetBackstory(event){const index=$(event.currentTarget).data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=""),this.render(!0)}async _onRollLuck(event){const setup=await this.getCacheItemByCoCID(this.object.setup);if(setup){const die=await new Roll(setup.system.characteristics.rolls.luck.toString()).evaluate({async:!0});this.object.setupModifiers.luck=[die.total];const html=await renderTemplate(Roll.CHAT_TEMPLATE,{formula:game.i18n.localize("CoC7.InvestigatorWizard.RollTwiceForLuck")+": "+setup.system.characteristics.rolls.luck.toString(),tooltip:await die.getTooltip(),total:die.total});ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html,whisper:ChatMessage.getWhisperRecipients("GM")}),this.render(!0)}}async _onRollEdu(event){if(event.preventDefault(),void 0!==this.object.requiresAgeAdjustments.edu&&!this.object.requiresAgeAdjustments.edu.rolled&&this.object.requiresAgeAdjustments.edu.total){let value=parseInt(this.object.setupPoints.edu,10);const message=[];for(let rolls=this.object.requiresAgeAdjustments.edu.total;rolls>0;rolls--){const die=await new Roll("1d100").evaluate({async:!0});if(die.total>value){const augmentDie=await new Roll("1d10").evaluate({async:!0});message.push(`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value,augment:augmentDie.total})}</span><br>`),value+=parseInt(augmentDie.total,10)}else message.push(`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value})}</span><br>`)}ChatMessage.create({flavor:game.i18n.localize("CoC7.RollAll4Dev"),user:game.user.id,speaker:{alias:game.user.name},content:message.join(""),whisper:ChatMessage.getWhisperRecipients("GM")}),this.object.setupModifiers.edu=value-parseInt(this.object.setupPoints.edu,10),this.object.requiresAgeAdjustments.edu.rolled=!0,this.render(!0)}}async _onRollAll(event){event.preventDefault();const rolls=[];for(const key of["str","con","siz","dex","app","int","pow","edu","luck"]){const result=await this.rollCharacteristic(key);!1!==result&&rolls.push(result)}this.rollMessage(rolls),this.render(!0)}async _onIncreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,10),this.render(!0)}async _onIncreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,1),this.render(!0)}async _onDecreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-1),this.render(!0)}_onDecreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-10),this.render(!0)}modifyOffset(key,value,min,max){this.object.setupModifiers[key]=Math.max(Math.min(parseInt(this.object.setupModifiers[key],10)+value,parseInt(max,10)),parseInt(min,10))}modifyCharacteristic(key,value){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+value,this.object.setupPoints[key]=Number(input.value))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key,result=await this.rollCharacteristic(characKey);!1!==result&&this.rollMessage([result]),this.render(!0)}async rollCharacteristic(key){const li=$(`#investigator-wizard-application li.item[data-key=${key}]`),input=li.find("input"),formula=li.data("roll");if(input&&formula&&(this.object.rerollsEnabled||""===this.object.setupPoints[key])){const roll=new Roll(formula.toString());return await roll.evaluate({async:!0}),input.val(roll.total),this.object.setupPoints[key]=Number(roll.total),[key,formula.toString(),roll]}return!1}_onChangeSubmit(event){this._onSubmit(event)}_onChangeSaveCharacteristic(event){const obj=$(event.currentTarget),name=obj.prop("name");if(void 0!==this.object.setupPoints[name]){this.object.setupPoints[name]=obj.val();let empties=!1,total=0;for(const key in this.object.setupPoints)""!==this.object.setupPoints[key]?"luck"!==key&&(total+=parseInt(this.object.setupPoints[key],10)):empties=!0;const objTotal=obj.closest("ol.item-list").find("span.total"),max=parseInt(objTotal.siblings("span.value").text(),10);objTotal.text(total),total!==max||empties?obj.closest("form").find("button.submit-button[data-button=next]").length>0&&this.render(!0):0===obj.closest("form").find("button.submit-button[data-button=next]").length&&this.render(!0)}}getPageNumber(direction){const pageOrder=this.pageOrder,key=parseInt(Object.keys(pageOrder).find((key=>pageOrder[key]===this.object.step)),10)+direction;return pageOrder[key]}async _updateObject(event,formData){if(["back","next"].includes(event.submitter?.dataset.button)){if(event.submitter.className.indexOf("currently-submitting")>-1)return;event.submitter.className=event.submitter.className+" currently-submitting"}if(void 0!==formData["default-setup"]&&void 0!==formData["world-era"]&&void 0!==formData["default-ownership"]){if(this.object.defaultSetup!==formData["default-setup"]&&(this.object.defaultSetup=formData["default-setup"],game.settings.set("CoC7","InvestigatorWizardSetup",this.object.defaultSetup),this.object.setup=this.object.defaultSetup,this.clearSetupPoints(),await this.setSkillLists()),this.object.defaultOwnership!==formData["default-ownership"]&&(this.object.defaultOwnership=formData["default-ownership"],game.settings.set("CoC7","InvestigatorWizardOwnership",this.object.defaultOwnership)),this.object.defaultEra!==formData["world-era"]){const obj=$(this.element.find("form")),started=Date.now();obj.find(".dialog-buttons:first").hide(),obj.find(".scrollsection:first").hide(),obj.find(".erachange:first").show(),this.object.defaultEra=formData["world-era"],await game.settings.set("CoC7","worldEra",this.object.defaultEra),this.object.cacheCoCID=await CoC7InvestigatorWizard.loadCacheItemByCoCID();const buffer=500-(Date.now()-started);buffer>10&&await new Promise((resolve=>setTimeout(resolve,buffer)))}if(void 0!==formData["characteristics-method"]){const type=Number(formData["characteristics-method"]);type===this.characteristicsMethods.METHOD_DEFAULT?(this.object.enforcePointBuy=!1,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_POINTS?(this.object.enforcePointBuy=!0,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_VALUES&&(this.object.enforcePointBuy=!1,game.settings.get("CoC7","pulpRuleArchetype")?this.object.quickFireValues=[90,80,70,60,60,50,50,40]:this.object.quickFireValues=[80,70,60,60,50,50,50,40]),game.settings.set("CoC7","InvestigatorWizardPointBuy",this.object.enforcePointBuy),game.settings.set("CoC7","InvestigatorWizardQuickFire",this.object.quickFireValues)}this.object.rerollsEnabled="string"==typeof formData["rerolls-enabled"],game.settings.set("CoC7","InvestigatorWizardRerolls",this.object.rerollsEnabled);for(let i=0,im=this.object.quickFireValues.length;i<im;i++){const num=Number(formData["quick-fire-values-"+i]);num>0&&(this.object.quickFireValues[i]=num)}this.object.quickFireValues.sort().reverse(),this.object.placeable=duplicate(this.object.quickFireValues),"string"==typeof formData["default-enabled"]?"0"===this.object.defaultQuantity.toString()?(this.object.defaultQuantity=1,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):(this.object.defaultQuantity=formData["default-quantity"],game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):"0"!==this.object.defaultQuantity.toString()&&(this.object.defaultQuantity=0,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity))}else if(void 0!==formData["coc-setup"])this.object.setup!==formData["coc-setup"]&&(this.object.setup=formData["coc-setup"],this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-archetype"])this.object.archetype!==formData["coc-archetype"]&&(this.object.archetype=formData["coc-archetype"],this.object.coreCharacteristic="",this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-occupation"])this.object.occupation!==formData["coc-occupation"]&&(this.object.occupation=formData["coc-occupation"],await this.setSkillLists());else{for(const key in this.object.setupPoints)void 0!==formData[key]&&this.object.setupPoints[key]!==formData[key]&&(this.object.setupPoints[key]=formData[key]);void 0!==formData["coc-core-characteristic"]&&this.object.coreCharacteristic!==formData["coc-core-characteristic"]&&(this.object.coreCharacteristic=formData["coc-core-characteristic"],this.clearSetupPoints(),this.object.placeable=duplicate(this.object.quickFireValues))}const flatKeys=["name","age","residence","birthplace","language","avatar","token"];for(const key of flatKeys)void 0!==formData[key]&&this.object[key]!==formData[key]&&(this.object[key]=formData[key],"age"===key&&this.getAgeAdjustments());if("back"===event.submitter?.dataset.button){const pageNumber=this.getPageNumber(-1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}else if("next"===event.submitter?.dataset.button){if(this.object.step===this.pageList.PAGE_CREATE||this.object.step===this.pageList.PAGE_BACKSTORY&&game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole)return void this.attemptToCreate();{const pageNumber=this.getPageNumber(1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}}this.render(!0)}async attemptToCreate(){const actorData=await this.normalizeCharacterData(this.object);if(game.user.isGM||game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole){(await CoC7InvestigatorWizard.createCharacter(actorData)).sheet.render(!0),this.close()}else{const keepers=game.users.filter((u=>u.active&&u.isGM));if(keepers.length){actorData.ownership[game.user.id]=CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER;const data={type:"character-wizard",listener:keepers[0].id,payload:actorData};game.socket.emit("system.CoC7",data),ui.notifications.info(game.i18n.localize("CoC7.InvestigatorWizard.CreatingInvestigator")),this.close()}else ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}async normalizeCharacterData(data){const weaponSkills={melee:{},rngd:{}},items=[];for(const key in data.skillItems){const skill=data.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=duplicate(row.selected),row.selected=!1),row.occupationToggle&&(item.system.flags.occupation=!0),row.archetypeToggle&&(item.system.flags.archetype=!0);let base=item.system.base;if(!Number.isNumeric(base))for(const key in data.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new Roll(base).evaluate({async:!1}).total)),item.system.base=base,item.system.adjustments=item.system.adjustments??{},Number(row.personalPoints)>0&&(item.system.adjustments.personal=parseInt(row.personalPoints,10)),Number(row.occupationPoints)>0&&(item.system.adjustments.occupation=parseInt(row.occupationPoints,10)),Number(row.archetypePoints)>0&&(item.system.adjustments.archetype=parseInt(row.archetypePoints,10)),Number(row.experiencePoints)>0&&(item.system.adjustments.experience=parseInt(row.experiencePoints,10)),key===this.cocidLanguageOwn?(item.system.skillName=data.language,item.name=item.system.specialization+" ("+item.system.skillName+")"):"string"==typeof row.selected&&(item.system.skillName=row.selected,item._id=randomID(),item.name=item.system.specialization+" ("+item.system.skillName+")",void 0!==item.flags.CoC7?.cocidFlag?.id&&(item.flags.CoC7.cocidFlag.id=game.system.api.cocid.guessId(item))),item.system.properties?.fighting?(weaponSkills.melee[item.name]=item._id,weaponSkills.melee[item.system.skillName]=item._id):item.system.properties?.firearm&&(weaponSkills.rngd[item.name]=item._id,weaponSkills.rngd[item.system.skillName]=item._id),items.push(item)}}}for(const sourceItem of data.investigatorItems){const item=duplicate(sourceItem);item.system.properties.melee?(void 0!==weaponSkills.melee[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.melee[item.system.skill.main.name]),void 0!==weaponSkills.melee[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.melee[item.system.skill.alternativ.name])):item.system.properties.rngd&&(void 0!==weaponSkills.rngd[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.rngd[item.system.skill.main.name]),void 0!==weaponSkills.rngd[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.rngd[item.system.skill.alternativ.name])),items.push(item)}let monetary={};const setup=await this.getCacheItemByCoCID(this.object.setup);setup&&(monetary=duplicate(setup.system.monetary));const development={personal:2*(parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)),occupation:0,archetype:0};if(""!==data.archetype){const archetype=await game.system.api.cocid.fromCoCID(data.archetype);1===archetype.length&&(items.push(archetype[0].toObject()),development.archetype=archetype[0].system.bonusPoints)}if(""!==data.occupation){const occupation=await game.system.api.cocid.fromCoCID(data.occupation);if(1===occupation.length){items.push(occupation[0].toObject());const options=[];for(const[key,carac]of Object.entries(occupation[0].system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))):development.occupation+=carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10)));options.length>0&&(development.occupation+=Math.max(...options))}}const biography=[];for(let index=0,im=data.bioSections.length;index<im;index++)biography.push({title:data.bioSections[index].name,value:data.bioSections[index].value});return{type:"character",name:data.name,img:data.avatar,system:{characteristics:{str:{value:parseInt(data.setupPoints.str,10)+parseInt(data.setupModifiers.str,10)},con:{value:parseInt(data.setupPoints.con,10)+parseInt(data.setupModifiers.con,10)},siz:{value:parseInt(data.setupPoints.siz,10)+parseInt(data.setupModifiers.siz,10)},dex:{value:parseInt(data.setupPoints.dex,10)+parseInt(data.setupModifiers.dex,10)},app:{value:parseInt(data.setupPoints.app,10)+parseInt(data.setupModifiers.app,10)},int:{value:parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)},pow:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)},edu:{value:parseInt(data.setupPoints.edu,10)+parseInt(data.setupModifiers.edu,10)}},attribs:{lck:{value:Math.max(parseInt(data.setupPoints.luck,10),parseInt(data.setupModifiers.luck,10))},san:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)}},infos:{age:data.age,residence:data.residence,birthplace:data.birthplace},development,biography,monetary},prototypeToken:{name:data.name,actorLink:!0,texture:{src:data.token},disposition:CONST.TOKEN_DISPOSITIONS.FRIENDLY,sight:{enabled:!0}},items,ownership:{default:parseInt(data.defaultOwnership,10)}}}static async createCharacterFromData(actorData){const actor=await CoC7InvestigatorWizard.createCharacter(actorData),functionId=Hooks.on("renderActorSheet",((app,html,data)=>{app.object.id===actor.id&&(game.socket.emit("system.CoC7",{type:"open-character",listener:Object.keys(actorData.ownership).find((k=>"default"!==k)),payload:actor.id}),Hooks.off("renderActorSheet",functionId))}));actor.sheet.render(!0)}static async createCharacter(actorData){const actor=await Actor.create(actorData);return await actor.update({"system.attribs.hp.value":actor.rawHpMax,"system.attribs.mp.value":actor.rawMpMax,"system.attribs.san.max":actor.rawMpMax}),await actor.resetDailySanity(),actor}static async create(options={}){options=mergeObject({step:0,defaultSetup:game.settings.get("CoC7","InvestigatorWizardSetup"),defaultQuantity:game.settings.get("CoC7","InvestigatorWizardQuantity"),defaultOwnership:game.settings.get("CoC7","InvestigatorWizardOwnership"),defaultEra:game.settings.get("CoC7","worldEra"),rerollsEnabled:game.settings.get("CoC7","InvestigatorWizardRerolls"),enforcePointBuy:game.settings.get("CoC7","InvestigatorWizardPointBuy"),quickFireValues:game.settings.get("CoC7","InvestigatorWizardQuickFire"),placeable:duplicate(game.settings.get("CoC7","InvestigatorWizardQuickFire")),cacheCoCID:CoC7InvestigatorWizard.loadCacheItemByCoCID(),cacheBackstories:game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^rt\.\.backstory-/,type:"rt"}),cacheItems:{},setup:game.settings.get("CoC7","InvestigatorWizardSetup"),skillItems:{},occupationGroups:{},investigatorItems:[],setupPoints:{str:"",con:"",siz:"",dex:"",app:"",int:"",pow:"",edu:"",luck:""},setupModifiers:{str:0,con:0,siz:0,dex:0,app:0,int:0,pow:0,edu:0,luck:0},archetype:"",coreCharacteristic:"",occupation:"",bioSections:[],personal:0,creditRating:{min:0,max:0},name:"",age:"",requiresAgeAdjustments:!1,residence:"",birthplace:"",language:"",avatar:"icons/svg/mystery-man.svg",token:"icons/svg/mystery-man.svg"},options),new CoC7InvestigatorWizard(options).render(!0)}}class CoC7MenuLayer extends PlaceablesLayer{constructor(){super(),this.objects={}}static get layerOptions(){return foundry.utils.mergeObject(super.layerOptions,{name:"coc7menu",zIndex:60})}static get documentName(){return"Token"}get placeables(){return[]}}class CoC7Menu{static getButtons(controls){canvas.coc7gmtools=new CoC7MenuLayer;const isKeeper=game.user.isGM,showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu");controls.push({name:"coc7menu",title:"CoC7.GmTools",layer:"coc7gmtools",icon:"game-icon game-icon-tentacle-strike",visible:isKeeper,tools:[{toggle:!0,icon:"fas fa-angle-double-up",name:"devphase",active:game.settings.get("CoC7","developmentEnabled"),title:"CoC7.DevPhase",onClick:async toggle=>await CoC7Utilities.toggleDevPhase(toggle)},{toggle:!0,icon:"fas fa-user-edit",name:"charcreate",active:game.settings.get("CoC7","charCreationEnabled"),title:"CoC7.CharCreationMode",onClick:async toggle=>await CoC7Utilities.toggleCharCreation(toggle)},{button:!0,icon:"fas fa-user-plus",name:"actor-import",title:"CoC7.ActorImporter",onClick:async()=>await CoC7ActorImporterDialog.create()},{button:!0,icon:"fas fa-user-check",name:"investigator-wizard",title:"CoC7.InvestigatorWizard.Title",onClick:async()=>await CoC7InvestigatorWizard.create()},{toggle:!0,icon:"fas fa-certificate",class:"xp_toggle",name:"xptoggle",active:game.settings.get("CoC7","xpEnabled"),title:"CoC7.toggleXP",onClick:async toggle=>await CoC7Utilities.toggleXPGain(toggle)},{button:!0,icon:"game-icon game-icon-card-joker",name:"fakeroll",title:"CoC7.FakeRoll",onClick:CoC7Chat.fakeRollMessage},{button:!0,icon:"fas fa-moon",name:"startrest",title:"CoC7.startRest",onClick:async()=>await CoC7Utilities.getTarget()}]}),showHiddenDevMenu&&(canvas.coc7DevTools=new CoC7MenuLayer,controls.push({name:"coc7DevMenu",title:"Dev tools. If you don't know what it is, you don't need it and you shouldn't use it !!",layer:"coc7DevTools",icon:"game-icon game-icon-police-badge",visible:isKeeper,tools:[{toggle:!0,icon:"game-icon game-icon-dice-fire",name:"alwaysCrit",active:game.CoC7.dev.dice.alwaysCrit,title:"All rolls will crit",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=!1,game.CoC7.dev.dice.alwaysCrit=toggle}},{toggle:!0,icon:"game-icon game-icon-fire-extinguisher",name:"alwaysFumble",active:game.CoC7.dev.dice.alwaysFumble,title:"All rolls will fumble",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=toggle,game.CoC7.dev.dice.alwaysCrit=!1}}]}))}static renderControls(app,html,data){const isKeeper=game.user.isGM,keeperMenu=html.find(".game-icon-tentacle-strike").parent();keeperMenu.addClass("coc7-menu"),isKeeper&&keeperMenu.after('<li class="scene-control coc7-menu coc7-create-link" title="'+game.i18n.localize("CoC7.CreateLink")+'"><i class="fas fa-link"></i></li>'),keeperMenu.after('<li class="scene-control coc7-menu coc7-dice-roll" title="'+game.i18n.localize("CoC7.RollDice")+'"><i class="game-icon game-icon-d10"></i></li>'),html.find(".coc7-menu.coc7-dice-roll").click((event=>CoC7Utilities.rollDice(event))),html.find(".coc7-menu.coc7-create-link").click((event=>CoC7ContentLinkDialog.create(event)))}}class CoC7Canvas{static get COC7_TYPES_SUPPORTED(){return["CoC7Link","locator","getToken"]}static async onDropSomething(canvas,data){if(data.type&&CoC7Canvas.COC7_TYPES_SUPPORTED.includes(data.type)){const gridSize=canvas.scene.grid.size,x=data.x-gridSize/2,y=data.y-gridSize/2,height=gridSize,width=gridSize;let dropTargetTokens=canvas.tokens.placeables.filter((obj=>{const c=obj.center;return Number.between(c.x,x,x+width)&&Number.between(c.y,y,y+height)}));switch(dropTargetTokens.length||(dropTargetTokens=canvas.tokens.controlled),data.type){case"CoC7Link":if(data.check===CoC7Link.CHECK_TYPE.EFFECT){if(dropTargetTokens.length)for(const token of dropTargetTokens)CoC7Link._onLinkActorClick(token.actor,data)}else dropTargetTokens.length?CoC7Link.toWhisperMessage(data,dropTargetTokens.filter((t=>t.actor.owners.length)).map((t=>t.actor))):CoC7Link.toWhisperMessage(data,game.users.players.filter((u=>!!u.character)).map((u=>u.character)));break;case"getToken":void 0!==data.appId&&"string"==typeof data.callBack&&void 0!==ui.windows[data.appId]&&"function"==typeof ui.windows[data.appId][data.callBack]&&ui.windows[data.appId][data.callBack](dropTargetTokens);break;default:if(data.docUuid&&data.callBack){const doc=CoC7Utilities.SfromUuid(data.docUuid);if(doc[data.callBack]&&"function"==typeof doc[data.callBack])try{data.scene=canvas.scene.uuid,doc[data.callBack](data)}catch(error){console.warn(error.message)}}}}}}class CoC7SettingsDirectory extends Settings{activateListeners(html){super.activateListeners(html),game.user.isGM&&(html.find("#settings-game").append('<button class="trigger-data-migration"><i class="fas fa-wrench"></i> '+game.i18n.localize("CoC7.Migrate.TriggerButton")+"</button>"),html.find(".trigger-data-migration").click((()=>{new Dialog({title:game.i18n.localize("CoC7.Migrate.TriggerTitle"),content:game.i18n.localize("CoC7.Migrate.TriggerContents"),buttons:{migrate:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Migrate.TriggerRestart"),callback:async()=>{await game.settings.set("CoC7","systemUpdateVersion",0),window.location.reload()}},close:{icon:'<i class="fas fa-ban"></i>',label:game.i18n.localize("Cancel"),callback:()=>{}}},default:"close"},{}).render(!0)})))}}class CoC7CompendiumDirectory extends CompendiumDirectory{activateListeners(html){super.activateListeners(html);let translated=!1;if("en"===game.i18n.lang)translated=!0;else if(void 0!==game.babele)for(const v of Object.values(game.babele.modules))v.lang===game.i18n.lang&&(translated=!0);translated||(html.find("footer.directory-footer").append('<a class="compendium-translation" title="'+game.i18n.localize("CoC7.HowToTranslateTitle")+'">'+game.i18n.localize("CoC7.HowToTranslateTitle")+"</a>"),html.find(".compendium-translation").click((()=>{const message="<p>"+game.i18n.localize("CoC7.HowToTranslateWarning")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallBabele")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateEnableTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateNoTranslation")+"</p>";new Dialog({title:game.i18n.localize("CoC7.HowToTranslateTitle"),content:message,buttons:{},default:"close"},{}).render(!0)})))}}class CoC7ActorDirectory extends ActorDirectory{activateListeners(html){super.activateListeners(html);let allowWizard=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;if(!allowWizard){const allowed=game.settings.get("CoC7","InvestigatorWizardQuantity");if(allowed>0){allowWizard=game.actors.filter((a=>[a.ownership.default,a.ownership[game.user.id]??CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE].includes(CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER))).length<allowed}}allowWizard&&(html.find("footer.directory-footer").append('<a class="investigator-wizard">'+game.i18n.localize("CoC7.InvestigatorWizard.Title")+"</a>"),html.find(".investigator-wizard").click((()=>{CoC7InvestigatorWizard.create()}))),game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole&&(html.find("footer.directory-footer").append('<a class="actor-import">'+game.i18n.localize("CoC7.ActorImporter")+"</a>"),html.find(".actor-import").click((()=>{CoC7ActorImporterDialog.create()})))}}class CoC7Spell extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/pentagram-rose.svg"),super(data,context),this.context=context}async cast(){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));const costs=this.system.costs,losses=[];let convertSurplusIntoHitPoints;if(costs.magicPoints=CoC7Utilities.isFormula(costs.magicPoints)?(await new Roll(costs.magicPoints).roll({async:!0})).total:parseInt(costs.magicPoints),costs.magicPoints&&costs.magicPoints>this.actor.system.attribs.mp.value&&(convertSurplusIntoHitPoints=await new Promise((resolve=>{const convertedHitPoints=costs.magicPoints-this.actor.system.attribs.mp.value,convertedMagicPoints=costs.magicPoints-convertedHitPoints,data={title:" ",content:game.i18n.format("CoC7.NotEnoughMagicPoints",{actorMagicPoints:this.actor.system.attribs.mp.value,convertedHitPoints,convertedMagicPoints,originalMagicPoints:costs.magicPoints,spell:this.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>(costs.hitPoints=convertedHitPoints,costs.magicPoints=convertedMagicPoints,resolve(!0))}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)})),!convertSurplusIntoHitPoints))return;for(const[key,value]of Object.entries(costs))value&&0!==Number(value)&&losses.push(await this.resolveLosses(key,value));const description=this.system.description.value,html=await renderTemplate("systems/CoC7/templates/items/spell/chat.html",{description,losses});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:this.name,content:html})}async resolveLosses(characteristic,value){let characteristicName,loss;loss=CoC7Utilities.isFormula(value)?(await new Roll(value).roll({async:!0})).total:parseInt(value);const actorData=this.actor.system;switch(characteristic){case"hitPoints":characteristicName=game.i18n.localize("CoC7.HitPoints"),this.actor.dealDamage(loss,{ignoreArmor:!0});break;case"sanity":characteristicName=game.i18n.localize("CoC7.SanityPoints"),this.grantSanityLoss(loss);break;case"magicPoints":characteristicName=game.i18n.localize("CoC7.MagicPoints"),this.actor.setMp(actorData.attribs.mp.value-loss);break;case"power":characteristicName=game.i18n.localize("CHARAC.Power"),this.actor.update({"system.characteristics.pow.value":actorData.characteristics.pow.value-loss})}return{characteristicName,loss}}async grantSanityLoss(value){const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.CastingSpell",{spell:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=value;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async update(data,context){if(void 0!==this.context.parent&&void 0!==this.context.bookId){let item,book;null===this.context.parent?(item=game.items.get(this.context.bookId),book=item.toObject()):book=this.context.parent.items.get(this.context.bookId).toObject();for(let i=0,im=book.system.spells.length;i<im;i++)book.system.spells[i]._id===this.id&&(book.system.spells[i]=mergeObject(book.system.spells[i],data));null===this.context.parent?(await item.update({"system.spells":book.system.spells}),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)):(await this.context.parent.updateEmbeddedDocuments("Item",[book]),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)),this.sheet.render(!0)}else super.update(data,context)}}class CoC7Book extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/secret-book.svg"),super(data,context)}static convertDifficulty(difficulty){switch(difficulty){case"hard":return CoC7Check.difficultyLevel.hard;case"extreme":return CoC7Check.difficultyLevel.extreme;case"critical":return CoC7Check.difficultyLevel.critical;case"unreadable":return CoC7Check.difficultyLevel.impossible;default:return CoC7Check.difficultyLevel.regular}}async addSpells(spells){const collection=this.system.spells?duplicate(this.system.spells):[];for(const spell of spells)collection.push(spell);return await this.update({"system.spells":collection})}async spellDetail(index){const isKeeper=game.user.isGM,data=this.system.spells[index],parent=this.actor?this.actor:null,spell=new CoC7Spell(data,{parent,bookId:this.id});if(isKeeper||spell.system.learned)return await spell.sheet.render(!0)}async attemptInitialReading(){const difficulty=CoC7Book.convertDifficulty(this.system.difficultyLevel),language=this.system.language,skill=this.actor?.getSkillsByName(language);if(skill){if(0===skill.length)return ui.notifications.error(game.i18n.format("CoC7.UnknownLanguage",{actor:this.actor.name}));{const check=new CoC7Check;return check.actor=this.actor,check.skill=skill[0].id,check.difficulty=difficulty,check.parent=this.uuid,check.context="INITIAL_READING",check.flavor=game.i18n.format("CoC7.ReadAttempt",{book:this.name,language,difficulty:this.system.difficultyLevel}),await check.roll(),await check.toMessage()}}return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"))}async changeProgress(mode,value){if(!this.isOwned&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading&&"reset"!==mode)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));if(!this.system.type.mythos&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotMythosTome"));const necessary=this.system.study.necessary;let fullStudy=this.system.fullStudy,progress=this.system.study.progress;if(isNaN(progress))return await this.update({"system.study.progress":0});if(value&&progress>value)return await this.update({"system.fullStudy":++fullStudy,"system.study.progress":value}),await this.completeFullStudy();if("increase"===mode&&progress<necessary){if(!1!==await this.checkExhaustion())return;if(await this.update({"system.study.progress":++progress}),progress===necessary)return await this.update({"system.fullStudy":++fullStudy}),await this.grantFullStudy()}else if("decrease"===mode&&progress>0)return await this.update({"system.study.progress":--progress})}async checkExhaustion(){const actorMythosValue=this.actor?.cthulhuMythos,mythosRating=this.system.mythosRating;if(this.system.initialReading)return actorMythosValue>=mythosRating&&(await this.update({"system.study.progress":this.system.study.necessary}),ui.notifications.warn(game.i18n.format("CoC7.BookHasNothingMoreToTeach",{actor:this.actor.name,book:this.name})))}async grantFullStudy(){if(!this.system.type.mythos)return;if(!1!==await this.checkExhaustion())return;const actorMythosValue=this.actor.cthulhuMythos,developments=[],mythosRating=this.system.mythosRating;let mythosFinal=this.system.gains.cthulhuMythos.final;if(actorMythosValue+mythosFinal>mythosRating)for(let index=1;index<=mythosFinal;index++)actorMythosValue+mythosFinal-index<=mythosRating&&(mythosFinal-=index);return developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythosFinal)},{name:this.system.language,gain:"development"}),await this.grantSkillDevelopment(developments),await this.rollSanityLoss(),await this.update({"system.fullStudies":++this.system.fullStudies})}async grantInitialReading(){if(this.system.initialReading)return;const developments=[],mythos={gains:this.system.gains.cthulhuMythos.initial,type:this.system.type.mythos},occult={gains:this.system.gains.occult,type:this.system.type.occult},other_gains=this.system.gains.others,other_type=this.system.type.other;if(mythos.type&&mythos.gains&&developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythos.gains)}),occult.type&&occult.gains&&developments.push({name:game.i18n.localize("CoC7.Occult"),gain:parseInt(occult.gains)}),other_type)for(const skill of other_gains){const pattern=skill.name.match(/^(.+) \((.+)\)$/);pattern&&(skill.specialization=pattern[1],skill.name=pattern[2]),"development"!==skill.value&&(skill.value=(await new Roll(skill.value).roll({async:!0})).total),skill.value&&developments.push({name:skill.name,gain:skill.value,specialization:skill.specialization})}return await this.grantSkillDevelopment(developments),(mythos.type||occult.type)&&this.system.sanityLoss&&await this.rollSanityLoss(),await this.update({"system.initialReading":!0})}async grantSpellLearning(spelllearned){for(const spell of this.system.spells)if(spell._id===spelllearned._id){spell.system.learned=!0;await this.actor.items.find((item=>"spell"===item.type&&item.name===spelllearned.name))?ui.notifications.warn(game.i18n.format("CoC7.SpellAlreadyLearned",{spell:spelllearned.name,book:this.name})):spelllearned.system.learned=!0;break}await this.update({"system.spells":this.system.spells}),spelllearned.system.learned&&(ui.notifications.info(game.i18n.format("CoC7.SpellSuccessfullyLearned",{spell:spelllearned.name,book:this.name})),await this.actor.createEmbeddedDocuments("Item",[duplicate(spelllearned)]))}async grantSkillDevelopment(developments){if(0!==developments.length){for(const development of developments){if(!development.gain)continue;let skill=await this.actor.getSkillsByName(development.name);if(0===skill.length){const existingSkill=await game.items.find((item=>"skill"===item.type&&item.name===development.name));existingSkill?skill=await this.actor.createEmbeddedDocuments("Item",[duplicate(existingSkill)]):(skill=await this.actor.createSkill(development.name,0),development.specialization&&await skill[0].update({"system.properties.special":!0,"system.specialization":development.specialization}))}if(skill=skill[0],"development"===development.gain)await skill.flagForDevelopement();else{if(skill.value+development.gain>99)for(let index=1;index<=development.gain;index++)skill.value+development.gain-index<=99&&(development.gain-=index,await skill.increaseExperience(development.gain));await skill.increaseExperience(development.gain)}}return this.showDevelopmentsTable(developments)}}async redoFullStudy(){return await this.update({"system.study.progress":0}),await this.update({"system.study.necessary":2*this.system.study.necessary})}async rollSanityLoss(){const value=this.system.sanityLoss;if(!value||""===value)return;const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.ReadingMythosTome",{book:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=(await new Roll(value).roll({async:!0})).total;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async showDevelopmentsTable(developments){for(const development of developments)development.specialization&&(development.name=`${development.specialization} (${development.name})`),"development"===development.gain?development.gain=game.i18n.localize("CoC7.MarkedForDevelopment"):development.gain=`+${development.gain} ${game.i18n.localize("CoC7.Points")}`;const html=await renderTemplate("systems/CoC7/templates/items/book/development.html",{developments});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.GainsForReading",{book:this.name}),content:html})}async attemptSpellLearning(id){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));const spell=this.system.spells.find((spell=>spell._id===id));if(spell){const check=new CoC7Check;check.actor=this.actor,check.difficulty=CoC7Check.difficultyLevel.hard,check.parent=this.uuid,check.flavor=game.i18n.format("CoC7.LearnSpellAttempt",{book:this.name,spell:spell.name}),check.context="SPELL_LEARNING",check.spell=spell,await check.rollCharacteristic("int"),await check.toMessage()}}async updateRoll(roll){const check=CoC7Check.fromRollString(roll);if(check.passed){if("INITIAL_READING"===check.context)return await this.grantInitialReading();if("SPELL_LEARNING"===check.context)return await this.grantSpellLearning(check.spell)}}}const ECC_CLASS="enhanced-chat-card",PERMISSION_TYPE_GM="gm",PERMISSION_TYPE_NOT_GM="!gm",PERMISSION_TYPE_SPEAKER="speaker",PERMISSION_TYPE_USER="user",PERMISSION_TYPE_BLACKLIST="blacklist",STATE_ON="switched-on",STATE_OFF="switched-off";async function updateMessage(messageId,newContent){const chatMessage=game.messages.get(messageId);await chatMessage.update({content:newContent})}async function GMUpdate(data,options,cardClassName,messageId=void 0){const card=await EnhancedChatCard.fromData(data,options,cardClassName,messageId);return await card.GMUpdate(),card.toObject()}async function advise(){}class EnhancedChatCardLib{constructor(){this.types=new Map,this.socket=null}static injectCSS(){let style=$("head").find("style");style?.length||($("head").append($('<style  type="text/css"></style>')),style=$("head").find("style")),style.append(".ecc-restricted {color: red}\n    .ecc-restricted:hover {cursor: not-allowed}")}static set socket(x){game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.socket=x}static get socket(){if(game.enhancedChatCardsLib){if(game.enhancedChatCardsLib.socket)return game.enhancedChatCardsLib.socket;ui.notifications.error("ECC no socket")}else ui.notifications.error("ECC not Initialized")}static get types(){return game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.types}static register(cardConstructors){cardConstructors.forEach((cardConstructor=>{EnhancedChatCardLib.types.get(cardConstructor.name)||EnhancedChatCardLib.types.set(cardConstructor.name,cardConstructor)}))}}function setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}function getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}class EnhancedChatCard{constructor(data={},options={}){this.data=data,this.data.flags||(this.data.flags={}),this._options=options}async initialize(){}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}set options(x){this._options=x}get template(){return this.options.template}get cssClasses(){return this.options.classes?.join(" ")}get speaker(){return this.options.ooc?game.user:this.options.speaker&&ChatMessage.getSpeakerActor(this.options.speaker)?ChatMessage.getSpeakerActor(this.options.speaker):game.user}async getData(){return{card:this,flags:this.flags,data:this.toObject(),options:this.options,css:this.cssClasses,user:game.user,speaker:this.speaker}}toObject(){if(!this.data)return;const data={};for(const k of Object.keys(this.data)){const v=this.data[k];data[k]=v instanceof Object?v.toObject?v.toObject():deepClone(v):v}return data}async toMessage(optionnalChatData={}){await this.initialize();const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$(html)[0];this.options.attachObject&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes);const speaker=this.options.speaker&&!this.options.ooc?ChatMessage.getSpeaker(this.options.speaker):{},chatData=foundry.utils.mergeObject({user:game.user.id,speaker,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"selfroll"===this.rollMode&&(chatData.whisper=[game.user.id]),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({attachObject=!0}={}){if(this.options.compute&&await this.localCompute(),this.options.GMUpdate&&await this.ExecuteGMUpdate(),this.messageId){const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$.parseHTML(html)[0];attachObject&&!this.data.EEC_ACTION?.detachData&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes),game.enhancedChatCardsLib.socket.executeAsGM("updateMessage",this.messageId,htmlCardElement.outerHTML)}else this.toMessage()}async activateListeners(html){html.on("change","input,select,textarea",this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} .ecc-switch`,this._onToggle.bind(this)),html.on("click",`.${ECC_CLASS} .submit`,this._onSubmit.bind(this)),html.on("focusout",`.${ECC_CLASS} input`,this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} button`,this._onButton.bind(this)),html.on("keydown",`.${ECC_CLASS} form`,this._onKey.bind(this)),html.find("[data-ecc-visibility]").each((async(i,el)=>await this.setVisibility(el))),html.find("[data-ecc-permissions]").each((async(i,el)=>await this.setPermission(el))),html.find(`.${ECC_CLASS} .ecc-switch`).each(((i,el)=>this.setState(el))),html.find(`.${ECC_CLASS} input[type="radio"]`).each(((i,el)=>this.setRadioState(el)))}setState(element){if(element&&(element.dataset.flag&&element.classList.add(this.flags[element.dataset.flag]?STATE_ON:STATE_OFF),element.dataset.name)){const value=getByPath(this,element.dataset.name);element.classList.add(value?STATE_ON:STATE_OFF)}}setRadioState(element){if(!element||!element.name)return;const splited=element.name.split(".");"data"===splited[0].toLowerCase()&&this.data&&void 0!==this.data[splited[1]]&&this.data[splited[1]]===element.value&&(element.checked=!0)}async setVisibility(element){if(!element.dataset.eccVisibility)return;await this.hasPerm(element.dataset.eccVisibility,!0)||(element.style.display="none")}async setPermission(element){if(!element.dataset.eccPermissions)return;await this.hasPerm(element.dataset.eccPermissions)||(element.classList.add("ecc-restricted"),$(element).is("input")&&("range"===element.type?$(element).attr("disabled",!0):$(element).attr("readonly",!0)),$(element).is("select")&&$(element).attr("disabled",!0))}async hasPerm(restrictedTo,vision=!1){if(!restrictedTo.length)return!0;let permissionsArray=restrictedTo.split(" ");const whiteList=!permissionsArray.includes(PERMISSION_TYPE_BLACKLIST);if(whiteList||(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_BLACKLIST))),game.user.isGM){if(!vision)return!0;if(permissionsArray.includes(PERMISSION_TYPE_GM))return whiteList;if(permissionsArray.includes(PERMISSION_TYPE_NOT_GM))return!whiteList}if(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_GM)),permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_NOT_GM)),permissionsArray.includes(PERMISSION_TYPE_USER)){if(this.message.isAuthor)return whiteList;permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_USER))}if(permissionsArray.includes(PERMISSION_TYPE_SPEAKER)){const speaker=this.message.data.speaker;if(speaker.token&&speaker.scene){const actor=await fromUuid(`Scene.${speaker.scene}.Token.${speaker.token}`);if(actor&&actor.isOwner)return whiteList}else if(speaker.actor){const actor=game.actors.get(speaker.actor);if(actor&&actor.isOwner)return whiteList}permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_SPEAKER))}if(permissionsArray.length)for(let i=0;i<permissionsArray.length;i++){const uuid=permissionsArray[i];let actor=await fromUuid(uuid);if(actor||(actor=game.actors.get(uuid)),actor)return actor.isOwner;ui.notifications.error(`Unable to find actor ${uuid}`)}return!whiteList}static async bindListeners(html){const htmlCardElement=html[0].querySelector(`.${ECC_CLASS}`);if(!htmlCardElement)return;const card=await EnhancedChatCard.fromHTMLCardElement(htmlCardElement);card&&card.activateListeners(html)}get flags(){return this.data.flags}async assignObjects(){}async localCompute(){}async GMUpdate(){}async ExecuteGMUpdate(){const newData=await game.enhancedChatCardsLib.socket.executeAsGM("GMUpdate",this.toObject(),this._options,this.constructor.name,this.messageId);this.data=newData,await this.assignObjects()}async _onButton(event){event.preventDefault();const target=event.currentTarget;target.style.display="none";const action=target.dataset.action;let formUpdate,actionUpdate=!1;const card=target.closest(`.${ECC_CLASS}`);card?formUpdate=this._update(card):console.error(`Could not find a EEC class for this card: ${this.constructor.name}`);const originalDisplayStyle=target.style.display;(action||(console.warn("no action associated with this button"),formUpdate))&&(this[action]||(console.warn(`no ${action} action found for this card`),formUpdate))&&(this[action]&&(actionUpdate=await this[action]({event,updateCard:!1})),formUpdate||actionUpdate?await this.updateChatCard():target.style.display=originalDisplayStyle)}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onChange(event){if(this.options.submitOnChange)return this._onSubmit(event)}_onSubmit(event){const target=event.currentTarget;if("BUTTON"===target.tagName&&"action"in target.dataset)return;event.preventDefault();const card=target.closest(`.${ECC_CLASS}`);if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i],data=new FormDataExtended(form).object;for(const[key,value]of Object.entries(data)){getByPath(this,key)!==value&&(setByPath(this,key,value),updates=!0)}}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{attachObject:!0,classes:[ECC_CLASS],exclude:[],excludeStartWith:"_",submitOnChange:!0,speaker:ChatMessage.getSpeaker(),ooc:!1,compute:!0,GMUpdate:!1}}get objectDataString(){const saveData={data:this.data,options:this._options};return JSON.stringify(saveData,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(htmmlCard){if(!htmmlCard)return;if(!htmmlCard.dataset.eccClass)return;if(!htmmlCard.dataset.object)return;const cardData=JSON.parse(unescape(htmmlCard.dataset.object)),message=htmmlCard.closest(".message"),messageId=message?.dataset?.messageId;return await this.fromData(cardData.data,cardData.options,htmmlCard.dataset.eccClass,messageId)}static async fromData(data,options,cardClassName,messageId=void 0){const CardClass=game.enhancedChatCardsLib.types.get(cardClassName);if(!CardClass)return void console.error(`Unknown chat card type: ${cardClassName}`);const card=new CardClass(data,options);return messageId&&(card.messageId=messageId),await card.assignObjects(),card}setData(name){(name||"string"===$.type(name))&&setByPath(this,name,!0)}unsetData(name){(name||"string"===$.type(name))&&setByPath(this,name,!1)}toggleData(name){if(!name&&"string"!==$.type(name))return;setByPath(this,name,!getByPath(this,name))}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const name=target.dataset.flag?`data.flags.${target.dataset.flag}`:target.dataset.name;if(!name)return;const toggle=target.closest(".ecc-radio");if(toggle){const buttons=toggle.querySelectorAll(".ecc-switch");for(const b of buttons){const bName=b.dataset.flag?`data.flags.${b.dataset.flag}`:b.dataset.name;this.unsetData(bName)}this.setData(name)}else this.toggleData(name);const card=target.closest(`.${ECC_CLASS}`);this.options.submitOnChange&&card&&this._update(card),await this.updateChatCard()}}class _participant{constructor(data={}){this.data=data}_fetch(){if(!this._doc&&this.data.docUuid&&(this._doc=CoC7Utilities.getDocumentFromKey(this.data.docUuid)),!this._actor)if(this._doc)switch(this._doc.constructor?.name){case"TokenDocument":this._actor=this._doc.actor;break;case"CoCActor":this._actor=this._doc}else this._actor=CoC7Utilities.getActorFromKey(this.data.docUuid)}get actor(){return this._fetch(),this._actor}get isActor(){return this.hasActor||this.hasVehicle}get isActive(){return this.data.active||!1}get key(){return this.hasVehicle?this.vehicle.actorKey:this.hasActor?this.actor.actorKey:void 0}get icon(){return this.isActor?this.hasVehicle?this.vehicle.img:this.hasActor?this.actor.img:void 0:"systems/CoC7/assets/icons/question-circle-regular.svg"}get driver(){return this._driver||(this._driver=CoC7Utilities.getActorFromKey(this.data.docUuid)),this._driver}get vehicle(){return this.data.vehicleKey&&(this._vehicle=chatHelper.getActorFromKey(this.data.vehicleKey)),this._vehicle}get hasActor(){return!!this.actor}get hasVehicle(){return!!this.vehicle}get name(){return this.hasVehicle?this.vehicle.name:this.hasActor?this.actor.name:this.data.name||void 0}get mov(){return this.data.mov||(this.hasVehicle?this.data.mov=this.vehicle.mov:this.hasActor&&(this.data.mov=this.actor.mov)),this.data.mov&&(isNaN(Number(this.data.mov))?(this.data.hasValidMov=!1,this.data.mov=void 0):this.data.hasValidMov=!0),this.data.mov}get uuid(){return this.data.uuid}get hasMaxBonusDice(){return this.bonusDice>=2}get bonusDice(){return isNaN(this.data.bonusDice)||this.data.bonusDice<0||this.data.bonusDice>2?0:this.data.bonusDice}set bonusDice(x){isNaN(x)?ui.notifications.error("Bonus dice can Only be a number"):x>2?ui.notifications.error("Max 2 bonus dice"):x<0?ui.notifications.error("No negativ bonus dice"):this.data.bonusDice=x}get hp(){return this.data.hp||(this.data.hp=0),this.actor&&(this.data.hp=this.actor.hp),this.data.hp}set hp(x){this.data.hp=x,this.actor&&this.actor.setHp(x)}addBonusDice(){this.data.bonusDice>=2?ui.notifications.error("Already have max bonus dice"):this.data.bonusDice+=1}removeBonusDice(){this.data.bonusDice<=0?ui.notifications.error("Already have 0 bonus dice"):this.data.bonusDice-=1}resetBonusDice(){this.data.bonusDice=0}get hasBonusDice(){return this.hasOneBonusDice||this.hasTwoBonusDice}get hasOneBonusDice(){return this.bonusDice>=1}get hasTwoBonusDice(){return this.bonusDice>=2}get canAssist(){return this.assist?.length>0}get canBeCautious(){return!this.hasMaxBonusDice}get assist(){return this.data.assist||[]}get dex(){return this.data.dex||(this.hasVehicle&&this.hasDriver?this.data.dex=this.driver.characteristics.dex.value:this.hasActor&&(this.data.dex=this.actor.characteristics.dex.value)),this.data.dex&&(isNaN(Number(this.data.dex))?(this.data.hasValidDex=!1,this.data.dex=0):this.data.hasValidDex=!0),this.data.dex}get hasAGunReady(){return this.data.hasAGunReady||!1}get initiative(){let init=this.dex;return this.hasAGunReady&&(init+=50),init}get isChaser(){return!!this.data.chaser}get isPrey(){return!this.isChaser}get isValid(){return this.hasValidDex&&this.hasValidMov}get hasValidDex(){return!isNaN(Number(this.data.dex))}get hasValidMov(){return!isNaN(Number(this.data.mov))}get hasDriver(){return this.hasVehicle&&this.hasActor}get movAdjustment(){if(this.data.speedCheck?.rollDataString){const roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString);if(roll&&!roll.standby){if(roll.successLevel>=CoC7Check.successLevel.extreme)return 1;if(roll.failed)return-1}}return 0}get adjustedMov(){if(void 0!==this.mov&&!isNaN(Number(this.mov)))return Number(this.mov)+this.movAdjustment}get hasMovAdjustment(){return this.hasBonusMov||this.hasMalusMov}get hasBonusMov(){return this.data.movAdjustment>0}get hasMalusMov(){return this.data.movAdjustment<0}tooSlow(){this.data.excluded=!0}includeInChase(){this.data.excluded=!1,this.data.escaped=!1}escaped(){this.data.escaped=!0}set slowest(x){this.data.slowest=x}get slowest(){return this.data.slowest}set fastest(x){this.data.fastest=x}get fastest(){return this.data.fastest}calculateMovementActions(minMov){void 0===this.movementAction||void 0===this.adjustedMov||isNaN(minMov)?this.movementAction=0:this.movementAction=this.adjustedMov-minMov+1}set movementAction(x){this.data.movementAction=x}get movementAction(){return this.data.movementAction}set currentMovementActions(x){this.data.currentMovementActions=x}get currentMovementActions(){return this.data.currentMovementActions||0}get hasMaxMvtActions(){return this.currentMovementActions>=this.movementAction}get hasNoMvtActions(){return this.currentMovementActions<=0}addMovementActions(x=1){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}alterMovementActions(x){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}get movementActionArray(){const baseArray=Array(this.movementAction).fill("base");if(this.currentMovementActions>=0){for(let i=0;i<this.currentMovementActions;i++)baseArray[i]="base available";return baseArray}if(this.currentMovementActions<0){return Array(Math.abs(this.currentMovementActions)).fill("deficit").concat(baseArray)}}get cssClass(){const cssClasses=[];return this.isChaser?cssClasses.push("chaser"):cssClasses.push("prey"),this.data.excluded&&cssClasses.push("excluded","too_slow"),this.data.escaped&&cssClasses.push("escaped"),this.data.fastest&&cssClasses.push("fastest"),this.data.slowest&&cssClasses.push("slowest"),this.data.active&&cssClasses.push("active"),this.data.currentMovementActions<=0&&cssClasses.push("no-actions"),cssClasses.join(" ")}get speedCheck(){const check={};if(this.data.speedCheck?.name&&(check.name=this.data.speedCheck.name),this.data.speedCheck?.score&&(check.score=this.data.speedCheck.score),check.cssClasses="",this.data.speedCheck?.rollDataString&&(check.roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString),check.roll&&(check.roll.standby&&!check.roll.hasCard||(check.rolled=!0,check.inlineRoll=check.roll.inlineCheck.outerHTML,check.cssClasses+="rolled",check.roll.standby||(check.roll.successLevel>=CoC7Check.successLevel.extreme?check.modifierCss="upgrade":check.roll.failed&&(check.modifierCss="downgrade"),(check.roll.successLevel>=CoC7Check.successLevel.extreme||check.roll.failed)&&(check.hasModifier=!0))))),this.hasActor){check.options=[];for(const c of["con"]){const characteristic=this.actor.getCharacteristic(c);characteristic?.value&&check.options.push(characteristic.label)}for(const s of this.actor.driveSkills)check.options.push(s.name);for(const s of this.actor.pilotSkills)check.options.push(s.name);if(check.hasOptions=!!check.options.length,this.data.speedCheck?.id){let item=this.actor.find(this.data.speedCheck.id);if(!item){const gameItem=game.items.get(this.data.speedCheck.id);gameItem&&(item=this.actor.find(gameItem.name))}item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}else if(this.data.speedCheck?.name){const item=this.actor.find(this.data.speedCheck.name);item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}}else if(this.data.speedCheck?.id){const item=game.items.get(this.data.speedCheck.id);item&&"skill"===item.data?.type&&(check.ref=item,check.name=item.name,check.type="skill",check.isSkill=!0,check.refSet=!1,check.score=item.base)}else this.data.speedCheck?.name&&this.data.speedCheck?.score&&(check.name=this.data.speedCheck.name,check.score=this.data.speedCheck.score,check.refSet=!1);return check.canBeRolled=!0,check.rolled||check.score||(check.cssClasses+=" invalid",check.canBeRolled=!1),check.isValid=check.rolled&&!isNaN(check.score),check}}function sortByRoleAndDex(a,b){return!a&&b?1:!b&&a?-1:a||b?b.chaser&&!a.chaser?1:a.chaser&&!b.chaser?-1:a.dex-b.dex:0}class ChaseObstacleCard extends EnhancedChatCard{static get defaultOptions(){const options=mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/chat/cards/chase-obstacle.html",GMUpdate:!0});return options.classes.push("obstacle-card"),options}async getData(){const data=await super.getData();if(data.status=[],data.strings={},data.displayActorOnCard=game.settings.get("CoC7","displayActorOnCard"),data.status.push({name:game.i18n.localize("CoC7.ActionCost")+` :${this.data.totalActionCost}`}),data.card.breakableObstacle=data.data.obstacle?.barrier&&data.data.obstacle.hasHitPoints,data.card.validCheck=!1,data.data.states?.obstacleDefined&&(data.data.obstacle.hazard||data.data.obstacle.barrier&&!data.data.obstacle.hasHitPoints)&&(data.data.states.tryToNegotiate=!0,data.data.states.tryToBreak=!1,data.data.states.breakOrNegotiateDefined=!0),this.participant?.actor?(data.skill=this.participant.actor.find(data.data.obstacle.checkName),data.checkOptions=this.chase.getActorSkillsAndCharacteristics(this.data.participantUuid),data.skill?(data.validCheck=!0,data.validSkill=!0):data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)):(data.checkOptions=this.chase.allSkillsAndCharacteristics,data.dummyActor=!0,data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)),data.data.bonusDice||(data.data.bonusDice=0),data.data.bonusDice<2&&data.data.totalActionCost<data.data.movementAction&&(data.canTakeCautiousApproach=!0),data.customWeapon=!1,"0"===this.data.weaponChoice&&(data.customWeapon=!0),data.validCheck){let checkName,value;data.skill?(checkName=data.skill.value.name,value=data.skill.value.value):(checkName=data.data.obstacle.checkName,value=data.data.checkThreshold),data.strings.checkRollRequest=game.i18n.format("CoC7.AskRoll",{name:checkName,value}),0!==data.data.bonusDice&&(data.data.bonusDice>0?data.strings.checkRollRequest+=` (+${data.data.bonusDice})`:data.strings.checkRollRequest+=` (${data.data.bonusDice})`)}if(data.data.states?.obstacleDefined){if(data.strings.obstacleDefined=game.i18n.format("CoC7.FacingObstacle",{type:data.data.obstacle.barrier?game.i18n.localize("CoC7.ABarrier"):game.i18n.localize("CoC7.AHazard")}),data.data.obstacle.name&&(data.strings.obstacleDefined+=` (${data.data.obstacle.name})`),data.data.states.canAskRoll=!0,data.data.obstacle.barrier&&(data.status.push({name:game.i18n.localize("CoC7.Barrier")}),data.data.obstacle.hasHitPoints&&data.status.push({name:game.i18n.localize("CoC7.Breakable")})),data.data.obstacle.hazard&&data.status.push({name:game.i18n.localize("CoC7.Hazard")}),this.data.states.tryToNegotiate&&(data.validCheck?data.validSkill||data.status.push({name:game.i18n.localize("CoC7.NoValidSkill"),css:"warning"}):(data.status.push({name:game.i18n.localize("CoC7.NoValidCheck"),css:"error"}),data.strings.EnterValueTitle=game.i18n.format("CoC7.SkillSelectBase",{name:data.data.obstacle.checkName}),data.data.checkThreshold||(data.data.states.canAskRoll=!1))),this.data.states.tryToBreak){let damageStatus=game.i18n.localize("CoC7.BreakDown");this.data.objects?.obstacleDamageRoll?.total&&(damageStatus+=` : ${this.data.objects.obstacleDamageRoll.total}`),data.status.push({name:damageStatus}),this.data.states.obstacleDamageRolled&&(this.data.objects?.obstacleDamageRoll?.total<=0?data.strings.obstacleDamage=game.i18n.localize("CoC7.NoDamageDealt"):(data.inlineDamageRoll=createInlineRoll(this.data.objects.obstacleDamageRoll)?.outerHTML,data.strings.obstacleDamage=game.i18n.format("CoC7.DamageDealt",{value:data.inlineDamageRoll})))}if(this.data.states.tryToNegotiate&&data.status.push({name:game.i18n.localize("CoC7.Negotiate")}),this.data.totalCautiousApproach){const cautiousStatus={name:game.i18n.localize("CoC7.Cautious"),css:""};this.data.totalCautiousApproach>1?(cautiousStatus.css="strong",data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingVeryCautious")):data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingCautious"),this.data.flags.consumeBonusDice&&(cautiousStatus.css+=" consume"),data.status.push(cautiousStatus)}this.data.objects?.check&&(this.data.obstacle.hazard&&(this.data.movePlayer=!0),this.data.objects.check.passed?(void 0===this.data.movePlayer&&(this.data.movePlayer=!0),data.strings.obstaclePassed=game.i18n.localize("CoC7.ObstaclePassed"),this.data.objects.check.luckSpent&&(data.strings.obstaclePassed+=` (${game.i18n.localize("CoC7.GotLucky")})`),data.status.push({name:game.i18n.localize("CoC7.Success"),css:"success"})):this.data.objects.check.isFumble?(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFumble"),data.status.push({name:game.i18n.localize("CoC7.Fumble"),css:"fumble"})):(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFail"),data.status.push({name:game.i18n.localize("CoC7.Failure"),css:"failure"})))}if(this.data.states.playerActionDefined&&(this.data.obstacle.hazard?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToNegotiateHazard"):this.data.obstacle.barrier&&(this.data.states.tryToNegotiate?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToGetPastBarriers"):this.data.states.tryToBreak&&(data.strings.playerIntentions=game.i18n.localize("CoC7.TryToBreak")))),this.data.states.checkRolled&&(this.data.states.cardResolved?data.htmlCheck=await(this.data.objects.check.inlineCheck?.outerHTML):data.htmlCheck=await this.data.objects.check.getHtmlRoll()),this.data.states.cardResolved){data.playerDamageTaken=!1,data.obstalceDefinitionChanged=!1;this.listChanges().changes&&(data.obstalceDefinitionChanged=!0),this.data.obstacle.hasDamage&&this.data.objects?.check?.isFailure&&(data.playerDamageTaken=!0,data.inlineDamageTakenRoll=createInlineRoll(this.data.objects.failedDamageRoll)?.outerHTML,0===data.data.totalPlayerDamageTaken?data.strings.damageTaken=game.i18n.localize("CoC7.YouTakeNoDamage"):data.strings.damageTaken=game.i18n.format("CoC7.YouTakeSomeDamage",{amount:data.data.totalPlayerDamageTaken}),data.status.push({name:game.i18n.localize("CoC7.TotalDamage")+` :${data.data.totalPlayerDamageTaken}`})),this.data.obstacle.hasActionCost&&this.data.obstacle.hazard&&this.data.objects?.check?.isFailure&&(data.actionLost=!0,data.strings.actionLost=game.i18n.localize("CoC7.YouLostTime"),data.inlineActionLostRoll=createInlineRoll(this.data.objects.failedActionRoll)?.outerHTML),data.status.push({name:game.i18n.localize("CoC7.CardResolved")})}return this.data.states.closed&&(this.data.movePlayer?data.strings.finalOutcome=game.i18n.localize("CoC7.MoveToLocation"):data.strings.finalOutcome=game.i18n.localize("CoC7.DontMoveToLocation")),data}async GMUpdate(){if(game.user.isGM){if(this.data.states.cardResolved){if(this.data.objects?.failedDamageRoll?.total){const totalDamage=this.data.objects.failedDamageRoll.total,armorValue=this.data.flags.ignoreArmor?0:this.data.armor;CoC7Utilities.isFormula(armorValue)?this.data.armor=(await new Roll(armorValue).roll({async:!0})).total:isNaN(Number(armorValue))||(this.data.armor=Number(armorValue)),void 0===this.data.totalPlayerDamageTaken&&(this.data.totalPlayerDamageTaken=totalDamage-this.data.armor,this.data.totalPlayerDamageTaken<0&&(this.data.totalPlayerDamageTaken=0))}void 0===this.data.reflectObstaleChanges&&(this.data.reflectObstaleChanges=!0),void 0===this.data.movePlayer&&(this.data.movePlayer=(this.data.states.tryToNegotiate||this.data.obstacle.hazard)&&!this.data.states.failedConsequencesRolled),this.data.obstacle.barrier&&this.data.obstacle.hasHitPoints&&this.data.objects?.obstacleDamageRoll?.total&&(void 0===this.data.totalObstacleDamage&&(this.data.totalObstacleDamage=this.data.objects.obstacleDamageRoll.total),void 0===this.data.flags.obstacleDestoyed&&(this.data.flags.obstacleDestoyed=this.data.obstacle.HitPoints-this.data.totalObstacleDamage<=0))}this.data.states.closed&&(this.data.movementActionArray=duplicate(this.participant.movementActionArray),this.data.EEC_ACTION={detachData:!0})}else console.error("CoC7: GMUpdate called from non GM user")}async localCompute(){}async assignObjects(){this.data.objects?.check&&"Object"===this.data.objects.check?.constructor?.name&&(this.data.objects.check=CoC7Check.fromData(this.data.objects.check)),this.data.objects?.obstacleDamageRoll&&"Object"===this.data.objects.obstacleDamageRoll?.constructor?.name&&(this.data.objects.obstacleDamageRoll=Roll.fromData(this.data.objects.obstacleDamageRoll)),this.data.objects?.failedDamageRoll&&"Object"===this.data.objects.failedDamageRoll?.constructor?.name&&(this.data.objects.failedDamageRoll=Roll.fromData(this.data.objects.failedDamageRoll)),this.data.objects?.failedActionRoll&&"Object"===this.data.objects.failedActionRoll?.constructor?.name&&(this.data.objects.failedActionRoll=Roll.fromData(this.data.objects.failedActionRoll))}async initialize(){this.chase&&void 0!==this.chase.activeParticipantData?.uuid&&(void 0===this.data&&(this.data={}),void 0===this.data.states&&(this.data.states={}),this.data.obstacle=this.location?.obstacleDetails,this.data.participantUuid=this.chase.activeParticipantData.uuid,this.participantData?.bonusDice>0&&(this.data.bonusDice=this.participantData.bonusDice,this.data.flags.consumeBonusDice=!0,this.data.flags.hasBonusDice=this.participant.hasBonusDice),this.data.movementActionArray=duplicate(this.participant.movementActionArray),this.data.movementAction=this.participant.currentMovementActions,this.data.totalActionCost=0)}get participant(){if(this.participantData)return new _participant(this.participantData)}get participantData(){if(this.chase&&this.data.participantUuid)return this.chase.getParticipantData(this.data.participantUuid)}get location(){if(this.chase)return this.chase.getLocationData(this.data.locationUuid)}get obstacle(){if(this.location)return this.location.obstacleDetails}get chase(){if(this.data.chaseUuid)return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.data.chaseUuid)),this._chase}get roll(){let rollData;if(this.participant.actor&&this.data.obstacle.checkName){const actorSkill=this.participant.actor.find(this.data.obstacle.checkName);rollData=void 0!==actorSkill?actorSkill:{type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold}},rollData.actor={actorKey:this.participant.actor.id}}else this.data.obstacle.checkName&&this.data.checkThreshold&&(rollData={type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold},actor:{name:this.participant.name}});return rollData&&(rollData.diceModifier=this.data?.bonusDice||0,rollData.difficulty=CoC7Check.difficultyLevel.regular,rollData.denyPush=!0),rollData||void 0}get validFailedRolls(){if(!this.data.objects?.check?.isFailure)return!1;if(this.data.obstacle.hasDamage){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;if(!this.data.obstacle.failedCheckDamage)return!1;if(this.data.obstacle.failedCheckDamage&&!Roll.validate(damage))return!1}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;if(!this.data.obstacle.failedActionCost)return!1;if(this.data.obstacle.failedActionCost&&!Roll.validate(actionCost))return!1}return!0}get weaponsOptions(){const weapons=[];if(this.participant.actor?.itemTypes?.weapon?.forEach((w=>{let formula=w.data.data.range.normal.damage,db=this.participant.actor.db;db=null===db||0===Number(db)?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),w.data.data.properties.addb&&(formula+=db),w.data.data.properties.ahbd&&(formula=formula+db+"/2"),weapons.push({name:`${w.data.name} (${formula})`,damage:formula,uuid:w.uuid})})),weapons.sort(CoC7Utilities.sortByNameKey),!weapons.find((w=>w.name.toUpperCase().startsWith(game.i18n.localize("CoC7.UnarmedWeaponName")?.toUpperCase())))){let db="";this.participant.actor&&(db=this.participant.actor.db,db&&!db.startsWith("-")&&(db="+"+db),null!==db&&0!==Number(db)||(db="")),weapons.unshift({name:`${game.i18n.localize("CoC7.UnarmedWeaponName")} (1D3${db})`,damage:`1D3${db}`,uuid:"unarmed"})}return weapons.push({name:game.i18n.localize("CoC7.Other"),damage:this.data?.customWeaponDamage||null,uuid:0}),weapons}get usedWeapon(){if(!this.data?.weaponChoice){if(!this.weaponsOptions)return;this.data||(this.data={}),this.data.weaponChoice=this.weaponsOptions[0].uuid}if(this.data.weaponChoice){const weapon=this.weaponsOptions.find((e=>e.uuid===this.data.weaponChoice));if(weapon)return weapon}}get inflictedDamageFormula(){if(this.usedWeapon){const weapon=this.usedWeapon;return weapon&&weapon.damage&&Roll.validate(weapon.damage)?weapon.damage:void 0}}get validObstacleDamage(){return!!(this.data.obstacle.hasHitPoints&&!isNaN(Number(this.data.obstacle.HitPoints))&&Number(this.data.obstacle.HitPoints)>0&&this.inflictedDamageFormula)}get strings(){const strings={};return strings.damageRollRequest=this.usedWeapon.name,strings}async validateCard(options){let loactionChanged,participantChaged=!1;const obstacleUpdate={obstacleDetails:{}},participantUpdate={};this.data.flags.obstacleDestoyed&&(loactionChanged=!0,obstacleUpdate.obstacle=!1,obstacleUpdate.obstacleDetails.hazard=!1,obstacleUpdate.obstacleDetails.barrier=!1);const diff=this.listChanges();if(diff.changes&&this.data.reflectObstaleChanges)for(const[key,value]of Object.entries(diff.obstacle))"type"!==key&&(obstacleUpdate.obstacleDetails[value.key]=value.new,loactionChanged=!0);if(this.data.totalObstacleDamage>0&&this.data.obstacle.hasHitPoints){let remainingHp=this.data.obstacle.HitPoints;remainingHp-=this.data.totalObstacleDamage,remainingHp<0&&(remainingHp=0),this.obstacle.HitPoints!==remainingHp&&(obstacleUpdate.obstacleDetails.HitPoints=remainingHp,this.data.obstacle.HitPoints=remainingHp,loactionChanged=!0)}if(this.data.totalPlayerDamageTaken>0&&(participantChaged=!0,this.participant.actor?await this.participant.actor.dealDamage(this.data.totalPlayerDamageTaken,{ignoreArmor:!0}):(participantUpdate.hp=this.participantData.hp,participantUpdate.hp-=this.data.totalPlayerDamageTaken,participantUpdate.hp<0&&(participantUpdate.hp=0))),this.data.totalActionCost>0&&(participantChaged=!0,participantUpdate.currentMovementActions=this.participantData.currentMovementActions,participantUpdate.currentMovementActions-=this.data.totalActionCost),void 0===this.data.flags.consumeBonusDice&&(this.data.flags.consumeBonusDice=!0),this.data.flags.consumeBonusDice?(participantChaged=!0,participantUpdate.bonusDice=0):isNaN(this.data.bonusDice)||this.data.bonusDice===this.participant.bonusDice||(participantUpdate.bonusDice=this.data.bonusDice),this.data.movePlayer){let targetLocation;targetLocation=this.data.forward?this.location:this.chase.getLocationShift(this.location.uuid,{skip:-1}),targetLocation.uuid&&await this.chase.moveParticipantToLocation(this.participantData.uuid,targetLocation.uuid,{scrollToLocation:!0,activateLocation:!1,render:!1})}return loactionChanged&&await this.chase.updateLocation(this.location.uuid,obstacleUpdate,{render:!1}),participantChaged&&await this.chase.updateParticipant(this.participantData.uuid,participantUpdate,{render:!1}),this.data.states.closed=!0,await this.chase.activateNextParticipantTurn(),!0}async defineObstacle(options){return this.data.states||(this.data.states={}),this.data.states.obstacleDefined=!0,!0}async tryToNegotiateObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!0,this.data.states.tryToBreak=!1,!0}async tryToBreakDownObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!0,!0}async cancelObstacleDefinition(options){return this.data.states.obstacleDefined=!1,this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0}async cancelBreakOrPassChoice(options){return this.data.obstacle.hasHitPoints?(this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0):this.cancelObstacleDefinition()}async requestRoll(options){return this.data.states.playerActionDefined=!0,!0}async takeCautiousApproach(options){return this.data.totalCautiousApproach||(this.data.totalCautiousApproach=0),this.data.totalCautiousApproach+=1,this.data.bonusDice+=1,this.data.totalActionCost+=1,this.data.flags.consumeBonusDice||(this.data.flags.consumeBonusDice=!0),this.data.flags.hasBonusDice||(this.data.flags.hasBonusDice=!0),this.data.movementAction<=this.data.totalActionCost&&(this.data.flags.consumeBonusDice=!1,this.data.states.cardResolved=!0,this.data.movePlayer=!1),!0}async rollSkillCheck(options){const target=options.event.currentTarget;if(!target.classList.contains("disabled")){if(target.classList.toggle("disabled"),this.roll)return this.data.objects||(this.data.objects={}),this.data.objects.check=CoC7Check.createFromActorRollData(this.roll),!!this.data.objects.check&&(this.data.objects.check.denyPush=!0,await this.data.objects.check._perform({forceDSN:!0}),this.data.totalActionCost+=1,this.data.states.checkRolled=!0,target.classList.toggle("disabled"),this.data.objects.check.passed?(this.data.movePlayer=!0,this.data.states.cardResolved=!0):void 0===this.data.armor&&this.participant.actor&&(this.data.armor=this.participant.actor.data.data.attribs.armor.value||0),!0);ui.notifications.error(game.i18n.localize("CoC7.NothingToRoll"))}}async useLuck(options){return await CoC7Check.alter(this.data.objects.check,"useLuck",{target:options.event.currentTarget,update:!1}),this.data.objects.check.passed&&(this.data.states.cardResolved=!0,this.data.movePlayer=!0,this.data.totalActionCost+=1),!0}async rollFailConsequences(options){if(this.data.objects||(this.data.objects={}),this.data.obstacle.hasDamage&&this.data.objects.check?.isFailure){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;this.data.objects.failedDamageRoll=new Roll(damage),await this.data.objects.failedDamageRoll.evaluate({async:!0})}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost&&this.data.objects.check?.isFailure){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;this.data.objects.failedActionRoll=new Roll(actionCost),await this.data.objects.failedActionRoll.evaluate({async:!0}),this.data.totalActionCost+=this.data.objects.failedActionRoll.total-1}return this.data.states.failedConsequencesRolled=!0,this.data.states.cardResolved=!0,!0}async askRollObstacleDamage(options){return this.data.states.playerActionDefined=!0,!0}async rollObstacleDamage(options){return this.data.objects||(this.data.objects={}),this.data.objects.obstacleDamageRoll=new Roll(this.usedWeapon?.damage),await this.data.objects.obstacleDamageRoll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.data.objects.obstacleDamageRoll),this.data.states.obstacleDamageRolled=!0,this.data.totalActionCost+=1,this.data.states.cardResolved=!0,!0}listChanges(validate=!1){const diff={obstacle:{},player:{},changes:!1},names={barrier:game.i18n.localize("CoC7.Type"),hazard:game.i18n.localize("CoC7.Type"),hasHitPoints:game.i18n.localize("CoC7.Breakable"),HitPoints:game.i18n.localize("CoC7.HitPoints"),hasActionCost:game.i18n.localize("CoC7.ActionCost"),failedActionCost:game.i18n.localize("CoC7.ActionCost"),hasDamage:game.i18n.localize("CoC7.FightBack"),failedCheckDamage:game.i18n.localize("CoC7.WeaponDamage"),checkName:game.i18n.localize("CoC7.Check"),name:game.i18n.localize("CoC7.Name")};validate&&!this.data.validation&&(this.data.validation={});const newObstacle=foundry.utils.diffObject(this.obstacle,this.data.obstacle);for(const[key]of Object.entries(newObstacle))""===newObstacle[key]&&null===this.obstacle[key]||!isNaN(Number(newObstacle[key]))&&Number(newObstacle[key])===this.obstacle[key]||(diff.changes=!0,diff.obstacle[key]={old:this.obstacle[key],new:newObstacle[key],name:names[key],key},validate&&(this.data.validation[key]=!0));return diff}}class CoC7Chase extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/running-solid.svg"),super(data,context),this.context=context}get participants(){const pList=[],preys=this.system.participants.filter((p=>!p.chaser)).map((p=>new _participant(p))),chasers=this.system.participants.filter((p=>p.chaser)).map((p=>new _participant(p)));return this.system.participants.forEach((p=>{p.assist=[],p.chaser?p.assist=chasers.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name}))):p.assist=preys.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name})));const particpant=new _participant(p);pList.push(particpant)})),pList}get participantsObject(){const participants=this.participants;return participants.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),participants}get activeParticipantData(){return this.system.participants.find((p=>p.active))}get activeActor(){const p=this.activeParticipantData;if(p)return p.docUuid?CoC7Utilities.getActorFromKey(p.docUuid):void 0}get participantsByAdjustedMov(){const pList=this.actualParticipants.sort(((a,b)=>a.adjustedMov-b.adjustedMov));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get participantsByInitiative(){const pList=this.actualParticipants.sort(((a,b)=>b.initiative-a.initiative));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get preys(){return this.participants.filter((p=>!p.isChaser&&p.isValid))||[]}get chasers(){return this.participants.filter((p=>p.isChaser&&p.isValid))||[]}get allHaveValidMov(){return this.participants.every((e=>e.hasValidMov))}get allHaveSpeedRoll(){return this.participants.every((p=>p.speedCheck?.rolled))}getParticipantLocation(participantUuid){if(!this.system.locations?.list?.length)return;if(!this.started)return;const location=this.locations.find((l=>{const lp=l.participants?.find((p=>participantUuid===p.uuid));return!!lp}));return location||void 0}getParticipantData(participantUuid){const participant=this.system.participants.find((p=>participantUuid===p.uuid));if(participant)return foundry.utils.duplicate(participant)}getParticipant(participantUuid){const participantData=this.getParticipantData(participantUuid);if(participantData)return new _participant(participantData)}get nextActiveParticipant(){if(this.started)return this.participantsByInitiative.find((p=>p.data.currentMovementActions>0))}get slowestPrey(){const preys=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isPrey));if(preys.length>0)return preys[0]}get fastestChaser(){const chasers=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isChaser));if(chasers.length>0)return chasers.slice(-1).pop()}get actualParticipants(){const slowestPrey=this.slowestPrey,fastestChaser=this.fastestChaser;let pList=this.participants;return!this.system.includeLatecomers&&slowestPrey&&(pList=pList.filter((p=>p.isPrey||p.isChaser&&p.adjustedMov>=slowestPrey.adjustedMov))),!this.system.includeEscaped&&fastestChaser&&(pList=pList.filter((p=>p.isChaser||p.isPrey&&p.adjustedMov<=fastestChaser.adjustedMov))),pList}get slowestParticipant(){const pList=this.participantsByAdjustedMov;if(pList.length>0)return pList[0]}async updateParticipants(list,{render=!0}={}){const participantsData=this.cleanParticipantList(list);return await this.update({"system.participants":participantsData},{render})}async updateParticipant(particiantUuid,updateData,{render=!0}={}){const participants=foundry.utils.duplicate(this.system.participants),update=foundry.utils.duplicate(updateData),participantIndex=participants.findIndex((p=>particiantUuid===p.uuid));-1!==participantIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(participants[participantIndex],update,{overwrite:!0}),await this.updateParticipants(participants,{render}))}cleanParticipantList(list){const participantsData=list||foundry.utils.duplicate(this.system.participants);return list.forEach((p=>{let data;data="_participant"===p.constructor.name?p.data:p;const index=this.findIndex(participantsData,data.uuid);-1===index?(participantsData.push(data),ui.notifications.warn(game.i18n.localize("CoC7.ParticipantDataMissing"))):participantsData[index]=data})),participantsData}async assistParticipant(assistantUuid,beneficiaryUuid,{useMovementActions=!0,render=!0}={}){const assistant=this.getParticipant(assistantUuid),beneficiary=this.getParticipant(beneficiaryUuid),participantsData=foundry.utils.duplicate(this.system.participants),assistantIndex=participantsData.findIndex((p=>assistantUuid===p.uuid)),beneficiaryIndex=participantsData.findIndex((p=>beneficiaryUuid===p.uuid));if(assistant&&beneficiary)if(beneficiary.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorBeneficiaryAtMaxBonus",{name:beneficiary.name}));else{if(useMovementActions){if(assistant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid,actions:assistant.currentMovementActions}));assistant.alterMovementActions(-1),participantsData[assistantIndex]=foundry.utils.duplicate(assistant.data)}beneficiary.addBonusDice(),participantsData[beneficiaryIndex]=foundry.utils.duplicate(beneficiary.data),await this.update({"system.participants":participantsData},{render})}else ui.notifications.error(game.i18n.localize("CoC7.ParticipantNotFound"))}async toggleBonusDice(participantUuid,diceNumber,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.bonusDice>=diceNumber?participant.removeBonusDice():participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async cautiousApproach(participantUuid,{useMovementActions=!0,render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(participant.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorParticipantAtMaxBonus",{participantUuid}));else{if(useMovementActions){if(participant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(-1)}participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}}async alterParticipantMovementAction(participantUuid,count,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.alterMovementActions(count),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async activateNextParticipantTurn({scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const activeParticipant=this.nextActiveParticipant,options={scrollToLocation,activateLocation,render,html};return activeParticipant?this.activateParticipant(activeParticipant.uuid,options):this.activateParticipant(void 0,options)}async activateParticipant(participantUuid,{scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const dataUpdate=this.getActivateParticipantUpdateData(participantUuid,{scrollToLocation,activeLocation:activateLocation,html});await this.update(dataUpdate,{render})}getActivateParticipantUpdateData(participantUuid,{scrollToLocation=!0,activateLocation=!0,html=null}={}){const pUuid=participantUuid,participantsDataUpdate={},participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{delete p.active,pUuid&&pUuid===p.uuid&&(p.active=!0)})),participantsDataUpdate["system.participants"]=participants;const participantLocation=this.getParticipantLocation(pUuid);let locationsDataUpdate=null;return participantLocation?activateLocation?locationsDataUpdate=this.getActivateLocationUpdateData(participantLocation.uuid,{scrollToLocation,html}):scrollToLocation&&(locationsDataUpdate={},locationsDataUpdate["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,locationsDataUpdate["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(participantLocation.uuid,{html})):locationsDataUpdate=this.getActivateLocationUpdateData(void 0,{scrollToLocation}),locationsDataUpdate?foundry.utils.mergeObject(participantsDataUpdate,locationsDataUpdate):participantsDataUpdate}activeParticipantObstacleCheck(locationUuid,{moveParticipant=!0}={}){new ChaseObstacleCard({chaseUuid:this.uuid,locationUuid,moveParticipant,forward:locationUuid!==this.activeLocation.uuid}).toMessage()}async progressToNextRound({render=!0}={}){const participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{p.currentMovementActions<p.movementAction&&(p.currentMovementActions+=p.movementAction,p.currentMovementActions>p.movementAction&&(p.currentMovementActions=p.movementAction))})),await this.updateParticipants(participants,{render:!1}),this.activateNextParticipantTurn({render})}async updateRoll(rollString){if(game.user.isGM){const roll=CoC7Check.fromRollString(rollString),participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[],index=participants.findIndex((p=>p.rollUuid===roll.uuid));index>=0&&(participants[index].speedCheck.rollDataString=roll.JSONRollString,await this.update({"system.participants":participants}))}else{const data={data:rollString,type:"invoke",method:"updateRoll",item:this.uuid};game.socket.emit("system.CoC7",data)}}get locations(){const locations=this.started?this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[]:this.initTrack;return this.processLocations(locations),locations}getLocationData(locationUuid,{duplicateData=!0}={}){return(duplicateData?foundry.utils.duplicate(this.locations):this.locations).find((l=>locationUuid===l.uuid))}processLocations(locations){if(locations?.length){locations[0].first=!0;for(let index=0;index<locations.length;index++){const classes=[],location=locations[index];location.name||classes.push("empty"),location.active&&classes.push("active"),location.init&&!this.started&&classes.push("init"),location.cssClasses=classes.join(" ")}locations.length>1&&(locations[locations.length-1].last=!0),locations.forEach((l=>{if(l.participants&&l.participants.length){l.participants=l.participants.filter((p=>!(null===p)));for(let i=0;i<l.participants.length;i++){const elem=l.participants[i];let p;"string"==typeof elem||elem instanceof String?p=this.system.participants.find((p=>elem===p.uuid)):"_participant"===elem?.constructor?.name?(p=void 0,ui.notifications.warn(game.i18n.localize("CoC7.ParticipantAlreadyProcessed"))):p=void 0,void 0!==p?l.participants[i]=new _participant(p):console.error("Undefined paticipant while processing participants array")}l.participants.sort(sortByRoleAndDex)}}))}}get initTrack(){if(!this.system.locations.list||0===this.system.locations.list.length)return;const locations=[],init=this.startingLine;let locationsIndexStart,initIndexStart,locationsLength;if(locationsIndexStart=init.length<=0||this.system.startingIndex>=init.length?0:init.length-this.system.startingIndex,initIndexStart=this.system.startingIndex<=0||this.system.startingIndex<=init.length?0:this.system.startingIndex-init.length,locationsLength=0===locationsIndexStart?this.system.locations.list.length:this.system.locations.list.length+locationsIndexStart,0!==init.length&&this.system.startingIndex<0)for(let index=0;index<Math.abs(this.system.startingIndex);index++)init.push({uuid:this.generateNewUuid(),init:!0,participants:[]});const chaseLocations=foundry.utils.duplicate(this.system.locations);for(let index=0;index<locationsLength;index++){let location={};const participants=[];index>=locationsIndexStart&&index-locationsIndexStart<chaseLocations.list.length&&(location=foundry.utils.duplicate(chaseLocations.list[index-locationsIndexStart]),location.init=!1,location.participants?.forEach((p=>{null!=p&&participants.push(p)}))),index>=initIndexStart&&index-initIndexStart<init.length&&(mergeObject(location,init[index-initIndexStart],{overwrite:!1}),init[index-initIndexStart].participants?.forEach((p=>{null!=p&&participants.push(p)})),location.participants=participants),location.first=!1,location.end=!1,locations.push(location)}return locations}get startingLine(){const preys=this.system.includeEscaped?this.preys:this.preys?.filter((p=>!p.data.escaped)),chasers=this.system.includeLatecomers?this.chasers:this.chasers?.filter((c=>!c.data.excluded)),chaseTrack=[],chasersMinMov=this.findMinMov(chasers),chasersMaxMov=this.findMaxMov(chasers),preysMinMov=this.findMinMov(preys),preysMaxMov=this.findMaxMov(preys);if(-1!==chasersMinMov&&-1!==chasersMaxMov){for(let mov=chasersMinMov;mov<=chasersMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};chasers.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}for(let index=0;index<this.system.startingRange;index++)chaseTrack.push({uuid:this.generateNewUuid(),init:!0,participants:[]})}if(-1!==preysMinMov&&-1!==preysMaxMov)for(let mov=preysMinMov;mov<=preysMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};preys.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}return chaseTrack}async updateLocationsList(list,{render=!0}={}){const updatedList=this.cleanLocationsList(list);await this.update({"system.locations.list":updatedList},{render})}async updateLocation(locationUuid,updateData,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),update=foundry.utils.duplicate(updateData),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));-1!==locationIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(locations[locationIndex],update,{overwrite:!0}),await this.updateLocationsList(locations,{render}))}cleanLocationsList(list){const updatedList=foundry.utils.duplicate(list),partipantsUuidArray=this.system.participants.map((p=>p.uuid));return updatedList.forEach((l=>{if(delete l.cssClasses,delete l.first,delete l.last,delete l.end,l.participants&&l.participants.length){for(let i=0;i<l.participants.length;i++)l.participants=l.participants.filter((p=>!(null===p))),l.participants[i].data?.uuid&&(l.participants[i]=l.participants[i].data.uuid);l.participants=l.participants.filter((uuid=>partipantsUuidArray.includes(uuid)))}})),updatedList}async insertLocation(insertAtUuid,{shift=0,locData={},render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list);locations.forEach((l=>{delete l.active}));const locationIndex=locations.findIndex((l=>insertAtUuid===l.uuid));if(-1===locationIndex)return!1;const newLocationIndex=locationIndex+shift;if(newLocationIndex>locations.length)return!1;const newLocation=foundry.utils.duplicate(locData);return newLocation.uuid=this.generateNewUuid(),newLocation.init=locations[locationIndex].init,newLocation.active=!0,locations.splice(newLocationIndex,0,newLocation),await this.updateLocationsList(locations,{render})}async removeLocation(uuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>uuid===l.uuid));if(locations.splice(locationIndex,1),locations.forEach((l=>{delete l.active})),locations.length>0){let index=locationIndex-1;index<0&&(index=0),locations[index].active=!0}return await this.updateLocationsList(locations,{render})}async activateLocation(locationUuid,{scrollToLocation=!0,render=!0}={}){const updateData=this.getActivateLocationUpdateData(locationUuid,{scrollToLocation});await this.update(updateData,{render})}getClearActiveLocationUpdateData({scrollToLocation=!0,html=null}={}){const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=0,updateData["system.scroll.chaseTrack.to"]=-1),updateData}getActivateLocationUpdateData(locationUuid,{scrollToLocation=!0,html=null}={}){if(!locationUuid)return this.getClearActiveLocationUpdateData({scrollToLocation});const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active,locationUuid===l.uuid&&(l.active=!0)})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,updateData["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(locationUuid,{html})),updateData}get activeLocation(){if(!this.locations)return;const location=this.locations.find((l=>l.active));if(!location)return;location.participants?.length&&(location.hasParticipant=!0);const actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get previousLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(0===activeIndex)return;const location=this.locations[activeIndex-1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get nextLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(activeIndex===this.locations.length-1)return;const location=this.locations[activeIndex+1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}async locatorDropped(data){await this.setLocationCoordinates(data.locationUuid,data.x,data.y,data.scene)}async setLocationCoordinates(locationUuid,x,y,sceneId,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return locations[locationIndex].coordinates={x,y,scene:sceneId},await this.updateLocationsList(locations,{render})}async clearActiveLocationCoordinates({render=!0}={}){if(this.activeLocation)return await this.clearLocationCoordinates(this.activeLocation.uuid,{render})}async clearLocationCoordinates(locationUuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return delete locations[locationIndex].coordinates,await this.updateLocationsList(locations,{render})}async cutToTheChase(){if(this.allHaveSpeedRoll){if(this.actualParticipants?.length<2)ui.notifications.warn(game.i18n.localize("CoC7.NeedMin2Participants"));else if(this.allHaveValidMov){const participants=this.participants,minMov=this.findMinMov(this.actualParticipants);participants.forEach((p=>{p.calculateMovementActions(minMov),p.currentMovementActions=p.movementAction,p.bonusDice=0})),await this.updateParticipants(participants,{render:!1}),await this.updateLocationsList(this.locations,{render:!1}),await this.start()}}else ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"))}async restart(){const locations=this.locations.filter((l=>!l.init));for(let i=0;i<locations.length;i++)locations[i].participants&&(locations[i].participants=[]),locations[i].active&&delete locations[i].active;const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];for(let i=0;i<participantsData.length;i++)participantsData[i].active&&delete participantsData[i].active;await this.setchaseTrackScroll(0,0,{render:!1}),await this.updateLocationsList(locations,{render:!1}),await this.updateParticipants(participantsData,{render:!1}),await this.stop()}getLocationShift(locationUuid,{skip=1}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destinationIndex=locations.findIndex((l=>locationUuid===l.uuid))+skip;return 0===locations.length?null:destinationIndex>=locations.length?locations[locations.length-1]:destinationIndex<0?locations[0]:locations[destinationIndex]}async removeParticipant(participantUuid,{render=!0}={}){const p=this.getParticipant(participantUuid);await Dialog.confirm({title:game.i18n.localize("CoC7.RemoveParticipant"),content:`<p>${game.i18n.format("CoC7.RemoveParticipantHint",{name:p.name})}</p>`,yes:async()=>{const newParticipantsData=foundry.utils.duplicate(this.system.participants).filter((p=>participantUuid!==p.uuid)),locationsData=foundry.utils.duplicate(this.system.locations.list);locationsData.forEach((l=>{l.participants&&l.participants.length&&(l.participants=l.participants.filter((uuid=>participantUuid!==uuid)))})),await this.updateParticipants(newParticipantsData,{render:!1}),await this.updateLocationsList(locationsData,{render})}})}async addParticipant(participant,{render=!0,locationUuid=null,recalculateMovementActions=!0,update=!1}={}){const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];if(participant.data.chaseUuid&&delete participant.data.chaseUuid,participant.data.locationUuid&&delete participant.data.locationUuid,participant.data.update&&delete participant.data.update,!participant.uuid){let unique=!1;for(;!unique;)participant.data.uuid=foundry.utils.randomID(16),unique=0===participantsData.filter((p=>p.uuid===participant.uuid)).length}if(update){participant.currentMovementActions>participant.movementAction&&(participant.currentMovementActions=participant.movementAction);const index=participantsData.findIndex((p=>p.uuid===participant.uuid));participantsData[index]=participant.data}else participantsData.push(participant.data);if(await this.updateParticipants(participantsData,{render:render&&!this.started&&!this.recalculateMovementActions}),recalculateMovementActions){const slowest=this.slowestParticipant?.adjustedMov,participants=this.participants;participants.forEach((p=>p.calculateMovementActions(slowest))),await this.updateParticipants(participants,{render:render&&!this.started})}if(this.started&&!participant.data.escaped&&!participant.data.excluded){const locationsData=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];0===locationsData.length&&ui.notifications.error(game.i18n.localize("CoC7.ErrorEmptyLocationsList"));let locationIndex=locationsData.findIndex((l=>locationUuid===l.uuid));-1===locationIndex&&(locationIndex=0),locationsData[locationIndex].participants||(locationsData[locationIndex].participants=[]),-1===locationsData[locationIndex].participants.findIndex((p=>p===participant.uuid))&&locationsData[locationIndex].participants.push(participant.uuid),await this.updateLocationsList(locationsData,{render})}}async editParticipant(participantUuid,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){}async moveParticipant(participantUuid,locationMoved,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){let modified=!1;const locations=foundry.utils.duplicate(this.system.locations.list),originIndex=locations.findIndex((l=>l.participants?.includes(participantUuid)));let destinationIndex=originIndex+locationMoved;destinationIndex>locations.length-1&&(destinationIndex=locations.length-1),destinationIndex<0&&(destinationIndex=0);const totalMove=destinationIndex-originIndex,participant=this.getParticipant(participantUuid),participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(useMovementActions){if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid:this.participantUuid}));if(participant.currentMovementActions<Math.abs(totalMove))return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(0-Math.abs(totalMove)),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render:!1}),modified=!0}return 0!==totalMove&&(await this.moveParticipantToLocation(participantUuid,locations[destinationIndex].uuid,{render:!1}),modified=!0),activateParticipant&&(await this.activateParticipant(participantUuid,{scrollToLocation,activateLocation,render:!1}),modified=!0),activateLocation&&!activateParticipant&&(await this.activateLocation(locations[destinationIndex].uuid,{scrollToLocation,render:!1}),modified=!0),modified&&render&&await this.sheet.render(!0),totalMove}async moveParticipantToLocation(participantUuid,locationUuid,{scrollToLocation=!0,activateLocation=!0,animate=null,moveToken=!0,render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destination=locations.find((l=>locationUuid===l.uuid));if(!destination)return void console.error(`Failed to move ${participantUuid}. Location ${locationUuid} unknown`);const origin=locations.find((l=>l.participants?.includes(participantUuid)));if(!origin)return void console.error(`Failed to find ${participantUuid} in locations`);if(destination.participants||(destination.participants=[]),destination.participants.includes(participantUuid))return;destination.participants.push(participantUuid);const oldParticipantsList=origin.participants.filter((p=>participantUuid!==p));if(origin.participants=oldParticipantsList,moveToken&&destination.coordinates){const participant=this.getParticipant(participantUuid);let particpantDocument=CoC7Utilities.getDocumentFromKey(participant?.data?.docUuid);if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token)){const foundTokens=canvas.scene.tokens.filter((d=>d.actorLink&&d.actor?.id===particpantDocument.id));1===foundTokens.length&&(particpantDocument=foundTokens[0])}if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token))console.warn("No token associated with this actor");else if(destination.coordinates.scene!==game.scenes.viewed.uuid&&console.warn("Caution the scene is not the active scene"),particpantDocument.parent?.uuid!==destination.coordinates.scene)ui.notifications.error(game.i18n.localize("CoC7.ErrorTokenNotOnScene"));else{const scene=CoC7Utilities.getDocumentFromKey(destination.coordinates.scene);let x=destination.coordinates.x;const y=destination.coordinates.y;let targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize();const update=[];let foundFreeSpace=!1;for(;!foundFreeSpace;){const overlapingToken=scene.tokens.find((t=>t.id!==particpantDocument.id&&t.object.bounds.intersects(targetRect)));overlapingToken?(x=overlapingToken.object.bounds.right+1,targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize()):foundFreeSpace=!0}update.push({_id:particpantDocument.id,x,y});const showTokenMovement="boolean"==typeof animate?animate:this.system.showTokenMovement;await particpantDocument.parent.updateEmbeddedDocuments("Token",update,{animate:showTokenMovement})}}await this.updateLocationsList(locations,{render})}async setchaseTrackScroll({from,to=-1,render=!0}={}){await this.update({"system.scroll.chaseTrack.from":void 0===from?this.chaseTrackCurrentScrollPosition:from,"system.scroll.chaseTrack.to":void 0===to?this.chaseTrackCurrentScrollPosition:to},{render})}get chaseTrackCurrentScrollPosition(){const html=this.sheet?._element;if(!html)return-1;const chaseTrack=html[0].querySelector(".chase-track");return chaseTrack?chaseTrack.scrollLeft:-1}get chaseTrackActiveLocationScrollPosition(){return this.activeLocation?this.getChaseTrackLocationScrollPosition(this.activeLocation.uuid):-1}getChaseTrackLocationScrollPosition(locationUuid,{html=null}){const htmlElement=html||this.sheet?._element;if(!htmlElement||!htmlElement[0])return-1;const chaseTrack=htmlElement[0].querySelector(".chase-track");if(!chaseTrack)return-1;const activeLocationElement=chaseTrack.querySelector(`.chase-location[data-uuid="${locationUuid}"]`);if(!activeLocationElement)return-1;const leftScroll=activeLocationElement.offsetLeft+activeLocationElement.clientWidth/2-chaseTrack.clientWidth/2;return leftScroll<0?0:Math.floor(leftScroll)}findMinMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1}findMaxMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}get started(){return this.getFlag("CoC7","started")}async start(){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px","")),pCount=this.actualParticipants.length,width=Math.max((11.2*pCount+3)*remSize,40*remSize);this.sheet._tabs[0].active="setup",this.sheet.position.width=width,await this.setFlag("CoC7","started",!0),await this.activateNextParticipantTurn()}async stop(){return this.unsetFlag("CoC7","started")}generateNewUuid(){return foundry.utils.randomID(16)}getActorSkillsAndCharacteristics(participantUuid){const participant=this.getParticipant(participantUuid);if(!participant.actor)return;const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),participant.actor.skills.forEach((s=>list.push(s.name))),list}get activeActorSkillsAndCharacteristics(){const particicpantData=this.activeParticipantData;if(particicpantData)return this.getActorSkillsAndCharacteristics(particicpantData.uuid)}get allSkillsAndCharacteristics(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}get allSkillsAndCharacteristicsShort(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${c.label}`))),list.push(`${game.i18n.localize("CoC7.Luck")}`),list.push(`${game.i18n.localize("CoC7.SAN")}`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}}class CoC7Skill extends CoC7Item{constructor(data,context){if(void 0===data.system?.skillName){const skill=CoC7Skill.guessNameParts(data.name),{name,skillName,specialization,...newProperties}=skill;data.name=name,data.system||={};const properties={...data.system.properties,...newProperties};data.system={...data.system,skillName,specialization,properties}}super(data,context)}static guessNameParts(skillName){const output={combat:!1,fighting:!1,firearm:!1,name:skillName,skillName,special:!1,specialization:""},match=skillName.match(/^(.+)\s*\(([^)]+)\)$/);if(match){output.skillName=match[2].trim(),output.special=!0;const specialization=match[1].trim();output.specialization=specialization,output.name=specialization+" ("+output.skillName+")",output.fighting=specialization===game.i18n.localize("CoC7.FightingSpecializationName"),output.firearm=specialization===game.i18n.localize("CoC7.FirearmSpecializationName"),output.combat=output.fighting||output.firearm}return output}get hasActiveEffects(){return this.activeEffects.length>0}get activeEffects(){if(this.parent&&this.parent.effects){const effectKeyFull=`skill.${this.name}`.toLowerCase(),effectKeyShort=`skill.${this.system.skillName}`.toLowerCase();let changes=this.parent.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.data.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);return changes.sort(((a,b)=>a.priority-b.priority)),changes=changes.filter((e=>e.key.toLowerCase()===effectKeyShort||e.key.toLowerCase()===effectKeyFull)),changes}return[]}get itemIdentifier(){return this.name}get rawValue(){let value=0;return"character"===this.actor.type?(value=this.base,value+=this.system.adjustments?.personal?parseInt(this.system.adjustments?.personal):0,value+=this.system.adjustments?.occupation?parseInt(this.system.adjustments?.occupation):0,value+=this.system.adjustments?.experience?parseInt(this.system.adjustments?.experience):0,game.settings.get("CoC7","pulpRuleArchetype")&&this.system.adjustments?.archetype&&(value+=parseInt(this.system.adjustments?.archetype))):value=parseInt(this.system.value),isNaN(value)?null:value}get value(){const value=this.parent?.system.skills?.[`${this.itemIdentifier}`]?.value;return value||this.rawValue}async updateValue(value){if("character"===this.actor.type){const delta=parseInt(value)-this.rawValue,exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+delta;await this.update({"system.adjustments.experience":exp>0?exp:0})}else await this.update({"system.value":value})}async increaseExperience(x){if("skill"!==this.type)return null;if("character"===this.actor.type){const exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+parseInt(x);await this.update({"system.adjustments.experience":exp>0?exp:0})}}}class CoC7Vehicle extends CoCActor{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/jeep.svg"),super(data,context)}get rawBuild(){return this.build}get build(){const build=parseInt(this.system.attribs.build.value);return isNaN(build)?null:build}get hp(){if(null===this.system.attribs.build.current||void 0===this.system.attribs.build.current||""===this.system.attribs.build.current)return this.build;if(this.system.attribs.build.current>this.system.attribs.build.value)return this.build;const hp=parseInt(this.system.attribs.build.current);return isNaN(hp)?null:hp}get hpMax(){return this.build}get rawHpMax(){return this.build}async setHp(value){return value>this.build&&(value=this.build),await this.update({"system.attribs.build.current":value})}get rawDb(){return this.db}get db(){const db=parseInt(this.system.attribs.db?.value);return isNaN(db)?null:db}get rawMov(){return this.mov}get mov(){const mov=parseInt(this.system.attribs.mov?.value);return isNaN(mov)?null:mov}get mpMax(){return parseInt(this.system.attribs?.mp?.max)||0}get rawMpMax(){return this.mpMax}get sanMax(){return null}get rawSanMax(){return null}}class CoC7DecaderDie extends DiceTerm{constructor(termData){super(termData),this.faces=10}get total(){const total=super.total;return 10===total?0:10*total}static get DENOMINATION(){return"t"}}class CoC7DecaderDieOther extends CoC7DecaderDie{static get DENOMINATION(){return"o"}}const SETTINGS={pulpRules:{name:"",hint:"",scope:"world",config:!1,default:!1,type:Boolean},initiativeRule:{name:"SETTINGS.InitiativeRule",hint:"SETTINGS.InitiativeRuleHint",scope:"world",config:!1,default:"basic",type:String,choices:{basic:"SETTINGS.InitiativeRuleBasic",optional:"SETTINGS.InitiativeRuleOptional"},onChange:rule=>_setInitiativeOptions(rule)},developmentRollForLuck:{name:"SETTINGS.developmentRollForLuck",hint:"SETTINGS.developmentRollForLuckHint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDoubleMaxHealth:{name:"CoC7.Settings.PulpRules.DoubleMaxHealth.Name",hint:"CoC7.Settings.PulpRules.DoubleMaxHealth.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDevelopmentRollLuck:{name:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Name",hint:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleArchetype:{name:"CoC7.Settings.PulpRules.Archetype.Name",hint:"CoC7.Settings.PulpRules.Archetype.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleOrganization:{name:"CoC7.Settings.PulpRules.Organization.Name",hint:"CoC7.Settings.PulpRules.Organization.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleTalents:{name:"CoC7.Settings.PulpRules.Talents.Name",hint:"CoC7.Settings.PulpRules.Talents.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleFasterRecovery:{name:"CoC7.Settings.PulpRules.FasterRecovery.Name",hint:"CoC7.Settings.PulpRules.FasterRecovery.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreMajorWounds:{name:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Name",hint:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreAgePenalties:{name:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Name",hint:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Hint",scope:"world",config:!1,default:!1,type:Boolean},opposedRollTieBreaker:{name:"SETTINGS.OpposedRollTieBreaker",hint:"SETTINGS.OpposedRollTieBreakerHint",scope:"world",config:!1,default:!1,type:Boolean}};function _setInitiativeOptions(rule){let decimals=0;switch(rule){case"optional":decimals=2;break;case"basic":decimals=0}CONFIG.Combat.initiative={formula:null,decimals}}class CoC7GameRuleSettings extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{title:"SETTINGS.TitleRules",id:"rules-settings",template:"systems/CoC7/templates/system/rule-settings.html",width:550,height:"auto",closeOnSubmit:!0})}getData(){const options={},pulpRules={true:!1,false:!1};for(const[k,v]of Object.entries(SETTINGS))options[k]={value:game.settings.get("CoC7",k),setting:v},k.match(/^pulpRule.{2,}$/)&&(pulpRules[options[k].value]=!0);return options.pulpSelection=pulpRules.true?pulpRules.false?"some":"all":"none",options}static registerSettings(){for(const[k,v]of Object.entries(SETTINGS))game.settings.register("CoC7",k,v);_setInitiativeOptions(game.settings.get("CoC7","initiativeRule"))}activateListeners(html){super.activateListeners(html),html.find("#pulpRulesSelect").on("change",(event=>this.onChangePulpSelect(event))),html.find("input.pulpRulesSelect[type=checkbox]").on("click",(event=>this.onClickPulp(event))),html.find("button[name=reset]").on("click",(event=>this.onResetDefaults(event)))}onChangePulpSelect(event){const val=$(event.currentTarget).val();"none"!==val&&"all"!==val||$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){const checkbox=$(this);"none"===val?checkbox.prop("checked",!1):checkbox.prop("checked",!0)}))}onClickPulp(event){const pulpRules={true:!1,false:!1};$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){$(this).prop("checked")?pulpRules.true=!0:pulpRules.false=!0})),$("#pulpRulesSelect").val(pulpRules.true?pulpRules.false?"some":"all":"none")}async onResetDefaults(event){event.preventDefault();for await(const[k,v]of Object.entries(SETTINGS))await game.settings.set("CoC7",k,v?.default);return this.render()}async _updateObject(event,data){const pulpRules={true:!1,false:!1};for await(const key of Object.keys(SETTINGS))game.settings.set("CoC7",key,data[key]),key.match(/^pulpRule.{2,}$/)&&(pulpRules[data[key]]=!0);game.settings.set("CoC7","pulpRules",pulpRules.true&&!pulpRules.false)}}class CoC7ArchetypeSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))))}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&[type].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=item.system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/archetype.html",width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const coreCharacteristics=[];for(const[key,selected]of Object.entries(sheetData.data.system.coreCharacteristics))if(selected){const characName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);coreCharacteristics.push(characName)}sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedSuggestedOccupations=TextEditor.enrichHTML(sheetData.data.system.suggestedOccupations,{async:!1,secrets:sheetData.editable}),sheetData.enrichedSuggestedTraits=TextEditor.enrichHTML(sheetData.data.system.suggestedTraits,{async:!1,secrets:sheetData.editable}),sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey),sheetData.coreCharacteristicsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return coreCharacteristics.length&&(sheetData.coreCharacteristicsString+=coreCharacteristics.join(orString)),sheetData.itemProperties=[],sheetData.itemProperties.push(`${game.i18n.localize("CoC7.PulpTalents")}: ${sheetData.data.system.talents}`),sheetData.itemProperties.push(`${game.i18n.localize("CoC7.BonusPoints")}: ${sheetData.data.system.bonusPoints}`),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7BookSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/book/main.html",classes:["coc7","item","book"],width:500,height:"auto",resizable:!1,dragDrop:[{dragSelector:".spells",dropSelector:null}],scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.initialReading=this.item.system.initialReading,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.spellsLearned=this.spellsLearned,sheetData.exhausted=!1!==await this.item.checkExhaustion(),sheetData.studyCompleted=this.item.system.study.progress===this.item.system.study.necessary,sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.spellListEmpty=0===this.item.system.spells.length,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedContent=TextEditor.enrichHTML(sheetData.data.system.content,{async:!1,secrets:sheetData.editable}),sheetData}get spellsLearned(){let amount=0;const spells=this.item.system.spells;for(const spell of spells)spell.system.learned&&amount++;return`${amount} / ${spells.length}`}activateListeners(html){super.activateListeners(html),html.find("#attempt-initial-reading").click((event=>{event.preventDefault(),this.item.attemptInitialReading()})),html.find(".delete-spell").click((event=>this._onDelete(event))),html.find(".edit-spell").click((event=>this._onSpellDetail(event))),html.find(".spell-name").click((event=>this._onSpellDetail(event))),html.find(".teach-spell").click((event=>{const id=$(event.currentTarget).parents("li").data("id");this.item.attemptSpellLearning(id)})),html.find('[name="system.study.necessary"]').change((event=>{const value=parseInt(event.currentTarget.value);this.item.changeProgress("reset",value)})),html.find("#increase-progress").click((()=>{this.item.changeProgress("increase")})),html.find("#decrease-progress").click((()=>{this.item.changeProgress("decrease")})),html.find(".add-other-gains").click((event=>{this.modifyOthersGains(event,"add")})),html.find(".change-other-gains").change((event=>{this.modifyOthersGains(event,"change")})),html.find("#redo-full-study").click((()=>{this.item.redoFullStudy()})),html.find(".remove-other-gains").click((event=>{this.modifyOthersGains(event,"remove")})),html.find(".option").click((event=>this.modifyType(event)))}async _onSpellDetail(event){event.preventDefault();const index=$(event.currentTarget).parents("li").data("index");return await this.item.spellDetail(index)}async _onDelete(event){if(!game.user.isGM)return;event.preventDefault();const index=$(event.currentTarget).parents("li").data("index"),spells=this.item.system.spells?duplicate(this.item.system.spells):[];return index>=0&&spells.splice(index,1),await this.item.update({"system.spells":spells})}async _onDrop(event,type="spell"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),spells=[];for(const item of dataList)item&&["skill","spell"].includes(item.type)&&("spell"===item.type?spells.push(item):"skill"===item.type&&this.item.system.type.other&&this.modifyOthersGains(null,"add",{name:item.name}));await this.item.addSpells(spells)}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}async modifyOthersGains(event,mode,options={}){let index=null,element=null;event&&(event.preventDefault(),element=$(event.currentTarget),index=element.parents("tr").data("index"));const skills=this.item.system.gains.others?duplicate(this.item.system.gains.others):[];switch(mode){case"add":skills.push({name:options.name||game.i18n.localize("CoC7.NewSkillName"),value:"development"});break;case"change":skills[index]={name:element.is("input")?element.val():skills[index].name,value:element.is("select")?element.val():skills[index].value};break;case"remove":index>=0&&skills.splice(index,1)}return await this.item.update({"system.gains.others":skills})}}class CoC7ContainerSheet extends ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","storage"],template:"systems/CoC7/templates/actors/storage-sheet.html",width:672,height:765,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"items"}]})}async _onDrop(event){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if(!this.options.editable)return;const items=this.actor.items.toObject()||[];for(const item of dataList)item&&item.system&&["book","item","spell","weapon"].includes(item.type)&&items.push(item.toObject());await this.actor.update({items})}onCloseSheet(){}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.isKeeper=game.user.isGM,sheetData.editable=this.isEditable,sheetData.itemsByType={},sheetData.items){for(const item of sheetData.items)Object.prototype.hasOwnProperty.call(sheetData.itemsByType,item.type)||(sheetData.itemsByType[item.type]=[]),sheetData.itemsByType[item.type].push(item);for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey)}return sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryWeapons=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"weapon")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryWeapons,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".item-edit").click((ev=>{const li=$(ev.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)})),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".show-detail").click(this._onItemSummary.bind(this)),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".lock").click(this._onLockClicked.bind(this))}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(message.actorTo=value)}}),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Link.bindEventsHandler(div),div.slideDown(200)}li.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").slideToggle(200)}}class CoC7ChaseParticipantImporter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:game.i18n.localize("CoC7.AddActorToChase"),template:"systems/CoC7/templates/apps/chase-participant-importer.html",classes:["coc7","dialog","chase-participant-importer"],editable:!0,resizable:!1,submitOnChange:!0,closeOnSubmit:!1,width:300,height:"auto"})}activateListeners(html){super.activateListeners(html);new DragDrop({dropSelector:".form-container",permissions:{drop:game.user.isGM},callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);new DragDrop({dragSelector:".chase-token",permissions:{dragstart:game.user.isGM},callbacks:{dragstart:this._onTokenSelectorDragStart.bind(this)}}).bind(html[0]),html.find(".reset-participant").click((async()=>{this.object={},this._actor=null,await this.render(!0)})),html.find(".food-chain").click((async()=>{this.object.chaser=!this.object.chaser,await this.render(!0)})),html.find("[data-action]").click(this._onAction.bind(this))}async _onTokenSelectorDragStart(event){const data={type:"getToken",appId:this.appId,callBack:"addTokenToChase"};event.dataTransfer.setData("text/plain",JSON.stringify(data))}async getData(){if(!this.object.initiative){const init=CoCActor.getCharacteristicDefinition().find((c=>"dex"===c.key));this.object.initiative=init.label}if(!this.object.speedCheck){const speedCheck=CoCActor.getCharacteristicDefinition().find((c=>"con"===c.key));this.object.speedCheck={name:speedCheck.label}}this.validateParticipant();const data=await super.getData();if(data.participant=new _participant(this.object),data.object.speedCheck.name&&this.actor){const speedCheck=this.actor.find(data.object.speedCheck.name);speedCheck?(data.object.speedCheck.score=speedCheck.value.value,data.speedCheckReadOnly=!0):data.participant.speedCheck.score&&!this.object.speedCheck?.score&&(data.object.speedCheck.score=data.participant.speedCheck.score)}if(data.object.initiative&&this.actor){const initiative=this.actor.find(data.object.initiative);initiative?(data.object.dex=initiative.value.value,data.initReadOnly=!0):data.object.dex=data.participant.initiative}return data.actor=this.actor,data.chase=this.chase,data.data=this.data,data.optionsList={},this.chase&&(data.skillsAndCharacteristicsList=this.chase.allSkillsAndCharacteristicsShort),this.actor&&(data.skillsAndCharacteristicsList=[],CoCActor.getCharacteristicDefinition().forEach((c=>data.skillsAndCharacteristicsList.push(`${c.label}`))),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.Luck")}`),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.SAN")}`),this.actor.skills.forEach((s=>data.skillsAndCharacteristicsList.push(s.name)))),data}get chase(){return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.object.chaseUuid)),this._chase}get actor(){return this.object.docUuid?(this._actor||(this._actor=CoC7Utilities.getActorFromKey(this.object.docUuid)),this._actor):null}async _updateObject(event,formData){foundry.utils.mergeObject(this,formData),await this.render(!0)}async _onDropParticipant(event){const dropString=event.dataTransfer.getData("text/plain"),dropData=JSON.parse(dropString),docUuid=CoC7Utilities.getActorDocumentFromDropData(dropData);this.object.docUuid=docUuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)}async addTokenToChase(tokens){1===tokens.length?(this.object.docUuid=tokens[0].document?.uuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)):ui.notifications.warn(game.i18n.localize("CoC7.ErrorTokenIncorrect"))}async _onAction(event){event.preventDefault();switch(event.currentTarget.dataset.action){case"chase-cancel":this.close();break;case"chase-add":{const participant=new _participant(this.object);if(this.chase.started){if(!(participant.movementAction&&participant.movementAction>0))return void ui.notifications.warn(game.i18n.localize("CoC7.DoesNotMeetMinimumReqToBeAdded"));if(this.data.overrideMovementAction){const slowest=this.chase.slowestParticipant;isNaN(participant.adjustedMov)&&(participant.mov=slowest.adjustedMov),this.data.recalculationNeeded=!1}}await this.chase.addParticipant(participant,{locationUuid:this.object.locationUuid,recalculateMovementActions:this.data.recalculationNeeded,update:this.object.update}),this.close()}break;case"roll-speed-check":{const participant=new _participant(this.object);if(participant.speedCheck.refSet){const roll=new CoC7Check;participant.data.rolled=!0,roll.actor=participant.actor.actorKey,participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0}foundry.utils.mergeObject(this.object,participant.data),this.render(!0)}}}validateParticipant(){const participant=new _participant(this.object);if(this.data||(this.data={}),this.object.excluded=!1,this.object.escaped=!1,this.data.recalculationNeeded=!1,this.data.participantExcluded=!1,this.data.movementActionDelta=0,!this.data.overrideMovementAction){const slowestPrey=this.chase.slowestPrey,fastestChaser=this.chase.fastestChaser,slowest=this.chase.slowestParticipant;participant.adjustedMov<slowest?.adjustedMov?(this.data.recalculationNeeded=!0,participant.movementAction=1):(this.data.recalculationNeeded=!1,participant.calculateMovementActions(slowest?.adjustedMov)),participant.isChaser&&slowestPrey&&!this.chase.system.includeLastCommers&&participant.adjustedMov<slowestPrey.adjustedMov&&(this.object.excluded=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooSlow"),this.data.recalculationNeeded=!1),participant.isPrey&&fastestChaser&&!this.chase.system.includeEscaped&&participant.adjustedMov>fastestChaser.adjustedMov&&(this.object.escaped=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooFast"),this.data.recalculationNeeded=!1)}}static async create(data){if(data.dropData){const docUuid=CoC7Utilities.getActorDocumentFromDropData(data.dropData);docUuid&&(data.docUuid=docUuid),delete data.dropData}return new CoC7ChaseParticipantImporter(data).render(!0)}}class CoC7ChaseSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item","chase"],template:"systems/CoC7/templates/items/chase.html",width:550,height:500,resizable:!0,tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"participants"}]})}static get type(){return"coc7ChaseSheet"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(options={}){const sheetData=super.getData(options);return sheetData.participants=this.item.participantsObject,sheetData.participantsByInitiative=this.item.participantsByInitiative,sheetData.preys=this.item.preys,sheetData.chasers=this.item.chasers,sheetData.preysMinMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.preysMaxMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMinMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMaxMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasers.forEach((p=>{p.adjustedMov<sheetData.preysMinMov?p.tooSlow():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.chasersMaxMov,p.slowest=p.adjustedMov===sheetData.chasersMinMov})),sheetData.preys.forEach((p=>{p.adjustedMov>sheetData.chasersMaxMov?p.escaped():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.preysMaxMov,p.slowest=p.adjustedMov===sheetData.preysMinMov})),sheetData.locations=this.item.locations,sheetData.allHaveValidMov=this.allHaveValidMov,sheetData.activeLocation=this.item.activeLocation,sheetData.activeLocation&&(sheetData.activeLocation.title=sheetData.activeLocation.coordinates?game.i18n.format("CoC7.LocationCoordinate",{x:sheetData.activeLocation.coordinates.x,y:sheetData.activeLocation.coordinates.y}):game.i18n.localize("CoC7.DragOnCanvas")),sheetData.previousLocation=this.item.previousLocation,sheetData.nextLocation=this.item.nextLocation,sheetData.started=this.item.started,sheetData.isKeeper=game.user.isGM,sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".dropdown-element").on("click",(event=>this._onDropDownElementSelected(event))),html.find(".dropbtn").click((event=>{event.preventDefault(),event.stopPropagation();event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show")})),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.find(".pin-location").contextmenu(this.clearActiveLocationCoordinates.bind(this)),html.find(".participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".p-side").click(this._onChangeSide.bind(this)),html.find(".delete-participant").click(this._onDeleteParticipant.bind(this)),html.find(".reset-roll").click(this._onResetRoll.bind(this)),html.find(".delete-driver").click(this._onDeleteDriver.bind(this)),html.find(".new-participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".new-participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".add-sign").click(this._onAddParticipant.bind(this)),html.find(".roll-participant").click(this._onRollParticipant.bind(this)),html.find(".button").click(this._onButtonClick.bind(this)),html.find(".name-container").click(this._onLocationClick.bind(this)),html.find(".obstacle-type").click(this._onObstacleTypeClick.bind(this)),html.find(".toggle").click(this._onToggle.bind(this)),html.find(".participant-control").click(this._onParticipantControlClicked.bind(this)),html.find(".chase-control").click(this._onChaseControlClicked.bind(this)),html.find(".location-control").click(this._onLocationControlClick.bind(this));new DragDrop({dragSelector:".pin-location",permissions:{dragstart:this._canPinLocationDragStart.bind(this)},callbacks:{dragstart:this._onPinLocationDragStart.bind(this)}}).bind(html[0]);new DragDrop({dropSelector:".participant",callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);if(new DragDrop({dropSelector:".new-participant",callbacks:{drop:this._onAddParticipant.bind(this)}}).bind(html[0]),this.item.started){html.find(".chase-location .chase-participant").click(this._onChaseParticipantClick.bind(this));new DragDrop({dragSelector:".chase-participant",dropSelector:".chase-location",permissions:{dragstart:this._canChaseParticipantDragStart.bind(this),drop:this._canChaseParticipantDragDrop.bind(this)},callbacks:{dragstart:this._onChaseParticipantDragStart.bind(this),drop:this._onChaseParticipantDragDrop.bind(this),dragover:this._onDragEnter.bind(this)}}).bind(html[0]),html.find(".chase-location").on("dragleave",(event=>this._onDragLeave(event)))}}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).object;if(data=updateData?mergeObject(data,updateData):expandObject(data),this.item.system.locations?.list?.length&&data.system.startingIndex>this.item.system.locations.list.length&&(data.system.startingIndex=this.item.system.locations.list.length),data.system.participants){const participants=duplicate(this.item.system.participants);for(const[k,v]of Object.entries(data.system.participants)){const index=participants.findIndex((p=>p.uuid===k));if(-1===index)ui.notifications.error("Participant table corrupted");else{const original=participants[index],cleaned=clean(v);mergeObject(original,cleaned),participants[index]=original}}data.system.participants=participants}if(data.locations){const locations=duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}delete data.locations,data.system.locations={list:locations}}return flattenObject(data)}async _updateObject(event,formData){const target=event.currentTarget,override="true"===target?.dataset?.override;if(target?.name?.includes(".hp")){const[,,uuid]=target.name.split("."),participant=this.item.getParticipant(uuid);participant&&participant.actor&&(isNaN(Number(target.value))||await participant.actor.setHp(Number(target.value)))}if(override){const[,type,uuid,subType,data]=target.name.split("."),index=this.findParticipantIndex(uuid);if("participants"===type&&!isNaN(index)&&"speed-check"===subType&&"name"===data){const participants=this.item.system.participants?duplicate(this.item.system.participants):[];return participants[index].speedCheck?(delete participants[index].speedCheck.id,delete participants[index].speedCheck.type):participants[index].speedCheck={},participants[index].speedCheck.name=target.value,void await this.item.update({"system.participants":participants})}}super._updateObject(event,formData)}static async setScroll(app,html,data){if(!data.editable)return;const initialOpening=html[0].classList.contains("window-app"),chaseTrack=html[0].querySelector(".chase-track");if(!chaseTrack)return;let start=data.data.scroll?.chaseTrack.from,end=data.data.scroll?.chaseTrack.to;if(void 0===start&&(start=0),void 0===end&&(end=-1),initialOpening){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px",""));if(app.item.started){const pCount=app.item.actualParticipants?.length,width=(11.2*pCount+3)*remSize;app.activateTab("setup"),app.position.width=Math.max(width,40*remSize)}else app.position.width=45*remSize;return await app.item.activateNextParticipantTurn({html})}start&&-1!==start&&chaseTrack.scrollTo({top:0,left:start,behavior:"instant"}),-1!==end&&chaseTrack.scrollTo({top:0,left:end,behavior:"smooth"})}static onClose(app,html){app.item.update({"system.trackScrollPosition":-1})}findParticipantIndex(uuid){return this.item.system.participants.findIndex((p=>p.uuid===uuid))}findLocationIndex(uuid){return this.item.system.locations.list.findIndex((p=>p.uuid===uuid))}findLocation(uuid){return this.item.system.locations.list.find((p=>p.uuid===uuid))}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}async _onDropDownElementSelected(event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget;target.closest(".dropdown-content")?.classList.toggle("show");const assistantUuid=target.closest(".initiative-block")?.dataset?.uuid,beneficiaryUuid=target.dataset.beneficiaryUuid;await this.item.assistParticipant(assistantUuid,beneficiaryUuid)}async _onToggle(event){const target=event.currentTarget,toggle=target.getAttribute("toggle"),data=expandObject({[toggle]:!target.classList.contains("switched-on")});if(data.locations){const locations=duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}await this.item.updateLocationsList(locations)}}async _onObstacleTypeClick(event){const target=event.currentTarget,uuid=target.closest(".obstacle").dataset.uuid,locations=duplicate(this.item.system.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={});const obstacle=locations[locationIndex].obstacleDetails,type=target.classList.contains("barrier")?"barrier":"hazard",active=obstacle[type];obstacle.barrier=!1,obstacle.hazard=!1,obstacle[type]=!active,locations[locationIndex].obstacle=!active,await this.item.updateLocationsList(locations)}async _onLocationClick(event){const lUuid=event.currentTarget.closest(".chase-location").dataset.uuid;await this.item.activateLocation(lUuid)}async _onLocationControlClick(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;const action=target.dataset.action,lUuid=target.closest(".chase-location").dataset.uuid;switch(action){case"remove":await this.item.removeLocation(lUuid);break;case"add-after":await this.item.insertLocation(lUuid,{shift:1});break;case"add-before":await this.item.insertLocation(lUuid,{shift:0});break;case"add-participant":CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid:lUuid,dropData:{}})}}async _onChaseParticipantClick(event){const pUuid=event.currentTarget.dataset?.uuid;await this.item.activateParticipant(pUuid)}async _onParticipantControlClicked(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;if(target.classList.contains("dropdown"))return;event.stopPropagation();const participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(participantUuid){switch(target.dataset.action){case"drawGun":await this.toggleParticipantGun(participantUuid);break;case"decreaseActions":await this._onChangeMovementActions(-1,event);break;case"increaseActions":await this._onChangeMovementActions(1,event);break;case"moveBackward":await this.item.moveParticipant(participantUuid,-1,{render:!0});break;case"moveForward":await this.item.moveParticipant(participantUuid,1,{render:!0});break;case"activateParticipant":return await this.item.activateParticipant(participantUuid);case"bonusDice":{const diceNumber=target.dataset.count;await this.item.toggleBonusDice(participantUuid,diceNumber),this.item.activateNextParticipantTurn()}break;case"cautiousApproach":await this.item.cautiousApproach(participantUuid);break;case"editParticipant":{const participant=this.item.getParticipant(participantUuid),location=this.item.getParticipantLocation(participantUuid);participant.data.chaseUuid=this.item.uuid,participant.data.locationUuid=location.uuid,participant.data.update=!0,CoC7ChaseParticipantImporter.create(participant.data)}break;case"removeParticipant":await this.item.removeParticipant(participantUuid)}this.item.activateNextParticipantTurn()}}async _onChaseControlClicked(event){event.preventDefault();const target=event.currentTarget;event.stopPropagation();const locationUuid=target.closest(".obstacle")?.dataset?.uuid;if(locationUuid)return"obstacle-skill-check"===target.dataset.action?this.item.activeParticipantObstacleCheck(locationUuid):void 0}async _onChangeMovementActions(count,event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget,participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(!participantUuid)return;const participants=this.item.participants,participant=participants.find((p=>participantUuid===p.uuid));participant.hasMaxMvtActions&&count>0||(participant.alterMovementActions(count),await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}async _onButtonClick(event){const target=event.currentTarget,action=target.dataset?.action;if(action)switch(action){case"init":if(!isNaN(this.item.system.locations.total)&&this.item.system.locations.total>0){const locations=Array.apply(null,Array(this.item.system.locations.total)).map((function(){return{uuid:foundry.utils.randomID(16)}}));locations[0].name="Start",locations.length>1&&(locations[locations.length-1].name="End"),await this.item.updateLocationsList(locations)}break;case"reset":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmResetChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmResetChaseHint")}</p>`,yes:async()=>{await this.item.updateLocationsList([]),await this.item.stop()}});break;case"cut2chase":this.item.allHaveSpeedRoll?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmCut2Chase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmCut2ChaseHint")}</p>`,yes:()=>this.item.cutToTheChase()}):ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"));break;case"restart":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmRestartChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmRestartChaseHint")}</p>`,yes:()=>this.item.restart()});break;case"nextRound":this.item.nextActiveParticipant?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmNextChaseRound")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmNextChaseRoundHint")}</p>`,yes:()=>this.item.progressToNextRound()}):this.item.progressToNextRound()}}_canPinLocationDragStart(selector){return!!game.user.isGM}async _onPinLocationDragStart(event){const a=event.currentTarget,i=a.querySelector("i.icon"),dragIcon=a.querySelector(".pin-image");event.dataTransfer.setDragImage(dragIcon,0,dragIcon.height);const locationElement=a.closest(".chase-location"),data={type:"locator",CoC7Type:"chase"};data.icon=i.dataset.linkIcon,data.locationUuid=locationElement.dataset.uuid,data.docUuid=this.item.uuid,data.callBack="locatorDropped",event.dataTransfer.setData("text/plain",JSON.stringify(data))}_canChaseParticipantDragStart(selector){return!!game.user.isGM}_canChaseParticipantDragDrop(selector){return!!game.user.isGM}async _onChaseParticipantDragStart(dragEvent){const dragData={uuid:dragEvent.currentTarget.dataset.uuid,type:"participant"};dragEvent.dataTransfer.setData("text/plain",JSON.stringify(dragData))}async _onChaseParticipantDragDrop(dragEvent){const dataString=dragEvent.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);this._onDragLeave(dragEvent);const locationUuid=dragEvent.currentTarget.dataset.uuid;if("participant"===data.type){const oldLocation=this.findLocation(locationUuid);if(oldLocation&&oldLocation.participants?.includes(data.uuid))return;await this.item.setchaseTrackScroll({render:!1}),await this.item.moveParticipantToLocation(data.uuid,locationUuid)}else CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid,dropData:data})}_onDragOver(dragEvent){this._onDragEnter(dragEvent)}_onDragEnter(dragEvent){dragEvent.currentTarget.classList.add("drag-over")}_onDragLeave(dragEvent){const target=dragEvent.currentTarget;target.classList?.remove("drag-over")}async _onDropParticipant(event){const target=event.currentTarget,uuid=target.dataset?.uuid,dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);await this.alterParticipant(data,uuid)}async _onAddParticipant(event){event.preventDefault();const data={chaseUuid:this.item.uuid};if(event.dataTransfer){const dataString=event.dataTransfer.getData("text/plain");data.dropData=JSON.parse(dataString)}CoC7ChaseParticipantImporter.create(data)}async _onRollParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[],participant=new _participant(participants[index]);if(participant.speedCheck.refSet){const roll=new CoC7Check;roll.parent=this.item.uuid,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid,roll.actor=participant.actor.actorKey,!event.shiftKey&&participant.actor.player&&(roll.standby=!0,roll.standbyText="CoC7.Chase",roll.standbyRightIcon="systems/CoC7/assets/icons/running-solid.svg"),participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);roll.parent=this.item.uuid,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid}await this.item.update({"data.participants":participants})}_onDragEnterParticipant(event){event.currentTarget.classList.add("drag-over")}_onDragLeaveParticipant(event){event.currentTarget.classList.remove("drag-over")}async _onChangeSide(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];participants[index].chaser=!participants[index].chaser,await this.item.update({"data.participants":participants})}async _onDeleteDriver(event){const uuid=event.currentTarget.closest(".driver").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];delete participants[index].docUuid,await this.item.update({"data.participants":participants})}async _onDeleteParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];participants.splice(index,1),await this.item.update({"data.participants":participants})}async _onResetRoll(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];delete participants[index].speedCheck.rollDataString,await this.item.update({"data.participants":participants})}async alterParticipant(data,uuid){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.system.participants?duplicate(this.item.system.participants):[],oldParticipant=participants[this.findParticipantIndex(uuid)];oldParticipant.mov&&delete oldParticipant.mov,mergeObject(oldParticipant,participant),await this.item.update({"data.participants":participants})}async clearActiveLocationCoordinates(){await this.item.clearActiveLocationCoordinates()}async addParticipant(data){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":if(data.id){const item=game.items.get(data.id);if("skill"!==item?.data?.type)return}participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}participant.speedCheck||(this.item.system.vehicle?participant.speedCheck={type:"item",name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.drive-auto")}:participant.speedCheck={id:"con",type:"characteristic",name:game.i18n.localize("CHARAC.Constitution")});const participants=this.item.system.participants?duplicate(this.item.system.participants):[];let unique=!1;for(;!unique;)participant.uuid=foundry.utils.randomID(16),unique=0===participants.filter((p=>p.uuid===participant.uuid)).length;participants.push(participant),await this.item.update({"data.participants":participants})}async toggleParticipantGun(participantUuid){const participants=this.item.system.participants?duplicate(this.item.system.participants):[],participant=participants.find((p=>participantUuid===p.uuid));participant&&(participant.hasAGunReady=!participant.hasAGunReady,await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}}function clean(obj){for(const propName in obj){const tp=getType(obj[propName]);"Object"===tp&&(obj[propName]=clean(obj[propName])),("Object"!==tp||Object.entries(obj[propName]).length)&&("string"!==tp||obj[propName].length)?"string"!==tp||isNaN(Number(obj[propName]))||(obj[propName]=Number(obj[propName])):obj[propName]=null}return obj}class CoC7ItemSheetV2 extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item"],template:"systems/CoC7/templates/items/item-sheetV2.html",width:500,height:450,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(options={}){const sheetData=super.getData(options);return sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}}class CoC7ItemSheet extends CoC7ItemSheetV2{static get defaultOptions(){return mergeObject(super.defaultOptions,{width:525,height:506})}}class CoC7JournalSheet extends JournalSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7MacroConfig extends MacroConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7PlaylistConfig extends PlaylistConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7RollTableConfig extends RollTableConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SceneConfig extends SceneConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SetupSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"items"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"items"))),html.find(".add-bio").click((async()=>await this._onAddBio())),html.find(".remove-section").click(this._onRemoveSection.bind(this)),html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onDrop(event,collectionName="items"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&["item","weapon","skill","book","spell"].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}async _onRemoveSection(event){const div=event.currentTarget.closest(".item"),bio=duplicate(this.item.system.bioSections);bio.splice(Number(div.dataset.index),1),await this.item.update({"system.bioSections":bio})}async _onAddBio(){const bio=this.item.system.bioSections?duplicate(this.item.system.bioSections):[];bio.push(null),await this.item.update({"system.bioSections":bio})}_onAddMonetary(){const values=this.item.system.monetary.values?duplicate(this.item.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.item.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=duplicate(this.item.system.monetary.values);values.splice(Number(div.dataset.index),1),this.item.update({"system.monetary.values":values})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=item.system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","setup"],template:"systems/CoC7/templates/items/setup.html",width:565,height:530,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const era=Object.entries(this.item.flags?.CoC7?.cocidFlag?.eras??{}).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:this.item.system.items,era:void 0===era[0]||era[0]});sheetData.skills=items.filter((it=>"skill"===it.type)),sheetData.otherItems=items.filter((it=>"skill"!==it.type)),sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.itemsListEmpty=0===sheetData.otherItems.length,sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});return sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedBackstory=TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}_updateObject(event,formData){const system=expandObject(formData)?.system;system.bioSections&&(formData["system.bioSections"]=Object.values(system.bioSections||[])),system.monetary.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),"system.characteristics.points.enabled"===event.currentTarget?.name&&(formData["system.characteristics.rolls.enabled"]=!event.currentTarget.checked),"system.characteristics.rolls.enabled"===event.currentTarget?.name&&(formData["system.characteristics.points.enabled"]=!event.currentTarget.checked),super._updateObject(event,formData)}}class CoC7SkillSheet extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return`systems/CoC7/templates/items/${this.item.type}-sheet.html`}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hadNonCharacterOwner=sheetData.hasOwner&&"character"!==this.actor?.type,sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.isSpecialized=this.item.system.properties.special,sheetData.canModifySpec=!this.item.system.properties.firearm&&!this.item.system.properties.fighting,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _updateObject(event,formData){const skillName=formData["system.skillName"]||this.item.system.skillName;if(this.item.system.properties?.special){const specialization=formData["system.specialization"]||this.item.system.specialization;formData.name=specialization+" ("+skillName+")"}else formData.name=skillName;return super._updateObject(event,formData)}}class CoC7SpellSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/spell/main.html",classes:["coc7","item","spell"],width:500,height:"auto",resizable:!1,scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".option").click((event=>this.modifyType(event))),html.find("#cast-spell").click((event=>{event.preventDefault(),this.item.cast()}))}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}}class CoC7StatusSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","status"],template:"systems/CoC7/templates/items/status.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}activateListeners(html){super.activateListeners(html),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.statusType[key]?COC7.statusType[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7TalentSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","talent"],template:"systems/CoC7/templates/items/talent.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.talentType[key]?COC7.talentType[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7VehicleSheet extends CoC7ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","item","vehicle"],width:555,height:420,resizable:!0,template:"systems/CoC7/templates/actors/vehicle.html",dragDrop:[{dragSelector:".actor",dropSelector:".dropZone"}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const sheetData=await super.getData();sheetData.properties=[],this.actor.system.properties.armed&&sheetData.properties.push(game.i18n.localize("CoC7.ArmedVehicle"));const expanded=this.actor.getFlag("CoC7","expanded");return sheetData.expanded=void 0===expanded||expanded,sheetData.expanded?sheetData.options.height=420:sheetData.options.height="auto",sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".add-armor").click((async()=>await this._onAddArmor())),html.find(".remove-armor").click((async event=>await this._onRemoveArmor(event))),html.find(".expand-button").click(this._onToggleExpand.bind(this))}async _onToggleExpand(){const expanded=this.actor.getFlag("CoC7","expanded");expanded?(this.oldSize=this.position.height,this.position.height="auto"):this.position.height=this.oldSize||420,await this.actor.setFlag("CoC7","expanded",!expanded)}async _onAddArmor(){const locations=duplicate(this.actor.system.attribs.armor.locations||[]);locations.push({name:null,value:null}),await this.actor.update({"system.attribs.armor.locations":locations})}async _onRemoveArmor(event){const index=event.currentTarget.closest(".armor").dataset.index,locations=duplicate(this.actor.system.attribs.armor.locations||null);locations&&(locations.splice(index,1),await this.actor.update({"system.attribs.armor.locations":locations}))}onCloseSheet(){super.onCloseSheet()}_updateObject(event,formData){const system=expandObject(formData)?.system;system.attribs.armor.locations&&(formData["system.attribs.armor.locations"]=Object.values(system.attribs.armor.locations||[])),super._updateObject(event,formData)}}class CoC7WeaponSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:545,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/weapon-sheet.html"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.combatSkill=[],sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hasOwner&&(sheetData.firearmSkills=this.actor.firearmSkills,sheetData.fightingSkills=this.actor.fightingSkills,sheetData.combatSkill=this.item.actor.items.filter((item=>!("skill"!==item.type||!item.system.properties.combat))),sheetData.combatSkill.sort(CoC7Utilities.sortByNameKey)),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({price:this.item.system.price[key]??0,id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.usesAlternateSkill=!0===this.item.system.properties.auto||!0===this.item.system.properties.brst||!0===this.item.system.properties.thrown,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionSpecial=TextEditor.enrichHTML(sheetData.data.system.description.special,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".weapon-property").click(this._onPropertyClick.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onPropertyClick(event){event.preventDefault();const propertyId=event.currentTarget.closest(".weapon-property").dataset.property;await this.item.toggleProperty(propertyId)}}async function performFilter(e){const appId=e.currentTarget.name.replace(/^coc7[^0-9]+(\d+)$/,"$1"),app=$("div.app[data-appid="+appId+"]"),type=app.find("select[name=coc7type"+appId+"]").val(),name=app.find("input[name=search]").val(),eraElement=app.find("select[name=coc7era"+appId+"]");let era="";switch(type){case"setup":case"skill":case"weapon":eraElement.closest("div.era_select").show(),era=eraElement.val();break;default:eraElement.closest("div.era_select").hide()}const items=await(game.packs.get(app.data("packId"))?.getDocuments());if(void 0===items)return;const show=[],nameFilter=new RegExp(RegExp.escape(name),"i");for(const[,item]of Object.entries(items)){let filter=!0;if(filter&&""!==name&&(filter=item.name.match(nameFilter)),filter&&""!==type&&(filter=item.type===type),filter&&""!==era){const eras=item.flags?.CoC7?.cocidFlag?.eras;eras&&Object.keys(eras).length>0&&!eras[era]&&(filter=!1)}filter&&show.push(item.id)}app.find("ol.directory-list li").each((function(){this.style.display=show.includes(this.dataset.documentId)?"flex":"none"}))}class CoCID{static init(){CONFIG.Actor.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("system.base"),CONFIG.Item.compendiumIndexFields.push("system.properties"),CONFIG.JournalEntry.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Macro.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Playlist.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.RollTable.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Scene.compendiumIndexFields.push("flags.CoC7.cocidFlag"),game.system.api={cocid:CoCID}}static regExKey(){return new RegExp("^("+Object.keys(CoCID.gamePropertyLookup).join("|")+")\\.(.*?)\\.(.+)$")}static getPrefix(document){for(const type in CoCID.documentNameLookup)if(document instanceof CoCID.documentNameLookup[type])return type+"."+(document.type??"")+".";return""}static guessId(document){return CoCID.getPrefix(document)+CoC7Utilities.toKebabCase(document.name)}static guessGroupFromKey(id){if(id){const key=id.replace(/([^\\.-]+)$/,"");if("-"===key.substr(-1))return key}return""}static guessGroupFromDocument(document){return CoCID.guessGroupFromKey(document.flags?.CoC7?.cocidFlag?.id)}static eraText(era){return!1===era?game.i18n.localize("CoC7.Any"):game.i18n.format(COC7.eras[era]??"CoC7.CoCIDFlag.error.unknown-era",{era})}static async expandItemArray({itemList,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){let items=[];const cocids=itemList.filter((it=>"string"==typeof it));if(items=itemList.filter((it=>"string"!=typeof it)),cocids.length){const found=await CoCID.fromCoCIDRegexBest({cocidRegExp:CoCID.makeGroupRegEx(cocids),type:"i",lang,era,langFallback,showLoading}),all=[];for(const cocid of cocids){const item=found.find((i=>i.flags.CoC7.cocidFlag.id===cocid));item&&all.push(item)}if(all.length<cocids.length){const notmissing=[];for(const doc of all)notmissing.push(doc.flags.CoC7.cocidFlag.id);!0===era&&(era=game.settings.get("CoC7","worldEra")),ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:cocids.filter((x=>!notmissing.includes(x))).join(", "),lang,era:CoCID.eraText(era)}))}items=items.concat(all)}return items}static findCocIdInList(cocid,list){let itemName="";const CoCIDKeys=flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys);return void 0!==CoCIDKeys[cocid]&&(itemName=CoCIDKeys[cocid]),(void 0===list.filter?Object.values(list):list).filter((i=>i.flags?.CoC7?.cocidFlag?.id===cocid||""!==itemName&&itemName===i.name))}static makeGroupRegEx(cocids){if("string"==typeof cocids)cocids=[cocids];else if(void 0===cocids||"function"!=typeof cocids.filter)return;const splits={},rgx=CoCID.regExKey();for(const i of cocids){const key=i.match(rgx);key&&(void 0===splits[key[1]]&&(splits[key[1]]={}),void 0===splits[key[1]][key[2]]&&(splits[key[1]][key[2]]=[]),splits[key[1]][key[2]].push(key[3]))}const regExParts=[];for(const t in splits){const row=[];for(const s in splits[t])splits[t][s].length>1?row.push(s+"\\.("+splits[t][s].join("|")+")"):row.push(s+"\\."+splits[t][s].join(""));row.length>1?regExParts.push(t+"\\.("+row.join("|")+")"):regExParts.push(t+"\\."+row.join(""))}return regExParts.length>1?new RegExp("^("+regExParts.join("|")+")$"):new RegExp("^"+regExParts.join("")+"$")}static async fromCoCIDRegexAll({cocidRegExp,type,lang=game.i18n.lang,era=!1,scope="match",langFallback=!0,showLoading=!1}={}){if(!cocidRegExp)return[];const result=[];let count=0;if(showLoading&&(["match","all","world"].includes(scope)&&count++,["match","all","compendiums"].includes(scope)&&(count+=game.packs.size)),["match","all","world"].includes(scope)){const worldDocuments=await CoCID.documentsFromWorld({cocidRegExp,type,lang,era,langFallback,progressBar:count});if("match"===scope&&worldDocuments.length)return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),this.filterAllCoCID(worldDocuments,langFallback&&"en"!==lang);result.splice(0,0,...worldDocuments)}if(["match","all","compendiums"].includes(scope)){const compendiaDocuments=await CoCID.documentsFromCompendia({cocidRegExp,type,lang,era,langFallback,progressBar:count});result.splice(result.length,0,...compendiaDocuments)}return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),this.filterAllCoCID(result,langFallback&&"en"!==lang)}static async fromCoCIDAll({cocid,lang=game.i18n.lang,era=!1,scope="match",langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];const parts=cocid.match(CoCID.regExKey());return parts?(""===lang&&(lang=game.i18n.lang),CoCID.fromCoCIDRegexAll({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$"),type:parts[1],lang,era,scope,langFallback,showLoading})):[]}static async fromCoCIDRegexBest({cocidRegExp,type,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){const allDocuments=await this.fromCoCIDRegexAll({cocidRegExp,type,lang,era,scope:"all",langFallback,showLoading});return this.filterBestCoCID(allDocuments)}static fromCoCID(cocid,lang=game.i18n.lang,era=!0,langFallback=!0){return CoCID.fromCoCIDBest({cocid,lang,era,langFallback})}static fromCoCIDBest({cocid,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];const type=cocid.split(".")[0],cocidRegExp=new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$");return CoCID.fromCoCIDRegexBest({cocidRegExp,type,lang,era,langFallback,showLoading})}static filterBestCoCID(documents){const bestMatchDocuments=new Map;for(const doc of documents){const docCoCID=doc.getFlag("CoC7","cocidFlag")?.id;if(docCoCID){const currentExists=bestMatchDocuments.get(docCoCID)?.id,docLang=doc.getFlag("CoC7","cocidFlag")?.lang??"en",existingLang=bestMatchDocuments.get(docCoCID)?.getFlag("CoC7","cocidFlag")?.lang??"en",preferLang=!currentExists||"en"===existingLang||existingLang===docLang,docPack=doc.pack??"",existingPack=bestMatchDocuments.get(docCoCID)?.pack??"",preferWorld=!currentExists||""===docPack||""!==existingPack,docPriority=parseInt(doc.getFlag("CoC7","cocidFlag")?.priority,10),existingPriority=parseInt(bestMatchDocuments.get(docCoCID)?.getFlag("CoC7","cocidFlag")?.priority??Number.MIN_SAFE_INTEGER);preferLang&&preferWorld&&(!currentExists||docPriority===existingPriority||docPriority>existingPriority)&&bestMatchDocuments.set(docCoCID,doc)}}return[...bestMatchDocuments.values()]}static filterAllCoCID(documents,langFallback){if(!langFallback)return documents;const bestMatchDocuments=new Map;for(const doc of documents){const docCoCID=doc.getFlag("CoC7","cocidFlag")?.id,docEras=Object.entries(doc.getFlag("CoC7","cocidFlag")?.eras??{}).filter((e=>e[1])).map((e=>e[0])).join("/");if(docCoCID){const currentExists=bestMatchDocuments.get(docCoCID)?.id,docLang=doc.getFlag("CoC7","cocidFlag")?.lang??"en",existingLang=bestMatchDocuments.get(docCoCID)?.getFlag("CoC7","cocidFlag")?.lang??"en";(!currentExists||"en"===existingLang||existingLang===docLang)&&bestMatchDocuments.set(docCoCID+"/"+docEras,doc)}}return[...bestMatchDocuments.values()]}static async documentsFromWorld({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}={}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra")),progressBar>0&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100/progressBar)});const gameProperty=CoCID.getGameProperty(`${type}..`),candidateDocuments=game[gameProperty]?.filter((d=>{const cocidFlag=d.getFlag("CoC7","cocidFlag");if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));return void 0===candidateDocuments?[]:candidateDocuments.sort(CoCID.compareCoCIDPrio)}static async documentsFromCompendia({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra"));const eraText=CoCID.eraText(era),documentType=CoCID.getDocumentType(type).schema.name,candidateDocuments=[];let count=1;for(const pack of game.packs)if(progressBar>0&&(SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100*count/progressBar)}),count++),pack.documentName===documentType){pack.indexed||await pack.getIndex();const indexInstances=pack.index.filter((i=>{const cocidFlag=i.flags?.CoC7?.cocidFlag;if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));for(const index of indexInstances){const document=await pack.getDocument(index._id);if(!document){const msg=game.i18n.format("CoC7.CoCIDFlag.error.document-not-found",{cocid:cocidRegExp,lang,era:eraText});throw ui.notifications.error(msg),console.log("CoC7 |",msg,index),new Error}candidateDocuments.push(document)}}return candidateDocuments.sort(CoCID.compareCoCIDPrio)}static compareCoCIDPrio(a,b){return b.getFlag("CoC7","cocidFlag")?.priority-a.getFlag("CoC7","cocidFlag")?.priority}static getGameProperty(cocid){const type=cocid.split(".")[0],gameProperty=CoCID.gamePropertyLookup[type];if(!gameProperty)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return gameProperty}static get gamePropertyLookup(){return{a:"actors",c:"cards",i:"items",je:"journal",m:"macros",p:"playlists",rt:"tables",s:"scenes"}}static getDocumentType(cocid){const type=cocid.split(".")[0],documentType=CoCID.documentNameLookup[type];if(!documentType)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return documentType}static get documentNameLookup(){return{a:Actor,c:Card,i:Item,je:JournalEntry,m:Macro,p:Playlist,rt:RollTable,s:Scene}}}function listen(){Hooks.once("init",(async()=>{CONFIG.ActiveEffect.documentClass=CoC7ActiveEffect,CONFIG.Actor.documentClass=CoCActor,CONFIG.Actor.documentClasses={vehicle:CoC7Vehicle},CONFIG.Item.documentClass=CoC7Item,CONFIG.Item.documentClasses={book:CoC7Book,spell:CoC7Spell,chase:CoC7Chase,skill:CoC7Skill},async function(){loadTemplates(["systems/CoC7/templates/actors/parts/npc-skills.html","systems/CoC7/templates/actors/parts/npc-combat.html","systems/CoC7/templates/actors/parts/actor-inventory.html","systems/CoC7/templates/actors/parts/actor-inventory-items.html","systems/CoC7/templates/actors/parts/actor-background.html","systems/CoC7/templates/common/active-effects.hbs","systems/CoC7/templates/actors/parts/actor-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-keeper-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-skills-v2.html","systems/CoC7/templates/actors/parts/character-development-v2.html","systems/CoC7/templates/actors/parts/development-controls.html","systems/CoC7/templates/actors/parts/vitals.html","systems/CoC7/templates/actors/parts/combat.html","systems/CoC7/templates/actors/character-sheet-v2.html","systems/CoC7/templates/actors/character/summary.html","systems/CoC7/templates/items/book/details.html","systems/CoC7/templates/items/spell/details.html","systems/CoC7/templates/apps/investigator-wizard/introduction.hbs","systems/CoC7/templates/apps/investigator-wizard/configuration.hbs","systems/CoC7/templates/apps/investigator-wizard/select-setup.hbs","systems/CoC7/templates/apps/investigator-wizard/select-archetype.hbs","systems/CoC7/templates/apps/investigator-wizard/select-occupation.hbs","systems/CoC7/templates/apps/investigator-wizard/set-characteristics.hbs","systems/CoC7/templates/apps/investigator-wizard/set-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/view-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/set-investigator.hbs","systems/CoC7/templates/apps/investigator-wizard/set-occupation-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/toggle-skill.hbs","systems/CoC7/templates/apps/investigator-wizard/set-archetype-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/points-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/backstory.hbs","systems/CoC7/templates/apps/investigator-wizard/create.hbs"])}(),function(){if(game.settings.registerMenu("CoC7","gameRules",{name:"CoC7.Settings.Rules.Name",label:"CoC7.Settings.Rules.Label",hint:"CoC7.Settings.Rules.Hint",icon:"fas fa-book",type:CoC7GameRuleSettings,restricted:!0}),CoC7GameRuleSettings.registerSettings(),game.settings.register("CoC7","useContextMenus",{name:"SETTINGS.UseContextMenus",hint:"SETTINGS.UseContextMenusHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","dholeUploadDirectory",{name:"CoC7.Settings.DholeUpload.Directory.Name",hint:"CoC7.Settings.DholeUpload.Directory.Hint",scope:"world",config:!0,type:CoC7DirectoryPicker.DefaultDirectory,default:"[data] worlds/"+game.world.id+"/dhole-images"}),game.settings.register("CoC7","worldEra",{name:"CoC7.Settings.WorldEra.Name",hint:"CoC7.Settings.WorldEra.Hint",scope:"world",config:!0,default:"standard",type:String,choices:COC7.eras,onChange:()=>{ui.players.render(!0)}}),game.settings.register("CoC7","dropCoCID",{name:"CoC7.Settings.DropCoCID.Name",hint:"CoC7.Settings.DropCoCID.Hint",scope:"world",config:!0,default:"",type:String,choices:{"":"CoC7.Settings.DropCoCID.Prompt",Y:"CoC7.Settings.DropCoCID.UseCoCID",N:"CoC7.Settings.DropCoCID.IgnoreCoCID"}}),game.settings.register("CoC7","displayInitDices",{name:"SETTINGS.displayInitDices",hint:"SETTINGS.displayInitDicesHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayInitAsText",{name:"SETTINGS.displayInitAsText",hint:"SETTINGS.displayInitAsTextHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","stanbyGMRolls",{name:"SETTINGS.StanbyGMRolls",hint:"SETTINGS.StanbyGMRollsHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","allowFlatDiceModifier",{name:"SETTINGS.AllowFlatDiceModifier",hint:"SETTINGS.AllowFlatDiceModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","allowFlatThresholdModifier",{name:"SETTINGS.AllowFlatThresholdModifier",hint:"SETTINGS.AllowFlatThresholdModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","defaultCheckDifficulty",{name:"SETTINGS.DefaultDifficulty",hint:"SETTINGS.DefaultDifficultyHint",scope:"world",config:!0,default:"regular",type:String,choices:{regular:"SETTINGS.CheckDifficultyRegular",unknown:"SETTINGS.CheckDifficultyUnknown"}}),game.settings.register("CoC7","selfRollWhisperTarget",{name:"SETTINGS.SelfRollWhisperTarget",hint:"SETTINGS.SelfRollWhisperTargetHint",scope:"world",config:!0,default:"everyone",type:String,choices:{nobody:"SETTINGS.DoNotAdvise",owners:"SETTINGS.AdviseOwnersOnly",everyone:"SETTINGS.AdviseAllPlayer"}}),game.settings.register("CoC7","trustedCanModfyChatCard",{name:"SETTINGS.TrustedCanModfyChatCard",hint:"SETTINGS.TrustedCanModfyChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","trustedCanSeeChatCard",{name:"SETTINGS.TrustedCanSeeChatCard",hint:"SETTINGS.TrustedCanSeeChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayActorOnCard",{name:"SETTINGS.DisplayActorOnCard",hint:"SETTINGS.DisplayActorOnCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayCheckSuccessLevel",{name:"SETTINGS.DisplayCheckSuccessLevel",scope:"client",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayResultType",{name:"SETTINGS.DisplayResultType",scope:"client",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","useToken",{name:"SETTINGS.UseToken",hint:"SETTINGS.UseTokenHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","enableStatusIcons",{name:"SETTINGS.EnableStatusIcons",hint:"SETTINGS.EnableStatusIconsHint",scope:"world",config:!0,type:Boolean,default:!0}),game.settings.register("CoC7","gridSpaces",{name:"SETTINGS.RestrictGridSpaces",hint:"SETTINGS.RestrictGridSpacesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","distanceElevation",{name:"SETTINGS.CheckElevation",hint:"SETTINGS.CheckElevationHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","overrideGameArtwork",{name:"SETTINGS.OverrideGameArtwork",hint:"SETTINGS.OverrideGameArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideGameArtwork")&&(game.settings.register("CoC7","artPauseImage",{name:"SETTINGS.ArtPauseImage",hint:"SETTINGS.ArtPauseImageHint",scope:"world",config:!0,default:"systems/CoC7/assets/icons/time-trap.svg",type:String}),game.settings.register("CoC7","artPauseText",{name:"SETTINGS.ArtPauseText",hint:"SETTINGS.ArtPauseTextHint",scope:"world",config:!0,default:"The Blind Idiot God is dreaming...",type:String})),game.settings.register("CoC7","displayPlayerNameOnSheet",{name:"SETTINGS.displayPlayerNameOnSheet",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","toolTipDelay",{name:"CoC7.toolTipDelay",scope:"world",config:!0,default:2e3,type:Number}),game.settings.register("CoC7","showIconsOnly",{name:"SETTINGS.showIconsOnly",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","playerUnlockSheetMode",{name:"SETTINGS.PlayerUnlockSheetMode",scope:"world",config:!0,default:"always",type:String,choices:{always:"SETTINGS.AlwaysEditable",creation:"SETTINGS.CreationModeOnly",never:"SETTINGS.NeverEditable"}}),game.settings.register("CoC7","statusPlayerEditable",{name:"SETTINGS.StatusPlayerEditable",hint:"SETTINGS.StatusPlayerEditableHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","oneBlockBackstory",{name:"SETTINGS.OneBlockBackStory",hint:"SETTINGS.OneBlockBackStoryHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideSheetArtwork",{name:"SETTINGS.OverrideSheetArtwork",hint:"SETTINGS.OverrideSheetArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideSheetArtwork")){function _setRootFontSize(size){$(":root").css("font-size",size),ui.sidebar.render(!0);for(const[,w]of Object.entries(ui.windows))w.render(!0)}game.settings.register("CoC7","artWorkSheetBackground",{name:"SETTINGS.ArtWorkSheetBackground",hint:"SETTINGS.ArtWorkSheetBackgroundHint",scope:"world",config:!0,default:"url('./assets/images/background.webp') 4 repeat",type:String}),game.settings.register("CoC7","artWorkSheetBackgroundType",{name:"SETTINGS.ArtWorkSheetBackgroundType",scope:"world",config:!0,default:"slice",type:String,choices:{slice:"SETTINGS.BackgroundSlice",auto:"SETTINGS.BackgroundAuto",contain:"SETTINGS.BackgroundContain",cover:"SETTINGS.BackgroundCover"}}),game.settings.register("CoC7","artWorkOtherSheetBackground",{name:"SETTINGS.ArtWorkOtherSheetBackground",hint:"SETTINGS.ArtWorkOtherSheetBackgroundHint",scope:"world",config:!0,default:"url( './assets/images/background.webp')",type:String}),game.settings.register("CoC7","artworkSheetImage",{name:"SETTINGS.ArtworkSheetImage",hint:"SETTINGS.ArtworkSheetImageHint",scope:"world",config:!0,default:"url('./assets/images/tentacles.webp')",type:String}),game.settings.register("CoC7","artworkFrontColor",{name:"SETTINGS.ArtworkFrontColor",hint:"SETTINGS.ArtworkFrontColorHint",scope:"world",config:!0,default:"rgba(43,55,83,1)",type:String}),game.settings.register("CoC7","artworkBackgroundColor",{name:"SETTINGS.ArtworkBackgroundColor",hint:"SETTINGS.ArtworkBackgroundColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkInteractiveColor",{name:"SETTINGS.ArtworkInteractiveColor",hint:"SETTINGS.ArtworkInteractiveColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkFixedSkillLength",{name:"SETTINGS.ArtworkFixedSkillLength",hint:"SETTINGS.ArtworkFixedSkillLengthHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","artworkMainFont",{name:"SETTINGS.ArtworkMainFont",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontBold",{name:"SETTINGS.ArtworkMainFontBold",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontSize",{name:"SETTINGS.ArtworkMainFontSize",scope:"world",config:!0,default:16,type:Number,onChange:size=>_setRootFontSize(size)})}if(game.settings.register("CoC7","disregardUsePerRound",{name:"SETTINGS.DisregardUsePerRound",hint:"SETTINGS.DisregardUsePerRoundHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardAmmo",{name:"SETTINGS.DisregardAmmo",hint:"SETTINGS.DisregardAmmoHint",scope:"world",config:!0,default:!1,type:Boolean}),game.modules.get("dice-so-nice")?.active){game.settings.register("CoC7","syncDice3d",{name:"SETTINGS.SyncDice3D",hint:"SETTINGS.SyncDice3DHint",scope:"world",config:!0,default:!0,type:Boolean});const[version]=game.modules.get("dice-so-nice")?.version.split(".");!isNaN(Number(version))&&Number(version)>=3&&(game.settings.register("CoC7","tenDieBonus",{name:"SETTINGS.TenDieBonus",hint:"SETTINGS.TenDieBonusHint",scope:"client",config:!0,default:"bronze",type:String}),game.settings.register("CoC7","tenDiePenalty",{name:"SETTINGS.TenDiePenalty",hint:"SETTINGS.TenDiePenaltyHint",scope:"client",config:!0,default:"bloodmoon",type:String}))}game.settings.register("CoC7","debugmode",{name:"SETTINGS.DebugMode",hint:"SETTINGS.DebugModeHint",scope:"client",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","experimentalFeatures",{name:"SETTINGS.ShowExperimentalFeatures",hint:"SETTINGS.ShowExperimentalFeaturesHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","hiddendevmenu",{name:"Hidden dev menu",hint:"Use at your own risk",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","developmentEnabled",{name:"Dev phased allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","showWelcomeMessage",{name:"SETTINGS.showWelcomeMessage",hint:"SETTINGS.showWelcomeMessage",scope:"world",config:!1,default:!0,type:Boolean}),game.settings.register("CoC7","charCreationEnabled",{name:"Char creation allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","systemUpdateVersion",{name:"System update version",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","systemUpdatedModuleVersion",{scope:"world",config:!1,default:{}}),game.settings.register("CoC7","xpEnabled",{name:"Enable XP gain",scope:"world",config:!1,type:Boolean,default:!0}),game.settings.register("CoC7","showInstructions",{name:"Show changelog/instructions",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","InvestigatorWizardSetup",{name:"Force specific setup CoC ID for Investigator Wizard",scope:"world",config:!1,type:String,default:""}),game.settings.register("CoC7","InvestigatorWizardQuantity",{name:"Number of investigators a single user without create actor rights can own",scope:"world",config:!1,type:Number,default:0}),game.settings.register("CoC7","InvestigatorWizardOwnership",{name:"Default permissions for non owner players",scope:"world",config:!1,type:Number,default:CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE}),game.settings.register("CoC7","InvestigatorWizardRerolls",{name:"Allow players to reroll characteristics",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardPointBuy",{name:"Force point buy instead of setup choice",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardQuickFire",{name:"Quick fire setup values",scope:"world",config:!1,type:Array,default:[]}),CONFIG.Combat.initiative={formula:"@characteristics.dex.value",decimals:4},CONFIG.debug.hooks=!!game.settings.get("CoC7","debugmode"),CONFIG.Dice.terms.t=CoC7DecaderDie,CONFIG.Dice.terms.o=CoC7DecaderDieOther}(),Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("CoC7",CoC7NPCSheet,{types:["npc"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7VehicleSheet,{types:["vehicle"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CreatureSheet,{types:["creature"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7ContainerSheet,{types:["container"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CharacterSheet,{types:["character"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("CoC7",CoC7SkillSheet,{types:["skill"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7WeaponSheet,{types:["weapon"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7BookSheet,{types:["book"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SpellSheet,{types:["spell"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7TalentSheet,{types:["talent"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7StatusSheet,{types:["status"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7OccupationSheet,{types:["occupation"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArchetypeSheet,{types:["archetype"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SetupSheet,{types:["setup"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ChaseSheet,{types:["chase"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ItemSheet,{types:["item"]}),Items.registerSheet("CoC7",CoC7ItemSheetV2,{types:["item"],makeDefault:!0}),Scenes.unregisterSheet("core",SceneConfig),Scenes.registerSheet("CoC7",CoC7SceneConfig,{makeDefault:!0}),Journal.unregisterSheet("core",JournalSheet),Journal.registerSheet("CoC7",CoC7JournalSheet,{makeDefault:!0}),RollTables.unregisterSheet("core",RollTableConfig),RollTables.registerSheet("CoC7",CoC7RollTableConfig,{makeDefault:!0}),Macros.unregisterSheet("core",MacroConfig),Macros.registerSheet("CoC7",CoC7MacroConfig,{makeDefault:!0}),Playlists.unregisterSheet("core",PlaylistConfig),Playlists.registerSheet("CoC7",CoC7PlaylistConfig,{makeDefault:!0}),Handlebars.registerHelper("rollActorImg",(function(actorKey){return chatHelper.getActorImgFromKey(actorKey)||"../icons/svg/mystery-man-black.svg"})),function(){Hooks.on("renderCompendium",(async(app,html,data)=>{if("Item"===app.collection.documentName){await app.collection.getIndex();const types=[...new Set(data.index.filter((i=>"#[CF_tempEntity]"!==i.name)).map((item=>item.type)))],select=[];select.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>"),types.includes("archetype")&&select.push('<option value="archetype">'+game.i18n.localize("CoC7.Entities.Archetype")+"</option>"),types.includes("book")&&select.push('<option value="book">'+game.i18n.localize("CoC7.Entities.Book")+"</option>"),types.includes("item")&&select.push('<option value="item">'+game.i18n.localize("CoC7.Entities.Item")+"</option>"),types.includes("occupation")&&select.push('<option value="occupation">'+game.i18n.localize("CoC7.Entities.Occupation")+"</option>"),types.includes("setup")&&select.push('<option value="setup">'+game.i18n.localize("CoC7.Entities.Setup")+"</option>"),types.includes("skill")&&select.push('<option value="skill">'+game.i18n.localize("CoC7.Entities.Skill")+"</option>"),types.includes("spell")&&select.push('<option value="spell">'+game.i18n.localize("CoC7.Entities.Spell")+"</option>"),types.includes("status")&&select.push('<option value="status">'+game.i18n.localize("CoC7.Entities.Status")+"</option>"),types.includes("talent")&&select.push('<option value="talent">'+game.i18n.localize("CoC7.Entities.Talent")+"</option>"),types.includes("weapon")&&select.push('<option value="weapon">'+game.i18n.localize("CoC7.Entities.Weapon")+"</option>");const eras=[];eras.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>");for(const era of Object.entries(COC7.eras).map((e=>({id:e[0],name:game.i18n.localize(e[1])}))).sort(CoC7Utilities.sortByNameKey))eras.push('<option value="'+era.id+'">'+era.name+"</option>");html.data("packId",app.metadata.id);let uncommon=game.i18n.localize("CoC7.SkillRarityShort");"CoC7.SkillRarityShort"===uncommon&&(uncommon="??"),html.find("li.directory-item").each((function(){const row=$(this);let item=[];item=void 0!==data.index?data.index.find((i=>i._id===row.data("document-id"))):app.collection.index.get(row.data("document-id")),item&&"skill"===item.type&&row.find("a").html(item.name+" ("+(item.system?.base??"?")+"%"+(item.system?.properties?.rarity?" "+uncommon:"")+")")})),html.find("header.directory-header").after('<div class="compendiumfilter"><div class="header-search flexrow"><i class="fas fa-layer-group"></i><select name="coc7type'+app.appId+'" style="">'+select.join("")+'</select></div><div class="header-search flexrow era_select" style="display:none"><i class="fas fa-layer-group"></i><select name="coc7era'+app.appId+'" style="">'+eras.join("")+"</select></div></div>"),html.find("select").change(performFilter.bind(this)),html.find("input").keyup(performFilter.bind(this))}}))}(),CoCID.init(),CoC7Link.init()}))}class CoC7DecaderDSNFaces{construtor(){this.selected=""}setFaces(){let selected=game.user.getFlag("dice-so-nice","appearance")?.global.system;if(selected!==this.selected){let data,destination,sourceDie=game.dice3d.DiceFactory.systems[selected]?.dice.find((d=>"d100"===d.type));void 0===sourceDie&&(sourceDie=game.dice3d.DiceFactory.systems.standard.dice.find((d=>"d100"===d.type)),selected="standard"),void 0!==sourceDie&&(destination=game.dice3d.DiceFactory.systems.standard.dice.findIndex((d=>"dt"===d.type)),data=Object.assign({},sourceDie),data.type="dt",game.dice3d.DiceFactory.systems.standard.dice[destination]=Object.assign(sourceDie.constructor.prototype,data)),this.selected=selected}}}class CoC7Tooltips{constructor(){this.ToolTipHover=null,this.toolTipTimer=null}displayToolTip(toolTip){if(void 0!==this.ToolTipHover){const bounds=this.ToolTipHover.getBoundingClientRect();if(!isNaN(bounds.left||"")&&!isNaN(bounds.top||"")){let left=bounds.left,top=bounds.top;const heightText=$(this.ToolTipHover).outerHeight();$("body").append('<div id="help-tooltip">'+toolTip+"</div>");const tip=$("#help-tooltip"),heightTip=tip.outerHeight(),widthTip=tip.outerWidth();window.innerHeight<1.5*heightText+heightTip+top?top-=heightTip:top+=1.5*heightText,window.innerWidth<widthTip+left&&(left=window.innerWidth-widthTip),tip.css({left:left+"px",top:top+"px"})}}}toolTipLeave(event){game.CoC7Tooltips.ToolTipHover===event.currentTarget&&(clearTimeout(game.CoC7Tooltips.toolTipTimer),game.CoC7Tooltips.ToolTipHover=null,$("#help-tooltip").remove())}}let CoC7Tour=class{};"undefined"!=typeof Tour&&(CoC7Tour=class extends Tour{async waitForElement(selector){return new Promise(((resolve,reject)=>{if(document.querySelector(selector))return void resolve();new MutationObserver(((mutations,observer)=>{document.querySelectorAll(selector).forEach((el=>{resolve(),observer.disconnect()}))})).observe(document.body,{childList:!0,subtree:!0})}))}async _preStep(){if(await super._preStep(),0===this.stepIndex)for(const app of Object.values(ui.windows))app.close();await this.waitForElement(this.currentStep.selector)}async _postStep(){if(await super._postStep(),!(this.stepIndex<0)&&this.hasNext&&this.currentStep.action)if(this.isResetting)this.isResetting=!1;else if("click"===this.currentStep.action)document.querySelector(this.currentStep.selector).click()}async reset(){"completed"!==this.status&&(this.isResetting=!0),await super.reset()}});class EnableVariantRulesEn extends CoC7Tour{constructor(config){super(mergeObject({title:"Enable optional/variant rules.",description:"Learn how to enable Pulp Cthulhu rules, or other variant rules",canBeResumed:!1,display:!0,steps:[{id:"goto-settings",selector:'[data-tab="settings"]',title:"COC7.Tour.GotoSettingsTitle",content:"COC7.Tour.GotoSettingsContent",action:"click"},{id:"goto-configure",selector:'[data-action="configure"]',title:"COC7.Tour.GotoConfigureTitle",content:"COC7.Tour.GotoConfigureContent",action:"click"},{id:"goto-system-settings",selector:'[data-category="system"]',title:"COC7.Tour.GotoSystemSettingsTitle",content:"COC7.Tour.GotoSystemSettingsContent",action:"click"},{id:"goto-game-rules",selector:'[data-category="system"] [data-key="CoC7.gameRules"]',title:"COC7.Tour.GotoGameRulesTitle",content:"COC7.Tour.GotoGameRulesContent",action:"click"},{id:"save-game-rules",selector:"#rules-settings [name=submit]",title:"COC7.Tour.SaveGameRulesTitle",content:"COC7.Tour.SaveGameRulesContent"}],localization:{"COC7.Tour.GotoSettingsTitle":"Game Settings","COC7.Tour.GotoSettingsContent":"Go to the Game Settings tab","COC7.Tour.GotoConfigureTitle":"Configure Settings","COC7.Tour.GotoConfigureContent":"Click on the Configure Settings button","COC7.Tour.GotoSystemSettingsTitle":"System Settings","COC7.Tour.GotoSystemSettingsContent":"Go to the System Settings tab","COC7.Tour.GotoGameRulesTitle":"Configure Variant/Optional Rules","COC7.Tour.GotoGameRulesContent":"Click on the Configure Variant/Optional Rules button","COC7.Tour.SaveGameRulesTitle":"Save rule changes","COC7.Tour.SaveGameRulesContent":"Once you have made your changes click on the Save Changes button"}},config))}async _preStep(){await super._preStep(),"goto-game-rules"===this.currentStep.id&&(await this.waitForElement(".category-filter.system.active"),await this.waitForElement(this.currentStep.selector))}}class EnableVariantRulesFr extends EnableVariantRulesEn{constructor(config){super({title:"Activez les règles optionnelles.",description:"Activez les règles optionelles et Pulp Cthulhu",localization:{"COC7.Tour.GotoSettingsTitle":"Paramètres","COC7.Tour.GotoSettingsContent":'Ouvrir l\'onglet "Paramètres"',"COC7.Tour.GotoConfigureTitle":"Configuration des options","COC7.Tour.GotoConfigureContent":'Cliquez sur "Configuration des options"',"COC7.Tour.GotoSystemSettingsTitle":"Système de jeu","COC7.Tour.GotoSystemSettingsContent":'Ouvrez l\'onglet "Système de jeu"',"COC7.Tour.GotoGameRulesTitle":"Configurer les variantes/règles optionnelles","COC7.Tour.GotoGameRulesContent":'Clickez sur le boutton "Configurer les variantes/règles optionnelles"',"COC7.Tour.SaveGameRulesTitle":"Sauvegarder les modifications","COC7.Tour.SaveGameRulesContent":'Apres avoir choisis les options cliquez sur le bouton "Sauvegarder les modifications"'}})}}function ready_listen(){Hooks.once("ready",(async()=>{console.log("Call of Cthulhu 7th Edition | Ready"),game.settings.get("CoC7","showWelcomeMessage")&&game.user.isGM,game.CoC7Tooltips=new CoC7Tooltips;const instructionsVersion=game.settings.get("CoC7","showInstructions");if(isNewerVersion(game.system.version,instructionsVersion??"0")){let lang=game.i18n.lang;const readMe={en:"sxB2OXbfwV6M0nyQ",fr:"tdakyzTVOQsAMdSm"};void 0===readMe[lang]&&(lang="en"),(await game.packs.get("CoC7.system-doc").getDocument(readMe[lang])).sheet.render(!0),game.settings.set("CoC7","showInstructions",game.system.version)}!async function(){try{let lang=game.i18n.lang;const tours={en:{"enable-variant-rules":EnableVariantRulesEn},fr:{"enable-variant-rules":EnableVariantRulesFr}};void 0===tours[lang]&&(lang="en");for(const tourName in tours[lang])game.tours.register("CoC7",tourName,new tours[lang][tourName])}catch(err){console.error("TOUR ERROR",err)}}()}))}const CoC7Hooks={listen(){listen(),ready_listen(),Hooks.on("renderActorSheet",(async(data,html,options)=>{})),Hooks.on("renderChatMessage",((app,html,data)=>{CoC7Chat.renderMessageHook(app,html,data),CoC7Chat.renderChatMessageHook(app,html,data),CoC7Parser.ParseMessage(app,html,data),CoC7Link.bindEventsHandler(html)})),Hooks.on("renderDialog",((dialog,html)=>{const form=html.find("form");if(form.is("#document-create")&&0!==form.find("select").length){const entityCreateSelectTag=form.find("[name='type']"),entitySortedList=[],showExperimental=!!game.settings.get("CoC7","experimentalFeatures");entityCreateSelectTag.children().each(((o,entityOption)=>{const key=entityOption.textContent?.capitalize();game.i18n.has(`CoC7.Entities.${key}`)&&(entityOption.textContent=game.i18n.localize(`CoC7.Entities.${key}`)),!showExperimental&&["vehicle"].includes(entityOption.value)||entitySortedList.push(entityOption)})),entityCreateSelectTag.empty(),entityCreateSelectTag.append(entitySortedList.sort(((first,second)=>first.innerText.localeCompare(second.innerText)))),"actor"===entityCreateSelectTag.val()?entityCreateSelectTag.val("character"):"book"===entityCreateSelectTag.val()&&entityCreateSelectTag.val("item")}})),Hooks.on("renderItemSheet",(async(data,html,options)=>{})),Hooks.on("renderPause",(async(data,html,options)=>{game.settings.get("CoC7","overrideGameArtwork")&&("null"===game.settings.get("CoC7","artPauseImage").toLowerCase()&&html.find("img").remove(),""!==game.settings.get("CoC7","artPauseImage")&&html.find("img").attr("src",game.settings.get("CoC7","artPauseImage")),""!==game.settings.get("CoC7","artPauseText")&&html.find("h3").html(game.settings.get("CoC7","artPauseText")))})),Hooks.once("diceSoNiceReady",(dice3d=>{dice3d.addDicePreset({type:"dt",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),dice3d.addDicePreset({type:"do",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),game.CoC7DecaderDSNFaces=new CoC7DecaderDSNFaces})),Hooks.on("diceSoNiceRollStart",(dice3d=>{game.CoC7DecaderDSNFaces.setFaces()})),Hooks.on("renderPlayerList",((playerList,html,data)=>{$("<h4>").append('<div><i class="fa-regular fa-calendar"></i>'+game.i18n.format(COC7.eras[game.settings.get("CoC7","worldEra")]??"CoC7.CoCIDFlag.error.unknown-era",{era:game.settings.get("CoC7","worldEra")})+"</div>").insertAfter($("h3",html))})),Hooks.on("renderSettingsConfig",((app,html,user)=>{CoC7DirectoryPicker.processHtml(html)}))}};async function gmcreatemessageas(data){const meleeTarget=new CoC7MeleeTarget(data.targetKey,data.messageId,data.fastForward);meleeTarget.initiatorKey=data.actorKey;return await meleeTarget.createChatCard()}async function gmtradeitemto(data){try{let actor;actor=data.scene?game.scenes.get(data.scene).tokens.get(data.actorFrom).actor:game.actors.get(data.actorFrom);const item=actor.items.get(data.item);await game.actors.get(data.actorTo).createEmbeddedDocuments("Item",[item.toJSON()])&&actor.deleteEmbeddedDocuments("Item",[item.id])}catch(e){return ui.notifications.error(e),!1}return!0}class CoC7SystemSocket{static async callSocket(data){if(void 0!==data.listener){if(game.user.id===data.listener)switch(data.type){case"character-wizard":CoC7InvestigatorWizard.createCharacterFromData(data.payload);break;case"open-character":game.actors.get(data.payload).sheet.render(!0)}}else{if(game.user.isGM)switch(data.type){case OpposedCheckCard.defaultConfig.type:OpposedCheckCard.dispatch(data);break;case CombinedCheckCard.defaultConfig.type:CombinedCheckCard.dispatch(data);break;case"invoke":(await fromUuid(data.item))[data.method](data.data)}if("updateChar"===data.type)CoC7Utilities.updateCharSheets()}}static requestKeeperAction(data){if(game.user.isGM)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const keepers=game.users.filter((u=>u.active&&u.isGM));keepers.length?(data.listener=keepers[0].id,game.socket.emit("system.CoC7",data)):ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}static requestUserAction(data,{userId=null,errorIfMissing=!0,includeSelf=!0}={}){if(userId&&void 0!==userId)if(userId===game.user.id)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const user=game.users.get(userId);void 0!==user.id&&user.active?(data.listener=user.id,game.socket.emit("system.CoC7",data)):errorIfMissing&&ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingUser"))}else includeSelf&&CoC7SystemSocket.callSocket(data),game.socket.emit("system.CoC7",data)}}function _onLeftClick(event){return event.shiftKey}Hooks.on("renderSettingsConfig",((app,html,options)=>{const systemTab=$(app.form).find(".tab[data-tab=system]");systemTab.find("input[name=CoC7\\.displayInitDices]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleInitiative")+"</h2>"),systemTab.find("input[name=CoC7\\.stanbyGMRolls]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRoll")+"</h2>"),systemTab.find("input[name=CoC7\\.trustedCanModfyChatCard]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleChatCards")+"</h2>"),systemTab.find("input[name=CoC7\\.enableStatusIcons]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleScene")+"</h2>"),systemTab.find("input[name=CoC7\\.overrideGameArtwork]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleGameArtwork")+"</h2>"),systemTab.find("input[name=CoC7\\.displayPlayerNameOnSheet]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleSheet")+"</h2>"),systemTab.find("input[name=CoC7\\.disregardUsePerRound]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleWeapon")+"</h2>"),systemTab.find("input[name=CoC7\\.syncDice3d]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDiceSoNice")+"</h2>"),systemTab.find("input[name=CoC7\\.debugmode]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDeveloperDebug")+"</h2>"),systemTab.find("select[name=CoC7\\.boutOfMadnessSummaryTable]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRollTable")+"</h2>")})),Hooks.once("init",(async function(){game.CoC7={macros:{skillCheck:CoC7Utilities.skillCheckMacro,weaponCheck:CoC7Utilities.weaponCheckMacro,check:CoC7Utilities.checkMacro},cards:{DamageCard},dev:{dice:{alwaysCrit:!1,alwaysFumble:!1}},eras:(era,name)=>{COC7.eras[era]=name}},Combat.prototype.rollInitiative=rollInitiative})),function(...cardclass){Hooks.on("renderChatLog",((app,html,data)=>EnhancedChatCardLib.injectCSS(app,html,data))),Hooks.once("socketlib.ready",(function(){EnhancedChatCardLib.register(cardclass),EnhancedChatCardLib.socket=socketlib.registerSystem(game.system.id),EnhancedChatCardLib.socket.register("updateMessage",updateMessage),EnhancedChatCardLib.socket.register("GMUpdate",GMUpdate),EnhancedChatCardLib.socket.register("advise",advise)})),Hooks.on("renderChatMessage",((app,html,data)=>EnhancedChatCard.bindListeners(html)))}(ChaseObstacleCard),Hooks.on("renderCombatTracker",((app,html,data)=>CoC7Combat.renderCombatTracker(app,html,data))),Hooks.on("chatMessage",((html,content)=>{if(content.match(/^\/(cbr|cc)/i)){const commands=content.match(/(\d+)/g);return commands?new Roll("1d100").roll({async:!0}).then((r=>{const s=r.result,res=commands.map((m=>{let res="";return res=s<=1?game.i18n.localize("CoC7.CriticalSuccess"):s>=100?game.i18n.localize("CoC7.Fumble"):s<=m/5?game.i18n.localize("CoC7.ExtremeSuccess"):s<=m/2?game.i18n.localize("CoC7.HardSuccess"):s<=m?game.i18n.localize("CoC7.RegularSuccess"):s>=96&&m<50?game.i18n.localize("CoC7.Fumble"):game.i18n.localize("CoC7.Failure"),res+=" "+game.i18n.localize("CoC7.Value")+" "+m,res})).join(" / ");r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:res})})):ui.notifications.error("Incorrect usage of command"),!1}})),CoC7Hooks.listen(),Hooks.once("socketlib.ready",(function(){game.CoC7socket=socketlib.registerSystem("CoC7"),game.CoC7socket.register("gmcreatemessageas",gmcreatemessageas),game.CoC7socket.register("gmtradeitemto",gmtradeitemto)})),Hooks.once("setup",(function(){const toLocalize=["spellProperties","bookType","talentType","occupationProperties","statusType"];for(const o of toLocalize){const localized=Object.entries(COC7[o]).map((e=>[e[0],game.i18n.localize(e[1])]));COC7[o]=localized.reduce(((obj,e)=>(obj[e[0]]=e[1],obj)),{})}let effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.dead));-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/tombstone.svg"),effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.unconscious)),-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/knocked-out-stars.svg"),CONFIG.statusEffects.unshift({id:COC7.status.tempoInsane,label:"CoC7.BoutOfMadnessName",icon:"systems/CoC7/assets/icons/hanging-spider.svg"},{id:COC7.status.indefInsane,label:"CoC7.InsanityName",icon:"systems/CoC7/assets/icons/tentacles-skull.svg"},{id:COC7.status.criticalWounds,label:"CoC7.CriticalWounds",icon:"systems/CoC7/assets/icons/arm-sling.svg"},{id:COC7.status.dying,label:"CoC7.Dying",icon:"systems/CoC7/assets/icons/heart-beats.svg"})})),Hooks.on("createActiveEffect",((data,options,userId)=>{if(game.userId===userId&&void 0!==data.flags.core&&void 0!==data.flags.core.statusId)switch(data.flags.core.statusId){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.setCondition(data.flags.core.statusId,{forceValue:!0});break;case COC7.status.tempoInsane:{const realTime=data.flags.CoC7?.realTime;let duration=null;!0===realTime?duration=data.duration?.rounds:!1===realTime&&(duration=data.duration?.seconds,isNaN(duration)||(duration=Math.floor(duration/3600))),data.parent.setCondition(COC7.status.tempoInsane,{forceValue:!0,realTime,duration})}}})),Hooks.on("deleteActiveEffect",((data,options,userId)=>{if(game.userId===userId&&void 0!==data.flags.core&&void 0!==data.flags.core.statusId)switch(data.flags.core.statusId){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.unsetCondition(data.flags.core.statusId,{forceValue:!0})}})),Hooks.on("changeSidebarTab",(directory=>{if(directory instanceof ItemDirectory){const item=game.items.find((i=>"__CoC7InternalItem__"===i.name));if(item){const itemElement=directory._element.find(`[data-document-id='${item.id}']`);itemElement&&(itemElement[0].style.display="none")}}})),Hooks.on("hotbarDrop",((bar,data,slot)=>CoC7Utilities.createMacro(bar,data,slot))),Hooks.on("renderChatLog",((app,html,data)=>CoC7Chat.chatListeners(app,html,data))),Hooks.on("updateChatMessage",((chatMessage,chatData,diff,speaker)=>CoC7Chat.onUpdateChatMessage(chatMessage,chatData,diff,speaker))),Hooks.on("ready",(async()=>{function _tableSettingsChanged(table,id){game.CoC7.tables[table]="none"===id?null:game.tables.get(id)}await Updater.checkForUpdate(),function(){const body=$("body");document.addEventListener("click",CoC7ContextMenu.closeAll),body.on("click","a.coc7-inline-check",CoC7Check._onClickInlineRoll),document.addEventListener("mousedown",_onLeftClick)}(),game.CoC7.skillList=await(game.packs.get("CoC7.skills")?.getDocuments()),game.socket.on("system.CoC7",(async data=>{CoC7SystemSocket.callSocket(data)}));const tableChoice={none:"SETTINGS.LetKeeperDecide"};for(const t of game.tables)tableChoice[t._id]=t.name;game.settings.register("CoC7","boutOfMadnessSummaryTable",{name:"SETTINGS.BoutOfMadnessSummaryTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_Summary",id)}),game.settings.register("CoC7","boutOfMadnessRealTimeTable",{name:"SETTINGS.BoutOfMadnessRealTimeTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_RealTime",id)}),game.CoC7.tables={boutOfMadness_Summary:"none"===game.settings.get("CoC7","boutOfMadnessSummaryTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessSummaryTable")),boutOfMadness_RealTime:"none"===game.settings.get("CoC7","boutOfMadnessRealTimeTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessRealTimeTable"))}})),Hooks.on("renderCoC7ChaseSheet",((app,html,data)=>CoC7ChaseSheet.setScroll(app,html,data))),Hooks.on("closeCoC7ChaseSheet",((app,html)=>CoC7ChaseSheet.onClose(app,html))),Hooks.on("closeActorSheet",(characterSheet=>characterSheet.onCloseSheet())),Hooks.on("renderCoC7CreatureSheet",((app,html,data)=>CoC7CreatureSheet.forceAuto(app,html,data))),Hooks.on("renderCoC7NPCSheet",((app,html,data)=>CoC7NPCSheet.forceAuto(app,html,data))),Hooks.on("chatMessage",CoC7Utilities.ParseChatEntry),Hooks.on("getSceneControlButtons",(()=>{})),Hooks.on("renderItemSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderJournalPageSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderActorSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderActorSheet",CoC7CharacterSheet.renderSheet),Hooks.on("renderItemSheet",CoC7CharacterSheet.renderSheet),Hooks.on("getSceneControlButtons",CoC7Menu.getButtons),Hooks.on("renderSceneControls",CoC7Menu.renderControls),Hooks.on("dropCanvasData",CoC7Canvas.onDropSomething),Hooks.on("dropActorSheetData",(function(actor,sheet,data){if("Item"===data.type&&data.actorId){if(actor.data._id===data.actorId)return;let actorFrom=null;switch(actorFrom=data.sceneId&&data.tokenId?game.scenes.get(data.sceneId).tokens.get(data.tokenId).actor:game.actors.get(data.actorId),actor.data.type){case"character":case"npc":case"creature":if(!["chase"].includes(data.data.type))return;break;case"vehicle":return;case"container":if(!["book","item","spell","weapon"].includes(data.data.type))return}actorFrom&&actorFrom.deleteEmbeddedDocuments("Item",[data.data._id])}})),CONFIG.ui.settings=CoC7SettingsDirectory,CONFIG.ui.compendium=CoC7CompendiumDirectory,CONFIG.ui.actors=CoC7ActorDirectory})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxNQUFNdnZCLEdBQUcseUJBQTBCd2pFLFNBQVNveUIsWUFDNUNybUUsTUFBTXZ2QixHQUFHLHNCQUF1QndqRSxTQUFTcXlCLGdCQUV6Q3RtRSxNQUFNdnZCLEdBQUcsaUJBQWtCc2tFLFdBQVd3eEIsaUJBRXRDdm1FLE1BQU12dkIsR0FBRyxzQkVqZUYsU0FBNkJwZCxNQUFPOCtCLE1BQU81eEIsTUFDaEQsR0FBa0IsU0FBZEEsS0FBS2hCLE1BQW1CZ0IsS0FBSzZKLFFBQVMsQ0FDeEMsR0FBSS9XLE1BQU1rTixLQUFLNDJCLE1BQVE1MkIsS0FBSzZKLFFBQzFCLE9BRUYsSUFBSTYvQyxVQUFZLEtBTWhCLE9BSkVBLFVBREUxcEQsS0FBS3dELFNBQVd4RCxLQUFLeUQsUUFDWDdPLEtBQUttUSxPQUFPalEsSUFBSWtMLEtBQUt3RCxTQUFTakUsT0FBT3pLLElBQUlrTCxLQUFLeUQsU0FBUzNRLE1BRXZEOEIsS0FBSzJILE9BQU96SCxJQUFJa0wsS0FBSzZKLFNBRTNCL1csTUFBTWtOLEtBQUtoQixNQUNqQixJQUFLLFlBQ0wsSUFBSyxNQUNMLElBQUssV0FDSCxJQUFLLENBQUMsU0FBU3pJLFNBQVN5SixLQUFLQSxLQUFLaEIsTUFDaEMsT0FFRixNQUNGLElBQUssVUFDSCxPQUNGLElBQUssWUFDSCxJQUFLLENBQUMsT0FBUSxPQUFRLFFBQVMsVUFBVXpJLFNBQVN5SixLQUFLQSxLQUFLaEIsTUFDMUQsT0FHRjBxRCxXQUNGQSxVQUFVMWdCLHdCQUF3QixPQUFRLENBQUNocEMsS0FBS0EsS0FBSzQyQixLQUV6RCxDQUNGLElGZ2RBemdDLE9BQU9zSixHQUFHekssU0FBV2dnRixzQkFDckI3K0UsT0FBT3NKLEdBQUd5bEQsV0FBYWl3Qix3QkFDdkJoL0UsT0FBT3NKLEdBQUdsRCxPQUFTZzVFLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvZGljZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvaGVscGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3JvbGwtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL3JvbGwtY2FyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2ludGVyYWN0aXZlLWNoYXQtY2FyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9kYW1hZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmQtYWN0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NhbmRhdGEtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctY2hhdC1tZXNzYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbmNoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvcG9pbnQtc2VsZWN0aW9uLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jaGFyLXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY2hhci1yb2xsLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC1zcGVjLXNlbGVjdC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtc3BlY2lhbGl6YXRpb24tc2VsZWN0LWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC12YWx1ZS1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLXJlc29sdXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9yYW5nZWNvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvYWN0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy1saW5rLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctcGFyc2VyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9pdGVtLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdXRpbGl0aWVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYy1pZC1lZGl0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0aXZlLWVmZmVjdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29udGV4dC1tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2Jhc2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvbnBjLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NyZWF0ZS1teXRob3MtZW5jb3VudGVycy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2MtaWQtYmF0Y2guanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3VwZGF0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kaG9sZWhvdXNlX2ltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kcm9wLWNvYy1pZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvbWVudS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jYW52YXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NldHRpbmdzLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29tcGVuZGl1bS1kaXJlY3RvcnkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9yLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc3BlbGwvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvYm9vay9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb21tb24vY2hhdGNhcmRsaWIvc3JjL2NoYXRjYXJkbGliLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9wYXJ0aWNpcGFudC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9jaGFzZS1vYnN0YWNsZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvY2hhc2UvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2tpbGwvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3ZlaGljbGUvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kZWNhZGVyLWRpZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kZWNhZGVyLWRpZS1vdGhlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9nYW1lLXJ1bGVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvYXJjaGV0eXBlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9ib29rL3NoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvY2hhc2Uvc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0VjIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zaGVldHMvY29jNy1qb3VybmFsLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zaGVldHMvY29jNy1tYWNyby1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LXBsYXlsaXN0LWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2hlZXRzL2NvYzctcm9sbC10YWJsZS1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LXNjZW5lLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3NldHVwLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc2tpbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NwZWxsL3NoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc3RhdHVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvdGFsZW50LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL3ZlaGljbGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy93ZWFwb24tc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29tcGVuZGl1bS1maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29jLWlkLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9pbml0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvbG9hZC10ZW1wbGF0ZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItc2hlZXRzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2hhbmRsZWJhcnMtaGVscGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZHNuLWZhY2VzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3Rvb2x0aXBzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctdG91ci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdG91cnMvZW5hYmxlLXZhcmlhbnQtcnVsZXMtZW4uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWZyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZWFkeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9yZWdpc3Rlci10b3Vycy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1hY3Rvci1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLWNoYXQtbWVzc2FnZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLWl0ZW0tc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1wYXVzZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvZGljZS1zby1uaWNlLXJlYWR5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9kaWNlLXNvLW5pY2Utcm9sbC1zdGFydC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLXBsYXllci1saXN0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItc2V0dGluZ3MtY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy1zeXN0ZW0tc29ja2V0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb2M3LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9kaWNlYm90LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9kcm9wLWFjdG9yLXNoZWV0LWRhdGEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTmFtZXNwYWNlIENPQzcgQ29uZmlndXJhdGlvbiBWYWx1ZXNcbmV4cG9ydCBjb25zdCBDT0M3ID0ge31cblxuLy8gQ3VzdG9tIGNoYXRNZXNzYWdlXG4vLyBDT05GSUcuQ2hhdE1lc3NhZ2UudGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NoYXQtbWVzc2FnZS5odG1sJztcblxuLyoqXG4gKiBUaGUgc2V0IG9mIEVyYXMgdXNlZCB3aXRoaW4gdGhlIHN5c3RlbVxuICogQHR5cGUge09iamVjdH1cbiAqL1xuQ09DNy5lcmFzID0ge1xuICBzdGFuZGFyZDogJ0NvQzcuRXJhMTkyMCcsXG4gIG1vZGVybjogJ0NvQzcuRXJhTW9kZXJuJyxcbiAgbW9kZXJuUHVscDogJ0NvQzcuRXJhTW9kZXJuUHVscCcsXG4gIHB1bHA6ICdDb0M3LkVyYVB1bHAnLFxuICBkb3duRGFya2VyVHJhaWxzOiAnQ29DNy5FcmFEb3duRGFya2VyVHJhaWxzJyxcbiAgZG93bkRhcmtlclRyYWlsc1B1bHA6ICdDb0M3LkVyYURvd25EYXJrZXJUcmFpbHNQdWxwJyxcbiAgZGFya0FnZXM6ICdDb0M3LkVyYURhcmtBZ2VzJyxcbiAgZGFya0FnZXNQdWxwOiAnQ29DNy5FcmFEYXJrQWdlc1B1bHAnLFxuICByZWdlbmN5OiAnQ29DNy5FcmFSZWdlbmN5JyxcbiAgcmVnZW5jeVB1bHA6ICdDb0M3LkVyYVJlZ2VuY3lQdWxwJyxcbiAgLy8gUmVpZ24gb2YgVGVycm9yXG4gIGdhc0xpZ2h0OiAnQ29DNy5FcmFHYXNMaWdodCcsXG4gIGludmljdHVzOiAnQ29DNy5FcmFJbnZpY3R1cydcbn1cblxuQ09DNy5tb25ldGFyeUZvcm1hdEtleXMgPSB7XG4gIGRlY2ltYWxMZWZ0OiAnZGVjaW1hbExlZnQnLFxuICBkZWNpbWFsUmlnaHQ6ICdkZWNpbWFsUmlnaHQnLFxuICBpbnRlZ2VyTGVmdDogJ2ludGVnZXJMZWZ0JyxcbiAgaW50ZWdlclJpZ2h0OiAnaW50ZWdlclJpZ2h0JyxcbiAgbHNkOiAnbHNkJyxcbiAgcm9tYW46ICdyb21hbidcbn1cblxuQ09DNy5tb25ldGFyeUZvcm1hdHMgPSB7XG4gIGRlY2ltYWxMZWZ0OiAnQ29DNy5Nb25ldGFyeUZvcm1hdERlY2ltYWxMZWZ0JyxcbiAgZGVjaW1hbFJpZ2h0OiAnQ29DNy5Nb25ldGFyeUZvcm1hdERlY2ltYWxSaWdodCcsXG4gIGludGVnZXJMZWZ0OiAnQ29DNy5Nb25ldGFyeUZvcm1hdEludGVnZXJMZWZ0JyxcbiAgaW50ZWdlclJpZ2h0OiAnQ29DNy5Nb25ldGFyeUZvcm1hdEludGVnZXJSaWdodCcsXG4gIGxzZDogJ0NvQzcuTW9uZXRhcnlGb3JtYXRMc2QnLFxuICByb21hbjogJ0NvQzcuTW9uZXRhcnlGb3JtYXRSb21hbidcbn1cblxuQ09DNy5tb25ldGFyeVR5cGVLZXlzID0ge1xuICBub25lOiAnbm9uZScsXG4gIGFzc2VzOiAnYXNzZXMnLFxuICBzZXN0ZXJ0aWk6ICdzZXN0ZXJ0aWknLFxuICBxdWluYXJpaTogJ3F1aW5hcmlpJyxcbiAgZGVuYXJpaTogJ2RlbmFyaWknLFxuICBkOiAnZCcsXG4gIHM6ICdzJyxcbiAgdmFsdWU6ICd2YWx1ZScsXG4gIG11bHRpcGxpZXI6ICdtdWx0aXBsaWVyJ1xufVxuXG5DT0M3Lm1vbmV0YXJ5VHlwZXMgPSB7XG4gIG5vbmU6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVOb25lJyxcbiAgICBmaWx0ZXI6IFtdXG4gIH0sXG4gIGFzc2VzOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlQXNzZXMnLFxuICAgIGZpbHRlcjogWydyb21hbiddXG4gIH0sXG4gIHNlc3RlcnRpaToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZVNlc3RlcnRpaScsXG4gICAgZmlsdGVyOiBbJ3JvbWFuJ11cbiAgfSxcbiAgcXVpbmFyaWk6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVRdWluYXJpaScsXG4gICAgZmlsdGVyOiBbJ3JvbWFuJ11cbiAgfSxcbiAgZGVuYXJpaToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZURlbmFyaWknLFxuICAgIGZpbHRlcjogWydyb21hbiddXG4gIH0sXG4gIGQ6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVEZW5pZXJzJyxcbiAgICBmaWx0ZXI6IFsnbHNkJ11cbiAgfSxcbiAgczoge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZVNvdXMnLFxuICAgIGZpbHRlcjogWydsc2QnXVxuICB9LFxuICB2YWx1ZToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZU9uZScsXG4gICAgZmlsdGVyOiBbXVxuICB9LFxuICBtdWx0aXBsaWVyOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlQ3JlZGl0UmF0aW5nJyxcbiAgICBmaWx0ZXI6IFtdXG4gIH1cbn1cblxuQ09DNy5jaGFyYWN0ZXJpc3RpY3MgPSB7XG4gIHN0cjogJ0NvQzcuQ2hhcmFjU3RyJyxcbiAgY29uOiAnQ29DNy5DaGFyYWNDb24nLFxuICBzaXo6ICdDb0M3LkNoYXJhY1NpeicsXG4gIGRleDogJ0NvQzcuQ2hhcmFjRGV4JyxcbiAgYXBwOiAnQ29DNy5DaGFyYWNBcHAnLFxuICBpbnQ6ICdDb0M3LkNoYXJhY0ludCcsXG4gIHBvdzogJ0NvQzcuQ2hhcmFjUG93JyxcbiAgZWR1OiAnQ29DNy5DaGFyYWNFZHUnXG59XG5cbi8qKlxuICogVGhlIHNldCBvZiBTa2lsbHMgYXR0cmlidXRlcyB1c2VkIHdpdGhpbiB0aGUgc3lzdGVtXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5DT0M3LnNraWxsUHJvcGVydGllcyA9IHtcbiAgbm9hZGp1c3RtZW50czogJ0NvQzcuU2tpbGxOb0FkanVzdG1lbnRzJyxcbiAgbm94cGdhaW46ICdDb0M3LlNraWxsTm9YcEdhaW4nLFxuICBzcGVjaWFsOiAnQ29DNy5Ta2lsbFNwZWNpYWwnLFxuICByYXJpdHk6ICdDb0M3LlNraWxsUmFyaXR5JyxcbiAgcHVzaDogJ0NvQzcuU2tpbGxQdXNoJyxcbiAgY29tYmF0OiAnQ29DNy5Ta2lsbENvbWJhdCcsXG4gIGZpZ2h0aW5nOiAnQ29DNy5Ta2lsbEZpZ2h0aW5nJyxcbiAgZmlyZWFybTogJ0NvQzcuU2tpbGxGaXJlYXJtJyxcbiAgcmVxdWlyZXNuYW1lOiAnQ29DNy5Ta2lsbFJlcXVpcmVzTmFtZScsXG4gIGtlZXBiYXNldmFsdWU6ICdDb0M3LlNraWxsS2VlcEJhc2VWYWx1ZScsXG4gIHBpY2tuYW1lb25seTogJ0NvQzcuU2tpbGxQaWNrTmFtZU9ubHknLFxuICBvbmx5b25lOiAnQ29DNy5Ta2lsbFNwZWNpYWxpemF0aW9uSXNVbmlxdWUnXG59XG5cbkNPQzcud2VhcG9uUHJvcGVydGllcyA9IHtcbiAgbWVsZWU6ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5NZWxlZScsXG4gIHJuZ2Q6ICdDb0M3LldlYXBvblJuZ2QnLFxuICBtbnZyOiAnQ29DNy5XZWFwb25Qcm9wZXJ5TWFuZXV2ZXInLFxuICB0aHJvd246ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5UaHJvd24nLFxuICBzaG90Z3VuOiAnQ29DNy5XZWFwb24uUHJvcGVydHkuU2hvdGd1bicsXG4gIGRicmw6ICdDb0M3LldlYXBvbkRicmwnLFxuICBpbXBsOiAnQ29DNy5XZWFwb25JbXBsJyxcbiAgYnJzdDogJ0NvQzcuV2VhcG9uQnJzdCcsXG4gIGF1dG86ICdDb0M3LldlYXBvbkF1dG8nLFxuICBhaGRiOiAnQ29DNy5XZWFwb25BaGRiJyxcbiAgYWRkYjogJ0NvQzcuV2VhcG9uQWRkYicsXG4gIHNsbnQ6ICdDb0M3LldlYXBvblNsbnQnLFxuICBzcGNsOiAnQ29DNy5XZWFwb25TcGNsJyxcbiAgbW9udDogJ0NvQzcuV2VhcG9uTW9udCcsXG4gIGJsc3Q6ICdDb0M3LldlYXBvbkJsc3QnLFxuICBzdHVuOiAnQ29DNy5XZWFwb25TdHVuJyxcbiAgcmFyZTogJ0NvQzcuV2VhcG9uUmFyZScsXG4gIGJ1cm46ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5CdXJuJ1xufVxuXG5DT0M3LnNwZWxsUHJvcGVydGllcyA9IHtcbiAgY2FsbDogJ0NvQzcuQ2FsbFNwZWxsJyxcbiAgZGlzbWlzczogJ0NvQzcuRGlzbWlzc1NwZWxsJyxcbiAgY29udGFjdDogJ0NvQzcuQ29udGFjdFNwZWxsJyxcbiAgc3VtbW9uOiAnQ29DNy5TdW1tb25TcGVsbCcsXG4gIGJpbmQ6ICdDb0M3LkJpbmRTcGVsbCcsXG4gIGVuY2hhbnRtZW50OiAnQ29DNy5FbmNoYW50bWVudFNwZWxsJyxcbiAgZ2F0ZTogJ0NvQzcuR2F0ZVNwZWxsJyxcbiAgY29tYmF0OiAnQ29DNy5Db21iYXRTcGVsbCdcbn1cblxuQ09DNy5ib29rVHlwZSA9IHtcbiAgbXl0aG9zOiAnQ29DNy5NeXRob3NCb29rJyxcbiAgb2NjdWx0OiAnQ29DNy5PY2N1bHRCb29rJyxcbiAgb3RoZXI6ICdDb0M3Lk90aGVyJ1xufVxuXG5DT0M3LnRhbGVudFR5cGUgPSB7XG4gIHBoeXNpY2FsOiAnQ29DNy5QaHlzaWNhbFRhbGVudCcsXG4gIG1lbnRhbDogJ0NvQzcuTWVudGFsVGFsZW50JyxcbiAgY29tYmF0OiAnQ29DNy5Db21iYXRUYWxlbnQnLFxuICBtaXNjZWxsYW5lb3VzOiAnQ29DNy5NaXNjZWxsYW5lb3VzVGFsZW50JyxcbiAgYmFzaWM6ICdDb0M3LkJhc2ljVGFsZW50JyxcbiAgaW5zYW5lOiAnQ29DNy5JbnNhbmVUYWxlbnQnLFxuICBvdGhlcjogJ0NvQzcuT3RoZXJUYWxlbnQnXG59XG5cbkNPQzcuc3RhdHVzVHlwZSA9IHtcbiAgbWFuaWE6ICdDb0M3Lk1hbmlhJyxcbiAgcGhvYmlhOiAnQ29DNy5QaG9iaWEnXG59XG5cbkNPQzcub2NjdXBhdGlvblByb3BlcnRpZXMgPSB7XG4gIGNsYXNzaWM6ICdDb0M3LkNsYXNzaWMnLFxuICBsb3ZlY3JhZnRpYW46ICdDb0M3LkxvdmVjcmFmdGlhbicsXG4gIG1vZGVybjogJ0NvQzcuTW9kZXJuJyxcbiAgcHVscDogJ0NvQzcuUHVscCdcbn1cblxuQ09DNy5mb3JtdWxhID0ge31cblxuQ09DNy5mb3JtdWxhLmFjdG9yID0ge1xuICAnQFNUUic6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlJyxcbiAgJ0BDT04nOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmNvbi52YWx1ZScsXG4gICdAU0laJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUnLFxuICAnQERFWCc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlJyxcbiAgJ0BBUFAnOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmFwcC52YWx1ZScsXG4gICdASU5UJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUnLFxuICAnQFBPVyc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlJyxcbiAgJ0BFRFUnOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmVkdS52YWx1ZSdcbn1cblxuQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQgPSB7XG4gICdAU1RSJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUnLFxuICAnQENPTic6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlJyxcbiAgJ0BTSVonOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZScsXG4gICdAREVYJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxuICAnQEFQUCc6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuYXBwLnZhbHVlJyxcbiAgJ0BJTlQnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmludC52YWx1ZScsXG4gICdAUE9XJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnLFxuICAnQEVEVSc6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZWR1LnZhbHVlJ1xufVxuXG5DT0M3LnN0YXR1cyA9IHtcbiAgdGVtcG9JbnNhbmU6ICd0ZW1wb0luc2FuZScsXG4gIGluZGVmSW5zYW5lOiAnaW5kZWZJbnNhbmUnLFxuICB1bmNvbnNjaW91czogJ3VuY29uc2Npb3VzJyxcbiAgY3JpdGljYWxXb3VuZHM6ICdjcml0aWNhbFdvdW5kcycsXG4gIGR5aW5nOiAnZHlpbmcnLFxuICBwcm9uZTogJ3Byb25lJyxcbiAgZGVhZDogJ2RlYWQnXG59XG5cbkNPQzcubmV3Qm9va05hbWUgPSAnQ29DNy5OZXdCb29rTmFtZSdcbkNPQzcubmV3U2tpbGxOYW1lID0gJ0NvQzcuTmV3U2tpbGxOYW1lJ1xuQ09DNy5uZXdTcGVsbE5hbWUgPSAnQ29DNy5OZXdTcGVsbE5hbWUnXG5DT0M3Lm5ld0l0ZW1OYW1lID0gJ0NvQzcuTmV3SXRlbU5hbWUnXG5DT0M3Lm5ld1dlYXBvbk5hbWUgPSAnQ29DNy5OZXdXZWFwb25OYW1lJ1xuXG5DT0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCA9ICdDb0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbCdcblxuQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSA9ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuQ09DNy5maXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lID0gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcblxuQ09DNy5jb21iYXRDYXJkcyA9IHtcbiAgZmlnaHRCYWNrOiAnQ29DNy5GaWdodEJhY2snLFxuICBkb2RnZTogJ0NvQzcuRG9kZ2UnLFxuICBtYW5ldXZlcjogJ0NvQzcuTWFuZXV2ZXInLFxuICBub1Jlc3BvbnNlOiAnQ29DNy5Ob1Jlc3BvbnNlJ1xufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBDT05GSUcsIGdhbWUsIFJvbGwgKi9cblxuZXhwb3J0IGNsYXNzIENvQzdEaWNlIHtcbiAgc3RhdGljIGFzeW5jIHJvbGwgKG1vZGlmID0gMCwgcm9sbE1vZGUgPSBudWxsLCBoaWRlRGljZSA9IGZhbHNlKSB7XG4gICAgbGV0IGFsdGVybmF0aXZlRGljZSA9ICcnXG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGlmIChtb2RpZiA8IDApIHtcbiAgICAgICAgYWx0ZXJuYXRpdmVEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllUGVuYWx0eScpXG4gICAgICB9IGVsc2UgaWYgKG1vZGlmID4gMCkge1xuICAgICAgICBhbHRlcm5hdGl2ZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVCb251cycpXG4gICAgICB9XG4gICAgfVxuICAgIGxldCByb2xsXG4gICAgaWYgKFxuICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKVxuICAgICkge1xuICAgICAgcm9sbCA9IFJvbGwuZnJvbURhdGEoQ29DN0RpY2UuY3JpdDAxKVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzRnVtYmxlICYmXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdoaWRkZW5kZXZtZW51JylcbiAgICApIHtcbiAgICAgIHJvbGwgPSBSb2xsLmZyb21EYXRhKENvQzdEaWNlLmZ1bWJsZTk5KVxuICAgIH0gZWxzZSB7XG4gICAgICByb2xsID0gYXdhaXQgbmV3IFJvbGwoXG4gICAgICAgICcxZHQnICtcbiAgICAgICAgICAoYWx0ZXJuYXRpdmVEaWNlICE9PSAnJ1xuICAgICAgICAgICAgPyAnKzFkb1snICsgYWx0ZXJuYXRpdmVEaWNlICsgJ10nXG4gICAgICAgICAgICA6ICcrMWR0J1xuICAgICAgICAgICkucmVwZWF0KE1hdGguYWJzKG1vZGlmKSkgK1xuICAgICAgICAgICcrMWQxMCdcbiAgICAgICkucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgfVxuXG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgdW5pdDoge1xuICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgcmVzdWx0czogW11cbiAgICAgIH0sXG4gICAgICB0ZW5zOiB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByZXN1bHRzOiBbXVxuICAgICAgfSxcbiAgICAgIHRvdGFsOiAwLFxuICAgICAgcm9sbFxuICAgIH1cblxuICAgIGlmIChyb2xsTW9kZSkgcmVzdWx0LnJvbGxNb2RlID0gcm9sbE1vZGVcbiAgICBpZiAoaGlkZURpY2UpIHJlc3VsdC5oaWRlRGljZSA9IGhpZGVEaWNlXG4gICAgZm9yIChjb25zdCBkIG9mIHJvbGwuZGljZSkge1xuICAgICAgaWYgKGQgaW5zdGFuY2VvZiBDT05GSUcuRGljZS50ZXJtcy50KSB7XG4gICAgICAgIHJlc3VsdC50ZW5zLnJlc3VsdHMucHVzaChkLnRvdGFsKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnVuaXQudG90YWwgPSBkLnRvdGFsID09PSAxMCA/IDAgOiBkLnRvdGFsXG4gICAgICAgIHJlc3VsdC51bml0LnJlc3VsdHMucHVzaChyZXN1bHQudW5pdC50b3RhbClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG1vZGlmIDwgMCkge1xuICAgICAgcmVzdWx0LnRlbnMudG90YWwgPVxuICAgICAgICByZXN1bHQudW5pdC50b3RhbCA9PT0gMCAmJiByZXN1bHQudGVucy5yZXN1bHRzLmluY2x1ZGVzKDApXG4gICAgICAgICAgPyAxMDBcbiAgICAgICAgICA6IE1hdGgubWF4KC4uLnJlc3VsdC50ZW5zLnJlc3VsdHMpXG4gICAgfSBlbHNlIGlmIChyZXN1bHQudW5pdC50b3RhbCA9PT0gMCkge1xuICAgICAgY29uc3QgZGljZSA9IHJlc3VsdC50ZW5zLnJlc3VsdHMuZmlsdGVyKHQgPT4gdCA+IDApXG4gICAgICByZXN1bHQudGVucy50b3RhbCA9IGRpY2UubGVuZ3RoID09PSAwID8gMTAwIDogTWF0aC5taW4oLi4uZGljZSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0LnRlbnMudG90YWwgPSBNYXRoLm1pbiguLi5yZXN1bHQudGVucy5yZXN1bHRzKVxuICAgIH1cbiAgICByZXN1bHQudG90YWwgPSByZXN1bHQudW5pdC50b3RhbCArIHJlc3VsdC50ZW5zLnRvdGFsXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHNob3dSb2xsRGljZTNkIChyb2xsKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IHN5bmNEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3luY0RpY2UzZCcpXG5cbiAgICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgICB3aGlzcGVyOiBudWxsLFxuICAgICAgICBibGluZDogZmFsc2VcbiAgICAgIH1cbiAgICAgIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG5cbiAgICAgIGF3YWl0IGdhbWUuZGljZTNkLnNob3dGb3JSb2xsKFxuICAgICAgICByb2xsLFxuICAgICAgICBnYW1lLnVzZXIsXG4gICAgICAgIHN5bmNEaWNlLFxuICAgICAgICBjaGF0RGF0YS53aGlzcGVyLFxuICAgICAgICBjaGF0RGF0YS5ibGluZFxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjb21iaW5lZFJvbGwgKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zLnBvb2wgPSBvcHRpb25zLnBvb2wgPz8ge31cbiAgICBvcHRpb25zLnBvb2xbJzAnXSA9IGZhbHNlXG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9wdGlvbnMucG9vbCkubWFwKHYgPT4gcGFyc2VJbnQodiwgMTApKVxuICAgIGxldCBwZW5hbHR5RGljZSA9IE1hdGguYWJzKE1hdGgubWluKDAsIE1hdGgubWluKC4uLmtleXMpKSlcbiAgICBsZXQgYm9udXNEaWNlID0gTWF0aC5tYXgoMCwgTWF0aC5tYXgoLi4ua2V5cykpXG4gICAgY29uc3QgaGFzRFNOID0gZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZVxuXG4gICAgY29uc3QgcG9vbCA9IFtdXG4gICAgcG9vbC5wdXNoKCcxZHQrMWQxMCcpXG5cbiAgICBpZiAocGVuYWx0eURpY2UgPiAwKSB7XG4gICAgICBwb29sLnB1c2goXG4gICAgICAgIChoYXNEU05cbiAgICAgICAgICA/ICcrMWRvWycgKyBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVQZW5hbHR5JykgKyAnXSdcbiAgICAgICAgICA6ICcxZHQnXG4gICAgICAgICkucmVwZWF0KE1hdGguYWJzKHBlbmFsdHlEaWNlKSlcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGJvbnVzRGljZSA+IDApIHtcbiAgICAgIHBvb2wucHVzaChcbiAgICAgICAgKGhhc0RTTlxuICAgICAgICAgID8gJysxZG9bJyArIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZUJvbnVzJykgKyAnXSdcbiAgICAgICAgICA6ICcxZHQnXG4gICAgICAgICkucmVwZWF0KE1hdGguYWJzKGJvbnVzRGljZSkpXG4gICAgICApXG4gICAgfVxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBuZXcgUm9sbChwb29sLmpvaW4oJycpKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBncm91cHM6IHtcbiAgICAgICAgYmFzZURpZTogMCxcbiAgICAgICAgcGVuYWx0eURpY2U6IFtdLFxuICAgICAgICBib251c0RpY2U6IFtdXG4gICAgICB9LFxuICAgICAgdW5pdDogMCxcbiAgICAgIHJvbGxcbiAgICB9XG4gICAgbGV0IGJhc2VTZXQgPSBmYWxzZVxuICAgIGZvciAoY29uc3QgZCBvZiByb2xsLmRpY2UpIHtcbiAgICAgIGlmIChkIGluc3RhbmNlb2YgQ09ORklHLkRpY2UudGVybXMudCkge1xuICAgICAgICBpZiAoIWJhc2VTZXQpIHtcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJhc2VEaWUgPSBkLnRvdGFsXG4gICAgICAgICAgYmFzZVNldCA9IHRydWVcbiAgICAgICAgfSBlbHNlIGlmIChwZW5hbHR5RGljZSA+IDApIHtcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLnBlbmFsdHlEaWNlLnB1c2goZC50b3RhbClcbiAgICAgICAgICBwZW5hbHR5RGljZS0tXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzdWx0Lmdyb3Vwcy5ib251c0RpY2UucHVzaChkLnRvdGFsKVxuICAgICAgICAgIGJvbnVzRGljZS0tXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC51bml0ID0gZC50b3RhbCA9PT0gMTAgPyAwIDogZC50b3RhbFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IG91dHB1dCA9IHt9XG5cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvcHRpb25zLnBvb2wpIHtcbiAgICAgIG91dHB1dFtrZXldID0ge1xuICAgICAgICB1bml0OiB7XG4gICAgICAgICAgdG90YWw6IHJlc3VsdC51bml0LFxuICAgICAgICAgIHJlc3VsdHM6IFtyZXN1bHQudW5pdF1cbiAgICAgICAgfSxcbiAgICAgICAgdGVuczoge1xuICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICAgIH0sXG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByb2xsXG4gICAgICB9XG4gICAgICBjb25zdCBtb2RpZiA9IHBhcnNlSW50KGtleSwgMTApXG4gICAgICBsZXQgbW9kaWZpZXIgPSBtb2RpZlxuICAgICAgb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLnB1c2gocmVzdWx0Lmdyb3Vwcy5iYXNlRGllKVxuICAgICAgZm9yIChjb25zdCBvZmZzZXQgPSBNYXRoLmFicyhtb2RpZmllcik7IG1vZGlmaWVyIDwgMDsgbW9kaWZpZXIrKykge1xuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLnBlbmFsdHlEaWNlW21vZGlmaWVyICsgb2Zmc2V0XVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IG9mZnNldCA9IG1vZGlmaWVyOyBtb2RpZmllciA+IDA7IG1vZGlmaWVyLS0pIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLnB1c2goXG4gICAgICAgICAgcmVzdWx0Lmdyb3Vwcy5ib251c0RpY2VbTWF0aC5hYnMobW9kaWZpZXIgLSBvZmZzZXQpXVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAobW9kaWYgPCAwKSB7XG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMudG90YWwgPVxuICAgICAgICAgIG91dHB1dFtrZXldLnVuaXQudG90YWwgPT09IDAgJiYgb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLmluY2x1ZGVzKDApXG4gICAgICAgICAgICA/IDEwMFxuICAgICAgICAgICAgOiBNYXRoLm1heCguLi5vdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMpXG4gICAgICB9IGVsc2UgaWYgKG91dHB1dFtrZXldLnVuaXQudG90YWwgPT09IDApIHtcbiAgICAgICAgY29uc3QgZGljZSA9IG91dHB1dFtrZXldLnRlbnMucmVzdWx0cy5maWx0ZXIodCA9PiB0ID4gMClcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9IGRpY2UubGVuZ3RoID09PSAwID8gMTAwIDogTWF0aC5taW4oLi4uZGljZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMudG90YWwgPSBNYXRoLm1pbiguLi5vdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMpXG4gICAgICB9XG4gICAgICBvdXRwdXRba2V5XS50b3RhbCA9IG91dHB1dFtrZXldLnVuaXQudG90YWwgKyBvdXRwdXRba2V5XS50ZW5zLnRvdGFsXG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRcbiAgfVxuXG4gIC8vIFByZWRldGVybWluZWQgdmFsdWUgb2YgZGljZSwgdXNlZCBvbmx5IGZvciBERVYgYW5kIHRlc3QgcHVycG9zZXNcbiAgc3RhdGljIGZ1bWJsZTk5ID0ge1xuICAgIGNsYXNzOiAnUm9sbCcsXG4gICAgb3B0aW9uczoge30sXG4gICAgZGljZTogW10sXG4gICAgZm9ybXVsYTogJzFkdCArIDFkMTAnLFxuICAgIHRlcm1zOiBbXG4gICAgICB7XG4gICAgICAgIGNsYXNzOiAnQ29DN0RlY2FkZXJEaWUnLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBudW1iZXI6IDEsXG4gICAgICAgIGZhY2VzOiAxMCxcbiAgICAgICAgbW9kaWZpZXJzOiBbXSxcbiAgICAgICAgcmVzdWx0czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJlc3VsdDogOSxcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdPcGVyYXRvclRlcm0nLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBvcGVyYXRvcjogJysnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ0RpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiA5LFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgXSxcbiAgICB0b3RhbDogOTksXG4gICAgZXZhbHVhdGVkOiB0cnVlXG4gIH1cblxuICBzdGF0aWMgY3JpdDAxID0ge1xuICAgIGNsYXNzOiAnUm9sbCcsXG4gICAgb3B0aW9uczoge30sXG4gICAgZGljZTogW10sXG4gICAgZm9ybXVsYTogJzFkdCArIDFkMTAnLFxuICAgIHRlcm1zOiBbXG4gICAgICB7XG4gICAgICAgIGNsYXNzOiAnQ29DN0RlY2FkZXJEaWUnLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBudW1iZXI6IDEsXG4gICAgICAgIGZhY2VzOiAxMCxcbiAgICAgICAgbW9kaWZpZXJzOiBbXSxcbiAgICAgICAgcmVzdWx0czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJlc3VsdDogMTAsXG4gICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsYXNzOiAnT3BlcmF0b3JUZXJtJyxcbiAgICAgICAgb3B0aW9uczoge30sXG4gICAgICAgIGV2YWx1YXRlZDogdHJ1ZSxcbiAgICAgICAgb3BlcmF0b3I6ICcrJ1xuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdEaWUnLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBudW1iZXI6IDEsXG4gICAgICAgIGZhY2VzOiAxMCxcbiAgICAgICAgbW9kaWZpZXJzOiBbXSxcbiAgICAgICAgcmVzdWx0czogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJlc3VsdDogMSxcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfVxuICAgIF0sXG4gICAgdG90YWw6IDEsXG4gICAgZXZhbHVhdGVkOiB0cnVlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENPTlNULCBGb3JtQXBwbGljYXRpb24sIGdhbWUsIG1lcmdlT2JqZWN0LCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi9jb2M3LWxpbmsuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBpZDogJ2xpbmstY3JlYXRpb24nLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2FjdGl2ZS1lZmZlY3Qtc2hlZXQnXSxcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlTGluaycpLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogbnVsbCwgZHJvcFNlbGVjdG9yOiAnLmNvbnRhaW5lcicgfV0sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9saW5rLWNyZWF0aW9uLmh0bWwnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICB3aWR0aDogNTYwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy50YWJzJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuZWZmZWN0LW9wdGlvbnMnLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXRhaWxzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLy8gUHJlcGFyZSBjaGVjayB0eXBlXG4gICAgc2hlZXREYXRhLmNoZWNrVHlwZSA9IFtcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoZWNrJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUNoZWNrJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkl0ZW1XZWFwb24nKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnRUZGRUNULlRhYkVmZmVjdHMnKVxuICAgICAgfVxuICAgIF1cblxuICAgIC8vIFByZXBhcmUgJ2NoZWNrJyBsaW5rIHR5cGVcbiAgICBzaGVldERhdGEubGlua1R5cGUgPSBbXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuTElOS19UWVBFLkNIQVJBQ1RFUklTVElDLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljJylcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGtleTogQ29DN0xpbmsuTElOS19UWVBFLkFUVFJJQlVURSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuU0tJTEwsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGwnKVxuICAgICAgfVxuICAgIF1cblxuICAgIC8vIFByZXBhcmUgJ2NoZWNrJyAnYXR0cmlidXRlJyB0eXBlc1xuICAgIHNoZWV0RGF0YS5hdHRyaWJ1dGVUeXBlID0gW1xuICAgICAge1xuICAgICAgICBrZXk6ICdsY2snLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiAnc2FuJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgfVxuICAgIF1cblxuICAgIC8vIFByZXBhcmUgZWZmZWN0IG1vZGUgdHlwZXNcbiAgICBzaGVldERhdGEuZWZmZWN0TW9kZXMgPSBPYmplY3QuZW50cmllcyhDT05TVC5BQ1RJVkVfRUZGRUNUX01PREVTKS5yZWR1Y2UoXG4gICAgICAob2JqLCBlKSA9PiB7XG4gICAgICAgIG9ialtlWzFdXSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnRUZGRUNULk1PREVfJyArIGVbMF0pXG4gICAgICAgIHJldHVybiBvYmpcbiAgICAgIH0sXG4gICAgICB7fVxuICAgIClcblxuICAgIC8vIFByZXBhcmUgJ2NoZWNrJyAnY2hhcmFjdGVyaXN0aWMnIHR5cGVzXG4gICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljVHlwZSA9IENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpXG5cbiAgICBzaGVldERhdGEubGluayA9IHNoZWV0RGF0YS5vYmplY3QubGlua1xuXG4gICAgc2hlZXREYXRhLmZyb21HYW1lID0gc2hlZXREYXRhLmxpbmsuaXNJdGVtQ2hlY2sgfHwgc2hlZXREYXRhLmxpbmsuaXNTa2lsbENoZWNrXG5cbiAgICBzaGVldERhdGEuZnJvbURpcmVjdG9yeSA9IChzaGVldERhdGEub2JqZWN0Lmhhc0lEID09PSAnZnJvbURpcmVjdG9yeScpXG4gICAgc2hlZXREYXRhLmZyb21Db21wZW5kaXVtID0gKHNoZWV0RGF0YS5vYmplY3QuaGFzSUQgPT09ICdmcm9tQ29tcGVuZGl1bScpXG5cbiAgICBzaGVldERhdGEuaXNTZXRGcm9tR2FtZSA9IChzaGVldERhdGEubGluay5pZCAmJiAoc2hlZXREYXRhLmZyb21EaXJlY3RvcnkgfHwgc2hlZXREYXRhLmZyb21Db21wZW5kaXVtKSlcblxuICAgIHNoZWV0RGF0YS5kaWZmaWN1bHR5TGV2ZWwgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsXG5cbiAgICBzaGVldERhdGEuYWN0b3JOYW1lcyA9IHNoZWV0RGF0YS5vYmplY3QuYWN0b3JzLm1hcChhID0+IGEubmFtZSkuam9pbignLCAnKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ3NlbGVjdFtuYW1lPXR5cGVdLHNlbGVjdFtuYW1lPWNoZWNrXSxzZWxlY3RbbmFtZT1hdHRyaWJ1dGVLZXldLHNlbGVjdFtuYW1lPWNoYXJhY3RlcmlzdGljS2V5XSxpbnB1dFt0eXBlPWNoZWNrYm94XScpXG4gICAgICAuY2hhbmdlKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG5cbiAgICAvLyBIYW5kbGluZyBlZmZlY3RzXG4gICAgaHRtbC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKS5jbGljayh0aGlzLl9vbkVmZmVjdENvbnRyb2wuYmluZCh0aGlzKSlcbiAgfVxuXG4gIF9vbkNoYW5nZVN1Ym1pdCAoZXZlbnQpIHtcbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSkge1xuICAgICAgY2FzZSAnZnJvbUNvbXBlbmRpdW0nOlxuICAgICAgY2FzZSAnZnJvbURpcmVjdG9yeSc6XG4gICAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gdGhpcy5vYmplY3QuaGFzSUQgPyAnJyA6IGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gIH1cblxuICBfb25FZmZlY3RDb250cm9sIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgc3dpdGNoIChidXR0b24uZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRFZmZlY3RDaGFuZ2UoKVxuICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgYnV0dG9uLmNsb3Nlc3QoJy5lZmZlY3QtY2hhbmdlJykucmVtb3ZlKClcbiAgICAgICAgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX2FkZEVmZmVjdENoYW5nZSAoKSB7XG4gICAgY29uc3QgaWR4ID0gdGhpcy5vYmplY3QubGluay5lZmZlY3QuY2hhbmdlcy5sZW5ndGhcbiAgICByZXR1cm4gdGhpcy5zdWJtaXQoe1xuICAgICAgcHJldmVudENsb3NlOiB0cnVlLFxuICAgICAgdXBkYXRlRGF0YToge1xuICAgICAgICBbYGVmZmVjdC5jaGFuZ2VzLiR7aWR4fWBdOiB7XG4gICAgICAgICAga2V5OiAnJyxcbiAgICAgICAgICBtb2RlOiBDT05TVC5BQ1RJVkVfRUZGRUNUX01PREVTLkFERCxcbiAgICAgICAgICB2YWx1ZTogJydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBsZXQgaGFzRWZmZWN0ID0gZmFsc2VcbiAgICBjb25zdCBlZmZlY3QgPSB7XG4gICAgICBkdXJhdGlvbjoge30sXG4gICAgICBjaGFuZ2VzOiBbXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmb3JtRGF0YSkge1xuICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgY2FzZSAnY2hlY2tOYW1lJzpcbiAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgZm9ybURhdGEuY2hlY2tOYW1lKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2JsaW5kJzpcbiAgICAgICAgY2FzZSAnZGlmZmljdWx0eSc6XG4gICAgICAgIGNhc2UgJ2Rpc3BsYXlOYW1lJzpcbiAgICAgICAgY2FzZSAnaWNvbic6XG4gICAgICAgIGNhc2UgJ2lkJzpcbiAgICAgICAgY2FzZSAnbW9kaWZpZXInOlxuICAgICAgICBjYXNlICdwYWNrJzpcbiAgICAgICAgY2FzZSAnc2FuTWluJzpcbiAgICAgICAgY2FzZSAnc2FuTWF4JzpcbiAgICAgICAgY2FzZSAnc2FuUmVhc29uJzpcbiAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKGtleSwgZm9ybURhdGFba2V5XSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdoYXNNb2RpZmllcnMnOlxuICAgICAgICBjYXNlICdoYXNMYWJlbCc6XG4gICAgICAgIGNhc2UgJ2hhc0ljb24nOlxuICAgICAgICAgIHRoaXMub2JqZWN0W2tleV0gPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0LmxhYmVsJzpcbiAgICAgICAgICBlZmZlY3QubGFiZWwgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5pY29uJzpcbiAgICAgICAgICBlZmZlY3QuaWNvbiA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0LnRpbnQnOlxuICAgICAgICAgIGVmZmVjdC50aW50ID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QuZGlzYWJsZWQnOlxuICAgICAgICAgIGVmZmVjdC5kaXNhYmxlZCA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0LmR1cmF0aW9uLnNlY29uZHMnOlxuICAgICAgICAgIGVmZmVjdC5kdXJhdGlvbi5zZWNvbmRzID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QuZHVyYXRpb24ucm91bmRzJzpcbiAgICAgICAgICBlZmZlY3QuZHVyYXRpb24ucm91bmRzID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QuZHVyYXRpb24udHVybnMnOlxuICAgICAgICAgIGVmZmVjdC5kdXJhdGlvbi50dXJucyA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgIGNvbnN0IG1hdGNoID0ga2V5Lm1hdGNoKC9eZWZmZWN0XFwuY2hhbmdlc1xcLihcXGQrKVxcLmtleSQvKVxuICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgZWZmZWN0LmNoYW5nZXMucHVzaCh7XG4gICAgICAgICAgICAgIGtleTogZm9ybURhdGFba2V5XSxcbiAgICAgICAgICAgICAgbW9kZTogZm9ybURhdGFbJ2VmZmVjdC5jaGFuZ2VzLicgKyBtYXRjaFsxXSArICcubW9kZSddLFxuICAgICAgICAgICAgICB2YWx1ZTogZm9ybURhdGFbJ2VmZmVjdC5jaGFuZ2VzLicgKyBtYXRjaFsxXSArICcudmFsdWUnXVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhhc0VmZmVjdCkge1xuICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnb2JqZWN0JywgZWZmZWN0KVxuICAgIH1cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHRhcmdldCkge1xuICAgICAgc3dpdGNoICh0YXJnZXQubmFtZSkge1xuICAgICAgICBjYXNlICd0eXBlJzpcbiAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCdjaGVjaycsIHRhcmdldC52YWx1ZSlcbiAgICAgICAgICBpZiAodGFyZ2V0LnZhbHVlID09PSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCdsaW5rVHlwZScsIENvQzdMaW5rLkxJTktfVFlQRS5TS0lMTClcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCAnJylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnY2hlY2snOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2xpbmtUeXBlJywgdGFyZ2V0LnZhbHVlKVxuICAgICAgICAgIGlmICh0YXJnZXQudmFsdWUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5DSEFSQUNURVJJU1RJQykge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpWzBdLmtleSlcbiAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC52YWx1ZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLkFUVFJJQlVURSkge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsICdsY2snKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgJycpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2F0dHJpYnV0ZUtleSc6XG4gICAgICAgIGNhc2UgJ2NoYXJhY3RlcmlzdGljS2V5JzpcbiAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgdGFyZ2V0LnZhbHVlKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3N1Ym1pdCcpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5zdWJtaXR0ZXIuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgICAgICBjYXNlICdjbGlwYm9hcmQnOlxuICAgICAgICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQodGhpcy5vYmplY3QubGluay5saW5rKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdjaGF0JzpcbiAgICAgICAgICAgIENvQzdMaW5rLnRvQ2hhdE1lc3NhZ2UodGhpcy5vYmplY3QubGluay5vYmplY3QpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ3doaXNwZXItb3duZXInOlxuICAgICAgICAgICAgQ29DN0xpbmsudG9XaGlzcGVyTWVzc2FnZSh0aGlzLm9iamVjdC5saW5rLm9iamVjdCwgdGhpcy5vYmplY3QuYWN0b3JzKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICd3aGlzcGVyLXNlbGVjdGVkJzpcbiAgICAgICAgICAgIGlmICghY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTm9Ub2tlbnNTZWxlY3RlZCcpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBDb0M3TGluay50b1doaXNwZXJNZXNzYWdlKHRoaXMub2JqZWN0Lmxpbmsub2JqZWN0LCBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQuZmlsdGVyKHQgPT4gdC5hY3Rvci5vd25lcnMubGVuZ3RoKS5tYXAodCA9PiB0LmFjdG9yKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCkge1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICBpZiAoZGF0YS50eXBlID09PSAnQ29DN0xpbmsnKSB7XG4gICAgICB0aGlzLnNldExpbmsoYXdhaXQgQ29DN0xpbmsuZnJvbURyb3BEYXRhKGRhdGEpKVxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKChkYXRhLnR5cGUgPT09ICdGb2xkZXInICYmIGRhdGEuZG9jdW1lbnROYW1lID09PSAnQWN0b3InKSB8fCBbJ0l0ZW0nLCAnQWN0b3InXS5pbmNsdWRlcyhkYXRhLnR5cGUpKSB7XG4gICAgICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgZGF0YS5kb2N1bWVudE5hbWUgPz8gZGF0YS50eXBlKVxuICAgICAgICBpZiAoZGF0YS5kb2N1bWVudE5hbWUgPz8gZGF0YS50eXBlID09PSAnQWN0b3InKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuYWN0b3JzID0gZGF0YUxpc3QuZmlsdGVyKGEgPT4gYS5vd25lcnMubGVuZ3RoKVxuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YUxpc3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgaWYgKFsnc2tpbGwnLCAnd2VhcG9uJ10uaW5jbHVkZXMoZGF0YUxpc3RbMF0udHlwZSkpIHtcbiAgICAgICAgICAgIGlmIChkYXRhTGlzdFswXS5wYWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gJ2Zyb21Db21wZW5kaXVtJ1xuICAgICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCdwYWNrJywgZGF0YUxpc3RbMF0ucGFjaylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gJ2Zyb21EaXJlY3RvcnknXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCdpZCcsIGRhdGFMaXN0WzBdLmlkKVxuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsIGRhdGFMaXN0WzBdLm5hbWUpXG4gICAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNldExpbmsgKGxpbmspIHtcbiAgICB0aGlzLm9iamVjdC5saW5rID0gbGlua1xuICAgIGlmIChsaW5rLnBhY2sgIT09ICcnKSB7XG4gICAgICB0aGlzLm9iamVjdC5oYXNJRCA9ICdmcm9tQ29tcGVuZGl1bSdcbiAgICB9IGVsc2UgaWYgKGxpbmsuaWQgIT09ICcnKSB7XG4gICAgICB0aGlzLm9iamVjdC5oYXNJRCA9ICdmcm9tRGlyZWN0b3J5J1xuICAgIH1cbiAgICBpZiAobGluay5kaWZmaWN1bHR5ICE9PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgfHwgcGFyc2VJbnQobGluay5tb2RpZmllciwgMTApICE9PSAwKSB7XG4gICAgICB0aGlzLm9iamVjdC5oYXNNb2RpZmllcnMgPSB0cnVlXG4gICAgfVxuICAgIGlmIChsaW5rLmRpc3BsYXlOYW1lICE9PSAnJykge1xuICAgICAgdGhpcy5vYmplY3QuaGFzTGFiZWwgPSB0cnVlXG4gICAgfVxuICAgIGlmIChsaW5rLmljb24gIT09ICcnKSB7XG4gICAgICB0aGlzLm9iamVjdC5oYXNJY29uID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGxpbmtEYXRhID0ge30sIG9wdGlvbiA9IHt9KSB7XG4gICAgY29uc3Qgb2JqZWN0ID0gbWVyZ2VPYmplY3Qoe1xuICAgICAgbGluazogbnVsbCxcbiAgICAgIGhhc0lEOiAnJyxcbiAgICAgIGhhc01vZGlmaWVyczogZmFsc2UsXG4gICAgICBoYXNMYWJlbDogZmFsc2UsXG4gICAgICBoYXNJY29uOiBmYWxzZSxcbiAgICAgIGFjdG9yczogW11cbiAgICB9LCBvcHRpb24pXG4gICAgY29uc3QgZGlhbG9nID0gbmV3IENvQzdDb250ZW50TGlua0RpYWxvZyhvYmplY3QsIHt9KVxuICAgIGRpYWxvZy5zZXRMaW5rKGF3YWl0IENvQzdMaW5rLmZyb21Ecm9wRGF0YShsaW5rRGF0YSkpXG4gICAgZGlhbG9nLnJlbmRlcih0cnVlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgQ09OU1QsIGR1cGxpY2F0ZSwgZnJvbVV1aWQsIGdhbWUsIFJheSwgVG9rZW4sIHVpICovXG5cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuLyoqXG4gKiBSZXR1cm4gPGE+IGVsZW1lbnQgb2YgYSByb2xsIGluc3RhbmNlLiBmb3VuZHJ5LmpzIHJlZjpUZXh0RWRpdG9yLl9jcmVhdGVJbmxpbmVSb2xsXG4gKiBAcGFyYW0ge1JvbGx9IHJvbGwgICAgICBUaGUgcm9sbCBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUlubGluZVJvbGwgKHJvbGwpIHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBjbHM6IFsnaW5saW5lLXJvbGwnXSxcbiAgICBkYXRhc2V0OiB7fVxuICB9XG5cbiAgdHJ5IHtcbiAgICBkYXRhLmNscy5wdXNoKCdpbmxpbmUtcmVzdWx0JylcbiAgICBkYXRhLnJlc3VsdCA9IHJvbGwudG90YWxcbiAgICBkYXRhLnRpdGxlID0gcm9sbC5mb3JtdWxhXG4gICAgZGF0YS5kYXRhc2V0LnJvbGwgPSBlc2NhcGUoSlNPTi5zdHJpbmdpZnkocm9sbCkpXG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvLyBDb25zdHJ1Y3QgYW5kIHJldHVybiB0aGUgZm9ybWVkIGxpbmsgZWxlbWVudFxuICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgYS50aXRsZSA9IGRhdGEudGl0bGVcbiAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5kYXRhc2V0KSkge1xuICAgIGEuZGF0YXNldFtrXSA9IHZcbiAgfVxuICBhLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhcyBmYS1kaWNlLWQyMFwiPjwvaT4gJHtkYXRhLnJlc3VsdH1gXG4gIHJldHVybiBhXG59XG5cbi8qKlxuICogRnVuY3Rpb24gdXNlZCBmb3IgSlNPTi5zdHJpbmdpZnkgcmVwbGFjZXIuXG4gKiBFeGNsdWRlIGFueSBrZXkgc3RhcnRpbmcgd2l0aCBfXG4gKiBAcGFyYW0geyp9IGtleSAgICAgVGhlIG9iamVjdCdzIHByb3BlcnR5IEtleVxuICogQHBhcmFtIHsqfSB2YWx1ZSAgIFRoZSBhc3NvY2lhdGVkIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleGNsdWRlXyAoa2V5LCB2YWx1ZSkge1xuICAvLyBjb252ZXJ0IFJlZ0V4cCB0byBzdHJpbmdcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfJykpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkIC8vIHJlbW92ZSBmcm9tIHJlc3VsdFxuICB9XG4gIHJldHVybiB2YWx1ZSAvLyByZXR1cm4gYXMgaXNcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB1c2VkIGZvciBKU09OLnN0cmluZ2lmeSByZXBsYWNlci5cbiAqIEV4Y2x1ZGUgYW55IGtleSBzdGFydGluZyB3aXRoIF9fXG4gKiBAcGFyYW0geyp9IGtleSAgICAgVGhlIG9iamVjdCdzIHByb3BlcnR5IEtleVxuICogQHBhcmFtIHsqfSB2YWx1ZSAgIFRoZSBhc3NvY2lhdGVkIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleGNsdWRlX18gKGtleSwgdmFsdWUpIHtcbiAgLy8gY29udmVydCBSZWdFeHAgdG8gc3RyaW5nXG4gIGlmIChrZXkuc3RhcnRzV2l0aCgnX18nKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG4vKipcbiAqIFJldHVybiB0cnVlIGlzIENUUkwga2V5IGlzIHByZXNzZWRcbiAqIFVzZWQgZm9yIE1BQyBjb21wYXQuXG4gKiBAcGFyYW0ge1MuRXZlbnR9IGV2ZW50XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDdHJsS2V5IChldmVudCkge1xuICBpZiAoZXZlbnQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cbiAgcmV0dXJuIChcbiAgICBldmVudC5tZXRhS2V5IHx8XG4gICAgZXZlbnQuY3RybEtleSB8fFxuICAgIGV2ZW50LmtleUNvZGUgPT09IDkxIHx8XG4gICAgZXZlbnQua2V5Q29kZSA9PT0gMjI0XG4gIClcbn1cblxuZXhwb3J0IGNsYXNzIGNoYXRIZWxwZXIge1xuICBzdGF0aWMgaHlwaGVuVG9DYW1lbENhc2UgKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvLShbYS16XSkvZywgZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgcmV0dXJuIHN0cmluZ1sxXS50b1VwcGVyQ2FzZSgpXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVNZXNzYWdlICh0aXRsZSwgbWVzc2FnZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgbWVzc2FnZURhdGEgPSB7fVxuICAgIG1lc3NhZ2VEYXRhLmZsYXZvciA9IHRpdGxlXG4gICAgbWVzc2FnZURhdGEuc3BlYWtlciA9IG9wdGlvbnMuc3BlYWtlciB8fCBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBpZiAob3B0aW9ucy53aGlzcGVyKSB7XG4gICAgICBtZXNzYWdlRGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgIG1lc3NhZ2VEYXRhLndoaXNwZXIgPSBvcHRpb25zLndoaXNwZXJcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnJvbGwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBtZXNzYWdlRGF0YS5yb2xsID0gb3B0aW9ucy5yb2xsXG4gICAgICBtZXNzYWdlRGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLlJPTExcbiAgICAgIG1lc3NhZ2VEYXRhLnJvbGxNb2RlID0gQ09OU1QuRElDRV9ST0xMX01PREVTLlNFTEZcbiAgICB9XG4gICAgbWVzc2FnZURhdGEudXNlciA9IGdhbWUudXNlci5pZFxuICAgIG1lc3NhZ2VEYXRhLmNvbnRlbnQgPSBtZXNzYWdlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUobWVzc2FnZURhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGNhbWVsQ2FzZVRvSHlwaGVuIChzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoLyhbQS1aXSkvZywgZnVuY3Rpb24gKHN0cmluZykge1xuICAgICAgcmV0dXJuICctJyArIHN0cmluZy50b0xvd2VyQ2FzZSgpXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gbnVsbFxuICAgIC8vIENhc2UgMCAtIGEgZG9jdW1lbnQgVXVpZFxuICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRG9jdW1lbnRVdWlkKGtleSkpIHtcbiAgICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRG9jdW1lbnRVdWlkUGFjayhrZXkpKSByZXR1cm4gZnJvbVV1aWQoa2V5KSAvLyBUT0RPIENoZWNrIHdlIGNhbiBkbyB0aGF0XG4gICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5TZnJvbVV1aWQoa2V5KVxuICAgIH1cblxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoa2V5KVxuICAgICAgcmV0dXJuIHRva2VuPy5hY3RvclxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldFNwZWFrZXJGcm9tS2V5IChhY3RvcktleSkge1xuICAgIGNvbnN0IHNwZWFrZXIgPSB7fVxuICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIGlmIChhY3RvcktleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBhY3RvcktleS5zcGxpdCgnLicpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgc3BlYWtlci50b2tlbiA9IHRva2VuSWRcbiAgICAgIHNwZWFrZXIuc2NlbmUgPSBzY2VuZUlkXG4gICAgICBpZiAoYWN0b3IudG9rZW4/Lm5hbWUpIHNwZWFrZXIuYWxpYXMgPSBhY3Rvci50b2tlbi5uYW1lXG4gICAgICBzcGVha2VyLmFjdG9yID0gYWN0b3IuaWRcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlci5hY3RvciA9IGFjdG9yS2V5XG4gICAgICBzcGVha2VyLmFsaWFzID0gYWN0b3IubmFtZVxuICAgIH1cbiAgICByZXR1cm4gc3BlYWtlclxuICB9XG5cbiAgc3RhdGljIGF0dGFjaE9iamVjdFRvRWxlbWVudCAob2JqZWN0LCBlbGVtZW50LCBvYmplY3ROYW1lID0gJycpIHtcbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgT2JqZWN0LmtleXMob2JqZWN0KSkge1xuICAgICAgaWYgKCFwcm9wLnN0YXJ0c1dpdGgoJ18nKSkge1xuICAgICAgICBpZiAodHlwZW9mIG9iamVjdFtwcm9wXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBjaGF0SGVscGVyLmF0dGFjaE9iamVjdFRvRWxlbWVudChcbiAgICAgICAgICAgIG9iamVjdFtwcm9wXSxcbiAgICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgICBgJHtvYmplY3ROYW1lfToke3Byb3B9OmBcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWxlbWVudC5kYXRhc2V0W2Ake29iamVjdE5hbWV9JHtwcm9wfWBdID0gb2JqZWN0W3Byb3BdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0T2JqZWN0RnJvbUVsZW1lbnQgKG9iamVjdCwgZWxlbWVudCkge1xuICAgIGZ1bmN0aW9uIGRlc2VyaWFsaXplIChvYmosIGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnOicpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBrZXkuc2xpY2UoMSlcbiAgICAgICAgY29uc3Qgb2JqUHJvcCA9IHMuc2xpY2Uocy5pbmRleE9mKCc6JykgKyAxKVxuICAgICAgICBjb25zdCBvYmpOYW1lID0gcy5zdWJzdHJpbmcoMCwgcy5pbmRleE9mKCc6JykpXG4gICAgICAgIGlmICh0eXBlb2Ygb2JqW29iak5hbWVdID09PSAndW5kZWZpbmVkJykgb2JqW29iak5hbWVdID0ge31cbiAgICAgICAgZGVzZXJpYWxpemUob2JqW29iak5hbWVdLCBvYmpQcm9wLCB2YWx1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gJ3RydWUnKSBvYmpba2V5XSA9IHRydWVcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09ICdmYWxzZScpIG9ialtrZXldID0gZmFsc2VcbiAgICAgICAgZWxzZSBpZiAoTnVtYmVyKHZhbHVlKS50b1N0cmluZygpID09PSB2YWx1ZSkgb2JqW2tleV0gPSBOdW1iZXIodmFsdWUpXG4gICAgICAgIGVsc2Ugb2JqW2tleV0gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZWxlbWVudCB8fCAhb2JqZWN0KSByZXR1cm5cbiAgICBmb3IgKGNvbnN0IHByb3Agb2YgT2JqZWN0LmtleXMoZWxlbWVudC5kYXRhc2V0KSkge1xuICAgICAgaWYgKHByb3AgPT09ICd0ZW1wbGF0ZScpIHJldHVyblxuICAgICAgZGVzZXJpYWxpemUob2JqZWN0LCBwcm9wLCBlbGVtZW50LmRhdGFzZXRbcHJvcF0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldFRva2VuRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgY29uc3QgdG9rZW5Eb2MgPSBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0/LnRva2VuXG4gICAgICAgIHJldHVybiB0b2tlbkRvYy5vYmplY3QgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICAgIGlmICghdG9rZW4uc2NlbmUpIHRva2VuLnNjZW5lID0gZHVwbGljYXRlKHNjZW5lLmRvY3VtZW50KVxuICAgICAgICByZXR1cm4gdG9rZW5cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoa2V5KVxuICAgICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JUb2tlbihhY3RvcilcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JUb2tlbiAoYWN0b3IpIHtcbiAgICBpZiAoIWFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBhY3Rvci50b2tlbiB8fCBhY3Rvci5wcm90b3R5cGVUb2tlblxuICAgIC8qKioqKioqKioqKioqKioqKioqL1xuICAgIC8vIC8vIENhc2UgMCAtIEFjdG9yIGlzIGEgdG9rZW4gKHN5bnRoZXRpYyBhY3RvciksIHJldHVybiB0aGF0IHRva2VuLlxuICAgIC8vIGlmKGFjdG9yLmlzVG9rZW4pIHJldHVybiBhY3Rvci50b2tlbjtcbiAgICAvLyBlbHNle1xuICAgIC8vICAvLyBDYXNlIDEgLSBBY3RvciBpcyBub3QgYSB0b2tlbiwgZmluZCBpZiBhIHRva2VuIGV4aXN0IGZvciB0aGF0IGFjdG9yLlxuICAgIC8vICBjb25zdCBhY3RvclRva2VucyA9IGFjdG9yLmdldEFjdGl2ZVRva2VucygpO1xuICAgIC8vICBpZiggYWN0b3JUb2tlbnMubGVuZ3RoKXtcbiAgICAvLyAgICAvLyBDYXNlIDEuMSAtIElmIGhlIGhhcyBvbmx5IG9uZSBUb2tlbiByZXR1cm4gaXQuXG4gICAgLy8gICAgaWYoIDEgPT09IGFjdG9yVG9rZW5zLmxlbmd0aCkgcmV0dXJuIGFjdG9yVG9rZW5zWzBdO1xuXG4gICAgLy8gICAgLy8gQ2FzZSAxLjIgLSBBY3RvciBoYXMgbXVsdGlwbGUgdG9rZW5zLCBmaW5kIGlmIG9uZSBvZiB0aGVtIGlzIHRoZSBjb250cm9sbGVkIHRva2VuLlxuICAgIC8vICAgIGNvbnN0IGNvbnRyb2xsZWRUb2tlbnMgPSBhY3RvclRva2Vucy5maWx0ZXIoIHQgPT4gdC5fY29udHJvbGxlZCk7XG4gICAgLy8gICAgaWYoIGNvbnRyb2xsZWRUb2tlbnMubGVuZ3RoKXtcbiAgICAvLyAgICAgIC8vIFJldHVybiB0aGUgMXN0IGNvbnRyb2xsZWQgdG9rZW4sIHJpc2UgYSB3YXJuaW5nIGlmIGhlIGhhcyBtdWx0aXBsZSBjb250cm9sbGVkIHRva2Vucy5cbiAgICAvLyAgICAgIGlmKCB2ZXJib3NlICYmIGNvbnRyb2xsZWRUb2tlbnMubGVuZ3RoID4gMSkgdWkubm90aWZpY2F0aW9ucy53YXJuKCBgQWN0b3IgJHthY3Rvci5uYW1lfSBoYXMgJHtjb250cm9sbGVkVG9rZW5zLmxlbmd0aH0gY29udHJvbGxlZCB0b2tlbnMuIFVzaW5nIHRoZSBmaXJzdCBmb3VuZGApO1xuICAgIC8vICAgICAgcmV0dXJuIGNvbnRyb2xsZWRUb2tlbnNbMF07XG4gICAgLy8gICAgfVxuXG4gICAgLy8gICAgLy8gQ2FzZSAxLjMgYWN0b3IgZG9lc24ndCBoYXZlIGFueSBhY3RpdmUgdG9rZW4uIFJldHVybiB0aGUgZmlyc3QgdmFsaWQgdG9rZW4gZm9yIHRoYXQgYWN0b3IgYW5kIHJhaXNlIGEgd2FybmluZy5cbiAgICAvLyAgICBpZiggdmVyYm9zZSkgdWkubm90aWZpY2F0aW9ucy53YXJuKCBgQWN0b3IgJHthY3Rvci5uYW1lfSBkb2Vzbid0IGhhdmUgYW55IGNvbnRyb2xsZWQgdG9rZW4uIFVzaW5nIGZpcnN0IHRva2VuIGZvdW5kLmApO1xuICAgIC8vICAgIHJldHVybiBhY3RvclRva2Vuc1swXTtcbiAgICAvLyAgfVxuXG4gICAgLy8gIGlmKCB2ZXJib3NlKSB1aS5ub3RpZmljYXRpb25zLmVycm9yKCBgQ291bGQgbm90IGZpbiBhbnkgdG9rZW4gZm9yICR7YWN0b3IubmFtZX0uYCk7XG4gICAgLy8gIHJldHVybiBudWxsO1xuICAgIC8vIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckltZ0Zyb21LZXkgKGFjdG9yS2V5KSB7XG4gICAgaWYgKCFhY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlVG9rZW4nKSkge1xuICAgICAgLy8gVHJ5IHRvIGZpbmQgYSB0b2tlbi5cbiAgICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoYWN0b3JLZXkpXG4gICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgaWYgKCh0b2tlbi5kb2N1bWVudCB8fCB0b2tlbikudGV4dHVyZS5zcmMpIHtcbiAgICAgICAgICBpZiAoKHRva2VuLmRvY3VtZW50IHx8IHRva2VuKS50ZXh0dXJlLnNyYy5pbmRleE9mKCcqJykgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gKHRva2VuLmRvY3VtZW50IHx8IHRva2VuKS50ZXh0dXJlLnNyY1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlVG9rZW4nKSkge1xuICAgICAgLy8gaWYgbm8gdG9rZW4gZm91bmQgZm9yIHRoYXQgYWN0b3IgcmV0dXJuIHRoZSBwcm90b3R5cGUgdG9rZW4gaW1hZ2UuXG4gICAgICBpZiAoYWN0b3IucHJvdG90eXBlVG9rZW4pIHtcbiAgICAgICAgaWYgKGFjdG9yLnByb3RvdHlwZVRva2VuLnRleHR1cmUuc3JjKSB7XG4gICAgICAgICAgaWYgKGFjdG9yLnByb3RvdHlwZVRva2VuLnRleHR1cmUuc3JjPy5pbmRleE9mKCcqJykgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmNcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFjdG9yLmltZ1xuICB9XG5cbiAgc3RhdGljIGdldERpc3RhbmNlIChzdGFydFRva2VuLCBlbmRUb2tlbikge1xuICAgIC8vIHN0YXJ0VG9rZW4udXBkYXRlU291cmNlKCk7XG4gICAgLy8gY2FudmFzLnNpZ2h0LmluaXRpYWxpemVUb2tlbnMoKTtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgZW5kVG9rZW4uY2VudGVyID09PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGVuZFRva2VuLmlkICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgaWYgKHN0YXJ0VG9rZW4uc2NlbmU/LmlkIHx8IGZhbHNlKSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHN0YXJ0VG9rZW4uc2NlbmUuaWQpXG4gICAgICAgIGlmICh0eXBlb2Ygc2NlbmU/LnRva2VucyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCB0b2tlbnMgPSBzY2VuZT8udG9rZW5zXG4gICAgICAgICAgICAuZmlsdGVyKHRva2VuID0+IHRva2VuLmFjdG9yLmlkID09PSBlbmRUb2tlbi5kYXRhLmRvY3VtZW50LmlkKVxuICAgICAgICAgICAgLm1hcCh0b2tlbiA9PiB0b2tlbi5vYmplY3QpXG4gICAgICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIGVuZFRva2VuID0gdG9rZW5zWzBdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGxldCBkaXN0YW5jZSA9IHtcbiAgICAgIGdyaWRVbml0OiAwLFxuICAgICAgdmFsdWU6IDAsXG4gICAgICB1bml0OiBjYW52YXMuc2NlbmUuZ3JpZC51bml0c1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygc3RhcnRUb2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBzdGFydFRva2VuLmNlbnRlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBlbmRUb2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5jZW50ZXIgIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCByYXkgPSBuZXcgUmF5KHN0YXJ0VG9rZW4uY2VudGVyLCBlbmRUb2tlbi5jZW50ZXIpXG4gICAgICBjb25zdCBzZWdtZW50ID0gW3sgcmF5IH1dXG4gICAgICBkaXN0YW5jZSA9IHtcbiAgICAgICAgZ3JpZFVuaXQ6IHJheS5kaXN0YW5jZSAvIGNhbnZhcy5zY2VuZS5ncmlkLnNpemUsXG4gICAgICAgIC8vIHZhbHVlOiAocmF5LmRpc3RhbmNlL2NhbnZhcy5zY2VuZS5kYXRhLmdyaWQpKmNhbnZhcy5zY2VuZS5kYXRhLmdyaWREaXN0YW5jZSxcbiAgICAgICAgdmFsdWU6IGNhbnZhcy5ncmlkLm1lYXN1cmVEaXN0YW5jZXMoc2VnbWVudCwge1xuICAgICAgICAgIGdyaWRTcGFjZXM6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2dyaWRTcGFjZXMnKVxuICAgICAgICB9KVswXSxcbiAgICAgICAgdW5pdDogY2FudmFzLnNjZW5lLmdyaWQudW5pdHNcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXN0YW5jZUVsZXZhdGlvbicpKSB7XG4gICAgICAgIGNvbnN0IGVsZXZhdGlvbiA9IE1hdGguYWJzKFxuICAgICAgICAgIChzdGFydFRva2VuLmRvY3VtZW50LmVsZXZhdGlvbiB8fCAwKSAtIChlbmRUb2tlbi5kb2N1bWVudC5lbGV2YXRpb24gfHwgMClcbiAgICAgICAgKVxuICAgICAgICBkaXN0YW5jZS52YWx1ZSA9IE1hdGguc3FydChcbiAgICAgICAgICBkaXN0YW5jZS52YWx1ZSAqIGRpc3RhbmNlLnZhbHVlICsgZWxldmF0aW9uICogZWxldmF0aW9uXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZURpc3RhbmNlQ2FsY3VsYXRpb25GYWlsdXJlJylcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGRpc3RhbmNlXG4gIH1cblxuICBzdGF0aWMgdG9ZYXJkcyAoZGlzdGFuY2UpIHtcbiAgICBzd2l0Y2ggKGRpc3RhbmNlLnVuaXQpIHtcbiAgICAgIGNhc2UgJ2Z0JzpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlIC8gM1xuXG4gICAgICBjYXNlICd5ZCc6XG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZVxuXG4gICAgICBjYXNlICdtJzpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBkaXN0YW5jZS52YWx1ZVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN1JvbGwge1xuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCByb2xsRGl2ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCdkaXYuZGljZS1yb2xsJylcbiAgICBpZiAoIXJvbGxEaXYpIHJldHVybiBudWxsXG5cbiAgICBjb25zdCByb2xsID0gbmV3IENvQzdSb2xsKClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHJvbGwsIHJvbGxEaXYpXG5cbiAgICByZXR1cm4gcm9sbFxuICB9XG5cbiAgZ2V0IHJlc3VsdFR5cGUgKCkge1xuICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gcGFyc2VJbnQodGhpcy5zdWNjZXNzTGV2ZWwpXG4gICAgc3dpdGNoICh0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZTpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRnVtYmxlJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWlsdXJlJylcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yS2V5KSByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAodGhpcy5pdGVtSWQgJiYgdGhpcy5hY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc2tpbGwgKCkge1xuICAgIGlmICh0aGlzLnNraWxsSWQgJiYgdGhpcy5hY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuc2tpbGxJZClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc2hvd0RpY2VSb2xsICgpIHtcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgY29uc3QgZGljZVJlc3VsdHMgPSBbXVxuICAgICAgZm9yIChjb25zdCBkaWVSZXN1bHQgb2YgdGhpcy5kaWNlcy50ZW5zKSB7XG4gICAgICAgIGRpY2VSZXN1bHRzLnB1c2goZGllUmVzdWx0LnZhbHVlID09PSAxMDAgPyAwIDogZGllUmVzdWx0LnZhbHVlIC8gMTApXG4gICAgICB9XG4gICAgICBkaWNlUmVzdWx0cy5wdXNoKHRoaXMuZGljZXMudW5pdC52YWx1ZSlcblxuICAgICAgY29uc3QgZGljZURhdGEgPSB7XG4gICAgICAgIGZvcm11bGE6IGAke3RoaXMuZGljZXMudGVucy5sZW5ndGh9ZDEwMCsxZDEwYCxcbiAgICAgICAgcmVzdWx0czogZGljZVJlc3VsdHMsXG4gICAgICAgIHdoaXNwZXI6IG51bGwsXG4gICAgICAgIGJsaW5kOiBmYWxzZVxuICAgICAgfVxuICAgICAgZ2FtZS5kaWNlM2Quc2hvdyhkaWNlRGF0YSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUVsZW1lbnQgKGVsZW1lbnQsIG9iamVjdCA9IG51bGwpIHtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVyblxuICAgIGNvbnN0IHJvbGwgPSBvYmplY3QgfHwgbmV3IENvQzdSb2xsKClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHJvbGwsIGVsZW1lbnQpXG4gICAgcm9sbC5kaWNlcyA9IHtcbiAgICAgIHRlbnM6IFtdLFxuICAgICAgdW5pdDoge31cbiAgICB9XG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChcbiAgICAgIHJvbGwuZGljZXMsXG4gICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJlc3VsdCcpXG4gICAgKVxuICAgIHJvbGwuZGljZXMuaGFzQm9udXMgPSByb2xsLmRpY2VNb2RpZmllciAhPT0gMFxuICAgIHJvbGwuZGljZXMuYm9udXMgPSBNYXRoLmFicyhyb2xsLmRpY2VNb2RpZmllcilcbiAgICByb2xsLmRpY2VzLmJvbnVzVHlwZSA9XG4gICAgICByb2xsLmRpY2VNb2RpZmllciA8IDBcbiAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllclBlbmFsdHknKVxuICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyQm9udXMnKVxuICAgIGNvbnN0IHRlbkRpY2UgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW4tZGljZScpXG4gICAgaWYgKHRlbkRpY2UpIHtcbiAgICAgIGZvciAoY29uc3QgZCBvZiB0ZW5EaWNlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJykpIHtcbiAgICAgICAgY29uc3QgZGllID0ge1xuICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcbiAgICAgICAgICBpc01heDogZmFsc2UsXG4gICAgICAgICAgaXNNaW46IGZhbHNlLFxuICAgICAgICAgIHZhbHVlOiAtMVxuICAgICAgICB9XG4gICAgICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoZGllLCBkKVxuICAgICAgICByb2xsLmRpY2VzLnRlbnMucHVzaChkaWUpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHVuaXREaWUgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0LWRpZScpXG4gICAgICA/IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXQtZGllJykucXVlcnlTZWxlY3RvcignbGknKVxuICAgICAgOiBudWxsXG4gICAgcm9sbC5kaWNlcy51bml0LnZhbHVlID0gdW5pdERpZSA/IHBhcnNlSW50KHVuaXREaWUuZGF0YXNldC52YWx1ZSkgOiBudWxsXG5cbiAgICByb2xsLmluY3JlYXNlU3VjY2VzcyA9IFtdXG4gICAgY29uc3QgaW5jcmVhc2VTdWNjZXNzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaW5jcmVhc2Utc3VjY2VzcycpXG4gICAgaWYgKGluY3JlYXNlU3VjY2VzcyAmJiBpbmNyZWFzZVN1Y2Nlc3MucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJykpIHtcbiAgICAgIGZvciAoY29uc3QgaXNsIG9mIGluY3JlYXNlU3VjY2Vzcy5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSkge1xuICAgICAgICBjb25zdCBuZXdTdWNjZXNMZXZlbCA9IHt9XG4gICAgICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQobmV3U3VjY2VzTGV2ZWwsIGlzbClcbiAgICAgICAgcm9sbC5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXdTdWNjZXNMZXZlbClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocm9sbC5sdWNrTmVlZGVkKSB7XG4gICAgICByb2xsLmx1Y2tOZWVkZWRUeHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZW5kTHVjaycsIHtcbiAgICAgICAgbHVja05lZWRlZFZhbHVlOiByb2xsLmx1Y2tOZWVkZWRcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICghb2JqZWN0KSByZXR1cm4gcm9sbFxuICB9XG5cbiAgc3RhdGljIGdldEZyb21DaGVjayAoY2hlY2spIHtcbiAgICBjb25zdCByb2xsID0gbmV3IENvQzdSb2xsKClcblxuICAgIHJvbGwucm9sbFR5cGUgPSBjaGVjay5yb2xsVHlwZVxuICAgIHJvbGwuc2lkZSA9IGNoZWNrLnNpZGVcbiAgICByb2xsLmFjdGlvbiA9IGNoZWNrLmFjdGlvblxuICAgIHJvbGwucmVmTWVzc2FnZUlkID0gY2hlY2sucmVmTWVzc2FnZUlkXG4gICAgcm9sbC5yZWZlcmVuY2VNZXNzYWdlSWQgPSBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWRcblxuICAgIHJvbGwuc3VjY2Vzc0xldmVsID0gY2hlY2suc3VjY2Vzc0xldmVsXG4gICAgcm9sbC5kaWZmaWN1bHR5ID0gY2hlY2suZGlmZmljdWx0eVxuICAgIHJvbGwuc2tpbGxJZCA9IGNoZWNrLnNraWxsID8gY2hlY2suc2tpbGwuaWQgOiBudWxsXG4gICAgcm9sbC5pdGVtSWQgPSBjaGVjay5pdGVtID8gY2hlY2suaXRlbS5pZCA6IG51bGxcbiAgICByb2xsLmRpY2VNb2QgPSBjaGVjay5kaWNlTW9kaWZpZXJcbiAgICByb2xsLnZhbHVlID0gcGFyc2VJbnQoY2hlY2sucmF3VmFsdWUpXG4gICAgcm9sbC5mdW1ibGUgPSBjaGVjay5pc0Z1bWJsZVxuICAgIHJvbGwuY3JpdGljYWwgPSBjaGVjay5pc0NyaXRpY2FsXG4gICAgcm9sbC5jaGFyYWN0ZXJpc3RpYyA9IGNoZWNrLmNoYXJhY3RlcmlzdGljID8gY2hlY2suY2hhcmFjdGVyaXN0aWMgOiBudWxsXG4gICAgcm9sbC5yZXN1bHQgPSBjaGVjay5kaWNlLnRvdGFsXG5cbiAgICByb2xsLmFjdG9yS2V5ID0gY2hlY2suYWN0b3IudG9rZW5LZXkgLy8gUkVGQUNUT1JJTkcgKDIpXG5cbiAgICBpZiAoY2hlY2suYWN0b3IuaXNUb2tlbikge1xuICAgICAgcm9sbC50b2tlbklkID0gY2hlY2suYWN0b3IudG9rZW5LZXkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICByb2xsLmFjdG9ySWQgPSBudWxsXG4gICAgfSBlbHNlIHtcbiAgICAgIHJvbGwudG9rZW5LZXkgPSBudWxsXG4gICAgICByb2xsLmFjdG9ySWQgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICB9XG5cbiAgICByZXR1cm4gcm9sbFxuICB9XG5cbiAgc3RhdGljIGF0dGFjaENoZWNrVG9FbGVtZW50IChodG1sRWxlbWVudCwgY2hlY2spIHtcbiAgICBjb25zdCByb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNoZWNrKGNoZWNrKVxuICAgIHJvbGwuYXR0YWNoVG9FbGVtZW50KGh0bWxFbGVtZW50KVxuXG4gICAgcmV0dXJuIHJvbGxcbiAgfVxuXG4gIGF0dGFjaFRvRWxlbWVudCAoaHRtbEVsZW1lbnQpIHtcbiAgICBjaGF0SGVscGVyLmF0dGFjaE9iamVjdFRvRWxlbWVudCh0aGlzLCBodG1sRWxlbWVudClcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN0RhbWFnZSB7XG4gIHN0YXRpYyBnZXRNYWluRGllIChkYW1hZ2VTdHJpbmcpIHtcbiAgICBpZiAoZGFtYWdlU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2QyMCcpKSByZXR1cm4gJ2QyMCdcbiAgICBpZiAoZGFtYWdlU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2QxMicpKSByZXR1cm4gJ2QxMidcbiAgICBpZiAoZGFtYWdlU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2QxMCcpKSByZXR1cm4gJ2QxMCdcbiAgICBpZiAoZGFtYWdlU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Q4JykpIHJldHVybiAnZDgnXG4gICAgaWYgKGRhbWFnZVN0cmluZy50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdkNCcpKSByZXR1cm4gJ2Q0J1xuICAgIHJldHVybiAnZDYnXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUVsZW1lbnQgKGVsZW1lbnQsIG9iamVjdCA9IG51bGwpIHtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVyblxuICAgIGNvbnN0IGRhbWFnZSA9IG9iamVjdCB8fCB7fVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoZGFtYWdlLCBlbGVtZW50KVxuICAgIGNvbnN0IHJvbGxzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yb2xscycpLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJylcbiAgICBkYW1hZ2Uucm9sbHMgPSBbXVxuICAgIGZvciAoY29uc3QgciBvZiByb2xscykge1xuICAgICAgY29uc3Qgcm9sbCA9IHt9XG4gICAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHJvbGwsIHIpXG4gICAgICBkYW1hZ2Uucm9sbHMucHVzaChyb2xsKVxuICAgIH1cblxuICAgIGlmICghb2JqZWN0KSByZXR1cm4gZGFtYWdlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSAqL1xuXG5pbXBvcnQgeyBDb0M3Q2hhdE1lc3NhZ2UgfSBmcm9tICcuL2NvYzctY2hhdC1tZXNzYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBSb2xsRGlhbG9nIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAob3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwgPSB7fVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLnVua25vd24gPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC5oYXJkID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIC8vIGlmKCB1bmRlZmluZWQgPT0gb3B0aW9ucy5hc2tWYWx1ZSkgb3B0aW9ucy5hc2tWYWx1ZSA9IHRydWU7XG4gICAgaWYgKG9wdGlvbnMubmFtZSAmJiAhb3B0aW9ucy5kaXNwbGF5TmFtZSkgb3B0aW9ucy5kaXNwbGF5TmFtZSA9IG9wdGlvbnMubmFtZVxuICAgIGNvbnN0IHVua25vd25EaWZmaWN1bHR5RGVmYXVsdCA9XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5JykgPT09ICd1bmtub3duJ1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBhbGxvd0ZsYXREaWNlTW9kaWZpZXI6XG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93RmxhdERpY2VNb2RpZmllcicpICYmXG4gICAgICAgICFvcHRpb25zLmRpc2FibGVGbGF0RGljZU1vZGlmaWVyLFxuICAgICAgYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXI6XG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJykgJiZcbiAgICAgICAgIW9wdGlvbnMuZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllcixcbiAgICAgIGRpZmZpY3VsdHk6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsXG4gICAgICB1bmtub3duRGlmZmljdWx0eURlZmF1bHQsXG4gICAgICBoaWRlRGlmZmljdWx0eTogb3B0aW9ucy5oaWRlRGlmZmljdWx0eSA/PyBmYWxzZSxcbiAgICAgIG9wdGlvbnNcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIG9wdGlvbnMuY2FyZFR5cGUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAoIW9wdGlvbnMuZm9yY2VkQ2FyZFR5cGUgPz8gdHJ1ZSlcbiAgICApIHtcbiAgICAgIGRhdGEuY2FyZFR5cGVzID0gQ29DN0NoYXRNZXNzYWdlLmNhcmRUeXBlcyhvcHRpb25zKVxuICAgIH1cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2JvbnVzLmh0bWwnLFxuICAgICAgZGF0YVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXG4gICAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQm9udXNTZWxlY3Rpb25XaW5kb3dOYW1lZCcsIHtcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvbnVzU2VsZWN0aW9uV2luZG93JyksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICByb2xsOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxEaWNlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI2JvbnVzLXJvbGwtZm9ybScpKVxuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmb3JtRGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6ICdyb2xsJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG4vLyBpbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uLy4uL2FjdG9ycy9hY3Rvci5qcyc7XG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIFJvbGxDYXJkIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMucm9sbHMgPSBbXVxuICAgIHRoaXMuaW5pdGlhdG9yID0gbnVsbFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZSlcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2UgKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxuICAgIGlmICghY2FyZEVsZW1lbnQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21IVE1MQ2FyZEVsZW1lbnQgKGNhcmQpIHtcbiAgICBjb25zdCBjYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoY2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZnJvbURhdGEoY2FyZERhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbURhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjYXJkID0gT2JqZWN0LmFzc2lnbihuZXcgdGhpcygpLCBkYXRhKVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjYXJkLnJvbGxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKGNhcmQucm9sbHNbaW5kZXhdPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgICAgY2FyZC5yb2xsc1tpbmRleF0gPSBPYmplY3QuYXNzaWduKG5ldyBDb0M3Q2hlY2soKSwgY2FyZC5yb2xsc1tpbmRleF0pXG4gICAgICAgIGlmIChjYXJkLnJvbGxzW2luZGV4XS5yb2xsZWQpIHtcbiAgICAgICAgICBjYXJkLnJvbGxzW2luZGV4XS5faHRtbFJvbGwgPSBhd2FpdCBjYXJkLnJvbGxzW2luZGV4XS5nZXRIdG1sUm9sbCgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3Qgc3BhbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAoc3BhbiAmJiBzcGFuLmNsYXNzTGlzdC5jb250YWlucygnZ20tc2VsZWN0LW9ubHknKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBtZXNzYWdlID0gc3Bhbi5jbG9zZXN0KCcuY2hhdC1tZXNzYWdlJylcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZUlkKG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCBmbGFnID0gc3Bhbi5kYXRhc2V0LmZsYWdcbiAgICBpZiAoIWZsYWcpIHJldHVyblxuICAgIGNvbnN0IHRvZ2dsZSA9IHNwYW4uY2xvc2VzdCgnLnRvZ2dsZScpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIGNhcmQudG9nZ2xlRmxhZyhmbGFnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICAgIGZvciAoY29uc3QgYiBvZiBidXR0b25zKSB7XG4gICAgICAgIGNhcmQudW5zZXRGbGFnKGIuZGF0YXNldC5mbGFnKVxuICAgICAgfVxuICAgICAgY2FyZC5zZXRGbGFnKGZsYWcpXG4gICAgfVxuICAgIGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGRpc3BhdGNoIChkYXRhKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBsZXQgbWVzc2FnZXMgPSB1aS5jaGF0LmNvbGxlY3Rpb24uZmlsdGVyKG1lc3NhZ2UgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUgPT09IG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICd0eXBlJykgJiZcbiAgICAgICAgICBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnc3RhdGUnKSAhPT0gJ3Jlc29sdmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoWydjb21iaW5lZENhcmQnXS5pbmNsdWRlcyh0aGlzLmRlZmF1bHRDb25maWcudHlwZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnaW5pdGlhdG9yJykgPT09IGRhdGEucm9sbC5pbml0aWF0b3JcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGgpIHtcbiAgICAgICAgLy8gT2xkIG1lc3NhZ2VzIGNhbid0IGJlIHVzZWQgaWYgbWVzc2FnZSBpcyBtb3JlIHRoYW4gYSBkYXkgb2xkIG1hcmsgaXQgYXMgcmVzb2x2ZWRcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUobWVzc2FnZXNbMF0udGltZXN0YW1wKVxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpXG4gICAgICAgIGNvbnN0IHRpbWVEaWZmU2VjID0gKG5vdyAtIHRpbWVzdGFtcCkgLyAxMDAwXG4gICAgICAgIGlmICgyNCAqIDYwICogNjAgPCB0aW1lRGlmZlNlYykge1xuICAgICAgICAgIGF3YWl0IG1lc3NhZ2VzWzBdLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuICAgICAgICAgIG1lc3NhZ2VzID0gW11cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBsZXQgY2FyZFxuICAgICAgaWYgKCFtZXNzYWdlcy5sZW5ndGgpIGNhcmQgPSBuZXcgdGhpcygpXG4gICAgICBlbHNlIGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlKG1lc3NhZ2VzWzBdKVxuICAgICAgaWYgKHR5cGVvZiBkYXRhLl9yb2xsTW9kZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY2FyZC5fcm9sbE1vZGUgPSBkYXRhLl9yb2xsTW9kZVxuICAgICAgfVxuICAgICAgYXdhaXQgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgfSBlbHNlIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMuY29uZmlnLnRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQoaHRtbClcbiAgICBodG1sQ2FyZEVsZW1lbnRbMF0uZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5kYXRhU3RyaW5nKVxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSh0aGlzLmNvbmZpZy50aXRsZSksXG4gICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnRbMF0ub3V0ZXJIVE1MLFxuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgIHR5cGU6IHRoaXMuY29uZmlnLnR5cGUsXG4gICAgICAgICAgc3RhdGU6ICdpbml0aWF0ZWQnLFxuICAgICAgICAgIGluaXRpYXRvcjogdGhpcy5pbml0aWF0b3JcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGF3YWl0IHRoaXMuY29tcHV0ZSgpXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkge1xuICAgICAgYXdhaXQgdGhpcy50b01lc3NhZ2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy5jb25maWcudGVtcGxhdGUsIHRoaXMpXG4gICAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgICAvLyBBdHRhY2ggdGhlIHNhbkNoZWNrQ2FyZCBvYmplY3QgdG8gdGhlIG1lc3NhZ2UuXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5kYXRhU3RyaW5nKVxuXG4gICAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2UuXG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgICAgaWYgKHRoaXMuY2xvc2VkKSBhd2FpdCBjaGF0TWVzc2FnZS5zZXRGbGFnKCdDb0M3JywgJ3N0YXRlJywgJ3Jlc29sdmVkJylcblxuICAgICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgICAgfSlcbiAgICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgICAgcmV0dXJuIG1zZ1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVJvbGwgKGRhdGEpIHtcbiAgICBpZiAoIWRhdGEuZnJvbUdNKSB7XG4gICAgICBPYmplY3QuYXNzaWduKHRoaXMucm9sbHNbZGF0YS5yYW5rXSwgZGF0YS5yb2xsKVxuICAgIH1cbiAgfVxuXG4gIGFkZFJvbGxEYXRhIChkYXRhKSB7XG4gICAgY29uc3QgY2hlY2sgPSBPYmplY3QuYXNzaWduKG5ldyBDb0M3Q2hlY2soKSwgZGF0YS5yb2xsKVxuICAgIHRoaXMucm9sbHMucHVzaChjaGVjaylcbiAgICBpZiAodGhpcy5jb25maWcudHlwZSA9PT0gJ2NvbWJpbmVkQ2FyZCcpIHtcbiAgICAgIHRoaXMuaW5pdGlhdG9yID0gZGF0YS5yb2xsLmluaXRpYXRvclxuICAgIH1cbiAgfVxuXG4gIGFkZFJvbGwgKGRhdGEpIHtcbiAgICB0aGlzLnJvbGxzLnB1c2goZGF0YSlcbiAgfVxuXG4gIHJlbW92ZVJvbGwgKHJhbmspIHtcbiAgICB0aGlzLnJvbGxzLnNwbGljZShyYW5rLCAxKVxuICB9XG5cbiAgc2V0RmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIWZsYWdOYW1lICYmICEoJC50eXBlKGZsYWdOYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICB0aGlzW2ZsYWdOYW1lXSA9IHRydWVcbiAgfVxuXG4gIHVuc2V0RmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIWZsYWdOYW1lICYmICEoJC50eXBlKGZsYWdOYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICB0aGlzW2ZsYWdOYW1lXSA9IGZhbHNlXG4gIH1cblxuICB0b2dnbGVGbGFnIChmbGFnTmFtZSkge1xuICAgIHRoaXNbZmxhZ05hbWVdID0gIXRoaXNbZmxhZ05hbWVdXG4gIH1cblxuICBnZXQgbWVzc2FnZSAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlXG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMuX21lc3NhZ2VJZClcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZSAoeCkge1xuICAgIHRoaXMuX21lc3NhZ2UgPSB4XG4gIH1cblxuICBnZXQgbWVzc2FnZUlkICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gdGhpcy5fbWVzc2FnZUlkXG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlLmlkXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2VJZCAoeCkge1xuICAgIHRoaXMuX21lc3NhZ2VJZCA9IHhcbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgc3RhdGljIGdldCBkZWZhdWx0Q29uZmlnICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXhjbHVkZTogWydfYWN0b3InLCAnX3NraWxsJywgJ19pdGVtJywgJ19tZXNzYWdlJywgJ19odG1sUm9sbCddLFxuICAgICAgZXhjbHVkZVN0YXJ0V2l0aDogJ19fJ1xuICAgIH1cbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBnZXQgd2lubmVycyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucm9sbHMuZmlsdGVyKHIgPT4gci53aW5uZXIpXG4gIH1cblxuICBnZXQgd2lubmVyICgpIHtcbiAgICBpZiAodGhpcy53aW5uZXJzLmxlbmd0aCkgcmV0dXJuIHRoaXMud2lubmVyc1swXVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBsb29zZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb2xscy5maWx0ZXIociA9PiAhci53aW5uZXIpXG4gIH1cblxuICBnZXQgbG9vc2VyICgpIHtcbiAgICBpZiAodGhpcy5sb29zZXJzLmxlbmd0aCkgcmV0dXJuIHRoaXMubG9vc2Vyc1swXVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBoYXNXaW5uZXIgKCkge1xuICAgIGlmICh0aGlzLndpbm5lcnMubGVuZ3RoID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBpc0tlZXBlciAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIGdldCBkYXRhICgpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmRhdGFTdHJpbmcpXG4gIH1cblxuICBnZXQgZGF0YVN0cmluZyAoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5leGNsdWRlPy5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5jb25maWcuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBBdWRpb0hlbHBlciwgQ09ORklHLCBnYW1lLCBtZXJnZU9iamVjdCAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBSb2xsQ2FyZCB9IGZyb20gJy4vcm9sbC1jYXJkLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29tYmluZWRDaGVja0NhcmQgZXh0ZW5kcyBSb2xsQ2FyZCB7XG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVybmVycyAoaHRtbCkge1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQuY29tYmluZWQgLnRvZ2dsZS1zd2l0Y2gnLFxuICAgICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIClcbiAgICAvLyBodG1sLmZpbmQoJy5yb2xsLWNhcmQgYScpLmNsaWNrKGFzeW5jIChldmVudCkgPT4gQ29tYmluZWRDaGVja0NhcmQuX29uQ2xpY2soIGV2ZW50KSk7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5jb21iaW5lZCBhJyxcbiAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLl9vbkNsaWNrLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5jb21iaW5lZCBidXR0b24nLFxuICAgICAgQ29tYmluZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENvbmZpZyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRDb25maWcsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuaHRtbCcsXG4gICAgICB0eXBlOiAnY29tYmluZWRDYXJkJyxcbiAgICAgIHRpdGxlOiAnQ29DNy5Db21iaW5lZFJvbGxDYXJkJ1xuICAgIH0pXG4gIH1cblxuICBnZXQgY29uZmlnICgpIHtcbiAgICByZXR1cm4gQ29tYmluZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZ1xuICB9XG5cbiAgZ2V0IHN1Y2Nlc3NDb3VudCAoKSB7XG4gICAgaWYgKHRoaXMucm9sbGVkKSB7XG4gICAgICBsZXQgY291bnQgPSAwXG4gICAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgICBpZiAoci5wYXNzZWQpIGNvdW50ICs9IDFcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb3VudFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgbWFpbkFjdG9yS2V5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb2xsc1swXT8uYWN0b3I/LmFjdG9yS2V5IHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHN1Y2Nlc3MgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5zdWNjZXNzQ291bnQgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuYW55KSB7XG4gICAgICBpZiAodGhpcy5zdWNjZXNzQ291bnQgPiAwKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmICh0aGlzLmFsbCkge1xuICAgICAgaWYgKHRoaXMuc3VjY2Vzc0NvdW50ID09PSB0aGlzLnJvbGxzLmxlbmd0aCkgcmV0dXJuIHRydWVcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZmFpbHVyZSAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnN1Y2Nlc3MgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuICF0aGlzLnN1Y2Nlc3NcbiAgfVxuXG4gIGdldCBjaGVja0dNSW5pdGlhdG9yICgpIHtcbiAgICByZXR1cm4gZ2FtZS51c2Vycy5nZXQodGhpcy5pbml0aWF0b3IpPy5pc0dNXG4gIH1cblxuICBhc3luYyBnZXRIdG1sUm9sbCAoKSB7XG4gICAgaWYgKCF0aGlzLnJvbGxlZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oe1xuICAgICAgcm9sbDogdGhpcy5fcm9sbFtjaGVjay5kaWNlTW9kaWZpZXIgfHwgMF0sXG4gICAgICBzaWxlbnQ6IHRydWVcbiAgICB9KVxuICAgIHJldHVybiBhd2FpdCBjaGVjay5nZXRIdG1sUm9sbCh7IGhpZGVTdWNjZXNzOiB0cnVlIH0pXG4gIH1cblxuICBwcm9jZXNzIChkYXRhKSB7XG4gICAgc3dpdGNoIChkYXRhLmFjdGlvbikge1xuICAgICAgY2FzZSAnbmV3JzpcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdyb2xsJzpcbiAgICAgICAgdGhpcy5hZGRSb2xsRGF0YShkYXRhKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICd1cGRhdGVSb2xsJzoge1xuICAgICAgICB0aGlzLnVwZGF0ZVJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYXNzaWduUm9sbCc6IHtcbiAgICAgICAgdGhpcy5hc3NpZ25Sb2xsKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICBlbHNlIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgfVxuXG4gIGFzeW5jIGFzc2lnblJvbGwgKGRhdGEpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmICghdGhpcy5yb2xsZWQpIHtcbiAgICAgICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuX3JvbGwgPSBkYXRhLnJvbGxcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uXG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJ2xpLmFjdG9yLXJvbGwnKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gYS5jbG9zZXN0KCdkaXYucm9sbC1jYXJkJylcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgQ29tYmluZWRDaGVja0NhcmQuZnJvbUhUTUxDYXJkRWxlbWVudChjYXJkRWxlbWVudClcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICBjb25zdCByYW5rID0gTnVtYmVyKGxpPy5kYXRhc2V0Py5yYW5rKVxuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3JlbW92ZS1yb2xsJzoge1xuICAgICAgICBjYXJkLnJlbW92ZVJvbGwocmFuaylcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Nsb3NlLWNhcmQnOiB7XG4gICAgICAgIGNhcmQuY2xvc2VDYXJkKClcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY2FyZCc6IHtcbiAgICAgICAgY29uc3QgcG9vbCA9IHt9XG4gICAgICAgIGZvciAoY29uc3QgZGljZSBvZiBjYXJkLnJvbGxzKSB7XG4gICAgICAgICAgY29uc3QgZGljZU1vZGlmaWVyID0gcGFyc2VJbnQoZGljZS5kaWNlTW9kaWZpZXIsIDEwKVxuICAgICAgICAgIGlmICghaXNOYU4oZGljZU1vZGlmaWVyKSkge1xuICAgICAgICAgICAgcG9vbFtkaWNlTW9kaWZpZXJdID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgQ29DN0RpY2UuY29tYmluZWRSb2xsKHsgcG9vbCB9KVxuICAgICAgICByb2xsLmluaXRpYXRvciA9IGdhbWUudXNlci5pZFxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgYWN0aW9uOiAnYXNzaWduUm9sbCcsXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTSxcbiAgICAgICAgICByb2xsXG4gICAgICAgIH1cbiAgICAgICAgQXVkaW9IZWxwZXIucGxheSh7IHNyYzogQ09ORklHLnNvdW5kcy5kaWNlIH0sIHRydWUpXG4gICAgICAgIGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgdXBkYXRlOiBmYWxzZSxcbiAgICAgICAgICBkYXRhOiBhLmRhdGFzZXQsXG4gICAgICAgICAgY2xhc3NlczogYS5jbGFzc0xpc3QsXG4gICAgICAgICAgdGFyZ2V0OiBhXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKGNhcmQucm9sbHNbcmFua10sIGFjdGlvbiwgb3B0aW9ucylcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICd1cGRhdGVSb2xsJyxcbiAgICAgICAgICByYW5rLFxuICAgICAgICAgIGZyb21HTTogZ2FtZS51c2VyLmlzR00sXG4gICAgICAgICAgcm9sbDoge1xuICAgICAgICAgICAgaW5pdGlhdG9yOiBnYW1lLnVzZXIuaWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgZGF0YS5yb2xsID0gY2FyZC5yb2xsc1tyYW5rXS5KU09OUm9sbERhdGFcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29tcHV0ZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsKSByZXR1cm5cblxuICAgIHRoaXMucm9sbHMgPSB0aGlzLnJvbGxzLmZpbHRlcihyb2xsID0+IHtcbiAgICAgIHJldHVybiB0eXBlb2Ygcm9sbC5hY3Rvci5kYXRhICE9PSAndW5kZWZpbmVkJyAvLyByZW1vdmUgYW55IGFjdG9ycyB0aGF0IG5vIGxvbmdlciBleGlzdFxuICAgIH0pXG5cbiAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgaWYgKCFyLnJvbGxlZCkge1xuICAgICAgICByLm1vZGlmaWVyID0gci5kaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgICByLmRpZmZpY3VsdHkgPSByLmRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgIHIuZmxhdERpY2VNb2RpZmllciA9IHIuZmxhdERpY2VNb2RpZmllciB8fCAwXG4gICAgICAgIHIuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gci5mbGF0VGhyZXNob2xkTW9kaWZpZXIgfHwgMFxuICAgICAgICBhd2FpdCByLl9wZXJmb3JtKHsgcm9sbDogdGhpcy5fcm9sbFtyLm1vZGlmaWVyXSwgc2lsZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMucm9sbHNbaV0ucm9sbGVkKSB7XG4gICAgICAgIHRoaXMucm9sbHNbaV0uX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsc1tpXS5nZXRIdG1sUm9sbCh7XG4gICAgICAgICAgaGlkZURpY2VSZXN1bHQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9odG1sUm9sbCA9IGF3YWl0IHRoaXMuZ2V0SHRtbFJvbGwoKVxuICB9XG5cbiAgY2xvc2VDYXJkICgpIHtcbiAgICB0aGlzLmNsb3NlZCA9IHRydWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBkaWZmT2JqZWN0LCBleHBhbmRPYmplY3QsIEZvcm1EYXRhRXh0ZW5kZWQsIGdhbWUsIG1lcmdlT2JqZWN0LCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIEludGVyYWN0aXZlQ2hhdENhcmQge1xuICBjb25zdHJ1Y3RvciAob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnNcbiAgfVxuXG4gIGdldCBvcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3QodGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0T3B0aW9ucywgdGhpcy5fb3B0aW9ucylcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy50ZW1wbGF0ZVxuICB9XG5cbiAgZ2V0IGNzc0NsYXNzZXMgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3Nlc1xuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChvcHRpb25uYWxDaGF0RGF0YSA9IHt9KSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJChodG1sKVswXVxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5jc3NDbGFzc2VzKVxuXG4gICAgY29uc3QgY2hhdERhdGEgPSBtZXJnZU9iamVjdChcbiAgICAgIHtcbiAgICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSh0aGlzLm9wdGlvbnMudGl0bGUpLFxuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9LFxuICAgICAgb3B0aW9ubmFsQ2hhdERhdGFcbiAgICApXG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkIChvcHRpb25zID0ge30pIHtcbiAgICBpZiAob3B0aW9ucy5jb21wdXRlKSB0aGlzLmNvbXB1dGUoKVxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIHRoaXMudG9NZXNzYWdlKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG4gICAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgICAvLyBBdHRhY2ggdGhlIHNhbkNoZWNrQ2FyZCBvYmplY3QgdG8gdGhlIG1lc3NhZ2UuXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUodGhpcy5kYXRhU3RyaW5nKVxuICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuY2FyZENsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzZXMpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuXG4gICAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9KVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuaW50ZXJhY3RpdmUtY2FyZCAuaWMtcmFkaW8tc3dpdGNoJyxcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmludGVyYWN0aXZlLWNhcmQgLmljLXN3aXRjaCcsIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmludGVyYWN0aXZlLWNhcmQgLnN1Ym1pdCcsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignZm9jdXNvdXQnLCAnaW5wdXQnLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy5pbnRlcmFjdGl2ZS1jYXJkIGJ1dHRvbicsIHRoaXMuX29uQnV0dG9uLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbigna2V5ZG93bicsICdmb3JtJywgdGhpcy5fb25LZXkuYmluZCh0aGlzKSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVuZXJzIChodG1sKSB7XG4gICAgY29uc3QgaHRtbE1lc3NhZ2VFbGVtZW50ID0gaHRtbFswXVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9IGh0bWxNZXNzYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1jYXJkJylcbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudCkgcmV0dXJuXG4gICAgaWYgKCFodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3MpIHJldHVyblxuICAgIGlmIChcbiAgICAgICFPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhnYW1lLkNvQzcuY2FyZHMpLmluY2x1ZGVzKFxuICAgICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3NcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjYXJkID0gYXdhaXQgSW50ZXJhY3RpdmVDaGF0Q2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGh0bWxDYXJkRWxlbWVudClcbiAgICBjb25zdCB0eXBlZENhcmQgPSBPYmplY3QuYXNzaWduKFxuICAgICAgbmV3IGdhbWUuQ29DNy5jYXJkc1todG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3NdKCksXG4gICAgICBjYXJkXG4gICAgKVxuICAgIHR5cGVkQ2FyZC5hc3NpZ25PYmplY3QoKVxuICAgIHR5cGVkQ2FyZC5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRvIHJlYXNzaWduIG9iamVjdCB0eXBlXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3NpZ25PYmplY3QgKCkge31cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudCB3aWxsIGNoZWNrIGZvciBhbiBhY3Rpb24gKGRhdGEtYWN0aW9uKVxuICAgKiBpZiBhIG1ldGhvZCB3aXRoIHRoYXQgbmFtZSBleGlzdCBpdCB3aWxsIGJlIHRyaWdnZXJlZC5cbiAgICovXG4gIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgLy8gYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScgLy9Bdm9pZCBtdWx0aXBsZSBwdXNoXG4gICAgY29uc3QgYWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuYWN0aW9uXG4gICAgaWYgKHRoaXNbYWN0aW9uXSkgdGhpc1thY3Rpb25dKHsgZXZlbnQsIHVwZGF0ZTogdHJ1ZSB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnRcbiAgICogQHJldHVybnMgZmFsc2UgaWYga2V5IGlzIGVudGVyIHRvIGF2b2lkIGdsb2JhbCBzdWJtaXNzaW9uXG4gICAqL1xuICBfb25LZXkgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VudGVyJykgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gICAgcmV0dXJuIGV2ZW50LmtleSAhPT0gJ0VudGVyJ1xuICB9XG5cbiAgX29uU3VibWl0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbnRlcmFjdGl2ZS1jYXJkJylcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNvbnN0IHVwZGF0ZXMgPSB0aGlzLl91cGRhdGUoY2FyZClcbiAgICBpZiAodXBkYXRlcykgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBfdXBkYXRlIChjYXJkKSB7XG4gICAgY29uc3QgZm9ybXMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKVxuICAgIGxldCB1cGRhdGVzID0gZmFsc2VcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvcm1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBmb3JtID0gZm9ybXNbaV1cbiAgICAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQoZm9ybSlcbiAgICAgIGxldCBkYXRhID0gZmQudG9PYmplY3QoKVxuICAgICAgZGF0YSA9IGRpZmZPYmplY3QodGhpcywgZXhwYW5kT2JqZWN0KGRhdGEpKVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcbiAgICAgICAgdGhpc1trZXldID0gdmFsdWVcbiAgICAgICAgdXBkYXRlcyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZXNcbiAgfVxuXG4gIGdldCBtZXNzYWdlICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2VcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5fbWVzc2FnZUlkKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZSA9IHhcbiAgfVxuXG4gIGdldCBtZXNzYWdlSWQgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiB0aGlzLl9tZXNzYWdlSWRcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2UuaWRcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZUlkICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZUlkID0geFxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNsYXNzZXM6IFsnaW50ZXJhY3RpdmUtY2FyZCddLFxuICAgICAgZXhjbHVkZTogWydfYWN0b3InLCAnX3NraWxsJywgJ19pdGVtJywgJ19tZXNzYWdlJywgJ19odG1sUm9sbCddLFxuICAgICAgZXhjbHVkZVN0YXJ0V2l0aDogJ19fJ1xuICAgIH1cbiAgfVxuXG4gIGdldCBkYXRhICgpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLmRhdGFTdHJpbmcpXG4gIH1cblxuICBnZXQgZGF0YVN0cmluZyAoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZSlcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2UgKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxuICAgIGlmICghY2FyZEVsZW1lbnQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21IVE1MQ2FyZEVsZW1lbnQgKGNhcmQpIHtcbiAgICBjb25zdCBjYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoY2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgaWYgKCFjYXJkRGF0YS5tZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICAgIGNhcmREYXRhLm1lc3NhZ2VJZCA9IG1lc3NhZ2U/LmRhdGFzZXQ/Lm1lc3NhZ2VJZFxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShjYXJkRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IGNhcmQgPSBPYmplY3QuYXNzaWduKG5ldyB0aGlzKCksIGRhdGEpXG4gICAgYXdhaXQgY2FyZC5hc3NpZ25PYmplY3QoKVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICAvLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgc2V0RmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIWZsYWdOYW1lICYmICEoJC50eXBlKGZsYWdOYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICB0aGlzW2ZsYWdOYW1lXSA9IHRydWVcbiAgfVxuXG4gIHVuc2V0RmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIWZsYWdOYW1lICYmICEoJC50eXBlKGZsYWdOYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICB0aGlzW2ZsYWdOYW1lXSA9IGZhbHNlXG4gIH1cblxuICB0b2dnbGVGbGFnIChmbGFnTmFtZSkge1xuICAgIHRoaXNbZmxhZ05hbWVdID0gIXRoaXNbZmxhZ05hbWVdXG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICgnYWN0aW9uJyBpbiB0YXJnZXQuZGF0YXNldCkgcmV0dXJuIHRoaXMuX29uQnV0dG9uKGV2ZW50KVxuICAgIGlmIChcbiAgICAgIHRhcmdldCAmJlxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZ20tc2VsZWN0LW9ubHknKSAmJlxuICAgICAgIWdhbWUudXNlci5pc0dNXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgZmxhZyA9IHRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBpZiAoIWZsYWcpIHJldHVyblxuICAgIGNvbnN0IHRvZ2dsZSA9IHRhcmdldC5jbG9zZXN0KCcuaWMtcmFkaW8nKVxuICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICB0aGlzLnRvZ2dsZUZsYWcoZmxhZylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYnV0dG9ucyA9IHRvZ2dsZS5xdWVyeVNlbGVjdG9yQWxsKCcuaWMtcmFkaW8tc3dpdGNoJylcbiAgICAgIGZvciAoY29uc3QgYiBvZiBidXR0b25zKSB7XG4gICAgICAgIHRoaXMudW5zZXRGbGFnKGIuZGF0YXNldC5mbGFnKVxuICAgICAgfVxuICAgICAgdGhpcy5zZXRGbGFnKGZsYWcpXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdCgnLmludGVyYWN0aXZlLWNhcmQnKVxuICAgIGlmIChjYXJkKSB0aGlzLl91cGRhdGUoY2FyZClcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKCF0aGlzLnJvbGxNb2RlKSByZXR1cm4gbnVsbFxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3JLZXkpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKCF0aGlzLml0ZW1JZCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgd2VhcG9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtXG4gIH1cblxuICBnZXQgdGFyZ2V0ZWRUb2tlbnMgKCkge1xuICAgIHJldHVybiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRUb2tlbikgcmV0dXJuIHRoaXMudGFyZ2V0VG9rZW5cbiAgICByZXR1cm4gdGhpcy50YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IGlzVGFyZ2V0T3duZXIgKCkge1xuICAgIHJldHVybiB0aGlzLnRhcmdldC5pc093bmVyXG4gIH1cblxuICBnZXQgaXNLZWVwZXIgKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXIuaXNHTVxuICB9XG5cbiAgLyoqXG4gICAqIElmIGEgdGFyZ2V0S2V5IHdhcyBwcm92aWRlZCB0cnkgdG8gZmluZCBhIHRva2VuIHdpdGggdGhhdCBrZXkgYW5kIHVzZSBpdC5cbiAgICogSWYgbm90IHRhcmdldEtleSBwcm92aWRlZCByZXR1cm4gdGhlIGZpcnN0IHRhcmdldC5cbiAgICovXG4gIGdldCB0YXJnZXRUb2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgaWYgKHRoaXMuX3RhcmdldEtleSkge1xuICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuX3RhcmdldEtleSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gdGhpcy50YXJnZXRlZFRva2Vucy5wb3AoKVxuICAgICAgICBpZiAodGhpcy5fdGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgICB0aGlzLl90YXJnZXRLZXkgPSBgJHt0aGlzLl90YXJnZXRUb2tlbi5zY2VuZS5pZH0uJHt0aGlzLl90YXJnZXRUb2tlbi5pZH1gXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldFRva2VuXG4gIH1cblxuICBnZXQgdGFyZ2V0QWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0QWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSB7XG4gICAgICAgIHRoaXMuX3RhcmdldEFjdG9yID1cbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmFjdG9yIHx8XG4gICAgICAgICAgdGhpcy50YXJnZXRUb2tlbi5kYXRhLmFjdG9yIHx8XG4gICAgICAgICAgdGhpcy50YXJnZXRUb2tlbi5kYXRhLmRvY3VtZW50XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl90YXJnZXRBY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuX3RhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IHRhcmdldEtleSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLl90YXJnZXRLZXlcbiAgfVxuXG4gIGdldCBoYXNUYXJnZXQgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHNldCB0YXJnZXRLZXkgKHgpIHtcbiAgICB0aGlzLl90YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5nZXRXZWFwb25Ta2lsbHModGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgdGFyZ2V0SW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLnRhcmdldEtleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHRhcmdldE5hbWUgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXQpIHJldHVybiAnZHVtbXknXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm5hbWVcbiAgfVxuXG4gIGdldCBhY3RvckltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgRGlhbG9nLCBnYW1lLCBtZXJnZU9iamVjdCwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IEludGVyYWN0aXZlQ2hhdENhcmQgfSBmcm9tICcuLi9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMnXG5pbXBvcnQgeyBjcmVhdGVJbmxpbmVSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgRGFtYWdlQ2FyZCBleHRlbmRzIEludGVyYWN0aXZlQ2hhdENhcmQge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIDVlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGV4Y2x1ZGU6IFtcbiAgICAgICAgJ190YXJnZXRUb2tlbicsXG4gICAgICAgICdfdGFyZ2V0QWN0b3InLFxuICAgICAgICAnX2h0bWxSb2xsJyxcbiAgICAgICAgJ19odG1sSW5saW5lUm9sbCdcbiAgICAgIF0uY29uY2F0KHN1cGVyLmRlZmF1bHRPcHRpb25zLmV4Y2x1ZGUpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvZGFtYWdlLmh0bWwnXG4gICAgfSlcbiAgfVxuXG4gIC8vIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gIC8vICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgLy8gfVxuXG4gIGFzeW5jIGFzc2lnbk9iamVjdCAoKSB7XG4gICAgaWYgKHRoaXMuZGFtYWdlUm9sbCAmJiB0aGlzLmRhbWFnZVJvbGwuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHRoaXMuZGFtYWdlUm9sbCA9IFJvbGwuZnJvbURhdGEodGhpcy5kYW1hZ2VSb2xsKVxuICAgIH1cbiAgfVxuXG4gIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBzdXBlci5fb25CdXR0b24oZXZlbnQpXG4gIH1cblxuICBnZXQgY3JpdGljYWwgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY3JpdGljYWxcbiAgfVxuXG4gIHNldCBjcml0aWNhbCAoeCkge1xuICAgIHRoaXMuX29wdGlvbnMuY3JpdGljYWwgPSB4XG4gIH1cblxuICBnZXQgaW1wYWxlICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2ltcGFsZSA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLndlYXBvbi5pbXBhbGVcbiAgICByZXR1cm4gdGhpcy5faW1wYWxlXG4gIH1cblxuICBzZXQgaW1wYWxlICh4KSB7XG4gICAgdGhpcy5faW1wYWxlID0geFxuICB9XG5cbiAgZ2V0IGlzRGFtYWdlRm9ybXVsYSAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhbWFnZUZvcm11bGEgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhbWFnZUZvcm11bGEpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUodGhpcy5kYW1hZ2VGb3JtdWxhKVxuICB9XG5cbiAgZ2V0IGlzRGFtYWdlTnVtYmVyICgpIHtcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLmRhbWFnZUZvcm11bGEpKVxuICB9XG5cbiAgZ2V0IGlzQXJtb3JGb3J1bGEgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5hcm1vciAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUodGhpcy5hcm1vcilcbiAgfVxuXG4gIGdldCB0b3RhbERhbWFnZVN0cmluZyAoKSB7XG4gICAgbGV0IGRhbWFnZSA9IE51bWJlcihcbiAgICAgIHRoaXMuaXNEYW1hZ2VOdW1iZXIgPyB0aGlzLmRhbWFnZUZvcm11bGEgOiB0aGlzLnJvbGwudG90YWxcbiAgICApXG4gICAgaWYgKCF0aGlzLmlnbm9yZUFybW9yKSB7XG4gICAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSB8fCBOdW1iZXIodGhpcy5hcm1vcikgPiAwKSB7XG4gICAgICAgIGRhbWFnZSA9IGRhbWFnZSAtIE51bWJlcih0aGlzLmFybW9yKVxuICAgICAgfVxuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5hcm1vcikpKSB7XG4gICAgICAgIGlmIChkYW1hZ2UgPD0gMCkge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXJtb3JBYnNvcmJzRGFtYWdlJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGFtYWdlXG4gIH1cblxuICBnZXQgbm9EYW1hZ2UgKCkge1xuICAgIGlmICh0aGlzLnJvbGxlZCkge1xuICAgICAgY29uc3QgZGFtYWdlID0gdGhpcy5pc0RhbWFnZU51bWJlciA/IHRoaXMuZGFtYWdlRm9ybXVsYSA6IHRoaXMucm9sbC50b3RhbFxuICAgICAgaWYgKCF0aGlzLmlnbm9yZUFybW9yKSB7XG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuYXJtb3IpKSkge1xuICAgICAgICAgIHJldHVybiAhIShkYW1hZ2UgLSBOdW1iZXIodGhpcy5hcm1vcikgPD0gMClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAhIShkYW1hZ2UgPD0gMClcbiAgICAgIH1cbiAgICB9IGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5mYXN0Rm9yd2FyZCAmJiAhdGhpcy5yb2xsICYmICF0aGlzLmlzRGFtYWdlTnVtYmVyKSB7XG4gICAgICBhd2FpdCB0aGlzLnJvbGxEYW1hZ2UoeyB1cGRhdGU6IGZhbHNlIH0pXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNEYW1hZ2VOdW1iZXIgfHxcbiAgICAgICh0aGlzLnJvbGwgJiYgdGhpcy5yb2xsLnRvdGFsICE9IG51bGwpIHx8XG4gICAgICB0aGlzLmhhcmRyb2xsZWRcbiAgICApIHtcbiAgICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGxlZCA9IGZhbHNlXG4gICAgfVxuICAgIGlmICh0aGlzLm9wdGlvbnMuZmFzdEZvcndhcmQgJiYgIXRoaXMuZGFtYWdlSW5mbGljdGVkICYmICF0aGlzLm5vRGFtYWdlKSB7XG4gICAgICBhd2FpdCB0aGlzLmRlYWxEYW1hZ2UoeyB1cGRhdGU6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgaWYgKHRoaXMucm9sbGVkICYmIHRoaXMucm9sbCkge1xuICAgICAgaWYgKHRoaXMucm9sbC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgICB0aGlzLnJvbGwgPSBSb2xsLmZyb21EYXRhKHRoaXMucm9sbClcbiAgICAgIH1cbiAgICAgIGNvbnN0IGEgPSBjcmVhdGVJbmxpbmVSb2xsKHRoaXMucm9sbClcbiAgICAgIHRoaXMuX2h0bWxJbmxpbmVSb2xsID0gYS5vdXRlckhUTUxcbiAgICAgIHRoaXMuX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsLnJlbmRlcigpXG4gICAgfVxuICAgIGF3YWl0IHN1cGVyLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxEYW1hZ2UgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgdGhpcy5yb2xsID0gYXdhaXQgbmV3IFJvbGwodGhpcy5kYW1hZ2VGb3JtdWxhIHx8ICcwJykuZXZhbHVhdGUoe1xuICAgICAgYXN5bmM6IHRydWVcbiAgICB9KVxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMucm9sbClcbiAgICB0aGlzLmhhcmRyb2xsZWQgPSB0cnVlXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyByb2xsQXJtb3IgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IG5ldyBSb2xsKHRoaXMuYXJtb3IpLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICB0aGlzLmFybW9yID0gcm9sbC50b3RhbFxuICAgIG9wdGlvbnMudXBkYXRlID1cbiAgICAgIHR5cGVvZiBvcHRpb25zLnVwZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy51cGRhdGVcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZVRvU2VsZWN0ZWRUYXJnZXQgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgaWYgKHRoaXMuaXNBcm1vckZvcnVsYSkgYXdhaXQgdGhpcy5yb2xsQXJtb3IoKVxuICAgIGlmIChpc05hTihOdW1iZXIodGhpcy50b3RhbERhbWFnZVN0cmluZykpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckV2YWx1YXRpbmdEYW1hZ2UnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCB0YXJnZXRzID0gW11cbiAgICBjb25zdCB0YXJnZXROYW1lID0gW11cbiAgICBjb25zdCBzZWxlY3RlZFBsYXllcnMgPSBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubWFwKHRva2VuID0+IHtcbiAgICAgIHJldHVybiB0b2tlbi5hY3RvclxuICAgIH0pXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNlbGVjdGVkUGxheWVycy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yLmlkID09PSBzZWxlY3RlZFBsYXllcnNbaW5kZXhdLmlkKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICB0YXJnZXROYW1lLnB1c2goc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XS5uYW1lKVxuICAgICAgdGFyZ2V0cy5wdXNoKHNlbGVjdGVkUGxheWVyc1tpbmRleF0pXG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0aXRsZTogJyAnLFxuICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZWFsRGFtYWdlJywge1xuICAgICAgICBkYW1hZ2U6IHRoaXMudG90YWxEYW1hZ2VTdHJpbmcsXG4gICAgICAgIHRhcmdldDogdGFyZ2V0TmFtZVxuICAgICAgfSksXG4gICAgICBidXR0b25zOiB7XG4gICAgICAgIG9uZToge1xuICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHJvY2VlZCcpLFxuICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbmZpcm1EYW1hZ2UodGFyZ2V0cylcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHR3bzoge1xuICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2FuY2VsJyksXG4gICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHt9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBkZWZhdWx0OiAndHdvJ1xuICAgIH1cbiAgICBpZiAodGFyZ2V0TmFtZS5sZW5ndGggPiAwKSB7XG4gICAgICBuZXcgRGlhbG9nKGRhdGEpLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbmZpcm1EYW1hZ2UgKHRhcmdldHMpIHtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGFyZ2V0cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGF3YWl0IHRhcmdldHNbaW5kZXhdLmRlYWxEYW1hZ2UoTnVtYmVyKHRoaXMudG90YWxEYW1hZ2VTdHJpbmcpLCB7XG4gICAgICAgIGlnbm9yZUFybW9yOiBmYWxzZVxuICAgICAgfSlcbiAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGFtYWdlRGVhbFRvJywge1xuICAgICAgICAgIG5hbWU6IHRhcmdldHNbaW5kZXhdLm5hbWUsXG4gICAgICAgICAgZGFtYWdlOiB0aGlzLnRvdGFsRGFtYWdlU3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2UgKG9wdGlvbnMgPSB7IHVwZGF0ZTogdHJ1ZSB9KSB7XG4gICAgaWYgKHRoaXMuaXNBcm1vckZvcnVsYSkgYXdhaXQgdGhpcy5yb2xsQXJtb3IoKVxuICAgIGxldCBkYW1hZ2UgPSB0aGlzLnRvdGFsRGFtYWdlU3RyaW5nXG4gICAgaWYgKGlzTmFOKE51bWJlcihkYW1hZ2UpKSkge1xuICAgICAgaWYgKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Bcm1vckFic29yYnNEYW1hZ2UnKSA9PT0gZGFtYWdlKSB7XG4gICAgICAgIGRhbWFnZSA9IDBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0Vycm9yIGV2YWx1YXRpbmcgZGFtYWdlJylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRhcmdldEFjdG9yKSB7XG4gICAgICBhd2FpdCB0aGlzLnRhcmdldEFjdG9yLmRlYWxEYW1hZ2UoTnVtYmVyKGRhbWFnZSksIHtcbiAgICAgICAgaWdub3JlQXJtb3I6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMuZGFtYWdlSW5mbGljdGVkID0gdHJ1ZVxuICAgIG9wdGlvbnMudXBkYXRlID1cbiAgICAgIHR5cGVvZiBvcHRpb25zLnVwZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgPyB0cnVlIDogb3B0aW9ucy51cGRhdGVcbiAgICBpZiAob3B0aW9ucy51cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgZ2V0IHJhbmdlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnJhbmdlIHx8ICdub3JtYWwnXG4gIH1cblxuICBzZXQgcmFuZ2UgKHgpIHtcbiAgICBjb25zdCByYW5nZXMgPSBbJ25vcm1hbCcsICdsb25nJywgJ2V4dHJlbWUnXVxuICAgIGlmICghcmFuZ2VzLmluY2x1ZXMoeC50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuXG4gICAgdGhpcy5fb3B0aW9ucy5yYW5nZSA9IHhcbiAgfVxuXG4gIGdldCBkYW1hZ2VGb3JtdWxhICgpIHtcbiAgICBjb25zdCByYW5nZSA9IHRoaXMucmFuZ2VcbiAgICBsZXQgZm9ybXVsYSA9IHRoaXMud2VhcG9uPy5zeXN0ZW0/LnJhbmdlW3JhbmdlXT8uZGFtYWdlXG4gICAgbGV0IGRiID0gdGhpcy5hY3Rvci5kYlxuICAgIGRiID0gKChkYiA/PyAnJykudG9TdHJpbmcoKS50cmltKCkgPT09ICcnID8gMCA6IGRiKS50b1N0cmluZygpLnRyaW0oKVxuXG4gICAgaWYgKCFkYi5zdGFydHNXaXRoKCctJykpIGRiID0gJysnICsgZGJcbiAgICBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYWRkYikgZm9ybXVsYSA9IGZvcm11bGEgKyBkYlxuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5haGRiKSBmb3JtdWxhID0gZm9ybXVsYSArICcrIGZsb29yKCcgKyBkYiArICcvMiknXG5cbiAgICBpZiAoZm9ybXVsYSkge1xuICAgICAgY29uc3QgbWF4RGFtYWdlID0gbmV3IFJvbGwoZm9ybXVsYSkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgbGV0IHJvbGxTdHJpbmdcbiAgICAgIGlmICh0aGlzLmNyaXRpY2FsKSB7XG4gICAgICAgIGlmICh0aGlzLmltcGFsZSkge1xuICAgICAgICAgIHJvbGxTdHJpbmcgPSBmb3JtdWxhICsgJysnICsgbWF4RGFtYWdlXG4gICAgICAgICAgcmV0dXJuIHJvbGxTdHJpbmdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gbWF4RGFtYWdlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmb3JtdWxhXG4gICAgICB9XG4gICAgfSBlbHNlIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBhcm1vciAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gdGhpcy5fYXJtb3IgJiYgdGhpcy5fYXJtb3IgIT09ICcnKSByZXR1cm4gdGhpcy5fYXJtb3JcbiAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzZXQgYXJtb3IgKHgpIHtcbiAgICB0aGlzLl9hcm1vciA9IHhcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBnYW1lLCBtZXJnZU9iamVjdCAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9kYW1hZ2UuanMnXG5pbXBvcnQgeyBSb2xsQ2FyZCB9IGZyb20gJy4vcm9sbC1jYXJkLmpzJ1xuXG5leHBvcnQgY2xhc3MgT3Bwb3NlZENoZWNrQ2FyZCBleHRlbmRzIFJvbGxDYXJkIHtcbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZXJuZXJzIChodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5vcHBvc2VkIC50b2dnbGUtc3dpdGNoJyxcbiAgICAgIHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcylcbiAgICApXG4gICAgLy8gc3VwZXIuYmluZExpc3Rlcm5lcnMoIGh0bWwpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQub3Bwb3NlZCBhJyxcbiAgICAgIE9wcG9zZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgYnV0dG9uJyxcbiAgICAgIE9wcG9zZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdENvbmZpZyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRDb25maWcsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5odG1sJyxcbiAgICAgIHR5cGU6ICdvcHBvc2VkQ2FyZCdcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGNvbmZpZyAoKSB7XG4gICAgcmV0dXJuIE9wcG9zZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZ1xuICB9XG5cbiAgZ2V0IGF0dGFja2VyUm9sbCAoKSB7XG4gICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICBpZiAodGhpcy5yb2xscz8ubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGF0dGFja2VyID0gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLmluZGV4ID09PSAwIHx8IHIuYXR0YWNrZXIpXG4gICAgICAgIGlmIChhdHRhY2tlci5sZW5ndGgpIHJldHVybiBhdHRhY2tlclswXVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZGVmZW5kZXJSb2xsICgpIHtcbiAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZGVmZW5kZXIgPSB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIuaW5kZXggIT09IDAgfHwgIXIuYXR0YWNrZXIpXG4gICAgICAgIGlmIChkZWZlbmRlci5sZW5ndGgpIHJldHVybiBkZWZlbmRlclswXVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZGVmZW5kZXJJc0RvZGdpbmcgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSAmJlxuICAgICAgdGhpcy5kZWZlbmRlclJvbGw/LnNraWxsPy5uYW1lXG4gICAgKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5kb2RnZVNraWxsLm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgdGhpcy5kZWZlbmRlclJvbGwuc2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGFkdmFudGFnZUF0dGFja2VyICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuX2FhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMuZGVmZW5kZXJSb2xsKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5kZWZlbmRlcklzRG9kZ2luZ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hYVxuICB9XG5cbiAgZ2V0IHdpbm5lclJvbGxzRGFtYWdlICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbWJhdCAmJlxuICAgICAgdGhpcy5yb2xscy5sZW5ndGggPj0gMiAmJlxuICAgICAgdGhpcy5oYXNXaW5uZXIgJiZcbiAgICAgIHRoaXMud2lubmVyPy5pdGVtPy50eXBlID09PSAnd2VhcG9uJ1xuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzZXQgYWR2YW50YWdlQXR0YWNrZXIgKHgpIHtcbiAgICB0aGlzLl9hYSA9IHRydWVcbiAgICB0aGlzLl9hZCA9IGZhbHNlXG4gIH1cblxuICBnZXQgYWR2YW50YWdlRGVmZW5kZXIgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fYWQgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdGhpcy5kZWZlbmRlcklzRG9kZ2luZ1xuICAgIHJldHVybiB0aGlzLl9hZFxuICB9XG5cbiAgc2V0IGFkdmFudGFnZURlZmVuZGVyICh4KSB7XG4gICAgdGhpcy5fYWQgPSB0cnVlXG4gICAgdGhpcy5fYWEgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzVGllICgpIHtcbiAgICByZXR1cm4gdGhpcy53aW5uZXJDb3VudCA+IDFcbiAgfVxuXG4gIGdldCBuZWVkc1RpZUJyZWFrZXIgKCkge1xuICAgIGlmICghdGhpcy5jb21iYXQpIHJldHVybiBmYWxzZVxuICAgIGlmIChcbiAgICAgIHRoaXMuYXR0YWNrZXJSb2xsICYmXG4gICAgICB0aGlzLmRlZmVuZGVyUm9sbCAmJlxuICAgICAgdGhpcy5hdHRhY2tlclJvbGwuc3VjY2Vzc0xldmVsID09PSB0aGlzLmRlZmVuZGVyUm9sbC5zdWNjZXNzTGV2ZWxcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHdpbm5lckNvdW50ICgpIHtcbiAgICBsZXQgY291bnQgPSAwXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGlmIChyLndpbm5lcikgY291bnQgKz0gMVxuICAgIH1cbiAgICByZXR1cm4gY291bnRcbiAgfVxuXG4gIGdldCBpc0F0dGFja01hbmV1dmVyICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmNvbWJhdCAmJlxuICAgICAgdGhpcy5hdHRhY2tlclJvbGwgJiZcbiAgICAgICghdGhpcy5hdHRhY2tlclJvbGw/Lml0ZW0gfHxcbiAgICAgICAgdGhpcy5hdHRhY2tlclJvbGw/Lml0ZW0uc3lzdGVtLnByb3BlcnRpZXM/Lm1udnIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCByZXN1bHRUZXh0ICgpIHtcbiAgICBpZiAodGhpcy5jb21iYXQgJiYgdGhpcy5hdHRhY2tlclJvbGwgJiYgdGhpcy5kZWZlbmRlclJvbGwpIHtcbiAgICAgIGlmICghdGhpcy5hdHRhY2tlclJvbGwud2lubmVyICYmICF0aGlzLmRlZmVuZGVyUm9sbC53aW5uZXIpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRhY2tlclJvbGwud2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dGFja2VyUm9sbC5tYW5ldXZlcikge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuYXR0YWNrZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkF0dGFja1N1Y2Nlc3MnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5hdHRhY2tlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZGVmZW5kZXJSb2xsLndpbm5lcikge1xuICAgICAgICBpZiAodGhpcy5kZWZlbmRlclJvbGwubWFuZXV2ZXIpIHtcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kZWZlbmRlcklzRG9kZ2luZykge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRvZGdlU3VjY2VzcycsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkF0dGFja1N1Y2Nlc3MnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBhc3luYyBwcm9jZXNzIChkYXRhKSB7XG4gICAgc3dpdGNoIChkYXRhLmFjdGlvbikge1xuICAgICAgY2FzZSAnbmV3JzpcbiAgICAgICAgaWYgKCF0aGlzLnJvbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmNvbWJhdCA9IGRhdGEuY29tYmF0IHx8IHVuZGVmaW5lZFxuICAgICAgICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgICAgICAgZGF0YS5yb2xsLmF0dGFja2VyID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBkYXRhLnJvbGwuaW5kZXggPSB0aGlzLnJvbGxzLmxlbmd0aFxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3JvbGwnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3VwZGF0ZVJvbGwnOlxuICAgICAgICB0aGlzLnVwZGF0ZVJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgcm9sbCAocmFuaykge1xuICAgIGF3YWl0IHRoaXMucm9sbHNbcmFua10uX3BlcmZvcm0oKVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0eXBlOiB0aGlzLmNvbmZpZy50eXBlLFxuICAgICAgYWN0aW9uOiAndXBkYXRlUm9sbCcsXG4gICAgICByYW5rLFxuICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTVxuICAgIH1cbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSB0aGlzLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uXG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJ2xpLmFjdG9yLXJvbGwnKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gYS5jbG9zZXN0KCdkaXYucm9sbC1jYXJkJylcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgT3Bwb3NlZENoZWNrQ2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIGNvbnN0IHJhbmsgPSBOdW1iZXIobGk/LmRhdGFzZXQ/LnJhbmspXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAndG9nZ2xlLWNvbWJhdCc6IHtcbiAgICAgICAgY2FyZC5jb21iYXQgPSAhY2FyZC5jb21iYXRcbiAgICAgICAgLy8gaWYoICFjYXJkLmFkdmFudGFnZUF0dGFja2VyICYmICFjYXJkLmFkdmFudGFnZURlZmVuZGVyKSBjYXJkLmFkdmFudGFnZUF0dGFja2VyID0gdHJ1ZTtcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JlbW92ZS1yb2xsJzoge1xuICAgICAgICBjYXJkLnJlbW92ZVJvbGwocmFuaylcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2Nsb3NlLWNhcmQnOiB7XG4gICAgICAgIGNhcmQuY2xvc2VDYXJkKClcbiAgICAgICAgYXdhaXQgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICAgICAgaWYgKCFjYXJkLnJvbGxzW3JhbmtdLmFjdG9yS2V5KSB7XG4gICAgICAgICAgY2FyZC5yb2xsc1tyYW5rXS5hY3RvcktleSA9IGAke3NwZWFrZXIuc2NlbmV9LiR7c3BlYWtlci50b2tlbn1gXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgY2FyZC5yb2xsKHJhbmspXG4gICAgICAgIGF3YWl0IGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWRhbWFnZSc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICAgICAgY3JpdGljYWw6IGNhcmQud2lubmVyLmlzRXh0cmVtZVN1Y2Nlc3MsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gY2FyZC53aW5uZXIuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudGFyZ2V0S2V5ID0gY2FyZC5sb29zZXIuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gY2FyZC53aW5uZXIuaXRlbUlkXG4gICAgICAgIC8vIGlmKCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSBkYW1hZ2VDaGF0Q2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICB1cGRhdGU6IGZhbHNlLFxuICAgICAgICAgIGRhdGE6IGEuZGF0YXNldCxcbiAgICAgICAgICBjbGFzc2VzOiBhLmNsYXNzTGlzdCxcbiAgICAgICAgICB0YXJnZXQ6IGFcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2suYWx0ZXIoY2FyZC5yb2xsc1tyYW5rXSwgYWN0aW9uLCBvcHRpb25zKVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6IHRoaXMuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgIGFjdGlvbjogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICAgIHJhbmssXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTVxuICAgICAgICB9XG4gICAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIGRhdGEucm9sbCA9IGNhcmQucm9sbHNbcmFua10uSlNPTlJvbGxEYXRhXG4gICAgICAgIGNhcmQucHJvY2VzcyhkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNvbXB1dGUgKHJhbmsgPSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnJvbGxzID0gdGhpcy5yb2xscy5maWx0ZXIocm9sbCA9PiB7XG4gICAgICByZXR1cm4gdHlwZW9mIHJvbGwuYWN0b3IuYWN0b3JLZXkgIT09ICd1bmRlZmluZWQnIC8vIHJlbW92ZSBhbnkgYWN0b3JzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0XG4gICAgfSlcblxuICAgIGlmICghcmFuaykge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnJvbGxzW2ldLm1hbmV1dmVyXG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmNvbWJhdCAmJlxuICAgICAgICAgICghdGhpcy5yb2xsc1tpXS5pdGVtIHx8XG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldLml0ZW0uc3lzdGVtLnByb3BlcnRpZXM/Lm1udnIpICYmXG4gICAgICAgICAgKCh0aGlzLnJvbGxzW2ldPy5hY3Rvcj8uZG9kZ2VTa2lsbD8ubmFtZSAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXT8uc2tpbGw/Lm5hbWUgJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0uYWN0b3IuZG9kZ2VTa2lsbC5uYW1lLnRvTG93ZXJDYXNlKCkgIT09XG4gICAgICAgICAgICAgIHRoaXMucm9sbHNbaV0uc2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpKSB8fFxuICAgICAgICAgICAgIXRoaXMucm9sbHNbaV0/LmFjdG9yPy5kb2RnZVNraWxsPy5uYW1lKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLnJvbGxzW2ldLm1hbmV1dmVyID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnJvbGxzW2ldLnJvbGxlZCkge1xuICAgICAgICAgIHRoaXMucm9sbHNbaV0uX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsc1tpXS5nZXRIdG1sUm9sbCh7XG4gICAgICAgICAgICBoaWRlRGljZVJlc3VsdDogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMucm9sbHNbcmFua10ucm9sbGVkKSB7XG4gICAgICAgIHRoaXMucm9sbHNbcmFua10uX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5yb2xsc1tyYW5rXS5nZXRIdG1sUm9sbCh7XG4gICAgICAgICAgaGlkZURpY2VSZXN1bHQ6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgIC8vIFNvcnQgY29tYmF0IHJvbGxzIGJ5IGluZGV4LlxuICAgICAgdGhpcy5yb2xscy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChhLmluZGV4ID4gYi5pbmRleCkgcmV0dXJuIDFcbiAgICAgICAgaWYgKGEuaW5kZXggPCBiLmluZGV4KSByZXR1cm4gLTFcbiAgICAgICAgcmV0dXJuIDBcbiAgICAgIH0pXG5cbiAgICAgIC8vIENvbWJhdCByb2xsIGluY2x1ZGVzIG9ubHkgMiBwZXJzb25zLCByZW1vdmUgdGhlIHJlc3QuXG4gICAgICBpZiAodGhpcy5yb2xscy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHRoaXMucm9sbHMgPSBbdGhpcy5yb2xsc1swXSwgdGhpcy5yb2xsc1sxXV1cbiAgICAgICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgICAgICBkZWxldGUgci53aW5uZXJcbiAgICAgICAgICBkZWxldGUgci50aWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBGaXJzdCBwZXJzb24gYWRkZWQgaXMgdGhlIGF0dGFja2VyLlxuICAgICAgaWYgKHRoaXMucm9sbHNbMF0pIHRoaXMucm9sbHNbMF0uYXR0YWNrZXIgPSB0cnVlXG5cbiAgICAgIGlmICh0aGlzLnJvbGxzWzBdPy5yb2xsZWQgJiYgdGhpcy5yb2xsc1sxXT8ucm9sbGVkKSB7XG4gICAgICAgIGlmICh0aGlzLnJvbGxzWzBdLnBhc3NlZCB8fCB0aGlzLnJvbGxzWzFdLnBhc3NlZCkge1xuICAgICAgICAgIGlmICh0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCA+IHRoaXMucm9sbHNbMV0uc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICB0aGlzLnJvbGxzWzBdLndpbm5lciA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucm9sbHNbMV0uc3VjY2Vzc0xldmVsID4gdGhpcy5yb2xsc1swXS5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgIHRoaXMucm9sbHNbMV0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hZHZhbnRhZ2VBdHRhY2tlcikgdGhpcy5yb2xsc1swXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgICBlbHNlIHRoaXMucm9sbHNbMV0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEucm9sbGVkICYmICFiLnJvbGxlZCkgcmV0dXJuIC0xXG4gICAgICAgIGlmICghYS5yb2xsZWQgJiYgYi5yb2xsZWQpIHJldHVybiAxXG4gICAgICAgIGlmICghYS5yb2xsZWQgJiYgIWIucm9sbGVkKSByZXR1cm4gMFxuICAgICAgICBpZiAoYS5zdWNjZXNzTGV2ZWwgPiBiLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEuc3VjY2Vzc0xldmVsIDwgYi5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgIHJldHVybiAxXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29wcG9zZWRSb2xsVGllQnJlYWtlcicpKSB7XG4gICAgICAgICAgaWYgKGEubW9kaWZpZWRSZXN1bHQgPiBiLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhLm1vZGlmaWVkUmVzdWx0IDwgYi5tb2RpZmllZFJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChhLnJhd1ZhbHVlID4gYi5yYXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoYS5yYXdWYWx1ZSA8IGIucmF3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gMVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMFxuICAgICAgfSlcblxuICAgICAgdGhpcy53aW5Db3VudCA9IDBcbiAgICAgIGlmICh0aGlzLnJvbGxzWzBdICYmIHRoaXMucm9sbHNbMF0ucm9sbGVkICYmICF0aGlzLnJvbGxzWzBdLmZhaWxlZCkge1xuICAgICAgICB0aGlzLndpbkNvdW50ID0gMVxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldLnJvbGxlZCAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1swXS5zdWNjZXNzTGV2ZWwgPT09IHRoaXMucm9sbHNbaV0uc3VjY2Vzc0xldmVsICYmXG4gICAgICAgICAgICAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3Bwb3NlZFJvbGxUaWVCcmVha2VyJylcbiAgICAgICAgICAgICAgPyB0aGlzLnJvbGxzWzBdLm1vZGlmaWVkUmVzdWx0ID09PSB0aGlzLnJvbGxzW2ldLm1vZGlmaWVkUmVzdWx0XG4gICAgICAgICAgICAgIDogdGhpcy5yb2xsc1swXS5yYXdWYWx1ZSA9PT0gdGhpcy5yb2xsc1tpXS5yYXdWYWx1ZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMud2luQ291bnQgPSB0aGlzLndpbkNvdW50ICsgMVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5yb2xsc1tpXS53aW5uZXIgPSBpIDwgdGhpcy53aW5Db3VudFxuICAgICAgICB0aGlzLnJvbGxzW2ldLnRpZSA9IHRoaXMucm9sbHNbaV0ud2lubmVyICYmIHRoaXMud2luQ291bnQgPiAxXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY2xvc2VDYXJkICgpIHtcbiAgICB0aGlzLmNsb3NlZCA9IHRydWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBnYW1lICovXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDaGF0Q2FyZEFjdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuZmFzdEZvcndhcmQgPSBmYXN0Rm9yd2FyZFxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKCF0aGlzLnJvbGxNb2RlKSByZXR1cm4gbnVsbFxuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3JLZXkpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKCF0aGlzLml0ZW1JZCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgd2VhcG9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtXG4gIH1cblxuICBnZXQgdGFyZ2V0ZWRUb2tlbnMgKCkge1xuICAgIHJldHVybiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRUb2tlbikgcmV0dXJuIHRoaXMudGFyZ2V0VG9rZW5cbiAgICByZXR1cm4gdGhpcy50YXJnZXRBY3RvclxuICB9XG5cbiAgLyoqXG4gICAqIElmIGEgdGFyZ2V0S2V5IHdhcyBwcm92aWRlZCB0cnkgdG8gZmluZCBhIHRva2VuIHdpdGggdGhhdCBrZXkgYW5kIHVzZSBpdC5cbiAgICogSWYgbm90IHRhcmdldEtleSBwcm92aWRlZCByZXR1cm4gdGhlIGZpcnN0IHRhcmdldC5cbiAgICovXG4gIGdldCB0YXJnZXRUb2tlbiAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgaWYgKHRoaXMuX3RhcmdldEtleSkge1xuICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuX3RhcmdldEtleSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gdGhpcy50YXJnZXRlZFRva2Vucy5wb3AoKVxuICAgICAgICBpZiAodGhpcy5fdGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgICB0aGlzLl90YXJnZXRLZXkgPSBgJHt0aGlzLl90YXJnZXRUb2tlbi5zY2VuZS5pZH0uJHt0aGlzLl90YXJnZXRUb2tlbi5pZH1gXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldFRva2VuXG4gIH1cblxuICBnZXQgdGFyZ2V0QWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0QWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSB0aGlzLl90YXJnZXRBY3RvciA9IHRoaXMudGFyZ2V0VG9rZW4uYWN0b3JcbiAgICAgIGVsc2UgdGhpcy5fdGFyZ2V0QWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLl90YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0QWN0b3JcbiAgfVxuXG4gIGdldCB0YXJnZXRLZXkgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0S2V5XG4gIH1cblxuICBnZXQgaGFzVGFyZ2V0ICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBzZXQgdGFyZ2V0S2V5ICh4KSB7XG4gICAgdGhpcy5fdGFyZ2V0S2V5ID0geFxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuZ2V0V2VhcG9uU2tpbGxzKHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IHRhcmdldEltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy50YXJnZXRLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy50b2tlbikgcmV0dXJuIHRoaXMudG9rZW4ubmFtZVxuICAgIHJldHVybiB0aGlzLmFjdG9yLm5hbWVcbiAgfVxuXG4gIGdldCB0YXJnZXROYW1lICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0KSByZXR1cm4gJ2R1bW15J1xuICAgIHJldHVybiB0aGlzLnRhcmdldC5uYW1lXG4gIH1cblxuICBnZXQgYWN0b3JJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGFzeW5jIHNheSAobWVzc2FnZSwgZmxhdm9yID0gbnVsbCkge1xuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBsZXQgc3BlYWtlclxuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIGlmICh0aGlzLnRva2VuKSB7XG4gICAgICAgIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy50b2tlbi5kb2N1bWVudFxuICAgICAgfVxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgZmxhdm9yLFxuICAgICAgY29udGVudDogbWVzc2FnZVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG4gICAgKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJykgLy8gQ2hhbmdlIGZvciB1c2VyXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIFJvbGwsIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBDaGF0Q2FyZEFjdG9yIH0gZnJvbSAnLi4vY2FyZC1hY3Rvci5qcydcbmltcG9ydCB7IGNyZWF0ZUlubGluZVJvbGwsIGNoYXRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5cbmZ1bmN0aW9uIHJlcGxhY2VyIChrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkuc3RhcnRzV2l0aCgnX18nKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XG4gIH1cblxuICBjb25zdCBleGNsdWRlID0gWydfYWN0b3InXVxuICBpZiAoZXhjbHVkZS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgY29uc3QgY2hlY2tzID0gWydzYW5DaGVjaycsICdpbnRDaGVjayddXG4gIGlmIChjaGVja3MuaW5jbHVkZXMoa2V5KSkge1xuICAgIHJldHVybiB2YWx1ZS5KU09OUm9sbERhdGFcbiAgfVxuXG4gIHJldHVybiB2YWx1ZSAvLyByZXR1cm4gYXMgaXNcbn1cblxuZXhwb3J0IGNsYXNzIFNhbkNoZWNrQ2FyZCBleHRlbmRzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBzYW5EYXRhID0ge30sIG9wdGlvbnMgPSB7fSkge1xuICAgIHN1cGVyKFxuICAgICAgYWN0b3JLZXksXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5mYXN0Rm9yd2FyZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgPyBCb29sZWFuKG9wdGlvbnMuZmFzdEZvcndhcmQpXG4gICAgICAgIDogZmFsc2VcbiAgICApXG4gICAgc2FuRGF0YS5zYW5SZWFzb24gPSBzYW5EYXRhLnNhblJlYXNvbiA/PyAnJ1xuICAgIHRoaXMuc2FuRGF0YSA9IHNhbkRhdGFcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgaWYgKHNhbkRhdGEubW9kaWZpZXIgJiYgIWlzTmFOKE51bWJlcihzYW5EYXRhLm1vZGlmaWVyKSkpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciA9IE51bWJlcihzYW5EYXRhLm1vZGlmaWVyKVxuICAgIH1cbiAgICBpZiAoc2FuRGF0YS5kaWZmaWN1bHR5ICYmICFpc05hTihOdW1iZXIoc2FuRGF0YS5kaWZmaWN1bHR5KSkpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5zYW5EaWZmaWN1bHR5ID0gTnVtYmVyKHNhbkRhdGEuZGlmZmljdWx0eSlcbiAgICB9XG4gICAgdGhpcy5zdGF0ZSA9IHt9XG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMuaXNCbGluZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gQm9vbGVhbih0aGlzLm9wdGlvbnMuaXNCbGluZClcbiAgICAgIDogc3VwZXIuaXNCbGluZFxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5vcHRpb25zLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnXG4gICAgICA/IHRoaXMub3B0aW9ucy5kaWZmaWN1bHR5XG4gICAgICA6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICB9XG5cbiAgZ2V0IG1vZGlmaWVyICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMub3B0aW9ucy5tb2RpZmllciAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gdGhpcy5vcHRpb25zLm1vZGlmaWVyXG4gICAgICA6IDBcbiAgfVxuXG4gIGdldCBzYW5Mb3NzU291cmNlICgpIHtcbiAgICBpZiAoIXRoaXMuc2FuRGF0YS50b2tlbktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5zYW5EYXRhLnRva2VuS2V5KVxuICB9XG5cbiAgZ2V0IGludm9sdW50YXJ5QWN0aW9uICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXRlLnNhblJvbGxlZCAmJlxuICAgICAgKHRoaXMuc2FuQ2hlY2suaXNGYWlsdXJlIHx8IHRoaXMuc2FuQ2hlY2suaXNGdW1ibGUpXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBzYW5Mb3NzRm9ybXVsYSAoKSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuc2FuUm9sbGVkKSB7XG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhbk1heCAmJiB0aGlzLnNhbkNoZWNrLmZhaWxlZCkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWF4KSlcbiAgICAgICAgICA/IE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWF4KVxuICAgICAgICAgIDogdGhpcy5zYW5EYXRhLnNhbk1heFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2FuRGF0YS5zYW5NaW4gJiYgdGhpcy5zYW5DaGVjay5wYXNzZWQpIHtcbiAgICAgICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5zYW5EYXRhLnNhbk1pbikpXG4gICAgICAgICAgPyBOdW1iZXIodGhpcy5zYW5EYXRhLnNhbk1pbilcbiAgICAgICAgICA6IHRoaXMuc2FuRGF0YS5zYW5NaW5cbiAgICAgIH1cbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc2FuTG9zdFRvUmVhc29uICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5zYW5Mb3N0VG9SZWFzb24odGhpcy5zYW5EYXRhLnNhblJlYXNvbilcbiAgfVxuXG4gIGdldCBtYXhQb3NzaWJsZVNhbkxvc3MgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgKVxuICB9XG5cbiAgZ2V0IG1heFNhbkxvc3MgKCkge1xuICAgIHJldHVybiBuZXcgUm9sbCh0aGlzLnNhbkRhdGEuc2FuTWF4LnRvU3RyaW5nKCkpLmV2YWx1YXRlKHtcbiAgICAgIG1heGltaXplOiB0cnVlXG4gICAgfSkudG90YWxcbiAgfVxuXG4gIGdldCBzYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLnNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKVxuICB9XG5cbiAgZ2V0IGZpcnN0RW5jb3VudGVyICgpIHtcbiAgICByZXR1cm4gIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZFxuICB9XG5cbiAgZ2V0IGlzQWN0b3JMb29zaW5nU2FuICgpIHtcbiAgICAvLyBObyBzYW4gbG9zcyBkdXJpbmcgYm91dCBvZiBtYWQuXG4gICAgaWYgKHRoaXMuYWN0b3IuaGFzVGVtcG9JbnNhbmUpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIC8vIFRoZSBzYW4gbG9zcyBpcyBhIDBcbiAgICBpZiAodGhpcy5zYW5Mb3NzRm9ybXVsYSA9PT0gMCkgcmV0dXJuIGZhbHNlXG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uICYmXG4gICAgICB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhbk1heFxuICAgICAgKSA9PT0gMFxuICAgICkge1xuICAgICAgdGhpcy5zdGF0ZS5pbW11bmVUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGdldCBib3V0RHVyYXRpb25UZXh0ICgpIHtcbiAgICBpZiAodGhpcy5ib3V0RHVyYXRpb24pIHtcbiAgICAgIGlmICh0aGlzLmJvdXRSZWFsVGltZSkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5ib3V0RHVyYXRpb259ICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJvdW5kcycpfWBcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmJvdXRTdW1tYXJ5KSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmJvdXREdXJhdGlvbn0gJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuaG91cnMnKX1gXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgeW91R2FpbkN0aHVsaHVNeXRob3NTdHJpbmcgKCkge1xuICAgIGlmICh0aGlzLm15dGhvc0dhaW4pIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LllvdUdhaW5lZEN0aHVsaHVNeXRob3MnLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLm15dGhvc0dhaW5cbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBhZHZhbmNlU3RhdGUgKHN0YXRlKSB7XG4gICAgc3dpdGNoIChzdGF0ZSkge1xuICAgICAgY2FzZSAna2VlcENyZWF0dXJlU2FuRGF0YSc6IHtcbiAgICAgICAgdGhpcy5zdGF0ZS5rZWVwQ3JlYXR1cmVTYW5EYXRhID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnaW52b2x1bnRhcnlBY3Rpb25QZXJmb3JtZWQnOiB7XG4gICAgICAgIHRoaXMuc3RhdGVbc3RhdGVdID0gdHJ1ZVxuICAgICAgICBpZiAoIXRoaXMuaXNBY3Rvckxvb3NpbmdTYW4pIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnc2FuTG9zc0FwcGxpZWQnOiB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwbHlTYW5Mb3NzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2VudGVyQm91dE9mTWFkbmVzc1JlYWxUaW1lJzoge1xuICAgICAgICB0aGlzLmJvdXREdXJhdGlvbiA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgICAgdGhpcy5ib3V0UmVhbFRpbWUgPSB0cnVlXG4gICAgICAgIHRoaXMuYm91dFN1bW1hcnkgPSBmYWxzZVxuICAgICAgICB0aGlzLmJvdXRSZXN1bHQgPSBhd2FpdCB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyhcbiAgICAgICAgICB0cnVlLFxuICAgICAgICAgIHRoaXMuYm91dER1cmF0aW9uXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzUmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZW50ZXJCb3V0T2ZNYWRuZXNzU3VtbWFyeSc6IHtcbiAgICAgICAgdGhpcy5ib3V0RHVyYXRpb24gPSAoYXdhaXQgbmV3IFJvbGwoJzFEMTAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICAgIHRoaXMuYm91dFJlYWxUaW1lID0gZmFsc2VcbiAgICAgICAgdGhpcy5ib3V0U3VtbWFyeSA9IHRydWVcbiAgICAgICAgdGhpcy5ib3V0UmVzdWx0ID0gYXdhaXQgdGhpcy5hY3Rvci5lbnRlckJvdXRPZk1hZG5lc3MoXG4gICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgdGhpcy5ib3V0RHVyYXRpb25cbiAgICAgICAgKVxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NSZXNvbHZlZCA9IHRydWVcbiAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VySW5zYW5pdHkoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnYm91dE9mTWFkbmVzc092ZXInOiB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3IudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXG4gICAgICAgIGF3YWl0IHRoaXMudHJpZ2dlckluc2FuaXR5KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ25vTXl0aG9zR2FpbmVkJzoge1xuICAgICAgICB0aGlzLnN0YXRlLmN0aHVsaHVNeXRob3NBd2FyZGVkID0gdHJ1ZVxuICAgICAgICB0aGlzLm15dGhvc0dhaW4gPSAwXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdjdGh1bGh1TXl0aG9zQXdhcmRlZCc6IHtcbiAgICAgICAgbGV0IGFtb3VudEdhaW5lZCA9IDFcbiAgICAgICAgaWYgKCF0aGlzLmFjdG9yLm15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQpIHtcbiAgICAgICAgICBhbW91bnRHYWluZWQgPSA1XG4gICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5leHBlcmllbmNlRmlyc3RNeXRob3NJbnNhbml0eSgpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZS5jdGh1bGh1TXl0aG9zQXdhcmRlZCA9IHRydWVcbiAgICAgICAgY29uc3QgY3RodWxodU15dGhvc1NraWxsID0gdGhpcy5hY3Rvci5jdGh1bGh1TXl0aG9zU2tpbGxcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPVxuICAgICAgICAgIGN0aHVsaHVNeXRob3NTa2lsbC5kYXRhLmRhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSB8fCAwXG4gICAgICAgIGlmIChjdGh1bGh1TXl0aG9zU2tpbGwpIHtcbiAgICAgICAgICBhd2FpdCBjdGh1bGh1TXl0aG9zU2tpbGwudXBkYXRlKHtcbiAgICAgICAgICAgICdkYXRhLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiBvbGRWYWx1ZSArIGFtb3VudEdhaW5lZFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5teXRob3NHYWluID0gYW1vdW50R2FpbmVkXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgYnlwYXNzUm9sbFNhbiAoKSB7XG4gICAgdGhpcy5pc0J5cGFzc2VkID0gdHJ1ZVxuICAgIHRoaXMuc2FuQ2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICB0aGlzLnNhbkNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIHRoaXMuc2FuQ2hlY2suYXR0cmlidXRlID0gJ3NhbidcbiAgICB0aGlzLnNhbkNoZWNrLmRpZmZpY3VsdHkgPVxuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgdGhpcy5zYW5DaGVjay5kaWNlTW9kaWZpZXIgPSB0aGlzLm9wdGlvbnMuc2FuTW9kaWZpZXIgfHwgMFxuICAgIGF3YWl0IHRoaXMuc2FuQ2hlY2suX3BlcmZvcm0oeyBmb3JjZURTTjogdHJ1ZSB9KVxuICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuaW52b2x1bnRhcnlBY3Rpb25QZXJmb3JtZWQgPSB0aGlzLnNhbkNoZWNrLnBhc3NlZFxuICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICB0aGlzLnN0YXRlLmlnbm9yZVNhbkNoZWNrID0gdHJ1ZVxuICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuc2FuTG9zc0Zvcm11bGFcbiAgfVxuXG4gIGFzeW5jIHJvbGxTYW4gKCkge1xuICAgIHRoaXMuc2FuQ2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICB0aGlzLnNhbkNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIHRoaXMuc2FuQ2hlY2suYXR0cmlidXRlID0gJ3NhbidcbiAgICB0aGlzLnNhbkNoZWNrLmRpZmZpY3VsdHkgPVxuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgdGhpcy5zYW5DaGVjay5kaWNlTW9kaWZpZXIgPSB0aGlzLm9wdGlvbnMuc2FuTW9kaWZpZXIgfHwgMFxuICAgIGF3YWl0IHRoaXMuc2FuQ2hlY2suX3BlcmZvcm0oeyBmb3JjZURTTjogdHJ1ZSB9KVxuICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuaW52b2x1bnRhcnlBY3Rpb25QZXJmb3JtZWQgPSB0aGlzLnNhbkNoZWNrLnBhc3NlZFxuICAgIGlmICghdGhpcy5pc0FjdG9yTG9vc2luZ1Nhbikge1xuICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICBpZiAodGhpcy5hY3Rvci5oYXNUZW1wb0luc2FuZSkge1xuICAgICAgICB0aGlzLnN0YXRlLmltbXVuZUFscmVhZHlJbkJvdXQgPSB0cnVlXG4gICAgICAgIGlmICghdGhpcy5zYW5DaGVjay5wYXNzZWQpIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc0FwcGxpZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSBmYWxzZVxuICAgICAgdGhpcy5zYW5Mb3NzID0gMFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuc2FuTG9zc0Zvcm11bGEgPT09ICdudW1iZXInKSB7XG4gICAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhblJlYXNvbikge1xuICAgICAgICB0aGlzLnNhbkxvc3MgPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICAgIHRoaXMuc2FuTG9zc0Zvcm11bGFcbiAgICAgICAgKVxuICAgICAgICBpZiAodGhpcy5zYW5Mb3NzIDwgdGhpcy5zYW5Mb3NzRm9ybXVsYSkge1xuICAgICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNhbkxvc3MgPSB0aGlzLnNhbkxvc3NGb3JtdWxhXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnNhbkNoZWNrLmlzRnVtYmxlKSB7XG4gICAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gICAgICB0aGlzLnNhbkxvc3MgPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgICAgdGhpcy5zYW5EYXRhLnNhbk1heFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAodGhpcy5zYW5EYXRhLnNhblJlYXNvbikge1xuICAgICAgY29uc3QgbWluID0gbmV3IFJvbGwodGhpcy5zYW5Mb3NzRm9ybXVsYSkuZXZhbHVhdGUoe1xuICAgICAgICBtaW5pbWl6ZTogdHJ1ZVxuICAgICAgfSkudG90YWxcbiAgICAgIGNvbnN0IG1heCA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICApXG4gICAgICBpZiAobWluID49IG1heCkge1xuICAgICAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IG1heFxuICAgICAgICB0aGlzLnN0YXRlLmxpbWl0ZWRMb3NzVG9DcmVhdHVyZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyByb2xsU2FuTG9zcyAoKSB7XG4gICAgdGhpcy5zYW5Mb3NzUm9sbCA9IG5ldyBSb2xsKGAke3RoaXMuc2FuTG9zc0Zvcm11bGF9YClcblxuICAgIGF3YWl0IHRoaXMuc2FuTG9zc1JvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG5cbiAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh0aGlzLnNhbkxvc3NSb2xsKVxuXG4gICAgY29uc3QgbWF4ID0gdGhpcy5hY3Rvci5tYXhMb3NzVG9TYW5SZWFzb24oXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgdGhpcy5zYW5EYXRhLnNhbk1heFxuICAgIClcblxuICAgIGlmICh0aGlzLnNhbkxvc3NSb2xsLnRvdGFsID4gbWF4KSB7XG4gICAgICB0aGlzLnN0YXRlLmxpbWl0ZWRMb3NzVG9DcmVhdHVyZSA9IHRydWVcbiAgICB9XG5cbiAgICB0aGlzLnNhbkxvc3MgPSBNYXRoLm1pbih0aGlzLnNhbkxvc3NSb2xsLnRvdGFsLCBtYXgpXG4gICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgYXBwbHlTYW5Mb3NzICgpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLmxvb3NlU2FuKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sIHRoaXMuc2FuTG9zcylcblxuICAgIGlmICh0aGlzLnNhbkxvc3MgPiAwKSB0aGlzLnN0YXRlLmFjdG9yTG9zdFNhbiA9IHRydWVcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NBcHBsaWVkID0gdHJ1ZVxuICAgIGlmICh0aGlzLmFjdG9yLnNhbiA8PSAwKSB7XG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXG5cbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLnBlcm1hbmVudGx5SW5zYW5lID0gdHJ1ZVxuXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh0aGlzLnNhbkxvc3MgPCA1KSB7XG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmFjdG9yLmhhc0luZGVmSW5zYW5lKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuc2hha2VuID0gdHJ1ZVxuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5VGFibGVSb2xsZWQgPSBmYWxzZVxuICAgICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuc2hha2VuID0gdHJ1ZVxuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5VGFibGVSb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWN0b3IuZGFpbHlTYW5Mb3NzID49IHRoaXMuYWN0b3IuZGFpbHlTYW5MaW1pdCkge1xuICAgICAgLy8gdGhpcy5hY3Rvci5zYW4vNVxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5VGFibGVSb2xsZWQgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxJbnQgKCkge1xuICAgIHRoaXMuaW50Q2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICB0aGlzLmludENoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIHRoaXMuaW50Q2hlY2suY2hhcmFjdGVyaXN0aWMgPSAnaW50J1xuICAgIHRoaXMuaW50Q2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuaW50RGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLmludENoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5pbnRNb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5pbnRDaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgaWYgKHRoaXMuaW50Q2hlY2sucGFzc2VkIHx8IHRoaXMuc3RhdGUuYWxyZWFkeUluc2FuZSkge1xuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUudGVtcG9yYXJ5SW5zYW5lID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSBmYWxzZVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUudGVtcG9yYXJ5SW5zYW5lID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lID0gZmFsc2VcbiAgICAgIHRoaXMuc3RhdGUubWVtb3J5UmVwcmVzc2VkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdHJpZ2dlckluc2FuaXR5ICgpIHtcbiAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gdHJ1ZVxuICAgIGlmICh0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSkge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmUpXG4gICAgfVxuICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgY2xlYXJTYW5Mb3NzUmVhc29uICgpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldFJlYXNvblNhbkxvc3ModGhpcy5zYW5EYXRhLnNhblJlYXNvbiwgMClcbiAgICBpZiAoIXRoaXMuc2FuTG9zc1JlYXNvbkVuY291bnRlcmVkKSB7XG4gICAgICB0aGlzLnN0YXRlLmtlZXBDcmVhdHVyZVNhbkRhdGEgPSB0cnVlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIC8vIEF0dGFjaGUgdGhlIHNhbkNoZWNrIHJlc3VsdCB0byB0aGUgbWVzc2FnZS5cbiAgICBpZiAodGhpcy5zdGF0ZS5zYW5Sb2xsZWQpIHtcbiAgICAgIHRoaXMuX19pbmxpbmVTYW5DaGVjayA9IHRoaXMuc2FuQ2hlY2suaW5saW5lQ2hlY2sub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zc1JvbGwpIHtcbiAgICAgIGNvbnN0IGEgPSBjcmVhdGVJbmxpbmVSb2xsKHRoaXMuc2FuTG9zc1JvbGwpXG4gICAgICB0aGlzLl9faW5saW5lU2FuTG9zc1JvbGwgPSBhLm91dGVySFRNTFxuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlLmludFJvbGxlZCAmJiB0aGlzLmludENoZWNrKSB7XG4gICAgICB0aGlzLl9faW5saW5lSW50Q2hlY2sgPSB0aGlzLmludENoZWNrLmlubGluZUNoZWNrLm91dGVySFRNTFxuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShTYW5DaGVja0NhcmQudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoSlNPTi5zdHJpbmdpZnkodGhpcywgcmVwbGFjZXIpKVxuXG4gICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG5cbiAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgc3RhdGljIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmh0bWwnXG4gIH1cblxuICBzdGF0aWMgY2hlY2tUYXJnZXRzIChzYW5EYXRhLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgdGFyZ2V0cyA9IFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgICBpZiAodGFyZ2V0cy5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3QgdCBvZiB0YXJnZXRzKSB7XG4gICAgICAgIGlmICh0LmFjdG9yLmlzVG9rZW4pIHtcbiAgICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKHQuYWN0b3IudG9rZW5LZXksIHNhbkRhdGEsIHtcbiAgICAgICAgICAgIGZhc3RGb3J3YXJkXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKHQuYWN0b3IuaWQsIHNhbkRhdGEsIHsgZmFzdEZvcndhcmQgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob1RhcmdldHNTYW5DaGVjaycpKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKC4uLmFyZ3MpIHtcbiAgICBjb25zdCBjaGF0Q2FyZCA9IG5ldyBTYW5DaGVja0NhcmQoLi4uYXJncylcbiAgICBpZiAoY2hhdENhcmQuYWN0b3IuaGFzSW5kZWZJbnNhbmUpIHtcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmFscmVhZHlJbnNhbmUgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGNoYXRDYXJkLmFjdG9yLnNhbiA8PSAwKSB7XG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IHRydWVcblxuICAgICAgY2hhdENhcmQuc3RhdGUuaW5zYW5pdHkgPSB0cnVlXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5wZXJtYW5lbnRseUluc2FuZSA9IHRydWVcblxuICAgICAgY2hhdENhcmQuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShTYW5DaGVja0NhcmQudGVtcGxhdGUsIGNoYXRDYXJkKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoSlNPTi5zdHJpbmdpZnkoY2hhdENhcmQsIHJlcGxhY2VyKSlcbiAgICBhd2FpdCBjaGF0Q2FyZC5zYXkoaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGNvbnN0IGh0bWxNZXNzYWdlID0gJC5wYXJzZUhUTUwobWVzc2FnZS5jb250ZW50KVswXVxuXG4gICAgY29uc3QgaHRtbENhcmQgPSBodG1sTWVzc2FnZS5xdWVyeVNlbGVjdG9yKCcuY2hhdC1jYXJkJylcblxuICAgIHJldHVybiBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbENhcmQpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCBzYW5DaGVja0NhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcblxuICAgIGNvbnN0IHNhbkNoZWNrQ2FyZCA9IG5ldyBTYW5DaGVja0NhcmQoKVxuICAgIE9iamVjdC5hc3NpZ24oc2FuQ2hlY2tDYXJkLCBzYW5DaGVja0NhcmREYXRhKVxuICAgIGlmICghc2FuQ2hlY2tDYXJkLm1lc3NhZ2VJZCkge1xuICAgICAgc2FuQ2hlY2tDYXJkLm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIH1cblxuICAgIGlmIChzYW5DaGVja0NhcmQuc2FuQ2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgc2FuQ2hlY2tDYXJkLnNhbkNoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IENvQzdDaGVjaygpLFxuICAgICAgICBzYW5DaGVja0NhcmQuc2FuQ2hlY2tcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoc2FuQ2hlY2tDYXJkLmludENoZWNrPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHNhbkNoZWNrQ2FyZC5pbnRDaGVjayA9IE9iamVjdC5hc3NpZ24oXG4gICAgICAgIG5ldyBDb0M3Q2hlY2soKSxcbiAgICAgICAgc2FuQ2hlY2tDYXJkLmludENoZWNrXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbD8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBzYW5DaGVja0NhcmQuc2FuTG9zc1JvbGwgPSBSb2xsLmZyb21EYXRhKHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbClcbiAgICB9XG5cbiAgICByZXR1cm4gc2FuQ2hlY2tDYXJkXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSAqL1xuXG5leHBvcnQgY2xhc3MgU2FuRGF0YURpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJzpjaGVja2JveCcpLmNsaWNrKCgpID0+IHRoaXMuX3RvZ2dsZUlucHV0KGh0bWwpKVxuICB9XG5cbiAgX3RvZ2dsZUlucHV0IChodG1sKSB7XG4gICAgaHRtbC5maW5kKCcqW25hbWU9XCJjdXN0b21uYW1lXCJdJykudG9nZ2xlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2FuZGF0YS5odG1sJyxcbiAgICAgIG9wdGlvbnNcbiAgICApXG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXG4gICAgICBjb25zdCBkbGcgPSBuZXcgU2FuRGF0YURpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBvcHRpb25zLmRpc3BsYXlOYW1lXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNhbkRhdGFTZWxlY3Rpb25XaW5kb3dOYW1lZCcsIHtcbiAgICAgICAgICAgIG5hbWU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbkRhdGFTZWxlY3Rpb25XaW5kb3cnKSwgLy8gVE9ETzogUmVtb3ZlIFNhbkRhdGFTZWxlY3Rpb25XaW5kb3dOYW1lZFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgVmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2FuLWRhdGEtZm9ybScpKVxuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmb3JtRGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6ICdWYWxpZGF0ZScsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIH0gZnJvbSAnLi9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuanMnXG5pbXBvcnQgeyBPcHBvc2VkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IFNhbkRhdGFEaWFsb2cgfSBmcm9tICcuL3NhbmRhdGEtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2NvYzctbGluay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhdE1lc3NhZ2Uge1xuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9BVFRSSUJVVEUgKCkge1xuICAgIHJldHVybiAnUi9BVCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDICgpIHtcbiAgICByZXR1cm4gJ1IvQ0gnXG4gIH1cblxuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9DT01CQVQgKCkge1xuICAgIHJldHVybiAnUi9DTydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX1NLSUxMICgpIHtcbiAgICByZXR1cm4gJ1IvU0snXG4gIH1cblxuICBzdGF0aWMgZ2V0IFJPTExfVFlQRV9FTkNPVU5URVIgKCkge1xuICAgIHJldHVybiAnUi9FQydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX0NPTUJJTkVEICgpIHtcbiAgICByZXR1cm4gJ0MvQ08nXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9HUk9VUCAoKSB7XG4gICAgcmV0dXJuICdDL0dSJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfTk9STUFMICgpIHtcbiAgICByZXR1cm4gJ0MvTk8nXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9PUFBPU0VEICgpIHtcbiAgICByZXR1cm4gJ0MvT1AnXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9TQU5fQ0hFQ0sgKCkge1xuICAgIHJldHVybiAnQy9TQydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX05PTkUgKCkge1xuICAgIHJldHVybiAnQy9OTydcbiAgfVxuXG4gIC8vIHN0YXRpYyBnZXQgUk9MTF9UT19DSEFUICgpIHtcbiAgLy8gICByZXR1cm4gJ1IvQ0gnXG4gIC8vIH1cblxuICAvLyBzdGF0aWMgZ2V0IFJPTExfVE9fQ0xJUEJPQVJEICgpIHtcbiAgLy8gICByZXR1cm4gJ1IvQ0wnXG4gIC8vIH1cblxuICBzdGF0aWMgY2FyZFR5cGVzIChjb25maWcpIHtcbiAgICBpZiAoY29uZmlnLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVCkge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgY29uc3Qgc2VsZWN0ID0ge1xuICAgICAgW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMXTogJ0NvQzcuUmVndWxhclJvbGxDYXJkJyxcbiAgICAgIFtDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXTogJ0NvQzcuQ29tYmluZWRSb2xsQ2FyZCcsXG4gICAgICBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEXTogJ0NvQzcuT3Bwb3NlZFJvbGxDYXJkJ1xuICAgICAgLy8gW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfR1JPVVBdOiAnQ29DNy5Hcm91cFJvbGxDYXJkJyAtIE5ZSVxuICAgIH1cbiAgICBpZiAoXG4gICAgICBjb25maWcucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFICYmXG4gICAgICBjb25maWcuYXR0cmlidXRlID09PSAnc2FuJ1xuICAgICkge1xuICAgICAgc2VsZWN0W0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLXSA9ICdDb0M3LlNhbml0eUxvc3NFbmNvdW50ZXInXG4gICAgfVxuICAgIHJldHVybiBzZWxlY3RcbiAgfVxuXG4gIHN0YXRpYyBub3JtYWxpemVSZXF1ZXN0IChvcHRpb25zKSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIG9wdGlvbnMuZXZlbnQgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBvcHRpb25zLmFjdG9yICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgKHR5cGVvZiBvcHRpb25zLnNraWxsSWQgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIHR5cGVvZiBvcHRpb25zLnNraWxsTmFtZSAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVIpXG4gICAgKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2tpbGxJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMuYWN0b3IuaXRlbXMuZ2V0KG9wdGlvbnMuc2tpbGxJZCkpIHtcbiAgICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTFxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLnNraWxsTmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3Qgc2tpbGxJZHMgPSBvcHRpb25zLmFjdG9yLmdldFNraWxsc0J5TmFtZShvcHRpb25zLnNraWxsTmFtZSlcbiAgICAgICAgaWYgKHNraWxsSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBvcHRpb25zLnNraWxsSWQgPSBza2lsbElkc1swXS5pZFxuICAgICAgICAgIG9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmF0dHJpYnV0ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgWydsY2snLCAnc2FuJ10uaW5jbHVkZXMob3B0aW9ucy5hdHRyaWJ1dGUpXG4gICAgICApIHtcbiAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1tcbiAgICAgICAgICBvcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgIF0gIT09ICd1bmRlZmluZWQnXG4gICAgICApIHtcbiAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUNcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKFxuICAgICAgdHlwZW9mIG9wdGlvbnMuZXZlbnQgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHR5cGVvZiBvcHRpb25zLnJvbGxUeXBlID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kJywge1xuICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbCcpXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKFxuICAgICAgIVtcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9DT01CSU5FRCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9HUk9VUCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcbiAgICAgIF0uaW5jbHVkZXMob3B0aW9ucy5jYXJkVHlwZSlcbiAgICApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9ySW52YWxpZENhcmRUeXBlJylcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAhW1xuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURSxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVJcbiAgICAgIF0uaW5jbHVkZXMob3B0aW9ucy5yb2xsVHlwZSlcbiAgICApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9ySW52YWxpZFJvbGxUeXBlJylcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBjb25maWcgPSB7XG4gICAgICBvcHRpb25zOiB7XG4gICAgICAgIGNhcmRUeXBlOiBvcHRpb25zLmNhcmRUeXBlLFxuICAgICAgICBzaGlmdEtleTogb3B0aW9ucy5mYXN0Rm9yd2FyZCA/PyBvcHRpb25zLmV2ZW50Py5zaGlmdEtleSA/PyBvcHRpb25zLmZhc3RGb3J3YXJkID8/IGZhbHNlLFxuICAgICAgICBhbHRLZXk6IG9wdGlvbnMuZXZlbnQ/LmFsdEtleSA/PyBmYWxzZSxcbiAgICAgICAgaXNDdHJsS2V5OiBpc0N0cmxLZXkob3B0aW9ucy5ldmVudCA/PyBmYWxzZSksXG4gICAgICAgIGNyZWF0ZUVuY291bnRlcjogb3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIgPz8gZmFsc2UsXG4gICAgICAgIG9wZW5MaW5rVG9vbDogb3B0aW9ucy5vcGVuTGlua1Rvb2wgPz8gZmFsc2UsXG4gICAgICAgIHNlbmRUb0NoYXQ6IG9wdGlvbnMuc2VuZFRvQ2hhdCA/PyBmYWxzZSxcbiAgICAgICAgc2VuZFRvQ2xpcGJvYXJkOiBvcHRpb25zLnNlbmRUb0NsaXBib2FyZCA/PyBmYWxzZSxcbiAgICAgICAgaXNDb21iYXQ6XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbGFzc0xpc3Q/LmNvbnRhaW5zKCdjb21iYXQnKSA/PyBmYWxzZSxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IG9wdGlvbnMucHJldmVudFN0YW5kYnkgPz8gZmFsc2UsXG4gICAgICAgIGJvbnVzRGljZTogMFxuICAgICAgfSxcbiAgICAgIGRpYWxvZ09wdGlvbnM6IHtcbiAgICAgICAgcm9sbFR5cGU6IG9wdGlvbnMucm9sbFR5cGUsXG4gICAgICAgIGNhcmRUeXBlOiBvcHRpb25zLmNhcmRUeXBlLFxuICAgICAgICBhdHRyaWJ1dGU6ICcnLFxuICAgICAgICBjaGF0TWVzc2FnZTogb3B0aW9ucy5jaGF0TWVzc2FnZSA/PyB0cnVlLFxuICAgICAgICBmb3JjZWRDYXJkVHlwZTogb3B0aW9ucy5mb3JjZWRDYXJkVHlwZSA/PyBmYWxzZSxcbiAgICAgICAgaGlkZURpZmZpY3VsdHk6IG9wdGlvbnMuaGlkZURpZmZpY3VsdHkgPz8gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgc3dpdGNoIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURTpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVI6XG4gICAgICAgIGNvbmZpZy5vcHRpb25zLnNraWxsSWQgPVxuICAgICAgICAgIG9wdGlvbnMuc2tpbGxJZCA/P1xuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLml0ZW1JZCA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9XG4gICAgICAgICAgb3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA/P1xuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9XG4gICAgICAgICAgb3B0aW9ucy5hdHRyaWJ1dGUgPz9cbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5hdHRyaWJcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuYXR0cmlidXRlID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9ySWQgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQuYWN0b3JJZCA/P1xuICAgICAgICAgIG9wdGlvbnMuYWN0b3IuaWRcbiAgICAgICAgY29uZmlnLm9wdGlvbnMudG9rZW5LZXkgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQudG9rZW5JZCA/P1xuICAgICAgICAgIG9wdGlvbnMuYWN0b3IudG9rZW5LZXlcbiAgICAgICAgY29uZmlnLm9wdGlvbnMud2VhcG9uQWx0U2tpbGwgPVxuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhbHRlcm5hdGl2LXNraWxsJylcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3IgPSBvcHRpb25zLmFjdG9yXG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCAmJlxuICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmlzQ29tYmF0XG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBjb25maWcub3B0aW9ucy5hY3Rvci5pdGVtcy5nZXQoY29uZmlnLm9wdGlvbnMuaXRlbUlkKVxuICAgICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgICAgICBjb25maWcub3B0aW9ucy53ZWFwb25OYW1lID0gaXRlbS5uYW1lXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgY29uZmlnLm9wdGlvbnMuYWN0b3JJZCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICAodHlwZW9mIGNvbmZpZy5vcHRpb25zLnRva2VuS2V5ID09PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgdHlwZW9mIGNvbmZpZy5vcHRpb25zLmFjdG9yID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckFjdG9yJylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCAmJlxuICAgICAgICAgIHR5cGVvZiBjb25maWcub3B0aW9ucy5za2lsbElkID09PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNraWxsJylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PVxuICAgICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUNcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljJylcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICAhZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgICAgICAgICFjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW1xuICAgICAgICAgICAgICBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpY1xuICAgICAgICAgICAgXT8udmFsdWVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICFnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICAgICAgIWNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5hdHRyaWJzW2NvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZV1cbiAgICAgICAgICAgICAgPy52YWx1ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVFxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLml0ZW1JZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLldlYXBvbicpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5vcHRpb25zLmFsdEtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmhhc1BsYXllck93bmVyID1cbiAgICAgICAgICBjb25maWcub3B0aW9ucy5hY3Rvci5oYXNQbGF5ZXJPd25lciA/PyBmYWxzZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XG4gICAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICApIHtcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyID1cbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmlzQ3RybEtleVxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0RGljZU1vZGlmaWVyID1cbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmlzQ3RybEtleVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmYWxzZVxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0RGljZU1vZGlmaWVyID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IDBcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eSA9XG4gICAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5ID8/XG4gICAgICAgICAgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbFtcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKVxuICAgICAgICAgIF1cbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdERpY2VNb2RpZmllciA9IDBcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gMFxuICAgICAgICBicmVha1xuICAgIH1cbiAgICByZXR1cm4gY29uZmlnXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdHJpZ2dlciAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgY29uZmlnID0gQ29DN0NoYXRNZXNzYWdlLm5vcm1hbGl6ZVJlcXVlc3Qob3B0aW9ucylcbiAgICBpZiAoY29uZmlnID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChcbiAgICAgIChjb25maWcub3B0aW9ucy5pc0N0cmxLZXkpICYmXG4gICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgW1xuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcbiAgICAgIF0uaW5jbHVkZXMoY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUpXG4gICAgKSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UuY3JlYXRlTGluayhjb25maWcpXG4gICAgfSBlbHNlIGlmIChcbiAgICAgIChjb25maWcub3B0aW9ucy5zZW5kVG9DaGF0IHx8IGNvbmZpZy5vcHRpb25zLnNlbmRUb0NsaXBib2FyZCB8fCBjb25maWcub3B0aW9ucy5vcGVuTGlua1Rvb2wgfHwgY29uZmlnLm9wdGlvbnMuY3JlYXRlRW5jb3VudGVyKSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORSA9PT0gY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGVcbiAgICApIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS5jcmVhdGVMaW5rKGNvbmZpZylcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5hY3RvciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgYm9udXNEaWNlID0gY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtPy5hdHRyaWJzPy5bY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXT8uYm9udXNEaWNlXG4gICAgICAgICAgaWYgKGJvbnVzRGljZSkge1xuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBib251c0RpY2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGJvbnVzRGljZSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbT8uY2hhcmFjdGVyaXN0aWNzPy5bY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWNdPy5ib251c0RpY2VcbiAgICAgICAgICBpZiAoYm9udXNEaWNlKSB7XG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IGJvbnVzRGljZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuaXRlbUlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGl0ZW1Nb2RpZmllcnMgPSBPYmplY3QudmFsdWVzKGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5za2lsbHMpLmZpbmQoayA9PiBrLmZvdW5kcnlJRCA9PT0gY29uZmlnLm9wdGlvbnMuaXRlbUlkKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbU1vZGlmaWVycy5ib251c0RpY2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IGl0ZW1Nb2RpZmllcnMuYm9udXNEaWNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gTWF0aC5taW4oTWF0aC5tYXgoY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIsIC0yKSwgMilcbiAgICAgIH1cbiAgICAgIGlmICghY29uZmlnLm9wdGlvbnMuc2hpZnRLZXkpIHtcbiAgICAgICAgYXdhaXQgQ29DN0NoYXRNZXNzYWdlLmNyZWF0ZVJvbGwoY29uZmlnKVxuICAgICAgfVxuICAgICAgcmV0dXJuIENvQzdDaGF0TWVzc2FnZS5ydW5Sb2xsKGNvbmZpZylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlTGluayAoY29uZmlnKSB7XG4gICAgc3dpdGNoIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURTpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQzpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVQ6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEw6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgbGlua0RhdGEgPSB7XG4gICAgICAgICAgICB0eXBlOiAnQ29DN0xpbmsnXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCkge1xuICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLXG4gICAgICAgICAgICBsaW5rRGF0YS5saW5rVHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5TS0lMTFxuICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLml0ZW1zLmdldChjb25maWcub3B0aW9ucy5za2lsbElkKT8uc2hvcnROYW1lXG4gICAgICAgICAgICBpZiAoIWxpbmtEYXRhLm5hbWUpIHJldHVyblxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMpIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS1xuICAgICAgICAgICAgbGlua0RhdGEubGlua1R5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuQ0hBUkFDVEVSSVNUSUNcbiAgICAgICAgICAgIGxpbmtEYXRhLm5hbWUgPSBjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpY1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFKSB7XG4gICAgICAgICAgICBpZiAoKGNvbmZpZy5vcHRpb25zLmFsdEtleSB8fCBjb25maWcub3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIpICYmIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHtcbiAgICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1NcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS1xuICAgICAgICAgICAgICBsaW5rRGF0YS5saW5rVHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5BVFRSSUJVVEVcbiAgICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTVxuICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLndlYXBvbk5hbWVcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUikge1xuICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1NcbiAgICAgICAgICAgIGxpbmtEYXRhLnNhbk1pbiA9IGNvbmZpZy5vcHRpb25zLmFjdG9yPy5zeXN0ZW0/LnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrUGFzc2VkXG4gICAgICAgICAgICBsaW5rRGF0YS5zYW5NYXggPSBjb25maWcub3B0aW9ucy5hY3Rvcj8uc3lzdGVtPy5zcGVjaWFsPy5zYW5Mb3NzPy5jaGVja0ZhaWxsZWRcbiAgICAgICAgICAgIGxpbmtEYXRhLnNhblJlYXNvbiA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlPy5sZW5ndGhcbiAgICAgICAgICAgICAgPyBjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgICAgICA6IGNvbmZpZy5vcHRpb25zLmFjdG9yLm5hbWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpID09PSAnYmxpbmRyb2xsJykge1xuICAgICAgICAgICAgbGlua0RhdGEuYmxpbmQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjb25maWcub3B0aW9ucy5zZW5kVG9DaGF0KSB7XG4gICAgICAgICAgICBDb0M3TGluay50b0NoYXRNZXNzYWdlKGxpbmtEYXRhKVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLm9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkKSB7XG4gICAgICAgICAgICBDb0M3TGluay5mcm9tRHJvcERhdGEobGlua0RhdGEpLnRoZW4obGluayA9PiB7XG4gICAgICAgICAgICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKGxpbmsubGluaylcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUobGlua0RhdGEsIHsgYWN0b3JzOiBbY29uZmlnLm9wdGlvbnMuYWN0b3JdLmZpbHRlcihhID0+IGEub3duZXJzLmxlbmd0aCksIGhhc01vZGlmaWVyczogY29uZmlnLm9wdGlvbnMuc2hpZnRLZXkgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlUm9sbCAoY29uZmlnKSB7XG4gICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShjb25maWcuZGlhbG9nT3B0aW9ucylcbiAgICBpZiAodXNhZ2UpIHtcbiAgICAgIGNvbnN0IGNhcmRUeXBlID0gdXNhZ2UuZ2V0KCdjYXJkVHlwZScpXG4gICAgICBpZiAoY2FyZFR5cGUpIHtcbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPSBjYXJkVHlwZVxuICAgICAgfVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICB1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKVxuICAgICAgKVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJ1blJvbGwgKGNvbmZpZykge1xuICAgIHN3aXRjaCAoY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUpIHtcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0s6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBzYW5EYXRhID0gYXdhaXQgU2FuRGF0YURpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgcHJvbXB0TGFiZWw6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlmIChzYW5EYXRhKSB7XG4gICAgICAgICAgICBsZXQgc2FuTWluID0gc2FuRGF0YS5nZXQoJ3Nhbk1pbicpIHx8IDBcbiAgICAgICAgICAgIGxldCBzYW5NYXggPSBzYW5EYXRhLmdldCgnc2FuTWF4JykgfHwgMFxuICAgICAgICAgICAgY29uc3Qgc2FuUmVhc29uID0gc2FuRGF0YS5nZXQoJ3NhblJlYXNvbicpXG5cbiAgICAgICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHNhbk1pbikpKSBzYW5NaW4gPSBOdW1iZXIoc2FuTWluKVxuICAgICAgICAgICAgaWYgKCFpc05hTihOdW1iZXIoc2FuTWF4KSkpIHNhbk1heCA9IE51bWJlcihzYW5NYXgpXG5cbiAgICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUoXG4gICAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9yLmFjdG9yS2V5LFxuICAgICAgICAgICAgICB7IHNhbk1pbiwgc2FuTWF4LCBzYW5SZWFzb24gfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNhbk1vZGlmaWVyOiBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllcixcbiAgICAgICAgICAgICAgICBzYW5EaWZmaWN1bHR5OiBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5LFxuICAgICAgICAgICAgICAgIGZhc3RGb3J3YXJkOiBjb25maWcub3B0aW9ucy5zaGlmdEtleVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyXG4gICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5XG4gICAgICAgIGNoZWNrLmFjdG9yID0gIWNvbmZpZy5vcHRpb25zLnRva2VuS2V5XG4gICAgICAgICAgPyBjb25maWcub3B0aW9ucy5hY3RvcklkXG4gICAgICAgICAgOiBjb25maWcub3B0aW9ucy50b2tlbktleVxuICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gY29uZmlnLmRpYWxvZ09wdGlvbnMuZmxhdERpY2VNb2RpZmllclxuICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgICAgY2hlY2suc3RhbmRieSA9XG4gICAgICAgICAgIWNvbmZpZy5vcHRpb25zLnByZXZlbnRTdGFuZGJ5ICYmXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgZ2FtZS51c2VyLmlzR00gJiZcbiAgICAgICAgICBjb25maWcub3B0aW9ucy5oYXNQbGF5ZXJPd25lclxuICAgICAgICBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwpIHtcbiAgICAgICAgICBjaGVjay5za2lsbCA9IGNvbmZpZy5vcHRpb25zLnNraWxsSWRcbiAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICAgICAgKSB7XG4gICAgICAgICAgYXdhaXQgY2hlY2sucm9sbEF0dHJpYnV0ZShjb25maWcub3B0aW9ucy5hdHRyaWJ1dGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljKVxuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5jaGF0TWVzc2FnZSkge1xuICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICByZXN1bHQ6IGNoZWNrLm1vZGlmaWVkUmVzdWx0LFxuICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogY2hlY2sucm9sbGVkU3VjY2Vzc0xldmVsLFxuICAgICAgICAgIGlzRnVtYmxlOiBjaGVjay5pc0Z1bWJsZSxcbiAgICAgICAgICBpc0NyaXRpY2FsOiBjaGVjay5pc0NyaXRpY2FsLFxuICAgICAgICAgIHN1Y2Nlc3NMZXZlbHM6IHtcbiAgICAgICAgICAgIDE6IGNoZWNrLnJlZ3VsYXJUaHJlc2hvbGQsXG4gICAgICAgICAgICAyOiBjaGVjay5oYXJkVGhyZXNob2xkLFxuICAgICAgICAgICAgMzogY2hlY2suZXh0cmVtZVRocmVzaG9sZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGFzc2VkOiBjaGVjay5wYXNzZWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRUQ6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORUQ6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICAgIGNoZWNrLmFjdG9yID0gIWNvbmZpZy5vcHRpb25zLnRva2VuS2V5XG4gICAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9ySWRcbiAgICAgICAgICAgIDogY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgICBjaGVjay5jaGFyYWN0ZXJpc3RpYyA9IGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgY2hlY2suYXR0cmlidXRlID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXG4gICAgICAgICAgY2hlY2suc2tpbGxJZCA9IGNvbmZpZy5vcHRpb25zLnNraWxsSWRcbiAgICAgICAgICBjaGVjay5yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICAgICAgICBjaGVjay5pbml0aWF0b3IgPSBnYW1lLnVzZXIuaWRcbiAgICAgICAgICBsZXQgZGF0YSA9IHt9XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgICAgdHlwZTogT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgICAgIGNvbWJhdDogY29uZmlnLm9wdGlvbnMuaXNDb21iYXQsXG4gICAgICAgICAgICAgIGFjdGlvbjogJ25ldydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoZWNrLml0ZW0gPSBjb25maWcub3B0aW9ucy5pdGVtSWRcbiAgICAgICAgICAgIGNoZWNrLndlYXBvbkFsdFNraWxsID0gY29uZmlnLm9wdGlvbnMud2VhcG9uQWx0U2tpbGxcbiAgICAgICAgICAgIGNoZWNrLmRlbnlQdXNoID0gdHJ1ZSAvLyBPcHBvc2VkIHJvbGxlZCBjYW4ndCBiZSBwdXNoZWQuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgIHR5cGU6IENvbWJpbmVkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICAgICAgYWN0aW9uOiAnbmV3J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgICAgICB9XG4gICAgICAgICAgZGF0YS5yb2xsID0gY2hlY2suSlNPTlJvbGxEYXRhXG4gICAgICAgICAgZGF0YS5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuY2FyZFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb21iaW5lZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29uQ2hlY2sge1xuICBjb25zdHJ1Y3RvciAoYWN0b3JJZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIpIHtcbiAgICB0aGlzLmNoZWNrID0gbmV3IENvQzdDaGVjayhhY3RvcklkKVxuICAgIHRoaXMuY2hlY2suY2hhcmFjdGVyaXN0aWMgPSAnY29uJ1xuICAgIHRoaXMuY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmNoZWNrLmRlbnlQdXNoID0gdHJ1ZVxuICAgIHRoaXMuYWN0b3JJZCA9IGFjdG9ySWRcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9pc0JsaW5kKSB7XG4gICAgICB0aGlzLl9pc0JsaW5kID0gdGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCdcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2lzQmxpbmRcbiAgfVxuXG4gIHNldCBpc0JsaW5kICh4KSB7XG4gICAgdGhpcy5faXNCbGluZCA9IHhcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcklkKSByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcklkKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc2V0IGFjdG9ySWQgKHgpIHtcbiAgICB0aGlzLl9hY3RvcklkID0geFxuICAgIHRoaXMuY2hlY2suYWN0b3IgPSB4XG4gIH1cblxuICBnZXQgYWN0b3JJZCAoKSB7XG4gICAgaWYgKHRoaXMuX2FjdG9ySWQpIHJldHVybiB0aGlzLl9hY3RvcklkXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB0b2tlbktleSAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikgcmV0dXJuIHRoaXMuYWN0b3IudG9rZW5LZXlcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGlzU3VjY2VzcyAoKSB7XG4gICAgaWYgKHRoaXMuY2hlY2spIHJldHVybiB0aGlzLmNoZWNrLmlzU3VjY2Vzc1xuICAgIGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNSb2xsZWQgKCkge1xuICAgIGlmICh0aGlzLmNoZWNrICYmIHRoaXMuY2hlY2suZGljZXMgJiYgdGhpcy5jaGVjay5kaWNlcy50b3RhbCkgcmV0dXJuIHRydWVcbiAgICBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21DYXJkIChjYXJkKSB7XG4gICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGNvbkNoZWNrLCBjYXJkKVxuICAgIGNvbnN0IGh0bWxDaGVjayA9IGNhcmQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChodG1sQ2hlY2ssIGNvbkNoZWNrLmNoZWNrKVxuICAgIGNvbkNoZWNrLm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIHJldHVybiBjb25DaGVja1xuICB9XG5cbiAgYXN5bmMgZ2V0Q2hlY2tFbGVtZW50ICgpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbC1yZXN1bHQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMuY2hlY2spXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuICAgIGlmIChodG1sRWxlbWVudCkge1xuICAgICAgaHRtbEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnY2hhdC1jYXJkJywgJ2l0ZW0tY2FyZCcsICdyb2xsLWNhcmQnKVxuICAgICAgcmV0dXJuIGh0bWxFbGVtZW50XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29uLWNoZWNrLmh0bWwnXG5cbiAgICBpZiAoZmFzdEZvcndhcmQpIHtcbiAgICAgIGF3YWl0IHRoaXMucm9sbENvbigpXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGlmIChmYXN0Rm9yd2FyZCkge1xuICAgICAgY29uc3QgY2hlY2sgPSBodG1sRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgICAgY2hlY2sucmVwbGFjZVdpdGgoYXdhaXQgdGhpcy5nZXRDaGVja0VsZW1lbnQoKSlcbiAgICB9XG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgbGV0IHNwZWFrZXJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMudG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy50b2tlblxuICAgICAgZWxzZSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGZsYXZvcjogdGhpcy5mbGF2b3IsXG4gICAgICBjb250ZW50OiBodG1sRWxlbWVudC5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpKVxuICAgICkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpIC8vIENoYW5nZSBmb3IgdXNlclxuICAgIH1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJvbGxDb24gKCkge1xuICAgIHRoaXMuY2hlY2suaGlkZURpY2VSZXN1bHQgPSB0cnVlXG4gICAgYXdhaXQgdGhpcy5jaGVjay5fcGVyZm9ybSgpXG4gICAgaWYgKCF0aGlzLmlzQmxpbmQgJiYgIXRoaXMuaXNSb2xsZWQgJiYgIXRoaXMuaXNTdWNjZXNzKSB7XG4gICAgICBpZiAodGhpcy5zdGF5QWxpdmUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmFwcGxpZWQgPSB0cnVlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2Nvbi1jaGVjay5odG1sJ1xuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGNvbnN0IGNoZWNrID0gaHRtbEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICBjaGVjay5yZXBsYWNlV2l0aChhd2FpdCB0aGlzLmdldENoZWNrRWxlbWVudCgpKVxuXG4gICAgaWYgKCF0aGlzLmlzQmxpbmQgJiYgdGhpcy5pc1JvbGxlZCAmJiAhdGhpcy5pc1N1Y2Nlc3MpIHtcbiAgICAgIGlmICh0aGlzLnN0YXlBbGl2ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5kZWFkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkgcmV0dXJuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7IGNvbnRlbnQ6IGh0bWxFbGVtZW50Lm91dGVySFRNTCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUgKi9cbmV4cG9ydCBjbGFzcyBTa2lsbFNlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuc2VsZWN0LXNraWxsJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdFNraWxsQ2xpY2tlZChldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TZWxlY3RTa2lsbENsaWNrZWQgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggdGhpcy5kYXRhLmRhdGEuYWN0b3JJZCk7XG4gICAgLy8gYXdhaXQgYWN0b3IuYWRkU2tpbGwoIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLCB0aGlzLmRhdGEuZGF0YS50eXBlKTtcbiAgICB0aGlzLmRhdGEuZGF0YS5za2lsbHNbTnVtYmVyKGxpLmRhdGFzZXQuaW5kZXgpXS5zZWxlY3RlZCA9IHRydWVcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBpZiAoIXRoaXMuZGF0YS5kYXRhLmFkZGVkKSB0aGlzLmRhdGEuZGF0YS5hZGRlZCA9IDBcbiAgICB0aGlzLmRhdGEuZGF0YS5hZGRlZCsrXG4gICAgY29uc3QgZm9ybSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnNraWxsLXNlbGVjdG9yJylcbiAgICBjb25zdCBkaXZDb3VudCA9IGZvcm0ucXVlcnlTZWxlY3RvcignLmNvdW50JylcbiAgICBkaXZDb3VudC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5hZGRlZFxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5hZGRlZCA+PSB0aGlzLmRhdGEuZGF0YS5vcHRpb25zQ291bnQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNlbGVjdC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApIC8vIFJlbmRlciB0ZW1wbGF0ZSBidWcgYXZlYyBjZXJ0YWluZXMgZGF0YVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBTa2lsbFNlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFkYXRhLmFkZGVkID49IGRhdGEub3B0aW9uc0NvdW50KSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gZGF0YS5za2lsbHMuZmlsdGVyKHNraWxsID0+IHNraWxsLnNlbGVjdGVkKVxuICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoc2VsZWN0ZWQpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnc2tpbGwtc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXG5cbmV4cG9ydCBjbGFzcyBQb2ludFNlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1uYW1lJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdENoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uQnV0dG9uQ2xpY2tlZChldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1MaXN0ID0gbGkuY2xvc2VzdCgnLml0ZW0tbGlzdCcpXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1MaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3RhYmxlJykpIHtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2l0ZW0uZGF0YXNldC5rZXldLnNlbGVjdGVkID0gZmFsc2VcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljc1tpdGVtLmRhdGFzZXQua2V5XS5vcHRpb25hbCA9IGZhbHNlXG4gICAgfVxuICAgICQobGkpLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcpXG4gICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS5zZWxlY3RlZCA9IHRydWVcbiAgICBjb25zdCB0b3RhbFBvaW50cyA9IGxpXG4gICAgICAuY2xvc2VzdCgnI3NraWxsLXNlbGVjdGlvbi1mb3JtJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcucG9pbnRzJylcbiAgICB0b3RhbFBvaW50cy5pbm5lclRleHQgPVxuICAgICAgdGhpcy5kYXRhLmRhdGEudG90YWwgK1xuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS5tdWx0aXBsaWVyICpcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2xpLmRhdGFzZXQua2V5XS52YWx1ZVxuICAgIGNvbnN0IGJ1dHRvbiA9IGxpXG4gICAgICAuY2xvc2VzdCgnI3NraWxsLXNlbGVjdGlvbi1mb3JtJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCdidXR0b24udmFsaWRhdGUnKVxuICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbmFjdGl2ZScpXG4gICAgdGhpcy5kYXRhLmRhdGEucmVzb2x2ZWQgPSB0cnVlXG4gICAgLy8gY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoIHRoaXMuZGF0YS5kYXRhLmFjdG9ySWQpO1xuICAgIC8vIGF3YWl0IGFjdG9yLmFkZFNraWxsKCB0aGlzLmRhdGEuZGF0YS5za2lsbHNbTnVtYmVyKGxpLmRhdGFzZXQuaW5kZXgpXSwgdGhpcy5kYXRhLmRhdGEudHlwZSk7XG4gICAgLy8gZXZlbnQuY3VycmVudFRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIC8vIGlmKCAhdGhpcy5kYXRhLmRhdGEuYWRkZWQpIHRoaXMuZGF0YS5kYXRhLmFkZGVkID0gMDtcbiAgICAvLyB0aGlzLmRhdGEuZGF0YS5hZGRlZCsrO1xuICAgIC8vIGNvbnN0IGZvcm0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5wb2ludC1zZWxlY3RvcicpO1xuICAgIC8vIGNvbnN0IGRpdkNvdW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuY291bnQnKTtcbiAgICAvLyBkaXZDb3VudC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5hZGRlZDtcbiAgICAvLyBpZiggdGhpcy5kYXRhLmRhdGEuYWRkZWQgPj0gdGhpcy5kYXRhLmRhdGEub3B0aW9ucykgdGhpcy5jbG9zZSgpO1xuICAgIC8vIHJldHVybiBldmVudDtcbiAgfVxuXG4gIGFzeW5jIF9vbkJ1dHRvbkNsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5hY3RpdmUnKSkgcmV0dXJuXG4gICAgc3VwZXIuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvcG9pbnQtc2VsZWN0Lmh0bWwnLFxuICAgICAgZGF0YVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgUG9pbnRTZWxlY3REaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnJlc29sdmVkKSByZXR1cm4gcmVzb2x2ZShkYXRhKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFyLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCByZW5kZXJUZW1wbGF0ZSAqL1xuZXhwb3J0IGNsYXNzIENoYXJhY1NlbGVjdERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1uYW1lJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNlbGVjdENoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgdGhpcy5kYXRhLmRhdGEuc2VsZWN0ZWQgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY2hhci1zZWxlY3QuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDaGFyYWNTZWxlY3REaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChkYXRhLnNlbGVjdGVkKSByZXR1cm4gcmVzb2x2ZShkYXRhLnNlbGVjdGVkKVxuICAgICAgICAgICAgZWxzZSByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFyLXNlbGVjdCddIH1cbiAgICAgIClcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCAqL1xuZXhwb3J0IGNsYXNzIENoYXJhY1JvbGxEaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgb3B0aW9ucykge1xuICAgIHN1cGVyKGRhdGEsIG9wdGlvbnMpXG5cbiAgICB0aGlzLnJvbGxlZCA9IGRhdGEucm9sbGVkIHx8IHt9XG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5vbignY2hhbmdlJywgJ2lucHV0JywgdGhpcy5fb25DaGFuZ2VJbnB1dC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ3N1Ym1pdCcsICdmb3JtJywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vblJvbGxDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5pbmNyZWFzZS1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuZGVjcmVhc2UtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJlc2V0LWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uUmVzZXRDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJ2J1dHRvbicsIHRoaXMuX29uQnV0dG9uLmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5pbmNyZWFzZUNoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLmRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMucmVzZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25CdXR0b24gKGV2ZW50KSB7XG4gICAgY29uc3QgYWN0aW9uID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGlmIChhY3Rpb24gPT09ICdyb2xsJykge1xuICAgICAgZm9yIChjb25zdCBjaGFyIG9mIFtcbiAgICAgICAgJ3N0cicsXG4gICAgICAgICdjb24nLFxuICAgICAgICAnc2l6JyxcbiAgICAgICAgJ2RleCcsXG4gICAgICAgICdhcHAnLFxuICAgICAgICAnaW50JyxcbiAgICAgICAgJ3BvdycsXG4gICAgICAgICdlZHUnLFxuICAgICAgICAnbHVjaydcbiAgICAgIF0pIHtcbiAgICAgICAgYXdhaXQgdGhpcy5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhcilcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFxuICAgICAgYWN0aW9uID09PSAndmFsaWRhdGUnICYmXG4gICAgICAhZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luYWN0aXZlJylcbiAgICApIHtcbiAgICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9XG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBjb25zdCBmb3JtdWxhID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzW2tleV1cbiAgICBpZiAoaW5wdXQgJiYgZm9ybXVsYSkge1xuICAgICAgaWYgKGlzTmFOKE51bWJlcihmb3JtdWxhKSkpIHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGZvcm11bGEpXG4gICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICByb2xsLnRvTWVzc2FnZSh7XG4gICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VSb2xsaW5nQ2hhcmFjdGVyaXN0aWMnLCB7XG4gICAgICAgICAgICBsYWJlbDogdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLmxpc3Rba2V5XS5sYWJlbCxcbiAgICAgICAgICAgIGZvcm11bGFcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICBpbnB1dC52YWx1ZSA9IHJvbGwudG90YWxcbiAgICAgIH0gZWxzZSBpbnB1dC52YWx1ZSA9IE51bWJlcihmb3JtdWxhKVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgICAgaWYgKCF0aGlzLnJvbGxlZCkgdGhpcy5yb2xsZWQgPSB7fVxuICAgICAgdGhpcy5yb2xsZWRba2V5XSA9IHRydWVcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIGluY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQpIHtcbiAgICAgIGlucHV0LnZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKSArIDFcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIGRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQgJiYgTnVtYmVyKGlucHV0LnZhbHVlKSA+IDApIHtcbiAgICAgIGlucHV0LnZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKSAtIDFcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gICAgdGhpcy5jaGVja1RvdGFsKClcbiAgfVxuXG4gIGFzeW5jIHJlc2V0Q2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKGBsaS5pdGVtW2RhdGEta2V5PSR7a2V5fV1gKVxuICAgIGNvbnN0IGlucHV0ID0gbGk/LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JylcbiAgICBpZiAoaW5wdXQpIHtcbiAgICAgIGlucHV0LnZhbHVlID0gbnVsbFxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gMFxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlSW5wdXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGlucHV0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2lucHV0Lm5hbWVdID0gdmFsdWVcbiAgICB9XG5cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgY2hlY2tUb3RhbCAoKSB7XG4gICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCA9IDBcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNcbiAgICApKSB7XG4gICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCArPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJy5wb2ludHMnKVxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgTnVtYmVyKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwpICE9PVxuICAgICAgICBOdW1iZXIodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZSlcbiAgICAgICkge1xuICAgICAgICB2YWxpZGF0aW9uLmNsYXNzTGlzdC5hZGQoJ3dhcm5pbmcnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsaWRhdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCd3YXJuaW5nJylcbiAgICAgICAgY29uc3QgdmFsaWRhdGVCdXR0b24gPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi52YWxpZGF0ZScpXG4gICAgICAgIHZhbGlkYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJylcbiAgICAgICAgdGhpcy5kYXRhLmRhdGEudmFsaWRhdGUgPSB0cnVlXG4gICAgICB9XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbGlkYXRpb24ucXVlcnlTZWxlY3RvcignLnZhbHVlJylcbiAgICAgIHZhbHVlLmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudmFsdWVcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbCA9IHZhbGlkYXRpb24ucXVlcnlTZWxlY3RvcignLnRvdGFsJylcbiAgICB0b3RhbC5pbm5lclRleHQgPSB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsXG5cbiAgICBpZiAodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmVuYWJsZWQpIHtcbiAgICAgIGlmICh0aGlzLnJvbGxlZCkge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9XG4gICAgICAgICAgIU9iamVjdC5lbnRyaWVzKHRoaXMucm9sbGVkKS5maW5kKGVsID0+ICFlbCkgJiZcbiAgICAgICAgICBPYmplY3QuZW50cmllcyh0aGlzLnJvbGxlZCkubGVuZ3RoID09PSA5XG4gICAgICAgIGlmICh0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSkge1xuICAgICAgICAgIGNvbnN0IHZhbGlkYXRlQnV0dG9uID1cbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignYnV0dG9uLnZhbGlkYXRlJylcbiAgICAgICAgICB2YWxpZGF0ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbmFjdGl2ZScpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25TdWJtaXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IHJvbGxlZCA9IHt9XG4gICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsID0gMFxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlcykpIHtcbiAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICBkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgKz0gdmFsdWUgfHwgMFxuICAgICAgfVxuICAgICAgaWYgKCFpc05hTih2YWx1ZSkgJiYgdmFsdWUgPiAwKSB7XG4gICAgICAgIHJvbGxlZFtrZXldID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCkge1xuICAgICAgaWYgKFxuICAgICAgICBOdW1iZXIoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsKSAhPT1cbiAgICAgICAgTnVtYmVyKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZSlcbiAgICAgICkge1xuICAgICAgICBkYXRhLnBvaW50c1dhcm5pbmcgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jaGFyLXJvbGwuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDaGFyYWNSb2xsRGlhbG9nKFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIHJvbGxlZCxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEudmFsaWRhdGUpIHJldHVybiByZXNvbHZlKHRydWUpXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSAqL1xuZXhwb3J0IGNsYXNzIFNraWxsU3BlY1NlbGVjdERpYWxvZyB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKFxuICAgIHNraWxscyxcbiAgICBzcGVjaWFsaXphdGlvbk5hbWUsXG4gICAgYmFzZVZhbHVlID0gbnVsbCxcbiAgICBuYW1lID0gbnVsbFxuICApIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNwZWMtc2VsZWN0Lmh0bWwnLFxuICAgICAge1xuICAgICAgICBoYXNTa2lsbHM6IHNraWxscy5sZW5ndGggPiAwLFxuICAgICAgICBza2lsbHMsXG4gICAgICAgIGJhc2U6IGJhc2VWYWx1ZSxcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXG4gICAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IG5hbWVcbiAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTZWxlY3RCYXNlJywgeyBuYW1lIH0pXG4gICAgICAgICAgOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNraWxsU3BlY1NlbGVjdFRpdGxlJywge1xuICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246IHNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICAgIH0pLFxuICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2tpbGwtc2VsZWN0LWZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ3ZhbGlkYXRlJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHtcbiAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRm9ybUFwcGxpY2F0aW9uLCBnYW1lLCBtZXJnZU9iamVjdCAqL1xuXG5leHBvcnQgY2xhc3MgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NraWxsLW5hbWUtZGlhbG9nJ10sXG4gICAgICB0aXRsZTogJycsXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QuaGJzJyxcbiAgICAgIHdpZHRoOiA0MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGdldCB0aXRsZSAoKSB7XG4gICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTcGVjU2VsZWN0VGl0bGUnLCB7XG4gICAgICBzcGVjaWFsaXphdGlvbjogdGhpcy5vYmplY3Quc3BlY2lhbGl6YXRpb25OYW1lXG4gICAgfSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnLnN1Ym1pdC1idXR0b24nKS5jbGljayh0aGlzLl9vbkNsaWNrU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdbbmFtZT1leGlzdGluZy1za2lsbF0nKS5jaGFuZ2UodGhpcy5fb25TZWxlY3RDaGFuZ2UuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdENoYW5nZSAoZXZlbnQpIHtcbiAgICB0aGlzLm9iamVjdC5zZWxlY3RlZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tTdWJtaXQgKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMub2JqZWN0LnNlbGVjdGVkID09PSAnJykge1xuICAgICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCdmb3JtJylcbiAgICAgIHRoaXMub2JqZWN0Lm5hbWUgPSAob2JqLmZpbmQoJ2lucHV0W25hbWU9bmV3LXNraWxsLW5hbWVdJykudmFsKCkgPz8gJycpXG4gICAgICB0aGlzLm9iamVjdC5iYXNlVmFsdWUgPSAob2JqLmZpbmQoJ2lucHV0W25hbWU9YmFzZS12YWx1ZV0nKS52YWwoKSA/PyAnJylcbiAgICB9XG4gICAgaWYgKHRoaXMub2JqZWN0LnNlbGVjdGVkID09PSAnJyAmJiB0aGlzLm9iamVjdC5uYW1lID09PSAnJykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHRoaXMub2JqZWN0LnJlc29sdmUoe1xuICAgICAgc2VsZWN0ZWQ6IHRoaXMub2JqZWN0LnNlbGVjdGVkLFxuICAgICAgbmFtZTogdGhpcy5vYmplY3QubmFtZSxcbiAgICAgIGJhc2VWYWx1ZTogdGhpcy5vYmplY3QuYmFzZVZhbHVlXG4gICAgfSlcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoeyBza2lsbHMgPSBbXSwgYWxsb3dDdXN0b20gPSBmYWxzZSwgZml4ZWRCYXNlVmFsdWUgPSBmYWxzZSwgc3BlY2lhbGl6YXRpb25OYW1lID0gJycsIGxhYmVsID0gJycsIGJhc2VWYWx1ZSA9IG51bGwgfSA9IHt9KSB7XG4gICAgY29uc3Qgc2VsZWN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHNraWxscykge1xuICAgICAgc2VsZWN0LnB1c2goe1xuICAgICAgICBpZDogc2tpbGwuaWQsXG4gICAgICAgIG5hbWU6IHNraWxsLm5hbWUsXG4gICAgICAgIGJhc2U6IHNraWxsLnN5c3RlbS5iYXNlXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBuZXcgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZyh7XG4gICAgICAgIHNwZWNpYWxpemF0aW9uTmFtZSxcbiAgICAgICAgYWxsb3dDdXN0b20sXG4gICAgICAgIGZpeGVkQmFzZVZhbHVlLFxuICAgICAgICBhbGxvd1NlbGVjdDogc2tpbGxzLmxlbmd0aCA+IDAsXG4gICAgICAgIHNraWxsczogc2VsZWN0LFxuICAgICAgICBzZWxlY3RlZDogJycsXG4gICAgICAgIG5hbWU6ICcnLFxuICAgICAgICBsYWJlbCxcbiAgICAgICAgYmFzZVZhbHVlLFxuICAgICAgICByZXNvbHZlXG4gICAgICB9LCB7fSkucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5leHBvcnQgY2xhc3MgU2tpbGxWYWx1ZURpYWxvZyB7XG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG5hbWUgPSBudWxsLCBiYXNlVmFsdWUgPSBudWxsKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC12YWx1ZS5odG1sJyxcbiAgICAgIHsgYmFzZTogYmFzZVZhbHVlLCBuYW1lIH1cbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGZvcm1EYXRhID0gbnVsbFxuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNraWxsVmFsdWUnLCB7IG5hbWUgfSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNza2lsbC1zZWxlY3QtZm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAndmFsaWRhdGUnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4vbWVsZWUtdGFyZ2V0LmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlUmVzb2x0aW9uIHtcbiAgY29uc3RydWN0b3IgKFxuICAgIGluaXRpYXRvck1lc3NhZ2UgPSBudWxsLFxuICAgIHRhcmdldE1lc3NhZ2UgPSBudWxsLFxuICAgIG1lc3NhZ2VJZCA9IG51bGxcbiAgKSB7XG4gICAgdGhpcy5pbml0aWF0b3JNZXNzYWdlID0gaW5pdGlhdG9yTWVzc2FnZVxuICAgIHRoaXMudGFyZ2V0TWVzc2FnZSA9IHRhcmdldE1lc3NhZ2VcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICB9XG5cbiAgYXN5bmMgcHJlQ3JlYXRlTWVzc2FnZSAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICAvLyBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7YWN0b3I6IHRoaXMuYWN0b3J9KTtcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xuXG4gICAgLy8gY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlcjtcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIC8vIEFkZCBpbWFnZSB0byBjYXJkLlxuICAgIC8vIGRhdGEuZmxhZ3MgPSB7XG4gICAgLy8gICBpbWc6IHRoaXMuYWN0b3IuaXNUb2tlbiA/IHRoaXMuYWN0b3IudG9rZW4uZGF0YS5pbWc6IHRoaXMuYWN0b3IuaW1nXG4gICAgLy8gfTtcblxuICAgIGNvbnN0IHJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhyb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHJvbGxNb2RlID09PSAnYmxpbmRyb2xsJyApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICB0aGlzLm1lc3NhZ2VJZCA9IGNoYXRNZXNzYWdlLmlkXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldE1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZCh0aGlzLnRhcmdldE1lc3NhZ2UpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdGFyZ2V0VG9rZW4gKCkge1xuICAgIGlmICh0aGlzLnRhcmdldCkgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMudGFyZ2V0LmFjdG9yS2V5KVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaW5pdGlhdG9yICgpIHtcbiAgICBpZiAodGhpcy5pbml0aWF0b3JNZXNzYWdlKSB7XG4gICAgICByZXR1cm4gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQodGhpcy5pbml0aWF0b3JNZXNzYWdlKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGluaXRpYXRvclRva2VuICgpIHtcbiAgICBpZiAodGhpcy5pbml0aWF0b3IpIHtcbiAgICAgIHJldHVybiBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmluaXRpYXRvci5hY3RvcktleSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHJlc29sdmUgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgc3dpdGNoICh0aGlzLnRhcmdldC5hY3Rpb24pIHtcbiAgICAgICAgY2FzZSAnbm9SZXNwb25zZSc6XG4gICAgICAgICAgaWYgKHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLmFjdGlvbiA9ICdyb2xsLW1lbGVlLWRhbWFnZSdcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYXRvck1pc3NlZCcsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdkb2RnZSc6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLmFjdGlvbiA9ICdyb2xsLW1lbGVlLWRhbWFnZSdcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Eb2RnZVN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LnNraWxsLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMudGFyZ2V0LnNraWxsLm5hbWVcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ2RvZGdlJ1xuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gVE9ETyB2ZXJpZmllciBsYSBjb25kaXRpb24gPD0gdnMgPFxuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLnRhcmdldC53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnbWFuZXV2ZXInOlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IDAgJiZcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsIDw9IDBcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gbnVsbFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPj0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYW5ldXZlclN1Y2Nlc3MnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMudGFyZ2V0Lm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMudGFyZ2V0LnNraWxsLmRhdGEuaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQuc2tpbGwubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gMCkge1xuICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgIH0pXG4gICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWF0b3JNaXNzZWQnLCB7XG4gICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgIH0pXG4gICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICh0aGlzLndpbm5lcikge1xuICAgICAgaWYgKHRoaXMud2lubmVyLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICB0aGlzLndpbm5lci5yb2xsLmNyaXRpY2FsRGFtYWdlID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy53aW5uZXIucm9sbC5jcml0aWNhbERhbWFnZSA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcbiAgICBpZiAodGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICAgIGlmICh0aGlzLndpbm5lcikge1xuICAgICAgICBpZiAodGhpcy53aW5uZXIudG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdGhpcy53aW5uZXIudG9rZW4uZG9jdW1tZW50XG4gICAgICAgIGlmICh0aGlzLndpbm5lci5hY3Rvcikgc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLndpbm5lci5hY3RvclxuICAgICAgfVxuICAgICAgY29uc3Qgc3BlYWtlciA9IHRoaXMud2lubmVyID8gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSkgOiBudWxsXG4gICAgICBjb25zdCB1c2VyID1cbiAgICAgICAgdGhpcy53aW5uZXIgJiYgdGhpcy53aW5uZXIuYWN0b3IudXNlclxuICAgICAgICAgID8gdGhpcy53aW5uZXIuYWN0b3IudXNlclxuICAgICAgICAgIDogZ2FtZS51c2VyXG5cbiAgICAgIGxldCBtc2dcbiAgICAgIGlmICghbWVzc2FnZSkge1xuICAgICAgICAvLyBUT0RPOiBJZiBjYXJkIGlzbid0IGZvdW5kIChjYXJkIHdhcyBkZWxldGVkIGJlZm9yZSBjb21wbGV0aW9uKSA/XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignUmVzb2xpdGlvbiBjYXJkIG1pc3NpbmcsIHdhcyBkZWxldGVkID8nKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmIChzcGVha2VyKSB7XG4gICAgICAgIG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgICAvLyBUT0RPOiBJZiBjYXJkIGlzbid0IGZvdW5kIChjYXJkIHdhcyBkZWxldGVkIGJlZm9yZSBjb21wbGV0aW9uKSA/XG4gICAgICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgICAgICBzcGVha2VyLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHtcbiAgICAgICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgICAgcmV0dXJuIG1zZ1xuICAgIH1cbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLXJlc29sdXRpb24uaHRtbCdcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ2hhdENhcmRBY3RvciB9IGZyb20gJy4uL2NhcmQtYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVSZXNvbHRpb24gfSBmcm9tICcuL21lbGVlLXJlc29sdXRpb24uanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL21lbGVlLWluaXRpYXRvci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdNZWxlZVRhcmdldCBleHRlbmRzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXksIHBhcmVudE1lc3NhZ2VJZCA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBzdXBlcihhY3RvcktleSwgZmFzdEZvcndhcmQpXG4gICAgdGhpcy5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgdGhpcy5pbml0aWF0b3JLZXkgPSBudWxsXG4gICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQgPSBwYXJlbnRNZXNzYWdlSWRcbiAgICB0aGlzLmZhc3RGb3J3YXJkID0gZmFzdEZvcndhcmRcbiAgICB0aGlzLnJlc29sdmVkID0gZmFsc2VcblxuICAgIHRoaXMub3V0bnVtYmVyZWQgPSBmYWxzZVxuICAgIHRoaXMuc3VycHJpc2VkID0gZmFsc2VcbiAgICB0aGlzLmF1dG9TdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLmFkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5kaXNhZHZhbnRhZ2UgPSBmYWxzZVxuXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy5za2lsbElkID0gbnVsbFxuICAgIHRoaXMuaXRlbUlkID0gbnVsbFxuICAgIHRoaXMuZG9kZ2luZyA9IGZhbHNlXG4gICAgdGhpcy5ub3RSZXNwb25kaW5nID0gZmFsc2VcbiAgICB0aGlzLmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgdGhpcy5tYW5ldXZlcmluZyA9IGZhbHNlXG4gIH1cblxuICBnZXQgYWN0aW9uU2VsZWN0ZWQgKCkge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLmRvZGdpbmcgfHxcbiAgICAgIHRoaXMubm90UmVzcG9uZGluZyB8fFxuICAgICAgdGhpcy5maWdodGluZ0JhY2sgfHxcbiAgICAgIHRoaXMubWFuZXV2ZXJpbmdcbiAgICApXG4gIH1cblxuICBnZXQgYWN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5kb2RnaW5nKSByZXR1cm4gJ2RvZGdlJ1xuICAgIGlmICh0aGlzLm5vdFJlc3BvbmRpbmcpIHJldHVybiAnbm9SZXNwb25zZSdcbiAgICBpZiAodGhpcy5maWdodGluZ0JhY2spIHJldHVybiAnZmlnaHRCYWNrJ1xuICAgIGlmICh0aGlzLm1hbmV1dmVyaW5nKSByZXR1cm4gJ21hbmV1dmVyJ1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgd2VhcG9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgc2tpbGwgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXG4gIH1cblxuICBzZXQgaW5pdGlhdG9yS2V5ICh4KSB7XG4gICAgdGhpcy5faW5pdGlhdG9yS2V5ID0geFxuICAgIHRoaXMudGFyZ2V0S2V5ID0geFxuICB9XG5cbiAgZ2V0IGluaXRpYXRvcktleSAoKSB7XG4gICAgaWYgKCF0aGlzLl9pbml0aWF0b3JLZXkpIHtcbiAgICAgIGlmICghdGhpcy5faW5pdGlhdG9yICYmIHRoaXMucGFyZW50TWVzc2FnZUlkKSB7XG4gICAgICAgIHRoaXMuX2luaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9pbml0aWF0b3IpIHRoaXMuX2luaXRpYXRvcktleSA9IHRoaXMuX2luaXRpYXRvci5hY3RvcktleVxuICAgIH1cbiAgICBpZiAoIXRoaXMuX2luaXRpYXRvcktleSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYE5vIGluaXRpYXRvciBmb3VuZCBmb3IgdGFyZ2V0IDogJHt0aGlzLmFjdG9yLm5hbWV9YFxuICAgICAgKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2luaXRpYXRvcktleVxuICB9XG5cbiAgZ2V0IGluaXRpYXRvciAoKSB7XG4gICAgaWYgKCF0aGlzLmluaXRpYXRvcktleSkge1xuICAgICAgaWYgKHRoaXMucGFyZW50TWVzc2FnZUlkKSB7XG4gICAgICAgIHRoaXMuX2luaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkXG4gICAgICAgIClcbiAgICAgICAgdGhpcy5pbml0aWF0b3JLZXkgPSB0aGlzLl9pbml0aWF0b3IuYWN0b3JLZXlcbiAgICAgIH0gZWxzZSByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5pbml0aWF0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IG1lbGVlSW5pdGlhdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYXRvcikge1xuICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pbml0aWF0b3JcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5odG1sJ1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGNhcmQgPSAkKG1lc3NhZ2UuY29udGVudClbMF1cblxuICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkLCBtZXNzYWdlSWQpXG4gICAgdGFyZ2V0Lm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50LCBwdWJsaXNoVXBkYXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5tZWxlZS50YXJnZXQnKVxuICAgIGNvbnN0IGZsYWcgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGNvbnN0IGNhbWVsRmxhZyA9IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZylcblxuICAgIC8vIHVwZGF0ZSBvbmx5IGZvciBsb2NhbCBwbGF5ZXJcbiAgICBpZiAoIXB1Ymxpc2hVcGRhdGUpIHtcbiAgICAgIGNhcmQuZGF0YXNldFtjYW1lbEZsYWddID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gIT09ICd0cnVlJ1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2hlZC1vbicpXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2VsZWN0ZWQgPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGUgY2FyZCBmb3IgYWxsIHBsYXllclxuICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICB0YXJnZXQudG9nZ2xlRmxhZyhmbGFnKVxuICAgICAgdGFyZ2V0LnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICB0b2dnbGVGbGFnIChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGZsYWcgPSBmbGFnTmFtZS5pbmNsdWRlcygnLScpXG4gICAgICA/IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZ05hbWUpXG4gICAgICA6IGZsYWdOYW1lXG4gICAgdGhpc1tmbGFnXSA9ICF0aGlzW2ZsYWddXG4gIH1cblxuICBhc3luYyBjcmVhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmICh0b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0b2tlbi5kb2N1bWVudFxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG5cbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lXG5cbiAgICBsZXQgdXNlciA9IGdhbWUudXNlclxuICAgIGlmICh0eXBlb2YgdGhpcy5hY3Rvci51c2VyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgbGV0IG93bmVycyA9IFtdXG4gICAgICBjb25zdCBnbXMgPSBnYW1lLnVzZXJzLmZpbHRlcihhID0+IGEuaXNHTSkubWFwKGEgPT4gYS5pZClcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuYWN0b3Iub3duZXJzaGlwKSkge1xuICAgICAgICBpZiAodiA9PT0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUikge1xuICAgICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIG93bmVycyA9IGdhbWUudXNlcnMubWFwKGEgPT4gYS5pZClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfSBlbHNlIGlmICghZ21zLmluY2x1ZGVzKGspKSB7XG4gICAgICAgICAgICBvd25lcnMucHVzaChrKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGNvbnRlbnQgPSAnJ1xuICAgICAgc3dpdGNoIChvd25lcnMubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAvLyBHTVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAodHlwZW9mIGdhbWUudXNlcnMuZ2V0KG93bmVyc1swXSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1c2VyID0gZ2FtZS51c2Vycy5nZXQob3duZXJzWzBdKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgJzxwPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVNlbGVjdFNpbmdsZVVzZXJGb3JUYXJnZXQnKVxuICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzxmb3JtIGlkPVwic2VsZWN0Zm9ybVwiPjxzZWxlY3QgbmFtZT1cInVzZXJcIj4nXG4gICAgICAgICAgZm9yIChjb25zdCBrIG9mIG93bmVycykge1xuICAgICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAgIGNvbnRlbnQgK1xuICAgICAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIicgK1xuICAgICAgICAgICAgICBrICtcbiAgICAgICAgICAgICAgJ1wiPicgK1xuICAgICAgICAgICAgICBnYW1lLnVzZXJzLmdldChrKS5uYW1lICtcbiAgICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgICB9XG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyAnPC9zZWxlY3Q+PC9mb3JtPjwvcD4nXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLnByb21wdCh7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5NZXNzYWdlVGl0bGVTZWxlY3RTaW5nbGVVc2VyRm9yVGFyZ2V0J1xuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgIHVzZXIgPSBnYW1lLnVzZXJzLmdldCh2YWx1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMuYWN0b3IudXNlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVzZXIgPSB0aGlzLmFjdG9yLnVzZXJcbiAgICB9XG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggdGhpcy5pc0JsaW5kICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG5cbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG1lc3NhZ2UuaWRcbiAgICByZXR1cm4gbWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNICYmIG1lc3NhZ2UudXNlci5pZCAhPT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0ludGVyYWN0V2l0aENoYXRDYXJkJylcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIGFzeW5jIGdldFVwZGF0ZWRDaGF0Q2FyZCAoKSB7XG4gICAgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcykudGhlbihodG1sID0+IHtcbiAgICAgIHJldHVybiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVTZWxlY3RlZCAoY2FyZCwgZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcblxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnZG9kZ2UnOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0Lm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdub1Jlc3BvbnNlJzpcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5za2lsbElkID0gbnVsbFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IHRydWVcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbklkXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ21hbmV1dmVyJzpcbiAgICAgICAgdGFyZ2V0LmRvZGdpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSB0cnVlXG4gICAgICAgIHRhcmdldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgdGFyZ2V0Lml0ZW1JZCA9IG51bGxcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICB0YXJnZXQudXBkYXRlQ2hhdENhcmQoKVxuXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybVNraWxsQ2hlY2sgKHNraWxsSWQgPSBudWxsLCBwdWJsaXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxuICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgY2hlY2suc2lkZSA9ICd0YXJnZXQnXG4gICAgY2hlY2suYWN0aW9uID0gdGhpcy5hY3Rpb25cbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxuXG4gICAgaWYgKHRoaXMuZGlzYWR2YW50YWdlKSBjaGVjay5kaWNlTW9kaWZpZXIgLT0gMVxuICAgIGlmICh0aGlzLmFkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcblxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIHRoaXMuY2hlY2sgPSBjaGVja1xuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgaWYgKHB1Ymxpc2gpIGNoZWNrLnRvTWVzc2FnZSgpXG5cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hOb1JlcG9uc2VSZXN1bHQgKCkge1xuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgdGhpcy5ub3RSZXNwb25kaW5nID0gdHJ1ZVxuICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkLFxuICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICApXG5cbiAgICBjb25zdCByZXNvbHV0aW9uTWVzc2FnZSA9IGF3YWl0IHJlc29sdXRpb25DYXJkLnByZUNyZWF0ZU1lc3NhZ2UoKVxuXG4gICAgdGhpcy5yZXNvbHV0aW9uQ2FyZCA9IHJlc29sdXRpb25NZXNzYWdlLmlkXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBwdWJsaXNoQ2hlY2tSZXN1bHQgKGNoZWNrID0gbnVsbCkge1xuICAgIGlmICghY2hlY2sgJiYgIXRoaXMuY2hlY2spIHJldHVybiBudWxsXG5cbiAgICBpZiAoY2hlY2spIHRoaXMuY2hlY2sgPSBjaGVja1xuICAgIHRoaXMucm9sbCA9IENvQzdSb2xsLmdldEZyb21DaGVjayh0aGlzLmNoZWNrKVxuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuXG4gICAgdGhpcy5yb2xsLnJvbGxJY29ucyA9IFtdXG4gICAgaWYgKHRoaXMucm9sbC5jcml0aWNhbCkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ21lZGFsJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucm9sbC5mdW1ibGUpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZGFya3JlZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc3BpZGVyJylcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMucm9sbC5zdWNjZXNzKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc3RhcicpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnYmxhY2snXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdza3VsbCcpXG4gICAgfVxuXG4gICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgIClcbiAgICBjb25zdCByZXNvbHV0aW9uTWVzc2FnZSA9IGF3YWl0IHJlc29sdXRpb25DYXJkLnByZUNyZWF0ZU1lc3NhZ2UoKVxuXG4gICAgdGhpcy5yZXNvbHV0aW9uQ2FyZCA9IHJlc29sdXRpb25NZXNzYWdlLmlkXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQsIG1lc3NhZ2VJZCA9IG51bGwpIHtcbiAgICBjb25zdCBhY3RvcktleSA9IGNhcmQuZGF0YXNldC5hY3RvcktleVxuICAgIGNvbnN0IHBhcmVudE1lc3NhZ2VJZCA9IGNhcmQuZGF0YXNldC5wYXJlbnRNZXNzYWdlSWRcbiAgICBjb25zdCBmYXN0Rm9yd2FyZCA9IGNhcmQuZGF0YXNldC5mYXN0Rm9yd2FyZCA9PT0gJ3RydWUnXG4gICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdNZWxlZVRhcmdldChhY3RvcktleSwgcGFyZW50TWVzc2FnZUlkLCBmYXN0Rm9yd2FyZClcblxuICAgIHRhcmdldC5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHRhcmdldCwgY2FyZClcblxuICAgIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcbiAgICAgIHRhcmdldC5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9IGVsc2UgdGFyZ2V0Lm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiB0YXJnZXRcbiAgfVxuXG4gIHVwZ3JhZGVSb2xsIChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIG9sZENhcmQpIHtcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGAke3RoaXMuYWN0b3IubmFtZX0gZGlkbid0IGhhdmUgZW5vdWdoIGx1Y2sgdG8gcGFzcyB0aGUgY2hlY2tgXG4gICAgICApXG4gICAgfVxuICAgIHRoaXMucm9sbC52YWx1ZSA9IG51bGxcbiAgICB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgdGhpcy5yb2xsLmx1Y2tTcGVudCA9IHRydWVcbiAgICBvbGRDYXJkLmRhdGFzZXQucHJvY2Vzc2VkID0gZmFsc2VcblxuICAgIGNvbnN0IGRpY2VSb2xscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2Utcm9sbCcpXG4gICAgZGljZVJvbGxzLmRhdGFzZXQudmFsdWUgPSBudWxsXG4gICAgZGljZVJvbGxzLmRhdGFzZXQuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgZGljZVJvbGxzLmRhdGFzZXQubHVja1NwZW50ID0gdHJ1ZVxuXG4gICAgY29uc3QgcmVzdWxEZXRhaWxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucmVzdWx0LWRldGFpbHMnKVxuICAgIGNvbnN0IGRpY2VUb3RhbCA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBkaWNlVG90YWwuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQob2xkQ2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vZGljZS5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwsIENvQzdEYW1hZ2UgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdSYW5nZUluaXRpYXRvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIGl0ZW1JZCA9IG51bGwsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLml0ZW1JZCA9IGl0ZW1JZFxuICAgIHRoaXMuZmFzdEZvcndhcmQgPSBmYXN0Rm9yd2FyZFxuICAgIHRoaXMucmVzb2x2ZWQgPSBmYWxzZVxuICAgIHRoaXMuY292ZXIgPSBmYWxzZVxuICAgIHRoaXMuc3VycHJpc2VkID0gZmFsc2VcbiAgICB0aGlzLmF1dG9TdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLmFkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5kaXNhZHZhbnRhZ2UgPSBmYWxzZVxuICAgIHRoaXMubWVzc2FnZUlkID0gbnVsbFxuICAgIHRoaXMudGFyZ2V0Q2FyZCA9IG51bGxcbiAgICB0aGlzLnJvbGxlZCA9IGZhbHNlXG4gICAgdGhpcy5zaW5nbGVTaG90ID0gZmFsc2VcbiAgICB0aGlzLm11bHRpcGxlU2hvdHMgPSBmYWxzZVxuICAgIHRoaXMuYnVyc3QgPSBmYWxzZVxuICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgIHRoaXMudG9rZW5LZXkgPSBudWxsXG4gICAgdGhpcy5haW1lZCA9IGZhbHNlXG4gICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9IDBcbiAgICB0aGlzLl90YXJnZXRzID0gW11cbiAgICBmb3IgKGNvbnN0IHQgb2YgWy4uLmdhbWUudXNlci50YXJnZXRzXSkge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdSYW5nZVRhcmdldChgJHt0LnNjZW5lLmlkfS4ke3QuaWR9YCkgLy9cbiAgICAgIHRhcmdldC50b2tlbiA9IHRcbiAgICAgIHRoaXMuX3RhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuICAgIGlmICh0aGlzLl90YXJnZXRzLmxlbmd0aCkgdGhpcy5fdGFyZ2V0c1swXS5hY3RpdmUgPSB0cnVlXG4gICAgZWxzZSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KClcbiAgICAgIHRhcmdldC5hY3RpdmUgPSB0cnVlXG4gICAgICB0aGlzLl90YXJnZXRzLnB1c2godGFyZ2V0KVxuICAgIH1cbiAgICBpZiAoYWN0b3JLZXkpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgdGhpcy50b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICh0aGlzLnRva2VuKSB0aGlzLnRva2VuS2V5ID0gYWN0b3IudG9rZW5LZXlcbiAgICAgIGlmIChpdGVtSWQpIHtcbiAgICAgICAgY29uc3Qgd2VhcG9uID0gYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAgICAgaWYgKHdlYXBvbikge1xuICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5zaW5nbGVTaG90KSB0aGlzLnNpbmdsZVNob3QgPSB0cnVlXG4gICAgICAgICAgZWxzZSBpZiAodGhpcy53ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYXV0bykgdGhpcy5mdWxsQXV0byA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy50b2tlbktleSkge1xuICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuX3RhcmdldHMpIHtcbiAgICAgICAgaWYgKHQudG9rZW4gJiYgdGhpcy50b2tlbikge1xuICAgICAgICAgIHQuZGlzdGFuY2UgPSBjaGF0SGVscGVyLmdldERpc3RhbmNlKHQudG9rZW4sIHRoaXMudG9rZW4pXG4gICAgICAgICAgdC5yb3VuZGVkRGlzdGFuY2UgPSBNYXRoLnJvdW5kKHQuZGlzdGFuY2UudmFsdWUgKiAxMDApIC8gMTAwXG4gICAgICAgICAgdC5kaXN0YW5jZVVuaXQgPSB0LmRpc3RhbmNlLnVuaXRcbiAgICAgICAgICBjb25zdCBkaXN0SW5ZZCA9XG4gICAgICAgICAgICBNYXRoLnJvdW5kKGNoYXRIZWxwZXIudG9ZYXJkcyh0LmRpc3RhbmNlKSAqIDEwMCkgLyAxMDBcbiAgICAgICAgICAvLyBpZiggZGlzdEluWWQpe1xuICAgICAgICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICAgICAgICB0LnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICBjb25zdCBwYlJhbmdlSW5ZZCA9XG4gICAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgLyAxNVxuICAgICAgICAgICAgaWYgKGRpc3RJbllkIDw9IHBiUmFuZ2VJbllkKSB0LnBvaW50QmxhbmtSYW5nZSA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMud2VhcG9uKSB7XG4gICAgICAgICAgICBpZiAodGhpcy53ZWFwb24uYmFzZVJhbmdlKSB7XG4gICAgICAgICAgICAgIHQuYmFzZVJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgdC5sb25nUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICB0LmV4dHJlbWVSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIHQub3V0T2ZSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmJhc2VSYW5nZSkgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmxvbmdSYW5nZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdC5sb25nUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24ubG9uZ1JhbmdlICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5leHRyZW1lUmFuZ2VcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPiB0aGlzLndlYXBvbi5leHRyZW1lUmFuZ2UpIHQub3V0T2ZSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlKSB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAmJlxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogMlxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdC5sb25nUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogMiAmJlxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogNFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdC5leHRyZW1lUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAqIDQpIHQub3V0T2ZSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgISh0LmJhc2VSYW5nZSB8fCB0LmxvbmdSYW5nZSB8fCB0LmV4dHJlbWVSYW5nZSB8fCB0Lm91dE9mUmFuZ2UpXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIH1cbiAgICAgICAgfSBlbHNlIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0IGFjdG9ySW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgd2VhcG9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtXG4gIH1cblxuICBnZXQgdGFyZ2V0cyAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRzKSB0aGlzLl90YXJnZXRzID0gW11cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0c1xuICB9XG5cbiAgZ2V0IHRhcmdldCAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0cyAmJiB0aGlzLnRhcmdldHMubGVuZ3RoKSByZXR1cm4gdGhpcy50YXJnZXRzLnBvcCgpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLmdldFdlYXBvblNraWxscyh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCBtYWluV2VhcG9uU2tpbGwgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLndlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZClcbiAgfVxuXG4gIGdldCBhdXRvV2VhcG9uU2tpbGwgKCkge1xuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMud2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5tYWluV2VhcG9uU2tpbGxcbiAgfVxuXG4gIGdldCBhdXRvRmlyZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVyc3QgfHwgdGhpcy5mdWxsQXV0b1xuICB9XG5cbiAgZ2V0IG11bHRpVGFyZ2V0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5mdWxsQXV0byB8fCB0aGlzLm11bHRpcGxlU2hvdHNcbiAgfVxuXG4gIGdldCBhaW1pbmcgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2FpbWluZykge1xuICAgICAgdGhpcy5fYWltaW5nID0gdGhpcy5hY3Rvci5nZXRBY3RvckZsYWcoJ2FpbWluZycpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9haW1pbmdcbiAgfVxuXG4gIGdldCBhY3RpdmVUYXJnZXQgKCkge1xuICAgIGlmICghdGhpcy5fdGFyZ2V0cy5sZW5ndGgpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldHMuZmluZCh0ID0+IHQuYWN0aXZlKVxuICB9XG5cbiAgZ2V0IHNob3RzICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9zaG90cykgdGhpcy5fc2hvdHMgPSBbXVxuICAgIHJldHVybiB0aGlzLl9zaG90c1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRTaG90UmFuayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdHMubGVuZ3RoICsgMVxuICB9XG5cbiAgZ2V0IGFjdGl2ZVRhcmdldFNob3REaWZmaWN1bHR5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5zaG90RGlmZmljdWx0eSgpXG4gIH1cblxuICBzZXQgYWltaW5nIChiKSB7XG4gICAgdGhpcy5fYWltaW5nID0gYlxuICB9XG5cbiAgZ2V0IGRpZEFueVNob3RIaXQgKCkge1xuICAgIGxldCBhbnlIaXQgPSBmYWxzZVxuICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICBhbnlIaXQgPSBhbnlIaXQgfHwgci5pc1N1Y2Nlc3NcbiAgICB9XG4gICAgcmV0dXJuIGFueUhpdFxuICB9XG5cbiAgZ2V0IHN1Y2Nlc3NmdWxIaXRzICgpIHtcbiAgICBjb25zdCBoaXRzID0gW11cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yb2xscy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzW2luZGV4XS5pc1N1Y2Nlc3MpIHtcbiAgICAgICAgY29uc3QgaGl0ID0ge1xuICAgICAgICAgIHJvbGw6IHRoaXMucm9sbHNbaW5kZXhdLFxuICAgICAgICAgIHNob3Q6IHRoaXMuc2hvdHNbaW5kZXhdXG4gICAgICAgIH1cbiAgICAgICAgaGl0cy5wdXNoKGhpdClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGhpdHMubGVuZ3RoICE9PSAwKSByZXR1cm4gaGl0c1xuICAgIGVsc2UgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzaG90RmlyZWQgKCkge1xuICAgIHJldHVybiB0aGlzLnNob3RzID8gdGhpcy5zaG90cy5sZW5ndGggOiAwXG4gIH1cblxuICBnZXQgdG90YWxBbW1vICgpIHtcbiAgICByZXR1cm4gdGhpcy53ZWFwb24uZ2V0QnVsbGV0TGVmdCgpXG4gIH1cblxuICBnZXQgbWF4U2hvdHMgKCkge1xuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSByZXR1cm4gJ+KInidcbiAgICAvLyByZXR1cm4gdGhpcy53ZWFwb24uZGF0YS5kYXRhLnVzZXNQZXJSb3VuZC5tYXg7XG5cbiAgICByZXR1cm4gdGhpcy53ZWFwb24uc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXhcbiAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXgpXG4gICAgICA6IDFcbiAgfVxuXG4gIGdldCBpZ25vcmVBbW1vICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcmVnYXJkQW1tbycpXG4gIH1cblxuICBnZXQgaWdub3JlVXNlc1BlclJvdW5kICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcmVnYXJkVXNlUGVyUm91bmQnKVxuICB9XG5cbiAgZ2V0IG91dE9mQW1tbyAoKSB7XG4gICAgaWYgKHRoaXMuaWdub3JlQW1tbykgcmV0dXJuIGZhbHNlXG4gICAgaWYgKHRoaXMudG90YWxCdWxsZXRzRmlyZWQgPj0gdGhpcy53ZWFwb24uZ2V0QnVsbGV0TGVmdCgpKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IG91dE9mU2hvdHMgKCkge1xuICAgIGlmICh0aGlzLmlnbm9yZVVzZXNQZXJSb3VuZCkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKHRoaXMuc2hvdHMpIHJldHVybiB0aGlzLnNob3RzLmxlbmd0aCA+PSB0aGlzLm1heFNob3RzXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgdm9sbGV5U2l6ZSAoKSB7XG4gICAgaWYgKCF0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hdXRvKSByZXR1cm4gMVxuICAgIGlmICh0aGlzLl92b2xsZXlTaXplKSByZXR1cm4gdGhpcy5fdm9sbGV5U2l6ZVxuICAgIGNvbnN0IHNpemUgPSBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApXG4gICAgcmV0dXJuIHNpemUgPCAzID8gMyA6IHNpemVcbiAgfVxuXG4gIHNldCB2b2xsZXlTaXplICh4KSB7XG4gICAgaWYgKHggPj0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKSkge1xuICAgICAgdGhpcy5fdm9sbGV5U2l6ZSA9IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICB9IGVsc2UgaWYgKHggPD0gMykge1xuICAgICAgdGhpcy5fdm9sbGV5U2l6ZSA9IDNcbiAgICB9XG4gICAgdGhpcy5fdm9sbGV5U2l6ZSA9IHBhcnNlSW50KHgpXG4gIH1cblxuICBnZXQgaXNWb2xsZXlNaW5TaXplICgpIHtcbiAgICBpZiAodGhpcy52b2xsZXlTaXplID09PSAzKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzVm9sbGV5TWF4U2l6ZSAoKSB7XG4gICAgY29uc3QgbWF4U2l6ZSA9XG4gICAgICBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApIDwgM1xuICAgICAgICA/IDNcbiAgICAgICAgOiBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApXG4gICAgaWYgKG1heFNpemUgPT09IHRoaXMudm9sbGV5U2l6ZSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldFRhcmdldEZyb21LZXkgKGtleSkge1xuICAgIHJldHVybiB0aGlzLl90YXJnZXRzLmZpbmQodCA9PiBrZXkgPT09IHQuYWN0b3JLZXkpXG4gIH1cblxuICBjYWxjVGFyZ2V0c0RpZmZpY3VsdHkgKCkge1xuICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLnRhcmdldHMpIHtcbiAgICAgIHQuc2hvdERpZmZpY3VsdHkgPSB0aGlzLnNob3REaWZmaWN1bHR5KHQpXG4gICAgfVxuICB9XG5cbiAgc2hvdERpZmZpY3VsdHkgKHQgPSBudWxsKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gdCB8fCB0aGlzLmFjdGl2ZVRhcmdldFxuICAgIGxldCBkYW1hZ2UgPSB0aGlzLndlYXBvbi5zeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZVxuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuKSB7XG4gICAgICBpZiAodC5sb25nUmFuZ2UpIGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5sb25nLmRhbWFnZVxuICAgICAgaWYgKHQuZXh0cmVtZVJhbmdlKSBkYW1hZ2UgPSB0aGlzLndlYXBvbi5zeXN0ZW0ucmFuZ2UuZXh0cmVtZS5kYW1hZ2VcbiAgICB9XG4gICAgbGV0IG1vZGlmaWVyID0gdGFyZ2V0Lm1vZGlmaWVyXG4gICAgbGV0IGRpZmZpY3VsdHlcbiAgICB0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuXG4gICAgICA/IChkaWZmaWN1bHR5ID0gMSlcbiAgICAgIDogKGRpZmZpY3VsdHkgPSB0YXJnZXQuZGlmZmljdWx0eSlcbiAgICBsZXQgZGlmZmljdWx0eU5hbWUgPSAnJ1xuICAgIGlmICh0aGlzLmFpbWluZyAmJiB0aGlzLmN1cnJlbnRTaG90UmFuayA9PT0gMSkgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmFkdmFudGFnZSkgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmRpc2FkdmFudGFnZSkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnJlbG9hZCkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLm11bHRpcGxlU2hvdHMgJiYgIXRoaXMuZnVsbEF1dG8pIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5mdWxsQXV0bykgbW9kaWZpZXIgLT0gdGhpcy5jdXJyZW50U2hvdFJhbmsgLSAxXG4gICAgaWYgKG1vZGlmaWVyIDwgLTIpIHtcbiAgICAgIGNvbnN0IGV4Y2VzcyA9IE1hdGguYWJzKG1vZGlmaWVyICsgMilcbiAgICAgIGRpZmZpY3VsdHkgKz0gZXhjZXNzXG4gICAgICBpZiAoZGlmZmljdWx0eSA+IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwpIHtcbiAgICAgICAgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgICAgfVxuICAgICAgbW9kaWZpZXIgPSAtMlxuICAgIH1cblxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ1JlZ3VsYXInXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgPT09IGRpZmZpY3VsdHkpIGRpZmZpY3VsdHlOYW1lID0gJ0hhcmQnXG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnRXh0cmVtZSdcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ0NyaXRpY2FsJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlID09PSBkaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5TmFtZSA9ICdJbXBvc3NpYmxlJ1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBsZXZlbDogZGlmZmljdWx0eSxcbiAgICAgIG5hbWU6IGRpZmZpY3VsdHlOYW1lLFxuICAgICAgbW9kaWZpZXIsXG4gICAgICBkYW1hZ2UsXG4gICAgICBpbXBvc3NpYmxlOiBkaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGVcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvb3QgYXQgdGhlIGFjdGl2ZSB0YXJnZXQuIEFkZCBpdCB0byB0aGUgbGlzdCBvZiBzaG90cy5cbiAgICogVE9ETyA6IHJlY2FsY3VsZXIgbGEgZGlmZmljdWx0w6kgZGUgdG91cyBsZXMgc2hvdHMgIS5cbiAgICovXG4gIGFkZFNob3RBdEN1cnJlbnRUYXJnZXQgKCkge1xuICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICBjb25zdCBzaG90ID0ge1xuICAgICAgdGFyZ2V0OiB0aGlzLmFjdGl2ZVRhcmdldCxcbiAgICAgIGV4dHJlbWVSYW5nZTogdGhpcy5hY3RpdmVUYXJnZXQuZXh0cmVtZVJhbmdlLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0aXZlVGFyZ2V0LmFjdG9yS2V5LFxuICAgICAgYWN0b3JOYW1lOiB0aGlzLmFjdGl2ZVRhcmdldC5uYW1lLFxuICAgICAgZGlmZmljdWx0eTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWwsXG4gICAgICBtb2RpZmllcjogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubW9kaWZpZXIsXG4gICAgICBkYW1hZ2U6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmRhbWFnZSxcbiAgICAgIGJ1bGxldHNTaG90OiAxLFxuICAgICAgdHJhbnNpdEJ1bGxldHM6IDAsXG4gICAgICBidWxsZXRzU2hvdFRyYW5zaXQ6IDEsXG4gICAgICB0cmFuc2l0OiBmYWxzZVxuICAgIH1cblxuICAgIGxldCBidWxsZXRMZWZ0ID0gdGhpcy50b3RhbEFtbW8gLSB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkXG5cbiAgICBpZiAodGhpcy5mdWxsQXV0bykge1xuICAgICAgaWYgKHRoaXMuY3VycmVudFNob3RSYW5rID4gMSkge1xuICAgICAgICBjb25zdCBwcmV2aW91c1Nob3QgPSB0aGlzLnNob3RzW3RoaXMuY3VycmVudFNob3RSYW5rIC0gMl1cbiAgICAgICAgaWYgKHByZXZpb3VzU2hvdC5hY3RvcktleSAhPT0gdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXkpIHtcbiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGNoYXRIZWxwZXIuZ2V0RGlzdGFuY2UoXG4gICAgICAgICAgICBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShwcmV2aW91c1Nob3QuYWN0b3JLZXkpLFxuICAgICAgICAgICAgY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXkpXG4gICAgICAgICAgKVxuICAgICAgICAgIHNob3QudHJhbnNpdEJ1bGxldHMgPSBNYXRoLmZsb29yKGNoYXRIZWxwZXIudG9ZYXJkcyhkaXN0YW5jZSkpXG4gICAgICAgICAgaWYgKHNob3QudHJhbnNpdEJ1bGxldHMgPj0gYnVsbGV0TGVmdCAmJiAhdGhpcy5pZ25vcmVBbW1vKSB7XG4gICAgICAgICAgICBzaG90LnRyYW5zaXRCdWxsZXRzID0gYnVsbGV0TGVmdFxuICAgICAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9XG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkKSArIHNob3QudHJhbnNpdEJ1bGxldHNcbiAgICAgICAgICBzaG90LnRyYW5zaXQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSB0aGlzLnZvbGxleVNpemVcbiAgICAgIGlmIChzaG90LmJ1bGxldHNTaG90IDw9IDMpIHNob3QuYnVsbGV0c1Nob3QgPSAzXG4gICAgICBpZiAoc2hvdC5idWxsZXRzU2hvdCA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IGJ1bGxldExlZnRcbiAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgIH1cbiAgICAgIC8vIGJ1bGxldHNTaG90VHJhbnNpdCBpcyBmb3IgbG9jYWxpemluZyBDb0M3LlNob3RCdWxsZXRzIHVzaW5nIHBhcmFtZXRlcnMsIGxvY2FsaXplIGRvZXMgbm90IGFjY2VwdCBhZGRpbmcgYSBwYXJhbWV0ZXIgYXMgYSBzdW0gb2Ygc2hvdC5idWxsZXRzU2hvdCArIHNob3QudHJhbnNpdEJ1bGxldHMsIHNvIEkgY3JlYXRlIGEgbmV3IHZhbHVlIGluIGFkdmFuY2UgdG8gdXNlIGluc3RlYWRcbiAgICAgIHNob3QuYnVsbGV0c1Nob3RUcmFuc2l0ID0gc2hvdC5idWxsZXRzU2hvdCArIHNob3QudHJhbnNpdEJ1bGxldHNcbiAgICB9XG4gICAgaWYgKHRoaXMuYnVyc3QpIHtcbiAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLmJ1cnN0KVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgIDogMVxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPj0gYnVsbGV0TGVmdCAmJiAhdGhpcy5pZ25vcmVBbW1vKSB7XG4gICAgICAgIHNob3QuYnVsbGV0c1Nob3QgPSBidWxsZXRMZWZ0XG4gICAgICAgIGJ1bGxldExlZnQgPSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy50b3RhbEJ1bGxldHNGaXJlZCA9IHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgc2hvdC5idWxsZXRzU2hvdFxuXG4gICAgaWYgKHRoaXMuYWltaW5nKSB7XG4gICAgICB0aGlzLmFpbWluZyA9IGZhbHNlXG4gICAgICB0aGlzLmFpbWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuc2hvdHMucHVzaChzaG90KVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvcmFuZ2UtaW5pdGlhdG9yLmh0bWwnXG4gIH1cblxuICBhc3luYyBjcmVhdGVDaGF0Q2FyZCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgLy8gY29uc3QgZWxlbWVudCA9ICQoaHRtbClbMF07XG4gICAgLy8gY29uc3QgdGFyZ2V0RWxlbWVudCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRhcmdldFRlc3QnKTtcbiAgICAvLyB0aGlzLnRhcmdldC5hdHRhY2hUb0VsZW1lbnQodGFyZ2V0RWxlbWVudCk7XG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGNvbnN0IHRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAodG9rZW4pIHNwZWFrZXJEYXRhLnRva2VuID0gdG9rZW4uZG9jdW1lbnRcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgLy8gaWYoIHRoaXMuYWN0b3IuaXNUb2tlbikgc3BlYWtlci5hbGlhcyA9IHRoaXMuYWN0b3IudG9rZW4ubmFtZTtcblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH1cblxuICAgIGNvbnN0IHJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyhyb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHJvbGxNb2RlID09PSAnYmxpbmRyb2xsJyApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZyA9IGZsYWdOYW1lLmluY2x1ZGVzKCctJylcbiAgICAgID8gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnTmFtZSlcbiAgICAgIDogZmxhZ05hbWVcbiAgICBpZiAoXG4gICAgICBmbGFnID09PSAnc2luZ2xlU2hvdCcgfHxcbiAgICAgIGZsYWcgPT09ICdtdWx0aXBsZVNob3RzJyB8fFxuICAgICAgZmxhZyA9PT0gJ2Z1bGxBdXRvJ1xuICAgICkge1xuICAgICAgdGhpcy5zaW5nbGVTaG90ID0gZmFsc2VcbiAgICAgIHRoaXMubXVsdGlwbGVTaG90cyA9IGZhbHNlXG4gICAgICB0aGlzLmZ1bGxBdXRvID0gZmFsc2VcbiAgICAgIGlmIChmbGFnID09PSAnZnVsbEF1dG8nKSB0aGlzLmJ1cnN0ID0gZmFsc2VcbiAgICAgIHRoaXNbZmxhZ10gPSB0cnVlXG4gICAgfSBlbHNlIGlmIChmbGFnID09PSAnYnVyc3QnKSB7XG4gICAgICB0aGlzLmZ1bGxBdXRvID0gZmFsc2VcbiAgICAgIGlmICghdGhpcy5zaW5nbGVTaG90ICYmICF0aGlzLm11bHRpcGxlU2hvdHMpIHRoaXMuc2luZ2xlU2hvdCA9IHRydWVcbiAgICAgIHRoaXMuYnVyc3QgPSAhdGhpcy5idXJzdFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgICB9XG4gIH1cblxuICBhc3luYyByZXNvbHZlQ2FyZCAoKSB7XG4gICAgdGhpcy5yb2xscyA9IFtdXG4gICAgaWYgKHRoaXMubXVsdGlUYXJnZXQpIHtcbiAgICAgIGxldCB3ZWFwb25NYWxmdW5jdGlvbiA9IGZhbHNlXG4gICAgICBsZXQgaW5kZXggPSAwXG4gICAgICB3aGlsZSAoIXdlYXBvbk1hbGZ1bmN0aW9uICYmIHRoaXMuc2hvdHMubGVuZ3RoID4gaW5kZXgpIHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IHRoaXMuc2hvb3RBdFRhcmdldCh0aGlzLnNob3RzW2luZGV4XSlcbiAgICAgICAgaWYgKHJvbGwuZGljZT8ucm9sbCkge1xuICAgICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwuZGljZS5yb2xsKVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMud2VhcG9uLnNob290QnVsbGV0cyhcbiAgICAgICAgICBwYXJzZUludCh0aGlzLnNob3RzW2luZGV4XS5idWxsZXRzU2hvdCkgK1xuICAgICAgICAgICAgcGFyc2VJbnQodGhpcy5zaG90c1tpbmRleF0udHJhbnNpdEJ1bGxldHMpXG4gICAgICAgIClcbiAgICAgICAgaWYgKHJvbGwuaGFzTWFsZnVuY3Rpb24pIHtcbiAgICAgICAgICByb2xsLmlzU3VjY2VzcyA9IGZhbHNlXG4gICAgICAgICAgd2VhcG9uTWFsZnVuY3Rpb24gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaW5kZXgrK1xuICAgICAgICB0aGlzLnJvbGxzLnB1c2gocm9sbClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgcm9sbCA9IGF3YWl0IHRoaXMuc2hvb3RBdFRhcmdldCgpXG4gICAgICBpZiAocm9sbC5kaWNlPy5yb2xsKSB7XG4gICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwuZGljZS5yb2xsKVxuICAgICAgfVxuICAgICAgbGV0IGJ1bGxldEZpcmVkID0gdGhpcy5idXJzdFxuICAgICAgICA/IHBhcnNlSW50KHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgIDogMVxuICAgICAgaWYgKGJ1bGxldEZpcmVkID49IHRoaXMudG90YWxBbW1vKSBidWxsZXRGaXJlZCA9IHRoaXMudG90YWxBbW1vXG4gICAgICBjb25zdCBzaG90ID0ge1xuICAgICAgICB0YXJnZXQ6IHRoaXMuYWN0aXZlVGFyZ2V0LFxuICAgICAgICBleHRyZW1lUmFuZ2U6IHRoaXMuYWN0aXZlVGFyZ2V0LmV4dHJlbWVSYW5nZSxcbiAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0aXZlVGFyZ2V0LmFjdG9yS2V5LFxuICAgICAgICBhY3Rvck5hbWU6IHRoaXMuYWN0aXZlVGFyZ2V0Lm5hbWUsXG4gICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmxldmVsLFxuICAgICAgICBtb2RpZmllcjogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubW9kaWZpZXIsXG4gICAgICAgIGRhbWFnZTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkuZGFtYWdlLFxuICAgICAgICBidWxsZXRzU2hvdDogYnVsbGV0RmlyZWQsXG4gICAgICAgIHRyYW5zaXRCdWxsZXRzOiAwLFxuICAgICAgICB0cmFuc2l0OiBmYWxzZVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy53ZWFwb24uc2hvb3RCdWxsZXRzKGJ1bGxldEZpcmVkKVxuXG4gICAgICBpZiAocm9sbC5oYXNNYWxmdW5jdGlvbikge1xuICAgICAgICByb2xsLmlzU3VjY2VzcyA9IGZhbHNlXG4gICAgICB9XG4gICAgICB0aGlzLnNob3RzLnB1c2goc2hvdClcbiAgICAgIHRoaXMucm9sbHMucHVzaChyb2xsKVxuICAgIH1cbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIHRoaXMucm9sbGVkID0gdHJ1ZVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBzaG9vdEF0VGFyZ2V0IChzaG90ID0gbnVsbCkge1xuICAgIGNvbnN0IHRhcmdldCA9IHNob3RcbiAgICAgID8gdGhpcy5nZXRUYXJnZXRGcm9tS2V5KHNob3QuYWN0b3JLZXkpXG4gICAgICA6IHRoaXMuYWN0aXZlVGFyZ2V0XG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBjaGVjay5hY3RvcktleSA9IHRoaXMuYWN0b3JLZXlcbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICAvLyBDb21iYXQgcm9sbCBjYW5ub3QgYmUgYmxpbmQgb3IgdW5rbm93blxuICAgIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGNoZWNrLmlzVW5rb253biA9IGZhbHNlXG4gICAgaWYgKHRoaXMuYXV0b0ZpcmUpIGNoZWNrLnNraWxsID0gdGhpcy5hdXRvV2VhcG9uU2tpbGxcbiAgICBlbHNlIGNoZWNrLnNraWxsID0gdGhpcy5tYWluV2VhcG9uU2tpbGxcbiAgICBpZiAodGhpcy5tdWx0aVRhcmdldCkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IHNob3QuZGlmZmljdWx0eVxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gc2hvdC5tb2RpZmllclxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNhbGNUYXJnZXRzRGlmZmljdWx0eSgpXG4gICAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gcGFyc2VJbnQodGhpcy50b3RhbEJ1bGxldHNGaXJlZCkgKyAxXG4gICAgICBpZiAodGhpcy5haW1pbmcpIHtcbiAgICAgICAgdGhpcy5haW1pbmcgPSBmYWxzZVxuICAgICAgICB0aGlzLmFpbWVkID0gdHJ1ZVxuICAgICAgfVxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5LmxldmVsXG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllclxuICAgIH1cblxuICAgIGNoZWNrLmRldGFpbHMgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVGFyZ2V0Jyl9OiAke3RhcmdldC5uYW1lfWBcbiAgICBjaGVjay50YXJnZXRLZXkgPSB0YXJnZXQuYWN0b3JLZXlcblxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGNhcmQgPSAkKG1lc3NhZ2UuY29udGVudClbMF1cblxuICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkLCBtZXNzYWdlSWQpXG4gICAgaW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuXG4gICAgcmV0dXJuIGluaXRpYXRvclxuICB9XG5cbiAgY2hhbmdlVm9sbGV5U2l6ZSAoeCkge1xuICAgIHRoaXMudm9sbGV5U2l6ZSA9IHRoaXMudm9sbGV5U2l6ZSArIHhcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcucmFuZ2UuaW5pdGlhdG9yJylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQtZmxhZycpKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldCcpXG4gICAgICAgIGNvbnN0IGtleSA9IHBhcnNlSW50KHRhcmdldC5kYXRhc2V0LnRhcmdldEtleSlcbiAgICAgICAgaW5pdGlhdG9yLnRhcmdldHNba2V5XS50b2dnbGVGbGFnKGNhbWVsRmxhZylcbiAgICAgIH0gZWxzZSBpbml0aWF0b3IudG9nZ2xlRmxhZyhjYW1lbEZsYWcpXG4gICAgICBpbml0aWF0b3IudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIHBhc3NSb2xsIChyb2xsSW5kZXgpIHtcbiAgICBjb25zdCByb2xsID0gdGhpcy5yb2xsc1tyb2xsSW5kZXhdXG4gICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KHJvbGwubHVja05lZWRlZClcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgJHt0aGlzLmFjdG9yLm5hbWV9IGRvZXMgbm90IGhhdmUgZW5vdWdoIGx1Y2sgdG8gcGFzcyB0aGUgY2hlY2tgXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgcm9sbC5zdWNjZXNzTGV2ZWwgPSByb2xsLmRpZmZpY3VsdHlcbiAgICByb2xsLmlzU3VjY2VzcyA9IHRydWVcbiAgICByb2xsLmx1Y2tTcGVudCA9IHRydWVcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHVwZ3JhZGVSb2xsIChyb2xsSW5kZXgsIHVwZ3JhZGVpbmRleCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgY29uc3Qgcm9sbCA9IHRoaXMucm9sbHNbcm9sbEluZGV4XVxuICAgIGNvbnN0IGluY3JlYXNlZFN1Y2Nlc3MgPSByb2xsLmluY3JlYXNlU3VjY2Vzc1t1cGdyYWRlaW5kZXhdXG4gICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MubHVja0Ftb3VudClcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgJHt0aGlzLmFjdG9yLm5hbWV9IGRvZXMgbm90IGhhdmUgZW5vdWdoIGx1Y2sgdG8gcGFzcyB0aGUgY2hlY2tgXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID0gcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5uZXdTdWNjZXNzTGV2ZWwpXG4gICAgcm9sbC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBpZiAocm9sbC5kaWZmaWN1bHR5IDw9IG5ld1N1Y2Nlc3NMZXZlbCkgcm9sbC5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgcm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQsIG1lc3NhZ2VJZCA9IG51bGwpIHtcbiAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IoKVxuICAgIHJhbmdlSW5pdGlhdG9yLl90YXJnZXRzID0gW11cbiAgICBpZiAobWVzc2FnZUlkKSByYW5nZUluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICBlbHNlIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcbiAgICAgIHJhbmdlSW5pdGlhdG9yLm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIH1cblxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocmFuZ2VJbml0aWF0b3IsIGNhcmQpXG4gICAgY29uc3QgY2FyZFRhcmdldHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJnZXQnKVxuICAgIGZvciAoY29uc3QgdCBvZiBjYXJkVGFyZ2V0cykge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN1JhbmdlVGFyZ2V0LmdldEZyb21FbGVtZW50KHQpXG4gICAgICByYW5nZUluaXRpYXRvci50YXJnZXRzLnB1c2godGFyZ2V0KVxuICAgIH1cblxuICAgIGNvbnN0IGNhcmRTaG90cyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLnNob3QnKVxuICAgIGlmIChjYXJkU2hvdHMpIHtcbiAgICAgIGZvciAoY29uc3QgcyBvZiBjYXJkU2hvdHMpIHtcbiAgICAgICAgY29uc3Qgc2hvdCA9IHt9XG4gICAgICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoc2hvdCwgcylcbiAgICAgICAgcmFuZ2VJbml0aWF0b3Iuc2hvdHMucHVzaChzaG90KVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBlbHNlIHtcbiAgICAvLyAgY29uc3Qgc2hvdCA9IHtcbiAgICAvLyAgICAgIHNob3RPcmRlcjogMCxcbiAgICAvLyAgICAgIGFjdG9yS2V5OiBudWxsLFxuICAgIC8vICAgICAgYWN0b3JOYW1lOiAnZHVtbXknXG4gICAgLy8gIH1cbiAgICAvLyB9XG5cbiAgICByYW5nZUluaXRpYXRvci5yb2xscyA9IFtdXG4gICAgY29uc3Qgcm9sbHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5yb2xsLXJlc3VsdCcpXG4gICAgZm9yIChjb25zdCByIG9mIHJvbGxzKSB7XG4gICAgICBjb25zdCByb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUVsZW1lbnQocilcbiAgICAgIHJhbmdlSW5pdGlhdG9yLnJvbGxzLnB1c2gocm9sbClcbiAgICB9XG5cbiAgICByYW5nZUluaXRpYXRvci5kYW1hZ2UgPSBbXVxuICAgIGNvbnN0IGRhbWFnZVJvbGxzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuZGFtYWdlLXJlc3VsdHMnKVxuICAgIGZvciAoY29uc3QgZHIgb2YgZGFtYWdlUm9sbHMpIHtcbiAgICAgIGNvbnN0IGRhbWFnZVJvbGwgPSBDb0M3RGFtYWdlLmdldEZyb21FbGVtZW50KGRyKVxuICAgICAgcmFuZ2VJbml0aWF0b3IuZGFtYWdlLnB1c2goZGFtYWdlUm9sbClcbiAgICB9XG5cbiAgICByZXR1cm4gcmFuZ2VJbml0aWF0b3JcbiAgfVxuXG4gIGFzeW5jIHJvbGxEYW1hZ2UgKCkge1xuICAgIHRoaXMuZGFtYWdlID0gW11cbiAgICBjb25zdCBoaXRzID0gdGhpcy5zdWNjZXNzZnVsSGl0c1xuXG4gICAgLy8gbGV0IHZvbGxleVNpemUgPSAxO1xuICAgIC8vIGlmKCB0aGlzLmZ1bGxBdXRvKSB7XG4gICAgLy8gIHZvbGxleVNpemUgPSB0aGlzLnZvbGxleVNpemU7XG4gICAgLy8gIGlmKHZvbGxleVNpemUgPCAzKSB2b2xsZXlTaXplID0gMztcbiAgICAvLyB9XG4gICAgLy8gaWYoIHRoaXMuYnVyc3QpIHZvbGxleVNpemUgPSBwYXJzZUludCh0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLmJ1cnN0KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGggPSBoaXRzW2ldXG4gICAgICBjb25zdCB2b2xsZXlTaXplID0gcGFyc2VJbnQoaC5zaG90LmJ1bGxldHNTaG90KVxuICAgICAgY29uc3QgZGFtYWdlUm9sbHMgPSBbXVxuXG4gICAgICBpZiAodm9sbGV5U2l6ZSA+IDApIHtcbiAgICAgICAgbGV0IGRhbWFnZUZvcm11bGEgPSBTdHJpbmcoaC5zaG90LmRhbWFnZSlcbiAgICAgICAgaWYgKCFkYW1hZ2VGb3JtdWxhIHx8IGRhbWFnZUZvcm11bGEgPT09ICcnKSBkYW1hZ2VGb3JtdWxhID0gJzAnXG4gICAgICAgIGNvbnN0IGRhbWFnZURpZSA9IENvQzdEYW1hZ2UuZ2V0TWFpbkRpZShkYW1hZ2VGb3JtdWxhKVxuICAgICAgICBjb25zdCBtYXhEYW1hZ2UgPSBuZXcgUm9sbChkYW1hZ2VGb3JtdWxhKS5ldmFsdWF0ZSh7XG4gICAgICAgICAgbWF4aW1pemU6IHRydWVcbiAgICAgICAgfSkudG90YWxcbiAgICAgICAgY29uc3QgY3JpdGljYWxEYW1hZ2VGb3JtdWxhID0gdGhpcy53ZWFwb24uaW1wYWxlXG4gICAgICAgICAgPyBgJHtkYW1hZ2VGb3JtdWxhfSArICR7bWF4RGFtYWdlfWBcbiAgICAgICAgICA6IGAke21heERhbWFnZX1gXG4gICAgICAgIGNvbnN0IGNyaXRpY2FsRGFtYWdlRGllID0gQ29DN0RhbWFnZS5nZXRNYWluRGllKGNyaXRpY2FsRGFtYWdlRm9ybXVsYSlcblxuICAgICAgICBsZXQgaW1wYWxpbmdTaG90cyA9IDBcbiAgICAgICAgbGV0IHN1Y2Nlc3NmdWxTaG90cyA9IDBcbiAgICAgICAgbGV0IGNyaXRpY2FsID0gZmFsc2VcbiAgICAgICAgaWYgKHRoaXMuZnVsbEF1dG8gfHwgdGhpcy5idXJzdCkge1xuICAgICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IE1hdGguZmxvb3Iodm9sbGV5U2l6ZSAvIDIpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Y2Nlc3NmdWxTaG90cyA9PT0gMCkgc3VjY2Vzc2Z1bFNob3RzID0gMVxuICAgICAgICBpZiAoaC5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgICBpbXBhbGluZ1Nob3RzID0gc3VjY2Vzc2Z1bFNob3RzXG4gICAgICAgICAgc3VjY2Vzc2Z1bFNob3RzID0gdm9sbGV5U2l6ZSAtIGltcGFsaW5nU2hvdHNcbiAgICAgICAgICBjcml0aWNhbCA9IHRydWVcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsICE9PSBoLnJvbGwuc3VjY2Vzc0xldmVsICYmXG4gICAgICAgICAgICAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lIDw9IGgucm9sbC5kaWZmaWN1bHR5IHx8XG4gICAgICAgICAgICAgIGguc2hvdC5leHRyZW1lUmFuZ2UpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBzdWNjZXNzZnVsU2hvdHMgPSB2b2xsZXlTaXplXG4gICAgICAgICAgICBpbXBhbGluZ1Nob3RzID0gMFxuICAgICAgICAgICAgY3JpdGljYWwgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHN1Y2Nlc3NmdWxTaG90czsgaW5kZXgrKykge1xuICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChkYW1hZ2VGb3JtdWxhKVxuICAgICAgICAgIC8qKiBNT0RJRiAwLjgueCAqKi9cbiAgICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsKVxuICAgICAgICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICAgICAgICBkYW1hZ2VSb2xscy5wdXNoKHtcbiAgICAgICAgICAgIGZvcm11bGE6IGRhbWFnZUZvcm11bGEsXG4gICAgICAgICAgICB0b3RhbDogcm9sbC50b3RhbCxcbiAgICAgICAgICAgIGRpZTogZGFtYWdlRGllLFxuICAgICAgICAgICAgY3JpdGljYWw6IGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0b3RhbCArPSByb2xsLnRvdGFsXG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGltcGFsaW5nU2hvdHM7IGluZGV4KyspIHtcbiAgICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoY3JpdGljYWxEYW1hZ2VGb3JtdWxhKVxuICAgICAgICAgIC8qKiBNT0RJRiAwLjgueCAqKi9cbiAgICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChyb2xsKVxuICAgICAgICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICAgICAgICBkYW1hZ2VSb2xscy5wdXNoKHtcbiAgICAgICAgICAgIGZvcm11bGE6IGNyaXRpY2FsRGFtYWdlRm9ybXVsYSxcbiAgICAgICAgICAgIHRvdGFsOiByb2xsLnRvdGFsLFxuICAgICAgICAgICAgZGllOiBjcml0aWNhbERhbWFnZURpZSxcbiAgICAgICAgICAgIGNyaXRpY2FsOiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0b3RhbCArPSByb2xsLnRvdGFsXG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdGFyZ2V0TmFtZSA9ICdkdW1teSdcbiAgICAgICAgbGV0IHRhcmdldCA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KGgucm9sbC50YXJnZXRLZXkpXG4gICAgICAgIGlmICghdGFyZ2V0KSB0YXJnZXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShoLnJvbGwudGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgaWYgKHRhcmdldCkgdGFyZ2V0TmFtZSA9IHRhcmdldC5uYW1lXG5cbiAgICAgICAgdGhpcy5kYW1hZ2UucHVzaCh7XG4gICAgICAgICAgdGFyZ2V0S2V5OiBoLnJvbGwudGFyZ2V0S2V5LFxuICAgICAgICAgIHRhcmdldE5hbWUsXG4gICAgICAgICAgcm9sbHM6IGRhbWFnZVJvbGxzLFxuICAgICAgICAgIHRvdGFsLFxuICAgICAgICAgIGNyaXRpY2FsLFxuICAgICAgICAgIGRlYWx0OiBmYWxzZSxcbiAgICAgICAgICByZXN1bHRTdHJpbmc6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcucmFuZ2VDb21iYXREYW1hZ2UnLCB7XG4gICAgICAgICAgICBuYW1lOiB0YXJnZXROYW1lLFxuICAgICAgICAgICAgdG90YWxcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGFtYWdlUm9sbGVkID0gdGhpcy5kYW1hZ2UubGVuZ3RoICE9PSAwXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlICgpIHtcbiAgICBmb3IgKGxldCBkSW5kZXggPSAwOyBkSW5kZXggPCB0aGlzLmRhbWFnZS5sZW5ndGg7IGRJbmRleCsrKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGFtYWdlW2RJbmRleF0udGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChhY3RvciA9PT0gbnVsbCkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1RhcmdldFRvRGFtYWdlJykpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4gPSAwXG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZCA9IDBcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgckluZGV4ID0gMDtcbiAgICAgICAgICBySW5kZXggPCB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzLmxlbmd0aDtcbiAgICAgICAgICBySW5kZXgrK1xuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBkZWFsdEFtb3VudCA9IGF3YWl0IGFjdG9yLmRlYWxEYW1hZ2UoXG4gICAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udG90YWxcbiAgICAgICAgICApXG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbFRha2VuICs9IGRlYWx0QW1vdW50XG4gICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRha2VuID0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0uYWJzb3JiZWQgPVxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRvdGFsIC0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsQWJzb3JiZWQgKz1cbiAgICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50b3RhbCAtIGRlYWx0QW1vdW50XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5kZWFsdCA9IHRydWVcbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LnJhbmdlQ29tYmF0RGFtYWdlQXJtb3InLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGFtYWdlW2RJbmRleF0udGFyZ2V0TmFtZSxcbiAgICAgICAgICAgIHRvdGFsOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4sXG4gICAgICAgICAgICBhcm1vcjogdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbEFic29yYmVkXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZGFtYWdlRGVhbHQgPSB0cnVlXG4gICAgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdSYW5nZVRhcmdldCB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLmNvdmVyID0gZmFsc2VcbiAgICB0aGlzLnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgdGhpcy5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgdGhpcy5sb25nUmFuZ2UgPSBmYWxzZVxuICAgIHRoaXMuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICB0aGlzLmluTWVsZWUgPSBmYWxzZVxuICB9XG5cbiAgZ2V0IGJpZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYmlnKSB7XG4gICAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLmJ1aWxkKSB0aGlzLl9iaWcgPSB0aGlzLmFjdG9yLmJ1aWxkID49IDRcbiAgICAgIGVsc2UgdGhpcy5fYmlnID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2JpZ1xuICB9XG5cbiAgc2V0IGJpZyAoYikge1xuICAgIHRoaXMuX2JpZyA9IGJcbiAgfVxuXG4gIGdldCBzbWFsbCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fc21hbGwpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IuYnVpbGQpIHRoaXMuX3NtYWxsID0gdGhpcy5hY3Rvci5idWlsZCA8PSAtMlxuICAgICAgZWxzZSB0aGlzLl9zbWFsbCA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9zbWFsbFxuICB9XG5cbiAgc2V0IHNtYWxsIChiKSB7XG4gICAgdGhpcy5fc21hbGwgPSBiXG4gIH1cblxuICBnZXQgbm9ybWFsICgpIHtcbiAgICByZXR1cm4gIXRoaXMuYmlnICYmICF0aGlzLnNtYWxsXG4gIH1cblxuICBzZXQgbm9ybWFsIChiKSB7XG4gICAgdGhpcy5fYmlnID0gZmFsc2VcbiAgICB0aGlzLl9zbWFsbCA9IGZhbHNlXG4gIH1cblxuICBnZXQgaXNGYXN0ICgpIHtcbiAgICBpZiAodGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLm1vdikgcmV0dXJuIHRoaXMuYWN0b3IubW92ID49IDhcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBmYXN0ICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9mYXN0KSB7XG4gICAgICAvLyBpZiggdGhpcy5hY3RvciAmJiB0aGlzLmFjdG9yLm1vdikgdGhpcy5fZmFzdCA9IHRoaXMuYWN0b3IubW92ID49IDg7XG4gICAgICAvLyBlbHNlIHRoaXMuX2Zhc3QgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2Zhc3QgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZmFzdFxuICB9XG5cbiAgc2V0IGZhc3QgKGIpIHtcbiAgICB0aGlzLl9mYXN0ID0gYlxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAodGhpcy5hY3RvcktleSAmJiAhdGhpcy5fYWN0b3IpIHtcbiAgICAgIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgaWYgKHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLm5hbWVcbiAgICByZXR1cm4gJ0R1bW15J1xuICB9XG5cbiAgZ2V0IGltZyAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgIGlmICh0aGlzLnRva2VuLmRvY3VtZW50Py50ZXh0dXJlLnNyYykge1xuICAgICAgICByZXR1cm4gdGhpcy50b2tlbi5kb2N1bWVudD8udGV4dHVyZS5zcmNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuYWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLmRhdGEuaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3Rva2VuICYmIHRoaXMuYWN0b3JLZXkpIHtcbiAgICAgIHRoaXMuX3Rva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Rva2VuXG4gIH1cblxuICBnZXQgc2l6ZVRleHQgKCkge1xuICAgIGlmICh0aGlzLmJpZykge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuQmlnVGFyZ2V0VGl0bGUnKVxuICAgIH1cbiAgICBpZiAodGhpcy5zbWFsbCkge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuU21hbGxUYXJnZXRUaXRsZScpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLk5vcm1hbFRhcmdldFRpdGxlJylcbiAgfVxuXG4gIGdldCBzaXplTGFiZWwgKCkge1xuICAgIGlmICh0aGlzLmJpZykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuQmlnVGFyZ2V0JylcbiAgICBpZiAodGhpcy5zbWFsbCkgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5jb21iYXRDYXJkLlNtYWxsVGFyZ2V0JylcbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5Ob3JtYWxUYXJnZXQnKVxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIGlmICh0aGlzLmJhc2VSYW5nZSB8fCB0aGlzLnBvaW50QmxhbmtSYW5nZSkge1xuICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgICBpZiAodGhpcy5sb25nUmFuZ2UpIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICBpZiAodGhpcy5leHRyZW1lUmFuZ2UpIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIGxldCBtb2RpZmllciA9IDBcbiAgICBpZiAodGhpcy5jb3ZlcikgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnBvaW50QmxhbmtSYW5nZSkgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmZhc3QpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5zbWFsbCkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLmJpZykgbW9kaWZpZXIrK1xuICAgIGlmICh0aGlzLmluTWVsZWUpIG1vZGlmaWVyLS1cbiAgICBpZiAodGhpcy5zdXJwcmlzZWQpIG1vZGlmaWVyKytcbiAgICByZXR1cm4gbW9kaWZpZXJcbiAgfVxuXG4gIHNldCB0b2tlbiAodCkge1xuICAgIHRoaXMuX3Rva2VuID0gdFxuICB9XG5cbiAgc3RhdGljIGdldEZyb21FbGVtZW50IChlbGVtZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gbmV3IENvQzdSYW5nZVRhcmdldCgpXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudCh0YXJnZXQsIGVsZW1lbnQpXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgc3RhdGljIGNoYW5nZURpc3BsYXllZFRhcmdldCAoZXZlbnQpIHtcbiAgICBpZiAoIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQtc2VsZWN0b3InKSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCB0YXJnZXRTZWxlY3RvciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB0YXJnZXRzID0gdGFyZ2V0U2VsZWN0b3IuY2xvc2VzdCgnLnRhcmdldHMnKVxuICAgIGNvbnN0IHRhcmdldExpc3QgPSB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJnZXQnKVxuICAgIHJldHVybiB0YXJnZXRMaXN0XG4gIH1cblxuICBhdHRhY2hUb0VsZW1lbnQgKGVsZW1lbnQpIHtcbiAgICBjaGF0SGVscGVyLmF0dGFjaE9iamVjdFRvRWxlbWVudCh0aGlzLCBlbGVtZW50KVxuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZykge1xuICAgIGlmIChcbiAgICAgIGZsYWcgPT09ICdiYXNlUmFuZ2UnIHx8XG4gICAgICBmbGFnID09PSAnbG9uZ1JhbmdlJyB8fFxuICAgICAgZmxhZyA9PT0gJ2V4dHJlbWVSYW5nZScgfHxcbiAgICAgIGZsYWcgPT09ICdwb2ludEJsYW5rUmFuZ2UnXG4gICAgKSB7XG4gICAgICB0aGlzLnBvaW50QmxhbmtSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmJhc2VSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLmV4dHJlbWVSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzLm91dE9mUmFuZ2UgPSBmYWxzZVxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcbiAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICdzaXplJykge1xuICAgICAgaWYgKHRoaXMuc21hbGwpIHtcbiAgICAgICAgdGhpcy5zbWFsbCA9IGZhbHNlXG4gICAgICAgIHRoaXMuYmlnID0gdHJ1ZVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmJpZykge1xuICAgICAgICB0aGlzLnNtYWxsID0gZmFsc2VcbiAgICAgICAgdGhpcy5iaWcgPSBmYWxzZVxuICAgICAgfSBlbHNlIHRoaXMuc21hbGwgPSB0cnVlXG4gICAgfSBlbHNlIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIGlmIChmbGFnID09PSAnZmFzdCcgJiYgdGhpcy5mYXN0ICYmICF0aGlzLmlzRmFzdCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldhcm5GYXN0VGFyZ2V0V2l0aFdyb25nTU9WJywge1xuICAgICAgICAgIG1vdjogdGhpcy5hY3Rvci5tb3ZcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgQ09OU1QsIGdhbWUsIFRva2VuLCB0b2tlbkRhdGEsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi9jaGF0L2NvbWJhdC9tZWxlZS1pbml0aWF0b3IuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVUYXJnZXQgfSBmcm9tICcuL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcydcbmltcG9ydCB7IENvQzdNZWxlZVJlc29sdGlvbiB9IGZyb20gJy4vY2hhdC9jb21iYXQvbWVsZWUtcmVzb2x1dGlvbi5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4vY2hhdC9yYW5nZWNvbWJhdC5qcydcbmltcG9ydCB7IENvQzdSb2xsLCBjaGF0SGVscGVyLCBpc0N0cmxLZXkgfSBmcm9tICcuL2NoYXQvaGVscGVyLmpzJ1xuLy8gaW1wb3J0IHsgQ29DN0RhbWFnZVJvbGwgfSBmcm9tICcuL2NoYXQvZGFtYWdlY2FyZHMuanMnO1xuaW1wb3J0IHsgQ29DN0NvbkNoZWNrIH0gZnJvbSAnLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzJ1xuaW1wb3J0IHsgQ29tYmluZWRDaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcbmltcG9ydCB7IEludGVyYWN0aXZlQ2hhdENhcmQgfSBmcm9tICcuL2NoYXQvaW50ZXJhY3RpdmUtY2hhdC1jYXJkLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9kYW1hZ2UuanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4vZGljZS5qcydcblxuY29uc3QgQ0hBVF9DT0M3X01FU1NBR0UgPSB7XG4gIEZBS0VST0xMOlxuICAgICc8ZGl2IGNsYXNzPVwiZGljZS1yb2xsXCI+PGRpdiBjbGFzcz1cImRpY2UtcmVzdWx0XCI+PGRpdiBjbGFzcz1cImRpY2UtZm9ybXVsYVwiPj8/PzwvZGl2PjxoNCBjbGFzcz1cImRpY2UtdG90YWxcIj4/PC9oND48L2Rpdj48L2Rpdj4nXG59XG5leHBvcnQgY2xhc3MgQ29DN0NoYXQge1xuICBzdGF0aWMgcmVuZGVyQ2hhdE1lc3NhZ2VIb29rIChjaGF0TWVzc2FnZSwgaHRtbCkge1xuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ0dNU2VsZlJvbGwnKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWwuZmluZCgnLndoaXNwZXItdG8nKS5yZW1vdmUoKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmZsYXZvci10ZXh0JylcbiAgICAgICAgLnJlcGxhY2VXaXRoKFxuICAgICAgICAgIGA8c3BhbiBjbGFzcz1cImZsYXZvci10ZXh0XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5Sb2xsU2VjcmV0RGljZSdcbiAgICAgICAgICApfTwvc3Bhbj5gXG4gICAgICAgIClcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5tZXNzYWdlLWNvbnRlbnQnKVxuICAgICAgICAucmVwbGFjZVdpdGgoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJtZXNzYWdlLWNvbnRlbnRcIj4ke0NIQVRfQ09DN19NRVNTQUdFLkZBS0VST0xMfTwvZGl2PmBcbiAgICAgICAgKVxuICAgIH1cblxuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3JlbW92ZVdpc3BlclRhcmdldHMnKSAmJiAhZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWwuZmluZCgnLndoaXNwZXItdG8nKS5yZW1vdmUoKVxuICAgIH1cblxuICAgIGlmIChjaGF0TWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2Zha2VSb2xsJykgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5mbGF2b3ItdGV4dCcpXG4gICAgICAgIC5yZXBsYWNlV2l0aChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuS2VlcGVyU2VudERlY295JykpXG4gICAgICBodG1sLmZpbmQoJy5tZXNzYWdlLWNvbnRlbnQnKS5yZW1vdmUoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBmYWtlUm9sbE1lc3NhZ2UgKCkge1xuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbFNlY3JldERpY2UnKSxcbiAgICAgIHdoaXNwZXI6IGdhbWUudXNlcnMucGxheWVycyxcbiAgICAgIHR5cGU6IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSLFxuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgIEdNU2VsZlJvbGw6IGZhbHNlLFxuICAgICAgICAgIHJlbW92ZVdpc3BlclRhcmdldHM6IHRydWUsXG4gICAgICAgICAgZmFrZVJvbGw6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbnRlbnQ6IENIQVRfQ09DN19NRVNTQUdFLkZBS0VST0xMXG4gICAgfVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICB9XG5cbiAgLy8gVE9ETyByZW1wbGFjZXIgbGVzIGdldEVsZW1lbnRzQnl4eHh4IHBhciBxdWVyeVNlbGVjdG9yXG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKlxuICAgKiAgSW5pdCBzb2NrZXRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyByZWFkeSAoKSB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0LnJlYWR5Jyk7XG4gICAgZ2FtZS5Db0M3ID0gJ2luaXQnXG4gIH1cblxuICAvLyBzdGF0aWMgb25NZXNzYWdlKCBkYXRhKSB7XG4gIC8vICBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQub25NZXNzYWdlJyk7XG4gIC8vICBjb25zb2xlLmxvZyhgbWVzc2FnZSByZWNlaXZlZCBzZW5kJmVyIDoke2RhdGEudXNlcn0gbWVzc2FnZSB0eXBlIDogJHtkYXRhLmFjdGlvbn0gZm9yIG1lc3NhZ2UgOiR7ZGF0YS5tZXNzYWdlSWR9YCk7XG4gIC8vIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gICAqICBDaGF0IE1lc3NhZ2UgSGVscGVycyAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBzdGF0aWMgYXN5bmMgY2hhdExpc3RlbmVycyAoYXBwLCBodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmNhcmQtYnV0dG9ucyBidXR0b24nLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRBY3Rpb24uYmluZCh0aGlzKVxuICAgIClcbiAgICAvLyBodG1sLm9uKCdjbGljaycsICcuY2FyZC1idXR0b25zIGJ1dHRvbicsIENvQzdDaGF0Ll9vbkNoYXRDYXJkVGVzdC5iaW5kKHRoaXMpKTtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuY2FyZC10aXRsZScsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZFRvZ2dsZUNvbnRlbnQuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucmFkaW8tc3dpdGNoJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkUmFkaW9Td2l0Y2guYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucGFuZWwtc3dpdGNoJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoLmJpbmQodGhpcylcbiAgICApXG5cbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuc2ltcGxlLWZsYWcnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2guYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcudm9sbGV5LXNpemUnLCBDb0M3Q2hhdC5fb25DaGF0Q2FyZFZvbGxleVNpemUuYmluZCh0aGlzKSlcblxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5kcm9wZG93bi1lbGVtZW50JyxcbiAgICAgIENvQzdDaGF0Ll9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnLnNpbXBsZS10b2dnbGUnLCBDb0M3Q2hhdC5fb25Ub2dnbGVTZWxlY3RlZC5iaW5kKHRoaXMpKVxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJy5pcy1vdXRudW1iZXJlZCcsIENvQzdDaGF0Ll9vbk91dG51bWJlcmVkU2VsZWN0ZWQuYmluZCh0aGlzKSk7XG5cbiAgICBodG1sLm9uKCdjbGljaycsICcudGFyZ2V0LXNlbGVjdG9yJywgQ29DN0NoYXQuX29uVGFyZ2V0U2VsZWN0LmJpbmQodGhpcykpXG5cbiAgICBodG1sLm9uKCdkYmxjbGljaycsICcub3Blbi1hY3RvcicsIENvQzdDaGF0Ll9vbk9wZW5BY3Rvci5iaW5kKHRoaXMpKVxuXG4gICAgQ29DN0xpbmsuYmluZEV2ZW50c0hhbmRsZXIoaHRtbClcblxuICAgIGh0bWwub24oJ2NsaWNrJywgJ2NvYzctaW5saW5lLXJlc3VsdCcsIENvQzdDaGF0Ll9vbklubGluZS5iaW5kKHRoaXMpKVxuXG4gICAgLy8gUm9sbENhcmQuYmluZExpc3Rlcm5lcnMoIGh0bWwpO1xuICAgIE9wcG9zZWRDaGVja0NhcmQuYmluZExpc3Rlcm5lcnMoaHRtbClcbiAgICBDb21iaW5lZENoZWNrQ2FyZC5iaW5kTGlzdGVybmVycyhodG1sKVxuICB9XG5cbiAgc3RhdGljIF9vbk9wZW5BY3RvciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYWN0b3JLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0b3JLZXlcbiAgICBpZiAoYWN0b3JLZXkpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKGFjdG9yLmlzT3duZXIpIGFjdG9yLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBvblVwZGF0ZUNoYXRNZXNzYWdlIChjaGF0TWVzc2FnZSkge1xuICAgIHVpLmNoYXQuc2Nyb2xsQm90dG9tKClcblxuICAgIC8vIGlmKCBjaGF0TWVzc2FnZS5nZXRGbGFnKCAnQ29DNycsICdyZXZlbGVkJykpe1xuICAgIC8vIH1cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00gJiYgY2hhdE1lc3NhZ2UudHlwZSA9PT0gMCkge1xuICAgICAgY29uc3QgY2FyZCA9ICQoY2hhdE1lc3NhZ2UuY29udGVudClbMF1cbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnbWVsZWUnKSkge1xuICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnJlc29sdmVkID09PSAndHJ1ZScpIHtcbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnRhcmdldENhcmQpIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICAgICAgICBpbml0aWF0b3IudGFyZ2V0Q2FyZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGlmICh0YXJnZXQucmVzb2x2ZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgICAgIHRhcmdldC5tZXNzYWdlSWQsXG4gICAgICAgICAgICAgICAgICB0YXJnZXQucmVzb2x1dGlvbkNhcmRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzb2x1dGlvbkNhcmQucmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgaWYgKCFpbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkgYXdhaXQgaW5pdGlhdG9yLnJldmVhbENoZWNrKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAoaW5pdGlhdG9yLnJlc29sdXRpb25DYXJkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAgICAgaW5pdGlhdG9yLnJlc29sdXRpb25DYXJkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxuICAgICAgICAgICAgICAgIGlmICghaW5pdGlhdG9yLmNoZWNrUmV2ZWFsZWQpIGF3YWl0IGluaXRpYXRvci5yZXZlYWxDaGVjaygpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21NZXNzYWdlSWQoY2hhdE1lc3NhZ2UuaWQpXG4gICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgICAgICAgIHRhcmdldC5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICB0YXJnZXQucmVzb2x1dGlvbkNhcmRcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGF3YWl0IHJlc29sdXRpb25DYXJkLnJlc29sdmUoKVxuICAgICAgICAgICAgaWYgKCF0YXJnZXQubWVsZWVJbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkge1xuICAgICAgICAgICAgICBhd2FpdCB0YXJnZXQubWVsZWVJbml0aWF0b3IucmV2ZWFsQ2hlY2soKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyByZW5kZXJNZXNzYWdlSG9vayAobWVzc2FnZSwgaHRtbCkge1xuICAgIHVpLmNoYXQuc2Nyb2xsQm90dG9tKClcblxuICAgIEludGVyYWN0aXZlQ2hhdENhcmQuYmluZExpc3RlbmVycyhodG1sKVxuXG4gICAgaWYgKG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdjaGVja1JldmVhbGVkJykpIHtcbiAgICAgIGh0bWwuZmluZCgnLmRpY2Utcm9sbCcpLnJlbW92ZUNsYXNzKCdnbS12aXNpYmxlLW9ubHknKVxuICAgICAgaHRtbFswXS5kYXRhc2V0LmNoZWNrUmV2ZWFsZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHNob3dpbmcgZHJvcGRvd24gc2VsZWN0aW9uXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5kcm9wYnRuJylcbiAgICAgIC5jbGljayhldmVudCA9PlxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAgICAgLmNsb3Nlc3QoJy5kcm9wZG93bicpXG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JylcbiAgICAgICAgICAuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXG4gICAgICApXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5kcm9wZG93bicpXG4gICAgICAubW91c2VsZWF2ZShldmVudCA9PlxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JylcbiAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpXG4gICAgICApXG5cbiAgICAvLyBjb25zb2xlLmxvZygnKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqLS0+Q29DN0NoYXQubWVzc2FnZUxpc3RlbmVycyBtZXNzYWdlIDonICsgbWVzc2FnZS5pZCk7XG4gICAgLy8gbWVzc2FnZS5kYXRhLmNvbnRlbnQgPSBcIlwiO1xuICAgIC8vIGRhdGEubWVzc2FnZS5jb250ZW50ID0gXCJcIjtcblxuICAgIC8vIFdoZW4gYSBuZXcgY2FyZCBpcyBwdWJsaXNoZWQsIGNoZWNrIHdldGhlciBpdCdzIGEgcm9sbCB0aGF0IG1vZGlmaWVzIGFuIG90aGVyIGNhcmQuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCBjYXJkID0gaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcuY29jNy5jaGF0LWNhcmQnKVxuICAgICAgaWYgKGNhcmQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLWNhcmQnKSAmJlxuICAgICAgICAgICEoY2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9PT0gJ3RydWUnKSAmJlxuICAgICAgICAgIGNhcmQuZGF0YXNldC5yZWZNZXNzYWdlSWRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3Qgcm9sbCA9IENvQzdSb2xsLmdldEZyb21FbGVtZW50KGNhcmQpXG5cbiAgICAgICAgICBpZiAoY2FyZC5kYXRhc2V0LnNpZGUgPT09ICd0YXJnZXQnKSB7XG4gICAgICAgICAgICByb2xsLmRlZmVuZGFudElkID0gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQuc2lkZSA9PT0gJ2luaXRpYXRvcicpIHtcbiAgICAgICAgICAgIHJvbGwuaW5pdGlhdG9ySWQgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA/IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgIDogY2FyZC5kYXRhc2V0LmFjdG9ySWRcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9ICd0cnVlJ1xuXG4gICAgICAgICAgQ29DN0NoYXQudXBkYXRlQ29tYmF0Q2FyZFRhcmdldChyb2xsKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdXNlck9ubHkgPSBodG1sLmZpbmQoJy50YXJnZXQtb25seScpXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHVzZXJPbmx5KSB7XG4gICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICBjb25zdCBhY3RvcklkID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtYWN0b3ItaWQnKVxuICAgICAgICBpZiAoYWN0b3JJZCkge1xuICAgICAgICAgIGlmIChnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZCkuaXNPd25lcikge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGdtT25seSA9IGh0bWwuZmluZCgnLmdtLW9ubHknKVxuICAgIGZvciAoY29uc3Qgem9uZSBvZiBnbU9ubHkpIHtcbiAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdXNlclZpc2libGVPbmx5ID0gaHRtbC5maW5kKCcudXNlci12aXNpYmxlLW9ubHknKVxuICAgIGZvciAoY29uc3QgZWxlbSBvZiB1c2VyVmlzaWJsZU9ubHkpIHtcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfVxuXG4gICAgY29uc3QgZ21WaXNpYmxlT25seSA9IGh0bWwuZmluZCgnLmdtLXZpc2libGUtb25seScpXG4gICAgZm9yIChjb25zdCBlbGVtIG9mIGdtVmlzaWJsZU9ubHkpIHtcbiAgICAgIGlmICghKGdhbWUudXNlci5pc0dNIHx8IChnYW1lLnVzZXIuaXNUcnVzdGVkICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RydXN0ZWRDYW5TZWVDaGF0Q2FyZCcpKSkpIGVsZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cblxuICAgIGNvbnN0IG93bmVyVmlzaWJsZU9ubHkgPSBodG1sLmZpbmQoJy5vd25lci12aXNpYmxlLW9ubHknKVxuICAgIGZvciAoY29uc3Qgem9uZSBvZiBvd25lclZpc2libGVPbmx5KSB7XG4gICAgICAvLyBUcnkgcmV0cmlldmluZyBhY3RvclxuICAgICAgbGV0IGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleSh6b25lLmRhdGFzZXQ/LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBzZWxmLlxuICAgICAgaWYgKCFhY3RvcikgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3Rvcih6b25lLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKSkgLy8gVHJ5IHdpdGggY2xvc2VzdCBjaGF0IGNhcmQuXG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleSh6b25lLnBhcmVudEVsZW1lbnQuZGF0YXNldC5hY3RvcktleSkgLy8gVHJ5IHdpdGggcGFyZW50IGVsZW1lbnQuXG4gICAgICB9XG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICB6b25lLmNsb3Nlc3QoJ1tkYXRhLWFjdG9yLWtleV0nKT8uZGF0YXNldC5hY3RvcktleVxuICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS1hY3Rvci1rZXlcbiAgICAgIH1cbiAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtdG9rZW4ta2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XG4gICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLXRva2VuLWtleVxuICAgICAgfVxuXG4gICAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggYWN0b3JJZCk7XG4gICAgICBpZiAoKGFjdG9yICYmICFhY3Rvci5pc093bmVyKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIH0gLy8gaWYgY3VycmVudCB1c2VyIGRvZXNuJ3Qgb3duIHRoaXMgaGUgY2FuJ3QgaW50ZXJyYWN0XG4gICAgICAvLyBpZiggIUNvQzdDaGF0LmlzQ2FyZE93bmVyKCB6b25lLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKSkpIHt6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7fVxuICAgIH1cblxuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIC8vIEdNIGNhbiBzZWUgZXZlcnl0aGluZ1xuICAgICAgY29uc3Qgb3duZXJPbmx5ID0gaHRtbC5maW5kKCcub3duZXItb25seScpXG4gICAgICBmb3IgKGNvbnN0IHpvbmUgb2Ygb3duZXJPbmx5KSB7XG4gICAgICAgIC8vIFRyeSByZXRyaWV2aW5nIGFjdG9yXG4gICAgICAgIGxldCBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgem9uZS5kYXRhc2V0Py5hY3RvcktleSB8fCB6b25lLmRhdGFzZXQ/LmFjdG9ySWRcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBzZWxmLlxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3Rvcih6b25lLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKSkgLy8gVHJ5IHdpdGggY2xvc2VzdCBjaGF0IGNhcmQuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleSh6b25lLnBhcmVudEVsZW1lbnQuZGF0YXNldC5hY3RvcktleSkgLy8gVHJ5IHdpdGggcGFyZW50IGVsZW1lbnQuXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtYWN0b3Ita2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XG4gICAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtYWN0b3Ita2V5XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICAgIGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtdG9rZW4ta2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XG4gICAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtdG9rZW4ta2V5XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggYWN0b3JJZCk7XG4gICAgICAgIGlmICgoYWN0b3IgJiYgIWFjdG9yLmlzT3duZXIpIHx8ICghYWN0b3IgJiYgIWdhbWUudXNlci5pc0dNKSkge1xuICAgICAgICAgIHpvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgICB9IC8vIGlmIGN1cnJlbnQgdXNlciBkb2Vzbid0IG93biB0aGlzIGhlIGNhbid0IGludGVycmFjdFxuICAgICAgICAvLyBpZiggIUNvQzdDaGF0LmlzQ2FyZE93bmVyKCB6b25lLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKSkpIHt6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7fVxuICAgICAgfVxuXG4gICAgICBjb25zdCBnbVNlbGVjdE9ubHkgPSBodG1sLmZpbmQoJy5nbS1zZWxlY3Qtb25seScpXG4gICAgICBpZiAoIShnYW1lLnVzZXIuaXNUcnVzdGVkICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RydXN0ZWRDYW5Nb2RmeUNoYXRDYXJkJykpKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc2VsZWN0IG9mIGdtU2VsZWN0T25seSkge1xuICAgICAgICAgIHNlbGVjdC5jbGFzc0xpc3QuYWRkKCdpbmFjdGl2ZScpXG4gICAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5yZW1vdmUoJ3NpbXBsZS1mbGFnJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgYWN0aW9uVHlwZVN0cmluZyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGZpZ2h0QmFjazogJ0NvQzcuZmlnaHRCYWNrJyxcbiAgICAgIG1hbmV1dmVyOiAnQ29DNy5tYW5ldXZlcicsXG4gICAgICBkb2RnaW5nOiAnQ29DNy5kb2RnZSdcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX29uVGFyZ2V0U2VsZWN0IChldmVudCkge1xuICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmtleSlcbiAgICBjb25zdCB0YXJnZXRzU2VsZWN0b3IgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXRzLXNlbGVjdG9yJylcbiAgICBmb3IgKGNvbnN0IGkgb2YgdGFyZ2V0c1NlbGVjdG9yLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpKSB7XG4gICAgICBpLnN0eWxlLmJvcmRlciA9ICdub25lJ1xuICAgIH1cbiAgICB0YXJnZXRzU2VsZWN0b3JcbiAgICAgIC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1rZXk9XCIke2luZGV4fVwiXWApXG4gICAgICAucXVlcnlTZWxlY3RvcignaW1nJykuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjMDAwJ1xuICAgIGNvbnN0IHRhcmdldHMgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50YXJnZXRzJylcbiAgICBmb3IgKGNvbnN0IHQgb2YgdGFyZ2V0cy5xdWVyeVNlbGVjdG9yQWxsKCcudGFyZ2V0JykpIHtcbiAgICAgIHQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgdC5kYXRhc2V0LmFjdGl2ZSA9ICdmYWxzZSdcbiAgICB9XG4gICAgY29uc3QgdGFyZ2V0VG9EaXNwbGF5ID0gdGFyZ2V0cy5xdWVyeVNlbGVjdG9yKFxuICAgICAgYFtkYXRhLXRhcmdldC1rZXk9XCIke2luZGV4fVwiXWBcbiAgICApXG4gICAgdGFyZ2V0VG9EaXNwbGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgdGFyZ2V0VG9EaXNwbGF5LmRhdGFzZXQuYWN0aXZlID0gJ3RydWUnXG4gICAgLy8gY29uc3QgY2hhdENhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQucmFuZ2UnKTtcbiAgICAvLyBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZCggY2hhdENhcmQpO1xuICB9XG5cbiAgc3RhdGljIF9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgIENvQzdNZWxlZVRhcmdldC51cGRhdGVTZWxlY3RlZChjYXJkLCBldmVudClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGNsZWFyIGFsbCBkcm9wIGRvd24gYW5kIGhpZ2hsaWdodCB0aGlzIHBhcnRpY3VsYXIgb25lXG4gICAgY29uc3QgZHJvcERvd25Cb3hlcyA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcucmVzcG9uc2Utc2VsZWN0aW9uJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlLXN3aXRjaCcpXG4gICAgZm9yIChjb25zdCBkcGRuQm94IG9mIGRyb3BEb3duQm94ZXMpIHtcbiAgICAgIGRwZG5Cb3guY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZWQtb24nKVxuICAgIH1cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZWQtb24nKVxuXG4gICAgLy8gY2xvc2UgZHJvcGRvd25cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXG5cbiAgICAvLyBEaXNwbGF5IHRoZSByb2xsIGJ1dHRvblxuICAgIGNvbnN0IHNlbGVjdGVkQm94ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtYWN0aW9uJylcbiAgICBzZWxlY3RlZEJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNlbGVjdGVkQm94LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG5cbiAgICAvLyBQYXNzIHRoZSBpbml0aWF0b3IgSWQgLSBCdWlsZCBjYW4gYmUgcmV0cmlldmVkIGZyb20gdGhhdFxuXG4gICAgLy8gUGFzcyB0aGUgaW5pdGlhdG9yIGl0ZW1cblxuICAgIC8vIFBhc3MgdGhlIGRlZmVuZGFudCBJZFxuXG4gICAgLy8gUGFzcyB0aGUgZGVmZW5kYW50IGFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvbiA9ICdkZWZlbmRpbmcnXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uVHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5kZWZlbmRlckNob2ljZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBidXR0b24uZGF0YXNldC5za2lsbFZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICBidXR0b24uZGF0YXNldC5za2lsbE5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lXG4gICAgYnV0dG9uLmRhdGFzZXQuaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LndlYXBvbklkXG4gICAgYnV0dG9uLmRhdGFzZXQuaXRlbU5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uTmFtZVxuXG4gICAgLy8gUHV0IHNvbWUgdGV4dCBpbiB0aGUgYnV0dG9uXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdtYW5ldXZlcic6XG4gICAgICAgIGJ1dHRvbi5pbm5lclRleHQgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5jb21iYXRDYXJkc1tldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXVxuICAgICAgICApfSA6ICR7ZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZX0gKCR7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICAgICAgfSUpYFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcbiAgICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXG4gICAgICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uTmFtZX0gKCR7XG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICAgICAgfSUpYFxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgICAvLyBTYXZlIGFjdGlvbiBmb3IgdGhlIHJvbGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25JbmxpbmUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2lubGluZS1yZXN1bHQnKSkge1xuICAgICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2NvbGxhcHNlSW5saW5lUmVzdWx0KGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9leHBhbmRJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX29uVG9nZ2xlU2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZVNlbGVjdGVkKGNhcmQsIGV2ZW50KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkID09PSAnJykge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JOb0RvZGdlU2tpbGwnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIGNsZWFyIGFsbCBkcm9wIGRvd24gYW5kIGhpZ2hsaWdodCB0aGlzIHBhcnRpY3VsYXIgb25lXG4gICAgY29uc3QgZHJvcERvd25Cb3hlcyA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcucmVzcG9uc2Utc2VsZWN0aW9uJylcbiAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcudG9nZ2xlLXN3aXRjaCcpXG4gICAgZm9yIChjb25zdCBkcGRuQm94IG9mIGRyb3BEb3duQm94ZXMpIHtcbiAgICAgIGRwZG5Cb3guY2xhc3NMaXN0LnJlbW92ZSgnc3dpdGNoZWQtb24nKVxuICAgIH1cbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3N3aXRjaGVkLW9uJykgLy8gTmVlZCB0byB0ZXN0IGlmIGl0J3MgcmVhbGx5IGEgZG9kZ2UgISEhXG5cbiAgICAvLyBTYXZlIGFjdGlvbiBmb3IgdGhlIHJvbGxcbiAgICBjb25zdCBzZWxlY3RlZEJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIC5jbG9zZXN0KCcuZGVmZW5kZXItYWN0aW9uLXNlbGVjdCcpXG4gICAgICAucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLWFjdGlvbicpXG4gICAgc2VsZWN0ZWRCb3guc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICBjb25zdCBidXR0b24gPSBzZWxlY3RlZEJveC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKVxuXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uID0gJ2RlZmVuZGluZydcbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb25UeXBlID0gJ2RvZGdpbmcnXG4gICAgYnV0dG9uLmRhdGFzZXQuZGVmZW5kZXJDaG9pY2UgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxWYWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgYnV0dG9uLmRhdGFzZXQuc2tpbGxOYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZVxuXG4gICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgIENPQzcuY29tYmF0Q2FyZHNbZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbl1cbiAgICApfSA6ICR7ZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsTmFtZX0gKCR7XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgIH0lKWBcbiAgfVxuXG4gIHN0YXRpYyBfb25DaGF0Q2FyZFJhZGlvU3dpdGNoIChldmVudCkge1xuICAgIC8vIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5fb25DaGF0Q2FyZFJhZGlvU3dpdGNoJyk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG9wdGlvbkxpc3QgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3JhZGlvLXN3aXRjaCcpXG4gICAgbGV0IGluZGV4XG4gICAgZm9yIChpbmRleCA9IDA7IGluZGV4IDwgb3B0aW9uTGlzdC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBvcHRpb25MaXN0W2luZGV4XVxuICAgICAgaWYgKGVsZW1lbnQuZGF0YXNldC5wcm9wZXJ0eSA9PT0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5KSB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZWQtb24nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlZC1vbicpXG4gICAgICB9XG4gICAgfVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnNlbGVjdGVkID1cbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNoYXRDYXJkVm9sbGV5U2l6ZSAoZXZlbnQpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICBjb25zdCByYW5nZUNhcmQgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmNyZWFzZScpKSB7XG4gICAgICAgICAgcmFuZ2VDYXJkLmNoYW5nZVZvbGxleVNpemUoMSlcbiAgICAgICAgfSBlbHNlIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVjcmVhc2UnKSkge1xuICAgICAgICAgIHJhbmdlQ2FyZC5jaGFuZ2VWb2xsZXlTaXplKC0xKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnbWVsZWUnKSkge1xuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICBDb0M3TWVsZWVJbml0aWF0b3IudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICAgIH1cblxuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgICBDb0M3TWVsZWVUYXJnZXQudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhbmdlJykpIHtcbiAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgQ29DN1JhbmdlSW5pdGlhdG9yLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkYW1hZ2UnKSkge1xuICAgICAgLy8gQ29DN0l0ZW0udXBkYXRlQ2FyZFN3aXRjaCggZXZlbnQpO1xuICAgIH1cblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1jYXJkJykpIHtcbiAgICAgIENvQzdDaGVjay51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIEFjdG9yIHdoaWNoIGlzIHRoZSBhdXRob3Igb2YgYSBjaGF0IGNhcmRcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZCAgICBUaGUgY2hhdCBjYXJkIGJlaW5nIHVzZWRcbiAgICogQHJldHVybiB7QWN0b3J8bnVsbH0gICAgICAgICBUaGUgQWN0b3IgZW50aXR5IG9yIG51bGxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBfZ2V0Q2hhdENhcmRBY3RvciAoY2FyZCkge1xuICAgIC8vIGlmIGRhdGFzZXQub2JqZWN0IGlzIHRoZXJlID0+IG5lZWQgdG8gdW5lc2NhcGUgdGhpbmdzICEhXG4gICAgLy8gaWYgbm90IHVzZSB0aGUgZGF0YXNldCBkaXJlY3RseS5cbiAgICBjb25zdCBjYXJkRGF0YSA9IGNhcmQuZGF0YXNldC5vYmplY3RcbiAgICAgID8gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICAgIDogY2FyZC5kYXRhc2V0XG5cbiAgICBpZiAoY2FyZERhdGEuYWN0b3JLZXkpIHJldHVybiBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KGNhcmREYXRhLmFjdG9yS2V5KVxuXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgY29uc3QgdG9rZW5LZXkgPSBjYXJkRGF0YS50b2tlbklkXG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvciB8fCBuZXcgVG9rZW4odG9rZW5EYXRhKS5hY3RvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICBjb25zdCBhY3RvcklkID0gY2FyZERhdGEuYWN0b3JJZFxuICAgIGlmIChhY3RvcklkKSByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpXG5cbiAgICBjb25zdCBtZXNzYWdlID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZSA/IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQgOiBudWxsXG4gICAgaWYgKG1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgICBpZiAoY2hhdE1lc3NhZ2UudXNlcikgcmV0dXJuIGNoYXRNZXNzYWdlLnVzZXIuY2hhcmFjdGVyXG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN0YXRpYyBpc0NhcmRPd25lciAoY2FyZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlID8gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG51bGxcbiAgICBpZiAobWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICAgIHJldHVybiBjaGF0TWVzc2FnZS5vd25uZXIgfHwgZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBfZ2V0QWN0b3JGcm9tS2V5IChrZXkpIHtcbiAgICBpZiAoIWtleSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3IgfHwgbmV3IFRva2VuKHRva2VuRGF0YSkuYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChrZXkpIHx8IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21Ub2tlbiAodG9rZW5LZXkpIHtcbiAgICBjb25zdCB0b2tlbiA9IENvQzdDaGF0LmdldFRva2VuKHRva2VuS2V5KVxuICAgIHJldHVybiB0b2tlbiA/IHRva2VuLmFjdG9yIDogbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldFRva2VuICh0b2tlbktleSkge1xuICAgIGlmICh0b2tlbktleSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gdG9rZW5LZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgY29uc3QgdG9rZW5Eb2MgPSBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0/LnRva2VuXG4gICAgICAgIHJldHVybiB0b2tlbkRvYy5vYmplY3QgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcbiAgICAgICAgcmV0dXJuIHRva2VuIHx8IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvKipcbiAgICogdXBkYXRlIGEgY2hhdCBtZXNzYWdlIHdpdGggYSBuZXcgSFRNTCBjb250ZW50IGFuZCBwb3B1bGF0ZSBpdC5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNoYXRDYXJkIChjYXJkLCBtZXNzSWQgPSBudWxsKSB7XG4gICAgY29uc3QgbWVzc2FnZUlkID1cbiAgICAgIG1lc3NJZCA9PSBudWxsID8gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkIDogbWVzc0lkXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogY2FyZC5vdXRlckhUTUwgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRBY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0Ll9vbkNoYXRDYXJkQWN0aW9uJyk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSBidXR0b24uY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCBvcmlnaW5NZXNzYWdlID0gYnV0dG9uLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICAvLyBjb25zdCBtZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgIGNvbnN0IGFjdGlvbiA9IGJ1dHRvbi5kYXRhc2V0LmFjdGlvblxuXG4gICAgaWYgKCFDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3RvcihjYXJkKSkgcmV0dXJuXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAndXNlTHVjayc6IHtcbiAgICAgICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0Lmx1Y2tBbW91bnQpXG4gICAgICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9IHBhcnNlSW50KFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5uZXdTdWNjZXNzTGV2ZWxcbiAgICAgICAgKVxuXG4gICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnbWVsZWUnKSkge1xuICAgICAgICAgIGxldCBtZWxlZUNhcmRcbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgICAgICBtZWxlZUNhcmQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICAgICAgbWVsZWVDYXJkID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgfVxuICAgICAgICAgIG1lbGVlQ2FyZC51cGdyYWRlUm9sbChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIGNhcmQpIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgICAgIH0gZWxzZSBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JhbmdlJykpIHtcbiAgICAgICAgICBjb25zdCByYW5nZUNhcmQgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICBjb25zdCByb2xsUmVzdWx0ID0gYnV0dG9uLmNsb3Nlc3QoJy5yb2xsLXJlc3VsdCcpXG4gICAgICAgICAgY29uc3Qgcm9sbEluZGV4ID0gcm9sbFJlc3VsdFxuICAgICAgICAgICAgPyBwYXJzZUludChyb2xsUmVzdWx0LmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygncGFzcy1jaGVjaycpKSB7XG4gICAgICAgICAgICByYW5nZUNhcmQucGFzc1JvbGwocm9sbEluZGV4KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChidXR0b24uZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIHJhbmdlQ2FyZC51cGdyYWRlUm9sbChyb2xsSW5kZXgsIHVwZ3JhZGVJbmRleCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpIHx8XG4gICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKSAhPSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgICAgaWYgKGJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3Bhc3MtY2hlY2snKSkge1xuICAgICAgICAgICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0Lmx1Y2tBbW91bnQpXG4gICAgICAgICAgICBjaGVjay5mb3JjZVBhc3MobHVja0Ftb3VudClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdXBncmFkZUluZGV4ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQuaW5kZXgpXG4gICAgICAgICAgICBhd2FpdCBjaGVjay51cGdyYWRlQ2hlY2sodXBncmFkZUluZGV4KVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpXG4gICAgICAgICAgY29uc3QgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlciA9XG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtZGV0YWlscycpXG5cbiAgICAgICAgICBpZiAoYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgICAgIGNhcmQuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICAgICAgICAgIGNhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSAnZmFsc2UnIC8vIHRyaWdnZXIgMyB1cGRhdGVzIGRlIGNhcmRcbiAgICAgICAgICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnZnVtYmxlJylcbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXG4gICAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChjYXJkKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90RW5vdWdoTHVjaycsIHtcbiAgICAgICAgICAgICAgICBhY3RvcjogYWN0b3IubmFtZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncHVzaCc6IHtcbiAgICAgICAgY29uc3QgbmV3Q2FyZCA9IGNhcmQuY2xvbmVOb2RlKHRydWUpIC8vIFRPRE8gbm90IG5lY2Vzc2FyeVxuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9XG4gICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QdXNoaW5nU2tpbGwnKVxuICAgICAgICByZXN1bHQuY2xhc3NMaXN0LnJlbW92ZSgnZmFpbHVyZScpXG4gICAgICAgIG5ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpLnJlbW92ZSgpXG4gICAgICAgIG5ld0NhcmQuZGF0YXNldC5wdXNoZWRSb2xsID0gdHJ1ZVxuICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChuZXdDYXJkLCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2sucHVzaChjYXJkKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZGVmZW5kaW5nJzoge1xuICAgICAgICBsZXQgZGVmZW5kZXJLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgICAgICAuZGF0YXNldC50b2tlbklkXG4gICAgICAgIGxldCBkZWZlbmRlclxuICAgICAgICBpZiAoIWRlZmVuZGVyS2V5KSB7XG4gICAgICAgICAgZGVmZW5kZXJLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgICAgICAgIC5kYXRhc2V0LmFjdG9ySWRcbiAgICAgICAgICBkZWZlbmRlciA9IGdhbWUuYWN0b3JzLmdldChkZWZlbmRlcktleSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWZlbmRlciA9IHRoaXMuZ2V0QWN0b3JGcm9tVG9rZW4oZGVmZW5kZXJLZXkpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZVR5cGUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uVHlwZVxuICAgICAgICBjb25zdCBvdXRudW1iZXJlZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5vdXRudW1iZXJlZCA9PT0gJ3RydWUnXG4gICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWRcbiAgICAgICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcbiAgICAgICAgY2hlY2suc2lkZSA9ICd0YXJnZXQnXG4gICAgICAgIGNoZWNrLmFjdGlvbiA9IHJlc3BvbnNlVHlwZVxuICAgICAgICBzd2l0Y2ggKHJlc3BvbnNlVHlwZSkge1xuICAgICAgICAgIGNhc2UgJ2RvZGdpbmcnOlxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgICAgICBjaGVjay5hY3RvciA9IGRlZmVuZGVyXG4gICAgICAgICAgICBjaGVjay5za2lsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgICAgICBjaGVjay5pdGVtID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ21hbmV1dmVyJzoge1xuICAgICAgICAgICAgY29uc3QgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0Q2hhdENhcmRBY3RvcihjYXJkKVxuICAgICAgICAgICAgaWYgKGRlZmVuZGVyLmJ1aWxkIDw9IGFjdG9yLmJ1aWxkIC0gMykge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck1hbmV1dmVyTm90UG9zc2libGUnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2suYWN0b3IgPSBkZWZlbmRlclxuICAgICAgICAgICAgY2hlY2suc2tpbGwgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICAgICAgaWYgKG91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMVxuICAgICAgICAgICAgaWYgKGRlZmVuZGVyLmJ1aWxkIDwgYWN0b3IuYnVpbGQpIHtcbiAgICAgICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID1cbiAgICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgLSAoYWN0b3IuYnVpbGQgLSBkZWZlbmRlci5idWlsZClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNoZWNrLmRpY2VNb2RpZmllciA8IC0yKSB7XG4gICAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPVxuICAgICAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgKyBNYXRoLmFicyhjaGVjay5kaWNlTW9kaWZpZXIpIC0gMlxuICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAtMlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtZWxlZS1pbml0aWF0b3Itcm9sbCc6IHtcbiAgICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgaW5pdGlhdG9yLnBlcmZvcm1Ta2lsbENoZWNrKFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFxuICAgICAgICApXG4gICAgICAgICQoYnV0dG9uKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGNoZWNrLmRpY2Uucm9sbClcbiAgICAgICAgYXdhaXQgaW5pdGlhdG9yLnB1Ymxpc2hDaGVja1Jlc3VsdCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lbGVlLXRhcmdldC1uby1yZXNwb25zZSc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHRhcmdldC5wdWJsaXNoTm9SZXBvbnNlUmVzdWx0KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVsZWUtdGFyZ2V0LXJvbGwnOiB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IHRhcmdldC5wZXJmb3JtU2tpbGxDaGVjayhcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxcbiAgICAgICAgKVxuICAgICAgICAkKGJ1dHRvbikucHJvcCgnZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChjaGVjay5kaWNlLnJvbGwpXG4gICAgICAgIGF3YWl0IHRhcmdldC5wdWJsaXNoQ2hlY2tSZXN1bHQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncm9sbC1tZWxlZS1kYW1hZ2UnOiB7XG4gICAgICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xuICAgICAgICAgIGNyaXRpY2FsOiBidXR0b24uZGF0YXNldC5jcml0aWNhbCA9PT0gJ3RydWUnLFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleVxuICAgICAgICB9KVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5hY3RvcktleSA9IGJ1dHRvbi5kYXRhc2V0LmRlYWxlclxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC50YXJnZXRLZXkgPSBidXR0b24uZGF0YXNldC50YXJnZXRcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gYnV0dG9uLmRhdGFzZXQud2VhcG9uXG4gICAgICAgIGlmIChvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSB7XG4gICAgICAgICAgZGFtYWdlQ2hhdENhcmQubWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgICAgICB9XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcblxuICAgICAgICAvLyBjb25zdCBkYW1hZ2VDYXJkID0gbmV3IENvQzdEYW1hZ2VSb2xsKFxuICAgICAgICAvLyAgYnV0dG9uLmRhdGFzZXQud2VhcG9uLFxuICAgICAgICAvLyAgYnV0dG9uLmRhdGFzZXQuZGVhbGVyLFxuICAgICAgICAvLyAge1xuICAgICAgICAvLyAgICB0YXJnZXRLZXk6IGJ1dHRvbi5kYXRhc2V0LnRhcmdldCxcbiAgICAgICAgLy8gICAgY3JpdGljYWw6ICd0cnVlJyA9PSBidXR0b24uZGF0YXNldC5jcml0aWNhbCxcbiAgICAgICAgLy8gICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIC8vICB9KTtcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIGRhbWFnZUNhcmQubWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZDtcbiAgICAgICAgLy8gZGFtYWdlQ2FyZC5yb2xsRGFtYWdlKCk7XG4gICAgICAgIC8vIGlmKCBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkKSB7XG4gICAgICAgIC8vICBmb3IgKGNvbnN0IGIgb2YgY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FyZC1idXR0b25zJykpIHsgYi5yZW1vdmUoKSB9XG4gICAgICAgIC8vICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZCggY2FyZCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1zaG9vdCc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgcmFuZ2VJbml0aWF0b3IuYWRkU2hvdEF0Q3VycmVudFRhcmdldCgpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JhbmdlLWluaXRpYXRvci1yb2xsJzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5yZXNvbHZlQ2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyb2xsLXJhbmdlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3Iucm9sbERhbWFnZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdkZWFsLW1lbGVlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0S2V5ID0gY2FyZC5kYXRhc2V0LnRhcmdldEtleVxuICAgICAgICBjb25zdCBhbW91bnQgPSBjYXJkLmRhdGFzZXQucmVzdWx0XG4gICAgICAgIGNvbnN0IHRhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgYXdhaXQgdGFyZ2V0QWN0b3IuZGVhbERhbWFnZShhbW91bnQpXG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKVxuICAgICAgICBjb25zdCBkaWNlVG90YWwgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICAgICAgJChkaWNlVG90YWwpLmFwcGVuZCgnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JylcbiAgICAgICAgaWYgKGJ1dHRvbnMpIGJ1dHRvbnMucmVtb3ZlKClcbiAgICAgICAgYXdhaXQgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQoY2FyZClcblxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWFsLXJhbmdlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgcmFuZ2VJbml0aWF0b3IgPSBDb0M3UmFuZ2VJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3IuZGVhbERhbWFnZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Rlc3RjaGVjayc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtcGFzcyc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VQYXNzKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suZm9yY2VGYWlsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5jcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suaW5jcmVhc2VTdWNjZXNzTGV2ZWwoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5kZWNyZWFzZVN1Y2Nlc3NMZXZlbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGlmIChcbiAgICAgICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgICAgICkge1xuICAgICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgbWFrZVB1YmxpYzogdHJ1ZSB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKHsgbWFrZVB1YmxpYzogdHJ1ZSB9KVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY2hlY2stY2FyZCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY2hlY2suc3RhbmRieSA9IGZhbHNlXG4gICAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKClcbiAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoeyBmb3JjZVJvbGw6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZmxhZy1mb3ItZGV2ZWxvcG1lbnQnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IGNoZWNrLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgICBjaGVjay5jb21wdXRlQ2hlY2soKVxuICAgICAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Jlc2V0LWNyZWF0dXJlLXNhbi1kYXRhJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5jbGVhclNhbkxvc3NSZWFzb24oKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtc2FuLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsU2FuKClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhZHZhbmNlLXN0YXRlJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5hZHZhbmNlU3RhdGUoXG4gICAgICAgICAgYnV0dG9uLmRhdGFzZXQuc3RhdGUgLyosIGJ1dHRvbi5kYXRhc2V0LnBhcmFtICovXG4gICAgICAgIClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLXNhbi1sb3NzJzoge1xuICAgICAgICBjb25zdCBzYW5DaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay5yb2xsU2FuTG9zcygpXG4gICAgICAgIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1pbnQtY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnJvbGxJbnQoKVxuICAgICAgICBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIC8vIGNhc2UgJ2FwcGx5LXNhbi1sb3NzJzp7XG4gICAgICAvLyAgY29uc3Qgc2FuQ2hlY2sgPSBDb0M3U2FuQ2hlY2suZ2V0RnJvbUNhcmQoIGNhcmQpO1xuICAgICAgLy8gIGF3YWl0IHNhbkNoZWNrLmFwcGx5U2FuTG9zcygpO1xuICAgICAgLy8gIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKCk7XG4gICAgICAvLyAgYnJlYWs7XG4gICAgICAvLyB9XG5cbiAgICAgIC8vIGNhc2UgJ3JldmVhbC1zYW4tY2hlY2snOntcbiAgICAgIC8vICBjb25zdCBzYW5DaGVjayA9IENvQzdTYW5DaGVjay5nZXRGcm9tQ2FyZCggY2FyZCk7XG4gICAgICAvLyAgc2FuQ2hlY2suaXNCbGluZCA9IGZhbHNlO1xuICAgICAgLy8gIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKCk7XG4gICAgICAvLyAgYnJlYWs7XG4gICAgICAvLyB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtY29uLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBjb25DaGVjayA9IENvQzdDb25DaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCBjb25DaGVjay5yb2xsQ29uKClcbiAgICAgICAgY29uQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXZlYWwtY29uLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBjb25DaGVjayA9IENvQzdDb25DaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjb25DaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICAgICAgY29uQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdG9nZ2xpbmcgdGhlIHZpc2liaWxpdHkgb2YgY2hhdCBjYXJkIGNvbnRlbnQgd2hlbiB0aGUgbmFtZSBpcyBjbGlja2VkXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50ICAgVGhlIG9yaWdpbmF0aW5nIGNsaWNrIGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX29uQ2hhdENhcmRUb2dnbGVDb250ZW50IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBoZWFkZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgY2FyZCA9IGhlYWRlci5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBjb25zdCBjb250ZW50ID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1jb250ZW50JylcbiAgICBpZiAoY29udGVudCkge1xuICAgICAgaWYgKCFjb250ZW50LnN0eWxlLmRpc3BsYXkpIHtcbiAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID1cbiAgICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPT09ICdub25lJyA/ICdibG9jaycgOiAnbm9uZSdcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIHVpICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIENvQzdSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ2hhdENhcmRBY3RvciB9IGZyb20gJy4uL2NhcmQtYWN0b3IuanMnXG5cbi8vIFRPRE8gOiByw6ljdXDDqXJlciBsZSBqZXQgZW4gdGFudCBxdSdvYmpldCAhISFcbmV4cG9ydCBjbGFzcyBDb0M3TWVsZWVJbml0aWF0b3IgZXh0ZW5kcyBDaGF0Q2FyZEFjdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgaXRlbUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHN1cGVyKGFjdG9yS2V5LCBmYXN0Rm9yd2FyZClcbiAgICB0aGlzLml0ZW1JZCA9IGl0ZW1JZFxuICAgIHRoaXMucmVzb2x2ZWQgPSBmYWxzZVxuICAgIHRoaXMub3V0bnVtYmVyZWQgPSBmYWxzZVxuICAgIHRoaXMuc3VycHJpc2VkID0gZmFsc2VcbiAgICB0aGlzLmF1dG9TdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLmFkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5kaXNhZHZhbnRhZ2UgPSBmYWxzZVxuICAgIHRoaXMubWVzc2FnZUlkID0gbnVsbFxuICAgIHRoaXMudGFyZ2V0Q2FyZCA9IG51bGxcbiAgICB0aGlzLnJvbGxlZCA9IGZhbHNlXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9tZWxlZS1pbml0aWF0b3IuaHRtbCdcbiAgfVxuXG4gIGFzeW5jIHJldmVhbENoZWNrICgpIHtcbiAgICAvLyBUT0RPIDogb24gdXRpbGlzZSBsJ3VwZGF0ZSBkdSBtZXNzYWdlIGF1IGxpZXUgZGUgcmVjb25zdHJ1aXJlIGwnb2JqZXQuIENoYW5nZXIgY2UgY29tcG9ydGVtZW50LlxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG5cbiAgICBhd2FpdCBjaGF0TWVzc2FnZS5zZXRGbGFnKCdDb0M3JywgJ2NoZWNrUmV2ZWFsZWQnLCB0cnVlKVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShjaGF0TWVzc2FnZSwgZmFsc2UpXG4gIH1cblxuICBhc3luYyBjcmVhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBpZiAodGhpcy50b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzXG4gICAgZWxzZSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXNcbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgLy8gaWYgKCB0aGlzLmlzQmxpbmQgKSBjaGF0RGF0YVsnYmxpbmQnXSA9IHRydWU7XG4gICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG5cbiAgICByZXR1cm4gY2hhdE1lc3NhZ2VcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZyA9IGZsYWdOYW1lLmluY2x1ZGVzKCctJylcbiAgICAgID8gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnTmFtZSlcbiAgICAgIDogZmxhZ05hbWVcbiAgICB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgfVxuXG4gIGFzeW5jIHBlcmZvcm1Ta2lsbENoZWNrIChza2lsbElkID0gbnVsbCwgcHVibGlzaCA9IGZhbHNlKSB7XG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAvLyBDb21iYXQgcm9sbCBjYW5ub3QgYmUgYmxpbmQgb3IgdW5rbm93blxuICAgIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGNoZWNrLmlzVW5rb253biA9IGZhbHNlXG4gICAgY2hlY2sucmVmZXJlbmNlTWVzc2FnZUlkID0gdGhpcy5tZXNzYWdlSWRcbiAgICBjaGVjay5yb2xsVHlwZSA9ICdvcHBvc2VkJ1xuICAgIGNoZWNrLnNpZGUgPSAnaW5pdGlhdG9yJ1xuICAgIGNoZWNrLmFjdGlvbiA9ICdhdHRhY2snXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgY2hlY2suaXRlbSA9IHRoaXMuaXRlbUlkXG4gICAgY2hlY2suc2tpbGwgPSBza2lsbElkXG4gICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IDBcblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy5jaGVja1JldmVhbGVkID0gZmFsc2VcbiAgICBlbHNlIHRoaXMuY2hlY2tSZXZlYWxlZCA9IHRydWVcblxuICAgIGlmICh0aGlzLm91dG51bWJlcmVkKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuICAgIGlmICh0aGlzLnN1cnByaXNlZCkgY2hlY2suZGljZU1vZGlmaWVyICs9IDFcbiAgICBpZiAodGhpcy5kaXNhZHZhbnRhZ2UpIGNoZWNrLmRpY2VNb2RpZmllciAtPSAxXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBpZiAocHVibGlzaCkgY2hlY2sudG9NZXNzYWdlKClcblxuICAgIHRoaXMuY3JpdGljYWxEYW1hZ2UgPVxuICAgICAgY2hlY2suc3VjY2Vzc0xldmVsID09PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgfHxcbiAgICAgIGNoZWNrLnN1Y2Nlc3NMZXZlbCA9PT0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgIGlmICh0aGlzLmhhc1RhcmdldCAmJiAhdGhpcy5hdXRvU3VjY2Vzcykge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IGdhbWUuQ29DN3NvY2tldC5leGVjdXRlQXNHTSgnZ21jcmVhdGVtZXNzYWdlYXMnLCB7XG4gICAgICAgIHRhcmdldEtleTogdGhpcy50YXJnZXRLZXksXG4gICAgICAgIG1lc3NhZ2VJZDogdGhpcy5tZXNzYWdlSWQsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0aGlzLmZhc3RGb3J3YXJkLFxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3RvcktleVxuICAgICAgfSlcbiAgICAgIHRoaXMudGFyZ2V0Q2FyZCA9IG1lc3NhZ2UuaWQgfHwgbWVzc2FnZS5faWRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hdXRvU3VjY2VzcyAmJiAhdGhpcy5jaGVjay5pc0Z1bWJsZSkge1xuICAgICAgdGhpcy5jaGVjay5mb3JjZVBhc3MoKVxuICAgIH1cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hDaGVja1Jlc3VsdCAoY2hlY2sgPSBudWxsKSB7XG4gICAgaWYgKCFjaGVjayAmJiAhdGhpcy5jaGVjaykgcmV0dXJuIG51bGxcblxuICAgIGlmIChjaGVjaykgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNoZWNrKHRoaXMuY2hlY2spXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICB0aGlzLnJvbGwucm9sbEljb25zID0gW11cbiAgICBpZiAodGhpcy5yb2xsLmNyaXRpY2FsKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnbWVkYWwnKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLmZ1bWJsZSkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdkYXJrcmVkJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzcGlkZXInKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLnN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzdGFyJylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdibGFjaydcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NrdWxsJylcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMudGFyZ2V0Q2FyZCAmJiAhdGhpcy5hdXRvU3VjY2VzcyAmJiB0aGlzLmhhc1RhcmdldCkge1xuICAgICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICAgIClcbiAgICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG4gICAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICB9XG4gICAgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQsIG1lc3NhZ2VJZCA9IG51bGwpIHtcbiAgICBjb25zdCBpbml0aWF0b3IgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KGluaXRpYXRvciwgY2FyZClcbiAgICBpbml0aWF0b3Iucm9sbCA9IENvQzdSb2xsLmdldEZyb21DYXJkKGNhcmQpXG5cbiAgICBpZiAoY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpKSB7XG4gICAgICBpbml0aWF0b3IubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfSBlbHNlIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gaW5pdGlhdG9yXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxuXG4gICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQsIG1lc3NhZ2VJZClcbiAgICBpbml0aWF0b3IubWVzc2FnZUlkID0gbWVzc2FnZUlkXG5cbiAgICByZXR1cm4gaW5pdGlhdG9yXG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQsIHB1Ymxpc2hVcGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLm1lbGVlLmluaXRpYXRvcicpXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnKVxuXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxuICAgIGlmICghcHVibGlzaFVwZGF0ZSkge1xuICAgICAgY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSAhPT0gJ3RydWUnXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXG4gICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgIGluaXRpYXRvci50b2dnbGVGbGFnKGZsYWcpXG4gICAgICBpbml0aWF0b3IudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIHVwZ3JhZGVSb2xsIChsdWNrQW1vdW50LCBuZXdTdWNjZXNzTGV2ZWwsIG9sZENhcmQpIHtcbiAgICAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTHVja05vdEVub3VnaCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmFjdG9yLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5yb2xsLnZhbHVlID0gbnVsbFxuICAgIHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICB0aGlzLnJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIG9sZENhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSBmYWxzZVxuXG4gICAgY29uc3QgZGljZVJvbGxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yb2xsJylcbiAgICBkaWNlUm9sbHMuZGF0YXNldC52YWx1ZSA9IG51bGxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5sdWNrU3BlbnQgPSB0cnVlXG5cbiAgICBjb25zdCByZXN1bERldGFpbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtZGV0YWlscycpXG4gICAgY29uc3QgZGljZVRvdGFsID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgY29uc3Qgcm9sbERhbWFnZUJ1dHRvbiA9IG9sZENhcmQucXVlcnlTZWxlY3RvcihcbiAgICAgICdidXR0b25bZGF0YS1hY3Rpb249XCJyb2xsLW1lbGVlLWRhbWFnZVwiXSdcbiAgICApXG4gICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW52aXNpYmxlJylcblxuICAgIHN3aXRjaCAobmV3U3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICBpZiAocm9sbERhbWFnZUJ1dHRvbikgcm9sbERhbWFnZUJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsID0gdHJ1ZVxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIGlmIChyb2xsRGFtYWdlQnV0dG9uKSByb2xsRGFtYWdlQnV0dG9uLmRhdGFzZXQuY3JpdGljYWwgPSB0cnVlXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICBkaWNlVG90YWwuY2xhc3NMaXN0LnJlcGxhY2UoJ2ZhaWx1cmUnLCAnc3VjY2VzcycpXG4gICAgb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvb2x0aXAnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgQ29DN0NoYXQudXBkYXRlQ2hhdENhcmQob2xkQ2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBBcHBsaWNhdGlvbiwgQ09ORklHLCBDT05TVCwgRGlhbG9nLCBEaWUsIGR1cGxpY2F0ZSwgZm91bmRyeSwgZnJvbVV1aWQsIGZyb21VdWlkU3luYywgZ2FtZSwgZ2V0UHJvcGVydHksIEhvb2tzLCBtZXJnZU9iamVjdCwgUm9sbCwgVGV4dEVkaXRvciwgVG9rZW4sIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXRNZXNzYWdlIH0gZnJvbSAnLi4vYXBwcy9jb2M3LWNoYXQtbWVzc2FnZS5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbkNoZWNrIH0gZnJvbSAnLi4vY2hhdC9jb25jaGVjay5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuLi9hcHBzL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxTZWxlY3REaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXNlbGVjdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBQb2ludFNlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvcG9pbnQtc2VsZWN0aW9uLWRpYWxvZy5qcydcbmltcG9ydCB7IENoYXJhY1NlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvY2hhci1zZWxlY3Rpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ2hhcmFjUm9sbERpYWxvZyB9IGZyb20gJy4uL2FwcHMvY2hhci1yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IFNraWxsU3BlY1NlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtc3BlY2lhbGl6YXRpb24tc2VsZWN0LWRpYWxvZy5qcydcbmltcG9ydCB7IFNraWxsVmFsdWVEaWFsb2cgfSBmcm9tICcuLi9hcHBzL3NraWxsLXZhbHVlLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4uL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uL2RpY2UuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzZSBBY3RvciBjbGFzcyB0byBpbXBsZW1lbnQgYWRkaXRpb25hbCBsb2dpYyBzcGVjaWFsaXplZCBmb3IgQ29DIDd0aC5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQ0FjdG9yIGV4dGVuZHMgQWN0b3Ige1xuICAvKiogQ3JlYXRlIGRlcml2ZWQgZG9jdW1lbnQgY2xhc3NlcyBmb3Igc3BlY2lmaWMgSXRlbSB0eXBlcyAqL1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIC8qKiBAc2VlIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXMgaW4gbW9kdWxlL3NjcmlwdHMvY29uZmlndXJlLWRvY3VtZW50cyAqL1xuICAgIGlmIChkYXRhLnR5cGUgaW4gQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3NlcyAmJiAhY29udGV4dD8uZXh0ZW5kZWQpIHtcbiAgICAgIC8qKlxuICAgICAgICogV2hlbiB0aGUgY29uc3RydWN0b3IgZm9yIHRoZSBuZXcgY2xhc3Mgd2lsbCBjYWxsIGl0J3Mgc3VwZXIoKSxcbiAgICAgICAqIHRoZSBleHRlbmRlZCBmbGFnIHdpbGwgYmUgdHJ1ZSwgdGh1cyBieXBhc3NpbmcgdGhpcyB3aG9sZSBwcm9jZXNzXG4gICAgICAgKiBhbmQgcmVzdW1lIGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAqL1xuICAgICAgcmV0dXJuIG5ldyBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzc2VzW2RhdGEudHlwZV0oZGF0YSwge1xuICAgICAgICAuLi57IGV4dGVuZGVkOiB0cnVlIH0sXG4gICAgICAgIC4uLmNvbnRleHRcbiAgICAgIH0pXG4gICAgfVxuICAgIC8vIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gICBpZiAoZGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgLy8gICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2tpbGxzLnN2ZydcbiAgICAvLyAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnc3RhdHVzJykge1xuICAgIC8vICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvYXVyYS5zdmcnXG4gICAgLy8gICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAvLyAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL3N3b3JkLnN2ZydcbiAgICAvLyAgIH1cbiAgICAvLyB9XG4gICAgLyoqIERlZmF1bHQgYmVoYXZpb3IsIGp1c3QgY2FsbCBzdXBlcigpIGFuZCBkbyBhbGwgdGhlIGRlZmF1bHQgSXRlbSBpbml0cyAqL1xuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICBhc3luYyBpbml0aWFsaXplICgpIHtcbiAgICBzdXBlci5pbml0aWFsaXplKClcbiAgICBhd2FpdCB0aGlzLmNyZWF0dXJlSW5pdCgpIC8vIFRPRE8gOiBtb3ZlIHRoaXMgaW4gQ29DQWN0b3IuY3JlYXRlKGRhdGEsIG9wdGlvbnMpXG4gIH1cblxuICAvLyAqKioqKioqKioqKioqKioqKioqKioqIFRlc3RpbmdcbiAgLy8gYXN5bmMgdXBkYXRlKGRhdGEsIG9wdGlvbnM9e30pIHtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oJ3JldHVybiBzdXBlci51cGRhdGUoZGF0YSwgb3B0aW9ucyk7Jyk7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGBpbnQgOiAke3RoaXMuY2hhcmFjdGVyaXN0aWNzLmludH1gKTtcbiAgLy8gICB0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnQgPSAxNTtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oYG1vZGlmaWVkIGludCA6ICR7dGhpcy5jaGFyYWN0ZXJpc3RpY3MuaW50fWApO1xuICAvLyAgIHJldHVybiBzdXBlci51cGRhdGUoZGF0YSwgb3B0aW9ucyk7XG4gIC8vIH1cblxuICAvLyBnZXQgY2hhcmFjdGVyaXN0aWNzKCl7XG4gIC8vICAgY29uc3QgYWN0b3IgPSB0aGlzO1xuICAvLyAgICAgcmV0dXJuIHtcbiAgLy8gICAgICAgZ2V0IGludCgpe1xuICAvLyAgICAgICAgIHJldHVybiBhY3Rvci5nZXRQcm9wKCdfaW50Jyk7XG4gIC8vICAgICAgIH0sXG5cbiAgLy8gICAgICAgc2V0IGludCh4KXtcbiAgLy8gICAgICAgICBhY3Rvci5zZXRQcm9wKCdfaW50JywgeCk7XG4gIC8vICAgICAgIH1cbiAgLy8gICAgfTtcbiAgLy8gfVxuXG4gIC8vIHNldFByb3Aoa2V5LCB4KXtcbiAgLy8gICB0aGlzW2tleV0gPSB4O1xuICAvLyB9XG5cbiAgLy8gZ2V0UHJvcChrZXkpe1xuICAvLyAgIHJldHVybiB0aGlzW2tleV18fDA7XG4gIC8vIH1cbiAgLy9cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIFByZXBhcmUgZGF0YSByZWxhdGVkIHRvIHRoaXMgRG9jdW1lbnQgaXRzZWxmLCBiZWZvcmUgYW55IGVtYmVkZGVkIERvY3VtZW50cyBvciBkZXJpdmVkIGRhdGEgaXMgY29tcHV0ZWQuXG4gICAqIEBtZW1iZXJvZiBDbGllbnREb2N1bWVudE1peGluI1xuICAgKi9cbiAgcHJlcGFyZUJhc2VEYXRhICgpIHtcbiAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXModGhpcy50eXBlKSkge1xuICAgICAgdGhpcy5zeXN0ZW0uc2tpbGxzID0ge31cbiAgICAgIGZvciAoY29uc3QgaSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICAgIGlmIChpLnR5cGUgIT09ICdza2lsbCcpIGNvbnRpbnVlXG4gICAgICAgIHRoaXMuc3lzdGVtLnNraWxsc1tgJHtpLml0ZW1JZGVudGlmaWVyfWBdID0geyBmb3VuZHJ5SUQ6IGkuaWQsIGNvY2lkOiBpLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkLCB2YWx1ZTogaS5yYXdWYWx1ZSwgYm9udXNEaWNlOiBpLnN5c3RlbS5ib251c0RpY2UgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgKiBSZW1vdmFsIG9mIDEvNSBzYW5pdHlcbiAgICAgKiB0aGlzIGlzIHRvIHJlbW92ZSB0aGVcbiAgICAgKiBhY3Rvci5kYXRhLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5IHRvIGJlIHJlbW92ZWQgZnJvbSB0ZW1wbGF0ZVxuICAgICAqIGFuZCBpbmRlZmluaXRlSW5zYW5pdHlMZXZlbCB0byBiZSByZW1vdmVkIGZyb20gdGVtcGxhdGVcbiAgICAgKi9cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5KSB7XG4gICAgICAgICAgY29uc3QgcyA9IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5LnNwbGl0KCcvJylcbiAgICAgICAgICBpZiAoc1sxXSAmJiAhaXNOYU4oTnVtYmVyKHNbMV0pKSkge1xuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCA9IE51bWJlcihzWzFdKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID0gMFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIHJldHVybiBjb21wdXRlZCB2YWx1ZXMgb3IgZml4ZWQgdmFsdWVzIGlmIG5vdCBhdXRvLlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUgPSB0aGlzLnJhd01vdlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSA9IHRoaXMucmF3RGJcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUgPSB0aGlzLnJhd0J1aWxkXG5cbiAgICAgIC8vIEZvciB2ZWhpY2xlIG9ubHkgOlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50ID0gdGhpcy5ocFxuXG4gICAgICAvLyBpZiAoXG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID4gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4IHx8XG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heCA9PSBudWxsXG4gICAgICAvLyApIHtcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXhcbiAgICAgIC8vIH1cbiAgICAgIC8vIGlmIChcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPiBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggfHxcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4ID09IG51bGxcbiAgICAgIC8vICkge1xuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heFxuICAgICAgLy8gfVxuXG4gICAgLy8gaWYgKFxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPT0gbnVsbCAmJlxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4ICE9IG51bGxcbiAgICAvLyApIHtcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4XG4gICAgLy8gfVxuICAgIC8vIGlmIChcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID09IG51bGwgJiZcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heCAhPSBudWxsXG4gICAgLy8gKSB7XG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heFxuICAgIC8vIH1cbiAgICB9XG4gICAgc3VwZXIucHJlcGFyZUJhc2VEYXRhKClcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogUHJlcGFyZSBhbGwgZW1iZWRkZWQgRG9jdW1lbnQgaW5zdGFuY2VzIHdoaWNoIGV4aXN0IHdpdGhpbiB0aGlzIHByaW1hcnkgRG9jdW1lbnQuXG4gICAqIEBtZW1iZXJvZiBDbGllbnREb2N1bWVudE1peGluI1xuICAgKiBhY3RpdmUgZWZmZWN0cyBhcmUgYXBwbGllZFxuICAgKi9cbiAgcHJlcGFyZUVtYmVkZGVkRG9jdW1lbnRzICgpIHtcbiAgICBzdXBlci5wcmVwYXJlRW1iZWRkZWREb2N1bWVudHMoKVxuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKiBBcHBseSB0cmFuc2Zvcm1hdGlvbnMgb3IgZGVyaXZhdGlvbnMgdG8gdGhlIHZhbHVlcyBvZiB0aGUgc291cmNlIGRhdGEgb2JqZWN0LlxuICAgKiBDb21wdXRlIGRhdGEgZmllbGRzIHdob3NlIHZhbHVlcyBhcmUgbm90IHN0b3JlZCB0byB0aGUgZGF0YWJhc2UuXG4gICAqIEBtZW1iZXJvZiBDbGllbnREb2N1bWVudE1peGluI1xuICAgKi9cbiAgcHJlcGFyZURlcml2ZWREYXRhICgpIHtcbiAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXModGhpcy50eXBlKSkge1xuICAgICAgc3VwZXIucHJlcGFyZURlcml2ZWREYXRhKClcbiAgICAgIC8vIFNldCBocE1heCwgbXBNYXgsIHNhbk1heCwgbW92LCBkYiwgYnVpbGQuIFRoaXMgaXMgdG8gYWxsb3cgY2FsY3VsYXRpb24gb2YgZGVyaXZlZCB2YWx1ZSB3aXRoIG1vZGlmZWQgY2hhcmFjdGVyaXN0aWNzLlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUgPSB0aGlzLnJhd01vdlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSA9IHRoaXMucmF3RGJcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUgPSB0aGlzLnJhd0J1aWxkXG5cbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4ID0gdGhpcy5yYXdIcE1heFxuICAgICAgaWYgKHRoaXMuaHAgPT09IG51bGwpIHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUgPSB0aGlzLnJhd0hwTWF4XG5cbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4ID0gdGhpcy5yYXdNcE1heFxuICAgICAgaWYgKHRoaXMubXAgPT09IG51bGwpIHRoaXMuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPSB0aGlzLnJhd01wTWF4XG5cbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heCA9IHRoaXMucmF3U2FuTWF4XG4gICAgICBpZiAodGhpcy5zYW4gPT09IG51bGwpIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlID0gdGhpcy5yYXdTYW5NYXhcblxuICAgICAgLy8gQXBwbHkgZWZmZWN0cyB0byBhdXRvbWF0aWNhbHkgY2FsY3VsYXRlZCB2YWx1ZXMuXG4gICAgICBjb25zdCBmaWx0ZXJNYXRyaXggPSBbXVxuXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMuaHAubWF4JylcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5tcC5tYXgnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5zYW4ubWF4JylcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMubW92LnZhbHVlJylcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5kYi52YWx1ZScpXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvKSBmaWx0ZXJNYXRyaXgucHVzaCgnc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUnKVxuXG4gICAgICBjb25zdCBjaGFuZ2VzID0gdGhpcy5lZmZlY3RzLnJlZHVjZSgoY2hhbmdlcywgZSkgPT4ge1xuICAgICAgICBpZiAoZS5kaXNhYmxlZCB8fCBlLmlzU3VwcHJlc3NlZCkgcmV0dXJuIGNoYW5nZXNcbiAgICAgICAgcmV0dXJuIGNoYW5nZXMuY29uY2F0KFxuICAgICAgICAgIGUuY2hhbmdlcy5tYXAoYyA9PiB7XG4gICAgICAgICAgICBjID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYylcbiAgICAgICAgICAgIGMuZWZmZWN0ID0gZVxuICAgICAgICAgICAgYy5wcmlvcml0eSA9IGMucHJpb3JpdHkgPz8gYy5tb2RlICogMTBcbiAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfSwgW10pXG4gICAgICBjaGFuZ2VzLnNvcnQoKGEsIGIpID0+IGEucHJpb3JpdHkgLSBiLnByaW9yaXR5KVxuXG4gICAgICBjb25zdCBzZWxlY3RDaGFuZ2VzID0gY2hhbmdlcy5maWx0ZXIoZSA9PiBmaWx0ZXJNYXRyaXguaW5jbHVkZXMoZS5rZXkpKVxuXG4gICAgICAvLyBBcHBseSBhbGwgY2hhbmdlc1xuICAgICAgZm9yIChjb25zdCBjaGFuZ2Ugb2Ygc2VsZWN0Q2hhbmdlcykge1xuICAgICAgICBjaGFuZ2UuZWZmZWN0LmFwcGx5KHRoaXMsIGNoYW5nZSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaHBNYXggJiYgdGhpcy5ocE1heCA8IHRoaXMuaHApIHsgdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSA9IHRoaXMuaHBNYXggfVxuICAgICAgaWYgKHRoaXMubXBNYXggJiYgdGhpcy5tcE1heCA8IHRoaXMubXApIHsgdGhpcy5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA9IHRoaXMubXBNYXggfVxuICAgICAgaWYgKHRoaXMuc2FuTWF4ICYmIHRoaXMuc2FuTWF4IDwgdGhpcy5zYW4pIHsgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgPSB0aGlzLnNhbk1heCB9XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoZGF0YS50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgZGF0YS5wcm90b3R5cGVUb2tlbiA9IG1lcmdlT2JqZWN0KGRhdGEucHJvdG90eXBlVG9rZW4gfHwge30sIHtcbiAgICAgICAgYWN0b3JMaW5rOiB0cnVlLFxuICAgICAgICBkaXNwb3NpdGlvbjogMSxcbiAgICAgICAgc2lnaHQ6IHtcbiAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICducGMnKSB7XG4gICAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJyB8fCBkYXRhLmltZyA9PT0gJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvY3VsdGlzdC5zdmcnXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdjcmVhdHVyZScpIHtcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnIHx8IGRhdGEuaW1nID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9mbG9hdGluZy10ZW50YWNsZXMuc3ZnJ1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnY29udGFpbmVyJykge1xuICAgICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcgfHwgZGF0YS5pbWcgPT09ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJykge1xuICAgICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvY2hlc3Quc3ZnJ1xuICAgICAgfVxuICAgICAgZGF0YS5wcm90b3R5cGVUb2tlbiA9IG1lcmdlT2JqZWN0KGRhdGEucHJvdG90eXBlVG9rZW4gfHwge30sIHtcbiAgICAgICAgYWN0b3JMaW5rOiB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpXG4gIH1cblxuICAvKipcbiAgICogRWFybHkgdmVyc2lvbiBvbiB0ZW1wbGF0ZXMgZGlkIG5vdCBpbmNsdWRlIHBvc3NpYmlsaXR5IG9mIGF1dG8gY2FsY1xuICAgKiBKdXN0IGNoZWNrIGlmIGF1dG8gaXMgdW5kZWZpbmVkLCBpbiB3aGljaCBjYXNlIGl0IHdpbGwgYmUgc2V0IHRvIHRydWVcbiAgICovXG4gIGNoZWNrVW5kZWZpbmVkQXV0byAoKSB7XG4gICAgY29uc3QgcmV0dXJuRGF0YSA9IHtcbiAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgaHA6IHt9LFxuICAgICAgICBtcDoge30sXG4gICAgICAgIHNhbjoge30sXG4gICAgICAgIG1vdjoge30sXG4gICAgICAgIGRiOiB7fSxcbiAgICAgICAgYnVpbGQ6IHt9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5ocD8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuaHAuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1wPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5tcC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uc2FuPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5zYW4uYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1vdj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMubW92LmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5kYj8uYXV0byA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm5EYXRhLmF0dHJpYnMuZGIuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LmJ1aWxkPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5idWlsZC5hdXRvID0gdHJ1ZVxuICAgIH1cblxuICAgIHJldHVybiByZXR1cm5EYXRhXG4gIH1cblxuICBnZXQgY2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7XG4gICAgICBzdHI6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5TVFInLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5TdHJlbmd0aCcsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBjb246IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5DT04nLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgc2l6OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuU0laJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBkZXg6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5ERVgnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5EZXh0ZXJpdHknLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgYXBwOiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuQVBQJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBpbnQ6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5JTlQnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgcG93OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuUE9XJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuUG93ZXInLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9LFxuICAgICAgZWR1OiB7XG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBzaG9ydE5hbWU6ICdDSEFSQUMuRURVJyxcbiAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzXG4gICAgICApKSB7XG4gICAgICAgIGNoYXJhY3RlcmlzdGljc1trZXldID0ge1xuICAgICAgICAgIGtleSxcbiAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbCksXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLnZhbHVlLFxuICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IodmFsdWUudmFsdWUgLyAyKSB8fCBudWxsLFxuICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IodmFsdWUudmFsdWUgLyA1KSB8fCBudWxsLFxuICAgICAgICAgIGZvcm11bGE6IHZhbHVlLmZvcm11bGFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWNzXG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIHVwb24gdG9rZW4gY3JlYXRpb24gZnJvbSBwcmVDcmVhdGVBY3RvciBob29rXG4gICAqIEBwYXJhbSB7Kn0gY3JlYXRlRGF0YVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGluaXRUb2tlbiAoY3JlYXRlRGF0YSkge1xuICAgIC8vIGNhbGxlZCB1cG9uIHRva2VuIGNyZWF0aW9uLmFjdGl2ZVxuICAgIGlmIChjcmVhdGVEYXRhKSB7XG4gICAgICAvL1xuICAgIH1cbiAgfVxuXG4gIGdldCBoYXNUZW1wb0luc2FuZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lKVxuICB9XG5cbiAgZ2V0IGdldFRlbXBvSW5zYW5lRHVyYXRpb25UZXh0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25WYWx1ZShDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSwgJ2R1cmF0aW9uVGV4dCcpXG4gIH1cblxuICBnZXQgaGFzSW5kZWZJbnNhbmUgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgfVxuXG4gIGdldCBwb3J0cmFpdCAoKSB7XG4gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSByZXR1cm4gdGhpcy5pbWdcbiAgICByZXR1cm4gdGhpcy50b2tlbj8udGV4dHVyZT8uc3JjIHx8IHRoaXMucHJvdG90eXBlVG9rZW4/LnRleHR1cmU/LnNyYyB8fCB0aGlzLmltZ1xuICB9XG5cbiAgYXN5bmMgZW50ZXJCb3V0T2ZNYWRuZXNzIChyZWFsVGltZSA9IHRydWUsIGR1cmF0aW9uID0gMSkge1xuICAgIC8vIGNvbnN0IGR1cmF0aW9uID0ge3JvdW5kczogMSxcbiAgICAvLyAgIHNlY29uZHM6IDE3LFxuICAgIC8vICAgc3RhcnRSb3VuZDogMyxcbiAgICAvLyAgIHN0YXJ0VGltZTogNTgsXG4gICAgLy8gICBzdGFydFR1cm46IDQsXG4gICAgLy8gICB0dXJuczogMn07XG4gICAgLy8gYXdhaXQgdGhpcy5ib3V0T2ZNYWRuZXNzPy5zZXRGbGFnKCAnQ29DNycsICdtYWRuZXNzJywgdHJ1ZSk7XG5cbiAgICBsZXQgcmVzdWx0ID0gbnVsbFxuICAgIGNvbnN0IGJvdXRPZk1hZG5lc3NUYWJsZUlkID0gcmVhbFRpbWVcbiAgICAgID8gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJylcbiAgICBpZiAoYm91dE9mTWFkbmVzc1RhYmxlSWQgIT09ICdub25lJykge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICBwaG9iaWE6IGZhbHNlLFxuICAgICAgICBtYW5pYTogZmFsc2UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBudWxsXG4gICAgICB9XG4gICAgICBjb25zdCBib3V0T2ZNYWRuZXNzVGFibGUgPSBnYW1lLnRhYmxlcy5nZXQoYm91dE9mTWFkbmVzc1RhYmxlSWQpXG4gICAgICByZXN1bHQudGFibGVSb2xsID0gYXdhaXQgYm91dE9mTWFkbmVzc1RhYmxlLnJvbGwoKVxuICAgICAgaWYgKHR5cGVvZiByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBDT05TVC5UQUJMRV9SRVNVTFRfVFlQRVMuRE9DVU1FTlQgPT09XG4gICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS5kb2N1bWVudElkKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbT8udHlwZT8ucGhvYmlhKSByZXN1bHQucGhvYmlhID0gdHJ1ZVxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtPy50eXBlPy5tYW5pYSkgcmVzdWx0Lm1hbmlhID0gdHJ1ZVxuICAgICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gYCR7aXRlbS5uYW1lfToke1RleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgICAgICAgIHsgYXN5bmM6IGZhbHNlIH1cbiAgICAgICAgICAgICl9YFxuICAgICAgICAgICAgcmVzdWx0Lm5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1EYXRhID0gaXRlbS50b09iamVjdCgpXG4gICAgICAgICAgICBkZWxldGUgaXRlbURhdGEuX2lkXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2l0ZW1EYXRhXSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VCb3V0T2ZNYWRuZXNzSXRlbU5vdEZvdW5kJylcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIENPTlNULlRBQkxFX1JFU1VMVF9UWVBFUy5URVhUID09PVxuICAgICAgICAgIHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS50eXBlXG4gICAgICAgICkge1xuICAgICAgICAgIHJlc3VsdC5kZXNjcmlwdGlvbiA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgICAgICAgIHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXS50ZXh0LFxuICAgICAgICAgICAgeyBhc3luYzogZmFsc2UgfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZUJvdXRPZk1hZG5lc3NUYWJsZU5vdEZvdW5kJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIGl0J3Mgbm90IGEgcmVhbCB0aW1lIG5vIG5lZWQgdG8gYWN0aXZhdGUgdGhlIGJvdXRcbiAgICBpZiAoIXJlYWxUaW1lKSByZXR1cm4gcmVzdWx0XG5cbiAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSwge1xuICAgICAgcmVhbFRpbWUsXG4gICAgICBkdXJhdGlvblxuICAgIH0pXG5cbiAgICAvLyBjb25zdCBlZmZlY3QgPSB0aGlzLmVmZmVjdHMuZ2V0KCBlZmZlY3REYXRhLl9pZCk7XG4gICAgLy8gZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKTtcblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiBuZXcgYWN0b3IgY3JlYXRpb24uXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKiBAcGFyYW0geyp9IG9wdGlvbnNcbiAgICovXG4gIC8vIHN0YXRpYyBhc3luYyBjcmVhdGUoZGF0YSwgb3B0aW9ucykge1xuICAvLyAgLy8gSWYgdGhlIGNyZWF0ZWQgYWN0b3IgaGFzIGl0ZW1zIChvbmx5IGFwcGxpY2FibGUgdG8gZHVwbGljYXRlZCBhY3RvcnMpIGJ5cGFzcyB0aGUgbmV3IGFjdG9yIGNyZWF0aW9uIGxvZ2ljXG4gIC8vICBpZiAoZGF0YS5pdGVtcykge1xuICAvLyAgICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpO1xuICAvLyAgfVxuICAvLyAgcmV0dXJuIHN1cGVyLmNyZWF0ZShkYXRhLCBvcHRpb25zKTtcbiAgLy8gfVxuXG4gIHN0YXRpYyBlbXB0eVNraWxsIChcbiAgICBza2lsbE5hbWUsXG4gICAgdmFsdWUsXG4gICAge1xuICAgICAgcmFyaXR5ID0gZmFsc2UsXG4gICAgICBwdXNoID0gdHJ1ZSxcbiAgICAgIGNvbWJhdCA9IGZhbHNlLFxuICAgICAgaW1nID0gZmFsc2UsXG4gICAgICBzcGVjaWFsaXphdGlvbiA9IGZhbHNlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBza2lsbE5hbWUsXG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHZhbHVlLFxuICAgICAgICBza2lsbE5hbWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uOiAnJyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHNwZWNpYWw6IGZhbHNlLFxuICAgICAgICAgIHJhcml0eSxcbiAgICAgICAgICBwdXNoLFxuICAgICAgICAgIGNvbWJhdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpbWcgIT09IGZhbHNlKSB7XG4gICAgICBkYXRhLmltZyA9IGltZ1xuICAgIH1cbiAgICBpZiAoc3BlY2lhbGl6YXRpb24gIT09IGZhbHNlKSB7XG4gICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoc2tpbGxOYW1lLCBzcGVjaWFsaXphdGlvbilcbiAgICAgIGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgIGRhdGEuc3lzdGVtLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgZGF0YS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIGxpc3Qgb2Ygc2tpbGxzIGJ5IHJlbW92aW5nIHNwZWNpYWxpemF0aW9uIGZyb20gbmFtZVxuICAgKi9cbiAgLy8gYXN5bmMgY2xlYW5Ta2lsbHMgKCkge1xuICAvLyAgIERpYWxvZy5jb25maXJtKHtcbiAgLy8gICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2xlYW5Ta2lsbExpc3QnKX1gLFxuICAvLyAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNsZWFuU2tpbGxMaXN0SGludCcpfTwvcD5gLFxuICAvLyAgICAgeWVzOiAoKSA9PiBjbGVhbih0aGlzKVxuICAvLyAgIH0pXG4gIC8vICAgYXN5bmMgZnVuY3Rpb24gY2xlYW4gKGFjdG9yKSB7XG4gIC8vICAgICBjb25zdCB1cGRhdGUgPSBbXVxuICAvLyAgICAgYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiB7XG4gIC8vICAgICAgIGlmIChzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgLy8gICAgICAgICBjb25zdCBjbGVhbiA9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhzKT8udHJpbSgpXG4gIC8vICAgICAgICAgaWYgKGNsZWFuLnRvTG93ZXJDYXNlKCkgIT0gcy5uYW1lLnRvTG93ZXJDYXNlKCkgfHwgY2xlYW4udG9Mb3dlckNhc2UoKSAhPSBzLmRhdGEubmFtZS50b0xvd2VyQ2FzZSgpKSB7XG4gIC8vICAgICAgICAgICB1cGRhdGUucHVzaCh7XG4gIC8vICAgICAgICAgICAgIF9pZDogcy5pZCxcbiAgLy8gICAgICAgICAgICAgbmFtZTogY2xlYW5cbiAgLy8gICAgICAgICAgIH0pXG4gIC8vICAgICAgICAgfVxuICAvLyAgICAgICB9XG4gIC8vICAgICB9KVxuICAvLyAgICAgaWYgKHVwZGF0ZS5sZW5ndGggIT0gMCl7XG4gIC8vICAgICAgIGF3YWl0IGFjdG9yLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgdXBkYXRlKVxuICAvLyAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBTa2lsbHMgOiAke0FycmF5LmZyb20oIHVwZGF0ZSwgZSA9PiBlLm5hbWUpLmpvaW4oJywgJyl9IHVwZGF0ZWQuYClcbiAgLy8gICAgIH0gZWxzZSB7XG4gIC8vICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggJ1NraWxsIGxpc3Qgd2FzIGNsZWFuIGFscmVhZHkgIScpXG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBjcmVhdGVTa2lsbCAoc2tpbGxOYW1lLCB2YWx1ZSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0gQ29DQWN0b3IuZW1wdHlTa2lsbChza2lsbE5hbWUsIHZhbHVlKVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlV2VhcG9uU2tpbGwgKG5hbWUsIGZpcmVhcm1zID0gZmFsc2UsIGJhc2UgPSBudWxsKSB7XG4gICAgLy8gVE9ETyA6IEFzayBmb3IgYmFzZSB2YWx1ZSBpZiBudWxsXG5cbiAgICBjb25zdCBza2lsbERhdGEgPSBhd2FpdCBTa2lsbFNwZWNTZWxlY3REaWFsb2cuY3JlYXRlKFxuICAgICAgW10sXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgIGZpcmVhcm1zXG4gICAgICAgICAgPyAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgIDogJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICApLFxuICAgICAgMCxcbiAgICAgIG5hbWVcbiAgICApXG4gICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoc2tpbGxEYXRhLmdldCgnYmFzZS12YWx1ZScpKVxuICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgIG5hbWUsXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgIGZpcmVhcm1zXG4gICAgICAgICAgPyAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgIDogJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICApXG4gICAgKVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBwYXJ0cy5uYW1lLFxuICAgICAgdHlwZTogJ3NraWxsJyxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBiYXNlOiBpc05hTih2YWx1ZSkgPyAwIDogdmFsdWUsXG4gICAgICAgIGFkanVzdG1lbnRzOiB7XG4gICAgICAgICAgcGVyc29uYWw6IG51bGwsXG4gICAgICAgICAgb2NjdXBhdGlvbjogbnVsbCxcbiAgICAgICAgICBhcmNoZXR5cGU6IG51bGwsXG4gICAgICAgICAgZXhwZXJpZW5jZTogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBza2lsbE5hbWU6IHBhcnRzLnNraWxsTmFtZSxcbiAgICAgICAgc3BlY2lhbGl6YXRpb246IHBhcnRzLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc3BlY2lhbDogdHJ1ZSxcbiAgICAgICAgICBmaWdodGluZzogIWZpcmVhcm1zLFxuICAgICAgICAgIGZpcmVhcm06IGZpcmVhcm1zLFxuICAgICAgICAgIGNvbWJhdDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiAhYmFzZVxuICAgIH0pXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShuYW1lKVxuICAgIHJldHVybiBza2lsbFswXVxuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgYSBjcmVhdHVyZSB3aXRoIG1pbmltdW1zIHNraWxsc1xuICAgKi9cbiAgYXN5bmMgY3JlYXR1cmVJbml0ICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnY3JlYXR1cmUnKSByZXR1cm5cbiAgICBpZiAodGhpcy5nZXRBY3RvckZsYWcoJ2luaXRpYWxpemVkJykpIHJldHVybiAvLyBDaGFuZ2UgdG8gcmV0dXJuIHNraWxsID9cblxuICAgIC8vIENoZWNrIGlmIGZpZ2h0aW5nIHNraWxscyBleGlzdHMsIGlmIG5vdCBjcmVhdGUgaXQgYW5kIHRoZSBhc3NvY2lhdGVkIGF0dGFjay5cbiAgICBjb25zdCBza2lsbHMgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmNyZWF0dXJlRmlnaHRpbmdTa2lsbClcbiAgICApXG4gICAgaWYgKHNraWxscy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIENyZWF0aW5nIG5hdHVyYWwgYXR0YWNrIHNraWxsXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsKSxcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSlcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICAgICAgbmFtZTogcGFydHMubmFtZSxcbiAgICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgIGJhc2U6IDAsXG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNraWxsTmFtZTogcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246IHBhcnRzLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgICAgICAgIGZpZ2h0aW5nOiB0cnVlLFxuICAgICAgICAgICAgICBzcGVjaWFsOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmxhZ3M6IHt9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNraWxsID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnN0IGF0dGFjayA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoXG4gICAgICAgICAgJ0l0ZW0nLFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbmFtZTogJ0lubmF0ZSBhdHRhY2snLFxuICAgICAgICAgICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgICAgICAgICAgc3lzdGVtOiB7XG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIkNyZWF0dXJlJ3MgbmF0dXJhbCBhdHRhY2tcIixcbiAgICAgICAgICAgICAgICAgIGNoYXQ6IFwiQ3JlYXR1cmUncyBuYXR1cmFsIGF0dGFja1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB3cG5UeXBlOiAnaW5uYXRlJyxcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICBhZGRiOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgc2xudDogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgeyByZW5kZXJTaGVldDogZmFsc2UgfVxuICAgICAgICApXG4gICAgICAgIGlmIChza2lsbC5sZW5ndGggPiAwICYmIGF0dGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgY3JlYXRlZEF0dGFjayA9IHRoaXMuaXRlbXMuZ2V0KGF0dGFja1swXS5pZClcbiAgICAgICAgICBhd2FpdCBjcmVhdGVkQXR0YWNrLnVwZGF0ZSh7XG4gICAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4uaWQnOiBza2lsbFswXS5pZCxcbiAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5uYW1lJzogc2tpbGxbMF0ubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdDcmVhdHVyZSBpbml0OiAnICsgZXJyLm1lc3NhZ2UpXG4gICAgICB9XG4gICAgICAvLyBjb25zb2xlLmxvZyggJ1NraWxsIGNyZWF0ZWQnKTtcbiAgICAgIGF3YWl0IHRoaXMuc2V0QWN0b3JGbGFnKCdpbml0aWFsaXplZCcpXG4gICAgICAvLyBDcmVhdGluZyBjb3JyZXNwb25kaW5nIHdlYXBvbi5cbiAgICB9XG4gIH1cblxuICBhc3luYyBjcmVhdGVJdGVtIChpdGVtTmFtZSwgcXVhbnRpdHkgPSAxLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBpdGVtTmFtZSxcbiAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBxdWFudGl0eVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5Qm9vayAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVCb29rKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSwgc2hvd1NoZWV0KVxuICAgIH1cbiAgICBsZXQgaW5kZXggPSAwXG4gICAgbGV0IGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoaXRlbU5hbWUpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUJvb2soaXRlbU5hbWUsIHNob3dTaGVldClcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUJvb2sgKGl0ZW1OYW1lLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiBpdGVtTmFtZSxcbiAgICAgIHR5cGU6ICdib29rJyxcbiAgICAgIHN5c3RlbToge31cbiAgICB9XG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eVNwZWxsIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVTcGVsbChnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTcGVsbE5hbWUpLCBzaG93U2hlZXQpXG4gICAgfVxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTcGVsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoaXRlbU5hbWUpKSB7XG4gICAgICBpbmRleCsrXG4gICAgICBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVTcGVsbChpdGVtTmFtZSwgc2hvd1NoZWV0KVxuICB9XG5cbiAgc3RhdGljIGVtcHR5U3BlbGwgKGl0ZW1OYW1lKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IGl0ZW1OYW1lLFxuICAgICAgdHlwZTogJ3NwZWxsJyxcbiAgICAgIHN5c3RlbToge31cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZVNwZWxsIChpdGVtTmFtZSwgc2hvd1NoZWV0ID0gZmFsc2UpIHtcbiAgICBjb25zdCBkYXRhID0gQ29DQWN0b3IuZW1wdHlTcGVsbChpdGVtTmFtZSlcbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5U2tpbGwgKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVNraWxsKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpLFxuICAgICAgICAodGhpcy50eXBlICE9PSAnY2hhcmFjdGVyJyA/IDEgOiBudWxsKSxcbiAgICAgICAgc2hvd1NoZWV0XG4gICAgICApXG4gICAgfVxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgc2tpbGxOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIHNraWxsTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVNraWxsKHNraWxsTmFtZSwgbnVsbCwgc2hvd1NoZWV0KVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlJdGVtIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUl0ZW0oZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpLCAxLCBzaG93U2hlZXQpXG4gICAgfVxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlSXRlbShpdGVtTmFtZSwgMSwgc2hvd1NoZWV0KVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlXZWFwb24gKGV2ZW50ID0gbnVsbCwgcHJvcGVydGllcyA9IHt9KSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgbGV0IHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKVxuICAgIGlmICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSkpIHtcbiAgICAgIGxldCBpbmRleCA9IDBcbiAgICAgIHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSArICcgJyArIGluZGV4XG4gICAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUod2VhcG9uTmFtZSkpIHtcbiAgICAgICAgaW5kZXgrK1xuICAgICAgICB3ZWFwb25OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3V2VhcG9uTmFtZSkgKyAnICcgKyBpbmRleFxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBuYW1lOiB3ZWFwb25OYW1lLFxuICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICBzeXN0ZW06IHtcbiAgICAgICAgcHJvcGVydGllczoge31cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9XG4gICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpID8/IGZhbHNlXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gIH1cblxuICBhc3luYyBjcmVhdGVCaW9TZWN0aW9uICh0aXRsZSA9IG51bGwpIHtcbiAgICBjb25zdCBiaW8gPSB0aGlzLnN5c3RlbS5iaW9ncmFwaHlcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICAgIDogW11cbiAgICBiaW8ucHVzaCh7XG4gICAgICB0aXRsZSxcbiAgICAgIHZhbHVlOiBudWxsXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0sIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gIH1cblxuICBhc3luYyB1cGRhdGVCaW9WYWx1ZSAoaW5kZXgsIGNvbnRlbnQpIHtcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGJpb1tpbmRleF0udmFsdWUgPSBjb250ZW50XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9LCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUJpb1RpdGxlIChpbmRleCwgdGl0bGUpIHtcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGJpb1tpbmRleF0udGl0bGUgPSB0aXRsZVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIGRlbGV0ZUJpb1NlY3Rpb24gKGluZGV4KSB7XG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICBiaW8uc3BsaWNlKGluZGV4LCAxKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIG1vdmVCaW9TZWN0aW9uVXAgKGluZGV4KSB7XG4gICAgaWYgKGluZGV4ID09PSAwKSByZXR1cm5cbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGlmIChpbmRleCA+PSBiaW8ubGVuZ3RoKSByZXR1cm5cbiAgICBjb25zdCBlbGVtID0gYmlvLnNwbGljZShpbmRleCwgMSlbMF1cbiAgICBiaW8uc3BsaWNlKGluZGV4IC0gMSwgMCwgZWxlbSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0pXG4gIH1cblxuICBhc3luYyBtb3ZlQmlvU2VjdGlvbkRvd24gKGluZGV4KSB7XG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuc3lzdGVtLmJpb2dyYXBoeSlcbiAgICBpZiAoaW5kZXggPj0gYmlvLmxlbmd0aCAtIDEpIHJldHVyblxuICAgIGNvbnN0IGVsZW0gPSBiaW8uc3BsaWNlKGluZGV4LCAxKVswXVxuICAgIGJpby5zcGxpY2UoaW5kZXggKyAxLCAwLCBlbGVtKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVRleHRBcmVhICh0ZXh0QXJlYSkge1xuICAgIGNvbnN0IG5hbWUgPSAnc3lzdGVtLicgKyB0ZXh0QXJlYS5kYXRhc2V0LmFyZWFOYW1lXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IHRleHRBcmVhLnZhbHVlIH0pXG4gIH1cblxuICAvLyBhc3luYyBfdXBkYXRlRW1iZWRkZWREb2N1bWVudHMgKGRvY3VtZW50Q2xhc3MsIHBhcmVudCwgeyB1cGRhdGVzLCBvcHRpb25zLCBwYWNrIH0sIHVzZXIpIHtcbiAgLy8gICBjb25zdCBwb3VldCA9ICd0b3RvJ1xuICAvLyB9XG5cbiAgLy8gYXN5bmMgcHJlVXBkYXRlQWN0aXZlRWZmZWN0IChhLGIsYyxkKSB7XG4gIC8vICAgY29uc3QgcG91ZXQgPSAndG90bydcbiAgLy8gfVxuXG4gIC8vIGFzeW5jIHVwZGF0ZUFjdGl2ZUVmZmVjdCAoYSxiLGMsZCkge1xuICAvLyAgIGNvbnN0IHBvdWV0ID0gJ3RvdG8nXG4gIC8vIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGl0ZW0gZm9yIHRoYXQgYWN0b3IuXG4gICAqIElmIGl0J3MgYSBza2lsbCBmaXJzdCBjaGVjayBpZiB0aGUgc2tpbGwgaXMgYWxyZWFkeSBvd25lZC4gSWYgaXQgaXMgZG9uJ3QgY3JlYXRlIGEgc2Vjb25kIHRpbWUuXG4gICAqIEZpbGwgdGhlIHZhbHVlIG9mIHRoZSBza2lsbCB3aXRoIGJhc2Ugb3IgdHJ5IHRvIGV2YWx1YXRlIHRoZSBmb3JtdWxhLlxuICAgKiBAcGFyYW0geyp9IGVtYmVkZGVkTmFtZVxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zXG4gICAqL1xuICBhc3luYyBjcmVhdGVFbWJlZGRlZERvY3VtZW50cyAoZW1iZWRkZWROYW1lLCBkYXRhQXJyYXksIG9wdGlvbnMpIHtcbiAgICBjb25zdCBwcm9jZXNzZWREYXRhQXJyYXkgPSBbXVxuICAgIGxldCBiYXNlVmFsdWUgPSAwXG4gICAgbGV0IGJhc2VDYWxjdWxhdGVkID0gMFxuICAgIGxldCBhcmNoZXR5cGUgPSBmYWxzZVxuICAgIGxldCBvY2N1cGF0aW9uID0gZmFsc2VcbiAgICBmb3IgKGxldCBkYXRhIG9mIGRhdGFBcnJheSkge1xuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnc2tpbGwnOiB7XG4gICAgICAgICAgYmFzZVZhbHVlID0gZGF0YS5zeXN0ZW0uYmFzZVxuICAgICAgICAgIGJhc2VDYWxjdWxhdGVkID0gYXdhaXQgQ29DN0l0ZW0uY2FsY3VsYXRlQmFzZSh0aGlzLCBkYXRhKVxuICAgICAgICAgIGlmICh0aGlzLnR5cGUgIT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAgICAgICAvLyBJZiBub3QgYSBQQyBzZXQgc2tpbGwgdmFsdWUgdG8gYmFzZVxuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGRhdGEubmFtZSkpIHJldHVybiAvLyBJZiBza2lsbCB3aXRoIHRoaXMgbmFtZSBleGlzdCByZXR1cm5cblxuICAgICAgICAgICAgaWYgKGJhc2VWYWx1ZSkge1xuICAgICAgICAgICAgICBpZiAoU3RyaW5nKGJhc2VWYWx1ZSkgIT09IFN0cmluZyhkYXRhLnN5c3RlbS52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS52YWx1ZSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihkYXRhLnN5c3RlbS52YWx1ZSkpKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZVxuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gKFxuICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlQ2hhcmFjdGVyaXN0aWNzKClcbiAgICAgICAgICAgICAgICAgICkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICAgICkudG90YWxcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSBkYXRhLnN5c3RlbS52YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLnZhbHVlID0gbnVsbFxuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCBhZGRUaGlzID0gdHJ1ZVxuXG4gICAgICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyhkYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgaXNBbnlCdXROb3RGbGFnZ2VkID0gKCEoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lKSA/PyBmYWxzZSkgJiYgIShkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5waWNrbmFtZW9ubHkgPz8gZmFsc2UpXG4gICAgICAgICAgICBsZXQgc2tpbGxMaXN0ID0gW11cbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmd1ZXNzR3JvdXBGcm9tRG9jdW1lbnQoZGF0YSlcbiAgICAgICAgICAgIGlmIChncm91cCkge1xuICAgICAgICAgICAgICBza2lsbExpc3QgPSAoYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoZ3JvdXApICsgJy4rJCcpLCB0eXBlOiAnaScgfSkpLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgPz8gZmFsc2UpICYmICEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lID8/IGZhbHNlKSAmJiAhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSA/PyBmYWxzZSlcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbT8uZmxhZ3M/Lm9jY3VwYXRpb24gfHwgZGF0YS5zeXN0ZW0/LmZsYWdzPy5hcmNoZXR5cGUpIHtcbiAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTa2lsbHMgPSB0aGlzLnNraWxscy5maWx0ZXIoZWwgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghZWwuc3lzdGVtLnNwZWNpYWxpemF0aW9uKSByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbT8uZmxhZ3M/Lm9jY3VwYXRpb24gJiZcbiAgICAgICAgICAgICAgICAgIGVsLnN5c3RlbS5mbGFncz8ub2NjdXBhdGlvblxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtPy5mbGFncz8uYXJjaGV0eXBlICYmXG4gICAgICAgICAgICAgICAgICBlbC5zeXN0ZW0uZmxhZ3M/LmFyY2hldHlwZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvbi50b0xvY2FsZUxvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgICAgICAgZWwuc3lzdGVtLnNwZWNpYWxpemF0aW9uLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChleGlzdGluZ1NraWxscy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNraWxsTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gZXhpc3RpbmdTa2lsbHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm91bmQgPSBza2lsbExpc3QuZmluZEluZGV4KGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IGV4aXN0aW5nU2tpbGxzW2ldLm5hbWUgfHwgaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCA9PT0gZXhpc3RpbmdTa2lsbHNbaV0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWRcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kID4gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICBza2lsbExpc3Quc3BsaWNlKGZvdW5kLCAxKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBza2lsbExpc3QgPSBza2lsbExpc3QuY29uY2F0KGV4aXN0aW5nU2tpbGxzKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBza2lsbExpc3QgPSBleGlzdGluZ1NraWxsc1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNraWxsTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNraWxsRGF0YSA9IGF3YWl0IFNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICAgICAgc2tpbGxzOiBza2lsbExpc3QsXG4gICAgICAgICAgICAgIGFsbG93Q3VzdG9tOiAoaXNBbnlCdXROb3RGbGFnZ2VkIHx8IChkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUgPz8gZmFsc2UpKSxcbiAgICAgICAgICAgICAgZml4ZWRCYXNlVmFsdWU6IChkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5rZWVwYmFzZXZhbHVlID8/IGZhbHNlKSxcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb25OYW1lOiBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvbixcbiAgICAgICAgICAgICAgbGFiZWw6IGRhdGEubmFtZSxcbiAgICAgICAgICAgICAgYmFzZVZhbHVlOiBkYXRhLnN5c3RlbS5iYXNlXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChza2lsbERhdGEsICdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICAgIGlmIChza2lsbERhdGEuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0l0ZW0gPSB0aGlzLml0ZW1zLmdldChcbiAgICAgICAgICAgICAgICAgIHNraWxsRGF0YS5zZWxlY3RlZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdJdGVtKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBjaGFuZ2VzID0ge31cbiAgICAgICAgICAgICAgICAgIGlmICghKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LmtlZXBiYXNldmFsdWUgPz8gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChza2lsbERhdGEuYmFzZVZhbHVlICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgIGJhc2VDYWxjdWxhdGVkID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXNbJ3N5c3RlbS52YWx1ZSddID0gYmFzZUNhbGN1bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5zeXN0ZW0uZmxhZ3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZXNbYHN5c3RlbS5mbGFncy4ke2tleX1gXSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNoYW5nZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlcy5faWQgPSBleGlzdGluZ0l0ZW0uaWRcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtjaGFuZ2VzXSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGRhdGEubmFtZSA9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhleGlzdGluZ0l0ZW0pXG4gICAgICAgICAgICAgICAgICBhZGRUaGlzID0gZmFsc2VcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBza2lsbExpc3QuZmluZChpID0+IGkuaWQgPT09IHNraWxsRGF0YS5zZWxlY3RlZClcbiAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmbGFncyA9IGRhdGEuc3lzdGVtPy5mbGFnc1xuICAgICAgICAgICAgICAgICAgICBkYXRhID0gZHVwbGljYXRlKGV4aXN0aW5nKVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmbGFncykpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmZsYWdzW2tleV0gPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LmtlZXBiYXNldmFsdWUgPz8gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5iYXNlVmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlQ2FsY3VsYXRlZCA9IHNraWxsRGF0YS5iYXNlVmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnZhbHVlID0gYmFzZUNhbGN1bGF0ZWRcbiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVZhbHVlID0gZGF0YS5zeXN0ZW0udmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgICAgICAgc2tpbGxEYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBpZiAoIShkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5rZWVwYmFzZXZhbHVlID8/IGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5iYXNlVmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VDYWxjdWxhdGVkID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS52YWx1ZSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVmFsdWUgPSBkYXRhLnN5c3RlbS52YWx1ZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoYWRkVGhpcykge1xuICAgICAgICAgICAgaWYgKFN0cmluZyhiYXNlVmFsdWUpICE9PSBTdHJpbmcoYmFzZUNhbGN1bGF0ZWQpKSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmJhc2UgPSBiYXNlQ2FsY3VsYXRlZFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChkdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cblxuICAgICAgICBjYXNlICd3ZWFwb24nOiB7XG4gICAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gJ2NvbnRhaW5lcicpIHtcbiAgICAgICAgICAgIGNvbnN0IG1haW5Ta2lsbCA9IGRhdGEuc3lzdGVtPy5za2lsbD8ubWFpbj8ubmFtZVxuICAgICAgICAgICAgaWYgKG1haW5Ta2lsbCkge1xuICAgICAgICAgICAgICBsZXQgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShtYWluU2tpbGwpWzBdXG4gICAgICAgICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgICAgICAgICAgICAgID8gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgICAgICAgICAgICAgIDogbWFpblNraWxsXG4gICAgICAgICAgICAgICAgLy8gdHJ5IHRvIHVzZSBhbiBhbHJlYWR5IGRlZmluZWQgc2tpbGxcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBzZWFyY2ggb24gdGhlIGNvbXBlbmRpdW1zXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgICAgICAgICBpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgICAgICAgICAoaXRlbS5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKSB8fCBpdGVtLnN5c3RlbS5za2lsbE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkSXRlbXMoW2V4aXN0aW5nXSlcbiAgICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5nZXRTa2lsbHNCeU5hbWUobWFpblNraWxsKVswXVxuICAgICAgICAgICAgICAgICAgLy8gc2tpbGwgPSBleGlzdGluZy50b09iamVjdCgpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5jcmVhdGVXZWFwb25Ta2lsbChcbiAgICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgISFkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5ybmdkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChza2lsbCkgZGF0YS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHNraWxsLmlkXG4gICAgICAgICAgICB9IC8vIFRPRE8gOiBFbHNlIDogc2VsZWN0aW9ubmVyIGxlIHNraWxsIGRhbnMgbGEgbGlzdGUgb3UgZW4gY3LDqWVyIHVuIG5vdXZlYXUuXG5cbiAgICAgICAgICAgIGNvbnN0IHNlY29uZFNraWxsID0gZGF0YS5zeXN0ZW0/LnNraWxsPy5hbHRlcm5hdGl2Py5uYW1lXG4gICAgICAgICAgICBpZiAoc2Vjb25kU2tpbGwpIHtcbiAgICAgICAgICAgICAgbGV0IHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoc2Vjb25kU2tpbGwpWzBdXG4gICAgICAgICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gc2Vjb25kU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgICAgICAgICAgICAgPyBzZWNvbmRTa2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICAgICAgICAgICAgICA6IHNlY29uZFNraWxsXG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgICAgICAgICBpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgICAgICAgICAoaXRlbS5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKSB8fCBpdGVtLnN5c3RlbS5za2lsbE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWRkSXRlbXMoW2V4aXN0aW5nXSlcbiAgICAgICAgICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5nZXRTa2lsbHNCeU5hbWUoc2Vjb25kU2tpbGwpWzBdXG4gICAgICAgICAgICAgICAgICAvLyBza2lsbCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZVdlYXBvblNraWxsKFxuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAhIWRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LnJuZ2RcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHNraWxsKSBkYXRhLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkID0gc2tpbGwuaWRcbiAgICAgICAgICAgIH0gLy8gVE9ETyA6IEVsc2UgOiBzZWxlY3Rpb25uZXIgbGUgc2tpbGwgZGFucyBsYSBsaXN0ZSBvdSBlbiBjcsOpZXIgdW4gbm91dmVhdS5cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChkdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3NldHVwJzoge1xuICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5lbmFibGVDaGFyYWN0ZXJpc2l0aWNzKSB7XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdCA9IHt9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdzdHInKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuY29uID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnY29uJylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnNpeiA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3NpeicpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXggPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdkZXgnKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuYXBwID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnYXBwJylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmludCA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2ludCcpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdwb3cnKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuZWR1ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnZWR1JylcblxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjayA9IHt9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnZhbHVlID0gaXNOYU4odGhpcy5sdWNrKVxuICAgICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgICAgOiB0aGlzLmx1Y2tcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2subGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnNob3J0TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICAgICAgIClcblxuICAgICAgICAgICAgaWYgKCFkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMgPSB7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zdHIgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5zdHIudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuY29uLnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnNpeiA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnNpei52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5kZXggPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5kZXgudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuYXBwLnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmludCA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmludC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5wb3cudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuZWR1LnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmx1Y2sgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrLnZhbHVlXG4gICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNwZW5kUG9pbnRzJylcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxDaGFyYWMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0ucG9pbnRzV2FybmluZyA9ICEoXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc3RyICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuY29uICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc2l6ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZGV4ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuYXBwICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuaW50ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93ICE9PSBudWxsICYmXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuZWR1ICE9PSBudWxsXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBjb25zdCByb2xsZWQgPSBhd2FpdCBDaGFyYWNSb2xsRGlhbG9nLmNyZWF0ZShkYXRhLnN5c3RlbSlcbiAgICAgICAgICAgIGlmIChyb2xsZWQpIHtcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIFtcbiAgICAgICAgICAgICAgICAnc3RyJyxcbiAgICAgICAgICAgICAgICAnY29uJyxcbiAgICAgICAgICAgICAgICAnc2l6JyxcbiAgICAgICAgICAgICAgICAnZGV4JyxcbiAgICAgICAgICAgICAgICAnYXBwJyxcbiAgICAgICAgICAgICAgICAnaW50JyxcbiAgICAgICAgICAgICAgICAncG93JyxcbiAgICAgICAgICAgICAgICAnZWR1J1xuICAgICAgICAgICAgICBdKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XSkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNba2V5XVxuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0uZm9ybXVsYWBdID1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzW2tleV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVjaykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVja1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSddID1cbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQnXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyAvIDVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMubXAubWF4J10gPSBNYXRoLmZsb29yKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgLyA1XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHVwZGF0ZURhdGEsIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOiB0aGlzLnJhd0hwTWF4LFxuICAgICAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC5tYXgnOiB0aGlzLnJhd0hwTWF4XG4gICAgICAgICAgICAgIH0sIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXJhID0gT2JqZWN0LmVudHJpZXMoZGF0YS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzKS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiBlWzBdKVxuICAgICAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5pdGVtcywgZXJhOiAodHlwZW9mIGVyYVswXSAhPT0gJ3VuZGVmaW5lZCcgPyBlcmFbMF0gOiB0cnVlKSB9KVxuICAgICAgICAgIGNvbnN0IHNraWxscyA9IGl0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgICAgICAgIGNvbnN0IG90aGVyc0l0ZW1zID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgIT09ICdza2lsbCcpXG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhza2lsbHMpXG4gICAgICAgICAgYXdhaXQgdGhpcy5hZGRJdGVtcyhvdGhlcnNJdGVtcylcbiAgICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJhY2tzdG9yeSc6IGRhdGEuc3lzdGVtLmJhY2tzdG9yeSB9LCB7IHJlbmRlclNoZWV0OiBmYWxzZSB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlY3Rpb25OYW1lIG9mIGRhdGEuc3lzdGVtLmJpb1NlY3Rpb25zKSB7XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhdGhpcy5zeXN0ZW0uYmlvZ3JhcGh5Py5maW5kKFxuICAgICAgICAgICAgICAgICAgZWwgPT4gc2VjdGlvbk5hbWUgPT09IGVsLnRpdGxlXG4gICAgICAgICAgICAgICAgKSAmJlxuICAgICAgICAgICAgICAgIHNlY3Rpb25OYW1lXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlQmlvU2VjdGlvbihzZWN0aW9uTmFtZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICAvLyByZWZhY3RvciB0aGlzXG4gICAgICAgICAgY29uc3QgbW9uZXRhcnkgPSBtZXJnZU9iamVjdCh0aGlzLnN5c3RlbS5tb25ldGFyeSwgZHVwbGljYXRlKGRhdGEuc3lzdGVtLm1vbmV0YXJ5KSlcbiAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuc2hlZXRcbiAgICAgICAgICBsZXQgc3RhdGUgPSBmYWxzZVxuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIHN0YXRlID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgcmVzb2x2ZShzaGVldC5fc3RhdGUpXG4gICAgICAgICAgICB9LCAxMDApKVxuICAgICAgICAgIH0gd2hpbGUgKHN0YXRlID09PSBBcHBsaWNhdGlvbi5SRU5ERVJfU1RBVEVTLlJFTkRFUklORylcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICAnc3lzdGVtLm1vbmV0YXJ5JzogbW9uZXRhcnlcbiAgICAgICAgICB9KVxuICAgICAgICAgIEhvb2tzLmNhbGwoJ3NldHVwRmluaXNoZWRDb0M3JylcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2FyY2hldHlwZSc6XG4gICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIC8vIEFyY2hldHlwcmUgb25seSBmb3IgUENzXG4gICAgICAgICAgICBpZiAodGhpcy5hcmNoZXR5cGUpIHtcbiAgICAgICAgICAgICAgbGV0IHJlc2V0QXJjaGV0eXBlID0gZmFsc2VcbiAgICAgICAgICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVzZXRBcmNoZXR5cGUnKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlc2V0QXJjaGV0eXBlSGludCcsIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZVxuICAgICAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgICAgIHllczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmVzZXRBcmNoZXR5cGUgPSB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0WWVzOiBmYWxzZVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICBpZiAocmVzZXRBcmNoZXR5cGUpIGF3YWl0IHRoaXMucmVzZXRBcmNoZXR5cGUoKVxuICAgICAgICAgICAgICBlbHNlIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb3JlQ2hhcmFjID0gW11cbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gZW50cnlcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1trZXldID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxuICAgICAgICAgICAgICAgIGNoYXIua2V5ID0ga2V5XG4gICAgICAgICAgICAgICAgY29yZUNoYXJhYy5wdXNoKGNoYXIpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGNoYXJhY1xuXG4gICAgICAgICAgICBpZiAoY29yZUNoYXJhYy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXJEaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgY2hhckRpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzID0gY29yZUNoYXJhY1xuICAgICAgICAgICAgICBjaGFyRGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TZWxlY3RDb3JlQ2hhcmFjJylcbiAgICAgICAgICAgICAgY2hhcmFjID0gYXdhaXQgQ2hhcmFjU2VsZWN0RGlhbG9nLmNyZWF0ZShjaGFyRGlhbG9nRGF0YSlcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29yZUNoYXJhYy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgY2hhcmFjID0gY29yZUNoYXJhY1swXS5rZXlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFjaGFyYWMpIHJldHVyblxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1tjaGFyYWNdID0gdHJ1ZVxuICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgbGV0IHZhbHVlID0gTnVtYmVyKGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlKVxuICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoY2hhcmFjKVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgcm9sbC50b01lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgICAnQ29DNy5NZXNzYWdlUm9sbGluZ0NoYXJhY3RlcmlzdGljJyxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBjaGFyLmxhYmVsLFxuICAgICAgICAgICAgICAgICAgICAgIGZvcm11bGE6IGRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHZhbHVlID0gY2hhci52YWx1ZSA8IHJvbGwudG90YWwgPyByb2xsLnRvdGFsIDogY2hhci52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICAgICBbYHN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuJHtjaGFyYWN9LnZhbHVlYF06IHZhbHVlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBhbGwgc2tpbGxzXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IGRhdGEuc3lzdGVtLnNraWxscyB9KVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhkYXRhLnN5c3RlbS5za2lsbHMsICdhcmNoZXR5cGUnKVxuXG4gICAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChkdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgICBhcmNoZXR5cGUgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnb2NjdXBhdGlvbic6XG4gICAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIC8vIE9jY3VwYXRpb24gb25seSBmb3IgUENzXG4gICAgICAgICAgICBpZiAodGhpcy5vY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICAgIGxldCByZXNldE9jY3VwYXRpb24gPSBmYWxzZVxuICAgICAgICAgICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZXNldE9jY3VwYXRpb24nKSxcbiAgICAgICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlc2V0T2NjdXBhdGlvbkhpbnQnLCB7XG4gICAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlc2V0T2NjdXBhdGlvbiA9IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRZZXM6IGZhbHNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChyZXNldE9jY3VwYXRpb24pIGF3YWl0IHRoaXMucmVzZXRPY2N1cGF0aW9uKClcbiAgICAgICAgICAgICAgZWxzZSByZXR1cm5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29udmVydCBDb0NJRHMgdG8gaXRlbXNcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG5cbiAgICAgICAgICAgIGlmIChOdW1iZXIoZGF0YS5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1heCkgPiAwKSB7XG4gICAgICAgICAgICAgIC8vIE9jY3VwYXRpb25zIHdpdGggYSBjcmVkaXQgcmF0aW5nIHJlcXVpcmUgYSBjcmVkaXQgcmF0aW5nIHNraWxsXG4gICAgICAgICAgICAgIGNvbnN0IGFjdG9yQ3JlZGl0UmF0aW5nID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJywgZGF0YS5zeXN0ZW0uc2tpbGxzKVxuICAgICAgICAgICAgICBpZiAoYWN0b3JDcmVkaXRSYXRpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5maW5kQ29jSWRJbkxpc3QoJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycsIHRoaXMuaXRlbXMpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzLnB1c2goJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycpXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IGRhdGEuc3lzdGVtLnNraWxscyB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJywgdGhpcy5pdGVtcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMucHVzaChhY3RvckNyZWRpdFJhdGluZ1swXSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2VsZWN0IGNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBjb25zdCBwb2ludHNEaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzID0gZGF0YS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgICAgICAgICBsZXQgdG90YWwgPSAwXG4gICAgICAgICAgICBsZXQgb3B0aW9uYWxDaGFyID0gZmFsc2VcbiAgICAgICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50c1xuICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgICAgICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhrZXkpXG4gICAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0ubmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS52YWx1ZSA9IGNoYXIudmFsdWVcbiAgICAgICAgICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS50b3RhbCA9XG4gICAgICAgICAgICAgICAgICBjaGFyLnZhbHVlICpcbiAgICAgICAgICAgICAgICAgIE51bWJlcihwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLm11bHRpcGxpZXIpXG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZS5vcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgdG90YWwgKz0gcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS50b3RhbFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25hbENoYXIgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLnRvdGFsID0gdG90YWxcbiAgICAgICAgICAgIGlmIChvcHRpb25hbENoYXIpIHtcbiAgICAgICAgICAgICAgLy8gSXMgdGhlcmUgYW55IG9wdGlvbmFsIGNoYXIgdG8gY2hvb3NlIGZvciBwb2ludHMgY2FsYyA/XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFBvaW50U2VsZWN0RGlhbG9nLmNyZWF0ZShwb2ludHNEaWFsb2dEYXRhKVxuICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkgcmV0dXJuIC8vIFBvaW50IG5vdCBzZWxlY3RlZCA9PiBleGl0LlxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgb3B0aW9uYWwgc2tpbGxzXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZGF0YS5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAvLyBDb252ZXJ0IENvQ0lkcyB0byBpdGVtc1xuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMgfSlcblxuICAgICAgICAgICAgICBjb25zdCBkaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMgPSBbXVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5hY3RvcklkID0gdGhpcy5pZFxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCA9IE51bWJlcihkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLm9wdGlvbnMpXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxTZWxlY3Rpb25XaW5kb3cnKVxuXG4gICAgICAgICAgICAgIC8vIFNlbGVjdCBvbmx5IHNraWxscyB0aGF0IGFyZSBub3QgcHJlc2VudCBvciBhcmUgbm90IGZsYWdnZWQgYXMgb2NjdXBhdGlvbi5cbiAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscykge1xuICAgICAgICAgICAgICAgIGlmIChDb0M3SXRlbS5pc0FueVNwZWModmFsdWUpKSBkaWFsb2dEYXRhLnNraWxscy5wdXNoKHZhbHVlKVxuICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSBnZW5lcmljIHNwZWMgd2UgYWx3YXlzIGFkZCBpdFxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbHVlLm5hbWUgJiYgaXRlbS50eXBlID09PSAnc2tpbGwnXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgaWYgKCFza2lsbCB8fCAhc2tpbGwuc3lzdGVtLmZsYWdzPy5vY2N1cGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHNraWxsIHdhcyBhZGRlZCB0byBza2lsbCBsaXN0IHByZXZpb3VzbHksIHJlbW92ZSBpdFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbHJlYWR5U2VsZWN0ZWRTa2lsbCA9IGRhdGEuc3lzdGVtLnNraWxscy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHZhbHVlLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhbHJlYWR5U2VsZWN0ZWRTa2lsbCkgZGlhbG9nRGF0YS5za2lsbHMucHVzaCh2YWx1ZSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vbmUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoIDw9IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGlzIGxlc3Mgc2tpbGwgdGhhbiBvcHRpb25zLCBhZGQgdGhlbSBhbGwuXG4gICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0xlc3NTa2lsbFRoYW5PcHRpb25zJywge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ291bnQ6IGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ291bnQ6IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKCBkaWFsb2dEYXRhLnNraWxscywgJ29jY3VwYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHNcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBza2lsbCBzZWxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGF3YWl0IFNraWxsU2VsZWN0RGlhbG9nLmNyZWF0ZShkaWFsb2dEYXRhKVxuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluZm9BbGxTa2lsbHNBbHJlYWR5U2VsZWN0ZWQnKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgZXh0cmEgc2tpbGxzXG4gICAgICAgICAgICBpZiAoTnVtYmVyKGRhdGEuc3lzdGVtLnBlcnNvbmFsKSkge1xuICAgICAgICAgICAgICBjb25zdCBkaWFsb2dEYXRhID0ge31cbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHMgPSBbXVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnR5cGUgPSAnb2NjdXBhdGlvbidcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS5hY3RvcklkID0gdGhpcy5pZFxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCA9IE51bWJlcihkYXRhLnN5c3RlbS5wZXJzb25hbClcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2VsZWN0UGVyc29uYWxTa2lsbHMnLCB7XG4gICAgICAgICAgICAgICAgbnVtYmVyOiBOdW1iZXIoZGF0YS5zeXN0ZW0ucGVyc29uYWwpXG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgLy8gU2VsZWN0IG9ubHkgc2tpbGxzIHRoYXQgYXJlIG5vdCBwcmVzZW50IG9yIGFyZSBub3QgZmxhZ2dlZCBhcyBvY2N1cGF0aW9uLlxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBTZWxlY3QgYWxsIHNraWxscyB0aGF0IGFyZSBub3QgYWxyZWFkeSBmbGFnZ2VkIGFzIG9jY3VwYXRpb24sIGNhbiBoYXZlIGFkanVzdG1lbnRzIGFuZCBYUC5cbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAhcy5zeXN0ZW0uZmxhZ3Mub2NjdXBhdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgIXMuc3lzdGVtLnByb3BlcnRpZXMubm9hZGp1c3RtZW50cyAmJlxuICAgICAgICAgICAgICAgICAgIXMuc3lzdGVtLnByb3BlcnRpZXMubm94cGdhaW5cbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIC8vIGlmIHNraWxsIGFscmVhZHkgc2VsZWN0ZWQgZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgICAgICAgICBjb25zdCBhbHJlYWR5U2VsZWN0ZWRTa2lsbCA9IGRhdGEuc3lzdGVtLnNraWxscy5maW5kKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5uYW1lID09PSBzLm5hbWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlTZWxlY3RlZFNraWxsKSBkaWFsb2dEYXRhLnNraWxscy5wdXNoKHMpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gaWYgdGhlcmUncyBub25lLCBkbyBub3RoaW5nLlxuICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCA8PSBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudCkge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBpcyBsZXNzIHNraWxsIHRoYW4gb3B0aW9ucywgYWRkIHRoZW0gYWxsLlxuICAgICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9MZXNzU2tpbGxUaGFuT3B0aW9ucycsIHtcbiAgICAgICAgICAgICAgICAgICAgICBza2lsbENvdW50OiBkaWFsb2dEYXRhLnNraWxscy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc0NvdW50OiBkaWFsb2dEYXRhLm9wdGlvbnNDb3VudFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyggZGlhbG9nRGF0YS5za2lsbHMsICdvY2N1cGF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ0RhdGEuc2tpbGxzXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3Igc2tpbGwgc2VsZWN0aW9uLlxuICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBhd2FpdCBTa2lsbFNlbGVjdERpYWxvZy5jcmVhdGUoZGlhbG9nRGF0YSkgLy8gRGlhbG9nIGRhdGEgYnVnID8/P1xuICAgICAgICAgICAgICAgICAgaWYgKCFzZWxlY3RlZCkgcmV0dXJuXG4gICAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWQgPSBDb0M3SXRlbS5tZXJnZU9wdGlvbmFsU2tpbGxzKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMgPSBtZXJnZWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkluZm9BbGxTa2lsbHNBbHJlYWR5U2VsZWN0ZWQnKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBZGQgYWxsIHNraWxsc1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRVbmlxdWVJdGVtcyhkYXRhLnN5c3RlbS5za2lsbHMsICdvY2N1cGF0aW9uJylcbiAgICAgICAgICAgIC8vIENyZWRpdCByYXRpbmcgaXMgYWx3YXlzIHBhcnQgb2Ygb2NjdXBhdGlvblxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVkaXRSYXRpbmdTa2lsbD8uc2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgICAgICAgICAgLy8gc2V0dGluZyBpdCB0byBtaW4gY3JlZGl0IHJhdGluZ1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVkaXRSYXRpbmdTa2lsbD8udXBkYXRlKHtcbiAgICAgICAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uJzogTnVtYmVyKGRhdGEuc3lzdGVtLmNyZWRpdFJhdGluZy5taW4pXG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChkdXBsaWNhdGUoZGF0YSkpXG4gICAgICAgICAgICBvY2N1cGF0aW9uID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LnB1c2goZHVwbGljYXRlKGRhdGEpKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvY2Vzc2VkRGF0YUFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IHByb2Nlc3NlZCA9IGF3YWl0IHN1cGVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgZW1iZWRkZWROYW1lLFxuICAgICAgcHJvY2Vzc2VkRGF0YUFycmF5LFxuICAgICAgb3B0aW9uc1xuICAgIClcblxuICAgIGlmIChhcmNoZXR5cGUpIHtcbiAgICAgIC8vIHNldHRpbmcgcG9pbnRzXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uZGV2ZWxvcG1lbnQuYXJjaGV0eXBlJzogdGhpcy5hcmNoZXR5cGVQb2ludHNcbiAgICAgIH0pXG4gICAgICBIb29rcy5jYWxsKCdhcmNoZXR5cGVGaW5pc2hlZENvQzcnKVxuICAgIH1cbiAgICBpZiAob2NjdXBhdGlvbikge1xuICAgICAgLy8gc2V0dGluZyBwb2ludHNcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogdGhpcy5vY2N1cGF0aW9uUG9pbnRzLFxuICAgICAgICAnc3lzdGVtLmRldmVsb3BtZW50LnBlcnNvbmFsJzogdGhpcy5wZXJzb25hbFBvaW50c1xuICAgICAgfSlcbiAgICAgIEhvb2tzLmNhbGwoJ29jY3VwYXRpb25GaW5pc2hlZENvQzcnKVxuICAgIH1cblxuICAgIHJldHVybiBwcm9jZXNzZWRcbiAgfVxuXG4gIC8vIGdldFNraWxsSWRCeU5hbWUoIHNraWxsTmFtZSl7XG4gIC8vICAgbGV0IGlkID0gbnVsbDtcbiAgLy8gICAgZm9yIChjb25zdCBbbWFwLCBrZXksIHZhbHVlXSBvZiB0aGlzLml0ZW1zKSB7XG4gIC8vICAgICBpZiggdmFsdWUubmFtZSA9PSBza2lsbE5hbWUpIGlkID0gdmFsdWUuaWQ7XG4gIC8vICAgfTtcblxuICAvLyAgIHJldHVybiBpZDtcbiAgLy8gfVxuXG4gIGdldEl0ZW1JZEJ5TmFtZSAoaXRlbU5hbWUpIHtcbiAgICBsZXQgaWQgPSBudWxsXG4gICAgY29uc3QgbmFtZSA9IGl0ZW1OYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgID8gaXRlbU5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgOiBpdGVtTmFtZVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKFxuICAgICAgICBDb0M3SXRlbS5nZXROYW1lV2l0aG91dFNwZWModmFsdWUpLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKSB7XG4gICAgICAgIGlkID0gdmFsdWUuaWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaWRcbiAgfVxuXG4gIGdldEl0ZW1zQnlOYW1lIChpdGVtTmFtZSkge1xuICAgIGNvbnN0IGl0ZW1MaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS5uYW1lID09PSBpdGVtTmFtZSkgaXRlbUxpc3QucHVzaCh2YWx1ZSlcbiAgICB9XG5cbiAgICByZXR1cm4gaXRlbUxpc3RcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKlxuICAgKi9cbiAgZ2V0U2tpbGxzQnlOYW1lIChza2lsbE5hbWUpIHtcbiAgICAvLyBUT0RPIDogbW9yZSBhZ2dyZXNzaXZlIGZpbmRpbmcgaW5jbHVkaW5nIHNwZWNzXG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBjb25zdCBuYW1lID0gc2tpbGxOYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgID8gc2tpbGxOYW1lLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgIDogc2tpbGxOYW1lXG5cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmIChcbiAgICAgICAgKFxuICAgICAgICAgIENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyh2YWx1ZSkudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgdmFsdWUuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IHNraWxsTmFtZVxuICAgICAgICApICYmXG4gICAgICAgIHZhbHVlLnR5cGUgPT09ICdza2lsbCdcbiAgICAgICkge1xuICAgICAgICBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0Rmlyc3RTa2lsbEJ5Q29DSUQgKGNvY2lkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXMuZmluZChpID0+IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IGNvY2lkKVxuICB9XG5cbiAgcGFyc2VGb3JtdWxhIChmb3JtdWxhKSB7XG4gICAgbGV0IHBhcnNlZEZvcm11bGEgPSBmb3JtdWxhXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yKSkge1xuICAgICAgcGFyc2VkRm9ybXVsYSA9IHBhcnNlZEZvcm11bGEucmVwbGFjZShrZXksIHZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VkRm9ybXVsYVxuICB9XG5cbiAgcGFyc2VDaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yKSkge1xuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdAJykgJiYgdmFsdWUuc3RhcnRzV2l0aCgndGhpcy4nKSkge1xuICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBnZXRQcm9wZXJ0eSh0aGlzLCB2YWx1ZS5zdWJzdHJpbmcoNSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXJzZWRcbiAgfVxuXG4gIHN0YXRpYyBnZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24gKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICBnYW1lLnN5c3RlbS50ZW1wbGF0ZS5BY3Rvci50ZW1wbGF0ZXMuY2hhcmFjdGVyaXN0aWNzLmNoYXJhY3RlcmlzdGljc1xuICAgICkpIHtcbiAgICAgIGNoYXJhY3RlcmlzdGljcy5wdXNoKHtcbiAgICAgICAga2V5LFxuICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpXG4gICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4gY2hhcmFjdGVyaXN0aWNzXG4gIH1cblxuICBnZXRDaGFyYWN0ZXJpc3RpYyAoY2hhck5hbWUpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzXG4gICAgICApKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICAgY2hhck5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGtleSA9PT0gY2hhck5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgc2hvcnROYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLFxuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbCksXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldEF0dHJpYnV0ZSAoYXR0cmliTmFtZSkge1xuICAgIGlmIChcbiAgICAgIFsnbGNrJywgJ2x1Y2snLCBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLnRvTG93ZXJDYXNlKCldLmluY2x1ZGVzKFxuICAgICAgICBhdHRyaWJOYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleTogJ2xjaycsXG4gICAgICAgIHNob3J0TmFtZTogJ2x1Y2snLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChcbiAgICAgIFtcbiAgICAgICAgJ3NhbicsXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JykudG9Mb3dlckNhc2UoKVxuICAgICAgXS5pbmNsdWRlcyhhdHRyaWJOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZXk6ICdzYW4nLFxuICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBydW5Sb2xsIChvcHRpb25zID0ge30pIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMuY2FyZFR5cGUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLnByZXZlbnRTdGFuZGJ5ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgb3B0aW9ucy5wcmV2ZW50U3RhbmRieSA9IHRydWVcbiAgICB9XG4gICAgb3B0aW9ucy5hY3RvciA9IHRoaXNcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIob3B0aW9ucylcbiAgICByZXR1cm4gcmVzdWx0c1xuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb24gKCkge1xuICAgIGNvbnN0IG9jY3VwYXRpb24gPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKVxuICAgIHJldHVybiBvY2N1cGF0aW9uWzBdXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlICgpIHtcbiAgICBjb25zdCBhcmNoZXR5cGUgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+IGl0ZW0udHlwZSA9PT0gJ2FyY2hldHlwZScpXG4gICAgcmV0dXJuIGFyY2hldHlwZVswXVxuICB9XG5cbiAgYXN5bmMgcmVzZXRPY2N1cGF0aW9uIChlcmFzZU9sZCA9IHRydWUpIHtcbiAgICBpZiAoZXJhc2VPbGQpIHtcbiAgICAgIGNvbnN0IG9jY3VwYXRpb25Ta2lsbCA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT5cbiAgICAgICAgaXRlbS5nZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb2NjdXBhdGlvblNraWxsLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBhd2FpdCBvY2N1cGF0aW9uU2tpbGxbaW5kZXhdLnVuc2V0SXRlbUZsYWcoJ29jY3VwYXRpb24nKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5vY2N1cGF0aW9uKSBhd2FpdCB0aGlzLm9jY3VwYXRpb24uZGVsZXRlKClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IG51bGwgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc2V0QXJjaGV0eXBlIChlcmFzZU9sZCA9IHRydWUpIHtcbiAgICBpZiAoZXJhc2VPbGQpIHtcbiAgICAgIGNvbnN0IGFyY2hldHlwZVNraWxsID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PlxuICAgICAgICBpdGVtLmdldEl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgICAgKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGFyY2hldHlwZVNraWxsLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBhd2FpdCBhcmNoZXR5cGVTa2lsbFtpbmRleF0udW5zZXRJdGVtRmxhZygnYXJjaGV0eXBlJylcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuYXJjaGV0eXBlKSBhd2FpdCB0aGlzLmFyY2hldHlwZS5kZWxldGUoKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5kZXZlbG9wbWVudC5hcmNoZXR5cGUnOiBudWxsIH0pXG4gIH1cblxuICBnZXQgbHVjayAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnM/Lmxjaz8udmFsdWUpXG4gIH1cblxuICBhc3luYyBzZXRMdWNrICh2YWx1ZSkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgc3BlbmRMdWNrIChhbW91bnQpIHtcbiAgICBhbW91bnQgPSBwYXJzZUludChhbW91bnQpXG4gICAgaWYgKCEodGhpcy5sdWNrID49IGFtb3VudCkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLnNldEx1Y2sodGhpcy5sdWNrIC0gYW1vdW50KVxuICB9XG5cbiAgZ2V0IGhwICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSlcbiAgfVxuXG4gIGdldCByYXdIcE1heCAoKSB7XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAuYXV0bykge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlICE9IG51bGwgJiZcbiAgICAgICAgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmNvbi52YWx1ZSAhPSBudWxsXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIENvQ0FjdG9yLmhwRnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MsIHRoaXMudHlwZSlcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXgpXG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXgpXG4gIH1cblxuICBnZXQgaHBNYXggKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgfVxuXG4gIGFzeW5jIF9zZXRIcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgdmFsdWUgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZFVuaXF1ZUl0ZW1zIChza2lsbExpc3QsIGZsYWcgPSBudWxsKSB7XG4gICAgY29uc3QgcHJvY2Vzc2VkID0gW11cbiAgICBmb3IgKGxldCBza2lsbCBvZiBza2lsbExpc3QpIHtcbiAgICAgIHNraWxsID0gZHVwbGljYXRlKHNraWxsKVxuICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2tpbGwuc3lzdGVtLCAnZmxhZ3MnKSkge1xuICAgICAgICAgIHNraWxsLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzW2ZsYWddID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyhza2lsbCkpIHtcbiAgICAgICAgcHJvY2Vzc2VkLnB1c2goc2tpbGwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpdGVtSWQgPSB0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbC5uYW1lKVxuICAgICAgICBpZiAoIWl0ZW1JZCkge1xuICAgICAgICAgIHByb2Nlc3NlZC5wdXNoKHNraWxsKVxuICAgICAgICB9IGVsc2UgaWYgKGZsYWcpIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtcy5nZXQoaXRlbUlkKVxuICAgICAgICAgIGF3YWl0IGl0ZW0uc2V0SXRlbUZsYWcoZmxhZylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvY2Vzc2VkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBwcm9jZXNzZWQsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBhZGRJdGVtcyAoaXRlbUxpc3QsIGZsYWcgPSBudWxsKSB7XG4gICAgY29uc3QgcHJvY2Vzc2VkID0gW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbUxpc3QpIHtcbiAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgIGlmICghaXRlbS5zeXN0ZW0uZmxhZ3MpIGl0ZW0uc3lzdGVtLmZsYWdzID0ge31cbiAgICAgICAgaXRlbS5zeXN0ZW0uZmxhZ3NbZmxhZ10gPSB0cnVlXG4gICAgICB9XG4gICAgICBwcm9jZXNzZWQucHVzaChkdXBsaWNhdGUoaXRlbSkpXG4gICAgfVxuICAgIGlmIChwcm9jZXNzZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBwcm9jZXNzZWQsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBhZGRVbmlxdWVJdGVtIChza2lsbCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBpdGVtSWQgPSB0aGlzLmdldEl0ZW1JZEJ5TmFtZShza2lsbC5uYW1lKVxuICAgIGlmICghaXRlbUlkKSB7XG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIXNraWxsLnN5c3RlbS5mbGFncykgc2tpbGwuc3lzdGVtLmZsYWdzID0ge31cbiAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzW2ZsYWddID0gdHJ1ZVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtza2lsbF0sIHtcbiAgICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoZmxhZykge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAgIGF3YWl0IGl0ZW0uc2V0SXRlbUZsYWcoZmxhZylcbiAgICB9XG4gIH1cblxuICBnZXQgcmF3TXBNYXggKCkge1xuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLmF1dG8pIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIENvQ0FjdG9yLm1wRnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpXG4gICAgICB9IGVsc2UgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KVxuICB9XG5cbiAgZ2V0UmVhc29uU2FuTG9zcyAoc2FuUmVhc29uKSB7XG4gICAgaWYgKHR5cGVvZiBzYW5SZWFzb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzLmZpbHRlcihcbiAgICAgICAgICByID0+IHIudHlwZS50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzYW5SZWFzb24udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICApWzBdID8/IHsgdHlwZTogJycsIHRvdGFsTG9zczogMCwgaW1tdW5pdHk6IGZhbHNlIH1cbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHsgdHlwZTogJycsIHRvdGFsTG9zczogMCwgaW1tdW5pdHk6IGZhbHNlIH1cbiAgfVxuXG4gIHNhbkxvc3RUb1JlYXNvbiAoc2FuUmVhc29uKSB7XG4gICAgaWYgKHNhblJlYXNvbikge1xuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICAgIHJldHVybiBzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQgKHNhblJlYXNvbikge1xuICAgIGlmIChzYW5SZWFzb24pIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudCA9IHRoaXMuZ2V0UmVhc29uU2FuTG9zcyhzYW5SZWFzb24pXG4gICAgICByZXR1cm4gc2FuaXR5TG9zc0V2ZW50LnR5cGUgIT09ICcnXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc2V0UmVhc29uU2FuTG9zcyAoc2FuUmVhc29uLCBzYW5Mb3NzKSB7XG4gICAgaWYgKHR5cGVvZiBzYW5SZWFzb24gPT09ICdzdHJpbmcnICYmIHNhblJlYXNvbiAhPT0gJycpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cylcbiAgICAgIGNvbnN0IGluZGV4ID0gc2FuaXR5TG9zc0V2ZW50cy5maW5kSW5kZXgoXG4gICAgICAgIHIgPT4gci50eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNhblJlYXNvbi50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgICBpZiAoc2FuTG9zcyA+IDApIHtcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiBzYW5SZWFzb24sXG4gICAgICAgICAgICB0b3RhbExvc3M6IHNhbkxvc3MsXG4gICAgICAgICAgICBpbW11bml0eTogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNhbml0eUxvc3NFdmVudHNbaW5kZXhdLnRvdGFsTG9zcyArPSBzYW5Mb3NzXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5zb3J0KGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xuICAgICAgICAgIHJldHVybiBsZWZ0LnR5cGUubG9jYWxlQ29tcGFyZShyaWdodC50eXBlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50c1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBtYXhMb3NzVG9TYW5SZWFzb24gKHNhblJlYXNvbiwgc2FuTWF4Rm9ybXVsYSkge1xuICAgIGNvbnN0IHNhbk1heCA9IG5ldyBSb2xsKHNhbk1heEZvcm11bGEudG9TdHJpbmcoKSkuZXZhbHVhdGUoe1xuICAgICAgbWF4aW1pemU6IHRydWVcbiAgICB9KS50b3RhbFxuICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudCA9IHRoaXMuZ2V0UmVhc29uU2FuTG9zcyhzYW5SZWFzb24pXG4gICAgaWYgKHNhbml0eUxvc3NFdmVudC5pbW11bml0eSkge1xuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIHNhbk1heCAtIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MpXG4gIH1cblxuICBhc3luYyBsb29zZVNhbiAoc2FuUmVhc29uLCBzYW5Mb3NzKSB7XG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICBpZiAoIXNhbml0eUxvc3NFdmVudC5pbW11bml0eSkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRTYW4odGhpcy5zYW4gLSBzYW5Mb3NzKVxuICAgICAgdGhpcy5zZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbiwgc2FuTG9zcylcbiAgICAgIHJldHVybiBzYW5Mb3NzXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBzYW5Mb3NzIChjaGVja1Bhc3NlZCkge1xuICAgIGlmIChjaGVja1Bhc3NlZCkgcmV0dXJuIHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkXG4gICAgcmV0dXJuIHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NDaGVja1Bhc3NlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrUGFzc2VkXG4gIH1cblxuICBnZXQgc2FuTG9zc0NoZWNrRmFpbGxlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrRmFpbGxlZFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NNYXggKCkge1xuICAgIGlmICh0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkpKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkuZXZhbHVhdGUoe1xuICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgfSkudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBzYW5Mb3NzTWluICgpIHtcbiAgICBpZiAodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKSkpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZClcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgUm9sbCh0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZCkuZXZhbHVhdGUoe1xuICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgfSkudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBkYWlseVNhbkxvc3MgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbj8uZGFpbHlMb3NzIHx8IDBcbiAgfVxuXG4gIGdldCBkYWlseVNhbkxpbWl0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4/LmRhaWx5TGltaXQgfHwgMFxuICB9XG5cbiAgZ2V0IHJhd1Nhbk1heCAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LnNhbj8uYXV0bykge1xuICAgICAgaWYgKHRoaXMuY3RodWxodU15dGhvcykgcmV0dXJuIE1hdGgubWF4KDk5IC0gdGhpcy5jdGh1bGh1TXl0aG9zLCAwKVxuICAgICAgcmV0dXJuIDk5XG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXgpXG4gIH1cblxuICBnZXQgc2FuTWF4ICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4KVxuICB9XG5cbiAgZ2V0IG1wICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSlcbiAgfVxuXG4gIGdldCBtcE1heCAoKSB7XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubXAuYXV0bykge1xuICAgICAgLy8gVE9ETyBpZiBhbnkgaXMgbnVsbCBzZXQgbWF4IGJhY2sgdG8gbnVsbC5cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAvIDUpXG4gICAgICB9XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5tYXgpXG4gIH1cblxuICBhc3luYyBzZXRNcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heCkpIHsgdmFsdWUgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heCkgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBnZXQgc2FuICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUpXG4gIH1cblxuICBnZXQgaW50ICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnaW50JylcbiAgfVxuXG4gIGdldCBvY2N1cGF0aW9uUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBvY2N1cGF0aW9uUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24pIHtcbiAgICAgICAgb2NjdXBhdGlvblBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMub2NjdXBhdGlvblxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2NjdXBhdGlvblBvaW50c1xuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb25Qb2ludHMgKCkge1xuICAgIGlmICghdGhpcy5vY2N1cGF0aW9uKSByZXR1cm4gMFxuICAgIGxldCBwb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHRoaXMub2NjdXBhdGlvbi5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgKSkge1xuICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gZW50cnlcbiAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgIGlmICh2YWx1ZS5zZWxlY3RlZCkge1xuICAgICAgICBwb2ludHMgKz0gY2hhci52YWx1ZSAqIE51bWJlcih2YWx1ZS5tdWx0aXBsaWVyKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9pbnRzXG4gIH1cblxuICBhc3luYyByZXNldE9jY3VwYXRpb25Qb2ludHMgKCkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uZGV2ZWxvcG1lbnQub2NjdXBhdGlvbic6IHRoaXMub2NjdXBhdGlvblBvaW50c1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNldEFyY2hldHlwZVBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5hcmNoZXR5cGUnOiB0aGlzLm9jY3VwYXRpb25Qb2ludHNcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRQZXJzb25hbFBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5wZXJzb25hbCc6IHRoaXMucGVyc29uYWxQb2ludHNcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGFyY2hldHlwZVBvaW50c1NwZW50ICgpIHtcbiAgICBsZXQgYXJjaGV0eXBlUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHM/LmFyY2hldHlwZSkge1xuICAgICAgICBhcmNoZXR5cGVQb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLmFyY2hldHlwZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJjaGV0eXBlUG9pbnRzXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlUG9pbnRzICgpIHtcbiAgICBpZiAoIXRoaXMuYXJjaGV0eXBlKSByZXR1cm4gMFxuICAgIHJldHVybiB0aGlzLmFyY2hldHlwZS5zeXN0ZW0uYm9udXNQb2ludHNcbiAgfVxuXG4gIGdldCBleHBlcmllbmNlUG9pbnRzICgpIHtcbiAgICBsZXQgZXhwZXJpZW5jZVBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlKSB7XG4gICAgICAgIGV4cGVyaWVuY2VQb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2VcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV4cGVyaWVuY2VQb2ludHNcbiAgfVxuXG4gIGdldCBwZXJzb25hbFBvaW50c1NwZW50ICgpIHtcbiAgICBsZXQgcGVyc29uYWxQb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8ucGVyc29uYWwpIHtcbiAgICAgICAgcGVyc29uYWxQb2ludHMgKz0gc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzLnBlcnNvbmFsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwZXJzb25hbFBvaW50c1xuICB9XG5cbiAgZ2V0IHBlcnNvbmFsUG9pbnRzICgpIHtcbiAgICByZXR1cm4gMiAqIE51bWJlcih0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuaW50LnZhbHVlKVxuICB9XG5cbiAgZ2V0IGhhc0RldmVsb3BtZW50UGhhc2UgKCkge1xuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uZmxhZ3M/LmRldmVsb3BlbWVudCkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMub25seVJ1bk9uY2VQZXJTZXNzaW9uKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgZm9yIChjb25zdCBzYW5pdHlMb3NzRXZlbnQgb2YgdGhpcy5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cykge1xuICAgICAgaWYgKCFzYW5pdHlMb3NzRXZlbnQuaW1tdW5pdHkpIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgc2V0U2FuICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heCkgeyB2YWx1ZSA9IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heCB9XG4gICAgY29uc3QgbG9zcyA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlKSAtIHZhbHVlXG5cbiAgICBpZiAobG9zcyA+IDApIHtcbiAgICAgIGxldCB0b3RhbExvc3MgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzKVxuICAgICAgICA6IDBcbiAgICAgIHRvdGFsTG9zcyA9IHRvdGFsTG9zcyArIGxvc3NcbiAgICAgIGlmIChsb3NzID49IDUpIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lKVxuICAgICAgaWYgKHRvdGFsTG9zcyA+PSB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmluZGVmSW5zYW5lKVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJzogdmFsdWUsXG4gICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJzogdG90YWxMb3NzXG4gICAgICB9KVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnOiB2YWx1ZSB9KVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgYXN5bmMgc2V0QXR0cmliQXV0byAodmFsdWUsIGF0dHJpYikge1xuICAgIGNvbnN0IHVwZGF0ZWRLZXkgPSBgc3lzdGVtLmF0dHJpYnMuJHthdHRyaWJ9LmF1dG9gXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgW3VwZGF0ZWRLZXldOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlQXR0cmliQXV0byAoYXR0cmliKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJBdXRvKCF0aGlzLnN5c3RlbS5hdHRyaWJzW2F0dHJpYl0uYXV0bywgYXR0cmliKVxuICB9XG5cbiAgc3RhdGljIGRiRnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgY29uc3Qgc3VtID0gKGNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgPz8gMCkgKyAoY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSA/PyAwKVxuICAgIGlmIChzdW0gPCA2NSkgcmV0dXJuIC0yXG4gICAgaWYgKHN1bSA8IDg1KSByZXR1cm4gLTFcbiAgICBpZiAoc3VtIDwgMTI1KSByZXR1cm4gMFxuICAgIGlmIChzdW0gPCAxNjUpIHJldHVybiAnMUQ0J1xuICAgIHJldHVybiBgJHtNYXRoLmZsb29yKChzdW0gLSA0NSkgLyA4MCl9RDZgXG4gIH1cblxuICBzdGF0aWMgYnVpbGRGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICBjb25zdCBzdW0gPSAoY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA/PyAwKSArIChjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlID8/IDApXG4gICAgaWYgKHN1bSA8IDY1KSByZXR1cm4gLTJcbiAgICBpZiAoc3VtIDwgODUpIHJldHVybiAtMVxuICAgIGlmIChzdW0gPCAxMjUpIHJldHVybiAwXG4gICAgaWYgKHN1bSA8IDE2NSkgcmV0dXJuIDFcbiAgICByZXR1cm4gTWF0aC5mbG9vcigoc3VtIC0gNDUpIC8gODApICsgMVxuICB9XG5cbiAgc3RhdGljIGhwRnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzLCB0eXBlKSB7XG4gICAgY29uc3Qgc3VtID0gcGFyc2VJbnQoY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSA/PyAwLCAxMCkgKyBwYXJzZUludChjaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlID8/IDAsIDEwKVxuICAgIGNvbnN0IGRpdmlzb3IgPSAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVEb3VibGVNYXhIZWFsdGgnKSAmJiB0eXBlID09PSAnY2hhcmFjdGVyJyA/IDUgOiAxMClcbiAgICByZXR1cm4gTWF0aC5mbG9vcihzdW0gLyBkaXZpc29yKVxuICB9XG5cbiAgc3RhdGljIG1wRnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAvIDUpXG4gIH1cblxuICBzdGF0aWMgbW92RnJvbUNoYXJhY3RlcmlzdGljcyAoY2hhcmFjdGVyaXN0aWNzLCB0eXBlLCBhZ2UpIHtcbiAgICBsZXQgTU9WXG4gICAgaWYgKGNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgPiBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlICYmIGNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgPiBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlKSB7XG4gICAgICBNT1YgPSA5IC8vIEJ1ZyBjb3JyZWN0aW9uIGJ5IEFkbWlyYWxOeWFyLlxuICAgIH0gZWxzZSBpZiAoY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSA+PSBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlIHx8IGNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUgPj0gY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZSkge1xuICAgICAgTU9WID0gOFxuICAgIH0gZWxzZSB7XG4gICAgICBNT1YgPSA3XG4gICAgfVxuICAgIGlmICh0eXBlICE9PSAnY3JlYXR1cmUnICYmICFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpKSB7XG4gICAgICBpZiAoIWlzTmFOKHBhcnNlSW50KGFnZSkpKSB7XG4gICAgICAgIE1PViA9IHBhcnNlSW50KGFnZSkgPj0gNDAgPyBNT1YgLSBNYXRoLmZsb29yKHBhcnNlSW50KGFnZSkgLyAxMCkgKyAzIDogTU9WXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBNYXRoLm1heCgwLCBNT1YpXG4gIH1cblxuICBnZXQgcmF3QnVpbGQgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvKSB7XG4gICAgICByZXR1cm4gQ29DQWN0b3IuYnVpbGRGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcylcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZVxuICB9XG5cbiAgZ2V0IGJ1aWxkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZVxuICB9XG5cbiAgZ2V0IHJhd0RiICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzLmRiKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID09PSAnYXV0bycpIHtcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIuYXV0bykge1xuICAgICAgcmV0dXJuIENvQ0FjdG9yLmRiRnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlXG4gIH1cblxuICBnZXQgZGIgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlXG4gIH1cblxuICBnZXQgcmF3TW92ICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdikgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8pIHtcbiAgICAgIGNvbnN0IE1PViA9IENvQ0FjdG9yLm1vdkZyb21DaGFyYWN0ZXJpc3RpY3ModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLCB0aGlzLnN5c3RlbS50eXBlLCB0aGlzLnN5c3RlbS5pbmZvcy5hZ2UpXG4gICAgICBpZiAoTU9WID4gMCkgcmV0dXJuIE1PVlxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YudmFsdWVcbiAgfVxuXG4gIGdldCBtb3YgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZVxuICB9XG5cbiAgZ2V0IHRva2VuSWQgKCkge1xuICAgIC8vIFRPRE8gY2xhcmlmaWVyIGNhIGV0IHRva2Vua2V5XG4gICAgcmV0dXJuIHRoaXMudG9rZW4gPyBgJHt0aGlzLnRva2VuLnNjZW5lLl9pZH0uJHt0aGlzLnRva2VuLmlkfWAgOiBudWxsIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IGxvY2tlZCAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MubG9ja2VkID0gdHJ1ZSAvLyBMb2NrZWQgYnkgZGVmYXVsdFxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiBmYWxzZSB9KVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgfVxuXG4gIGdldEl0ZW1zRnJvbU5hbWUgKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtcy5maWx0ZXIoaSA9PiBpLm5hbWUgPT09IG5hbWUpXG4gIH1cblxuICBzZXQgbG9ja2VkICh2YWx1ZSkge1xuICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlQWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGNvbnN0IGZsYWdWYWx1ZSA9ICF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV1cbiAgICBjb25zdCBuYW1lID0gYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBhdHRyaWJ1dGVOYW1lIGtleSBvZiBhdHRyaWJ1dGUgdG8gY2hlY2sgaW4gWydsY2snXVxuICAgKiBAcGFyYW0geyp9IGZhc3RGb3J3YXJkXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcbiAgICovXG4gIGFzeW5jIGF0dHJpYnV0ZUNoZWNrIChhdHRyaWJ1dGVOYW1lLCBmYXN0Rm9yd2FyZCA9IGZhbHNlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBhdHRyaWIgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLnRvTG93ZXJDYXNlKCkpXG4gICAgaWYgKCFhdHRyaWIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZCcsIHtcbiAgICAgICAgICBtaXNzaW5nOiBhdHRyaWJ1dGVOYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAob3B0aW9ucy5tb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBhd2FpdCBjaGVjay5yb2xsQXR0cmlidXRlKGF0dHJpYi5rZXkpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGNoYXJhY3RlcmlzdGljTmFtZSBrZXkgb2YgY2hhcmFjdGVyaXN0aWMgdG8gY2hlY2sgaW4gWydzdHInLCdjb24nLCdzaXonLCdkZXgnLCdhcHAnLCdpbnQnLCdwb3cnLCdlZHUnXVxuICAgKiBAcGFyYW0geyp9IGZhc3RGb3J3YXJkXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBkaWZmaWN1bHR5IGluIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwsIG1vZGlmaWVyICgtMiArMiksIG5hbWVcbiAgICovXG4gIGFzeW5jIGNoYXJhY3RlcmlzdGljQ2hlY2sgKFxuICAgIGNoYXJhY3RlcmlzdGljTmFtZSxcbiAgICBmYXN0Rm9yd2FyZCA9IGZhbHNlLFxuICAgIG9wdGlvbnMgPSB7fVxuICApIHtcbiAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWN0ZXJpc3RpY05hbWUpXG5cbiAgICBpZiAoIWNoYXIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZEZvckFjdG9yJywge1xuICAgICAgICAgIG1pc3Npbmc6IGNoYXJhY3RlcmlzdGljTmFtZSxcbiAgICAgICAgICBhY3RvcjogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuXG4gICAgaWYgKG9wdGlvbnMubW9kaWZpZXIpIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIGlmIChvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcbiAgICB9XG5cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBpZiAodW5kZWZpbmVkID09PSBvcHRpb25zLmRpZmZpY3VsdHkgfHwgdW5kZWZpbmVkID09PSBvcHRpb25zLm1vZGlmaWVyKSB7XG4gICAgICAgIG9wdGlvbnMuZGlzcGxheU5hbWUgPSBjaGFyLmxhYmVsXG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9IHRoaXMudG9rZW5LZXlcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgZWxzZSBjaGVjay5pc0JsaW5kID0gISFvcHRpb25zLmJsaW5kXG4gICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKGNoYXIua2V5KVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBhc3luYyBza2lsbENoZWNrIChza2lsbERhdGEsIGZhc3RGb3J3YXJkLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBza2lsbElkZW50aWZpZXIgPSBza2lsbERhdGEubmFtZSA/IHNraWxsRGF0YS5uYW1lIDogc2tpbGxEYXRhXG4gICAgY29uc29sZS5sb2coc2tpbGxJZGVudGlmaWVyKVxuICAgIGNvbnN0IGlzQ29DSUQgPSAhIXNraWxsSWRlbnRpZmllci5tYXRjaCgvXmlcXC5za2lsbFxcLi8pXG4gICAgbGV0IHNraWxsID0gW11cbiAgICBpZiAoaXNDb0NJRCkge1xuICAgICAgLy8gQXR0ZW1wdCB0byBsb2FkIGZyb20gYWN0b3IgZnJvbSBDb0MgSURcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmdldEZpcnN0U2tpbGxCeUNvQ0lEKHNraWxsSWRlbnRpZmllcilcbiAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgIHNraWxsLnB1c2goaXRlbSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFza2lsbC5sZW5ndGgpIHtcbiAgICAgIC8vIEF0dGVtcHQgdG8gbG9hZCBmb3IgYWN0b3IgYnkgbmFtZVxuICAgICAgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShza2lsbElkZW50aWZpZXIpXG4gICAgfVxuICAgIGlmICghc2tpbGwubGVuZ3RoKSB7XG4gICAgICBsZXQgaXRlbSA9IG51bGxcbiAgICAgIGlmIChza2lsbERhdGEucGFjaykge1xuICAgICAgICBjb25zdCBwYWNrID0gZ2FtZS5wYWNrcy5nZXQoc2tpbGxEYXRhLnBhY2spXG4gICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm5cbiAgICAgICAgaXRlbSA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnQoc2tpbGxEYXRhLmlkKVxuICAgICAgfSBlbHNlIGlmIChza2lsbERhdGEuaWQpIHtcbiAgICAgICAgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHNraWxsRGF0YS5pZClcbiAgICAgIH1cblxuICAgICAgLy8gTm8gc2tpbGwgZm91bmQsIHRyeSB0byBnZXQgZ2V0IGl0IGZyb20gY29tcGVuZGl1bSAhXG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgLy8gVE9ETzogSW1wbGVtZW50IHJldHJpZXZhbCBvZiBza2lsbCBmcm9tIGNvbXBlbmRpdW0gISFcbiAgICAgICAgLy8gZ2FtZS5zZXR0aW5ncy5nZXQoICdDb0M3JywgJ0RlZmF1bHRDb21wZW5kaXVtJyk7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgIGNoZWNrLl9yYXdWYWx1ZSA9ICc/J1xuICAgICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgIH1cbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTm9Ta2lsbCcpICsgJyAnICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RGb3VuZEZvckFjdG9yJywge1xuICAgICAgICAgICAgICBtaXNzaW5nOiBza2lsbERhdGEubmFtZSA/IHNraWxsRGF0YS5uYW1lIDogc2tpbGxEYXRhLFxuICAgICAgICAgICAgICBhY3RvcjogdGhpcy5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGxldCBjcmVhdGUgPSBmYWxzZVxuICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFkZFdlYXBvbicpfWAsXG4gICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQWRkV2VhcG9udEhpbnQnLCB7XG4gICAgICAgICAgd2VhcG9uOiBza2lsbERhdGEubmFtZSxcbiAgICAgICAgICBhY3RvcjogdGhpcy5uYW1lXG4gICAgICAgIH0pfTwvcD5gLFxuICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICBjcmVhdGUgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pXG5cbiAgICAgIGlmIChjcmVhdGUgPT09IHRydWUpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkdXBsaWNhdGUoaXRlbSldKVxuICAgICAgfSBlbHNlIHJldHVyblxuXG4gICAgICBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKGl0ZW0ubmFtZSlcblxuICAgICAgaWYgKCFza2lsbC5sZW5ndGgpIHJldHVyblxuXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgY29uc3Qgc2tpbGxWYWx1ZSA9IGF3YWl0IFNraWxsVmFsdWVEaWFsb2cuY3JlYXRlKFxuICAgICAgICAgIHNraWxsWzBdLm5hbWUsXG4gICAgICAgICAgc2tpbGxbMF0uYmFzZVxuICAgICAgICApXG4gICAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKHNraWxsVmFsdWUuZ2V0KCdiYXNlLXZhbHVlJykpXG4gICAgICAgIGF3YWl0IHNraWxsWzBdLnVwZGF0ZVZhbHVlKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLm1vZGlmaWVyKSB7XG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcbiAgICB9XG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5IHx8IHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5tb2RpZmllcikge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XG4gICAgY2hlY2suc2tpbGwgPSBza2lsbFswXS5pZFxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuICB9XG5cbiAgYXN5bmMgd2VhcG9uQ2hlY2sgKHdlYXBvbkRhdGEsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBsZXQgd2VhcG9uXG4gICAgaWYgKHR5cGVvZiB3ZWFwb25EYXRhLnV1aWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3ZWFwb24gPSBhd2FpdCBmcm9tVXVpZCh3ZWFwb25EYXRhLnV1aWQpXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygd2VhcG9uRGF0YS5pZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdlYXBvbiA9IHRoaXMuaXRlbXMuZ2V0KHdlYXBvbkRhdGEuaWQpXG4gICAgfVxuICAgIGlmICghd2VhcG9uKSB7XG4gICAgICBsZXQgd2VhcG9ucyA9IHRoaXMuZ2V0SXRlbXNGcm9tTmFtZSh3ZWFwb25EYXRhLm5hbWUpXG4gICAgICBpZiAod2VhcG9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgbGV0IGl0ZW0gPSBudWxsXG4gICAgICAgICAgY29uc3QgcGFjayA9IHdlYXBvbkRhdGEucGFjayA/IGdhbWUucGFja3MuZ2V0KHdlYXBvbkRhdGEucGFjaykgOiBudWxsXG4gICAgICAgICAgaWYgKHBhY2spIHtcbiAgICAgICAgICAgIGlmIChwYWNrLm1ldGFkYXRhLmVudGl0eSAhPT0gJ0l0ZW0nKSByZXR1cm5cbiAgICAgICAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KHdlYXBvbkRhdGEuaWQpXG4gICAgICAgICAgfSBlbHNlIGlmICh3ZWFwb25EYXRhLmlkKSB7XG4gICAgICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQod2VhcG9uRGF0YS5pZClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9Ob0l0ZW1Gb3VuZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXG4gICAgICAgICAgYXdhaXQgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb25EYXRhLm5hbWUsXG4gICAgICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgICAgIGNyZWF0ZSA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnN0IGFjdG9yID1cbiAgICAgICAgICAgIHR5cGVvZiB0aGlzLnBhcmVudD8uYWN0b3IgIT09ICd1bmRlZmluZWQnID8gdGhpcy5wYXJlbnQuYWN0b3IgOiB0aGlzXG5cbiAgICAgICAgICBpZiAoY3JlYXRlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBhd2FpdCBhY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLnRvSlNPTigpXSlcbiAgICAgICAgICB9IGVsc2UgcmV0dXJuXG4gICAgICAgICAgd2VhcG9ucyA9IGFjdG9yLmdldEl0ZW1zRnJvbU5hbWUoaXRlbS5uYW1lKVxuICAgICAgICAgIGlmICghd2VhcG9ucy5sZW5ndGgpIHJldHVyblxuICAgICAgICAgIGF3YWl0IHdlYXBvbnNbMF0ucmVsb2FkKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yQWN0b3JIYXNOb1dlYXBvbk5hbWVkJywge1xuICAgICAgICAgICAgICBhY3Rvck5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgICAgd2VhcG9uTmFtZTogd2VhcG9uRGF0YS5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh3ZWFwb25zLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JBY3Rvckhhc1Rvb01hbnlXZWFwb25zTmFtZWQnLCB7XG4gICAgICAgICAgICBhY3Rvck5hbWU6IHRoaXMubmFtZSxcbiAgICAgICAgICAgIHdlYXBvbk5hbWU6IHdlYXBvbkRhdGEubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIHdlYXBvbiA9IHdlYXBvbnNbMF1cbiAgICB9XG5cbiAgICBpZiAoIXdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA+IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuVG9vTWFueVRhcmdldCcpKVxuICAgICAgfVxuXG4gICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdNZWxlZUluaXRpYXRvcih0aGlzLnRva2VuS2V5LCAod2VhcG9uRGF0YS51dWlkIHx8IHdlYXBvbi5pZCksIGZhc3RGb3J3YXJkKVxuICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IodGhpcy50b2tlbktleSwgKHdlYXBvbkRhdGEudXVpZCB8fCB3ZWFwb24uaWQpLCBmYXN0Rm9yd2FyZClcbiAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxJbml0aWF0aXZlIChoYXNHdW4gPSBmYWxzZSkge1xuICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSkge1xuICAgICAgY2FzZSAnb3B0aW9uYWwnOiB7XG4gICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKHRoaXMuYWN0b3JLZXkpXG4gICAgICAgIHJvbGwuZGVueVB1c2ggPSB0cnVlXG4gICAgICAgIHJvbGwuZGVueUx1Y2sgPSB0cnVlXG4gICAgICAgIHJvbGwuZGVueUJsaW5kVGFtcGVyaW5nID0gdHJ1ZVxuICAgICAgICByb2xsLmhpZGVEaWNlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUluaXREaWNlcycpID09PSBmYWxzZVxuICAgICAgICByb2xsLmZsYXZvciA9ICdJbml0aWF0aXZlIHJvbGwnXG4gICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKCdkZXgnLCBoYXNHdW4gPyAxIDogMClcbiAgICAgICAgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHJvbGwuc3VjY2Vzc0xldmVsICsgdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSAvIDEwMFxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBoYXNHdW5cbiAgICAgICAgICA/IHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgKyA1MFxuICAgICAgICAgIDogdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgIH1cbiAgfVxuXG4gIGdldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlXG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV0pIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIHNldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YF06IHRydWUgfSlcbiAgfVxuXG4gIGFzeW5jIHVuc2V0QWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXTogZmFsc2UgfSlcbiAgfVxuXG4gIGdldFdlYXBvblNraWxscyAoaXRlbUlkKSB7XG4gICAgbGV0IHdlYXBvbiA9IGZyb21VdWlkU3luYyhpdGVtSWQpXG4gICAgaWYgKCF3ZWFwb24pIHtcbiAgICAgIHdlYXBvbiA9IHRoaXMuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3ZWFwb24uc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgd2VhcG9uID0gZ2FtZS5wYWNrcy5nZXQod2VhcG9uLnBhY2spLmdldCh3ZWFwb24uX2lkKVxuICAgIH1cbiAgICBpZiAod2VhcG9uLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKSlcbiAgICB9XG5cbiAgICBpZiAod2VhcG9uLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxzLnB1c2godGhpcy5pdGVtcy5nZXQod2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSlcbiAgICB9XG4gICAgcmV0dXJuIHNraWxsc1xuICB9XG5cbiAgLyoqIFRyeSB0byBmaW5kIGEgY2hhcmFjdGVyaXN0aWMsIGF0dHJpYnV0ZSBvciBza2lsbCB0aGF0IG1hdGNoZXMgdGhlIG5hbWUgKi9cbiAgZmluZCAobmFtZSkge1xuICAgIGlmICghbmFtZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIFRyeSBJRFxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChuYW1lKVxuICAgIGlmIChpdGVtKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaXRlbScsXG4gICAgICAgIHZhbHVlOiBpdGVtXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVnRXhwID0gL1xcKChbXildKylcXCkvXG4gICAgY29uc3QgbWF0Y2hlcyA9IHJlZ0V4cC5leGVjKG5hbWUpXG4gICAgbGV0IHNob3J0TmFtZSA9IG51bGxcbiAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCkgc2hvcnROYW1lID0gbWF0Y2hlc1sxXVxuICAgIC8vIFRyeSB0byBmaW5kIGEgc2tpbGwgd2l0aCBleGFjdCBuYW1lLlxuICAgIGNvbnN0IHNraWxsID0gdGhpcy5za2lsbHMuZmlsdGVyKHMgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgISFzLm5hbWUgJiZcbiAgICAgICAgKHMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XG4gICAgICAgICAgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgfHxcbiAgICAgICAgICBzLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpID09PVxuICAgICAgICAgICAgbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgfHxcbiAgICAgICAgICBzLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpID09PVxuICAgICAgICAgICAgc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykpXG4gICAgICApXG4gICAgfSlcbiAgICBpZiAoc2tpbGwubGVuZ3RoKSByZXR1cm4geyB0eXBlOiAnaXRlbScsIHZhbHVlOiBza2lsbFswXSB9XG5cbiAgICAvLyBUcnkgdG8gZmluZCBhIGNoYXJhY3RlcmlzdGljLlxuICAgIGNvbnN0IGNoYXJLZXkgPSBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdycsICdlZHUnXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcktleS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoY2hhcktleVtpXSlcbiAgICAgIGlmIChjaGFyKSB7XG4gICAgICAgIGNoYXIubmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNoYXIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBjaGFyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY2hhci5zaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGNoYXIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2NoYXJhY3RlcmlzdGljJywgdmFsdWU6IGNoYXIgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjaGFyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBjaGFyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2NoYXJhY3RlcmlzdGljJywgdmFsdWU6IGNoYXIgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBhdHRyaWJ1dGUuXG4gICAgY29uc3QgYXR0cmliS2V5ID0gWydsY2snLCAnc2FuJ11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJpYktleS5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXR0ciA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYktleVtpXSlcbiAgICAgIGlmIChhdHRyKSB7XG4gICAgICAgIGF0dHIubmFtZSA9IGF0dHIubGFiZWxcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBhdHRyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBhdHRyLnNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGF0dHIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGF0dHIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJ5IHdpdGggcGFydGlhbCA/P1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBwaWxvdFNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHMuc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiZcbiAgICAgICAgcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgZ2FtZS5pMThuXG4gICAgICAgICAgICAubG9jYWxpemUoJ0NvQzcuUGlsb3RTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGdldCBkcml2ZVNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHMuc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiZcbiAgICAgICAgcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgZ2FtZS5pMThuXG4gICAgICAgICAgICAubG9jYWxpemUoJ0NvQzcuRHJpdmVTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgICAgICAgPy50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gICAgfSlcbiAgfVxuXG4gIGdldCB0b2tlblV1aWQgKCkge1xuICAgIGlmICh0aGlzLnNoZWV0LnRva2VuKSB7XG4gICAgICByZXR1cm4gdGhpcy5zaGVldC50b2tlbi51dWlkXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIC8vIENsYXJpZmllciBjYSBldCB0b2tlbmlkXG4gICAgLyoqICogTU9ESUYgMC44LnggKi9cbiAgICAvLyBpZiB0aGlzLnNoZWV0LnRva2VuID0+IHdhcyBvcGVuZWQgZnJvbSB0b2tlblxuICAgIC8vIGlmIHRoaXMudG9rZW4gPT4gc3ludGhldGljIGFjdG9yID09IHRoaXMuaXNUb2tlblxuICAgIGlmICh0aGlzLnNoZWV0LnRva2VuKSB7XG4gICAgICByZXR1cm4gYCR7dGhpcy5zaGVldC50b2tlbi5wYXJlbnQuaWR9LiR7dGhpcy5zaGVldC50b2tlbi5pZH1gXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHJldHVybiBudWxsO1xuICAgICAgcmV0dXJuIHRoaXMuaWRcbiAgICB9XG4gICAgLyoqKioqKioqKioqKioqKioqL1xuICAgIC8vIC8vQ2FzZSAxOiB0aGUgYWN0b3IgaXMgYSBzeW50aGV0aWMgYWN0b3IgYW5kIGhhcyBhIHRva2VuLCByZXR1cm4gdG9rZW4ga2V5LlxuICAgIC8vIGlmKCB0aGlzLmlzVG9rZW4pIHJldHVybiBgJHt0aGlzLnRva2VuLnNjZW5lPy5faWQ/dGhpcy50b2tlbi5zY2VuZS5faWQ6J1RPS0VOJ30uJHt0aGlzLnRva2VuLmlkfWA7ICAvL1JFRkFDVE9SSU5HICgyKVxuXG4gICAgLy8gLy9DYXNlIDI6IHRoZSBhY3RvciBpcyBub3QgYSB0b2tlbiAobGlua2VkIGFjdG9yKS4gSWYgdGhlIHNoZWV0IGhhdmUgYW4gYXNzb2NpYXRlZCB0b2tlbiByZXR1cm4gdGhlIHRva2VuIGtleS5cbiAgICAvLyBpZiggdGhpcy5zaGVldC50b2tlbikgcmV0dXJuIGAke3RoaXMuc2hlZXQudG9rZW4uc2NlbmU/LmlkP3RoaXMuc2hlZXQudG9rZW4uc2NlbmUuaWQ6J1RPS0VOJ30uJHt0aGlzLnNoZWV0LnRva2VuLmlkfWA7XG5cbiAgICAvLyAvL0Nhc2UgMzogQWN0b3IgaGFzIG5vIHRva2VuIHJldHVybiBoaXMgSUQ7XG4gICAgLy8gcmV0dXJuIHRoaXMuaWQ7XG4gIH1cblxuICBnZXQgYWN0b3JLZXkgKCkge1xuICAgIGlmICh0aGlzLnByb3RvdHlwZVRva2VuLmFjdG9yTGluaykgcmV0dXJuIHRoaXMuaWQgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgcmV0dXJuIHRoaXMudG9rZW5LZXlcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICAvKipcbiAgICogVXNlIHRoZSBmb3JtdWxhIGlmIGF2YWlsYWJsZSB0byByb2xsIHNvbWUgY2hhcmFjdGVyaXRpY3MuXG4gICAqL1xuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgIXZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbCh2YWx1ZS5mb3JtdWxhKVxuICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICBpZiAoci50b3RhbCkge1xuICAgICAgICAgIGNoYXJhY3RlcmlzdGljc1tgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICByLnRvdGFsXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWNzKVxuICAgIGF3YWl0IHRoaXMucmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUoKVxuICB9XG5cbiAgLyoqXG4gICAqIElmIHRoZXJlIGlzIGEgZm9ybXVsYSwgd2lsbCBzZXQgdGhlIGNoYXJhY3RlcmlzdGljIHRvIHRoZSBhdmVyYWdlIHZhbHVlICxpZiBkaXZpc2libGUgYnkgNSwgb3IgdGhlIGNsb3Nlc3QgMTAuXG4gICAqL1xuICBhc3luYyBhdmVyYWdlQ2hhcmFjdGVyaXN0aWNzVmFsdWUgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgIXZhbHVlLmZvcm11bGEuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGNvbnN0IG1heCA9IG5ldyBSb2xsKHZhbHVlLmZvcm11bGEpLmV2YWx1YXRlKHsgbWF4aW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgY29uc3QgbWluID0gbmV3IFJvbGwodmFsdWUuZm9ybXVsYSkuZXZhbHVhdGUoeyBtaW5pbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgICBjb25zdCBhdmVyYWdlID0gTWF0aC5mbG9vcigobWF4ICsgbWluKSAvIDIpXG4gICAgICAgIGNvbnN0IGNoYXJWYWx1ZSA9XG4gICAgICAgICAgYXZlcmFnZSAlIDUgPT09IDAgPyBhdmVyYWdlIDogTWF0aC5yb3VuZChhdmVyYWdlIC8gMTApICogMTBcbiAgICAgICAgaWYgKGNoYXJWYWx1ZSkge1xuICAgICAgICAgIGNoYXJhY3RlcmlzdGljc1tgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9IGNoYXJWYWx1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWNzKVxuICAgIGF3YWl0IHRoaXMucmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUoKVxuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgaWYgYSBjaGFyYWN0ZXJpc2l0YyBmb3JtdWxhIGlzIGEgcmVmZXJlbmNlIHRvIGFuIG90aGVyIGNoYXJhY3RlcmlzdGljIGFuZCBzZXQgaXQgYWNjb3JkaW5nbHkuXG4gICAqL1xuICBhc3luYyByZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpKSB7XG4gICAgICBpZiAodmFsdWUuZm9ybXVsYSAmJiB2YWx1ZS5mb3JtdWxhLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBsZXQgY2hhclZhbHVlXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY2hhclZhbHVlID0gbmV3IFJvbGwoXG4gICAgICAgICAgICB2YWx1ZS5mb3JtdWxhLFxuICAgICAgICAgICAgdGhpcy5wYXJzZUNoYXJhY3RlcmlzdGljcygpXG4gICAgICAgICAgKS5ldmFsdWF0ZSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNoYXJWYWx1ZSA9IG51bGxcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhclZhbHVlKSB7XG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID0gY2hhclZhbHVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpY3MpXG4gIH1cblxuICBhc3luYyBzZXRDaGFyYWN0ZXJpc3RpYyAobmFtZSwgdmFsdWUpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpYyA9IHt9XG4gICAgY29uc3QgY2hhclZhbHVlID0gaXNOYU4ocGFyc2VJbnQodmFsdWUpKSA/IG51bGwgOiBwYXJzZUludCh2YWx1ZSlcbiAgICBjaGFyYWN0ZXJpc3RpY1tuYW1lXSA9IGNoYXJWYWx1ZVxuICAgIGlmICghY2hhclZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnQCcpKSB7XG4gICAgICAgIGNvbnN0IGZvcm11bGEgPSBuYW1lLnJlcGxhY2UoJy52YWx1ZScsICcuZm9ybXVsYScpXG4gICAgICAgIGNoYXJhY3RlcmlzdGljW2Zvcm11bGFdID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGFyYWN0ZXJpc3RpYylcbiAgICBhd2FpdCB0aGlzLnJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BlbWVudFBoYXNlIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZmFpbHVyZSA9IFtdXG4gICAgY29uc3Qgc3VjY2VzcyA9IFtdXG4gICAgY29uc3Qgc2tpbGxNYXN0ZXJpbmdUaHJlc2hvbGQgPSA5MFxuICAgIGNvbnN0IGFsd2F5c1N1Y2Nlc3NUaHJlc2hvbGQgPSA5NVxuXG4gICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbEFsbDREZXYnKVxuICAgIGxldCBza2lsbHNSb2xsZWQgPSAwXG4gICAgbGV0IG1lc3NhZ2UgPSAnPHAgY2xhc3M9XCJjaGF0LWNhcmRcIj4nXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgaWYgKGl0ZW0uZGV2ZWxvcGVtZW50RmxhZykge1xuICAgICAgICAgIHNraWxsc1JvbGxlZCsrXG4gICAgICAgICAgY29uc3QgZGllID0gYXdhaXQgbmV3IERpZSh7IGZhY2VzOiAxMDAgfSkuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGNvbnN0IHNraWxsVmFsdWUgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgbGV0IGF1Z21lbnQgPSBudWxsXG4gICAgICAgICAgbGV0IHNraWxsTWFzdGVyaW5nTWVzc2FnZSA9IG51bGxcbiAgICAgICAgICBpZiAoZGllLnRvdGFsID4gc2tpbGxWYWx1ZSB8fCBkaWUudG90YWwgPj0gYWx3YXlzU3VjY2Vzc1RocmVzaG9sZCkge1xuICAgICAgICAgICAgY29uc3QgYXVnbWVudERpZSA9IGF3YWl0IG5ldyBEaWUoeyBmYWNlczogMTAgfSkuZXZhbHVhdGUoe1xuICAgICAgICAgICAgICBhc3luYzogdHJ1ZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHN1Y2Nlc3MucHVzaChpdGVtLmlkKVxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIFNBTiBhdWdtZW50IHdoZW4gdGhlIHNraWxsIGdvZXMgYmV5b25kIHRoZSBza2lsbCBtYXN0ZXJpbmcgdGhyZXNob2xkLlxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBza2lsbFZhbHVlIDwgc2tpbGxNYXN0ZXJpbmdUaHJlc2hvbGQgJiZcbiAgICAgICAgICAgICAgc2tpbGxWYWx1ZSArIGF1Z21lbnREaWUudG90YWwgPj0gc2tpbGxNYXN0ZXJpbmdUaHJlc2hvbGRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBhdWdtZW50U0FORGllID0gYXdhaXQgbmV3IERpZSh7XG4gICAgICAgICAgICAgICAgZmFjZXM6IDYsXG4gICAgICAgICAgICAgICAgbnVtYmVyOiAyXG4gICAgICAgICAgICAgIH0pLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgICAgY29uc3Qgc2FuR2FpbmVkID0gYXVnbWVudFNBTkRpZS50b3RhbFxuICAgICAgICAgICAgICBjb25zdCBzYW5HYWluZWRNZXNzYWdlID0gYEdhaW5lZCAyZDYgKCR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMF19ICsgJHthdWdtZW50U0FORGllLnZhbHVlc1sxXX0gPSAke3NhbkdhaW5lZH0pIFNBTmBcbiAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZyhzYW5HYWluZWRNZXNzYWdlKVxuICAgICAgICAgICAgICBza2lsbE1hc3RlcmluZ01lc3NhZ2UgPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcuU2FuR2FpbmVkJyxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICByZXN1bHRzOiBgJHthdWdtZW50U0FORGllLnZhbHVlc1swXX0gKyAke2F1Z21lbnRTQU5EaWUudmFsdWVzWzFdfWAsXG4gICAgICAgICAgICAgICAgICBzYW5HYWluZWQsXG4gICAgICAgICAgICAgICAgICBza2lsbDogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgICAgc2tpbGxWYWx1ZTogc2tpbGxWYWx1ZSArIGF1Z21lbnREaWUudG90YWxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICAgIC8vIFNldCBzYW4gY29udHJvbHMgdGhhdCBpdCBkb2Vzbid0IGF1Z21lbnQgYmV5b25kIHNhbk1heFxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldFNhbih0aGlzLnNhbiArIHNhbkdhaW5lZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF1Z21lbnQgKz0gYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3LkRldlN1Y2Nlc3MnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiBpdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgIGF1Z21lbnQ6IGF1Z21lbnREaWUudG90YWxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKX08L3NwYW4+PGJyPmBcbiAgICAgICAgICAgIGlmIChza2lsbE1hc3RlcmluZ01lc3NhZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgbWVzc2FnZSArPSBza2lsbE1hc3RlcmluZ01lc3NhZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGl0ZW0uaW5jcmVhc2VFeHBlcmllbmNlKGF1Z21lbnQpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1mYWlsZWRcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3LkRldkZhaWx1cmUnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaXRlbTogaXRlbS5uYW1lLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiBpdGVtLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICBmYWlsdXJlLnB1c2goaXRlbS5pZClcbiAgICAgICAgICB9XG4gICAgICAgICAgYXdhaXQgaXRlbS51bmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBbXVxuICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKSB7XG4gICAgICBpZiAoc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaChzYW5pdHlMb3NzRXZlbnQpXG4gICAgICB9IGVsc2UgaWYgKHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MgPiAxKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MtLVxuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goc2FuaXR5TG9zc0V2ZW50KVxuICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIGlmIChza2lsbHNSb2xsZWQpIHtcbiAgICAgICAgbWVzc2FnZSArPSAnPGJyPidcbiAgICAgIH1cbiAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWR1Y2VTYW5pdHlMaW1pdHMnKX08L3NwYW4+YFxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBtZXNzYWdlICs9ICc8L3A+J1xuICAgICAgY29uc3Qgc3BlYWtlciA9IHsgYWN0b3I6IHRoaXMgfVxuICAgICAgYXdhaXQgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKHNraWxsc1JvbGxlZCA/IHRpdGxlIDogJycsIG1lc3NhZ2UsIHtcbiAgICAgICAgc3BlYWtlclxuICAgICAgfSlcbiAgICAgIHRoaXMub25seVJ1bk9uY2VQZXJTZXNzaW9uID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4geyBmYWlsdXJlLCBzdWNjZXNzIH1cbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BMdWNrIChmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3QgY3VycmVudEx1Y2sgPSB0aGlzLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZVxuICAgIGlmICghY3VycmVudEx1Y2spIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6IDAgfSlcbiAgICBjb25zdCBwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2sgPSBnYW1lLnNldHRpbmdzLmdldChcbiAgICAgICdDb0M3JyxcbiAgICAgICdwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2snXG4gICAgKVxuICAgIGNvbnN0IHVwZ3JhZGVSb2xsID0gKGF3YWl0IG5ldyBSb2xsKCcxRDEwMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICBjb25zdCBoaWdoZXJUaGFuQ3VycmVudEx1Y2sgPSB1cGdyYWRlUm9sbCA+IGN1cnJlbnRMdWNrXG4gICAgbGV0IGF1Z21lbnRSb2xsXG4gICAgaWYgKHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjaykge1xuICAgICAgaGlnaGVyVGhhbkN1cnJlbnRMdWNrXG4gICAgICAgID8gKGF1Z21lbnRSb2xsID0gJzJEMTArMTAnKVxuICAgICAgICA6IChhdWdtZW50Um9sbCA9ICcxRDEwKzUnKVxuICAgIH0gZWxzZSBpZiAoaGlnaGVyVGhhbkN1cnJlbnRMdWNrKSB7XG4gICAgICBhdWdtZW50Um9sbCA9ICcxRDEwJ1xuICAgIH1cbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsTHVjazREZXYnKVxuICAgIGxldCBtZXNzYWdlID0gJzxwIGNsYXNzPVwiY2hhdC1jYXJkXCI+J1xuICAgIGlmIChwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2sgfHwgaGlnaGVyVGhhbkN1cnJlbnRMdWNrKSB7XG4gICAgICBjb25zdCBhdWdtZW50VmFsdWUgPSAoYXdhaXQgbmV3IFJvbGwoYXVnbWVudFJvbGwpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSlcbiAgICAgICAgLnRvdGFsXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOlxuICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlICsgYXVnbWVudFZhbHVlXG4gICAgICB9KVxuICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLXN1Y2Nlc3NcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICdDb0M3Lkx1Y2tJbmNyZWFzZWQnLFxuICAgICAgICB7XG4gICAgICAgICAgZGllOiB1cGdyYWRlUm9sbCxcbiAgICAgICAgICBzY29yZTogY3VycmVudEx1Y2ssXG4gICAgICAgICAgYXVnbWVudDogYXVnbWVudFZhbHVlXG4gICAgICAgIH1cbiAgICAgICl9PC9zcGFuPmBcbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZSArPSBgPHNwYW4gY2xhc3M9XCJ1cGdyYWRlLWZhaWxlZFwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgJ0NvQzcuTHVja05vdEluY3JlYXNlZCcsXG4gICAgICAgIHsgZGllOiB1cGdyYWRlUm9sbCwgc2NvcmU6IGN1cnJlbnRMdWNrIH1cbiAgICAgICl9PC9zcGFuPmBcbiAgICB9XG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgbWVzc2FnZSArPSAnPC9wPidcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzIH1cbiAgICAgIGF3YWl0IGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZSh0aXRsZSwgbWVzc2FnZSwgeyBzcGVha2VyIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGV2ZWxvcFNraWxsIChza2lsbElkLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmdldChza2lsbElkKVxuICAgIGlmICghc2tpbGwpIHJldHVyblxuICAgIGxldCB0aXRsZSA9ICcnXG4gICAgbGV0IG1lc3NhZ2UgPSAnJ1xuICAgIGNvbnN0IHVwZ3JhZGVSb2xsID0gbmV3IFJvbGwoJzFEMTAwJylcbiAgICBhd2FpdCB1cGdyYWRlUm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICBpZiAoIWZhc3RGb3J3YXJkKSBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZCh1cGdyYWRlUm9sbClcbiAgICBpZiAodXBncmFkZVJvbGwudG90YWwgPiBza2lsbC52YWx1ZSB8fCB1cGdyYWRlUm9sbC50b3RhbCA+PSA5NSkge1xuICAgICAgY29uc3QgYXVnbWVudFJvbGwgPSBuZXcgUm9sbCgnMUQxMCcpXG4gICAgICBhd2FpdCBhdWdtZW50Um9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgIGlmICghZmFzdEZvcndhcmQpIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGF1Z21lbnRSb2xsKVxuICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2U3VjY2Vzc0RldGFpbHMnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWUsXG4gICAgICAgIGF1Z21lbnQ6IGF1Z21lbnRSb2xsLnRvdGFsXG4gICAgICB9KVxuICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlJvbGxUaXRsZScsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZSxcbiAgICAgICAgZGllOiB1cGdyYWRlUm9sbC50b3RhbCxcbiAgICAgICAgc2NvcmU6IHNraWxsLnZhbHVlXG4gICAgICB9KVxuICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGF1Z21lbnRSb2xsLnRvdGFsKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2Um9sbFRpdGxlJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lLFxuICAgICAgICBkaWU6IHVwZ3JhZGVSb2xsLnRvdGFsLFxuICAgICAgICBzY29yZTogc2tpbGwudmFsdWVcbiAgICAgIH0pXG4gICAgICBtZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZGYWlsdXJlRGV0YWlscycsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZVxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3Qgc3BlYWtlciA9IHsgYWN0b3I6IHRoaXMuX2lkIH1cbiAgICBhd2FpdCBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UodGl0bGUsIG1lc3NhZ2UsIHsgc3BlYWtlciB9KVxuICAgIGF3YWl0IHNraWxsLnVuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gIH1cblxuICBoYXNDb25kaXRpb25TdGF0dXMgKGNvbmRpdGlvbk5hbWUpIHtcbiAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IHRoaXMuc3lzdGVtLmNvbmRpdGlvbnM/Lltjb25kaXRpb25OYW1lXT8udmFsdWVcbiAgICBpZiAodHlwZW9mIGNvbmRpdGlvblZhbHVlICE9PSAnYm9vbGVhbicpIHtcbiAgICAgIHJldHVybiBmYWxzZSAvLyBOZWNlc3NhcnksIGluY29ycmVjdCB0ZW1wbGF0ZSBpbml0aWFsaXphdGlvblxuICAgIH1cbiAgICByZXR1cm4gY29uZGl0aW9uVmFsdWVcbiAgfVxuXG4gIGhhc0NvbmRpdGlvblZhbHVlIChjb25kaXRpb25OYW1lLCBmaWVsZCkge1xuICAgIGlmICghdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoY29uZGl0aW9uTmFtZSkpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgaWYgKGNvbmRpdGlvbk5hbWUgPT09IENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lICYmIGZpZWxkID09PSAnZHVyYXRpb25UZXh0Jykge1xuICAgICAgY29uc3QgcmVhbFRpbWUgPSB0aGlzLmhhc0NvbmRpdGlvblZhbHVlKGNvbmRpdGlvbk5hbWUsICdyZWFsVGltZScpXG4gICAgICBjb25zdCBkdXJhdGlvbiA9IHRoaXMuaGFzQ29uZGl0aW9uVmFsdWUoY29uZGl0aW9uTmFtZSwgJ2R1cmF0aW9uJylcbiAgICAgIGlmICh0eXBlb2YgZHVyYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybiBkdXJhdGlvbiArICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yb3VuZHMnKVxuICAgICAgICB9IGVsc2UgaWYgKHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybiBkdXJhdGlvbiArICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uY29uZGl0aW9ucz8uW2NvbmRpdGlvbk5hbWVdPy5bZmllbGRdXG4gIH1cblxuICBhc3luYyB0b2dnbGVDb25kaXRpb24gKGNvbmRpdGlvbk5hbWUpIHtcbiAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKGNvbmRpdGlvbk5hbWUpXG4gICAgaWYgKCFjb25kaXRpb25WYWx1ZSkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oY29uZGl0aW9uTmFtZSlcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihjb25kaXRpb25OYW1lKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldENvbmRpdGlvbiAoXG4gICAgY29uZGl0aW9uTmFtZSxcbiAgICB7XG4gICAgICBmb3JjZVZhbHVlID0gZmFsc2UsXG4gICAgICBqdXN0VGhpcyA9IGZhbHNlLFxuICAgICAgcmVhbFRpbWUgPSBudWxsLFxuICAgICAgZHVyYXRpb24gPSBudWxsXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGlmICghZm9yY2VWYWx1ZSAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpKSB7XG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5lZmZlY3RzXG4gICAgICAgIC5maWx0ZXIoZWZmZWN0ID0+IGVmZmVjdC5mbGFncy5jb3JlPy5zdGF0dXNJZCA9PT0gY29uZGl0aW9uTmFtZSlcbiAgICAgICAgLm1hcChlZmZlY3QgPT4gZWZmZWN0LmlkKVxuICAgICAgY29uc3QgY3VzdG9tID0ge31cbiAgICAgIHN3aXRjaCAoY29uZGl0aW9uTmFtZSkge1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgICAgY3VzdG9tLmZsYWdzID0ge1xuICAgICAgICAgICAgY29yZToge1xuICAgICAgICAgICAgICBvdmVybGF5OiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgICAgY3VzdG9tLmZsYWdzID0ge1xuICAgICAgICAgICAgQ29DNzoge1xuICAgICAgICAgICAgICByZWFsVGltZTogdW5kZWZpbmVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGN1c3RvbS5kdXJhdGlvbiA9IHtcbiAgICAgICAgICAgIHJvdW5kczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2Vjb25kczogdW5kZWZpbmVkXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSB8fCByZWFsVGltZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGN1c3RvbS5mbGFncy5Db0M3LnJlYWxUaW1lID0gcmVhbFRpbWVcbiAgICAgICAgICAgIGN1c3RvbS5mbGFncyA9IHtcbiAgICAgICAgICAgICAgQ29DNzoge1xuICAgICAgICAgICAgICAgIHJlYWxUaW1lXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkdXJhdGlvbiAhPT0gbnVsbCAmJiB0eXBlb2YgZHVyYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGlmIChyZWFsVGltZSkge1xuICAgICAgICAgICAgICAgIGN1c3RvbS5kdXJhdGlvbi5yb3VuZHMgPSBkdXJhdGlvblxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1c3RvbS5kdXJhdGlvbi5zZWNvbmRzID0gZHVyYXRpb24gKiAzNjAwXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmIChlZmZlY3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBlZmZlY3QgPSBDT05GSUcuc3RhdHVzRWZmZWN0cy5maWx0ZXIoXG4gICAgICAgICAgZWZmZWN0ID0+IGVmZmVjdC5pZCA9PT0gY29uZGl0aW9uTmFtZVxuICAgICAgICApXG4gICAgICAgIGlmIChlZmZlY3QubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgY29uc3QgZWZmZWN0RGF0YSA9IG1lcmdlT2JqZWN0KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKGVmZmVjdFswXS5sYWJlbCksXG4gICAgICAgICAgICAgIGljb246IGVmZmVjdFswXS5pY29uLFxuICAgICAgICAgICAgICBmbGFnczoge1xuICAgICAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkOiBlZmZlY3RbMF0uaWRcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGRpc2FibGVkOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGN1c3RvbVxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCBzdXBlci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW2VmZmVjdERhdGFdKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRoaXMgZG9lc24ndCBleGlzdCBpbiBGb3VuZHJ5VlRUIEFjdGl2ZUVmZmVjdHM/XG4gICAgICAgICAgZm9yY2VWYWx1ZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VzdG9tLl9pZCA9IGVmZmVjdHNbMF1cbiAgICAgICAgYXdhaXQgc3VwZXIudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtjdXN0b21dKVxuICAgICAgICBmb3JjZVZhbHVlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2VWYWx1ZSB8fCAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0udmFsdWVgXTogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZTpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZHMgPSB7fVxuICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF0gPSB0cnVlXG4gICAgICAgICAgICBpZiAocmVhbFRpbWUgPT09IHRydWUgfHwgcmVhbFRpbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5yZWFsVGltZWBdID0gcmVhbFRpbWVcbiAgICAgICAgICAgICAgaWYgKGR1cmF0aW9uICE9PSBudWxsICYmIHR5cGVvZiBkdXJhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uZHVyYXRpb25gXSA9IGR1cmF0aW9uXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0ucmVhbFRpbWVgXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT1yZWFsVGltZWBdID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICAgICAgICAgIGZpZWxkcyxcbiAgICAgICAgICAgICAgICBgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS5kdXJhdGlvbmBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS4tPWR1cmF0aW9uYF0gPSBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZShmaWVsZHMpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBpZiAoIWp1c3RUaGlzKSB7XG4gICAgICAgIC8vIERvZXMgc2V0dGluZyB0aGUgY29uZGl0aW9uIGFsc28gdHJpZ2dlciBvdGhlciBhY3Rpb25zP1xuICAgICAgICAvLyAtIElmIEFjdGl2ZUVmZmVjdHMgYXJlIGFkZGVkIGhhc0NvbmRpdGlvblN0YXR1cyBmb3IgcmVjZW50bHkgYWRkZWQgY29uZGl0aW9ucyBtYXkgcmV0dXJuIGluY29ycmVjdGx5XG4gICAgICAgIHN3aXRjaCAoY29uZGl0aW9uTmFtZSkge1xuICAgICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5wcm9uZSlcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIXRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKSAmJlxuICAgICAgICAgICAgICAhdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuZGVhZClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Rva2VuID8gdGhpcy50b2tlbktleSA6IHRoaXMuaWRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBjb25DaGVjay50b01lc3NhZ2UoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxuICAgICAgICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdW5zZXRDb25kaXRpb24gKGNvbmRpdGlvbk5hbWUsIHsgZm9yY2VWYWx1ZSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGlmICghZm9yY2VWYWx1ZSAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpKSB7XG4gICAgICBjb25zdCBlZmZlY3RzID0gdGhpcy5lZmZlY3RzXG4gICAgICAgIC5maWx0ZXIoZWZmZWN0ID0+IGVmZmVjdC5mbGFncy5jb3JlPy5zdGF0dXNJZCA9PT0gY29uZGl0aW9uTmFtZSlcbiAgICAgICAgLm1hcChlZmZlY3QgPT4gZWZmZWN0LmlkKVxuICAgICAgaWYgKGVmZmVjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICBhd2FpdCBzdXBlci5kZWxldGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgZWZmZWN0cylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvcmNlVmFsdWUgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmb3JjZVZhbHVlIHx8ICFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycpKSB7XG4gICAgICBzd2l0Y2ggKGNvbmRpdGlvbk5hbWUpIHtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy51bmNvbnNjaW91czpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kczpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5wcm9uZTpcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgIFtgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS4tPXZhbHVlYF06IG51bGxcbiAgICAgICAgICB9KVxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgIFtgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS52YWx1ZWBdOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBUT0RPIDogY2hlY2sgaWYgZXZlciB1c2VkXG4gIGFzeW5jIHJlc2V0Q291bnRlciAoY291bnRlcikge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2NvdW50ZXJdOiAwIH0pXG4gIH1cblxuICBhc3luYyByZXNldERhaWx5U2FuaXR5ICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQnOiBNYXRoLmZsb29yKFxuICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSAvIDVcbiAgICAgICksXG4gICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyc6IDBcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGZpZ2h0aW5nU2tpbGxzICgpIHtcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICdza2lsbCcgJiYgdmFsdWUuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcpIHtcbiAgICAgICAgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0IGNsb3NlQ29tYmF0V2VhcG9ucyAoKSB7XG4gICAgY29uc3Qgd2VhcG9uTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3dlYXBvbicgJiYgIXZhbHVlLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLml0ZW1zLmdldCh2YWx1ZS5zeXN0ZW0uc2tpbGwubWFpbi5pZClcbiAgICAgICAgdmFsdWUuc3lzdGVtLnNraWxsLm1haW4udmFsdWUgPSBza2lsbCA/IHNraWxsLnZhbHVlIDogMFxuICAgICAgICB3ZWFwb25MaXN0LnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgd2VhcG9uTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHJldHVybiB3ZWFwb25MaXN0XG4gIH1cblxuICBnZXQgZmlyZWFybVNraWxscyAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnICYmIHZhbHVlLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0IHVzZXIgKCkge1xuICAgIC8vIGlzIHRoYXQgYWN0b3IgaW1wZXJzb25hbnRlZCBieSBhIHVzZXIgP1xuICAgIHJldHVybiBnYW1lLnVzZXJzLmZpbmQodXNlciA9PiB7XG4gICAgICBpZiAodXNlci5jaGFyYWN0ZXIpIHtcbiAgICAgICAgaWYgKHVzZXIuY2hhcmFjdGVyLmlkID09PSB0aGlzLmlkKSByZXR1cm4gdHJ1ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGdldCBkb2RnZVNraWxsICgpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0Rmlyc3RTa2lsbEJ5Q29DSUQoJ2kuc2tpbGwuZG9kZ2UnKVxuICAgIGlmIChza2lsbCkge1xuICAgICAgcmV0dXJuIHNraWxsXG4gICAgfVxuICAgIGNvbnN0IHNraWxsTGlzdCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuZG9kZ2UnKVxuICAgIClcbiAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCAhPT0gMCkgcmV0dXJuIHNraWxsTGlzdFswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgY3JlZGl0UmF0aW5nU2tpbGwgKCkge1xuICAgIGNvbnN0IHNraWxsID0gdGhpcy5nZXRGaXJzdFNraWxsQnlDb0NJRCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJylcbiAgICBpZiAoc2tpbGwpIHtcbiAgICAgIHJldHVybiBza2lsbFxuICAgIH1cbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmNyZWRpdC1yYXRpbmcnKVxuICAgIClcbiAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCAhPT0gMCkgcmV0dXJuIHNraWxsTGlzdFswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgY3RodWxodU15dGhvc1NraWxsICgpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0Rmlyc3RTa2lsbEJ5Q29DSUQoJ2kuc2tpbGwuY3RodWxodS1teXRob3MnKVxuICAgIGlmIChza2lsbCkge1xuICAgICAgcmV0dXJuIHNraWxsXG4gICAgfVxuICAgIGNvbnN0IHNraWxsTGlzdCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuY3RodWxodS1teXRob3MnKVxuICAgIClcbiAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCAhPT0gMCkgcmV0dXJuIHNraWxsTGlzdFswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgY3RodWxodU15dGhvcyAoKSB7XG4gICAgY29uc3QgQ00gPSB0aGlzLmN0aHVsaHVNeXRob3NTa2lsbFxuICAgIGlmIChDTSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBDTS52YWx1ZVxuICAgICAgaWYgKHZhbHVlKSByZXR1cm4gdmFsdWVcbiAgICAgIHJldHVybiBwYXJzZUludChDTS5zeXN0ZW0udmFsdWUpXG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgbXl0aG9zSGFyZGVuZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnKSB8fCBmYWxzZVxuICB9XG5cbiAgYXN5bmMgc2V0TXl0aG9zSGFyZGVuZWQgKCkge1xuICAgIGF3YWl0IHRoaXMuc2V0RmxhZygnQ29DNycsICdteXRob3NIYXJkZW5lZCcsIHRydWUpXG4gIH1cblxuICBnZXQgbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RmxhZygnQ29DNycsICdteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkJykgfHwgZmFsc2VcbiAgfVxuXG4gIGFzeW5jIGV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5ICgpIHtcbiAgICBhd2FpdCB0aGlzLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCcsIHRydWUpXG4gIH1cblxuICBnZXQgY3JlZGl0UmF0aW5nICgpIHtcbiAgICBjb25zdCBDUiA9IHRoaXMuY3JlZGl0UmF0aW5nU2tpbGxcbiAgICBpZiAoQ1IpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gQ1IudmFsdWVcbiAgICAgIGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlXG4gICAgICByZXR1cm4gcGFyc2VJbnQoQ1Iuc3lzdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgc3RhdGljIG1vbmV0YXJ5Rm9ybWF0IChmb3JtYXQsIHN5bWJvbCwgdmFsdWUpIHtcbiAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5sc2Q6XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKHZhbHVlIC8gMjQwKSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gMTIpICUgMjApICsgJy8nICsgKHZhbHVlICUgMTIpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLnJvbWFuOlxuICAgICAgICByZXR1cm4gKE1hdGguZmxvb3IodmFsdWUgLyA0MDApKSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gMTYpICUgMjUpICsgJy8nICsgKE1hdGguZmxvb3IodmFsdWUgLyA4KSAlIDIpICsgJy8nICsgKE1hdGguZmxvb3IodmFsdWUgLyA0KSAlIDIpICsgJy8nICsgKHZhbHVlICUgNClcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMuZGVjaW1hbExlZnQ6XG4gICAgICAgIHJldHVybiBzeW1ib2wgKyBOdW1iZXIodmFsdWUpLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCwgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSkucmVwbGFjZSgvXFwuMDAkLywgJycpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmRlY2ltYWxSaWdodDpcbiAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSkudG9Mb2NhbGVTdHJpbmcodW5kZWZpbmVkLCB7IG1pbmltdW1GcmFjdGlvbkRpZ2l0czogMiB9KS5yZXBsYWNlKC9cXC4wMCQvLCAnJykgKyAnICcgKyBzeW1ib2xcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMuaW50ZWdlckxlZnQ6XG4gICAgICAgIHJldHVybiBzeW1ib2wgKyBOdW1iZXIodmFsdWUpLnRvTG9jYWxlU3RyaW5nKClcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMuaW50ZWdlclJpZ2h0OlxuICAgICAgICByZXR1cm4gTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZygpICsgJyAnICsgc3ltYm9sXG4gICAgfVxuICAgIHJldHVybiAnMCdcbiAgfVxuXG4gIHN0YXRpYyBtb25ldGFyeVZhbHVlIChmb3JtYXQsIHZhbHVlcywgQ1IsIHR5cGUsIHZhbHVlKSB7XG4gICAgQ1IgPSBDUiB8fCAwXG4gICAgY29uc3Qgcm93ID0gdmFsdWVzLmZpbmQociA9PiAodHlwZW9mIHIubWluID09PSAnb2JqZWN0JyB8fCByLm1pbiA8PSBDUikgJiYgKHR5cGVvZiByLm1heCA9PT0gJ29iamVjdCcgfHwgci5tYXggPj0gQ1IpKVxuICAgIGlmICh0eXBlb2Ygcm93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygcm93W3R5cGVdICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygcm93W3ZhbHVlXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN3aXRjaCAoZm9ybWF0KSB7XG4gICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMubHNkOlxuICAgICAgICAgIHN3aXRjaCAocm93W3R5cGVdKSB7XG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5tdWx0aXBsaWVyOlxuICAgICAgICAgICAgICByZXR1cm4gMjQwICogQ1IgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy52YWx1ZTpcbiAgICAgICAgICAgICAgcmV0dXJuIDI0MCAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLnM6XG4gICAgICAgICAgICAgIHJldHVybiAxMiAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLmQ6XG4gICAgICAgICAgICAgIHJldHVybiAxICogcm93W3ZhbHVlXVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLnJvbWFuOlxuICAgICAgICAgIHN3aXRjaCAocm93W3R5cGVdKSB7XG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5tdWx0aXBsaWVyOlxuICAgICAgICAgICAgICByZXR1cm4gNDAwICogQ1IgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy52YWx1ZTpcbiAgICAgICAgICAgICAgcmV0dXJuIDQwMCAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLmRlbmFyaWk6XG4gICAgICAgICAgICAgIHJldHVybiAxNiAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLnF1aW5hcmlpOlxuICAgICAgICAgICAgICByZXR1cm4gOCAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLnNlc3RlcnRpaTpcbiAgICAgICAgICAgICAgcmV0dXJuIDQgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5hc3NlczpcbiAgICAgICAgICAgICAgcmV0dXJuIDEgKiByb3dbdmFsdWVdXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgc3dpdGNoIChyb3dbdHlwZV0pIHtcbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLm11bHRpcGxpZXI6XG4gICAgICAgICAgICAgIHJldHVybiBDUiAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICAgIGNhc2UgQ09DNy5tb25ldGFyeVR5cGVLZXlzLnZhbHVlOlxuICAgICAgICAgICAgICByZXR1cm4gMSAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBzcGVuZGluZ0xldmVsICgpIHtcbiAgICByZXR1cm4gQ29DQWN0b3IubW9uZXRhcnlWYWx1ZSh0aGlzLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHRoaXMuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcywgdGhpcy5jcmVkaXRSYXRpbmcsICdzcGVuZGluZ1R5cGUnLCAnc3BlbmRpbmdWYWx1ZScpXG4gIH1cblxuICBnZXQgY2FzaCAoKSB7XG4gICAgcmV0dXJuIENvQ0FjdG9yLm1vbmV0YXJ5VmFsdWUodGhpcy5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCB0aGlzLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMsIHRoaXMuY3JlZGl0UmF0aW5nLCAnY2FzaFR5cGUnLCAnY2FzaFZhbHVlJylcbiAgfVxuXG4gIGdldCBhc3NldHMgKCkge1xuICAgIHJldHVybiBDb0NBY3Rvci5tb25ldGFyeVZhbHVlKHRoaXMuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgdGhpcy5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzLCB0aGlzLmNyZWRpdFJhdGluZywgJ2Fzc2V0c1R5cGUnLCAnYXNzZXRzVmFsdWUnKVxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnKSBza2lsbExpc3QucHVzaCh2YWx1ZSlcbiAgICB9XG5cbiAgICBza2lsbExpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICByZXR1cm4gc2tpbGxMaXN0XG4gIH1cblxuICBnZXQgb3duZXJzICgpIHtcbiAgICByZXR1cm4gZ2FtZS51c2Vycy5maWx0ZXIoXG4gICAgICB1ID0+IHRoaXMudGVzdFVzZXJQZXJtaXNzaW9uKHUsICdPV05FUicpICYmICF1LmlzR01cbiAgICApXG4gIH1cblxuICBnZXQgcGxheWVyICgpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lcnMuZmlsdGVyKHUgPT4gdS5jaGFyYWN0ZXI/LmlkID09PSB0aGlzLmlkKVxuICB9XG5cbiAgZ2V0IGNoYXJhY3RlclVzZXIgKCkge1xuICAgIHJldHVybiAoXG4gICAgICBnYW1lLnVzZXJzLmNvbnRlbnRzLmZpbHRlcih1ID0+IHUuY2hhcmFjdGVyPy5pZCA9PT0gdGhpcy5pZClbMF0gfHwgbnVsbFxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHNldEhwICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICB2YWx1ZSA9IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4XG4gICAgfVxuICAgIGNvbnN0IGhlYWx0aEJlZm9yZSA9IHRoaXMuaHBcbiAgICBsZXQgZGFtYWdlVGFrZW5cbiAgICAvLyBpcyBoZWFsaW5nXG4gICAgaWYgKGlzTmFOKGhlYWx0aEJlZm9yZSkgfHwgdmFsdWUgPj0gaGVhbHRoQmVmb3JlKSB7XG4gICAgICBhd2FpdCB0aGlzLl9zZXRIcCh2YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGFtYWdlVGFrZW4gPSBoZWFsdGhCZWZvcmUgLSB2YWx1ZVxuICAgICAgYXdhaXQgdGhpcy5kZWFsRGFtYWdlKGRhbWFnZVRha2VuLCB7IGlnbm9yZUFybW9yOiB0cnVlIH0pXG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZSAoYW1vdW50LCBvcHRpb25zID0ge30pIHtcbiAgICAvLyBUT0RPOiBDaGFuZ2Ugb3B0aW9ucyB0byBsaXN0IG9mIHZhbHVlc1xuICAgIGNvbnN0IGFybW9yRGF0YSA9IG9wdGlvbnMuYXJtb3JcbiAgICAgID8gb3B0aW9ucy5hcm1vclxuICAgICAgOiB0aGlzLnN5c3RlbS5hdHRyaWJzLmFybW9yIC8vIGlmIHRoZXJlIGFybW9yIHZhbHVlIHBhc3NlZCB3ZSB1c2UgaXRcbiAgICBjb25zdCBncm9zc0RhbWFnZSA9IHBhcnNlSW50KGFtb3VudClcbiAgICBsZXQgYXJtb3JWYWx1ZSA9IDBcbiAgICBpZiAoIW9wdGlvbnMuaWdub3JlQXJtb3IpIHtcbiAgICAgIGlmIChhcm1vckRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgLy8gbm9wXG4gICAgICB9IGVsc2UgaWYgKENvQzdVdGlsaXRpZXMuaXNGb3JtdWxhKGFybW9yRGF0YSkpIHtcbiAgICAgICAgYXJtb3JWYWx1ZSA9IChhd2FpdCBuZXcgUm9sbChhcm1vckRhdGEpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihhcm1vckRhdGEpKSkge1xuICAgICAgICBhcm1vclZhbHVlID0gTnVtYmVyKGFybW9yRGF0YSlcbiAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihhcm1vckRhdGE/LnZhbHVlKSkpIHtcbiAgICAgICAgYXJtb3JWYWx1ZSA9IE51bWJlcihhcm1vckRhdGEudmFsdWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvclVuYWJsZVRvUGFyc2VBcm1vckZvcm11bGEnLCB7XG4gICAgICAgICAgICB2YWx1ZTogYXJtb3JEYXRhXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBuZXREYW1hZ2UgPSBncm9zc0RhbWFnZSAtIGFybW9yVmFsdWVcbiAgICBpZiAobmV0RGFtYWdlIDw9IDApIHJldHVybiAwXG4gICAgYXdhaXQgdGhpcy5fc2V0SHAodGhpcy5ocCAtIG5ldERhbWFnZSlcbiAgICBpZiAobmV0RGFtYWdlID49IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5kZWFkKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcycpKSB7XG4gICAgICAgIGlmICh0aGlzLmhwID09PSAwKSB7XG4gICAgICAgICAgaWYgKG5ldERhbWFnZSA+PSBNYXRoLmNlaWwodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXggLyAyKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4IC8gMikpIHtcbiAgICAgICAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soXG4gICAgICAgICAgICB0aGlzLmlzVG9rZW4gPyB0aGlzLnRva2VuS2V5IDogdGhpcy5pZFxuICAgICAgICAgIClcbiAgICAgICAgICBjb25DaGVjay50b01lc3NhZ2UoKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgaGFzTWFqb3JXb3VuZCA9IGZhbHNlXG4gICAgICAgIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4IC8gMikpIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgICAgICAgICBoYXNNYWpvcldvdW5kID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhhc01ham9yV291bmQgPSB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ocCA9PT0gMCkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgICAgIGlmIChoYXNNYWpvcldvdW5kKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldERhbWFnZVxuICB9XG5cbiAgZ2V0IG1ham9yV291bmQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgfVxuXG4gIGdldCBkeWluZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmR5aW5nKVxuICB9XG5cbiAgZ2V0IHVuY29uc2Npb3VzICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gIH1cblxuICBnZXQgZGVhZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmRlYWQpXG4gIH1cblxuICBnZXQgcHJvbmUgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5wcm9uZSlcbiAgfVxuXG4gIC8vIHN0YXRpYyB1cGRhdGVBY3RvciggYWN0b3IsIGRhdGFVcGRhdGUpe1xuICAvLyAgIGlmKCBnYW1lLnVzZXIuaXNHTSl7XG4gIC8vICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGB1cGRhdGluZyBhY3RvciAke2FjdG9yLm5hbWV9YCk7XG4gIC8vICAgICBjb25zdCBwcm9uZSA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLnByb25lXTtcbiAgLy8gICAgIGNvbnN0IHVuY29uc2Npb3VzID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMudW5jb25zY2lvdXNdO1xuICAvLyAgICAgY29uc3QgY3JpdGljYWxXb3VuZHMgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kc107XG4gIC8vICAgICBjb25zdCBkeWluZyA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLmR5aW5nXTtcbiAgLy8gICAgIGlmKCBwcm9uZSkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvclByb25lJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIHVuY29uc2Npb3VzKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yVW5jb25zY2lvdXMnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XG4gIC8vICAgICBpZiggY3JpdGljYWxXb3VuZHMpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JNYWpvcldvdW5kJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIGR5aW5nKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yRHlpbmcnLCB7YWN0b3I6IGFjdG9yLm5hbWV9KSk7XG4gIC8vICAgfVxuICAvLyAgIHJldHVybjtcbiAgLy8gfVxuXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JQcm9uZVwiOiBcInthY3Rvcn0gZmFsbCBwcm9uZVwiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9yVW5jb25zY2lvdXNcIjogXCJ7YWN0b3J9IGZhbGwgdW5jb25zY2lvdXNcIixcbiAgLy8gXCJDb0M3LkluZm9BY3Rvck1ham9yV291bmRcIjogXCJ7YWN0b3J9IGdldCBhIG1ham9yIHdvdW5kXCIsXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JEeWluZ1wiOiBcInthY29yfSBpcyBkeWluZ1wiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9ySW5qdXJpZWRcIjogXCJ7YWN0b3J9IGlzIGluanVyaWVkXCIsXG5cbiAgLy8gc3RhdGljIHVwZGF0ZVRva2VuKCBzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpe1xuICAvLyAgIGNvbnN0IGluanVyaWVkID0gZGF0YVVwZGF0ZT8uYWN0b3JEYXRhPy5mbGFncz8uQ29DNz8uaW5qdXJpZWQ7XG4gIC8vICAgaWYoIGluanVyaWVkKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9ySW5qdXJpZWQnLCB7YWN0b3I6IHRva2VuLm5hbWV9KSk7XG4gIC8vICAgcmV0dXJuO1xuICAvLyB9XG5cbiAgLy8gYXN5bmMgdXBkYXRlIChkYXRhID0ge30sIGNvbnRleHQgPSB7fSkge1xuICAvLyAgIGNvbnNvbGUubG9nKCc+Pj4+JywgZGF0YSwgY29udGV4dClcbiAgLy8gICBzdXBlci51cGRhdGUoZGF0YSwgY29udGV4dClcbiAgLy8gfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTkZJRywgQ09OU1QsIGR1cGxpY2F0ZSwgZ2FtZSwgbWVyZ2VPYmplY3QsIHVpICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIH0gZnJvbSAnLi9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBpc0N0cmxLZXkgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcblxuLyoqXG4gKiBBbGxvdyBmb3IgcGFyc2luZyBvZiBDb0M3IGVsZW1lbnRzIGluIGNoYXQgbWVzc2FnZSBhbmQgc2hlZXRzLlxuICogRm9ybWF0IGlzIDpcbiAqIEBjb2M3LlRZUEVfT0ZfUkVRVUVTVFtPUFRJT05TXXtESVNQTEFZRURfTkFNRX1cbiAqIFRZUEVfT0ZfUkVRVUVTVCA6XG4gKiAtIHNhbmxvc3M6IHRyaWdnZXIgYSBzYW4gY2hlY2ssIHVwb24gZmFpbHVyZSB3aWxsIHByb3Bvc2UgdG8gZGVkdWN0IHRoZSBjb3JyZXNwb25kaW5nIFNBTi5cbiAqIC0gY2hlY2s6IHRyaWdnZXIgYSBjaGVjayBkZXBlbmRpbmcgb24gdGhlIG9wdGlvbnMuXG4gKiAtIGl0ZW06IFRyaWdnZXIgYSB3ZWFwb24gY2hlY2tcbiAqIC0gZWZmZWN0OiBBZGQgYW4gZWZmZWN0XG4gKlxuICogT1BUSU9OUzogW10gPSBvcHRpb25hbFxuICogc2FubG9zczpcbiAqICAgc2FuTWF4OiBtYXggU0FOIGxvc3NcbiAqICAgc2FuTWluOiBtaW4gU0FOIGxvc3NcbiAqICAgc2FuUmVhc29uOiBSZWFzb25cbiAqIGNoZWNrOlxuICogICB0eXBlOiB0eXBlIG9mIGNoZWNrIChjaGFyYWN0ZXJpc3RpYywgc2tpbGwsIGF0dHJpYikuXG4gKiAgIG5hbWU6IG5hbWUgb2YgdGhlIHNraWxsL2NoYXJhY3RlcmlzdGljLlxuICogICBbZGlmZmljdWx0eV06ID8gKGJsaW5kKSwgMCAocmVndWxhciksICsgKGhhcmQpLCArKyAoZXh0cmVtZSksICsrKyAoY3JpdGljYWwpLlxuICogICBbbW9kaWZpZXJdOiAteCAoeCBwZW5hbHR5IGRpY2UpLCAreCAoeCBib251cyBkaWNlKSwgMCAobm8gbW9kaWZpZXIpLlxuICogICBbaWNvbl06IGljb24gdHUgdXNlIChmb250IGF3c29tZSkuXG4gKiAgIFtibGluZF06IHdpbGwgdHJpZ2dlciBhIGJsaW5kIHJvbGwuXG4gKlxuICogW0RJU1BMQVlFRF9OQU1FOiBuYW1lIHRvIGRpc3BsYXkuXVxuICpcbiAqIFRvIGFkZC9lZGl0IGEgbmV3IGxpbmsgdXBkYXRlIHRoZXNlIHNlY3Rpb25zXG4gKiAgIGZyb21Ecm9wRGF0YSA9PiBBZGQgYWxsIGRlZmF1bHRzIGhlcmVcbiAqICAgX2NyZWF0ZUxpbmsgPT4gQ3JlYXRlIEhUTUwgZnJvbSBkb2N1bWVudCBkYXRhXG4gKiAgIF9jcmVhdGVEb2N1bWVudExpbmsgPT4gQ3JlYXRlIEBsaW5rIGZyb20gZG9jdW1lbnQgZGF0YVxuICogICBfb25MaW5rQWN0b3JDbGljayA9PiBQcm9jZXNzIGxpbmtcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdMaW5rIHtcbiAgc3RhdGljIGdldCBDSEVDS19UWVBFICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgQ0hFQ0s6ICdjaGVjaycsXG4gICAgICBTQU5MT1NTOiAnc2FubG9zcycsXG4gICAgICBJVEVNOiAnaXRlbScsXG4gICAgICBFRkZFQ1Q6ICdlZmZlY3QnXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBMSU5LX1RZUEUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBDSEFSQUNURVJJU1RJQzogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgIEFUVFJJQlVURTogJ2F0dHJpYnV0ZScsXG4gICAgICBTS0lMTDogJ3NraWxsJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBpbml0ICgpIHtcbiAgICBDT05GSUcuQ29DN0xpbmsgPSB7XG4gICAgICBkb2N1bWVudENsYXNzOiBDb0M3TGlua1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBiaW5kRXZlbnRzSGFuZGxlciAoaHRtbCkge1xuICAgIGh0bWxcbiAgICAgIC5maW5kKCdhLmNvYzctbGluazpub3QoLmhhc2NvYzdsaW5rZWQpJylcbiAgICAgIC5vbignY2xpY2snLCBldmVudCA9PiBDb0M3TGluay5fb25MaW5rQ2xpY2soZXZlbnQpKVxuICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiBDb0M3TGluay5fb25EcmFnQ29DN0xpbmsoZXZlbnQpKVxuICAgICAgLmFkZENsYXNzKCdoYXNjb2M3bGlua2VkJylcbiAgfVxuXG4gIHN0YXRpYyBfbGlua0Zyb21FdmVudCAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGkgPSBhLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWxpbmstaWNvbl0nKVxuICAgIGNvbnN0IGRhdGEgPSBkdXBsaWNhdGUoYS5kYXRhc2V0KVxuXG4gICAgY29uc3Qgb2xkVHlwZSA9IGRhdGEudHlwZVxuXG4gICAgZGF0YS50eXBlID0gJ0NvQzdMaW5rJ1xuICAgIGRhdGEuaWNvbiA9IG51bGxcblxuICAgIGlmIChvbGRUeXBlKSB7XG4gICAgICBkYXRhLmxpbmtUeXBlID0gb2xkVHlwZVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGRhdGEub2JqZWN0ICYmXG4gICAgICAodHlwZW9mIGRhdGEub2JqZWN0ID09PSAnc3RyaW5nJyB8fCBkYXRhLm9iamVjdCBpbnN0YW5jZW9mIFN0cmluZylcbiAgICApIHtcbiAgICAgIGRhdGEub2JqZWN0ID0gSlNPTi5wYXJzZShkYXRhLm9iamVjdClcbiAgICAgIC8vIGRhdGEubGlua1R5cGUgPSBDb0M3TGluay5MSU5LX1RZUEUuRUZGRUNUXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgaS5kYXRhc2V0ICYmXG4gICAgICBpLmRhdGFzZXQubGlua0ljb24gJiZcbiAgICAgIGkuZGF0YXNldC5saW5rSWNvbiAhPT0gJ2ZhcyBmYS1kaWNlJ1xuICAgICkge1xuICAgICAgZGF0YS5pY29uID0gaS5kYXRhc2V0LmxpbmtJY29uXG4gICAgfVxuICAgIGRhdGEuZGlzcGxheU5hbWUgPSBhLmRhdGFzZXQuZGlzcGxheU5hbWUgPyBhLmlubmVyVGV4dCA6IG51bGxcbiAgICBpZiAoZGF0YS5kaWZmaWN1bHR5KSB7XG4gICAgICBkYXRhLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KGRhdGEuZGlmZmljdWx0eSlcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIHN0YXRpYyBfb25EcmFnQ29DN0xpbmsgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YSA9IENvQzdMaW5rLl9saW5rRnJvbUV2ZW50KGV2ZW50KVxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGhlbHBlciBmdW5jdGlvbiB0byBoYW5kbGUgb2J0YWluaW5nIHRoZSByZWxldmFudCBEb2N1bWVudCBmcm9tIGRyb3BwZWQgZGF0YSBwcm92aWRlZCB2aWEgYSBEYXRhVHJhbnNmZXIgZXZlbnQuXG4gICAqIFRoZSBkcm9wcGVkIGRhdGEgY291bGQgaGF2ZTpcbiAgICogMS4gQSBkYXRhIG9iamVjdCBleHBsaWNpdGx5IHByb3ZpZGVkXG4gICAqIEBtZW1iZXJvZiBDbGllbnREb2N1bWVudE1peGluXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhICAgICAgICAgICBUaGUgZGF0YSBvYmplY3QgZXh0cmFjdGVkIGZyb20gYSBEYXRhVHJhbnNmZXIgZXZlbnRcbiAgICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgICAgICAgIEFkZGl0aW9uYWwgb3B0aW9ucyB3aGljaCBhZmZlY3QgZHJvcCBkYXRhIGJlaGF2aW9yXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gICBUaGUgcmVzb2x2ZWQgRG9jdW1lbnRcbiAgICogQHRocm93cyBJZiBhIERvY3VtZW50IGNvdWxkIG5vdCBiZSByZXRyaWV2ZWQgZnJvbSB0aGUgcHJvdmlkZWQgZGF0YS5cbiAgICovXG4gIHN0YXRpYyBhc3luYyBmcm9tRHJvcERhdGEgKGRhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGNscyA9IG5ldyBDb0M3TGluaygpXG4gICAgY2xzLm9iamVjdCA9IG1lcmdlT2JqZWN0KHtcbiAgICAgIHR5cGU6ICdDb0M3TGluaycsXG4gICAgICBjaGVjazogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSyxcbiAgICAgIGxpbmtUeXBlOiBDb0M3TGluay5MSU5LX1RZUEUuU0tJTEwsXG4gICAgICBkaWZmaWN1bHR5OiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIsXG4gICAgICBtb2RpZmllcjogMCxcbiAgICAgIG9iamVjdDoge1xuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVmZmVjdE5ldycpLFxuICAgICAgICBpY29uOiAnaWNvbnMvc3ZnL2F1cmEuc3ZnJyxcbiAgICAgICAgY2hhbmdlczogW11cbiAgICAgIH1cbiAgICB9LCBkYXRhKVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnbmFtZScsICdkaXNwbGF5TmFtZScsICdpY29uJywgJ2lkJywgJ3BhY2snLCAnc2FuTWluJywgJ3Nhbk1heCcsICdzYW5SZWFzb24nXSkge1xuICAgICAgY2xzLm9iamVjdFtrZXldID0gY2xzLm9iamVjdFtrZXldID8/ICcnXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2xzLm9iamVjdC5vYmplY3QuaWNvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGNscy5vYmplY3Qub2JqZWN0LmV4dGVybmFsICE9PSAndW5kZWZpbmVkJyAmJiBbJ2h0dHAnLCAnaHR0cHMnXS5pbmNsdWRlcyhjbHMub2JqZWN0Lm9iamVjdC5leHRlcm5hbCkpIHtcbiAgICAgIGNscy5vYmplY3Qub2JqZWN0Lmljb24gPSBjbHMub2JqZWN0Lm9iamVjdC5leHRlcm5hbCArICc6Ly8nICsgY2xzLm9iamVjdC5vYmplY3QuaWNvblxuICAgIH1cbiAgICBjbHMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICByZXR1cm4gY2xzXG4gIH1cblxuICBzdGF0aWMgX2NyZWF0ZUxpbmsgKG1hdGNoKSB7XG4gICAgY29uc3QgbmFtZSA9IG1hdGNoWzRdID8/IHVuZGVmaW5lZFxuICAgIGNvbnN0IG9wdGlvbnMgPSBtYXRjaFszXSA/PyB1bmRlZmluZWRcbiAgICBjb25zdCB0eXBlID0gbWF0Y2hbMl0gPz8gdW5kZWZpbmVkXG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2xzOiBbJ2NvYzctbGluayddLFxuICAgICAgZGF0YXNldDogeyBjaGVjazogdHlwZSB9LFxuICAgICAgaWNvbjogbnVsbCxcbiAgICAgIGJsaW5kOiBmYWxzZSxcbiAgICAgIG5hbWVcbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QpIHtcbiAgICAgIGRhdGEuZWZmZWN0ID0gSlNPTi5wYXJzZShvcHRpb25zKVxuICAgICAgZGF0YS5kYXRhc2V0Lm9iamVjdCA9IG9wdGlvbnNcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5lZmZlY3QuaWNvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRhdGEuZWZmZWN0LmV4dGVybmFsICE9PSAndW5kZWZpbmVkJyAmJiBbJ2h0dHAnLCAnaHR0cHMnXS5pbmNsdWRlcyhkYXRhLmVmZmVjdC5leHRlcm5hbCkpIHtcbiAgICAgICAgZGF0YS5lZmZlY3QuaWNvbiA9IGRhdGEuZWZmZWN0LmV4dGVybmFsICsgJzovLycgKyBkYXRhLmVmZmVjdC5pY29uXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IG1hdGNoZXMgPSBvcHRpb25zLm1hdGNoQWxsKC9bXixdKy9naSlcbiAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgQXJyYXkuZnJvbShtYXRjaGVzKSkge1xuICAgICAgICBsZXQgW2tleSwgdmFsdWVdID0gbWF0Y2hbMF0uc3BsaXQoJzonKVxuICAgICAgICBpZiAoa2V5ID09PSAnaWNvbicpIHtcbiAgICAgICAgICBkYXRhLmljb24gPSB2YWx1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChrZXkgPT09ICdibGluZCcgJiYgdHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHZhbHVlID0gdHJ1ZVxuICAgICAgICAgIGRhdGEuYmxpbmQgPSB0cnVlICYmIFtDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLXS5pbmNsdWRlcyh0eXBlLnRvTG93ZXJDYXNlKCkpXG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5kYXRhc2V0W2tleV0gPSB2YWx1ZVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkYXRhLmRhdGFzZXQuaWNvbiAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRhdGEuZGF0YXNldC5leHRlcm5hbCAhPT0gJ3VuZGVmaW5lZCcgJiYgWydodHRwJywgJ2h0dHBzJ10uaW5jbHVkZXMoZGF0YS5kYXRhc2V0LmV4dGVybmFsKSkge1xuICAgICAgICBkYXRhLmRhdGFzZXQuaWNvbiA9IGRhdGEuZGF0YXNldC5leHRlcm5hbCArICc6Ly8nICsgZGF0YS5kYXRhc2V0Lmljb25cbiAgICAgICAgZGF0YS5pY29uID0gZGF0YS5kYXRhc2V0Lmljb25cbiAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgdGl0bGVcbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcoZGF0YS5kYXRhc2V0LmRpZmZpY3VsdHkpXG5cbiAgICBzd2l0Y2ggKHR5cGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLOiB7XG4gICAgICAgIGxldCBodW1hbk5hbWUgPSBkYXRhLmRhdGFzZXQubmFtZVxuICAgICAgICBpZiAoWydhdHRyaWJ1dGVzJywgJ2F0dHJpYnV0ZScsICdhdHRyaWInLCAnYXR0cmlicyddLmluY2x1ZGVzKGRhdGEuZGF0YXNldC50eXBlPy50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIGlmIChkYXRhLmRhdGFzZXQubmFtZSA9PT0gJ2xjaycpIHtcbiAgICAgICAgICAgIGh1bWFuTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRhdGEuZGF0YXNldC5uYW1lID09PSAnc2FuJykge1xuICAgICAgICAgICAgaHVtYW5OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChbJ2NoYXJhYycsICdjaGFyJywgJ2NoYXJhY3RlcmlzdGljJywgJ2NoYXJhY3RlcmlzdGljcyddLmluY2x1ZGVzKGRhdGEuZGF0YXNldC50eXBlPy50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIGh1bWFuTmFtZSA9IENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhkYXRhLmRhdGFzZXQubmFtZSk/LmxhYmVsXG4gICAgICAgIH1cbiAgICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7IWRhdGEuZGF0YXNldC5kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHshZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBodW1hbk5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1M6XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rU2FuTG9zcyR7IWRhdGEuZGF0YXNldC5kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHshZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBzYW5NaW46IGRhdGEuZGF0YXNldC5zYW5NaW4sXG4gICAgICAgICAgICBzYW5NYXg6IGRhdGEuZGF0YXNldC5zYW5NYXhcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLklURU06XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rSXRlbSR7IWRhdGEuZGF0YXNldC5kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHshZGF0YS5kYXRhc2V0Lm1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eSxcbiAgICAgICAgICAgIG1vZGlmaWVyOiBkYXRhLmRhdGFzZXQubW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBkYXRhLmRhdGFzZXQubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUOlxuICAgICAgICB0aXRsZSA9IGRhdGEuZWZmZWN0LmxhYmVsXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKCFuYW1lKSB7XG4gICAgICBkYXRhLm5hbWUgPSB0aXRsZVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhLmRhdGFzZXQuZGlzcGxheU5hbWUgPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGEudGl0bGUgPSBnYW1lLnVzZXIuaXNHTSA/IGRhdGEubmFtZSA6IHRpdGxlXG4gICAgYS5jbGFzc0xpc3QuYWRkKC4uLmRhdGEuY2xzKVxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuZGF0YXNldCkpIHtcbiAgICAgIGEuZGF0YXNldFtrXSA9IHZcbiAgICB9XG4gICAgYS5kcmFnZ2FibGUgPSB0cnVlXG4gICAgZGF0YS5pY29uID0gZGF0YS5pY29uID8/IGRhdGEuZWZmZWN0Py5pY29uID8/ICdmYXMgZmEtZGljZSdcbiAgICAvLyBjaGVjayBpZiBpdCdzIGFuIGltYWdlIG9yIGFuIGljb25cbiAgICBpZiAoZGF0YS5pY29uLmluY2x1ZGVzKCdcXFxcJykgfHwgZGF0YS5pY29uLmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGRhdGEuaW1nID0gZGF0YS5pY29uXG4gICAgfVxuICAgIGlmIChkYXRhLmJsaW5kKSB7XG4gICAgICBhLmlubmVySFRNTCArPSAnPGkgY2xhc3M9XCJmYXMgZmEtZXllLXNsYXNoXCI+PC9pPidcbiAgICB9XG4gICAgaWYgKGRhdGEuaW1nKSB7XG4gICAgICBhLmlubmVySFRNTCArPSBgPGltZyBkYXRhLWxpbmstaWNvbj1cIiR7ZGF0YS5pY29ufVwiIHNyYz1cIiR7ZGF0YS5pbWd9XCI+YFxuICAgIH0gZWxzZSB7XG4gICAgICBhLmlubmVySFRNTCArPSBgPGkgZGF0YS1saW5rLWljb249XCIke2RhdGEuaWNvbn1cIiBjbGFzcz1cImxpbmstaWNvbiAke2RhdGEuaWNvbn1cIj48L2k+YFxuICAgIH1cbiAgICBhLmlubmVySFRNTCArPSBgPHNwYW4+JHtkYXRhLm5hbWV9PC9zcGFuPmBcblxuICAgIHJldHVybiBhXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgY29udGVudCBsaW5rIGZvciB0aGlzIGRvY3VtZW50LlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnREYXRhICAgICAgICAgICAgICAgICAgICAgVGhlIHBhcnNlZCBvYmplY3Qgb2YgZGF0YSBwcm92aWRlZCBieSB0aGUgZHJvcCB0cmFuc2ZlciBldmVudC5cbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXSAgICAgICAgICAgICAgICAgICAgIEFkZGl0aW9uYWwgb3B0aW9ucyB0byBjb25maWd1cmUgbGluayBnZW5lcmF0aW9uLlxuICAgKiBAcGFyYW0ge0NsaWVudERvY3VtZW50fSBbb3B0aW9ucy5yZWxhdGl2ZVRvXSAgQSBkb2N1bWVudCB0byBnZW5lcmF0ZSBhIGxpbmsgcmVsYXRpdmUgdG8uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0aW9ucy5sYWJlbF0gICAgICAgICAgICAgICBBIGN1c3RvbSBsYWJlbCB0byB1c2UgaW5zdGVhZCBvZiB0aGUgZG9jdW1lbnQncyBuYW1lLlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF9jcmVhdGVEb2N1bWVudExpbmsgKGV2ZW50RGF0YSwgeyByZWxhdGl2ZVRvLCBsYWJlbCB9ID0ge30pIHtcbiAgICBpZiAoIWV2ZW50RGF0YS5jaGVjaykge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIHN3aXRjaCAoZXZlbnREYXRhLmNoZWNrLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSzoge1xuICAgICAgICAvLyBAY29jNy5jaGVja1t0eXBlOmNoYXJhYyxuYW1lOlNUUixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU1RSIGNoZWNrKC0xKX1cbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbYmxpbmQsdHlwZTpjaGFyYWN0ZXJpc3RpYyxuYW1lOnN0cixkaWZmaWN1bHR5OjEsbW9kaWZpZXI6MCxpY29uOmZhIGZhLWxpbmtde1N0cmVuZ3RofVxuICAgICAgICAvLyBAY29jNy5jaGVja1tibGluZCx0eXBlOmF0dHJpYnV0ZSxuYW1lOmxjayxkaWZmaWN1bHR5OjEsbW9kaWZpZXI6MCxpY29uOmZhIGZhLWxpbmtde0x1Y2t9XG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW2JsaW5kLHR5cGU6c2tpbGwsbmFtZTpMYXcsZGlmZmljdWx0eToxLG1vZGlmaWVyOjAsaWNvbjpmYSBmYS1saW5rXXtMYXd9XG4gICAgICAgIGlmICghZXZlbnREYXRhLmxpbmtUeXBlIHx8ICFldmVudERhdGEubmFtZSkge1xuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgICB9XG4gICAgICAgIGxldCBvcHRpb25zID0gYCR7ZXZlbnREYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ310eXBlOiR7ZXZlbnREYXRhLmxpbmtUeXBlfSxuYW1lOiR7ZXZlbnREYXRhLm5hbWV9YFxuICAgICAgICBpZiAodHlwZW9mIGV2ZW50RGF0YS5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJyAmJiBldmVudERhdGEuZGlmZmljdWx0eSAhPT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtldmVudERhdGEuZGlmZmljdWx0eX1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBldmVudERhdGEubW9kaWZpZXIgIT09ICd1bmRlZmluZWQnICYmIGV2ZW50RGF0YS5tb2RpZmllciAhPT0gMCkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxtb2RpZmllcjoke2V2ZW50RGF0YS5tb2RpZmllcn1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pY29uKSB7XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBldmVudERhdGEuaWNvbi5tYXRjaCgvXihodHRwcz8pOlxcL1xcLyguKykkLylcbiAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxleHRlcm5hbDoke3BhcnRzWzFdfSxpY29uOiR7cGFydHNbMl19YFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsaWNvbjoke2V2ZW50RGF0YS5pY29ufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5wYWNrKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHBhY2s6JHtldmVudERhdGEucGFja31gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pZCkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxpZDoke2V2ZW50RGF0YS5pZH1gXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuY2hlY2tbJHtvcHRpb25zfV1gXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gZXZlbnREYXRhLmRpc3BsYXlOYW1lID8/IChsYWJlbCA/PyAnJylcbiAgICAgICAgaWYgKGRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgbGluayArPSBgeyR7ZGlzcGxheU5hbWV9fWBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlua1xuICAgICAgfVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TUzoge1xuICAgICAgICAvLyBAY29jNy5zYW5sb3NzW3Nhbk1heDoxRDYsc2FuTWluOjEsZGlmZmljdWx0eTorKyxtb2RpZmllcjotMV17SGFyZCBTYW4gTG9zcyAoLTEpIDEvMUQ2fVxuICAgICAgICBpZiAoIWV2ZW50RGF0YS5zYW5NYXggfHwgIWV2ZW50RGF0YS5zYW5NaW4pIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2V2ZW50RGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9c2FuTWF4OiR7ZXZlbnREYXRhLnNhbk1heH0sc2FuTWluOiR7ZXZlbnREYXRhLnNhbk1pbn1gXG4gICAgICAgIGlmIChldmVudERhdGEuc2FuUmVhc29uKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHNhblJlYXNvbjoke2V2ZW50RGF0YS5zYW5SZWFzb259YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuZGlmZmljdWx0eSAmJiBldmVudERhdGEuZGlmZmljdWx0eSAhPT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGRpZmZpY3VsdHk6JHtldmVudERhdGEuZGlmZmljdWx0eX1gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5tb2RpZmllciAmJiBldmVudERhdGEubW9kaWZpZXIgIT09IDApIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHtldmVudERhdGEubW9kaWZpZXJ9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuaWNvbikge1xuICAgICAgICAgIGNvbnN0IHBhcnRzID0gZXZlbnREYXRhLmljb24ubWF0Y2goL14oaHR0cHM/KTpcXC9cXC8oLispJC8pXG4gICAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsZXh0ZXJuYWw6JHtwYXJ0c1sxXX0saWNvbjoke3BhcnRzWzJdfWBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGljb246JHtldmVudERhdGEuaWNvbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3LnNhbmxvc3NbJHtvcHRpb25zfV1gXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gZXZlbnREYXRhLmRpc3BsYXlOYW1lID8/IChsYWJlbCA/PyAnJylcbiAgICAgICAgaWYgKGRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgbGluayArPSBgeyR7ZGlzcGxheU5hbWV9fWBcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlua1xuICAgICAgfVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTToge1xuICAgICAgICAvLyBAY29jNy5pdGVtW3R5cGU6b3B0aW9uYWwsbmFtZTpTaG90Z3VuLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBTaGl0Z3VuIGNoZWNrKC0xKX1cbiAgICAgICAgaWYgKCFldmVudERhdGEubmFtZSkge1xuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgICB9XG4gICAgICAgIGxldCBvcHRpb25zID0gYCR7ZXZlbnREYXRhLmJsaW5kID8gJ2JsaW5kLCcgOiAnJ31uYW1lOiR7ZXZlbnREYXRhLm5hbWV9YFxuICAgICAgICBpZiAoZXZlbnREYXRhLmljb24pIHtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IGV2ZW50RGF0YS5pY29uLm1hdGNoKC9eKGh0dHBzPyk6XFwvXFwvKC4rKSQvKVxuICAgICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGV4dGVybmFsOiR7cGFydHNbMV19LGljb246JHtwYXJ0c1syXX1gXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxpY29uOiR7ZXZlbnREYXRhLmljb259YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLnBhY2spIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAscGFjazoke2V2ZW50RGF0YS5wYWNrfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLmlkKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLGlkOiR7ZXZlbnREYXRhLmlkfWBcbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5pdGVtWyR7b3B0aW9uc31dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVDoge1xuICAgICAgICAvLyBAY29jNy5lZmZlY3Rbe1wibGFiZWxcIjpcIkthcG93XCIsXCJpY29uXCI6XCJpY29ucy9zdmcvYXVyYS5zdmdcIixcImNoYW5nZXNcIjpbe1wia2V5XCI6XCJzeXN0ZW0udW5rbm93bi50ZXN0XCIsXCJtb2RlXCI6MixcInZhbHVlXCI6XCI1XCJ9XSxcInRpbnRcIjpcIiNlOTE2MTZcIixcImR1cmF0aW9uXCI6e1wic2Vjb25kc1wiOm51bGwsXCJyb3VuZHNcIjo2LFwidHVybnNcIjpudWxsfX1de0thcG93aW5nfVxuICAgICAgICAvLyBjb25zdCBlZmZlY3REYXRhID0gZm91bmRyeS51dGlscy5kZWVwQ2xvbmUoZXZlbnREYXRhKVxuICAgICAgICAvLyBpZiAoIXRoaXMuZWZmZWN0SXNUZW1wKSBkZWxldGUgZWZmZWN0RGF0YS5kdXJhdGlvblxuICAgICAgICAvLyBpZiAoZWZmZWN0RGF0YS5jaGFuZ2VzPy5sZW5ndGggPT09IDApIGRlbGV0ZSBlZmZlY3REYXRhLmNoYW5nZXNcbiAgICAgICAgLy8gaWYgKCFlZmZlY3REYXRhLmRpc2FibGVkKSBkZWxldGUgZWZmZWN0RGF0YS5kaXNhYmxlZFxuICAgICAgICAvLyBpZiAoIWVmZmVjdERhdGEudGludCkgZGVsZXRlIGVmZmVjdERhdGEudGludFxuICAgICAgICBjb25zdCBwYXJ0cyA9IGV2ZW50RGF0YS5vYmplY3QuaWNvbi5tYXRjaCgvXihodHRwcz8pOlxcL1xcLyguKykkLylcbiAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgZXZlbnREYXRhLm9iamVjdC5leHRlcm5hbCA9IHBhcnRzWzFdXG4gICAgICAgICAgZXZlbnREYXRhLm9iamVjdC5pY29uID0gcGFydHNbMl1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5lZmZlY3RbJHtKU09OLnN0cmluZ2lmeShldmVudERhdGEub2JqZWN0KX1dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICc/J1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkxpbmtBY3RvckNsaWNrIChhY3Rvciwgb3B0aW9ucywgeyBzaGlmdEtleSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIHN3aXRjaCAob3B0aW9ucy5jaGVjaykge1xuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLOlxuICAgICAgICBpZiAoWydjaGFyYWMnLCAnY2hhcicsICdjaGFyYWN0ZXJpc3RpYycsICdjaGFyYWN0ZXJpc3RpY3MnXS5pbmNsdWRlcyhvcHRpb25zLmxpbmtUeXBlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdG9yLmNoYXJhY3RlcmlzdGljQ2hlY2soXG4gICAgICAgICAgICBvcHRpb25zLm5hbWUsXG4gICAgICAgICAgICBzaGlmdEtleSxcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFsnc2tpbGwnXS5pbmNsdWRlcyhvcHRpb25zLmxpbmtUeXBlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdG9yLnNraWxsQ2hlY2sob3B0aW9ucywgc2hpZnRLZXksIG9wdGlvbnMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXS5pbmNsdWRlcyhvcHRpb25zLmxpbmtUeXBlLnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICAgICAgcmV0dXJuIGFjdG9yLmF0dHJpYnV0ZUNoZWNrKG9wdGlvbnMubmFtZSwgc2hpZnRLZXksIG9wdGlvbnMpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1M6XG4gICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUoYWN0b3IuYWN0b3JLZXksIG9wdGlvbnMsIHtcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogc2hpZnRLZXlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNOlxuICAgICAgICByZXR1cm4gYWN0b3Iud2VhcG9uQ2hlY2sob3B0aW9ucywgc2hpZnRLZXkpXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1Q6XG4gICAgICAgIGF3YWl0IGFjdG9yLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbe1xuICAgICAgICAgIGxhYmVsOiBvcHRpb25zLm9iamVjdC5sYWJlbCxcbiAgICAgICAgICBpY29uOiBvcHRpb25zLm9iamVjdC5pY29uLFxuICAgICAgICAgIGNoYW5nZXM6IG9wdGlvbnMub2JqZWN0LmNoYW5nZXNcbiAgICAgICAgfV0pXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHRvQ2hhdE1lc3NhZ2UgKG9wdGlvbnMpIHtcbiAgICBjb25zdCBvcHRpb24gPSB7XG4gICAgICBzcGVha2VyOiB7XG4gICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgbWVzc2FnZVxuICAgIGNvbnN0IGxpbmsgPSAobmV3IENvQzdMaW5rKCkpLl9jcmVhdGVEb2N1bWVudExpbmsob3B0aW9ucylcbiAgICBpZiAob3B0aW9ucy5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QpIHtcbiAgICAgIG1lc3NhZ2UgPSBgPGRpdiBjbGFzcz1cImVmZmVjdC1tZXNzYWdlXCI+JHtsaW5rfTwvZGl2PmBcbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZUNoZWNrUmVxdWVzdGVkV2FpdCcsIHtcbiAgICAgICAgY2hlY2s6IGxpbmtcbiAgICAgIH0pXG4gICAgfVxuICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShudWxsLCBtZXNzYWdlLCBvcHRpb24pXG4gIH1cblxuICBzdGF0aWMgdG9XaGlzcGVyTWVzc2FnZSAob3B0aW9ucywgYWN0b3JzKSB7XG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3RvcnMpIHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IHtcbiAgICAgICAgc3BlYWtlcjoge1xuICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICB9LFxuICAgICAgICB3aGlzcGVyOiBhY3Rvci5vd25lcnMubWFwKGEgPT4gYS5pZClcbiAgICAgIH1cbiAgICAgIGxldCBtZXNzYWdlXG4gICAgICBjb25zdCBsaW5rID0gKG5ldyBDb0M3TGluaygpKS5fY3JlYXRlRG9jdW1lbnRMaW5rKG9wdGlvbnMpXG4gICAgICBpZiAob3B0aW9ucy5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QpIHtcbiAgICAgICAgbWVzc2FnZSA9IGA8ZGl2IGNsYXNzPVwiZWZmZWN0LW1lc3NhZ2VcIj4ke2xpbmt9PC9kaXY+YFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZVRhcmdldENoZWNrUmVxdWVzdGVkJywge1xuICAgICAgICAgIG5hbWU6IGFjdG9yLm5hbWUsXG4gICAgICAgICAgY2hlY2s6IGxpbmtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShudWxsLCBtZXNzYWdlLCBvcHRpb24pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYSBjaGVjayB3aGVuIGEgbGluayBpcyBjbGlja2VkLlxuICAgKiBEZXBlbmRpbmcgdGhlIG9yaWdpblxuICAgKiBAcGFyYW0geyp9IGV2ZW50XG4gICAqXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgX29uTGlua0NsaWNrIChldmVudCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBDb0M3TGluay5fbGlua0Zyb21FdmVudChldmVudClcblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKGlzQ3RybEtleShldmVudCkpIHtcbiAgICAgICAgQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGlmIChjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubGVuZ3RoKSB7XG4gICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgY2FudmFzLnRva2Vucy5jb250cm9sbGVkKSB7XG4gICAgICAgICAgQ29DN0xpbmsuX29uTGlua0FjdG9yQ2xpY2sodG9rZW4uYWN0b3IsIG9wdGlvbnMsIHsgc2hpZnRLZXk6IGV2ZW50LnNoaWZ0S2V5IH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgICBjb25zdCBhY3RvciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXJBY3RvcihzcGVha2VyKVxuICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKGFjdG9yLCBvcHRpb25zLCB7IHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIENvQzdMaW5rLnRvQ2hhdE1lc3NhZ2Uob3B0aW9ucylcbiAgICAgIHJldHVyblxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgICBsZXQgYWN0b3IgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3Ioc3BlYWtlcilcbiAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGEgPT4gKGEub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gYS5vd25lcnNoaXAuZGVmYXVsdCkgPj0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PQlNFUlZFUilcbiAgICAgICAgaWYgKGFjdG9ycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBhY3RvciA9IGFjdG9yc1swXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgQ29DN0xpbmsuX29uTGlua0FjdG9yQ2xpY2soYWN0b3IsIG9wdGlvbnMsIHsgc2hpZnRLZXk6IGV2ZW50LnNoaWZ0S2V5IH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgIH1cbiAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob0NvbnRyb2xsZWRBY3RvcicpKVxuICB9XG5cbiAgc2V0VmFsdWUgKGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLm9iamVjdFtrZXldID0gdmFsdWVcbiAgfVxuXG4gIGdldCBsaW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5fY3JlYXRlRG9jdW1lbnRMaW5rKHRoaXMub2JqZWN0KVxuICB9XG5cbiAgZ2V0IGlkICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuaWRcbiAgfVxuXG4gIGdldCBwYWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QucGFja1xuICB9XG5cbiAgZ2V0IGNoZWNrVHlwZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmNoZWNrXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmRpZmZpY3VsdHlcbiAgfVxuXG4gIGdldCBpY29uICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuaWNvblxuICB9XG5cbiAgZ2V0IGRpc3BsYXlOYW1lICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuZGlzcGxheU5hbWVcbiAgfVxuXG4gIGdldCBtb2RpZmllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lm1vZGlmaWVyXG4gIH1cblxuICBnZXQgbGlua1R5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5saW5rVHlwZVxuICB9XG5cbiAgZ2V0IHNhbk1pbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnNhbk1pblxuICB9XG5cbiAgZ2V0IHNhbk1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnNhbk1heFxuICB9XG5cbiAgZ2V0IHNhblJlYXNvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnNhblJlYXNvblxuICB9XG5cbiAgZ2V0IGVmZmVjdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lm9iamVjdFxuICB9XG5cbiAgZ2V0IGNoZWNrTmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuaXNDaGFyYWN0ZXJpc3RpY0NoZWNrKSB7XG4gICAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKVxuICAgICAgcmV0dXJuIGNoYXJhY3RlcmlzdGljcy5maW5kKGMgPT4gYy5rZXkgPT09IHRoaXMub2JqZWN0Lm5hbWUgfHwgYy5zaG9ydE5hbWUgPT09IHRoaXMub2JqZWN0Lm5hbWUgfHwgYy5sYWJlbCA9PT0gdGhpcy5vYmplY3QubmFtZSk/LmtleSA/PyAnJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vYmplY3QubmFtZVxuICB9XG5cbiAgZ2V0IGlzQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS1xuICB9XG5cbiAgZ2V0IGlzQ2hhcmFjdGVyaXN0aWNDaGVjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5saW5rVHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLkNIQVJBQ1RFUklTVElDXG4gIH1cblxuICBnZXQgaXNBdHRyaWJ1dGVDaGVjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5saW5rVHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLkFUVFJJQlVURVxuICB9XG5cbiAgZ2V0IGlzU2tpbGxDaGVjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5saW5rVHlwZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMXG4gIH1cblxuICBnZXQgaXNJdGVtQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNXG4gIH1cblxuICBnZXQgaXNTYW5Mb3NzQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTXG4gIH1cblxuICBnZXQgaXNFZmZlY3QgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1RcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICByZXR1cm4gdGhpcy5pc0NoZWNrICYmIHRoaXMub2JqZWN0LmJsaW5kXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vY29jNy1saW5rLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1BhcnNlciB7XG4gIHN0YXRpYyBlbnJpY2hIVE1MIChjb250ZW50KSB7XG4gICAgY29uc3QgaHRtbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgaHRtbC5pbm5lckhUTUwgPSBTdHJpbmcoY29udGVudClcblxuICAgIGxldCB0ZXh0ID0gW11cblxuICAgIHRleHQgPSBUZXh0RWRpdG9yLl9nZXRUZXh0Tm9kZXMoaHRtbClcbiAgICBjb25zdCByZ3ggPSBuZXcgUmVnRXhwKCdAKGNvYzcpXFxcXC4nICsgJyhjaGVja3xlZmZlY3R8aXRlbXxzYW5sb3NzKScgKyAnXFxcXFsoW15cXFxcW1xcXFxdXSooPzpcXFxcW1teXFxcXFtcXFxcXV0qKD86XFxcXFtbXlxcXFxbXFxcXF1dKlxcXFxdKSpbXlxcXFxbXFxcXF1dKlxcXFxdKSpbXlxcXFxbXFxcXF1dKilcXFxcXScgKyAnKD86eyhbXn1dKyl9KT8nLCAnZ2knKVxuICAgIFRleHRFZGl0b3IuX3JlcGxhY2VUZXh0Q29udGVudCh0ZXh0LCByZ3gsIENvQzdMaW5rLl9jcmVhdGVMaW5rKVxuICAgIHJldHVybiBodG1sLmlubmVySFRNTFxuICB9XG5cbiAgc3RhdGljIFBhcnNlU2hlZXRDb250ZW50IChhcHAsIGh0bWwpIHtcbiAgICAvLyBDaGVjayBpbiBhbGwgZWRpdG9ycyBjb250ZW50IGZvciBhIGxpbmsuXG4gICAgZm9yIChjb25zdCBlbGVtZW50IG9mIGh0bWwuZmluZCgnZGl2LmVkaXRvci1jb250ZW50ID4gKiwgcCcpKSB7XG4gICAgICBpZiAoZWxlbWVudC5vdXRlckhUTUwudG9Mb2NhbGVMb3dlckNhc2UoKS5pbmNsdWRlcygnQGNvYzcnKSkge1xuICAgICAgICBlbGVtZW50Lm91dGVySFRNTCA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChlbGVtZW50Lm91dGVySFRNTClcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBCaW5kIHRoZSBjbGljayB0byBleGVjdXRlIHRoZSBjaGVjay5cbiAgICBDb0M3TGluay5iaW5kRXZlbnRzSGFuZGxlcihodG1sKVxuICB9XG5cbiAgLyoqXG4gICAgICogQSBob29rIGV2ZW50IHRoYXQgZmlyZXMgZm9yIGVhY2ggQ2hhdE1lc3NhZ2Ugd2hpY2ggaXMgcmVuZGVyZWQgZm9yIGFkZGl0aW9uIHRvIHRoZSBDaGF0TG9nLlxuICAgICAqIFRoaXMgaG9vayBhbGxvd3MgZm9yIGZpbmFsIGN1c3RvbWl6YXRpb24gb2YgdGhlIG1lc3NhZ2UgSFRNTCBiZWZvcmUgaXQgaXMgYWRkZWQgdG8gdGhlIGxvZy5cbiAgICAgKiBAZnVuY3Rpb24gcmVuZGVyQ2hhdE1lc3NhZ2VcbiAgICAgKiBAbWVtYmVyb2YgaG9va0V2ZW50c1xuICAgICAqIEBwYXJhbSB7Q2hhdE1lc3NhZ2V9IGFwcCAgIFRoZSBDaGF0TWVzc2FnZSBkb2N1bWVudCBiZWluZyByZW5kZXJlZFxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSBodG1sICAgICAgICAgICBUaGUgcGVuZGluZyBIVE1MIGFzIGEgalF1ZXJ5IG9iamVjdFxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhICAgICAgICAgICBUaGUgaW5wdXQgZGF0YSBwcm92aWRlZCBmb3IgdGVtcGxhdGUgcmVuZGVyaW5nXG4gICAgICovXG4gIHN0YXRpYyBQYXJzZU1lc3NhZ2UgKGFwcCwgaHRtbCwgZGF0YSkge1xuICAgIC8vIEBjb2M3LnNhbmxvc3Nbc2FuTWF4OjFENixzYW5NaW46MSxzYW5SZWFzb246R2hvdWxzLGRpZmZpY3VsdHk6KyssbW9kaWZpZXI6LTFde0hhcmQgU2FuIExvc3MgKC0xKSAxLzFENn1cbiAgICAvLyBAY29jNy5jaGVja1t0eXBlOmNoYXJhYyxuYW1lOlNUUixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU1RSIGNoZWNrKC0xKX1cbiAgICAvLyBAY29jNy5jaGVja1t0eXBlOmF0dHJpYixuYW1lOmxjayxkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgbHVjayBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpza2lsbCxuYW1lOmFudGhyb3BvbG9neSxkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgQW50aHJvcG9sb2d5IGNoZWNrKC0xKX1cbiAgICAvLyBAY29jNy5jaGVja1t0eXBlOnNraWxsLGljb246ZmFzIGZhLWFycm93LWFsdC1jaXJjbGUtcmlnaHQsbmFtZTphbnRocm9wb2xvZ3ksZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIEFudGhyb3BvbG9neSBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuaXRlbVtuYW1lOlNob3RndW4saWNvbjpmYXMgZmEtYnVsbHNleWUsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtVc2Ugc2hvdGd1bn1cbiAgICAvLyBbVEJJXUBjb2M3LmRhbWFnZVtmb3JtdWxhOjFENl17RGFtYWdlIDFENn1cbiAgICAvLyBbVEJJXUBjb2M3LnJvbGxbdGhyZXNob2xkOjUwXXtTaW1wbGUgcm9sbH1cblxuICAgIGlmICghYXBwLmlzQ29udGVudFZpc2libGUpIHJldHVyblxuXG4gICAgaWYgKGRhdGEubWVzc2FnZS5jb250ZW50LnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ0Bjb2M3JykpIHtcbiAgICAgIGNvbnN0IHBhcnNlZENvbnRlbnQgPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoZGF0YS5tZXNzYWdlLmNvbnRlbnQpXG4gICAgICBodG1sLmZpbmQoJy5tZXNzYWdlLWNvbnRlbnQnKS5odG1sKHBhcnNlZENvbnRlbnQpXG4gICAgICBkYXRhLm1lc3NhZ2UuY29udGVudCA9IHBhcnNlZENvbnRlbnRcbiAgICB9XG4gICAgcmV0dXJuIHRydWUgLy8gYWxsb3cgbWVzc2FnZSB0byBiZSBwdWJsaXNoZWQgIVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ09ORklHLCBkdXBsaWNhdGUsIGdhbWUsIGdldFByb3BlcnR5LCBJdGVtLCBSb2xsLCBUZXh0RWRpdG9yLCBUb2tlbiwgdWksIGZyb21VdWlkICovXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi4vYXBwcy9jb2M3LXBhcnNlci5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DSURFZGl0b3IgfSBmcm9tICcuLi9hcHBzL2NvYy1pZC1lZGl0b3IuanMnXG5cbi8qKlxuICogT3ZlcnJpZGUgYW5kIGV4dGVuZCB0aGUgYmFzaWMgOmNsYXNzOmBJdGVtYCBpbXBsZW1lbnRhdGlvblxuICovXG5leHBvcnQgY2xhc3MgQ29DN0l0ZW0gZXh0ZW5kcyBJdGVtIHtcbiAgLyoqIENyZWF0ZSBkZXJpdmVkIGRvY3VtZW50IGNsYXNzZXMgZm9yIHNwZWNpZmljIEl0ZW0gdHlwZXMgKi9cbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICAvKiogQHNlZSBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMgaW4gbW9kdWxlL3NjcmlwdHMvY29uZmlndXJlLWRvY3VtZW50cyAqL1xuICAgIGlmIChkYXRhLnR5cGUgaW4gQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzICYmICFjb250ZXh0Py5leHRlbmRlZCkge1xuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIG5ldyBjbGFzcyB3aWxsIGNhbGwgaXQncyBzdXBlcigpLFxuICAgICAgICogdGhlIGV4dGVuZGVkIGZsYWcgd2lsbCBiZSB0cnVlLCB0aHVzIGJ5cGFzc2luZyB0aGlzIHdob2xlIHByb2Nlc3NcbiAgICAgICAqIGFuZCByZXN1bWUgZGVmYXVsdCBiZWhhdmlvclxuICAgICAgICovXG4gICAgICByZXR1cm4gbmV3IENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3Nlc1tkYXRhLnR5cGVdKGRhdGEsIHtcbiAgICAgICAgLi4ueyBleHRlbmRlZDogdHJ1ZSB9LFxuICAgICAgICAuLi5jb250ZXh0XG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3NraWxscy5zdmcnXG4gICAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ3N0YXR1cycpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnaWNvbnMvc3ZnL2F1cmEuc3ZnJ1xuICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICd3ZWFwb24nKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9zd29yZC5zdmcnXG4gICAgICB9XG4gICAgfVxuICAgIC8qKiBEZWZhdWx0IGJlaGF2aW9yLCBqdXN0IGNhbGwgc3VwZXIoKSBhbmQgZG8gYWxsIHRoZSBkZWZhdWx0IEl0ZW0gaW5pdHMgKi9cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgYXN5bmMgX2NyZWF0ZURvY3VtZW50TGluayAoZXZlbnREYXRhLCB7IHJlbGF0aXZlVG8sIGxhYmVsIH0gPSB7fSkge1xuICAgIGlmICh0eXBlb2YgZXZlbnREYXRhLnR5cGUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBldmVudERhdGEudXVpZCA9PT0gJ3N0cmluZycgJiYgZXZlbnREYXRhLnR5cGUgPT09ICdJdGVtJyAmJiBldmVudERhdGEudXVpZC5tYXRjaCgvXkFjdG9yXFwuLykgJiYgcmVsYXRpdmVUbyBpbnN0YW5jZW9mIENPTkZJRy5Kb3VybmFsRW50cnlQYWdlLmRvY3VtZW50Q2xhc3MpIHtcbiAgICAgIC8vIElmIGRyb3BwaW5nIGEgc2tpbGwvd2VhcG9uIGZyb20gYW4gQWN0b3Igb250byBhIEpvdXJuYWwgRW50cnkgUGFnZSBjb252ZXJ0IHRvIGEgY2hlY2sgbGlua1xuICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IGZyb21VdWlkKGV2ZW50RGF0YS51dWlkKVxuICAgICAgaWYgKFsnc2tpbGwnLCAnd2VhcG9uJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICByZXR1cm4gJ0Bjb2M3LmNoZWNrW3R5cGU6JyArIGl0ZW0udHlwZSArICcsbmFtZTonICsgaXRlbS5uYW1lICsgJ10nXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdXBlci5fY3JlYXRlRG9jdW1lbnRMaW5rKGV2ZW50RGF0YSwgeyByZWxhdGl2ZVRvLCBsYWJlbCB9KVxuICB9XG5cbiAgc3RhdGljIGdldCBpY29uTGFuZ3VhZ2UgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9za2lsbHMvbGFuZ3VhZ2Uuc3ZnJ1xuICB9XG5cbiAgc3RhdGljIGdldCBmbGFncyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1hbGZ1bmN0aW9uOiAnbWFsZmMnXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSBvbiBvZiB0aGUgaXRlbSBwcm9wZXJ0eSBpbiBkYXRhLmRhdGEucHJvcGVydGllc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gcHJvcGVydHlJZCA6IG5hbWUgZm9yIHRoZSBwcm9wZXJ0eSB0byB0b2dnbGVcbiAgICovXG4gIGFzeW5jIHRvZ2dsZVByb3BlcnR5IChwcm9wZXJ0eUlkLCBvdmVycmlkZSA9IGZhbHNlKSB7XG4gICAgbGV0IGNoZWNrZWRQcm9wcyA9IHt9XG4gICAgbGV0IGZpZ2h0aW5nXG4gICAgbGV0IGZpcmVhcm1zXG4gICAgaWYgKHR5cGVvZiBDT0M3LmVyYXNbcHJvcGVydHlJZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gQ29DSURFZGl0b3IuZXJhVG9nZ2xlKHRoaXMsIHByb3BlcnR5SWQpXG4gICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09ICd3ZWFwb24nICYmICFvdmVycmlkZSkge1xuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdhaGRiJykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuYWhkYikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5haGRiJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5hZGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFoZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2FkZGInKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5hZGRiKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFkZGInOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFoZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWRkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnc2hvdGd1bicpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucm5nZCc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMubWVsZWUnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bic6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5leHRyZW1lLnZhbHVlJzogbnVsbCxcbiAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UuZXh0cmVtZS5kYW1hZ2UnOiBudWxsLFxuICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLnZhbHVlJzogbnVsbCxcbiAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UubG9uZy5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnIHx8IHByb3BlcnR5SWQgPT09ICdybmdkJykge1xuICAgICAgICBsZXQgbWVsZWVXZWFwb25cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdtZWxlZScgJiYgIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMubWVsZWUpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ21lbGVlJyAmJiB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAncm5nZCcgJiYgIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3JuZ2QnICYmIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChtZWxlZVdlYXBvbikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5tZWxlZSc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucm5nZCc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5icnN0JzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYXV0byc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmRicmwnOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMubWVsZWUnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5ybmdkJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnICYmICFvdmVycmlkZSkge1xuICAgICAgbGV0IG1vZGlmID0gZmFsc2VcbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnY29tYmF0Jykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAgICAgLy8gQ2xvc2UgY29tYmF0IGJ5IGRlZmF1bHRcbiAgICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICAgICAgZmlnaHRpbmcgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGZpcmVhcm1zID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnNwZWNpYWxpemF0aW9uJzogJycsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbW9kaWYgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnZmlnaHRpbmcnKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICAgIGZpcmVhcm1zID0gZmFsc2VcbiAgICAgICAgICBmaWdodGluZyA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmaXJlYXJtcyA9IHRydWVcbiAgICAgICAgICBmaWdodGluZyA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgbW9kaWYgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnZmlyZWFybScpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgICBmaXJlYXJtcyA9IHRydWVcbiAgICAgICAgICBmaWdodGluZyA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmlyZWFybXMgPSBmYWxzZVxuICAgICAgICAgIGZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAobW9kaWYpIHtcbiAgICAgICAgLy8gc2V0IHNwZWNpYWxpc2F0aW9uIGlmIGZpZ2h0aW5nIG9yIGZpcmVhcm1cbiAgICAgICAgaWYgKGZpZ2h0aW5nKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5za2lsbE5hbWUsXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSlcbiAgICAgICAgICApXG4gICAgICAgICAgY2hlY2tlZFByb3BzLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgY2hlY2tlZFByb3BzLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICB9XG4gICAgICAgIGlmIChmaXJlYXJtcykge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uc2tpbGxOYW1lLFxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSlcbiAgICAgICAgICApXG4gICAgICAgICAgY2hlY2tlZFByb3BzLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgY2hlY2tlZFByb3BzLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHByb3BlcnR5SWQgPT09ICdzcGVjaWFsJykge1xuICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXNbcHJvcGVydHlJZF0pIHtcbiAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogZmFsc2UsXG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogZmFsc2UsXG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nOiBmYWxzZSxcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogZmFsc2UsXG4gICAgICAgICAgJ3N5c3RlbS5zcGVjaWFsaXphdGlvbic6ICcnLFxuICAgICAgICAgIG5hbWU6IHRoaXMuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlLFxuICAgICAgICAgIG5hbWU6IHRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uICsgJyAoJyArIHRoaXMuc3lzdGVtLnNraWxsTmFtZSArICcpJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKGNoZWNrZWRQcm9wcykubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IHRoaXMudXBkYXRlKGNoZWNrZWRQcm9wcylcbiAgICAgIHJldHVybiBpdGVtXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHByb3BOYW1lID0gYHN5c3RlbS5wcm9wZXJ0aWVzLiR7cHJvcGVydHlJZH1gXG4gICAgICBjb25zdCBwcm9wVmFsdWUgPSAhdGhpcy5zeXN0ZW0ucHJvcGVydGllc1twcm9wZXJ0eUlkXVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbcHJvcE5hbWVdOiBwcm9wVmFsdWUgfSkudGhlbihpdGVtID0+IHtcbiAgICAgICAgcmV0dXJuIGl0ZW1cbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgaGFzUHJvcGVydHkgKHByb3BlcnR5SWQpIHtcbiAgICByZXR1cm4gdGhpcy5pc0luY2x1ZGVkSW5TZXQoJ3Byb3BlcnRpZXMnLCBwcm9wZXJ0eUlkKVxuICB9XG5cbiAgZ2V0IHNob3J0TmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3lzdGVtLnNraWxsTmFtZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5uYW1lXG4gIH1cblxuICBhc3luYyB1cGRhdGVSb2xsIChyb2xsKSB7XG4gICAgaWYgKCd1cGRhdGVSb2xsJyBpbiB0aGlzLnNoZWV0KSByZXR1cm4gYXdhaXQgdGhpcy5zaGVldC51cGRhdGVSb2xsKHJvbGwpXG4gICAgZWxzZSBpZiAoJ3VwZGF0ZVJvbGwnIGluIHRoaXMpIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZVJvbGwocm9sbClcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzdGF0aWMgZ2V0TmFtZVBhcnRzU3BlYyAoc2tpbGxOYW1lLCBzcGVjaWFsaXphdGlvbikge1xuICAgIGlmICghc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHNraWxsTmFtZSxcbiAgICAgICAgc3BlY2lhbGl6YXRpb246ICcnLFxuICAgICAgICBza2lsbE5hbWVcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qgc3BlY05hbWVSZWdleCA9IG5ldyBSZWdFeHAoXG4gICAgICAnXignICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChzcGVjaWFsaXphdGlvbikgKyAnKVxcXFxzKlxcXFwoKC4rKVxcXFwpJCcsXG4gICAgICAnaSdcbiAgICApXG4gICAgY29uc3QgbWF0Y2ggPSBza2lsbE5hbWUubWF0Y2goc3BlY05hbWVSZWdleClcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gbWF0Y2hbMV1cbiAgICAgIHNraWxsTmFtZSA9IG1hdGNoWzJdXG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKScsXG4gICAgICBzcGVjaWFsaXphdGlvbixcbiAgICAgIHNraWxsTmFtZVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXROYW1lV2l0aG91dFNwZWMgKGl0ZW0pIHtcbiAgICBpZiAoaXRlbSBpbnN0YW5jZW9mIENvQzdJdGVtKSB7XG4gICAgICBpZiAoaXRlbS5zeXN0ZW0/LnByb3BlcnRpZXM/LnNwZWNpYWwgJiYgdHlwZW9mIGl0ZW0uc3lzdGVtLnNraWxsTmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0uc3lzdGVtLnNraWxsTmFtZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXRlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmIHR5cGVvZiBpdGVtLnNraWxsTmFtZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0uc2tpbGxOYW1lXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtLm5hbWVcbiAgfVxuXG4gIHN0YXRpYyBpc0FueVNwZWMgKGl0ZW0pIHtcbiAgICBpZiAoaXRlbS50eXBlICE9PSAnc2tpbGwnIHx8ICFpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSB8fCBpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5waWNrbmFtZW9ubHkpIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55U3BlY05hbWUnKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgJ2FueSdcbiAgICBdLmluY2x1ZGVzKENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3Nlcy5za2lsbC5ndWVzc05hbWVQYXJ0cyhpdGVtLm5hbWUpLnNraWxsTmFtZS50b0xvd2VyQ2FzZSgpKVxuICB9XG5cbiAgYXN5bmMgY2hlY2tTa2lsbFByb3BlcnRpZXMgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVyblxuICAgIGNvbnN0IGNoZWNrZWRQcm9wcyA9IHt9XG4gICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAvLyBpZiBza2lsbCBpcyBub3QgYSBzcGVjaWFsaXNhdGlvbiBtYWtlIGl0IGEgc3BlY2lhbGlzYXRpb25cbiAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCA9IHRydWVcbiAgICAgICAgY2hlY2tlZFByb3BzWydzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJ10gPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8vIElmIHNraWxsIGlzIGNvbWJhdCBza2lsbCBhbmQgbm8gc3BlY2lhbGlzYXRpb24gc2V0IHRoZW4gbWFrZSBpdCBhIGZpZ2h0aW5nKCBjbG9zZWNvbWJhdCkgc2tpbGxcbiAgICAgIGlmIChcbiAgICAgICAgIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgJiZcbiAgICAgICAgIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgPSB0cnVlXG4gICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnXSA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gaWYgc2tpbGwgaXMgY2xvc2UgY29tYmF0IHdpdGhvdXQgc3BlY2lhbGlzYXRpb24gbmFtZSBtYWtlIHNldCBpdCBhY2NvcmRpbmcgdG8gdGhlIGZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgJiZcbiAgICAgICAgKCF0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiB8fCB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9PT0gJycpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5maWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHNraWxsIGlzIHJhbmdlIGNvbWJhdCB3aXRob3V0IGEgc3BlY2lhbGlzYXRpb24gbmFtZSBtYWtlIHNldCBpdCBhY2NvcmRpbmcgdG8gdGhlIGZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtICYmXG4gICAgICAgICghdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gfHwgdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPT09ICcnKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgQ09DNy5maXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyA9IGZhbHNlXG4gICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnXSA9IGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSA9IGZhbHNlXG4gICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSddID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoT2JqZWN0LmtleXMoY2hlY2tlZFByb3BzKS5sZW5ndGggPiAwKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZShjaGVja2VkUHJvcHMpXG4gICAgfVxuXG4gICAgcmV0dXJuIGNoZWNrZWRQcm9wc1xuICB9XG5cbiAgaXNJbmNsdWRlZEluU2V0IChzZXQsIHByb3BlcnR5SWQpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtW3NldF0pIHRoaXMuc3lzdGVtW3NldF0gPSBbXVxuICAgIGNvbnN0IHByb3BlcnR5SW5kZXggPSB0aGlzLnN5c3RlbVtzZXRdLmluZGV4T2YocHJvcGVydHlJZClcbiAgICBpZiAocHJvcGVydHlJbmRleCA+IC0xKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgZmxhZ0ZvckRldmVsb3BlbWVudCAoKSB7XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpIHx8IGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncyc6IHt9IH0pXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MuZGV2ZWxvcGVtZW50JzogdHJ1ZSB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVuZmxhZ0ZvckRldmVsb3BlbWVudCAoKSB7XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpIHx8IGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncyc6IHt9IH0pXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MuZGV2ZWxvcGVtZW50JzogZmFsc2UgfSlcbiAgICB9XG4gIH1cblxuICBnZXQgZGV2ZWxvcGVtZW50RmxhZyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0SXRlbUZsYWcoJ2RldmVsb3BlbWVudCcpXG4gIH1cblxuICBhc3luYyB0b2dnbGVJdGVtRmxhZyAoZmxhZ05hbWUsIGVyYXNlQWRqdXN0bWVudCA9IHRydWUpIHtcbiAgICBjb25zdCBmbGFnVmFsdWUgPSAhdGhpcy5nZXRJdGVtRmxhZyhmbGFnTmFtZSlcbiAgICBjb25zdCBuYW1lID0gYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBcbiAgICBpZiAoXG4gICAgICAoZmxhZ05hbWUgPT09ICdvY2N1cGF0aW9uJyB8fCBmbGFnTmFtZSA9PT0gJ2FyY2hldHlwZScpICYmXG4gICAgICAhZmxhZ1ZhbHVlICYmXG4gICAgICBlcmFzZUFkanVzdG1lbnRcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgW2BzeXN0ZW0uYWRqdXN0bWVudHMuJHtmbGFnTmFtZX1gXTogbnVsbCxcbiAgICAgICAgW25hbWVdOiBmbGFnVmFsdWVcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChmbGFnTmFtZSA9PT0gJ2RldmVsb3BlbWVudCcpIHtcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmxhZ1ZhbHVlIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsWHBHYWluRGlzYWJsZWQnKSlcbiAgICAgIH1cbiAgICB9IGVsc2UgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IGZsYWdWYWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgc2V0SXRlbUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBdOiB0cnVlIH0pXG4gIH1cblxuICBhc3luYyB1bnNldEl0ZW1GbGFnIChmbGFnTmFtZSwgZXJhc2VBZGp1c3RtZW50ID0gdHJ1ZSkge1xuICAgIGNvbnN0IG5hbWUgPSBgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YFxuICAgIGlmIChcbiAgICAgIChmbGFnTmFtZSA9PT0gJ29jY3VwYXRpb24nIHx8IGZsYWdOYW1lID09PSAnYXJjaGV0eXBlJykgJiZcbiAgICAgIGVyYXNlQWRqdXN0bWVudFxuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICBbYHN5c3RlbS5hZGp1c3RtZW50cy4ke2ZsYWdOYW1lfWBdOiBudWxsLFxuICAgICAgICBbbmFtZV06IGZhbHNlXG4gICAgICB9KVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogZmFsc2UgfSlcbiAgfVxuXG4gIGdldEl0ZW1GbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3MpIHtcbiAgICAgIHRoaXMuc3lzdGVtLmZsYWdzID0ge31cbiAgICAgIHRoaXMuc3lzdGVtLmZsYWdzLmxvY2tlZCA9IHRydWVcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncyc6IHt9IH0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzW2ZsYWdOYW1lXSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmZsYWdzW2ZsYWdOYW1lXVxuICB9XG5cbiAgZ2V0IHVzZXNBbHRlcm5hdGl2ZVNraWxsICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy50eXBlID09PSAnd2VhcG9uJyAmJlxuICAgICAgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXM/LmF1dG8gPT09IHRydWUgfHxcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcz8uYnJzdCA9PT0gdHJ1ZSB8fFxuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzPy50aHJvd24gPT09IHRydWUpXG4gICAgKVxuICB9XG5cbiAgZ2V0IG1heFVzZXNQZXJSb3VuZCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3QgbXVsdGlTaG90ID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLm1heClcbiAgICBpZiAoaXNOYU4obXVsdGlTaG90KSkgcmV0dXJuIDBcbiAgICByZXR1cm4gbXVsdGlTaG90XG4gIH1cblxuICBnZXQgdXNlc1BlclJvdW5kICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBzaW5nbGVTaG90ID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLm5vcm1hbClcbiAgICBpZiAoaXNOYU4oc2luZ2xlU2hvdCkpIHJldHVybiAwXG4gICAgcmV0dXJuIHNpbmdsZVNob3RcbiAgfVxuXG4gIGdldCB1c2VzUGVyUm91bmRTdHJpbmcgKCkge1xuICAgIGxldCB1c2VzUGVyUm91bmRcbiAgICBpZiAodGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLm5vcm1hbCkge1xuICAgICAgdXNlc1BlclJvdW5kID0gdGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLm5vcm1hbFxuICAgIH0gZWxzZSB7XG4gICAgICB1c2VzUGVyUm91bmQgPSAnMSdcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXgpIHtcbiAgICAgIHVzZXNQZXJSb3VuZCArPSBgKCR7dGhpcy5zeXN0ZW0udXNlc1BlclJvdW5kLm1heH0pYFxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5hdXRvKSB7XG4gICAgICB1c2VzUGVyUm91bmQgKz0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25BdXRvJyl9YFxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllcy5icnN0KSB7XG4gICAgICB1c2VzUGVyUm91bmQgKz0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25CcnN0Jyl9YFxuICAgICAgaWYgKHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5idXJzdCkge1xuICAgICAgICB1c2VzUGVyUm91bmQgKz0gYCgke3RoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5idXJzdH0pYFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB1c2VzUGVyUm91bmRcbiAgfVxuXG4gIGdldCBtdWx0aXBsZVNob3RzICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5tYXhVc2VzUGVyUm91bmQgPD0gMSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgc2luZ2xlU2hvdCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnVzZXNQZXJSb3VuZCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgYmFzZVJhbmdlICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0ucmFuZ2Uubm9ybWFsLnZhbHVlKVxuICB9XG5cbiAgZ2V0IGxvbmdSYW5nZSAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLnJhbmdlLmxvbmcudmFsdWUpXG4gIH1cblxuICBnZXQgZXh0cmVtZVJhbmdlICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0ucmFuZ2UuZXh0cmVtZS52YWx1ZSlcbiAgfVxuXG4gIGdldCBza2lsbFByb3BlcnRpZXMgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBbXVxuXG4gICAgY29uc3Qgc2tpbGxQcm9wZXJ0aWVzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHtcbiAgICAgICAgc2tpbGxQcm9wZXJ0aWVzLnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNraWxsUHJvcGVydGllc1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNhbGN1bGF0ZUJhc2UgKGFjdG9yLCBkYXRhKSB7XG4gICAgaWYgKGRhdGEudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIG51bGxcbiAgICBpZiAoU3RyaW5nKGRhdGEuc3lzdGVtLmJhc2UpLmluY2x1ZGVzKCdAJykpIHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3JzaGVldCkpIHtcbiAgICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCdAJykgJiYgdmFsdWUuc3RhcnRzV2l0aCgndGhpcy5hY3Rvci4nKSkge1xuICAgICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGdldFByb3BlcnR5KGFjdG9yLCB2YWx1ZS5zdWJzdHJpbmcoMTEpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgdmFsdWVcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhbHVlID0gTWF0aC5mbG9vcihcbiAgICAgICAgICBuZXcgUm9sbChkYXRhLnN5c3RlbS5iYXNlLCBwYXJzZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICAgICAgfSkudG90YWxcbiAgICAgICAgKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHZhbHVlID0gMFxuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfVxuICAgIHJldHVybiAhaXNOYU4ocGFyc2VJbnQoZGF0YS5zeXN0ZW0uYmFzZSkpID8gcGFyc2VJbnQoZGF0YS5zeXN0ZW0uYmFzZSkgOiBudWxsXG4gIH1cblxuICBnZXQgX2Jhc2UgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBbbnVsbCwgZmFsc2VdXG4gICAgaWYgKHR5cGVvZiB0aGlzLnN5c3RlbS5iYXNlICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIFt0aGlzLnN5c3RlbS5iYXNlLCBmYWxzZV1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5zeXN0ZW0uYmFzZS5pbmNsdWRlcygnQCcpKSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSB7fVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQpKSB7XG4gICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuJykpIHtcbiAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBnZXRQcm9wZXJ0eSh0aGlzLCB2YWx1ZS5zdWJzdHJpbmcoNSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxldCB2YWx1ZVxuICAgICAgdHJ5IHtcbiAgICAgICAgdmFsdWUgPSBNYXRoLmZsb29yKFxuICAgICAgICAgIG5ldyBSb2xsKHRoaXMuc3lzdGVtLmJhc2UsIHBhcnNlZCkuZXZhbHVhdGUoe1xuICAgICAgICAgICAgbWF4aW1pemU6IHRydWVcbiAgICAgICAgICB9KS50b3RhbFxuICAgICAgICApXG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgdmFsdWUgPSAwXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbdmFsdWUsIHRydWVdXG4gICAgfVxuICAgIHJldHVybiBbXG4gICAgICAhaXNOYU4ocGFyc2VJbnQodGhpcy5zeXN0ZW0uYmFzZSkpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYmFzZSlcbiAgICAgICAgOiBudWxsLFxuICAgICAgZmFsc2VcbiAgICBdXG4gIH1cblxuICBhc3luYyBhc3luY0Jhc2UgKCkge1xuICAgIGNvbnN0IGUgPSB0aGlzLl9iYXNlXG4gICAgaWYgKGVbMV0pIHtcbiAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgYFtDT0M3XSAoJHt0aGlzLnBhcmVudD8ubmFtZX0pIEV2YWx1YXRpbmcgc2tpbGwgJHt0aGlzLm5hbWV9OiR7dGhpcy5zeXN0ZW0uYmFzZX0gdG8gJHtlWzBdfWBcbiAgICAgIClcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iYXNlJzogZVswXSB9KVxuICAgIH1cbiAgICByZXR1cm4gZVswXVxuICB9XG5cbiAgZ2V0IGJhc2UgKCkge1xuICAgIGNvbnN0IGUgPSB0aGlzLl9iYXNlXG4gICAgaWYgKGVbMV0pIHtcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iYXNlJzogZVswXSB9KVxuICAgIH1cbiAgICByZXR1cm4gZVswXVxuICB9XG5cbiAgZ2V0QnVsbGV0TGVmdCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hbW1vKSB7XG4gICAgICB0aGlzLnNldEJ1bGxldHMoMClcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hbW1vXG4gIH1cblxuICBhc3luYyByZWxvYWQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IG1heEJ1bGxldCA9IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYnVsbGV0cylcbiAgICAgIDogMVxuICAgIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhtYXhCdWxsZXQpXG4gIH1cblxuICBhc3luYyBzZXRCdWxsZXRzIChidWxsZXRzKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmFtbW8nOiBidWxsZXRzIHx8IDAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZEJ1bGxldCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3QgYnVsbGV0cyA9IGF3YWl0IHRoaXMuZ2V0QnVsbGV0TGVmdCgpXG4gICAgY29uc3QgbWF4QnVsbGV0cyA9IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYnVsbGV0cylcbiAgICAgIDogMVxuICAgIGlmIChidWxsZXRzICsgMSA+PSBtYXhCdWxsZXRzKSBhd2FpdCB0aGlzLnNldEJ1bGxldHMobWF4QnVsbGV0cylcbiAgICBlbHNlIGF3YWl0IHRoaXMuc2V0QnVsbGV0cyhidWxsZXRzICsgMSlcbiAgfVxuXG4gIGFzeW5jIHNob290QnVsbGV0cyAoeCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGJ1bGxldHMgPSBhd2FpdCB0aGlzLmdldEJ1bGxldExlZnQoKVxuICAgIGlmICh4ID4gYnVsbGV0cykgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKDApXG4gICAgZWxzZSBhd2FpdCB0aGlzLnNldEJ1bGxldHMoYnVsbGV0cyAtIHgpXG4gIH1cblxuICBzdGF0aWMgbWVyZ2VPcHRpb25hbFNraWxscyAoc2tpbGxMaXN0LCBvcHRpb25zKSB7XG4gICAgY29uc3Qgam9pbnRBcnJheSA9IHNraWxsTGlzdC5jb25jYXQob3B0aW9ucylcbiAgICByZXR1cm4gam9pbnRBcnJheVxuICAgICAgLnJlZHVjZSgobmV3QXJyYXksIGl0ZW0pID0+IHtcbiAgICAgICAgLy8gSWYgc2tpbGwgaXMgbm90IGEgZ2VuZXJpYyBzcGVjIGFuZCBpcyBhbHJlYWR5IGluY2x1ZGVkIHdlIGRvbid0IGFkZCBpdGVtXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pICYmXG4gICAgICAgICAgbmV3QXJyYXkuZmluZChza2lsbCA9PiBza2lsbC5uYW1lID09PSBpdGVtLm5hbWUpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBuZXdBcnJheVxuICAgICAgICB9XG4gICAgICAgIC8vIEVsc2UgaXRlbSBpcyBhZGRlZFxuICAgICAgICByZXR1cm4gWy4uLm5ld0FycmF5LCBpdGVtXVxuICAgICAgfSwgW10pXG4gICAgICAuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gIH1cblxuICAvKiogVE9ETyA6IHJpZW4gYSBmYWlyZSBpY2kgISFcbiAgICogR2V0IHRoZSBBY3RvciB3aGljaCBpcyB0aGUgYXV0aG9yIG9mIGEgY2hhdCBjYXJkXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmQgICAgVGhlIGNoYXQgY2FyZCBiZWluZyB1c2VkXG4gICAqIEByZXR1cm4ge0FjdG9yfG51bGx9ICAgICAgICAgVGhlIEFjdG9yIGVudGl0eSBvciBudWxsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGF0aWMgX2dldENoYXRDYXJkQWN0b3IgKGNhcmQpIHtcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChhY3RvcklkKSB8fCBudWxsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgQ2hhdCBNZXNzYWdlIEhlbHBlcnMgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGFuIG9iamVjdCBvZiBjaGF0IGRhdGEgdXNlZCB0byBkaXNwbGF5IGEgY2FyZCBmb3IgdGhlIEl0ZW0gaW4gdGhlIGNoYXQgbG9nXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBodG1sT3B0aW9ucyAgICBPcHRpb25zIHVzZWQgYnkgdGhlIFRleHRFZGl0b3IuZW5yaWNoSFRNTCBmdW5jdGlvblxuICAgKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgICAgICAgICAgQW4gb2JqZWN0IG9mIGNoYXQgZGF0YSB0byByZW5kZXJcbiAgICovXG4gIGdldENoYXREYXRhIChodG1sT3B0aW9ucyA9IHt9KSB7XG4gICAgLy8gRm91bmRyeVZUVCB2MTBcbiAgICBodG1sT3B0aW9ucy5hc3luYyA9IGZhbHNlXG4gICAgY29uc3QgZGF0YSA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbSlcbiAgICAvLyBGaXggOiBkYXRhIGNhbiBoYXZlIGRlc2NyaXB0aW9uIGRpcmVjdGx5IGluIGZpZWxkLCBub3QgdW5kZXIgdmFsdWUuXG4gICAgaWYgKHR5cGVvZiBkYXRhLmRlc2NyaXB0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgZGF0YS5kZXNjcmlwdGlvbiA9IHtcbiAgICAgICAgdmFsdWU6IGRhdGEuZGVzY3JpcHRpb24sXG4gICAgICAgIHNwZWNpYWw6ICcnXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPSAnJ1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbCA9ICcnXG4gICAgfVxuICAgIGNvbnN0IGxhYmVscyA9IFtdXG5cbiAgICAvLyBSaWNoIHRleHQgZGVzY3JpcHRpb25cbiAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIGh0bWxPcHRpb25zXG4gICAgKVxuICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSlcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwsXG4gICAgICBodG1sT3B0aW9uc1xuICAgIClcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsKVxuXG4gICAgLy8gSXRlbSB0eXBlIHNwZWNpZmljIHByb3BlcnRpZXNcbiAgICBjb25zdCBwcm9wcyA9IFtdXG4gICAgY29uc3QgZm4gPSB0aGlzW2BfJHt0aGlzLnR5cGV9Q2hhdERhdGFgXVxuICAgIGlmIChmbikgZm4uYmluZCh0aGlzKShkYXRhLCBsYWJlbHMsIHByb3BzLCBodG1sT3B0aW9ucylcblxuICAgIGlmICh0aGlzLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuc2tpbGxQcm9wZXJ0aWVzKSkge1xuICAgICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlKSBwcm9wcy5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZpbHRlciBwcm9wZXJ0aWVzIGFuZCByZXR1cm5cbiAgICBkYXRhLnByb3BlcnRpZXMgPSBwcm9wcy5maWx0ZXIocCA9PiAhIXApXG4gICAgZGF0YS5sYWJlbHMgPSBsYWJlbHNcbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgX3dlYXBvbkNoYXREYXRhIChkYXRhLCBsYWJlbHMsIHByb3BzKSB7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy53ZWFwb25Qcm9wZXJ0aWVzKSkge1xuICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZSkgcHJvcHMucHVzaCh2YWx1ZSlcbiAgICB9XG5cbiAgICBsZXQgc2tpbGxMYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbCcpXG4gICAgbGV0IHNraWxsTmFtZSA9ICcnXG4gICAgbGV0IGZvdW5kID0gZmFsc2VcbiAgICBpZiAodGhpcy5zeXN0ZW0uc2tpbGwubWFpbi5pZCkge1xuICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5pdGVtcy5nZXQodGhpcy5zeXN0ZW0uc2tpbGwubWFpbi5pZClcbiAgICAgIGlmIChza2lsbCkge1xuICAgICAgICBza2lsbE5hbWUgKz0gQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKHNraWxsKVxuICAgICAgICBmb3VuZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy51c2VzQWx0ZXJuYXRpdmVTa2lsbCAmJiB0aGlzLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSB7XG4gICAgICBza2lsbExhYmVsID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxscycpXG4gICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3I/Lml0ZW1zLmdldCh0aGlzLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKVxuICAgICAgaWYgKHNraWxsKSB7XG4gICAgICAgIHNraWxsTmFtZSArPSBgLyR7Q29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKHNraWxsKX1gXG4gICAgICAgIGZvdW5kID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZm91bmQpIHtcbiAgICAgIHNraWxsTmFtZSA9IHRoaXMuc3lzdGVtLnNraWxsLm1haW4ubmFtZVxuICAgICAgaWYgKHRoaXMudXNlc0FsdGVybmF0aXZlU2tpbGwgJiYgdGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lKSB7XG4gICAgICAgIHNraWxsTmFtZSArPSBgLyR7dGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lfWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc2tpbGxOYW1lKSB7XG4gICAgICBsYWJlbHMucHVzaCh7XG4gICAgICAgIG5hbWU6IHNraWxsTGFiZWwsXG4gICAgICAgIHZhbHVlOiBza2lsbE5hbWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgbGFiZWxzLnB1c2goe1xuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvblVzZXNQZXJSb3VuZCcpLFxuICAgICAgdmFsdWU6IHRoaXMudXNlc1BlclJvdW5kU3RyaW5nXG4gICAgfSlcblxuICAgIGxhYmVscy5wdXNoKHtcbiAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25NYWxmdW5jdGlvbicpLFxuICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLm1hbGZ1bmN0aW9uID8gdGhpcy5zeXN0ZW0ubWFsZnVuY3Rpb24gOiAnLSdcbiAgICB9KVxuXG4gICAgaWYgKHRoaXMuc3lzdGVtLmJ1bGxldHMpIHtcbiAgICAgIGxhYmVscy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LldlYXBvbkJ1bGxldHNJbk1hZycpLFxuICAgICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0uYnVsbGV0c1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBjYW5CZVB1c2hlZCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3NraWxsJyAmJiB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2gpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaW1wYWxlICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5pbXBsXG4gIH1cblxuICBnZXQgaXNEb2RnZSAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMubmFtZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuZG9kZ2UnKS50b0xvd2VyQ2FzZSgpXG4gICAgKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3IsIEF1ZGlvSGVscGVyLCBDaGF0TWVzc2FnZSwgQ09ORklHLCBDT05TVCwgZHVwbGljYXRlLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgZ2V0Q29tcHV0ZWRTdHlsZSwgSXRlbSwgbWVyZ2VPYmplY3QsIHJlbmRlclRlbXBsYXRlLCBUb2tlbiwgdWkgKi9cbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoZWNrIHtcbiAgY29uc3RydWN0b3IgKFxuICAgIGFjdG9yID0gbnVsbCxcbiAgICBza2lsbCA9IG51bGwsXG4gICAgaXRlbSA9IG51bGwsXG4gICAgZGljZU1vZCA9IDAsXG4gICAgZGlmZmljdWx0eSA9IG51bGwsXG4gICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gMCxcbiAgICBmbGF0RGljZU1vZGlmaWVyID0gMFxuICApIHtcbiAgICB0aGlzLmFjdG9yID0gYWN0b3JcbiAgICB0aGlzLnNraWxsID0gc2tpbGxcbiAgICB0aGlzLml0ZW0gPSBpdGVtXG4gICAgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIHRoaXMucmF3VmFsdWUgPSAwIC8vIHZhbHVlIG5lZWRlZCBiZWZvcmUgZGlmZmljdWx0eVxuICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gbnVsbFxuICAgIHRoaXMucmVmZXJlbmNlTWVzc2FnZUlkID0gbnVsbFxuICAgIHRoaXMucHVzaGluZyA9IGZhbHNlXG4gICAgdGhpcy5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG5cbiAgICBpZiAoZGlmZmljdWx0eSA9PT0gbnVsbCkge1xuICAgICAgY29uc3QgaXNVbmtub3duID1cbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScpID09PSAndW5rbm93bidcbiAgICAgIHRoaXMuZGlmZmljdWx0eSA9IGlzVW5rbm93blxuICAgICAgICA/IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93blxuICAgICAgICA6IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgY2FyZFR5cGUgKCkge1xuICAgIHJldHVybiAncm9sbENhcmQnXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRpZmZpY3VsdHlMZXZlbCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHVua25vd246IC0xLFxuICAgICAgcmVndWxhcjogMSxcbiAgICAgIGhhcmQ6IDIsXG4gICAgICBleHRyZW1lOiAzLFxuICAgICAgY3JpdGljYWw6IDQsXG4gICAgICBpbXBvc3NpYmxlOiA5XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBzdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBmdW1ibGU6IC05OSxcbiAgICAgIGZhaWx1cmU6IDAsXG4gICAgICByZWd1bGFyOiAxLFxuICAgICAgaGFyZDogMixcbiAgICAgIGV4dHJlbWU6IDMsXG4gICAgICBjcml0aWNhbDogNFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgdHlwZSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNoYXJhY3RlcmlzdGljOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgYXR0cmlidXRlOiAnYXR0cmlidXRlJyxcbiAgICAgIHNraWxsOiAnaXRlbScsXG4gICAgICBpdGVtOiAnaXRlbScsXG4gICAgICB2YWx1ZTogJ3ZhbHVlJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBkaWZmaWN1bHR5U3RyaW5nIChkaWZmaWN1bHR5TGV2ZWwpIHtcbiAgICBzd2l0Y2ggKFxuICAgICAgIWlzTmFOKE51bWJlcihkaWZmaWN1bHR5TGV2ZWwpKVxuICAgICAgICA/IE51bWJlcihkaWZmaWN1bHR5TGV2ZWwpXG4gICAgICAgIDogZGlmZmljdWx0eUxldmVsXG4gICAgKSB7XG4gICAgICBjYXNlICc/JzpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Vbmtub3duRGlmZmljdWx0eScpXG4gICAgICBjYXNlICcrJzpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICBjYXNlICcrKyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgY2FzZSAnKysrJzpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVua25vd25EaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gIH1cblxuICBnZXQgcmF3VmFsdWUgKCkge1xuICAgIC8vIGlmICghdGhpcy5hY3RvciB8fCAhdGhpcy5hY3Rvci5pZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICghdGhpcy5fcmF3VmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHRoaXMucmF3VmFsdWUgPVxuICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS52YWx1ZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc2tpbGwpIHRoaXMucmF3VmFsdWUgPSB0aGlzLnNraWxsLnZhbHVlXG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLl9yYXdWYWx1ZSkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuX3Jhd1ZhbHVlICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPCAxKSByZXR1cm4gMVxuICAgICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWUgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCByYXdWYWx1ZSAoeCkge1xuICAgIHRoaXMuX3Jhd1ZhbHVlID0geFxuICB9XG5cbiAgc2V0IHV1aWQgKHgpIHtcbiAgICB0aGlzLl91dWlkID0geFxuICB9XG5cbiAgZ2V0IHV1aWQgKCkge1xuICAgIGlmICghdGhpcy5fdXVpZCkgdGhpcy5fdXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgcmV0dXJuIHRoaXMuX3V1aWRcbiAgfVxuXG4gIGdldCBoYXNDYXJkICgpIHtcbiAgICBjb25zdCBjaGF0Q2FyZCA9IHVpLmNoYXQuY29sbGVjdGlvbi5maWx0ZXIobWVzc2FnZSA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICB0aGlzLnV1aWQgPT09IG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICd1dWlkJykgJiZcbiAgICAgICAgQ29DN0NoZWNrLmNhcmRUeXBlID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndHlwZScpXG4gICAgICApXG4gICAgfSlcbiAgICBpZiAoY2hhdENhcmQubGVuZ3RoID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCByYXdWYWx1ZVN0cmluZyAoKSB7XG4gICAgaWYgKCF0aGlzLl9yYXdWYWx1ZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChcbiAgICAgIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyICYmXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgKSB7XG4gICAgICBpZiAodGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPCAwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZS50b1N0cmluZygpICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIudG9TdHJpbmcoKVxuICAgICAgfVxuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKSArICcrJyArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICAgIClcbiAgICB9IGVsc2UgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlLnRvU3RyaW5nKClcbiAgfVxuXG4gIGdldCBjcml0aWNhbFRocmVzaG9sZCAoKSB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIGdldCByZWd1bGFyVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xuICAgICAgaWYgKHRoaXMucmF3VmFsdWUgPj0gMTAwKSByZXR1cm4gOTlcbiAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnJhd1ZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGhhcmRUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnJhd1ZhbHVlIC8gMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGV4dHJlbWVUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnJhd1ZhbHVlIC8gNSlcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGZ1bWJsZVRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlmZmljdWx0eSA+PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5leHRyZW1lVGhyZXNob2xkIDwgNTAgPyA5NiA6IDEwMFxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGlmZmljdWx0eSA+PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5oYXJkVGhyZXNob2xkIDwgNTAgPyA5NiA6IDEwMFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5yYXdWYWx1ZSA8IDUwID8gOTYgOiAxMDBcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzdWNjZXNUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc3dpdGNoICh0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWU6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgIHJldHVybiB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsOlxuICAgICAgICAgIHJldHVybiB0aGlzLmNyaXRpY2FsVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxuICAgICAgICAgIHJldHVybiAtMVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB0aGlzLnJhd1ZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eVN0cmluZyAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXI6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd246XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGdldCBtb2RpZmllZFJlc3VsdCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0eXBlb2YgdGhpcy5fbW9kaWZpZWRSZXN1bHQgIT09ICd1bmRlZmluZWQnKSByZXR1cm4gdGhpcy5fbW9kaWZpZWRSZXN1bHRcbiAgICBpZiAodGhpcy5mbGF0RGljZU1vZGlmaWVyKSB7XG4gICAgICBjb25zdCBtb2RpZmllZCA9IHRoaXMuZGljZXMudG90YWwgKyB0aGlzLmZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGlmIChtb2RpZmllZCA8IDEpIHJldHVybiAxXG4gICAgICBpZiAobW9kaWZpZWQgPiAxMDApIHJldHVybiAxMDBcbiAgICAgIHJldHVybiBtb2RpZmllZFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kaWNlcy50b3RhbFxuICB9XG5cbiAgc2V0IG1vZGlmaWVkUmVzdWx0ICh4KSB7XG4gICAgdGhpcy5fbW9kaWZpZWRSZXN1bHQgPSB4XG4gIH1cblxuICBnZXQgZmxhdERpY2VNb2RpZmllclN0cmluZyAoKSB7XG4gICAgaWYgKCF0aGlzLmZsYXREaWNlTW9kaWZpZXIpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuZmxhdERpY2VNb2RpZmllciA+IDApIHJldHVybiBgKyR7dGhpcy5mbGF0RGljZU1vZGlmaWVyfWBcbiAgICByZXR1cm4gdGhpcy5mbGF0RGljZU1vZGlmaWVyLnRvU3RyaW5nKClcbiAgfVxuXG4gIGdldCBpc0Z1bWJsZSAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLm1vZGlmaWVkUmVzdWx0ID49IHRoaXMuZnVtYmxlVGhyZXNob2xkXG4gIH1cblxuICBnZXQgaXNDcml0aWNhbCAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxXG4gIH1cblxuICBnZXQgaXNFeHRyZW1lU3VjY2VzcyAoKSB7XG4gICAgaWYgKHRoaXMuc3RhbmRieSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWVcbiAgfVxuXG4gIGdldCBwYXNzZWQgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5sdWNrU3BlbnQpIHJldHVybiB0aGlzLmRpZmZpY3VsdHkgPD0gdGhpcy5zdWNjZXNzTGV2ZWxcbiAgICByZXR1cm4gdGhpcy5zdWNjZXNUaHJlc2hvbGQgPj0gdGhpcy5tb2RpZmllZFJlc3VsdCB8fCB0aGlzLmlzQ3JpdGljYWxcbiAgfVxuXG4gIGdldCBmYWlsZWQgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gIXRoaXMucGFzc2VkXG4gIH1cblxuICBnZXQgaXNTaW1wbGVSb2xsICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMucmF3VmFsdWUgPT09ICd1bmRlZmluZWQnXG4gIH1cblxuICBnZXQgaGFzQm9udXMgKCkge1xuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaGFzUGVuYWx0eSAoKSB7XG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyICYmIHRoaXMuZGljZU1vZGlmaWVyIDwgMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNNb2RpZmllciAoKSB7XG4gICAgaWYgKHRoaXMuZGljZU1vZGlmaWVyICYmIHRoaXMuZGljZU1vZGlmaWVyICE9PSAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGRpY2VNb2RpZmllciAoKSB7XG4gICAgaWYgKHRoaXMuX2RpY2VNb2RpZmllcikgcmV0dXJuIHRoaXMuX2RpY2VNb2RpZmllclxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzZXQgZGljZU1vZGlmaWVyICh4KSB7XG4gICAgdGhpcy5fZGljZU1vZGlmaWVyID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLnNob3J0TmFtZVxuICAgICAgaWYgKHRoaXMuaXRlbSkgcmV0dXJuIHRoaXMuaXRlbS5uYW1lXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHRoaXMuY2hhcmFjdGVyaXN0aWMpPy5sYWJlbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ2xjaycpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5JylcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzaG9ydE5hbWUgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy5za2lsbCkgcmV0dXJuIHRoaXMuc2tpbGwuc2hvcnROYW1lXG4gICAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLm5hbWVcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXModGhpcy5jaGFyYWN0ZXJpc3RpYyk/LnNob3J0XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnbGNrJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlID09PSAnc2FuJykgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGZ1bGxOYW1lICgpIHtcbiAgICBjb25zdCBkaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMuX2RpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgICA/IGZhbHNlXG4gICAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcodGhpcy5fZGlmZmljdWx0eSlcbiAgICBjb25zdCBtb2RpZmllciA9XG4gICAgICB0aGlzLl9kaWNlTW9kaWZpZXIgPiAwXG4gICAgICAgID8gYCske3RoaXMuX2RpY2VNb2RpZmllcn1gXG4gICAgICAgIDogdGhpcy5fZGljZU1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgIGBDb0M3LkxpbmtDaGVjayR7IWRpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30ke1xuICAgICAgICAhdGhpcy5fZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICB9YCxcbiAgICAgIHsgZGlmZmljdWx0eSwgbW9kaWZpZXIsIG5hbWU6IHRoaXMubmFtZSB9XG4gICAgKVxuICB9XG5cbiAgZ2V0IHJvbGxlZCAoKSB7XG4gICAgaWYgKHRoaXMuZGljZSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBjaGVjayBmcm9tIGFuIEhUTUxFbGVtZW50IG9yIGEgY2hhdCBjYXJkLlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICBUaGUgSFRNTEVsZW1lbnQgdGhhdCBpcyBhIHJvbGwtcmVzdWx0IG9yIGEgY2hhdCBjYXJkIGNvbnRhaW5pbmcgYSBzaW5nbGUgcm9sbC1yZXN1bHQuXG4gICAqIEByZXR1cm4ge0NvQzdDaGVja30gICAgICBBIENvQzdDaGVjay5cbiAgICovXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHJvbGxSZXN1bHQgPSBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1yZXN1bHQnKVxuICAgICAgPyBjYXJkXG4gICAgICA6IGNhcmQucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIENvQzdSb2xsLmdldEZyb21FbGVtZW50KHJvbGxSZXN1bHQsIGNoZWNrKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjaGVjay5tZXNzYWdlSWQgPSBtZXNzYWdlID8gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG51bGxcbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwdXNoIChjYXJkLCBwdWJsaXNoID0gdHJ1ZSkge1xuICAgIGNvbnN0IG9sZENoZWNrID0gQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpIC8vIFRPRE86IFJlZmFjdG9yaW5nXG4gICAgY29uc3QgYWN0b3JJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICA/IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICA6IGNhcmQuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3Qgc2tpbGxJZCA9IGNhcmQuZGF0YXNldC5za2lsbElkXG4gICAgY29uc3QgY2hhcmFjID0gY2FyZC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgY29uc3QgaXRlbUlkID0gY2FyZC5kYXRhc2V0Lml0ZW1JZFxuICAgIGNvbnN0IGRpY2VNb2QgPSBjYXJkLmRhdGFzZXQuZGljZU1vZFxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBjYXJkLmRhdGFzZXQuZGlmZmljdWx0eVxuXG4gICAgbGV0IHB1c2hlZFJvbGxcbiAgICBpZiAoc2tpbGxJZCkge1xuICAgICAgcHVzaGVkUm9sbCA9IG5ldyBDb0M3Q2hlY2soYWN0b3JJZCwgc2tpbGxJZCwgaXRlbUlkLCBkaWNlTW9kLCBkaWZmaWN1bHR5KVxuICAgIH0gZWxzZSBpZiAoY2hhcmFjKSB7XG4gICAgICBwdXNoZWRSb2xsID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBwdXNoZWRSb2xsLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICAgIHB1c2hlZFJvbGwuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICAgIHB1c2hlZFJvbGwuYWN0b3IgPSBhY3RvcklkXG4gICAgICBwdXNoZWRSb2xsLmNoYXJhY3RlcmlzdGljID0gY2hhcmFjXG4gICAgfSBlbHNlIHJldHVyblxuICAgIGlmIChvbGRDaGVjay51dWlkKSB7XG4gICAgICBwdXNoZWRSb2xsLmNvbnRleHQgPSBvbGRDaGVjay5jb250ZXh0XG4gICAgICBwdXNoZWRSb2xsLnV1aWQgPSBvbGRDaGVjay51dWlkXG4gICAgfVxuICAgIGlmIChvbGRDaGVjay5wYXJlbnQpIHB1c2hlZFJvbGwucGFyZW50ID0gb2xkQ2hlY2sucGFyZW50XG4gICAgcHVzaGVkUm9sbC5wdXNoaW5nID0gdHJ1ZVxuICAgIGF3YWl0IHB1c2hlZFJvbGwucm9sbCgpXG4gICAgaWYgKHB1Ymxpc2gpIHB1c2hlZFJvbGwudG9NZXNzYWdlKHRydWUsIGNhcmQpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIHNldCBhY3RvciAoeCkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSB4XG4gICAgaWYgKHggPT0gbnVsbCkge1xuICAgICAgdGhpcy5fYWN0b3IgPSB4XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoeCBpbnN0YW5jZW9mIEFjdG9yKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHRoaXMuX2FjdG9yID0geFxuICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0aGlzLmFjdG9yLm5hbWVcbiAgICAgIGlmICh4LnRva2VuICYmIHgudG9rZW4uc2NlbmUgJiYgeC50b2tlbi5zY2VuZS5pZCkge1xuICAgICAgICB0aGlzLmFjdG9yS2V5ID0gYCR7eC50b2tlbi5zY2VuZS5pZH0uJHt4LnRva2VuLmlkfWBcbiAgICAgIH0gZWxzZSB0aGlzLmFjdG9yS2V5ID0geC5pZCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmICh4LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHguc3BsaXQoJy4nKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHRoaXMuX2FjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICB0aGlzLl9hY3Rvci5hbGlhcyA9IHRoaXMuX2FjdG9yLm5hbWUgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm5cbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgdGhpcy5fYWN0b3IgPSB0b2tlbi5hY3RvclxuICAgICAgICB0aGlzLl9hY3Rvci5hbGlhcyA9IHRva2VuLm5hbWVcbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIHRoaXMuX2FjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHgpXG4gICAgdGhpcy5hY3Rvci5hbGlhcyA9IHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHN1Y2Nlc3NMZXZlbEljb25zICgpIHtcbiAgICBpZiAodGhpcy51bmtub3duRGlmZmljdWx0eSkgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuc3VjY2Vzc0xldmVsID49IHRoaXMuZGlmZmljdWx0eSkge1xuICAgICAgY29uc3QgaWNvbnMgPSBbXVxuICAgICAgZm9yIChcbiAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgaW5kZXggPCB0aGlzLnN1Y2Nlc3NMZXZlbCAtIHRoaXMuZGlmZmljdWx0eSArIDE7XG4gICAgICAgIGluZGV4KytcbiAgICAgICkge1xuICAgICAgICBpY29ucy5wdXNoKHRoaXMuaXNDcml0aWNhbCA/ICdtZWRhbCcgOiAnc3RhcicpXG4gICAgICB9XG4gICAgICBjb25zdCBzdWNjZXNzSGludCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3VjY2VzTGV2ZWxIaW50Jywge1xuICAgICAgICB2YWx1ZTogdGhpcy5zdWNjZXNzTGV2ZWwgLSB0aGlzLmRpZmZpY3VsdHkgKyAxXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgY3NzQ2xhc3M6IHRoaXMuaXNDcml0aWNhbCA/ICdjcml0aWNhbCcgOiAnc3VjY2VzcycsXG4gICAgICAgIGhpbnQ6IHN1Y2Nlc3NIaW50LFxuICAgICAgICBpY29uc1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpY29ucyA9IFtdXG4gICAgICBjb25zdCBzdWNjZXNzTGV2ZWwgPSB0aGlzLmlzRnVtYmxlID8gLTEgOiB0aGlzLnN1Y2Nlc3NMZXZlbFxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuZGlmZmljdWx0eSAtIHN1Y2Nlc3NMZXZlbDsgaW5kZXgrKykge1xuICAgICAgICBpY29ucy5wdXNoKHRoaXMuaXNGdW1ibGUgPyAnc2t1bGwnIDogJ3NwaWRlcicpXG4gICAgICB9XG4gICAgICBjb25zdCBmYWlsdXJlSGludCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZUxldmVsSGludCcsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMuZGlmZmljdWx0eSAtIHN1Y2Nlc3NMZXZlbFxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBjc3NDbGFzczogdGhpcy5pc0Z1bWJsZSA/ICdmdW1ibGUnIDogJ2ZhaWx1cmUnLFxuICAgICAgICBoaW50OiBmYWlsdXJlSGludCxcbiAgICAgICAgaWNvbnNcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgdW5rbm93bkRpZmZpY3VsdHkgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5Q3JpdGljYWwgfHxcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5RXh0cmVtZSB8fFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlIYXJkIHx8XG4gICAgICB0aGlzLmdtRGlmZmljdWx0eVJlZ3VsYXJcbiAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSB0aGlzLmRpZmZpY3VsdHlcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgc2V0IHNraWxsICh4KSB7XG4gICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9nZXRJdGVtRnJvbUlkKHgpXG4gICAgdGhpcy5za2lsbElkID0geFxuICB9XG5cbiAgc2V0IGl0ZW0gKHgpIHtcbiAgICB0aGlzLl9pdGVtID0gdGhpcy5fZ2V0SXRlbUZyb21JZCh4KVxuICAgIGlmICh0aGlzLl9pdGVtPy50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgdGhpcy5pdGVtSWQgPSB4XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2l0ZW0gPSB1bmRlZmluZWRcbiAgICAgIHRoaXMuaXRlbUlkID0gdW5kZWZpbmVkXG4gICAgfVxuICB9XG5cbiAgX2dldEl0ZW1Gcm9tSWQgKHgpIHtcbiAgICBpZiAoeCA9PSBudWxsKSByZXR1cm4gbnVsbFxuICAgIGlmICh4IGluc3RhbmNlb2YgSXRlbSkgcmV0dXJuIHhcbiAgICBpZiAodGhpcy5fYWN0b3IpIHJldHVybiB0aGlzLl9hY3Rvci5pdGVtcy5nZXQoeClcbiAgICByZXR1cm4gZ2FtZS5pdGVtcy5nZXQoeClcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl9hY3RvciB8fCAhdGhpcy5fYWN0b3I/LmlkKSB7XG4gICAgICBpZiAodGhpcy5hY3RvcktleSkgdGhpcy5fYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICh0aGlzLmFjdG9ySWQpIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcklkKSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGlmICghdGhpcy5fYWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpc0R1bW15OiB0cnVlLFxuICAgICAgICAgIG5hbWU6IHRoaXMuYWN0b3JOYW1lID8gdGhpcy5hY3Rvck5hbWUgOiB1bmRlZmluZWQsXG4gICAgICAgICAgaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICBpbWc6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZycsXG4gICAgICAgICAgcG9ydHJhaXQ6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5fYWN0b3IuY29uc3RydWN0b3IubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gbmV3IENvQ0FjdG9yKHRoaXMuX2FjdG9yKVxuICAgICAgdGhpcy5fYWN0b3IgPSBhY3RvclxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgaWYgKCF0aGlzLl9za2lsbCAmJiB0aGlzLnNraWxsSWQpIHtcbiAgICAgIHRoaXMuX3NraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc2tpbGxJZClcbiAgICB9XG4gICAgaWYgKCF0aGlzLl9za2lsbCAmJiB0aGlzLml0ZW0pIHtcbiAgICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnNraWxsKSB7XG4gICAgICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnNraWxsLm1haW4uaWQgJiYgIXRoaXMud2VhcG9uQWx0U2tpbGwpIHtcbiAgICAgICAgICB0aGlzLl9za2lsbCA9IHRoaXMuX2FjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW0uc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgdGhpcy5pdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkICYmXG4gICAgICAgICAgdGhpcy53ZWFwb25BbHRTa2lsbFxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLl9za2lsbCA9IHRoaXMuX2FjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIHRoaXMuaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fc2tpbGxcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuX2l0ZW0gJiYgdGhpcy5pdGVtSWQgJiYgdGhpcy5hY3Rvcikge1xuICAgICAgdGhpcy5faXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuaXRlbUlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXRlbVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlSZXN1bHRUeXBlICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheVJlc3VsdFR5cGUnKVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcpXG4gIH1cblxuICBnZXQgZGlzcGxheUJvdGhTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiB0aGlzLmRpc3BsYXlSZXN1bHRUeXBlICYmIHRoaXMuZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsXG4gIH1cblxuICBnZXQgZG9udERpc3BsYXlTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiAhdGhpcy5kaXNwbGF5UmVzdWx0VHlwZSAmJiAhdGhpcy5kaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWxcbiAgfVxuXG4gIGdldCBpbWFnZSAoKSB7XG4gICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLmltZ1xuICAgIGlmICh0aGlzLml0ZW0pIHJldHVybiB0aGlzLml0ZW0uaW1nXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGxpbmsgKCkge1xuICAgIHJldHVybiB0aGlzLmdldExpbmtFbGVtZW50KCkub3V0ZXJIVE1MXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldExpbmtFbGVtZW50IChjbGFzc2VzID0gbnVsbCkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBjbHM6IFsnY29jNy1saW5rJywgJ2NvYzctcm9sbCddLmNvbmNhdChjbGFzc2VzKSxcbiAgICAgIGRhdGFzZXQ6IHsgY2hlY2s6ICdjaGVjaycgfSxcbiAgICAgIGljb246IHRoaXMuaW1hZ2VcbiAgICAgICAgPyBgPGRpdiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6IHVybCgke3RoaXMuaW1hZ2V9KVwiPjwvZGl2PmBcbiAgICAgICAgOiAnPGkgY2xhc3M9XCJmYXMgZmEtZGljZVwiPjwvaT4nLFxuICAgICAgYmxpbmQ6IHRoaXMuaXNCbGluZFxuICAgIH1cblxuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eVN0cmluZyh0aGlzLl9kaWZmaWN1bHR5KVxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgIGBDb0M3LkxpbmtDaGVjayR7IXRoaXMuX2RpZmZpY3VsdHkgPyAnJyA6ICdEaWZmJ30ke1xuICAgICAgICAhdGhpcy5fZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnXG4gICAgICB9YCxcbiAgICAgIHtcbiAgICAgICAgZGlmZmljdWx0eSxcbiAgICAgICAgbW9kaWZpZXI6IHRoaXMuX2RpY2VNb2RpZmllcixcbiAgICAgICAgbmFtZTogdGhpcy5uYW1lXG4gICAgICB9XG4gICAgKVxuXG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGEudGl0bGUgPSB0aXRsZVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgICBhLmlubmVySFRNTCA9IGAke2RhdGEuYmxpbmQgPyAnPGkgY2xhc3M9XCJmYXMgZmEtZXllLXNsYXNoXCI+PC9pPicgOiAnJ30ke1xuICAgICAgZGF0YS5pY29uXG4gICAgfSR7dGhpcy5uYW1lfWBcblxuICAgIHJldHVybiBhXG4gIH1cblxuICBhc3luYyByb2xsIChkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKG9wdGlvbnMpXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgY2hlY2sgd2l0aCB0aGUgcHJvdmlkZWQgZGF0YVxuICAgKiBQcm9jZXNzIHJvbGwgZGF0YSB0byBhIGZvcm1hdCB0aGF0IGNhbiBiZSBmZWQgdG8gY3JlYXRlKClcbiAgICogQHBhcmFtIHsqfSByb2xsRGF0YSBBIHJvbGwgZGF0YSBzdHJ1Y3R1cmUgYXMgcmV0dXJuZWQgYnkgYWN0b3IuZmluZFxuICAgKiBAcmV0dXJucyBBIGNoZWNrIHdpdGggdGhlIHJvbGwgZGF0YSBwcm92aWRlZFxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZUZyb21BY3RvclJvbGxEYXRhIChyb2xsRGF0YSkge1xuICAgIGNvbnN0IHJvbGwgPSB7fVxuICAgIC8vIGNoZWNrIE1vZGlmaWVyXG4gICAgaWYgKHJvbGxEYXRhLmRpZmZpY3VsdHkpIHJvbGwuZGlmZmljdWx0eSA9IHJvbGxEYXRhLmRpZmZpY3VsdHlcbiAgICBpZiAocm9sbERhdGEuZGljZU1vZGlmaWVyKSByb2xsLmRpY2VNb2RpZmllciA9IHJvbGxEYXRhLmRpY2VNb2RpZmllclxuICAgIGlmIChyb2xsRGF0YS5kZW55UHVzaCA9PT0gdHJ1ZSkgcm9sbC5kZW55UHVzaCA9IHRydWVcbiAgICBpZiAocm9sbERhdGEuZmxhdERpY2VNb2RpZmllcikge1xuICAgICAgcm9sbC5mbGF0RGljZU1vZGlmaWVyID0gcm9sbERhdGEuZmxhdERpY2VNb2RpZmllclxuICAgIH1cbiAgICBpZiAocm9sbERhdGEuZmxhdFRocmVzaG9sZE1vZGlmaWVyKSB7XG4gICAgICByb2xsLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IHJvbGxEYXRhLmZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgIH1cbiAgICAvLyBBY3RvclxuICAgIGlmIChyb2xsRGF0YS5hY3Rvcj8uYWN0b3JLZXkpIHJvbGwuYWN0b3JLZXkgPSByb2xsRGF0YS5hY3Rvci5hY3RvcktleVxuICAgIGVsc2UgaWYgKHJvbGxEYXRhLmFjdG9yPy5uYW1lKSByb2xsLmFjdG9yTmFtZSA9IHJvbGxEYXRhLmFjdG9yLm5hbWVcbiAgICAvLyBDaGVjayB0eXBlXG4gICAgc3dpdGNoIChyb2xsRGF0YS50eXBlKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay50eXBlLmNoYXJhY3RlcmlzdGljOlxuICAgICAgICByb2xsLmNoYXJhY3RlcmlzdGljID0gcm9sbERhdGEudmFsdWU/LmtleVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5hdHRyaWJ1dGU6XG4gICAgICAgIHJvbGwuYXR0cmlidXRlID0gcm9sbERhdGEudmFsdWU/LmtleVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5pdGVtOlxuICAgICAgICByb2xsLmFjdG9yS2V5ID0gcm9sbERhdGEudmFsdWUuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgaWYgKHJvbGxEYXRhLnZhbHVlPy50eXBlID09PSAnc2tpbGwnKSByb2xsLnNraWxsID0gcm9sbERhdGEudmFsdWUuaWRcbiAgICAgICAgZWxzZSByb2xsLml0ZW0gPSByb2xsRGF0YS52YWx1ZS5pZFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5za2lsbDpcbiAgICAgICAgcm9sbC5hY3RvcktleSA9IHJvbGxEYXRhLnZhbHVlLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIHJvbGwuc2tpbGwgPSByb2xsRGF0YS52YWx1ZS5pZFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS52YWx1ZTpcbiAgICAgICAgcm9sbC5kaXNwbGF5TmFtZSA9IHJvbGxEYXRhLnZhbHVlLm5hbWVcbiAgICAgICAgcm9sbC5yYXdWYWx1ZSA9IHJvbGxEYXRhLnZhbHVlLnRocmVzaG9sZFxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5jcmVhdGUocm9sbClcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGUgKHtcbiAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyLFxuICAgIGRpY2VNb2RpZmllciA9IG51bGwsXG4gICAgYWN0b3JLZXkgPSBudWxsLFxuICAgIGNoYXJhY3RlcmlzdGljID0gbnVsbCxcbiAgICBhdHRyaWJ1dGUgPSBudWxsLFxuICAgIHJhd1ZhbHVlID0gMCxcbiAgICBpdGVtID0gbnVsbCxcbiAgICBza2lsbCA9IG51bGwsXG4gICAgZmxhdERpY2VNb2RpZmllciA9IDAsXG4gICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gMCxcbiAgICBkaXNwbGF5TmFtZSA9IG51bGwsXG4gICAgYWN0b3JOYW1lID0gbnVsbCxcbiAgICBkZW55UHVzaCA9IHVuZGVmaW5lZFxuICB9ID0ge30pIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgaWYgKGRlbnlQdXNoID09PSB0cnVlKSBjaGVjay5kZW55UHVzaCA9IHRydWVcbiAgICBpZiAoZGljZU1vZGlmaWVyKSBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXJcbiAgICBpZiAoZmxhdERpY2VNb2RpZmllcikgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICBpZiAoZmxhdFRocmVzaG9sZE1vZGlmaWVyKSB7XG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICB9XG4gICAgaWYgKGRpc3BsYXlOYW1lKSBjaGVjay5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lXG4gICAgaWYgKGFjdG9yS2V5KSBjaGVjay5hY3RvciA9IGFjdG9yS2V5XG4gICAgaWYgKGFjdG9yTmFtZSkgY2hlY2suYWN0b3JOYW1lID0gYWN0b3JOYW1lXG4gICAgaWYgKCFpc05hTihOdW1iZXIocmF3VmFsdWUpKSkgY2hlY2sucmF3VmFsdWUgPSBOdW1iZXIocmF3VmFsdWUpXG4gICAgaWYgKGNoZWNrLmFjdG9yICYmICFjaGVjay5hY3Rvci5pc0R1bW15KSB7XG4gICAgICAvLyBUT0RPIDogQWRkIGNoZWNrIGZvciB2YWxpZGl0eSBvZiBjaGFyYWN0ZXJpc3RpYywgYXR0cmlidXRlLCBza2lsbElkXG4gICAgICBpZiAoc2tpbGwpIGNoZWNrLnNraWxsID0gc2tpbGxcbiAgICAgIC8vIFRPRE8gOiB0cnkgcmV0cmlldmUgc2tpbGwgYnkgbmFtZVxuICAgICAgZWxzZSBpZiAoY2hhcmFjdGVyaXN0aWMpIGNoZWNrLmNoYXJhY3RlcmlzdGljID0gY2hhcmFjdGVyaXN0aWNcbiAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZSkgY2hlY2suYXR0cmlidXRlID0gYXR0cmlidXRlXG4gICAgICBlbHNlIGlmIChpdGVtKSBjaGVjay5pdGVtID0gaXRlbVxuICAgIH1cbiAgICByZXR1cm4gY2hlY2tcbiAgfVxuXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpYyAoY2hhciwgZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsKSB7XG4gICAgaWYgKGRpY2VNb2QpIHRoaXMuZGljZU1vZGlmaWVyID0gZGljZU1vZFxuICAgIGlmIChkaWZmaWN1bHR5KSB0aGlzLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgdGhpcy5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXG4gIH1cblxuICBhc3luYyByb2xsQXR0cmlidXRlIChhdHRyaWIsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuYXR0cmlidXRlID0gYXR0cmliXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgYXN5bmMgcm9sbFZhbHVlICh2YWwsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMucmF3VmFsdWUgPSB2YWxcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybSgpXG4gIH1cblxuICBnZXQgcm9sbGVkU3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdWNjZXNzTGV2ZWxcbiAgfVxuXG4gIGFzeW5jIF9wZXJmb3JtIChvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmRpY2UgPVxuICAgICAgb3B0aW9ucy5yb2xsIHx8XG4gICAgICAoYXdhaXQgQ29DN0RpY2Uucm9sbCh0aGlzLmRpY2VNb2RpZmllciwgdGhpcy5yb2xsTW9kZSwgdGhpcy5pc0JsaW5kKSlcbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50ICYmICFnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBBdWRpb0hlbHBlci5wbGF5KHsgc3JjOiBDT05GSUcuc291bmRzLmRpY2UgfSwgdHJ1ZSlcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5mb3JjZURTTikge1xuICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5kaWNlLnJvbGwpXG4gICAgfVxuXG4gICAgdGhpcy5kaWNlcyA9IHtcbiAgICAgIHRlbnM6IFtdLFxuICAgICAgdW5pdDoge1xuICAgICAgICB2YWx1ZTogdGhpcy5kaWNlLnVuaXQudG90YWxcbiAgICAgIH0sXG4gICAgICB0b3RhbDogdGhpcy5kaWNlLnRvdGFsLFxuICAgICAgdGVuUmVzdWx0OiB0aGlzLmRpY2UudG90YWwgLSB0aGlzLmRpY2UudW5pdC50b3RhbCxcbiAgICAgIGhhc0JvbnVzOiAhIXRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgYm9udXM6IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKSxcbiAgICAgIGJvbnVzVHlwZTpcbiAgICAgICAgdGhpcy5kaWNlTW9kaWZpZXIgPCAwXG4gICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRpY2VNb2RpZmllclBlbmFsdHknKVxuICAgICAgICAgIDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJCb251cycpLFxuICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5XG4gICAgfVxuXG4gICAgY29uc3QgbWF4ID0gdGhpcy5kaWNlLnVuaXQudG90YWwgPT09IDAgPyAxMDAgOiA5MFxuICAgIGNvbnN0IG1pbiA9IHRoaXMuZGljZS51bml0LnRvdGFsID09PSAwID8gMTAgOiAwXG4gICAgbGV0IHNlbGVjdGVkID0gdGhpcy5kaWNlLnRvdGFsIC0gdGhpcy5kaWNlLnVuaXQudG90YWxcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5kaWNlLnRlbnMucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZGllID0ge31cbiAgICAgIGRpZS52YWx1ZSA9IHRoaXMuZGljZS50ZW5zLnJlc3VsdHNbaV1cbiAgICAgIGlmIChkaWUudmFsdWUgPT09IHNlbGVjdGVkKSB7XG4gICAgICAgIHNlbGVjdGVkID0gMTAxXG4gICAgICAgIGRpZS5zZWxlY3RlZCA9IHRydWVcbiAgICAgICAgaWYgKHRoaXMuZGljZXMuaGFzQm9udXMpIHtcbiAgICAgICAgICBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWluID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWF4KSBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWluKSBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWluID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8vIGlmKCBkaWUudmFsdWUgPT0gMTAwKSBkaWUudmFsdWUgPSBcIjAwXCI7XG4gICAgICB0aGlzLmRpY2VzLnRlbnMucHVzaChkaWUpXG4gICAgfVxuICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgfVxuXG4gIGFzeW5jIGNvbXB1dGVDaGVjayAoKSB7XG4gICAgdGhpcy5pc1Vua25vd24gPSB0aGlzLnVua25vd25EaWZmaWN1bHR5XG5cbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlSZWd1bGFyKSB7XG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5SGFyZCkgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5RXh0cmVtZSkge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgfVxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUNyaXRpY2FsKSB7XG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgfVxuXG4gICAgdGhpcy50ZW5Pbmx5T25lRGllID0gdGhpcy5kaWNlcy50ZW5zLmxlbmd0aCA9PT0gMVxuXG4gICAgdGhpcy5pc1ZhbHVlID0gZmFsc2VcbiAgICB0aGlzLmlzQ2hhcmFjdGlyaXN0aWMgPSBmYWxzZVxuICAgIHRoaXMuaXNTa2lsbCA9IGZhbHNlXG4gICAgdGhpcy5pc0l0ZW0gPSBmYWxzZVxuICAgIHRoaXMuaXNBdHRyaWJ1dGUgPSBmYWxzZVxuICAgIGlmICh0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgdGhpcy5kZW55UHVzaCA9IHRydWVcbiAgICAgIHRoaXMuZGVueUx1Y2sgPSB0cnVlXG4gICAgfSBlbHNlIGlmICh0aGlzLmFjdG9yID09IG51bGwpIHtcbiAgICAgIHRoaXMuaXNWYWx1ZSA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgdGhpcy5pc0NoYXJhY3RpcmlzdGljID0gdHJ1ZVxuICAgICAgICB0aGlzLnJhd1ZhbHVlID1cbiAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10udmFsdWVcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgICAgdGhpcy5pc1NraWxsID0gdHJ1ZVxuICAgICAgICB0aGlzLnJhd1ZhbHVlID0gdGhpcy5za2lsbC52YWx1ZVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgICAgdGhpcy5pc0F0dHJpYnV0ZSA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmx1Y2tTcGVudCAmJiAhdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXJcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMuaGFyZFRocmVzaG9sZCkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPD0gdGhpcy5leHRyZW1lVGhyZXNob2xkKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuZnVtYmxlVGhyZXNob2xkIDw9IHRoaXMubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZVxuICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZTpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GdW1ibGUnKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgaWYgKHRoaXMudW5rbm93bkRpZmZpY3VsdHkpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc1JlcXVpcmVkID0gJydcbiAgICB9IGVsc2UgaWYgKCF0aGlzLmlzU2ltcGxlUm9sbCkge1xuICAgICAgdGhpcy5zdWNjZXNzUmVxdWlyZWQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlN1Y2Nlc3NSZXF1aXJlZCcsIHtcbiAgICAgICAgc3VjY2Vzc1JlcXVpcmVkOiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPT09IDEpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbFxuICAgIH1cbiAgICBpZiAoIXRoaXMubHVja1NwZW50ICYmICF0aGlzLmlzVW5rbm93biAmJiAhdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuaXNGYWlsdXJlID0gdGhpcy5mYWlsZWRcbiAgICAgIHRoaXMuaXNTdWNjZXNzID0gdGhpcy5wYXNzZWRcbiAgICB9XG5cbiAgICB0aGlzLmhhc01hbGZ1bmN0aW9uID0gZmFsc2VcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZVxuXG4gICAgaWYgKHRoaXMuaXRlbSkge1xuICAgICAgdGhpcy5pc0l0ZW0gPSB0cnVlXG4gICAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5tYWxmdW5jdGlvbikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgTnVtYmVyKHRoaXMubW9kaWZpZWRSZXN1bHQpID49IE51bWJlcih0aGlzLml0ZW0uc3lzdGVtLm1hbGZ1bmN0aW9uKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLmhhc01hbGZ1bmN0aW9uID0gdHJ1ZVxuICAgICAgICAgIHRoaXMubWFsZnVuY3Rpb25UeHQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbGZ1bmN0aW9uJywge1xuICAgICAgICAgICAgaXRlbU5hbWU6IHRoaXMuaXRlbS5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlSXRlbUZsYWcoQ29DN0l0ZW0uZmxhZ3MubWFsZnVuY3Rpb24pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuY2FuQmVQdXNoZWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmNhbkJlUHVzaGVkID0gdGhpcy5za2lsbCA/IHRoaXMuc2tpbGwuY2FuQmVQdXNoZWQoKSA6IGZhbHNlXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYyAhPSBudWxsKSB0aGlzLmNhbkJlUHVzaGVkID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuaXNGdW1ibGUpIHRoaXMuY2FuQmVQdXNoZWQgPSBmYWxzZVxuICAgICAgaWYgKHRoaXMuZGVueVB1c2gpIHRoaXMuY2FuQmVQdXNoZWQgPSBmYWxzZVxuICAgIH1cblxuICAgIGlmICghdGhpcy5kZW55THVjayAmJiB0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAoXG4gICAgICAgICF0aGlzLmx1Y2tTcGVudCAmJlxuICAgICAgICAhdGhpcy5wYXNzZWQgJiZcbiAgICAgICAgIXRoaXMuaXNGdW1ibGUgJiZcbiAgICAgICAgdGhpcy5kaWZmaWN1bHR5ICE9PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsICYmXG4gICAgICAgICF0aGlzLnVua25vd25EaWZmaWN1bHR5XG4gICAgICApIHtcbiAgICAgICAgaWYgKHRoaXMuc2tpbGwgfHwgdGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICAgIGNvbnN0IGx1Y2tOZWVkZWQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5zdWNjZXNUaHJlc2hvbGRcbiAgICAgICAgICBpZiAodGhpcy5hY3Rvci5sdWNrID4gbHVja05lZWRlZCkge1xuICAgICAgICAgICAgdGhpcy5oYXNFbm91Z2hMdWNrID0gdHJ1ZVxuICAgICAgICAgICAgdGhpcy5sdWNrTmVlZGVkID0gbHVja05lZWRlZFxuICAgICAgICAgICAgdGhpcy5sdWNrTmVlZGVkVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVuZEx1Y2snLCB7XG4gICAgICAgICAgICAgIGx1Y2tOZWVkZWRWYWx1ZTogbHVja05lZWRlZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmx1Y2tTcGVudCkge1xuICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2VzcyA9IFtdXG5cbiAgICAgICAgLy8gQ2FuJ3Qgc3BlbmQgbHVjayBvbiBwdXNoZWQgcm9sbHMuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAhdGhpcy5wdXNoaW5nICYmXG4gICAgICAgICAgdGhpcy5hdHRyaWJ1dGUgIT09ICdsY2snICYmXG4gICAgICAgICAgdGhpcy5hdHRyaWJ1dGUgIT09ICdzYW4nXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMudW5rbm93bkRpZmZpY3VsdHkgJiZcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IHt9XG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5J1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPSB0aGlzLm1vZGlmaWVkUmVzdWx0IC0gdGhpcy5yZWd1bGFyVGhyZXNob2xkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmhhc0Vub3VnaEx1Y2sgPSBuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrXG4gICAgICAgICAgICBpZiAobmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjaykge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5leHRMZXZlbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPD0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyICYmXG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHlOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmx1Y2tUb1NwZW5kID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMuaGFyZFRocmVzaG9sZCAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5oYXNFbm91Z2hMdWNrID0gbmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVja1xuICAgICAgICAgICAgaWYgKG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2spIHtcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5IDw9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCAmJlxuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsID0ge31cbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgICAgICAgICAgbmV4dExldmVsLmx1Y2tUb1NwZW5kID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMuZXh0cmVtZVRocmVzaG9sZCAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5oYXNFbm91Z2hMdWNrID0gbmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjayAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV4dExldmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmNhbkluY3JlYXNlU3VjY2VzcyA9IHRoaXMuaW5jcmVhc2VTdWNjZXNzLmxlbmd0aCA+IDBcbiAgICAgIGlmICh0aGlzLmlzRnVtYmxlKSB0aGlzLmNhbkluY3JlYXNlU3VjY2VzcyA9IGZhbHNlXG4gICAgfVxuXG4gICAgdGhpcy5jYW5Bd2FyZEV4cGVyaWVuY2UgPVxuICAgICAgdGhpcy5za2lsbCAmJiAhdGhpcy5za2lsbC5zeXN0ZW0ucHJvcGVydGllcy5ub3hwZ2FpblxuXG4gICAgaWYgKFxuICAgICAgdGhpcy5wYXNzZWQgJiZcbiAgICAgIHRoaXMuZGljZU1vZGlmaWVyIDw9IDAgJiZcbiAgICAgIHRoaXMuc2tpbGwgJiZcbiAgICAgICF0aGlzLnNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLm5veHBnYWluICYmXG4gICAgICAhdGhpcy5sdWNrU3BlbnQgJiZcbiAgICAgICF0aGlzLmZvcmNlZCAmJlxuICAgICAgIXRoaXMuaXNCbGluZCAmJlxuICAgICAgIXRoaXMuaXNVbmtub3duXG4gICAgKSB7XG4gICAgICB0aGlzLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcmVudCkge1xuICAgICAgY29uc3QgcGFyZW50ID0gYXdhaXQgZnJvbVV1aWQodGhpcy5wYXJlbnQpXG4gICAgICBpZiAocGFyZW50ICYmICd1cGRhdGVSb2xsJyBpbiBwYXJlbnQpIHtcbiAgICAgICAgYXdhaXQgcGFyZW50LnVwZGF0ZVJvbGwodGhpcy5KU09OUm9sbFN0cmluZylcbiAgICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgUm9sbCAke3RoaXMudXVpZH0gZGVwZW5kcyBvZiAke3RoaXMucGFyZW50fWApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2hvd0RpY2VSb2xsICgpIHtcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgY29uc3QgZGljZVJlc3VsdHMgPSBbXVxuICAgICAgZm9yIChjb25zdCBkaWVSZXN1bHQgb2YgdGhpcy5kaWNlcy50ZW5zKSB7XG4gICAgICAgIGRpY2VSZXN1bHRzLnB1c2goZGllUmVzdWx0LnZhbHVlID09PSAxMDAgPyAwIDogZGllUmVzdWx0LnZhbHVlIC8gMTApXG4gICAgICB9XG4gICAgICBkaWNlUmVzdWx0cy5wdXNoKHRoaXMuZGljZXMudW5pdC52YWx1ZSlcblxuICAgICAgY29uc3QgZGljZURhdGEgPSB7XG4gICAgICAgIGZvcm11bGE6IGAke3RoaXMuZGljZXMudGVucy5sZW5ndGh9ZDEwMCsxZDEwYCxcbiAgICAgICAgcmVzdWx0czogZGljZVJlc3VsdHMsXG4gICAgICAgIHdoaXNwZXI6IG51bGwsXG4gICAgICAgIGJsaW5kOiBmYWxzZVxuICAgICAgfVxuICAgICAgZ2FtZS5kaWNlM2Quc2hvdyhkaWNlRGF0YSlcbiAgICB9XG4gIH1cblxuICBnZXQgY3NzQ2xhc3MgKCkge1xuICAgIGxldCBjc3NDbGFzcyA9ICcnXG4gICAgaWYgKHRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcyA9ICdzdWNjZXNzJ1xuICAgIGlmICh0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MgPSAnZmFpbHVyZSdcbiAgICBpZiAodGhpcy5pc0NyaXRpY2FsICYmICF0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MgPSAnc3VjY2VzcyBjcml0aWNhbCdcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSAmJiAhdGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzID0gJ2ZhaWx1cmUgZnVtYmxlJ1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcyArPSAnIHJlZ3VsYXItc3VjY2VzcydcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzICs9ICcgaGFyZC1zdWNjZXNzJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MgKz0gJyBleHRyZW1lLXN1Y2Nlc3MnXG4gICAgfVxuXG4gICAgcmV0dXJuIGNzc0NsYXNzXG4gIH1cblxuICBnZXQgY3NzQ2xhc3NMaXN0ICgpIHtcbiAgICBjb25zdCBjc3NDbGFzcyA9IFtdXG4gICAgaWYgKHRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcy5wdXNoKCdzdWNjZXNzJylcbiAgICBpZiAodGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzLnB1c2goJ2ZhaWx1cmUnKVxuICAgIGlmICh0aGlzLmlzQ3JpdGljYWwgJiYgIXRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcy5wdXNoKCdzdWNjZXNzJywgJ2NyaXRpY2FsJylcbiAgICBpZiAodGhpcy5pc0Z1bWJsZSAmJiAhdGhpcy5pc1N1Y2Nlc3MpIGNzc0NsYXNzLnB1c2goJ2ZhaWx1cmUnLCAnZnVtYmxlJylcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MucHVzaCgncmVndWxhci1zdWNjZXNzJylcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2goJ2hhcmQtc3VjY2VzcycpXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcy5wdXNoKCdleHRyZW1lLXN1Y2Nlc3MnKVxuICAgIH1cblxuICAgIHJldHVybiBjc3NDbGFzc1xuICB9XG5cbiAgZ2V0IHBsYXllckNzc0NsYXNzICgpIHtcbiAgICBpZiAodGhpcy5pc1N1Y2Nlc3MgfHwgdGhpcy5mb3JjZWRTdWNjZXNzKSByZXR1cm4gJ3N1Y2Nlc3MnXG4gICAgaWYgKHRoaXMuaXNGYWlsdXJlIHx8IHRoaXMuZm9yY2VkRmFpbHVyZSkgcmV0dXJuICdmYWlsdXJlJ1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyB1cGdyYWRlQ2hlY2sgKHVwZ3JhZGVpbmRleCwgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGluY3JlYXNlZFN1Y2Nlc3MgPSB0aGlzLmluY3JlYXNlU3VjY2Vzc1t1cGdyYWRlaW5kZXhdXG4gICAgY29uc3QgbHVja0Ftb3VudCA9XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tBbW91bnQpIHx8XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmx1Y2tUb1NwZW5kKSAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICBpZiAoIXRoaXMuYWN0b3Iuc3BlbmRMdWNrKGx1Y2tBbW91bnQpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90RW5vdWdoTHVjaycsIHtcbiAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy50b3RhbEx1Y2tTcGVudCA9ICFwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgICAgPyAwXG4gICAgICA6IHBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgdGhpcy50b3RhbEx1Y2tTcGVudCArPSBwYXJzZUludChsdWNrQW1vdW50KVxuICAgIGNvbnN0IG5ld1N1Y2Nlc3NMZXZlbCA9XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLm5ld1N1Y2Nlc3NMZXZlbCkgfHxcbiAgICAgIHBhcnNlSW50KGluY3JlYXNlZFN1Y2Nlc3MuZGlmZmljdWx0eSkgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBpZiAodGhpcy5kaWZmaWN1bHR5IDw9IG5ld1N1Y2Nlc3NMZXZlbCkge1xuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgICB0aGlzLmlzRmFpbHVyZSA9IGZhbHNlXG4gICAgfVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB1cGdyYWRlaW5kZXggKyAxOyBpbmRleCsrKSB7XG4gICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5zaGlmdCgpXG4gICAgfVxuICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmluY3JlYXNlU3VjY2Vzcykge1xuICAgICAgcy5sdWNrVG9TcGVuZCA9IHMubHVja1RvU3BlbmQgLSBsdWNrQW1vdW50XG4gICAgfVxuICAgIHRoaXMubHVja1NwZW50ID0gdHJ1ZVxuICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgICBpZiAodXBkYXRlKSByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICByZW1vdmVVcGdyYWRlcyAoKSB7XG4gICAgdGhpcy5jYW5JbmNyZWFzZVN1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzID0gW11cbiAgICB0aGlzLmx1Y2tOZWVkZWQgPSAwXG4gICAgdGhpcy5sdWNrTmVlZGVkVHh0ID0gbnVsbFxuICAgIHRoaXMuY2FuQmVQdXNoZWQgPSBmYWxzZVxuICB9XG5cbiAgZm9yY2VQYXNzIChsdWNrQW1vdW50ID0gbnVsbCwgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGlmIChsdWNrQW1vdW50KSB7XG4gICAgICB0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KVxuICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSB0aGlzLmRpZmZpY3VsdHlcbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmluY3JlYXNlU3VjY2Vzcykge1xuICAgICAgICBzLmx1Y2tUb1NwZW5kID0gcy5sdWNrVG9TcGVuZCAtIGx1Y2tBbW91bnRcbiAgICAgIH1cbiAgICAgIHRoaXMubHVja1NwZW50ID0gdHJ1ZVxuICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlXG4gICAgICB0aGlzLmlzRmFpbHVyZSA9IGZhbHNlXG4gICAgICB0aGlzLnRvdGFsTHVja1NwZW50ID0gIXBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgICAgID8gMFxuICAgICAgICA6IHBhcnNlSW50KHRoaXMudG90YWxMdWNrU3BlbnQpXG4gICAgICB0aGlzLnRvdGFsTHVja1NwZW50ICs9IHBhcnNlSW50KGx1Y2tBbW91bnQpXG4gICAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gICAgICBpZiAodXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mb3JjZWQgPSB0cnVlXG4gICAgICB0aGlzLmZvcmNlZFN1Y2Nlc3MgPSB0cnVlXG4gICAgICBpZiAodGhpcy5pc1Vua25vd24pIHtcbiAgICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIsIHVwZGF0ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwodGhpcy5kaWZmaWN1bHR5LCB1cGRhdGUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm9yY2VGYWlsICh1cGRhdGUgPSB0cnVlKSB7XG4gICAgdGhpcy5mb3JjZWQgPSB0cnVlXG4gICAgdGhpcy5mb3JjZWRGYWlsdXJlID0gdHJ1ZVxuICAgIGlmICh0aGlzLmlzVW5rbm93bikge1xuICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUsIHVwZGF0ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mb3JjZVN1Y2Nlc3NMZXZlbCh0aGlzLmRpZmZpY3VsdHkgLSAxLCB1cGRhdGUpXG4gICAgfVxuICB9XG5cbiAgX2ZvcmNlQ2hlY2sgKGhpZ2gsIGxvdywgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCB0b3RhbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChoaWdoIC0gbG93KSkgKyBsb3cgKyAxXG4gICAgY29uc3QgdW5pdFRvdGFsID0gdG90YWwgJSAxMFxuICAgIGxldCB0ZW5Ub3RhbCA9IE1hdGguZmxvb3IodG90YWwgLyAxMClcbiAgICBjb25zdCB0ZW5zID0gW11cblxuICAgIGxldCBoYXNFbm91Z2ggPSBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllcikgPT09IHRlbnMubGVuZ3RoXG4gICAgd2hpbGUgKCFoYXNFbm91Z2gpIHtcbiAgICAgIGxldCB0ZW4gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMClcbiAgICAgIGxldCByb2xsID0gdGVuICogMTAgKyB1bml0VG90YWxcbiAgICAgIGlmIChyb2xsID09PSAwKSB7XG4gICAgICAgIHJvbGwgPSAxMDBcbiAgICAgICAgdGVuID0gMTAwXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oYXNQZW5hbHR5ICYmIHJvbGwgPD0gaGlnaCkge1xuICAgICAgICB0ZW5zLnB1c2godGVuKVxuICAgICAgICBpZiAocm9sbCA+IHRvdGFsKSB0b3RhbCA9IHJvbGxcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhhc0JvbnVzICYmIHJvbGwgPiBsb3cpIHtcbiAgICAgICAgdGVucy5wdXNoKHRlbilcbiAgICAgICAgaWYgKHJvbGwgPCB0b3RhbCkgdG90YWwgPSByb2xsXG4gICAgICB9XG4gICAgICBoYXNFbm91Z2ggPSB0ZW5zLmxlbmd0aCA9PT0gTWF0aC5hYnModGhpcy5kaWNlTW9kaWZpZXIpXG4gICAgfVxuXG4gICAgLy8gSW5zZXJ0IHJlc3VsdCBhdCByYW5kb20gcG9zaXRpb24uXG4gICAgaWYgKHRlblRvdGFsID09PSAxMCAmJiB1bml0VG90YWwgPT09IDApIHtcbiAgICAgIHRlblRvdGFsID0gMTAwXG4gICAgfVxuICAgIHRlbnMuc3BsaWNlKFxuICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGVucy5sZW5ndGggKyAxKSxcbiAgICAgIDAsXG4gICAgICB0ZW5Ub3RhbCA9PT0gMTAgPyAwIDogdGVuVG90YWxcbiAgICApXG5cbiAgICB0aGlzLmRpY2VzLnRlbnMgPSBbXVxuICAgIHRoaXMuZGljZXMudW5pdC52YWx1ZSA9IHVuaXRUb3RhbFxuICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPSB0b3RhbFxuICAgIHRoaXMuZGljZXMudG90YWwgPSB0b3RhbFxuICAgIHRoaXMuZGljZXMudGVuUmVzdWx0ID0gdG90YWwgLSB1bml0VG90YWxcblxuICAgIGNvbnN0IG1heCA9IHVuaXRUb3RhbCA9PT0gMCA/IDEwMCA6IDkwXG4gICAgY29uc3QgbWluID0gdW5pdFRvdGFsID09PSAwID8gMTAgOiAwXG4gICAgbGV0IHNlbGVjdGVkID0gdG90YWwgLSB1bml0VG90YWxcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVucy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZGllID0ge31cbiAgICAgIGRpZS52YWx1ZSA9IHRlbnNbaV1cbiAgICAgIGlmIChkaWUudmFsdWUgPT09IHNlbGVjdGVkKSB7XG4gICAgICAgIHNlbGVjdGVkID0gMTAxXG4gICAgICAgIGRpZS5zZWxlY3RlZCA9IHRydWVcbiAgICAgICAgaWYgKHRoaXMuaGFzQm9udXMpIHtcbiAgICAgICAgICBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWluID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgICAgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWF4KSBkaWUuaXNNYXggPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWF4ID0gZmFsc2VcbiAgICAgICAgaWYgKGRpZS52YWx1ZSA9PT0gbWluKSBkaWUuaXNNaW4gPSB0cnVlXG4gICAgICAgIGVsc2UgZGllLmlzTWluID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIC8vIGlmKCBkaWUudmFsdWUgPT0gMTAwKSBkaWUudmFsdWUgPSBcIjAwXCI7XG4gICAgICB0aGlzLmRpY2VzLnRlbnMucHVzaChkaWUpXG4gICAgfVxuXG4gICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICAgIGlmICh1cGRhdGUpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgZm9yY2VTdWNjZXNzTGV2ZWwgKHN1Y2Nlc3NMZXZlbCwgdXBkYXRlID0gdHJ1ZSkge1xuICAgIGxldCBoaWdoLCBsb3dcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGUgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IDEwMFxuICAgICAgbG93ID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaWYgKHRoaXMucmVndWxhclRocmVzaG9sZCA9PT0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxKSB7XG4gICAgICAgIGhpZ2ggPSAxMDBcbiAgICAgIH0gZWxzZSBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgICBsb3cgPSB0aGlzLnJlZ3VsYXJUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICBsb3cgPSAxXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSAxXG4gICAgICBsb3cgPSAwXG4gICAgfVxuICAgIGlmIChoaWdoID09PSBsb3cpIGxvdy0tXG4gICAgaWYgKGhpZ2ggPT09IDApIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB0aGlzLl9mb3JjZUNoZWNrKGhpZ2gsIGxvdywgdXBkYXRlKVxuICB9XG5cbiAgaW5jcmVhc2VTdWNjZXNzTGV2ZWwgKHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgaGlnaCwgbG93XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgICAgaWYgKHRoaXMucmVndWxhclRocmVzaG9sZCA9PT0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxKSB7XG4gICAgICAgIGxvdyA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG93ID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuY3JpdGljYWxUaHJlc2hvbGRcbiAgICAgIGxvdyA9IDBcbiAgICB9XG4gICAgaWYgKGhpZ2ggPT09IGxvdykgbG93LS1cbiAgICB0aGlzLl9mb3JjZUNoZWNrKGhpZ2gsIGxvdywgdXBkYXRlKVxuICB9XG5cbiAgZGVjcmVhc2VTdWNjZXNzTGV2ZWwgKHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgaGlnaCwgbG93XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSAxMDBcbiAgICAgIGxvdyA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgICAgbG93ID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgIGxvdyA9IDFcbiAgICB9XG4gICAgaWYgKGhpZ2ggPT09IDApIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB0aGlzLl9mb3JjZUNoZWNrKGhpZ2gsIGxvdywgdXBkYXRlKVxuICB9XG5cbiAgYXN5bmMgZmxhZ0ZvckRldmVsb3BlbWVudCAoKSB7XG4gICAgdGhpcy5mbGFnZ2VkRm9yRGV2ZWxvcG1lbnQgPSB0cnVlXG4gICAgaWYgKHRoaXMuc2tpbGwpIGF3YWl0IHRoaXMuc2tpbGwuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gIH1cblxuICBzZXQgZGlmZmljdWx0eSAoeCkge1xuICAgIHRoaXMuX2RpZmZpY3VsdHkgPSBwYXJzZUludCh4KVxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLl9kaWZmaWN1bHR5XG4gIH1cblxuICBzZXQgZmxhdm9yICh4KSB7XG4gICAgdGhpcy5fZmxhdm9yID0geFxuICB9XG5cbiAgc2V0IGNvbnRleHQgKHgpIHtcbiAgICB0aGlzLl9jb250ZXh0ID0geFxuICB9XG5cbiAgZ2V0IGNvbnRleHQgKCkge1xuICAgIGlmICghdGhpcy5fY29udGV4dCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLl9jb250ZXh0XG4gIH1cblxuICBzZXQgcGFyZW50ICh4KSB7XG4gICAgaWYgKCF0aGlzLnV1aWQpIHRoaXMudXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgdGhpcy5wYXJlbnRVdWlkID0geFxuICB9XG5cbiAgZ2V0IHBhcmVudCAoKSB7XG4gICAgaWYgKCF0aGlzLnBhcmVudFV1aWQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5wYXJlbnRVdWlkXG4gIH1cblxuICBnZXQgZmxhdm9yICgpIHtcbiAgICBpZiAodGhpcy5fZmxhdm9yKSByZXR1cm4gdGhpcy5fZmxhdm9yXG4gICAgbGV0IGZsYXZvciA9ICcnXG4gICAgaWYgKHRoaXMuYWN0b3I/LnN5c3RlbSkge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLnNraWxsLm5hbWUsXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaXRlbSkge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lkl0ZW1DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBpdGVtOiB0aGlzLml0ZW0ubmFtZSxcbiAgICAgICAgICBza2lsbDogdGhpcy5za2lsbC5uYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS5sYWJlbFxuICAgICAgICAgICksXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIGBDb0M3LiR7dGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0ubGFiZWx9YFxuICAgICAgICAgICksXG4gICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DaGVja1Jlc3VsdCcsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZmxhdm9yKSB7XG4gICAgICBpZiAodGhpcy5yYXdWYWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgdmFsdWU6IHRoaXMucmF3VmFsdWVTdHJpbmcsXG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSYXdWYWx1ZScsIHtcbiAgICAgICAgICAgIHJhd3ZhbHVlOiB0aGlzLnJhd1ZhbHVlLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnB1c2hpbmcpIHtcbiAgICAgIGZsYXZvciA9IGAke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUHVzaGluZycpfSAke2ZsYXZvcn1gXG4gICAgfVxuXG4gICAgcmV0dXJuIGZsYXZvclxuICB9XG5cbiAgZ2V0IHRvb2x0aXBIZWFkZXIgKCkge1xuICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgIGBDb0M3LiR7dGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0ubGFiZWx9YFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlic1t0aGlzLmF0dHJpYnV0ZV0udmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10ubGFiZWxcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICkgK1xuICAgICAgICBgICgke3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljc1t0aGlzLmNoYXJhY3RlcmlzdGljXS52YWx1ZX0lKWBcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHRoaXMuc2tpbGwpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiB0aGlzLnNraWxsLm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICkgKyBgICgke3RoaXMuc2tpbGwudmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLmRpc3BsYXlOYW1lKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgKSArIGAgKCR7dGhpcy5yYXdWYWx1ZVN0cmluZ30lKWBcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsRWxlbWVudCAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL2luLWNhcmQtcm9sbC5odG1sJ1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMub3B0aW9ucyA9IG1lcmdlT2JqZWN0KHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICBlbHNlIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgaWYgKGh0bWwpIHJldHVybiAkLnBhcnNlSFRNTChodG1sKVswXVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBnZXRIdG1sUm9sbCAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGxzL2luLWNhcmQtcm9sbC5odG1sJ1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMub3B0aW9ucyA9IG1lcmdlT2JqZWN0KHRoaXMub3B0aW9ucywgb3B0aW9ucylcbiAgICBlbHNlIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgcmV0dXJuIGh0bWwgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKHB1c2hpbmcgPSBmYWxzZSkge1xuICAgIC8vIElmIGNhcmQgaXMgcHJvdmlkZWQgYXR0dGFjaGVkIHRoZSByb2xsIHRvIHRoZSBjYXJkLiBJZiBVUklEIHByb3ZpZGVkIGF0dGFjaCBhdCB0aGlzIHBvc2l0aW9uLj9cbiAgICB0aGlzLnB1c2hpbmcgPSBwdXNoaW5nXG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGwtcmVzdWx0Lmh0bWwnXG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG5cbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgbGV0IHNwZWFrZXJcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbikge1xuICAgICAgICBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXMudG9rZW4uZG9jdW1lbnRcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3Rvci5pc0R1bW15KSB7XG4gICAgICAgIGlmICh0aGlzLmFjdG9yLm5hbWUpIHNwZWFrZXIgPSB7IGFsaWFzOiB0aGlzLmFjdG9yLm5hbWUgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICB9XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yPy51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgZmxhdm9yOiB0aGlzLmZsYXZvcixcbiAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgdHlwZTogQ29DN0NoZWNrLmNhcmRUeXBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy51dWlkKSBjaGF0RGF0YS5mbGFncy5Db0M3LnV1aWQgPSB0aGlzLnV1aWRcbiAgICBpZiAodGhpcy5jb250ZXh0KSBjaGF0RGF0YS5mbGFncy5Db0M3LmNvbnRleHQgPSB0aGlzLmNvbnRleHRcblxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnc2VsZnJvbGwnKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgY2hhdERhdGEudXNlciA9IGdhbWUudXNlci5pZFxuICAgICAgICBjaGF0RGF0YS5mbGF2b3IgPSBgWyR7dGhpcy5hY3Rvci5uYW1lfV0gJHtjaGF0RGF0YS5mbGF2b3J9YFxuICAgICAgICBjaGF0RGF0YS5mbGFncyA9IHtcbiAgICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgICBHTVNlbGZSb2xsOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgY2hhdERhdGEuc3BlYWtlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjaGF0RGF0YS5mbGFncy5Db0M3Lm9yaWdpbmFsU3BlYWtlciA9IGR1cGxpY2F0ZShjaGF0RGF0YS5zcGVha2VyKVxuICAgICAgICB9XG4gICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2VsZlJvbGxXaGlzcGVyVGFyZ2V0JykpIHtcbiAgICAgICAgICAgIGNhc2UgJ293bmVycyc6XG4gICAgICAgICAgICAgIGRlbGV0ZSBjaGF0RGF0YS5zcGVha2VyXG4gICAgICAgICAgICAgIGNoYXREYXRhLndoaXNwZXIgPSB0aGlzLmFjdG9yLm93bmVyc1xuICAgICAgICAgICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgY2FzZSAnZXZlcnlvbmUnOlxuICAgICAgICAgICAgICBkZWxldGUgY2hhdERhdGEuc3BlYWtlclxuICAgICAgICAgICAgICBjaGF0RGF0YS53aGlzcGVyID0gZ2FtZS51c2Vycy5wbGF5ZXJzXG4gICAgICAgICAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIHRoaXMucm9sbE1vZGUpXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIC8vIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoIGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKTtcbiAgICBpZiAodGhpcy5kaWNlPy5yb2xsICYmICF0aGlzLmRpY2U/LmhpZGVEaWNlKSB7XG4gICAgICBjaGF0RGF0YS5yb2xsID0gdGhpcy5kaWNlLnJvbGxcbiAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTFxuICAgICAgY2hhdERhdGEucm9sbE1vZGUgPSB0aGlzLmlzQmxpbmQgPyAnYmxpbmRyb2xsJyA6IHRoaXMucm9sbE1vZGVcbiAgICB9XG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbWFrZVB1YmxpYyAgV2lsbCBjaGFuZ2UgdGhlIHJvbGwgbW9kZSB0byBwdWJsaWNcbiAgICovXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICh7IG1ha2VQdWJsaWMgPSBmYWxzZSwgZm9yY2VSb2xsID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKG1ha2VQdWJsaWMpIHRoaXMucm9sbE1vZGUgPSBmYWxzZSAvLyByZXNldCByb2xsIG1vZGVcblxuICAgIGNvbnN0IGNoYXREYXRhID0geyBmbGF2b3I6IHRoaXMuZmxhdm9yIH1cblxuICAgIGlmIChtYWtlUHVibGljKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gW11cbiAgICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcbiAgICAgIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEpXG4gICAgfSAvLyBlbHNlIHtcbiAgICAvLyBjaGF0RGF0YS53aGlzcGVyID0gW11cbiAgICAvLyBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG4gICAgLy8gQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICAvLyB9XG5cbiAgICBpZiAoY2hhdERhdGEuYmxpbmQpIHtcbiAgICAgIHRoaXMuaXNCbGluZCA9IHRydWVcbiAgICB9XG5cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbC1yZXN1bHQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgbGV0IG5ld0NvbnRlbnQgPSBodG1sXG5cbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSByZXR1cm4gJC5wYXJzZUhUTUwoaHRtbClbMF0gLy8gSWYgbm8gbWVzc2FnZUlkIHJldHVybiB0aGUgSFRNTEVsZW1lbnQgY29udGFpbmluZyB0aGUgcm9sbC5cbiAgICAvLyBJZiBubyBtZXNzYWdlSWRcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICBjb25zdCBodG1sTWVzc2FnZSA9ICQucGFyc2VIVE1MKG1lc3NhZ2UuY29udGVudClbMF1cbiAgICBpZiAoIWh0bWxNZXNzYWdlLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1yZXN1bHQnKSkge1xuICAgICAgY29uc3QgaHRtbENoZWNrID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cbiAgICAgIGNvbnN0IHJvbGxSZXN1bHRFbGVtZW50ID0gaHRtbE1lc3NhZ2UucXVlcnlTZWxlY3RvcignLnJvbGwtcmVzdWx0JylcbiAgICAgIGlmIChyb2xsUmVzdWx0RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICByb2xsUmVzdWx0RWxlbWVudC5yZXBsYWNlV2l0aChodG1sQ2hlY2spXG4gICAgICB9XG4gICAgICBuZXdDb250ZW50ID0gaHRtbE1lc3NhZ2Uub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgY2hhdERhdGEuY29udGVudCA9IG5ld0NvbnRlbnRcblxuICAgIGlmIChDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTCA9PT0gbWVzc2FnZS50eXBlKSB7XG4gICAgICBpZiAobWVzc2FnZS53aGlzcGVyPy5sZW5ndGgpIHtcbiAgICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXG4gICAgICB9IGVsc2UgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5PVEhFUlxuICAgIH1cblxuICAgIGlmIChmb3JjZVJvbGwgJiYgdGhpcy5kaWNlPy5yb2xsICYmIChnYW1lLnVzZXIuaXNHTSB8fCAhdGhpcy5pc0JsaW5kKSkge1xuICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5kaWNlLnJvbGwpXG4gICAgfVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoY2hhdERhdGEpXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50KSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICBjaGVjay5nbURpZmZpY3VsdHlSZWd1bGFyID0gZmFsc2VcbiAgICBjaGVjay5nbURpZmZpY3VsdHlIYXJkID0gZmFsc2VcbiAgICBjaGVjay5nbURpZmZpY3VsdHlFeHRyZW1lID0gZmFsc2VcbiAgICBjaGVjay5nbURpZmZpY3VsdHlDcml0aWNhbCA9IGZhbHNlXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5UmVndWxhcicpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eVJlZ3VsYXIgPSB0cnVlXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eUhhcmQnKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlIYXJkID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlFeHRyZW1lJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5RXh0cmVtZSA9IHRydWVcbiAgICB9XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5Q3JpdGljYWwnKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlDcml0aWNhbCA9IHRydWVcbiAgICB9XG4gICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBnZXQgdG9vbHRpcCAoKSB7XG4gICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9yb2xsLXRvb2x0aXAuaHRtbCcsXG4gICAgICB0aGlzXG4gICAgKVxuICB9XG5cbiAgZ2V0IGlubGluZUNoZWNrICgpIHtcbiAgICBjb25zdCBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWlubGluZS1jaGVjaycpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWNoZWNrLXJlc3VsdCcpXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdjb2M3LWlubGluZScpXG4gICAgYS5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NMaXN0KVxuICAgIGEudGl0bGUgPSB0aGlzLnRvb2x0aXBIZWFkZXJcbiAgICBhLmRhdGFzZXQucm9sbCA9IGVzY2FwZSh0aGlzLkpTT05Sb2xsU3RyaW5nKSAvLyBUT0RPIUlNUE9SVEFOVCEhIVxuICAgIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1kMTBcIj48L2k+ICR7XG4gICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0IHx8ICc/PydcbiAgICB9YFxuICAgIHJldHVybiBhXG4gIH1cblxuICBnZXQgcm9sbFRvb2xUaXAgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBwYXJ0cyA9IFtdXG4gICAgY29uc3QgdGVucyA9IHRoaXMuZGljZXMudGVucy5tYXAociA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICByZXN1bHQ6IHIudmFsdWUsXG4gICAgICAgIHNlbGVjdGVkOiByLnNlbGVjdGVkLFxuICAgICAgICBjbGFzc2VzOiBbXG4gICAgICAgICAgJ2RpZScsXG4gICAgICAgICAgJ2QxMCcsXG4gICAgICAgICAgIXIuc2VsZWN0ZWQgPyAnZGlzY2FyZGVkJyA6IG51bGwsXG4gICAgICAgICAgci5pc01pbiA/ICdtaW4nIDogbnVsbCxcbiAgICAgICAgICByLmlzTWF4ID8gJ21heCcgOiBudWxsXG4gICAgICAgIF1cbiAgICAgICAgICAuZmlsdGVyKGMgPT4gYylcbiAgICAgICAgICAuam9pbignICcpXG4gICAgICB9XG4gICAgfSlcbiAgICBjb25zdCB1bml0ID0gW1xuICAgICAge1xuICAgICAgICByZXN1bHQ6IHRoaXMuZGljZXMudW5pdC52YWx1ZSxcbiAgICAgICAgc2VsZWN0ZWQ6IHRydWUsXG4gICAgICAgIGNsYXNzZXM6ICdkaWUgZDEwJ1xuICAgICAgfVxuICAgIF1cblxuICAgIHBhcnRzLnB1c2goe1xuICAgICAgZm9ybXVsYTogdGhpcy50b29sdGlwSGVhZGVyLFxuICAgICAgdG90YWw6IHRoaXMubW9kaWZpZWRSZXN1bHQsXG4gICAgICBpY29uczogdGhpcy5zdWNjZXNzTGV2ZWxJY29ucyxcbiAgICAgIGNsYXNzOiB0aGlzLmNzc0NsYXNzLFxuICAgICAgc3VjY2Vzc1JlcXVpcmVkOiB0aGlzLnN1Y2Nlc3NSZXF1aXJlZCxcbiAgICAgIHJlc3VsdFR5cGU6IHRoaXMucmVzdWx0VHlwZSxcbiAgICAgIGZhY2U6IDEwLFxuICAgICAgcm9sbHM6IFsuLi50ZW5zLCAuLi51bml0XVxuICAgIH0pXG4gICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9yb2xsLXRvb2x0aXAuaHRtbCcsXG4gICAgICB7IHBhcnRzIH1cbiAgICApXG4gIH1cblxuICBnZXQgSlNPTlJvbGxEYXRhICgpIHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0aGlzLkpTT05Sb2xsU3RyaW5nKVxuICB9XG5cbiAgZ2V0IEpTT05Sb2xsU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgY29uc3QgZXhjbHVkZSA9IFsnX2FjdG9yJywgJ19za2lsbCcsICdfaXRlbSddXG4gICAgICBpZiAoZXhjbHVkZS5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGZyb21EYXRhIChkYXRhKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhKVxuICB9XG5cbiAgc3RhdGljIGZyb21Sb2xsU3RyaW5nIChkYXRhU3RyaW5nKSB7XG4gICAgbGV0IGRhdGFcbiAgICB0cnkge1xuICAgICAgZGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoZGF0YVN0cmluZykpXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlKVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5mcm9tRGF0YShkYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGFsdGVyIChjaGVjaywgY29tbWFuZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3dpdGNoIChjb21tYW5kKSB7XG4gICAgICBjYXNlICd1c2VMdWNrJzoge1xuICAgICAgICBpZiAob3B0aW9ucy50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcbiAgICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQob3B0aW9ucy50YXJnZXQuZGF0YXNldC5sdWNrQW1vdW50KVxuICAgICAgICAgIGNoZWNrLmZvcmNlUGFzcyhsdWNrQW1vdW50LCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChvcHRpb25zLnRhcmdldC5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgIGF3YWl0IGNoZWNrLnVwZ3JhZGVDaGVjayh1cGdyYWRlSW5kZXgsIG9wdGlvbnMudXBkYXRlKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLXBhc3MnOiB7XG4gICAgICAgIGNoZWNrLmZvcmNlUGFzcyhudWxsLCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZm9yY2UtZmFpbCc6IHtcbiAgICAgICAgY2hlY2suZm9yY2VGYWlsKG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdpbmNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjaGVjay5pbmNyZWFzZVN1Y2Nlc3NMZXZlbChvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnZGVjcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY2hlY2suZGVjcmVhc2VTdWNjZXNzTGV2ZWwob3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jaGVjayc6IHtcbiAgICAgICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgICAgIGNoZWNrLnJvbGxNb2RlID0gZmFsc2VcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZsYWctZm9yLWRldmVsb3BtZW50Jzoge1xuICAgICAgICBhd2FpdCBjaGVjay5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3B1c2gnOiB7XG4gICAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKClcbiAgICAgICAgY2hlY2sucHVzaGluZyA9IHRydWVcbiAgICAgICAgaWYgKG9wdGlvbnMudXBkYXRlKSBjaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbkNsaWNrSW5saW5lUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1jaGVjay1yZXN1bHQnKSkge1xuICAgICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdleHBhbmRlZCcpKSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2NvbGxhcHNlSW5saW5lUmVzdWx0KGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9leHBhbmRJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX2NvbGxhcHNlSW5saW5lUmVzdWx0IChhKSB7XG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnY29jNy1pbmxpbmUtY2hlY2snKSkgcmV0dXJuXG4gICAgaWYgKCFhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkgcmV0dXJuXG4gICAgY29uc3QgdG9vbHRpcCA9IGEucXVlcnlTZWxlY3RvcignLmNvYzctY2hlY2stdG9vbHRpcCcpXG4gICAgaWYgKHRvb2x0aXApIHRvb2x0aXAucmVtb3ZlKClcbiAgICByZXR1cm4gYS5jbGFzc0xpc3QucmVtb3ZlKCdleHBhbmRlZCcpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX2V4cGFuZElubGluZVJlc3VsdCAoYSkge1xuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctaW5saW5lLWNoZWNrJykpIHJldHVyblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkgcmV0dXJuXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgdG9vbHRpcFxuICAgIGNvbnN0IGNoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgIG5ldyBDb0M3Q2hlY2soKSxcbiAgICAgIEpTT04ucGFyc2UodW5lc2NhcGUoYS5kYXRhc2V0LnJvbGwpKVxuICAgICkgLy8gVE9ETyA6IGZpbmQgc3RyaW5naWZ5IHVuZXNjYXBlICEhIDIwMjEwMjA1XG4gICAgaWYgKGNoZWNrLnN0YW5kYnkpIHJldHVyblxuXG4gICAgY29uc3QgdGlwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICB0aXAuaW5uZXJIVE1MID0gYXdhaXQgY2hlY2sucm9sbFRvb2xUaXBcblxuICAgIC8vIEFkZCB0aGUgdG9vbHRpcFxuICAgIGNvbnN0IHRvb2x0aXAgPSB0aXAuY2hpbGRyZW5bMF1cbiAgICBhLmFwcGVuZENoaWxkKHRvb2x0aXApXG4gICAgYS5jbGFzc0xpc3QuYWRkKCdleHBhbmRlZCcpXG5cbiAgICAvLyBTZXQgdGhlIHBvc2l0aW9uXG4gICAgY29uc3QgcGEgPSBhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgY29uc3QgcHQgPSB0b29sdGlwLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgdG9vbHRpcC5zdHlsZS5sZWZ0ID0gYCR7TWF0aC5taW4oXG4gICAgICBwYS54LFxuICAgICAgd2luZG93LmlubmVyV2lkdGggLSAocHQud2lkdGggKyAzKVxuICAgICl9cHhgXG4gICAgdG9vbHRpcC5zdHlsZS50b3AgPSBgJHtNYXRoLm1pbihcbiAgICAgIHBhLnkgKyBwYS5oZWlnaHQgKyAzLFxuICAgICAgd2luZG93LmlubmVySGVpZ2h0IC0gKHB0LmhlaWdodCArIDMpXG4gICAgKX1weGBcbiAgICBjb25zdCB6aSA9IGdldENvbXB1dGVkU3R5bGUoYSkuekluZGV4XG4gICAgdG9vbHRpcC5zdHlsZS56SW5kZXggPSBOdW1iZXIuaXNOdW1lcmljKHppKSA/IHppICsgMSA6IDEwMFxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBDaGF0TWVzc2FnZSwgQ09ORklHLCBDT05TVCwgRGlhbG9nLCBkdXBsaWNhdGUsIEZvbGRlciwgZnJvbVV1aWQsIGZyb21VdWlkU3luYywgZ2FtZSwgZ2V0RG9jdW1lbnRDbGFzcywgSG9va3MsIE1hY3JvLCBSb2xsLCBUb2tlbiwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi9jaGF0L2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdVdGlsaXRpZXMge1xuICAvLyBzdGF0aWMgdGVzdChldmVudCl7XG4gIC8vICAgaWYoIGV2ZW50LnNoaWZ0S2V5KSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0hlbGxvIGZyb20gU0hJRlQgdXRpbGl0aWVzJyk7XG4gIC8vICAgZWxzZSB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0hlbGxvIGZyb20gdXRpbGl0aWVzJyk7XG4gIC8vICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKTtcbiAgLy8gICBsZXQgYWN0b3I7XG4gIC8vICAgaWYgKHNwZWFrZXIudG9rZW4pIGFjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3NwZWFrZXIudG9rZW5dO1xuICAvLyAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpO1xuXG4gIC8vICBhY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpO1xuICAvLyB9XG5cbiAgc3RhdGljIGlzRm9ybXVsYSAoeCkge1xuICAgIGlmICh0eXBlb2YgeCAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHgpKSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIFJvbGwudmFsaWRhdGUoeClcbiAgfVxuXG4gIHN0YXRpYyBQYXJzZUNoYXRFbnRyeSAoaHRtbCwgY29udGVudCkge1xuICAgIGNvbnN0IHJlZ1ggPSAvKFxcUyspL2dcbiAgICBjb25zdCB0ZXJtcyA9IGNvbnRlbnQubWF0Y2gocmVnWClcbiAgICBpZiAoXG4gICAgICB0ZXJtc1swXT8udG9Mb3dlckNhc2UoKS5tYXRjaCgvXlxcL3Iob2xsKT8kLykgJiZcbiAgICAgIHRlcm1zWzFdPy50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJzFkJScpXG4gICAgKSB7XG4gICAgICAvLyBEZWxheSBjYWxsaW5nIGZ1bmN0aW9uIHRvIHByZXZlbnQgY2hhdG1lc3NhZ2Uga2V5IGRvd24gdHJpZ2dlcmluZyBkZWZhdWx0XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgQ29DN1V0aWxpdGllcy5fRXhlY0NvbW1hbmQoY29udGVudClcbiAgICAgIH0sIDIwMClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfRXhlY0NvbW1hbmQgKGNvbnRlbnQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gY29udGVudFxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC5zcGxpdCgnICcpXG4gICAgICA/LmpvaW4oJycpXG4gICAgICA/LnJlcGxhY2UoL1xcL3Iob2xsKT8xZCUvLCAnJylcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGlmIChvcHRpb25zLmxlbmd0aCkge1xuICAgICAgbGV0IGVzY2FwZWQgPSBvcHRpb25zXG4gICAgICBsZXQgdGhyZXNob2xkXG4gICAgICBsZXQgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgbGV0IGRpY2VNb2RpZmllciA9IDBcbiAgICAgIGxldCBhc2sgPSBmYWxzZVxuICAgICAgbGV0IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGxldCBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGNvbnN0IHRocmVzaG9sZFN0ciA9IGVzY2FwZWQubWF0Y2goL1teKF0rKD89XFwpKS8pXG4gICAgICBpZiAodGhyZXNob2xkU3RyICYmIHRocmVzaG9sZFN0ci5sZW5ndGgpIHtcbiAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHRocmVzaG9sZFN0clswXSlcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiB0aHJlc2hvbGRTdHIpIHtcbiAgICAgICAgICBlc2NhcGVkID0gZXNjYXBlZC5yZXBsYWNlKGAoJHttYXRjaH0pYCwgJycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGRpZmZpY3VsdHlTdHIgPSBlc2NhcGVkLm1hdGNoKC9bXltdKyg/PVxcXSkvKVxuICAgICAgaWYgKGRpZmZpY3VsdHlTdHIgJiYgZGlmZmljdWx0eVN0ci5sZW5ndGgpIHtcbiAgICAgICAgZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkoZGlmZmljdWx0eVN0clswXSlcbiAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBkaWZmaWN1bHR5U3RyKSB7XG4gICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZShgWyR7bWF0Y2h9XWAsICcnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZXNjYXBlZC5pbmNsdWRlcygnPycpKSB7XG4gICAgICAgIGFzayA9IHRydWVcbiAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZSgnPycsICcnKVxuICAgICAgfVxuICAgICAgaWYgKCFpc05hTihOdW1iZXIoZXNjYXBlZCkpKSBkaWNlTW9kaWZpZXIgPSBOdW1iZXIoZXNjYXBlZClcblxuICAgICAgaWYgKGFzaykge1xuICAgICAgICBjb25zdCBkaWFsb2dPcHRpb25zID0ge1xuICAgICAgICAgIHRocmVzaG9sZCxcbiAgICAgICAgICBtb2RpZmllcjogZGljZU1vZGlmaWVyLFxuICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgYXNrVmFsdWU6IHRydWVcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKGRpYWxvZ09wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHVzYWdlLmdldCgndGhyZXNob2xkJykpIHx8IHRocmVzaG9sZFxuICAgICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJykpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgY2hlY2sucmF3VmFsdWUgPSB0aHJlc2hvbGRcbiAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGlmICh0aHJlc2hvbGQpIGNoZWNrLnJhd1ZhbHVlID0gIWlzTmFOKHRocmVzaG9sZCkgPyB0aHJlc2hvbGQgOiB1bmRlZmluZWRcbiAgICB9XG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGlmIChzcGVha2VyLnRva2VuICYmIHNwZWFrZXIuc2NlbmUpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoXG4gICAgICAgIGAke3NwZWFrZXIuc2NlbmV9LiR7c3BlYWtlci50b2tlbn1gXG4gICAgICApIC8vIFJFRkFDVE9SSU5HICgyKSArKysgd2h5IHNwZWFrZXIuc2NlbmUuXG4gICAgICBpZiAoYWN0b3IpIGNoZWNrLmFjdG9yID0gYWN0b3JcbiAgICB9IGVsc2UgaWYgKHNwZWFrZXIuYWN0b3IpIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXG4gICAgICBpZiAoYWN0b3IpIGNoZWNrLmFjdG9yID0gYWN0b3JcbiAgICB9XG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0ZXN0ICgpIHtcbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm9zKCdEbyBzb21lIHN0dWZmJylcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21TdHJpbmcgKGFjdG9yU3RyaW5nKSB7XG4gICAgbGV0IGFjdG9yXG5cbiAgICAvLyBUb2tlbiBpcyBiZXR0ZXIgdGhhbiBhY3Rvci5cbiAgICAvLyBDYXNlIDEgOiB0cnlpbmcgd2l0aCBJRC5cbiAgICAvLyBDYXNlIDEuMSA6IHRva2VuIGZvdW5kLlxuICAgIGlmIChnYW1lLmFjdG9ycy50b2tlbnNbYWN0b3JTdHJpbmddKSByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW2FjdG9yU3RyaW5nXVxuICAgIC8vIENhc2UgMS4yIDogYWN0b3IgZm91bmQuXG4gICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoYWN0b3JTdHJpbmcpXG4gICAgaWYgKGFjdG9yKSByZXR1cm4gYWN0b3JcblxuICAgIC8vIENhc2UgMiA6IHRyeWluZyB3aXRoIG5hbWVcbiAgICAvLyBDYXNlIDIuMSA6IHRva2VuIGZvdW5kLlxuICAgIGFjdG9yID0gT2JqZWN0LnZhbHVlcyhnYW1lLmFjdG9ycy50b2tlbnMpLmZpbmQodCA9PiB7XG4gICAgICBpZiAodC5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGFjdG9yU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9KVxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIC8vIENhc2UgMi4yIDogYWN0b3IgZm91bmQuXG4gICAgICBhY3RvciA9IGdhbWUuYWN0b3JzLmZpbmQoYSA9PiB7XG4gICAgICAgIGlmIChhLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gYWN0b3JTdHJpbmcudG9Mb3dlckNhc2UoKSkgcmV0dXJuIHRydWVcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoYWN0b3IpIHJldHVybiBhY3RvclxuXG4gICAgLy8gLy8gQ2FzZSAzIHN0cmluZyBtYXliZSBhbiBhY3RvcktleVxuICAgIC8vIGlmIChjcmVhdHVyZS5pbmNsdWRlcygnLicpKSB7XG4gICAgLy8gICBjb25zdCBbLCBhY3RvcklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgLy8gICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21TdHJpbmcoYWN0b3JJZClcbiAgICAvLyB9XG5cbiAgICAvLyBObyBqb3lcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldENoYXJhY3RlcmlzdGljTmFtZXMgKGNoYXIpIHtcbiAgICBjb25zdCBjaGFyS2V5ID0gY2hhci50b0xvd2VyQ2FzZSgpXG5cbiAgICBzd2l0Y2ggKGNoYXJLZXkpIHtcbiAgICAgIGNhc2UgJ3N0cic6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNUUicpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TdHJlbmd0aCcpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2Nvbic6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkNPTicpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Db25zdGl0dXRpb24nKVxuICAgICAgICB9XG4gICAgICBjYXNlICdzaXonOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TSVonKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU2l6ZScpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2RleCc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkRFWCcpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5EZXh0ZXJpdHknKVxuICAgICAgICB9XG4gICAgICBjYXNlICdhcHAnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5BUFAnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQXBwZWFyYW5jZScpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2ludCc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLklOVCcpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdwb3cnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5QT1cnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUG93ZXInKVxuICAgICAgICB9XG4gICAgICBjYXNlICdlZHUnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5FRFUnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRWR1Y2F0aW9uJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnbHVjayc6XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJylcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBmb3IgKGNvbnN0IFssIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgICBnYW1lLnN5c3RlbS50ZW1wbGF0ZS5BY3Rvci50ZW1wbGF0ZXMuY2hhcmFjdGVyaXN0aWNzLmNoYXJhY3RlcmlzdGljc1xuICAgICAgICApKSB7XG4gICAgICAgICAgaWYgKGNoYXJLZXkgPT09IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCkudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgc2hvcnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNvbnZlcnREaWZmaWN1bHR5IChkaWZmaWN1bHR5KSB7XG4gICAgaWYgKFN0cmluZyhkaWZmaWN1bHR5KSA9PT0gJzAnKSByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgaWYgKHR5cGVvZiBkaWZmaWN1bHR5ICE9PSAnc3RyaW5nJykgcmV0dXJuIGRpZmZpY3VsdHlcbiAgICBpZiAoIWlzTmFOKE51bWJlcihkaWZmaWN1bHR5KSkpIHJldHVybiBOdW1iZXIoZGlmZmljdWx0eSlcblxuICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgICAgY2FzZSAnPyc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd25cbiAgICAgIGNhc2UgJysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgICBjYXNlICcrKyc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICAgIGNhc2UgJysrKyc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHNraWxsQ2hlY2tNYWNybyAoc2tpbGwsIGV2ZW50LCBvcHRpb25zID0ge30pIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGxldCBhY3RvclxuICAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXVxuICAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpIC8vIE5vIG5lZWQgdG8gZmlsbCBhY3RvciB0b2tlblxuXG4gICAgaWYgKCFhY3Rvcikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9BY3RvckF2YWlsYWJsZScpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgYWN0b3Iuc2tpbGxDaGVjayhza2lsbCwgZXZlbnQuc2hpZnRLZXksIG9wdGlvbnMpXG4gIH1cblxuICBzdGF0aWMgd2VhcG9uQ2hlY2tNYWNybyAod2VhcG9uLCBldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpXG4gICAgbGV0IGFjdG9yXG4gICAgaWYgKHNwZWFrZXIudG9rZW4pIGFjdG9yID0gZ2FtZS5hY3RvcnMudG9rZW5zW3NwZWFrZXIudG9rZW5dXG4gICAgaWYgKCFhY3Rvcikge1xuICAgICAgaWYgKHNwZWFrZXIuc2NlbmUgJiYgc3BlYWtlci50b2tlbikge1xuICAgICAgICAvLyBDcmVhdGUgYSBzeW50aGV0aWMgYWN0b3IgbGlua2VkIHdpdGggdGhlIGFjdGl2ZSB0b2tlbi5cbiAgICAgICAgY29uc3QgYmFzZUFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNwZWFrZXIuc2NlbmUpXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUudG9rZW5zLmdldChzcGVha2VyLnRva2VuKVxuXG4gICAgICAgIGNvbnN0IEFjdG9yQ2xhc3MgPSBnZXREb2N1bWVudENsYXNzKCdBY3RvcicpXG4gICAgICAgIGNvbnN0IHRva2VuQWN0b3IgPSBuZXcgQWN0b3JDbGFzcyhiYXNlQWN0b3IudG9KU09OKCksIHtcbiAgICAgICAgICBwYXJlbnQ6IHRva2VuXG4gICAgICAgIH0pXG4gICAgICAgIGFjdG9yID0gdG9rZW5BY3RvclxuICAgICAgfSBlbHNlIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHNwZWFrZXIuYWN0b3IpXG4gICAgfVxuXG4gICAgaWYgKCFhY3Rvcikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9BY3RvckF2YWlsYWJsZScpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgYWN0b3Iud2VhcG9uQ2hlY2sod2VhcG9uLCBldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjaGVja01hY3JvICh0aHJlc2hvbGQgPSB1bmRlZmluZWQsIGV2ZW50ID0gbnVsbCkge1xuICAgIGF3YWl0IENvQzdVdGlsaXRpZXMucm9sbERpY2UoZXZlbnQsIHsgdGhyZXNob2xkIH0pXG4gIH1cblxuICBzdGF0aWMgY3JlYXRlTWFjcm8gKGJhciwgZGF0YSwgc2xvdCkge1xuICAgIGlmIChkYXRhLnR5cGUgIT09ICdJdGVtJykgcmV0dXJuXG5cbiAgICBjb25zdCBpdGVtID0gZnJvbVV1aWRTeW5jKGRhdGEudXVpZCwgYmFyKVxuXG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk1hY3JvTm9JdGVtRm91bmQnKVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoIShpdGVtLnR5cGUgPT09ICd3ZWFwb24nKSAmJiAhKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykpIHtcbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTWFjcm9JbmNvcnJlY3RUeXBlJylcbiAgICAgIClcbiAgICB9XG5cbiAgICBsZXQgY29tbWFuZCA9ICcnXG5cbiAgICBpZiAoaXRlbS50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgY29tbWFuZCA9IGBnYW1lLkNvQzcubWFjcm9zLndlYXBvbkNoZWNrKHtuYW1lOicke2l0ZW0ubmFtZX0nLCB1dWlkOicke2RhdGEudXVpZH0nfSwgZXZlbnQpO2BcbiAgICB9XG5cbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ob0dsb2JhbFNwZWMnKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb21tYW5kID0gYGdhbWUuQ29DNy5tYWNyb3Muc2tpbGxDaGVjayh7bmFtZTonJHtpdGVtLm5hbWV9JywgdXVpZDonJHtkYXRhLnV1aWR9J30sIGV2ZW50KTtgXG4gICAgfVxuXG4gICAgaWYgKGNvbW1hbmQgIT09ICcnKSB7XG4gICAgICAvLyBDcmVhdGUgdGhlIG1hY3JvIGNvbW1hbmRcbiAgICAgIGNvbnN0IG1hY3JvID0gZ2FtZS5tYWNyb3MuY29udGVudHMuZmluZChcbiAgICAgICAgbSA9PiBtLm5hbWUgPT09IGl0ZW0ubmFtZSAmJiBtLmNvbW1hbmQgPT09IGNvbW1hbmRcbiAgICAgIClcbiAgICAgIGlmICghbWFjcm8pIHtcbiAgICAgICAgTWFjcm8uY3JlYXRlKGR1cGxpY2F0ZSh7XG4gICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdzY3JpcHQnLFxuICAgICAgICAgIGltZzogaXRlbS5pbWcsXG4gICAgICAgICAgY29tbWFuZFxuICAgICAgICB9KSkudGhlbihtYWNybyA9PiB7XG4gICAgICAgICAgZ2FtZS51c2VyLmFzc2lnbkhvdGJhck1hY3JvKG1hY3JvLCBzbG90KVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGdhbWUudXNlci5hc3NpZ25Ib3RiYXJNYWNybyhtYWNybywgc2xvdClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHRvZ2dsZURldlBoYXNlICh0b2dnbGUpIHtcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnLCB0b2dnbGUpXG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgdG9nZ2xlXG4gICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRldlBoYXNlRW5hYmxlZCcpXG4gICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRldlBoYXNlRGlzYWJsZWQnKVxuICAgIClcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgIHR5cGU6ICd1cGRhdGVDaGFyJ1xuICAgIH0pXG4gICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVDaGFyQ3JlYXRpb24gKHRvZ2dsZSkge1xuICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnLCB0b2dnbGUpXG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgdG9nZ2xlXG4gICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyQ3JlYXRpb25EaXNhYmxlZCcpXG4gICAgKVxuICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3Jywge1xuICAgICAgdHlwZTogJ3VwZGF0ZUNoYXInXG4gICAgfSlcbiAgICBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKVxuICAgIEhvb2tzLmNhbGwoJ3RvZ2dsZUNoYXJDcmVhdGlvbicsIHRvZ2dsZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRUYXJnZXQgKCkge1xuICAgIGNvbnN0IHVzZXJzID0gZ2FtZS51c2Vycy5maWx0ZXIodXNlciA9PiB1c2VyLmFjdGl2ZSlcbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9yc1xuICAgIGxldCBjaGVja09wdGlvbnMgPSBgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCJDT0NDaGVja0FsbFBDXCIgaWQ9XCJDT0NDaGVja0FsbFBDXCI+XFxuXG4gICAgPGxhYmVsIGZvcj1cIkNPQ0NoZWNrQWxsUENcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5hbGxBY3RvcnMnKX08L2xhYmVsPmBcbiAgICBjb25zdCBwbGF5ZXJUb2tlbklkcyA9IHVzZXJzXG4gICAgICAubWFwKHUgPT4gdS5jaGFyYWN0ZXI/LmlkKVxuICAgICAgLmZpbHRlcihpZCA9PiBpZCAhPT0gdW5kZWZpbmVkKVxuICAgIGNvbnN0IHNlbGVjdGVkUGxheWVySWRzID0gY2FudmFzLnRva2Vucy5jb250cm9sbGVkLm1hcCh0b2tlbiA9PiB7XG4gICAgICByZXR1cm4gdG9rZW4uYWN0b3IuaWRcbiAgICB9KVxuXG4gICAgLy8gQnVpbGQgY2hlY2tib3ggbGlzdCBmb3IgYWxsIGFjdGl2ZSBwbGF5ZXJzXG4gICAgYWN0b3JzLmZvckVhY2goYWN0b3IgPT4ge1xuICAgICAgY29uc3QgY2hlY2tlZCA9XG4gICAgICAgIChzZWxlY3RlZFBsYXllcklkcy5pbmNsdWRlcyhhY3Rvci5pZCkgfHxcbiAgICAgICAgICBwbGF5ZXJUb2tlbklkcy5pbmNsdWRlcyhhY3Rvci5pZCkpICYmXG4gICAgICAgICdjaGVja2VkJ1xuICAgICAgY2hlY2tPcHRpb25zICs9IGBcbiAgICAgPGJyPlxuICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cIiR7YWN0b3IuaWR9XCIgaWQ9XCIke2FjdG9yLmlkfVwiIHZhbHVlPVwiJHthY3Rvci5uYW1lfVwiICR7Y2hlY2tlZH0+XFxuXG4gICAgIDxsYWJlbCBmb3I9XCIke2FjdG9yLmlkfVwiPiR7YWN0b3IubmFtZX08L2xhYmVsPlxuICAgICAgIGBcbiAgICB9KVxuXG4gICAgbmV3IERpYWxvZyh7XG4gICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmRyZWFtaW5nJyl9YCxcbiAgICAgIGNvbnRlbnQ6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcucmVzdFRhcmdldHMnXG4gICAgICApfTogJHtjaGVja09wdGlvbnN9IDxicj5gLFxuICAgICAgYnV0dG9uczoge1xuICAgICAgICB3aGlzcGVyOiB7XG4gICAgICAgICAgbGFiZWw6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5zdGFydFJlc3QnKX1gLFxuICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyBodG1sID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldHMgPSBbXVxuICAgICAgICAgICAgbGV0IGFsbCA9IGZhbHNlXG4gICAgICAgICAgICBjb25zdCB1c2VycyA9IGh0bWwuZmluZCgnW3R5cGU9XCJjaGVja2JveFwiXScpXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHVzZXIgb2YgdXNlcnMpIHtcbiAgICAgICAgICAgICAgaWYgKHVzZXIubmFtZSA9PT0gJ0NPQ0NoZWNrQWxsUEMnICYmIHVzZXIuY2hlY2tlZCkgYWxsID0gdHJ1ZVxuICAgICAgICAgICAgICBpZiAodXNlci5jaGVja2VkIHx8IGFsbCkgdGFyZ2V0cy5wdXNoKHVzZXIuaWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLnN0YXJ0UmVzdCh0YXJnZXRzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHN0YXJ0UmVzdCAodGFyZ2V0cykge1xuICAgIGlmICghdGFyZ2V0cy5sZW5ndGgpIHJldHVyblxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhY3RvciA9PiB0YXJnZXRzLmluY2x1ZGVzKGFjdG9yLmlkKSlcbiAgICBsZXQgY2hhdENvbnRlbnQgPSBgPGk+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuZHJlYW1pbmcnKX0uLi48L2k+PGJyPmBcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgaWYgKFsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKGFjdG9yLnR5cGUpKSB7XG4gICAgICAgIGxldCBxdWlja0hlYWxlciA9IGZhbHNlXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3Rvci5pdGVtcykge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICd0YWxlbnQnKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5uYW1lID09PSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucXVpY2tIZWFsZXInKX1gKSB7XG4gICAgICAgICAgICAgIHF1aWNrSGVhbGVyID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpc0NyaXRpY2FsV291bmRzID1cbiAgICAgICAgICAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcycpICYmXG4gICAgICAgICAgYWN0b3IuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKVxuICAgICAgICBjb25zdCBkYWlseVNhbml0eUxvc3MgPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzXG4gICAgICAgIGNvbnN0IGhwVmFsdWUgPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZVxuICAgICAgICBjb25zdCBocE1heCA9IGFjdG9yLnN5c3RlbS5hdHRyaWJzLmhwLm1heFxuICAgICAgICBjb25zdCBtcFZhbHVlID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWVcbiAgICAgICAgY29uc3QgbXBNYXggPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC5tYXhcbiAgICAgICAgY29uc3QgcG93ID0gYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWVcbiAgICAgICAgY2hhdENvbnRlbnQgPSBjaGF0Q29udGVudCArIGA8YnI+PGI+JHthY3Rvci5uYW1lfS4gPC9iPmBcbiAgICAgICAgaWYgKGhwVmFsdWUgPCBocE1heCkge1xuICAgICAgICAgIGlmIChpc0NyaXRpY2FsV291bmRzID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya3JlZFwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3Lmhhc0NyaXRpY2FsV291bmRzJ1xuICAgICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IGhlYWxBbW91bnQgPSAxXG4gICAgICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVGYXN0ZXJSZWNvdmVyeScpKSB7XG4gICAgICAgICAgICAgIGhlYWxBbW91bnQgPSAyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocXVpY2tIZWFsZXIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgaGVhbEFtb3VudCsrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoZWFsQW1vdW50ID0gTWF0aC5taW4oaGVhbEFtb3VudCwgaHBNYXggLSBocFZhbHVlKVxuICAgICAgICAgICAgaWYgKGhlYWxBbW91bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuaGVhbHRoUmVjb3ZlcmVkJ1xuICAgICAgICAgICAgICAgICl9LiA8L2I+YFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LnB1bHBIZWFsdGhSZWNvdmVyZWQnLFxuICAgICAgICAgICAgICAgICAgeyBudW1iZXI6IGhlYWxBbW91bnQgfVxuICAgICAgICAgICAgICAgICl9LiA8L2I+YFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJzpcbiAgICAgICAgICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSArIGhlYWxBbW91bnRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChkYWlseVNhbml0eUxvc3MgPiAwKSB7XG4gICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuZGFpbHlTYW5Mb3NzUmVzdGFydGVkJ1xuICAgICAgICAgICAgKX0uPC9iPmBcbiAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiAwLFxuICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0JzogTWF0aC5mbG9vcihhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgLyA1KVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaG91cnMgPSA3XG4gICAgICAgIGlmIChob3VycyA+IDAgJiYgbXBWYWx1ZSA8IG1wTWF4KSB7XG4gICAgICAgICAgbGV0IG1hZ2ljQW1vdW50ID0gaG91cnMgKiBNYXRoLmNlaWwocG93IC8gMTAwKVxuICAgICAgICAgIG1hZ2ljQW1vdW50ID0gTWF0aC5taW4obWFnaWNBbW91bnQsIG1wTWF4IC0gbXBWYWx1ZSlcbiAgICAgICAgICBjaGF0Q29udGVudCA9XG4gICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICBgPGIgc3R5bGU9XCJjb2xvcjpkYXJrb2xpdmVncmVlblwiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcubWFnaWNQb2ludHNSZWNvdmVyZWQnXG4gICAgICAgICAgICApfTogJHttYWdpY0Ftb3VudH0uPC9iPmBcbiAgICAgICAgICBhY3Rvci51cGRhdGUoe1xuICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzpcbiAgICAgICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgKyBtYWdpY0Ftb3VudFxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICBjb250ZW50OiBjaGF0Q29udGVudCxcbiAgICAgIHR5cGU6IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5PVEhFUlxuICAgIH1cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlWFBHYWluICh0b2dnbGUpIHtcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICd4cEVuYWJsZWQnLCB0b2dnbGUpXG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgdG9nZ2xlXG4gICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlhQR2FpbkVuYWJsZWQnKVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5YUEdhaW5EaXNhYmxlZCcpXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJvbGxEaWNlIChldmVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgb3B0aW9ucy5hc2tWYWx1ZSA9ICFvcHRpb25zLnRocmVzaG9sZFxuICAgIGxldCBkaWNlTW9kaWZpZXIsIGRpZmZpY3VsdHksIGZsYXREaWNlTW9kaWZpZXIsIGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgIGxldCB0aHJlc2hvbGQgPSBvcHRpb25zLnRocmVzaG9sZFxuXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5tb2RpZmllcikgZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFldmVudD8uc2hpZnRLZXkgJiYgIW9wdGlvbnMuZmFzdEZvcndhcmQpIHtcbiAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICBkaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgdGhyZXNob2xkID0gTnVtYmVyKHVzYWdlLmdldCgndGhyZXNob2xkJykpXG4gICAgICAgIGZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGFjdG9ycyA9IFtdXG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00gJiYgY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQpIHtcbiAgICAgICAgYWN0b3JzLnB1c2godG9rZW4uYWN0b3IudG9rZW5LZXkpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChnYW1lLnVzZXIuY2hhcmFjdGVyKSB7XG4gICAgICBhY3RvcnMucHVzaChnYW1lLnVzZXIuY2hhcmFjdGVyLnRva2VuS2V5KVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgdGsgb2YgYWN0b3JzKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgY2hlY2sucmF3VmFsdWUgPSB0aHJlc2hvbGRcbiAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGNoZWNrLmFjdG9yID0gdGtcbiAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG5cbiAgICBpZiAoIWFjdG9ycy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kaWZpZXIgfHwgMFxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHkgfHwgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICBjaGVjay5yYXdWYWx1ZSA9IHRocmVzaG9sZFxuICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDaGFyU2hlZXRzICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGZvciAoY29uc3QgYSBvZiBnYW1lLmFjdG9ycy5jb250ZW50cykge1xuICAgICAgICBpZiAoYT8udHlwZSA9PT0gJ2NoYXJhY3RlcicgJiYgYT8uc2hlZXQgJiYgYT8uc2hlZXQ/LnJlbmRlcmVkKSB7XG4gICAgICAgICAgYS51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IHRydWUgfSlcbiAgICAgICAgICBhLnJlbmRlcihmYWxzZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgICAgaWYgKGEuaXNPd25lcikge1xuICAgICAgICAgIGEudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiB0cnVlIH0pXG4gICAgICAgICAgYS5yZW5kZXIoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIGZyb20gX29uRHJvcCB0byBnZXQgdGhlIGRyb3BwZWQgZW50aXR5VHlwZSBvciBlbnRpdHlUeXBlIGZyb20gYSBmb2xkZXJcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMgW2l0ZW1zXSBhcnJheSBvZiBpdGVtc1xuICAgKi9cbiAgc3RhdGljIGFzeW5jIGdldERhdGFGcm9tRHJvcEV2ZW50IChldmVudCwgZW50aXR5VHlwZSA9ICdJdGVtJykge1xuICAgIGlmIChldmVudC5vcmlnaW5hbEV2ZW50KSByZXR1cm4gW11cbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YUxpc3QgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBpZiAoZGF0YUxpc3QudHlwZSA9PT0gJ0ZvbGRlcicgJiYgZGF0YUxpc3QuZG9jdW1lbnROYW1lID09PSBlbnRpdHlUeXBlKSB7XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IGF3YWl0IGZyb21VdWlkKGRhdGFMaXN0LnV1aWQpXG4gICAgICAgIGlmICghZm9sZGVyKSByZXR1cm4gW11cbiAgICAgICAgcmV0dXJuIGZvbGRlci5jb250ZW50c1xuICAgICAgfSBlbHNlIGlmIChkYXRhTGlzdC50eXBlID09PSBlbnRpdHlUeXBlKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCBmcm9tVXVpZChkYXRhTGlzdC51dWlkKVxuICAgICAgICBpZiAoIWl0ZW0pIHJldHVybiBbXVxuICAgICAgICByZXR1cm4gW2l0ZW1dXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW11cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjb3B5VG9DbGlwYm9hcmQgKHRleHQpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQgJiYgd2luZG93LmlzU2VjdXJlQ29udGV4dCkge1xuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKVxuICAgICAgICB0ZXh0QXJlYS52YWx1ZSA9IHRleHRcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLmxlZnQgPSAnLTk5OXB4J1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS50b3AgPSAnLTk5OXB4J1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRBcmVhKVxuICAgICAgICB0ZXh0QXJlYS5mb2N1cygpXG4gICAgICAgIHRleHRBcmVhLnNlbGVjdCgpXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKVxuICAgICAgICAgICAgPyByZXNvbHZlKClcbiAgICAgICAgICAgIDogcmVqZWN0KFxuICAgICAgICAgICAgICBuZXcgRXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvQ29weVRvQ2xpcGJvYXJkJykpXG4gICAgICAgICAgICApXG4gICAgICAgICAgdGV4dEFyZWEucmVtb3ZlKClcbiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyKSlcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvQ29weVRvQ2xpcGJvYXJkJykpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHF1b3RlUmVnRXhwIChzdHJpbmcpIHtcbiAgICAvLyBodHRwczovL2JpdGJ1Y2tldC5vcmcvY2dnYWVydG5lci9qcy1oYWNrcy9yYXcvbWFzdGVyL3F1b3RlLmpzXG4gICAgY29uc3QgbGVuID0gc3RyaW5nLmxlbmd0aFxuICAgIGxldCBxU3RyaW5nID0gJydcblxuICAgIGZvciAobGV0IGN1cnJlbnQsIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICAgIGN1cnJlbnQgPSBzdHJpbmcuY2hhckF0KGkpXG5cbiAgICAgIGlmIChjdXJyZW50ID49ICcgJyAmJiBjdXJyZW50IDw9ICd+Jykge1xuICAgICAgICBpZiAoY3VycmVudCA9PT0gJ1xcXFwnIHx8IGN1cnJlbnQgPT09IFwiJ1wiKSB7XG4gICAgICAgICAgcVN0cmluZyArPSAnXFxcXCdcbiAgICAgICAgfVxuXG4gICAgICAgIHFTdHJpbmcgKz0gY3VycmVudC5yZXBsYWNlKC9bLVtcXF0ve30oKSorPy5cXFxcXiR8XS9nLCAnXFxcXCQmJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN3aXRjaCAoY3VycmVudCkge1xuICAgICAgICAgIGNhc2UgJ1xcYic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcYidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXGYnOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXGYnXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFxuJzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFxuJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xccic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxccidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXHQnOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHQnXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFx2JzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFx2J1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdSdcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50LmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gNDsgLS1qID49IGN1cnJlbnQubGVuZ3RoOyBxU3RyaW5nICs9ICcwJyk7XG4gICAgICAgICAgICBxU3RyaW5nICs9IGN1cnJlbnRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBxU3RyaW5nXG4gIH1cblxuICBzdGF0aWMgc2V0QnlQYXRoIChvYmosIHBhdGgsIHZhbHVlKSB7XG4gICAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJylcbiAgICBsZXQgbyA9IG9ialxuICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgICBpZiAoIW9bcGFydHNbaV1dKSBvW3BhcnRzW2ldXSA9IHt9XG4gICAgICAgIG8gPSBvW3BhcnRzW2ldXVxuICAgICAgfVxuICAgIH1cblxuICAgIG9bcGFydHNbcGFydHMubGVuZ3RoIC0gMV1dID0gdmFsdWVcbiAgfVxuXG4gIHN0YXRpYyBnZXRCeVBhdGggKG9iaiwgcGF0aCkge1xuICAgIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gICAgbGV0IG8gPSBvYmpcbiAgICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgaWYgKCFvW3BhcnRzW2ldXSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb1twYXJ0c1twYXJ0cy5sZW5ndGggLSAxXV1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIERvY3VtZW50IGJ5IGl0cyBVbml2ZXJzYWxseSBVbmlxdWUgSWRlbnRpZmllciAodXVpZCkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1dWlkICAgVGhlIHV1aWQgb2YgdGhlIERvY3VtZW50IHRvIHJldHJpZXZlXG4gICAqIEByZXR1cm4ge1Byb21pc2U8RG9jdW1lbnR8bnVsbD59XG4gICAqL1xuICBzdGF0aWMgU2Zyb21VdWlkICh1dWlkKSB7XG4gICAgbGV0IHBhcnRzID0gdXVpZC5zcGxpdCgnLicpXG4gICAgbGV0IGRvY1xuXG4gICAgLy8gQ29tcGVuZGl1bSBEb2N1bWVudHNcbiAgICBpZiAocGFydHNbMF0gPT09ICdDb21wZW5kaXVtJykge1xuICAgICAgcmV0dXJuIG51bGxcbiAgICAgIC8vIHJldHVybiBmcm9tVXVpZCh1dWlkKSAvLyBSZXR1cm4gUHJvbWlzZVxuICAgICAgLy8gcGFydHMuc2hpZnQoKTtcbiAgICAgIC8vIGNvbnN0IFtzY29wZSwgcGFja05hbWUsIGlkXSA9IHBhcnRzLnNsaWNlKDAsIDMpO1xuICAgICAgLy8gcGFydHMgPSBwYXJ0cy5zbGljZSgzKTtcbiAgICAgIC8vIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChgJHtzY29wZX0uJHtwYWNrTmFtZX1gKTtcbiAgICAgIC8vIHJldHVybiBhd2FpdCBwYWNrPy5nZXREb2N1bWVudChpZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdvcmxkIERvY3VtZW50c1xuICAgICAgY29uc3QgW2RvY05hbWUsIGRvY0lkXSA9IHBhcnRzLnNsaWNlKDAsIDIpXG4gICAgICBwYXJ0cyA9IHBhcnRzLnNsaWNlKDIpXG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gQ09ORklHW2RvY05hbWVdLmNvbGxlY3Rpb24uaW5zdGFuY2VcbiAgICAgIGRvYyA9IGNvbGxlY3Rpb24uZ2V0KGRvY0lkKVxuICAgIH1cblxuICAgIC8vIEVtYmVkZGVkIERvY3VtZW50c1xuICAgIHdoaWxlIChkb2MgJiYgcGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgY29uc3QgW2VtYmVkZGVkTmFtZSwgZW1iZWRkZWRJZF0gPSBwYXJ0cy5zbGljZSgwLCAyKVxuICAgICAgZG9jID0gZG9jLmdldEVtYmVkZGVkRG9jdW1lbnQoZW1iZWRkZWROYW1lLCBlbWJlZGRlZElkKVxuICAgICAgcGFydHMgPSBwYXJ0cy5zbGljZSgyKVxuICAgIH1cbiAgICByZXR1cm4gZG9jIHx8IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBpc0RvY3VtZW50VXVpZFBhY2sgKHV1aWQpIHtcbiAgICBpZiAodXVpZC5pbmNsdWRlcygnQ29tcGVuZGl1bScpKSByZXR1cm4gdHJ1ZVxuICAgIGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgaXNEb2N1bWVudFV1aWQgKHV1aWQpIHtcbiAgICBjb25zdCBpZGVudGlmaWVycyA9IFsnQWN0b3InLCAnU2NlbmUnLCAnVG9rZW4nLCAnSXRlbScsICdDb21wZW5kaXVtJ11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlkZW50aWZpZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodXVpZC5pbmNsdWRlcyhpZGVudGlmaWVyc1tpXSkpIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRG9jdW1lbnRGcm9tRHJvcERhdGEgKGRyb3BEYXRhKSB7XG4gICAgbGV0IGRvY1V1aWQsIGFjdG9yXG4gICAgaWYgKGRyb3BEYXRhLnRva2VuVXVpZCkge1xuICAgICAgZG9jVXVpZCA9IGRyb3BEYXRhLnRva2VuVXVpZFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRyb3BEYXRhLnV1aWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkb2NVdWlkID0gZHJvcERhdGEudXVpZFxuICAgIH0gZWxzZSB7XG4gICAgICBkb2NVdWlkID1cbiAgICAgICAgZHJvcERhdGEuc2NlbmVJZCAmJiBkcm9wRGF0YS50b2tlbklkXG4gICAgICAgICAgPyBgU2NlbmUuJHtkcm9wRGF0YS5zY2VuZUlkfS5Ub2tlbi4ke2Ryb3BEYXRhLnRva2VuSWR9YFxuICAgICAgICAgIDogZHJvcERhdGEuYWN0b3JJZCB8fCBkcm9wRGF0YS5hY3RvcktleSB8fCBkcm9wRGF0YS5pZFxuICAgIH1cbiAgICBpZiAoZHJvcERhdGEudHlwZSA9PT0gJ1Rva2VuJykge1xuICAgICAgZG9jVXVpZCA9IGRyb3BEYXRhLnV1aWRcbiAgICB9IGVsc2UgaWYgKGRvY1V1aWQpIHtcbiAgICAgIGFjdG9yID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkoZG9jVXVpZClcbiAgICAgIGlmICghYWN0b3IgJiYgZHJvcERhdGEudHlwZSA9PT0gJ0l0ZW0nKSBkb2NVdWlkID0gbnVsbFxuICAgIH1cblxuICAgIGlmIChhY3RvciAmJiBkb2NVdWlkICE9PSBhY3Rvci51dWlkKSB7XG4gICAgICBkb2NVdWlkID0gYWN0b3IudXVpZFxuICAgIH1cbiAgICByZXR1cm4gZG9jVXVpZFxuICB9XG5cbiAgc3RhdGljIGdldERvY3VtZW50RnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgLy8gQ2FzZSAwIC0gYSBkb2N1bWVudCBVdWlkXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWQoa2V5KSkge1xuICAgICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWRQYWNrKGtleSkpIHJldHVybiBmcm9tVXVpZChrZXkpIC8vIFRPRE8gQ2hlY2sgd2UgY2FuIGRvIHRoYXRcbiAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZChrZXkpXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfVxuICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgIGlmICghdG9rZW4uc2NlbmUpIHRva2VuLnNjZW5lID0gZHVwbGljYXRlKHNjZW5lKVxuICAgICAgcmV0dXJuIHRva2VuXG4gICAgfVxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgY29uc3QgZG9jID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoa2V5KVxuICAgIGlmICghZG9jKSByZXR1cm4gbnVsbFxuICAgIGlmIChkb2MuYWN0b3IpIHJldHVybiBkb2MuYWN0b3JcbiAgICBpZiAoZG9jLmNvbnN0cnVjdG9yPy5uYW1lID09PSAnQ29DQWN0b3InKSByZXR1cm4gZG9jXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZm9sZGVyIG9uIHRoZSBhY3RvcnMgdGFiIGNhbGxlZCBcIkltcG9ydGVkIENoYXJhY3RlcnNcIiBpZiB0aGUgZm9sZGVyIGRvZXNuJ3QgZXhpc3QuXG4gICAqIEByZXR1cm5zIHtGb2xkZXJ9IHRoZSBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXJcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMgKCkge1xuICAgIGxldCBmb2xkZXJOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlcicpXG4gICAgaWYgKGZvbGRlck5hbWUgPT09ICdDb0M3LkltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlcicpIHtcbiAgICAgIGZvbGRlck5hbWUgPSAnSW1wb3J0ZWQgY2hhcmFjdGVycydcbiAgICB9XG4gICAgbGV0IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9IGdhbWUuZm9sZGVycy5maW5kKFxuICAgICAgZW50cnkgPT4gZW50cnkubmFtZSA9PT0gZm9sZGVyTmFtZSAmJiBlbnRyeS50eXBlID09PSAnQWN0b3InXG4gICAgKVxuICAgIGlmIChcbiAgICAgIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9PT0gbnVsbCB8fFxuICAgICAgdHlwZW9mIGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIC8vIENyZWF0ZSB0aGUgZm9sZGVyXG4gICAgICBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPSBhd2FpdCBGb2xkZXIuY3JlYXRlKHtcbiAgICAgICAgbmFtZTogZm9sZGVyTmFtZSxcbiAgICAgICAgdHlwZTogJ0FjdG9yJyxcbiAgICAgICAgcGFyZW50OiBudWxsXG4gICAgICB9KVxuICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlZEltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlcicpXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXJcbiAgfVxuXG4gIC8qKlxuICAgKiBndWVzc0l0ZW0sIHRyeSBhbmQgZmluZCB0aGUgaXRlbSBpbiB0aGUgbG9jYXRpb25zIGRlZmluZWQgaW4gJHtzb3VyY2V9IGkgPSBJdGVtIERpcmVjdG9yeSwgdyA9IFdvcmxkIENvbXBlbmRpdW1zLCBtID0gTW9kdWxlIENvbXBlbmRpdW1zLCBzID0gU3lzdGVtIENvbXBlbmRpdW1zXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlIEl0ZW0gdHlwZSB0byBmaW5kXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgaXRlbSB0byBmaW5kXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb21iYXQgbnVsbCAoZGVmYXVsdCkuIElmIGJvb2xlYW4gY29tYmF0IHByb3BlcnR5IG9mIHNraWxsIG11c3QgbWF0Y2hcbiAgICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSAnJyAoZGVmYXVsdCkuIENoZWNrIG9yZGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBmYWxsYmFja0FueSBmYWxzZSAoZGVmYXVsdCkuIFNob3VsZCBhbnkgc3BlY2lhbGl6YXRpb24gdGhhdCBpc24ndCBmb3VuZCB0cnkgdXNpbmcgKEFueSkgaXRlbXNcbiAgICogQHJldHVybnMge09iamVjdH0gZm9ybWF0dGVkIEFjdG9yIGRhdGEgSXRlbSBvciBudWxsXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZ3Vlc3NJdGVtIChcbiAgICB0eXBlLFxuICAgIG5hbWUsXG4gICAgeyBjb21iYXQgPSBudWxsLCBzb3VyY2UgPSAnJywgZmFsbGJhY2tBbnkgPSBmYWxzZSB9ID0ge31cbiAgKSB7XG4gICAgbGV0IGV4aXN0aW5nID0gbnVsbFxuICAgIG5hbWUgPSBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICBmb3IgKGxldCBvID0gMCwgb00gPSBzb3VyY2UubGVuZ3RoOyBvIDwgb007IG8rKykge1xuICAgICAgc3dpdGNoIChzb3VyY2Uuc3Vic3RyaW5nKG8sIG8gKyAxKSkge1xuICAgICAgICBjYXNlICdpJzpcbiAgICAgICAgICBleGlzdGluZyA9IGdhbWUuaXRlbXMuZmluZChcbiAgICAgICAgICAgIGl0ZW0gPT4gaXRlbS50eXBlID09PSB0eXBlICYmXG4gICAgICAgICAgICAgIGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lICYmXG4gICAgICAgICAgICAgIChjb21iYXQgPT09IG51bGwgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPT09IGNvbWJhdClcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAndyc6XG4gICAgICAgIGNhc2UgJ20nOlxuICAgICAgICBjYXNlICdzJzpcbiAgICAgICAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBwYWNrLm1ldGFkYXRhLnR5cGUgPT09ICdJdGVtJyAmJlxuICAgICAgICAgICAgICAoKHNvdXJjZVtvXSA9PT0gJ3cnICYmIHBhY2subWV0YWRhdGEucGFja2FnZSA9PT0gJ3dvcmxkJykgfHxcbiAgICAgICAgICAgICAgICAoc291cmNlW29dID09PSAnUycgJiYgcGFjay5tZXRhZGF0YS5wYWNrYWdlID09PSAnQ29DNycpIHx8XG4gICAgICAgICAgICAgICAgKHNvdXJjZVtvXSA9PT0gJ3MnICYmXG4gICAgICAgICAgICAgICAgICAhWyd3b3JsZCcsICdDb0M3J10uaW5jbHVkZXMocGFjay5tZXRhZGF0YS5wYWNrYWdlKSkpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgZG9jdW1lbnRzID0gYXdhaXQgcGFjay5nZXREb2N1bWVudHMoKVxuICAgICAgICAgICAgICBleGlzdGluZyA9IGRvY3VtZW50cy5maW5kKFxuICAgICAgICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgICAgICAgIGl0ZW0udHlwZSA9PT0gdHlwZSAmJlxuICAgICAgICAgICAgICAgICAgaXRlbS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgJiZcbiAgICAgICAgICAgICAgICAgIChjb21iYXQgPT09IG51bGwgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPT09IGNvbWJhdClcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmFsbGJhY2tBbnkgJiYgdHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgY29uc3QgbWF0Y2ggPSBuYW1lLm1hdGNoKC9eKC4rIFxcKCkoPyFhbnkpLisoXFwpKSQvKVxuICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbShcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIG1hdGNoWzFdICsgJ2FueScgKyBtYXRjaFsyXSxcbiAgICAgICAgICB7IGNvbWJhdCwgc291cmNlIH1cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0b0tlYmFiQ2FzZSAocykge1xuICAgIGlmICghcykge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuICAgIGNvbnN0IG1hdGNoID0gcy5tYXRjaCgvW0EtWl17Mix9KD89W0EtWl1bYS16XStbMC05XSp8XFxiKXxbQS1aXT9bYS16XStbMC05XSp8W0EtWl18WzAtOV0rL2cpXG5cbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG5cbiAgICByZXR1cm4gbWF0Y2guam9pbignLScpLnRvTG93ZXJDYXNlKClcbiAgfVxuXG4gIHN0YXRpYyBzb3J0QnlOYW1lS2V5IChhLCBiKSB7XG4gICAgcmV0dXJuIGEubmFtZVxuICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgIC5yZXBsYWNlKC9bXFx1MDMwMC1cXHUwMzZmXS9nLCAnJylcbiAgICAgIC50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICAubG9jYWxlQ29tcGFyZShcbiAgICAgICAgYi5uYW1lXG4gICAgICAgICAgLm5vcm1hbGl6ZSgnTkZEJylcbiAgICAgICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAgICAgLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIClcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgZmxhdHRlbk9iamVjdCwgRm9ybUFwcGxpY2F0aW9uLCBnYW1lLCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0NJREVkaXRvciBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjb2MtaWQtZWRpdG9yJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jb2MtaWQtZWRpdG9yLmhicycsXG4gICAgICB3aWR0aDogOTAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICB0aXRsZTogJ0NvQzcuQ29DSURGbGFnLnRpdGxlJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgc3VibWl0T25DbG9zZTogdHJ1ZSxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLnN1cHBvcnRlZExhbmd1YWdlcyA9IENPTkZJRy5zdXBwb3J0ZWRMYW5ndWFnZXNcblxuICAgIHRoaXMub3B0aW9ucy5lZGl0YWJsZSA9IHRoaXMub2JqZWN0LnNoZWV0LmlzRWRpdGFibGVcblxuICAgIHNoZWV0RGF0YS5ndWVzc0NvZGUgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NJZCh0aGlzLm9iamVjdClcbiAgICBzaGVldERhdGEuaWRQcmVmaXggPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ2V0UHJlZml4KHRoaXMub2JqZWN0KVxuXG4gICAgc2hlZXREYXRhLmNvY2lkRmxhZyA9IHRoaXMub2JqZWN0LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWdcblxuICAgIHNoZWV0RGF0YS5pZCA9IHNoZWV0RGF0YS5jb2NpZEZsYWc/LmlkIHx8ICcnXG4gICAgc2hlZXREYXRhLmxhbmcgPSBzaGVldERhdGEuY29jaWRGbGFnPy5sYW5nIHx8IGdhbWUuaTE4bi5sYW5nXG4gICAgc2hlZXREYXRhLnByaW9yaXR5ID0gc2hlZXREYXRhLmNvY2lkRmxhZz8ucHJpb3JpdHkgfHwgMFxuXG4gICAgc2hlZXREYXRhLmVyYXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgIHNoZWV0RGF0YS5lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6IChzaGVldERhdGEuY29jaWRGbGFnPy5lcmFzID8/IHt9KVtrZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICBzaGVldERhdGEuZXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIGNvbnN0IENvQ0lES2V5cyA9IGZsYXR0ZW5PYmplY3QoZ2FtZS5pMThuLnRyYW5zbGF0aW9ucy5Db0M3LkNvQ0lERmxhZy5rZXlzID8/IHt9KVxuICAgIGNvbnN0IHByZWZpeCA9IG5ldyBSZWdFeHAoJ14nICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChzaGVldERhdGEuaWRQcmVmaXgpKVxuICAgIHNoZWV0RGF0YS5leGlzdGluZ0tleXMgPSBPYmplY3Qua2V5cyhDb0NJREtleXMpLnJlZHVjZSgob2JqLCBrKSA9PiB7XG4gICAgICBpZiAoay5tYXRjaChwcmVmaXgpKSB7XG4gICAgICAgIG9iai5wdXNoKHsgaywgbmFtZTogQ29DSURLZXlzW2tdIH0pXG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqXG4gICAgfSwgW10pLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLmlzU3lzdGVtSUQgPSAodHlwZW9mIENvQ0lES2V5c1tzaGVldERhdGEuaWRdICE9PSAndW5kZWZpbmVkJylcbiAgICBjb25zdCBtYXRjaCA9IHNoZWV0RGF0YS5pZC5tYXRjaCgvXihbXlxcXFwuXSspXFwuKFteXFxcXC5dKilcXC4oLispLylcbiAgICBzaGVldERhdGEuX2V4aXN0aW5nID0gKG1hdGNoICYmIHR5cGVvZiBtYXRjaFszXSAhPT0gJ3VuZGVmaW5lZCcgPyBtYXRjaFszXSA6ICcnKVxuXG4gICAgaWYgKHNoZWV0RGF0YS5pZCAmJiBzaGVldERhdGEubGFuZykge1xuICAgICAgLy8gRmluZCBvdXQgaWYgdGhlcmUgZXhpc3RzIGEgZHVwbGljYXRlIENvQ0lEXG4gICAgICBjb25zdCB3b3JsZERvY3VtZW50cyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURBbGwoe1xuICAgICAgICBjb2NpZDogc2hlZXREYXRhLmlkLFxuICAgICAgICBsYW5nOiBzaGVldERhdGEubGFuZyxcbiAgICAgICAgc2NvcGU6ICd3b3JsZCdcbiAgICAgIH0pXG4gICAgICBjb25zdCB1c2VkRXJhcyA9IHt9XG4gICAgICBjb25zdCB1bmlxdWVXb3JsZFByaW9yaXR5ID0ge31cbiAgICAgIHNoZWV0RGF0YS53b3JsZERvY3VtZW50SW5mbyA9IHdvcmxkRG9jdW1lbnRzLm1hcCgoZCkgPT4ge1xuICAgICAgICBpZiAoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh1bmlxdWVXb3JsZFByaW9yaXR5LCBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXSkpIHtcbiAgICAgICAgICAgICAgdW5pcXVlV29ybGRQcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXV0gPSAwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1bmlxdWVXb3JsZFByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdXSsrXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVuaXF1ZVdvcmxkUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvKiddID0gMVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVyYXMgPSAoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzID8gT2JqZWN0LmVudHJpZXMoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiBlWzBdKS5zb3J0KCkgOiBbXSlcbiAgICAgICAgZm9yIChjb25zdCBlcmEgb2YgZXJhcykge1xuICAgICAgICAgIHVzZWRFcmFzW2VyYV0gPSBDT0M3LmVyYXNbZXJhXSA/PyAnPydcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVyYXM6IGVyYXMucmVkdWNlKGZ1bmN0aW9uIChhbGwsIGN1cnJlbnQpIHtcbiAgICAgICAgICAgIGFsbFtjdXJyZW50XSA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiBhbGxcbiAgICAgICAgICB9LCB7fSksXG4gICAgICAgICAgcHJpb3JpdHk6IGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHksXG4gICAgICAgICAgbGFuZzogZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5sYW5nID8/ICdlbicsXG4gICAgICAgICAgbGluazogVGV4dEVkaXRvci5lbnJpY2hIVE1MKGQubGluaywgeyBhc3luYzogZmFsc2UgfSksXG4gICAgICAgICAgZm9sZGVyOiBkPy5mb2xkZXI/Lm5hbWVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGlmIChPYmplY3QuZW50cmllcyh1bmlxdWVXb3JsZFByaW9yaXR5KS5maWx0ZXIoYyA9PiBjWzFdID4gMSkubGVuZ3RoID4gMCkge1xuICAgICAgICBzaGVldERhdGEud2FybkR1cGxpY2F0ZVdvcmxkUHJpb3JpdHkgPSB0cnVlXG4gICAgICB9XG4gICAgICBzaGVldERhdGEud29ybGREdXBsaWNhdGVzID0gd29ybGREb2N1bWVudHMubGVuZ3RoID8/IDBcblxuICAgICAgY29uc3QgY29tcGVuZGl1bURvY3VtZW50cyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURBbGwoe1xuICAgICAgICBjb2NpZDogc2hlZXREYXRhLmlkLFxuICAgICAgICBsYW5nOiBzaGVldERhdGEubGFuZyxcbiAgICAgICAgc2NvcGU6ICdjb21wZW5kaXVtcydcbiAgICAgIH0pXG4gICAgICBjb25zdCB1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHkgPSB7fVxuICAgICAgc2hlZXREYXRhLmNvbXBlbmRpdW1Eb2N1bWVudEluZm8gPSBjb21wZW5kaXVtRG9jdW1lbnRzLm1hcCgoZCkgPT4ge1xuICAgICAgICBpZiAoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKSB7XG4gICAgICAgICAgT2JqZWN0LmVudHJpZXMoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHksIGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdKSkge1xuICAgICAgICAgICAgICB1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF1dID0gMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdXSsrXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8qJ10gPSAxXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXJhcyA9IChkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMgPyBPYmplY3QuZW50cmllcyhkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pLnNvcnQoKSA6IFtdKVxuICAgICAgICBmb3IgKGNvbnN0IGVyYSBvZiBlcmFzKSB7XG4gICAgICAgICAgdXNlZEVyYXNbZXJhXSA9IENPQzcuZXJhc1tlcmFdID8/ICc/J1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZXJhczogZXJhcy5yZWR1Y2UoZnVuY3Rpb24gKGFsbCwgY3VycmVudCkge1xuICAgICAgICAgICAgYWxsW2N1cnJlbnRdID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIGFsbFxuICAgICAgICAgIH0sIHt9KSxcbiAgICAgICAgICBwcmlvcml0eTogZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSxcbiAgICAgICAgICBsYW5nOiBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLmxhbmcgPz8gJ2VuJyxcbiAgICAgICAgICBsaW5rOiBUZXh0RWRpdG9yLmVucmljaEhUTUwoZC5saW5rLCB7IGFzeW5jOiBmYWxzZSB9KSxcbiAgICAgICAgICBmb2xkZXI6IGQ/LmZvbGRlcj8ubmFtZSA/PyAnJ1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgaWYgKE9iamVjdC5lbnRyaWVzKHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eSkuZmlsdGVyKGMgPT4gY1sxXSA+IDEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2hlZXREYXRhLndhcm5EdXBsaWNhdGVDb21wZW5kaXVtUHJpb3JpdHkgPSB0cnVlXG4gICAgICB9XG4gICAgICBzaGVldERhdGEuY29tcGVuZGl1bUR1cGxpY2F0ZXMgPSBjb21wZW5kaXVtRG9jdW1lbnRzLmxlbmd0aCA/PyAwXG4gICAgICBzaGVldERhdGEudXNlZEVyYXMgPSBbXVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModXNlZEVyYXMpKSB7XG4gICAgICAgIHNoZWV0RGF0YS51c2VkRXJhcy5wdXNoKHtcbiAgICAgICAgICBpZDoga2V5LFxuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHNoZWV0RGF0YS51c2VkRXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICB9IGVsc2Uge1xuICAgICAgc2hlZXREYXRhLmNvbXBlbmRpdW1Eb2N1bWVudEluZm8gPSBbXVxuICAgICAgc2hlZXREYXRhLndvcmxkRG9jdW1lbnRJbmZvID0gW11cbiAgICAgIHNoZWV0RGF0YS53b3JsZER1cGxpY2F0ZXMgPSAwXG4gICAgICBzaGVldERhdGEuY29tcGVuZGl1bUR1cGxpY2F0ZXMgPSAwXG4gICAgICBzaGVldERhdGEud2FybkR1cGxpY2F0ZVdvcmxkUHJpb3JpdHkgPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLndhcm5EdXBsaWNhdGVDb21wZW5kaXVtUHJpb3JpdHkgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLmZpbmQoJ2EuY29weS10by1jbGlwYm9hcmQnKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQoJCh0aGlzKS5zaWJsaW5ncygnaW5wdXQnKS52YWwoKSlcbiAgICB9KVxuXG4gICAgaWYgKCF0aGlzLm9iamVjdC5zaGVldC5pc0VkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJ2lucHV0W25hbWU9X2V4aXN0aW5nJykuY2hhbmdlKGZ1bmN0aW9uIChlKSB7XG4gICAgICBjb25zdCBvYmogPSAkKHRoaXMpXG4gICAgICBjb25zdCBwcmVmaXggPSBvYmouZGF0YSgncHJlZml4JylcbiAgICAgIGxldCB2YWx1ZSA9IG9iai52YWwoKVxuICAgICAgaWYgKHZhbHVlICE9PSAnJykge1xuICAgICAgICB2YWx1ZSA9IHByZWZpeCArIENvQzdVdGlsaXRpZXMudG9LZWJhYkNhc2UodmFsdWUpXG4gICAgICB9XG4gICAgICBodG1sLmZpbmQoJ2lucHV0W25hbWU9aWRdJykudmFsKHZhbHVlKS50cmlnZ2VyKCdjaGFuZ2UnKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJ3NlbGVjdFtuYW1lPWtub3duXScpLmNoYW5nZShmdW5jdGlvbiAoZSkge1xuICAgICAgY29uc3Qgb2JqID0gJCh0aGlzKVxuICAgICAgaHRtbC5maW5kKCdpbnB1dFtuYW1lPWlkXScpLnZhbChvYmoudmFsKCkpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnYVtkYXRhLWd1ZXNzXScpLmNsaWNrKGFzeW5jIGZ1bmN0aW9uIChlKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICAgIGNvbnN0IG9iaiA9ICQodGhpcylcbiAgICAgIGNvbnN0IGd1ZXNzID0gb2JqLmRhdGEoJ2d1ZXNzJylcbiAgICAgIGh0bWwuZmluZCgnaW5wdXRbbmFtZT1pZF0nKS52YWwoZ3Vlc3MpLnRyaWdnZXIoJ2NoYW5nZScpXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBlcmFUb2dnbGUgKGRvY3VtZW50LCBwcm9wZXJ0eUlkKSB7XG4gICAgaWYgKGRvY3VtZW50LnR5cGUgPT09ICdzZXR1cCcpIHtcbiAgICAgIC8vIFNldHVwcyBjYW4gb25seSBoYXZlIG9uZSBlcmEgdG8gbWFrZSBzdXJlIHRoZSBjb3JyZWN0IHNraWxscyBhcmUgcG9wdWxhdGVkIHZpYSBDb0MgSURcbiAgICAgIGNvbnN0IHVwZGF0ZSA9IHtcbiAgICAgICAgW3Byb3BlcnR5SWRdOiB0cnVlXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGRvY3VtZW50LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2tleV0gb2YgT2JqZWN0LmVudHJpZXMoZG9jdW1lbnQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykpIHtcbiAgICAgICAgICBpZiAoa2V5ICE9PSBwcm9wZXJ0eUlkKSB7XG4gICAgICAgICAgICB1cGRhdGVbJy09JyArIGtleV0gPSBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhd2FpdCBkb2N1bWVudC51cGRhdGUoe1xuICAgICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyc6IHVwZGF0ZVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkb2N1bWVudC5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzPy5bcHJvcGVydHlJZF0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodHlwZW9mIGRvY3VtZW50LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGF3YWl0IGRvY3VtZW50LnVwZGF0ZSh7XG4gICAgICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMnOiB7XG4gICAgICAgICAgICBbcHJvcGVydHlJZF06IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBkb2N1bWVudC51cGRhdGUoe1xuICAgICAgICAgIFtgZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcy4ke3Byb3BlcnR5SWR9YF06IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgZG9jdW1lbnQudXBkYXRlKHtcbiAgICAgICAgW2BmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzLi09JHtwcm9wZXJ0eUlkfWBdOiBudWxsXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgQ29DSURFZGl0b3IuZXJhVG9nZ2xlKHRoaXMub2JqZWN0LCBwcm9wZXJ0eUlkKVxuICAgIHRoaXMucmVuZGVyKClcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IGlkID0gZm9ybURhdGEuaWQgfHwgJydcbiAgICBhd2FpdCB0aGlzLm9iamVjdC51cGRhdGUoe1xuICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmlkJzogaWQsXG4gICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcubGFuZyc6IGZvcm1EYXRhLmxhbmcgfHwgZ2FtZS5pMThuLmxhbmcsXG4gICAgICAnZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHknOiBmb3JtRGF0YS5wcmlvcml0eSB8fCAwLFxuICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMnOiAodGhpcy5vYmplY3QuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlcbiAgICB9KVxuICAgIGNvbnN0IGh0bWwgPSAkKHRoaXMub2JqZWN0LnNoZWV0LmVsZW1lbnQpLmZpbmQoJ2hlYWRlci53aW5kb3ctaGVhZGVyIGEuaGVhZGVyLWJ1dHRvbi5lZGl0LWNvYy1pZC13YXJuaW5nLGhlYWRlci53aW5kb3ctaGVhZGVyIGEuaGVhZGVyLWJ1dHRvbi5lZGl0LWNvYy1pZC1leGlzaXRpbmcnKVxuICAgIGlmIChodG1sLmxlbmd0aCkge1xuICAgICAgaHRtbC5jc3Moe1xuICAgICAgICBjb2xvcjogKGlkID8gJ3ZhcigtLWNvbG9yLXRleHQtbGlnaHQtaGlnaGxpZ2h0KScgOiAncmVkJylcbiAgICAgIH0pXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmltcG9ydCB7IENvQ0lERWRpdG9yIH0gZnJvbSAnLi4vYXBwcy9jb2MtaWQtZWRpdG9yLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiAoaGVhZGVyQnV0dG9ucywgc2hlZXQpIHtcbiAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgY29uc3Qgc2hlZXRDb0NJRCA9IHNoZWV0Lm9iamVjdC5mbGFncz8uQ29DNz8uY29jaWRGbGFnXG4gICAgY29uc3Qgbm9JZCA9ICh0eXBlb2Ygc2hlZXRDb0NJRCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIHNoZWV0Q29DSUQuaWQgPT09ICd1bmRlZmluZWQnIHx8IHNoZWV0Q29DSUQuaWQgPT09ICcnKVxuICAgIGNvbnN0IENvQ0lERWRpdG9yQnV0dG9uID0ge1xuICAgICAgY2xhc3M6IChub0lkID8gJ2VkaXQtY29jLWlkLXdhcm5pbmcnIDogJ2VkaXQtY29jLWlkLWV4aXNpdGluZycpLFxuICAgICAgbGFiZWw6ICdDb0M3LkNvQ0lERmxhZy5pZCcsXG4gICAgICBpY29uOiAnZmFzIGZhLWZpbmdlcnByaW50JyxcbiAgICAgIG9uY2xpY2s6ICgpID0+IHtcbiAgICAgICAgbmV3IENvQ0lERWRpdG9yKHNoZWV0Lm9iamVjdCwge30pLnJlbmRlcih0cnVlLCB7IGZvY3VzOiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG51bWJlck9mQnV0dG9ucyA9IGhlYWRlckJ1dHRvbnMubGVuZ3RoXG4gICAgaGVhZGVyQnV0dG9ucy5zcGxpY2UobnVtYmVyT2ZCdXR0b25zIC0gMSwgMCwgQ29DSURFZGl0b3JCdXR0b24pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBBY3RpdmVFZmZlY3QsIGdhbWUgKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvQzdBY3RpdmVFZmZlY3QgZXh0ZW5kcyBBY3RpdmVFZmZlY3Qge1xuICBhcHBseSAoYWN0b3IsIGNoYW5nZSkge1xuICAgIGlmIChjaGFuZ2Uua2V5ID09PSAnc3lzdGVtLmF0dHJpYnMuYXJtb3IudmFsdWUnKSB7XG4gICAgICAvLyBBcm1vciBjYW4gYmUgZnJlZSB0ZXh0IGlmIGJvdGggYXJlIG51bWJlcnMgYWxsb3cgY2FsY3VsYXRpb25cbiAgICAgIGlmICghaXNOYU4oY2hhbmdlLnZhbHVlKSAmJiAhaXNOYU4oYWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IudmFsdWUpKSB7XG4gICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlID0gTnVtYmVyKGFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY2hhbmdlLmtleSA9PT0gJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJykge1xuICAgICAgLy8gSWYgZGIgaXMgY3VycmVudGx5IGEgbnVtYmVyIGFsbG93IHN0cmluZ3MgdG8gYmUgYXBwbGllZFxuICAgICAgaWYgKGlzTmFOKGNoYW5nZS52YWx1ZSkgJiYgIWlzTmFOKGFjdG9yLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlKSkge1xuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSA9IFN0cmluZyhhY3Rvci5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY2hhbmdlcyA9IHN1cGVyLmFwcGx5KGFjdG9yLCBjaGFuZ2UpXG4gICAgcmV0dXJuIGNoYW5nZXNcbiAgfVxuXG4gIC8qKlxuICAgKiBNYW5hZ2UgQWN0aXZlIEVmZmVjdCBpbnN0YW5jZXMgdGhyb3VnaCB0aGUgQWN0b3IgU2hlZXQgdmlhIGVmZmVjdCBjb250cm9sIGJ1dHRvbnMuXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXZlbnQgICAgICBUaGUgbGVmdC1jbGljayBldmVudCBvbiB0aGUgZWZmZWN0IGNvbnRyb2xcbiAgICogQHBhcmFtIHtBY3RvcnxJdGVtfSBvd25lciAgICAgIFRoZSBvd25pbmcgZG9jdW1lbnQgd2hpY2ggbWFuYWdlcyB0aGlzIGVmZmVjdFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZXxudWxsfSAgICAgICAgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNoYW5nZXMgYXJlIGNvbXBsZXRlLlxuICAgKi9cbiAgc3RhdGljIG9uTWFuYWdlQWN0aXZlRWZmZWN0IChldmVudCwgb3duZXIpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGknKVxuICAgIGNvbnN0IGVmZmVjdCA9IGxpLmRhdGFzZXQuZWZmZWN0SWRcbiAgICAgID8gb3duZXIuZWZmZWN0cy5nZXQobGkuZGF0YXNldC5lZmZlY3RJZClcbiAgICAgIDogbnVsbFxuICAgIHN3aXRjaCAoYS5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnY3JlYXRlJzpcbiAgICAgICAgcmV0dXJuIG93bmVyLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FZmZlY3ROZXcnKSxcbiAgICAgICAgICAgIGljb246ICdpY29ucy9zdmcvYXVyYS5zdmcnLFxuICAgICAgICAgICAgb3JpZ2luOiBvd25lci51dWlkLFxuICAgICAgICAgICAgJ2R1cmF0aW9uLnJvdW5kcyc6XG4gICAgICAgICAgICAgIGxpLmRhdGFzZXQuZWZmZWN0VHlwZSA9PT0gJ3RlbXBvcmFyeScgPyAxIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgZGlzYWJsZWQ6IGxpLmRhdGFzZXQuZWZmZWN0VHlwZSA9PT0gJ2luYWN0aXZlJ1xuICAgICAgICAgIH1cbiAgICAgICAgXSlcbiAgICAgIGNhc2UgJ2VkaXQnOlxuICAgICAgICByZXR1cm4gZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgY2FzZSAnZGVsZXRlJzpcbiAgICAgICAgcmV0dXJuIGVmZmVjdC5kZWxldGUoKVxuICAgICAgY2FzZSAndG9nZ2xlJzpcbiAgICAgICAgcmV0dXJuIGVmZmVjdC51cGRhdGUoeyBkaXNhYmxlZDogIWVmZmVjdC5kaXNhYmxlZCB9KVxuICAgIH1cbiAgfVxuXG4gIF9wcmVwYXJlRHVyYXRpb24gKCkge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gc3VwZXIuX3ByZXBhcmVEdXJhdGlvbigpXG4gICAgaWYgKGR1cmF0aW9uLnR5cGUgPT09ICdzZWNvbmRzJykge1xuICAgICAgaWYgKGR1cmF0aW9uLnNlY29uZHMgPiAzNjAwKSB7XG4gICAgICAgIGR1cmF0aW9uLmxhYmVsID0gbmV3IERhdGUoZHVyYXRpb24uc2Vjb25kcyAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc2xpY2UoMTEsIDE5KVxuICAgICAgfSBlbHNlIGlmIChkdXJhdGlvbi5zZWNvbmRzID4gMTAwKSB7XG4gICAgICAgIGR1cmF0aW9uLmxhYmVsID0gbmV3IERhdGUoZHVyYXRpb24uc2Vjb25kcyAqIDEwMDApLnRvSVNPU3RyaW5nKCkuc2xpY2UoMTQsIDE5KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZHVyYXRpb25cbiAgfVxuXG4gIGdldCBpc1N0YXR1cyAoKSB7XG4gICAgY29uc3Qgc3RhdHVzSWQgPSB0aGlzLmdldEZsYWcoJ2NvcmUnLCAnc3RhdHVzSWQnKVxuICAgIHJldHVybiBbXG4gICAgICAndGVtcG9JbnNhbmUnLFxuICAgICAgJ2luZGVmSW5zYW5lJyxcbiAgICAgICdjcml0aWNhbFdvdW5kcycsXG4gICAgICAnZHlpbmcnLFxuICAgICAgJ2RlYWQnLFxuICAgICAgJ3VuY29uc2Npb3VzJyxcbiAgICAgICdwcm9uZSdcbiAgICBdLmluY2x1ZGVzKHN0YXR1c0lkKVxuICB9XG5cbiAgc3RhdGljIHByZXBhcmVBY3RpdmVFZmZlY3RDYXRlZ29yaWVzIChlZmZlY3RzLCB7IHN0YXR1cyA9IHRydWUgfSA9IHt9KSB7XG4gICAgLy8gRGVmaW5lIGVmZmVjdCBoZWFkZXIgY2F0ZWdvcmllc1xuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSB7XG4gICAgICB0ZW1wb3Jhcnk6IHtcbiAgICAgICAgdHlwZTogJ3RlbXBvcmFyeScsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1RlbXBvcmFyeScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfSxcbiAgICAgIHBhc3NpdmU6IHtcbiAgICAgICAgdHlwZTogJ3Bhc3NpdmUnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdQYXNzaXZlJyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9LFxuICAgICAgaW5hY3RpdmU6IHtcbiAgICAgICAgdHlwZTogJ2luYWN0aXZlJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnSW5hY3RpdmUnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH0sXG4gICAgICBzdXBwcmVzc2VkOiB7XG4gICAgICAgIHR5cGU6ICdzdXBwcmVzc2VkJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU3VwcHJlc3NlZCcpLFxuICAgICAgICBlZmZlY3RzOiBbXSxcbiAgICAgICAgaW5mbzogW2dhbWUuaTE4bi5sb2NhbGl6ZSgnVW5hdmFpbGFibGUnKV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzKSB7XG4gICAgICBjYXRlZ29yaWVzLnN0YXR1cyA9IHtcbiAgICAgICAgdHlwZTogJ3N0YXR1cycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1N0YXR1cycpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBJdGVyYXRlIG92ZXIgYWN0aXZlIGVmZmVjdHMsIGNsYXNzaWZ5aW5nIHRoZW0gaW50byBjYXRlZ29yaWVzXG4gICAgZm9yIChjb25zdCBlIG9mIGVmZmVjdHMpIHtcbiAgICAgIGUuX2dldFNvdXJjZU5hbWUoKSAvLyBUcmlnZ2VyIGEgbG9va3VwIGZvciB0aGUgc291cmNlIG5hbWVcbiAgICAgIGlmIChlLmlzU3VwcHJlc3NlZCkgY2F0ZWdvcmllcy5zdXBwcmVzc2VkLmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBpZiAoZS5pc1N0YXR1cykgY2F0ZWdvcmllcy5zdGF0dXMuZWZmZWN0cy5wdXNoKGUpXG4gICAgICBlbHNlIGlmIChlLmRpc2FibGVkKSBjYXRlZ29yaWVzLmluYWN0aXZlLmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBpZiAoZS5pc1RlbXBvcmFyeSkgY2F0ZWdvcmllcy50ZW1wb3JhcnkuZWZmZWN0cy5wdXNoKGUpXG4gICAgICBlbHNlIGNhdGVnb3JpZXMucGFzc2l2ZS5lZmZlY3RzLnB1c2goZSlcbiAgICB9XG5cbiAgICBjYXRlZ29yaWVzLnN1cHByZXNzZWQuaGlkZGVuID0gIWNhdGVnb3JpZXMuc3VwcHJlc3NlZC5lZmZlY3RzLmxlbmd0aFxuICAgIHJldHVybiBjYXRlZ29yaWVzXG4gIH1cblxuICBzdGF0aWMgcHJlcGFyZU5QQ0FjdGl2ZUVmZmVjdENhdGVnb3JpZXMgKGVmZmVjdHMpIHtcbiAgICBsZXQgY291bnQgPSAwXG4gICAgLy8gRGVmaW5lIGVmZmVjdCBoZWFkZXIgY2F0ZWdvcmllc1xuICAgIGNvbnN0IGNhdGVnb3JpZXMgPSB7XG4gICAgICBhY3RpdmU6IHtcbiAgICAgICAgdHlwZTogJ2FjdGl2ZScsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0FjdGl2ZScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfSxcbiAgICAgIGluYWN0aXZlOiB7XG4gICAgICAgIHR5cGU6ICdpbmFjdGl2ZScsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0luYWN0aXZlJyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9XG4gICAgfVxuICAgIC8vIEl0ZXJhdGUgb3ZlciBhY3RpdmUgZWZmZWN0cywgY2xhc3NpZnlpbmcgdGhlbSBpbnRvIGNhdGVnb3JpZXNcbiAgICBmb3IgKGNvbnN0IGUgb2YgZWZmZWN0cykge1xuICAgICAgY291bnQgKz0gMVxuICAgICAgZS5fZ2V0U291cmNlTmFtZSgpIC8vIFRyaWdnZXIgYSBsb29rdXAgZm9yIHRoZSBzb3VyY2UgbmFtZVxuICAgICAgaWYgKGUuaXNTdXBwcmVzc2VkIHx8IGUuZGlzYWJsZWQpIGNhdGVnb3JpZXMuaW5hY3RpdmUuZWZmZWN0cy5wdXNoKGUpXG4gICAgICBlbHNlIGNhdGVnb3JpZXMuYWN0aXZlLmVmZmVjdHMucHVzaChlKVxuICAgIH1cblxuICAgIGlmIChjb3VudCA+IDApIGNhdGVnb3JpZXMuZXhwZW5kZWQgPSB0cnVlXG4gICAgcmV0dXJuIGNhdGVnb3JpZXNcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDb250ZXh0TWVudSB7XG4gIGJpbmQgKG1lbnUsIGh0bWwsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5fY2FsbGJhY2sgPSBjYWxsYmFja1xuICAgIHRoaXMuX2h0bWwgPSBodG1sXG4gICAgdGhpcy5fbWVudSA9IG1lbnVcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVudVRyaWdnZXIgPSBodG1sLmZpbmQoYFtkYXRhLWNvbnRleHQtbWVudT0ke21lbnUuaWR9XWApIC8vIEZpbmQgYWxsIG1lbnUgdHJpZ2dlcnMuXG4gICAgICBpZiAobWVudVRyaWdnZXIubGVuZ3RoID09PSAwKSByZXR1cm4gLy8gSWYgdGhlcmUgaXMgbm8gdHJpZ2dlciwgZG8gbm90IGNvbnRpbnVlLlxuICAgICAgbWVudVRyaWdnZXIuY29udGV4dG1lbnUodGhpcy5fb25Db250ZXh0TWVudS5iaW5kKHRoaXMpKSAvLyBBdHRhY2ggdGhlIGhhbmRsZXIuXG4gICAgICBjb25zdCBtZW51RWxlbWVudCA9IENvQzdDb250ZXh0TWVudS5DcmVhdGVNZW51KG1lbnUpIC8vIEJ1aWxkIHRoZSBtZW51XG4gICAgICBtZW51RWxlbWVudC5vbignY2xpY2snLFxuICAgICAgICAnLm1lbnUtYWN0aW9uJyxcbiAgICAgICAgdGhpcy5fb25NZW51QWN0aW9uLmJpbmQodGhpcykpXG4gICAgICAvLyBjb25zdCBkb2N1bWVudE1lbnUgPSB0aGlzLm1lbnVDb250YWluZXIuZmluZChgLmNvbnRleHQtbWVudS13cmFwcGVyLiR7bWVudS5pZH1gKVxuICAgICAgaWYgKHRoaXMubWVudS5sZW5ndGggIT09IDApIHRoaXMubWVudS5yZXBsYWNlV2l0aChtZW51RWxlbWVudClcbiAgICAgIGVsc2UgdGhpcy5tZW51Q29udGFpbmVyLmFwcGVuZChtZW51RWxlbWVudClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcbiAgICB9XG4gIH1cblxuICBnZXQgbWVudUNvbnRhaW5lciAoKSB7XG4gICAgbGV0IG1lbnVDb250YWluZXIgPSB0aGlzLl9odG1sLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXG4gICAgaWYgKG1lbnVDb250YWluZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLl9odG1sLmFwcGVuZCgnPGRpdiBjbGFzcz1cIm1lbnUtY29udGFpbmVyXCI+PC9kaXY+JylcbiAgICAgIG1lbnVDb250YWluZXIgPSB0aGlzLl9odG1sLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXG4gICAgfVxuICAgIHJldHVybiBtZW51Q29udGFpbmVyXG4gIH1cblxuICBnZXQgbWVudSAoKSB7XG4gICAgLy8gY29uc3QgbWVudUNvbnRhaW5lciA9IHRoaXMubWVudUNvbnRhaW5lclxuICAgIC8vIGlmICghbWVudUNvbnRhaW5lciB8fCBtZW51Q29udGFpbmVyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5tZW51Q29udGFpbmVyLmZpbmQoYC5jb250ZXh0LW1lbnUtd3JhcHBlci4ke3RoaXMuX21lbnUuaWR9YClcbiAgfVxuXG4gIF9vbk1lbnVBY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIC8vIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdicmFuY2gnKSkgcmV0dXJuXG4gICAgcmV0dXJuIHRoaXMuX2NhbGxiYWNrKGV2ZW50LCB0aGlzLnRhcmdldClcbiAgfVxuXG4gIHN0YXRpYyBjbG9zZUFsbCAoKSB7XG4gICAgY29uc3QgbWVudUNvbnRhaW5lcnMgPSAkKCdib2R5JykuZmluZCgnLm1lbnUtY29udGFpbmVyJylcbiAgICBjb25zdCBtZW51cyA9IG1lbnVDb250YWluZXJzLmZpbmQoJy5jb250ZXh0LW1lbnUtd3JhcHBlcicpXG4gICAgbWVudXMuZWFjaChmdW5jdGlvbiAoaSwgbSkgeyBtLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJyB9KVxuICAgIC8vIGJvZHkuZmluZCgnLm1lbnUtd3JhcHBlcicpLmhpZGUoKVxuICB9XG5cbiAgX29uQ29udGV4dE1lbnUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQodHJ1ZSlcbiAgICBDb0M3Q29udGV4dE1lbnUuY2xvc2VBbGwoKSAvLyBPbmx5IDEgbWVudSBjYW4gYmUgb3Blbi5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudD8uY3VycmVudFRhcmdldFxuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0XG4gICAgaWYgKCF0YXJnZXQpIHJldHVyblxuICAgIGNvbnN0IG1lbnVOYW1lID0gdGFyZ2V0LmRhdGFzZXQ/LmNvbnRleHRNZW51XG4gICAgaWYgKG1lbnVOYW1lID09PSB0aGlzLl9tZW51LmlkKSB7XG4gICAgICBjb25zdCB3cmFwcGVyID0gdGhpcy5tZW51XG4gICAgICBpZiAod3JhcHBlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHN1Yk1lbnUgPSB3cmFwcGVyLmZpbmQoJy5zdWItbWVudScpXG4gICAgICAgIGxldCBsZWZ0ID0gZXZlbnQuY2xpZW50WFxuICAgICAgICBsZXQgdG9wID0gZXZlbnQuY2xpZW50WVxuICAgICAgICBjb25zdCBtZW51SGVpZ2h0ID0gd3JhcHBlci5vdXRlckhlaWdodCgpXG4gICAgICAgIGNvbnN0IG1lbnVXaWR0aCA9IHdyYXBwZXIub3V0ZXJXaWR0aCgpXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCBtZW51SGVpZ2h0ICsgdG9wKSB7XG4gICAgICAgICAgdG9wID0gdG9wIC0gbWVudUhlaWdodFxuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IG1lbnVXaWR0aCArIGxlZnQpIHtcbiAgICAgICAgICBsZWZ0ID0gd2luZG93LmlubmVyV2lkdGggLSBtZW51V2lkdGhcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3ViTWVudS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgbWVudVdpZHRoICsgbGVmdCArIHN1Yk1lbnUub3V0ZXJXaWR0aCgpKSB7XG4gICAgICAgICAgICBzdWJNZW51LmNzcyh7XG4gICAgICAgICAgICAgIHJpZ2h0OiBgJHttZW51V2lkdGggLSA1fXB4YCxcbiAgICAgICAgICAgICAgbGVmdDogJydcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN1Yk1lbnUuY3NzKHtcbiAgICAgICAgICAgICAgbGVmdDogYCR7bWVudVdpZHRoIC0gNX1weGAsXG4gICAgICAgICAgICAgIHJpZ2h0OiAnJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgd3JhcHBlci5jc3Moe1xuICAgICAgICAgIGxlZnQ6IGAke2xlZnR9cHhgLFxuICAgICAgICAgIHRvcDogYCR7dG9wfXB4YCxcbiAgICAgICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZSdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgY2FuU2VlICh2aXNpYmlsaXR5KSB7XG4gICAgc3dpdGNoICh2aXNpYmlsaXR5LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2dtJzpcbiAgICAgICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gICAgICBjYXNlICd0cnVzdGVkJzpcbiAgICAgICAgcmV0dXJuIGdhbWUudXNlci5pc1RydXN0ZWRcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIENyZWF0ZU1lbnUgKG1lbnUpIHtcbiAgICBjb25zdCBjbGFzc2VzID0gdHlwZW9mIG1lbnUuY2xhc3NlcyA9PT0gJ3N0cmluZycgPyBbbWVudS5jbGFzc2VzXSA6IG1lbnUuY2xhc3Nlc1xuICAgIGNsYXNzZXMucHVzaCgnY29udGV4dC1tZW51LXdyYXBwZXInKVxuICAgIGNvbnN0IHdyYXBwZXIgPSAkKCc8ZGl2PjwvZGl2PicpXG4gICAgd3JhcHBlci5hZGRDbGFzcyhtZW51LmlkKVxuICAgIGNsYXNzZXMuZm9yRWFjaChjID0+IHdyYXBwZXIuYWRkQ2xhc3MoYykpXG4gICAgaWYgKG1lbnUuc2VjdGlvbikge1xuICAgICAgbWVudS5zZWN0aW9uLmZvckVhY2gocyA9PiB7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlU2VjdGlvbihzLCB7IG11bHRpOiB0cnVlIH0pXG4gICAgICAgIGlmIChzZWN0aW9uKSB3cmFwcGVyLmFwcGVuZChzZWN0aW9uKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2VjdGlvbiA9IENvQzdDb250ZXh0TWVudS5DcmVhdGVTZWN0aW9uKG1lbnUpXG4gICAgICBpZiAoc2VjdGlvbikgd3JhcHBlci5hcHBlbmQoc2VjdGlvbilcbiAgICB9XG4gICAgcmV0dXJuIHdyYXBwZXJcbiAgfVxuXG4gIHN0YXRpYyBDcmVhdGVTZWN0aW9uIChzLCB7IG11bHRpID0gZmFsc2UsIHN1Yk1lbnUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIXMuaXRlbXMpIHJldHVybiBudWxsXG4gICAgaWYgKHMudmlzaWJpbGl0eSAmJiAhQ29DN0NvbnRleHRNZW51LmNhblNlZShzLnZpc2liaWxpdHkpKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGNsYXNzZXMgPSBzLmNsYXNzZXMgPyB0eXBlb2Ygcy5jbGFzc2VzID09PSAnc3RyaW5nJyA/IFtzLmNsYXNzZXNdIDogcy5jbGFzc2VzIDogW11cbiAgICBpZiAobXVsdGkpIGNsYXNzZXMucHVzaCgnbWVudS1zZWN0aW9uJylcbiAgICBpZiAoc3ViTWVudSkgY2xhc3Nlcy5wdXNoKCdzdWItbWVudScpXG4gICAgY29uc3Qgc2VjdGlvbiA9ICQoJzx1bD48L3VsPicpXG4gICAgY2xhc3Nlcy5mb3JFYWNoKGMgPT4gc2VjdGlvbi5hZGRDbGFzcyhjKSlcbiAgICBzLml0ZW1zLmZvckVhY2goaSA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoJzxsaT48L2xpPicpXG4gICAgICBsaS5hZGRDbGFzcygnbWVudS1pdGVtJylcbiAgICAgIGlmIChpLmFjdGlvbikge1xuICAgICAgICBsaS5hZGRDbGFzcygnbWVudS1hY3Rpb24nKVxuICAgICAgICBsaS5hdHRyKCdkYXRhLWFjdGlvbicsIGkuYWN0aW9uKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBpLmxhYmVsID09PSAnc3RyaW5nJykgbGkuYXBwZW5kKGA8c3Bhbj4ke2kubGFiZWx9PC9zcGFuPmApXG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKGkubGFiZWwuaWNvbikgbGkuYXBwZW5kKGA8aSBjbGFzcz1cIiR7aS5sYWJlbC5pY29ufVwiPjwvaT5gKVxuICAgICAgICBpZiAoaS5sYWJlbC50ZXh0KSBsaS5hcHBlbmQoYDxzcGFuPiR7aS5sYWJlbC50ZXh0fTwvc3Bhbj5gKVxuICAgICAgfVxuICAgICAgaWYgKGkuc3ViTWVudSkge1xuICAgICAgICBsaS5hZGRDbGFzcygnc3ViLW1lbnUtYnV0dG9uJylcbiAgICAgICAgbGkuYXBwZW5kKCc8aSBjbGFzcz1cImZhcyBmYS1jYXJldC1yaWdodFwiPjwvaT4nKVxuICAgICAgICBjb25zdCBzdWIgPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlU2VjdGlvbihpLnN1Yk1lbnUsIHsgc3ViTWVudTogdHJ1ZSB9KVxuICAgICAgICBpZiAoc3ViKSBsaS5hcHBlbmQoc3ViKVxuICAgICAgfVxuICAgICAgc2VjdGlvbi5hcHBlbmQobGkpXG4gICAgfSlcbiAgICByZXR1cm4gc2VjdGlvblxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3JTaGVldCwgQ2hhdE1lc3NhZ2UsIENPTlNULCBEaWFsb2csIEZvcm1EYXRhLCBmb3VuZHJ5LCBnYW1lLCBnZXRQcm9wZXJ0eSwgSG9va3MsIEl0ZW0sIG1lcmdlT2JqZWN0LCBSb2xsLCBUZXh0RWRpdG9yLCB1aSAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuLi8uLi9hcHBzL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXRNZXNzYWdlIH0gZnJvbSAnLi4vLi4vYXBwcy9jb2M3LWNoYXQtbWVzc2FnZS5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi8uLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi4vLi4vY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi4vLi4vY2hhdC9yYW5nZWNvbWJhdC5qcydcbmltcG9ydCB7IENvQzdDb25DaGVjayB9IGZyb20gJy4uLy4uL2NoYXQvY29uY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi4vLi4vYXBwcy9jb2M3LWxpbmsuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9kYW1hZ2UuanMnXG5pbXBvcnQgQ29DN0FjdGl2ZUVmZmVjdCBmcm9tICcuLi8uLi9hY3RpdmUtZWZmZWN0LmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRleHRNZW51IH0gZnJvbSAnLi4vLi4vY29udGV4dC1tZW51LmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEFjdG9yU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBY3RvclNoZWV0IGV4dGVuZHMgQWN0b3JTaGVldCB7XG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuc2hvd0hpZGRlbkRldk1lbnUgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdoaWRkZW5kZXZtZW51JylcblxuICAgIHNoZWV0RGF0YS5jYW5EcmFnVG9rZW4gPSAhIXRoaXMudG9rZW4gJiYgZ2FtZS51c2VyLmlzR01cbiAgICBzaGVldERhdGEubGlua2VkQWN0b3IgPSB0aGlzLmFjdG9yLnByb3RvdHlwZVRva2VuPy5hY3RvckxpbmsgPT09IHRydWVcbiAgICBzaGVldERhdGEuaXNUb2tlbiA9IHRoaXMuYWN0b3IuaXNUb2tlblxuICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSA9IHt9XG4gICAgc2hlZXREYXRhLnNraWxscyA9IHt9XG4gICAgc2hlZXREYXRhLmNvbWJhdFNraWxscyA9IHt9XG4gICAgc2hlZXREYXRhLndlYXBvbnMgPSB7fVxuICAgIHNoZWV0RGF0YS5yYW5nZVdwbiA9IFtdXG4gICAgc2hlZXREYXRhLm1lbGVlV3BuID0gW11cbiAgICBzaGVldERhdGEuYWN0b3JGbGFncyA9IHt9XG5cbiAgICBzaGVldERhdGEuZWZmZWN0cyA9XG4gICAgICB0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInXG4gICAgICAgID8gQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyh0aGlzLmFjdG9yLmVmZmVjdHMpXG4gICAgICAgIDogQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlTlBDQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyh0aGlzLmFjdG9yLmVmZmVjdHMpXG5cbiAgICBzaGVldERhdGEucGVybWlzc2lvbkxpbWl0ZWQgPSAhZ2FtZS51c2VyLmlzR00gJiYgKHRoaXMuYWN0b3Iub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gdGhpcy5hY3Rvci5vd25lcnNoaXAuZGVmYXVsdCkgPT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTElNSVRFRFxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBzaGVldERhdGEuYWxsb3dVbmxvY2sgPVxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdhbHdheXMnIHx8XG4gICAgICBnYW1lLnVzZXIuaXNHTSB8fFxuICAgICAgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnY3JlYXRpb24nICYmXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKSlcbiAgICBpZiAoXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2NyZWF0aW9uJyAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpXG4gICAgKSB7XG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rvci50eXBlICE9PSAndmVoaWNsZScpIHtcbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzID0ge1xuICAgICAgICAgIHN0cjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5TVFInLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU3RyZW5ndGgnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29uOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLkNPTicsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2l6OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLlNJWicsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TaXplJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRleDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5ERVgnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRGV4dGVyaXR5JyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFwcDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5BUFAnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBpbnQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuSU5UJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkludGVsbGlnZW5jZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3c6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuUE9XJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlBvd2VyJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVkdToge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5FRFUnLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicykge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicyA9IHtcbiAgICAgICAgICBocDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0hQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnSGl0IHBvaW50cycsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtcDoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0hQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnTWFnaWMgcG9pbnRzJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGxjazogeyB2YWx1ZTogbnVsbCwgc2hvcnQ6ICdMQ0snLCBsYWJlbDogJ0x1Y2snIH0sXG4gICAgICAgICAgc2FuOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIG1heDogOTksXG4gICAgICAgICAgICBzaG9ydDogJ1NBTicsXG4gICAgICAgICAgICBsYWJlbDogJ1Nhbml0eScsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtb3Y6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdNT1YnLFxuICAgICAgICAgICAgbGFiZWw6ICdNb3ZlbWVudCByYXRlJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRiOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnREInLFxuICAgICAgICAgICAgbGFiZWw6ICdEYW1hZ2UgYm9udXMnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYnVpbGQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdCTEQnLFxuICAgICAgICAgICAgbGFiZWw6ICdCdWlsZCcsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcm1vcjogeyB2YWx1ZTogbnVsbCwgYXV0bzogZmFsc2UgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSkge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5ID0ge1xuICAgICAgICAgIHBlcnNvbmFsRGVzY3JpcHRpb246IHsgdHlwZTogJ3N0cmluZycsIHZhbHVlOiAnJyB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zID0ge1xuICAgICAgICAgIG9jY3VwYXRpb246ICcnLFxuICAgICAgICAgIGFnZTogJycsXG4gICAgICAgICAgc2V4OiAnJyxcbiAgICAgICAgICByZXNpZGVuY2U6ICcnLFxuICAgICAgICAgIGJpcnRocGxhY2U6ICcnLFxuICAgICAgICAgIGFyY2hldHlwZTogJycsXG4gICAgICAgICAgb3JnYW5pemF0aW9uOiAnJyxcbiAgICAgICAgICBwbGF5ZXJuYW1lOiAnJ1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzKSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncyA9IHsgbG9ja2VkOiB0cnVlLCBtYW51YWxDcmVkaXQ6IGZhbHNlIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uY3JlZGl0KSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jcmVkaXQgPSB7XG4gICAgICAgICAgbW9uZXRhcnlTeW1ib2w6IG51bGwsXG4gICAgICAgICAgbXVsdGlwbGllcjogbnVsbCxcbiAgICAgICAgICBzcGVudDogbnVsbCxcbiAgICAgICAgICBhc3NldHNEZXRhaWxzOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGV2ZWxvcG1lbnQpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRldmVsb3BtZW50ID0ge1xuICAgICAgICAgIHBlcnNvbmFsOiBudWxsLFxuICAgICAgICAgIG9jY3VwYXRpb246IG51bGwsXG4gICAgICAgICAgYXJjaGV0eXBlOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5KSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5ID0gW11cblxuICAgICAgc2hlZXREYXRhLnB1bHBSdWxlQXJjaGV0eXBlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKVxuICAgICAgc2hlZXREYXRhLnB1bHBSdWxlT3JnYW5pemF0aW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAgICdDb0M3JyxcbiAgICAgICAgJ3B1bHBSdWxlT3JnYW5pemF0aW9uJ1xuICAgICAgKVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5pc0RlYWQgPSB0aGlzLmFjdG9yLmRlYWRcbiAgICBzaGVldERhdGEuaXNEeWluZyA9IHRoaXMuYWN0b3IuZHlpbmdcblxuICAgIGlmIChzaGVldERhdGEuaXRlbXMpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzaGVldERhdGEuaXRlbXMpIHtcbiAgICAgICAgLy8gc2kgYydlc3QgdW5lIGZvcm11bGUgZXQgcXUnb24gcGV1dCBsJ2V2YWx1ZXJcbiAgICAgICAgLy8gY2UgYmxvYyBkZXZyYWl0IGV0cmUgZMOpcGxhY8OpIGRhbnMgbGUgYmxvYyBfdXBkYXRlRm9ybURhdGFcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodGhpcy5hY3Rvci50eXBlICE9PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgaWYgKGlzTmFOKE51bWJlcihpdGVtLnN5c3RlbS52YWx1ZSkpKSB7XG4gICAgICAgICAgICAgIGxldCB2YWx1ZSA9IG51bGxcbiAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgICAgICAgQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXRcbiAgICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuJykpIHtcbiAgICAgICAgICAgICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGdldFByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZS5zdWJzdHJpbmcoNSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IChcbiAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKGl0ZW0uc3lzdGVtLnZhbHVlLCBwYXJzZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKS50b3RhbFxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yVW5hYmxlVG9QYXJzZVNraWxsRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uc3lzdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbFxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0udmFsdWUgPSB2YWx1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1Ub1VwZGF0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcbiAgICAgICAgICAgICAgICAgIGBbQ09DN10gKEFjdG9yOiR7dGhpcy5uYW1lfSkgRXZhbHVhdGluZyBza2lsbCAke2l0ZW0ubmFtZX06JHtpdGVtLnN5c3RlbS52YWx1ZX0gdG8gJHt2YWx1ZX1gXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW1Ub1VwZGF0ZS51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS52YWx1ZSc6IHZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgY29uc3QgeyBiYXNlLCByYXdWYWx1ZSwgdmFsdWUgfSA9IHNraWxsLnN5c3RlbVxuXG4gICAgICAgICAgICAvLyBBc3N1bWUgZmFsbGJhY2sgdmFsdWVzLCB1c2VmdWwgZm9yIGluaXRpYWwgc2V0dXAgb2Ygc2tpbGxzXG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5yYXdWYWx1ZSA9IHJhd1ZhbHVlIHx8IHZhbHVlIHx8IGJhc2VcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnZhbHVlID0gdmFsdWUgfHwgYmFzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW0uX2lkKVxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYmFzZSA9IGF3YWl0IHNraWxsLmFzeW5jQmFzZSgpXG5cbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS52YWx1ZSkge1xuICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBwYXJ0IG9mIG1pZ3JhdGlvbiBvciBkb25lIGF0IGluaXQgIVxuICAgICAgICAgICAgICAvLyBXYXMgZG9uZSB3aGVuIHNraWxsIHZhbHVlIHdhcyBjaGFuZ2VkIHRvIGJhc2UgKyBhZGp1c3RlbWVudFxuICAgICAgICAgICAgICBjb25zdCBleHAgPSBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICAgICAgICA6IDBcbiAgICAgICAgICAgICAgbGV0IHVwZGF0ZWRFeHAgPSBleHAgKyBwYXJzZUludChpdGVtLnN5c3RlbS52YWx1ZSkgLSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgICBpZiAodXBkYXRlZEV4cCA8PSAwKSB1cGRhdGVkRXhwID0gbnVsbFxuICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXG4gICAgICAgICAgICAgICAgYFtDT0M3XSBVcGRhdGluZyBza2lsbCAke3NraWxsLm5hbWV9IGV4cGVyaWVuY2UuIEV4cGVyaWVuY2UgbWlzc2luZzogJHt1cGRhdGVkRXhwfWBcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIF9pZDogaXRlbS5faWQsXG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiB1cGRhdGVkRXhwLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS52YWx1ZSc6IG51bGxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgIGlmICghaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMpIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzID0ge31cbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSA9IHVwZGF0ZWRFeHBcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0ucmF3VmFsdWUgPSBza2lsbC5yYXdWYWx1ZVxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS52YWx1ZSA9IHNraWxsLnZhbHVlIC8vIEFDVElWRV9FRkZFQ1QgbmVjZXNzYXJ5IHRvIGFwcGx5IGVmZmVjdHNcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnZhbHVlID0gc2tpbGwudmFsdWUgLy8gQUNUSVZFX0VGRkVDVCBuZWNlc3NhcnkgdG8gYXBwbHkgZWZmZWN0c1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5yYXdWYWx1ZSA9IHNraWxsLnJhd1ZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGxpc3QgPSBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXVxuICAgICAgICBpZiAoIWxpc3QpIHtcbiAgICAgICAgICBsaXN0ID0gW11cbiAgICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXSA9IGxpc3RcbiAgICAgICAgfVxuICAgICAgICBsaXN0LnB1c2goaXRlbSlcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBpdGVtVHlwZSBpbiBzaGVldERhdGEuaXRlbXNCeVR5cGUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW1UeXBlXS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgIH1cblxuICAgICAgLy8gcmVkb25kYW50IGF2ZWMgbWF0cmljZSBpdGVtYnl0eXBlXG4gICAgICBzaGVldERhdGEuc2tpbGxzID0gc2hlZXREYXRhLml0ZW1zXG4gICAgICAgIC5maWx0ZXIoaXRlbSA9PiBpdGVtLnR5cGUgPT09ICdza2lsbCcpXG4gICAgICAgIC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgICAgc2hlZXREYXRhLm1lbGVlU2tpbGxzID0gc2hlZXREYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+XG4gICAgICAgICAgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSB0cnVlICYmXG4gICAgICAgICAgc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgPT09IHRydWVcbiAgICAgIClcbiAgICAgIHNoZWV0RGF0YS5yYW5nZVNraWxscyA9IHNoZWV0RGF0YS5za2lsbHMuZmlsdGVyKFxuICAgICAgICBza2lsbCA9PlxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gPT09IHRydWVcbiAgICAgIClcblxuICAgICAgY29uc3QgY2J0U2tpbGxzID0gc2hlZXREYXRhLnNraWxscy5maWx0ZXIoXG4gICAgICAgIHNraWxsID0+IHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZVxuICAgICAgKVxuICAgICAgaWYgKGNidFNraWxscykge1xuICAgICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIGNidFNraWxscykge1xuICAgICAgICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbHNbc2tpbGwuX2lkXSA9IHNraWxsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgd2VhcG9ucyA9IHNoZWV0RGF0YS5pdGVtc0J5VHlwZS53ZWFwb25cblxuICAgICAgaWYgKHdlYXBvbnMpIHtcbiAgICAgICAgZm9yIChjb25zdCB3ZWFwb24gb2Ygd2VhcG9ucykge1xuICAgICAgICAgIHdlYXBvbi51c2VzQWx0ZXJuYXRlU2tpbGwgPVxuICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcbiAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5icnN0ID09PSB0cnVlXG4gICAgICAgICAgaWYgKCF3ZWFwb24uc3lzdGVtLmFtbW8pIHdlYXBvbi5zeXN0ZW0uYW1tbyA9IDBcblxuICAgICAgICAgIHdlYXBvbi5za2lsbFNldCA9IHRydWVcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4ubmFtZSA9ICcnO1xuICAgICAgICAgIC8vIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi52YWx1ZSA9IDA7XG4gICAgICAgICAgLy8gd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgPSAnJztcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYudmFsdWUgPSAwO1xuICAgICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQgPT09ICcnKSB7XG4gICAgICAgICAgICAvLyBUT0RPIDogc2kgbCdJRCBuJ2VzdHMgcGFzIGTDqWZpbmllIG1haXMgcXUndW4gbm9tIGEgw6l0w6kgZG9ubsOpLCB1dGlsaXNlciBjZSBub20gZXQgdGFudGVyIGRlIHJldHJvdXZlciBsZSBza2lsbFxuICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVE9ETyA6IGF2YW50IGQnYXNzaWdlciBsZSBza2lsbCB2w6lyaWZpZXIgcXUnaWwgZXhpc3RlIHRvdWpvdXJzLlxuICAgICAgICAgICAgLy8gc2kgaWwgbidleGlzdGUgcGx1cyBpbCBmYXV0IGxlIHJldHJvdXZlciBvdSBwYXNzZXIgc2tpbGxzZXQgYSBmYWxzZS5cbiAgICAgICAgICAgIGlmIChzaGVldERhdGEuY29tYmF0U2tpbGxzW3dlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZF0pIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldCh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lID0gc2tpbGwuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4udmFsdWUgPSBza2lsbC52YWx1ZVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgd2VhcG9uLnNraWxsU2V0ID0gZmFsc2VcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5jb21iYXRTa2lsbHNbd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUgPSBza2lsbC5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LnZhbHVlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uX3Byb3BlcnRpZXMgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BlcnR5ID0ge31cbiAgICAgICAgICAgIHByb3BlcnR5LmlkID0ga2V5XG4gICAgICAgICAgICBwcm9wZXJ0eS5uYW1lID0gdmFsdWVcbiAgICAgICAgICAgIHByb3BlcnR5LnZhbHVlID0gd2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uX3Byb3BlcnRpZXMucHVzaChwcm9wZXJ0eSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzaGVldERhdGEud2VhcG9uc1t3ZWFwb24uX2lkXSA9IHdlYXBvblxuICAgICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkgc2hlZXREYXRhLnJhbmdlV3BuLnB1c2god2VhcG9uKVxuICAgICAgICAgIGVsc2Ugc2hlZXREYXRhLm1lbGVlV3BuLnB1c2god2VhcG9uKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gdGhpcy50b2tlblxuICAgICAgc2hlZXREYXRhLnRva2VuSWQgPSB0b2tlblxuICAgICAgICA/IGAke3Rva2VuLnBhcmVudD8uaWQgPyB0b2tlbi5wYXJlbnQuaWQgOiAnVE9LRU4nfS4ke3Rva2VuLmlkfWBcbiAgICAgICAgOiBudWxsIC8vIFJFRkFDVE9SSU5HICgyKVxuXG4gICAgICBzaGVldERhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhID0gZmFsc2VcbiAgICAgIGlmIChzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICAgIGZvciAoY29uc3QgY2hhcmFjdGVyaXN0aWMgb2YgT2JqZWN0LnZhbHVlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUpIGNoYXJhY3RlcmlzdGljLmVkaXRhYmxlID0gdHJ1ZVxuICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmhhcmQgPSBNYXRoLmZsb29yKGNoYXJhY3RlcmlzdGljLnZhbHVlIC8gMilcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5leHRyZW1lID0gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpYy52YWx1ZSAvIDUpXG5cbiAgICAgICAgICAvLyBJZiBubyB2YWx1ZSAmJiBubyBmb3JtdWxhIGRvbid0IGRpc3BsYXkgY2hhcmFjLlxuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUgJiYgIWNoYXJhY3RlcmlzdGljLmZvcm11bGEpIHtcbiAgICAgICAgICAgIGNoYXJhY3RlcmlzdGljLmRpc3BsYXkgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5kaXNwbGF5ID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIGlmIGFueSBjaGFyYWN0ZXJpc3RpYyBoYXMgbm8gdmFsdWUgYnV0IGhhcyBhIGZvcm11bGEuXG4gICAgICAgICAgaWYgKCFjaGFyYWN0ZXJpc3RpYy52YWx1ZSAmJiBjaGFyYWN0ZXJpc3RpYy5mb3JtdWxhKSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2hlZXREYXRhLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSA9XG4gICAgICAgICAgICBzaGVldERhdGEuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhIHx8XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGFcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZvciBjb21wYXQgd2l0aCBwcmV2aW91cyBjaGFyYWN0ZXJzIHRlc3QgaWYgYXV0byBpcyBkZWZpbmllZCwgaWYgbm90IHdlIGRlZmluZSBpdFxuICAgIGlmICghWyd2ZWhpY2xlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKHRoaXMuYWN0b3IudHlwZSkpIHtcbiAgICAgIGNvbnN0IGF1dG8gPSB0aGlzLmFjdG9yLmNoZWNrVW5kZWZpbmVkQXV0bygpXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0gPSBtZXJnZU9iamVjdChzaGVldERhdGEuZGF0YS5zeXN0ZW0sIGF1dG8pXG4gICAgfSBlbHNlIHtcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLmhwLmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAuYXV0byA9IGZhbHNlXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5zYW4uYXV0byA9IGZhbHNlXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5tb3YuYXV0byA9IGZhbHNlXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8gPSBmYWxzZVxuICAgIH1cblxuICAgIGlmIChzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA8IDApIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID0gbnVsbFxuICAgIGlmIChzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgPCAwKSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgPSBudWxsXG5cbiAgICBpZiAoIVsndmVoaWNsZSddLmluY2x1ZGVzKHRoaXMuYWN0b3IudHlwZSkpIHtcbiAgICAgIGlmIChzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5IGluc3RhbmNlb2YgQXJyYXkgJiYgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeS5sZW5ndGgpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeVswXS5pc0ZpcnN0ID0gdHJ1ZVxuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5W3NoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkubGVuZ3RoIC0gMV0uaXNMYXN0ID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zID0gZmFsc2VcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzID0gZmFsc2VcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzID0gZmFsc2VcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzID0gZmFsc2VcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnMgPSBmYWxzZVxuXG4gICAgc2hlZXREYXRhLmhhc0NvbmRpdGlvbnMgPVxuICAgICAgdGhpcy5hY3Rvci5lZmZlY3RzLnNpemUgPiAwIHx8XG4gICAgICAodHlwZW9mIHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnMgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnMpLmZpbHRlcihcbiAgICAgICAgICBjb25kaXRpb24gPT4gdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9uc1tjb25kaXRpb25dLnZhbHVlXG4gICAgICAgICkubGVuZ3RoID4gMClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIHN0YXRpYyBwYXJzZUZvcm11bGEgKGZvcm11bGEpIHtcbiAgICBsZXQgcGFyc2VkRm9ybXVsYSA9IGZvcm11bGFcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3JzaGVldCkpIHtcbiAgICAgIHBhcnNlZEZvcm11bGEgPSBwYXJzZWRGb3JtdWxhLnJlcGxhY2Uoa2V5LCB2YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZEZvcm11bGFcbiAgfVxuXG4gIGdldCB0b2tlbktleSAoKSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignREVQUkVDQVRFRCBTSE9VTEQgTk9UIEhBUFBFTiEnKVxuICAgIHRocm93IG5ldyBFcnJvcignYmFzZS5qcyBnZXQgdG9rZW5LZXkoKTogREVQUkVDQVRFRCBTSE9VTEQgTk9UIEhBUFBFTiEnKVxuICAgIC8vIGlmKCB0aGlzLnRva2VuKSByZXR1cm4gYCR7dGhpcy50b2tlbi5zY2VuZT8uX2lkP3RoaXMudG9rZW4uc2NlbmUuX2lkOidUT0tFTid9LiR7dGhpcy50b2tlbi5kYXRhLl9pZH1gOyAgLy9SRUZBQ1RPUklORyAoMilcbiAgICAvLyByZXR1cm4gdGhpcy5hY3Rvci5pZDtcbiAgfVxuXG4gIG9uQ2xvc2VTaGVldCAoKSB7XG4gICAgLy8gdGhpcy5hY3Rvci5sb2NrZWQgPSB0cnVlO1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VDb250ZXh0TWVudXMnKSkge1xuICAgICAgaWYgKCF0aGlzLm1lbnVzKSB0aGlzLm1lbnVzID0gW11cblxuICAgICAgY29uc3Qgcm9sbE1lbnUgPSB7XG4gICAgICAgIGlkOiAnc2tpbGwtcm9sbCcsXG4gICAgICAgIGNsYXNzZXM6ICdyb2xsLW1lbnUnLFxuICAgICAgICBzZWN0aW9uOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2xhc3NlczogJ21haW4nLFxuICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdyb2xsJywgbGFiZWw6ICdSb2xsJyB9LFxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ29wcG9zZWQtcm9sbCcsIGxhYmVsOiAnT3Bwb3NlZCByb2xsJyB9LFxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvbWJpbmVkLXJvbGwnLCBsYWJlbDogJ0NvbWJpbmVkIHJvbGwnIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzZXM6ICdrZWVwZXInLFxuICAgICAgICAgICAgdmlzaWJpbGl0eTogJ2dtJyxcbiAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogeyBpY29uOiAnZmFzIGZhLWxpbmsnLCB0ZXh0OiAnTGluaycgfSxcbiAgICAgICAgICAgICAgICBzdWJNZW51OiB7XG4gICAgICAgICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2xpbmstdG9vbCcsIGxhYmVsOiAnT3BlbiBpbiBsaW5rIHRvb2wnIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnc2VuZC1jaGF0JywgbGFiZWw6ICdTZW5kIHRvIGNoYXQnIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29weS10by1jbGlwYm9hcmQnLCBsYWJlbDogJ0NvcHkgdG8gY2xpcC1ib2FyZCcgfVxuICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdyZXF1ZXN0LXJvbGwnLCBsYWJlbDogJ1JlcXVlc3Qgcm9sbCcgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzYW5NZW51ID0ge1xuICAgICAgICBpZDogJ3Nhbi1yb2xsJyxcbiAgICAgICAgY2xhc3NlczogJ3JvbGwtbWVudScsXG4gICAgICAgIHNlY3Rpb246IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjbGFzc2VzOiAnbWFpbicsXG4gICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICB7IGFjdGlvbjogJ2VuY291bnRlcicsIGxhYmVsOiAnRW5jb3VudGVyJyB9LFxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ3JvbGwnLCBsYWJlbDogJ1JvbGwnIH0sXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnb3Bwb3NlZC1yb2xsJywgbGFiZWw6ICdPcHBvc2VkIHJvbGwnIH0sXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29tYmluZWQtcm9sbCcsIGxhYmVsOiAnQ29tYmluZWQgcm9sbCcgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2xhc3NlczogJ2tlZXBlcicsXG4gICAgICAgICAgICB2aXNpYmlsaXR5OiAndHJ1c3RlZCcsXG4gICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICB7IGFjdGlvbjogJ3JlcXVlc3Qtcm9sbCcsIGxhYmVsOiAnUmVxdWVzdCByb2xsJyB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHsgaWNvbjogJ2ZhcyBmYS1saW5rJywgdGV4dDogJ0xpbmsnIH0sXG4gICAgICAgICAgICAgICAgc3ViTWVudToge1xuICAgICAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdsaW5rLXRvb2wnLCBsYWJlbDogJ09wZW4gaW4gbGluayB0b29sJyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ3NlbmQtY2hhdCcsIGxhYmVsOiAnU2VuZCB0byBjaGF0JyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvcHktdG8tY2xpcGJvYXJkJywgbGFiZWw6ICdDb3B5IHRvIGNsaXAtYm9hcmQnIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay1lbmNvdW50ZXInLCBsYWJlbDogJ0VuY291bnRlcicgfVxuICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfVxuXG4gICAgICBjb25zdCByb2xsQ29udGV4dE1lbnUgPSBuZXcgQ29DN0NvbnRleHRNZW51KClcbiAgICAgIHJvbGxDb250ZXh0TWVudS5iaW5kKHJvbGxNZW51LCBodG1sLCB0aGlzLl9vbkNvbnRleHRNZW51Q2xpY2suYmluZCh0aGlzKSlcbiAgICAgIHRoaXMubWVudXMucHVzaChyb2xsQ29udGV4dE1lbnUpXG5cbiAgICAgIGNvbnN0IHNhbkNvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICBzYW5Db250ZXh0TWVudS5iaW5kKHNhbk1lbnUsIGh0bWwsIHRoaXMuX29uQ29udGV4dE1lbnVDbGljay5iaW5kKHRoaXMpKVxuICAgICAgdGhpcy5tZW51cy5wdXNoKHNhbkNvbnRleHRNZW51KVxuICAgIH0gZWxzZSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUnKVxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbC5yb2xsYWJsZScpXG4gICAgICAgIC5jb250ZXh0bWVudSh0aGlzLl9vbk9wcG9zZWRSb2xsLmJpbmQodGhpcykpXG4gICAgfVxuXG4gICAgLy8gY29udGV4dCBtZW51IGJpbmRcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgIC5jbGljayh0aGlzLl9vblJvbGxDaGFyYWN0ZXJpdGljVGVzdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUnKS5jbGljayh0aGlzLl9vblJvbGxTa2lsbFRlc3QuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5za2lsbC1pbWFnZScpLmNsaWNrKHRoaXMuX29uUm9sbFNraWxsVGVzdC5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsLnJvbGxhYmxlJylcbiAgICAgIC5jbGljayh0aGlzLl9vblJvbGxBdHRyaWJUZXN0LmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLnRva2VuLWRyYWctaGFuZGxlJylcbiAgICAgIC5vbignZHJhZ3N0YXJ0JywgdGhpcy5fb25EcmFnVG9rZW5TdGFydC5iaW5kKHRoaXMpKVxuXG4gICAgLy8gT3duZXIgT25seSBMaXN0ZW5lcnNcbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyICYmIHR5cGVvZiB0aGlzLmFjdG9yLmNvbXBlbmRpdW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0NoYXJhY3RlcmlzdGljKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwnKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0F0dHJpYnV0ZShldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuc2FuLWNoZWNrJylcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdTYW5DaGVjayhldmVudCkpXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy53ZWFwb24tbmFtZS5yb2xsYWJsZScpXG4gICAgICAgIC5jb250ZXh0bWVudSh0aGlzLl9vbk9wcG9zZWRSb2xsLmJpbmQodGhpcykpXG5cbiAgICAgIGh0bWwuZmluZCgnLmxvY2snKS5jbGljayh0aGlzLl9vbkxvY2tDbGlja2VkLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5mbGFnJykuY2xpY2sodGhpcy5fb25GbGFnQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuZm9ybXVsYScpLmNsaWNrKHRoaXMuX29uRm9ybXVsYUNsaWNrZWQuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yb2xsLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdmVyYWdlLWNoYXJhY3Rlcml0aWNzJylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuYXV0by10b2dnbGUnKS5jbGljayh0aGlzLl9vbkF1dG9Ub2dnbGUuYmluZCh0aGlzKSlcblxuICAgICAgLy8gU3RhdHVzIG1vbml0b3JcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSB8fCBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGF0dXNQbGF5ZXJFZGl0YWJsZScpKSB7XG4gICAgICAgIGh0bWwuZmluZCgnLnJlc2V0LWNvdW50ZXInKS5jbGljayh0aGlzLl9vblJlc2V0Q291bnRlci5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sXG4gICAgICAgICAgLmZpbmQoJy5jb25kaXRpb24tbW9uaXRvcicpXG4gICAgICAgICAgLmNsaWNrKHRoaXMuX29uQ29uZGl0aW9uVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWwuZmluZCgnLmlzLWR5aW5nJykuY2xpY2sodGhpcy5oZWFsLmJpbmQodGhpcykpXG4gICAgICAgIGh0bWwuZmluZCgnLmlzLWRlYWQnKS5jbGljayh0aGlzLnJldml2ZS5iaW5kKHRoaXMpKVxuICAgICAgfVxuXG4gICAgICBodG1sLmZpbmQoJy5keWluZy1jaGVjaycpLmNsaWNrKHRoaXMuY2hlY2tGb3JEZWF0aC5iaW5kKHRoaXMpKVxuXG4gICAgICBodG1sLmZpbmQoJy5pdGVtIC5pdGVtLWltYWdlJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtUm9sbChldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcud2VhcG9uLW5hbWUucm9sbGFibGUnKVxuICAgICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25XZWFwb25Sb2xsKGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5pdGVtLW5hbWUuZWZmZWN0LW5hbWUnKVxuICAgICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25FZmZlY3QoZXZlbnQpKVxuICAgICAgLy8gaHRtbFxuICAgICAgLy8gICAuZmluZCgnLml0ZW0tbmFtZS5lZmZlY3QtbmFtZScpXG4gICAgICAvLyAgIC5rZXlkb3duKChldmVudCkgPT4ge1xuICAgICAgLy8gICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XG4gICAgICAvLyAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3BvaW50ZXInKVxuICAgICAgLy8gICAgIH1cbiAgICAgIC8vICAgfSlcbiAgICAgIC8vIGh0bWxcbiAgICAgIC8vICAgLmZpbmQoJy5pdGVtLW5hbWUuZWZmZWN0LW5hbWUnKVxuICAgICAgLy8gICAua2V5ZG93bigoZXZlbnQpID0+IHtcbiAgICAgIC8vICAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSkge1xuICAgICAgLy8gICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdwb2ludGVyJylcbiAgICAgIC8vICAgICB9XG4gICAgICAvLyAgIH0pXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcud2VhcG9uLXNraWxsLnJvbGxhYmxlJylcbiAgICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uV2VhcG9uU2tpbGxSb2xsKGV2ZW50KSlcbiAgICAgIGh0bWwuZmluZCgnLnJlbG9hZC13ZWFwb24nKS5jbGljayhldmVudCA9PiB0aGlzLl9vblJlbG9hZFdlYXBvbihldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucmVsb2FkLXdlYXBvbicpXG4gICAgICAgIC5vbignY29udGV4dG1lbnUnLCBldmVudCA9PiB0aGlzLl9vblJlbG9hZFdlYXBvbihldmVudCkpXG4gICAgICBodG1sLmZpbmQoJy5hZGQtYW1tbycpLmNsaWNrKHRoaXMuX29uQWRkQW1vLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5yZWFkLW9ubHknKS5kYmxjbGljayh0aGlzLl90b2dnbGVSZWFkT25seS5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5vbignY2xpY2snLCAnLndlYXBvbi1kYW1hZ2UnLCB0aGlzLl9vbldlYXBvbkRhbWFnZS5iaW5kKHRoaXMpKVxuXG4gICAgICBodG1sLmZpbmQoJy5pbnZlbnRvcnktaGVhZGVyJykuY2xpY2sodGhpcy5fb25JbnZlbnRvcnlIZWFkZXIuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLml0ZW1zLWhlYWRlcicpLmNsaWNrKHRoaXMuX29uSXRlbUhlYWRlci5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuc2VjdGlvbi1oZWFkZXInKS5jbGljayh0aGlzLl9vblNlY3Rpb25IZWFkZXIuYmluZCh0aGlzKSlcblxuICAgICAgY29uc3Qgd2hlZWxJbnB1dHMgPSBodG1sLmZpbmQoJy5hdHRyaWJ1dGUtdmFsdWUnKVxuICAgICAgZm9yIChjb25zdCB3aGVlbElucHV0IG9mIHdoZWVsSW5wdXRzKSB7XG4gICAgICAgIHdoZWVsSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBldmVudCA9PiB0aGlzLl9vbldoZWVsKGV2ZW50KSwge1xuICAgICAgICAgIHBhc3NpdmU6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcuc2hvdy1kZXRhaWwnKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1TdW1tYXJ5KGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5pdGVtLXBvcHVwJykuY2xpY2sodGhpcy5fb25JdGVtUG9wdXAuYmluZCh0aGlzKSlcblxuICAgIC8vIFVwZGF0ZSBJbnZlbnRvcnkgSXRlbVxuICAgIGh0bWwuZmluZCgnLnNob3ctZGV0YWlsJykuZGJsY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZW5kZXJJdGVtU2hlZXQoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0tZWRpdCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uUmVuZGVySXRlbVNoZWV0KGV2ZW50KSlcblxuICAgIC8vIERlbGV0ZSBJbnZlbnRvcnkgSXRlbVxuICAgIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2soYXN5bmMgZXYgPT4ge1xuICAgICAgY29uc3QgbGkgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICAgIGNvbnN0IGl0ZW1Ub0RlbGV0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpLCB7XG4gICAgICAgIHN0cmljdDogdHJ1ZVxuICAgICAgfSlcbiAgICAgIGF3YWl0IGl0ZW1Ub0RlbGV0ZS5kZWxldGUoKVxuICAgICAgbGkuc2xpZGVVcCgyMDAsICgpID0+IHRoaXMucmVuZGVyKGZhbHNlKSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLWl0ZW0nKS5jbGljayhldiA9PiB7XG4gICAgICBldi5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgc3dpdGNoIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZSkge1xuICAgICAgICBjYXNlICdib29rJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5Qm9vayhldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5SXRlbShldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNraWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NwZWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U3BlbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnd2VhcG9uJzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge31cbiAgICAgICAgICAgIGlmIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQubWVsZWUpIHtcbiAgICAgICAgICAgICAgcHJvcGVydGllcy5tZWxlZSA9IHRydWVcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0LnJuZ2QpIHtcbiAgICAgICAgICAgICAgcHJvcGVydGllcy5ybmdkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVdlYXBvbihldiwgcHJvcGVydGllcylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgLy8gaHRtbC5maW5kKCcuY2xlYW4tc2tpbGwtbGlzdCcpLmNsaWNrKCgpID0+IHtcbiAgICAvLyAgIHRoaXMuYWN0b3IuY2xlYW5Ta2lsbHMoKVxuICAgIC8vIH0pXG5cbiAgICBodG1sLmZpbmQoJy5pdGVtLXRyYWRlJykuY2xpY2sodGhpcy5fb25UcmFkZUl0ZW0uYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1uZXctc2VjdGlvbicpLmNsaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuYWN0b3IuY3JlYXRlQmlvU2VjdGlvbigpXG4gICAgICB0aGlzLnJlbmRlcigpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1zZWN0aW9uJykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XG4gICAgICApXG4gICAgICB0aGlzLmFjdG9yLmRlbGV0ZUJpb1NlY3Rpb24oaW5kZXgpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLm1vdmUtc2VjdGlvbi11cCcpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci5tb3ZlQmlvU2VjdGlvblVwKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5tb3ZlLXNlY3Rpb24tZG93bicpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci5tb3ZlQmlvU2VjdGlvbkRvd24oaW5kZXgpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmRldmVsb3BtZW50LWZsYWcnKS5kYmxjbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgKVxuICAgICAgaXRlbS50b2dnbGVJdGVtRmxhZygnZGV2ZWxvcGVtZW50JylcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcub2NjdXBhdGlvbi1za2lsbC1mbGFnLmNsaWNrYWJsZScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICApXG4gICAgICBpdGVtLnRvZ2dsZUl0ZW1GbGFnKCdvY2N1cGF0aW9uJylcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuYXJjaGV0eXBlLXNraWxsLWZsYWcuY2xpY2thYmxlJykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIClcbiAgICAgIGl0ZW0udG9nZ2xlSXRlbUZsYWcoJ2FyY2hldHlwZScpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLnNraWxsLWRldmVsb3BlbWVudCcpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIHRoaXMuYWN0b3IuZGV2ZWxvcGVtZW50UGhhc2UoZXZlbnQuc2hpZnRLZXkpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmx1Y2stZGV2ZWxvcG1lbnQnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBpZiAoIWV2ZW50LmRldGFpbCB8fCBldmVudC5kZXRhaWwgPT09IDEpIHtcbiAgICAgICAgdGhpcy5hY3Rvci5kZXZlbG9wTHVjayhldmVudC5zaGlmdEtleSlcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuY2xlYXJfY29uZGl0aW9ucycpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9ucyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgZGlzYWJsZSA9IHt9XG4gICAgICAgIGZvciAoY29uc3QgY29uZGl0aW9uIGluIHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnMpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9uc1tjb25kaXRpb25dLnZhbHVlICE9PVxuICAgICAgICAgICAgICAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY29uZGl0aW9uc1tjb25kaXRpb25dLnZhbHVlID09PSB0cnVlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBkaXNhYmxlW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbn0udmFsdWVgXSA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhkaXNhYmxlKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci51cGRhdGUoZGlzYWJsZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgZWZmZWN0cyA9IHRoaXMuYWN0b3IuZWZmZWN0cy5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcbiAgICAgIGlmIChlZmZlY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5hY3Rvci5kZWxldGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgZWZmZWN0cylcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgQ29DN0xpbmsuYmluZEV2ZW50c0hhbmRsZXIoaHRtbClcblxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgdXNlZCBmb3IgZGV2IHB1cnBvc2VzIG9ubHkgIVxuICAgICAqL1xuICAgIGh0bWwuZmluZCgnLnRlc3QtdHJpZ2dlcicpLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHtcbiAgICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpKSByZXR1cm4gbnVsbFxuICAgICAgYXdhaXQgSXRlbS5jcmVhdGUoe1xuICAgICAgICBuYW1lOiAnX19Db0M3SW50ZXJuYWxJdGVtX18nLFxuICAgICAgICB0eXBlOiAnaXRlbSdcbiAgICAgIH0pXG4gICAgICAvLyBjb25zdCBlZmZlY3RzID0gYXdhaXQgaXRlbS5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW1xuICAgICAgLy8gICB7XG4gICAgICAvLyAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FZmZlY3ROZXcnKSxcbiAgICAgIC8vICAgICBpY29uOiAnaWNvbnMvc3ZnL2F1cmEuc3ZnJyxcbiAgICAgIC8vICAgICBvcmlnaW46IG51bGwsXG4gICAgICAvLyAgICAgJ2R1cmF0aW9uLnJvdW5kcyc6IHVuZGVmaW5lZCxcbiAgICAgIC8vICAgICBkaXNhYmxlZDogdHJ1ZVxuICAgICAgLy8gICB9XG4gICAgICAvLyBdKVxuICAgICAgLy8gY29uc3QgZWZmZWN0ID0gZWZmZWN0c1swXVxuICAgICAgLy8gYXdhaXQgZWZmZWN0LnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCAnZWZmZWN0IGNyZWF0ZWQgIScpXG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oJ2VmZmVjdCBjcmVhdGVkICEnKVxuICAgIH0pXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwU2tpbGxFbnRlci5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5jaGFyYWN0ZXJpc3RpYy1sYWJlbCcpXG4gICAgICAubW91c2VlbnRlcih0aGlzLnRvb2xUaXBDaGFyYWN0ZXJpc3RpY0VudGVyLmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbC5yb2xsYWJsZScpXG4gICAgICAubW91c2VlbnRlcih0aGlzLnRvb2xUaXBBdHRyaWJ1dGVFbnRlci5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5hdXRvLXRvZ2dsZScpXG4gICAgICAubW91c2VlbnRlcih0aGlzLnRvb2xUaXBBdXRvRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1jb250cm9sLmRldmVsb3BtZW50LWZsYWcnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwRmxhZ0ZvckRldmVsb3BtZW50LmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcblxuICAgIC8vIEFjdGl2ZSBFZmZlY3RzXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5lZmZlY3QtY29udHJvbCcpXG4gICAgICAuY2xpY2soZXYgPT4gQ29DN0FjdGl2ZUVmZmVjdC5vbk1hbmFnZUFjdGl2ZUVmZmVjdChldiwgdGhpcy5hY3RvcikpXG4gIH1cblxuICB0b29sVGlwU2tpbGxFbnRlciAoZXZlbnQpIHtcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxuICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgIGNvbnN0IHNoZWV0ID0gdGhpc1xuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpc0NvbWJhdCA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbGFzc0xpc3Q/LmNvbnRhaW5zKFxuICAgICAgICAgICAgJ2NvbWJhdCdcbiAgICAgICAgICApXG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuaXRlbScpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGl0ZW0uZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHNoZWV0LmFjdG9yLml0ZW1zLmdldChza2lsbElkKVxuICAgICAgICAgICAgbGV0IHRvb2xUaXAgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICBpc0NvbWJhdCA/ICdDb0M3LlRvb2xUaXBDb21iYXQnIDogJ0NvQzcuVG9vbFRpcFNraWxsJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNraWxsOiBza2lsbC5uYW1lLFxuICAgICAgICAgICAgICAgIHJlZ3VsYXI6IHNraWxsLnZhbHVlLFxuICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3Ioc2tpbGwudmFsdWUgLyAyKSxcbiAgICAgICAgICAgICAgICBleHRyZW1lOiBNYXRoLmZsb29yKHNraWxsLnZhbHVlIC8gNSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcENoYXJhY3RlcmlzdGljRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgY2hhciA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuY2hhci1ib3gnKVxuICAgICAgICAgIGlmICh0eXBlb2YgY2hhciAhPT0gJ3VuZGVmaW5lZCcgJiYgISFjaGFyKSB7XG4gICAgICAgICAgICBjb25zdCBjaGFySWQgPSBjaGFyLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljID0gc2hlZXQuYWN0b3IuY2hhcmFjdGVyaXN0aWNzW2NoYXJJZF1cbiAgICAgICAgICAgIGxldCB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2tpbGwnLCB7XG4gICAgICAgICAgICAgIHNraWxsOiBjaGFyYWN0ZXJpc3RpYy5sYWJlbCxcbiAgICAgICAgICAgICAgcmVndWxhcjogY2hhcmFjdGVyaXN0aWMudmFsdWUgPz8gMCxcbiAgICAgICAgICAgICAgaGFyZDogY2hhcmFjdGVyaXN0aWMuaGFyZCA/PyAwLFxuICAgICAgICAgICAgICBleHRyZW1lOiBjaGFyYWN0ZXJpc3RpYy5leHRyZW1lID8/IDBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICAgICAgdG9vbFRpcCA9XG4gICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICBvdGhlcjpcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgIHNoZWV0LmFjdG9yLmhhc1BsYXllck93bmVyXG4gICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBkZWxheSlcbiAgICB9XG4gIH1cblxuICB0b29sVGlwQXR0cmlidXRlRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgYXR0cmliID0gZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyLmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKVxuICAgICAgICAgIGlmICh0eXBlb2YgYXR0cmliICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlSWQgPSBhdHRyaWIuZGF0YXNldC5hdHRyaWJcbiAgICAgICAgICAgIGxldCB0b29sVGlwID0gJydcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBzaGVldC5hY3Rvci5zeXN0ZW0uYXR0cmlic1thdHRyaWJ1dGVJZF1cbiAgICAgICAgICAgIHN3aXRjaCAoYXR0cmlidXRlSWQpIHtcbiAgICAgICAgICAgICAgY2FzZSAnbGNrJzpcbiAgICAgICAgICAgICAgICB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICBza2lsbDogYXR0cmlidXRlcy5sYWJlbCxcbiAgICAgICAgICAgICAgICAgIHJlZ3VsYXI6IGF0dHJpYnV0ZXMudmFsdWUgPz8gMCxcbiAgICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyAyKSxcbiAgICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyA1KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlICdkYic6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29sVGlwREInKVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnc2FuJzpcbiAgICAgICAgICAgICAgICB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2FuaXR5Jywge1xuICAgICAgICAgICAgICAgICAgc2tpbGw6ICdTYW5pdHknLFxuICAgICAgICAgICAgICAgICAgcmVndWxhcjogYXR0cmlidXRlcy52YWx1ZSA/PyAwLFxuICAgICAgICAgICAgICAgICAgaGFyZDogTWF0aC5mbG9vcigoYXR0cmlidXRlcy52YWx1ZSA/PyAwKSAvIDIpLFxuICAgICAgICAgICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcigoYXR0cmlidXRlcy52YWx1ZSA/PyAwKSAvIDUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgICAgICB0b29sVGlwICtcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcEtlZXBlclNhbml0eScpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0LmFjdG9yLmhhc1BsYXllck93bmVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNoZWV0LmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAnJylcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEF1dG9FbnRlciAoZXZlbnQpIHtcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxuICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgdG9vbFRpcCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29sVGlwQXV0b1RvZ2dsZScpXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudCAoZXZlbnQpIHtcbiAgICBjb25zdCBkZWxheSA9IHBhcnNlSW50KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Rvb2xUaXBEZWxheScpKVxuICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgIGNvbnN0IHNoZWV0ID0gdGhpc1xuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyLmNsb3Nlc3QoJy5pdGVtJylcbiAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb25zdCBza2lsbElkID0gaXRlbS5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNvbnN0IHNraWxsID0gc2hlZXQuYWN0b3IuaXRlbXMuZ2V0KHNraWxsSWQpXG4gICAgICAgICAgICBjb25zdCB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwU2tpbGxGbGFnVG9nZ2xlJywge1xuICAgICAgICAgICAgICBzdGF0dXM6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3MuZGV2ZWxvcGVtZW50XG4gICAgICAgICAgICAgICAgICA/ICdDb0M3LlRvb2xUaXBTa2lsbEZsYWdnZWQnXG4gICAgICAgICAgICAgICAgICA6ICdDb0M3LlRvb2xUaXBTa2lsbFVuZmxhZ2dlZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LCBkZWxheSlcbiAgICB9XG4gIH1cblxuICBfb25Db250ZXh0TWVudUNsaWNrIChldmVudCwgdGFyZ2V0KSB7XG4gICAgY29uc3QgdGFyZ2V0VHlwZSA9IHRhcmdldC5kYXRhc2V0Py50YXJnZXRUeXBlXG4gICAgY29uc3Qgcm9sbE9wdGlvbnMgPSB7XG4gICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcbiAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgfVxuICAgIHN3aXRjaCAodGFyZ2V0VHlwZSkge1xuICAgICAgY2FzZSAoJ3NraWxsJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTFxuICAgICAgICByb2xsT3B0aW9ucy5za2lsbElkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJyk/LmRhdGFzZXQuc2tpbGxJZFxuXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnY2hhcmFjdGVyaXN0aWMnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgICAgIHJvbGxPcHRpb25zLmNoYXJhY3RlcmlzdGljID0gdGFyZ2V0LmNsb3Nlc3QoJy5jaGFyLWJveCcpLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAoJ2F0dHJpYnV0ZScpOlxuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICAgIHJvbGxPcHRpb25zLmF0dHJpYnV0ZSA9IHRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWJcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICgncm9sbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnb3Bwb3NlZC1yb2xsJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnY29tYmluZWQtcm9sbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORURcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdyZXF1ZXN0LXJvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTFxuICAgICAgICByb2xsT3B0aW9ucy5wcmV2ZW50U3RhbmRieSA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnbGluay10b29sJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLm9wZW5MaW5rVG9vbCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdzZW5kLWNoYXQnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2hhdCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdjb3B5LXRvLWNsaXBib2FyZCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5zZW5kVG9DbGlwYm9hcmQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnbGluay1lbmNvdW50ZXInKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2VuY291bnRlcicpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLXG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICAgICAgcm9sbE9wdGlvbnMuZmFzdEZvcndhcmQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIocm9sbE9wdGlvbnMpXG4gIH1cblxuICBfb25SZW5kZXJJdGVtU2hlZXQgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vblRyYWRlSXRlbSAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcbiAgICBsZXQgY29udGVudCA9ICc8cD4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VTZWxlY3RVc2VyVG9HaXZlVG8nKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICBhY3RvckZyb206IHRoaXMuYWN0b3IuaWQsXG4gICAgICBzY2VuZTogbnVsbCxcbiAgICAgIGFjdG9yVG86IHRoaXMuYWN0b3IuaWQsXG4gICAgICBpdGVtOiBpdGVtLmlkXG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuPy5hY3Rvcikge1xuICAgICAgbWVzc2FnZS5hY3RvckZyb20gPSB0aGlzLnRva2VuLmlkXG4gICAgICBtZXNzYWdlLnNjZW5lID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcbiAgICB9XG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGUgPT4ge1xuICAgICAgaWYgKCFbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnLCAnY29udGFpbmVyJ10uaW5jbHVkZXMoZS50eXBlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmFjdG9yLmlkID09PSBlLmlkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgbGV0IHZpc2libGUgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZS5vd25lcnNoaXApKSB7XG4gICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcgfHwgayA9PT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICAgICAgdmlzaWJsZSA9IHZpc2libGUgfHwgdiAhPT0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2aXNpYmxlXG4gICAgfSlcbiAgICBjb250ZW50ID0gY29udGVudCArICc8Zm9ybSBpZD1cInNlbGVjdGZvcm1cIj48c2VsZWN0IG5hbWU9XCJ1c2VyXCI+J1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XG4gICAgICBjb250ZW50ID1cbiAgICAgICAgY29udGVudCArICc8b3B0aW9uIHZhbHVlPVwiJyArIGFjdG9yLmlkICsgJ1wiPicgKyBhY3Rvci5uYW1lICsgJzwvb3B0aW9uPidcbiAgICB9XG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPC9zZWxlY3Q+PC9mb3JtPjwvcD4nXG4gICAgbWVzc2FnZS5hY3RvclRvID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlVGl0bGVTZWxlY3RVc2VyVG9HaXZlVG8nKSxcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIGNvbmZpcm06IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVmFsaWRhdGUnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0Zm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGZvcm1EYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodmFsdWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAnY29uZmlybScsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSlcbiAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICAgIGF3YWl0IGdhbWUuQ29DN3NvY2tldC5leGVjdXRlQXNHTSgnZ210cmFkZWl0ZW10bycsIG1lc3NhZ2UpXG4gIH1cblxuICBfb25EcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgc3VwZXIuX29uRHJhZ1N0YXJ0KGV2ZW50KVxuICAgIGlmICh0aGlzLnRva2VuKSB7XG4gICAgICBjb25zdCBkcmFnRGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKSlcbiAgICAgIGRyYWdEYXRhLnRva2VuVXVpZCA9IHRoaXMudG9rZW4udXVpZFxuICAgICAgZHJhZ0RhdGEudG9rZW5JZCA9IHRoaXMudG9rZW4uaWRcbiAgICAgIGRyYWdEYXRhLnNjZW5lSWQgPSB0aGlzLnRva2VuLnBhcmVudC5pZFxuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gICAgfVxuICB9XG5cbiAgX29uRHJhZ0NoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGNvbnN0IGJveCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudFxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBDb0M3VHlwZTogJ2xpbmsnLFxuICAgICAgbGlua1R5cGU6ICdjb2M3LWxpbmsnLFxuICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgIG5hbWU6IGJveC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljLFxuICAgICAgaWNvbjogbnVsbCxcbiAgICAgIGRvY3VtZW50OiB7XG4gICAgICAgIHR5cGU6IHRoaXMuZG9jdW1lbnQudHlwZSxcbiAgICAgICAgdXVpZDogdGhpcy5kb2N1bWVudC51dWlkXG4gICAgICB9XG4gICAgfVxuXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgX29uRHJhZ0F0dHJpYnV0ZSAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnY29jNy1saW5rJyxcbiAgICAgIGNoZWNrOiAnY2hlY2snLFxuICAgICAgdHlwZTogJ2F0dHJpYnV0ZScsXG4gICAgICBoYXNQbGF5ZXJPd25lcjogdGhpcy5hY3Rvci5oYXNQbGF5ZXJPd25lcixcbiAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5LFxuICAgICAgbmFtZTogYm94LmRhdGFzZXQuYXR0cmliLFxuICAgICAgaWNvbjogbnVsbCxcbiAgICAgIGRvY3VtZW50OiB7XG4gICAgICAgIHR5cGU6IHRoaXMuZG9jdW1lbnQudHlwZSxcbiAgICAgICAgdXVpZDogdGhpcy5kb2N1bWVudC51dWlkXG4gICAgICB9XG4gICAgfVxuXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgX29uRHJhZ1NhbkNoZWNrIChldmVudCkge1xuICAgIGNvbnN0IHNhbk1pbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnNhbi12YWx1ZS5wYXNzJylcbiAgICBjb25zdCBzYW5NYXggPSBldmVudC5jdXJyZW50VGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5zYW4tdmFsdWUuZmFpbGVkJylcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnY29jNy1saW5rJyxcbiAgICAgIGNoZWNrOiAnc2FubG9zcycsXG4gICAgICBoYXNQbGF5ZXJPd25lcjogdGhpcy5hY3Rvci5oYXNQbGF5ZXJPd25lcixcbiAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5LFxuICAgICAgc2FuTWluOiBzYW5NaW4uaW5uZXJUZXh0LFxuICAgICAgc2FuTWF4OiBzYW5NYXguaW5uZXJUZXh0LFxuICAgICAgaWNvbjogbnVsbCxcbiAgICAgIGRvY3VtZW50OiB7XG4gICAgICAgIHR5cGU6IHRoaXMuZG9jdW1lbnQudHlwZSxcbiAgICAgICAgdXVpZDogdGhpcy5kb2N1bWVudC51dWlkXG4gICAgICB9XG4gICAgfVxuXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGlmIChkYXRhU3RyaW5nID09PSAnJykge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ0NvQzdMaW5rJykge1xuICAgICAgaWYgKGRhdGEuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKHRoaXMuYWN0b3IsIGRhdGEpXG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHN1cGVyLl9vbkRyb3AoZXZlbnQpXG4gIH1cblxuICBhc3luYyBfb25Db25kaXRpb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY29uZGl0aW9uKSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLnRvZ2dsZUNvbmRpdGlvbihldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY29uZGl0aW9uKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJldml2ZSAoKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLmFjdG9yLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmRlYWQpXG4gIH1cblxuICBhc3luYyBoZWFsICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMuYWN0b3IudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXG4gIH1cblxuICBhc3luYyBjaGVja0ZvckRlYXRoIChldmVudCkge1xuICAgIGNvbnN0IGNvbkNoZWNrID0gbmV3IENvQzdDb25DaGVjayhcbiAgICAgIHRoaXMuYWN0b3IuaXNUb2tlbiA/IHRoaXMuYWN0b3IudG9rZW5LZXkgOiB0aGlzLmFjdG9yLmlkXG4gICAgKVxuICAgIGNvbkNoZWNrLnN0YXlBbGl2ZSA9IHRydWVcbiAgICBjb25DaGVjay50b01lc3NhZ2UoZXZlbnQuc2hpZnRLZXkpXG4gIH1cblxuICBhc3luYyBfb25EcmFnVG9rZW5TdGFydCAoZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdHlwZTogJ1Rva2VuJyxcbiAgICAgIHV1aWQ6IHRoaXMudG9rZW4udXVpZFxuICAgIH1cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBhc3luYyBfb25SZXNldENvdW50ZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGF3YWl0IHRoaXMuYWN0b3IucmVzZXREYWlseVNhbml0eSgpXG4gIH1cblxuICBhc3luYyBfb25BdXRvVG9nZ2xlIChldmVudCkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKSkge1xuICAgICAgY29uc3QgYXR0cmliID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWJcbiAgICAgIHRoaXMuYWN0b3IudG9nZ2xlQXR0cmliQXV0byhhdHRyaWIpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlIChldmVudCkge1xuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgKVxuICAgIGlmICh3ZWFwb24pIHtcbiAgICAgIHdlYXBvbi50b2dnbGVQcm9wZXJ0eShcbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5LFxuICAgICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgLy8gcm9sbCB0aGUgYWN0b3IgY2hhcmFjdGVyaXN0aWMgZnJvbSBmb3JtdWxhIHdoZW4gcG9zc2libGUuXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpdGljc1ZhbHVlICgpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSgpXG4gIH1cblxuICBhc3luYyBfb25BdmVyYWdlQ2hhcmFjdGVyaXRpY3NWYWx1ZSAoKSB7XG4gICAgdGhpcy5hY3Rvci5hdmVyYWdlQ2hhcmFjdGVyaXN0aWNzVmFsdWUoKVxuICB9XG5cbiAgYXN5bmMgX29uTG9ja0NsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGlzTG9ja2VkID0gdGhpcy5hY3Rvci5sb2NrZWRcbiAgICB0aGlzLmFjdG9yLmxvY2tlZCA9ICFpc0xvY2tlZFxuICAgIEhvb2tzLmNhbGwoJ2FjdG9yTG9ja0NsaWNrZWRDb0M3JywgWyFpc0xvY2tlZF0pXG4gIH1cblxuICBhc3luYyBfb25GbGFnQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZmxhZ05hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIHRoaXMuYWN0b3IudG9nZ2xlQWN0b3JGbGFnKGZsYWdOYW1lKVxuICB9XG5cbiAgYXN5bmMgX29uRm9ybXVsYUNsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIHRoaXMuYWN0b3IudG9nZ2xlQWN0b3JGbGFnKCdkaXNwbGF5Rm9ybXVsYScpXG4gIH1cblxuICBhc3luYyBfb25XaGVlbCAoZXZlbnQpIHtcbiAgICBsZXQgdmFsdWUgPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKSB8fCBudWxsXG4gICAgaWYgKGV2ZW50LmRlbHRhWSA+IDApIHtcbiAgICAgIHZhbHVlID0gdmFsdWUgPT09IDAgPyAwIDogdmFsdWUgLSAxXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmRlbHRhWSA8IDApIHtcbiAgICAgIHZhbHVlID0gdmFsdWUgKyAxXG4gICAgfVxuXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUpIHtcbiAgICAgIGNhc2UgJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRIcCh2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRNcCh2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3N5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0U2FuKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRMdWNrKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0SHAodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgX3RvZ2dsZVJlYWRPbmx5IChldmVudCkge1xuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucmVhZE9ubHkgPSAhZXZlbnQuY3VycmVudFRhcmdldC5yZWFkT25seVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgncmVhZC1vbmx5JylcbiAgfVxuXG4gIF9vbkl0ZW1TdW1tYXJ5IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtLWlkJykpXG4gICAgY29uc3QgY2hhdERhdGEgPSBpdGVtLmdldENoYXREYXRhKHsgc2VjcmV0czogdGhpcy5hY3Rvci5pc093bmVyIH0pXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHtcbiAgICAgICAgc3VtbWFyeS5yZW1vdmUoKVxuICAgICAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPjwvZGl2PicpXG5cbiAgICAgIGNvbnN0IGxhYmVscyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLWxhYmVsc1wiPjwvZGl2PicpXG4gICAgICBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEubGFiZWxzKSB7XG4gICAgICAgIGxhYmVscy5hcHBlbmQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLWxhYmVsXCI+PHNwYW4gY2xhc3M9XCJsYWJlbC1uYW1lXCI+JHtwLm5hbWV9IDo8L3NwYW4+PHNwYW4gY2xhc3M9XCJsYWJlbC12YWx1ZVwiPiR7cC52YWx1ZX08L3NwYW4+PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKGxhYmVscylcblxuICAgICAgZGl2LmFwcGVuZChcbiAgICAgICAgJChgPGRpdiBjbGFzcz1cIml0ZW0tZGVzY3JpcHRpb25cIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnZhbHVlfTwvZGl2PmApXG4gICAgICApXG5cbiAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGNsKSB7XG4gICAgICAgIGNvbnN0IHNwZWNpYWxEaXYgPSAkKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaXRlbS1zcGVjaWFsXCI+JHtjaGF0RGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsfTwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgICBkaXYuYXBwZW5kKHNwZWNpYWxEaXYpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykge1xuICAgICAgICBwcm9wcy5hcHBlbmQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJ0YWcgaXRlbS1wcm9wZXJ0eVwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKHApfTwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcblxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBDb0M3TGluay5iaW5kRXZlbnRzSGFuZGxlcihkaXYpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMCwgKCkgPT4gbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJykpXG4gICAgfVxuICAgIC8vICQoZXZlbnQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJyk7XG4gIH1cblxuICBhc3luYyBfb25TZWN0aW9uSGVhZGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBsZXQgc2VjdGlvbiA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnc2VjdGlvbicpLFxuICAgIC8vICBwYW5uZWxDbGFzcyA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuZGF0YSgncGFubmVsJyksXG4gICAgLy8gIHBhbm5lbCA9IHNlY3Rpb24uZmluZCggYC4ke3Bhbm5lbENsYXNzfWApO1xuICAgIC8vIHBhbm5lbC50b2dnbGUoKTtcbiAgICBjb25zdCBzZWN0aW9uID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdzZWN0aW9uJylcbiAgICBjb25zdCBwYW5uZWxDbGFzcyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wYW5uZWxcbiAgICBpZiAodHlwZW9mIHBhbm5lbENsYXNzID09PSAndW5kZWZpbmVkJykgcmV0dXJuXG4gICAgY29uc3QgcGFubmVsID0gJChzZWN0aW9uKS5maW5kKGAucGFubmVsLiR7cGFubmVsQ2xhc3N9YClcblxuICAgIC8vIHBhbm5lbC50b2dnbGUoKTtcbiAgICBpZiAocGFubmVsLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICAvLyBDb3VsZCByZW1vdmUgZXhwYW5kZWQgY2xhc3MgYW5kIHVzZSAocGFubmVsLmlzKCc6dmlzaWJsZScpKVxuICAgICAgcGFubmVsLnNsaWRlVXAoMjAwLCAoKSA9PiBwYW5uZWwudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJykpXG4gICAgfSBlbHNlIHtcbiAgICAgIHBhbm5lbC5zbGlkZURvd24oMjAwLCAoKSA9PiBwYW5uZWwudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJykpXG4gICAgfVxuXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShgZGF0YS5wYW5uZWwuJHtwYW5uZWxDbGFzc30uZXhwYW5kZWRgKVxuXG4gICAgdGhpcy5hY3Rvci51cGRhdGUoXG4gICAgICB7IFtjYW1lbEZsYWddOiAhcGFubmVsLmhhc0NsYXNzKCdleHBhbmRlZCcpIH0sXG4gICAgICB7IHJlbmRlcjogZmFsc2UgfSlcbiAgfVxuXG4gIF9vbkludmVudG9yeUhlYWRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnNpYmxpbmdzKCdsaScpXG4gICAgaWYgKGxpLmlzKCc6dmlzaWJsZScpKSBsaS5zbGlkZVVwKDIwMClcbiAgICBlbHNlIGxpLnNsaWRlRG93bigyMDApXG4gIH1cblxuICBfb25JdGVtSGVhZGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBvbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkubmV4dCgnb2wnKVxuICAgIGlmIChvbC5pcygnOnZpc2libGUnKSkgb2wuc2xpZGVVcCgyMDApXG4gICAgZWxzZSBvbC5zbGlkZURvd24oMjAwKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbVBvcHVwIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtLWlkJykpXG5cbiAgICBDb0M3QWN0b3JTaGVldC5wb3B1cFNraWxsKGl0ZW0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcG9wdXBTa2lsbCAoc2tpbGwpIHtcbiAgICBza2lsbC5zeXN0ZW0uZGVzY3JpcHRpb24uZW5yaWNoZWRWYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNraWxsLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHsgYXN5bmM6IGZhbHNlIH1cbiAgICApXG4gICAgLy8gZ2FtZS5Db0M3LmVucmljaGVyKCBza2lsbC5kYXRhLmRhdGEuZGVzY3JpcHRpb24uZW5yaWNoZWRWYWx1ZSk7XG4gICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyhcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbERldGFpbHNXaW5kb3cnKSxcbiAgICAgICAgY29udGVudDogc2tpbGwsXG4gICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdza2lsbCddLFxuICAgICAgICB3aWR0aDogNTIwLFxuICAgICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgICAgc2Nyb2xsWTogWycuaXRlbS1kZXNjcmlwdGlvbiddLFxuICAgICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9za2lsbC1kZXRhaWxzLmh0bWwnXG4gICAgICB9XG4gICAgKVxuICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcm9sbGluZyBvZiBhbiBpdGVtIGZyb20gdGhlIEFjdG9yIHNoZWV0LCBvYnRhaW5pbmcgdGhlIEl0ZW0gaW5zdGFuY2UgYW5kIGRpc3BhdGNoaW5nIHRvIGl0J3Mgcm9sbCBtZXRob2RcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9vbkl0ZW1Sb2xsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvLyBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWQ7XG4gICAgLy8gY29uc3QgYWN0b3JJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQuYWN0b3JJZDtcbiAgICAvLyBjb25zdCB0b2tlbktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQudG9rZW5JZDtcbiAgICAvLyBsZXQgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKCk7XG5cbiAgICAvLyBjaGVjay5hY3RvciA9ICF0b2tlbktleSA/IGFjdG9ySWQgOiB0b2tlbktleTtcbiAgICAvLyBjaGVjay5pdGVtID0gaXRlbUlkO1xuICAgIC8vIGNoZWNrLnJvbGwoKTtcbiAgICAvLyBjaGVjay50b01lc3NhZ2UoKTtcbiAgfVxuXG4gIGFzeW5jIF9vbkVmZmVjdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZWZmZWN0SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5lZmZlY3RJZFxuICAgIGNvbnN0IGVmZmVjdCA9IHRoaXMuYWN0b3IuZWZmZWN0cy5nZXQoZWZmZWN0SWQpXG4gICAgaWYgKGlzQ3RybEtleShldmVudCkgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUoeyB0eXBlOiAnQ29DN0xpbmsnLCBjaGVjazogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QsIG9iamVjdDogZWZmZWN0IH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uV2VhcG9uUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuaXRlbUlkXG4gICAgY29uc3QgZmFzdEZvcndhcmQgPSBldmVudC5zaGlmdEtleVxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICAvLyBjb25zdCBhY3RvcktleSA9ICF0aGlzLnRva2VuPyB0aGlzLmFjdG9yLmFjdG9yS2V5IDogYCR7dGhpcy50b2tlbi5zY2VuZT8uX2lkP3RoaXMudG9rZW4uc2NlbmUuX2lkOidUT0tFTid9LiR7dGhpcy50b2tlbi5kYXRhLl9pZH1gOyAvL1JFRkFDVE9SSU5HICgyKVxuICAgIC8qKiAqIE1PRElGIDAuOC54ICoqKi9cbiAgICBsZXQgYWN0b3JLZXlcbiAgICBpZiAoIXRoaXMudG9rZW4pIGFjdG9yS2V5ID0gdGhpcy5hY3Rvci5pZFxuICAgIC8vIFNoZWV0IHdhcyBvcGVuZWQgZnJvbSBhY3RvciBkaXJlY3RvcnlcbiAgICBlbHNlIHtcbiAgICAgIC8vIE9wZW5lZCBmcm9tIHRva2VuXG4gICAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuICYmIGdhbWUuYWN0b3JzLnRva2Vuc1t0aGlzLnRva2VuLmlkXSkge1xuICAgICAgICBhY3RvcktleSA9IGBUT0tFTi4ke3RoaXMudG9rZW4uaWR9YFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0b3JLZXkgPSBgJHt0aGlzLnRva2VuLnBhcmVudC5pZH0uJHt0aGlzLnRva2VuLmlkfWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc3QgbGlua0RhdGEgPSB7XG4gICAgICAgIGNoZWNrOiBDb0M3TGluay5DSEVDS19UWVBFLklURU0sXG4gICAgICAgIG5hbWU6IHdlYXBvbi5uYW1lXG4gICAgICB9XG4gICAgICBDb0M3Q29udGVudExpbmtEaWFsb2cuY3JlYXRlKGxpbmtEYXRhLCB7IGFjdG9yczogW3RoaXMuYWN0b3JdIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwcm9jZWVkV2l0aG91dFRhcmdldFxuICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPD0gMCkge1xuICAgICAgICBwcm9jZWVkV2l0aG91dFRhcmdldCA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICB0aXRsZTogJyAnLFxuICAgICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob1RhcmdldFNlbGVjdGVkJywge1xuICAgICAgICAgICAgICB3ZWFwb246IHdlYXBvbi5uYW1lXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgY2FuY2VsOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBwcm9jZWVkOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVmYXVsdDogJ2NhbmNlbCcsXG4gICAgICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJ11cbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3IERpYWxvZyhkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMCB8fCBwcm9jZWVkV2l0aG91dFRhcmdldCkge1xuICAgICAgICBpZiAoIXdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPiAxKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ub29NYW55VGFyZ2V0JykpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IoYWN0b3JLZXksIGl0ZW1JZCwgZmFzdEZvcndhcmQpXG4gICAgICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3UmFuZ2VJbml0aWF0b3IoYWN0b3JLZXksIGl0ZW1JZCwgZmFzdEZvcndhcmQpXG4gICAgICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25SZWxvYWRXZWFwb24gKGV2ZW50KSB7XG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgICA/IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgOiBudWxsXG4gICAgaWYgKCFpdGVtSWQpIHJldHVyblxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICBpZiAoZXZlbnQuYnV0dG9uID09PSAwKSB7XG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIGF3YWl0IHdlYXBvbi5yZWxvYWQoKVxuICAgICAgZWxzZSBhd2FpdCB3ZWFwb24uYWRkQnVsbGV0KClcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMikge1xuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSBhd2FpdCB3ZWFwb24uc2V0QnVsbGV0cygwKVxuICAgICAgZWxzZSBhd2FpdCB3ZWFwb24uc2hvb3RCdWxsZXRzKDEpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQW1vIChldmVudCkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuICAgIGlmICghaXRlbUlkKSByZXR1cm5cbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgYXdhaXQgd2VhcG9uLmFkZEJ1bGxldCgpXG4gIH1cblxuICBhc3luYyBfb25XZWFwb25Ta2lsbFJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgIGNvbnN0IGFjdG9ySWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWRcbiAgICBjb25zdCB0b2tlbktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQudG9rZW5JZFxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmICghZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoKVxuICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHVzYWdlLmdldCgnYm9udXNEaWNlJylcbiAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IHVzYWdlLmdldCgnZGlmZmljdWx0eScpXG4gICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gIXRva2VuS2V5ID8gYWN0b3JJZCA6IHRva2VuS2V5XG4gICAgY2hlY2suc2tpbGwgPSBza2lsbElkXG4gICAgY2hlY2suaXRlbSA9IGl0ZW1JZFxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG5cbiAgICAvLyBIQUNLOiBqdXN0IHRvIHBvcCB0aGUgYWR2YW5jZWQgcm9sbCB3aW5kb3dcbiAgICAvLyBjaGVjay5pdGVtLnJvbGwoKTtcbiAgfVxuXG4gIGFzeW5jIF9vbldlYXBvbkRhbWFnZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcud2VhcG9uJykuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCByYW5nZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbi1kYW1hZ2UnKS5kYXRhc2V0LnJhbmdlXG4gICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXksXG4gICAgICByYW5nZVxuICAgIH0pXG4gICAgZGFtYWdlQ2hhdENhcmQuYWN0b3JLZXkgPSB0aGlzLmFjdG9yLnRva2VuS2V5XG4gICAgZGFtYWdlQ2hhdENhcmQuaXRlbUlkID0gaXRlbUlkXG4gICAgZGFtYWdlQ2hhdENhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgIC8vIGNvbnNvbGUubG9nKCAnV2VhcG9uIGRhbWFnZSBDbGlja2VkJyk7XG4gIH1cblxuICBhc3luYyBfb25PcHBvc2VkUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliID09PSAnZGInKSByZXR1cm5cblxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcbiAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRUQsXG4gICAgICBldmVudCxcbiAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2hhcmFjdGVyaXN0aWMtbGFiZWwnKSkge1xuICAgICAgZGF0YS5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUNcbiAgICB9IGVsc2UgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtbGFiZWwnKSkge1xuICAgICAgZGF0YS5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmFsdEtleSkge1xuICAgICAgZGF0YS5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORURcbiAgICB9XG5cbiAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcihkYXRhKVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByb2xsaW5nIGEgU2tpbGwgY2hlY2tcbiAgICogQCAgcGFyYW0ge0V2ZW50fSBldmVudCAgIFRoZSBvcmlnaW5hdGluZyBjbGljayBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXN5bmMgX29uUm9sbENoYXJhY3Rlcml0aWNUZXN0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZsYWdnZWQ0ZGV2JykpIHJldHVyblxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VDb250ZXh0TWVudXMnKSkge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgICAgZmFzdEZvcndhcmQ6IHRydWUsXG4gICAgICAgIGNoYXJhY3RlcmlzdGljOiBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGFyLWJveCcpLmRhdGFzZXQuY2hhcmFjdGVyaXN0aWMsXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDLFxuICAgICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIGV2ZW50LFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Sb2xsQXR0cmliVGVzdCAoZXZlbnQpIHtcbiAgICAvLyBGTEFUTU9ESUZJRVJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYXR0cmliID0gZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuYXR0cmliXG4gICAgaWYgKGF0dHJpYiA9PT0gJ2RiJykge1xuICAgICAgaWYgKFxuICAgICAgICAhL14tezAsMX1cXGQrJC8udGVzdChcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5yb2xsRm9ybXVsYVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnJvbGxGb3JtdWxhXG4gICAgICAgIClcbiAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgaWYgKCFpc05hTihyLnRvdGFsKSAmJiAhKHIudG90YWwgPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICByLnRvTWVzc2FnZSh7XG4gICAgICAgICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb251c0RhbWFnZVJvbGwnKVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VDb250ZXh0TWVudXMnKSkge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgICAgZmFzdEZvcndhcmQ6IHRydWUsXG4gICAgICAgIGF0dHJpYnV0ZTogZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWIsXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURSxcbiAgICAgICAgY2FyZFR5cGU6XG4gICAgICAgIGV2ZW50LmFsdEtleSAmJiBhdHRyaWIgPT09ICdzYW4nXG4gICAgICAgICAgPyBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgICAgIDogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIGV2ZW50LFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJvbGxpbmcgYSBTa2lsbCBjaGVja1xuICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudCAgIFRoZSBvcmlnaW5hdGluZyBjbGljayBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX29uUm9sbFNraWxsVGVzdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmbGFnZ2VkNGRldicpKSByZXR1cm5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0cnVlLFxuICAgICAgICBza2lsbElkOiBldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWQsXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxuICAgICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIGV2ZW50LFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIC8vIF9nZXRTdWJtaXREYXRhKHVwZGF0ZURhdGE9e30pIHtcblxuICAvLyAgLy8gQ3JlYXRlIHRoZSBleHBhbmRlZCB1cGRhdGUgZGF0YSBvYmplY3RcbiAgLy8gIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7ZWRpdG9yczogdGhpcy5lZGl0b3JzfSk7XG4gIC8vICBsZXQgZGF0YSA9IGZkLnRvT2JqZWN0KCk7XG4gIC8vICBpZiAoIHVwZGF0ZURhdGEgKSBkYXRhID0gbWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSk7XG4gIC8vICBlbHNlIGRhdGEgPSBleHBhbmRPYmplY3QoZGF0YSk7XG5cbiAgLy8gIC8vIEhhbmRsZSBEYW1hZ2UgYXJyYXlcbiAgLy8gIGNvbnN0IGRhbWFnZSA9IGRhdGEuZGF0YT8uZGFtYWdlO1xuICAvLyAgaWYgKCBkYW1hZ2UgKSBkYW1hZ2UucGFydHMgPSBPYmplY3QudmFsdWVzKGRhbWFnZT8ucGFydHMgfHwge30pLm1hcChkID0+IFtkWzBdIHx8ICcnLCBkWzFdIHx8ICcnXSk7XG5cbiAgLy8gIC8vIFJldHVybiB0aGUgZmxhdHRlbmVkIHN1Ym1pc3Npb24gZGF0YVxuICAvLyAgcmV0dXJuIGZsYXR0ZW5PYmplY3QoZGF0YSk7XG4gIC8vIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kIGFzIHJlcXVpcmVkIGJ5IHRoZSBwYXJlbnQgY2xhc3Mgc3BlY1xuICAgKiBUaGlzIGRlZmluZXMgaG93IHRvIHVwZGF0ZSB0aGUgc3ViamVjdCBvZiB0aGUgZm9ybSB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ191cGRhdGVPYmplY3QnKTtcbiAgICAvLyBUT0RPOiBSZXBsYWNlIHdpdGggICBfZ2V0U3VibWl0RGF0YSh1cGRhdGVEYXRhPXt9KSBDZi4gc2hlZXQuanMoMjQzKVxuICAgIGNvbnN0IG92ZXJyaWRlcyA9IGZvdW5kcnkudXRpbHMuZmxhdHRlbk9iamVjdCh0aGlzLmFjdG9yLm92ZXJyaWRlcylcbiAgICBjb25zdCBuYW1lID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/Lm5hbWVcbiAgICBpZiAobmFtZSAmJiBvdmVycmlkZXMgJiYgb3ZlcnJpZGVzW25hbWVdKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRWZmZWN0QXBwbGllZENhbnRPdmVycmlkZScsIHsgbmFtZSB9KVxuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QpIHtcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdza2lsbC1hZGp1c3RtZW50JykpIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICA/IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgIDogbnVsbFxuXG4gICAgICAgICAgICBpZiAoIWV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpIHtcbiAgICAgICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUoe1xuICAgICAgICAgICAgICAgIFtldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWVdOiBudWxsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgIFtldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWVdOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5jcmVkaXQtcmF0aW5nJykgPT09IGl0ZW0ubmFtZSAmJiB0eXBlb2YgdGhpcy5hY3Rvci5vY2N1cGF0aW9uPy5zeXN0ZW0/LmNyZWRpdFJhdGluZz8ubWF4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBjb25zdCBjcmVkaXRWYWx1ZSA9XG4gICAgICAgICAgICAgICAgKGl0ZW0udmFsdWUgfHwgMCkgLVxuICAgICAgICAgICAgICAgIChpdGVtLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZSB8fCAwKVxuICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgY3JlZGl0VmFsdWUgPlxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1heCkgfHxcbiAgICAgICAgICAgICAgICBjcmVkaXRWYWx1ZSA8XG4gICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5hY3Rvci5vY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmcubWluKVxuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyZWRpdE91dE9mUmFuZ2UnLCB7XG4gICAgICAgICAgICAgICAgICAgIG1pbjogTnVtYmVyKFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1pblxuICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICBtYXg6IE51bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5tYXhcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2F0dHJpYnV0ZS12YWx1ZScpKSB7XG4gICAgICAgICAgLy8gVE9ETyA6IGNoZWNrIHdoeSBTQU4gb25seSA/XG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gJ3N5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZScpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0U2FuKFxuICAgICAgICAgICAgICBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lID09PSAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEhwKFxuICAgICAgICAgICAgICBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGV4dC1hcmVhJykpIHtcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZVRleHRBcmVhKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Jpby1zZWN0aW9uLXZhbHVlJykpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XG4gICAgICAgICAgKVxuICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlQmlvVmFsdWUoaW5kZXgsIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Jpby1zZWN0aW9uLXRpdGxlJykpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYmlvLXNlY3Rpb24nKS5kYXRhc2V0LmluZGV4XG4gICAgICAgICAgKVxuICAgICAgICAgIHRoaXMuYWN0b3IudXBkYXRlQmlvVGl0bGUoaW5kZXgsIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ25wYy1za2lsbC1zY29yZScpKSB7XG4gICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHNraWxsKSB7XG4gICAgICAgICAgICBhd2FpdCBza2lsbC51cGRhdGVWYWx1ZShldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2tpbGwtbmFtZScpIHx8XG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2l0ZW0tbmFtZScpXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7fVxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSxcbiAgICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGRhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgICAgZGF0YVsnc3lzdGVtLnNraWxsTmFtZSddID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICAgIGRhdGFbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgZGF0YS5uYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUoZGF0YSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXJhY3RlcmlzdGljLWZvcm11bGEnKSkge1xuICAgICAgICAgIC8vIHRlc3RlciBzaSBjJ2VzdCB2aWRlXG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAvLyBPbiB0ZXN0ZSBzaSBjJ2VzdCB1bmUgZm9ybXVsZSB2YWxpZGUgIVxuICAgICAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgaWYgKGlzTmFOKHIudG90YWwpIHx8IHR5cGVvZiByLnRvdGFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBmb3JtRGF0YVtldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWVdID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAnQ29DNy5FcnJvckludmFsaWQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2F0dHJpYnV0ZS12YWx1ZScpKSB7XG4gICAgICAgICAgLy8gdGVzdGVyIHNpIGxlIGRiIHJldG91cm7DqSBlc3QgdmFsaWRlLlxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwICYmXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKS5kYXRhc2V0LmF0dHJpYiA9PT0gJ2RiJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgLy8gT24gdGVzdGUgc2kgYydlc3QgdW5lIGZvcm11bGUgdmFsaWRlICFcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgIGlmIChpc05hTihyLnRvdGFsKSB8fCByLnRvdGFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9ybURhdGFbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcuRXJyb3JJbnZhbGlkJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGUgc2tpbGwgYXNzb2Npw6kgYSBsJ2FybWUgYSBjaGFuZ8OpXG4gICAgICAgIC8vIFRPRE8gOiBGYWN0b3Jpc2F0aW9uIGR1IHN3aXRjaFxuICAgICAgICAvLyBUT0RPIDogcmVtcGxhY2VyIGxlcyBzdHJpbmdzIHBhciBkZSBjb25zdGFudGVzIChpdGVtLnNraWxsLm1haW4gLi4uKVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3dlYXBvbi1za2lsbCcpKSB7XG4gICAgICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICApXG4gICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQub3B0aW9uc1tldmVudC5jdXJyZW50VGFyZ2V0LnNlbGVjdGVkSW5kZXhdLnZhbHVlXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24gJiYgc2tpbGwpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ21haW4nOlxuICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLmlkJzogc2tpbGwuaWQsXG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4ubmFtZSc6IHNraWxsLm5hbWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgJ2FsdGVybmF0aXYnOlxuICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkJzogc2tpbGwuaWQsXG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSc6IHNraWxsLm5hbWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTGUgbm9tIGRlIGwnYXJtZSBhIGNoYW5nw6lcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3ZWFwb24tbmFtZScpKSB7XG4gICAgICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHdlYXBvbikge1xuICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7IG5hbWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBsZXMgZGVnYXRzIGRlIGwnYXJtZSBvbiBjaGFuZ8Opcy5cbiAgICAgICAgLy8gVE9ETyA6IEZhY3RvcmlzYXRpb24gZHUgc3dpdGNoXG4gICAgICAgIC8vIFRPRE8gOiByZW1wbGFjZXIgbGVzIHN0cmluZ3MgcGFyIGRlIGNvbnN0YW50ZXMgKGl0ZW0ucmFuZ2Uubm9ybWFsIC4uLilcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkYW1hZ2UtZm9ybXVsYScpKSB7XG4gICAgICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHdlYXBvbikge1xuICAgICAgICAgICAgLy8gdGVzdGUgbGEgdmFsaWRpdMOpIGRlIGxhIGZvcm11bGUuXG4gICAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgIGlmIChpc05hTihyLnRvdGFsKSB8fCB0eXBlb2Ygci50b3RhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvclVuYWJsZVRvUGFyc2VGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ25vcm1hbCc6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2xvbmcnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmxvbmcuZGFtYWdlJzogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgY2FzZSAnZXh0cmVtZSc6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UuZXh0cmVtZS5kYW1hZ2UnOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5yYW5nZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ25vcm1hbCc6XG4gICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlJzogbnVsbFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnbG9uZyc6XG4gICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UuZXh0cmVtZS5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5vYmplY3QudXBkYXRlKGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4uLy4uL2NvbnRleHQtbWVudS5qcydcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3TlBDU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgQWN0b3Igc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgLy8gVE9ETyA6IGRvIHdlIG5lZWQgdGhhdCA/XG4gICAgc2hlZXREYXRhLmFsbG93Rm9ybXVsYSA9IHRydWVcbiAgICBzaGVldERhdGEuZGlzcGxheUZvcm11bGEgPSAodGhpcy5hY3Rvci5nZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJykgfHwgZmFsc2UpXG5cbiAgICBzaGVldERhdGEuaGFzU2FuID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlICE9PSBudWxsXG4gICAgc2hlZXREYXRhLmhhc01wID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgIT09IG51bGxcbiAgICBzaGVldERhdGEuaGFzTHVjayA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSAhPT0gbnVsbFxuXG4gICAgc2hlZXREYXRhLmlzQ3JlYXR1cmUgPSBmYWxzZVxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3RhdHVzJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID0gZmFsc2VcbiAgICBzaGVldERhdGEuaGFzSW52ZW50b3J5ID1cbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkucGVyc29uYWxEZXNjcmlwdGlvbj8udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VDb250ZXh0TWVudXMnKSkge1xuICAgICAgaWYgKCF0aGlzLm1lbnVzKSB0aGlzLm1lbnVzID0gW11cblxuICAgICAgY29uc3Qgc2FubG9zc01lbnUgPSB7XG4gICAgICAgIGlkOiAnc2FuLWxvc3Mtcm9sbCcsXG4gICAgICAgIGNsYXNzZXM6ICdyb2xsLW1lbnUnLFxuICAgICAgICBzZWN0aW9uOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2xhc3NlczogJ21haW4nLFxuICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdsaW5rLXRvb2wnLCBsYWJlbDogJ09wZW4gaW4gbGluayB0b29sJyB9LFxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ3NlbmQtY2hhdCcsIGxhYmVsOiAnU2VuZCB0byBjaGF0JyB9LFxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvcHktdG8tY2xpcGJvYXJkJywgbGFiZWw6ICdDb3B5IHRvIGNsaXAtYm9hcmQnIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG5cbiAgICAgICAgXVxuICAgICAgfVxuXG4gICAgICBjb25zdCBzYW5sb3NzQ29udGV4dE1lbnUgPSBuZXcgQ29DN0NvbnRleHRNZW51KClcbiAgICAgIHNhbmxvc3NDb250ZXh0TWVudS5iaW5kKHNhbmxvc3NNZW51LCBodG1sLCB0aGlzLl9vblNhbkxvc3NDb250ZXh0TWVudUNsaWNrLmJpbmQodGhpcykpXG4gICAgICB0aGlzLm1lbnVzLnB1c2goc2FubG9zc0NvbnRleHRNZW51KVxuICAgIH1cblxuICAgIGh0bWwuZmluZCgnLnJvbGwtc2FuJykuY2xpY2sodGhpcy5fb25TYW5DaGVjay5iaW5kKHRoaXMpKVxuICAgIC8vIGlmICh0aGlzLmFjdG9yLmlzT3duZXIpIHtcbiAgICAvLyAgIGh0bWxcbiAgICAvLyAgICAgLmZpbmQoJ1tuYW1lPVwiZGF0YS5hdHRyaWJzLmhwLnZhbHVlXCJdJylcbiAgICAvLyAgICAgLmNoYW5nZShldmVudCA9PiB0aGlzLmFjdG9yLnNldEhlYWx0aFN0YXR1c01hbnVhbGx5KGV2ZW50KSlcbiAgICAvLyB9XG4gIH1cblxuICBhc3luYyBfb25TYW5Mb3NzQ29udGV4dE1lbnVDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCByb2xsT3B0aW9ucyA9IHtcbiAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUixcbiAgICAgIHByZXZlbnRTdGFuZGJ5OiB0cnVlLFxuICAgICAgZmFzdEZvcndhcmQ6IGZhbHNlLFxuICAgICAgZXZlbnQsXG4gICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0ssXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH1cblxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAoJ2xpbmstdG9vbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIgPSB0cnVlXG4gICAgICAgIHJvbGxPcHRpb25zLm9wZW5MaW5rVG9vbCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdzZW5kLWNoYXQnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID0gdHJ1ZVxuICAgICAgICByb2xsT3B0aW9ucy5zZW5kVG9DaGF0ID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2NvcHktdG8tY2xpcGJvYXJkJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIocm9sbE9wdGlvbnMpXG4gIH1cblxuICBhc3luYyBfb25TYW5DaGVjayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKFxuICAgICAgIXRoaXMuYWN0b3Iuc3lzdGVtLnNwZWNpYWwuc2FuTG9zcy5jaGVja1Bhc3NlZCAmJlxuICAgICAgIXRoaXMuYWN0b3Iuc3lzdGVtLnNwZWNpYWwuc2FuTG9zcy5jaGVja0ZhaWxsZWRcbiAgICApIHtcbiAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnTm8gc2FuaXR5IGxvc3MgdmFsdWUnKTtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpICYmXG4gICAgICBnYW1lLnVzZXIuaXNHTVxuICAgICkge1xuICAgICAgbGV0IGRpZmZpY3VsdHksIG1vZGlmaWVyXG4gICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgIGRpc2FibGVGbGF0RGljZU1vZGlmaWVyOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIG1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgbGlua0RhdGEgPSB7XG4gICAgICAgIGNoZWNrOiAnc2FubG9zcycsXG4gICAgICAgIHNhbk1pbjogdGhpcy5hY3Rvci5zeXN0ZW0uc3BlY2lhbC5zYW5Mb3NzLmNoZWNrUGFzc2VkLFxuICAgICAgICBzYW5NYXg6IHRoaXMuYWN0b3Iuc3lzdGVtLnNwZWNpYWwuc2FuTG9zcy5jaGVja0ZhaWxsZWQsXG4gICAgICAgIHNhblJlYXNvbjogdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZT8ubGVuZ3RoXG4gICAgICAgICAgPyB0aGlzLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlXG4gICAgICAgICAgOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgIHRva2VuS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5XG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSA9PT0gJ2JsaW5kcm9sbCcpIHtcbiAgICAgICAgbGlua0RhdGEuYmxpbmQgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIG1vZGlmaWVyICE9PSAndW5kZWZpbmVkJykgbGlua0RhdGEubW9kaWZpZXIgPSBtb2RpZmllclxuICAgICAgaWYgKHR5cGVvZiBkaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykgbGlua0RhdGEuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICAgIGNvbnN0IGxpbmsgPSAobmV3IENvQzdMaW5rKCkpLl9jcmVhdGVEb2N1bWVudExpbmsobGlua0RhdGEpXG4gICAgICBpZiAobGluaykge1xuICAgICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UoXG4gICAgICAgICAgbnVsbCxcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VDaGVja1JlcXVlc3RlZFdhaXQnLCB7XG4gICAgICAgICAgICBjaGVjazogbGlua1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2FuRGF0YSA9IHtcbiAgICAgICAgc2FuTWF4OiB0aGlzLmFjdG9yLnNhbkxvc3NDaGVja0ZhaWxsZWQsXG4gICAgICAgIHNhbk1pbjogdGhpcy5hY3Rvci5zYW5Mb3NzQ2hlY2tQYXNzZWQsXG4gICAgICAgIHNhblJlYXNvbjogdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZT8ubGVuZ3RoXG4gICAgICAgICAgPyB0aGlzLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlXG4gICAgICAgICAgOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgIHRva2VuS2V5OiB0aGlzLmFjdG9yLmFjdG9yS2V5XG4gICAgICB9XG4gICAgICBTYW5DaGVja0NhcmQuY2hlY2tUYXJnZXRzKHNhbkRhdGEsIGV2ZW50LnNoaWZ0S2V5KVxuICAgIH1cbiAgfVxuXG4gIG9uQ2xvc2VTaGVldCAoKSB7XG4gICAgdGhpcy5hY3Rvci51bnNldEFjdG9yRmxhZygnZGlzcGxheUZvcm11bGEnKVxuICAgIHN1cGVyLm9uQ2xvc2VTaGVldCgpXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnbnBjJ10sXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL25wYy1zaGVldC5odG1sJyxcbiAgICAgIHdpZHRoOiA1ODAsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgbWluaW1pemFibGU6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QpIHtcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1zY29yZScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci5zZXRDaGFyYWN0ZXJpc3RpYyhcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSxcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgc3RhdGljIGZvcmNlQXV0byAoYXBwLCBodG1sKSB7XG4gICAgaHRtbC5oZWlnaHQoJ2F1dG8nKVxuICB9XG5cbiAgc2V0UG9zaXRpb24gKGEpIHtcbiAgICBzdXBlci5zZXRQb3NpdGlvbihhKVxuICAgIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYSwgdGhpcy5fZWxlbWVudClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIG1lcmdlT2JqZWN0ICovXG5pbXBvcnQgeyBDb0M3TlBDU2hlZXQgfSBmcm9tICcuL25wYy1zaGVldC5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEFjdG9yU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdDcmVhdHVyZVNoZWV0IGV4dGVuZHMgQ29DN05QQ1NoZWV0IHtcbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBBY3RvciBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG4gICAgc2hlZXREYXRhLmlzQ3JlYXR1cmUgPSB0cnVlXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnbnBjJywgJ2NyZWF0dXJlJ11cbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRm9ybUFwcGxpY2F0aW9uLCBnYW1lLCBtZXJnZU9iamVjdCAqL1xuZXhwb3J0IGNsYXNzIENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNyddLFxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHlMb3NzVHlwZURpYWxvZ1RpdGxlJyksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9zYW5pdHktbG9zcy10eXBlLmhicycsXG4gICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG4gICAgZGF0YS5pc0ltbXVuaXR5ID0gZGF0YS5vYmplY3QudHlwZSA9PT0gJ2ltbXVuaXR5J1xuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIGh0bWwuZmluZCgnLmZpZWxkX3R5cGUnKS5jaGFuZ2UodGhpcy5fb25TZWxlY3RDaGFuZ2UuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kaWFsb2ctYnV0dG9uJykuY2xpY2sodGhpcy5fb25CdXR0b25DbGljay5iaW5kKHRoaXMpKVxuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gIH1cblxuICBfb25CdXR0b25DbGljayAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmJ1dHRvbiA9PT0gJ2FkZCcpIHtcbiAgICAgIGNvbnN0IGh0bWwgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy53aW5kb3ctY29udGVudCcpXG4gICAgICBjb25zdCB0eXBlID0gaHRtbC5maW5kKCcuZmllbGRfdHlwZScpLnZhbCgpXG4gICAgICBjb25zdCBuYW1lID0gaHRtbC5maW5kKCcuZmllbGRfbmFtZScpLnZhbCgpXG4gICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KGh0bWwuZmluZCgnLmZpZWxkX3ZhbHVlJykudmFsKCkpXG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID1cbiAgICAgICAgdGhpcy5vYmplY3QuYWN0b3Iuc3lzdGVtLnNhbml0eUxvc3NFdmVudHMgPz8gW11cbiAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaCh7XG4gICAgICAgIHR5cGU6IG5hbWUsXG4gICAgICAgIHRvdGFsTG9zczogdmFsdWUsXG4gICAgICAgIGltbXVuaXR5OiB0eXBlID09PSAnaW1tdW5pdHknXG4gICAgICB9KVxuICAgICAgc2FuaXR5TG9zc0V2ZW50cy5zb3J0KGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xuICAgICAgICByZXR1cm4gbGVmdC50eXBlLmxvY2FsZUNvbXBhcmUocmlnaHQudHlwZSlcbiAgICAgIH0pXG4gICAgICB0aGlzLm9iamVjdC5hY3Rvci51cGRhdGUoeyAnZGF0YS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50cyB9KVxuICAgIH1cbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIF9vblNlbGVjdENoYW5nZSAoZXZlbnQpIHtcbiAgICBjb25zdCBodG1sID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcud2luZG93LWNvbnRlbnQnKVxuICAgIHRoaXMub2JqZWN0Lm5hbWUgPSBodG1sLmZpbmQoJy5maWVsZF9uYW1lJykudmFsKClcbiAgICB0aGlzLm9iamVjdC50eXBlID0gaHRtbC5maW5kKCcuZmllbGRfdHlwZScpLnZhbCgpXG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge31cbn1cbiIsIi8qIGdsb2JhbCAkLCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgRm9udEZhY2UsIGdhbWUsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JTaGVldCB9IGZyb20gJy4vYmFzZS5qcydcbmltcG9ydCB7IENvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIgfSBmcm9tICcuLi8uLi9hcHBzL2NyZWF0ZS1teXRob3MtZW5jb3VudGVycy5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFyYWN0ZXJTaGVldCBleHRlbmRzIENvQzdBY3RvclNoZWV0IHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdDb0M3Q2hhcmFjdGVyU2hlZXQnKSB7XG4gICAgICBpZiAoIXRoaXMuc3VtbWFyaXplZCkgdGhpcy5zdW1tYXJpemVkID0gZmFsc2VcbiAgICAgIGxldCBidXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgICAgYnV0dG9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiB0aGlzLnN1bW1hcml6ZWRcbiAgICAgICAgICAgID8gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1heGltaXplJylcbiAgICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlN1bW1hcml6ZScpLFxuICAgICAgICAgIGNsYXNzOiAndGVzdC1leHRyYS1pY29uJyxcbiAgICAgICAgICBpY29uOiB0aGlzLnN1bW1hcml6ZWRcbiAgICAgICAgICAgID8gJ2ZhcyBmYS13aW5kb3ctbWF4aW1pemUnXG4gICAgICAgICAgICA6ICdmYXMgZmEtd2luZG93LW1pbmltaXplJyxcbiAgICAgICAgICBvbmNsaWNrOiBldmVudCA9PiB0aGlzLnRvZ2dsZVNoZWV0TW9kZShldmVudClcbiAgICAgICAgfS8qICxcbiAgICAgICAge1xuICAgICAgICAgIGxhYmVsOiAnJyxcbiAgICAgICAgICBjbGFzczogJ2RyYWctdGVzdC10aGluZ3knLFxuICAgICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLWQxMCcsXG4gICAgICAgICAgb25kcmFnc3RhcnQ6ICgpID0+IHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnZHJhZyBzdGFydGVkJylcbiAgICAgICAgfSAqL1xuICAgICAgXS5jb25jYXQoYnV0dG9ucylcbiAgICAgIHJldHVybiBidXR0b25zXG4gICAgfVxuICAgIHJldHVybiBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gIH1cblxuICBhc3luYyB0b2dnbGVTaGVldE1vZGUgKGV2ZW50KSB7XG4gICAgdGhpcy5zdW1tYXJpemVkID0gIXRoaXMuc3VtbWFyaXplZFxuICAgIGF3YWl0IHRoaXMuY2xvc2UoKVxuICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnN1bW1hcml6ZWRcbiAgICAgID8ge1xuICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdhY3RvcicsICdjaGFyYWN0ZXInLCAnc3VtbWFyaXplZCddLFxuICAgICAgICAgIGhlaWdodDogMjAwLFxuICAgICAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICAgICAgd2lkdGg6IDcwMFxuICAgICAgICB9XG4gICAgICA6IENvQzdDaGFyYWN0ZXJTaGVldC5kZWZhdWx0T3B0aW9uc1xuICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUsIG9wdGlvbnMpXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBpZiAoXG4gICAgICB0aGlzLmlzRWRpdGFibGUgJiZcbiAgICAgIHR5cGVvZiB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScpID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnLCBmYWxzZSlcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5pc0VkaXRhYmxlICYmXG4gICAgICB0eXBlb2YgdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJykgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnc2tpbGxTaG93VW5jb21tb24nLCB0cnVlKVxuICAgIH1cbiAgICBzaGVldERhdGEuc2tpbGxMaXN0TW9kZVZhbHVlID1cbiAgICAgIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJykgPz8gZmFsc2VcbiAgICBzaGVldERhdGEuc2tpbGxTaG93VW5jb21tb24gPVxuICAgICAgdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJykgPz8gdHJ1ZVxuICAgIHNoZWV0RGF0YS5zaG93SWNvbnNPbmx5ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2hvd0ljb25zT25seScpXG5cbiAgICBpZiAodGhpcy5hY3Rvci5vY2N1cGF0aW9uKSB7XG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3Mub2NjdXBhdGlvbiA9IHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5uYW1lXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3Mub2NjdXBhdGlvblNldCA9IHRydWVcbiAgICB9IGVsc2Ugc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLm9jY3VwYXRpb25TZXQgPSBmYWxzZVxuXG4gICAgaWYgKHRoaXMuYWN0b3IuYXJjaGV0eXBlKSB7XG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MuYXJjaGV0eXBlID0gdGhpcy5hY3Rvci5hcmNoZXR5cGUubmFtZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLmFyY2hldHlwZVNldCA9IHRydWVcbiAgICB9IGVsc2Ugc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLmFyY2hldHlwZVNldCA9IGZhbHNlXG5cbiAgICBzaGVldERhdGEudG90YWxFeHBlcmllbmNlID0gdGhpcy5hY3Rvci5leHBlcmllbmNlUG9pbnRzXG4gICAgc2hlZXREYXRhLnRvdGFsT2NjdXBhdGlvbiA9IHRoaXMuYWN0b3Iub2NjdXBhdGlvblBvaW50c1NwZW50XG4gICAgc2hlZXREYXRhLmludmFsaWRPY2N1cGF0aW9uUG9pbnRzID1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLm9jY3VwYXRpb25Qb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5zeXN0ZW0uZGV2ZWxvcG1lbnQ/Lm9jY3VwYXRpb24pXG4gICAgc2hlZXREYXRhLnRvdGFsQXJjaGV0eXBlID0gdGhpcy5hY3Rvci5hcmNoZXR5cGVQb2ludHNTcGVudFxuICAgIHNoZWV0RGF0YS5pbnZhbGlkQXJjaGV0eXBlUG9pbnRzID1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLmFyY2hldHlwZVBvaW50c1NwZW50KSAhPT1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLnN5c3RlbS5kZXZlbG9wbWVudD8uYXJjaGV0eXBlKVxuICAgIHNoZWV0RGF0YS50b3RhbFBlcnNvbmFsID0gdGhpcy5hY3Rvci5wZXJzb25hbFBvaW50c1NwZW50XG4gICAgc2hlZXREYXRhLmludmFsaWRQZXJzb25hbFBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5wZXJzb25hbFBvaW50c1NwZW50KSAhPT1cbiAgICAgIE51bWJlcih0aGlzLmFjdG9yLnN5c3RlbS5kZXZlbG9wbWVudD8ucGVyc29uYWwpXG4gICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ01heCA9IE51bWJlcihcbiAgICAgIHRoaXMuYWN0b3Iub2NjdXBhdGlvbj8uc3lzdGVtLmNyZWRpdFJhdGluZy5tYXhcbiAgICApXG4gICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ01pbiA9IE51bWJlcihcbiAgICAgIHRoaXMuYWN0b3Iub2NjdXBhdGlvbj8uc3lzdGVtLmNyZWRpdFJhdGluZy5taW5cbiAgICApXG4gICAgc2hlZXREYXRhLmludmFsaWRDcmVkaXRSYXRpbmcgPVxuICAgICAgdGhpcy5hY3Rvci5jcmVkaXRSYXRpbmdTa2lsbD8uc3lzdGVtLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uID5cbiAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNYXggfHxcbiAgICAgIHRoaXMuYWN0b3IuY3JlZGl0UmF0aW5nU2tpbGw/LnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbiA8XG4gICAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nTWluXG4gICAgc2hlZXREYXRhLnB1bHBUYWxlbnRDb3VudCA9IHNoZWV0RGF0YS5pdGVtc0J5VHlwZS50YWxlbnQ/Lmxlbmd0aFxuICAgICAgPyBzaGVldERhdGEuaXRlbXNCeVR5cGUudGFsZW50Py5sZW5ndGhcbiAgICAgIDogMFxuICAgIHNoZWV0RGF0YS5taW5QdWxwVGFsZW50cyA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlPy5zeXN0ZW0udGFsZW50c1xuICAgICAgPyB0aGlzLmFjdG9yLmFyY2hldHlwZT8uc3lzdGVtLnRhbGVudHNcbiAgICAgIDogMFxuICAgIHNoZWV0RGF0YS5pbnZhbGlkUHVscFRhbGVudHMgPSBzaGVldERhdGEucHVscFRhbGVudENvdW50IDwgc2hlZXREYXRhLm1pblB1bHBUYWxlbnRzXG5cbiAgICBzaGVldERhdGEuaGFzRGV2ZWxvcG1lbnRQaGFzZSA9IHRoaXMuYWN0b3IuaGFzRGV2ZWxvcG1lbnRQaGFzZVxuXG4gICAgc2hlZXREYXRhLmFsbG93RGV2ZWxvcG1lbnQgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKVxuICAgIHNoZWV0RGF0YS5hbGxvd0NoYXJDcmVhdGlvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgIHNoZWV0RGF0YS5kZXZlbG9wbWVudFJvbGxGb3JMdWNrID0gZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAnQ29DNycsXG4gICAgICAnZGV2ZWxvcG1lbnRSb2xsRm9yTHVjaydcbiAgICApXG4gICAgc2hlZXREYXRhLnNob3dEZXZQYW5uZWwgPSBzaGVldERhdGEuYWxsb3dEZXZlbG9wbWVudCB8fCBzaGVldERhdGEuYWxsb3dDaGFyQ3JlYXRpb25cblxuICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlGb3JtYXRzID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBDT0M3Lm1vbmV0YXJ5Rm9ybWF0cykge1xuICAgICAgc2hlZXREYXRhLl9tb25ldGFyeUZvcm1hdHMucHVzaCh7IGtleSwgdmFsOiBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5tb25ldGFyeUZvcm1hdHNba2V5XSkgfSlcbiAgICB9XG5cbiAgICBzaGVldERhdGEuc2hvd0N1cnJlbmN5U3ltYm9sID0gWydkZWNpbWFsTGVmdCcsICdkZWNpbWFsUmlnaHQnLCAnaW50ZWdlckxlZnQnLCAnaW50ZWdlclJpZ2h0J10uaW5jbHVkZXMoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdClcblxuICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlUeXBlcyA9IFtdXG4gICAgZm9yIChjb25zdCBrZXkgaW4gQ09DNy5tb25ldGFyeVR5cGVzKSB7XG4gICAgICBpZiAoQ09DNy5tb25ldGFyeVR5cGVzW2tleV0uZmlsdGVyLmxlbmd0aCA9PT0gMCB8fCBDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5maWx0ZXIuaW5jbHVkZXMoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCkpIHtcbiAgICAgICAgc2hlZXREYXRhLl9tb25ldGFyeVR5cGVzLnB1c2goeyBrZXksIHZhbDogZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubW9uZXRhcnlUeXBlc1trZXldLm5hbWUpIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLm1hbnVhbENyZWRpdCA9IHRoaXMuYWN0b3IuZ2V0QWN0b3JGbGFnKCdtYW51YWxDcmVkaXQnKVxuICAgIGlmICghc2hlZXREYXRhLm1hbnVhbENyZWRpdCkge1xuICAgICAgc2hlZXREYXRhLm1vbmV0YXJ5ID0ge1xuICAgICAgICBzcGVuZGluZ0xldmVsOiBDb0NBY3Rvci5tb25ldGFyeUZvcm1hdChzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCBzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuc3ltYm9sLCB0aGlzLmFjdG9yLnNwZW5kaW5nTGV2ZWwpLFxuICAgICAgICBhc3NldHM6IENvQ0FjdG9yLm1vbmV0YXJ5Rm9ybWF0KHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5zeW1ib2wsIHRoaXMuYWN0b3IuYXNzZXRzKSxcbiAgICAgICAgY2FzaDogQ29DQWN0b3IubW9uZXRhcnlGb3JtYXQoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCwgdGhpcy5hY3Rvci5jYXNoKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5vbmVCbG9ja0JhY2tTdG9yeSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5JylcblxuICAgIHNoZWV0RGF0YS5zdW1tYXJpemVkID0gdGhpcy5zdW1tYXJpemVkICYmICFzaGVldERhdGEucGVybWlzc2lvbkxpbWl0ZWRcbiAgICBzaGVldERhdGEuc2tpbGxMaXN0ID0gW11cbiAgICBsZXQgcHJldmlvdXNTcGVjID0gJydcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHNoZWV0RGF0YS5za2lsbHMpIHtcbiAgICAgIGlmIChzaGVldERhdGEuc2tpbGxTaG93VW5jb21tb24gfHwgIXNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLnJhcml0eSkge1xuICAgICAgICBpZiAoc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgICAgIGlmIChwcmV2aW91c1NwZWMgIT09IHNraWxsLnN5c3RlbS5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICAgICAgcHJldmlvdXNTcGVjID0gc2tpbGwuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxMaXN0LnB1c2goe1xuICAgICAgICAgICAgICBpc1NwZWNpYWxpemF0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICBuYW1lOiBza2lsbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5za2lsbExpc3QucHVzaChza2lsbClcbiAgICAgIH1cbiAgICB9XG4gICAgc2hlZXREYXRhLnNraWxsc0J5VmFsdWUgPSBbLi4uc2hlZXREYXRhLnNraWxsc10uc29ydCgoYSwgYikgPT4ge1xuICAgICAgcmV0dXJuIGIuc3lzdGVtLnZhbHVlIC0gYS5zeXN0ZW0udmFsdWVcbiAgICB9KVxuICAgIHNoZWV0RGF0YS50b3BTa2lsbHMgPSBbLi4uc2hlZXREYXRhLnNraWxsc0J5VmFsdWVdLnNsaWNlKDAsIDE0KVxuICAgIHNoZWV0RGF0YS5za2lsbHNCeVZhbHVlID0gc2hlZXREYXRhLnNraWxsc0J5VmFsdWUuZmlsdGVyKFxuICAgICAgc2tpbGwgPT4gc2hlZXREYXRhLnNraWxsU2hvd1VuY29tbW9uIHx8ICFza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5yYXJpdHlcbiAgICApXG4gICAgc2hlZXREYXRhLnRvcFdlYXBvbnMgPSBbLi4uc2hlZXREYXRhLm1lbGVlV3BuLCAuLi5zaGVldERhdGEucmFuZ2VXcG5dXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYS5zeXN0ZW0uc2tpbGwubWFpbj8udmFsdWUgLSBiLnN5c3RlbS5za2lsbC5tYWluPy52YWx1ZVxuICAgICAgfSlcbiAgICAgIC5yZXZlcnNlKClcbiAgICAgIC5zbGljZSgwLCAzKVxuICAgIHNoZWV0RGF0YS5kaXNwbGF5UGxheWVyTmFtZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ2Rpc3BsYXlQbGF5ZXJOYW1lT25TaGVldCdcbiAgICApXG4gICAgaWYgKHNoZWV0RGF0YS5kaXNwbGF5UGxheWVyTmFtZSAmJiAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLnBsYXllcm5hbWUpIHtcbiAgICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLmNoYXJhY3RlclVzZXJcbiAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5wbGF5ZXJuYW1lID0gdXNlci5uYW1lXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLnNraWxsTGlzdEVtcHR5ID0gc2hlZXREYXRhLnNraWxscy5sZW5ndGggPT09IDBcblxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2l0ZW0nKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdib29rJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3NwZWxsJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICd0YWxlbnQnKSB8fFxuICAgICAgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlVGFsZW50cycpKVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3N0YXR1cycpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuXG4gICAgc2hlZXREYXRhLmhhc0ludmVudG9yeSA9XG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWRCYWNrc3RvcnkgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmFja3N0b3J5LFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBfc2F2ZVNjcm9sbFBvc2l0aW9ucyAoaHRtbCkge1xuICAgIHN1cGVyLl9zYXZlU2Nyb2xsUG9zaXRpb25zKGh0bWwpXG4gICAgY29uc3Qgc2VsZWN0b3JzID0gWycucmlnaHQtcGFuZWwgLnRhYi5kZXZlbG9wbWVudCBvbCddXG4gICAgdGhpcy5fc2Nyb2xsUG9zaXRpb25zWCA9IHNlbGVjdG9ycy5yZWR1Y2UoKHBvcywgc2VsKSA9PiB7XG4gICAgICBjb25zdCBlbCA9IGh0bWwuZmluZChzZWwpXG4gICAgICBwb3Nbc2VsXSA9IEFycmF5LmZyb20oZWwpLm1hcChlbCA9PiBlbC5zY3JvbGxMZWZ0KVxuICAgICAgcmV0dXJuIHBvc1xuICAgIH0sIHt9KVxuICB9XG5cbiAgX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMgKGh0bWwpIHtcbiAgICBzdXBlci5fcmVzdG9yZVNjcm9sbFBvc2l0aW9ucyhodG1sKVxuICAgIGNvbnN0IHNlbGVjdG9ycyA9IFsnLnJpZ2h0LXBhbmVsIC50YWIuZGV2ZWxvcG1lbnQgb2wnXVxuICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMuX3Njcm9sbFBvc2l0aW9uc1ggfHwge31cbiAgICBmb3IgKGNvbnN0IHNlbCBvZiBzZWxlY3RvcnMpIHtcbiAgICAgIGNvbnN0IGVsID0gaHRtbC5maW5kKHNlbClcbiAgICAgIGVsLmVhY2goKGksIGVsKSA9PiB7IGVsLnNjcm9sbExlZnQgPSBwb3NpdGlvbnNbc2VsXT8uW2ldIHx8IDAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIDVlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2FjdG9yJywgJ2NoYXJhY3RlciddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9jaGFyYWN0ZXIvaW5kZXguaHRtbCcsXG4gICAgICB3aWR0aDogNjg3LFxuICAgICAgaGVpZ2h0OiA2MjMsXG4gICAgICByZXNpemFibGU6IHRydWUsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICBzY3JvbGxZOiBbJy5yaWdodC1wYW5lbCAudGFiJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXYnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnc2tpbGxzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmICh0aGlzLmFjdG9yLmlzT3duZXIpIHtcbiAgICAgIC8vIE1PRElGOiAwLjgueCBvd25lciBkZXByZWNhdGVkICA9PiBpc093bmVyXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuc2tpbGwtbmFtZS5yb2xsYWJsZS5mbGFnZ2VkNGRldicpXG4gICAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vblNraWxsRGV2KGV2ZW50KSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5yZXNldC1vY2N1cGF0aW9uJylcbiAgICAgICAgLmNsaWNrKGFzeW5jICgpID0+IGF3YWl0IHRoaXMuYWN0b3IucmVzZXRPY2N1cGF0aW9uKCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucmVzZXQtYXJjaGV0eXBlJylcbiAgICAgICAgLmNsaWNrKGFzeW5jICgpID0+IGF3YWl0IHRoaXMuYWN0b3IucmVzZXRBcmNoZXR5cGUoKSlcbiAgICAgIGh0bWwuZmluZCgnLm9wZW4taXRlbScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURldGFpbHMoZXZlbnQpKVxuICAgICAgLy8gaHRtbFxuICAgICAgLy8gICAuZmluZCgnW25hbWU9XCJkYXRhLmF0dHJpYnMuaHAudmFsdWVcIl0nKVxuICAgICAgLy8gICAuY2hhbmdlKGFzeW5jIGV2ZW50ID0+e1xuICAgICAgLy8gICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIC8vICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgLy8gICAgIGxldCB2YWx1ZSA9IE51bWJlciggZXZlbnQuY3VycmVudFRhcmdldD8udmFsdWUpXG4gICAgICAvLyAgICAgaWYoICFpc05hTih2YWx1ZSkpIGF3YWl0IHRoaXMuYWN0b3Iuc2V0SHAoZXZlbnQpXG4gICAgICAvLyAgICAgZWxzZSB1aS5ub3RpZmljYXRpb25zLndhcm4oJ0Vycm9yIHBhcnNpbmcgSFAgdmFsdWUnKVxuICAgICAgLy8gICB9KVxuICAgICAgaHRtbC5maW5kKCcudG9nZ2xlLWxpc3QtbW9kZScpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTa2lsbExpc3RNb2RlKGV2ZW50KVxuICAgICAgfSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS11bmNvbW1vbi1tb2RlJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgICB0aGlzLnRvZ2dsZVNraWxsVW5jb21tb25Nb2RlKGV2ZW50KVxuICAgICAgfSlcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBodG1sXG4gICAgICAgICAgLmZpbmQoJy5zYW5pdHktbG9zcy10eXBlLWFkZCcpXG4gICAgICAgICAgLmNsaWNrKHRoaXMuX29uQWRkU2FuaXR5TG9zc1JlYXNvbi5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sXG4gICAgICAgICAgLmZpbmQoJy5zYW5pdHktbG9zcy10eXBlLWRlbGV0ZScpXG4gICAgICAgICAgLmNsaWNrKHRoaXMuX29uRGVsZXRlU2FuaXR5TG9zc1JlYXNvbi5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sXG4gICAgICAgICAgLmZpbmQoJy50b2dnbGUta2VlcGVyLWZsYWdzJylcbiAgICAgICAgICAuY2xpY2sodGhpcy5fb25Ub2dnbGVLZWVwZXJGbGFncy5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5hZGQtbW9uZXRhcnknKS5jbGljayh0aGlzLl9vbkFkZE1vbmV0YXJ5LmJpbmQodGhpcykpXG4gICAgICAgIGh0bWwuZmluZCgnLnJlbW92ZS1tb25ldGFyeScpLmNsaWNrKHRoaXMuX29uUmVtb3ZlTW9uZXRhcnkuYmluZCh0aGlzKSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBfb25BZGRNb25ldGFyeSAoKSB7XG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy5hY3Rvci5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzID8gZHVwbGljYXRlKHRoaXMuYWN0b3Iuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcykgOiBbXVxuICAgIHZhbHVlcy5wdXNoKHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgbWluOiBudWxsLFxuICAgICAgbWF4OiBudWxsLFxuICAgICAgY2FzaFR5cGU6IDAsXG4gICAgICBjYXNoVmFsdWU6ICcnLFxuICAgICAgYXNzZXRzVHlwZTogMCxcbiAgICAgIGFzc2V0c1ZhbHVlOiAnJyxcbiAgICAgIHNwZW5kaW5nVHlwZTogMCxcbiAgICAgIHNwZW5kaW5nVmFsdWU6ICcnXG4gICAgfSlcbiAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBfb25SZW1vdmVNb25ldGFyeSAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGRpdiA9IGEuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IHZhbHVlcyA9IGR1cGxpY2F0ZSh0aGlzLmFjdG9yLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMpXG4gICAgdmFsdWVzLnNwbGljZShOdW1iZXIoZGl2LmRhdGFzZXQuaW5kZXgpLCAxKVxuICAgIHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnOiB2YWx1ZXMgfSlcbiAgfVxuXG4gIF9vblRvZ2dsZUtlZXBlckZsYWdzIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnKSB7XG4gICAgICBjYXNlICdteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRGbGFnKFxuICAgICAgICAgICdDb0M3JyxcbiAgICAgICAgICAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCcsXG4gICAgICAgICAgIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZFxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdteXRob3NIYXJkZW5lZCc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0RmxhZygnQ29DNycsICdteXRob3NIYXJkZW5lZCcsICF0aGlzLmFjdG9yLm15dGhvc0hhcmRlbmVkKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkFkZFNhbml0eUxvc3NSZWFzb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIG5ldyBDb0M3Q3JlYXRlTXl0aG9zRW5jb3VudGVyKFxuICAgICAge1xuICAgICAgICBhY3RvcjogdGhpcy5hY3RvcixcbiAgICAgICAgdHlwZTogZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGVcbiAgICAgIH0sXG4gICAgICB7fVxuICAgICkucmVuZGVyKHRydWUpXG4gIH1cblxuICBfb25EZWxldGVTYW5pdHlMb3NzUmVhc29uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBvZmZzZXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAuY2xvc2VzdCgnLmZsZXhyb3cnKVxuICAgICAgLmRhdGEoJ29mZnNldCcpXG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9IHRoaXMuYWN0b3Iuc3lzdGVtLnNhbml0eUxvc3NFdmVudHMgPz8gW11cbiAgICBzYW5pdHlMb3NzRXZlbnRzLnNwbGljZShvZmZzZXQsIDEpXG4gICAgc2FuaXR5TG9zc0V2ZW50cy5zb3J0KGZ1bmN0aW9uIChsZWZ0LCByaWdodCkge1xuICAgICAgcmV0dXJuIGxlZnQudHlwZS5sb2NhbGVDb21wYXJlKHJpZ2h0LnR5cGUpXG4gICAgfSlcbiAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHMgfSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVNraWxsTGlzdE1vZGUgKGV2ZW50KSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ3NraWxsTGlzdE1vZGUnLFxuICAgICAgIXRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJylcbiAgICApXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyB0b2dnbGVTa2lsbFVuY29tbW9uTW9kZSAoZXZlbnQpIHtcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoXG4gICAgICAnQ29DNycsXG4gICAgICAnc2tpbGxTaG93VW5jb21tb24nLFxuICAgICAgIXRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpXG4gICAgKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uU2tpbGxEZXYgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICBhd2FpdCB0aGlzLmFjdG9yLmRldmVsb3BTa2lsbChza2lsbElkLCBldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIF9vbkl0ZW1EZXRhaWxzIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB0eXBlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGVcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvclt0eXBlXVxuICAgIGlmIChpdGVtKSBpdGVtLnNoZWV0LnJlbmRlcih0cnVlKVxuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKT8uc3lzdGVtXG4gICAgaWYgKHN5c3RlbS5tb25ldGFyeT8udmFsdWVzKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyddID0gT2JqZWN0LnZhbHVlcyhzeXN0ZW0ubW9uZXRhcnkudmFsdWVzIHx8IFtdKVxuICAgIH1cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyByZW5kZXJTaGVldCAoc2hlZXQsIGh0bWwpIHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVTaGVldEFydHdvcmsnKSkge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgJ251bGwnXG4gICAgICAgICkge1xuICAgICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICAgJy0tbWFpbi1zaGVldC1iZycsXG4gICAgICAgICAgICBcInVybCggJy4vYXNzZXRzL2ltYWdlcy92b2lkLndlYnAnKVwiXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICAgJy0tbWFpbi1zaGVldC1iZycsXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJylcbiAgICAgICAgICApXG4gICAgICAgICAgLy8gY29uc3QgYm9yZGVySW1hZ2UgPSBzaGVldC5lbGVtZW50LmZpbmQoJ2Zvcm0nKS5jc3MoJ2JvcmRlci1pbWFnZScpO1xuICAgICAgICAgIC8vIHNoZWV0LmVsZW1lbnQuZmluZCgnZm9ybScpLmNzcygnYm9yZGVyLWltYWdlJywgJycpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJykgIT09ICdzbGljZSdcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGxldCBzdHlsZVNoZWV0LCBjc3NSdWxlSW5kZXhcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZG9jdW1lbnQuc3R5bGVTaGVldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnN0eWxlU2hlZXRzW2ldLmhyZWY/LmVuZHNXaXRoKCdjb2M3Zy5jc3MnKSkge1xuICAgICAgICAgICAgICAgIHN0eWxlU2hlZXQgPSBkb2N1bWVudC5zdHlsZVNoZWV0c1tpXVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHN0eWxlU2hlZXQpIHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHlsZVNoZWV0LnJ1bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgc3R5bGVTaGVldC5ydWxlc1tpXS5zZWxlY3RvclRleHQgPT09ICcuc2hlZXRWMi5jaGFyYWN0ZXIgZm9ybSdcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIGNzc1J1bGVJbmRleCA9IGlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3NzUnVsZUluZGV4KSB7XG4gICAgICAgICAgICAgIGNvbnN0IENTU1N0eWxlID0gc3R5bGVTaGVldC5ydWxlc1tjc3NSdWxlSW5kZXhdLnN0eWxlXG4gICAgICAgICAgICAgIENTU1N0eWxlLnJlbW92ZVByb3BlcnR5KCdib3JkZXItaW1hZ2UnKVxuICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCcsXG4gICAgICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgc3dpdGNoIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kVHlwZScpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXV0byc6XG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2F1dG8nKVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdjb250YWluJzpcbiAgICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnY29udGFpbicpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2NvdmVyJzpcbiAgICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnY292ZXInKVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdhdXRvJylcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcpKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBnYW1lLnNldHRpbmdzXG4gICAgICAgICAgICAuZ2V0KCdDb0M3JywgJ2FydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgICAgICAudG9Mb3dlckNhc2UoKSA9PT0gJ251bGwnXG4gICAgICAgICkge1xuICAgICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICAgJy0tb3RoZXItc2hlZXQtYmcnLFxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW90aGVyLXNoZWV0LWJnJyxcbiAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScpKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgJ251bGwnXG4gICAgICAgICkge1xuICAgICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICAgJy0tbWFpbi1zaGVldC1pbWFnZScsXG4gICAgICAgICAgICBcInVybCggJy4vYXNzZXRzL2ltYWdlcy92b2lkLndlYnAnKVwiXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICAgJy0tbWFpbi1zaGVldC1pbWFnZScsXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrRnJvbnRDb2xvcicpKSB7XG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKFxuICAgICAgICAgICctLW1haW4tc2hlZXQtZnJvbnQtY29sb3InLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtGcm9udENvbG9yJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtCYWNrZ3JvdW5kQ29sb3InKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWJhY2stY29sb3InLFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtCYWNrZ3JvdW5kQ29sb3InKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0ludGVyYWN0aXZlQ29sb3InKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWludGVyYWN0aXZlLWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcygnLS1za2lsbC1sZW5ndGgnLCAnYXV0bycpXG4gICAgICAgIHNoZWV0LmVsZW1lbnQuY3NzKCctLXNraWxsLXNwZWNpYWxpemF0aW9uLWxlbmd0aCcsICdhdXRvJylcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udCcpKSB7XG4gICAgICAgIGNvbnN0IGN1c3RvbVNoZWV0Rm9udCA9IG5ldyBGb250RmFjZShcbiAgICAgICAgICAnY3VzdG9tU2hlZXRGb250JyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnQnKVxuICAgICAgICApXG4gICAgICAgIGN1c3RvbVNoZWV0Rm9udFxuICAgICAgICAgIC5sb2FkKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAobG9hZGVkRmFjZSkge1xuICAgICAgICAgICAgZG9jdW1lbnQuZm9udHMuYWRkKGxvYWRlZEZhY2UpXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVycm9yKVxuICAgICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRCb2xkJykpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tU2hlZXRDdXJzaXZlRm9udCA9IG5ldyBGb250RmFjZShcbiAgICAgICAgICAnY3VzdG9tU2hlZXRGb250JyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRCb2xkJyksXG4gICAgICAgICAgeyB3ZWlnaHQ6ICdib2xkJyB9XG4gICAgICAgIClcbiAgICAgICAgY3VzdG9tU2hlZXRDdXJzaXZlRm9udFxuICAgICAgICAgIC5sb2FkKClcbiAgICAgICAgICAudGhlbihmdW5jdGlvbiAobG9hZGVkRmFjZSkge1xuICAgICAgICAgICAgZG9jdW1lbnQuZm9udHMuYWRkKGxvYWRlZEZhY2UpXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVycm9yKVxuICAgICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJykpIHtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IGAke2dhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtNYWluRm9udFNpemUnKX1weGBcbiAgICAgICAgaWYgKHNpemUgIT09ICQoJzpyb290JykuY3NzKCdmb250LXNpemUnKSkge1xuICAgICAgICAgICQoJzpyb290JykuY3NzKCdmb250LXNpemUnLCBzaXplKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBzaGVldC5hY3Rvcj8uc3lzdGVtLnBhbm5lbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNoZWV0LmFjdG9yLnN5c3RlbS5wYW5uZWwpKSB7XG4gICAgICAgIGNvbnN0IHBhbm5lbENsYXNzID0gY2hhdEhlbHBlci5jYW1lbENhc2VUb0h5cGhlbihrZXkpXG4gICAgICAgIGNvbnN0IHBhbm5lbCA9IGh0bWwuZmluZChgLnBhbm5lbC4ke3Bhbm5lbENsYXNzfWApXG4gICAgICAgIGlmICh2YWx1ZS5leHBhbmRlZCkgcGFubmVsLmFkZENsYXNzKCdleHBhbmRlZCcpXG4gICAgICAgIGVsc2UgcGFubmVsLnJlbW92ZUNsYXNzKCdleHBhbmRlZCcpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi9jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDb21iYXQge1xuICBzdGF0aWMgcmVuZGVyQ29tYmF0VHJhY2tlciAoYXBwLCBodG1sLCBkYXRhKSB7XG4gICAgY29uc3QgY3VycmVudENvbWJhdCA9IGRhdGEuY29tYmF0c1tkYXRhLmN1cnJlbnRJbmRleCAtIDFdXG4gICAgaWYgKCFjdXJyZW50Q29tYmF0KSByZXR1cm5cblxuICAgIC8vIFRPRE8gOiBTaSBsZSBjb21iYXQgZXN0IGRlamEgZGVidXTDqSBhdmFudCBjaGFyZ2VtZW50IGxhIGZvbmN0aW9uIGQnaW5pdGlhdGl2ZSBwb2ludGUgdmVycyBsJ2FuY2llbm5lLlxuICAgIC8vIGxhIGZvbmN0aW9uIGF0dHJpYnXDqWUgZXN0IGRhdGEuY29tYmF0LnJvbGxJbml0aWF0aXZlXG4gICAgaHRtbC5maW5kKCcuY29tYmF0YW50JykuZWFjaCgoaSwgZWwpID0+IHtcbiAgICAgIC8vIGlmKCBnYW1lLmNvbWJhdC5zdGFydGVkKXtcblxuICAgICAgY29uc3QgY29tYklkID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbWJhdGFudC1pZCcpXG4gICAgICBjb25zdCBjb21iYXRhbnRDb250cm9sc0RpdiA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5jb21iYXRhbnQtY29udHJvbHMnKVxuICAgICAgLy8gY29uc3QgY29tYmF0YW50ID0gZ2FtZS5jb21iYXQuZ2V0Q29tYmF0YW50KGNvbWJJZCk7XG4gICAgICBjb25zdCBjb21iYXRhbnQgPSBjdXJyZW50Q29tYmF0LmNvbWJhdGFudHMuZ2V0KGNvbWJJZClcblxuICAgICAgaWYgKGNvbWJhdGFudC5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpKSB7XG4gICAgICAgICQoY29tYmF0YW50Q29udHJvbHNEaXYpLnByZXBlbmQoXG4gICAgICAgICAgYDxhIGNsYXNzPVwiY29tYmF0YW50LWNvbnRyb2wgYWN0aXZlIGFkZC1pbml0XCIgdGl0bGU9XCIke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LlB1dEd1bkF3YXknXG4gICAgICAgICAgKX1cIiBkYXRhLWNvbnRyb2w9XCJkcmF3R3VuXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLXJldm9sdmVyXCI+PC9pPjwvYT5gXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoY29tYmF0YW50Q29udHJvbHNEaXYpLnByZXBlbmQoXG4gICAgICAgICAgYDxhIGNsYXNzPVwiY29tYmF0YW50LWNvbnRyb2wgYWRkLWluaXRcIiB0aXRsZT1cIiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuRHJhd0d1bidcbiAgICAgICAgICApfVwiIGRhdGEtY29udHJvbD1cImRyYXdHdW5cIj48aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tcmV2b2x2ZXJcIj48L2k+PC9hPmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdpbml0aWF0aXZlUnVsZScpID09PSAnb3B0aW9uYWwnICYmXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlJbml0QXNUZXh0JylcbiAgICAgICkge1xuICAgICAgICBpZiAoY29tYmF0YW50LmluaXRpYXRpdmUpIHtcbiAgICAgICAgICBjb25zdCB0b2tlbkluaXRpYXRpdmUgPSBlbC5xdWVyeVNlbGVjdG9yKCcudG9rZW4taW5pdGlhdGl2ZScpXG4gICAgICAgICAgY29uc3QgaW5pdGlhdGl2ZVRlc3QgPSB0b2tlbkluaXRpYXRpdmUucXVlcnlTZWxlY3RvcignLmluaXRpYXRpdmUnKVxuICAgICAgICAgIGNvbnN0IHJvbGwgPVxuICAgICAgICAgICAgMTAwICogY29tYmF0YW50LmluaXRpYXRpdmUgLSAxMDAgKiBNYXRoLmZsb29yKGNvbWJhdGFudC5pbml0aWF0aXZlKVxuICAgICAgICAgIHN3aXRjaCAoTWF0aC5mbG9vcihjb21iYXRhbnQuaW5pdGlhdGl2ZSkpIHtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGU6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdmdW1ibGUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZmFpbHVyZTpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2ZhaWx1cmUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdyZWd1bGFyLXN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuUm9sbERpZmZpY3VsdHlSZWd1bGFyJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdoYXJkLXN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuUm9sbERpZmZpY3VsdHlIYXJkJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdleHRyZW1lLXN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuUm9sbERpZmZpY3VsdHlFeHRyZW1lJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnY3JpdGljYWwnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgJ0NvQzcuUm9sbERpZmZpY3VsdHlDcml0aWNhbCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoY29tYmF0YW50LmluaXRpYXRpdmUgPCAwKSB7XG4gICAgICAgIGNvbnN0IGg0ID0gZWwucXVlcnlTZWxlY3RvcignLnRva2VuLW5hbWUnKS5xdWVyeVNlbGVjdG9yKCdoNCcpXG4gICAgICAgIGNvbnN0IHNwYW4gPSBlbC5xdWVyeVNlbGVjdG9yKCdzcGFuLmluaXRpYXRpdmUnKVxuICAgICAgICBoNC5zdHlsZS5mb250V2VpZ2h0ID0gJzkwMCdcbiAgICAgICAgaDQuc3R5bGUudGV4dFNoYWRvdyA9ICcxcHggMXB4IDRweCBkYXJrcmVkJ1xuICAgICAgICBzcGFuLnN0eWxlLmZvbnRXZWlnaHQgPSAnOTAwJ1xuICAgICAgICBzcGFuLnN0eWxlLnRleHRTaGFkb3cgPSAnMXB4IDFweCA0cHggZGFya3JlZCdcblxuICAgICAgICBlbC5zdHlsZS5jb2xvciA9ICdkYXJrcmVkJ1xuICAgICAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kID0gJ2JsYWNrJ1xuICAgICAgICBlbC5zdHlsZS5mb250V2VpZ2h0ID0gJzkwMCdcbiAgICAgIH1cbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmFkZC1pbml0JykuY2xpY2soZXZlbnQgPT4gQ29DN0NvbWJhdC5fb25Ub2dnbGVHdW4oZXZlbnQpKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vblRvZ2dsZUd1biAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCBidG4gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbGkgPSBidG4uY2xvc2VzdCgnLmNvbWJhdGFudCcpXG4gICAgY29uc3QgYyA9IGF3YWl0IGdhbWUuY29tYmF0LmNvbWJhdGFudHMuZ2V0KGxpLmRhdGFzZXQuY29tYmF0YW50SWQpXG4gICAgaWYgKGMuYWN0b3IuaXNPd25lcikge1xuICAgICAgaWYgKGMuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgICBhd2FpdCBjLnNldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJywgZmFsc2UpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCBjLnNldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJywgdHJ1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBuZXdJbml0ID0gYXdhaXQgYy5hY3Rvci5yb2xsSW5pdGlhdGl2ZSghIWMuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSlcbiAgICBpZiAoYy5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpKSB7XG4gICAgICBpZiAoYy5pbml0aWF0aXZlIDwgbmV3SW5pdCkgZ2FtZS5jb21iYXQuc2V0SW5pdGlhdGl2ZShjLmlkLCBuZXdJbml0KVxuICAgIH0gZWxzZSBnYW1lLmNvbWJhdC5zZXRJbml0aWF0aXZlKGMuaWQsIG5ld0luaXQpXG4gIH1cbn1cblxuLyoqXG4gKiBSb2xsIGluaXRpYXRpdmUgZm9yIG9uZSBvciBtdWx0aXBsZSBDb21iYXRhbnRzIHdpdGhpbiB0aGUgQ29tYmF0IGVudGl0eVxuICogQHBhcmFtIHtzdHJpbmd8c3RyaW5nW119IGlkcyAgICAgQSBDb21iYXRhbnQgaWQgb3IgQXJyYXkgb2YgaWRzIGZvciB3aGljaCB0byByb2xsXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnM9e31dICAgICBBZGRpdGlvbmFsIG9wdGlvbnMgd2hpY2ggbW9kaWZ5IGhvdyBpbml0aWF0aXZlIHJvbGxzIGFyZSBjcmVhdGVkIG9yIHByZXNlbnRlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IFtvcHRpb25zLmZvcm11bGFdICAgICAgICAgQSBub24tZGVmYXVsdCBpbml0aWF0aXZlIGZvcm11bGEgdG8gcm9sbC4gT3RoZXJ3aXNlIHRoZSBzeXN0ZW0gZGVmYXVsdCBpcyB1c2VkLlxuICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy51cGRhdGVUdXJuPXRydWVdICAgICBVcGRhdGUgdGhlIENvbWJhdCB0dXJuIGFmdGVyIGFkZGluZyBuZXcgaW5pdGlhdGl2ZSBzY29yZXMgdG8ga2VlcCB0aGUgdHVybiBvbiB0aGUgc2FtZSBDb21iYXRhbnQuXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnMubWVzc2FnZU9wdGlvbnM9e31dICAgIEFkZGl0aW9uYWwgb3B0aW9ucyB3aXRoIHdoaWNoIHRvIGN1c3RvbWl6ZSBjcmVhdGVkIENoYXQgTWVzc2FnZXNcbiAqIEByZXR1cm4ge1Byb21pc2U8Q29tYmF0Pn0gICAgICAgIEEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byB0aGUgdXBkYXRlZCBDb21iYXQgZW50aXR5IG9uY2UgdXBkYXRlcyBhcmUgY29tcGxldGUuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByb2xsSW5pdGlhdGl2ZSAoXG4gIGlkcyxcbiAgeyBmb3JtdWxhID0gbnVsbCwgdXBkYXRlVHVybiA9IHRydWUsIG1lc3NhZ2VPcHRpb25zID0ge30gfSA9IHt9XG4pIHtcbiAgLy8gSXRlcmF0ZSBvdmVyIENvbWJhdGFudHMsIHBlcmZvcm1pbmcgYW4gaW5pdGlhdGl2ZSByb2xsIGZvciBlYWNoXG4gIGNvbnN0IHVwZGF0ZXMgPSBbXVxuICBmb3IgKGNvbnN0IFssIGlkXSBvZiBpZHMuZW50cmllcygpKSB7XG4gICAgLy8gR2V0IENvbWJhdGFudCBkYXRhIChub24tc3RyaWN0bHkpXG4gICAgY29uc3QgY29tYmF0YW50ID0gdGhpcy5jb21iYXRhbnRzLmdldChpZClcblxuICAgIC8vIFByb2R1Y2UgYW4gaW5pdGlhdGl2ZSByb2xsIGZvciB0aGUgQ29tYmF0YW50XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IGNvbWJhdGFudC5hY3Rvci5yb2xsSW5pdGlhdGl2ZShcbiAgICAgICEhY29tYmF0YW50LmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJylcbiAgICApXG4gICAgdXBkYXRlcy5wdXNoKHsgX2lkOiBpZCwgaW5pdGlhdGl2ZTogcm9sbCB9KVxuICB9XG4gIGlmICghdXBkYXRlcy5sZW5ndGgpIHJldHVybiB0aGlzXG5cbiAgLy8gVXBkYXRlIG11bHRpcGxlIGNvbWJhdGFudHNcbiAgYXdhaXQgdGhpcy51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnQ29tYmF0YW50JywgdXBkYXRlcylcblxuICByZXR1cm4gdGhpc1xufVxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGZsYXR0ZW5PYmplY3QsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgSXRlbSwgbWVyZ2VPYmplY3QgKi9cbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0NJREJhdGNoIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NvYy1pZC1lZGl0b3InXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NvYy1pZC1iYXRjaC5oYnMnLFxuICAgICAgd2lkdGg6IDcwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgdGl0bGU6ICdDb0M3LkNvQ0lERmxhZy50aXRsZScsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHN1Ym1pdE9uQ2xvc2U6IGZhbHNlLFxuICAgICAgc3VibWl0T25DaGFuZ2U6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIHNoZWV0RGF0YS5mb3VuZEtleXMgPSBPYmplY3Qua2V5cyhzaGVldERhdGEub2JqZWN0LmZvdW5kS2V5cykucmVkdWNlKChvdXQsIGtleSkgPT4ge1xuICAgICAgb3V0LnB1c2goeyBuYW1lOiBrZXksIGtleTogc2hlZXREYXRhLm9iamVjdC5mb3VuZEtleXNba2V5XSB9KVxuICAgICAgcmV0dXJuIG91dFxuICAgIH0sIFtdKS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICBzaGVldERhdGEubWlzc2luZ05hbWVzID0gT2JqZWN0LmtleXMoc2hlZXREYXRhLm9iamVjdC5taXNzaW5nTmFtZXMpLnJlZHVjZSgob3V0LCBrZXkpID0+IHtcbiAgICAgIG91dC5wdXNoKHsga2V5OiBzaGVldERhdGEub2JqZWN0LmZvdW5kS2V5c1trZXldID8/ICcnLCBuYW1lOiBrZXksIGN1c3RvbTogc2hlZXREYXRhLm9iamVjdC5taXNzaW5nTmFtZXNba2V5XSwgc3VmZml4OiBzaGVldERhdGEub2JqZWN0Lm1pc3NpbmdOYW1lc1trZXldLnJlcGxhY2UodGhpcy5vYmplY3Quc3VmZml4UmVnRXhwLCAnJykgfSlcbiAgICAgIHJldHVybiBvdXRcbiAgICB9LCBbXSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnLmV4aXN0aW5nJykuY2hhbmdlKHRoaXMub25TZXROYW1lLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZmEtd2FuZC1tYWdpYycpLmNsaWNrKHRoaXMub25DbGlja0d1ZXNzLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdpbnB1dCcpLmtleXVwKHRoaXMub25LZXl1cC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgb25TZXROYW1lIChldmVudCkge1xuICAgIGNvbnN0IG9iaiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICB0aGlzLm9iamVjdC5taXNzaW5nTmFtZXNbb2JqLmNsb3Nlc3QoJ2xpJykuZGF0YSgnbmFtZScpXSA9IG9iai52YWwoKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBvbkNsaWNrR3Vlc3MgKGV2ZW50KSB7XG4gICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IG5hbWUgPSBvYmouY2xvc2VzdCgnbGknKS5kYXRhKCduYW1lJylcbiAgICB0aGlzLm9iamVjdC5taXNzaW5nTmFtZXNbbmFtZV0gPSB0aGlzLm9iamVjdC5pZFByZWZpeCArIENvQzdVdGlsaXRpZXMudG9LZWJhYkNhc2UobmFtZSlcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgb25LZXl1cCAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbmFtZSA9IG9iai5jbG9zZXN0KCdsaScpLmRhdGEoJ25hbWUnKVxuICAgIHRoaXMub2JqZWN0Lm1pc3NpbmdOYW1lc1tuYW1lXSA9IHRoaXMub2JqZWN0LmlkUHJlZml4ICsgb2JqLnZhbCgpXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBpZiAoZXZlbnQuc3VibWl0dGVyKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3QudHlwZU5hbWUgPT09IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Ta2lsbCcpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICBhd2FpdCBDb0NJREJhdGNoLnByb2Nlc3NTa2lsbEtleXModGhpcy5vYmplY3QudXBkYXRlTGlzdCwgdGhpcy5vYmplY3QubWlzc2luZ05hbWVzKVxuICAgICAgfVxuICAgICAgdGhpcy5vYmplY3QucmVzb2x2ZSh0cnVlKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwcm9jZXNzU2tpbGxLZXlzICh1cGRhdGVMaXN0LCBtaXNzaW5nTmFtZXMpIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdXG4gICAgY29uc3QgYWN0b3JzID0ge31cbiAgICBjb25zdCBzY2VuZXMgPSB7fVxuICAgIGZvciAoY29uc3QgdXBkYXRlIG9mIHVwZGF0ZUxpc3QpIHtcbiAgICAgIHVwZGF0ZS5jb2NpZEZsYWcuaWQgPSBtaXNzaW5nTmFtZXNbdXBkYXRlLm5hbWVdXG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5jb2NpZEZsYWcubGFuZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlLmNvY2lkRmxhZy5sYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdXBkYXRlLmNvY2lkRmxhZy5wcmlvcml0eSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlLmNvY2lkRmxhZy5wcmlvcml0eSA9IDBcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdXBkYXRlLmNvY2lkRmxhZy5lcmFzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGUuY29jaWRGbGFnLmVyYXMgPSB7fVxuICAgICAgfVxuICAgICAgY29uc3QgZmxhZ3MgPSBmbGF0dGVuT2JqZWN0KHsgZmxhZ3M6IHsgQ29DNzogeyBjb2NpZEZsYWc6IHVwZGF0ZS5jb2NpZEZsYWcgfSB9IH0pXG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5zY2VuZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzY2VuZXNbdXBkYXRlLnNjZW5lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldCh1cGRhdGUuc2NlbmUpXG4gICAgICAgICAgc2NlbmVzW3VwZGF0ZS5zY2VuZV0gPSBzY2VuZS50b09iamVjdCgpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdG9rZW5PZmZzZXQgPSBzY2VuZXNbdXBkYXRlLnNjZW5lXS50b2tlbnMuZmluZEluZGV4KHQgPT4gdC5faWQgPT09IHVwZGF0ZS50b2tlbilcbiAgICAgICAgaWYgKHRva2VuT2Zmc2V0ID4gLTEpIHtcbiAgICAgICAgICBjb25zdCBpdGVtT2Zmc2V0ID0gc2NlbmVzW3VwZGF0ZS5zY2VuZV0udG9rZW5zW3Rva2VuT2Zmc2V0XS5hY3RvckRhdGEuaXRlbXMuZmluZEluZGV4KGkgPT4gaS5faWQgPT09IHVwZGF0ZS5pdGVtKVxuICAgICAgICAgIGlmIChpdGVtT2Zmc2V0ID4gLTEpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4cGFuZGVkRmxhZ3MgPSBleHBhbmRPYmplY3QoT2JqZWN0LmVudHJpZXMoZmxhZ3MpLnJlZHVjZSgob3V0LCBlbnRyeSkgPT4ge1xuICAgICAgICAgICAgICBpZiAoZW50cnlbMF0ubWF0Y2goL15mbGFnc1xcLkNvQzdcXC5jb2NpZEZsYWcvKSkge1xuICAgICAgICAgICAgICAgIG91dFtlbnRyeVswXV0gPSBlbnRyeVsxXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiBvdXRcbiAgICAgICAgICAgIH0sIHt9KSlcbiAgICAgICAgICAgIHNjZW5lc1t1cGRhdGUuc2NlbmVdLnRva2Vuc1t0b2tlbk9mZnNldF0uYWN0b3JEYXRhLml0ZW1zW2l0ZW1PZmZzZXRdID0gbWVyZ2VPYmplY3Qoc2NlbmVzW3VwZGF0ZS5zY2VuZV0udG9rZW5zW3Rva2VuT2Zmc2V0XS5hY3RvckRhdGEuaXRlbXNbaXRlbU9mZnNldF0sIGV4cGFuZGVkRmxhZ3MpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB1cGRhdGUuYWN0b3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYWN0b3JzW3VwZGF0ZS5hY3Rvcl0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgYWN0b3JzW3VwZGF0ZS5hY3Rvcl0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB7XG4gICAgICAgICAgX2lkOiB1cGRhdGUuaXRlbVxuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKGZsYWdzKSkge1xuICAgICAgICAgIGlmIChrZXkubWF0Y2goL15mbGFnc1xcLkNvQzdcXC5jb2NpZEZsYWcvKSkge1xuICAgICAgICAgICAgaXRlbVtrZXldID0gZmxhZ3Nba2V5XVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhY3RvcnNbdXBkYXRlLmFjdG9yXS5wdXNoKGl0ZW0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBpdGVtID0ge1xuICAgICAgICAgIF9pZDogdXBkYXRlLml0ZW1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhmbGFncykpIHtcbiAgICAgICAgICBpZiAoa2V5Lm1hdGNoKC9eZmxhZ3NcXC5Db0M3XFwuY29jaWRGbGFnLykpIHtcbiAgICAgICAgICAgIGl0ZW1ba2V5XSA9IGZsYWdzW2tleV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaXRlbXMucHVzaChpdGVtKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXRlbXMubGVuZ3RoKSB7XG4gICAgICBhd2FpdCBJdGVtLnVwZGF0ZURvY3VtZW50cyhpdGVtcylcbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKGFjdG9ycykubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IGFjdG9ySWQgb2YgT2JqZWN0LmtleXMoYWN0b3JzKSkge1xuICAgICAgICBhd2FpdCBJdGVtLnVwZGF0ZURvY3VtZW50cyhhY3RvcnNbYWN0b3JJZF0sIHsgcGFyZW50OiBnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZCkgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKHNjZW5lcykubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IHNjZW5lSWQgb2YgT2JqZWN0LmtleXMoc2NlbmVzKSkge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBzY2VuZS51cGRhdGUoc2NlbmVzW3NjZW5lSWRdKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHBvcHVsYXRlU2tpbGxLZXlzICh1cGRhdGVMaXN0LCBtaXNzaW5nTmFtZXMsIGZvdW5kS2V5cykge1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgIGNvbnN0IGFjdG9yRGF0YSA9IGFjdG9yLnRvT2JqZWN0KClcbiAgICAgIGlmIChhY3RvckRhdGEuaXRlbXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFjdG9yRGF0YS5pdGVtcykge1xuICAgICAgICAgIGNvbnN0IGl0ZW1EYXRhID0gaXRlbSBpbnN0YW5jZW9mIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPyBpdGVtLnRvT2JqZWN0KCkgOiBpdGVtXG4gICAgICAgICAgaWYgKGl0ZW1EYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICAgIGlmICghaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnPy5pZD8ubWF0Y2goL15pLnNraWxsLykpIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgbWlzc2luZ05hbWVzW2l0ZW1EYXRhLm5hbWVdID0gJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB1cGRhdGVMaXN0LnB1c2goe1xuICAgICAgICAgICAgICAgIGFjdG9yOiBhY3Rvci5faWQsXG4gICAgICAgICAgICAgICAgaXRlbTogaXRlbURhdGEuX2lkLFxuICAgICAgICAgICAgICAgIG5hbWU6IGl0ZW1EYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgY29jaWRGbGFnOiBpdGVtRGF0YS5mbGFncy5Db0M3Py5jb2NpZEZsYWcgPz8ge31cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZvdW5kS2V5c1tpdGVtRGF0YS5uYW1lXSA9IGl0ZW1EYXRhLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBnYW1lLml0ZW1zLmNvbnRlbnRzKSB7XG4gICAgICBjb25zdCBpdGVtRGF0YSA9IGl0ZW0gaW5zdGFuY2VvZiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID8gaXRlbS50b09iamVjdCgpIDogaXRlbVxuICAgICAgaWYgKGl0ZW1EYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgaWYgKCFpdGVtRGF0YS5mbGFncy5Db0M3Py5jb2NpZEZsYWc/LmlkPy5tYXRjaCgvXmkuc2tpbGwvKSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgbWlzc2luZ05hbWVzW2l0ZW1EYXRhLm5hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgbWlzc2luZ05hbWVzW2l0ZW1EYXRhLm5hbWVdID0gJydcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlTGlzdC5wdXNoKHtcbiAgICAgICAgICAgIGl0ZW06IGl0ZW1EYXRhLl9pZCxcbiAgICAgICAgICAgIG5hbWU6IGl0ZW1EYXRhLm5hbWUsXG4gICAgICAgICAgICBjb2NpZEZsYWc6IGl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZyA/PyB7fVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm91bmRLZXlzW2l0ZW1EYXRhLm5hbWVdID0gaXRlbURhdGEuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNjZW5lIG9mIGdhbWUuc2NlbmVzKSB7XG4gICAgICBjb25zdCBzY2VuZURhdGEgPSBzY2VuZS50b09iamVjdCgpXG4gICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHNjZW5lRGF0YS50b2tlbnMgPz8gW10pIHtcbiAgICAgICAgaWYgKHRva2VuLmFjdG9ySWQgJiYgIXRva2VuLmFjdG9yTGluaykge1xuICAgICAgICAgIGNvbnN0IGFjdG9yRGF0YSA9IGR1cGxpY2F0ZSh0b2tlbi5hY3RvckRhdGEpXG4gICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFjdG9yRGF0YS5pdGVtcyA/PyBbXSkge1xuICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGl0ZW0udG9PYmplY3QoKSA6IGl0ZW1cbiAgICAgICAgICAgIGlmIChpdGVtRGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICAgIGlmICghaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnPy5pZD8ubWF0Y2goL15pLnNraWxsLykpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9ICcnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZUxpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgICBzY2VuZTogc2NlbmVEYXRhLl9pZCxcbiAgICAgICAgICAgICAgICAgIHRva2VuOiB0b2tlbi5faWQsXG4gICAgICAgICAgICAgICAgICBpdGVtOiBpdGVtRGF0YS5faWQsXG4gICAgICAgICAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgICAgY29jaWRGbGFnOiBpdGVtRGF0YS5mbGFncy5Db0M3Py5jb2NpZEZsYWcgPz8ge31cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvdW5kS2V5c1tpdGVtRGF0YS5uYW1lXSA9IGl0ZW1EYXRhLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKG1pc3NpbmdOYW1lcykuZmlsdGVyKGtleSA9PiBtaXNzaW5nTmFtZXNba2V5XSA9PT0gJycpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiAvXmlcXC5za2lsbFxcLi8sIHR5cGU6ICdpJywgZXJhOiBmYWxzZSB9KVxuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgIGZvdW5kS2V5c1tpdGVtLm5hbWVdID0gaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBrZXkgaW4gZmxhdHRlbk9iamVjdChnYW1lLmkxOG4udHJhbnNsYXRpb25zLkNvQzcuQ29DSURGbGFnLmtleXMgPz8ge30pKSB7XG4gICAgICAgIGZvdW5kS2V5c1tnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5rZXlzLicgKyBrZXkpXSA9IGtleVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBuYW1lIGluIG1pc3NpbmdOYW1lcykge1xuICAgICAgICBpZiAodHlwZW9mIGZvdW5kS2V5c1tuYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBtaXNzaW5nTmFtZXNbbmFtZV0gPSBmb3VuZEtleXNbbmFtZV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKHR5cGUpIHtcbiAgICBjb25zdCB1cGRhdGVMaXN0ID0gW11cbiAgICBjb25zdCBtaXNzaW5nTmFtZXMgPSB7fVxuICAgIGNvbnN0IGZvdW5kS2V5cyA9IHt9XG4gICAgbGV0IHR5cGVOYW1lID0gJydcbiAgICBsZXQgaWRQcmVmaXggPSAnJ1xuICAgIGxldCBzdWZmaXhSZWdFeHAgPSBudWxsXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgIHR5cGVOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNraWxsJylcbiAgICAgICAgaWRQcmVmaXggPSAnaS5za2lsbC4nXG4gICAgICAgIHN1ZmZpeFJlZ0V4cCA9IC9eaVxcLnNraWxsXFwuL1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGF3YWl0IENvQ0lEQmF0Y2gucG9wdWxhdGVTa2lsbEtleXModXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzLCBmb3VuZEtleXMpXG4gICAgaWYgKE9iamVjdC5rZXlzKG1pc3NpbmdOYW1lcykuZmlsdGVyKGtleSA9PiBtaXNzaW5nTmFtZXNba2V5XSA9PT0gJycpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYXdhaXQgQ29DSURCYXRjaC5wcm9jZXNzU2tpbGxLZXlzKHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcylcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBDb0NJREJhdGNoKHsgdHlwZU5hbWUsIGlkUHJlZml4LCBzdWZmaXhSZWdFeHAsIHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcywgZm91bmRLZXlzLCByZXNvbHZlIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgRGlhbG9nLCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZm91bmRyeSwgZ2FtZSwgaXNOZXdlclZlcnNpb24sIG1lcmdlT2JqZWN0LCB1aSAqL1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0NJREJhdGNoIH0gZnJvbSAnLi9hcHBzL2NvYy1pZC1iYXRjaC5qcydcblxuZXhwb3J0IGNsYXNzIFVwZGF0ZXIge1xuICBzdGF0aWMgYXN5bmMgY2hlY2tGb3JVcGRhdGUgKCkge1xuICAgIGxldCBzeXN0ZW1VcGRhdGVWZXJzaW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicpXG4gICAgaWYgKGdhbWUuYWN0b3JzLnNpemUgKyBnYW1lLnNjZW5lcy5zaXplICsgZ2FtZS5pdGVtcy5zaXplICsgZ2FtZS5qb3VybmFsLnNpemUgKyBnYW1lLnRhYmxlcy5zaXplID09PSAwKSB7XG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gYWN0b3JzLCBpdGVtcywgam91cm5hbHMsIHJvbGwgdGFibGVzLCBvciBzY2VuZXMgc2tpcCB3b3JsZCB1cGRhdGVcbiAgICAgIHN5c3RlbVVwZGF0ZVZlcnNpb24gPSBnYW1lLnN5c3RlbS52ZXJzaW9uXG4gICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgc3lzdGVtVXBkYXRlVmVyc2lvbilcbiAgICB9XG4gICAgY29uc3QgcnVuTWlncmF0ZSA9IGlzTmV3ZXJWZXJzaW9uKGdhbWUuc3lzdGVtLnZlcnNpb24sIHN5c3RlbVVwZGF0ZVZlcnNpb24gPz8gJzAnKVxuICAgIHRoaXMudXBkYXRlZE1vZHVsZXMgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVkTW9kdWxlVmVyc2lvbicpIHx8IHt9XG4gICAgdGhpcy5jdXJyZW50TW9kdWxlcyA9IHt9XG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmICghWydDb0M3JywgJ3dvcmxkJ10uaW5jbHVkZXMocGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZSkgJiYgWydBY3RvcicsICdJdGVtJywgJ1NjZW5lJ10uaW5jbHVkZXMocGFjay5tZXRhZGF0YS50eXBlKSkge1xuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmN1cnJlbnRNb2R1bGVzLCBwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lKSkge1xuICAgICAgICAgIC8vIE9ubHkgbmVlZCB0byBjaGVjayBlYWNoIG1vZHVsZSBvbmNlXG4gICAgICAgICAgY29uc3QgbW9kdWxlID0gZ2FtZS5tb2R1bGVzLmdldChwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lKVxuICAgICAgICAgIGlmIChtb2R1bGUpIHtcbiAgICAgICAgICAgIGlmIChydW5NaWdyYXRlIHx8ICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy51cGRhdGVkTW9kdWxlcywgbW9kdWxlLmlkKSB8fCBTdHJpbmcodGhpcy51cGRhdGVkTW9kdWxlc1ttb2R1bGUuaWRdKSAhPT0gU3RyaW5nKG1vZHVsZS52ZXJzaW9uKSkge1xuICAgICAgICAgICAgICAvLyBBIG1pZ3JhdGlvbiBpcyByZXF1aXJlZCwgbW9kdWxlIGhhcyBub3QgYmVlbiB1cGRhdGVkIGJlZm9yZSwgb3IgdGhlIHZlcnNpb24gbnVtYmVyIGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICAgIHRoaXMuY3VycmVudE1vZHVsZXNbbW9kdWxlLmlkXSA9IG1vZHVsZS52ZXJzaW9uXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChydW5NaWdyYXRlIHx8IE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBuZXcgRGlhbG9nKHtcbiAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVGl0bGUnKSxcbiAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jdXJyZW50TW9kdWxlcykubGVuZ3RoID09PSAwXG4gICAgICAgICAgICAgID8gJ0NvQzcuTWlncmF0ZS5NZXNzYWdlJ1xuICAgICAgICAgICAgICA6ICdDb0M3Lk1pZ3JhdGUuV2l0aE1vZHVsZXNNZXNzYWdlJyxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgdmVyc2lvbjogZ2FtZS5zeXN0ZW0udmVyc2lvbixcbiAgICAgICAgICAgICAgbW9kdWxlczpcbiAgICAgICAgICAgICAgICAnPHVsPjxsaT4nICtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRNb2R1bGVzKVxuICAgICAgICAgICAgICAgICAgLm1hcChtb2QgPT4gZ2FtZS5tb2R1bGVzLmdldChtb2QpLnRpdGxlKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oJzwvbGk+PGxpPicpICtcbiAgICAgICAgICAgICAgICAnPC9saT48L3VsPidcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApLFxuICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuQnV0dG9uVXBkYXRlJyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiBVcGRhdGVyLnVwZGF0ZSgpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2tpcDoge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuQnV0dG9uU2tpcCcpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ldyBEaWFsb2coe1xuICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UaXRsZScpLFxuICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5HTVJlcXVpcmVkJywge1xuICAgICAgICAgICAgdmVyc2lvbjogZ2FtZS5zeXN0ZW0udmVyc2lvblxuICAgICAgICAgIH0pLFxuICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgIE9LOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25Pa2F5JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pLnJlbmRlcih0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGUgKCkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlRG9jdW1lbnRzKClcblxuICAgIC8vIC8vIElmIHdlIHB1dCB1cCBhIHRlbXBvcmFyeSBzY2VuZSByZXR1cm4gdGhlIHVzZXIgYW5kIHJlbW92ZSBpdFxuICAgIC8vIGlmIChcbiAgICAvLyAgIHR5cGVvZiB0aGlzLnRlbXBvcmFyeVNjZW5lICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIC8vICAgdHlwZW9mIHRoaXMub3JpZ2luYWxTY2VuZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAvLyApIHtcbiAgICAvLyAgIGF3YWl0IHRoaXMub3JpZ2luYWxTY2VuZS52aWV3KClcbiAgICAvLyAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSlcbiAgICAvLyAgIGF3YWl0IHRoaXMudGVtcG9yYXJ5U2NlbmUuZGVsZXRlKClcbiAgICAvLyB9XG5cbiAgICAvLyBNaWdyYXRlIFNldHRpbmdzIGlmIFB1bHAgUnVsZXMgaXMgZW5hYmxlZCB0dXJuIG9uIGFsbCBydWxlc1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZXMnKSkge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVEb3VibGVNYXhIZWFsdGgnLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlT3JnYW5pemF0aW9uJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlVGFsZW50cycsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZUZhc3RlclJlY292ZXJ5JywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMnLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMnLCB0cnVlKVxuICAgIH1cblxuICAgIGF3YWl0IENvQ0lEQmF0Y2guY3JlYXRlKCdza2lsbCcpXG5cbiAgICBjb25zdCBzZXR0aW5ncyA9IG1lcmdlT2JqZWN0KHRoaXMudXBkYXRlZE1vZHVsZXMgfHwge30sIHRoaXMuY3VycmVudE1vZHVsZXMpXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlZE1vZHVsZVZlcnNpb24nLCBzZXR0aW5ncylcbiAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgZ2FtZS5zeXN0ZW0udmVyc2lvbilcblxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuQ29tcGxldGUnKSwge1xuICAgICAgcGVybWFuZW50OiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVEb2N1bWVudHMgKCkge1xuICAgIC8vIE1pZ3JhdGUgV29ybGQgQWN0b3JzXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBnYW1lLmFjdG9ycy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHRoaXMubWlncmF0ZUFjdG9yRGF0YShhY3Rvci50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgQWN0b3IgZG9jdW1lbnQgJHthY3Rvci5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgYWN0b3IudXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yQWN0b3InLCB7XG4gICAgICAgICAgbmFtZTogYWN0b3IubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgSXRlbXNcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2FtZS5pdGVtcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW0udG9PYmplY3QoKSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIEl0ZW0gZG9jdW1lbnQgJHtpdGVtLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckl0ZW0nLCB7XG4gICAgICAgICAgbmFtZTogaXRlbS5uYW1lLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBUYWJsZXNcbiAgICBmb3IgKGNvbnN0IHRhYmxlIG9mIGdhbWUudGFibGVzLmNvbnRlbnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlVGFibGVEYXRhKHRhYmxlLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBUYWJsZSBkb2N1bWVudCAke3RhYmxlLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCB0YWJsZS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JUYWJsZScsIHtcbiAgICAgICAgICBuYW1lOiB0YWJsZS5uYW1lLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBNYWNyb3NcbiAgICBmb3IgKGNvbnN0IG1hY3JvIG9mIGdhbWUubWFjcm9zLmNvbnRlbnRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlTWFjcm9EYXRhKG1hY3JvLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBNYWNybyBkb2N1bWVudCAke21hY3JvLm5hbWV9YClcbiAgICAgICAgICBhd2FpdCBtYWNyby51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JNYWNybycsIHtcbiAgICAgICAgICBuYW1lOiBtYWNyby5uYW1lLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBTY2VuZXMgW1Rva2VuXSBBY3RvcnNcbiAgICBmb3IgKGNvbnN0IHNjZW5lIG9mIGdhbWUuc2NlbmVzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlU2NlbmVEYXRhKHNjZW5lKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgU2NlbmUgZG9jdW1lbnQgJHtzY2VuZS5uYW1lfWApXG4gICAgICAgICAgLy8gaWYgKFxuICAgICAgICAgIC8vICAgc2NlbmUuaWQgPT09IGdhbWUuc2NlbmVzLmN1cnJlbnQuaWQgJiZcbiAgICAgICAgICAvLyAgIHR5cGVvZiB0aGlzLnRlbXBvcmFyeVNjZW5lID09PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIC8vICAgdHlwZW9mIHRoaXMub3JpZ2luYWxTY2VuZSA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAvLyApIHtcbiAgICAgICAgICAvLyAgIHRoaXMudGVtcG9yYXJ5U2NlbmUgPSBhd2FpdCBTY2VuZS5jcmVhdGUoe1xuICAgICAgICAgIC8vICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuVXBkYXRlQ3VycmVudFNjZW5lJyksXG4gICAgICAgICAgLy8gICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDAwMDAnXG4gICAgICAgICAgLy8gICB9KVxuICAgICAgICAgIC8vICAgdGhpcy5vcmlnaW5hbFNjZW5lID0gc2NlbmVcbiAgICAgICAgICAvLyAgIGF3YWl0IERyYXdpbmdEb2N1bWVudC5jcmVhdGUoXG4gICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAvLyAgICAgICBhdXRob3I6IGdhbWUudXNlci5pZCxcbiAgICAgICAgICAvLyAgICAgICBzaGFwZToge1xuICAgICAgICAgIC8vICAgICAgICAgdHlwZTogJ3InLFxuICAgICAgICAgIC8vICAgICAgICAgd2lkdGg6IDE2MDAsXG4gICAgICAgICAgLy8gICAgICAgICBoZWlnaHQ6IDIwMFxuICAgICAgICAgIC8vICAgICAgIH0sXG4gICAgICAgICAgLy8gICAgICAgeDogMjIwMCxcbiAgICAgICAgICAvLyAgICAgICB5OiAyMjAwLFxuICAgICAgICAgIC8vICAgICAgIHo6IDAsXG4gICAgICAgICAgLy8gICAgICAgc3Ryb2tlV2lkdGg6IDAsXG4gICAgICAgICAgLy8gICAgICAgdGV4dDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLlVwZGF0ZUN1cnJlbnRTY2VuZScpLFxuICAgICAgICAgIC8vICAgICAgIGZvbnRGYW1pbHk6ICdTaWduaWthJyxcbiAgICAgICAgICAvLyAgICAgICBmb250U2l6ZTogMTI4LFxuICAgICAgICAgIC8vICAgICAgIHRleHRDb2xvcjogJyNGRkZGRkYnLFxuICAgICAgICAgIC8vICAgICAgIHRleHRBbHBoYTogMSxcbiAgICAgICAgICAvLyAgICAgICBoaWRkZW46IGZhbHNlLFxuICAgICAgICAgIC8vICAgICAgIGxvY2tlZDogdHJ1ZVxuICAgICAgICAgIC8vICAgICB9LFxuICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgLy8gICAgICAgcGFyZW50OiB0aGlzLnRlbXBvcmFyeVNjZW5lXG4gICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAvLyAgIClcbiAgICAgICAgICAvLyAgIGF3YWl0IHRoaXMudGVtcG9yYXJ5U2NlbmUudmlldygpXG4gICAgICAgICAgLy8gICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpXG4gICAgICAgICAgLy8gfVxuICAgICAgICAgIGF3YWl0IHNjZW5lLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgICBzY2VuZS50b2tlbnMuZm9yRWFjaCh0ID0+ICh0Ll9hY3RvciA9IG51bGwpKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvclNjZW5lJywge1xuICAgICAgICAgIG5hbWU6IHNjZW5lLm5hbWUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIENvbXBlbmRpdW0gUGFja3NcbiAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgaWYgKFxuICAgICAgICBwYWNrLm1ldGFkYXRhLnBhY2thZ2VOYW1lICE9PSAnQ29DNycgJiZcbiAgICAgICAgWydBY3RvcicsICdJdGVtJywgJ01hY3JvJywgJ1JvbGxUYWJsZScsICdTY2VuZSddLmluY2x1ZGVzKFxuICAgICAgICAgIHBhY2subWV0YWRhdGEudHlwZVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgYXdhaXQgVXBkYXRlci5taWdyYXRlQ29tcGVuZGl1bURhdGEocGFjaylcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZUFjdG9yRGF0YSAoYWN0b3IpIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cblxuICAgIC8vIFVwZGF0ZSBXb3JsZCBBY3RvclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVBY3RvckNoYXJhY3RlclNhbml0eShhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JBcnR3b3JrKGFjdG9yLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVBY3RvcktlZXBlck5vdGVzKGFjdG9yLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVBY3Rvck5wY0NyZWF0dXJlKGFjdG9yLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVBY3RvclN0YXR1c0VmZmVjdEFjdGl2ZShhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JTYW5Mb3NzUmVhc29ucyhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JNb25ldGFyeShhY3RvciwgdXBkYXRlRGF0YSlcblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgQWN0b3IgSXRlbXNcbiAgICBpZiAoYWN0b3IuaXRlbXMpIHtcbiAgICAgIGNvbnN0IGl0ZW1zID0gYWN0b3IuaXRlbXMucmVkdWNlKChhcnIsIGkpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbURhdGEgPVxuICAgICAgICAgIGkgaW5zdGFuY2VvZiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID8gaS50b09iamVjdCgpIDogaVxuICAgICAgICBjb25zdCBpdGVtVXBkYXRlID0gVXBkYXRlci5taWdyYXRlSXRlbURhdGEoaXRlbURhdGEpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KGl0ZW1VcGRhdGUpKSB7XG4gICAgICAgICAgaXRlbVVwZGF0ZS5faWQgPSBpdGVtRGF0YS5faWRcbiAgICAgICAgICBhcnIucHVzaChleHBhbmRPYmplY3QoaXRlbVVwZGF0ZSkpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFyclxuICAgICAgfSwgW10pXG4gICAgICBpZiAoaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICB1cGRhdGVEYXRhLml0ZW1zID0gaXRlbXNcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG1pZ3JhdGVDb21wZW5kaXVtRGF0YSAocGFjaykge1xuICAgIGNvbnN0IGRvY3VtZW50VHlwZSA9IHBhY2subWV0YWRhdGEudHlwZVxuICAgIGlmIChcbiAgICAgICFbJ0FjdG9yJywgJ0l0ZW0nLCAnTWFjcm8nLCAnUm9sbFRhYmxlJywgJ1NjZW5lJ10uaW5jbHVkZXMoZG9jdW1lbnRUeXBlKVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gVW5sb2NrIHRoZSBwYWNrIGZvciBlZGl0aW5nXG4gICAgY29uc3Qgd2FzTG9ja2VkID0gcGFjay5sb2NrZWRcbiAgICBhd2FpdCBwYWNrLmNvbmZpZ3VyZSh7IGxvY2tlZDogZmFsc2UgfSlcblxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBwYWNrLm1pZ3JhdGUoKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5sb2coJ3BhY2sgbWlncmF0ZSBmYWlsZWQnLCBwYWNrLCBlcnIpXG4gICAgfVxuICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnRzKClcblxuICAgIC8vIEl0ZXJhdGUgb3ZlciBjb21wZW5kaXVtIGVudHJpZXMgLSBhcHBseWluZyBmaW5lLXR1bmVkIG1pZ3JhdGlvbiBmdW5jdGlvbnNcbiAgICBmb3IgKGNvbnN0IGRvYyBvZiBkb2N1bWVudHMpIHtcbiAgICAgIGxldCB1cGRhdGVEYXRhID0ge31cbiAgICAgIHRyeSB7XG4gICAgICAgIHN3aXRjaCAoZG9jdW1lbnRUeXBlKSB7XG4gICAgICAgICAgY2FzZSAnQWN0b3InOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUFjdG9yRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnSXRlbSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlSXRlbURhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ01hY3JvJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVNYWNyb0RhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ1JvbGxUYWJsZSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlVGFibGVEYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdTY2VuZSc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlU2NlbmVEYXRhKGRvYylcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgLy8gU2F2ZSB0aGUgZW50cnksIGlmIGRhdGEgd2FzIGNoYW5nZWRcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBNaWdyYXRlZCAke2RvY3VtZW50VHlwZX0gZG9jdW1lbnQgJHtkb2MubmFtZX0gaW4gQ29tcGVuZGl1bSAke3BhY2suY29sbGVjdGlvbn1gXG4gICAgICAgICAgKVxuICAgICAgICAgIGF3YWl0IGRvYy51cGRhdGUodXBkYXRlRGF0YSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckRvY3VtZW50UGFjaycsIHtcbiAgICAgICAgICBuYW1lOiBkb2MubmFtZSxcbiAgICAgICAgICBjb2xsZWN0aW9uOiBwYWNrLmNvbGxlY3Rpb24sXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBcHBseSB0aGUgb3JpZ2luYWwgbG9ja2VkIHN0YXR1cyBmb3IgdGhlIHBhY2tcbiAgICBhd2FpdCBwYWNrLmNvbmZpZ3VyZSh7IGxvY2tlZDogd2FzTG9ja2VkIH0pXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZUl0ZW1EYXRhIChpdGVtKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgSXRlbVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtRW1iZWRkZWR2MTAoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUV4cGVyaWVuY2UoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUFydHdvcmsoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUJvb2tBdXRvbWF0ZWQoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUtlZXBlck5vdGVzKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1TcGVsbEF1dG9tYXRlZChpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXNNZXJnZShpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtRXJhcyhpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtdjEwKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1Cb29rVW5pdHMoaXRlbSwgdXBkYXRlRGF0YSlcblxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZU1hY3JvRGF0YSAodGFibGUpIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cblxuICAgIC8vIFVwZGF0ZSBXb3JsZCBBY3RvclxuICAgIFVwZGF0ZXIuX21pZ3JhdGVNYWNyb0FydHdvcmsodGFibGUsIHVwZGF0ZURhdGEpXG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVUYWJsZURhdGEgKHRhYmxlKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlVGFibGVBcnR3b3JrKHRhYmxlLCB1cGRhdGVEYXRhKVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlU2NlbmVEYXRhIChzY2VuZSkge1xuICAgIGNvbnN0IHJldHVybnMgPSB7XG4gICAgICB0b2tlbnM6IFtdXG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2NlbmUudG9rZW5zICE9PSAndW5kZWZpbmVkJyAmJiBzY2VuZS50b2tlbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm5zLnRva2VucyA9IHNjZW5lLnRva2Vucy5tYXAodG9rZW4gPT4ge1xuICAgICAgICBjb25zdCB0ID0gdG9rZW4udG9PYmplY3QoKVxuICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICAgICAgVXBkYXRlci5fbWlncmF0ZVRva2VuQXJ0d29yayh0LCB1cGRhdGVEYXRhKVxuICAgICAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRGF0YSkubGVuZ3RoKSB7XG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0LCB1cGRhdGVEYXRhKVxuICAgICAgICB9XG4gICAgICAgIGlmICghdC5hY3RvcklkIHx8IHQuYWN0b3JMaW5rKSB7XG4gICAgICAgICAgdC5hY3RvckRhdGEgPSB7fVxuICAgICAgICB9IGVsc2UgaWYgKCFnYW1lLmFjdG9ycy5oYXModC5hY3RvcklkKSkge1xuICAgICAgICAgIHQuYWN0b3JJZCA9IG51bGxcbiAgICAgICAgICB0LmFjdG9yRGF0YSA9IHt9XG4gICAgICAgIH0gZWxzZSBpZiAoIXQuYWN0b3JMaW5rKSB7XG4gICAgICAgICAgY29uc3QgYWN0b3JEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodC5hY3RvckRhdGEpXG4gICAgICAgICAgYWN0b3JEYXRhLnR5cGUgPSB0b2tlbi5hY3Rvcj8udHlwZVxuICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUFjdG9yRGF0YShhY3RvckRhdGEpXG4gICAgICAgICAgO1snaXRlbXMnLCAnZWZmZWN0cyddLmZvckVhY2goZW1iZWRkZWROYW1lID0+IHtcbiAgICAgICAgICAgIGlmICghdXBkYXRlW2VtYmVkZGVkTmFtZV0/Lmxlbmd0aCkge1xuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSBuZXcgTWFwKHVwZGF0ZVtlbWJlZGRlZE5hbWVdLm1hcCh1ID0+IFt1Ll9pZCwgdV0pKVxuICAgICAgICAgICAgdC5hY3RvckRhdGFbZW1iZWRkZWROYW1lXS5mb3JFYWNoKG9yaWdpbmFsID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlID0gdXBkYXRlcy5nZXQob3JpZ2luYWwuX2lkKVxuICAgICAgICAgICAgICBpZiAodXBkYXRlKSBtZXJnZU9iamVjdChvcmlnaW5hbCwgdXBkYXRlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGRlbGV0ZSB1cGRhdGVbZW1iZWRkZWROYW1lXVxuICAgICAgICAgIH0pXG4gICAgICAgICAgbWVyZ2VPYmplY3QodC5hY3RvckRhdGEsIHVwZGF0ZSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdFxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIHJldHVybnNcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1LZWVwZXJOb3RlcyAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIFtcbiAgICAgICAgJ2FyY2hldHlwZScsXG4gICAgICAgICdjaGFzZScsXG4gICAgICAgICdpdGVtJyxcbiAgICAgICAgJ29jY3VwYXRpb24nLFxuICAgICAgICAnc2V0dXAnLFxuICAgICAgICAnc2tpbGwnLFxuICAgICAgICAnc3BlbGwnLFxuICAgICAgICAnc3RhdHVzJyxcbiAgICAgICAgJ3RhbGVudCcsXG4gICAgICAgICd3ZWFwb24nXG4gICAgICBdLmluY2x1ZGVzKGl0ZW0udHlwZSlcbiAgICApIHtcbiAgICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbiddID0ge1xuICAgICAgICAgIHZhbHVlOiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbixcbiAgICAgICAgICBrZWVwZXI6ICcnXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbiA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24gPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24nXSA9IHtcbiAgICAgICAgICB2YWx1ZTogJycsXG4gICAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXInXSA9ICcnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtRXhwZXJpZW5jZSAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlJ10gPSAwXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtQXJ0d29yayAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGxldCBpbWFnZSA9IFN0cmluZyhpdGVtLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5pdGVtcykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID0gaXRlbS5zeXN0ZW0uaXRlbXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPSBpdGVtLnN5c3RlbS5za2lsbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW28sIGddIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLmdyb3VwcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZy5za2lsbHMpKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9IGl0ZW0uc3lzdGVtLmdyb3Vwc1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXVtvXS5za2lsbHNba10uaW1nID1cbiAgICAgICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5zcGVsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWxscyddID0gaXRlbS5zeXN0ZW0uc3BlbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdhcmNoZXR5cGUnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5za2lsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtU3BlbGxBdXRvbWF0ZWQgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnc3BlbGwnICYmIHR5cGVvZiBpdGVtLnN5c3RlbS5jb3N0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNhc3RpbmdUaW1lJ10gPSBpdGVtLnN5c3RlbS5jYXN0aW5nVGltZSB8fCAnJ1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLmhpdFBvaW50cyddID0gaXRlbS5zeXN0ZW0uY29zdC5ocCB8fCAwXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29zdHMubWFnaWNQb2ludHMnXSA9IGl0ZW0uc3lzdGVtLmNvc3QubXAgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLnNhbml0eSddID0gaXRlbS5zeXN0ZW0uY29zdC5zYW4gfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLnBvd2VyJ10gPSBpdGVtLnN5c3RlbS5jb3N0LnBvdyB8fCAwXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29zdHMub3RoZXJzJ10gPSAnJ1xuXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1jb3N0J10gPSBudWxsXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT11bmlkZW50aWZpZWQnXSA9IG51bGxcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi4tPW5vdGVzJ10gPSBudWxsXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEJvb2sgYXV0b21hdGlvbiB3YXMgaW5jcmVhc2VkIGluIDAuNi41XG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpdGVtIERvY3VtZW50IGRhdGEgZXhwcmVzc2VkIGFzIGEgcGxhaW4gb2JqZWN0XG4gICAqIEBwYXJhbSB7anNvbn0gdXBkYXRlRGF0YSBEaWZmZXJlbnRpYWwgdXBkYXRlIGRhdGEgd2hpY2ggbW9kaWZpZXMgdGhlIGV4aXN0aW5nIHZhbHVlcyBvZiB0aGlzIGRvY3VtZW50IGRhdGFcbiAgICogQHJldHVybnMge2pzb259IERpZmZlcmVudGlhbCB1cGRhdGUgZGF0YSB3aGljaCBtb2RpZmllcyB0aGUgZXhpc3RpbmcgdmFsdWVzIG9mIHRoaXMgZG9jdW1lbnQgZGF0YVxuICAgKi9cbiAgc3RhdGljIF9taWdyYXRlSXRlbUJvb2tBdXRvbWF0ZWQgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnYm9vaycpIHtcbiAgICAgIC8qKiBJZiBib29rIHN0aWxsIGhhcyB0aGUgc3lzdGVtLmRlc2NyaXB0aW9uLnVuaWRlbnRpZmllZCBrZXkgdGhlbiBydW4gbWlncmF0ZSBvbiBpdCAqL1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8qKiBGaWVsZHMgY2hhbmdlZCBmcm9tIG51bGwgZGVmYXVsdCB0byBlbXB0eSBzdHJpbmcgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF1dGhvciddID0gaXRlbS5zeXN0ZW0uYXV0aG9yIHx8ICcnXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kYXRlJ10gPSBpdGVtLnN5c3RlbS5kYXRlIHx8ICcnXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5sYW5ndWFnZSddID0gaXRlbS5zeXN0ZW0ubGFuZ3VhZ2UgfHwgJydcbiAgICAgICAgLyoqIEZpZWxkcyBjaGFuZ2VkIGZyb20gbnVsbC9zdHJpbmcgZGVmYXVsdHMgdG8gaW50ZWdlciB0byAwICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zYW5pdHlMb3NzJ10gPSBpdGVtLnN5c3RlbS5zYW5Mb3NzIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm15dGhvc1JhdGluZyddID0gTnVtYmVyKGl0ZW0uc3lzdGVtLm15dGhvc1JhdGluZykgfHwgMFxuICAgICAgICAvKiogUmVuYW1lZC9tb3ZlZCBmaWVsZHMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbnRlbnQnXSA9IGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLnVuaWRlbnRpZmllZFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi5ub3Rlc1xuICAgICAgICAvKiogTmV3IGZpZWxkcyBzZXQgZGVmYXVsdCB2YWx1ZXMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRpZmZpY3VsdHlMZXZlbCddID0gJ3JlZ3VsYXInXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5mdWxsU3R1ZGllcyddID0gMFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaW5pdGlhbFJlYWRpbmcnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5rZWVwZXJOb3RlcyddID0gJydcbiAgICAgICAgLyoqIE1vdmUgYW5kIHJlbmFtZSBnYWluIGZpZWxkcyB0byBnYWlucywgZGVmYXVsdCBOYU4gdmFsdWVzIHRvIDAgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuaW5pdGlhbCddID1cbiAgICAgICAgICBOdW1iZXIoaXRlbS5zeXN0ZW0uZ2Fpbi5jdGh1bGh1TXl0aG9zLkNNSSkgfHwgMFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ2FpbnMuY3RodWxodU15dGhvcy5maW5hbCddID1cbiAgICAgICAgICBOdW1iZXIoaXRlbS5zeXN0ZW0uZ2Fpbi5jdGh1bGh1TXl0aG9zLkNNRikgfHwgMFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ2FpbnMub2NjdWx0J10gPSBOdW1iZXIoaXRlbS5zeXN0ZW0uZ2Fpbi5vY2N1bHQpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLm90aGVycyddID0gW11cbiAgICAgICAgLyoqIE5ldyBzdHVkeSBmaWVsZCBkZWZhdWx0IG5lY2Vzc2FyeSB0byBpbnRlZ2VyIG9mIHdlZWtzU3R1ZHlUaW1lIG9yIDAgaWYgbm90IHNldCAqL1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3R1ZHknXSA9IHtcbiAgICAgICAgICBuZWNlc3Nhcnk6IE51bWJlcihpdGVtLnN5c3RlbS53ZWVrc1N0dWR5VGltZSkgfHwgMCxcbiAgICAgICAgICBwcm9ncmVzczogMCxcbiAgICAgICAgICB1bml0czogJ0NvQzcud2Vla3MnXG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJlbW92ZSBvbGQga2V5cyAqL1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1zYW5Mb3NzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPXdlZWtzU3R1ZHlUaW1lJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWdhaW4nXSA9IG51bGxcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLi09dW5pZGVudGlmaWVkJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi4tPW5vdGVzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy4tPW90aGVyJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPXByb3BlcnRpZXMnXSA9IG51bGxcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09ZmxhZ3MnXSA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1Cb29rVW5pdHMgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnYm9vaycpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGl0ZW0uc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgdHlwZW9mIGl0ZW0uc3lzdGVtLnN0dWR5LnVuaXRzID09PSAndW5kZWZpbmVkJ1xuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zdHVkeS51bml0cyddID0gJ0NvQzcud2Vla3MnXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUtlZXBlck5vdGVzTWVyZ2UgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnc3BlbGwnIHx8IGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLm5vdGVzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPVxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyICsgaXRlbS5zeXN0ZW0ubm90ZXNcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSBpdGVtLnN5c3RlbS5ub3Rlc1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPW5vdGVzJ10gPSBudWxsXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmtlZXBlck5vdGVzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXInXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPVxuICAgICAgICAgICAgaXRlbS5zeXN0ZW0ua2VlcGVyTm90ZXMgKyB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ11cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSBpdGVtLnN5c3RlbS5rZWVwZXJOb3Rlc1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWtlZXBlck5vdGVzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUVtYmVkZGVkdjEwIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKSB7XG4gICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtvLCBnXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5ncm91cHMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGcuc2tpbGxzKSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmdyb3Vwc1tvXS5za2lsbHNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBpdGVtLnN5c3RlbS5ncm91cHNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFsnc2V0dXAnXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5pdGVtcykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5pdGVtc1trXS5zeXN0ZW0gPSB2LmRhdGFcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ2FyY2hldHlwZScsICdvY2N1cGF0aW9uJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2LnN5c3RlbSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsc1trXS5zeXN0ZW0gPSB2LmRhdGFcbiAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPSBpdGVtLnN5c3RlbS5za2lsbHNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFsnYm9vayddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNwZWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVsbHNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWxscyddID0gaXRlbS5zeXN0ZW0uc3BlbGxzXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbXYxMCAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgKHR5cGVvZiBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IGl0ZW0uc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgKSB7XG4gICAgICB1cGRhdGVEYXRhLm5hbWUgPSBpdGVtLm5hbWVcbiAgICAgIC8vIFVwZGF0ZSBQb2xpc2ggZG9kZ2UgdHJhbnNsYXRpb24gZnJvbSBVbmlraSB0byBVbmlrIHRvIG1hdGNoIHVwZGF0ZSB0byBsYW5nL3BsLmpzb25cbiAgICAgIGlmICh1cGRhdGVEYXRhLm5hbWUgPT09ICdVbmlraScpIHtcbiAgICAgICAgdXBkYXRlRGF0YS5uYW1lID0gJ1VuaWsnXG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgIHVwZGF0ZURhdGEubmFtZSxcbiAgICAgICAgdHlwZW9mIGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uPy5ncm91cCA9PT0gJ3N0cmluZydcbiAgICAgICAgICA/IGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uLmdyb3VwXG4gICAgICAgICAgOiBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgKVxuICAgICAgdXBkYXRlRGF0YS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxsTmFtZSddID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdzZXR1cCcpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLml0ZW1zKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdi50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICAodHlwZW9mIHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdi5zeXN0ZW0uc2tpbGxOYW1lID09PSAnJylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID0gaXRlbS5zeXN0ZW0uaXRlbXNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUgPSB2Lm5hbWVcbiAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUgPSAnVW5paydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10ubmFtZSxcbiAgICAgICAgICAgICAgdHlwZW9mIHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uPy5ncm91cCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uLmdyb3VwXG4gICAgICAgICAgICAgICAgOiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdvY2N1cGF0aW9uJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdi50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICAodHlwZW9mIHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdi5zeXN0ZW0uc2tpbGxOYW1lID09PSAnJylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPSBpdGVtLnN5c3RlbS5za2lsbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUgPT09ICdVbmlraScpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUgPSAnVW5paydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPVxuICAgICAgICAgICAgICBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBbbywgZ10gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZ3JvdXBzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnLnNraWxscykpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgICAodHlwZW9mIHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdi5zeXN0ZW0uc2tpbGxOYW1lID09PSAnJylcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBpdGVtLnN5c3RlbS5ncm91cHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPSB2Lm5hbWVcbiAgICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXVtvXS5za2lsbHNba10ubmFtZSA9PT0gJ1VuaWtpJykge1xuICAgICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXVtvXS5za2lsbHNba10ubmFtZSA9ICdVbmlrJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUsXG4gICAgICAgICAgICAgICAgdHlwZW9mIHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uPy5ncm91cCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXVtvXS5za2lsbHNba10uc3lzdGVtLnNraWxsTmFtZSA9XG4gICAgICAgICAgICAgICAgcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXVtvXS5za2lsbHNba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgICBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdi50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICAodHlwZW9mIHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdi5zeXN0ZW0uc2tpbGxOYW1lID09PSAnJylcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPSBpdGVtLnN5c3RlbS5za2lsbHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUgPT09ICdVbmlraScpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUgPSAnVW5paydcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPVxuICAgICAgICAgICAgICBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1FcmFzIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5lcmFzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gMTkyMCA9PiBzdGFuZGFyZFxuICAgICAgLy8gbWRybiA9PiBtb2Rlcm4gLyBtb2Rlcm5QdWxwXG4gICAgICAvLyBwdWxwID0+IHB1bHBcbiAgICAgIC8vIGRkdHMgPT4gZG93bkRhcmtlclRyYWlscyAvIGRvd25EYXJrZXJUcmFpbHNQdWxwXG4gICAgICAvLyBkcmthID0+IGRhcmtBZ2VzIC8gZGFya0FnZXNQdWxwXG4gICAgICAvLyBnbGl0ID0+IGdhc0xpZ2h0XG4gICAgICAvLyBudmN0ID0+IGludmljdHVzXG4gICAgICBsZXQgZXJhcyA9IHt9XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5lcmFzKSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHRydWUgfHwgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycgJiYgdHlwZW9mIHZhbHVlLnNlbGVjdGVkICE9PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgY2FzZSAnMTkyMCc6XG4gICAgICAgICAgICAgIGVyYXMuc3RhbmRhcmQgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdtZHJuJzpcbiAgICAgICAgICAgICAgZXJhcy5tb2Rlcm4gPSB0cnVlXG4gICAgICAgICAgICAgIGVyYXMubW9kZXJuUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3B1bHAnOlxuICAgICAgICAgICAgICBlcmFzLnB1bHAgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdkZHRzJzpcbiAgICAgICAgICAgICAgZXJhcy5kb3duRGFya2VyVHJhaWxzID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLmRvd25EYXJrZXJUcmFpbHNQdWxwID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnZHJrYSc6XG4gICAgICAgICAgICAgIGVyYXMuZGFya0FnZXMgPSB0cnVlXG4gICAgICAgICAgICAgIGVyYXMuZGFya0FnZXNQdWxwID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnZ2xpdCc6XG4gICAgICAgICAgICAgIGVyYXMuZ2FzTGlnaHQgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdudmN0JzpcbiAgICAgICAgICAgICAgZXJhcy5pbnZpY3R1cyA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdzZXR1cCcpIHtcbiAgICAgICAgLy8gSWYgbW9yZSB0aGFuIG9uZSBlcmEgdGFrZSB0aGUgZmlyc3Qgb25lIG9ubHlcbiAgICAgICAgY29uc3Qga2V5ID0gT2JqZWN0LmtleXMoZXJhcylbMF1cbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgIGVyYXMgPSB7IFtrZXldOiB0cnVlIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiBubyBlcmFzIGRlZmF1bHQgdG8gc3RhbmRhcmRcbiAgICAgICAgICBlcmFzID0geyBzdGFuZGFyZDogdHJ1ZSB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IENvQzcgPSB7XG4gICAgICAgIGNvY2lkRmxhZzoge1xuICAgICAgICAgIGlkOiAnJyxcbiAgICAgICAgICBsYW5nOiBnYW1lLmkxOG4ubGFuZyxcbiAgICAgICAgICBwcmlvcml0eTogMCxcbiAgICAgICAgICBlcmFzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgaXRlbS5mbGFncz8uQ29DNyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaXRlbS5mbGFncy5Db0M3ID0gQ29DN1xuICAgICAgICB1cGRhdGVEYXRhWydmbGFncy5Db0M3J10gPSBDb0M3XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBpdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcgPSBDb0M3LmNvY2lkRmxhZ1xuICAgICAgICB1cGRhdGVEYXRhWydmbGFncy5Db0M3LmNvY2lkRmxhZyddID0gQ29DNy5jb2NpZEZsYWdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyA9IENvQzcuY29jaWRGbGFnLmVyYXNcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyddID0gQ29DNy5jb2NpZEZsYWcuZXJhc1xuICAgICAgfVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09ZXJhcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yQXJ0d29yayAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcoYWN0b3IuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBhY3Rvci5wcm90b3R5cGVUb2tlbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlPy5zcmMgIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBpbWFnZSA9IFN0cmluZyhhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyYykubWF0Y2goXG4gICAgICAgIC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvXG4gICAgICApXG4gICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsncHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMnXSA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGFjdG9yLmVmZmVjdHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhhY3Rvci5lZmZlY3RzKSkge1xuICAgICAgICBpbWFnZSA9IFN0cmluZyh2Lmljb24pLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGEuZWZmZWN0cyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0cyA9IGFjdG9yLmVmZmVjdHNcbiAgICAgICAgICB9XG4gICAgICAgICAgdXBkYXRlRGF0YS5lZmZlY3RzW2tdLmljb24gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yS2VlcGVyTm90ZXMgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKGFjdG9yLnR5cGUpKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uZGVzY3JpcHRpb24gPT09ICd1bmRlZmluZWQnXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uJ10gPSB7XG4gICAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlQWN0b3JNb25ldGFyeSAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicgJiYgdHlwZW9mIGFjdG9yLnN5c3RlbS5jcmVkaXQ/Lm11bHRpcGxpZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuc3ltYm9sJ10gPSBhY3Rvci5zeXN0ZW0uY3JlZGl0Py5tb25ldGFyeVN5bWJvbCA/IGFjdG9yLnN5c3RlbS5jcmVkaXQubW9uZXRhcnlTeW1ib2wgOiAnJCdcbiAgICAgIGlmICh1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuc3ltYm9sJ10udG9TdHJpbmcoKS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS5zeW1ib2wnXSA9ICckJ1xuICAgICAgfVxuICAgICAgY29uc3QgbXVsdGlwbGllciA9IHBhcnNlSW50KGFjdG9yLnN5c3RlbS5jcmVkaXQubXVsdGlwbGllcikgPyBwYXJzZUludChhY3Rvci5zeXN0ZW0uY3JlZGl0Lm11bHRpcGxpZXIpIDogMVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnNwZW50J10gPSBhY3Rvci5zeXN0ZW0uY3JlZGl0LnNwZW50XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuYXNzZXRzRGV0YWlscyddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5hc3NldHNEZXRhaWxzXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuc3BlbmRpbmdMZXZlbCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5zcGVuZGluZ0xldmVsXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuY2FzaCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5jYXNoXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuYXNzZXRzJ10gPSBhY3Rvci5zeXN0ZW0uY3JlZGl0LmFzc2V0c1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyddID0gZHVwbGljYXRlKGFjdG9yLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMpXG4gICAgICBpZiAobXVsdGlwbGllciAhPT0gMSkge1xuICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSkge1xuICAgICAgICAgIHZhbHVlLmNhc2hWYWx1ZSA9IG11bHRpcGxpZXIgKiB2YWx1ZS5jYXNoVmFsdWVcbiAgICAgICAgICB2YWx1ZS5hc3NldHNWYWx1ZSA9IG11bHRpcGxpZXIgKiB2YWx1ZS5hc3NldHNWYWx1ZVxuICAgICAgICAgIHZhbHVlLnNwZW5kaW5nVmFsdWUgPSBtdWx0aXBsaWVyICogdmFsdWUuc3BlbmRpbmdWYWx1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1jcmVkaXQnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvclNhbkxvc3NSZWFzb25zIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChcbiAgICAgIGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmXG4gICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtPy5lbmNvdW50ZXJlZENyZWF0dXJlcyAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IGdyb3VwcyA9IHt9XG4gICAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiBhY3Rvci5zeXN0ZW0uZW5jb3VudGVyZWRDcmVhdHVyZXMpIHtcbiAgICAgICAgaWYgKHNhbml0eUxvc3NFdmVudC50b3RhbExvc3MgPiAwKSB7XG4gICAgICAgICAgZ3JvdXBzW3Nhbml0eUxvc3NFdmVudC5uYW1lXSA9IE1hdGgubWF4KFxuICAgICAgICAgICAgZ3JvdXBzW3Nhbml0eUxvc3NFdmVudC5uYW1lXSA/PyAwLFxuICAgICAgICAgICAgc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zc1xuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gZ3JvdXBzKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMucHVzaCh7XG4gICAgICAgICAgdHlwZTogbmFtZSxcbiAgICAgICAgICB0b3RhbExvc3M6IGdyb3Vwc1tuYW1lXSxcbiAgICAgICAgICBpbW11bml0eTogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJ10gPSBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1lbmNvdW50ZXJlZENyZWF0dXJlcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yU3RhdHVzRWZmZWN0QWN0aXZlIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAodHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXMgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5jb25kaXRpb25zID09PSAndW5kZWZpbmVkJylcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5jcml0aWNhbFdvdW5kcy52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudW5jb25zY2lvdXMudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmR5aW5nLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5kZWFkLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5wcm9uZS52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudGVtcG9JbnNhbmUudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmluZGVmSW5zYW5lLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmNyaXRpY2FsV291bmRzPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5jcml0aWNhbFdvdW5kcy52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5jcml0aWNhbFdvdW5kcy52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udW5jb25zY2lvdXM/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnVuY29uc2Npb3VzLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnVuY29uc2Npb3VzLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5keWluZz8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uZHlpbmcudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuZHlpbmcudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmRlYWQ/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmRlYWQudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuZGVhZC52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8ucHJvbmU/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnByb25lLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnByb25lLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy50ZW1wb0luc2FuZT8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udGVtcG9JbnNhbmUudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMudGVtcG9JbnNhbmUudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmluZGVmSW5zYW5lPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5pbmRlZkluc2FuZS52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5pbmRlZkluc2FuZS52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgYWN0b3IuZWZmZWN0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBlZmZlY3RzID0gYWN0b3IuZWZmZWN0c1xuICAgICAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBlZmZlY3RzLmxlbmd0aDsgaSA8IGltOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGVmZmVjdCA9IGVmZmVjdHNbaV1cbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gZWZmZWN0Lmljb24ubWF0Y2goXG4gICAgICAgICAgICAgIC9cXC8oaGFuZ2luZy1zcGlkZXJ8dGVudGFjbGVzLXNrdWxsfGFybS1zbGluZ3xoZWFydC1iZWF0c3x0b21ic3RvbmV8a25vY2tlZC1vdXQtc3RhcnN8ZmFsbGluZ3xza3VsbHx1bmNvbnNjaW91cylcXC4vXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAobWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgbGV0IHN0YXR1c0lkID0gJydcbiAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hhbmdpbmctc3BpZGVyJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3RlbXBvSW5zYW5lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICd0ZW50YWNsZXMtc2t1bGwnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnaW5kZWZJbnNhbmUnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FybS1zbGluZyc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdjcml0aWNhbFdvdW5kcydcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnaGVhcnQtYmVhdHMnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnZHlpbmcnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RvbWJzdG9uZSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnc2t1bGwnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnZGVhZCdcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAna25vY2tlZC1vdXQtc3RhcnMnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3VuY29uc2Npb3VzJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3VuY29uc2Npb3VzJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdmYWxsaW5nJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ3Byb25lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc3RhdHVzSWQgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1cGRhdGVEYXRhW2BzeXN0ZW0uY29uZGl0aW9ucy4ke3N0YXR1c0lkfS52YWx1ZWBdKSB7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uY29uZGl0aW9ucy4ke3N0YXR1c0lkfS52YWx1ZWBdID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVmZmVjdC5mbGFncy5jb3JlPy5zdGF0dXNJZCAhPT0gc3RhdHVzSWQpIHtcbiAgICAgICAgICAgICAgICAgIGVmZmVjdHNbaV0gPSBtZXJnZU9iamVjdChlZmZlY3QsIHtcbiAgICAgICAgICAgICAgICAgICAgZmxhZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICBjb3JlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNJZFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhLmVmZmVjdHMgPSBlZmZlY3RzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPXN0YXR1cyddID0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlQWN0b3JOcGNDcmVhdHVyZSAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoWyducGMnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSAmJiB0eXBlb2YgYWN0b3Iuc3lzdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3BlY2lhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWNpYWwnXSA9IHtcbiAgICAgICAgICBjaGVja1Bhc3NlZDogbnVsbCxcbiAgICAgICAgICBjaGVja0ZhaWxsZWQ6IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0YWNrc1BlclJvdW5kID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0YWNrc1BlclJvdW5kJ10gPSAxXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvckNoYXJhY3RlclNhbml0eSAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBhY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJyAmJlxuICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbT8uYXR0cmlicz8uc2FuICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgY29uc3Qgb25lRmlmdGhTYW5pdHkgPSBNYXRoLmNlaWwoYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIC8gNSlcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJ10gPSAwXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLnNhbi5vbmVGaWZ0aFNhbml0eSddID0gJyAvICcgKyBvbmVGaWZ0aFNhbml0eVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnXSA9IDBcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC52YWx1ZSA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC52YWx1ZSddID0gMFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC5tYXggPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbC5tYXggPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4J10gPSBvbmVGaWZ0aFNhbml0eVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA9PT0gbnVsbFxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSddID0gb25lRmlmdGhTYW5pdHlcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLm1heCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC5tYXggPT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMubXAubWF4J10gPSBvbmVGaWZ0aFNhbml0eVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0ubm90ZXMgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5ub3RlcyA9PT0gbnVsbFxuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5ub3RlcyddID0gJydcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZU1hY3JvQXJ0d29yayAodGFibGUsIHVwZGF0ZURhdGEpIHtcbiAgICBjb25zdCBpbWFnZSA9IFN0cmluZyh0YWJsZS5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZVRhYmxlQXJ0d29yayAodGFibGUsIHVwZGF0ZURhdGEpIHtcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcodGFibGUuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKHRhYmxlLnJlc3VsdHMpKSB7XG4gICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhLnJlc3VsdHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YS5yZXN1bHRzID0gdGFibGUucmVzdWx0c1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZURhdGEucmVzdWx0c1trXS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZVRva2VuQXJ0d29yayAodG9rZW4sIHVwZGF0ZURhdGEpIHtcbiAgICBjb25zdCBpbWFnZSA9IFN0cmluZyh0b2tlbi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG4vKipcbiAqIG5hbWVDaGFyYWN0ZXJzIGxpc3Qgb2YgY2hhcmFjdGVycyB0aGF0IGNhbiBiZSBwYXJ0IG9mIGEgW10gZm9yIGNoYXJhY3Rlciwgc2tpbGwsIG9yIHdlYXBvbiBuYW1lcyB1c2VkIGluIGJyYWNrZXQgZXhwcmVzc2lvbi5cbiAqXG4gKiBcImtleXMuPGxhbmd1YWdlPi5kZXNjcmlwdGlvblwiIGxhbmcga2V5IHRvIHNob3cgaW4gdGhlIGxhbmd1YWdlIHNlbGVjdGlvbiBkaWFsb2cgYm94LlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZGJOb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIERhbWFnZSBCb251cyBlLmcuIERCOiBcImRiTm9uZVwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uYXJtb3JOb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIEFybW91ciBCb251cyBlLmcuIEFybW9yOiBcImFybW9yTm9uZVwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uYXR0YWNrc1BlclJvdW5kTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBhdHRhY2tzIGUuZy4gQXR0YWNrcyBQZXIgUm91bmQ6IFwiYXR0YWNrc1BlclJvdW5kTm9uZVwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2FuTG9zc05vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gc2FuaXR5IGxvc3MgZS5nLiBTQU4gbG9zczogXCJzYW5Mb3NzTm9uZVwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZnVsbGRiXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIGRhbWFnZSBib251cyBpbiBhdHRyaWJ1dGVzIGFuZCB3ZWFwb24gZGFtYWdlIGUuZy4gREI6IFwiZnVsbGRiXCIgLyBXZWFwb24gNTAlICgyNS8xMCksIGRhbWFnZSAxRDYgKyBcImZ1bGxkYlwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uaGFsZmRiXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIGhhbGYgZGFtYWdlIGJvbnVzIGluIHdlYXBvbiBkYW1hZ2UgZS5nLiBXZWFwb24gNTAlICgyNS8xMCksIGRhbWFnZSAxRDYgKyBcImhhbGZkYlwiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvbkNvbWJhdHNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBjb21iYXQgLyB3ZWFwb24gc2VjdGlvbiBvZiB0ZXh0LlxuICogXCJrZXlzLjxsYW5ndWFnZT4ubmV3Q29tYmF0SGVhZGVyXCIgSWYgdGhlcmUgaXMgbm8gY29tYmF0IC8gd2VhcG9uIHNlY3Rpb24sIGFkZCB0aGlzIHNlY3Rpb24gd2VyZSBpdCBwcm9iYWJseSBpcywgdGhpcyBuZWVkcyB0byBtYXRjaGVkIGJ5IFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Db21iYXRzXCIuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uU2tpbGxzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgc2tpbGxzIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25MYW5nYXVnZXNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBsYW5ndWFnZXMgc2VjdGlvbiBvZiB0ZXh0LlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvblNwZWxsc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIHNwZWxscyBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5oYW5kZ3VuXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIGhhbmRndW4gdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnJpZmxlXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIHJpZmxlIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zbWJcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgc3VibWFjaGluZSBndW4gdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+Lm1hY2hpbmVHdW5cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIHdlYXBvbiBuYW1lIGlzIGEgbWFjaGluZSBndW4gdHlwZS5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmxhdW5jaGVkXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIGxhdW5jaGVkIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5leGFtcGxlXCIgU3RyaW5nIHRoYXQgc2hvdWxkIHNob3cgYXMgYSBwbGFjZWhvbGRlciBleGFtcGxlLlxuICpcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYWdlXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBhZ2UsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8YWdlPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ub2NjdXBhdGlvblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgb2NjdXBhdGlvbiwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxvY2N1cGF0aW9uPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc3RyXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzdHJlbmd0aCBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxzdHI+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5jb25cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbnN0aXR1dGlvbiBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxjb24+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zaXpcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNpemUgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c2l6Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uaW50XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBpbnRlbGxpZ2VuY2UgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8aW50Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ucG93XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBwb3dlciBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxwb3c+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5kZXhcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGRleHRlcml0eSBjaGFyYWN0ZXJpc3RpYywgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxkZXg+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5hcHBcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGFwcGVhcmFuY2UgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8YXBwPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uZWR1XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBlZHVjYXRpb24gY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZWR1Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2FuXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzYW5pdHkgcG9pbnRzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxzYW4+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5ocFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgaGl0IHBvaW50cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8aHA+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5tcFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgbWFnaWMgcG9pbnRzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxtcD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmRiXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBkYW1hZ2UgYm9udXMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGRiPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5kYk5vbmVcIiB0aGVuIDAuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmJ1aWxkXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBidWlsZCBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8YnVpbGQ+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5hcm1vclwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZGFtYWdlIGJvbnVzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxkYj4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uYXJtb3JOb25lXCIgdGhlbiAwLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5tb3ZcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG1vdmVtZW50IHJhdGUgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG1vdj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lmxja1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgbHVjayBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bGNrPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYXR0YWNrc1BlclJvdW5kXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBhdHRhY2tzIHBlciByb3VuZCwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxhdHRhY2tzUGVyUm91bmQ+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LmF0dGFja3NQZXJSb3VuZE5vbmVcIiB0aGVuIDAuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNhbkxvc3NcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIHNhbiBsb3NzIG1pbi9tYXgsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c2FuTG9zcz4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uc2FuTG9zc05vbmVcIiB0aGVuIG5vbmUuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LndlYXBvblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24sIG5hbWVkIGNhcHR1cmluZyBncm91cCB3ZWFwb24gPG5hbWU+LCBvcHRpb25hbCA8cGVyY2VudGFnZT4sIGFuZCA8ZGFtYWdlPi4gRGFtYWdlIGNhbiBjb250YWluIFwia2V5cy48bGFuZ3VhZ2U+LmZ1bGxkYlwiIGFuZCBcImtleXMuPGxhbmd1YWdlPi5oYWxmZGJcIi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ud2VhcG9uRG9kZ2VcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uIGRvZGdlIHNraWxsLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG5hbWU+IGFuZCA8cGVyY2VudGFnZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNraWxsXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBza2lsbCBzZWN0aW9uIHNraWxsIG5hbWUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bmFtZT4gYW5kIDxwZXJjZW50YWdlPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uZ3Vlc3NTdGFydENvbWJhdFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiBpZiB0aGVyZSBpcyBubyBjb21iYXQgc2VjdGlvbiBmaW5kIHRoZXNlIGFyZSBsaWtlbHkgdG8gYmUgdGhlIGZpcnN0IHdlYXBvbiBuYW1lLCBcImtleXMuPGxhbmd1YWdlPi5uZXdDb21iYXRIZWFkZXJcIiBpcyB0aGVuIGFkZGVkIGJlZm9yZSBpdCB0byBnZXQgdGhlIGdyb3Vwc1xuICpcbiAqIFRoZXNlIHNob3VsZCBub3QgYmUgZWRpdGVkIGFzIHRoZXkgc2hvdWxkIHdvcmsgYXMgaXNcbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubmFtZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgbmFtZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxuYW1lPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2VjdGlvbnNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gc3BsaXQgdGV4dCBpbnRvIGNvbWJhdCwgc2tpbGwsIGxhbmd1YWdlLCBhbmQgc3BlbGxzIHNlY3Rpb25cbiAqXG4gKiBJZiB0aGVyZSBpcyBuZXcgZnVuY3Rpb25hbGl0eSBjaGVjayBmb3IgdGhpcyBzdHJpbmcgaW4gdGhlIHRyYW5zbGF0aW9ucyAvIGtleXMgZm9yIHlvdXIgbGFuZ3VhZ2UgXCJORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRURcIlxuICovXG5jb25zdCBuYW1lQ2hhcmFjdGVycyA9XG4gICdcXFxcdTMwMDBcXFxcdTM0MDAtXFxcXHU0REJGXFxcXHU0RTAwLVxcXFx1OUZGRlxcXFx3XFxcXChcXFxcKVxcXFwtXFxcXC8mXCJcXCcnICtcbiAgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChcbiAgICAnYcyBZcyBacyBb8yBw6DDqMOsw7LDucOAw4jDjMOSw5nDocOpw63Ds8O6w73DgcOJw43Dk8Oaw53DosOqw67DtMO7w4LDisOOw5TDm8Ojw7HDtcODxIDDkcOVw6TDq8Ovw7bDvMO/w4TDi8OPw5bDnMW4w6DDqMOnw4fDn8OYw7jDhcOlw4bDpsWT4oCc4oCdwqvCu8SFxIfEmcWCxYTDs8WbxbrFvMSExIbEmMWBxYPDk8WaxbnFuydcbiAgKVxuXG5jb25zdCBrZXlzID0ge1xuICBlbjoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5FbmdsaXNoJyxcbiAgICBkYk5vbmU6ICdub25lJyxcbiAgICBhcm1vck5vbmU6ICdub25lJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcbiAgICBmdWxsZGI6ICcoJyArICdEYW1hZ2UgQm9udXN8REInICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fGhhbGYnICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdjb21iYXR8ZmlnaHRpbmcgYXR0YWNrcycgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXQnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnc2tpbGxzJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdsYW5ndWFnZXMnICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ3NwZWxscycgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyBHdW58UmV2b2x2ZXJ8UGlzdG9sfEhhbmRndW58RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICsgJ1JpZmxlfFNob3RndW58Q2FyYmluZXxHYXVnZSB8TGVlLUVuZmllbGR8RWxlcGhhbnQnICsgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTdWJtYWNoaW5lIEd1bnxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyZW5hZGV8RHluYW1pdGUnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIGFnZSAyN1xcblNUUiA3NSBDT04gNjAgU0laIDgwIERFWCA3MCBBUFAgNjAgSU5UIDgwXFxuUE9XIDUwIEVEVSA4NSBTQU4gNTUgSFAgMTQgREI6IDFENFxcbkJ1aWxkOiAxIE1vdmU6IDcgTVA6IDEwIEx1Y2s6IDQwIEFybW9yOiAxXFxuQXR0YWNrcyBwZXIgcm91bmQ6IDMgU0FOIGxvc3M6IDFkNC8xZDhcXG5Db21iYXRcXG5CaXRlIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZGFtYWdlIDFEM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBkYW1hZ2UgMUQ4KzFcXG5Eb2RnZSA1MCUgKDI1LzEwKVxcblNraWxsc1xcbkFuaW1hbCBIYW5kbGluZyA1NSUsIENoYXJtIDMwJSwgRmlyc3QgQWlkIDI1JSwgRGlzZ3Vpc2UgMjAlLFxcbkxpc3RlbiA1MCUsIE1lZGljaW5lIDQ1JSwgUGVyc3VhZGUgMjUlLCBQc3ljaG9sb2d5IDc1JSxcXG5TY2llbmNlIChBc3Ryb25vbXkpIDkwJSwgU2NpZW5jZSAoQm90YW55KSAzNSUsIFNjaWVuY2UgKFpvb2xvZ3kpIDEwJSxcXG5TcG90IEhpZGRlbiAzNSUsIFN0ZWFsdGggMTAlXFxuTGFuZ3VhZ2VzOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5TcGVsbHM6IFN1bW1vbiBOUEMsIERpc3BlbCBOUEMuJ1xuICB9LFxuICBkZToge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5HZXJtYW4nLFxuICAgIGRiTm9uZTogJ25vbmUnLFxuICAgIGFybW9yTm9uZTogJ25vbmUnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdub25lJyxcbiAgICBzYW5Mb3NzTm9uZTogJ25vbmUnLFxuICAgIGRpY2VTaG9ydDogJ3d8ZCcsXG4gICAgZnVsbGRiOiAnKCcgKyAnU2NoYWRlbnNib251c3xTYicgKyAnKScsXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18MS8yIFNjaGFkZW5zYm9udXN8U2IvMicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ0thbXBmfEFuZ3JpZmY6fEFOR1JJRkZFJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0thbXBmJyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ0ZlcnRpZ2tlaXRlbicgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnU3ByYWNoZW4nICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ1phdWJlcicgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyBHdW58UmV2b2x2ZXJ8UGlzdG9sZXxIYW5kZ3VufERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnR2V3ZWhyfFNjaHJvdGZsaW50ZXxDYXJhYmluZXJ8S2FyYWJpbmVyfEdhdWdlIHxMZWUtRW5maWVsZHxFbGVmYW50ZW4nICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2VycycgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmFuYXRlfER5bmFtaXQnICsgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnVm9ybmFtZSBOYWNobmFtZVxcbkFsdGVyOiAyOVxcbkJlcnVmOiBFaW4gQmVydWZcXG5TVCA1MFxcbk1BIDYwXFxuS08gNjBcXG5HRSA2MFxcbkdSIDU1XFxuRVIgNjVcXG5JTiA4MFxcbkJJIDg1XFxuVHJlZmZlcnB1bmt0ZTogMTFcXG5HZWlzdGlnZSBTdGFiaWxpdMOkdDogNjBcXG5TY2hhZGVuc2JvbnVzOiAwXFxuU3RhdHVyOiAwXFxuTWFnaWVwdW5rdGU6IDEyXFxuQmV3ZWd1bmdzd2VpdGU6IDhcXG5cXG5LYW1wZlxcbkFuZ3JpZmZlOiAxXFxuSGFuZGdlbWVuZ2UgMzAlICgxNS82KSwgU2NoYWRlbiAxRDNcXG5NZXNzZXIgMzAlICgxNS82KSwgU2NoYWRlbiAxRDRcXG5BdXN3ZWljaGVuIDMwJSAoMTUvNilcXG5cXG5GZXJ0aWdrZWl0ZW46IEFudGhyb3BvbG9naWUgNzAlICgzNS8xNCksIEFyY2jDpG9sb2dpZSAzMCUgKDE1LzYpLCBCaWJsaW90aGVrc251dHp1bmcgNTAlICgyNS8xMCksIEVyc3RlIEhpbGZlIDUwJSAoMjUvMTApLCBGaW5hbnprcmFmdCA0MCUgKDIwLzgpLCBHZXNjaGljaHRlIDYwJSAoMzAvMTIpLCBLbGV0dGVybiA1MCUgKDI1LzEwKVxcblxcblNwcmFjaGVuOiBFbmdsaXNjaCA4NSUgKDQyLzE3KTsgRGV1dHNjaCA0NSUgKDIyLzkpLCBMYXRlaW4gNDUlICgyMi85KSdcbiAgfSxcbiAgcGw6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuUG9saXNoJyxcbiAgICBkYk5vbmU6ICdicmFrJyxcbiAgICBhcm1vck5vbmU6ICdicmFrJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnYnJhaycsXG4gICAgc2FuTG9zc05vbmU6ICdicmFrJyxcbiAgICBkaWNlU2hvcnQ6ICdrfGQnLFxuICAgIGZ1bGxkYjogJygnICsgJ01vZHlmaWthdG9yIE9icmHFvGXFhHxNTycgKyAnKScsXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18MS8yIE1PfE1PLzInICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdXYWxrYXxBdGFraScgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdXYWxrYScgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdVbWllasSZdG5vxZtjaScgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnSsSZenlraScgKyAnKVs6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnWmFrbMSZY2lhJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnIFBpc3RvbGV0fFJld29sd2VyfERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnS2FyYWJpbnxTdHJ6ZWxiYXxXaWF0csOzd2thfEdhcmFuZHxHYXVnZSB8TGVlLUVuZmllbGR8U3RyemVsYmEgbmEgc8WCb25pZScgK1xuICAgICAgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdQaXN0b2xldCBtYXN6eW5vd3l8VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2VycycgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW/Fgm90b3dhfEdyYW5hdHxMYXNrYSBkeW5hbWl0dXxEeW5hbWl0JyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ1ByenlrxYJhZG93YSBwb3N0YcSHLCAyNyBsYXRcXG5CaWJsaW90ZWthcnpcXG5TIDc1IEtPTiA2MCBCQyA4MCBaUiA3MCBXWUcgNjAgSU5UIDgwXFxuTU9DIDUwIFdZSyA4NSBQIDU1IFBXIDE0IE1POiAxRDRcXG5LcnplcGE6IDEgUnVjaDogNyBQTTogMTAgU3pjesSZxZtjaWU6IDQwIFBhbmNlcno6IDFcXG5BdGFraSB3IHJ1bmR6aWU6IDMgVXRyYXRhIFBvY3p5dGFsbm/Fm2NpOiAxSzQvMUs4XFxuV2Fsa2FcXG5VZ3J5emllbmllIDUwJSAoMjUvMTApLCBvYnJhxbxlbmlhIDFLNlxcbldhbGthIDMwJSAoMTUvNiksIG9icmHFvGVuaWEgMUszXFxuRGVycmluZ2VyIDQwJSAoMjAvOCksIG9icmHFvGVuaWEgMUs4KzFcXG5VbmlrIDUwJSAoMjUvMTApXFxuVW1pZWrEmXRub8WbY2lcXG5UcmVzdXJhIFp3aWVyesSFdCA1NSUsIFVyb2sgT3NvYmlzdHkgMzAlLCBQaWVyd3N6YSBQb21vYyAyNSUsIFVrcnl3YW5pZSAyMCUsXFxuTmFzxYJ1Y2hpd2FuaWUgNTAlLCBNZWR5Y3luYSA0NSUsIFByemVrb255d2FuaWUgMjUlLCBQc3ljaG9sb2dpYSA3NSUsXFxuTmF1a2EgKEFzdHJvbm9taWEpIDkwJSwgTmF1a2EgKEJvdGFuaWthKSAzNSUsIE5hdWthIChab29sb2dpYSkgMTAlLFxcblNwb3N0cnplZ2F3Y3pvxZvEhyAzNSUsIFVrcnl3YW5pZSAxMCVcXG5KxJl6eWtpOiBBbmdpZWxza2kgODAlLCBFa2xvIDUlLlxcblpha2zEmWNpYTogUHJ6eXp3YW5pZSBOUEMsIE9kZXPFgmFuaWUgTlBDLidcbiAgfSxcbiAgZnI6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuRnJlbmNoJyxcbiAgICBkYk5vbmU6ICdBY3VuZScsXG4gICAgYXJtb3JOb25lOiAnKD86QWN1bmV8YXVjdW5lKScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ0FjdW5lJyxcbiAgICBzYW5Mb3NzTm9uZTogJ0FjdW5lJyxcbiAgICBmdWxsZGI6ICcoJyArICdCRHxCb251cyBhdXggZG9tbWFnZXN8SW1wYWN0fEltcCcgKyAnKScsXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18MS8yIEltcHxJbXAvMicgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ0NvbWJhdHxBcm1lc3xBdHRhcXVlcycgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdDb21iYXQnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnQ29tcMOpdGVuY2VzJyArICcoPzpcXFxccypcXFxcKFteXFxcXCldK1xcXFwpKT8pWzpcXG5dJyxcbiAgICBzZWN0aW9uTGFuZ2F1Z2VzOiAnXFxuKD86JyArICdMYW5ndWVzPycgKyAnKVxcXFxzKls6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnU29ydGlsw6hnZXNcXFxccyp8U29ydHMnICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdSZXZvbHZlcnxQaXN0b2xldHxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTogJyg/PHR5cGU+JyArICdDYXJhYmluZXxMZWUtRW5maWVsZHxGdXNpbCcgKyAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1NNR3xUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzfE1pdHJhaWxsZXVzZScgKyAnKScsXG4gICAgbGF1bmNoZWQ6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdCb29tZXJhbmcgZGUgZ3VlcnJlfEphdmVsaW5lfFBpZXJyZXxTaHVyaWtlbnxCw6J0b24gZGUgZHluYW1pdGV8Q29ja3RhaWwgTW9sb3RvdnxHcmVuYWRlIMOgIG1haW58TW9sb3RvdnxHcmVuYWRlfER5bmFtaXRlJyArXG4gICAgICAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdFeGFtcGxlIENoYXJhY3RlciwgMjcgYW5zXFxuRk9SIDc1IENPTiA2MCBUQUkgODAgREVYIDcwIEFQUCA2MCBJTlQgODBcXG5QT1UgNTAgw4lEVSA4NSBTQU4gNTUgUFYgMTQgQkQ6IDFENFxcbkNhcnJ1cmU6IDEgTXZ0OiA3IFBNOiAxMCBDaGFuY2U6IDQwIEFybXVyZTogMVxcbkF0dGFxdWVzIHBhciByb3VuZCAzIFBlcnRlIGRlIFNBTjogMWQ0LzFkOFxcbkF0dGFxdWVzXFxuQml0ZSA1MCUgKDI1LzEwKSwgZG9tbWFnZSAxRDZcXG5CcmF3bCAzMCUgKDE1LzYpLCBkb21tYWdlIDFEM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBkb21tYWdlIDFEOCsxXFxuRXNxdWl2ZXIgNTAlICgyNS8xMClcXG5Db21ww6l0ZW5jZXNcXG5BbmltYWwgSGFuZGxpbmcgNTUlLCBDaGFybSAzMCUsIEZpcnN0IEFpZCAyNSUsIERpc2d1aXNlIDIwJSxcXG5MaXN0ZW4gNTAlLCBNZWRpY2luZSA0NSUsIFBlcnN1YWRlIDI1JSwgUHN5Y2hvbG9neSA3NSUsXFxuU2NpZW5jZSAoQXN0cm9ub215KSA5MCUsIFNjaWVuY2UgKEJvdGFueSkgMzUlLCBTY2llbmNlIChab29sb2d5KSAxMCUsXFxuU3BvdCBIaWRkZW4gMzUlLCBTdGVhbHRoIDEwJVxcbkxhbmd1ZTogRW5nbGlzaCA4MCUsIEVrbG8gNSUuXFxuU29ydGlsw6hnZXM6IFN1bW1vbiBOUEMsIERpc3BlbCBOUEMuJ1xuICB9LFxuICBlczoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5TcGFuaXNoJyxcbiAgICBkYk5vbmU6ICduaW5ndW5hJyxcbiAgICBhcm1vck5vbmU6ICduaW5ndW5hJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbmluZ3VubycsXG4gICAgc2FuTG9zc05vbmU6ICdubycsXG4gICAgZnVsbGRiOiAnKCcgKyAnQkR8YmR8Ym9uaWZpY2FjacOzbiBkZSBkYcOxbycgKyAnKScsXG4gICAgaGFsZmRiOiAnKCcgKyAnwr18bWVkaW8gZGHDsW98bWl0YWR8ZGHDsW8gYSBsYSBtaXRhZCcgKyAnKScsXG4gICAgc2VjdGlvbkNvbWJhdHM6ICdcXG4oPzonICsgJ0NvbWJhdGV8QXJtYXMnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0ZScgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdIYWJpbGlkYWRlcycgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnSWRpb21hc3xMZW5ndWFqZXN8TGVuZ3VhcycgKyAnKVs6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnQ29uanVyb3N8SGVjaGl6b3MnICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICdSZXZvbHZlcnxQaXN0b2xhfERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnUmlmbGV8Q2FyYWJpbmF8TGVlLUVuZmllbGR8Q2F6YSBFbGVmYW50ZXN8RnVzaWx8RXNjb3BldGF8R2FsZ2F8UmVjb3J0YWRhJyArXG4gICAgICAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1YmZ1c2lsfFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnN8QW1ldHJhbGxhZG9yYScgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmFuYWRhfERpbmFtaXRhJyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ0V4YW1wbGUgQ2hhcmFjdGVyLCAyNyBhw7Fvc1xcbkZVRSA3NSBDT04gNjAgVEFNIDgwIERFUyA3MCBBUEEgNjAgSU5UIDgwXFxuUE9EIDUwIEVEVSA4NSBDT1IgNTUgUFYgMTQgQkQ6IDFENFxcbkNvcnB1bGVuY2lhOiAxIE1vdmltaWVudG86IDcgUE06IDEwIFN1ZXJ0ZTogNDAgQXJtYWR1cmE6IDFcXG5Ow7ptZXJvIGRlIEF0YXF1ZXMgMyBQw6lyZGlkYSBkZSBjb3JkdXJhOiAxZDQvMWQ4XFxuQ29tYmF0ZVxcbkJpdGUgNTAlICgyNS8xMCksIGRhw7FvIDFENlxcbkJyYXdsIDMwJSAoMTUvNiksIGRhw7FvIDFEM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBkYcOxbyAxRDgrMVxcbkVzcXVpdmFyIDUwJSAoMjUvMTApXFxuSGFiaWxpZGFkZXNcXG5BbmltYWwgSGFuZGxpbmcgNTUlLCBDaGFybSAzMCUsIEZpcnN0IEFpZCAyNSUsIERpc2d1aXNlIDIwJSxcXG5MaXN0ZW4gNTAlLCBNZWRpY2luZSA0NSUsIFBlcnN1YWRlIDI1JSwgUHN5Y2hvbG9neSA3NSUsXFxuU2NpZW5jZSAoQXN0cm9ub215KSA5MCUsIFNjaWVuY2UgKEJvdGFueSkgMzUlLCBTY2llbmNlIChab29sb2d5KSAxMCUsXFxuU3BvdCBIaWRkZW4gMzUlLCBTdGVhbHRoIDEwJVxcbklkaW9tYXM6IEVuZ2xpc2ggODAlLCBFa2xvIDUlLlxcbkNvbmp1cm9zOiBTdW1tb24gTlBDLCBEaXNwZWwgTlBDLidcbiAgfSxcbiAgJ3poLVRXJzoge1xuICAgIGRlc2NyaXB0aW9uOiAnQ29DNy5UcmFkaXRpb25hbENoaW5lc2UnLFxuICAgIGRiTm9uZTogJ25vbmUnLFxuICAgIGFybW9yTm9uZTogJ25vbmUnLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdub25lJyxcbiAgICBzYW5Mb3NzTm9uZTogJ25vbmUnLFxuICAgIGZ1bGxkYjogJygnICsgJ0RhbWFnZSBCb251c3xEQnzlgrflrrPliqDlgLwnICsgJyknLFxuICAgIC8qIE5FVyBLRVkgQkVMT1cgLSBUUkFOU0xBVElPTiBSRVFVSVJFRCAqL1xuICAgIGhhbGZkYjogJygnICsgJ8K9fGhhbGYnICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOlxuICAgICAgJ1xcbig/OicgKyAnY29tYmF0fGZpZ2h0aW5nIGF0dGFja3N85oiw6ayl5oqA6IO9fOaIsOmspeWIl+ihqHzmrablmagnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0JyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6XG4gICAgICAnXFxuKD86JyArICcoPzpTa2lsbHN85oqA6IO95YiX6KGoKScgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnTGFuZ3VhZ2VzfOiqnuiogCcgKyAnKVs6XFxuXScsXG4gICAgc2VjdGlvblNwZWxsczogJ1xcbig/OicgKyAnc3BlbGxzfOWSkuaWh+WIl+ihqHzlkpLmlocnICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICcg6YGC55m85qeNfFxcXFwuMjLnn63lj6Poh6rli5XmiYvmp418XFxcXC4yNeefreWPo+aJi+anjSjllq7nrqEpfFxcXFwuMzLmiJY3XFxcXC42NW1t5bem6Lyq5omL5qeNfFxcXFwuMzLmiJY3XFxcXC42NW1t6Ieq5YuV5omL5qeNfFxcXFwuMzU3IE1hZ251beW3pui8quaJi+anjXxcXFxcLjM45oiWOW1t5bem6Lyq5omL5qeNfFxcXFwuMzjoh6rli5XmiYvmp4186LKd6Zu35aGUTTl85qC85rSb5YWLMTd8OW1t6Ieq5YuV5omL5qeNfOmtr+agvFAwOHxcXFxcLjQx5bem6Lyq5omL5qeNfFxcXFwuNDTppqzmoLzljZflt6bovKrmiYvmp418XFxcXC40NeW3pui8quaJi+anjXxcXFxcLjQ16Ieq5YuV5omL5qeNfOaymea8oOS5i+m3uXxHdW58UmV2b2x2ZXJ8UGlzdG9sfEhhbmRndW58RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICfmraXmp4185Y2h6LOT5qeNfOWNiuiHquWLleatpeanjXznjbXosaHmp418UmlmbGV8U2hvdGd1bnxDYXJiaW5lfEdhdWdlIHxMZWUtRW5maWVsZHxFbGVwaGFudCcgK1xuICAgICAgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTdWJtYWNoaW5lIEd1bnxUaG9tcHNvbnzooZ3pi5Lmp40nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2Vyc3zmqZ/mp40nICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZeeIhueCuOeJqXzmiYvmprTlvYh86YeN5q2m5ZmoJyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ+ekuuevhOinkuiJsiwg5bm06b2hIDI3XFxu5Yqb6YePIDc1IOmrlOizqiA2MCDpq5TlnosgODAg5pWP5o23IDcwIOWkluiyjiA2MCDmmbrlipsgODBcXG7mhI/lv5cgNTAg5pWZ6IKyIDg1IFNBTiA1NSBIUCAxNCBEQjogMUQ0XFxu6auU5qC8OiAxIE1vdmU6IDcgTVA6IDEwIOW5uOmBizogNDAg6K2355SyOiAxXFxu5pS75pOK5qyh5pW4OiAzIOeQhuaZuuWWquWksTogMWQ0LzFkOFxcbuaIsOmspeWIl+ihqFxcbuWSrCA1MCUgKDI1LzEwKSwg5YK35a6zIDFENlxcbuepuuaJiyAzMCUgKDE1LzYpLCDlgrflrrMgMUQzXFxu5omL5qeNIDQwJSAoMjAvOCksIOWCt+WusyAxRDgrMVxcbumWg+mBvyA1MCUgKDI1LzEwKVxcbuaKgOiDveWIl+ihqFxcbuWLleeJqemmtOmkiiA1NSUsIOWPluaChSAzMCUsIOaApeaVkSAyNSUsIOa9m+ihjCAyMCUsXFxu6IGG6IG9IDUwJSwg6Jel5a24IDQ1JSwg57K+56We5YiG5p6QIDI1JSwg5b+D55CG5a24IDc1JSxcXG7np5HlrbggKOWPuOazleenkeWtuCkgOTAlLCDnp5HlrbggKOWvhueivOWtuCkgMzUlLCBcXG7lgbXmn6UgMzUlLCDllqzoo50gMTAlXFxu6Kqe6KiAOiDnsrXoqp4gODAlLCDoroDllIcgNSUuXFxu5ZKS5paHOiDlj6zllpogTlBDLCDmjIfmj64gTlBDLidcbiAgfVxufVxuXG5jb25zdCB0cmFuc2xhdGlvbnMgPSB7XG4gIGVuOiB7XG4gICAgYWdlOiAnKD88IVthLXpdKScgKyAnYWdlJyArICcoXFxcXHMqOik/XFxcXHMrKD88YWdlPlxcXFxkKylbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY2N1cGF0aW9uJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ1NUUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1NJWicgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPVycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFWCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQUCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0VEVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArICdTQU58U2FuaXR5JyArICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICsgJ0hQfEhpdCBwb2ludHMnICsgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTVB8TWFnaWMgcG9pbnRzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMuZW4uZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmVuLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6ICcoPzwhW2Etel0pJyArICdCdWlsZCcgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ0FybW9yJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5lbi5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdNb3ZlJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ0x1Y2snICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0F0dGFja3MgcGVyIHJvdW5kfCMgQXR0YWNrcycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5lbi5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTYW5pdHkgbG9zc3xTQU4gbG9zcycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMuZW4uc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZEQ/WytcXFxcZF0qXFxcXC9cXFxcZEQ/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xuICAgICAgJ2RhbWFnZScgK1xuICAgICAgJyk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2QpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMuZW4uZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVuLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnRG9kZ2UnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgLy8gU2tpbGwgc2hvdWxkIG5vdCBiZSBuYW1lZCBcIlRoZSBwbGF5ZXIgaGFzXCIgLyBcImJ1dCB0aGV5IHJlZ2VuZXJhdGVcIiByZXF1aXJlZCBmb3IgXCJBIENvbGQgRmlyZSBXaXRoaW5cIlxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDogJyhefCg/PCEsKVxcbikoJyArICdGaWdodGluZ3xGaXJlYXJtc3xCcmF3bHxCaXRlJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLmVuLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVuLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICBkZToge1xuICAgIGFnZTogJyg/PCFbYS16XSknICsgJ0FsdGVyJyArICcoXFxcXHMqOik/XFxcXHMrKD88YWdlPlxcXFxkKylbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246ICdbLFxcXFxzXSonICsgJ0JlcnVmJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ1NUJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnS08nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdHUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnTUEnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdHRScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0VSJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnQkknICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ2dTfFNUQXxHZWlzdGlnZSBTdGFiaWxpdMOkdCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1RQfFRyZWZmZXJwdW5rdGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ01QfE1hZ2llcHVua3RlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMuZGUuZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEfFdcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZGUuZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU3RhdHVyfFN0YXQuJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdQYW56ZXJ1bmcnICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmRlLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQld8QmV3ZWd1bmdzd2VpdGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdHbMO8Y2snICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0FuZ3JpZmZlIHBybyBSdW5kZXxBbmdyaWZmZXxQcm8gUnVuZGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZGUuYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU3RhYmlsaXTDpHRzdmVybHVzdCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMuZGUuc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZFtEV10/WytcXFxcZF0qXFxcXC9cXFxcZFtEV10/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xuICAgICAgJ1NjaGFkZW4nICtcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCt3fGQpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMuZGUuZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmRlLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZHx3KT9cXFxcZCspKikrKVxcXFwpPycsXG4gICAgd2VhcG9uRG9kZ2U6XG4gICAgICAnKD88bmFtZT4nICtcbiAgICAgICdBdXN3ZWljaGVuJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIC8vIFNraWxsIHNob3VsZCBub3QgYmUgbmFtZWQgXCJUaGUgcGxheWVyIGhhc1wiIC8gXCJidXQgdGhleSByZWdlbmVyYXRlXCIgcmVxdWlyZWQgZm9yIFwiQSBDb2xkIEZpcmUgV2l0aGluXCJcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sO10/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxuICAgICAgJyhefCg/PCEsKVxcbikoJyArXG4gICAgICAnQW5ncmlmZmV8SGFuZGdlbWVuZ2V8TmFoa2FtcGZ8RmF1c3RmZXVlcndhZmZlfEJlacOfZW4nICtcbiAgICAgICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLmRlLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmRlLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZGUuc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICBwbDoge1xuICAgIGFnZTogJyg/PGFnZT5cXFxcZCspJyArICdcXFxccysoPzonICsgJ2xhdGF8bGF0fHJvaycgKyAnKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjogJ1ssXFxcXHNdKicgKyAnWmF3w7NkJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ1MnICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdLT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdCQycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ01PQycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ1pSJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnV1lHJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnV1lLJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQfFBvY3p5dGFsbm/Fm8SHJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUFd8UHVua3R5IFd5dHJ6eW1hxYJvxZtjaScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUE18UHVua3R5IE1hZ2lpJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRiOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgIGtleXMucGwuZnVsbGRiICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGRiPlsrLV0/XFxcXGQrKD86ZFxcXFxkK3xEfEtcXFxcZCspP3wnICtcbiAgICAgIGtleXMucGwuZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDogJyg/PCFbYS16XSknICsgJ0tyemVwYScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ1BhbmNlcnonICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLnBsLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ1J1Y2gnICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnU3pjesSZxZtjaWUnICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0F0YWtpIHcgcnVuZHppZXwjIEF0YWtpJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLnBsLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1V0cmF0YSBQb2N6eXRhbG5vxZtjaXx1dHJhdGEgUCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88c2FuTG9zcz4nICtcbiAgICAgIGtleXMucGwuc2FuTG9zc05vbmUgK1xuICAgICAgJ3xcXFxcZFtES10/WytcXFxcZF0qXFxcXC9cXFxcZFtES10/WytcXFxcZF0qKVssXFxcXHNcXG5dKicsXG4gICAgd2VhcG9uOlxuICAgICAgJyhefFxcXFxuKSg/PG5hbWU+Wy5cXFxcdCAnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKykoXFxcXCoqLD9cXFxccyt8XFxcXCopKD86XFxcXCh8KD88cGVyY2VudGFnZT5cXFxcZCspJSw/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpXFxcXHMqLD8pPyk/KFxcXFxzKicgK1xuICAgICAgJ29icmHFvGVuaWEnICtcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtrfGQpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMucGwuZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLnBsLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnVW5paycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICAvLyBTa2lsbCBzaG91bGQgbm90IGJlIG5hbWVkIFwiVGhlIHBsYXllciBoYXNcIiAvIFwiYnV0IHRoZXkgcmVnZW5lcmF0ZVwiIHJlcXVpcmVkIGZvciBcIkEgQ29sZCBGaXJlIFdpdGhpblwiXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxuICAgICAgJyhefCg/PCEsKVxcbikoJyArICdXYWxrYXxCcm/FhCBQYWxuYXxCaWphdHlrYXxVZ3J5emllbmllJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLnBsLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLnBsLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMucGwuc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICBmcjoge1xuICAgIGFnZTogJyg/PGFnZT5cXFxcZCspXFxcXHMqJyArICdhbnMnICsgJyg/IVthLXpdKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjpcbiAgICAgICdbLFxcXFxzXSonICsgJ09jY3VwYXRpb24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnRk9SJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnVEFJJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9VJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVYJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBQJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnw4lEVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhKFthLXpdfGRlXFxcXHMpKSg/OicgK1xuICAgICAgJ1NBTnxTYW50w6kgTWVudGFsZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BWfFBvaW50cyBkZSB2aWUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BNfFBvaW50cyBkZSBtYWdpZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmZyLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5cy5mci5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOlxuICAgICAgJyg/PCFbYS16XSknICsgJ0NhcnJ1cmUnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBcm11cmV8UHJvdGVjdGlvbicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmZyLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTXZ0fE1vdXZlbWVudHxEw6lwbGFjZW1lbnQnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdDaGFuY2UnICsgJyhcXFxccyo6KT9cXFxccysoPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0F0dGFxdWVzIHBhciByb3VuZCcgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5mci5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQZXJ0ZSBkZSBTYW50w6kgbWVudGFsZXxQZXJ0ZSBkZSBTQU4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmZyLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyooPzonICtcbiAgICAgICdkb21tYWdlfGTDqWfDonRzJyArXG4gICAgICAnKSk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2QpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMuZnIuZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnRXNxdWl2ZXI/JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgKyAnQXUgY29udGFjdHzDgCBkaXN0YW5jZXxDb21iYXQgcmFwcHJvY2jDqXxCaXRlJyArICcpJyxcbiAgICBuYW1lOiAnXig/PG5hbWU+W1xcXFwuXFxcXHMnICsgbmFtZUNoYXJhY3RlcnMgKyAnXSspWyxcXFxcc1xcbl0rJyxcbiAgICBzZWN0aW9uczpcbiAgICAgICcoJyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25Db21iYXRzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25Ta2lsbHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvbkxhbmdhdWdlcyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uU3BlbGxzICtcbiAgICAgICcpJ1xuICB9LFxuICBlczoge1xuICAgIGFnZTogJyg/PGFnZT5cXFxcZCspXFxcXHMqJyArICdhW8Oxw5Fdb3MnICsgJyg/IVthLXpdKVssXFxcXHNdKicsXG4gICAgb2NjdXBhdGlvbjpcbiAgICAgICdbLFxcXFxzXSonICsgJ09jdXBhY2nDs24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnRlVFJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnQ09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnVEFNJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UJyArICcoXFxcXHMqOik/XFxcXHMqKD88aW50PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgcG93OiAnKD88IVthLXpdKScgKyAnUE9EJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVTJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBBJyArICcoXFxcXHMqOik/XFxcXHMqKD88YXBwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZWR1OiAnKD88IVthLXpdKScgKyAnRURVJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICsgJ0NPUnxDb3JkdXJhJyArICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQVnxQdW50b3MgZGUgdmlkYXxQXFxcXC4gP1ZcXFxcLicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88aHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBtcDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUE18UHVudG9zIE3DoWdpY29zfFB1bnRvcyBkZSBNYWdpYScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmVzLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5cy5lcy5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOlxuICAgICAgJyg/PCFbYS16XSknICsgJ0NvcnB1bGVuY2lhJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnQXJtYWR1cmEnICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMrKD88YXJtb3I+JyArXG4gICAgICBrZXlzLmVzLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ01vdmltaWVudG8nICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnU3VlcnRlJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdOw7ptZXJvIGRlIEF0YXF1ZXMnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZXMuYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUMOpcmRpZGEgZGUgY29yZHVyYXxQw6lyZGlkYSBkZSBDT1InICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmVzLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdkYcOxbycgK1xuICAgICAgJyk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2QpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXMuZXMuZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnRXNxdWl2YXInICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OlxuICAgICAgJyhefCg/PCEsKVxcbikoJyArICdDb21iYXRpcnxBcm1hcyBkZSBmdWVnb3xQZWxlYXxNb3JkaXNjbycgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgJ3poLVRXJzoge1xuICAgIGFnZTogJyg/PCFbYS16XSknICsgJ2FnZXzlubTpvaEnICsgJyhcXFxccyo6KT9cXFxccyooPzxhZ2U+XFxcXGQrKVssXFxcXHNdKicsXG4gICAgLyogTkVXIEtFWSBCRUxPVyAtIFRSQU5TTEFUSU9OIFJFUVVJUkVEICovXG4gICAgb2NjdXBhdGlvbjpcbiAgICAgICdbLFxcXFxzXSonICsgJ09jY3VwYXRpb24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnU1RSfOWKm+mHjycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTnzpq5Tos6onICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdTSVp86auU5Z6LJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UfOaZuuWKmycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPV3zmhI/lv5cnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVh85pWP5o23JyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBQfOWkluiyjicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0VEVXzmlZnogrInICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1NBTnxTYW5pdHl855CG5pm6JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnSFB8SGl0IHBvaW50c3znlJ/lkb0nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ01QfE1hZ2ljIHBvaW50cycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5c1snemgtVFcnXS5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOlxuICAgICAgJyg/PCFbYS16XSknICsgJ0J1aWxkfOmrlOagvCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ0FybW9yfOitt+eUsicgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccyooPzxhcm1vcj4nICtcbiAgICAgIGtleXNbJ3poLVRXJ10uYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnTW92ZScgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdMdWNrfOW5uOmBiycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXR0YWNrcyBwZXIgcm91bmR8IyBBdHRhY2tzfOaUu+aTiuasoeaVuHwjIOaUu+aTiicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5c1snemgtVFcnXS5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTYW5pdHkgbG9zc3xTQU4gbG9zc3znkIbmmbrllqrlpLF8U0FO5YC85pCN5aSxfFNBTuWAvOWWquWksXzmiaNTQU4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyooPzonICtcbiAgICAgICdkYW1hZ2V85YK35a6zJyArXG4gICAgICAnKSk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2QpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXNbJ3poLVRXJ10uZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnRG9kZ2V86ZaD6YG/fOmWg+i6sicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJT8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OiAnKF58KD88ISwpXFxuKSgnICsgJ+i/keaIsOaKgOiDvXzlsITmk4rmioDog718QnJhd2x8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAge1xuICBzdGF0aWMgY2hlY2tMYW5ndWFnZSAobGFuZyA9IG51bGwpIHtcbiAgICBpZiAoIWxhbmcpIHtcbiAgICAgIGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRyYW5zbGF0aW9uc1tsYW5nXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxhbmcgPSAnZW4nXG4gICAgfVxuICAgIHJldHVybiBsYW5nXG4gIH1cblxuICBzdGF0aWMgZ2V0RXhhbXBsZVRleHQgKGxhbmcpIHtcbiAgICBsZXQgZXhhbXBsZSA9IGtleXMuZW4uZXhhbXBsZVxuICAgIGlmICh0eXBlb2Yga2V5c1tsYW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGV4YW1wbGUgPSBrZXlzW2xhbmddLmV4YW1wbGVcbiAgICB9XG4gICAgcmV0dXJuIGV4YW1wbGVcbiAgfVxuXG4gIHN0YXRpYyBnZXRUcmFuc2xhdGlvbnMgKCkge1xuICAgIGNvbnN0IG91dHB1dCA9IHt9XG4gICAgZm9yIChjb25zdCBrZXkgaW4ga2V5cykge1xuICAgICAgb3V0cHV0W2tleV0gPSBrZXlzW2tleV0uZGVzY3JpcHRpb25cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgc3RhdGljIGdldEtleXMgKGxhbmcpIHtcbiAgICByZXR1cm4ga2V5c1tsYW5nXSB8fCBrZXlzLmVuXG4gIH1cblxuICBzdGF0aWMgZ2V0UmVndWxhckV4cHJlc3Npb25zIChsYW5nKSB7XG4gICAgcmV0dXJuIHRyYW5zbGF0aW9uc1tsYW5nXSB8fCB0cmFuc2xhdGlvbnMuZW5cbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDT05GSUcsIGR1cGxpY2F0ZSwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyUmVnRXhwIH0gZnJvbSAnLi9hY3Rvci1pbXBvcnRlci1yZWdleHAuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogQ29DN0FjdG9ySW1wb3J0ZXIgaGVscGVyIGNsYXNzIHRvIGltcG9ydCBhbiBBY3RvciBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMucGFyc2VkID0ge31cbiAgICB0aGlzLml0ZW1Mb2NhdGlvbnMgPSAnJ1xuICB9XG5cbiAgc3RhdGljIGdldCBhc051bWJlciAoKSB7XG4gICAgcmV0dXJuICduJ1xuICB9XG5cbiAgc3RhdGljIGdldCBhc1N0cmluZyAoKSB7XG4gICAgcmV0dXJuICdzJ1xuICB9XG5cbiAgLyoqXG4gICAqIGdldFJlZ0V4LCBnZXQgUmVnRXhwIG9iamVjdCBpZiBub3QgY3VycmVudGx5IGEgUmVnRXhwIG9iamVjdFxuICAgKiBAcGFyYW0ge01peGVkfSByZWdleCBSZWdFeHAgb3Igc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtb2RpZmllcnMgaWYgc3RyaW5nIHdhcyBzdXBwbGllZCBpbiByZWdleCBsaXN0IG9mIG1vZGlmaWVycyB0byBhZGQgdG8gdGhlIFJlZ0V4cFxuICAgKiBAcmV0dXJucyB7UmVnRXhwfVxuICAgKi9cbiAgZ2V0UmVnRXggKHJlZ2V4LCBtb2RpZmllcnMgPSAnaXUnKSB7XG4gICAgaWYgKHJlZ2V4LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnUmVnRXhwJykge1xuICAgICAgcmV0dXJuIHJlZ2V4XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVnRXhwKHJlZ2V4LCBtb2RpZmllcnMpXG4gIH1cblxuICAvKipcbiAgICogY2xlYW5TdHJpbmcsIHJlbW92ZXMgbmV3IGxpbmUgYW5kIGNhcnJpZXIgcmV0dXJuIGNoYXJhY3RlciBhbmQgbGF0ZXJhbCBzcGFjZXMgZnJvbSBhIHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgc3RyaW5nIHRvIGNsZWFuXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBjbGVhbmVkIHN0cmluZ1xuICAgKi9cbiAgY2xlYW5TdHJpbmcgKHMpIHtcbiAgICByZXR1cm4gc1xuICAgICAgLnJlcGxhY2UoLyhcXG58XFxyKS9nLCAnICcpXG4gICAgICAucmVwbGFjZSgvXlxccyovLCAnJylcbiAgICAgIC5yZXBsYWNlKC9cXHMqXFwuP1xccypcXC4/JC8sICcnKVxuICB9XG5cbiAgLyoqXG4gICAqIHRyYW5zbGF0ZVJvbGwsIHRyYW5zbGF0ZXMgbGFuZ3VhZ2Ugc3BlY2lmaWMgc2hvcnRmb3JtIG9mIGRpY2UgKEQpIGluIHJvbGxzXG4gICAqIEV4YW1wbGUgZm9yIEdlcm1hbiByb2xsczogMVc0ID0+IDFENC5cbiAgICogRGljZSBzaG9ydGZvcm0gaXMgY29uZmlndXJlZCB1c2luZyBrZXlzLmRpY2VTaG9ydFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgcm9sbCB0byBiZSB0cmFuc2xhdGVkXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSB0cmFuc2xhdGVkIHJvbGxcbiAgICovXG4gIHRyYW5zbGF0ZVJvbGwgKHMpIHtcbiAgICBpZiAodHlwZW9mIHMgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gc1xuICAgIGlmICh0eXBlb2YgdGhpcy5rZXlzLmRpY2VTaG9ydCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICAgJyg/PG4xPlxcXFxkKyknICsgdGhpcy5rZXlzLmRpY2VTaG9ydCArICcoPzxuMj5cXFxcZCspJyxcbiAgICAgICAgJ2l1ZydcbiAgICAgIClcbiAgICAgIHJldHVybiBzLnJlcGxhY2UocmVnRXgsICckPG4xPkQkPG4yPicpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHRvSFRNTCwgY29udmVydHMgYSBzdHJpbmcgdG8gSFRNTCBzdHJpcGluZyBvdXQgZW1wdHkgbGluZXMgb3IgbGluZXMgdGhhdCBjb250YWluIGp1c3QgLCBvciAuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzIHRoZSBzdHJpbmcgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgSFRNTCBvciBhbiBlbXB0eSBzdHJpbmdcbiAgICovXG4gIHRvSFRNTCAocykge1xuICAgIGlmIChzLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBzID0gc1xuICAgICAgLnRyaW0oKVxuICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgLm1hcCh0ZXh0ID0+IHRleHQudHJpbSgpLnJlcGxhY2UoL15bLC5cXHNdKyQvLCAnJykpXG4gICAgICAuZmlsdGVyKHRleHQgPT4gdGV4dClcbiAgICAgIC5qb2luKCc8L3A+PHA+JylcbiAgICBpZiAocy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gJzxwPicgKyBzICsgJzwvcD4nXG4gIH1cblxuICAvKipcbiAgICogY2hlY2sgZXhwZWN0cyBhIGtleSBmcm9tIHRoaXMucmVnRXggd2lsbCBhdHRlbXB0IHRvIG1hdGNoIHRoZSB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZWdFeEtleSBrZXkgaW4gdGhpcy5yZWdFeFxuICAgKiBAcGFyYW0ge0pTT059XG4gICAqIC0gcmVtb3ZlRnJvbVRleHQgcmVtb3ZlIGZyb20gdGhpcy50ZXh0XG4gICAqIC0gc2F2ZUtleXMgYWRkIGdyb3VwIGtleXMgdG8gdGhpcy5wYXJzZWRcbiAgICogLSB0eXBlIElmIGFkZGluZyB3aXRoIHNhdmVLZXlzIHNldCB0eXBlIChDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZyAvIENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyKVxuICAgKiAtIHRleHQgSWYgc2V0IHVzZSB0aGlzIGluc3RlYWQgb2YgdGhpcy50ZXh0XG4gICAqIC0gcmVxdWlyZWRHcm91cCBJZiBub3QgZmFsc2UgcmVxdWlyZSBzcGVjaWZpZWQga2V5IGluIFJlZ0V4cCBncm91cHNcbiAgICogQHJldHVybnMge0ZhbHNlfS97SlNPTiBncm91cHMgJycgaXMgbWF0Y2hlZCBzdHJpbmd9XG4gICAqL1xuICBjaGVjayAoXG4gICAgcmVnRXhLZXksXG4gICAge1xuICAgICAgcmVtb3ZlRnJvbVRleHQgPSB0cnVlLFxuICAgICAgc2F2ZUtleXMgPSB0cnVlLFxuICAgICAgdHlwZSA9IENvQzdBY3RvckltcG9ydGVyLmFzU3RyaW5nLFxuICAgICAgdGV4dCA9IGZhbHNlLFxuICAgICAgcmVxdWlyZWRHcm91cCA9IGZhbHNlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGxldCBvdXRwdXQgPSBmYWxzZVxuICAgIGxldCByZWdFeHAgPSBmYWxzZVxuICAgIGlmICh0eXBlb2YgdGhpcy5yZWdFeFtyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMucmVnRXhbcmVnRXhLZXldKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMua2V5c1tyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMua2V5c1tyZWdFeEtleV0pXG4gICAgfVxuICAgIGlmIChyZWdFeHAgIT09IGZhbHNlKSB7XG4gICAgICBpZiAodGV4dCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGV4dCA9IHRoaXMudGV4dFxuICAgICAgfVxuICAgICAgY29uc3QgY2hlY2sgPSByZWdFeHAuZXhlYyh0ZXh0KVxuICAgICAgbGV0IHZhbHVlID0gbnVsbFxuICAgICAgaWYgKFxuICAgICAgICBjaGVjayAhPT0gbnVsbCAmJlxuICAgICAgICAocmVxdWlyZWRHcm91cCA9PT0gZmFsc2UgfHxcbiAgICAgICAgICB0eXBlb2YgKGNoZWNrLmdyb3VwcyB8fCB7fSlbcmVxdWlyZWRHcm91cF0gIT09ICd1bmRlZmluZWQnKVxuICAgICAgKSB7XG4gICAgICAgIG91dHB1dCA9IGNoZWNrLmdyb3VwcyB8fCB7fVxuICAgICAgICBpZiAocmVtb3ZlRnJvbVRleHQpIHtcbiAgICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZShjaGVja1swXS50cmltKCksICdcXG4nKS50cmltKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2F2ZUtleXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhjaGVjay5ncm91cHMpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZzpcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFtrZXldID0gU3RyaW5nKGNoZWNrLmdyb3Vwc1trZXldKS5yZXBsYWNlKCdcXG4nLCAnICcpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlcjpcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRba2V5XSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0Wyctc291cmNlJ10gPSBjaGVja1swXVxuICAgICAgICBvdXRwdXRbJy1pbmRleCddID0gY2hlY2suaW5kZXhcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLyoqXG4gICAqIHByb2Nlc3NDb21iYXQgZXh0cmFjdHMgY29tYmF0IC8gZG9kZ2UgaW5mb3JtYXRpb24gZnJvbSBhIHN1YnNlY3Rpb24gb2YgdGV4dFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIGNvbWJhdCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NDb21iYXQgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjb21iYXQgdGV4dCcsIHRleHQpXG4gICAgfVxuICAgIGxldCB3ZWFwb25cbiAgICBsZXQgZG9kZ2VcbiAgICBsZXQgbmV3bGluZVxuICAgIGxldCBsYXN0UGVyY2VudCA9IGZhbHNlXG4gICAgbGV0IG1heExvb3BzID0gNDBcbiAgICBkbyB7XG4gICAgICBtYXhMb29wcy0tXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKClcbiAgICAgIGlmIChcbiAgICAgICAgKGRvZGdlID0gdGhpcy5jaGVjaygnd2VhcG9uRG9kZ2UnLCB7IHNhdmVLZXlzOiBmYWxzZSwgdGV4dCB9KSlcbiAgICAgICkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKGRvZGdlWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLnNraWxscyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLnBhcnNlZC5za2lsbHMgPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkLnNraWxscy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmNsZWFuU3RyaW5nKGRvZGdlLm5hbWUpLFxuICAgICAgICAgIHZhbHVlOiBOdW1iZXIoZG9kZ2UucGVyY2VudGFnZSksXG4gICAgICAgICAgcHVzaDogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICh3ZWFwb24gPSB0aGlzLmNoZWNrKCd3ZWFwb24nLCB7XG4gICAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICAgIHRleHQsXG4gICAgICAgICAgcmVxdWlyZWRHcm91cDogbGFzdFBlcmNlbnQgPT09IGZhbHNlID8gJ3BlcmNlbnRhZ2UnIDogZmFsc2VcbiAgICAgICAgfSkpXG4gICAgICApIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSh3ZWFwb25bJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmNsZWFuU3RyaW5nKHdlYXBvbi5uYW1lIHx8ICcnKVxuICAgICAgICBsZXQgZGFtYWdlID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMuY2xlYW5TdHJpbmcod2VhcG9uLmRhbWFnZSB8fCAnJykpXG4gICAgICAgIGNvbnN0IGlzUmFuZ2VkID0gISEoXG4gICAgICAgICAgdGhpcy5jaGVjaygnaGFuZGd1bicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ3JpZmxlJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnc21iJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnbWFjaGluZUd1bicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ2xhdW5jaGVkJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHdlYXBvbi5wZXJjZW50YWdlICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHdlYXBvbi5wZXJjZW50YWdlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICBsYXN0UGVyY2VudCA9IE51bWJlcih3ZWFwb24ucGVyY2VudGFnZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0UGVyY2VudCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBsZXQgZm91bmRcbiAgICAgICAgbGV0IGFoZGIgPSBmYWxzZVxuICAgICAgICBsZXQgYWRkYiA9IGZhbHNlXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBmb3VuZCA9IHRoaXMuZ2V0UmVnRXgoXG4gICAgICAgICAgICAnXFxcXHMqWystXT9cXFxccyooJyArXG4gICAgICAgICAgICAgIHRoaXMua2V5cy5oYWxmZGIgK1xuICAgICAgICAgICAgICAnKVxcXFxzKignICtcbiAgICAgICAgICAgICAgdGhpcy5rZXlzLmZ1bGxkYiArXG4gICAgICAgICAgICAgICcpP1stK10/XFxcXHMqKCcgK1xuICAgICAgICAgICAgICB0aGlzLnBhcnNlZC5kYi5yZXBsYWNlKC9eWy0rXS8sICcnKSArXG4gICAgICAgICAgICAgICcpPydcbiAgICAgICAgICApLmV4ZWMoZGFtYWdlKVxuICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgYWhkYiA9IHRydWVcbiAgICAgICAgICAgIGRhbWFnZSA9IGRhbWFnZS5yZXBsYWNlKGZvdW5kWzBdLCAnJylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJlZ0V4KFxuICAgICAgICAgICAgICAnXFxcXHMqWystXT9cXFxccyooJyArXG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzLmZ1bGxkYiArXG4gICAgICAgICAgICAgICAgJylcXFxccypbLStdP1xcXFxzKignICtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZC5kYi5yZXBsYWNlKC9eWy0rXS8sICcnKSArXG4gICAgICAgICAgICAgICAgJyk/J1xuICAgICAgICAgICAgKS5leGVjKGRhbWFnZSlcbiAgICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgICBhZGRiID0gdHJ1ZVxuICAgICAgICAgICAgICBkYW1hZ2UgPSBkYW1hZ2UucmVwbGFjZShmb3VuZFswXSwgJycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChmb3VuZClcbiAgICAgICAgY29uc3QgZGFtYWdlcyA9IGRhbWFnZS5zcGxpdCgnLycpXG4gICAgICAgIGNvbnN0IGlzU2hvdGd1biA9IGRhbWFnZXMubGVuZ3RoID09PSAzXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgIHNraWxsOiB7XG4gICAgICAgICAgICAgIGlkOiBsYXN0UGVyY2VudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgbm9ybWFsOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGlzU2hvdGd1biA/IDEwIDogMCxcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IGRhbWFnZXNbMF1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbG9uZzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyAyMCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzFdIDogJydcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXh0cmVtZToge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyA1MCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzJdIDogJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgc29tZSBvZiB0aGUgcHJvcGVydGllc1xuICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4gPSBpc1Nob3RndW5cbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkID0gaXNSYW5nZWQgfHwgaXNTaG90Z3VuXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMubWVsZWUgPSAhZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuYWhkYiA9IGFoZGJcbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5hZGRiID0gYWRkYlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLmF0dGFja3MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcyA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcy5wdXNoKGRhdGEpXG4gICAgICB9IGVsc2UgaWYgKChuZXdsaW5lID0gdGV4dC5tYXRjaCgvXiguKylcXG4vKSkpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShuZXdsaW5lWzBdLCAnXFxuJylcbiAgICAgIH0gZWxzZSBpZiAoKG5ld2xpbmUgPSB0ZXh0Lm1hdGNoKC9eW15cXG5dKyQvKSkpIHtcbiAgICAgICAgdGV4dCA9ICcnXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmICghIXdlYXBvbiB8fCAhIWRvZGdlIHx8ICEhdGV4dCkpXG4gICAgaWYgKG1heExvb3BzID09PSAwKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvclVuZXhwZWN0ZWRXZWFwb25UZXh0JylcbiAgICAgIClcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1VuZXhwZWN0ZWQgd2VhcG9uczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU2tpbGxzIGV4dHJhY3RzIHNraWxscyAvIGxhbmd1YWdlIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBza2lsbHMgLyBsYW5ndWFnZSBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTa2lsbHMgKHRleHQsIGtleSA9ICdza2lsbHMnKSB7XG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGJyZWFrcyA9IHRleHQuc3BsaXQoL1xcLlxccj9cXG4vKVxuICAgIGlmIChicmVha3MubGVuZ3RoID4gMSkge1xuICAgICAgdGV4dCA9IGJyZWFrc1swXVxuICAgIH1cbiAgICBsZXQgc2tpbGxcbiAgICBsZXQgbWF4TG9vcHMgPSA0MFxuICAgIGRvIHtcbiAgICAgIG1heExvb3BzLS1cbiAgICAgIHRleHQgPSB0ZXh0LnRyaW0oKVxuICAgICAgc2tpbGwgPSB0aGlzLmNoZWNrKCdza2lsbCcsIHsgc2F2ZUtleXM6IGZhbHNlLCB0ZXh0IH0pXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShza2lsbFsnLXNvdXJjZSddLCAnXFxuJylcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZFtrZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMucGFyc2VkW2tleV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkW2tleV0ucHVzaCh7XG4gICAgICAgICAgbmFtZTogdGhpcy5jbGVhblN0cmluZyhza2lsbC5uYW1lKSxcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHNraWxsLnBlcmNlbnRhZ2UpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmIHNraWxsKVxuICAgIGlmIChtYXhMb29wcyA9PT0gMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JVbmV4cGVjdGVkU2tpbGxzVGV4dCcpXG4gICAgICApXG4gICAgICBjb25zb2xlLmRlYnVnKCdVbmV4cGVjdGVkIHNraWxsczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU3BlbGxzIGV4dHJhY3RzIHNwZWxsIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBzcGVsbCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTcGVsbHMgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgYnJlYWtzID0gdGV4dC5zcGxpdCgvXFwuXFxyP1xcbi8pXG4gICAgaWYgKGJyZWFrcy5sZW5ndGggPiAxKSB7XG4gICAgICB0ZXh0ID0gYnJlYWtzWzBdXG4gICAgfVxuICAgIGNvbnN0IHNwZWxsc0FyciA9IHRleHQucmVwbGFjZSgvKFtcXG5cXHJdKykvZywgJyAnKS5zcGxpdCgvKD88IVxcKFteKV0rKSwvKVxuICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC5yZXBsYWNlKHRleHQudHJpbSgpLCAnXFxuJylcbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxsc0Fycikge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZC5zcGVsbHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMucGFyc2VkLnNwZWxscyA9IFtdXG4gICAgICB9XG4gICAgICB0aGlzLnBhcnNlZC5zcGVsbHMucHVzaCh0aGlzLmNsZWFuU3RyaW5nKHNwZWxsKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcGFyc2VDaGFyYWN0ZXIgZXh0cmFjdHMgaW5mb3JtYXRpb24gZnJvbSB0aGUgcmF3IHRleHQgZGVzY3JpcHRpb24gb2YgYW4gZW50aXR5IChOUEMgb3IgQ3JlYXR1cmUpXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgZW50aXR5XG4gICAqIEByZXR1cm5zIGV4dHJhY3RlZERhdGEgb2JqZWN0IHdpdGggdGhlIGVudGl0eSBkYXRhXG4gICAqL1xuICBhc3luYyBwYXJzZUNoYXJhY3RlciAodGV4dCkge1xuICAgIC8vIFJlcGxhY2UgXCJFbiBEYXNoXCIgYW5kIFwiRW0gRGFzaFwiIGRhc2hlcyB3aXRoIC0gYW5kIFwiUmlnaHQgU2luZ2xlIFF1b3RhdGlvbiBNYXJrXCIgd2l0aCAnXG4gICAgdGhpcy50ZXh0ID0gU3RyaW5nKHRleHQpXG4gICAgICAudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXFx1MjAxM3xcXHUyMDE0fFxcdTIyMTIvZywgJy0nKVxuICAgICAgLnJlcGxhY2UoL1xcdTIwMTkvZywgXCInXCIpXG4gICAgICAucmVwbGFjZSgvW1xcdWRiYzAtXFx1ZGJmZV1bXFx1ZGMwMC1cXHVkZmZmXS9nLCAnJylcbiAgICAvLyBFYXJsaWVzdCBjaGFyYWN0ZXIgdGhhdCBoYXMgYmVlbiB1c2VkLCB0byB3b3JrIG91dCB0aGUgaGVhZGVyXG4gICAgbGV0IG1pbiA9IHRoaXMudGV4dC5sZW5ndGhcbiAgICAvLyBTVFIsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgbGV0IGNoZWNrID0gdGhpcy5jaGVjaygnc3RyJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVtcbiAgICAgICctaW5kZXgnXG4gICAgXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBDT04sIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdjb24nLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBTSVosIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdzaXonLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBJTlQsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdpbnQnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBQT1csIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdwb3cnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBERVgsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdkZXgnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBBUFAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdhcHAnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBFRFUsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdlZHUnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBTQU4sIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdzYW4nLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBIUCwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2hwJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gTVAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdtcCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIFdvcmsgb3V0IHRoZSBoZWFkZXIgYmFzZWQgb24gcHJldmlvdXMgbWluaW11bSBtYXRjaGVkIGNoYXJhY3RlclxuICAgIGxldCBoZWFkZXJcbiAgICBpZiAobWluID4gMCkge1xuICAgICAgaGVhZGVyID0gdGhpcy50ZXh0LnN1YnN0cigwLCBtaW4pXG4gICAgICAvLyBHZXQgbmFtZSBmcm9tIGhlYWRlclxuICAgICAgY2hlY2sgPSB0aGlzLmNoZWNrKCduYW1lJywgeyB0ZXh0OiBoZWFkZXIgfSlcbiAgICAgIGlmIChjaGVjayA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gSWYgbm90IGZvdW5kIHVzZSBkZWZhdWx0IE5QQyBuYW1lXG4gICAgICAgIHRoaXMucGFyc2VkLm5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRVbm5hbWVkQ2hhcmFjdGVyJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJlbW92ZSBuYW1lIGZyb20gaGVhZGVyXG4gICAgICAgIGhlYWRlciA9IGhlYWRlci5yZXBsYWNlKGNoZWNrWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgfVxuICAgICAgLy8gR2V0IGFnZSBmcm9tIGhlYWRlclxuICAgICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdhZ2UnLCB7IHRleHQ6IGhlYWRlciB9KVxuICAgICAgaWYgKGNoZWNrICE9PSBmYWxzZSkge1xuICAgICAgICAvLyBJZiBmb3VuZCByZW1vdmUgYWdlIGZyb20gaGVhZGVyXG4gICAgICAgIGhlYWRlciA9IGhlYWRlci5yZXBsYWNlKGNoZWNrWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgfVxuICAgICAgLy8gR2V0IG9jY3VwYXRpb24gZnJvbSBoZWFkZXJcbiAgICAgIGlmICghdGhpcy5jaGVjaygnb2NjdXBhdGlvbicsIHsgdGV4dDogaGVhZGVyIH0pICYmIGhlYWRlci50cmltKCkgIT09ICcnKSB7XG4gICAgICAgIC8vIElmIG9jY3VwYXRpb24gaXMgbm90IGZvdW5kIGJ1dCB0aGVyZSBpcyBhIGhlYWRlciBzZXQgdGhlIG9jY3VwYXRpb24gdG8gdGhlIHJlbWFpbmluZyBoZWFkZXJcbiAgICAgICAgbGV0IG9jY3VwYXRpb24gPSBoZWFkZXJcbiAgICAgICAgaWYgKGhlYWRlci5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZnVsbCBzdG9wIGp1c3QgdXNlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBoZWFkZXIgYXMgdGhlIG9jY3VwYXRpb25cbiAgICAgICAgICBvY2N1cGF0aW9uID0gaGVhZGVyLnN1YnN0cigwLCBoZWFkZXIuaW5kZXhPZignLicpICsgMSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uID0gb2NjdXBhdGlvblxuICAgICAgICAgIC5yZXBsYWNlKC8oW1xcblxccl0rKS9nLCAnICcpXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC5yZXBsYWNlKC8sJC8sICcnKVxuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZShvY2N1cGF0aW9uLnRyaW0oKSwgJ1xcbicpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZXJlIGlzIG5vIGhlYWRlciBzZXQgZGVmYXVsdCBOUEMgbmFtZVxuICAgICAgdGhpcy5wYXJzZWQubmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbXBvcnRlZFVubmFtZWRDaGFyYWN0ZXInKVxuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBvY2N1cGF0aW9uIGJ1dCBubyBhZ2UgY2hlY2sgaWYgdGhlIG9jY3VwYXRpb24gc3RhcnRzIG51bWJlciBzcGxpdCBhZ2UgYW5kIG9jY3VwYXRpb25cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5wYXJzZWQub2NjdXBhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLnBhcnNlZC5hZ2UgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCBvY2N1cGF0aW9uQWdlID0gdGhpcy5wYXJzZWQub2NjdXBhdGlvbi5tYXRjaChcbiAgICAgICAgL14oPzxhZ2U+XFxkKyksKD88b2NjdXBhdGlvbj4uKykkL1xuICAgICAgKVxuICAgICAgaWYgKG9jY3VwYXRpb25BZ2UpIHtcbiAgICAgICAgdGhpcy5wYXJzZWQuYWdlID0gb2NjdXBhdGlvbkFnZS5ncm91cHMuYWdlXG4gICAgICAgIHRoaXMucGFyc2VkLm9jY3VwYXRpb24gPSBvY2N1cGF0aW9uQWdlLmdyb3Vwcy5vY2N1cGF0aW9uLnRyaW0oKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBHZXQgZGFtYWdlIGJvbnVzLCBpZiBub3QgZm91bmQgb3Igbm9uZSBzZXQgdG8gMFxuICAgIGlmIChcbiAgICAgICF0aGlzLmNoZWNrKCdkYicpIHx8XG4gICAgICB0aGlzLmNoZWNrKCdkYk5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5kYlxuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHRoaXMucGFyc2VkLmRiID0gJzAnXG4gICAgfVxuICAgIHRoaXMucGFyc2VkLmRiID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMucGFyc2VkLmRiKVxuICAgIC8vIEdldCBidWlsZFxuICAgIHRoaXMuY2hlY2soJ2J1aWxkJylcbiAgICAvLyBHZXQgYXJtb3IsIGlmIG5vdCBmb3VuZCBvciBub25lIHNldCB0byAwXG4gICAgaWYgKFxuICAgICAgIXRoaXMuY2hlY2soJ2FybW9yJykgfHxcbiAgICAgIHRoaXMuY2hlY2soJ2FybW9yTm9uZScsIHtcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgIHRleHQ6IHRoaXMucGFyc2VkLmFybW9yXG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGhpcy5wYXJzZWQuYXJtb3IgPSAnMCdcbiAgICB9XG4gICAgLy8gR2V0IG1vdmVtZW50XG4gICAgdGhpcy5jaGVjaygnbW92JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVxuICAgIC8vIEdldCBsdWNrXG4gICAgdGhpcy5jaGVjaygnbGNrJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVxuICAgIC8vIEdldCBzYW5pdHkgbG9zc1xuICAgIHRoaXMuY2hlY2soJ3Nhbkxvc3MnKVxuICAgIHRoaXMucGFyc2VkLnNhbkxvc3MgPSB0aGlzLnRyYW5zbGF0ZVJvbGwodGhpcy5wYXJzZWQuc2FuTG9zcylcbiAgICAvLyBHZXQgYXR0YWNrcyBwZXIgcm91bmQsIGlmIG5vdCBmb3VuZCBvciBub25lIHNldCB0byAwXG4gICAgaWYgKFxuICAgICAgdGhpcy5jaGVjaygnYXR0YWNrc1BlclJvdW5kJykgJiZcbiAgICAgIHRoaXMuY2hlY2soJ2F0dGFja3NQZXJSb3VuZE5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5hdHRhY2tzUGVyUm91bmRcbiAgICAgIH0pXG4gICAgKSB7XG4gICAgICB0aGlzLnBhcnNlZC5hdHRhY2tzUGVyUm91bmQgPSAnMCdcbiAgICB9XG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBjb21iYXQgc2VjdGlvblxuICAgIHRoaXMudGV4dCA9ICdcXG4nICsgdGhpcy50ZXh0XG4gICAgbGV0IHNlY3Rpb25zID0gdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvbkNvbWJhdHMgKyAnKScsICdpJylcbiAgICBpZiAodGhpcy50ZXh0Lm1hdGNoKHNlY3Rpb25zKSA9PT0gbnVsbCkge1xuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gY29tYmF0IHNlY3Rpb24gZ3Vlc3Mgd2hlcmUgaXQgc3RhcnRzXG4gICAgICBzZWN0aW9ucyA9IHRoaXMuY2hlY2soJ2d1ZXNzU3RhcnRDb21iYXQnLCB7XG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlXG4gICAgICB9KVxuICAgICAgaWYgKHNlY3Rpb25zKSB7XG4gICAgICAgIC8vIEFkZCBhIGhlYWRlciB0byB0aGUgc3RhcnQgb2YgdGhlIGNvbWJhdCBzZWN0aW9uXG4gICAgICAgIHRoaXMudGV4dCA9IFtcbiAgICAgICAgICB0aGlzLnRleHQuc2xpY2UoMCwgc2VjdGlvbnNbJy1pbmRleCddKSxcbiAgICAgICAgICB0aGlzLmtleXMubmV3Q29tYmF0SGVhZGVyLFxuICAgICAgICAgIHRoaXMudGV4dC5zbGljZShzZWN0aW9uc1snLWluZGV4J10pXG4gICAgICAgIF0uam9pbignJylcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU3BsaXQgdGhlIHNlY3Rpb25zIENvbWJhdCwgU2tpbGxzLCBMYW5ndWFnZXMsIGFuZCBTcGVsbHNcbiAgICBjb25zdCByZWdFeHBTZWN0aW9ucyA9IHRoaXMuZ2V0UmVnRXgodGhpcy5yZWdFeC5zZWN0aW9ucywgJ2knKVxuICAgIHNlY3Rpb25zID0gdGhpcy50ZXh0LnNwbGl0KHJlZ0V4cFNlY3Rpb25zKVxuICAgIGlmIChzZWN0aW9ucyAhPT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGltID0gc2VjdGlvbnMubGVuZ3RoOyBpIDwgaW07IGkrKykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uQ29tYmF0cyArICcpJywgJ2knKVxuICAgICAgICAgICkgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIGNvbWJhdFxuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIHRoaXMucHJvY2Vzc0NvbWJhdChzZWN0aW9uc1tpICsgMV0pXG4gICAgICAgICAgaSsrXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uU2tpbGxzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgc2tpbGxzXG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzU2tpbGxzKHNlY3Rpb25zW2kgKyAxXSlcbiAgICAgICAgICBpKytcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25MYW5nYXVnZXMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBsYW5ndWFnZXNcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTa2lsbHMoc2VjdGlvbnNbaSArIDFdLCAnbGFuZ3VhZ2VzJylcbiAgICAgICAgICBpKytcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25TcGVsbHMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBzcGVsbHNcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTcGVsbHMoc2VjdGlvbnNbaSArIDFdKVxuICAgICAgICAgIGkrK1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEFueSByZW1haW5pbmcgdGV4dCBhZGQgdG8gR00gbm90ZXMgc28geW91IGNhbiBlYXNpbHkgc2VlIGlmIHRoZXJlIGFyZSBhbnkgb2J2aW91cyBpc3N1ZSBvciBqdXN0IGdlbmVyYWwgbm90ZXNcbiAgICB0aGlzLnBhcnNlZC5nbW5vdGVzID0gdGhpcy50b0hUTUwodGhpcy50ZXh0KVxuICAgIHJldHVybiB0aGlzLnBhcnNlZFxuICB9XG5cbiAgZGlzYWJsZUF0dHJpYkF1dG8gKGtleSwgYXR0cmliVmFsdWUsIGNoZWNrLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgdmFsdWUgPSBNYXRoLm1heCgwLCBOdW1iZXIoYXR0cmliVmFsdWUpKVxuICAgIGlmICh2YWx1ZSAhPT0gTnVtYmVyKGNoZWNrKSkge1xuICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9LmF1dG9gXSA9IGZhbHNlXG4gICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uYXR0cmlicy4ke2tleX0udmFsdWVgXSA9IHZhbHVlXG4gICAgICBpZiAoa2V5ID09PSAnYnVpbGQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbYHN5c3RlbS5hdHRyaWJzLiR7a2V5fS5jdXJyZW50YF0gPSB2YWx1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9Lm1heGBdID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gZW50aXR5IChgbnBjYCBvciBgY3JlYXR1cmVgKSBmcm9tIHRoZSBvYmplY3Qgd2l0aCB0aGUgYWxyZWFkeSBwYXJzZWQgZW50aXR5IGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IGNoYXJhY3RlckRhdGEgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZW50aXR5VHlwZVN0cmluZyBlbnRpdHkgdHlwZSBvYnRhaW5lZCBmcm9tIHRoZSB1c2VyIGlucHV0XG4gICAqIEByZXR1cm5zIHtBY3Rvcn0gdGhlIGNyZWF0ZWQgZm91bmRyeSBgQWN0b3JgXG4gICAqL1xuICBhc3luYyBjcmVhdGVFbnRpdHkgKGNoYXJhY3RlckRhdGEsIGVudGl0eVR5cGUpIHtcbiAgICBjb25zdCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPVxuICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5jcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMoKVxuICAgIGlmIChlbnRpdHlUeXBlICE9PSAnbnBjJykge1xuICAgICAgZW50aXR5VHlwZSA9ICdjcmVhdHVyZSdcbiAgICB9XG4gICAgY29uc3QgYWN0b3JEYXRhID0ge1xuICAgICAgbmFtZTogY2hhcmFjdGVyRGF0YS5uYW1lLFxuICAgICAgdHlwZTogZW50aXR5VHlwZSxcbiAgICAgIGZvbGRlcjogaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyLmlkLFxuICAgICAgZGF0YTogY2hhcmFjdGVyRGF0YS5hY3RvclxuICAgIH1cbiAgICBjb25zdCBucGMgPSBhd2FpdCBBY3Rvci5jcmVhdGUoYWN0b3JEYXRhKVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGNoYXJhY3RlckRhdGEuaXRlbXMsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgbGV0IHZhbHVlID0gMFxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmhwPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdocCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5ocC52YWx1ZSxcbiAgICAgICAgbnBjLmhwTWF4LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1wPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdtcCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tcC52YWx1ZSxcbiAgICAgICAgbnBjLm1wTWF4LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1vdj8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnbW92JyxcbiAgICAgICAgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1vdi52YWx1ZSxcbiAgICAgICAgbnBjLm1vdixcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5idWlsZD8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnYnVpbGQnLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuYnVpbGQudmFsdWUsXG4gICAgICAgIG5wYy5idWlsZCxcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5kYj8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyhjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuZGIudmFsdWUpLnJlcGxhY2UoL15cXCtcXHMqLywgJycpXG4gICAgICBpZiAodmFsdWUgIT09IFN0cmluZyhucGMuZGIpKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmRiLmF1dG8nXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJ10gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRGF0YSkubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygndXBkYXRlRGF0YTonLCB1cGRhdGVEYXRhKVxuICAgICAgfVxuICAgICAgYXdhaXQgbnBjLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgIH1cbiAgICBjb25zdCB1cGRhdGVJdGVtRGF0YSA9IFtdXG4gICAgbGV0IGxhc3RXZWFwb25Ta2lsbCA9IG51bGxcbiAgICBmb3IgKGNvbnN0IHBhaXIgb2YgdGhpcy53ZWFwb25Ta2lsbHMpIHtcbiAgICAgIGlmIChwYWlyWzBdICE9PSBmYWxzZSkge1xuICAgICAgICBsYXN0V2VhcG9uU2tpbGwgPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICAgIGkgPT4gaS5uYW1lID09PSBwYWlyWzBdLm5hbWUgJiZcbiAgICAgICAgICAgIGkudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgTnVtYmVyKGkuc3lzdGVtLnZhbHVlKSA9PT0gTnVtYmVyKHBhaXJbMF0uc3lzdGVtLnZhbHVlKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb25zdCB3ZWFwb24gPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICBpID0+IGkubmFtZSA9PT0gcGFpclsxXS5uYW1lICYmXG4gICAgICAgICAgaS50eXBlID09PSAnd2VhcG9uJyAmJlxuICAgICAgICAgIGkuc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UgPT09IHBhaXJbMV0uc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2VcbiAgICAgIClcbiAgICAgIGlmIChsYXN0V2VhcG9uU2tpbGxbMF0gJiYgd2VhcG9uWzBdKSB7XG4gICAgICAgIHVwZGF0ZUl0ZW1EYXRhLnB1c2goe1xuICAgICAgICAgIF9pZDogd2VhcG9uWzBdLmlkLFxuICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IGxhc3RXZWFwb25Ta2lsbFswXS5pZCxcbiAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4ubmFtZSc6IGxhc3RXZWFwb25Ta2lsbFswXS5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh1cGRhdGVJdGVtRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCd1cGRhdGVJdGVtRGF0YTonLCB1cGRhdGVJdGVtRGF0YSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5wYy51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHVwZGF0ZUl0ZW1EYXRhKVxuICAgIH1cbiAgICByZXR1cm4gbnBjXG4gIH1cblxuICAvKipcbiAgICogYWN0b3JEYXRhLCBjb252ZXJ0IHBhcnNlQ2hhcmFjdGVyIGRhdGEgaW50byBBY3RvciBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYyBvYmplY3Qgd2l0aCB0aGUgZGF0YSBleHRyYWN0ZWQgZnJvbSB0aGUgY2hhcmFjdGVyIGFzIHJldHVybmVkIGZyb20gYHBhcnNlQ2hhcmFjdGVyYFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBmb3JtYXR0ZWQgQWN0b3IgZGF0YVxuICAgKi9cbiAgYWN0b3JEYXRhIChwYykge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBjaGFyYWN0ZXJpc3RpY3M6IHt9LFxuICAgICAgYXR0cmliczoge30sXG4gICAgICBpbmZvczoge30sXG4gICAgICBzcGVjaWFsOiB7fSxcbiAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgIGtlZXBlcjogJydcbiAgICAgIH0sXG4gICAgICBmbGFnczoge1xuICAgICAgICBsb2NrZWQ6IGZhbHNlLFxuICAgICAgICBkaXNwbGF5Rm9ybXVsYTogZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgJ3N0cicsXG4gICAgICAnY29uJyxcbiAgICAgICdzaXonLFxuICAgICAgJ2RleCcsXG4gICAgICAnYXBwJyxcbiAgICAgICdpbnQnLFxuICAgICAgJ3BvdycsXG4gICAgICAnZWR1J1xuICAgIF0pIHtcbiAgICAgIGlmICh0eXBlb2YgcGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XSA9IHtcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHBjW2tleV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydzYW4nLCAnbW92JywgJ2J1aWxkJywgJ2FybW9yJywgJ2xjaycsICdocCcsICdtcCddKSB7XG4gICAgICBpZiAodHlwZW9mIHBjW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRhdGEuYXR0cmlic1trZXldID0ge1xuICAgICAgICAgIHZhbHVlOiBOdW1iZXIocGNba2V5XSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHBjLmRiICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5hdHRyaWJzLmRiID0ge1xuICAgICAgICB2YWx1ZTogcGMuZGJcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydhZ2UnLCAnb2NjdXBhdGlvbiddKSB7XG4gICAgICBpZiAodHlwZW9mIHBjW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRhdGEuaW5mb3Nba2V5XSA9IHBjW2tleV1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYy5zYW5Mb3NzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgW3Bhc3NlZCwgZmFpbGVkXSA9IHBjLnNhbkxvc3Muc3BsaXQoJy8nKVxuICAgICAgZGF0YS5zcGVjaWFsLnNhbkxvc3MgPSB7XG4gICAgICAgIGNoZWNrUGFzc2VkOiBwYXNzZWQsXG4gICAgICAgIGNoZWNrRmFpbGxlZDogZmFpbGVkXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGMuYXR0YWNrc1BlclJvdW5kICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5zcGVjaWFsLmF0dGFja3NQZXJSb3VuZCA9IE51bWJlcihwYy5hdHRhY2tzUGVyUm91bmQpXG4gICAgfVxuICAgIGRhdGEuZGVzY3JpcHRpb24ua2VlcGVyID0gcGMuZ21ub3Rlc1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdhY3RvckRhdGE6JywgZGF0YSlcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBpdGVtc0RhdGEsIGNvbnZlcnQgcGFyc2VDaGFyYWN0ZXIgZGF0YSBpbnRvIEFjdG9yIGl0ZW0gZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gcGMgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlciBhcyByZXR1cm5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybnMge09iamVjdH0gZm9ybWF0dGVkIEFjdG9yIGRhdGFcbiAgICovXG4gIGFzeW5jIGl0ZW1zRGF0YSAocGMpIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdXG4gICAgdGhpcy53ZWFwb25Ta2lsbHMgPSBbXVxuICAgIC8vIFdlYXBvbiBza2lsbHNcbiAgICBpZiAodHlwZW9mIHBjLmF0dGFja3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IGF0dGFjayBvZiBwYy5hdHRhY2tzKSB7XG4gICAgICAgIGxldCBza2lsbCA9IGZhbHNlXG4gICAgICAgIGlmIChhdHRhY2suc3lzdGVtPy5za2lsbD8uaWQgIT09IHRydWUpIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMud2VhcG9uU2tpbGwoYXR0YWNrKVxuICAgICAgICAgIGl0ZW1zLnB1c2goc2tpbGwpXG4gICAgICAgIH1cbiAgICAgICAgYXR0YWNrLnN5c3RlbS5za2lsbC5pZCA9IG51bGxcbiAgICAgICAgaXRlbXMucHVzaChhdHRhY2spXG4gICAgICAgIHRoaXMud2VhcG9uU2tpbGxzLnB1c2goW3NraWxsLCBhdHRhY2tdKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBTa2lsbHNcbiAgICBpZiAodHlwZW9mIHBjLnNraWxscyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgcGMuc2tpbGxzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgc2tpbGwubmFtZSwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgaWYgKHR5cGVvZiBza2lsbC5wdXNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBza2lsbC5wdXNoXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goZHVwbGljYXRlKGNsb25lZCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHt9XG4gICAgICAgICAgaWYgKHR5cGVvZiBza2lsbC5wdXNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgb3B0aW9ucy5wdXNoID0gc2tpbGwucHVzaFxuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtcy5wdXNoKENvQ0FjdG9yLmVtcHR5U2tpbGwoc2tpbGwubmFtZSwgc2tpbGwudmFsdWUsIG9wdGlvbnMpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIExhbmd1YWdlc1xuICAgIGlmICh0eXBlb2YgcGMubGFuZ3VhZ2VzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBwYy5sYW5ndWFnZXMpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBza2lsbC5uYW1lLCB7XG4gICAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBjbG9uZWQgPSBleGlzdGluZy50b09iamVjdCgpXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5iYXNlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICBpdGVtcy5wdXNoKGR1cGxpY2F0ZShjbG9uZWQpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1zLnB1c2goXG4gICAgICAgICAgICBDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsLm5hbWUsIHNraWxsLnZhbHVlLCB7XG4gICAgICAgICAgICAgIGltZzogQ29DN0l0ZW0uaWNvbkxhbmd1YWdlLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogJ0xhbmd1YWdlJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU3BlbGxzXG4gICAgaWYgKHR5cGVvZiBwYy5zcGVsbHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgcGMuc3BlbGxzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NwZWxsJywgbmFtZSwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgIGl0ZW1zLnB1c2goZHVwbGljYXRlKGNsb25lZCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbXMucHVzaChDb0NBY3Rvci5lbXB0eVNwZWxsKG5hbWUpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgLyoqIHdlYXBvblNraWxsIHRyaWVzIHRvIGd1ZXNzIHdoYXQga2luZCBvZiB3ZWFwb24gc2tpbGwgdG8gdXNlIGZvciB3ZWFwb24gZnJvbSBpdCdzIG5hbWVcbiAgICogQHBhcmFtIHdlYXBvbjogSlNPTiwgd2VhcG9uIGRhdGFcbiAgICovXG4gIGFzeW5jIHdlYXBvblNraWxsICh3ZWFwb24pIHtcbiAgICBsZXQgc2tpbGwgPSBudWxsXG4gICAgaWYgKHRoaXMuZ2V0UmVnRXgoJ2hhbmRndW4nKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnSGFuZGd1bicsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgSGFuZGd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgncmlmbGUnKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnUmlmbGUvU2hvdGd1bicsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnUmlmbGUnLCB7XG4gICAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsICdTaG90Z3VuJywge1xuICAgICAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIFJpZmxlIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KCdzbWInKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnU3VibWFjaGluZSBHdW4nLCB7XG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgIH0pXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIFN1Ym1hY2hpbmUgR3VuIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KCdtYWNoaW5lR3VuJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ01hY2hpbmUgR3VuJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBNYWNoaW5lIEd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgnbGF1bmNoZWQnKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnTGF1bmNoJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBMYXVuY2ggc2tpbGw6ICR7c2tpbGx9YClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNraWxsICE9PSBudWxsICYmIHR5cGVvZiBza2lsbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHNraWxsQ2xvbmUgPSBza2lsbC5jbG9uZSh7XG4gICAgICAgIHN5c3RlbToge1xuICAgICAgICAgIHZhbHVlOiB3ZWFwb24uc3lzdGVtPy5za2lsbD8uaWRcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiBza2lsbENsb25lXG4gICAgfVxuICAgIGNvbnN0IGZpcmVhcm1zID0gd2VhcG9uLnN5c3RlbT8ucHJvcGVydGllcz8ucm5nZFxuICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgIHdlYXBvbi5uYW1lLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKVxuICAgIClcbiAgICBjb25zdCBuZXdTa2lsbCA9IHtcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBuYW1lOiBwYXJ0cy5uYW1lLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHNraWxsTmFtZTogcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiB0cnVlLFxuICAgICAgICAgIGZpZ2h0aW5nOiAhZmlyZWFybXMsXG4gICAgICAgICAgZmlyZWFybTogZmlyZWFybXMsXG4gICAgICAgICAgY29tYmF0OiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGJhc2U6IHdlYXBvbi5zeXN0ZW0/LnNraWxsPy5pZCxcbiAgICAgICAgdmFsdWU6IHdlYXBvbi5zeXN0ZW0/LnNraWxsPy5pZFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgYFdlYXBvbiBza2lsbCBub3QgZm91bmQgZm9yICR7d2VhcG9uLm5hbWV9LCBjcmVhdGluZyBhIG5ldyBvbmVgLFxuICAgICAgICBuZXdTa2lsbFxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gbmV3U2tpbGxcbiAgfVxuXG4gIC8qKlxuICAgKiBuZWVkc0NvbnZlcnNpb24gZG9lcyBhbiBldmFsdWF0aW9uIHRvIHNlZSBpZiB0aGUgZ2l2ZW4gbnBjIG5lZWRzIHRvIGJlIGNvbnZlcnRlZCB0byA3dGggRWRpdGlvblxuICAgKiBSZXR1cm5zIGBmYWxzZWAgd2hlbiBhbnkgb2YgdGhlIENoYXJhY3RlcmlzdGljcyB2YWx1ZSBpdCdzIGFib3ZlIDI5XG4gICAqL1xuICBuZWVkc0NvbnZlcnNpb24gKG5wYykge1xuICAgIGxldCBuZWVkc0NvbnZlcnNpb25SZXN1bHQgPSB0cnVlXG4gICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgJ3N0cicsXG4gICAgICAnY29uJyxcbiAgICAgICdzaXonLFxuICAgICAgJ2RleCcsXG4gICAgICAnYXBwJyxcbiAgICAgICdpbnQnLFxuICAgICAgJ3BvdycsXG4gICAgICAnZWR1J1xuICAgIF0pIHtcbiAgICAgIGlmICh0eXBlb2YgbnBjW2tleV0gIT09ICd1bmRlZmluZWQnICYmIG5wY1trZXldID4gMzApIHtcbiAgICAgICAgbmVlZHNDb252ZXJzaW9uUmVzdWx0ID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ25lZWRzQ29udmVyc2lvbjonLCBuZWVkc0NvbnZlcnNpb25SZXN1bHQpXG4gICAgfVxuICAgIHJldHVybiBuZWVkc0NvbnZlcnNpb25SZXN1bHRcbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGVBY3RvciBtYWluIG1ldGhvZCB0byBjcmVhdGUgYW4gYEFjdG9yYCBmcm9tIGEgZ2l2ZSB1c2VyIGlucHV0LCB0YWtlcyBvbiBhY2NvdW50IHRoZSBsYW5nLCBlbnRpdHkgdHlwZSxcbiAgICogdGhlIGNvbnZlcnQgdG8gNyBFZGl0aW9uIGZsYWcsIGFuZCB0aGUgcmF3IGVudGl0eSBkYXRhLlxuICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRzIGlucHV0cyBmcm9tIHRoZSBmb3JtIHRvIGNyZWF0ZSBhbiBBY3RvclxuICAgKiBAcmV0dXJucyB7QWN0b3J9IHRoZSBmb3VuZHJ5IGBBY3RvcmAgZnJvbSB0aGUgZ2l2ZW4gYGlucHV0YCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBjcmVhdGVBY3RvciAoaW5wdXRzKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NyZWF0ZUFjdG9yOicsIGlucHV0cylcbiAgICB9XG4gICAgY29uc3QgbGFuZyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UoaW5wdXRzLmxhbmcpXG4gICAgdGhpcy5rZXlzID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0S2V5cyhsYW5nKVxuICAgIHRoaXMucmVnRXggPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRSZWd1bGFyRXhwcmVzc2lvbnMobGFuZylcbiAgICB0aGlzLml0ZW1Mb2NhdGlvbnMgPSBpbnB1dHMuc291cmNlXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1JlZ3VsYXIgRXhwcmVzc2lvbnM6JywgbGFuZywgdGhpcy5rZXlzLCB0aGlzLnJlZ0V4KVxuICAgIH1cbiAgICBsZXQgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5wYXJzZUNoYXJhY3RlcihpbnB1dHMudGV4dClcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygncGFyc2VDaGFyYWN0ZXI6JywgY2hhcmFjdGVyKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAoaW5wdXRzLmNvbnZlcnRGcm9tNkUgPT09ICdjb2MtZ3Vlc3MnICYmXG4gICAgICAgIHRoaXMubmVlZHNDb252ZXJzaW9uKGNoYXJhY3RlcikpIHx8XG4gICAgICBpbnB1dHMuY29udmVydEZyb202RSA9PT0gJ2NvYy1jb252ZXJ0J1xuICAgICkge1xuICAgICAgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5jb252ZXJ0N0UoY2hhcmFjdGVyKVxuICAgIH1cbiAgICBjb25zdCBjaGFyYWN0ZXJEYXRhID0ge1xuICAgICAgbmFtZTogY2hhcmFjdGVyLm5hbWUsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvckRhdGEoY2hhcmFjdGVyKSxcbiAgICAgIGl0ZW1zOiBhd2FpdCB0aGlzLml0ZW1zRGF0YShjaGFyYWN0ZXIpXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBpbnB1dHMudGVzdE1vZGUgIT09ICd1bmRlZmluZWQnICYmIGlucHV0cy50ZXN0TW9kZSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIGNoYXJhY3RlckRhdGFcbiAgICB9XG4gICAgY29uc3QgbnBjID0gYXdhaXQgdGhpcy5jcmVhdGVFbnRpdHkoY2hhcmFjdGVyRGF0YSwgaW5wdXRzLmVudGl0eSlcbiAgICByZXR1cm4gbnBjXG4gIH1cblxuICAvKipcbiAgICogY29udmVydDdFIENvbnZlcnRzIHRoZSBnaXZlbiBlbnRpdHkgZnJvbSA2IGVkaXRpb24gdG8gNyBlZGl0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0aGUgZW50aXR5IG9iamVjdCBhcyBvYnRhaW5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybiB0aGUgc2FtZSBvYmplY3QgYnV0IHdpdGggdXBkYXRlZCBjaGFyYWN0ZXJpc3RpY3MgZm9yIDcgZWRpdGlvblxuICAgKi9cbiAgYXN5bmMgY29udmVydDdFIChjcmVhdHVyZSkge1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdDb252ZXJ0aW5nIG5wYycsIGNyZWF0dXJlKVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdyddKSB7XG4gICAgICBpZiAodHlwZW9mIGNyZWF0dXJlW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNyZWF0dXJlW2tleV0gKj0gNVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNyZWF0dXJlLmVkdSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChjcmVhdHVyZS5lZHUgPD0gMTgpIHtcbiAgICAgICAgY3JlYXR1cmUuZWR1ICo9IDVcbiAgICAgIH0gZWxzZSBpZiAoY3JlYXR1cmUuZWR1IDw9IDI2KSB7XG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IGNyZWF0dXJlLmVkdSArIDkwIC0gMThcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNyZWF0dXJlLmVkdSA+PTI4XG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IDk5XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY3JlYXR1cmUuZGIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoY3JlYXR1cmUuZGIgPT09ICctMWQ0Jykge1xuICAgICAgICBjcmVhdHVyZS5kYiA9IC0xXG4gICAgICB9IGVsc2UgaWYgKGNyZWF0dXJlLmRiID09PSAnLTFkNicpIHtcbiAgICAgICAgY3JlYXR1cmUuZGIgPSAtMlxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnY29udmVydDdFOiAnLCBjcmVhdHVyZSlcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0dXJlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBGaWxlLCBGaWxlUGlja2VyLCBnYW1lLCB1aSAqL1xuZXhwb3J0IGNsYXNzIENvQzdEaXJlY3RvcnlQaWNrZXIgZXh0ZW5kcyBGaWxlUGlja2VyIHtcbiAgZ2V0IHRpdGxlICgpIHtcbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBpY2tEaXJlY3RvcnknKVxuICB9XG5cbiAgX29uU3VibWl0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwYXRoID0gZXZlbnQudGFyZ2V0LnRhcmdldC52YWx1ZVxuICAgIGNvbnN0IGFjdGl2ZVNvdXJjZSA9IHRoaXMuYWN0aXZlU291cmNlXG4gICAgY29uc3QgYnVja2V0ID0gZXZlbnQudGFyZ2V0LmJ1Y2tldCA/IGV2ZW50LnRhcmdldC5idWNrZXQudmFsdWUgOiBudWxsXG4gICAgdGhpcy5maWVsZC52YWx1ZSA9IENvQzdEaXJlY3RvcnlQaWNrZXIuZm9ybWF0KHtcbiAgICAgIGFjdGl2ZVNvdXJjZSxcbiAgICAgIGJ1Y2tldCxcbiAgICAgIHBhdGhcbiAgICB9KVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIERlZmF1bHREaXJlY3RvcnkgKHZhbCkge1xuICAgIHJldHVybiB2YWwgPT09IG51bGwgPyAnJyA6IFN0cmluZyh2YWwpXG4gIH1cblxuICBzdGF0aWMgZm9ybWF0ICh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5idWNrZXQgIT09IG51bGxcbiAgICAgID8gYFske3ZhbHVlLmFjdGl2ZVNvdXJjZX06JHt2YWx1ZS5idWNrZXR9XSAke3ZhbHVlLnBhdGh9YFxuICAgICAgOiBgWyR7dmFsdWUuYWN0aXZlU291cmNlfV0gJHt2YWx1ZS5wYXRofWBcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZSAocmF3KSB7XG4gICAgY29uc3Qgc3RyID0gcmF3ID8/ICcnXG4gICAgY29uc3QgbWF0Y2hlcyA9IHN0ci5tYXRjaCgvXlxcWyhbXjpdKykoOiguKykpP1xcXVxccyooLispPyQvdSlcblxuICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhY3RpdmVTb3VyY2U6IG1hdGNoZXNbMV0sXG4gICAgICAgIGJ1Y2tldDogbWF0Y2hlc1szXSA/PyAnJyxcbiAgICAgICAgY3VycmVudDogbWF0Y2hlc1s0XVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgYWN0aXZlU291cmNlOiAnZGF0YScsXG4gICAgICBidWNrZXQ6IG51bGwsXG4gICAgICBjdXJyZW50OiBzdHJcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcHJvY2Vzc0h0bWwgKGh0bWwpIHtcbiAgICAkKGh0bWwpXG4gICAgICAuZmluZCgnaW5wdXRbZGF0YS1kdHlwZT1cIkRlZmF1bHREaXJlY3RvcnlcIl0nKVxuICAgICAgLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gJChlbClcbiAgICAgICAgaW5wdXQucHJvcCgncmVhZG9ubHknLCB0cnVlKVxuICAgICAgICBpZiAoIWlucHV0Lm5leHQoKS5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBwaWNrZXIgPSBuZXcgQ29DN0RpcmVjdG9yeVBpY2tlcih7XG4gICAgICAgICAgICBmaWVsZDogaW5wdXRbMF0sXG4gICAgICAgICAgICAuLi5Db0M3RGlyZWN0b3J5UGlja2VyLnBhcnNlKGlucHV0LnZhbCgpKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgY29uc3QgcGlja2VyQnV0dG9uID0gJChcbiAgICAgICAgICAgICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImZpbGUtcGlja2VyXCIgdGl0bGU9XCInICtcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBpY2tEaXJlY3RvcnknKSArXG4gICAgICAgICAgICAgICdcIj48aSBjbGFzcz1cImZhcyBmYS1maWxlLWltcG9ydCBmYS1md1wiPjwvaT48L2J1dHRvbj4nXG4gICAgICAgICAgKVxuICAgICAgICAgIENvQzdEaXJlY3RvcnlQaWNrZXIuY3JlYXRlRGVmYXVsdERpcmVjdG9yeSgpXG4gICAgICAgICAgcGlja2VyQnV0dG9uLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHBpY2tlci5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlucHV0LnBhcmVudCgpLmFwcGVuZChwaWNrZXJCdXR0b24pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAkKGh0bWwpLmZpbmQoJ29sLmZpbGVzLWxpc3QnKS5yZW1vdmUoKVxuICAgICQoaHRtbCkuZmluZCgnZm9vdGVyIGRpdicpLnJlbW92ZSgpXG4gICAgJChodG1sKS5maW5kKCdmb290ZXIgYnV0dG9uJykudGV4dChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGlja0RpcmVjdG9yeScpKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZURlZmF1bHREaXJlY3RvcnkgKCkge1xuICAgIGNvbnN0IHBhcnNlZCA9IENvQzdEaXJlY3RvcnlQaWNrZXIucGFyc2UoXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaG9sZVVwbG9hZERpcmVjdG9yeScpXG4gICAgKVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBDb0M3RGlyZWN0b3J5UGlja2VyLmNyZWF0ZURpcmVjdG9yeShcbiAgICAgICAgcGFyc2VkLmFjdGl2ZVNvdXJjZSxcbiAgICAgICAgcGFyc2VkLmN1cnJlbnQsXG4gICAgICAgIHsgYnVja2V0OiBwYXJzZWQuYnVja2V0IH1cbiAgICAgIClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLnN0YXJ0c1dpdGgoJ0VFWElTVCcpKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXJVcGxvYWRFcnJvcicpXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeSAoZmlsZSwgZmlsZW5hbWUpIHtcbiAgICBjb25zdCBwYXJzZWQgPSBDb0M3RGlyZWN0b3J5UGlja2VyLnBhcnNlKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGhvbGVVcGxvYWREaXJlY3RvcnknKVxuICAgIClcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEZpbGVQaWNrZXIudXBsb2FkKFxuICAgICAgcGFyc2VkLmFjdGl2ZVNvdXJjZSxcbiAgICAgIHBhcnNlZC5jdXJyZW50LFxuICAgICAgbmV3IEZpbGUoW2ZpbGVdLCBmaWxlbmFtZSwge1xuICAgICAgICB0eXBlOiAnaW1hZ2UvcG5nJ1xuICAgICAgfSksXG4gICAgICB7IGJ1Y2tldDogcGFyc2VkLmJ1Y2tldCB9XG4gICAgKVxuICAgIGlmICghcmVzcG9uc2UucGF0aCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlsZVVwbG9hZEVycm9yJykpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZC5jdXJyZW50ICsgJy8nICsgZmlsZW5hbWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDT05GSUcsIGR1cGxpY2F0ZSwgZ2FtZSwgdWksIGZldGNoICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdEaXJlY3RvcnlQaWNrZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogQ29DN0FjdG9ySW1wb3J0ZXIgaGVscGVyIGNsYXNzIHRvIGltcG9ydCBhbiBBY3RvciBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlciB7XG4gIC8qKlxuICAgKiBDb21wb3NlIHRoZSBCYWNrc3RvcnkgZnJvbSB0aGUgZGlmZmVyZW50IGJsb2Nrcy5cbiAgICogQHBhcmFtIHt9IGJhY2tzdG9yeUpTT04gRGhvbGVIb3VzZSBiYWNrc3RvcnkgSlNPTlxuICAgKiBAcmV0dXJucyBIVE1MIHdpdGggdGhlIGZvcm1hdHRlZCBiYWNrc3RvcnlcbiAgICovXG4gIHN0YXRpYyBnZXRCYWNrc3RvcnkgKGJhY2tzdG9yeUpTT04pIHtcbiAgICBjb25zdCBzZWN0aW9ucyA9IFtcbiAgICAgIFsnZGVzY3JpcHRpb24nLCAnRGVzY3JpcHRpb24nXSxcbiAgICAgIFsndHJhaXRzJywgJ1RyYWl0cyddLFxuICAgICAgWydpZGVvbG9neScsICdJZGVvbG9neSddLFxuICAgICAgWydpbmp1cnVlcycsICdJbmp1cmllcycsICdpbmp1cmllcyddLFxuICAgICAgWydwZW9wbGUnLCAnUGVvcGxlJ10sXG4gICAgICBbJ3Bob2JpYXMnLCAnUGhvYmlhcyddLFxuICAgICAgWydsb2NhdGlvbnMnLCAnTG9jYXRpb25zJ10sXG4gICAgICBbJ3RvbWVzJywgJ1RvbWVzJ10sXG4gICAgICBbJ3Bvc3Nlc3Npb25zJywgJ1Bvc3Nlc3Npb25zJ10sXG4gICAgICBbJ2VuY291bnRlcnMnLCAnRW5jb3VudGVycyddXG4gICAgXVxuICAgIGNvbnN0IGJhY2tzdG9yeSA9IHtcbiAgICAgIGJsb2NrOiBbXSxcbiAgICAgIHNlY3Rpb25zOiBbXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNlY3Rpb24gb2Ygc2VjdGlvbnMpIHtcbiAgICAgIGlmIChiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VjdGlvblsyXSA9PT0gJ3VuZGVmaW5lZCcgfHwgc2VjdGlvblsyXSA9PT0gJycpIHtcbiAgICAgICAgICBzZWN0aW9uWzJdID0gc2VjdGlvblswXVxuICAgICAgICB9XG4gICAgICAgIGJhY2tzdG9yeS5ibG9jay5wdXNoKFxuICAgICAgICAgIGA8aDM+JHtzZWN0aW9uWzFdfTwvaDM+XFxuPGRpdiBjbGFzcz1cIiR7c2VjdGlvblsyXX1cIj5cXG4ke1xuICAgICAgICAgICAgYmFja3N0b3J5SlNPTltzZWN0aW9uWzBdXVxuICAgICAgICAgIH1cXG48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgYmFja3N0b3J5LnNlY3Rpb25zLnB1c2goe1xuICAgICAgICAgIHRpdGxlOiBzZWN0aW9uWzFdLFxuICAgICAgICAgIHZhbHVlOiBiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGJhY2tzdG9yeS5ibG9jayA9XG4gICAgICAnPGgyPkJhY2tzdG9yeTwvaDI+XFxuJyArIGJhY2tzdG9yeS5ibG9jay5qb2luKCdcXG4nLCBiYWNrc3RvcnkuYmxvY2spXG4gICAgcmV0dXJuIGJhY2tzdG9yeVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SlNPTn0gZGhvbGVIb3VzZURhdGEgRGhvbGVIb3VzZUpTT05cbiAgICogQHJldHVybnNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEgKGRob2xlSG91c2VEYXRhLCBvcHRpb25zKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTb3VyY2U6JywgZGhvbGVIb3VzZURhdGEpXG4gICAgfVxuICAgIGRob2xlSG91c2VEYXRhID0gZGhvbGVIb3VzZURhdGEuSW52ZXN0aWdhdG9yXG4gICAgY29uc3QgYmFja3N0b3JpZXMgPSBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZ2V0QmFja3N0b3J5KFxuICAgICAgZGhvbGVIb3VzZURhdGEuQmFja3N0b3J5XG4gICAgKVxuICAgIGNvbnN0IGNEYXRhID0ge1xuICAgICAgbmFtZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLk5hbWUsXG4gICAgICBhY3Rvcjoge1xuICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IHtcbiAgICAgICAgICBzdHI6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TVFIsIDEwKSB9LFxuICAgICAgICAgIGNvbjogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkNPTiwgMTApIH0sXG4gICAgICAgICAgc2l6OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU0laLCAxMCkgfSxcbiAgICAgICAgICBkZXg6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5ERVgsIDEwKSB9LFxuICAgICAgICAgIGFwcDogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkFQUCwgMTApIH0sXG4gICAgICAgICAgaW50OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSU5ULCAxMCkgfSxcbiAgICAgICAgICBwb3c6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5QT1csIDEwKSB9LFxuICAgICAgICAgIGVkdTogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkVEVSwgMTApIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXR0cmliczoge1xuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TYW5pdHksIDEwKSxcbiAgICAgICAgICAgIG1heDogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlNhbml0eU1heCwgMTApLFxuICAgICAgICAgICAgZGFpbHlMaW1pdDogTWF0aC5mbG9vcihkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU2FuaXR5IC8gNSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhwOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkhpdFB0cywgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSGl0UHRzTWF4LCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1wOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLk1hZ2ljUHRzLCAxMCksXG4gICAgICAgICAgICBtYXg6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5NYWdpY1B0c01heCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTHVjaywgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtb3Y6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTW92ZSwgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTW92ZSwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYjogeyB2YWx1ZTogZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkRhbWFnZUJvbnVzIH0sXG4gICAgICAgICAgYnVpbGQ6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5CdWlsZCwgMTApIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5mb3M6IHtcbiAgICAgICAgICBvY2N1cGF0aW9uOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuT2NjdXBhdGlvbixcbiAgICAgICAgICBhZ2U6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5BZ2UsXG4gICAgICAgICAgc2V4OiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuR2VuZGVyLFxuICAgICAgICAgIHJlc2lkZW5jZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLlJlc2lkZW5jZSxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuQmlydGhwbGFjZVxuICAgICAgICB9LFxuICAgICAgICBiYWNrc3Rvcnk6IGJhY2tzdG9yaWVzLmJsb2NrLFxuICAgICAgICBiaW9ncmFwaHk6IGJhY2tzdG9yaWVzLnNlY3Rpb25zLFxuICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgIGtlZXBlcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRob2xlSG91c2VBY3RvckltcG9ydGVyU291cmNlJylcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNraWxsczogYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmV4dHJhY3RTa2lsbHMoXG4gICAgICAgIGRob2xlSG91c2VEYXRhLlNraWxscy5Ta2lsbCA/PyBbXSxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKSxcbiAgICAgIHBvc3Nlc2lvbnM6IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0UG9zc2Vzc2lvbnMoXG4gICAgICAgIGRob2xlSG91c2VEYXRhLlBvc3Nlc3Npb25zPy5pdGVtID8/IFtdLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBjRGF0YVxuICB9XG5cbiAgc3RhdGljIG1ha2VTa2lsbE5hbWUgKG5hbWUsIHNwZWNpYWxpemF0aW9uKSB7XG4gICAgaWYgKHNwZWNpYWxpemF0aW9uID09PSAnTm9uZScpIHtcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gJ0FueSdcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdMYW5ndWFnZSAoT3RoZXIpJyB8fCBuYW1lID09PSAnTGFuZ3VhZ2UgKE93biknKSB7XG4gICAgICBuYW1lID0gJ0xhbmd1YWdlJ1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ09wZXJhdGUgSGVhdnkgTWFjaGluZScpIHtcbiAgICAgIG5hbWUgPSAnT3BlcmF0ZSBIZWF2eSBNYWNoaW5lcnknXG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnVGhyb3cnICYmIHNwZWNpYWxpemF0aW9uID09PSAnJykge1xuICAgICAgbmFtZSA9ICdGaWdodGluZydcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gJ1Rocm93J1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc2tpbGxOYW1lOiBzcGVjaWFsaXphdGlvbiA9PT0gJycgPyBuYW1lIDogc3BlY2lhbGl6YXRpb24sXG4gICAgICBzcGVjaWFsaXphdGlvbjogc3BlY2lhbGl6YXRpb24gPT09ICcnID8gJycgOiBuYW1lLFxuICAgICAgbmFtZTogbmFtZSArIChzcGVjaWFsaXphdGlvbiA9PT0gJycgPyAnJyA6ICcgKCcgKyBzcGVjaWFsaXphdGlvbiArICcpJylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZXh0cmFjdFNraWxscyAoZGhvbGVIb3VzZXNraWxscywgb3B0aW9ucykge1xuICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiBkaG9sZUhvdXNlc2tpbGxzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHNraWxsLnN1YnNraWxsID09PSAnTm9uZScgJiZcbiAgICAgICAgc2tpbGwudmFsdWUgPT09ICcxJyAmJlxuICAgICAgICBza2lsbC5oYWxmID09PSAnMCcgJiZcbiAgICAgICAgc2tpbGwuZmlmdGggPT09ICcwJ1xuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0cyA9IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5tYWtlU2tpbGxOYW1lKFxuICAgICAgICBza2lsbC5uYW1lLFxuICAgICAgICBza2lsbC5zdWJza2lsbCA/PyAnJ1xuICAgICAgKVxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBwYXJ0cy5uYW1lLCB7XG4gICAgICAgIHNvdXJjZTogb3B0aW9ucy5zb3VyY2UsXG4gICAgICAgIGZhbGxiYWNrQW55OiB0cnVlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxuICAgICAgICBjbG9uZWQubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9uZWQgPSBDb0NBY3Rvci5lbXB0eVNraWxsKFxuICAgICAgICAgIHBhcnRzLnNraWxsTmFtZSxcbiAgICAgICAgICBwYXJzZUludChza2lsbC52YWx1ZSA/PyAwLCAxMCksXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246XG4gICAgICAgICAgICAgIHBhcnRzLnNwZWNpYWxpemF0aW9uID09PSAnJyA/IGZhbHNlIDogcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID0gY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID8/IHt9XG4gICAgICAgIGlmIChwYXJ0cy5zcGVjaWFsaXphdGlvbiA9PT0gJ0ZpZ2h0aW5nJykge1xuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyA9IHRydWVcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID0gdHJ1ZVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5wdXNoID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIGlmIChwYXJ0cy5zcGVjaWFsaXphdGlvbiA9PT0gJ0ZpcmVhcm1zJykge1xuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtID0gdHJ1ZVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPSB0cnVlXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKHBhcnRzLnNraWxsTmFtZSA9PT0gJ0RvZGdlJykge1xuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5wdXNoID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNsb25lZC5zeXN0ZW0uc2tpbGxOYW1lID09PSAnQW55Jykge1xuICAgICAgICBjbG9uZWQubmFtZSA9IGNsb25lZC5uYW1lLnJlcGxhY2UoJyAoQW55KScsICcgKE5vbmUpJylcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5za2lsbE5hbWUgPSAnTm9uZSdcbiAgICAgIH1cbiAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHBhcnNlSW50KHNraWxsLnZhbHVlID8/IDAsIDEwKVxuICAgICAgY2xvbmVkLnN5c3RlbS52YWx1ZSA9IHBhcnNlSW50KHNraWxsLnZhbHVlID8/IDAsIDEwKVxuICAgICAgY2xvbmVkLnN5c3RlbS5mbGFncyA9IGNsb25lZC5zeXN0ZW0uZmxhZ3MgPz8ge31cbiAgICAgIGNsb25lZC5zeXN0ZW0uZmxhZ3Mub2NjdXBhdGlvbiA9XG4gICAgICAgIHNraWxsLm9jY3VwYXRpb24gPT09IHRydWUgfHwgc2tpbGwub2NjdXBhdGlvbiA9PT0gJ3RydWUnXG4gICAgICBza2lsbHMucHVzaChjbG9uZWQpXG4gICAgfVxuICAgIHJldHVybiBza2lsbHNcbiAgfVxuXG4gIHN0YXRpYyBmaW5kV2VhcG9uU2tpbGxJZCAoc2tpbGxOYW1lLCBjaGFyYWN0ZXIpIHtcbiAgICBjb25zdCBza2lsbHMgPSBjaGFyYWN0ZXIuZ2V0RW1iZWRkZWRDb2xsZWN0aW9uKCdJdGVtJylcbiAgICBjb25zdCBjaGVja05hbWUgPSBza2lsbE5hbWUucmVwbGFjZSgvXlxcKCguKylcXCkkLywgJyQxJylcbiAgICBjb25zdCBjaGFyYWN0ZXJTa2lsbCA9IHNraWxscy5maW5kKGkgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgaS5zeXN0ZW0/LnNraWxsTmFtZSA9PT0gY2hlY2tOYW1lIHx8XG4gICAgICAgIGkuc3lzdGVtPy5za2lsbE5hbWU/LmluZGV4T2YoY2hlY2tOYW1lKSA+IC0xXG4gICAgICApXG4gICAgfSlcbiAgICByZXR1cm4gY2hhcmFjdGVyU2tpbGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBleHRyYWN0UG9zc2Vzc2lvbnMgKGRob2xlaG91c2VQb3NzZXNzaW9ucywgb3B0aW9ucykge1xuICAgIGNvbnN0IGl0ZW1zID0gW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGhvbGVob3VzZVBvc3Nlc3Npb25zKSB7XG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdpdGVtJywgaXRlbS5kZXNjcmlwdGlvbiwge1xuICAgICAgICBzb3VyY2U6IG9wdGlvbnMuc291cmNlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xvbmVkID0ge1xuICAgICAgICAgIG5hbWU6IGl0ZW0uZGVzY3JpcHRpb24sXG4gICAgICAgICAgdHlwZTogJ2l0ZW0nXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGl0ZW1zLnB1c2goY2xvbmVkKVxuICAgIH1cbiAgICByZXR1cm4gaXRlbXNcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBleHRyYWN0V2VhcG9ucyAoZGhvbGVob3VzZVdlYXBvbnMsIGNoYXJhY3Rlciwgb3B0aW9ucykge1xuICAgIGNvbnN0IHdlYXBvbnMgPSBbXVxuICAgIGlmICghQXJyYXkuaXNBcnJheShkaG9sZWhvdXNlV2VhcG9ucykpIHtcbiAgICAgIGRob2xlaG91c2VXZWFwb25zID0gW2Rob2xlaG91c2VXZWFwb25zXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHdlYXBvbiBvZiBkaG9sZWhvdXNlV2VhcG9ucykge1xuICAgICAgY29uc3Qgc2tpbGwgPSBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZmluZFdlYXBvblNraWxsSWQoXG4gICAgICAgIHdlYXBvbi5za2lsbG5hbWUsXG4gICAgICAgIGNoYXJhY3RlclxuICAgICAgKVxuICAgICAgY29uc3QgZGFtYWdlID0gd2VhcG9uLmRhbWFnZS5yZXBsYWNlKC9cXCtEQi9pLCAnJylcbiAgICAgIGNvbnN0IGFkZGIgPSBkYW1hZ2UgIT09IHdlYXBvbi5kYW1hZ2VcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3dlYXBvbicsIHdlYXBvbi5uYW1lLCB7XG4gICAgICAgIHNvdXJjZTogb3B0aW9ucy5zb3VyY2VcbiAgICAgIH0pXG4gICAgICBsZXQgY2xvbmVkID0gbnVsbFxuICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY2xvbmVkID0gZHVwbGljYXRlKGV4aXN0aW5nLnRvT2JqZWN0KCkpXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lID0gc2tpbGw/Lm5hbWUgPz8gJydcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5za2lsbC5tYWluLmlkID0gc2tpbGw/LmlkID8/ICcnXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucmFuZ2UgPSBjbG9uZWQuc3lzdGVtLnJhbmdlID8/IHt9XG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsID0gY2xvbmVkLnN5c3RlbS5yYW5nZS5ub3JtYWwgPz8ge31cbiAgICAgICAgY2xvbmVkLnN5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlID0gZGFtYWdlXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uYW1tbyA9IHdlYXBvbi5hbW1vXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ubWFsZnVuY3Rpb24gPSB3ZWFwb24ubWFsZlxuICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPSBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPz8ge31cbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlID1cbiAgICAgICAgICBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpZ2h0aW5nID8/IGZhbHNlXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5ybmdkID1cbiAgICAgICAgICBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpcmVhcm0gPz8gZmFsc2VcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmFkZGIgPSBhZGRiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9uZWQgPSB7XG4gICAgICAgICAgbmFtZTogd2VhcG9uLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICAgICAgc3lzdGVtOiB7XG4gICAgICAgICAgICBza2lsbDoge1xuICAgICAgICAgICAgICBtYWluOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogc2tpbGw/Lm5hbWUgPz8gJycsXG4gICAgICAgICAgICAgICAgaWQ6IHNraWxsPy5pZCA/PyAnJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgbm9ybWFsOiB7XG4gICAgICAgICAgICAgICAgZGFtYWdlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbW1vOiB3ZWFwb24uYW1tbyxcbiAgICAgICAgICAgIG1hbGZ1bmN0aW9uOiB3ZWFwb24ubWFsZixcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgbWVsZWU6IHNraWxsPy5zeXN0ZW0ucHJvcGVydGllcz8uZmlnaHRpbmcgPz8gZmFsc2UsXG4gICAgICAgICAgICAgIHJuZ2Q6IHNraWxsPy5zeXN0ZW0ucHJvcGVydGllcz8uZmlyZWFybSA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgYWRkYlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd2VhcG9ucy5wdXNoKGNsb25lZClcbiAgICB9XG4gICAgcmV0dXJuIHdlYXBvbnNcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzYXZlUG9ydHJhaXQgKGJhc2U2NFBvcnRyYWl0LCBmaWxlTmFtZSkge1xuICAgIGNvbnN0IGJhc2U2NFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyBiYXNlNjRQb3J0cmFpdFxuICAgIClcbiAgICBjb25zdCBpbWFnZUJsb2IgPSBhd2FpdCBiYXNlNjRSZXNwb25zZS5ibG9iKClcbiAgICBjb25zdCBmaWxlUGF0aCA9IENvQzdEaXJlY3RvcnlQaWNrZXIudXBsb2FkVG9EZWZhdWx0RGlyZWN0b3J5KFxuICAgICAgaW1hZ2VCbG9iLFxuICAgICAgZmlsZU5hbWVcbiAgICApXG4gICAgcmV0dXJuIGZpbGVQYXRoXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlTlBDRnJvbURob2xlSG91c2UgKGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLCBvcHRpb25zKSB7XG4gICAgaWYgKCFnYW1lLnVzZXI/LmNhbignRklMRVNfVVBMT0FEJykpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyVXBsb2FkRXJyb3InKVxuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGNoYXJhY3RlckRhdGEgPVxuICAgICAgYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmNvbnZlcnREaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YShcbiAgICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEsXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIClcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5sb2coJ0NoYXJhY3RlciBEYXRhOicsIGNoYXJhY3RlckRhdGEpXG4gICAgfVxuICAgIGNvbnN0IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9XG4gICAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLmNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cygpXG4gICAgaWYgKCFDb0M3RGlyZWN0b3J5UGlja2VyLmNyZWF0ZURlZmF1bHREaXJlY3RvcnkoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHtcbiAgICAgIG5hbWU6IGNoYXJhY3RlckRhdGEubmFtZSxcbiAgICAgIHR5cGU6ICdjaGFyYWN0ZXInLFxuICAgICAgZm9sZGVyOiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIuaWQsXG4gICAgICBkYXRhOiBjaGFyYWN0ZXJEYXRhLmFjdG9yXG4gICAgfVxuICAgIGNvbnN0IG5wYyA9IGF3YWl0IEFjdG9yLmNyZWF0ZShhY3RvckRhdGEpXG4gICAgLy8gSWYgcG9zc2libGUgdXBsb2FkIHRoZSBpbWFnZSBwb3J0cmFpdFxuICAgIGlmIChcbiAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLkludmVzdGlnYXRvci5QZXJzb25hbERldGFpbHMuUG9ydHJhaXQ/Lmxlbmd0aCA+IDEwXG4gICAgKSB7XG4gICAgICBjb25zdCBmaWxlTmFtZSA9ICdhdmF0YXItJyArIG5wYy5pZCArICcucG5nJ1xuICAgICAgY29uc3QgcG9ydHJhaXQgPSBhd2FpdCBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuc2F2ZVBvcnRyYWl0KFxuICAgICAgICBkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YS5JbnZlc3RpZ2F0b3IuUGVyc29uYWxEZXRhaWxzLlBvcnRyYWl0LFxuICAgICAgICBmaWxlTmFtZVxuICAgICAgKVxuICAgICAgaWYgKHBvcnRyYWl0ICE9PSBmYWxzZSkge1xuICAgICAgICBucGMudXBkYXRlKHtcbiAgICAgICAgICBpbWc6IHBvcnRyYWl0XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmxvZygnSXRlbXM6ICcsIGNoYXJhY3RlckRhdGEuaXRlbXMpXG4gICAgfVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGNoYXJhY3RlckRhdGEuc2tpbGxzLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGNoYXJhY3RlckRhdGEucG9zc2VzaW9ucywge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgICBjb25zdCB3ZWFwb25zID0gYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmV4dHJhY3RXZWFwb25zKFxuICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEuSW52ZXN0aWdhdG9yLldlYXBvbnM/LndlYXBvbiA/PyBbXSxcbiAgICAgIG5wYyxcbiAgICAgIG9wdGlvbnNcbiAgICApXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdXZWFwb25zOiAnLCB3ZWFwb25zKVxuICAgIH1cbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCB3ZWFwb25zLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuXG4gICAgcmV0dXJuIG5wY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGdhbWUsIEhvb2tzLCBtZXJnZU9iamVjdCwgdWksIEZpbGVSZWFkZXIgKi9cblxuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXIgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyIH0gZnJvbSAnLi9kaG9sZWhvdXNlX2ltcG9ydGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLXJlZ2V4cC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2FjdG9yLWltcG9ydGVyJ10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXInKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2FjdG9yLWltcG9ydGVyLmh0bWwnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICB3aWR0aDogNjAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICB9KVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLmltcG9ydFR5cGUgPSBkYXRhLm9iamVjdC5pbXBvcnRUeXBlXG4gICAgZGF0YS5jb252ZXJ0NkUgPSBkYXRhLm9iamVjdC5jb252ZXJ0NkVcbiAgICBkYXRhLnNvdXJjZSA9IGRhdGEub2JqZWN0LnNvdXJjZVxuICAgIGRhdGEuY2hhcmFjdGVyRGF0YSA9IGRhdGEub2JqZWN0LmNoYXJhY3RlckRhdGFcbiAgICBkYXRhLmNhblVwbG9hZCA9IGdhbWUudXNlcj8uY2FuKCdGSUxFU19VUExPQUQnKVxuICAgIGlmIChbJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKGRhdGEuaW1wb3J0VHlwZSkpIHtcbiAgICAgIGRhdGEubGFuZ3VhZ2VzID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0VHJhbnNsYXRpb25zKClcbiAgICAgIGRhdGEubGFuZ3VhZ2UgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKFxuICAgICAgICBkYXRhLm9iamVjdC5sYW5ndWFnZVxuICAgICAgKVxuICAgICAgZGF0YS5wbGFjZWhvbGRlciA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEV4YW1wbGVUZXh0KGRhdGEubGFuZ3VhZ2UpXG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnI2Rob2xlaG91c2UtY2hhcmFjdGVyLXByZXZpZXcnKS5oaWRlKClcbiAgICBodG1sXG4gICAgICAuZmluZCgnI2NvYy1lbnRpdHktdHlwZSwjY29jLWVudGl0eS1sYW5nJylcbiAgICAgIC5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnI2Rob2xlaG91c2UtanNvbi1maWxlLXBpY2tlcicpXG4gICAgICAuY2hhbmdlKHRoaXMuX29uSlNPTkZpbGVTZWxlY3RlZC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJylcbiAgICAgIC5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBjb25zdCBjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQgPSAkKHRoaXMpXG4gICAgICAgICAgLnZhbCgpXG4gICAgICAgICAgLm1hdGNoKC9bXFx1ZGJjMC1cXHVkYmZlXVtcXHVkYzAwLVxcdWRmZmZdLylcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gJCgnI2NvYy1wcm9tcHQnKVxuICAgICAgICBpZiAocHJvbXB0LmRhdGEoJ2V4dGVuZGVkJykgJiYgY2hhcmFjdGVyc1Rvb0V4dGVuZGVkKSB7XG4gICAgICAgICAgcHJvbXB0XG4gICAgICAgICAgICAuaHRtbChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVGV4dEZpZWxkSW52YWxpZENoYXJhY3RlcnMnKSlcbiAgICAgICAgICAgIC5hZGRDbGFzcygnZXJyb3InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb21wdC5odG1sKHByb21wdC5kYXRhKCd0ZXh0JykpLnJlbW92ZUNsYXNzKCdlcnJvcicpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudHJpZ2dlcigna2V5dXAnKVxuXG4gICAgaHRtbC5maW5kKCcuc3VibWl0LWJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQ2xpY2tTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2Zvcm0nKS5zdWJtaXQoZSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm5zIGdldElucHV0cyBleHRyYWN0cyB0aGUgZGF0YSBmcm9tIHRoZSBpbnB1dCBmaWVsZHMgYW5kXG4gICAqIGFkZHMgYSBgLmAgYXQgdGhlIGVuZCBpZiBpdCdzIG5vdCBhbHJlYWR5IHRoZXJlLlxuICAgKi9cbiAgc3RhdGljIGdldElucHV0cyAoZm9ybSkge1xuICAgIGNvbnN0IGlucHV0cyA9IHt9XG4gICAgaW5wdXRzLmVudGl0eSA9IGZvcm0uZmluZCgnI2NvYy1lbnRpdHktdHlwZScpLnZhbCgpLnRyaW0oKVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdlbnRpdHkgdHlwZTonLCBpbnB1dHMuZW50aXR5KVxuICAgIH1cbiAgICBpZiAoZm9ybS5maW5kKCcjY29jLWNvbnZlcnQtNkUnKS5sZW5ndGggPiAwKSB7XG4gICAgICBpbnB1dHMuY29udmVydEZyb202RSA9IGZvcm0uZmluZCgnI2NvYy1jb252ZXJ0LTZFJykudmFsKCkudHJpbSgpXG4gICAgfVxuICAgIGlmIChmb3JtLmZpbmQoJyNjb2MtZW50aXR5LWxhbmcnKS5sZW5ndGggPiAwKSB7XG4gICAgICBpbnB1dHMubGFuZyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UoXG4gICAgICAgIGZvcm0uZmluZCgnI2NvYy1lbnRpdHktbGFuZycpLnZhbCgpLnRyaW0oKVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoZm9ybS5maW5kKCcjc291cmNlJykubGVuZ3RoID4gMCkge1xuICAgICAgaW5wdXRzLnNvdXJjZSA9IGZvcm0uZmluZCgnI3NvdXJjZScpLnZhbCgpLnRyaW0oKVxuICAgIH1cbiAgICBpZiAoZm9ybS5maW5kKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlucHV0cy50ZXh0ID0gZm9ybS5maW5kKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpLnZhbCgpLnRyaW0oKVxuICAgIH1cblxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdyZWNlaXZlZCB0ZXh0JywgJyMjJyArIGlucHV0cy50ZXh0ICsgJyMjJylcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0c1xuICB9XG5cbiAgX29uSlNPTkZpbGVTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBjb25zdCBqc29uRmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rob2xlaG91c2UtanNvbi1maWxlLXBpY2tlcicpXG4gICAgY29uc3QgcG9ydHJhaXRJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgJ2Rob2xlaG91c2UtY2hhcmFjdGVyLXBvcnRyYWl0J1xuICAgIClcbiAgICBjb25zdCBjaGFyYWN0ZXJOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rob2xlaG91c2UtY2hhcmFjdGVyLW5hbWUnKVxuICAgIGNvbnN0IHByZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGhvbGVob3VzZS1jaGFyYWN0ZXItcHJldmlldycpXG4gICAgY29uc3QgZmlsZSA9IGpzb25GaWxlSW5wdXQuZmlsZXNbMF1cbiAgICBjb25zdCBkaWFsb2cgPSB0aGlzXG4gICAgY29uc3QgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBkaWFsb2cuY2hhcmFjdGVySlNPTiA9IEpTT04ucGFyc2UoZmlsZVJlYWRlci5yZXN1bHQpXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICQoJyNjb2MtcHJvbXB0JylcbiAgICAgICAgICAuaHRtbChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVGV4dEZpZWxkSW52YWxpZEpTT04nKSlcbiAgICAgICAgICAuYWRkQ2xhc3MoJ2Vycm9yJylcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNvbnN0IHBlcnNvbmFsRGV0YWlscyA9XG4gICAgICAgIGRpYWxvZy5jaGFyYWN0ZXJKU09OPy5JbnZlc3RpZ2F0b3I/LlBlcnNvbmFsRGV0YWlsc1xuICAgICAgaWYgKCFwZXJzb25hbERldGFpbHMpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRGhvbGVIb3VzZUludmFsaWRBY3RvcicpXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjaGFyYWN0ZXJOYW1lLnRleHRDb250ZW50ID0gcGVyc29uYWxEZXRhaWxzLk5hbWVcbiAgICAgIHBvcnRyYWl0SW1hZ2Uuc3JjID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgcGVyc29uYWxEZXRhaWxzLlBvcnRyYWl0XG4gICAgICBwcmV2aWV3LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAkKCcuZGlhbG9nLmFjdG9yLWltcG9ydGVyJykuaGVpZ2h0KCdhdXRvJylcbiAgICB9XG4gICAgZmlsZVJlYWRlci5yZWFkQXNUZXh0KGZpbGUpXG4gIH1cblxuICBfb25DaGFuZ2VTdWJtaXQgKGV2ZW50KSB7XG4gICAgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gIH1cblxuICBhc3luYyBfb25DbGlja1N1Ym1pdCAoZXZlbnQpIHtcbiAgICBjb25zdCBpZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5idXR0b25cbiAgICBpZiAoaWQgPT09ICdubycpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH0gZWxzZSBpZiAoaWQgPT09ICdnZXRFeGFtcGxlTm93Jykge1xuICAgICAgY29uc3QgY29udGVudCA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEV4YW1wbGVUZXh0KFxuICAgICAgICB0aGlzLm9iamVjdC5sYW5ndWFnZVxuICAgICAgKVxuICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQoY29udGVudCkudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvcGllZCcpKVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGlkID09PSAnaW1wb3J0Jykge1xuICAgICAgY29uc3QgYXBwID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCdkaXYuZGlhbG9nLmFjdG9yLWltcG9ydGVyJylcbiAgICAgIGFwcC5oaWRlKClcbiAgICAgIGNvbnN0IGZvcm0gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJ2Zvcm0nKVxuICAgICAgY29uc3QgaW5wdXRzID0gQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuZ2V0SW5wdXRzKGZvcm0pXG4gICAgICBpZiAoaW5wdXRzLmVudGl0eSA9PT0gJ2Rob2xlaG91c2UnICYmIHRoaXMuY2hhcmFjdGVySlNPTikge1xuICAgICAgICBjb25zdCBjaGFyYWN0ZXIgPVxuICAgICAgICAgIGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5jcmVhdGVOUENGcm9tRGhvbGVIb3VzZShcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVySlNPTixcbiAgICAgICAgICAgIHsgc291cmNlOiBpbnB1dHMuc291cmNlIH1cbiAgICAgICAgICApXG4gICAgICAgIGlmIChjaGFyYWN0ZXIgIT09IGZhbHNlKSB7XG4gICAgICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ2NoYXJhY3RlcjonLCBjaGFyYWN0ZXIpXG4gICAgICAgICAgfVxuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQWN0b3JJbXBvcnRlZCcsIHtcbiAgICAgICAgICAgICAgYWN0b3JUeXBlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuQ2hhcmFjdGVyJyksXG4gICAgICAgICAgICAgIGFjdG9yTmFtZTogY2hhcmFjdGVyLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICAgIGF3YWl0IGNoYXJhY3Rlci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcHAuc2hvdygpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRzLnRleHQgJiYgaW5wdXRzLnRleHQgIT09ICcnKSB7XG4gICAgICAgIENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmltcG9ydEFjdG9yKGlucHV0cylcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcHAuc2hvdygpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kLlxuICAgKi9cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgdGhpcy5vYmplY3QuaW1wb3J0VHlwZSA9IGZvcm1EYXRhWydjb2MtZW50aXR5LXR5cGUnXVxuICAgIHRoaXMub2JqZWN0LmNoYXJhY3RlckRhdGEgPSBmb3JtRGF0YVsnY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YSddPy50cmltKClcbiAgICBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2MtY29udmVydC02RSddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3QuY29udmVydDZFID0gZm9ybURhdGFbJ2NvYy1jb252ZXJ0LTZFJ11cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnY29jLWVudGl0eS1sYW5nJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5sYW5ndWFnZSA9IGZvcm1EYXRhWydjb2MtZW50aXR5LWxhbmcnXVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGZvcm1EYXRhLnNvdXJjZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNvdXJjZSA9IGZvcm1EYXRhLnNvdXJjZVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgLyoqXG4gICAqIGltcG9ydEFjdG9yIGltcG9ydHMgYW4gQWN0b3IgdXNpbmcgdGhlIGRpYWxvZyBkYXRhXG4gICAqIEBwYXJhbSB7aHRtbH0gaHRtbFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGltcG9ydEFjdG9yIChpbnB1dHMpIHtcbiAgICBpZiAoaW5wdXRzLnRleHRbaW5wdXRzLnRleHQubGVuZ3RoXSAhPT0gJy4nKSB7XG4gICAgICBpbnB1dHMudGV4dCArPSAnLicgLy8gQWRkIGEgZG90IGEgdGhlIGVuZCB0byBoZWxwIHRoZSByZWdleCBmaW5kIHRoZSBlbmRcbiAgICB9XG4gICAgY29uc3QgYWN0b3IgPSBuZXcgQ29DN0FjdG9ySW1wb3J0ZXIoKVxuICAgIGNvbnN0IGNyZWF0ZWRBY3RvciA9IGF3YWl0IGFjdG9yLmNyZWF0ZUFjdG9yKGlucHV0cylcbiAgICAvLyBBY3RvciBjcmVhdGVkLCBOb3RpZnkgdGhlIHVzZXIgYW5kIHNob3cgdGhlIHNoZWV0LlxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdjcmVhdGVkQWN0b3I6JywgY3JlYXRlZEFjdG9yKVxuICAgIH1cbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFjdG9ySW1wb3J0ZWQnLCB7XG4gICAgICAgIGFjdG9yVHlwZTogY3JlYXRlZEFjdG9yLnR5cGU/LnRvVXBwZXJDYXNlKCksXG4gICAgICAgIGFjdG9yTmFtZTogY3JlYXRlZEFjdG9yLm5hbWVcbiAgICAgIH0pXG4gICAgKVxuICAgIGF3YWl0IGNyZWF0ZWRBY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAvLyBjb25zdCB1cGRhdGVkID0gYXdhaXQgVXBkYXRlci51cGRhdGVBY3RvcihucGMpXG4gICAgLy8gY29uc29sZS5kZWJ1ZygndXBkYXRlZDonLCB1cGRhdGVkKVxuICB9XG5cbiAgLy8gLyoqXG4gIC8vICAqIGNyZWF0ZSBpdCdzIHRoZSBkZWZhdWx0IHdlYiB0byBjcmF0ZSB0aGUgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2dcbiAgLy8gICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMuaW1wb3J0VHlwZSA9IG9wdGlvbnMuaW1wb3J0VHlwZSA/PyAnbnBjJ1xuICAgIG9wdGlvbnMubGFuZ3VhZ2UgPVxuICAgICAgb3B0aW9ucy5sYW5ndWFnZSA/PyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKG51bGwpXG4gICAgb3B0aW9ucy5jb252ZXJ0NkUgPSBvcHRpb25zLmxhbmd1YWdlID8/ICdjb2MtZ3Vlc3MnXG4gICAgb3B0aW9ucy5zb3VyY2UgPSBvcHRpb25zLnNvdXJjZSA/PyAnaXdtcydcbiAgICBvcHRpb25zLmNoYXJhY3RlckRhdGEgPSBvcHRpb25zLmNoYXJhY3RlckRhdGEgPz8gJydcblxuICAgIG5ldyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyhvcHRpb25zKS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuXG5Ib29rcy5vbmNlKCdyZWFkeScsICgpID0+IHtcbiAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ0NvQzctSW1wb3J0ZXItVGVzdHMnKT8uYWN0aXZlKSB7XG4gICAgd2luZG93LkNvQzdBY3RvckltcG9ydGVyID0gQ29DN0FjdG9ySW1wb3J0ZXJcbiAgfVxufSlcbiIsIi8qIGdsb2JhbCBEaWFsb2csIGR1cGxpY2F0ZSwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIERyb3BDb0NJRCBleHRlbmRzIERpYWxvZyB7XG4gIHN0YXRpYyBwcm9jZXNzRm9ybSAocmVzcG9uc2UsIGVsZW1lbnQsIHJlc29sdmUpIHtcbiAgICBpZiAoZWxlbWVudC5maW5kKCdpbnB1dCcpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdkcm9wQ29DSUQnLCAocmVzcG9uc2UgPyAnWScgOiAnTicpKVxuICAgIH1cbiAgICByZXNvbHZlKHJlc3BvbnNlKVxuICB9XG5cbiAgc3RhdGljIHByb2Nlc3NJdGVtIChyZXNwb25zZSwgaXRlbSkge1xuICAgIGlmIChyZXNwb25zZSAmJiBpdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkKSB7XG4gICAgICByZXR1cm4gaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgIH1cbiAgICByZXR1cm4gZHVwbGljYXRlKGl0ZW0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlICgpIHtcbiAgICBjb25zdCBkcm9wQ29DSUQgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkcm9wQ29DSUQnKVxuICAgIHN3aXRjaCAoZHJvcENvQ0lEKSB7XG4gICAgICBjYXNlICcnOlxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgY29uc3QgZGxnID0gbmV3IERyb3BDb0NJRCh7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuTmFtZScpLFxuICAgICAgICAgICAgY29udGVudDogJzxwPicgKyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5EaWFsb2cnKSArICc8L3A+PHA+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwicmVtZW1iZXJ0aGlzXCIgc3R5bGU9XCJ2ZXJ0aWNhbC1hbGlnbjogc3ViO1wiPjxsYWJlbCBmb3I9XCJyZW1lbWJlcnRoaXNcIj4nICsgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuUmVtZW1iZXInKSArICc8L2xhYmVsPjwvcD4nLFxuICAgICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2FwcCcsICdkaWFsb2cnXSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgeWVzOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnWWVzJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IChlbGVtZW50KSA9PiB7IERyb3BDb0NJRC5wcm9jZXNzRm9ybSh0cnVlLCBlbGVtZW50LCByZXNvbHZlKSB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG5vOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnTm8nKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKGVsZW1lbnQpID0+IHsgRHJvcENvQ0lELnByb2Nlc3NGb3JtKGZhbHNlLCBlbGVtZW50LCByZXNvbHZlKSB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSlcbiAgICAgIGNhc2UgJ1knOlxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgY2FzZSAnTic6XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIERyYWdEcm9wLCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgRHJvcENvQ0lEIH0gZnJvbSAnLi4vLi4vYXBwcy9kcm9wLWNvYy1pZC5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN09jY3VwYXRpb25TaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ3NraWxscycpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1kZWxldGUnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ3NraWxscycpKVxuXG4gICAgaHRtbC5maW5kKCcuZ3JvdXAtaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vbkdyb3VwSXRlbURlbGV0ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmdyb3VwLWNvbnRyb2wnKS5jbGljayh0aGlzLl9vbkdyb3VwQ29udHJvbC5iaW5kKHRoaXMpKVxuXG4gICAgY29uc3QgZHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLmRyb3BwYWJsZScsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wLmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgZHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc2tpbGwnLCBjb2xsZWN0aW9uTmFtZSA9ICdza2lsbHMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBvcHRpb25hbFNraWxsID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/LmNsYXNzTGlzdD8uY29udGFpbnMoJ29wdGlvbmFsLXNraWxscycpXG4gICAgY29uc3Qgb2wgPSBldmVudD8uY3VycmVudFRhcmdldD8uY2xvc2VzdCgnb2wnKVxuICAgIGNvbnN0IGluZGV4ID0gb2w/LmRhdGFzZXQ/Lmdyb3VwXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGxldCB1c2VDb0NJRCA9IDBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cbiAgICBjb25zdCBncm91cHMgPSB0aGlzLml0ZW0uc3lzdGVtLmdyb3VwcyA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmdyb3VwcykgOiBbXVxuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uc3lzdGVtKSBjb250aW51ZVxuICAgICAgaWYgKCFbdHlwZV0uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9uYWxTa2lsbCkge1xuICAgICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICAgIC8vIEdlbmVyaWMgc3BlY2lhbGl6YXRpb24gY2FuIGJlIGluY2x1ZGVkIG1hbnkgdGltZXNcbiAgICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlIC8vIElmIHNraWxsIGlzIGFscmVhZHkgaW4gbWFpbiBkb24ndCBhZGQgaXRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGdyb3Vwc1tpbmRleF0uc2tpbGxzLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWUgLy8gSWYgc2tpbGwgaXMgYWxyZWFkeSBpbiBncm91cCBkb24ndCBhZGQgaXRcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlQ29DSUQgPT09IDApIHtcbiAgICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgICB9XG4gICAgICAgIGdyb3Vwc1tpbmRleF0uc2tpbGxzID0gZ3JvdXBzW2luZGV4XS5za2lsbHMuY29uY2F0KFtEcm9wQ29DSUQucHJvY2Vzc0l0ZW0odXNlQ29DSUQsIGl0ZW0pXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgICAgLy8gR2VuZXJpYyBzcGVjaWFsaXphdGlvbiBjYW4gYmUgaW5jbHVkZWQgbWFueSB0aW1lc1xuICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3Vwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHNhbWUgc2tpbGwgaXMgaW4gb25lIG9mIHRoZSBncm91cCByZW1vdmUgaXQgZnJvbSB0aGUgZ3JvdXBzXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGdyb3Vwc1tpXS5za2lsbHMuZmluZEluZGV4KFxuICAgICAgICAgICAgICBlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgZ3JvdXBzW2ldLnNraWxscy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VDb0NJRCA9PT0gMCkge1xuICAgICAgICAgIHVzZUNvQ0lEID0gYXdhaXQgRHJvcENvQ0lELmNyZWF0ZSgpXG4gICAgICAgIH1cbiAgICAgICAgY29sbGVjdGlvbi5wdXNoKERyb3BDb0NJRC5wcm9jZXNzSXRlbSh1c2VDb0NJRCwgaXRlbSkpXG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmdyb3Vwcyc6IGdyb3VwcyB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBhc3luYyBfb25Hcm91cENvbnRyb2wgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICAvLyBBZGQgbmV3IGRhbWFnZSBjb21wb25lbnRcbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2FkZC1ncm91cCcpKSB7XG4gICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCkgLy8gU3VibWl0IGFueSB1bnNhdmVkIGNoYW5nZXNcbiAgICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMuY29uY2F0KFt7IG9wdGlvbnM6IDAsIHNraWxsczogW10gfV0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygncmVtb3ZlLWdyb3VwJykpIHtcbiAgICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KSAvLyBTdWJtaXQgYW55IHVuc2F2ZWQgY2hhbmdlc1xuICAgICAgY29uc3QgZ3JvdXBzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzKVxuICAgICAgY29uc3Qgb2wgPSBhLmNsb3Nlc3QoJy5pdGVtLWxpc3QuZ3JvdXAnKVxuICAgICAgZ3JvdXBzLnNwbGljZShOdW1iZXIob2wuZGF0YXNldC5ncm91cCksIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMgfSlcbiAgICB9XG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbGkgPSBvYmoucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGdyb3VwID0gb2JqLmNsb3Nlc3QoJy5ncm91cCcpXG4gICAgbGV0IGl0ZW1cbiAgICBpZiAoZ3JvdXAubGVuZ3RoKSB7XG4gICAgICBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbS5ncm91cHNbZ3JvdXAuZGF0YSgnZ3JvdXAnKV1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb25cblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJChgPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPiR7Y2hhdERhdGEudmFsdWV9PC9kaXY+YClcbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICAvLyBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykgeyBwcm9wcy5hcHBlbmQoYDxzcGFuIGNsYXNzPVwidGFnXCI+JHtwfTwvc3Bhbj5gKSB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1EZWxldGUgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUlkID0gaXRlbS5kYXRhKCdpdGVtLWlkJylcbiAgICBjb25zdCBDb0NJZCA9IGl0ZW0uZGF0YSgnY29jaWQnKVxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChpID0+IChpdGVtSWQgJiYgaS5faWQgPT09IGl0ZW1JZCkgfHwgKENvQ0lkICYmIGkgPT09IENvQ0lkKSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Hcm91cEl0ZW1EZWxldGUgKGV2ZW50KSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGdyb3VwID0gTnVtYmVyKGl0ZW0uY2xvc2VzdCgnLml0ZW0tbGlzdC5ncm91cCcpLmRhdGEoJ2dyb3VwJykpXG4gICAgY29uc3QgZ3JvdXBzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzKVxuICAgIGlmICh0eXBlb2YgZ3JvdXBzW2dyb3VwXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgICBjb25zdCBDb0NJZCA9IGl0ZW0uZGF0YSgnY29jaWQnKVxuICAgICAgY29uc3QgaXRlbUluZGV4ID0gZ3JvdXBzW2dyb3VwXS5za2lsbHMuZmluZEluZGV4KGkgPT4gKGl0ZW1JZCAmJiBpLl9pZCA9PT0gaXRlbUlkKSB8fCAoQ29DSWQgJiYgaSA9PT0gQ29DSWQpKVxuICAgICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICAgIGdyb3Vwc1tncm91cF0uc2tpbGxzLnNwbGljZShpdGVtSW5kZXgsIDEpXG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmdyb3Vwcyc6IGdyb3VwcyB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ29jY3VwYXRpb24nXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9vY2N1cGF0aW9uLmh0bWwnLFxuICAgICAgd2lkdGg6IDUyNSxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJyB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcblxuICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMgfSlcblxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RFbXB0eSA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwLCBsZW4gPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXggPCBsZW47IGluZGV4KyspIHtcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzIH0pXG5cbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLmlzRW1wdHkgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICB9XG5cbiAgICBzaGVldERhdGEub2NjdXBhdGlvblBvaW50c1N0cmluZyA9IENvQzdPY2N1cGF0aW9uU2hlZXQub2NjdXBhdGlvblBvaW50c1N0cmluZyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKVxuXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKENPQzcub2NjdXBhdGlvblByb3BlcnRpZXNba2V5XSA/IENPQzcub2NjdXBhdGlvblByb3BlcnRpZXNba2V5XSA6IG51bGwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBzdGF0aWMgb2NjdXBhdGlvblBvaW50c1N0cmluZyAob2NjdXBhdGlvblNraWxsUG9pbnRzKSB7XG4gICAgY29uc3Qgb3B0aW9ubmFsID0gW11cbiAgICBjb25zdCBtYW5kYXRvcnkgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgIGlmIChjYXJhYy5tdWx0aXBsaWVyKSB7XG4gICAgICAgIGNvbnN0IGNhcmFjTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShgQ0hBUkFDLiR7a2V5LnRvVXBwZXJDYXNlKCl9YClcbiAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkICYmIGNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgb3B0aW9ubmFsLnB1c2goYCR7Y2FyYWNOYW1lfXgke2NhcmFjLm11bHRpcGxpZXJ9YClcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQgJiYgIWNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgbWFuZGF0b3J5LnB1c2goYCR7Y2FyYWNOYW1lfXgke2NhcmFjLm11bHRpcGxpZXJ9YClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgb2NjdXBhdGlvblBvaW50c1N0cmluZyA9ICcnXG4gICAgY29uc3Qgb3JTdHJpbmcgPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9yJyl9IGBcbiAgICBpZiAobWFuZGF0b3J5Lmxlbmd0aCkgb2NjdXBhdGlvblBvaW50c1N0cmluZyArPSBtYW5kYXRvcnkuam9pbignICsgJylcbiAgICBpZiAob3B0aW9ubmFsLmxlbmd0aCAmJiBtYW5kYXRvcnkubGVuZ3RoKSB7XG4gICAgICBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IGAgKyAoJHtvcHRpb25uYWwuam9pbihvclN0cmluZyl9KWBcbiAgICB9XG4gICAgaWYgKG9wdGlvbm5hbC5sZW5ndGggJiYgIW1hbmRhdG9yeS5sZW5ndGgpIHtcbiAgICAgIG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKz0gb3B0aW9ubmFsLmpvaW4ob3JTdHJpbmcpXG4gICAgfVxuICAgIHJldHVybiBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nXG4gIH1cblxuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCBzeXN0ZW0gPSBleHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLmdyb3Vwcykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9IE9iamVjdC52YWx1ZXMoXG4gICAgICAgIHN5c3RlbS5ncm91cHMgfHwgW11cbiAgICAgIClcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLml0ZW0uc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgZm9ybURhdGFbYHN5c3RlbS5ncm91cHMuJHtpbmRleH0uc2tpbGxzYF0gPSBkdXBsaWNhdGUoXG4gICAgICAgICAgdGhpcy5pdGVtLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxsc1xuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvciwgQ2hhdE1lc3NhZ2UsIENPTlNULCBkdXBsaWNhdGUsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgSG9va3MsIG1lcmdlT2JqZWN0LCByYW5kb21JRCwgcmVuZGVyVGVtcGxhdGUsIFJvbGwsIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3T2NjdXBhdGlvblNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMnXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi9jb2M3LXBhcnNlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QtZGlhbG9nLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0ludmVzdGlnYXRvcldpemFyZCBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgaWQ6ICdpbnZlc3RpZ2F0b3Itd2l6YXJkLWFwcGxpY2F0aW9uJyxcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnaW52ZXN0aWdhdG9yLXdpemFyZCddLFxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbnZlc3RpZ2F0b3JXaXphcmQuVGl0bGUnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQuaGJzJyxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDYwMCxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgc2Nyb2xsWTogWycuc2Nyb2xsc2VjdGlvbiddLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5kcmFnZ2FibGUnLCBkcm9wU2VsZWN0b3I6IG51bGwgfV1cbiAgICB9KVxuICB9XG5cbiAgZ2V0IHBhZ2VMaXN0ICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgUEFHRV9OT05FOiAtMSxcbiAgICAgIFBBR0VfSU5UUk9EVUNUSU9OOiAwLFxuICAgICAgUEFHRV9DT05GSUdVUkFUSU9OOiAxLFxuICAgICAgUEFHRV9TRVRVUFM6IDIsXG4gICAgICBQQUdFX0FSQ0hFVFlQRVM6IDMsXG4gICAgICBQQUdFX0NIQVJBQ1RJU1RJQ1M6IDQsXG4gICAgICBQQUdFX0FUVFJJQlVURVM6IDUsXG4gICAgICBQQUdFX1ZJRVdfQVRUUklCVVRFUzogNixcbiAgICAgIFBBR0VfT0NDVVBBVElPTlM6IDcsXG4gICAgICBQQUdFX09DQ1VQQVRJT05fU0tJTExTOiA4LFxuICAgICAgUEFHRV9BUkNIRVRZUEVfU0tJTExTOiA5LFxuICAgICAgUEFHRV9QT0lOVFNfU0tJTExTOiAxMCxcbiAgICAgIFBBR0VfSU5WRVNUSUdBVE9SOiAxMSxcbiAgICAgIFBBR0VfQkFDS1NUT1JZOiAxMixcbiAgICAgIFBBR0VfQ1JFQVRFOiAxM1xuICAgIH1cbiAgfVxuXG4gIGdldCBjaGFyYWN0ZXJpc3RpY3NNZXRob2RzICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgTUVUSE9EX0RFRkFVTFQ6IDEsXG4gICAgICBNRVRIT0RfUk9MTDogMSxcbiAgICAgIE1FVEhPRF9QT0lOVFM6IDIsXG4gICAgICBNRVRIT0RfVkFMVUVTOiAzXG4gICAgfVxuICB9XG5cbiAgZ2V0IGNvY2lkQ3JlZGl0UmF0aW5nICgpIHtcbiAgICByZXR1cm4gJ2kuc2tpbGwuY3JlZGl0LXJhdGluZydcbiAgfVxuXG4gIGdldCBjb2NpZExhbmd1YWdlT3duICgpIHtcbiAgICByZXR1cm4gJ2kuc2tpbGwubGFuZ3VhZ2Utb3duJ1xuICB9XG5cbiAgZ2V0IHBhZ2VPcmRlciAoKSB7XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLnBhZ2VMaXN0XG4gICAgbGV0IHBhZ2VPcmRlciA9IFtcbiAgICAgIHBhZ2VzLlBBR0VfSU5UUk9EVUNUSU9OXG4gICAgXVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9DT05GSUdVUkFUSU9OKVxuICAgIH1cbiAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFNldHVwID09PSAnJykge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9TRVRVUFMpXG4gICAgfVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX0FSQ0hFVFlQRVMpXG4gICAgfVxuICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfQ0hBUkFDVElTVElDUylcbiAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJykpIHtcbiAgICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfQVRUUklCVVRFUylcbiAgICB9XG4gICAgcGFnZU9yZGVyID0gcGFnZU9yZGVyLmNvbmNhdChbXG4gICAgICBwYWdlcy5QQUdFX1ZJRVdfQVRUUklCVVRFUyxcbiAgICAgIHBhZ2VzLlBBR0VfT0NDVVBBVElPTlMsXG4gICAgICBwYWdlcy5QQUdFX09DQ1VQQVRJT05fU0tJTExTXG4gICAgXSlcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKSkge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9BUkNIRVRZUEVfU0tJTExTKVxuICAgIH1cbiAgICBwYWdlT3JkZXIgPSBwYWdlT3JkZXIuY29uY2F0KFtcbiAgICAgIHBhZ2VzLlBBR0VfUE9JTlRTX1NLSUxMUyxcbiAgICAgIHBhZ2VzLlBBR0VfSU5WRVNUSUdBVE9SLFxuICAgICAgcGFnZXMuUEFHRV9CQUNLU1RPUlksXG4gICAgICBwYWdlcy5QQUdFX0NSRUFURVxuICAgIF0pXG4gICAgcmV0dXJuIHBhZ2VPcmRlclxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGxvYWRDYWNoZUl0ZW1CeUNvQ0lEICgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiAvXmlcXC4vLCB0eXBlOiAnaScsIHNob3dMb2FkaW5nOiB0cnVlIH0pLnRoZW4oKGl0ZW1zKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICBsaXN0W2l0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRdID0gaXRlbVxuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUobGlzdClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGZpbHRlckNhY2hlSXRlbUJ5Q29DSUQgKHJlZ2V4cCkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhhd2FpdCB0aGlzLm9iamVjdC5jYWNoZUNvQ0lEKS5maWx0ZXIoZW50cnkgPT4gZW50cnlbMF0ubWF0Y2gocmVnZXhwKSkubWFwKGVudHJ5ID0+IGVudHJ5WzFdKVxuICB9XG5cbiAgYXN5bmMgZ2V0Q2FjaGVJdGVtQnlDb0NJRCAoaWQpIHtcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMub2JqZWN0LmNhY2hlQ29DSUQpW2lkXSA/PyBmYWxzZVxuICB9XG5cbiAgYXN5bmMgZXhwYW5kSXRlbUFycmF5IChpdGVtTGlzdCkge1xuICAgIGNvbnN0IGl0ZW1zID0gaXRlbUxpc3QuZmlsdGVyKGl0ID0+IHR5cGVvZiBpdCAhPT0gJ3N0cmluZycpXG4gICAgY29uc3QgY29jaWRzID0gaXRlbUxpc3QuZmlsdGVyKGl0ID0+IHR5cGVvZiBpdCA9PT0gJ3N0cmluZycpXG4gICAgaWYgKGNvY2lkcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IGF3YWl0IHRoaXMub2JqZWN0LmNhY2hlQ29DSURcbiAgICAgIGNvbnN0IG1pc3NpbmcgPSBbXVxuICAgICAgZm9yIChjb25zdCBjb2NpZCBvZiBjb2NpZHMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2VbY29jaWRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW1zLnB1c2goc291cmNlW2NvY2lkXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtaXNzaW5nLnB1c2goY29jaWQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtaXNzaW5nLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBlcmEgPSBnYW1lLmkxOG4uZm9ybWF0KENPQzcuZXJhc1t0aGlzLm9iamVjdC5kZWZhdWx0RXJhXSA/PyAnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogdGhpcy5vYmplY3QuZGVmYXVsdEVyYSB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IuZG9jdW1lbnRzLW5vdC1mb3VuZCcsIHsgY29jaWRzOiBtaXNzaW5nLmpvaW4oJywgJyksIGxhbmc6IGdhbWUuaTE4bi5sYW5nLCBlcmEgfSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgZ2V0QWdlQWRqdXN0bWVudHMgKCkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzKSB7XG4gICAgICB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldID0gMFxuICAgIH1cbiAgICAvLyBlZHU6IG9wdGlvbmFsIC0gbnVtYmVyIG9mIGVkdSBpbXByb3ZlbWVudCBjaGVja3NcbiAgICAvLyBkZWR1Y3Q6IG9wdGlvbmFsIC0gZGVkdWN0IFt0b3RhbF0gYmV0d2VlbiBbZnJvbV1cbiAgICAvLyByZWR1Y2U6IG9wdGlvbmFsIC0gZGVkdWN0IFt0b3RsYV0gZnJvbSBbZnJvbV1cbiAgICAvLyBsdWNrOiBvcHRpb25hbCAtIHJlcm9sbCBsdWNrIGFuZCB0YWtlIGhpZ2hlclxuICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMnKSkge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LmFnZSA+PSA0MCkge1xuICAgICAgICBjb25zdCBrZXkgPSBNYXRoLmZsb29yKHRoaXMub2JqZWN0LmFnZSAvIDEwKVxuICAgICAgICB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzID0ge1xuICAgICAgICAgIGVkdToge1xuICAgICAgICAgICAgdG90YWw6IChrZXkgLSAyID4gNCA/IDQgOiBrZXkgLSAyKSxcbiAgICAgICAgICAgIHJvbGxlZDogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlZHVjdDoge1xuICAgICAgICAgICAgdG90YWw6IChrZXkgPiAxID8gNSAqIE1hdGgucG93KDIsIGtleSAtIDQpIDogMCksXG4gICAgICAgICAgICBmcm9tOiBbJ3N0cicsICdjb24nLCAnZGV4J10sXG4gICAgICAgICAgICB2YWx1ZXM6IHt9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZWR1Y2U6IHtcbiAgICAgICAgICAgIHRvdGFsOiAoa2V5IC0gMykgKiA1LFxuICAgICAgICAgICAgZnJvbTogJ2FwcCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuYWdlID49IDIwKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMgPSB7XG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB0b3RhbDogMSxcbiAgICAgICAgICAgIHJvbGxlZDogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuYWdlID49IDE1KSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMgPSB7XG4gICAgICAgICAgZGVkdWN0OiB7XG4gICAgICAgICAgICB0b3RhbDogNSxcbiAgICAgICAgICAgIGZyb206IFsnc3RyJywgJ3NpeiddLFxuICAgICAgICAgICAgdmFsdWVzOiB7fVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVkdWNlOiB7XG4gICAgICAgICAgICB0b3RhbDogNSxcbiAgICAgICAgICAgIGZyb206ICdlZHUnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsdWNrOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW3RoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMucmVkdWNlLmZyb21dID0gLXRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMucmVkdWNlLnRvdGFsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuXG4gICAgc2hlZXREYXRhLnBhZ2VzID0gdGhpcy5wYWdlTGlzdFxuXG4gICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5jcmVhdGVCdXR0b24gPSBmYWxzZVxuXG4gICAgbGV0IHNldHVwXG4gICAgbGV0IGFyY2hldHlwZVxuICAgIGxldCBvY2N1cGF0aW9uXG5cbiAgICBsZXQgc2hvd01vbmV0YXJ5ID0gZmFsc2VcblxuICAgIHN3aXRjaCAoc2hlZXREYXRhLm9iamVjdC5zdGVwKSB7XG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0lOVFJPRFVDVElPTjpcbiAgICAgICAgc2hlZXREYXRhLmVyYSA9IGdhbWUuaTE4bi5mb3JtYXQoQ09DNy5lcmFzW3NoZWV0RGF0YS5vYmplY3QuZGVmYXVsdEVyYV0gPz8gJ0NvQzcuQ29DSURGbGFnLmVycm9yLnVua25vd24tZXJhJywgeyBlcmE6IHNoZWV0RGF0YS5vYmplY3QuZGVmYXVsdEVyYSB9KVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9DT05GSUdVUkFUSU9OOlxuICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLnNldHVwXFwuLylcbiAgICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbnMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwub2NjdXBhdGlvblxcLi8pXG4gICAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZXMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwuYXJjaGV0eXBlXFwuLylcbiAgICAgICAgICBzZXR1cCA9IHNoZWV0RGF0YS5zZXR1cHMuZmluZChzID0+IHMuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPT09IHNoZWV0RGF0YS5vYmplY3QuZGVmYXVsdFNldHVwKVxuICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dXAgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzaGVldERhdGEub2JqZWN0LmRlZmF1bHRTZXR1cCA9ICcnXG4gICAgICAgICAgICBzaGVldERhdGEub2JqZWN0LnNldHVwID0gJydcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKHNldHVwLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSlcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLm93bmVyc2hpcCA9IHtcbiAgICAgICAgICAgIFtDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVdOiAnT1dORVJTSElQLk5PTkUnLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTElNSVRFRF06ICdPV05FUlNISVAuTElNSVRFRCcsXG4gICAgICAgICAgICBbQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PQlNFUlZFUl06ICdPV05FUlNISVAuT0JTRVJWRVInLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVJdOiAnT1dORVJTSElQLk9XTkVSJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuX2VyYXMgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5fZXJhcy5wdXNoKHtcbiAgICAgICAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMgPSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHNcbiAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0RFRkFVTFRcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfUE9JTlRTXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFU1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuX2VyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgc2hlZXREYXRhLmhhc0FyY2hldHlwZXMgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpXG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9TRVRVUFM6XG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LmRlZmF1bHRTZXR1cCA9PT0gJycpIHtcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLnNldHVwXFwuLylcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgICAgICAgc2V0dXAgPSBzaGVldERhdGEuc2V0dXBzLmZpbmQocyA9PiBzLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBzaGVldERhdGEub2JqZWN0LnNldHVwKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZXR1cCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKHNldHVwLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSlcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQVJDSEVUWVBFUzpcbiAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZXMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwuYXJjaGV0eXBlXFwuLylcbiAgICAgICAgaWYgKHNoZWV0RGF0YS5hcmNoZXR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGVzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LmFyY2hldHlwZSAhPT0gJycpIHtcbiAgICAgICAgICAgIGFyY2hldHlwZSA9IHNoZWV0RGF0YS5hcmNoZXR5cGVzLmZpbmQocyA9PiBzLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBzaGVldERhdGEub2JqZWN0LmFyY2hldHlwZSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJjaGV0eXBlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzaGVldERhdGEuZGVzY3JpcHRpb24gPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoYXJjaGV0eXBlLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSlcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmJvbnVzUG9pbnRzID0gYXJjaGV0eXBlLnN5c3RlbS5ib251c1BvaW50c1xuICAgICAgICAgICAgICBjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWMgaW4gYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1tjb3JlQ2hhcmFjdGVyaXN0aWNdKSB7XG4gICAgICAgICAgICAgICAgICBjb3JlQ2hhcmFjdGVyaXN0aWNzLnB1c2goY29yZUNoYXJhY3RlcmlzdGljKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoY29yZUNoYXJhY3RlcmlzdGljcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgPSAnJ1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvcmVDaGFyYWN0ZXJpc3RpY3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljID0gY29yZUNoYXJhY3RlcmlzdGljc1swXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWMgPSBjb3JlQ2hhcmFjdGVyaXN0aWNzLm1hcChjID0+IGMudG9Mb2NhbGVVcHBlckNhc2UoKSkuam9pbignICcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKSArICcgJylcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGxzID0gW11cbiAgICAgICAgICAgICAgYXJjaGV0eXBlLnN5c3RlbS5za2lsbHMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShhcmNoZXR5cGUuc3lzdGVtLnNraWxscylcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBhcmNoZXR5cGUuc3lzdGVtLnNraWxscykge1xuICAgICAgICAgICAgICAgIHNraWxscy5wdXNoKHNraWxsLm5hbWUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLnNraWxscyA9IHNraWxscy5qb2luKCcsICcpXG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5zdWdnZXN0ZWRPY2N1cGF0aW9ucyA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChhcmNoZXR5cGUuc3lzdGVtLnN1Z2dlc3RlZE9jY3VwYXRpb25zKVxuICAgICAgICAgICAgICBzaGVldERhdGEuc3VnZ2VzdGVkVHJhaXRzID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGFyY2hldHlwZS5zeXN0ZW0uc3VnZ2VzdGVkVHJhaXRzKVxuICAgICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9DSEFSQUNUSVNUSUNTOlxuICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcyA9IHRoaXMuY2hhcmFjdGVyaXN0aWNzTWV0aG9kc1xuICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1JPTExcbiAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2V0dXAgIT09ICcnKSB7XG4gICAgICAgICAgc2V0dXAgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Quc2V0dXApXG4gICAgICAgICAgaWYgKHR5cGVvZiBzZXR1cCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkIHx8IHRoaXMub2JqZWN0LmVuZm9yY2VQb2ludEJ1eSkge1xuICAgICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1BPSU5UU1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfVkFMVUVTXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuc2V0dXAgPSB7XG4gICAgICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgICAgICBwb2ludHM6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlLFxuICAgICAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdzdHInLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5zdHIsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TdHJlbmd0aCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ2NvbicsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmNvbixcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkNvbnN0aXR1dGlvbidcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ3NpeicsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLnNpeixcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlNpemUnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdkZXgnLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5kZXgsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5EZXh0ZXJpdHknXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdhcHAnLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5hcHAsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5BcHBlYXJhbmNlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnaW50JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuaW50LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuSW50ZWxsaWdlbmNlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAncG93JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMucG93LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuUG93ZXInXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdlZHUnLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lZHUsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5FZHVjYXRpb24nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBsdWNrOiB7XG4gICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5sdWNrLFxuICAgICAgICAgICAgICAgIGxhYmVsOiAnQ29DNy5MdWNrJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljcyA9IFtdXG4gICAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICAgICAgICAgIGFyY2hldHlwZSA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJjaGV0eXBlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY29yZUNoYXJhY3RlcmlzdGljIGluIGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljcykge1xuICAgICAgICAgICAgICAgICAgaWYgKGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1tjb3JlQ2hhcmFjdGVyaXN0aWNdKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIGtleTogY29yZUNoYXJhY3RlcmlzdGljLFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoc2hlZXREYXRhLnNldHVwLmNoYXJhY3RlcmlzdGljcy5maW5kKGMgPT4gYy5rZXkgPT09IGNvcmVDaGFyYWN0ZXJpc3RpYyk/LmxhYmVsID8/ICdVbmtub3duJylcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3Muc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLnNldHVwLmNoYXJhY3RlcmlzdGljcy5maW5kKGMgPT4gYy5rZXkgPT09IHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYykucm9sbCA9IGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEudmFsdWVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlbXB0aWVzID0gZmFsc2VcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNoZWV0RGF0YS5vYmplY3Quc2V0dXBQb2ludHMpIHtcbiAgICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2V0dXBQb2ludHNba2V5XSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5zZXR1cC50b3RhbCArPSBwYXJzZUludChzaGVldERhdGEub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbXB0aWVzID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWMgPSB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMudG9Mb2NhbGVVcHBlckNhc2UoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlbXB0aWVzICYmIHRoaXMub2JqZWN0LmFnZSA+PSAxNSkge1xuICAgICAgICAgICAgICBpZiAoW3NoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9ST0xMLCBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfVkFMVUVTXS5pbmNsdWRlcyhzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kKSkge1xuICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNoZWV0RGF0YS5zZXR1cC50b3RhbC50b1N0cmluZygpID09PSBzaGVldERhdGEuc2V0dXAucG9pbnRzKSB7XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9BVFRSSUJVVEVTOlxuICAgICAgICBzaGVldERhdGEucHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpXG4gICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICBzaGVldERhdGEucG9pbnRzID0ge31cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMpIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzW2tleV0gPSB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApLFxuICAgICAgICAgICAgbWluOiAtcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgMSxcbiAgICAgICAgICAgIGxhYmVsOiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMoa2V5KS5sYWJlbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1ICE9PSAndW5kZWZpbmVkJyAmJiAhdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUucm9sbGVkKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5kZWR1Y3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmRlZHVjdFRvdGFsID0gMFxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LmZyb20pIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCA9IHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCAtIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuZGVkdWN0RnJvbSA9IHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LmZyb20ubWFwKG4gPT4gbi50b0xvY2FsZVVwcGVyQ2FzZSgpKS5qb2luKCcsICcpLnJlcGxhY2UoLywgKFthLXpdKykkL2ksICcsIG9yICQxJylcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLmRlZHVjdFRvdGFsICE9PSB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmRlZHVjdC50b3RhbCkge1xuICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMucmVkdWNlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNoZWV0RGF0YS5yZWR1Y2VGcm9tID0gdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UuZnJvbS50b0xvY2FsZVVwcGVyQ2FzZSgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmx1Y2sgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmx1Y2tWYWx1ZSA9IE1hdGgubWF4KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzLmx1Y2ssIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzLmx1Y2spXG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzLmx1Y2sgPT09IDApIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9WSUVXX0FUVFJJQlVURVM6XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycykge1xuICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHNba2V5XSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCksXG4gICAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgICAgc3VmZml4OiAnJScsXG4gICAgICAgICAgICBsYWJlbDogQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKGtleSkubGFiZWxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5kYiA9IHtcbiAgICAgICAgICB2YWx1ZTogQ29DQWN0b3IuZGJGcm9tQ2hhcmFjdGVyaXN0aWNzKHNoZWV0RGF0YS5wb2ludHMpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuQm9udXNEYW1hZ2UnXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTmFOKHNoZWV0RGF0YS5wb2ludHMuZGIudmFsdWUpIHx8IE51bWJlcihzaGVldERhdGEucG9pbnRzLmRiLnZhbHVlKSA+PSAwKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnBvaW50cy5kYi5wcmVmaXggPSAnKydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLmJ1aWxkID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5idWlsZEZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cyksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5CdWlsZCdcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyKHNoZWV0RGF0YS5wb2ludHMuYnVpbGQudmFsdWUpID49IDApIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzLmJ1aWxkLnByZWZpeCA9ICcrJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMuaHAgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLmhwRnJvbUNoYXJhY3RlcmlzdGljcyhzaGVldERhdGEucG9pbnRzLCAnY2hhcmFjdGVyJyksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5IaXRQb2ludHMnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5ocC5wcmVmaXggPSBzaGVldERhdGEucG9pbnRzLmhwLnZhbHVlICsgJy8nXG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMubXAgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLm1wRnJvbUNoYXJhY3RlcmlzdGljcyhzaGVldERhdGEucG9pbnRzKSxcbiAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgIHN1ZmZpeDogJycsXG4gICAgICAgICAgbGFiZWw6ICdDb0M3Lk1hZ2ljUG9pbnRzJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMubXAucHJlZml4ID0gc2hlZXREYXRhLnBvaW50cy5tcC52YWx1ZSArICcvJ1xuICAgICAgICBzaGVldERhdGEucG9pbnRzLnNhbiA9IHtcbiAgICAgICAgICB2YWx1ZTogc2hlZXREYXRhLnBvaW50cy5wb3cudmFsdWUsXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcvOTknLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5TYW5pdHknXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5tb3YgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLm1vdkZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cywgJ2NoYXJhY3RlcicsIHRoaXMub2JqZWN0LmFnZSksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5Nb3ZlbWVudCdcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9PQ0NVUEFUSU9OUzpcbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb25zID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLm9jY3VwYXRpb25cXC4vKVxuICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbnMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0Lm9jY3VwYXRpb24gIT09ICcnKSB7XG4gICAgICAgICAgb2NjdXBhdGlvbiA9IHNoZWV0RGF0YS5vY2N1cGF0aW9ucy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5vY2N1cGF0aW9uKVxuICAgICAgICAgIGlmICh0eXBlb2Ygb2NjdXBhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5kZXNjcmlwdGlvbiA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChvY2N1cGF0aW9uLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSlcbiAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nID0gQ29DN09jY3VwYXRpb25TaGVldC5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nKG9jY3VwYXRpb24uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cylcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmcgPSBvY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmdcbiAgICAgICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbCA9IG9jY3VwYXRpb24uc3lzdGVtLnBlcnNvbmFsXG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxzID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkob2NjdXBhdGlvbi5zeXN0ZW0uc2tpbGxzKVxuICAgICAgICAgICAgc2hlZXREYXRhLmdyb3VwcyA9IHt9XG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICBzaGVldERhdGEuZ3JvdXBzW2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbaW5kZXhdLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgc2tpbGxzOiBbXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLnBvaW50cyA9IDBcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXVxuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBjYXJhY10gb2YgT2JqZWN0LmVudHJpZXMob2NjdXBhdGlvbi5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKSkge1xuICAgICAgICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FyYWMub3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaChjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSkpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMgKz0gY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMgKz0gTWF0aC5tYXgoLi4ub3B0aW9ucylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0lOVkVTVElHQVRPUjpcbiAgICAgICAgc2hlZXREYXRhLmxhbmd1YWdlID0gKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW3RoaXMuY29jaWRMYW5ndWFnZU93bl0gIT09ICd1bmRlZmluZWQnKVxuICAgICAgICBpZiAoc2hlZXREYXRhLmxhbmd1YWdlKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmxhbmd1YWdlTmFtZSA9IHRoaXMub2JqZWN0LnNraWxsSXRlbXNbdGhpcy5jb2NpZExhbmd1YWdlT3duXS5pdGVtLm5hbWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldERhdGEubGFuZ3VhZ2VOYW1lID0gJydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9PQ0NVUEFUSU9OX1NLSUxMUzpcbiAgICAgICAgc2hlZXREYXRhLmRlZmF1bHQgPSAwXG4gICAgICAgIHNoZWV0RGF0YS5zZWxlY3RlZCA9IDBcbiAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMgPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zKSB7XG4gICAgICAgICAgbGV0IGdyb3VwID0gJ290aGVyJ1xuICAgICAgICAgIGNvbnN0IHJvd3MgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLmxlbmd0aFxuICAgICAgICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFncy5pc011bHRpcGxlXG4gICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4OiAtMSxcbiAgICAgICAgICAgICAgbmFtZTogc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lLFxuICAgICAgICAgICAgICBncm91cCxcbiAgICAgICAgICAgICAgdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc011bHRpcGxlOiB0cnVlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJvd3M7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBpc1BpY2thYmxlID0gZmFsc2VcbiAgICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pc09jY3VwYXRpb25EZWZhdWx0KSB7XG4gICAgICAgICAgICAgIGdyb3VwID0gJ2RlZmF1bHQnXG4gICAgICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgaXNQaWNrYWJsZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzaGVldERhdGEuZGVmYXVsdCsrXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmluT2NjdXBhdGlvbkdyb3VwICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBncm91cCA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmluT2NjdXBhdGlvbkdyb3VwXG4gICAgICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgaXNQaWNrYWJsZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSAnb3RoZXInXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdG9nZ2xlID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0ub2NjdXBhdGlvblRvZ2dsZVxuICAgICAgICAgICAgaWYgKGlzUGlja2FibGUpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzcGVjaWFsaXphdGlvbiA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICBsZXQgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICBsZXQgcGlja2VkID0gZmFsc2VcbiAgICAgICAgICAgIGxldCBkZWxldGVhYmxlID0gZmFsc2VcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIHBpY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHBpY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb24gPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZC5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvZ2dsZSB8fCAoaXNQaWNrYWJsZSAmJiBwaWNrZWQpKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5zZWxlY3RlZCsrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZVxuICAgICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5jb2NpZExhbmd1YWdlT3duKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzUGlja2FibGUgJiYgcGlja2VkKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQaWNrYWJsZSAmJiBwaWNrZWQpIHtcbiAgICAgICAgICAgICAgZGVsZXRlYWJsZSA9ICFzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5hcmNoZXR5cGVUb2dnbGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBncm91cDogZ3JvdXAudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdG9nZ2xlLFxuICAgICAgICAgICAgICBpc0NyZWRpdFJhdGluZzogc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uaXNDcmVkaXRSYXRpbmcsXG4gICAgICAgICAgICAgIGlzTXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlLFxuICAgICAgICAgICAgICBwaWNrZWQsXG4gICAgICAgICAgICAgIGRlbGV0ZWFibGUsXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uLFxuICAgICAgICAgICAgICBza2lsbE5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5tYXggPSBwYXJzZUludChzaGVldERhdGEuZGVmYXVsdCwgMTApICsgcGFyc2VJbnQoc2hlZXREYXRhLm9iamVjdC5wZXJzb25hbCwgMTApICsgT2JqZWN0LnZhbHVlcyhzaGVldERhdGEub2JqZWN0Lm9jY3VwYXRpb25Hcm91cHMpLnJlZHVjZSgocywgdikgPT4gcyArIHBhcnNlSW50KHYsIDEwKSwgMClcbiAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgIGlmIChzaGVldERhdGEuc2VsZWN0ZWQgPT09IHNoZWV0RGF0YS5tYXgpIHtcbiAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0FSQ0hFVFlQRV9TS0lMTFM6XG4gICAgICAgIHNoZWV0RGF0YS5tYXggPSAwXG4gICAgICAgIHNoZWV0RGF0YS5zZWxlY3RlZCA9IDBcbiAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMgPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zKSB7XG4gICAgICAgICAgbGV0IGdyb3VwID0gJ290aGVyJ1xuICAgICAgICAgIGNvbnN0IHJvd3MgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLmxlbmd0aFxuICAgICAgICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFncy5pc011bHRpcGxlXG4gICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4OiAtMSxcbiAgICAgICAgICAgICAgbmFtZTogc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lLFxuICAgICAgICAgICAgICBncm91cCxcbiAgICAgICAgICAgICAgdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc011bHRpcGxlOiB0cnVlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJvd3M7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBpc1BpY2thYmxlID0gZmFsc2VcbiAgICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pc0FyY2hldHlwZURlZmF1bHQpIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSAnZGVmYXVsdCdcbiAgICAgICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICBpc1BpY2thYmxlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5tYXgrK1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSAnb3RoZXInXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdG9nZ2xlID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uYXJjaGV0eXBlVG9nZ2xlXG4gICAgICAgICAgICBpZiAoaXNQaWNrYWJsZSkge1xuICAgICAgICAgICAgICB0b2dnbGUgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNwZWNpYWxpemF0aW9uID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIGxldCBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgIGxldCBwaWNrZWQgPSBmYWxzZVxuICAgICAgICAgICAgbGV0IGRlbGV0ZWFibGUgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgcGlja2VkID0gdHJ1ZVxuICAgICAgICAgICAgICBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZFxuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgcGlja2VkID0gdHJ1ZVxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbiA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZC5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG9nZ2xlIHx8IChpc1BpY2thYmxlICYmIHBpY2tlZCkpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnNlbGVjdGVkKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lXG4gICAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmNvY2lkTGFuZ3VhZ2VPd24pIHtcbiAgICAgICAgICAgICAgbmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNQaWNrYWJsZSAmJiBwaWNrZWQpIHtcbiAgICAgICAgICAgICAgbmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BpY2thYmxlICYmIHBpY2tlZCkge1xuICAgICAgICAgICAgICBkZWxldGVhYmxlID0gIXNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLm9jY3VwYXRpb25Ub2dnbGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBncm91cDogZ3JvdXAudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdG9nZ2xlLFxuICAgICAgICAgICAgICBpc0NyZWRpdFJhdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzTXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlLFxuICAgICAgICAgICAgICBwaWNrZWQsXG4gICAgICAgICAgICAgIGRlbGV0ZWFibGUsXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uLFxuICAgICAgICAgICAgICBza2lsbE5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICBpZiAoc2hlZXREYXRhLnNlbGVjdGVkID09PSBzaGVldERhdGEubWF4KSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9QT0lOVFNfU0tJTExTOlxuICAgICAgICBzaGVldERhdGEuc2tpbGxzID0gW11cbiAgICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ09rYXkgPSAhKHRoaXMub2JqZWN0LmNyZWRpdFJhdGluZy5tYXggPiAwKVxuICAgICAgICBzaGVldERhdGEucGVyc29uYWwgPSB7XG4gICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgdG90YWw6IDIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5pbnQsIDEwKSksXG4gICAgICAgICAgcmVtYWluaW5nOiAwXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24gPSB7XG4gICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgcmVtYWluaW5nOiAwXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZSA9IHtcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICByZW1haW5pbmc6IDBcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5zZXR1cCAhPT0gJycpIHtcbiAgICAgICAgICBzaG93TW9uZXRhcnkgPSAoYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHNoZWV0RGF0YS5vYmplY3Quc2V0dXApKS5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzLmxlbmd0aCA+IDBcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5vY2N1cGF0aW9uICE9PSAnJykge1xuICAgICAgICAgIG9jY3VwYXRpb24gPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Qub2NjdXBhdGlvbilcbiAgICAgICAgICBpZiAob2NjdXBhdGlvbikge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGNhcmFjXSBvZiBPYmplY3QuZW50cmllcyhvY2N1cGF0aW9uLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHMpKSB7XG4gICAgICAgICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGlmIChjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKGNhcmFjLm11bHRpcGxpZXIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24udG90YWwgKz0gY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLnRvdGFsICs9IE1hdGgubWF4KC4uLm9wdGlvbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICAgICAgY29uc3QgYXJjaGV0eXBlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRCh0aGlzLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgICAgICAgaWYgKGFyY2hldHlwZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGUudG90YWwgPSBhcmNoZXR5cGVbMF0uc3lzdGVtLmJvbnVzUG9pbnRzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm9iamVjdC5za2lsbEl0ZW1zKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2tpbGxJdGVtcykge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV1cbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBza2lsbC5yb3dzLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICAgICAgICBjb25zdCByb3cgPSBza2lsbC5yb3dzW2luZGV4XVxuICAgICAgICAgICAgICBpZiAoIXNraWxsLmZsYWdzLmlzTXVsdGlwbGUgfHwgcm93LnNlbGVjdGVkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gZHVwbGljYXRlKHNraWxsLml0ZW0pXG4gICAgICAgICAgICAgICAgaWYgKHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UgJiYgdHlwZW9mIHJvdy5zZWxlY3RlZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIGl0ZW0gPSBkdXBsaWNhdGUocm93LnNlbGVjdGVkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgYmFzZSA9IGl0ZW0uc3lzdGVtLmJhc2VcbiAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cCgnQCcgKyBrZXksICdpJylcbiAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGJhc2UucmVwbGFjZShyZWdFeCwgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgICAgICAgIGJhc2UgPSBNYXRoLmZsb29yKG5ldyBSb2xsKGJhc2UpLmV2YWx1YXRlKHsgYXN5bmM6IGZhbHNlIH0pLnRvdGFsKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgdG90YWxQb2ludHMgPSBwYXJzZUludChiYXNlLCAxMClcbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5wZXJzb25hbFBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIocm93LnBlcnNvbmFsUG9pbnRzKVxuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLnBlcnNvbmFsLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5vY2N1cGF0aW9uUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cub2NjdXBhdGlvblBvaW50cylcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbnVtID0gTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpXG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5leHBlcmllbmNlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cuZXhwZXJpZW5jZVBvaW50cylcbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzID0gdG90YWxQb2ludHMgKyBudW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmNvY2lkTGFuZ3VhZ2VPd24pIHtcbiAgICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyBpdGVtLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNraWxsLmZsYWdzLmlzQ3JlZGl0UmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZSArICcgWycgKyB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWluICsgJyAtICcgKyB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4ICsgJ10nXG4gICAgICAgICAgICAgICAgICBpZiAodG90YWxQb2ludHMgPj0gdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1pbiAmJiB0b3RhbFBvaW50cyA8PSB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4KSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdPa2F5ID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJvdy5zZWxlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyByb3cuc2VsZWN0ZWQgKyAnKSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLnNraWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgIGlzT2NjdXBhdGlvbjogcm93Lm9jY3VwYXRpb25Ub2dnbGUsXG4gICAgICAgICAgICAgICAgICBpc0FyY2hldHlwZTogcm93LmFyY2hldHlwZVRvZ2dsZSxcbiAgICAgICAgICAgICAgICAgIGJhc2UsXG4gICAgICAgICAgICAgICAgICBwZXJzb25hbFBvaW50czogcm93LnBlcnNvbmFsUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgb2NjdXBhdGlvblBvaW50czogcm93Lm9jY3VwYXRpb25Qb2ludHMsXG4gICAgICAgICAgICAgICAgICBhcmNoZXR5cGVQb2ludHM6IHJvdy5hcmNoZXR5cGVQb2ludHMsXG4gICAgICAgICAgICAgICAgICBleHBlcmllbmNlUG9pbnRzOiByb3cuZXhwZXJpZW5jZVBvaW50cyxcbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgc2hvd0NyZWRpdFJhdGluZzogc2hvd01vbmV0YXJ5ICYmIGtleSA9PT0gdGhpcy5jb2NpZENyZWRpdFJhdGluZ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLmNyZWRpdFJhdGluZ09rYXkpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbC5yZW1haW5pbmcgPSBzaGVldERhdGEucGVyc29uYWwudG90YWwgLSBzaGVldERhdGEucGVyc29uYWwuY291bnRcbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24ucmVtYWluaW5nID0gc2hlZXREYXRhLm9jY3VwYXRpb24udG90YWwgLSBzaGVldERhdGEub2NjdXBhdGlvbi5jb3VudFxuICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLnJlbWFpbmluZyA9IHNoZWV0RGF0YS5hcmNoZXR5cGUudG90YWwgLSBzaGVldERhdGEuYXJjaGV0eXBlLmNvdW50XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQkFDS1NUT1JZOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgYWxsQmFja3N0b3JpZXMgPSBhd2FpdCB0aGlzLm9iamVjdC5jYWNoZUJhY2tzdG9yaWVzXG4gICAgICAgICAgc2hlZXREYXRhLmJhY2tzdG9yaWVzID0ge31cbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuYmFja3N0b3JpZXNbaW5kZXhdID0ge1xuICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLm5hbWUsXG4gICAgICAgICAgICAgIHJvbGxzOiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCh0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0ua2V5LCBhbGxCYWNrc3RvcmllcykubGVuZ3RoID8gdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLmtleSA6ICcnKSxcbiAgICAgICAgICAgICAgdmFsdWU6IHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQ1JFQVRFOlxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5rZXlwcmVzcyhlID0+IC90ZXh0YXJlYS9pLnRlc3QoKGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudCkudGFnTmFtZSkgfHwgKGUua2V5Q29kZSB8fCBlLndoaWNoIHx8IGUuY2hhckNvZGUgfHwgMCkgIT09IDEzKVxuICAgIGh0bWwuZmluZCgnLnN1Ym1pdF9vbl9jaGFuZ2UnKS5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yb2xsLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pbmNyZWFzZS0xMC1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYzEwLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaW5jcmVhc2UtY2hhcmFjdGVyaXN0aWMnKS5jbGljayh0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWNyZWFzZS1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRlY3JlYXNlLTEwLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5yb2xsX2FsbCcpLmNsaWNrKHRoaXMuX29uUm9sbEFsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uLnJvbGxfZWR1JykuY2xpY2sodGhpcy5fb25Sb2xsRWR1LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24ucm9sbF9sdWNrJykuY2xpY2sodGhpcy5fb25Sb2xsTHVjay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0gaW5wdXQuc3VibWl0X29uX2JsdXInKS5ibHVyKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbSBpbnB1dC5zYXZlLWNoYXJhY3RlcmlzdGljLW9uLWJsdXInKS5ibHVyKHRoaXMuX29uQ2hhbmdlU2F2ZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbS50b2dnbGVhYmxlJykuY2xpY2sodGhpcy5fb25Ub2dnbGVTa2lsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0uY2xpY2thYmxlJykuY2xpY2sodGhpcy5fb25DbGlja1BpY2tTa2lsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNraWxscy1saXN0IGlucHV0JykuY2xpY2sodGhpcy5fb25DbGlja1NraWxsU3BlY2lhbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNraWxscy1saXN0IC5yZW1vdmUtc2tpbGwnKS5jbGljayh0aGlzLl9vbkNsaWNrUmVtb3ZlU2tpbGwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtIGlucHV0LnNraWxsLWFkanVzdG1lbnQnKS5ibHVyKHRoaXMuX29uQ2hhbmdlU2tpbGxQb2ludHMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ3RleHRhcmVhLmJhY2tzdG9yeS10ZXh0Jykua2V5dXAodGhpcy5fb25DaGFuZ2VCYWNrc3RvcnlUZXh0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24uYmFja3N0b3J5LXJvbGwnKS5jbGljayh0aGlzLl9vblJvbGxCYWNrc3RvcnkuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5iYWNrc3RvcnktcmVzZXQnKS5jbGljayh0aGlzLl9vblJlc2V0QmFja3N0b3J5LmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyByb2xsTWVzc2FnZSAocm9sbHMpIHtcbiAgICBpZiAocm9sbHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBodG1sID0gW11cbiAgICAgIGZvciAoY29uc3Qgcm9sbCBvZiByb2xscykge1xuICAgICAgICBodG1sLnB1c2goYXdhaXQgcmVuZGVyVGVtcGxhdGUoUm9sbC5DSEFUX1RFTVBMQVRFLCB7XG4gICAgICAgICAgZm9ybXVsYTogKENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhyb2xsWzBdKT8ubGFiZWwgPz8gcm9sbFswXSkgKyAnOiAnICsgcm9sbFsxXSxcbiAgICAgICAgICB0b29sdGlwOiBhd2FpdCByb2xsWzJdLmdldFRvb2x0aXAoKSxcbiAgICAgICAgICB0b3RhbDogcm9sbFsyXS50b3RhbFxuICAgICAgICB9KSlcbiAgICAgIH1cbiAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgc3BlYWtlcjoge1xuICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiBodG1sLmpvaW4oJzxkaXY+Jm5ic3A7PC9kaXY+JyksXG4gICAgICAgIHdoaXNwZXI6IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFkZEl0ZW1Ub0xpc3QgKGl0ZW0sIHsgaXNPY2N1cGF0aW9uRGVmYXVsdCA9IGZhbHNlLCBpbk9jY3VwYXRpb25Hcm91cCA9IGZhbHNlLCBvY2N1cGF0aW9uVG9nZ2xlID0gZmFsc2UsIGlzQXJjaGV0eXBlRGVmYXVsdCA9IGZhbHNlLCBhcmNoZXR5cGVUb2dnbGUgPSBmYWxzZSwgaXNDcmVkaXRSYXRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBjb25zdCBrZXkgPSAoaXRlbS5mbGFncy5Db0M3Py5jb2NpZEZsYWc/LmlkID8/IGl0ZW0ubmFtZSlcbiAgICBpZiAoaXRlbS50eXBlICE9PSAnc2tpbGwnKSB7XG4gICAgICB0aGlzLm9iamVjdC5pbnZlc3RpZ2F0b3JJdGVtcy5wdXNoKGl0ZW0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgaXNNdWx0aXBsZSA9ICEhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCAmJiAoKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMucmVxdWlyZXNuYW1lICYmICEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5vbmx5b25lID8/IGZhbHNlKSkgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5waWNrbmFtZW9ubHkgfHwgaXRlbS5uYW1lID09PSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFueVNwZWNOYW1lJykpKVxuICAgIGNvbnN0IGZsYWdzID0ge1xuICAgICAgaXNPY2N1cGF0aW9uRGVmYXVsdCxcbiAgICAgIGluT2NjdXBhdGlvbkdyb3VwLFxuICAgICAgaXNBcmNoZXR5cGVEZWZhdWx0LFxuICAgICAgaXNDcmVkaXRSYXRpbmcsXG4gICAgICBvY2N1cGF0aW9uVG9nZ2xlLFxuICAgICAgYXJjaGV0eXBlVG9nZ2xlXG4gICAgfVxuICAgIGNvbnN0IHJvd3MgPSB7XG4gICAgICBvY2N1cGF0aW9uUG9pbnRzOiAnJyxcbiAgICAgIGFyY2hldHlwZVBvaW50czogJycsXG4gICAgICBleHBlcmllbmNlUG9pbnRzOiAnJyxcbiAgICAgIHBlcnNvbmFsUG9pbnRzOiAnJyxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSA9IHtcbiAgICAgICAgaXRlbSxcbiAgICAgICAgZmxhZ3M6IG1lcmdlT2JqZWN0KGZsYWdzLCB7IGlzTXVsdGlwbGUgfSwgeyBpbnBsYWNlOiBmYWxzZSB9KSxcbiAgICAgICAgcm93czogW11cbiAgICAgIH1cbiAgICAgIGlmICghaXNNdWx0aXBsZSB8fCAhKGlzT2NjdXBhdGlvbkRlZmF1bHQgPT09IGZhbHNlICYmIGluT2NjdXBhdGlvbkdyb3VwID09PSBmYWxzZSAmJiBpc0FyY2hldHlwZURlZmF1bHQgPT09IGZhbHNlKSkge1xuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5wdXNoKG1lcmdlT2JqZWN0KGZsYWdzLCByb3dzLCB7IGlucGxhY2U6IGZhbHNlIH0pKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWlzTXVsdGlwbGUpIHtcbiAgICAgICAgZm9yIChjb25zdCBmbGFnIGluIGZsYWdzKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbMF1bZmxhZ10gPSB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1swXVtmbGFnXSB8fCBmbGFnc1tmbGFnXVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5wdXNoKG1lcmdlT2JqZWN0KGZsYWdzLCByb3dzLCB7IGlucGxhY2U6IGZhbHNlIH0pKVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmbGFnIGluIGZsYWdzKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFnc1tmbGFnXSA9IHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFnc1tmbGFnXSB8fCBmbGFnc1tmbGFnXVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzTXVsdGlwbGUgJiYgZmxhZ3MuaXNDcmVkaXRSYXRpbmcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzWzBdLm9jY3VwYXRpb25Qb2ludHMgPSB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWluXG4gICAgfVxuICB9XG5cbiAgY2xlYXJTZXR1cFBvaW50cyAoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBQb2ludHMpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSAnJ1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldFNraWxsTGlzdHMgKCkge1xuICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXMgPSB7fVxuICAgIHRoaXMub2JqZWN0Lm9jY3VwYXRpb25Hcm91cHMgPSB7fVxuICAgIHRoaXMub2JqZWN0LmludmVzdGlnYXRvckl0ZW1zID0gW11cbiAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUgPSBkdXBsaWNhdGUodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzKVxuICAgIGNvbnN0IHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgIGNvbnN0IG9jY3VwYXRpb24gPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Qub2NjdXBhdGlvbilcbiAgICBsZXQgYXJjaGV0eXBlID0gZmFsc2VcbiAgICBpZiAodGhpcy5vYmplY3QuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgYXJjaGV0eXBlID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LmFyY2hldHlwZSlcbiAgICB9XG4gICAgaWYgKHNldHVwICYmIG9jY3VwYXRpb24gJiYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpIHx8IGFyY2hldHlwZSkpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zID0gW11cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZXR1cC5zeXN0ZW0uYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zLnB1c2goe1xuICAgICAgICAgIG5hbWU6IHNldHVwLnN5c3RlbS5iaW9TZWN0aW9uc1tpbmRleF0sXG4gICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgIGtleTogJ3J0Li5iYWNrc3RvcnktJyArIENvQzdVdGlsaXRpZXMudG9LZWJhYkNhc2Uoc2V0dXAuc3lzdGVtLmJpb1NlY3Rpb25zW2luZGV4XSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHRoaXMub2JqZWN0LnBlcnNvbmFsID0gb2NjdXBhdGlvbi5zeXN0ZW0ucGVyc29uYWxcbiAgICAgIHRoaXMub2JqZWN0LmNyZWRpdFJhdGluZyA9IG9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZ1xuICAgICAgbGV0IGl0ZW1zID0gW11cbiAgICAgIGl0ZW1zID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkoc2V0dXAuc3lzdGVtLml0ZW1zKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbXNbaW5kZXhdKVxuICAgICAgfVxuICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5za2lsbHMpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gaXRlbXMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaXNPY2N1cGF0aW9uRGVmYXVsdDogdHJ1ZSwgb2NjdXBhdGlvblRvZ2dsZTogdHJ1ZSB9KVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgZ3JvdXAgPSAwLCBnbSA9IG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGdyb3VwIDwgZ207IGdyb3VwKyspIHtcbiAgICAgICAgdGhpcy5vYmplY3Qub2NjdXBhdGlvbkdyb3Vwc1tncm91cF0gPSBvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbZ3JvdXBdLm9wdGlvbnNcbiAgICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbZ3JvdXBdLnNraWxscylcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaW5PY2N1cGF0aW9uR3JvdXA6IGdyb3VwIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhcmNoZXR5cGUpIHtcbiAgICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShhcmNoZXR5cGUuc3lzdGVtLnNraWxscylcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaXNBcmNoZXR5cGVEZWZhdWx0OiB0cnVlLCBhcmNoZXR5cGVUb2dnbGU6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKE51bWJlcih0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4KSA+IDApIHtcbiAgICAgICAgY29uc3QgbmFtZUNyZWRpdFJhdGluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmtleXMuJyArIHRoaXMuY29jaWRDcmVkaXRSYXRpbmcpXG4gICAgICAgIGNvbnN0IGZsYWdzID0geyBpc09jY3VwYXRpb25EZWZhdWx0OiB0cnVlLCBvY2N1cGF0aW9uVG9nZ2xlOiB0cnVlLCBpc0NyZWRpdFJhdGluZzogdHJ1ZSB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkQ3JlZGl0UmF0aW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QodGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkQ3JlZGl0UmF0aW5nXS5pdGVtLCBmbGFncylcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1tuYW1lQ3JlZGl0UmF0aW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QodGhpcy5vYmplY3Quc2tpbGxJdGVtc1tuYW1lQ3JlZGl0UmF0aW5nXS5pdGVtLCBmbGFncylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBza2lsbCA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSUQodGhpcy5jb2NpZENyZWRpdFJhdGluZylcbiAgICAgICAgICBpZiAoc2tpbGwubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3Qoc2tpbGxbMF0sIGZsYWdzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5KSB7XG4gICAgICBjb25zdCBkcmFnRGF0YSA9IHsgdHlwZTogJ2ludmVzdGlnYXRvckNoYXJhY3RlcmlzdGljJywga2V5OiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNLZXksIHZhbHVlOiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudmFsdWUgfVxuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YUxpc3QgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBpZiAodHlwZW9mIGRhdGFMaXN0LnR5cGUgIT09ICd1bmRlZmluZWQnICYmIGRhdGFMaXN0LnR5cGUgPT09ICdpbnZlc3RpZ2F0b3JDaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgZGF0YUxpc3QuZGVzdGluYXRpb24gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5XG4gICAgICAgIGRhdGFMaXN0Lm9rYXkgPSBmYWxzZVxuICAgICAgICBpZiAoZGF0YUxpc3Qua2V5ID09PSAnLScgJiYgdHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMub2JqZWN0LnBsYWNlYWJsZS5pbmRleE9mKHBhcnNlSW50KGRhdGFMaXN0LnZhbHVlLCAxMCkpXG4gICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5wdXNoKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSwgMTApKVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPSBwYXJzZUludChkYXRhTGlzdC52YWx1ZSwgMTApXG4gICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnNvcnQoKS5yZXZlcnNlKClcbiAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldICE9PSAndW5kZWZpbmVkJyAmJiBkYXRhTGlzdC5kZXN0aW5hdGlvbiA9PT0gJy0nKSB7XG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUucHVzaChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldLCAxMCkpXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldID0gJydcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5zb3J0KCkucmV2ZXJzZSgpXG4gICAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wID0gKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gPT09ICcnID8gJycgOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldLCAxMCkpXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSA9ICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPT09ICcnID8gJycgOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0sIDEwKSlcbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPSB0ZW1wXG4gICAgICAgICAgZGF0YUxpc3Qub2theSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YUxpc3Qub2theSkge1xuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICB9XG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG4gICAgaWYgKFt0aGlzLnBhZ2VMaXN0LlBBR0VfQVJDSEVUWVBFX1NLSUxMUywgdGhpcy5wYWdlTGlzdC5QQUdFX09DQ1VQQVRJT05fU0tJTExTXS5pbmNsdWRlcyh0aGlzLm9iamVjdC5zdGVwKSkge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbSlcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uQ2xpY2tTa2lsbFNwZWNpYWwgKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxuXG4gIF9vbkNsaWNrUmVtb3ZlU2tpbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCBrZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5wYXJlbnROb2RlPy5kYXRhc2V0Py5rZXlcbiAgICBjb25zdCBpbmRleCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LnBhcmVudE5vZGU/LmRhdGFzZXQ/LmluZGV4XG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0/LnJvd3NbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3Muc3BsaWNlKGluZGV4LCBpbmRleClcbiAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlU2tpbGwgKGV2ZW50KSB7XG4gICAgY29uc3Qga2V5ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8ua2V5XG4gICAgY29uc3QgaW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py5pbmRleFxuICAgIGNvbnN0IHRvZ2dsZUtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LnRvZ2dsZUtleVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldPy5yb3dzW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldID0gIXRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrUGlja1NraWxsIChldmVudCkge1xuICAgIGNvbnN0IGtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LmtleVxuICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8uaW5kZXhcbiAgICBjb25zdCB0b2dnbGVLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py50b2dnbGVLZXlcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldID0gZmFsc2VcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgIH1cbiAgICAgIGxldCBza2lsbExpc3QgPSBbXVxuICAgICAgY29uc3QgZ3JvdXAgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NHcm91cEZyb21LZXkoa2V5KVxuICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgIHNraWxsTGlzdCA9IChhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IG5ldyBSZWdFeHAoJ14nICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChncm91cCkgKyAnLiskJyksIHR5cGU6ICdpJyB9KSkuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICAgIHJldHVybiAhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiYgISEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSkpXG4gICAgICAgIH0pXG4gICAgICAgIGlmIChza2lsbExpc3QubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZy5jcmVhdGUoe1xuICAgICAgICBza2lsbHM6IHNraWxsTGlzdCxcbiAgICAgICAgYWxsb3dDdXN0b206ICh0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lID8/IGZhbHNlKSxcbiAgICAgICAgZml4ZWRCYXNlVmFsdWU6IHRydWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uTmFtZTogdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICBsYWJlbDogdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZVxuICAgICAgfSlcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGlmIChza2lsbERhdGEuc2VsZWN0ZWQgIT09ICcnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gc2tpbGxMaXN0LmZpbmQoaSA9PiBpLmlkID09PSBza2lsbERhdGEuc2VsZWN0ZWQpXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdW3RvZ2dsZUtleV0gPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpbGxEYXRhLm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gc2tpbGxEYXRhLm5hbWVcbiAgICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bdG9nZ2xlS2V5XSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgaWYgKHNraWxsRGF0YS5zZWxlY3RlZCAhPT0gJycpIHtcbiAgICAgICAgICBzZWxlY3RlZCA9IHNraWxsTGlzdC5maW5kKGkgPT4gaS5pZCA9PT0gc2tpbGxEYXRhLnNlbGVjdGVkKVxuICAgICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5uYW1lICE9PSAnJykge1xuICAgICAgICAgIHNlbGVjdGVkID0gc2tpbGxEYXRhLm5hbWVcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5wdXNoKHtcbiAgICAgICAgICBpc09jY3VwYXRpb25EZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgICBpbk9jY3VwYXRpb25Hcm91cDogZmFsc2UsXG4gICAgICAgICAgaXNBcmNoZXR5cGVEZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgICBpc0NyZWRpdFJhdGluZzogZmFsc2UsXG4gICAgICAgICAgb2NjdXBhdGlvblRvZ2dsZTogKHRvZ2dsZUtleSA9PT0gJ29jY3VwYXRpb25Ub2dnbGUnKSxcbiAgICAgICAgICBhcmNoZXR5cGVUb2dnbGU6ICh0b2dnbGVLZXkgPT09ICdhcmNoZXR5cGVUb2dnbGUnKSxcbiAgICAgICAgICBvY2N1cGF0aW9uUG9pbnRzOiAnJyxcbiAgICAgICAgICBhcmNoZXR5cGVQb2ludHM6ICcnLFxuICAgICAgICAgIGV4cGVyaWVuY2VQb2ludHM6ICcnLFxuICAgICAgICAgIHBlcnNvbmFsUG9pbnRzOiAnJyxcbiAgICAgICAgICBzZWxlY3RlZFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VTa2lsbFBvaW50cyAoZXZlbnQpIHtcbiAgICBjb25zdCBpbnB1dCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBhZGp1c3RtZW50ID0gaW5wdXQuZGF0YSgnYWRqdXN0bWVudCcpXG4gICAgY29uc3QgbGkgPSBpbnB1dC5jbG9zZXN0KCdsaScpXG4gICAgY29uc3Qga2V5ID0gbGkuZGF0YSgna2V5JylcbiAgICBjb25zdCBpbmRleCA9IGxpLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XT8ucm93c1tpbmRleF1bYWRqdXN0bWVudF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bYWRqdXN0bWVudF0gPSBpbnB1dC52YWwoKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlQmFja3N0b3J5VGV4dCAoZXZlbnQpIHtcbiAgICBjb25zdCB0ZXh0YXJlYSA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBpbmRleCA9IHRleHRhcmVhLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSA9IHRleHRhcmVhLnZhbCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEJhY2tzdG9yeSAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgaW5kZXggPSBidXR0b24uZGF0YSgnaW5kZXgnKVxuICAgIGNvbnN0IGtleSA9IGJ1dHRvbi5kYXRhKCdrZXknKVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3Qgcm9sbHRhYmxlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRChrZXkpXG4gICAgICBpZiAocm9sbHRhYmxlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB0YWJsZVJlc3VsdCA9IGF3YWl0IHJvbGx0YWJsZVswXS5yb2xsKClcbiAgICAgICAgaWYgKHRhYmxlUmVzdWx0LnJlc3VsdHNbMF0udHlwZSA9PT0gQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLlRFWFQpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWUgPSAodGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLnZhbHVlICsgJ1xcbicgKyB0YWJsZVJlc3VsdC5yZXN1bHRzWzBdLnRleHQudHJpbSgpKS50cmltKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRCYWNrc3RvcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IGluZGV4ID0gYnV0dG9uLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSA9ICcnXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsTHVjayAoZXZlbnQpIHtcbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5zZXR1cClcbiAgICBpZiAoc2V0dXApIHtcbiAgICAgIGNvbnN0IGRpZSA9IGF3YWl0IG5ldyBSb2xsKHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMubHVjay50b1N0cmluZygpKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5sdWNrID0gW2RpZS50b3RhbF1cbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShSb2xsLkNIQVRfVEVNUExBVEUsIHtcbiAgICAgICAgZm9ybXVsYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5Sb2xsVHdpY2VGb3JMdWNrJykgKyAnOiAnICsgc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5sdWNrLnRvU3RyaW5nKCksXG4gICAgICAgIHRvb2x0aXA6IGF3YWl0IGRpZS5nZXRUb29sdGlwKCksXG4gICAgICAgIHRvdGFsOiBkaWUudG90YWxcbiAgICAgIH0pXG4gICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgd2hpc3BlcjogQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICAgIH0pXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxFZHUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoIXRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1LnJvbGxlZCAmJiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS50b3RhbCkge1xuICAgICAgICBsZXQgdmFsdWUgPSBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5lZHUsIDEwKVxuICAgICAgICBjb25zdCBtZXNzYWdlID0gW11cbiAgICAgICAgZm9yIChsZXQgcm9sbHMgPSB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS50b3RhbDsgcm9sbHMgPiAwOyByb2xscy0tKSB7XG4gICAgICAgICAgY29uc3QgZGllID0gYXdhaXQgbmV3IFJvbGwoJzFkMTAwJykuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGlmIChkaWUudG90YWwgPiB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgYXVnbWVudERpZSA9IGF3YWl0IG5ldyBSb2xsKCcxZDEwJykuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgbWVzc2FnZS5wdXNoKGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2U3VjY2VzcycsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5FZHVjYXRpb24nKSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgYXVnbWVudDogYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YClcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBwYXJzZUludChhdWdtZW50RGllLnRvdGFsLCAxMClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZS5wdXNoKGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5EZXZGYWlsdXJlJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW06IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkVkdWNhdGlvbicpLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiB2YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsQWxsNERldicpLFxuICAgICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2Uuam9pbignJyksXG4gICAgICAgICAgd2hpc3BlcjogQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMuZWR1ID0gdmFsdWUgLSBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5lZHUsIDEwKVxuICAgICAgICB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS5yb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEFsbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgcm9sbHMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnc3RyJywgJ2NvbicsICdzaXonLCAnZGV4JywgJ2FwcCcsICdpbnQnLCAncG93JywgJ2VkdScsICdsdWNrJ10pIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgIGlmIChyZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgIHJvbGxzLnB1c2gocmVzdWx0KVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJvbGxNZXNzYWdlKHJvbGxzKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljMTAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgMTAsIGxpLmRhdGFzZXQubWluLCBsaS5kYXRhc2V0Lm1heClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaS5kYXRhc2V0LmtleSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5Q2hhcmFjdGVyaXN0aWMobGkuZGF0YXNldC5rZXksIDEwKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBpZiAodHlwZW9mIGxpLmRhdGFzZXQub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5taW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5T2Zmc2V0KGxpLmRhdGFzZXQub2Zmc2V0LCAxLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAxKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBpZiAodHlwZW9mIGxpLmRhdGFzZXQub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5taW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5T2Zmc2V0KGxpLmRhdGFzZXQub2Zmc2V0LCAtMSwgbGkuZGF0YXNldC5taW4sIGxpLmRhdGFzZXQubWF4KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpLmRhdGFzZXQua2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlDaGFyYWN0ZXJpc3RpYyhsaS5kYXRhc2V0LmtleSwgLTEpXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgLTEwLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAtMTApXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBtb2RpZnlPZmZzZXQgKGtleSwgdmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSA9IE1hdGgubWF4KE1hdGgubWluKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSArIHZhbHVlLCBwYXJzZUludChtYXgsIDEwKSksIHBhcnNlSW50KG1pbiwgMTApKVxuICB9XG5cbiAgbW9kaWZ5Q2hhcmFjdGVyaXN0aWMgKGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaWYgKGlucHV0KSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSkgKyB2YWx1ZVxuICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMucm9sbE1lc3NhZ2UoW3Jlc3VsdF0pXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gJChgI2ludmVzdGlnYXRvci13aXphcmQtYXBwbGljYXRpb24gbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpLmZpbmQoJ2lucHV0JylcbiAgICBjb25zdCBmb3JtdWxhID0gbGkuZGF0YSgncm9sbCcpXG4gICAgaWYgKGlucHV0ICYmIGZvcm11bGEpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZCB8fCB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID09PSAnJykge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoZm9ybXVsYS50b1N0cmluZygpKVxuICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgaW5wdXQudmFsKHJvbGwudG90YWwpXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSBOdW1iZXIocm9sbC50b3RhbClcbiAgICAgICAgcmV0dXJuIFtrZXksIGZvcm11bGEudG9TdHJpbmcoKSwgcm9sbF1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKiogQG92ZXJyaWRlXG4gICAqIEEgc3ViY2xhc3Mgb2YgdGhlIEZvcm1BcHBsaWNhdGlvbiBtdXN0IGltcGxlbWVudCB0aGUgX29uQ2hhbmdlU3VibWl0IG1ldGhvZC5cbiAgICovXG4gIF9vbkNoYW5nZVN1Ym1pdCAoZXZlbnQpIHtcbiAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgfVxuXG4gIF9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbmFtZSA9IG9iai5wcm9wKCduYW1lJylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW25hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbbmFtZV0gPSBvYmoudmFsKClcbiAgICAgIGxldCBlbXB0aWVzID0gZmFsc2VcbiAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldICE9PSAnJykge1xuICAgICAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICAgICAgdG90YWwgKz0gcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVtcHRpZXMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG9ialRvdGFsID0gb2JqLmNsb3Nlc3QoJ29sLml0ZW0tbGlzdCcpLmZpbmQoJ3NwYW4udG90YWwnKVxuICAgICAgY29uc3QgbWF4ID0gcGFyc2VJbnQob2JqVG90YWwuc2libGluZ3MoJ3NwYW4udmFsdWUnKS50ZXh0KCksIDEwKVxuICAgICAgb2JqVG90YWwudGV4dCh0b3RhbClcbiAgICAgIGlmICh0b3RhbCA9PT0gbWF4ICYmICFlbXB0aWVzKSB7XG4gICAgICAgIGlmIChvYmouY2xvc2VzdCgnZm9ybScpLmZpbmQoJ2J1dHRvbi5zdWJtaXQtYnV0dG9uW2RhdGEtYnV0dG9uPW5leHRdJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG9iai5jbG9zZXN0KCdmb3JtJykuZmluZCgnYnV0dG9uLnN1Ym1pdC1idXR0b25bZGF0YS1idXR0b249bmV4dF0nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldFBhZ2VOdW1iZXIgKGRpcmVjdGlvbikge1xuICAgIGNvbnN0IHBhZ2VPcmRlciA9IHRoaXMucGFnZU9yZGVyXG4gICAgY29uc3Qga2V5ID0gcGFyc2VJbnQoT2JqZWN0LmtleXMocGFnZU9yZGVyKS5maW5kKGtleSA9PiBwYWdlT3JkZXJba2V5XSA9PT0gdGhpcy5vYmplY3Quc3RlcCksIDEwKSArIGRpcmVjdGlvblxuICAgIHJldHVybiBwYWdlT3JkZXJba2V5XVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kLlxuICAgKi9cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKFsnYmFjaycsICduZXh0J10uaW5jbHVkZXMoZXZlbnQuc3VibWl0dGVyPy5kYXRhc2V0LmJ1dHRvbikpIHtcbiAgICAgIGlmIChldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lLmluZGV4T2YoJ2N1cnJlbnRseS1zdWJtaXR0aW5nJykgPiAtMSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGV2ZW50LnN1Ym1pdHRlci5jbGFzc05hbWUgPSBldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lICsgJyBjdXJyZW50bHktc3VibWl0dGluZydcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZm9ybURhdGFbJ3dvcmxkLWVyYSddICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtb3duZXJzaGlwJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFNldHVwICE9PSBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRTZXR1cCA9IGZvcm1EYXRhWydkZWZhdWx0LXNldHVwJ11cbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnLCB0aGlzLm9iamVjdC5kZWZhdWx0U2V0dXApXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwID0gdGhpcy5vYmplY3QuZGVmYXVsdFNldHVwXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdE93bmVyc2hpcCAhPT0gZm9ybURhdGFbJ2RlZmF1bHQtb3duZXJzaGlwJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdE93bmVyc2hpcCA9IGZvcm1EYXRhWydkZWZhdWx0LW93bmVyc2hpcCddXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZE93bmVyc2hpcCcsIHRoaXMub2JqZWN0LmRlZmF1bHRPd25lcnNoaXApXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdEVyYSAhPT0gZm9ybURhdGFbJ3dvcmxkLWVyYSddKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9ICQodGhpcy5lbGVtZW50LmZpbmQoJ2Zvcm0nKSlcbiAgICAgICAgY29uc3Qgc3RhcnRlZCA9IERhdGUubm93KClcbiAgICAgICAgb2JqLmZpbmQoJy5kaWFsb2ctYnV0dG9uczpmaXJzdCcpLmhpZGUoKVxuICAgICAgICBvYmouZmluZCgnLnNjcm9sbHNlY3Rpb246Zmlyc3QnKS5oaWRlKClcbiAgICAgICAgb2JqLmZpbmQoJy5lcmFjaGFuZ2U6Zmlyc3QnKS5zaG93KClcbiAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdEVyYSA9IGZvcm1EYXRhWyd3b3JsZC1lcmEnXVxuICAgICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICd3b3JsZEVyYScsIHRoaXMub2JqZWN0LmRlZmF1bHRFcmEpXG4gICAgICAgIHRoaXMub2JqZWN0LmNhY2hlQ29DSUQgPSBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmxvYWRDYWNoZUl0ZW1CeUNvQ0lEKClcbiAgICAgICAgLy8gVG8gcHJldmVudCBmbGFzaGluZyBzaG93IG1lc3NhZ2UgZm9yIGF0IGxlYXN0IDUwMCBtc1xuICAgICAgICBjb25zdCBidWZmZXIgPSA1MDAgLSAoRGF0ZS5ub3coKSAtIHN0YXJ0ZWQpXG4gICAgICAgIC8vIERvbid0IGJvdGhlciBpZiBsZXNzIHRoYW4gMTBtcyByZW1haW5pbmdcbiAgICAgICAgaWYgKGJ1ZmZlciA+IDEwKSB7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGJ1ZmZlcikpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodHlwZW9mIGZvcm1EYXRhWydjaGFyYWN0ZXJpc3RpY3MtbWV0aG9kJ10gIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgICBjb25zdCB0eXBlID0gTnVtYmVyKGZvcm1EYXRhWydjaGFyYWN0ZXJpc3RpY3MtbWV0aG9kJ10pXG4gICAgICAgIGlmICh0eXBlID09PSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0RFRkFVTFQpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSBmYWxzZVxuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFtdXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9QT0lOVFMpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSB0cnVlXG4gICAgICAgICAgdGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzID0gW11cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFUykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmVuZm9yY2VQb2ludEJ1eSA9IGZhbHNlXG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFs5MCwgODAsIDcwLCA2MCwgNjAsIDUwLCA1MCwgNDBdXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFs4MCwgNzAsIDYwLCA2MCwgNTAsIDUwLCA1MCwgNDBdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFBvaW50QnV5JywgdGhpcy5vYmplY3QuZW5mb3JjZVBvaW50QnV5KVxuICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWlja0ZpcmUnLCB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMpXG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZCA9ICh0eXBlb2YgZm9ybURhdGFbJ3Jlcm9sbHMtZW5hYmxlZCddID09PSAnc3RyaW5nJylcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFJlcm9sbHMnLCB0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZClcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihmb3JtRGF0YVsncXVpY2stZmlyZS12YWx1ZXMtJyArIGldKVxuICAgICAgICBpZiAobnVtID4gMCkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlc1tpXSA9IG51bVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMuc29ydCgpLnJldmVyc2UoKVxuICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlID0gZHVwbGljYXRlKHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcylcbiAgICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtZW5hYmxlZCddID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5LnRvU3RyaW5nKCkgPT09ICcwJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSA9IDFcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScsIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkgPSBmb3JtRGF0YVsnZGVmYXVsdC1xdWFudGl0eSddXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknLCB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5LnRvU3RyaW5nKCkgIT09ICcwJykge1xuICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkgPSAwXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JywgdGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2Mtc2V0dXAnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cCAhPT0gZm9ybURhdGFbJ2NvYy1zZXR1cCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwID0gZm9ybURhdGFbJ2NvYy1zZXR1cCddXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5hcmNoZXR5cGUgIT09IGZvcm1EYXRhWydjb2MtYXJjaGV0eXBlJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuYXJjaGV0eXBlID0gZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXVxuICAgICAgICB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgPSAnJ1xuICAgICAgICB0aGlzLmNsZWFyU2V0dXBQb2ludHMoKVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0Lm9jY3VwYXRpb24gIT09IGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0Lm9jY3VwYXRpb24gPSBmb3JtRGF0YVsnY29jLW9jY3VwYXRpb24nXVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cFBvaW50cykge1xuICAgICAgICBpZiAodHlwZW9mIGZvcm1EYXRhW2tleV0gIT09ICd1bmRlZmluZWQnICYmIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gIT09IGZvcm1EYXRhW2tleV0pIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID0gZm9ybURhdGFba2V5XVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgIT09IGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyA9IGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZSA9IGR1cGxpY2F0ZSh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGZsYXRLZXlzID0gWyduYW1lJywgJ2FnZScsICdyZXNpZGVuY2UnLCAnYmlydGhwbGFjZScsICdsYW5ndWFnZScsICdhdmF0YXInLCAndG9rZW4nXVxuICAgIGZvciAoY29uc3Qga2V5IG9mIGZsYXRLZXlzKSB7XG4gICAgICBpZiAodHlwZW9mIGZvcm1EYXRhW2tleV0gIT09ICd1bmRlZmluZWQnICYmIHRoaXMub2JqZWN0W2tleV0gIT09IGZvcm1EYXRhW2tleV0pIHtcbiAgICAgICAgdGhpcy5vYmplY3Rba2V5XSA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgaWYgKGtleSA9PT0gJ2FnZScpIHtcbiAgICAgICAgICB0aGlzLmdldEFnZUFkanVzdG1lbnRzKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXZlbnQuc3VibWl0dGVyPy5kYXRhc2V0LmJ1dHRvbiA9PT0gJ2JhY2snKSB7XG4gICAgICBjb25zdCBwYWdlTnVtYmVyID0gdGhpcy5nZXRQYWdlTnVtYmVyKC0xKVxuICAgICAgaWYgKHR5cGVvZiBwYWdlTnVtYmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLm9iamVjdC5zdGVwID0gcGFnZU51bWJlclxuICAgICAgICAvLyBXaGVuIG1vdmluZyBzdGVwIHJlc2V0IHNjcm9sbCBoZWlnaHRcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5lbGVtZW50LmZpbmQoJy5zY3JvbGxzZWN0aW9uJylcbiAgICAgICAgaWYgKG9iai5sZW5ndGggJiYgb2JqWzBdLnNjcm9sbFRvcCkge1xuICAgICAgICAgIG9ialswXS5zY3JvbGxUb3AgPSAwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGV2ZW50LnN1Ym1pdHRlcj8uZGF0YXNldC5idXR0b24gPT09ICduZXh0Jykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LnN0ZXAgPT09IHRoaXMucGFnZUxpc3QuUEFHRV9DUkVBVEUgfHwgKHRoaXMub2JqZWN0LnN0ZXAgPT09IHRoaXMucGFnZUxpc3QuUEFHRV9CQUNLU1RPUlkgJiYgZ2FtZS51c2VyLnJvbGUgPj0gQ09OU1QuVVNFUl9QRVJNSVNTSU9OUy5BQ1RPUl9DUkVBVEUuZGVmYXVsdFJvbGUpKSB7XG4gICAgICAgIHRoaXMuYXR0ZW1wdFRvQ3JlYXRlKClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBwYWdlTnVtYmVyID0gdGhpcy5nZXRQYWdlTnVtYmVyKDEpXG4gICAgICAgIGlmICh0eXBlb2YgcGFnZU51bWJlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5zdGVwID0gcGFnZU51bWJlclxuICAgICAgICAgIC8vIFdoZW4gbW92aW5nIHN0ZXAgcmVzZXQgc2Nyb2xsIGhlaWdodFxuICAgICAgICAgIGNvbnN0IG9iaiA9IHRoaXMuZWxlbWVudC5maW5kKCcuc2Nyb2xsc2VjdGlvbicpXG4gICAgICAgICAgaWYgKG9iai5sZW5ndGggJiYgb2JqWzBdLnNjcm9sbFRvcCkge1xuICAgICAgICAgICAgb2JqWzBdLnNjcm9sbFRvcCA9IDBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIGF0dGVtcHRUb0NyZWF0ZSAoKSB7XG4gICAgY29uc3QgYWN0b3JEYXRhID0gYXdhaXQgdGhpcy5ub3JtYWxpemVDaGFyYWN0ZXJEYXRhKHRoaXMub2JqZWN0KVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSB8fCBnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZUNoYXJhY3RlcihhY3RvckRhdGEpXG4gICAgICBhY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBrZWVwZXJzID0gZ2FtZS51c2Vycy5maWx0ZXIodSA9PiB1LmFjdGl2ZSAmJiB1LmlzR00pXG4gICAgICBpZiAoa2VlcGVycy5sZW5ndGgpIHtcbiAgICAgICAgYWN0b3JEYXRhLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUlxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXItd2l6YXJkJyxcbiAgICAgICAgICBsaXN0ZW5lcjoga2VlcGVyc1swXS5pZCxcbiAgICAgICAgICBwYXlsb2FkOiBhY3RvckRhdGFcbiAgICAgICAgfVxuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW52ZXN0aWdhdG9yV2l6YXJkLkNyZWF0aW5nSW52ZXN0aWdhdG9yJylcbiAgICAgICAgKVxuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTWlzc2luZ0tlZXBlclVzZXInKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbm9ybWFsaXplQ2hhcmFjdGVyRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IHdlYXBvblNraWxscyA9IHtcbiAgICAgIG1lbGVlOiB7fSxcbiAgICAgIHJuZ2Q6IHt9XG4gICAgfVxuICAgIGNvbnN0IGl0ZW1zID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhLnNraWxsSXRlbXMpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gZGF0YS5za2lsbEl0ZW1zW2tleV1cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBza2lsbC5yb3dzLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCByb3cgPSBza2lsbC5yb3dzW2luZGV4XVxuICAgICAgICBpZiAoIXNraWxsLmZsYWdzLmlzTXVsdGlwbGUgfHwgcm93LnNlbGVjdGVkICE9PSBmYWxzZSkge1xuICAgICAgICAgIGxldCBpdGVtID0gZHVwbGljYXRlKHNraWxsLml0ZW0pXG4gICAgICAgICAgaWYgKHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UgJiYgdHlwZW9mIHJvdy5zZWxlY3RlZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGl0ZW0gPSBkdXBsaWNhdGUocm93LnNlbGVjdGVkKVxuICAgICAgICAgICAgcm93LnNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJvdy5vY2N1cGF0aW9uVG9nZ2xlKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5mbGFncy5vY2N1cGF0aW9uID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocm93LmFyY2hldHlwZVRvZ2dsZSkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uZmxhZ3MuYXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgYmFzZSA9IGl0ZW0uc3lzdGVtLmJhc2VcbiAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEuc2V0dXBQb2ludHMpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKCdAJyArIGtleSwgJ2knKVxuICAgICAgICAgICAgICBiYXNlID0gYmFzZS5yZXBsYWNlKHJlZ0V4LCBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgIGJhc2UgPSBNYXRoLmZsb29yKG5ldyBSb2xsKGJhc2UpLmV2YWx1YXRlKHsgYXN5bmM6IGZhbHNlIH0pLnRvdGFsKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtLnN5c3RlbS5iYXNlID0gYmFzZVxuICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzID0gaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMgPz8ge31cbiAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5wZXJzb25hbFBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cy5wZXJzb25hbCA9IHBhcnNlSW50KHJvdy5wZXJzb25hbFBvaW50cywgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChOdW1iZXIocm93Lm9jY3VwYXRpb25Qb2ludHMpID4gMCkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMub2NjdXBhdGlvbiA9IHBhcnNlSW50KHJvdy5vY2N1cGF0aW9uUG9pbnRzLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKE51bWJlcihyb3cuYXJjaGV0eXBlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmFyY2hldHlwZSA9IHBhcnNlSW50KHJvdy5hcmNoZXR5cGVQb2ludHMsIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5leHBlcmllbmNlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UgPSBwYXJzZUludChyb3cuZXhwZXJpZW5jZVBvaW50cywgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuY29jaWRMYW5ndWFnZU93bikge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID0gZGF0YS5sYW5ndWFnZVxuICAgICAgICAgICAgaXRlbS5uYW1lID0gaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygcm93LnNlbGVjdGVkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID0gcm93LnNlbGVjdGVkXG4gICAgICAgICAgICBpdGVtLl9pZCA9IHJhbmRvbUlEKClcbiAgICAgICAgICAgIGl0ZW0ubmFtZSA9IGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uICsgJyAoJyArIGl0ZW0uc3lzdGVtLnNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NJZChpdGVtKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uZmlnaHRpbmcpIHtcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLm5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLnN5c3RlbS5za2lsbE5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LmZpcmVhcm0pIHtcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5ybmdkW2l0ZW0ubmFtZV0gPSBpdGVtLl9pZFxuICAgICAgICAgICAgd2VhcG9uU2tpbGxzLnJuZ2RbaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXSA9IGl0ZW0uX2lkXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNvdXJjZUl0ZW0gb2YgZGF0YS5pbnZlc3RpZ2F0b3JJdGVtcykge1xuICAgICAgY29uc3QgaXRlbSA9IGR1cGxpY2F0ZShzb3VyY2VJdGVtKVxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMubWVsZWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkID0gd2VhcG9uU2tpbGxzLm1lbGVlW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgPSB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lXVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCA9IHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaXRlbXMucHVzaChpdGVtKVxuICAgIH1cbiAgICBsZXQgbW9uZXRhcnkgPSB7fVxuICAgIGNvbnN0IHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgIGlmIChzZXR1cCkge1xuICAgICAgbW9uZXRhcnkgPSBkdXBsaWNhdGUoc2V0dXAuc3lzdGVtLm1vbmV0YXJ5KVxuICAgIH1cbiAgICBjb25zdCBkZXZlbG9wbWVudCA9IHtcbiAgICAgIHBlcnNvbmFsOiAyICogKHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmludCwgMTApKSxcbiAgICAgIG9jY3VwYXRpb246IDAsXG4gICAgICBhcmNoZXR5cGU6IDBcbiAgICB9XG4gICAgaWYgKGRhdGEuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgY29uc3QgYXJjaGV0eXBlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRChkYXRhLmFyY2hldHlwZSlcbiAgICAgIGlmIChhcmNoZXR5cGUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGl0ZW1zLnB1c2goYXJjaGV0eXBlWzBdLnRvT2JqZWN0KCkpXG4gICAgICAgIGRldmVsb3BtZW50LmFyY2hldHlwZSA9IGFyY2hldHlwZVswXS5zeXN0ZW0uYm9udXNQb2ludHNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRhdGEub2NjdXBhdGlvbiAhPT0gJycpIHtcbiAgICAgIGNvbnN0IG9jY3VwYXRpb24gPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKGRhdGEub2NjdXBhdGlvbilcbiAgICAgIGlmIChvY2N1cGF0aW9uLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpdGVtcy5wdXNoKG9jY3VwYXRpb25bMF0udG9PYmplY3QoKSlcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb25bMF0uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgICAgICBvcHRpb25zLnB1c2goY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRldmVsb3BtZW50Lm9jY3VwYXRpb24gKz0gY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZGV2ZWxvcG1lbnQub2NjdXBhdGlvbiArPSBNYXRoLm1heCguLi5vcHRpb25zKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGJpb2dyYXBoeSA9IFtdXG4gICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGRhdGEuYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICBiaW9ncmFwaHkucHVzaCh7XG4gICAgICAgIHRpdGxlOiBkYXRhLmJpb1NlY3Rpb25zW2luZGV4XS5uYW1lLFxuICAgICAgICB2YWx1ZTogZGF0YS5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWVcbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHtcbiAgICAgIHR5cGU6ICdjaGFyYWN0ZXInLFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgaW1nOiBkYXRhLmF2YXRhcixcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IHtcbiAgICAgICAgICBzdHI6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnN0ciwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5zdHIsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29uOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5jb24sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuY29uLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpejoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuc2l6LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLnNpeiwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXg6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmRleCwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5kZXgsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXBwOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5hcHAsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuYXBwLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGludDoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmludCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3c6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnBvdywgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5wb3csIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5lZHUsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuZWR1LCAxMClcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgICBsY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBNYXRoLm1heChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmx1Y2ssIDEwKSwgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5sdWNrLCAxMCkpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzYW46IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnBvdywgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5wb3csIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5mb3M6IHtcbiAgICAgICAgICBhZ2U6IGRhdGEuYWdlLFxuICAgICAgICAgIHJlc2lkZW5jZTogZGF0YS5yZXNpZGVuY2UsXG4gICAgICAgICAgYmlydGhwbGFjZTogZGF0YS5iaXJ0aHBsYWNlXG4gICAgICAgIH0sXG4gICAgICAgIGRldmVsb3BtZW50LFxuICAgICAgICBiaW9ncmFwaHksXG4gICAgICAgIG1vbmV0YXJ5XG4gICAgICB9LFxuICAgICAgcHJvdG90eXBlVG9rZW46IHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhY3Rvckxpbms6IHRydWUsXG4gICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICBzcmM6IGRhdGEudG9rZW5cbiAgICAgICAgfSxcbiAgICAgICAgZGlzcG9zaXRpb246IENPTlNULlRPS0VOX0RJU1BPU0lUSU9OUy5GUklFTkRMWSxcbiAgICAgICAgc2lnaHQ6IHtcbiAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpdGVtcyxcbiAgICAgIG93bmVyc2hpcDoge1xuICAgICAgICBkZWZhdWx0OiBwYXJzZUludChkYXRhLmRlZmF1bHRPd25lcnNoaXAsIDEwKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0b3JEYXRhXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQ2hhcmFjdGVyRnJvbURhdGEgKGFjdG9yRGF0YSkge1xuICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGVDaGFyYWN0ZXIoYWN0b3JEYXRhKVxuICAgIGNvbnN0IGZ1bmN0aW9uSWQgPSBIb29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgICAgIGlmIChhcHAub2JqZWN0LmlkID09PSBhY3Rvci5pZCkge1xuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgICAgICB0eXBlOiAnb3Blbi1jaGFyYWN0ZXInLFxuICAgICAgICAgIGxpc3RlbmVyOiBPYmplY3Qua2V5cyhhY3RvckRhdGEub3duZXJzaGlwKS5maW5kKGsgPT4gayAhPT0gJ2RlZmF1bHQnKSxcbiAgICAgICAgICBwYXlsb2FkOiBhY3Rvci5pZFxuICAgICAgICB9KVxuICAgICAgICBIb29rcy5vZmYoJ3JlbmRlckFjdG9yU2hlZXQnLCBmdW5jdGlvbklkKVxuICAgICAgfVxuICAgIH0pXG4gICAgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQ2hhcmFjdGVyIChhY3RvckRhdGEpIHtcbiAgICBjb25zdCBhY3RvciA9IGF3YWl0IEFjdG9yLmNyZWF0ZShhY3RvckRhdGEpXG4gICAgYXdhaXQgYWN0b3IudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6IGFjdG9yLnJhd0hwTWF4LFxuICAgICAgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzogYWN0b3IucmF3TXBNYXgsXG4gICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLm1heCc6IGFjdG9yLnJhd01wTWF4XG4gICAgfSlcbiAgICBhd2FpdCBhY3Rvci5yZXNldERhaWx5U2FuaXR5KClcbiAgICByZXR1cm4gYWN0b3JcbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGUgaXQncyB0aGUgZGVmYXVsdCB3YXkgdG8gY3JlYXRlIHRoZSBDb0M3Q2hhcmFjdGVyV2l6YXJkXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICAvLyBUcnkgYW5kIHByZXJlcXVzdCBhcyBtYW55IENvQ0lEcyBkdWUgdG8gdGhlIHdheSB0aGV5IGhhdmUgdG8gYmUgbG9hZGVkXG4gICAgb3B0aW9ucyA9IG1lcmdlT2JqZWN0KHtcbiAgICAgIHN0ZXA6IDAsXG4gICAgICBkZWZhdWx0U2V0dXA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFNldHVwJyksXG4gICAgICBkZWZhdWx0UXVhbnRpdHk6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JyksXG4gICAgICBkZWZhdWx0T3duZXJzaGlwOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRPd25lcnNoaXAnKSxcbiAgICAgIGRlZmF1bHRFcmE6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJyksXG4gICAgICByZXJvbGxzRW5hYmxlZDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUmVyb2xscycpLFxuICAgICAgZW5mb3JjZVBvaW50QnV5OiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRQb2ludEJ1eScpLFxuICAgICAgcXVpY2tGaXJlVmFsdWVzOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWlja0ZpcmUnKSxcbiAgICAgIHBsYWNlYWJsZTogZHVwbGljYXRlKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1aWNrRmlyZScpKSxcbiAgICAgIGNhY2hlQ29DSUQ6IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQubG9hZENhY2hlSXRlbUJ5Q29DSUQoKSxcbiAgICAgIGNhY2hlQmFja3N0b3JpZXM6IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogL15ydFxcLlxcLmJhY2tzdG9yeS0vLCB0eXBlOiAncnQnIH0pLFxuICAgICAgY2FjaGVJdGVtczoge30sXG4gICAgICBzZXR1cDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnKSxcbiAgICAgIHNraWxsSXRlbXM6IHt9LFxuICAgICAgb2NjdXBhdGlvbkdyb3Vwczoge30sXG4gICAgICBpbnZlc3RpZ2F0b3JJdGVtczogW10sXG4gICAgICBzZXR1cFBvaW50czoge1xuICAgICAgICBzdHI6ICcnLFxuICAgICAgICBjb246ICcnLFxuICAgICAgICBzaXo6ICcnLFxuICAgICAgICBkZXg6ICcnLFxuICAgICAgICBhcHA6ICcnLFxuICAgICAgICBpbnQ6ICcnLFxuICAgICAgICBwb3c6ICcnLFxuICAgICAgICBlZHU6ICcnLFxuICAgICAgICBsdWNrOiAnJ1xuICAgICAgfSxcbiAgICAgIHNldHVwTW9kaWZpZXJzOiB7XG4gICAgICAgIHN0cjogMCxcbiAgICAgICAgY29uOiAwLFxuICAgICAgICBzaXo6IDAsXG4gICAgICAgIGRleDogMCxcbiAgICAgICAgYXBwOiAwLFxuICAgICAgICBpbnQ6IDAsXG4gICAgICAgIHBvdzogMCxcbiAgICAgICAgZWR1OiAwLFxuICAgICAgICBsdWNrOiAwXG4gICAgICB9LFxuICAgICAgYXJjaGV0eXBlOiAnJyxcbiAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpYzogJycsXG4gICAgICBvY2N1cGF0aW9uOiAnJyxcbiAgICAgIGJpb1NlY3Rpb25zOiBbXSxcbiAgICAgIHBlcnNvbmFsOiAwLFxuICAgICAgY3JlZGl0UmF0aW5nOiB7XG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiAwXG4gICAgICB9LFxuICAgICAgbmFtZTogJycsXG4gICAgICBhZ2U6ICcnLFxuICAgICAgcmVxdWlyZXNBZ2VBZGp1c3RtZW50czogZmFsc2UsXG4gICAgICByZXNpZGVuY2U6ICcnLFxuICAgICAgYmlydGhwbGFjZTogJycsXG4gICAgICBsYW5ndWFnZTogJycsXG4gICAgICBhdmF0YXI6ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyxcbiAgICAgIHRva2VuOiAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZydcbiAgICB9LCBvcHRpb25zKVxuICAgIG5ldyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkKG9wdGlvbnMpLnJlbmRlcih0cnVlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBmb3VuZHJ5LCBnYW1lLCBQbGFjZWFibGVzTGF5ZXIgKi9cbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cgfSBmcm9tICcuL2FwcHMvYWN0b3ItaW1wb3J0ZXItZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2NvYzctY29udGVudC1saW5rLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQgfSBmcm9tICcuL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5qcydcblxuY2xhc3MgQ29DN01lbnVMYXllciBleHRlbmRzIFBsYWNlYWJsZXNMYXllciB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcigpXG4gICAgdGhpcy5vYmplY3RzID0ge31cbiAgfVxuXG4gIHN0YXRpYyBnZXQgbGF5ZXJPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5sYXllck9wdGlvbnMsIHtcbiAgICAgIG5hbWU6ICdjb2M3bWVudScsXG4gICAgICB6SW5kZXg6IDYwXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZG9jdW1lbnROYW1lICgpIHtcbiAgICByZXR1cm4gJ1Rva2VuJ1xuICB9XG5cbiAgZ2V0IHBsYWNlYWJsZXMgKCkge1xuICAgIHJldHVybiBbXVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3TWVudSB7XG4gIHN0YXRpYyBnZXRCdXR0b25zIChjb250cm9scykge1xuICAgIGNhbnZhcy5jb2M3Z210b29scyA9IG5ldyBDb0M3TWVudUxheWVyKClcbiAgICBjb25zdCBpc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgY29uc3Qgc2hvd0hpZGRlbkRldk1lbnUgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdoaWRkZW5kZXZtZW51JylcbiAgICBjb250cm9scy5wdXNoKHtcbiAgICAgIG5hbWU6ICdjb2M3bWVudScsXG4gICAgICB0aXRsZTogJ0NvQzcuR21Ub29scycsXG4gICAgICBsYXllcjogJ2NvYzdnbXRvb2xzJyxcbiAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLXRlbnRhY2xlLXN0cmlrZScsXG4gICAgICB2aXNpYmxlOiBpc0tlZXBlcixcbiAgICAgIHRvb2xzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1hbmdsZS1kb3VibGUtdXAnLFxuICAgICAgICAgIG5hbWU6ICdkZXZwaGFzZScsXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKSxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuRGV2UGhhc2UnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIHRvZ2dsZSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZURldlBoYXNlKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLXVzZXItZWRpdCcsXG4gICAgICAgICAgbmFtZTogJ2NoYXJjcmVhdGUnLFxuICAgICAgICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5DaGFyQ3JlYXRpb25Nb2RlJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyB0b2dnbGUgPT5cbiAgICAgICAgICAgIGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlQ2hhckNyZWF0aW9uKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLXVzZXItcGx1cycsXG4gICAgICAgICAgbmFtZTogJ2FjdG9yLWltcG9ydCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkFjdG9ySW1wb3J0ZXInLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+IGF3YWl0IENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmNyZWF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS11c2VyLWNoZWNrJyxcbiAgICAgICAgICBuYW1lOiAnaW52ZXN0aWdhdG9yLXdpemFyZCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkludmVzdGlnYXRvcldpemFyZC5UaXRsZScsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4gYXdhaXQgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGUoKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtY2VydGlmaWNhdGUnLFxuICAgICAgICAgIGNsYXNzOiAneHBfdG9nZ2xlJyxcbiAgICAgICAgICBuYW1lOiAneHB0b2dnbGUnLFxuICAgICAgICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJyksXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LnRvZ2dsZVhQJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyB0b2dnbGUgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVYUEdhaW4odG9nZ2xlKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLWNhcmQtam9rZXInLFxuICAgICAgICAgIG5hbWU6ICdmYWtlcm9sbCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkZha2VSb2xsJyxcbiAgICAgICAgICBvbkNsaWNrOiBDb0M3Q2hhdC5mYWtlUm9sbE1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLW1vb24nLFxuICAgICAgICAgIG5hbWU6ICdzdGFydHJlc3QnLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5zdGFydFJlc3QnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0VGFyZ2V0KClcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gICAgaWYgKHNob3dIaWRkZW5EZXZNZW51KSB7XG4gICAgICBjYW52YXMuY29jN0RldlRvb2xzID0gbmV3IENvQzdNZW51TGF5ZXIoKVxuICAgICAgY29udHJvbHMucHVzaCh7XG4gICAgICAgIG5hbWU6ICdjb2M3RGV2TWVudScsXG4gICAgICAgIHRpdGxlOlxuICAgICAgICAgIFwiRGV2IHRvb2xzLiBJZiB5b3UgZG9uJ3Qga25vdyB3aGF0IGl0IGlzLCB5b3UgZG9uJ3QgbmVlZCBpdCBhbmQgeW91IHNob3VsZG4ndCB1c2UgaXQgISFcIixcbiAgICAgICAgbGF5ZXI6ICdjb2M3RGV2VG9vbHMnLFxuICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1wb2xpY2UtYmFkZ2UnLFxuICAgICAgICB2aXNpYmxlOiBpc0tlZXBlcixcbiAgICAgICAgdG9vbHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1kaWNlLWZpcmUnLFxuICAgICAgICAgICAgbmFtZTogJ2Fsd2F5c0NyaXQnLFxuICAgICAgICAgICAgYWN0aXZlOiBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzQ3JpdCxcbiAgICAgICAgICAgIHRpdGxlOiAnQWxsIHJvbGxzIHdpbGwgY3JpdCcsXG4gICAgICAgICAgICBvbkNsaWNrOiB0b2dnbGUgPT4ge1xuICAgICAgICAgICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzRnVtYmxlID0gZmFsc2VcbiAgICAgICAgICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQgPSB0b2dnbGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLWZpcmUtZXh0aW5ndWlzaGVyJyxcbiAgICAgICAgICAgIG5hbWU6ICdhbHdheXNGdW1ibGUnLFxuICAgICAgICAgICAgYWN0aXZlOiBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzRnVtYmxlLFxuICAgICAgICAgICAgdGl0bGU6ICdBbGwgcm9sbHMgd2lsbCBmdW1ibGUnLFxuICAgICAgICAgICAgb25DbGljazogdG9nZ2xlID0+IHtcbiAgICAgICAgICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0Z1bWJsZSA9IHRvZ2dsZVxuICAgICAgICAgICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzQ3JpdCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyByZW5kZXJDb250cm9scyAoYXBwLCBodG1sLCBkYXRhKSB7XG4gICAgY29uc3QgaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIGNvbnN0IGtlZXBlck1lbnUgPSBodG1sLmZpbmQoJy5nYW1lLWljb24tdGVudGFjbGUtc3RyaWtlJykucGFyZW50KClcbiAgICBrZWVwZXJNZW51LmFkZENsYXNzKCdjb2M3LW1lbnUnKVxuICAgIGlmIChpc0tlZXBlcikge1xuICAgICAga2VlcGVyTWVudS5hZnRlcihcbiAgICAgICAgJzxsaSBjbGFzcz1cInNjZW5lLWNvbnRyb2wgY29jNy1tZW51IGNvYzctY3JlYXRlLWxpbmtcIiB0aXRsZT1cIicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DcmVhdGVMaW5rJykgK1xuICAgICAgICAgICdcIj48aSBjbGFzcz1cImZhcyBmYS1saW5rXCI+PC9pPjwvbGk+J1xuICAgICAgKVxuICAgIH1cbiAgICBrZWVwZXJNZW51LmFmdGVyKFxuICAgICAgJzxsaSBjbGFzcz1cInNjZW5lLWNvbnRyb2wgY29jNy1tZW51IGNvYzctZGljZS1yb2xsXCIgdGl0bGU9XCInICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxEaWNlJykgK1xuICAgICAgICAnXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLWQxMFwiPjwvaT48L2xpPidcbiAgICApXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5jb2M3LW1lbnUuY29jNy1kaWNlLXJvbGwnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IENvQzdVdGlsaXRpZXMucm9sbERpY2UoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY29jNy1tZW51LmNvYzctY3JlYXRlLWxpbmsnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUoZXZlbnQpKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vY29jNy1saW5rLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NhbnZhcyB7XG4gIHN0YXRpYyBnZXQgQ09DN19UWVBFU19TVVBQT1JURUQgKCkge1xuICAgIHJldHVybiBbJ0NvQzdMaW5rJywgJ2xvY2F0b3InLCAnZ2V0VG9rZW4nXVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG9uRHJvcFNvbWV0aGluZyAoY2FudmFzLCBkYXRhKSB7XG4gICAgaWYgKFxuICAgICAgZGF0YS50eXBlICYmXG4gICAgICBDb0M3Q2FudmFzLkNPQzdfVFlQRVNfU1VQUE9SVEVELmluY2x1ZGVzKGRhdGEudHlwZSlcbiAgICApIHtcbiAgICAgIGNvbnN0IGdyaWRTaXplID0gY2FudmFzLnNjZW5lLmdyaWQuc2l6ZVxuICAgICAgY29uc3QgeCA9IGRhdGEueCAtIGdyaWRTaXplIC8gMlxuICAgICAgY29uc3QgeSA9IGRhdGEueSAtIGdyaWRTaXplIC8gMlxuICAgICAgY29uc3QgaGVpZ2h0ID0gZ3JpZFNpemVcbiAgICAgIGNvbnN0IHdpZHRoID0gZ3JpZFNpemVcbiAgICAgIGxldCBkcm9wVGFyZ2V0VG9rZW5zID0gY2FudmFzLnRva2Vucy5wbGFjZWFibGVzLmZpbHRlcihvYmogPT4ge1xuICAgICAgICBjb25zdCBjID0gb2JqLmNlbnRlclxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIE51bWJlci5iZXR3ZWVuKGMueCwgeCwgeCArIHdpZHRoKSAmJlxuICAgICAgICAgIE51bWJlci5iZXR3ZWVuKGMueSwgeSwgeSArIGhlaWdodClcbiAgICAgICAgKVxuICAgICAgfSkgLy8gRmluZCBkcm9wIHRhcmdldC5cbiAgICAgIGlmICghZHJvcFRhcmdldFRva2Vucy5sZW5ndGgpIGRyb3BUYXJnZXRUb2tlbnMgPSBjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQgLy8gSWYgbm8gdGFyZ2V0IHdoaXNwZXIgdG8gc2VsZWN0ZWQgdG9rZW5cbiAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgIGNhc2UgJ0NvQzdMaW5rJzpcbiAgICAgICAgICBpZiAoZGF0YS5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QpIHtcbiAgICAgICAgICAgIGlmIChkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGRyb3BUYXJnZXRUb2tlbnMpIHtcbiAgICAgICAgICAgICAgICBDb0M3TGluay5fb25MaW5rQWN0b3JDbGljayh0b2tlbi5hY3RvciwgZGF0YSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gQXBwbHkgdG8gZXZlcnlvbmUgPyBvciBvbmx5IHBsYXllcnMgPyBvciBub2JvZHlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGRyb3BUYXJnZXRUb2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICBDb0M3TGluay50b1doaXNwZXJNZXNzYWdlKGRhdGEsIGRyb3BUYXJnZXRUb2tlbnMuZmlsdGVyKHQgPT4gdC5hY3Rvci5vd25lcnMubGVuZ3RoKS5tYXAodCA9PiB0LmFjdG9yKSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQ29DN0xpbmsudG9XaGlzcGVyTWVzc2FnZShkYXRhLCBnYW1lLnVzZXJzLnBsYXllcnMuZmlsdGVyKHUgPT4gISF1LmNoYXJhY3RlcikubWFwKHUgPT4gdS5jaGFyYWN0ZXIpKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdnZXRUb2tlbic6XG4gICAgICAgICAgaWYgKHR5cGVvZiBkYXRhLmFwcElkICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZGF0YS5jYWxsQmFjayA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHVpLndpbmRvd3NbZGF0YS5hcHBJZF0gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiB1aS53aW5kb3dzW2RhdGEuYXBwSWRdW2RhdGEuY2FsbEJhY2tdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB1aS53aW5kb3dzW2RhdGEuYXBwSWRdW2RhdGEuY2FsbEJhY2tdKGRyb3BUYXJnZXRUb2tlbnMpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgLy8gSGFuZGxlcyBnZW5lcmljIGNhbnZhIGRyb3AuXG4gICAgICAgIC8vIGRhdGFUcmFuc2ZlciBtdXN0IGluY2x1ZGUgOlxuICAgICAgICAvLyAtIGRvY1V1aWQgOiB0aGUgVXVpZCBvZiB0aGUgZG9jdW1lbnQgdG8gY2FsbFxuICAgICAgICAvLyAtIGNhbGxCYWNrIDogdGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uIHRvIGNhbGwgaW4gdGhlIGRvY3VtZW50LlxuICAgICAgICAvLyBVc2VkIHRvIHNlbGVjdCBsb2NhdGlvbiBmb3IgY2hhc2VcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBpZiAoZGF0YS5kb2NVdWlkICYmIGRhdGEuY2FsbEJhY2spIHtcbiAgICAgICAgICAgIGNvbnN0IGRvYyA9IENvQzdVdGlsaXRpZXMuU2Zyb21VdWlkKGRhdGEuZG9jVXVpZClcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgZG9jW2RhdGEuY2FsbEJhY2tdICYmXG4gICAgICAgICAgICAgIHR5cGVvZiBkb2NbZGF0YS5jYWxsQmFja10gPT09ICdmdW5jdGlvbidcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGRhdGEuc2NlbmUgPSBjYW52YXMuc2NlbmUudXVpZFxuICAgICAgICAgICAgICAgIGRvY1tkYXRhLmNhbGxCYWNrXShkYXRhKVxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnJvci5tZXNzYWdlKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBnYW1lLCBTZXR0aW5ncyAqL1xuZXhwb3J0IGNsYXNzIENvQzdTZXR0aW5nc0RpcmVjdG9yeSBleHRlbmRzIFNldHRpbmdzIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnI3NldHRpbmdzLWdhbWUnKVxuICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICc8YnV0dG9uIGNsYXNzPVwidHJpZ2dlci1kYXRhLW1pZ3JhdGlvblwiPjxpIGNsYXNzPVwiZmFzIGZhLXdyZW5jaFwiPjwvaT4gJyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyQnV0dG9uJykgK1xuICAgICAgICAgICAgJzwvYnV0dG9uPidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCcudHJpZ2dlci1kYXRhLW1pZ3JhdGlvbicpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgbmV3IERpYWxvZyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVHJpZ2dlclRpdGxlJyksXG4gICAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyQ29udGVudHMnKSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgbWlncmF0ZToge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyUmVzdGFydCcpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywgMClcbiAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgY2xvc2U6IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtYmFuXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ2FuY2VsJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHt9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2xvc2UnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7fVxuICAgICAgICApLnJlbmRlcih0cnVlKVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDb21wZW5kaXVtRGlyZWN0b3J5LCBEaWFsb2csIGdhbWUgKi9cbmV4cG9ydCBjbGFzcyBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSBleHRlbmRzIENvbXBlbmRpdW1EaXJlY3Rvcnkge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgbGV0IHRyYW5zbGF0ZWQgPSBmYWxzZVxuICAgIGlmIChnYW1lLmkxOG4ubGFuZyA9PT0gJ2VuJykge1xuICAgICAgdHJhbnNsYXRlZCA9IHRydWVcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBnYW1lLmJhYmVsZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3QgdiBvZiBPYmplY3QudmFsdWVzKGdhbWUuYmFiZWxlLm1vZHVsZXMpKSB7XG4gICAgICAgIGlmICh2LmxhbmcgPT09IGdhbWUuaTE4bi5sYW5nKSB7XG4gICAgICAgICAgdHJhbnNsYXRlZCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXRyYW5zbGF0ZWQpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ2Zvb3Rlci5kaXJlY3RvcnktZm9vdGVyJylcbiAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAnPGEgY2xhc3M9XCJjb21wZW5kaXVtLXRyYW5zbGF0aW9uXCIgdGl0bGU9XCInICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZVRpdGxlJykgK1xuICAgICAgICAgICAgJ1wiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlVGl0bGUnKSArXG4gICAgICAgICAgICAnPC9hPidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCcuY29tcGVuZGl1bS10cmFuc2xhdGlvbicpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZVdhcm5pbmcnKSArXG4gICAgICAgICAgJzwvcD4nICtcbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlSW5zdGFsbEJhYmVsZScpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVJbnN0YWxsVHJhbnNsYXRpb24nKSArXG4gICAgICAgICAgJzwvcD4nICtcbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlRW5hYmxlVHJhbnNsYXRpb24nKSArXG4gICAgICAgICAgJzwvcD4nICtcbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlTm9UcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPidcbiAgICAgICAgbmV3IERpYWxvZyhcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlVGl0bGUnKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UsXG4gICAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdjbG9zZSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHt9XG4gICAgICAgICkucmVuZGVyKHRydWUpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yRGlyZWN0b3J5LCBDT05TVCwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cgfSBmcm9tICcuL2FwcHMvYWN0b3ItaW1wb3J0ZXItZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0ludmVzdGlnYXRvcldpemFyZCB9IGZyb20gJy4vYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9yRGlyZWN0b3J5IGV4dGVuZHMgQWN0b3JEaXJlY3Rvcnkge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAvLyBBbGxvdyBJbnZlc3RpZ2F0b3IgV2l6YXJkXG4gICAgLy8gICogSWYgdGhlIHVzZXIgcm9sZSBpcyBhbGxvd2VkIHRvIGNyZWF0ZSBhY3RvcnNcbiAgICAvLyAgKiBJZiB0aGUgdXNlciBoYXMgbGVzcyBvd25lZCBhY3RvcnMgdGhhbiBhbGxvd2VkIGluIHNldHRpbmdzXG4gICAgbGV0IGFsbG93V2l6YXJkID0gZ2FtZS51c2VyLnJvbGUgPj0gQ09OU1QuVVNFUl9QRVJNSVNTSU9OUy5BQ1RPUl9DUkVBVEUuZGVmYXVsdFJvbGVcbiAgICBpZiAoIWFsbG93V2l6YXJkKSB7XG4gICAgICBjb25zdCBhbGxvd2VkID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknKVxuICAgICAgaWYgKGFsbG93ZWQgPiAwKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGEgPT4gW2Eub3duZXJzaGlwLmRlZmF1bHQsIChhLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTk9ORSldLmluY2x1ZGVzKENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVIpKS5sZW5ndGhcbiAgICAgICAgYWxsb3dXaXphcmQgPSBleGlzdGluZyA8IGFsbG93ZWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYWxsb3dXaXphcmQpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ2Zvb3Rlci5kaXJlY3RvcnktZm9vdGVyJylcbiAgICAgICAgLmFwcGVuZCgnPGEgY2xhc3M9XCJpbnZlc3RpZ2F0b3Itd2l6YXJkXCI+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbnZlc3RpZ2F0b3JXaXphcmQuVGl0bGUnKSArICc8L2E+JylcbiAgICAgIGh0bWwuZmluZCgnLmludmVzdGlnYXRvci13aXphcmQnKS5jbGljaygoKSA9PiB7XG4gICAgICAgIENvQzdJbnZlc3RpZ2F0b3JXaXphcmQuY3JlYXRlKClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCdmb290ZXIuZGlyZWN0b3J5LWZvb3RlcicpXG4gICAgICAgIC5hcHBlbmQoXG4gICAgICAgICAgJzxhIGNsYXNzPVwiYWN0b3ItaW1wb3J0XCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlcicpICtcbiAgICAgICAgICAgICc8L2E+J1xuICAgICAgICApXG4gICAgICBodG1sLmZpbmQoJy5hY3Rvci1pbXBvcnQnKS5jbGljaygoKSA9PiB7XG4gICAgICAgIENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmNyZWF0ZSgpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBEaWFsb2csIGdhbWUsIG1lcmdlT2JqZWN0LCBSb2xsLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTcGVsbCBleHRlbmRzIENvQzdJdGVtIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9wZW50YWdyYW0tcm9zZS5zdmcnXG4gICAgfVxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gICAgdGhpcy5jb250ZXh0ID0gY29udGV4dFxuICB9XG5cbiAgYXN5bmMgY2FzdCAoKSB7XG4gICAgaWYgKCF0aGlzLmlzT3duZWQpIHtcbiAgICAgIC8qKiBUaGlzIGlzIG5vdCBvd25lZCBieSBhbnkgQWN0b3IgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RPd25lZCcpKVxuICAgIH1cbiAgICBjb25zdCBjb3N0cyA9IHRoaXMuc3lzdGVtLmNvc3RzXG4gICAgY29uc3QgbG9zc2VzID0gW11cbiAgICBsZXQgY29udmVydFN1cnBsdXNJbnRvSGl0UG9pbnRzXG4gICAgY29zdHMubWFnaWNQb2ludHMgPSBDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYShjb3N0cy5tYWdpY1BvaW50cylcbiAgICAgID8gKGF3YWl0IG5ldyBSb2xsKGNvc3RzLm1hZ2ljUG9pbnRzKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICA6IHBhcnNlSW50KGNvc3RzLm1hZ2ljUG9pbnRzKVxuICAgIGlmIChcbiAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzICYmXG4gICAgICBjb3N0cy5tYWdpY1BvaW50cyA+IHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWVcbiAgICApIHtcbiAgICAgIGNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBjb25zdCBjb252ZXJ0ZWRIaXRQb2ludHMgPVxuICAgICAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzIC0gdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZVxuICAgICAgICBjb25zdCBjb252ZXJ0ZWRNYWdpY1BvaW50cyA9IGNvc3RzLm1hZ2ljUG9pbnRzIC0gY29udmVydGVkSGl0UG9pbnRzXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdGl0bGU6ICcgJyxcbiAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk5vdEVub3VnaE1hZ2ljUG9pbnRzJywge1xuICAgICAgICAgICAgYWN0b3JNYWdpY1BvaW50czogdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSxcbiAgICAgICAgICAgIGNvbnZlcnRlZEhpdFBvaW50cyxcbiAgICAgICAgICAgIGNvbnZlcnRlZE1hZ2ljUG9pbnRzLFxuICAgICAgICAgICAgb3JpZ2luYWxNYWdpY1BvaW50czogY29zdHMubWFnaWNQb2ludHMsXG4gICAgICAgICAgICBzcGVsbDogdGhpcy5uYW1lXG4gICAgICAgICAgfSksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgY2FuY2VsOiB7XG4gICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhbmNlbCcpLFxuICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcHJvY2VlZDoge1xuICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29zdHMuaGl0UG9pbnRzID0gY29udmVydGVkSGl0UG9pbnRzXG4gICAgICAgICAgICAgICAgY29zdHMubWFnaWNQb2ludHMgPSBjb252ZXJ0ZWRNYWdpY1BvaW50c1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHRydWUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlZmF1bHQ6ICdjYW5jZWwnLFxuICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnXVxuICAgICAgICB9XG4gICAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgICB9KVxuICAgICAgaWYgKCFjb252ZXJ0U3VycGx1c0ludG9IaXRQb2ludHMpIHJldHVyblxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjb3N0cykpIHtcbiAgICAgIGlmICghdmFsdWUgfHwgTnVtYmVyKHZhbHVlKSA9PT0gMCkgY29udGludWVcbiAgICAgIGxvc3Nlcy5wdXNoKGF3YWl0IHRoaXMucmVzb2x2ZUxvc3NlcyhrZXksIHZhbHVlKSlcbiAgICB9XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zcGVsbC9jaGF0Lmh0bWwnXG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSB0aGlzLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgeyBkZXNjcmlwdGlvbiwgbG9zc2VzIH0pXG4gICAgcmV0dXJuIGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHsgYWN0b3I6IHRoaXMuYWN0b3IgfSksXG4gICAgICBmbGF2b3I6IHRoaXMubmFtZSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgcmVzb2x2ZUxvc3NlcyAoY2hhcmFjdGVyaXN0aWMsIHZhbHVlKSB7XG4gICAgbGV0IGNoYXJhY3RlcmlzdGljTmFtZVxuICAgIGxldCBsb3NzXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNGb3JtdWxhKHZhbHVlKSkge1xuICAgICAgbG9zcyA9IChhd2FpdCBuZXcgUm9sbCh2YWx1ZSkucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgIH0gZWxzZSB7XG4gICAgICBsb3NzID0gcGFyc2VJbnQodmFsdWUpXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHRoaXMuYWN0b3Iuc3lzdGVtXG4gICAgc3dpdGNoIChjaGFyYWN0ZXJpc3RpYykge1xuICAgICAgY2FzZSAnaGl0UG9pbnRzJzpcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhpdFBvaW50cycpXG4gICAgICAgIHRoaXMuYWN0b3IuZGVhbERhbWFnZShsb3NzLCB7IGlnbm9yZUFybW9yOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzYW5pdHknOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5UG9pbnRzJylcbiAgICAgICAgdGhpcy5ncmFudFNhbml0eUxvc3MobG9zcylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ21hZ2ljUG9pbnRzJzpcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1hZ2ljUG9pbnRzJylcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRNcChhY3RvckRhdGEuYXR0cmlicy5tcC52YWx1ZSAtIGxvc3MpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdwb3dlcic6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlBvd2VyJylcbiAgICAgICAgdGhpcy5hY3Rvci51cGRhdGUoe1xuICAgICAgICAgICdzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSc6XG4gICAgICAgICAgICBhY3RvckRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZSAtIGxvc3NcbiAgICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIHsgY2hhcmFjdGVyaXN0aWNOYW1lLCBsb3NzIH1cbiAgfVxuXG4gIC8qKiBCeXBhc3MgdGhlIFNhbml0eSBjaGVjayBhbmQganVzdCByb2xsIHRoZSBkYW1hZ2UgKi9cbiAgYXN5bmMgZ3JhbnRTYW5pdHlMb3NzICh2YWx1ZSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gU2FuQ2hlY2tDYXJkLnRlbXBsYXRlXG4gICAgbGV0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwge30pXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHsgYWN0b3I6IHRoaXMuYWN0b3IgfSksXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2FzdGluZ1NwZWxsJywge1xuICAgICAgICBzcGVsbDogdGhpcy5uYW1lXG4gICAgICB9KSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBtZXNzYWdlLmdldEhUTUwoKVxuICAgIGlmICh0eXBlb2YgY2FyZC5sZW5ndGggIT09ICd1bmRlZmluZWQnICYmIGNhcmQubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzID0gdmFsdWVcbiAgICAgIGh0bWwgPSBjYXJkLmZpbmQoJy5jaGF0LWNhcmQnKVswXVxuICAgICAgaHRtbC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yLmlkLFxuICAgICAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcbiAgICAgICAgICBzYW5EYXRhOiB7XG4gICAgICAgICAgICBzYW5NaW46IHNhbml0eUxvc3MsXG4gICAgICAgICAgICBzYW5NYXg6IHNhbml0eUxvc3NcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICBjb25zdCBzYW5pdHlDaGVjayA9IFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChodG1sKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2suYnlwYXNzUm9sbFNhbigpXG4gICAgICBhd2FpdCBzYW5pdHlDaGVjay5yb2xsU2FuTG9zcygpXG4gICAgICBzYW5pdHlDaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHRoaXMuY29udGV4dC5wYXJlbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgdGhpcy5jb250ZXh0LmJvb2tJZCAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGxldCBpdGVtXG4gICAgICBsZXQgYm9va1xuICAgICAgLy8gbGV0IHNwZWxsRGF0YVxuICAgICAgaWYgKHRoaXMuY29udGV4dC5wYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHRoaXMuY29udGV4dC5ib29rSWQpXG4gICAgICAgIGJvb2sgPSBpdGVtLnRvT2JqZWN0KClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJvb2sgPSB0aGlzLmNvbnRleHQucGFyZW50Lml0ZW1zLmdldCh0aGlzLmNvbnRleHQuYm9va0lkKS50b09iamVjdCgpXG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpID0gMCwgaW0gPSBib29rLnN5c3RlbS5zcGVsbHMubGVuZ3RoOyBpIDwgaW07IGkrKykge1xuICAgICAgICBpZiAoYm9vay5zeXN0ZW0uc3BlbGxzW2ldLl9pZCA9PT0gdGhpcy5pZCkge1xuICAgICAgICAgIGJvb2suc3lzdGVtLnNwZWxsc1tpXSA9IG1lcmdlT2JqZWN0KGJvb2suc3lzdGVtLnNwZWxsc1tpXSwgZGF0YSlcbiAgICAgICAgICAvLyBzcGVsbERhdGEgPSBib29rLnN5c3RlbS5zcGVsbHNbaV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29udGV4dC5wYXJlbnQgPT09IG51bGwpIHtcbiAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUoe1xuICAgICAgICAgICdzeXN0ZW0uc3BlbGxzJzogYm9vay5zeXN0ZW0uc3BlbGxzXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuc2hlZXQub2JqZWN0ID0gbmV3IENvQzdTcGVsbChcbiAgICAgICAgICBib29rLnN5c3RlbS5zcGVsbHMuZmluZChzcGVsbCA9PiBzcGVsbC5faWQgPT09IHRoaXMuaWQpLFxuICAgICAgICAgIHRoaXMuY29udGV4dFxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmNvbnRleHQucGFyZW50LnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2Jvb2tdKVxuICAgICAgICB0aGlzLnNoZWV0Lm9iamVjdCA9IG5ldyBDb0M3U3BlbGwoXG4gICAgICAgICAgYm9vay5zeXN0ZW0uc3BlbGxzLmZpbmQoc3BlbGwgPT4gc3BlbGwuX2lkID09PSB0aGlzLmlkKSxcbiAgICAgICAgICB0aGlzLmNvbnRleHRcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgdGhpcy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIudXBkYXRlKGRhdGEsIGNvbnRleHQpXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGR1cGxpY2F0ZSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUsIFJvbGwsIHVpICovXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL3Nhbi1jaGVjay5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1NwZWxsIH0gZnJvbSAnLi4vc3BlbGwvZGF0YS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdCb29rIGV4dGVuZHMgQ29DN0l0ZW0ge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3NlY3JldC1ib29rLnN2ZydcbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIC8qKiBDb252ZXJ0IHRoZSBkaWZmaWN1bHR5IG9uIHRoZSBzZWxlY3QgZWxlbWVudCB0byBhIGZvcm1hdCBhY2NlcHRlZCAqL1xuICBzdGF0aWMgY29udmVydERpZmZpY3VsdHkgKGRpZmZpY3VsdHkpIHtcbiAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcbiAgICAgIGNhc2UgJ2hhcmQnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgICBjYXNlICdleHRyZW1lJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgICAgY2FzZSAnY3JpdGljYWwnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgICAgY2FzZSAndW5yZWFkYWJsZSc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGVcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9yIHRoZSBmdXR1cmU6IGFkZCBhZHZhbmNlZCBydWxlcyBmb3IgbGVhcm5pbmcgc3BlbGxzLCBwZy4gMTc2XG4gICAqIEBwYXJhbSBbe0RvY3VtZW50fV0gc3BlbGxzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGFkZFNwZWxscyAoc3BlbGxzKSB7XG4gICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuc3lzdGVtLnNwZWxsc1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uc3BlbGxzKVxuICAgICAgOiBbXVxuICAgIGZvciAoY29uc3Qgc3BlbGwgb2Ygc3BlbGxzKSB7XG4gICAgICBjb2xsZWN0aW9uLnB1c2goc3BlbGwpXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uc3BlbGxzJzogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgYXN5bmMgc3BlbGxEZXRhaWwgKGluZGV4KSB7XG4gICAgY29uc3QgaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIGNvbnN0IGRhdGEgPSB0aGlzLnN5c3RlbS5zcGVsbHNbaW5kZXhdXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5hY3RvciA/IHRoaXMuYWN0b3IgOiBudWxsXG4gICAgY29uc3Qgc3BlbGwgPSBuZXcgQ29DN1NwZWxsKGRhdGEsIHsgcGFyZW50LCBib29rSWQ6IHRoaXMuaWQgfSlcbiAgICBpZiAoaXNLZWVwZXIgfHwgc3BlbGwuc3lzdGVtLmxlYXJuZWQpIHtcbiAgICAgIHJldHVybiBhd2FpdCBzcGVsbC5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlcyBhbGwgdGhlIGxvZ2ljIGludm9sdmluZyB0aGUgYXR0ZW1wdCBvZiBpbml0aWFsIHJlYWRpbmdcbiAgICogQHJldHVybnMge1Byb21pc2V9IEBzZWUgbGlzdGVuIEBzZWUgZ3JhbnRJbml0aWFsUmVhZGluZ1xuICAgKi9cbiAgYXN5bmMgYXR0ZW1wdEluaXRpYWxSZWFkaW5nICgpIHtcbiAgICAvKiogQ29udmVydHMgdGhlIGRpZmZpY3VsdHkgdmFsdWUgdG8gc29tZXRoaW5nIGFjY2VwdGVkIGJ5IENvQzdDaGVjayAqL1xuICAgIGNvbnN0IGRpZmZpY3VsdHkgPSBDb0M3Qm9vay5jb252ZXJ0RGlmZmljdWx0eShcbiAgICAgIHRoaXMuc3lzdGVtLmRpZmZpY3VsdHlMZXZlbFxuICAgIClcbiAgICBjb25zdCBsYW5ndWFnZSA9IHRoaXMuc3lzdGVtLmxhbmd1YWdlXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5nZXRTa2lsbHNCeU5hbWUobGFuZ3VhZ2UpXG4gICAgaWYgKCFza2lsbCkge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfSBlbHNlIGlmIChza2lsbC5sZW5ndGggPT09IDApIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIEFjdG9yIHdobyBvd25zIHRoaXMgZG9lcyBub3QgaGF2ZSB0aGUgc2tpbGwgb2ZcbiAgICAgICAqIHRoZSBsYW5ndWFnZSBpbiB3aGljaCBpdCB3YXMgd3JpdHRlblxuICAgICAgICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Vbmtub3duTGFuZ3VhZ2UnLCB7IGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUgfSlcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgY2hlY2suc2tpbGwgPSBza2lsbFswXS5pZFxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICAgIGNoZWNrLnBhcmVudCA9IHRoaXMudXVpZFxuICAgICAgY2hlY2suY29udGV4dCA9ICdJTklUSUFMX1JFQURJTkcnXG4gICAgICBjaGVjay5mbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlYWRBdHRlbXB0Jywge1xuICAgICAgICBib29rOiB0aGlzLm5hbWUsXG4gICAgICAgIGxhbmd1YWdlLFxuICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLnN5c3RlbS5kaWZmaWN1bHR5TGV2ZWxcbiAgICAgIH0pXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgIHJldHVybiBhd2FpdCBjaGVjay50b01lc3NhZ2UoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJdHMgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgaW50ZXJhY3RzIGluIHNvbWUgd2F5IHdpdGggcHJvZ3Jlc3MgYmFyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlICdyZXNldCcgfHwgJ2luY3JlYXNlJyB8fCAnZGVjcmVhc2UnXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSBqdXN0IHNvIHRoYXQgcHJvZ3Jlc3MgaXMgbm90IGdyZWF0ZXIgdGhhbiBuZWNlc3NhcnlcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgY2hhbmdlUHJvZ3Jlc3MgKG1vZGUsIHZhbHVlKSB7XG4gICAgaWYgKCF0aGlzLmlzT3duZWQgJiYgbW9kZSAhPT0gJ3Jlc2V0Jykge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfVxuICAgIGlmICghdGhpcy5zeXN0ZW0uaW5pdGlhbFJlYWRpbmcgJiYgbW9kZSAhPT0gJ3Jlc2V0Jykge1xuICAgICAgLyoqIEFjdG9yIGRpZCBub3QgcGVyZm9ybWVkIGFuIGluaXRpYWwgcmVhZGluZyBmaXJzdCAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhbFJlYWRpbmdOZWVkZWQnLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN5c3RlbS50eXBlLm15dGhvcyAmJiBtb2RlICE9PSAncmVzZXQnKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90TXl0aG9zVG9tZScpKVxuICAgIH1cbiAgICBjb25zdCBuZWNlc3NhcnkgPSB0aGlzLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnlcbiAgICBsZXQgZnVsbFN0dWR5ID0gdGhpcy5zeXN0ZW0uZnVsbFN0dWR5XG4gICAgbGV0IHByb2dyZXNzID0gdGhpcy5zeXN0ZW0uc3R1ZHkucHJvZ3Jlc3NcbiAgICBpZiAoaXNOYU4ocHJvZ3Jlc3MpKSB7XG4gICAgICAvKiogSXQgc2VlbXMgYSBsaXR0bGUgaW1wb3NzaWJsZSwgYnV0IHlvdSBuZXZlciBrbm93ICovXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnN0dWR5LnByb2dyZXNzJzogMFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHZhbHVlICYmIHByb2dyZXNzID4gdmFsdWUpIHtcbiAgICAgIC8qKlxuICAgICAgICogUHJvZ3Jlc3MgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHZhbHVlIGVudGVyZWQgYnkgdXNlciBhcyBuZWNlc3NhcnksXG4gICAgICAgKiByZXNldCBwcm9ncmVzcyB0byBiZSBlcXVhbCBuZWNlc3NhcnkgYW5kIGNvbXBsZXRlIGZ1bGwgc3R1ZHlcbiAgICAgICAqL1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmZ1bGxTdHVkeSc6ICsrZnVsbFN0dWR5LFxuICAgICAgICAnc3lzdGVtLnN0dWR5LnByb2dyZXNzJzogdmFsdWVcbiAgICAgIH0pXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy5jb21wbGV0ZUZ1bGxTdHVkeSgpXG4gICAgfVxuICAgIGlmIChtb2RlID09PSAnaW5jcmVhc2UnICYmIHByb2dyZXNzIDwgbmVjZXNzYXJ5KSB7XG4gICAgICAvKiogVXNlciBjbGlja2VkIG9uIHBsdXMgaWNvbiB0byBpbmNyZWFzZSBwcm9ncmVzcyAqL1xuICAgICAgaWYgKChhd2FpdCB0aGlzLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2UpIHJldHVyblxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnN0dWR5LnByb2dyZXNzJzogKytwcm9ncmVzc1xuICAgICAgfSlcbiAgICAgIGlmIChwcm9ncmVzcyA9PT0gbmVjZXNzYXJ5KSB7XG4gICAgICAgIC8qKiBDb21wbGV0ZSBmdWxsIHN0dWR5IGlmIHByb2dyZXNzIGlzIGVxdWFsIG5lY2Vzc2FyeSAqL1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZnVsbFN0dWR5JzogKytmdWxsU3R1ZHkgfSlcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ3JhbnRGdWxsU3R1ZHkoKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2RlY3JlYXNlJyAmJiBwcm9ncmVzcyA+IDApIHtcbiAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gbWludXMgaWNvbiB0byBkZWNyZWFzZSBwcm9ncmVzcyAqL1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zdHVkeS5wcm9ncmVzcyc6IC0tcHJvZ3Jlc3NcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2hlY2tFeGhhdXN0aW9uICgpIHtcbiAgICBjb25zdCBhY3Rvck15dGhvc1ZhbHVlID0gdGhpcy5hY3Rvcj8uY3RodWxodU15dGhvc1xuICAgIGNvbnN0IG15dGhvc1JhdGluZyA9IHRoaXMuc3lzdGVtLm15dGhvc1JhdGluZ1xuICAgIGlmICh0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZykge1xuICAgICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgPj0gbXl0aG9zUmF0aW5nKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAnc3lzdGVtLnN0dWR5LnByb2dyZXNzJzogdGhpcy5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Cb29rSGFzTm90aGluZ01vcmVUb1RlYWNoJywge1xuICAgICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBhc3luYyBncmFudEZ1bGxTdHVkeSAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS50eXBlLm15dGhvcykgcmV0dXJuXG4gICAgaWYgKChhd2FpdCB0aGlzLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2UpIHJldHVyblxuICAgIGNvbnN0IGFjdG9yTXl0aG9zVmFsdWUgPSB0aGlzLmFjdG9yLmN0aHVsaHVNeXRob3NcbiAgICBjb25zdCBkZXZlbG9wbWVudHMgPSBbXVxuICAgIGNvbnN0IG15dGhvc1JhdGluZyA9IHRoaXMuc3lzdGVtLm15dGhvc1JhdGluZ1xuICAgIGxldCBteXRob3NGaW5hbCA9IHRoaXMuc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuZmluYWxcbiAgICBpZiAoYWN0b3JNeXRob3NWYWx1ZSArIG15dGhvc0ZpbmFsID4gbXl0aG9zUmF0aW5nKSB7XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDw9IG15dGhvc0ZpbmFsOyBpbmRleCsrKSB7XG4gICAgICAgIGlmIChhY3Rvck15dGhvc1ZhbHVlICsgbXl0aG9zRmluYWwgLSBpbmRleCA8PSBteXRob3NSYXRpbmcpIHtcbiAgICAgICAgICBteXRob3NGaW5hbCAtPSBpbmRleFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSByZWFkZXIgYXV0b21hdGljYWxseSBnYWlucyBhIHNraWxsIHRpY2sgZm9yIHRoZVxuICAgICAqIGxhbmd1YWdlIGluIHdoaWNoIHRoZSBib29rIGlzIHdyaXR0ZW5cbiAgICAgKi9cbiAgICBkZXZlbG9wbWVudHMucHVzaChcbiAgICAgIHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuY3RodWxodS1teXRob3MnKSxcbiAgICAgICAgZ2FpbjogcGFyc2VJbnQobXl0aG9zRmluYWwpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5sYW5ndWFnZSxcbiAgICAgICAgZ2FpbjogJ2RldmVsb3BtZW50J1xuICAgICAgfVxuICAgIClcbiAgICBhd2FpdCB0aGlzLmdyYW50U2tpbGxEZXZlbG9wbWVudChkZXZlbG9wbWVudHMpXG4gICAgYXdhaXQgdGhpcy5yb2xsU2FuaXR5TG9zcygpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uZnVsbFN0dWRpZXMnOiArK3RoaXMuc3lzdGVtLmZ1bGxTdHVkaWVzXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBncmFudEluaXRpYWxSZWFkaW5nICgpIHtcbiAgICAvKiogSWYgaW5pdGlhbCByZWFkaW5nIGhhcyBhbHJlYWR5IGJlZW4gZG9uZSB0aGVyZSBpcyBub3RoaW5nIHRvIGRvIGhlcmUgKi9cbiAgICBpZiAodGhpcy5zeXN0ZW0uaW5pdGlhbFJlYWRpbmcpIHJldHVyblxuICAgIGNvbnN0IGRldmVsb3BtZW50cyA9IFtdXG4gICAgY29uc3QgbXl0aG9zID0ge1xuICAgICAgZ2FpbnM6IHRoaXMuc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuaW5pdGlhbCxcbiAgICAgIHR5cGU6IHRoaXMuc3lzdGVtLnR5cGUubXl0aG9zXG4gICAgfVxuICAgIGNvbnN0IG9jY3VsdCA9IHtcbiAgICAgIGdhaW5zOiB0aGlzLnN5c3RlbS5nYWlucy5vY2N1bHQsXG4gICAgICB0eXBlOiB0aGlzLnN5c3RlbS50eXBlLm9jY3VsdFxuICAgIH1cbiAgICBjb25zdCBvdGhlciA9IHtcbiAgICAgIGdhaW5zOiB0aGlzLnN5c3RlbS5nYWlucy5vdGhlcnMsXG4gICAgICB0eXBlOiB0aGlzLnN5c3RlbS50eXBlLm90aGVyXG4gICAgfVxuICAgIGlmIChteXRob3MudHlwZSAmJiBteXRob3MuZ2FpbnMpIHtcbiAgICAgIGRldmVsb3BtZW50cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuY3RodWxodS1teXRob3MnKSxcbiAgICAgICAgZ2FpbjogcGFyc2VJbnQobXl0aG9zLmdhaW5zKVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKG9jY3VsdC50eXBlICYmIG9jY3VsdC5nYWlucykge1xuICAgICAgZGV2ZWxvcG1lbnRzLnB1c2goe1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT2NjdWx0JyksXG4gICAgICAgIGdhaW46IHBhcnNlSW50KG9jY3VsdC5nYWlucylcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChvdGhlci50eXBlKSB7XG4gICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIG90aGVyLmdhaW5zKSB7XG4gICAgICAgIGNvbnN0IHBhdHRlcm4gPSBza2lsbC5uYW1lLm1hdGNoKC9eKC4rKSBcXCgoLispXFwpJC8pXG4gICAgICAgIC8qKiBTYW5pdGl6YXRpb24gdG8gZGVhbCB3aXRoIHNwZWNpYWxpemF0aW9ucyAqL1xuICAgICAgICBpZiAocGF0dGVybikge1xuICAgICAgICAgIHNraWxsLnNwZWNpYWxpemF0aW9uID0gcGF0dGVyblsxXVxuICAgICAgICAgIHNraWxsLm5hbWUgPSBwYXR0ZXJuWzJdXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNraWxsLnZhbHVlICE9PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgICAgc2tpbGwudmFsdWUgPSAoXG4gICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChza2lsbC52YWx1ZSkucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgKS50b3RhbFxuICAgICAgICB9XG4gICAgICAgIGlmIChza2lsbC52YWx1ZSkge1xuICAgICAgICAgIGRldmVsb3BtZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IHNraWxsLm5hbWUsXG4gICAgICAgICAgICBnYWluOiBza2lsbC52YWx1ZSxcbiAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uOiBza2lsbC5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5ncmFudFNraWxsRGV2ZWxvcG1lbnQoZGV2ZWxvcG1lbnRzKVxuICAgIGlmICgobXl0aG9zLnR5cGUgfHwgb2NjdWx0LnR5cGUpICYmIHRoaXMuc3lzdGVtLnNhbml0eUxvc3MpIHtcbiAgICAgIGF3YWl0IHRoaXMucm9sbFNhbml0eUxvc3MoKVxuICAgIH1cbiAgICAvKiogTWFyayBpbml0aWFsIHJlYWRpbmcgYXMgY29tcGxldGUgKi9cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmluaXRpYWxSZWFkaW5nJzogdHJ1ZSB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SXRlbX0gc3BlbGxsZWFybmVkIFRoZSBzcGVsbCB0aGF0IHdhcyBsZWFybmVkIHN1Y2Nlc3NmdWxseSBmcm9tIGJvb2tcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGdyYW50U3BlbGxMZWFybmluZyAoc3BlbGxsZWFybmVkKSB7XG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiB0aGlzLnN5c3RlbS5zcGVsbHMpIHtcbiAgICAgIGlmIChzcGVsbC5faWQgPT09IHNwZWxsbGVhcm5lZC5faWQpIHtcbiAgICAgICAgc3BlbGwuc3lzdGVtLmxlYXJuZWQgPSB0cnVlXG4gICAgICAgIC8vIERvZXMgdGhlIGFjdG9yIGFscmVhZHkgaGFzIGEgc3BlbGwgb2YgdGhhdCBuYW1lPyBUaGVuIGRvIG5vdCBhZGQgdGhlIHNwZWxsXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3BlbGwgPSBhd2FpdCB0aGlzLmFjdG9yLml0ZW1zLmZpbmQoXG4gICAgICAgICAgaXRlbSA9PlxuICAgICAgICAgICAgaXRlbS50eXBlID09PSAnc3BlbGwnICYmIGl0ZW0ubmFtZSA9PT0gc3BlbGxsZWFybmVkLm5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoIWV4aXN0aW5nU3BlbGwpIHtcbiAgICAgICAgICBzcGVsbGxlYXJuZWQuc3lzdGVtLmxlYXJuZWQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVsbEFscmVhZHlMZWFybmVkJywge1xuICAgICAgICAgICAgICBzcGVsbDogc3BlbGxsZWFybmVkLm5hbWUsXG4gICAgICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU2F2ZSBzcGVsbCBsaXN0IG9mIGJvb2tcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uc3BlbGxzJzogdGhpcy5zeXN0ZW0uc3BlbGxzIH0pXG4gICAgLy8gQWRkIGxlYXJuZWQgc3BlbGwgdG8gYWN0b3JcbiAgICBpZiAoc3BlbGxsZWFybmVkLnN5c3RlbS5sZWFybmVkKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbGxTdWNjZXNzZnVsbHlMZWFybmVkJywge1xuICAgICAgICAgIHNwZWxsOiBzcGVsbGxlYXJuZWQubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbXG4gICAgICAgIGR1cGxpY2F0ZShzcGVsbGxlYXJuZWQpXG4gICAgICBdKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNlaXZlcyBhbiBBcnJheSBvZiBza2lsbHMgYW5kIGhhbmRsZXMgYWxsIHRoZSBsb2dpYyB0byBkZXZlbG9wIHRoZW1cbiAgICogQHBhcmFtIHtBcnJheX0gZGV2ZWxvcG1lbnRzIEBzZWUgZ3JhbnRJbml0aWFsUmVhZGluZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBncmFudFNraWxsRGV2ZWxvcG1lbnQgKGRldmVsb3BtZW50cykge1xuICAgIGlmIChkZXZlbG9wbWVudHMubGVuZ3RoID09PSAwKSByZXR1cm5cbiAgICBmb3IgKGNvbnN0IGRldmVsb3BtZW50IG9mIGRldmVsb3BtZW50cykge1xuICAgICAgLyoqIFRlc3QgaWYgdGhlIHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiB6ZXJvICovXG4gICAgICBpZiAoIWRldmVsb3BtZW50LmdhaW4pIGNvbnRpbnVlXG4gICAgICBsZXQgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmdldFNraWxsc0J5TmFtZShkZXZlbG9wbWVudC5uYW1lKVxuICAgICAgLyoqIFRoZSBBY3RvciBkb2VzIG5vdCBvd24gdGhpcyBza2lsbCwgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICogRmlyc3QsIGNoZWNrIGlmIHRoZXJlIGlzIGFueSBza2lsbCBpbiB0aGUgZ2FtZSB3aXRoIHRoZSBzYW1lIG5hbWVcbiAgICAgICAqIEluIHRoZSBsYXN0IGFsdGVybmF0aXZlIGp1c3QgY3JlYXRlIGEgbmV3IGdlbmVyaWMgc2tpbGxcbiAgICAgICAqL1xuICAgICAgaWYgKHNraWxsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zdCBleGlzdGluZ1NraWxsID0gYXdhaXQgZ2FtZS5pdGVtcy5maW5kKFxuICAgICAgICAgIGl0ZW0gPT5cbiAgICAgICAgICAgIGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJiBpdGVtLm5hbWUgPT09IGRldmVsb3BtZW50Lm5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoZXhpc3RpbmdTa2lsbCkge1xuICAgICAgICAgIHNraWxsID0gYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtcbiAgICAgICAgICAgIGR1cGxpY2F0ZShleGlzdGluZ1NraWxsKVxuICAgICAgICAgIF0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmNyZWF0ZVNraWxsKGRldmVsb3BtZW50Lm5hbWUsIDApXG4gICAgICAgICAgaWYgKGRldmVsb3BtZW50LnNwZWNpYWxpemF0aW9uKSB7XG4gICAgICAgICAgICBhd2FpdCBza2lsbFswXS51cGRhdGUoe1xuICAgICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IHRydWUsXG4gICAgICAgICAgICAgICdzeXN0ZW0uc3BlY2lhbGl6YXRpb24nOiBkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNraWxsID0gc2tpbGxbMF1cbiAgICAgIGlmIChkZXZlbG9wbWVudC5nYWluID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIC8qKiBTaW1wbHkgbWFyayB0aGUgc2tpbGwgZm9yIGRldmVsb3BtZW50ICovXG4gICAgICAgIGF3YWl0IHNraWxsLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRoZSByZWNlaXZlZCB2YWx1ZSBnYWluZWQgaXMgbnVtZXJpYywgZW5zdXJlIHRoYXQgdGhlIGFtb3VudFxuICAgICAgICAgKiB3aWxsIG5vdCBleGNlZWQgdGhlIG1heGltdW0gdmFsdWUgb2YgOTlcbiAgICAgICAgICovXG4gICAgICAgIGlmIChza2lsbC52YWx1ZSArIGRldmVsb3BtZW50LmdhaW4gPiA5OSkge1xuICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPD0gZGV2ZWxvcG1lbnQuZ2FpbjsgaW5kZXgrKykge1xuICAgICAgICAgICAgaWYgKHNraWxsLnZhbHVlICsgZGV2ZWxvcG1lbnQuZ2FpbiAtIGluZGV4IDw9IDk5KSB7XG4gICAgICAgICAgICAgIGRldmVsb3BtZW50LmdhaW4gLT0gaW5kZXhcbiAgICAgICAgICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGRldmVsb3BtZW50LmdhaW4pXG4gICAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHNraWxsLmluY3JlYXNlRXhwZXJpZW5jZShkZXZlbG9wbWVudC5nYWluKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zaG93RGV2ZWxvcG1lbnRzVGFibGUoZGV2ZWxvcG1lbnRzKVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNlcXVlbnQgcGVyaW9kcyBvZiBmdWxsIHN0dWR5IG1heSBiZSB1bmRlcnRha2VuLCB0aGUgZGlmZmVyZW5jZSBiZWluZ1xuICAgKiB0aGF0IGVhY2ggc3R1ZHkgd2lsbCB0YWtlIHR3aWNlIGFzIGxvbmcgYXMgdGhlIHByZXZpb3VzIG9uZVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgcmVkb0Z1bGxTdHVkeSAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnN0dWR5LnByb2dyZXNzJzogMCB9KVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeSc6IHRoaXMuc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeSAqIDJcbiAgICB9KVxuICB9XG5cbiAgLyoqIEJ5cGFzcyB0aGUgU2FuaXR5IGNoZWNrIGFuZCBqdXN0IHJvbGwgdGhlIGRhbWFnZSAqL1xuICBhc3luYyByb2xsU2FuaXR5TG9zcyAoKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzXG4gICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZSA9PT0gJycpIHJldHVyblxuICAgIGNvbnN0IHRlbXBsYXRlID0gU2FuQ2hlY2tDYXJkLnRlbXBsYXRlXG4gICAgbGV0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwge30pXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHsgYWN0b3I6IHRoaXMuYWN0b3IgfSksXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVhZGluZ015dGhvc1RvbWUnLCB7XG4gICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgfSksXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfSlcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgbWVzc2FnZS5nZXRIVE1MKClcbiAgICBpZiAodHlwZW9mIGNhcmQubGVuZ3RoICE9PSAndW5kZWZpbmVkJyAmJiBjYXJkLmxlbmd0aCA9PT0gMSkge1xuICAgICAgY29uc3Qgc2FuaXR5TG9zcyA9IChhd2FpdCBuZXcgUm9sbCh2YWx1ZSkucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgICAgaHRtbCA9IGNhcmQuZmluZCgnLmNoYXQtY2FyZCcpWzBdXG4gICAgICBodG1sLmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuaWQsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGZhbHNlLFxuICAgICAgICAgIHNhbkRhdGE6IHtcbiAgICAgICAgICAgIHNhbk1pbjogc2FuaXR5TG9zcyxcbiAgICAgICAgICAgIHNhbk1heDogc2FuaXR5TG9zc1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIGNvbnN0IHNhbml0eUNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGh0bWwpXG4gICAgICBhd2FpdCBzYW5pdHlDaGVjay5ieXBhc3NSb2xsU2FuKClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLnJvbGxTYW5Mb3NzKClcbiAgICAgIHNhbml0eUNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBhIHRhYmxlIGluIHRoZSBjaGF0IHdpdGggYWxsIHNraWxsIGRldmVsb3BtZW50cyBvYnRhaW5lZFxuICAgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IGRldmVsb3BtZW50c1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IGNyZWF0ZSBDaGF0TWVzc2FnZVxuICAgKi9cbiAgYXN5bmMgc2hvd0RldmVsb3BtZW50c1RhYmxlIChkZXZlbG9wbWVudHMpIHtcbiAgICAvKiogUHJlcGFyZSB0aGUgQXJyYXkgZGF0YSB0byBiZSBzaG93biB0byB0aGUgZW5kIHVzZXIgaW4gY2hhdCAqL1xuICAgIGZvciAoY29uc3QgZGV2ZWxvcG1lbnQgb2YgZGV2ZWxvcG1lbnRzKSB7XG4gICAgICBpZiAoZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgZGV2ZWxvcG1lbnQubmFtZSA9IGAke2RldmVsb3BtZW50LnNwZWNpYWxpemF0aW9ufSAoJHtkZXZlbG9wbWVudC5uYW1lfSlgXG4gICAgICB9XG4gICAgICBpZiAoZGV2ZWxvcG1lbnQuZ2FpbiA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICBkZXZlbG9wbWVudC5nYWluID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1hcmtlZEZvckRldmVsb3BtZW50JylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRldmVsb3BtZW50LmdhaW4gPSBgKyR7ZGV2ZWxvcG1lbnQuZ2Fpbn0gJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgJ0NvQzcuUG9pbnRzJ1xuICAgICAgICApfWBcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9ib29rL2RldmVsb3BtZW50Lmh0bWwnXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7IGRldmVsb3BtZW50cyB9KVxuICAgIHJldHVybiBhd2FpdCBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih7IGFjdG9yOiB0aGlzLmFjdG9yIH0pLFxuICAgICAgZmxhdm9yOiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkdhaW5zRm9yUmVhZGluZycsIHsgYm9vazogdGhpcy5uYW1lIH0pLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH0pXG4gIH1cblxuICBhc3luYyBhdHRlbXB0U3BlbGxMZWFybmluZyAoaWQpIHtcbiAgICBpZiAoIXRoaXMuaXNPd25lZCkge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfVxuICAgIGlmICghdGhpcy5zeXN0ZW0uaW5pdGlhbFJlYWRpbmcpIHtcbiAgICAgIC8qKiBBY3RvciBkaWQgbm90IHBlcmZvcm1lZCBhbiBpbml0aWFsIHJlYWRpbmcgZmlyc3QgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYWxSZWFkaW5nTmVlZGVkJywge1xuICAgICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yLm5hbWUsXG4gICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgfVxuICAgIGNvbnN0IHNwZWxsID0gdGhpcy5zeXN0ZW0uc3BlbGxzLmZpbmQoc3BlbGwgPT4ge1xuICAgICAgcmV0dXJuIHNwZWxsLl9pZCA9PT0gaWRcbiAgICB9KVxuICAgIGlmIChzcGVsbCkge1xuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgICAgY2hlY2sucGFyZW50ID0gdGhpcy51dWlkXG4gICAgICBjaGVjay5mbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkxlYXJuU3BlbGxBdHRlbXB0Jywge1xuICAgICAgICBib29rOiB0aGlzLm5hbWUsXG4gICAgICAgIHNwZWxsOiBzcGVsbC5uYW1lXG4gICAgICB9KVxuICAgICAgY2hlY2suY29udGV4dCA9ICdTUEVMTF9MRUFSTklORydcbiAgICAgIGNoZWNrLnNwZWxsID0gc3BlbGxcbiAgICAgIGF3YWl0IGNoZWNrLnJvbGxDaGFyYWN0ZXJpc3RpYygnaW50JylcbiAgICAgIGF3YWl0IGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuICB9XG5cbiAgLyoqIExpc3RlbiB0byBjaGFuZ2VzIG9uIHRoZSBjaGVjayBjYXJkICovXG4gIGFzeW5jIHVwZGF0ZVJvbGwgKHJvbGwpIHtcbiAgICBjb25zdCBjaGVjayA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyhyb2xsKVxuXG4gICAgLyoqIFdpbGwga25vdyBpZiB1c2VyIHB1c2ggdGhlIHJvbGwgb3Igc3BlbmQgTHVjayAqL1xuICAgIGlmIChjaGVjay5wYXNzZWQpIHtcbiAgICAgIGlmIChjaGVjay5jb250ZXh0ID09PSAnSU5JVElBTF9SRUFESU5HJykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ncmFudEluaXRpYWxSZWFkaW5nKClcbiAgICAgIH0gZWxzZSBpZiAoY2hlY2suY29udGV4dCA9PT0gJ1NQRUxMX0xFQVJOSU5HJykge1xuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ncmFudFNwZWxsTGVhcm5pbmcoY2hlY2suc3BlbGwpXG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGRlZXBDbG9uZSwgRm9ybURhdGFFeHRlbmRlZCwgZm91bmRyeSwgZnJvbVV1aWQsIGdhbWUsIEhvb2tzLCBtZXJnZU9iamVjdCwgcmVuZGVyVGVtcGxhdGUsIHNvY2tldGxpYiwgdWkgKi9cblxuY29uc3QgRUNDX0NMQVNTID0gJ2VuaGFuY2VkLWNoYXQtY2FyZCdcblxuY29uc3QgUEVSTUlTU0lPTl9UWVBFID0ge1xuICBHTTogJ2dtJywgLy8gdXNlciBpcyBHTVxuICBOT1RfR006ICchZ20nLCAvLyB1c2VyIGlzIE5PVCBnbSAoaGlkZSB0byBHTSBpbiBjYXNlIG9mIHZpc2liaWxpdHkpXG4gIFNQRUFLRVI6ICdzcGVha2VyJywgLy8gdGhlIHNwZWFrZXIgaXMgYW4gYWN0b3IgY29udHJvbGVkL293bmVkIGJ5IHRoZSB1c2VyXG4gIFVTRVI6ICd1c2VyJywgLy8gdGhlIHVzZXIgaXMgdGhlIG1lc3NhZ2UncyBhdXRob3JcbiAgRVZFUllPTkU6ICdhbGwnLCAvLyBlcXVpdmFsZW50IHRvIGVtcHR5IHN0cmluZ1xuICBCTEFDS0xJU1Q6ICdibGFja2xpc3QnIC8vIGludmVydCB0aGUgbG9naWNcbn1cblxuY29uc3QgU1RBVEUgPSB7XG4gIE9OOiAnc3dpdGNoZWQtb24nLFxuICBPRkY6ICdzd2l0Y2hlZC1vZmYnXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0RUNDICguLi5jYXJkY2xhc3MpIHtcbiAgLy8gSG9va3Mub25jZSgnaW5pdCcsIGZ1bmN0aW9uICgpIHtcbiAgLy8gfSlcblxuICBIb29rcy5vbigncmVuZGVyQ2hhdExvZycsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5pbmplY3RDU1MoYXBwLCBodG1sLCBkYXRhKVxuICApXG5cbiAgSG9va3Mub25jZSgnc29ja2V0bGliLnJlYWR5JywgZnVuY3Rpb24gKCkge1xuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIucmVnaXN0ZXIoY2FyZGNsYXNzKVxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0ID0gc29ja2V0bGliLnJlZ2lzdGVyU3lzdGVtKGdhbWUuc3lzdGVtLmlkKSAvLyBTb2NrZXQgaXMgYXR0YWNoZWQgdG8gY3VycmVudCBzeXN0ZW1cbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcigndXBkYXRlTWVzc2FnZScsIHVwZGF0ZU1lc3NhZ2UpXG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQucmVnaXN0ZXIoJ0dNVXBkYXRlJywgR01VcGRhdGUpXG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQucmVnaXN0ZXIoJ2FkdmlzZScsIGFkdmlzZSlcbiAgICAvLyBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcignZ210cmFkZWl0ZW10bycsIGdtdHJhZGVpdGVtdG8pXG4gIH0pXG5cbiAgSG9va3Mub24oJ3JlbmRlckNoYXRNZXNzYWdlJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgICBFbmhhbmNlZENoYXRDYXJkLmJpbmRMaXN0ZW5lcnMoaHRtbClcbiAgKVxufVxuXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVNZXNzYWdlIChtZXNzYWdlSWQsIG5ld0NvbnRlbnQpIHtcbiAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG5cbiAgYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHtcbiAgICBjb250ZW50OiBuZXdDb250ZW50XG4gIH0pXG59XG5cbmFzeW5jIGZ1bmN0aW9uIEdNVXBkYXRlIChkYXRhLCBvcHRpb25zLCBjYXJkQ2xhc3NOYW1lLCBtZXNzYWdlSWQgPSB1bmRlZmluZWQpIHtcbiAgY29uc3QgY2FyZCA9IGF3YWl0IEVuaGFuY2VkQ2hhdENhcmQuZnJvbURhdGEoXG4gICAgZGF0YSxcbiAgICBvcHRpb25zLFxuICAgIGNhcmRDbGFzc05hbWUsXG4gICAgbWVzc2FnZUlkXG4gIClcbiAgYXdhaXQgY2FyZC5HTVVwZGF0ZSgpXG4gIC8vIGNvbnN0IGRpZmYgPSBmb3VuZHJ5LnV0aWxzLmRpZmZPYmplY3QoIGRhdGEsIGNhcmQudG9PYmplY3QoKSlcbiAgcmV0dXJuIGNhcmQudG9PYmplY3QoKVxufVxuXG5hc3luYyBmdW5jdGlvbiBhZHZpc2UgKCkge31cblxuY2xhc3MgRW5oYW5jZWRDaGF0Q2FyZExpYiB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLnR5cGVzID0gbmV3IE1hcCgpXG4gICAgdGhpcy5zb2NrZXQgPSBudWxsXG4gICAgLy8gdGhpcy5lbmhhbmNlZENoYXRDYXJkQ2xhc3MgPSBFbmhhbmNlZENoYXRDYXJkXG4gIH1cblxuICBzdGF0aWMgaW5qZWN0Q1NTICgpIHtcbiAgICBsZXQgc3R5bGUgPSAkKCdoZWFkJykuZmluZCgnc3R5bGUnKVxuICAgIGlmICghc3R5bGU/Lmxlbmd0aCkge1xuICAgICAgJCgnaGVhZCcpLmFwcGVuZCgkKCc8c3R5bGUgIHR5cGU9XCJ0ZXh0L2Nzc1wiPjwvc3R5bGU+JykpXG4gICAgICBzdHlsZSA9ICQoJ2hlYWQnKS5maW5kKCdzdHlsZScpXG4gICAgfVxuICAgIHN0eWxlLmFwcGVuZChcbiAgICAgIGAuZWNjLXJlc3RyaWN0ZWQge2NvbG9yOiByZWR9XG4gICAgLmVjYy1yZXN0cmljdGVkOmhvdmVyIHtjdXJzb3I6IG5vdC1hbGxvd2VkfWBcbiAgICApXG4gIH1cblxuICBzdGF0aWMgc2V0IHNvY2tldCAoeCkge1xuICAgIGlmICghZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYikge1xuICAgICAgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYiA9IG5ldyBFbmhhbmNlZENoYXRDYXJkTGliKClcbiAgICB9XG4gICAgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IHNvY2tldCAoKSB7XG4gICAgaWYgKCFnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdFQ0Mgbm90IEluaXRpYWxpemVkJylcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgaWYgKCFnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRUNDIG5vIHNvY2tldCcpXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldFxuICB9XG5cbiAgc3RhdGljIGdldCB0eXBlcyAoKSB7XG4gICAgaWYgKCFnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliKSB7XG4gICAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliID0gbmV3IEVuaGFuY2VkQ2hhdENhcmRMaWIoKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi50eXBlc1xuICB9XG5cbiAgc3RhdGljIHJlZ2lzdGVyIChjYXJkQ29uc3RydWN0b3JzKSB7XG4gICAgY2FyZENvbnN0cnVjdG9ycy5mb3JFYWNoKGNhcmRDb25zdHJ1Y3RvciA9PiB7XG4gICAgICBpZiAoIUVuaGFuY2VkQ2hhdENhcmRMaWIudHlwZXMuZ2V0KGNhcmRDb25zdHJ1Y3Rvci5uYW1lKSkge1xuICAgICAgICBFbmhhbmNlZENoYXRDYXJkTGliLnR5cGVzLnNldChjYXJkQ29uc3RydWN0b3IubmFtZSwgY2FyZENvbnN0cnVjdG9yKVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICAvLyBzdGF0aWMgZ21fb25Ub2dnbGUgKGRhdGEpe1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggJ2dtX29uVG9nZ2xlJylcbiAgLy8gfVxufVxuXG5mdW5jdGlvbiBzZXRCeVBhdGggKG9iaiwgcGF0aCwgdmFsdWUpIHtcbiAgY29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJylcbiAgbGV0IG8gPSBvYmpcbiAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgaWYgKCFvW3BhcnRzW2ldXSkgb1twYXJ0c1tpXV0gPSB7fVxuICAgICAgbyA9IG9bcGFydHNbaV1dXG4gICAgfVxuICB9XG5cbiAgb1twYXJ0c1twYXJ0cy5sZW5ndGggLSAxXV0gPSB2YWx1ZVxufVxuXG5mdW5jdGlvbiBnZXRCeVBhdGggKG9iaiwgcGF0aCkge1xuICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKVxuICBsZXQgbyA9IG9ialxuICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBpZiAoIW9bcGFydHNbaV1dKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gb1twYXJ0c1twYXJ0cy5sZW5ndGggLSAxXV1cbn1cblxuZXhwb3J0IGNsYXNzIEVuaGFuY2VkQ2hhdENhcmQge1xuICAvLyBzdGF0aWMgcmVnaXN0ZXIgKGNhcmRDb25zdHJ1Y3Rvcikge1xuICAvLyAgIEVuaGFuY2VkQ2hhdENhcmRMaWIucmVnaXN0ZXIoY2FyZENvbnN0cnVjdG9yKVxuICAvLyB9XG5cbiAgY29uc3RydWN0b3IgKGRhdGEgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YVxuICAgIGlmICghdGhpcy5kYXRhLmZsYWdzKSB0aGlzLmRhdGEuZmxhZ3MgPSB7fVxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zXG4gIH1cblxuICAvKipcbiAgICogQ2FsbGVkIG9ubHkgb25jZSBiZWZvcmUgc2VuZGluZyBtZXNzYWdlIHRvIGNoYXQuXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgYXN5bmMgaW5pdGlhbGl6ZSAoKSB7fVxuXG4gIGdldCBvcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3QodGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0T3B0aW9ucywgdGhpcy5fb3B0aW9ucylcbiAgfVxuXG4gIHNldCBvcHRpb25zICh4KSB7XG4gICAgdGhpcy5fb3B0aW9ucyA9IHhcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy50ZW1wbGF0ZVxuICB9XG5cbiAgZ2V0IGNzc0NsYXNzZXMgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xhc3Nlcz8uam9pbignICcpXG4gIH1cblxuICBnZXQgc3BlYWtlciAoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5vb2MpIHJldHVybiBnYW1lLnVzZXJcbiAgICBpZiAoXG4gICAgICB0aGlzLm9wdGlvbnMuc3BlYWtlciAmJlxuICAgICAgQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHRoaXMub3B0aW9ucy5zcGVha2VyKVxuICAgICkge1xuICAgICAgcmV0dXJuIENoYXRNZXNzYWdlLmdldFNwZWFrZXJBY3Rvcih0aGlzLm9wdGlvbnMuc3BlYWtlcilcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUudXNlclxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgLy8gYXdhaXQgdGhpcy5hc3NpZ25PYmplY3RzKClcbiAgICByZXR1cm4ge1xuICAgICAgY2FyZDogdGhpcyxcbiAgICAgIGZsYWdzOiB0aGlzLmZsYWdzLFxuICAgICAgZGF0YTogdGhpcy50b09iamVjdCgpLFxuICAgICAgb3B0aW9uczogdGhpcy5vcHRpb25zLFxuICAgICAgY3NzOiB0aGlzLmNzc0NsYXNzZXMsXG4gICAgICB1c2VyOiBnYW1lLnVzZXIsXG4gICAgICBzcGVha2VyOiB0aGlzLnNwZWFrZXJcbiAgICB9XG4gIH1cblxuICB0b09iamVjdCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEpIHJldHVyblxuICAgIGNvbnN0IGRhdGEgPSB7fVxuICAgIGZvciAoY29uc3QgayBvZiBPYmplY3Qua2V5cyh0aGlzLmRhdGEpKSB7XG4gICAgICBjb25zdCB2ID0gdGhpcy5kYXRhW2tdXG4gICAgICBpZiAodiBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICBkYXRhW2tdID0gdi50b09iamVjdCA/IHYudG9PYmplY3QoKSA6IGRlZXBDbG9uZSh2KVxuICAgICAgfSBlbHNlIGRhdGFba10gPSB2XG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKG9wdGlvbm5hbENoYXREYXRhID0ge30pIHtcbiAgICAvLyBNYXAgZWNjIGNhcmQgdHlwZSBpZiBub3QgcmVnaXN0ZXJlZCBhbHJlYWR5XG4gICAgLy8gdGhpcy5yZWdpc3RlckVDQ0NsYXNzKClcblxuICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZSgpXG5cbiAgICAvLyBQdWJsaXNoIGJ5IGN1cnJlbnQgdXNlciBieSBkZWZhdWx0IHVubGVzcyBvcHRpb25zLkdNY2hhdENhcmRcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5nZXREYXRhKClcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgZGF0YSlcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpWzBdXG4gICAgaWYgKHRoaXMub3B0aW9ucy5hdHRhY2hPYmplY3QpIHtcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLm9iamVjdERhdGFTdHJpbmcpXG4gICAgfVxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmVjY0NsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5vcHRpb25zLmNsYXNzZXMpXG5cbiAgICBjb25zdCBzcGVha2VyID1cbiAgICAgIHRoaXMub3B0aW9ucy5zcGVha2VyICYmICF0aGlzLm9wdGlvbnMub29jXG4gICAgICAgID8gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcih0aGlzLm9wdGlvbnMuc3BlYWtlcilcbiAgICAgICAgOiB7fVxuXG4gICAgLy8gY29uc3QgdXNlcklkID0gdGhpcy5vcHRpb25zLnVzZXJJZCA/IHRoaXMub3B0aW9ucy51c2VySWQgOiBnYW1lLnVzZXIuaWRcblxuICAgIGNvbnN0IGNoYXREYXRhID0gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChcbiAgICAgIHtcbiAgICAgICAgLy8gdXNlcjogdXNlcklkLFxuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIHNwZWFrZXIsXG4gICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMub3B0aW9ucy50aXRsZSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0sXG4gICAgICBvcHRpb25uYWxDaGF0RGF0YVxuICAgIClcblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnc2VsZnJvbGwnKSBjaGF0RGF0YS53aGlzcGVyID0gW2dhbWUudXNlci5pZF1cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ2JsaW5kcm9sbCcpIGNoYXREYXRhLmJsaW5kID0gdHJ1ZVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICh7IGF0dGFjaE9iamVjdCA9IHRydWUgfSA9IHt9KSB7XG4gICAgLy8gVE9ETyB0aGUgd2hvbGUgZnVuY3Rpb24gaGFzIHRvIGJlIGV4ZWN1dGVkIGJ5IEdNIGlmIG9wdGlvbnMuR01jaGF0Q2FyZFxuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcHV0ZSkgYXdhaXQgdGhpcy5sb2NhbENvbXB1dGUoKVxuICAgIGlmICh0aGlzLm9wdGlvbnMuR01VcGRhdGUpIGF3YWl0IHRoaXMuRXhlY3V0ZUdNVXBkYXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmdldERhdGEoKVxuICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIGRhdGEpXG4gICAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgICAvLyBBdHRhY2ggdGhlIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGlmIChhdHRhY2hPYmplY3QgJiYgIXRoaXMuZGF0YS5FRUNfQUNUSU9OPy5kZXRhY2hEYXRhKSB7XG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLm9iamVjdERhdGFTdHJpbmcpXG4gICAgICB9XG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5lY2NDbGFzcyA9IHRoaXMuY29uc3RydWN0b3IubmFtZVxuICAgICAgaHRtbENhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoLi4udGhpcy5vcHRpb25zLmNsYXNzZXMpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0LmV4ZWN1dGVBc0dNKFxuICAgICAgICAndXBkYXRlTWVzc2FnZScsXG4gICAgICAgIHRoaXMubWVzc2FnZUlkLFxuICAgICAgICBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICApXG4gICAgICAvLyBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgICAvLyBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoeyAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XG4gICAgICAvLyBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIH0pIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKSAvL0Rpc3BhdGNoIHJlcXVlc3QgYnkgc29ja2V0XG4gICAgICAvLyByZXR1cm4gbXNnIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICB9XG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIC8vIGh0bWwub24oXG4gICAgLy8gICAnY2xpY2snLFxuICAgIC8vICAgYC4ke0VDQ19DTEFTU30gLmVjYy1yYWRpby1zd2l0Y2hgLFxuICAgIC8vICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIC8vIClcbiAgICBodG1sLm9uKCdjaGFuZ2UnLCAnaW5wdXQsc2VsZWN0LHRleHRhcmVhJywgdGhpcy5fb25DaGFuZ2UuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsIGAuJHtFQ0NfQ0xBU1N9IC5lY2Mtc3dpdGNoYCwgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsIGAuJHtFQ0NfQ0xBU1N9IC5zdWJtaXRgLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2ZvY3Vzb3V0JywgYC4ke0VDQ19DTEFTU30gaW5wdXRgLCB0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gYnV0dG9uYCwgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdrZXlkb3duJywgYC4ke0VDQ19DTEFTU30gZm9ybWAsIHRoaXMuX29uS2V5LmJpbmQodGhpcykpXG5cbiAgICAvLyBjb25zdCB2aXNpID0gaHRtbC5maW5kKCdbZGF0YS1lY2MtdmlzaWJpbGl0eV0nKVxuICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdmlzaS5sZW5ndGg7IGkrKykge1xuICAgIC8vICAgY29uc3QgZWwgPSB2aXNpW2ldO1xuICAgIC8vICAgYXdhaXQgdGhpcy5zZXRWaXNpYmlsaXR5KGVsKVxuXG4gICAgLy8gfVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ1tkYXRhLWVjYy12aXNpYmlsaXR5XScpXG4gICAgICAuZWFjaChhc3luYyAoaSwgZWwpID0+IGF3YWl0IHRoaXMuc2V0VmlzaWJpbGl0eShlbCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ1tkYXRhLWVjYy1wZXJtaXNzaW9uc10nKVxuICAgICAgLmVhY2goYXN5bmMgKGksIGVsKSA9PiBhd2FpdCB0aGlzLnNldFBlcm1pc3Npb24oZWwpKVxuICAgIGh0bWwuZmluZChgLiR7RUNDX0NMQVNTfSAuZWNjLXN3aXRjaGApLmVhY2goKGksIGVsKSA9PiB0aGlzLnNldFN0YXRlKGVsKSlcbiAgICBodG1sXG4gICAgICAuZmluZChgLiR7RUNDX0NMQVNTfSBpbnB1dFt0eXBlPVwicmFkaW9cIl1gKVxuICAgICAgLmVhY2goKGksIGVsKSA9PiB0aGlzLnNldFJhZGlvU3RhdGUoZWwpKVxuICAgIC8vIGh0bWwuZmluZChgLiR7RUNDX0NMQVNTfSAuZWNjLXJhZGlvLXN3aXRjaGApLmVhY2goIChpLCBlbCkgPT4gdGhpcy5zZXRTdGF0ZShlbCkpXG4gIH1cblxuICBzZXRTdGF0ZSAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgaWYgKGVsZW1lbnQuZGF0YXNldC5mbGFnKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXG4gICAgICAgIHRoaXMuZmxhZ3NbZWxlbWVudC5kYXRhc2V0LmZsYWddID8gU1RBVEUuT04gOiBTVEFURS5PRkZcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGVsZW1lbnQuZGF0YXNldC5uYW1lKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBlbGVtZW50LmRhdGFzZXQubmFtZSlcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh2YWx1ZSA/IFNUQVRFLk9OIDogU1RBVEUuT0ZGKVxuICAgIH1cbiAgfVxuXG4gIHNldFJhZGlvU3RhdGUgKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQgfHwgIWVsZW1lbnQubmFtZSkgcmV0dXJuXG4gICAgY29uc3Qgc3BsaXRlZCA9IGVsZW1lbnQubmFtZS5zcGxpdCgnLicpXG4gICAgaWYgKHNwbGl0ZWRbMF0udG9Mb3dlckNhc2UoKSAhPT0gJ2RhdGEnKSByZXR1cm5cbiAgICBpZiAodGhpcy5kYXRhICYmIHR5cGVvZiB0aGlzLmRhdGFbc3BsaXRlZFsxXV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5kYXRhW3NwbGl0ZWRbMV1dID09PSBlbGVtZW50LnZhbHVlKSB7XG4gICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBzZXRWaXNpYmlsaXR5IChlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50LmRhdGFzZXQuZWNjVmlzaWJpbGl0eSkgcmV0dXJuXG4gICAgY29uc3QgY2FuWW91U2VlID0gYXdhaXQgdGhpcy5oYXNQZXJtKGVsZW1lbnQuZGF0YXNldC5lY2NWaXNpYmlsaXR5LCB0cnVlKVxuICAgIGlmICghY2FuWW91U2VlKSBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgfVxuXG4gIGFzeW5jIHNldFBlcm1pc3Npb24gKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQuZGF0YXNldC5lY2NQZXJtaXNzaW9ucykgcmV0dXJuXG4gICAgY29uc3QgY2FuWW91TW9kID0gYXdhaXQgdGhpcy5oYXNQZXJtKGVsZW1lbnQuZGF0YXNldC5lY2NQZXJtaXNzaW9ucylcbiAgICBpZiAoIWNhbllvdU1vZCkge1xuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlY2MtcmVzdHJpY3RlZCcpXG4gICAgICBpZiAoJChlbGVtZW50KS5pcygnaW5wdXQnKSkge1xuICAgICAgICBpZiAoZWxlbWVudC50eXBlID09PSAncmFuZ2UnKSAkKGVsZW1lbnQpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgZWxzZSAkKGVsZW1lbnQpLmF0dHIoJ3JlYWRvbmx5JywgdHJ1ZSlcbiAgICAgIH1cbiAgICAgIGlmICgkKGVsZW1lbnQpLmlzKCdzZWxlY3QnKSkgJChlbGVtZW50KS5hdHRyKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBjdXJyZW50IHVzZXIgYXMgcGVybWlzc2lvbiBhZ2FpbnN0IGEgc3RyaW5nIG9mIGFsbG93ZWQgcGVyc29ucy5cbiAgICogSWYgdGhlIHN0cmluZyBpcyBlbXB0eSBwZXJtaXNzaW9uIGFyZSBhbGwgZ3JhbnRlZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzdHJpY3RlZFRvICAgQSBzdHJpbmcgY29udGFpbmluZyB0aGUgc2V0IG9mIHBsYXllciBhbGxvd2VkLiBWYWx1ZSBjYW4gYmUgb3duZXIsIGdtLCBwbGF5ZXJzLCB1dWlkIHNlcGFyYXRlZCBieSBzcGFjZVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZpc2lvbiAgICAgICAgaWYgdHJ1ZSBnbSB3aWxsIGJlIGNvbnNpZGVyZWQgZm9yIHBlcm1pc3Npb25zLiBmYWxzZSA9IGdtIGhhcyBhbHdheXMgcmlnaHQuIHRydWUgR00gcGVybWlzc2lvbiB3aWxsIGJlIGNoZWNrZWRcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGhhc1Blcm0gKHJlc3RyaWN0ZWRUbywgdmlzaW9uID0gZmFsc2UpIHtcbiAgICBpZiAoIXJlc3RyaWN0ZWRUby5sZW5ndGgpIHJldHVybiB0cnVlXG4gICAgbGV0IHBlcm1pc3Npb25zQXJyYXkgPSByZXN0cmljdGVkVG8uc3BsaXQoJyAnKVxuICAgIGNvbnN0IHdoaXRlTGlzdCA9ICFwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5CTEFDS0xJU1QpXG4gICAgaWYgKCF3aGl0ZUxpc3QpIHtcbiAgICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihcbiAgICAgICAgZSA9PiBlICE9PSBQRVJNSVNTSU9OX1RZUEUuQkxBQ0tMSVNUXG4gICAgICApXG4gICAgfVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF2aXNpb24pIHJldHVybiB0cnVlIC8vIEdNIGNhbiBhbHdheXMgbW9kaWZ5IGV2ZXJ5dGhpbmcgISBOYWhcbiAgICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5HTSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICB9XG4gICAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuTk9UX0dNKSkge1xuICAgICAgICByZXR1cm4gZmFsc2UgfHwgIXdoaXRlTGlzdFxuICAgICAgfVxuICAgIH1cblxuICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5HTSlcbiAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXG4gICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5OT1RfR01cbiAgICApXG5cbiAgICAvLyAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0IC8vSWYgcGFzcyB0aGUgZmlsdGVyIHJldHVybiBmYWxzZSB1bmxlc3MgaXQncyBhIGJsYWNrbGlzdFxuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoZSA9PiBlICE9IFBFUk1JU1NJT05fVFlQRS5HTSlcbiAgICAvLyB9XG5cbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuVVNFUikpIHtcbiAgICAgIGlmICh0aGlzLm1lc3NhZ2UuaXNBdXRob3IpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdCAvLyBpc0F1dGhvciB2cyB1c2VyLmlzT3duZXIgP1xuICAgICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKFxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5VU0VSXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKHBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLlNQRUFLRVIpKSB7XG4gICAgICBjb25zdCBzcGVha2VyID0gdGhpcy5tZXNzYWdlLmRhdGEuc3BlYWtlclxuICAgICAgaWYgKHNwZWFrZXIudG9rZW4gJiYgc3BlYWtlci5zY2VuZSkge1xuICAgICAgICBjb25zdCBhY3RvciA9IGF3YWl0IGZyb21VdWlkKFxuICAgICAgICAgIGBTY2VuZS4ke3NwZWFrZXIuc2NlbmV9LlRva2VuLiR7c3BlYWtlci50b2tlbn1gXG4gICAgICAgIClcbiAgICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgICAgaWYgKGFjdG9yLmlzT3duZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHNwZWFrZXIuYWN0b3IpIHtcbiAgICAgICAgY29uc3QgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoc3BlYWtlci5hY3RvcilcbiAgICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgICAgaWYgKGFjdG9yLmlzT3duZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBlbHNlIGlmIChzcGVha2VyLnVzZXIpIHtcbiAgICAgIC8vICAgaWYgKGdhbWUudXNlci5pZCA9PSBzcGVha2VyLnVzZXIpIHJldHVybiB0cnVlICYmIHdoaXRlTGlzdFxuICAgICAgLy8gfVxuICAgICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKFxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5TUEVBS0VSXG4gICAgICApXG4gICAgfVxuICAgIC8vIEFsbCBmaWx0ZXIgcGFzc2VkLCBhcnJheSBzaG91bGQgY29udGFpbnMgb25seSB1dWlkcyBvciBhY3Rvci90b2tlbiBpZHNcbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGVybWlzc2lvbnNBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB1dWlkID0gcGVybWlzc2lvbnNBcnJheVtpXVxuICAgICAgICBsZXQgYWN0b3IgPSBhd2FpdCBmcm9tVXVpZCh1dWlkKVxuICAgICAgICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCh1dWlkKVxuICAgICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgICByZXR1cm4gYWN0b3IuaXNPd25lclxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoYFVuYWJsZSB0byBmaW5kIGFjdG9yICR7dXVpZH1gKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0IC8vIElmIHBhc3MgdGhlIGZpbHRlciByZXR1cm4gZmFsc2UgdW5sZXNzIGl0J3MgYSBibGFja2xpc3RcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBiaW5kTGlzdGVuZXJzIChodG1sKSB7XG4gICAgY29uc3QgaHRtbE1lc3NhZ2VFbGVtZW50ID0gaHRtbFswXVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9IGh0bWxNZXNzYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtFQ0NfQ0xBU1N9YClcbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudCkgcmV0dXJuXG5cbiAgICBjb25zdCBjYXJkID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGh0bWxDYXJkRWxlbWVudClcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNhcmQuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIGdldCBmbGFncyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5mbGFnc1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRvIHJlYXNzaWduIG9iamVjdCBmcm9tIHRoZSBkYXRhIHN0cnVjdHVyZS5cbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIGFzc2lnbk9iamVjdHMgKCkge31cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gdXBkYXRlIG9iamVjdCBhZnRlciBkYXRhIGNoYW5nZS5cbiAgICogVGhpcyBpcyBjYWxsZWQgYnkgdGhlIGxvY2FsIGNsaWVudFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgbG9jYWxDb21wdXRlICgpIHt9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRvIHVwZGF0ZSBvYmplY3QgYWZ0ZXIgZGF0YSBjaGFuZ2UuXG4gICAqIFRoaXMgaXMgY2FsbGVkIGJ5IG9uZSBvZiB0aGUgR00gY2xpZW50cy5cbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzeW5jIEdNVXBkYXRlICgpIHt9XG5cbiAgYXN5bmMgRXhlY3V0ZUdNVXBkYXRlICgpIHtcbiAgICBjb25zdCBuZXdEYXRhID0gYXdhaXQgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQuZXhlY3V0ZUFzR00oXG4gICAgICAnR01VcGRhdGUnLFxuICAgICAgdGhpcy50b09iamVjdCgpLFxuICAgICAgdGhpcy5fb3B0aW9ucyxcbiAgICAgIHRoaXMuY29uc3RydWN0b3IubmFtZSxcbiAgICAgIHRoaXMubWVzc2FnZUlkXG4gICAgKVxuXG4gICAgdGhpcy5kYXRhID0gbmV3RGF0YVxuICAgIGF3YWl0IHRoaXMuYXNzaWduT2JqZWN0cygpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudCB3aWxsIGNoZWNrIGZvciBhbiBhY3Rpb24gKGRhdGEtYWN0aW9uKVxuICAgKiBpZiBhIG1ldGhvZCB3aXRoIHRoYXQgbmFtZSBleGlzdCBpdCB3aWxsIGJlIHRyaWdnZXJlZC5cbiAgICovXG4gIGFzeW5jIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJyAvLyBBdm9pZCBtdWx0aXBsZSBwdXNoXG4gICAgY29uc3QgYWN0aW9uID0gdGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG5cbiAgICBsZXQgZm9ybVVwZGF0ZVxuICAgIGxldCBhY3Rpb25VcGRhdGUgPSBmYWxzZVxuXG4gICAgLy8gaWYgKCdzdWJtaXQnID09IHRhcmdldC50eXBlKSB7XG4gICAgLy8gICBjb25zb2xlLndhcm4oJ0J1dHRvbiBpcyBhbHNvIGEgc3VibWl0JylcbiAgICAvLyB9XG5cbiAgICAvLyBQZXJmb3JtIGNhcmQgdXBkYXRlIGZpcnN0XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KGAuJHtFQ0NfQ0xBU1N9YClcbiAgICBpZiAoY2FyZCkgZm9ybVVwZGF0ZSA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYENvdWxkIG5vdCBmaW5kIGEgRUVDIGNsYXNzIGZvciB0aGlzIGNhcmQ6ICR7dGhpcy5jb25zdHJ1Y3Rvci5uYW1lfWBcbiAgICAgIClcbiAgICB9XG5cbiAgICBjb25zdCBvcmlnaW5hbERpc3BsYXlTdHlsZSA9IHRhcmdldC5zdHlsZS5kaXNwbGF5XG5cbiAgICBpZiAoIWFjdGlvbikge1xuICAgICAgY29uc29sZS53YXJuKCdubyBhY3Rpb24gYXNzb2NpYXRlZCB3aXRoIHRoaXMgYnV0dG9uJylcbiAgICAgIGlmICghZm9ybVVwZGF0ZSkgcmV0dXJuIC8vIElmIHRoZSBmb3JtIHdhcyB1cGRhdGVkIHdlIHN0aWxsIHVwZGF0ZSB0aGUgY2FyZFxuICAgIH1cbiAgICBpZiAoIXRoaXNbYWN0aW9uXSkge1xuICAgICAgY29uc29sZS53YXJuKGBubyAke2FjdGlvbn0gYWN0aW9uIGZvdW5kIGZvciB0aGlzIGNhcmRgKVxuICAgICAgaWYgKCFmb3JtVXBkYXRlKSByZXR1cm4gLy8gSWYgdGhlIGZvcm0gd2FzIHVwZGF0ZWQgd2Ugc3RpbGwgdXBkYXRlIHRoZSBjYXJkXG4gICAgfVxuICAgIGlmICh0aGlzW2FjdGlvbl0pIHtcbiAgICAgIGFjdGlvblVwZGF0ZSA9IGF3YWl0IHRoaXNbYWN0aW9uXSh7IGV2ZW50LCB1cGRhdGVDYXJkOiBmYWxzZSB9KVxuICAgIH1cblxuICAgIGlmIChmb3JtVXBkYXRlIHx8IGFjdGlvblVwZGF0ZSkgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgZWxzZSB0YXJnZXQuc3R5bGUuZGlzcGxheSA9IG9yaWdpbmFsRGlzcGxheVN0eWxlXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKiBAcmV0dXJucyBmYWxzZSBpZiBrZXkgaXMgZW50ZXIgdG8gYXZvaWQgZ2xvYmFsIHN1Ym1pc3Npb25cbiAgICovXG4gIF9vbktleSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICByZXR1cm4gZXZlbnQua2V5ICE9PSAnRW50ZXInXG4gIH1cblxuICBfb25DaGFuZ2UgKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdWJtaXRPbkNoYW5nZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICAgIH1cbiAgfVxuXG4gIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdGFnTmFtZSA9IHRhcmdldC50YWdOYW1lXG4gICAgaWYgKHRhZ05hbWUgPT09ICdCVVRUT04nICYmICdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gLy9cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoYC4ke0VDQ19DTEFTU31gKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3QgdXBkYXRlcyA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGlmICh1cGRhdGVzKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSB0aGUgZm9ybSBmcm9tIHRoZSBjYXJkIGFuZCB1cGRhdGUgdGhlIGRhdGEgc3RydWN0dXJlXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNhcmRcbiAgICogQHJldHVybnNcbiAgICovXG4gIF91cGRhdGUgKGNhcmQpIHtcbiAgICBjb25zdCBmb3JtcyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXG4gICAgbGV0IHVwZGF0ZXMgPSBmYWxzZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZvcm0gPSBmb3Jtc1tpXVxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZChmb3JtKVxuICAgICAgY29uc3QgZGF0YSA9IGZkLm9iamVjdFxuICAgICAgLy8gZGF0YSA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdChcbiAgICAgIC8vICAgdGhpcy5kYXRhLFxuICAgICAgLy8gICBmb3VuZHJ5LnV0aWxzLmV4cGFuZE9iamVjdChkYXRhKVxuICAgICAgLy8gKVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSBnZXRCeVBhdGgodGhpcywga2V5KVxuICAgICAgICBpZiAoIShvbGRWYWx1ZSA9PT0gdmFsdWUpKSB7XG4gICAgICAgICAgc2V0QnlQYXRoKHRoaXMsIGtleSwgdmFsdWUpXG4gICAgICAgICAgdXBkYXRlcyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlc1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXR0YWNoT2JqZWN0OiB0cnVlLFxuICAgICAgY2xhc3NlczogW0VDQ19DTEFTU10sXG4gICAgICBleGNsdWRlOiBbXSxcbiAgICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfJyxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgb29jOiBmYWxzZSwgLy8gICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5vb2M9ZmFsc2VdICBVc2UgdGhlIHNwZWFrZXIvZ2V0c3BlYWtlci4gaWYgdHJ1ZSB1c2UgdGhlIHVzZXIgaW5zdGVhZFxuICAgICAgY29tcHV0ZTogdHJ1ZSwgLy8gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNvbXB1dGUubG9jYWw9dHJ1ZV0gaW52b3F1ZSB0aGUgY29tcHV0ZSBtZXRob2QgYXMgbG9jYWwgdXNlciA9PiBuZWVkIHRvIG92ZXJyaWRlIGxvY2FsQ29tcHV0ZVxuICAgICAgR01VcGRhdGU6IGZhbHNlIC8vICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5jb21wdXRlLkdNPWZhbHNlXSBpbnZvcXVlIHRoZSBHTVVwZGF0ZSBtZXRob2QgYXMgR00gPT4gbmVlZCB0byBvdmVycmlkZSBHTVVwZGF0ZVxuICAgIH1cbiAgfVxuXG4gIGdldCBvYmplY3REYXRhU3RyaW5nICgpIHtcbiAgICBjb25zdCBzYXZlRGF0YSA9IHtcbiAgICAgIGRhdGE6IHRoaXMuZGF0YSxcbiAgICAgIG9wdGlvbnM6IHRoaXMuX29wdGlvbnNcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHNhdmVEYXRhLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCh0aGlzLm9wdGlvbnMuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH0pXG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlKG1lc3NhZ2UpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlIChtZXNzYWdlKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSAkKG1lc3NhZ2UuZGF0YS5jb250ZW50KVswXVxuICAgIGlmICghY2FyZEVsZW1lbnQpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZSA9IG1lc3NhZ2VcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21IVE1MQ2FyZEVsZW1lbnQgKGh0bW1sQ2FyZCkge1xuICAgIGlmICghaHRtbWxDYXJkKSByZXR1cm5cbiAgICBpZiAoIWh0bW1sQ2FyZC5kYXRhc2V0LmVjY0NsYXNzKSByZXR1cm5cbiAgICBpZiAoIWh0bW1sQ2FyZC5kYXRhc2V0Lm9iamVjdCkgcmV0dXJuXG4gICAgY29uc3QgY2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGh0bW1sQ2FyZC5kYXRhc2V0Lm9iamVjdCkpXG4gICAgY29uc3QgbWVzc2FnZSA9IGh0bW1sQ2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY29uc3QgbWVzc2FnZUlkID0gbWVzc2FnZT8uZGF0YXNldD8ubWVzc2FnZUlkXG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShcbiAgICAgIGNhcmREYXRhLmRhdGEsXG4gICAgICBjYXJkRGF0YS5vcHRpb25zLFxuICAgICAgaHRtbWxDYXJkLmRhdGFzZXQuZWNjQ2xhc3MsXG4gICAgICBtZXNzYWdlSWRcbiAgICApXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbURhdGEgKGRhdGEsIG9wdGlvbnMsIGNhcmRDbGFzc05hbWUsIG1lc3NhZ2VJZCA9IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IENhcmRDbGFzcyA9IGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIudHlwZXMuZ2V0KGNhcmRDbGFzc05hbWUpXG5cbiAgICBpZiAoIUNhcmRDbGFzcykge1xuICAgICAgY29uc29sZS5lcnJvcihgVW5rbm93biBjaGF0IGNhcmQgdHlwZTogJHtjYXJkQ2xhc3NOYW1lfWApXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkQ2xhc3MoZGF0YSwgb3B0aW9ucylcbiAgICBpZiAobWVzc2FnZUlkKSBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIGF3YWl0IGNhcmQuYXNzaWduT2JqZWN0cygpXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHNldERhdGEgKG5hbWUpIHtcbiAgICBpZiAoIW5hbWUgJiYgISgkLnR5cGUobmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsIHRydWUpXG4gIH1cblxuICB1bnNldERhdGEgKG5hbWUpIHtcbiAgICBpZiAoIW5hbWUgJiYgISgkLnR5cGUobmFtZSkgPT09ICdzdHJpbmcnKSkgcmV0dXJuXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsIGZhbHNlKVxuICB9XG5cbiAgdG9nZ2xlRGF0YSAobmFtZSkge1xuICAgIGlmICghbmFtZSAmJiAhKCQudHlwZShuYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICBjb25zdCB2YWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBuYW1lKVxuICAgIHNldEJ5UGF0aCh0aGlzLCBuYW1lLCAhdmFsdWUpXG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgYW5zd2VyID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQuZXhlY3V0ZUFzR00oJ2dtX29uVG9nZ2xlJywge1xuICAgIC8vICAgZXZlbnQ6IGV2ZW50LFxuICAgIC8vICAgY2FyZDogdGhpc1xuICAgIC8vIH0pXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICgnYWN0aW9uJyBpbiB0YXJnZXQuZGF0YXNldCkgcmV0dXJuIHRoaXMuX29uQnV0dG9uKGV2ZW50KVxuICAgIGlmIChcbiAgICAgIHRhcmdldCAmJlxuICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZ20tc2VsZWN0LW9ubHknKSAmJlxuICAgICAgIWdhbWUudXNlci5pc0dNXG4gICAgKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgbmFtZSA9IHRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICAgID8gYGRhdGEuZmxhZ3MuJHt0YXJnZXQuZGF0YXNldC5mbGFnfWBcbiAgICAgIDogdGFyZ2V0LmRhdGFzZXQubmFtZVxuICAgIGlmICghbmFtZSkgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmNsb3Nlc3QoJy5lY2MtcmFkaW8nKVxuICAgIGlmICghdG9nZ2xlKSB7XG4gICAgICB0aGlzLnRvZ2dsZURhdGEobmFtZSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYnV0dG9ucyA9IHRvZ2dsZS5xdWVyeVNlbGVjdG9yQWxsKCcuZWNjLXN3aXRjaCcpXG4gICAgICBmb3IgKGNvbnN0IGIgb2YgYnV0dG9ucykge1xuICAgICAgICBjb25zdCBiTmFtZSA9IGIuZGF0YXNldC5mbGFnXG4gICAgICAgICAgPyBgZGF0YS5mbGFncy4ke2IuZGF0YXNldC5mbGFnfWBcbiAgICAgICAgICA6IGIuZGF0YXNldC5uYW1lXG4gICAgICAgIHRoaXMudW5zZXREYXRhKGJOYW1lKVxuICAgICAgfVxuICAgICAgdGhpcy5zZXREYXRhKG5hbWUpXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChgLiR7RUNDX0NMQVNTfWApXG4gICAgaWYgKHRoaXMub3B0aW9ucy5zdWJtaXRPbkNoYW5nZSkge1xuICAgICAgaWYgKGNhcmQpIHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKCkgLy8gU3VibWl0IG9uIGNoYW5nZSA/XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgX3BhcnRpY2lwYW50IHtcbiAgY29uc3RydWN0b3IgKGRhdGEgPSB7fSkge1xuICAgIHRoaXMuZGF0YSA9IGRhdGFcbiAgfVxuXG4gIF9mZXRjaCAoKSB7XG4gICAgaWYgKCF0aGlzLl9kb2MgJiYgdGhpcy5kYXRhLmRvY1V1aWQpIHtcbiAgICAgIHRoaXMuX2RvYyA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cblxuICAgIGlmICghdGhpcy5fYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLl9kb2MpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLl9kb2MuY29uc3RydWN0b3I/Lm5hbWUpIHtcbiAgICAgICAgICBjYXNlICdUb2tlbkRvY3VtZW50JzpcbiAgICAgICAgICAgIHRoaXMuX2FjdG9yID0gdGhpcy5fZG9jLmFjdG9yXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnQ29DQWN0b3InOlxuICAgICAgICAgICAgdGhpcy5fYWN0b3IgPSB0aGlzLl9kb2NcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB0aGlzLl9hY3RvciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgdGhpcy5fZmV0Y2goKVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgZ2V0IGlzQWN0b3IgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0FjdG9yIHx8IHRoaXMuaGFzVmVoaWNsZVxuICB9XG5cbiAgZ2V0IGlzQWN0aXZlICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmFjdGl2ZSB8fCBmYWxzZVxuICB9XG5cbiAgZ2V0IGtleSAoKSB7XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5hY3RvcktleVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5hY3RvcktleVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBpY29uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNBY3Rvcikge1xuICAgICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3F1ZXN0aW9uLWNpcmNsZS1yZWd1bGFyLnN2ZydcbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgcmV0dXJuIHRoaXMudmVoaWNsZS5pbWdcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuaW1nXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGRyaXZlciAoKSB7XG4gICAgaWYgKCF0aGlzLl9kcml2ZXIpIHtcbiAgICAgIHRoaXMuX2RyaXZlciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuZGF0YS5kb2NVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZHJpdmVyXG4gIH1cblxuICBnZXQgdmVoaWNsZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS52ZWhpY2xlS2V5KSB7XG4gICAgICB0aGlzLl92ZWhpY2xlID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5kYXRhLnZlaGljbGVLZXkpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl92ZWhpY2xlXG4gIH1cblxuICBnZXQgaGFzQWN0b3IgKCkge1xuICAgIHJldHVybiAhIXRoaXMuYWN0b3JcbiAgfVxuXG4gIGdldCBoYXNWZWhpY2xlICgpIHtcbiAgICByZXR1cm4gISF0aGlzLnZlaGljbGVcbiAgfVxuXG4gIGdldCBuYW1lICgpIHtcbiAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSByZXR1cm4gdGhpcy52ZWhpY2xlLm5hbWVcbiAgICBpZiAodGhpcy5oYXNBY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICAgIHJldHVybiB0aGlzLmRhdGEubmFtZSB8fCB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBtb3YgKCkge1xuICAgIGlmICghdGhpcy5kYXRhLm1vdikge1xuICAgICAgaWYgKHRoaXMuaGFzVmVoaWNsZSkgdGhpcy5kYXRhLm1vdiA9IHRoaXMudmVoaWNsZS5tb3ZcbiAgICAgIGVsc2UgaWYgKHRoaXMuaGFzQWN0b3IpIHRoaXMuZGF0YS5tb3YgPSB0aGlzLmFjdG9yLm1vdlxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEubW92KSB7XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhdGEubW92KSkpIHRoaXMuZGF0YS5oYXNWYWxpZE1vdiA9IHRydWVcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEuaGFzVmFsaWRNb3YgPSBmYWxzZVxuICAgICAgICB0aGlzLmRhdGEubW92ID0gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tb3ZcbiAgfVxuXG4gIGdldCB1dWlkICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLnV1aWRcbiAgfVxuXG4gIGdldCBoYXNNYXhCb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAyXG4gIH1cblxuICBnZXQgYm9udXNEaWNlICgpIHtcbiAgICBpZiAoXG4gICAgICBpc05hTih0aGlzLmRhdGEuYm9udXNEaWNlKSB8fFxuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA8IDAgfHxcbiAgICAgIHRoaXMuZGF0YS5ib251c0RpY2UgPiAyXG4gICAgKSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5kYXRhLmJvbnVzRGljZVxuICB9XG5cbiAgc2V0IGJvbnVzRGljZSAoeCkge1xuICAgIGlmIChpc05hTih4KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQm9udXMgZGljZSBjYW4gT25seSBiZSBhIG51bWJlcicpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHggPiAyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdNYXggMiBib251cyBkaWNlJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoeCA8IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ05vIG5lZ2F0aXYgYm9udXMgZGljZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSA9IHhcbiAgfVxuXG4gIGdldCBocCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuaHApIHtcbiAgICAgIHRoaXMuZGF0YS5ocCA9IDBcbiAgICB9XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuZGF0YS5ocCA9IHRoaXMuYWN0b3IuaHBcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLmhwXG4gIH1cblxuICBzZXQgaHAgKHgpIHtcbiAgICB0aGlzLmRhdGEuaHAgPSB4XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuYWN0b3Iuc2V0SHAoeClcbiAgICB9XG4gIH1cblxuICBhZGRCb251c0RpY2UgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuYm9udXNEaWNlID49IDIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0FscmVhZHkgaGF2ZSBtYXggYm9udXMgZGljZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSArPSAxXG4gIH1cblxuICByZW1vdmVCb251c0RpY2UgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuYm9udXNEaWNlIDw9IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0FscmVhZHkgaGF2ZSAwIGJvbnVzIGRpY2UnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMuZGF0YS5ib251c0RpY2UgLT0gMVxuICB9XG5cbiAgcmVzZXRCb251c0RpY2UgKCkge1xuICAgIHRoaXMuZGF0YS5ib251c0RpY2UgPSAwXG4gIH1cblxuICBnZXQgaGFzQm9udXNEaWNlICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNPbmVCb251c0RpY2UgfHwgdGhpcy5oYXNUd29Cb251c0RpY2VcbiAgfVxuXG4gIGdldCBoYXNPbmVCb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAxXG4gIH1cblxuICBnZXQgaGFzVHdvQm9udXNEaWNlICgpIHtcbiAgICByZXR1cm4gdGhpcy5ib251c0RpY2UgPj0gMlxuICB9XG5cbiAgZ2V0IGNhbkFzc2lzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYXNzaXN0Py5sZW5ndGggPiAwXG4gIH1cblxuICBnZXQgY2FuQmVDYXV0aW91cyAoKSB7XG4gICAgcmV0dXJuICF0aGlzLmhhc01heEJvbnVzRGljZVxuICB9XG5cbiAgZ2V0IGFzc2lzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5hc3Npc3QgfHwgW11cbiAgfVxuXG4gIGdldCBkZXggKCkge1xuICAgIGlmICghdGhpcy5kYXRhLmRleCkge1xuICAgICAgaWYgKHRoaXMuaGFzVmVoaWNsZSAmJiB0aGlzLmhhc0RyaXZlcikge1xuICAgICAgICB0aGlzLmRhdGEuZGV4ID0gdGhpcy5kcml2ZXIuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmhhc0FjdG9yKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kZXggPSB0aGlzLmFjdG9yLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLmRleCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5kYXRhLmRleCkpKSB0aGlzLmRhdGEuaGFzVmFsaWREZXggPSB0cnVlXG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRhLmhhc1ZhbGlkRGV4ID0gZmFsc2VcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLmRleFxuICB9XG5cbiAgZ2V0IGhhc0FHdW5SZWFkeSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5oYXNBR3VuUmVhZHkgfHwgZmFsc2VcbiAgfVxuXG4gIGdldCBpbml0aWF0aXZlICgpIHtcbiAgICBsZXQgaW5pdCA9IHRoaXMuZGV4XG4gICAgaWYgKHRoaXMuaGFzQUd1blJlYWR5KSB7XG4gICAgICBpbml0ICs9IDUwXG4gICAgfVxuICAgIC8vIGlmKCB0aGlzLnNwZWVkQ2hlY2spe1xuICAgIC8vICAgaWYodGhpcy5zcGVlZENoZWNrLnNjb3JlKSBpbml0ICs9IHRoaXMuc3BlZWRDaGVjay5zY29yZS8xMDBcbiAgICAvLyB9XG5cbiAgICByZXR1cm4gaW5pdFxuICB9XG5cbiAgZ2V0IGlzQ2hhc2VyICgpIHtcbiAgICByZXR1cm4gISF0aGlzLmRhdGEuY2hhc2VyXG4gIH1cblxuICBnZXQgaXNQcmV5ICgpIHtcbiAgICByZXR1cm4gIXRoaXMuaXNDaGFzZXJcbiAgfVxuXG4gIGdldCBpc1ZhbGlkICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNWYWxpZERleCAmJiB0aGlzLmhhc1ZhbGlkTW92XG4gIH1cblxuICBnZXQgaGFzVmFsaWREZXggKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5kZXgpKVxuICB9XG5cbiAgZ2V0IGhhc1ZhbGlkTW92ICgpIHtcbiAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLmRhdGEubW92KSlcbiAgfVxuXG4gIGdldCBoYXNEcml2ZXIgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc1ZlaGljbGUgJiYgdGhpcy5oYXNBY3RvclxuICB9XG5cbiAgZ2V0IG1vdkFkanVzdG1lbnQgKCkge1xuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ucm9sbERhdGFTdHJpbmcpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suZnJvbVJvbGxTdHJpbmcodGhpcy5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcpXG4gICAgICBpZiAocm9sbCkge1xuICAgICAgICBpZiAoIXJvbGwuc3RhbmRieSkge1xuICAgICAgICAgIGlmIChyb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUpIHJldHVybiAxXG4gICAgICAgICAgZWxzZSBpZiAocm9sbC5mYWlsZWQpIHJldHVybiAtMVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgYWRqdXN0ZWRNb3YgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5tb3YgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKGlzTmFOKE51bWJlcih0aGlzLm1vdikpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIE51bWJlcih0aGlzLm1vdikgKyB0aGlzLm1vdkFkanVzdG1lbnRcbiAgfVxuXG4gIGdldCBoYXNNb3ZBZGp1c3RtZW50ICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNCb251c01vdiB8fCB0aGlzLmhhc01hbHVzTW92XG4gIH1cblxuICBnZXQgaGFzQm9udXNNb3YgKCkge1xuICAgIGlmICh0aGlzLmRhdGEubW92QWRqdXN0bWVudCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaGFzTWFsdXNNb3YgKCkge1xuICAgIGlmICh0aGlzLmRhdGEubW92QWRqdXN0bWVudCA8IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvLyBnZXQgb3B0aW9ucygpe1xuICAvLyAgcmV0dXJuIHtcbiAgLy8gICAgZXhjbHVkZTogW10sXG4gIC8vICAgIGV4Y2x1ZGVTdGFydFdpdGg6ICdfJ1xuICAvLyAgfTtcbiAgLy8gfVxuXG4gIC8vIGdldCBkYXRhU3RyaW5nKCl7XG4gIC8vICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSx2YWx1ZSk9PntcbiAgLy8gICAgaWYoIG51bGwgPT09IHZhbHVlKSByZXR1cm4gdW5kZWZpbmVkO1xuICAvLyAgICBpZiggdGhpcy5vcHRpb25zLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIGlmKCBrZXkuc3RhcnRzV2l0aCh0aGlzLm9wdGlvbnMuZXhjbHVkZVN0YXJ0V2l0aCkpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIHJldHVybiB2YWx1ZTtcbiAgLy8gIH0pO1xuICAvLyB9XG5cbiAgdG9vU2xvdyAoKSB7XG4gICAgdGhpcy5kYXRhLmV4Y2x1ZGVkID0gdHJ1ZVxuICB9XG5cbiAgaW5jbHVkZUluQ2hhc2UgKCkge1xuICAgIHRoaXMuZGF0YS5leGNsdWRlZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLmVzY2FwZWQgPSBmYWxzZVxuICB9XG5cbiAgZXNjYXBlZCAoKSB7XG4gICAgdGhpcy5kYXRhLmVzY2FwZWQgPSB0cnVlXG4gIH1cblxuICBzZXQgc2xvd2VzdCAoeCkge1xuICAgIHRoaXMuZGF0YS5zbG93ZXN0ID0geFxuICB9XG5cbiAgZ2V0IHNsb3dlc3QgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuc2xvd2VzdFxuICB9XG5cbiAgc2V0IGZhc3Rlc3QgKHgpIHtcbiAgICB0aGlzLmRhdGEuZmFzdGVzdCA9IHhcbiAgfVxuXG4gIGdldCBmYXN0ZXN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmZhc3Rlc3RcbiAgfVxuXG4gIGNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyAobWluTW92KSB7XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHRoaXMubW92ZW1lbnRBY3Rpb24gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICB0eXBlb2YgdGhpcy5hZGp1c3RlZE1vdiA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIGlzTmFOKG1pbk1vdilcbiAgICApIHtcbiAgICAgIHRoaXMubW92ZW1lbnRBY3Rpb24gPSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubW92ZW1lbnRBY3Rpb24gPSAxICsgKHRoaXMuYWRqdXN0ZWRNb3YgLSBtaW5Nb3YpXG4gICAgfVxuICAgIC8vIGlmKCB0aGlzLm1vdmVtZW50QWN0aW9uIDwgMCkgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDBcbiAgfVxuXG4gIHNldCBtb3ZlbWVudEFjdGlvbiAoeCkge1xuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA9IHhcbiAgfVxuXG4gIGdldCBtb3ZlbWVudEFjdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvblxuICB9XG5cbiAgc2V0IGN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKHgpIHtcbiAgICB0aGlzLmRhdGEuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHhcbiAgfVxuXG4gIGdldCBjdXJyZW50TW92ZW1lbnRBY3Rpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgfHwgMFxuICB9XG5cbiAgZ2V0IGhhc01heE12dEFjdGlvbnMgKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPj0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICB9XG5cbiAgZ2V0IGhhc05vTXZ0QWN0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8PSAwXG4gIH1cblxuICBhZGRNb3ZlbWVudEFjdGlvbnMgKHggPSAxKSB7XG4gICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHhcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gdGhpcy5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICAgIH1cbiAgfVxuXG4gIGFsdGVyTW92ZW1lbnRBY3Rpb25zICh4KSB7XG4gICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHhcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gdGhpcy5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gdGhpcy5tb3ZlbWVudEFjdGlvblxuICAgIH1cbiAgfVxuXG4gIGdldCBtb3ZlbWVudEFjdGlvbkFycmF5ICgpIHtcbiAgICBjb25zdCBiYXNlQXJyYXkgPSBBcnJheSh0aGlzLm1vdmVtZW50QWN0aW9uKS5maWxsKCdiYXNlJylcbiAgICBpZiAodGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID49IDApIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zOyBpKyspIHtcbiAgICAgICAgYmFzZUFycmF5W2ldID0gJ2Jhc2UgYXZhaWxhYmxlJ1xuICAgICAgfVxuICAgICAgcmV0dXJuIGJhc2VBcnJheVxuICAgIH1cblxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPCAwKSB7XG4gICAgICBjb25zdCBkZWZpY2l0QXJyYXkgPSBBcnJheShNYXRoLmFicyh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMpKS5maWxsKFxuICAgICAgICAnZGVmaWNpdCdcbiAgICAgIClcbiAgICAgIHJldHVybiBkZWZpY2l0QXJyYXkuY29uY2F0KGJhc2VBcnJheSlcbiAgICB9XG4gIH1cblxuICBnZXQgY3NzQ2xhc3MgKCkge1xuICAgIGNvbnN0IGNzc0NsYXNzZXMgPSBbXVxuICAgIGlmICh0aGlzLmlzQ2hhc2VyKSBjc3NDbGFzc2VzLnB1c2goJ2NoYXNlcicpXG4gICAgZWxzZSBjc3NDbGFzc2VzLnB1c2goJ3ByZXknKVxuICAgIGlmICh0aGlzLmRhdGEuZXhjbHVkZWQpIGNzc0NsYXNzZXMucHVzaCgnZXhjbHVkZWQnLCAndG9vX3Nsb3cnKVxuICAgIGlmICh0aGlzLmRhdGEuZXNjYXBlZCkgY3NzQ2xhc3Nlcy5wdXNoKCdlc2NhcGVkJylcbiAgICBpZiAodGhpcy5kYXRhLmZhc3Rlc3QpIGNzc0NsYXNzZXMucHVzaCgnZmFzdGVzdCcpXG4gICAgaWYgKHRoaXMuZGF0YS5zbG93ZXN0KSBjc3NDbGFzc2VzLnB1c2goJ3Nsb3dlc3QnKVxuICAgIGlmICh0aGlzLmRhdGEuYWN0aXZlKSBjc3NDbGFzc2VzLnB1c2goJ2FjdGl2ZScpXG4gICAgaWYgKHRoaXMuZGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDw9IDApIGNzc0NsYXNzZXMucHVzaCgnbm8tYWN0aW9ucycpXG4gICAgcmV0dXJuIGNzc0NsYXNzZXMuam9pbignICcpXG4gIH1cblxuICBnZXQgc3BlZWRDaGVjayAoKSB7XG4gICAgY29uc3QgY2hlY2sgPSB7fVxuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8ubmFtZSkgY2hlY2submFtZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLm5hbWVcbiAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnNjb3JlKSBjaGVjay5zY29yZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLnNjb3JlXG4gICAgY2hlY2suY3NzQ2xhc3NlcyA9ICcnXG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5yb2xsRGF0YVN0cmluZykge1xuICAgICAgY2hlY2sucm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcbiAgICAgIGlmIChjaGVjay5yb2xsKSB7XG4gICAgICAgIGlmICghY2hlY2sucm9sbC5zdGFuZGJ5IHx8IGNoZWNrLnJvbGwuaGFzQ2FyZCkge1xuICAgICAgICAgIGNoZWNrLnJvbGxlZCA9IHRydWVcbiAgICAgICAgICBjaGVjay5pbmxpbmVSb2xsID0gY2hlY2sucm9sbC5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICAgICAgICBjaGVjay5jc3NDbGFzc2VzICs9ICdyb2xsZWQnXG4gICAgICAgICAgaWYgKCFjaGVjay5yb2xsLnN0YW5kYnkpIHtcbiAgICAgICAgICAgIGlmIChjaGVjay5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUpIHtcbiAgICAgICAgICAgICAgY2hlY2subW9kaWZpZXJDc3MgPSAndXBncmFkZSdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2hlY2sucm9sbC5mYWlsZWQpIGNoZWNrLm1vZGlmaWVyQ3NzID0gJ2Rvd25ncmFkZSdcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgY2hlY2sucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lIHx8XG4gICAgICAgICAgICAgIGNoZWNrLnJvbGwuZmFpbGVkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY2hlY2suaGFzTW9kaWZpZXIgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSB7XG4gICAgICBjaGVjay5vcHRpb25zID0gW11cbiAgICAgIGZvciAoY29uc3QgYyBvZiBbJ2NvbiddKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljID0gdGhpcy5hY3Rvci5nZXRDaGFyYWN0ZXJpc3RpYyhjKVxuICAgICAgICBpZiAoY2hhcmFjdGVyaXN0aWM/LnZhbHVlKSBjaGVjay5vcHRpb25zLnB1c2goY2hhcmFjdGVyaXN0aWMubGFiZWwpXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmFjdG9yLmRyaXZlU2tpbGxzKSB7XG4gICAgICAgIGNoZWNrLm9wdGlvbnMucHVzaChzLm5hbWUpXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLmFjdG9yLnBpbG90U2tpbGxzKSB7XG4gICAgICAgIGNoZWNrLm9wdGlvbnMucHVzaChzLm5hbWUpXG4gICAgICB9XG4gICAgICBjaGVjay5oYXNPcHRpb25zID0gISFjaGVjay5vcHRpb25zLmxlbmd0aFxuXG4gICAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LmlkKSB7XG4gICAgICAgIGxldCBpdGVtID0gdGhpcy5hY3Rvci5maW5kKHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICBjb25zdCBnYW1lSXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgICAgIGlmIChnYW1lSXRlbSkgaXRlbSA9IHRoaXMuYWN0b3IuZmluZChnYW1lSXRlbS5uYW1lKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnaXRlbScgJiYgaXRlbS52YWx1ZS5kYXRhPy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5uYW1lXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ3NraWxsJ1xuICAgICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnY2hhcmFjdGVyaXN0aWMnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgICAgIGNoZWNrLmlzQ2hhcmFjdGVyaXN0aWMgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2F0dHJpYnV0ZSdcbiAgICAgICAgICAgIGNoZWNrLmlzQXR0cmlidXRlID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLmZpbmQodGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZSlcbiAgICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnaXRlbScgJiYgaXRlbS52YWx1ZS5kYXRhPy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5uYW1lXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ3NraWxsJ1xuICAgICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnY2hhcmFjdGVyaXN0aWMnKSB7XG4gICAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtLnZhbHVlXG4gICAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS52YWx1ZS5sYWJlbFxuICAgICAgICAgICAgY2hlY2sudHlwZSA9ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgICAgIGNoZWNrLmlzQ2hhcmFjdGVyaXN0aWMgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2F0dHJpYnV0ZSdcbiAgICAgICAgICAgIGNoZWNrLmlzQXR0cmlidXRlID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uaWQpIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmdldCh0aGlzLmRhdGEuc3BlZWRDaGVjay5pZClcbiAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBjaGVjay5yZWYgPSBpdGVtXG4gICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgY2hlY2suaXNTa2lsbCA9IHRydWVcbiAgICAgICAgICBjaGVjay5yZWZTZXQgPSBmYWxzZVxuICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS5iYXNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lICYmIHRoaXMuZGF0YS5zcGVlZENoZWNrPy5zY29yZSkge1xuICAgICAgY2hlY2submFtZSA9IHRoaXMuZGF0YS5zcGVlZENoZWNrLm5hbWVcbiAgICAgIGNoZWNrLnNjb3JlID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2suc2NvcmVcbiAgICAgIGNoZWNrLnJlZlNldCA9IGZhbHNlXG4gICAgfVxuXG4gICAgY2hlY2suY2FuQmVSb2xsZWQgPSB0cnVlXG5cbiAgICBpZiAoIWNoZWNrLnJvbGxlZCAmJiAhY2hlY2suc2NvcmUpIHtcbiAgICAgIGNoZWNrLmNzc0NsYXNzZXMgKz0gJyBpbnZhbGlkJ1xuICAgICAgY2hlY2suY2FuQmVSb2xsZWQgPSBmYWxzZVxuICAgIH1cbiAgICBjaGVjay5pc1ZhbGlkID0gY2hlY2sucm9sbGVkICYmICFpc05hTihjaGVjay5zY29yZSlcblxuICAgIHJldHVybiBjaGVja1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzb3J0QnlSb2xlQW5kRGV4IChhLCBiKSB7XG4gIGlmICghYSAmJiBiKSByZXR1cm4gMVxuICBpZiAoIWIgJiYgYSkgcmV0dXJuIC0xXG4gIGlmICghYSAmJiAhYikgcmV0dXJuIDBcbiAgLy8gUHV0IGNoYXNlcnMgZmlyc3RcbiAgaWYgKGIuY2hhc2VyICYmICFhLmNoYXNlcikgcmV0dXJuIDFcbiAgaWYgKGEuY2hhc2VyICYmICFiLmNoYXNlcikgcmV0dXJuIC0xXG4gIC8vIElmIHNhbWV0eXBlIHNvcnQgYnkgZGV4XG4gIHJldHVybiBhLmRleCAtIGIuZGV4XG59XG4iLCIvKiBnbG9iYWwgZHVwbGljYXRlLCBmb3VuZHJ5LCBnYW1lLCBtZXJnZU9iamVjdCwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgRW5oYW5jZWRDaGF0Q2FyZCB9IGZyb20gJy4uLy4uL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMnXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4uLy4uL2RpY2UuanMnXG5pbXBvcnQgeyBfcGFydGljaXBhbnQgfSBmcm9tICcuLi8uLi9pdGVtcy9jaGFzZS9wYXJ0aWNpcGFudC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBjcmVhdGVJbmxpbmVSb2xsIH0gZnJvbSAnLi4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ2hhc2VPYnN0YWNsZUNhcmQgZXh0ZW5kcyBFbmhhbmNlZENoYXRDYXJkIHtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICBjb25zdCBvcHRpb25zID0gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmh0bWwnLFxuICAgICAgR01VcGRhdGU6IHRydWVcbiAgICB9KVxuICAgIG9wdGlvbnMuY2xhc3Nlcy5wdXNoKCdvYnN0YWNsZS1jYXJkJylcbiAgICByZXR1cm4gb3B0aW9uc1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLnN0YXR1cyA9IFtdXG4gICAgZGF0YS5zdHJpbmdzID0ge31cbiAgICBkYXRhLmRpc3BsYXlBY3Rvck9uQ2FyZCA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gICAgLy8gZGF0YS5wYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5wYXJ0aWNpcGFudERhdGEpXG5cbiAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgIG5hbWU6XG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3Rpb25Db3N0JykgKyBgIDoke3RoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3R9YFxuICAgIH0pXG5cbiAgICBkYXRhLmNhcmQuYnJlYWthYmxlT2JzdGFjbGUgPVxuICAgICAgZGF0YS5kYXRhLm9ic3RhY2xlPy5iYXJyaWVyICYmIGRhdGEuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMgLy8gVE9ETzogQ2hlY2sgaWYgdXNlZnVsbFxuICAgIGRhdGEuY2FyZC52YWxpZENoZWNrID0gZmFsc2VcblxuICAgIGlmIChcbiAgICAgIGRhdGEuZGF0YS5zdGF0ZXM/Lm9ic3RhY2xlRGVmaW5lZCAmJlxuICAgICAgKGRhdGEuZGF0YS5vYnN0YWNsZS5oYXphcmQgfHxcbiAgICAgICAgKGRhdGEuZGF0YS5vYnN0YWNsZS5iYXJyaWVyICYmICFkYXRhLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSlcbiAgICApIHtcbiAgICAgIGRhdGEuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSB0cnVlXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxuICAgICAgZGF0YS5kYXRhLnN0YXRlcy5icmVha09yTmVnb3RpYXRlRGVmaW5lZCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYXJ0aWNpcGFudD8uYWN0b3IpIHtcbiAgICAgIGRhdGEuc2tpbGwgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmZpbmQoZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSlcbiAgICAgIGRhdGEuY2hlY2tPcHRpb25zID0gdGhpcy5jaGFzZS5nZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyhcbiAgICAgICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50VXVpZFxuICAgICAgKVxuICAgICAgaWYgKGRhdGEuc2tpbGwpIHtcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxuICAgICAgICBkYXRhLnZhbGlkU2tpbGwgPSB0cnVlXG4gICAgICB9IGVsc2UgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgJiYgZGF0YS5kYXRhLmNoZWNrVGhyZXNob2xkKSB7XG4gICAgICAgIGRhdGEudmFsaWRDaGVjayA9IHRydWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YS5jaGVja09wdGlvbnMgPSB0aGlzLmNoYXNlLmFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljc1xuICAgICAgZGF0YS5kdW1teUFjdG9yID0gdHJ1ZVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgJiYgZGF0YS5kYXRhLmNoZWNrVGhyZXNob2xkKSB7XG4gICAgICAgIGRhdGEudmFsaWRDaGVjayA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWRhdGEuZGF0YS5ib251c0RpY2UpIGRhdGEuZGF0YS5ib251c0RpY2UgPSAwXG5cbiAgICBpZiAoXG4gICAgICBkYXRhLmRhdGEuYm9udXNEaWNlIDwgMiAmJlxuICAgICAgZGF0YS5kYXRhLnRvdGFsQWN0aW9uQ29zdCA8IGRhdGEuZGF0YS5tb3ZlbWVudEFjdGlvblxuICAgICkge1xuICAgICAgZGF0YS5jYW5UYWtlQ2F1dGlvdXNBcHByb2FjaCA9IHRydWVcbiAgICB9XG5cbiAgICBkYXRhLmN1c3RvbVdlYXBvbiA9IGZhbHNlXG4gICAgaWYgKHRoaXMuZGF0YS53ZWFwb25DaG9pY2UgPT09ICcwJykge1xuICAgICAgZGF0YS5jdXN0b21XZWFwb24gPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGRhdGEudmFsaWRDaGVjaykge1xuICAgICAgbGV0IGNoZWNrTmFtZSwgdmFsdWVcbiAgICAgIGlmIChkYXRhLnNraWxsKSB7XG4gICAgICAgIGNoZWNrTmFtZSA9IGRhdGEuc2tpbGwudmFsdWUubmFtZVxuICAgICAgICB2YWx1ZSA9IGRhdGEuc2tpbGwudmFsdWUudmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoZWNrTmFtZSA9IGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWVcbiAgICAgICAgdmFsdWUgPSBkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGRcbiAgICAgIH1cbiAgICAgIGRhdGEuc3RyaW5ncy5jaGVja1JvbGxSZXF1ZXN0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Bc2tSb2xsJywge1xuICAgICAgICBuYW1lOiBjaGVja05hbWUsXG4gICAgICAgIHZhbHVlXG4gICAgICB9KVxuICAgICAgaWYgKGRhdGEuZGF0YS5ib251c0RpY2UgIT09IDApIHtcbiAgICAgICAgaWYgKGRhdGEuZGF0YS5ib251c0RpY2UgPiAwKSB7XG4gICAgICAgICAgZGF0YS5zdHJpbmdzLmNoZWNrUm9sbFJlcXVlc3QgKz0gYCAoKyR7ZGF0YS5kYXRhLmJvbnVzRGljZX0pYFxuICAgICAgICB9IGVsc2UgZGF0YS5zdHJpbmdzLmNoZWNrUm9sbFJlcXVlc3QgKz0gYCAoJHtkYXRhLmRhdGEuYm9udXNEaWNlfSlgXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuZGF0YS5zdGF0ZXM/Lm9ic3RhY2xlRGVmaW5lZCkge1xuICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlRGVmaW5lZCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRmFjaW5nT2JzdGFjbGUnLCB7XG4gICAgICAgIHR5cGU6IGRhdGEuZGF0YS5vYnN0YWNsZS5iYXJyaWVyXG4gICAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQUJhcnJpZXInKVxuICAgICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFIYXphcmQnKVxuICAgICAgfSlcbiAgICAgIGlmIChkYXRhLmRhdGEub2JzdGFjbGUubmFtZSkge1xuICAgICAgICBkYXRhLnN0cmluZ3Mub2JzdGFjbGVEZWZpbmVkICs9IGAgKCR7ZGF0YS5kYXRhLm9ic3RhY2xlLm5hbWV9KWBcbiAgICAgIH1cblxuICAgICAgZGF0YS5kYXRhLnN0YXRlcy5jYW5Bc2tSb2xsID0gdHJ1ZVxuICAgICAgLy8gZGF0YS5kYXRhLnN0YXRlcy5vYnN0YWNsZUNhbkJlQnJva2VuID0gZmFsc2VcbiAgICAgIGlmIChkYXRhLmRhdGEub2JzdGFjbGUuYmFycmllcikge1xuICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHsgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJhcnJpZXInKSB9KVxuICAgICAgICBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cykge1xuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQnJlYWthYmxlJykgfSlcbiAgICAgICAgICAvLyBkYXRhLmRhdGEuc3RhdGVzLm9ic3RhY2xlQ2FuQmVCcm9rZW4gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkYXRhLmRhdGEub2JzdGFjbGUuaGF6YXJkKSB7XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGF6YXJkJykgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUpIHtcbiAgICAgICAgaWYgKCFkYXRhLnZhbGlkQ2hlY2spIHtcbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1ZhbGlkQ2hlY2snKSxcbiAgICAgICAgICAgIGNzczogJ2Vycm9yJ1xuICAgICAgICAgIH0pXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLkVudGVyVmFsdWVUaXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAnQ29DNy5Ta2lsbFNlbGVjdEJhc2UnLFxuICAgICAgICAgICAgeyBuYW1lOiBkYXRhLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lIH1cbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKCFkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIGRhdGEuZGF0YS5zdGF0ZXMuY2FuQXNrUm9sbCA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAoIWRhdGEudmFsaWRTa2lsbCkge1xuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vVmFsaWRTa2lsbCcpLFxuICAgICAgICAgICAgY3NzOiAnd2FybmluZydcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWspIHtcbiAgICAgICAgbGV0IGRhbWFnZVN0YXR1cyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5CcmVha0Rvd24nKVxuICAgICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHM/Lm9ic3RhY2xlRGFtYWdlUm9sbD8udG90YWwpIHtcbiAgICAgICAgICBkYW1hZ2VTdGF0dXMgKz0gYCA6ICR7dGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsLnRvdGFsfWBcbiAgICAgICAgfVxuICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBkYW1hZ2VTdGF0dXNcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5vYnN0YWNsZURhbWFnZVJvbGxlZCkge1xuICAgICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8ub2JzdGFjbGVEYW1hZ2VSb2xsPy50b3RhbCA8PSAwKSB7XG4gICAgICAgICAgICBkYXRhLnN0cmluZ3Mub2JzdGFjbGVEYW1hZ2UgPVxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9EYW1hZ2VEZWFsdCcpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEuaW5saW5lRGFtYWdlUm9sbCA9IGNyZWF0ZUlubGluZVJvbGwoXG4gICAgICAgICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbFxuICAgICAgICAgICAgKT8ub3V0ZXJIVE1MXG4gICAgICAgICAgICBkYXRhLnN0cmluZ3Mub2JzdGFjbGVEYW1hZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRhbWFnZURlYWx0Jywge1xuICAgICAgICAgICAgICB2YWx1ZTogZGF0YS5pbmxpbmVEYW1hZ2VSb2xsXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xuICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHsgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5lZ290aWF0ZScpIH0pXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoKSB7XG4gICAgICAgIGNvbnN0IGNhdXRpb3VzU3RhdHVzID0ge1xuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYXV0aW91cycpLFxuICAgICAgICAgIGNzczogJydcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCA+IDEpIHtcbiAgICAgICAgICBjYXV0aW91c1N0YXR1cy5jc3MgPSAnc3Ryb25nJ1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jYXV0aW91c0FwcHJvYWNoVHlwZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LkJlaW5nVmVyeUNhdXRpb3VzJ1xuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2F1dGlvdXNBcHByb2FjaFR5cGUgPVxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJlaW5nQ2F1dGlvdXMnKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlKSBjYXV0aW91c1N0YXR1cy5jc3MgKz0gJyBjb25zdW1lJ1xuICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKGNhdXRpb3VzU3RhdHVzKVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkKSB0aGlzLmRhdGEubW92ZVBsYXllciA9IHRydWUgLy8gT24gaGF6YXJkLCB5b3UgcGFzcyBldmVuIGlmIHlvdSBmYWlsIHlvdXIgcm9sbFxuICAgICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2sucGFzc2VkKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEubW92ZVBsYXllciA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZVxuICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZVBhc3NlZCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3Lk9ic3RhY2xlUGFzc2VkJ1xuICAgICAgICAgIClcbiAgICAgICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2subHVja1NwZW50KSB7XG4gICAgICAgICAgICBkYXRhLnN0cmluZ3Mub2JzdGFjbGVQYXNzZWQgKz0gYCAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LkdvdEx1Y2t5J1xuICAgICAgICAgICAgKX0pYFxuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TdWNjZXNzJyksXG4gICAgICAgICAgICBjc3M6ICdzdWNjZXNzJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2suaXNGdW1ibGUpIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tGYWlsZWQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT2JzdGFjbGVGdW1ibGUnKVxuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpLFxuICAgICAgICAgICAgY3NzOiAnZnVtYmxlJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGF0YS5zdHJpbmdzLmNoZWNrRmFpbGVkID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9ic3RhY2xlRmFpbCcpXG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpLFxuICAgICAgICAgICAgY3NzOiAnZmFpbHVyZSdcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMucGxheWVyQWN0aW9uRGVmaW5lZCkge1xuICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHtcbiAgICAgICAgZGF0YS5zdHJpbmdzLnBsYXllckludGVudGlvbnMgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgJ0NvQzcuVHJ5VG9OZWdvdGlhdGVIYXphcmQnXG4gICAgICAgIClcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmJhcnJpZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUpIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MucGxheWVySW50ZW50aW9ucyA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LlRyeVRvR2V0UGFzdEJhcnJpZXJzJ1xuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWspIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MucGxheWVySW50ZW50aW9ucyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UcnlUb0JyZWFrJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNoZWNrUm9sbGVkKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQpIHtcbiAgICAgICAgLy8gSWYgdGhlIGNhcmQgaXMgcmVzb2x2ZWQgdGhlIGNoZWNrIGlzIGZyb3plblxuICAgICAgICBkYXRhLmh0bWxDaGVjayA9IGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLmlubGluZUNoZWNrPy5vdXRlckhUTUxcbiAgICAgIH0gZWxzZSBkYXRhLmh0bWxDaGVjayA9IGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLmdldEh0bWxSb2xsKClcbiAgICB9XG5cbiAgICAvLyBpZiAodGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZERhbWFnZVJvbGwpIHtcbiAgICAvLyAgIGlmICghZGF0YS5kYXRhLmFybW9yKSB7XG4gICAgLy8gICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LmFjdG9yKVxuICAgIC8vICAgICAgIGRhdGEuZGF0YS5hcm1vciA9XG4gICAgLy8gICAgICAgICB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRhdGEuZGF0YS5hdHRyaWJzLmFybW9yLnZhbHVlIHx8IDBcbiAgICAvLyAgIH1cbiAgICAvLyAgIGlmIChkYXRhLmRhdGEuYXJtb3IpIHtcbiAgICAvLyAgICAgaWYgKGlzTmFOKE51bWJlcihkYXRhLmRhdGEuYXJtb3IpKSkgZGF0YS5kYXRhLmFybW9yID0gbnVsbFxuICAgIC8vICAgfVxuICAgIC8vIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCkge1xuICAgICAgZGF0YS5wbGF5ZXJEYW1hZ2VUYWtlbiA9IGZhbHNlXG4gICAgICBkYXRhLm9ic3RhbGNlRGVmaW5pdGlvbkNoYW5nZWQgPSBmYWxzZVxuXG4gICAgICAvLyBIYXMgdGhlIG9ic3RhY2xlIGNoYW5nZWQgP1xuICAgICAgY29uc3QgZGlmZiA9IHRoaXMubGlzdENoYW5nZXMoKVxuICAgICAgaWYgKGRpZmYuY2hhbmdlcykge1xuICAgICAgICBkYXRhLm9ic3RhbGNlRGVmaW5pdGlvbkNoYW5nZWQgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8vIElzIHBsYXllciB0YWtpbmcgZGFtYWdlXG4gICAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhc0RhbWFnZSAmJiB0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2s/LmlzRmFpbHVyZSkge1xuICAgICAgICBkYXRhLnBsYXllckRhbWFnZVRha2VuID0gdHJ1ZVxuICAgICAgICBkYXRhLmlubGluZURhbWFnZVRha2VuUm9sbCA9IGNyZWF0ZUlubGluZVJvbGwoXG4gICAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbFxuICAgICAgICApPy5vdXRlckhUTUxcbiAgICAgICAgLy8gaWYgKGRhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuIDwgMClcbiAgICAgICAgLy8gICBkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA9IDBcblxuICAgICAgICBpZiAoZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPT09IDApIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuZGFtYWdlVGFrZW4gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWW91VGFrZU5vRGFtYWdlJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuZGFtYWdlVGFrZW4gPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgJ0NvQzcuWW91VGFrZVNvbWVEYW1hZ2UnLFxuICAgICAgICAgICAgeyBhbW91bnQ6IGRhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuIH1cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgbmFtZTpcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub3RhbERhbWFnZScpICtcbiAgICAgICAgICAgIGAgOiR7ZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW59YFxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNBY3Rpb25Db3N0ICYmXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrPy5pc0ZhaWx1cmVcbiAgICAgICkge1xuICAgICAgICBkYXRhLmFjdGlvbkxvc3QgPSB0cnVlXG4gICAgICAgIGRhdGEuc3RyaW5ncy5hY3Rpb25Mb3N0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LllvdUxvc3RUaW1lJylcbiAgICAgICAgZGF0YS5pbmxpbmVBY3Rpb25Mb3N0Um9sbCA9IGNyZWF0ZUlubGluZVJvbGwoXG4gICAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbFxuICAgICAgICApPy5vdXRlckhUTUxcbiAgICAgIH1cblxuICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYXJkUmVzb2x2ZWQnKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jbG9zZWQpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEubW92ZVBsYXllcikge1xuICAgICAgICBkYXRhLnN0cmluZ3MuZmluYWxPdXRjb21lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1vdmVUb0xvY2F0aW9uJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5maW5hbE91dGNvbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgJ0NvQzcuRG9udE1vdmVUb0xvY2F0aW9uJ1xuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIEdNVXBkYXRlICgpIHtcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdDb0M3OiBHTVVwZGF0ZSBjYWxsZWQgZnJvbSBub24gR00gdXNlcicpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkKSB7XG4gICAgICAvLyBDYXJkIGlzIHJlc29sdmVkLCBjb21wdXRlIGFsbCBmb3JtdWxhcyBhbmQgZGFtYWdlLlxuICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5mYWlsZWREYW1hZ2VSb2xsPy50b3RhbCkge1xuICAgICAgICBjb25zdCB0b3RhbERhbWFnZSA9IHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGwudG90YWxcbiAgICAgICAgY29uc3QgYXJtb3JWYWx1ZSA9IHRoaXMuZGF0YS5mbGFncy5pZ25vcmVBcm1vciA/IDAgOiB0aGlzLmRhdGEuYXJtb3JcbiAgICAgICAgaWYgKENvQzdVdGlsaXRpZXMuaXNGb3JtdWxhKGFybW9yVmFsdWUpKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLmFybW9yID0gKFxuICAgICAgICAgICAgYXdhaXQgbmV3IFJvbGwoYXJtb3JWYWx1ZSkucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgKS50b3RhbFxuICAgICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JWYWx1ZSkpKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLmFybW9yID0gTnVtYmVyKGFybW9yVmFsdWUpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gdG90YWxEYW1hZ2UgLSB0aGlzLmRhdGEuYXJtb3JcbiAgICAgICAgICBpZiAodGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPCAwKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA9IDBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5kYXRhLnJlZmxlY3RPYnN0YWxlQ2hhbmdlcykge1xuICAgICAgICB0aGlzLmRhdGEucmVmbGVjdE9ic3RhbGVDaGFuZ2VzID0gdHJ1ZSAvLyBCeSBkZWZhdWx0IHJlZmxlY3QgY2hhbmdlc1xuICAgICAgfVxuXG4gICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEubW92ZVBsYXllcikge1xuICAgICAgICB0aGlzLmRhdGEubW92ZVBsYXllciA9XG4gICAgICAgICAgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgfHwgdGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCkgJiZcbiAgICAgICAgICAhdGhpcy5kYXRhLnN0YXRlcy5mYWlsZWRDb25zZXF1ZW5jZXNSb2xsZWRcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuYmFycmllciAmJlxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzICYmXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGw/LnRvdGFsXG4gICAgICApIHtcbiAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5kYXRhLnRvdGFsT2JzdGFjbGVEYW1hZ2UpIHtcbiAgICAgICAgICB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZSA9XG4gICAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwudG90YWxcbiAgICAgICAgfVxuICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEuZmxhZ3Mub2JzdGFjbGVEZXN0b3llZCkge1xuICAgICAgICAgIHRoaXMuZGF0YS5mbGFncy5vYnN0YWNsZURlc3RveWVkID1cbiAgICAgICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5IaXRQb2ludHMgLSB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZSA8PSAwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jbG9zZWQpIHtcbiAgICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbkFycmF5ID0gZHVwbGljYXRlKFxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uQXJyYXlcbiAgICAgIClcbiAgICAgIHRoaXMuZGF0YS5FRUNfQUNUSU9OID0geyBkZXRhY2hEYXRhOiB0cnVlIH1cbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGxvY2FsQ29tcHV0ZSAoKSB7fVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgYXNzaWduT2JqZWN0cyAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrICYmXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjaz8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjayA9IENvQzdDaGVjay5mcm9tRGF0YSh0aGlzLmRhdGEub2JqZWN0cy5jaGVjaylcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cz8ub2JzdGFjbGVEYW1hZ2VSb2xsICYmXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGw/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0J1xuICAgICkge1xuICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsID0gUm9sbC5mcm9tRGF0YShcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsXG4gICAgICApXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5mYWlsZWREYW1hZ2VSb2xsICYmXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcbiAgICApIHtcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGwgPSBSb2xsLmZyb21EYXRhKFxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsXG4gICAgICApXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5mYWlsZWRBY3Rpb25Sb2xsICYmXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcbiAgICApIHtcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwgPSBSb2xsLmZyb21EYXRhKFxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBpbml0aWFsaXplICgpIHtcbiAgICAvLyBjb25zdCBjaGFzZSA9IGF3YWl0IGZyb21VdWlkKHRoaXMuZGF0YS5jaGFzZVV1aWQpXG4gICAgaWYgKCF0aGlzLmNoYXNlKSByZXR1cm5cbiAgICBpZiAodHlwZW9mIHRoaXMuY2hhc2UuYWN0aXZlUGFydGljaXBhbnREYXRhPy51dWlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEgPT09ICd1bmRlZmluZWQnKSB0aGlzLmRhdGEgPSB7fVxuICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLnN0YXRlcyA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMuZGF0YS5zdGF0ZXMgPSB7fVxuXG4gICAgLy8gY29uc3QgbG9jYXRpb24gPSBjaGFzZS5nZXRMb2NhdGlvbkRhdGEodGhpcy5kYXRhLmxvY2F0aW9uVXVpZClcbiAgICB0aGlzLmRhdGEub2JzdGFjbGUgPSB0aGlzLmxvY2F0aW9uPy5vYnN0YWNsZURldGFpbHMgLy8gRmVlZCB0aGUgb2JzdGFjbGUgZGVmaW5pdGlvblxuICAgIC8vIHRoaXMuZGF0YS5wYXJ0aWNpcGFudERhdGEgPSBjaGFzZS5hY3RpdmVQYXJ0aWNpcGFudERhdGFcbiAgICB0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkID0gdGhpcy5jaGFzZS5hY3RpdmVQYXJ0aWNpcGFudERhdGEudXVpZFxuXG4gICAgaWYgKHRoaXMucGFydGljaXBhbnREYXRhPy5ib251c0RpY2UgPiAwKSB7XG4gICAgICB0aGlzLmRhdGEuYm9udXNEaWNlID0gdGhpcy5wYXJ0aWNpcGFudERhdGEuYm9udXNEaWNlXG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS5mbGFncy5oYXNCb251c0RpY2UgPSB0aGlzLnBhcnRpY2lwYW50Lmhhc0JvbnVzRGljZVxuICAgIH1cblxuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbkFycmF5ID0gZHVwbGljYXRlKFxuICAgICAgdGhpcy5wYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbkFycmF5XG4gICAgKVxuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA9IHRoaXMucGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgPSAwXG4gIH1cblxuICBnZXQgcGFydGljaXBhbnQgKCkge1xuICAgIGlmICghdGhpcy5wYXJ0aWNpcGFudERhdGEpIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyBpZiAoIXRoaXMuX3BhcnRpY2lwYW50KVxuICAgIC8vICAgdGhpcy5fcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMucGFydGljaXBhbnREYXRhKVxuICAgIC8vIHJldHVybiB0aGlzLl9wYXJ0aWNpcGFudFxuICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHRoaXMucGFydGljaXBhbnREYXRhKSAvLyBUTyBSRVNFVFxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50RGF0YSAoKSB7XG4gICAgaWYgKCF0aGlzLmNoYXNlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuY2hhc2UuZ2V0UGFydGljaXBhbnREYXRhKHRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWQpXG4gIH1cblxuICBnZXQgbG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5jaGFzZSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmNoYXNlLmdldExvY2F0aW9uRGF0YSh0aGlzLmRhdGEubG9jYXRpb25VdWlkKVxuICB9XG5cbiAgZ2V0IG9ic3RhY2xlICgpIHtcbiAgICBpZiAoIXRoaXMubG9jYXRpb24pIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5vYnN0YWNsZURldGFpbHNcbiAgfVxuXG4gIGdldCBjaGFzZSAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuY2hhc2VVdWlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKCF0aGlzLl9jaGFzZSkgdGhpcy5fY2hhc2UgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZCh0aGlzLmRhdGEuY2hhc2VVdWlkKVxuICAgIHJldHVybiB0aGlzLl9jaGFzZVxuICB9XG5cbiAgZ2V0IHJvbGwgKCkge1xuICAgIGxldCByb2xsRGF0YVxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50LmFjdG9yICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUpIHtcbiAgICAgIGNvbnN0IGFjdG9yU2tpbGwgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmZpbmQoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWVcbiAgICAgIClcbiAgICAgIGlmICh0eXBlb2YgYWN0b3JTa2lsbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcm9sbERhdGEgPSBhY3RvclNraWxsXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb2xsRGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lLFxuICAgICAgICAgICAgdGhyZXNob2xkOiB0aGlzLmRhdGEuY2hlY2tUaHJlc2hvbGRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJvbGxEYXRhLmFjdG9yID0geyBhY3RvcktleTogdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5pZCB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lICYmIHRoaXMuZGF0YS5jaGVja1RocmVzaG9sZCkge1xuICAgICAgICByb2xsRGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiAndmFsdWUnLFxuICAgICAgICAgIHZhbHVlOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lLFxuICAgICAgICAgICAgdGhyZXNob2xkOiB0aGlzLmRhdGEuY2hlY2tUaHJlc2hvbGRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFjdG9yOiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLnBhcnRpY2lwYW50Lm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJvbGxEYXRhKSB7XG4gICAgICByb2xsRGF0YS5kaWNlTW9kaWZpZXIgPSB0aGlzLmRhdGE/LmJvbnVzRGljZSB8fCAwXG4gICAgICByb2xsRGF0YS5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICByb2xsRGF0YS5kZW55UHVzaCA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIHJvbGxEYXRhIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHZhbGlkRmFpbGVkUm9sbHMgKCkge1xuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHM/LmNoZWNrPy5pc0ZhaWx1cmUpIHJldHVybiBmYWxzZVxuICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlKSB7XG4gICAgICBjb25zdCBkYW1hZ2UgPVxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlfWBcbiAgICAgICAgICA6IHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZVxuICAgICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UpIHJldHVybiBmYWxzZVxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UgJiZcbiAgICAgICAgIVJvbGwudmFsaWRhdGUoZGFtYWdlKSAvLyBWYWxpZGF0ZSBvbmx5IHRha2UgYSBzdHJpbmcsIGlmIGRhbWFnZSBpcyBhIG51bWJlciBjb252ZXJ0IHRvIGEgc3RyaW5nXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNBY3Rpb25Db3N0KSB7XG4gICAgICBjb25zdCBhY3Rpb25Db3N0ID1cbiAgICAgICAgdHlwZW9mIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3R9YFxuICAgICAgICAgIDogdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3RcbiAgICAgIGlmICghdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QpIHJldHVybiBmYWxzZVxuICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ICYmICFSb2xsLnZhbGlkYXRlKGFjdGlvbkNvc3QpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IHdlYXBvbnNPcHRpb25zICgpIHtcbiAgICBjb25zdCB3ZWFwb25zID0gW11cbiAgICB0aGlzLnBhcnRpY2lwYW50LmFjdG9yPy5pdGVtVHlwZXM/LndlYXBvbj8uZm9yRWFjaCh3ID0+IHtcbiAgICAgIGxldCBmb3JtdWxhID0gdy5kYXRhLmRhdGEucmFuZ2Uubm9ybWFsLmRhbWFnZVxuICAgICAgbGV0IGRiID0gdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kYlxuICAgICAgaWYgKGRiID09PSBudWxsIHx8IE51bWJlcihkYikgPT09IDApIHtcbiAgICAgICAgZGIgPSAnJ1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGIgPSBgJHtkYn1gXG4gICAgICB9XG5cbiAgICAgIGlmIChkYiAmJiAhZGIuc3RhcnRzV2l0aCgnLScpKSBkYiA9ICcrJyArIGRiXG4gICAgICBpZiAody5kYXRhLmRhdGEucHJvcGVydGllcy5hZGRiKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiXG4gICAgICBpZiAody5kYXRhLmRhdGEucHJvcGVydGllcy5haGJkKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiICsgJy8yJ1xuICAgICAgd2VhcG9ucy5wdXNoKHtcbiAgICAgICAgbmFtZTogYCR7dy5kYXRhLm5hbWV9ICgke2Zvcm11bGF9KWAsXG4gICAgICAgIGRhbWFnZTogZm9ybXVsYSxcbiAgICAgICAgdXVpZDogdy51dWlkXG4gICAgICB9KVxuICAgIH0pXG4gICAgd2VhcG9ucy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIGlmIChcbiAgICAgICF3ZWFwb25zLmZpbmQodyA9PlxuICAgICAgICB3Lm5hbWVcbiAgICAgICAgICAudG9VcHBlckNhc2UoKVxuICAgICAgICAgIC5zdGFydHNXaXRoKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYXJtZWRXZWFwb25OYW1lJyk/LnRvVXBwZXJDYXNlKClcbiAgICAgICAgICApXG4gICAgICApXG4gICAgKSB7XG4gICAgICBsZXQgZGIgPSAnJ1xuICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IpIHtcbiAgICAgICAgZGIgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRiXG4gICAgICAgIGlmIChkYiAmJiAhZGIuc3RhcnRzV2l0aCgnLScpKSBkYiA9ICcrJyArIGRiXG4gICAgICAgIGlmIChkYiA9PT0gbnVsbCB8fCBOdW1iZXIoZGIpID09PSAwKSBkYiA9ICcnXG4gICAgICB9XG5cbiAgICAgIHdlYXBvbnMudW5zaGlmdCh7XG4gICAgICAgIG5hbWU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFybWVkV2VhcG9uTmFtZScpfSAoMUQzJHtkYn0pYCxcbiAgICAgICAgZGFtYWdlOiBgMUQzJHtkYn1gLFxuICAgICAgICB1dWlkOiAndW5hcm1lZCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgd2VhcG9ucy5wdXNoKHtcbiAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PdGhlcicpLFxuICAgICAgZGFtYWdlOiB0aGlzLmRhdGE/LmN1c3RvbVdlYXBvbkRhbWFnZSB8fCBudWxsLFxuICAgICAgdXVpZDogMFxuICAgIH0pXG4gICAgcmV0dXJuIHdlYXBvbnNcbiAgfVxuXG4gIGdldCB1c2VkV2VhcG9uICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YT8ud2VhcG9uQ2hvaWNlKSB7XG4gICAgICBpZiAoIXRoaXMud2VhcG9uc09wdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICghdGhpcy5kYXRhKSB0aGlzLmRhdGEgPSB7fSAvLyB1c2VsZXNzICEhIVxuICAgICAgdGhpcy5kYXRhLndlYXBvbkNob2ljZSA9IHRoaXMud2VhcG9uc09wdGlvbnNbMF0udXVpZFxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEud2VhcG9uQ2hvaWNlKSB7XG4gICAgICBjb25zdCB3ZWFwb24gPSB0aGlzLndlYXBvbnNPcHRpb25zLmZpbmQoXG4gICAgICAgIGUgPT4gZS51dWlkID09PSB0aGlzLmRhdGEud2VhcG9uQ2hvaWNlXG4gICAgICApXG4gICAgICBpZiAod2VhcG9uKSByZXR1cm4gd2VhcG9uXG4gICAgfVxuICB9XG5cbiAgZ2V0IGluZmxpY3RlZERhbWFnZUZvcm11bGEgKCkge1xuICAgIGlmICh0aGlzLnVzZWRXZWFwb24pIHtcbiAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMudXNlZFdlYXBvblxuICAgICAgaWYgKHdlYXBvbiAmJiB3ZWFwb24uZGFtYWdlICYmIFJvbGwudmFsaWRhdGUod2VhcG9uLmRhbWFnZSkpIHtcbiAgICAgICAgcmV0dXJuIHdlYXBvbi5kYW1hZ2VcbiAgICAgIH1cbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHZhbGlkT2JzdGFjbGVEYW1hZ2UgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMgJiZcbiAgICAgICFpc05hTihOdW1iZXIodGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cykpICYmXG4gICAgICBOdW1iZXIodGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cykgPiAwICYmXG4gICAgICB0aGlzLmluZmxpY3RlZERhbWFnZUZvcm11bGFcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHN0cmluZ3MgKCkge1xuICAgIGNvbnN0IHN0cmluZ3MgPSB7fVxuICAgIHN0cmluZ3MuZGFtYWdlUm9sbFJlcXVlc3QgPSB0aGlzLnVzZWRXZWFwb24ubmFtZVxuXG4gICAgcmV0dXJuIHN0cmluZ3NcbiAgfVxuXG4gIC8vIEFjdGlvbnMgOlxuICBhc3luYyB2YWxpZGF0ZUNhcmQgKG9wdGlvbnMpIHtcbiAgICBsZXQgbG9hY3Rpb25DaGFuZ2VkXG4gICAgbGV0IHBhcnRpY2lwYW50Q2hhZ2VkID0gZmFsc2VcbiAgICBjb25zdCBvYnN0YWNsZVVwZGF0ZSA9IHt9XG4gICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzID0ge31cbiAgICBjb25zdCBwYXJ0aWNpcGFudFVwZGF0ZSA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5mbGFncy5vYnN0YWNsZURlc3RveWVkKSB7XG4gICAgICBsb2FjdGlvbkNoYW5nZWQgPSB0cnVlXG4gICAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZSA9IGZhbHNlXG4gICAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZURldGFpbHMuaGF6YXJkID0gZmFsc2VcbiAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyID0gZmFsc2VcbiAgICB9XG5cbiAgICBjb25zdCBkaWZmID0gdGhpcy5saXN0Q2hhbmdlcygpXG4gICAgaWYgKGRpZmYuY2hhbmdlcykge1xuICAgICAgaWYgKHRoaXMuZGF0YS5yZWZsZWN0T2JzdGFsZUNoYW5nZXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGlmZi5vYnN0YWNsZSkpIHtcbiAgICAgICAgICBpZiAoa2V5ICE9PSAndHlwZScpIHtcbiAgICAgICAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlsc1t2YWx1ZS5rZXldID0gdmFsdWUubmV3XG4gICAgICAgICAgICBsb2FjdGlvbkNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlID4gMCAmJiB0aGlzLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSB7XG4gICAgICBsZXQgcmVtYWluaW5nSHAgPSB0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzXG4gICAgICByZW1haW5pbmdIcCAtPSB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZVxuICAgICAgaWYgKHJlbWFpbmluZ0hwIDwgMCkgcmVtYWluaW5nSHAgPSAwXG4gICAgICBpZiAodGhpcy5vYnN0YWNsZS5IaXRQb2ludHMgIT09IHJlbWFpbmluZ0hwKSB7XG4gICAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlscy5IaXRQb2ludHMgPSByZW1haW5pbmdIcFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzID0gcmVtYWluaW5nSHBcbiAgICAgICAgbG9hY3Rpb25DaGFuZ2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA+IDApIHtcbiAgICAgIHBhcnRpY2lwYW50Q2hhZ2VkID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kZWFsRGFtYWdlKFxuICAgICAgICAgIHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuLFxuICAgICAgICAgIHsgaWdub3JlQXJtb3I6IHRydWUgfVxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5ocCA9IHRoaXMucGFydGljaXBhbnREYXRhLmhwXG4gICAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmhwIC09IHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuXG4gICAgICAgIGlmIChwYXJ0aWNpcGFudFVwZGF0ZS5ocCA8IDApIHBhcnRpY2lwYW50VXBkYXRlLmhwID0gMFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0ID4gMCkge1xuICAgICAgcGFydGljaXBhbnRDaGFnZWQgPSB0cnVlXG4gICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID1cbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudERhdGEuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgICAgcGFydGljaXBhbnRVcGRhdGUuY3VycmVudE1vdmVtZW50QWN0aW9ucyAtPSB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID0gdHJ1ZSAvLyBCb251cyBkaWNlIGF3YXJkZWQgZHVyaW5nIGZsb3cgYXJlIGJlaW5nIGNvbnN1bWVkXG5cbiAgICBpZiAodGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UpIHtcbiAgICAgIHBhcnRpY2lwYW50Q2hhZ2VkID0gdHJ1ZVxuICAgICAgcGFydGljaXBhbnRVcGRhdGUuYm9udXNEaWNlID0gMFxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoXG4gICAgICAgICFpc05hTih0aGlzLmRhdGEuYm9udXNEaWNlKSAmJlxuICAgICAgICB0aGlzLmRhdGEuYm9udXNEaWNlICE9PSB0aGlzLnBhcnRpY2lwYW50LmJvbnVzRGljZVxuICAgICAgKSB7XG4gICAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmJvbnVzRGljZSA9IHRoaXMuZGF0YS5ib251c0RpY2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLm1vdmVQbGF5ZXIpIHtcbiAgICAgIGxldCB0YXJnZXRMb2NhdGlvblxuICAgICAgaWYgKHRoaXMuZGF0YS5mb3J3YXJkKSB7XG4gICAgICAgIHRhcmdldExvY2F0aW9uID0gdGhpcy5sb2NhdGlvblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGFyZ2V0TG9jYXRpb24gPSB0aGlzLmNoYXNlLmdldExvY2F0aW9uU2hpZnQodGhpcy5sb2NhdGlvbi51dWlkLCB7XG4gICAgICAgICAgc2tpcDogLTFcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRhcmdldExvY2F0aW9uLnV1aWQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5jaGFzZS5tb3ZlUGFydGljaXBhbnRUb0xvY2F0aW9uKFxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnREYXRhLnV1aWQsXG4gICAgICAgICAgdGFyZ2V0TG9jYXRpb24udXVpZCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBzY3JvbGxUb0xvY2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgYWN0aXZhdGVMb2NhdGlvbjogZmFsc2UsXG4gICAgICAgICAgICByZW5kZXI6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxvYWN0aW9uQ2hhbmdlZCkge1xuICAgICAgYXdhaXQgdGhpcy5jaGFzZS51cGRhdGVMb2NhdGlvbih0aGlzLmxvY2F0aW9uLnV1aWQsIG9ic3RhY2xlVXBkYXRlLCB7XG4gICAgICAgIHJlbmRlcjogZmFsc2VcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmIChwYXJ0aWNpcGFudENoYWdlZCkge1xuICAgICAgYXdhaXQgdGhpcy5jaGFzZS51cGRhdGVQYXJ0aWNpcGFudChcbiAgICAgICAgdGhpcy5wYXJ0aWNpcGFudERhdGEudXVpZCxcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUsXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgfVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2xvc2VkID0gdHJ1ZVxuICAgIGF3YWl0IHRoaXMuY2hhc2UuYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKCkgLy8gUmVuZGVyIHdpbGwgYmUgZG9uZSB0aGVyZSAhXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGRlZmluZU9ic3RhY2xlIChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuc3RhdGVzKSB0aGlzLmRhdGEuc3RhdGVzID0ge31cbiAgICB0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGVmaW5lZCA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgdHJ5VG9OZWdvdGlhdGVPYnN0YWNsZSAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSB0cnVlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IHRydWVcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB0cnlUb0JyZWFrRG93bk9ic3RhY2xlIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5icmVha09yTmVnb3RpYXRlRGVmaW5lZCA9IHRydWVcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGNhbmNlbE9ic3RhY2xlRGVmaW5pdGlvbiAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEZWZpbmVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyBjYW5jZWxCcmVha09yUGFzc0Nob2ljZSAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cykgcmV0dXJuIHRoaXMuY2FuY2VsT2JzdGFjbGVEZWZpbml0aW9uKClcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvQnJlYWsgPSBmYWxzZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyByZXF1ZXN0Um9sbCAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMucGxheWVyQWN0aW9uRGVmaW5lZCA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgdGFrZUNhdXRpb3VzQXBwcm9hY2ggKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2gpIHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2ggPSAwXG4gICAgdGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCArPSAxXG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSArPSAxXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSkge1xuICAgICAgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSB0cnVlXG4gICAgfVxuICAgIGlmICghdGhpcy5kYXRhLmZsYWdzLmhhc0JvbnVzRGljZSkge1xuICAgICAgdGhpcy5kYXRhLmZsYWdzLmhhc0JvbnVzRGljZSA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbiA8PSB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0KSB7IC8vIEFsbCBtb3YgYWN0aW9uIGhhdmUgYmVlbiB1c2VkIHRvIHRha2UgY3VhdGlvdXMgYXBwcm9hY2guXG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9IGZhbHNlIC8vIERvIG5vdCBjb25zdW1lIHRoZSBib251cyBkaWNlLlxuICAgICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgICB0aGlzLmRhdGEubW92ZVBsYXllciA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyByb2xsU2tpbGxDaGVjayAob3B0aW9ucykge1xuICAgIGNvbnN0IHRhcmdldCA9IG9wdGlvbnMuZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkaXNhYmxlZCcpKSByZXR1cm5cbiAgICB0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnKVxuICAgIGlmICghdGhpcy5yb2xsKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RoaW5nVG9Sb2xsJykpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEub2JqZWN0cykgdGhpcy5kYXRhLm9iamVjdHMgPSB7fVxuICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrID0gQ29DN0NoZWNrLmNyZWF0ZUZyb21BY3RvclJvbGxEYXRhKHRoaXMucm9sbClcbiAgICBpZiAoIXRoaXMuZGF0YS5vYmplY3RzLmNoZWNrKSByZXR1cm4gZmFsc2VcbiAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5kZW55UHVzaCA9IHRydWUgLy8gT2JzdGFjbGUgY2hlY2sgY2FuJ3QgYmUgcHVzaGVkXG4gICAgYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suX3BlcmZvcm0oeyBmb3JjZURTTjogdHJ1ZSB9KVxuICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gMVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2hlY2tSb2xsZWQgPSB0cnVlXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJylcbiAgICBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2sucGFzc2VkKSB7XG4gICAgICB0aGlzLmRhdGEubW92ZVBsYXllciA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5hcm1vciA9PT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvcikge1xuICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPVxuICAgICAgICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IudmFsdWUgfHwgMFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB1c2VMdWNrIChvcHRpb25zKSB7XG4gICAgYXdhaXQgQ29DN0NoZWNrLmFsdGVyKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLCAndXNlTHVjaycsIHtcbiAgICAgIHRhcmdldDogb3B0aW9ucy5ldmVudC5jdXJyZW50VGFyZ2V0LFxuICAgICAgdXBkYXRlOiBmYWxzZVxuICAgIH0pXG4gICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLnBhc3NlZCkge1xuICAgICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgICB0aGlzLmRhdGEubW92ZVBsYXllciA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gMVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgcm9sbEZhaWxDb25zZXF1ZW5jZXMgKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5vYmplY3RzKSB0aGlzLmRhdGEub2JqZWN0cyA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNEYW1hZ2UgJiYgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2s/LmlzRmFpbHVyZSkge1xuICAgICAgY29uc3QgZGFtYWdlID1cbiAgICAgICAgdHlwZW9mIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZSA9PT0gJ251bWJlcidcbiAgICAgICAgICA/IGAke3RoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZX1gXG4gICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2VcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGwgPSBuZXcgUm9sbChkYW1hZ2UpXG4gICAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2s/LmlzRmFpbHVyZVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IGFjdGlvbkNvc3QgPVxuICAgICAgICAgIHR5cGVvZiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdCA9PT0gJ251bWJlcidcbiAgICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3R9YFxuICAgICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdFxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsID0gbmV3IFJvbGwoYWN0aW9uQ29zdClcbiAgICAgICAgYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gKHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwudG90YWwgLSAxKSAvLyAxIGFjdGlvbiBhbHJlYWR5IHNwZW5kIGZvciBza2lsbCBjaGVja1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuZmFpbGVkQ29uc2VxdWVuY2VzUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyBhc2tSb2xsT2JzdGFjbGVEYW1hZ2UgKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnBsYXllckFjdGlvbkRlZmluZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHJvbGxPYnN0YWNsZURhbWFnZSAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMpIHRoaXMuZGF0YS5vYmplY3RzID0ge31cbiAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwgPSBuZXcgUm9sbCh0aGlzLnVzZWRXZWFwb24/LmRhbWFnZSlcbiAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbClcbiAgICB0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGFtYWdlUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgKz0gMVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICAvLyBMaXN0IGFsbCBjaGFuZ2VzXG4gIGxpc3RDaGFuZ2VzICh2YWxpZGF0ZSA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGlmZiA9IHtcbiAgICAgIG9ic3RhY2xlOiB7fSxcbiAgICAgIHBsYXllcjoge30sXG4gICAgICBjaGFuZ2VzOiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBuYW1lcyA9IHtcbiAgICAgIGJhcnJpZXI6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UeXBlJyksXG4gICAgICBoYXphcmQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UeXBlJyksXG4gICAgICBoYXNIaXRQb2ludHM6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5CcmVha2FibGUnKSxcbiAgICAgIEhpdFBvaW50czogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhpdFBvaW50cycpLFxuICAgICAgaGFzQWN0aW9uQ29zdDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdGlvbkNvc3QnKSxcbiAgICAgIGZhaWxlZEFjdGlvbkNvc3Q6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3Rpb25Db3N0JyksXG4gICAgICBoYXNEYW1hZ2U6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaWdodEJhY2snKSxcbiAgICAgIGZhaWxlZENoZWNrRGFtYWdlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uRGFtYWdlJyksXG4gICAgICBjaGVja05hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGVjaycpLFxuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5hbWUnKVxuICAgIH1cblxuICAgIGlmICh2YWxpZGF0ZSAmJiAhdGhpcy5kYXRhLnZhbGlkYXRpb24pIHtcbiAgICAgIHRoaXMuZGF0YS52YWxpZGF0aW9uID0ge31cbiAgICB9XG5cbiAgICBjb25zdCBuZXdPYnN0YWNsZSA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdChcbiAgICAgIHRoaXMub2JzdGFjbGUsXG4gICAgICB0aGlzLmRhdGEub2JzdGFjbGVcbiAgICApXG4gICAgLy8gY29uc3Qgb2xkT2JzdGFjbGUgPSBmb3VuZHJ5LnV0aWxzLmRpZmZPYmplY3QodGhpcy5kYXRhLm9ic3RhY2xlLCB0aGlzLm9ic3RhY2xlKVxuXG4gICAgZm9yIChjb25zdCBba2V5XSBvZiBPYmplY3QuZW50cmllcyhuZXdPYnN0YWNsZSkpIHtcbiAgICAgIC8vIGlmICgnYmFycmllcicgPT0ga2V5IHx8ICdoYXphcmQnID09IGtleSlcbiAgICAgIC8vIHtcbiAgICAgIC8vICAgZGlmZi5jaGFuZ2VzID0gdHJ1ZVxuICAgICAgLy8gICBkaWZmLm9ic3RhY2xlLnR5cGUgPSB7XG4gICAgICAvLyAgICAgb2xkOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAvLyAgICAgICB0aGlzLm9ic3RhY2xlLmJhcnJpZXIgPyAnQ29DNy5CYXJyaWVyJyA6ICdDb0M3LkhhemFyZCdcbiAgICAgIC8vICAgICApLFxuICAgICAgLy8gICAgIG5ldzogZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgLy8gICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmJhcnJpZXIgPyAnQ29DNy5CYXJyaWVyJyA6ICdDb0M3LkhhemFyZCdcbiAgICAgIC8vICAgICApLFxuICAgICAgLy8gICAgIGtleTogJ3R5cGUnLFxuICAgICAgLy8gICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UeXBlJylcbiAgICAgIC8vICAgfVxuICAgICAgLy8gICBpZiAodmFsaWRhdGUpIHtcbiAgICAgIC8vICAgICB0aGlzLmRhdGEudmFsaWRhdGlvbltrZXldID0gdHJ1ZVxuICAgICAgLy8gICAgIHRoaXMuZGF0YS52YWxpZGF0aW9uLnR5cGUgPSB0cnVlXG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH1cbiAgICAgIC8vIGVsc2VcbiAgICAgIC8vIHtcbiAgICAgIGlmIChcbiAgICAgICAgIShcbiAgICAgICAgICAobmV3T2JzdGFjbGVba2V5XSA9PT0gJycgJiYgdGhpcy5vYnN0YWNsZVtrZXldID09PSBudWxsKSB8fFxuICAgICAgICAgICghaXNOYU4oTnVtYmVyKG5ld09ic3RhY2xlW2tleV0pKSAmJlxuICAgICAgICAgICAgTnVtYmVyKG5ld09ic3RhY2xlW2tleV0pID09PSB0aGlzLm9ic3RhY2xlW2tleV0pXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBkaWZmLmNoYW5nZXMgPSB0cnVlXG5cbiAgICAgICAgZGlmZi5vYnN0YWNsZVtrZXldID0ge1xuICAgICAgICAgIG9sZDogdGhpcy5vYnN0YWNsZVtrZXldLFxuICAgICAgICAgIG5ldzogbmV3T2JzdGFjbGVba2V5XSxcbiAgICAgICAgICBuYW1lOiBuYW1lc1trZXldLFxuICAgICAgICAgIGtleVxuICAgICAgICB9XG4gICAgICAgIGlmICh2YWxpZGF0ZSkgdGhpcy5kYXRhLnZhbGlkYXRpb25ba2V5XSA9IHRydWVcbiAgICAgIH1cbiAgICAgIC8vIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZGlmZlxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgY2FudmFzLCBEaWFsb2csIGZvdW5kcnksIGdhbWUsIG1lcmdlT2JqZWN0LCBQSVhJLCBUb2tlbiwgVG9rZW5Eb2N1bWVudCwgdWkgKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ2hhc2VPYnN0YWNsZUNhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgX3BhcnRpY2lwYW50LCBzb3J0QnlSb2xlQW5kRGV4IH0gZnJvbSAnLi9wYXJ0aWNpcGFudC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFzZSBleHRlbmRzIENvQzdJdGVtIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9ydW5uaW5nLXNvbGlkLnN2ZydcbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0XG4gIH1cblxuICAvLyBIYW5kbGUgcGFydGljaXBhbnRzXG4gIGdldCBwYXJ0aWNpcGFudHMgKCkge1xuICAgIGNvbnN0IHBMaXN0ID0gW11cbiAgICBjb25zdCBwcmV5cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgLmZpbHRlcihwID0+ICFwLmNoYXNlcilcbiAgICAgIC5tYXAocCA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHApXG4gICAgICB9KVxuICAgIGNvbnN0IGNoYXNlcnMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgIC5maWx0ZXIocCA9PiBwLmNoYXNlcilcbiAgICAgIC5tYXAocCA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHApXG4gICAgICB9KVxuICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgLy8gcC5pbmRleCA9IHBMaXN0Lmxlbmd0aCAtIDFcbiAgICAgIHAuYXNzaXN0ID0gW11cbiAgICAgIGlmIChwLmNoYXNlcikge1xuICAgICAgICBwLmFzc2lzdCA9IGNoYXNlcnNcbiAgICAgICAgICAuZmlsdGVyKGMgPT4gYy51dWlkICE9PSBwLnV1aWQgJiYgIWMuaGFzTWF4Qm9udXNEaWNlKVxuICAgICAgICAgIC5tYXAoYyA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBjLnV1aWQsIG5hbWU6IGMubmFtZSB9XG4gICAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAuYXNzaXN0ID0gcHJleXNcbiAgICAgICAgICAuZmlsdGVyKGMgPT4gYy51dWlkICE9PSBwLnV1aWQgJiYgIWMuaGFzTWF4Qm9udXNEaWNlKVxuICAgICAgICAgIC5tYXAoYyA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBjLnV1aWQsIG5hbWU6IGMubmFtZSB9XG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcnRpY3BhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHApXG4gICAgICAvLyBwYXJ0aWNwYW50LmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKCBwYXJ0aWNwYW50LnV1aWQpIC8vIFJlY3Vyc2l2aXR5XG4gICAgICBwTGlzdC5wdXNoKHBhcnRpY3BhbnQpXG4gICAgfSlcbiAgICByZXR1cm4gcExpc3RcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudHNPYmplY3QgKCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBwLmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHAudXVpZClcbiAgICB9KVxuICAgIHJldHVybiBwYXJ0aWNpcGFudHNcbiAgfVxuXG4gIGdldCBhY3RpdmVQYXJ0aWNpcGFudERhdGEgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IHAuYWN0aXZlKVxuICB9XG5cbiAgZ2V0IGFjdGl2ZUFjdG9yICgpIHtcbiAgICBjb25zdCBwID0gdGhpcy5hY3RpdmVQYXJ0aWNpcGFudERhdGFcbiAgICBpZiAoIXApIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAocC5kb2NVdWlkKSB7XG4gICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkocC5kb2NVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgcGFydGljaXBhbnRzQnlBZGp1c3RlZE1vdiAoKSB7XG4gICAgY29uc3QgcExpc3QgPSB0aGlzLmFjdHVhbFBhcnRpY2lwYW50cy5zb3J0KFxuICAgICAgKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92XG4gICAgKVxuICAgIHBMaXN0LmZvckVhY2gocCA9PiB7XG4gICAgICBwLmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHAudXVpZClcbiAgICB9KVxuICAgIHJldHVybiBwTGlzdFxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZSAoKSB7XG4gICAgY29uc3QgcExpc3QgPSB0aGlzLmFjdHVhbFBhcnRpY2lwYW50cy5zb3J0KFxuICAgICAgKGEsIGIpID0+IGIuaW5pdGlhdGl2ZSAtIGEuaW5pdGlhdGl2ZVxuICAgIClcbiAgICBwTGlzdC5mb3JFYWNoKHAgPT4ge1xuICAgICAgcC5sb2NhdGlvbiA9IHRoaXMuZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwLnV1aWQpXG4gICAgfSlcbiAgICByZXR1cm4gcExpc3RcbiAgfVxuXG4gIGdldCBwcmV5cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmZpbHRlcihwID0+ICFwLmlzQ2hhc2VyICYmIHAuaXNWYWxpZCkgfHwgW11cbiAgfVxuXG4gIGdldCBjaGFzZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gcC5pc0NoYXNlciAmJiBwLmlzVmFsaWQpIHx8IFtdXG4gIH1cblxuICBnZXQgYWxsSGF2ZVZhbGlkTW92ICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZXZlcnkoZSA9PiBlLmhhc1ZhbGlkTW92KVxuICB9XG5cbiAgZ2V0IGFsbEhhdmVTcGVlZFJvbGwgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5ldmVyeShwID0+IHAuc3BlZWRDaGVjaz8ucm9sbGVkKVxuICB9XG5cbiAgZ2V0UGFydGljaXBhbnRMb2NhdGlvbiAocGFydGljaXBhbnRVdWlkKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5sb2NhdGlvbnM/Lmxpc3Q/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMubG9jYXRpb25zXG5cbiAgICBjb25zdCBsb2NhdGlvbiA9IGxvY2F0aW9ucy5maW5kKGwgPT4ge1xuICAgICAgY29uc3QgbHAgPSBsLnBhcnRpY2lwYW50cz8uZmluZChwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkKVxuICAgICAgcmV0dXJuICEhbHBcbiAgICB9KVxuICAgIGlmIChsb2NhdGlvbikge1xuICAgICAgcmV0dXJuIGxvY2F0aW9uXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldFBhcnRpY2lwYW50RGF0YSAocGFydGljaXBhbnRVdWlkKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50KSByZXR1cm4gZm91bmRyeS51dGlscy5kdXBsaWNhdGUocGFydGljaXBhbnQpIC8vIFRPRE8gOiBjaGVjayBpZiB3ZSBuZWVkIHRvIGR1cGxpY2F0ZVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldFBhcnRpY2lwYW50IChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudERhdGEgPSB0aGlzLmdldFBhcnRpY2lwYW50RGF0YShwYXJ0aWNpcGFudFV1aWQpXG4gICAgaWYgKHBhcnRpY2lwYW50RGF0YSkgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocGFydGljaXBhbnREYXRhKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBuZXh0QWN0aXZlUGFydGljaXBhbnQgKCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzQnlJbml0aWF0aXZlLmZpbmQoXG4gICAgICBwID0+IHAuZGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gMFxuICAgIClcbiAgfVxuXG4gIGdldCBzbG93ZXN0UHJleSAoKSB7XG4gICAgY29uc3QgcHJleXMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgLnNvcnQoKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92KVxuICAgICAgPy5maWx0ZXIocCA9PiBwLmlzUHJleSlcbiAgICBpZiAocHJleXMubGVuZ3RoID4gMCkgcmV0dXJuIHByZXlzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGZhc3Rlc3RDaGFzZXIgKCkge1xuICAgIGNvbnN0IGNoYXNlcnMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgLnNvcnQoKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92KVxuICAgICAgPy5maWx0ZXIocCA9PiBwLmlzQ2hhc2VyKVxuICAgIGlmIChjaGFzZXJzLmxlbmd0aCA+IDApIHJldHVybiBjaGFzZXJzLnNsaWNlKC0xKS5wb3AoKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBhY3R1YWxQYXJ0aWNpcGFudHMgKCkge1xuICAgIGNvbnN0IHNsb3dlc3RQcmV5ID0gdGhpcy5zbG93ZXN0UHJleVxuICAgIGNvbnN0IGZhc3Rlc3RDaGFzZXIgPSB0aGlzLmZhc3Rlc3RDaGFzZXJcbiAgICBsZXQgcExpc3QgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgIGlmICghdGhpcy5zeXN0ZW0uaW5jbHVkZUxhdGVjb21lcnMgJiYgc2xvd2VzdFByZXkpIHtcbiAgICAgIHBMaXN0ID0gcExpc3QuZmlsdGVyKHAgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHAuaXNQcmV5IHx8IChwLmlzQ2hhc2VyICYmIHAuYWRqdXN0ZWRNb3YgPj0gc2xvd2VzdFByZXkuYWRqdXN0ZWRNb3YpXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbmNsdWRlRXNjYXBlZCAmJiBmYXN0ZXN0Q2hhc2VyKSB7XG4gICAgICBwTGlzdCA9IHBMaXN0LmZpbHRlcihwID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBwLmlzQ2hhc2VyIHx8IChwLmlzUHJleSAmJiBwLmFkanVzdGVkTW92IDw9IGZhc3Rlc3RDaGFzZXIuYWRqdXN0ZWRNb3YpXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHBMaXN0XG4gIH1cblxuICBnZXQgc2xvd2VzdFBhcnRpY2lwYW50ICgpIHtcbiAgICBjb25zdCBwTGlzdCA9IHRoaXMucGFydGljaXBhbnRzQnlBZGp1c3RlZE1vdlxuICAgIGlmIChwTGlzdC5sZW5ndGggPiAwKSByZXR1cm4gcExpc3RbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBhc3luYyB1cGRhdGVQYXJ0aWNpcGFudHMgKGxpc3QsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gdGhpcy5jbGVhblBhcnRpY2lwYW50TGlzdChsaXN0KVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUGFydGljaXBhbnQgKHBhcnRpY2lhbnRVdWlkLCB1cGRhdGVEYXRhLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgIGNvbnN0IHVwZGF0ZSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHVwZGF0ZURhdGEpXG4gICAgY29uc3QgcGFydGljaXBhbnRJbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50SW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHVwZGF0ZS51dWlkKSBkZWxldGUgdXBkYXRlLnV1aWRcbiAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHBhcnRpY2lwYW50c1twYXJ0aWNpcGFudEluZGV4XSwgdXBkYXRlLCB7XG4gICAgICBvdmVyd3JpdGU6IHRydWVcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGNsZWFuUGFydGljaXBhbnRMaXN0IChsaXN0KSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGxpc3QgfHwgZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgIGxpc3QuZm9yRWFjaChwID0+IHtcbiAgICAgIGxldCBkYXRhXG4gICAgICBpZiAocC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnX3BhcnRpY2lwYW50Jykge1xuICAgICAgICBkYXRhID0gcC5kYXRhXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0gcFxuICAgICAgfVxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRJbmRleChwYXJ0aWNpcGFudHNEYXRhLCBkYXRhLnV1aWQpXG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGEucHVzaChkYXRhKVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhcnRpY2lwYW50RGF0YU1pc3NpbmcnKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGFbaW5kZXhdID0gZGF0YVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHBhcnRpY2lwYW50c0RhdGFcbiAgfVxuXG4gIGFzeW5jIGFzc2lzdFBhcnRpY2lwYW50IChcbiAgICBhc3Npc3RhbnRVdWlkLFxuICAgIGJlbmVmaWNpYXJ5VXVpZCxcbiAgICB7IHVzZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsIHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGFzc2lzdGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQoYXNzaXN0YW50VXVpZClcbiAgICBjb25zdCBiZW5lZmljaWFyeSA9IHRoaXMuZ2V0UGFydGljaXBhbnQoYmVuZWZpY2lhcnlVdWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBhc3Npc3RhbnRJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBhc3Npc3RhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgY29uc3QgYmVuZWZpY2lhcnlJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBiZW5lZmljaWFyeVV1aWQgPT09IHAudXVpZFxuICAgIClcblxuICAgIGlmICghYXNzaXN0YW50IHx8ICFiZW5lZmljaWFyeSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGFydGljaXBhbnROb3RGb3VuZCcpKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGlmIChiZW5lZmljaWFyeS5oYXNNYXhCb251c0RpY2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JCZW5lZmljaWFyeUF0TWF4Qm9udXMnLCB7XG4gICAgICAgICAgbmFtZTogYmVuZWZpY2lhcnkubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGlmICh1c2VNb3ZlbWVudEFjdGlvbnMpIHtcbiAgICAgIGlmIChhc3Npc3RhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50Tm90RW5vdWdoTW92ZW1lbnQnLCB7XG4gICAgICAgICAgICBhc3Npc3RhbnRVdWlkLFxuICAgICAgICAgICAgYWN0aW9uczogYXNzaXN0YW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIGFzc2lzdGFudC5hbHRlck1vdmVtZW50QWN0aW9ucygtMSlcbiAgICAgIHBhcnRpY2lwYW50c0RhdGFbYXNzaXN0YW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYXNzaXN0YW50LmRhdGEpXG4gICAgfVxuXG4gICAgYmVuZWZpY2lhcnkuYWRkQm9udXNEaWNlKClcbiAgICBwYXJ0aWNpcGFudHNEYXRhW2JlbmVmaWNpYXJ5SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBiZW5lZmljaWFyeS5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyB0b2dnbGVCb251c0RpY2UgKHBhcnRpY2lwYW50VXVpZCwgZGljZU51bWJlciwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG5cbiAgICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xuICAgICAgICAgIHBhcnRpY2lwYW50VXVpZFxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuICAgIGlmIChwYXJ0aWNpcGFudC5ib251c0RpY2UgPj0gZGljZU51bWJlcikgcGFydGljaXBhbnQucmVtb3ZlQm9udXNEaWNlKClcbiAgICBlbHNlIHBhcnRpY2lwYW50LmFkZEJvbnVzRGljZSgpXG4gICAgcGFydGljaXBhbnRzRGF0YVtwYXJ0aWNpcGFudEluZGV4XSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgcGFydGljaXBhbnQuZGF0YVxuICAgIClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgY2F1dGlvdXNBcHByb2FjaCAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIHsgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcblxuICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50Lmhhc01heEJvbnVzRGljZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvclBhcnRpY2lwYW50QXRNYXhCb251cycsIHtcbiAgICAgICAgICBwYXJ0aWNpcGFudFV1aWRcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodXNlTW92ZW1lbnRBY3Rpb25zKSB7XG4gICAgICBpZiAocGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50Tm90RW5vdWdoTW92ZW1lbnQnLCB7XG4gICAgICAgICAgICBhc3Npc3RhbnRVdWlkOiBwYXJ0aWNpcGFudFV1aWQsXG4gICAgICAgICAgICBhY3Rpb25zOiBwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucygtMSlcbiAgICB9XG4gICAgcGFydGljaXBhbnQuYWRkQm9udXNEaWNlKClcbiAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyBhbHRlclBhcnRpY2lwYW50TW92ZW1lbnRBY3Rpb24gKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICBjb3VudCxcbiAgICB7IHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG5cbiAgICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xuICAgICAgICAgIHBhcnRpY2lwYW50VXVpZFxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuXG4gICAgcGFydGljaXBhbnQuYWx0ZXJNb3ZlbWVudEFjdGlvbnMoY291bnQpXG5cbiAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4gKHtcbiAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcbiAgICByZW5kZXIgPSB0cnVlLFxuICAgIGh0bWwgPSBudWxsXG4gIH0gPSB7fSkge1xuICAgIGNvbnN0IGFjdGl2ZVBhcnRpY2lwYW50ID0gdGhpcy5uZXh0QWN0aXZlUGFydGljaXBhbnRcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbixcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24sXG4gICAgICByZW5kZXIsXG4gICAgICBodG1sXG4gICAgfVxuICAgIGlmICghYWN0aXZlUGFydGljaXBhbnQpIHJldHVybiB0aGlzLmFjdGl2YXRlUGFydGljaXBhbnQodW5kZWZpbmVkLCBvcHRpb25zKVxuICAgIHJldHVybiB0aGlzLmFjdGl2YXRlUGFydGljaXBhbnQoYWN0aXZlUGFydGljaXBhbnQudXVpZCwgb3B0aW9ucylcbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlUGFydGljaXBhbnQgKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgICAgcmVuZGVyID0gdHJ1ZSxcbiAgICAgIGh0bWwgPSBudWxsXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGRhdGFVcGRhdGUgPSB0aGlzLmdldEFjdGl2YXRlUGFydGljaXBhbnRVcGRhdGVEYXRhKHBhcnRpY2lwYW50VXVpZCwge1xuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbixcbiAgICAgIGFjdGl2ZUxvY2F0aW9uOiBhY3RpdmF0ZUxvY2F0aW9uLFxuICAgICAgaHRtbFxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoZGF0YVVwZGF0ZSwgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGdldEFjdGl2YXRlUGFydGljaXBhbnRVcGRhdGVEYXRhIChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgeyBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSwgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsIGh0bWwgPSBudWxsIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBwVXVpZCA9IHBhcnRpY2lwYW50VXVpZFxuICAgIC8vICAgPyBwYXJ0aWNpcGFudFV1aWRcbiAgICAvLyAgIDogdGhpcy5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmVbMF0/LnV1aWRcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhVXBkYXRlID0ge31cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgZGVsZXRlIHAuYWN0aXZlXG4gICAgICBpZiAocFV1aWQgJiYgcFV1aWQgPT09IHAudXVpZCkgcC5hY3RpdmUgPSB0cnVlXG4gICAgfSlcbiAgICBwYXJ0aWNpcGFudHNEYXRhVXBkYXRlWydzeXN0ZW0ucGFydGljaXBhbnRzJ10gPSBwYXJ0aWNpcGFudHNcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50TG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocFV1aWQpXG4gICAgbGV0IGxvY2F0aW9uc0RhdGFVcGRhdGUgPSBudWxsXG4gICAgaWYgKHBhcnRpY2lwYW50TG9jYXRpb24pIHtcbiAgICAgIGlmIChhY3RpdmF0ZUxvY2F0aW9uKSB7XG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGUgPSB0aGlzLmdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhKFxuICAgICAgICAgIHBhcnRpY2lwYW50TG9jYXRpb24udXVpZCxcbiAgICAgICAgICB7IHNjcm9sbFRvTG9jYXRpb24sIGh0bWwgfVxuICAgICAgICApXG4gICAgICB9IGVsc2UgaWYgKHNjcm9sbFRvTG9jYXRpb24pIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZSA9IHt9XG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGVbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay5mcm9tJ10gPVxuICAgICAgICAgIHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvblxuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2sudG8nXSA9XG4gICAgICAgICAgdGhpcy5nZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbihwYXJ0aWNpcGFudExvY2F0aW9uLnV1aWQsIHtcbiAgICAgICAgICAgIGh0bWxcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlID0gdGhpcy5nZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YSh1bmRlZmluZWQsIHtcbiAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvblxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAobG9jYXRpb25zRGF0YVVwZGF0ZSkge1xuICAgICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoXG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGFVcGRhdGUsXG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGVcbiAgICAgIClcbiAgICB9IGVsc2UgcmV0dXJuIHBhcnRpY2lwYW50c0RhdGFVcGRhdGVcbiAgfVxuXG4gIGFjdGl2ZVBhcnRpY2lwYW50T2JzdGFjbGVDaGVjayAoXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHsgbW92ZVBhcnRpY2lwYW50ID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDaGFzZU9ic3RhY2xlQ2FyZCh7XG4gICAgICBjaGFzZVV1aWQ6IHRoaXMudXVpZCxcbiAgICAgIGxvY2F0aW9uVXVpZCxcbiAgICAgIG1vdmVQYXJ0aWNpcGFudCxcbiAgICAgIGZvcndhcmQ6IGxvY2F0aW9uVXVpZCAhPT0gdGhpcy5hY3RpdmVMb2NhdGlvbi51dWlkXG4gICAgfSlcbiAgICBjYXJkLnRvTWVzc2FnZSgpXG5cbiAgICAvLyBjb25zdCB0ZXN0ID0gbmV3IHRlc3RDYXJkKClcbiAgICAvLyB0ZXN0LmluaXRpYWxpemUoe30pXG4gICAgLy8gdGVzdC50b01lc3NhZ2UoKVxuICB9XG5cbiAgLy8gSGFuZGxlIHJvdW5kc1xuXG4gIGFzeW5jIHByb2dyZXNzVG9OZXh0Um91bmQgKHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IHAubW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgICAgcC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHAubW92ZW1lbnRBY3Rpb25cbiAgICAgICAgaWYgKHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyA+IHAubW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgICAgICBwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSBwLm1vdmVtZW50QWN0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgdGhpcy5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oeyByZW5kZXIgfSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbFN0cmluZykge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyhyb2xsU3RyaW5nKVxuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgICA6IFtdXG4gICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnJvbGxVdWlkID09PSByb2xsLnV1aWQpXG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgZGF0YTogcm9sbFN0cmluZyxcbiAgICAgICAgdHlwZTogJ2ludm9rZScsXG4gICAgICAgIG1ldGhvZDogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICBpdGVtOiB0aGlzLnV1aWRcbiAgICAgIH1cbiAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICB9XG4gIH1cblxuICAvLyBoYW5kbGUgbG9jYXRpb25zXG4gIGdldCBsb2NhdGlvbnMgKCkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc3RhcnRlZFxuICAgICAgPyB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgICA6IFtdXG4gICAgICA6IHRoaXMuaW5pdFRyYWNrXG4gICAgdGhpcy5wcm9jZXNzTG9jYXRpb25zKGxvY2F0aW9ucylcbiAgICByZXR1cm4gbG9jYXRpb25zXG4gIH1cblxuICBnZXRMb2NhdGlvbkRhdGEgKGxvY2F0aW9uVXVpZCwgeyBkdXBsaWNhdGVEYXRhID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGVEYXRhXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMubG9jYXRpb25zKVxuICAgICAgOiB0aGlzLmxvY2F0aW9uc1xuICAgIHJldHVybiBsb2NhdGlvbnMuZmluZChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICB9XG5cbiAgcHJvY2Vzc0xvY2F0aW9ucyAobG9jYXRpb25zKSB7XG4gICAgaWYgKCFsb2NhdGlvbnM/Lmxlbmd0aCkgcmV0dXJuXG4gICAgbG9jYXRpb25zWzBdLmZpcnN0ID0gdHJ1ZVxuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxvY2F0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGNvbnN0IGNsYXNzZXMgPSBbXVxuICAgICAgY29uc3QgbG9jYXRpb24gPSBsb2NhdGlvbnNbaW5kZXhdXG4gICAgICBpZiAoIWxvY2F0aW9uLm5hbWUpIGNsYXNzZXMucHVzaCgnZW1wdHknKVxuICAgICAgaWYgKGxvY2F0aW9uLmFjdGl2ZSkgY2xhc3Nlcy5wdXNoKCdhY3RpdmUnKVxuICAgICAgaWYgKGxvY2F0aW9uLmluaXQgJiYgIXRoaXMuc3RhcnRlZCkgY2xhc3Nlcy5wdXNoKCdpbml0JylcbiAgICAgIGxvY2F0aW9uLmNzc0NsYXNzZXMgPSBjbGFzc2VzLmpvaW4oJyAnKVxuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID4gMSkgbG9jYXRpb25zW2xvY2F0aW9ucy5sZW5ndGggLSAxXS5sYXN0ID0gdHJ1ZVxuXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBpZiAobC5wYXJ0aWNpcGFudHMgJiYgbC5wYXJ0aWNpcGFudHMubGVuZ3RoKSB7XG4gICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gIShwID09PSBudWxsKSlcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsLnBhcnRpY2lwYW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGVsZW0gPSBsLnBhcnRpY2lwYW50c1tpXSAvLyBJbml0IHRyYWNrID0gb25seSB1dWlkLCB1cGRhdGUgbG9jYXRpb24gbGlzdCBjaGFuZ2UgZm9yIHV1aWRcblxuICAgICAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoYFR5cGUgOiAke3R5cGVvZiBlbGVtfWApXG4gICAgICAgICAgbGV0IHBcbiAgICAgICAgICBpZiAodHlwZW9mIGVsZW0gPT09ICdzdHJpbmcnIHx8IGVsZW0gaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgICAgICAgIHAgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IGVsZW0gPT09IHAudXVpZCkgLy8gUmV0cmlldmUgcGFydGljaXBhbnQgZGF0YSBmcm9tIGxpc3QuXG4gICAgICAgICAgfSBlbHNlIGlmIChlbGVtPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ19wYXJ0aWNpcGFudCcpIHtcbiAgICAgICAgICAgIHAgPSB1bmRlZmluZWQgLy8gcGFydGljaXBhbnQgaXMgYWxyZWFkeSBwcm9jZXNzZWQuXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QYXJ0aWNpcGFudEFscmVhZHlQcm9jZXNzZWQnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSBwID0gdW5kZWZpbmVkXG5cbiAgICAgICAgICBpZiAodHlwZW9mIHAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBsLnBhcnRpY2lwYW50c1tpXSA9IG5ldyBfcGFydGljaXBhbnQocCkgLy8gcmVwbGFjZSB1dWlkIHdpdGggX3BhcnRpY2lwYW50XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHBhcnRpY2lwYW50cy5wdXNoKCBudWxsKVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgJ1VuZGVmaW5lZCBwYXRpY2lwYW50IHdoaWxlIHByb2Nlc3NpbmcgcGFydGljaXBhbnRzIGFycmF5J1xuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsLnBhcnRpY2lwYW50cy5zb3J0KHNvcnRCeVJvbGVBbmREZXgpIC8vIFRPRE8gOiB0ZXN0IGlmIHNvcnRpbmcgd29ya3NcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZ2V0IGluaXRUcmFjayAoKSB7XG4gICAgaWYgKFxuICAgICAgIXRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0IHx8XG4gICAgICB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGggPT09IDBcbiAgICApIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBjb25zdCBsb2NhdGlvbnMgPSBbXSAvLyAhISEhISEhIGxvY2F0aW9ucyB2cyBpbml0IGxvY2F0aW9ucyAhISFcblxuICAgIGNvbnN0IGluaXQgPSB0aGlzLnN0YXJ0aW5nTGluZVxuICAgIGxldCBsb2NhdGlvbnNJbmRleFN0YXJ0LCBpbml0SW5kZXhTdGFydCwgbG9jYXRpb25zTGVuZ3RoXG4gICAgaWYgKGluaXQubGVuZ3RoIDw9IDApIGxvY2F0aW9uc0luZGV4U3RhcnQgPSAwXG4gICAgZWxzZSBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA+PSBpbml0Lmxlbmd0aCkge1xuICAgICAgbG9jYXRpb25zSW5kZXhTdGFydCA9IDBcbiAgICB9IGVsc2UgbG9jYXRpb25zSW5kZXhTdGFydCA9IGluaXQubGVuZ3RoIC0gdGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleFxuXG4gICAgaWYgKHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPD0gMCkgaW5pdEluZGV4U3RhcnQgPSAwXG4gICAgZWxzZSBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA8PSBpbml0Lmxlbmd0aCkgaW5pdEluZGV4U3RhcnQgPSAwXG4gICAgZWxzZSBpbml0SW5kZXhTdGFydCA9IHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXggLSBpbml0Lmxlbmd0aFxuXG4gICAgaWYgKGxvY2F0aW9uc0luZGV4U3RhcnQgPT09IDApIHtcbiAgICAgIGxvY2F0aW9uc0xlbmd0aCA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhdGlvbnNMZW5ndGggPVxuICAgICAgICB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGggKyBsb2NhdGlvbnNJbmRleFN0YXJ0XG4gICAgfVxuXG4gICAgaWYgKGluaXQubGVuZ3RoICE9PSAwKSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA8IDApIHtcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgIGluZGV4IDwgTWF0aC5hYnModGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCk7XG4gICAgICAgICAgaW5kZXgrK1xuICAgICAgICApIHtcbiAgICAgICAgICBpbml0LnB1c2goe1xuICAgICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNoYXNlTG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zKVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsb2NhdGlvbnNMZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGxldCBsb2NhdGlvbiA9IHt9XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBbXVxuICAgICAgaWYgKFxuICAgICAgICBpbmRleCA+PSBsb2NhdGlvbnNJbmRleFN0YXJ0ICYmXG4gICAgICAgIGluZGV4IC0gbG9jYXRpb25zSW5kZXhTdGFydCA8IGNoYXNlTG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgICApIHtcbiAgICAgICAgbG9jYXRpb24gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgICBjaGFzZUxvY2F0aW9ucy5saXN0W2luZGV4IC0gbG9jYXRpb25zSW5kZXhTdGFydF1cbiAgICAgICAgKVxuICAgICAgICBsb2NhdGlvbi5pbml0ID0gZmFsc2VcbiAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzPy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGlmIChwICE9IG51bGwpIHBhcnRpY2lwYW50cy5wdXNoKHApXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBpZiAoaW5kZXggPj0gaW5pdEluZGV4U3RhcnQgJiYgaW5kZXggLSBpbml0SW5kZXhTdGFydCA8IGluaXQubGVuZ3RoKSB7XG4gICAgICAgIG1lcmdlT2JqZWN0KGxvY2F0aW9uLCBpbml0W2luZGV4IC0gaW5pdEluZGV4U3RhcnRdLCB7XG4gICAgICAgICAgb3ZlcndyaXRlOiBmYWxzZVxuICAgICAgICB9KVxuXG4gICAgICAgIGluaXRbaW5kZXggLSBpbml0SW5kZXhTdGFydF0ucGFydGljaXBhbnRzPy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGlmIChwICE9IG51bGwpIHBhcnRpY2lwYW50cy5wdXNoKHApXG4gICAgICAgIH0pXG5cbiAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzID0gcGFydGljaXBhbnRzXG4gICAgICB9XG4gICAgICBsb2NhdGlvbi5maXJzdCA9IGZhbHNlXG4gICAgICBsb2NhdGlvbi5lbmQgPSBmYWxzZVxuICAgICAgbG9jYXRpb25zLnB1c2gobG9jYXRpb24pXG4gICAgfVxuXG4gICAgcmV0dXJuIGxvY2F0aW9uc1xuICB9XG5cbiAgZ2V0IHN0YXJ0aW5nTGluZSAoKSB7XG4gICAgLy8gR2V0IHByZXlzIGFuZCBjaGVjayBmb3IgZXNjYXBlZFxuICAgIGNvbnN0IHByZXlzID0gdGhpcy5zeXN0ZW0uaW5jbHVkZUVzY2FwZWRcbiAgICAgID8gdGhpcy5wcmV5c1xuICAgICAgOiB0aGlzLnByZXlzPy5maWx0ZXIocCA9PiAhcC5kYXRhLmVzY2FwZWQpXG4gICAgLy8gR2V0IGNoYXNlcnNcbiAgICBjb25zdCBjaGFzZXJzID0gdGhpcy5zeXN0ZW0uaW5jbHVkZUxhdGVjb21lcnNcbiAgICAgID8gdGhpcy5jaGFzZXJzXG4gICAgICA6IHRoaXMuY2hhc2Vycz8uZmlsdGVyKGMgPT4gIWMuZGF0YS5leGNsdWRlZClcblxuICAgIC8vIFJlY3Vyc2l2aXR5ICEhIHdpdGggZ2V0UGFydGljaXBhbnRMb2NhdGlvbiBhbmQgZ2V0IHBhcnRpY2lwYW50c1xuXG4gICAgLy8gSWYgbm8gcHJleSBvciBubyBjaGFzc2VyXG4gICAgLy8gaWYgKDAgPT0gY2hhc2Vycy5sZW5ndGgpIHtcbiAgICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignTm8gY2hhc2VycycpXG4gICAgLy8gICByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gfVxuICAgIC8vIGlmICgwID09IHByZXlzLmxlbmd0aCkge1xuICAgIC8vICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdObyBwcmV5cycpXG4gICAgLy8gICByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gfVxuXG4gICAgLy8gQnVpbGQgc3RhcnRpbmcgdHJhY2tcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gW11cblxuICAgIGNvbnN0IGNoYXNlcnNNaW5Nb3YgPSB0aGlzLmZpbmRNaW5Nb3YoY2hhc2VycylcbiAgICBjb25zdCBjaGFzZXJzTWF4TW92ID0gdGhpcy5maW5kTWF4TW92KGNoYXNlcnMpXG4gICAgY29uc3QgcHJleXNNaW5Nb3YgPSB0aGlzLmZpbmRNaW5Nb3YocHJleXMpXG4gICAgY29uc3QgcHJleXNNYXhNb3YgPSB0aGlzLmZpbmRNYXhNb3YocHJleXMpXG5cbiAgICBpZiAoY2hhc2Vyc01pbk1vdiAhPT0gLTEgJiYgY2hhc2Vyc01heE1vdiAhPT0gLTEpIHtcbiAgICAgIC8vIEFkZCBjaGFzZXJzIHRvIHRoZSB0cmFjay5cbiAgICAgIGZvciAobGV0IG1vdiA9IGNoYXNlcnNNaW5Nb3Y7IG1vdiA8PSBjaGFzZXJzTWF4TW92OyBtb3YrKykge1xuICAgICAgICAvLyBGaW5kIGFsbCB3aXRoIHRoYXQgbW92XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0ge1xuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXG4gICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYXRpb25QYXJ0aWNpcGFudHNMaXN0ID0gY2hhc2Vyc1xuICAgICAgICAgIC5maWx0ZXIocCA9PiBtb3YgPT09IHAuYWRqdXN0ZWRNb3YpXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGV4IC0gYi5kZXgpXG4gICAgICAgIGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdC5mb3JFYWNoKHAgPT5cbiAgICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwLnV1aWQpXG4gICAgICAgIClcbiAgICAgICAgY2hhc2VUcmFjay5wdXNoKGxvY2F0aW9uKVxuICAgICAgfVxuXG4gICAgICAvLyBBZGQgc3BhY2UgYmV0d2VlbiBjaGFzZXJzIGFuZCBwcmV5cy5cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnN5c3RlbS5zdGFydGluZ1JhbmdlOyBpbmRleCsrKSB7XG4gICAgICAgIGNoYXNlVHJhY2sucHVzaCh7XG4gICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICBpbml0OiB0cnVlLFxuICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJleXNNaW5Nb3YgIT09IC0xICYmIHByZXlzTWF4TW92ICE9PSAtMSkge1xuICAgICAgLy8gQWRkIHByZXlzIHRvIHRoZSB0cmFjay5cbiAgICAgIGZvciAobGV0IG1vdiA9IHByZXlzTWluTW92OyBtb3YgPD0gcHJleXNNYXhNb3Y7IG1vdisrKSB7XG4gICAgICAgIC8vIEZpbmQgYWxsIHdpdGggdGhhdCBtb3ZcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSB7XG4gICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICBpbml0OiB0cnVlLFxuICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QgPSBwcmV5c1xuICAgICAgICAgIC5maWx0ZXIocCA9PiBtb3YgPT09IHAuYWRqdXN0ZWRNb3YpXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGV4IC0gYi5kZXgpXG4gICAgICAgIGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdC5mb3JFYWNoKHAgPT5cbiAgICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwLnV1aWQpXG4gICAgICAgIClcbiAgICAgICAgY2hhc2VUcmFjay5wdXNoKGxvY2F0aW9uKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjaGFzZVRyYWNrXG4gIH1cblxuICBhc3luYyB1cGRhdGVMb2NhdGlvbnNMaXN0IChsaXN0LCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgLy8gUmVtb3ZlIGFsbCB1bm5lY2Vzc2FyeSBpdGVtcyAoY3NzQ2xhc3MsIClcbiAgICBjb25zdCB1cGRhdGVkTGlzdCA9IHRoaXMuY2xlYW5Mb2NhdGlvbnNMaXN0KGxpc3QpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ubG9jYXRpb25zLmxpc3QnOiB1cGRhdGVkTGlzdCB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUxvY2F0aW9uIChsb2NhdGlvblV1aWQsIHVwZGF0ZURhdGEsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCB1cGRhdGUgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh1cGRhdGVEYXRhKVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHVwZGF0ZS51dWlkKSBkZWxldGUgdXBkYXRlLnV1aWRcbiAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XSwgdXBkYXRlLCB7XG4gICAgICBvdmVyd3JpdGU6IHRydWVcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBjbGVhbkxvY2F0aW9uc0xpc3QgKGxpc3QpIHtcbiAgICBjb25zdCB1cGRhdGVkTGlzdCA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGxpc3QpXG4gICAgY29uc3QgcGFydGlwYW50c1V1aWRBcnJheSA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5tYXAocCA9PiBwLnV1aWQpXG5cbiAgICB1cGRhdGVkTGlzdC5mb3JFYWNoKGwgPT4ge1xuICAgICAgLy8gZGVsZXRlIGwuYWN0aXZlXG4gICAgICBkZWxldGUgbC5jc3NDbGFzc2VzXG4gICAgICBkZWxldGUgbC5maXJzdFxuICAgICAgZGVsZXRlIGwubGFzdFxuICAgICAgZGVsZXRlIGwuZW5kXG4gICAgICBpZiAobC5wYXJ0aWNpcGFudHMgJiYgbC5wYXJ0aWNpcGFudHMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbC5wYXJ0aWNpcGFudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcihwID0+ICEocCA9PT0gbnVsbCkpIC8vIFJlbW92ZSBudWxsIGVsZW1lbnRzXG4gICAgICAgICAgLy8gUmVwbGFjZSBfUGFydGljaXBhbnRzIGJ5IHV1aWRcbiAgICAgICAgICBpZiAobC5wYXJ0aWNpcGFudHNbaV0uZGF0YT8udXVpZCkge1xuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHNbaV0gPSBsLnBhcnRpY2lwYW50c1tpXS5kYXRhLnV1aWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdW5rb3duIHBhcnRpY2ljcGFudHNcbiAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIodXVpZCA9PlxuICAgICAgICAgIHBhcnRpcGFudHNVdWlkQXJyYXkuaW5jbHVkZXModXVpZClcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gdXBkYXRlZExpc3RcbiAgfVxuXG4gIGFzeW5jIGluc2VydExvY2F0aW9uIChcbiAgICBpbnNlcnRBdFV1aWQsXG4gICAgeyBzaGlmdCA9IDAsIGxvY0RhdGEgPSB7fSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBkZWxldGUgbC5hY3RpdmVcbiAgICB9KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gaW5zZXJ0QXRVdWlkID09PSBsLnV1aWQpXG4gICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgbmV3TG9jYXRpb25JbmRleCA9IGxvY2F0aW9uSW5kZXggKyBzaGlmdFxuICAgIGlmIChuZXdMb2NhdGlvbkluZGV4ID4gbG9jYXRpb25zLmxlbmd0aCkgcmV0dXJuIGZhbHNlXG4gICAgY29uc3QgbmV3TG9jYXRpb24gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShsb2NEYXRhKVxuICAgIG5ld0xvY2F0aW9uLnV1aWQgPSB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpXG4gICAgbmV3TG9jYXRpb24uaW5pdCA9IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5pbml0XG4gICAgbmV3TG9jYXRpb24uYWN0aXZlID0gdHJ1ZVxuICAgIGxvY2F0aW9ucy5zcGxpY2UobmV3TG9jYXRpb25JbmRleCwgMCwgbmV3TG9jYXRpb24pXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBhc3luYyByZW1vdmVMb2NhdGlvbiAodXVpZCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gdXVpZCA9PT0gbC51dWlkKVxuICAgIGxvY2F0aW9ucy5zcGxpY2UobG9jYXRpb25JbmRleCwgMSlcbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGRlbGV0ZSBsLmFjdGl2ZVxuICAgIH0pXG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgaW5kZXggPSBsb2NhdGlvbkluZGV4IC0gMVxuICAgICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSAwXG4gICAgICBsb2NhdGlvbnNbaW5kZXhdLmFjdGl2ZSA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZUxvY2F0aW9uIChcbiAgICBsb2NhdGlvblV1aWQsXG4gICAgeyBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHRoaXMuZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEobG9jYXRpb25VdWlkLCB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgZ2V0Q2xlYXJBY3RpdmVMb2NhdGlvblVwZGF0ZURhdGEgKHtcbiAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICBodG1sID0gbnVsbFxuICB9ID0ge30pIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgIDogW11cbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGRlbGV0ZSBsLmFjdGl2ZVxuICAgIH0pXG4gICAgdXBkYXRlRGF0YVsnc3lzdGVtLmxvY2F0aW9ucy5saXN0J10gPSB0aGlzLmNsZWFuTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG5cbiAgICBpZiAoc2Nyb2xsVG9Mb2NhdGlvbikge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLmZyb20nXSA9IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byddID0gLTFcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIGdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhIChcbiAgICBsb2NhdGlvblV1aWQsXG4gICAgeyBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSwgaHRtbCA9IG51bGwgfSA9IHt9XG4gICkge1xuICAgIGlmICghbG9jYXRpb25VdWlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDbGVhckFjdGl2ZUxvY2F0aW9uVXBkYXRlRGF0YSh7XG4gICAgICAgIHNjcm9sbFRvTG9jYXRpb25cbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgOiBbXVxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgZGVsZXRlIGwuYWN0aXZlXG4gICAgICBpZiAobG9jYXRpb25VdWlkID09PSBsLnV1aWQpIGwuYWN0aXZlID0gdHJ1ZVxuICAgIH0pXG4gICAgdXBkYXRlRGF0YVsnc3lzdGVtLmxvY2F0aW9ucy5saXN0J10gPSB0aGlzLmNsZWFuTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gICAgLy8gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgaWYgKHNjcm9sbFRvTG9jYXRpb24pIHtcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay5mcm9tJ10gPVxuICAgICAgICB0aGlzLmNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb25cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byddID1cbiAgICAgICAgdGhpcy5nZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbihsb2NhdGlvblV1aWQsIHsgaHRtbCB9KVxuICAgICAgLy8gYXdhaXQgdGhpcy5zZXRjaGFzZVRyYWNrU2Nyb2xsKHtcbiAgICAgIC8vICAgZnJvbTogdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uLFxuICAgICAgLy8gICB0bzogdGhpcy5jaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvblxuICAgICAgLy8gfSlcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIC8vIExvY2F0aW9ucyBuYXZpZ2F0aW9uXG4gIGdldCBhY3RpdmVMb2NhdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmxvY2F0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbnMuZmluZChsID0+IGwuYWN0aXZlKVxuICAgIGlmICghbG9jYXRpb24pIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAobG9jYXRpb24ucGFydGljaXBhbnRzPy5sZW5ndGgpIGxvY2F0aW9uLmhhc1BhcnRpY2lwYW50ID0gdHJ1ZVxuICAgIGNvbnN0IGFjdG9yID0gdGhpcy5hY3RpdmVBY3RvclxuICAgIGlmIChhY3Rvcikge1xuICAgICAgY29uc3QgdGVzdCA9IGFjdG9yLmZpbmQobG9jYXRpb24ub2JzdGFjbGVEZXRhaWxzPy5jaGVja05hbWUpXG4gICAgICBpZiAodGVzdCkge1xuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3Rvckhhc1NraWxsID0gdHJ1ZVxuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3RvclRlc3QgPSB0ZXN0XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb2NhdGlvblxuICB9XG5cbiAgZ2V0IHByZXZpb3VzTG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMubG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwuYWN0aXZlKVxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IDApIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb25zW2FjdGl2ZUluZGV4IC0gMV1cbiAgICBjb25zdCBhY3RvciA9IHRoaXMuYWN0aXZlQWN0b3JcbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGNvbnN0IHRlc3QgPSBhY3Rvci5maW5kKGxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKVxuICAgICAgaWYgKHRlc3QpIHtcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JIYXNTa2lsbCA9IHRydWVcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JUZXN0ID0gdGVzdFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbG9jYXRpb25cbiAgfVxuXG4gIGdldCBuZXh0TG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMubG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwuYWN0aXZlKVxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IHRoaXMubG9jYXRpb25zLmxlbmd0aCAtIDEpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb25zW2FjdGl2ZUluZGV4ICsgMV1cbiAgICBjb25zdCBhY3RvciA9IHRoaXMuYWN0aXZlQWN0b3JcbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGNvbnN0IHRlc3QgPSBhY3Rvci5maW5kKGxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKVxuICAgICAgaWYgKHRlc3QpIHtcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JIYXNTa2lsbCA9IHRydWVcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JUZXN0ID0gdGVzdFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbG9jYXRpb25cbiAgfVxuXG4gIGFzeW5jIGxvY2F0b3JEcm9wcGVkIChkYXRhKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRMb2NhdGlvbkNvb3JkaW5hdGVzKFxuICAgICAgZGF0YS5sb2NhdGlvblV1aWQsXG4gICAgICBkYXRhLngsXG4gICAgICBkYXRhLnksXG4gICAgICBkYXRhLnNjZW5lXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgc2V0TG9jYXRpb25Db29yZGluYXRlcyAoXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHgsXG4gICAgeSxcbiAgICBzY2VuZUlkLFxuICAgIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0uY29vcmRpbmF0ZXMgPSB7IHgsIHksIHNjZW5lOiBzY2VuZUlkIH1cblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgYXN5bmMgY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzICh7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlTG9jYXRpb24pIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNsZWFyTG9jYXRpb25Db29yZGluYXRlcyh0aGlzLmFjdGl2ZUxvY2F0aW9uLnV1aWQsIHtcbiAgICAgICAgcmVuZGVyXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNsZWFyTG9jYXRpb25Db29yZGluYXRlcyAobG9jYXRpb25VdWlkLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBkZWxldGUgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLmNvb3JkaW5hdGVzXG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIC8vIGdldCBhY3RpdmVQYXJ0aWNpcGFudEhhdmVBY3RpdmVMb2NhdGlvblNraWxsICgpe1xuICAvLyAgIGlmKCAhdGhpcy5hY3RpdmVBY3RvcikgcmV0dXJuIGZhbHNlXG4gIC8vICAgaWYoIHRoaXMuYWN0aXZlQWN0b3IuZmluZCggdGhpcy5hY3RpdmVMb2NhdGlvbi5vYnN0YWNsZURldGFpbHM/LmNoZWNrTmFtZSkpIHJldHVybiB0cnVlXG4gIC8vICAgcmV0dXJuIGZhbHNlXG4gIC8vIH1cblxuICAvLyBIYW5kbGUgbWVjaGFuaWNzXG4gIGFzeW5jIGN1dFRvVGhlQ2hhc2UgKCkge1xuICAgIGlmICghdGhpcy5hbGxIYXZlU3BlZWRSb2xsKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdEFsbEhhdmVTcGVlZFJvbGwnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5hY3R1YWxQYXJ0aWNpcGFudHM/Lmxlbmd0aCA8IDIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmVlZE1pbjJQYXJ0aWNpcGFudHMnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5hbGxIYXZlVmFsaWRNb3YpIHtcbiAgICAgIC8vIFRPRE8gOiBDaGVjayBmb3Igc3BlZWQgcm9sbCA/P1xuXG4gICAgICAvLyBDYWxjdWxhdGUgbW92ZW1lbnQgYWN0aW9uc1xuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICAgIGNvbnN0IG1pbk1vdiA9IHRoaXMuZmluZE1pbk1vdih0aGlzLmFjdHVhbFBhcnRpY2lwYW50cylcbiAgICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAvLyBwLmRhdGEubW92ZW1lbnRBY3Rpb24gPSAxICsgKHAuYWRqdXN0ZWRNb3YgLSBtaW5Nb3YpXG4gICAgICAgIHAuY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKG1pbk1vdilcbiAgICAgICAgcC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gcC5tb3ZlbWVudEFjdGlvblxuICAgICAgICBwLmJvbnVzRGljZSA9IDBcbiAgICAgIH0pXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KHRoaXMubG9jYXRpb25zLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICAgIGF3YWl0IHRoaXMuc3RhcnQoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc3RhcnQgKCkge1xuICAgIC8vIGF3YWl0IHRoaXMuY2xlYW5Mb2NhdGlvbnMoKSAvL1RyYW5zZmVycmVkIGluIHVwZGF0ZUxvY2F0aW9uTGlzdFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMubG9jYXRpb25zLmZpbHRlcihsID0+ICFsLmluaXQpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsb2NhdGlvbnNbaV0ucGFydGljaXBhbnRzKSBsb2NhdGlvbnNbaV0ucGFydGljaXBhbnRzID0gW11cbiAgICAgIGlmIChsb2NhdGlvbnNbaV0uYWN0aXZlKSBkZWxldGUgbG9jYXRpb25zW2ldLmFjdGl2ZVxuICAgIH1cbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRpY2lwYW50c0RhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwYXJ0aWNpcGFudHNEYXRhW2ldLmFjdGl2ZSkgZGVsZXRlIHBhcnRpY2lwYW50c0RhdGFbaV0uYWN0aXZlXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuc2V0Y2hhc2VUcmFja1Njcm9sbCgwLCAwLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHNEYXRhLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLnN0b3AoKVxuICB9XG5cbiAgZ2V0TG9jYXRpb25TaGlmdCAobG9jYXRpb25VdWlkLCB7IHNraXAgPSAxIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IG9yaWdpbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGNvbnN0IGRlc3RpbmF0aW9uSW5kZXggPSBvcmlnaW5JbmRleCArIHNraXBcbiAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA+PSBsb2NhdGlvbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbG9jYXRpb25zW2xvY2F0aW9ucy5sZW5ndGggLSAxXVxuICAgIH1cbiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA8IDApIHJldHVybiBsb2NhdGlvbnNbMF1cbiAgICByZXR1cm4gbG9jYXRpb25zW2Rlc3RpbmF0aW9uSW5kZXhdIC8vIEVSUk9SIE1PVkUgMiBGT1IgU0tJUCArMVxuICB9XG5cbiAgYXN5bmMgcmVtb3ZlUGFydGljaXBhbnQgKHBhcnRpY2lwYW50VXVpZCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHAgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlbW92ZVBhcnRpY2lwYW50JyksXG4gICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlbW92ZVBhcnRpY2lwYW50SGludCcsIHtcbiAgICAgICAgbmFtZTogcC5uYW1lXG4gICAgICB9KX08L3A+YCxcbiAgICAgIHllczogYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgbmV3UGFydGljaXBhbnRzRGF0YSA9IHBhcnRpY2lwYW50c0RhdGEuZmlsdGVyKFxuICAgICAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkICE9PSBwLnV1aWRcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBsb2NhdGlvbnNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICAgICAgdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3RcbiAgICAgICAgKVxuICAgICAgICBsb2NhdGlvbnNEYXRhLmZvckVhY2gobCA9PiB7XG4gICAgICAgICAgaWYgKGwucGFydGljaXBhbnRzICYmIGwucGFydGljaXBhbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIoXG4gICAgICAgICAgICAgIHV1aWQgPT4gcGFydGljaXBhbnRVdWlkICE9PSB1dWlkXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhuZXdQYXJ0aWNpcGFudHNEYXRhLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9uc0RhdGEsIHsgcmVuZGVyIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZFBhcnRpY2lwYW50IChcbiAgICBwYXJ0aWNpcGFudCxcbiAgICB7XG4gICAgICByZW5kZXIgPSB0cnVlLFxuICAgICAgbG9jYXRpb25VdWlkID0gbnVsbCxcbiAgICAgIHJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSxcbiAgICAgIHVwZGF0ZSA9IGZhbHNlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuXG4gICAgaWYgKHBhcnRpY2lwYW50LmRhdGEuY2hhc2VVdWlkKSBkZWxldGUgcGFydGljaXBhbnQuZGF0YS5jaGFzZVV1aWRcbiAgICBpZiAocGFydGljaXBhbnQuZGF0YS5sb2NhdGlvblV1aWQpIGRlbGV0ZSBwYXJ0aWNpcGFudC5kYXRhLmxvY2F0aW9uVXVpZFxuICAgIGlmIChwYXJ0aWNpcGFudC5kYXRhLnVwZGF0ZSkgZGVsZXRlIHBhcnRpY2lwYW50LmRhdGEudXBkYXRlXG5cbiAgICBpZiAoIXBhcnRpY2lwYW50LnV1aWQpIHtcbiAgICAgIGxldCB1bmlxdWUgPSBmYWxzZVxuICAgICAgd2hpbGUgKCF1bmlxdWUpIHtcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YS51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICAgICAgdW5pcXVlID1cbiAgICAgICAgICBwYXJ0aWNpcGFudHNEYXRhLmZpbHRlcihwID0+IHAudXVpZCA9PT0gcGFydGljaXBhbnQudXVpZCkubGVuZ3RoID09PSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHVwZGF0ZSkge1xuICAgICAgaWYgKHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgICBwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb25cbiAgICAgIH1cbiAgICAgIGNvbnN0IGluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHBhcnRpY2lwYW50LnV1aWQpXG4gICAgICBwYXJ0aWNpcGFudHNEYXRhW2luZGV4XSA9IHBhcnRpY2lwYW50LmRhdGFcbiAgICB9IGVsc2UgcGFydGljaXBhbnRzRGF0YS5wdXNoKHBhcnRpY2lwYW50LmRhdGEpXG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHNEYXRhLCB7XG4gICAgICByZW5kZXI6IHJlbmRlciAmJiAhdGhpcy5zdGFydGVkICYmICF0aGlzLnJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zXG4gICAgfSlcblxuICAgIGlmIChyZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucykge1xuICAgICAgY29uc3Qgc2xvd2VzdCA9IHRoaXMuc2xvd2VzdFBhcnRpY2lwYW50Py5hZGp1c3RlZE1vdlxuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4gcC5jYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMoc2xvd2VzdCkpXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMsIHtcbiAgICAgICAgcmVuZGVyOiByZW5kZXIgJiYgIXRoaXMuc3RhcnRlZFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXJ0ZWQgJiZcbiAgICAgICEocGFydGljaXBhbnQuZGF0YS5lc2NhcGVkIHx8IHBhcnRpY2lwYW50LmRhdGEuZXhjbHVkZWQpXG4gICAgKSB7XG4gICAgICBjb25zdCBsb2NhdGlvbnNEYXRhID0gdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3RcbiAgICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgICAgOiBbXVxuXG4gICAgICBpZiAobG9jYXRpb25zRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JFbXB0eUxvY2F0aW9uc0xpc3QnKVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGxldCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zRGF0YS5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkgbG9jYXRpb25JbmRleCA9IDBcbiAgICAgIGlmICghbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMpIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMgPSBbXVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBsb2NhdGlvbnNEYXRhW2xvY2F0aW9uSW5kZXhdLnBhcnRpY2lwYW50cy5maW5kSW5kZXgoXG4gICAgICAgICAgcCA9PiBwID09PSBwYXJ0aWNpcGFudC51dWlkXG4gICAgICAgICkgPT09IC0xXG4gICAgICApIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudC51dWlkKVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9uc0RhdGEsIHsgcmVuZGVyIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZWRpdFBhcnRpY2lwYW50IChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAge1xuICAgICAgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSxcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZVBhcnRpY2lwYW50ID0gdHJ1ZSxcbiAgICAgIHJlbmRlciA9IHRydWVcbiAgICB9ID0ge31cbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBNb3ZlIGEgcGFydGljaXBhbnQgZm9yIGEgbnVtYmVyIG9mIGxvY2F0aW9ucy5cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVsbH0gcGFydGljaXBhbnRVdWlkICAgICBVdWlkIG9mIHBhcnRpY2lwYW50XG4gICAqIEBwYXJhbSB7Kn0gbG9jYXRpb25Nb3ZlZCAgICAgICAgICAgICAgICAgTnVtYmVyIG9mIGxvY2F0aW9ucyBtb3ZyZWRcbiAgICogQHJldHVybnMge251bWJlcn0gICAgICAgICAgICAgICAgICAgICAgICBUb3RhbCBudW1iZXIgb2YgbG9jYXRpb25zIGNyb3NzZWRcbiAgICovXG4gIGFzeW5jIG1vdmVQYXJ0aWNpcGFudCAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIGxvY2F0aW9uTW92ZWQsXG4gICAge1xuICAgICAgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSxcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZVBhcnRpY2lwYW50ID0gdHJ1ZSxcbiAgICAgIHJlbmRlciA9IHRydWVcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgLy8gY29uc3Qgc2VsZWN0b3IgPSBgI2l0ZW0tJHt0aGlzLmlkfSAuY2hhc2UtdHJhY2tgXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgbW92ZVBhcnRpY2lwYW50IDogSnF1ZXJ5IHJvb3Q6ICR7JCgnOnJvb3QnKS5maW5kKHNlbGVjdG9yKS5zY3JvbGxMZWZ0KCl9YClcbiAgICBsZXQgbW9kaWZpZWQgPSBmYWxzZVxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IG9yaWdpbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+XG4gICAgICBsLnBhcnRpY2lwYW50cz8uaW5jbHVkZXMocGFydGljaXBhbnRVdWlkKVxuICAgIClcbiAgICBsZXQgZGVzdGluYXRpb25JbmRleCA9IG9yaWdpbkluZGV4ICsgbG9jYXRpb25Nb3ZlZFxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4ID4gbG9jYXRpb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgIGRlc3RpbmF0aW9uSW5kZXggPSBsb2NhdGlvbnMubGVuZ3RoIC0gMVxuICAgIH1cblxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4IDwgMCkge1xuICAgICAgZGVzdGluYXRpb25JbmRleCA9IDBcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbE1vdmUgPSBkZXN0aW5hdGlvbkluZGV4IC0gb3JpZ2luSW5kZXhcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuXG4gICAgaWYgKHVzZU1vdmVtZW50QWN0aW9ucykge1xuICAgICAgaWYgKCFwYXJ0aWNpcGFudCkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgICBwYXJ0aWNpcGFudFV1aWQ6IHRoaXMucGFydGljaXBhbnRVdWlkXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBpZiAocGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IE1hdGguYWJzKHRvdGFsTW92ZSkpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50Tm90RW5vdWdoTW92ZW1lbnQnLCB7XG4gICAgICAgICAgICBhc3Npc3RhbnRVdWlkOiBwYXJ0aWNpcGFudFV1aWQsXG4gICAgICAgICAgICBhY3Rpb25zOiBwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucygwIC0gTWF0aC5hYnModG90YWxNb3ZlKSlcbiAgICAgIHBhcnRpY2lwYW50c0RhdGFbcGFydGljaXBhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YVxuICAgICAgKVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgICBtb2RpZmllZCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAodG90YWxNb3ZlICE9PSAwKSB7XG4gICAgICBhd2FpdCB0aGlzLm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24oXG4gICAgICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICAgICAgbG9jYXRpb25zW2Rlc3RpbmF0aW9uSW5kZXhdLnV1aWQsXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgICBtb2RpZmllZCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoYWN0aXZhdGVQYXJ0aWNpcGFudCkge1xuICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZCwge1xuICAgICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgICBhY3RpdmF0ZUxvY2F0aW9uLFxuICAgICAgICByZW5kZXI6IGZhbHNlXG4gICAgICB9KVxuICAgICAgbW9kaWZpZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGFjdGl2YXRlTG9jYXRpb24gJiYgIWFjdGl2YXRlUGFydGljaXBhbnQpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVMb2NhdGlvbihsb2NhdGlvbnNbZGVzdGluYXRpb25JbmRleF0udXVpZCwge1xuICAgICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgICByZW5kZXI6IGZhbHNlXG4gICAgICB9KVxuICAgICAgbW9kaWZpZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKG1vZGlmaWVkICYmIHJlbmRlcikgYXdhaXQgdGhpcy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICByZXR1cm4gdG90YWxNb3ZlXG4gIH1cblxuICBhc3luYyBtb3ZlUGFydGljaXBhbnRUb0xvY2F0aW9uIChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHtcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICBhbmltYXRlID0gbnVsbCxcbiAgICAgIG1vdmVUb2tlbiA9IHRydWUsXG4gICAgICByZW5kZXIgPSB0cnVlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuXG4gICAgLy8gRmluZCBkZXN0aW5hdGlvbiBsb2NhdGlvbi5cbiAgICBjb25zdCBkZXN0aW5hdGlvbiA9IGxvY2F0aW9ucy5maW5kKGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgaWYgKCFkZXN0aW5hdGlvbikge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYEZhaWxlZCB0byBtb3ZlICR7cGFydGljaXBhbnRVdWlkfS4gTG9jYXRpb24gJHtsb2NhdGlvblV1aWR9IHVua25vd25gXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBGaW5kIG9yaWdpbiBsb2NhdGlvblxuICAgIGNvbnN0IG9yaWdpbiA9IGxvY2F0aW9ucy5maW5kKGwgPT5cbiAgICAgIGwucGFydGljaXBhbnRzPy5pbmNsdWRlcyhwYXJ0aWNpcGFudFV1aWQpXG4gICAgKVxuXG4gICAgaWYgKCFvcmlnaW4pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmaW5kICR7cGFydGljaXBhbnRVdWlkfSBpbiBsb2NhdGlvbnNgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKCFkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMpIGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cyA9IFtdXG4gICAgaWYgKGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cy5pbmNsdWRlcyhwYXJ0aWNpcGFudFV1aWQpKSByZXR1cm4gLy8gbW92aW5nIHBhcnRpY3BhbnQgdG8gYSBsb2NhdGlvbiBoZSBhbHJlYWR5IG9jY3VwaWVzXG4gICAgZGVzdGluYXRpb24ucGFydGljaXBhbnRzLnB1c2gocGFydGljaXBhbnRVdWlkKVxuICAgIC8vIGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cy5zb3J0KHNvcnRCeVJvbGVBbmREZXgpXG5cbiAgICBjb25zdCBvbGRQYXJ0aWNpcGFudHNMaXN0ID0gb3JpZ2luLnBhcnRpY2lwYW50cy5maWx0ZXIoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCAhPT0gcFxuICAgIClcbiAgICBvcmlnaW4ucGFydGljaXBhbnRzID0gb2xkUGFydGljaXBhbnRzTGlzdFxuXG4gICAgaWYgKG1vdmVUb2tlbiAmJiBkZXN0aW5hdGlvbi5jb29yZGluYXRlcykge1xuICAgICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICAgIGxldCBwYXJ0aWNwYW50RG9jdW1lbnQgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleShcbiAgICAgICAgcGFydGljaXBhbnQ/LmRhdGE/LmRvY1V1aWRcbiAgICAgIClcbiAgICAgIC8vIEZpbmQgdG9rZW5cbiAgICAgIGlmIChwYXJ0aWNwYW50RG9jdW1lbnQgJiYgIShwYXJ0aWNwYW50RG9jdW1lbnQgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50IHx8IHBhcnRpY3BhbnREb2N1bWVudD8ub2JqZWN0IGluc3RhbmNlb2YgVG9rZW4pKSB7XG4gICAgICAgIGNvbnN0IGZvdW5kVG9rZW5zID0gY2FudmFzLnNjZW5lLnRva2Vucy5maWx0ZXIoZCA9PiBkLmFjdG9yTGluayAmJiBkLmFjdG9yPy5pZCA9PT0gcGFydGljcGFudERvY3VtZW50LmlkKVxuICAgICAgICBpZiAoZm91bmRUb2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgcGFydGljcGFudERvY3VtZW50ID0gZm91bmRUb2tlbnNbMF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQgJiZcbiAgICAgICAgIShcbiAgICAgICAgICAvKiBwYXJ0aWNwYW50RG9jdW1lbnQuaXNUb2tlbiB8fCAqLyAoXG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50IHx8XG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQ/Lm9iamVjdCBpbnN0YW5jZW9mIFRva2VuXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdObyB0b2tlbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBhY3RvcicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGVzdGluYXRpb24uY29vcmRpbmF0ZXMuc2NlbmUgIT09IGdhbWUuc2NlbmVzLnZpZXdlZC51dWlkKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdDYXV0aW9uIHRoZSBzY2VuZSBpcyBub3QgdGhlIGFjdGl2ZSBzY2VuZScpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRpY3BhbnREb2N1bWVudC5wYXJlbnQ/LnV1aWQgIT09IGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnNjZW5lKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvclRva2VuTm90T25TY2VuZScpXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHNjZW5lID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoXG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb29yZGluYXRlcy5zY2VuZVxuICAgICAgICAgIClcbiAgICAgICAgICBsZXQgeCA9IGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnhcbiAgICAgICAgICBjb25zdCB5ID0gZGVzdGluYXRpb24uY29vcmRpbmF0ZXMueVxuICAgICAgICAgIGxldCB0YXJnZXRSZWN0ID0gbmV3IFBJWEkuUmVjdGFuZ2xlKFxuICAgICAgICAgICAgeCxcbiAgICAgICAgICAgIHksXG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQub2JqZWN0LndpZHRoLFxuICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC5oZWlnaHRcbiAgICAgICAgICApLm5vcm1hbGl6ZSgpXG4gICAgICAgICAgY29uc3QgdXBkYXRlID0gW11cbiAgICAgICAgICBsZXQgZm91bmRGcmVlU3BhY2UgPSBmYWxzZVxuICAgICAgICAgIHdoaWxlICghZm91bmRGcmVlU3BhY2UpIHtcbiAgICAgICAgICAgIGNvbnN0IG92ZXJsYXBpbmdUb2tlbiA9IHNjZW5lLnRva2Vucy5maW5kKHQgPT4ge1xuICAgICAgICAgICAgICBpZiAodC5pZCA9PT0gcGFydGljcGFudERvY3VtZW50LmlkKSByZXR1cm4gZmFsc2UgLy8gWW91IGNhbid0IG92ZXJsYXAgd2l0aCB5b3Vyc2VsZlxuICAgICAgICAgICAgICByZXR1cm4gdC5vYmplY3QuYm91bmRzLmludGVyc2VjdHModGFyZ2V0UmVjdClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAob3ZlcmxhcGluZ1Rva2VuKSB7XG4gICAgICAgICAgICAgIHggPSBvdmVybGFwaW5nVG9rZW4ub2JqZWN0LmJvdW5kcy5yaWdodCArIDFcbiAgICAgICAgICAgICAgdGFyZ2V0UmVjdCA9IG5ldyBQSVhJLlJlY3RhbmdsZShcbiAgICAgICAgICAgICAgICB4LFxuICAgICAgICAgICAgICAgIHksXG4gICAgICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC53aWR0aCxcbiAgICAgICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQub2JqZWN0LmhlaWdodFxuICAgICAgICAgICAgICApLm5vcm1hbGl6ZSgpXG4gICAgICAgICAgICB9IGVsc2UgZm91bmRGcmVlU3BhY2UgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdXBkYXRlLnB1c2goe1xuICAgICAgICAgICAgX2lkOiBwYXJ0aWNwYW50RG9jdW1lbnQuaWQsXG4gICAgICAgICAgICB4LFxuICAgICAgICAgICAgeVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICAvLyBkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHM/LmZvckVhY2goIHBVdWlkID0+e1xuICAgICAgICAgIC8vICAgY29uc3QgcCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocFV1aWQpXG4gICAgICAgICAgLy8gICBjb25zdCBwRG9jID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoIHA/LmRhdGE/LmRvY1V1aWQpXG4gICAgICAgICAgLy8gICBpZiggcERvYyBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgJiYgcERvYy5vYmplY3QgaW5zdGFuY2VvZiBUb2tlbil7XG4gICAgICAgICAgLy8gICAgIHVwZGF0ZXMgPSB0cnVlXG4gICAgICAgICAgLy8gICAgIHVwZGF0ZS5wdXNoKHtcbiAgICAgICAgICAvLyAgICAgICBfaWQ6IHBEb2MuaWQsXG4gICAgICAgICAgLy8gICAgICAgeDp4LFxuICAgICAgICAgIC8vICAgICAgIHk6eVxuICAgICAgICAgIC8vICAgICB9KVxuICAgICAgICAgIC8vICAgICBpZiggcERvYy5vYmplY3Qud2lkdGgpIHggKz0gcERvYy5vYmplY3Qud2lkdGhcbiAgICAgICAgICAvLyAgIH1cbiAgICAgICAgICAvLyB9KVxuICAgICAgICAgIGNvbnN0IHNob3dUb2tlbk1vdmVtZW50ID1cbiAgICAgICAgICAgIHR5cGVvZiBhbmltYXRlID09PSAnYm9vbGVhbidcbiAgICAgICAgICAgICAgPyBhbmltYXRlXG4gICAgICAgICAgICAgIDogdGhpcy5zeXN0ZW0uc2hvd1Rva2VuTW92ZW1lbnRcbiAgICAgICAgICBhd2FpdCBwYXJ0aWNwYW50RG9jdW1lbnQucGFyZW50LnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKFxuICAgICAgICAgICAgJ1Rva2VuJyxcbiAgICAgICAgICAgIHVwZGF0ZSxcbiAgICAgICAgICAgIHsgYW5pbWF0ZTogc2hvd1Rva2VuTW92ZW1lbnQgfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICAvLyBIYW5kbGUgc2Nyb2xsaW5nXG4gIGFzeW5jIHNldGNoYXNlVHJhY2tTY3JvbGwgKHtcbiAgICBmcm9tID0gdW5kZWZpbmVkLFxuICAgIHRvID0gLTEsXG4gICAgcmVuZGVyID0gdHJ1ZVxuICB9ID0ge30pIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHtcbiAgICAgICAgJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay5mcm9tJzpcbiAgICAgICAgICB1bmRlZmluZWQgPT09IGZyb20gPyB0aGlzLmNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24gOiBmcm9tLFxuICAgICAgICAnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLnRvJzpcbiAgICAgICAgICB1bmRlZmluZWQgPT09IHRvID8gdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uIDogdG9cbiAgICAgIH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgZ2V0IGNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24gKCkge1xuICAgIGNvbnN0IGh0bWwgPSB0aGlzLnNoZWV0Py5fZWxlbWVudFxuICAgIGlmICghaHRtbCkgcmV0dXJuIC0xXG4gICAgY29uc3QgY2hhc2VUcmFjayA9IGh0bWxbMF0ucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJylcbiAgICBpZiAoIWNoYXNlVHJhY2spIHJldHVybiAtMVxuICAgIC8vIGNvbnN0IHNlbGVjdG9yID0gYCNpdGVtLSR7dGhpcy5pZH0gLmNoYXNlLXRyYWNrYFxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYERBVEEgOiBKcXVlcnkgcm9vdDogJHskKCc6cm9vdCcpLmZpbmQoc2VsZWN0b3IpLnNjcm9sbExlZnQoKX1gKVxuICAgIC8vIHJldHVybiAkKCc6cm9vdCcpLmZpbmQoc2VsZWN0b3IpLnNjcm9sbExlZnQoKVxuXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgREFUQSA6IEpxdWVyeSByb290OiAkeyQoJzpyb290JykuZmluZCgnI2l0ZW0tVk5odHF4QTJ3SkpuV1N0VCAuY2hhc2UtdHJhY2snKS5zY3JvbGxMZWZ0KCl9LkNoYXNlIHRyYWNrIG9mZnNldDogJHtjaGFzZVRyYWNrLnNjcm9sbExlZnR9LCBEb2N1bWVudCBvZmZzZXQ6JHtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaXRlbS1WTmh0cXhBMndKSm5XU3RUJykucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJykuc2Nyb2xsTGVmdH1gKVxuICAgIHJldHVybiBjaGFzZVRyYWNrLnNjcm9sbExlZnRcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIG9mZnNldCBwb3NpdGlvbiBvZiB0aGUgYWN0aXZlIGxvY2F0aW9uXG4gICAqIHRoZSBjZW50ZXIgb2YgdGhlIGFjdGl2ZSBsb2NhdGlvbiB3aWxsIGJlIGNlbnRlcmVkXG4gICAqIGluIHRoZSBwYXJlbnQuXG4gICAqL1xuICBnZXQgY2hhc2VUcmFja0FjdGl2ZUxvY2F0aW9uU2Nyb2xsUG9zaXRpb24gKCkge1xuICAgIGlmICghdGhpcy5hY3RpdmVMb2NhdGlvbikgcmV0dXJuIC0xXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24odGhpcy5hY3RpdmVMb2NhdGlvbi51dWlkKVxuICB9XG5cbiAgZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24gKGxvY2F0aW9uVXVpZCwgeyBodG1sID0gbnVsbCB9KSB7XG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSBodG1sIHx8IHRoaXMuc2hlZXQ/Ll9lbGVtZW50XG4gICAgaWYgKCFodG1sRWxlbWVudCB8fCAhaHRtbEVsZW1lbnRbMF0pIHJldHVybiAtMVxuICAgIGNvbnN0IGNoYXNlVHJhY2sgPSBodG1sRWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxuICAgIGlmICghY2hhc2VUcmFjaykgcmV0dXJuIC0xXG4gICAgY29uc3QgYWN0aXZlTG9jYXRpb25FbGVtZW50ID0gY2hhc2VUcmFjay5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC5jaGFzZS1sb2NhdGlvbltkYXRhLXV1aWQ9XCIke2xvY2F0aW9uVXVpZH1cIl1gXG4gICAgKVxuICAgIGlmICghYWN0aXZlTG9jYXRpb25FbGVtZW50KSByZXR1cm4gLTFcbiAgICBjb25zdCBsZWZ0U2Nyb2xsID1cbiAgICAgIGFjdGl2ZUxvY2F0aW9uRWxlbWVudC5vZmZzZXRMZWZ0ICtcbiAgICAgIGFjdGl2ZUxvY2F0aW9uRWxlbWVudC5jbGllbnRXaWR0aCAvIDIgLVxuICAgICAgY2hhc2VUcmFjay5jbGllbnRXaWR0aCAvIDJcbiAgICByZXR1cm4gbGVmdFNjcm9sbCA8IDAgPyAwIDogTWF0aC5mbG9vcihsZWZ0U2Nyb2xsKVxuICB9XG5cbiAgLy8gU2hvdWxkIGJlIHJlbW92ZWRcbiAgZmluZE1pbk1vdiAobGlzdCkge1xuICAgIGlmICghbGlzdD8ubGVuZ3RoKSByZXR1cm4gLTFcbiAgICByZXR1cm4gbGlzdC5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+XG4gICAgICBwcmV2LmFkanVzdGVkTW92IDwgY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50XG4gICAgKS5hZGp1c3RlZE1vdlxuICB9XG5cbiAgZmluZE1heE1vdiAobGlzdCkge1xuICAgIGlmICghbGlzdD8ubGVuZ3RoKSByZXR1cm4gLTFcbiAgICByZXR1cm4gbGlzdC5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+XG4gICAgICBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50XG4gICAgKS5hZGp1c3RlZE1vdlxuICB9XG5cbiAgLy8gVXRpbGl0aWVzXG4gIGZpbmRJbmRleCAobGlzdCwgdXVpZCkge1xuICAgIHJldHVybiBsaXN0LmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGdldCBzdGFydGVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRGbGFnKCdDb0M3JywgJ3N0YXJ0ZWQnKVxuICB9XG5cbiAgYXN5bmMgc3RhcnQgKCkge1xuICAgIGNvbnN0IHJlbVN0cmluZyA9ICQoJzpyb290JykuY3NzKCdmb250LXNpemUnKVxuICAgIGNvbnN0IHJlbVNpemUgPSBOdW1iZXIocmVtU3RyaW5nLnJlcGxhY2UoJ3B4JywgJycpKVxuICAgIGNvbnN0IHBDb3VudCA9IHRoaXMuYWN0dWFsUGFydGljaXBhbnRzLmxlbmd0aFxuICAgIGNvbnN0IHdpZHRoID0gTWF0aC5tYXgoKHBDb3VudCAqIDExLjIgKyAzKSAqIHJlbVNpemUsIDQwICogcmVtU2l6ZSlcbiAgICB0aGlzLnNoZWV0Ll90YWJzWzBdLmFjdGl2ZSA9ICdzZXR1cCdcbiAgICB0aGlzLnNoZWV0LnBvc2l0aW9uLndpZHRoID0gd2lkdGhcbiAgICBhd2FpdCB0aGlzLnNldEZsYWcoJ0NvQzcnLCAnc3RhcnRlZCcsIHRydWUpXG4gICAgYXdhaXQgdGhpcy5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oKVxuICB9XG5cbiAgYXN5bmMgc3RvcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMudW5zZXRGbGFnKCdDb0M3JywgJ3N0YXJ0ZWQnKVxuICB9XG5cbiAgZ2VuZXJhdGVOZXdVdWlkICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgfVxuXG4gIGdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgIGlmICghcGFydGljaXBhbnQuYWN0b3IpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBsaXN0ID0gW11cbiAgICBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5mb3JFYWNoKGMgPT5cbiAgICAgIGxpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljcycpfSAoJHtjLnNob3J0TmFtZX0pYFxuICAgICAgKVxuICAgIClcbiAgICBsaXN0LnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJyl9ICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICl9KWBcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3LlNBTidcbiAgICAgICl9KWBcbiAgICApXG4gICAgcGFydGljaXBhbnQuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiBsaXN0LnB1c2gocy5uYW1lKSlcbiAgICByZXR1cm4gbGlzdFxuICB9XG5cbiAgZ2V0IGFjdGl2ZUFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBwYXJ0aWNpY3BhbnREYXRhID0gdGhpcy5hY3RpdmVQYXJ0aWNpcGFudERhdGFcbiAgICBpZiAoIXBhcnRpY2ljcGFudERhdGEpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5nZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyhwYXJ0aWNpY3BhbnREYXRhLnV1aWQpXG4gIH1cblxuICBnZXQgYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzICgpIHtcbiAgICBjb25zdCBsaXN0ID0gW11cbiAgICBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5mb3JFYWNoKGMgPT5cbiAgICAgIGxpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljcycpfSAoJHtjLnNob3J0TmFtZX0pYFxuICAgICAgKVxuICAgIClcbiAgICBsaXN0LnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJyl9ICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICl9KWBcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3LlNBTidcbiAgICAgICl9KWBcbiAgICApXG5cbiAgICBnYW1lLkNvQzcuc2tpbGxMaXN0Py5mb3JFYWNoKHMgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhbGlzdC5pbmNsdWRlcyhzLm5hbWUpICYmXG4gICAgICAgICFzLm5hbWVcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC5pbmNsdWRlcyhgKCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJyl9KWAudG9Mb3dlckNhc2UoKSlcbiAgICAgICkge1xuICAgICAgICBsaXN0LnB1c2gocy5uYW1lKVxuICAgICAgfVxuICAgIH0pIC8vIFRPRE86IFJlbW92ZSA/P1xuICAgIHRoaXMucGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5hY3Rvcikge1xuICAgICAgICBwLmFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgIGlmICghbGlzdC5pbmNsdWRlcyhzLm5hbWUpKSBsaXN0LnB1c2gocy5uYW1lKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGxpc3Quc29ydChJbnRsLkNvbGxhdG9yKCkuY29tcGFyZSlcbiAgfVxuXG4gIGdldCBhbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NTaG9ydCAoKSB7XG4gICAgY29uc3QgbGlzdCA9IFtdXG4gICAgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZm9yRWFjaChjID0+IGxpc3QucHVzaChgJHtjLmxhYmVsfWApKVxuICAgIGxpc3QucHVzaChgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpfWApXG4gICAgbGlzdC5wdXNoKGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TQU4nKX1gKVxuXG4gICAgZ2FtZS5Db0M3LnNraWxsTGlzdD8uZm9yRWFjaChzID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIWxpc3QuaW5jbHVkZXMocy5uYW1lKSAmJlxuICAgICAgICAhcy5uYW1lXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAuaW5jbHVkZXMoYCgke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnlTcGVjTmFtZScpfSlgLnRvTG93ZXJDYXNlKCkpXG4gICAgICApIHtcbiAgICAgICAgbGlzdC5wdXNoKHMubmFtZSlcbiAgICAgIH1cbiAgICB9KSAvLyBUT0RPOiBSZW1vdmUgPz9cbiAgICB0aGlzLnBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWN0b3IpIHtcbiAgICAgICAgcC5hY3Rvci5za2lsbHMuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICBpZiAoIWxpc3QuaW5jbHVkZXMocy5uYW1lKSkgbGlzdC5wdXNoKHMubmFtZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBsaXN0LnNvcnQoSW50bC5Db2xsYXRvcigpLmNvbXBhcmUpXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gdGhlIGRhdGEgb2YgYWxsIHBhcmFzaXRlIHBhcnRpY2lwYW50cyBpbiBsb2NhdGlvbnMuXG4gICAqIFNob3VsZCBuZXZlciBoYXBwZW5cbiAgICovXG4gIC8vIGFzeW5jIGNsZWFuTG9jYXRpb25zICgpIHtcbiAgLy8gICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gIC8vICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gIC8vICAgICBjb25zdCBwYXJ0aXBhbnRzVXVpZEFycmF5ID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLm1hcChwID0+IHAudXVpZClcbiAgLy8gICAgIGlmIChsLnBhcnRpY2lwYW50cykge1xuICAvLyAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcih1dWlkID0+XG4gIC8vICAgICAgICAgcGFydGlwYW50c1V1aWRBcnJheS5pbmNsdWRlcyh1dWlkKVxuICAvLyAgICAgICApXG4gIC8vICAgICB9XG4gIC8vICAgfSlcbiAgLy8gICB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAvLyB9XG59XG4iLCIvKiBnbG9iYWwgZm91bmRyeSwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NraWxsIGV4dGVuZHMgQ29DN0l0ZW0ge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5zeXN0ZW0/LnNraWxsTmFtZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gQ29DN1NraWxsLmd1ZXNzTmFtZVBhcnRzKGRhdGEubmFtZSlcbiAgICAgIGNvbnN0IHsgbmFtZSwgc2tpbGxOYW1lLCBzcGVjaWFsaXphdGlvbiwgLi4ubmV3UHJvcGVydGllcyB9ID0gc2tpbGxcbiAgICAgIGRhdGEubmFtZSA9IG5hbWVcbiAgICAgIGRhdGEuc3lzdGVtIHx8PSB7fVxuICAgICAgY29uc3QgcHJvcGVydGllcyA9IHsgLi4uZGF0YS5zeXN0ZW0ucHJvcGVydGllcywgLi4ubmV3UHJvcGVydGllcyB9XG4gICAgICBkYXRhLnN5c3RlbSA9IHsgLi4uZGF0YS5zeXN0ZW0sIHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24sIHByb3BlcnRpZXMgfVxuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgc3RhdGljIGd1ZXNzTmFtZVBhcnRzIChza2lsbE5hbWUpIHtcbiAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICBjb21iYXQ6IGZhbHNlLFxuICAgICAgZmlnaHRpbmc6IGZhbHNlLFxuICAgICAgZmlyZWFybTogZmFsc2UsXG4gICAgICBuYW1lOiBza2lsbE5hbWUsXG4gICAgICBza2lsbE5hbWUsXG4gICAgICBzcGVjaWFsOiBmYWxzZSxcbiAgICAgIHNwZWNpYWxpemF0aW9uOiAnJ1xuICAgIH1cblxuICAgIGNvbnN0IG1hdGNoID0gc2tpbGxOYW1lLm1hdGNoKC9eKC4rKVxccypcXCgoW14pXSspXFwpJC8pXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBvdXRwdXQuc2tpbGxOYW1lID0gbWF0Y2hbMl0udHJpbSgpXG4gICAgICBvdXRwdXQuc3BlY2lhbCA9IHRydWVcblxuICAgICAgY29uc3Qgc3BlY2lhbGl6YXRpb24gPSBtYXRjaFsxXS50cmltKClcbiAgICAgIG91dHB1dC5zcGVjaWFsaXphdGlvbiA9IHNwZWNpYWxpemF0aW9uXG4gICAgICBvdXRwdXQubmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIG91dHB1dC5za2lsbE5hbWUgKyAnKSdcbiAgICAgIG91dHB1dC5maWdodGluZyA9IHNwZWNpYWxpemF0aW9uID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgb3V0cHV0LmZpcmVhcm0gPSBzcGVjaWFsaXphdGlvbiA9PT0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnKVxuICAgICAgb3V0cHV0LmNvbWJhdCA9IG91dHB1dC5maWdodGluZyB8fCBvdXRwdXQuZmlyZWFybVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0XG4gIH1cblxuICBnZXQgaGFzQWN0aXZlRWZmZWN0cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0aXZlRWZmZWN0cy5sZW5ndGggPiAwXG4gIH1cblxuICBnZXQgYWN0aXZlRWZmZWN0cyAoKSB7XG4gICAgaWYgKHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LmVmZmVjdHMpIHtcbiAgICAgIGNvbnN0IGVmZmVjdEtleUZ1bGwgPSBgc2tpbGwuJHt0aGlzLm5hbWV9YC50b0xvd2VyQ2FzZSgpXG4gICAgICBjb25zdCBlZmZlY3RLZXlTaG9ydCA9IGBza2lsbC4ke3RoaXMuc3lzdGVtLnNraWxsTmFtZX1gLnRvTG93ZXJDYXNlKClcbiAgICAgIGxldCBjaGFuZ2VzID0gdGhpcy5wYXJlbnQuZWZmZWN0cy5yZWR1Y2UoKGNoYW5nZXMsIGUpID0+IHtcbiAgICAgICAgaWYgKGUuZGlzYWJsZWQgfHwgZS5pc1N1cHByZXNzZWQpIHJldHVybiBjaGFuZ2VzXG4gICAgICAgIHJldHVybiBjaGFuZ2VzLmNvbmNhdChcbiAgICAgICAgICBlLmRhdGEuY2hhbmdlcy5tYXAoYyA9PiB7XG4gICAgICAgICAgICBjID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYylcbiAgICAgICAgICAgIGMuZWZmZWN0ID0gZVxuICAgICAgICAgICAgYy5wcmlvcml0eSA9IGMucHJpb3JpdHkgPz8gYy5tb2RlICogMTBcbiAgICAgICAgICAgIHJldHVybiBjXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfSwgW10pXG4gICAgICBjaGFuZ2VzLnNvcnQoKGEsIGIpID0+IGEucHJpb3JpdHkgLSBiLnByaW9yaXR5KVxuICAgICAgY2hhbmdlcyA9IGNoYW5nZXMuZmlsdGVyKFxuICAgICAgICBlID0+XG4gICAgICAgICAgZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gZWZmZWN0S2V5U2hvcnQgfHxcbiAgICAgICAgICBlLmtleS50b0xvd2VyQ2FzZSgpID09PSBlZmZlY3RLZXlGdWxsXG4gICAgICApXG4gICAgICByZXR1cm4gY2hhbmdlc1xuICAgIH1cbiAgICByZXR1cm4gW11cbiAgfVxuXG4gIC8qKlxuICAqIFVuaXF1ZSBpZGVudGlmaWVyIHNob3VsZCBiZSB1c2VkIHRvIHN0b3JlIGFuZCBvYnRhaW4gaXRlbSB0byBhc3Nlc3MgaXRlbSB1bmlxdWVuZXNzLlxuICAqIEZvciBvbGQgaXRlbXMgd2l0aG91dCBpZCwgZmFsbGJhY2sgb2Ygc2tpbGxOYW1lIG1heSBzdGlsbCBiZSB1c2VkXG4gICogYnV0IGlmIHNraWxsIG5hbWUgaXMgbm90IHVuaXF1ZSBpdCB3aWxsIGNhdXNlIHByb2JsZW1zLlxuICAqL1xuICBnZXQgaXRlbUlkZW50aWZpZXIgKCkge1xuICAgIHJldHVybiB0aGlzLm5hbWVcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSB2YWx1ZSBvZiB0aGUgc2tpbGwgc2NvcmUgdW5hZmZlY3RlZCBieSBhY3RpdmUgZWZmZWN0c1xuICAgKi9cbiAgZ2V0IHJhd1ZhbHVlICgpIHtcbiAgICBsZXQgdmFsdWUgPSAwXG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIC8vIEZvciBhbiBhY3RvciB3aXRoIGV4cGVyaWVuY2Ugd2UgbmVlZCB0byBjYWxjdWxhdGUgc2tpbGwgdmFsdWVcbiAgICAgIHZhbHVlID0gdGhpcy5iYXNlXG4gICAgICB2YWx1ZSArPSB0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ucGVyc29uYWxcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ucGVyc29uYWwpXG4gICAgICAgIDogMFxuICAgICAgdmFsdWUgKz0gdGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb25cbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbilcbiAgICAgICAgOiAwXG4gICAgICB2YWx1ZSArPSB0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlKVxuICAgICAgICA6IDBcbiAgICAgIGlmIChcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKSAmJlxuICAgICAgICB0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uYXJjaGV0eXBlXG4gICAgICApIHtcbiAgICAgICAgdmFsdWUgKz0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmFyY2hldHlwZSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9yIGFsbCBvdGhlcnMgYWN0b3Igd2Ugc3RvcmUgdGhlIHZhbHVlIGRpcmVjdGx5XG4gICAgICB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gIWlzTmFOKHZhbHVlKSA/IHZhbHVlIDogbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHNraWxsJ3MgdmFsdWUgYWZ0ZXIgYWN0aXZlIGVmZmVjdHMgaGF2ZSBiZWVuIGFwcGxpZWRcbiAgICovXG4gIGdldCB2YWx1ZSAoKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLnBhcmVudD8uc3lzdGVtLnNraWxscz8uW2Ake3RoaXMuaXRlbUlkZW50aWZpZXJ9YF0/LnZhbHVlXG4gICAgcmV0dXJuIHZhbHVlIHx8IHRoaXMucmF3VmFsdWVcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVZhbHVlICh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBjb25zdCBkZWx0YSA9IHBhcnNlSW50KHZhbHVlKSAtIHRoaXMucmF3VmFsdWVcbiAgICAgIGNvbnN0IGV4cCA9XG4gICAgICAgICh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICA6IDApICsgZGVsdGFcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogZXhwID4gMCA/IGV4cCA6IDBcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBpbmNyZWFzZUV4cGVyaWVuY2UgKHgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBjb25zdCBleHAgPVxuICAgICAgICAodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UpXG4gICAgICAgICAgOiAwKSArIHBhcnNlSW50KHgpXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IGV4cCA+IDAgPyBleHAgOiAwXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8vIGdldCB2YWx1ZSAoKSB7XG4gIC8vICAgbGV0IHBWYWx1ZVxuICAvLyAgIGlmKCB0aGlzLnBhcmVudCl7XG5cbiAgLy8gICB9XG4gIC8vICAgY29uc3QgdmFsdWUgPSBzdXBlci52YWx1ZVxuICAvLyAgIGxldCB1cGRhdGVkID0gdmFsdWVcbiAgLy8gICBmb3IgKGNvbnN0IGNoYW5nZSBvZiB0aGlzLmFjdGl2ZUVmZmVjdHMpIHtcbiAgLy8gICAgIGNvbnN0IG1vZGlmaWVyID0gTnVtYmVyLmZyb21TdHJpbmcoY2hhbmdlLnZhbHVlKVxuICAvLyAgICAgaWYgKCFpc05hTihtb2RpZmllcikpIHtcbiAgLy8gICAgICAgY29uc3QgbW9kZXMgPSBDT05TVC5BQ1RJVkVfRUZGRUNUX01PREVTXG4gIC8vICAgICAgIHN3aXRjaCAoY2hhbmdlLm1vZGUpIHtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLkFERDpcbiAgLy8gICAgICAgICAgIHVwZGF0ZWQgKz0gbW9kaWZpZXJcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5NVUxUSVBMWTpcbiAgLy8gICAgICAgICAgIHVwZGF0ZWQgPSBNYXRoLnJvdW5kKHVwZGF0ZWQgKiBtb2RpZmllcilcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5PVkVSUklERTpcbiAgLy8gICAgICAgICAgIHVwZGF0ZWQgPSBtb2RpZmllclxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLlVQR1JBREU6XG4gIC8vICAgICAgICAgICBpZiAobW9kaWZlciA+IHVwZGF0ZWQpIHVwZGF0ZWQgPSBtb2RpZmllclxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLkRPV05HUkFERTpcbiAgLy8gICAgICAgICAgIGlmIChtb2RpZmVyIDwgdXBkYXRlZCkgdXBkYXRlZCA9IG1vZGlmaWVyXG4gIC8vICAgICAgICAgICBicmVha1xuICAvLyAgICAgICB9XG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyAgIGlmICghaXNOYU4odXBkYXRlZCkgJiYgdXBkYXRlZCAhPSB2YWx1ZSkge1xuICAvLyAgICAgaWYgKHVwZGF0ZWQgPCAwKSB1cGRhdGVkID0gMFxuICAvLyAgICAgcmV0dXJuIHVwZGF0ZWRcbiAgLy8gICB9IHJldHVybiB2YWx1ZVxuICAvLyB9XG59XG4iLCJpbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9yLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1ZlaGljbGUgZXh0ZW5kcyBDb0NBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvamVlcC5zdmcnXG4gICAgfVxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICBnZXQgcmF3QnVpbGQgKCkge1xuICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gIH1cblxuICBnZXQgYnVpbGQgKCkge1xuICAgIGNvbnN0IGJ1aWxkID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSlcbiAgICByZXR1cm4gaXNOYU4oYnVpbGQpID8gbnVsbCA6IGJ1aWxkXG4gIH1cblxuICBnZXQgaHAgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCA9PT0gbnVsbCB8fFxuICAgICAgdW5kZWZpbmVkID09PSB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgfHxcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCA9PT0gJydcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWVcbiAgICApIHtcbiAgICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gICAgfVxuICAgIGNvbnN0IGhwID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50KVxuICAgIHJldHVybiBpc05hTihocCkgPyBudWxsIDogaHBcbiAgfVxuXG4gIGdldCBocE1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgfVxuXG4gIGdldCByYXdIcE1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgfVxuXG4gIGFzeW5jIHNldEhwICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA+IHRoaXMuYnVpbGQpIHZhbHVlID0gdGhpcy5idWlsZFxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50JzogdmFsdWUgfSlcbiAgfVxuXG4gIGdldCByYXdEYiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGJcbiAgfVxuXG4gIGdldCBkYiAoKSB7XG4gICAgY29uc3QgZGIgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmRiPy52YWx1ZSlcbiAgICByZXR1cm4gaXNOYU4oZGIpID8gbnVsbCA6IGRiXG4gIH1cblxuICBnZXQgcmF3TW92ICgpIHtcbiAgICByZXR1cm4gdGhpcy5tb3ZcbiAgfVxuXG4gIGdldCBtb3YgKCkge1xuICAgIGNvbnN0IG1vdiA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubW92Py52YWx1ZSlcbiAgICByZXR1cm4gaXNOYU4obW92KSA/IG51bGwgOiBtb3ZcbiAgfVxuXG4gIGdldCBtcE1heCAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnM/Lm1wPy5tYXgpIHx8IDBcbiAgfVxuXG4gIGdldCByYXdNcE1heCAoKSB7XG4gICAgcmV0dXJuIHRoaXMubXBNYXhcbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgcmF3U2FuTWF4ICgpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGljZVRlcm0gKi9cblxuZXhwb3J0IGNsYXNzIENvQzdEZWNhZGVyRGllIGV4dGVuZHMgRGljZVRlcm0ge1xuICBjb25zdHJ1Y3RvciAodGVybURhdGEpIHtcbiAgICBzdXBlcih0ZXJtRGF0YSlcbiAgICB0aGlzLmZhY2VzID0gMTBcbiAgfVxuXG4gIGdldCB0b3RhbCAoKSB7XG4gICAgY29uc3QgdG90YWwgPSBzdXBlci50b3RhbFxuICAgIHJldHVybiB0b3RhbCA9PT0gMTAgPyAwIDogdG90YWwgKiAxMFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGF0aWMgZ2V0IERFTk9NSU5BVElPTiAoKSB7XG4gICAgcmV0dXJuICd0J1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb0M3RGVjYWRlckRpZSB9IGZyb20gJy4vZGVjYWRlci1kaWUuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3RGVjYWRlckRpZU90aGVyIGV4dGVuZHMgQ29DN0RlY2FkZXJEaWUge1xuICBzdGF0aWMgZ2V0IERFTk9NSU5BVElPTiAoKSB7XG4gICAgcmV0dXJuICdvJ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5jb25zdCBTRVRUSU5HUyA9IHtcbiAgcHVscFJ1bGVzOiB7XG4gICAgbmFtZTogJycsXG4gICAgaGludDogJycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIGluaXRpYXRpdmVSdWxlOiB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGVIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6ICdiYXNpYycsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIGJhc2ljOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGVCYXNpYycsXG4gICAgICBvcHRpb25hbDogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlT3B0aW9uYWwnXG4gICAgfSxcbiAgICBvbkNoYW5nZTogcnVsZSA9PiBfc2V0SW5pdGlhdGl2ZU9wdGlvbnMocnVsZSlcbiAgfSxcbiAgZGV2ZWxvcG1lbnRSb2xsRm9yTHVjazoge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kZXZlbG9wbWVudFJvbGxGb3JMdWNrJyxcbiAgICBoaW50OiAnU0VUVElOR1MuZGV2ZWxvcG1lbnRSb2xsRm9yTHVja0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZURvdWJsZU1heEhlYWx0aDoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Eb3VibGVNYXhIZWFsdGguTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkRvdWJsZU1heEhlYWx0aC5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkRldmVsb3BtZW50Um9sbEx1Y2suTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkRldmVsb3BtZW50Um9sbEx1Y2suSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlQXJjaGV0eXBlOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkFyY2hldHlwZS5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuQXJjaGV0eXBlLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZU9yZ2FuaXphdGlvbjoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Pcmdhbml6YXRpb24uTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLk9yZ2FuaXphdGlvbi5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVUYWxlbnRzOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLlRhbGVudHMuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLlRhbGVudHMuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlRmFzdGVyUmVjb3Zlcnk6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRmFzdGVyUmVjb3ZlcnkuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkZhc3RlclJlY292ZXJ5LkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLklnbm9yZU1ham9yV291bmRzLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5JZ25vcmVNYWpvcldvdW5kcy5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXM6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlQWdlUGVuYWx0aWVzLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5JZ25vcmVBZ2VQZW5hbHRpZXMuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIG9wcG9zZWRSb2xsVGllQnJlYWtlcjoge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PcHBvc2VkUm9sbFRpZUJyZWFrZXInLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PcHBvc2VkUm9sbFRpZUJyZWFrZXJIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfVxufVxuXG5mdW5jdGlvbiBfc2V0SW5pdGlhdGl2ZU9wdGlvbnMgKHJ1bGUpIHtcbiAgbGV0IGRlY2ltYWxzID0gMFxuICBzd2l0Y2ggKHJ1bGUpIHtcbiAgICBjYXNlICdvcHRpb25hbCc6XG4gICAgICBkZWNpbWFscyA9IDJcbiAgICAgIGJyZWFrXG4gICAgY2FzZSAnYmFzaWMnOlxuICAgICAgZGVjaW1hbHMgPSAwXG4gICAgICBicmVha1xuICB9XG4gIENPTkZJRy5Db21iYXQuaW5pdGlhdGl2ZSA9IHtcbiAgICBmb3JtdWxhOiBudWxsLFxuICAgIGRlY2ltYWxzXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdHYW1lUnVsZVNldHRpbmdzIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0aXRsZTogJ1NFVFRJTkdTLlRpdGxlUnVsZXMnLFxuICAgICAgaWQ6ICdydWxlcy1zZXR0aW5ncycsXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvc3lzdGVtL3J1bGUtc2V0dGluZ3MuaHRtbCcsXG4gICAgICB3aWR0aDogNTUwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICBjbG9zZU9uU3VibWl0OiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIGdldERhdGEgKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7fVxuICAgIGNvbnN0IHB1bHBSdWxlcyA9IHtcbiAgICAgIHRydWU6IGZhbHNlLFxuICAgICAgZmFsc2U6IGZhbHNlXG4gICAgfVxuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKFNFVFRJTkdTKSkge1xuICAgICAgb3B0aW9uc1trXSA9IHtcbiAgICAgICAgdmFsdWU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgayksXG4gICAgICAgIHNldHRpbmc6IHZcbiAgICAgIH1cbiAgICAgIGlmIChrLm1hdGNoKC9ecHVscFJ1bGUuezIsfSQvKSkge1xuICAgICAgICBwdWxwUnVsZXNbb3B0aW9uc1trXS52YWx1ZV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIG9wdGlvbnMucHVscFNlbGVjdGlvbiA9IHB1bHBSdWxlcy50cnVlXG4gICAgICA/IHB1bHBSdWxlcy5mYWxzZVxuICAgICAgICA/ICdzb21lJ1xuICAgICAgICA6ICdhbGwnXG4gICAgICA6ICdub25lJ1xuICAgIHJldHVybiBvcHRpb25zXG4gIH1cblxuICBzdGF0aWMgcmVnaXN0ZXJTZXR0aW5ncyAoKSB7XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoU0VUVElOR1MpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgaywgdilcbiAgICB9XG4gICAgX3NldEluaXRpYXRpdmVPcHRpb25zKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2luaXRpYXRpdmVSdWxlJykpXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJyNwdWxwUnVsZXNTZWxlY3QnKVxuICAgICAgLm9uKCdjaGFuZ2UnLCBldmVudCA9PiB0aGlzLm9uQ2hhbmdlUHVscFNlbGVjdChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2lucHV0LnB1bHBSdWxlc1NlbGVjdFt0eXBlPWNoZWNrYm94XScpXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vbkNsaWNrUHVscChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJ2J1dHRvbltuYW1lPXJlc2V0XScpXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vblJlc2V0RGVmYXVsdHMoZXZlbnQpKVxuICB9XG5cbiAgb25DaGFuZ2VQdWxwU2VsZWN0IChldmVudCkge1xuICAgIGNvbnN0IHZhbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkudmFsKClcbiAgICBpZiAodmFsID09PSAnbm9uZScgfHwgdmFsID09PSAnYWxsJykge1xuICAgICAgJCgnI3J1bGVzLXNldHRpbmdzJylcbiAgICAgICAgLmZpbmQoJ2lucHV0LnB1bHBSdWxlc1NlbGVjdFt0eXBlPWNoZWNrYm94XScpXG4gICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjb25zdCBjaGVja2JveCA9ICQodGhpcylcbiAgICAgICAgICBpZiAodmFsID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgIGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnLCBmYWxzZSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIHRydWUpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG9uQ2xpY2tQdWxwIChldmVudCkge1xuICAgIGNvbnN0IHB1bHBSdWxlcyA9IHtcbiAgICAgIHRydWU6IGZhbHNlLFxuICAgICAgZmFsc2U6IGZhbHNlXG4gICAgfVxuICAgICQoJyNydWxlcy1zZXR0aW5ncycpXG4gICAgICAuZmluZCgnaW5wdXQucHVscFJ1bGVzU2VsZWN0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3QgY2hlY2tib3ggPSAkKHRoaXMpXG4gICAgICAgIGlmIChjaGVja2JveC5wcm9wKCdjaGVja2VkJykpIHtcbiAgICAgICAgICBwdWxwUnVsZXMudHJ1ZSA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwdWxwUnVsZXMuZmFsc2UgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgJCgnI3B1bHBSdWxlc1NlbGVjdCcpLnZhbChcbiAgICAgIHB1bHBSdWxlcy50cnVlID8gKHB1bHBSdWxlcy5mYWxzZSA/ICdzb21lJyA6ICdhbGwnKSA6ICdub25lJ1xuICAgIClcbiAgfVxuXG4gIGFzeW5jIG9uUmVzZXREZWZhdWx0cyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZm9yIGF3YWl0IChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoU0VUVElOR1MpKSB7XG4gICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsIGssIHY/LmRlZmF1bHQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlbmRlcigpXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZGF0YSkge1xuICAgIGNvbnN0IHB1bHBSdWxlcyA9IHtcbiAgICAgIHRydWU6IGZhbHNlLFxuICAgICAgZmFsc2U6IGZhbHNlXG4gICAgfVxuICAgIGZvciBhd2FpdCAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKFNFVFRJTkdTKSkge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCBrZXksIGRhdGFba2V5XSlcbiAgICAgIGlmIChrZXkubWF0Y2goL15wdWxwUnVsZS57Mix9JC8pKSB7XG4gICAgICAgIHB1bHBSdWxlc1tkYXRhW2tleV1dID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZXMnLCBwdWxwUnVsZXMudHJ1ZSAmJiAhcHVscFJ1bGVzLmZhbHNlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZHVwbGljYXRlLCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IERyb3BDb0NJRCB9IGZyb20gJy4uLy4uL2FwcHMvZHJvcC1jb2MtaWQuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBcmNoZXR5cGVTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ3NraWxscycpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1kZWxldGUnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ3NraWxscycpKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc2tpbGwnLCBjb2xsZWN0aW9uTmFtZSA9ICdza2lsbHMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGxldCB1c2VDb0NJRCA9IDBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5zeXN0ZW0pIGNvbnRpbnVlXG4gICAgICBpZiAoIVt0eXBlXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh1c2VDb0NJRCA9PT0gMCkge1xuICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgfVxuICAgICAgY29sbGVjdGlvbi5wdXNoKERyb3BDb0NJRC5wcm9jZXNzSXRlbSh1c2VDb0NJRCwgaXRlbSkpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICB9KVxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb25cblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJChgPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPiR7Y2hhdERhdGEudmFsdWV9PC9kaXY+YClcbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICAvLyBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykgeyBwcm9wcy5hcHBlbmQoYDxzcGFuIGNsYXNzPVwidGFnXCI+JHtwfTwvc3Bhbj5gKSB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1EZWxldGUgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUlkID0gaXRlbS5kYXRhKCdpdGVtLWlkJylcbiAgICBjb25zdCBDb0NJZCA9IGl0ZW0uZGF0YSgnY29jaWQnKVxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChpID0+IChpdGVtSWQgJiYgaS5faWQgPT09IGl0ZW1JZCkgfHwgKENvQ0lkICYmIGkgPT09IENvQ0lkKSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdvY2N1cGF0aW9uJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYXJjaGV0eXBlLmh0bWwnLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJyB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcblxuICAgIGNvbnN0IGNvcmVDaGFyYWN0ZXJpc3RpY3MgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgc2VsZWN0ZWRdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NcbiAgICApKSB7XG4gICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgY29uc3QgY2hhcmFjTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShgQ0hBUkFDLiR7a2V5LnRvVXBwZXJDYXNlKCl9YClcbiAgICAgICAgY29yZUNoYXJhY3RlcmlzdGljcy5wdXNoKGNoYXJhY05hbWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkU3VnZ2VzdGVkT2NjdXBhdGlvbnMgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc3VnZ2VzdGVkT2NjdXBhdGlvbnMsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkU3VnZ2VzdGVkVHJhaXRzID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnN1Z2dlc3RlZFRyYWl0cyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG4gICAgc2hlZXREYXRhLnNraWxsTGlzdEVtcHR5ID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscy5sZW5ndGggPT09IDBcblxuICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljc1N0cmluZyA9ICcnXG4gICAgY29uc3Qgb3JTdHJpbmcgPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9yJyl9IGBcbiAgICBpZiAoY29yZUNoYXJhY3RlcmlzdGljcy5sZW5ndGgpIHtcbiAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nICs9IGNvcmVDaGFyYWN0ZXJpc3RpY3Muam9pbihvclN0cmluZylcbiAgICB9XG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHVscFRhbGVudHMnKX06ICR7c2hlZXREYXRhLmRhdGEuc3lzdGVtLnRhbGVudHN9YFxuICAgIClcbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Cb251c1BvaW50cycpfTogJHtzaGVldERhdGEuZGF0YS5zeXN0ZW0uYm9udXNQb2ludHN9YFxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZHVwbGljYXRlLCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdCb29rU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9ib29rL21haW4uaHRtbCcsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnaXRlbScsICdib29rJ10sXG4gICAgICB3aWR0aDogNTAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5zcGVsbHMnLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICBzY3JvbGxZOiBbJy5ib2R5J10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG4gICAgc2hlZXREYXRhLmluaXRpYWxSZWFkaW5nID0gdGhpcy5pdGVtLnN5c3RlbS5pbml0aWFsUmVhZGluZ1xuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmlzT3duZXIgPSB0aGlzLml0ZW0uaXNPd25lclxuICAgIHNoZWV0RGF0YS5zcGVsbHNMZWFybmVkID0gdGhpcy5zcGVsbHNMZWFybmVkXG4gICAgc2hlZXREYXRhLmV4aGF1c3RlZCA9IChhd2FpdCB0aGlzLml0ZW0uY2hlY2tFeGhhdXN0aW9uKCkpICE9PSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zdHVkeUNvbXBsZXRlZCA9IHRoaXMuaXRlbS5zeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MgPT09IHRoaXMuaXRlbS5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5XG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcbiAgICBzaGVldERhdGEuc3BlbGxMaXN0RW1wdHkgPSB0aGlzLml0ZW0uc3lzdGVtLnNwZWxscy5sZW5ndGggPT09IDBcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZENvbnRlbnQgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY29udGVudCxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBnZXQgc3BlbGxzTGVhcm5lZCAoKSB7XG4gICAgbGV0IGFtb3VudCA9IDBcbiAgICBjb25zdCBzcGVsbHMgPSB0aGlzLml0ZW0uc3lzdGVtLnNwZWxsc1xuICAgIGZvciAoY29uc3Qgc3BlbGwgb2Ygc3BlbGxzKSB7XG4gICAgICBpZiAoc3BlbGwuc3lzdGVtLmxlYXJuZWQpIGFtb3VudCsrXG4gICAgfVxuICAgIHJldHVybiBgJHthbW91bnR9IC8gJHtzcGVsbHMubGVuZ3RofWBcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJyNhdHRlbXB0LWluaXRpYWwtcmVhZGluZycpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIHRoaXMuaXRlbS5hdHRlbXB0SW5pdGlhbFJlYWRpbmcoKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXNwZWxsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25EZWxldGUoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLmVkaXQtc3BlbGwnKS5jbGljayhldmVudCA9PiB0aGlzLl9vblNwZWxsRGV0YWlsKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5zcGVsbC1uYW1lJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25TcGVsbERldGFpbChldmVudCkpXG4gICAgaHRtbC5maW5kKCcudGVhY2gtc3BlbGwnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBjb25zdCBpZCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnbGknKS5kYXRhKCdpZCcpXG4gICAgICB0aGlzLml0ZW0uYXR0ZW1wdFNwZWxsTGVhcm5pbmcoaWQpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJ1tuYW1lPVwic3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVwiXScpLmNoYW5nZShldmVudCA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICB0aGlzLml0ZW0uY2hhbmdlUHJvZ3Jlc3MoJ3Jlc2V0JywgdmFsdWUpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJyNpbmNyZWFzZS1wcm9ncmVzcycpLmNsaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuaXRlbS5jaGFuZ2VQcm9ncmVzcygnaW5jcmVhc2UnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcjZGVjcmVhc2UtcHJvZ3Jlc3MnKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLml0ZW0uY2hhbmdlUHJvZ3Jlc3MoJ2RlY3JlYXNlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmFkZC1vdGhlci1nYWlucycpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMoZXZlbnQsICdhZGQnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcuY2hhbmdlLW90aGVyLWdhaW5zJykuY2hhbmdlKGV2ZW50ID0+IHtcbiAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMoZXZlbnQsICdjaGFuZ2UnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcjcmVkby1mdWxsLXN0dWR5JykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5pdGVtLnJlZG9GdWxsU3R1ZHkoKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcucmVtb3ZlLW90aGVyLWdhaW5zJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhldmVudCwgJ3JlbW92ZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5vcHRpb24nKS5jbGljayhldmVudCA9PiB0aGlzLm1vZGlmeVR5cGUoZXZlbnQpKVxuICB9XG5cbiAgYXN5bmMgX29uU3BlbGxEZXRhaWwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGVsZW1lbnQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgLyoqIEBzZWUgZGF0YS1pbmRleCBwcm9wZXJ0eSBvbiB0ZW1wbGF0ZSAqL1xuICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudC5wYXJlbnRzKCdsaScpLmRhdGEoJ2luZGV4JylcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5pdGVtLnNwZWxsRGV0YWlsKGluZGV4KVxuICB9XG5cbiAgLyoqXG4gICAqIEl0IGlzIGNhbGxlZCBldmVyeSB0aW1lIHRoZSB1c2VyIGRlbGV0ZSBhIHNwZWxsIG9uIHRoZSBzaGVldFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgX29uRGVsZXRlIChldmVudCkge1xuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHJldHVyblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIC8qKiBAc2VlIGRhdGEtaW5kZXggcHJvcGVydHkgb24gdGVtcGxhdGUgKi9cbiAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQucGFyZW50cygnbGknKS5kYXRhKCdpbmRleCcpXG4gICAgLyoqIEFsd2F5cyBoYXMgdG8gYmUgQHR5cGUge0FycmF5fSAqL1xuICAgIGNvbnN0IHNwZWxscyA9IHRoaXMuaXRlbS5zeXN0ZW0uc3BlbGxzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnNwZWxscylcbiAgICAgIDogW11cbiAgICBpZiAoaW5kZXggPj0gMCkgc3BlbGxzLnNwbGljZShpbmRleCwgMSlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uc3BlbGxzJzogc3BlbGxzIH0pXG4gIH1cblxuICAvKipcbiAgICogSXQgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgZHJhZ3MgYW4gaXRlbSB0byB0aGUgc2hlZXRcbiAgICogRmlsdGVycyBvbmx5ICdzcGVsbCcgaXRlbXMgYW5kIGluc2VydHMgdGhlbSBpbiBhIEB0eXBlIHtBcnJheX1cbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NwZWxsJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBjb25zdCBzcGVsbHMgPSBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFbJ3NraWxsJywgJ3NwZWxsJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkgY29udGludWVcbiAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdzcGVsbCcpIHtcbiAgICAgICAgc3BlbGxzLnB1c2goaXRlbSlcbiAgICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnICYmIHRoaXMuaXRlbS5zeXN0ZW0udHlwZS5vdGhlcikge1xuICAgICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKG51bGwsICdhZGQnLCB7IG5hbWU6IGl0ZW0ubmFtZSB9KVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLml0ZW0uYWRkU3BlbGxzKHNwZWxscylcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgdGhlIGNoZWNrYm94ZXMgZm9yIHR5cGUgd2hlbiB1c2VyIGNsaWNrcyBvbiB0aGUgY29ycmVzcG9uZGluZ1xuICAgKiBsYWJlbCwgbm90IHN1cmUgaWYgdGhpcyB3b3JrcyBvbiBlbmdpbmVzIG90aGVyIHRoYW4gVjhcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge2pRdWVyeS5FdmVudH0gY2xpY2tcbiAgICovXG4gIG1vZGlmeVR5cGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8qKiBQcmV2ZW50cyBwcm9wYWdhdGlvbiBvZiB0aGUgc2FtZSBldmVudCBmcm9tIGJlaW5nIGNhbGxlZCAqL1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgdG9nZ2xlU3dpdGNoID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIHJldHVybiB0b2dnbGVTd2l0Y2gucHJldigpLnRyaWdnZXIoJ2NsaWNrJylcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZnkgSXRlbSBkYXRhIGJhc2VkIG9uIHVzZXIgaW50ZXJhY3Rpb25zIHdpdGggdGhlIG90aGVyIHNraWxsXG4gICAqIGdhaW5zIHRhYmxlIG9uIGRldGFpbHMgdGFiIG9uIHRoaXMgc2hlZXRcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgJ2FkZCcgfHwgJ2NoYW5nZScgfHwgJ3JlbW92ZSdcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgbW9kaWZ5T3RoZXJzR2FpbnMgKGV2ZW50LCBtb2RlLCBvcHRpb25zID0ge30pIHtcbiAgICAvKiogTm8gbmVlZCB0byBjaGVjayBpZiB1c2VyIGlzIEdNIGJlY2F1c2Ugb25seSB0aGV5IGNhbiBzZWUgZGV0YWlscyB0YWIgKi9cbiAgICBsZXQgaW5kZXggPSBudWxsXG4gICAgbGV0IGVsZW1lbnQgPSBudWxsXG4gICAgaWYgKGV2ZW50KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgLyoqIEBzZWUgZGF0YS1pbmRleCBwcm9wZXJ0eSBvbiB0ZW1wbGF0ZSAqL1xuICAgICAgaW5kZXggPSBlbGVtZW50LnBhcmVudHMoJ3RyJykuZGF0YSgnaW5kZXgnKVxuICAgICAgLyoqIEFsd2F5cyBoYXMgdG8gYmUgQHR5cGUge0FycmF5fSAqL1xuICAgIH1cbiAgICBjb25zdCBza2lsbHMgPSB0aGlzLml0ZW0uc3lzdGVtLmdhaW5zLm90aGVyc1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5nYWlucy5vdGhlcnMpXG4gICAgICA6IFtdXG4gICAgc3dpdGNoIChtb2RlKSB7XG4gICAgICBjYXNlICdhZGQnOlxuICAgICAgICAvKiogVXNlciBjbGlja2VkIG9uIHBsdXMgaWNvbiB0byBhZGQgYSBuZXcgc2tpbGwgb24gb3RoZXIgZ2FpbnMgdGFibGUgKi9cbiAgICAgICAgc2tpbGxzLnB1c2goe1xuICAgICAgICAgIC8qKiBuZXcgc2tpbGwgKi9cbiAgICAgICAgICBuYW1lOiBvcHRpb25zLm5hbWUgfHwgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5ld1NraWxsTmFtZScpLFxuICAgICAgICAgIC8qKiBkZXZlbG9wbWVudCBieSBkZWZhdWx0LCB2YWx1ZSBjYW4gYWxzbyBiZSAxZDYgb3IgMWQxMCAqL1xuICAgICAgICAgIHZhbHVlOiAnZGV2ZWxvcG1lbnQnXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjaGFuZ2UnOlxuICAgICAgICAvKiogVXNlciBjaGFuZ2VkIG5hbWUgKGlucHV0KSBvciB2YWx1ZSAoc2VsZWN0KSBvZiBhIHNraWxsIG9uIHRhYmxlICovXG4gICAgICAgIHNraWxsc1tpbmRleF0gPSB7XG4gICAgICAgICAgbmFtZTogZWxlbWVudC5pcygnaW5wdXQnKSA/IGVsZW1lbnQudmFsKCkgOiBza2lsbHNbaW5kZXhdLm5hbWUsXG4gICAgICAgICAgdmFsdWU6IGVsZW1lbnQuaXMoJ3NlbGVjdCcpID8gZWxlbWVudC52YWwoKSA6IHNraWxsc1tpbmRleF0udmFsdWVcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncmVtb3ZlJzpcbiAgICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBtaW51cyBpY29uIHRvIHJlbW92ZSBhIHNraWxsIG9uIG90aGVyIGdhaW5zIHRhYmxlICovXG4gICAgICAgIGlmIChpbmRleCA+PSAwKSBza2lsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uZ2FpbnMub3RoZXJzJzogc2tpbGxzIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvclNoZWV0LCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDb250YWluZXJTaGVldCBleHRlbmRzIEFjdG9yU2hlZXQge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIDVlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdhY3RvcicsICdzdG9yYWdlJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3N0b3JhZ2Utc2hlZXQuaHRtbCcsXG4gICAgICB3aWR0aDogNjcyLFxuICAgICAgaGVpZ2h0OiA3NjUsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nLCBkcm9wU2VsZWN0b3I6IG51bGwgfV0sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXYnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnaXRlbXMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgaXRlbXMgPSB0aGlzLmFjdG9yLml0ZW1zLnRvT2JqZWN0KCkgfHwgW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5zeXN0ZW0pIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIGlmICghWydib29rJywgJ2l0ZW0nLCAnc3BlbGwnLCAnd2VhcG9uJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgaXRlbXMucHVzaChpdGVtLnRvT2JqZWN0KCkpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKHsgaXRlbXMgfSlcbiAgfVxuXG4gIG9uQ2xvc2VTaGVldCAoKSB7fVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHNoZWV0RGF0YS5lZGl0YWJsZSA9IHRoaXMuaXNFZGl0YWJsZVxuXG4gICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlID0ge31cbiAgICBpZiAoc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKFxuICAgICAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlLFxuICAgICAgICAgICAgaXRlbS50eXBlXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXSA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV0ucHVzaChpdGVtKVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBpdGVtVHlwZSBpbiBzaGVldERhdGEuaXRlbXNCeVR5cGUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW1UeXBlXS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuYWxsb3dVbmxvY2sgPVxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdhbHdheXMnIHx8XG4gICAgICBnYW1lLnVzZXIuaXNHTVxuXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnaXRlbScpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2Jvb2snKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnc3BlbGwnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3RhbGVudCcpIHx8XG4gICAgICAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWQgJiZcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVUYWxlbnRzJykpXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICd3ZWFwb24nKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcblxuICAgIHNoZWV0RGF0YS5oYXNJbnZlbnRvcnkgPVxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLmZpbmQoJy5pdGVtLWVkaXQnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoZXYuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgICAgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuaW52ZW50b3J5LWhlYWRlcicpLmNsaWNrKHRoaXMuX29uSW52ZW50b3J5SGVhZGVyLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5pdGVtLXRyYWRlJykuY2xpY2sodGhpcy5fb25UcmFkZUl0ZW0uYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5zaG93LWRldGFpbCcpLmNsaWNrKHRoaXMuX29uSXRlbVN1bW1hcnkuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2soYXN5bmMgZXYgPT4ge1xuICAgICAgY29uc3QgbGkgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICAgIGNvbnN0IGl0ZW1Ub0RlbGV0ZSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpLCB7XG4gICAgICAgIHN0cmljdDogdHJ1ZVxuICAgICAgfSlcbiAgICAgIGF3YWl0IGl0ZW1Ub0RlbGV0ZS5kZWxldGUoKVxuICAgICAgbGkuc2xpZGVVcCgyMDAsICgpID0+IHRoaXMucmVuZGVyKGZhbHNlKSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLWl0ZW0nKS5jbGljayhldiA9PiB7XG4gICAgICBzd2l0Y2ggKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ2Jvb2snOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlCb29rKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlJdGVtKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NraWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U2tpbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc3BlbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTcGVsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlXZWFwb24oZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubG9jaycpLmNsaWNrKHRoaXMuX29uTG9ja0NsaWNrZWQuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2tDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpc0xvY2tlZCA9IHRoaXMuYWN0b3IubG9ja2VkXG4gICAgdGhpcy5hY3Rvci5sb2NrZWQgPSAhaXNMb2NrZWRcbiAgfVxuXG4gIGFzeW5jIF9vblRyYWRlSXRlbSAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcbiAgICBsZXQgY29udGVudCA9ICc8cD4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VTZWxlY3RVc2VyVG9HaXZlVG8nKVxuICAgIGNvbnN0IG1lc3NhZ2UgPSB7XG4gICAgICBhY3RvckZyb206IHRoaXMuYWN0b3IuaWQsXG4gICAgICBzY2VuZTogbnVsbCxcbiAgICAgIGFjdG9yVG86IHRoaXMuYWN0b3IuaWQsXG4gICAgICBpdGVtOiBpdGVtLmlkXG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuPy5hY3Rvcikge1xuICAgICAgbWVzc2FnZS5hY3RvckZyb20gPSB0aGlzLnRva2VuLmlkXG4gICAgICBtZXNzYWdlLnNjZW5lID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcbiAgICB9XG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnMuZmlsdGVyKGUgPT4ge1xuICAgICAgaWYgKCFbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnLCAnY29udGFpbmVyJ10uaW5jbHVkZXMoZS50eXBlKSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmFjdG9yLmlkID09PSBlLmlkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgbGV0IHZpc2libGUgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZS5vd25lcnNoaXApKSB7XG4gICAgICAgIGlmIChrID09PSAnZGVmYXVsdCcgfHwgayA9PT0gZ2FtZS51c2VyLmlkKSB7XG4gICAgICAgICAgdmlzaWJsZSA9XG4gICAgICAgICAgICB2aXNpYmxlIHx8XG4gICAgICAgICAgICB2ICE9PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHZpc2libGVcbiAgICB9KVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzxmb3JtIGlkPVwic2VsZWN0Zm9ybVwiPjxzZWxlY3QgbmFtZT1cInVzZXJcIj4nXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3RvcnMpIHtcbiAgICAgIGNvbnRlbnQgPVxuICAgICAgICBjb250ZW50ICsgJzxvcHRpb24gdmFsdWU9XCInICsgYWN0b3IuaWQgKyAnXCI+JyArIGFjdG9yLm5hbWUgKyAnPC9vcHRpb24+J1xuICAgIH1cbiAgICBjb250ZW50ID0gY29udGVudCArICc8L3NlbGVjdD48L2Zvcm0+PC9wPidcbiAgICBhd2FpdCBEaWFsb2cucHJvbXB0KHtcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVRpdGxlU2VsZWN0VXNlclRvR2l2ZVRvJyksXG4gICAgICBjb250ZW50LFxuICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNzZWxlY3Rmb3JtJykpXG4gICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgIG1lc3NhZ2UuYWN0b3JUbyA9IHZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgICBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtdHJhZGVpdGVtdG8nLCBtZXNzYWdlKVxuICB9XG5cbiAgX29uSXRlbVN1bW1hcnkgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uZ2V0Q2hhdERhdGEoeyBzZWNyZXRzOiB0aGlzLmFjdG9yLmlzT3duZXIgfSlcblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPjwvZGl2PicpXG5cbiAgICAgIGNvbnN0IGxhYmVscyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLWxhYmVsc1wiPjwvZGl2PicpXG4gICAgICBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEubGFiZWxzKSB7XG4gICAgICAgIGxhYmVscy5hcHBlbmQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLWxhYmVsXCI+PHNwYW4gY2xhc3M9XCJsYWJlbC1uYW1lXCI+JHtwLm5hbWV9IDo8L3NwYW4+PHNwYW4gY2xhc3M9XCJsYWJlbC12YWx1ZVwiPiR7cC52YWx1ZX08L3NwYW4+PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKGxhYmVscylcblxuICAgICAgZGl2LmFwcGVuZChcbiAgICAgICAgJChgPGRpdiBjbGFzcz1cIml0ZW0tZGVzY3JpcHRpb25cIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnZhbHVlfTwvZGl2PmApXG4gICAgICApXG4gICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BjbCkge1xuICAgICAgICBjb25zdCBzcGVjaWFsRGl2ID0gJChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tc3BlY2lhbFwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24uc3BlY2lhbH08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgZGl2LmFwcGVuZChzcGVjaWFsRGl2KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgcHJvcHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwidGFnIGl0ZW0tcHJvcGVydHlcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShwKX08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG5cbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgQ29DN0xpbmsuYmluZEV2ZW50c0hhbmRsZXIoZGl2KVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gICAgLy8gJChldmVudC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcbiAgfVxuXG4gIF9vbkludmVudG9yeUhlYWRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgJChldmVudC5jdXJyZW50VGFyZ2V0KS5zaWJsaW5ncygnbGknKS5zbGlkZVRvZ2dsZSgyMDApXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEcmFnRHJvcCwgRm9ybUFwcGxpY2F0aW9uLCBmb3VuZHJ5LCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IF9wYXJ0aWNpcGFudCB9IGZyb20gJy4uL2l0ZW1zL2NoYXNlL3BhcnRpY2lwYW50LmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRBY3RvclRvQ2hhc2UnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyLmh0bWwnLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlciddLFxuICAgICAgZWRpdGFibGU6IHRydWUsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgc3VibWl0T25DaGFuZ2U6IHRydWUsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHdpZHRoOiAzMDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudERyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5mb3JtLWNvbnRhaW5lcicsXG4gICAgICBwZXJtaXNzaW9uczogeyBkcm9wOiBnYW1lLnVzZXIuaXNHTSB9LFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uRHJvcFBhcnRpY2lwYW50LmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgcGFydGljaXBhbnREcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBjb25zdCB0b2tlblNlbGVjdG9yRHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJhZ1NlbGVjdG9yOiAnLmNoYXNlLXRva2VuJyxcbiAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgIGRyYWdzdGFydDogZ2FtZS51c2VyLmlzR01cbiAgICAgIH0sXG4gICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9vblRva2VuU2VsZWN0b3JEcmFnU3RhcnQuYmluZCh0aGlzKVxuICAgICAgfVxuICAgIH0pXG4gICAgdG9rZW5TZWxlY3RvckRyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGh0bWwuZmluZCgnLnJlc2V0LXBhcnRpY2lwYW50JykuY2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5vYmplY3QgPSB7fVxuICAgICAgdGhpcy5fYWN0b3IgPSBudWxsXG4gICAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5mb29kLWNoYWluJykuY2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5vYmplY3QuY2hhc2VyID0gIXRoaXMub2JqZWN0LmNoYXNlclxuICAgICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCdbZGF0YS1hY3Rpb25dJykuY2xpY2sodGhpcy5fb25BY3Rpb24uYmluZCh0aGlzKSlcblxuICAgIC8vIGh0bWwuZmluZCgnYnV0dG9uJykuY2xpY2sodGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vblRva2VuU2VsZWN0b3JEcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHR5cGU6ICdnZXRUb2tlbicsXG4gICAgICBhcHBJZDogdGhpcy5hcHBJZCxcbiAgICAgIGNhbGxCYWNrOiAnYWRkVG9rZW5Ub0NoYXNlJ1xuICAgIH1cbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgaWYgKCF0aGlzLm9iamVjdC5pbml0aWF0aXZlKSB7XG4gICAgICBjb25zdCBpbml0ID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZmluZChcbiAgICAgICAgYyA9PiBjLmtleSA9PT0gJ2RleCdcbiAgICAgIClcbiAgICAgIHRoaXMub2JqZWN0LmluaXRpYXRpdmUgPSBpbml0LmxhYmVsXG4gICAgICAvLyB0aGlzLm9iamVjdC5pbml0aWF0aXZlID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgLy8gICAnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnXG4gICAgICAvLyApfSAoJHtpbml0LnNob3J0TmFtZX0pYFxuICAgIH1cbiAgICBpZiAoIXRoaXMub2JqZWN0LnNwZWVkQ2hlY2spIHtcbiAgICAgIGNvbnN0IHNwZWVkQ2hlY2sgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5maW5kKFxuICAgICAgICBjID0+IGMua2V5ID09PSAnY29uJ1xuICAgICAgKVxuICAgICAgdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHtcbiAgICAgICAgbmFtZTogc3BlZWRDaGVjay5sYWJlbFxuICAgICAgfVxuICAgICAgLy8gdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHtcbiAgICAgIC8vICAgbmFtZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljcycpfSAoJHtcbiAgICAgIC8vICAgICBzcGVlZENoZWNrLnNob3J0TmFtZVxuICAgICAgLy8gICB9KWBcbiAgICAgIC8vIH1cbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlUGFydGljaXBhbnQoKVxuXG4gICAgLy8gY29uc3Qgc3BlZWRDaGVjayA9IHRoaXMuYWN0b3I/LmZpbmQoIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2s/Lm5hbWUpXG4gICAgLy8gaWYoIHNwZWVkQ2hlY2spe1xuICAgIC8vICAgdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHNwZWVkQ2hlY2tcbiAgICAvLyB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLnBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcbiAgICBpZiAoZGF0YS5vYmplY3Quc3BlZWRDaGVjay5uYW1lICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGNvbnN0IHNwZWVkQ2hlY2sgPSB0aGlzLmFjdG9yLmZpbmQoZGF0YS5vYmplY3Quc3BlZWRDaGVjay5uYW1lKVxuICAgICAgaWYgKHNwZWVkQ2hlY2spIHtcbiAgICAgICAgZGF0YS5vYmplY3Quc3BlZWRDaGVjay5zY29yZSA9IHNwZWVkQ2hlY2sudmFsdWUudmFsdWVcbiAgICAgICAgZGF0YS5zcGVlZENoZWNrUmVhZE9ubHkgPSB0cnVlXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBkYXRhLnBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUgJiZcbiAgICAgICAgIXRoaXMub2JqZWN0LnNwZWVkQ2hlY2s/LnNjb3JlXG4gICAgICApIHtcbiAgICAgICAgZGF0YS5vYmplY3Quc3BlZWRDaGVjay5zY29yZSA9IGRhdGEucGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkYXRhLm9iamVjdC5pbml0aWF0aXZlICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGNvbnN0IGluaXRpYXRpdmUgPSB0aGlzLmFjdG9yLmZpbmQoZGF0YS5vYmplY3QuaW5pdGlhdGl2ZSlcbiAgICAgIGlmIChpbml0aWF0aXZlKSB7XG4gICAgICAgIGRhdGEub2JqZWN0LmRleCA9IGluaXRpYXRpdmUudmFsdWUudmFsdWVcbiAgICAgICAgZGF0YS5pbml0UmVhZE9ubHkgPSB0cnVlXG4gICAgICB9IGVsc2UgZGF0YS5vYmplY3QuZGV4ID0gZGF0YS5wYXJ0aWNpcGFudC5pbml0aWF0aXZlXG4gICAgfVxuXG4gICAgZGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICBkYXRhLmNoYXNlID0gdGhpcy5jaGFzZVxuICAgIGRhdGEuZGF0YSA9IHRoaXMuZGF0YVxuXG4gICAgZGF0YS5vcHRpb25zTGlzdCA9IHt9XG4gICAgaWYgKHRoaXMuY2hhc2UpIHtcbiAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdCA9XG4gICAgICAgIHRoaXMuY2hhc2UuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzU2hvcnRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0ID0gW11cbiAgICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PlxuICAgICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChgJHtjLmxhYmVsfWApXG4gICAgICApXG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKX1gXG4gICAgICApXG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpfWBcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PlxuICAgICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChzLm5hbWUpXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGdldCBjaGFzZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9jaGFzZSkge1xuICAgICAgdGhpcy5fY2hhc2UgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZCh0aGlzLm9iamVjdC5jaGFzZVV1aWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jaGFzZVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMub2JqZWN0LmRvY1V1aWQpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLl9hY3Rvcikge1xuICAgICAgdGhpcy5fYWN0b3IgPSBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRnJvbUtleSh0aGlzLm9iamVjdC5kb2NVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcywgZm9ybURhdGEpXG4gICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3BQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCBkcm9wU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRyb3BEYXRhID0gSlNPTi5wYXJzZShkcm9wU3RyaW5nKVxuXG4gICAgY29uc3QgZG9jVXVpZCA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YShkcm9wRGF0YSlcblxuICAgIHRoaXMub2JqZWN0LmRvY1V1aWQgPSBkb2NVdWlkXG5cbiAgICAvLyBJZiBhY3RvciBpcyBjb250cm9sbGVkIGJ5IEdNIG9ubHkgd2UgYXNzdW1lIGhlIGlzIGEgY2hhc2VyXG4gICAgdGhpcy5vYmplY3QuY2hhc2VyID0gdGhpcy5hY3Rvcj8ub3duZXJzPy5maWx0ZXIodSA9PiAhdS5pc0dNKS5sZW5ndGggPT09IDBcbiAgICBpZiAodGhpcy5vYmplY3Quc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZykge1xuICAgICAgZGVsZXRlIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgYWRkVG9rZW5Ub0NoYXNlICh0b2tlbnMpIHtcbiAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGhpcy5vYmplY3QuZG9jVXVpZCA9IHRva2Vuc1swXS5kb2N1bWVudD8udXVpZFxuICAgICAgLy8gSWYgYWN0b3IgaXMgY29udHJvbGxlZCBieSBHTSBvbmx5IHdlIGFzc3VtZSBoZSBpcyBhIGNoYXNlclxuICAgICAgdGhpcy5vYmplY3QuY2hhc2VyID0gdGhpcy5hY3Rvcj8ub3duZXJzPy5maWx0ZXIodSA9PiAhdS5pc0dNKS5sZW5ndGggPT09IDBcbiAgICAgIGlmICh0aGlzLm9iamVjdC5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLm9iamVjdC5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yVG9rZW5JbmNvcnJlY3QnKSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25BY3Rpb24gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgYWN0aW9uID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdjaGFzZS1jYW5jZWwnOlxuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYXNlLWFkZCc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5vYmplY3QpXG5cbiAgICAgICAgICBpZiAodGhpcy5jaGFzZS5zdGFydGVkKSB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICEocGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gJiYgcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gPiAwKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRG9lc05vdE1lZXRNaW5pbXVtUmVxVG9CZUFkZGVkJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGEub3ZlcnJpZGVNb3ZlbWVudEFjdGlvbikge1xuICAgICAgICAgICAgICBjb25zdCBzbG93ZXN0ID0gdGhpcy5jaGFzZS5zbG93ZXN0UGFydGljaXBhbnRcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHBhcnRpY2lwYW50LmFkanVzdGVkTW92KSkge1xuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50Lm1vdiA9IHNsb3dlc3QuYWRqdXN0ZWRNb3ZcbiAgICAgICAgICAgICAgfSAvKiogZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5tb3YgPVxuICAgICAgICAgICAgICAgICAgc2xvd2VzdC5hZGp1c3RlZE1vdiArIHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uIC0gMVxuICAgICAgICAgICAgICB9ICovXG4gICAgICAgICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhd2FpdCB0aGlzLmNoYXNlLmFkZFBhcnRpY2lwYW50KHBhcnRpY2lwYW50LCB7XG4gICAgICAgICAgICBsb2NhdGlvblV1aWQ6IHRoaXMub2JqZWN0LmxvY2F0aW9uVXVpZCxcbiAgICAgICAgICAgIHJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zOiB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCxcbiAgICAgICAgICAgIHVwZGF0ZTogdGhpcy5vYmplY3QudXBkYXRlXG4gICAgICAgICAgfSlcbiAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdyb2xsLXNwZWVkLWNoZWNrJzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcbiAgICAgICAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZTZXQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgICAgICAgcm9sbC5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICAgICAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0NoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcbiAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzU2tpbGwpIHtcbiAgICAgICAgICAgICAgcm9sbC5za2lsbCA9IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmXG4gICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0F0dHJpYnV0ZSkge1xuICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGxBdHRyaWJ1dGUocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlKSB7XG4gICAgICAgICAgICBjb25zdCByb2xsRGF0YSA9IHtcbiAgICAgICAgICAgICAgcmF3VmFsdWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUsXG4gICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLm5hbWUsXG4gICAgICAgICAgICAgIGFjdG9yTmFtZTogcGFydGljaXBhbnQubmFtZSA/IHBhcnRpY2lwYW50Lm5hbWUgOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5oYXNBY3Rvcikge1xuICAgICAgICAgICAgICByb2xsRGF0YS5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmNyZWF0ZShyb2xsRGF0YSlcbiAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHRoaXMub2JqZWN0LCBwYXJ0aWNpcGFudC5kYXRhKVxuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgIH1cblxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHZhbGlkYXRlUGFydGljaXBhbnQgKCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcbiAgICBpZiAoIXRoaXMuZGF0YSkgdGhpcy5kYXRhID0ge31cbiAgICB0aGlzLm9iamVjdC5leGNsdWRlZCA9IGZhbHNlXG4gICAgdGhpcy5vYmplY3QuZXNjYXBlZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudEV4Y2x1ZGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEubW92ZW1lbnRBY3Rpb25EZWx0YSA9IDBcblxuICAgIGlmICghdGhpcy5kYXRhLm92ZXJyaWRlTW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgIGNvbnN0IHNsb3dlc3RQcmV5ID0gdGhpcy5jaGFzZS5zbG93ZXN0UHJleVxuICAgICAgY29uc3QgZmFzdGVzdENoYXNlciA9IHRoaXMuY2hhc2UuZmFzdGVzdENoYXNlclxuICAgICAgY29uc3Qgc2xvd2VzdCA9IHRoaXMuY2hhc2Uuc2xvd2VzdFBhcnRpY2lwYW50XG5cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5hZGp1c3RlZE1vdiA8IHNsb3dlc3Q/LmFkanVzdGVkTW92KSB7XG4gICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gdHJ1ZVxuICAgICAgICBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbiA9IDFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICAgICAgcGFydGljaXBhbnQuY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKHNsb3dlc3Q/LmFkanVzdGVkTW92KVxuICAgICAgfVxuICAgICAgaWYgKHBhcnRpY2lwYW50LmlzQ2hhc2VyKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBzbG93ZXN0UHJleSAmJlxuICAgICAgICAgICF0aGlzLmNoYXNlLnN5c3RlbS5pbmNsdWRlTGFzdENvbW1lcnMgJiZcbiAgICAgICAgICBwYXJ0aWNpcGFudC5hZGp1c3RlZE1vdiA8IHNsb3dlc3RQcmV5LmFkanVzdGVkTW92XG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmV4Y2x1ZGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudEV4Y2x1ZGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuZGF0YS5leGNsdWRlZEJlY2F1c2UgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vU2xvdycpXG4gICAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5pc1ByZXkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGZhc3Rlc3RDaGFzZXIgJiZcbiAgICAgICAgICAhdGhpcy5jaGFzZS5zeXN0ZW0uaW5jbHVkZUVzY2FwZWQgJiZcbiAgICAgICAgICBwYXJ0aWNpcGFudC5hZGp1c3RlZE1vdiA+IGZhc3Rlc3RDaGFzZXIuYWRqdXN0ZWRNb3ZcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZXNjYXBlZCA9IHRydWVcbiAgICAgICAgICB0aGlzLmRhdGEucGFydGljaXBhbnRFeGNsdWRlZCA9IHRydWVcbiAgICAgICAgICB0aGlzLmRhdGEuZXhjbHVkZWRCZWNhdXNlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb0Zhc3QnKVxuICAgICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEpIHtcbiAgICBpZiAoZGF0YS5kcm9wRGF0YSkge1xuICAgICAgY29uc3QgZG9jVXVpZCA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YShkYXRhLmRyb3BEYXRhKVxuICAgICAgaWYgKGRvY1V1aWQpIGRhdGEuZG9jVXVpZCA9IGRvY1V1aWRcbiAgICAgIGRlbGV0ZSBkYXRhLmRyb3BEYXRhXG4gICAgfVxuICAgIHJldHVybiBuZXcgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlcihkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIERpYWxvZywgRHJhZ0Ryb3AsIGR1cGxpY2F0ZSwgZXhwYW5kT2JqZWN0LCBmbGF0dGVuT2JqZWN0LCBGb3JtRGF0YUV4dGVuZGVkLCBmb3VuZHJ5LCBnYW1lLCBnZXRUeXBlLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yLCB1aSAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIgfSBmcm9tICcuLi8uLi9hcHBzL2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuLi8uLi9jaGF0LmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBfcGFydGljaXBhbnQgfSBmcm9tICcuL3BhcnRpY2lwYW50LmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXNlU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICBjb25zdCBvcHRpb25zID0gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2l0ZW0nLCAnY2hhc2UnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9jaGFzZS5odG1sJyxcbiAgICAgIHdpZHRoOiA1NTAsXG4gICAgICBoZWlnaHQ6IDUwMCxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdwYXJ0aWNpcGFudHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuXG4gICAgcmV0dXJuIG9wdGlvbnNcblxuICAgIC8vIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgIC8vIHN1Ym1pdE9uQ2xvc2U6IHRydWUsXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyBnZXQgdHlwZSAoKSB7XG4gICAgcmV0dXJuICdjb2M3Q2hhc2VTaGVldCdcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgZ2V0RGF0YSAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YShvcHRpb25zKVxuXG4gICAgc2hlZXREYXRhLnBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5wYXJ0aWNpcGFudHNPYmplY3RcbiAgICBzaGVldERhdGEucGFydGljaXBhbnRzQnlJbml0aWF0aXZlID0gdGhpcy5pdGVtLnBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZVxuICAgIHNoZWV0RGF0YS5wcmV5cyA9IHRoaXMuaXRlbS5wcmV5c1xuICAgIHNoZWV0RGF0YS5jaGFzZXJzID0gdGhpcy5pdGVtLmNoYXNlcnNcblxuICAgIHNoZWV0RGF0YS5wcmV5c01pbk1vdiA9IHNoZWV0RGF0YS5wcmV5cy5sZW5ndGggPyBzaGVldERhdGEucHJleXMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92IDwgY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXG5cbiAgICBzaGVldERhdGEucHJleXNNYXhNb3YgPSBzaGVldERhdGEucHJleXMubGVuZ3RoID8gc2hlZXREYXRhLnByZXlzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gcHJldi5hZGp1c3RlZE1vdiA+IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudCkuYWRqdXN0ZWRNb3YgOiAtMVxuXG4gICAgc2hlZXREYXRhLmNoYXNlcnNNaW5Nb3YgPSBzaGVldERhdGEuY2hhc2Vycy5sZW5ndGggPyBzaGVldERhdGEuY2hhc2Vycy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHByZXYuYWRqdXN0ZWRNb3YgPCBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnQpLmFkanVzdGVkTW92IDogLTFcblxuICAgIHNoZWV0RGF0YS5jaGFzZXJzTWF4TW92ID0gc2hlZXREYXRhLmNoYXNlcnMubGVuZ3RoID8gc2hlZXREYXRhLmNoYXNlcnMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXG5cbiAgICBzaGVldERhdGEuY2hhc2Vycy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWRqdXN0ZWRNb3YgPCBzaGVldERhdGEucHJleXNNaW5Nb3YpIHtcbiAgICAgICAgcC50b29TbG93KClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAuaW5jbHVkZUluQ2hhc2UoKVxuICAgICAgfVxuICAgICAgcC5mYXN0ZXN0ID0gcC5hZGp1c3RlZE1vdiA9PT0gc2hlZXREYXRhLmNoYXNlcnNNYXhNb3ZcbiAgICAgIHAuc2xvd2VzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5jaGFzZXJzTWluTW92XG4gICAgfSlcblxuICAgIHNoZWV0RGF0YS5wcmV5cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWRqdXN0ZWRNb3YgPiBzaGVldERhdGEuY2hhc2Vyc01heE1vdikge1xuICAgICAgICBwLmVzY2FwZWQoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcC5pbmNsdWRlSW5DaGFzZSgpXG4gICAgICB9XG4gICAgICBwLmZhc3Rlc3QgPSBwLmFkanVzdGVkTW92ID09PSBzaGVldERhdGEucHJleXNNYXhNb3ZcbiAgICAgIHAuc2xvd2VzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5wcmV5c01pbk1vdlxuICAgIH0pXG5cbiAgICBzaGVldERhdGEubG9jYXRpb25zID0gdGhpcy5pdGVtLmxvY2F0aW9uc1xuICAgIHNoZWV0RGF0YS5hbGxIYXZlVmFsaWRNb3YgPSB0aGlzLmFsbEhhdmVWYWxpZE1vdlxuICAgIHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbiA9IHRoaXMuaXRlbS5hY3RpdmVMb2NhdGlvblxuICAgIGlmIChzaGVldERhdGEuYWN0aXZlTG9jYXRpb24pIHtcbiAgICAgIHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi50aXRsZSA9IHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi5jb29yZGluYXRlc1xuICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTG9jYXRpb25Db29yZGluYXRlJywge1xuICAgICAgICAgIHg6IHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi5jb29yZGluYXRlcy54LFxuICAgICAgICAgIHk6IHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbi5jb29yZGluYXRlcy55XG4gICAgICAgIH0pXG4gICAgICAgIDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRyYWdPbkNhbnZhcycpXG4gICAgfVxuICAgIHNoZWV0RGF0YS5wcmV2aW91c0xvY2F0aW9uID0gdGhpcy5pdGVtLnByZXZpb3VzTG9jYXRpb25cbiAgICBzaGVldERhdGEubmV4dExvY2F0aW9uID0gdGhpcy5pdGVtLm5leHRMb2NhdGlvblxuICAgIHNoZWV0RGF0YS5zdGFydGVkID0gdGhpcy5pdGVtLnN0YXJ0ZWRcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLy8gZ2V0IGFjdGl2ZVBhcnRpY2lwYW50ICgpIHtcbiAgLy8gICBpZiAoIXRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKSByZXR1cm4gdW5kZWZpbmVkXG4gIC8vICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gcC5hY3RpdmUpXG4gIC8vICAgaWYgKCFwYXJ0aWNpcGFudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAvLyAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHBhcnRpY2lwYW50KVxuICAvLyB9XG5cbiAgLy8gZ2V0IGFjdGl2ZVBhcnRpY2lwYW50TG9jYXRpb24gKCkge1xuICAvLyAgIGlmICghdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpIHJldHVybiB1bmRlZmluZWRcbiAgLy8gICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzLmZpbmQocCA9PiBwLmFjdGl2ZSlcbiAgLy8gfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgLy8gaHRtbC5maW5kKCcuY2hhc2UtdHJhY2snKS5yZWFkeShhc3luYyBodG1sID0+IGF3YWl0IHRoaXMuX29uU2hlZXRSZWFkeShodG1sKSlcblxuICAgIC8vIEhhbmRsZSBEcm9wcm93blxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGRvd24tZWxlbWVudCcpXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5fb25Ecm9wRG93bkVsZW1lbnRTZWxlY3RlZChldmVudCkpXG5cbiAgICBodG1sLmZpbmQoJy5kcm9wYnRuJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGNvbnN0IGRyb3Bkb3duID0gdGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bicpXG4gICAgICBjb25zdCBkcm9wZG93bkNvbnRlbnQgPSBkcm9wZG93bi5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICBkcm9wZG93bkNvbnRlbnQuY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXG4gICAgfSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmRyb3Bkb3duJylcbiAgICAgIC5tb3VzZWxlYXZlKGV2ZW50ID0+XG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKVxuICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JylcbiAgICAgIClcblxuICAgIGh0bWwub24oJ2RibGNsaWNrJywgJy5vcGVuLWFjdG9yJywgQ29DN0NoYXQuX29uT3BlbkFjdG9yLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBpbi1sb2NhdGlvbicpXG4gICAgICAuY29udGV4dG1lbnUodGhpcy5jbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMuYmluZCh0aGlzKSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnZW50ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ292ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ2xlYXZlJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmVQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2Ryb3AnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcblxuICAgIGh0bWwuZmluZCgnLnAtc2lkZScpLmNsaWNrKHRoaXMuX29uQ2hhbmdlU2lkZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1wYXJ0aWNpcGFudCcpLmNsaWNrKHRoaXMuX29uRGVsZXRlUGFydGljaXBhbnQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yZXNldC1yb2xsJykuY2xpY2sodGhpcy5fb25SZXNldFJvbGwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWxldGUtZHJpdmVyJykuY2xpY2sodGhpcy5fb25EZWxldGVEcml2ZXIuYmluZCh0aGlzKSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ2VudGVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnb3ZlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ2xlYXZlJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmVQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcm9wJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmVQYXJ0aWNpcGFudChldmVudCkpXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtc2lnbicpLmNsaWNrKHRoaXMuX29uQWRkUGFydGljaXBhbnQuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLnJvbGwtcGFydGljaXBhbnQnKS5jbGljayh0aGlzLl9vblJvbGxQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuYnV0dG9uJykuY2xpY2sodGhpcy5fb25CdXR0b25DbGljay5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcubmFtZS1jb250YWluZXInKS5jbGljayh0aGlzLl9vbkxvY2F0aW9uQ2xpY2suYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLm9ic3RhY2xlLXR5cGUnKS5jbGljayh0aGlzLl9vbk9ic3RhY2xlVHlwZUNsaWNrLmJpbmQodGhpcykpXG4gICAgLy8gaHRtbC5maW5kKCcub2JzdGFjbGUtdG9nZ2xlJykuY2xpY2sodGhpcy5fb25PYnN0YWNsZVRvZ2dsZUNsaWNrLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlJykuY2xpY2sodGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKHRoaXMuX29uUGFydGljaXBhbnRDb250cm9sQ2xpY2tlZC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuY2hhc2UtY29udHJvbCcpLmNsaWNrKHRoaXMuX29uQ2hhc2VDb250cm9sQ2xpY2tlZC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5sb2NhdGlvbi1jb250cm9sJylcbiAgICAgIC5jbGljayh0aGlzLl9vbkxvY2F0aW9uQ29udHJvbENsaWNrLmJpbmQodGhpcykpXG4gICAgLy8gaHRtbFxuICAgIC8vICAgLmZpbmQoJy5tb3ZlbWVudC1hY3Rpb24gLmRlY3JlYXNlJylcbiAgICAvLyAgIC5jbGljayh0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucy5iaW5kKHRoaXMsIC0xKSlcbiAgICAvLyBodG1sXG4gICAgLy8gICAuZmluZCgnLm1vdmVtZW50LWFjdGlvbiAuaW5jcmVhc2UnKVxuICAgIC8vICAgLmNsaWNrKHRoaXMuX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zLmJpbmQodGhpcywgMSkpXG5cbiAgICAvLyBodG1sXG4gICAgLy8gLmZpbmQoJy5waW4tbG9jYXRpb24nKVxuICAgIC8vIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gdGhpcy5fb25QaW5Mb2NhdGlvbkRyYWdTdGFydChldmVudCkpXG5cbiAgICBjb25zdCBwaW5Mb2NhdGlvblNlbGVjdG9yRHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJhZ1NlbGVjdG9yOiAnLnBpbi1sb2NhdGlvbicsXG4gICAgICBwZXJtaXNzaW9uczoge1xuICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX2NhblBpbkxvY2F0aW9uRHJhZ1N0YXJ0LmJpbmQodGhpcylcbiAgICAgIH0sXG4gICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0LmJpbmQodGhpcylcbiAgICAgIH1cbiAgICB9KVxuICAgIHBpbkxvY2F0aW9uU2VsZWN0b3JEcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudERyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5wYXJ0aWNpcGFudCcsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wUGFydGljaXBhbnQuYmluZCh0aGlzKSB9XG4gICAgfSlcbiAgICBwYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGNvbnN0IG5ld1BhcnRpY2lwYW50RHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLm5ldy1wYXJ0aWNpcGFudCcsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25BZGRQYXJ0aWNpcGFudC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIG5ld1BhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgaWYgKHRoaXMuaXRlbS5zdGFydGVkKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhc2UtbG9jYXRpb24gLmNoYXNlLXBhcnRpY2lwYW50JylcbiAgICAgICAgLmNsaWNrKHRoaXMuX29uQ2hhc2VQYXJ0aWNpcGFudENsaWNrLmJpbmQodGhpcykpXG5cbiAgICAgIGNvbnN0IGNoYXNlUGFydGljaXBhbnREcmFncERyb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgICBkcmFnU2VsZWN0b3I6ICcuY2hhc2UtcGFydGljaXBhbnQnLFxuICAgICAgICBkcm9wU2VsZWN0b3I6ICcuY2hhc2UtbG9jYXRpb24nLFxuICAgICAgICBwZXJtaXNzaW9uczoge1xuICAgICAgICAgIGRyYWdzdGFydDogdGhpcy5fY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydC5iaW5kKHRoaXMpLFxuICAgICAgICAgIGRyb3A6IHRoaXMuX2NhbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcC5iaW5kKHRoaXMpXG4gICAgICAgIH0sXG4gICAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICAgIGRyYWdzdGFydDogdGhpcy5fb25DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0LmJpbmQodGhpcyksXG4gICAgICAgICAgZHJvcDogdGhpcy5fb25DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZCh0aGlzKSxcbiAgICAgICAgICBkcmFnb3ZlcjogdGhpcy5fb25EcmFnRW50ZXIuYmluZCh0aGlzKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgY2hhc2VQYXJ0aWNpcGFudERyYWdwRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5jaGFzZS1sb2NhdGlvbicpXG4gICAgICAgIC5vbignZHJhZ2xlYXZlJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmUoZXZlbnQpKVxuICAgIH1cbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qICBGb3JtIFN1Ym1pc3Npb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBfZ2V0U3VibWl0RGF0YSAodXBkYXRlRGF0YSA9IHt9KSB7XG4gICAgLy8gQ3JlYXRlIHRoZSBleHBhbmRlZCB1cGRhdGUgZGF0YSBvYmplY3RcbiAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwgeyBlZGl0b3JzOiB0aGlzLmVkaXRvcnMgfSlcbiAgICBsZXQgZGF0YSA9IGZkLm9iamVjdFxuICAgIGlmICh1cGRhdGVEYXRhKSB7XG4gICAgICBkYXRhID0gbWVyZ2VPYmplY3QoZGF0YSwgdXBkYXRlRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YSA9IGV4cGFuZE9iamVjdChkYXRhKVxuICAgIH1cblxuICAgIC8vIENoZWNrIHRoYXQgc3RhcnRpbmcgcG9zaXRpb24gaXMgbm90IG91dHNpZGUgb2YgY2hhc2UgcmFuZ2UuXG4gICAgaWYgKFxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnM/Lmxpc3Q/Lmxlbmd0aCAmJlxuICAgICAgZGF0YS5zeXN0ZW0uc3RhcnRpbmdJbmRleCA+IHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgKSB7XG4gICAgICBkYXRhLnN5c3RlbS5zdGFydGluZ0luZGV4ID0gdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGhcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5zeXN0ZW0ucGFydGljaXBhbnRzKSB7XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICAvLyBIYW5kbGUgcGFydGljaXBhbnRzIGFycmF5XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLnN5c3RlbS5wYXJ0aWNpcGFudHMpKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcGFydGljaXBhbnRzLmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gaylcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkgdWkubm90aWZpY2F0aW9ucy5lcnJvcignUGFydGljaXBhbnQgdGFibGUgY29ycnVwdGVkJylcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWwgPSBwYXJ0aWNpcGFudHNbaW5kZXhdXG4gICAgICAgICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuKHYpXG4gICAgICAgICAgbWVyZ2VPYmplY3Qob3JpZ2luYWwsIGNsZWFuZWQpXG4gICAgICAgICAgcGFydGljaXBhbnRzW2luZGV4XSA9IG9yaWdpbmFsXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZGF0YS5zeXN0ZW0ucGFydGljaXBhbnRzID0gcGFydGljaXBhbnRzXG4gICAgfVxuXG4gICAgaWYgKGRhdGEubG9jYXRpb25zKSB7XG4gICAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgIC8vIEhhbmRsZSBsb2NhdGlvbnMgbGlzdFxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5sb2NhdGlvbnMpKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC51dWlkID09PSBrZXkpXG4gICAgICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0xvY2F0aW9ucyB0YWJsZSBjb3JydXB0ZWQnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTG9jYXRpb24gPSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF1cbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW4odmFsdWUpXG4gICAgICAgICAgbWVyZ2VPYmplY3Qob3JpZ2luYWxMb2NhdGlvbiwgY2xlYW5lZClcbiAgICAgICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0gPSBvcmlnaW5hbExvY2F0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZGVsZXRlIGRhdGEubG9jYXRpb25zXG4gICAgICBkYXRhLnN5c3RlbS5sb2NhdGlvbnMgPSB7IGxpc3Q6IGxvY2F0aW9ucyB9XG4gICAgfVxuICAgIC8vIGNvbnN0IHBhcnRpY2lwYW50cyA9IGRhdGEuc3lzdGVtPy5wYXJ0aWNpcGFudHM7XG4gICAgLy8gaWYoIHBhcnRpY2lwYW50cykgZGF0YS5zeXN0ZW0ucGFydGljaXBhbnRzID0gT2JqZWN0LnZhbHVlcyggcGFydGljaXBhbnRzKS5tYXAoIHAgPT4gY2xlYW4ocCkpO1xuXG4gICAgLy8gUmV0dXJuIHRoZSBmbGF0dGVuZWQgc3VibWlzc2lvbiBkYXRhXG4gICAgcmV0dXJuIGZsYXR0ZW5PYmplY3QoZGF0YSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgLy8gYXN5bmMgX29uU3VibWl0KC4uLmFyZ3MpIHtcbiAgLy8gIGF3YWl0IHN1cGVyLl9vblN1Ym1pdCguLi5hcmdzKTtcbiAgLy8gfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBvdmVycmlkZSA9IHRhcmdldD8uZGF0YXNldD8ub3ZlcnJpZGUgPT09ICd0cnVlJ1xuICAgIGlmICh0YXJnZXQ/Lm5hbWU/LmluY2x1ZGVzKCcuaHAnKSkge1xuICAgICAgY29uc3QgWywgLCB1dWlkXSA9IHRhcmdldC5uYW1lLnNwbGl0KCcuJylcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5pdGVtLmdldFBhcnRpY2lwYW50KHV1aWQpXG4gICAgICBpZiAocGFydGljaXBhbnQgJiYgcGFydGljaXBhbnQuYWN0b3IpIHtcbiAgICAgICAgaWYgKCFpc05hTihOdW1iZXIodGFyZ2V0LnZhbHVlKSkpIHtcbiAgICAgICAgICBhd2FpdCBwYXJ0aWNpcGFudC5hY3Rvci5zZXRIcChOdW1iZXIodGFyZ2V0LnZhbHVlKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAob3ZlcnJpZGUpIHtcbiAgICAgIGNvbnN0IFssIHR5cGUsIHV1aWQsIHN1YlR5cGUsIGRhdGFdID0gdGFyZ2V0Lm5hbWUuc3BsaXQoJy4nKVxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgICBpZiAoXG4gICAgICAgIHR5cGUgPT09ICdwYXJ0aWNpcGFudHMnICYmXG4gICAgICAgICFpc05hTihpbmRleCkgJiZcbiAgICAgICAgc3ViVHlwZSA9PT0gJ3NwZWVkLWNoZWNrJ1xuICAgICAgKSB7XG4gICAgICAgIGlmIChkYXRhID09PSAnbmFtZScpIHtcbiAgICAgICAgICAvLyBDaGFuZ2luZyBuYW1lIHdpbGwgcmVtb3ZlIGFsbCBvdGhlciByZWYgIVxuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAgICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgICAgICAgIDogW11cbiAgICAgICAgICBpZiAocGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrKSB7XG4gICAgICAgICAgICBkZWxldGUgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLmlkXG4gICAgICAgICAgICBkZWxldGUgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLnR5cGVcbiAgICAgICAgICB9IGVsc2UgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrID0ge31cbiAgICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2submFtZSA9IHRhcmdldC52YWx1ZVxuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHNldFNjcm9sbCAoYXBwLCBodG1sLCBkYXRhKSB7XG4gICAgaWYgKCFkYXRhLmVkaXRhYmxlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgaW5pdGlhbE9wZW5pbmcgPSBodG1sWzBdLmNsYXNzTGlzdC5jb250YWlucygnd2luZG93LWFwcCcpXG4gICAgY29uc3QgY2hhc2VUcmFjayA9IGh0bWxbMF0ucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJylcbiAgICBpZiAoIWNoYXNlVHJhY2spIHJldHVyblxuXG4gICAgbGV0IHN0YXJ0ID0gZGF0YS5kYXRhLnNjcm9sbD8uY2hhc2VUcmFjay5mcm9tXG4gICAgbGV0IGVuZCA9IGRhdGEuZGF0YS5zY3JvbGw/LmNoYXNlVHJhY2sudG9cbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgc3RhcnQgPSAwXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZW5kID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZW5kID0gLTFcbiAgICB9XG5cbiAgICBpZiAoaW5pdGlhbE9wZW5pbmcpIHtcbiAgICAgIGNvbnN0IHJlbVN0cmluZyA9ICQoJzpyb290JykuY3NzKCdmb250LXNpemUnKVxuICAgICAgY29uc3QgcmVtU2l6ZSA9IE51bWJlcihyZW1TdHJpbmcucmVwbGFjZSgncHgnLCAnJykpXG4gICAgICBpZiAoYXBwLml0ZW0uc3RhcnRlZCkge1xuICAgICAgICBjb25zdCBwQ291bnQgPSBhcHAuaXRlbS5hY3R1YWxQYXJ0aWNpcGFudHM/Lmxlbmd0aFxuICAgICAgICBjb25zdCB3aWR0aCA9IChwQ291bnQgKiAxMS4yICsgMykgKiByZW1TaXplXG4gICAgICAgIGFwcC5hY3RpdmF0ZVRhYignc2V0dXAnKVxuICAgICAgICAvLyBhcHAuX3RhYnNbMF0uYWN0aXZlID0gJ3NldHVwJ1xuICAgICAgICBhcHAucG9zaXRpb24ud2lkdGggPSBNYXRoLm1heCh3aWR0aCwgNDAgKiByZW1TaXplKVxuICAgICAgICAvLyBodG1sLmNzcygnd2lkdGgnLCBgJHt3aWR0aH1weGApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcHAucG9zaXRpb24ud2lkdGggPSA0NSAqIHJlbVNpemVcbiAgICAgIH1cbiAgICAgIHJldHVybiBhd2FpdCBhcHAuaXRlbS5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oeyBodG1sIH0pIC8vIGh0bWwgaXMgbm90IHJlbmRlcmVkLCBlbGVtZW50IGhhdmUgc2l6ZSA9IDBcbiAgICAgIC8vIGlmIChlbmQgPiAwKSB7XG4gICAgICAvLyAgIHN0YXJ0ID0gMFxuICAgICAgLy8gfSBlbHNlIGlmIChzdGFydCA+IDApIHtcbiAgICAgIC8vICAgZW5kID0gc3RhcnRcbiAgICAgIC8vICAgc3RhcnQgPSAwXG4gICAgICAvLyB9XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ICYmIHN0YXJ0ICE9PSAtMSkge1xuICAgICAgY2hhc2VUcmFjay5zY3JvbGxUbyh7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogc3RhcnQsXG4gICAgICAgIGJlaGF2aW9yOiAnaW5zdGFudCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKGVuZCAhPT0gLTEpIHtcbiAgICAgIGNoYXNlVHJhY2suc2Nyb2xsVG8oe1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IGVuZCxcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIGF3YWl0IGFwcC5pdGVtLnVwZGF0ZSh7ICdkYXRhLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0IH0pXG4gIH1cblxuICBzdGF0aWMgb25DbG9zZSAoYXBwLCBodG1sKSB7XG4gICAgYXBwLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS50cmFja1Njcm9sbFBvc2l0aW9uJzogLTEgfSlcbiAgfVxuXG4gIC8vIGFzeW5jIF9vblNoZWV0UmVhZHkgKGh0bWwpIHtcbiAgLy8gICBjb25zdCB0cmFjayA9IGh0bWwuZmluZCgnLmNoYXNlLXRyYWNrJylcbiAgLy8gICBjb25zdCBlbGVtZW50ID0gJCh0cmFjaykuZmluZCgnLmFjdGl2ZScpXG5cbiAgLy8gICBjb25zdCBlbGVtZW50bGVmdCA9IGVsZW1lbnRbMF0ub2Zmc2V0TGVmdFxuICAvLyAgIGNvbnN0IGRpdldpZHRoID0gdHJhY2tbMF0uY2xpZW50V2lkdGhcbiAgLy8gICBsZXQgZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA9IGVsZW1lbnRsZWZ0IC0gZGl2V2lkdGggLyAyXG4gIC8vICAgaWYgKGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgPCAwKSBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0ID0gMFxuXG4gIC8vICAgY29uc3Qgc2Nyb2xsUG9zaXRpb24gPSB0aGlzLml0ZW0uc3lzdGVtLnRyYWNrU2Nyb2xsUG9zaXRpb25cbiAgLy8gICBpZiAoIXRyYWNrLmxlbmd0aCkgcmV0dXJuXG4gIC8vICAgaWYgKCFzY3JvbGxQb3NpdGlvbikgcmV0dXJuXG4gIC8vICAgY29uc3QgdHJhY2tFbGVtZW50ID0gdHJhY2tbMF1cbiAgLy8gICB0cmFja0VsZW1lbnQuc2Nyb2xsVG8oe1xuICAvLyAgICAgdG9wOiAwLFxuICAvLyAgICAgbGVmdDogZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCxcbiAgLy8gICAgIGJlaGF2aW9yOiAnaW5zdGFudCdcbiAgLy8gICB9KVxuXG4gIC8vICAgLy9UT0RPIDogY291bGRkIHVzZSBwYXJlbnQub2Zmc2V0VG9wIGV0IGNoaWxkLm9mZnNldFRvcCB0byBjZW50ZXIgdGhlIGFjdGl2ZSBlbGVtZW50XG5cbiAgLy8gICAvLyBjb25zdCBhY3RpdmUgPSBodG1sLmZpbmQoJy5uYW1lLWNvbnRhaW5lci5hY3RpdmUnKVxuICAvLyAgIC8vIGlmKCBhY3RpdmUpe1xuICAvLyAgIC8vICAgY29uc3QgZWxlbWVudCA9IGFjdGl2ZVswXVxuICAvLyAgIC8vICAgZWxlbWVudC5zY3JvbGxJbnRvVmlldyh7YmVoYXZpb3I6IFwic21vb3RoXCIsIGJsb2NrOiBcImVuZFwiLCBpbmxpbmU6IFwiY2VudGVyXCJ9KVxuICAvLyAgIC8vIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoZmFsc2UpXG4gIC8vICAgLy8gfVxuICAvLyAgIC8vIH0pXG4gIC8vIH1cblxuICBmaW5kUGFydGljaXBhbnRJbmRleCAodXVpZCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBmaW5kTG9jYXRpb25JbmRleCAodXVpZCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0LmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGZpbmRMb2NhdGlvbiAodXVpZCkge1xuICAgIHJldHVybiB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0LmZpbmQocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBmaW5kSW5kZXggKGxpc3QsIHV1aWQpIHtcbiAgICByZXR1cm4gbGlzdC5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wRG93bkVsZW1lbnRTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50Jyk/LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKVxuICAgIGNvbnN0IGFzc2lzdGFudFV1aWQgPSB0YXJnZXQuY2xvc2VzdCgnLmluaXRpYXRpdmUtYmxvY2snKT8uZGF0YXNldD8udXVpZFxuICAgIGNvbnN0IGJlbmVmaWNpYXJ5VXVpZCA9IHRhcmdldC5kYXRhc2V0LmJlbmVmaWNpYXJ5VXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS5hc3Npc3RQYXJ0aWNpcGFudChhc3Npc3RhbnRVdWlkLCBiZW5lZmljaWFyeVV1aWQpXG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIC8vIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcubG9jYXRpb24ub2JzdGFjbGUnKVxuICAgIC8vIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgLy8gY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgLy8gY29uc3QgbG9jYXRpb25JbmRleCA9IHRoaXMuZmluZEluZGV4KGxvY2F0aW9ucywgdXVpZClcbiAgICBjb25zdCB0b2dnbGUgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCd0b2dnbGUnKVxuICAgIGNvbnN0IGRhdGEgPSBleHBhbmRPYmplY3Qoe1xuICAgICAgW3RvZ2dsZV06ICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdzd2l0Y2hlZC1vbicpXG4gICAgfSlcbiAgICBpZiAoZGF0YS5sb2NhdGlvbnMpIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5sb2NhdGlvbnMpKSB7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC51dWlkID09PSBrZXkpXG4gICAgICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0xvY2F0aW9ucyB0YWJsZSBjb3JydXB0ZWQnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsTG9jYXRpb24gPSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF1cbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW4odmFsdWUpXG4gICAgICAgICAgbWVyZ2VPYmplY3Qob3JpZ2luYWxMb2NhdGlvbiwgY2xlYW5lZClcbiAgICAgICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0gPSBvcmlnaW5hbExvY2F0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICB9XG4gIH1cblxuICAvLyBhc3luYyBfb25PYnN0YWNsZVRvZ2dsZUNsaWNrIChldmVudCkge1xuICAvLyAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgLy8gICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLm9ic3RhY2xlJylcbiAgLy8gICBjb25zdCB1dWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAvLyAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAvLyAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleChsb2NhdGlvbnMsIHV1aWQpXG4gIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlID0gIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZVxuICAvLyAgIGlmICghbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscykge1xuICAvLyAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscyA9IHtcbiAgLy8gICAgICAgYmFycmllcjogdHJ1ZVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gIC8vIH1cblxuICBhc3luYyBfb25PYnN0YWNsZVR5cGVDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5vYnN0YWNsZScpXG4gICAgY29uc3QgdXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAgIGlmICghbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscykge1xuICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscyA9IHt9XG4gICAgfVxuICAgIGNvbnN0IG9ic3RhY2xlID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlsc1xuICAgIGNvbnN0IHR5cGUgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiYXJyaWVyJykgPyAnYmFycmllcicgOiAnaGF6YXJkJ1xuICAgIGNvbnN0IGFjdGl2ZSA9IG9ic3RhY2xlW3R5cGVdXG4gICAgb2JzdGFjbGUuYmFycmllciA9IGZhbHNlXG4gICAgb2JzdGFjbGUuaGF6YXJkID0gZmFsc2VcbiAgICBvYnN0YWNsZVt0eXBlXSA9ICFhY3RpdmVcbiAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGUgPSAhYWN0aXZlXG4gICAgLy8gaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JhcnJpZXInKSkge1xuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyID0gIWxvY2F0aW9uc1tcbiAgICAvLyAgICAgbG9jYXRpb25JbmRleFxuICAgIC8vICAgXS5vYnN0YWNsZURldGFpbHMuYmFycmllclxuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5oYXphcmQgPSAhbG9jYXRpb25zW1xuICAgIC8vICAgICBsb2NhdGlvbkluZGV4XG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyXG4gICAgLy8gfSBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdoYXphcmQnKSkge1xuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5oYXphcmQgPSAhbG9jYXRpb25zW1xuICAgIC8vICAgICBsb2NhdGlvbkluZGV4XG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5oYXphcmRcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuYmFycmllciA9ICFsb2NhdGlvbnNbXG4gICAgLy8gICAgIGxvY2F0aW9uSW5kZXhcbiAgICAvLyAgIF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZFxuICAgIC8vIH1cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gIH1cblxuICBhc3luYyBfb25Mb2NhdGlvbkNsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICBjb25zdCBsVXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBhd2FpdCB0aGlzLml0ZW0uYWN0aXZhdGVMb2NhdGlvbihsVXVpZClcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2F0aW9uQ29udHJvbENsaWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luYWN0aXZlJykpIHJldHVyblxuICAgIGNvbnN0IGFjdGlvbiA9IHRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcuY2hhc2UtbG9jYXRpb24nKVxuICAgIGNvbnN0IGxVdWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdyZW1vdmUnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0ucmVtb3ZlTG9jYXRpb24obFV1aWQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhZGQtYWZ0ZXInOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0uaW5zZXJ0TG9jYXRpb24obFV1aWQsIHsgc2hpZnQ6IDEgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnYWRkLWJlZm9yZSc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5pbnNlcnRMb2NhdGlvbihsVXVpZCwgeyBzaGlmdDogMCB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdhZGQtcGFydGljaXBhbnQnOlxuICAgICAgICBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyLmNyZWF0ZSh7XG4gICAgICAgICAgY2hhc2VVdWlkOiB0aGlzLml0ZW0udXVpZCxcbiAgICAgICAgICBsb2NhdGlvblV1aWQ6IGxVdWlkLFxuICAgICAgICAgIGRyb3BEYXRhOiB7fVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oYExvY2F0aW9uICR7bFV1aWR9IENsaWNrZWQuIEFjdGlvbjogJHthY3Rpb259YClcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnRDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCBwVXVpZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldD8udXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS5hY3RpdmF0ZVBhcnRpY2lwYW50KHBVdWlkKVxuICB9XG5cbiAgYXN5bmMgX29uUGFydGljaXBhbnRDb250cm9sQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpKSByZXR1cm5cbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZHJvcGRvd24nKSkgcmV0dXJuXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50VXVpZCA9IHRhcmdldC5jbG9zZXN0KCcuaW5pdGlhdGl2ZS1ibG9jaycpPy5kYXRhc2V0Py51dWlkXG4gICAgaWYgKCFwYXJ0aWNpcGFudFV1aWQpIHJldHVyblxuICAgIHN3aXRjaCAodGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdkcmF3R3VuJzpcbiAgICAgICAgYXdhaXQgdGhpcy50b2dnbGVQYXJ0aWNpcGFudEd1bihwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkZWNyZWFzZUFjdGlvbnMnOlxuICAgICAgICBhd2FpdCB0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucygtMSwgZXZlbnQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdpbmNyZWFzZUFjdGlvbnMnOlxuICAgICAgICBhd2FpdCB0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucygxLCBldmVudClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ21vdmVCYWNrd2FyZCc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5tb3ZlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkLCAtMSwgeyByZW5kZXI6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ21vdmVGb3J3YXJkJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLm1vdmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQsIDEsIHsgcmVuZGVyOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhY3RpdmF0ZVBhcnRpY2lwYW50JzpcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS5hY3RpdmF0ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICAgIGNhc2UgJ2JvbnVzRGljZSc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBkaWNlTnVtYmVyID0gdGFyZ2V0LmRhdGFzZXQuY291bnRcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlQm9udXNEaWNlKHBhcnRpY2lwYW50VXVpZCwgZGljZU51bWJlcilcbiAgICAgICAgICB0aGlzLml0ZW0uYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2F1dGlvdXNBcHByb2FjaCc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5jYXV0aW91c0FwcHJvYWNoKHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2VkaXRQYXJ0aWNpcGFudCc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLml0ZW0uZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5jaGFzZVV1aWQgPSB0aGlzLml0ZW0udXVpZFxuICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEubG9jYXRpb25VdWlkID0gbG9jYXRpb24udXVpZFxuICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEudXBkYXRlID0gdHJ1ZVxuICAgICAgICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKHBhcnRpY2lwYW50LmRhdGEpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3JlbW92ZVBhcnRpY2lwYW50JzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnJlbW92ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgdGhpcy5pdGVtLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybigpXG4gIH1cblxuICBhc3luYyBfb25DaGFzZUNvbnRyb2xDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGxvY2F0aW9uVXVpZCA9IHRhcmdldC5jbG9zZXN0KCcub2JzdGFjbGUnKT8uZGF0YXNldD8udXVpZFxuICAgIGlmICghbG9jYXRpb25VdWlkKSByZXR1cm5cbiAgICBzd2l0Y2ggKHRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnb2JzdGFjbGUtc2tpbGwtY2hlY2snOlxuICAgICAgICByZXR1cm4gdGhpcy5pdGVtLmFjdGl2ZVBhcnRpY2lwYW50T2JzdGFjbGVDaGVjayhsb2NhdGlvblV1aWQpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zIChjb3VudCwgZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnRVdWlkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbml0aWF0aXZlLWJsb2NrJyk/LmRhdGFzZXQ/LnV1aWRcbiAgICBpZiAoIXBhcnRpY2lwYW50VXVpZCkgcmV0dXJuXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnBhcnRpY2lwYW50c1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzLmZpbmQocCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZClcbiAgICBpZiAocGFydGljaXBhbnQuaGFzTWF4TXZ0QWN0aW9ucyAmJiBjb3VudCA+IDApIHJldHVyblxuICAgIHBhcnRpY2lwYW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKGNvdW50KVxuXG4gICAgLy8gY29uc3Qgc2hlZXQgPSB0YXJnZXQuY2xvc2VzdCgnLmNvYzcuaXRlbS5jaGFzZScpXG4gICAgLy8gY29uc3QgY2hhc2VUcmFjayA9IHNoZWV0LnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpXG4gICAgLy8gaWYgKGNoYXNlVHJhY2spXG4gICAgLy8gICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHtcbiAgICAvLyAgICAgJ2RhdGEudHJhY2tTY3JvbGxQb3NpdGlvbic6IGNoYXNlVHJhY2suc2Nyb2xsTGVmdFxuICAgIC8vICAgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0uc2V0Y2hhc2VUcmFja1Njcm9sbCh7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cylcbiAgfVxuXG4gIGFzeW5jIF9vbkJ1dHRvbkNsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBhY3Rpb24gPSB0YXJnZXQuZGF0YXNldD8uYWN0aW9uXG4gICAgaWYgKCFhY3Rpb24pIHJldHVyblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICdpbml0JzpcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFpc05hTih0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy50b3RhbCkgJiZcbiAgICAgICAgICB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy50b3RhbCA+IDBcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgbG9jYXRpb25zID0gQXJyYXkuYXBwbHkoXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgQXJyYXkodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMudG90YWwpXG4gICAgICAgICAgKS5tYXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdXVpZDogZm91bmRyeS51dGlscy5yYW5kb21JRCgxNikgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgbG9jYXRpb25zWzBdLm5hbWUgPSAnU3RhcnQnXG4gICAgICAgICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAxKSBsb2NhdGlvbnNbbG9jYXRpb25zLmxlbmd0aCAtIDFdLm5hbWUgPSAnRW5kJ1xuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZXNldCc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXNldENoYXNlJyl9YCxcbiAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybVJlc2V0Q2hhc2VIaW50Jyl9PC9wPmAsXG4gICAgICAgICAgeWVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChbXSlcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS5zdG9wKClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2N1dDJjaGFzZSc6XG4gICAgICAgIGlmICh0aGlzLml0ZW0uYWxsSGF2ZVNwZWVkUm9sbCkge1xuICAgICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybUN1dDJDaGFzZScpfWAsXG4gICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LkNvbmZpcm1DdXQyQ2hhc2VIaW50J1xuICAgICAgICAgICAgKX08L3A+YCxcbiAgICAgICAgICAgIHllczogKCkgPT4gdGhpcy5pdGVtLmN1dFRvVGhlQ2hhc2UoKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RBbGxIYXZlU3BlZWRSb2xsJykpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncmVzdGFydCc6XG4gICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXN0YXJ0Q2hhc2UnKX1gLFxuICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LkNvbmZpcm1SZXN0YXJ0Q2hhc2VIaW50J1xuICAgICAgICAgICl9PC9wPmAsXG4gICAgICAgICAgeWVzOiAoKSA9PiB0aGlzLml0ZW0ucmVzdGFydCgpXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ25leHRSb3VuZCc6XG4gICAgICAgIGlmICh0aGlzLml0ZW0ubmV4dEFjdGl2ZVBhcnRpY2lwYW50KSB7XG4gICAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtTmV4dENoYXNlUm91bmQnKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5Db25maXJtTmV4dENoYXNlUm91bmRIaW50J1xuICAgICAgICAgICAgKX08L3A+YCxcbiAgICAgICAgICAgIHllczogKCkgPT4gdGhpcy5pdGVtLnByb2dyZXNzVG9OZXh0Um91bmQoKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB0aGlzLml0ZW0ucHJvZ3Jlc3NUb05leHRSb3VuZCgpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgX2NhblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IChzZWxlY3Rvcikge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIF9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgaSA9IGEucXVlcnlTZWxlY3RvcignaS5pY29uJylcbiAgICBjb25zdCBkcmFnSWNvbiA9IGEucXVlcnlTZWxlY3RvcignLnBpbi1pbWFnZScpXG5cbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGRyYWdJY29uLCAwLCBkcmFnSWNvbi5oZWlnaHQpXG5cbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSBhLmNsb3Nlc3QoJy5jaGFzZS1sb2NhdGlvbicpXG4gICAgY29uc3QgZGF0YSA9IHt9XG5cbiAgICBkYXRhLnR5cGUgPSAnbG9jYXRvcidcbiAgICBkYXRhLkNvQzdUeXBlID0gJ2NoYXNlJ1xuICAgIGRhdGEuaWNvbiA9IGkuZGF0YXNldC5saW5rSWNvblxuICAgIGRhdGEubG9jYXRpb25VdWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIGRhdGEuZG9jVXVpZCA9IHRoaXMuaXRlbS51dWlkXG4gICAgZGF0YS5jYWxsQmFjayA9ICdsb2NhdG9yRHJvcHBlZCdcbiAgICBldmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuXG4gICAgLy8gY29uc3QgZHJhZ0RhdGEgPSB7IHV1aWQ6IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWQsIGNoYXNlVXVpZDogdGhpcy5pdGVtLnV1aWQgfVxuICAgIC8vIGRyYWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcbiAgfVxuXG4gIF9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0IChzZWxlY3Rvcikge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIF9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AgKHNlbGVjdG9yKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCAoZHJhZ0V2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZHJhZ0V2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkcmFnRGF0YSA9IHsgdXVpZDogdGFyZ2V0LmRhdGFzZXQudXVpZCwgdHlwZTogJ3BhcnRpY2lwYW50JyB9XG4gICAgZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIChkcmFnRXZlbnQpIHtcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdEcm9wcGVkJylcbiAgICB0aGlzLl9vbkRyYWdMZWF2ZShkcmFnRXZlbnQpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uVXVpZCA9IHRhcmdldC5kYXRhc2V0LnV1aWRcblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdwYXJ0aWNpcGFudCcpIHtcbiAgICAgIGNvbnN0IG9sZExvY2F0aW9uID0gdGhpcy5maW5kTG9jYXRpb24obG9jYXRpb25VdWlkKVxuICAgICAgaWYgKG9sZExvY2F0aW9uKSB7XG4gICAgICAgIGlmIChvbGRMb2NhdGlvbi5wYXJ0aWNpcGFudHM/LmluY2x1ZGVzKGRhdGEudXVpZCkpIHJldHVyblxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnNldGNoYXNlVHJhY2tTY3JvbGwoeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgICBhd2FpdCB0aGlzLml0ZW0ubW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbihkYXRhLnV1aWQsIGxvY2F0aW9uVXVpZClcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlci5jcmVhdGUoe1xuICAgICAgICBjaGFzZVV1aWQ6IHRoaXMuaXRlbS51dWlkLFxuICAgICAgICBsb2NhdGlvblV1aWQsXG4gICAgICAgIGRyb3BEYXRhOiBkYXRhXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdPdmVyIChkcmFnRXZlbnQpIHtcbiAgICB0aGlzLl9vbkRyYWdFbnRlcihkcmFnRXZlbnQpXG4gIH1cblxuICBfb25EcmFnRW50ZXIgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBfb25EcmFnTGVhdmUgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdD8ucmVtb3ZlKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB1dWlkID0gdGFyZ2V0LmRhdGFzZXQ/LnV1aWRcbiAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgYXdhaXQgdGhpcy5hbHRlclBhcnRpY2lwYW50KGRhdGEsIHV1aWQpXG4gIH1cblxuICBhc3luYyBfb25BZGRQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZGF0YSA9IHsgY2hhc2VVdWlkOiB0aGlzLml0ZW0udXVpZCB9XG4gICAgaWYgKGV2ZW50LmRhdGFUcmFuc2Zlcikge1xuICAgICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICAgIGRhdGEuZHJvcERhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG4gICAgfVxuICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKGRhdGEpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50RWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcucGFydGljaXBhbnQnKVxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudEVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHBhcnRpY2lwYW50c1tpbmRleF0pXG4gICAgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmU2V0KSB7XG4gICAgICBjb25zdCByb2xsID0gbmV3IENvQzdDaGVjaygpXG4gICAgICByb2xsLnBhcmVudCA9IHRoaXMuaXRlbS51dWlkXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbFV1aWQgPSByb2xsLnV1aWRcbiAgICAgIHJvbGwuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxuICAgICAgaWYgKCFldmVudC5zaGlmdEtleSAmJiBwYXJ0aWNpcGFudC5hY3Rvci5wbGF5ZXIpIHtcbiAgICAgICAgcm9sbC5zdGFuZGJ5ID0gdHJ1ZVxuICAgICAgICByb2xsLnN0YW5kYnlUZXh0ID0gJ0NvQzcuQ2hhc2UnXG4gICAgICAgIHJvbGwuc3RhbmRieVJpZ2h0SWNvbiA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3J1bm5pbmctc29saWQuc3ZnJ1xuICAgICAgfVxuXG4gICAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0NoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIGF3YWl0IHJvbGwucm9sbENoYXJhY3RlcmlzdGljKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcbiAgICAgICAgYXdhaXQgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNTa2lsbCkge1xuICAgICAgICByb2xsLnNraWxsID0gcGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsKClcbiAgICAgICAgYXdhaXQgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNBdHRyaWJ1dGUpIHtcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsQXR0cmlidXRlKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcbiAgICAgICAgYXdhaXQgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlKSB7XG4gICAgICBjb25zdCByb2xsRGF0YSA9IHtcbiAgICAgICAgcmF3VmFsdWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUsXG4gICAgICAgIGRpc3BsYXlOYW1lOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLm5hbWUsXG4gICAgICAgIGFjdG9yTmFtZTogcGFydGljaXBhbnQubmFtZSA/IHBhcnRpY2lwYW50Lm5hbWUgOiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5oYXNBY3Rvcikgcm9sbERhdGEuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5jcmVhdGUocm9sbERhdGEpXG4gICAgICByb2xsLnBhcmVudCA9IHRoaXMuaXRlbS51dWlkXG4gICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgYXdhaXQgcm9sbC50b01lc3NhZ2UoKVxuICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsZWQgPSB0cnVlXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxVdWlkID0gcm9sbC51dWlkXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgX29uRHJhZ0VudGVyUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgX29uRHJhZ0xlYXZlUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlU2lkZSAoZXZlbnQpIHtcbiAgICAvLyBjb25zdCB0ZXN0ID0gYXdhaXQgZnJvbVV1aWQoICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLm5DZG9DeW9pdWR0anJOa3UnKTtcbiAgICAvLyBjb25zdCBpdGVtVGVzdCA9IGF3YWl0IGZyb21VdWlkKCAnSXRlbS5wbElFbU5SUDZPN1B2ZU52LnJvbGwucTJzQXpzSHQ0RnNxc2RmRCcpO1xuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLmNoYXNlciA9ICFwYXJ0aWNpcGFudHNbaW5kZXhdLmNoYXNlclxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRlbGV0ZURyaXZlciAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZHJpdmVyID0gdGFyZ2V0LmNsb3Nlc3QoJy5kcml2ZXInKVxuICAgIGNvbnN0IHV1aWQgPSBkcml2ZXIuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzW2luZGV4XVxuICAgIGRlbGV0ZSBwYXJ0aWNpcGFudC5kb2NVdWlkXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBwYXJ0aWNpcGFudHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Um9sbCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBhbHRlclBhcnRpY2lwYW50IChkYXRhLCB1dWlkKSB7XG4gICAgbGV0IGRvY1V1aWQsIGFjdG9yXG4gICAgaWYgKGRhdGEudG9rZW5VdWlkKSBkb2NVdWlkID0gZGF0YS50b2tlblV1aWRcbiAgICBlbHNlIHtcbiAgICAgIGRvY1V1aWQgPVxuICAgICAgICBkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkXG4gICAgICAgICAgPyBgU2NlbmUuJHtkYXRhLnNjZW5lSWR9LlRva2VuLiR7ZGF0YS50b2tlbklkfWBcbiAgICAgICAgICA6IGRhdGEuYWN0b3JJZCB8fCBkYXRhLmFjdG9yS2V5IHx8IGRhdGEuaWRcbiAgICB9XG5cbiAgICBpZiAoZGF0YS50eXBlID09PSAnVG9rZW4nKSB7XG4gICAgICBkb2NVdWlkID0gZGF0YS51dWlkXG4gICAgfSBlbHNlIGlmIChkb2NVdWlkKSB7XG4gICAgICBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGRvY1V1aWQpXG4gICAgICBpZiAoIWFjdG9yICYmIGRhdGEudHlwZSA9PT0gJ0l0ZW0nKSBkb2NVdWlkID0gbnVsbFxuICAgIH1cblxuICAgIGlmIChhY3RvciAmJiBkb2NVdWlkICE9PSBhY3Rvci51dWlkKSB7XG4gICAgICBkb2NVdWlkID0gYWN0b3IudXVpZFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0ge31cbiAgICBpZiAoZG9jVXVpZCkgcGFydGljaXBhbnQuZG9jVXVpZCA9IGRvY1V1aWRcblxuICAgIHN3aXRjaCAoZGF0YS50eXBlPy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdhY3Rvcic6XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5kYXRhPy5faWQgfHwgZGF0YS5pZCxcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWMnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhdHRyaWJ1dGUnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2F0dHJpYnV0ZSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIC8vIFRPRE86Q2hlY2sgZm9yIHNwZWVkIGNoZWNrLCBpZiBub25lIGFkZCBzcGVlZGNoZWNrXG4gICAgLy8gc3BlZWRDaGVjayA9IHtcbiAgICAvLyAgIGlkOiAnc3RyJ1xuICAgIC8vICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xuICAgIC8vIH1cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3Qgb2xkUGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHNbaW5kZXhdXG4gICAgaWYgKG9sZFBhcnRpY2lwYW50Lm1vdikgZGVsZXRlIG9sZFBhcnRpY2lwYW50Lm1vdlxuICAgIG1lcmdlT2JqZWN0KG9sZFBhcnRpY2lwYW50LCBwYXJ0aWNpcGFudClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBjbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMgKCkge1xuICAgIGF3YWl0IHRoaXMuaXRlbS5jbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMoKVxuICB9XG5cbiAgYXN5bmMgYWRkUGFydGljaXBhbnQgKGRhdGEpIHtcbiAgICAvLyBsZXQgcHJvdXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShcbiAgICAvLyAgICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLlF5RlRpaUVaaVg5dlRmaUMnXG4gICAgLy8gKVxuICAgIC8vIHByb3V0ID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoXG4gICAgLy8gICAnU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi51Ykx6aGU1N0pPVEhNSXI5J1xuICAgIC8vIClcbiAgICAvLyBwcm91dCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KCdBY3Rvci51aVkzY2FwU1VlTEx2U0xpJylcbiAgICAvLyBwcm91dCA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KCAnU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5ReUZUaWlFWmlYOXZUZmlDLkl0ZW0uR3JPSGVMWGZlRXBoc1JNWicpXG4gICAgLy8gcHJvdXQgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleSggXCJTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLllxc05RUERoRkNQbFNScUpcIilcbiAgICAvLyBwcm91dCA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KCBcIlNjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4uWXFzTlFQRGhGQ1BsU1JxSi5JdGVtLjhKRW5UakpPR0ZYbWw0d2tcIilcblxuICAgIC8vIHRyeSB0byBmaW5kIGEgdmFsaWQgZG9jdW1lbnRcbiAgICBsZXQgZG9jVXVpZCwgYWN0b3JcbiAgICBpZiAoZGF0YS50b2tlblV1aWQpIGRvY1V1aWQgPSBkYXRhLnRva2VuVXVpZFxuICAgIGVsc2Uge1xuICAgICAgZG9jVXVpZCA9XG4gICAgICAgIGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWRcbiAgICAgICAgICA/IGBTY2VuZS4ke2RhdGEuc2NlbmVJZH0uVG9rZW4uJHtkYXRhLnRva2VuSWR9YFxuICAgICAgICAgIDogZGF0YS5hY3RvcklkIHx8IGRhdGEuYWN0b3JLZXkgfHwgZGF0YS5pZFxuICAgIH1cblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdUb2tlbicpIHtcbiAgICAgIGRvY1V1aWQgPSBkYXRhLnV1aWRcbiAgICB9IGVsc2UgaWYgKGRvY1V1aWQpIHtcbiAgICAgIGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoZG9jVXVpZClcbiAgICAgIGlmICghYWN0b3IgJiYgZGF0YS50eXBlID09PSAnSXRlbScpIGRvY1V1aWQgPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKGFjdG9yICYmIGRvY1V1aWQgIT09IGFjdG9yLnV1aWQpIHtcbiAgICAgIGRvY1V1aWQgPSBhY3Rvci51dWlkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB7fVxuICAgIGlmIChkb2NVdWlkKSBwYXJ0aWNpcGFudC5kb2NVdWlkID0gZG9jVXVpZFxuXG4gICAgc3dpdGNoIChkYXRhLnR5cGU/LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2FjdG9yJzpcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICBpZiAoZGF0YS5pZCkge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmdldChkYXRhLmlkKVxuICAgICAgICAgIGlmIChpdGVtPy5kYXRhPy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEuZGF0YT8uX2lkIHx8IGRhdGEuaWQsXG4gICAgICAgICAgdHlwZTogJ2l0ZW0nXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYXJhY3RlcmlzdGljJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYXR0cmlidXRlJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICAvLyBUT0RPOkNoZWNrIGZvciBzcGVlZCBjaGVjaywgaWYgbm9uZSBhZGQgc3BlZWRjaGVjayBjb24gbm9uIHZlaGljbGUsIGRyaXZlIGF1dG8gZm9yIHZlaGljbGVcbiAgICAvLyBzcGVlZENoZWNrID0ge1xuICAgIC8vICAgaWQ6ICdjb24nXG4gICAgLy8gICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgLy8gfVxuXG4gICAgaWYgKCFwYXJ0aWNpcGFudC5zcGVlZENoZWNrKSB7XG4gICAgICBpZiAoIXRoaXMuaXRlbS5zeXN0ZW0udmVoaWNsZSkge1xuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiAnY29uJyxcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkNvbnN0aXR1dGlvbicpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgdHlwZTogJ2l0ZW0nLFxuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRyaXZlLWF1dG8nKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cblxuICAgIGxldCB1bmlxdWUgPSBmYWxzZVxuICAgIHdoaWxlICghdW5pcXVlKSB7XG4gICAgICBwYXJ0aWNpcGFudC51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICAgIHVuaXF1ZSA9XG4gICAgICAgIHBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiBwLnV1aWQgPT09IHBhcnRpY2lwYW50LnV1aWQpLmxlbmd0aCA9PT0gMFxuICAgIH1cblxuICAgIHBhcnRpY2lwYW50cy5wdXNoKHBhcnRpY2lwYW50KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVBhcnRpY2lwYW50R3VuIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHMuZmluZChwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkKVxuICAgIGlmICghcGFydGljaXBhbnQpIHJldHVyblxuICAgIHBhcnRpY2lwYW50Lmhhc0FHdW5SZWFkeSA9ICFwYXJ0aWNpcGFudC5oYXNBR3VuUmVhZHlcbiAgICBhd2FpdCB0aGlzLml0ZW0uc2V0Y2hhc2VUcmFja1Njcm9sbCh7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cylcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYW4gKG9iaikge1xuICBmb3IgKGNvbnN0IHByb3BOYW1lIGluIG9iaikge1xuICAgIGNvbnN0IHRwID0gZ2V0VHlwZShvYmpbcHJvcE5hbWVdKVxuICAgIGlmICh0cCA9PT0gJ09iamVjdCcpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBjbGVhbihvYmpbcHJvcE5hbWVdKVxuICAgIH1cblxuICAgIGlmICh0cCA9PT0gJ09iamVjdCcgJiYgIU9iamVjdC5lbnRyaWVzKG9ialtwcm9wTmFtZV0pLmxlbmd0aCkge1xuICAgICAgb2JqW3Byb3BOYW1lXSA9IG51bGxcbiAgICB9IGVsc2UgaWYgKHRwID09PSAnc3RyaW5nJyAmJiAhb2JqW3Byb3BOYW1lXS5sZW5ndGgpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBudWxsXG4gICAgfSBlbHNlIGlmICh0cCA9PT0gJ3N0cmluZycgJiYgIWlzTmFOKE51bWJlcihvYmpbcHJvcE5hbWVdKSkpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBOdW1iZXIob2JqW3Byb3BOYW1lXSlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9ialxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgQ29DN0FjdGl2ZUVmZmVjdCBmcm9tICcuLi8uLi9hY3RpdmUtZWZmZWN0LmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0VjIgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2l0ZW0nXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9pdGVtLXNoZWV0VjIuaHRtbCcsXG4gICAgICB3aWR0aDogNTAwLFxuICAgICAgaGVpZ2h0OiA0NTAsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGdldERhdGEgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEob3B0aW9ucylcblxuICAgIHNoZWV0RGF0YS5lZmZlY3RzID0gQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyh0aGlzLml0ZW0uZWZmZWN0cywgeyBzdGF0dXM6IGZhbHNlIH0pXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuaXRlbSkpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBtZXJnZU9iamVjdCAqL1xuXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0VjIgfSBmcm9tICcuL2l0ZW0tc2hlZXRWMi5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0l0ZW1TaGVldCBleHRlbmRzIENvQzdJdGVtU2hlZXRWMiB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgd2lkdGg6IDUyNSxcbiAgICAgIGhlaWdodDogNTA2XG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEpvdXJuYWxTaGVldCAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdKb3VybmFsU2hlZXQgZXh0ZW5kcyBKb3VybmFsU2hlZXQge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIE1hY3JvQ29uZmlnICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN01hY3JvQ29uZmlnIGV4dGVuZHMgTWFjcm9Db25maWcge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIFBsYXlsaXN0Q29uZmlnICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1BsYXlsaXN0Q29uZmlnIGV4dGVuZHMgUGxheWxpc3RDb25maWcge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIFJvbGxUYWJsZUNvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdSb2xsVGFibGVDb25maWcgZXh0ZW5kcyBSb2xsVGFibGVDb25maWcge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxufVxuIiwiLyogZ2xvYmFsIFNjZW5lQ29uZmlnICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NjZW5lQ29uZmlnIGV4dGVuZHMgU2NlbmVDb25maWcge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGR1cGxpY2F0ZSwgZXhwYW5kT2JqZWN0LCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBEcm9wQ29DSUQgfSBmcm9tICcuLi8uLi9hcHBzL2Ryb3AtY29jLWlkLmpzJ1xuaW1wb3J0IHsgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdTZXR1cFNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sLmZpbmQoJy5pdGVtIC5pdGVtLW5hbWUgaDQnKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1TdW1tYXJ5KGV2ZW50LCAnaXRlbXMnKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ2l0ZW1zJykpXG4gICAgaHRtbC5maW5kKCcuYWRkLWJpbycpLmNsaWNrKGFzeW5jICgpID0+IGF3YWl0IHRoaXMuX29uQWRkQmlvKCkpXG4gICAgaHRtbC5maW5kKCcucmVtb3ZlLXNlY3Rpb24nKS5jbGljayh0aGlzLl9vblJlbW92ZVNlY3Rpb24uYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25DbGlja1RvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmFkZC1tb25ldGFyeScpLmNsaWNrKHRoaXMuX29uQWRkTW9uZXRhcnkuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yZW1vdmUtbW9uZXRhcnknKS5jbGljayh0aGlzLl9vblJlbW92ZU1vbmV0YXJ5LmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyBfb25DbGlja1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBsZXQgdXNlQ29DSUQgPSAwXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uc3lzdGVtKSBjb250aW51ZVxuICAgICAgaWYgKCFbJ2l0ZW0nLCAnd2VhcG9uJywgJ3NraWxsJywgJ2Jvb2snLCAnc3BlbGwnXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHVzZUNvQ0lEID09PSAwKSB7XG4gICAgICAgIHVzZUNvQ0lEID0gYXdhaXQgRHJvcENvQ0lELmNyZWF0ZSgpXG4gICAgICB9XG4gICAgICBjb2xsZWN0aW9uLnB1c2goRHJvcENvQ0lELnByb2Nlc3NJdGVtKHVzZUNvQ0lELCBpdGVtKSlcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgYXN5bmMgX29uUmVtb3ZlU2VjdGlvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGRpdiA9IGEuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmJpb1NlY3Rpb25zKVxuICAgIGJpby5zcGxpY2UoTnVtYmVyKGRpdi5kYXRhc2V0LmluZGV4KSwgMSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5iaW9TZWN0aW9ucyc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQmlvICgpIHtcbiAgICBjb25zdCBiaW8gPSB0aGlzLml0ZW0uc3lzdGVtLmJpb1NlY3Rpb25zID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uYmlvU2VjdGlvbnMpIDogW11cbiAgICBiaW8ucHVzaChudWxsKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmJpb1NlY3Rpb25zJzogYmlvIH0pXG4gIH1cblxuICBfb25BZGRNb25ldGFyeSAoKSB7XG4gICAgY29uc3QgdmFsdWVzID0gdGhpcy5pdGVtLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMpIDogW11cbiAgICB2YWx1ZXMucHVzaCh7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIG1pbjogbnVsbCxcbiAgICAgIG1heDogbnVsbCxcbiAgICAgIGNhc2hUeXBlOiAwLFxuICAgICAgY2FzaFZhbHVlOiAnJyxcbiAgICAgIGFzc2V0c1R5cGU6IDAsXG4gICAgICBhc3NldHNWYWx1ZTogJycsXG4gICAgICBzcGVuZGluZ1R5cGU6IDAsXG4gICAgICBzcGVuZGluZ1ZhbHVlOiAnJ1xuICAgIH0pXG4gICAgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBfb25SZW1vdmVNb25ldGFyeSAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGRpdiA9IGEuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IHZhbHVlcyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcylcbiAgICB2YWx1ZXMuc3BsaWNlKE51bWJlcihkaXYuZGF0YXNldC5pbmRleCksIDEpXG4gICAgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICB9KVxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb25cblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJChgPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPiR7Y2hhdERhdGEudmFsdWV9PC9kaXY+YClcbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICAvLyBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykgeyBwcm9wcy5hcHBlbmQoYDxzcGFuIGNsYXNzPVwidGFnXCI+JHtwfTwvc3Bhbj5gKSB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1EZWxldGUgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUlkID0gaXRlbS5kYXRhKCdpdGVtLWlkJylcbiAgICBjb25zdCBDb0NJZCA9IGl0ZW0uZGF0YSgnY29jaWQnKVxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChpID0+IChpdGVtSWQgJiYgaS5faWQgPT09IGl0ZW1JZCkgfHwgKENvQ0lkICYmIGkgPT09IENvQ0lkKSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdzZXR1cCddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NldHVwLmh0bWwnLFxuICAgICAgd2lkdGg6IDU2NSxcbiAgICAgIGhlaWdodDogNTMwLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJyB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcblxuICAgIGNvbnN0IGVyYSA9IE9iamVjdC5lbnRyaWVzKHRoaXMuaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID8/IHt9KS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiBlWzBdKVxuXG4gICAgY29uc3QgaXRlbXMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IHRoaXMuaXRlbS5zeXN0ZW0uaXRlbXMsIGVyYTogKHR5cGVvZiBlcmFbMF0gIT09ICd1bmRlZmluZWQnID8gZXJhWzBdIDogdHJ1ZSkgfSlcblxuICAgIHNoZWV0RGF0YS5za2lsbHMgPSBpdGVtcy5maWx0ZXIoaXQgPT4gaXQudHlwZSA9PT0gJ3NraWxsJylcbiAgICBzaGVldERhdGEub3RoZXJJdGVtcyA9IGl0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlICE9PSAnc2tpbGwnKVxuXG4gICAgc2hlZXREYXRhLnNraWxsTGlzdEVtcHR5ID0gc2hlZXREYXRhLnNraWxscy5sZW5ndGggPT09IDBcbiAgICBzaGVldERhdGEuaXRlbXNMaXN0RW1wdHkgPSBzaGVldERhdGEub3RoZXJJdGVtcy5sZW5ndGggPT09IDBcblxuICAgIHNoZWV0RGF0YS5za2lsbHMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEuX2VyYXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgIHNoZWV0RGF0YS5fZXJhcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSxcbiAgICAgICAgaXNFbmFibGVkOiAodGhpcy5pdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHNoZWV0RGF0YS5fZXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlGb3JtYXRzID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBDT0M3Lm1vbmV0YXJ5Rm9ybWF0cykge1xuICAgICAgc2hlZXREYXRhLl9tb25ldGFyeUZvcm1hdHMucHVzaCh7IGtleSwgdmFsOiBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5tb25ldGFyeUZvcm1hdHNba2V5XSkgfSlcbiAgICB9XG5cbiAgICBzaGVldERhdGEuc2hvd0N1cnJlbmN5U3ltYm9sID0gWydkZWNpbWFsTGVmdCcsICdkZWNpbWFsUmlnaHQnLCAnaW50ZWdlckxlZnQnLCAnaW50ZWdlclJpZ2h0J10uaW5jbHVkZXMoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdClcblxuICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlUeXBlcyA9IFtdXG4gICAgZm9yIChjb25zdCBrZXkgaW4gQ09DNy5tb25ldGFyeVR5cGVzKSB7XG4gICAgICBpZiAoQ09DNy5tb25ldGFyeVR5cGVzW2tleV0uZmlsdGVyLmxlbmd0aCA9PT0gMCB8fCBDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5maWx0ZXIuaW5jbHVkZXMoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCkpIHtcbiAgICAgICAgc2hlZXREYXRhLl9tb25ldGFyeVR5cGVzLnB1c2goeyBrZXksIHZhbDogZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubW9uZXRhcnlUeXBlc1trZXldLm5hbWUpIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLm9uZUJsb2NrQmFja1N0b3J5ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmFja3N0b3J5ID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJhY2tzdG9yeSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHN5c3RlbSA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSk/LnN5c3RlbVxuICAgIGlmIChzeXN0ZW0uYmlvU2VjdGlvbnMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uYmlvU2VjdGlvbnMnXSA9IE9iamVjdC52YWx1ZXMoXG4gICAgICAgIHN5c3RlbS5iaW9TZWN0aW9ucyB8fCBbXVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSA9IE9iamVjdC52YWx1ZXMoc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyB8fCBbXSlcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldD8ubmFtZSA9PT0gJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQnKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lbmFibGVkJ10gPSAhZXZlbnQuY3VycmVudFRhcmdldC5jaGVja2VkXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmVuYWJsZWQnKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCddID0gIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2hlY2tlZFxuICAgIH1cblxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uLy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2tpbGxTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIGNvbnN0cnVjdG9yICguLi5hcmdzKSB7XG4gICAgc3VwZXIoLi4uYXJncylcbiAgICB0aGlzLl9zaGVldFRhYiA9ICdpdGVtcydcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2l0ZW0nXSxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuIGBzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zLyR7dGhpcy5pdGVtLnR5cGV9LXNoZWV0Lmh0bWxgXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAoKSB7XG4gICAgLy8gdGhpcy5pdGVtLmNoZWNrU2tpbGxQcm9wZXJ0aWVzKCk7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuICAgIHNoZWV0RGF0YS5oYWROb25DaGFyYWN0ZXJPd25lciA9IHNoZWV0RGF0YS5oYXNPd25lciAmJiB0aGlzLmFjdG9yPy50eXBlICE9PSAnY2hhcmFjdGVyJ1xuXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPSBDb0M3QWN0aXZlRWZmZWN0LnByZXBhcmVBY3RpdmVFZmZlY3RDYXRlZ29yaWVzKFxuICAgICAgdGhpcy5pdGVtLmVmZmVjdHNcbiAgICApXG5cbiAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuc2tpbGxQcm9wZXJ0aWVzKSkge1xuICAgICAgc2hlZXREYXRhLl9wcm9wZXJ0aWVzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiB2YWx1ZSxcbiAgICAgICAgaXNFbmFibGVkOiB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBzaGVldERhdGEuX2VyYXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgIHNoZWV0RGF0YS5fZXJhcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSxcbiAgICAgICAgaXNFbmFibGVkOiAodGhpcy5pdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHNoZWV0RGF0YS5fZXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS5pc1NwZWNpYWxpemVkID0gdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWxcbiAgICBzaGVldERhdGEuY2FuTW9kaWZ5U3BlYyA9XG4gICAgICAhdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gJiZcbiAgICAgICF0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmdcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgKVxuICB9XG5cbiAgLy8gYXN5bmMgX29uQ2xpY2tBdHRyaWJ1dGVDb250cm9sKGV2ZW50KSB7XG4gIC8vICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy8gICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldDtcbiAgLy8gICBjb25zdCBhY3Rpb24gPSBhLmRhdGFzZXQuYWN0aW9uO1xuICAvLyAgIGNvbnN0IGF0dHJzID0gdGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXM7XG4gIC8vICAgY29uc3QgZm9ybSA9IHRoaXMuZm9ybTtcblxuICAvLyAgIC8vIEFkZCBuZXcgYXR0cmlidXRlXG4gIC8vICAgaWYgKGFjdGlvbiA9PT0gXCJjcmVhdGVcIikge1xuICAvLyAgICAgY29uc3QgbmsgPSBPYmplY3Qua2V5cyhhdHRycykubGVuZ3RoICsgMTtcbiAgLy8gICAgIGxldCBuZXdLZXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAvLyAgICAgbmV3S2V5LmlubmVySFRNTCA9IGA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiZGF0YS5hdHRyaWJ1dGVzLmF0dHIke25rfS5rZXlcIiB2YWx1ZT1cImF0dHIke25rfVwiLz5gO1xuICAvLyAgICAgbmV3S2V5ID0gbmV3S2V5LmNoaWxkcmVuWzBdO1xuICAvLyAgICAgZm9ybS5hcHBlbmRDaGlsZChuZXdLZXkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlbW92ZSBleGlzdGluZyBhdHRyaWJ1dGVcbiAgLy8gICBlbHNlIGlmIChhY3Rpb24gPT09IFwiZGVsZXRlXCIpIHtcbiAgLy8gICAgIGNvbnN0IGxpID0gYS5jbG9zZXN0KFwiLmF0dHJpYnV0ZVwiKTtcbiAgLy8gICAgIGxpLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQobGkpO1xuICAvLyAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpO1xuICAvLyAgIH1cbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICAvLyBfdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSkge1xuICAvLyAgIC8vIEhhbmRsZSB0aGUgZnJlZS1mb3JtIGF0dHJpYnV0ZXMgbGlzdFxuICAvLyAgIGNvbnN0IGZvcmQgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpO1xuICAvLyAgIGNvbnN0IGZvcm1BdHRycyA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSkuZGF0YS5hdHRyaWJ1dGVzIHx8IHt9O1xuICAvLyAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBPYmplY3QudmFsdWVzKGZvcm1BdHRycykucmVkdWNlKChvYmosIHYpID0+IHtcbiAgLy8gICAgIGxldCBrID0gdltcImtleVwiXS50cmltKCk7XG4gIC8vICAgICBpZiAoL1tcXHNcXC5dLy50ZXN0KGspKSByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcIkF0dHJpYnV0ZSBrZXlzIG1heSBub3QgY29udGFpbiBzcGFjZXMgb3IgcGVyaW9kc1wiKTtcbiAgLy8gICAgIGRlbGV0ZSB2W1wia2V5XCJdO1xuICAvLyAgICAgb2JqW2tdID0gdjtcbiAgLy8gICAgIHJldHVybiBvYmo7XG4gIC8vICAgfSwge30pO1xuXG4gIC8vICAgLy8gUmVtb3ZlIGF0dHJpYnV0ZXMgd2hpY2ggYXJlIG5vIGxvbmdlciB1c2VkXG4gIC8vICAgZm9yIChsZXQgayBvZiBPYmplY3Qua2V5cyh0aGlzLm9iamVjdC5kYXRhLmRhdGEuYXR0cmlidXRlcykpIHtcbiAgLy8gICAgIGlmICghYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrKSkgYXR0cmlidXRlc1tgLT0ke2t9YF0gPSBudWxsO1xuICAvLyAgIH1cblxuICAvLyAgIC8vIFJlLWNvbWJpbmUgZm9ybURhdGFcbiAgLy8gICBmb3JtRGF0YSA9IE9iamVjdC5lbnRyaWVzKGZvcm1EYXRhKS5maWx0ZXIoZSA9PiAhZVswXS5zdGFydHNXaXRoKFwiZGF0YS5hdHRyaWJ1dGVzXCIpKS5yZWR1Y2UoKG9iaiwgZSkgPT4ge1xuICAvLyAgICAgb2JqW2VbMF1dID0gZVsxXTtcbiAgLy8gICAgIHJldHVybiBvYmo7XG4gIC8vICAgfSwgeyBfaWQ6IHRoaXMub2JqZWN0Ll9pZCwgXCJkYXRhLmF0dHJpYnV0ZXNcIjogYXR0cmlidXRlcyB9KTtcblxuICAvLyAgIC8vIFVwZGF0ZSB0aGUgSXRlbVxuICAvLyAgIHJldHVybiB0aGlzLm9iamVjdC51cGRhdGUoZm9ybURhdGEpO1xuICAvLyB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc2tpbGxOYW1lID0gZm9ybURhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSB8fCB0aGlzLml0ZW0uc3lzdGVtLnNraWxsTmFtZVxuICAgIGlmICh0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwpIHtcbiAgICAgIGNvbnN0IHNwZWNpYWxpemF0aW9uID0gZm9ybURhdGFbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddIHx8IHRoaXMuaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgIGZvcm1EYXRhLm5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICB9IGVsc2Uge1xuICAgICAgZm9ybURhdGEubmFtZSA9IHNraWxsTmFtZVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NwZWxsU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zcGVsbC9tYWluLmh0bWwnLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2l0ZW0nLCAnc3BlbGwnXSxcbiAgICAgIHdpZHRoOiA1MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICBzY3JvbGxZOiBbJy5ib2R5J10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHNoZWV0RGF0YS5pc093bmVyID0gdGhpcy5pdGVtLmlzT3duZXJcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJy5vcHRpb24nKS5jbGljayhldmVudCA9PiB0aGlzLm1vZGlmeVR5cGUoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnI2Nhc3Qtc3BlbGwnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLml0ZW0uY2FzdCgpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgdGhlIGNoZWNrYm94ZXMgZm9yIHR5cGUgd2hlbiB1c2VyIGNsaWNrcyBvbiB0aGUgY29ycmVzcG9uZGluZ1xuICAgKiBsYWJlbCwgbm90IHN1cmUgaWYgdGhpcyB3b3JrcyBvbiBlbmdpbmVzIG90aGVyIHRoYW4gVjhcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge2pRdWVyeS5FdmVudH0gY2xpY2tcbiAgICovXG4gIG1vZGlmeVR5cGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8qKiBQcmV2ZW50cyBwcm9wYWdhdGlvbiBvZiB0aGUgc2FtZSBldmVudCBmcm9tIGJlaW5nIGNhbGxlZCAqL1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgdG9nZ2xlU3dpdGNoID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIHJldHVybiB0b2dnbGVTd2l0Y2gucHJldigpLnRyaWdnZXIoJ2NsaWNrJylcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgQ29DN0FjdGl2ZUVmZmVjdCBmcm9tICcuLi8uLi9hY3RpdmUtZWZmZWN0LmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1N0YXR1c1NoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqXG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdzdGF0dXMnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zdGF0dXMuaHRtbCcsXG4gICAgICB3aWR0aDogNTI1LFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5lZmZlY3QtY29udHJvbCcpXG4gICAgICAuY2xpY2soZXYgPT4gQ29DN0FjdGl2ZUVmZmVjdC5vbk1hbmFnZUFjdGl2ZUVmZmVjdChldiwgdGhpcy5pdGVtKSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIHNoZWV0RGF0YS5lZmZlY3RzID0gQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyh0aGlzLml0ZW0uZWZmZWN0cywgeyBzdGF0dXM6IGZhbHNlIH0pXG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5pdGVtLnN5c3RlbS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgICAgIENPQzcuc3RhdHVzVHlwZVtrZXldID8gQ09DNy5zdGF0dXNUeXBlW2tleV0gOiBudWxsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uTm90ZXMgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXMsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdUYWxlbnRTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAndGFsZW50J10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvdGFsZW50Lmh0bWwnLFxuICAgICAgd2lkdGg6IDUyNSxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuaXRlbS5zeXN0ZW0udHlwZSkpIHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgICAgICBDT0M3LnRhbGVudFR5cGVba2V5XSA/IENPQzcudGFsZW50VHlwZVtrZXldIDogbnVsbFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLm5vdGVzLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGR1cGxpY2F0ZSwgZXhwYW5kT2JqZWN0LCBnYW1lLCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgQ29DN0FjdG9yU2hlZXQgfSBmcm9tICcuL2Jhc2UuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3VmVoaWNsZVNoZWV0IGV4dGVuZHMgQ29DN0FjdG9yU2hlZXQge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldFYyJywgJ2FjdG9yJywgJ2l0ZW0nLCAndmVoaWNsZSddLFxuICAgICAgd2lkdGg6IDU1NSxcbiAgICAgIGhlaWdodDogNDIwLFxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy92ZWhpY2xlLmh0bWwnLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5hY3RvcicsIGRyb3BTZWxlY3RvcjogJy5kcm9wWm9uZScgfV0sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXYnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgIC8vICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4cGVyaW1lbnRhbEZlYXR1cmVzV2FybmluZycpXG4gICAgLy8gKVxuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLnByb3BlcnRpZXMgPSBbXVxuICAgIGlmICh0aGlzLmFjdG9yLnN5c3RlbS5wcm9wZXJ0aWVzLmFybWVkKSB7XG4gICAgICBzaGVldERhdGEucHJvcGVydGllcy5wdXNoKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Bcm1lZFZlaGljbGUnKSlcbiAgICB9XG5cbiAgICBjb25zdCBleHBhbmRlZCA9IHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdleHBhbmRlZCcpXG4gICAgaWYgKHR5cGVvZiBleHBhbmRlZCA9PT0gJ3VuZGVmaW5lZCcpIHNoZWV0RGF0YS5leHBhbmRlZCA9IHRydWVcbiAgICBlbHNlIHNoZWV0RGF0YS5leHBhbmRlZCA9IGV4cGFuZGVkXG4gICAgaWYgKHNoZWV0RGF0YS5leHBhbmRlZCkge1xuICAgICAgc2hlZXREYXRhLm9wdGlvbnMuaGVpZ2h0ID0gNDIwXG4gICAgfSBlbHNlIHNoZWV0RGF0YS5vcHRpb25zLmhlaWdodCA9ICdhdXRvJ1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLm5vdGVzLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIC8vIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzaGVldERhdGEuZGF0YS50eXBlKSkge1xuICAgIC8vICAgaWYoIHZhbHVlKSBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaCggQ09DNy5ib29rVHlwZVtrZXldP0NPQzcuYm9va1R5cGVba2V5XTpudWxsKTtcbiAgICAvLyB9XG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnLmFkZC1hcm1vcicpLmNsaWNrKGFzeW5jICgpID0+IGF3YWl0IHRoaXMuX29uQWRkQXJtb3IoKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnJlbW92ZS1hcm1vcicpXG4gICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gYXdhaXQgdGhpcy5fb25SZW1vdmVBcm1vcihldmVudCkpXG4gICAgaHRtbC5maW5kKCcuZXhwYW5kLWJ1dHRvbicpLmNsaWNrKHRoaXMuX29uVG9nZ2xlRXhwYW5kLmJpbmQodGhpcykpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIC8vIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm47XG4gICAgLy8gaHRtbC5vbignZHJvcCcsIChldmVudCkgPT4gdGhpcy5fb25Ecm9wKGV2ZW50KSk7XG4gICAgLy8gaHRtbC5maW5kKCcuc3BlbGwgLnNwZWxsLW5hbWUgaDQnKS5jbGljayhldmVudCA9PiB0aGlzLl9vblNwZWxsU3VtbWFyeShldmVudCkpO1xuICAgIC8vIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2sodGhpcy5fb25TcGVsbERlbGV0ZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZUV4cGFuZCAoKSB7XG4gICAgY29uc3QgZXhwYW5kZWQgPSB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnKVxuICAgIGlmIChleHBhbmRlZCkge1xuICAgICAgdGhpcy5vbGRTaXplID0gdGhpcy5wb3NpdGlvbi5oZWlnaHRcbiAgICAgIHRoaXMucG9zaXRpb24uaGVpZ2h0ID0gJ2F1dG8nIC8vIFJlc2V0IHRoZSBzdG9yZWQgcG9zaXRpb24gdG8gZm9yY2UgdG8gcmVjYWxjdWxhdGUgd2luZG93IHNpemUgVE9ETzogU3RvcmUgcHJldmlvdXMgcG9zaXRpb24gdG8gcmVzdG9yZSBpdCBpbnN0ZWFkIG9mIGF1dG9cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wb3NpdGlvbi5oZWlnaHQgPSB0aGlzLm9sZFNpemUgfHwgNDIwIC8vIFJlc2V0IHRoZSBzdG9yZWQgcG9zaXRpb24gdG8gZm9yY2UgdG8gcmVjYWxjdWxhdGUgd2luZG93IHNpemUgVE9ETzogU3RvcmUgcHJldmlvdXMgcG9zaXRpb24gdG8gcmVzdG9yZSBpdCBpbnN0ZWFkIG9mIGF1dG9cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ2V4cGFuZGVkJywgIWV4cGFuZGVkKVxuICB9XG5cbiAgYXN5bmMgX29uQWRkQXJtb3IgKCkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZShcbiAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zIHx8IFtdXG4gICAgKVxuICAgIGxvY2F0aW9ucy5wdXNoKHsgbmFtZTogbnVsbCwgdmFsdWU6IG51bGwgfSlcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMnOiBsb2NhdGlvbnMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlbW92ZUFybW9yIChldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsb2NhdGlvbiA9IGJ1dHRvbi5jbG9zZXN0KCcuYXJtb3InKVxuICAgIGNvbnN0IGluZGV4ID0gbG9jYXRpb24uZGF0YXNldC5pbmRleFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZShcbiAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zIHx8IG51bGxcbiAgICApXG4gICAgaWYgKCFsb2NhdGlvbnMpIHJldHVyblxuICAgIGxvY2F0aW9ucy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJzogbG9jYXRpb25zIH0pXG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHN1cGVyLm9uQ2xvc2VTaGVldCgpXG4gICAgLy8gdGhpcy5hY3Rvci5sb2NrZWQgPSB0cnVlO1xuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIEZvcm0gU3VibWlzc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKT8uc3lzdGVtXG4gICAgaWYgKHN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyddID0gT2JqZWN0LnZhbHVlcyhcbiAgICAgICAgc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zIHx8IFtdXG4gICAgICApXG4gICAgfVxuXG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1dlYXBvblNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqXG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdpdGVtJ10sXG4gICAgICB3aWR0aDogNTQ1LFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC10YWJzJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3NraWxscydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICovXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgY29uc3QgcGF0aCA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zJ1xuICAgIHJldHVybiBgJHtwYXRofS93ZWFwb24tc2hlZXQuaHRtbGBcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbCA9IFtdXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuICAgIGlmIChzaGVldERhdGEuaGFzT3duZXIpIHtcbiAgICAgIHNoZWV0RGF0YS5maXJlYXJtU2tpbGxzID0gdGhpcy5hY3Rvci5maXJlYXJtU2tpbGxzXG4gICAgICBzaGVldERhdGEuZmlnaHRpbmdTa2lsbHMgPSB0aGlzLmFjdG9yLmZpZ2h0aW5nU2tpbGxzXG4gICAgICBzaGVldERhdGEuY29tYmF0U2tpbGwgPSB0aGlzLml0ZW0uYWN0b3IuaXRlbXMuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH0pXG5cbiAgICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICB9XG5cbiAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIHNoZWV0RGF0YS5fcHJvcGVydGllcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogdmFsdWUsXG4gICAgICAgIGlzRW5hYmxlZDogdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLl9lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBzaGVldERhdGEuX2VyYXMucHVzaCh7XG4gICAgICAgIHByaWNlOiB0aGlzLml0ZW0uc3lzdGVtLnByaWNlW2tleV0gPz8gMCxcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSxcbiAgICAgICAgaXNFbmFibGVkOiAodGhpcy5pdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHNoZWV0RGF0YS5fZXJhcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS51c2VzQWx0ZXJuYXRlU2tpbGwgPVxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8gPT09IHRydWUgfHxcbiAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5icnN0ID09PSB0cnVlIHx8XG4gICAgICB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMudGhyb3duID09PSB0cnVlXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uU3BlY2lhbCA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5zcGVjaWFsLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcud2VhcG9uLXByb3BlcnR5JykuY2xpY2sodGhpcy5fb25Qcm9wZXJ0eUNsaWNrLmJpbmQodGhpcykpXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKi9cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy50b2dnbGUtc3dpdGNoJykuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShcbiAgICAgIHByb3BlcnR5SWQsXG4gICAgICBpc0N0cmxLZXkoZXZlbnQpXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgX29uUHJvcGVydHlDbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbi1wcm9wZXJ0eScpLmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkocHJvcGVydHlJZClcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUsIEhvb2tzICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuYXN5bmMgZnVuY3Rpb24gcGVyZm9ybUZpbHRlciAoZSkge1xuICBjb25zdCBhcHBJZCA9IGUuY3VycmVudFRhcmdldC5uYW1lLnJlcGxhY2UoL15jb2M3W14wLTldKyhcXGQrKSQvLCAnJDEnKVxuICBjb25zdCBhcHAgPSAkKCdkaXYuYXBwW2RhdGEtYXBwaWQ9JyArIGFwcElkICsgJ10nKVxuICBjb25zdCB0eXBlID0gYXBwLmZpbmQoJ3NlbGVjdFtuYW1lPWNvYzd0eXBlJyArIGFwcElkICsgJ10nKS52YWwoKVxuICBjb25zdCBuYW1lID0gYXBwLmZpbmQoJ2lucHV0W25hbWU9c2VhcmNoXScpLnZhbCgpXG4gIGNvbnN0IGVyYUVsZW1lbnQgPSBhcHAuZmluZCgnc2VsZWN0W25hbWU9Y29jN2VyYScgKyBhcHBJZCArICddJylcbiAgbGV0IGVyYSA9ICcnXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3NldHVwJzpcbiAgICBjYXNlICdza2lsbCc6XG4gICAgY2FzZSAnd2VhcG9uJzpcbiAgICAgIGVyYUVsZW1lbnQuY2xvc2VzdCgnZGl2LmVyYV9zZWxlY3QnKS5zaG93KClcbiAgICAgIGVyYSA9IGVyYUVsZW1lbnQudmFsKClcbiAgICAgIGJyZWFrXG4gICAgZGVmYXVsdDpcbiAgICAgIGVyYUVsZW1lbnQuY2xvc2VzdCgnZGl2LmVyYV9zZWxlY3QnKS5oaWRlKClcbiAgfVxuICBjb25zdCBpdGVtcyA9IGF3YWl0IGdhbWUucGFja3MuZ2V0KGFwcC5kYXRhKCdwYWNrSWQnKSk/LmdldERvY3VtZW50cygpXG4gIGlmICh0eXBlb2YgaXRlbXMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuXG4gIH1cbiAgY29uc3Qgc2hvdyA9IFtdXG4gIGNvbnN0IG5hbWVGaWx0ZXIgPSBuZXcgUmVnRXhwKFJlZ0V4cC5lc2NhcGUobmFtZSksICdpJylcbiAgZm9yIChjb25zdCBbLCBpdGVtXSBvZiBPYmplY3QuZW50cmllcyhpdGVtcykpIHtcbiAgICBsZXQgZmlsdGVyID0gdHJ1ZVxuICAgIGlmIChmaWx0ZXIgJiYgbmFtZSAhPT0gJycpIHtcbiAgICAgIGZpbHRlciA9IGl0ZW0ubmFtZS5tYXRjaChuYW1lRmlsdGVyKVxuICAgIH1cbiAgICBpZiAoZmlsdGVyICYmIHR5cGUgIT09ICcnKSB7XG4gICAgICBmaWx0ZXIgPSBpdGVtLnR5cGUgPT09IHR5cGVcbiAgICB9XG4gICAgaWYgKGZpbHRlciAmJiBlcmEgIT09ICcnKSB7XG4gICAgICBjb25zdCBlcmFzID0gaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzXG4gICAgICBpZiAoZXJhcyAmJiBPYmplY3Qua2V5cyhlcmFzKS5sZW5ndGggPiAwICYmICEoZXJhc1tlcmFdID8/IGZhbHNlKSkge1xuICAgICAgICBmaWx0ZXIgPSBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZmlsdGVyKSB7XG4gICAgICBzaG93LnB1c2goaXRlbS5pZClcbiAgICB9XG4gIH1cbiAgYXBwLmZpbmQoJ29sLmRpcmVjdG9yeS1saXN0IGxpJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gc2hvdy5pbmNsdWRlcyh0aGlzLmRhdGFzZXQuZG9jdW1lbnRJZClcbiAgICAgID8gJ2ZsZXgnXG4gICAgICA6ICdub25lJ1xuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY29tcGVuZGl1bUZpbHRlciAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJDb21wZW5kaXVtJywgYXN5bmMgKGFwcCwgaHRtbCwgZGF0YSkgPT4ge1xuICAgIGlmIChhcHAuY29sbGVjdGlvbi5kb2N1bWVudE5hbWUgPT09ICdJdGVtJykge1xuICAgICAgYXdhaXQgYXBwLmNvbGxlY3Rpb24uZ2V0SW5kZXgoKVxuICAgICAgY29uc3QgdHlwZXMgPSBbLi4ubmV3IFNldChkYXRhLmluZGV4LmZpbHRlcihpID0+IGkubmFtZSAhPT0gJyNbQ0ZfdGVtcEVudGl0eV0nKS5tYXAoaXRlbSA9PiBpdGVtLnR5cGUpKV1cbiAgICAgIGNvbnN0IHNlbGVjdCA9IFtdXG4gICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFsbCcpICsgJzwvb3B0aW9uPidcbiAgICAgIClcbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnYXJjaGV0eXBlJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJhcmNoZXR5cGVcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5BcmNoZXR5cGUnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ2Jvb2snKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cImJvb2tcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Cb29rJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdpdGVtJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJpdGVtXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuSXRlbScpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnb2NjdXBhdGlvbicpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwib2NjdXBhdGlvblwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLk9jY3VwYXRpb24nKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3NldHVwJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJzZXR1cFwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNldHVwJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdza2lsbCcpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwic2tpbGxcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Ta2lsbCcpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnc3BlbGwnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInNwZWxsXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU3BlbGwnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3N0YXR1cycpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwic3RhdHVzXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU3RhdHVzJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCd0YWxlbnQnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInRhbGVudFwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlRhbGVudCcpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnd2VhcG9uJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJ3ZWFwb25cIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5XZWFwb24nKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb25zdCBlcmFzID0gW11cbiAgICAgIGVyYXMucHVzaChcbiAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFsbCcpICsgJzwvb3B0aW9uPidcbiAgICAgIClcbiAgICAgIGZvciAoY29uc3QgZXJhIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykubWFwKGUgPT4geyByZXR1cm4geyBpZDogZVswXSwgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKGVbMV0pIH0gfSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpKSB7XG4gICAgICAgIGVyYXMucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIicgK1xuICAgICAgICAgICAgZXJhLmlkICtcbiAgICAgICAgICAgICdcIj4nICtcbiAgICAgICAgICAgIGVyYS5uYW1lICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGh0bWwuZGF0YSgncGFja0lkJywgYXBwLm1ldGFkYXRhLmlkKVxuICAgICAgbGV0IHVuY29tbW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsUmFyaXR5U2hvcnQnKVxuICAgICAgaWYgKHVuY29tbW9uID09PSAnQ29DNy5Ta2lsbFJhcml0eVNob3J0Jykge1xuICAgICAgICB1bmNvbW1vbiA9ICc/PydcbiAgICAgIH1cbiAgICAgIGh0bWwuZmluZCgnbGkuZGlyZWN0b3J5LWl0ZW0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gJCh0aGlzKVxuICAgICAgICBsZXQgaXRlbSA9IFtdXG4gICAgICAgIGlmICh0eXBlb2YgZGF0YS5pbmRleCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAvLyBERVBSRUNJQVRFRCBJTiB2MTFcbiAgICAgICAgICBpdGVtID0gZGF0YS5pbmRleC5maW5kKGkgPT4gaS5faWQgPT09IHJvdy5kYXRhKCdkb2N1bWVudC1pZCcpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW0gPSBhcHAuY29sbGVjdGlvbi5pbmRleC5nZXQocm93LmRhdGEoJ2RvY3VtZW50LWlkJykpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgcm93LmZpbmQoJ2EnKS5odG1sKGl0ZW0ubmFtZSArICcgKCcgKyAoaXRlbS5zeXN0ZW0/LmJhc2UgPz8gJz8nKSArICclJyArICgoaXRlbS5zeXN0ZW0/LnByb3BlcnRpZXM/LnJhcml0eSA/PyBmYWxzZSkgPyAnICcgKyB1bmNvbW1vbiA6ICcnKSArICcpJylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ2hlYWRlci5kaXJlY3RvcnktaGVhZGVyJylcbiAgICAgICAgLmFmdGVyKFxuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29tcGVuZGl1bWZpbHRlclwiPicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaGVhZGVyLXNlYXJjaCBmbGV4cm93XCI+PGkgY2xhc3M9XCJmYXMgZmEtbGF5ZXItZ3JvdXBcIj48L2k+PHNlbGVjdCBuYW1lPVwiY29jN3R5cGUnICsgYXBwLmFwcElkICsgJ1wiIHN0eWxlPVwiXCI+JyArIHNlbGVjdC5qb2luKCcnKSArICc8L3NlbGVjdD48L2Rpdj4nICtcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImhlYWRlci1zZWFyY2ggZmxleHJvdyBlcmFfc2VsZWN0XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48aSBjbGFzcz1cImZhcyBmYS1sYXllci1ncm91cFwiPjwvaT48c2VsZWN0IG5hbWU9XCJjb2M3ZXJhJyArIGFwcC5hcHBJZCArICdcIiBzdHlsZT1cIlwiPicgKyBlcmFzLmpvaW4oJycpICsgJzwvc2VsZWN0PjwvZGl2PicgK1xuICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnc2VsZWN0JykuY2hhbmdlKHBlcmZvcm1GaWx0ZXIuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnaW5wdXQnKS5rZXl1cChwZXJmb3JtRmlsdGVyLmJpbmQodGhpcykpXG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDYXJkLCBDT05GSUcsIGZsYXR0ZW5PYmplY3QsIGdhbWUsIEl0ZW0sIEpvdXJuYWxFbnRyeSwgTWFjcm8sIFBsYXlsaXN0LCBSb2xsVGFibGUsIFNjZW5lLCBTY2VuZU5hdmlnYXRpb24sIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQ0lEIHtcbiAgc3RhdGljIGluaXQgKCkge1xuICAgIENPTkZJRy5BY3Rvci5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIC8vIENPTkZJRy5DYXJkcy5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5JdGVtLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLkl0ZW0uY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ3N5c3RlbS5iYXNlJylcbiAgICBDT05GSUcuSXRlbS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnc3lzdGVtLnByb3BlcnRpZXMnKVxuICAgIENPTkZJRy5Kb3VybmFsRW50cnkuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuTWFjcm8uY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuUGxheWxpc3QuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuUm9sbFRhYmxlLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLlNjZW5lLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgZ2FtZS5zeXN0ZW0uYXBpID0ge1xuICAgICAgY29jaWQ6IENvQ0lEXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgUmVnRXhwIGZvciB2YWxpZCB0eXBlIGFuZCBmb3JtYXRcbiAgICogQHJldHVybnMgUmVnRXhwXG4gICAqL1xuICBzdGF0aWMgcmVnRXhLZXkgKCkge1xuICAgIHJldHVybiBuZXcgUmVnRXhwKCdeKCcgKyBPYmplY3Qua2V5cyhDb0NJRC5nYW1lUHJvcGVydHlMb29rdXApLmpvaW4oJ3wnKSArICcpXFxcXC4oLio/KVxcXFwuKC4rKSQnKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDb0NJRCB0eXBlLnN1YnR5cGUuIGJhc2VkIG9uIGRvY3VtZW50XG4gICAqIEBwYXJhbSBkb2N1bWVudFxuICAgKiBAcmV0dXJucyBzdHJpbmdcbiAgICovXG4gIHN0YXRpYyBnZXRQcmVmaXggKGRvY3VtZW50KSB7XG4gICAgZm9yIChjb25zdCB0eXBlIGluIENvQ0lELmRvY3VtZW50TmFtZUxvb2t1cCkge1xuICAgICAgaWYgKGRvY3VtZW50IGluc3RhbmNlb2YgQ29DSUQuZG9jdW1lbnROYW1lTG9va3VwW3R5cGVdKSB7XG4gICAgICAgIHJldHVybiB0eXBlICsgJy4nICsgKGRvY3VtZW50LnR5cGUgPz8gJycpICsgJy4nXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDb0NJRCB0eXBlLnN1YnR5cGUubmFtZSBiYXNlZCBvbiBkb2N1bWVudFxuICAgKiBAcGFyYW0gZG9jdW1lbnRcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ3Vlc3NJZCAoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gQ29DSUQuZ2V0UHJlZml4KGRvY3VtZW50KSArIENvQzdVdGlsaXRpZXMudG9LZWJhYkNhc2UoZG9jdW1lbnQubmFtZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQ29DSUQgdHlwZS5zdWJ0eXBlLnBhcnRpYWwtbmFtZSgtcmVtb3ZlZClcbiAgICogQHBhcmFtIGtleVxuICAgKiBAcmV0dXJucyBzdHJpbmdcbiAgICovXG4gIHN0YXRpYyBndWVzc0dyb3VwRnJvbUtleSAoaWQpIHtcbiAgICBpZiAoaWQpIHtcbiAgICAgIGNvbnN0IGtleSA9IGlkLnJlcGxhY2UoLyhbXlxcXFwuLV0rKSQvLCAnJylcbiAgICAgIGlmIChrZXkuc3Vic3RyKC0xKSA9PT0gJy0nKSB7XG4gICAgICAgIHJldHVybiBrZXlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvKipcbiAgICogR2V0IENvQ0lEIHR5cGUuc3VidHlwZS5wYXJ0aWFsLW5hbWUoLXJlbW92ZWQpXG4gICAqIEBwYXJhbSBkb2N1bWVudFxuICAgKiBAcmV0dXJucyBzdHJpbmdcbiAgICovXG4gIHN0YXRpYyBndWVzc0dyb3VwRnJvbURvY3VtZW50IChkb2N1bWVudCkge1xuICAgIHJldHVybiBDb0NJRC5ndWVzc0dyb3VwRnJvbUtleShkb2N1bWVudC5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRyYW5zbGF0aW9uIG9mIGVyYSBrZXlcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcmV0dXJucyBzdHJpbmdcbiAgICovXG4gIHN0YXRpYyBlcmFUZXh0IChlcmEpIHtcbiAgICBpZiAoZXJhID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnknKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdChDT0M3LmVyYXNbZXJhXSA/PyAnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYSB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIGl0ZW1zIHdpdGggbWF0Y2hpbmcgQ29DSURzLCBsYW5ndWFnZSwgYW5kIGVyYXNcbiAgICogdWkubm90aWZpY2F0aW9ucy53YXJuIGZvciBtaXNzaW5nIGtleXNcbiAgICogQHBhcmFtIGl0ZW1MaXN0IGFycmF5IG9mIENvQ0lEc1xuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gc2hvd0xvYWRpbmcgU2hvdyBsb2FkaW5nIGJhclxuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGV4cGFuZEl0ZW1BcnJheSAoeyBpdGVtTGlzdCwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSB0cnVlLCBsYW5nRmFsbGJhY2sgPSB0cnVlLCBzaG93TG9hZGluZyA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGxldCBpdGVtcyA9IFtdXG4gICAgY29uc3QgY29jaWRzID0gaXRlbUxpc3QuZmlsdGVyKGl0ID0+IHR5cGVvZiBpdCA9PT0gJ3N0cmluZycpXG4gICAgaXRlbXMgPSBpdGVtTGlzdC5maWx0ZXIoaXQgPT4gdHlwZW9mIGl0ICE9PSAnc3RyaW5nJylcblxuICAgIGlmIChjb2NpZHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBmb3VuZCA9IGF3YWl0IENvQ0lELmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiBDb0NJRC5tYWtlR3JvdXBSZWdFeChjb2NpZHMpLCB0eXBlOiAnaScsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrLCBzaG93TG9hZGluZyB9KVxuICAgICAgY29uc3QgYWxsID0gW11cbiAgICAgIGZvciAoY29uc3QgY29jaWQgb2YgY29jaWRzKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBmb3VuZC5maW5kKGkgPT4gaS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gY29jaWQpXG4gICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgYWxsLnB1c2goaXRlbSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGFsbC5sZW5ndGggPCBjb2NpZHMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IG5vdG1pc3NpbmcgPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IGRvYyBvZiBhbGwpIHtcbiAgICAgICAgICBub3RtaXNzaW5nLnB1c2goZG9jLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkKVxuICAgICAgICB9XG4gICAgICAgIGlmIChlcmEgPT09IHRydWUpIHtcbiAgICAgICAgICBlcmEgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpXG4gICAgICAgIH1cbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLmRvY3VtZW50cy1ub3QtZm91bmQnLCB7IGNvY2lkczogY29jaWRzLmZpbHRlcih4ID0+ICFub3RtaXNzaW5nLmluY2x1ZGVzKHgpKS5qb2luKCcsICcpLCBsYW5nLCBlcmE6IENvQ0lELmVyYVRleHQoZXJhKSB9KSlcbiAgICAgIH1cbiAgICAgIGl0ZW1zID0gaXRlbXMuY29uY2F0KGFsbClcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpdGVtIHdpdGggbWF0Y2hpbmcgQ29DSURzIGZyb20gbGlzdFxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG1pc3Npbmcga2V5c1xuICAgKiBAcGFyYW0gY29jaWQgYSBzaW5nbGUgY29jaWRcbiAgICogQHBhcmFtIGxpc3QgYXJyYXkgb2YgaXRlbXNcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBmaW5kQ29jSWRJbkxpc3QgKGNvY2lkLCBsaXN0KSB7XG4gICAgbGV0IGl0ZW1OYW1lID0gJydcbiAgICBjb25zdCBDb0NJREtleXMgPSBmbGF0dGVuT2JqZWN0KGdhbWUuaTE4bi50cmFuc2xhdGlvbnMuQ29DNy5Db0NJREZsYWcua2V5cylcbiAgICBpZiAodHlwZW9mIENvQ0lES2V5c1tjb2NpZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpdGVtTmFtZSA9IENvQ0lES2V5c1tjb2NpZF1cbiAgICB9XG4gICAgcmV0dXJuICh0eXBlb2YgbGlzdC5maWx0ZXIgPT09ICd1bmRlZmluZWQnID8gT2JqZWN0LnZhbHVlcyhsaXN0KSA6IGxpc3QpLmZpbHRlcihpID0+IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IGNvY2lkIHx8IChpdGVtTmFtZSAhPT0gJycgJiYgaXRlbU5hbWUgPT09IGkubmFtZSkpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBSZWdFeHAgbWF0Y2hpbmcgYWxsIHN0cmluZ3MgaW4gYXJyYXlcbiAgICogQHBhcmFtIGNvY2lkcyBhbiBhcnJheSBvZiBDb0NJRCBzdHJpbmdzXG4gICAqIEBwYXJhbSBsaXN0IGFycmF5IG9mIGl0ZW1zXG4gICAqIEByZXR1cm5zIFJlZ0V4cFxuICAgKi9cbiAgc3RhdGljIG1ha2VHcm91cFJlZ0V4IChjb2NpZHMpIHtcbiAgICBpZiAodHlwZW9mIGNvY2lkcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvY2lkcyA9IFtjb2NpZHNdXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29jaWRzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgY29jaWRzLmZpbHRlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBjb25zdCBzcGxpdHMgPSB7fVxuICAgIGNvbnN0IHJneCA9IENvQ0lELnJlZ0V4S2V5KClcbiAgICBmb3IgKGNvbnN0IGkgb2YgY29jaWRzKSB7XG4gICAgICBjb25zdCBrZXkgPSBpLm1hdGNoKHJneClcbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzcGxpdHNba2V5WzFdXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzcGxpdHNba2V5WzFdXSA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBzcGxpdHNba2V5WzFdXVtrZXlbMl1dID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNwbGl0c1trZXlbMV1dW2tleVsyXV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHNwbGl0c1trZXlbMV1dW2tleVsyXV0ucHVzaChrZXlbM10pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTbGllbnRseSBlcnJvclxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZWdFeFBhcnRzID0gW11cbiAgICBmb3IgKGNvbnN0IHQgaW4gc3BsaXRzKSB7XG4gICAgICBjb25zdCByb3cgPSBbXVxuICAgICAgZm9yIChjb25zdCBzIGluIHNwbGl0c1t0XSkge1xuICAgICAgICBpZiAoc3BsaXRzW3RdW3NdLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICByb3cucHVzaChzICsgJ1xcXFwuJyArICcoJyArIHNwbGl0c1t0XVtzXS5qb2luKCd8JykgKyAnKScpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm93LnB1c2gocyArICdcXFxcLicgKyBzcGxpdHNbdF1bc10uam9pbignJykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChyb3cubGVuZ3RoID4gMSkge1xuICAgICAgICByZWdFeFBhcnRzLnB1c2godCArICdcXFxcLicgKyAnKCcgKyByb3cuam9pbignfCcpICsgJyknKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVnRXhQYXJ0cy5wdXNoKHQgKyAnXFxcXC4nICsgcm93LmpvaW4oJycpKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVnRXhQYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXignICsgcmVnRXhQYXJ0cy5qb2luKCd8JykgKyAnKSQnKVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByZWdFeFBhcnRzLmpvaW4oJycpICsgJyQnKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIGRvY3VtZW50cyB3aXRoIGFuIENvQ0lEIG1hdGNoaW5nIHRoZSByZWdleCBhbmQgbWF0Y2hpbmcgdGhlIGRvY3VtZW50IHR5cGVcbiAgICogYW5kIGxhbmd1YWdlLCBmcm9tIHRoZSBzcGVjaWZpZWQgc2NvcGUuXG4gICAqIEVtcHR5IGFycmF5IHJldHVybiBmb3Igbm8gbWF0Y2hlc1xuICAgKiBAcGFyYW0gY29jaWRSZWdFeHAgcmVnZXggdXNlZCBvbiB0aGUgQ29DSURcbiAgICogQHBhcmFtIHR5cGUgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHdhbnRlZCBDb0NJRCwgZm9yIGV4YW1wbGUgJ2knLCAnYScsICdqZSdcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gc2NvcGUgZGVmaW5lcyB3aGVyZSBpdCB3aWxsIGxvb2s6XG4gICAqICoqbWF0Y2gqKiBzYW1lIGxvZ2ljIGFzIGZyb21Db0NJRCBmdW5jdGlvbixcbiAgICogKiphbGwqKjogZmluZCBpbiBib3RoIHdvcmxkICYgY29tcGVuZGlhLFxuICAgKiAqKndvcmxkKio6IG9ubHkgc2VhcmNoIGluIHdvcmxkLFxuICAgKiAqKmNvbXBlbmRpdW1zKio6IG9ubHkgc2VhcmNoIGluIGNvbXBlbmRpdW1zXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gc2hvd0xvYWRpbmcgU2hvdyBsb2FkaW5nIGJhclxuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZyb21Db0NJRFJlZ2V4QWxsICh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IGZhbHNlLCBzY29wZSA9ICdtYXRjaCcsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFjb2NpZFJlZ0V4cCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IFtdXG5cbiAgICBsZXQgY291bnQgPSAwXG4gICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICBpZiAoWydtYXRjaCcsICdhbGwnLCAnd29ybGQnXS5pbmNsdWRlcyhzY29wZSkpIHtcbiAgICAgICAgY291bnQrK1xuICAgICAgfVxuICAgICAgaWYgKFsnbWF0Y2gnLCAnYWxsJywgJ2NvbXBlbmRpdW1zJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICAgIGNvdW50ID0gY291bnQgKyBnYW1lLnBhY2tzLnNpemVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoWydtYXRjaCcsICdhbGwnLCAnd29ybGQnXS5pbmNsdWRlcyhzY29wZSkpIHtcbiAgICAgIGNvbnN0IHdvcmxkRG9jdW1lbnRzID0gYXdhaXQgQ29DSUQuZG9jdW1lbnRzRnJvbVdvcmxkKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrLCBwcm9ncmVzc0JhcjogY291bnQgfSlcbiAgICAgIGlmIChzY29wZSA9PT0gJ21hdGNoJyAmJiB3b3JsZERvY3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IDEwMCB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZpbHRlckFsbENvQ0lEKHdvcmxkRG9jdW1lbnRzLCBsYW5nRmFsbGJhY2sgJiYgbGFuZyAhPT0gJ2VuJylcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5zcGxpY2UoMCwgMCwgLi4ud29ybGREb2N1bWVudHMpXG4gICAgfVxuXG4gICAgaWYgKFsnbWF0Y2gnLCAnYWxsJywgJ2NvbXBlbmRpdW1zJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICBjb25zdCBjb21wZW5kaWFEb2N1bWVudHMgPSBhd2FpdCBDb0NJRC5kb2N1bWVudHNGcm9tQ29tcGVuZGlhKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrLCBwcm9ncmVzc0JhcjogY291bnQgfSlcblxuICAgICAgcmVzdWx0LnNwbGljZShyZXN1bHQubGVuZ3RoLCAwLCAuLi5jb21wZW5kaWFEb2N1bWVudHMpXG4gICAgfVxuXG4gICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICBTY2VuZU5hdmlnYXRpb24uZGlzcGxheVByb2dyZXNzQmFyKHsgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVVAuUGFja2FnZXNMb2FkaW5nJyksIHBjdDogMTAwIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZmlsdGVyQWxsQ29DSUQocmVzdWx0LCBsYW5nRmFsbGJhY2sgJiYgbGFuZyAhPT0gJ2VuJylcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCBkb2N1bWVudHMgd2l0aCBhbiBDb0NJRCwgbGFuZ3VhZ2UsIGFuZCBlcmEgZnJvbSB0aGUgc3BlY2lmaWVkIHNjb3BlLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkIGEgc2luZ2xlIGNvY2lkXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIHNjb3BlIGRlZmluZXMgd2hlcmUgaXQgd2lsbCBsb29rOlxuICAgKiAqKm1hdGNoKiogc2FtZSBsb2dpYyBhcyBmcm9tQ29DSUQgZnVuY3Rpb24sXG4gICAqICoqYWxsKio6IGZpbmQgaW4gYm90aCB3b3JsZCAmIGNvbXBlbmRpYSxcbiAgICogKip3b3JsZCoqOiBvbmx5IHNlYXJjaCBpbiB3b3JsZCxcbiAgICogKipjb21wZW5kaXVtcyoqOiBvbmx5IHNlYXJjaCBpbiBjb21wZW5kaXVtc1xuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBmcm9tQ29DSURBbGwgKHsgY29jaWQsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gZmFsc2UsIHNjb3BlID0gJ21hdGNoJywgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIWNvY2lkIHx8IHR5cGVvZiBjb2NpZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBjb25zdCBwYXJ0cyA9IGNvY2lkLm1hdGNoKENvQ0lELnJlZ0V4S2V5KCkpXG4gICAgaWYgKCFwYXJ0cykge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGlmIChsYW5nID09PSAnJykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURSZWdleEFsbCh7IGNvY2lkUmVnRXhwOiBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoY29jaWQpICsgJyQnKSwgdHlwZTogcGFydHNbMV0sIGxhbmcsIGVyYSwgc2NvcGUsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG9ubHkgdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnRzIGZvciBlYWNoIENvQ0lEIHRoYXQgbWF0Y2hlcyB0aGUgUmVnRXhwIGFuZFxuICAgKiBsYW5ndWFnZSwgd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudHMgaW4gdGhlIFdvcmxkIHRha2luZyBwcmVjZWRlbmNlIG92ZXJcbiAgICogYW55IGRvY3VtZW50cyBpbiBjb21wZW5kaXVtIHBhY2tzLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0IChcImVuXCIsIFwiZXNcIiwgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gc2hvd0xvYWRpbmcgU2hvdyBsb2FkaW5nIGJhclxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZyb21Db0NJRFJlZ2V4QmVzdCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSB0cnVlLCBsYW5nRmFsbGJhY2sgPSB0cnVlLCBzaG93TG9hZGluZyA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGNvbnN0IGFsbERvY3VtZW50cyA9IGF3YWl0IHRoaXMuZnJvbUNvQ0lEUmVnZXhBbGwoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZywgZXJhLCBzY29wZTogJ2FsbCcsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgICBjb25zdCBiZXN0RG9jdW1lbnRzID0gdGhpcy5maWx0ZXJCZXN0Q29DSUQoYWxsRG9jdW1lbnRzKVxuICAgIHJldHVybiBiZXN0RG9jdW1lbnRzXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBvbmx5IHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50IGZvciBDb0NJRCB0aGF0IG1hdGNoZXMgdGhlIGxhbmd1YWdlLFxuICAgKiB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50cyBpbiB0aGUgV29ybGQgdGFraW5nIHByZWNlZGVuY2Ugb3ZlclxuICAgKiBhbnkgZG9jdW1lbnRzXG4gICAqIGluIGNvbXBlbmRpdW0gcGFja3MuXG4gICAqIEBwYXJhbSBjb2NpZCBzdHJpbmcgQ29DSURcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKFwiZW5cIiwgXCJlc1wiLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqL1xuICBzdGF0aWMgZnJvbUNvQ0lEIChjb2NpZCwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSB0cnVlLCBsYW5nRmFsbGJhY2sgPSB0cnVlKSB7XG4gICAgcmV0dXJuIENvQ0lELmZyb21Db0NJREJlc3QoeyBjb2NpZCwgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2sgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG9ubHkgdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnQgZm9yIENvQ0lEIHRoYXQgbWF0Y2hlcyB0aGUgbGFuZ3VhZ2UsXG4gICAqIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnRzIGluIHRoZSBXb3JsZCB0YWtpbmcgcHJlY2VkZW5jZSBvdmVyXG4gICAqIGFueSBkb2N1bWVudHNcbiAgICogaW4gY29tcGVuZGl1bSBwYWNrcy5cbiAgICogQHBhcmFtIGNvY2lkIHN0cmluZyBDb0NJRFxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoXCJlblwiLCBcImVzXCIsIC4uLilcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICovXG4gIHN0YXRpYyBmcm9tQ29DSURCZXN0ICh7IGNvY2lkLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFjb2NpZCB8fCB0eXBlb2YgY29jaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IGNvY2lkLnNwbGl0KCcuJylbMF1cbiAgICBjb25zdCBjb2NpZFJlZ0V4cCA9IG5ldyBSZWdFeHAoJ14nICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChjb2NpZCkgKyAnJCcpXG4gICAgcmV0dXJuIENvQ0lELmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgYW4gYXJyYXkgb2YgZG9jdW1lbnRzLCByZXR1cm5zIG9ubHkgdGhvc2UgdGhhdCBhcmUgdGhlIFwiYmVzdFwiIHZlcnNpb24gb2YgdGhlaXIgQ29DSURcbiAgICogQHBhcmFtIGRvY3VtZW50c1xuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgc3RhdGljIGZpbHRlckJlc3RDb0NJRCAoZG9jdW1lbnRzKSB7XG4gICAgY29uc3QgYmVzdE1hdGNoRG9jdW1lbnRzID0gbmV3IE1hcCgpXG5cbiAgICBmb3IgKGNvbnN0IGRvYyBvZiBkb2N1bWVudHMpIHtcbiAgICAgIGNvbnN0IGRvY0NvQ0lEID0gZG9jLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LmlkXG4gICAgICBpZiAoZG9jQ29DSUQpIHtcbiAgICAgICAgY29uc3QgY3VycmVudEV4aXN0cyA9IGJlc3RNYXRjaERvY3VtZW50cy5nZXQoZG9jQ29DSUQpPy5pZFxuICAgICAgICBjb25zdCBkb2NMYW5nID0gZG9jLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LmxhbmcgPz8gJ2VuJ1xuICAgICAgICBjb25zdCBleGlzdGluZ0xhbmcgPSBiZXN0TWF0Y2hEb2N1bWVudHMuZ2V0KGRvY0NvQ0lEKT8uZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ubGFuZyA/PyAnZW4nXG4gICAgICAgIGNvbnN0IHByZWZlckxhbmcgPSAoIWN1cnJlbnRFeGlzdHMgfHwgZXhpc3RpbmdMYW5nID09PSAnZW4nIHx8IGV4aXN0aW5nTGFuZyA9PT0gZG9jTGFuZylcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3ByZWZlckxhbmcnLCAnPicsIGRvY0xhbmcsICc8ID4nLCBleGlzdGluZ0xhbmcsICc8JywgcHJlZmVyTGFuZylcbiAgICAgICAgY29uc3QgZG9jUGFjayA9IChkb2MucGFjayA/PyAnJylcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQYWNrID0gKGJlc3RNYXRjaERvY3VtZW50cy5nZXQoZG9jQ29DSUQpPy5wYWNrID8/ICcnKVxuICAgICAgICBjb25zdCBwcmVmZXJXb3JsZCA9ICghY3VycmVudEV4aXN0cyB8fCBkb2NQYWNrID09PSAnJyB8fCBleGlzdGluZ1BhY2sgIT09ICcnKVxuICAgICAgICAvLyBjb25zb2xlLmxvZygncHJlZmVyV29ybGQnLCAnPicsIGRvY1BhY2ssICc8ID4nLCBleGlzdGluZ1BhY2ssICc8JywgcHJlZmVyV29ybGQpXG4gICAgICAgIGNvbnN0IGRvY1ByaW9yaXR5ID0gcGFyc2VJbnQoZG9jLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LnByaW9yaXR5LCAxMClcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQcmlvcml0eSA9IHBhcnNlSW50KGJlc3RNYXRjaERvY3VtZW50cy5nZXQoZG9jQ29DSUQpPy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5wcmlvcml0eSA/PyBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUilcbiAgICAgICAgY29uc3QgcHJlZmVyUHJpb3JpdHkgPSAoIWN1cnJlbnRFeGlzdHMgfHwgZG9jUHJpb3JpdHkgPT09IGV4aXN0aW5nUHJpb3JpdHkgfHwgZG9jUHJpb3JpdHkgPiBleGlzdGluZ1ByaW9yaXR5KVxuICAgICAgICAvLyBjb25zb2xlLmxvZygncHJlZmVyUHJpb3JpdHknLCAnPicsIGRvY1ByaW9yaXR5LCAnPCA+JywgZXhpc3RpbmdQcmlvcml0eSwgJzwnLCBwcmVmZXJQcmlvcml0eSlcbiAgICAgICAgaWYgKHByZWZlckxhbmcgJiYgcHJlZmVyV29ybGQgJiYgcHJlZmVyUHJpb3JpdHkpIHtcbiAgICAgICAgICBiZXN0TWF0Y2hEb2N1bWVudHMuc2V0KGRvY0NvQ0lELCBkb2MpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gWy4uLmJlc3RNYXRjaERvY3VtZW50cy52YWx1ZXMoKV1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgYW4gYXJyYXkgb2YgZG9jdW1lbnRzLCByZXR1cm5zIGZpbHRlciBvdXQgZW4gZG9jdW1lbnRzIGlmIGEgdHJhbnNsYXRlZCBvbmUgZXhpc3RzIG1hdGNoaW5nIHRoZSBzYW1lIGVyYXNcbiAgICogQHBhcmFtIGRvY3VtZW50c1xuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHJldHVybnNcbiAgICovXG4gIHN0YXRpYyBmaWx0ZXJBbGxDb0NJRCAoZG9jdW1lbnRzLCBsYW5nRmFsbGJhY2spIHtcbiAgICBpZiAoIWxhbmdGYWxsYmFjaykge1xuICAgICAgcmV0dXJuIGRvY3VtZW50c1xuICAgIH1cbiAgICBjb25zdCBiZXN0TWF0Y2hEb2N1bWVudHMgPSBuZXcgTWFwKClcblxuICAgIGZvciAoY29uc3QgZG9jIG9mIGRvY3VtZW50cykge1xuICAgICAgY29uc3QgZG9jQ29DSUQgPSBkb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8uaWRcbiAgICAgIGNvbnN0IGRvY0VyYXMgPSBPYmplY3QuZW50cmllcyhkb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8uZXJhcyA/PyB7fSkuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4gZVswXSkuam9pbignLycpXG4gICAgICBpZiAoZG9jQ29DSUQpIHtcbiAgICAgICAgY29uc3QgY3VycmVudEV4aXN0cyA9IGJlc3RNYXRjaERvY3VtZW50cy5nZXQoZG9jQ29DSUQpPy5pZFxuICAgICAgICBjb25zdCBkb2NMYW5nID0gZG9jLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LmxhbmcgPz8gJ2VuJ1xuICAgICAgICBjb25zdCBleGlzdGluZ0xhbmcgPSBiZXN0TWF0Y2hEb2N1bWVudHMuZ2V0KGRvY0NvQ0lEKT8uZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ubGFuZyA/PyAnZW4nXG4gICAgICAgIGNvbnN0IHByZWZlckxhbmcgPSAoIWN1cnJlbnRFeGlzdHMgfHwgZXhpc3RpbmdMYW5nID09PSAnZW4nIHx8IGV4aXN0aW5nTGFuZyA9PT0gZG9jTGFuZylcbiAgICAgICAgaWYgKHByZWZlckxhbmcpIHtcbiAgICAgICAgICBiZXN0TWF0Y2hEb2N1bWVudHMuc2V0KGRvY0NvQ0lEICsgJy8nICsgZG9jRXJhcywgZG9jKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFsuLi5iZXN0TWF0Y2hEb2N1bWVudHMudmFsdWVzKCldXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBhbGwgZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBDb0NJRCByZWdleCwgbGFuZ3VhZ2UsIGFuZCBlcmEgZnJvbSB0aGUgd29ybGQuXG4gICAqIFRoZSBkb2N1bWVudCBsaXN0IGlzIHNvcnRlZCB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IGZpcnN0LlxuICAgKiBAcGFyYW0gY29jaWRSZWdFeHAgcmVnZXggdXNlZCBvbiB0aGUgQ29DSURcbiAgICogQHBhcmFtIHR5cGUgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHdhbnRlZCBDb0NJRCwgZm9yIGV4YW1wbGUgJ2knLCAnYScsICdqZSdcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHByb2dyZXNzQmFyIElmIGdyZWF0ZXIgdGhhbiB6ZXJvIHNob3cgcGVyY2VudGFnZVxuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRvY3VtZW50c0Zyb21Xb3JsZCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgcHJvZ3Jlc3NCYXIgPSAwIH0gPSB7fSkge1xuICAgIGlmICghY29jaWRSZWdFeHApIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBpZiAobGFuZyA9PT0gJycpIHtcbiAgICAgIGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIH1cbiAgICBpZiAoZXJhID09PSB0cnVlKSB7XG4gICAgICBlcmEgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpXG4gICAgfVxuXG4gICAgaWYgKHByb2dyZXNzQmFyID4gMCkge1xuICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IE1hdGguZmxvb3IoMTAwIC8gcHJvZ3Jlc3NCYXIpIH0pXG4gICAgfVxuXG4gICAgY29uc3QgZ2FtZVByb3BlcnR5ID0gQ29DSUQuZ2V0R2FtZVByb3BlcnR5KGAke3R5cGV9Li5gKVxuXG4gICAgY29uc3QgY2FuZGlkYXRlRG9jdW1lbnRzID0gZ2FtZVtnYW1lUHJvcGVydHldPy5maWx0ZXIoKGQpID0+IHtcbiAgICAgIGNvbnN0IGNvY2lkRmxhZyA9IGQuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKVxuICAgICAgaWYgKHR5cGVvZiBjb2NpZEZsYWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgY29uc3QgZXJhcyA9IChjb2NpZEZsYWcuZXJhcyA/PyBbXSlcbiAgICAgIGNvbnN0IG1hdGNoaW5nRXJhcyA9IChlcmEgPT09IGZhbHNlIHx8IE9iamVjdC5lbnRyaWVzKGVyYXMpLmxlbmd0aCA9PT0gMCB8fCAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGVyYXMsIGVyYSkgJiYgZXJhc1tlcmFdKSlcbiAgICAgIHJldHVybiBjb2NpZFJlZ0V4cC50ZXN0KGNvY2lkRmxhZy5pZCkgJiYgW2xhbmcsIChsYW5nRmFsbGJhY2sgPyAnZW4nIDogJy0nKV0uaW5jbHVkZXMoY29jaWRGbGFnLmxhbmcpICYmIG1hdGNoaW5nRXJhc1xuICAgIH0pXG5cbiAgICBpZiAoY2FuZGlkYXRlRG9jdW1lbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIHJldHVybiBjYW5kaWRhdGVEb2N1bWVudHMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGxpc3Qgb2YgYWxsIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgQ29DSUQgcmVnZXgsIGxhbmd1YWdlLCBhbmQgZXJhIGZyb20gdGhlIGNvbXBlbmRpdW1zLlxuICAgKiBUaGUgZG9jdW1lbnQgbGlzdCBpcyBzb3J0ZWQgd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBmaXJzdC5cbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKCdlbicsICdlcycsIC4uLilcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBwcm9ncmVzc0JhciBJZiBncmVhdGVyIHRoYW4gemVybyBzaG93IHBlcmNlbnRhZ2VcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBkb2N1bWVudHNGcm9tQ29tcGVuZGlhICh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IGZhbHNlLCBsYW5nRmFsbGJhY2sgPSB0cnVlLCBwcm9ncmVzc0JhciA9IDAgfSkge1xuICAgIGlmICghY29jaWRSZWdFeHApIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBpZiAobGFuZyA9PT0gJycpIHtcbiAgICAgIGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIH1cbiAgICBpZiAoZXJhID09PSB0cnVlKSB7XG4gICAgICBlcmEgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpXG4gICAgfVxuICAgIGNvbnN0IGVyYVRleHQgPSBDb0NJRC5lcmFUZXh0KGVyYSlcblxuICAgIGNvbnN0IGRvY3VtZW50VHlwZSA9IENvQ0lELmdldERvY3VtZW50VHlwZSh0eXBlKS5zY2hlbWEubmFtZVxuICAgIGNvbnN0IGNhbmRpZGF0ZURvY3VtZW50cyA9IFtdXG5cbiAgICBsZXQgY291bnQgPSAxXG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChwcm9ncmVzc0JhciA+IDApIHtcbiAgICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IE1hdGguZmxvb3IoY291bnQgKiAxMDAgLyBwcm9ncmVzc0JhcikgfSlcbiAgICAgICAgY291bnQrK1xuICAgICAgfVxuICAgICAgaWYgKHBhY2suZG9jdW1lbnROYW1lID09PSBkb2N1bWVudFR5cGUpIHtcbiAgICAgICAgaWYgKCFwYWNrLmluZGV4ZWQpIHtcbiAgICAgICAgICBhd2FpdCBwYWNrLmdldEluZGV4KClcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpbmRleEluc3RhbmNlcyA9IHBhY2suaW5kZXguZmlsdGVyKChpKSA9PiB7XG4gICAgICAgICAgY29uc3QgY29jaWRGbGFnID0gaS5mbGFncz8uQ29DNz8uY29jaWRGbGFnXG4gICAgICAgICAgaWYgKHR5cGVvZiBjb2NpZEZsYWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXJhcyA9IChjb2NpZEZsYWcuZXJhcyA/PyBbXSlcbiAgICAgICAgICBjb25zdCBtYXRjaGluZ0VyYXMgPSAoZXJhID09PSBmYWxzZSB8fCBPYmplY3QuZW50cmllcyhlcmFzKS5sZW5ndGggPT09IDAgfHwgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlcmFzLCBlcmEpICYmIGVyYXNbZXJhXSkpXG4gICAgICAgICAgcmV0dXJuIGNvY2lkUmVnRXhwLnRlc3QoY29jaWRGbGFnLmlkKSAmJiBbbGFuZywgKGxhbmdGYWxsYmFjayA/ICdlbicgOiAnLScpXS5pbmNsdWRlcyhjb2NpZEZsYWcubGFuZykgJiYgbWF0Y2hpbmdFcmFzXG4gICAgICAgIH0pXG4gICAgICAgIGZvciAoY29uc3QgaW5kZXggb2YgaW5kZXhJbnN0YW5jZXMpIHtcbiAgICAgICAgICBjb25zdCBkb2N1bWVudCA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnQoaW5kZXguX2lkKVxuICAgICAgICAgIGlmICghZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLmRvY3VtZW50LW5vdC1mb3VuZCcsIHtcbiAgICAgICAgICAgICAgY29jaWQ6IGNvY2lkUmVnRXhwLFxuICAgICAgICAgICAgICBsYW5nLFxuICAgICAgICAgICAgICBlcmE6IGVyYVRleHRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKG1zZylcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb0M3IHwnLCBtc2csIGluZGV4KVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FuZGlkYXRlRG9jdW1lbnRzLnB1c2goZG9jdW1lbnQpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjYW5kaWRhdGVEb2N1bWVudHMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICB9XG5cbiAgLyoqXG4gICAqIFNvcnQgYSBsaXN0IG9mIGRvY3VtZW50IG9uIENvQ0lEIHByaW9yaXR5IC0gdGhlIGhpZ2hlc3QgZmlyc3QuXG4gICAqIEBleGFtcGxlXG4gICAqIGFMaXN0T2ZEb2N1bWVudHMuc29ydChDb0NJRC5jb21wYXJlQ29DSURQcmlvKVxuICAgKi9cbiAgc3RhdGljIGNvbXBhcmVDb0NJRFByaW8gKGEsIGIpIHtcbiAgICByZXR1cm4gKFxuICAgICAgYi5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5wcmlvcml0eSAtXG4gICAgICBhLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LnByaW9yaXR5XG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgdGhlIGZpcnN0IHBhcnQgb2YgYSBDb0NJRCB0byB3aGF0IHRob3NlIGRvY3VtZW50cyBhcmUgY2FsbGVkIGluIHRoZSBgZ2FtZWAgb2JqZWN0LlxuICAgKiBAcGFyYW0gY29jaWQgYSBzaW5nbGUgY29jaWRcbiAgICovXG4gIHN0YXRpYyBnZXRHYW1lUHJvcGVydHkgKGNvY2lkKSB7XG4gICAgY29uc3QgdHlwZSA9IGNvY2lkLnNwbGl0KCcuJylbMF1cbiAgICBjb25zdCBnYW1lUHJvcGVydHkgPSBDb0NJRC5nYW1lUHJvcGVydHlMb29rdXBbdHlwZV1cbiAgICBpZiAoIWdhbWVQcm9wZXJ0eSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLmluY29ycmVjdC50eXBlJykpXG4gICAgICBjb25zb2xlLmxvZygnQ29DNyB8ICcsIGNvY2lkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAgICB9XG4gICAgcmV0dXJuIGdhbWVQcm9wZXJ0eVxuICB9XG5cbiAgc3RhdGljIGdldCBnYW1lUHJvcGVydHlMb29rdXAgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhOiAnYWN0b3JzJyxcbiAgICAgIGM6ICdjYXJkcycsXG4gICAgICBpOiAnaXRlbXMnLFxuICAgICAgamU6ICdqb3VybmFsJyxcbiAgICAgIG06ICdtYWNyb3MnLFxuICAgICAgcDogJ3BsYXlsaXN0cycsXG4gICAgICBydDogJ3RhYmxlcycsXG4gICAgICBzOiAnc2NlbmVzJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIHRoZSBmaXJzdCBwYXJ0IG9mIGEgQ29DSUQgdG8gd2hhdCB0aG9zZSBkb2N1bWVudHMgYXJlIGNhbGxlZCBpbiB0aGUgYGdhbWVgIG9iamVjdC5cbiAgICogQHBhcmFtIGNvY2lkIGEgc2luZ2xlIGNvY2lkXG4gICAqL1xuICBzdGF0aWMgZ2V0RG9jdW1lbnRUeXBlIChjb2NpZCkge1xuICAgIGNvbnN0IHR5cGUgPSBjb2NpZC5zcGxpdCgnLicpWzBdXG4gICAgY29uc3QgZG9jdW1lbnRUeXBlID0gQ29DSUQuZG9jdW1lbnROYW1lTG9va3VwW3R5cGVdXG4gICAgaWYgKCFkb2N1bWVudFR5cGUpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci5pbmNvcnJlY3QudHlwZScpKVxuICAgICAgY29uc29sZS5sb2coJ0NvQzcgfCAnLCBjb2NpZClcbiAgICAgIHRocm93IG5ldyBFcnJvcigpXG4gICAgfVxuICAgIHJldHVybiBkb2N1bWVudFR5cGVcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZG9jdW1lbnROYW1lTG9va3VwICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYTogQWN0b3IsXG4gICAgICBjOiBDYXJkLFxuICAgICAgaTogSXRlbSxcbiAgICAgIGplOiBKb3VybmFsRW50cnksXG4gICAgICBtOiBNYWNybyxcbiAgICAgIHA6IFBsYXlsaXN0LFxuICAgICAgcnQ6IFJvbGxUYWJsZSxcbiAgICAgIHM6IFNjZW5lXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmltcG9ydCB7IGNvbmZpZ3VyZURvY3VtZW50cyB9IGZyb20gJy4uL3NjcmlwdHMvY29uZmlndXJlLWRvY3VtZW50cy5qcydcbmltcG9ydCB7IHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzIH0gZnJvbSAnLi4vc2NyaXB0cy9sb2FkLXRlbXBsYXRlcy5qcydcbmltcG9ydCB7IHJlZ2lzdGVyU2V0dGluZ3MgfSBmcm9tICcuLi9zY3JpcHRzL3JlZ2lzdGVyLXNldHRpbmdzLmpzJ1xuaW1wb3J0IHsgcmVnaXN0ZXJTaGVldHMgfSBmcm9tICcuLi9zY3JpcHRzL3JlZ2lzdGVyLXNoZWV0cy5qcydcbmltcG9ydCB7IGhhbmRsZWJhcnNIZWxwZXIgfSBmcm9tICcuLi9zY3JpcHRzL2hhbmRsZWJhcnMtaGVscGVyLmpzJ1xuaW1wb3J0IHsgY29tcGVuZGl1bUZpbHRlciB9IGZyb20gJy4uL3NjcmlwdHMvY29tcGVuZGl1bS1maWx0ZXIuanMnXG5pbXBvcnQgeyBDb0NJRCB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuLi9hcHBzL2NvYzctbGluay5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uY2UoJ2luaXQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uZmlndXJlRG9jdW1lbnRzKClcbiAgICBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcygpXG4gICAgcmVnaXN0ZXJTZXR0aW5ncygpXG4gICAgcmVnaXN0ZXJTaGVldHMoKVxuICAgIGhhbmRsZWJhcnNIZWxwZXIoKVxuICAgIGNvbXBlbmRpdW1GaWx0ZXIoKVxuICAgIENvQ0lELmluaXQoKVxuICAgIENvQzdMaW5rLmluaXQoKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRyAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Qm9vayB9IGZyb20gJy4uL2l0ZW1zL2Jvb2svZGF0YS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdTcGVsbCB9IGZyb20gJy4uL2l0ZW1zL3NwZWxsL2RhdGEuanMnXG5pbXBvcnQgeyBDb0M3Q2hhc2UgfSBmcm9tICcuLi9pdGVtcy9jaGFzZS9kYXRhLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENvQzdTa2lsbCB9IGZyb20gJy4uL2l0ZW1zL3NraWxsL2RhdGEuanMnXG5pbXBvcnQgeyBDb0M3VmVoaWNsZSB9IGZyb20gJy4uL2FjdG9ycy92ZWhpY2xlL2RhdGEuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBjb25maWd1cmVEb2N1bWVudHMgKCkge1xuICBDT05GSUcuQWN0aXZlRWZmZWN0LmRvY3VtZW50Q2xhc3MgPSBDb0M3QWN0aXZlRWZmZWN0XG4gIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzID0gQ29DQWN0b3JcbiAgQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3NlcyA9IHtcbiAgICB2ZWhpY2xlOiBDb0M3VmVoaWNsZVxuICB9XG4gIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPSBDb0M3SXRlbVxuICBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMgPSB7XG4gICAgYm9vazogQ29DN0Jvb2ssXG4gICAgc3BlbGw6IENvQzdTcGVsbCxcbiAgICBjaGFzZTogQ29DN0NoYXNlLFxuICAgIHNraWxsOiBDb0M3U2tpbGxcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGxvYWRUZW1wbGF0ZXMgKi9cblxuLyoqXG4gKiBEZWZpbmUgYSBzZXQgb2YgdGVtcGxhdGUgcGF0aHMgdG8gcHJlLWxvYWRcbiAqIFByZS1sb2FkZWQgdGVtcGxhdGVzIGFyZSBjb21waWxlZCBhbmQgY2FjaGVkIGZvciBmYXN0IGFjY2VzcyB3aGVuIHJlbmRlcmluZ1xuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuZXhwb3J0IGNvbnN0IHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICAvKiogRGVmaW5lIHRlbXBsYXRlIHBhdGhzIHRvIGxvYWQgKi9cbiAgY29uc3QgdGVtcGxhdGVQYXRocyA9IFtcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvbnBjLXNraWxscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvbnBjLWNvbWJhdC5odG1sJyxcblxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1pbnZlbnRvcnkuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWludmVudG9yeS1pdGVtcy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItYmFja2dyb3VuZC5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jb21tb24vYWN0aXZlLWVmZmVjdHMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItbXl0aG9zLWVub3VudGVycy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1rZWVwZXItbXl0aG9zLWVub3VudGVycy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1za2lsbHMtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2NoYXJhY3Rlci1kZXZlbG9wbWVudC12Mi5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvZGV2ZWxvcG1lbnQtY29udHJvbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL3ZpdGFscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvY29tYmF0Lmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9jaGFyYWN0ZXItc2hlZXQtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL2NoYXJhY3Rlci9zdW1tYXJ5Lmh0bWwnLFxuXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9kZXRhaWxzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL2RldGFpbHMuaHRtbCcsXG5cbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvaW50cm9kdWN0aW9uLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2NvbmZpZ3VyYXRpb24uaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2VsZWN0LXNldHVwLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NlbGVjdC1hcmNoZXR5cGUuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2VsZWN0LW9jY3VwYXRpb24uaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LWNoYXJhY3RlcmlzdGljcy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZXQtYXR0cmlidXRlcy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC92aWV3LWF0dHJpYnV0ZXMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LWludmVzdGlnYXRvci5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZXQtb2NjdXBhdGlvbi1za2lsbHMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvdG9nZ2xlLXNraWxsLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NldC1hcmNoZXR5cGUtc2tpbGxzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3BvaW50cy1za2lsbHMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvYmFja3N0b3J5LmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2NyZWF0ZS5oYnMnXG4gIF1cblxuICAvKiogTG9hZCB0aGUgdGVtcGxhdGUgcGFydHMgKi9cbiAgcmV0dXJuIGxvYWRUZW1wbGF0ZXModGVtcGxhdGVQYXRocylcbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIENPTlNULCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdEZWNhZGVyRGllIH0gZnJvbSAnLi4vYXBwcy9kZWNhZGVyLWRpZS5qcydcbmltcG9ydCB7IENvQzdEZWNhZGVyRGllT3RoZXIgfSBmcm9tICcuLi9hcHBzL2RlY2FkZXItZGllLW90aGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0dhbWVSdWxlU2V0dGluZ3MgfSBmcm9tICcuL2dhbWUtcnVsZXMuanMnXG5pbXBvcnQgeyBDb0M3RGlyZWN0b3J5UGlja2VyIH0gZnJvbSAnLi9jb2M3LWRpcmVjdG9yeS1waWNrZXIuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNldHRpbmdzICgpIHtcbiAgLyoqXG4gICAqIFJ1bGVzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyTWVudSgnQ29DNycsICdnYW1lUnVsZXMnLCB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUnVsZXMuTmFtZScsXG4gICAgbGFiZWw6ICdDb0M3LlNldHRpbmdzLlJ1bGVzLkxhYmVsJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5SdWxlcy5IaW50JyxcbiAgICBpY29uOiAnZmFzIGZhLWJvb2snLFxuICAgIHR5cGU6IENvQzdHYW1lUnVsZVNldHRpbmdzLFxuICAgIHJlc3RyaWN0ZWQ6IHRydWVcbiAgfSlcbiAgQ29DN0dhbWVSdWxlU2V0dGluZ3MucmVnaXN0ZXJTZXR0aW5ncygpXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd1c2VDb250ZXh0TWVudXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlVzZUNvbnRleHRNZW51cycsXG4gICAgaGludDogJ1NFVFRJTkdTLlVzZUNvbnRleHRNZW51c0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaG9sZVVwbG9hZERpcmVjdG9yeScsIHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5EaG9sZVVwbG9hZC5EaXJlY3RvcnkuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuRGhvbGVVcGxvYWQuRGlyZWN0b3J5LkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBDb0M3RGlyZWN0b3J5UGlja2VyLkRlZmF1bHREaXJlY3RvcnksXG4gICAgZGVmYXVsdDogJ1tkYXRhXSB3b3JsZHMvJyArIGdhbWUud29ybGQuaWQgKyAnL2Rob2xlLWltYWdlcydcbiAgfSlcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3dvcmxkRXJhJywge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLldvcmxkRXJhLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLldvcmxkRXJhLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnc3RhbmRhcmQnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiBDT0M3LmVyYXMsXG4gICAgb25DaGFuZ2U6ICgpID0+IHtcbiAgICAgIHVpLnBsYXllcnMucmVuZGVyKHRydWUpXG4gICAgfVxuICB9KVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZHJvcENvQ0lEJywge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICcnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICAnJzogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELlByb21wdCcsXG4gICAgICBZOiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuVXNlQ29DSUQnLFxuICAgICAgTjogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELklnbm9yZUNvQ0lEJ1xuICAgIH1cbiAgfSlcblxuICAvKipcbiAgICogSW5pdGlhdGl2ZVxuICAgKi9cbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5SW5pdERpY2VzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdERpY2VzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuZGlzcGxheUluaXREaWNlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFNldCBkaXNwbGF5aW5nIGRpY2VzIGZvciBpbml0IHJvbGwgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5SW5pdEFzVGV4dCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheUluaXRBc1RleHQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdEFzVGV4dEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogUm9sbCBjdXN0b21pc2Fpb25zXG4gICAqL1xuICAvKiogU3RhbmRieSByb2xscyBtYWRlIGJ5IEdNIGZyb20gcGxheWVyIHNoZWV0ICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU3RhbmJ5R01Sb2xscycsXG4gICAgaGludDogJ1NFVFRJTkdTLlN0YW5ieUdNUm9sbHNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBBbGxvdyB1c2FnZSBvZiBhIGZsYXQgZGljZSBtb2RpZmllciAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FsbG93RmxhdERpY2VNb2RpZmllcicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0RGljZU1vZGlmaWVyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuQWxsb3dGbGF0RGljZU1vZGlmaWVySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIEFsbG93IHVzYWdlIG9mIGEgZmxhdCB0aHJlc2hvbGQgbW9kaWZpZXIgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5BbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGVmYXVsdERpZmZpY3VsdHknLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EZWZhdWx0RGlmZmljdWx0eUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAncmVndWxhcicsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIHJlZ3VsYXI6ICdTRVRUSU5HUy5DaGVja0RpZmZpY3VsdHlSZWd1bGFyJyxcbiAgICAgIHVua25vd246ICdTRVRUSU5HUy5DaGVja0RpZmZpY3VsdHlVbmtub3duJ1xuICAgIH1cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzZWxmUm9sbFdoaXNwZXJUYXJnZXQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNlbGZSb2xsV2hpc3BlclRhcmdldCcsXG4gICAgaGludDogJ1NFVFRJTkdTLlNlbGZSb2xsV2hpc3BlclRhcmdldEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnZXZlcnlvbmUnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBub2JvZHk6ICdTRVRUSU5HUy5Eb05vdEFkdmlzZScsXG4gICAgICBvd25lcnM6ICdTRVRUSU5HUy5BZHZpc2VPd25lcnNPbmx5JyxcbiAgICAgIGV2ZXJ5b25lOiAnU0VUVElOR1MuQWR2aXNlQWxsUGxheWVyJ1xuICAgIH1cbiAgfSlcblxuICAvKipcbiAgICogQ2hhdCBDYXJkc1xuICAgKi9cbiAgLyoqIFRydXN0ZWQgcGxheWVycyB3aWxsIGJlIGFsbG93ZWQgdG8gbW9kaWZ5IGNoYXQgY2FyZHMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuVHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5UcnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBUcnVzdGVkIHBsYXllcnMgd2lsbCBiZSBhbGxvd2VkIHRvIHNlZSBjaGF0IGNhcmRzIHByaXZhdGUgc2VjdGlvbnMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0cnVzdGVkQ2FuU2VlQ2hhdENhcmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlRydXN0ZWRDYW5TZWVDaGF0Q2FyZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLlRydXN0ZWRDYW5TZWVDaGF0Q2FyZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBTZXQgdGhlIG5lZWQgdG8gZGlzcGxheSBhY3RvciBpbWFnZSBvbiBjaGF0IGNhcmRzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5QWN0b3JPbkNhcmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNwbGF5QWN0b3JPbkNhcmRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsJyxcbiAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlSZXN1bHRUeXBlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5UmVzdWx0VHlwZScsXG4gICAgc2NvcGU6ICdjbGllbnQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBTZXQgdGhlIHVzZSBvZiB0b2tlbiBpbnN0ZWFkIG9mIHBvcnRyYWl0cyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3VzZVRva2VuJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Vc2VUb2tlbicsXG4gICAgaGludDogJ1NFVFRJTkdTLlVzZVRva2VuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogU2NlbmUgU2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkVuYWJsZVN0YXR1c0ljb25zJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRW5hYmxlU3RhdHVzSWNvbnNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZ3JpZFNwYWNlcycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuUmVzdHJpY3RHcmlkU3BhY2VzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuUmVzdHJpY3RHcmlkU3BhY2VzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXN0YW5jZUVsZXZhdGlvbicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQ2hlY2tFbGV2YXRpb24nLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5DaGVja0VsZXZhdGlvbkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogR2FtZSBBcnR3b3JrIFNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ292ZXJyaWRlR2FtZUFydHdvcmsnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLk92ZXJyaWRlR2FtZUFydHdvcmsnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PdmVycmlkZUdhbWVBcnR3b3JrSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlR2FtZUFydHdvcmsnKSkge1xuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRQYXVzZUltYWdlJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRQYXVzZUltYWdlSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3RpbWUtdHJhcC5zdmcnLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFBhdXNlVGV4dCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRQYXVzZVRleHQnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFBhdXNlVGV4dEhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnVGhlIEJsaW5kIElkaW90IEdvZCBpcyBkcmVhbWluZy4uLicsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFNoZWV0IHNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlQbGF5ZXJOYW1lT25TaGVldCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheVBsYXllck5hbWVPblNoZWV0JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Rvb2xUaXBEZWxheScsIHtcbiAgICBuYW1lOiAnQ29DNy50b29sVGlwRGVsYXknLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAyMDAwLFxuICAgIHR5cGU6IE51bWJlclxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dJY29uc09ubHknLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLnNob3dJY29uc09ubHknLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBBbGxvdyBwbGF5ZXIgdG8gdW5sb2NrIHRoZSBzaGVldCBvdXRzaWRlIG9mIGNyZWF0aW9uIG1vZGUgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlBsYXllclVubG9ja1NoZWV0TW9kZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdhbHdheXMnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBhbHdheXM6ICdTRVRUSU5HUy5BbHdheXNFZGl0YWJsZScsXG4gICAgICBjcmVhdGlvbjogJ1NFVFRJTkdTLkNyZWF0aW9uTW9kZU9ubHknLFxuICAgICAgbmV2ZXI6ICdTRVRUSU5HUy5OZXZlckVkaXRhYmxlJ1xuICAgIH1cbiAgfSlcbiAgLyoqIEFsbG93IHBsYXllciB0byBtb2RpZnkgc3RhdHVzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3RhdHVzUGxheWVyRWRpdGFibGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlN0YXR1c1BsYXllckVkaXRhYmxlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuU3RhdHVzUGxheWVyRWRpdGFibGVIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLk9uZUJsb2NrQmFja1N0b3J5JyxcbiAgICBoaW50OiAnU0VUVElOR1MuT25lQmxvY2tCYWNrU3RvcnlIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PdmVycmlkZVNoZWV0QXJ0d29yaycsXG4gICAgaGludDogJ1NFVFRJTkdTLk92ZXJyaWRlU2hlZXRBcnR3b3JrSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJykpIHtcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZEhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiBcInVybCgnLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmQud2VicCcpIDQgcmVwZWF0XCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnc2xpY2UnLFxuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgY2hvaWNlczoge1xuICAgICAgICBzbGljZTogJ1NFVFRJTkdTLkJhY2tncm91bmRTbGljZScsXG4gICAgICAgIGF1dG86ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQXV0bycsXG4gICAgICAgIGNvbnRhaW46ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQ29udGFpbicsXG4gICAgICAgIGNvdmVyOiAnU0VUVElOR1MuQmFja2dyb3VuZENvdmVyJ1xuICAgICAgfVxuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmRIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZC53ZWJwJylcIixcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrU2hlZXRJbWFnZScsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya1NoZWV0SW1hZ2VIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoJy4vYXNzZXRzL2ltYWdlcy90ZW50YWNsZXMud2VicCcpXCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0Zyb250Q29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtGcm9udENvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDQzLDU1LDgzLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtCYWNrZ3JvdW5kQ29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtCYWNrZ3JvdW5kQ29sb3JIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3JnYmEoMTAzLDExLDExLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0ludGVyYWN0aXZlQ29sb3JIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3JnYmEoMTAzLDExLDExLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGhIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgIHR5cGU6IEJvb2xlYW5cbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Jywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICcnLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udEJvbGQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya01haW5Gb250Qm9sZCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICcnLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udFNpemUnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya01haW5Gb250U2l6ZScsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IDE2LFxuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgb25DaGFuZ2U6IHNpemUgPT4gX3NldFJvb3RGb250U2l6ZShzaXplKVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBfc2V0Um9vdEZvbnRTaXplIChzaXplKSB7XG4gICAgICAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJywgc2l6ZSlcbiAgICAgIHVpLnNpZGViYXIucmVuZGVyKHRydWUpXG4gICAgICBmb3IgKGNvbnN0IFssIHddIG9mIE9iamVjdC5lbnRyaWVzKHVpLndpbmRvd3MpKSB7XG4gICAgICAgIHcucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdlYXBvbnNcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcmVnYXJkVXNlUGVyUm91bmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3JlZ2FyZFVzZVBlclJvdW5kJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGlzcmVnYXJkVXNlUGVyUm91bmRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3JlZ2FyZEFtbW8nLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3JlZ2FyZEFtbW8nLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNyZWdhcmRBbW1vSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogQ2hhc2VzXG4gICAqL1xuICAvLyBNT1ZFRCBUTyBDSEFTU0UgSU5ESVZJRFVBTCBTRVRUSU5HXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnY2hhc2VTaG93VG9rZW5Nb3ZlbWVudCcsIHtcbiAgLy8gICBuYW1lOiAnU0VUVElOR1MuQ2hhc2VTaG93VG9rZW5Nb3ZlbWVudCcsXG4gIC8vICAgaGludDogJ1NFVFRJTkdTLkNoYXNlU2hvd1Rva2VuTW92ZW1lbnRIaW50JyxcbiAgLy8gICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gICBjb25maWc6IHRydWUsXG4gIC8vICAgZGVmYXVsdDogdHJ1ZSxcbiAgLy8gICB0eXBlOiBCb29sZWFuXG4gIC8vIH0pXG5cbiAgLyoqXG4gICAqIERpY2UgU28gTmljZVxuICAgKi9cbiAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N5bmNEaWNlM2QnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuU3luY0RpY2UzRCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuU3luY0RpY2UzREhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiB0cnVlLFxuICAgICAgdHlwZTogQm9vbGVhblxuICAgIH0pXG4gICAgY29uc3QgW3ZlcnNpb25dID0gZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LnZlcnNpb24uc3BsaXQoJy4nKVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHZlcnNpb24pKSAmJiBOdW1iZXIodmVyc2lvbikgPj0gMykge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0ZW5EaWVCb251cycsIHtcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLlRlbkRpZUJvbnVzJyxcbiAgICAgICAgaGludDogJ1NFVFRJTkdTLlRlbkRpZUJvbnVzSGludCcsXG4gICAgICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnYnJvbnplJyxcbiAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICB9KVxuICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0ZW5EaWVQZW5hbHR5Jywge1xuICAgICAgICBuYW1lOiAnU0VUVElOR1MuVGVuRGllUGVuYWx0eScsXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5UZW5EaWVQZW5hbHR5SGludCcsXG4gICAgICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnYmxvb2Rtb29uJyxcbiAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXZlbG9wZXIgYW5kIGRlYnVnIHNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2RlYnVnbW9kZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGVidWdNb2RlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGVidWdNb2RlSGludCcsXG4gICAgc2NvcGU6ICdjbGllbnQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZXhwZXJpbWVudGFsRmVhdHVyZXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNob3dFeHBlcmltZW50YWxGZWF0dXJlcycsXG4gICAgaGludDogJ1NFVFRJTkdTLlNob3dFeHBlcmltZW50YWxGZWF0dXJlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIC8qKlxuICAgKiBPdGhlciBzZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdoaWRkZW5kZXZtZW51Jywge1xuICAgIG5hbWU6ICdIaWRkZW4gZGV2IG1lbnUnLFxuICAgIGhpbnQ6ICdVc2UgYXQgeW91ciBvd24gcmlzaycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJywge1xuICAgIG5hbWU6ICdEZXYgcGhhc2VkIGFsbG93ZWQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICAvKiogRmVhdDogd2VsY29tZSBtZXNzYWdlICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2hvd1dlbGNvbWVNZXNzYWdlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5zaG93V2VsY29tZU1lc3NhZ2UnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5zaG93V2VsY29tZU1lc3NhZ2UnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcsIHtcbiAgICBuYW1lOiAnQ2hhciBjcmVhdGlvbiBhbGxvd2VkJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywge1xuICAgIG5hbWU6ICdTeXN0ZW0gdXBkYXRlIHZlcnNpb24nLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICcwJ1xuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywge1xuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDoge31cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd4cEVuYWJsZWQnLCB7XG4gICAgbmFtZTogJ0VuYWJsZSBYUCBnYWluJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogdHJ1ZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dJbnN0cnVjdGlvbnMnLCB7XG4gICAgbmFtZTogJ1Nob3cgY2hhbmdlbG9nL2luc3RydWN0aW9ucycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJzAnXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnLCB7XG4gICAgbmFtZTogJ0ZvcmNlIHNwZWNpZmljIHNldHVwIENvQyBJRCBmb3IgSW52ZXN0aWdhdG9yIFdpemFyZCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJydcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScsIHtcbiAgICBuYW1lOiAnTnVtYmVyIG9mIGludmVzdGlnYXRvcnMgYSBzaW5nbGUgdXNlciB3aXRob3V0IGNyZWF0ZSBhY3RvciByaWdodHMgY2FuIG93bicsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMFxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZE93bmVyc2hpcCcsIHtcbiAgICBuYW1lOiAnRGVmYXVsdCBwZXJtaXNzaW9ucyBmb3Igbm9uIG93bmVyIHBsYXllcnMnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogTnVtYmVyLFxuICAgIGRlZmF1bHQ6IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTk9ORVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFJlcm9sbHMnLCB7XG4gICAgbmFtZTogJ0FsbG93IHBsYXllcnMgdG8gcmVyb2xsIGNoYXJhY3RlcmlzdGljcycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUG9pbnRCdXknLCB7XG4gICAgbmFtZTogJ0ZvcmNlIHBvaW50IGJ1eSBpbnN0ZWFkIG9mIHNldHVwIGNob2ljZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVpY2tGaXJlJywge1xuICAgIG5hbWU6ICdRdWljayBmaXJlIHNldHVwIHZhbHVlcycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBBcnJheSxcbiAgICBkZWZhdWx0OiBbXVxuICB9KVxuICAvKiogU2V0IGFuIGluaXRpYXRpdmUgZm9ybXVsYSBmb3IgdGhlIHN5c3RlbSAqL1xuICBDT05GSUcuQ29tYmF0LmluaXRpYXRpdmUgPSB7XG4gICAgZm9ybXVsYTogJ0BjaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlJyxcbiAgICBkZWNpbWFsczogNFxuICB9XG4gIENPTkZJRy5kZWJ1Zy5ob29rcyA9ICEhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVidWdtb2RlJylcbiAgQ09ORklHLkRpY2UudGVybXMudCA9IENvQzdEZWNhZGVyRGllXG4gIENPTkZJRy5EaWNlLnRlcm1zLm8gPSBDb0M3RGVjYWRlckRpZU90aGVyXG59XG4iLCIvKiBnbG9iYWwgQWN0b3JzLCBBY3RvclNoZWV0LCBJdGVtcywgSXRlbVNoZWV0LCBKb3VybmFsLCBKb3VybmFsU2hlZXQsIE1hY3JvQ29uZmlnLCBNYWNyb3MsIFBsYXlsaXN0Q29uZmlnLCBQbGF5bGlzdHMsIFJvbGxUYWJsZXMsIFJvbGxUYWJsZUNvbmZpZywgU2NlbmVzLCBTY2VuZUNvbmZpZyAqL1xuaW1wb3J0IHsgQ29DN0FyY2hldHlwZVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2FyY2hldHlwZS5qcydcbmltcG9ydCB7IENvQzdCb29rU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9ib29rL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXJhY3RlclNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMnXG5pbXBvcnQgeyBDb0M3Q29udGFpbmVyU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NvbnRhaW5lci5qcydcbmltcG9ydCB7IENvQzdDaGFzZVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvY2hhc2Uvc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY3JlYXR1cmUtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0VjIgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvaXRlbS1zaGVldFYyLmpzJ1xuaW1wb3J0IHsgQ29DN0pvdXJuYWxTaGVldCB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LWpvdXJuYWwtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3TWFjcm9Db25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1tYWNyby1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3TlBDU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL25wYy1zaGVldC5qcydcbmltcG9ydCB7IENvQzdPY2N1cGF0aW9uU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvb2NjdXBhdGlvbi5qcydcbmltcG9ydCB7IENvQzdQbGF5bGlzdENvbmZpZyB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LXBsYXlsaXN0LWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdSb2xsVGFibGVDb25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1yb2xsLXRhYmxlLWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdTY2VuZUNvbmZpZyB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LXNjZW5lLWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdTZXR1cFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3NldHVwLmpzJ1xuaW1wb3J0IHsgQ29DN1NraWxsU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvc2tpbGwuanMnXG5pbXBvcnQgeyBDb0M3U3BlbGxTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NwZWxsL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN1N0YXR1c1NoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3N0YXR1cy5qcydcbmltcG9ydCB7IENvQzdUYWxlbnRTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy90YWxlbnQuanMnXG5pbXBvcnQgeyBDb0M3VmVoaWNsZVNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy92ZWhpY2xlLmpzJ1xuaW1wb3J0IHsgQ29DN1dlYXBvblNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3dlYXBvbi1zaGVldC5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2hlZXRzICgpIHtcbiAgQWN0b3JzLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEFjdG9yU2hlZXQpXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN05QQ1NoZWV0LCB7XG4gICAgdHlwZXM6IFsnbnBjJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3VmVoaWNsZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsndmVoaWNsZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NyZWF0dXJlU2hlZXQsIHtcbiAgICB0eXBlczogWydjcmVhdHVyZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NvbnRhaW5lclNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY29udGFpbmVyJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q2hhcmFjdGVyU2hlZXQsIHtcbiAgICB0eXBlczogWydjaGFyYWN0ZXInXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIEl0ZW1zLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEl0ZW1TaGVldClcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTa2lsbFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc2tpbGwnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1dlYXBvblNoZWV0LCB7XG4gICAgdHlwZXM6IFsnd2VhcG9uJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdCb29rU2hlZXQsIHtcbiAgICB0eXBlczogWydib29rJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTcGVsbFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc3BlbGwnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1RhbGVudFNoZWV0LCB7XG4gICAgdHlwZXM6IFsndGFsZW50J10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTdGF0dXNTaGVldCwge1xuICAgIHR5cGVzOiBbJ3N0YXR1cyddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3T2NjdXBhdGlvblNoZWV0LCB7XG4gICAgdHlwZXM6IFsnb2NjdXBhdGlvbiddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3QXJjaGV0eXBlU2hlZXQsIHtcbiAgICB0eXBlczogWydhcmNoZXR5cGUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NldHVwU2hlZXQsIHtcbiAgICB0eXBlczogWydzZXR1cCddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q2hhc2VTaGVldCwge1xuICAgIHR5cGVzOiBbJ2NoYXNlJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdJdGVtU2hlZXQsIHsgdHlwZXM6IFsnaXRlbSddIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3SXRlbVNoZWV0VjIsIHtcbiAgICB0eXBlczogWydpdGVtJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBTY2VuZXMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgU2NlbmVDb25maWcpXG4gIFNjZW5lcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NjZW5lQ29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBKb3VybmFsLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEpvdXJuYWxTaGVldClcbiAgSm91cm5hbC5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0pvdXJuYWxTaGVldCwge1xuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG5cbiAgUm9sbFRhYmxlcy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBSb2xsVGFibGVDb25maWcpXG4gIFJvbGxUYWJsZXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdSb2xsVGFibGVDb25maWcsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIE1hY3Jvcy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBNYWNyb0NvbmZpZylcbiAgTWFjcm9zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3TWFjcm9Db25maWcsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIFBsYXlsaXN0cy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBQbGF5bGlzdENvbmZpZylcbiAgUGxheWxpc3RzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3UGxheWxpc3RDb25maWcsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhhbmRsZWJhcnMgKi9cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcblxuZXhwb3J0IGNvbnN0IGhhbmRsZWJhcnNIZWxwZXIgPSBmdW5jdGlvbiAoKSB7XG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3JvbGxBY3RvckltZycsIGZ1bmN0aW9uIChhY3RvcktleSkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KGFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdEZWNhZGVyRFNORmFjZXMge1xuICBjb25zdHJ1dG9yICgpIHtcbiAgICB0aGlzLnNlbGVjdGVkID0gJydcbiAgfVxuXG4gIHNldEZhY2VzICgpIHtcbiAgICBsZXQgc2VsZWN0ZWQgPSBnYW1lLnVzZXIuZ2V0RmxhZygnZGljZS1zby1uaWNlJywgJ2FwcGVhcmFuY2UnKT8uZ2xvYmFsXG4gICAgICAuc3lzdGVtXG4gICAgaWYgKHNlbGVjdGVkICE9PSB0aGlzLnNlbGVjdGVkKSB7XG4gICAgICBsZXQgZGF0YVxuICAgICAgbGV0IGRlc3RpbmF0aW9uXG4gICAgICBsZXQgc291cmNlRGllID0gZ2FtZS5kaWNlM2QuRGljZUZhY3Rvcnkuc3lzdGVtc1tzZWxlY3RlZF0/LmRpY2UuZmluZChcbiAgICAgICAgZCA9PiBkLnR5cGUgPT09ICdkMTAwJ1xuICAgICAgKVxuICAgICAgaWYgKHR5cGVvZiBzb3VyY2VEaWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHNvdXJjZURpZSA9IGdhbWUuZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXMuc3RhbmRhcmQuZGljZS5maW5kKFxuICAgICAgICAgIGQgPT4gZC50eXBlID09PSAnZDEwMCdcbiAgICAgICAgKVxuICAgICAgICBzZWxlY3RlZCA9ICdzdGFuZGFyZCdcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2Ygc291cmNlRGllICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBkZXN0aW5hdGlvbiA9IGdhbWUuZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXMuc3RhbmRhcmQuZGljZS5maW5kSW5kZXgoXG4gICAgICAgICAgZCA9PiBkLnR5cGUgPT09ICdkdCdcbiAgICAgICAgKVxuICAgICAgICBkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgc291cmNlRGllKVxuICAgICAgICBkYXRhLnR5cGUgPSAnZHQnXG4gICAgICAgIGdhbWUuZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXMuc3RhbmRhcmQuZGljZVtkZXN0aW5hdGlvbl0gPVxuICAgICAgICAgIE9iamVjdC5hc3NpZ24oc291cmNlRGllLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgZGF0YSlcbiAgICAgIH1cbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3RlZFxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUgKi9cbmV4cG9ydCBjbGFzcyBDb0M3VG9vbHRpcHMge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5Ub29sVGlwSG92ZXIgPSBudWxsXG4gICAgdGhpcy50b29sVGlwVGltZXIgPSBudWxsXG4gIH1cblxuICBkaXNwbGF5VG9vbFRpcCAodG9vbFRpcCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBib3VuZHMgPSB0aGlzLlRvb2xUaXBIb3Zlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgICAgaWYgKCFpc05hTihib3VuZHMubGVmdCB8fCAnJykgJiYgIWlzTmFOKGJvdW5kcy50b3AgfHwgJycpKSB7XG4gICAgICAgIGxldCBsZWZ0ID0gYm91bmRzLmxlZnRcbiAgICAgICAgbGV0IHRvcCA9IGJvdW5kcy50b3BcbiAgICAgICAgY29uc3QgaGVpZ2h0VGV4dCA9ICQodGhpcy5Ub29sVGlwSG92ZXIpLm91dGVySGVpZ2h0KClcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD1cImhlbHAtdG9vbHRpcFwiPicgKyB0b29sVGlwICsgJzwvZGl2PicpXG4gICAgICAgIGNvbnN0IHRpcCA9ICQoJyNoZWxwLXRvb2x0aXAnKVxuICAgICAgICBjb25zdCBoZWlnaHRUaXAgPSB0aXAub3V0ZXJIZWlnaHQoKVxuICAgICAgICBjb25zdCB3aWR0aFRpcCA9IHRpcC5vdXRlcldpZHRoKClcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lckhlaWdodCA8IGhlaWdodFRleHQgKiAxLjUgKyBoZWlnaHRUaXAgKyB0b3ApIHtcbiAgICAgICAgICB0b3AgPSB0b3AgLSBoZWlnaHRUaXBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b3AgPSB0b3AgKyBoZWlnaHRUZXh0ICogMS41XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgd2lkdGhUaXAgKyBsZWZ0KSB7XG4gICAgICAgICAgbGVmdCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gd2lkdGhUaXBcbiAgICAgICAgfVxuICAgICAgICB0aXAuY3NzKHtcbiAgICAgICAgICBsZWZ0OiBsZWZ0ICsgJ3B4JyxcbiAgICAgICAgICB0b3A6IHRvcCArICdweCdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0b29sVGlwTGVhdmUgKGV2ZW50KSB7XG4gICAgaWYgKGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9PT0gZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lcilcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IG51bGxcbiAgICAgICQoJyNoZWxwLXRvb2x0aXAnKS5yZW1vdmUoKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIE11dGF0aW9uT2JzZXJ2ZXIsIFRvdXIsIHVpICovXG5sZXQgQ29DN1RvdXIgPSBjbGFzcyBpbnRlcm5hbENvQzdUb3VyIHt9XG5pZiAodHlwZW9mIFRvdXIgIT09ICd1bmRlZmluZWQnKSB7XG4gIENvQzdUb3VyID0gY2xhc3MgaW50ZXJuYWxDb0M3VG91ciBleHRlbmRzIFRvdXIge1xuICAgIGFzeW5jIHdhaXRGb3JFbGVtZW50IChzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMsIG9ic2VydmVyKSA9PiB7XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikuZm9yRWFjaCgoZWwpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSlcblxuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBhc3luYyBfcHJlU3RlcCAoKSB7XG4gICAgICBhd2FpdCBzdXBlci5fcHJlU3RlcCgpXG5cbiAgICAgIC8vIENsb3NlIGN1cnJlbnRseSBvcGVuIGFwcGxpY2F0aW9uc1xuICAgICAgaWYgKHRoaXMuc3RlcEluZGV4ID09PSAwKSB7XG4gICAgICAgIGZvciAoY29uc3QgYXBwIG9mIE9iamVjdC52YWx1ZXModWkud2luZG93cykpIHtcbiAgICAgICAgICBhcHAuY2xvc2UoKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHRoaXMud2FpdEZvckVsZW1lbnQodGhpcy5jdXJyZW50U3RlcC5zZWxlY3RvcilcbiAgICB9XG5cbiAgICBhc3luYyBfcG9zdFN0ZXAgKCkge1xuICAgICAgYXdhaXQgc3VwZXIuX3Bvc3RTdGVwKClcbiAgICAgIGlmICh0aGlzLnN0ZXBJbmRleCA8IDAgfHwgIXRoaXMuaGFzTmV4dCkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmN1cnJlbnRTdGVwLmFjdGlvbikge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuaXNSZXNldHRpbmcpIHtcbiAgICAgICAgdGhpcy5pc1Jlc2V0dGluZyA9IGZhbHNlXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKHRoaXMuY3VycmVudFN0ZXAuYWN0aW9uKSB7XG4gICAgICAgIGNhc2UgJ2NsaWNrJzpcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3IpLmNsaWNrKClcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHJlc2V0ICgpIHtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyAhPT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgdGhpcy5pc1Jlc2V0dGluZyA9IHRydWVcbiAgICAgIH1cbiAgICAgIGF3YWl0IHN1cGVyLnJlc2V0KClcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgQ29DN1RvdXIgfVxuIiwiLyogZ2xvYmFsIG1lcmdlT2JqZWN0ICovXG5pbXBvcnQgeyBDb0M3VG91ciB9IGZyb20gJy4uL2FwcHMvY29jNy10b3VyLmpzJ1xuXG5leHBvcnQgY2xhc3MgRW5hYmxlVmFyaWFudFJ1bGVzRW4gZXh0ZW5kcyBDb0M3VG91ciB7XG4gIGNvbnN0cnVjdG9yIChjb25maWcpIHtcbiAgICBzdXBlcihtZXJnZU9iamVjdCh7XG4gICAgICB0aXRsZTogJ0VuYWJsZSBvcHRpb25hbC92YXJpYW50IHJ1bGVzLicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0xlYXJuIGhvdyB0byBlbmFibGUgUHVscCBDdGh1bGh1IHJ1bGVzLCBvciBvdGhlciB2YXJpYW50IHJ1bGVzJyxcbiAgICAgIGNhbkJlUmVzdW1lZDogZmFsc2UsXG4gICAgICBkaXNwbGF5OiB0cnVlLFxuICAgICAgc3RlcHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ290by1zZXR0aW5ncycsXG4gICAgICAgICAgc2VsZWN0b3I6ICdbZGF0YS10YWI9XCJzZXR0aW5nc1wiXScsXG4gICAgICAgICAgdGl0bGU6ICdDT0M3LlRvdXIuR290b1NldHRpbmdzVGl0bGUnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdDT0M3LlRvdXIuR290b1NldHRpbmdzQ29udGVudCcsXG4gICAgICAgICAgYWN0aW9uOiAnY2xpY2snXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2dvdG8tY29uZmlndXJlJyxcbiAgICAgICAgICBzZWxlY3RvcjogJ1tkYXRhLWFjdGlvbj1cImNvbmZpZ3VyZVwiXScsXG4gICAgICAgICAgdGl0bGU6ICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZVRpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVDb250ZW50JyxcbiAgICAgICAgICBhY3Rpb246ICdjbGljaydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ290by1zeXN0ZW0tc2V0dGluZ3MnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtY2F0ZWdvcnk9XCJzeXN0ZW1cIl0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc1RpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc0NvbnRlbnQnLFxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdnb3RvLWdhbWUtcnVsZXMnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtY2F0ZWdvcnk9XCJzeXN0ZW1cIl0gW2RhdGEta2V5PVwiQ29DNy5nYW1lUnVsZXNcIl0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzQ29udGVudCcsXG4gICAgICAgICAgYWN0aW9uOiAnY2xpY2snXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3NhdmUtZ2FtZS1ydWxlcycsXG4gICAgICAgICAgc2VsZWN0b3I6ICcjcnVsZXMtc2V0dGluZ3MgW25hbWU9c3VibWl0XScsXG4gICAgICAgICAgdGl0bGU6ICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc1RpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNDb250ZW50J1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgbG9jYWxpemF0aW9uOiB7XG4gICAgICAgICdDT0M3LlRvdXIuR290b1NldHRpbmdzVGl0bGUnOiAnR2FtZSBTZXR0aW5ncycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1NldHRpbmdzQ29udGVudCc6ICdHbyB0byB0aGUgR2FtZSBTZXR0aW5ncyB0YWInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVUaXRsZSc6ICdDb25maWd1cmUgU2V0dGluZ3MnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVDb250ZW50JzogJ0NsaWNrIG9uIHRoZSBDb25maWd1cmUgU2V0dGluZ3MgYnV0dG9uJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NUaXRsZSc6ICdTeXN0ZW0gU2V0dGluZ3MnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc0NvbnRlbnQnOiAnR28gdG8gdGhlIFN5c3RlbSBTZXR0aW5ncyB0YWInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNUaXRsZSc6ICdDb25maWd1cmUgVmFyaWFudC9PcHRpb25hbCBSdWxlcycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc0NvbnRlbnQnOiAnQ2xpY2sgb24gdGhlIENvbmZpZ3VyZSBWYXJpYW50L09wdGlvbmFsIFJ1bGVzIGJ1dHRvbicsXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc1RpdGxlJzogJ1NhdmUgcnVsZSBjaGFuZ2VzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzQ29udGVudCc6ICdPbmNlIHlvdSBoYXZlIG1hZGUgeW91ciBjaGFuZ2VzIGNsaWNrIG9uIHRoZSBTYXZlIENoYW5nZXMgYnV0dG9uJ1xuICAgICAgfVxuICAgIH0sIGNvbmZpZykpXG4gIH1cblxuICBhc3luYyBfcHJlU3RlcCAoKSB7XG4gICAgYXdhaXQgc3VwZXIuX3ByZVN0ZXAoKVxuXG4gICAgaWYgKHRoaXMuY3VycmVudFN0ZXAuaWQgPT09ICdnb3RvLWdhbWUtcnVsZXMnKSB7XG4gICAgICBhd2FpdCB0aGlzLndhaXRGb3JFbGVtZW50KCcuY2F0ZWdvcnktZmlsdGVyLnN5c3RlbS5hY3RpdmUnKVxuICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yRWxlbWVudCh0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yKVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgRW5hYmxlVmFyaWFudFJ1bGVzRW4gfSBmcm9tICcuL2VuYWJsZS12YXJpYW50LXJ1bGVzLWVuLmpzJ1xuXG5leHBvcnQgY2xhc3MgRW5hYmxlVmFyaWFudFJ1bGVzRnIgZXh0ZW5kcyBFbmFibGVWYXJpYW50UnVsZXNFbiB7XG4gIGNvbnN0cnVjdG9yIChjb25maWcpIHtcbiAgICBzdXBlcih7XG4gICAgICB0aXRsZTogJ0FjdGl2ZXogbGVzIHLDqGdsZXMgb3B0aW9ubmVsbGVzLicsXG4gICAgICBkZXNjcmlwdGlvbjogJ0FjdGl2ZXogbGVzIHLDqGdsZXMgb3B0aW9uZWxsZXMgZXQgUHVscCBDdGh1bGh1JyxcbiAgICAgIGxvY2FsaXphdGlvbjoge1xuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc1RpdGxlJzogJ1BhcmFtw6h0cmVzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NDb250ZW50JzogJ091dnJpciBsXFwnb25nbGV0IFwiUGFyYW3DqHRyZXNcIicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZVRpdGxlJzogJ0NvbmZpZ3VyYXRpb24gZGVzIG9wdGlvbnMnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVDb250ZW50JzogJ0NsaXF1ZXogc3VyIFwiQ29uZmlndXJhdGlvbiBkZXMgb3B0aW9uc1wiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NUaXRsZSc6ICdTeXN0w6htZSBkZSBqZXUnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc0NvbnRlbnQnOiAnT3V2cmV6IGxcXCdvbmdsZXQgXCJTeXN0w6htZSBkZSBqZXVcIicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc1RpdGxlJzogJ0NvbmZpZ3VyZXIgbGVzIHZhcmlhbnRlcy9yw6hnbGVzIG9wdGlvbm5lbGxlcycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc0NvbnRlbnQnOiAnQ2xpY2tleiBzdXIgbGUgYm91dHRvbiBcIkNvbmZpZ3VyZXIgbGVzIHZhcmlhbnRlcy9yw6hnbGVzIG9wdGlvbm5lbGxlc1wiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzVGl0bGUnOiAnU2F1dmVnYXJkZXIgbGVzIG1vZGlmaWNhdGlvbnMnLFxuICAgICAgICAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNDb250ZW50JzogJ0FwcmVzIGF2b2lyIGNob2lzaXMgbGVzIG9wdGlvbnMgY2xpcXVleiBzdXIgbGUgYm91dG9uIFwiU2F1dmVnYXJkZXIgbGVzIG1vZGlmaWNhdGlvbnNcIidcbiAgICAgIH1cbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MsIGlzTmV3ZXJWZXJzaW9uICovXG5pbXBvcnQgeyBDb0M3VG9vbHRpcHMgfSBmcm9tICcuLi9hcHBzL3Rvb2x0aXBzLmpzJ1xuLy8gaW1wb3J0IHsgQ29DN1dlbGNvbWVNZXNzYWdlIH0gZnJvbSAnLi4vYXBwcy93ZWxjb21lLW1lc3NhZ2UuanMnXG5pbXBvcnQgeyByZWdpc3RlclRvdXJzIH0gZnJvbSAnLi4vc2NyaXB0cy9yZWdpc3Rlci10b3Vycy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uY2UoJ3JlYWR5JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdDYWxsIG9mIEN0aHVsaHUgN3RoIEVkaXRpb24gfCBSZWFkeScpXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dXZWxjb21lTWVzc2FnZScpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAvKiogVGhpcyB3aWxsIHByb21wdCB0aGUgd2VsY29tZSBtZXNzYWdlIHdoZW4gaXQgaXMgIGZpbmlzaGVkICovXG4gICAgICAvLyBhd2FpdCBDb0M3V2VsY29tZU1lc3NhZ2UuY3JlYXRlKClcbiAgICB9XG4gICAgZ2FtZS5Db0M3VG9vbHRpcHMgPSBuZXcgQ29DN1Rvb2x0aXBzKClcblxuICAgIGNvbnN0IGluc3RydWN0aW9uc1ZlcnNpb24gPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzaG93SW5zdHJ1Y3Rpb25zJylcbiAgICBpZiAoaXNOZXdlclZlcnNpb24oZ2FtZS5zeXN0ZW0udmVyc2lvbiwgaW5zdHJ1Y3Rpb25zVmVyc2lvbiA/PyAnMCcpKSB7XG4gICAgICBsZXQgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgICBjb25zdCByZWFkTWUgPSB7XG4gICAgICAgIGVuOiAnc3hCMk9YYmZ3VjZNMG55UScsXG4gICAgICAgIGZyOiAndGRha3l6VFZPUXNBTWRTbSdcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgcmVhZE1lW2xhbmddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBsYW5nID0gJ2VuJ1xuICAgICAgfVxuICAgICAgKGF3YWl0IGdhbWUucGFja3MuZ2V0KCdDb0M3LnN5c3RlbS1kb2MnKS5nZXREb2N1bWVudChyZWFkTWVbbGFuZ10pKS5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3Nob3dJbnN0cnVjdGlvbnMnLCBnYW1lLnN5c3RlbS52ZXJzaW9uKVxuICAgIH1cbiAgICByZWdpc3RlclRvdXJzKClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5pbXBvcnQgeyBFbmFibGVWYXJpYW50UnVsZXNFbiB9IGZyb20gJy4uL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWVuLmpzJ1xuaW1wb3J0IHsgRW5hYmxlVmFyaWFudFJ1bGVzRnIgfSBmcm9tICcuLi90b3Vycy9lbmFibGUtdmFyaWFudC1ydWxlcy1mci5qcydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyVG91cnMgKCkge1xuICB0cnkge1xuICAgIGxldCBsYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICBjb25zdCB0b3VycyA9IHtcbiAgICAgIGVuOiB7XG4gICAgICAgICdlbmFibGUtdmFyaWFudC1ydWxlcyc6IEVuYWJsZVZhcmlhbnRSdWxlc0VuXG4gICAgICB9LFxuICAgICAgZnI6IHtcbiAgICAgICAgJ2VuYWJsZS12YXJpYW50LXJ1bGVzJzogRW5hYmxlVmFyaWFudFJ1bGVzRnJcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0b3Vyc1tsYW5nXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxhbmcgPSAnZW4nXG4gICAgfVxuICAgIGZvciAoY29uc3QgdG91ck5hbWUgaW4gdG91cnNbbGFuZ10pIHtcbiAgICAgIGdhbWUudG91cnMucmVnaXN0ZXIoJ0NvQzcnLCB0b3VyTmFtZSwgbmV3IHRvdXJzW2xhbmddW3RvdXJOYW1lXSgpKVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcignVE9VUiBFUlJPUicsIGVycilcbiAgfVxufVxuIiwiaW1wb3J0ICogYXMgSW5pdCBmcm9tICcuL2luaXQuanMnXG5pbXBvcnQgKiBhcyBEaWNlU29OaWNlUmVhZHkgZnJvbSAnLi9kaWNlLXNvLW5pY2UtcmVhZHkuanMnXG5pbXBvcnQgKiBhcyBEaWNlU29OaWNlUm9sbFN0YXJ0IGZyb20gJy4vZGljZS1zby1uaWNlLXJvbGwtc3RhcnQuanMnXG5pbXBvcnQgKiBhcyBSZWFkeSBmcm9tICcuL3JlYWR5LmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyQWN0b3JTaGVldCBmcm9tICcuL3JlbmRlci1hY3Rvci1zaGVldC5qcydcbmltcG9ydCAqIGFzIFJlbmRlckNoYXRNZXNzYWdlIGZyb20gJy4vcmVuZGVyLWNoYXQtbWVzc2FnZS5qcydcbmltcG9ydCAqIGFzIFJlbmRlckRpYWxvZyBmcm9tICcuL3JlbmRlci1kaWFsb2cuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJJdGVtU2hlZXQgZnJvbSAnLi9yZW5kZXItaXRlbS1zaGVldC5qcydcbmltcG9ydCAqIGFzIFJlbmRlclBhdXNlIGZyb20gJy4vcmVuZGVyLXBhdXNlLmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVyUGxheWVyTGlzdCBmcm9tICcuL3JlbmRlci1wbGF5ZXItbGlzdC5qcydcbmltcG9ydCAqIGFzIFJlbmRlclNldHRpbmdzQ29uZmlnIGZyb20gJy4vcmVuZGVyLXNldHRpbmdzLWNvbmZpZy5qcydcblxuZXhwb3J0IGNvbnN0IENvQzdIb29rcyA9IHtcbiAgbGlzdGVuICgpIHtcbiAgICBJbml0Lmxpc3RlbigpXG4gICAgUmVhZHkubGlzdGVuKClcbiAgICBSZW5kZXJBY3RvclNoZWV0Lmxpc3RlbigpXG4gICAgUmVuZGVyQ2hhdE1lc3NhZ2UubGlzdGVuKClcbiAgICBSZW5kZXJEaWFsb2cubGlzdGVuKClcbiAgICBSZW5kZXJJdGVtU2hlZXQubGlzdGVuKClcbiAgICBSZW5kZXJQYXVzZS5saXN0ZW4oKVxuICAgIERpY2VTb05pY2VSZWFkeS5saXN0ZW4oKVxuICAgIERpY2VTb05pY2VSb2xsU3RhcnQubGlzdGVuKClcbiAgICBSZW5kZXJQbGF5ZXJMaXN0Lmxpc3RlbigpXG4gICAgUmVuZGVyU2V0dGluZ3NDb25maWcubGlzdGVuKClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckFjdG9yU2hlZXQnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge30pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi4vYXBwcy9jb2M3LWxpbmsuanMnXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi4vYXBwcy9jb2M3LXBhcnNlci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TWVzc2FnZScsIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgICBDb0M3Q2hhdC5yZW5kZXJNZXNzYWdlSG9vayhhcHAsIGh0bWwsIGRhdGEpXG4gICAgQ29DN0NoYXQucmVuZGVyQ2hhdE1lc3NhZ2VIb29rKGFwcCwgaHRtbCwgZGF0YSlcbiAgICBDb0M3UGFyc2VyLlBhcnNlTWVzc2FnZShhcHAsIGh0bWwsIGRhdGEpXG4gICAgQ29DN0xpbmsuYmluZEV2ZW50c0hhbmRsZXIoaHRtbClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJEaWFsb2cnLCAoZGlhbG9nLCBodG1sKSA9PiB7XG4gICAgY29uc3QgZm9ybSA9IGh0bWwuZmluZCgnZm9ybScpXG4gICAgaWYgKGZvcm0uaXMoJyNkb2N1bWVudC1jcmVhdGUnKSAmJiBmb3JtLmZpbmQoJ3NlbGVjdCcpLmxlbmd0aCAhPT0gMCkge1xuICAgICAgY29uc3QgZW50aXR5Q3JlYXRlU2VsZWN0VGFnID0gZm9ybS5maW5kKFwiW25hbWU9J3R5cGUnXVwiKVxuICAgICAgY29uc3QgZW50aXR5U29ydGVkTGlzdCA9IFtdXG4gICAgICBjb25zdCBzaG93RXhwZXJpbWVudGFsID0gISFnYW1lLnNldHRpbmdzLmdldChcbiAgICAgICAgJ0NvQzcnLFxuICAgICAgICAnZXhwZXJpbWVudGFsRmVhdHVyZXMnXG4gICAgICApXG4gICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcuY2hpbGRyZW4oKS5lYWNoKChvLCBlbnRpdHlPcHRpb24pID0+IHtcbiAgICAgICAgY29uc3Qga2V5ID0gZW50aXR5T3B0aW9uLnRleHRDb250ZW50Py5jYXBpdGFsaXplKClcbiAgICAgICAgaWYgKGdhbWUuaTE4bi5oYXMoYENvQzcuRW50aXRpZXMuJHtrZXl9YCkpIHtcbiAgICAgICAgICBlbnRpdHlPcHRpb24udGV4dENvbnRlbnQgPSBnYW1lLmkxOG4ubG9jYWxpemUoYENvQzcuRW50aXRpZXMuJHtrZXl9YClcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvd0V4cGVyaW1lbnRhbCB8fCAhWyd2ZWhpY2xlJ10uaW5jbHVkZXMoZW50aXR5T3B0aW9uLnZhbHVlKSkge1xuICAgICAgICAgIGVudGl0eVNvcnRlZExpc3QucHVzaChlbnRpdHlPcHRpb24pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBlbnRpdHlDcmVhdGVTZWxlY3RUYWcuZW1wdHkoKVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmFwcGVuZChcbiAgICAgICAgZW50aXR5U29ydGVkTGlzdC5zb3J0KChmaXJzdCwgc2Vjb25kKSA9PlxuICAgICAgICAgIGZpcnN0LmlubmVyVGV4dC5sb2NhbGVDb21wYXJlKHNlY29uZC5pbm5lclRleHQpXG4gICAgICAgIClcbiAgICAgIClcbiAgICAgIGlmIChlbnRpdHlDcmVhdGVTZWxlY3RUYWcudmFsKCkgPT09ICdhY3RvcicpIHtcbiAgICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgnY2hhcmFjdGVyJylcbiAgICAgIH0gZWxzZSBpZiAoZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgpID09PSAnYm9vaycpIHtcbiAgICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgnaXRlbScpXG4gICAgICB9XG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVySXRlbVNoZWV0JywgYXN5bmMgKGRhdGEsIGh0bWwsIG9wdGlvbnMpID0+IHt9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEhvb2tzICovXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyUGF1c2UnLCBhc3luYyAoZGF0YSwgaHRtbCwgb3B0aW9ucykgPT4ge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvdmVycmlkZUdhbWVBcnR3b3JrJykpIHtcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZUltYWdlJykudG9Mb3dlckNhc2UoKSA9PT0gJ251bGwnKSB7XG4gICAgICAgIGh0bWwuZmluZCgnaW1nJykucmVtb3ZlKClcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZUltYWdlJykgIT09ICcnKSB7XG4gICAgICAgIGh0bWwuZmluZCgnaW1nJykuYXR0cignc3JjJywgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpKVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VUZXh0JykgIT09ICcnKSB7XG4gICAgICAgIGh0bWwuZmluZCgnaDMnKS5odG1sKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlVGV4dCcpKVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xuaW1wb3J0IHsgQ29DN0RlY2FkZXJEU05GYWNlcyB9IGZyb20gJy4uL2FwcHMvZGVjYWRlci1kc24tZmFjZXMuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbmNlKCdkaWNlU29OaWNlUmVhZHknLCBkaWNlM2QgPT4ge1xuICAgIGRpY2UzZC5hZGREaWNlUHJlc2V0KHtcbiAgICAgIHR5cGU6ICdkdCcsXG4gICAgICBsYWJlbHM6IFsnMTAnLCAnMjAnLCAnMzAnLCAnNDAnLCAnNTAnLCAnNjAnLCAnNzAnLCAnODAnLCAnOTAnLCAnMDAnXSxcbiAgICAgIGZvbnRTY2FsZTogMC43NSxcbiAgICAgIHN5c3RlbTogJ3N0YW5kYXJkJ1xuICAgIH0pXG4gICAgZGljZTNkLmFkZERpY2VQcmVzZXQoe1xuICAgICAgdHlwZTogJ2RvJyxcbiAgICAgIGxhYmVsczogWycxMCcsICcyMCcsICczMCcsICc0MCcsICc1MCcsICc2MCcsICc3MCcsICc4MCcsICc5MCcsICcwMCddLFxuICAgICAgZm9udFNjYWxlOiAwLjc1LFxuICAgICAgc3lzdGVtOiAnc3RhbmRhcmQnXG4gICAgfSlcbiAgICBnYW1lLkNvQzdEZWNhZGVyRFNORmFjZXMgPSBuZXcgQ29DN0RlY2FkZXJEU05GYWNlcygpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbignZGljZVNvTmljZVJvbGxTdGFydCcsIGRpY2UzZCA9PiB7XG4gICAgZ2FtZS5Db0M3RGVjYWRlckRTTkZhY2VzLnNldEZhY2VzKClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lLCBIb29rcyAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJQbGF5ZXJMaXN0JywgKHBsYXllckxpc3QsIGh0bWwsIGRhdGEpID0+IHtcbiAgICAkKCc8aDQ+JykuYXBwZW5kKCc8ZGl2PjxpIGNsYXNzPVwiZmEtcmVndWxhciBmYS1jYWxlbmRhclwiPjwvaT4nICsgZ2FtZS5pMThuLmZvcm1hdChDT0M3LmVyYXNbZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKV0gPz8gJ0NvQzcuQ29DSURGbGFnLmVycm9yLnVua25vd24tZXJhJywgeyBlcmE6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJykgfSkgKyAnPC9kaXY+JykuaW5zZXJ0QWZ0ZXIoJCgnaDMnLCBodG1sKSlcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuaW1wb3J0IHsgQ29DN0RpcmVjdG9yeVBpY2tlciB9IGZyb20gJy4uL3NjcmlwdHMvY29jNy1kaXJlY3RvcnktcGlja2VyLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlclNldHRpbmdzQ29uZmlnJywgKGFwcCwgaHRtbCwgdXNlcikgPT4ge1xuICAgIENvQzdEaXJlY3RvcnlQaWNrZXIucHJvY2Vzc0h0bWwoaHRtbClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBzb2NrZXRsaWIsIHVpICovXG5pbXBvcnQgeyBDb0M3TWVsZWVUYXJnZXQgfSBmcm9tICcuLi9jaGF0L2NvbWJhdC9tZWxlZS10YXJnZXQuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBDb0M3U29ja2V0ICgpIHtcbiAgZ2FtZS5Db0M3c29ja2V0ID0gc29ja2V0bGliLnJlZ2lzdGVyU3lzdGVtKCdDb0M3JylcbiAgZ2FtZS5Db0M3c29ja2V0LnJlZ2lzdGVyKCdnbWNyZWF0ZW1lc3NhZ2VhcycsIGdtY3JlYXRlbWVzc2FnZWFzKVxuICBnYW1lLkNvQzdzb2NrZXQucmVnaXN0ZXIoJ2dtdHJhZGVpdGVtdG8nLCBnbXRyYWRlaXRlbXRvKVxufVxuXG5hc3luYyBmdW5jdGlvbiBnbWNyZWF0ZW1lc3NhZ2VhcyAoZGF0YSkge1xuICBjb25zdCBtZWxlZVRhcmdldCA9IG5ldyBDb0M3TWVsZWVUYXJnZXQoXG4gICAgZGF0YS50YXJnZXRLZXksXG4gICAgZGF0YS5tZXNzYWdlSWQsXG4gICAgZGF0YS5mYXN0Rm9yd2FyZFxuICApXG4gIG1lbGVlVGFyZ2V0LmluaXRpYXRvcktleSA9IGRhdGEuYWN0b3JLZXlcbiAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IG1lbGVlVGFyZ2V0LmNyZWF0ZUNoYXRDYXJkKClcbiAgcmV0dXJuIG1lc3NhZ2Vcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ210cmFkZWl0ZW10byAoZGF0YSkge1xuICB0cnkge1xuICAgIGxldCBhY3RvclxuICAgIGlmIChkYXRhLnNjZW5lKSB7XG4gICAgICBhY3RvciA9IGdhbWUuc2NlbmVzLmdldChkYXRhLnNjZW5lKS50b2tlbnMuZ2V0KGRhdGEuYWN0b3JGcm9tKS5hY3RvclxuICAgIH0gZWxzZSB7XG4gICAgICBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChkYXRhLmFjdG9yRnJvbSlcbiAgICB9XG4gICAgY29uc3QgaXRlbSA9IGFjdG9yLml0ZW1zLmdldChkYXRhLml0ZW0pXG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IGdhbWUuYWN0b3JzXG4gICAgICAuZ2V0KGRhdGEuYWN0b3JUbylcbiAgICAgIC5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtpdGVtLnRvSlNPTigpXSlcbiAgICBpZiAoY3JlYXRlZCkge1xuICAgICAgYWN0b3IuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbS5pZF0pXG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlKVxuICAgIHJldHVybiBmYWxzZVxuICB9XG4gIHJldHVybiB0cnVlXG59XG4iLCIvKiBnbG9iYWwgZnJvbVV1aWQsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkIH0gZnJvbSAnLi9pbnZlc3RpZ2F0b3Itd2l6YXJkLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvbWJpbmVkQ2hlY2tDYXJkIH0gZnJvbSAnLi4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xuaW1wb3J0IHsgT3Bwb3NlZENoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1N5c3RlbVNvY2tldCB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAgICAgICAgICAgICAgICAgICAgICAgRGF0YSB0byBzZW5kIHRvIHNvY2tldC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtkYXRhLnR5cGVdICAgICAgICAgICAgICAgIEFjdGlvbiB0byBydW5cbiAgICogQHBhcmFtIHtzdHJpbmd8dW5kZWZpbmVkfSBbZGF0YS5saXN0ZW5lcl0gIG9ubHkgdGhpcyBzcGVjZmljIHVzZXIgc2hvdWxkIHJ1biB0aGUgYWN0aW9uXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY2FsbFNvY2tldCAoZGF0YSkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5saXN0ZW5lciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChnYW1lLnVzZXIuaWQgPT09IGRhdGEubGlzdGVuZXIpIHtcbiAgICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICdjaGFyYWN0ZXItd2l6YXJkJzpcbiAgICAgICAgICAgIENvQzdJbnZlc3RpZ2F0b3JXaXphcmQuY3JlYXRlQ2hhcmFjdGVyRnJvbURhdGEoZGF0YS5wYXlsb2FkKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdvcGVuLWNoYXJhY3Rlcic6XG4gICAgICAgICAgICBnYW1lLmFjdG9ycy5nZXQoZGF0YS5wYXlsb2FkKS5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSBPcHBvc2VkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZTpcbiAgICAgICAgICAgIE9wcG9zZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBDb21iaW5lZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGU6XG4gICAgICAgICAgICBDb21iaW5lZENoZWNrQ2FyZC5kaXNwYXRjaChkYXRhKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdpbnZva2UnOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZGF0YS5pdGVtKVxuICAgICAgICAgICAgICBpdGVtW2RhdGEubWV0aG9kXShkYXRhLmRhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICBjYXNlICd1cGRhdGVDaGFyJzpcbiAgICAgICAgICBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgS2VlcGVyIGFjdGlvbiwgaWYgeW91IGFyZSBhIGtlZXBlciBydW4geW91cnNlbGYsIGlmIHRoZXJlIGlzIG5vIGFjdGl2ZSBHTSBzaG93IGVycm9yXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhICAgICAgICAgICAgIERhdGEgdG8gc2VuZCB0byBzb2NrZXQuXG4gICAqL1xuICBzdGF0aWMgcmVxdWVzdEtlZXBlckFjdGlvbiAoZGF0YSkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgZGF0YS5saXN0ZW5lciA9IGdhbWUudXNlci5pZFxuICAgICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGtlZXBlcnMgPSBnYW1lLnVzZXJzLmZpbHRlcih1ID0+IHUuYWN0aXZlICYmIHUuaXNHTSlcbiAgICAgIGlmIChrZWVwZXJzLmxlbmd0aCkge1xuICAgICAgICBkYXRhLmxpc3RlbmVyID0ga2VlcGVyc1swXS5pZFxuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck1pc3NpbmdLZWVwZXJVc2VyJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IHVzZXIgYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhICAgICAgICAgICAgIERhdGEgdG8gc2VuZCB0byBzb2NrZXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IHVzZXJJZCAgICAgIE9ubHkgdGhpcyB1c2VyIGlkIHNob3VsZCBydW4gdGhlIGFjdGlvbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBlcnJvcklmTWlzc2luZyAgSWYgcmVxdWVzdGluZyBhIHNwZWNpZmljIHVzZXIgc2hvdWxkIHJ1biB0aGUgYWN0aW9uIGVycm9yIGlmIHVzZXIgbm90IGZvdW5kIC8gbG9nZ2VkIGluLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGluY2x1ZGVTZWxmICAgICBJZiBydW5uaW5nIGFzIGFsbCB1c2VycyBzaG91bGQgdGhlIGN1cnJlbnQgdXNlciBhbHNvIHJ1biB0aGUgYWN0aW9uLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgc3RhdGljIHJlcXVlc3RVc2VyQWN0aW9uIChcbiAgICBkYXRhLFxuICAgIHsgdXNlcklkID0gbnVsbCwgZXJyb3JJZk1pc3NpbmcgPSB0cnVlLCBpbmNsdWRlU2VsZiA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGlmICh1c2VySWQgJiYgdHlwZW9mIHVzZXJJZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh1c2VySWQgPT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICBkYXRhLmxpc3RlbmVyID0gZ2FtZS51c2VyLmlkXG4gICAgICAgIENvQzdTeXN0ZW1Tb2NrZXQuY2FsbFNvY2tldChkYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdXNlciA9IGdhbWUudXNlcnMuZ2V0KHVzZXJJZClcbiAgICAgICAgaWYgKHR5cGVvZiB1c2VyLmlkICE9PSAndW5kZWZpbmVkJyAmJiB1c2VyLmFjdGl2ZSkge1xuICAgICAgICAgIGRhdGEubGlzdGVuZXIgPSB1c2VyLmlkXG4gICAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgICAgICB9IGVsc2UgaWYgKGVycm9ySWZNaXNzaW5nKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNaXNzaW5nVXNlcicpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpbmNsdWRlU2VsZikge1xuICAgICAgICBDb0M3U3lzdGVtU29ja2V0LmNhbGxTb2NrZXQoZGF0YSlcbiAgICAgIH1cbiAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDb21iYXQsIENPTkZJRywgZ2FtZSwgSG9va3MsIEl0ZW1EaXJlY3RvcnkgKi9cbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9jcmVhdHVyZS1zaGVldC5qcydcbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldCB9IGZyb20gJy4vYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdDb21iYXQsIHJvbGxJbml0aWF0aXZlIH0gZnJvbSAnLi9jb21iYXQuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBVcGRhdGVyIH0gZnJvbSAnLi91cGRhdGVyLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4vYXBwcy9jb2M3LXBhcnNlci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3TWVudSB9IGZyb20gJy4vbWVudS5qcydcbmltcG9ydCB7IERhbWFnZUNhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0NhbnZhcyB9IGZyb20gJy4vYXBwcy9jYW52YXMuanMnXG5pbXBvcnQgeyBDb0M3U2V0dGluZ3NEaXJlY3RvcnkgfSBmcm9tICcuL3NldHRpbmdzLWRpcmVjdG9yeS5qcydcbmltcG9ydCB7IENvQzdDb21wZW5kaXVtRGlyZWN0b3J5IH0gZnJvbSAnLi9jb21wZW5kaXVtLWRpcmVjdG9yeS5qcydcbmltcG9ydCB7IENvQzdBY3RvckRpcmVjdG9yeSB9IGZyb20gJy4vYWN0b3ItZGlyZWN0b3J5LmpzJ1xuaW1wb3J0IHsgQ29DN0hvb2tzIH0gZnJvbSAnLi9ob29rcy9pbmRleC5qcydcbmltcG9ydCAqIGFzIERpY2VCb3QgZnJvbSAnLi9kaWNlYm90LmpzJ1xuaW1wb3J0ICcuLi9zdHlsZXMvc3lzdGVtL2luZGV4Lmxlc3MnXG5pbXBvcnQgeyBDb0M3Q2hhc2VTaGVldCB9IGZyb20gJy4vaXRlbXMvY2hhc2Uvc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3U29ja2V0IH0gZnJvbSAnLi9ob29rcy9zb2NrZXQuanMnXG5pbXBvcnQgeyBDb0M3U3lzdGVtU29ja2V0IH0gZnJvbSAnLi9hcHBzL2NvYzctc3lzdGVtLXNvY2tldC5qcydcbmltcG9ydCB7IERyb3BBY3RvclNoZWV0RGF0YSB9IGZyb20gJy4vaG9va3MvZHJvcC1hY3Rvci1zaGVldC1kYXRhLmpzJ1xuXG4vLyBDYXJkIGluaXRcbmltcG9ydCB7IGluaXRFQ0MgfSBmcm9tICcuL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMnXG5pbXBvcnQgeyBDaGFzZU9ic3RhY2xlQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9jaGFzZS1vYnN0YWNsZS5qcydcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4vY29udGV4dC1tZW51LmpzJ1xuXG5Ib29rcy5vbigncmVuZGVyU2V0dGluZ3NDb25maWcnLCAoYXBwLCBodG1sLCBvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHN5c3RlbVRhYiA9ICQoYXBwLmZvcm0pLmZpbmQoJy50YWJbZGF0YS10YWI9c3lzdGVtXScpXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRpc3BsYXlJbml0RGljZXNdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUluaXRpYXRpdmUnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLnN0YW5ieUdNUm9sbHNdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVJvbGwnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLnRydXN0ZWRDYW5Nb2RmeUNoYXRDYXJkXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVDaGF0Q2FyZHMnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmVuYWJsZVN0YXR1c0ljb25zXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVTY2VuZScpICtcbiAgICAgICAgJzwvaDI+J1xuICAgIClcbiAgc3lzdGVtVGFiXG4gICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwub3ZlcnJpZGVHYW1lQXJ0d29ya10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlR2FtZUFydHdvcmsnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRpc3BsYXlQbGF5ZXJOYW1lT25TaGVldF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlU2hlZXQnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRpc3JlZ2FyZFVzZVBlclJvdW5kXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVXZWFwb24nKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLnN5bmNEaWNlM2RdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZURpY2VTb05pY2UnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmRlYnVnbW9kZV0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlRGV2ZWxvcGVyRGVidWcnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdzZWxlY3RbbmFtZT1Db0M3XFxcXC5ib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVSb2xsVGFibGUnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIC8vIE1PVkVEIFRPIENIQVNTRSBJTkRJVklEVUFMIFNFVFRJTkdcbiAgLy8gc3lzdGVtVGFiXG4gIC8vICAgLmZpbmQoJ2lucHV0W25hbWU9Q29DN1xcXFwuY2hhc2VTaG93VG9rZW5Nb3ZlbWVudF0nKVxuICAvLyAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gIC8vICAgLmJlZm9yZShcbiAgLy8gICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAvLyAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlQ2hhc2VTZXR0aW5ncycpICtcbiAgLy8gICAgICAgJzwvaDI+J1xuICAvLyAgIClcbn0pXG5cbkhvb2tzLm9uY2UoJ2luaXQnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGdhbWUuQ29DNyA9IHtcbiAgICBtYWNyb3M6IHtcbiAgICAgIHNraWxsQ2hlY2s6IENvQzdVdGlsaXRpZXMuc2tpbGxDaGVja01hY3JvLFxuICAgICAgd2VhcG9uQ2hlY2s6IENvQzdVdGlsaXRpZXMud2VhcG9uQ2hlY2tNYWNybyxcbiAgICAgIGNoZWNrOiBDb0M3VXRpbGl0aWVzLmNoZWNrTWFjcm9cbiAgICB9LFxuICAgIGNhcmRzOiB7XG4gICAgICBEYW1hZ2VDYXJkXG4gICAgfSxcbiAgICBkZXY6IHtcbiAgICAgIGRpY2U6IHtcbiAgICAgICAgYWx3YXlzQ3JpdDogZmFsc2UsXG4gICAgICAgIGFsd2F5c0Z1bWJsZTogZmFsc2VcbiAgICAgIH1cbiAgICB9LFxuICAgIGVyYXM6IChlcmEsIG5hbWUpID0+IHtcbiAgICAgIENPQzcuZXJhc1tlcmFdID0gbmFtZVxuICAgIH1cbiAgfVxuICBDb21iYXQucHJvdG90eXBlLnJvbGxJbml0aWF0aXZlID0gcm9sbEluaXRpYXRpdmVcbn0pXG5cbmluaXRFQ0MoQ2hhc2VPYnN0YWNsZUNhcmQpXG5cbkhvb2tzLm9uKCdyZW5kZXJDb21iYXRUcmFja2VyJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgQ29DN0NvbWJhdC5yZW5kZXJDb21iYXRUcmFja2VyKGFwcCwgaHRtbCwgZGF0YSlcbilcblxuRGljZUJvdC5saXN0ZW4oKVxuQ29DN0hvb2tzLmxpc3RlbigpXG5cbkhvb2tzLm9uY2UoJ3NvY2tldGxpYi5yZWFkeScsIENvQzdTb2NrZXQpXG5cbkhvb2tzLm9uY2UoJ3NldHVwJywgZnVuY3Rpb24gKCkge1xuICAvLyBMb2NhbGl6ZSBDT05GSUcgb2JqZWN0cyBvbmNlIHVwLWZyb250XG4gIGNvbnN0IHRvTG9jYWxpemUgPSBbXG4gICAgJ3NwZWxsUHJvcGVydGllcycsXG4gICAgJ2Jvb2tUeXBlJyxcbiAgICAndGFsZW50VHlwZScsXG4gICAgJ29jY3VwYXRpb25Qcm9wZXJ0aWVzJyxcbiAgICAnc3RhdHVzVHlwZSdcbiAgXVxuXG4gIGZvciAoY29uc3QgbyBvZiB0b0xvY2FsaXplKSB7XG4gICAgY29uc3QgbG9jYWxpemVkID0gT2JqZWN0LmVudHJpZXMoQ09DN1tvXSkubWFwKGUgPT4ge1xuICAgICAgcmV0dXJuIFtlWzBdLCBnYW1lLmkxOG4ubG9jYWxpemUoZVsxXSldXG4gICAgfSlcbiAgICBDT0M3W29dID0gbG9jYWxpemVkLnJlZHVjZSgob2JqLCBlKSA9PiB7XG4gICAgICBvYmpbZVswXV0gPSBlWzFdXG4gICAgICByZXR1cm4gb2JqXG4gICAgfSwge30pXG4gIH1cblxuICBsZXQgZWZmZWN0SW5kZXggPSBDT05GSUcuc3RhdHVzRWZmZWN0cy5maW5kSW5kZXgoXG4gICAgdCA9PiB0LmlkID09PSBDT0M3LnN0YXR1cy5kZWFkXG4gIClcbiAgaWYgKGVmZmVjdEluZGV4ICE9PSAtMSkge1xuICAgIENPTkZJRy5zdGF0dXNFZmZlY3RzW2VmZmVjdEluZGV4XS5pY29uID1cbiAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3RvbWJzdG9uZS5zdmcnXG4gIH1cbiAgZWZmZWN0SW5kZXggPSBDT05GSUcuc3RhdHVzRWZmZWN0cy5maW5kSW5kZXgoXG4gICAgdCA9PiB0LmlkID09PSBDT0M3LnN0YXR1cy51bmNvbnNjaW91c1xuICApXG4gIGlmIChlZmZlY3RJbmRleCAhPT0gLTEpIHtcbiAgICBDT05GSUcuc3RhdHVzRWZmZWN0c1tlZmZlY3RJbmRleF0uaWNvbiA9XG4gICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9rbm9ja2VkLW91dC1zdGFycy5zdmcnXG4gIH1cbiAgQ09ORklHLnN0YXR1c0VmZmVjdHMudW5zaGlmdChcbiAgICB7XG4gICAgICBpZDogQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUsXG4gICAgICBsYWJlbDogJ0NvQzcuQm91dE9mTWFkbmVzc05hbWUnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGFuZ2luZy1zcGlkZXIuc3ZnJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLmluZGVmSW5zYW5lLFxuICAgICAgbGFiZWw6ICdDb0M3Lkluc2FuaXR5TmFtZScsXG4gICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90ZW50YWNsZXMtc2t1bGwuc3ZnJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzLFxuICAgICAgbGFiZWw6ICdDb0M3LkNyaXRpY2FsV291bmRzJyxcbiAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2FybS1zbGluZy5zdmcnXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogQ09DNy5zdGF0dXMuZHlpbmcsXG4gICAgICBsYWJlbDogJ0NvQzcuRHlpbmcnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvaGVhcnQtYmVhdHMuc3ZnJ1xuICAgIH1cbiAgKVxufSlcblxuSG9va3Mub24oJ2NyZWF0ZUFjdGl2ZUVmZmVjdCcsIChkYXRhLCBvcHRpb25zLCB1c2VySWQpID0+IHtcbiAgaWYgKFxuICAgIGdhbWUudXNlcklkID09PSB1c2VySWQgJiZcbiAgICB0eXBlb2YgZGF0YS5mbGFncy5jb3JlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBkYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQgIT09ICd1bmRlZmluZWQnXG4gICkge1xuICAgIHN3aXRjaCAoZGF0YS5mbGFncy5jb3JlLnN0YXR1c0lkKSB7XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmluZGVmSW5zYW5lOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy51bmNvbnNjaW91czpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmR5aW5nOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5wcm9uZTpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgZGF0YS5wYXJlbnQuc2V0Q29uZGl0aW9uKGRhdGEuZmxhZ3MuY29yZS5zdGF0dXNJZCwge1xuICAgICAgICAgIGZvcmNlVmFsdWU6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCByZWFsVGltZSA9IGRhdGEuZmxhZ3MuQ29DNz8ucmVhbFRpbWVcbiAgICAgICAgICBsZXQgZHVyYXRpb24gPSBudWxsXG4gICAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlKSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb24/LnJvdW5kc1xuICAgICAgICAgIH0gZWxzZSBpZiAocmVhbFRpbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBkdXJhdGlvbiA9IGRhdGEuZHVyYXRpb24/LnNlY29uZHNcbiAgICAgICAgICAgIGlmICghaXNOYU4oZHVyYXRpb24pKSB7XG4gICAgICAgICAgICAgIGR1cmF0aW9uID0gTWF0aC5mbG9vcihkdXJhdGlvbiAvIDM2MDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGEucGFyZW50LnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSwge1xuICAgICAgICAgICAgZm9yY2VWYWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgIHJlYWxUaW1lLFxuICAgICAgICAgICAgZHVyYXRpb25cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG59KVxuXG5Ib29rcy5vbignZGVsZXRlQWN0aXZlRWZmZWN0JywgKGRhdGEsIG9wdGlvbnMsIHVzZXJJZCkgPT4ge1xuICBpZiAoXG4gICAgZ2FtZS51c2VySWQgPT09IHVzZXJJZCAmJlxuICAgIHR5cGVvZiBkYXRhLmZsYWdzLmNvcmUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGRhdGEuZmxhZ3MuY29yZS5zdGF0dXNJZCAhPT0gJ3VuZGVmaW5lZCdcbiAgKSB7XG4gICAgc3dpdGNoIChkYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQpIHtcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmluZGVmSW5zYW5lOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy51bmNvbnNjaW91czpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmR5aW5nOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5wcm9uZTpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgZGF0YS5wYXJlbnQudW5zZXRDb25kaXRpb24oZGF0YS5mbGFncy5jb3JlLnN0YXR1c0lkLCB7XG4gICAgICAgICAgZm9yY2VWYWx1ZTogdHJ1ZVxuICAgICAgICB9KVxuICAgIH1cbiAgfVxufSlcblxuLy8gVGhpcyB3aWxsIGhpZGUgdGhlIGl0ZW0gY2FsbGVkICdfX0NvQzdJbnRlcm5hbEl0ZW1fXydcbi8vIFRoaXMgaXRlbSBpcyB1c2VkIGZvciBpbnRlcm5hbCBwdXJwb3NlcyBhbmQgc2hvdWxkIG5vdCBiZSBzZWVuIGJ5IGFueW9uZVxuSG9va3Mub24oJ2NoYW5nZVNpZGViYXJUYWInLCBkaXJlY3RvcnkgPT4ge1xuICBpZiAoZGlyZWN0b3J5IGluc3RhbmNlb2YgSXRlbURpcmVjdG9yeSkge1xuICAgIGNvbnN0IGl0ZW0gPSBnYW1lLml0ZW1zLmZpbmQoaSA9PiBpLm5hbWUgPT09ICdfX0NvQzdJbnRlcm5hbEl0ZW1fXycpXG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBkaXJlY3RvcnkuX2VsZW1lbnRcbiAgICAgIGNvbnN0IGl0ZW1FbGVtZW50ID0gaHRtbC5maW5kKGBbZGF0YS1kb2N1bWVudC1pZD0nJHtpdGVtLmlkfSddYClcbiAgICAgIGlmIChpdGVtRWxlbWVudCkgaXRlbUVsZW1lbnRbMF0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIH1cbiAgfVxufSlcblxuSG9va3Mub24oJ2hvdGJhckRyb3AnLCAoYmFyLCBkYXRhLCBzbG90KSA9PiB7XG4gIHJldHVybiBDb0M3VXRpbGl0aWVzLmNyZWF0ZU1hY3JvKGJhciwgZGF0YSwgc2xvdClcbn0pXG5cbkhvb2tzLm9uKCdyZW5kZXJDaGF0TG9nJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgQ29DN0NoYXQuY2hhdExpc3RlbmVycyhhcHAsIGh0bWwsIGRhdGEpXG4pXG5Ib29rcy5vbigndXBkYXRlQ2hhdE1lc3NhZ2UnLCAoY2hhdE1lc3NhZ2UsIGNoYXREYXRhLCBkaWZmLCBzcGVha2VyKSA9PlxuICBDb0M3Q2hhdC5vblVwZGF0ZUNoYXRNZXNzYWdlKGNoYXRNZXNzYWdlLCBjaGF0RGF0YSwgZGlmZiwgc3BlYWtlcilcbilcblxuSG9va3Mub24oJ3JlYWR5JywgYXN5bmMgKCkgPT4ge1xuICBhd2FpdCBVcGRhdGVyLmNoZWNrRm9yVXBkYXRlKClcblxuICAvLyBnYW1lLkNvQzcubWVudXMgPSBuZXcgQ29DN01lbnUoKTtcblxuICBhY3RpdmF0ZUdsb2JhbExpc3RlbmVyKClcblxuICAvLyBzZXRHbG9iYWxDc3NWYXIoKVxuXG4gIGdhbWUuQ29DNy5za2lsbExpc3QgPSBhd2FpdCBnYW1lLnBhY2tzLmdldCgnQ29DNy5za2lsbHMnKT8uZ2V0RG9jdW1lbnRzKClcblxuICBnYW1lLnNvY2tldC5vbignc3lzdGVtLkNvQzcnLCBhc3luYyBkYXRhID0+IHtcbiAgICBDb0M3U3lzdGVtU29ja2V0LmNhbGxTb2NrZXQoZGF0YSlcbiAgfSlcblxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhcIjogXCJQaG9iaWFzIGluZGV4XCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleEhpbnRcIjogXCJUaGUgaW5kZXggKHJvbGwgcmVzdWx0KSB0aGF0IHdpbGwgdHJpZ2dlciBhIHJvbGwgaW4gdGhlIHBob2JpYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXhcIjogXCJNYW5pYXMgaW5kZXhcIixcbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXhIaW50XCI6IFwiVGhlIGluZGV4IChyb2xsIHJlc3VsdCkgdGhhdCB3aWxsIHRyaWdnZXIgYSByb2xsIGluIHRoZSBtYW5pYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5TYW1wbGVQaG9iaWFzVGFibGVcIjogXCJTYW1wbGUgcGhvYmlhcyB0YWJsZVwiLFxuICAvLyBcIlNFVFRJTkdTLlNhbXBsZU1hbmlhc1RhYmxlXCI6IFwiU2FtcGxlIE1hbmlhcyB0YWJsZVwiLFxuXG4gIGZ1bmN0aW9uIF90YWJsZVNldHRpbmdzQ2hhbmdlZCAodGFibGUsIGlkKSB7XG4gICAgaWYgKGlkID09PSAnbm9uZScpIGdhbWUuQ29DNy50YWJsZXNbdGFibGVdID0gbnVsbFxuICAgIGVsc2UgZ2FtZS5Db0M3LnRhYmxlc1t0YWJsZV0gPSBnYW1lLnRhYmxlcy5nZXQoaWQpXG4gIH1cblxuICAvLyBmdW5jdGlvbiBfdGFibGVJbmRleENoYW5nZWQoIHRhYmxlLCBpbmRleCl7XG4gIC8vICBnYW1lLkNvQzcudGFibGVzW3RhYmxlXT1pbmRleDtcbiAgLy8gfVxuXG4gIGNvbnN0IHRhYmxlQ2hvaWNlID0geyBub25lOiAnU0VUVElOR1MuTGV0S2VlcGVyRGVjaWRlJyB9XG4gIGZvciAoY29uc3QgdCBvZiBnYW1lLnRhYmxlcykge1xuICAgIHRhYmxlQ2hvaWNlW3QuX2lkXSA9IHQubmFtZVxuICB9XG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ25vbmUnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB0YWJsZUNob2ljZSxcbiAgICBvbkNoYW5nZTogaWQgPT4gX3RhYmxlU2V0dGluZ3NDaGFuZ2VkKCdib3V0T2ZNYWRuZXNzX1N1bW1hcnknLCBpZClcbiAgfSlcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdub25lJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gICAgb25DaGFuZ2U6IGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCgnYm91dE9mTWFkbmVzc19SZWFsVGltZScsIGlkKVxuICB9KVxuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1Bob2JpYXNJbmRleCcse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnLFxuICAvLyAgaGludDogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhIaW50JyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogOSxcbiAgLy8gIHR5cGU6IE51bWJlcixcbiAgLy8gIG9uQ2hhbmdlOiAgaWQgPT4gX3RhYmxlSW5kZXhDaGFuZ2VkKCAncGhvYmlhc0luZGV4JywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc01hbmlhc0luZGV4Jyx7XG4gIC8vICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4JyxcbiAgLy8gIGhpbnQ6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXhIaW50JyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogMTAsXG4gIC8vICB0eXBlOiBOdW1iZXIsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZUluZGV4Q2hhbmdlZCggJ21hbmlhc0luZGV4JywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2FtcGxlUGhvYmlhc1RhYmxlJyx7XG4gIC8vICBuYW1lOiAnU0VUVElOR1MuU2FtcGxlUGhvYmlhc1RhYmxlJyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogJ25vbmUnLFxuICAvLyAgdHlwZTogU3RyaW5nLFxuICAvLyAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCggJ3Bob2JpYXMnLCBpZClcbiAgLy8gfSk7XG5cbiAgLy8gZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzYW1wbGVNYW5pYXNUYWJsZScse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLlNhbXBsZU1hbmlhc1RhYmxlJyxcbiAgLy8gIHNjb3BlOiAnd29ybGQnLFxuICAvLyAgY29uZmlnOiB0cnVlLFxuICAvLyAgZGVmYXVsdDogJ25vbmUnLFxuICAvLyAgdHlwZTogU3RyaW5nLFxuICAvLyAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCggJ21hbmlhcycsIGlkKVxuICAvLyB9KTtcblxuICBnYW1lLkNvQzcudGFibGVzID0ge1xuICAgIGJvdXRPZk1hZG5lc3NfU3VtbWFyeTpcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGUnKSA9PT0gJ25vbmUnXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IGdhbWUudGFibGVzLmdldChcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJylcbiAgICAgICAgKSxcbiAgICBib3V0T2ZNYWRuZXNzX1JlYWxUaW1lOlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKSA9PT0gJ25vbmUnXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IGdhbWUudGFibGVzLmdldChcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScpXG4gICAgICAgIClcbiAgICAvLyBtYW5pYXNJbmRleDogZ2Uuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnKSxcbiAgICAvLyBwaG9iaWFzSW5kZXg6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcpLFxuICAgIC8vIHBob2JpYXM6ICgnbm9uZScgPT0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlUGhvYmlhc1RhYmxlJykpP251bGw6Z2FtZS50YWJsZXMuZ2V0KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScpKSxcbiAgICAvLyBtYW5pYXM6ICgnbm9uZScgPT0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSk/bnVsbDpnYW1lLnRhYmxlcy5nZXQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnKSksXG4gIH1cbn0pXG5cbi8vIEhvb2tzLm9uKCdwcmVDcmVhdGVBY3RvcicsIChjcmVhdGVEYXRhKSA9PiBDb0NBY3Rvci5pbml0VG9rZW4oIGNyZWF0ZURhdGEpKTtcblxuSG9va3Mub24oXG4gICdyZW5kZXJDb0M3Q2hhc2VTaGVldCcsXG4gIC8qKiBhc3luYyAqLyAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICAgIC8qKiBhd2FpdCAqLyBDb0M3Q2hhc2VTaGVldC5zZXRTY3JvbGwoYXBwLCBodG1sLCBkYXRhKVxuKVxuXG5Ib29rcy5vbignY2xvc2VDb0M3Q2hhc2VTaGVldCcsIChhcHAsIGh0bWwpID0+XG4gIENvQzdDaGFzZVNoZWV0Lm9uQ2xvc2UoYXBwLCBodG1sKVxuKVxuXG4vLyBDYWxsZWQgb24gY2xvc2luZyBhIGNoYXJhY3RlciBzaGVldCB0byBsb2NrIGl0IG9uIGdldHRpbmcgaXQgdG8gZGlzcGxheSB2YWx1ZXNcbkhvb2tzLm9uKCdjbG9zZUFjdG9yU2hlZXQnLCBjaGFyYWN0ZXJTaGVldCA9PiBjaGFyYWN0ZXJTaGVldC5vbkNsb3NlU2hlZXQoKSlcbkhvb2tzLm9uKCdyZW5kZXJDb0M3Q3JlYXR1cmVTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDcmVhdHVyZVNoZWV0LmZvcmNlQXV0byhhcHAsIGh0bWwsIGRhdGEpXG4pXG5Ib29rcy5vbigncmVuZGVyQ29DN05QQ1NoZWV0JywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgQ29DN05QQ1NoZWV0LmZvcmNlQXV0byhhcHAsIGh0bWwsIGRhdGEpXG4pXG4vLyBIb29rcy5vbigndXBkYXRlQWN0b3InLCAoYWN0b3IsIGRhdGFVcGRhdGUpID0+IENvQ0FjdG9yLnVwZGF0ZUFjdG9yKCBhY3RvciwgZGF0YVVwZGF0ZSkpO1xuLy8gSG9va3Mub24oJ3VwZGF0ZVRva2VuJywgKHNjZW5lLCB0b2tlbiwgZGF0YVVwZGF0ZSkgPT4gQ29DQWN0b3IudXBkYXRlVG9rZW4oIHNjZW5lLCB0b2tlbiwgZGF0YVVwZGF0ZSkpO1xuXG5Ib29rcy5vbignY2hhdE1lc3NhZ2UnLCBDb0M3VXRpbGl0aWVzLlBhcnNlQ2hhdEVudHJ5KVxuLy8gSG9va3Mub24oJ3ByZUNyZWF0ZVRva2VuJywgKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSA9PiBDb0NBY3Rvci5wcmVDcmVhdGVUb2tlbiggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkpXG4vLyBIb29rcy5vbignY3JlYXRlVG9rZW4nLCAoIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpID0+IENvQ0FjdG9yLnByZUNyZWF0ZVRva2VuKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSlcbi8vIEhvb2tzLm9uKFwicmVuZGVyQ2hhdExvZ1wiLCAoYXBwLCBodG1sLCBkYXRhKSA9PiBDb0M3SXRlbS5jaGF0TGlzdGVuZXJzKGh0bWwpKTtcblxuSG9va3Mub24oJ2dldFNjZW5lQ29udHJvbEJ1dHRvbnMnLCAoLyogY29udHJvbHMgKi8pID0+IHtcbiAgLy8gaWYoIGdhbWUudXNlci5pc0dNKXtcbiAgLy8gIGxldCBncm91cCA9IGNvbnRyb2xzLmZpbmQoYiA9PiBiLm5hbWUgPT0gJ3Rva2VuJyk7XG4gIC8vICBncm91cC50b29scy5wdXNoKHtcbiAgLy8gICAgdG9nZ2xlOiB0cnVlLFxuICAvLyAgICBpY29uIDogJ2ZhcyBmYS1hbmdsZS1kb3VibGUtdXAnLFxuICAvLyAgICBuYW1lOiAnZGV2cGhhc2UnLFxuICAvLyAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpLFxuICAvLyAgICB0aXRsZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJyk/IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuRGV2UGhhc2VFbmFibGVkJyk6IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuRGV2UGhhc2VEaXNhYmxlZCcpLFxuICAvLyAgICBvbkNsaWNrIDphc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZURldlBoYXNlKClcbiAgLy8gIH0pO1xuICAvLyAgZ3JvdXAudG9vbHMucHVzaCh7XG4gIC8vICAgIHRvZ2dsZTogdHJ1ZSxcbiAgLy8gICAgaWNvbiA6ICdmYXMgZmFzIGZhLXVzZXItZWRpdCcsXG4gIC8vICAgIG5hbWU6ICdjaGFyY3JlYXRlJyxcbiAgLy8gICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJyksXG4gIC8vICAgIHRpdGxlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJyk/IGdhbWUuaTE4bi5sb2NhbGl6ZSggJ0NvQzcuQ2hhckNyZWF0aW9uRW5hYmxlZCcpOiBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkNoYXJDcmVhdGlvbkRpc2FibGVkJyksXG4gIC8vICAgIG9uQ2xpY2sgOmFzeW5jICgpID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlQ2hhckNyZWF0aW9uKClcbiAgLy8gIH0pO1xuICAvLyB9XG59KVxuXG4vLyBIb29rcy5vbigncmVuZGVyU2NlbmVDb250cm9scycsICgpID0+IENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpKTtcbi8vIEhvb2tzLm9uKCdyZW5kZXJTY2VuZU5hdmlnYXRpb24nLCAoKSA9PiBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKSk7XG5Ib29rcy5vbigncmVuZGVySXRlbVNoZWV0JywgQ29DN1BhcnNlci5QYXJzZVNoZWV0Q29udGVudClcbkhvb2tzLm9uKCdyZW5kZXJKb3VybmFsUGFnZVNoZWV0JywgQ29DN1BhcnNlci5QYXJzZVNoZWV0Q29udGVudClcbkhvb2tzLm9uKCdyZW5kZXJBY3RvclNoZWV0JywgQ29DN1BhcnNlci5QYXJzZVNoZWV0Q29udGVudClcbi8vIFNoZWV0IGNzcyBvcHRpb25zXG4vLyBIb29rcy5vbigncmVuZGVyQ29DN0NoYXJhY3RlclNoZWV0JywgQ29DN0NoYXJhY3RlclNoZWV0LnJlbmRlclNoZWV0KTtcbkhvb2tzLm9uKCdyZW5kZXJBY3RvclNoZWV0JywgQ29DN0NoYXJhY3RlclNoZWV0LnJlbmRlclNoZWV0KVxuSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldC5yZW5kZXJTaGVldClcblxuLy8gSG9va3Mub24oJ2Ryb3BDYW52YXNEYXRhJywgQ29DN1BhcnNlci5vbkRyb3BTb21ldGhpbmcpO1xuSG9va3Mub24oJ2dldFNjZW5lQ29udHJvbEJ1dHRvbnMnLCBDb0M3TWVudS5nZXRCdXR0b25zKVxuSG9va3Mub24oJ3JlbmRlclNjZW5lQ29udHJvbHMnLCBDb0M3TWVudS5yZW5kZXJDb250cm9scylcblxuSG9va3Mub24oJ2Ryb3BDYW52YXNEYXRhJywgQ29DN0NhbnZhcy5vbkRyb3BTb21ldGhpbmcpXG5cbkhvb2tzLm9uKCdkcm9wQWN0b3JTaGVldERhdGEnLCBEcm9wQWN0b3JTaGVldERhdGEpXG5cbmZ1bmN0aW9uIGFjdGl2YXRlR2xvYmFsTGlzdGVuZXIgKCkge1xuICBjb25zdCBib2R5ID0gJCgnYm9keScpXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgQ29DN0NvbnRleHRNZW51LmNsb3NlQWxsKVxuICBib2R5Lm9uKCdjbGljaycsICdhLmNvYzctaW5saW5lLWNoZWNrJywgQ29DN0NoZWNrLl9vbkNsaWNrSW5saW5lUm9sbClcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgX29uTGVmdENsaWNrKVxufVxuXG5mdW5jdGlvbiBfb25MZWZ0Q2xpY2sgKGV2ZW50KSB7XG4gIHJldHVybiBldmVudC5zaGlmdEtleVxufVxuXG5DT05GSUcudWkuc2V0dGluZ3MgPSBDb0M3U2V0dGluZ3NEaXJlY3RvcnlcbkNPTkZJRy51aS5jb21wZW5kaXVtID0gQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnlcbkNPTkZJRy51aS5hY3RvcnMgPSBDb0M3QWN0b3JEaXJlY3RvcnlcbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZ2FtZSwgSG9va3MsIFJvbGwsIHVpICovXG5cbi8qKlxuICpDYWxsb2ZDdGh1bGh1KDd0aEVkLikgRGVmaW5lIHlvdXIgb3duIGNvbW1hbmRzXG4gKkhlcmUsIHdlIHJlY2VpdmUgdGhlIGNoYXQgTWVzc2FnZXMgYW5kIGRldGVybWluZSBlYWNoIGNvbW1hbmQuXG4gKlsvQ0NdRGVmaW5lIGEgY29tbWFuZCB0byBqdWRnZSBhIG5vcm1hbCBkaWNlLlxuICpbL0NCUl0gQ29tbWFuZCB0byBkZWZpbmUgdGhlIGRlY2lzaW9uIG9uIGNvbWJpbmF0aW9uIHJvbGxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ2NoYXRNZXNzYWdlJywgKGh0bWwsIGNvbnRlbnQpID0+IHtcbiAgICAvLyBJJ20gY3VycmVudGx5IHVzaW5nIGl0IGZvciB0ZXN0aW5nIGJvbnVzIGRpY2UuXG4gICAgaWYgKGNvbnRlbnQubWF0Y2goL15cXC8oY2JyfGNjKS9pKSkge1xuICAgICAgLy8gRXh0cmFjdGluZyBudW1iZXJzIGZyb20gY29tYmluYXRpb24gcm9sbHNcbiAgICAgIGNvbnN0IGNvbW1hbmRzID0gY29udGVudC5tYXRjaCgvKFxcZCspL2cpXG4gICAgICBpZiAoY29tbWFuZHMpIHtcbiAgICAgICAgbmV3IFJvbGwoJzFkMTAwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pLnRoZW4ociA9PiB7XG4gICAgICAgICAgY29uc3QgcyA9IHIucmVzdWx0XG4gICAgICAgICAgY29uc3QgcmVzID0gY29tbWFuZHNcbiAgICAgICAgICAgIC5tYXAobSA9PiB7XG4gICAgICAgICAgICAgIGxldCByZXMgPSAnJ1xuICAgICAgICAgICAgICBpZiAocyA8PSAxKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgICAgICAgZWxzZSBpZiAocyA+PSAxMDApIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgICAgICAgICBlbHNlIGlmIChzIDw9IG0gLyA1KSB7XG4gICAgICAgICAgICAgICAgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzIDw9IG0gLyAyKSB7XG4gICAgICAgICAgICAgICAgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzIDw9IG0pIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHMgPj0gOTYpIHtcbiAgICAgICAgICAgICAgICBpZiAobSA8IDUwKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgICAgICAgICBlbHNlIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgICAgICAgfSBlbHNlIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgICAgICAgICAgLy8gUmVjb3JkIHRoZSBmaXJzdCByZXN1bHRzLlxuICAgICAgICAgICAgICByZXMgKz0gJyAnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbHVlJykgKyAnICcgKyBtXG4gICAgICAgICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbignIC8gJylcbiAgICAgICAgICByLnRvTWVzc2FnZSh7XG4gICAgICAgICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICAgICAgICBmbGF2b3I6IHJlc1xuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdJbmNvcnJlY3QgdXNhZ2Ugb2YgY29tbWFuZCcpXG4gICAgICB9XG4gICAgICAvLyByZXR1cm4gdG8gYXZvaWQgZXJyb3JzIGluIHRoZSBjb21tYW5kLlxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmV4cG9ydCBmdW5jdGlvbiBEcm9wQWN0b3JTaGVldERhdGEgKGFjdG9yLCBzaGVldCwgZGF0YSkge1xuICBpZiAoZGF0YS50eXBlID09PSAnSXRlbScgJiYgZGF0YS5hY3RvcklkKSB7XG4gICAgaWYgKGFjdG9yLmRhdGEuX2lkID09PSBkYXRhLmFjdG9ySWQpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBsZXQgYWN0b3JGcm9tID0gbnVsbFxuICAgIGlmIChkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkKSB7XG4gICAgICBhY3RvckZyb20gPSBnYW1lLnNjZW5lcy5nZXQoZGF0YS5zY2VuZUlkKS50b2tlbnMuZ2V0KGRhdGEudG9rZW5JZCkuYWN0b3JcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0b3JGcm9tID0gZ2FtZS5hY3RvcnMuZ2V0KGRhdGEuYWN0b3JJZClcbiAgICB9XG4gICAgc3dpdGNoIChhY3Rvci5kYXRhLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NoYXJhY3Rlcic6XG4gICAgICBjYXNlICducGMnOlxuICAgICAgY2FzZSAnY3JlYXR1cmUnOlxuICAgICAgICBpZiAoIVsnY2hhc2UnXS5pbmNsdWRlcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAndmVoaWNsZSc6XG4gICAgICAgIHJldHVyblxuICAgICAgY2FzZSAnY29udGFpbmVyJzpcbiAgICAgICAgaWYgKCFbJ2Jvb2snLCAnaXRlbScsICdzcGVsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhkYXRhLmRhdGEudHlwZSkpIHtcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoYWN0b3JGcm9tKSB7XG4gICAgICBhY3RvckZyb20uZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YS5kYXRhLl9pZF0pXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiQ09DNyIsInN0YW5kYXJkIiwibW9kZXJuIiwibW9kZXJuUHVscCIsInB1bHAiLCJkb3duRGFya2VyVHJhaWxzIiwiZG93bkRhcmtlclRyYWlsc1B1bHAiLCJkYXJrQWdlcyIsImRhcmtBZ2VzUHVscCIsInJlZ2VuY3kiLCJyZWdlbmN5UHVscCIsImdhc0xpZ2h0IiwiaW52aWN0dXMiLCJkZWNpbWFsTGVmdCIsImRlY2ltYWxSaWdodCIsImludGVnZXJMZWZ0IiwiaW50ZWdlclJpZ2h0IiwibHNkIiwicm9tYW4iLCJub25lIiwiYXNzZXMiLCJzZXN0ZXJ0aWkiLCJxdWluYXJpaSIsImRlbmFyaWkiLCJkIiwicyIsInZhbHVlIiwibXVsdGlwbGllciIsIm5hbWUiLCJmaWx0ZXIiLCJzdHIiLCJjb24iLCJzaXoiLCJkZXgiLCJhcHAiLCJpbnQiLCJwb3ciLCJlZHUiLCJub2FkanVzdG1lbnRzIiwibm94cGdhaW4iLCJzcGVjaWFsIiwicmFyaXR5IiwicHVzaCIsImNvbWJhdCIsImZpZ2h0aW5nIiwiZmlyZWFybSIsInJlcXVpcmVzbmFtZSIsImtlZXBiYXNldmFsdWUiLCJwaWNrbmFtZW9ubHkiLCJvbmx5b25lIiwibWVsZWUiLCJybmdkIiwibW52ciIsInRocm93biIsInNob3RndW4iLCJkYnJsIiwiaW1wbCIsImJyc3QiLCJhdXRvIiwiYWhkYiIsImFkZGIiLCJzbG50Iiwic3BjbCIsIm1vbnQiLCJibHN0Iiwic3R1biIsInJhcmUiLCJidXJuIiwiY2FsbCIsImRpc21pc3MiLCJjb250YWN0Iiwic3VtbW9uIiwiYmluZCIsImVuY2hhbnRtZW50IiwiZ2F0ZSIsIm15dGhvcyIsIm9jY3VsdCIsIm90aGVyIiwicGh5c2ljYWwiLCJtZW50YWwiLCJtaXNjZWxsYW5lb3VzIiwiYmFzaWMiLCJpbnNhbmUiLCJtYW5pYSIsInBob2JpYSIsImNsYXNzaWMiLCJsb3ZlY3JhZnRpYW4iLCJmb3JtdWxhIiwiYWN0b3IiLCJhY3RvcnNoZWV0Iiwic3RhdHVzIiwidGVtcG9JbnNhbmUiLCJpbmRlZkluc2FuZSIsInVuY29uc2Npb3VzIiwiY3JpdGljYWxXb3VuZHMiLCJkeWluZyIsInByb25lIiwiZGVhZCIsIm5ld0Jvb2tOYW1lIiwibmV3U2tpbGxOYW1lIiwibmV3U3BlbGxOYW1lIiwibmV3SXRlbU5hbWUiLCJuZXdXZWFwb25OYW1lIiwiY3JlYXR1cmVGaWdodGluZ1NraWxsIiwiZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUiLCJmaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lIiwiY29tYmF0Q2FyZHMiLCJmaWdodEJhY2siLCJkb2RnZSIsIm1hbmV1dmVyIiwibm9SZXNwb25zZSIsIkNvQzdEaWNlIiwic3RhdGljIiwibW9kaWYiLCJyb2xsTW9kZSIsImhpZGVEaWNlIiwicm9sbCIsImFsdGVybmF0aXZlRGljZSIsImdhbWUiLCJtb2R1bGVzIiwiZ2V0IiwiYWN0aXZlIiwic2V0dGluZ3MiLCJDb0M3IiwiZGV2IiwiZGljZSIsImFsd2F5c0NyaXQiLCJSb2xsIiwiZnJvbURhdGEiLCJjcml0MDEiLCJhbHdheXNGdW1ibGUiLCJmdW1ibGU5OSIsInJlcGVhdCIsIk1hdGgiLCJhYnMiLCJhc3luYyIsInJlc3VsdCIsInVuaXQiLCJ0b3RhbCIsInJlc3VsdHMiLCJ0ZW5zIiwiQ09ORklHIiwiRGljZSIsInRlcm1zIiwidCIsImluY2x1ZGVzIiwibWF4IiwibGVuZ3RoIiwibWluIiwic3luY0RpY2UiLCJjaGF0RGF0YSIsIndoaXNwZXIiLCJibGluZCIsIkNoYXRNZXNzYWdlIiwiYXBwbHlSb2xsTW9kZSIsImRpY2UzZCIsInNob3dGb3JSb2xsIiwidXNlciIsIm9wdGlvbnMiLCJwb29sIiwia2V5cyIsIk9iamVjdCIsIm1hcCIsInYiLCJwYXJzZUludCIsInBlbmFsdHlEaWNlIiwiYm9udXNEaWNlIiwiaGFzRFNOIiwiam9pbiIsImdyb3VwcyIsImJhc2VEaWUiLCJiYXNlU2V0Iiwib3V0cHV0Iiwia2V5IiwibW9kaWZpZXIiLCJvZmZzZXQiLCJjbGFzcyIsImV2YWx1YXRlZCIsIm51bWJlciIsImZhY2VzIiwibW9kaWZpZXJzIiwib3BlcmF0b3IiLCJDb0M3Q29udGVudExpbmtEaWFsb2ciLCJGb3JtQXBwbGljYXRpb24iLCJkZWZhdWx0T3B0aW9ucyIsIm1lcmdlT2JqZWN0Iiwic3VwZXIiLCJpZCIsImNsYXNzZXMiLCJ0aXRsZSIsImkxOG4iLCJsb2NhbGl6ZSIsImRyYWdEcm9wIiwiZHJhZ1NlbGVjdG9yIiwiZHJvcFNlbGVjdG9yIiwidGVtcGxhdGUiLCJjbG9zZU9uU3VibWl0Iiwid2lkdGgiLCJoZWlnaHQiLCJ0YWJzIiwibmF2U2VsZWN0b3IiLCJjb250ZW50U2VsZWN0b3IiLCJpbml0aWFsIiwic2hlZXREYXRhIiwiZ2V0RGF0YSIsImNoZWNrVHlwZSIsIkNvQzdMaW5rIiwiQ0hFQ0tfVFlQRSIsIkNIRUNLIiwibGFiZWwiLCJTQU5MT1NTIiwiSVRFTSIsIkVGRkVDVCIsImxpbmtUeXBlIiwiTElOS19UWVBFIiwiQ0hBUkFDVEVSSVNUSUMiLCJBVFRSSUJVVEUiLCJTS0lMTCIsImF0dHJpYnV0ZVR5cGUiLCJlZmZlY3RNb2RlcyIsImVudHJpZXMiLCJDT05TVCIsIkFDVElWRV9FRkZFQ1RfTU9ERVMiLCJyZWR1Y2UiLCJvYmoiLCJlIiwiY2hhcmFjdGVyaXN0aWNUeXBlIiwiQ29DQWN0b3IiLCJnZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24iLCJsaW5rIiwib2JqZWN0IiwiZnJvbUdhbWUiLCJpc0l0ZW1DaGVjayIsImlzU2tpbGxDaGVjayIsImZyb21EaXJlY3RvcnkiLCJoYXNJRCIsImZyb21Db21wZW5kaXVtIiwiaXNTZXRGcm9tR2FtZSIsImRpZmZpY3VsdHlMZXZlbCIsIkNvQzdDaGVjayIsImFjdG9yTmFtZXMiLCJhY3RvcnMiLCJhIiwiYWN0aXZhdGVMaXN0ZW5lcnMiLCJodG1sIiwiZmluZCIsImNoYW5nZSIsInRoaXMiLCJfb25DaGFuZ2VTdWJtaXQiLCJjbGljayIsIl9vbkVmZmVjdENvbnRyb2wiLCJldmVudCIsImN1cnJlbnRUYXJnZXQiLCJfb25TdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsImJ1dHRvbiIsImRhdGFzZXQiLCJhY3Rpb24iLCJfYWRkRWZmZWN0Q2hhbmdlIiwiY2xvc2VzdCIsInJlbW92ZSIsImlkeCIsImVmZmVjdCIsImNoYW5nZXMiLCJzdWJtaXQiLCJwcmV2ZW50Q2xvc2UiLCJ1cGRhdGVEYXRhIiwibW9kZSIsIkFERCIsImZvcm1EYXRhIiwiaGFzRWZmZWN0IiwiZHVyYXRpb24iLCJzZXRWYWx1ZSIsImNoZWNrTmFtZSIsImljb24iLCJ0aW50IiwiZGlzYWJsZWQiLCJzZWNvbmRzIiwicm91bmRzIiwidHVybnMiLCJtYXRjaCIsInRhcmdldCIsInR5cGUiLCJzdWJtaXR0ZXIiLCJDb0M3VXRpbGl0aWVzIiwiY29weVRvQ2xpcGJvYXJkIiwidG9DaGF0TWVzc2FnZSIsInRvV2hpc3Blck1lc3NhZ2UiLCJjYW52YXMiLCJ0b2tlbnMiLCJjb250cm9sbGVkIiwidWkiLCJub3RpZmljYXRpb25zIiwid2FybiIsIm93bmVycyIsInJlbmRlciIsImRhdGFTdHJpbmciLCJkYXRhVHJhbnNmZXIiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwic2V0TGluayIsImZyb21Ecm9wRGF0YSIsImRvY3VtZW50TmFtZSIsImRhdGFMaXN0IiwiZ2V0RGF0YUZyb21Ecm9wRXZlbnQiLCJwYWNrIiwiZGlmZmljdWx0eSIsInJlZ3VsYXIiLCJoYXNNb2RpZmllcnMiLCJkaXNwbGF5TmFtZSIsImhhc0xhYmVsIiwiaGFzSWNvbiIsImxpbmtEYXRhIiwib3B0aW9uIiwiZGlhbG9nIiwiY3JlYXRlSW5saW5lUm9sbCIsImNscyIsImVzY2FwZSIsInN0cmluZ2lmeSIsImVyciIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImsiLCJpbm5lckhUTUwiLCJpc0N0cmxLZXkiLCJtZXRhS2V5IiwiY3RybEtleSIsImtleUNvZGUiLCJjaGF0SGVscGVyIiwic3RyaW5nIiwicmVwbGFjZSIsInRvVXBwZXJDYXNlIiwibWVzc2FnZSIsIm1lc3NhZ2VEYXRhIiwiZmxhdm9yIiwic3BlYWtlciIsImdldFNwZWFrZXIiLCJDSEFUX01FU1NBR0VfVFlQRVMiLCJXSElTUEVSIiwiUk9MTCIsIkRJQ0VfUk9MTF9NT0RFUyIsIlNFTEYiLCJjb250ZW50IiwiY3JlYXRlIiwidGhlbiIsIm1zZyIsInRvTG93ZXJDYXNlIiwiaXNEb2N1bWVudFV1aWQiLCJpc0RvY3VtZW50VXVpZFBhY2siLCJmcm9tVXVpZCIsIlNmcm9tVXVpZCIsInNjZW5lSWQiLCJ0b2tlbklkIiwic3BsaXQiLCJ0b2tlbiIsImdldFRva2VuRnJvbUtleSIsImFjdG9yS2V5IiwiZ2V0QWN0b3JGcm9tS2V5Iiwic2NlbmUiLCJhbGlhcyIsImVsZW1lbnQiLCJvYmplY3ROYW1lIiwicHJvcCIsInN0YXJ0c1dpdGgiLCJhdHRhY2hPYmplY3RUb0VsZW1lbnQiLCJkZXNlcmlhbGl6ZSIsInNsaWNlIiwib2JqUHJvcCIsImluZGV4T2YiLCJvYmpOYW1lIiwic3Vic3RyaW5nIiwiTnVtYmVyIiwidG9TdHJpbmciLCJ0b2tlbkRvYyIsInNjZW5lcyIsInRva2VuRGF0YSIsImdldEVtYmVkZGVkRG9jdW1lbnQiLCJUb2tlbiIsImR1cGxpY2F0ZSIsImdldEFjdG9yVG9rZW4iLCJwcm90b3R5cGVUb2tlbiIsInRleHR1cmUiLCJzcmMiLCJpbWciLCJzdGFydFRva2VuIiwiZW5kVG9rZW4iLCJjZW50ZXIiLCJkaXN0YW5jZSIsImdyaWRVbml0IiwiZ3JpZCIsInVuaXRzIiwicmF5IiwiUmF5Iiwic2VnbWVudCIsInNpemUiLCJtZWFzdXJlRGlzdGFuY2VzIiwiZ3JpZFNwYWNlcyIsImVsZXZhdGlvbiIsInNxcnQiLCJDb0M3Um9sbCIsImNhcmQiLCJyb2xsRGl2IiwicXVlcnlTZWxlY3RvciIsImdldE9iamVjdEZyb21FbGVtZW50IiwicmVzdWx0VHlwZSIsInN1Y2Nlc3NMZXZlbCIsImZvcm1hdCIsImhhcmQiLCJleHRyZW1lIiwiY3JpdGljYWwiLCJmdW1ibGUiLCJmYWlsdXJlIiwiaXRlbSIsIml0ZW1JZCIsIml0ZW1zIiwic2tpbGwiLCJza2lsbElkIiwic2hvd0RpY2VSb2xsIiwiZGljZVJlc3VsdHMiLCJkaWVSZXN1bHQiLCJkaWNlcyIsImRpY2VEYXRhIiwic2hvdyIsImhhc0JvbnVzIiwiZGljZU1vZGlmaWVyIiwiYm9udXMiLCJib251c1R5cGUiLCJ0ZW5EaWNlIiwicXVlcnlTZWxlY3RvckFsbCIsImRpZSIsInNlbGVjdGVkIiwiaXNNYXgiLCJpc01pbiIsInVuaXREaWUiLCJpbmNyZWFzZVN1Y2Nlc3MiLCJpc2wiLCJuZXdTdWNjZXNMZXZlbCIsImx1Y2tOZWVkZWQiLCJsdWNrTmVlZGVkVHh0IiwibHVja05lZWRlZFZhbHVlIiwiY2hlY2siLCJyb2xsVHlwZSIsInNpZGUiLCJyZWZNZXNzYWdlSWQiLCJyZWZlcmVuY2VNZXNzYWdlSWQiLCJkaWNlTW9kIiwicmF3VmFsdWUiLCJpc0Z1bWJsZSIsImlzQ3JpdGljYWwiLCJjaGFyYWN0ZXJpc3RpYyIsInRva2VuS2V5IiwiaXNUb2tlbiIsImFjdG9ySWQiLCJodG1sRWxlbWVudCIsImdldEZyb21DaGVjayIsImF0dGFjaFRvRWxlbWVudCIsIkNvQzdEYW1hZ2UiLCJkYW1hZ2VTdHJpbmciLCJkYW1hZ2UiLCJyb2xscyIsInIiLCJSb2xsRGlhbG9nIiwidW5rbm93biIsInVua25vd25EaWZmaWN1bHR5RGVmYXVsdCIsImFsbG93RmxhdERpY2VNb2RpZmllciIsImRpc2FibGVGbGF0RGljZU1vZGlmaWVyIiwiYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJkaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyIiwiaGlkZURpZmZpY3VsdHkiLCJjYXJkVHlwZSIsImZvcmNlZENhcmRUeXBlIiwiY2FyZFR5cGVzIiwiQ29DN0NoYXRNZXNzYWdlIiwicmVuZGVyVGVtcGxhdGUiLCJQcm9taXNlIiwicmVzb2x2ZSIsImRsZyIsIkRpYWxvZyIsImJ1dHRvbnMiLCJjYWxsYmFjayIsIkZvcm1EYXRhIiwiZGVmYXVsdCIsImNsb3NlIiwiUm9sbENhcmQiLCJjb25zdHJ1Y3RvciIsImluaXRpYXRvciIsIm1lc3NhZ2VJZCIsIm1lc3NhZ2VzIiwiZnJvbU1lc3NhZ2UiLCJjYXJkRWxlbWVudCIsIiQiLCJmcm9tSFRNTENhcmRFbGVtZW50IiwiY2FyZERhdGEiLCJ1bmVzY2FwZSIsImFzc2lnbiIsImluZGV4Iiwicm9sbGVkIiwiX2h0bWxSb2xsIiwiZ2V0SHRtbFJvbGwiLCJzcGFuIiwiY29udGFpbnMiLCJpc0dNIiwiZnJvbU1lc3NhZ2VJZCIsImZsYWciLCJ0b2dnbGUiLCJiIiwidW5zZXRGbGFnIiwic2V0RmxhZyIsInRvZ2dsZUZsYWciLCJ1cGRhdGVDaGF0Q2FyZCIsImNoYXQiLCJjb2xsZWN0aW9uIiwiZGVmYXVsdENvbmZpZyIsImdldEZsYWciLCJ0aW1lc3RhbXAiLCJEYXRlIiwiX3JvbGxNb2RlIiwicHJvY2VzcyIsInNvY2tldCIsImVtaXQiLCJjb25maWciLCJodG1sQ2FyZEVsZW1lbnQiLCJvdXRlckhUTUwiLCJmbGFncyIsInN0YXRlIiwiZ2V0V2hpc3BlclJlY2lwaWVudHMiLCJjb21wdXRlIiwicGFyc2VIVE1MIiwiY2hhdE1lc3NhZ2UiLCJjbG9zZWQiLCJ1cGRhdGUiLCJ1cGRhdGVNZXNzYWdlIiwidG9NZXNzYWdlIiwidXBkYXRlUm9sbCIsImZyb21HTSIsInJhbmsiLCJhZGRSb2xsRGF0YSIsImFkZFJvbGwiLCJyZW1vdmVSb2xsIiwic3BsaWNlIiwiZmxhZ05hbWUiLCJfbWVzc2FnZSIsIl9tZXNzYWdlSWQiLCJ4IiwiZXhjbHVkZSIsImV4Y2x1ZGVTdGFydFdpdGgiLCJ3aW5uZXJzIiwid2lubmVyIiwibG9vc2VycyIsImxvb3NlciIsImhhc1dpbm5lciIsImlzS2VlcGVyIiwiQ29tYmluZWRDaGVja0NhcmQiLCJvbiIsIl9vblRvZ2dsZSIsIl9vbkNsaWNrIiwic3VjY2Vzc0NvdW50IiwiY291bnQiLCJwYXNzZWQiLCJtYWluQWN0b3JLZXkiLCJ1bmRlZmluZWQiLCJzdWNjZXNzIiwiYW55IiwiYWxsIiwiY2hlY2tHTUluaXRpYXRvciIsInVzZXJzIiwiX3BlcmZvcm0iLCJfcm9sbCIsInNpbGVudCIsImhpZGVTdWNjZXNzIiwiYXNzaWduUm9sbCIsImxpIiwiY2xvc2VDYXJkIiwiaXNOYU4iLCJjb21iaW5lZFJvbGwiLCJBdWRpb0hlbHBlciIsInBsYXkiLCJzb3VuZHMiLCJhbHRlciIsIkpTT05Sb2xsRGF0YSIsImZsYXREaWNlTW9kaWZpZXIiLCJmbGF0VGhyZXNob2xkTW9kaWZpZXIiLCJpIiwiaGlkZURpY2VSZXN1bHQiLCJJbnRlcmFjdGl2ZUNoYXRDYXJkIiwiX29wdGlvbnMiLCJjc3NDbGFzc2VzIiwib3B0aW9ubmFsQ2hhdERhdGEiLCJjYXJkQ2xhc3MiLCJfb25CdXR0b24iLCJfb25LZXkiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiY2FyZHMiLCJ0eXBlZENhcmQiLCJhc3NpZ25PYmplY3QiLCJfdXBkYXRlIiwiZm9ybXMiLCJ1cGRhdGVzIiwiZm9ybSIsIkZvcm1EYXRhRXh0ZW5kZWQiLCJ0b09iamVjdCIsImRpZmZPYmplY3QiLCJleHBhbmRPYmplY3QiLCJkaXNwbGF5QWN0b3JPbkNhcmQiLCJpc0JsaW5kIiwiX2lzQmxpbmQiLCJ3ZWFwb24iLCJ0YXJnZXRlZFRva2VucyIsInRhcmdldHMiLCJ0YXJnZXRUb2tlbiIsInRhcmdldEFjdG9yIiwiaXNUYXJnZXRPd25lciIsImlzT3duZXIiLCJfdGFyZ2V0VG9rZW4iLCJfdGFyZ2V0S2V5IiwicG9wIiwiX3RhcmdldEFjdG9yIiwidGFyZ2V0S2V5IiwiaGFzVGFyZ2V0Iiwic2tpbGxzIiwiZ2V0V2VhcG9uU2tpbGxzIiwidGFyZ2V0SW1nIiwiZ2V0QWN0b3JJbWdGcm9tS2V5IiwidGFyZ2V0TmFtZSIsImFjdG9ySW1nIiwiRGFtYWdlQ2FyZCIsImNvbmNhdCIsImRhbWFnZVJvbGwiLCJpbXBhbGUiLCJfaW1wYWxlIiwiaXNEYW1hZ2VGb3JtdWxhIiwiZGFtYWdlRm9ybXVsYSIsInZhbGlkYXRlIiwiaXNEYW1hZ2VOdW1iZXIiLCJpc0FybW9yRm9ydWxhIiwiYXJtb3IiLCJ0b3RhbERhbWFnZVN0cmluZyIsImlnbm9yZUFybW9yIiwibm9EYW1hZ2UiLCJmYXN0Rm9yd2FyZCIsInJvbGxEYW1hZ2UiLCJoYXJkcm9sbGVkIiwiZGFtYWdlSW5mbGljdGVkIiwiZGVhbERhbWFnZSIsIl9odG1sSW5saW5lUm9sbCIsImV2YWx1YXRlIiwic2hvd1JvbGxEaWNlM2QiLCJyb2xsQXJtb3IiLCJlcnJvciIsInNlbGVjdGVkUGxheWVycyIsIm9uZSIsImNvbmZpcm1EYW1hZ2UiLCJ0d28iLCJyYW5nZSIsImluY2x1ZXMiLCJzeXN0ZW0iLCJkYiIsInRyaW0iLCJwcm9wZXJ0aWVzIiwibWF4RGFtYWdlIiwibWF4aW1pemUiLCJyb2xsU3RyaW5nIiwiX2FybW9yIiwiYXR0cmlicyIsIk9wcG9zZWRDaGVja0NhcmQiLCJhdHRhY2tlclJvbGwiLCJhdHRhY2tlciIsImRlZmVuZGVyUm9sbCIsImRlZmVuZGVyIiwiZGVmZW5kZXJJc0RvZGdpbmciLCJkb2RnZVNraWxsIiwiYWR2YW50YWdlQXR0YWNrZXIiLCJfYWEiLCJ3aW5uZXJSb2xsc0RhbWFnZSIsIl9hZCIsImFkdmFudGFnZURlZmVuZGVyIiwiaXNUaWUiLCJ3aW5uZXJDb3VudCIsIm5lZWRzVGllQnJlYWtlciIsImlzQXR0YWNrTWFuZXV2ZXIiLCJyZXN1bHRUZXh0IiwiZGFtYWdlQ2hhdENhcmQiLCJpc0V4dHJlbWVTdWNjZXNzIiwic2hpZnRLZXkiLCJzb3J0IiwidGllIiwicmVzb2x2ZWQiLCJtb2RpZmllZFJlc3VsdCIsIndpbkNvdW50IiwiZmFpbGVkIiwiQ2hhdENhcmRBY3RvciIsInNwZWFrZXJEYXRhIiwicmVwbGFjZXIiLCJTYW5DaGVja0NhcmQiLCJzYW5EYXRhIiwiQm9vbGVhbiIsInNhblJlYXNvbiIsInNhbk1vZGlmaWVyIiwic2FuRGlmZmljdWx0eSIsInNhbkxvc3NTb3VyY2UiLCJpbnZvbHVudGFyeUFjdGlvbiIsInNhblJvbGxlZCIsInNhbkNoZWNrIiwiaXNGYWlsdXJlIiwic2FuTG9zc0Zvcm11bGEiLCJzYW5NYXgiLCJzYW5NaW4iLCJzYW5Mb3N0VG9SZWFzb24iLCJtYXhQb3NzaWJsZVNhbkxvc3MiLCJtYXhMb3NzVG9TYW5SZWFzb24iLCJtYXhTYW5Mb3NzIiwic2FuTG9zc1JlYXNvbkVuY291bnRlcmVkIiwiZmlyc3RFbmNvdW50ZXIiLCJteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkIiwiaXNBY3Rvckxvb3NpbmdTYW4iLCJoYXNUZW1wb0luc2FuZSIsImltbXVuZVRvQ3JlYXR1cmUiLCJib3V0RHVyYXRpb25UZXh0IiwiYm91dER1cmF0aW9uIiwiYm91dFJlYWxUaW1lIiwiYm91dFN1bW1hcnkiLCJ5b3VHYWluQ3RodWxodU15dGhvc1N0cmluZyIsIm15dGhvc0dhaW4iLCJrZWVwQ3JlYXR1cmVTYW5EYXRhIiwiZmluaXNoIiwiYXBwbHlTYW5Mb3NzIiwiYm91dFJlc3VsdCIsImVudGVyQm91dE9mTWFkbmVzcyIsImJvdXRPZk1hZG5lc3NSZXNvbHZlZCIsImJvdXRPZk1hZG5lc3NPdmVyIiwidHJpZ2dlckluc2FuaXR5IiwidW5zZXRDb25kaXRpb24iLCJjdGh1bGh1TXl0aG9zQXdhcmRlZCIsImFtb3VudEdhaW5lZCIsImV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5IiwiY3RodWxodU15dGhvc1NraWxsIiwib2xkVmFsdWUiLCJhZGp1c3RtZW50cyIsImV4cGVyaWVuY2UiLCJpc0J5cGFzc2VkIiwiYXR0cmlidXRlIiwiZm9yY2VEU04iLCJpbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCIsInNhbkxvc3NSb2xsZWQiLCJpZ25vcmVTYW5DaGVjayIsInNhbkxvc3MiLCJsaW1pdGVkTG9zc1RvQ3JlYXR1cmUiLCJtaW5pbWl6ZSIsImltbXVuZUFscmVhZHlJbkJvdXQiLCJzYW5Mb3NzQXBwbGllZCIsImludFJvbGxlZCIsImluc2FuaXR5Iiwic2FuTG9zc1JvbGwiLCJsb29zZVNhbiIsImFjdG9yTG9zdFNhbiIsInNhbiIsInBlcm1hbmVudGx5SW5zYW5lIiwiaGFzSW5kZWZJbnNhbmUiLCJzaGFrZW4iLCJpbnNhbml0eVRhYmxlUm9sbGVkIiwiZGFpbHlTYW5Mb3NzIiwiZGFpbHlTYW5MaW1pdCIsInRlbXBvcmFyeUluc2FuZSIsImluZGVmaW5pdGVseUluc2FuZSIsIm1lbW9yeVJlcHJlc3NlZCIsImludENoZWNrIiwiaW50RGlmZmljdWx0eSIsImludE1vZGlmaWVyIiwiYWxyZWFkeUluc2FuZSIsInNldENvbmRpdGlvbiIsInNldFJlYXNvblNhbkxvc3MiLCJfX2lubGluZVNhbkNoZWNrIiwiaW5saW5lQ2hlY2siLCJfX2lubGluZVNhbkxvc3NSb2xsIiwiX19pbmxpbmVJbnRDaGVjayIsImFyZ3MiLCJjaGF0Q2FyZCIsInNheSIsImh0bWxDYXJkIiwiZ2V0RnJvbUNhcmQiLCJzYW5DaGVja0NhcmREYXRhIiwic2FuQ2hlY2tDYXJkIiwiU2FuRGF0YURpYWxvZyIsIl90b2dnbGVJbnB1dCIsIlZhbGlkYXRlIiwiUk9MTF9UWVBFX0FUVFJJQlVURSIsIlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyIsIlJPTExfVFlQRV9DT01CQVQiLCJST0xMX1RZUEVfU0tJTEwiLCJST0xMX1RZUEVfRU5DT1VOVEVSIiwiQ0FSRF9UWVBFX0NPTUJJTkVEIiwiQ0FSRF9UWVBFX0dST1VQIiwiQ0FSRF9UWVBFX05PUk1BTCIsIkNBUkRfVFlQRV9PUFBPU0VEIiwiQ0FSRF9UWVBFX1NBTl9DSEVDSyIsIkNBUkRfVFlQRV9OT05FIiwic2VsZWN0Iiwic2tpbGxOYW1lIiwic2tpbGxJZHMiLCJnZXRTa2lsbHNCeU5hbWUiLCJjaGFyYWN0ZXJpc3RpY3MiLCJhbHRLZXkiLCJjcmVhdGVFbmNvdW50ZXIiLCJvcGVuTGlua1Rvb2wiLCJzZW5kVG9DaGF0Iiwic2VuZFRvQ2xpcGJvYXJkIiwiaXNDb21iYXQiLCJwcmV2ZW50U3RhbmRieSIsImRpYWxvZ09wdGlvbnMiLCJwYXJlbnRFbGVtZW50IiwiYXR0cmliIiwid2VhcG9uQWx0U2tpbGwiLCJ3ZWFwb25OYW1lIiwiaGFzUGxheWVyT3duZXIiLCJub3JtYWxpemVSZXF1ZXN0IiwiY3JlYXRlTGluayIsIml0ZW1Nb2RpZmllcnMiLCJ2YWx1ZXMiLCJmb3VuZHJ5SUQiLCJjcmVhdGVSb2xsIiwicnVuUm9sbCIsInNob3J0TmFtZSIsImNoZWNrUGFzc2VkIiwiY2hlY2tGYWlsbGVkIiwiaW5mb3MiLCJ1c2FnZSIsInByb21wdExhYmVsIiwic3RhbmRieSIsInJvbGxBdHRyaWJ1dGUiLCJyb2xsQ2hhcmFjdGVyaXN0aWMiLCJyb2xsZWRTdWNjZXNzTGV2ZWwiLCJzdWNjZXNzTGV2ZWxzIiwicmVndWxhclRocmVzaG9sZCIsImhhcmRUaHJlc2hvbGQiLCJleHRyZW1lVGhyZXNob2xkIiwiZGVueVB1c2giLCJkaXNwYXRjaCIsIkNvQzdDb25DaGVjayIsIl9hY3RvcklkIiwiaXNTdWNjZXNzIiwiaXNSb2xsZWQiLCJjb25DaGVjayIsImh0bWxDaGVjayIsImdldEZyb21FbGVtZW50Iiwicm9sbENvbiIsInJlcGxhY2VXaXRoIiwiZ2V0Q2hlY2tFbGVtZW50Iiwic3RheUFsaXZlIiwiYXBwbGllZCIsIlNraWxsU2VsZWN0RGlhbG9nIiwiX29uU2VsZWN0U2tpbGxDbGlja2VkIiwic3R5bGUiLCJkaXNwbGF5IiwiYWRkZWQiLCJpbm5lclRleHQiLCJvcHRpb25zQ291bnQiLCJQb2ludFNlbGVjdERpYWxvZyIsIl9vblNlbGVjdENoYXJhY3RlcmlzdGljIiwiX29uQnV0dG9uQ2xpY2tlZCIsIml0ZW1MaXN0Iiwib3B0aW9uYWwiLCJ0b2dnbGVDbGFzcyIsIkNoYXJhY1NlbGVjdERpYWxvZyIsIkNoYXJhY1JvbGxEaWFsb2ciLCJfb25DaGFuZ2VJbnB1dCIsIl9vblJvbGxDaGFyYWN0ZXJpc3RpYyIsIl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljIiwiX29uUmVzZXRDaGFyYWN0ZXJpc3RpYyIsImNoYXJhY0tleSIsImluY3JlYXNlQ2hhcmFjdGVyaXN0aWMiLCJkZWNyZWFzZUNoYXJhY3RlcmlzdGljIiwicmVzZXRDaGFyYWN0ZXJpc3RpYyIsImNoYXIiLCJjaGVja1RvdGFsIiwiX2VsZW1lbnQiLCJpbnB1dCIsImxpc3QiLCJwb2ludHMiLCJ2YWxpZGF0aW9uIiwiZW5hYmxlZCIsImVsIiwicG9pbnRzV2FybmluZyIsIlNraWxsU3BlY1NlbGVjdERpYWxvZyIsInNwZWNpYWxpemF0aW9uTmFtZSIsImJhc2VWYWx1ZSIsImhhc1NraWxscyIsImJhc2UiLCJzcGVjaWFsaXphdGlvbiIsIlNraWxsU3BlY2lhbGl6YXRpb25TZWxlY3REaWFsb2ciLCJfb25DbGlja1N1Ym1pdCIsIl9vblNlbGVjdENoYW5nZSIsInZhbCIsImFsbG93Q3VzdG9tIiwiZml4ZWRCYXNlVmFsdWUiLCJhbGxvd1NlbGVjdCIsIlNraWxsVmFsdWVEaWFsb2ciLCJDb0M3TWVsZWVSZXNvbHRpb24iLCJpbml0aWF0b3JNZXNzYWdlIiwidGFyZ2V0TWVzc2FnZSIsIkNvQzdNZWxlZVRhcmdldCIsImdldEZyb21NZXNzYWdlSWQiLCJDb0M3TWVsZWVJbml0aWF0b3IiLCJpbml0aWF0b3JUb2tlbiIsInJlc3VsdFN0cmluZyIsIndpbm5lckltZyIsIndpbm5lclRpdGxlIiwiY3JpdGljYWxEYW1hZ2UiLCJkb2N1bW1lbnQiLCJwYXJlbnRNZXNzYWdlSWQiLCJpbml0aWF0b3JLZXkiLCJvdXRudW1iZXJlZCIsInN1cnByaXNlZCIsImF1dG9TdWNjZXNzIiwiYWR2YW50YWdlIiwiZGlzYWR2YW50YWdlIiwiZG9kZ2luZyIsIm5vdFJlc3BvbmRpbmciLCJmaWdodGluZ0JhY2siLCJtYW5ldXZlcmluZyIsImFjdGlvblNlbGVjdGVkIiwiX2luaXRpYXRvcktleSIsIl9pbml0aWF0b3IiLCJtZWxlZUluaXRpYXRvciIsInB1Ymxpc2hVcGRhdGUiLCJjYW1lbEZsYWciLCJoeXBoZW5Ub0NhbWVsQ2FzZSIsImdtcyIsIm93bmVyc2hpcCIsIkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMiLCJPV05FUiIsInByb21wdCIsImluZm8iLCJ3ZWFwb25JZCIsInB1Ymxpc2giLCJpc1Vua29ud24iLCJyZXNvbHV0aW9uQ2FyZCIsInJlc29sdXRpb25NZXNzYWdlIiwicHJlQ3JlYXRlTWVzc2FnZSIsInJvbGxJY29ucyIsInJvbGxDb2xvciIsInJvbGxUaXRsZSIsInVwZ3JhZGVSb2xsIiwibHVja0Ftb3VudCIsIm5ld1N1Y2Nlc3NMZXZlbCIsIm9sZENhcmQiLCJzcGVuZEx1Y2siLCJsdWNrU3BlbnQiLCJwcm9jZXNzZWQiLCJkaWNlUm9sbHMiLCJyZXN1bERldGFpbHMiLCJkaWNlVG90YWwiLCJDb0M3Q2hhdCIsIkNvQzdSYW5nZUluaXRpYXRvciIsImNvdmVyIiwidGFyZ2V0Q2FyZCIsInNpbmdsZVNob3QiLCJtdWx0aXBsZVNob3RzIiwiYnVyc3QiLCJmdWxsQXV0byIsImFpbWVkIiwidG90YWxCdWxsZXRzRmlyZWQiLCJfdGFyZ2V0cyIsIkNvQzdSYW5nZVRhcmdldCIsImdldERpc3RhbmNlIiwicm91bmRlZERpc3RhbmNlIiwicm91bmQiLCJkaXN0YW5jZVVuaXQiLCJkaXN0SW5ZZCIsInRvWWFyZHMiLCJwb2ludEJsYW5rUmFuZ2UiLCJiYXNlUmFuZ2UiLCJsb25nUmFuZ2UiLCJleHRyZW1lUmFuZ2UiLCJvdXRPZlJhbmdlIiwibWFpbldlYXBvblNraWxsIiwibWFpbiIsImF1dG9XZWFwb25Ta2lsbCIsImFsdGVybmF0aXYiLCJhdXRvRmlyZSIsIm11bHRpVGFyZ2V0IiwiYWltaW5nIiwiX2FpbWluZyIsImdldEFjdG9yRmxhZyIsImFjdGl2ZVRhcmdldCIsInNob3RzIiwiX3Nob3RzIiwiY3VycmVudFNob3RSYW5rIiwiYWN0aXZlVGFyZ2V0U2hvdERpZmZpY3VsdHkiLCJzaG90RGlmZmljdWx0eSIsImRpZEFueVNob3RIaXQiLCJhbnlIaXQiLCJzdWNjZXNzZnVsSGl0cyIsImhpdHMiLCJoaXQiLCJzaG90Iiwic2hvdEZpcmVkIiwidG90YWxBbW1vIiwiZ2V0QnVsbGV0TGVmdCIsIm1heFNob3RzIiwidXNlc1BlclJvdW5kIiwiaWdub3JlQW1tbyIsImlnbm9yZVVzZXNQZXJSb3VuZCIsIm91dE9mQW1tbyIsIm91dE9mU2hvdHMiLCJ2b2xsZXlTaXplIiwiX3ZvbGxleVNpemUiLCJmbG9vciIsImlzVm9sbGV5TWluU2l6ZSIsImlzVm9sbGV5TWF4U2l6ZSIsImdldFRhcmdldEZyb21LZXkiLCJjYWxjVGFyZ2V0c0RpZmZpY3VsdHkiLCJub3JtYWwiLCJsb25nIiwiZGlmZmljdWx0eU5hbWUiLCJyZWxvYWQiLCJpbXBvc3NpYmxlIiwibGV2ZWwiLCJhZGRTaG90QXRDdXJyZW50VGFyZ2V0IiwiYWN0b3JOYW1lIiwiYnVsbGV0c1Nob3QiLCJ0cmFuc2l0QnVsbGV0cyIsImJ1bGxldHNTaG90VHJhbnNpdCIsInRyYW5zaXQiLCJidWxsZXRMZWZ0IiwicHJldmlvdXNTaG90Iiwid2VhcG9uTWFsZnVuY3Rpb24iLCJzaG9vdEF0VGFyZ2V0Iiwic2hvb3RCdWxsZXRzIiwiaGFzTWFsZnVuY3Rpb24iLCJidWxsZXRGaXJlZCIsImRldGFpbHMiLCJjaGFuZ2VWb2xsZXlTaXplIiwicGFzc1JvbGwiLCJyb2xsSW5kZXgiLCJ1cGdyYWRlaW5kZXgiLCJpbmNyZWFzZWRTdWNjZXNzIiwicmFuZ2VJbml0aWF0b3IiLCJjYXJkVGFyZ2V0cyIsImNhcmRTaG90cyIsImRhbWFnZVJvbGxzIiwiZHIiLCJoIiwiU3RyaW5nIiwiZGFtYWdlRGllIiwiZ2V0TWFpbkRpZSIsImNyaXRpY2FsRGFtYWdlRm9ybXVsYSIsImNyaXRpY2FsRGFtYWdlRGllIiwiaW1wYWxpbmdTaG90cyIsInN1Y2Nlc3NmdWxTaG90cyIsImRlYWx0IiwiZGFtYWdlUm9sbGVkIiwiZEluZGV4IiwidG90YWxUYWtlbiIsInRvdGFsQWJzb3JiZWQiLCJySW5kZXgiLCJkZWFsdEFtb3VudCIsInRha2VuIiwiYWJzb3JiZWQiLCJkYW1hZ2VEZWFsdCIsImluTWVsZWUiLCJiaWciLCJfYmlnIiwiYnVpbGQiLCJzbWFsbCIsIl9zbWFsbCIsImlzRmFzdCIsIm1vdiIsImZhc3QiLCJfZmFzdCIsIl9hY3RvciIsIl90b2tlbiIsInNpemVUZXh0Iiwic2l6ZUxhYmVsIiwiQ0hBVF9DT0M3X01FU1NBR0UiLCJwbGF5ZXJzIiwiR01TZWxmUm9sbCIsInJlbW92ZVdpc3BlclRhcmdldHMiLCJmYWtlUm9sbCIsIl9vbkNoYXRDYXJkQWN0aW9uIiwiX29uQ2hhdENhcmRUb2dnbGVDb250ZW50IiwiX29uQ2hhdENhcmRSYWRpb1N3aXRjaCIsIl9vbkNoYXRDYXJkVG9nZ2xlU3dpdGNoIiwiX29uQ2hhdENhcmRWb2xsZXlTaXplIiwiX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQiLCJfb25Ub2dnbGVTZWxlY3RlZCIsIl9vblRhcmdldFNlbGVjdCIsIl9vbk9wZW5BY3RvciIsImJpbmRFdmVudHNIYW5kbGVyIiwiX29uSW5saW5lIiwiYmluZExpc3Rlcm5lcnMiLCJzaGVldCIsInNjcm9sbEJvdHRvbSIsImNoZWNrUmV2ZWFsZWQiLCJyZXZlYWxDaGVjayIsImJpbmRMaXN0ZW5lcnMiLCJyZW1vdmVDbGFzcyIsIm1vdXNlbGVhdmUiLCJkZWZlbmRhbnRJZCIsImluaXRpYXRvcklkIiwidXBkYXRlQ29tYmF0Q2FyZFRhcmdldCIsInVzZXJPbmx5IiwiZ2V0QXR0cmlidXRlIiwiZ21Pbmx5Iiwiem9uZSIsInVzZXJWaXNpYmxlT25seSIsImVsZW0iLCJnbVZpc2libGVPbmx5IiwiaXNUcnVzdGVkIiwib3duZXJWaXNpYmxlT25seSIsIl9nZXRBY3RvckZyb21LZXkiLCJfZ2V0Q2hhdENhcmRBY3RvciIsIm93bmVyT25seSIsImdtU2VsZWN0T25seSIsImFjdGlvblR5cGVTdHJpbmciLCJ0YXJnZXRzU2VsZWN0b3IiLCJib3JkZXIiLCJ0YXJnZXRUb0Rpc3BsYXkiLCJ1cGRhdGVTZWxlY3RlZCIsImRyb3BEb3duQm94ZXMiLCJkcGRuQm94Iiwic2VsZWN0ZWRCb3giLCJhY3Rpb25UeXBlIiwiZGVmZW5kZXJDaG9pY2UiLCJza2lsbFZhbHVlIiwiaXRlbU5hbWUiLCJfY29sbGFwc2VJbmxpbmVSZXN1bHQiLCJfZXhwYW5kSW5saW5lUmVzdWx0Iiwib3B0aW9uTGlzdCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJwcm9wZXJ0eSIsInJhbmdlQ2FyZCIsInVwZGF0ZUNhcmRTd2l0Y2giLCJjaGFyYWN0ZXIiLCJvd25uZXIiLCJnZXRUb2tlbiIsIm1lc3NJZCIsIm9yaWdpbk1lc3NhZ2UiLCJtZWxlZUNhcmQiLCJyb2xsUmVzdWx0IiwidXBncmFkZUluZGV4IiwiZm9yY2VQYXNzIiwidXBncmFkZUNoZWNrIiwiZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlciIsIm5ld0NhcmQiLCJjbG9uZU5vZGUiLCJwdXNoZWRSb2xsIiwiZGVmZW5kZXJLZXkiLCJnZXRBY3RvckZyb21Ub2tlbiIsInJlc3BvbnNlVHlwZSIsInBlcmZvcm1Ta2lsbENoZWNrIiwicHVibGlzaENoZWNrUmVzdWx0IiwicHVibGlzaE5vUmVwb25zZVJlc3VsdCIsImRlYWxlciIsInJlc29sdmVDYXJkIiwiYW1vdW50IiwiYXBwZW5kIiwiZm9yY2VGYWlsIiwiaW5jcmVhc2VTdWNjZXNzTGV2ZWwiLCJkZWNyZWFzZVN1Y2Nlc3NMZXZlbCIsImNvbXB1dGVDaGVjayIsIm1ha2VQdWJsaWMiLCJmb3JjZVJvbGwiLCJmbGFnRm9yRGV2ZWxvcGVtZW50IiwiY2xlYXJTYW5Mb3NzUmVhc29uIiwicm9sbFNhbiIsImFkdmFuY2VTdGF0ZSIsInJvbGxTYW5Mb3NzIiwicm9sbEludCIsIkNvQzdzb2NrZXQiLCJleGVjdXRlQXNHTSIsIl9pZCIsInJvbGxEYW1hZ2VCdXR0b24iLCJBY3RvciIsImNvbnRleHQiLCJkb2N1bWVudENsYXNzZXMiLCJleHRlbmRlZCIsImluaXRpYWxpemUiLCJjcmVhdHVyZUluaXQiLCJwcmVwYXJlQmFzZURhdGEiLCJpdGVtSWRlbnRpZmllciIsImNvY2lkIiwiY29jaWRGbGFnIiwiZGFpbHlMaW1pdCIsIm9uZUZpZnRoU2FuaXR5IiwicmF3TW92IiwicmF3RGIiLCJyYXdCdWlsZCIsImN1cnJlbnQiLCJocCIsInByZXBhcmVFbWJlZGRlZERvY3VtZW50cyIsInByZXBhcmVEZXJpdmVkRGF0YSIsInJhd0hwTWF4IiwibXAiLCJyYXdNcE1heCIsInJhd1Nhbk1heCIsImZpbHRlck1hdHJpeCIsImVmZmVjdHMiLCJpc1N1cHByZXNzZWQiLCJjIiwiZm91bmRyeSIsInV0aWxzIiwicHJpb3JpdHkiLCJzZWxlY3RDaGFuZ2VzIiwiYXBwbHkiLCJocE1heCIsIm1wTWF4IiwiYWN0b3JMaW5rIiwiZGlzcG9zaXRpb24iLCJzaWdodCIsImNoZWNrVW5kZWZpbmVkQXV0byIsInJldHVybkRhdGEiLCJzaG9ydCIsImNyZWF0ZURhdGEiLCJoYXNDb25kaXRpb25TdGF0dXMiLCJnZXRUZW1wb0luc2FuZUR1cmF0aW9uVGV4dCIsImhhc0NvbmRpdGlvblZhbHVlIiwicG9ydHJhaXQiLCJyZWFsVGltZSIsImJvdXRPZk1hZG5lc3NUYWJsZUlkIiwiZGVzY3JpcHRpb24iLCJib3V0T2ZNYWRuZXNzVGFibGUiLCJ0YWJsZXMiLCJ0YWJsZVJvbGwiLCJUQUJMRV9SRVNVTFRfVFlQRVMiLCJET0NVTUVOVCIsImRvY3VtZW50SWQiLCJUZXh0RWRpdG9yIiwiZW5yaWNoSFRNTCIsIml0ZW1EYXRhIiwiY3JlYXRlRW1iZWRkZWREb2N1bWVudHMiLCJURVhUIiwidGV4dCIsInBhcnRzIiwiQ29DN0l0ZW0iLCJnZXROYW1lUGFydHNTcGVjIiwic2hvd1NoZWV0IiwiZW1wdHlTa2lsbCIsInJlbmRlclNoZWV0IiwiZmlyZWFybXMiLCJza2lsbERhdGEiLCJwZXJzb25hbCIsIm9jY3VwYXRpb24iLCJhcmNoZXR5cGUiLCJhdHRhY2siLCJ3cG5UeXBlIiwiY3JlYXRlZEF0dGFjayIsImNvbnNvbGUiLCJzZXRBY3RvckZsYWciLCJxdWFudGl0eSIsImdldEl0ZW1JZEJ5TmFtZSIsImNyZWF0ZUJvb2siLCJjcmVhdGVTcGVsbCIsImVtcHR5U3BlbGwiLCJjcmVhdGVTa2lsbCIsImNyZWF0ZUl0ZW0iLCJ3ZWFwb25Qcm9wZXJ0aWVzIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJiaW8iLCJiaW9ncmFwaHkiLCJ0ZXh0QXJlYSIsImFyZWFOYW1lIiwiZW1iZWRkZWROYW1lIiwiZGF0YUFycmF5IiwicHJvY2Vzc2VkRGF0YUFycmF5IiwiYmFzZUNhbGN1bGF0ZWQiLCJjYWxjdWxhdGVCYXNlIiwicGFyc2VDaGFyYWN0ZXJpc3RpY3MiLCJhZGRUaGlzIiwiaXNBbnlTcGVjIiwiaXNBbnlCdXROb3RGbGFnZ2VkIiwic2tpbGxMaXN0IiwiZ3JvdXAiLCJhcGkiLCJndWVzc0dyb3VwRnJvbURvY3VtZW50IiwiZnJvbUNvQ0lEUmVnZXhCZXN0IiwiY29jaWRSZWdFeHAiLCJSZWdFeHAiLCJxdW90ZVJlZ0V4cCIsImV4aXN0aW5nU2tpbGxzIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJmb3VuZCIsImZpbmRJbmRleCIsInNvcnRCeU5hbWVLZXkiLCJleGlzdGluZ0l0ZW0iLCJ1cGRhdGVFbWJlZGRlZERvY3VtZW50cyIsImdldE5hbWVXaXRob3V0U3BlYyIsImV4aXN0aW5nIiwibWFpblNraWxsIiwiYWRkSXRlbXMiLCJjcmVhdGVXZWFwb25Ta2lsbCIsInNlY29uZFNraWxsIiwiZW5hYmxlQ2hhcmFjdGVyaXNpdGljcyIsImdldENoYXJhY3RlcmlzdGljIiwibHVjayIsImVyYSIsImVyYXMiLCJleHBhbmRJdGVtQXJyYXkiLCJpdCIsIm90aGVyc0l0ZW1zIiwiYWRkVW5pcXVlSXRlbXMiLCJiYWNrc3RvcnkiLCJzZWN0aW9uTmFtZSIsImJpb1NlY3Rpb25zIiwiY3JlYXRlQmlvU2VjdGlvbiIsIm1vbmV0YXJ5Iiwic2V0VGltZW91dCIsIl9zdGF0ZSIsIkFwcGxpY2F0aW9uIiwiUkVOREVSX1NUQVRFUyIsIlJFTkRFUklORyIsIkhvb2tzIiwicmVzZXRBcmNoZXR5cGUiLCJjb25maXJtIiwieWVzIiwiZGVmYXVsdFllcyIsImNvcmVDaGFyYWMiLCJlbnRyeSIsImNvcmVDaGFyYWN0ZXJpc3RpY3MiLCJjaGFyYWMiLCJjaGFyRGlhbG9nRGF0YSIsImNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhIiwicmVzZXRPY2N1cGF0aW9uIiwiY3JlZGl0UmF0aW5nIiwiYWN0b3JDcmVkaXRSYXRpbmciLCJmaW5kQ29jSWRJbkxpc3QiLCJwb2ludHNEaWFsb2dEYXRhIiwib2NjdXBhdGlvblNraWxsUG9pbnRzIiwib3B0aW9uYWxDaGFyIiwiZGlhbG9nRGF0YSIsInNraWxsQ291bnQiLCJtZXJnZWQiLCJtZXJnZU9wdGlvbmFsU2tpbGxzIiwiY3JlZGl0UmF0aW5nU2tpbGwiLCJzZXRJdGVtRmxhZyIsImFyY2hldHlwZVBvaW50cyIsIm9jY3VwYXRpb25Qb2ludHMiLCJwZXJzb25hbFBvaW50cyIsImdldEl0ZW1zQnlOYW1lIiwiZ2V0Rmlyc3RTa2lsbEJ5Q29DSUQiLCJwYXJzZUZvcm11bGEiLCJwYXJzZWRGb3JtdWxhIiwicGFyc2VkIiwiZ2V0UHJvcGVydHkiLCJ0ZW1wbGF0ZXMiLCJjaGFyTmFtZSIsImF0dHJpYk5hbWUiLCJsY2siLCJ0cmlnZ2VyIiwiZXJhc2VPbGQiLCJvY2N1cGF0aW9uU2tpbGwiLCJnZXRJdGVtRmxhZyIsInVuc2V0SXRlbUZsYWciLCJkZWxldGUiLCJhcmNoZXR5cGVTa2lsbCIsInNldEx1Y2siLCJocEZyb21DaGFyYWN0ZXJpc3RpY3MiLCJtcEZyb21DaGFyYWN0ZXJpc3RpY3MiLCJnZXRSZWFzb25TYW5Mb3NzIiwic2FuaXR5TG9zc0V2ZW50cyIsInRvdGFsTG9zcyIsImltbXVuaXR5IiwibGVmdCIsInJpZ2h0IiwibG9jYWxlQ29tcGFyZSIsInNhbk1heEZvcm11bGEiLCJzYW5pdHlMb3NzRXZlbnQiLCJzZXRTYW4iLCJzYW5Mb3NzQ2hlY2tQYXNzZWQiLCJzYW5Mb3NzQ2hlY2tGYWlsbGVkIiwic2FuTG9zc01heCIsInNhbkxvc3NNaW4iLCJkYWlseUxvc3MiLCJjdGh1bGh1TXl0aG9zIiwib2NjdXBhdGlvblBvaW50c1NwZW50IiwiYXJjaGV0eXBlUG9pbnRzU3BlbnQiLCJib251c1BvaW50cyIsImV4cGVyaWVuY2VQb2ludHMiLCJwZXJzb25hbFBvaW50c1NwZW50IiwiaGFzRGV2ZWxvcG1lbnRQaGFzZSIsImRldmVsb3BlbWVudCIsIm9ubHlSdW5PbmNlUGVyU2Vzc2lvbiIsImxvc3MiLCJ1cGRhdGVkS2V5Iiwic2V0QXR0cmliQXV0byIsInN1bSIsImRpdmlzb3IiLCJhZ2UiLCJNT1YiLCJidWlsZEZyb21DaGFyYWN0ZXJpc3RpY3MiLCJkYkZyb21DaGFyYWN0ZXJpc3RpY3MiLCJtb3ZGcm9tQ2hhcmFjdGVyaXN0aWNzIiwibG9ja2VkIiwiZ2V0SXRlbXNGcm9tTmFtZSIsImZsYWdWYWx1ZSIsImF0dHJpYnV0ZU5hbWUiLCJtaXNzaW5nIiwiY29udmVydERpZmZpY3VsdHkiLCJjaGFyYWN0ZXJpc3RpY05hbWUiLCJza2lsbElkZW50aWZpZXIiLCJsb2ciLCJwYWNrcyIsIm1ldGFkYXRhIiwiZW50aXR5IiwiZ2V0RG9jdW1lbnQiLCJfcmF3VmFsdWUiLCJ1cGRhdGVWYWx1ZSIsIndlYXBvbkRhdGEiLCJ1dWlkIiwid2VhcG9ucyIsInBhcmVudCIsInRvSlNPTiIsImNyZWF0ZUNoYXRDYXJkIiwiaGFzR3VuIiwiZGVueUx1Y2siLCJkZW55QmxpbmRUYW1wZXJpbmciLCJmcm9tVXVpZFN5bmMiLCJ1c2VzQWx0ZXJuYXRpdmVTa2lsbCIsIm1hdGNoZXMiLCJleGVjIiwiY2hhcktleSIsImF0dHJpYktleSIsImF0dHIiLCJwaWxvdFNraWxscyIsImRyaXZlU2tpbGxzIiwidG9rZW5VdWlkIiwicmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUiLCJhdmVyYWdlIiwiY2hhclZhbHVlIiwic2tpbGxzUm9sbGVkIiwiZGV2ZWxvcGVtZW50RmxhZyIsIkRpZSIsImF1Z21lbnQiLCJza2lsbE1hc3RlcmluZ01lc3NhZ2UiLCJhdWdtZW50RGllIiwiYXVnbWVudFNBTkRpZSIsInNhbkdhaW5lZCIsInNhbkdhaW5lZE1lc3NhZ2UiLCJkZWJ1ZyIsInNjb3JlIiwiaW5jcmVhc2VFeHBlcmllbmNlIiwidW5mbGFnRm9yRGV2ZWxvcGVtZW50IiwiY2hhbmdlZCIsImNyZWF0ZU1lc3NhZ2UiLCJjdXJyZW50THVjayIsInB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjayIsImhpZ2hlclRoYW5DdXJyZW50THVjayIsImF1Z21lbnRSb2xsIiwiYXVnbWVudFZhbHVlIiwiY29uZGl0aW9uTmFtZSIsImNvbmRpdGlvblZhbHVlIiwiY29uZGl0aW9ucyIsImZpZWxkIiwiZm9yY2VWYWx1ZSIsImNvcmUiLCJzdGF0dXNJZCIsImN1c3RvbSIsIm92ZXJsYXkiLCJzdGF0dXNFZmZlY3RzIiwiZWZmZWN0RGF0YSIsImZpZWxkcyIsImp1c3RUaGlzIiwiZGVsZXRlRW1iZWRkZWREb2N1bWVudHMiLCJjb3VudGVyIiwiZmlnaHRpbmdTa2lsbHMiLCJjbG9zZUNvbWJhdFdlYXBvbnMiLCJ3ZWFwb25MaXN0IiwiZmlyZWFybVNraWxscyIsIkNNIiwibXl0aG9zSGFyZGVuZWQiLCJDUiIsInN5bWJvbCIsIm1vbmV0YXJ5Rm9ybWF0S2V5cyIsInRvTG9jYWxlU3RyaW5nIiwibWluaW11bUZyYWN0aW9uRGlnaXRzIiwicm93IiwibW9uZXRhcnlUeXBlS2V5cyIsInNwZW5kaW5nTGV2ZWwiLCJtb25ldGFyeVZhbHVlIiwiY2FzaCIsImFzc2V0cyIsInUiLCJ0ZXN0VXNlclBlcm1pc3Npb24iLCJwbGF5ZXIiLCJjaGFyYWN0ZXJVc2VyIiwiY29udGVudHMiLCJoZWFsdGhCZWZvcmUiLCJkYW1hZ2VUYWtlbiIsIl9zZXRIcCIsImFybW9yRGF0YSIsImdyb3NzRGFtYWdlIiwiYXJtb3JWYWx1ZSIsImlzRm9ybXVsYSIsIm5ldERhbWFnZSIsImNlaWwiLCJoYXNNYWpvcldvdW5kIiwibWFqb3JXb3VuZCIsImRvY3VtZW50Q2xhc3MiLCJfb25MaW5rQ2xpY2siLCJfb25EcmFnQ29DN0xpbmsiLCJhZGRDbGFzcyIsIm9sZFR5cGUiLCJsaW5rSWNvbiIsIl9saW5rRnJvbUV2ZW50Iiwib3JpZ2luYWxFdmVudCIsInNldERhdGEiLCJleHRlcm5hbCIsIm1hdGNoQWxsIiwiQXJyYXkiLCJmcm9tIiwiZGlmZmljdWx0eVN0cmluZyIsImh1bWFuTmFtZSIsImdldENoYXJhY3RlcmlzdGljTmFtZXMiLCJkcmFnZ2FibGUiLCJfY3JlYXRlRG9jdW1lbnRMaW5rIiwiZXZlbnREYXRhIiwiY2hhcmFjdGVyaXN0aWNDaGVjayIsInNraWxsQ2hlY2siLCJhdHRyaWJ1dGVDaGVjayIsIndlYXBvbkNoZWNrIiwiX29uTGlua0FjdG9yQ2xpY2siLCJnZXRTcGVha2VyQWN0b3IiLCJPQlNFUlZFUiIsImlzQ2hhcmFjdGVyaXN0aWNDaGVjayIsImlzQ2hlY2siLCJpc0F0dHJpYnV0ZUNoZWNrIiwiaXNTYW5Mb3NzQ2hlY2siLCJpc0VmZmVjdCIsIkNvQzdQYXJzZXIiLCJfZ2V0VGV4dE5vZGVzIiwicmd4IiwiX3JlcGxhY2VUZXh0Q29udGVudCIsIl9jcmVhdGVMaW5rIiwiaXNDb250ZW50VmlzaWJsZSIsInBhcnNlZENvbnRlbnQiLCJJdGVtIiwicmVsYXRpdmVUbyIsIkpvdXJuYWxFbnRyeVBhZ2UiLCJpY29uTGFuZ3VhZ2UiLCJtYWxmdW5jdGlvbiIsInByb3BlcnR5SWQiLCJvdmVycmlkZSIsImNoZWNrZWRQcm9wcyIsIkNvQ0lERWRpdG9yIiwiZXJhVG9nZ2xlIiwibWVsZWVXZWFwb24iLCJwcm9wTmFtZSIsInByb3BWYWx1ZSIsImhhc1Byb3BlcnR5IiwiaXNJbmNsdWRlZEluU2V0Iiwic3BlY05hbWVSZWdleCIsImd1ZXNzTmFtZVBhcnRzIiwic2V0IiwiZXJhc2VBZGp1c3RtZW50IiwibWF4VXNlc1BlclJvdW5kIiwibXVsdGlTaG90IiwidXNlc1BlclJvdW5kU3RyaW5nIiwic2tpbGxQcm9wZXJ0aWVzIiwiX2Jhc2UiLCJhbW1vIiwic2V0QnVsbGV0cyIsIm1heEJ1bGxldCIsImJ1bGxldHMiLCJtYXhCdWxsZXRzIiwibmV3QXJyYXkiLCJnZXRDaGF0RGF0YSIsImh0bWxPcHRpb25zIiwibGFiZWxzIiwicHJvcHMiLCJmbiIsInAiLCJfd2VhcG9uQ2hhdERhdGEiLCJza2lsbExhYmVsIiwiY2FuQmVQdXNoZWQiLCJpc0RvZGdlIiwicHVzaGluZyIsImlzVW5rbm93biIsIl91dWlkIiwicmFuZG9tSUQiLCJoYXNDYXJkIiwicmF3VmFsdWVTdHJpbmciLCJjcml0aWNhbFRocmVzaG9sZCIsImZ1bWJsZVRocmVzaG9sZCIsInN1Y2Nlc1RocmVzaG9sZCIsIl9tb2RpZmllZFJlc3VsdCIsIm1vZGlmaWVkIiwiZmxhdERpY2VNb2RpZmllclN0cmluZyIsImlzU2ltcGxlUm9sbCIsImhhc1BlbmFsdHkiLCJoYXNNb2RpZmllciIsIl9kaWNlTW9kaWZpZXIiLCJmdWxsTmFtZSIsIl9kaWZmaWN1bHR5Iiwib2xkQ2hlY2siLCJzdWNjZXNzTGV2ZWxJY29ucyIsInVua25vd25EaWZmaWN1bHR5IiwiaWNvbnMiLCJzdWNjZXNzSGludCIsImNzc0NsYXNzIiwiaGludCIsImZhaWx1cmVIaW50IiwiZ21EaWZmaWN1bHR5Q3JpdGljYWwiLCJnbURpZmZpY3VsdHlFeHRyZW1lIiwiZ21EaWZmaWN1bHR5SGFyZCIsImdtRGlmZmljdWx0eVJlZ3VsYXIiLCJfc2tpbGwiLCJfZ2V0SXRlbUZyb21JZCIsIl9pdGVtIiwiaXNEdW1teSIsImRpc3BsYXlSZXN1bHRUeXBlIiwiZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsIiwiZGlzcGxheUJvdGhTdWNjZXNzTGV2ZWwiLCJkb250RGlzcGxheVN1Y2Nlc3NMZXZlbCIsImltYWdlIiwiZ2V0TGlua0VsZW1lbnQiLCJyb2xsRGF0YSIsInRocmVzaG9sZCIsInRlblJlc3VsdCIsInRlbk9ubHlPbmVEaWUiLCJpc1ZhbHVlIiwiaXNDaGFyYWN0aXJpc3RpYyIsImlzU2tpbGwiLCJpc0l0ZW0iLCJpc0F0dHJpYnV0ZSIsInN1Y2Nlc3NSZXF1aXJlZCIsIm1hbGZ1bmN0aW9uVHh0IiwidG9nZ2xlSXRlbUZsYWciLCJoYXNFbm91Z2hMdWNrIiwibmV4dExldmVsIiwibHVja1RvU3BlbmQiLCJjYW5JbmNyZWFzZVN1Y2Nlc3MiLCJjYW5Bd2FyZEV4cGVyaWVuY2UiLCJmb3JjZWQiLCJKU09OUm9sbFN0cmluZyIsImNzc0NsYXNzTGlzdCIsInBsYXllckNzc0NsYXNzIiwiZm9yY2VkU3VjY2VzcyIsImZvcmNlZEZhaWx1cmUiLCJ0b3RhbEx1Y2tTcGVudCIsInNoaWZ0IiwicmVtb3ZlVXBncmFkZXMiLCJmb3JjZVN1Y2Nlc3NMZXZlbCIsIl9mb3JjZUNoZWNrIiwiaGlnaCIsImxvdyIsInJhbmRvbSIsInVuaXRUb3RhbCIsInRlblRvdGFsIiwiaGFzRW5vdWdoIiwidGVuIiwiZmxhZ2dlZEZvckRldmVsb3BtZW50IiwiX2ZsYXZvciIsIl9jb250ZXh0IiwicGFyZW50VXVpZCIsInJhd3ZhbHVlIiwidG9vbHRpcEhlYWRlciIsIm9yaWdpbmFsU3BlYWtlciIsIm5ld0NvbnRlbnQiLCJodG1sTWVzc2FnZSIsInJvbGxSZXN1bHRFbGVtZW50IiwiT1RIRVIiLCJ0b29sdGlwIiwicm9sbFRvb2xUaXAiLCJmYWNlIiwiY29tbWFuZCIsInRpcCIsImNoaWxkcmVuIiwiYXBwZW5kQ2hpbGQiLCJwYSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInB0Iiwid2luZG93IiwiaW5uZXJXaWR0aCIsInRvcCIsInkiLCJpbm5lckhlaWdodCIsInppIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInpJbmRleCIsImlzTnVtZXJpYyIsIl9FeGVjQ29tbWFuZCIsImVzY2FwZWQiLCJhc2siLCJ0aHJlc2hvbGRTdHIiLCJkaWZmaWN1bHR5U3RyIiwiYXNrVmFsdWUiLCJhY3RvclN0cmluZyIsImJhc2VBY3RvciIsImdldERvY3VtZW50Q2xhc3MiLCJyb2xsRGljZSIsImJhciIsInNsb3QiLCJtYWNybyIsIm1hY3JvcyIsIm0iLCJhc3NpZ25Ib3RiYXJNYWNybyIsIk1hY3JvIiwidXBkYXRlQ2hhclNoZWV0cyIsImNoZWNrT3B0aW9ucyIsInBsYXllclRva2VuSWRzIiwic2VsZWN0ZWRQbGF5ZXJJZHMiLCJmb3JFYWNoIiwiY2hlY2tlZCIsInN0YXJ0UmVzdCIsImNoYXRDb250ZW50IiwicXVpY2tIZWFsZXIiLCJpc0NyaXRpY2FsV291bmRzIiwiZGFpbHlTYW5pdHlMb3NzIiwiaHBWYWx1ZSIsIm1wVmFsdWUiLCJoZWFsQW1vdW50IiwiaG91cnMiLCJtYWdpY0Ftb3VudCIsInRrIiwicmVuZGVyZWQiLCJlbnRpdHlUeXBlIiwiZm9sZGVyIiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwiaXNTZWN1cmVDb250ZXh0Iiwid3JpdGVUZXh0IiwicG9zaXRpb24iLCJib2R5IiwiZm9jdXMiLCJyZWplY3QiLCJleGVjQ29tbWFuZCIsIkVycm9yIiwiY2F0Y2giLCJsZW4iLCJxU3RyaW5nIiwiY2hhckF0IiwiY2hhckNvZGVBdCIsImoiLCJwYXRoIiwibyIsImRvYyIsImRvY05hbWUiLCJkb2NJZCIsImluc3RhbmNlIiwiZW1iZWRkZWRJZCIsImlkZW50aWZpZXJzIiwiZHJvcERhdGEiLCJkb2NVdWlkIiwiZ2V0RG9jdW1lbnRGcm9tS2V5IiwiZm9sZGVyTmFtZSIsImltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciIsImZvbGRlcnMiLCJGb2xkZXIiLCJvTSIsInNvdXJjZSIsInBhY2thZ2UiLCJnZXREb2N1bWVudHMiLCJmYWxsYmFja0FueSIsImd1ZXNzSXRlbSIsIm5vcm1hbGl6ZSIsInN1Ym1pdE9uQ2xvc2UiLCJzdWJtaXRPbkNoYW5nZSIsInN1cHBvcnRlZExhbmd1YWdlcyIsImVkaXRhYmxlIiwiaXNFZGl0YWJsZSIsImd1ZXNzQ29kZSIsImd1ZXNzSWQiLCJpZFByZWZpeCIsImdldFByZWZpeCIsImxhbmciLCJpc0VuYWJsZWQiLCJDb0NJREtleXMiLCJmbGF0dGVuT2JqZWN0IiwidHJhbnNsYXRpb25zIiwiQ29DSURGbGFnIiwicHJlZml4IiwiZXhpc3RpbmdLZXlzIiwiaXNTeXN0ZW1JRCIsIl9leGlzdGluZyIsIndvcmxkRG9jdW1lbnRzIiwiZnJvbUNvQ0lEQWxsIiwic2NvcGUiLCJ1c2VkRXJhcyIsInVuaXF1ZVdvcmxkUHJpb3JpdHkiLCJ3b3JsZERvY3VtZW50SW5mbyIsIndhcm5EdXBsaWNhdGVXb3JsZFByaW9yaXR5Iiwid29ybGREdXBsaWNhdGVzIiwiY29tcGVuZGl1bURvY3VtZW50cyIsInVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eSIsImNvbXBlbmRpdW1Eb2N1bWVudEluZm8iLCJ3YXJuRHVwbGljYXRlQ29tcGVuZGl1bVByaW9yaXR5IiwiY29tcGVuZGl1bUR1cGxpY2F0ZXMiLCJzaWJsaW5ncyIsIl9vbkNsaWNrVG9nZ2xlIiwidG9LZWJhYkNhc2UiLCJndWVzcyIsImNzcyIsImNvbG9yIiwiYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiIsImhlYWRlckJ1dHRvbnMiLCJzaGVldENvQ0lEIiwiQ29DSURFZGl0b3JCdXR0b24iLCJvbmNsaWNrIiwibnVtYmVyT2ZCdXR0b25zIiwiQ29DN0FjdGl2ZUVmZmVjdCIsIkFjdGl2ZUVmZmVjdCIsIm93bmVyIiwiZWZmZWN0SWQiLCJvcmlnaW4iLCJlZmZlY3RUeXBlIiwiX3ByZXBhcmVEdXJhdGlvbiIsInRvSVNPU3RyaW5nIiwiaXNTdGF0dXMiLCJjYXRlZ29yaWVzIiwidGVtcG9yYXJ5IiwicGFzc2l2ZSIsImluYWN0aXZlIiwic3VwcHJlc3NlZCIsIl9nZXRTb3VyY2VOYW1lIiwiaXNUZW1wb3JhcnkiLCJoaWRkZW4iLCJleHBlbmRlZCIsIkNvQzdDb250ZXh0TWVudSIsIm1lbnUiLCJfY2FsbGJhY2siLCJfaHRtbCIsIl9tZW51IiwibWVudVRyaWdnZXIiLCJjb250ZXh0bWVudSIsIl9vbkNvbnRleHRNZW51IiwibWVudUVsZW1lbnQiLCJDcmVhdGVNZW51IiwiX29uTWVudUFjdGlvbiIsIm1lbnVDb250YWluZXIiLCJlYWNoIiwidmlzaWJpbGl0eSIsImNsb3NlQWxsIiwibWVudU5hbWUiLCJjb250ZXh0TWVudSIsIndyYXBwZXIiLCJzdWJNZW51IiwiY2xpZW50WCIsImNsaWVudFkiLCJtZW51SGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJtZW51V2lkdGgiLCJvdXRlcldpZHRoIiwic2VjdGlvbiIsIkNyZWF0ZVNlY3Rpb24iLCJtdWx0aSIsImNhblNlZSIsInN1YiIsIkNvQzdBY3RvclNoZWV0IiwiQWN0b3JTaGVldCIsIl9nZXRIZWFkZXJCdXR0b25zIiwic2hvd0hpZGRlbkRldk1lbnUiLCJjYW5EcmFnVG9rZW4iLCJsaW5rZWRBY3RvciIsIml0ZW1zQnlUeXBlIiwiY29tYmF0U2tpbGxzIiwicmFuZ2VXcG4iLCJtZWxlZVdwbiIsImFjdG9yRmxhZ3MiLCJwcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyIsInByZXBhcmVOUENBY3RpdmVFZmZlY3RDYXRlZ29yaWVzIiwicGVybWlzc2lvbkxpbWl0ZWQiLCJMSU1JVEVEIiwiYWxsb3dVbmxvY2siLCJwZXJzb25hbERlc2NyaXB0aW9uIiwic2V4IiwicmVzaWRlbmNlIiwiYmlydGhwbGFjZSIsIm9yZ2FuaXphdGlvbiIsInBsYXllcm5hbWUiLCJtYW51YWxDcmVkaXQiLCJjcmVkaXQiLCJtb25ldGFyeVN5bWJvbCIsInNwZW50IiwiYXNzZXRzRGV0YWlscyIsImRldmVsb3BtZW50IiwicHVscFJ1bGVBcmNoZXR5cGUiLCJwdWxwUnVsZU9yZ2FuaXphdGlvbiIsImlzRGVhZCIsImlzRHlpbmciLCJpdGVtVG9VcGRhdGUiLCJhc3luY0Jhc2UiLCJ1cGRhdGVkRXhwIiwiaXRlbVR5cGUiLCJtZWxlZVNraWxscyIsInJhbmdlU2tpbGxzIiwiY2J0U2tpbGxzIiwidXNlc0FsdGVybmF0ZVNraWxsIiwic2tpbGxTZXQiLCJfcHJvcGVydGllcyIsImhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSIsImlzRmlyc3QiLCJpc0xhc3QiLCJzaG93SW52ZW50b3J5SXRlbXMiLCJzaG93SW52ZW50b3J5Qm9va3MiLCJzaG93SW52ZW50b3J5U3BlbGxzIiwic2hvd0ludmVudG9yeVRhbGVudHMiLCJzaG93SW52ZW50b3J5U3RhdHVzZXMiLCJzaG93SW52ZW50b3J5V2VhcG9ucyIsImhhc0NvbmRpdGlvbnMiLCJjb25kaXRpb24iLCJvbkNsb3NlU2hlZXQiLCJtZW51cyIsInJvbGxNZW51Iiwic2FuTWVudSIsInJvbGxDb250ZXh0TWVudSIsIl9vbkNvbnRleHRNZW51Q2xpY2siLCJzYW5Db250ZXh0TWVudSIsIl9vbk9wcG9zZWRSb2xsIiwiX29uUm9sbENoYXJhY3Rlcml0aWNUZXN0IiwiX29uUm9sbFNraWxsVGVzdCIsIl9vblJvbGxBdHRyaWJUZXN0IiwiX29uRHJhZ1Rva2VuU3RhcnQiLCJjb21wZW5kaXVtIiwiX29uRHJhZ0NoYXJhY3RlcmlzdGljIiwiX29uRHJhZ0F0dHJpYnV0ZSIsIl9vbkRyYWdTYW5DaGVjayIsIl9vbkxvY2tDbGlja2VkIiwiX29uRmxhZ0NsaWNrZWQiLCJfb25Gb3JtdWxhQ2xpY2tlZCIsIl9vblJvbGxDaGFyYWN0ZXJpdGljc1ZhbHVlIiwiX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUiLCJfb25BdXRvVG9nZ2xlIiwiX29uUmVzZXRDb3VudGVyIiwiX29uQ29uZGl0aW9uVG9nZ2xlIiwiaGVhbCIsInJldml2ZSIsImNoZWNrRm9yRGVhdGgiLCJfb25JdGVtUm9sbCIsIl9vbldlYXBvblJvbGwiLCJfb25FZmZlY3QiLCJfb25XZWFwb25Ta2lsbFJvbGwiLCJfb25SZWxvYWRXZWFwb24iLCJfb25BZGRBbW8iLCJkYmxjbGljayIsIl90b2dnbGVSZWFkT25seSIsIl9vbldlYXBvbkRhbWFnZSIsIl9vbkludmVudG9yeUhlYWRlciIsIl9vbkl0ZW1IZWFkZXIiLCJfb25TZWN0aW9uSGVhZGVyIiwid2hlZWxJbnB1dHMiLCJ3aGVlbElucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vbldoZWVsIiwiX29uSXRlbVN1bW1hcnkiLCJfb25JdGVtUG9wdXAiLCJfb25SZW5kZXJJdGVtU2hlZXQiLCJldiIsInBhcmVudHMiLCJpdGVtVG9EZWxldGUiLCJzdHJpY3QiLCJzbGlkZVVwIiwic3RvcFByb3BhZ2F0aW9uIiwiY3JlYXRlRW1wdHlCb29rIiwiY3JlYXRlRW1wdHlJdGVtIiwiY3JlYXRlRW1wdHlTa2lsbCIsImNyZWF0ZUVtcHR5U3BlbGwiLCJjcmVhdGVFbXB0eVdlYXBvbiIsIl9vblRyYWRlSXRlbSIsImRlbGV0ZUJpb1NlY3Rpb24iLCJtb3ZlQmlvU2VjdGlvblVwIiwibW92ZUJpb1NlY3Rpb25Eb3duIiwiZGV2ZWxvcGVtZW50UGhhc2UiLCJkZXRhaWwiLCJkZXZlbG9wTHVjayIsImRpc2FibGUiLCJtb3VzZWVudGVyIiwidG9vbFRpcFNraWxsRW50ZXIiLCJDb0M3VG9vbHRpcHMiLCJ0b29sVGlwTGVhdmUiLCJ0b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlciIsInRvb2xUaXBBdHRyaWJ1dGVFbnRlciIsInRvb2xUaXBBdXRvRW50ZXIiLCJ0b29sVGlwRmxhZ0ZvckRldmVsb3BtZW50Iiwib25NYW5hZ2VBY3RpdmVFZmZlY3QiLCJkZWxheSIsIlRvb2xUaXBIb3ZlciIsInRvb2xUaXBUaW1lciIsInRvb2xUaXAiLCJkaXNwbGF5VG9vbFRpcCIsImNoYXJJZCIsImF0dHJpYnV0ZUlkIiwiYXR0cmlidXRlcyIsInRhcmdldFR5cGUiLCJyb2xsT3B0aW9ucyIsImFjdG9yRnJvbSIsImFjdG9yVG8iLCJ2aXNpYmxlIiwiTk9ORSIsIl9vbkRyYWdTdGFydCIsImRyYWdEYXRhIiwiYm94IiwiQ29DN1R5cGUiLCJfb25Ecm9wIiwidG9nZ2xlQ29uZGl0aW9uIiwicmVzZXREYWlseVNhbml0eSIsInRvZ2dsZUF0dHJpYkF1dG8iLCJ0b2dnbGVQcm9wZXJ0eSIsInJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsImF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsImlzTG9ja2VkIiwidG9nZ2xlQWN0b3JGbGFnIiwiZGVsdGFZIiwic2V0SHAiLCJzZXRNcCIsInJlYWRPbmx5Iiwic2VjcmV0cyIsImhhc0NsYXNzIiwic3VtbWFyeSIsImRpdiIsInNwZWNpYWxEaXYiLCJoaWRlIiwic2xpZGVEb3duIiwicGFubmVsQ2xhc3MiLCJwYW5uZWwiLCJpcyIsIm9sIiwibmV4dCIsInBvcHVwU2tpbGwiLCJlbnJpY2hlZFZhbHVlIiwic2Nyb2xsWSIsInByb2NlZWRXaXRob3V0VGFyZ2V0IiwiY2FuY2VsIiwicHJvY2VlZCIsImFkZEJ1bGxldCIsInRlc3QiLCJyb2xsRm9ybXVsYSIsIm92ZXJyaWRlcyIsImNyZWRpdFZhbHVlIiwidXBkYXRlVGV4dEFyZWEiLCJ1cGRhdGVCaW9WYWx1ZSIsInVwZGF0ZUJpb1RpdGxlIiwic2VsZWN0ZWRJbmRleCIsIkNvQzdOUENTaGVldCIsImFsbG93Rm9ybXVsYSIsImRpc3BsYXlGb3JtdWxhIiwiaGFzU2FuIiwiaGFzTXAiLCJoYXNMdWNrIiwiaXNDcmVhdHVyZSIsImhhc0ludmVudG9yeSIsImVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiIsImVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIiLCJrZWVwZXIiLCJzYW5sb3NzTWVudSIsInNhbmxvc3NDb250ZXh0TWVudSIsIl9vblNhbkxvc3NDb250ZXh0TWVudUNsaWNrIiwiX29uU2FuQ2hlY2siLCJjaGVja1RhcmdldHMiLCJ1bnNldEFjdG9yRmxhZyIsInJlc2l6YWJsZSIsIm1pbmltaXphYmxlIiwiX3VwZGF0ZU9iamVjdCIsInNldENoYXJhY3RlcmlzdGljIiwic2V0UG9zaXRpb24iLCJmb3JjZUF1dG8iLCJDb0M3Q3JlYXR1cmVTaGVldCIsIkNvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIiLCJpc0ltbXVuaXR5IiwiX29uQnV0dG9uQ2xpY2siLCJDb0M3Q2hhcmFjdGVyU2hlZXQiLCJzdW1tYXJpemVkIiwidG9nZ2xlU2hlZXRNb2RlIiwic2tpbGxMaXN0TW9kZVZhbHVlIiwic2tpbGxTaG93VW5jb21tb24iLCJzaG93SWNvbnNPbmx5Iiwib2NjdXBhdGlvblNldCIsImFyY2hldHlwZVNldCIsInRvdGFsRXhwZXJpZW5jZSIsInRvdGFsT2NjdXBhdGlvbiIsImludmFsaWRPY2N1cGF0aW9uUG9pbnRzIiwidG90YWxBcmNoZXR5cGUiLCJpbnZhbGlkQXJjaGV0eXBlUG9pbnRzIiwidG90YWxQZXJzb25hbCIsImludmFsaWRQZXJzb25hbFBvaW50cyIsImNyZWRpdFJhdGluZ01heCIsImNyZWRpdFJhdGluZ01pbiIsImludmFsaWRDcmVkaXRSYXRpbmciLCJwdWxwVGFsZW50Q291bnQiLCJ0YWxlbnQiLCJtaW5QdWxwVGFsZW50cyIsInRhbGVudHMiLCJpbnZhbGlkUHVscFRhbGVudHMiLCJhbGxvd0RldmVsb3BtZW50IiwiYWxsb3dDaGFyQ3JlYXRpb24iLCJkZXZlbG9wbWVudFJvbGxGb3JMdWNrIiwic2hvd0RldlBhbm5lbCIsIl9tb25ldGFyeUZvcm1hdHMiLCJtb25ldGFyeUZvcm1hdHMiLCJzaG93Q3VycmVuY3lTeW1ib2wiLCJfbW9uZXRhcnlUeXBlcyIsIm1vbmV0YXJ5VHlwZXMiLCJtb25ldGFyeUZvcm1hdCIsIm9uZUJsb2NrQmFja1N0b3J5IiwicHJldmlvdXNTcGVjIiwiaXNTcGVjaWFsaXphdGlvbiIsInNraWxsc0J5VmFsdWUiLCJ0b3BTa2lsbHMiLCJ0b3BXZWFwb25zIiwicmV2ZXJzZSIsImRpc3BsYXlQbGF5ZXJOYW1lIiwic2tpbGxMaXN0RW1wdHkiLCJlbnJpY2hlZEJhY2tzdG9yeSIsIl9zYXZlU2Nyb2xsUG9zaXRpb25zIiwiX3Njcm9sbFBvc2l0aW9uc1giLCJwb3MiLCJzZWwiLCJzY3JvbGxMZWZ0IiwiX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMiLCJzZWxlY3RvcnMiLCJwb3NpdGlvbnMiLCJfb25Ta2lsbERldiIsIl9vbkl0ZW1EZXRhaWxzIiwidG9nZ2xlU2tpbGxMaXN0TW9kZSIsInRvZ2dsZVNraWxsVW5jb21tb25Nb2RlIiwiX29uQWRkU2FuaXR5TG9zc1JlYXNvbiIsIl9vbkRlbGV0ZVNhbml0eUxvc3NSZWFzb24iLCJfb25Ub2dnbGVLZWVwZXJGbGFncyIsIl9vbkFkZE1vbmV0YXJ5IiwiX29uUmVtb3ZlTW9uZXRhcnkiLCJjYXNoVHlwZSIsImNhc2hWYWx1ZSIsImFzc2V0c1R5cGUiLCJhc3NldHNWYWx1ZSIsInNwZW5kaW5nVHlwZSIsInNwZW5kaW5nVmFsdWUiLCJkZXZlbG9wU2tpbGwiLCJzdHlsZVNoZWV0IiwiY3NzUnVsZUluZGV4Iiwic3R5bGVTaGVldHMiLCJocmVmIiwiZW5kc1dpdGgiLCJydWxlcyIsInNlbGVjdG9yVGV4dCIsIkNTU1N0eWxlIiwicmVtb3ZlUHJvcGVydHkiLCJzZXRQcm9wZXJ0eSIsIkZvbnRGYWNlIiwibG9hZCIsImxvYWRlZEZhY2UiLCJmb250cyIsIndlaWdodCIsImNhbWVsQ2FzZVRvSHlwaGVuIiwiZXhwYW5kZWQiLCJDb0M3Q29tYmF0IiwiY3VycmVudENvbWJhdCIsImNvbWJhdHMiLCJjdXJyZW50SW5kZXgiLCJjb21iSWQiLCJjb21iYXRhbnRDb250cm9sc0RpdiIsImNvbWJhdGFudCIsImNvbWJhdGFudHMiLCJwcmVwZW5kIiwiaW5pdGlhdGl2ZSIsInRva2VuSW5pdGlhdGl2ZSIsImluaXRpYXRpdmVUZXN0IiwiaDQiLCJmb250V2VpZ2h0IiwidGV4dFNoYWRvdyIsImJhY2tncm91bmQiLCJfb25Ub2dnbGVHdW4iLCJjb21iYXRhbnRJZCIsIm5ld0luaXQiLCJyb2xsSW5pdGlhdGl2ZSIsInNldEluaXRpYXRpdmUiLCJpZHMiLCJDb0NJREJhdGNoIiwiZm91bmRLZXlzIiwib3V0IiwibWlzc2luZ05hbWVzIiwic3VmZml4Iiwic3VmZml4UmVnRXhwIiwib25TZXROYW1lIiwib25DbGlja0d1ZXNzIiwia2V5dXAiLCJvbktleXVwIiwidHlwZU5hbWUiLCJwcm9jZXNzU2tpbGxLZXlzIiwidXBkYXRlTGlzdCIsInRva2VuT2Zmc2V0IiwiaXRlbU9mZnNldCIsImFjdG9yRGF0YSIsImV4cGFuZGVkRmxhZ3MiLCJ1cGRhdGVEb2N1bWVudHMiLCJzY2VuZURhdGEiLCJwb3B1bGF0ZVNraWxsS2V5cyIsIlVwZGF0ZXIiLCJzeXN0ZW1VcGRhdGVWZXJzaW9uIiwiam91cm5hbCIsInZlcnNpb24iLCJydW5NaWdyYXRlIiwiaXNOZXdlclZlcnNpb24iLCJ1cGRhdGVkTW9kdWxlcyIsImN1cnJlbnRNb2R1bGVzIiwicGFja2FnZU5hbWUiLCJtb2R1bGUiLCJtb2QiLCJza2lwIiwiT0siLCJwZXJtYW5lbnQiLCJtaWdyYXRlQWN0b3JEYXRhIiwiaXNFbXB0eSIsImVuZm9yY2VUeXBlcyIsIm1pZ3JhdGVJdGVtRGF0YSIsInRhYmxlIiwibWlncmF0ZVRhYmxlRGF0YSIsIm1pZ3JhdGVNYWNyb0RhdGEiLCJtaWdyYXRlU2NlbmVEYXRhIiwibWlncmF0ZUNvbXBlbmRpdW1EYXRhIiwiX21pZ3JhdGVBY3RvckNoYXJhY3RlclNhbml0eSIsIl9taWdyYXRlQWN0b3JBcnR3b3JrIiwiX21pZ3JhdGVBY3RvcktlZXBlck5vdGVzIiwiX21pZ3JhdGVBY3Rvck5wY0NyZWF0dXJlIiwiX21pZ3JhdGVBY3RvclN0YXR1c0VmZmVjdEFjdGl2ZSIsIl9taWdyYXRlQWN0b3JTYW5Mb3NzUmVhc29ucyIsIl9taWdyYXRlQWN0b3JNb25ldGFyeSIsImFyciIsIml0ZW1VcGRhdGUiLCJkb2N1bWVudFR5cGUiLCJ3YXNMb2NrZWQiLCJjb25maWd1cmUiLCJtaWdyYXRlIiwiZG9jdW1lbnRzIiwiX21pZ3JhdGVJdGVtRW1iZWRkZWR2MTAiLCJfbWlncmF0ZUl0ZW1FeHBlcmllbmNlIiwiX21pZ3JhdGVJdGVtQXJ0d29yayIsIl9taWdyYXRlSXRlbUJvb2tBdXRvbWF0ZWQiLCJfbWlncmF0ZUl0ZW1LZWVwZXJOb3RlcyIsIl9taWdyYXRlSXRlbVNwZWxsQXV0b21hdGVkIiwiX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXNNZXJnZSIsIl9taWdyYXRlSXRlbUVyYXMiLCJfbWlncmF0ZUl0ZW12MTAiLCJfbWlncmF0ZUl0ZW1Cb29rVW5pdHMiLCJfbWlncmF0ZU1hY3JvQXJ0d29yayIsIl9taWdyYXRlVGFibGVBcnR3b3JrIiwicmV0dXJucyIsIl9taWdyYXRlVG9rZW5BcnR3b3JrIiwiaGFzIiwiTWFwIiwib3JpZ2luYWwiLCJnIiwic3BlbGxzIiwiY29zdCIsImNhc3RpbmdUaW1lIiwidW5pZGVudGlmaWVkIiwiYXV0aG9yIiwiZGF0ZSIsImxhbmd1YWdlIiwibXl0aG9zUmF0aW5nIiwibm90ZXMiLCJnYWluIiwiQ01JIiwiQ01GIiwibmVjZXNzYXJ5Iiwid2Vla3NTdHVkeVRpbWUiLCJwcm9ncmVzcyIsInN0dWR5Iiwia2VlcGVyTm90ZXMiLCJlbmNvdW50ZXJlZENyZWF0dXJlcyIsImltIiwiYXR0YWNrc1BlclJvdW5kIiwiaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwiLCJuYW1lQ2hhcmFjdGVycyIsImVuIiwiZGJOb25lIiwiYXJtb3JOb25lIiwiYXR0YWNrc1BlclJvdW5kTm9uZSIsInNhbkxvc3NOb25lIiwiZnVsbGRiIiwiaGFsZmRiIiwic2VjdGlvbkNvbWJhdHMiLCJuZXdDb21iYXRIZWFkZXIiLCJzZWN0aW9uU2tpbGxzIiwic2VjdGlvbkxhbmdhdWdlcyIsInNlY3Rpb25TcGVsbHMiLCJoYW5kZ3VuIiwicmlmbGUiLCJzbWIiLCJtYWNoaW5lR3VuIiwibGF1bmNoZWQiLCJleGFtcGxlIiwiZGUiLCJkaWNlU2hvcnQiLCJwbCIsImZyIiwiZXMiLCJ3ZWFwb25Eb2RnZSIsImd1ZXNzU3RhcnRDb21iYXQiLCJzZWN0aW9ucyIsIkNvQzdBY3RvckltcG9ydGVyUmVnRXhwIiwiQ29DN0FjdG9ySW1wb3J0ZXIiLCJpdGVtTG9jYXRpb25zIiwiYXNOdW1iZXIiLCJhc1N0cmluZyIsImdldFJlZ0V4IiwicmVnZXgiLCJjbGVhblN0cmluZyIsInRyYW5zbGF0ZVJvbGwiLCJyZWdFeCIsInRvSFRNTCIsInJlZ0V4S2V5IiwicmVnRXhwIiwicmVxdWlyZWRHcm91cCIsInJlbW92ZUZyb21UZXh0Iiwic2F2ZUtleXMiLCJwcm9jZXNzQ29tYmF0IiwibmV3bGluZSIsIkNvQzdJbXBvcnRlciIsImxhc3RQZXJjZW50IiwibWF4TG9vcHMiLCJwZXJjZW50YWdlIiwiaXNSYW5nZWQiLCJkYW1hZ2VzIiwiaXNTaG90Z3VuIiwiYXR0YWNrcyIsInByb2Nlc3NTa2lsbHMiLCJicmVha3MiLCJwcm9jZXNzU3BlbGxzIiwic3BlbGxzQXJyIiwic3BlbGwiLCJoZWFkZXIiLCJzdWJzdHIiLCJvY2N1cGF0aW9uQWdlIiwicmVnRXhwU2VjdGlvbnMiLCJnbW5vdGVzIiwiZGlzYWJsZUF0dHJpYkF1dG8iLCJhdHRyaWJWYWx1ZSIsImNoYXJhY3RlckRhdGEiLCJjcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMiLCJucGMiLCJ1cGRhdGVJdGVtRGF0YSIsImxhc3RXZWFwb25Ta2lsbCIsInBhaXIiLCJ3ZWFwb25Ta2lsbHMiLCJwYyIsIndlYXBvblNraWxsIiwiY2xvbmVkIiwibGFuZ3VhZ2VzIiwiY2xvbmUiLCJuZXdTa2lsbCIsIm5lZWRzQ29udmVyc2lvbiIsIm5lZWRzQ29udmVyc2lvblJlc3VsdCIsImlucHV0cyIsImNoZWNrTGFuZ3VhZ2UiLCJnZXRLZXlzIiwiZ2V0UmVndWxhckV4cHJlc3Npb25zIiwicGFyc2VDaGFyYWN0ZXIiLCJjb252ZXJ0RnJvbTZFIiwiY29udmVydDdFIiwiaXRlbXNEYXRhIiwidGVzdE1vZGUiLCJjcmVhdGVFbnRpdHkiLCJjcmVhdHVyZSIsIkNvQzdEaXJlY3RvcnlQaWNrZXIiLCJGaWxlUGlja2VyIiwiYWN0aXZlU291cmNlIiwiYnVja2V0IiwicmF3IiwicGlja2VyIiwicGlja2VyQnV0dG9uIiwiY3JlYXRlRGVmYXVsdERpcmVjdG9yeSIsImNyZWF0ZURpcmVjdG9yeSIsImZpbGUiLCJmaWxlbmFtZSIsInVwbG9hZCIsIkZpbGUiLCJDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIiLCJiYWNrc3RvcnlKU09OIiwiYmxvY2siLCJkaG9sZUhvdXNlRGF0YSIsIkludmVzdGlnYXRvciIsImJhY2tzdG9yaWVzIiwiZ2V0QmFja3N0b3J5IiwiQmFja3N0b3J5IiwiUGVyc29uYWxEZXRhaWxzIiwiTmFtZSIsIkNoYXJhY3RlcmlzdGljcyIsIlNUUiIsIkNPTiIsIlNJWiIsIkRFWCIsIkFQUCIsIklOVCIsIlBPVyIsIkVEVSIsIlNhbml0eSIsIlNhbml0eU1heCIsIkhpdFB0cyIsIkhpdFB0c01heCIsIk1hZ2ljUHRzIiwiTWFnaWNQdHNNYXgiLCJMdWNrIiwiTW92ZSIsIkRhbWFnZUJvbnVzIiwiQnVpbGQiLCJPY2N1cGF0aW9uIiwiQWdlIiwiR2VuZGVyIiwiUmVzaWRlbmNlIiwiQmlydGhwbGFjZSIsImV4dHJhY3RTa2lsbHMiLCJTa2lsbHMiLCJTa2lsbCIsInBvc3Nlc2lvbnMiLCJleHRyYWN0UG9zc2Vzc2lvbnMiLCJQb3NzZXNzaW9ucyIsImRob2xlSG91c2Vza2lsbHMiLCJzdWJza2lsbCIsImhhbGYiLCJmaWZ0aCIsIm1ha2VTa2lsbE5hbWUiLCJnZXRFbWJlZGRlZENvbGxlY3Rpb24iLCJkaG9sZWhvdXNlUG9zc2Vzc2lvbnMiLCJkaG9sZWhvdXNlV2VhcG9ucyIsImlzQXJyYXkiLCJmaW5kV2VhcG9uU2tpbGxJZCIsInNraWxsbmFtZSIsIm1hbGYiLCJiYXNlNjRQb3J0cmFpdCIsImZpbGVOYW1lIiwiYmFzZTY0UmVzcG9uc2UiLCJmZXRjaCIsImltYWdlQmxvYiIsImJsb2IiLCJ1cGxvYWRUb0RlZmF1bHREaXJlY3RvcnkiLCJkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSIsImNhbiIsImNvbnZlcnREaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSIsIlBvcnRyYWl0Iiwic2F2ZVBvcnRyYWl0IiwiZXh0cmFjdFdlYXBvbnMiLCJXZWFwb25zIiwiQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2ciLCJpbXBvcnRUeXBlIiwiY29udmVydDZFIiwiY2FuVXBsb2FkIiwiZ2V0VHJhbnNsYXRpb25zIiwicGxhY2Vob2xkZXIiLCJnZXRFeGFtcGxlVGV4dCIsIl9vbkpTT05GaWxlU2VsZWN0ZWQiLCJjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQiLCJqc29uRmlsZUlucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJwb3J0cmFpdEltYWdlIiwiY2hhcmFjdGVyTmFtZSIsInByZXZpZXciLCJmaWxlcyIsImZpbGVSZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiY2hhcmFjdGVySlNPTiIsInBlcnNvbmFsRGV0YWlscyIsInRleHRDb250ZW50IiwicmVhZEFzVGV4dCIsImdldElucHV0cyIsImNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlIiwiYWN0b3JUeXBlIiwiaW1wb3J0QWN0b3IiLCJjcmVhdGVkQWN0b3IiLCJjcmVhdGVBY3RvciIsIm9uY2UiLCJEcm9wQ29DSUQiLCJyZXNwb25zZSIsInByb2Nlc3NGb3JtIiwibm8iLCJDb0M3T2NjdXBhdGlvblNoZWV0IiwiSXRlbVNoZWV0IiwiX29uSXRlbURlbGV0ZSIsIl9vbkdyb3VwSXRlbURlbGV0ZSIsIl9vbkdyb3VwQ29udHJvbCIsIkRyYWdEcm9wIiwiY2FsbGJhY2tzIiwiZHJvcCIsImNvbGxlY3Rpb25OYW1lIiwib3B0aW9uYWxTa2lsbCIsInVzZUNvQ0lEIiwicHJvY2Vzc0l0ZW0iLCJDb0NJZCIsIml0ZW1JbmRleCIsImhhc093bmVyIiwiaXNFbWJlZGRlZCIsIm9jY3VwYXRpb25Qb2ludHNTdHJpbmciLCJpdGVtUHJvcGVydGllcyIsIm9jY3VwYXRpb25Qcm9wZXJ0aWVzIiwiZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlIiwib3B0aW9ubmFsIiwibWFuZGF0b3J5IiwiY2FyYWMiLCJjYXJhY05hbWUiLCJvclN0cmluZyIsIkNvQzdJbnZlc3RpZ2F0b3JXaXphcmQiLCJwYWdlTGlzdCIsIlBBR0VfTk9ORSIsIlBBR0VfSU5UUk9EVUNUSU9OIiwiUEFHRV9DT05GSUdVUkFUSU9OIiwiUEFHRV9TRVRVUFMiLCJQQUdFX0FSQ0hFVFlQRVMiLCJQQUdFX0NIQVJBQ1RJU1RJQ1MiLCJQQUdFX0FUVFJJQlVURVMiLCJQQUdFX1ZJRVdfQVRUUklCVVRFUyIsIlBBR0VfT0NDVVBBVElPTlMiLCJQQUdFX09DQ1VQQVRJT05fU0tJTExTIiwiUEFHRV9BUkNIRVRZUEVfU0tJTExTIiwiUEFHRV9QT0lOVFNfU0tJTExTIiwiUEFHRV9JTlZFU1RJR0FUT1IiLCJQQUdFX0JBQ0tTVE9SWSIsIlBBR0VfQ1JFQVRFIiwiY2hhcmFjdGVyaXN0aWNzTWV0aG9kcyIsIk1FVEhPRF9ERUZBVUxUIiwiTUVUSE9EX1JPTEwiLCJNRVRIT0RfUE9JTlRTIiwiTUVUSE9EX1ZBTFVFUyIsImNvY2lkQ3JlZGl0UmF0aW5nIiwiY29jaWRMYW5ndWFnZU93biIsInBhZ2VPcmRlciIsInBhZ2VzIiwiZGVmYXVsdFNldHVwIiwic2hvd0xvYWRpbmciLCJyZWdleHAiLCJjYWNoZUNvQ0lEIiwiY29jaWRzIiwiZGVmYXVsdEVyYSIsImdldEFnZUFkanVzdG1lbnRzIiwic2V0dXBNb2RpZmllcnMiLCJyZXF1aXJlc0FnZUFkanVzdG1lbnRzIiwiZGVkdWN0Iiwic2V0dXAiLCJjYW5OZXh0IiwiY3JlYXRlQnV0dG9uIiwic2hvd01vbmV0YXJ5Iiwic3RlcCIsInNldHVwcyIsImZpbHRlckNhY2hlSXRlbUJ5Q29DSUQiLCJvY2N1cGF0aW9ucyIsImFyY2hldHlwZXMiLCJfZXJhcyIsImNoYXJhY3RlcmlzdGljc01ldGhvZCIsImVuZm9yY2VQb2ludEJ1eSIsInF1aWNrRmlyZVZhbHVlcyIsImhhc0FyY2hldHlwZXMiLCJjb3JlQ2hhcmFjdGVyaXN0aWMiLCJ0b0xvY2FsZVVwcGVyQ2FzZSIsInN1Z2dlc3RlZE9jY3VwYXRpb25zIiwic3VnZ2VzdGVkVHJhaXRzIiwiZ2V0Q2FjaGVJdGVtQnlDb0NJRCIsImVtcHRpZXMiLCJzZXR1cFBvaW50cyIsInB1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzIiwiZGVkdWN0VG90YWwiLCJkZWR1Y3RGcm9tIiwibiIsInJlZHVjZUZyb20iLCJsdWNrVmFsdWUiLCJza2lsbEl0ZW1zIiwibGFuZ3VhZ2VOYW1lIiwicm93cyIsImlzTXVsdGlwbGUiLCJpc0NyZWRpdFJhdGluZyIsImlzUGlja2FibGUiLCJpc09jY3VwYXRpb25EZWZhdWx0IiwiaW5PY2N1cGF0aW9uR3JvdXAiLCJvY2N1cGF0aW9uVG9nZ2xlIiwicGlja2VkIiwiZGVsZXRlYWJsZSIsImFyY2hldHlwZVRvZ2dsZSIsIm9jY3VwYXRpb25Hcm91cHMiLCJpc0FyY2hldHlwZURlZmF1bHQiLCJjcmVkaXRSYXRpbmdPa2F5IiwicmVtYWluaW5nIiwiZnJvbUNvQ0lEIiwidG90YWxQb2ludHMiLCJudW0iLCJpc09jY3VwYXRpb24iLCJpc0FyY2hldHlwZSIsInNob3dDcmVkaXRSYXRpbmciLCJhbGxCYWNrc3RvcmllcyIsImNhY2hlQmFja3N0b3JpZXMiLCJyb2xlIiwiVVNFUl9QRVJNSVNTSU9OUyIsIkFDVE9SX0NSRUFURSIsImRlZmF1bHRSb2xlIiwia2V5cHJlc3MiLCJzcmNFbGVtZW50IiwidGFnTmFtZSIsIndoaWNoIiwiY2hhckNvZGUiLCJfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25Sb2xsQWxsIiwiX29uUm9sbEVkdSIsIl9vblJvbGxMdWNrIiwiYmx1ciIsIl9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYyIsIl9vblRvZ2dsZVNraWxsIiwiX29uQ2xpY2tQaWNrU2tpbGwiLCJfb25DbGlja1NraWxsU3BlY2lhbCIsIl9vbkNsaWNrUmVtb3ZlU2tpbGwiLCJfb25DaGFuZ2VTa2lsbFBvaW50cyIsIl9vbkNoYW5nZUJhY2tzdG9yeVRleHQiLCJfb25Sb2xsQmFja3N0b3J5IiwiX29uUmVzZXRCYWNrc3RvcnkiLCJDSEFUX1RFTVBMQVRFIiwiZ2V0VG9vbHRpcCIsImFkZEl0ZW1Ub0xpc3QiLCJpbnZlc3RpZ2F0b3JJdGVtcyIsImlucGxhY2UiLCJjbGVhclNldHVwUG9pbnRzIiwicGxhY2VhYmxlIiwiZ20iLCJuYW1lQ3JlZGl0UmF0aW5nIiwiY2hhcmFjdGVyaXN0aWNLZXkiLCJkZXN0aW5hdGlvbiIsIm9rYXkiLCJ0ZW1wIiwicGFyZW50Tm9kZSIsInRvZ2dsZUtleSIsImd1ZXNzR3JvdXBGcm9tS2V5IiwiYWRqdXN0bWVudCIsInRleHRhcmVhIiwicm9sbHRhYmxlIiwidGFibGVSZXN1bHQiLCJyb2xsTWVzc2FnZSIsIm1vZGlmeU9mZnNldCIsIm1vZGlmeUNoYXJhY3RlcmlzdGljIiwicmVyb2xsc0VuYWJsZWQiLCJvYmpUb3RhbCIsImdldFBhZ2VOdW1iZXIiLCJkaXJlY3Rpb24iLCJjbGFzc05hbWUiLCJzZXRTa2lsbExpc3RzIiwiZGVmYXVsdE93bmVyc2hpcCIsInN0YXJ0ZWQiLCJub3ciLCJsb2FkQ2FjaGVJdGVtQnlDb0NJRCIsImJ1ZmZlciIsImRlZmF1bHRRdWFudGl0eSIsImZsYXRLZXlzIiwicGFnZU51bWJlciIsInNjcm9sbFRvcCIsImF0dGVtcHRUb0NyZWF0ZSIsIm5vcm1hbGl6ZUNoYXJhY3RlckRhdGEiLCJjcmVhdGVDaGFyYWN0ZXIiLCJrZWVwZXJzIiwibGlzdGVuZXIiLCJwYXlsb2FkIiwic291cmNlSXRlbSIsImF2YXRhciIsIlRPS0VOX0RJU1BPU0lUSU9OUyIsIkZSSUVORExZIiwiZnVuY3Rpb25JZCIsIm9mZiIsImNhY2hlSXRlbXMiLCJDb0M3TWVudUxheWVyIiwiUGxhY2VhYmxlc0xheWVyIiwib2JqZWN0cyIsImxheWVyT3B0aW9ucyIsInBsYWNlYWJsZXMiLCJDb0M3TWVudSIsImNvbnRyb2xzIiwiY29jN2dtdG9vbHMiLCJsYXllciIsInRvb2xzIiwib25DbGljayIsInRvZ2dsZURldlBoYXNlIiwidG9nZ2xlQ2hhckNyZWF0aW9uIiwidG9nZ2xlWFBHYWluIiwiZmFrZVJvbGxNZXNzYWdlIiwiZ2V0VGFyZ2V0IiwiY29jN0RldlRvb2xzIiwia2VlcGVyTWVudSIsImFmdGVyIiwiQ29DN0NhbnZhcyIsIkNPQzdfVFlQRVNfU1VQUE9SVEVEIiwiZ3JpZFNpemUiLCJkcm9wVGFyZ2V0VG9rZW5zIiwiYmV0d2VlbiIsImFwcElkIiwiY2FsbEJhY2siLCJ3aW5kb3dzIiwiQ29DN1NldHRpbmdzRGlyZWN0b3J5IiwiU2V0dGluZ3MiLCJsb2NhdGlvbiIsIkNvQzdDb21wZW5kaXVtRGlyZWN0b3J5IiwiQ29tcGVuZGl1bURpcmVjdG9yeSIsInRyYW5zbGF0ZWQiLCJiYWJlbGUiLCJDb0M3QWN0b3JEaXJlY3RvcnkiLCJBY3RvckRpcmVjdG9yeSIsImFsbG93V2l6YXJkIiwiYWxsb3dlZCIsIkNvQzdTcGVsbCIsImlzT3duZWQiLCJjb3N0cyIsImxvc3NlcyIsImNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cyIsIm1hZ2ljUG9pbnRzIiwiY29udmVydGVkSGl0UG9pbnRzIiwiY29udmVydGVkTWFnaWNQb2ludHMiLCJhY3Rvck1hZ2ljUG9pbnRzIiwib3JpZ2luYWxNYWdpY1BvaW50cyIsImhpdFBvaW50cyIsInJlc29sdmVMb3NzZXMiLCJncmFudFNhbml0eUxvc3MiLCJnZXRIVE1MIiwic2FuaXR5TG9zcyIsInNhbml0eUNoZWNrIiwiYnlwYXNzUm9sbFNhbiIsImJvb2tJZCIsImJvb2siLCJDb0M3Qm9vayIsImxlYXJuZWQiLCJpbml0aWFsUmVhZGluZyIsImZ1bGxTdHVkeSIsImNvbXBsZXRlRnVsbFN0dWR5IiwiY2hlY2tFeGhhdXN0aW9uIiwiZ3JhbnRGdWxsU3R1ZHkiLCJhY3Rvck15dGhvc1ZhbHVlIiwiZGV2ZWxvcG1lbnRzIiwibXl0aG9zRmluYWwiLCJnYWlucyIsImZpbmFsIiwiZ3JhbnRTa2lsbERldmVsb3BtZW50Iiwicm9sbFNhbml0eUxvc3MiLCJmdWxsU3R1ZGllcyIsIm90aGVycyIsInBhdHRlcm4iLCJzcGVsbGxlYXJuZWQiLCJleGlzdGluZ1NraWxsIiwic2hvd0RldmVsb3BtZW50c1RhYmxlIiwiZnJvbVJvbGxTdHJpbmciLCJncmFudEluaXRpYWxSZWFkaW5nIiwiZ3JhbnRTcGVsbExlYXJuaW5nIiwiRUNDX0NMQVNTIiwiUEVSTUlTU0lPTl9UWVBFIiwiU1RBVEUiLCJHTVVwZGF0ZSIsImNhcmRDbGFzc05hbWUiLCJFbmhhbmNlZENoYXRDYXJkIiwiYWR2aXNlIiwiRW5oYW5jZWRDaGF0Q2FyZExpYiIsInR5cGVzIiwiZW5oYW5jZWRDaGF0Q2FyZHNMaWIiLCJjYXJkQ29uc3RydWN0b3JzIiwiY2FyZENvbnN0cnVjdG9yIiwic2V0QnlQYXRoIiwiZ2V0QnlQYXRoIiwib29jIiwiZGVlcENsb25lIiwiYXR0YWNoT2JqZWN0Iiwib2JqZWN0RGF0YVN0cmluZyIsImVjY0NsYXNzIiwibG9jYWxDb21wdXRlIiwiRXhlY3V0ZUdNVXBkYXRlIiwiRUVDX0FDVElPTiIsImRldGFjaERhdGEiLCJfb25DaGFuZ2UiLCJzZXRWaXNpYmlsaXR5Iiwic2V0UGVybWlzc2lvbiIsInNldFN0YXRlIiwic2V0UmFkaW9TdGF0ZSIsInNwbGl0ZWQiLCJlY2NWaXNpYmlsaXR5IiwiaGFzUGVybSIsImVjY1Blcm1pc3Npb25zIiwicmVzdHJpY3RlZFRvIiwidmlzaW9uIiwicGVybWlzc2lvbnNBcnJheSIsIndoaXRlTGlzdCIsImlzQXV0aG9yIiwibmV3RGF0YSIsImFzc2lnbk9iamVjdHMiLCJmb3JtVXBkYXRlIiwiYWN0aW9uVXBkYXRlIiwib3JpZ2luYWxEaXNwbGF5U3R5bGUiLCJ1cGRhdGVDYXJkIiwic2F2ZURhdGEiLCJodG1tbENhcmQiLCJDYXJkQ2xhc3MiLCJ1bnNldERhdGEiLCJ0b2dnbGVEYXRhIiwiYk5hbWUiLCJfcGFydGljaXBhbnQiLCJfZmV0Y2giLCJfZG9jIiwiaXNBY3RvciIsImhhc0FjdG9yIiwiaGFzVmVoaWNsZSIsImlzQWN0aXZlIiwidmVoaWNsZSIsImRyaXZlciIsIl9kcml2ZXIiLCJ2ZWhpY2xlS2V5IiwiX3ZlaGljbGUiLCJoYXNWYWxpZE1vdiIsImhhc01heEJvbnVzRGljZSIsImFkZEJvbnVzRGljZSIsInJlbW92ZUJvbnVzRGljZSIsInJlc2V0Qm9udXNEaWNlIiwiaGFzQm9udXNEaWNlIiwiaGFzT25lQm9udXNEaWNlIiwiaGFzVHdvQm9udXNEaWNlIiwiY2FuQXNzaXN0IiwiYXNzaXN0IiwiY2FuQmVDYXV0aW91cyIsImhhc0RyaXZlciIsImhhc1ZhbGlkRGV4IiwiaGFzQUd1blJlYWR5IiwiaW5pdCIsImlzQ2hhc2VyIiwiY2hhc2VyIiwiaXNQcmV5IiwiaXNWYWxpZCIsIm1vdkFkanVzdG1lbnQiLCJzcGVlZENoZWNrIiwicm9sbERhdGFTdHJpbmciLCJhZGp1c3RlZE1vdiIsImhhc01vdkFkanVzdG1lbnQiLCJoYXNCb251c01vdiIsImhhc01hbHVzTW92IiwidG9vU2xvdyIsImV4Y2x1ZGVkIiwiaW5jbHVkZUluQ2hhc2UiLCJzbG93ZXN0IiwiZmFzdGVzdCIsImNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyIsIm1pbk1vdiIsIm1vdmVtZW50QWN0aW9uIiwiY3VycmVudE1vdmVtZW50QWN0aW9ucyIsImhhc01heE12dEFjdGlvbnMiLCJoYXNOb012dEFjdGlvbnMiLCJhZGRNb3ZlbWVudEFjdGlvbnMiLCJhbHRlck1vdmVtZW50QWN0aW9ucyIsIm1vdmVtZW50QWN0aW9uQXJyYXkiLCJiYXNlQXJyYXkiLCJmaWxsIiwiaW5saW5lUm9sbCIsIm1vZGlmaWVyQ3NzIiwiaGFzT3B0aW9ucyIsImdhbWVJdGVtIiwicmVmIiwicmVmU2V0IiwiaXNDaGFyYWN0ZXJpc3RpYyIsImNhbkJlUm9sbGVkIiwic29ydEJ5Um9sZUFuZERleCIsIkNoYXNlT2JzdGFjbGVDYXJkIiwic3RyaW5ncyIsInRvdGFsQWN0aW9uQ29zdCIsImJyZWFrYWJsZU9ic3RhY2xlIiwib2JzdGFjbGUiLCJiYXJyaWVyIiwiaGFzSGl0UG9pbnRzIiwidmFsaWRDaGVjayIsInN0YXRlcyIsIm9ic3RhY2xlRGVmaW5lZCIsImhhemFyZCIsInRyeVRvTmVnb3RpYXRlIiwidHJ5VG9CcmVhayIsImJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkIiwicGFydGljaXBhbnQiLCJjaGFzZSIsImdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzIiwicGFydGljaXBhbnRVdWlkIiwidmFsaWRTa2lsbCIsImNoZWNrVGhyZXNob2xkIiwiYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzIiwiZHVtbXlBY3RvciIsImNhblRha2VDYXV0aW91c0FwcHJvYWNoIiwiY3VzdG9tV2VhcG9uIiwid2VhcG9uQ2hvaWNlIiwiY2hlY2tSb2xsUmVxdWVzdCIsImNhbkFza1JvbGwiLCJFbnRlclZhbHVlVGl0bGUiLCJkYW1hZ2VTdGF0dXMiLCJvYnN0YWNsZURhbWFnZVJvbGwiLCJvYnN0YWNsZURhbWFnZVJvbGxlZCIsIm9ic3RhY2xlRGFtYWdlIiwiaW5saW5lRGFtYWdlUm9sbCIsInRvdGFsQ2F1dGlvdXNBcHByb2FjaCIsImNhdXRpb3VzU3RhdHVzIiwiY2F1dGlvdXNBcHByb2FjaFR5cGUiLCJjb25zdW1lQm9udXNEaWNlIiwibW92ZVBsYXllciIsIm9ic3RhY2xlUGFzc2VkIiwiY2hlY2tGYWlsZWQiLCJwbGF5ZXJBY3Rpb25EZWZpbmVkIiwicGxheWVySW50ZW50aW9ucyIsImNoZWNrUm9sbGVkIiwiY2FyZFJlc29sdmVkIiwicGxheWVyRGFtYWdlVGFrZW4iLCJvYnN0YWxjZURlZmluaXRpb25DaGFuZ2VkIiwibGlzdENoYW5nZXMiLCJoYXNEYW1hZ2UiLCJpbmxpbmVEYW1hZ2VUYWtlblJvbGwiLCJmYWlsZWREYW1hZ2VSb2xsIiwidG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiIsImhhc0FjdGlvbkNvc3QiLCJhY3Rpb25Mb3N0IiwiaW5saW5lQWN0aW9uTG9zdFJvbGwiLCJmYWlsZWRBY3Rpb25Sb2xsIiwiZmluYWxPdXRjb21lIiwidG90YWxEYW1hZ2UiLCJyZWZsZWN0T2JzdGFsZUNoYW5nZXMiLCJmYWlsZWRDb25zZXF1ZW5jZXNSb2xsZWQiLCJ0b3RhbE9ic3RhY2xlRGFtYWdlIiwib2JzdGFjbGVEZXN0b3llZCIsIkhpdFBvaW50cyIsImFjdGl2ZVBhcnRpY2lwYW50RGF0YSIsIm9ic3RhY2xlRGV0YWlscyIsInBhcnRpY2lwYW50RGF0YSIsImdldFBhcnRpY2lwYW50RGF0YSIsImdldExvY2F0aW9uRGF0YSIsImxvY2F0aW9uVXVpZCIsImNoYXNlVXVpZCIsIl9jaGFzZSIsImFjdG9yU2tpbGwiLCJ2YWxpZEZhaWxlZFJvbGxzIiwiZmFpbGVkQ2hlY2tEYW1hZ2UiLCJhY3Rpb25Db3N0IiwiZmFpbGVkQWN0aW9uQ29zdCIsIndlYXBvbnNPcHRpb25zIiwiaXRlbVR5cGVzIiwidyIsImFoYmQiLCJ1bnNoaWZ0IiwiY3VzdG9tV2VhcG9uRGFtYWdlIiwidXNlZFdlYXBvbiIsImluZmxpY3RlZERhbWFnZUZvcm11bGEiLCJ2YWxpZE9ic3RhY2xlRGFtYWdlIiwiZGFtYWdlUm9sbFJlcXVlc3QiLCJsb2FjdGlvbkNoYW5nZWQiLCJwYXJ0aWNpcGFudENoYWdlZCIsIm9ic3RhY2xlVXBkYXRlIiwicGFydGljaXBhbnRVcGRhdGUiLCJkaWZmIiwibmV3IiwicmVtYWluaW5nSHAiLCJ0YXJnZXRMb2NhdGlvbiIsImZvcndhcmQiLCJnZXRMb2NhdGlvblNoaWZ0IiwibW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbiIsInNjcm9sbFRvTG9jYXRpb24iLCJhY3RpdmF0ZUxvY2F0aW9uIiwidXBkYXRlTG9jYXRpb24iLCJ1cGRhdGVQYXJ0aWNpcGFudCIsImFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybiIsImNhbmNlbE9ic3RhY2xlRGVmaW5pdGlvbiIsImNyZWF0ZUZyb21BY3RvclJvbGxEYXRhIiwibmFtZXMiLCJuZXdPYnN0YWNsZSIsIm9sZCIsIkNvQzdDaGFzZSIsInBhcnRpY2lwYW50cyIsInBMaXN0IiwicHJleXMiLCJjaGFzZXJzIiwicGFydGljcGFudCIsInBhcnRpY2lwYW50c09iamVjdCIsImdldFBhcnRpY2lwYW50TG9jYXRpb24iLCJhY3RpdmVBY3RvciIsInBhcnRpY2lwYW50c0J5QWRqdXN0ZWRNb3YiLCJhY3R1YWxQYXJ0aWNpcGFudHMiLCJwYXJ0aWNpcGFudHNCeUluaXRpYXRpdmUiLCJhbGxIYXZlVmFsaWRNb3YiLCJldmVyeSIsImFsbEhhdmVTcGVlZFJvbGwiLCJsb2NhdGlvbnMiLCJsIiwibHAiLCJnZXRQYXJ0aWNpcGFudCIsIm5leHRBY3RpdmVQYXJ0aWNpcGFudCIsInNsb3dlc3RQcmV5IiwiZmFzdGVzdENoYXNlciIsImluY2x1ZGVMYXRlY29tZXJzIiwiaW5jbHVkZUVzY2FwZWQiLCJzbG93ZXN0UGFydGljaXBhbnQiLCJwYXJ0aWNpcGFudHNEYXRhIiwiY2xlYW5QYXJ0aWNpcGFudExpc3QiLCJwYXJ0aWNpYW50VXVpZCIsInBhcnRpY2lwYW50SW5kZXgiLCJvdmVyd3JpdGUiLCJ1cGRhdGVQYXJ0aWNpcGFudHMiLCJhc3Npc3RhbnRVdWlkIiwiYmVuZWZpY2lhcnlVdWlkIiwiYXNzaXN0YW50IiwiYmVuZWZpY2lhcnkiLCJhc3Npc3RhbnRJbmRleCIsImJlbmVmaWNpYXJ5SW5kZXgiLCJ1c2VNb3ZlbWVudEFjdGlvbnMiLCJhY3Rpb25zIiwiZGljZU51bWJlciIsImFjdGl2ZVBhcnRpY2lwYW50IiwiYWN0aXZhdGVQYXJ0aWNpcGFudCIsImRhdGFVcGRhdGUiLCJnZXRBY3RpdmF0ZVBhcnRpY2lwYW50VXBkYXRlRGF0YSIsImFjdGl2ZUxvY2F0aW9uIiwicFV1aWQiLCJwYXJ0aWNpcGFudHNEYXRhVXBkYXRlIiwicGFydGljaXBhbnRMb2NhdGlvbiIsImxvY2F0aW9uc0RhdGFVcGRhdGUiLCJnZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YSIsImNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24iLCJnZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbiIsImFjdGl2ZVBhcnRpY2lwYW50T2JzdGFjbGVDaGVjayIsIm1vdmVQYXJ0aWNpcGFudCIsInJvbGxVdWlkIiwibWV0aG9kIiwiaW5pdFRyYWNrIiwicHJvY2Vzc0xvY2F0aW9ucyIsImR1cGxpY2F0ZURhdGEiLCJmaXJzdCIsImxhc3QiLCJzdGFydGluZ0xpbmUiLCJsb2NhdGlvbnNJbmRleFN0YXJ0IiwiaW5pdEluZGV4U3RhcnQiLCJsb2NhdGlvbnNMZW5ndGgiLCJzdGFydGluZ0luZGV4IiwiZ2VuZXJhdGVOZXdVdWlkIiwiY2hhc2VMb2NhdGlvbnMiLCJlbmQiLCJjaGFzZVRyYWNrIiwiY2hhc2Vyc01pbk1vdiIsImZpbmRNaW5Nb3YiLCJjaGFzZXJzTWF4TW92IiwiZmluZE1heE1vdiIsInByZXlzTWluTW92IiwicHJleXNNYXhNb3YiLCJzdGFydGluZ1JhbmdlIiwidXBkYXRlZExpc3QiLCJjbGVhbkxvY2F0aW9uc0xpc3QiLCJsb2NhdGlvbkluZGV4IiwidXBkYXRlTG9jYXRpb25zTGlzdCIsInBhcnRpcGFudHNVdWlkQXJyYXkiLCJpbnNlcnRBdFV1aWQiLCJuZXdMb2NhdGlvbkluZGV4IiwibmV3TG9jYXRpb24iLCJsb2NEYXRhIiwiZ2V0Q2xlYXJBY3RpdmVMb2NhdGlvblVwZGF0ZURhdGEiLCJoYXNQYXJ0aWNpcGFudCIsImFjdGl2ZUFjdG9ySGFzU2tpbGwiLCJhY3RpdmVBY3RvclRlc3QiLCJwcmV2aW91c0xvY2F0aW9uIiwiYWN0aXZlSW5kZXgiLCJuZXh0TG9jYXRpb24iLCJzZXRMb2NhdGlvbkNvb3JkaW5hdGVzIiwiY29vcmRpbmF0ZXMiLCJjbGVhckxvY2F0aW9uQ29vcmRpbmF0ZXMiLCJzdGFydCIsInNldGNoYXNlVHJhY2tTY3JvbGwiLCJzdG9wIiwiZGVzdGluYXRpb25JbmRleCIsIm5ld1BhcnRpY2lwYW50c0RhdGEiLCJsb2NhdGlvbnNEYXRhIiwidW5pcXVlIiwicmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMiLCJsb2NhdGlvbk1vdmVkIiwib3JpZ2luSW5kZXgiLCJ0b3RhbE1vdmUiLCJvbGRQYXJ0aWNpcGFudHNMaXN0IiwibW92ZVRva2VuIiwicGFydGljcGFudERvY3VtZW50IiwiVG9rZW5Eb2N1bWVudCIsImZvdW5kVG9rZW5zIiwidmlld2VkIiwidGFyZ2V0UmVjdCIsIlBJWEkiLCJSZWN0YW5nbGUiLCJmb3VuZEZyZWVTcGFjZSIsIm92ZXJsYXBpbmdUb2tlbiIsImJvdW5kcyIsImludGVyc2VjdHMiLCJzaG93VG9rZW5Nb3ZlbWVudCIsImFuaW1hdGUiLCJ0byIsImNoYXNlVHJhY2tBY3RpdmVMb2NhdGlvblNjcm9sbFBvc2l0aW9uIiwiYWN0aXZlTG9jYXRpb25FbGVtZW50IiwibGVmdFNjcm9sbCIsIm9mZnNldExlZnQiLCJjbGllbnRXaWR0aCIsInByZXYiLCJyZW1TdHJpbmciLCJyZW1TaXplIiwicENvdW50IiwiX3RhYnMiLCJhY3RpdmVBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyIsInBhcnRpY2ljcGFudERhdGEiLCJJbnRsIiwiQ29sbGF0b3IiLCJjb21wYXJlIiwiYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzU2hvcnQiLCJDb0M3U2tpbGwiLCJuZXdQcm9wZXJ0aWVzIiwiaGFzQWN0aXZlRWZmZWN0cyIsImFjdGl2ZUVmZmVjdHMiLCJlZmZlY3RLZXlGdWxsIiwiZWZmZWN0S2V5U2hvcnQiLCJkZWx0YSIsImV4cCIsIkNvQzdWZWhpY2xlIiwiQ29DN0RlY2FkZXJEaWUiLCJEaWNlVGVybSIsInRlcm1EYXRhIiwiREVOT01JTkFUSU9OIiwiQ29DN0RlY2FkZXJEaWVPdGhlciIsIlNFVFRJTkdTIiwicHVscFJ1bGVzIiwiaW5pdGlhdGl2ZVJ1bGUiLCJjaG9pY2VzIiwib25DaGFuZ2UiLCJydWxlIiwiX3NldEluaXRpYXRpdmVPcHRpb25zIiwicHVscFJ1bGVEb3VibGVNYXhIZWFsdGgiLCJwdWxwUnVsZVRhbGVudHMiLCJwdWxwUnVsZUZhc3RlclJlY292ZXJ5IiwicHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kcyIsIm9wcG9zZWRSb2xsVGllQnJlYWtlciIsImRlY2ltYWxzIiwiQ29tYmF0IiwiQ29DN0dhbWVSdWxlU2V0dGluZ3MiLCJ0cnVlIiwiZmFsc2UiLCJzZXR0aW5nIiwicHVscFNlbGVjdGlvbiIsInJlZ2lzdGVyIiwib25DaGFuZ2VQdWxwU2VsZWN0Iiwib25DbGlja1B1bHAiLCJvblJlc2V0RGVmYXVsdHMiLCJjaGVja2JveCIsIkNvQzdBcmNoZXR5cGVTaGVldCIsImNoYXJhY05hbWUiLCJlbnJpY2hlZFN1Z2dlc3RlZE9jY3VwYXRpb25zIiwiZW5yaWNoZWRTdWdnZXN0ZWRUcmFpdHMiLCJjb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nIiwiQ29DN0Jvb2tTaGVldCIsInNwZWxsc0xlYXJuZWQiLCJleGhhdXN0ZWQiLCJzdHVkeUNvbXBsZXRlZCIsInNwZWxsTGlzdEVtcHR5IiwiZW5yaWNoZWRDb250ZW50IiwiYXR0ZW1wdEluaXRpYWxSZWFkaW5nIiwiX29uRGVsZXRlIiwiX29uU3BlbGxEZXRhaWwiLCJhdHRlbXB0U3BlbGxMZWFybmluZyIsImNoYW5nZVByb2dyZXNzIiwibW9kaWZ5T3RoZXJzR2FpbnMiLCJyZWRvRnVsbFN0dWR5IiwibW9kaWZ5VHlwZSIsInNwZWxsRGV0YWlsIiwiYWRkU3BlbGxzIiwiQ29DN0NvbnRhaW5lclNoZWV0Iiwic2xpZGVUb2dnbGUiLCJDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyIiwicGVybWlzc2lvbnMiLCJfb25Ecm9wUGFydGljaXBhbnQiLCJkcmFnc3RhcnQiLCJfb25Ub2tlblNlbGVjdG9yRHJhZ1N0YXJ0IiwiX29uQWN0aW9uIiwidmFsaWRhdGVQYXJ0aWNpcGFudCIsInNwZWVkQ2hlY2tSZWFkT25seSIsImluaXRSZWFkT25seSIsIm9wdGlvbnNMaXN0Iiwic2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdCIsImRyb3BTdHJpbmciLCJnZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhIiwib3ZlcnJpZGVNb3ZlbWVudEFjdGlvbiIsInJlY2FsY3VsYXRpb25OZWVkZWQiLCJhZGRQYXJ0aWNpcGFudCIsInBhcnRpY2lwYW50RXhjbHVkZWQiLCJtb3ZlbWVudEFjdGlvbkRlbHRhIiwiaW5jbHVkZUxhc3RDb21tZXJzIiwiZXhjbHVkZWRCZWNhdXNlIiwiQ29DN0NoYXNlU2hlZXQiLCJjbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMiLCJfb25EcmFnRW50ZXJQYXJ0aWNpcGFudCIsIl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50IiwiX29uQ2hhbmdlU2lkZSIsIl9vbkRlbGV0ZVBhcnRpY2lwYW50IiwiX29uUmVzZXRSb2xsIiwiX29uRGVsZXRlRHJpdmVyIiwiX29uQWRkUGFydGljaXBhbnQiLCJfb25Sb2xsUGFydGljaXBhbnQiLCJfb25Mb2NhdGlvbkNsaWNrIiwiX29uT2JzdGFjbGVUeXBlQ2xpY2siLCJfb25QYXJ0aWNpcGFudENvbnRyb2xDbGlja2VkIiwiX29uQ2hhc2VDb250cm9sQ2xpY2tlZCIsIl9vbkxvY2F0aW9uQ29udHJvbENsaWNrIiwiX2NhblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IiwiX29uUGluTG9jYXRpb25EcmFnU3RhcnQiLCJfb25DaGFzZVBhcnRpY2lwYW50Q2xpY2siLCJfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCIsIl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AiLCJfb25DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0IiwiX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIiwiZHJhZ292ZXIiLCJfb25EcmFnRW50ZXIiLCJfb25EcmFnTGVhdmUiLCJfZ2V0U3VibWl0RGF0YSIsImVkaXRvcnMiLCJjbGVhbmVkIiwiY2xlYW4iLCJvcmlnaW5hbExvY2F0aW9uIiwic3ViVHlwZSIsImZpbmRQYXJ0aWNpcGFudEluZGV4IiwiaW5pdGlhbE9wZW5pbmciLCJzY3JvbGwiLCJhY3RpdmF0ZVRhYiIsInNjcm9sbFRvIiwiYmVoYXZpb3IiLCJmaW5kTG9jYXRpb25JbmRleCIsImZpbmRMb2NhdGlvbiIsImFzc2lzdFBhcnRpY2lwYW50IiwibFV1aWQiLCJyZW1vdmVMb2NhdGlvbiIsImluc2VydExvY2F0aW9uIiwidG9nZ2xlUGFydGljaXBhbnRHdW4iLCJfb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMiLCJ0b2dnbGVCb251c0RpY2UiLCJjYXV0aW91c0FwcHJvYWNoIiwicmVtb3ZlUGFydGljaXBhbnQiLCJjdXRUb1RoZUNoYXNlIiwicmVzdGFydCIsInByb2dyZXNzVG9OZXh0Um91bmQiLCJzZWxlY3RvciIsImRyYWdJY29uIiwic2V0RHJhZ0ltYWdlIiwibG9jYXRpb25FbGVtZW50IiwiZHJhZ0V2ZW50Iiwib2xkTG9jYXRpb24iLCJfb25EcmFnT3ZlciIsImFsdGVyUGFydGljaXBhbnQiLCJzdGFuZGJ5VGV4dCIsInN0YW5kYnlSaWdodEljb24iLCJvbGRQYXJ0aWNpcGFudCIsInRwIiwiZ2V0VHlwZSIsIkNvQzdJdGVtU2hlZXRWMiIsIkNvQzdJdGVtU2hlZXQiLCJDb0M3Sm91cm5hbFNoZWV0IiwiSm91cm5hbFNoZWV0IiwiQ29DN01hY3JvQ29uZmlnIiwiTWFjcm9Db25maWciLCJDb0M3UGxheWxpc3RDb25maWciLCJQbGF5bGlzdENvbmZpZyIsIkNvQzdSb2xsVGFibGVDb25maWciLCJSb2xsVGFibGVDb25maWciLCJDb0M3U2NlbmVDb25maWciLCJTY2VuZUNvbmZpZyIsIkNvQzdTZXR1cFNoZWV0IiwiX29uQWRkQmlvIiwiX29uUmVtb3ZlU2VjdGlvbiIsIm90aGVySXRlbXMiLCJpdGVtc0xpc3RFbXB0eSIsIkNvQzdTa2lsbFNoZWV0IiwiX3NoZWV0VGFiIiwiaGFkTm9uQ2hhcmFjdGVyT3duZXIiLCJpc1NwZWNpYWxpemVkIiwiY2FuTW9kaWZ5U3BlYyIsIkNvQzdTcGVsbFNoZWV0IiwiY2FzdCIsIkNvQzdTdGF0dXNTaGVldCIsInN0YXR1c1R5cGUiLCJlbnJpY2hlZERlc2NyaXB0aW9uTm90ZXMiLCJDb0M3VGFsZW50U2hlZXQiLCJ0YWxlbnRUeXBlIiwiQ29DN1ZlaGljbGVTaGVldCIsImFybWVkIiwiX29uQWRkQXJtb3IiLCJfb25SZW1vdmVBcm1vciIsIl9vblRvZ2dsZUV4cGFuZCIsIm9sZFNpemUiLCJDb0M3V2VhcG9uU2hlZXQiLCJjb21iYXRTa2lsbCIsInByaWNlIiwiZW5yaWNoZWREZXNjcmlwdGlvblNwZWNpYWwiLCJfb25Qcm9wZXJ0eUNsaWNrIiwicGVyZm9ybUZpbHRlciIsImVyYUVsZW1lbnQiLCJuYW1lRmlsdGVyIiwiQ29DSUQiLCJjb21wZW5kaXVtSW5kZXhGaWVsZHMiLCJKb3VybmFsRW50cnkiLCJQbGF5bGlzdCIsIlJvbGxUYWJsZSIsIlNjZW5lIiwiZ2FtZVByb3BlcnR5TG9va3VwIiwiZG9jdW1lbnROYW1lTG9va3VwIiwibWFrZUdyb3VwUmVnRXgiLCJsYW5nRmFsbGJhY2siLCJub3RtaXNzaW5nIiwiZXJhVGV4dCIsInNwbGl0cyIsInJlZ0V4UGFydHMiLCJkb2N1bWVudHNGcm9tV29ybGQiLCJwcm9ncmVzc0JhciIsIlNjZW5lTmF2aWdhdGlvbiIsImRpc3BsYXlQcm9ncmVzc0JhciIsInBjdCIsImZpbHRlckFsbENvQ0lEIiwiY29tcGVuZGlhRG9jdW1lbnRzIiwiZG9jdW1lbnRzRnJvbUNvbXBlbmRpYSIsImZyb21Db0NJRFJlZ2V4QWxsIiwiYWxsRG9jdW1lbnRzIiwiZmlsdGVyQmVzdENvQ0lEIiwiZnJvbUNvQ0lEQmVzdCIsImJlc3RNYXRjaERvY3VtZW50cyIsImRvY0NvQ0lEIiwiY3VycmVudEV4aXN0cyIsImRvY0xhbmciLCJleGlzdGluZ0xhbmciLCJwcmVmZXJMYW5nIiwiZG9jUGFjayIsImV4aXN0aW5nUGFjayIsInByZWZlcldvcmxkIiwiZG9jUHJpb3JpdHkiLCJleGlzdGluZ1ByaW9yaXR5IiwiTUlOX1NBRkVfSU5URUdFUiIsImRvY0VyYXMiLCJnYW1lUHJvcGVydHkiLCJnZXRHYW1lUHJvcGVydHkiLCJjYW5kaWRhdGVEb2N1bWVudHMiLCJtYXRjaGluZ0VyYXMiLCJjb21wYXJlQ29DSURQcmlvIiwiZ2V0RG9jdW1lbnRUeXBlIiwic2NoZW1hIiwiaW5kZXhlZCIsImdldEluZGV4IiwiaW5kZXhJbnN0YW5jZXMiLCJqZSIsInJ0IiwiQ2FyZCIsImxpc3RlbiIsImxvYWRUZW1wbGF0ZXMiLCJwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyIsInJlZ2lzdGVyTWVudSIsInJlc3RyaWN0ZWQiLCJyZWdpc3RlclNldHRpbmdzIiwiRGVmYXVsdERpcmVjdG9yeSIsIndvcmxkIiwiWSIsIk4iLCJub2JvZHkiLCJldmVyeW9uZSIsImFsd2F5cyIsImNyZWF0aW9uIiwibmV2ZXIiLCJfc2V0Um9vdEZvbnRTaXplIiwic2lkZWJhciIsImNvbnRhaW4iLCJob29rcyIsIkFjdG9ycyIsInVucmVnaXN0ZXJTaGVldCIsInJlZ2lzdGVyU2hlZXQiLCJtYWtlRGVmYXVsdCIsIkl0ZW1zIiwiU2NlbmVzIiwiSm91cm5hbCIsIlJvbGxUYWJsZXMiLCJNYWNyb3MiLCJQbGF5bGlzdHMiLCJIYW5kbGViYXJzIiwicmVnaXN0ZXJIZWxwZXIiLCJTZXQiLCJ1bmNvbW1vbiIsImNvbXBlbmRpdW1GaWx0ZXIiLCJDb0M3RGVjYWRlckRTTkZhY2VzIiwiY29uc3RydXRvciIsInNldEZhY2VzIiwiZ2xvYmFsIiwic291cmNlRGllIiwiRGljZUZhY3RvcnkiLCJzeXN0ZW1zIiwiaGVpZ2h0VGV4dCIsImhlaWdodFRpcCIsIndpZHRoVGlwIiwiY2xlYXJUaW1lb3V0IiwiQ29DN1RvdXIiLCJUb3VyIiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsIm9ic2VydmVyIiwiZGlzY29ubmVjdCIsIm9ic2VydmUiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwiX3ByZVN0ZXAiLCJzdGVwSW5kZXgiLCJ3YWl0Rm9yRWxlbWVudCIsImN1cnJlbnRTdGVwIiwiX3Bvc3RTdGVwIiwiaGFzTmV4dCIsImlzUmVzZXR0aW5nIiwicmVzZXQiLCJFbmFibGVWYXJpYW50UnVsZXNFbiIsImNhbkJlUmVzdW1lZCIsInN0ZXBzIiwibG9jYWxpemF0aW9uIiwiRW5hYmxlVmFyaWFudFJ1bGVzRnIiLCJpbnN0cnVjdGlvbnNWZXJzaW9uIiwicmVhZE1lIiwidG91cnMiLCJ0b3VyTmFtZSIsInJlZ2lzdGVyVG91cnMiLCJDb0M3SG9va3MiLCJyZW5kZXJNZXNzYWdlSG9vayIsInJlbmRlckNoYXRNZXNzYWdlSG9vayIsIlBhcnNlTWVzc2FnZSIsImVudGl0eUNyZWF0ZVNlbGVjdFRhZyIsImVudGl0eVNvcnRlZExpc3QiLCJzaG93RXhwZXJpbWVudGFsIiwiZW50aXR5T3B0aW9uIiwiY2FwaXRhbGl6ZSIsImVtcHR5Iiwic2Vjb25kIiwiYWRkRGljZVByZXNldCIsImZvbnRTY2FsZSIsInBsYXllckxpc3QiLCJpbnNlcnRBZnRlciIsInByb2Nlc3NIdG1sIiwiZ21jcmVhdGVtZXNzYWdlYXMiLCJtZWxlZVRhcmdldCIsImdtdHJhZGVpdGVtdG8iLCJDb0M3U3lzdGVtU29ja2V0IiwiY3JlYXRlQ2hhcmFjdGVyRnJvbURhdGEiLCJjYWxsU29ja2V0IiwidXNlcklkIiwiZXJyb3JJZk1pc3NpbmciLCJpbmNsdWRlU2VsZiIsIl9vbkxlZnRDbGljayIsInN5c3RlbVRhYiIsImJlZm9yZSIsInNraWxsQ2hlY2tNYWNybyIsIndlYXBvbkNoZWNrTWFjcm8iLCJjaGVja01hY3JvIiwiY2FyZGNsYXNzIiwiaW5qZWN0Q1NTIiwic29ja2V0bGliIiwicmVnaXN0ZXJTeXN0ZW0iLCJpbml0RUNDIiwicmVuZGVyQ29tYmF0VHJhY2tlciIsImNvbW1hbmRzIiwicmVzIiwidG9Mb2NhbGl6ZSIsImxvY2FsaXplZCIsImVmZmVjdEluZGV4IiwiZGlyZWN0b3J5IiwiSXRlbURpcmVjdG9yeSIsIml0ZW1FbGVtZW50IiwiY3JlYXRlTWFjcm8iLCJjaGF0TGlzdGVuZXJzIiwib25VcGRhdGVDaGF0TWVzc2FnZSIsIl90YWJsZVNldHRpbmdzQ2hhbmdlZCIsImNoZWNrRm9yVXBkYXRlIiwiX29uQ2xpY2tJbmxpbmVSb2xsIiwiYWN0aXZhdGVHbG9iYWxMaXN0ZW5lciIsInRhYmxlQ2hvaWNlIiwiYm91dE9mTWFkbmVzc19TdW1tYXJ5IiwiYm91dE9mTWFkbmVzc19SZWFsVGltZSIsInNldFNjcm9sbCIsIm9uQ2xvc2UiLCJjaGFyYWN0ZXJTaGVldCIsIlBhcnNlQ2hhdEVudHJ5IiwiUGFyc2VTaGVldENvbnRlbnQiLCJnZXRCdXR0b25zIiwicmVuZGVyQ29udHJvbHMiLCJvbkRyb3BTb21ldGhpbmciXSwic291cmNlUm9vdCI6IiJ9