(()=>{"use strict";const COC7={eras:{standard:"CoC7.Era1920",modern:"CoC7.EraModern",modernPulp:"CoC7.EraModernPulp",pulp:"CoC7.EraPulp",downDarkerTrails:"CoC7.EraDownDarkerTrails",downDarkerTrailsPulp:"CoC7.EraDownDarkerTrailsPulp",darkAges:"CoC7.EraDarkAges",darkAgesPulp:"CoC7.EraDarkAgesPulp",regency:"CoC7.EraRegency",regencyPulp:"CoC7.EraRegencyPulp",gasLight:"CoC7.EraGasLight",invictus:"CoC7.EraInvictus"},monetaryFormatKeys:{decimalLeft:"decimalLeft",decimalRight:"decimalRight",integerLeft:"integerLeft",integerRight:"integerRight",lsd:"lsd",roman:"roman"},monetaryFormats:{decimalLeft:"CoC7.MonetaryFormatDecimalLeft",decimalRight:"CoC7.MonetaryFormatDecimalRight",integerLeft:"CoC7.MonetaryFormatIntegerLeft",integerRight:"CoC7.MonetaryFormatIntegerRight",lsd:"CoC7.MonetaryFormatLsd",roman:"CoC7.MonetaryFormatRoman"},monetaryTypeKeys:{none:"none",asses:"asses",sestertii:"sestertii",quinarii:"quinarii",denarii:"denarii",d:"d",s:"s",value:"value",multiplier:"multiplier"},monetaryTypes:{none:{name:"CoC7.MonetaryTypeNone",filter:[]},asses:{name:"CoC7.MonetaryTypeAsses",filter:["roman"]},sestertii:{name:"CoC7.MonetaryTypeSestertii",filter:["roman"]},quinarii:{name:"CoC7.MonetaryTypeQuinarii",filter:["roman"]},denarii:{name:"CoC7.MonetaryTypeDenarii",filter:["roman"]},d:{name:"CoC7.MonetaryTypeDeniers",filter:["lsd"]},s:{name:"CoC7.MonetaryTypeSous",filter:["lsd"]},value:{name:"CoC7.MonetaryTypeOne",filter:[]},multiplier:{name:"CoC7.MonetaryTypeCreditRating",filter:[]}},characteristics:{str:"CoC7.CharacStr",con:"CoC7.CharacCon",siz:"CoC7.CharacSiz",dex:"CoC7.CharacDex",app:"CoC7.CharacApp",int:"CoC7.CharacInt",pow:"CoC7.CharacPow",edu:"CoC7.CharacEdu"},skillProperties:{noadjustments:"CoC7.SkillNoAdjustments",noxpgain:"CoC7.SkillNoXpGain",special:"CoC7.SkillSpecial",rarity:"CoC7.SkillRarity",push:"CoC7.SkillPush",combat:"CoC7.SkillCombat",fighting:"CoC7.SkillFighting",firearm:"CoC7.SkillFirearm",requiresname:"CoC7.SkillRequiresName",keepbasevalue:"CoC7.SkillKeepBaseValue",picknameonly:"CoC7.SkillPickNameOnly",onlyone:"CoC7.SkillSpecializationIsUnique"},weaponProperties:{melee:"CoC7.Weapon.Property.Melee",rngd:"CoC7.WeaponRngd",mnvr:"CoC7.WeaponProperyManeuver",thrown:"CoC7.Weapon.Property.Thrown",shotgun:"CoC7.Weapon.Property.Shotgun",dbrl:"CoC7.WeaponDbrl",impl:"CoC7.WeaponImpl",brst:"CoC7.WeaponBrst",auto:"CoC7.WeaponAuto",ahdb:"CoC7.WeaponAhdb",addb:"CoC7.WeaponAddb",slnt:"CoC7.WeaponSlnt",spcl:"CoC7.WeaponSpcl",mont:"CoC7.WeaponMont",blst:"CoC7.WeaponBlst",stun:"CoC7.WeaponStun",rare:"CoC7.WeaponRare",burn:"CoC7.Weapon.Property.Burn"},spellProperties:{call:"CoC7.CallSpell",dismiss:"CoC7.DismissSpell",contact:"CoC7.ContactSpell",summon:"CoC7.SummonSpell",bind:"CoC7.BindSpell",enchantment:"CoC7.EnchantmentSpell",gate:"CoC7.GateSpell",combat:"CoC7.CombatSpell"},bookType:{mythos:"CoC7.MythosBook",occult:"CoC7.OccultBook",other:"CoC7.Other"},talentType:{physical:"CoC7.PhysicalTalent",mental:"CoC7.MentalTalent",combat:"CoC7.CombatTalent",miscellaneous:"CoC7.MiscellaneousTalent",basic:"CoC7.BasicTalent",insane:"CoC7.InsaneTalent",other:"CoC7.OtherTalent"},statusType:{mania:"CoC7.Mania",phobia:"CoC7.Phobia"},occupationProperties:{classic:"CoC7.Classic",lovecraftian:"CoC7.Lovecraftian",modern:"CoC7.Modern",pulp:"CoC7.Pulp"},formula:{}};COC7.formula.actor={"@STR":"this.system.characteristics.str.value","@CON":"this.system.characteristics.con.value","@SIZ":"this.system.characteristics.siz.value","@DEX":"this.system.characteristics.dex.value","@APP":"this.system.characteristics.app.value","@INT":"this.system.characteristics.int.value","@POW":"this.system.characteristics.pow.value","@EDU":"this.system.characteristics.edu.value"},COC7.formula.actorsheet={"@STR":"this.actor.system.characteristics.str.value","@CON":"this.actor.system.characteristics.con.value","@SIZ":"this.actor.system.characteristics.siz.value","@DEX":"this.actor.system.characteristics.dex.value","@APP":"this.actor.system.characteristics.app.value","@INT":"this.actor.system.characteristics.int.value","@POW":"this.actor.system.characteristics.pow.value","@EDU":"this.actor.system.characteristics.edu.value"},COC7.status={tempoInsane:"tempoInsane",indefInsane:"indefInsane",unconscious:"unconscious",criticalWounds:"criticalWounds",dying:"dying",prone:"prone",dead:"dead"},COC7.newBookName="CoC7.NewBookName",COC7.newSkillName="CoC7.NewSkillName",COC7.newSpellName="CoC7.NewSpellName",COC7.newItemName="CoC7.NewItemName",COC7.newWeaponName="CoC7.NewWeaponName",COC7.creatureFightingSkill="CoC7.creatureFightingSkill",COC7.fightingSpecializationName="CoC7.FightingSpecializationName",COC7.firearmSpecializationName="CoC7.FirearmSpecializationName",COC7.combatCards={fightBack:"CoC7.FightBack",dodge:"CoC7.Dodge",maneuver:"CoC7.Maneuver",noResponse:"CoC7.NoResponse"};class CoC7Dice{static async roll(modif=0,rollMode=null,hideDice=!1){let roll,alternativeDice="";game.modules.get("dice-so-nice")?.active&&(modif<0?alternativeDice=game.settings.get("CoC7","tenDiePenalty"):modif>0&&(alternativeDice=game.settings.get("CoC7","tenDieBonus"))),roll=game.CoC7.dev.dice.alwaysCrit&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.crit01):game.CoC7.dev.dice.alwaysFumble&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.fumble99):await new Roll("1dt"+(""!==alternativeDice?"+1do["+alternativeDice+"]":"+1dt").repeat(Math.abs(modif))+"+1d10").roll({async:!0});const result={unit:{total:0,results:[]},tens:{total:0,results:[]},total:0,roll};rollMode&&(result.rollMode=rollMode),hideDice&&(result.hideDice=hideDice);for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?result.tens.results.push(d.total):(result.unit.total=10===d.total?0:d.total,result.unit.results.push(result.unit.total));if(modif<0)result.tens.total=0===result.unit.total&&result.tens.results.includes(0)?100:Math.max(...result.tens.results);else if(0===result.unit.total){const dice=result.tens.results.filter((t=>t>0));result.tens.total=0===dice.length?100:Math.min(...dice)}else result.tens.total=Math.min(...result.tens.results);return result.total=result.unit.total+result.tens.total,result}static async showRollDice3d(roll){if(game.modules.get("dice-so-nice")?.active){const syncDice=game.settings.get("CoC7","syncDice3d"),chatData={whisper:null,blind:!1};ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode")),await game.dice3d.showForRoll(roll,game.user,syncDice,chatData.whisper,chatData.blind)}}static async combinedRoll(options){options.pool=options.pool??{},options.pool[0]=!1;const keys=Object.keys(options.pool).map((v=>parseInt(v,10)));let penaltyDice=Math.abs(Math.min(0,Math.min(...keys))),bonusDice=Math.max(0,Math.max(...keys));const hasDSN=game.modules.get("dice-so-nice")?.active,pool=[];pool.push("1dt+1d10"),penaltyDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDiePenalty")+"]":"1dt").repeat(Math.abs(penaltyDice))),bonusDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDieBonus")+"]":"1dt").repeat(Math.abs(bonusDice)));const roll=await new Roll(pool.join("")).roll({async:!0}),result={groups:{baseDie:0,penaltyDice:[],bonusDice:[]},unit:0,roll};let baseSet=!1;for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?baseSet?penaltyDice>0?(result.groups.penaltyDice.push(d.total),penaltyDice--):(result.groups.bonusDice.push(d.total),bonusDice--):(result.groups.baseDie=d.total,baseSet=!0):result.unit=10===d.total?0:d.total;const output={};for(const key in options.pool){output[key]={unit:{total:result.unit,results:[result.unit]},tens:{total:0,results:[]},total:0,roll};const modif=parseInt(key,10);let modifier=modif;output[key].tens.results.push(result.groups.baseDie);for(const offset=Math.abs(modifier);modifier<0;modifier++)output[key].tens.results.push(result.groups.penaltyDice[modifier+offset]);for(const offset=modifier;modifier>0;modifier--)output[key].tens.results.push(result.groups.bonusDice[Math.abs(modifier-offset)]);if(modif<0)output[key].tens.total=0===output[key].unit.total&&output[key].tens.results.includes(0)?100:Math.max(...output[key].tens.results);else if(0===output[key].unit.total){const dice=output[key].tens.results.filter((t=>t>0));output[key].tens.total=0===dice.length?100:Math.min(...dice)}else output[key].tens.total=Math.min(...output[key].tens.results);output[key].total=output[key].unit.total+output[key].tens.total}return output}static fumble99={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]}],total:99,evaluated:!0};static crit01={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:10,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:1,active:!0}]}],total:1,evaluated:!0}}class CoC7ContentLinkDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{id:"link-creation",classes:["coc7","active-effect-sheet"],title:game.i18n.localize("CoC7.CreateLink"),dragDrop:[{dragSelector:null,dropSelector:".container"}],template:"systems/CoC7/templates/apps/link-creation.html",closeOnSubmit:!1,width:560,height:"auto",tabs:[{navSelector:".tabs",contentSelector:".effect-options",initial:"details"}]})}async getData(){const sheetData=await super.getData();return sheetData.checkType=[{key:CoC7Link.CHECK_TYPE.CHECK,label:game.i18n.localize("CoC7.Check")},{key:CoC7Link.CHECK_TYPE.SANLOSS,label:game.i18n.localize("CoC7.SanityCheck")},{key:CoC7Link.CHECK_TYPE.ITEM,label:game.i18n.localize("CoC7.ItemWeapon")},{key:CoC7Link.CHECK_TYPE.EFFECT,label:game.i18n.localize("EFFECT.TabEffects")}],sheetData.linkType=[{key:CoC7Link.LINK_TYPE.CHARACTERISTIC,label:game.i18n.localize("CoC7.Characteristic")},{key:CoC7Link.LINK_TYPE.ATTRIBUTE,label:game.i18n.localize("CoC7.Attribute")},{key:CoC7Link.LINK_TYPE.SKILL,label:game.i18n.localize("CoC7.Skill")}],sheetData.attributeType=[{key:"lck",label:game.i18n.localize("CoC7.Luck")},{key:"san",label:game.i18n.localize("CoC7.Sanity")}],sheetData.effectModes=Object.entries(CONST.ACTIVE_EFFECT_MODES).reduce(((obj,e)=>(obj[e[1]]=game.i18n.localize("EFFECT.MODE_"+e[0]),obj)),{}),sheetData.characteristicType=CoCActor.getCharacteristicDefinition(),sheetData.link=sheetData.object.link,sheetData.fromGame=sheetData.link.isItemCheck||sheetData.link.isSkillCheck,sheetData.fromDirectory="fromDirectory"===sheetData.object.hasID,sheetData.fromCompendium="fromCompendium"===sheetData.object.hasID,sheetData.isSetFromGame=sheetData.link.id&&(sheetData.fromDirectory||sheetData.fromCompendium),sheetData.difficultyLevel=CoC7Check.difficultyLevel,sheetData.actorNames=sheetData.object.actors.map((a=>a.name)).join(", "),sheetData}activateListeners(html){super.activateListeners(html),html.find("select[name=type],select[name=check],select[name=attributeKey],select[name=characteristicKey],input[type=checkbox]").change(this._onChangeSubmit.bind(this)),html.find(".effect-control").click(this._onEffectControl.bind(this))}_onChangeSubmit(event){switch(event.currentTarget.name){case"fromCompendium":case"fromDirectory":this.object.hasID=event.currentTarget.name===this.object.hasID?"":event.currentTarget.name}this._onSubmit(event)}_onEffectControl(event){event.preventDefault();const button=event.currentTarget;switch(button.dataset.action){case"add":return this._addEffectChange();case"delete":button.closest(".effect-change").remove(),this._onSubmit(event)}}async _addEffectChange(){const idx=this.object.link.effect.changes.length;return this.submit({preventClose:!0,updateData:{[`effect.changes.${idx}`]:{key:"",mode:CONST.ACTIVE_EFFECT_MODES.ADD,value:""}}})}async _updateObject(event,formData){let hasEffect=!1;const effect={duration:{},changes:[]};for(const key in formData)switch(key){case"checkName":this.object.link.setValue("name",formData.checkName);break;case"blind":case"difficulty":case"displayName":case"icon":case"id":case"modifier":case"pack":case"sanMin":case"sanMax":case"sanReason":this.object.link.setValue(key,formData[key]);break;case"hasModifiers":case"hasLabel":case"hasIcon":this.object[key]=formData[key];break;case"effect.label":effect.label=formData[key],hasEffect=!0;break;case"effect.icon":effect.icon=formData[key],hasEffect=!0;break;case"effect.tint":effect.tint=formData[key],hasEffect=!0;break;case"effect.disabled":effect.disabled=formData[key],hasEffect=!0;break;case"effect.duration.seconds":effect.duration.seconds=formData[key],hasEffect=!0;break;case"effect.duration.rounds":effect.duration.rounds=formData[key],hasEffect=!0;break;case"effect.duration.turns":effect.duration.turns=formData[key],hasEffect=!0;break;default:{const match=key.match(/^effect\.changes\.(\d+)\.key$/);match&&(effect.changes.push({key:formData[key],mode:formData["effect.changes."+match[1]+".mode"],value:formData["effect.changes."+match[1]+".value"]}),hasEffect=!0)}}hasEffect&&this.object.link.setValue("object",effect);const target=event.currentTarget;if(target){switch(target.name){case"type":this.object.link.setValue("check",target.value),target.value===CoC7Link.CHECK_TYPE.CHECK&&(this.object.link.setValue("linkType",CoC7Link.LINK_TYPE.SKILL),this.object.link.setValue("name",""));break;case"check":this.object.link.setValue("linkType",target.value),target.value===CoC7Link.LINK_TYPE.CHARACTERISTIC?this.object.link.setValue("name",CoCActor.getCharacteristicDefinition()[0].key):target.value===CoC7Link.LINK_TYPE.ATTRIBUTE?this.object.link.setValue("name","lck"):this.object.link.setValue("name","");break;case"attributeKey":case"characteristicKey":this.object.link.setValue("name",target.value)}if("submit"===event.type){switch(event.submitter.dataset.action){case"clipboard":CoC7Utilities.copyToClipboard(this.object.link.link);break;case"chat":CoC7Link.toChatMessage(this.object.link.object);break;case"whisper-owner":CoC7Link.toWhisperMessage(this.object.link.object,this.object.actors);break;case"whisper-selected":if(!canvas.tokens.controlled.length)return void ui.notifications.warn(game.i18n.localize("CoC7.ErrorNoTokensSelected"));CoC7Link.toWhisperMessage(this.object.link.object,canvas.tokens.controlled.filter((t=>t.actor.owners.length)).map((t=>t.actor)))}return}}this.render(!0)}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("CoC7Link"===data.type)this.setLink(await CoC7Link.fromDropData(data)),this.render(!0);else if("Folder"===data.type&&"Actor"===data.documentName||["Item","Actor"].includes(data.type)){const dataList=await CoC7Utilities.getDataFromDropEvent(event,data.documentName??data.type);data.documentName??"Actor"===data.type?(this.object.actors=dataList.filter((a=>a.owners.length)),this.render(!0)):1===dataList.length&&["skill","weapon"].includes(dataList[0].type)&&(dataList[0].pack?(this.object.hasID="fromCompendium",this.object.link.setValue("pack",dataList[0].pack)):this.object.hasID="fromDirectory",this.object.link.setValue("id",dataList[0].id),this.object.link.setValue("name",dataList[0].name),this.render(!0))}}setLink(link){return this.object.link=link,""!==link.pack?this.object.hasID="fromCompendium":""!==link.id&&(this.object.hasID="fromDirectory"),link.difficulty===CoC7Check.difficultyLevel.regular&&0===parseInt(link.modifier,10)||(this.object.hasModifiers=!0),""!==link.displayName&&(this.object.hasLabel=!0),""!==link.icon&&(this.object.hasIcon=!0),""}static async create(linkData={},option={}){const object=mergeObject({link:null,hasID:"",hasModifiers:!1,hasLabel:!1,hasIcon:!1,actors:[]},option),dialog=new CoC7ContentLinkDialog(object,{});dialog.setLink(await CoC7Link.fromDropData(linkData)),dialog.render(!0)}}function createInlineRoll(roll){const data={cls:["inline-roll"],dataset:{}};try{data.cls.push("inline-result"),data.result=roll.total,data.title=roll.formula,data.dataset.roll=escape(JSON.stringify(roll))}catch(err){return null}const a=document.createElement("a");a.classList.add(...data.cls),a.title=data.title;for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.innerHTML=`<i class="fas fa-dice-d20"></i> ${data.result}`,a}function isCtrlKey(event){return!1!==event&&(event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}class chatHelper{static hyphenToCamelCase(string){return string.replace(/-([a-z])/g,(function(string){return string[1].toUpperCase()}))}static async createMessage(title,message,options={}){const messageData={};messageData.flavor=title,messageData.speaker=options.speaker||ChatMessage.getSpeaker(),options.whisper&&(messageData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER,messageData.whisper=options.whisper),void 0!==options.roll&&(messageData.roll=options.roll,messageData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,messageData.rollMode=CONST.DICE_ROLL_MODES.SELF),messageData.user=game.user.id,messageData.content=message,ChatMessage.create(messageData).then((msg=>msg))}static camelCaseToHyphen(string){return string.replace(/([A-Z])/g,(function(string){return"-"+string.toLowerCase()}))}static getActorFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const token=chatHelper.getTokenFromKey(key);return token?.actor}return game.actors.get(key)||null}static getSpeakerFromKey(actorKey){const speaker={},actor=chatHelper.getActorFromKey(actorKey);if(actorKey.includes(".")){const[sceneId,tokenId]=actorKey.split(".");speaker.token=tokenId,speaker.scene=sceneId,actor.token?.name&&(speaker.alias=actor.token.name),speaker.actor=actor.id}else speaker.actor=actorKey,speaker.alias=actor.name;return speaker}static attachObjectToElement(object,element,objectName=""){for(const prop of Object.keys(object))prop.startsWith("_")||("object"==typeof object[prop]?chatHelper.attachObjectToElement(object[prop],element,`${objectName}:${prop}:`):element.dataset[`${objectName}${prop}`]=object[prop])}static getObjectFromElement(object,element){function deserialize(obj,key,value){if(key.startsWith(":")){const s=key.slice(1),objProp=s.slice(s.indexOf(":")+1),objName=s.substring(0,s.indexOf(":"));void 0===obj[objName]&&(obj[objName]={}),deserialize(obj[objName],objProp,value)}else"true"===value?obj[key]=!0:"false"===value?obj[key]=!1:Number(value).toString()===value?obj[key]=Number(value):obj[key]=value}if(element&&object)for(const prop of Object.keys(element.dataset)){if("template"===prop)return;deserialize(object,prop,element.dataset[prop])}}static getTokenFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=duplicate(scene.document)),token}}{const actor=game.actors.get(key);return chatHelper.getActorToken(actor)}}static getActorToken(actor){return actor?actor.token||actor.prototypeToken:null}static getActorImgFromKey(actorKey){if(!actorKey)return null;if(game.settings.get("CoC7","useToken")){const token=chatHelper.getTokenFromKey(actorKey);if(token&&(token.document||token).texture.src&&-1===(token.document||token).texture.src.indexOf("*"))return(token.document||token).texture.src}const actor=chatHelper.getActorFromKey(actorKey);return game.settings.get("CoC7","useToken")&&actor.prototypeToken&&actor.prototypeToken.texture.src&&-1===actor.prototypeToken.texture.src?.indexOf("*")?actor.prototypeToken.texture.src:actor.img}static getDistance(startToken,endToken){if(void 0===endToken.center&&void 0!==endToken.id&&startToken.scene?.id){const scene=game.scenes.get(startToken.scene.id);if(void 0!==scene?.tokens){const tokens=scene?.tokens.filter((token=>token.actor.id===endToken.data.document.id)).map((token=>token.object));1===tokens.length&&(endToken=tokens[0])}}let distance={gridUnit:0,value:0,unit:canvas.scene.grid.units};if(void 0!==startToken&&void 0!==startToken.center&&void 0!==endToken&&void 0!==endToken.center){const ray=new Ray(startToken.center,endToken.center),segment=[{ray}];if(distance={gridUnit:ray.distance/canvas.scene.grid.size,value:canvas.grid.measureDistances(segment,{gridSpaces:game.settings.get("CoC7","gridSpaces")})[0],unit:canvas.scene.grid.units},game.settings.get("CoC7","distanceElevation")){const elevation=Math.abs((startToken.document.elevation||0)-(endToken.document.elevation||0));distance.value=Math.sqrt(distance.value*distance.value+elevation*elevation)}}else ui.notifications.warn(game.i18n.localize("CoC7.MessageDistanceCalculationFailure"));return distance}static toYards(distance){return"ft"===distance.unit?distance.value/3:distance.value}}class CoC7Roll{static getFromCard(card){const rollDiv=card.querySelector("div.dice-roll");if(!rollDiv)return null;const roll=new CoC7Roll;return chatHelper.getObjectFromElement(roll,rollDiv),roll}get resultType(){switch(this.successLevel=parseInt(this.successLevel),this.successLevel){case CoC7Check.successLevel.regular:return game.i18n.format("CoC7.RegularSuccess");case CoC7Check.successLevel.hard:return game.i18n.format("CoC7.HardSuccess");case CoC7Check.successLevel.extreme:return game.i18n.format("CoC7.ExtremeSuccess");case CoC7Check.successLevel.critical:return game.i18n.format("CoC7.CriticalSuccess");case CoC7Check.successLevel.fumble:return game.i18n.format("CoC7.Fumble");case CoC7Check.successLevel.failure:return game.i18n.format("CoC7.Failure");default:return null}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get item(){return this.itemId&&this.actor?this.actor.items.get(this.itemId):null}get skill(){return this.skillId&&this.actor?this.actor.items.get(this.skillId):null}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}static getFromElement(element,object=null){if(!element)return;const roll=object||new CoC7Roll;chatHelper.getObjectFromElement(roll,element),roll.dices={tens:[],unit:{}},chatHelper.getObjectFromElement(roll.dices,element.querySelector(".dice-result")),roll.dices.hasBonus=0!==roll.diceModifier,roll.dices.bonus=Math.abs(roll.diceModifier),roll.dices.bonusType=roll.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus");const tenDice=element.querySelector(".ten-dice");if(tenDice)for(const d of tenDice.querySelectorAll("li")){const die={selected:!1,isMax:!1,isMin:!1,value:-1};chatHelper.getObjectFromElement(die,d),roll.dices.tens.push(die)}const unitDie=element.querySelector(".unit-die")?element.querySelector(".unit-die").querySelector("li"):null;roll.dices.unit.value=unitDie?parseInt(unitDie.dataset.value):null,roll.increaseSuccess=[];const increaseSuccess=element.querySelector(".increase-success");if(increaseSuccess&&increaseSuccess.querySelectorAll("button"))for(const isl of increaseSuccess.querySelectorAll("button")){const newSuccesLevel={};chatHelper.getObjectFromElement(newSuccesLevel,isl),roll.increaseSuccess.push(newSuccesLevel)}return roll.luckNeeded&&(roll.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:roll.luckNeeded})),object?void 0:roll}static getFromCheck(check){const roll=new CoC7Roll;return roll.rollType=check.rollType,roll.side=check.side,roll.action=check.action,roll.refMessageId=check.refMessageId,roll.referenceMessageId=check.referenceMessageId,roll.successLevel=check.successLevel,roll.difficulty=check.difficulty,roll.skillId=check.skill?check.skill.id:null,roll.itemId=check.item?check.item.id:null,roll.diceMod=check.diceModifier,roll.value=parseInt(check.rawValue),roll.fumble=check.isFumble,roll.critical=check.isCritical,roll.characteristic=check.characteristic?check.characteristic:null,roll.result=check.dice.total,roll.actorKey=check.actor.tokenKey,check.actor.isToken?(roll.tokenId=check.actor.tokenKey,roll.actorId=null):(roll.tokenKey=null,roll.actorId=check.actor.tokenKey),roll}static attachCheckToElement(htmlElement,check){const roll=CoC7Roll.getFromCheck(check);return roll.attachToElement(htmlElement),roll}attachToElement(htmlElement){chatHelper.attachObjectToElement(this,htmlElement)}}class CoC7Damage{static getMainDie(damageString){return damageString.toLowerCase().includes("d20")?"d20":damageString.toLowerCase().includes("d12")?"d12":damageString.toLowerCase().includes("d10")?"d10":damageString.toLowerCase().includes("d8")?"d8":damageString.toLowerCase().includes("d4")?"d4":"d6"}static getFromElement(element,object=null){if(!element)return;const damage=object||{};chatHelper.getObjectFromElement(damage,element);const rolls=element.querySelector(".dice-rolls").querySelectorAll("li");damage.rolls=[];for(const r of rolls){const roll={};chatHelper.getObjectFromElement(roll,r),damage.rolls.push(roll)}return object?void 0:damage}}class RollDialog{static async create(options={}){options.difficulty&&(options.difficultyLevel={},CoC7Check.difficultyLevel.unknown===options.difficulty&&(options.difficultyLevel.unknown=!0),CoC7Check.difficultyLevel.regular===options.difficulty&&(options.difficultyLevel.regular=!0),CoC7Check.difficultyLevel.hard===options.difficulty&&(options.difficultyLevel.hard=!0),CoC7Check.difficultyLevel.extreme===options.difficulty&&(options.difficultyLevel.extreme=!0)),options.name&&!options.displayName&&(options.displayName=options.name);const unknownDifficultyDefault="unknown"===game.settings.get("CoC7","defaultCheckDifficulty"),data={allowFlatDiceModifier:game.settings.get("CoC7","allowFlatDiceModifier")&&!options.disableFlatDiceModifier,allowFlatThresholdModifier:game.settings.get("CoC7","allowFlatThresholdModifier")&&!options.disableFlatThresholdModifier,difficulty:CoC7Check.difficultyLevel,unknownDifficultyDefault,hideDifficulty:options.hideDifficulty??!1,options};void 0!==options.cardType&&(!options.forcedCardType??1)&&(data.cardTypes=CoC7ChatMessage.cardTypes(options));const html=await renderTemplate("systems/CoC7/templates/apps/bonus.html",data);return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:options.displayName?game.i18n.format("CoC7.BonusSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.BonusSelectionWindow"),content:html,buttons:{roll:{label:game.i18n.localize("CoC7.RollDice"),callback:html=>(formData=new FormData(html[0].querySelector("#bonus-roll-form")),resolve(formData))}},default:"roll",close:()=>{}});dlg.render(!0)}))}}class RollCard{constructor(){this.rolls=[],this.initiator=null}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);for(let index=0;index<card.rolls.length;index++)"Object"===card.rolls[index]?.constructor?.name&&(card.rolls[index]=Object.assign(new CoC7Check,card.rolls[index]),card.rolls[index].rolled&&(card.rolls[index]._htmlRoll=await card.rolls[index].getHtmlRoll()));return card}static async _onToggle(event){event.preventDefault();const span=event.currentTarget;if(span&&span.classList.contains("gm-select-only")&&!game.user.isGM)return;const message=span.closest(".chat-message"),card=await this.fromMessageId(message.dataset.messageId);if(!card)return;const flag=span.dataset.flag;if(!flag)return;const toggle=span.closest(".toggle");if(toggle){const buttons=toggle.querySelectorAll(".toggle-switch");for(const b of buttons)card.unsetFlag(b.dataset.flag);card.setFlag(flag)}else card.toggleFlag(flag);card.updateChatCard()}static async dispatch(data){if(game.user.isGM){let card,messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===data.roll.initiator)));if(messages.length){const timestamp=new Date(messages[0].timestamp);86400<(new Date-timestamp)/1e3&&(await messages[0].setFlag("CoC7","state","resolved"),messages=[])}card=messages.length?await this.fromMessage(messages[0]):new this,void 0!==data._rollMode&&(card._rollMode=data._rollMode),await card.process(data)}else game.socket.emit("system.CoC7",data)}async toMessage(){const html=await renderTemplate(this.config.template,this),htmlCardElement=$(html);htmlCardElement[0].dataset.object=escape(this.dataString);const chatData={user:game.user.id,flavor:game.i18n.localize(this.config.title),content:htmlCardElement[0].outerHTML,flags:{CoC7:{type:this.config.type,state:"initiated",initiator:this.initiator}}};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0);return await ChatMessage.create(chatData)}async updateChatCard(){if(await this.compute(),this.messageId){const html=await renderTemplate(this.config.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}await this.toMessage()}updateRoll(data){data.fromGM||Object.assign(this.rolls[data.rank],data.roll)}addRollData(data){const check=Object.assign(new CoC7Check,data.roll);this.rolls.push(check),"combinedCard"===this.config.type&&(this.initiator=data.roll.initiator)}addRoll(data){this.rolls.push(data)}removeRoll(rank){this.rolls.splice(rank,1)}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultConfig(){return{exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get winners(){return this.rolls.filter((r=>r.winner))}get winner(){if(this.winners.length)return this.winners[0]}get loosers(){return this.rolls.filter((r=>!r.winner))}get looser(){if(this.loosers.length)return this.loosers[0]}get hasWinner(){return this.winners.length>0}get isKeeper(){return game.user.isGM}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.config.exclude?.includes(key)&&!key.startsWith(this.config.excludeStartWith))return value}))}}class CombinedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.combined .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.combined a",CombinedCheckCard._onClick.bind(this)),html.on("click",".roll-card.combined button",CombinedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/combined-roll.html",type:"combinedCard",title:"CoC7.CombinedRollCard"})}get config(){return CombinedCheckCard.defaultConfig}get successCount(){if(this.rolled){let count=0;for(const r of this.rolls)r.passed&&(count+=1);return count}}get mainActorKey(){return this.rolls[0]?.actor?.actorKey||void 0}get success(){if(void 0!==this.successCount)return this.any?this.successCount>0:this.all?this.successCount===this.rolls.length:void 0}get failure(){if(void 0!==this.success)return!this.success}get checkGMInitiator(){return game.users.get(this.initiator)?.isGM}async getHtmlRoll(){if(!this.rolled)return;const check=new CoC7Check;return await check._perform({roll:this._roll[check.diceModifier||0],silent:!0}),await check.getHtmlRoll({hideSuccess:!0})}process(data){switch(data.action){case"new":case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data);break;case"assignRoll":this.assignRoll(data)}game.user.isGM?this.updateChatCard():game.socket.emit("system.CoC7",data)}async assignRoll(data){game.user.isGM&&(this.rolled||(this.rolled=!0,this._roll=data.roll))}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await CombinedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-card":{const pool={};for(const dice of card.rolls){const diceModifier=parseInt(dice.diceModifier,10);isNaN(diceModifier)||(pool[diceModifier]=!1)}const roll=await CoC7Dice.combinedRoll({pool});roll.initiator=game.user.id;const data={type:this.defaultConfig.type,action:"assignRoll",fromGM:game.user.isGM,roll};AudioHelper.play({src:CONFIG.sounds.dice},!0),card.process(data);break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM,roll:{initiator:game.user.id}};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(){if(this._roll){this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.data));for(const r of this.rolls)r.rolled||(r.modifier=r.diceModifier||0,r.difficulty=r.difficulty||CoC7Check.difficultyLevel.regular,r.flatDiceModifier=r.flatDiceModifier||0,r.flatThresholdModifier=r.flatThresholdModifier||0,await r._perform({roll:this._roll[r.modifier],silent:!0}));for(let i=0;i<this.rolls.length;i++)this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));this._htmlRoll=await this.getHtmlRoll()}}closeCard(){this.closed=!0}}class InteractiveChatCard{constructor(options={}){this._options=options}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this),htmlCardElement=$(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatData=mergeObject({user:game.user.id,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}this.toMessage()}activateListeners(html){html.on("click",".interactive-card .ic-radio-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .ic-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .submit",this._onSubmit.bind(this)),html.on("focusout","input",this._onSubmit.bind(this)),html.on("click",".interactive-card button",this._onButton.bind(this)),html.on("keydown","form",this._onKey.bind(this))}static async bindListeners(html){const htmlCardElement=html[0].querySelector(".chat-card");if(!htmlCardElement)return;if(!htmlCardElement.dataset.cardClass)return;if(!Object.getOwnPropertyNames(game.CoC7.cards).includes(htmlCardElement.dataset.cardClass))return;const card=await InteractiveChatCard.fromHTMLCardElement(htmlCardElement),typedCard=Object.assign(new game.CoC7.cards[htmlCardElement.dataset.cardClass],card);typedCard.assignObject(),typedCard.activateListeners(html)}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;this[action]&&this[action]({event,update:!0})}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(".interactive-card");if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).toObject();data=diffObject(this,expandObject(data));for(const[key,value]of Object.entries(data))this[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{classes:["interactive-card"],exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));if(!cardData.messageId){const message=card.closest(".message");cardData.messageId=message?.dataset?.messageId}return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);return await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ic-radio");if(toggle){const buttons=toggle.querySelectorAll(".ic-radio-switch");for(const b of buttons)this.unsetFlag(b.dataset.flag);this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(".interactive-card");card&&this._update(card),this.updateChatCard()}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get isTargetOwner(){return this.target.isOwner}get isKeeper(){return game.user.isGM}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor||this.targetToken.data.actor||this.targetToken.data.document:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}}class DamageCard extends InteractiveChatCard{static get defaultOptions(){return mergeObject(super.defaultOptions,{exclude:["_targetToken","_targetActor","_htmlRoll","_htmlInlineRoll"].concat(super.defaultOptions.exclude),template:"systems/CoC7/templates/chat/cards/damage.html"})}async assignObject(){this.damageRoll&&"Object"===this.damageRoll.constructor.name&&(this.damageRoll=Roll.fromData(this.damageRoll))}_onButton(event){super._onButton(event)}get critical(){return this.options.critical}set critical(x){this._options.critical=x}get impale(){return void 0===this._impale?this.weapon.impale:this._impale}set impale(x){this._impale=x}get isDamageFormula(){return"string"==typeof this.damageFormula&&(!!isNaN(Number(this.damageFormula))&&Roll.validate(this.damageFormula))}get isDamageNumber(){return!isNaN(Number(this.damageFormula))}get isArmorForula(){return"string"==typeof this.armor&&(!!isNaN(Number(this.armor))&&Roll.validate(this.armor))}get totalDamageString(){let damage=Number(this.isDamageNumber?this.damageFormula:this.roll.total);return!this.ignoreArmor&&((isNaN(Number(this.armor))||Number(this.armor)>0)&&(damage-=Number(this.armor)),!isNaN(Number(this.armor))&&damage<=0)?game.i18n.localize("CoC7.ArmorAbsorbsDamage"):damage}get noDamage(){if(this.rolled){const damage=this.isDamageNumber?this.damageFormula:this.roll.total;return this.ignoreArmor?!!(damage<=0):!isNaN(Number(this.armor))&&!!(damage-Number(this.armor)<=0)}return!1}async updateChatCard(){if(!this.options.fastForward||this.roll||this.isDamageNumber||await this.rollDamage({update:!1}),this.isDamageNumber||this.roll&&null!=this.roll.total||this.hardrolled?this.rolled=!0:this.rolled=!1,!this.options.fastForward||this.damageInflicted||this.noDamage||await this.dealDamage({update:!1}),this.rolled&&this.roll){"Object"===this.roll.constructor.name&&(this.roll=Roll.fromData(this.roll));const a=createInlineRoll(this.roll);this._htmlInlineRoll=a.outerHTML,this._htmlRoll=await this.roll.render()}await super.updateChatCard()}async rollDamage(options={update:!0}){this.roll=await new Roll(this.damageFormula||"0").evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.roll),this.hardrolled=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async rollArmor(options={update:!0}){const roll=await new Roll(this.armor).evaluate({async:!0});this.armor=roll.total,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async dealDamageToSelectedTarget(options={update:!0}){if(this.isArmorForula&&await this.rollArmor(),isNaN(Number(this.totalDamageString)))return void ui.notifications.error(game.i18n.localize("CoC7.ErrorEvaluatingDamage"));const targets=[],targetName=[],selectedPlayers=canvas.tokens.controlled.map((token=>token.actor));for(let index=0;index<selectedPlayers.length;index++)this.actor.id!==selectedPlayers[index].id&&(targetName.push(selectedPlayers[index].name),targets.push(selectedPlayers[index]));const data={title:" ",content:game.i18n.format("CoC7.DealDamage",{damage:this.totalDamageString,target:targetName}),buttons:{one:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>{this.confirmDamage(targets)}},two:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>{}}},default:"two"};targetName.length>0&&new Dialog(data).render(!0)}async confirmDamage(targets){for(let index=0;index<targets.length;index++)await targets[index].dealDamage(Number(this.totalDamageString),{ignoreArmor:!1}),ChatMessage.create({content:game.i18n.format("CoC7.DamageDealTo",{name:targets[index].name,damage:this.totalDamageString})})}async dealDamage(options={update:!0}){this.isArmorForula&&await this.rollArmor();let damage=this.totalDamageString;if(isNaN(Number(damage))){if(game.i18n.localize("CoC7.ArmorAbsorbsDamage")!==damage)return void ui.notifications.error("Error evaluating damage");damage=0}this.targetActor&&await this.targetActor.dealDamage(Number(damage),{ignoreArmor:!0}),this.damageInflicted=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}get range(){return this.options.range||"normal"}set range(x){["normal","long","extreme"].inclues(x.toLowerCase())&&(this._options.range=x)}get damageFormula(){const range=this.range;let formula=this.weapon?.system?.range[range]?.damage,db=this.actor.db;if(db=(""===(db??"").toString().trim()?0:db).toString().trim(),db.startsWith("-")||(db="+"+db),this.weapon.system.properties.addb&&(formula+=db),this.weapon.system.properties.ahdb&&(formula=formula+"+ floor("+db+"/2)"),formula){const maxDamage=new Roll(formula).evaluate({maximize:!0}).total;let rollString;return this.critical?this.impale?(rollString=formula+"+"+maxDamage,rollString):maxDamage:formula}}get armor(){return void 0!==this._armor&&""!==this._armor?this._armor:this.target?this.targetActor.system.attribs.armor.value:0}set armor(x){this._armor=x}}class OpposedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.opposed .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.opposed a",OpposedCheckCard._onClick.bind(this)),html.on("click",".roll-card.opposed button",OpposedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/opposed-roll.html",type:"opposedCard"})}get config(){return OpposedCheckCard.defaultConfig}get attackerRoll(){if(this.combat){if(this.rolls?.length){const attacker=this.rolls.filter((r=>0===r.index||r.attacker));if(attacker.length)return attacker[0]}}else;}get defenderRoll(){if(this.combat){if(this.rolls?.length){const defender=this.rolls.filter((r=>0!==r.index||!r.attacker));if(defender.length)return defender[0]}}else;}get defenderIsDodging(){return!(!this.defenderRoll?.actor?.dodgeSkill?.name||!this.defenderRoll?.skill?.name)&&this.defenderRoll.actor.dodgeSkill.name.toLowerCase()===this.defenderRoll.skill.name.toLowerCase()}get advantageAttacker(){return void 0===this._aa?!!this.defenderRoll&&!this.defenderIsDodging:this._aa}get winnerRollsDamage(){return!!(this.combat&&this.rolls.length>=2&&this.hasWinner&&"weapon"===this.winner?.item?.type)}set advantageAttacker(x){this._aa=!0,this._ad=!1}get advantageDefender(){return void 0===this._ad?this.defenderIsDodging:this._ad}set advantageDefender(x){this._ad=!0,this._aa=!1}get isTie(){return this.winnerCount>1}get needsTieBreaker(){return!!this.combat&&!(!this.attackerRoll||!this.defenderRoll||this.attackerRoll.successLevel!==this.defenderRoll.successLevel)}get winnerCount(){let count=0;for(const r of this.rolls)r.winner&&(count+=1);return count}get isAttackManeuver(){return!(!this.combat||!this.attackerRoll||this.attackerRoll?.item&&!this.attackerRoll?.item.system.properties?.mnvr)}get resultText(){if(this.combat&&this.attackerRoll&&this.defenderRoll){if(!this.attackerRoll.winner&&!this.defenderRoll.winner)return game.i18n.localize("CoC7.NoWinner");if(this.attackerRoll.winner)return this.attackerRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.attackerRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.attackerRoll.actor.name});if(this.defenderRoll.winner)return this.defenderRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.defenderRoll.actor.name}):this.defenderIsDodging?game.i18n.format("CoC7.DodgeSuccess",{name:this.defenderRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.defenderRoll.actor.name})}}async process(data){switch(data.action){case"new":this.rolls?.length||(this.combat=data.combat||void 0,this.combat&&(data.roll.attacker=!0)),data.roll.index=this.rolls.length,this.addRollData(data);break;case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data)}game.user.isGM?await this.updateChatCard():game.socket.emit("system.CoC7",data)}async roll(rank){await this.rolls[rank]._perform();const data={type:this.config.type,action:"updateRoll",rank,fromGM:game.user.isGM};return game.user.isGM||(data.roll=this.rolls[rank].JSONRollData),data}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await OpposedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"toggle-combat":card.combat=!card.combat,await card.updateChatCard();break;case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-check":{const speaker=ChatMessage.getSpeaker();card.rolls[rank].actorKey||(card.rolls[rank].actorKey=`${speaker.scene}.${speaker.token}`);const data=await card.roll(rank);await card.process(data);break}case"roll-damage":{card.closeCard(),await card.updateChatCard();const damageChatCard=new DamageCard({critical:card.winner.isExtremeSuccess,fastForward:event.shiftKey});damageChatCard.actorKey=card.winner.actor.actorKey,damageChatCard.targetKey=card.looser.actor.actorKey,damageChatCard.itemId=card.winner.itemId,damageChatCard.updateChatCard();break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(rank=void 0){if(this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.actorKey)),rank)this.rolls[rank].rolled&&(this.rolls[rank]._htmlRoll=await this.rolls[rank].getHtmlRoll({hideDiceResult:!0}));else for(let i=0;i<this.rolls.length;i++)delete this.rolls[i].maneuver,this.combat&&(!this.rolls[i].item||this.rolls[i].item.system.properties?.mnvr)&&(this.rolls[i]?.actor?.dodgeSkill?.name&&this.rolls[i]?.skill?.name&&this.rolls[i].actor.dodgeSkill.name.toLowerCase()!==this.rolls[i].skill.name.toLowerCase()||!this.rolls[i]?.actor?.dodgeSkill?.name)&&(this.rolls[i].maneuver=!0),this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));if(this.combat){if(this.rolls.sort(((a,b)=>a.index>b.index?1:a.index<b.index?-1:0)),this.rolls.length>1){this.rolls=[this.rolls[0],this.rolls[1]];for(const r of this.rolls)delete r.winner,delete r.tie}this.rolls[0]&&(this.rolls[0].attacker=!0),this.rolls[0]?.rolled&&this.rolls[1]?.rolled&&(this.rolls[0].passed||this.rolls[1].passed)&&(this.rolls[0].successLevel>this.rolls[1].successLevel?this.rolls[0].winner=!0:this.rolls[1].successLevel>this.rolls[0].successLevel?this.rolls[1].winner=!0:this.advantageAttacker?this.rolls[0].winner=!0:this.rolls[1].winner=!0)}else{if(this.rolls.sort(((a,b)=>{if(a.rolled&&!b.rolled)return-1;if(!a.rolled&&b.rolled)return 1;if(!a.rolled&&!b.rolled)return 0;if(a.successLevel>b.successLevel)return this.resolved=!0,-1;if(a.successLevel<b.successLevel)return this.resolved=!0,1;if(game.settings.get("CoC7","opposedRollTieBreaker")){if(a.modifiedResult>b.modifiedResult)return this.resolved=!0,-1;if(a.modifiedResult<b.modifiedResult)return this.resolved=!0,1}else{if(a.rawValue>b.rawValue)return this.resolved=!0,-1;if(a.rawValue<b.rawValue)return this.resolved=!0,1}return 0})),this.winCount=0,this.rolls[0]&&this.rolls[0].rolled&&!this.rolls[0].failed){this.winCount=1;for(let i=1;i<this.rolls.length;i++)this.rolls[i]&&this.rolls[i].rolled&&this.rolls[0].successLevel===this.rolls[i].successLevel&&(game.settings.get("CoC7","opposedRollTieBreaker")?this.rolls[0].modifiedResult===this.rolls[i].modifiedResult:this.rolls[0].rawValue===this.rolls[i].rawValue)&&(this.winCount=this.winCount+1)}for(let i=0;i<this.rolls.length;i++)this.rolls[i].winner=i<this.winCount,this.rolls[i].tie=this.rolls[i].winner&&this.winCount>1}}closeCard(){this.closed=!0}}class ChatCardActor{constructor(actorKey=null,fastForward=!1){this.actorKey=actorKey,this.fastForward=fastForward}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){this._rollMode=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}async say(message,flavor=null){const speakerData={};let speaker;this.actor?(speakerData.actor=this.actor,this.token&&(speakerData.token=this.token.document),speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor,content:message};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}}function replacer(key,value){if(key.startsWith("__"))return;if(["_actor"].includes(key))return;return["sanCheck","intCheck"].includes(key)?value.JSONRollData:value}class SanCheckCard extends ChatCardActor{constructor(actorKey=null,sanData={},options={}){super(actorKey,void 0!==options.fastForward&&Boolean(options.fastForward)),sanData.sanReason=sanData.sanReason??"",this.sanData=sanData,this.options=options,sanData.modifier&&!isNaN(Number(sanData.modifier))&&(this.options.sanModifier=Number(sanData.modifier)),sanData.difficulty&&!isNaN(Number(sanData.difficulty))&&(this.options.sanDifficulty=Number(sanData.difficulty)),this.state={}}get isBlind(){return void 0!==this.options.isBlind?Boolean(this.options.isBlind):super.isBlind}get difficulty(){return void 0!==this.options.difficulty?this.options.difficulty:CoC7Check.difficultyLevel.regular}get modifier(){return void 0!==this.options.modifier?this.options.modifier:0}get sanLossSource(){return this.sanData.tokenKey?chatHelper.getActorFromKey(this.sanData.tokenKey):null}get involuntaryAction(){return!(!this.state.sanRolled||!this.sanCheck.isFailure&&!this.sanCheck.isFumble)}get sanLossFormula(){return this.state.sanRolled?this.sanData.sanMax&&this.sanCheck.failed?isNaN(Number(this.sanData.sanMax))?this.sanData.sanMax:Number(this.sanData.sanMax):this.sanData.sanMin&&this.sanCheck.passed?isNaN(Number(this.sanData.sanMin))?this.sanData.sanMin:Number(this.sanData.sanMin):0:null}get sanLostToReason(){return this.actor.sanLostToReason(this.sanData.sanReason)}get maxPossibleSanLoss(){return this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)}get maxSanLoss(){return new Roll(this.sanData.sanMax.toString()).evaluate({maximize:!0}).total}get sanLossReasonEncountered(){return this.actor.sanLossReasonEncountered(this.sanData.sanReason)}get firstEncounter(){return!this.actor.mythosInsanityExperienced}get isActorLoosingSan(){return!this.actor.hasTempoInsane&&(0!==this.sanLossFormula&&(!this.sanData.sanReason||0!==this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)||(this.state.immuneToCreature=!0,!1)))}get boutDurationText(){if(this.boutDuration){if(this.boutRealTime)return`${this.boutDuration} ${game.i18n.localize("CoC7.rounds")}`;if(this.boutSummary)return`${this.boutDuration} ${game.i18n.localize("CoC7.hours")}`}return null}get youGainCthulhuMythosString(){return this.mythosGain?game.i18n.format("CoC7.YouGainedCthulhuMythos",{value:this.mythosGain}):null}async advanceState(state){switch(state){case"keepCreatureSanData":this.state.keepCreatureSanData=!0;break;case"involuntaryActionPerformed":this.state[state]=!0,this.isActorLoosingSan||(this.state.finish=!0);break;case"sanLossApplied":await this.applySanLoss();break;case"enterBoutOfMadnessRealTime":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!0,this.boutSummary=!1,this.boutResult=await this.actor.enterBoutOfMadness(!0,this.boutDuration),this.state.boutOfMadnessResolved=!0,this.state.boutOfMadnessOver=!1;break;case"enterBoutOfMadnessSummary":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!1,this.boutSummary=!0,this.boutResult=await this.actor.enterBoutOfMadness(!1,this.boutDuration),this.state.boutOfMadnessResolved=!0,await this.triggerInsanity();break;case"boutOfMadnessOver":await this.actor.unsetCondition(COC7.status.tempoInsane),await this.triggerInsanity();break;case"noMythosGained":this.state.cthulhuMythosAwarded=!0,this.mythosGain=0;break;case"cthulhuMythosAwarded":{let amountGained=1;this.actor.mythosInsanityExperienced||(amountGained=5,await this.actor.experienceFirstMythosInsanity()),this.state.cthulhuMythosAwarded=!0;const cthulhuMythosSkill=this.actor.cthulhuMythosSkill,oldValue=cthulhuMythosSkill.data.data.adjustments.experience||0;cthulhuMythosSkill&&await cthulhuMythosSkill.update({"data.adjustments.experience":oldValue+amountGained}),this.mythosGain=amountGained;break}}}async bypassRollSan(){this.isBypassed=!0,this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.state.sanLossRolled=!0,this.state.ignoreSanCheck=!0,this.sanLoss=this.sanLossFormula}async rollSan(){if(this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.isActorLoosingSan){if("number"==typeof this.sanLossFormula)this.state.sanLossRolled=!0,this.sanData.sanReason?(this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanLossFormula),this.sanLoss<this.sanLossFormula&&(this.state.limitedLossToCreature=!0)):this.sanLoss=this.sanLossFormula;else if(this.sanCheck.isFumble)this.state.sanLossRolled=!0,this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);else if(this.sanData.sanReason){const min=new Roll(this.sanLossFormula).evaluate({minimize:!0}).total,max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);min>=max&&(this.state.sanLossRolled=!0,this.sanLoss=max,this.state.limitedLossToCreature=!0)}}else this.state.finish=!0,this.actor.hasTempoInsane&&(this.state.immuneAlreadyInBout=!0,this.sanCheck.passed||(this.state.finish=!1)),this.state.sanLossRolled=!0,this.state.sanLossApplied=!0,this.state.intRolled=!0,this.state.insanity=!1,this.sanLoss=0}async rollSanLoss(){this.sanLossRoll=new Roll(`${this.sanLossFormula}`),await this.sanLossRoll.roll({async:!0}),await CoC7Dice.showRollDice3d(this.sanLossRoll);const max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);this.sanLossRoll.total>max&&(this.state.limitedLossToCreature=!0),this.sanLoss=Math.min(this.sanLossRoll.total,max),this.state.sanLossRolled=!0}async applySanLoss(){if(await this.actor.looseSan(this.sanData.sanReason,this.sanLoss),this.sanLoss>0&&(this.state.actorLostSan=!0),this.state.sanLossApplied=!0,this.actor.san<=0)return this.state.intRolled=!0,this.state.boutOfMadnessOver=!0,this.state.insanity=!0,this.state.permanentlyInsane=!0,void(this.state.finish=!0);this.sanLoss<5?(this.state.intRolled=!0,this.actor.hasIndefInsane?(this.state.insanity=!0,this.state.shaken=!0,this.state.insanityTableRolled=!1,this.state.finish=!1,this.state.intRolled=!0):(this.state.insanity=!1,this.state.shaken=!0,this.state.insanityTableRolled=!0,this.state.finish=!0)):this.state.intRolled=!1,this.actor.dailySanLoss>=this.actor.dailySanLimit&&(this.state.insanity=!0,this.state.intRolled=!0,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!0,this.state.insanityTableRolled=!1,this.state.memoryRepressed=!1,this.state.finish=!1)}async rollInt(){this.intCheck=new CoC7Check,this.intCheck.actor=this.actorKey,this.intCheck.characteristic="int",this.intCheck.difficulty=this.options.intDifficulty||CoC7Check.difficultyLevel.regular,this.intCheck.diceModifier=this.options.intModifier||0,await this.intCheck._perform({forceDSN:!0}),this.state.intRolled=!0,this.intCheck.passed||this.state.alreadyInsane?(this.state.insanity=!0,this.state.temporaryInsane=!0,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!1):(this.state.insanity=!1,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!0,this.state.finish=!0)}async triggerInsanity(){this.state.boutOfMadnessOver=!0,this.state.indefinitelyInsane&&await this.actor.setCondition(COC7.status.indefInsane),this.state.finish=!0}async clearSanLossReason(){await this.actor.setReasonSanLoss(this.sanData.sanReason,0),this.sanLossReasonEncountered||(this.state.keepCreatureSanData=!0)}async updateChatCard(){if(this.state.sanRolled&&(this.__inlineSanCheck=this.sanCheck.inlineCheck.outerHTML),this.sanLossRoll){const a=createInlineRoll(this.sanLossRoll);this.__inlineSanLossRoll=a.outerHTML}this.state.intRolled&&this.intCheck&&(this.__inlineIntCheck=this.intCheck.inlineCheck.outerHTML);const html=await renderTemplate(SanCheckCard.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(this,replacer));const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static get template(){return"systems/CoC7/templates/chat/cards/san-check.html"}static checkTargets(sanData,fastForward=!1){const targets=[...game.user.targets];if(targets.length)for(const t of targets)t.actor.isToken?SanCheckCard.create(t.actor.tokenKey,sanData,{fastForward}):SanCheckCard.create(t.actor.id,sanData,{fastForward});else ui.notifications.warn(game.i18n.localize("CoC7.WarnNoTargetsSanCheck"))}static async create(...args){const chatCard=new SanCheckCard(...args);chatCard.actor.hasIndefInsane&&(chatCard.state.alreadyInsane=!0),chatCard.actor.san<=0&&(chatCard.state.intRolled=!0,chatCard.state.boutOfMadnessOver=!0,chatCard.state.insanity=!0,chatCard.state.permanentlyInsane=!0,chatCard.state.finish=!0);const html=await renderTemplate(SanCheckCard.template,chatCard),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(chatCard,replacer)),await chatCard.say(htmlCardElement.outerHTML)}static getFromMessageId(messageId){const message=game.messages.get(messageId),htmlCard=$.parseHTML(message.content)[0].querySelector(".chat-card");return SanCheckCard.getFromCard(htmlCard)}static getFromCard(card){const sanCheckCardData=JSON.parse(unescape(card.dataset.object)),sanCheckCard=new SanCheckCard;return Object.assign(sanCheckCard,sanCheckCardData),sanCheckCard.messageId||(sanCheckCard.messageId=card.closest(".message").dataset.messageId),"Object"===sanCheckCard.sanCheck?.constructor?.name&&(sanCheckCard.sanCheck=Object.assign(new CoC7Check,sanCheckCard.sanCheck)),"Object"===sanCheckCard.intCheck?.constructor?.name&&(sanCheckCard.intCheck=Object.assign(new CoC7Check,sanCheckCard.intCheck)),"Object"===sanCheckCard.sanLossRoll?.constructor?.name&&(sanCheckCard.sanLossRoll=Roll.fromData(sanCheckCard.sanLossRoll)),sanCheckCard}}class SanDataDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(":checkbox").click((()=>this._toggleInput(html)))}_toggleInput(html){html.find('*[name="customname"]').toggle()}static async create(options={}){const html=await renderTemplate("systems/CoC7/templates/apps/sandata.html",options);return new Promise((resolve=>{let formData=null;const dlg=new SanDataDialog({title:options.displayName?game.i18n.format("CoC7.SanDataSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.SanDataSelectionWindow"),content:html,buttons:{Validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#san-data-form")),resolve(formData))}},default:"Validate",close:()=>{}});dlg.render(!0)}))}}class CoC7ChatMessage{static get ROLL_TYPE_ATTRIBUTE(){return"R/AT"}static get ROLL_TYPE_CHARACTERISTIC(){return"R/CH"}static get ROLL_TYPE_COMBAT(){return"R/CO"}static get ROLL_TYPE_SKILL(){return"R/SK"}static get ROLL_TYPE_ENCOUNTER(){return"R/EC"}static get CARD_TYPE_COMBINED(){return"C/CO"}static get CARD_TYPE_GROUP(){return"C/GR"}static get CARD_TYPE_NORMAL(){return"C/NO"}static get CARD_TYPE_OPPOSED(){return"C/OP"}static get CARD_TYPE_SAN_CHECK(){return"C/SC"}static get CARD_TYPE_NONE(){return"C/NO"}static cardTypes(config){if(config.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)return null;const select={[CoC7ChatMessage.CARD_TYPE_NORMAL]:"CoC7.RegularRollCard",[CoC7ChatMessage.CARD_TYPE_COMBINED]:"CoC7.CombinedRollCard",[CoC7ChatMessage.CARD_TYPE_OPPOSED]:"CoC7.OpposedRollCard"};return config.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE&&"san"===config.attribute&&(select[CoC7ChatMessage.CARD_TYPE_SAN_CHECK]="CoC7.SanityLossEncounter"),select}static normalizeRequest(options){if(void 0!==options.event||void 0===options.cardType||void 0===options.actor||void 0===options.skillId&&void 0===options.skillName&&void 0===options.attribute&&void 0===options.characteristic&&options.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER){if(void 0===options.event||void 0===options.cardType||void 0===options.rollType)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{value:game.i18n.localize("CoC7.Roll")})),!1}else if(void 0!==options.skillId)options.actor.items.get(options.skillId)&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL);else if(void 0!==options.skillName){const skillIds=options.actor.getSkillsByName(options.skillName);skillIds.length>0&&(options.skillId=skillIds[0].id,options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL)}else void 0!==options.attribute&&["lck","san"].includes(options.attribute)?options.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:void 0!==options.characteristic&&void 0!==options.actor.system.characteristics[options.characteristic]&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC);if(![CoC7ChatMessage.CARD_TYPE_COMBINED,CoC7ChatMessage.CARD_TYPE_GROUP,CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_OPPOSED,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(options.cardType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidCardType")})),!1;if(![CoC7ChatMessage.ROLL_TYPE_SKILL,CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,CoC7ChatMessage.ROLL_TYPE_ENCOUNTER].includes(options.rollType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidRollType")})),!1;const config={options:{cardType:options.cardType,shiftKey:options.fastForward??options.event?.shiftKey??options.fastForward??!1,altKey:options.event?.altKey??!1,isCtrlKey:isCtrlKey(options.event??!1),createEncounter:options.createEncounter??!1,openLinkTool:options.openLinkTool??!1,sendToChat:options.sendToChat??!1,sendToClipboard:options.sendToClipboard??!1,isCombat:options.event?.currentTarget.classList?.contains("combat")??!1,preventStandby:options.preventStandby??!1,bonusDice:0},dialogOptions:{rollType:options.rollType,cardType:options.cardType,attribute:"",chatMessage:options.chatMessage??!0,forcedCardType:options.forcedCardType??!1,hideDifficulty:options.hideDifficulty??!1}};switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:if(config.options.skillId=options.skillId??options.event?.currentTarget.closest(".item")?.dataset.skillId,config.options.itemId=options.event?.currentTarget.closest(".item")?.dataset.itemId,config.options.characteristic=options.characteristic??options.event?.currentTarget.parentElement.dataset.characteristic,config.options.attribute=options.attribute??options.event?.currentTarget.parentElement.dataset.attrib,config.dialogOptions.attribute=config.options.attribute,config.options.actorId=options.event?.currentTarget.closest("form").dataset.actorId??options.actor.id,config.options.tokenKey=options.event?.currentTarget.closest("form").dataset.tokenId??options.actor.tokenKey,config.options.weaponAltSkill=options.event?.currentTarget.classList.contains("alternativ-skill"),config.options.actor=options.actor,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&config.options.isCombat){const item=config.options.actor.items.get(config.options.itemId);if(!item)return!1;"weapon"===item.type&&(config.options.weaponName=item.name,config.dialogOptions.rollType=CoC7ChatMessage.ROLL_TYPE_COMBAT)}if(void 0===config.options.actorId||void 0===config.options.tokenKey&&void 0===config.options.actor)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorActor")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&void 0===config.options.skillId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Skill")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC){if(void 0===config.options.characteristic)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Characteristic")})),!1;if(!game.user.isGM&&!config.options.actor.system.characteristics[config.options.characteristic]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE){if(void 0===config.options.attribute)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Attribute")})),!1;if(!game.user.isGM&&!config.options.actor.system.attribs[config.options.attribute]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT){if(void 0===config.options.itemId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Weapon")})),!1;if(config.options.altKey)return!1}config.options.hasPlayerOwner=config.options.actor.hasPlayerOwner??!1,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC?(config.dialogOptions.disableFlatThresholdModifier=config.options.isCtrlKey,config.dialogOptions.disableFlatDiceModifier=config.options.isCtrlKey):(config.dialogOptions.disableFlatThresholdModifier=!1,config.dialogOptions.disableFlatDiceModifier=!1),config.dialogOptions.modifier=0,config.dialogOptions.difficulty=options.difficulty??CoC7Check.difficultyLevel[game.settings.get("CoC7","defaultCheckDifficulty")],config.dialogOptions.flatDiceModifier=0,config.dialogOptions.flatThresholdModifier=0}return config}static async trigger(options={}){const config=CoC7ChatMessage.normalizeRequest(options);if(!1!==config)if(config.options.isCtrlKey&&game.user.isGM&&[CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(config.dialogOptions.cardType))CoC7ChatMessage.createLink(config);else{if(!(config.options.sendToChat||config.options.sendToClipboard||config.options.openLinkTool||config.options.createEncounter)||!game.user.isGM||CoC7ChatMessage.CARD_TYPE_NONE!==config.dialogOptions.cardType){if(void 0!==config.options.actor){if(void 0!==config.options.attribute){const bonusDice=config.options.actor.system?.attribs?.[config.options.attribute]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.characteristic){const bonusDice=config.options.actor.system?.characteristics?.[config.options.characteristic]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.itemId){const itemModifiers=Object.values(config.options.actor.system.skills).find((k=>k.foundryID===config.options.itemId));void 0!==itemModifiers.bonusDice&&(config.dialogOptions.modifier=itemModifiers.bonusDice)}config.dialogOptions.modifier=Math.min(Math.max(config.dialogOptions.modifier,-2),2)}return config.options.shiftKey||await CoC7ChatMessage.createRoll(config),CoC7ChatMessage.runRoll(config)}CoC7ChatMessage.createLink(config)}}static createLink(config){switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_COMBAT:case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:{const linkData={type:"CoC7Link"};if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL){if(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.SKILL,linkData.name=config.options.actor.items.get(config.options.skillId)?.shortName,!linkData.name)return}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC)linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.CHARACTERISTIC,linkData.name=config.options.characteristic;else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE)(config.options.altKey||config.options.createEncounter)&&"san"===config.options.attribute?linkData.check=CoC7Link.CHECK_TYPE.SANLOSS:(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.ATTRIBUTE,linkData.name=config.options.attribute);else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)linkData.check=CoC7Link.CHECK_TYPE.ITEM,linkData.name=config.options.weaponName;else{if(config.dialogOptions.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER)return;linkData.check=CoC7Link.CHECK_TYPE.SANLOSS,linkData.sanMin=config.options.actor?.system?.special?.sanLoss?.checkPassed,linkData.sanMax=config.options.actor?.system?.special?.sanLoss?.checkFailled,linkData.sanReason=config.options.actor.system.infos.type?.length?config.options.actor.system.infos.type:config.options.actor.name}"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),config.options.sendToChat?CoC7Link.toChatMessage(linkData):config.options.sendToClipboard?CoC7Link.fromDropData(linkData).then((link=>{CoC7Utilities.copyToClipboard(link.link)})):CoC7ContentLinkDialog.create(linkData,{actors:[config.options.actor].filter((a=>a.owners.length)),hasModifiers:config.options.shiftKey})}}}static async createRoll(config){const usage=await RollDialog.create(config.dialogOptions);if(usage){const cardType=usage.get("cardType");cardType&&(config.dialogOptions.cardType=cardType),config.dialogOptions.modifier=Number(usage.get("bonusDice")),config.dialogOptions.difficulty=Number(usage.get("difficulty")),config.dialogOptions.flatDiceModifier=Number(usage.get("flatDiceModifier")),config.dialogOptions.flatThresholdModifier=Number(usage.get("flatThresholdModifier"))}}static async runRoll(config){switch(config.dialogOptions.cardType){case CoC7ChatMessage.CARD_TYPE_SAN_CHECK:{const sanData=await SanDataDialog.create({promptLabel:!0});if(sanData){let sanMin=sanData.get("sanMin")||0,sanMax=sanData.get("sanMax")||0;const sanReason=sanData.get("sanReason");isNaN(Number(sanMin))||(sanMin=Number(sanMin)),isNaN(Number(sanMax))||(sanMax=Number(sanMax)),SanCheckCard.create(config.options.actor.actorKey,{sanMin,sanMax,sanReason},{sanModifier:config.dialogOptions.modifier,sanDifficulty:config.dialogOptions.difficulty,fastForward:config.options.shiftKey})}}break;case CoC7ChatMessage.CARD_TYPE_NORMAL:{const check=new CoC7Check;return check.diceModifier=config.dialogOptions.modifier,check.difficulty=config.dialogOptions.difficulty,check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.flatDiceModifier=config.dialogOptions.flatDiceModifier,check.flatThresholdModifier=config.dialogOptions.flatThresholdModifier,check.standby=!config.options.preventStandby&&game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&config.options.hasPlayerOwner,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL?(check.skill=config.options.skillId,await check.roll()):config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE?await check.rollAttribute(config.options.attribute):await check.rollCharacteristic(config.options.characteristic),config.dialogOptions.chatMessage&&check.toMessage(),{result:check.modifiedResult,successLevel:check.rolledSuccessLevel,isFumble:check.isFumble,isCritical:check.isCritical,successLevels:{1:check.regularThreshold,2:check.hardThreshold,3:check.extremeThreshold},passed:check.passed}}case CoC7ChatMessage.CARD_TYPE_OPPOSED:case CoC7ChatMessage.CARD_TYPE_COMBINED:{const check=new CoC7Check;check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.characteristic=config.options.characteristic,check.attribute=config.options.attribute,check.skillId=config.options.skillId,check.rollMode=game.settings.get("core","rollMode"),check.initiator=game.user.id;let data={};config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?(data={type:OpposedCheckCard.defaultConfig.type,combat:config.options.isCombat,action:"new"},check.item=config.options.itemId,check.weaponAltSkill=config.options.weaponAltSkill,check.denyPush=!0,await check._perform()):(data={type:CombinedCheckCard.defaultConfig.type,action:"new"},check.difficulty=config.dialogOptions.difficulty),data.roll=check.JSONRollData,data._rollMode=game.settings.get("core","rollMode"),config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?OpposedCheckCard.dispatch(data):CombinedCheckCard.dispatch(data)}}}}class CoC7ConCheck{constructor(actorId=null,difficulty=CoC7Check.difficultyLevel.regular){this.check=new CoC7Check(actorId),this.check.characteristic="con",this.check.difficulty=difficulty,this.check.denyPush=!0,this.actorId=actorId}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get actor(){return this.actorId?chatHelper.getActorFromKey(this.actorId):null}set actorId(x){this._actorId=x,this.check.actor=x}get actorId(){return this._actorId?this._actorId:null}get tokenKey(){return this.actor.isToken?this.actor.tokenKey:null}get isSuccess(){return!!this.check&&this.check.isSuccess}get isRolled(){return!!(this.check&&this.check.dices&&this.check.dices.total)}static getFromCard(card){const conCheck=new CoC7ConCheck;chatHelper.getObjectFromElement(conCheck,card);const htmlCheck=card.querySelector(".roll-result");return CoC7Roll.getFromElement(htmlCheck,conCheck.check),conCheck.messageId=card.closest(".message").dataset.messageId,conCheck}async getCheckElement(){const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this.check),htmlElement=$.parseHTML(html)[0];return htmlElement?(htmlElement.classList.remove("chat-card","item-card","roll-card"),htmlElement):null}async toMessage(fastForward=!1){fastForward&&await this.rollCon();const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(fastForward){htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement())}const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:htmlElement.outerHTML};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async rollCon(){this.check.hideDiceResult=!0,await this.check._perform(),this.isBlind||this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),this.applied=!0}async updateChatCard(){const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement()),this.isBlind||!this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),!this.messageId)return;const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}}class SkillSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".select-skill").click((async event=>this._onSelectSkillClicked(event)))}async _onSelectSkillClicked(event){const li=event.currentTarget.closest(".item");this.data.data.skills[Number(li.dataset.index)].selected=!0,event.currentTarget.style.display="none",this.data.data.added||(this.data.data.added=0),this.data.data.added++;event.currentTarget.closest(".skill-selector").querySelector(".count").innerText=this.data.data.added,this.data.data.added>=this.data.data.optionsCount&&this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/skill-select.html",data);return new Promise((resolve=>{new SkillSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>{if(!data.added>=data.optionsCount)return resolve(!1);const selected=data.skills.filter((skill=>skill.selected));return resolve(selected)}},{classes:["coc7","dialog","skill-select"]}).render(!0)}))}}class PointSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event))),html.find("button").click((event=>this._onButtonClicked(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item"),itemList=li.closest(".item-list");for(const item of itemList.querySelectorAll(".selectable"))item.classList.remove("selected"),this.data.data.characteristics[item.dataset.key].selected=!1,this.data.data.characteristics[item.dataset.key].optional=!1;$(li).toggleClass("selected"),this.data.data.characteristics[li.dataset.key].selected=!0;li.closest("#skill-selection-form").querySelector(".points").innerText=this.data.data.total+this.data.data.characteristics[li.dataset.key].multiplier*this.data.data.characteristics[li.dataset.key].value;li.closest("#skill-selection-form").querySelector("button.validate").classList.remove("inactive"),this.data.data.resolved=!0}async _onButtonClicked(event){event.preventDefault(),event.currentTarget.classList.contains("inactive")||super.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/point-select.html",data);return new Promise((resolve=>{new PointSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.resolved?resolve(data):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");this.data.data.selected=li.dataset.key,this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/char-select.html",data);return new Promise((resolve=>{new CharacSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.selected?resolve(data.selected):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacRollDialog extends Dialog{constructor(data,options){super(data,options),this.rolled=data.rolled||{}}activateListeners(html){super.activateListeners(html),html.on("change","input",this._onChangeInput.bind(this)),html.on("submit","form",this._onSubmit.bind(this)),html.on("click",".roll-characteristic",this._onRollCharacteristic.bind(this)),html.on("click",".increase-characteristic",this._onIncreaseCharacteristic.bind(this)),html.on("click",".decrease-characteristic",this._onDecreaseCharacteristic.bind(this)),html.on("click",".reset-characteristic",this._onResetCharacteristic.bind(this)),html.on("click","button",this._onButton.bind(this))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;await this.rollCharacteristic(characKey)}async _onIncreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.increaseCharacteristic(characKey)}async _onDecreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.decreaseCharacteristic(characKey)}async _onResetCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.resetCharacteristic(characKey)}async _onButton(event){const action=event.currentTarget.dataset.action;if("roll"===action)for(const char of["str","con","siz","dex","app","int","pow","edu","luck"])await this.rollCharacteristic(char);"validate"!==action||event.currentTarget.classList.contains("inactive")||(this.checkTotal(),this.close())}async rollCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input"),formula=this.data.data.characteristics.rolls[key];if(input&&formula){if(isNaN(Number(formula))){const roll=new Roll(formula);await roll.evaluate({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:this.data.data.characteristics.list[key].label,formula})}),input.value=roll.total}else input.value=Number(formula);this.data.data.characteristics.values[key]=Number(input.value),this.rolled||(this.rolled={}),this.rolled[key]=!0}this.checkTotal()}async increaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async decreaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&Number(input.value)>0&&(input.value=Number(input.value)-1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async resetCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=null,this.data.data.characteristics.values[key]=0),this.checkTotal()}async _onChangeInput(event){event.preventDefault();const input=event.currentTarget,value=Number(input.value);isNaN(value)||(this.data.data.characteristics.values[input.name]=value),this.checkTotal()}checkTotal(){this.data.data.characteristics.points.total=0;for(const[key,value]of Object.entries(this.data.data.characteristics.values))"luck"!==key&&(this.data.data.characteristics.points.total+=value);const validation=this._element[0].querySelector(".points");if(this.data.data.characteristics.points.enabled){if(Number(this.data.data.characteristics.points.total)!==Number(this.data.data.characteristics.points.value))validation.classList.add("warning");else{validation.classList.remove("warning");this._element[0].querySelector("button.validate").classList.remove("inactive"),this.data.data.validate=!0}validation.querySelector(".value").innerText=this.data.data.characteristics.points.value}if(validation.querySelector(".total").innerText=this.data.data.characteristics.points.total,this.data.data.characteristics.rolls.enabled&&this.rolled&&(this.data.data.validate=!Object.entries(this.rolled).find((el=>!el))&&9===Object.entries(this.rolled).length,this.data.data.validate)){this._element[0].querySelector("button.validate").classList.remove("inactive")}}async _onSubmit(event){event.preventDefault()}static async create(data){const rolled={};data.characteristics.points.total=0;for(const[key,value]of Object.entries(data.characteristics.values))"luck"!==key&&(data.characteristics.points.total+=value||0),!isNaN(value)&&value>0&&(rolled[key]=!0);data.characteristics.points.enabled&&Number(data.characteristics.points.total)!==Number(data.characteristics.points.value)&&(data.pointsWarning=!0);const html=await renderTemplate("systems/CoC7/templates/apps/char-roll.html",data);return new Promise((resolve=>{new CharacRollDialog({title:data.title,content:html,data,rolled,buttons:{},close:()=>data.validate?resolve(!0):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class SkillSpecSelectDialog{static async create(skills,specializationName,baseValue=null,name=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-spec-select.html",{hasSkills:skills.length>0,skills,base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:name?game.i18n.format("CoC7.SkillSelectBase",{name}):game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:specializationName}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class SkillSpecializationSelectDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","skill-name-dialog"],title:"",template:"systems/CoC7/templates/apps/skill-specialization-select.hbs",width:400,height:"auto",closeOnSubmit:!1})}get title(){return game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:this.object.specializationName})}activateListeners(html){super.activateListeners(html),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("[name=existing-skill]").change(this._onSelectChange.bind(this))}async _onSelectChange(event){this.object.selected=event.currentTarget.value,this.render(!0)}async _onClickSubmit(event){if(""===this.object.selected){const obj=$(event.currentTarget).closest("form");this.object.name=obj.find("input[name=new-skill-name]").val()??"",this.object.baseValue=obj.find("input[name=base-value]").val()??""}if(""===this.object.selected&&""===this.object.name)return!1;this.object.resolve({selected:this.object.selected,name:this.object.name,baseValue:this.object.baseValue}),this.close()}async _updateObject(event,formData){}static async create({skills=[],allowCustom=!1,fixedBaseValue=!1,specializationName="",label="",baseValue=null}={}){const select=[];for(const skill of skills)select.push({id:skill.id,name:skill.name,base:skill.system.base});return await new Promise((resolve=>{new SkillSpecializationSelectDialog({specializationName,allowCustom,fixedBaseValue,allowSelect:skills.length>0,skills:select,selected:"",name:"",label,baseValue,resolve},{}).render(!0)}))}}class SkillValueDialog{static async create(name=null,baseValue=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-value.html",{base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:game.i18n.format("CoC7.SkillValue",{name}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class CoC7MeleeResoltion{constructor(initiatorMessage=null,targetMessage=null,messageId=null){this.initiatorMessage=initiatorMessage,this.targetMessage=targetMessage,this.messageId=messageId}async preCreateMessage(){const html=await renderTemplate(this.template,this),chatData={user:game.user.id,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const chatMessage=await ChatMessage.create(chatData);return this.messageId=chatMessage.id,chatMessage}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get target(){return this.targetMessage?CoC7MeleeTarget.getFromMessageId(this.targetMessage):null}get targetToken(){return this.target?chatHelper.getTokenFromKey(this.target.actorKey):null}get initiator(){return this.initiatorMessage?CoC7MeleeInitiator.getFromMessageId(this.initiatorMessage):null}get initiatorToken(){return this.initiator?chatHelper.getTokenFromKey(this.initiator.actorKey):null}async resolve(){if(this.target)switch(this.target.action){case"noResponse":this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.action="roll-melee-damage",this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target;break;case"dodge":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.action="roll-melee-damage",this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.DodgeSuccess",{name:this.target.name}),this.winner=this.target,this.looser=this.initiator,this.winnerImg=this.target.skill.img,this.winnerTitle=this.target.skill.name,this.action="dodge",this.rollDamage=!1);break;case"fightBack":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.weapon.img,this.winnerTitle=this.target.weapon.name,this.looser=this.initiator,this.rollDamage=!0);break;case"maneuver":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.ManeuverSuccess",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.looser=this.initiator,this.rollDamage=!1)}else this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1);this.winner&&(this.winner.roll.successLevel>=CoC7Check.successLevel.extreme?this.winner.roll.criticalDamage=!0:this.winner.roll.criticalDamage=!1),this.resolved=!0;const html=await renderTemplate(this.template,this);if(this.messageId){const message=game.messages.get(this.messageId),speakerData={};this.winner&&(this.winner.token&&(speakerData.token=this.winner.token.documment),this.winner.actor&&(speakerData.actor=this.winner.actor));const speaker=this.winner?ChatMessage.getSpeaker(speakerData):null,user=this.winner&&this.winner.actor.user?this.winner.actor.user:game.user;let msg;return message?(msg=speaker?await message.update({user:user.id,speaker,content:html}):await message.update({user:user.id,content:html}),await ui.chat.updateMessage(msg,!1),msg):void ui.notifications.warn("Resolition card missing, was deleted ?")}}get template(){return"systems/CoC7/templates/chat/combat/melee-resolution.html"}}class CoC7MeleeTarget extends ChatCardActor{constructor(actorKey,parentMessageId=null,fastForward=!1){super(actorKey,fastForward),this.actorKey=actorKey,this.initiatorKey=null,this.parentMessageId=parentMessageId,this.fastForward=fastForward,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.skillId=null,this.itemId=null,this.dodging=!1,this.notResponding=!1,this.fightingBack=!1,this.maneuvering=!1}get actionSelected(){return this.dodging||this.notResponding||this.fightingBack||this.maneuvering}get action(){return this.dodging?"dodge":this.notResponding?"noResponse":this.fightingBack?"fightBack":this.maneuvering?"maneuver":null}get weapon(){return this.actor.items.get(this.itemId)}get skill(){return this.actor.items.get(this.skillId)}set initiatorKey(x){this._initiatorKey=x,this.targetKey=x}get initiatorKey(){return this._initiatorKey||(!this._initiator&&this.parentMessageId&&(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator&&(this._initiatorKey=this._initiator.actorKey)),this._initiatorKey?this._initiatorKey:(ui.notifications.error(`No initiator found for target : ${this.actor.name}`),null)}get initiator(){if(!this.initiatorKey){if(!this.parentMessageId)return null;this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId),this.initiatorKey=this._initiator.actorKey}return chatHelper.getActorFromKey(this.initiatorKey)}get meleeInitiator(){return this._initiator||(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator}get template(){return"systems/CoC7/templates/chat/combat/melee-target.html"}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],target=CoC7MeleeTarget.getFromCard(card,messageId);return target.messageId=messageId,target}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.target"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const target=CoC7MeleeTarget.getFromCard(card);target.toggleFlag(flag),target.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async createChatCard(){const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData);this.actor.isToken&&(speaker.alias=this.actor.token.name);let user=game.user;if(void 0===this.actor.user){let owners=[];const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(this.actor.ownership))if(v===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER){if("default"===k){owners=game.users.map((a=>a.id));break}gms.includes(k)||owners.push(k)}let content="";switch(owners.length){case 0:break;case 1:void 0!==game.users.get(owners[0])&&(user=game.users.get(owners[0]));break;default:content="<p>"+game.i18n.localize("CoC7.MessageSelectSingleUserForTarget"),content+='<form id="selectform"><select name="user">';for(const k of owners)content=content+'<option value="'+k+'">'+game.users.get(k).name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectSingleUserForTarget"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(user=game.users.get(value))}})}}else void 0!==this.actor.user&&(user=this.actor.user);const chatData={user:user.id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const message=await ChatMessage.create(chatData);return this.messageId=message.id,message}async updateChatCard(){const message=game.messages.get(this.messageId);if(!game.user.isGM&&message.user.id!==game.user.id)return void ui.notifications.info(game.i18n.localize("CoC7.UnableToInteractWithChatCard"));const html=await renderTemplate(this.template,this),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}async getUpdatedChatCard(){renderTemplate(this.template,this).then((html=>html))}static async updateSelected(card,event){const target=CoC7MeleeTarget.getFromCard(card);switch(event.currentTarget.dataset.action){case"dodge":target.dodging=!0,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null;break;case"noResponse":target.dodging=!1,target.notResponding=!0,target.fightingBack=!1,target.maneuvering=!1,target.skillId=null,target.itemId=null;break;case"fightBack":target.dodging=!1,target.notResponding=!1,target.fightingBack=!0,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=event.currentTarget.dataset.weaponId;break;case"maneuver":target.dodging=!1,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!0,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null}return target.updateChatCard(),target}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;return check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="target",check.action=this.action,check.actor=this.actor,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),check}async publishNoReponseResult(){this.rolled=!0,this.resolved=!0,this.notResponding=!0;const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}static getFromCard(card,messageId=null){const actorKey=card.dataset.actorKey,parentMessageId=card.dataset.parentMessageId,fastForward="true"===card.dataset.fastForward,target=new CoC7MeleeTarget(actorKey,parentMessageId,fastForward);return target.roll=CoC7Roll.getFromCard(card),chatHelper.getObjectFromElement(target,card),card.closest(".message")?target.messageId=card.closest(".message").dataset.messageId:target.messageId=messageId,target}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total");switch(newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoC7RangeInitiator{constructor(actorKey=null,itemId=null,fastForward=!1){this.actorKey=actorKey,this.itemId=itemId,this.fastForward=fastForward,this.resolved=!1,this.cover=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1,this.singleShot=!1,this.multipleShots=!1,this.burst=!1,this.fullAuto=!1,this.tokenKey=null,this.aimed=!1,this.totalBulletsFired=0,this._targets=[];for(const t of[...game.user.targets]){const target=new CoC7RangeTarget(`${t.scene.id}.${t.id}`);target.token=t,this._targets.push(target)}if(this._targets.length)this._targets[0].active=!0;else{const target=new CoC7RangeTarget;target.active=!0,this._targets.push(target)}if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);if(this.token=chatHelper.getTokenFromKey(actorKey),this.token&&(this.tokenKey=actor.tokenKey),itemId){actor.items.get(itemId)&&(this.weapon.singleShot?this.singleShot=!0:this.weapon.system.properties.auto&&(this.fullAuto=!0))}}if(this.tokenKey)for(const t of this._targets)if(t.token&&this.token){t.distance=chatHelper.getDistance(t.token,this.token),t.roundedDistance=Math.round(100*t.distance.value)/100,t.distanceUnit=t.distance.unit;const distInYd=Math.round(100*chatHelper.toYards(t.distance))/100;if(this.actor){t.pointBlankRange=!1;distInYd<=this.actor.system.characteristics.dex.value/15&&(t.pointBlankRange=!0)}this.weapon&&this.weapon.baseRange&&(t.baseRange=!1,t.longRange=!1,t.extremeRange=!1,t.outOfRange=!1,this.weapon.system.properties.shotgun?(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=this.weapon.longRange&&(t.longRange=!0),distInYd>this.weapon.longRange&&distInYd<=this.weapon.extremeRange&&(t.extremeRange=!0),distInYd>this.weapon.extremeRange&&(t.outOfRange=!0)):(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=2*this.weapon.baseRange&&(t.longRange=!0),distInYd>2*this.weapon.baseRange&&distInYd<=4*this.weapon.baseRange&&(t.extremeRange=!0),distInYd>4*this.weapon.baseRange&&(t.outOfRange=!0)),t.baseRange||t.longRange||t.extremeRange||t.outOfRange||(t.baseRange=!0))}else t.baseRange=!0}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}get actor(){return chatHelper.getActorFromKey(this.actorKey)}get item(){return this.actor.items.get(this.itemId)}get weapon(){return this.item}get targets(){return this._targets||(this._targets=[]),this._targets}get target(){return this.targets&&this.targets.length?this.targets.pop():null}get skills(){return this.actor.getWeaponSkills(this.itemId)}get mainWeaponSkill(){return this.actor.items.get(this.weapon.system.skill.main.id)}get autoWeaponSkill(){return this.weapon.system.skill.alternativ.id?this.actor.items.get(this.weapon.system.skill.alternativ.id):this.mainWeaponSkill}get autoFire(){return this.burst||this.fullAuto}get multiTarget(){return this.fullAuto||this.multipleShots}get aiming(){return void 0===this._aiming&&(this._aiming=this.actor.getActorFlag("aiming")),this._aiming}get activeTarget(){return this._targets.length?this._targets.find((t=>t.active)):null}get shots(){return void 0===this._shots&&(this._shots=[]),this._shots}get currentShotRank(){return this.shots.length+1}get activeTargetShotDifficulty(){return this.shotDifficulty()}set aiming(b){this._aiming=b}get didAnyShotHit(){let anyHit=!1;for(const r of this.rolls)anyHit=anyHit||r.isSuccess;return anyHit}get successfulHits(){const hits=[];for(let index=0;index<this.rolls.length;index++)if(this.rolls[index].isSuccess){const hit={roll:this.rolls[index],shot:this.shots[index]};hits.push(hit)}return 0!==hits.length?hits:null}get shotFired(){return this.shots?this.shots.length:0}get totalAmmo(){return this.weapon.getBulletLeft()}get maxShots(){return this.fullAuto?"∞":this.weapon.system.usesPerRound.max?parseInt(this.weapon.system.usesPerRound.max):1}get ignoreAmmo(){return game.settings.get("CoC7","disregardAmmo")}get ignoreUsesPerRound(){return game.settings.get("CoC7","disregardUsePerRound")}get outOfAmmo(){return!this.ignoreAmmo&&this.totalBulletsFired>=this.weapon.getBulletLeft()}get outOfShots(){return!this.ignoreUsesPerRound&&(!!this.shots&&this.shots.length>=this.maxShots)}get volleySize(){if(!this.weapon.system.properties.auto)return 1;if(this._volleySize)return this._volleySize;const size=Math.floor(this.autoWeaponSkill.value/10);return size<3?3:size}set volleySize(x){x>=Math.floor(this.autoWeaponSkill.value/10)?this._volleySize=Math.floor(this.autoWeaponSkill.value/10):x<=3&&(this._volleySize=3),this._volleySize=parseInt(x)}get isVolleyMinSize(){return 3===this.volleySize}get isVolleyMaxSize(){return(Math.floor(this.autoWeaponSkill.value/10)<3?3:Math.floor(this.autoWeaponSkill.value/10))===this.volleySize}getTargetFromKey(key){return this._targets.find((t=>key===t.actorKey))}calcTargetsDifficulty(){for(const t of this.targets)t.shotDifficulty=this.shotDifficulty(t)}shotDifficulty(t=null){const target=t||this.activeTarget;let damage=this.weapon.system.range.normal.damage;this.weapon.system.properties.shotgun&&(t.longRange&&(damage=this.weapon.system.range.long.damage),t.extremeRange&&(damage=this.weapon.system.range.extreme.damage));let difficulty,modifier=target.modifier;difficulty=this.weapon.system.properties.shotgun?1:target.difficulty;let difficultyName="";if(this.aiming&&1===this.currentShotRank&&modifier++,this.advantage&&modifier++,this.disadvantage&&modifier--,this.reload&&modifier--,this.multipleShots&&!this.fullAuto&&modifier--,this.fullAuto&&(modifier-=this.currentShotRank-1),modifier<-2){difficulty+=Math.abs(modifier+2),difficulty>CoC7Check.difficultyLevel.critical&&(difficulty=CoC7Check.difficultyLevel.impossible),modifier=-2}return CoC7Check.difficultyLevel.regular===difficulty&&(difficultyName="Regular"),CoC7Check.difficultyLevel.hard===difficulty&&(difficultyName="Hard"),CoC7Check.difficultyLevel.extreme===difficulty&&(difficultyName="Extreme"),CoC7Check.difficultyLevel.critical===difficulty&&(difficultyName="Critical"),CoC7Check.difficultyLevel.impossible===difficulty&&(difficultyName="Impossible"),{level:difficulty,name:difficultyName,modifier,damage,impossible:difficulty===CoC7Check.difficultyLevel.impossible}}addShotAtCurrentTarget(){this.calcTargetsDifficulty();const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:1,transitBullets:0,bulletsShotTransit:1,transit:!1};let bulletLeft=this.totalAmmo-this.totalBulletsFired;if(this.fullAuto){if(this.currentShotRank>1){const previousShot=this.shots[this.currentShotRank-2];if(previousShot.actorKey!==this.activeTarget.actorKey){const distance=chatHelper.getDistance(chatHelper.getTokenFromKey(previousShot.actorKey),chatHelper.getTokenFromKey(this.activeTarget.actorKey));shot.transitBullets=Math.floor(chatHelper.toYards(distance)),shot.transitBullets>=bulletLeft&&!this.ignoreAmmo&&(shot.transitBullets=bulletLeft,bulletLeft=0),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.transitBullets,shot.transit=!0}}shot.bulletsShot=this.volleySize,shot.bulletsShot<=3&&(shot.bulletsShot=3),shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0),shot.bulletsShotTransit=shot.bulletsShot+shot.transitBullets}this.burst&&(shot.bulletsShot=parseInt(this.weapon.system.usesPerRound.burst)?parseInt(this.weapon.system.usesPerRound.burst):1,shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0)),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.bulletsShot,this.aiming&&(this.aiming=!1,this.aimed=!0),this.shots.push(shot)}get template(){return"systems/CoC7/templates/chat/combat/range-initiator.html"}async createChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;"singleShot"===flag||"multipleShots"===flag||"fullAuto"===flag?(this.singleShot=!1,this.multipleShots=!1,this.fullAuto=!1,"fullAuto"===flag&&(this.burst=!1),this[flag]=!0):"burst"===flag?(this.fullAuto=!1,this.singleShot||this.multipleShots||(this.singleShot=!0),this.burst=!this.burst):this[flag]=!this[flag]}async resolveCard(){if(this.rolls=[],this.multiTarget){let weaponMalfunction=!1,index=0;for(;!weaponMalfunction&&this.shots.length>index;){const roll=await this.shootAtTarget(this.shots[index]);roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll),await this.weapon.shootBullets(parseInt(this.shots[index].bulletsShot)+parseInt(this.shots[index].transitBullets)),roll.hasMalfunction&&(roll.isSuccess=!1,weaponMalfunction=!0),index++,this.rolls.push(roll)}}else{const roll=await this.shootAtTarget();roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll);let bulletFired=this.burst?parseInt(this.weapon.system.usesPerRound.burst):1;bulletFired>=this.totalAmmo&&(bulletFired=this.totalAmmo);const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:bulletFired,transitBullets:0,transit:!1};await this.weapon.shootBullets(bulletFired),roll.hasMalfunction&&(roll.isSuccess=!1),this.shots.push(shot),this.rolls.push(roll)}this.resolved=!0,this.rolled=!0,await this.updateChatCard()}async shootAtTarget(shot=null){const target=shot?this.getTargetFromKey(shot.actorKey):this.activeTarget,check=new CoC7Check;return check.actorKey=this.actorKey,check.actor=this.actorKey,check.item=this.itemId,check.isBlind=!1,check.isUnkonwn=!1,this.autoFire?check.skill=this.autoWeaponSkill:check.skill=this.mainWeaponSkill,this.multiTarget?(check.difficulty=shot.difficulty,check.diceModifier=shot.modifier):(this.calcTargetsDifficulty(),this.totalBulletsFired=parseInt(this.totalBulletsFired)+1,this.aiming&&(this.aiming=!1,this.aimed=!0),check.difficulty=this.activeTarget.shotDifficulty.level,check.diceModifier=this.activeTarget.shotDifficulty.modifier),check.details=`${game.i18n.localize("CoC7.Target")}: ${target.name}`,check.targetKey=target.actorKey,await check.roll(),check}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7RangeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}changeVolleySize(x){this.volleySize=this.volleySize+x,this.updateChatCard()}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".range.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7RangeInitiator.getFromCard(card);if(event.currentTarget.classList.contains("target-flag")){const target=event.currentTarget.closest(".target"),key=parseInt(target.dataset.targetKey);initiator.targets[key].toggleFlag(camelFlag)}else initiator.toggleFlag(camelFlag);initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}passRoll(rollIndex){const roll=this.rolls[rollIndex],luckAmount=parseInt(roll.luckNeeded);this.actor.spendLuck(luckAmount)?(roll.successLevel=roll.difficulty,roll.isSuccess=!0,roll.luckSpent=!0,this.updateChatCard()):ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`)}upgradeRoll(rollIndex,upgradeindex){const roll=this.rolls[rollIndex],increasedSuccess=roll.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel);roll.successLevel=newSuccessLevel,roll.difficulty<=newSuccessLevel&&(roll.isSuccess=!0),roll.luckSpent=!0,this.updateChatCard()}static getFromCard(card,messageId=null){const rangeInitiator=new CoC7RangeInitiator;rangeInitiator._targets=[],messageId?rangeInitiator.messageId=messageId:card.closest(".message")&&(rangeInitiator.messageId=card.closest(".message").dataset.messageId),chatHelper.getObjectFromElement(rangeInitiator,card);const cardTargets=card.querySelectorAll(".target");for(const t of cardTargets){const target=CoC7RangeTarget.getFromElement(t);rangeInitiator.targets.push(target)}const cardShots=card.querySelectorAll(".shot");if(cardShots)for(const s of cardShots){const shot={};chatHelper.getObjectFromElement(shot,s),rangeInitiator.shots.push(shot)}rangeInitiator.rolls=[];const rolls=card.querySelectorAll(".roll-result");for(const r of rolls){const roll=CoC7Roll.getFromElement(r);rangeInitiator.rolls.push(roll)}rangeInitiator.damage=[];const damageRolls=card.querySelectorAll(".damage-results");for(const dr of damageRolls){const damageRoll=CoC7Damage.getFromElement(dr);rangeInitiator.damage.push(damageRoll)}return rangeInitiator}async rollDamage(){this.damage=[];const hits=this.successfulHits;for(let i=0;i<hits.length;i++){const h=hits[i],volleySize=parseInt(h.shot.bulletsShot),damageRolls=[];if(volleySize>0){let damageFormula=String(h.shot.damage);damageFormula&&""!==damageFormula||(damageFormula="0");const damageDie=CoC7Damage.getMainDie(damageFormula),maxDamage=new Roll(damageFormula).evaluate({maximize:!0}).total,criticalDamageFormula=this.weapon.impale?`${damageFormula} + ${maxDamage}`:`${maxDamage}`,criticalDamageDie=CoC7Damage.getMainDie(criticalDamageFormula);let impalingShots=0,successfulShots=0,critical=!1;(this.fullAuto||this.burst)&&(successfulShots=Math.floor(volleySize/2)),0===successfulShots&&(successfulShots=1),h.roll.successLevel>=CoC7Check.difficultyLevel.extreme&&(impalingShots=successfulShots,successfulShots=volleySize-impalingShots,critical=!0,CoC7Check.difficultyLevel.critical!==h.roll.successLevel&&(CoC7Check.difficultyLevel.extreme<=h.roll.difficulty||h.shot.extremeRange)&&(successfulShots=volleySize,impalingShots=0,critical=!1));let total=0;for(let index=0;index<successfulShots;index++){const roll=new Roll(damageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:damageFormula,total:roll.total,die:damageDie,critical:!1}),total+=roll.total}for(let index=0;index<impalingShots;index++){const roll=new Roll(criticalDamageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:criticalDamageFormula,total:roll.total,die:criticalDamageDie,critical:!0}),total+=roll.total}let targetName="dummy",target=chatHelper.getTokenFromKey(h.roll.targetKey);target||(target=chatHelper.getActorFromKey(h.roll.targetKey)),target&&(targetName=target.name),this.damage.push({targetKey:h.roll.targetKey,targetName,rolls:damageRolls,total,critical,dealt:!1,resultString:game.i18n.format("CoC7.rangeCombatDamage",{name:targetName,total})})}}this.damageRolled=0!==this.damage.length,this.updateChatCard()}async dealDamage(){for(let dIndex=0;dIndex<this.damage.length;dIndex++){const actor=chatHelper.getActorFromKey(this.damage[dIndex].targetKey);if(null===actor)ui.notifications.error(game.i18n.localize("CoC7.NoTargetToDamage"));else{this.damage[dIndex].totalTaken=0,this.damage[dIndex].totalAbsorbed=0;for(let rIndex=0;rIndex<this.damage[dIndex].rolls.length;rIndex++){const dealtAmount=await actor.dealDamage(this.damage[dIndex].rolls[rIndex].total);this.damage[dIndex].totalTaken+=dealtAmount,this.damage[dIndex].rolls[rIndex].taken=dealtAmount,this.damage[dIndex].rolls[rIndex].absorbed=this.damage[dIndex].rolls[rIndex].total-dealtAmount,this.damage[dIndex].totalAbsorbed+=this.damage[dIndex].rolls[rIndex].total-dealtAmount}this.damage[dIndex].dealt=!0,this.damage[dIndex].resultString=game.i18n.format("CoC7.rangeCombatDamageArmor",{name:this.damage[dIndex].targetName,total:this.damage[dIndex].totalTaken,armor:this.damage[dIndex].totalAbsorbed})}}this.damageDealt=!0,this.updateChatCard()}}class CoC7RangeTarget{constructor(actorKey=null){this.actorKey=actorKey,this.cover=!1,this.pointBlankRange=!1,this.baseRange=!0,this.longRange=!1,this.extremeRange=!1,this.inMelee=!1}get big(){return void 0===this._big&&(this.actor&&this.actor.build?this._big=this.actor.build>=4:this._big=!1),this._big}set big(b){this._big=b}get small(){return void 0===this._small&&(this.actor&&this.actor.build?this._small=this.actor.build<=-2:this._small=!1),this._small}set small(b){this._small=b}get normal(){return!this.big&&!this.small}set normal(b){this._big=!1,this._small=!1}get isFast(){return!(!this.actor||!this.actor.mov)&&this.actor.mov>=8}get fast(){return void 0===this._fast&&(this._fast=!1),this._fast}set fast(b){this._fast=b}get actor(){return this.actorKey&&!this._actor&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this._actor}get name(){return this.token?this.token.name:this.actor?this.actor.name:"Dummy"}get img(){return this.token&&this.token.document?.texture.src?this.token.document?.texture.src:this.actor?this.actor.data.img:"../icons/svg/mystery-man-black.svg"}get token(){return!this._token&&this.actorKey&&(this._token=chatHelper.getTokenFromKey(this.actorKey)),this._token}get sizeText(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTargetTitle"):this.small?game.i18n.localize("CoC7.rangeCombatCard.SmallTargetTitle"):game.i18n.localize("CoC7.rangeCombatCard.NormalTargetTitle")}get sizeLabel(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTarget"):this.small?game.i18n.localize("CoC7.combatCard.SmallTarget"):game.i18n.localize("CoC7.rangeCombatCard.NormalTarget")}get difficulty(){return this.baseRange||this.pointBlankRange?CoC7Check.difficultyLevel.regular:this.longRange?CoC7Check.difficultyLevel.hard:this.extremeRange?CoC7Check.difficultyLevel.extreme:CoC7Check.difficultyLevel.impossible}get modifier(){let modifier=0;return this.cover&&modifier--,this.pointBlankRange&&modifier++,this.fast&&modifier--,this.small&&modifier--,this.big&&modifier++,this.inMelee&&modifier--,this.surprised&&modifier++,modifier}set token(t){this._token=t}static getFromElement(element){const target=new CoC7RangeTarget;return chatHelper.getObjectFromElement(target,element),target}static changeDisplayedTarget(event){if(!event.currentTarget.classList.contains("target-selector"))return null;return event.currentTarget.closest(".targets").querySelectorAll(".target")}attachToElement(element){chatHelper.attachObjectToElement(this,element)}toggleFlag(flag){"baseRange"===flag||"longRange"===flag||"extremeRange"===flag||"pointBlankRange"===flag?(this.pointBlankRange=!1,this.baseRange=!1,this.longRange=!1,this.extremeRange=!1,this.outOfRange=!1,this[flag]=!0):"size"===flag?this.small?(this.small=!1,this.big=!0):this.big?(this.small=!1,this.big=!1):this.small=!0:this[flag]=!this[flag],"fast"===flag&&this.fast&&!this.isFast&&ui.notifications.warn(game.i18n.format("CoC7.WarnFastTargetWithWrongMOV",{mov:this.actor.mov}))}}const CHAT_COC7_MESSAGE_FAKEROLL='<div class="dice-roll"><div class="dice-result"><div class="dice-formula">???</div><h4 class="dice-total">?</h4></div></div>';class CoC7Chat{static renderChatMessageHook(chatMessage,html){chatMessage.getFlag("CoC7","GMSelfRoll")&&!game.user.isGM&&(html.find(".whisper-to").remove(),html.find(".flavor-text").replaceWith(`<span class="flavor-text">${game.i18n.localize("CoC7.RollSecretDice")}</span>`),html.find(".message-content").replaceWith(`<div class="message-content">${CHAT_COC7_MESSAGE_FAKEROLL}</div>`)),chatMessage.getFlag("CoC7","removeWisperTargets")&&!game.user.isGM&&html.find(".whisper-to").remove(),chatMessage.getFlag("CoC7","fakeRoll")&&game.user.isGM&&(html.find(".flavor-text").replaceWith(game.i18n.localize("CoC7.KeeperSentDecoy")),html.find(".message-content").remove())}static fakeRollMessage(){const chatData={user:game.user.id,flavor:game.i18n.localize("CoC7.RollSecretDice"),whisper:game.users.players,type:CONST.CHAT_MESSAGE_TYPES.WHISPER,flags:{CoC7:{GMSelfRoll:!1,removeWisperTargets:!0,fakeRoll:!0}},content:CHAT_COC7_MESSAGE_FAKEROLL};ChatMessage.create(chatData)}static ready(){game.CoC7="init"}static async chatListeners(app,html){html.on("click",".card-buttons button",CoC7Chat._onChatCardAction.bind(this)),html.on("click",".card-title",CoC7Chat._onChatCardToggleContent.bind(this)),html.on("click",".radio-switch",CoC7Chat._onChatCardRadioSwitch.bind(this)),html.on("click",".panel-switch",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".simple-flag",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".volley-size",CoC7Chat._onChatCardVolleySize.bind(this)),html.on("click",".dropdown-element",CoC7Chat._onDropDownElementSelected.bind(this)),html.on("click",".simple-toggle",CoC7Chat._onToggleSelected.bind(this)),html.on("click",".target-selector",CoC7Chat._onTargetSelect.bind(this)),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),CoC7Link.bindEventsHandler(html),html.on("click","coc7-inline-result",CoC7Chat._onInline.bind(this)),OpposedCheckCard.bindListerners(html),CombinedCheckCard.bindListerners(html)}static _onOpenActor(event){event.preventDefault();const actorKey=event.currentTarget.dataset.actorKey;if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);actor.isOwner&&actor.sheet.render(!0)}}static async onUpdateChatMessage(chatMessage){if(ui.chat.scrollBottom(),game.user.isGM&&0===chatMessage.type){const card=$(chatMessage.content)[0];if(card.classList.contains("melee")&&"true"===card.dataset.resolved){if(card.classList.contains("initiator"))if(card.dataset.targetCard){const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id),target=CoC7MeleeTarget.getFromMessageId(initiator.targetCard);if(target.resolved){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,target.messageId,target.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}else{const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id);if(initiator.resolutionCard){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,null,initiator.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}if(card.classList.contains("target")){const target=CoC7MeleeTarget.getFromMessageId(chatMessage.id),resolutionCard=new CoC7MeleeResoltion(target.parentMessageId,chatMessage.id,target.resolutionCard);await resolutionCard.resolve(),target.meleeInitiator.checkRevealed||await target.meleeInitiator.revealCheck()}}}}static async renderMessageHook(message,html){if(ui.chat.scrollBottom(),InteractiveChatCard.bindListeners(html),message.getFlag("CoC7","checkRevealed")&&(html.find(".dice-roll").removeClass("gm-visible-only"),html[0].dataset.checkRevealed=!0),html.find(".dropbtn").click((event=>event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show"))),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),game.user.isGM){const card=html[0].querySelector(".coc7.chat-card");if(card&&card.classList.contains("roll-card")&&"true"!==card.dataset.processed&&card.dataset.refMessageId){const roll=CoC7Roll.getFromElement(card);"target"===card.dataset.side&&(roll.defendantId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),"initiator"===card.dataset.side&&(roll.initiatorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),card.dataset.processed="true",CoC7Chat.updateCombatCardTarget(roll)}}const userOnly=html.find(".target-only");for(const element of userOnly)if(!game.user.isGM){element.style.display="none";const actorId=element.getAttribute("data-actor-id");actorId&&game.actors.get(actorId).isOwner&&(element.style.display="block")}const gmOnly=html.find(".gm-only");for(const zone of gmOnly)game.user.isGM||(zone.style.display="none");const userVisibleOnly=html.find(".user-visible-only");for(const elem of userVisibleOnly)game.user.isGM&&(elem.style.display="none");const gmVisibleOnly=html.find(".gm-visible-only");for(const elem of gmVisibleOnly)game.user.isGM||game.user.isTrusted&&game.settings.get("CoC7","trustedCanSeeChatCard")||(elem.style.display="none");const ownerVisibleOnly=html.find(".owner-visible-only");for(const zone of ownerVisibleOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||game.user.isGM)&&(zone.style.display="none")}if(!game.user.isGM){const ownerOnly=html.find(".owner-only");for(const zone of ownerOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey||zone.dataset?.actorId);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||!actor&&!game.user.isGM)&&(zone.style.display="none")}const gmSelectOnly=html.find(".gm-select-only");if(!game.user.isTrusted||!game.settings.get("CoC7","trustedCanModfyChatCard"))for(const select of gmSelectOnly)select.classList.add("inactive"),select.classList.remove("simple-flag")}}static get actionTypeString(){return{fightBack:"CoC7.fightBack",maneuver:"CoC7.maneuver",dodging:"CoC7.dodge"}}static _onTargetSelect(event){const index=parseInt(event.currentTarget.dataset.key),targetsSelector=event.currentTarget.closest(".targets-selector");for(const i of targetsSelector.querySelectorAll("img"))i.style.border="none";targetsSelector.querySelector(`[data-key="${index}"]`).querySelector("img").style.border="1px solid #000";const targets=event.currentTarget.closest(".targets");for(const t of targets.querySelectorAll(".target"))t.style.display="none",t.dataset.active="false";const targetToDisplay=targets.querySelector(`[data-target-key="${index}"]`);targetToDisplay.style.display="block",targetToDisplay.dataset.active="true"}static _onDropDownElementSelected(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.closest(".toggle-switch").classList.add("switched-on"),event.currentTarget.closest(".dropdown-content").classList.toggle("show");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");switch(button.dataset.action="defending",button.dataset.actionType=event.currentTarget.dataset.action,button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.dataset.itemId=event.currentTarget.dataset.weaponId,button.dataset.itemName=event.currentTarget.dataset.weaponName,event.currentTarget.dataset.action){case"maneuver":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`;break;case"fightBack":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.weaponName} (${event.currentTarget.dataset.skillValue}%)`}}static async _onInline(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("inline-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _onToggleSelected(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);if(""===event.currentTarget.dataset.skillId)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorNoDodgeSkill"));const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.classList.add("switched-on");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");button.dataset.action="defending",button.dataset.actionType="dodging",button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`}static _onChatCardRadioSwitch(event){event.preventDefault();const optionList=event.currentTarget.parentElement.getElementsByClassName("radio-switch");let index;for(index=0;index<optionList.length;index++){const element=optionList[index];element.dataset.property===event.currentTarget.dataset.property?element.classList.add("switched-on"):element.classList.remove("switched-on")}event.currentTarget.parentElement.dataset.selected=event.currentTarget.dataset.property}static async _onChatCardVolleySize(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("range")&&card.classList.contains("initiator")){const rangeCard=CoC7RangeInitiator.getFromCard(card);event.currentTarget.classList.contains("increase")?rangeCard.changeVolleySize(1):event.currentTarget.classList.contains("decrease")&&rangeCard.changeVolleySize(-1)}}static async _onChatCardToggleSwitch(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");card.classList.contains("melee")&&(card.classList.contains("initiator")&&CoC7MeleeInitiator.updateCardSwitch(event),card.classList.contains("target")&&CoC7MeleeTarget.updateCardSwitch(event)),card.classList.contains("range")&&card.classList.contains("initiator")&&CoC7RangeInitiator.updateCardSwitch(event),card.classList.contains("damage"),card.classList.contains("roll-card")&&CoC7Check.updateCardSwitch(event)}static _getChatCardActor(card){const cardData=card.dataset.object?JSON.parse(unescape(card.dataset.object)):card.dataset;if(cardData.actorKey)return CoC7Chat._getActorFromKey(cardData.actorKey);const tokenKey=cardData.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}const actorId=cardData.actorId;if(actorId)return game.actors.get(actorId);const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){const chatMessage=game.messages.get(messageId);if(chatMessage.user)return chatMessage.user.character}return null}static isCardOwner(card){const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){return game.messages.get(messageId).ownner||!1}return!1}static _getActorFromKey(key){if(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}return game.actors.get(key)||null}}static getActorFromToken(tokenKey){const token=CoC7Chat.getToken(tokenKey);return token?token.actor:null}static getToken(tokenKey){if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token||new Token(tokenData):null}}return null}static async updateChatCard(card,messId=null){const messageId=null==messId?card.closest(".message").dataset.messageId:messId,message=game.messages.get(messageId),msg=await message.update({content:card.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static async _onChatCardAction(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card");if(!card)return;const originMessage=button.closest(".message"),action=button.dataset.action;if(CoC7Chat._getChatCardActor(card))switch(action){case"useLuck":{const luckAmount=parseInt(button.dataset.luckAmount),newSuccessLevel=parseInt(event.currentTarget.dataset.newSuccessLevel);if(card.classList.contains("melee")){let meleeCard;card.classList.contains("target")&&(meleeCard=CoC7MeleeTarget.getFromCard(card)),card.classList.contains("initiator")&&(meleeCard=CoC7MeleeInitiator.getFromCard(card)),meleeCard.upgradeRoll(luckAmount,newSuccessLevel,card)}else if(card.classList.contains("range")){const rangeCard=CoC7RangeInitiator.getFromCard(card),rollResult=button.closest(".roll-result"),rollIndex=rollResult?parseInt(rollResult.dataset.index):null;if(button.classList.contains("pass-check"))rangeCard.passRoll(rollIndex);else{const upgradeIndex=parseInt(button.dataset.index);rangeCard.upgradeRoll(rollIndex,upgradeIndex)}}else if(card.classList.contains("roll-card")||null!=card.querySelector(".roll-result")){const check=await CoC7Check.getFromCard(card);if(button.classList.contains("pass-check")){const luckAmount=parseInt(button.dataset.luckAmount);check.forcePass(luckAmount)}else{const upgradeIndex=parseInt(button.dataset.index);await check.upgradeCheck(upgradeIndex)}}else{const actor=CoC7Chat._getChatCardActor(card),detailedResultPlaceHolder=card.querySelector(".result-details");if(actor.spendLuck(luckAmount)){const result=card.querySelector(".dice-total");switch(card.dataset.successLevel=newSuccessLevel,card.dataset.processed="false",newSuccessLevel){case CoC7Check.successLevel.regular:result.innerText=game.i18n.localize("CoC7.RegularSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:result.innerText=game.i18n.localize("CoC7.HardSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:result.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:result.innerText=game.i18n.localize("CoC7.CriticalSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}result.classList.replace("failure","success"),result.classList.remove("fumble"),card.querySelector(".card-buttons").remove(),card.querySelector(".dice-tooltip").style.display="none",await CoC7Chat.updateChatCard(card)}else ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}))}break}case"push":{const newCard=card.cloneNode(!0),result=newCard.querySelector(".dice-total");result.innerText=result.innerText+game.i18n.localize("CoC7.PushingSkill"),result.classList.remove("failure"),newCard.querySelector(".card-buttons").remove(),newCard.dataset.pushedRoll=!0,await CoC7Chat.updateChatCard(newCard,originMessage.dataset.messageId),await CoC7Check.push(card);break}case"defending":{let defender,defenderKey=event.currentTarget.closest(".defender-action-select").dataset.tokenId;defenderKey?defender=this.getActorFromToken(defenderKey):(defenderKey=event.currentTarget.closest(".defender-action-select").dataset.actorId,defender=game.actors.get(defenderKey));const responseType=event.currentTarget.dataset.actionType,outnumbered="true"===event.currentTarget.dataset.outnumbered,check=new CoC7Check;switch(check.referenceMessageId=originMessage.dataset.messageId,check.rollType="opposed",check.side="target",check.action=responseType,responseType){case"dodging":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"fightBack":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.item=event.currentTarget.dataset.itemId,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"maneuver":{const actor=CoC7Chat._getChatCardActor(card);if(defender.build<=actor.build-3)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorManeuverNotPossible"));check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),defender.build<actor.build&&(check.diceModifier=check.diceModifier-(actor.build-defender.build)),check.diceModifier<-2&&(check.difficulty=check.difficulty+Math.abs(check.diceModifier)-2,check.diceModifier=-2),await check.roll(),check.toMessage();break}}break}case"melee-initiator-roll":{const initiator=CoC7MeleeInitiator.getFromCard(card),check=await initiator.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await initiator.publishCheckResult();break}case"melee-target-no-response":{const target=CoC7MeleeTarget.getFromCard(card);await target.publishNoReponseResult();break}case"melee-target-roll":{const target=CoC7MeleeTarget.getFromCard(card),check=await target.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await target.publishCheckResult();break}case"roll-melee-damage":{const damageChatCard=new DamageCard({critical:"true"===button.dataset.critical,fastForward:event.shiftKey});damageChatCard.actorKey=button.dataset.dealer,damageChatCard.targetKey=button.dataset.target,damageChatCard.itemId=button.dataset.weapon,originMessage.dataset.messageId&&(damageChatCard.messageId=originMessage.dataset.messageId),damageChatCard.updateChatCard();break}case"range-initiator-shoot":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);rangeInitiator.addShotAtCurrentTarget(),await rangeInitiator.updateChatCard();break}case"range-initiator-roll":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.resolveCard();break}case"roll-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.rollDamage();break}case"deal-melee-damage":{const targetKey=card.dataset.targetKey,amount=card.dataset.result,targetActor=chatHelper.getActorFromKey(targetKey);await targetActor.dealDamage(amount);const buttons=card.querySelector(".card-buttons"),diceTotal=card.querySelector(".dice-total");$(diceTotal).append('<i class="fas fa-check"></i>'),buttons&&buttons.remove(),await CoC7Chat.updateChatCard(card);break}case"deal-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.dealDamage();break}case"testcheck":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-pass":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-fail":(await CoC7Check.getFromCard(card)).forceFail();break;case"increase-success-level":(await CoC7Check.getFromCard(card)).increaseSuccessLevel();break;case"decrease-success-level":(await CoC7Check.getFromCard(card)).decreaseSuccessLevel();break;case"reveal-check":{const check=await CoC7Check.getFromCard(card);check.isBlind=!1,check.computeCheck(),isCtrlKey(event),check.updateChatCard({makePublic:!0});break}case"roll-check-card":{const check=await CoC7Check.getFromCard(card);check.standby=!1,await check._perform(),check.updateChatCard({forceRoll:!0});break}case"flag-for-development":{const check=await CoC7Check.getFromCard(card);await check.flagForDevelopement(),check.computeCheck(),check.updateChatCard();break}case"reset-creature-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.clearSanLossReason(),await sanCheck.updateChatCard();break}case"roll-san-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSan(),await sanCheck.updateChatCard();break}case"advance-state":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.advanceState(button.dataset.state),await sanCheck.updateChatCard();break}case"roll-san-loss":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSanLoss(),sanCheck.updateChatCard();break}case"roll-int-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollInt(),sanCheck.updateChatCard();break}case"roll-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);await conCheck.rollCon(),conCheck.updateChatCard();break}case"reveal-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);conCheck.isBlind=!1,conCheck.updateChatCard();break}}}static _onChatCardToggleContent(event){event.preventDefault();const content=event.currentTarget.closest(".chat-card").querySelector(".card-content");content&&(content.style.display?content.style.display="none"===content.style.display?"block":"none":content.style.display="block")}}class CoC7MeleeInitiator extends ChatCardActor{constructor(actorKey=null,itemId=null,fastForward=!1){super(actorKey,fastForward),this.itemId=itemId,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1}get template(){return"systems/CoC7/templates/chat/combat/melee-initiator.html"}async revealCheck(){const chatMessage=game.messages.get(this.messageId);await chatMessage.setFlag("CoC7","checkRevealed",!0),await ui.chat.updateMessage(chatMessage,!1)}async createChatCard(){chatHelper.getActorImgFromKey(this.actorKey);const html=await renderTemplate(this.template,this),speakerData={};this.token?speakerData.token=this:speakerData.actor=this;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;if(check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="initiator",check.action="attack",check.actor=this.actorKey,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,game.user.isGM?this.checkRevealed=!1:this.checkRevealed=!0,this.outnumbered&&(check.diceModifier+=1),this.surprised&&(check.diceModifier+=1),this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),this.criticalDamage=check.successLevel===CoC7Check.successLevel.extreme||check.successLevel===CoC7Check.successLevel.critical,this.hasTarget&&!this.autoSuccess){const message=await game.CoC7socket.executeAsGM("gmcreatemessageas",{targetKey:this.targetKey,messageId:this.messageId,fastForward:this.fastForward,actorKey:this.actorKey});this.targetCard=message.id||message._id}return this.autoSuccess&&!this.check.isFumble&&this.check.forcePass(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");if(!this.targetCard&&!this.autoSuccess&&this.hasTarget){const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id}await this.updateChatCard()}static getFromCard(card,messageId=null){const initiator=new CoC7MeleeInitiator;return chatHelper.getObjectFromElement(initiator,card),initiator.roll=CoC7Roll.getFromCard(card),card.closest(".message")?initiator.messageId=card.closest(".message").dataset.messageId:initiator.messageId=messageId,initiator}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7MeleeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7MeleeInitiator.getFromCard(card);initiator.toggleFlag(flag),initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(game.i18n.format("CoC7.LuckNotEnough",{name:this.actor.name})),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total"),rollDamageButton=oldCard.querySelector('button[data-action="roll-melee-damage"]');switch(rollDamageButton&&rollDamageButton.classList.remove("invisible"),newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoCActor extends Actor{constructor(data,context){if(data.type in CONFIG.Actor.documentClasses&&!context?.extended)return new CONFIG.Actor.documentClasses[data.type](data,{extended:!0,...context});super(data,context)}async initialize(){super.initialize(),await this.creatureInit()}prepareBaseData(){if(["character","npc","creature"].includes(this.type)){this.system.skills={};for(const i of this.items)"skill"===i.type&&(this.system.skills[`${i.itemIdentifier}`]={foundryID:i.id,cocid:i.flags?.CoC7?.cocidFlag?.id,value:i.rawValue,bonusDice:i.system.bonusDice});if(void 0===this.system.attribs.san.dailyLimit)if(this.system.attribs.san.oneFifthSanity){const s=this.system.attribs.san.oneFifthSanity.split("/");s[1]&&!isNaN(Number(s[1]))?this.system.attribs.san.dailyLimit=Number(s[1]):this.system.attribs.san.dailyLimit=0}else this.system.attribs.san.dailyLimit=0;this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.build.current=this.hp}super.prepareBaseData()}prepareEmbeddedDocuments(){super.prepareEmbeddedDocuments()}prepareDerivedData(){if(["character","npc","creature"].includes(this.type)){super.prepareDerivedData(),this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.hp.max=this.rawHpMax,null===this.hp&&(this.system.attribs.hp.value=this.rawHpMax),this.system.attribs.mp.max=this.rawMpMax,null===this.mp&&(this.system.attribs.mp.value=this.rawMpMax),this.system.attribs.san.max=this.rawSanMax,null===this.san&&(this.system.attribs.san.value=this.rawSanMax);const filterMatrix=[];this.system.attribs.hp.auto&&filterMatrix.push("system.attribs.hp.max"),this.system.attribs.mp.auto&&filterMatrix.push("system.attribs.mp.max"),this.system.attribs.san.auto&&filterMatrix.push("system.attribs.san.max"),this.system.attribs.mov.auto&&filterMatrix.push("system.attribs.mov.value"),this.system.attribs.db.auto&&filterMatrix.push("system.attribs.db.value"),this.system.attribs.build.auto&&filterMatrix.push("system.attribs.build.value");const changes=this.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);changes.sort(((a,b)=>a.priority-b.priority));const selectChanges=changes.filter((e=>filterMatrix.includes(e.key)));for(const change of selectChanges)change.effect.apply(this,change);this.hpMax&&this.hpMax<this.hp&&(this.system.attribs.hp.value=this.hpMax),this.mpMax&&this.mpMax<this.mp&&(this.system.attribs.mp.value=this.mpMax),this.sanMax&&this.sanMax<this.san&&(this.system.attribs.san.value=this.sanMax)}}static async create(data,options={}){return"character"===data.type?data.prototypeToken=mergeObject(data.prototypeToken||{},{actorLink:!0,disposition:1,sight:{enabled:!0},detectionModes:[{id:"basicSight",range:30,enabled:!0}]}):"npc"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/cultist.svg"):"creature"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/floating-tentacles.svg"):"container"===data.type&&(void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="icons/svg/chest.svg"),data.prototypeToken=mergeObject(data.prototypeToken||{},{actorLink:!0})),super.create(data,options)}checkUndefinedAuto(){const returnData={attribs:{hp:{},mp:{},san:{},mov:{},db:{},build:{}}};return void 0===this.system.attribs?.hp?.auto&&(returnData.attribs.hp.auto=!0),void 0===this.system.attribs?.mp?.auto&&(returnData.attribs.mp.auto=!0),void 0===this.system.attribs?.san?.auto&&(returnData.attribs.san.auto=!0),void 0===this.system.attribs?.mov?.auto&&(returnData.attribs.mov.auto=!0),void 0===this.system.attribs?.db?.auto&&(returnData.attribs.db.auto=!0),void 0===this.system.attribs?.build?.auto&&(returnData.attribs.build.auto=!0),returnData}get characteristics(){const characteristics={str:{value:null,shortName:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,shortName:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,shortName:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,shortName:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,shortName:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,shortName:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,shortName:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,shortName:"CHARAC.EDU",label:"CHARAC.Education",formula:null}};if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))characteristics[key]={key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value,hard:Math.floor(value.value/2)||null,extreme:Math.floor(value.value/5)||null,formula:value.formula};return characteristics}static async initToken(createData){}get hasTempoInsane(){return this.hasConditionStatus(COC7.status.tempoInsane)}get getTempoInsaneDurationText(){return this.hasConditionValue(COC7.status.tempoInsane,"durationText")}get hasIndefInsane(){return this.hasConditionStatus(COC7.status.indefInsane)}get portrait(){return game.settings.get("CoC7","useToken")&&(this.token?.texture?.src||this.prototypeToken?.texture?.src)||this.img}async enterBoutOfMadness(realTime=!0,duration=1){let result=null;const boutOfMadnessTableId=realTime?game.settings.get("CoC7","boutOfMadnessRealTimeTable"):game.settings.get("CoC7","boutOfMadnessSummaryTable");if("none"!==boutOfMadnessTableId){result={phobia:!1,mania:!1,description:null};const boutOfMadnessTable=game.tables.get(boutOfMadnessTableId);if(result.tableRoll=await boutOfMadnessTable.roll(),void 0!==result.tableRoll.results[0]){if(CONST.TABLE_RESULT_TYPES.DOCUMENT===result.tableRoll.results[0].type){const item=game.items.get(result.tableRoll.results[0].documentId);if(void 0!==item){item.system?.type?.phobia&&(result.phobia=!0),item.system?.type?.mania&&(result.mania=!0),result.description=`${item.name}:${TextEditor.enrichHTML(item.system.description.value,{async:!1})}`,result.name=item.name;const itemData=item.toObject();delete itemData._id,await this.createEmbeddedDocuments("Item",[itemData])}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessItemNotFound"))}CONST.TABLE_RESULT_TYPES.TEXT===result.tableRoll.results[0].type&&(result.description=TextEditor.enrichHTML(result.tableRoll.results[0].text,{async:!1}))}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessTableNotFound"))}return realTime?(this.setCondition(COC7.status.tempoInsane,{realTime,duration}),result):result}static emptySkill(skillName,value,{rarity=!1,push=!0,combat=!1,img=!1,specialization=!1}={}){const data={name:skillName,type:"skill",system:{value,skillName,specialization:"",properties:{special:!1,rarity,push,combat}}};if(!1!==img&&(data.img=img),!1!==specialization){const parts=CoC7Item.getNamePartsSpec(skillName,specialization);data.system.specialization=parts.specialization,data.system.skillName=parts.skillName,data.name=parts.name,data.system.properties.special=!0}return data}async createSkill(skillName,value,showSheet=!1){const data=CoCActor.emptySkill(skillName,value);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createWeaponSkill(name,firearms=!1,base=null){const skillData=await SkillSpecSelectDialog.create([],game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),0,name),value=Number(skillData.get("base-value")),parts=CoC7Item.getNamePartsSpec(name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),data={name:parts.name,type:"skill",system:{base:isNaN(value)?0:value,adjustments:{personal:null,occupation:null,archetype:null,experience:null},skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}};await this.createEmbeddedDocuments("Item",[data],{renderSheet:!base});return this.getSkillsByName(name)[0]}async creatureInit(){if("creature"!==this.type)return;if(this.getActorFlag("initialized"))return;if(0===this.getSkillsByName(game.i18n.localize(COC7.creatureFightingSkill)).length){try{const parts=CoC7Item.getNamePartsSpec(game.i18n.localize(COC7.creatureFightingSkill),game.i18n.localize(COC7.fightingSpecializationName)),data={type:"skill",name:parts.name,system:{base:0,value:null,skillName:parts.skillName,specialization:parts.specialization,properties:{combat:!0,fighting:!0,special:!0},flags:{}}},skill=await this.createEmbeddedDocuments("Item",[data],{renderSheet:!1}),attack=await this.createEmbeddedDocuments("Item",[{name:"Innate attack",type:"weapon",system:{description:{value:"Creature's natural attack",chat:"Creature's natural attack"},wpnType:"innate",properties:{addb:!0,slnt:!0}}}],{renderSheet:!1});if(skill.length>0&&attack.length>0){const createdAttack=this.items.get(attack[0].id);await createdAttack.update({"system.skill.main.id":skill[0].id,"system.skill.main.name":skill[0].name})}}catch(err){console.error("Creature init: "+err.message)}await this.setActorFlag("initialized")}}async createItem(itemName,quantity=1,showSheet=!1){const data={name:itemName,type:"item",system:{quantity}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptyBook(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newBookName)))return this.createBook(game.i18n.localize(COC7.newBookName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newBookName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newBookName)+" "+index;return this.createBook(itemName,showSheet)}async createBook(itemName,showSheet=!1){const data={name:itemName,type:"book",system:{}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySpell(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSpellName)))return this.createSpell(game.i18n.localize(COC7.newSpellName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;return this.createSpell(itemName,showSheet)}static emptySpell(itemName){return{name:itemName,type:"spell",system:{}}}async createSpell(itemName,showSheet=!1){const data=CoCActor.emptySpell(itemName);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySkill(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSkillName)))return this.createSkill(game.i18n.localize(COC7.newSkillName),"character"!==this.type?1:null,showSheet);let index=0,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;for(;this.getItemIdByName(skillName);)index++,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;return this.createSkill(skillName,null,showSheet)}async createEmptyItem(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newItemName)))return this.createItem(game.i18n.localize(COC7.newItemName),1,showSheet);let index=0,itemName=game.i18n.localize(COC7.newItemName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newItemName)+" "+index;return this.createItem(itemName,1,showSheet)}async createEmptyWeapon(event=null,properties={}){const showSheet=!event||!event.shiftKey;let weaponName=game.i18n.localize(COC7.newWeaponName);if(this.getItemIdByName(game.i18n.localize(COC7.newWeaponName))){let index=0;for(weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index;this.getItemIdByName(weaponName);)index++,weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index}const data={name:weaponName,type:"weapon",system:{properties:{}}};for(const[key]of Object.entries(COC7.weaponProperties))data.system.properties[key]=Object.prototype.hasOwnProperty.call(properties,key)??!1;await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createBioSection(title=null){const bio=this.system.biography?duplicate(this.system.biography):[];bio.push({title,value:null}),await this.update({"system.biography":bio},{renderSheet:!1})}async updateBioValue(index,content){const bio=duplicate(this.system.biography);bio[index].value=content,await this.update({"system.biography":bio},{render:!1})}async updateBioTitle(index,title){const bio=duplicate(this.system.biography);bio[index].title=title,await this.update({"system.biography":bio})}async deleteBioSection(index){const bio=duplicate(this.system.biography);bio.splice(index,1),await this.update({"system.biography":bio})}async moveBioSectionUp(index){if(0===index)return;const bio=duplicate(this.system.biography);if(index>=bio.length)return;const elem=bio.splice(index,1)[0];bio.splice(index-1,0,elem),await this.update({"system.biography":bio})}async moveBioSectionDown(index){const bio=duplicate(this.system.biography);if(index>=bio.length-1)return;const elem=bio.splice(index,1)[0];bio.splice(index+1,0,elem),await this.update({"system.biography":bio})}async updateTextArea(textArea){const name="system."+textArea.dataset.areaName;await this.update({[name]:textArea.value})}async createEmbeddedDocuments(embeddedName,dataArray,options){const processedDataArray=[];let baseValue=0,baseCalculated=0,archetype=!1,occupation=!1;for(let data of dataArray)switch(data.type){case"skill":{if(baseValue=data.system.base,baseCalculated=await CoC7Item.calculateBase(this,data),"character"!==this.type){if(this.getItemIdByName(data.name))return;if(baseValue&&String(baseValue)!==String(data.system.value)&&(data.system.value=baseCalculated),isNaN(Number(data.system.value))){let value;try{value=(await new Roll(data.system.value,this.parseCharacteristics()).evaluate({async:!0})).total}catch(err){value=null}value&&(data.system.value=Math.floor(value))}}else data.system.value=null;let addThis=!0;if(CoC7Item.isAnySpec(data)){const isAnyButNotFlagged=(!data.system.properties?.requiresname??!1)&&!data.system.properties?.picknameonly;let skillList=[];const group=game.system.api.cocid.guessGroupFromDocument(data);if(group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>(item.system.properties?.special??!1)&&!item.system.properties?.requiresname&&!item.system.properties?.picknameonly))),data.system?.flags?.occupation||data.system?.flags?.archetype){const existingSkills=this.skills.filter((el=>!!el.system.specialization&&((!data.system?.flags?.occupation||!el.system.flags?.occupation)&&((!data.system?.flags?.archetype||!el.system.flags?.archetype)&&data.system.specialization.toLocaleLowerCase()===el.system.specialization.toLocaleLowerCase()))));if(existingSkills.length>0)if(skillList.length>0){for(let i=existingSkills.length-1;i>=0;i--){const found=skillList.findIndex((item=>item.name===existingSkills[i].name||item.flags?.CoC7?.cocidFlag?.id===existingSkills[i].flags?.CoC7?.cocidFlag?.id));found>-1&&skillList.splice(found,1)}skillList=skillList.concat(existingSkills)}else skillList=existingSkills}skillList.length>0&&skillList.sort(CoC7Utilities.sortByNameKey);const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:isAnyButNotFlagged||(data.system.properties?.requiresname??!1),fixedBaseValue:data.system.properties?.keepbasevalue??!1,specializationName:data.system.specialization,label:data.name,baseValue:data.system.base});if(Object.prototype.hasOwnProperty.call(skillData,"selected"))if(skillData.selected){const existingItem=this.items.get(skillData.selected);if(existingItem){const changes={};data.system.properties?.keepbasevalue||""!==skillData.baseValue&&(baseCalculated=skillData.baseValue,changes["system.value"]=baseCalculated);for(const[key,value]of Object.entries(data.system.flags))value&&(changes[`system.flags.${key}`]=!0);Object.keys(changes).length>0&&(changes._id=existingItem.id,await this.updateEmbeddedDocuments("Item",[changes])),data.name=CoC7Item.getNameWithoutSpec(existingItem),addThis=!1}else{const existing=skillList.find((i=>i.id===skillData.selected));if(existing){const flags=data.system?.flags;data=duplicate(existing);for(const[key,value]of Object.entries(flags))value&&(data.system.flags[key]=!0);data.system.properties?.keepbasevalue||(""!==skillData.baseValue?(baseCalculated=skillData.baseValue,data.system.value=baseCalculated):baseValue=data.system.value)}}}else{const parts=CoC7Item.getNamePartsSpec(skillData.name,data.system.specialization);data.system.properties?.keepbasevalue||(""!==skillData.baseValue?(baseCalculated=skillData.baseValue,data.system.value=baseCalculated):baseValue=data.system.value),data.system.skillName=parts.skillName,data.name=parts.name}}addThis&&(String(baseValue)!==String(baseCalculated)&&(data.system.base=baseCalculated),processedDataArray.push(duplicate(data)));break}case"weapon":if("container"!==this.type){const mainSkill=data.system?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.main.id=skill.id)}const secondSkill=data.system?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill;skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.alternativ.id=skill.id)}}processedDataArray.push(duplicate(data));break;case"setup":{if(data.system.enableCharacterisitics){data.system.characteristics.list={},data.system.characteristics.list.str=this.getCharacteristic("str"),data.system.characteristics.list.con=this.getCharacteristic("con"),data.system.characteristics.list.siz=this.getCharacteristic("siz"),data.system.characteristics.list.dex=this.getCharacteristic("dex"),data.system.characteristics.list.app=this.getCharacteristic("app"),data.system.characteristics.list.int=this.getCharacteristic("int"),data.system.characteristics.list.pow=this.getCharacteristic("pow"),data.system.characteristics.list.edu=this.getCharacteristic("edu"),data.system.characteristics.list.luck={},data.system.characteristics.list.luck.value=isNaN(this.luck)?null:this.luck,data.system.characteristics.list.luck.label=game.i18n.localize("CoC7.Luck"),data.system.characteristics.list.luck.shortName=game.i18n.localize("CoC7.Luck"),data.system.characteristics.values||(data.system.characteristics.values={}),data.system.characteristics.values.str=data.system.characteristics.list.str.value,data.system.characteristics.values.con=data.system.characteristics.list.con.value,data.system.characteristics.values.siz=data.system.characteristics.list.siz.value,data.system.characteristics.values.dex=data.system.characteristics.list.dex.value,data.system.characteristics.values.app=data.system.characteristics.list.app.value,data.system.characteristics.values.int=data.system.characteristics.list.int.value,data.system.characteristics.values.pow=data.system.characteristics.list.pow.value,data.system.characteristics.values.edu=data.system.characteristics.list.edu.value,data.system.characteristics.values.luck=data.system.characteristics.list.luck.value,data.system.characteristics.points.enabled?data.system.title=game.i18n.localize("CoC7.SpendPoints"):data.system.title=game.i18n.localize("CoC7.RollCharac"),data.system.pointsWarning=!(null!==data.system.characteristics.values.str&&null!==data.system.characteristics.values.con&&null!==data.system.characteristics.values.siz&&null!==data.system.characteristics.values.dex&&null!==data.system.characteristics.values.app&&null!==data.system.characteristics.values.int&&null!==data.system.characteristics.values.pow&&null!==data.system.characteristics.values.edu);if(!await CharacRollDialog.create(data.system))return;{const updateData={};for(const key of["str","con","siz","dex","app","int","pow","edu"])data.system.characteristics.values[key]&&(updateData[`system.characteristics.${key}.value`]=data.system.characteristics.values[key],updateData[`system.characteristics.${key}.formula`]=data.system.characteristics.rolls[key]);data.system.characteristics.values.luck&&(updateData["system.attribs.lck.value"]=data.system.characteristics.values.luck),data.system.characteristics.values.pow&&(updateData["system.attribs.san.value"]=data.system.characteristics.values.pow,updateData["system.attribs.san.dailyLimit"]=Math.floor(data.system.characteristics.values.pow/5),updateData["system.attribs.mp.max"]=Math.floor(data.system.characteristics.values.pow/5)),await this.update(updateData,{renderSheet:!1}),await this.update({"system.attribs.hp.value":this.rawHpMax,"system.attribs.hp.max":this.rawHpMax},{renderSheet:!1})}}const era=Object.entries(data.flags?.CoC7?.cocidFlag?.eras).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:data.system.items,era:void 0===era[0]||era[0]}),skills=items.filter((it=>"skill"===it.type)),othersItems=items.filter((it=>"skill"!==it.type));if(await this.addUniqueItems(skills),await this.addItems(othersItems),game.settings.get("CoC7","oneBlockBackstory"))await this.update({"system.backstory":data.system.backstory},{renderSheet:!1});else for(const sectionName of data.system.bioSections)!this.system.biography?.find((el=>sectionName===el.title))&&sectionName&&await this.createBioSection(sectionName);const monetary=mergeObject(this.system.monetary,duplicate(data.system.monetary)),sheet=this.sheet;let state=!1;do{state=await new Promise((resolve=>setTimeout((()=>{resolve(sheet._state)}),100)))}while(state===Application.RENDER_STATES.RENDERING);await this.update({"system.monetary":monetary}),Hooks.call("setupFinishedCoC7");break}case"archetype":if("character"===this.type){if(this.archetype){let resetArchetype=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetArchetype"),content:`<p>${game.i18n.format("CoC7.ResetArchetypeHint",{name:this.name})}</p>`,yes:()=>{resetArchetype=!0},defaultYes:!1}),!resetArchetype)return;await this.resetArchetype()}const coreCharac=[];for(const entry of Object.entries(data.system.coreCharacteristics)){const[key,value]=entry;if(data.system.coreCharacteristics[key]=!1,value){const char=this.getCharacteristic(key);char.key=key,coreCharac.push(char)}}let charac;if(coreCharac.length>1){const charDialogData={};charDialogData.characteristics=coreCharac,charDialogData.title=game.i18n.localize("CoC7.SelectCoreCharac"),charac=await CharacSelectDialog.create(charDialogData)}else 1===coreCharac.length&&(charac=coreCharac[0].key);if(!charac)return;if(data.system.coreCharacteristics[charac]=!0,data.system.coreCharacteristicsFormula.enabled){let value=Number(data.system.coreCharacteristicsFormula.value);if(isNaN(value)){const char=this.getCharacteristic(charac),roll=new Roll(data.system.coreCharacteristicsFormula.value);await roll.roll({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:char.label,formula:data.system.coreCharacteristicsFormula.value})}),value=char.value<roll.total?roll.total:char.value}await this.update({[`system.characteristics.${charac}.value`]:value})}data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),await this.addUniqueItems(data.system.skills,"archetype"),processedDataArray.push(duplicate(data)),archetype=!0}break;case"occupation":if("character"===this.type){if(this.occupation){let resetOccupation=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetOccupation"),content:`<p>${game.i18n.format("CoC7.ResetOccupationHint",{name:this.name})}</p>`,yes:()=>{resetOccupation=!0},defaultYes:!1}),!resetOccupation)return;await this.resetOccupation()}if(data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),Number(data.system.creditRating.max)>0){const actorCreditRating=game.system.api.cocid.findCocIdInList("i.skill.credit-rating",data.system.skills);0===actorCreditRating.length?0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&(data.system.skills.push("i.skill.credit-rating"),data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills})):0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&data.system.skills.push(actorCreditRating[0])}const pointsDialogData={};pointsDialogData.characteristics=data.system.occupationSkillPoints;let total=0,optionalChar=!1;for(const entry of Object.entries(data.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);pointsDialogData.characteristics[key].name=char.label,pointsDialogData.characteristics[key].value=char.value,value.selected&&(pointsDialogData.characteristics[key].total=char.value*Number(pointsDialogData.characteristics[key].multiplier),value.optional?optionalChar=!0:total+=pointsDialogData.characteristics[key].total)}if(pointsDialogData.total=total,optionalChar){if(!await PointSelectDialog.create(pointsDialogData))return}for(let index=0;index<data.system.groups.length;index++){data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:data.system.groups[index].skills});const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.groups[index].options),dialogData.title=game.i18n.localize("CoC7.SkillSelectionWindow");for(const value of data.system.groups[index].skills)if(CoC7Item.isAnySpec(value))dialogData.skills.push(value);else{const skill=this.items.find((item=>item.name===value.name&&"skill"===item.type));if(!skill||!skill.system.flags?.occupation){data.system.skills.find((item=>item.name===value.name))||dialogData.skills.push(value)}}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}if(Number(data.system.personal)){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.personal),dialogData.title=game.i18n.format("CoC7.SelectPersonalSkills",{number:Number(data.system.personal)});for(const s of this.skills)if(!s.system.flags.occupation&&!s.system.properties.noadjustments&&!s.system.properties.noxpgain){data.system.skills.find((item=>item.name===s.name))||dialogData.skills.push(s)}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}await this.addUniqueItems(data.system.skills,"occupation"),await(this.creditRatingSkill?.setItemFlag("occupation")),await(this.creditRatingSkill?.update({"system.adjustments.occupation":Number(data.system.creditRating.min)})),processedDataArray.push(duplicate(data)),occupation=!0}break;default:processedDataArray.push(duplicate(data))}if(0===processedDataArray.length)return[];const processed=await super.createEmbeddedDocuments(embeddedName,processedDataArray,options);return archetype&&(await this.update({"system.development.archetype":this.archetypePoints}),Hooks.call("archetypeFinishedCoC7")),occupation&&(await this.update({"system.development.occupation":this.occupationPoints,"system.development.personal":this.personalPoints}),Hooks.call("occupationFinishedCoC7")),processed}getItemIdByName(itemName){let id=null;const name=itemName.match(/\(([^)]+)\)/)?itemName.match(/\(([^)]+)\)/)[1]:itemName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&(id=value.id);return id}getItemsByName(itemName){const itemList=[];for(const value of this.items)value.name===itemName&&itemList.push(value);return itemList}getSkillsByName(skillName){const skillList=[],name=skillName.match(/\(([^)]+)\)/)?skillName.match(/\(([^)]+)\)/)[1]:skillName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()!==name.toLowerCase()&&value.flags?.CoC7?.cocidFlag?.id!==skillName||"skill"!==value.type||skillList.push(value);return skillList}getFirstSkillByCoCID(cocid){return this.items.find((i=>i.flags?.CoC7?.cocidFlag?.id===cocid))}parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actor))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}parseCharacteristics(){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actor))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));return parsed}static getCharacteristicDefinition(){const characteristics=[];for(const[key,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))characteristics.push({key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label)});return characteristics}getCharacteristic(charName){if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))if(game.i18n.localize(value.short).toLowerCase()===charName.toLowerCase()||game.i18n.localize(value.label).toLowerCase()===charName.toLowerCase()||key===charName.toLowerCase())return{key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value};return null}getAttribute(attribName){return["lck","luck",game.i18n.localize("CoC7.Luck").toLowerCase()].includes(attribName.toLowerCase())?{key:"lck",shortName:"luck",label:game.i18n.localize("CoC7.Luck"),value:this.system.attribs.lck.value}:["san",game.i18n.localize("CoC7.SAN").toLowerCase(),game.i18n.localize("CoC7.Sanity").toLowerCase()].includes(attribName.toLowerCase())?{key:"san",shortName:game.i18n.localize("CoC7.SAN"),label:game.i18n.localize("CoC7.Sanity"),value:this.system.attribs.san.value}:null}async runRoll(options={}){void 0===options.cardType&&(options.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL),void 0===options.preventStandby&&(options.preventStandby=!0),options.actor=this;return await CoC7ChatMessage.trigger(options)}get occupation(){return this.items.filter((item=>"occupation"===item.type))[0]}get archetype(){return this.items.filter((item=>"archetype"===item.type))[0]}async resetOccupation(eraseOld=!0){if(eraseOld){const occupationSkill=this.items.filter((item=>item.getItemFlag("occupation")));for(let index=0;index<occupationSkill.length;index++)await occupationSkill[index].unsetItemFlag("occupation")}this.occupation&&await this.occupation.delete(),await this.update({"system.development.occupation":null})}async resetArchetype(eraseOld=!0){if(eraseOld){const archetypeSkill=this.items.filter((item=>item.getItemFlag("archetype")));for(let index=0;index<archetypeSkill.length;index++)await archetypeSkill[index].unsetItemFlag("archetype")}this.archetype&&await this.archetype.delete(),await this.update({"system.development.archetype":null})}get luck(){return parseInt(this.system.attribs?.lck?.value)}async setLuck(value){return await this.update({"system.attribs.lck.value":value})}async spendLuck(amount){return amount=parseInt(amount),this.luck>=amount&&this.setLuck(this.luck-amount)}get hp(){return parseInt(this.system.attribs.hp.value)}get rawHpMax(){return this.system.attribs.hp.auto?null!=this.system.characteristics.siz.value&&null!=this.system.characteristics.con.value?CoCActor.hpFromCharacteristics(this.system.characteristics,this.type):this.system.attribs.hp.max?parseInt(this.system.attribs.hp.max):null:parseInt(this.system.attribs.hp.max)}get hpMax(){return parseInt(this.system.attribs.hp.max)}async _setHp(value){return value<0&&(value=0),value>this.system.attribs.hp.max&&(value=parseInt(this.system.attribs.hp.max)),await this.update({"system.attribs.hp.value":value})}async addUniqueItems(skillList,flag=null){const processed=[];for(let skill of skillList)if(skill=duplicate(skill),flag&&(Object.prototype.hasOwnProperty.call(skill.system,"flags")||(skill.system.flags={}),skill.system.flags[flag]=!0),CoC7Item.isAnySpec(skill))processed.push(skill);else{const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else processed.push(skill)}0!==processed.length&&await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addItems(itemList,flag=null){const processed=[];for(const item of itemList)flag&&(item.system.flags||(item.system.flags={}),item.system.flags[flag]=!0),processed.push(duplicate(item));if(0!==processed.length)return await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addUniqueItem(skill,flag=null){const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.system.flags||(skill.system.flags={}),skill.system.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}get rawMpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?CoCActor.mpFromCharacteristics(this.system.characteristics):0:parseInt(this.system.attribs.mp.max)}getReasonSanLoss(sanReason){return"string"==typeof sanReason?this.system.sanityLossEvents.filter((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()))[0]??{type:"",totalLoss:0,immunity:!1}:{type:"",totalLoss:0,immunity:!1}}sanLostToReason(sanReason){if(sanReason){return this.getReasonSanLoss(sanReason).totalLoss}return 0}sanLossReasonEncountered(sanReason){if(sanReason){return""!==this.getReasonSanLoss(sanReason).type}return!1}setReasonSanLoss(sanReason,sanLoss){if("string"==typeof sanReason&&""!==sanReason){const sanityLossEvents=duplicate(this.system.sanityLossEvents),index=sanityLossEvents.findIndex((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()));return sanLoss>0?-1===index?sanityLossEvents.push({type:sanReason,totalLoss:sanLoss,immunity:!1}):sanityLossEvents[index].totalLoss+=sanLoss:index>-1&&(sanityLossEvents.splice(index,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)}))),this.update({"system.sanityLossEvents":sanityLossEvents})}}maxLossToSanReason(sanReason,sanMaxFormula){const sanMax=new Roll(sanMaxFormula.toString()).evaluate({maximize:!0}).total,sanityLossEvent=this.getReasonSanLoss(sanReason);return sanityLossEvent.immunity?0:Math.max(0,sanMax-sanityLossEvent.totalLoss)}async looseSan(sanReason,sanLoss){return this.getReasonSanLoss(sanReason).immunity?0:(await this.setSan(this.san-sanLoss),this.setReasonSanLoss(sanReason,sanLoss),sanLoss)}sanLoss(checkPassed){return checkPassed?this.sanLossCheckPassed:this.sanLossCheckFailled}get sanLossCheckPassed(){return this.system.special?.sanLoss?.checkPassed}get sanLossCheckFailled(){return this.system.special?.sanLoss?.checkFailled}get sanLossMax(){return this.sanLossCheckFailled?isNaN(Number(this.sanLossCheckFailled))?new Roll(this.sanLossCheckFailled).evaluate({maximize:!0}).total:Number(this.sanLossCheckFailled):0}get sanLossMin(){return this.sanLossCheckPassed?isNaN(Number(this.sanLossCheckPassed))?new Roll(this.sanLossCheckPassed).evaluate({maximize:!0}).total:Number(this.sanLossCheckPassed):0}get dailySanLoss(){return this.system.attribs.san?.dailyLoss||0}get dailySanLimit(){return this.system.attribs.san?.dailyLimit||0}get rawSanMax(){if(this.system.attribs)return this.system.attribs?.san?.auto?this.cthulhuMythos?Math.max(99-this.cthulhuMythos,0):99:parseInt(this.system.attribs.san.max)}get sanMax(){return parseInt(this.system.attribs.san.max)}get mp(){return parseInt(this.system.attribs.mp.value)}get mpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?Math.floor(this.system.characteristics.pow.value/5):0:parseInt(this.system.attribs.mp.max)}async setMp(value){return value<0&&(value=0),value>parseInt(this.system.attribs.mp.max)&&(value=parseInt(this.system.attribs.mp.max)),await this.update({"system.attribs.mp.value":value})}get san(){return parseInt(this.system.attribs.san.value)}get int(){return this.getCharacteristic("int")}get occupationPointsSpent(){let occupationPoints=0;for(const skill of this.skills)skill.system.adjustments?.occupation&&(occupationPoints+=skill.system.adjustments.occupation);return occupationPoints}get occupationPoints(){if(!this.occupation)return 0;let points=0;for(const entry of Object.entries(this.occupation.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);value.selected&&(points+=char.value*Number(value.multiplier))}return points}async resetOccupationPoints(){await this.update({"system.development.occupation":this.occupationPoints})}async resetArchetypePoints(){await this.update({"system.development.archetype":this.occupationPoints})}async resetPersonalPoints(){await this.update({"system.development.personal":this.personalPoints})}get archetypePointsSpent(){let archetypePoints=0;for(const skill of this.skills)skill.system.adjustments?.archetype&&(archetypePoints+=skill.system.adjustments.archetype);return archetypePoints}get archetypePoints(){return this.archetype?this.archetype.system.bonusPoints:0}get experiencePoints(){let experiencePoints=0;for(const skill of this.skills)skill.system.adjustments?.experience&&(experiencePoints+=skill.system.adjustments.experience);return experiencePoints}get personalPointsSpent(){let personalPoints=0;for(const skill of this.skills)skill.system.adjustments?.personal&&(personalPoints+=skill.system.adjustments.personal);return personalPoints}get personalPoints(){return 2*Number(this.system.characteristics.int.value)}get hasDevelopmentPhase(){for(const skill of this.skills)if(skill.system.flags?.developement)return!0;if(this.onlyRunOncePerSession)return!1;for(const sanityLossEvent of this.system.sanityLossEvents)if(!sanityLossEvent.immunity)return!0;return!1}async setSan(value){value<0&&(value=0),value>this.system.attribs.san.max&&(value=this.system.attribs.san.max);const loss=parseInt(this.system.attribs.san.value)-value;if(loss>0){let totalLoss=parseInt(this.system.attribs.san.dailyLoss)?parseInt(this.system.attribs.san.dailyLoss):0;totalLoss+=loss,loss>=5&&await this.setCondition(COC7.status.tempoInsane),totalLoss>=this.system.attribs.san.dailyLimit&&await this.setCondition(COC7.status.indefInsane),await this.update({"system.attribs.san.value":value,"system.attribs.san.dailyLoss":totalLoss})}else await this.update({"system.attribs.san.value":value});return value}async setAttribAuto(value,attrib){const updatedKey=`system.attribs.${attrib}.auto`;return await this.update({[updatedKey]:value})}async toggleAttribAuto(attrib){this.setAttribAuto(!this.system.attribs[attrib].auto,attrib)}static dbFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?"1D4":`${Math.floor((sum-45)/80)}D6`}static buildFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?1:Math.floor((sum-45)/80)+1}static hpFromCharacteristics(characteristics,type){const sum=parseInt(characteristics.siz.value??0,10)+parseInt(characteristics.con.value??0,10),divisor=game.settings.get("CoC7","pulpRuleDoubleMaxHealth")&&"character"===type?5:10;return Math.floor(sum/divisor)}static mpFromCharacteristics(characteristics){return Math.floor(characteristics.pow.value/5)}static movFromCharacteristics(characteristics,type,age){let MOV;return MOV=characteristics.dex.value>characteristics.siz.value&&characteristics.str.value>characteristics.siz.value?9:characteristics.dex.value>=characteristics.siz.value||characteristics.str.value>=characteristics.siz.value?8:7,"creature"===type||game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||isNaN(parseInt(age))||(MOV=parseInt(age)>=40?MOV-Math.floor(parseInt(age)/10)+3:MOV),Math.max(0,MOV)}get rawBuild(){return this.system.attribs&&this.system.attribs.build?("auto"===this.system.attribs.build.value&&(this.system.attribs.build.auto=!0),this.system.attribs.build.auto?CoCActor.buildFromCharacteristics(this.system.characteristics):this.system.attribs.build.value):null}get build(){return this.system.attribs.build.value}get rawDb(){return this.system.attribs&&this.system.attribs.db?("auto"===this.system.attribs.db.value&&(this.system.attribs.db.auto=!0),this.system.attribs.db.auto?CoCActor.dbFromCharacteristics(this.system.characteristics):this.system.attribs.db.value):null}get db(){return this.system.attribs.db.value}get rawMov(){if(!this.system.attribs)return null;if(!this.system.attribs.mov)return null;if("auto"===this.system.attribs.mov.value&&(this.system.attribs.mov.auto=!0),this.system.attribs.mov.auto){const MOV=CoCActor.movFromCharacteristics(this.system.characteristics,this.system.type,this.system.infos.age);if(MOV>0)return MOV}return this.system.attribs.mov.value}get mov(){return this.system.attribs.mov.value}get tokenId(){return this.token?`${this.token.scene._id}.${this.token.id}`:null}get locked(){return this.system.flags||(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),this.update({"system.flags.locked":!1})),this.system.flags.locked}getItemsFromName(name){return this.items.filter((i=>i.name===name))}set locked(value){this.update({"system.flags.locked":value})}async toggleActorFlag(flagName){const flagValue=!this.system.flags[flagName],name=`system.flags.${flagName}`;await this.update({[name]:flagValue})}async attributeCheck(attributeName,fastForward=!1,options={}){const attrib=this.getAttribute(attributeName.toLowerCase());if(!attrib)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{missing:attributeName})),null;const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollAttribute(attrib.key),check.toMessage()}async characteristicCheck(characteristicName,fastForward=!1,options={}){const char=this.getCharacteristic(characteristicName);if(!char)return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:characteristicName,actor:this.name}));const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){options.displayName=char.label;const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollCharacteristic(char.key),check.toMessage()}async skillCheck(skillData,fastForward,options={}){let skill=this.getSkillsByName(skillData.name?skillData.name:skillData);if(!skill.length){let item=null;if(skillData.pack){const pack=game.packs.get(skillData.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(skillData.id)}else skillData.id&&(item=game.items.get(skillData.id));if(!item){const check=new CoC7Check;check._rawValue="?",await check.roll(),check.toMessage()}if(!item)return ui.notifications.warn(game.i18n.format("CoC7.NoSkill")+game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:skillData.name?skillData.name:skillData,actor:this.name}));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:skillData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;if(await this.createEmbeddedDocuments("Item",[duplicate(item)]),skill=this.getSkillsByName(item.name),!skill.length)return;if(game.user.isGM){const skillValue=await SkillValueDialog.create(skill[0].name,skill[0].base),value=Number(skillValue.get("base-value"));await skill[0].updateValue(value)}}const check=new CoC7Check;if(void 0!==options.modifier&&(check.diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,check.skill=skill[0].id,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.roll(),check.toMessage()}async weaponCheck(weaponData,fastForward=!1){let weapon;if(void 0!==weaponData.uuid&&(weapon=await fromUuid(weaponData.uuid)),void 0!==weaponData.id&&(weapon=this.items.get(weaponData.id)),!weapon){let weapons=this.getItemsFromName(weaponData.name);if(0===weapons.length){if(!game.user.isGM)return void ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasNoWeaponNamed",{actorName:this.name,weaponName:weaponData.name}));{let item=null;const pack=weaponData.pack?game.packs.get(weaponData.pack):null;if(pack){if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(weaponData.id)}else weaponData.id&&(item=game.items.get(weaponData.id));if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));let create=!1;await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:weaponData.name,actor:this.name})}</p>`,yes:()=>{create=!0}});const actor=void 0!==this.parent?.actor?this.parent.actor:this;if(!0!==create)return;if(await actor.createEmbeddedDocuments("Item",[item.toJSON()]),weapons=actor.getItemsFromName(item.name),!weapons.length)return;await weapons[0].reload()}}else weapons.length>1&&ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasTooManyWeaponsNamed",{actorName:this.name,weaponName:weaponData.name}));weapon=weapons[0]}if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}}async rollInitiative(hasGun=!1){if("optional"===game.settings.get("CoC7","initiativeRule")){const roll=new CoC7Check(this.actorKey);return roll.denyPush=!0,roll.denyLuck=!0,roll.denyBlindTampering=!0,roll.hideDice=!1===game.settings.get("CoC7","displayInitDices"),roll.flavor="Initiative roll",await roll.rollCharacteristic("dex",hasGun?1:0),roll.toMessage(),roll.successLevel+this.system.characteristics.dex.value/100}return hasGun?this.system.characteristics.dex.value+50:this.system.characteristics.dex.value}getActorFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}async setActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!1})}getWeaponSkills(itemId){let weapon=fromUuidSync(itemId);if(weapon?void 0===weapon.system&&(weapon=game.packs.get(weapon.pack).get(weapon._id)):weapon=this.items.get(itemId),"weapon"!==weapon.type)return null;const skills=[];return weapon.system.skill.main.id&&skills.push(this.items.get(weapon.system.skill.main.id)),weapon.usesAlternativeSkill&&weapon.system.skill.alternativ.id&&skills.push(this.items.get(weapon.system.skill.alternativ.id)),skills}find(name){if(!name)return;const item=this.items.get(name);if(item)return{type:"item",value:item};const matches=/\(([^)]+)\)/.exec(name);let shortName=null;matches&&matches.length&&(shortName=matches[1]);const skill=this.skills.filter((s=>!!s.name&&(s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===shortName?.toLocaleLowerCase().replace(/\s/g,""))));if(skill.length)return{type:"item",value:skill[0]};const charKey=["str","con","siz","dex","app","int","pow","edu"];for(let i=0;i<charKey.length;i++){const char=this.getCharacteristic(charKey[i]);if(char){if(char.name=char.label,char.key?.toLocaleLowerCase()===name.toLowerCase()||char.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.shortName?.toLocaleLowerCase()===name.toLowerCase()||char.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.label?.toLocaleLowerCase()===name.toLowerCase()||char.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char}}}const attribKey=["lck","san"];for(let i=0;i<attribKey.length;i++){const attr=this.getAttribute(attribKey[i]);if(attr){if(attr.name=attr.label,attr.key?.toLocaleLowerCase()===name.toLowerCase()||attr.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.shortName?.toLocaleLowerCase()===name.toLowerCase()||attr.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.label?.toLocaleLowerCase()===name.toLowerCase()||attr.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr}}}}get pilotSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.PilotSpecializationName")?.toLocaleLowerCase()))}get driveSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.DriveSpecializationName")?.toLocaleLowerCase()))}get tokenUuid(){return this.sheet.token?this.sheet.token.uuid:null}get tokenKey(){return this.sheet.token?`${this.sheet.token.parent.id}.${this.sheet.token.id}`:this.id}get actorKey(){return this.prototypeToken.actorLink?this.id:this.tokenKey}static getActorFromKey(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}return game.actors.get(key)||null}async rollCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const r=new Roll(value.formula);await r.roll({async:!0}),r.total&&(characteristics[`system.characteristics.${key}.value`]=Math.floor(r.total))}await this.update(characteristics),await this.reportCharactedriticsValue()}async averageCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const max=new Roll(value.formula).evaluate({maximize:!0}).total,min=new Roll(value.formula).evaluate({minimize:!0}).total,average=Math.floor((max+min)/2),charValue=average%5==0?average:10*Math.round(average/10);charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics),await this.reportCharactedriticsValue()}async reportCharactedriticsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&value.formula.startsWith("@")){let charValue;try{charValue=new Roll(value.formula,this.parseCharacteristics()).evaluate({maximize:!0}).total}catch(err){charValue=null}charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics)}async setCharacteristic(name,value){const characteristic={},charValue=isNaN(parseInt(value))?null:parseInt(value);if(characteristic[name]=charValue,!charValue&&value.startsWith("@")){characteristic[name.replace(".value",".formula")]=value}await this.update(characteristic),await this.reportCharactedriticsValue()}async developementPhase(fastForward=!1){const failure=[],success=[],title=game.i18n.localize("CoC7.RollAll4Dev");let skillsRolled=0,message='<p class="chat-card">';for(const item of this.items)if("skill"===item.type&&item.developementFlag){skillsRolled++;const die=await new Die({faces:100}).evaluate({async:!0}),skillValue=item.value;let augment=null,skillMasteringMessage=null;if(die.total>skillValue||die.total>=95){const augmentDie=await new Die({faces:10}).evaluate({async:!0});if(success.push(item.id),skillValue<90&&skillValue+augmentDie.total>=90){const augmentSANDie=await new Die({faces:6,number:2}).evaluate({async:!0}),sanGained=augmentSANDie.total,sanGainedMessage=`Gained 2d6 (${augmentSANDie.values[0]} + ${augmentSANDie.values[1]} = ${sanGained}) SAN`;console.debug(sanGainedMessage),skillMasteringMessage=`<span class="upgrade-success">${game.i18n.format("CoC7.SanGained",{results:`${augmentSANDie.values[0]} + ${augmentSANDie.values[1]}`,sanGained,skill:item.name,skillValue:skillValue+augmentDie.total})}</span><br>`,await this.setSan(this.san+sanGained)}augment+=augmentDie.total,message+=`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:item.name,die:die.total,score:item.value,augment:augmentDie.total})}</span><br>`,null!==skillMasteringMessage&&(message+=skillMasteringMessage),await item.increaseExperience(augment)}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:item.name,die:die.total,score:item.value})}</span><br>`,failure.push(item.id);await item.unflagForDevelopement()}const sanityLossEvents=[];let changed=!1;for(const sanityLossEvent of this.system.sanityLossEvents)sanityLossEvent.immunity?sanityLossEvents.push(sanityLossEvent):sanityLossEvent.totalLoss>1?(sanityLossEvent.totalLoss--,sanityLossEvents.push(sanityLossEvent),changed=!0):changed=!0;if(changed&&(skillsRolled&&(message+="<br>"),message+=`<span>${game.i18n.format("CoC7.ReduceSanityLimits")}</span>`,await this.update({"system.sanityLossEvents":sanityLossEvents})),!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(skillsRolled?title:"",message,{speaker}),this.onlyRunOncePerSession=!0}return{failure,success}}async developLuck(fastForward=!1){const currentLuck=this.system.attribs.lck.value;currentLuck||await this.update({"system.attribs.lck.value":0});const pulpRuleDevelopmentRollLuck=game.settings.get("CoC7","pulpRuleDevelopmentRollLuck"),upgradeRoll=(await new Roll("1D100").roll({async:!0})).total,higherThanCurrentLuck=upgradeRoll>currentLuck;let augmentRoll;pulpRuleDevelopmentRollLuck?augmentRoll=higherThanCurrentLuck?"2D10+10":"1D10+5":higherThanCurrentLuck&&(augmentRoll="1D10");const title=game.i18n.localize("CoC7.RollLuck4Dev");let message='<p class="chat-card">';if(pulpRuleDevelopmentRollLuck||higherThanCurrentLuck){const augmentValue=(await new Roll(augmentRoll).roll({async:!0})).total;await this.update({"system.attribs.lck.value":this.system.attribs.lck.value+augmentValue}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll,score:currentLuck,augment:augmentValue})}</span>`}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.LuckNotIncreased",{die:upgradeRoll,score:currentLuck})}</span>`;if(!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(title,message,{speaker})}}async developSkill(skillId,fastForward=!1){const skill=this.items.get(skillId);if(!skill)return;let title="",message="";const upgradeRoll=new Roll("1D100");if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>skill.value||upgradeRoll.total>=95){const augmentRoll=new Roll("1D10");await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),message=game.i18n.format("CoC7.DevSuccessDetails",{item:skill.name,augment:augmentRoll.total}),title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),await skill.increaseExperience(augmentRoll.total)}else title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),message=game.i18n.format("CoC7.DevFailureDetails",{item:skill.name});const speaker={actor:this._id};await chatHelper.createMessage(title,message,{speaker}),await skill.unflagForDevelopement()}hasConditionStatus(conditionName){const conditionValue=this.system.conditions?.[conditionName]?.value;return"boolean"==typeof conditionValue&&conditionValue}hasConditionValue(conditionName,field){if(this.hasConditionStatus(conditionName)){if(conditionName===COC7.status.tempoInsane&&"durationText"===field){const realTime=this.hasConditionValue(conditionName,"realTime"),duration=this.hasConditionValue(conditionName,"duration");if(void 0!==duration){if(!0===realTime)return duration+" "+game.i18n.localize("CoC7.rounds");if(!1===realTime)return duration+" "+game.i18n.localize("CoC7.hours")}return""}return this.system.conditions?.[conditionName]?.[field]}}async toggleCondition(conditionName){this.hasConditionStatus(conditionName)?await this.unsetCondition(conditionName):await this.setCondition(conditionName)}async setCondition(conditionName,{forceValue=!1,justThis=!1,realTime=null,duration=null}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>effect.flags.core?.statusId===conditionName)).map((effect=>effect.id)),custom={};switch(conditionName){case COC7.status.dead:custom.flags={core:{overlay:!0}};break;case COC7.status.tempoInsane:custom.flags={CoC7:{realTime:void 0}},custom.duration={rounds:void 0,seconds:void 0},!0!==realTime&&!1!==realTime||(custom.flags.CoC7.realTime=realTime,custom.flags={CoC7:{realTime}},null!=duration&&(realTime?custom.duration.rounds=duration:custom.duration.seconds=3600*duration))}if(0===effects.length){const effect=CONFIG.statusEffects.filter((effect=>effect.id===conditionName));if(1===effect.length){const effectData=mergeObject({label:game.i18n.localize(effect[0].label),icon:effect[0].icon,flags:{core:{statusId:effect[0].id}},disabled:!1},custom);await super.createEmbeddedDocuments("ActiveEffect",[effectData])}else forceValue=!0}else custom._id=effects[0],await super.updateEmbeddedDocuments("ActiveEffect",[custom]),forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons")){switch(conditionName){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.value`]:!0});break;case COC7.status.tempoInsane:{const fields={};fields[`system.conditions.${conditionName}.value`]=!0,!0!==realTime&&!1!==realTime||(fields[`system.conditions.${conditionName}.realTime`]=realTime,null!=duration&&(fields[`system.conditions.${conditionName}.duration`]=duration)),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.realTime`)||(fields[`system.conditions.${conditionName}.-=realTime`]=null),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.duration`)||(fields[`system.conditions.${conditionName}.-=duration`]=null),await this.update(fields)}}if(!justThis)switch(conditionName){case COC7.status.criticalWounds:if(await this.setCondition(COC7.status.prone),!this.hasConditionStatus(COC7.status.unconscious)&&!this.hasConditionStatus(COC7.status.dead)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}break;case COC7.status.dead:await this.unsetCondition(COC7.status.criticalWounds),await this.unsetCondition(COC7.status.dying),await this.unsetCondition(COC7.status.unconscious)}}}async unsetCondition(conditionName,{forceValue=!1}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>effect.flags.core?.statusId===conditionName)).map((effect=>effect.id));effects.length>0?await super.deleteEmbeddedDocuments("ActiveEffect",effects):forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons"))switch(conditionName){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.-=value`]:null}),await this.update({[`system.conditions.${conditionName}.value`]:!1})}}async resetCounter(counter){await this.update({[counter]:0})}async resetDailySanity(){await this.update({"system.attribs.san.dailyLimit":Math.floor(this.system.attribs.san.value/5),"system.attribs.san.dailyLoss":0})}get fightingSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.fighting&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get closeCombatWeapons(){const weaponList=[];for(const value of this.items)if("weapon"===value.type&&!value.system.properties.rngd){const skill=this.items.get(value.system.skill.main.id);value.system.skill.main.value=skill?skill.value:0,weaponList.push(value)}return weaponList.sort(CoC7Utilities.sortByNameKey),weaponList}get firearmSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.firearm&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get user(){return game.users.find((user=>!(!user.character||user.character.id!==this.id)))}get dodgeSkill(){const skill=this.getFirstSkillByCoCID("i.skill.dodge");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge"));return 0!==skillList.length?skillList[0]:null}get creditRatingSkill(){const skill=this.getFirstSkillByCoCID("i.skill.credit-rating");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythosSkill(){const skill=this.getFirstSkillByCoCID("i.skill.cthulhu-mythos");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythos(){const CM=this.cthulhuMythosSkill;if(CM){const value=CM.value;return value||parseInt(CM.system.value)}return 0}get mythosHardened(){return this.getFlag("CoC7","mythosHardened")||!1}async setMythosHardened(){await this.setFlag("CoC7","mythosHardened",!0)}get mythosInsanityExperienced(){return this.getFlag("CoC7","mythosInsanityExperienced")||!1}async experienceFirstMythosInsanity(){await this.setFlag("CoC7","mythosInsanityExperienced",!0)}get creditRating(){const CR=this.creditRatingSkill;if(CR){const value=CR.value;return value||parseInt(CR.system.value)}return 0}static monetaryFormat(format,symbol,value){switch(format){case COC7.monetaryFormatKeys.lsd:return Math.floor(value/240)+"/"+Math.floor(value/12)%20+"/"+value%12;case COC7.monetaryFormatKeys.roman:return Math.floor(value/400)+"/"+Math.floor(value/16)%25+"/"+Math.floor(value/8)%2+"/"+Math.floor(value/4)%2+"/"+value%4;case COC7.monetaryFormatKeys.decimalLeft:return symbol+Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"");case COC7.monetaryFormatKeys.decimalRight:return Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"")+" "+symbol;case COC7.monetaryFormatKeys.integerLeft:return symbol+Number(value).toLocaleString();case COC7.monetaryFormatKeys.integerRight:return Number(value).toLocaleString()+" "+symbol}return"0"}static monetaryValue(format,values,CR,type,value){CR=CR||0;const row=values.find((r=>("object"==typeof r.min||r.min<=CR)&&("object"==typeof r.max||r.max>=CR)));if(void 0!==row&&void 0!==row[type]&&void 0!==row[value])switch(format){case COC7.monetaryFormatKeys.lsd:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 240*CR*row[value];case COC7.monetaryTypeKeys.value:return 240*row[value];case COC7.monetaryTypeKeys.s:return 12*row[value];case COC7.monetaryTypeKeys.d:return 1*row[value]}break;case COC7.monetaryFormatKeys.roman:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 400*CR*row[value];case COC7.monetaryTypeKeys.value:return 400*row[value];case COC7.monetaryTypeKeys.denarii:return 16*row[value];case COC7.monetaryTypeKeys.quinarii:return 8*row[value];case COC7.monetaryTypeKeys.sestertii:return 4*row[value];case COC7.monetaryTypeKeys.asses:return 1*row[value]}break;default:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return CR*row[value];case COC7.monetaryTypeKeys.value:return 1*row[value]}}return 0}get spendingLevel(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"spendingType","spendingValue")}get cash(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"cashType","cashValue")}get assets(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"assetsType","assetsValue")}get skills(){const skillList=[];for(const value of this.items)"skill"===value.type&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get owners(){return game.users.filter((u=>this.testUserPermission(u,"OWNER")&&!u.isGM))}get player(){return this.owners.filter((u=>u.character?.id===this.id))}get characterUser(){return game.users.contents.filter((u=>u.character?.id===this.id))[0]||null}async setHp(value){value<0&&(value=0),value>this.system.attribs.hp.max&&(value=this.system.attribs.hp.max);const healthBefore=this.hp;let damageTaken;return isNaN(healthBefore)||value>=healthBefore?await this._setHp(value):(damageTaken=healthBefore-value,await this.dealDamage(damageTaken,{ignoreArmor:!0})),value}async dealDamage(amount,options={}){const armorData=options.armor?options.armor:this.system.attribs.armor,grossDamage=parseInt(amount);let armorValue=0;options.ignoreArmor||null===armorData||(CoC7Utilities.isFormula(armorData)?armorValue=(await new Roll(armorData).roll({async:!0})).total:isNaN(Number(armorData))?isNaN(Number(armorData?.value))?ui.notifications.warn(game.i18n.format("CoC7.ErrorUnableToParseArmorFormula",{value:armorData})):armorValue=Number(armorData.value):armorValue=Number(armorData));const netDamage=grossDamage-armorValue;if(netDamage<=0)return 0;if(await this._setHp(this.hp-netDamage),netDamage>=this.system.attribs.hp.max)await this.setCondition(COC7.status.dead);else if(game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")){if(0===this.hp)netDamage>=Math.ceil(this.system.attribs.hp.max/2)?this.setCondition(COC7.status.dying):this.setCondition(COC7.status.unconscious);else if(netDamage>=Math.ceil(this.system.attribs.hp.max/2)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}}else{let hasMajorWound=!1;netDamage>=Math.ceil(this.system.attribs.hp.max/2)?(await this.setCondition(COC7.status.criticalWounds),hasMajorWound=!0):hasMajorWound=this.hasConditionStatus(COC7.status.criticalWounds),0===this.hp&&(await this.setCondition(COC7.status.unconscious),hasMajorWound&&this.setCondition(COC7.status.dying))}return netDamage}get majorWound(){return this.hasConditionStatus(COC7.status.criticalWounds)}get dying(){return this.hasConditionStatus(COC7.status.dying)}get unconscious(){return this.hasConditionStatus(COC7.status.unconscious)}get dead(){return this.hasConditionStatus(COC7.status.dead)}get prone(){return this.hasConditionStatus(COC7.status.prone)}}class CoC7Link{static get CHECK_TYPE(){return{CHECK:"check",SANLOSS:"sanloss",ITEM:"item",EFFECT:"effect"}}static get LINK_TYPE(){return{CHARACTERISTIC:"characteristic",ATTRIBUTE:"attribute",SKILL:"skill"}}static init(){CONFIG.CoC7Link={documentClass:CoC7Link}}static bindEventsHandler(html){html.find("a.coc7-link:not(.hascoc7linked)").on("click",(event=>CoC7Link._onLinkClick(event))).on("dragstart",(event=>CoC7Link._onDragCoC7Link(event))).addClass("hascoc7linked")}static _linkFromEvent(event){const a=event.currentTarget,i=a.querySelector("[data-link-icon]"),data=duplicate(a.dataset),oldType=data.type;return data.type="CoC7Link",data.icon=null,oldType&&(data.linkType=oldType),data.object&&("string"==typeof data.object||data.object instanceof String)&&(data.object=JSON.parse(data.object)),i.dataset&&i.dataset.linkIcon&&"fas fa-dice"!==i.dataset.linkIcon&&(data.icon=i.dataset.linkIcon),data.displayName=a.dataset.displayName?a.innerText:null,data.difficulty&&(data.difficulty=CoC7Utilities.convertDifficulty(data.difficulty)),data}static _onDragCoC7Link(event){const data=CoC7Link._linkFromEvent(event);event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}static async fromDropData(data,options={}){const cls=new CoC7Link;cls.object=mergeObject({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.CHECK,linkType:CoC7Link.LINK_TYPE.SKILL,difficulty:CoC7Check.difficultyLevel.regular,modifier:0,object:{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",changes:[]}},data);for(const key of["name","displayName","icon","id","pack","sanMin","sanMax","sanReason"])cls.object[key]=cls.object[key]??"";return void 0!==cls.object.object.icon&&void 0!==cls.object.object.external&&["http","https"].includes(cls.object.object.external)&&(cls.object.object.icon=cls.object.object.external+"://"+cls.object.object.icon),cls.options=options,cls}static _createLink(match){const name=match[4]??void 0,options=match[3]??void 0,type=match[2]??void 0,data={cls:["coc7-link"],dataset:{check:type},icon:null,blind:!1,name};if(type===CoC7Link.CHECK_TYPE.EFFECT)data.effect=JSON.parse(options),data.dataset.object=options,void 0!==data.effect.icon&&void 0!==data.effect.external&&["http","https"].includes(data.effect.external)&&(data.effect.icon=data.effect.external+"://"+data.effect.icon);else{const matches=options.matchAll(/[^,]+/gi);for(const match of Array.from(matches)){let[key,value]=match[0].split(":");"icon"===key&&(data.icon=value),"blind"===key&&void 0===value&&(value=!0,data.blind=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase())),data.dataset[key]=value}void 0!==data.dataset.icon&&void 0!==data.dataset.external&&["http","https"].includes(data.dataset.external)&&(data.dataset.icon=data.dataset.external+"://"+data.dataset.icon,data.icon=data.dataset.icon)}let title;const difficulty=CoC7Check.difficultyString(data.dataset.difficulty);switch(type.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{let humanName=data.dataset.name;["attributes","attribute","attrib","attribs"].includes(data.dataset.type?.toLowerCase())&&("lck"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Luck")),"san"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Sanity"))),["charac","char","characteristic","characteristics"].includes(data.dataset.type?.toLowerCase())&&(humanName=CoC7Utilities.getCharacteristicNames(data.dataset.name)?.label),title=game.i18n.format(`CoC7.LinkCheck${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:humanName});break}case CoC7Link.CHECK_TYPE.SANLOSS:title=game.i18n.format(`CoC7.LinkSanLoss${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,sanMin:data.dataset.sanMin,sanMax:data.dataset.sanMax});break;case CoC7Link.CHECK_TYPE.ITEM:title=game.i18n.format(`CoC7.LinkItem${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:data.dataset.name});break;case CoC7Link.CHECK_TYPE.EFFECT:title=data.effect.label}name?data.dataset.displayName=!0:data.name=title;const a=document.createElement("a");a.title=game.user.isGM?data.name:title,a.classList.add(...data.cls);for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.draggable=!0,data.icon=data.icon??data.effect?.icon??"fas fa-dice",(data.icon.includes("\\")||data.icon.includes("."))&&(data.img=data.icon),data.blind&&(a.innerHTML+='<i class="fas fa-eye-slash"></i>'),data.img?a.innerHTML+=`<img data-link-icon="${data.icon}" src="${data.img}">`:a.innerHTML+=`<i data-link-icon="${data.icon}" class="link-icon ${data.icon}"></i>`,a.innerHTML+=`<span>${data.name}</span>`,a}_createDocumentLink(eventData,{relativeTo,label}={}){if(!eventData.check)return"";switch(eventData.check.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{if(!eventData.linkType||!eventData.name)return"";let options=`${eventData.blind?"blind,":""}type:${eventData.linkType},name:${eventData.name}`;if(void 0!==eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),void 0!==eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.check[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.SANLOSS:{if(!eventData.sanMax||!eventData.sanMin)return"";let options=`${eventData.blind?"blind,":""}sanMax:${eventData.sanMax},sanMin:${eventData.sanMin}`;if(eventData.sanReason&&(options+=`,sanReason:${eventData.sanReason}`),eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}let link=`@coc7.sanloss[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.ITEM:{if(!eventData.name)return"";let options=`${eventData.blind?"blind,":""}name:${eventData.name}`;if(eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.item[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.EFFECT:{const parts=eventData.object.icon.match(/^(https?):\/\/(.+)$/);parts&&(eventData.object.external=parts[1],eventData.object.icon=parts[2]);let link=`@coc7.effect[${JSON.stringify(eventData.object)}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}}return"?"}static async _onLinkActorClick(actor,options,{shiftKey=!1}={}){switch(options.check){case CoC7Link.CHECK_TYPE.CHECK:if(["charac","char","characteristic","characteristics"].includes(options.linkType.toLowerCase()))return actor.characteristicCheck(options.name,shiftKey,options);if(["skill"].includes(options.linkType.toLowerCase()))return actor.skillCheck(options,shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.linkType.toLowerCase()))return actor.attributeCheck(options.name,shiftKey,options);break;case CoC7Link.CHECK_TYPE.SANLOSS:return void SanCheckCard.create(actor.actorKey,options,{fastForward:shiftKey});case CoC7Link.CHECK_TYPE.ITEM:return actor.weaponCheck(options,shiftKey);case CoC7Link.CHECK_TYPE.EFFECT:await actor.createEmbeddedDocuments("ActiveEffect",[{label:options.object.label,icon:options.object.icon,changes:options.object.changes}])}}static toChatMessage(options){const option={speaker:{alias:game.user.name}};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}),chatHelper.createMessage(null,message,option)}static toWhisperMessage(options,actors){for(const actor of actors){const option={speaker:{alias:game.user.name},whisper:actor.owners.map((a=>a.id))};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageTargetCheckRequested",{name:actor.name,check:link}),chatHelper.createMessage(null,message,option)}}static async _onLinkClick(event){const options=CoC7Link._linkFromEvent(event);if(game.user.isGM){if(isCtrlKey(event))return void CoC7ContentLinkDialog.create(options);if(canvas.tokens.controlled.length){for(const token of canvas.tokens.controlled)CoC7Link._onLinkActorClick(token.actor,options,{shiftKey:event.shiftKey});return}const speaker=ChatMessage.getSpeaker(),actor=ChatMessage.getSpeakerActor(speaker);return actor?void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey}):void CoC7Link.toChatMessage(options)}{const speaker=ChatMessage.getSpeaker();let actor=ChatMessage.getSpeakerActor(speaker);if(!actor){const actors=game.actors.filter((a=>(a.ownership[game.user.id]??a.ownership.default)>=CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER));1===actors.length&&(actor=actors[0])}if(actor)return void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey})}ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor"))}setValue(key,value){this.object[key]=value}get link(){return this._createDocumentLink(this.object)}get id(){return this.object.id}get pack(){return this.object.pack}get checkType(){return this.object.check}get difficulty(){return this.object.difficulty}get icon(){return this.object.icon}get displayName(){return this.object.displayName}get modifier(){return this.object.modifier}get linkType(){return this.object.linkType}get sanMin(){return this.object.sanMin}get sanMax(){return this.object.sanMax}get sanReason(){return this.object.sanReason}get effect(){return this.object.object}get checkName(){if(this.isCharacteristicCheck){const characteristics=CoCActor.getCharacteristicDefinition();return characteristics.find((c=>c.key===this.object.name||c.shortName===this.object.name||c.label===this.object.name))?.key??""}return this.object.name}get isCheck(){return this.object.check===CoC7Link.CHECK_TYPE.CHECK}get isCharacteristicCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.CHARACTERISTIC}get isAttributeCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.ATTRIBUTE}get isSkillCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.SKILL}get isItemCheck(){return this.object.check===CoC7Link.CHECK_TYPE.ITEM}get isSanLossCheck(){return this.object.check===CoC7Link.CHECK_TYPE.SANLOSS}get isEffect(){return this.object.check===CoC7Link.CHECK_TYPE.EFFECT}get isBlind(){return this.isCheck&&this.object.blind}}class CoC7Parser{static enrichHTML(content){const html=document.createElement("div");html.innerHTML=String(content);let text=[];text=TextEditor._getTextNodes(html);const rgx=new RegExp("@(coc7)\\.(check|effect|item|sanloss)\\[([^\\[\\]]*(?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\])*[^\\[\\]]*\\])*[^\\[\\]]*)\\](?:{([^}]+)})?","gi");return TextEditor._replaceTextContent(text,rgx,CoC7Link._createLink),html.innerHTML}static ParseSheetContent(app,html){for(const element of html.find("div.editor-content > *, p"))element.outerHTML.toLocaleLowerCase().includes("@coc7")&&(element.outerHTML=CoC7Parser.enrichHTML(element.outerHTML));CoC7Link.bindEventsHandler(html)}static ParseMessage(app,html,data){if(app.isContentVisible){if(data.message.content.toLocaleLowerCase().includes("@coc7")){const parsedContent=CoC7Parser.enrichHTML(data.message.content);html.find(".message-content").html(parsedContent),data.message.content=parsedContent}return!0}}}class CoC7Item extends Item{constructor(data,context){if(data.type in CONFIG.Item.documentClasses&&!context?.extended)return new CONFIG.Item.documentClasses[data.type](data,{extended:!0,...context});void 0===data.img&&("skill"===data.type?data.img="systems/CoC7/assets/icons/skills.svg":"status"===data.type?data.img="icons/svg/aura.svg":"weapon"===data.type&&(data.img="icons/svg/sword.svg")),super(data,context)}async _createDocumentLink(eventData,{relativeTo,label}={}){if("string"==typeof eventData.type&&"string"==typeof eventData.uuid&&"Item"===eventData.type&&eventData.uuid.match(/^Actor\./)&&relativeTo instanceof CONFIG.JournalEntryPage.documentClass){const item=await fromUuid(eventData.uuid);if(["skill","weapon"].includes(item.type))return"@coc7.check[type:"+item.type+",name:"+item.name+"]"}return super._createDocumentLink(eventData,{relativeTo,label})}static get iconLanguage(){return"systems/CoC7/assets/icons/skills/language.svg"}static get flags(){return{malfunction:"malfc"}}async toggleProperty(propertyId,override=!1){let fighting,firearms,checkedProps={};if(void 0!==COC7.eras[propertyId])return CoCIDEditor.eraToggle(this,propertyId);if("weapon"!==this.type||override){if("skill"===this.type&&!override){let modif=!1;if("combat"===propertyId&&(this.system.properties.combat?checkedProps={"system.properties.combat":!1,"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.specialization":"",name:this.system.skillName}:this.system.properties.firearm?firearms=!0:fighting=!0,modif=!0),"fighting"===propertyId&&(this.system.properties.fighting?(firearms=!0,fighting=!1):(firearms=!1,fighting=!0),modif=!0),"firearm"===propertyId&&(this.system.properties.firearm?(firearms=!1,fighting=!0):(firearms=!0,fighting=!1),modif=!0),modif){if(fighting){checkedProps={"system.properties.fighting":!0,"system.properties.firearm":!1,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.fightingSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}if(firearms){checkedProps={"system.properties.fighting":!1,"system.properties.firearm":!0,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.firearmSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}}}}else if("ahdb"===propertyId&&(checkedProps=this.system.properties.ahdb?{"system.properties.ahdb":!1}:{"system.properties.ahdb":!0,"system.properties.addb":!1}),"addb"===propertyId&&(checkedProps=this.system.properties.addb?{"system.properties.addb":!1}:{"system.properties.addb":!0,"system.properties.ahdb":!1}),"shotgun"===propertyId&&(checkedProps=this.system.properties.shotgun?{"system.properties.shotgun":!1,"system.range.extreme.value":null,"system.range.extreme.damage":null,"system.range.long.value":null,"system.range.long.damage":null}:{"system.properties.rngd":!0,"system.properties.melee":!1,"system.properties.shotgun":!0}),"melee"===propertyId||"rngd"===propertyId){let meleeWeapon;"melee"!==propertyId||this.system.properties.melee||(meleeWeapon=!0),"melee"===propertyId&&this.system.properties.melee&&(meleeWeapon=!1),"rngd"!==propertyId||this.system.properties.rngd||(meleeWeapon=!1),"rngd"===propertyId&&this.system.properties.rngd&&(meleeWeapon=!0),checkedProps=meleeWeapon?{"system.properties.melee":!0,"system.properties.rngd":!1,"system.properties.shotgun":!1,"system.properties.brst":!1,"system.properties.auto":!1,"system.properties.dbrl":!1}:{"system.properties.melee":!1,"system.properties.rngd":!0}}if("special"===propertyId&&(checkedProps=this.system.properties[propertyId]?{"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.combat":!1,"system.specialization":"",name:this.system.skillName}:{"system.properties.special":!0,name:this.system.specialization+" ("+this.system.skillName+")"}),Object.keys(checkedProps).length>0){return await this.update(checkedProps)}{const propName=`system.properties.${propertyId}`,propValue=!this.system.properties[propertyId];await this.update({[propName]:propValue}).then((item=>item))}}hasProperty(propertyId){return this.isIncludedInSet("properties",propertyId)}get shortName(){return this.system.properties.special?this.system.skillName:this.name}async updateRoll(roll){return"updateRoll"in this.sheet?await this.sheet.updateRoll(roll):"updateRoll"in this?await this.updateRoll(roll):void 0}static getNamePartsSpec(skillName,specialization){if(!specialization)return{name:skillName,specialization:"",skillName};const specNameRegex=new RegExp("^("+CoC7Utilities.quoteRegExp(specialization)+")\\s*\\((.+)\\)$","i"),match=skillName.match(specNameRegex);return match&&(specialization=match[1],skillName=match[2]),{name:specialization+" ("+skillName+")",specialization,skillName}}static getNameWithoutSpec(item){if(item instanceof CoC7Item){if(item.system?.properties?.special&&void 0!==item.system.skillName)return item.system.skillName}else if(item.properties?.special&&void 0!==item.skillName)return item.skillName;return item.name}static isAnySpec(item){return!("skill"!==item.type||!item.system.properties?.special)&&(!(!item.system.properties?.requiresname&&!item.system.properties?.picknameonly)||[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CONFIG.Item.documentClasses.skill.guessNameParts(item.name).skillName.toLowerCase()))}async checkSkillProperties(){if("skill"!==this.type)return;const checkedProps={};return this.system.properties.combat?(this.system.properties.special||(this.system.properties.special=!0,checkedProps["system.properties.special"]=!0),this.system.properties.fighting||this.system.properties.firearm||(this.system.properties.fighting=!0,checkedProps["system.properties.fighting"]=!0),!this.system.properties.fighting||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.fightingSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.fightingSpecializationName)),!this.system.properties.firearm||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.firearmSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.firearmSpecializationName))):(this.system.properties.fighting&&(this.system.properties.fighting=!1,checkedProps["system.properties.fighting"]=!1),this.system.properties.firearm&&(this.system.properties.firearm=!1,checkedProps["system.properties.firearm"]=!1)),Object.keys(checkedProps).length>0&&await this.update(checkedProps),checkedProps}isIncludedInSet(set,propertyId){this.system[set]||(this.system[set]=[]);return this.system[set].indexOf(propertyId)>-1}async flagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!0}))}async unflagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!1}))}get developementFlag(){return this.getItemFlag("developement")}async toggleItemFlag(flagName,eraseAdjustment=!0){const flagValue=!this.getItemFlag(flagName),name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||flagValue||!eraseAdjustment?"developement"===flagName?game.settings.get("CoC7","xpEnabled")||game.user.isGM?await this.update({[name]:flagValue}):ui.notifications.info(game.i18n.localize("CoC7.SkillXpGainDisabled")):await this.update({[name]:flagValue}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:flagValue})}async setItemFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetItemFlag(flagName,eraseAdjustment=!0){const name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||!eraseAdjustment?await this.update({[name]:!1}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:!1})}getItemFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}get usesAlternativeSkill(){return"weapon"===this.type&&(!0===this.system.properties?.auto||!0===this.system.properties?.brst||!0===this.system.properties?.thrown)}get maxUsesPerRound(){if("weapon"!==this.type)return null;const multiShot=parseInt(this.system.usesPerRound.max);return isNaN(multiShot)?0:multiShot}get usesPerRound(){if("weapon"!==this.type)return null;const singleShot=parseInt(this.system.usesPerRound.normal);return isNaN(singleShot)?0:singleShot}get usesPerRoundString(){let usesPerRound;return usesPerRound=this.system.usesPerRound.normal?this.system.usesPerRound.normal:"1",this.system.usesPerRound.max&&(usesPerRound+=`(${this.system.usesPerRound.max})`),this.system.properties.auto&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponAuto")}`),this.system.properties.brst&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponBrst")}`,this.system.usesPerRound.burst&&(usesPerRound+=`(${this.system.usesPerRound.burst})`)),usesPerRound}get multipleShots(){return"weapon"!==this.type?null:!(this.maxUsesPerRound<=1)}get singleShot(){return"weapon"!==this.type?null:!!this.usesPerRound}get baseRange(){return parseInt(this.system.range.normal.value)}get longRange(){return parseInt(this.system.range.long.value)}get extremeRange(){return parseInt(this.system.range.extreme.value)}get skillProperties(){if("skill"!==this.type)return[];const skillProperties=[];for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&skillProperties.push(game.i18n.localize(value));return skillProperties}static async calculateBase(actor,data){if("skill"!==data.type)return null;if(String(data.system.base).includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.actor.")&&(parsed[key.substring(1)]=getProperty(actor,value.substring(11)));let value;try{value=Math.floor(new Roll(data.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return value}return isNaN(parseInt(data.system.base))?null:parseInt(data.system.base)}get _base(){if("skill"!==this.type)return[null,!1];if("string"!=typeof this.system.base)return[this.system.base,!1];if(this.system.base.includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));let value;try{value=Math.floor(new Roll(this.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return[value,!0]}return[isNaN(parseInt(this.system.base))?null:parseInt(this.system.base),!1]}async asyncBase(){const e=this._base;return e[1]&&(console.info(`[COC7] (${this.parent?.name}) Evaluating skill ${this.name}:${this.system.base} to ${e[0]}`),await this.update({"system.base":e[0]})),e[0]}get base(){const e=this._base;return e[1]&&this.update({"system.base":e[0]}),e[0]}getBulletLeft(){return"weapon"!==this.type?null:this.system.ammo?this.system.ammo:(this.setBullets(0),0)}async reload(){if("weapon"!==this.type)return null;const maxBullet=this.system.bullets?parseInt(this.system.bullets):1;await this.setBullets(maxBullet)}async setBullets(bullets){if("weapon"!==this.type)return null;await this.update({"system.ammo":bullets||0})}async addBullet(){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft(),maxBullets=this.system.bullets?parseInt(this.system.bullets):1;bullets+1>=maxBullets?await this.setBullets(maxBullets):await this.setBullets(bullets+1)}async shootBullets(x){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft();x>bullets?await this.setBullets(0):await this.setBullets(bullets-x)}static mergeOptionalSkills(skillList,options){return skillList.concat(options).reduce(((newArray,item)=>!CoC7Item.isAnySpec(item)&&newArray.find((skill=>skill.name===item.name))?newArray:[...newArray,item]),[]).sort(CoC7Utilities.sortByNameKey)}static _getChatCardActor(card){const tokenKey=card.dataset.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}const actorId=card.dataset.actorId;return game.actors.get(actorId)||null}getChatData(htmlOptions={}){htmlOptions.async=!1;const data=duplicate(this.system);"string"==typeof data.description&&(data.description={value:data.description,special:""}),void 0===data.description.value&&(data.description.value=""),void 0===data.description.special&&(data.description.special="");const labels=[];data.description.value=TextEditor.enrichHTML(data.description.value,htmlOptions),data.description.value=CoC7Parser.enrichHTML(data.description.value),data.description.special=TextEditor.enrichHTML(data.description.special,htmlOptions),data.description.special=CoC7Parser.enrichHTML(data.description.special);const props=[],fn=this[`_${this.type}ChatData`];if(fn&&fn.bind(this)(data,labels,props,htmlOptions),"skill"===this.type)for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&props.push(value);return data.properties=props.filter((p=>!!p)),data.labels=labels,data}_weaponChatData(data,labels,props){for(const[key,value]of Object.entries(COC7.weaponProperties))!0===this.system.properties[key]&&props.push(value);let skillLabel=game.i18n.localize("CoC7.Skill"),skillName="",found=!1;if(this.system.skill.main.id){const skill=this.actor?.items.get(this.system.skill.main.id);skill&&(skillName+=CoC7Item.getNameWithoutSpec(skill),found=!0)}if(this.usesAlternativeSkill&&this.system.skill.alternativ.id){skillLabel=game.i18n.localize("CoC7.Skills");const skill=this.actor?.items.get(this.system.skill.alternativ.id);skill&&(skillName+=`/${CoC7Item.getNameWithoutSpec(skill)}`,found=!0)}found||(skillName=this.system.skill.main.name,this.usesAlternativeSkill&&this.system.skill.alternativ.name&&(skillName+=`/${this.system.skill.alternativ.name}`)),skillName&&labels.push({name:skillLabel,value:skillName}),labels.push({name:game.i18n.localize("CoC7.WeaponUsesPerRound"),value:this.usesPerRoundString}),labels.push({name:game.i18n.localize("CoC7.WeaponMalfunction"),value:this.system.malfunction?this.system.malfunction:"-"}),this.system.bullets&&labels.push({name:game.i18n.localize("CoC7.WeaponBulletsInMag"),value:this.system.bullets})}canBePushed(){return!("skill"!==this.type||!this.system.properties.push)}get impale(){return this.system.properties.impl}get isDodge(){return"skill"===this.type&&this.name.toLowerCase()===game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge").toLowerCase()}}class CoC7Check{constructor(actor=null,skill=null,item=null,diceMod=0,difficulty=null,flatThresholdModifier=0,flatDiceModifier=0){if(this.actor=actor,this.skill=skill,this.item=item,this.difficulty=difficulty,this.diceModifier=diceMod,this.rawValue=0,this.successLevel=null,this.referenceMessageId=null,this.pushing=!1,this.flatDiceModifier=flatDiceModifier,this.flatThresholdModifier=flatThresholdModifier,null===difficulty){const isUnknown="unknown"===game.settings.get("CoC7","defaultCheckDifficulty");this.difficulty=isUnknown?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular}}static get cardType(){return"rollCard"}static get difficultyLevel(){return{unknown:-1,regular:1,hard:2,extreme:3,critical:4,impossible:9}}static get successLevel(){return{fumble:-99,failure:0,regular:1,hard:2,extreme:3,critical:4}}static get type(){return{characteristic:"characteristic",attribute:"attribute",skill:"item",item:"item",value:"value"}}static difficultyString(difficultyLevel){switch(isNaN(Number(difficultyLevel))?difficultyLevel:Number(difficultyLevel)){case"?":return game.i18n.localize("CoC7.UnknownDifficulty");case"+":return game.i18n.localize("CoC7.HardDifficulty");case"++":return game.i18n.localize("CoC7.ExtremeDifficulty");case"+++":return game.i18n.localize("CoC7.CriticalDifficulty");case 0:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.localize("CoC7.UnknownDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.localize("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.extreme:return game.i18n.localize("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.localize("CoC7.CriticalDifficulty");default:return null}}get rawValue(){if(this._rawValue||(this.characteristic&&(this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.rawValue=this.skill.value),this.attribute&&(this.rawValue=this.actor.system.attribs[this.attribute].value)),this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this._rawValue+this.flatThresholdModifier<1?1:this._rawValue+this.flatThresholdModifier:this._rawValue}set rawValue(x){this._rawValue=x}set uuid(x){this._uuid=x}get uuid(){return this._uuid||(this._uuid=foundry.utils.randomID(16)),this._uuid}get hasCard(){return ui.chat.collection.filter((message=>this.uuid===message.getFlag("CoC7","uuid")&&CoC7Check.cardType===message.getFlag("CoC7","type"))).length>0}get rawValueString(){if(this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this.flatThresholdModifier<0?this._rawValue.toString()+this.flatThresholdModifier.toString():this._rawValue.toString()+"+"+this.flatThresholdModifier.toString():this._rawValue.toString()}get criticalThreshold(){return 1}get regularThreshold(){return this.rawValue?this.rawValue>=100?99:parseInt(this.rawValue):null}get hardThreshold(){return this.rawValue?Math.floor(this.rawValue/2):null}get extremeThreshold(){return this.rawValue?Math.floor(this.rawValue/5):null}get fumbleThreshold(){if(this.rawValue){if(this.difficulty){if(this.difficulty>=CoC7Check.difficultyLevel.extreme)return this.extremeThreshold<50?96:100;if(this.difficulty>=CoC7Check.difficultyLevel.hard)return this.hardThreshold<50?96:100}return this.rawValue<50?96:100}return null}get succesThreshold(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return this.extremeThreshold;case CoC7Check.difficultyLevel.hard:return this.hardThreshold;case CoC7Check.difficultyLevel.regular:return this.regularThreshold;case CoC7Check.difficultyLevel.critical:return this.criticalThreshold;case CoC7Check.difficultyLevel.unknown:return-1;default:return this.rawValue}return null}get difficultyString(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return game.i18n.format("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.format("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.format("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.format("CoC7.CriticalDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.format("CoC7.UnknownDifficulty");default:return""}return""}get modifiedResult(){if(!this.standby){if(void 0!==this._modifiedResult)return this._modifiedResult;if(this.flatDiceModifier){const modified=this.dices.total+this.flatDiceModifier;return modified<1?1:modified>100?100:modified}return this.dices.total}}set modifiedResult(x){this._modifiedResult=x}get flatDiceModifierString(){return this.flatDiceModifier?this.flatDiceModifier>0?`+${this.flatDiceModifier}`:this.flatDiceModifier.toString():null}get isFumble(){if(!this.standby&&!this.isSimpleRoll)return this.modifiedResult>=this.fumbleThreshold}get isCritical(){if(!this.standby)return 1===this.modifiedResult}get isExtremeSuccess(){if(!this.standby)return this.successLevel>=CoC7Check.successLevel.extreme}get passed(){if(!this.standby&&!this.isSimpleRoll)return this.luckSpent?this.difficulty<=this.successLevel:this.succesThreshold>=this.modifiedResult||this.isCritical}get failed(){if(!this.standby&&!this.isSimpleRoll)return!this.passed}get isSimpleRoll(){return void 0===this.rawValue}get hasBonus(){return!!(this.diceModifier&&this.diceModifier>0)}get hasPenalty(){return!!(this.diceModifier&&this.diceModifier<0)}get hasModifier(){return!(!this.diceModifier||0===this.diceModifier)}get diceModifier(){return this._diceModifier?this._diceModifier:null}set diceModifier(x){this._diceModifier=parseInt(x)}get name(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.label;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.Sanity")}}return null}get shortName(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.short;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.SAN")}}return null}get fullName(){const difficulty=this._difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(this._difficulty),modifier=this._diceModifier>0?`+${this._diceModifier}`:this._diceModifier.toString();return game.i18n.format(`CoC7.LinkCheck${difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier,name:this.name})}get rolled(){return!!this.dice}static getFromCard(card){const rollResult=card.classList.contains("roll-result")?card:card.querySelector(".roll-result"),check=new CoC7Check;CoC7Roll.getFromElement(rollResult,check);const message=card.closest(".message");return check.messageId=message?message.dataset.messageId:null,check}static async push(card,publish=!0){const oldCheck=CoC7Check.getFromCard(card),actorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId,skillId=card.dataset.skillId,charac=card.dataset.characteristic,itemId=card.dataset.itemId,diceMod=card.dataset.diceMod,difficulty=card.dataset.difficulty;let pushedRoll;if(skillId)pushedRoll=new CoC7Check(actorId,skillId,itemId,diceMod,difficulty);else{if(!charac)return;pushedRoll=new CoC7Check,pushedRoll.diceModifier=diceMod,pushedRoll.difficulty=difficulty,pushedRoll.actor=actorId,pushedRoll.characteristic=charac}oldCheck.uuid&&(pushedRoll.context=oldCheck.context,pushedRoll.uuid=oldCheck.uuid),oldCheck.parent&&(pushedRoll.parent=oldCheck.parent),pushedRoll.pushing=!0,await pushedRoll.roll(),publish&&pushedRoll.toMessage(!0,card)}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}set actor(x){if(this.actorKey=x,null!=x){if(x instanceof Actor)return this._actor=x,this._actor.alias=this.actor.name,void(x.token&&x.token.scene&&x.token.scene.id?this.actorKey=`${x.token.scene.id}.${x.token.id}`:this.actorKey=x.id);if(x.includes(".")){const[sceneId,tokenId]=x.split(".");if("TOKEN"===sceneId)this._actor=game.actors.tokens[tokenId],this._actor.alias=this._actor.name;else{const scene=game.scenes.get(sceneId);if(!scene)return;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return;const token=new Token(tokenData);this._actor=token.actor,this._actor.alias=token.name}}else this._actor=game.actors.get(x),this.actor.alias=this.actor.name}else this._actor=x}get successLevelIcons(){if(this.unknownDifficulty)return null;if(this.isSimpleRoll)return null;if(this.successLevel>=this.difficulty){const icons=[];for(let index=0;index<this.successLevel-this.difficulty+1;index++)icons.push(this.isCritical?"medal":"star");const successHint=game.i18n.format("CoC7.SuccesLevelHint",{value:this.successLevel-this.difficulty+1});return{success:!0,cssClass:this.isCritical?"critical":"success",hint:successHint,icons}}{const icons=[],successLevel=this.isFumble?-1:this.successLevel;for(let index=0;index<this.difficulty-successLevel;index++)icons.push(this.isFumble?"skull":"spider");const failureHint=game.i18n.format("CoC7.FailureLevelHint",{value:this.difficulty-successLevel});return{success:!1,cssClass:this.isFumble?"fumble":"failure",hint:failureHint,icons}}}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get unknownDifficulty(){return!(this.gmDifficultyCritical||this.gmDifficultyExtreme||this.gmDifficultyHard||this.gmDifficultyRegular)&&CoC7Check.difficultyLevel.unknown===this.difficulty}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}set skill(x){this._skill=this._getItemFromId(x),this.skillId=x}set item(x){this._item=this._getItemFromId(x),"weapon"===this._item?.type?this.itemId=x:(this._item=void 0,this.itemId=void 0)}_getItemFromId(x){return null==x?null:x instanceof Item?x:this._actor?this._actor.items.get(x):game.items.get(x)}get actor(){if(this._actor&&this._actor?.id){if("Object"===this._actor.constructor.name){const actor=new CoCActor(this._actor);this._actor=actor}}else if(this.actorKey&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this.actorId&&(this._actor=chatHelper.getActorFromKey(this.actorId)),!this._actor)return{isDummy:!0,name:this.actorName?this.actorName:void 0,id:void 0,img:"systems/CoC7/assets/icons/question-circle-regular.svg",portrait:"systems/CoC7/assets/icons/question-circle-regular.svg"};return this._actor}get skill(){return!this._skill&&this.skillId&&(this._skill=this.actor?.items.get(this.skillId)),!this._skill&&this.item&&this.item.system.skill&&(this.item.system.skill.main.id&&!this.weaponAltSkill?this._skill=this._actor.items.get(this.item.system.skill.main.id):this.item.system.skill.alternativ.id&&this.weaponAltSkill&&(this._skill=this._actor.items.get(this.item.system.skill.alternativ.id))),this._skill}get item(){return!this._item&&this.itemId&&this.actor&&(this._item=this.actor.items.get(this.itemId)),this._item}get displayResultType(){return game.settings.get("CoC7","displayResultType")}get displayCheckSuccessLevel(){return game.settings.get("CoC7","displayCheckSuccessLevel")}get displayBothSuccessLevel(){return this.displayResultType&&this.displayCheckSuccessLevel}get dontDisplaySuccessLevel(){return!this.displayResultType&&!this.displayCheckSuccessLevel}get image(){return this.skill?this.skill.img:this.item?this.item.img:void 0}get link(){return this.getLinkElement().outerHTML}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}getLinkElement(classes=null){const data={cls:["coc7-link","coc7-roll"].concat(classes),dataset:{check:"check"},icon:this.image?`<div style="background-image: url(${this.image})"></div>`:'<i class="fas fa-dice"></i>',blind:this.isBlind},difficulty=CoC7Check.difficultyString(this._difficulty),title=game.i18n.format(`CoC7.LinkCheck${this._difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier:this._diceModifier,name:this.name}),a=document.createElement("a");return a.title=title,a.classList.add(...data.cls),a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}${data.icon}${this.name}`,a}async roll(diceMod=null,difficulty=null,options={}){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.standby||await this._perform(options)}static createFromActorRollData(rollData){const roll={};switch(rollData.difficulty&&(roll.difficulty=rollData.difficulty),rollData.diceModifier&&(roll.diceModifier=rollData.diceModifier),!0===rollData.denyPush&&(roll.denyPush=!0),rollData.flatDiceModifier&&(roll.flatDiceModifier=rollData.flatDiceModifier),rollData.flatThresholdModifier&&(roll.flatThresholdModifier=rollData.flatThresholdModifier),rollData.actor?.actorKey?roll.actorKey=rollData.actor.actorKey:rollData.actor?.name&&(roll.actorName=rollData.actor.name),rollData.type){case CoC7Check.type.characteristic:roll.characteristic=rollData.value?.key;break;case CoC7Check.type.attribute:roll.attribute=rollData.value?.key;break;case CoC7Check.type.item:roll.actorKey=rollData.value.actor.actorKey,"skill"===rollData.value?.type?roll.skill=rollData.value.id:roll.item=rollData.value.id;break;case CoC7Check.type.skill:roll.actorKey=rollData.value.actor.actorKey,roll.skill=rollData.value.id;break;case CoC7Check.type.value:roll.displayName=rollData.value.name,roll.rawValue=rollData.value.threshold}return CoC7Check.create(roll)}static create({difficulty=CoC7Check.difficultyLevel.regular,diceModifier=null,actorKey=null,characteristic=null,attribute=null,rawValue=0,item=null,skill=null,flatDiceModifier=0,flatThresholdModifier=0,displayName=null,actorName=null,denyPush}={}){const check=new CoC7Check;return check.difficulty=difficulty,!0===denyPush&&(check.denyPush=!0),diceModifier&&(check.diceModifier=diceModifier),flatDiceModifier&&(check.flatDiceModifier=flatDiceModifier),flatThresholdModifier&&(check.flatThresholdModifier=flatThresholdModifier),displayName&&(check.displayName=displayName),actorKey&&(check.actor=actorKey),actorName&&(check.actorName=actorName),isNaN(Number(rawValue))||(check.rawValue=Number(rawValue)),check.actor&&!check.actor.isDummy&&(skill?check.skill=skill:characteristic?check.characteristic=characteristic:attribute?check.attribute=attribute:item&&(check.item=item)),check}async rollCharacteristic(char,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.characteristic=char,this.standby||await this._perform()}async rollAttribute(attrib,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.attribute=attrib,this.standby||await this._perform()}async rollValue(val,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.rawValue=val,this.standby||await this._perform()}get rolledSuccessLevel(){return this.successLevel}async _perform(options={}){this.dice=options.roll||await CoC7Dice.roll(this.diceModifier,this.rollMode,this.isBlind),options.silent||game.modules.get("dice-so-nice")?.active||AudioHelper.play({src:CONFIG.sounds.dice},!0),options.forceDSN&&await CoC7Dice.showRollDice3d(this.dice.roll),this.dices={tens:[],unit:{value:this.dice.unit.total},total:this.dice.total,tenResult:this.dice.total-this.dice.unit.total,hasBonus:!!this.diceModifier,bonus:Math.abs(this.diceModifier),bonusType:this.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus"),difficulty:this.difficulty};const max=0===this.dice.unit.total?100:90,min=0===this.dice.unit.total?10:0;let selected=this.dice.total-this.dice.unit.total;for(let i=0;i<this.dice.tens.results.length;i++){const die={};die.value=this.dice.tens.results[i],die.value===selected?(selected=101,die.selected=!0,this.dices.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck()}async computeCheck(){switch(this.isUnknown=this.unknownDifficulty,this.gmDifficultyRegular&&(this.difficulty=CoC7Check.difficultyLevel.regular),this.gmDifficultyHard&&(this.difficulty=CoC7Check.difficultyLevel.hard),this.gmDifficultyExtreme&&(this.difficulty=CoC7Check.difficultyLevel.extreme),this.gmDifficultyCritical&&(this.difficulty=CoC7Check.difficultyLevel.critical),this.tenOnlyOneDie=1===this.dices.tens.length,this.isValue=!1,this.isCharactiristic=!1,this.isSkill=!1,this.isItem=!1,this.isAttribute=!1,this.isSimpleRoll?(this.denyPush=!0,this.denyLuck=!0):null==this.actor?this.isValue=!0:(this.characteristic&&(this.isCharactiristic=!0,this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.isSkill=!0,this.rawValue=this.skill.value),this.attribute&&(this.isAttribute=!0,this.rawValue=this.actor.system.attribs[this.attribute].value)),this.luckSpent||this.isSimpleRoll||(this.modifiedResult<=this.rawValue&&(this.successLevel=CoC7Check.successLevel.regular),this.modifiedResult<=this.hardThreshold&&(this.successLevel=CoC7Check.successLevel.hard),this.modifiedResult<=this.extremeThreshold&&(this.successLevel=CoC7Check.successLevel.extreme),this.modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.fumbleThreshold<=this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.fumble)),this.successLevel){case CoC7Check.successLevel.regular:this.resultType=game.i18n.format("CoC7.RegularSuccess");break;case CoC7Check.successLevel.hard:this.resultType=game.i18n.format("CoC7.HardSuccess");break;case CoC7Check.successLevel.extreme:this.resultType=game.i18n.format("CoC7.ExtremeSuccess");break;case CoC7Check.successLevel.critical:this.resultType=game.i18n.format("CoC7.CriticalSuccess");break;case CoC7Check.successLevel.fumble:this.resultType=game.i18n.format("CoC7.Fumble");break;case CoC7Check.successLevel.failure:this.resultType=game.i18n.format("CoC7.Failure")}if(this.unknownDifficulty?this.successRequired="":this.isSimpleRoll||(this.successRequired=game.i18n.format("CoC7.SuccessRequired",{successRequired:this.difficultyString})),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.luckSpent||this.isUnknown||this.isSimpleRoll||(this.isFailure=this.failed,this.isSuccess=this.passed),this.hasMalfunction=!1,this.isFumble&&(this.successLevel=CoC7Check.successLevel.fumble),this.item&&(this.isItem=!0,this.item.system.malfunction&&Number(this.modifiedResult)>=Number(this.item.system.malfunction)&&(this.hasMalfunction=!0,this.malfunctionTxt=game.i18n.format("CoC7.Malfunction",{itemName:this.item.name}),await this.item.toggleItemFlag(CoC7Item.flags.malfunction))),void 0===this.canBePushed&&(this.canBePushed=!!this.skill&&this.skill.canBePushed(),null!=this.characteristic&&(this.canBePushed=!0),this.isFumble&&(this.canBePushed=!1),this.denyPush&&(this.canBePushed=!1)),!this.denyLuck&&this.actor){if(!(this.luckSpent||this.passed||this.isFumble||this.difficulty===CoC7Check.difficultyLevel.critical||this.unknownDifficulty)&&(this.skill||this.characteristic)){const luckNeeded=this.modifiedResult-this.succesThreshold;this.actor.luck>luckNeeded&&(this.hasEnoughLuck=!0,this.luckNeeded=luckNeeded,this.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:luckNeeded}))}if(!this.luckSpent&&(this.increaseSuccess=[],!this.pushing&&"lck"!==this.attribute&&"san"!==this.attribute)){if(this.unknownDifficulty&&this.modifiedResult>this.regularThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.RegularDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.regular,nextLevel.luckToSpend=this.modifiedResult-this.regularThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.regular&&this.modifiedResult>this.hardThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.HardDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.hard,nextLevel.luckToSpend=this.modifiedResult-this.hardThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.hard&&this.modifiedResult>this.extremeThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.ExtremeDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.extreme,nextLevel.luckToSpend=this.modifiedResult-this.extremeThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}}this.canIncreaseSuccess=this.increaseSuccess.length>0,this.isFumble&&(this.canIncreaseSuccess=!1)}if(this.canAwardExperience=this.skill&&!this.skill.system.properties.noxpgain,!(this.passed&&this.diceModifier<=0&&this.skill)||this.skill.system.properties.noxpgain||this.luckSpent||this.forced||this.isBlind||this.isUnknown||this.flagForDevelopement(),this.parent){const parent=await fromUuid(this.parent);parent&&"updateRoll"in parent&&await parent.updateRoll(this.JSONRollString)}}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}get cssClass(){let cssClass="";return this.isSuccess&&(cssClass="success"),this.isFailure&&(cssClass="failure"),this.isCritical&&!this.isFailure&&(cssClass="success critical"),this.isFumble&&!this.isSuccess&&(cssClass="failure fumble"),CoC7Check.successLevel.regular===this.successLevel&&(cssClass+=" regular-success"),CoC7Check.successLevel.hard===this.successLevel&&(cssClass+=" hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&(cssClass+=" extreme-success"),cssClass}get cssClassList(){const cssClass=[];return this.isSuccess&&cssClass.push("success"),this.isFailure&&cssClass.push("failure"),this.isCritical&&!this.isFailure&&cssClass.push("success","critical"),this.isFumble&&!this.isSuccess&&cssClass.push("failure","fumble"),CoC7Check.successLevel.regular===this.successLevel&&cssClass.push("regular-success"),CoC7Check.successLevel.hard===this.successLevel&&cssClass.push("hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&cssClass.push("extreme-success"),cssClass}get playerCssClass(){return this.isSuccess||this.forcedSuccess?"success":this.isFailure||this.forcedFailure?"failure":null}async upgradeCheck(upgradeindex,update=!0){const increasedSuccess=this.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount)||parseInt(increasedSuccess.luckToSpend);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:this.actor.name}));this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel)||parseInt(increasedSuccess.difficulty);this.successLevel=newSuccessLevel,this.difficulty<=newSuccessLevel&&(this.isSuccess=!0,this.isFailure=!1);for(let index=0;index<upgradeindex+1;index++)this.increaseSuccess.shift();for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;return this.luckSpent=!0,this.computeCheck(),update?await this.updateChatCard():void 0}removeUpgrades(){this.canIncreaseSuccess=!1,this.increaseSuccess=[],this.luckNeeded=0,this.luckNeededTxt=null,this.canBePushed=!1}forcePass(luckAmount=null,update=!0){if(luckAmount){this.actor.spendLuck(luckAmount),this.successLevel=this.difficulty;for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;this.luckSpent=!0,this.isSuccess=!0,this.isFailure=!1,this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount),this.computeCheck(),update&&this.updateChatCard()}else this.forced=!0,this.forcedSuccess=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.regular,update):this.forceSuccessLevel(this.difficulty,update)}forceFail(update=!0){this.forced=!0,this.forcedFailure=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.failure,update):this.forceSuccessLevel(this.difficulty-1,update)}_forceCheck(high,low,update=!0){let total=Math.floor(Math.random()*(high-low))+low+1;const unitTotal=total%10;let tenTotal=Math.floor(total/10);const tens=[];let hasEnough=Math.abs(this.diceModifier)===tens.length;for(;!hasEnough;){let ten=Math.floor(10*Math.random()),roll=10*ten+unitTotal;0===roll&&(roll=100,ten=100),this.hasPenalty&&roll<=high&&(tens.push(ten),roll>total&&(total=roll)),this.hasBonus&&roll>low&&(tens.push(ten),roll<total&&(total=roll)),hasEnough=tens.length===Math.abs(this.diceModifier)}10===tenTotal&&0===unitTotal&&(tenTotal=100),tens.splice(Math.floor(Math.random()*tens.length+1),0,10===tenTotal?0:tenTotal),this.dices.tens=[],this.dices.unit.value=unitTotal,this.modifiedResult=total,this.dices.total=total,this.dices.tenResult=total-unitTotal;const max=0===unitTotal?100:90,min=0===unitTotal?10:0;let selected=total-unitTotal;for(let i=0;i<tens.length;i++){const die={};die.value=tens[i],die.value===selected?(selected=101,die.selected=!0,this.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck(),update&&this.updateChatCard()}forceSuccessLevel(successLevel,update=!0){let high,low;CoC7Check.successLevel.fumble===successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.failure===successLevel&&(high=this.regularThreshold===this.fumbleThreshold-1?100:this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.regular===successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.hard===successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.extreme===successLevel&&(high=this.extremeThreshold,low=1),CoC7Check.successLevel.critical===successLevel&&(high=1,low=0),high===low&&low--,0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}increaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.fumble===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold===this.fumbleThreshold-1?this.hardThreshold:this.regularThreshold),CoC7Check.successLevel.failure===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.regular===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.extremeThreshold,low=this.criticalThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.criticalThreshold,low=0),high===low&&low--,this._forceCheck(high,low,update)}decreaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.failure===this.successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.regular===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.critical===this.successLevel&&(high=this.extremeThreshold,low=1),0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}async flagForDevelopement(){this.flaggedForDevelopment=!0,this.skill&&await this.skill.flagForDevelopement()}set difficulty(x){this._difficulty=parseInt(x)}get difficulty(){return this._difficulty}set flavor(x){this._flavor=x}set context(x){this._context=x}get context(){if(this._context)return this._context}set parent(x){this.uuid||(this.uuid=foundry.utils.randomID(16)),this.parentUuid=x}get parent(){if(this.parentUuid)return this.parentUuid}get flavor(){if(this._flavor)return this._flavor;let flavor="";return this.actor?.system&&(this.skill?flavor=game.i18n.format("CoC7.CheckResult",{name:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.item?flavor=game.i18n.format("CoC7.ItemCheckResult",{item:this.item.name,skill:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.characteristic?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(this.actor.system.characteristics[this.characteristic].label),value:this.rawValueString,difficulty:this.difficultyString}):this.attribute?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`),value:this.rawValueString,difficulty:this.difficultyString}):this.displayName&&(flavor=game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}))),flavor||this.rawValue&&(flavor=this.displayName?game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}):game.i18n.format("CoC7.CheckRawValue",{rawvalue:this.rawValue,difficulty:this.difficultyString})),this.pushing&&(flavor=`${game.i18n.format("CoC7.Pushing")} ${flavor}`),flavor}get tooltipHeader(){return this.attribute?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`)})+` (${this.actor.system.attribs[this.attribute].value}%)`:this.characteristic?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.localize(this.actor.system.characteristics[this.characteristic].label)})+` (${this.actor.system.characteristics[this.characteristic].value}%)`:this.skill?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.skill.name})+` (${this.skill.value}%)`:this.displayName?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.displayName})+` (${this.rawValueString}%)`:null}async getHtmlRollElement(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;const html=await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this);return html?$.parseHTML(html)[0]:null}async getHtmlRoll(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;return await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this)||void 0}async toMessage(pushing=!1){this.pushing=pushing;const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this),speakerData={};let speaker;this.actor?(this.actor.isToken?speakerData.token=this.token.document:this.actor.isDummy?this.actor.name&&(speaker={alias:this.actor.name}):speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor?.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:html,flags:{CoC7:{type:CoC7Check.cardType}}};if(this.uuid&&(chatData.flags.CoC7.uuid=this.uuid),this.context&&(chatData.flags.CoC7.context=this.context),"selfroll"===this.rollMode)if(game.user.isGM){if(chatData.user=game.user.id,chatData.flavor=`[${this.actor.name}] ${chatData.flavor}`,chatData.flags={CoC7:{GMSelfRoll:!0}},void 0!==chatData.speaker&&(chatData.flags.CoC7.originalSpeaker=duplicate(chatData.speaker)),game.user.isGM)switch(game.settings.get("CoC7","selfRollWhisperTarget")){case"owners":delete chatData.speaker,chatData.whisper=this.actor.owners,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;case"everyone":delete chatData.speaker,chatData.whisper=game.users.players,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;default:ChatMessage.applyRollMode(chatData,this.rollMode)}}else ChatMessage.applyRollMode(chatData,this.rollMode);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),this.dice?.roll&&!this.dice?.hideDice&&(chatData.roll=this.dice.roll,chatData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,chatData.rollMode=this.isBlind?"blindroll":this.rollMode),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({makePublic=!1,forceRoll=!1}={}){makePublic&&(this.rollMode=!1);const chatData={flavor:this.flavor};makePublic&&(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData)),chatData.blind&&(this.isBlind=!0);const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this);let newContent=html;if(!this.messageId)return $.parseHTML(html)[0];const message=game.messages.get(this.messageId),htmlMessage=$.parseHTML(message.content)[0];if(!htmlMessage.classList.contains("roll-result")){const htmlCheck=$.parseHTML(html)[0],rollResultElement=htmlMessage.querySelector(".roll-result");null!==rollResultElement&&rollResultElement.replaceWith(htmlCheck),newContent=htmlMessage.outerHTML}chatData.content=newContent,CONST.CHAT_MESSAGE_TYPES.ROLL===message.type&&(message.whisper?.length?chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER:chatData.type=CONST.CHAT_MESSAGE_TYPES.OTHER),forceRoll&&this.dice?.roll&&(game.user.isGM||!this.isBlind)&&await CoC7Dice.showRollDice3d(this.dice.roll);const msg=await message.update(chatData);return await ui.chat.updateMessage(msg,!1),msg}static async updateCardSwitch(event){const card=event.currentTarget.closest(".chat-card"),check=await CoC7Check.getFromCard(card);check.gmDifficultyRegular=!1,check.gmDifficultyHard=!1,check.gmDifficultyExtreme=!1,check.gmDifficultyCritical=!1,"gmDifficultyRegular"===event.currentTarget.dataset.flag&&(check.gmDifficultyRegular=!0),"gmDifficultyHard"===event.currentTarget.dataset.flag&&(check.gmDifficultyHard=!0),"gmDifficultyExtreme"===event.currentTarget.dataset.flag&&(check.gmDifficultyExtreme=!0),"gmDifficultyCritical"===event.currentTarget.dataset.flag&&(check.gmDifficultyCritical=!0),check.computeCheck(),check.updateChatCard()}get tooltip(){return renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",this)}get inlineCheck(){const a=document.createElement("a");return a.classList.add("coc7-inline-check"),a.classList.add("coc7-check-result"),a.classList.add("coc7-inline"),a.classList.add(...this.cssClassList),a.title=this.tooltipHeader,a.dataset.roll=escape(this.JSONRollString),a.innerHTML=`<i class="game-icon game-icon-d10"></i> ${this.modifiedResult||"??"}`,a}get rollToolTip(){if(this.standby)return;const parts=[],tens=this.dices.tens.map((r=>({result:r.value,selected:r.selected,classes:["die","d10",r.selected?null:"discarded",r.isMin?"min":null,r.isMax?"max":null].filter((c=>c)).join(" ")}))),unit=[{result:this.dices.unit.value,selected:!0,classes:"die d10"}];return parts.push({formula:this.tooltipHeader,total:this.modifiedResult,icons:this.successLevelIcons,class:this.cssClass,successRequired:this.successRequired,resultType:this.resultType,face:10,rolls:[...tens,...unit]}),renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",{parts})}get JSONRollData(){return JSON.parse(this.JSONRollString)}get JSONRollString(){return JSON.stringify(this,((key,value)=>{if(null===value)return;return["_actor","_skill","_item"].includes(key)?void 0:value}))}static fromData(data){return Object.assign(new CoC7Check,data)}static fromRollString(dataString){let data;try{data=JSON.parse(unescape(dataString))}catch(err){return ui.notifications.error(err.message),null}return CoC7Check.fromData(data)}static async alter(check,command,options={}){switch(command){case"useLuck":if(options.target.classList.contains("pass-check")){const luckAmount=parseInt(options.target.dataset.luckAmount);check.forcePass(luckAmount,options.update)}else{const upgradeIndex=parseInt(options.target.dataset.index);await check.upgradeCheck(upgradeIndex,options.update)}break;case"force-pass":check.forcePass(null,options.update);break;case"force-fail":check.forceFail(options.update);break;case"increase-success-level":check.increaseSuccessLevel(options.update);break;case"decrease-success-level":check.decreaseSuccessLevel(options.update);break;case"reveal-check":check.isBlind=!1,check.rollMode=!1,check.computeCheck(),options.update&&check.updateChatCard();break;case"flag-for-development":await check.flagForDevelopement(),check.computeCheck(),options.update&&check.updateChatCard();break;case"push":await check._perform(),check.pushing=!0,options.update&&check.updateChatCard()}}static async _onClickInlineRoll(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("coc7-check-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _collapseInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(!a.classList.contains("expanded"))return;const tooltip=a.querySelector(".coc7-check-tooltip");return tooltip&&tooltip.remove(),a.classList.remove("expanded")}static async _expandInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(a.classList.contains("expanded"))return;const check=Object.assign(new CoC7Check,JSON.parse(unescape(a.dataset.roll)));if(check.standby)return;const tip=document.createElement("div");tip.innerHTML=await check.rollToolTip;const tooltip=tip.children[0];a.appendChild(tooltip),a.classList.add("expanded");const pa=a.getBoundingClientRect(),pt=tooltip.getBoundingClientRect();tooltip.style.left=`${Math.min(pa.x,window.innerWidth-(pt.width+3))}px`,tooltip.style.top=`${Math.min(pa.y+pa.height+3,window.innerHeight-(pt.height+3))}px`;const zi=getComputedStyle(a).zIndex;tooltip.style.zIndex=Number.isNumeric(zi)?zi+1:100}}class CoC7Utilities{static isFormula(x){return"string"==typeof x&&(!!isNaN(Number(x))&&Roll.validate(x))}static ParseChatEntry(html,content){const terms=content.match(/(\S+)/g);if(terms[0]?.toLowerCase().match(/^\/r(oll)?$/)&&terms[1]?.toLowerCase().startsWith("1d%"))return setTimeout((function(){CoC7Utilities._ExecCommand(content)}),200),!1}static async _ExecCommand(content){const options=content.toLowerCase().split(" ")?.join("")?.replace(/\/r(oll)?1d%/,""),check=new CoC7Check;if(options.length){let threshold,flatDiceModifier,flatThresholdModifier,escaped=options,difficulty=CoC7Check.difficultyLevel.regular,diceModifier=0,ask=!1;const thresholdStr=escaped.match(/[^(]+(?=\))/);if(thresholdStr&&thresholdStr.length){threshold=Number(thresholdStr[0]);for(const match of thresholdStr)escaped=escaped.replace(`(${match})`,"")}const difficultyStr=escaped.match(/[^[]+(?=\])/);if(difficultyStr&&difficultyStr.length){difficulty=CoC7Utilities.convertDifficulty(difficultyStr[0]);for(const match of difficultyStr)escaped=escaped.replace(`[${match}]`,"")}if(escaped.includes("?")&&(ask=!0,escaped=escaped.replace("?","")),isNaN(Number(escaped))||(diceModifier=Number(escaped)),ask){const dialogOptions={threshold,modifier:diceModifier,difficulty,askValue:!0},usage=await RollDialog.create(dialogOptions);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold"))||threshold,flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,threshold&&(check.rawValue=isNaN(threshold)?void 0:threshold)}const speaker=ChatMessage.getSpeaker();if(speaker.token&&speaker.scene){const actor=chatHelper.getActorFromKey(`${speaker.scene}.${speaker.token}`);actor&&(check.actor=actor)}else if(speaker.actor){const actor=game.actors.get(speaker.actor);actor&&(check.actor=actor)}await check.roll(),check.toMessage()}static async test(){ui.notifications.infos("Do some stuff")}static getActorFromString(actorString){let actor;return game.actors.tokens[actorString]?game.actors.tokens[actorString]:(actor=game.actors.get(actorString),actor||(actor=Object.values(game.actors.tokens).find((t=>t.name.toLowerCase()===actorString.toLowerCase())),actor||(actor=game.actors.find((a=>a.name.toLowerCase()===actorString.toLowerCase()))),actor||null))}static getCharacteristicNames(char){const charKey=char.toLowerCase();switch(charKey){case"str":return{short:game.i18n.localize("CHARAC.STR"),label:game.i18n.localize("CHARAC.Strength")};case"con":return{short:game.i18n.localize("CHARAC.CON"),label:game.i18n.localize("CHARAC.Constitution")};case"siz":return{short:game.i18n.localize("CHARAC.SIZ"),label:game.i18n.localize("CHARAC.Size")};case"dex":return{short:game.i18n.localize("CHARAC.DEX"),label:game.i18n.localize("CHARAC.Dexterity")};case"app":return{short:game.i18n.localize("CHARAC.APP"),label:game.i18n.localize("CHARAC.Appearance")};case"int":return{short:game.i18n.localize("CHARAC.INT"),label:game.i18n.localize("CHARAC.Intelligence")};case"pow":return{short:game.i18n.localize("CHARAC.POW"),label:game.i18n.localize("CHARAC.Power")};case"edu":return{short:game.i18n.localize("CHARAC.EDU"),label:game.i18n.localize("CHARAC.Education")};case"luck":return{short:game.i18n.localize("CoC7.Luck"),label:game.i18n.localize("CoC7.Luck")};default:for(const[,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))if(charKey===game.i18n.localize(value.short).toLowerCase())return{short:game.i18n.localize(value.short),label:game.i18n.localize(value.label)};return null}}static convertDifficulty(difficulty){if("0"===String(difficulty))return CoC7Check.difficultyLevel.regular;if("string"!=typeof difficulty)return difficulty;if(!isNaN(Number(difficulty)))return Number(difficulty);switch(difficulty){case"?":return CoC7Check.difficultyLevel.unknown;case"+":return CoC7Check.difficultyLevel.hard;case"++":return CoC7Check.difficultyLevel.extreme;case"+++":return CoC7Check.difficultyLevel.critical;default:return CoC7Check.difficultyLevel.regular}}static skillCheckMacro(skill,event,options={}){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;speaker.token&&(actor=game.actors.tokens[speaker.token]),actor||(actor=game.actors.get(speaker.actor)),actor?actor.skillCheck(skill,event.shiftKey,options):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static weaponCheckMacro(weapon,event){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;if(speaker.token&&(actor=game.actors.tokens[speaker.token]),!actor)if(speaker.scene&&speaker.token){const baseActor=game.actors.get(speaker.actor),token=game.scenes.get(speaker.scene).tokens.get(speaker.token);actor=new(getDocumentClass("Actor"))(baseActor.toJSON(),{parent:token})}else actor=game.actors.get(speaker.actor);actor?actor.weaponCheck(weapon,event.shiftKey):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static async checkMacro(threshold=void 0,event=null){await CoC7Utilities.rollDice(event,{threshold})}static createMacro(bar,data,slot){if("Item"!==data.type)return;const item=fromUuidSync(data.uuid,bar);if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));if("weapon"!==item.type&&"skill"!==item.type)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroIncorrectType"));let command="";if("weapon"===item.type&&(command=`game.CoC7.macros.weaponCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`),"skill"===item.type){if(CoC7Item.isAnySpec(item))return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoGlobalSpec"));command=`game.CoC7.macros.skillCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`}if(""!==command){const macro=game.macros.contents.find((m=>m.name===item.name&&m.command===command));return macro?(game.user.assignHotbarMacro(macro,slot),!1):(Macro.create(duplicate({name:item.name,type:"script",img:item.img,command})).then((macro=>{game.user.assignHotbarMacro(macro,slot)})),!1)}return!0}static async toggleDevPhase(toggle){await game.settings.set("CoC7","developmentEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async toggleCharCreation(toggle){await game.settings.set("CoC7","charCreationEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets(),Hooks.call("toggleCharCreation",toggle)}static async getTarget(){const users=game.users.filter((user=>user.active)),actors=game.actors;let checkOptions=`<input type="checkbox" name="COCCheckAllPC" id="COCCheckAllPC">\n\n    <label for="COCCheckAllPC">${game.i18n.localize("CoC7.allActors")}</label>`;const playerTokenIds=users.map((u=>u.character?.id)).filter((id=>void 0!==id)),selectedPlayerIds=canvas.tokens.controlled.map((token=>token.actor.id));actors.forEach((actor=>{const checked=(selectedPlayerIds.includes(actor.id)||playerTokenIds.includes(actor.id))&&"checked";checkOptions+=`\n     <br>\n     <input type="checkbox" name="${actor.id}" id="${actor.id}" value="${actor.name}" ${checked}>\n\n     <label for="${actor.id}">${actor.name}</label>\n       `})),new Dialog({title:`${game.i18n.localize("CoC7.dreaming")}`,content:`${game.i18n.localize("CoC7.restTargets")}: ${checkOptions} <br>`,buttons:{whisper:{label:`${game.i18n.localize("CoC7.startRest")}`,callback:async html=>{const targets=[];let all=!1;const users=html.find('[type="checkbox"]');for(const user of users)"COCCheckAllPC"===user.name&&user.checked&&(all=!0),(user.checked||all)&&targets.push(user.id);await CoC7Utilities.startRest(targets)}}}}).render(!0)}static async startRest(targets){if(!targets.length)return;const actors=game.actors.filter((actor=>targets.includes(actor.id)));let chatContent=`<i>${game.i18n.localize("CoC7.dreaming")}...</i><br>`;for(const actor of actors)if(["character","npc","creature"].includes(actor.type)){let quickHealer=!1;for(const item of actor.items)"talent"===item.type&&item.name===`${game.i18n.localize("CoC7.quickHealer")}`&&(quickHealer=!0);const isCriticalWounds=!game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")&&actor.hasConditionStatus(COC7.status.criticalWounds),dailySanityLoss=actor.system.attribs.san.dailyLoss,hpValue=actor.system.attribs.hp.value,hpMax=actor.system.attribs.hp.max,mpValue=actor.system.attribs.mp.value,mpMax=actor.system.attribs.mp.max,pow=actor.system.characteristics.pow.value;if(chatContent+=`<br><b>${actor.name}. </b>`,hpValue<hpMax)if(!0===isCriticalWounds)chatContent+=`<b style="color:darkred">${game.i18n.localize("CoC7.hasCriticalWounds")}. </b>`;else{let healAmount=1;game.settings.get("CoC7","pulpRuleFasterRecovery")&&(healAmount=2),!0===quickHealer&&healAmount++,healAmount=Math.min(healAmount,hpMax-hpValue),chatContent+=1===healAmount?`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.healthRecovered")}. </b>`:`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:healAmount})}. </b>`,actor.update({"system.attribs.hp.value":actor.system.attribs.hp.value+healAmount})}dailySanityLoss>0&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.dailySanLossRestarted")}.</b>`,actor.update({"system.attribs.san.dailyLoss":0,"system.attribs.san.dailyLimit":Math.floor(actor.system.attribs.san.value/5)}));const hours=7;if(hours>0&&mpValue<mpMax){let magicAmount=hours*Math.ceil(pow/100);magicAmount=Math.min(magicAmount,mpMax-mpValue),chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.magicPointsRecovered")}: ${magicAmount}.</b>`,actor.update({"system.attribs.mp.value":actor.system.attribs.mp.value+magicAmount})}}const chatData={user:game.user.id,speaker:ChatMessage.getSpeaker(),content:chatContent,type:CONST.CHAT_MESSAGE_TYPES.OTHER};ChatMessage.create(chatData)}static async toggleXPGain(toggle){await game.settings.set("CoC7","xpEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled"))}static async rollDice(event,options={}){let diceModifier,difficulty,flatDiceModifier,flatThresholdModifier;options.askValue=!options.threshold;let threshold=options.threshold;if(void 0!==options.modifier&&(diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!event?.shiftKey&&!options.fastForward){const usage=await RollDialog.create(options);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const actors=[];if(game.user.isGM&&canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)actors.push(token.actor.tokenKey);else game.user.character&&actors.push(game.user.character.tokenKey);for(const tk of actors){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tk,await check.roll(),check.toMessage()}if(!actors.length){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,await check.roll(),check.toMessage()}}static updateCharSheets(){if(game.user.isGM)for(const a of game.actors.contents)"character"===a?.type&&a?.sheet&&a?.sheet?.rendered&&(a.update({"system.flags.locked":!0}),a.render(!1));else for(const a of game.actors.contents)a.isOwner&&(a.update({"system.flags.locked":!0}),a.render(!1))}static async getDataFromDropEvent(event,entityType="Item"){if(event.originalEvent)return[];try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if("Folder"===dataList.type&&dataList.documentName===entityType){const folder=await fromUuid(dataList.uuid);return folder?folder.contents:[]}if(dataList.type===entityType){const item=await fromUuid(dataList.uuid);return item?[item]:[]}return[]}catch(err){return[]}}static async copyToClipboard(text){try{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(text);{const textArea=document.createElement("textarea");return textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999px",textArea.style.top="-999px",document.body.appendChild(textArea),textArea.focus(),textArea.select(),new Promise(((resolve,reject)=>{document.execCommand("copy")?resolve():reject(new Error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))),textArea.remove()})).catch((err=>ui.notifications.error(err)))}}catch(err){ui.notifications.error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))}}static quoteRegExp(string){const len=string.length;let qString="";for(let current,i=0;i<len;++i)if(current=string.charAt(i),current>=" "&&current<="~")"\\"!==current&&"'"!==current||(qString+="\\"),qString+=current.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");else switch(current){case"\b":qString+="\\b";break;case"\f":qString+="\\f";break;case"\n":qString+="\\n";break;case"\r":qString+="\\r";break;case"\t":qString+="\\t";break;case"\v":qString+="\\v";break;default:qString+="\\u",current=current.charCodeAt(0).toString(16);for(let j=4;--j>=current.length;qString+="0");qString+=current}return qString}static setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}static getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}static SfromUuid(uuid){let doc,parts=uuid.split(".");if("Compendium"===parts[0])return null;{const[docName,docId]=parts.slice(0,2);parts=parts.slice(2);doc=CONFIG[docName].collection.instance.get(docId)}for(;doc&&parts.length>1;){const[embeddedName,embeddedId]=parts.slice(0,2);doc=doc.getEmbeddedDocument(embeddedName,embeddedId),parts=parts.slice(2)}return doc||null}static isDocumentUuidPack(uuid){return!!uuid.includes("Compendium")}static isDocumentUuid(uuid){const identifiers=["Actor","Scene","Token","Item","Compendium"];for(let i=0;i<identifiers.length;i++)if(uuid.includes(identifiers[i]))return!0;return!1}static getActorDocumentFromDropData(dropData){let docUuid,actor;return docUuid=dropData.tokenUuid?dropData.tokenUuid:void 0!==dropData.uuid?dropData.uuid:dropData.sceneId&&dropData.tokenId?`Scene.${dropData.sceneId}.Token.${dropData.tokenId}`:dropData.actorId||dropData.actorKey||dropData.id,"Token"===dropData.type?docUuid=dropData.uuid:docUuid&&(actor=CoC7Utilities.getActorFromKey(docUuid),actor||"Item"!==dropData.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid),docUuid}static getDocumentFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=duplicate(scene)),token}return game.actors.get(key)||null}static getActorFromKey(key){const doc=CoC7Utilities.getDocumentFromKey(key);return doc?doc.actor?doc.actor:"CoCActor"===doc.constructor?.name?doc:null:null}static async createImportCharactersFolderIfNotExists(){let folderName=game.i18n.localize("CoC7.ImportedCharactersFolder");"CoC7.ImportedCharactersFolder"===folderName&&(folderName="Imported characters");let importedCharactersFolder=game.folders.find((entry=>entry.name===folderName&&"Actor"===entry.type));return null==importedCharactersFolder&&(importedCharactersFolder=await Folder.create({name:folderName,type:"Actor",parent:null}),ui.notifications.info(game.i18n.localize("CoC7.CreatedImportedCharactersFolder"))),importedCharactersFolder}static async guessItem(type,name,{combat=null,source="",fallbackAny=!1}={}){let existing=null;name=name.toLowerCase();for(let o=0,oM=source.length;o<oM;o++)switch(source.substring(o,o+1)){case"i":if(existing=game.items.find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing;break;case"w":case"m":case"s":for(const pack of game.packs)if("Item"===pack.metadata.type&&("w"===source[o]&&"world"===pack.metadata.package||"S"===source[o]&&"CoC7"===pack.metadata.package||"s"===source[o]&&!["world","CoC7"].includes(pack.metadata.package))){if(existing=(await pack.getDocuments()).find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing}}if(fallbackAny&&"skill"===type){const match=name.match(/^(.+ \()(?!any).+(\))$/);if(match)return await CoC7Utilities.guessItem(type,match[1]+"any"+match[2],{combat,source})}}static toKebabCase(s){if(!s)return"";const match=s.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);return match?match.join("-").toLowerCase():""}static sortByNameKey(a,b){return a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase().localeCompare(b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase())}}class CoCIDEditor extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-editor.hbs",width:900,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!0,submitOnChange:!0})}async getData(){const sheetData=super.getData();sheetData.supportedLanguages=CONFIG.supportedLanguages,this.options.editable=this.object.sheet.isEditable,sheetData.guessCode=game.system.api.cocid.guessId(this.object),sheetData.idPrefix=game.system.api.cocid.getPrefix(this.object),sheetData.cocidFlag=this.object.flags?.CoC7?.cocidFlag,sheetData.id=sheetData.cocidFlag?.id||"",sheetData.lang=sheetData.cocidFlag?.lang||game.i18n.lang,sheetData.priority=sheetData.cocidFlag?.priority||0,sheetData.eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData.eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(sheetData.cocidFlag?.eras??{})[key]});sheetData.eras.sort(CoC7Utilities.sortByNameKey);const CoCIDKeys=flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys??{}),prefix=new RegExp("^"+CoC7Utilities.quoteRegExp(sheetData.idPrefix));sheetData.existingKeys=Object.keys(CoCIDKeys).reduce(((obj,k)=>(k.match(prefix)&&obj.push({k,name:CoCIDKeys[k]}),obj)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.isSystemID=void 0!==CoCIDKeys[sheetData.id];const match=sheetData.id.match(/^([^\\.]+)\.([^\\.]*)\.(.+)/);if(sheetData._existing=match&&void 0!==match[3]?match[3]:"",sheetData.id&&sheetData.lang){const worldDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"world"}),usedEras={},uniqueWorldPriority={};sheetData.worldDocumentInfo=worldDocuments.map((d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueWorldPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:TextEditor.enrichHTML(d.link,{async:!1}),folder:d?.folder?.name}})),Object.entries(uniqueWorldPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateWorldPriority=!0),sheetData.worldDuplicates=worldDocuments.length??0;const compendiumDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"compendiums"}),uniqueCompendiumPriority={};sheetData.compendiumDocumentInfo=compendiumDocuments.map((d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueCompendiumPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:TextEditor.enrichHTML(d.link,{async:!1}),folder:d?.folder?.name??""}})),Object.entries(uniqueCompendiumPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateCompendiumPriority=!0),sheetData.compendiumDuplicates=compendiumDocuments.length??0,sheetData.usedEras=[];for(const[key,value]of Object.entries(usedEras))sheetData.usedEras.push({id:key,name:game.i18n.localize(value)});sheetData.usedEras.sort(CoC7Utilities.sortByNameKey)}else sheetData.compendiumDocumentInfo=[],sheetData.worldDocumentInfo=[],sheetData.worldDuplicates=0,sheetData.compendiumDuplicates=0,sheetData.warnDuplicateWorldPriority=!1,sheetData.warnDuplicateCompendiumPriority=!1;return sheetData}activateListeners(html){super.activateListeners(html),html.find("a.copy-to-clipboard").click((function(e){CoC7Utilities.copyToClipboard($(this).siblings("input").val())})),this.object.sheet.isEditable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find("input[name=_existing").change((function(e){const obj=$(this),prefix=obj.data("prefix");let value=obj.val();""!==value&&(value=prefix+CoC7Utilities.toKebabCase(value)),html.find("input[name=id]").val(value).trigger("change")})),html.find("select[name=known]").change((function(e){const obj=$(this);html.find("input[name=id]").val(obj.val())})),html.find("a[data-guess]").click((async function(e){e.preventDefault();const guess=$(this).data("guess");html.find("input[name=id]").val(guess).trigger("change")})))}static async eraToggle(document,propertyId){if("setup"===document.type){const update={[propertyId]:!0};if(void 0!==document.flags?.CoC7?.cocidFlag?.eras)for(const[key]of Object.entries(document.flags.CoC7.cocidFlag.eras))key!==propertyId&&(update["-="+key]=null);await document.update({"flags.CoC7.cocidFlag.eras":update})}else void 0===document.flags?.CoC7?.cocidFlag?.eras?.[propertyId]?void 0===document.flags?.CoC7?.cocidFlag?.eras?await document.update({"flags.CoC7.cocidFlag.eras":{[propertyId]:!0}}):await document.update({[`flags.CoC7.cocidFlag.eras.${propertyId}`]:!0}):await document.update({[`flags.CoC7.cocidFlag.eras.-=${propertyId}`]:null})}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await CoCIDEditor.eraToggle(this.object,propertyId),this.render()}async _updateObject(event,formData){const id=formData.id||"";await this.object.update({"flags.CoC7.cocidFlag.id":id,"flags.CoC7.cocidFlag.lang":formData.lang||game.i18n.lang,"flags.CoC7.cocidFlag.priority":formData.priority||0,"flags.CoC7.cocidFlag.eras":this.object.flags?.CoC7?.cocidFlag?.eras??{}});const html=$(this.object.sheet.element).find("header.window-header a.header-button.edit-coc-id-warning,header.window-header a.header-button.edit-coc-id-exisiting");html.length&&html.css({color:id?"var(--color-text-light-highlight)":"red"}),this.render()}}function addCoCIDSheetHeaderButton(headerButtons,sheet){if(game.user.isGM){const sheetCoCID=sheet.object.flags?.CoC7?.cocidFlag,CoCIDEditorButton={class:void 0===sheetCoCID||void 0===sheetCoCID.id||""===sheetCoCID.id?"edit-coc-id-warning":"edit-coc-id-exisiting",label:"CoC7.CoCIDFlag.id",icon:"fas fa-fingerprint",onclick:()=>{new CoCIDEditor(sheet.object,{}).render(!0,{focus:!0})}},numberOfButtons=headerButtons.length;headerButtons.splice(numberOfButtons-1,0,CoCIDEditorButton)}}class CoC7ActiveEffect extends ActiveEffect{apply(actor,change){"system.attribs.armor.value"===change.key?isNaN(change.value)||isNaN(actor.system.attribs.armor.value)||(actor.system.attribs.armor.value=Number(actor.system.attribs.armor.value)):"system.attribs.db.value"===change.key&&isNaN(change.value)&&!isNaN(actor.system.attribs.db.value)&&(actor.system.attribs.db.value=String(actor.system.attribs.db.value));return super.apply(actor,change)}static onManageActiveEffect(event,owner){event.preventDefault();const a=event.currentTarget,li=a.closest("li"),effect=li.dataset.effectId?owner.effects.get(li.dataset.effectId):null;switch(a.dataset.action){case"create":return owner.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",origin:owner.uuid,"duration.rounds":"temporary"===li.dataset.effectType?1:void 0,disabled:"inactive"===li.dataset.effectType}]);case"edit":return effect.sheet.render(!0);case"delete":return effect.delete();case"toggle":return effect.update({disabled:!effect.disabled})}}_prepareDuration(){const duration=super._prepareDuration();return"seconds"===duration.type&&(duration.seconds>3600?duration.label=new Date(1e3*duration.seconds).toISOString().slice(11,19):duration.seconds>100&&(duration.label=new Date(1e3*duration.seconds).toISOString().slice(14,19))),duration}get isStatus(){const statusId=this.getFlag("core","statusId");return["tempoInsane","indefInsane","criticalWounds","dying","dead","unconscious","prone"].includes(statusId)}static prepareActiveEffectCategories(effects,{status=!0}={}){const categories={temporary:{type:"temporary",label:game.i18n.localize("Temporary"),effects:[]},passive:{type:"passive",label:game.i18n.localize("Passive"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]},suppressed:{type:"suppressed",label:game.i18n.localize("Suppressed"),effects:[],info:[game.i18n.localize("Unavailable")]}};status&&(categories.status={type:"status",label:game.i18n.localize("Status"),effects:[]});for(const e of effects)e._getSourceName(),e.isSuppressed?categories.suppressed.effects.push(e):e.isStatus?categories.status.effects.push(e):e.disabled?categories.inactive.effects.push(e):e.isTemporary?categories.temporary.effects.push(e):categories.passive.effects.push(e);return categories.suppressed.hidden=!categories.suppressed.effects.length,categories}static prepareNPCActiveEffectCategories(effects){let count=0;const categories={active:{type:"active",label:game.i18n.localize("Active"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]}};for(const e of effects)count+=1,e._getSourceName(),e.isSuppressed||e.disabled?categories.inactive.effects.push(e):categories.active.effects.push(e);return count>0&&(categories.expended=!0),categories}}class CoC7ContextMenu{bind(menu,html,callback){this._callback=callback,this._html=html,this._menu=menu;try{const menuTrigger=html.find(`[data-context-menu=${menu.id}]`);if(0===menuTrigger.length)return;menuTrigger.contextmenu(this._onContextMenu.bind(this));const menuElement=CoC7ContextMenu.CreateMenu(menu);menuElement.on("click",".menu-action",this._onMenuAction.bind(this)),0!==this.menu.length?this.menu.replaceWith(menuElement):this.menuContainer.append(menuElement)}catch(error){console.error(error)}}get menuContainer(){let menuContainer=this._html.find(".menu-container");return 0===menuContainer.length&&(this._html.append('<div class="menu-container"></div>'),menuContainer=this._html.find(".menu-container")),menuContainer}get menu(){return this.menuContainer.find(`.context-menu-wrapper.${this._menu.id}`)}_onMenuAction(event){return this._callback(event,this.target)}static closeAll(){$("body").find(".menu-container").find(".context-menu-wrapper").each((function(i,m){m.style.visibility="hidden"}))}_onContextMenu(event){event.preventDefault(!0),CoC7ContextMenu.closeAll();const target=event?.currentTarget;if(this.target=target,!target)return;const menuName=target.dataset?.contextMenu;if(menuName===this._menu.id){const wrapper=this.menu;if(wrapper.length>0){const subMenu=wrapper.find(".sub-menu");let left=event.clientX,top=event.clientY;const menuHeight=wrapper.outerHeight(),menuWidth=wrapper.outerWidth();window.innerHeight<menuHeight+top&&(top-=menuHeight),window.innerWidth<menuWidth+left&&(left=window.innerWidth-menuWidth),subMenu.length>0&&(window.innerWidth<menuWidth+left+subMenu.outerWidth()?subMenu.css({right:menuWidth-5+"px",left:""}):subMenu.css({left:menuWidth-5+"px",right:""})),wrapper.css({left:`${left}px`,top:`${top}px`,visibility:"visible"})}}}static canSee(visibility){switch(visibility.toLowerCase()){case"gm":return game.user.isGM;case"trusted":return game.user.isTrusted;default:return!0}}static CreateMenu(menu){const classes="string"==typeof menu.classes?[menu.classes]:menu.classes;classes.push("context-menu-wrapper");const wrapper=$("<div></div>");if(wrapper.addClass(menu.id),classes.forEach((c=>wrapper.addClass(c))),menu.section)menu.section.forEach((s=>{const section=CoC7ContextMenu.CreateSection(s,{multi:!0});section&&wrapper.append(section)}));else{const section=CoC7ContextMenu.CreateSection(menu);section&&wrapper.append(section)}return wrapper}static CreateSection(s,{multi=!1,subMenu=!1}={}){if(!s.items)return null;if(s.visibility&&!CoC7ContextMenu.canSee(s.visibility))return null;const classes=s.classes?"string"==typeof s.classes?[s.classes]:s.classes:[];multi&&classes.push("menu-section"),subMenu&&classes.push("sub-menu");const section=$("<ul></ul>");return classes.forEach((c=>section.addClass(c))),s.items.forEach((i=>{const li=$("<li></li>");if(li.addClass("menu-item"),i.action&&(li.addClass("menu-action"),li.attr("data-action",i.action)),"string"==typeof i.label?li.append(`<span>${i.label}</span>`):(i.label.icon&&li.append(`<i class="${i.label.icon}"></i>`),i.label.text&&li.append(`<span>${i.label.text}</span>`)),i.subMenu){li.addClass("sub-menu-button"),li.append('<i class="fas fa-caret-right"></i>');const sub=CoC7ContextMenu.CreateSection(i.subMenu,{subMenu:!0});sub&&li.append(sub)}section.append(li)})),section}}class CoC7ActorSheet extends ActorSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu"),sheetData.canDragToken=!!this.token&&game.user.isGM,sheetData.linkedActor=!0===this.actor.prototypeToken?.actorLink,sheetData.isToken=this.actor.isToken,sheetData.itemsByType={},sheetData.skills={},sheetData.combatSkills={},sheetData.weapons={},sheetData.rangeWpn=[],sheetData.meleeWpn=[],sheetData.actorFlags={},sheetData.effects="character"===this.actor.type?CoC7ActiveEffect.prepareActiveEffectCategories(this.actor.effects):CoC7ActiveEffect.prepareNPCActiveEffectCategories(this.actor.effects),sheetData.permissionLimited=!game.user.isGM&&(this.actor.ownership[game.user.id]??this.actor.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED,sheetData.isKeeper=game.user.isGM,sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM||"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled"),"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled")&&(sheetData.data.system.flags.locked=!1),"vehicle"!==this.actor.type&&(sheetData.data.system.characteristics||(sheetData.data.system.characteristics={str:{value:null,short:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,short:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,short:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,short:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,short:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,short:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,short:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,short:"CHARAC.EDU",label:"CHARAC.Education",formula:null}}),sheetData.data.system.attribs||(sheetData.data.system.attribs={hp:{value:null,max:null,short:"HP",label:"Hit points",auto:!0},mp:{value:null,max:null,short:"HP",label:"Magic points",auto:!0},lck:{value:null,short:"LCK",label:"Luck"},san:{value:null,max:99,short:"SAN",label:"Sanity",auto:!0},mov:{value:null,short:"MOV",label:"Movement rate",auto:!0},db:{value:null,short:"DB",label:"Damage bonus",auto:!0},build:{value:null,short:"BLD",label:"Build",auto:!0},armor:{value:null,auto:!1}}),sheetData.data.system.biography||(sheetData.data.system.biography={personalDescription:{type:"string",value:""}}),sheetData.data.system.infos||(sheetData.data.system.infos={occupation:"",age:"",sex:"",residence:"",birthplace:"",archetype:"",organization:"",playername:""}),sheetData.data.system.flags||(sheetData.data.system.flags={locked:!0,manualCredit:!1}),sheetData.data.system.credit||(sheetData.data.system.credit={monetarySymbol:null,multiplier:null,spent:null,assetsDetails:null}),sheetData.data.system.development||(sheetData.data.system.development={personal:null,occupation:null,archetype:null}),sheetData.data.system.biography||(sheetData.data.system.biography=[]),sheetData.pulpRuleArchetype=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.pulpRuleOrganization=game.settings.get("CoC7","pulpRuleOrganization")),sheetData.isDead=this.actor.dead,sheetData.isDying=this.actor.dying,sheetData.items){for(const item of sheetData.items){if("skill"===item.type)if(item.system.properties.special&&(item.system.properties.fighting&&(item.system.specialization=game.i18n.localize("CoC7.FightingSpecializationName")),item.system.properties.firearm&&(item.system.specialization=game.i18n.localize("CoC7.FirearmSpecializationName"))),"character"!==this.actor.type){if(isNaN(Number(item.system.value))){let value=null;const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));try{value=(await new Roll(item.system.value,parsed).evaluate({async:!0})).total}catch(err){console.warn(game.i18n.format("CoC7.ErrorUnableToParseSkillFormula",{value:item.system.value,name:item.name})),value=null}if(value){item.system.value=value;const itemToUpdate=this.actor.items.get(item._id);console.info(`[COC7] (Actor:${this.name}) Evaluating skill ${item.name}:${item.system.value} to ${value}`),await itemToUpdate.update({"system.value":value})}}const skill=this.actor.items.get(item._id),{base,rawValue,value}=skill.system;item.system.rawValue=rawValue||value||base,item.system.value=value||base}else{const skill=this.actor.items.get(item._id);if(item.system.base=await skill.asyncBase(),item.system.value){let updatedExp=(item.system.adjustments?.experience?parseInt(item.system.adjustments.experience):0)+parseInt(item.system.value)-skill.value;updatedExp<=0&&(updatedExp=null),console.info(`[COC7] Updating skill ${skill.name} experience. Experience missing: ${updatedExp}`),await this.actor.updateEmbeddedDocuments("Item",[{_id:item._id,"system.adjustments.experience":updatedExp,"system.value":null}]),item.system.adjustments||(item.system.adjustments={}),item.system.adjustments.experience=updatedExp,item.system.rawValue=skill.rawValue,item.system.value=skill.value}else item.system.value=skill.value,item.system.rawValue=skill.rawValue}let list=sheetData.itemsByType[item.type];list||(list=[],sheetData.itemsByType[item.type]=list),list.push(item)}for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey);sheetData.skills=sheetData.items.filter((item=>"skill"===item.type)).sort(CoC7Utilities.sortByNameKey),sheetData.meleeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.fighting)),sheetData.rangeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.firearm));const cbtSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat));if(cbtSkills)for(const skill of cbtSkills)sheetData.combatSkills[skill._id]=skill;const weapons=sheetData.itemsByType.weapon;if(weapons)for(const weapon of weapons){if(weapon.usesAlternateSkill=!0===weapon.system.properties.auto||!0===weapon.system.properties.brst,weapon.system.ammo||(weapon.system.ammo=0),weapon.skillSet=!0,""===weapon.system.skill.main.id)weapon.skillSet=!1;else{if(sheetData.combatSkills[weapon.system.skill.main.id]){const skill=this.actor.items.get(weapon.system.skill.main.id);weapon.system.skill.main.name=skill.system.skillName,weapon.system.skill.main.value=skill.value}else weapon.skillSet=!1;if(""!==weapon.system.skill.alternativ.id&&sheetData.combatSkills[weapon.system.skill.alternativ.id]){const skill=this.actor.items.get(weapon.system.skill.alternativ.id);weapon.system.skill.alternativ.name=skill.system.skillName,weapon.system.skill.alternativ.value=skill.value}}weapon.system._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.value=!0===weapon.system.properties[key],weapon.system._properties.push(property)}sheetData.weapons[weapon._id]=weapon,weapon.system.properties.rngd?sheetData.rangeWpn.push(weapon):sheetData.meleeWpn.push(weapon)}const token=this.token;if(sheetData.tokenId=token?`${token.parent?.id?token.parent.id:"TOKEN"}.${token.id}`:null,sheetData.hasEmptyValueWithFormula=!1,sheetData.data.system.characteristics)for(const characteristic of Object.values(sheetData.data.system.characteristics))characteristic.value||(characteristic.editable=!0),characteristic.hard=Math.floor(characteristic.value/2),characteristic.extreme=Math.floor(characteristic.value/5),characteristic.value||characteristic.formula?characteristic.display=!0:characteristic.display=!1,!characteristic.value&&characteristic.formula&&(characteristic.hasEmptyValueWithFormula=!0),sheetData.hasEmptyValueWithFormula=sheetData.hasEmptyValueWithFormula||characteristic.hasEmptyValueWithFormula}if(["vehicle","container"].includes(this.actor.type))sheetData.data.system.attribs.hp.auto=!1,sheetData.data.system.attribs.mp.auto=!1,sheetData.data.system.attribs.san.auto=!1,sheetData.data.system.attribs.mov.auto=!1,sheetData.data.system.attribs.db.auto=!1,sheetData.data.system.attribs.build.auto=!1;else{const auto=this.actor.checkUndefinedAuto();sheetData.data.system=mergeObject(sheetData.data.system,auto)}return sheetData.data.system.attribs.mp.value<0&&(sheetData.data.system.attribs.mp.value=null),sheetData.data.system.attribs.san.value<0&&(sheetData.data.system.attribs.san.value=null),["vehicle"].includes(this.actor.type)||sheetData.data.system.biography instanceof Array&&sheetData.data.system.biography.length&&(sheetData.data.system.biography[0].isFirst=!0,sheetData.data.system.biography[sheetData.data.system.biography.length-1].isLast=!0),sheetData.showInventoryItems=!1,sheetData.showInventoryBooks=!1,sheetData.showInventorySpells=!1,sheetData.showInventoryTalents=!1,sheetData.showInventoryStatuses=!1,sheetData.showInventoryWeapons=!1,sheetData.hasConditions=this.actor.effects.size>0||void 0!==this.actor.system.conditions&&Object.keys(this.actor.system.conditions).filter((condition=>this.actor.system.conditions[condition].value)).length>0,sheetData}static parseFormula(formula){let parsedFormula=formula;for(const[key,value]of Object.entries(COC7.formula.actorsheet))parsedFormula=parsedFormula.replace(key,value);return parsedFormula}get tokenKey(){throw ui.notifications.error("DEPRECATED SHOULD NOT HAPPEN!"),new Error("base.js get tokenKey(): DEPRECATED SHOULD NOT HAPPEN!")}onCloseSheet(){}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const rollMenu={id:"skill-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"gm",items:[{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}},{action:"request-roll",label:"Request roll"}]}]},sanMenu={id:"san-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"encounter",label:"Encounter"},{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"trusted",items:[{action:"request-roll",label:"Request roll"},{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"},{action:"link-encounter",label:"Encounter"}]}}]}]},rollContextMenu=new CoC7ContextMenu;rollContextMenu.bind(rollMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(rollContextMenu);const sanContextMenu=new CoC7ContextMenu;sanContextMenu.bind(sanMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(sanContextMenu)}else html.find(".characteristic-label").contextmenu(this._onOpposedRoll.bind(this)),html.find(".skill-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".attribute-label.rollable").contextmenu(this._onOpposedRoll.bind(this));if(html.find(".characteristic-label").click(this._onRollCharacteriticTest.bind(this)),html.find(".skill-name.rollable").click(this._onRollSkillTest.bind(this)),html.find(".skill-image").click(this._onRollSkillTest.bind(this)),html.find(".attribute-label.rollable").click(this._onRollAttribTest.bind(this)),html.find(".token-drag-handle").on("dragstart",this._onDragTokenStart.bind(this)),this.actor.isOwner&&void 0===this.actor.compendium){html.find(".characteristic-label").on("dragstart",(event=>this._onDragCharacteristic(event))),html.find(".attribute-label").on("dragstart",(event=>this._onDragAttribute(event))),html.find(".san-check").on("dragstart",(event=>this._onDragSanCheck(event))),html.find(".weapon-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".lock").click(this._onLockClicked.bind(this)),html.find(".flag").click(this._onFlagClicked.bind(this)),html.find(".formula").click(this._onFormulaClicked.bind(this)),html.find(".roll-characteritics").click(this._onRollCharacteriticsValue.bind(this)),html.find(".average-characteritics").click(this._onAverageCharacteriticsValue.bind(this)),html.find(".toggle-switch").click(this._onToggle.bind(this)),html.find(".auto-toggle").click(this._onAutoToggle.bind(this)),(game.user.isGM||game.settings.get("CoC7","statusPlayerEditable"))&&(html.find(".reset-counter").click(this._onResetCounter.bind(this)),html.find(".condition-monitor").click(this._onConditionToggle.bind(this)),html.find(".is-dying").click(this.heal.bind(this)),html.find(".is-dead").click(this.revive.bind(this))),html.find(".dying-check").click(this.checkForDeath.bind(this)),html.find(".item .item-image").click((event=>this._onItemRoll(event))),html.find(".weapon-name.rollable").click((event=>this._onWeaponRoll(event))),html.find(".item-name.effect-name").click((event=>this._onEffect(event))),html.find(".weapon-skill.rollable").click((async event=>this._onWeaponSkillRoll(event))),html.find(".reload-weapon").click((event=>this._onReloadWeapon(event))),html.find(".reload-weapon").on("contextmenu",(event=>this._onReloadWeapon(event))),html.find(".add-ammo").click(this._onAddAmo.bind(this)),html.find(".read-only").dblclick(this._toggleReadOnly.bind(this)),html.on("click",".weapon-damage",this._onWeaponDamage.bind(this)),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".items-header").click(this._onItemHeader.bind(this)),html.find(".section-header").click(this._onSectionHeader.bind(this));const wheelInputs=html.find(".attribute-value");for(const wheelInput of wheelInputs)wheelInput.addEventListener("wheel",(event=>this._onWheel(event)),{passive:!0})}this.options.editable&&(html.find(".show-detail").click((event=>this._onItemSummary(event))),html.find(".item-popup").click(this._onItemPopup.bind(this)),html.find(".show-detail").dblclick((event=>this._onRenderItemSheet(event))),html.find(".item-edit").click((event=>this._onRenderItemSheet(event))),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.stopPropagation(),ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":{const properties={};ev.currentTarget.dataset.melee?properties.melee=!0:ev.currentTarget.dataset.rngd&&(properties.rngd=!0),this.actor.createEmptyWeapon(ev,properties)}}})),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".add-new-section").click((()=>{this.actor.createBioSection(),this.render()})),html.find(".delete-section").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.deleteBioSection(index)})),html.find(".move-section-up").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionUp(index)})),html.find(".move-section-down").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionDown(index)})),html.find(".development-flag").dblclick((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("developement")})),html.find(".occupation-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("occupation")})),html.find(".archetype-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("archetype")})),html.find(".skill-developement").click((event=>{this.actor.developementPhase(event.shiftKey)})),html.find(".luck-development").click((event=>{event.detail&&1!==event.detail||this.actor.developLuck(event.shiftKey)})),html.find(".clear_conditions").click((event=>{if(void 0!==this.actor.system.conditions){const disable={};for(const condition in this.actor.system.conditions)void 0!==this.actor.system.conditions[condition].value&&!0===this.actor.system.conditions[condition].value&&(disable[`system.conditions.${condition}.value`]=!1);Object.keys(disable).length>0&&this.actor.update(disable)}const effects=this.actor.effects.map((effect=>effect.id));effects.length>0&&this.actor.deleteEmbeddedDocuments("ActiveEffect",effects)})),CoC7Link.bindEventsHandler(html),html.find(".test-trigger").click((async event=>{if(!game.settings.get("CoC7","hiddendevmenu"))return null;await Item.create({name:"__CoC7InternalItem__",type:"item"}),ui.notifications.info("effect created !")})),html.find(".skill-name.rollable").mouseenter(this.toolTipSkillEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".characteristic-label").mouseenter(this.toolTipCharacteristicEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".attribute-label.rollable").mouseenter(this.toolTipAttributeEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".auto-toggle").mouseenter(this.toolTipAutoEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".item-control.development-flag").mouseenter(this.toolTipFlagForDevelopment.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.actor))))}toolTipSkillEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const isCombat=game.CoC7Tooltips.ToolTipHover.classList?.contains("combat"),item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId);let toolTip=game.i18n.format(isCombat?"CoC7.ToolTipCombat":"CoC7.ToolTipSkill",{skill:skill.name,regular:skill.value,hard:Math.floor(skill.value/2),extreme:Math.floor(skill.value/5)});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipCharacteristicEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const char=game.CoC7Tooltips.ToolTipHover.closest(".char-box");if(void 0!==char&&char){const charId=char.dataset.characteristic,characteristic=sheet.actor.characteristics[charId];let toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:characteristic.label,regular:characteristic.value??0,hard:characteristic.hard??0,extreme:characteristic.extreme??0});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipAttributeEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const attrib=game.CoC7Tooltips.ToolTipHover.closest(".attribute");if(void 0!==attrib){const attributeId=attrib.dataset.attrib;let toolTip="";const attributes=sheet.actor.system.attribs[attributeId];switch(attributeId){case"lck":toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:attributes.label,regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip);break;case"db":toolTip=game.i18n.localize("CoC7.ToolTipDB"),game.CoC7Tooltips.displayToolTip(toolTip);break;case"san":toolTip=game.i18n.format("CoC7.ToolTipSanity",{skill:"Sanity",regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.i18n.localize("CoC7.ToolTipKeeperSanity")+(game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):"")})),game.CoC7Tooltips.displayToolTip(toolTip)}}}}),delay)}}toolTipAutoEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const toolTip=game.i18n.localize("CoC7.ToolTipAutoToggle");game.CoC7Tooltips.displayToolTip(toolTip)}}),delay))}toolTipFlagForDevelopment(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId),toolTip=game.i18n.format("CoC7.ToolTipSkillFlagToggle",{status:game.i18n.localize(skill.system.flags.developement?"CoC7.ToolTipSkillFlagged":"CoC7.ToolTipSkillUnflagged")});game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}_onContextMenuClick(event,target){const targetType=target.dataset?.targetType,rollOptions={preventStandby:!0,fastForward:!1,actor:this.actor};switch(targetType){case"skill":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL,rollOptions.skillId=target.closest(".item")?.dataset.skillId;break;case"characteristic":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,rollOptions.characteristic=target.closest(".char-box").dataset.characteristic;break;case"attribute":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.attribute=target.closest(".attribute").dataset.attrib}switch(event.currentTarget.dataset.action){case"roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL;break;case"opposed-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_OPPOSED;break;case"combined-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED;break;case"request-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL,rollOptions.preventStandby=!1;break;case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToClipboard=!0;break;case"link-encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0;break;case"encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_SAN_CHECK,rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.fastForward=!0}CoC7ChatMessage.trigger(rollOptions)}_onRenderItemSheet(event){const li=$(event.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",message.actorTo=await new Promise((resolve=>{new Dialog({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,buttons:{confirm:{label:game.i18n.localize("CoC7.Validate"),callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)if("user"===name)return resolve(value)}}},default:"confirm",close:()=>{}}).render(!0)})),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onDragStart(event){if(super._onDragStart(event),this.token){const dragData=JSON.parse(event.dataTransfer.getData("text/plain"));dragData.tokenUuid=this.token.uuid,dragData.tokenId=this.token.id,dragData.sceneId=this.token.parent.id,event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}_onDragCharacteristic(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"characteristic",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.characteristic,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragAttribute(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"coc7-link",check:"check",type:"attribute",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.attrib,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragSanCheck(event){const sanMin=event.currentTarget.querySelector(".san-value.pass"),sanMax=event.currentTarget.querySelector(".san-value.failed"),data={CoC7Type:"link",linkType:"coc7-link",check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,sanMin:sanMin.innerText,sanMax:sanMax.innerText,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain");if(""===dataString)return!1;const data=JSON.parse(dataString);"CoC7Link"===data.type&&data.check===CoC7Link.CHECK_TYPE.EFFECT&&CoC7Link._onLinkActorClick(this.actor,data),await super._onDrop(event)}async _onConditionToggle(event){event.preventDefault(),event.currentTarget.dataset.condition&&await this.actor.toggleCondition(event.currentTarget.dataset.condition)}async revive(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dead)}async heal(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dying)}async checkForDeath(event){const conCheck=new CoC7ConCheck(this.actor.isToken?this.actor.tokenKey:this.actor.id);conCheck.stayAlive=!0,conCheck.toMessage(event.shiftKey)}async _onDragTokenStart(event){const data={type:"Token",uuid:this.token.uuid};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onResetCounter(event){event.preventDefault(),await this.actor.resetDailySanity()}async _onAutoToggle(event){if(event.currentTarget.closest(".attribute")){const attrib=event.currentTarget.closest(".attribute").dataset.attrib;this.actor.toggleAttribAuto(attrib)}}async _onToggle(event){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&weapon.toggleProperty(event.currentTarget.dataset.property,isCtrlKey(event))}async _onRollCharacteriticsValue(){await this.actor.rollCharacteristicsValue()}async _onAverageCharacteriticsValue(){this.actor.averageCharacteristicsValue()}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked,Hooks.call("actorLockClickedCoC7",[!isLocked])}async _onFlagClicked(event){event.preventDefault();const flagName=event.currentTarget.dataset.flag;this.actor.toggleActorFlag(flagName)}async _onFormulaClicked(event){event.preventDefault(),this.actor.toggleActorFlag("displayFormula")}async _onWheel(event){let value=parseInt(event.currentTarget.value)||null;switch(event.deltaY>0&&(value=0===value?0:value-1),event.deltaY<0&&(value+=1),event.currentTarget.name){case"system.attribs.hp.value":case"system.attribs.build.current":this.actor.setHp(value);break;case"system.attribs.mp.value":this.actor.setMp(value);break;case"system.attribs.san.value":this.actor.setSan(value);break;case"system.attribs.lck.value":this.actor.setLuck(value)}}_toggleReadOnly(event){event.currentTarget.readOnly=!event.currentTarget.readOnly,event.currentTarget.classList.toggle("read-only")}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>{summary.remove(),li.toggleClass("expanded")}))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Link.bindEventsHandler(div),div.slideDown(200,(()=>li.toggleClass("expanded")))}}async _onSectionHeader(event){event.preventDefault();const section=event.currentTarget.closest("section"),pannelClass=event.currentTarget.dataset.pannel;if(void 0===pannelClass)return;const pannel=$(section).find(`.pannel.${pannelClass}`);pannel.hasClass("expanded")?pannel.slideUp(200,(()=>pannel.toggleClass("expanded"))):pannel.slideDown(200,(()=>pannel.toggleClass("expanded")));const camelFlag=chatHelper.hyphenToCamelCase(`data.pannel.${pannelClass}.expanded`);this.actor.update({[camelFlag]:!pannel.hasClass("expanded")},{render:!1})}_onInventoryHeader(event){event.preventDefault();const li=$(event.currentTarget).siblings("li");li.is(":visible")?li.slideUp(200):li.slideDown(200)}_onItemHeader(event){event.preventDefault();const ol=$(event.currentTarget).next("ol");ol.is(":visible")?ol.slideUp(200):ol.slideDown(200)}async _onItemPopup(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id"));CoC7ActorSheet.popupSkill(item)}static async popupSkill(skill){skill.system.description.enrichedValue=TextEditor.enrichHTML(skill.system.description.value,{async:!1});new Dialog({title:game.i18n.localize("CoC7.SkillDetailsWindow"),content:skill,buttons:{},close:()=>{}},{classes:["coc7","sheet","skill"],width:520,height:480,scrollY:[".item-description"],template:"systems/CoC7/templates/apps/skill-details.html"}).render(!0)}async _onItemRoll(event){event.preventDefault()}async _onEffect(event){event.preventDefault();const effectId=event.currentTarget.closest("li").dataset.effectId,effect=this.actor.effects.get(effectId);isCtrlKey(event)&&game.user.isGM&&CoC7ContentLinkDialog.create({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.EFFECT,object:effect})}async _onWeaponRoll(event){event.preventDefault();const itemId=event.currentTarget.closest("li").dataset.itemId,fastForward=event.shiftKey,weapon=this.actor.items.get(itemId);let actorKey;if(actorKey=this.token?this.actor.isToken&&game.actors.tokens[this.token.id]?`TOKEN.${this.token.id}`:`${this.token.parent.id}.${this.token.id}`:this.actor.id,isCtrlKey(event)&&game.user.isGM){const linkData={check:CoC7Link.CHECK_TYPE.ITEM,name:weapon.name};CoC7ContentLinkDialog.create(linkData,{actors:[this.actor]})}else{let proceedWithoutTarget;if(game.user.targets.size<=0&&(proceedWithoutTarget=await new Promise((resolve=>{const data={title:" ",content:game.i18n.format("CoC7.NoTargetSelected",{weapon:weapon.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>resolve(!0)}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)}))),game.user.targets.size>0||proceedWithoutTarget){if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(actorKey,itemId,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(actorKey,itemId,fastForward).createChatCard()}}}}async _onReloadWeapon(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);0===event.button?event.shiftKey?await weapon.reload():await weapon.addBullet():2===event.button&&(event.shiftKey?await weapon.setBullets(0):await weapon.shootBullets(1))}async _onAddAmo(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);await weapon.addBullet()}async _onWeaponSkillRoll(event){event.preventDefault();const skillId=event.currentTarget.dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,itemId=event.currentTarget.closest("li")?event.currentTarget.closest("li").dataset.itemId:null,check=new CoC7Check;if(!event.shiftKey){const usage=await RollDialog.create();usage&&(check.diceModifier=usage.get("bonusDice"),check.difficulty=usage.get("difficulty"),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=tokenKey||actorId,check.skill=skillId,check.item=itemId,await check.roll(),check.toMessage()}async _onWeaponDamage(event){event.preventDefault();const itemId=event.currentTarget.closest(".weapon").dataset.itemId,range=event.currentTarget.closest(".weapon-damage").dataset.range,damageChatCard=new DamageCard({fastForward:event.shiftKey,range});damageChatCard.actorKey=this.actor.tokenKey,damageChatCard.itemId=itemId,damageChatCard.updateChatCard()}async _onOpposedRoll(event){if(event.preventDefault(),"db"===event.currentTarget.parentElement.dataset.attrib)return;const data={rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_OPPOSED,event,actor:this.actor};event.currentTarget.classList.contains("characteristic-label")?data.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:event.currentTarget.classList.contains("attribute-label")&&(data.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE),event.altKey&&(data.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED),CoC7ChatMessage.trigger(data)}async _onRollCharacteriticTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,characteristic:event.currentTarget.closest(".char-box").dataset.characteristic,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _onRollAttribTest(event){event.preventDefault();const attrib=event.currentTarget.parentElement.dataset.attrib;if("db"!==attrib)game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,attribute:event.currentTarget.closest(".attribute").dataset.attrib,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,cardType:event.altKey&&"san"===attrib?CoC7ChatMessage.CARD_TYPE_SAN_CHECK:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor});else if(!/^-{0,1}\d+$/.test(event.currentTarget.parentElement.dataset.rollFormula)){const r=new Roll(event.currentTarget.parentElement.dataset.rollFormula);await r.roll({async:!0}),isNaN(r.total)||void 0===r.total||r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:game.i18n.localize("CoC7.BonusDamageRoll")})}}_onRollSkillTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,skillId:event?.currentTarget.closest(".item")?.dataset.skillId,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _updateObject(event,formData){const overrides=foundry.utils.flattenObject(this.actor.overrides),name=event?.currentTarget?.name;if(name&&overrides&&overrides[name]&&ui.notifications.warn(game.i18n.format("CoC7.EffectAppliedCantOverride",{name})),event.currentTarget&&event.currentTarget.classList){if(event.currentTarget.classList.contains("skill-adjustment")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(item){const value=event.currentTarget.value?parseInt(event.currentTarget.value):null;if(event.currentTarget.value?isNaN(value)||await item.update({[event.currentTarget.name]:value}):await item.update({[event.currentTarget.name]:null}),game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating")===item.name&&void 0!==this.actor.occupation?.system?.creditRating?.max){const creditValue=(item.value||0)-(item.system.adjustments?.experience||0);(creditValue>Number(this.actor.occupation.system.creditRating.max)||creditValue<Number(this.actor.occupation.system.creditRating.min))&&ui.notifications.warn(game.i18n.format("CoC7.CreditOutOfRange",{min:Number(this.actor.occupation.system.creditRating.min),max:Number(this.actor.occupation.system.creditRating.max)}))}}}if(event.currentTarget.classList.contains("attribute-value")){if("system.attribs.san.value"===event.currentTarget.name)return await this.actor.setSan(parseInt(event.currentTarget.value)),void this.render(!0);if("system.attribs.hp.value"===event.currentTarget.name)return await this.actor.setHp(parseInt(event.currentTarget.value)),void this.render(!0)}if(event.currentTarget.classList.contains("text-area"))return void this.actor.updateTextArea(event.currentTarget);if(event.currentTarget.classList.contains("bio-section-value")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);await this.actor.updateBioValue(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("bio-section-title")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);this.actor.updateBioTitle(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("npc-skill-score")){const skill=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);skill&&await skill.updateValue(event.currentTarget.value)}if(event.currentTarget.classList.contains("skill-name")||event.currentTarget.classList.contains("item-name")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);if(item){const data={};if(item.system.properties.special){const parts=CoC7Item.getNamePartsSpec(event.currentTarget.value,item.system.specialization);data.name=parts.name,data["system.skillName"]=parts.skillName,data["system.specialization"]=parts.specialization}else data["system.skillName"]=event.currentTarget.value,data.name=event.currentTarget.value;await item.update(data)}}if(event.currentTarget.classList.contains("characteristic-formula")&&0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("attribute-value")&&0!==event.currentTarget.value.length&&"db"===event.currentTarget.closest(".attribute").dataset.attrib){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("weapon-skill")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId),skill=this.actor.items.get(event.currentTarget.options[event.currentTarget.selectedIndex].value);if(weapon&&skill)switch(event.currentTarget.dataset.skill){case"main":await weapon.update({"system.skill.main.id":skill.id,"system.skill.main.name":skill.name});break;case"alternativ":await weapon.update({"system.skill.alternativ.id":skill.id,"system.skill.alternativ.name":skill.name})}}if(event.currentTarget.classList.contains("weapon-name")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&await weapon.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("damage-formula")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(weapon)if(0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);if(await r.roll({async:!0}),isNaN(r.total)||void 0===r.total)ui.notifications.error(game.i18n.format("CoC7.ErrorUnableToParseFormula",{value:event.currentTarget.value}));else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":event.currentTarget.value});break;case"long":await weapon.update({"system.range.long.damage":event.currentTarget.value});break;case"extreme":await weapon.update({"system.range.extreme.damage":event.currentTarget.value})}}else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":null});break;case"long":await weapon.update({"system.range.long.damage":null});break;case"extreme":await weapon.update({"system.range.extreme.damage":null})}}}return this.object.update(formData)}}class CoC7NPCSheet extends CoC7ActorSheet{async getData(){const sheetData=await super.getData();return sheetData.allowFormula=!0,sheetData.displayFormula=this.actor.getActorFlag("displayFormula")||!1,sheetData.hasSan=null!==sheetData.data.system.attribs.san.value,sheetData.hasMp=null!==sheetData.data.system.attribs.mp.value,sheetData.hasLuck=null!==sheetData.data.system.attribs.lck.value,sheetData.isCreature=!1,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.showInventoryWeapons=!1,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBiographyPersonalDescription=TextEditor.enrichHTML(sheetData.data.system.biography.personalDescription?.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const sanlossMenu={id:"san-loss-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}]},sanlossContextMenu=new CoC7ContextMenu;sanlossContextMenu.bind(sanlossMenu,html,this._onSanLossContextMenuClick.bind(this)),this.menus.push(sanlossContextMenu)}html.find(".roll-san").click(this._onSanCheck.bind(this))}async _onSanLossContextMenuClick(event){const rollOptions={rollType:CoC7ChatMessage.ROLL_TYPE_ENCOUNTER,preventStandby:!0,fastForward:!1,event,cardType:CoC7ChatMessage.CARD_TYPE_SAN_CHECK,actor:this.actor};switch(event.currentTarget.dataset.action){case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToClipboard=!0}CoC7ChatMessage.trigger(rollOptions)}async _onSanCheck(event){if(event.preventDefault(),this.actor.system.special.sanLoss.checkPassed||this.actor.system.special.sanLoss.checkFailled)if(isCtrlKey(event)&&game.user.isGM){let difficulty,modifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")))}const linkData={check:"sanloss",sanMin:this.actor.system.special.sanLoss.checkPassed,sanMax:this.actor.system.special.sanLoss.checkFailled,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void 0!==modifier&&(linkData.modifier=modifier),void 0!==difficulty&&(linkData.difficulty=difficulty);const link=(new CoC7Link)._createDocumentLink(linkData);link&&chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}))}else{const sanData={sanMax:this.actor.sanLossCheckFailled,sanMin:this.actor.sanLossCheckPassed,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};SanCheckCard.checkTargets(sanData,event.shiftKey)}}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc"],dragDrop:[{dragSelector:".item",dropSelector:null}],template:"systems/CoC7/templates/actors/npc-sheet.html",width:580,resizable:!1,minimizable:!0})}async _updateObject(event,formData){if(!(event.currentTarget&&event.currentTarget.classList&&event.currentTarget.classList.contains("characteristic-score")))return super._updateObject(event,formData);this.actor.setCharacteristic(event.currentTarget.name,event.currentTarget.value)}static forceAuto(app,html){html.height("auto")}setPosition(a){super.setPosition(a),CoC7NPCSheet.forceAuto(a,this._element)}}class CoC7CreatureSheet extends CoC7NPCSheet{async getData(){const sheetData=await super.getData();return sheetData.isCreature=!0,sheetData}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc","creature"]})}}class CoC7CreateMythosEncounter extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7"],title:game.i18n.localize("CoC7.SanityLossTypeDialogTitle"),template:"systems/CoC7/templates/apps/sanity-loss-type.hbs",height:"auto"})}async getData(){const data=await super.getData();return data.isImmunity="immunity"===data.object.type,data}activateListeners(html){html.find(".field_type").change(this._onSelectChange.bind(this)),html.find(".dialog-button").click(this._onButtonClick.bind(this)),super.activateListeners(html)}_onButtonClick(event){if("add"===event.currentTarget.dataset.button){const html=$(event.currentTarget).closest(".window-content"),type=html.find(".field_type").val(),name=html.find(".field_name").val(),value=parseInt(html.find(".field_value").val()),sanityLossEvents=this.object.actor.system.sanityLossEvents??[];sanityLossEvents.push({type:name,totalLoss:value,immunity:"immunity"===type}),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.object.actor.update({"data.sanityLossEvents":sanityLossEvents})}this.close()}_onSelectChange(event){const html=$(event.currentTarget).closest(".window-content");this.object.name=html.find(".field_name").val(),this.object.type=html.find(".field_type").val(),this.render(!0)}async _updateObject(event,formData){}}class CoC7CharacterSheet extends CoC7ActorSheet{_getHeaderButtons(){if("CoC7CharacterSheet"===this.constructor.name){this.summarized||(this.summarized=!1);let buttons=super._getHeaderButtons();return buttons=[{label:this.summarized?game.i18n.localize("CoC7.Maximize"):game.i18n.localize("CoC7.Summarize"),class:"test-extra-icon",icon:this.summarized?"fas fa-window-maximize":"fas fa-window-minimize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}return super._getHeaderButtons()}async toggleSheetMode(event){this.summarized=!this.summarized,await this.close();const options=this.summarized?{classes:["coc7","actor","character","summarized"],height:200,resizable:!1,width:700}:CoC7CharacterSheet.defaultOptions;await this.render(!0,options)}async getData(){const sheetData=await super.getData();this.isEditable&&void 0===this.actor.getFlag("CoC7","skillListMode")&&await this.actor.setFlag("CoC7","skillListMode",!1),this.isEditable&&void 0===this.actor.getFlag("CoC7","skillShowUncommon")&&await this.actor.setFlag("CoC7","skillShowUncommon",!0),sheetData.skillListModeValue=this.actor.getFlag("CoC7","skillListMode")??!1,sheetData.skillShowUncommon=this.actor.getFlag("CoC7","skillShowUncommon")??!0,sheetData.showIconsOnly=game.settings.get("CoC7","showIconsOnly"),this.actor.occupation?(sheetData.data.system.infos.occupation=this.actor.occupation.name,sheetData.data.system.infos.occupationSet=!0):sheetData.data.system.infos.occupationSet=!1,this.actor.archetype?(sheetData.data.system.infos.archetype=this.actor.archetype.name,sheetData.data.system.infos.archetypeSet=!0):sheetData.data.system.infos.archetypeSet=!1,sheetData.totalExperience=this.actor.experiencePoints,sheetData.totalOccupation=this.actor.occupationPointsSpent,sheetData.invalidOccupationPoints=Number(this.actor.occupationPointsSpent)!==Number(this.actor.system.development?.occupation),sheetData.totalArchetype=this.actor.archetypePointsSpent,sheetData.invalidArchetypePoints=Number(this.actor.archetypePointsSpent)!==Number(this.actor.system.development?.archetype),sheetData.totalPersonal=this.actor.personalPointsSpent,sheetData.invalidPersonalPoints=Number(this.actor.personalPointsSpent)!==Number(this.actor.system.development?.personal),sheetData.creditRatingMax=Number(this.actor.occupation?.system.creditRating.max),sheetData.creditRatingMin=Number(this.actor.occupation?.system.creditRating.min),sheetData.invalidCreditRating=this.actor.creditRatingSkill?.system.adjustments?.occupation>sheetData.creditRatingMax||this.actor.creditRatingSkill?.system.adjustments?.occupation<sheetData.creditRatingMin,sheetData.pulpTalentCount=sheetData.itemsByType.talent?.length?sheetData.itemsByType.talent?.length:0,sheetData.minPulpTalents=this.actor.archetype?.system.talents?this.actor.archetype?.system.talents:0,sheetData.invalidPulpTalents=sheetData.pulpTalentCount<sheetData.minPulpTalents,sheetData.hasDevelopmentPhase=this.actor.hasDevelopmentPhase,sheetData.allowDevelopment=game.settings.get("CoC7","developmentEnabled"),sheetData.allowCharCreation=game.settings.get("CoC7","charCreationEnabled"),sheetData.developmentRollForLuck=game.settings.get("CoC7","developmentRollForLuck"),sheetData.showDevPannel=sheetData.allowDevelopment||sheetData.allowCharCreation,sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});sheetData.manualCredit=this.actor.getActorFlag("manualCredit"),sheetData.manualCredit||(sheetData.monetary={spendingLevel:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.spendingLevel),assets:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.assets),cash:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.cash)}),sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.summarized=this.summarized&&!sheetData.permissionLimited,sheetData.skillList=[];let previousSpec="";for(const skill of sheetData.skills)!sheetData.skillShowUncommon&&skill.system.properties.rarity||(skill.system.properties.special&&previousSpec!==skill.system.specialization&&(previousSpec=skill.system.specialization,sheetData.skillList.push({isSpecialization:!0,name:skill.system.specialization})),sheetData.skillList.push(skill));if(sheetData.skillsByValue=[...sheetData.skills].sort(((a,b)=>b.system.value-a.system.value)),sheetData.topSkills=[...sheetData.skillsByValue].slice(0,14),sheetData.skillsByValue=sheetData.skillsByValue.filter((skill=>sheetData.skillShowUncommon||!skill.system.properties.rarity)),sheetData.topWeapons=[...sheetData.meleeWpn,...sheetData.rangeWpn].sort(((a,b)=>a.system.skill.main?.value-b.system.skill.main?.value)).reverse().slice(0,3),sheetData.displayPlayerName=game.settings.get("CoC7","displayPlayerNameOnSheet"),sheetData.displayPlayerName&&!sheetData.data.system.infos.playername){const user=this.actor.characterUser;user&&(sheetData.data.system.infos.playername=user.name)}return sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBackstory=TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}_saveScrollPositions(html){super._saveScrollPositions(html);this._scrollPositionsX=[".right-panel .tab.development ol"].reduce(((pos,sel)=>{const el=html.find(sel);return pos[sel]=Array.from(el).map((el=>el.scrollLeft)),pos}),{})}_restoreScrollPositions(html){super._restoreScrollPositions(html);const selectors=[".right-panel .tab.development ol"],positions=this._scrollPositionsX||{};for(const sel of selectors){html.find(sel).each(((i,el)=>{el.scrollLeft=positions[sel]?.[i]||0}))}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","character"],template:"systems/CoC7/templates/actors/character/index.html",width:687,height:623,resizable:!0,dragDrop:[{dragSelector:".item",dropSelector:null}],scrollY:[".right-panel .tab"],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"skills"}]})}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&(html.find(".skill-name.rollable.flagged4dev").click((async event=>this._onSkillDev(event))),html.find(".reset-occupation").click((async()=>await this.actor.resetOccupation())),html.find(".reset-archetype").click((async()=>await this.actor.resetArchetype())),html.find(".open-item").click((event=>this._onItemDetails(event))),html.find(".toggle-list-mode").click((event=>{this.toggleSkillListMode(event)})),html.find(".toggle-uncommon-mode").click((event=>{this.toggleSkillUncommonMode(event)})),game.user.isGM&&(html.find(".sanity-loss-type-add").click(this._onAddSanityLossReason.bind(this)),html.find(".sanity-loss-type-delete").click(this._onDeleteSanityLossReason.bind(this)),html.find(".toggle-keeper-flags").click(this._onToggleKeeperFlags.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this))))}_onAddMonetary(){const values=this.actor.system.monetary.values?duplicate(this.actor.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.actor.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=duplicate(this.actor.system.monetary.values);values.splice(Number(div.dataset.index),1),this.actor.update({"system.monetary.values":values})}_onToggleKeeperFlags(event){switch(event.preventDefault(),event.currentTarget.dataset.flag){case"mythosInsanityExperienced":this.actor.setFlag("CoC7","mythosInsanityExperienced",!this.actor.mythosInsanityExperienced);break;case"mythosHardened":this.actor.setFlag("CoC7","mythosHardened",!this.actor.mythosHardened)}}async _onAddSanityLossReason(event){event.preventDefault(),new CoC7CreateMythosEncounter({actor:this.actor,type:event.currentTarget.dataset.type},{}).render(!0)}_onDeleteSanityLossReason(event){event.preventDefault();const offset=$(event.currentTarget).closest(".flexrow").data("offset"),sanityLossEvents=this.actor.system.sanityLossEvents??[];sanityLossEvents.splice(offset,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}async toggleSkillListMode(event){return await this.actor.setFlag("CoC7","skillListMode",!this.actor.getFlag("CoC7","skillListMode")),await this.render(!0)}async toggleSkillUncommonMode(event){return await this.actor.setFlag("CoC7","skillShowUncommon",!this.actor.getFlag("CoC7","skillShowUncommon")),await this.render(!0)}async _onSkillDev(event){event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.itemId;await this.actor.developSkill(skillId,event.shiftKey)}_onItemDetails(event){event.preventDefault();const type=event.currentTarget.dataset.type,item=this.actor[type];item&&item.sheet.render(!0)}_updateObject(event,formData){const system=expandObject(formData)?.system;system.monetary?.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),super._updateObject(event,formData)}static renderSheet(sheet,html){if(game.settings.get("CoC7","overrideSheetArtwork")){if(game.settings.get("CoC7","artWorkSheetBackground"))if("null"===game.settings.get("CoC7","artWorkSheetBackground").toLowerCase())sheet.element.css("--main-sheet-bg","url( './assets/images/void.webp')");else if(sheet.element.css("--main-sheet-bg",game.settings.get("CoC7","artWorkSheetBackground")),"slice"!==game.settings.get("CoC7","artWorkSheetBackgroundType")){let styleSheet,cssRuleIndex;for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href?.endsWith("coc7g.css")){styleSheet=document.styleSheets[i];break}if(styleSheet)for(let i=0;i<styleSheet.rules.length;i++)if(".sheetV2.character form"===styleSheet.rules[i].selectorText){cssRuleIndex=i;break}if(cssRuleIndex){const CSSStyle=styleSheet.rules[cssRuleIndex].style;switch(CSSStyle.removeProperty("border-image"),CSSStyle.setProperty("background",game.settings.get("CoC7","artWorkSheetBackground")),game.settings.get("CoC7","artWorkSheetBackgroundType")){case"auto":default:CSSStyle.setProperty("background-size","auto");break;case"contain":CSSStyle.setProperty("background-size","contain");break;case"cover":CSSStyle.setProperty("background-size","cover")}}}if(game.settings.get("CoC7","artWorkOtherSheetBackground")&&("null"===game.settings.get("CoC7","artWorkOtherSheetBackground").toLowerCase()?sheet.element.css("--other-sheet-bg","url( './assets/images/void.webp')"):sheet.element.css("--other-sheet-bg",game.settings.get("CoC7","artWorkOtherSheetBackground"))),game.settings.get("CoC7","artworkSheetImage")&&("null"===game.settings.get("CoC7","artworkSheetImage").toLowerCase()?sheet.element.css("--main-sheet-image","url( './assets/images/void.webp')"):sheet.element.css("--main-sheet-image",game.settings.get("CoC7","artworkSheetImage"))),game.settings.get("CoC7","artworkFrontColor")&&sheet.element.css("--main-sheet-front-color",game.settings.get("CoC7","artworkFrontColor")),game.settings.get("CoC7","artworkBackgroundColor")&&sheet.element.css("--main-sheet-back-color",game.settings.get("CoC7","artworkBackgroundColor")),game.settings.get("CoC7","artworkInteractiveColor")&&sheet.element.css("--main-sheet-interactive-color",game.settings.get("CoC7","artworkInteractiveColor")),game.settings.get("CoC7","artworkFixedSkillLength")||(sheet.element.css("--skill-length","auto"),sheet.element.css("--skill-specialization-length","auto")),game.settings.get("CoC7","artworkMainFont")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFont")).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontBold")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFontBold"),{weight:"bold"}).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontSize")){const size=`${game.settings.get("CoC7","artworkMainFontSize")}px`;size!==$(":root").css("font-size")&&$(":root").css("font-size",size)}}if(void 0!==sheet.actor?.system.pannel)for(const[key,value]of Object.entries(sheet.actor.system.pannel)){const pannelClass=chatHelper.camelCaseToHyphen(key),pannel=html.find(`.pannel.${pannelClass}`);value.expanded?pannel.addClass("expanded"):pannel.removeClass("expanded")}}}class CoC7Combat{static renderCombatTracker(app,html,data){const currentCombat=data.combats[data.currentIndex-1];currentCombat&&(html.find(".combatant").each(((i,el)=>{const combId=el.getAttribute("data-combatant-id"),combatantControlsDiv=el.querySelector(".combatant-controls"),combatant=currentCombat.combatants.get(combId);if(combatant.getFlag("CoC7","hasGun")?$(combatantControlsDiv).prepend(`<a class="combatant-control active add-init" title="${game.i18n.localize("CoC7.PutGunAway")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`):$(combatantControlsDiv).prepend(`<a class="combatant-control add-init" title="${game.i18n.localize("CoC7.DrawGun")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`),"optional"===game.settings.get("CoC7","initiativeRule")&&game.settings.get("CoC7","displayInitAsText")){if(combatant.initiative){const tokenInitiative=el.querySelector(".token-initiative"),initiativeTest=tokenInitiative.querySelector(".initiative"),roll=100*combatant.initiative-100*Math.floor(combatant.initiative);switch(Math.floor(combatant.initiative)){case CoC7Check.successLevel.fumble:tokenInitiative.classList.add("fumble"),initiativeTest.innerText=game.i18n.localize("CoC7.Fumble"),initiativeTest.title=roll;break;case CoC7Check.successLevel.failure:tokenInitiative.classList.add("failure"),initiativeTest.innerText=game.i18n.localize("CoC7.Failure"),initiativeTest.title=roll;break;case CoC7Check.successLevel.regular:tokenInitiative.classList.add("regular-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyRegular"),initiativeTest.title=roll;break;case CoC7Check.successLevel.hard:tokenInitiative.classList.add("hard-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyHard"),initiativeTest.title=roll;break;case CoC7Check.successLevel.extreme:tokenInitiative.classList.add("extreme-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyExtreme"),initiativeTest.title=roll;break;case CoC7Check.successLevel.critical:tokenInitiative.classList.add("critical"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyCritical"),initiativeTest.title=roll}}}else if(combatant.initiative<0){const h4=el.querySelector(".token-name").querySelector("h4"),span=el.querySelector("span.initiative");h4.style.fontWeight="900",h4.style.textShadow="1px 1px 4px darkred",span.style.fontWeight="900",span.style.textShadow="1px 1px 4px darkred",el.style.color="darkred",el.style.background="black",el.style.fontWeight="900"}})),html.find(".add-init").click((event=>CoC7Combat._onToggleGun(event))))}static async _onToggleGun(event){event.preventDefault(),event.stopPropagation();const li=event.currentTarget.closest(".combatant"),c=await game.combat.combatants.get(li.dataset.combatantId);c.actor.isOwner&&(c.getFlag("CoC7","hasGun")?await c.setFlag("CoC7","hasGun",!1):await c.setFlag("CoC7","hasGun",!0));const newInit=await c.actor.rollInitiative(!!c.getFlag("CoC7","hasGun"));c.getFlag("CoC7","hasGun")?c.initiative<newInit&&game.combat.setInitiative(c.id,newInit):game.combat.setInitiative(c.id,newInit)}}async function rollInitiative(ids,{formula=null,updateTurn=!0,messageOptions={}}={}){const updates=[];for(const[,id]of ids.entries()){const combatant=this.combatants.get(id),roll=await combatant.actor.rollInitiative(!!combatant.getFlag("CoC7","hasGun"));updates.push({_id:id,initiative:roll})}return updates.length?(await this.updateEmbeddedDocuments("Combatant",updates),this):this}class CoCIDBatch extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-batch.hbs",width:700,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!1,submitOnChange:!1})}async getData(){const sheetData=super.getData();return sheetData.foundKeys=Object.keys(sheetData.object.foundKeys).reduce(((out,key)=>(out.push({name:key,key:sheetData.object.foundKeys[key]}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.missingNames=Object.keys(sheetData.object.missingNames).reduce(((out,key)=>(out.push({key:sheetData.object.foundKeys[key]??"",name:key,custom:sheetData.object.missingNames[key],suffix:sheetData.object.missingNames[key].replace(this.object.suffixRegExp,"")}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData}activateListeners(html){super.activateListeners(html),html.find(".existing").change(this.onSetName.bind(this)),html.find(".fa-wand-magic").click(this.onClickGuess.bind(this)),html.find("input").keyup(this.onKeyup.bind(this))}onSetName(event){const obj=$(event.currentTarget);this.object.missingNames[obj.closest("li").data("name")]=obj.val(),this.render(!0)}onClickGuess(event){const name=$(event.currentTarget).closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+CoC7Utilities.toKebabCase(name),this.render(!0)}onKeyup(event){const obj=$(event.currentTarget),name=obj.closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+obj.val()}async _updateObject(event,formData){event.submitter&&(this.object.typeName===game.i18n.localize("CoC7.Entities.Skill")&&(this.close(),await CoCIDBatch.processSkillKeys(this.object.updateList,this.object.missingNames)),this.object.resolve(!0))}static async processSkillKeys(updateList,missingNames){const items=[],actors={},scenes={};for(const update of updateList){update.cocidFlag.id=missingNames[update.name],void 0===update.cocidFlag.lang&&(update.cocidFlag.lang=game.i18n.lang),void 0===update.cocidFlag.priority&&(update.cocidFlag.priority=0),void 0===update.cocidFlag.eras&&(update.cocidFlag.eras={});const flags=flattenObject({flags:{CoC7:{cocidFlag:update.cocidFlag}}});if(void 0!==update.scene){if(void 0===scenes[update.scene]){const scene=game.scenes.get(update.scene);scenes[update.scene]=scene.toObject()}const tokenOffset=scenes[update.scene].tokens.findIndex((t=>t._id===update.token));if(tokenOffset>-1){const itemOffset=scenes[update.scene].tokens[tokenOffset].actorData.items.findIndex((i=>i._id===update.item));if(itemOffset>-1){const expandedFlags=expandObject(Object.entries(flags).reduce(((out,entry)=>(entry[0].match(/^flags\.CoC7\.cocidFlag/)&&(out[entry[0]]=entry[1]),out)),{}));scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset]=mergeObject(scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset],expandedFlags)}}}else if(void 0!==update.actor){void 0===actors[update.actor]&&(actors[update.actor]=[]);const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);actors[update.actor].push(item)}else{const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);items.push(item)}}if(items.length&&await Item.updateDocuments(items),Object.keys(actors).length)for(const actorId of Object.keys(actors))await Item.updateDocuments(actors[actorId],{parent:game.actors.get(actorId)});if(Object.keys(scenes).length)for(const sceneId of Object.keys(scenes)){game.scenes.get(sceneId).update(scenes[sceneId])}return!0}static async populateSkillKeys(updateList,missingNames,foundKeys){for(const actor of game.actors.contents){const actorData=actor.toObject();if(actorData.items)for(const item of actorData.items){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({actor:actor._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}for(const item of game.items.contents){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}for(const scene of game.scenes){const sceneData=scene.toObject();for(const token of sceneData.tokens??[])if(token.actorId&&!token.actorLink){const actorData=duplicate(token.actorData);for(const item of actorData.items??[]){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({scene:sceneData._id,token:token._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}}if(Object.keys(missingNames).filter((key=>""===missingNames[key])).length>0){const items=await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\.skill\./,type:"i",era:!1});for(const item of items)foundKeys[item.name]=item.flags.CoC7.cocidFlag.id;for(const key in flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys??{}))foundKeys[game.i18n.format("CoC7.CoCIDFlag.keys."+key)]=key;for(const name in missingNames)void 0!==foundKeys[name]&&(missingNames[name]=foundKeys[name])}}static async create(type){const updateList=[],missingNames={},foundKeys={};let typeName="",idPrefix="",suffixRegExp=null;return"skill"===type&&(typeName=game.i18n.localize("CoC7.Entities.Skill"),idPrefix="i.skill.",suffixRegExp=/^i\.skill\./,await CoCIDBatch.populateSkillKeys(updateList,missingNames,foundKeys),0===Object.keys(missingNames).filter((key=>""===missingNames[key])).length?(await CoCIDBatch.processSkillKeys(updateList,missingNames),!0):new Promise((resolve=>{new CoCIDBatch({typeName,idPrefix,suffixRegExp,updateList,missingNames,foundKeys,resolve}).render(!0)})))}}class Updater{static async checkForUpdate(){let systemUpdateVersion=game.settings.get("CoC7","systemUpdateVersion");game.actors.size+game.scenes.size+game.items.size+game.journal.size+game.tables.size===0&&(systemUpdateVersion=game.system.version,await game.settings.set("CoC7","systemUpdateVersion",systemUpdateVersion));const runMigrate=isNewerVersion(game.system.version,systemUpdateVersion??"0");this.updatedModules=game.settings.get("CoC7","systemUpdatedModuleVersion")||{},this.currentModules={};for(const pack of game.packs)if(!["CoC7","world"].includes(pack.metadata.packageName)&&["Actor","Item","Scene"].includes(pack.metadata.type)&&!Object.prototype.hasOwnProperty.call(this.currentModules,pack.metadata.packageName)){const module=game.modules.get(pack.metadata.packageName);module&&(!runMigrate&&Object.prototype.hasOwnProperty.call(this.updatedModules,module.id)&&String(this.updatedModules[module.id])===String(module.version)||(this.currentModules[module.id]=module.version))}(runMigrate||Object.keys(this.currentModules).length>0)&&(game.user.isGM?new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format(0===Object.keys(this.currentModules).length?"CoC7.Migrate.Message":"CoC7.Migrate.WithModulesMessage",{version:game.system.version,modules:"<ul><li>"+Object.keys(this.currentModules).map((mod=>game.modules.get(mod).title)).join("</li><li>")+"</li></ul>"}),buttons:{update:{label:game.i18n.localize("CoC7.Migrate.ButtonUpdate"),callback:async()=>Updater.update()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0):new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.GMRequired",{version:game.system.version}),buttons:{OK:{label:game.i18n.localize("CoC7.Migrate.ButtonOkay")}}}).render(!0))}static async update(){await this.updateDocuments(),game.settings.get("CoC7","pulpRules")&&(game.settings.set("CoC7","pulpRuleDoubleMaxHealth",!0),game.settings.set("CoC7","pulpRuleDevelopmentRollLuck",!0),game.settings.set("CoC7","pulpRuleArchetype",!0),game.settings.set("CoC7","pulpRuleOrganization",!0),game.settings.set("CoC7","pulpRuleTalents",!0),game.settings.set("CoC7","pulpRuleFasterRecovery",!0),game.settings.set("CoC7","pulpRuleIgnoreMajorWounds",!0),game.settings.set("CoC7","pulpRuleIgnoreAgePenalties",!0)),await CoCIDBatch.create("skill");const settings=mergeObject(this.updatedModules||{},this.currentModules);game.settings.set("CoC7","systemUpdatedModuleVersion",settings),game.settings.set("CoC7","systemUpdateVersion",game.system.version),ui.notifications.info(game.i18n.format("CoC7.Migrate.Complete"),{permanent:!0})}static async updateDocuments(){for(const actor of game.actors.contents)try{const updateData=this.migrateActorData(actor.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Actor document ${actor.name}`),await actor.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorActor",{name:actor.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const item of game.items.contents)try{const updateData=Updater.migrateItemData(item.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Item document ${item.name}`),await item.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorItem",{name:item.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const table of game.tables.contents)try{const updateData=Updater.migrateTableData(table.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Table document ${table.name}`),await table.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorTable",{name:table.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const macro of game.macros.contents)try{const updateData=Updater.migrateMacroData(macro.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Macro document ${macro.name}`),await macro.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorMacro",{name:macro.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const scene of game.scenes)try{const updateData=Updater.migrateSceneData(scene);foundry.utils.isEmpty(updateData)||(console.log(`Migrating Scene document ${scene.name}`),await scene.update(updateData,{enforceTypes:!1})),scene.tokens.forEach((t=>t._actor=null))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorScene",{name:scene.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const pack of game.packs)"CoC7"!==pack.metadata.packageName&&["Actor","Item","Macro","RollTable","Scene"].includes(pack.metadata.type)&&await Updater.migrateCompendiumData(pack)}static migrateActorData(actor){const updateData={};if(Updater._migrateActorCharacterSanity(actor,updateData),Updater._migrateActorArtwork(actor,updateData),Updater._migrateActorKeeperNotes(actor,updateData),Updater._migrateActorNpcCreature(actor,updateData),Updater._migrateActorStatusEffectActive(actor,updateData),Updater._migrateActorSanLossReasons(actor,updateData),Updater._migrateActorMonetary(actor,updateData),actor.items){const items=actor.items.reduce(((arr,i)=>{const itemData=i instanceof CONFIG.Item.documentClass?i.toObject():i,itemUpdate=Updater.migrateItemData(itemData);return foundry.utils.isEmpty(itemUpdate)||(itemUpdate._id=itemData._id,arr.push(expandObject(itemUpdate))),arr}),[]);items.length>0&&(updateData.items=items)}return updateData}static async migrateCompendiumData(pack){const documentType=pack.metadata.type;if(!["Actor","Item","Macro","RollTable","Scene"].includes(documentType))return;const wasLocked=pack.locked;await pack.configure({locked:!1});try{await pack.migrate()}catch(err){console.log("pack migrate failed",pack,err)}const documents=await pack.getDocuments();for(const doc of documents){let updateData={};try{switch(documentType){case"Actor":updateData=Updater.migrateActorData(doc.toObject());break;case"Item":updateData=Updater.migrateItemData(doc.toObject());break;case"Macro":updateData=Updater.migrateMacroData(doc.toObject());break;case"RollTable":updateData=Updater.migrateTableData(doc.toObject());break;case"Scene":updateData=Updater.migrateSceneData(doc)}foundry.utils.isEmpty(updateData)||(console.log(`Migrated ${documentType} document ${doc.name} in Compendium ${pack.collection}`),await doc.update(updateData))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorDocumentPack",{name:doc.name,collection:pack.collection,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}}await pack.configure({locked:wasLocked})}static migrateItemData(item){const updateData={};return Updater._migrateItemEmbeddedv10(item,updateData),Updater._migrateItemExperience(item,updateData),Updater._migrateItemArtwork(item,updateData),Updater._migrateItemBookAutomated(item,updateData),Updater._migrateItemKeeperNotes(item,updateData),Updater._migrateItemSpellAutomated(item,updateData),Updater._migrateItemKeeperNotesMerge(item,updateData),Updater._migrateItemEras(item,updateData),Updater._migrateItemv10(item,updateData),Updater._migrateItemBookUnits(item,updateData),updateData}static migrateMacroData(table){const updateData={};return Updater._migrateMacroArtwork(table,updateData),updateData}static migrateTableData(table){const updateData={};return Updater._migrateTableArtwork(table,updateData),updateData}static migrateSceneData(scene){const returns={tokens:[]};return void 0!==scene.tokens&&scene.tokens.length&&(returns.tokens=scene.tokens.map((token=>{const t=token.toObject(),updateData={};if(Updater._migrateTokenArtwork(t,updateData),Object.keys(updateData).length&&foundry.utils.mergeObject(t,updateData),!t.actorId||t.actorLink)t.actorData={};else if(game.actors.has(t.actorId)){if(!t.actorLink){const actorData=foundry.utils.duplicate(t.actorData);actorData.type=token.actor?.type;const update=Updater.migrateActorData(actorData);["items","effects"].forEach((embeddedName=>{if(!update[embeddedName]?.length)return;const updates=new Map(update[embeddedName].map((u=>[u._id,u])));t.actorData[embeddedName].forEach((original=>{const update=updates.get(original._id);update&&mergeObject(original,update)})),delete update[embeddedName]})),mergeObject(t.actorData,update)}}else t.actorId=null,t.actorData={};return t}))),returns}static _migrateItemKeeperNotes(item,updateData){return["archetype","chase","item","occupation","setup","skill","spell","status","talent","weapon"].includes(item.type)&&("string"==typeof item.system.description?updateData["system.description"]={value:item.system.description,keeper:""}:void 0===item.system.description||null===item.system.description?updateData["system.description"]={value:"",keeper:""}:void 0===item.system.description.keeper&&(updateData["system.description.keeper"]="")),updateData}static _migrateItemExperience(item,updateData){return"skill"===item.type&&void 0===item.system.adjustments?.experience&&(updateData["system.adjustments.experience"]=0),updateData}static _migrateItemArtwork(item,updateData){let image=String(item.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),"setup"===item.type)for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].img="systems/CoC7/assets/icons/"+image[1]))}else if("book"===item.type)for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.spells"]&&(updateData["system.spells"]=item.system.spells),updateData["system.spells"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));return updateData}static _migrateItemSpellAutomated(item,updateData){"spell"===item.type&&void 0!==item.system.cost&&(updateData["system.castingTime"]=item.system.castingTime||"",updateData["system.costs.hitPoints"]=item.system.cost.hp||0,updateData["system.costs.magicPoints"]=item.system.cost.mp||0,updateData["system.costs.sanity"]=item.system.cost.san||0,updateData["system.costs.power"]=item.system.cost.pow||0,updateData["system.costs.others"]="",updateData["system.-=cost"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null)}static _migrateItemBookAutomated(item,updateData){return"book"===item.type&&void 0!==item.system.description.unidentified&&(updateData["system.author"]=item.system.author||"",updateData["system.date"]=item.system.date||"",updateData["system.language"]=item.system.language||"",updateData["system.sanityLoss"]=item.system.sanLoss||0,updateData["system.mythosRating"]=Number(item.system.mythosRating)||0,updateData["system.content"]=item.system.description.unidentified,updateData["system.description.keeper"]=item.system.description.notes,updateData["system.difficultyLevel"]="regular",updateData["system.fullStudies"]=0,updateData["system.initialReading"]=!1,updateData["system.keeperNotes"]="",updateData["system.gains.cthulhuMythos.initial"]=Number(item.system.gain.cthulhuMythos.CMI)||0,updateData["system.gains.cthulhuMythos.final"]=Number(item.system.gain.cthulhuMythos.CMF)||0,updateData["system.gains.occult"]=Number(item.system.gain.occult)||0,updateData["system.gains.others"]=[],updateData["system.study"]={necessary:Number(item.system.weeksStudyTime)||0,progress:0,units:"CoC7.weeks"},updateData["system.-=sanLoss"]=null,updateData["system.-=weeksStudyTime"]=null,updateData["system.-=gain"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null,updateData["system.gains.-=other"]=null,updateData["system.-=properties"]=null,updateData["system.-=flags"]=null),updateData}static _migrateItemBookUnits(item,updateData){"book"===item.type&&void 0!==item.system.study.necessary&&void 0===item.system.study.units&&(updateData["system.study.units"]="CoC7.weeks")}static _migrateItemKeeperNotesMerge(item,updateData){"spell"!==item.type&&"book"!==item.type||(void 0!==item.system.notes&&(void 0!==item.system.description.keeper?updateData["system.description.keeper"]=item.system.description.keeper+item.system.notes:updateData["system.description.keeper"]=item.system.notes,updateData["system.-=notes"]=null),void 0!==item.system.keeperNotes&&(void 0!==updateData["system.description.keeper"]?updateData["system.description.keeper"]=item.system.keeperNotes+updateData["system.description.keeper"]:updateData["system.description.keeper"]=item.system.keeperNotes,updateData["system.-=keeperNotes"]=null))}static _migrateItemEmbeddedv10(item,updateData){if("occupation"===item.type){let changed=!1;for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&void 0===v.system&&(item.system.groups[o].skills[k].system=v.data,changed=!0);changed&&(updateData["system.groups"]=item.system.groups)}if(["setup"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&void 0===v.system&&(item.system.items[k].system=v.data,changed=!0);changed&&(updateData["system.items"]=item.system.items)}if(["archetype","occupation"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&void 0===v.system&&(item.system.skills[k].system=v.data,changed=!0);changed&&(updateData["system.skills"]=item.system.skills)}if(["book"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&void 0===v.system&&(item.system.spells[k].system=v.data,changed=!0);changed&&(updateData["system.spells"]=item.system.spells)}}static _migrateItemv10(item,updateData){if("skill"!==item.type||void 0!==item.system.skillName&&""!==item.system.skillName){if("setup"===item.type){for(const[k,v]of Object.entries(item.system.items))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].name=v.name,"Uniki"===updateData["system.items"][k].name&&(updateData["system.items"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.items"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.items"][k].name=parts.name,updateData["system.items"][k].system.skillName=parts.skillName,updateData["system.items"][k].system.specialization=parts.specialization}}else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].name=v.name,"Uniki"===updateData["system.groups"][o].skills[k].name&&(updateData["system.groups"][o].skills[k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.groups"][o].skills[k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.groups"][o].skills[k].name=parts.name,updateData["system.groups"][o].skills[k].system.skillName=parts.skillName,updateData["system.groups"][o].skills[k].system.specialization=parts.specialization}}else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}}else{updateData.name=item.name,"Uniki"===updateData.name&&(updateData.name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData.name,"string"==typeof item.system.specialization?.group?item.system.specialization.group:item.system.specialization);updateData.name=parts.name,updateData["system.skillName"]=parts.skillName,updateData["system.specialization"]=parts.specialization}}static _migrateItemEras(item,updateData){if(void 0!==item.system.eras){let eras={};for(const[key,value]of Object.entries(item.system.eras))if(!0===value||"string"!=typeof value&&void 0!==value.selected)switch(key){case"1920":eras.standard=!0;break;case"mdrn":eras.modern=!0,eras.modernPulp=!0;break;case"pulp":eras.pulp=!0;break;case"ddts":eras.downDarkerTrails=!0,eras.downDarkerTrailsPulp=!0;break;case"drka":eras.darkAges=!0,eras.darkAgesPulp=!0;break;case"glit":eras.gasLight=!0;break;case"nvct":eras.invictus=!0}if("setup"===item.type){const key=Object.keys(eras)[0];eras=key?{[key]:!0}:{standard:!0}}const CoC7={cocidFlag:{id:"",lang:game.i18n.lang,priority:0,eras}};void 0===item.flags?.CoC7?(item.flags.CoC7=CoC7,updateData["flags.CoC7"]=CoC7):void 0===item.flags?.CoC7?.cocidFlag?(item.flags.CoC7.cocidFlag=CoC7.cocidFlag,updateData["flags.CoC7.cocidFlag"]=CoC7.cocidFlag):(item.flags.CoC7.cocidFlag.eras=CoC7.cocidFlag.eras,updateData["flags.CoC7.cocidFlag.eras"]=CoC7.cocidFlag.eras),updateData["system.-=eras"]=null}}static _migrateActorArtwork(actor,updateData){let image=String(actor.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),void 0!==actor.prototypeToken&&void 0!==actor.prototypeToken.texture?.src&&(image=String(actor.prototypeToken.texture.src).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(updateData["prototypeToken.texture.src"]="systems/CoC7/assets/icons/"+image[1])),void 0!==actor.effects)for(const[k,v]of Object.entries(actor.effects))image=String(v.icon).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.effects&&(updateData.effects=actor.effects),updateData.effects[k].icon="systems/CoC7/assets/icons/"+image[1])}static _migrateActorKeeperNotes(actor,updateData){["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&void 0===actor.system.description&&(updateData["system.description"]={keeper:""})}static _migrateActorMonetary(actor,updateData){if("character"===actor.type&&void 0!==actor.system.credit?.multiplier){updateData["system.monetary.symbol"]=actor.system.credit?.monetarySymbol?actor.system.credit.monetarySymbol:"$",""===updateData["system.monetary.symbol"].toString().trim()&&(updateData["system.monetary.symbol"]="$");const multiplier=parseInt(actor.system.credit.multiplier)?parseInt(actor.system.credit.multiplier):1;if(updateData["system.monetary.spent"]=actor.system.credit.spent,updateData["system.monetary.assetsDetails"]=actor.system.credit.assetsDetails,updateData["system.monetary.spendingLevel"]=actor.system.credit.spendingLevel,updateData["system.monetary.cash"]=actor.system.credit.cash,updateData["system.monetary.assets"]=actor.system.credit.assets,updateData["system.monetary.values"]=duplicate(actor.system.monetary.values),1!==multiplier)for(const value of updateData["system.monetary.values"])value.cashValue=multiplier*value.cashValue,value.assetsValue=multiplier*value.assetsValue,value.spendingValue=multiplier*value.spendingValue;updateData["system.-=credit"]=null}}static _migrateActorSanLossReasons(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.encounteredCreatures){const groups={};for(const sanityLossEvent of actor.system.encounteredCreatures)sanityLossEvent.totalLoss>0&&(groups[sanityLossEvent.name]=Math.max(groups[sanityLossEvent.name]??0,sanityLossEvent.totalLoss));const sanityLossEvents=[];for(const name in groups)sanityLossEvents.push({type:name,totalLoss:groups[name],immunity:!1});updateData["system.sanityLossEvents"]=sanityLossEvents,updateData["system.-=encounteredCreatures"]=null}}static _migrateActorStatusEffectActive(actor,updateData){if(["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&(void 0!==actor.system.status||void 0===actor.system.conditions)){if(updateData["system.conditions.criticalWounds.value"]=!1,updateData["system.conditions.unconscious.value"]=!1,updateData["system.conditions.dying.value"]=!1,updateData["system.conditions.dead.value"]=!1,updateData["system.conditions.prone.value"]=!1,updateData["system.conditions.tempoInsane.value"]=!1,updateData["system.conditions.indefInsane.value"]=!1,void 0!==actor.system.status?.criticalWounds?.value&&actor.system.status?.criticalWounds.value&&(updateData["system.conditions.criticalWounds.value"]=!0),void 0!==actor.system.status?.unconscious?.value&&actor.system.status?.unconscious.value&&(updateData["system.conditions.unconscious.value"]=!0),void 0!==actor.system.status?.dying?.value&&actor.system.status?.dying.value&&(updateData["system.conditions.dying.value"]=!0),void 0!==actor.system.status?.dead?.value&&actor.system.status?.dead.value&&(updateData["system.conditions.dead.value"]=!0),void 0!==actor.system.status?.prone?.value&&actor.system.status?.prone.value&&(updateData["system.conditions.prone.value"]=!0),void 0!==actor.system.status?.tempoInsane?.value&&actor.system.status?.tempoInsane.value&&(updateData["system.conditions.tempoInsane.value"]=!0),void 0!==actor.system.status?.indefInsane?.value&&actor.system.status?.indefInsane.value&&(updateData["system.conditions.indefInsane.value"]=!0),void 0!==actor.effects){const effects=actor.effects;let changed=!1;for(let i=0,im=effects.length;i<im;i++){const effect=effects[i],match=effect.icon.match(/\/(hanging-spider|tentacles-skull|arm-sling|heart-beats|tombstone|knocked-out-stars|falling|skull|unconscious)\./);if(null!==match){let statusId="";switch(match[1]){case"hanging-spider":statusId="tempoInsane";break;case"tentacles-skull":statusId="indefInsane";break;case"arm-sling":statusId="criticalWounds";break;case"heart-beats":statusId="dying";break;case"tombstone":case"skull":statusId="dead";break;case"knocked-out-stars":case"unconscious":statusId="unconscious";break;case"falling":statusId="prone"}""!==statusId&&(updateData[`system.conditions.${statusId}.value`]||(updateData[`system.conditions.${statusId}.value`]=!0,changed=!0),effect.flags.core?.statusId!==statusId&&(effects[i]=mergeObject(effect,{flags:{core:{statusId}}}),changed=!0))}}changed&&(updateData.effects=effects)}updateData["system.-=status"]=null}return updateData}static _migrateActorNpcCreature(actor,updateData){return["npc"].includes(actor.type)&&void 0!==actor.system&&(void 0===actor.system.special&&(updateData["system.special"]={checkPassed:null,checkFailled:null}),void 0===actor.system.attacksPerRound&&(updateData["system.attacksPerRound"]=1)),updateData}static _migrateActorCharacterSanity(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.attribs?.san){const oneFifthSanity=Math.ceil(actor.system.attribs.san.value/5);void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.attribs.san.oneFifthSanity&&null!==actor.system.attribs.san.oneFifthSanity||(updateData["system.attribs.san.oneFifthSanity"]=" / "+oneFifthSanity),void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.value&&null!==actor.system.indefiniteInsanityLevel.value||(updateData["system.indefiniteInsanityLevel.value"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.max&&null!==actor.system.indefiniteInsanityLevel.max||(updateData["system.indefiniteInsanityLevel.max"]=oneFifthSanity),void 0!==actor.system.attribs.mp&&(void 0!==actor.system.attribs.mp.value&&null!==actor.system.attribs.mp.value||(updateData["system.attribs.mp.value"]=oneFifthSanity),void 0!==actor.system.attribs.mp.max&&null!==actor.system.attribs.mp.max||(updateData["system.attribs.mp.max"]=oneFifthSanity)),void 0!==actor.system.notes&&null!==actor.system.notes||(updateData["system.notes"]="")}return updateData}static _migrateMacroArtwork(table,updateData){const image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}static _migrateTableArtwork(table,updateData){let image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(table.results))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.results&&(updateData.results=table.results),updateData.results[k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateTokenArtwork(token,updateData){const image=String(token.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}}const nameCharacters="\\u3000\\u3400-\\u4DBF\\u4E00-\\u9FFF\\w\\(\\)\\-\\/&\"'"+CoC7Utilities.quoteRegExp("áéíóàèìòùÀÈÌÒÙáéíóúýÁÉÍÓÚÝâêîôûÂÊÎÔÛãñõÃĀÑÕäëïöüÿÄËÏÖÜŸàèçÇßØøÅåÆæœ“”«»ąćęłńóśźżĄĆĘŁŃÓŚŹŻ"),keys={en:{description:"CoC7.English",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:skills(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:languages)[:\n]",sectionSpells:"\n(?:spells)[:\n]",handgun:"(?<type> Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Grenade|Dynamite)",example:"Example Character, age 27\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85 SAN 55 HP 14 DB: 1D4\nBuild: 1 Move: 7 MP: 10 Luck: 40 Armor: 1\nAttacks per round: 3 SAN loss: 1d4/1d8\nCombat\nBite 50% (25/10), damage 1D6\nBrawl 30% (15/6), damage 1D3\nDerringer 40% (20/8), damage 1D8+1\nDodge 50% (25/10)\nSkills\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLanguages: English 80%, Eklo 5%.\nSpells: Summon NPC, Dispel NPC."},de:{description:"CoC7.German",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",diceShort:"w|d",fulldb:"(Schadensbonus|Sb)",halfdb:"(½|1/2 Schadensbonus|Sb/2)",sectionCombats:"\n(?:Kampf|Angriff:|ANGRIFFE)[:\n]",newCombatHeader:"\nKampf\n",sectionSkills:"\n(?:Fertigkeiten(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Sprachen)[:\n]",sectionSpells:"\n(?:Zauber)[:\n]",handgun:"(?<type> Gun|Revolver|Pistole|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Gewehr|Schrotflinte|Carabiner|Karabiner|Gauge |Lee-Enfield|Elefanten)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Granate|Dynamit)",example:"Vorname Nachname\nAlter: 29\nBeruf: Ein Beruf\nST 50\nMA 60\nKO 60\nGE 60\nGR 55\nER 65\nIN 80\nBI 85\nTrefferpunkte: 11\nGeistige Stabilität: 60\nSchadensbonus: 0\nStatur: 0\nMagiepunkte: 12\nBewegungsweite: 8\n\nKampf\nAngriffe: 1\nHandgemenge 30% (15/6), Schaden 1D3\nMesser 30% (15/6), Schaden 1D4\nAusweichen 30% (15/6)\n\nFertigkeiten: Anthropologie 70% (35/14), Archäologie 30% (15/6), Bibliotheksnutzung 50% (25/10), Erste Hilfe 50% (25/10), Finanzkraft 40% (20/8), Geschichte 60% (30/12), Klettern 50% (25/10)\n\nSprachen: Englisch 85% (42/17); Deutsch 45% (22/9), Latein 45% (22/9)"},pl:{description:"CoC7.Polish",dbNone:"brak",armorNone:"brak",attacksPerRoundNone:"brak",sanLossNone:"brak",diceShort:"k|d",fulldb:"(Modyfikator Obrażeń|MO)",halfdb:"(½|1/2 MO|MO/2)",sectionCombats:"\n(?:Walka|Ataki)[:\n]",newCombatHeader:"\nWalka\n",sectionSkills:"\n(?:Umiejętności(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Języki)[:\n]",sectionSpells:"\n(?:Zaklęcia)[:\n]",handgun:"(?<type> Pistolet|Rewolwer|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Karabin|Strzelba|Wiatrówka|Garand|Gauge |Lee-Enfield|Strzelba na słonie)",smb:"(?<type>Pistolet maszynowy|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Mołotowa|Granat|Laska dynamitu|Dynamit)",example:"Przykładowa postać, 27 lat\nBibliotekarz\nS 75 KON 60 BC 80 ZR 70 WYG 60 INT 80\nMOC 50 WYK 85 P 55 PW 14 MO: 1D4\nKrzepa: 1 Ruch: 7 PM: 10 Szczęście: 40 Pancerz: 1\nAtaki w rundzie: 3 Utrata Poczytalności: 1K4/1K8\nWalka\nUgryzienie 50% (25/10), obrażenia 1K6\nWalka 30% (15/6), obrażenia 1K3\nDerringer 40% (20/8), obrażenia 1K8+1\nUnik 50% (25/10)\nUmiejętności\nTresura Zwierząt 55%, Urok Osobisty 30%, Pierwsza Pomoc 25%, Ukrywanie 20%,\nNasłuchiwanie 50%, Medycyna 45%, Przekonywanie 25%, Psychologia 75%,\nNauka (Astronomia) 90%, Nauka (Botanika) 35%, Nauka (Zoologia) 10%,\nSpostrzegawczość 35%, Ukrywanie 10%\nJęzyki: Angielski 80%, Eklo 5%.\nZaklęcia: Przyzwanie NPC, Odesłanie NPC."},fr:{description:"CoC7.French",dbNone:"Acune",armorNone:"(?:Acune|aucune)",attacksPerRoundNone:"Acune",sanLossNone:"Acune",fulldb:"(BD|Bonus aux dommages|Impact|Imp)",halfdb:"(½|1/2 Imp|Imp/2)",sectionCombats:"\n(?:Combat|Armes|Attaques)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:Compétences(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Langues?)\\s*[:\n]",sectionSpells:"\n(?:Sortilèges\\s*|Sorts)[:\n]",handgun:"(?<type>Revolver|Pistolet|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Carabine|Lee-Enfield|Fusil)",smb:"(?<type>SMG|Thompson)",machineGun:"(?<type>Browning|Vickers|Mitrailleuse)",launched:"(?<type>Boomerang de guerre|Javeline|Pierre|Shuriken|Bâton de dynamite|Cocktail Molotov|Grenade à main|Molotov|Grenade|Dynamite)",example:"Example Character, 27 ans\nFOR 75 CON 60 TAI 80 DEX 70 APP 60 INT 80\nPOU 50 ÉDU 85 SAN 55 PV 14 BD: 1D4\nCarrure: 1 Mvt: 7 PM: 10 Chance: 40 Armure: 1\nAttaques par round 3 Perte de SAN: 1d4/1d8\nAttaques\nBite 50% (25/10), dommage 1D6\nBrawl 30% (15/6), dommage 1D3\nDerringer 40% (20/8), dommage 1D8+1\nEsquiver 50% (25/10)\nCompétences\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLangue: English 80%, Eklo 5%.\nSortilèges: Summon NPC, Dispel NPC."},es:{description:"CoC7.Spanish",dbNone:"ninguna",armorNone:"ninguna",attacksPerRoundNone:"ninguno",sanLossNone:"no",fulldb:"(BD|bd|bonificación de daño)",halfdb:"(½|medio daño|mitad|daño a la mitad)",sectionCombats:"\n(?:Combate|Armas)[:\n]",newCombatHeader:"\nCombate\n",sectionSkills:"\n(?:Habilidades(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Idiomas|Lenguajes|Lenguas)[:\n]",sectionSpells:"\n(?:Conjuros|Hechizos)[:\n]",handgun:"(?<type>Revolver|Pistola|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Carabina|Lee-Enfield|Caza Elefantes|Fusil|Escopeta|Galga|Recortada)",smb:"(?<type>Subfusil|Thompson)",machineGun:"(?<type>Browning|Vickers|Ametralladora)",launched:"(?<type>Molotov|Granada|Dinamita)",example:"Example Character, 27 años\nFUE 75 CON 60 TAM 80 DES 70 APA 60 INT 80\nPOD 50 EDU 85 COR 55 PV 14 BD: 1D4\nCorpulencia: 1 Movimiento: 7 PM: 10 Suerte: 40 Armadura: 1\nNúmero de Ataques 3 Pérdida de cordura: 1d4/1d8\nCombate\nBite 50% (25/10), daño 1D6\nBrawl 30% (15/6), daño 1D3\nDerringer 40% (20/8), daño 1D8+1\nEsquivar 50% (25/10)\nHabilidades\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nIdiomas: English 80%, Eklo 5%.\nConjuros: Summon NPC, Dispel NPC."},"zh-TW":{description:"CoC7.TraditionalChinese",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB|傷害加值)",halfdb:"(½|half)",sectionCombats:"\n(?:combat|fighting attacks|戰鬥技能|戰鬥列表|武器)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:(?:Skills|技能列表)(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Languages|語言)[:\n]",sectionSpells:"\n(?:spells|咒文列表|咒文)[:\n]",handgun:"(?<type> 遂發槍|\\.22短口自動手槍|\\.25短口手槍(單管)|\\.32或7\\.65mm左輪手槍|\\.32或7\\.65mm自動手槍|\\.357 Magnum左輪手槍|\\.38或9mm左輪手槍|\\.38自動手槍|貝雷塔M9|格洛克17|9mm自動手槍|魯格P08|\\.41左輪手槍|\\.44馬格南左輪手槍|\\.45左輪手槍|\\.45自動手槍|沙漠之鷹|Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>步槍|卡賓槍|半自動步槍|獵象槍|Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson|衝鋒槍)",machineGun:"(?<type>Browning|Vickers|機槍)",launched:"(?<type>Molotov|Grenade|Dynamite爆炸物|手榴彈|重武器)",example:"示範角色, 年齡 27\n力量 75 體質 60 體型 80 敏捷 70 外貎 60 智力 80\n意志 50 教育 85 SAN 55 HP 14 DB: 1D4\n體格: 1 Move: 7 MP: 10 幸運: 40 護甲: 1\n攻擊次數: 3 理智喪失: 1d4/1d8\n戰鬥列表\n咬 50% (25/10), 傷害 1D6\n空手 30% (15/6), 傷害 1D3\n手槍 40% (20/8), 傷害 1D8+1\n閃避 50% (25/10)\n技能列表\n動物馴養 55%, 取悅 30%, 急救 25%, 潛行 20%,\n聆聽 50%, 藥學 45%, 精神分析 25%, 心理學 75%,\n科學 (司法科學) 90%, 科學 (密碼學) 35%, \n偵查 35%, 喬裝 10%\n語言: 粵語 80%, 讀唇 5%.\n咒文: 召喚 NPC, 指揮 NPC."}},translations={en:{age:"(?<![a-z])age(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.en.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.en.dbNone+")[,\\s\n]*",build:"(?<![a-z])Build(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor(\\s*:)?\\s+(?<armor>"+keys.en.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks)(\\s*:)?\\s+(?<attacksPerRound>"+keys.en.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss)(\\s*:)?\\s+(?<sanLoss>"+keys.en.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*damage)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.en.fulldb+"|"+keys.en.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Fighting|Firearms|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.en.sectionCombats+"|"+keys.en.sectionSkills+"|"+keys.en.sectionLangauges+"|"+keys.en.sectionSpells+")"},de:{age:"(?<![a-z])Alter(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Beruf(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])ST(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KO(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])GR(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])IN(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MA(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])GE(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])ER(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])BI(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:gS|STA|Geistige Stabilität)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:TP|Trefferpunkte)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magiepunkte)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.de.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|W\\d+)?|"+keys.de.dbNone+")[,\\s\n]*",build:"(?<![a-z])(?:Statur|Stat.)(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Panzerung(\\s*:)?\\s+(?<armor>"+keys.de.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:BW|Bewegungsweite)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Glück(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Angriffe pro Runde|Angriffe|Pro Runde)(\\s*:)?\\s+(?<attacksPerRound>"+keys.de.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Stabilitätsverlust)(\\s*:)?\\s+(?<sanLoss>"+keys.de.sanLossNone+"|\\d[DW]?[+\\d]*\\/\\d[DW]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*Schaden)?\\s+(?<damage>(:?(:?\\d+w|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.de.fulldb+"|"+keys.de.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d|w)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Ausweichen)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,;]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Angriffe|Handgemenge|Nahkampf|Faustfeuerwaffe|Beißen)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.de.sectionCombats+"|"+keys.de.sectionSkills+"|"+keys.de.sectionLangauges+"|"+keys.de.sectionSpells+")"},pl:{age:"(?<age>\\d+)\\s+(?:lata|lat|rok)[,\\s]*",occupation:"[,\\s]*Zawód(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])S(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])BC(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MOC(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])ZR(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])WYG(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])WYK(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:P|Poczytalność)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PW|Punkty Wytrzymałości)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Punkty Magii)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.pl.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|K\\d+)?|"+keys.pl.dbNone+")[,\\s\n]*",build:"(?<![a-z])Krzepa(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Pancerz(\\s*:)?\\s+(?<armor>"+keys.pl.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Ruch(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Szczęście(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Ataki w rundzie|# Ataki)(\\s*:)?\\s+(?<attacksPerRound>"+keys.pl.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Utrata Poczytalności|utrata P)(\\s*:)?\\s+(?<sanLoss>"+keys.pl.sanLossNone+"|\\d[DK]?[+\\d]*\\/\\d[DK]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*obrażenia)?\\s+(?<damage>(:?(:?\\d+k|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.pl.fulldb+"|"+keys.pl.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Unik)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Walka|Broń Palna|Bijatyka|Ugryzienie)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.pl.sectionCombats+"|"+keys.pl.sectionSkills+"|"+keys.pl.sectionLangauges+"|"+keys.pl.sectionSpells+")"},fr:{age:"(?<age>\\d+)\\s*ans(?![a-z])[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FOR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAI(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POU(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])ÉDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<!([a-z]|de\\s))(?:SAN|Santé Mentale)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Points de vie)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Points de magie)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.fr.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.fr.dbNone+")[,\\s\n]*",build:"(?<![a-z])Carrure(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])(?:Armure|Protection)(\\s*:)?\\s+(?<armor>"+keys.fr.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:Mvt|Mouvement|Déplacement)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Chance(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attaques par round)(\\s*:)?\\s+(?<attacksPerRound>"+keys.fr.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Perte de Santé mentale|Perte de SAN)(\\s*:)?\\s+(?<sanLoss>"+keys.fr.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:dommage|dégâts))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.fr.fulldb+"|"+keys.fr.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquiver?)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Au contact|À distance|Combat rapproché|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.fr.sectionCombats+"|"+keys.fr.sectionSkills+"|"+keys.fr.sectionLangauges+"|"+keys.fr.sectionSpells+")"},es:{age:"(?<age>\\d+)\\s*a[ñÑ]os(?![a-z])[,\\s]*",occupation:"[,\\s]*Ocupación(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FUE(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAM(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POD(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DES(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APA(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:COR|Cordura)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Puntos de vida|P\\. ?V\\.)(\\s*:)?\\s+(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Puntos Mágicos|Puntos de Magia)(\\s*:)?\\s+(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.es.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.es.dbNone+")[,\\s\n]*",build:"(?<![a-z])Corpulencia(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armadura(\\s*:)?\\s+(?<armor>"+keys.es.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Movimiento(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Suerte(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Número de Ataques)(\\s*:)?\\s+(?<attacksPerRound>"+keys.es.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Pérdida de cordura|Pérdida de COR)(\\s*:)?\\s+(?<sanLoss>"+keys.es.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*daño)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.es.fulldb+"|"+keys.es.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquivar)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Combatir|Armas de fuego|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.es.sectionCombats+"|"+keys.es.sectionSkills+"|"+keys.es.sectionLangauges+"|"+keys.es.sectionSpells+")"},"zh-TW":{age:"(?<![a-z])age|年齡(\\s*:)?\\s*(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR|力量(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON|體質(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ|體型(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT|智力(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW|意志(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX|敏捷(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP|外貎(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU|教育(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity|理智)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points|生命)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys["zh-TW"].fulldb+")(\\s*:)?\\s*(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys["zh-TW"].dbNone+")[,\\s\n]*",build:"(?<![a-z])Build|體格(\\s*:)?\\s*(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor|護甲(\\s*:)?\\s*(?<armor>"+keys["zh-TW"].armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck|幸運(\\s*:)?\\s*(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks|攻擊次數|# 攻擊)(\\s*:)?\\s*(?<attacksPerRound>"+keys["zh-TW"].attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss|理智喪失|SAN值損失|SAN值喪失|扣SAN)(\\s*:)?\\s*(?<sanLoss>"+keys["zh-TW"].sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:damage|傷害))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys["zh-TW"].fulldb+"|"+keys["zh-TW"].halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge|閃避|閃躲)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%?(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(近戰技能|射擊技能|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys["zh-TW"].sectionCombats+"|"+keys["zh-TW"].sectionSkills+"|"+keys["zh-TW"].sectionLangauges+"|"+keys["zh-TW"].sectionSpells+")"}};class CoC7ActorImporterRegExp{static checkLanguage(lang=null){return lang||(lang=game.i18n.lang),void 0===translations[lang]&&(lang="en"),lang}static getExampleText(lang){let example=keys.en.example;return void 0!==keys[lang]&&(example=keys[lang].example),example}static getTranslations(){const output={};for(const key in keys)output[key]=keys[key].description;return output}static getKeys(lang){return keys[lang]||keys.en}static getRegularExpressions(lang){return translations[lang]||translations.en}}class CoC7ActorImporter{constructor(){this.parsed={},this.itemLocations=""}static get asNumber(){return"n"}static get asString(){return"s"}getRegEx(regex,modifiers="iu"){return"RegExp"===regex.constructor?.name?regex:new RegExp(regex,modifiers)}cleanString(s){return s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*\.?\s*\.?$/,"")}translateRoll(s){if(void 0===s)return s;if(void 0!==this.keys.diceShort){const regEx=new RegExp("(?<n1>\\d+)"+this.keys.diceShort+"(?<n2>\\d+)","iug");return s.replace(regEx,"$<n1>D$<n2>")}return s}toHTML(s){return 0===s.trim().length||0===(s=s.trim().split("\n").map((text=>text.trim().replace(/^[,.\s]+$/,""))).filter((text=>text)).join("</p><p>")).length?"":"<p>"+s+"</p>"}check(regExKey,{removeFromText=!0,saveKeys=!0,type=CoC7ActorImporter.asString,text=!1,requiredGroup=!1}={}){let output=!1,regExp=!1;if(void 0!==this.regEx[regExKey]?regExp=this.getRegEx(this.regEx[regExKey]):void 0!==this.keys[regExKey]&&(regExp=this.getRegEx(this.keys[regExKey])),!1!==regExp){!1===text&&(text=this.text);const check=regExp.exec(text);let value=null;if(null!==check&&(!1===requiredGroup||void 0!==(check.groups||{})[requiredGroup])){if(output=check.groups||{},removeFromText&&(this.text=this.text.replace(check[0].trim(),"\n").trim()),saveKeys)for(const key of Object.keys(check.groups))switch(type){case CoC7ActorImporter.asString:this.parsed[key]=String(check.groups[key]).replace("\n"," ");break;case CoC7ActorImporter.asNumber:value=Number(check.groups[key]),isNaN(value)||(this.parsed[key]=Number(check.groups[key]))}output["-source"]=check[0],output["-index"]=check.index}}return output}processCombat(text){if(0===text.trim().length)return;let weapon,dodge,newline;CONFIG.debug.CoC7Importer&&console.log("combat text",text);let lastPercent=!1,maxLoops=40;do{if(maxLoops--,text=text.trim(),dodge=this.check("weaponDodge",{saveKeys:!1,text}))text=text.replace(dodge["-source"],"\n"),void 0===this.parsed.skills&&(this.parsed.skills=[]),this.parsed.skills.push({name:this.cleanString(dodge.name),value:Number(dodge.percentage),push:!1});else if(weapon=this.check("weapon",{saveKeys:!1,text,requiredGroup:!1===lastPercent&&"percentage"})){text=text.replace(weapon["-source"],"\n");const name=this.cleanString(weapon.name||"");let damage=this.translateRoll(this.cleanString(weapon.damage||""));const isRanged=!!(this.check("handgun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("rifle",{text:name,removeFromText:!1,saveKeys:!1})||this.check("smb",{text:name,removeFromText:!1,saveKeys:!1})||this.check("machineGun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("launched",{text:name,removeFromText:!1,saveKeys:!1}));let found;lastPercent=null===weapon.percentage||void 0===weapon.percentage||Number(weapon.percentage);let ahdb=!1,addb=!1;do{found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.halfdb+")\\s*("+this.keys.fulldb+")?[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found?(ahdb=!0,damage=damage.replace(found[0],"")):(found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.fulldb+")\\s*[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found&&(addb=!0,damage=damage.replace(found[0],"")))}while(found);const damages=damage.split("/"),isShotgun=3===damages.length,data={name,type:"weapon",system:{skill:{id:lastPercent},properties:{},range:{normal:{value:isShotgun?10:0,damage:damages[0]},long:{value:isShotgun?20:0,damage:isShotgun?damages[1]:""},extreme:{value:isShotgun?50:0,damage:isShotgun?damages[2]:""}}}};data.system.properties.shotgun=isShotgun,data.system.properties.rngd=isRanged||isShotgun,data.system.properties.melee=!data.system.properties.rngd,data.system.properties.ahdb=ahdb,data.system.properties.addb=addb,void 0===this.parsed.attacks&&(this.parsed.attacks=[]),this.parsed.attacks.push(data)}else(newline=text.match(/^(.+)\n/))?text=text.replace(newline[0],"\n"):(newline=text.match(/^[^\n]+$/))&&(text="")}while(maxLoops>0&&(weapon||dodge||text));0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedWeaponText")),console.debug("Unexpected weapons:",text))}processSkills(text,key="skills"){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);let skill;breaks.length>1&&(text=breaks[0]);let maxLoops=40;do{maxLoops--,text=text.trim(),skill=this.check("skill",{saveKeys:!1,text}),skill&&(text=text.replace(skill["-source"],"\n"),void 0===this.parsed[key]&&(this.parsed[key]=[]),this.parsed[key].push({name:this.cleanString(skill.name),value:Number(skill.percentage)}))}while(maxLoops>0&&skill);0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedSkillsText")),console.debug("Unexpected skills:",text))}processSpells(text){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);breaks.length>1&&(text=breaks[0]);const spellsArr=text.replace(/([\n\r]+)/g," ").split(/(?<!\([^)]+),/);this.text=this.text.replace(text.trim(),"\n");for(const spell of spellsArr)void 0===this.parsed.spells&&(this.parsed.spells=[]),this.parsed.spells.push(this.cleanString(spell))}async parseCharacter(text){this.text=String(text).trim().replace(/\u2013|\u2014|\u2212/g,"-").replace(/\u2019/g,"'").replace(/[\udbc0-\udbfe][\udc00-\udfff]/g,"");let header,min=this.text.length,check=this.check("str",{type:CoC7ActorImporter.asNumber})["-index"];if(isNaN(check)||(min=Math.min(min,check)),check=this.check("con",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("siz",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("int",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("pow",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("dex",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("app",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("edu",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("san",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("hp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("mp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),min>0){if(header=this.text.substr(0,min),check=this.check("name",{text:header}),!1===check?this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter"):header=header.replace(check["-source"],"\n"),check=this.check("age",{text:header}),!1!==check&&(header=header.replace(check["-source"],"\n")),!this.check("occupation",{text:header})&&""!==header.trim()){let occupation=header;header.indexOf(".")>-1&&(occupation=header.substr(0,header.indexOf(".")+1)),this.parsed.occupation=occupation.replace(/([\n\r]+)/g," ").trim().replace(/,$/,""),this.text=this.text.replace(occupation.trim(),"\n")}}else this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter");if(void 0!==this.parsed.occupation&&void 0===this.parsed.age){const occupationAge=this.parsed.occupation.match(/^(?<age>\d+),(?<occupation>.+)$/);occupationAge&&(this.parsed.age=occupationAge.groups.age,this.parsed.occupation=occupationAge.groups.occupation.trim())}this.check("db")&&!this.check("dbNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.db})||(this.parsed.db="0"),this.parsed.db=this.translateRoll(this.parsed.db),this.check("build"),this.check("armor")&&!this.check("armorNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.armor})||(this.parsed.armor="0"),this.check("mov",{type:CoC7ActorImporter.asNumber}),this.check("lck",{type:CoC7ActorImporter.asNumber}),this.check("sanLoss"),this.parsed.sanLoss=this.translateRoll(this.parsed.sanLoss),this.check("attacksPerRound")&&this.check("attacksPerRoundNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.attacksPerRound})&&(this.parsed.attacksPerRound="0"),this.text="\n"+this.text;let sections=this.getRegEx("("+this.keys.sectionCombats+")","i");null===this.text.match(sections)&&(sections=this.check("guessStartCombat",{saveKeys:!1,removeFromText:!1}),sections&&(this.text=[this.text.slice(0,sections["-index"]),this.keys.newCombatHeader,this.text.slice(sections["-index"])].join("")));const regExpSections=this.getRegEx(this.regEx.sections,"i");if(sections=this.text.split(regExpSections),null!==sections)for(let i=0,im=sections.length;i<im;i++)null!==sections[i].match(this.getRegEx("("+this.keys.sectionCombats+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processCombat(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSkills+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionLangauges+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1],"languages"),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSpells+")","i"))&&void 0!==sections[i+1]&&(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSpells(sections[i+1]),i++);return this.parsed.gmnotes=this.toHTML(this.text),this.parsed}disableAttribAuto(key,attribValue,check,updateData){const value=Math.max(0,Number(attribValue));return value!==Number(check)&&(updateData[`system.attribs.${key}.auto`]=!1,updateData[`system.attribs.${key}.value`]=value,"build"===key?updateData[`system.attribs.${key}.current`]=value:updateData[`system.attribs.${key}.max`]=value),updateData}async createEntity(characterData,entityType){const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();"npc"!==entityType&&(entityType="creature");const actorData={name:characterData.name,type:entityType,folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);await npc.createEmbeddedDocuments("Item",characterData.items,{renderSheet:!1});const updateData={};let value=0;void 0!==characterData.actor.attribs.hp?.value&&this.disableAttribAuto("hp",characterData.actor.attribs.hp.value,npc.hpMax,updateData),void 0!==characterData.actor.attribs.mp?.value&&this.disableAttribAuto("mp",characterData.actor.attribs.mp.value,npc.mpMax,updateData),void 0!==characterData.actor.attribs.mov?.value&&this.disableAttribAuto("mov",characterData.actor.attribs.mov.value,npc.mov,updateData),void 0!==characterData.actor.attribs.build?.value&&this.disableAttribAuto("build",characterData.actor.attribs.build.value,npc.build,updateData),void 0!==characterData.actor.attribs.db?.value&&(value=String(characterData.actor.attribs.db.value).replace(/^\+\s*/,""),value!==String(npc.db)&&(updateData["system.attribs.db.auto"]=!1,updateData["system.attribs.db.value"]=value)),Object.keys(updateData).length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateData:",updateData),await npc.update(updateData));const updateItemData=[];let lastWeaponSkill=null;for(const pair of this.weaponSkills){!1!==pair[0]&&(lastWeaponSkill=npc.items.filter((i=>i.name===pair[0].name&&"skill"===i.type&&Number(i.system.value)===Number(pair[0].system.value))));const weapon=npc.items.filter((i=>i.name===pair[1].name&&"weapon"===i.type&&i.system.range.normal.damage===pair[1].system.range.normal.damage));lastWeaponSkill[0]&&weapon[0]&&updateItemData.push({_id:weapon[0].id,"system.skill.main.id":lastWeaponSkill[0].id,"system.skill.main.name":lastWeaponSkill[0].name})}return updateItemData.length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateItemData:",updateItemData),await npc.updateEmbeddedDocuments("Item",updateItemData)),npc}actorData(pc){const data={characteristics:{},attribs:{},infos:{},special:{},description:{keeper:""},flags:{locked:!1,displayFormula:!1}};for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==pc[key]&&(data.characteristics[key]={value:Number(pc[key])});for(const key of["san","mov","build","armor","lck","hp","mp"])void 0!==pc[key]&&(data.attribs[key]={value:Number(pc[key])});void 0!==pc.db&&(data.attribs.db={value:pc.db});for(const key of["age","occupation"])void 0!==pc[key]&&(data.infos[key]=pc[key]);if(void 0!==pc.sanLoss){const[passed,failed]=pc.sanLoss.split("/");data.special.sanLoss={checkPassed:passed,checkFailled:failed}}return void 0!==pc.attacksPerRound&&(data.special.attacksPerRound=Number(pc.attacksPerRound)),data.description.keeper=pc.gmnotes,CONFIG.debug.CoC7Importer&&console.debug("actorData:",data),data}async itemsData(pc){const items=[];if(this.weaponSkills=[],void 0!==pc.attacks)for(const attack of pc.attacks){let skill=!1;!0!==attack.system?.skill?.id&&(skill=await this.weaponSkill(attack),items.push(skill)),attack.system.skill.id=null,items.push(attack),this.weaponSkills.push([skill,attack])}if(void 0!==pc.skills)for(const skill of pc.skills){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,void 0!==skill.push&&(cloned.system.properties.push=skill.push),items.push(duplicate(cloned))}else{const options={};void 0!==skill.push&&(options.push=skill.push),items.push(CoCActor.emptySkill(skill.name,skill.value,options))}}if(void 0!==pc.languages)for(const skill of pc.languages){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,items.push(duplicate(cloned))}else items.push(CoCActor.emptySkill(skill.name,skill.value,{img:CoC7Item.iconLanguage,specialization:"Language"}))}if(void 0!==pc.spells)for(const name of pc.spells){const existing=await CoC7Utilities.guessItem("spell",name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();items.push(duplicate(cloned))}else items.push(CoCActor.emptySpell(name))}return items}async weaponSkill(weapon){let skill=null;if(this.getRegEx("handgun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Handgun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Handgun skill: ${skill}`)):this.getRegEx("rifle").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Rifle/Shotgun",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Rifle",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Shotgun",{combat:!0,source:this.itemLocations}))),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Rifle skill: ${skill}`)):this.getRegEx("smb").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Submachine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Submachine Gun skill: ${skill}`)):this.getRegEx("machineGun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Machine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Machine Gun skill: ${skill}`)):this.getRegEx("launched").exec(weapon.name)&&(skill=await CoC7Utilities.guessItem("skill","Launch",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Launch skill: ${skill}`)),null!=skill){return skill.clone({system:{value:weapon.system?.skill?.id}})}const firearms=weapon.system?.properties?.rngd,parts=CoC7Item.getNamePartsSpec(weapon.name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),newSkill={type:"skill",name:parts.name,system:{skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0},base:weapon.system?.skill?.id,value:weapon.system?.skill?.id}};return CONFIG.debug.CoC7Importer&&console.debug(`Weapon skill not found for ${weapon.name}, creating a new one`,newSkill),newSkill}needsConversion(npc){let needsConversionResult=!0;for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==npc[key]&&npc[key]>30&&(needsConversionResult=!1);return CONFIG.debug.CoC7Importer&&console.debug("needsConversion:",needsConversionResult),needsConversionResult}async createActor(inputs){CONFIG.debug.CoC7Importer&&console.debug("createActor:",inputs);const lang=CoC7ActorImporterRegExp.checkLanguage(inputs.lang);this.keys=CoC7ActorImporterRegExp.getKeys(lang),this.regEx=CoC7ActorImporterRegExp.getRegularExpressions(lang),this.itemLocations=inputs.source,CONFIG.debug.CoC7Importer&&console.debug("Regular Expressions:",lang,this.keys,this.regEx);let character=await this.parseCharacter(inputs.text);CONFIG.debug.CoC7Importer&&console.debug("parseCharacter:",character),("coc-guess"===inputs.convertFrom6E&&this.needsConversion(character)||"coc-convert"===inputs.convertFrom6E)&&(character=await this.convert7E(character));const characterData={name:character.name,actor:this.actorData(character),items:await this.itemsData(character)};if(void 0!==inputs.testMode&&!0===inputs.testMode)return characterData;return await this.createEntity(characterData,inputs.entity)}async convert7E(creature){CONFIG.debug.CoC7Importer&&console.debug("Converting npc",creature);for(const key of["str","con","siz","dex","app","int","pow"])void 0!==creature[key]&&(creature[key]*=5);return void 0!==creature.edu&&(creature.edu<=18?creature.edu*=5:creature.edu<=26?creature.edu=creature.edu+90-18:creature.edu=99),void 0!==creature.db&&("-1d4"===creature.db?creature.db=-1:"-1d6"===creature.db&&(creature.db=-2)),CONFIG.debug.CoC7Importer&&console.debug("convert7E: ",creature),creature}}class CoC7DirectoryPicker extends FilePicker{get title(){return game.i18n.localize("CoC7.PickDirectory")}_onSubmit(event){event.preventDefault();const path=event.target.target.value,activeSource=this.activeSource,bucket=event.target.bucket?event.target.bucket.value:null;this.field.value=CoC7DirectoryPicker.format({activeSource,bucket,path}),this.close()}static DefaultDirectory(val){return null===val?"":String(val)}static format(value){return null!==value.bucket?`[${value.activeSource}:${value.bucket}] ${value.path}`:`[${value.activeSource}] ${value.path}`}static parse(raw){const str=raw??"",matches=str.match(/^\[([^:]+)(:(.+))?\]\s*(.+)?$/u);return matches?{activeSource:matches[1],bucket:matches[3]??"",current:matches[4]}:{activeSource:"data",bucket:null,current:str}}static processHtml(html){$(html).find('input[data-dtype="DefaultDirectory"]').each(((i,el)=>{const input=$(el);if(input.prop("readonly",!0),!input.next().length){const picker=new CoC7DirectoryPicker({field:input[0],...CoC7DirectoryPicker.parse(input.val())}),pickerButton=$('<button type="button" class="file-picker" title="'+game.i18n.localize("CoC7.PickDirectory")+'"><i class="fas fa-file-import fa-fw"></i></button>');CoC7DirectoryPicker.createDefaultDirectory(),pickerButton.on("click",(()=>{picker.render(!0)})),input.parent().append(pickerButton)}}))}activateListeners(html){super.activateListeners(html),$(html).find("ol.files-list").remove(),$(html).find("footer div").remove(),$(html).find("footer button").text(game.i18n.localize("CoC7.PickDirectory"))}static async createDefaultDirectory(){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));try{return await CoC7DirectoryPicker.createDirectory(parsed.activeSource,parsed.current,{bucket:parsed.bucket}),!0}catch(e){if(!e.startsWith("EEXIST"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1}}static async uploadToDefaultDirectory(file,filename){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));return(await FilePicker.upload(parsed.activeSource,parsed.current,new File([file],filename,{type:"image/png"}),{bucket:parsed.bucket})).path?parsed.current+"/"+filename:(ui.notifications.error(game.i18n.localize("CoC7.FileUploadError")),!1)}}class CoC7DholeHouseActorImporter{static getBackstory(backstoryJSON){const sections=[["description","Description"],["traits","Traits"],["ideology","Ideology"],["injurues","Injuries","injuries"],["people","People"],["phobias","Phobias"],["locations","Locations"],["tomes","Tomes"],["possessions","Possessions"],["encounters","Encounters"]],backstory={block:[],sections:[]};for(const section of sections)null!==backstoryJSON[section[0]]&&(void 0!==section[2]&&""!==section[2]||(section[2]=section[0]),backstory.block.push(`<h3>${section[1]}</h3>\n<div class="${section[2]}">\n${backstoryJSON[section[0]]}\n</div>`),backstory.sections.push({title:section[1],value:backstoryJSON[section[0]]}));return backstory.block="<h2>Backstory</h2>\n"+backstory.block.join("\n",backstory.block),backstory}static async convertDholeHouseCharacterData(dholeHouseData,options){CONFIG.debug.CoC7Importer&&console.log("Source:",dholeHouseData),dholeHouseData=dholeHouseData.Investigator;const backstories=CoC7DholeHouseActorImporter.getBackstory(dholeHouseData.Backstory);return{name:dholeHouseData.PersonalDetails.Name,actor:{characteristics:{str:{value:parseInt(dholeHouseData.Characteristics.STR,10)},con:{value:parseInt(dholeHouseData.Characteristics.CON,10)},siz:{value:parseInt(dholeHouseData.Characteristics.SIZ,10)},dex:{value:parseInt(dholeHouseData.Characteristics.DEX,10)},app:{value:parseInt(dholeHouseData.Characteristics.APP,10)},int:{value:parseInt(dholeHouseData.Characteristics.INT,10)},pow:{value:parseInt(dholeHouseData.Characteristics.POW,10)},edu:{value:parseInt(dholeHouseData.Characteristics.EDU,10)}},attribs:{san:{value:parseInt(dholeHouseData.Characteristics.Sanity,10),max:parseInt(dholeHouseData.Characteristics.SanityMax,10),dailyLimit:Math.floor(dholeHouseData.Characteristics.Sanity/5)},hp:{value:parseInt(dholeHouseData.Characteristics.HitPts,10),max:parseInt(dholeHouseData.Characteristics.HitPtsMax,10)},mp:{value:parseInt(dholeHouseData.Characteristics.MagicPts,10),max:parseInt(dholeHouseData.Characteristics.MagicPtsMax,10)},lck:{value:parseInt(dholeHouseData.Characteristics.Luck,10)},mov:{value:parseInt(dholeHouseData.Characteristics.Move,10),max:parseInt(dholeHouseData.Characteristics.Move,10)},db:{value:dholeHouseData.Characteristics.DamageBonus},build:{value:parseInt(dholeHouseData.Characteristics.Build,10)}},infos:{occupation:dholeHouseData.PersonalDetails.Occupation,age:dholeHouseData.PersonalDetails.Age,sex:dholeHouseData.PersonalDetails.Gender,residence:dholeHouseData.PersonalDetails.Residence,birthplace:dholeHouseData.PersonalDetails.Birthplace},backstory:backstories.block,biography:backstories.sections,description:{keeper:game.i18n.localize("CoC7.DholeHouseActorImporterSource")}},skills:await CoC7DholeHouseActorImporter.extractSkills(dholeHouseData.Skills.Skill??[],options),possesions:await CoC7DholeHouseActorImporter.extractPossessions(dholeHouseData.Possessions?.item??[],options)}}static makeSkillName(name,specialization){return"None"===specialization&&(specialization="Any"),"Language (Other)"===name||"Language (Own)"===name?name="Language":"Operate Heavy Machine"===name?name="Operate Heavy Machinery":"Throw"===name&&""===specialization&&(name="Fighting",specialization="Throw"),{skillName:""===specialization?name:specialization,specialization:""===specialization?"":name,name:name+(""===specialization?"":" ("+specialization+")")}}static async extractSkills(dholeHouseskills,options){const skills=[];for(const skill of dholeHouseskills){if("None"===skill.subskill&&"1"===skill.value&&"0"===skill.half&&"0"===skill.fifth)continue;const parts=CoC7DholeHouseActorImporter.makeSkillName(skill.name,skill.subskill??""),existing=await CoC7Utilities.guessItem("skill",parts.name,{source:options.source,fallbackAny:!0});let cloned=null;void 0!==existing?(cloned=duplicate(existing.toObject()),cloned.name=parts.name,cloned.system.skillName=parts.skillName,cloned.system.specialization=parts.specialization):(cloned=CoCActor.emptySkill(parts.skillName,parseInt(skill.value??0,10),{specialization:""!==parts.specialization&&parts.specialization}),cloned.system.properties=cloned.system.properties??{},"Fighting"===parts.specialization?(cloned.system.properties.fighting=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Firearms"===parts.specialization?(cloned.system.properties.firearm=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Dodge"===parts.skillName&&(cloned.system.properties.push=!1)),"Any"===cloned.system.skillName&&(cloned.name=cloned.name.replace(" (Any)"," (None)"),cloned.system.skillName="None"),cloned.system.base=parseInt(skill.value??0,10),cloned.system.value=parseInt(skill.value??0,10),cloned.system.flags=cloned.system.flags??{},cloned.system.flags.occupation=!0===skill.occupation||"true"===skill.occupation,skills.push(cloned)}return skills}static findWeaponSkillId(skillName,character){const skills=character.getEmbeddedCollection("Item"),checkName=skillName.replace(/^\((.+)\)$/,"$1");return skills.find((i=>i.system?.skillName===checkName||i.system?.skillName?.indexOf(checkName)>-1))}static async extractPossessions(dholehousePossessions,options){const items=[];for(const item of dholehousePossessions){const existing=await CoC7Utilities.guessItem("item",item.description,{source:options.source});let cloned=null;cloned=void 0!==existing?duplicate(existing.toObject()):{name:item.description,type:"item"},items.push(cloned)}return items}static async extractWeapons(dholehouseWeapons,character,options){const weapons=[];Array.isArray(dholehouseWeapons)||(dholehouseWeapons=[dholehouseWeapons]);for(const weapon of dholehouseWeapons){const skill=CoC7DholeHouseActorImporter.findWeaponSkillId(weapon.skillname,character),damage=weapon.damage.replace(/\+DB/i,""),addb=damage!==weapon.damage,existing=await CoC7Utilities.guessItem("weapon",weapon.name,{source:options.source});let cloned=null;void 0!==existing?(cloned=duplicate(existing.toObject()),cloned.system.skill.main.name=skill?.name??"",cloned.system.skill.main.id=skill?.id??"",cloned.system.range=cloned.system.range??{},cloned.system.range.normal=cloned.system.range.normal??{},cloned.system.range.normal.damage=damage,cloned.system.ammo=weapon.ammo,cloned.system.malfunction=weapon.malf,cloned.system.properties=cloned.system.properties??{},cloned.system.properties.melee=skill?.system.properties?.fighting??!1,cloned.system.properties.rngd=skill?.system.properties?.firearm??!1,cloned.system.properties.addb=addb):cloned={name:weapon.name,type:"weapon",system:{skill:{main:{name:skill?.name??"",id:skill?.id??""}},range:{normal:{damage}},ammo:weapon.ammo,malfunction:weapon.malf,properties:{melee:skill?.system.properties?.fighting??!1,rngd:skill?.system.properties?.firearm??!1,addb}}},weapons.push(cloned)}return weapons}static async savePortrait(base64Portrait,fileName){const base64Response=await fetch("data:image/png;base64,"+base64Portrait),imageBlob=await base64Response.blob();return CoC7DirectoryPicker.uploadToDefaultDirectory(imageBlob,fileName)}static async createNPCFromDholeHouse(dholeHouseCharacterData,options){if(!game.user?.can("FILES_UPLOAD"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1;const characterData=await CoC7DholeHouseActorImporter.convertDholeHouseCharacterData(dholeHouseCharacterData,options);CONFIG.debug.CoC7Importer&&console.log("Character Data:",characterData);const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();if(!CoC7DirectoryPicker.createDefaultDirectory())return!1;const actorData={name:characterData.name,type:"character",folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);if(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait?.length>10){const fileName="avatar-"+npc.id+".png",portrait=await CoC7DholeHouseActorImporter.savePortrait(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait,fileName);!1!==portrait&&npc.update({img:portrait})}CONFIG.debug.CoC7Importer&&console.log("Items: ",characterData.items),await npc.createEmbeddedDocuments("Item",characterData.skills,{renderSheet:!1}),await npc.createEmbeddedDocuments("Item",characterData.possesions,{renderSheet:!1});const weapons=await CoC7DholeHouseActorImporter.extractWeapons(dholeHouseCharacterData.Investigator.Weapons?.weapon??[],npc,options);return CONFIG.debug.CoC7Importer&&console.log("Weapons: ",weapons),await npc.createEmbeddedDocuments("Item",weapons,{renderSheet:!1}),npc}}class CoC7ActorImporterDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","dialog","actor-importer"],title:game.i18n.localize("CoC7.ActorImporter"),template:"systems/CoC7/templates/apps/actor-importer.html",closeOnSubmit:!1,width:600,height:"auto"})}async getData(){const data=await super.getData();return data.importType=data.object.importType,data.convert6E=data.object.convert6E,data.source=data.object.source,data.characterData=data.object.characterData,data.canUpload=game.user?.can("FILES_UPLOAD"),["npc","creature"].includes(data.importType)&&(data.languages=CoC7ActorImporterRegExp.getTranslations(),data.language=CoC7ActorImporterRegExp.checkLanguage(data.object.language),data.placeholder=CoC7ActorImporterRegExp.getExampleText(data.language)),data}activateListeners(html){super.activateListeners(html),html.find("#dholehouse-character-preview").hide(),html.find("#coc-entity-type,#coc-entity-lang").change(this._onChangeSubmit.bind(this)),html.find("#dholehouse-json-file-picker").change(this._onJSONFileSelected.bind(this)),html.find("#coc-pasted-character-data").on("keyup",(function(e){const charactersTooExtended=$(this).val().match(/[\udbc0-\udbfe][\udc00-\udfff]/),prompt=$("#coc-prompt");prompt.data("extended")&&charactersTooExtended?prompt.html(game.i18n.localize("CoC7.TextFieldInvalidCharacters")).addClass("error"):prompt.html(prompt.data("text")).removeClass("error")})).trigger("keyup"),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("form").submit((e=>{e.preventDefault()}))}static getInputs(form){const inputs={};return inputs.entity=form.find("#coc-entity-type").val().trim(),CONFIG.debug.CoC7Importer&&console.debug("entity type:",inputs.entity),form.find("#coc-convert-6E").length>0&&(inputs.convertFrom6E=form.find("#coc-convert-6E").val().trim()),form.find("#coc-entity-lang").length>0&&(inputs.lang=CoC7ActorImporterRegExp.checkLanguage(form.find("#coc-entity-lang").val().trim())),form.find("#source").length>0&&(inputs.source=form.find("#source").val().trim()),form.find("#coc-pasted-character-data").length>0&&(inputs.text=form.find("#coc-pasted-character-data").val().trim()),CONFIG.debug.CoC7Importer&&console.debug("received text","##"+inputs.text+"##"),inputs}_onJSONFileSelected(event){const jsonFileInput=document.getElementById("dholehouse-json-file-picker"),portraitImage=document.getElementById("dholehouse-character-portrait"),characterName=document.getElementById("dholehouse-character-name"),preview=document.getElementById("dholehouse-character-preview"),file=jsonFileInput.files[0],dialog=this,fileReader=new FileReader;fileReader.onload=function(e){try{dialog.characterJSON=JSON.parse(fileReader.result)}catch(e){return $("#coc-prompt").html(game.i18n.localize("CoC7.TextFieldInvalidJSON")).addClass("error"),void event.preventDefault()}const personalDetails=dialog.characterJSON?.Investigator?.PersonalDetails;personalDetails?(characterName.textContent=personalDetails.Name,portraitImage.src="data:image/png;base64,"+personalDetails.Portrait,preview.style.display="block",$(".dialog.actor-importer").height("auto")):ui.notifications.error(game.i18n.localize("CoC7.DholeHouseInvalidActor"))},fileReader.readAsText(file)}_onChangeSubmit(event){this._onSubmit(event)}async _onClickSubmit(event){const id=event.currentTarget.dataset.button;if("no"===id)this.close();else if("getExampleNow"===id){const content=CoC7ActorImporterRegExp.getExampleText(this.object.language);CoC7Utilities.copyToClipboard(content).then((()=>ui.notifications.info(game.i18n.localize("CoC7.Copied"))))}else if("import"===id){const app=$(event.currentTarget).closest("div.dialog.actor-importer");app.hide();const form=$(event.currentTarget).closest("form"),inputs=CoC7ActorImporterDialog.getInputs(form);if("dholehouse"===inputs.entity&&this.characterJSON){const character=await CoC7DholeHouseActorImporter.createNPCFromDholeHouse(this.characterJSON,{source:inputs.source});!1!==character?(CONFIG.debug.CoC7Importer&&console.debug("character:",character),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:game.i18n.localize("CoC7.Entities.Character"),actorName:character.name})),await character.sheet.render(!0),this.close()):app.show()}else inputs.text&&""!==inputs.text?(CoC7ActorImporterDialog.importActor(inputs),this.close()):app.show()}}async _updateObject(event,formData){this.object.importType=formData["coc-entity-type"],this.object.characterData=formData["coc-pasted-character-data"]?.trim(),void 0!==formData["coc-convert-6E"]&&(this.object.convert6E=formData["coc-convert-6E"]),void 0!==formData["coc-entity-lang"]&&(this.object.language=formData["coc-entity-lang"]),void 0!==formData.source&&(this.object.source=formData.source),this.render(!0)}static async importActor(inputs){"."!==inputs.text[inputs.text.length]&&(inputs.text+=".");const actor=new CoC7ActorImporter,createdActor=await actor.createActor(inputs);CONFIG.debug.CoC7Importer&&console.debug("createdActor:",createdActor),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:createdActor.type?.toUpperCase(),actorName:createdActor.name})),await createdActor.sheet.render(!0)}static async create(options={}){options.importType=options.importType??"npc",options.language=options.language??CoC7ActorImporterRegExp.checkLanguage(null),options.convert6E=options.language??"coc-guess",options.source=options.source??"iwms",options.characterData=options.characterData??"",new CoC7ActorImporterDialog(options).render(!0)}}Hooks.once("ready",(()=>{game.modules.get("CoC7-Importer-Tests")?.active&&(window.CoC7ActorImporter=CoC7ActorImporter)}));class DropCoCID extends Dialog{static processForm(response,element,resolve){element.find("input").is(":checked")&&game.settings.set("CoC7","dropCoCID",response?"Y":"N"),resolve(response)}static processItem(response,item){return response&&item.flags?.CoC7?.cocidFlag?.id?item.flags.CoC7.cocidFlag.id:duplicate(item)}static async create(){switch(game.settings.get("CoC7","dropCoCID")){case"":return new Promise((resolve=>{new DropCoCID({title:game.i18n.format("CoC7.Settings.DropCoCID.Name"),content:"<p>"+game.i18n.format("CoC7.Settings.DropCoCID.Dialog")+'</p><p><input type="checkbox" id="rememberthis" style="vertical-align: sub;"><label for="rememberthis">'+game.i18n.format("CoC7.Settings.DropCoCID.Remember")+"</label></p>",classes:["coc7","app","dialog"],buttons:{yes:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("Yes"),callback:element=>{DropCoCID.processForm(!0,element,resolve)}},no:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("No"),callback:element=>{DropCoCID.processForm(!1,element,resolve)}}}}).render(!0)}));case"Y":return!0;case"N":return!1}}}class CoC7OccupationSheet extends ItemSheet{activateListeners(html){if(super.activateListeners(html),!this.options.editable)return;html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))),html.find(".group-item-delete").click(this._onGroupItemDelete.bind(this)),html.find(".group-control").click(this._onGroupControl.bind(this));new DragDrop({dropSelector:".droppable",callbacks:{drop:this._onDrop.bind(this)}}).bind(html[0])}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const optionalSkill=event?.currentTarget?.classList?.contains("optional-skills"),ol=event?.currentTarget?.closest("ol"),index=ol?.dataset?.group,dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[],groups=this.item.system.groups?duplicate(this.item.system.groups):[];for(const item of dataList)if(item&&item.system&&[type].includes(item.type))if(optionalSkill){if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;if(groups[index].skills.find((el=>el.name===item.name)))continue}0===useCoCID&&(useCoCID=await DropCoCID.create()),groups[index].skills=groups[index].skills.concat([DropCoCID.processItem(useCoCID,item)])}else{if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;for(let i=0;i<groups.length;i++){const index=groups[i].skills.findIndex((el=>el.name===item.name));-1!==index&&groups[i].skills.splice(index,1)}}0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))}await this.item.update({"system.groups":groups}),await this.item.update({[`system.${collectionName}`]:collection})}async _onGroupControl(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("add-group")){await this._onSubmit(event);const groups=this.item.system.groups;await this.item.update({"system.groups":groups.concat([{options:0,skills:[]}])})}if(a.classList.contains("remove-group")){await this._onSubmit(event);const groups=duplicate(this.item.system.groups),ol=a.closest(".item-list.group");groups.splice(Number(ol.dataset.group),1),await this.item.update({"system.groups":groups})}}_onItemSummary(event,collectionName="items"){event.preventDefault();const obj=$(event.currentTarget),li=obj.parents(".item"),group=obj.closest(".group");let item;if(item=group.length?this.item.system.groups[group.data("group")][collectionName].find((s=>s._id===li.data("item-id"))):this.item.system[collectionName].find((s=>s._id===li.data("item-id"))),!item)return;const chatData=item.system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}async _onGroupItemDelete(event){const item=$(event.currentTarget).closest(".item"),group=Number(item.closest(".item-list.group").data("group")),groups=duplicate(this.item.system.groups);if(void 0!==groups[group]){const itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=groups[group].skills.findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));itemIndex>-1&&(groups[group].skills.splice(itemIndex,1),await this.item.update({"system.groups":groups}))}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/occupation.html",width:525,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey);for(let index=0,len=sheetData.data.system.groups.length;index<len;index++)sheetData.data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.groups[index].skills}),sheetData.data.system.groups[index].isEmpty=0===sheetData.data.system.groups[index].skills.length,sheetData.data.system.groups[index].skills.sort(CoC7Utilities.sortByNameKey);sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(sheetData.data.system.occupationSkillPoints),sheetData.itemProperties=[];for(const[key,value]of Object.entries(sheetData.data.system.type))value&&sheetData.itemProperties.push(COC7.occupationProperties[key]?COC7.occupationProperties[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}static occupationPointsString(occupationSkillPoints){const optionnal=[],mandatory=[];for(const[key,carac]of Object.entries(occupationSkillPoints))if(carac.multiplier){const caracName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);carac.selected&&carac.optional&&optionnal.push(`${caracName}x${carac.multiplier}`),carac.selected&&!carac.optional&&mandatory.push(`${caracName}x${carac.multiplier}`)}let occupationPointsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return mandatory.length&&(occupationPointsString+=mandatory.join(" + ")),optionnal.length&&mandatory.length&&(occupationPointsString+=` + (${optionnal.join(orString)})`),optionnal.length&&!mandatory.length&&(occupationPointsString+=optionnal.join(orString)),occupationPointsString}_updateObject(event,formData){const system=expandObject(formData)?.system;if(system.groups){formData["system.groups"]=Object.values(system.groups||[]);for(let index=0;index<this.item.system.groups.length;index++)formData[`system.groups.${index}.skills`]=duplicate(this.item.system.groups[index].skills)}super._updateObject(event,formData)}}class CoC7InvestigatorWizard extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{id:"investigator-wizard-application",classes:["coc7","dialog","investigator-wizard"],title:game.i18n.localize("CoC7.InvestigatorWizard.Title"),template:"systems/CoC7/templates/apps/investigator-wizard.hbs",width:520,height:600,closeOnSubmit:!1,scrollY:[".scrollsection"],dragDrop:[{dragSelector:".draggable",dropSelector:null}]})}get pageList(){return{PAGE_NONE:-1,PAGE_INTRODUCTION:0,PAGE_CONFIGURATION:1,PAGE_SETUPS:2,PAGE_ARCHETYPES:3,PAGE_CHARACTISTICS:4,PAGE_ATTRIBUTES:5,PAGE_VIEW_ATTRIBUTES:6,PAGE_OCCUPATIONS:7,PAGE_OCCUPATION_SKILLS:8,PAGE_ARCHETYPE_SKILLS:9,PAGE_POINTS_SKILLS:10,PAGE_INVESTIGATOR:11,PAGE_BACKSTORY:12,PAGE_CREATE:13}}get characteristicsMethods(){return{METHOD_DEFAULT:1,METHOD_ROLL:1,METHOD_POINTS:2,METHOD_VALUES:3}}get cocidCreditRating(){return"i.skill.credit-rating"}get cocidLanguageOwn(){return"i.skill.language-own"}get pageOrder(){const pages=this.pageList;let pageOrder=[pages.PAGE_INTRODUCTION];return game.user.isGM&&pageOrder.push(pages.PAGE_CONFIGURATION),""===this.object.defaultSetup&&pageOrder.push(pages.PAGE_SETUPS),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPES),pageOrder.push(pages.PAGE_CHARACTISTICS),game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||pageOrder.push(pages.PAGE_ATTRIBUTES),pageOrder=pageOrder.concat([pages.PAGE_VIEW_ATTRIBUTES,pages.PAGE_OCCUPATIONS,pages.PAGE_OCCUPATION_SKILLS]),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPE_SKILLS),pageOrder=pageOrder.concat([pages.PAGE_POINTS_SKILLS,pages.PAGE_INVESTIGATOR,pages.PAGE_BACKSTORY,pages.PAGE_CREATE]),pageOrder}static async loadCacheItemByCoCID(){return new Promise(((resolve,reject)=>{game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\./,type:"i",showLoading:!0}).then((items=>{const list={};for(const item of items)list[item.flags.CoC7.cocidFlag.id]=item;resolve(list)}))}))}async filterCacheItemByCoCID(regexp){return Object.entries(await this.object.cacheCoCID).filter((entry=>entry[0].match(regexp))).map((entry=>entry[1]))}async getCacheItemByCoCID(id){return(await this.object.cacheCoCID)[id]??!1}async expandItemArray(itemList){const items=itemList.filter((it=>"string"!=typeof it)),cocids=itemList.filter((it=>"string"==typeof it));if(cocids.length){const source=await this.object.cacheCoCID,missing=[];for(const cocid of cocids)void 0!==source[cocid]?items.push(source[cocid]):missing.push(cocid);if(missing.length){const era=game.i18n.format(COC7.eras[this.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:this.object.defaultEra});ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:missing.join(", "),lang:game.i18n.lang,era}))}}return items}getAgeAdjustments(){for(const key in this.object.setupModifiers)this.object.setupModifiers[key]=0;if(!game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")){if(this.object.age>=40){const key=Math.floor(this.object.age/10);this.object.requiresAgeAdjustments={edu:{total:key-2>4?4:key-2,rolled:!1},deduct:{total:key>1?5*Math.pow(2,key-4):0,from:["str","con","dex"],values:{}},reduce:{total:5*(key-3),from:"app"}}}else this.object.age>=20?this.object.requiresAgeAdjustments={edu:{total:1,rolled:!1}}:this.object.age>=15&&(this.object.requiresAgeAdjustments={deduct:{total:5,from:["str","siz"],values:{}},reduce:{total:5,from:"edu"},luck:!0});void 0!==this.object.requiresAgeAdjustments.reduce&&(this.object.setupModifiers[this.object.requiresAgeAdjustments.reduce.from]=-this.object.requiresAgeAdjustments.reduce.total)}}async getData(){const sheetData=await super.getData();let setup,archetype,occupation;sheetData.isKeeper=game.user.isGM,sheetData.pages=this.pageList,sheetData.canNext=!1,sheetData.createButton=!1;let showMonetary=!1;switch(sheetData.object.step){case sheetData.pages.PAGE_INTRODUCTION:sheetData.era=game.i18n.format(COC7.eras[sheetData.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:sheetData.object.defaultEra}),sheetData.canNext=!0;break;case sheetData.pages.PAGE_CONFIGURATION:if(game.user.isGM){sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.defaultSetup)),void 0===setup?(sheetData.object.defaultSetup="",sheetData.object.setup=""):sheetData.description=CoC7Parser.enrichHTML(setup.system.description.value),sheetData.ownership={[CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE]:"OWNERSHIP.NONE",[CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED]:"OWNERSHIP.LIMITED",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER]:"OWNERSHIP.OBSERVER",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER]:"OWNERSHIP.OWNER"},sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value)});sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_DEFAULT,sheetData.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.hasArchetypes=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.canNext=!0}break;case sheetData.pages.PAGE_SETUPS:""===sheetData.object.defaultSetup&&(sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.setups.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.setup&&(setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.setup)),void 0!==setup&&(sheetData.description=CoC7Parser.enrichHTML(setup.system.description.value),sheetData.canNext=!0)));break;case sheetData.pages.PAGE_ARCHETYPES:if(sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),0===sheetData.archetypes.length)sheetData.canNext=!0;else if(sheetData.archetypes.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.archetype&&(archetype=sheetData.archetypes.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.archetype)),void 0!==archetype)){sheetData.description=CoC7Parser.enrichHTML(archetype.system.description.value),sheetData.bonusPoints=archetype.system.bonusPoints;const coreCharacteristics=[];for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&coreCharacteristics.push(coreCharacteristic);0===coreCharacteristics.length?this.object.coreCharacteristic="":1===coreCharacteristics.length&&(this.object.coreCharacteristic=coreCharacteristics[0]),sheetData.coreCharacteristic=coreCharacteristics.map((c=>c.toLocaleUpperCase())).join(" "+game.i18n.localize("CoC7.Or")+" ");const skills=[];archetype.system.skills=await this.expandItemArray(archetype.system.skills);for(const skill of archetype.system.skills)skills.push(skill.name);sheetData.skills=skills.join(", "),sheetData.suggestedOccupations=CoC7Parser.enrichHTML(archetype.system.suggestedOccupations),sheetData.suggestedTraits=CoC7Parser.enrichHTML(archetype.system.suggestedTraits),sheetData.canNext=!0}break;case sheetData.pages.PAGE_CHARACTISTICS:if(sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_ROLL,""!==sheetData.object.setup&&(setup=await this.getCacheItemByCoCID(this.object.setup),void 0!==setup)){if(setup.system.characteristics.points.enabled||this.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData.setup={total:0,points:setup.system.characteristics.points.value,characteristics:[{key:"str",roll:setup.system.characteristics.rolls.str,label:"CHARAC.Strength"},{key:"con",roll:setup.system.characteristics.rolls.con,label:"CHARAC.Constitution"},{key:"siz",roll:setup.system.characteristics.rolls.siz,label:"CHARAC.Size"},{key:"dex",roll:setup.system.characteristics.rolls.dex,label:"CHARAC.Dexterity"},{key:"app",roll:setup.system.characteristics.rolls.app,label:"CHARAC.Appearance"},{key:"int",roll:setup.system.characteristics.rolls.int,label:"CHARAC.Intelligence"},{key:"pow",roll:setup.system.characteristics.rolls.pow,label:"CHARAC.Power"},{key:"edu",roll:setup.system.characteristics.rolls.edu,label:"CHARAC.Education"}],luck:{roll:setup.system.characteristics.rolls.luck,label:"CoC7.Luck"}},sheetData.coreCharacteristics=[],""!==sheetData.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype),void 0!==archetype)){for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&sheetData.coreCharacteristics.push({key:coreCharacteristic,name:game.i18n.format(sheetData.setup.characteristics.find((c=>c.key===coreCharacteristic))?.label??"Unknown")});sheetData.coreCharacteristics.sort(CoC7Utilities.sortByNameKey),""!==this.object.coreCharacteristic&&archetype.system.coreCharacteristicsFormula.enabled&&(sheetData.setup.characteristics.find((c=>c.key===this.object.coreCharacteristic)).roll=archetype.system.coreCharacteristicsFormula.value)}let empties=!1;for(const key in sheetData.object.setupPoints)""!==sheetData.object.setupPoints[key]?"luck"!==key&&(sheetData.setup.total+=parseInt(sheetData.object.setupPoints[key],10)):empties=!0;this.object.coreCharacteristic&&(sheetData.coreCharacteristic=this.object.coreCharacteristic.toLocaleUpperCase()),!empties&&this.object.age>=15&&([sheetData.characteristicsMethods.METHOD_ROLL,sheetData.characteristicsMethods.METHOD_VALUES].includes(sheetData.characteristicsMethod)||sheetData.setup.total.toString()===sheetData.setup.points)&&(sheetData.canNext=!0)}break;case sheetData.pages.PAGE_ATTRIBUTES:sheetData.pulpRuleIgnoreAgePenalties=game.settings.get("CoC7","pulpRuleIgnoreAgePenalties"),sheetData.canNext=!0,sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),min:1-parseInt(this.object.setupPoints[key],10),label:CoC7Utilities.getCharacteristicNames(key).label};if(void 0===this.object.requiresAgeAdjustments.edu||this.object.requiresAgeAdjustments.edu.rolled||(sheetData.canNext=!1),void 0!==this.object.requiresAgeAdjustments.deduct){sheetData.deductTotal=0;for(const key of this.object.requiresAgeAdjustments.deduct.from)sheetData.deductTotal=sheetData.deductTotal-parseInt(this.object.setupModifiers[key],10);sheetData.deductFrom=this.object.requiresAgeAdjustments.deduct.from.map((n=>n.toLocaleUpperCase())).join(", ").replace(/, ([a-z]+)$/i,", or $1"),sheetData.deductTotal!==this.object.requiresAgeAdjustments.deduct.total&&(sheetData.canNext=!1)}void 0!==this.object.requiresAgeAdjustments.reduce&&(sheetData.reduceFrom=this.object.requiresAgeAdjustments.reduce.from.toLocaleUpperCase()),void 0!==this.object.requiresAgeAdjustments.luck&&(sheetData.luckValue=Math.max(this.object.setupPoints.luck,this.object.setupModifiers.luck),0===this.object.setupModifiers.luck&&(sheetData.canNext=!1));break;case sheetData.pages.PAGE_VIEW_ATTRIBUTES:sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),prefix:"",suffix:"%",label:CoC7Utilities.getCharacteristicNames(key).label};sheetData.points.db={value:CoCActor.dbFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.BonusDamage"},(isNaN(sheetData.points.db.value)||Number(sheetData.points.db.value)>=0)&&(sheetData.points.db.prefix="+"),sheetData.points.build={value:CoCActor.buildFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.Build"},Number(sheetData.points.build.value)>=0&&(sheetData.points.build.prefix="+"),sheetData.points.hp={value:CoCActor.hpFromCharacteristics(sheetData.points,"character"),prefix:"",suffix:"",label:"CoC7.HitPoints"},sheetData.points.hp.prefix=sheetData.points.hp.value+"/",sheetData.points.mp={value:CoCActor.mpFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.MagicPoints"},sheetData.points.mp.prefix=sheetData.points.mp.value+"/",sheetData.points.san={value:sheetData.points.pow.value,prefix:"",suffix:"/99",label:"CoC7.Sanity"},sheetData.points.mov={value:CoCActor.movFromCharacteristics(sheetData.points,"character",this.object.age),prefix:"",suffix:"",label:"CoC7.Movement"},sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATIONS:if(sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.occupations.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.occupation&&(occupation=sheetData.occupations.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.occupation)),void 0!==occupation)){sheetData.description=CoC7Parser.enrichHTML(occupation.system.description.value),sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(occupation.system.occupationSkillPoints),sheetData.creditRating=occupation.system.creditRating,sheetData.personal=occupation.system.personal,sheetData.skills=await this.expandItemArray(occupation.system.skills),sheetData.groups={};for(let index=0;index<occupation.system.groups.length;index++)sheetData.groups[index]={options:occupation.system.groups[index].options,skills:[]},sheetData.groups[index].skills=await this.expandItemArray(occupation.system.groups[index].skills);sheetData.points=0;const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.points+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.points+=Math.max(...options)),sheetData.canNext=!0}break;case sheetData.pages.PAGE_INVESTIGATOR:sheetData.language=void 0!==this.object.skillItems[this.cocidLanguageOwn],sheetData.language?sheetData.languageName=this.object.skillItems[this.cocidLanguageOwn].item.name:sheetData.languageName="",sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATION_SKILLS:sheetData.default=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isOccupationDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.default++):!1!==sheetData.object.skillItems[key].rows[index].inOccupationGroup?(group=sheetData.object.skillItems[key].rows[index].inOccupationGroup,isMultiple&&(isPickable=!0)):group="other";let toggle=sheetData.object.skillItems[key].rows[index].occupationToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].archetypeToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:sheetData.object.skillItems[key].rows[index].isCreditRating,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.max=parseInt(sheetData.default,10)+parseInt(sheetData.object.personal,10)+Object.values(sheetData.object.occupationGroups).reduce(((s,v)=>s+parseInt(v,10)),0),sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_ARCHETYPE_SKILLS:sheetData.max=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isArchetypeDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.max++):group="other";let toggle=sheetData.object.skillItems[key].rows[index].archetypeToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].occupationToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:!1,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_POINTS_SKILLS:if(sheetData.skills=[],sheetData.creditRatingOkay=!(this.object.creditRating.max>0),sheetData.personal={count:0,total:2*(parseInt(this.object.setupPoints.int,10)+parseInt(this.object.setupModifiers.int,10)),remaining:0},sheetData.occupation={count:0,total:0,remaining:0},sheetData.archetype={count:0,total:0,remaining:0},""!==sheetData.object.setup&&(showMonetary=(await this.getCacheItemByCoCID(sheetData.object.setup)).system.monetary.values.length>0),""!==sheetData.object.occupation&&(occupation=await this.getCacheItemByCoCID(this.object.occupation),occupation)){const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.occupation.total+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.occupation.total+=Math.max(...options))}if(""!==this.object.archetype){const archetype=await game.system.api.cocid.fromCoCID(this.object.archetype);1===archetype.length&&(sheetData.archetype.total=archetype[0].system.bonusPoints)}if(Object.keys(this.object.skillItems).length>0){for(const key in this.object.skillItems){const skill=this.object.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=duplicate(row.selected));let base=item.system.base;if(!Number.isNumeric(base))for(const key in this.object.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new Roll(base).evaluate({async:!1}).total));let totalPoints=parseInt(base,10);if(Number(row.personalPoints)>0){const num=Number(row.personalPoints);sheetData.personal.count+=num,totalPoints+=num}if(Number(row.occupationPoints)>0){const num=Number(row.occupationPoints);sheetData.occupation.count+=num,totalPoints+=num}if(Number(row.archetypePoints)>0){const num=Number(row.archetypePoints);sheetData.archetype.count+=num,totalPoints+=num}if(Number(row.experiencePoints)>0){totalPoints+=Number(row.experiencePoints)}let name=item.name;key===this.cocidLanguageOwn?name=item.system.specialization+" ("+item.system.skillName+")":skill.flags.isCreditRating?(name=name+" ["+this.object.creditRating.min+" - "+this.object.creditRating.max+"]",totalPoints>=this.object.creditRating.min&&totalPoints<=this.object.creditRating.max&&(sheetData.creditRatingOkay=!0)):"string"==typeof row.selected&&(name=item.system.specialization+" ("+row.selected+")"),sheetData.skills.push({key,index,name,isOccupation:row.occupationToggle,isArchetype:row.archetypeToggle,base,personalPoints:row.personalPoints,occupationPoints:row.occupationPoints,archetypePoints:row.archetypePoints,experiencePoints:row.experiencePoints,totalPoints,showCreditRating:showMonetary&&key===this.cocidCreditRating})}}}sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData.creditRatingOkay&&(sheetData.canNext=!0)}sheetData.personal.remaining=sheetData.personal.total-sheetData.personal.count,sheetData.occupation.remaining=sheetData.occupation.total-sheetData.occupation.count,sheetData.archetype.remaining=sheetData.archetype.total-sheetData.archetype.count;break;case sheetData.pages.PAGE_BACKSTORY:{const allBackstories=await this.object.cacheBackstories;sheetData.backstories={};for(let index=0;index<this.object.bioSections.length;index++)sheetData.backstories[index]={index,name:this.object.bioSections[index].name,rolls:game.system.api.cocid.findCocIdInList(this.object.bioSections[index].key,allBackstories).length?this.object.bioSections[index].key:"",value:this.object.bioSections[index].value}}sheetData.canNext=!0,sheetData.createButton=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;break;case sheetData.pages.PAGE_CREATE:sheetData.canNext=!0,sheetData.createButton=!0}return sheetData}activateListeners(html){super.activateListeners(html),html.keypress((e=>/textarea/i.test((e.target||e.srcElement).tagName)||13!==(e.keyCode||e.which||e.charCode||0))),html.find(".submit_on_change").change(this._onChangeSubmit.bind(this)),html.find(".roll-characteristic").click(this._onRollCharacteristic.bind(this)),html.find(".increase-10-characteristic").click(this._onIncreaseCharacteristic10.bind(this)),html.find(".increase-characteristic").click(this._onIncreaseCharacteristic.bind(this)),html.find(".decrease-characteristic").click(this._onDecreaseCharacteristic.bind(this)),html.find(".decrease-10-characteristic").click(this._onDecreaseCharacteristic10.bind(this)),html.find("button.roll_all").click(this._onRollAll.bind(this)),html.find("button.roll_edu").click(this._onRollEdu.bind(this)),html.find("button.roll_luck").click(this._onRollLuck.bind(this)),html.find(".item input.submit_on_blur").blur(this._onChangeSubmit.bind(this)),html.find(".item input.save-characteristic-on-blur").blur(this._onChangeSaveCharacteristic.bind(this)),html.find(".item.toggleable").click(this._onToggleSkill.bind(this)),html.find(".item.clickable").click(this._onClickPickSkill.bind(this)),html.find(".skills-list input").click(this._onClickSkillSpecial.bind(this)),html.find(".skills-list .remove-skill").click(this._onClickRemoveSkill.bind(this)),html.find(".item input.skill-adjustment").blur(this._onChangeSkillPoints.bind(this)),html.find("textarea.backstory-text").keyup(this._onChangeBackstoryText.bind(this)),html.find("button.backstory-roll").click(this._onRollBackstory.bind(this)),html.find("button.backstory-reset").click(this._onResetBackstory.bind(this))}async rollMessage(rolls){if(rolls.length){const html=[];for(const roll of rolls)html.push(await renderTemplate(Roll.CHAT_TEMPLATE,{formula:(CoC7Utilities.getCharacteristicNames(roll[0])?.label??roll[0])+": "+roll[1],tooltip:await roll[2].getTooltip(),total:roll[2].total}));ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html.join("<div>&nbsp;</div>"),whisper:ChatMessage.getWhisperRecipients("GM")})}}addItemToList(item,{isOccupationDefault=!1,inOccupationGroup=!1,occupationToggle=!1,isArchetypeDefault=!1,archetypeToggle=!1,isCreditRating=!1}={}){const key=item.flags.CoC7?.cocidFlag?.id??item.name;if("skill"!==item.type)return void this.object.investigatorItems.push(item);const isMultiple=!(!item.system.properties.special||!(item.system.properties.requiresname&&!item.system.properties.onlyone||item.system.properties.picknameonly||item.name===game.i18n.format("CoC7.AnySpecName"))),flags={isOccupationDefault,inOccupationGroup,isArchetypeDefault,isCreditRating,occupationToggle,archetypeToggle},rows={occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected:!1};if(void 0===this.object.skillItems[key])this.object.skillItems[key]={item,flags:mergeObject(flags,{isMultiple},{inplace:!1}),rows:[]},isMultiple&&!1===isOccupationDefault&&!1===inOccupationGroup&&!1===isArchetypeDefault||this.object.skillItems[key].rows.push(mergeObject(flags,rows,{inplace:!1}));else{if(isMultiple)this.object.skillItems[key].rows.push(mergeObject(flags,rows,{inplace:!1}));else for(const flag in flags)this.object.skillItems[key].rows[0][flag]=this.object.skillItems[key].rows[0][flag]||flags[flag];for(const flag in flags)this.object.skillItems[key].flags[flag]=this.object.skillItems[key].flags[flag]||flags[flag]}!isMultiple&&flags.isCreditRating&&(this.object.skillItems[key].rows[0].occupationPoints=this.object.creditRating.min)}clearSetupPoints(){for(const key in this.object.setupPoints)this.object.setupPoints[key]=""}async setSkillLists(){this.object.skillItems={},this.object.occupationGroups={},this.object.investigatorItems=[],this.object.placeable=duplicate(this.object.quickFireValues);const setup=await this.getCacheItemByCoCID(this.object.setup),occupation=await this.getCacheItemByCoCID(this.object.occupation);let archetype=!1;if(""!==this.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype)),setup&&occupation&&(!game.settings.get("CoC7","pulpRuleArchetype")||archetype)){this.object.bioSections=[];for(let index=0;index<setup.system.bioSections.length;index++)this.object.bioSections.push({name:setup.system.bioSections[index],value:"",key:"rt..backstory-"+CoC7Utilities.toKebabCase(setup.system.bioSections[index])});this.object.personal=occupation.system.personal,this.object.creditRating=occupation.system.creditRating;let items=[];items=await this.expandItemArray(setup.system.items);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index]);items=await this.expandItemArray(occupation.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isOccupationDefault:!0,occupationToggle:!0});for(let group=0,gm=occupation.system.groups.length;group<gm;group++){this.object.occupationGroups[group]=occupation.system.groups[group].options,items=await this.expandItemArray(occupation.system.groups[group].skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{inOccupationGroup:group})}if(archetype){items=await this.expandItemArray(archetype.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isArchetypeDefault:!0,archetypeToggle:!0})}if(Number(this.object.creditRating.max)>0){const nameCreditRating=game.i18n.format("CoC7.CoCIDFlag.keys."+this.cocidCreditRating),flags={isOccupationDefault:!0,occupationToggle:!0,isCreditRating:!0};if(void 0!==this.object.skillItems[this.cocidCreditRating])this.addItemToList(this.object.skillItems[this.cocidCreditRating].item,flags);else if(void 0!==this.object.skillItems[nameCreditRating])this.addItemToList(this.object.skillItems[nameCreditRating].item,flags);else{const skill=await game.system.api.cocid.fromCoCID(this.cocidCreditRating);skill.length&&this.addItemToList(skill[0],flags)}}}}_onDragStart(event){if(event.currentTarget.dataset.characteristicKey){const dragData={type:"investigatorCharacteristic",key:event.currentTarget.dataset.characteristicKey,value:event.currentTarget.dataset.value};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}async _onDrop(event){try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if(void 0!==dataList.type&&"investigatorCharacteristic"===dataList.type){if(dataList.destination=event.target.closest("li").dataset.characteristicKey,dataList.okay=!1,"-"===dataList.key&&void 0!==this.object.setupPoints[dataList.destination]){const index=this.object.placeable.indexOf(parseInt(dataList.value,10));-1!==index&&this.object.placeable.splice(index,1),""!==this.object.setupPoints[dataList.destination]&&this.object.placeable.push(parseInt(this.object.setupPoints[dataList.destination],10)),this.object.setupPoints[dataList.destination]=parseInt(dataList.value,10),this.object.placeable.sort().reverse(),dataList.okay=!0}else if(void 0!==this.object.setupPoints[dataList.key]&&"-"===dataList.destination)""!==this.object.setupPoints[dataList.key]&&(this.object.placeable.push(parseInt(this.object.setupPoints[dataList.key],10)),this.object.setupPoints[dataList.key]="",this.object.placeable.sort().reverse(),dataList.okay=!0);else if(void 0!==this.object.setupPoints[dataList.key]&&void 0!==this.object.setupPoints[dataList.destination]){const temp=""===this.object.setupPoints[dataList.key]?"":parseInt(this.object.setupPoints[dataList.key],10);this.object.setupPoints[dataList.key]=""===this.object.setupPoints[dataList.destination]?"":parseInt(this.object.setupPoints[dataList.destination],10),this.object.setupPoints[dataList.destination]=temp,dataList.okay=!0}if(dataList.okay)return void this.render(!0)}}catch(err){}const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if([this.pageList.PAGE_ARCHETYPE_SKILLS,this.pageList.PAGE_OCCUPATION_SKILLS].includes(this.object.step))for(const item of dataList)"skill"===item.type&&(this.addItemToList(item),this.render(!0))}_onClickSkillSpecial(event){event.stopPropagation()}_onClickRemoveSkill(event){event.stopPropagation();const key=event.currentTarget?.parentNode?.dataset?.key,index=event.currentTarget?.parentNode?.dataset?.index;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows.splice(index,index),this.render(!0))}async _onToggleSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows[index][toggleKey]=!this.object.skillItems[key].rows[index][toggleKey],this.render(!0))}async _onClickPickSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;if(void 0!==this.object.skillItems[key]){index>-1&&(this.object.skillItems[key].rows[index][toggleKey]=!1,this.object.skillItems[key].rows[index].selected=!1,this.render(!0));let skillList=[];const group=game.system.api.cocid.guessGroupFromKey(key);group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>!(item.system.properties?.special&&(item.system.properties?.requiresname||item.system.properties?.picknameonly)))),skillList.length>1&&skillList.sort(CoC7Utilities.sortByNameKey));const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:this.object.skillItems[key].item.system.properties?.requiresname??!1,fixedBaseValue:!0,specializationName:this.object.skillItems[key].item.system.specialization,label:this.object.skillItems[key].item.name});if(index>-1)""!==skillData.selected?(this.object.skillItems[key].rows[index].selected=skillList.find((i=>i.id===skillData.selected)),this.object.skillItems[key].rows[index][toggleKey]=!0):""!==skillData.name&&(this.object.skillItems[key].rows[index].selected=skillData.name,this.object.skillItems[key].rows[index][toggleKey]=!0);else{let selected=!1;""!==skillData.selected?selected=skillList.find((i=>i.id===skillData.selected)):""!==skillData.name&&(selected=skillData.name),this.object.skillItems[key].rows.push({isOccupationDefault:!1,inOccupationGroup:!1,isArchetypeDefault:!1,isCreditRating:!1,occupationToggle:"occupationToggle"===toggleKey,archetypeToggle:"archetypeToggle"===toggleKey,occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected})}this.render(!0)}}async _onChangeSkillPoints(event){const input=$(event.currentTarget),adjustment=input.data("adjustment"),li=input.closest("li"),key=li.data("key"),index=li.data("index");void 0!==this.object.skillItems[key]?.rows[index][adjustment]&&(this.object.skillItems[key].rows[index][adjustment]=input.val()),this.render(!0)}async _onChangeBackstoryText(event){const textarea=$(event.currentTarget),index=textarea.data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=textarea.val())}async _onRollBackstory(event){const button=$(event.currentTarget),index=button.data("index"),key=button.data("key");if(void 0!==this.object.bioSections[index]){const rolltable=await game.system.api.cocid.fromCoCID(key);if(1===rolltable.length){const tableResult=await rolltable[0].roll();tableResult.results[0].type===CONST.TABLE_RESULT_TYPES.TEXT&&(this.object.bioSections[index].value=(this.object.bioSections[index].value+"\n"+tableResult.results[0].text.trim()).trim())}}this.render(!0)}async _onResetBackstory(event){const index=$(event.currentTarget).data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=""),this.render(!0)}async _onRollLuck(event){const setup=await this.getCacheItemByCoCID(this.object.setup);if(setup){const die=await new Roll(setup.system.characteristics.rolls.luck.toString()).evaluate({async:!0});this.object.setupModifiers.luck=[die.total];const html=await renderTemplate(Roll.CHAT_TEMPLATE,{formula:game.i18n.localize("CoC7.InvestigatorWizard.RollTwiceForLuck")+": "+setup.system.characteristics.rolls.luck.toString(),tooltip:await die.getTooltip(),total:die.total});ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html,whisper:ChatMessage.getWhisperRecipients("GM")}),this.render(!0)}}async _onRollEdu(event){if(event.preventDefault(),void 0!==this.object.requiresAgeAdjustments.edu&&!this.object.requiresAgeAdjustments.edu.rolled&&this.object.requiresAgeAdjustments.edu.total){let value=parseInt(this.object.setupPoints.edu,10);const message=[];for(let rolls=this.object.requiresAgeAdjustments.edu.total;rolls>0;rolls--){const die=await new Roll("1d100").evaluate({async:!0});if(die.total>value){const augmentDie=await new Roll("1d10").evaluate({async:!0});message.push(`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value,augment:augmentDie.total})}</span><br>`),value+=parseInt(augmentDie.total,10)}else message.push(`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value})}</span><br>`)}ChatMessage.create({flavor:game.i18n.localize("CoC7.RollAll4Dev"),user:game.user.id,speaker:{alias:game.user.name},content:message.join(""),whisper:ChatMessage.getWhisperRecipients("GM")}),this.object.setupModifiers.edu=value-parseInt(this.object.setupPoints.edu,10),this.object.requiresAgeAdjustments.edu.rolled=!0,this.render(!0)}}async _onRollAll(event){event.preventDefault();const rolls=[];for(const key of["str","con","siz","dex","app","int","pow","edu","luck"]){const result=await this.rollCharacteristic(key);!1!==result&&rolls.push(result)}this.rollMessage(rolls),this.render(!0)}async _onIncreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,10),this.render(!0)}async _onIncreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,1),this.render(!0)}async _onDecreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-1),this.render(!0)}_onDecreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-10),this.render(!0)}modifyOffset(key,value,min,max){this.object.setupModifiers[key]=Math.max(Math.min(parseInt(this.object.setupModifiers[key],10)+value,parseInt(max,10)),parseInt(min,10))}modifyCharacteristic(key,value){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+value,this.object.setupPoints[key]=Number(input.value))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key,result=await this.rollCharacteristic(characKey);!1!==result&&this.rollMessage([result]),this.render(!0)}async rollCharacteristic(key){const li=$(`#investigator-wizard-application li.item[data-key=${key}]`),input=li.find("input"),formula=li.data("roll");if(input&&formula&&(this.object.rerollsEnabled||""===this.object.setupPoints[key])){const roll=new Roll(formula.toString());return await roll.evaluate({async:!0}),input.val(roll.total),this.object.setupPoints[key]=Number(roll.total),[key,formula.toString(),roll]}return!1}_onChangeSubmit(event){this._onSubmit(event)}_onChangeSaveCharacteristic(event){const obj=$(event.currentTarget),name=obj.prop("name");if(void 0!==this.object.setupPoints[name]){this.object.setupPoints[name]=obj.val();let empties=!1,total=0;for(const key in this.object.setupPoints)""!==this.object.setupPoints[key]?"luck"!==key&&(total+=parseInt(this.object.setupPoints[key],10)):empties=!0;const objTotal=obj.closest("ol.item-list").find("span.total"),max=parseInt(objTotal.siblings("span.value").text(),10);objTotal.text(total),total!==max||empties?obj.closest("form").find("button.submit-button[data-button=next]").length>0&&this.render(!0):0===obj.closest("form").find("button.submit-button[data-button=next]").length&&this.render(!0)}}getPageNumber(direction){const pageOrder=this.pageOrder,key=parseInt(Object.keys(pageOrder).find((key=>pageOrder[key]===this.object.step)),10)+direction;return pageOrder[key]}async _updateObject(event,formData){if(["back","next"].includes(event.submitter?.dataset.button)){if(event.submitter.className.indexOf("currently-submitting")>-1)return;event.submitter.className=event.submitter.className+" currently-submitting"}if(void 0!==formData["default-setup"]&&void 0!==formData["world-era"]&&void 0!==formData["default-ownership"]){if(this.object.defaultSetup!==formData["default-setup"]&&(this.object.defaultSetup=formData["default-setup"],game.settings.set("CoC7","InvestigatorWizardSetup",this.object.defaultSetup),this.object.setup=this.object.defaultSetup,this.clearSetupPoints(),await this.setSkillLists()),this.object.defaultOwnership!==formData["default-ownership"]&&(this.object.defaultOwnership=formData["default-ownership"],game.settings.set("CoC7","InvestigatorWizardOwnership",this.object.defaultOwnership)),this.object.defaultEra!==formData["world-era"]){const obj=$(this.element.find("form")),started=Date.now();obj.find(".dialog-buttons:first").hide(),obj.find(".scrollsection:first").hide(),obj.find(".erachange:first").show(),this.object.defaultEra=formData["world-era"],await game.settings.set("CoC7","worldEra",this.object.defaultEra),this.object.cacheCoCID=await CoC7InvestigatorWizard.loadCacheItemByCoCID();const buffer=500-(Date.now()-started);buffer>10&&await new Promise((resolve=>setTimeout(resolve,buffer)))}if(void 0!==formData["characteristics-method"]){const type=Number(formData["characteristics-method"]);type===this.characteristicsMethods.METHOD_DEFAULT?(this.object.enforcePointBuy=!1,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_POINTS?(this.object.enforcePointBuy=!0,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_VALUES&&(this.object.enforcePointBuy=!1,game.settings.get("CoC7","pulpRuleArchetype")?this.object.quickFireValues=[90,80,70,60,60,50,50,40]:this.object.quickFireValues=[80,70,60,60,50,50,50,40]),game.settings.set("CoC7","InvestigatorWizardPointBuy",this.object.enforcePointBuy),game.settings.set("CoC7","InvestigatorWizardQuickFire",this.object.quickFireValues)}this.object.rerollsEnabled="string"==typeof formData["rerolls-enabled"],game.settings.set("CoC7","InvestigatorWizardRerolls",this.object.rerollsEnabled);for(let i=0,im=this.object.quickFireValues.length;i<im;i++){const num=Number(formData["quick-fire-values-"+i]);num>0&&(this.object.quickFireValues[i]=num)}this.object.quickFireValues.sort().reverse(),this.object.placeable=duplicate(this.object.quickFireValues),"string"==typeof formData["default-enabled"]?"0"===this.object.defaultQuantity.toString()?(this.object.defaultQuantity=1,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):(this.object.defaultQuantity=formData["default-quantity"],game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):"0"!==this.object.defaultQuantity.toString()&&(this.object.defaultQuantity=0,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity))}else if(void 0!==formData["coc-setup"])this.object.setup!==formData["coc-setup"]&&(this.object.setup=formData["coc-setup"],this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-archetype"])this.object.archetype!==formData["coc-archetype"]&&(this.object.archetype=formData["coc-archetype"],this.object.coreCharacteristic="",this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-occupation"])this.object.occupation!==formData["coc-occupation"]&&(this.object.occupation=formData["coc-occupation"],await this.setSkillLists());else{for(const key in this.object.setupPoints)void 0!==formData[key]&&this.object.setupPoints[key]!==formData[key]&&(this.object.setupPoints[key]=formData[key]);void 0!==formData["coc-core-characteristic"]&&this.object.coreCharacteristic!==formData["coc-core-characteristic"]&&(this.object.coreCharacteristic=formData["coc-core-characteristic"],this.clearSetupPoints(),this.object.placeable=duplicate(this.object.quickFireValues))}const flatKeys=["name","age","residence","birthplace","language","avatar","token"];for(const key of flatKeys)void 0!==formData[key]&&this.object[key]!==formData[key]&&(this.object[key]=formData[key],"age"===key&&this.getAgeAdjustments());if("back"===event.submitter?.dataset.button){const pageNumber=this.getPageNumber(-1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}else if("next"===event.submitter?.dataset.button){if(this.object.step===this.pageList.PAGE_CREATE||this.object.step===this.pageList.PAGE_BACKSTORY&&game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole)return void this.attemptToCreate();{const pageNumber=this.getPageNumber(1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}}this.render(!0)}async attemptToCreate(){const actorData=await this.normalizeCharacterData(this.object);if(game.user.isGM||game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole){(await CoC7InvestigatorWizard.createCharacter(actorData)).sheet.render(!0),this.close()}else{const keepers=game.users.filter((u=>u.active&&u.isGM));if(keepers.length){actorData.ownership[game.user.id]=CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER;const data={type:"character-wizard",listener:keepers[0].id,payload:actorData};game.socket.emit("system.CoC7",data),ui.notifications.info(game.i18n.localize("CoC7.InvestigatorWizard.CreatingInvestigator")),this.close()}else ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}async normalizeCharacterData(data){const weaponSkills={melee:{},rngd:{}},items=[];for(const key in data.skillItems){const skill=data.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=duplicate(row.selected),row.selected=!1),row.occupationToggle&&(item.system.flags.occupation=!0),row.archetypeToggle&&(item.system.flags.archetype=!0);let base=item.system.base;if(!Number.isNumeric(base))for(const key in data.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new Roll(base).evaluate({async:!1}).total)),item.system.base=base,item.system.adjustments=item.system.adjustments??{},Number(row.personalPoints)>0&&(item.system.adjustments.personal=parseInt(row.personalPoints,10)),Number(row.occupationPoints)>0&&(item.system.adjustments.occupation=parseInt(row.occupationPoints,10)),Number(row.archetypePoints)>0&&(item.system.adjustments.archetype=parseInt(row.archetypePoints,10)),Number(row.experiencePoints)>0&&(item.system.adjustments.experience=parseInt(row.experiencePoints,10)),key===this.cocidLanguageOwn?(item.system.skillName=data.language,item.name=item.system.specialization+" ("+item.system.skillName+")"):"string"==typeof row.selected&&(item.system.skillName=row.selected,item._id=randomID(),item.name=item.system.specialization+" ("+item.system.skillName+")",void 0!==item.flags.CoC7?.cocidFlag?.id&&(item.flags.CoC7.cocidFlag.id=game.system.api.cocid.guessId(item))),item.system.properties?.fighting?(weaponSkills.melee[item.name]=item._id,weaponSkills.melee[item.system.skillName]=item._id):item.system.properties?.firearm&&(weaponSkills.rngd[item.name]=item._id,weaponSkills.rngd[item.system.skillName]=item._id),items.push(item)}}}for(const sourceItem of data.investigatorItems){const item=duplicate(sourceItem);item.system.properties.melee?(void 0!==weaponSkills.melee[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.melee[item.system.skill.main.name]),void 0!==weaponSkills.melee[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.melee[item.system.skill.alternativ.name])):item.system.properties.rngd&&(void 0!==weaponSkills.rngd[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.rngd[item.system.skill.main.name]),void 0!==weaponSkills.rngd[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.rngd[item.system.skill.alternativ.name])),items.push(item)}let monetary={};const setup=await this.getCacheItemByCoCID(this.object.setup);setup&&(monetary=duplicate(setup.system.monetary));const development={personal:2*(parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)),occupation:0,archetype:0};if(""!==data.archetype){const archetype=await game.system.api.cocid.fromCoCID(data.archetype);1===archetype.length&&(items.push(archetype[0].toObject()),development.archetype=archetype[0].system.bonusPoints)}if(""!==data.occupation){const occupation=await game.system.api.cocid.fromCoCID(data.occupation);if(1===occupation.length){items.push(occupation[0].toObject());const options=[];for(const[key,carac]of Object.entries(occupation[0].system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))):development.occupation+=carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10)));options.length>0&&(development.occupation+=Math.max(...options))}}const biography=[];for(let index=0,im=data.bioSections.length;index<im;index++)biography.push({title:data.bioSections[index].name,value:data.bioSections[index].value});return{type:"character",name:data.name,img:data.avatar,system:{characteristics:{str:{value:parseInt(data.setupPoints.str,10)+parseInt(data.setupModifiers.str,10)},con:{value:parseInt(data.setupPoints.con,10)+parseInt(data.setupModifiers.con,10)},siz:{value:parseInt(data.setupPoints.siz,10)+parseInt(data.setupModifiers.siz,10)},dex:{value:parseInt(data.setupPoints.dex,10)+parseInt(data.setupModifiers.dex,10)},app:{value:parseInt(data.setupPoints.app,10)+parseInt(data.setupModifiers.app,10)},int:{value:parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)},pow:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)},edu:{value:parseInt(data.setupPoints.edu,10)+parseInt(data.setupModifiers.edu,10)}},attribs:{lck:{value:Math.max(parseInt(data.setupPoints.luck,10),parseInt(data.setupModifiers.luck,10))},san:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)}},infos:{age:data.age,residence:data.residence,birthplace:data.birthplace},development,biography,monetary},prototypeToken:{name:data.name,actorLink:!0,texture:{src:data.token},disposition:CONST.TOKEN_DISPOSITIONS.FRIENDLY,sight:{enabled:!0},detectionModes:[{id:"basicSight",range:30,enabled:!0}]},items,ownership:{default:parseInt(data.defaultOwnership,10)}}}static async createCharacterFromData(actorData){const actor=await CoC7InvestigatorWizard.createCharacter(actorData),functionId=Hooks.on("renderActorSheet",((app,html,data)=>{app.object.id===actor.id&&(game.socket.emit("system.CoC7",{type:"open-character",listener:Object.keys(actorData.ownership).find((k=>"default"!==k)),payload:actor.id}),Hooks.off("renderActorSheet",functionId))}));actor.sheet.render(!0)}static async createCharacter(actorData){const actor=await Actor.create(actorData);return await actor.update({"system.attribs.hp.value":actor.rawHpMax,"system.attribs.mp.value":actor.rawMpMax,"system.attribs.san.max":actor.rawMpMax}),await actor.resetDailySanity(),actor}static async create(options={}){options=mergeObject({step:0,defaultSetup:game.settings.get("CoC7","InvestigatorWizardSetup"),defaultQuantity:game.settings.get("CoC7","InvestigatorWizardQuantity"),defaultOwnership:game.settings.get("CoC7","InvestigatorWizardOwnership"),defaultEra:game.settings.get("CoC7","worldEra"),rerollsEnabled:game.settings.get("CoC7","InvestigatorWizardRerolls"),enforcePointBuy:game.settings.get("CoC7","InvestigatorWizardPointBuy"),quickFireValues:game.settings.get("CoC7","InvestigatorWizardQuickFire"),placeable:duplicate(game.settings.get("CoC7","InvestigatorWizardQuickFire")),cacheCoCID:CoC7InvestigatorWizard.loadCacheItemByCoCID(),cacheBackstories:game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^rt\.\.backstory-/,type:"rt"}),cacheItems:{},setup:game.settings.get("CoC7","InvestigatorWizardSetup"),skillItems:{},occupationGroups:{},investigatorItems:[],setupPoints:{str:"",con:"",siz:"",dex:"",app:"",int:"",pow:"",edu:"",luck:""},setupModifiers:{str:0,con:0,siz:0,dex:0,app:0,int:0,pow:0,edu:0,luck:0},archetype:"",coreCharacteristic:"",occupation:"",bioSections:[],personal:0,creditRating:{min:0,max:0},name:"",age:"",requiresAgeAdjustments:!1,residence:"",birthplace:"",language:"",avatar:"icons/svg/mystery-man.svg",token:"icons/svg/mystery-man.svg"},options),new CoC7InvestigatorWizard(options).render(!0)}}class CoC7MenuLayer extends PlaceablesLayer{constructor(){super(),this.objects={}}static get layerOptions(){return foundry.utils.mergeObject(super.layerOptions,{name:"coc7menu",zIndex:60})}static get documentName(){return"Token"}get placeables(){return[]}}class CoC7Menu{static getButtons(controls){canvas.coc7gmtools=new CoC7MenuLayer;const isKeeper=game.user.isGM,showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu");controls.push({name:"coc7menu",title:"CoC7.GmTools",layer:"coc7gmtools",icon:"game-icon game-icon-tentacle-strike",visible:isKeeper,tools:[{toggle:!0,icon:"fas fa-angle-double-up",name:"devphase",active:game.settings.get("CoC7","developmentEnabled"),title:"CoC7.DevPhase",onClick:async toggle=>await CoC7Utilities.toggleDevPhase(toggle)},{toggle:!0,icon:"fas fa-user-edit",name:"charcreate",active:game.settings.get("CoC7","charCreationEnabled"),title:"CoC7.CharCreationMode",onClick:async toggle=>await CoC7Utilities.toggleCharCreation(toggle)},{button:!0,icon:"fas fa-user-plus",name:"actor-import",title:"CoC7.ActorImporter",onClick:async()=>await CoC7ActorImporterDialog.create()},{button:!0,icon:"fas fa-user-check",name:"investigator-wizard",title:"CoC7.InvestigatorWizard.Title",onClick:async()=>await CoC7InvestigatorWizard.create()},{toggle:!0,icon:"fas fa-certificate",class:"xp_toggle",name:"xptoggle",active:game.settings.get("CoC7","xpEnabled"),title:"CoC7.toggleXP",onClick:async toggle=>await CoC7Utilities.toggleXPGain(toggle)},{button:!0,icon:"game-icon game-icon-card-joker",name:"fakeroll",title:"CoC7.FakeRoll",onClick:CoC7Chat.fakeRollMessage},{button:!0,icon:"fas fa-moon",name:"startrest",title:"CoC7.startRest",onClick:async()=>await CoC7Utilities.getTarget()}]}),showHiddenDevMenu&&(canvas.coc7DevTools=new CoC7MenuLayer,controls.push({name:"coc7DevMenu",title:"Dev tools. If you don't know what it is, you don't need it and you shouldn't use it !!",layer:"coc7DevTools",icon:"game-icon game-icon-police-badge",visible:isKeeper,tools:[{toggle:!0,icon:"game-icon game-icon-dice-fire",name:"alwaysCrit",active:game.CoC7.dev.dice.alwaysCrit,title:"All rolls will crit",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=!1,game.CoC7.dev.dice.alwaysCrit=toggle}},{toggle:!0,icon:"game-icon game-icon-fire-extinguisher",name:"alwaysFumble",active:game.CoC7.dev.dice.alwaysFumble,title:"All rolls will fumble",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=toggle,game.CoC7.dev.dice.alwaysCrit=!1}}]}))}static renderControls(app,html,data){const isKeeper=game.user.isGM,keeperMenu=html.find(".game-icon-tentacle-strike").parent();keeperMenu.addClass("coc7-menu"),isKeeper&&keeperMenu.after('<li class="scene-control coc7-menu coc7-create-link" title="'+game.i18n.localize("CoC7.CreateLink")+'"><i class="fas fa-link"></i></li>'),keeperMenu.after('<li class="scene-control coc7-menu coc7-dice-roll" title="'+game.i18n.localize("CoC7.RollDice")+'"><i class="game-icon game-icon-d10"></i></li>'),html.find(".coc7-menu.coc7-dice-roll").click((event=>CoC7Utilities.rollDice(event))),html.find(".coc7-menu.coc7-create-link").click((event=>CoC7ContentLinkDialog.create(event)))}}class CoC7Canvas{static get COC7_TYPES_SUPPORTED(){return["CoC7Link"]}static async onDropSomething(canvas,data){if(data.type&&CoC7Canvas.COC7_TYPES_SUPPORTED.includes(data.type)){const gridSize=canvas.scene.grid.size,x=data.x-gridSize/2,y=data.y-gridSize/2,height=gridSize,width=gridSize;let dropTargetTokens=canvas.tokens.placeables.filter((obj=>{const c=obj.center;return Number.between(c.x,x,x+width)&&Number.between(c.y,y,y+height)}));if(dropTargetTokens.length||(dropTargetTokens=canvas.tokens.controlled),"CoC7Link"===data.type)if(data.check===CoC7Link.CHECK_TYPE.EFFECT){if(dropTargetTokens.length)for(const token of dropTargetTokens)CoC7Link._onLinkActorClick(token.actor,data)}else dropTargetTokens.length?CoC7Link.toWhisperMessage(data,dropTargetTokens.filter((t=>t.actor.owners.length)).map((t=>t.actor))):CoC7Link.toWhisperMessage(data,game.users.players.filter((u=>!!u.character)).map((u=>u.character)))}}}class CoC7SettingsDirectory extends Settings{activateListeners(html){super.activateListeners(html),game.user.isGM&&(html.find("#settings-game").append('<button class="trigger-data-migration"><i class="fas fa-wrench"></i> '+game.i18n.localize("CoC7.Migrate.TriggerButton")+"</button>"),html.find(".trigger-data-migration").click((()=>{new Dialog({title:game.i18n.localize("CoC7.Migrate.TriggerTitle"),content:game.i18n.localize("CoC7.Migrate.TriggerContents"),buttons:{migrate:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Migrate.TriggerRestart"),callback:async()=>{await game.settings.set("CoC7","systemUpdateVersion",0),window.location.reload()}},close:{icon:'<i class="fas fa-ban"></i>',label:game.i18n.localize("Cancel"),callback:()=>{}}},default:"close"},{}).render(!0)})))}}class CoC7CompendiumDirectory extends CompendiumDirectory{activateListeners(html){super.activateListeners(html);let translated=!1;if("en"===game.i18n.lang)translated=!0;else if(void 0!==game.babele)for(const v of Object.values(game.babele.modules))v.lang===game.i18n.lang&&(translated=!0);translated||(html.find("footer.directory-footer").append('<a class="compendium-translation" title="'+game.i18n.localize("CoC7.HowToTranslateTitle")+'">'+game.i18n.localize("CoC7.HowToTranslateTitle")+"</a>"),html.find(".compendium-translation").click((()=>{const message="<p>"+game.i18n.localize("CoC7.HowToTranslateWarning")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallBabele")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateEnableTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateNoTranslation")+"</p>";new Dialog({title:game.i18n.localize("CoC7.HowToTranslateTitle"),content:message,buttons:{},default:"close"},{}).render(!0)})))}}class CoC7ActorDirectory extends ActorDirectory{activateListeners(html){super.activateListeners(html);let allowWizard=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;if(!allowWizard){const allowed=game.settings.get("CoC7","InvestigatorWizardQuantity");if(allowed>0){allowWizard=game.actors.filter((a=>[a.ownership.default,a.ownership[game.user.id]??CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE].includes(CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER))).length<allowed}}allowWizard&&(html.find("footer.directory-footer").append('<a class="investigator-wizard">'+game.i18n.localize("CoC7.InvestigatorWizard.Title")+"</a>"),html.find(".investigator-wizard").click((()=>{CoC7InvestigatorWizard.create()}))),game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole&&(html.find("footer.directory-footer").append('<a class="actor-import">'+game.i18n.localize("CoC7.ActorImporter")+"</a>"),html.find(".actor-import").click((()=>{CoC7ActorImporterDialog.create()})))}}class CoC7Spell extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/pentagram-rose.svg"),super(data,context),this.context=context}async cast(){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));const costs=this.system.costs,losses=[];let convertSurplusIntoHitPoints;if(costs.magicPoints=CoC7Utilities.isFormula(costs.magicPoints)?(await new Roll(costs.magicPoints).roll({async:!0})).total:parseInt(costs.magicPoints),costs.magicPoints&&costs.magicPoints>this.actor.system.attribs.mp.value&&(convertSurplusIntoHitPoints=await new Promise((resolve=>{const convertedHitPoints=costs.magicPoints-this.actor.system.attribs.mp.value,convertedMagicPoints=costs.magicPoints-convertedHitPoints,data={title:" ",content:game.i18n.format("CoC7.NotEnoughMagicPoints",{actorMagicPoints:this.actor.system.attribs.mp.value,convertedHitPoints,convertedMagicPoints,originalMagicPoints:costs.magicPoints,spell:this.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>(costs.hitPoints=convertedHitPoints,costs.magicPoints=convertedMagicPoints,resolve(!0))}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)})),!convertSurplusIntoHitPoints))return;for(const[key,value]of Object.entries(costs))value&&0!==Number(value)&&losses.push(await this.resolveLosses(key,value));const description=this.system.description.value,html=await renderTemplate("systems/CoC7/templates/items/spell/chat.html",{description,losses});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:this.name,content:html})}async resolveLosses(characteristic,value){let characteristicName,loss;loss=CoC7Utilities.isFormula(value)?(await new Roll(value).roll({async:!0})).total:parseInt(value);const actorData=this.actor.system;switch(characteristic){case"hitPoints":characteristicName=game.i18n.localize("CoC7.HitPoints"),this.actor.dealDamage(loss,{ignoreArmor:!0});break;case"sanity":characteristicName=game.i18n.localize("CoC7.SanityPoints"),this.grantSanityLoss(loss);break;case"magicPoints":characteristicName=game.i18n.localize("CoC7.MagicPoints"),this.actor.setMp(actorData.attribs.mp.value-loss);break;case"power":characteristicName=game.i18n.localize("CHARAC.Power"),this.actor.update({"system.characteristics.pow.value":actorData.characteristics.pow.value-loss})}return{characteristicName,loss}}async grantSanityLoss(value){const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.CastingSpell",{spell:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=value;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async update(data,context){if(void 0!==this.context.parent&&void 0!==this.context.bookId){let item,book;null===this.context.parent?(item=game.items.get(this.context.bookId),book=item.toObject()):book=this.context.parent.items.get(this.context.bookId).toObject();for(let i=0,im=book.system.spells.length;i<im;i++)book.system.spells[i]._id===this.id&&(book.system.spells[i]=mergeObject(book.system.spells[i],data));null===this.context.parent?(await item.update({"system.spells":book.system.spells}),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)):(await this.context.parent.updateEmbeddedDocuments("Item",[book]),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)),this.sheet.render(!0)}else super.update(data,context)}}class CoC7Book extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/secret-book.svg"),super(data,context)}static convertDifficulty(difficulty){switch(difficulty){case"hard":return CoC7Check.difficultyLevel.hard;case"extreme":return CoC7Check.difficultyLevel.extreme;case"critical":return CoC7Check.difficultyLevel.critical;case"unreadable":return CoC7Check.difficultyLevel.impossible;default:return CoC7Check.difficultyLevel.regular}}async addSpells(spells){const collection=this.system.spells?duplicate(this.system.spells):[];for(const spell of spells)collection.push(spell);return await this.update({"system.spells":collection})}async spellDetail(index){const isKeeper=game.user.isGM,data=this.system.spells[index],parent=this.actor?this.actor:null,spell=new CoC7Spell(data,{parent,bookId:this.id});if(isKeeper||spell.system.learned)return await spell.sheet.render(!0)}async attemptInitialReading(){const difficulty=CoC7Book.convertDifficulty(this.system.difficultyLevel),language=this.system.language,skill=this.actor?.getSkillsByName(language);if(skill){if(0===skill.length)return ui.notifications.error(game.i18n.format("CoC7.UnknownLanguage",{actor:this.actor.name}));{const check=new CoC7Check;return check.actor=this.actor,check.skill=skill[0].id,check.difficulty=difficulty,check.parent=this.uuid,check.context="INITIAL_READING",check.flavor=game.i18n.format("CoC7.ReadAttempt",{book:this.name,language,difficulty:this.system.difficultyLevel}),await check.roll(),await check.toMessage()}}return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"))}async changeProgress(mode,value){if(!this.isOwned&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading&&"reset"!==mode)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));if(!this.system.type.mythos&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotMythosTome"));const necessary=this.system.study.necessary;let fullStudy=this.system.fullStudy,progress=this.system.study.progress;if(isNaN(progress))return await this.update({"system.study.progress":0});if(value&&progress>value)return await this.update({"system.fullStudy":++fullStudy,"system.study.progress":value}),await this.completeFullStudy();if("increase"===mode&&progress<necessary){if(!1!==await this.checkExhaustion())return;if(await this.update({"system.study.progress":++progress}),progress===necessary)return await this.update({"system.fullStudy":++fullStudy}),await this.grantFullStudy()}else if("decrease"===mode&&progress>0)return await this.update({"system.study.progress":--progress})}async checkExhaustion(){const actorMythosValue=this.actor?.cthulhuMythos,mythosRating=this.system.mythosRating;if(this.system.initialReading)return actorMythosValue>=mythosRating&&(await this.update({"system.study.progress":this.system.study.necessary}),ui.notifications.warn(game.i18n.format("CoC7.BookHasNothingMoreToTeach",{actor:this.actor.name,book:this.name})))}async grantFullStudy(){if(!this.system.type.mythos)return;if(!1!==await this.checkExhaustion())return;const actorMythosValue=this.actor.cthulhuMythos,developments=[],mythosRating=this.system.mythosRating;let mythosFinal=this.system.gains.cthulhuMythos.final;if(actorMythosValue+mythosFinal>mythosRating)for(let index=1;index<=mythosFinal;index++)actorMythosValue+mythosFinal-index<=mythosRating&&(mythosFinal-=index);return developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythosFinal)},{name:this.system.language,gain:"development"}),await this.grantSkillDevelopment(developments),await this.rollSanityLoss(),await this.update({"system.fullStudies":++this.system.fullStudies})}async grantInitialReading(){if(this.system.initialReading)return;const developments=[],mythos={gains:this.system.gains.cthulhuMythos.initial,type:this.system.type.mythos},occult={gains:this.system.gains.occult,type:this.system.type.occult},other_gains=this.system.gains.others,other_type=this.system.type.other;if(mythos.type&&mythos.gains&&developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythos.gains)}),occult.type&&occult.gains&&developments.push({name:game.i18n.localize("CoC7.Occult"),gain:parseInt(occult.gains)}),other_type)for(const skill of other_gains){const pattern=skill.name.match(/^(.+) \((.+)\)$/);pattern&&(skill.specialization=pattern[1],skill.name=pattern[2]),"development"!==skill.value&&(skill.value=(await new Roll(skill.value).roll({async:!0})).total),skill.value&&developments.push({name:skill.name,gain:skill.value,specialization:skill.specialization})}return await this.grantSkillDevelopment(developments),(mythos.type||occult.type)&&this.system.sanityLoss&&await this.rollSanityLoss(),await this.update({"system.initialReading":!0})}async grantSpellLearning(spelllearned){for(const spell of this.system.spells)if(spell._id===spelllearned._id){spell.system.learned=!0;await this.actor.items.find((item=>"spell"===item.type&&item.name===spelllearned.name))?ui.notifications.warn(game.i18n.format("CoC7.SpellAlreadyLearned",{spell:spelllearned.name,book:this.name})):spelllearned.system.learned=!0;break}await this.update({"system.spells":this.system.spells}),spelllearned.system.learned&&(ui.notifications.info(game.i18n.format("CoC7.SpellSuccessfullyLearned",{spell:spelllearned.name,book:this.name})),await this.actor.createEmbeddedDocuments("Item",[duplicate(spelllearned)]))}async grantSkillDevelopment(developments){if(0!==developments.length){for(const development of developments){if(!development.gain)continue;let skill=await this.actor.getSkillsByName(development.name);if(0===skill.length){const existingSkill=await game.items.find((item=>"skill"===item.type&&item.name===development.name));existingSkill?skill=await this.actor.createEmbeddedDocuments("Item",[duplicate(existingSkill)]):(skill=await this.actor.createSkill(development.name,0),development.specialization&&await skill[0].update({"system.properties.special":!0,"system.specialization":development.specialization}))}if(skill=skill[0],"development"===development.gain)await skill.flagForDevelopement();else{if(skill.value+development.gain>99)for(let index=1;index<=development.gain;index++)skill.value+development.gain-index<=99&&(development.gain-=index,await skill.increaseExperience(development.gain));await skill.increaseExperience(development.gain)}}return this.showDevelopmentsTable(developments)}}async redoFullStudy(){return await this.update({"system.study.progress":0}),await this.update({"system.study.necessary":2*this.system.study.necessary})}async rollSanityLoss(){const value=this.system.sanityLoss;if(!value||""===value)return;const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.ReadingMythosTome",{book:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=(await new Roll(value).roll({async:!0})).total;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async showDevelopmentsTable(developments){for(const development of developments)development.specialization&&(development.name=`${development.specialization} (${development.name})`),"development"===development.gain?development.gain=game.i18n.localize("CoC7.MarkedForDevelopment"):development.gain=`+${development.gain} ${game.i18n.localize("CoC7.Points")}`;const html=await renderTemplate("systems/CoC7/templates/items/book/development.html",{developments});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.GainsForReading",{book:this.name}),content:html})}async attemptSpellLearning(id){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));const spell=this.system.spells.find((spell=>spell._id===id));if(spell){const check=new CoC7Check;check.actor=this.actor,check.difficulty=CoC7Check.difficultyLevel.hard,check.parent=this.uuid,check.flavor=game.i18n.format("CoC7.LearnSpellAttempt",{book:this.name,spell:spell.name}),check.context="SPELL_LEARNING",check.spell=spell,await check.rollCharacteristic("int"),await check.toMessage()}}async updateRoll(roll){const check=CoC7Check.fromRollString(roll);if(check.passed){if("INITIAL_READING"===check.context)return await this.grantInitialReading();if("SPELL_LEARNING"===check.context)return await this.grantSpellLearning(check.spell)}}}const ECC_CLASS="enhanced-chat-card",PERMISSION_TYPE_GM="gm",PERMISSION_TYPE_NOT_GM="!gm",PERMISSION_TYPE_SPEAKER="speaker",PERMISSION_TYPE_USER="user",PERMISSION_TYPE_BLACKLIST="blacklist",STATE_ON="switched-on",STATE_OFF="switched-off";async function updateMessage(messageId,newContent){const chatMessage=game.messages.get(messageId);await chatMessage.update({content:newContent})}async function GMUpdate(data,options,cardClassName,messageId=void 0){const card=await EnhancedChatCard.fromData(data,options,cardClassName,messageId);return await card.GMUpdate(),card.toObject()}async function advise(){}class EnhancedChatCardLib{constructor(){this.types=new Map,this.socket=null}static injectCSS(){let style=$("head").find("style");style?.length||($("head").append($('<style  type="text/css"></style>')),style=$("head").find("style")),style.append(".ecc-restricted {color: red}\n    .ecc-restricted:hover {cursor: not-allowed}")}static set socket(x){game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.socket=x}static get socket(){if(game.enhancedChatCardsLib){if(game.enhancedChatCardsLib.socket)return game.enhancedChatCardsLib.socket;ui.notifications.error("ECC no socket")}else ui.notifications.error("ECC not Initialized")}static get types(){return game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.types}static register(cardConstructors){cardConstructors.forEach((cardConstructor=>{EnhancedChatCardLib.types.get(cardConstructor.name)||EnhancedChatCardLib.types.set(cardConstructor.name,cardConstructor)}))}}function setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}function getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}class EnhancedChatCard{constructor(data={},options={}){this.data=data,this.data.flags||(this.data.flags={}),this._options=options}async initialize(){}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}set options(x){this._options=x}get template(){return this.options.template}get cssClasses(){return this.options.classes?.join(" ")}get speaker(){return this.options.ooc?game.user:this.options.speaker&&ChatMessage.getSpeakerActor(this.options.speaker)?ChatMessage.getSpeakerActor(this.options.speaker):game.user}async getData(){return{card:this,flags:this.flags,data:this.toObject(),options:this.options,css:this.cssClasses,user:game.user,speaker:this.speaker}}toObject(){if(!this.data)return;const data={};for(const k of Object.keys(this.data)){const v=this.data[k];data[k]=v instanceof Object?v.toObject?v.toObject():deepClone(v):v}return data}async toMessage(optionnalChatData={}){await this.initialize();const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$(html)[0];this.options.attachObject&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes);const speaker=this.options.speaker&&!this.options.ooc?ChatMessage.getSpeaker(this.options.speaker):{},chatData=foundry.utils.mergeObject({user:game.user.id,speaker,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"selfroll"===this.rollMode&&(chatData.whisper=[game.user.id]),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({attachObject=!0}={}){if(this.options.compute&&await this.localCompute(),this.options.GMUpdate&&await this.ExecuteGMUpdate(),this.messageId){const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$.parseHTML(html)[0];attachObject&&!this.data.EEC_ACTION?.detachData&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes),game.enhancedChatCardsLib.socket.executeAsGM("updateMessage",this.messageId,htmlCardElement.outerHTML)}else this.toMessage()}async activateListeners(html){html.on("change","input,select,textarea",this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} .ecc-switch`,this._onToggle.bind(this)),html.on("click",`.${ECC_CLASS} .submit`,this._onSubmit.bind(this)),html.on("focusout",`.${ECC_CLASS} input`,this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} button`,this._onButton.bind(this)),html.on("keydown",`.${ECC_CLASS} form`,this._onKey.bind(this)),html.find("[data-ecc-visibility]").each((async(i,el)=>await this.setVisibility(el))),html.find("[data-ecc-permissions]").each((async(i,el)=>await this.setPermission(el))),html.find(`.${ECC_CLASS} .ecc-switch`).each(((i,el)=>this.setState(el))),html.find(`.${ECC_CLASS} input[type="radio"]`).each(((i,el)=>this.setRadioState(el)))}setState(element){if(element&&(element.dataset.flag&&element.classList.add(this.flags[element.dataset.flag]?STATE_ON:STATE_OFF),element.dataset.name)){const value=getByPath(this,element.dataset.name);element.classList.add(value?STATE_ON:STATE_OFF)}}setRadioState(element){if(!element||!element.name)return;const splited=element.name.split(".");"data"===splited[0].toLowerCase()&&this.data&&void 0!==this.data[splited[1]]&&this.data[splited[1]]===element.value&&(element.checked=!0)}async setVisibility(element){if(!element.dataset.eccVisibility)return;await this.hasPerm(element.dataset.eccVisibility,!0)||(element.style.display="none")}async setPermission(element){if(!element.dataset.eccPermissions)return;await this.hasPerm(element.dataset.eccPermissions)||(element.classList.add("ecc-restricted"),$(element).is("input")&&("range"===element.type?$(element).attr("disabled",!0):$(element).attr("readonly",!0)),$(element).is("select")&&$(element).attr("disabled",!0))}async hasPerm(restrictedTo,vision=!1){if(!restrictedTo.length)return!0;let permissionsArray=restrictedTo.split(" ");const whiteList=!permissionsArray.includes(PERMISSION_TYPE_BLACKLIST);if(whiteList||(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_BLACKLIST))),game.user.isGM){if(!vision)return!0;if(permissionsArray.includes(PERMISSION_TYPE_GM))return whiteList;if(permissionsArray.includes(PERMISSION_TYPE_NOT_GM))return!whiteList}if(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_GM)),permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_NOT_GM)),permissionsArray.includes(PERMISSION_TYPE_USER)){if(this.message.isAuthor)return whiteList;permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_USER))}if(permissionsArray.includes(PERMISSION_TYPE_SPEAKER)){const speaker=this.message.data.speaker;if(speaker.token&&speaker.scene){const actor=await fromUuid(`Scene.${speaker.scene}.Token.${speaker.token}`);if(actor&&actor.isOwner)return whiteList}else if(speaker.actor){const actor=game.actors.get(speaker.actor);if(actor&&actor.isOwner)return whiteList}permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_SPEAKER))}if(permissionsArray.length)for(let i=0;i<permissionsArray.length;i++){const uuid=permissionsArray[i];let actor=await fromUuid(uuid);if(actor||(actor=game.actors.get(uuid)),actor)return actor.isOwner;ui.notifications.error(`Unable to find actor ${uuid}`)}return!whiteList}static async bindListeners(html){const htmlCardElement=html[0].querySelector(`.${ECC_CLASS}`);if(!htmlCardElement)return;const card=await EnhancedChatCard.fromHTMLCardElement(htmlCardElement);card&&card.activateListeners(html)}get flags(){return this.data.flags}async assignObjects(){}async localCompute(){}async GMUpdate(){}async ExecuteGMUpdate(){const newData=await game.enhancedChatCardsLib.socket.executeAsGM("GMUpdate",this.toObject(),this._options,this.constructor.name,this.messageId);this.data=newData,await this.assignObjects()}async _onButton(event){event.preventDefault();const target=event.currentTarget;target.style.display="none";const action=target.dataset.action;let formUpdate,actionUpdate=!1;const card=target.closest(`.${ECC_CLASS}`);card?formUpdate=this._update(card):console.error(`Could not find a EEC class for this card: ${this.constructor.name}`);const originalDisplayStyle=target.style.display;(action||(console.warn("no action associated with this button"),formUpdate))&&(this[action]||(console.warn(`no ${action} action found for this card`),formUpdate))&&(this[action]&&(actionUpdate=await this[action]({event,updateCard:!1})),formUpdate||actionUpdate?await this.updateChatCard():target.style.display=originalDisplayStyle)}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onChange(event){if(this.options.submitOnChange)return this._onSubmit(event)}_onSubmit(event){const target=event.currentTarget;if("BUTTON"===target.tagName&&"action"in target.dataset)return;event.preventDefault();const card=target.closest(`.${ECC_CLASS}`);if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i],data=new FormDataExtended(form).object;for(const[key,value]of Object.entries(data)){getByPath(this,key)!==value&&(setByPath(this,key,value),updates=!0)}}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{attachObject:!0,classes:[ECC_CLASS],exclude:[],excludeStartWith:"_",submitOnChange:!0,speaker:ChatMessage.getSpeaker(),ooc:!1,compute:!0,GMUpdate:!1}}get objectDataString(){const saveData={data:this.data,options:this._options};return JSON.stringify(saveData,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(htmmlCard){if(!htmmlCard)return;if(!htmmlCard.dataset.eccClass)return;if(!htmmlCard.dataset.object)return;const cardData=JSON.parse(unescape(htmmlCard.dataset.object)),message=htmmlCard.closest(".message"),messageId=message?.dataset?.messageId;return await this.fromData(cardData.data,cardData.options,htmmlCard.dataset.eccClass,messageId)}static async fromData(data,options,cardClassName,messageId=void 0){const CardClass=game.enhancedChatCardsLib.types.get(cardClassName);if(!CardClass)return void console.error(`Unknown chat card type: ${cardClassName}`);const card=new CardClass(data,options);return messageId&&(card.messageId=messageId),await card.assignObjects(),card}setData(name){(name||"string"===$.type(name))&&setByPath(this,name,!0)}unsetData(name){(name||"string"===$.type(name))&&setByPath(this,name,!1)}toggleData(name){if(!name&&"string"!==$.type(name))return;setByPath(this,name,!getByPath(this,name))}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const name=target.dataset.flag?`data.flags.${target.dataset.flag}`:target.dataset.name;if(!name)return;const toggle=target.closest(".ecc-radio");if(toggle){const buttons=toggle.querySelectorAll(".ecc-switch");for(const b of buttons){const bName=b.dataset.flag?`data.flags.${b.dataset.flag}`:b.dataset.name;this.unsetData(bName)}this.setData(name)}else this.toggleData(name);const card=target.closest(`.${ECC_CLASS}`);this.options.submitOnChange&&card&&this._update(card),await this.updateChatCard()}}class _participant{constructor(data={}){this.data=data}_fetch(){if(!this._doc&&this.data.docUuid&&(this._doc=CoC7Utilities.getDocumentFromKey(this.data.docUuid)),!this._actor)if(this._doc)switch(this._doc.constructor?.name){case"TokenDocument":this._actor=this._doc.actor;break;case"CoCActor":this._actor=this._doc}else this._actor=CoC7Utilities.getActorFromKey(this.data.docUuid)}get actor(){return this._fetch(),this._actor}get isActor(){return this.hasActor||this.hasVehicle}get isActive(){return this.data.active||!1}get key(){return this.hasVehicle?this.vehicle.actorKey:this.hasActor?this.actor.actorKey:void 0}get icon(){return this.isActor?this.hasVehicle?this.vehicle.img:this.hasActor?this.actor.img:void 0:"systems/CoC7/assets/icons/question-circle-regular.svg"}get driver(){return this._driver||(this._driver=CoC7Utilities.getActorFromKey(this.data.docUuid)),this._driver}get vehicle(){return this.data.vehicleKey&&(this._vehicle=chatHelper.getActorFromKey(this.data.vehicleKey)),this._vehicle}get hasActor(){return!!this.actor}get hasVehicle(){return!!this.vehicle}get name(){return this.hasVehicle?this.vehicle.name:this.hasActor?this.actor.name:this.data.name||void 0}get mov(){return this.data.mov||(this.hasVehicle?this.data.mov=this.vehicle.mov:this.hasActor&&(this.data.mov=this.actor.mov)),this.data.mov&&(isNaN(Number(this.data.mov))?(this.data.hasValidMov=!1,this.data.mov=void 0):this.data.hasValidMov=!0),this.data.mov}get uuid(){return this.data.uuid}get hasMaxBonusDice(){return this.bonusDice>=2}get bonusDice(){return isNaN(this.data.bonusDice)||this.data.bonusDice<0||this.data.bonusDice>2?0:this.data.bonusDice}set bonusDice(x){isNaN(x)?ui.notifications.error("Bonus dice can Only be a number"):x>2?ui.notifications.error("Max 2 bonus dice"):x<0?ui.notifications.error("No negativ bonus dice"):this.data.bonusDice=x}get hp(){return this.data.hp||(this.data.hp=0),this.actor&&(this.data.hp=this.actor.hp),this.data.hp}set hp(x){this.data.hp=x,this.actor&&this.actor.setHp(x)}addBonusDice(){this.data.bonusDice>=2?ui.notifications.error("Already have max bonus dice"):this.data.bonusDice+=1}removeBonusDice(){this.data.bonusDice<=0?ui.notifications.error("Already have 0 bonus dice"):this.data.bonusDice-=1}resetBonusDice(){this.data.bonusDice=0}get hasBonusDice(){return this.hasOneBonusDice||this.hasTwoBonusDice}get hasOneBonusDice(){return this.bonusDice>=1}get hasTwoBonusDice(){return this.bonusDice>=2}get canAssist(){return this.assist?.length>0}get canBeCautious(){return!this.hasMaxBonusDice}get assist(){return this.data.assist||[]}get dex(){return this.data.dex||(this.hasVehicle&&this.hasDriver?this.data.dex=this.driver.characteristics.dex.value:this.hasActor&&(this.data.dex=this.actor.characteristics.dex.value)),this.data.dex&&(isNaN(Number(this.data.dex))?(this.data.hasValidDex=!1,this.data.dex=0):this.data.hasValidDex=!0),this.data.dex}get hasAGunReady(){return this.data.hasAGunReady||!1}get initiative(){let init=this.dex;return this.hasAGunReady&&(init+=50),init}get isChaser(){return!!this.data.chaser}get isPrey(){return!this.isChaser}get isValid(){return this.hasValidDex&&this.hasValidMov}get hasValidDex(){return!isNaN(Number(this.data.dex))}get hasValidMov(){return!isNaN(Number(this.data.mov))}get hasDriver(){return this.hasVehicle&&this.hasActor}get movAdjustment(){if(this.data.speedCheck?.rollDataString){const roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString);if(roll&&!roll.standby){if(roll.successLevel>=CoC7Check.successLevel.extreme)return 1;if(roll.failed)return-1}}return 0}get adjustedMov(){if(void 0!==this.mov&&!isNaN(Number(this.mov)))return Number(this.mov)+this.movAdjustment}get hasMovAdjustment(){return this.hasBonusMov||this.hasMalusMov}get hasBonusMov(){return this.data.movAdjustment>0}get hasMalusMov(){return this.data.movAdjustment<0}tooSlow(){this.data.excluded=!0}includeInChase(){this.data.excluded=!1,this.data.escaped=!1}escaped(){this.data.escaped=!0}set slowest(x){this.data.slowest=x}get slowest(){return this.data.slowest}set fastest(x){this.data.fastest=x}get fastest(){return this.data.fastest}calculateMovementActions(minMov){void 0===this.movementAction||void 0===this.adjustedMov||isNaN(minMov)?this.movementAction=0:this.movementAction=this.adjustedMov-minMov+1}set movementAction(x){this.data.movementAction=x}get movementAction(){return this.data.movementAction}set currentMovementActions(x){this.data.currentMovementActions=x}get currentMovementActions(){return this.data.currentMovementActions||0}get hasMaxMvtActions(){return this.currentMovementActions>=this.movementAction}get hasNoMvtActions(){return this.currentMovementActions<=0}addMovementActions(x=1){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}alterMovementActions(x){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}get movementActionArray(){const baseArray=Array(this.movementAction).fill("base");if(this.currentMovementActions>=0){for(let i=0;i<this.currentMovementActions;i++)baseArray[i]="base available";return baseArray}if(this.currentMovementActions<0){return Array(Math.abs(this.currentMovementActions)).fill("deficit").concat(baseArray)}}get cssClass(){const cssClasses=[];return this.isChaser?cssClasses.push("chaser"):cssClasses.push("prey"),this.data.excluded&&cssClasses.push("excluded","too_slow"),this.data.escaped&&cssClasses.push("escaped"),this.data.fastest&&cssClasses.push("fastest"),this.data.slowest&&cssClasses.push("slowest"),this.data.active&&cssClasses.push("active"),this.data.currentMovementActions<=0&&cssClasses.push("no-actions"),cssClasses.join(" ")}get speedCheck(){const check={};if(this.data.speedCheck?.name&&(check.name=this.data.speedCheck.name),this.data.speedCheck?.score&&(check.score=this.data.speedCheck.score),check.cssClasses="",this.data.speedCheck?.rollDataString&&(check.roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString),check.roll&&(check.roll.standby&&!check.roll.hasCard||(check.rolled=!0,check.inlineRoll=check.roll.inlineCheck.outerHTML,check.cssClasses+="rolled",check.roll.standby||(check.roll.successLevel>=CoC7Check.successLevel.extreme?check.modifierCss="upgrade":check.roll.failed&&(check.modifierCss="downgrade"),(check.roll.successLevel>=CoC7Check.successLevel.extreme||check.roll.failed)&&(check.hasModifier=!0))))),this.hasActor){check.options=[];for(const c of["con"]){const characteristic=this.actor.getCharacteristic(c);characteristic?.value&&check.options.push(characteristic.label)}for(const s of this.actor.driveSkills)check.options.push(s.name);for(const s of this.actor.pilotSkills)check.options.push(s.name);if(check.hasOptions=!!check.options.length,this.data.speedCheck?.id){let item=this.actor.find(this.data.speedCheck.id);if(!item){const gameItem=game.items.get(this.data.speedCheck.id);gameItem&&(item=this.actor.find(gameItem.name))}item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}else if(this.data.speedCheck?.name){const item=this.actor.find(this.data.speedCheck.name);item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}}else if(this.data.speedCheck?.id){const item=game.items.get(this.data.speedCheck.id);item&&"skill"===item.data?.type&&(check.ref=item,check.name=item.name,check.type="skill",check.isSkill=!0,check.refSet=!1,check.score=item.base)}else this.data.speedCheck?.name&&this.data.speedCheck?.score&&(check.name=this.data.speedCheck.name,check.score=this.data.speedCheck.score,check.refSet=!1);return check.canBeRolled=!0,check.rolled||check.score||(check.cssClasses+=" invalid",check.canBeRolled=!1),check.isValid=check.rolled&&!isNaN(check.score),check}}function sortByRoleAndDex(a,b){return!a&&b?1:!b&&a?-1:a||b?b.chaser&&!a.chaser?1:a.chaser&&!b.chaser?-1:a.dex-b.dex:0}class ChaseObstacleCard extends EnhancedChatCard{static get defaultOptions(){const options=mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/chat/cards/chase-obstacle.html",GMUpdate:!0});return options.classes.push("obstacle-card"),options}async getData(){const data=await super.getData();if(data.status=[],data.strings={},data.displayActorOnCard=game.settings.get("CoC7","displayActorOnCard"),data.status.push({name:game.i18n.localize("CoC7.ActionCost")+` :${this.data.totalActionCost}`}),data.card.breakableObstacle=data.data.obstacle?.barrier&&data.data.obstacle.hasHitPoints,data.card.validCheck=!1,data.data.states?.obstacleDefined&&(data.data.obstacle.hazard||data.data.obstacle.barrier&&!data.data.obstacle.hasHitPoints)&&(data.data.states.tryToNegotiate=!0,data.data.states.tryToBreak=!1,data.data.states.breakOrNegotiateDefined=!0),this.participant?.actor?(data.skill=this.participant.actor.find(data.data.obstacle.checkName),data.checkOptions=this.chase.getActorSkillsAndCharacteristics(this.data.participantUuid),data.skill?(data.validCheck=!0,data.validSkill=!0):data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)):(data.checkOptions=this.chase.allSkillsAndCharacteristics,data.dummyActor=!0,data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)),data.data.bonusDice||(data.data.bonusDice=0),data.data.bonusDice<2&&data.data.totalActionCost<data.data.movementAction&&(data.canTakeCautiousApproach=!0),data.customWeapon=!1,"0"===this.data.weaponChoice&&(data.customWeapon=!0),data.validCheck){let checkName,value;data.skill?(checkName=data.skill.value.name,value=data.skill.value.value):(checkName=data.data.obstacle.checkName,value=data.data.checkThreshold),data.strings.checkRollRequest=game.i18n.format("CoC7.AskRoll",{name:checkName,value}),0!==data.data.bonusDice&&(data.data.bonusDice>0?data.strings.checkRollRequest+=` (+${data.data.bonusDice})`:data.strings.checkRollRequest+=` (${data.data.bonusDice})`)}if(data.data.states?.obstacleDefined){if(data.strings.obstacleDefined=game.i18n.format("CoC7.FacingObstacle",{type:data.data.obstacle.barrier?game.i18n.localize("CoC7.ABarrier"):game.i18n.localize("CoC7.AHazard")}),data.data.obstacle.name&&(data.strings.obstacleDefined+=` (${data.data.obstacle.name})`),data.data.states.canAskRoll=!0,data.data.obstacle.barrier&&(data.status.push({name:game.i18n.localize("CoC7.Barrier")}),data.data.obstacle.hasHitPoints&&data.status.push({name:game.i18n.localize("CoC7.Breakable")})),data.data.obstacle.hazard&&data.status.push({name:game.i18n.localize("CoC7.Hazard")}),this.data.states.tryToNegotiate&&(data.validCheck?data.validSkill||data.status.push({name:game.i18n.localize("CoC7.NoValidSkill"),css:"warning"}):(data.status.push({name:game.i18n.localize("CoC7.NoValidCheck"),css:"error"}),data.strings.EnterValueTitle=game.i18n.format("CoC7.SkillSelectBase",{name:data.data.obstacle.checkName}),data.data.checkThreshold||(data.data.states.canAskRoll=!1))),this.data.states.tryToBreak){let damageStatus=game.i18n.localize("CoC7.BreakDown");this.data.objects?.obstacleDamageRoll?.total&&(damageStatus+=` : ${this.data.objects.obstacleDamageRoll.total}`),data.status.push({name:damageStatus}),this.data.states.obstacleDamageRolled&&(this.data.objects?.obstacleDamageRoll?.total<=0?data.strings.obstacleDamage=game.i18n.localize("CoC7.NoDamageDealt"):(data.inlineDamageRoll=createInlineRoll(this.data.objects.obstacleDamageRoll)?.outerHTML,data.strings.obstacleDamage=game.i18n.format("CoC7.DamageDealt",{value:data.inlineDamageRoll})))}if(this.data.states.tryToNegotiate&&data.status.push({name:game.i18n.localize("CoC7.Negotiate")}),this.data.totalCautiousApproach){const cautiousStatus={name:game.i18n.localize("CoC7.Cautious"),css:""};this.data.totalCautiousApproach>1?(cautiousStatus.css="strong",data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingVeryCautious")):data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingCautious"),this.data.flags.consumeBonusDice&&(cautiousStatus.css+=" consume"),data.status.push(cautiousStatus)}this.data.objects?.check&&(this.data.obstacle.hazard&&(this.data.movePlayer=!0),this.data.objects.check.passed?(void 0===this.data.movePlayer&&(this.data.movePlayer=!0),data.strings.obstaclePassed=game.i18n.localize("CoC7.ObstaclePassed"),this.data.objects.check.luckSpent&&(data.strings.obstaclePassed+=` (${game.i18n.localize("CoC7.GotLucky")})`),data.status.push({name:game.i18n.localize("CoC7.Success"),css:"success"})):this.data.objects.check.isFumble?(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFumble"),data.status.push({name:game.i18n.localize("CoC7.Fumble"),css:"fumble"})):(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFail"),data.status.push({name:game.i18n.localize("CoC7.Failure"),css:"failure"})))}if(this.data.states.playerActionDefined&&(this.data.obstacle.hazard?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToNegotiateHazard"):this.data.obstacle.barrier&&(this.data.states.tryToNegotiate?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToGetPastBarriers"):this.data.states.tryToBreak&&(data.strings.playerIntentions=game.i18n.localize("CoC7.TryToBreak")))),this.data.states.checkRolled&&(this.data.states.cardResolved?data.htmlCheck=await(this.data.objects.check.inlineCheck?.outerHTML):data.htmlCheck=await this.data.objects.check.getHtmlRoll()),this.data.states.cardResolved){data.playerDamageTaken=!1,data.obstalceDefinitionChanged=!1;this.listChanges().changes&&(data.obstalceDefinitionChanged=!0),this.data.obstacle.hasDamage&&this.data.objects?.check?.isFailure&&(data.playerDamageTaken=!0,data.inlineDamageTakenRoll=createInlineRoll(this.data.objects.failedDamageRoll)?.outerHTML,0===data.data.totalPlayerDamageTaken?data.strings.damageTaken=game.i18n.localize("CoC7.YouTakeNoDamage"):data.strings.damageTaken=game.i18n.format("CoC7.YouTakeSomeDamage",{amount:data.data.totalPlayerDamageTaken}),data.status.push({name:game.i18n.localize("CoC7.TotalDamage")+` :${data.data.totalPlayerDamageTaken}`})),this.data.obstacle.hasActionCost&&this.data.obstacle.hazard&&this.data.objects?.check?.isFailure&&(data.actionLost=!0,data.strings.actionLost=game.i18n.localize("CoC7.YouLostTime"),data.inlineActionLostRoll=createInlineRoll(this.data.objects.failedActionRoll)?.outerHTML),data.status.push({name:game.i18n.localize("CoC7.CardResolved")})}return this.data.states.closed&&(this.data.movePlayer?data.strings.finalOutcome=game.i18n.localize("CoC7.MoveToLocation"):data.strings.finalOutcome=game.i18n.localize("CoC7.DontMoveToLocation")),data}async GMUpdate(){if(game.user.isGM){if(this.data.states.cardResolved){if(this.data.objects?.failedDamageRoll?.total){const totalDamage=this.data.objects.failedDamageRoll.total,armorValue=this.data.flags.ignoreArmor?0:this.data.armor;CoC7Utilities.isFormula(armorValue)?this.data.armor=(await new Roll(armorValue).roll({async:!0})).total:isNaN(Number(armorValue))||(this.data.armor=Number(armorValue)),void 0===this.data.totalPlayerDamageTaken&&(this.data.totalPlayerDamageTaken=totalDamage-this.data.armor,this.data.totalPlayerDamageTaken<0&&(this.data.totalPlayerDamageTaken=0))}void 0===this.data.reflectObstaleChanges&&(this.data.reflectObstaleChanges=!0),void 0===this.data.movePlayer&&(this.data.movePlayer=(this.data.states.tryToNegotiate||this.data.obstacle.hazard)&&!this.data.states.failedConsequencesRolled),this.data.obstacle.barrier&&this.data.obstacle.hasHitPoints&&this.data.objects?.obstacleDamageRoll?.total&&(void 0===this.data.totalObstacleDamage&&(this.data.totalObstacleDamage=this.data.objects.obstacleDamageRoll.total),void 0===this.data.flags.obstacleDestoyed&&(this.data.flags.obstacleDestoyed=this.data.obstacle.HitPoints-this.data.totalObstacleDamage<=0))}this.data.states.closed&&(this.data.movementActionArray=duplicate(this.participant.movementActionArray),this.data.EEC_ACTION={detachData:!0})}else console.error("CoC7: GMUpdate called from non GM user")}async localCompute(){}async assignObjects(){this.data.objects?.check&&"Object"===this.data.objects.check?.constructor?.name&&(this.data.objects.check=CoC7Check.fromData(this.data.objects.check)),this.data.objects?.obstacleDamageRoll&&"Object"===this.data.objects.obstacleDamageRoll?.constructor?.name&&(this.data.objects.obstacleDamageRoll=Roll.fromData(this.data.objects.obstacleDamageRoll)),this.data.objects?.failedDamageRoll&&"Object"===this.data.objects.failedDamageRoll?.constructor?.name&&(this.data.objects.failedDamageRoll=Roll.fromData(this.data.objects.failedDamageRoll)),this.data.objects?.failedActionRoll&&"Object"===this.data.objects.failedActionRoll?.constructor?.name&&(this.data.objects.failedActionRoll=Roll.fromData(this.data.objects.failedActionRoll))}async initialize(){this.chase&&void 0!==this.chase.activeParticipantData?.uuid&&(void 0===this.data&&(this.data={}),void 0===this.data.states&&(this.data.states={}),this.data.obstacle=this.location?.obstacleDetails,this.data.participantUuid=this.chase.activeParticipantData.uuid,this.participantData?.bonusDice>0&&(this.data.bonusDice=this.participantData.bonusDice,this.data.flags.consumeBonusDice=!0,this.data.flags.hasBonusDice=this.participant.hasBonusDice),this.data.movementActionArray=duplicate(this.participant.movementActionArray),this.data.movementAction=this.participant.currentMovementActions,this.data.totalActionCost=0)}get participant(){if(this.participantData)return new _participant(this.participantData)}get participantData(){if(this.chase&&this.data.participantUuid)return this.chase.getParticipantData(this.data.participantUuid)}get location(){if(this.chase)return this.chase.getLocationData(this.data.locationUuid)}get obstacle(){if(this.location)return this.location.obstacleDetails}get chase(){if(this.data.chaseUuid)return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.data.chaseUuid)),this._chase}get roll(){let rollData;if(this.participant.actor&&this.data.obstacle.checkName){const actorSkill=this.participant.actor.find(this.data.obstacle.checkName);rollData=void 0!==actorSkill?actorSkill:{type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold}},rollData.actor={actorKey:this.participant.actor.id}}else this.data.obstacle.checkName&&this.data.checkThreshold&&(rollData={type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold},actor:{name:this.participant.name}});return rollData&&(rollData.diceModifier=this.data?.bonusDice||0,rollData.difficulty=CoC7Check.difficultyLevel.regular,rollData.denyPush=!0),rollData||void 0}get validFailedRolls(){if(!this.data.objects?.check?.isFailure)return!1;if(this.data.obstacle.hasDamage){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;if(!this.data.obstacle.failedCheckDamage)return!1;if(this.data.obstacle.failedCheckDamage&&!Roll.validate(damage))return!1}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;if(!this.data.obstacle.failedActionCost)return!1;if(this.data.obstacle.failedActionCost&&!Roll.validate(actionCost))return!1}return!0}get weaponsOptions(){const weapons=[];if(this.participant.actor?.itemTypes?.weapon?.forEach((w=>{let formula=w.data.data.range.normal.damage,db=this.participant.actor.db;db=null===db||0===Number(db)?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),w.data.data.properties.addb&&(formula+=db),w.data.data.properties.ahbd&&(formula=formula+db+"/2"),weapons.push({name:`${w.data.name} (${formula})`,damage:formula,uuid:w.uuid})})),weapons.sort(CoC7Utilities.sortByNameKey),!weapons.find((w=>w.name.toUpperCase().startsWith(game.i18n.localize("CoC7.UnarmedWeaponName")?.toUpperCase())))){let db="";this.participant.actor&&(db=this.participant.actor.db,db&&!db.startsWith("-")&&(db="+"+db),null!==db&&0!==Number(db)||(db="")),weapons.unshift({name:`${game.i18n.localize("CoC7.UnarmedWeaponName")} (1D3${db})`,damage:`1D3${db}`,uuid:"unarmed"})}return weapons.push({name:game.i18n.localize("CoC7.Other"),damage:this.data?.customWeaponDamage||null,uuid:0}),weapons}get usedWeapon(){if(!this.data?.weaponChoice){if(!this.weaponsOptions)return;this.data||(this.data={}),this.data.weaponChoice=this.weaponsOptions[0].uuid}if(this.data.weaponChoice){const weapon=this.weaponsOptions.find((e=>e.uuid===this.data.weaponChoice));if(weapon)return weapon}}get inflictedDamageFormula(){if(this.usedWeapon){const weapon=this.usedWeapon;return weapon&&weapon.damage&&Roll.validate(weapon.damage)?weapon.damage:void 0}}get validObstacleDamage(){return!!(this.data.obstacle.hasHitPoints&&!isNaN(Number(this.data.obstacle.HitPoints))&&Number(this.data.obstacle.HitPoints)>0&&this.inflictedDamageFormula)}get strings(){const strings={};return strings.damageRollRequest=this.usedWeapon.name,strings}async validateCard(options){let loactionChanged,participantChaged=!1;const obstacleUpdate={obstacleDetails:{}},participantUpdate={};this.data.flags.obstacleDestoyed&&(loactionChanged=!0,obstacleUpdate.obstacle=!1,obstacleUpdate.obstacleDetails.hazard=!1,obstacleUpdate.obstacleDetails.barrier=!1);const diff=this.listChanges();if(diff.changes&&this.data.reflectObstaleChanges)for(const[key,value]of Object.entries(diff.obstacle))"type"!==key&&(obstacleUpdate.obstacleDetails[value.key]=value.new,loactionChanged=!0);if(this.data.totalObstacleDamage>0&&this.data.obstacle.hasHitPoints){let remainingHp=this.data.obstacle.HitPoints;remainingHp-=this.data.totalObstacleDamage,remainingHp<0&&(remainingHp=0),this.obstacle.HitPoints!==remainingHp&&(obstacleUpdate.obstacleDetails.HitPoints=remainingHp,this.data.obstacle.HitPoints=remainingHp,loactionChanged=!0)}if(this.data.totalPlayerDamageTaken>0&&(participantChaged=!0,this.participant.actor?await this.participant.actor.dealDamage(this.data.totalPlayerDamageTaken,{ignoreArmor:!0}):(participantUpdate.hp=this.participantData.hp,participantUpdate.hp-=this.data.totalPlayerDamageTaken,participantUpdate.hp<0&&(participantUpdate.hp=0))),this.data.totalActionCost>0&&(participantChaged=!0,participantUpdate.currentMovementActions=this.participantData.currentMovementActions,participantUpdate.currentMovementActions-=this.data.totalActionCost),void 0===this.data.flags.consumeBonusDice&&(this.data.flags.consumeBonusDice=!0),this.data.flags.consumeBonusDice?(participantChaged=!0,participantUpdate.bonusDice=0):isNaN(this.data.bonusDice)||this.data.bonusDice===this.participant.bonusDice||(participantUpdate.bonusDice=this.data.bonusDice),this.data.movePlayer){let targetLocation;targetLocation=this.data.forward?this.location:this.chase.getLocationShift(this.location.uuid,{skip:-1}),targetLocation.uuid&&await this.chase.moveParticipantToLocation(this.participantData.uuid,targetLocation.uuid,{scrollToLocation:!0,activateLocation:!1,render:!1})}return loactionChanged&&await this.chase.updateLocation(this.location.uuid,obstacleUpdate,{render:!1}),participantChaged&&await this.chase.updateParticipant(this.participantData.uuid,participantUpdate,{render:!1}),this.data.states.closed=!0,await this.chase.activateNextParticipantTurn(),!0}async defineObstacle(options){return this.data.states||(this.data.states={}),this.data.states.obstacleDefined=!0,!0}async tryToNegotiateObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!0,this.data.states.tryToBreak=!1,!0}async tryToBreakDownObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!0,!0}async cancelObstacleDefinition(options){return this.data.states.obstacleDefined=!1,this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0}async cancelBreakOrPassChoice(options){return this.data.obstacle.hasHitPoints?(this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0):this.cancelObstacleDefinition()}async requestRoll(options){return this.data.states.playerActionDefined=!0,!0}async takeCautiousApproach(options){return this.data.totalCautiousApproach||(this.data.totalCautiousApproach=0),this.data.totalCautiousApproach+=1,this.data.bonusDice+=1,this.data.totalActionCost+=1,this.data.flags.consumeBonusDice||(this.data.flags.consumeBonusDice=!0),this.data.flags.hasBonusDice||(this.data.flags.hasBonusDice=!0),this.data.movementAction<=this.data.totalActionCost&&(this.data.flags.consumeBonusDice=!1,this.data.states.cardResolved=!0,this.data.movePlayer=!1),!0}async rollSkillCheck(options){const target=options.event.currentTarget;if(!target.classList.contains("disabled")){if(target.classList.toggle("disabled"),this.roll)return this.data.objects||(this.data.objects={}),this.data.objects.check=CoC7Check.createFromActorRollData(this.roll),!!this.data.objects.check&&(this.data.objects.check.denyPush=!0,await this.data.objects.check._perform({forceDSN:!0}),this.data.totalActionCost+=1,this.data.states.checkRolled=!0,target.classList.toggle("disabled"),this.data.objects.check.passed?(this.data.movePlayer=!0,this.data.states.cardResolved=!0):void 0===this.data.armor&&this.participant.actor&&(this.data.armor=this.participant.actor.data.data.attribs.armor.value||0),!0);ui.notifications.error(game.i18n.localize("CoC7.NothingToRoll"))}}async useLuck(options){return await CoC7Check.alter(this.data.objects.check,"useLuck",{target:options.event.currentTarget,update:!1}),this.data.objects.check.passed&&(this.data.states.cardResolved=!0,this.data.movePlayer=!0,this.data.totalActionCost+=1),!0}async rollFailConsequences(options){if(this.data.objects||(this.data.objects={}),this.data.obstacle.hasDamage&&this.data.objects.check?.isFailure){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;this.data.objects.failedDamageRoll=new Roll(damage),await this.data.objects.failedDamageRoll.evaluate({async:!0})}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost&&this.data.objects.check?.isFailure){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;this.data.objects.failedActionRoll=new Roll(actionCost),await this.data.objects.failedActionRoll.evaluate({async:!0}),this.data.totalActionCost+=this.data.objects.failedActionRoll.total-1}return this.data.states.failedConsequencesRolled=!0,this.data.states.cardResolved=!0,!0}async askRollObstacleDamage(options){return this.data.states.playerActionDefined=!0,!0}async rollObstacleDamage(options){return this.data.objects||(this.data.objects={}),this.data.objects.obstacleDamageRoll=new Roll(this.usedWeapon?.damage),await this.data.objects.obstacleDamageRoll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.data.objects.obstacleDamageRoll),this.data.states.obstacleDamageRolled=!0,this.data.totalActionCost+=1,this.data.states.cardResolved=!0,!0}listChanges(validate=!1){const diff={obstacle:{},player:{},changes:!1},names={barrier:game.i18n.localize("CoC7.Type"),hazard:game.i18n.localize("CoC7.Type"),hasHitPoints:game.i18n.localize("CoC7.Breakable"),HitPoints:game.i18n.localize("CoC7.HitPoints"),hasActionCost:game.i18n.localize("CoC7.ActionCost"),failedActionCost:game.i18n.localize("CoC7.ActionCost"),hasDamage:game.i18n.localize("CoC7.FightBack"),failedCheckDamage:game.i18n.localize("CoC7.WeaponDamage"),checkName:game.i18n.localize("CoC7.Check"),name:game.i18n.localize("CoC7.Name")};validate&&!this.data.validation&&(this.data.validation={});const newObstacle=foundry.utils.diffObject(this.obstacle,this.data.obstacle);for(const[key]of Object.entries(newObstacle))""===newObstacle[key]&&null===this.obstacle[key]||!isNaN(Number(newObstacle[key]))&&Number(newObstacle[key])===this.obstacle[key]||(diff.changes=!0,diff.obstacle[key]={old:this.obstacle[key],new:newObstacle[key],name:names[key],key},validate&&(this.data.validation[key]=!0));return diff}}class CoC7Chase extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/running-solid.svg"),super(data,context),this.context=context}get participants(){const pList=[],preys=this.system.participants.filter((p=>!p.chaser)).map((p=>new _participant(p))),chasers=this.system.participants.filter((p=>p.chaser)).map((p=>new _participant(p)));return this.system.participants.forEach((p=>{p.assist=[],p.chaser?p.assist=chasers.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name}))):p.assist=preys.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name})));const particpant=new _participant(p);pList.push(particpant)})),pList}get participantsObject(){const participants=this.participants;return participants.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),participants}get activeParticipantData(){return this.system.participants.find((p=>p.active))}get activeActor(){const p=this.activeParticipantData;if(p)return p.docUuid?CoC7Utilities.getActorFromKey(p.docUuid):void 0}get participantsByAdjustedMov(){const pList=this.actualParticipants.sort(((a,b)=>a.adjustedMov-b.adjustedMov));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get participantsByInitiative(){const pList=this.actualParticipants.sort(((a,b)=>b.initiative-a.initiative));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get preys(){return this.participants.filter((p=>!p.isChaser&&p.isValid))||[]}get chasers(){return this.participants.filter((p=>p.isChaser&&p.isValid))||[]}get allHaveValidMov(){return this.participants.every((e=>e.hasValidMov))}get allHaveSpeedRoll(){return this.participants.every((p=>p.speedCheck?.rolled))}getParticipantLocation(participantUuid){if(!this.system.locations?.list?.length)return;if(!this.started)return;const location=this.locations.find((l=>{const lp=l.participants?.find((p=>participantUuid===p.uuid));return!!lp}));return location||void 0}getParticipantData(participantUuid){const participant=this.system.participants.find((p=>participantUuid===p.uuid));if(participant)return foundry.utils.duplicate(participant)}getParticipant(participantUuid){const participantData=this.getParticipantData(participantUuid);if(participantData)return new _participant(participantData)}get nextActiveParticipant(){if(this.started)return this.participantsByInitiative.find((p=>p.data.currentMovementActions>0))}get slowestPrey(){const preys=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isPrey));if(preys.length>0)return preys[0]}get fastestChaser(){const chasers=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isChaser));if(chasers.length>0)return chasers.slice(-1).pop()}get actualParticipants(){const slowestPrey=this.slowestPrey,fastestChaser=this.fastestChaser;let pList=this.participants;return!this.system.includeLatecomers&&slowestPrey&&(pList=pList.filter((p=>p.isPrey||p.isChaser&&p.adjustedMov>=slowestPrey.adjustedMov))),!this.system.includeEscaped&&fastestChaser&&(pList=pList.filter((p=>p.isChaser||p.isPrey&&p.adjustedMov<=fastestChaser.adjustedMov))),pList}get slowestParticipant(){const pList=this.participantsByAdjustedMov;if(pList.length>0)return pList[0]}async updateParticipants(list,{render=!0}={}){const participantsData=this.cleanParticipantList(list);return await this.update({"system.participants":participantsData},{render})}async updateParticipant(particiantUuid,updateData,{render=!0}={}){const participants=foundry.utils.duplicate(this.system.participants),update=foundry.utils.duplicate(updateData),participantIndex=participants.findIndex((p=>particiantUuid===p.uuid));-1!==participantIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(participants[participantIndex],update,{overwrite:!0}),await this.updateParticipants(participants,{render}))}cleanParticipantList(list){const participantsData=list||foundry.utils.duplicate(this.system.participants);return list.forEach((p=>{let data;data="_participant"===p.constructor.name?p.data:p;const index=this.findIndex(participantsData,data.uuid);-1===index?(participantsData.push(data),ui.notifications.warn(game.i18n.localize("CoC7.ParticipantDataMissing"))):participantsData[index]=data})),participantsData}async assistParticipant(assistantUuid,beneficiaryUuid,{useMovementActions=!0,render=!0}={}){const assistant=this.getParticipant(assistantUuid),beneficiary=this.getParticipant(beneficiaryUuid),participantsData=foundry.utils.duplicate(this.system.participants),assistantIndex=participantsData.findIndex((p=>assistantUuid===p.uuid)),beneficiaryIndex=participantsData.findIndex((p=>beneficiaryUuid===p.uuid));if(assistant&&beneficiary)if(beneficiary.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorBeneficiaryAtMaxBonus",{name:beneficiary.name}));else{if(useMovementActions){if(assistant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid,actions:assistant.currentMovementActions}));assistant.alterMovementActions(-1),participantsData[assistantIndex]=foundry.utils.duplicate(assistant.data)}beneficiary.addBonusDice(),participantsData[beneficiaryIndex]=foundry.utils.duplicate(beneficiary.data),await this.update({"system.participants":participantsData},{render})}else ui.notifications.error(game.i18n.localize("CoC7.ParticipantNotFound"))}async toggleBonusDice(participantUuid,diceNumber,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.bonusDice>=diceNumber?participant.removeBonusDice():participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async cautiousApproach(participantUuid,{useMovementActions=!0,render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(participant.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorParticipantAtMaxBonus",{participantUuid}));else{if(useMovementActions){if(participant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(-1)}participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}}async alterParticipantMovementAction(participantUuid,count,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.alterMovementActions(count),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async activateNextParticipantTurn({scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const activeParticipant=this.nextActiveParticipant,options={scrollToLocation,activateLocation,render,html};return activeParticipant?this.activateParticipant(activeParticipant.uuid,options):this.activateParticipant(void 0,options)}async activateParticipant(participantUuid,{scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const dataUpdate=this.getActivateParticipantUpdateData(participantUuid,{scrollToLocation,activeLocation:activateLocation,html});await this.update(dataUpdate,{render})}getActivateParticipantUpdateData(participantUuid,{scrollToLocation=!0,activateLocation=!0,html=null}={}){const pUuid=participantUuid,participantsDataUpdate={},participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{delete p.active,pUuid&&pUuid===p.uuid&&(p.active=!0)})),participantsDataUpdate["system.participants"]=participants;const participantLocation=this.getParticipantLocation(pUuid);let locationsDataUpdate=null;return participantLocation?activateLocation?locationsDataUpdate=this.getActivateLocationUpdateData(participantLocation.uuid,{scrollToLocation,html}):scrollToLocation&&(locationsDataUpdate={},locationsDataUpdate["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,locationsDataUpdate["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(participantLocation.uuid,{html})):locationsDataUpdate=this.getActivateLocationUpdateData(void 0,{scrollToLocation}),locationsDataUpdate?foundry.utils.mergeObject(participantsDataUpdate,locationsDataUpdate):participantsDataUpdate}activeParticipantObstacleCheck(locationUuid,{moveParticipant=!0}={}){new ChaseObstacleCard({chaseUuid:this.uuid,locationUuid,moveParticipant,forward:locationUuid!==this.activeLocation.uuid}).toMessage()}async progressToNextRound({render=!0}={}){const participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{p.currentMovementActions<p.movementAction&&(p.currentMovementActions+=p.movementAction,p.currentMovementActions>p.movementAction&&(p.currentMovementActions=p.movementAction))})),await this.updateParticipants(participants,{render:!1}),this.activateNextParticipantTurn({render})}async updateRoll(rollString){if(game.user.isGM){const roll=CoC7Check.fromRollString(rollString),participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[],index=participants.findIndex((p=>p.rollUuid===roll.uuid));index>=0&&(participants[index].speedCheck.rollDataString=roll.JSONRollString,await this.update({"system.participants":participants}))}else{const data={data:rollString,type:"invoke",method:"updateRoll",item:this.uuid};game.socket.emit("system.CoC7",data)}}get locations(){const locations=this.started?this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[]:this.initTrack;return this.processLocations(locations),locations}getLocationData(locationUuid,{duplicateData=!0}={}){return(duplicateData?foundry.utils.duplicate(this.locations):this.locations).find((l=>locationUuid===l.uuid))}processLocations(locations){if(locations?.length){locations[0].first=!0;for(let index=0;index<locations.length;index++){const classes=[],location=locations[index];location.name||classes.push("empty"),location.active&&classes.push("active"),location.init&&!this.started&&classes.push("init"),location.cssClasses=classes.join(" ")}locations.length>1&&(locations[locations.length-1].last=!0),locations.forEach((l=>{if(l.participants&&l.participants.length){l.participants=l.participants.filter((p=>!(null===p)));for(let i=0;i<l.participants.length;i++){const elem=l.participants[i];let p;"string"==typeof elem||elem instanceof String?p=this.system.participants.find((p=>elem===p.uuid)):"_participant"===elem?.constructor?.name?(p=void 0,ui.notifications.warn(game.i18n.localize("CoC7.ParticipantAlreadyProcessed"))):p=void 0,void 0!==p?l.participants[i]=new _participant(p):console.error("Undefined paticipant while processing participants array")}l.participants.sort(sortByRoleAndDex)}}))}}get initTrack(){if(!this.system.locations.list||0===this.system.locations.list.length)return;const locations=[],init=this.startingLine;let locationsIndexStart,initIndexStart,locationsLength;if(locationsIndexStart=init.length<=0||this.system.startingIndex>=init.length?0:init.length-this.system.startingIndex,initIndexStart=this.system.startingIndex<=0||this.system.startingIndex<=init.length?0:this.system.startingIndex-init.length,locationsLength=0===locationsIndexStart?this.system.locations.list.length:this.system.locations.list.length+locationsIndexStart,0!==init.length&&this.system.startingIndex<0)for(let index=0;index<Math.abs(this.system.startingIndex);index++)init.push({uuid:this.generateNewUuid(),init:!0,participants:[]});const chaseLocations=foundry.utils.duplicate(this.system.locations);for(let index=0;index<locationsLength;index++){let location={};const participants=[];index>=locationsIndexStart&&index-locationsIndexStart<chaseLocations.list.length&&(location=foundry.utils.duplicate(chaseLocations.list[index-locationsIndexStart]),location.init=!1,location.participants?.forEach((p=>{null!=p&&participants.push(p)}))),index>=initIndexStart&&index-initIndexStart<init.length&&(mergeObject(location,init[index-initIndexStart],{overwrite:!1}),init[index-initIndexStart].participants?.forEach((p=>{null!=p&&participants.push(p)})),location.participants=participants),location.first=!1,location.end=!1,locations.push(location)}return locations}get startingLine(){const preys=this.system.includeEscaped?this.preys:this.preys?.filter((p=>!p.data.escaped)),chasers=this.system.includeLatecomers?this.chasers:this.chasers?.filter((c=>!c.data.excluded)),chaseTrack=[],chasersMinMov=this.findMinMov(chasers),chasersMaxMov=this.findMaxMov(chasers),preysMinMov=this.findMinMov(preys),preysMaxMov=this.findMaxMov(preys);if(-1!==chasersMinMov&&-1!==chasersMaxMov){for(let mov=chasersMinMov;mov<=chasersMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};chasers.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}for(let index=0;index<this.system.startingRange;index++)chaseTrack.push({uuid:this.generateNewUuid(),init:!0,participants:[]})}if(-1!==preysMinMov&&-1!==preysMaxMov)for(let mov=preysMinMov;mov<=preysMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};preys.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}return chaseTrack}async updateLocationsList(list,{render=!0}={}){const updatedList=this.cleanLocationsList(list);await this.update({"system.locations.list":updatedList},{render})}async updateLocation(locationUuid,updateData,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),update=foundry.utils.duplicate(updateData),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));-1!==locationIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(locations[locationIndex],update,{overwrite:!0}),await this.updateLocationsList(locations,{render}))}cleanLocationsList(list){const updatedList=foundry.utils.duplicate(list),partipantsUuidArray=this.system.participants.map((p=>p.uuid));return updatedList.forEach((l=>{if(delete l.cssClasses,delete l.first,delete l.last,delete l.end,l.participants&&l.participants.length){for(let i=0;i<l.participants.length;i++)l.participants=l.participants.filter((p=>!(null===p))),l.participants[i].data?.uuid&&(l.participants[i]=l.participants[i].data.uuid);l.participants=l.participants.filter((uuid=>partipantsUuidArray.includes(uuid)))}})),updatedList}async insertLocation(insertAtUuid,{shift=0,locData={},render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list);locations.forEach((l=>{delete l.active}));const locationIndex=locations.findIndex((l=>insertAtUuid===l.uuid));if(-1===locationIndex)return!1;const newLocationIndex=locationIndex+shift;if(newLocationIndex>locations.length)return!1;const newLocation=foundry.utils.duplicate(locData);return newLocation.uuid=this.generateNewUuid(),newLocation.init=locations[locationIndex].init,newLocation.active=!0,locations.splice(newLocationIndex,0,newLocation),await this.updateLocationsList(locations,{render})}async removeLocation(uuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>uuid===l.uuid));if(locations.splice(locationIndex,1),locations.forEach((l=>{delete l.active})),locations.length>0){let index=locationIndex-1;index<0&&(index=0),locations[index].active=!0}return await this.updateLocationsList(locations,{render})}async activateLocation(locationUuid,{scrollToLocation=!0,render=!0}={}){const updateData=this.getActivateLocationUpdateData(locationUuid,{scrollToLocation});await this.update(updateData,{render})}getClearActiveLocationUpdateData({scrollToLocation=!0,html=null}={}){const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=0,updateData["system.scroll.chaseTrack.to"]=-1),updateData}getActivateLocationUpdateData(locationUuid,{scrollToLocation=!0,html=null}={}){if(!locationUuid)return this.getClearActiveLocationUpdateData({scrollToLocation});const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active,locationUuid===l.uuid&&(l.active=!0)})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,updateData["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(locationUuid,{html})),updateData}get activeLocation(){if(!this.locations)return;const location=this.locations.find((l=>l.active));if(!location)return;location.participants?.length&&(location.hasParticipant=!0);const actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get previousLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(0===activeIndex)return;const location=this.locations[activeIndex-1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get nextLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(activeIndex===this.locations.length-1)return;const location=this.locations[activeIndex+1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}async locatorDropped(data){await this.setLocationCoordinates(data.locationUuid,data.x,data.y,data.scene)}async setLocationCoordinates(locationUuid,x,y,sceneId,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return locations[locationIndex].coordinates={x,y,scene:sceneId},await this.updateLocationsList(locations,{render})}async clearActiveLocationCoordinates({render=!0}={}){if(this.activeLocation)return await this.clearLocationCoordinates(this.activeLocation.uuid,{render})}async clearLocationCoordinates(locationUuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return delete locations[locationIndex].coordinates,await this.updateLocationsList(locations,{render})}async cutToTheChase(){if(this.allHaveSpeedRoll){if(this.actualParticipants?.length<2)ui.notifications.warn(game.i18n.localize("CoC7.NeedMin2Participants"));else if(this.allHaveValidMov){const participants=this.participants,minMov=this.findMinMov(this.actualParticipants);participants.forEach((p=>{p.calculateMovementActions(minMov),p.currentMovementActions=p.movementAction,p.bonusDice=0})),await this.updateParticipants(participants,{render:!1}),await this.updateLocationsList(this.locations,{render:!1}),await this.start()}}else ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"))}async restart(){const locations=this.locations.filter((l=>!l.init));for(let i=0;i<locations.length;i++)locations[i].participants&&(locations[i].participants=[]),locations[i].active&&delete locations[i].active;const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];for(let i=0;i<participantsData.length;i++)participantsData[i].active&&delete participantsData[i].active;await this.setchaseTrackScroll(0,0,{render:!1}),await this.updateLocationsList(locations,{render:!1}),await this.updateParticipants(participantsData,{render:!1}),await this.stop()}getLocationShift(locationUuid,{skip=1}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destinationIndex=locations.findIndex((l=>locationUuid===l.uuid))+skip;return 0===locations.length?null:destinationIndex>=locations.length?locations[locations.length-1]:destinationIndex<0?locations[0]:locations[destinationIndex]}async removeParticipant(participantUuid,{render=!0}={}){const p=this.getParticipant(participantUuid);await Dialog.confirm({title:game.i18n.localize("CoC7.RemoveParticipant"),content:`<p>${game.i18n.format("CoC7.RemoveParticipantHint",{name:p.name})}</p>`,yes:async()=>{const newParticipantsData=foundry.utils.duplicate(this.system.participants).filter((p=>participantUuid!==p.uuid)),locationsData=foundry.utils.duplicate(this.system.locations.list);locationsData.forEach((l=>{l.participants&&l.participants.length&&(l.participants=l.participants.filter((uuid=>participantUuid!==uuid)))})),await this.updateParticipants(newParticipantsData,{render:!1}),await this.updateLocationsList(locationsData,{render})}})}async addParticipant(participant,{render=!0,locationUuid=null,recalculateMovementActions=!0,update=!1}={}){const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];if(participant.data.chaseUuid&&delete participant.data.chaseUuid,participant.data.locationUuid&&delete participant.data.locationUuid,participant.data.update&&delete participant.data.update,!participant.uuid){let unique=!1;for(;!unique;)participant.data.uuid=foundry.utils.randomID(16),unique=0===participantsData.filter((p=>p.uuid===participant.uuid)).length}if(update){participant.currentMovementActions>participant.movementAction&&(participant.currentMovementActions=participant.movementAction);const index=participantsData.findIndex((p=>p.uuid===participant.uuid));participantsData[index]=participant.data}else participantsData.push(participant.data);if(await this.updateParticipants(participantsData,{render:render&&!this.started&&!this.recalculateMovementActions}),recalculateMovementActions){const slowest=this.slowestParticipant?.adjustedMov,participants=this.participants;participants.forEach((p=>p.calculateMovementActions(slowest))),await this.updateParticipants(participants,{render:render&&!this.started})}if(this.started&&!participant.data.escaped&&!participant.data.excluded){const locationsData=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];0===locationsData.length&&ui.notifications.error(game.i18n.localize("CoC7.ErrorEmptyLocationsList"));let locationIndex=locationsData.findIndex((l=>locationUuid===l.uuid));-1===locationIndex&&(locationIndex=0),locationsData[locationIndex].participants||(locationsData[locationIndex].participants=[]),-1===locationsData[locationIndex].participants.findIndex((p=>p===participant.uuid))&&locationsData[locationIndex].participants.push(participant.uuid),await this.updateLocationsList(locationsData,{render})}}async editParticipant(participantUuid,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){}async moveParticipant(participantUuid,locationMoved,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){let modified=!1;const locations=foundry.utils.duplicate(this.system.locations.list),originIndex=locations.findIndex((l=>l.participants?.includes(participantUuid)));let destinationIndex=originIndex+locationMoved;destinationIndex>locations.length-1&&(destinationIndex=locations.length-1),destinationIndex<0&&(destinationIndex=0);const totalMove=destinationIndex-originIndex,participant=this.getParticipant(participantUuid),participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(useMovementActions){if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid:this.participantUuid}));if(participant.currentMovementActions<Math.abs(totalMove))return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(0-Math.abs(totalMove)),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render:!1}),modified=!0}return 0!==totalMove&&(await this.moveParticipantToLocation(participantUuid,locations[destinationIndex].uuid,{render:!1}),modified=!0),activateParticipant&&(await this.activateParticipant(participantUuid,{scrollToLocation,activateLocation,render:!1}),modified=!0),activateLocation&&!activateParticipant&&(await this.activateLocation(locations[destinationIndex].uuid,{scrollToLocation,render:!1}),modified=!0),modified&&render&&await this.sheet.render(!0),totalMove}async moveParticipantToLocation(participantUuid,locationUuid,{scrollToLocation=!0,activateLocation=!0,animate=null,moveToken=!0,render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destination=locations.find((l=>locationUuid===l.uuid));if(!destination)return void console.error(`Failed to move ${participantUuid}. Location ${locationUuid} unknown`);const origin=locations.find((l=>l.participants?.includes(participantUuid)));if(!origin)return void console.error(`Failed to find ${participantUuid} in locations`);if(destination.participants||(destination.participants=[]),destination.participants.includes(participantUuid))return;destination.participants.push(participantUuid);const oldParticipantsList=origin.participants.filter((p=>participantUuid!==p));if(origin.participants=oldParticipantsList,moveToken&&destination.coordinates){const participant=this.getParticipant(participantUuid),particpantDocument=CoC7Utilities.getDocumentFromKey(participant?.data?.docUuid);if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token))console.warn("No token associated with this actor");else if(destination.coordinates.scene!==game.scenes.viewed.uuid&&console.warn("Caution the scene is not the active scene"),particpantDocument.parent?.uuid!==destination.coordinates.scene)ui.notifications.error(game.i18n.localize("CoC7.ErrorTokenNotOnScene"));else{const scene=CoC7Utilities.getDocumentFromKey(destination.coordinates.scene);let x=destination.coordinates.x;const y=destination.coordinates.y;let targetRect=new NormalizedRectangle(x,y,particpantDocument.object.width,particpantDocument.object.height);const update=[];let foundFreeSpace=!1;for(;!foundFreeSpace;){const overlapingToken=scene.tokens.find((t=>t.id!==particpantDocument.id&&t.object.bounds.intersects(targetRect)));overlapingToken?(x=overlapingToken.object.bounds.right+1,targetRect=new NormalizedRectangle(x,y,particpantDocument.object.width,particpantDocument.object.height)):foundFreeSpace=!0}update.push({_id:particpantDocument.id,x,y});const showTokenMovement="boolean"==typeof animate?animate:this.system.showTokenMovement;await particpantDocument.parent.updateEmbeddedDocuments("Token",update,{animate:showTokenMovement})}}await this.updateLocationsList(locations,{render})}async setchaseTrackScroll({from,to=-1,render=!0}={}){await this.update({"system.scroll.chaseTrack.from":void 0===from?this.chaseTrackCurrentScrollPosition:from,"system.scroll.chaseTrack.to":void 0===to?this.chaseTrackCurrentScrollPosition:to},{render})}get chaseTrackCurrentScrollPosition(){const html=this.sheet?._element;if(!html)return-1;const chaseTrack=html[0].querySelector(".chase-track");return chaseTrack?chaseTrack.scrollLeft:-1}get chaseTrackActiveLocationScrollPosition(){return this.activeLocation?this.getChaseTrackLocationScrollPosition(this.activeLocation.uuid):-1}getChaseTrackLocationScrollPosition(locationUuid,{html=null}){const htmlElement=html||this.sheet?._element;if(!htmlElement||!htmlElement[0])return-1;const chaseTrack=htmlElement[0].querySelector(".chase-track");if(!chaseTrack)return-1;const activeLocationElement=chaseTrack.querySelector(`.chase-location[data-uuid="${locationUuid}"]`);if(!activeLocationElement)return-1;const leftScroll=activeLocationElement.offsetLeft+activeLocationElement.clientWidth/2-chaseTrack.clientWidth/2;return leftScroll<0?0:Math.floor(leftScroll)}findMinMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1}findMaxMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}get started(){return this.getFlag("CoC7","started")}async start(){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px","")),pCount=this.actualParticipants.length,width=Math.max((11.2*pCount+3)*remSize,40*remSize);this.sheet._tabs[0].active="setup",this.sheet.position.width=width,await this.setFlag("CoC7","started",!0),await this.activateNextParticipantTurn()}async stop(){return this.unsetFlag("CoC7","started")}generateNewUuid(){return foundry.utils.randomID(16)}getActorSkillsAndCharacteristics(participantUuid){const participant=this.getParticipant(participantUuid);if(!participant.actor)return;const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),participant.actor.skills.forEach((s=>list.push(s.name))),list}get activeActorSkillsAndCharacteristics(){const particicpantData=this.activeParticipantData;if(particicpantData)return this.getActorSkillsAndCharacteristics(particicpantData.uuid)}get allSkillsAndCharacteristics(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}get allSkillsAndCharacteristicsShort(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${c.label}`))),list.push(`${game.i18n.localize("CoC7.Luck")}`),list.push(`${game.i18n.localize("CoC7.SAN")}`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}}class CoC7Skill extends CoC7Item{constructor(data,context){if(void 0===data.system?.skillName){const skill=CoC7Skill.guessNameParts(data.name),{name,skillName,specialization,...newProperties}=skill;data.name=name,data.system||={};const properties={...data.system.properties,...newProperties};data.system={...data.system,skillName,specialization,properties}}super(data,context)}static guessNameParts(skillName){const output={combat:!1,fighting:!1,firearm:!1,name:skillName,skillName,special:!1,specialization:""},match=skillName.match(/^(.+)\s*\(([^)]+)\)$/);if(match){output.skillName=match[2].trim(),output.special=!0;const specialization=match[1].trim();output.specialization=specialization,output.name=specialization+" ("+output.skillName+")",output.fighting=specialization===game.i18n.localize("CoC7.FightingSpecializationName"),output.firearm=specialization===game.i18n.localize("CoC7.FirearmSpecializationName"),output.combat=output.fighting||output.firearm}return output}get hasActiveEffects(){return this.activeEffects.length>0}get activeEffects(){if(this.parent&&this.parent.effects){const effectKeyFull=`skill.${this.name}`.toLowerCase(),effectKeyShort=`skill.${this.system.skillName}`.toLowerCase();let changes=this.parent.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.data.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);return changes.sort(((a,b)=>a.priority-b.priority)),changes=changes.filter((e=>e.key.toLowerCase()===effectKeyShort||e.key.toLowerCase()===effectKeyFull)),changes}return[]}get itemIdentifier(){return this.name}get rawValue(){let value=0;return"character"===this.actor.type?(value=this.base,value+=this.system.adjustments?.personal?parseInt(this.system.adjustments?.personal):0,value+=this.system.adjustments?.occupation?parseInt(this.system.adjustments?.occupation):0,value+=this.system.adjustments?.experience?parseInt(this.system.adjustments?.experience):0,game.settings.get("CoC7","pulpRuleArchetype")&&this.system.adjustments?.archetype&&(value+=parseInt(this.system.adjustments?.archetype))):value=parseInt(this.system.value),isNaN(value)?null:value}get value(){const value=this.parent?.system.skills?.[`${this.itemIdentifier}`]?.value;return value||this.rawValue}async updateValue(value){if("character"===this.actor.type){const delta=parseInt(value)-this.rawValue,exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+delta;await this.update({"system.adjustments.experience":exp>0?exp:0})}else await this.update({"system.value":value})}async increaseExperience(x){if("skill"!==this.type)return null;if("character"===this.actor.type){const exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+parseInt(x);await this.update({"system.adjustments.experience":exp>0?exp:0})}}}class CoC7Vehicle extends CoCActor{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/jeep.svg"),super(data,context)}get rawBuild(){return this.build}get build(){const build=parseInt(this.system.attribs.build.value);return isNaN(build)?null:build}get hp(){if(null===this.system.attribs.build.current||void 0===this.system.attribs.build.current||""===this.system.attribs.build.current)return this.build;if(this.system.attribs.build.current>this.system.attribs.build.value)return this.build;const hp=parseInt(this.system.attribs.build.current);return isNaN(hp)?null:hp}get hpMax(){return this.build}get rawHpMax(){return this.build}async setHp(value){return value>this.build&&(value=this.build),await this.update({"system.attribs.build.current":value})}get rawDb(){return this.db}get db(){const db=parseInt(this.system.attribs.db?.value);return isNaN(db)?null:db}get rawMov(){return this.mov}get mov(){const mov=parseInt(this.system.attribs.mov?.value);return isNaN(mov)?null:mov}get mpMax(){return parseInt(this.system.attribs?.mp?.max)||0}get rawMpMax(){return this.mpMax}get sanMax(){return null}get rawSanMax(){return null}}class CoC7DecaderDie extends DiceTerm{constructor(termData){super(termData),this.faces=10}get total(){const total=super.total;return 10===total?0:10*total}static get DENOMINATION(){return"t"}}class CoC7DecaderDieOther extends CoC7DecaderDie{static get DENOMINATION(){return"o"}}const SETTINGS={pulpRules:{name:"",hint:"",scope:"world",config:!1,default:!1,type:Boolean},initiativeRule:{name:"SETTINGS.InitiativeRule",hint:"SETTINGS.InitiativeRuleHint",scope:"world",config:!1,default:"basic",type:String,choices:{basic:"SETTINGS.InitiativeRuleBasic",optional:"SETTINGS.InitiativeRuleOptional"},onChange:rule=>_setInitiativeOptions(rule)},developmentRollForLuck:{name:"SETTINGS.developmentRollForLuck",hint:"SETTINGS.developmentRollForLuckHint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDoubleMaxHealth:{name:"CoC7.Settings.PulpRules.DoubleMaxHealth.Name",hint:"CoC7.Settings.PulpRules.DoubleMaxHealth.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDevelopmentRollLuck:{name:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Name",hint:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleArchetype:{name:"CoC7.Settings.PulpRules.Archetype.Name",hint:"CoC7.Settings.PulpRules.Archetype.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleOrganization:{name:"CoC7.Settings.PulpRules.Organization.Name",hint:"CoC7.Settings.PulpRules.Organization.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleTalents:{name:"CoC7.Settings.PulpRules.Talents.Name",hint:"CoC7.Settings.PulpRules.Talents.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleFasterRecovery:{name:"CoC7.Settings.PulpRules.FasterRecovery.Name",hint:"CoC7.Settings.PulpRules.FasterRecovery.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreMajorWounds:{name:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Name",hint:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreAgePenalties:{name:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Name",hint:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Hint",scope:"world",config:!1,default:!1,type:Boolean},opposedRollTieBreaker:{name:"SETTINGS.OpposedRollTieBreaker",hint:"SETTINGS.OpposedRollTieBreakerHint",scope:"world",config:!1,default:!1,type:Boolean}};function _setInitiativeOptions(rule){let decimals=0;switch(rule){case"optional":decimals=2;break;case"basic":decimals=0}CONFIG.Combat.initiative={formula:null,decimals}}class CoC7GameRuleSettings extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{title:"SETTINGS.TitleRules",id:"rules-settings",template:"systems/CoC7/templates/system/rule-settings.html",width:550,height:"auto",closeOnSubmit:!0})}getData(){const options={},pulpRules={true:!1,false:!1};for(const[k,v]of Object.entries(SETTINGS))options[k]={value:game.settings.get("CoC7",k),setting:v},k.match(/^pulpRule.{2,}$/)&&(pulpRules[options[k].value]=!0);return options.pulpSelection=pulpRules.true?pulpRules.false?"some":"all":"none",options}static registerSettings(){for(const[k,v]of Object.entries(SETTINGS))game.settings.register("CoC7",k,v);_setInitiativeOptions(game.settings.get("CoC7","initiativeRule"))}activateListeners(html){super.activateListeners(html),html.find("#pulpRulesSelect").on("change",(event=>this.onChangePulpSelect(event))),html.find("input.pulpRulesSelect[type=checkbox]").on("click",(event=>this.onClickPulp(event))),html.find("button[name=reset]").on("click",(event=>this.onResetDefaults(event)))}onChangePulpSelect(event){const val=$(event.currentTarget).val();"none"!==val&&"all"!==val||$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){const checkbox=$(this);"none"===val?checkbox.prop("checked",!1):checkbox.prop("checked",!0)}))}onClickPulp(event){const pulpRules={true:!1,false:!1};$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){$(this).prop("checked")?pulpRules.true=!0:pulpRules.false=!0})),$("#pulpRulesSelect").val(pulpRules.true?pulpRules.false?"some":"all":"none")}async onResetDefaults(event){event.preventDefault();for await(const[k,v]of Object.entries(SETTINGS))await game.settings.set("CoC7",k,v?.default);return this.render()}async _updateObject(event,data){const pulpRules={true:!1,false:!1};for await(const key of Object.keys(SETTINGS))game.settings.set("CoC7",key,data[key]),key.match(/^pulpRule.{2,}$/)&&(pulpRules[data[key]]=!0);game.settings.set("CoC7","pulpRules",pulpRules.true&&!pulpRules.false)}}class CoC7ArchetypeSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))))}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&[type].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=item.system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/archetype.html",width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const coreCharacteristics=[];for(const[key,selected]of Object.entries(sheetData.data.system.coreCharacteristics))if(selected){const characName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);coreCharacteristics.push(characName)}sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedSuggestedOccupations=TextEditor.enrichHTML(sheetData.data.system.suggestedOccupations,{async:!1,secrets:sheetData.editable}),sheetData.enrichedSuggestedTraits=TextEditor.enrichHTML(sheetData.data.system.suggestedTraits,{async:!1,secrets:sheetData.editable}),sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey),sheetData.coreCharacteristicsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return coreCharacteristics.length&&(sheetData.coreCharacteristicsString+=coreCharacteristics.join(orString)),sheetData.itemProperties=[],sheetData.itemProperties.push(`${game.i18n.localize("CoC7.PulpTalents")}: ${sheetData.data.system.talents}`),sheetData.itemProperties.push(`${game.i18n.localize("CoC7.BonusPoints")}: ${sheetData.data.system.bonusPoints}`),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7BookSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/book/main.html",classes:["coc7","item","book"],width:500,height:"auto",resizable:!1,dragDrop:[{dragSelector:".spells",dropSelector:null}],scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.initialReading=this.item.system.initialReading,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.spellsLearned=this.spellsLearned,sheetData.exhausted=!1!==await this.item.checkExhaustion(),sheetData.studyCompleted=this.item.system.study.progress===this.item.system.study.necessary,sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.spellListEmpty=0===this.item.system.spells.length,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedContent=TextEditor.enrichHTML(sheetData.data.system.content,{async:!1,secrets:sheetData.editable}),sheetData}get spellsLearned(){let amount=0;const spells=this.item.system.spells;for(const spell of spells)spell.system.learned&&amount++;return`${amount} / ${spells.length}`}activateListeners(html){super.activateListeners(html),html.find("#attempt-initial-reading").click((event=>{event.preventDefault(),this.item.attemptInitialReading()})),html.find(".delete-spell").click((event=>this._onDelete(event))),html.find(".edit-spell").click((event=>this._onSpellDetail(event))),html.find(".spell-name").click((event=>this._onSpellDetail(event))),html.find(".teach-spell").click((event=>{const id=$(event.currentTarget).parents("li").data("id");this.item.attemptSpellLearning(id)})),html.find('[name="system.study.necessary"]').change((event=>{const value=parseInt(event.currentTarget.value);this.item.changeProgress("reset",value)})),html.find("#increase-progress").click((()=>{this.item.changeProgress("increase")})),html.find("#decrease-progress").click((()=>{this.item.changeProgress("decrease")})),html.find(".add-other-gains").click((event=>{this.modifyOthersGains(event,"add")})),html.find(".change-other-gains").change((event=>{this.modifyOthersGains(event,"change")})),html.find("#redo-full-study").click((()=>{this.item.redoFullStudy()})),html.find(".remove-other-gains").click((event=>{this.modifyOthersGains(event,"remove")})),html.find(".option").click((event=>this.modifyType(event)))}async _onSpellDetail(event){event.preventDefault();const index=$(event.currentTarget).parents("li").data("index");return await this.item.spellDetail(index)}async _onDelete(event){if(!game.user.isGM)return;event.preventDefault();const index=$(event.currentTarget).parents("li").data("index"),spells=this.item.system.spells?duplicate(this.item.system.spells):[];return index>=0&&spells.splice(index,1),await this.item.update({"system.spells":spells})}async _onDrop(event,type="spell"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),spells=[];for(const item of dataList)item&&["skill","spell"].includes(item.type)&&("spell"===item.type?spells.push(item):"skill"===item.type&&this.item.system.type.other&&this.modifyOthersGains(null,"add",{name:item.name}));await this.item.addSpells(spells)}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}async modifyOthersGains(event,mode,options={}){let index=null,element=null;event&&(event.preventDefault(),element=$(event.currentTarget),index=element.parents("tr").data("index"));const skills=this.item.system.gains.others?duplicate(this.item.system.gains.others):[];switch(mode){case"add":skills.push({name:options.name||game.i18n.localize("CoC7.NewSkillName"),value:"development"});break;case"change":skills[index]={name:element.is("input")?element.val():skills[index].name,value:element.is("select")?element.val():skills[index].value};break;case"remove":index>=0&&skills.splice(index,1)}return await this.item.update({"system.gains.others":skills})}}class CoC7ContainerSheet extends ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","storage"],template:"systems/CoC7/templates/actors/storage-sheet.html",width:672,height:765,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"items"}]})}async _onDrop(event){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if(!this.options.editable)return;const items=this.actor.items.toObject()||[];for(const item of dataList)item&&item.system&&["book","item","spell","weapon"].includes(item.type)&&items.push(item.toObject());await this.actor.update({items})}onCloseSheet(){}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.isKeeper=game.user.isGM,sheetData.editable=this.isEditable,sheetData.itemsByType={},sheetData.items){for(const item of sheetData.items)Object.prototype.hasOwnProperty.call(sheetData.itemsByType,item.type)||(sheetData.itemsByType[item.type]=[]),sheetData.itemsByType[item.type].push(item);for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey)}return sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryWeapons=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"weapon")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryWeapons,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".item-edit").click((ev=>{const li=$(ev.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)})),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".show-detail").click(this._onItemSummary.bind(this)),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".lock").click(this._onLockClicked.bind(this))}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(message.actorTo=value)}}),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Link.bindEventsHandler(div),div.slideDown(200)}li.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").slideToggle(200)}}class CoC7ChaseParticipantImporter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:game.i18n.localize("CoC7.AddActorToChase"),template:"systems/CoC7/templates/apps/chase-participant-importer.html",classes:["coc7","dialog","chase-participant-importer"],editable:!0,resizable:!1,submitOnChange:!0,closeOnSubmit:!1,width:300,height:"auto"})}activateListeners(html){super.activateListeners(html);new DragDrop({dropSelector:".form-container",permissions:{drop:game.user.isGM},callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]),html.find(".reset-participant").click((async()=>{this.object={},this._actor=null,await this.render(!0)})),html.find(".food-chain").click((async()=>{this.object.chaser=!this.object.chaser,await this.render(!0)})),html.find("[data-action]").click(this._onAction.bind(this))}async getData(){if(!this.object.initiative){const init=CoCActor.getCharacteristicDefinition().find((c=>"dex"===c.key));this.object.initiative=init.label}if(!this.object.speedCheck){const speedCheck=CoCActor.getCharacteristicDefinition().find((c=>"con"===c.key));this.object.speedCheck={name:speedCheck.label}}this.validateParticipant();const data=await super.getData();if(data.participant=new _participant(this.object),data.object.speedCheck.name&&this.actor){const speedCheck=this.actor.find(data.object.speedCheck.name);speedCheck?(data.object.speedCheck.score=speedCheck.value.value,data.speedCheckReadOnly=!0):data.participant.speedCheck.score&&!this.object.speedCheck?.score&&(data.object.speedCheck.score=data.participant.speedCheck.score)}if(data.object.initiative&&this.actor){const initiative=this.actor.find(data.object.initiative);initiative?(data.object.dex=initiative.value.value,data.initReadOnly=!0):data.object.dex=data.participant.initiative}return data.actor=this.actor,data.chase=this.chase,data.data=this.data,data.optionsList={},this.chase&&(data.skillsAndCharacteristicsList=this.chase.allSkillsAndCharacteristicsShort),this.actor&&(data.skillsAndCharacteristicsList=[],CoCActor.getCharacteristicDefinition().forEach((c=>data.skillsAndCharacteristicsList.push(`${c.label}`))),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.Luck")}`),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.SAN")}`),this.actor.skills.forEach((s=>data.skillsAndCharacteristicsList.push(s.name)))),data}get chase(){return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.object.chaseUuid)),this._chase}get actor(){return this.object.docUuid?(this._actor||(this._actor=CoC7Utilities.getActorFromKey(this.object.docUuid)),this._actor):null}async _updateObject(event,formData){foundry.utils.mergeObject(this,formData),await this.render(!0)}async _onDropParticipant(event){const dropString=event.dataTransfer.getData("text/plain"),dropData=JSON.parse(dropString),docUuid=CoC7Utilities.getActorDocumentFromDropData(dropData);this.object.docUuid=docUuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)}async _onAction(event){event.preventDefault();switch(event.currentTarget.dataset.action){case"chase-cancel":this.close();break;case"chase-add":{const participant=new _participant(this.object);if(this.chase.started){if(!(participant.movementAction&&participant.movementAction>0))return void ui.notifications.warn(game.i18n.localize("CoC7.DoesNotMeetMinimumReqToBeAdded"));if(this.data.overrideMovementAction){const slowest=this.chase.slowestParticipant;isNaN(participant.adjustedMov)&&(participant.mov=slowest.adjustedMov),this.data.recalculationNeeded=!1}}await this.chase.addParticipant(participant,{locationUuid:this.object.locationUuid,recalculateMovementActions:this.data.recalculationNeeded,update:this.object.update}),this.close()}break;case"roll-speed-check":{const participant=new _participant(this.object);if(participant.speedCheck.refSet){const roll=new CoC7Check;participant.data.rolled=!0,roll.actor=participant.actor.actorKey,participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0}foundry.utils.mergeObject(this.object,participant.data),this.render(!0)}}}validateParticipant(){const participant=new _participant(this.object);if(this.data||(this.data={}),this.object.excluded=!1,this.object.escaped=!1,this.data.recalculationNeeded=!1,this.data.participantExcluded=!1,this.data.movementActionDelta=0,!this.data.overrideMovementAction){const slowestPrey=this.chase.slowestPrey,fastestChaser=this.chase.fastestChaser,slowest=this.chase.slowestParticipant;participant.adjustedMov<slowest?.adjustedMov?(this.data.recalculationNeeded=!0,participant.movementAction=1):(this.data.recalculationNeeded=!1,participant.calculateMovementActions(slowest?.adjustedMov)),participant.isChaser&&slowestPrey&&!this.chase.data.data.includeLastCommers&&participant.adjustedMov<slowestPrey.adjustedMov&&(this.object.excluded=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooSlow"),this.data.recalculationNeeded=!1),participant.isPrey&&fastestChaser&&!this.chase.data.data.includeEscaped&&participant.adjustedMov>fastestChaser.adjustedMov&&(this.object.escaped=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooFast"),this.data.recalculationNeeded=!1)}}static async create(data){if(data.dropData){const docUuid=CoC7Utilities.getActorDocumentFromDropData(data.dropData);docUuid&&(data.docUuid=docUuid),delete data.dropData}return new CoC7ChaseParticipantImporter(data).render(!0)}}class CoC7ChaseSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item","chase"],template:"systems/CoC7/templates/items/chase.html",width:550,height:500,resizable:!0,tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"participants"}]})}static get type(){return"coc7ChaseSheet"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(options={}){const sheetData=super.getData(options);return sheetData.participants=this.item.participantsObject,sheetData.participantsByInitiative=this.item.participantsByInitiative,sheetData.preys=this.item.preys,sheetData.chasers=this.item.chasers,sheetData.preysMinMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.preysMaxMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMinMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMaxMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasers.forEach((p=>{p.adjustedMov<sheetData.preysMinMov?p.tooSlow():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.chasersMaxMov,p.slowest=p.adjustedMov===sheetData.chasersMinMov})),sheetData.preys.forEach((p=>{p.adjustedMov>sheetData.chasersMaxMov?p.escaped():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.preysMaxMov,p.slowest=p.adjustedMov===sheetData.preysMinMov})),sheetData.locations=this.item.locations,sheetData.allHaveValidMov=this.allHaveValidMov,sheetData.activeLocation=this.item.activeLocation,sheetData.activeLocation&&(sheetData.activeLocation.title=sheetData.activeLocation.coordinates?game.i18n.format("CoC7.LocationCoordinate",{x:sheetData.activeLocation.coordinates.x,y:sheetData.activeLocation.coordinates.y}):game.i18n.localize("CoC7.DragOnCanvas")),sheetData.previousLocation=this.item.previousLocation,sheetData.nextLocation=this.item.nextLocation,sheetData.started=this.item.started,sheetData.isKeeper=game.user.isGM,sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".dropdown-element").on("click",(event=>this._onDropDownElementSelected(event))),html.find(".dropbtn").click((event=>{event.preventDefault(),event.stopPropagation();event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show")})),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.find(".pin-location").contextmenu(this.clearActiveLocationCoordinates.bind(this)),html.find(".participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".p-side").click(this._onChangeSide.bind(this)),html.find(".delete-participant").click(this._onDeleteParticipant.bind(this)),html.find(".reset-roll").click(this._onResetRoll.bind(this)),html.find(".delete-driver").click(this._onDeleteDriver.bind(this)),html.find(".new-participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".new-participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".add-sign").click(this._onAddParticipant.bind(this)),html.find(".roll-participant").click(this._onRollParticipant.bind(this)),html.find(".button").click(this._onButtonClick.bind(this)),html.find(".name-container").click(this._onLocationClick.bind(this)),html.find(".obstacle-type").click(this._onObstacleTypeClick.bind(this)),html.find(".toggle").click(this._onToggle.bind(this)),html.find(".participant-control").click(this._onParticipantControlClicked.bind(this)),html.find(".chase-control").click(this._onChaseControlClicked.bind(this)),html.find(".location-control").click(this._onLocationControlClick.bind(this));new DragDrop({dragSelector:".pin-location",permissions:{dragstart:this._canPinLocationDragStart.bind(this)},callbacks:{dragstart:this._onPinLocationDragStart.bind(this)}}).bind(html[0]);new DragDrop({dropSelector:".participant",callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);if(new DragDrop({dropSelector:".new-participant",callbacks:{drop:this._onAddParticipant.bind(this)}}).bind(html[0]),this.item.started){html.find(".chase-location .chase-participant").click(this._onChaseParticipantClick.bind(this));new DragDrop({dragSelector:".chase-participant",dropSelector:".chase-location",permissions:{dragstart:this._canChaseParticipantDragStart.bind(this),drop:this._canChaseParticipantDragDrop.bind(this)},callbacks:{dragstart:this._onChaseParticipantDragStart.bind(this),drop:this._onChaseParticipantDragDrop.bind(this),dragover:this._onDragEnter.bind(this)}}).bind(html[0]),html.find(".chase-location").on("dragleave",(event=>this._onDragLeave(event)))}}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).object;if(data=updateData?mergeObject(data,updateData):expandObject(data),this.item.system.locations?.list?.length&&data.system.startingIndex>this.item.system.locations.list.length&&(data.system.startingIndex=this.item.system.locations.list.length),data.system.participants){const participants=duplicate(this.item.system.participants);for(const[k,v]of Object.entries(data.system.participants)){const index=participants.findIndex((p=>p.uuid===k));if(-1===index)ui.notifications.error("Participant table corrupted");else{const original=participants[index],cleaned=clean(v);mergeObject(original,cleaned),participants[index]=original}}data.system.participants=participants}if(data.locations){const locations=duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}delete data.locations,data.system.locations={list:locations}}return flattenObject(data)}async _updateObject(event,formData){const target=event.currentTarget,override="true"===target?.dataset?.override;if(target?.name?.includes(".hp")){const[,,uuid]=target.name.split("."),participant=this.item.getParticipant(uuid);participant&&participant.actor&&(isNaN(Number(target.value))||await participant.actor.setHp(Number(target.value)))}if(override){const[,type,uuid,subType,data]=target.name.split("."),index=this.findParticipantIndex(uuid);if("participants"===type&&!isNaN(index)&&"speed-check"===subType&&"name"===data){const participants=this.item.system.participants?duplicate(this.item.system.participants):[];return participants[index].speedCheck?(delete participants[index].speedCheck.id,delete participants[index].speedCheck.type):participants[index].speedCheck={},participants[index].speedCheck.name=target.value,void await this.item.update({"system.participants":participants})}}super._updateObject(event,formData)}static async setScroll(app,html,data){if(!data.editable)return;const initialOpening=html[0].classList.contains("window-app"),chaseTrack=html[0].querySelector(".chase-track");if(!chaseTrack)return;let start=data.data.scroll?.chaseTrack.from,end=data.data.scroll?.chaseTrack.to;if(void 0===start&&(start=0),void 0===end&&(end=-1),initialOpening){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px",""));if(app.item.started){const pCount=app.item.actualParticipants?.length,width=(11.2*pCount+3)*remSize;app.activateTab("setup"),app.position.width=Math.max(width,40*remSize)}else app.position.width=45*remSize;return await app.item.activateNextParticipantTurn({html})}start&&-1!==start&&chaseTrack.scrollTo({top:0,left:start,behavior:"instant"}),-1!==end&&chaseTrack.scrollTo({top:0,left:end,behavior:"smooth"})}static onClose(app,html){app.item.update({"system.trackScrollPosition":-1})}findParticipantIndex(uuid){return this.item.system.participants.findIndex((p=>p.uuid===uuid))}findLocationIndex(uuid){return this.item.system.locations.list.findIndex((p=>p.uuid===uuid))}findLocation(uuid){return this.item.system.locations.list.find((p=>p.uuid===uuid))}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}async _onDropDownElementSelected(event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget;target.closest(".dropdown-content")?.classList.toggle("show");const assistantUuid=target.closest(".initiative-block")?.dataset?.uuid,beneficiaryUuid=target.dataset.beneficiaryUuid;await this.item.assistParticipant(assistantUuid,beneficiaryUuid)}async _onToggle(event){const target=event.currentTarget,toggle=target.getAttribute("toggle"),data=expandObject({[toggle]:!target.classList.contains("switched-on")});if(data.locations){const locations=duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}await this.item.updateLocationsList(locations)}}async _onObstacleTypeClick(event){const target=event.currentTarget,uuid=target.closest(".obstacle").dataset.uuid,locations=duplicate(this.item.system.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={});const obstacle=locations[locationIndex].obstacleDetails,type=target.classList.contains("barrier")?"barrier":"hazard",active=obstacle[type];obstacle.barrier=!1,obstacle.hazard=!1,obstacle[type]=!active,locations[locationIndex].obstacle=!active,await this.item.updateLocationsList(locations)}async _onLocationClick(event){const lUuid=event.currentTarget.closest(".chase-location").dataset.uuid;await this.item.activateLocation(lUuid)}async _onLocationControlClick(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;const action=target.dataset.action,lUuid=target.closest(".chase-location").dataset.uuid;switch(action){case"remove":await this.item.removeLocation(lUuid);break;case"add-after":await this.item.insertLocation(lUuid,{shift:1});break;case"add-before":await this.item.insertLocation(lUuid,{shift:0});break;case"add-participant":CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid:lUuid,dropData:{}})}}async _onChaseParticipantClick(event){const pUuid=event.currentTarget.dataset?.uuid;await this.item.activateParticipant(pUuid)}async _onParticipantControlClicked(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;if(target.classList.contains("dropdown"))return;event.stopPropagation();const participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(participantUuid){switch(target.dataset.action){case"drawGun":await this.toggleParticipantGun(participantUuid);break;case"decreaseActions":await this._onChangeMovementActions(-1,event);break;case"increaseActions":await this._onChangeMovementActions(1,event);break;case"moveBackward":await this.item.moveParticipant(participantUuid,-1,{render:!0});break;case"moveForward":await this.item.moveParticipant(participantUuid,1,{render:!0});break;case"activateParticipant":return await this.item.activateParticipant(participantUuid);case"bonusDice":{const diceNumber=target.dataset.count;await this.item.toggleBonusDice(participantUuid,diceNumber),this.item.activateNextParticipantTurn()}break;case"cautiousApproach":await this.item.cautiousApproach(participantUuid);break;case"editParticipant":{const participant=this.item.getParticipant(participantUuid),location=this.item.getParticipantLocation(participantUuid);participant.data.chaseUuid=this.item.uuid,participant.data.locationUuid=location.uuid,participant.data.update=!0,CoC7ChaseParticipantImporter.create(participant.data)}break;case"removeParticipant":await this.item.removeParticipant(participantUuid)}this.item.activateNextParticipantTurn()}}async _onChaseControlClicked(event){event.preventDefault();const target=event.currentTarget;event.stopPropagation();const locationUuid=target.closest(".obstacle")?.dataset?.uuid;if(locationUuid)return"obstacle-skill-check"===target.dataset.action?this.item.activeParticipantObstacleCheck(locationUuid):void 0}async _onChangeMovementActions(count,event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget,participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(!participantUuid)return;const participants=this.item.participants,participant=participants.find((p=>participantUuid===p.uuid));participant.hasMaxMvtActions&&count>0||(participant.alterMovementActions(count),await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}async _onButtonClick(event){const target=event.currentTarget,action=target.dataset?.action;if(action)switch(action){case"init":if(!isNaN(this.item.system.locations.total)&&this.item.system.locations.total>0){const locations=Array.apply(null,Array(this.item.system.locations.total)).map((function(){return{uuid:foundry.utils.randomID(16)}}));locations[0].name="Start",locations.length>1&&(locations[locations.length-1].name="End"),await this.item.updateLocationsList(locations)}break;case"reset":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmResetChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmResetChaseHint")}</p>`,yes:async()=>{await this.item.updateLocationsList([]),await this.item.stop()}});break;case"cut2chase":this.item.allHaveSpeedRoll?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmCut2Chase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmCut2ChaseHint")}</p>`,yes:()=>this.item.cutToTheChase()}):ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"));break;case"restart":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmRestartChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmRestartChaseHint")}</p>`,yes:()=>this.item.restart()});break;case"nextRound":this.item.nextActiveParticipant?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmNextChaseRound")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmNextChaseRoundHint")}</p>`,yes:()=>this.item.progressToNextRound()}):this.item.progressToNextRound()}}_canPinLocationDragStart(selector){return!!game.user.isGM}async _onPinLocationDragStart(event){const a=event.currentTarget,i=a.querySelector("i.icon"),dragIcon=a.querySelector(".pin-image");event.dataTransfer.setDragImage(dragIcon,0,dragIcon.height);const locationElement=a.closest(".chase-location"),data={type:"locator",CoC7Type:"chase"};data.icon=i.dataset.linkIcon,data.locationUuid=locationElement.dataset.uuid,data.docUuid=this.item.uuid,data.callBack="locatorDropped",event.dataTransfer.setData("text/plain",JSON.stringify(data))}_canChaseParticipantDragStart(selector){return!!game.user.isGM}_canChaseParticipantDragDrop(selector){return!!game.user.isGM}async _onChaseParticipantDragStart(dragEvent){const dragData={uuid:dragEvent.currentTarget.dataset.uuid,type:"participant"};dragEvent.dataTransfer.setData("text/plain",JSON.stringify(dragData))}async _onChaseParticipantDragDrop(dragEvent){const dataString=dragEvent.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);this._onDragLeave(dragEvent);const locationUuid=dragEvent.currentTarget.dataset.uuid;if("participant"===data.type){const oldLocation=this.findLocation(locationUuid);if(oldLocation&&oldLocation.participants?.includes(data.uuid))return;await this.item.setchaseTrackScroll({render:!1}),await this.item.moveParticipantToLocation(data.uuid,locationUuid)}else CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid,dropData:data})}_onDragOver(dragEvent){this._onDragEnter(dragEvent)}_onDragEnter(dragEvent){dragEvent.currentTarget.classList.add("drag-over")}_onDragLeave(dragEvent){const target=dragEvent.currentTarget;target.classList?.remove("drag-over")}async _onDropParticipant(event){const target=event.currentTarget,uuid=target.dataset?.uuid,dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);await this.alterParticipant(data,uuid)}async _onAddParticipant(event){event.preventDefault();const data={chaseUuid:this.item.uuid};if(event.dataTransfer){const dataString=event.dataTransfer.getData("text/plain");data.dropData=JSON.parse(dataString)}CoC7ChaseParticipantImporter.create(data)}async _onRollParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[],participant=new _participant(participants[index]);if(participant.speedCheck.refSet){const roll=new CoC7Check;roll.parent=this.item.uuid,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid,roll.actor=participant.actor.actorKey,!event.shiftKey&&participant.actor.player&&(roll.standby=!0,roll.standbyText="CoC7.Chase",roll.standbyRightIcon="systems/CoC7/assets/icons/running-solid.svg"),participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);roll.parent=this.item.uuid,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid}await this.item.update({"data.participants":participants})}_onDragEnterParticipant(event){event.currentTarget.classList.add("drag-over")}_onDragLeaveParticipant(event){event.currentTarget.classList.remove("drag-over")}async _onChangeSide(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];participants[index].chaser=!participants[index].chaser,await this.item.update({"data.participants":participants})}async _onDeleteDriver(event){const uuid=event.currentTarget.closest(".driver").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];delete participants[index].docUuid,await this.item.update({"data.participants":participants})}async _onDeleteParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];participants.splice(index,1),await this.item.update({"data.participants":participants})}async _onResetRoll(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];delete participants[index].speedCheck.rollDataString,await this.item.update({"data.participants":participants})}async alterParticipant(data,uuid){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.system.participants?duplicate(this.item.system.participants):[],oldParticipant=participants[this.findParticipantIndex(uuid)];oldParticipant.mov&&delete oldParticipant.mov,mergeObject(oldParticipant,participant),await this.item.update({"data.participants":participants})}async clearActiveLocationCoordinates(){await this.item.clearActiveLocationCoordinates()}async addParticipant(data){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":if(data.id){const item=game.items.get(data.id);if("skill"!==item?.data?.type)return}participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}participant.speedCheck||(this.item.system.vehicle?participant.speedCheck={type:"item",name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.drive-auto")}:participant.speedCheck={id:"con",type:"characteristic",name:game.i18n.localize("CHARAC.Constitution")});const participants=this.item.system.participants?duplicate(this.item.system.participants):[];let unique=!1;for(;!unique;)participant.uuid=foundry.utils.randomID(16),unique=0===participants.filter((p=>p.uuid===participant.uuid)).length;participants.push(participant),await this.item.update({"data.participants":participants})}async toggleParticipantGun(participantUuid){const participants=this.item.system.participants?duplicate(this.item.system.participants):[],participant=participants.find((p=>participantUuid===p.uuid));participant&&(participant.hasAGunReady=!participant.hasAGunReady,await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}}function clean(obj){for(const propName in obj){const tp=getType(obj[propName]);"Object"===tp&&(obj[propName]=clean(obj[propName])),("Object"!==tp||Object.entries(obj[propName]).length)&&("string"!==tp||obj[propName].length)?"string"!==tp||isNaN(Number(obj[propName]))||(obj[propName]=Number(obj[propName])):obj[propName]=null}return obj}class CoC7ItemSheetV2 extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item"],template:"systems/CoC7/templates/items/item-sheetV2.html",width:500,height:450,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(options={}){const sheetData=super.getData(options);return sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}}class CoC7ItemSheet extends CoC7ItemSheetV2{static get defaultOptions(){return mergeObject(super.defaultOptions,{width:525,height:506})}}class CoC7JournalSheet extends JournalSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7MacroConfig extends MacroConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7PlaylistConfig extends PlaylistConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7RollTableConfig extends RollTableConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SceneConfig extends SceneConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SetupSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"items"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"items"))),html.find(".add-bio").click((async()=>await this._onAddBio())),html.find(".remove-section").click(this._onRemoveSection.bind(this)),html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onDrop(event,collectionName="items"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&["item","weapon","skill","book","spell"].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}async _onRemoveSection(event){const div=event.currentTarget.closest(".item"),bio=duplicate(this.item.system.bioSections);bio.splice(Number(div.dataset.index),1),await this.item.update({"system.bioSections":bio})}async _onAddBio(){const bio=this.item.system.bioSections?duplicate(this.item.system.bioSections):[];bio.push(null),await this.item.update({"system.bioSections":bio})}_onAddMonetary(){const values=this.item.system.monetary.values?duplicate(this.item.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.item.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=duplicate(this.item.system.monetary.values);values.splice(Number(div.dataset.index),1),this.item.update({"system.monetary.values":values})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=item.system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","setup"],template:"systems/CoC7/templates/items/setup.html",width:565,height:530,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const era=Object.entries(this.item.flags?.CoC7?.cocidFlag?.eras??{}).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:this.item.system.items,era:void 0===era[0]||era[0]});sheetData.skills=items.filter((it=>"skill"===it.type)),sheetData.otherItems=items.filter((it=>"skill"!==it.type)),sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.itemsListEmpty=0===sheetData.otherItems.length,sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});return sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedBackstory=TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}_updateObject(event,formData){const system=expandObject(formData)?.system;system.bioSections&&(formData["system.bioSections"]=Object.values(system.bioSections||[])),system.monetary.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),"system.characteristics.points.enabled"===event.currentTarget?.name&&(formData["system.characteristics.rolls.enabled"]=!event.currentTarget.checked),"system.characteristics.rolls.enabled"===event.currentTarget?.name&&(formData["system.characteristics.points.enabled"]=!event.currentTarget.checked),super._updateObject(event,formData)}}class CoC7SkillSheet extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return`systems/CoC7/templates/items/${this.item.type}-sheet.html`}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hadNonCharacterOwner=sheetData.hasOwner&&"character"!==this.actor?.type,sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.isSpecialized=this.item.system.properties.special,sheetData.canModifySpec=!this.item.system.properties.firearm&&!this.item.system.properties.fighting,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _updateObject(event,formData){const skillName=formData["system.skillName"]||this.item.system.skillName;if(this.item.system.properties?.special){const specialization=formData["system.specialization"]||this.item.system.specialization;formData.name=specialization+" ("+skillName+")"}else formData.name=skillName;return super._updateObject(event,formData)}}class CoC7SpellSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/spell/main.html",classes:["coc7","item","spell"],width:500,height:"auto",resizable:!1,scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".option").click((event=>this.modifyType(event))),html.find("#cast-spell").click((event=>{event.preventDefault(),this.item.cast()}))}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}}class CoC7StatusSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","status"],template:"systems/CoC7/templates/items/status.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}activateListeners(html){super.activateListeners(html),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.statusType[key]?COC7.statusType[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7TalentSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","talent"],template:"systems/CoC7/templates/items/talent.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.talentType[key]?COC7.talentType[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7VehicleSheet extends CoC7ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","item","vehicle"],width:555,height:420,resizable:!0,template:"systems/CoC7/templates/actors/vehicle.html",dragDrop:[{dragSelector:".actor",dropSelector:".dropZone"}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const sheetData=await super.getData();sheetData.properties=[],this.actor.system.properties.armed&&sheetData.properties.push(game.i18n.localize("CoC7.ArmedVehicle"));const expanded=this.actor.getFlag("CoC7","expanded");return sheetData.expanded=void 0===expanded||expanded,sheetData.expanded?sheetData.options.height=420:sheetData.options.height="auto",sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".add-armor").click((async()=>await this._onAddArmor())),html.find(".remove-armor").click((async event=>await this._onRemoveArmor(event))),html.find(".expand-button").click(this._onToggleExpand.bind(this))}async _onToggleExpand(){const expanded=this.actor.getFlag("CoC7","expanded");expanded?(this.oldSize=this.position.height,this.position.height="auto"):this.position.height=this.oldSize||420,await this.actor.setFlag("CoC7","expanded",!expanded)}async _onAddArmor(){const locations=duplicate(this.actor.system.attribs.armor.locations||[]);locations.push({name:null,value:null}),await this.actor.update({"system.attribs.armor.locations":locations})}async _onRemoveArmor(event){const index=event.currentTarget.closest(".armor").dataset.index,locations=duplicate(this.actor.system.attribs.armor.locations||null);locations&&(locations.splice(index,1),await this.actor.update({"system.attribs.armor.locations":locations}))}onCloseSheet(){super.onCloseSheet()}_updateObject(event,formData){const system=expandObject(formData)?.system;system.attribs.armor.locations&&(formData["system.attribs.armor.locations"]=Object.values(system.attribs.armor.locations||[])),super._updateObject(event,formData)}}class CoC7WeaponSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:545,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/weapon-sheet.html"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.combatSkill=[],sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hasOwner&&(sheetData.firearmSkills=this.actor.firearmSkills,sheetData.fightingSkills=this.actor.fightingSkills,sheetData.combatSkill=this.item.actor.items.filter((item=>!("skill"!==item.type||!item.system.properties.combat))),sheetData.combatSkill.sort(CoC7Utilities.sortByNameKey)),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({price:this.item.system.price[key]??0,id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.usesAlternateSkill=!0===this.item.system.properties.auto||!0===this.item.system.properties.brst||!0===this.item.system.properties.thrown,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionSpecial=TextEditor.enrichHTML(sheetData.data.system.description.special,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".weapon-property").click(this._onPropertyClick.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onPropertyClick(event){event.preventDefault();const propertyId=event.currentTarget.closest(".weapon-property").dataset.property;await this.item.toggleProperty(propertyId)}}async function performFilter(e){const appId=e.currentTarget.name.replace(/^coc7[^0-9]+(\d+)$/,"$1"),app=$("div.app[data-appid="+appId+"]"),type=app.find("select[name=coc7type"+appId+"]").val(),name=app.find("input[name=search]").val(),eraElement=app.find("select[name=coc7era"+appId+"]");let era="";switch(type){case"setup":case"skill":case"weapon":eraElement.closest("div.era_select").show(),era=eraElement.val();break;default:eraElement.closest("div.era_select").hide()}const items=await(game.packs.get(app.data("packId"))?.getDocuments());if(void 0===items)return;const show=[],nameFilter=new RegExp(RegExp.escape(name),"i");for(const[,item]of Object.entries(items)){let filter=!0;if(filter&&""!==name&&(filter=item.name.match(nameFilter)),filter&&""!==type&&(filter=item.type===type),filter&&""!==era){const eras=item.flags?.CoC7?.cocidFlag?.eras;eras&&Object.keys(eras).length>0&&!eras[era]&&(filter=!1)}filter&&show.push(item.id)}app.find("ol.directory-list li").each((function(){this.style.display=show.includes(this.dataset.documentId)?"flex":"none"}))}class CoCID{static init(){CONFIG.Actor.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("system.base"),CONFIG.Item.compendiumIndexFields.push("system.properties"),CONFIG.JournalEntry.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Macro.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Playlist.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.RollTable.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Scene.compendiumIndexFields.push("flags.CoC7.cocidFlag"),game.system.api={cocid:CoCID}}static regExKey(){return new RegExp("^("+Object.keys(CoCID.gamePropertyLookup).join("|")+")\\.(.*?)\\.(.+)$")}static getPrefix(document){for(const type in CoCID.documentNameLookup)if(document instanceof CoCID.documentNameLookup[type])return type+"."+(document.type??"")+".";return""}static guessId(document){return CoCID.getPrefix(document)+CoC7Utilities.toKebabCase(document.name)}static guessGroupFromKey(id){if(id){const key=id.replace(/([^\\.-]+)$/,"");if("-"===key.substr(-1))return key}return""}static guessGroupFromDocument(document){return CoCID.guessGroupFromKey(document.flags?.CoC7?.cocidFlag?.id)}static eraText(era){return!1===era?game.i18n.localize("CoC7.Any"):game.i18n.format(COC7.eras[era]??"CoC7.CoCIDFlag.error.unknown-era",{era})}static async expandItemArray({itemList,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){let items=[];const cocids=itemList.filter((it=>"string"==typeof it));if(items=itemList.filter((it=>"string"!=typeof it)),cocids.length){const found=await CoCID.fromCoCIDRegexBest({cocidRegExp:CoCID.makeGroupRegEx(cocids),type:"i",lang,era,langFallback,showLoading}),all=[];for(const cocid of cocids){const item=found.find((i=>i.flags.CoC7.cocidFlag.id===cocid));item&&all.push(item)}if(all.length<cocids.length){const notmissing=[];for(const doc of all)notmissing.push(doc.flags.CoC7.cocidFlag.id);!0===era&&(era=game.settings.get("CoC7","worldEra")),ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:cocids.filter((x=>!notmissing.includes(x))).join(", "),lang,era:CoCID.eraText(era)}))}items=items.concat(all)}return items}static findCocIdInList(cocid,list){let itemName="";const CoCIDKeys=flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys);return void 0!==CoCIDKeys[cocid]&&(itemName=CoCIDKeys[cocid]),(void 0===list.filter?Object.values(list):list).filter((i=>i.flags?.CoC7?.cocidFlag?.id===cocid||""!==itemName&&itemName===i.name))}static makeGroupRegEx(cocids){if("string"==typeof cocids)cocids=[cocids];else if(void 0===cocids||"function"!=typeof cocids.filter)return;const splits={},rgx=CoCID.regExKey();for(const i of cocids){const key=i.match(rgx);key&&(void 0===splits[key[1]]&&(splits[key[1]]={}),void 0===splits[key[1]][key[2]]&&(splits[key[1]][key[2]]=[]),splits[key[1]][key[2]].push(key[3]))}const regExParts=[];for(const t in splits){const row=[];for(const s in splits[t])splits[t][s].length>1?row.push(s+"\\.("+splits[t][s].join("|")+")"):row.push(s+"\\."+splits[t][s].join(""));row.length>1?regExParts.push(t+"\\.("+row.join("|")+")"):regExParts.push(t+"\\."+row.join(""))}return regExParts.length>1?new RegExp("^("+regExParts.join("|")+")$"):new RegExp("^"+regExParts.join("")+"$")}static async fromCoCIDRegexAll({cocidRegExp,type,lang=game.i18n.lang,era=!1,scope="match",langFallback=!0,showLoading=!1}={}){if(!cocidRegExp)return[];const result=[];let count=0;if(showLoading&&(["match","all","world"].includes(scope)&&count++,["match","all","compendiums"].includes(scope)&&(count+=game.packs.size)),["match","all","world"].includes(scope)){const worldDocuments=await CoCID.documentsFromWorld({cocidRegExp,type,lang,era,langFallback,progressBar:count});if("match"===scope&&worldDocuments.length)return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),this.filterAllCoCID(worldDocuments,langFallback&&"en"!==lang);result.splice(0,0,...worldDocuments)}if(["match","all","compendiums"].includes(scope)){const compendiaDocuments=await CoCID.documentsFromCompendia({cocidRegExp,type,lang,era,langFallback,progressBar:count});result.splice(result.length,0,...compendiaDocuments)}return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),this.filterAllCoCID(result,langFallback&&"en"!==lang)}static async fromCoCIDAll({cocid,lang=game.i18n.lang,era=!1,scope="match",langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];const parts=cocid.match(CoCID.regExKey());return parts?(""===lang&&(lang=game.i18n.lang),CoCID.fromCoCIDRegexAll({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$"),type:parts[1],lang,era,scope,langFallback,showLoading})):[]}static async fromCoCIDRegexBest({cocidRegExp,type,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){const allDocuments=await this.fromCoCIDRegexAll({cocidRegExp,type,lang,era,scope:"all",langFallback,showLoading});return this.filterBestCoCID(allDocuments)}static fromCoCID(cocid,lang=game.i18n.lang,era=!0,langFallback=!0){return CoCID.fromCoCIDBest({cocid,lang,era,langFallback})}static fromCoCIDBest({cocid,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];const type=cocid.split(".")[0],cocidRegExp=new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$");return CoCID.fromCoCIDRegexBest({cocidRegExp,type,lang,era,langFallback,showLoading})}static filterBestCoCID(documents){const bestMatchDocuments=new Map;for(const doc of documents){const docCoCID=doc.getFlag("CoC7","cocidFlag")?.id;if(docCoCID){const currentExists=bestMatchDocuments.get(docCoCID)?.id,docLang=doc.getFlag("CoC7","cocidFlag")?.lang??"en",existingLang=bestMatchDocuments.get(docCoCID)?.getFlag("CoC7","cocidFlag")?.lang??"en",preferLang=!currentExists||"en"===existingLang||existingLang===docLang,docPack=doc.pack??"",existingPack=bestMatchDocuments.get(docCoCID)?.pack??"",preferWorld=!currentExists||""===docPack||""!==existingPack,docPriority=parseInt(doc.getFlag("CoC7","cocidFlag")?.priority,10),existingPriority=parseInt(bestMatchDocuments.get(docCoCID)?.getFlag("CoC7","cocidFlag")?.priority??Number.MIN_SAFE_INTEGER);preferLang&&preferWorld&&(!currentExists||docPriority===existingPriority||docPriority>existingPriority)&&bestMatchDocuments.set(docCoCID,doc)}}return[...bestMatchDocuments.values()]}static filterAllCoCID(documents,langFallback){if(!langFallback)return documents;const bestMatchDocuments=new Map;for(const doc of documents){const docCoCID=doc.getFlag("CoC7","cocidFlag")?.id,docEras=Object.entries(doc.getFlag("CoC7","cocidFlag")?.eras??{}).filter((e=>e[1])).map((e=>e[0])).join("/");if(docCoCID){const currentExists=bestMatchDocuments.get(docCoCID)?.id,docLang=doc.getFlag("CoC7","cocidFlag")?.lang??"en",existingLang=bestMatchDocuments.get(docCoCID)?.getFlag("CoC7","cocidFlag")?.lang??"en";(!currentExists||"en"===existingLang||existingLang===docLang)&&bestMatchDocuments.set(docCoCID+"/"+docEras,doc)}}return[...bestMatchDocuments.values()]}static async documentsFromWorld({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}={}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra")),progressBar>0&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100/progressBar)});const gameProperty=CoCID.getGameProperty(`${type}..`),candidateDocuments=game[gameProperty]?.filter((d=>{const cocidFlag=d.getFlag("CoC7","cocidFlag");if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));return void 0===candidateDocuments?[]:candidateDocuments.sort(CoCID.compareCoCIDPrio)}static async documentsFromCompendia({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra"));const eraText=CoCID.eraText(era),documentType=CoCID.getDocumentType(type).schema.name,candidateDocuments=[];let count=1;for(const pack of game.packs)if(progressBar>0&&(SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100*count/progressBar)}),count++),pack.documentName===documentType){pack.indexed||await pack.getIndex();const indexInstances=pack.index.filter((i=>{const cocidFlag=i.flags?.CoC7?.cocidFlag;if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));for(const index of indexInstances){const document=await pack.getDocument(index._id);if(!document){const msg=game.i18n.format("CoC7.CoCIDFlag.error.document-not-found",{cocid:cocidRegExp,lang,era:eraText});throw ui.notifications.error(msg),console.log("CoC7 |",msg,index),new Error}candidateDocuments.push(document)}}return candidateDocuments.sort(CoCID.compareCoCIDPrio)}static compareCoCIDPrio(a,b){return b.getFlag("CoC7","cocidFlag")?.priority-a.getFlag("CoC7","cocidFlag")?.priority}static getGameProperty(cocid){const type=cocid.split(".")[0],gameProperty=CoCID.gamePropertyLookup[type];if(!gameProperty)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return gameProperty}static get gamePropertyLookup(){return{a:"actors",c:"cards",i:"items",je:"journal",m:"macros",p:"playlists",rt:"tables",s:"scenes"}}static getDocumentType(cocid){const type=cocid.split(".")[0],documentType=CoCID.documentNameLookup[type];if(!documentType)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return documentType}static get documentNameLookup(){return{a:Actor,c:Card,i:Item,je:JournalEntry,m:Macro,p:Playlist,rt:RollTable,s:Scene}}}function listen(){Hooks.once("init",(async()=>{CONFIG.ActiveEffect.documentClass=CoC7ActiveEffect,CONFIG.Actor.documentClass=CoCActor,CONFIG.Actor.documentClasses={vehicle:CoC7Vehicle},CONFIG.Item.documentClass=CoC7Item,CONFIG.Item.documentClasses={book:CoC7Book,spell:CoC7Spell,chase:CoC7Chase,skill:CoC7Skill},async function(){loadTemplates(["systems/CoC7/templates/actors/parts/npc-skills.html","systems/CoC7/templates/actors/parts/npc-combat.html","systems/CoC7/templates/actors/parts/actor-inventory.html","systems/CoC7/templates/actors/parts/actor-inventory-items.html","systems/CoC7/templates/actors/parts/actor-background.html","systems/CoC7/templates/common/active-effects.hbs","systems/CoC7/templates/actors/parts/actor-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-keeper-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-skills-v2.html","systems/CoC7/templates/actors/parts/character-development-v2.html","systems/CoC7/templates/actors/parts/development-controls.html","systems/CoC7/templates/actors/parts/vitals.html","systems/CoC7/templates/actors/parts/combat.html","systems/CoC7/templates/actors/character-sheet-v2.html","systems/CoC7/templates/actors/character/summary.html","systems/CoC7/templates/items/book/details.html","systems/CoC7/templates/items/spell/details.html","systems/CoC7/templates/apps/investigator-wizard/introduction.hbs","systems/CoC7/templates/apps/investigator-wizard/configuration.hbs","systems/CoC7/templates/apps/investigator-wizard/select-setup.hbs","systems/CoC7/templates/apps/investigator-wizard/select-archetype.hbs","systems/CoC7/templates/apps/investigator-wizard/select-occupation.hbs","systems/CoC7/templates/apps/investigator-wizard/set-characteristics.hbs","systems/CoC7/templates/apps/investigator-wizard/set-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/view-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/set-investigator.hbs","systems/CoC7/templates/apps/investigator-wizard/set-occupation-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/toggle-skill.hbs","systems/CoC7/templates/apps/investigator-wizard/set-archetype-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/points-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/backstory.hbs","systems/CoC7/templates/apps/investigator-wizard/create.hbs"])}(),function(){if(game.settings.registerMenu("CoC7","gameRules",{name:"CoC7.Settings.Rules.Name",label:"CoC7.Settings.Rules.Label",hint:"CoC7.Settings.Rules.Hint",icon:"fas fa-book",type:CoC7GameRuleSettings,restricted:!0}),CoC7GameRuleSettings.registerSettings(),game.settings.register("CoC7","useContextMenus",{name:"SETTINGS.UseContextMenus",hint:"SETTINGS.UseContextMenusHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","dholeUploadDirectory",{name:"CoC7.Settings.DholeUpload.Directory.Name",hint:"CoC7.Settings.DholeUpload.Directory.Hint",scope:"world",config:!0,type:CoC7DirectoryPicker.DefaultDirectory,default:"[data] worlds/"+game.world.id+"/dhole-images"}),game.settings.register("CoC7","worldEra",{name:"CoC7.Settings.WorldEra.Name",hint:"CoC7.Settings.WorldEra.Hint",scope:"world",config:!0,default:"standard",type:String,choices:COC7.eras,onChange:()=>{ui.players.render(!0)}}),game.settings.register("CoC7","dropCoCID",{name:"CoC7.Settings.DropCoCID.Name",hint:"CoC7.Settings.DropCoCID.Hint",scope:"world",config:!0,default:"",type:String,choices:{"":"CoC7.Settings.DropCoCID.Prompt",Y:"CoC7.Settings.DropCoCID.UseCoCID",N:"CoC7.Settings.DropCoCID.IgnoreCoCID"}}),game.settings.register("CoC7","displayInitDices",{name:"SETTINGS.displayInitDices",hint:"SETTINGS.displayInitDicesHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayInitAsText",{name:"SETTINGS.displayInitAsText",hint:"SETTINGS.displayInitAsTextHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","stanbyGMRolls",{name:"SETTINGS.StanbyGMRolls",hint:"SETTINGS.StanbyGMRollsHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","allowFlatDiceModifier",{name:"SETTINGS.AllowFlatDiceModifier",hint:"SETTINGS.AllowFlatDiceModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","allowFlatThresholdModifier",{name:"SETTINGS.AllowFlatThresholdModifier",hint:"SETTINGS.AllowFlatThresholdModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","defaultCheckDifficulty",{name:"SETTINGS.DefaultDifficulty",hint:"SETTINGS.DefaultDifficultyHint",scope:"world",config:!0,default:"regular",type:String,choices:{regular:"SETTINGS.CheckDifficultyRegular",unknown:"SETTINGS.CheckDifficultyUnknown"}}),game.settings.register("CoC7","selfRollWhisperTarget",{name:"SETTINGS.SelfRollWhisperTarget",hint:"SETTINGS.SelfRollWhisperTargetHint",scope:"world",config:!0,default:"everyone",type:String,choices:{nobody:"SETTINGS.DoNotAdvise",owners:"SETTINGS.AdviseOwnersOnly",everyone:"SETTINGS.AdviseAllPlayer"}}),game.settings.register("CoC7","trustedCanModfyChatCard",{name:"SETTINGS.TrustedCanModfyChatCard",hint:"SETTINGS.TrustedCanModfyChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","trustedCanSeeChatCard",{name:"SETTINGS.TrustedCanSeeChatCard",hint:"SETTINGS.TrustedCanSeeChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayActorOnCard",{name:"SETTINGS.DisplayActorOnCard",hint:"SETTINGS.DisplayActorOnCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayCheckSuccessLevel",{name:"SETTINGS.DisplayCheckSuccessLevel",scope:"client",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayResultType",{name:"SETTINGS.DisplayResultType",scope:"client",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","useToken",{name:"SETTINGS.UseToken",hint:"SETTINGS.UseTokenHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","enableStatusIcons",{name:"SETTINGS.EnableStatusIcons",hint:"SETTINGS.EnableStatusIconsHint",scope:"world",config:!0,type:Boolean,default:!0}),game.settings.register("CoC7","gridSpaces",{name:"SETTINGS.RestrictGridSpaces",hint:"SETTINGS.RestrictGridSpacesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","distanceElevation",{name:"SETTINGS.CheckElevation",hint:"SETTINGS.CheckElevationHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","overrideGameArtwork",{name:"SETTINGS.OverrideGameArtwork",hint:"SETTINGS.OverrideGameArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideGameArtwork")&&(game.settings.register("CoC7","artPauseImage",{name:"SETTINGS.ArtPauseImage",hint:"SETTINGS.ArtPauseImageHint",scope:"world",config:!0,default:"systems/CoC7/assets/icons/time-trap.svg",type:String}),game.settings.register("CoC7","artPauseText",{name:"SETTINGS.ArtPauseText",hint:"SETTINGS.ArtPauseTextHint",scope:"world",config:!0,default:"The Blind Idiot God is dreaming...",type:String})),game.settings.register("CoC7","displayPlayerNameOnSheet",{name:"SETTINGS.displayPlayerNameOnSheet",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","toolTipDelay",{name:"CoC7.toolTipDelay",scope:"world",config:!0,default:2e3,type:Number}),game.settings.register("CoC7","showIconsOnly",{name:"SETTINGS.showIconsOnly",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","playerUnlockSheetMode",{name:"SETTINGS.PlayerUnlockSheetMode",scope:"world",config:!0,default:"always",type:String,choices:{always:"SETTINGS.AlwaysEditable",creation:"SETTINGS.CreationModeOnly",never:"SETTINGS.NeverEditable"}}),game.settings.register("CoC7","statusPlayerEditable",{name:"SETTINGS.StatusPlayerEditable",hint:"SETTINGS.StatusPlayerEditableHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","oneBlockBackstory",{name:"SETTINGS.OneBlockBackStory",hint:"SETTINGS.OneBlockBackStoryHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideSheetArtwork",{name:"SETTINGS.OverrideSheetArtwork",hint:"SETTINGS.OverrideSheetArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideSheetArtwork")){function _setRootFontSize(size){$(":root").css("font-size",size),ui.sidebar.render(!0);for(const[,w]of Object.entries(ui.windows))w.render(!0)}game.settings.register("CoC7","artWorkSheetBackground",{name:"SETTINGS.ArtWorkSheetBackground",hint:"SETTINGS.ArtWorkSheetBackgroundHint",scope:"world",config:!0,default:"url('./assets/images/background.webp') 4 repeat",type:String}),game.settings.register("CoC7","artWorkSheetBackgroundType",{name:"SETTINGS.ArtWorkSheetBackgroundType",scope:"world",config:!0,default:"slice",type:String,choices:{slice:"SETTINGS.BackgroundSlice",auto:"SETTINGS.BackgroundAuto",contain:"SETTINGS.BackgroundContain",cover:"SETTINGS.BackgroundCover"}}),game.settings.register("CoC7","artWorkOtherSheetBackground",{name:"SETTINGS.ArtWorkOtherSheetBackground",hint:"SETTINGS.ArtWorkOtherSheetBackgroundHint",scope:"world",config:!0,default:"url( './assets/images/background.webp')",type:String}),game.settings.register("CoC7","artworkSheetImage",{name:"SETTINGS.ArtworkSheetImage",hint:"SETTINGS.ArtworkSheetImageHint",scope:"world",config:!0,default:"url('./assets/images/tentacles.webp')",type:String}),game.settings.register("CoC7","artworkFrontColor",{name:"SETTINGS.ArtworkFrontColor",hint:"SETTINGS.ArtworkFrontColorHint",scope:"world",config:!0,default:"rgba(43,55,83,1)",type:String}),game.settings.register("CoC7","artworkBackgroundColor",{name:"SETTINGS.ArtworkBackgroundColor",hint:"SETTINGS.ArtworkBackgroundColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkInteractiveColor",{name:"SETTINGS.ArtworkInteractiveColor",hint:"SETTINGS.ArtworkInteractiveColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkFixedSkillLength",{name:"SETTINGS.ArtworkFixedSkillLength",hint:"SETTINGS.ArtworkFixedSkillLengthHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","artworkMainFont",{name:"SETTINGS.ArtworkMainFont",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontBold",{name:"SETTINGS.ArtworkMainFontBold",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontSize",{name:"SETTINGS.ArtworkMainFontSize",scope:"world",config:!0,default:16,type:Number,onChange:size=>_setRootFontSize(size)})}if(game.settings.register("CoC7","disregardUsePerRound",{name:"SETTINGS.DisregardUsePerRound",hint:"SETTINGS.DisregardUsePerRoundHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardAmmo",{name:"SETTINGS.DisregardAmmo",hint:"SETTINGS.DisregardAmmoHint",scope:"world",config:!0,default:!1,type:Boolean}),game.modules.get("dice-so-nice")?.active){game.settings.register("CoC7","syncDice3d",{name:"SETTINGS.SyncDice3D",hint:"SETTINGS.SyncDice3DHint",scope:"world",config:!0,default:!0,type:Boolean});const[version]=game.modules.get("dice-so-nice")?.version.split(".");!isNaN(Number(version))&&Number(version)>=3&&(game.settings.register("CoC7","tenDieBonus",{name:"SETTINGS.TenDieBonus",hint:"SETTINGS.TenDieBonusHint",scope:"client",config:!0,default:"bronze",type:String}),game.settings.register("CoC7","tenDiePenalty",{name:"SETTINGS.TenDiePenalty",hint:"SETTINGS.TenDiePenaltyHint",scope:"client",config:!0,default:"bloodmoon",type:String}))}game.settings.register("CoC7","debugmode",{name:"SETTINGS.DebugMode",hint:"SETTINGS.DebugModeHint",scope:"client",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","experimentalFeatures",{name:"SETTINGS.ShowExperimentalFeatures",hint:"SETTINGS.ShowExperimentalFeaturesHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","hiddendevmenu",{name:"Hidden dev menu",hint:"Use at your own risk",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","developmentEnabled",{name:"Dev phased allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","showWelcomeMessage",{name:"SETTINGS.showWelcomeMessage",hint:"SETTINGS.showWelcomeMessage",scope:"world",config:!1,default:!0,type:Boolean}),game.settings.register("CoC7","charCreationEnabled",{name:"Char creation allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","systemUpdateVersion",{name:"System update version",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","systemUpdatedModuleVersion",{scope:"world",config:!1,default:{}}),game.settings.register("CoC7","xpEnabled",{name:"Enable XP gain",scope:"world",config:!1,type:Boolean,default:!0}),game.settings.register("CoC7","showInstructions",{name:"Show changelog/instructions",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","InvestigatorWizardSetup",{name:"Force specific setup CoC ID for Investigator Wizard",scope:"world",config:!1,type:String,default:""}),game.settings.register("CoC7","InvestigatorWizardQuantity",{name:"Number of investigators a single user without create actor rights can own",scope:"world",config:!1,type:Number,default:0}),game.settings.register("CoC7","InvestigatorWizardOwnership",{name:"Default permissions for non owner players",scope:"world",config:!1,type:Number,default:CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE}),game.settings.register("CoC7","InvestigatorWizardRerolls",{name:"Allow players to reroll characteristics",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardPointBuy",{name:"Force point buy instead of setup choice",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardQuickFire",{name:"Quick fire setup values",scope:"world",config:!1,type:Array,default:[]}),CONFIG.Combat.initiative={formula:"@characteristics.dex.value",decimals:4},CONFIG.debug.hooks=!!game.settings.get("CoC7","debugmode"),CONFIG.Dice.terms.t=CoC7DecaderDie,CONFIG.Dice.terms.o=CoC7DecaderDieOther}(),Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("CoC7",CoC7NPCSheet,{types:["npc"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7VehicleSheet,{types:["vehicle"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CreatureSheet,{types:["creature"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7ContainerSheet,{types:["container"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CharacterSheet,{types:["character"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("CoC7",CoC7SkillSheet,{types:["skill"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7WeaponSheet,{types:["weapon"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7BookSheet,{types:["book"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SpellSheet,{types:["spell"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7TalentSheet,{types:["talent"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7StatusSheet,{types:["status"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7OccupationSheet,{types:["occupation"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArchetypeSheet,{types:["archetype"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SetupSheet,{types:["setup"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ChaseSheet,{types:["chase"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ItemSheet,{types:["item"]}),Items.registerSheet("CoC7",CoC7ItemSheetV2,{types:["item"],makeDefault:!0}),Scenes.unregisterSheet("core",SceneConfig),Scenes.registerSheet("CoC7",CoC7SceneConfig,{makeDefault:!0}),Journal.unregisterSheet("core",JournalSheet),Journal.registerSheet("CoC7",CoC7JournalSheet,{makeDefault:!0}),RollTables.unregisterSheet("core",RollTableConfig),RollTables.registerSheet("CoC7",CoC7RollTableConfig,{makeDefault:!0}),Macros.unregisterSheet("core",MacroConfig),Macros.registerSheet("CoC7",CoC7MacroConfig,{makeDefault:!0}),Playlists.unregisterSheet("core",PlaylistConfig),Playlists.registerSheet("CoC7",CoC7PlaylistConfig,{makeDefault:!0}),Handlebars.registerHelper("rollActorImg",(function(actorKey){return chatHelper.getActorImgFromKey(actorKey)||"../icons/svg/mystery-man-black.svg"})),function(){Hooks.on("renderCompendium",(async(app,html,data)=>{if("Item"===app.collection.documentName){await app.collection.getIndex();const types=[...new Set(data.index.filter((i=>"#[CF_tempEntity]"!==i.name)).map((item=>item.type)))],select=[];select.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>"),types.includes("archetype")&&select.push('<option value="archetype">'+game.i18n.localize("CoC7.Entities.Archetype")+"</option>"),types.includes("book")&&select.push('<option value="book">'+game.i18n.localize("CoC7.Entities.Book")+"</option>"),types.includes("item")&&select.push('<option value="item">'+game.i18n.localize("CoC7.Entities.Item")+"</option>"),types.includes("occupation")&&select.push('<option value="occupation">'+game.i18n.localize("CoC7.Entities.Occupation")+"</option>"),types.includes("setup")&&select.push('<option value="setup">'+game.i18n.localize("CoC7.Entities.Setup")+"</option>"),types.includes("skill")&&select.push('<option value="skill">'+game.i18n.localize("CoC7.Entities.Skill")+"</option>"),types.includes("spell")&&select.push('<option value="spell">'+game.i18n.localize("CoC7.Entities.Spell")+"</option>"),types.includes("status")&&select.push('<option value="status">'+game.i18n.localize("CoC7.Entities.Status")+"</option>"),types.includes("talent")&&select.push('<option value="talent">'+game.i18n.localize("CoC7.Entities.Talent")+"</option>"),types.includes("weapon")&&select.push('<option value="weapon">'+game.i18n.localize("CoC7.Entities.Weapon")+"</option>");const eras=[];eras.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>");for(const era of Object.entries(COC7.eras).map((e=>({id:e[0],name:game.i18n.localize(e[1])}))).sort(CoC7Utilities.sortByNameKey))eras.push('<option value="'+era.id+'">'+era.name+"</option>");html.data("packId",app.metadata.id);let uncommon=game.i18n.localize("CoC7.SkillRarityShort");"CoC7.SkillRarityShort"===uncommon&&(uncommon="??"),html.find("li.directory-item").each((function(){const row=$(this);let item=[];item=void 0!==data.index?data.index.find((i=>i._id===row.data("document-id"))):app.collection.index.get(row.data("document-id")),item&&"skill"===item.type&&row.find("a").html(item.name+" ("+(item.system?.base??"?")+"%"+(item.system?.properties?.rarity?" "+uncommon:"")+")")})),html.find("header.directory-header").after('<div class="compendiumfilter"><div class="header-search flexrow"><i class="fas fa-layer-group"></i><select name="coc7type'+app.appId+'" style="">'+select.join("")+'</select></div><div class="header-search flexrow era_select" style="display:none"><i class="fas fa-layer-group"></i><select name="coc7era'+app.appId+'" style="">'+eras.join("")+"</select></div></div>"),html.find("select").change(performFilter.bind(this)),html.find("input").keyup(performFilter.bind(this))}}))}(),CoCID.init(),CoC7Link.init()}))}class CoC7DecaderDSNFaces{construtor(){this.selected=""}setFaces(){let selected=game.user.getFlag("dice-so-nice","appearance")?.global.system;if(selected!==this.selected){let data,destination,sourceDie=game.dice3d.DiceFactory.systems[selected]?.dice.find((d=>"d100"===d.type));void 0===sourceDie&&(sourceDie=game.dice3d.DiceFactory.systems.standard.dice.find((d=>"d100"===d.type)),selected="standard"),void 0!==sourceDie&&(destination=game.dice3d.DiceFactory.systems.standard.dice.findIndex((d=>"dt"===d.type)),data=Object.assign({},sourceDie),data.type="dt",game.dice3d.DiceFactory.systems.standard.dice[destination]=Object.assign(sourceDie.constructor.prototype,data)),this.selected=selected}}}class CoC7Tooltips{constructor(){this.ToolTipHover=null,this.toolTipTimer=null}displayToolTip(toolTip){if(void 0!==this.ToolTipHover){const bounds=this.ToolTipHover.getBoundingClientRect();if(!isNaN(bounds.left||"")&&!isNaN(bounds.top||"")){let left=bounds.left,top=bounds.top;const heightText=$(this.ToolTipHover).outerHeight();$("body").append('<div id="help-tooltip">'+toolTip+"</div>");const tip=$("#help-tooltip"),heightTip=tip.outerHeight(),widthTip=tip.outerWidth();window.innerHeight<1.5*heightText+heightTip+top?top-=heightTip:top+=1.5*heightText,window.innerWidth<widthTip+left&&(left=window.innerWidth-widthTip),tip.css({left:left+"px",top:top+"px"})}}}toolTipLeave(event){game.CoC7Tooltips.ToolTipHover===event.currentTarget&&(clearTimeout(game.CoC7Tooltips.toolTipTimer),game.CoC7Tooltips.ToolTipHover=null,$("#help-tooltip").remove())}}let CoC7Tour=class{};"undefined"!=typeof Tour&&(CoC7Tour=class extends Tour{async waitForElement(selector){return new Promise(((resolve,reject)=>{if(document.querySelector(selector))return void resolve();new MutationObserver(((mutations,observer)=>{document.querySelectorAll(selector).forEach((el=>{resolve(),observer.disconnect()}))})).observe(document.body,{childList:!0,subtree:!0})}))}async _preStep(){if(await super._preStep(),0===this.stepIndex)for(const app of Object.values(ui.windows))app.close();await this.waitForElement(this.currentStep.selector)}async _postStep(){if(await super._postStep(),!(this.stepIndex<0)&&this.hasNext&&this.currentStep.action)if(this.isResetting)this.isResetting=!1;else if("click"===this.currentStep.action)document.querySelector(this.currentStep.selector).click()}async reset(){"completed"!==this.status&&(this.isResetting=!0),await super.reset()}});class EnableVariantRulesEn extends CoC7Tour{constructor(config){super(mergeObject({title:"Enable optional/variant rules.",description:"Learn how to enable Pulp Cthulhu rules, or other variant rules",canBeResumed:!1,display:!0,steps:[{id:"goto-settings",selector:'[data-tab="settings"]',title:"COC7.Tour.GotoSettingsTitle",content:"COC7.Tour.GotoSettingsContent",action:"click"},{id:"goto-configure",selector:'[data-action="configure"]',title:"COC7.Tour.GotoConfigureTitle",content:"COC7.Tour.GotoConfigureContent",action:"click"},{id:"goto-system-settings",selector:'[data-category="system"]',title:"COC7.Tour.GotoSystemSettingsTitle",content:"COC7.Tour.GotoSystemSettingsContent",action:"click"},{id:"goto-game-rules",selector:'[data-category="system"] [data-key="CoC7.gameRules"]',title:"COC7.Tour.GotoGameRulesTitle",content:"COC7.Tour.GotoGameRulesContent",action:"click"},{id:"save-game-rules",selector:"#rules-settings [name=submit]",title:"COC7.Tour.SaveGameRulesTitle",content:"COC7.Tour.SaveGameRulesContent"}],localization:{"COC7.Tour.GotoSettingsTitle":"Game Settings","COC7.Tour.GotoSettingsContent":"Go to the Game Settings tab","COC7.Tour.GotoConfigureTitle":"Configure Settings","COC7.Tour.GotoConfigureContent":"Click on the Configure Settings button","COC7.Tour.GotoSystemSettingsTitle":"System Settings","COC7.Tour.GotoSystemSettingsContent":"Go to the System Settings tab","COC7.Tour.GotoGameRulesTitle":"Configure Variant/Optional Rules","COC7.Tour.GotoGameRulesContent":"Click on the Configure Variant/Optional Rules button","COC7.Tour.SaveGameRulesTitle":"Save rule changes","COC7.Tour.SaveGameRulesContent":"Once you have made your changes click on the Save Changes button"}},config))}async _preStep(){await super._preStep(),"goto-game-rules"===this.currentStep.id&&(await this.waitForElement(".category-filter.system.active"),await this.waitForElement(this.currentStep.selector))}}class EnableVariantRulesFr extends EnableVariantRulesEn{constructor(config){super({title:"Activez les règles optionnelles.",description:"Activez les règles optionelles et Pulp Cthulhu",localization:{"COC7.Tour.GotoSettingsTitle":"Paramètres","COC7.Tour.GotoSettingsContent":'Ouvrir l\'onglet "Paramètres"',"COC7.Tour.GotoConfigureTitle":"Configuration des options","COC7.Tour.GotoConfigureContent":'Cliquez sur "Configuration des options"',"COC7.Tour.GotoSystemSettingsTitle":"Système de jeu","COC7.Tour.GotoSystemSettingsContent":'Ouvrez l\'onglet "Système de jeu"',"COC7.Tour.GotoGameRulesTitle":"Configurer les variantes/règles optionnelles","COC7.Tour.GotoGameRulesContent":'Clickez sur le boutton "Configurer les variantes/règles optionnelles"',"COC7.Tour.SaveGameRulesTitle":"Sauvegarder les modifications","COC7.Tour.SaveGameRulesContent":'Apres avoir choisis les options cliquez sur le bouton "Sauvegarder les modifications"'}})}}function ready_listen(){Hooks.once("ready",(async()=>{console.log("Call of Cthulhu 7th Edition | Ready"),game.settings.get("CoC7","showWelcomeMessage")&&game.user.isGM,game.CoC7Tooltips=new CoC7Tooltips;const instructionsVersion=game.settings.get("CoC7","showInstructions");if(isNewerVersion(game.system.version,instructionsVersion??"0")){let lang=game.i18n.lang;const readMe={en:"sxB2OXbfwV6M0nyQ",fr:"tdakyzTVOQsAMdSm"};void 0===readMe[lang]&&(lang="en"),(await game.packs.get("CoC7.system-doc").getDocument(readMe[lang])).sheet.render(!0),game.settings.set("CoC7","showInstructions",game.system.version)}!async function(){try{let lang=game.i18n.lang;const tours={en:{"enable-variant-rules":EnableVariantRulesEn},fr:{"enable-variant-rules":EnableVariantRulesFr}};void 0===tours[lang]&&(lang="en");for(const tourName in tours[lang])game.tours.register("CoC7",tourName,new tours[lang][tourName])}catch(err){console.error("TOUR ERROR",err)}}()}))}const CoC7Hooks={listen(){listen(),ready_listen(),Hooks.on("renderActorSheet",(async(data,html,options)=>{})),Hooks.on("renderChatMessage",((app,html,data)=>{CoC7Chat.renderMessageHook(app,html,data),CoC7Chat.renderChatMessageHook(app,html,data),CoC7Parser.ParseMessage(app,html,data),CoC7Link.bindEventsHandler(html)})),Hooks.on("renderDialog",((dialog,html)=>{const form=html.find("form");if(form.is("#document-create")&&0!==form.find("select").length){const entityCreateSelectTag=form.find("[name='type']"),entitySortedList=[],showExperimental=!!game.settings.get("CoC7","experimentalFeatures");entityCreateSelectTag.children().each(((o,entityOption)=>{const key=entityOption.textContent?.capitalize();game.i18n.has(`CoC7.Entities.${key}`)&&(entityOption.textContent=game.i18n.localize(`CoC7.Entities.${key}`)),!showExperimental&&["vehicle"].includes(entityOption.value)||entitySortedList.push(entityOption)})),entityCreateSelectTag.empty(),entityCreateSelectTag.append(entitySortedList.sort(((first,second)=>first.innerText.localeCompare(second.innerText)))),"actor"===entityCreateSelectTag.val()?entityCreateSelectTag.val("character"):"book"===entityCreateSelectTag.val()&&entityCreateSelectTag.val("item")}})),Hooks.on("renderItemSheet",(async(data,html,options)=>{})),Hooks.on("renderPause",(async(data,html,options)=>{game.settings.get("CoC7","overrideGameArtwork")&&("null"===game.settings.get("CoC7","artPauseImage").toLowerCase()&&html.find("img").remove(),""!==game.settings.get("CoC7","artPauseImage")&&html.find("img").attr("src",game.settings.get("CoC7","artPauseImage")),""!==game.settings.get("CoC7","artPauseText")&&html.find("h3").html(game.settings.get("CoC7","artPauseText")))})),Hooks.once("diceSoNiceReady",(dice3d=>{dice3d.addDicePreset({type:"dt",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),dice3d.addDicePreset({type:"do",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),game.CoC7DecaderDSNFaces=new CoC7DecaderDSNFaces})),Hooks.on("diceSoNiceRollStart",(dice3d=>{game.CoC7DecaderDSNFaces.setFaces()})),Hooks.on("renderPlayerList",((playerList,html,data)=>{$("<h4>").append('<div><i class="fa-regular fa-calendar"></i>'+game.i18n.format(COC7.eras[game.settings.get("CoC7","worldEra")]??"CoC7.CoCIDFlag.error.unknown-era",{era:game.settings.get("CoC7","worldEra")})+"</div>").insertAfter($("h3",html))})),Hooks.on("renderSettingsConfig",((app,html,user)=>{CoC7DirectoryPicker.processHtml(html)}))}};async function gmcreatemessageas(data){const meleeTarget=new CoC7MeleeTarget(data.targetKey,data.messageId,data.fastForward);meleeTarget.initiatorKey=data.actorKey;return await meleeTarget.createChatCard()}async function gmtradeitemto(data){try{let actor;actor=data.scene?game.scenes.get(data.scene).tokens.get(data.actorFrom).actor:game.actors.get(data.actorFrom);const item=actor.items.get(data.item);await game.actors.get(data.actorTo).createEmbeddedDocuments("Item",[item.toJSON()])&&actor.deleteEmbeddedDocuments("Item",[item.id])}catch(e){return ui.notifications.error(e),!1}return!0}class CoC7SystemSocket{static async callSocket(data){if(void 0!==data.listener){if(game.user.id===data.listener)switch(data.type){case"character-wizard":CoC7InvestigatorWizard.createCharacterFromData(data.payload);break;case"open-character":game.actors.get(data.payload).sheet.render(!0)}}else{if(game.user.isGM)switch(data.type){case OpposedCheckCard.defaultConfig.type:OpposedCheckCard.dispatch(data);break;case CombinedCheckCard.defaultConfig.type:CombinedCheckCard.dispatch(data);break;case"invoke":(await fromUuid(data.item))[data.method](data.data)}if("updateChar"===data.type)CoC7Utilities.updateCharSheets()}}static requestKeeperAction(data){if(game.user.isGM)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const keepers=game.users.filter((u=>u.active&&u.isGM));keepers.length?(data.listener=keepers[0].id,game.socket.emit("system.CoC7",data)):ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}static requestUserAction(data,{userId=null,errorIfMissing=!0,includeSelf=!0}={}){if(userId&&void 0!==userId)if(userId===game.user.id)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const user=game.users.get(userId);void 0!==user.id&&user.active?(data.listener=user.id,game.socket.emit("system.CoC7",data)):errorIfMissing&&ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingUser"))}else includeSelf&&CoC7SystemSocket.callSocket(data),game.socket.emit("system.CoC7",data)}}function _onLeftClick(event){return event.shiftKey}Hooks.on("renderSettingsConfig",((app,html,options)=>{const systemTab=$(app.form).find(".tab[data-tab=system]");systemTab.find("input[name=CoC7\\.displayInitDices]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleInitiative")+"</h2>"),systemTab.find("input[name=CoC7\\.stanbyGMRolls]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRoll")+"</h2>"),systemTab.find("input[name=CoC7\\.trustedCanModfyChatCard]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleChatCards")+"</h2>"),systemTab.find("input[name=CoC7\\.enableStatusIcons]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleScene")+"</h2>"),systemTab.find("input[name=CoC7\\.overrideGameArtwork]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleGameArtwork")+"</h2>"),systemTab.find("input[name=CoC7\\.displayPlayerNameOnSheet]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleSheet")+"</h2>"),systemTab.find("input[name=CoC7\\.disregardUsePerRound]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleWeapon")+"</h2>"),systemTab.find("input[name=CoC7\\.syncDice3d]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDiceSoNice")+"</h2>"),systemTab.find("input[name=CoC7\\.debugmode]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDeveloperDebug")+"</h2>"),systemTab.find("select[name=CoC7\\.boutOfMadnessSummaryTable]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRollTable")+"</h2>")})),Hooks.once("init",(async function(){game.CoC7={macros:{skillCheck:CoC7Utilities.skillCheckMacro,weaponCheck:CoC7Utilities.weaponCheckMacro,check:CoC7Utilities.checkMacro},cards:{DamageCard},dev:{dice:{alwaysCrit:!1,alwaysFumble:!1}},eras:(era,name)=>{COC7.eras[era]=name}},Combat.prototype.rollInitiative=rollInitiative})),function(...cardclass){Hooks.on("renderChatLog",((app,html,data)=>EnhancedChatCardLib.injectCSS(app,html,data))),Hooks.once("socketlib.ready",(function(){EnhancedChatCardLib.register(cardclass),EnhancedChatCardLib.socket=socketlib.registerSystem(game.system.id),EnhancedChatCardLib.socket.register("updateMessage",updateMessage),EnhancedChatCardLib.socket.register("GMUpdate",GMUpdate),EnhancedChatCardLib.socket.register("advise",advise)})),Hooks.on("renderChatMessage",((app,html,data)=>EnhancedChatCard.bindListeners(html)))}(ChaseObstacleCard),Hooks.on("renderCombatTracker",((app,html,data)=>CoC7Combat.renderCombatTracker(app,html,data))),Hooks.on("chatMessage",((html,content)=>{if(content.match(/^\/(cbr|cc)/i)){const commands=content.match(/(\d+)/g);return commands?new Roll("1d100").roll({async:!0}).then((r=>{const s=r.result,res=commands.map((m=>{let res="";return res=s<=1?game.i18n.localize("CoC7.CriticalSuccess"):s>=100?game.i18n.localize("CoC7.Fumble"):s<=m/5?game.i18n.localize("CoC7.ExtremeSuccess"):s<=m/2?game.i18n.localize("CoC7.HardSuccess"):s<=m?game.i18n.localize("CoC7.RegularSuccess"):s>=96&&m<50?game.i18n.localize("CoC7.Fumble"):game.i18n.localize("CoC7.Failure"),res+=" "+game.i18n.localize("CoC7.Value")+" "+m,res})).join(" / ");r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:res})})):ui.notifications.error("Incorrect usage of command"),!1}})),CoC7Hooks.listen(),Hooks.once("socketlib.ready",(function(){game.CoC7socket=socketlib.registerSystem("CoC7"),game.CoC7socket.register("gmcreatemessageas",gmcreatemessageas),game.CoC7socket.register("gmtradeitemto",gmtradeitemto)})),Hooks.once("setup",(function(){const toLocalize=["spellProperties","bookType","talentType","occupationProperties","statusType"];for(const o of toLocalize){const localized=Object.entries(COC7[o]).map((e=>[e[0],game.i18n.localize(e[1])]));COC7[o]=localized.reduce(((obj,e)=>(obj[e[0]]=e[1],obj)),{})}let effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.dead));-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/tombstone.svg"),effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.unconscious)),-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/knocked-out-stars.svg"),CONFIG.statusEffects.unshift({id:COC7.status.tempoInsane,label:"CoC7.BoutOfMadnessName",icon:"systems/CoC7/assets/icons/hanging-spider.svg"},{id:COC7.status.indefInsane,label:"CoC7.InsanityName",icon:"systems/CoC7/assets/icons/tentacles-skull.svg"},{id:COC7.status.criticalWounds,label:"CoC7.CriticalWounds",icon:"systems/CoC7/assets/icons/arm-sling.svg"},{id:COC7.status.dying,label:"CoC7.Dying",icon:"systems/CoC7/assets/icons/heart-beats.svg"})})),Hooks.on("createActiveEffect",((data,options,userId)=>{if(game.userId===userId&&void 0!==data.flags.core&&void 0!==data.flags.core.statusId)switch(data.flags.core.statusId){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.setCondition(data.flags.core.statusId,{forceValue:!0});break;case COC7.status.tempoInsane:{const realTime=data.flags.CoC7?.realTime;let duration=null;!0===realTime?duration=data.duration?.rounds:!1===realTime&&(duration=data.duration?.seconds,isNaN(duration)||(duration=Math.floor(duration/3600))),data.parent.setCondition(COC7.status.tempoInsane,{forceValue:!0,realTime,duration})}}})),Hooks.on("deleteActiveEffect",((data,options,userId)=>{if(game.userId===userId&&void 0!==data.flags.core&&void 0!==data.flags.core.statusId)switch(data.flags.core.statusId){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.unsetCondition(data.flags.core.statusId,{forceValue:!0})}})),Hooks.on("changeSidebarTab",(directory=>{if(directory instanceof ItemDirectory){const item=game.items.find((i=>"__CoC7InternalItem__"===i.name));if(item){const itemElement=directory._element.find(`[data-document-id='${item.id}']`);itemElement&&(itemElement[0].style.display="none")}}})),Hooks.on("hotbarDrop",((bar,data,slot)=>CoC7Utilities.createMacro(bar,data,slot))),Hooks.on("renderChatLog",((app,html,data)=>CoC7Chat.chatListeners(app,html,data))),Hooks.on("updateChatMessage",((chatMessage,chatData,diff,speaker)=>CoC7Chat.onUpdateChatMessage(chatMessage,chatData,diff,speaker))),Hooks.on("ready",(async()=>{function _tableSettingsChanged(table,id){game.CoC7.tables[table]="none"===id?null:game.tables.get(id)}await Updater.checkForUpdate(),function(){const body=$("body");document.addEventListener("click",CoC7ContextMenu.closeAll),body.on("click","a.coc7-inline-check",CoC7Check._onClickInlineRoll),document.addEventListener("mousedown",_onLeftClick)}(),game.CoC7.skillList=await(game.packs.get("CoC7.skills")?.getDocuments()),game.socket.on("system.CoC7",(async data=>{CoC7SystemSocket.callSocket(data)}));const tableChoice={none:"SETTINGS.LetKeeperDecide"};for(const t of game.tables)tableChoice[t._id]=t.name;game.settings.register("CoC7","boutOfMadnessSummaryTable",{name:"SETTINGS.BoutOfMadnessSummaryTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_Summary",id)}),game.settings.register("CoC7","boutOfMadnessRealTimeTable",{name:"SETTINGS.BoutOfMadnessRealTimeTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_RealTime",id)}),game.CoC7.tables={boutOfMadness_Summary:"none"===game.settings.get("CoC7","boutOfMadnessSummaryTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessSummaryTable")),boutOfMadness_RealTime:"none"===game.settings.get("CoC7","boutOfMadnessRealTimeTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessRealTimeTable"))}})),Hooks.on("renderCoC7ChaseSheet",((app,html,data)=>CoC7ChaseSheet.setScroll(app,html,data))),Hooks.on("closeCoC7ChaseSheet",((app,html)=>CoC7ChaseSheet.onClose(app,html))),Hooks.on("closeActorSheet",(characterSheet=>characterSheet.onCloseSheet())),Hooks.on("renderCoC7CreatureSheet",((app,html,data)=>CoC7CreatureSheet.forceAuto(app,html,data))),Hooks.on("renderCoC7NPCSheet",((app,html,data)=>CoC7NPCSheet.forceAuto(app,html,data))),Hooks.on("chatMessage",CoC7Utilities.ParseChatEntry),Hooks.on("getSceneControlButtons",(()=>{})),Hooks.on("renderItemSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderJournalPageSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderActorSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderActorSheet",CoC7CharacterSheet.renderSheet),Hooks.on("renderItemSheet",CoC7CharacterSheet.renderSheet),Hooks.on("getSceneControlButtons",CoC7Menu.getButtons),Hooks.on("renderSceneControls",CoC7Menu.renderControls),Hooks.on("dropCanvasData",CoC7Canvas.onDropSomething),Hooks.on("dropActorSheetData",(function(actor,sheet,data){if("Item"===data.type&&data.actorId){if(actor.data._id===data.actorId)return;let actorFrom=null;switch(actorFrom=data.sceneId&&data.tokenId?game.scenes.get(data.sceneId).tokens.get(data.tokenId).actor:game.actors.get(data.actorId),actor.data.type){case"character":case"npc":case"creature":if(!["chase"].includes(data.data.type))return;break;case"vehicle":return;case"container":if(!["book","item","spell","weapon"].includes(data.data.type))return}actorFrom&&actorFrom.deleteEmbeddedDocuments("Item",[data.data._id])}})),CONFIG.ui.settings=CoC7SettingsDirectory,CONFIG.ui.compendium=CoC7CompendiumDirectory,CONFIG.ui.actors=CoC7ActorDirectory})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNeHZCLEdBQUcsc0JBQXVCd2pFLFNBQVNreUIsZ0JBRXpDbG1FLE1BQU14dkIsR0FBRyxpQkFBa0Jza0UsV0FBV3F4QixpQkFFdENubUUsTUFBTXh2QixHQUFHLHNCRWplRixTQUE2QnBkLE1BQU84K0IsTUFBTzV4QixNQUNoRCxHQUFrQixTQUFkQSxLQUFLaEIsTUFBbUJnQixLQUFLNkosUUFBUyxDQUN4QyxHQUFJL1csTUFBTWtOLEtBQUs0MkIsTUFBUTUyQixLQUFLNkosUUFDMUIsT0FFRixJQUFJNC9DLFVBQVksS0FNaEIsT0FKRUEsVUFERXpwRCxLQUFLd0QsU0FBV3hELEtBQUt5RCxRQUNYN08sS0FBS21RLE9BQU9qUSxJQUFJa0wsS0FBS3dELFNBQVNqRSxPQUFPekssSUFBSWtMLEtBQUt5RCxTQUFTM1EsTUFFdkQ4QixLQUFLMkgsT0FBT3pILElBQUlrTCxLQUFLNkosU0FFM0IvVyxNQUFNa04sS0FBS2hCLE1BQ2pCLElBQUssWUFDTCxJQUFLLE1BQ0wsSUFBSyxXQUNILElBQUssQ0FBQyxTQUFTekksU0FBU3lKLEtBQUtBLEtBQUtoQixNQUNoQyxPQUVGLE1BQ0YsSUFBSyxVQUNILE9BQ0YsSUFBSyxZQUNILElBQUssQ0FBQyxPQUFRLE9BQVEsUUFBUyxVQUFVekksU0FBU3lKLEtBQUtBLEtBQUtoQixNQUMxRCxPQUdGeXFELFdBQ0ZBLFVBQVUxZ0Isd0JBQXdCLE9BQVEsQ0FBQy9vQyxLQUFLQSxLQUFLNDJCLEtBRXpELENBQ0YsSUZnZEF6Z0MsT0FBT3NKLEdBQUd6SyxTQUFXNi9FLHNCQUNyQjErRSxPQUFPc0osR0FBR3dsRCxXQUFhK3ZCLHdCQUN2QjcrRSxPQUFPc0osR0FBR2xELE9BQVM2NEUsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9kaWNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctY29udGVudC1saW5rLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvcm9sbC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvcm9sbC1jYXJkLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL2NvbWJpbmVkLXJvbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvaW50ZXJhY3RpdmUtY2hhdC1jYXJkLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL2RhbWFnZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZC1hY3Rvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9zYW4tY2hlY2suanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2FuZGF0YS1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29uY2hlY2suanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtc2VsZWN0aW9uLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9wb2ludC1zZWxlY3Rpb24tZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NoYXItc2VsZWN0aW9uLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jaGFyLXJvbGwtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXNwZWMtc2VsZWN0LWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXZhbHVlLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb21iYXQvbWVsZWUtcmVzb2x1dGlvbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L3JhbmdlY29tYmF0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbWJhdC9tZWxlZS1pbml0aWF0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9hY3Rvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWxpbmsuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy1wYXJzZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2l0ZW0uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS91dGlsaXRpZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jLWlkLWVkaXRvci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RpdmUtZWZmZWN0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb250ZXh0LW1lbnUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvYmFzZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvY3JlYXR1cmUtc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY3JlYXRlLW15dGhvcy1lbmNvdW50ZXJzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NoYXJhY3Rlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29tYmF0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYy1pZC1iYXRjaC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdXBkYXRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9hY3Rvci1pbXBvcnRlci1yZWdleHAuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29jNy1kaXJlY3RvcnktcGlja2VyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2Rob2xlaG91c2VfaW1wb3J0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXItZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2Ryb3AtY29jLWlkLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvb2NjdXBhdGlvbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2V0dGluZ3MtZGlyZWN0b3J5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb21wZW5kaXVtLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3ItZGlyZWN0b3J5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zcGVsbC9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9ib29rL2RhdGEuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbW1vbi9jaGF0Y2FyZGxpYi9zcmMvY2hhdGNhcmRsaWIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2NoYXNlL3BhcnRpY2lwYW50LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9za2lsbC9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvdmVoaWNsZS9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2RlY2FkZXItZGllLW90aGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2dhbWUtcnVsZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9hcmNoZXR5cGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL2Jvb2svc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvY29udGFpbmVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXRWMi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LWpvdXJuYWwtc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LW1hY3JvLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2hlZXRzL2NvYzctcGxheWxpc3QtY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zaGVldHMvY29jNy1yb2xsLXRhYmxlLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2hlZXRzL2NvYzctc2NlbmUtY29uZmlnLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc2V0dXAuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9za2lsbC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc3BlbGwvc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9zdGF0dXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy90YWxlbnQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvdmVoaWNsZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3dlYXBvbi1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9jb21wZW5kaXVtLWZpbHRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9jb2MtaWQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2luaXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29uZmlndXJlLWRvY3VtZW50cy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9sb2FkLXRlbXBsYXRlcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9yZWdpc3Rlci1zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9yZWdpc3Rlci1zaGVldHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvaGFuZGxlYmFycy1oZWxwZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvZGVjYWRlci1kc24tZmFjZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvdG9vbHRpcHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy10b3VyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS90b3Vycy9lbmFibGUtdmFyaWFudC1ydWxlcy1lbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdG91cnMvZW5hYmxlLXZhcmlhbnQtcnVsZXMtZnIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlYWR5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL3JlZ2lzdGVyLXRvdXJzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLWFjdG9yLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItY2hhdC1tZXNzYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItaXRlbS1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLXBhdXNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9kaWNlLXNvLW5pY2UtcmVhZHkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2RpY2Utc28tbmljZS1yb2xsLXN0YXJ0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItcGxheWVyLWxpc3QuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1zZXR0aW5ncy1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3NvY2tldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LXN5c3RlbS1zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvYzcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2RpY2Vib3QuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2Ryb3AtYWN0b3Itc2hlZXQtZGF0YS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBOYW1lc3BhY2UgQ09DNyBDb25maWd1cmF0aW9uIFZhbHVlc1xuZXhwb3J0IGNvbnN0IENPQzcgPSB7fVxuXG4vLyBDdXN0b20gY2hhdE1lc3NhZ2Vcbi8vIENPTkZJRy5DaGF0TWVzc2FnZS50ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2hhdC1tZXNzYWdlLmh0bWwnO1xuXG4vKipcbiAqIFRoZSBzZXQgb2YgRXJhcyB1c2VkIHdpdGhpbiB0aGUgc3lzdGVtXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5DT0M3LmVyYXMgPSB7XG4gIHN0YW5kYXJkOiAnQ29DNy5FcmExOTIwJyxcbiAgbW9kZXJuOiAnQ29DNy5FcmFNb2Rlcm4nLFxuICBtb2Rlcm5QdWxwOiAnQ29DNy5FcmFNb2Rlcm5QdWxwJyxcbiAgcHVscDogJ0NvQzcuRXJhUHVscCcsXG4gIGRvd25EYXJrZXJUcmFpbHM6ICdDb0M3LkVyYURvd25EYXJrZXJUcmFpbHMnLFxuICBkb3duRGFya2VyVHJhaWxzUHVscDogJ0NvQzcuRXJhRG93bkRhcmtlclRyYWlsc1B1bHAnLFxuICBkYXJrQWdlczogJ0NvQzcuRXJhRGFya0FnZXMnLFxuICBkYXJrQWdlc1B1bHA6ICdDb0M3LkVyYURhcmtBZ2VzUHVscCcsXG4gIHJlZ2VuY3k6ICdDb0M3LkVyYVJlZ2VuY3knLFxuICByZWdlbmN5UHVscDogJ0NvQzcuRXJhUmVnZW5jeVB1bHAnLFxuICAvLyBSZWlnbiBvZiBUZXJyb3JcbiAgZ2FzTGlnaHQ6ICdDb0M3LkVyYUdhc0xpZ2h0JyxcbiAgaW52aWN0dXM6ICdDb0M3LkVyYUludmljdHVzJ1xufVxuXG5DT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cyA9IHtcbiAgZGVjaW1hbExlZnQ6ICdkZWNpbWFsTGVmdCcsXG4gIGRlY2ltYWxSaWdodDogJ2RlY2ltYWxSaWdodCcsXG4gIGludGVnZXJMZWZ0OiAnaW50ZWdlckxlZnQnLFxuICBpbnRlZ2VyUmlnaHQ6ICdpbnRlZ2VyUmlnaHQnLFxuICBsc2Q6ICdsc2QnLFxuICByb21hbjogJ3JvbWFuJ1xufVxuXG5DT0M3Lm1vbmV0YXJ5Rm9ybWF0cyA9IHtcbiAgZGVjaW1hbExlZnQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0RGVjaW1hbExlZnQnLFxuICBkZWNpbWFsUmlnaHQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0RGVjaW1hbFJpZ2h0JyxcbiAgaW50ZWdlckxlZnQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0SW50ZWdlckxlZnQnLFxuICBpbnRlZ2VyUmlnaHQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0SW50ZWdlclJpZ2h0JyxcbiAgbHNkOiAnQ29DNy5Nb25ldGFyeUZvcm1hdExzZCcsXG4gIHJvbWFuOiAnQ29DNy5Nb25ldGFyeUZvcm1hdFJvbWFuJ1xufVxuXG5DT0M3Lm1vbmV0YXJ5VHlwZUtleXMgPSB7XG4gIG5vbmU6ICdub25lJyxcbiAgYXNzZXM6ICdhc3NlcycsXG4gIHNlc3RlcnRpaTogJ3Nlc3RlcnRpaScsXG4gIHF1aW5hcmlpOiAncXVpbmFyaWknLFxuICBkZW5hcmlpOiAnZGVuYXJpaScsXG4gIGQ6ICdkJyxcbiAgczogJ3MnLFxuICB2YWx1ZTogJ3ZhbHVlJyxcbiAgbXVsdGlwbGllcjogJ211bHRpcGxpZXInXG59XG5cbkNPQzcubW9uZXRhcnlUeXBlcyA9IHtcbiAgbm9uZToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZU5vbmUnLFxuICAgIGZpbHRlcjogW11cbiAgfSxcbiAgYXNzZXM6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVBc3NlcycsXG4gICAgZmlsdGVyOiBbJ3JvbWFuJ11cbiAgfSxcbiAgc2VzdGVydGlpOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlU2VzdGVydGlpJyxcbiAgICBmaWx0ZXI6IFsncm9tYW4nXVxuICB9LFxuICBxdWluYXJpaToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZVF1aW5hcmlpJyxcbiAgICBmaWx0ZXI6IFsncm9tYW4nXVxuICB9LFxuICBkZW5hcmlpOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlRGVuYXJpaScsXG4gICAgZmlsdGVyOiBbJ3JvbWFuJ11cbiAgfSxcbiAgZDoge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZURlbmllcnMnLFxuICAgIGZpbHRlcjogWydsc2QnXVxuICB9LFxuICBzOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlU291cycsXG4gICAgZmlsdGVyOiBbJ2xzZCddXG4gIH0sXG4gIHZhbHVlOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlT25lJyxcbiAgICBmaWx0ZXI6IFtdXG4gIH0sXG4gIG11bHRpcGxpZXI6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVDcmVkaXRSYXRpbmcnLFxuICAgIGZpbHRlcjogW11cbiAgfVxufVxuXG5DT0M3LmNoYXJhY3RlcmlzdGljcyA9IHtcbiAgc3RyOiAnQ29DNy5DaGFyYWNTdHInLFxuICBjb246ICdDb0M3LkNoYXJhY0NvbicsXG4gIHNpejogJ0NvQzcuQ2hhcmFjU2l6JyxcbiAgZGV4OiAnQ29DNy5DaGFyYWNEZXgnLFxuICBhcHA6ICdDb0M3LkNoYXJhY0FwcCcsXG4gIGludDogJ0NvQzcuQ2hhcmFjSW50JyxcbiAgcG93OiAnQ29DNy5DaGFyYWNQb3cnLFxuICBlZHU6ICdDb0M3LkNoYXJhY0VkdSdcbn1cblxuLyoqXG4gKiBUaGUgc2V0IG9mIFNraWxscyBhdHRyaWJ1dGVzIHVzZWQgd2l0aGluIHRoZSBzeXN0ZW1cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbkNPQzcuc2tpbGxQcm9wZXJ0aWVzID0ge1xuICBub2FkanVzdG1lbnRzOiAnQ29DNy5Ta2lsbE5vQWRqdXN0bWVudHMnLFxuICBub3hwZ2FpbjogJ0NvQzcuU2tpbGxOb1hwR2FpbicsXG4gIHNwZWNpYWw6ICdDb0M3LlNraWxsU3BlY2lhbCcsXG4gIHJhcml0eTogJ0NvQzcuU2tpbGxSYXJpdHknLFxuICBwdXNoOiAnQ29DNy5Ta2lsbFB1c2gnLFxuICBjb21iYXQ6ICdDb0M3LlNraWxsQ29tYmF0JyxcbiAgZmlnaHRpbmc6ICdDb0M3LlNraWxsRmlnaHRpbmcnLFxuICBmaXJlYXJtOiAnQ29DNy5Ta2lsbEZpcmVhcm0nLFxuICByZXF1aXJlc25hbWU6ICdDb0M3LlNraWxsUmVxdWlyZXNOYW1lJyxcbiAga2VlcGJhc2V2YWx1ZTogJ0NvQzcuU2tpbGxLZWVwQmFzZVZhbHVlJyxcbiAgcGlja25hbWVvbmx5OiAnQ29DNy5Ta2lsbFBpY2tOYW1lT25seScsXG4gIG9ubHlvbmU6ICdDb0M3LlNraWxsU3BlY2lhbGl6YXRpb25Jc1VuaXF1ZSdcbn1cblxuQ09DNy53ZWFwb25Qcm9wZXJ0aWVzID0ge1xuICBtZWxlZTogJ0NvQzcuV2VhcG9uLlByb3BlcnR5Lk1lbGVlJyxcbiAgcm5nZDogJ0NvQzcuV2VhcG9uUm5nZCcsXG4gIG1udnI6ICdDb0M3LldlYXBvblByb3BlcnlNYW5ldXZlcicsXG4gIHRocm93bjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LlRocm93bicsXG4gIHNob3RndW46ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5TaG90Z3VuJyxcbiAgZGJybDogJ0NvQzcuV2VhcG9uRGJybCcsXG4gIGltcGw6ICdDb0M3LldlYXBvbkltcGwnLFxuICBicnN0OiAnQ29DNy5XZWFwb25CcnN0JyxcbiAgYXV0bzogJ0NvQzcuV2VhcG9uQXV0bycsXG4gIGFoZGI6ICdDb0M3LldlYXBvbkFoZGInLFxuICBhZGRiOiAnQ29DNy5XZWFwb25BZGRiJyxcbiAgc2xudDogJ0NvQzcuV2VhcG9uU2xudCcsXG4gIHNwY2w6ICdDb0M3LldlYXBvblNwY2wnLFxuICBtb250OiAnQ29DNy5XZWFwb25Nb250JyxcbiAgYmxzdDogJ0NvQzcuV2VhcG9uQmxzdCcsXG4gIHN0dW46ICdDb0M3LldlYXBvblN0dW4nLFxuICByYXJlOiAnQ29DNy5XZWFwb25SYXJlJyxcbiAgYnVybjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LkJ1cm4nXG59XG5cbkNPQzcuc3BlbGxQcm9wZXJ0aWVzID0ge1xuICBjYWxsOiAnQ29DNy5DYWxsU3BlbGwnLFxuICBkaXNtaXNzOiAnQ29DNy5EaXNtaXNzU3BlbGwnLFxuICBjb250YWN0OiAnQ29DNy5Db250YWN0U3BlbGwnLFxuICBzdW1tb246ICdDb0M3LlN1bW1vblNwZWxsJyxcbiAgYmluZDogJ0NvQzcuQmluZFNwZWxsJyxcbiAgZW5jaGFudG1lbnQ6ICdDb0M3LkVuY2hhbnRtZW50U3BlbGwnLFxuICBnYXRlOiAnQ29DNy5HYXRlU3BlbGwnLFxuICBjb21iYXQ6ICdDb0M3LkNvbWJhdFNwZWxsJ1xufVxuXG5DT0M3LmJvb2tUeXBlID0ge1xuICBteXRob3M6ICdDb0M3Lk15dGhvc0Jvb2snLFxuICBvY2N1bHQ6ICdDb0M3Lk9jY3VsdEJvb2snLFxuICBvdGhlcjogJ0NvQzcuT3RoZXInXG59XG5cbkNPQzcudGFsZW50VHlwZSA9IHtcbiAgcGh5c2ljYWw6ICdDb0M3LlBoeXNpY2FsVGFsZW50JyxcbiAgbWVudGFsOiAnQ29DNy5NZW50YWxUYWxlbnQnLFxuICBjb21iYXQ6ICdDb0M3LkNvbWJhdFRhbGVudCcsXG4gIG1pc2NlbGxhbmVvdXM6ICdDb0M3Lk1pc2NlbGxhbmVvdXNUYWxlbnQnLFxuICBiYXNpYzogJ0NvQzcuQmFzaWNUYWxlbnQnLFxuICBpbnNhbmU6ICdDb0M3Lkluc2FuZVRhbGVudCcsXG4gIG90aGVyOiAnQ29DNy5PdGhlclRhbGVudCdcbn1cblxuQ09DNy5zdGF0dXNUeXBlID0ge1xuICBtYW5pYTogJ0NvQzcuTWFuaWEnLFxuICBwaG9iaWE6ICdDb0M3LlBob2JpYSdcbn1cblxuQ09DNy5vY2N1cGF0aW9uUHJvcGVydGllcyA9IHtcbiAgY2xhc3NpYzogJ0NvQzcuQ2xhc3NpYycsXG4gIGxvdmVjcmFmdGlhbjogJ0NvQzcuTG92ZWNyYWZ0aWFuJyxcbiAgbW9kZXJuOiAnQ29DNy5Nb2Rlcm4nLFxuICBwdWxwOiAnQ29DNy5QdWxwJ1xufVxuXG5DT0M3LmZvcm11bGEgPSB7fVxuXG5DT0M3LmZvcm11bGEuYWN0b3IgPSB7XG4gICdAU1RSJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUnLFxuICAnQENPTic6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlJyxcbiAgJ0BTSVonOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZScsXG4gICdAREVYJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxuICAnQEFQUCc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuYXBwLnZhbHVlJyxcbiAgJ0BJTlQnOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmludC52YWx1ZScsXG4gICdAUE9XJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnLFxuICAnQEVEVSc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZWR1LnZhbHVlJ1xufVxuXG5DT0M3LmZvcm11bGEuYWN0b3JzaGVldCA9IHtcbiAgJ0BTVFInOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZScsXG4gICdAQ09OJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUnLFxuICAnQFNJWic6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlJyxcbiAgJ0BERVgnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZScsXG4gICdAQVBQJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5hcHAudmFsdWUnLFxuICAnQElOVCc6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuaW50LnZhbHVlJyxcbiAgJ0BQT1cnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZScsXG4gICdARURVJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5lZHUudmFsdWUnXG59XG5cbkNPQzcuc3RhdHVzID0ge1xuICB0ZW1wb0luc2FuZTogJ3RlbXBvSW5zYW5lJyxcbiAgaW5kZWZJbnNhbmU6ICdpbmRlZkluc2FuZScsXG4gIHVuY29uc2Npb3VzOiAndW5jb25zY2lvdXMnLFxuICBjcml0aWNhbFdvdW5kczogJ2NyaXRpY2FsV291bmRzJyxcbiAgZHlpbmc6ICdkeWluZycsXG4gIHByb25lOiAncHJvbmUnLFxuICBkZWFkOiAnZGVhZCdcbn1cblxuQ09DNy5uZXdCb29rTmFtZSA9ICdDb0M3Lk5ld0Jvb2tOYW1lJ1xuQ09DNy5uZXdTa2lsbE5hbWUgPSAnQ29DNy5OZXdTa2lsbE5hbWUnXG5DT0M3Lm5ld1NwZWxsTmFtZSA9ICdDb0M3Lk5ld1NwZWxsTmFtZSdcbkNPQzcubmV3SXRlbU5hbWUgPSAnQ29DNy5OZXdJdGVtTmFtZSdcbkNPQzcubmV3V2VhcG9uTmFtZSA9ICdDb0M3Lk5ld1dlYXBvbk5hbWUnXG5cbkNPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsID0gJ0NvQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsJ1xuXG5DT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lID0gJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG5DT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUgPSAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuXG5DT0M3LmNvbWJhdENhcmRzID0ge1xuICBmaWdodEJhY2s6ICdDb0M3LkZpZ2h0QmFjaycsXG4gIGRvZGdlOiAnQ29DNy5Eb2RnZScsXG4gIG1hbmV1dmVyOiAnQ29DNy5NYW5ldXZlcicsXG4gIG5vUmVzcG9uc2U6ICdDb0M3Lk5vUmVzcG9uc2UnXG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIENPTkZJRywgZ2FtZSwgUm9sbCAqL1xuXG5leHBvcnQgY2xhc3MgQ29DN0RpY2Uge1xuICBzdGF0aWMgYXN5bmMgcm9sbCAobW9kaWYgPSAwLCByb2xsTW9kZSA9IG51bGwsIGhpZGVEaWNlID0gZmFsc2UpIHtcbiAgICBsZXQgYWx0ZXJuYXRpdmVEaWNlID0gJydcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgaWYgKG1vZGlmIDwgMCkge1xuICAgICAgICBhbHRlcm5hdGl2ZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVQZW5hbHR5JylcbiAgICAgIH0gZWxzZSBpZiAobW9kaWYgPiAwKSB7XG4gICAgICAgIGFsdGVybmF0aXZlRGljZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZUJvbnVzJylcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHJvbGxcbiAgICBpZiAoXG4gICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzQ3JpdCAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG4gICAgKSB7XG4gICAgICByb2xsID0gUm9sbC5mcm9tRGF0YShDb0M3RGljZS5jcml0MDEpXG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKVxuICAgICkge1xuICAgICAgcm9sbCA9IFJvbGwuZnJvbURhdGEoQ29DN0RpY2UuZnVtYmxlOTkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJvbGwgPSBhd2FpdCBuZXcgUm9sbChcbiAgICAgICAgJzFkdCcgK1xuICAgICAgICAgIChhbHRlcm5hdGl2ZURpY2UgIT09ICcnXG4gICAgICAgICAgICA/ICcrMWRvWycgKyBhbHRlcm5hdGl2ZURpY2UgKyAnXSdcbiAgICAgICAgICAgIDogJysxZHQnXG4gICAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMobW9kaWYpKSArXG4gICAgICAgICAgJysxZDEwJ1xuICAgICAgKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICB1bml0OiB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByZXN1bHRzOiBbXVxuICAgICAgfSxcbiAgICAgIHRlbnM6IHtcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICB9LFxuICAgICAgdG90YWw6IDAsXG4gICAgICByb2xsXG4gICAgfVxuXG4gICAgaWYgKHJvbGxNb2RlKSByZXN1bHQucm9sbE1vZGUgPSByb2xsTW9kZVxuICAgIGlmIChoaWRlRGljZSkgcmVzdWx0LmhpZGVEaWNlID0gaGlkZURpY2VcbiAgICBmb3IgKGNvbnN0IGQgb2Ygcm9sbC5kaWNlKSB7XG4gICAgICBpZiAoZCBpbnN0YW5jZW9mIENPTkZJRy5EaWNlLnRlcm1zLnQpIHtcbiAgICAgICAgcmVzdWx0LnRlbnMucmVzdWx0cy5wdXNoKGQudG90YWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQudW5pdC50b3RhbCA9IGQudG90YWwgPT09IDEwID8gMCA6IGQudG90YWxcbiAgICAgICAgcmVzdWx0LnVuaXQucmVzdWx0cy5wdXNoKHJlc3VsdC51bml0LnRvdGFsKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobW9kaWYgPCAwKSB7XG4gICAgICByZXN1bHQudGVucy50b3RhbCA9XG4gICAgICAgIHJlc3VsdC51bml0LnRvdGFsID09PSAwICYmIHJlc3VsdC50ZW5zLnJlc3VsdHMuaW5jbHVkZXMoMClcbiAgICAgICAgICA/IDEwMFxuICAgICAgICAgIDogTWF0aC5tYXgoLi4ucmVzdWx0LnRlbnMucmVzdWx0cylcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC51bml0LnRvdGFsID09PSAwKSB7XG4gICAgICBjb25zdCBkaWNlID0gcmVzdWx0LnRlbnMucmVzdWx0cy5maWx0ZXIodCA9PiB0ID4gMClcbiAgICAgIHJlc3VsdC50ZW5zLnRvdGFsID0gZGljZS5sZW5ndGggPT09IDAgPyAxMDAgOiBNYXRoLm1pbiguLi5kaWNlKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQudGVucy50b3RhbCA9IE1hdGgubWluKC4uLnJlc3VsdC50ZW5zLnJlc3VsdHMpXG4gICAgfVxuICAgIHJlc3VsdC50b3RhbCA9IHJlc3VsdC51bml0LnRvdGFsICsgcmVzdWx0LnRlbnMudG90YWxcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2hvd1JvbGxEaWNlM2QgKHJvbGwpIHtcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgY29uc3Qgc3luY0RpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzeW5jRGljZTNkJylcblxuICAgICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICAgIHdoaXNwZXI6IG51bGwsXG4gICAgICAgIGJsaW5kOiBmYWxzZVxuICAgICAgfVxuICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcblxuICAgICAgYXdhaXQgZ2FtZS5kaWNlM2Quc2hvd0ZvclJvbGwoXG4gICAgICAgIHJvbGwsXG4gICAgICAgIGdhbWUudXNlcixcbiAgICAgICAgc3luY0RpY2UsXG4gICAgICAgIGNoYXREYXRhLndoaXNwZXIsXG4gICAgICAgIGNoYXREYXRhLmJsaW5kXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNvbWJpbmVkUm9sbCAob3B0aW9ucykge1xuICAgIG9wdGlvbnMucG9vbCA9IG9wdGlvbnMucG9vbCA/PyB7fVxuICAgIG9wdGlvbnMucG9vbFsnMCddID0gZmFsc2VcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucy5wb29sKS5tYXAodiA9PiBwYXJzZUludCh2LCAxMCkpXG4gICAgbGV0IHBlbmFsdHlEaWNlID0gTWF0aC5hYnMoTWF0aC5taW4oMCwgTWF0aC5taW4oLi4ua2V5cykpKVxuICAgIGxldCBib251c0RpY2UgPSBNYXRoLm1heCgwLCBNYXRoLm1heCguLi5rZXlzKSlcbiAgICBjb25zdCBoYXNEU04gPSBnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlXG5cbiAgICBjb25zdCBwb29sID0gW11cbiAgICBwb29sLnB1c2goJzFkdCsxZDEwJylcblxuICAgIGlmIChwZW5hbHR5RGljZSA+IDApIHtcbiAgICAgIHBvb2wucHVzaChcbiAgICAgICAgKGhhc0RTTlxuICAgICAgICAgID8gJysxZG9bJyArIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZVBlbmFsdHknKSArICddJ1xuICAgICAgICAgIDogJzFkdCdcbiAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMocGVuYWx0eURpY2UpKVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoYm9udXNEaWNlID4gMCkge1xuICAgICAgcG9vbC5wdXNoKFxuICAgICAgICAoaGFzRFNOXG4gICAgICAgICAgPyAnKzFkb1snICsgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllQm9udXMnKSArICddJ1xuICAgICAgICAgIDogJzFkdCdcbiAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMoYm9udXNEaWNlKSlcbiAgICAgIClcbiAgICB9XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IG5ldyBSb2xsKHBvb2wuam9pbignJykpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIGdyb3Vwczoge1xuICAgICAgICBiYXNlRGllOiAwLFxuICAgICAgICBwZW5hbHR5RGljZTogW10sXG4gICAgICAgIGJvbnVzRGljZTogW11cbiAgICAgIH0sXG4gICAgICB1bml0OiAwLFxuICAgICAgcm9sbFxuICAgIH1cbiAgICBsZXQgYmFzZVNldCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBkIG9mIHJvbGwuZGljZSkge1xuICAgICAgaWYgKGQgaW5zdGFuY2VvZiBDT05GSUcuRGljZS50ZXJtcy50KSB7XG4gICAgICAgIGlmICghYmFzZVNldCkge1xuICAgICAgICAgIHJlc3VsdC5ncm91cHMuYmFzZURpZSA9IGQudG90YWxcbiAgICAgICAgICBiYXNlU2V0ID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHBlbmFsdHlEaWNlID4gMCkge1xuICAgICAgICAgIHJlc3VsdC5ncm91cHMucGVuYWx0eURpY2UucHVzaChkLnRvdGFsKVxuICAgICAgICAgIHBlbmFsdHlEaWNlLS1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJvbnVzRGljZS5wdXNoKGQudG90YWwpXG4gICAgICAgICAgYm9udXNEaWNlLS1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnVuaXQgPSBkLnRvdGFsID09PSAxMCA/IDAgOiBkLnRvdGFsXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb3V0cHV0ID0ge31cblxuICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMucG9vbCkge1xuICAgICAgb3V0cHV0W2tleV0gPSB7XG4gICAgICAgIHVuaXQ6IHtcbiAgICAgICAgICB0b3RhbDogcmVzdWx0LnVuaXQsXG4gICAgICAgICAgcmVzdWx0czogW3Jlc3VsdC51bml0XVxuICAgICAgICB9LFxuICAgICAgICB0ZW5zOiB7XG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgcmVzdWx0czogW11cbiAgICAgICAgfSxcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJvbGxcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1vZGlmID0gcGFyc2VJbnQoa2V5LCAxMClcbiAgICAgIGxldCBtb2RpZmllciA9IG1vZGlmXG4gICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChyZXN1bHQuZ3JvdXBzLmJhc2VEaWUpXG4gICAgICBmb3IgKGNvbnN0IG9mZnNldCA9IE1hdGguYWJzKG1vZGlmaWVyKTsgbW9kaWZpZXIgPCAwOyBtb2RpZmllcisrKSB7XG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMucmVzdWx0cy5wdXNoKFxuICAgICAgICAgIHJlc3VsdC5ncm91cHMucGVuYWx0eURpY2VbbW9kaWZpZXIgKyBvZmZzZXRdXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qgb2Zmc2V0ID0gbW9kaWZpZXI7IG1vZGlmaWVyID4gMDsgbW9kaWZpZXItLSkge1xuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJvbnVzRGljZVtNYXRoLmFicyhtb2RpZmllciAtIG9mZnNldCldXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChtb2RpZiA8IDApIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9XG4gICAgICAgICAgb3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCAmJiBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMuaW5jbHVkZXMoMClcbiAgICAgICAgICAgID8gMTAwXG4gICAgICAgICAgICA6IE1hdGgubWF4KC4uLm91dHB1dFtrZXldLnRlbnMucmVzdWx0cylcbiAgICAgIH0gZWxzZSBpZiAob3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCkge1xuICAgICAgICBjb25zdCBkaWNlID0gb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLmZpbHRlcih0ID0+IHQgPiAwKVxuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnRvdGFsID0gZGljZS5sZW5ndGggPT09IDAgPyAxMDAgOiBNYXRoLm1pbiguLi5kaWNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9IE1hdGgubWluKC4uLm91dHB1dFtrZXldLnRlbnMucmVzdWx0cylcbiAgICAgIH1cbiAgICAgIG91dHB1dFtrZXldLnRvdGFsID0gb3V0cHV0W2tleV0udW5pdC50b3RhbCArIG91dHB1dFtrZXldLnRlbnMudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLy8gUHJlZGV0ZXJtaW5lZCB2YWx1ZSBvZiBkaWNlLCB1c2VkIG9ubHkgZm9yIERFViBhbmQgdGVzdCBwdXJwb3Nlc1xuICBzdGF0aWMgZnVtYmxlOTkgPSB7XG4gICAgY2xhc3M6ICdSb2xsJyxcbiAgICBvcHRpb25zOiB7fSxcbiAgICBkaWNlOiBbXSxcbiAgICBmb3JtdWxhOiAnMWR0ICsgMWQxMCcsXG4gICAgdGVybXM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdDb0M3RGVjYWRlckRpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiA5LFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ09wZXJhdG9yVGVybScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG9wZXJhdG9yOiAnKydcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsYXNzOiAnRGllJyxcbiAgICAgICAgb3B0aW9uczoge30sXG4gICAgICAgIGV2YWx1YXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtYmVyOiAxLFxuICAgICAgICBmYWNlczogMTAsXG4gICAgICAgIG1vZGlmaWVyczogW10sXG4gICAgICAgIHJlc3VsdHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByZXN1bHQ6IDksXG4gICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICBdLFxuICAgIHRvdGFsOiA5OSxcbiAgICBldmFsdWF0ZWQ6IHRydWVcbiAgfVxuXG4gIHN0YXRpYyBjcml0MDEgPSB7XG4gICAgY2xhc3M6ICdSb2xsJyxcbiAgICBvcHRpb25zOiB7fSxcbiAgICBkaWNlOiBbXSxcbiAgICBmb3JtdWxhOiAnMWR0ICsgMWQxMCcsXG4gICAgdGVybXM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdDb0M3RGVjYWRlckRpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiAxMCxcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdPcGVyYXRvclRlcm0nLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBvcGVyYXRvcjogJysnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ0RpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiAxLFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgXSxcbiAgICB0b3RhbDogMSxcbiAgICBldmFsdWF0ZWQ6IHRydWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ09OU1QsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgbWVyZ2VPYmplY3QsIHVpICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2NvYzctbGluay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29udGVudExpbmtEaWFsb2cgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGlkOiAnbGluay1jcmVhdGlvbicsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnYWN0aXZlLWVmZmVjdC1zaGVldCddLFxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DcmVhdGVMaW5rJyksXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiBudWxsLCBkcm9wU2VsZWN0b3I6ICcuY29udGFpbmVyJyB9XSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2xpbmstY3JlYXRpb24uaHRtbCcsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHdpZHRoOiA1NjAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnRhYnMnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5lZmZlY3Qtb3B0aW9ucycsXG4gICAgICAgICAgaW5pdGlhbDogJ2RldGFpbHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvLyBQcmVwYXJlIGNoZWNrIHR5cGVcbiAgICBzaGVldERhdGEuY2hlY2tUeXBlID0gW1xuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0ssXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hlY2snKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1MsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5Q2hlY2snKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLklURU0sXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSXRlbVdlYXBvbicpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNULFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdFRkZFQ1QuVGFiRWZmZWN0cycpXG4gICAgICB9XG4gICAgXVxuXG4gICAgLy8gUHJlcGFyZSAnY2hlY2snIGxpbmsgdHlwZVxuICAgIHNoZWV0RGF0YS5saW5rVHlwZSA9IFtcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWMnKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuQVRUUklCVVRFLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkxJTktfVFlQRS5TS0lMTCxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbCcpXG4gICAgICB9XG4gICAgXVxuXG4gICAgLy8gUHJlcGFyZSAnY2hlY2snICdhdHRyaWJ1dGUnIHR5cGVzXG4gICAgc2hlZXREYXRhLmF0dHJpYnV0ZVR5cGUgPSBbXG4gICAgICB7XG4gICAgICAgIGtleTogJ2xjaycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6ICdzYW4nLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpXG4gICAgICB9XG4gICAgXVxuXG4gICAgLy8gUHJlcGFyZSBlZmZlY3QgbW9kZSB0eXBlc1xuICAgIHNoZWV0RGF0YS5lZmZlY3RNb2RlcyA9IE9iamVjdC5lbnRyaWVzKENPTlNULkFDVElWRV9FRkZFQ1RfTU9ERVMpLnJlZHVjZShcbiAgICAgIChvYmosIGUpID0+IHtcbiAgICAgICAgb2JqW2VbMV1dID0gZ2FtZS5pMThuLmxvY2FsaXplKCdFRkZFQ1QuTU9ERV8nICsgZVswXSlcbiAgICAgICAgcmV0dXJuIG9ialxuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKVxuXG4gICAgLy8gUHJlcGFyZSAnY2hlY2snICdjaGFyYWN0ZXJpc3RpYycgdHlwZXNcbiAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNUeXBlID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClcblxuICAgIHNoZWV0RGF0YS5saW5rID0gc2hlZXREYXRhLm9iamVjdC5saW5rXG5cbiAgICBzaGVldERhdGEuZnJvbUdhbWUgPSBzaGVldERhdGEubGluay5pc0l0ZW1DaGVjayB8fCBzaGVldERhdGEubGluay5pc1NraWxsQ2hlY2tcblxuICAgIHNoZWV0RGF0YS5mcm9tRGlyZWN0b3J5ID0gKHNoZWV0RGF0YS5vYmplY3QuaGFzSUQgPT09ICdmcm9tRGlyZWN0b3J5JylcbiAgICBzaGVldERhdGEuZnJvbUNvbXBlbmRpdW0gPSAoc2hlZXREYXRhLm9iamVjdC5oYXNJRCA9PT0gJ2Zyb21Db21wZW5kaXVtJylcblxuICAgIHNoZWV0RGF0YS5pc1NldEZyb21HYW1lID0gKHNoZWV0RGF0YS5saW5rLmlkICYmIChzaGVldERhdGEuZnJvbURpcmVjdG9yeSB8fCBzaGVldERhdGEuZnJvbUNvbXBlbmRpdW0pKVxuXG4gICAgc2hlZXREYXRhLmRpZmZpY3VsdHlMZXZlbCA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWxcblxuICAgIHNoZWV0RGF0YS5hY3Rvck5hbWVzID0gc2hlZXREYXRhLm9iamVjdC5hY3RvcnMubWFwKGEgPT4gYS5uYW1lKS5qb2luKCcsICcpXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnc2VsZWN0W25hbWU9dHlwZV0sc2VsZWN0W25hbWU9Y2hlY2tdLHNlbGVjdFtuYW1lPWF0dHJpYnV0ZUtleV0sc2VsZWN0W25hbWU9Y2hhcmFjdGVyaXN0aWNLZXldLGlucHV0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgIC5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcblxuICAgIC8vIEhhbmRsaW5nIGVmZmVjdHNcbiAgICBodG1sLmZpbmQoJy5lZmZlY3QtY29udHJvbCcpLmNsaWNrKHRoaXMuX29uRWZmZWN0Q29udHJvbC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgX29uQ2hhbmdlU3VibWl0IChldmVudCkge1xuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lKSB7XG4gICAgICBjYXNlICdmcm9tQ29tcGVuZGl1bSc6XG4gICAgICBjYXNlICdmcm9tRGlyZWN0b3J5JzpcbiAgICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lID09PSB0aGlzLm9iamVjdC5oYXNJRCA/ICcnIDogZXZlbnQuY3VycmVudFRhcmdldC5uYW1lKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgfVxuXG4gIF9vbkVmZmVjdENvbnRyb2wgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBzd2l0Y2ggKGJ1dHRvbi5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnYWRkJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZEVmZmVjdENoYW5nZSgpXG4gICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICBidXR0b24uY2xvc2VzdCgnLmVmZmVjdC1jaGFuZ2UnKS5yZW1vdmUoKVxuICAgICAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICB9XG4gIH1cblxuICBhc3luYyBfYWRkRWZmZWN0Q2hhbmdlICgpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLm9iamVjdC5saW5rLmVmZmVjdC5jaGFuZ2VzLmxlbmd0aFxuICAgIHJldHVybiB0aGlzLnN1Ym1pdCh7XG4gICAgICBwcmV2ZW50Q2xvc2U6IHRydWUsXG4gICAgICB1cGRhdGVEYXRhOiB7XG4gICAgICAgIFtgZWZmZWN0LmNoYW5nZXMuJHtpZHh9YF06IHtcbiAgICAgICAgICBrZXk6ICcnLFxuICAgICAgICAgIG1vZGU6IENPTlNULkFDVElWRV9FRkZFQ1RfTU9ERVMuQURELFxuICAgICAgICAgIHZhbHVlOiAnJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGxldCBoYXNFZmZlY3QgPSBmYWxzZVxuICAgIGNvbnN0IGVmZmVjdCA9IHtcbiAgICAgIGR1cmF0aW9uOiB7fSxcbiAgICAgIGNoYW5nZXM6IFtdXG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIGZvcm1EYXRhKSB7XG4gICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICBjYXNlICdjaGVja05hbWUnOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCBmb3JtRGF0YS5jaGVja05hbWUpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYmxpbmQnOlxuICAgICAgICBjYXNlICdkaWZmaWN1bHR5JzpcbiAgICAgICAgY2FzZSAnZGlzcGxheU5hbWUnOlxuICAgICAgICBjYXNlICdpY29uJzpcbiAgICAgICAgY2FzZSAnaWQnOlxuICAgICAgICBjYXNlICdtb2RpZmllcic6XG4gICAgICAgIGNhc2UgJ3BhY2snOlxuICAgICAgICBjYXNlICdzYW5NaW4nOlxuICAgICAgICBjYXNlICdzYW5NYXgnOlxuICAgICAgICBjYXNlICdzYW5SZWFzb24nOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoa2V5LCBmb3JtRGF0YVtrZXldKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2hhc01vZGlmaWVycyc6XG4gICAgICAgIGNhc2UgJ2hhc0xhYmVsJzpcbiAgICAgICAgY2FzZSAnaGFzSWNvbic6XG4gICAgICAgICAgdGhpcy5vYmplY3Rba2V5XSA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QubGFiZWwnOlxuICAgICAgICAgIGVmZmVjdC5sYWJlbCA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0Lmljb24nOlxuICAgICAgICAgIGVmZmVjdC5pY29uID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QudGludCc6XG4gICAgICAgICAgZWZmZWN0LnRpbnQgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kaXNhYmxlZCc6XG4gICAgICAgICAgZWZmZWN0LmRpc2FibGVkID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QuZHVyYXRpb24uc2Vjb25kcyc6XG4gICAgICAgICAgZWZmZWN0LmR1cmF0aW9uLnNlY29uZHMgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kdXJhdGlvbi5yb3VuZHMnOlxuICAgICAgICAgIGVmZmVjdC5kdXJhdGlvbi5yb3VuZHMgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kdXJhdGlvbi50dXJucyc6XG4gICAgICAgICAgZWZmZWN0LmR1cmF0aW9uLnR1cm5zID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgY29uc3QgbWF0Y2ggPSBrZXkubWF0Y2goL15lZmZlY3RcXC5jaGFuZ2VzXFwuKFxcZCspXFwua2V5JC8pXG4gICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBlZmZlY3QuY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5OiBmb3JtRGF0YVtrZXldLFxuICAgICAgICAgICAgICBtb2RlOiBmb3JtRGF0YVsnZWZmZWN0LmNoYW5nZXMuJyArIG1hdGNoWzFdICsgJy5tb2RlJ10sXG4gICAgICAgICAgICAgIHZhbHVlOiBmb3JtRGF0YVsnZWZmZWN0LmNoYW5nZXMuJyArIG1hdGNoWzFdICsgJy52YWx1ZSddXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGFzRWZmZWN0KSB7XG4gICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCdvYmplY3QnLCBlZmZlY3QpXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICBzd2l0Y2ggKHRhcmdldC5uYW1lKSB7XG4gICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2NoZWNrJywgdGFyZ2V0LnZhbHVlKVxuICAgICAgICAgIGlmICh0YXJnZXQudmFsdWUgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0spIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2xpbmtUeXBlJywgQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMKVxuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsICcnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdjaGVjayc6XG4gICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbGlua1R5cGUnLCB0YXJnZXQudmFsdWUpXG4gICAgICAgICAgaWYgKHRhcmdldC52YWx1ZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLkNIQVJBQ1RFUklTVElDKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClbMF0ua2V5KVxuICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LnZhbHVlID09PSBDb0M3TGluay5MSU5LX1RZUEUuQVRUUklCVVRFKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgJ2xjaycpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCAnJylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYXR0cmlidXRlS2V5JzpcbiAgICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWNLZXknOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCB0YXJnZXQudmFsdWUpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudC50eXBlID09PSAnc3VibWl0Jykge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LnN1Ym1pdHRlci5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgICAgIGNhc2UgJ2NsaXBib2FyZCc6XG4gICAgICAgICAgICBDb0M3VXRpbGl0aWVzLmNvcHlUb0NsaXBib2FyZCh0aGlzLm9iamVjdC5saW5rLmxpbmspXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2NoYXQnOlxuICAgICAgICAgICAgQ29DN0xpbmsudG9DaGF0TWVzc2FnZSh0aGlzLm9iamVjdC5saW5rLm9iamVjdClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnd2hpc3Blci1vd25lcic6XG4gICAgICAgICAgICBDb0M3TGluay50b1doaXNwZXJNZXNzYWdlKHRoaXMub2JqZWN0Lmxpbmsub2JqZWN0LCB0aGlzLm9iamVjdC5hY3RvcnMpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ3doaXNwZXItc2VsZWN0ZWQnOlxuICAgICAgICAgICAgaWYgKCFjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JOb1Rva2Vuc1NlbGVjdGVkJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UodGhpcy5vYmplY3QubGluay5vYmplY3QsIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5maWx0ZXIodCA9PiB0LmFjdG9yLm93bmVycy5sZW5ndGgpLm1hcCh0ID0+IHQuYWN0b3IpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdDb0M3TGluaycpIHtcbiAgICAgIHRoaXMuc2V0TGluayhhd2FpdCBDb0M3TGluay5mcm9tRHJvcERhdGEoZGF0YSkpXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoKGRhdGEudHlwZSA9PT0gJ0ZvbGRlcicgJiYgZGF0YS5kb2N1bWVudE5hbWUgPT09ICdBY3RvcicpIHx8IFsnSXRlbScsICdBY3RvciddLmluY2x1ZGVzKGRhdGEudHlwZSkpIHtcbiAgICAgICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCBkYXRhLmRvY3VtZW50TmFtZSA/PyBkYXRhLnR5cGUpXG4gICAgICAgIGlmIChkYXRhLmRvY3VtZW50TmFtZSA/PyBkYXRhLnR5cGUgPT09ICdBY3RvcicpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5hY3RvcnMgPSBkYXRhTGlzdC5maWx0ZXIoYSA9PiBhLm93bmVycy5sZW5ndGgpXG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhTGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBpZiAoWydza2lsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhkYXRhTGlzdFswXS50eXBlKSkge1xuICAgICAgICAgICAgaWYgKGRhdGFMaXN0WzBdLnBhY2spIHtcbiAgICAgICAgICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbUNvbXBlbmRpdW0nXG4gICAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ3BhY2snLCBkYXRhTGlzdFswXS5wYWNrKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbURpcmVjdG9yeSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2lkJywgZGF0YUxpc3RbMF0uaWQpXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgZGF0YUxpc3RbMF0ubmFtZSlcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0TGluayAobGluaykge1xuICAgIHRoaXMub2JqZWN0LmxpbmsgPSBsaW5rXG4gICAgaWYgKGxpbmsucGFjayAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gJ2Zyb21Db21wZW5kaXVtJ1xuICAgIH0gZWxzZSBpZiAobGluay5pZCAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gJ2Zyb21EaXJlY3RvcnknXG4gICAgfVxuICAgIGlmIChsaW5rLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciB8fCBwYXJzZUludChsaW5rLm1vZGlmaWVyLCAxMCkgIT09IDApIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc01vZGlmaWVycyA9IHRydWVcbiAgICB9XG4gICAgaWYgKGxpbmsuZGlzcGxheU5hbWUgIT09ICcnKSB7XG4gICAgICB0aGlzLm9iamVjdC5oYXNMYWJlbCA9IHRydWVcbiAgICB9XG4gICAgaWYgKGxpbmsuaWNvbiAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0ljb24gPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAobGlua0RhdGEgPSB7fSwgb3B0aW9uID0ge30pIHtcbiAgICBjb25zdCBvYmplY3QgPSBtZXJnZU9iamVjdCh7XG4gICAgICBsaW5rOiBudWxsLFxuICAgICAgaGFzSUQ6ICcnLFxuICAgICAgaGFzTW9kaWZpZXJzOiBmYWxzZSxcbiAgICAgIGhhc0xhYmVsOiBmYWxzZSxcbiAgICAgIGhhc0ljb246IGZhbHNlLFxuICAgICAgYWN0b3JzOiBbXVxuICAgIH0sIG9wdGlvbilcbiAgICBjb25zdCBkaWFsb2cgPSBuZXcgQ29DN0NvbnRlbnRMaW5rRGlhbG9nKG9iamVjdCwge30pXG4gICAgZGlhbG9nLnNldExpbmsoYXdhaXQgQ29DN0xpbmsuZnJvbURyb3BEYXRhKGxpbmtEYXRhKSlcbiAgICBkaWFsb2cucmVuZGVyKHRydWUpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBDT05TVCwgZHVwbGljYXRlLCBmcm9tVXVpZCwgZ2FtZSwgUmF5LCBUb2tlbiwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIFJldHVybiA8YT4gZWxlbWVudCBvZiBhIHJvbGwgaW5zdGFuY2UuIGZvdW5kcnkuanMgcmVmOlRleHRFZGl0b3IuX2NyZWF0ZUlubGluZVJvbGxcbiAqIEBwYXJhbSB7Um9sbH0gcm9sbCAgICAgIFRoZSByb2xsIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW5saW5lUm9sbCAocm9sbCkge1xuICBjb25zdCBkYXRhID0ge1xuICAgIGNsczogWydpbmxpbmUtcm9sbCddLFxuICAgIGRhdGFzZXQ6IHt9XG4gIH1cblxuICB0cnkge1xuICAgIGRhdGEuY2xzLnB1c2goJ2lubGluZS1yZXN1bHQnKVxuICAgIGRhdGEucmVzdWx0ID0gcm9sbC50b3RhbFxuICAgIGRhdGEudGl0bGUgPSByb2xsLmZvcm11bGFcbiAgICBkYXRhLmRhdGFzZXQucm9sbCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShyb2xsKSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8vIENvbnN0cnVjdCBhbmQgcmV0dXJuIHRoZSBmb3JtZWQgbGluayBlbGVtZW50XG4gIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgYS5jbGFzc0xpc3QuYWRkKC4uLmRhdGEuY2xzKVxuICBhLnRpdGxlID0gZGF0YS50aXRsZVxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XG4gICAgYS5kYXRhc2V0W2tdID0gdlxuICB9XG4gIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmFzIGZhLWRpY2UtZDIwXCI+PC9pPiAke2RhdGEucmVzdWx0fWBcbiAgcmV0dXJuIGFcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB1c2VkIGZvciBKU09OLnN0cmluZ2lmeSByZXBsYWNlci5cbiAqIEV4Y2x1ZGUgYW55IGtleSBzdGFydGluZyB3aXRoIF9cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfIChrZXksIHZhbHVlKSB7XG4gIC8vIGNvbnZlcnQgUmVnRXhwIHRvIHN0cmluZ1xuICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ18nKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG4vKipcbiAqIEZ1bmN0aW9uIHVzZWQgZm9yIEpTT04uc3RyaW5naWZ5IHJlcGxhY2VyLlxuICogRXhjbHVkZSBhbnkga2V5IHN0YXJ0aW5nIHdpdGggX19cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfXyAoa2V5LCB2YWx1ZSkge1xuICAvLyBjb252ZXJ0IFJlZ0V4cCB0byBzdHJpbmdcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuICByZXR1cm4gdmFsdWUgLy8gcmV0dXJuIGFzIGlzXG59XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaXMgQ1RSTCBrZXkgaXMgcHJlc3NlZFxuICogVXNlZCBmb3IgTUFDIGNvbXBhdC5cbiAqIEBwYXJhbSB7Uy5FdmVudH0gZXZlbnRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0N0cmxLZXkgKGV2ZW50KSB7XG4gIGlmIChldmVudCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gKFxuICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICBldmVudC5rZXlDb2RlID09PSAyMjRcbiAgKVxufVxuXG5leHBvcnQgY2xhc3MgY2hhdEhlbHBlciB7XG4gIHN0YXRpYyBoeXBoZW5Ub0NhbWVsQ2FzZSAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8tKFthLXpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nWzFdLnRvVXBwZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU1lc3NhZ2UgKHRpdGxlLCBtZXNzYWdlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHt9XG4gICAgbWVzc2FnZURhdGEuZmxhdm9yID0gdGl0bGVcbiAgICBtZXNzYWdlRGF0YS5zcGVha2VyID0gb3B0aW9ucy5zcGVha2VyIHx8IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGlmIChvcHRpb25zLndoaXNwZXIpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgbWVzc2FnZURhdGEud2hpc3BlciA9IG9wdGlvbnMud2hpc3BlclxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucm9sbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnJvbGwgPSBvcHRpb25zLnJvbGxcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTFxuICAgICAgbWVzc2FnZURhdGEucm9sbE1vZGUgPSBDT05TVC5ESUNFX1JPTExfTU9ERVMuU0VMRlxuICAgIH1cbiAgICBtZXNzYWdlRGF0YS51c2VyID0gZ2FtZS51c2VyLmlkXG4gICAgbWVzc2FnZURhdGEuY29udGVudCA9IG1lc3NhZ2VcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShtZXNzYWdlRGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgY2FtZWxDYXNlVG9IeXBoZW4gKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gJy0nICsgc3RyaW5nLnRvTG93ZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgLy8gQ2FzZSAwIC0gYSBkb2N1bWVudCBVdWlkXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWQoa2V5KSkge1xuICAgICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWRQYWNrKGtleSkpIHJldHVybiBmcm9tVXVpZChrZXkpIC8vIFRPRE8gQ2hlY2sgd2UgY2FuIGRvIHRoYXRcbiAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZChrZXkpXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfVxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShrZXkpXG4gICAgICByZXR1cm4gdG9rZW4/LmFjdG9yXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0U3BlYWtlckZyb21LZXkgKGFjdG9yS2V5KSB7XG4gICAgY29uc3Qgc3BlYWtlciA9IHt9XG4gICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgaWYgKGFjdG9yS2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGFjdG9yS2V5LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBzcGVha2VyLnRva2VuID0gdG9rZW5JZFxuICAgICAgc3BlYWtlci5zY2VuZSA9IHNjZW5lSWRcbiAgICAgIGlmIChhY3Rvci50b2tlbj8ubmFtZSkgc3BlYWtlci5hbGlhcyA9IGFjdG9yLnRva2VuLm5hbWVcbiAgICAgIHNwZWFrZXIuYWN0b3IgPSBhY3Rvci5pZFxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyLmFjdG9yID0gYWN0b3JLZXlcbiAgICAgIHNwZWFrZXIuYWxpYXMgPSBhY3Rvci5uYW1lXG4gICAgfVxuICAgIHJldHVybiBzcGVha2VyXG4gIH1cblxuICBzdGF0aWMgYXR0YWNoT2JqZWN0VG9FbGVtZW50IChvYmplY3QsIGVsZW1lbnQsIG9iamVjdE5hbWUgPSAnJykge1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhvYmplY3QpKSB7XG4gICAgICBpZiAoIXByb3Auc3RhcnRzV2l0aCgnXycpKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0W3Byb3BdID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KFxuICAgICAgICAgICAgb2JqZWN0W3Byb3BdLFxuICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgIGAke29iamVjdE5hbWV9OiR7cHJvcH06YFxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtZW50LmRhdGFzZXRbYCR7b2JqZWN0TmFtZX0ke3Byb3B9YF0gPSBvYmplY3RbcHJvcF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRPYmplY3RGcm9tRWxlbWVudCAob2JqZWN0LCBlbGVtZW50KSB7XG4gICAgZnVuY3Rpb24gZGVzZXJpYWxpemUgKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCc6JykpIHtcbiAgICAgICAgY29uc3QgcyA9IGtleS5zbGljZSgxKVxuICAgICAgICBjb25zdCBvYmpQcm9wID0gcy5zbGljZShzLmluZGV4T2YoJzonKSArIDEpXG4gICAgICAgIGNvbnN0IG9iak5hbWUgPSBzLnN1YnN0cmluZygwLCBzLmluZGV4T2YoJzonKSlcbiAgICAgICAgaWYgKHR5cGVvZiBvYmpbb2JqTmFtZV0gPT09ICd1bmRlZmluZWQnKSBvYmpbb2JqTmFtZV0gPSB7fVxuICAgICAgICBkZXNlcmlhbGl6ZShvYmpbb2JqTmFtZV0sIG9ialByb3AsIHZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIG9ialtrZXldID0gdHJ1ZVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykgb2JqW2tleV0gPSBmYWxzZVxuICAgICAgICBlbHNlIGlmIChOdW1iZXIodmFsdWUpLnRvU3RyaW5nKCkgPT09IHZhbHVlKSBvYmpba2V5XSA9IE51bWJlcih2YWx1ZSlcbiAgICAgICAgZWxzZSBvYmpba2V5XSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFlbGVtZW50IHx8ICFvYmplY3QpIHJldHVyblxuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhlbGVtZW50LmRhdGFzZXQpKSB7XG4gICAgICBpZiAocHJvcCA9PT0gJ3RlbXBsYXRlJykgcmV0dXJuXG4gICAgICBkZXNlcmlhbGl6ZShvYmplY3QsIHByb3AsIGVsZW1lbnQuZGF0YXNldFtwcm9wXSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0VG9rZW5Gcm9tS2V5IChrZXkpIHtcbiAgICBpZiAoIWtleSkgcmV0dXJuIG51bGxcbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICBjb25zdCB0b2tlbkRvYyA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXT8udG9rZW5cbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgaWYgKCF0b2tlbi5zY2VuZSkgdG9rZW4uc2NlbmUgPSBkdXBsaWNhdGUoc2NlbmUuZG9jdW1lbnQpXG4gICAgICAgIHJldHVybiB0b2tlblxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChrZXkpXG4gICAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvclRva2VuKGFjdG9yKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvclRva2VuIChhY3Rvcikge1xuICAgIGlmICghYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGFjdG9yLnRva2VuIHx8IGFjdG9yLnByb3RvdHlwZVRva2VuXG4gICAgLyoqKioqKioqKioqKioqKioqKiovXG4gICAgLy8gLy8gQ2FzZSAwIC0gQWN0b3IgaXMgYSB0b2tlbiAoc3ludGhldGljIGFjdG9yKSwgcmV0dXJuIHRoYXQgdG9rZW4uXG4gICAgLy8gaWYoYWN0b3IuaXNUb2tlbikgcmV0dXJuIGFjdG9yLnRva2VuO1xuICAgIC8vIGVsc2V7XG4gICAgLy8gIC8vIENhc2UgMSAtIEFjdG9yIGlzIG5vdCBhIHRva2VuLCBmaW5kIGlmIGEgdG9rZW4gZXhpc3QgZm9yIHRoYXQgYWN0b3IuXG4gICAgLy8gIGNvbnN0IGFjdG9yVG9rZW5zID0gYWN0b3IuZ2V0QWN0aXZlVG9rZW5zKCk7XG4gICAgLy8gIGlmKCBhY3RvclRva2Vucy5sZW5ndGgpe1xuICAgIC8vICAgIC8vIENhc2UgMS4xIC0gSWYgaGUgaGFzIG9ubHkgb25lIFRva2VuIHJldHVybiBpdC5cbiAgICAvLyAgICBpZiggMSA9PT0gYWN0b3JUb2tlbnMubGVuZ3RoKSByZXR1cm4gYWN0b3JUb2tlbnNbMF07XG5cbiAgICAvLyAgICAvLyBDYXNlIDEuMiAtIEFjdG9yIGhhcyBtdWx0aXBsZSB0b2tlbnMsIGZpbmQgaWYgb25lIG9mIHRoZW0gaXMgdGhlIGNvbnRyb2xsZWQgdG9rZW4uXG4gICAgLy8gICAgY29uc3QgY29udHJvbGxlZFRva2VucyA9IGFjdG9yVG9rZW5zLmZpbHRlciggdCA9PiB0Ll9jb250cm9sbGVkKTtcbiAgICAvLyAgICBpZiggY29udHJvbGxlZFRva2Vucy5sZW5ndGgpe1xuICAgIC8vICAgICAgLy8gUmV0dXJuIHRoZSAxc3QgY29udHJvbGxlZCB0b2tlbiwgcmlzZSBhIHdhcm5pbmcgaWYgaGUgaGFzIG11bHRpcGxlIGNvbnRyb2xsZWQgdG9rZW5zLlxuICAgIC8vICAgICAgaWYoIHZlcmJvc2UgJiYgY29udHJvbGxlZFRva2Vucy5sZW5ndGggPiAxKSB1aS5ub3RpZmljYXRpb25zLndhcm4oIGBBY3RvciAke2FjdG9yLm5hbWV9IGhhcyAke2NvbnRyb2xsZWRUb2tlbnMubGVuZ3RofSBjb250cm9sbGVkIHRva2Vucy4gVXNpbmcgdGhlIGZpcnN0IGZvdW5kYCk7XG4gICAgLy8gICAgICByZXR1cm4gY29udHJvbGxlZFRva2Vuc1swXTtcbiAgICAvLyAgICB9XG5cbiAgICAvLyAgICAvLyBDYXNlIDEuMyBhY3RvciBkb2Vzbid0IGhhdmUgYW55IGFjdGl2ZSB0b2tlbi4gUmV0dXJuIHRoZSBmaXJzdCB2YWxpZCB0b2tlbiBmb3IgdGhhdCBhY3RvciBhbmQgcmFpc2UgYSB3YXJuaW5nLlxuICAgIC8vICAgIGlmKCB2ZXJib3NlKSB1aS5ub3RpZmljYXRpb25zLndhcm4oIGBBY3RvciAke2FjdG9yLm5hbWV9IGRvZXNuJ3QgaGF2ZSBhbnkgY29udHJvbGxlZCB0b2tlbi4gVXNpbmcgZmlyc3QgdG9rZW4gZm91bmQuYCk7XG4gICAgLy8gICAgcmV0dXJuIGFjdG9yVG9rZW5zWzBdO1xuICAgIC8vICB9XG5cbiAgICAvLyAgaWYoIHZlcmJvc2UpIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoIGBDb3VsZCBub3QgZmluIGFueSB0b2tlbiBmb3IgJHthY3Rvci5uYW1lfS5gKTtcbiAgICAvLyAgcmV0dXJuIG51bGw7XG4gICAgLy8gfVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9ySW1nRnJvbUtleSAoYWN0b3JLZXkpIHtcbiAgICBpZiAoIWFjdG9yS2V5KSByZXR1cm4gbnVsbFxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSB7XG4gICAgICAvLyBUcnkgdG8gZmluZCBhIHRva2VuLlxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShhY3RvcktleSlcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBpZiAoKHRva2VuLmRvY3VtZW50IHx8IHRva2VuKS50ZXh0dXJlLnNyYykge1xuICAgICAgICAgIGlmICgodG9rZW4uZG9jdW1lbnQgfHwgdG9rZW4pLnRleHR1cmUuc3JjLmluZGV4T2YoJyonKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiAodG9rZW4uZG9jdW1lbnQgfHwgdG9rZW4pLnRleHR1cmUuc3JjXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSB7XG4gICAgICAvLyBpZiBubyB0b2tlbiBmb3VuZCBmb3IgdGhhdCBhY3RvciByZXR1cm4gdGhlIHByb3RvdHlwZSB0b2tlbiBpbWFnZS5cbiAgICAgIGlmIChhY3Rvci5wcm90b3R5cGVUb2tlbikge1xuICAgICAgICBpZiAoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMpIHtcbiAgICAgICAgICBpZiAoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmM/LmluZGV4T2YoJyonKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyY1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0b3IuaW1nXG4gIH1cblxuICBzdGF0aWMgZ2V0RGlzdGFuY2UgKHN0YXJ0VG9rZW4sIGVuZFRva2VuKSB7XG4gICAgLy8gc3RhcnRUb2tlbi51cGRhdGVTb3VyY2UoKTtcbiAgICAvLyBjYW52YXMuc2lnaHQuaW5pdGlhbGl6ZVRva2VucygpO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5jZW50ZXIgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4uaWQgIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBpZiAoc3RhcnRUb2tlbi5zY2VuZT8uaWQgfHwgZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc3RhcnRUb2tlbi5zY2VuZS5pZClcbiAgICAgICAgaWYgKHR5cGVvZiBzY2VuZT8udG9rZW5zICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IHRva2VucyA9IHNjZW5lPy50b2tlbnNcbiAgICAgICAgICAgIC5maWx0ZXIodG9rZW4gPT4gdG9rZW4uYWN0b3IuaWQgPT09IGVuZFRva2VuLmRhdGEuZG9jdW1lbnQuaWQpXG4gICAgICAgICAgICAubWFwKHRva2VuID0+IHRva2VuLm9iamVjdClcbiAgICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZW5kVG9rZW4gPSB0b2tlbnNbMF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGRpc3RhbmNlID0ge1xuICAgICAgZ3JpZFVuaXQ6IDAsXG4gICAgICB2YWx1ZTogMCxcbiAgICAgIHVuaXQ6IGNhbnZhcy5zY2VuZS5ncmlkLnVuaXRzXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBzdGFydFRva2VuICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIHN0YXJ0VG9rZW4uY2VudGVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGVuZFRva2VuICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGVuZFRva2VuLmNlbnRlciAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IHJheSA9IG5ldyBSYXkoc3RhcnRUb2tlbi5jZW50ZXIsIGVuZFRva2VuLmNlbnRlcilcbiAgICAgIGNvbnN0IHNlZ21lbnQgPSBbeyByYXkgfV1cbiAgICAgIGRpc3RhbmNlID0ge1xuICAgICAgICBncmlkVW5pdDogcmF5LmRpc3RhbmNlIC8gY2FudmFzLnNjZW5lLmdyaWQuc2l6ZSxcbiAgICAgICAgLy8gdmFsdWU6IChyYXkuZGlzdGFuY2UvY2FudmFzLnNjZW5lLmRhdGEuZ3JpZCkqY2FudmFzLnNjZW5lLmRhdGEuZ3JpZERpc3RhbmNlLFxuICAgICAgICB2YWx1ZTogY2FudmFzLmdyaWQubWVhc3VyZURpc3RhbmNlcyhzZWdtZW50LCB7XG4gICAgICAgICAgZ3JpZFNwYWNlczogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZ3JpZFNwYWNlcycpXG4gICAgICAgIH0pWzBdLFxuICAgICAgICB1bml0OiBjYW52YXMuc2NlbmUuZ3JpZC51bml0c1xuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3RhbmNlRWxldmF0aW9uJykpIHtcbiAgICAgICAgY29uc3QgZWxldmF0aW9uID0gTWF0aC5hYnMoXG4gICAgICAgICAgKHN0YXJ0VG9rZW4uZG9jdW1lbnQuZWxldmF0aW9uIHx8IDApIC0gKGVuZFRva2VuLmRvY3VtZW50LmVsZXZhdGlvbiB8fCAwKVxuICAgICAgICApXG4gICAgICAgIGRpc3RhbmNlLnZhbHVlID0gTWF0aC5zcXJ0KFxuICAgICAgICAgIGRpc3RhbmNlLnZhbHVlICogZGlzdGFuY2UudmFsdWUgKyBlbGV2YXRpb24gKiBlbGV2YXRpb25cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlRGlzdGFuY2VDYWxjdWxhdGlvbkZhaWx1cmUnKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gZGlzdGFuY2VcbiAgfVxuXG4gIHN0YXRpYyB0b1lhcmRzIChkaXN0YW5jZSkge1xuICAgIHN3aXRjaCAoZGlzdGFuY2UudW5pdCkge1xuICAgICAgY2FzZSAnZnQnOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWUgLyAzXG5cbiAgICAgIGNhc2UgJ3lkJzpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlXG5cbiAgICAgIGNhc2UgJ20nOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3Um9sbCB7XG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHJvbGxEaXYgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5kaWNlLXJvbGwnKVxuICAgIGlmICghcm9sbERpdikgcmV0dXJuIG51bGxcblxuICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN1JvbGwoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgcm9sbERpdilcblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBnZXQgcmVzdWx0VHlwZSAoKSB7XG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBwYXJzZUludCh0aGlzLnN1Y2Nlc3NMZXZlbClcbiAgICBzd2l0Y2ggKHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GdW1ibGUnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmUnKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3JLZXkpIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICh0aGlzLml0ZW1JZCAmJiB0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgaWYgKHRoaXMuc2tpbGxJZCAmJiB0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5za2lsbElkKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzaG93RGljZVJvbGwgKCkge1xuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBjb25zdCBkaWNlUmVzdWx0cyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGRpZVJlc3VsdCBvZiB0aGlzLmRpY2VzLnRlbnMpIHtcbiAgICAgICAgZGljZVJlc3VsdHMucHVzaChkaWVSZXN1bHQudmFsdWUgPT09IDEwMCA/IDAgOiBkaWVSZXN1bHQudmFsdWUgLyAxMClcbiAgICAgIH1cbiAgICAgIGRpY2VSZXN1bHRzLnB1c2godGhpcy5kaWNlcy51bml0LnZhbHVlKVxuXG4gICAgICBjb25zdCBkaWNlRGF0YSA9IHtcbiAgICAgICAgZm9ybXVsYTogYCR7dGhpcy5kaWNlcy50ZW5zLmxlbmd0aH1kMTAwKzFkMTBgLFxuICAgICAgICByZXN1bHRzOiBkaWNlUmVzdWx0cyxcbiAgICAgICAgd2hpc3BlcjogbnVsbCxcbiAgICAgICAgYmxpbmQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLmRpY2UzZC5zaG93KGRpY2VEYXRhKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCwgb2JqZWN0ID0gbnVsbCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgY29uc3Qgcm9sbCA9IG9iamVjdCB8fCBuZXcgQ29DN1JvbGwoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgZWxlbWVudClcbiAgICByb2xsLmRpY2VzID0ge1xuICAgICAgdGVuczogW10sXG4gICAgICB1bml0OiB7fVxuICAgIH1cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KFxuICAgICAgcm9sbC5kaWNlcyxcbiAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRpY2UtcmVzdWx0JylcbiAgICApXG4gICAgcm9sbC5kaWNlcy5oYXNCb251cyA9IHJvbGwuZGljZU1vZGlmaWVyICE9PSAwXG4gICAgcm9sbC5kaWNlcy5ib251cyA9IE1hdGguYWJzKHJvbGwuZGljZU1vZGlmaWVyKVxuICAgIHJvbGwuZGljZXMuYm9udXNUeXBlID1cbiAgICAgIHJvbGwuZGljZU1vZGlmaWVyIDwgMFxuICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyUGVuYWx0eScpXG4gICAgICAgIDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJCb251cycpXG4gICAgY29uc3QgdGVuRGljZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRlbi1kaWNlJylcbiAgICBpZiAodGVuRGljZSkge1xuICAgICAgZm9yIChjb25zdCBkIG9mIHRlbkRpY2UucXVlcnlTZWxlY3RvckFsbCgnbGknKSkge1xuICAgICAgICBjb25zdCBkaWUgPSB7XG4gICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGlzTWF4OiBmYWxzZSxcbiAgICAgICAgICBpc01pbjogZmFsc2UsXG4gICAgICAgICAgdmFsdWU6IC0xXG4gICAgICAgIH1cbiAgICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChkaWUsIGQpXG4gICAgICAgIHJvbGwuZGljZXMudGVucy5wdXNoKGRpZSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdW5pdERpZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXQtZGllJylcbiAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdC1kaWUnKS5xdWVyeVNlbGVjdG9yKCdsaScpXG4gICAgICA6IG51bGxcbiAgICByb2xsLmRpY2VzLnVuaXQudmFsdWUgPSB1bml0RGllID8gcGFyc2VJbnQodW5pdERpZS5kYXRhc2V0LnZhbHVlKSA6IG51bGxcblxuICAgIHJvbGwuaW5jcmVhc2VTdWNjZXNzID0gW11cbiAgICBjb25zdCBpbmNyZWFzZVN1Y2Nlc3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmNyZWFzZS1zdWNjZXNzJylcbiAgICBpZiAoaW5jcmVhc2VTdWNjZXNzICYmIGluY3JlYXNlU3VjY2Vzcy5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSkge1xuICAgICAgZm9yIChjb25zdCBpc2wgb2YgaW5jcmVhc2VTdWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpKSB7XG4gICAgICAgIGNvbnN0IG5ld1N1Y2Nlc0xldmVsID0ge31cbiAgICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChuZXdTdWNjZXNMZXZlbCwgaXNsKVxuICAgICAgICByb2xsLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5ld1N1Y2Nlc0xldmVsKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyb2xsLmx1Y2tOZWVkZWQpIHtcbiAgICAgIHJvbGwubHVja05lZWRlZFR4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbmRMdWNrJywge1xuICAgICAgICBsdWNrTmVlZGVkVmFsdWU6IHJvbGwubHVja05lZWRlZFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKCFvYmplY3QpIHJldHVybiByb2xsXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNoZWNrIChjaGVjaykge1xuICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN1JvbGwoKVxuXG4gICAgcm9sbC5yb2xsVHlwZSA9IGNoZWNrLnJvbGxUeXBlXG4gICAgcm9sbC5zaWRlID0gY2hlY2suc2lkZVxuICAgIHJvbGwuYWN0aW9uID0gY2hlY2suYWN0aW9uXG4gICAgcm9sbC5yZWZNZXNzYWdlSWQgPSBjaGVjay5yZWZNZXNzYWdlSWRcbiAgICByb2xsLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZFxuXG4gICAgcm9sbC5zdWNjZXNzTGV2ZWwgPSBjaGVjay5zdWNjZXNzTGV2ZWxcbiAgICByb2xsLmRpZmZpY3VsdHkgPSBjaGVjay5kaWZmaWN1bHR5XG4gICAgcm9sbC5za2lsbElkID0gY2hlY2suc2tpbGwgPyBjaGVjay5za2lsbC5pZCA6IG51bGxcbiAgICByb2xsLml0ZW1JZCA9IGNoZWNrLml0ZW0gPyBjaGVjay5pdGVtLmlkIDogbnVsbFxuICAgIHJvbGwuZGljZU1vZCA9IGNoZWNrLmRpY2VNb2RpZmllclxuICAgIHJvbGwudmFsdWUgPSBwYXJzZUludChjaGVjay5yYXdWYWx1ZSlcbiAgICByb2xsLmZ1bWJsZSA9IGNoZWNrLmlzRnVtYmxlXG4gICAgcm9sbC5jcml0aWNhbCA9IGNoZWNrLmlzQ3JpdGljYWxcbiAgICByb2xsLmNoYXJhY3RlcmlzdGljID0gY2hlY2suY2hhcmFjdGVyaXN0aWMgPyBjaGVjay5jaGFyYWN0ZXJpc3RpYyA6IG51bGxcbiAgICByb2xsLnJlc3VsdCA9IGNoZWNrLmRpY2UudG90YWxcblxuICAgIHJvbGwuYWN0b3JLZXkgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcblxuICAgIGlmIChjaGVjay5hY3Rvci5pc1Rva2VuKSB7XG4gICAgICByb2xsLnRva2VuSWQgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHJvbGwuYWN0b3JJZCA9IG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgcm9sbC50b2tlbktleSA9IG51bGxcbiAgICAgIHJvbGwuYWN0b3JJZCA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBzdGF0aWMgYXR0YWNoQ2hlY2tUb0VsZW1lbnQgKGh0bWxFbGVtZW50LCBjaGVjaykge1xuICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2soY2hlY2spXG4gICAgcm9sbC5hdHRhY2hUb0VsZW1lbnQoaHRtbEVsZW1lbnQpXG5cbiAgICByZXR1cm4gcm9sbFxuICB9XG5cbiAgYXR0YWNoVG9FbGVtZW50IChodG1sRWxlbWVudCkge1xuICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KHRoaXMsIGh0bWxFbGVtZW50KVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3RGFtYWdlIHtcbiAgc3RhdGljIGdldE1haW5EaWUgKGRhbWFnZVN0cmluZykge1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDIwJykpIHJldHVybiAnZDIwJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDEyJykpIHJldHVybiAnZDEyJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDEwJykpIHJldHVybiAnZDEwJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDgnKSkgcmV0dXJuICdkOCdcbiAgICBpZiAoZGFtYWdlU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Q0JykpIHJldHVybiAnZDQnXG4gICAgcmV0dXJuICdkNidcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCwgb2JqZWN0ID0gbnVsbCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgY29uc3QgZGFtYWdlID0gb2JqZWN0IHx8IHt9XG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChkYW1hZ2UsIGVsZW1lbnQpXG4gICAgY29uc3Qgcm9sbHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGxzJykucXVlcnlTZWxlY3RvckFsbCgnbGknKVxuICAgIGRhbWFnZS5yb2xscyA9IFtdXG4gICAgZm9yIChjb25zdCByIG9mIHJvbGxzKSB7XG4gICAgICBjb25zdCByb2xsID0ge31cbiAgICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgcilcbiAgICAgIGRhbWFnZS5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuXG4gICAgaWYgKCFvYmplY3QpIHJldHVybiBkYW1hZ2VcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5cbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4vY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIFJvbGxEaWFsb2cge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICBpZiAob3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbCA9IHt9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLmhhcmQgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gaWYoIHVuZGVmaW5lZCA9PSBvcHRpb25zLmFza1ZhbHVlKSBvcHRpb25zLmFza1ZhbHVlID0gdHJ1ZTtcbiAgICBpZiAob3B0aW9ucy5uYW1lICYmICFvcHRpb25zLmRpc3BsYXlOYW1lKSBvcHRpb25zLmRpc3BsYXlOYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgY29uc3QgdW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0ID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGFsbG93RmxhdERpY2VNb2RpZmllcjpcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0RGljZU1vZGlmaWVyJykgJiZcbiAgICAgICAgIW9wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIsXG4gICAgICBhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcjpcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKSAmJlxuICAgICAgICAhb3B0aW9ucy5kaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyLFxuICAgICAgZGlmZmljdWx0eTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCxcbiAgICAgIHVua25vd25EaWZmaWN1bHR5RGVmYXVsdCxcbiAgICAgIGhpZGVEaWZmaWN1bHR5OiBvcHRpb25zLmhpZGVEaWZmaWN1bHR5ID8/IGZhbHNlLFxuICAgICAgb3B0aW9uc1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICghb3B0aW9ucy5mb3JjZWRDYXJkVHlwZSA/PyB0cnVlKVxuICAgICkge1xuICAgICAgZGF0YS5jYXJkVHlwZXMgPSBDb0M3Q2hhdE1lc3NhZ2UuY2FyZFR5cGVzKG9wdGlvbnMpXG4gICAgfVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvYm9udXMuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Cb251c1NlbGVjdGlvbldpbmRvd05hbWVkJywge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNTZWxlY3Rpb25XaW5kb3cnKSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIHJvbGw6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpY2UnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjYm9udXMtcm9sbC1mb3JtJykpXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ3JvbGwnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbi8vIGltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJztcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgUm9sbENhcmQge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5yb2xscyA9IFtdXG4gICAgdGhpcy5pbml0aWF0b3IgPSBudWxsXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZSAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShjYXJkRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IGNhcmQgPSBPYmplY3QuYXNzaWduKG5ldyB0aGlzKCksIGRhdGEpXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNhcmQucm9sbHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAoY2FyZC5yb2xsc1tpbmRleF0/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgICBjYXJkLnJvbGxzW2luZGV4XSA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBjYXJkLnJvbGxzW2luZGV4XSlcbiAgICAgICAgaWYgKGNhcmQucm9sbHNbaW5kZXhdLnJvbGxlZCkge1xuICAgICAgICAgIGNhcmQucm9sbHNbaW5kZXhdLl9odG1sUm9sbCA9IGF3YWl0IGNhcmQucm9sbHNbaW5kZXhdLmdldEh0bWxSb2xsKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBzcGFuID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmIChzcGFuICYmIHNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBzcGFuLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlSWQobWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZClcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNvbnN0IGZsYWcgPSBzcGFuLmRhdGFzZXQuZmxhZ1xuICAgIGlmICghZmxhZykgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gc3Bhbi5jbG9zZXN0KCcudG9nZ2xlJylcbiAgICBpZiAoIXRvZ2dsZSkge1xuICAgICAgY2FyZC50b2dnbGVGbGFnKGZsYWcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0b2dnbGUucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1zd2l0Y2gnKVxuICAgICAgZm9yIChjb25zdCBiIG9mIGJ1dHRvbnMpIHtcbiAgICAgICAgY2FyZC51bnNldEZsYWcoYi5kYXRhc2V0LmZsYWcpXG4gICAgICB9XG4gICAgICBjYXJkLnNldEZsYWcoZmxhZylcbiAgICB9XG4gICAgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGlzcGF0Y2ggKGRhdGEpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGxldCBtZXNzYWdlcyA9IHVpLmNoYXQuY29sbGVjdGlvbi5maWx0ZXIobWVzc2FnZSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmRlZmF1bHRDb25maWcudHlwZSA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3R5cGUnKSAmJlxuICAgICAgICAgIG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdzdGF0ZScpICE9PSAncmVzb2x2ZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChbJ2NvbWJpbmVkQ2FyZCddLmluY2x1ZGVzKHRoaXMuZGVmYXVsdENvbmZpZy50eXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdpbml0aWF0b3InKSA9PT0gZGF0YS5yb2xsLmluaXRpYXRvclxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcblxuICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgICAvLyBPbGQgbWVzc2FnZXMgY2FuJ3QgYmUgdXNlZCBpZiBtZXNzYWdlIGlzIG1vcmUgdGhhbiBhIGRheSBvbGQgbWFyayBpdCBhcyByZXNvbHZlZFxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZShtZXNzYWdlc1swXS50aW1lc3RhbXApXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICAgICAgY29uc3QgdGltZURpZmZTZWMgPSAobm93IC0gdGltZXN0YW1wKSAvIDEwMDBcbiAgICAgICAgaWYgKDI0ICogNjAgKiA2MCA8IHRpbWVEaWZmU2VjKSB7XG4gICAgICAgICAgYXdhaXQgbWVzc2FnZXNbMF0uc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXG4gICAgICAgICAgbWVzc2FnZXMgPSBbXVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBjYXJkXG4gICAgICBpZiAoIW1lc3NhZ2VzLmxlbmd0aCkgY2FyZCA9IG5ldyB0aGlzKClcbiAgICAgIGVsc2UgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZXNbMF0pXG4gICAgICBpZiAodHlwZW9mIGRhdGEuX3JvbGxNb2RlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjYXJkLl9yb2xsTW9kZSA9IGRhdGEuX3JvbGxNb2RlXG4gICAgICB9XG4gICAgICBhd2FpdCBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICB9IGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy5jb25maWcudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJChodG1sKVxuICAgIGh0bWxDYXJkRWxlbWVudFswXS5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMuY29uZmlnLnRpdGxlKSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudFswXS5vdXRlckhUTUwsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgdHlwZTogdGhpcy5jb25maWcudHlwZSxcbiAgICAgICAgICBzdGF0ZTogJ2luaXRpYXRlZCcsXG4gICAgICAgICAgaW5pdGlhdG9yOiB0aGlzLmluaXRpYXRvclxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgYXdhaXQgdGhpcy5jb21wdXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICBhd2FpdCB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSwgdGhpcylcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuXG4gICAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9KVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUm9sbCAoZGF0YSkge1xuICAgIGlmICghZGF0YS5mcm9tR00pIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5yb2xsc1tkYXRhLnJhbmtdLCBkYXRhLnJvbGwpXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbERhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjaGVjayA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhLnJvbGwpXG4gICAgdGhpcy5yb2xscy5wdXNoKGNoZWNrKVxuICAgIGlmICh0aGlzLmNvbmZpZy50eXBlID09PSAnY29tYmluZWRDYXJkJykge1xuICAgICAgdGhpcy5pbml0aWF0b3IgPSBkYXRhLnJvbGwuaW5pdGlhdG9yXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbCAoZGF0YSkge1xuICAgIHRoaXMucm9sbHMucHVzaChkYXRhKVxuICB9XG5cbiAgcmVtb3ZlUm9sbCAocmFuaykge1xuICAgIHRoaXMucm9sbHMuc3BsaWNlKHJhbmssIDEpXG4gIH1cblxuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGdldCBtZXNzYWdlICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2VcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5fbWVzc2FnZUlkKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZSA9IHhcbiAgfVxuXG4gIGdldCBtZXNzYWdlSWQgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiB0aGlzLl9tZXNzYWdlSWRcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2UuaWRcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZUlkICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZUlkID0geFxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGdldCB3aW5uZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLndpbm5lcilcbiAgfVxuXG4gIGdldCB3aW5uZXIgKCkge1xuICAgIGlmICh0aGlzLndpbm5lcnMubGVuZ3RoKSByZXR1cm4gdGhpcy53aW5uZXJzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGxvb3NlcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzLmZpbHRlcihyID0+ICFyLndpbm5lcilcbiAgfVxuXG4gIGdldCBsb29zZXIgKCkge1xuICAgIGlmICh0aGlzLmxvb3NlcnMubGVuZ3RoKSByZXR1cm4gdGhpcy5sb29zZXJzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGhhc1dpbm5lciAoKSB7XG4gICAgaWYgKHRoaXMud2lubmVycy5sZW5ndGggPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzS2VlcGVyICgpIHtcbiAgICByZXR1cm4gZ2FtZS51c2VyLmlzR01cbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZGF0YVN0cmluZylcbiAgfVxuXG4gIGdldCBkYXRhU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKHRoaXMuY29uZmlnLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCh0aGlzLmNvbmZpZy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEF1ZGlvSGVscGVyLCBDT05GSUcsIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IFJvbGxDYXJkIH0gZnJvbSAnLi9yb2xsLWNhcmQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb21iaW5lZENoZWNrQ2FyZCBleHRlbmRzIFJvbGxDYXJkIHtcbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZXJuZXJzIChodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5jb21iaW5lZCAudG9nZ2xlLXN3aXRjaCcsXG4gICAgICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXG4gICAgKVxuICAgIC8vIGh0bWwuZmluZCgnLnJvbGwtY2FyZCBhJykuY2xpY2soYXN5bmMgKGV2ZW50KSA9PiBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljayggZXZlbnQpKTtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLmNvbWJpbmVkIGEnLFxuICAgICAgQ29tYmluZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLmNvbWJpbmVkIGJ1dHRvbicsXG4gICAgICBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0Q29uZmlnICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdENvbmZpZywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5odG1sJyxcbiAgICAgIHR5cGU6ICdjb21iaW5lZENhcmQnLFxuICAgICAgdGl0bGU6ICdDb0M3LkNvbWJpbmVkUm9sbENhcmQnXG4gICAgfSlcbiAgfVxuXG4gIGdldCBjb25maWcgKCkge1xuICAgIHJldHVybiBDb21iaW5lZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnXG4gIH1cblxuICBnZXQgc3VjY2Vzc0NvdW50ICgpIHtcbiAgICBpZiAodGhpcy5yb2xsZWQpIHtcbiAgICAgIGxldCBjb3VudCA9IDBcbiAgICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICAgIGlmIChyLnBhc3NlZCkgY291bnQgKz0gMVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNvdW50XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBtYWluQWN0b3JLZXkgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzWzBdPy5hY3Rvcj8uYWN0b3JLZXkgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgc3VjY2VzcyAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnN1Y2Nlc3NDb3VudCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5hbnkpIHtcbiAgICAgIGlmICh0aGlzLnN1Y2Nlc3NDb3VudCA+IDApIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKHRoaXMuYWxsKSB7XG4gICAgICBpZiAodGhpcy5zdWNjZXNzQ291bnQgPT09IHRoaXMucm9sbHMubGVuZ3RoKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBmYWlsdXJlICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuc3VjY2VzcyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gIXRoaXMuc3VjY2Vzc1xuICB9XG5cbiAgZ2V0IGNoZWNrR01Jbml0aWF0b3IgKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXJzLmdldCh0aGlzLmluaXRpYXRvcik/LmlzR01cbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbGVkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSh7XG4gICAgICByb2xsOiB0aGlzLl9yb2xsW2NoZWNrLmRpY2VNb2RpZmllciB8fCAwXSxcbiAgICAgIHNpbGVudDogdHJ1ZVxuICAgIH0pXG4gICAgcmV0dXJuIGF3YWl0IGNoZWNrLmdldEh0bWxSb2xsKHsgaGlkZVN1Y2Nlc3M6IHRydWUgfSlcbiAgfVxuXG4gIHByb2Nlc3MgKGRhdGEpIHtcbiAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XG4gICAgICBjYXNlICduZXcnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3JvbGwnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3VwZGF0ZVJvbGwnOiB7XG4gICAgICAgIHRoaXMudXBkYXRlUm9sbChkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhc3NpZ25Sb2xsJzoge1xuICAgICAgICB0aGlzLmFzc2lnblJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgYXNzaWduUm9sbCAoZGF0YSkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5fcm9sbCA9IGRhdGEucm9sbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IGEuZGF0YXNldC5hY3Rpb25cbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGkuYWN0b3Itcm9sbCcpXG4gICAgY29uc3QgbWVzc2FnZSA9IGEuY2xvc2VzdCgnLmNoYXQtbWVzc2FnZScpXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBhLmNsb3Nlc3QoJ2Rpdi5yb2xsLWNhcmQnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBDb21iaW5lZENoZWNrQ2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIGNvbnN0IHJhbmsgPSBOdW1iZXIobGk/LmRhdGFzZXQ/LnJhbmspXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAncmVtb3ZlLXJvbGwnOiB7XG4gICAgICAgIGNhcmQucmVtb3ZlUm9sbChyYW5rKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnY2xvc2UtY2FyZCc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1jYXJkJzoge1xuICAgICAgICBjb25zdCBwb29sID0ge31cbiAgICAgICAgZm9yIChjb25zdCBkaWNlIG9mIGNhcmQucm9sbHMpIHtcbiAgICAgICAgICBjb25zdCBkaWNlTW9kaWZpZXIgPSBwYXJzZUludChkaWNlLmRpY2VNb2RpZmllciwgMTApXG4gICAgICAgICAgaWYgKCFpc05hTihkaWNlTW9kaWZpZXIpKSB7XG4gICAgICAgICAgICBwb29sW2RpY2VNb2RpZmllcl0gPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBDb0M3RGljZS5jb21iaW5lZFJvbGwoeyBwb29sIH0pXG4gICAgICAgIHJvbGwuaW5pdGlhdG9yID0gZ2FtZS51c2VyLmlkXG5cbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICdhc3NpZ25Sb2xsJyxcbiAgICAgICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNLFxuICAgICAgICAgIHJvbGxcbiAgICAgICAgfVxuICAgICAgICBBdWRpb0hlbHBlci5wbGF5KHsgc3JjOiBDT05GSUcuc291bmRzLmRpY2UgfSwgdHJ1ZSlcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICB1cGRhdGU6IGZhbHNlLFxuICAgICAgICAgIGRhdGE6IGEuZGF0YXNldCxcbiAgICAgICAgICBjbGFzc2VzOiBhLmNsYXNzTGlzdCxcbiAgICAgICAgICB0YXJnZXQ6IGFcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2suYWx0ZXIoY2FyZC5yb2xsc1tyYW5rXSwgYWN0aW9uLCBvcHRpb25zKVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6IHRoaXMuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgIGFjdGlvbjogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICAgIHJhbmssXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTSxcbiAgICAgICAgICByb2xsOiB7XG4gICAgICAgICAgICBpbml0aWF0b3I6IGdhbWUudXNlci5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSBjYXJkLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgICAgICBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBjb21wdXRlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGwpIHJldHVyblxuXG4gICAgdGhpcy5yb2xscyA9IHRoaXMucm9sbHMuZmlsdGVyKHJvbGwgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiByb2xsLmFjdG9yLmRhdGEgIT09ICd1bmRlZmluZWQnIC8vIHJlbW92ZSBhbnkgYWN0b3JzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0XG4gICAgfSlcblxuICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICBpZiAoIXIucm9sbGVkKSB7XG4gICAgICAgIHIubW9kaWZpZXIgPSByLmRpY2VNb2RpZmllciB8fCAwXG4gICAgICAgIHIuZGlmZmljdWx0eSA9IHIuZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgci5mbGF0RGljZU1vZGlmaWVyID0gci5mbGF0RGljZU1vZGlmaWVyIHx8IDBcbiAgICAgICAgci5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSByLmZsYXRUaHJlc2hvbGRNb2RpZmllciB8fCAwXG4gICAgICAgIGF3YWl0IHIuX3BlcmZvcm0oeyByb2xsOiB0aGlzLl9yb2xsW3IubW9kaWZpZXJdLCBzaWxlbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5yb2xsc1tpXS5yb2xsZWQpIHtcbiAgICAgICAgdGhpcy5yb2xsc1tpXS5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGxzW2ldLmdldEh0bWxSb2xsKHtcbiAgICAgICAgICBoaWRlRGljZVJlc3VsdDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5nZXRIdG1sUm9sbCgpXG4gIH1cblxuICBjbG9zZUNhcmQgKCkge1xuICAgIHRoaXMuY2xvc2VkID0gdHJ1ZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGRpZmZPYmplY3QsIGV4cGFuZE9iamVjdCwgRm9ybURhdGFFeHRlbmRlZCwgZ2FtZSwgbWVyZ2VPYmplY3QsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgSW50ZXJhY3RpdmVDaGF0Q2FyZCB7XG4gIGNvbnN0cnVjdG9yIChvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9uc1xuICB9XG5cbiAgZ2V0IG9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdCh0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRPcHRpb25zLCB0aGlzLl9vcHRpb25zKVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRlbXBsYXRlXG4gIH1cblxuICBnZXQgY3NzQ2xhc3NlcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc2VzXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKG9wdGlvbm5hbENoYXREYXRhID0ge30pIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpWzBdXG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3MgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcbiAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzZXMpXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IG1lcmdlT2JqZWN0KFxuICAgICAge1xuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMub3B0aW9ucy50aXRsZSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0sXG4gICAgICBvcHRpb25uYWxDaGF0RGF0YVxuICAgIClcblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChvcHRpb25zLmNvbXB1dGUpIHRoaXMuY29tcHV0ZSgpXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkge1xuICAgICAgdGhpcy50b01lc3NhZ2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3MgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NlcylcblxuICAgICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxuICAgICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICAgIGlmICh0aGlzLmNsb3NlZCkgYXdhaXQgY2hhdE1lc3NhZ2Uuc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXG5cbiAgICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0pXG4gICAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICAgIHJldHVybiBtc2dcbiAgICB9XG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5pbnRlcmFjdGl2ZS1jYXJkIC5pYy1yYWRpby1zd2l0Y2gnLFxuICAgICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCAuaWMtc3dpdGNoJywgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCAuc3VibWl0JywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdmb2N1c291dCcsICdpbnB1dCcsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmludGVyYWN0aXZlLWNhcmQgYnV0dG9uJywgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdrZXlkb3duJywgJ2Zvcm0nLCB0aGlzLl9vbktleS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBjb25zdCBodG1sTWVzc2FnZUVsZW1lbnQgPSBodG1sWzBdXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gaHRtbE1lc3NhZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWNhcmQnKVxuICAgIGlmICghaHRtbENhcmRFbGVtZW50KSByZXR1cm5cbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcykgcmV0dXJuXG4gICAgaWYgKFxuICAgICAgIU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdhbWUuQ29DNy5jYXJkcykuaW5jbHVkZXMoXG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzc1xuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBJbnRlcmFjdGl2ZUNoYXRDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoaHRtbENhcmRFbGVtZW50KVxuICAgIGNvbnN0IHR5cGVkQ2FyZCA9IE9iamVjdC5hc3NpZ24oXG4gICAgICBuZXcgZ2FtZS5Db0M3LmNhcmRzW2h0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzc10oKSxcbiAgICAgIGNhcmRcbiAgICApXG4gICAgdHlwZWRDYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgdHlwZWRDYXJkLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gcmVhc3NpZ24gb2JqZWN0IHR5cGVcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzc2lnbk9iamVjdCAoKSB7fVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50IHdpbGwgY2hlY2sgZm9yIGFuIGFjdGlvbiAoZGF0YS1hY3Rpb24pXG4gICAqIGlmIGEgbWV0aG9kIHdpdGggdGhhdCBuYW1lIGV4aXN0IGl0IHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgKi9cbiAgX29uQnV0dG9uIChldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAvLyBidXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJyAvL0F2b2lkIG11bHRpcGxlIHB1c2hcbiAgICBjb25zdCBhY3Rpb24gPSBidXR0b24uZGF0YXNldC5hY3Rpb25cbiAgICBpZiAodGhpc1thY3Rpb25dKSB0aGlzW2FjdGlvbl0oeyBldmVudCwgdXBkYXRlOiB0cnVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKiBAcmV0dXJucyBmYWxzZSBpZiBrZXkgaXMgZW50ZXIgdG8gYXZvaWQgZ2xvYmFsIHN1Ym1pc3Npb25cbiAgICovXG4gIF9vbktleSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICByZXR1cm4gZXZlbnQua2V5ICE9PSAnRW50ZXInXG4gIH1cblxuICBfb25TdWJtaXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdCgnLmludGVyYWN0aXZlLWNhcmQnKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3QgdXBkYXRlcyA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGlmICh1cGRhdGVzKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIF91cGRhdGUgKGNhcmQpIHtcbiAgICBjb25zdCBmb3JtcyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXG4gICAgbGV0IHVwZGF0ZXMgPSBmYWxzZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZvcm0gPSBmb3Jtc1tpXVxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZChmb3JtKVxuICAgICAgbGV0IGRhdGEgPSBmZC50b09iamVjdCgpXG4gICAgICBkYXRhID0gZGlmZk9iamVjdCh0aGlzLCBleHBhbmRPYmplY3QoZGF0YSkpXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZVxuICAgICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlc1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xhc3NlczogWydpbnRlcmFjdGl2ZS1jYXJkJ10sXG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZGF0YVN0cmluZylcbiAgfVxuXG4gIGdldCBkYXRhU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leGNsdWRlPy5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5vcHRpb25zLmV4Y2x1ZGVTdGFydFdpdGgpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZSAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICBpZiAoIWNhcmREYXRhLm1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgICAgY2FyZERhdGEubWVzc2FnZUlkID0gbWVzc2FnZT8uZGF0YXNldD8ubWVzc2FnZUlkXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKGNhcmREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21EYXRhIChkYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IE9iamVjdC5hc3NpZ24obmV3IHRoaXMoKSwgZGF0YSlcbiAgICBhd2FpdCBjYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKCdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gdGhpcy5fb25CdXR0b24oZXZlbnQpXG4gICAgaWYgKFxuICAgICAgdGFyZ2V0ICYmXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmXG4gICAgICAhZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBmbGFnID0gdGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGlmICghZmxhZykgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmNsb3Nlc3QoJy5pYy1yYWRpbycpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIHRoaXMudG9nZ2xlRmxhZyhmbGFnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pYy1yYWRpby1zd2l0Y2gnKVxuICAgICAgZm9yIChjb25zdCBiIG9mIGJ1dHRvbnMpIHtcbiAgICAgICAgdGhpcy51bnNldEZsYWcoYi5kYXRhc2V0LmZsYWcpXG4gICAgICB9XG4gICAgICB0aGlzLnNldEZsYWcoZmxhZylcbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KCcuaW50ZXJhY3RpdmUtY2FyZCcpXG4gICAgaWYgKGNhcmQpIHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbE1vZGUpIHJldHVybiBudWxsXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5hY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuaXRlbUlkKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRlZFRva2VucyAoKSB7XG4gICAgcmV0dXJuIFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSByZXR1cm4gdGhpcy50YXJnZXRUb2tlblxuICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgaXNUYXJnZXRPd25lciAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0LmlzT3duZXJcbiAgfVxuXG4gIGdldCBpc0tlZXBlciAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gIH1cblxuICAvKipcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgKi9cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICBpZiAodGhpcy5fdGFyZ2V0S2V5KSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSB0aGlzLnRhcmdldGVkVG9rZW5zLnBvcCgpXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VG9rZW5cbiAgfVxuXG4gIGdldCB0YXJnZXRBY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0QWN0b3IgPVxuICAgICAgICAgIHRoaXMudGFyZ2V0VG9rZW4uYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuZG9jdW1lbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgdGFyZ2V0S2V5ICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEtleVxuICB9XG5cbiAgZ2V0IGhhc1RhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc2V0IHRhcmdldEtleSAoeCkge1xuICAgIHRoaXMuX3RhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLmdldFdlYXBvblNraWxscyh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB0YXJnZXRJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMudGFyZ2V0S2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gIH1cblxuICBnZXQgdGFyZ2V0TmFtZSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldCkgcmV0dXJuICdkdW1teSdcbiAgICByZXR1cm4gdGhpcy50YXJnZXQubmFtZVxuICB9XG5cbiAgZ2V0IGFjdG9ySW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBEaWFsb2csIGdhbWUsIG1lcmdlT2JqZWN0LCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4uL2ludGVyYWN0aXZlLWNoYXQtY2FyZC5qcydcbmltcG9ydCB7IGNyZWF0ZUlubGluZVJvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBEYW1hZ2VDYXJkIGV4dGVuZHMgSW50ZXJhY3RpdmVDaGF0Q2FyZCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgZXhjbHVkZTogW1xuICAgICAgICAnX3RhcmdldFRva2VuJyxcbiAgICAgICAgJ190YXJnZXRBY3RvcicsXG4gICAgICAgICdfaHRtbFJvbGwnLFxuICAgICAgICAnX2h0bWxJbmxpbmVSb2xsJ1xuICAgICAgXS5jb25jYXQoc3VwZXIuZGVmYXVsdE9wdGlvbnMuZXhjbHVkZSksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9kYW1hZ2UuaHRtbCdcbiAgICB9KVxuICB9XG5cbiAgLy8gYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgLy8gICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAvLyB9XG5cbiAgYXN5bmMgYXNzaWduT2JqZWN0ICgpIHtcbiAgICBpZiAodGhpcy5kYW1hZ2VSb2xsICYmIHRoaXMuZGFtYWdlUm9sbC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgdGhpcy5kYW1hZ2VSb2xsID0gUm9sbC5mcm9tRGF0YSh0aGlzLmRhbWFnZVJvbGwpXG4gICAgfVxuICB9XG5cbiAgX29uQnV0dG9uIChldmVudCkge1xuICAgIHN1cGVyLl9vbkJ1dHRvbihldmVudClcbiAgfVxuXG4gIGdldCBjcml0aWNhbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jcml0aWNhbFxuICB9XG5cbiAgc2V0IGNyaXRpY2FsICh4KSB7XG4gICAgdGhpcy5fb3B0aW9ucy5jcml0aWNhbCA9IHhcbiAgfVxuXG4gIGdldCBpbXBhbGUgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5faW1wYWxlID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXMud2VhcG9uLmltcGFsZVxuICAgIHJldHVybiB0aGlzLl9pbXBhbGVcbiAgfVxuXG4gIHNldCBpbXBhbGUgKHgpIHtcbiAgICB0aGlzLl9pbXBhbGUgPSB4XG4gIH1cblxuICBnZXQgaXNEYW1hZ2VGb3JtdWxhICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZGFtYWdlRm9ybXVsYSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuZGFtYWdlRm9ybXVsYSkpKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gUm9sbC52YWxpZGF0ZSh0aGlzLmRhbWFnZUZvcm11bGEpXG4gIH1cblxuICBnZXQgaXNEYW1hZ2VOdW1iZXIgKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGFtYWdlRm9ybXVsYSkpXG4gIH1cblxuICBnZXQgaXNBcm1vckZvcnVsYSAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmFybW9yICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlXG4gICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5hcm1vcikpKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gUm9sbC52YWxpZGF0ZSh0aGlzLmFybW9yKVxuICB9XG5cbiAgZ2V0IHRvdGFsRGFtYWdlU3RyaW5nICgpIHtcbiAgICBsZXQgZGFtYWdlID0gTnVtYmVyKFxuICAgICAgdGhpcy5pc0RhbWFnZU51bWJlciA/IHRoaXMuZGFtYWdlRm9ybXVsYSA6IHRoaXMucm9sbC50b3RhbFxuICAgIClcbiAgICBpZiAoIXRoaXMuaWdub3JlQXJtb3IpIHtcbiAgICAgIGlmIChpc05hTihOdW1iZXIodGhpcy5hcm1vcikpIHx8IE51bWJlcih0aGlzLmFybW9yKSA+IDApIHtcbiAgICAgICAgZGFtYWdlID0gZGFtYWdlIC0gTnVtYmVyKHRoaXMuYXJtb3IpXG4gICAgICB9XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkpIHtcbiAgICAgICAgaWYgKGRhbWFnZSA8PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Bcm1vckFic29yYnNEYW1hZ2UnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYW1hZ2VcbiAgfVxuXG4gIGdldCBub0RhbWFnZSAoKSB7XG4gICAgaWYgKHRoaXMucm9sbGVkKSB7XG4gICAgICBjb25zdCBkYW1hZ2UgPSB0aGlzLmlzRGFtYWdlTnVtYmVyID8gdGhpcy5kYW1hZ2VGb3JtdWxhIDogdGhpcy5yb2xsLnRvdGFsXG4gICAgICBpZiAoIXRoaXMuaWdub3JlQXJtb3IpIHtcbiAgICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5hcm1vcikpKSB7XG4gICAgICAgICAgcmV0dXJuICEhKGRhbWFnZSAtIE51bWJlcih0aGlzLmFybW9yKSA8PSAwKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICEhKGRhbWFnZSA8PSAwKVxuICAgICAgfVxuICAgIH0gZWxzZSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmZhc3RGb3J3YXJkICYmICF0aGlzLnJvbGwgJiYgIXRoaXMuaXNEYW1hZ2VOdW1iZXIpIHtcbiAgICAgIGF3YWl0IHRoaXMucm9sbERhbWFnZSh7IHVwZGF0ZTogZmFsc2UgfSlcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5pc0RhbWFnZU51bWJlciB8fFxuICAgICAgKHRoaXMucm9sbCAmJiB0aGlzLnJvbGwudG90YWwgIT0gbnVsbCkgfHxcbiAgICAgIHRoaXMuaGFyZHJvbGxlZFxuICAgICkge1xuICAgICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5mYXN0Rm9yd2FyZCAmJiAhdGhpcy5kYW1hZ2VJbmZsaWN0ZWQgJiYgIXRoaXMubm9EYW1hZ2UpIHtcbiAgICAgIGF3YWl0IHRoaXMuZGVhbERhbWFnZSh7IHVwZGF0ZTogZmFsc2UgfSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yb2xsZWQgJiYgdGhpcy5yb2xsKSB7XG4gICAgICBpZiAodGhpcy5yb2xsLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICAgIHRoaXMucm9sbCA9IFJvbGwuZnJvbURhdGEodGhpcy5yb2xsKVxuICAgICAgfVxuICAgICAgY29uc3QgYSA9IGNyZWF0ZUlubGluZVJvbGwodGhpcy5yb2xsKVxuICAgICAgdGhpcy5faHRtbElubGluZVJvbGwgPSBhLm91dGVySFRNTFxuICAgICAgdGhpcy5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGwucmVuZGVyKClcbiAgICB9XG4gICAgYXdhaXQgc3VwZXIudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgcm9sbERhbWFnZSAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICB0aGlzLnJvbGwgPSBhd2FpdCBuZXcgUm9sbCh0aGlzLmRhbWFnZUZvcm11bGEgfHwgJzAnKS5ldmFsdWF0ZSh7XG4gICAgICBhc3luYzogdHJ1ZVxuICAgIH0pXG4gICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5yb2xsKVxuICAgIHRoaXMuaGFyZHJvbGxlZCA9IHRydWVcbiAgICBvcHRpb25zLnVwZGF0ZSA9XG4gICAgICB0eXBlb2Ygb3B0aW9ucy51cGRhdGUgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMudXBkYXRlXG4gICAgaWYgKG9wdGlvbnMudXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxBcm1vciAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICBjb25zdCByb2xsID0gYXdhaXQgbmV3IFJvbGwodGhpcy5hcm1vcikuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgIHRoaXMuYXJtb3IgPSByb2xsLnRvdGFsXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlVG9TZWxlY3RlZFRhcmdldCAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICBpZiAodGhpcy5pc0FybW9yRm9ydWxhKSBhd2FpdCB0aGlzLnJvbGxBcm1vcigpXG4gICAgaWYgKGlzTmFOKE51bWJlcih0aGlzLnRvdGFsRGFtYWdlU3RyaW5nKSkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yRXZhbHVhdGluZ0RhbWFnZScpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldHMgPSBbXVxuICAgIGNvbnN0IHRhcmdldE5hbWUgPSBbXVxuICAgIGNvbnN0IHNlbGVjdGVkUGxheWVycyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5tYXAodG9rZW4gPT4ge1xuICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgfSlcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2VsZWN0ZWRQbGF5ZXJzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMuYWN0b3IuaWQgPT09IHNlbGVjdGVkUGxheWVyc1tpbmRleF0uaWQpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIHRhcmdldE5hbWUucHVzaChzZWxlY3RlZFBsYXllcnNbaW5kZXhdLm5hbWUpXG4gICAgICB0YXJnZXRzLnB1c2goc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XSlcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHRpdGxlOiAnICcsXG4gICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRlYWxEYW1hZ2UnLCB7XG4gICAgICAgIGRhbWFnZTogdGhpcy50b3RhbERhbWFnZVN0cmluZyxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXROYW1lXG4gICAgICB9KSxcbiAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgb25lOiB7XG4gICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlybURhbWFnZSh0YXJnZXRzKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdHdvOiB7XG4gICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcbiAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge31cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRlZmF1bHQ6ICd0d28nXG4gICAgfVxuICAgIGlmICh0YXJnZXROYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29uZmlybURhbWFnZSAodGFyZ2V0cykge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0YXJnZXRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgYXdhaXQgdGFyZ2V0c1tpbmRleF0uZGVhbERhbWFnZShOdW1iZXIodGhpcy50b3RhbERhbWFnZVN0cmluZyksIHtcbiAgICAgICAgaWdub3JlQXJtb3I6IGZhbHNlXG4gICAgICB9KVxuICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EYW1hZ2VEZWFsVG8nLCB7XG4gICAgICAgICAgbmFtZTogdGFyZ2V0c1tpbmRleF0ubmFtZSxcbiAgICAgICAgICBkYW1hZ2U6IHRoaXMudG90YWxEYW1hZ2VTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZSAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICBpZiAodGhpcy5pc0FybW9yRm9ydWxhKSBhd2FpdCB0aGlzLnJvbGxBcm1vcigpXG4gICAgbGV0IGRhbWFnZSA9IHRoaXMudG90YWxEYW1hZ2VTdHJpbmdcbiAgICBpZiAoaXNOYU4oTnVtYmVyKGRhbWFnZSkpKSB7XG4gICAgICBpZiAoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybW9yQWJzb3Jic0RhbWFnZScpID09PSBkYW1hZ2UpIHtcbiAgICAgICAgZGFtYWdlID0gMFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRXJyb3IgZXZhbHVhdGluZyBkYW1hZ2UnKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMudGFyZ2V0QWN0b3IpIHtcbiAgICAgIGF3YWl0IHRoaXMudGFyZ2V0QWN0b3IuZGVhbERhbWFnZShOdW1iZXIoZGFtYWdlKSwge1xuICAgICAgICBpZ25vcmVBcm1vcjogdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5kYW1hZ2VJbmZsaWN0ZWQgPSB0cnVlXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBnZXQgcmFuZ2UgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucmFuZ2UgfHwgJ25vcm1hbCdcbiAgfVxuXG4gIHNldCByYW5nZSAoeCkge1xuICAgIGNvbnN0IHJhbmdlcyA9IFsnbm9ybWFsJywgJ2xvbmcnLCAnZXh0cmVtZSddXG4gICAgaWYgKCFyYW5nZXMuaW5jbHVlcyh4LnRvTG93ZXJDYXNlKCkpKSByZXR1cm5cbiAgICB0aGlzLl9vcHRpb25zLnJhbmdlID0geFxuICB9XG5cbiAgZ2V0IGRhbWFnZUZvcm11bGEgKCkge1xuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5yYW5nZVxuICAgIGxldCBmb3JtdWxhID0gdGhpcy53ZWFwb24/LnN5c3RlbT8ucmFuZ2VbcmFuZ2VdPy5kYW1hZ2VcbiAgICBsZXQgZGIgPSB0aGlzLmFjdG9yLmRiXG4gICAgZGIgPSAoKGRiID8/ICcnKS50b1N0cmluZygpLnRyaW0oKSA9PT0gJycgPyAwIDogZGIpLnRvU3RyaW5nKCkudHJpbSgpXG5cbiAgICBpZiAoIWRiLnN0YXJ0c1dpdGgoJy0nKSkgZGIgPSAnKycgKyBkYlxuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hZGRiKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiXG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmFoZGIpIGZvcm11bGEgPSBmb3JtdWxhICsgJysgZmxvb3IoJyArIGRiICsgJy8yKSdcblxuICAgIGlmIChmb3JtdWxhKSB7XG4gICAgICBjb25zdCBtYXhEYW1hZ2UgPSBuZXcgUm9sbChmb3JtdWxhKS5ldmFsdWF0ZSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICBsZXQgcm9sbFN0cmluZ1xuICAgICAgaWYgKHRoaXMuY3JpdGljYWwpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1wYWxlKSB7XG4gICAgICAgICAgcm9sbFN0cmluZyA9IGZvcm11bGEgKyAnKycgKyBtYXhEYW1hZ2VcbiAgICAgICAgICByZXR1cm4gcm9sbFN0cmluZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXhEYW1hZ2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZvcm11bGFcbiAgICAgIH1cbiAgICB9IGVsc2UgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGFybW9yICgpIHtcbiAgICBpZiAodW5kZWZpbmVkICE9PSB0aGlzLl9hcm1vciAmJiB0aGlzLl9hcm1vciAhPT0gJycpIHJldHVybiB0aGlzLl9hcm1vclxuICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0QWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IudmFsdWVcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNldCBhcm1vciAoeCkge1xuICAgIHRoaXMuX2FybW9yID0geFxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IERhbWFnZUNhcmQgfSBmcm9tICcuL2RhbWFnZS5qcydcbmltcG9ydCB7IFJvbGxDYXJkIH0gZnJvbSAnLi9yb2xsLWNhcmQuanMnXG5cbmV4cG9ydCBjbGFzcyBPcHBvc2VkQ2hlY2tDYXJkIGV4dGVuZHMgUm9sbENhcmQge1xuICBzdGF0aWMgYXN5bmMgYmluZExpc3Rlcm5lcnMgKGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgLnRvZ2dsZS1zd2l0Y2gnLFxuICAgICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIClcbiAgICAvLyBzdXBlci5iaW5kTGlzdGVybmVycyggaHRtbCk7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5vcHBvc2VkIGEnLFxuICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQub3Bwb3NlZCBidXR0b24nLFxuICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0Q29uZmlnICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdENvbmZpZywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmh0bWwnLFxuICAgICAgdHlwZTogJ29wcG9zZWRDYXJkJ1xuICAgIH0pXG4gIH1cblxuICBnZXQgY29uZmlnICgpIHtcbiAgICByZXR1cm4gT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnXG4gIH1cblxuICBnZXQgYXR0YWNrZXJSb2xsICgpIHtcbiAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgYXR0YWNrZXIgPSB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIuaW5kZXggPT09IDAgfHwgci5hdHRhY2tlcilcbiAgICAgICAgaWYgKGF0dGFja2VyLmxlbmd0aCkgcmV0dXJuIGF0dGFja2VyWzBdXG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBkZWZlbmRlclJvbGwgKCkge1xuICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgaWYgKHRoaXMucm9sbHM/Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBkZWZlbmRlciA9IHRoaXMucm9sbHMuZmlsdGVyKHIgPT4gci5pbmRleCAhPT0gMCB8fCAhci5hdHRhY2tlcilcbiAgICAgICAgaWYgKGRlZmVuZGVyLmxlbmd0aCkgcmV0dXJuIGRlZmVuZGVyWzBdXG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBkZWZlbmRlcklzRG9kZ2luZyAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5kZWZlbmRlclJvbGw/LmFjdG9yPy5kb2RnZVNraWxsPy5uYW1lICYmXG4gICAgICB0aGlzLmRlZmVuZGVyUm9sbD8uc2tpbGw/Lm5hbWVcbiAgICApIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLmRvZGdlU2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICB0aGlzLmRlZmVuZGVyUm9sbC5za2lsbC5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgYWR2YW50YWdlQXR0YWNrZXIgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fYWEgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5kZWZlbmRlclJvbGwpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmRlZmVuZGVySXNEb2RnaW5nXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FhXG4gIH1cblxuICBnZXQgd2lubmVyUm9sbHNEYW1hZ2UgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY29tYmF0ICYmXG4gICAgICB0aGlzLnJvbGxzLmxlbmd0aCA+PSAyICYmXG4gICAgICB0aGlzLmhhc1dpbm5lciAmJlxuICAgICAgdGhpcy53aW5uZXI/Lml0ZW0/LnR5cGUgPT09ICd3ZWFwb24nXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHNldCBhZHZhbnRhZ2VBdHRhY2tlciAoeCkge1xuICAgIHRoaXMuX2FhID0gdHJ1ZVxuICAgIHRoaXMuX2FkID0gZmFsc2VcbiAgfVxuXG4gIGdldCBhZHZhbnRhZ2VEZWZlbmRlciAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9hZCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLmRlZmVuZGVySXNEb2RnaW5nXG4gICAgcmV0dXJuIHRoaXMuX2FkXG4gIH1cblxuICBzZXQgYWR2YW50YWdlRGVmZW5kZXIgKHgpIHtcbiAgICB0aGlzLl9hZCA9IHRydWVcbiAgICB0aGlzLl9hYSA9IGZhbHNlXG4gIH1cblxuICBnZXQgaXNUaWUgKCkge1xuICAgIHJldHVybiB0aGlzLndpbm5lckNvdW50ID4gMVxuICB9XG5cbiAgZ2V0IG5lZWRzVGllQnJlYWtlciAoKSB7XG4gICAgaWYgKCF0aGlzLmNvbWJhdCkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKFxuICAgICAgdGhpcy5hdHRhY2tlclJvbGwgJiZcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsICYmXG4gICAgICB0aGlzLmF0dGFja2VyUm9sbC5zdWNjZXNzTGV2ZWwgPT09IHRoaXMuZGVmZW5kZXJSb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgd2lubmVyQ291bnQgKCkge1xuICAgIGxldCBjb3VudCA9IDBcbiAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgaWYgKHIud2lubmVyKSBjb3VudCArPSAxXG4gICAgfVxuICAgIHJldHVybiBjb3VudFxuICB9XG5cbiAgZ2V0IGlzQXR0YWNrTWFuZXV2ZXIgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY29tYmF0ICYmXG4gICAgICB0aGlzLmF0dGFja2VyUm9sbCAmJlxuICAgICAgKCF0aGlzLmF0dGFja2VyUm9sbD8uaXRlbSB8fFxuICAgICAgICB0aGlzLmF0dGFja2VyUm9sbD8uaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ubW52cilcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHJlc3VsdFRleHQgKCkge1xuICAgIGlmICh0aGlzLmNvbWJhdCAmJiB0aGlzLmF0dGFja2VyUm9sbCAmJiB0aGlzLmRlZmVuZGVyUm9sbCkge1xuICAgICAgaWYgKCF0aGlzLmF0dGFja2VyUm9sbC53aW5uZXIgJiYgIXRoaXMuZGVmZW5kZXJSb2xsLndpbm5lcikge1xuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmF0dGFja2VyUm9sbC53aW5uZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0YWNrZXJSb2xsLm1hbmV1dmVyKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWFuZXV2ZXJTdWNjZXNzJywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5hdHRhY2tlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQXR0YWNrU3VjY2VzcycsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmF0dGFja2VyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5kZWZlbmRlclJvbGwud2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmRlZmVuZGVyUm9sbC5tYW5ldXZlcikge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRlZmVuZGVySXNEb2RnaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRG9kZ2VTdWNjZXNzJywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQXR0YWNrU3VjY2VzcycsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGFzeW5jIHByb2Nlc3MgKGRhdGEpIHtcbiAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XG4gICAgICBjYXNlICduZXcnOlxuICAgICAgICBpZiAoIXRoaXMucm9sbHM/Lmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuY29tYmF0ID0gZGF0YS5jb21iYXQgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICAgICAgICBkYXRhLnJvbGwuYXR0YWNrZXIgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRhdGEucm9sbC5pbmRleCA9IHRoaXMucm9sbHMubGVuZ3RoXG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncm9sbCc6XG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAndXBkYXRlUm9sbCc6XG4gICAgICAgIHRoaXMudXBkYXRlUm9sbChkYXRhKVxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgZWxzZSBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gIH1cblxuICBhc3luYyByb2xsIChyYW5rKSB7XG4gICAgYXdhaXQgdGhpcy5yb2xsc1tyYW5rXS5fcGVyZm9ybSgpXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHR5cGU6IHRoaXMuY29uZmlnLnR5cGUsXG4gICAgICBhY3Rpb246ICd1cGRhdGVSb2xsJyxcbiAgICAgIHJhbmssXG4gICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNXG4gICAgfVxuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIGRhdGEucm9sbCA9IHRoaXMucm9sbHNbcmFua10uSlNPTlJvbGxEYXRhXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IGEuZGF0YXNldC5hY3Rpb25cbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGkuYWN0b3Itcm9sbCcpXG4gICAgY29uc3QgbWVzc2FnZSA9IGEuY2xvc2VzdCgnLmNoYXQtbWVzc2FnZScpXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBhLmNsb3Nlc3QoJ2Rpdi5yb2xsLWNhcmQnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBPcHBvc2VkQ2hlY2tDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgY29uc3QgcmFuayA9IE51bWJlcihsaT8uZGF0YXNldD8ucmFuaylcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICd0b2dnbGUtY29tYmF0Jzoge1xuICAgICAgICBjYXJkLmNvbWJhdCA9ICFjYXJkLmNvbWJhdFxuICAgICAgICAvLyBpZiggIWNhcmQuYWR2YW50YWdlQXR0YWNrZXIgJiYgIWNhcmQuYWR2YW50YWdlRGVmZW5kZXIpIGNhcmQuYWR2YW50YWdlQXR0YWNrZXIgPSB0cnVlO1xuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmVtb3ZlLXJvbGwnOiB7XG4gICAgICAgIGNhcmQucmVtb3ZlUm9sbChyYW5rKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnY2xvc2UtY2FyZCc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1jaGVjayc6IHtcbiAgICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgICBpZiAoIWNhcmQucm9sbHNbcmFua10uYWN0b3JLZXkpIHtcbiAgICAgICAgICBjYXJkLnJvbGxzW3JhbmtdLmFjdG9yS2V5ID0gYCR7c3BlYWtlci5zY2VuZX0uJHtzcGVha2VyLnRva2VufWBcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjYXJkLnJvbGwocmFuaylcbiAgICAgICAgYXdhaXQgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtZGFtYWdlJzoge1xuICAgICAgICBjYXJkLmNsb3NlQ2FyZCgpXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBjb25zdCBkYW1hZ2VDaGF0Q2FyZCA9IG5ldyBEYW1hZ2VDYXJkKHtcbiAgICAgICAgICBjcml0aWNhbDogY2FyZC53aW5uZXIuaXNFeHRyZW1lU3VjY2VzcyxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgfSlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuYWN0b3JLZXkgPSBjYXJkLndpbm5lci5hY3Rvci5hY3RvcktleVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC50YXJnZXRLZXkgPSBjYXJkLmxvb3Nlci5hY3Rvci5hY3RvcktleVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5pdGVtSWQgPSBjYXJkLndpbm5lci5pdGVtSWRcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIGRhbWFnZUNoYXRDYXJkLm1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQ7XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgIHVwZGF0ZTogZmFsc2UsXG4gICAgICAgICAgZGF0YTogYS5kYXRhc2V0LFxuICAgICAgICAgIGNsYXNzZXM6IGEuY2xhc3NMaXN0LFxuICAgICAgICAgIHRhcmdldDogYVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IENvQzdDaGVjay5hbHRlcihjYXJkLnJvbGxzW3JhbmtdLCBhY3Rpb24sIG9wdGlvbnMpXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgYWN0aW9uOiAndXBkYXRlUm9sbCcsXG4gICAgICAgICAgcmFuayxcbiAgICAgICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgZGF0YS5yb2xsID0gY2FyZC5yb2xsc1tyYW5rXS5KU09OUm9sbERhdGFcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29tcHV0ZSAocmFuayA9IHVuZGVmaW5lZCkge1xuICAgIHRoaXMucm9sbHMgPSB0aGlzLnJvbGxzLmZpbHRlcihyb2xsID0+IHtcbiAgICAgIHJldHVybiB0eXBlb2Ygcm9sbC5hY3Rvci5hY3RvcktleSAhPT0gJ3VuZGVmaW5lZCcgLy8gcmVtb3ZlIGFueSBhY3RvcnMgdGhhdCBubyBsb25nZXIgZXhpc3RcbiAgICB9KVxuXG4gICAgaWYgKCFyYW5rKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGVsZXRlIHRoaXMucm9sbHNbaV0ubWFuZXV2ZXJcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMuY29tYmF0ICYmXG4gICAgICAgICAgKCF0aGlzLnJvbGxzW2ldLml0ZW0gfHxcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0uaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ubW52cikgJiZcbiAgICAgICAgICAoKHRoaXMucm9sbHNbaV0/LmFjdG9yPy5kb2RnZVNraWxsPy5uYW1lICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldPy5za2lsbD8ubmFtZSAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5hY3Rvci5kb2RnZVNraWxsLm5hbWUudG9Mb3dlckNhc2UoKSAhPT1cbiAgICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5za2lsbC5uYW1lLnRvTG93ZXJDYXNlKCkpIHx8XG4gICAgICAgICAgICAhdGhpcy5yb2xsc1tpXT8uYWN0b3I/LmRvZGdlU2tpbGw/Lm5hbWUpXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMucm9sbHNbaV0ubWFuZXV2ZXIgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucm9sbHNbaV0ucm9sbGVkKSB7XG4gICAgICAgICAgdGhpcy5yb2xsc1tpXS5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGxzW2ldLmdldEh0bWxSb2xsKHtcbiAgICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5yb2xsc1tyYW5rXS5yb2xsZWQpIHtcbiAgICAgICAgdGhpcy5yb2xsc1tyYW5rXS5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGxzW3JhbmtdLmdldEh0bWxSb2xsKHtcbiAgICAgICAgICBoaWRlRGljZVJlc3VsdDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgLy8gU29ydCBjb21iYXQgcm9sbHMgYnkgaW5kZXguXG4gICAgICB0aGlzLnJvbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEuaW5kZXggPiBiLmluZGV4KSByZXR1cm4gMVxuICAgICAgICBpZiAoYS5pbmRleCA8IGIuaW5kZXgpIHJldHVybiAtMVxuICAgICAgICByZXR1cm4gMFxuICAgICAgfSlcblxuICAgICAgLy8gQ29tYmF0IHJvbGwgaW5jbHVkZXMgb25seSAyIHBlcnNvbnMsIHJlbW92ZSB0aGUgcmVzdC5cbiAgICAgIGlmICh0aGlzLnJvbGxzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhpcy5yb2xscyA9IFt0aGlzLnJvbGxzWzBdLCB0aGlzLnJvbGxzWzFdXVxuICAgICAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgICAgIGRlbGV0ZSByLndpbm5lclxuICAgICAgICAgIGRlbGV0ZSByLnRpZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEZpcnN0IHBlcnNvbiBhZGRlZCBpcyB0aGUgYXR0YWNrZXIuXG4gICAgICBpZiAodGhpcy5yb2xsc1swXSkgdGhpcy5yb2xsc1swXS5hdHRhY2tlciA9IHRydWVcblxuICAgICAgaWYgKHRoaXMucm9sbHNbMF0/LnJvbGxlZCAmJiB0aGlzLnJvbGxzWzFdPy5yb2xsZWQpIHtcbiAgICAgICAgaWYgKHRoaXMucm9sbHNbMF0ucGFzc2VkIHx8IHRoaXMucm9sbHNbMV0ucGFzc2VkKSB7XG4gICAgICAgICAgaWYgKHRoaXMucm9sbHNbMF0uc3VjY2Vzc0xldmVsID4gdGhpcy5yb2xsc1sxXS5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgIHRoaXMucm9sbHNbMF0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsc1sxXS5zdWNjZXNzTGV2ZWwgPiB0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgICAgdGhpcy5yb2xsc1sxXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFkdmFudGFnZUF0dGFja2VyKSB0aGlzLnJvbGxzWzBdLndpbm5lciA9IHRydWVcbiAgICAgICAgICAgIGVsc2UgdGhpcy5yb2xsc1sxXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYS5yb2xsZWQgJiYgIWIucm9sbGVkKSByZXR1cm4gLTFcbiAgICAgICAgaWYgKCFhLnJvbGxlZCAmJiBiLnJvbGxlZCkgcmV0dXJuIDFcbiAgICAgICAgaWYgKCFhLnJvbGxlZCAmJiAhYi5yb2xsZWQpIHJldHVybiAwXG4gICAgICAgIGlmIChhLnN1Y2Nlc3NMZXZlbCA+IGIuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgfVxuICAgICAgICBpZiAoYS5zdWNjZXNzTGV2ZWwgPCBiLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3Bwb3NlZFJvbGxUaWVCcmVha2VyJykpIHtcbiAgICAgICAgICBpZiAoYS5tb2RpZmllZFJlc3VsdCA+IGIubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGEubW9kaWZpZWRSZXN1bHQgPCBiLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGEucmF3VmFsdWUgPiBiLnJhd1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhLnJhd1ZhbHVlIDwgYi5yYXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9KVxuXG4gICAgICB0aGlzLndpbkNvdW50ID0gMFxuICAgICAgaWYgKHRoaXMucm9sbHNbMF0gJiYgdGhpcy5yb2xsc1swXS5yb2xsZWQgJiYgIXRoaXMucm9sbHNbMF0uZmFpbGVkKSB7XG4gICAgICAgIHRoaXMud2luQ291bnQgPSAxXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0gJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0ucm9sbGVkICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCA9PT0gdGhpcy5yb2xsc1tpXS5zdWNjZXNzTGV2ZWwgJiZcbiAgICAgICAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvcHBvc2VkUm9sbFRpZUJyZWFrZXInKVxuICAgICAgICAgICAgICA/IHRoaXMucm9sbHNbMF0ubW9kaWZpZWRSZXN1bHQgPT09IHRoaXMucm9sbHNbaV0ubW9kaWZpZWRSZXN1bHRcbiAgICAgICAgICAgICAgOiB0aGlzLnJvbGxzWzBdLnJhd1ZhbHVlID09PSB0aGlzLnJvbGxzW2ldLnJhd1ZhbHVlKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy53aW5Db3VudCA9IHRoaXMud2luQ291bnQgKyAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnJvbGxzW2ldLndpbm5lciA9IGkgPCB0aGlzLndpbkNvdW50XG4gICAgICAgIHRoaXMucm9sbHNbaV0udGllID0gdGhpcy5yb2xsc1tpXS53aW5uZXIgJiYgdGhpcy53aW5Db3VudCA+IDFcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjbG9zZUNhcmQgKCkge1xuICAgIHRoaXMuY2xvc2VkID0gdHJ1ZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUgKi9cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgdGhpcy5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbE1vZGUpIHJldHVybiBudWxsXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5hY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuaXRlbUlkKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRlZFRva2VucyAoKSB7XG4gICAgcmV0dXJuIFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSByZXR1cm4gdGhpcy50YXJnZXRUb2tlblxuICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yXG4gIH1cblxuICAvKipcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgKi9cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICBpZiAodGhpcy5fdGFyZ2V0S2V5KSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSB0aGlzLnRhcmdldGVkVG9rZW5zLnBvcCgpXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VG9rZW5cbiAgfVxuXG4gIGdldCB0YXJnZXRBY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHRoaXMuX3RhcmdldEFjdG9yID0gdGhpcy50YXJnZXRUb2tlbi5hY3RvclxuICAgICAgZWxzZSB0aGlzLl90YXJnZXRBY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuX3RhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IHRhcmdldEtleSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLl90YXJnZXRLZXlcbiAgfVxuXG4gIGdldCBoYXNUYXJnZXQgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHNldCB0YXJnZXRLZXkgKHgpIHtcbiAgICB0aGlzLl90YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5nZXRXZWFwb25Ta2lsbHModGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgdGFyZ2V0SW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLnRhcmdldEtleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHRhcmdldE5hbWUgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXQpIHJldHVybiAnZHVtbXknXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm5hbWVcbiAgfVxuXG4gIGdldCBhY3RvckltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgYXN5bmMgc2F5IChtZXNzYWdlLCBmbGF2b3IgPSBudWxsKSB7XG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgICAgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuLmRvY3VtZW50XG4gICAgICB9XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBmbGF2b3IsXG4gICAgICBjb250ZW50OiBtZXNzYWdlXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICApIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKSAvLyBDaGFuZ2UgZm9yIHVzZXJcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuaW1wb3J0IHsgY3JlYXRlSW5saW5lUm9sbCwgY2hhdEhlbHBlciB9IGZyb20gJy4uL2hlbHBlci5qcydcblxuZnVuY3Rpb24gcmVwbGFjZXIgKGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuXG4gIGNvbnN0IGV4Y2x1ZGUgPSBbJ19hY3RvciddXG4gIGlmIChleGNsdWRlLmluY2x1ZGVzKGtleSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBjb25zdCBjaGVja3MgPSBbJ3NhbkNoZWNrJywgJ2ludENoZWNrJ11cbiAgaWYgKGNoZWNrcy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgcmV0dXJuIHZhbHVlLkpTT05Sb2xsRGF0YVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG5leHBvcnQgY2xhc3MgU2FuQ2hlY2tDYXJkIGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIHNhbkRhdGEgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoXG4gICAgICBhY3RvcktleSxcbiAgICAgIHR5cGVvZiBvcHRpb25zLmZhc3RGb3J3YXJkICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IEJvb2xlYW4ob3B0aW9ucy5mYXN0Rm9yd2FyZClcbiAgICAgICAgOiBmYWxzZVxuICAgIClcbiAgICBzYW5EYXRhLnNhblJlYXNvbiA9IHNhbkRhdGEuc2FuUmVhc29uID8/ICcnXG4gICAgdGhpcy5zYW5EYXRhID0gc2FuRGF0YVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBpZiAoc2FuRGF0YS5tb2RpZmllciAmJiAhaXNOYU4oTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbk1vZGlmaWVyID0gTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpXG4gICAgfVxuICAgIGlmIChzYW5EYXRhLmRpZmZpY3VsdHkgJiYgIWlzTmFOKE51bWJlcihzYW5EYXRhLmRpZmZpY3VsdHkpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgPSBOdW1iZXIoc2FuRGF0YS5kaWZmaWN1bHR5KVxuICAgIH1cbiAgICB0aGlzLnN0YXRlID0ge31cbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMub3B0aW9ucy5pc0JsaW5kICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyBCb29sZWFuKHRoaXMub3B0aW9ucy5pc0JsaW5kKVxuICAgICAgOiBzdXBlci5pc0JsaW5kXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gdGhpcy5vcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5vcHRpb25zLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyB0aGlzLm9wdGlvbnMubW9kaWZpZXJcbiAgICAgIDogMFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NTb3VyY2UgKCkge1xuICAgIGlmICghdGhpcy5zYW5EYXRhLnRva2VuS2V5KSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLnNhbkRhdGEudG9rZW5LZXkpXG4gIH1cblxuICBnZXQgaW52b2x1bnRhcnlBY3Rpb24gKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkICYmXG4gICAgICAodGhpcy5zYW5DaGVjay5pc0ZhaWx1cmUgfHwgdGhpcy5zYW5DaGVjay5pc0Z1bWJsZSlcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHNhbkxvc3NGb3JtdWxhICgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5zYW5Sb2xsZWQpIHtcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuTWF4ICYmIHRoaXMuc2FuQ2hlY2suZmFpbGVkKSB7XG4gICAgICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpKVxuICAgICAgICAgID8gTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpXG4gICAgICAgICAgOiB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhbk1pbiAmJiB0aGlzLnNhbkNoZWNrLnBhc3NlZCkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKSlcbiAgICAgICAgICA/IE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKVxuICAgICAgICAgIDogdGhpcy5zYW5EYXRhLnNhbk1pblxuICAgICAgfVxuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzYW5Mb3N0VG9SZWFzb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLnNhbkxvc3RUb1JlYXNvbih0aGlzLnNhbkRhdGEuc2FuUmVhc29uKVxuICB9XG5cbiAgZ2V0IG1heFBvc3NpYmxlU2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICApXG4gIH1cblxuICBnZXQgbWF4U2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuRGF0YS5zYW5NYXgudG9TdHJpbmcoKSkuZXZhbHVhdGUoe1xuICAgICAgbWF4aW1pemU6IHRydWVcbiAgICB9KS50b3RhbFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3Iuc2FuTG9zc1JlYXNvbkVuY291bnRlcmVkKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24pXG4gIH1cblxuICBnZXQgZmlyc3RFbmNvdW50ZXIgKCkge1xuICAgIHJldHVybiAhdGhpcy5hY3Rvci5teXRob3NJbnNhbml0eUV4cGVyaWVuY2VkXG4gIH1cblxuICBnZXQgaXNBY3Rvckxvb3NpbmdTYW4gKCkge1xuICAgIC8vIE5vIHNhbiBsb3NzIGR1cmluZyBib3V0IG9mIG1hZC5cbiAgICBpZiAodGhpcy5hY3Rvci5oYXNUZW1wb0luc2FuZSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLy8gVGhlIHNhbiBsb3NzIGlzIGEgMFxuICAgIGlmICh0aGlzLnNhbkxvc3NGb3JtdWxhID09PSAwKSByZXR1cm4gZmFsc2VcblxuICAgIGlmIChcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24gJiZcbiAgICAgIHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICApID09PSAwXG4gICAgKSB7XG4gICAgICB0aGlzLnN0YXRlLmltbXVuZVRvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IGJvdXREdXJhdGlvblRleHQgKCkge1xuICAgIGlmICh0aGlzLmJvdXREdXJhdGlvbikge1xuICAgICAgaWYgKHRoaXMuYm91dFJlYWxUaW1lKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmJvdXREdXJhdGlvbn0gJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucm91bmRzJyl9YFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYm91dFN1bW1hcnkpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuYm91dER1cmF0aW9ufSAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpfWBcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB5b3VHYWluQ3RodWxodU15dGhvc1N0cmluZyAoKSB7XG4gICAgaWYgKHRoaXMubXl0aG9zR2Fpbikge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuWW91R2FpbmVkQ3RodWxodU15dGhvcycsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMubXl0aG9zR2FpblxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGFkdmFuY2VTdGF0ZSAoc3RhdGUpIHtcbiAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICBjYXNlICdrZWVwQ3JlYXR1cmVTYW5EYXRhJzoge1xuICAgICAgICB0aGlzLnN0YXRlLmtlZXBDcmVhdHVyZVNhbkRhdGEgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdpbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCc6IHtcbiAgICAgICAgdGhpcy5zdGF0ZVtzdGF0ZV0gPSB0cnVlXG4gICAgICAgIGlmICghdGhpcy5pc0FjdG9yTG9vc2luZ1NhbikgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdzYW5Mb3NzQXBwbGllZCc6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHBseVNhbkxvc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZW50ZXJCb3V0T2ZNYWRuZXNzUmVhbFRpbWUnOiB7XG4gICAgICAgIHRoaXMuYm91dER1cmF0aW9uID0gKGF3YWl0IG5ldyBSb2xsKCcxRDEwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgICAgICB0aGlzLmJvdXRSZWFsVGltZSA9IHRydWVcbiAgICAgICAgdGhpcy5ib3V0U3VtbWFyeSA9IGZhbHNlXG4gICAgICAgIHRoaXMuYm91dFJlc3VsdCA9IGF3YWl0IHRoaXMuYWN0b3IuZW50ZXJCb3V0T2ZNYWRuZXNzKFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgdGhpcy5ib3V0RHVyYXRpb25cbiAgICAgICAgKVxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NSZXNvbHZlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdlbnRlckJvdXRPZk1hZG5lc3NTdW1tYXJ5Jzoge1xuICAgICAgICB0aGlzLmJvdXREdXJhdGlvbiA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgICAgdGhpcy5ib3V0UmVhbFRpbWUgPSBmYWxzZVxuICAgICAgICB0aGlzLmJvdXRTdW1tYXJ5ID0gdHJ1ZVxuICAgICAgICB0aGlzLmJvdXRSZXN1bHQgPSBhd2FpdCB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyhcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICB0aGlzLmJvdXREdXJhdGlvblxuICAgICAgICApXG4gICAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc1Jlc29sdmVkID0gdHJ1ZVxuICAgICAgICBhd2FpdCB0aGlzLnRyaWdnZXJJbnNhbml0eSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdib3V0T2ZNYWRuZXNzT3Zlcic6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSlcbiAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VySW5zYW5pdHkoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnbm9NeXRob3NHYWluZWQnOiB7XG4gICAgICAgIHRoaXMuc3RhdGUuY3RodWxodU15dGhvc0F3YXJkZWQgPSB0cnVlXG4gICAgICAgIHRoaXMubXl0aG9zR2FpbiA9IDBcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2N0aHVsaHVNeXRob3NBd2FyZGVkJzoge1xuICAgICAgICBsZXQgYW1vdW50R2FpbmVkID0gMVxuICAgICAgICBpZiAoIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCkge1xuICAgICAgICAgIGFtb3VudEdhaW5lZCA9IDVcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLmV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5KClcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlLmN0aHVsaHVNeXRob3NBd2FyZGVkID0gdHJ1ZVxuICAgICAgICBjb25zdCBjdGh1bGh1TXl0aG9zU2tpbGwgPSB0aGlzLmFjdG9yLmN0aHVsaHVNeXRob3NTa2lsbFxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9XG4gICAgICAgICAgY3RodWxodU15dGhvc1NraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlIHx8IDBcbiAgICAgICAgaWYgKGN0aHVsaHVNeXRob3NTa2lsbCkge1xuICAgICAgICAgIGF3YWl0IGN0aHVsaHVNeXRob3NTa2lsbC51cGRhdGUoe1xuICAgICAgICAgICAgJ2RhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IG9sZFZhbHVlICsgYW1vdW50R2FpbmVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm15dGhvc0dhaW4gPSBhbW91bnRHYWluZWRcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBieXBhc3NSb2xsU2FuICgpIHtcbiAgICB0aGlzLmlzQnlwYXNzZWQgPSB0cnVlXG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuaWdub3JlU2FuQ2hlY2sgPSB0cnVlXG4gICAgdGhpcy5zYW5Mb3NzID0gdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICB9XG5cbiAgYXN5bmMgcm9sbFNhbiAoKSB7XG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgaWYgKCF0aGlzLmlzQWN0b3JMb29zaW5nU2FuKSB7XG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmFjdG9yLmhhc1RlbXBvSW5zYW5lKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW1tdW5lQWxyZWFkeUluQm91dCA9IHRydWVcbiAgICAgICAgaWYgKCF0aGlzLnNhbkNoZWNrLnBhc3NlZCkgdGhpcy5zdGF0ZS5maW5pc2ggPSBmYWxzZVxuICAgICAgfVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzQXBwbGllZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXG4gICAgICB0aGlzLnNhbkxvc3MgPSAwXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5zYW5Mb3NzRm9ybXVsYSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgICAgdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICAgICAgICApXG4gICAgICAgIGlmICh0aGlzLnNhbkxvc3MgPCB0aGlzLnNhbkxvc3NGb3JtdWxhKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5saW1pdGVkTG9zc1RvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuc2FuTG9zc0Zvcm11bGFcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuc2FuQ2hlY2suaXNGdW1ibGUpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICApXG4gICAgfSBlbHNlIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICBjb25zdCBtaW4gPSBuZXcgUm9sbCh0aGlzLnNhbkxvc3NGb3JtdWxhKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1pbmltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgICAgY29uc3QgbWF4ID0gdGhpcy5hY3Rvci5tYXhMb3NzVG9TYW5SZWFzb24oXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICAgIClcbiAgICAgIGlmIChtaW4gPj0gbWF4KSB7XG4gICAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zYW5Mb3NzID0gbWF4XG4gICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxTYW5Mb3NzICgpIHtcbiAgICB0aGlzLnNhbkxvc3NSb2xsID0gbmV3IFJvbGwoYCR7dGhpcy5zYW5Mb3NzRm9ybXVsYX1gKVxuXG4gICAgYXdhaXQgdGhpcy5zYW5Mb3NzUm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcblxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuc2FuTG9zc1JvbGwpXG5cbiAgICBjb25zdCBtYXggPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zc1JvbGwudG90YWwgPiBtYXgpIHtcbiAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuc2FuTG9zcyA9IE1hdGgubWluKHRoaXMuc2FuTG9zc1JvbGwudG90YWwsIG1heClcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gIH1cblxuICBhc3luYyBhcHBseVNhbkxvc3MgKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3IubG9vc2VTYW4odGhpcy5zYW5EYXRhLnNhblJlYXNvbiwgdGhpcy5zYW5Mb3NzKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA+IDApIHRoaXMuc3RhdGUuYWN0b3JMb3N0U2FuID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuc2FuTG9zc0FwcGxpZWQgPSB0cnVlXG4gICAgaWYgKHRoaXMuYWN0b3Iuc2FuIDw9IDApIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IHRydWVcblxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUucGVybWFuZW50bHlJbnNhbmUgPSB0cnVlXG5cbiAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA8IDUpIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuYWN0b3IuaGFzSW5kZWZJbnNhbmUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rvci5kYWlseVNhbkxvc3MgPj0gdGhpcy5hY3Rvci5kYWlseVNhbkxpbWl0KSB7XG4gICAgICAvLyB0aGlzLmFjdG9yLnNhbi81XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLnRlbXBvcmFyeUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbEludCAoKSB7XG4gICAgdGhpcy5pbnRDaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuaW50Q2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5pbnRDaGVjay5jaGFyYWN0ZXJpc3RpYyA9ICdpbnQnXG4gICAgdGhpcy5pbnRDaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMub3B0aW9ucy5pbnREaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIHRoaXMuaW50Q2hlY2suZGljZU1vZGlmaWVyID0gdGhpcy5vcHRpb25zLmludE1vZGlmaWVyIHx8IDBcbiAgICBhd2FpdCB0aGlzLmludENoZWNrLl9wZXJmb3JtKHsgZm9yY2VEU046IHRydWUgfSlcbiAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICBpZiAodGhpcy5pbnRDaGVjay5wYXNzZWQgfHwgdGhpcy5zdGF0ZS5hbHJlYWR5SW5zYW5lKSB7XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB0cmlnZ2VySW5zYW5pdHkgKCkge1xuICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXG4gICAgaWYgKHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lKSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gIH1cblxuICBhc3luYyBjbGVhclNhbkxvc3NSZWFzb24gKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0UmVhc29uU2FuTG9zcyh0aGlzLnNhbkRhdGEuc2FuUmVhc29uLCAwKVxuICAgIGlmICghdGhpcy5zYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQpIHtcbiAgICAgIHRoaXMuc3RhdGUua2VlcENyZWF0dXJlU2FuRGF0YSA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgLy8gQXR0YWNoZSB0aGUgc2FuQ2hlY2sgcmVzdWx0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGlmICh0aGlzLnN0YXRlLnNhblJvbGxlZCkge1xuICAgICAgdGhpcy5fX2lubGluZVNhbkNoZWNrID0gdGhpcy5zYW5DaGVjay5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zYW5Mb3NzUm9sbCkge1xuICAgICAgY29uc3QgYSA9IGNyZWF0ZUlubGluZVJvbGwodGhpcy5zYW5Mb3NzUm9sbClcbiAgICAgIHRoaXMuX19pbmxpbmVTYW5Mb3NzUm9sbCA9IGEub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuaW50Um9sbGVkICYmIHRoaXMuaW50Q2hlY2spIHtcbiAgICAgIHRoaXMuX19pbmxpbmVJbnRDaGVjayA9IHRoaXMuaW50Q2hlY2suaW5saW5lQ2hlY2sub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeSh0aGlzLCByZXBsYWNlcikpXG5cbiAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2UuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9zYW4tY2hlY2suaHRtbCdcbiAgfVxuXG4gIHN0YXRpYyBjaGVja1RhcmdldHMgKHNhbkRhdGEsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCB0YXJnZXRzID0gWy4uLmdhbWUudXNlci50YXJnZXRzXVxuICAgIGlmICh0YXJnZXRzLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCB0IG9mIHRhcmdldHMpIHtcbiAgICAgICAgaWYgKHQuYWN0b3IuaXNUb2tlbikge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci50b2tlbktleSwgc2FuRGF0YSwge1xuICAgICAgICAgICAgZmFzdEZvcndhcmRcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci5pZCwgc2FuRGF0YSwgeyBmYXN0Rm9yd2FyZCB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vVGFyZ2V0c1NhbkNoZWNrJykpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoLi4uYXJncykge1xuICAgIGNvbnN0IGNoYXRDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCguLi5hcmdzKVxuICAgIGlmIChjaGF0Q2FyZC5hY3Rvci5oYXNJbmRlZkluc2FuZSkge1xuICAgICAgY2hhdENhcmQuc3RhdGUuYWxyZWFkeUluc2FuZSA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoY2hhdENhcmQuYWN0b3Iuc2FuIDw9IDApIHtcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gdHJ1ZVxuXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIGNoYXRDYXJkLnN0YXRlLnBlcm1hbmVudGx5SW5zYW5lID0gdHJ1ZVxuXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgY2hhdENhcmQpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShjaGF0Q2FyZCwgcmVwbGFjZXIpKVxuICAgIGF3YWl0IGNoYXRDYXJkLnNheShodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MKVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgY29uc3QgaHRtbE1lc3NhZ2UgPSAkLnBhcnNlSFRNTChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBodG1sQ2FyZCA9IGh0bWxNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWNhcmQnKVxuXG4gICAgcmV0dXJuIFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChodG1sQ2FyZClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHNhbkNoZWNrQ2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuXG4gICAgY29uc3Qgc2FuQ2hlY2tDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCgpXG4gICAgT2JqZWN0LmFzc2lnbihzYW5DaGVja0NhcmQsIHNhbkNoZWNrQ2FyZERhdGEpXG4gICAgaWYgKCFzYW5DaGVja0NhcmQubWVzc2FnZUlkKSB7XG4gICAgICBzYW5DaGVja0NhcmQubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfVxuXG4gICAgaWYgKHNhbkNoZWNrQ2FyZC5zYW5DaGVjaz8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBzYW5DaGVja0NhcmQuc2FuQ2hlY2sgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICBuZXcgQ29DN0NoZWNrKCksXG4gICAgICAgIHNhbkNoZWNrQ2FyZC5zYW5DaGVja1xuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChzYW5DaGVja0NhcmQuaW50Q2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgc2FuQ2hlY2tDYXJkLmludENoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IENvQzdDaGVjaygpLFxuICAgICAgICBzYW5DaGVja0NhcmQuaW50Q2hlY2tcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbCA9IFJvbGwuZnJvbURhdGEoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsKVxuICAgIH1cblxuICAgIHJldHVybiBzYW5DaGVja0NhcmRcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5cbmV4cG9ydCBjbGFzcyBTYW5EYXRhRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnOmNoZWNrYm94JykuY2xpY2soKCkgPT4gdGhpcy5fdG9nZ2xlSW5wdXQoaHRtbCkpXG4gIH1cblxuICBfdG9nZ2xlSW5wdXQgKGh0bWwpIHtcbiAgICBodG1sLmZpbmQoJypbbmFtZT1cImN1c3RvbW5hbWVcIl0nKS50b2dnbGUoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9zYW5kYXRhLmh0bWwnLFxuICAgICAgb3B0aW9uc1xuICAgIClcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBTYW5EYXRhRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2FuRGF0YVNlbGVjdGlvbldpbmRvd05hbWVkJywge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuRGF0YVNlbGVjdGlvbldpbmRvdycpLCAvLyBUT0RPOiBSZW1vdmUgU2FuRGF0YVNlbGVjdGlvbldpbmRvd05hbWVkXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICBWYWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNzYW4tZGF0YS1mb3JtJykpXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ1ZhbGlkYXRlJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q29udGVudExpbmtEaWFsb2cgfSBmcm9tICcuL2NvYzctY29udGVudC1saW5rLWRpYWxvZy5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4vcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgU2FuRGF0YURpYWxvZyB9IGZyb20gJy4vc2FuZGF0YS1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGF0TWVzc2FnZSB7XG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0FUVFJJQlVURSAoKSB7XG4gICAgcmV0dXJuICdSL0FUJ1xuICB9XG5cbiAgc3RhdGljIGdldCBST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMgKCkge1xuICAgIHJldHVybiAnUi9DSCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0NPTUJBVCAoKSB7XG4gICAgcmV0dXJuICdSL0NPJ1xuICB9XG5cbiAgc3RhdGljIGdldCBST0xMX1RZUEVfU0tJTEwgKCkge1xuICAgIHJldHVybiAnUi9TSydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0VOQ09VTlRFUiAoKSB7XG4gICAgcmV0dXJuICdSL0VDJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfQ09NQklORUQgKCkge1xuICAgIHJldHVybiAnQy9DTydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX0dST1VQICgpIHtcbiAgICByZXR1cm4gJ0MvR1InXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9OT1JNQUwgKCkge1xuICAgIHJldHVybiAnQy9OTydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX09QUE9TRUQgKCkge1xuICAgIHJldHVybiAnQy9PUCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX1NBTl9DSEVDSyAoKSB7XG4gICAgcmV0dXJuICdDL1NDJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfTk9ORSAoKSB7XG4gICAgcmV0dXJuICdDL05PJ1xuICB9XG5cbiAgLy8gc3RhdGljIGdldCBST0xMX1RPX0NIQVQgKCkge1xuICAvLyAgIHJldHVybiAnUi9DSCdcbiAgLy8gfVxuXG4gIC8vIHN0YXRpYyBnZXQgUk9MTF9UT19DTElQQk9BUkQgKCkge1xuICAvLyAgIHJldHVybiAnUi9DTCdcbiAgLy8gfVxuXG4gIHN0YXRpYyBjYXJkVHlwZXMgKGNvbmZpZykge1xuICAgIGlmIChjb25maWcucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICBjb25zdCBzZWxlY3QgPSB7XG4gICAgICBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxdOiAnQ29DNy5SZWd1bGFyUm9sbENhcmQnLFxuICAgICAgW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORURdOiAnQ29DNy5Db21iaW5lZFJvbGxDYXJkJyxcbiAgICAgIFtDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRURdOiAnQ29DNy5PcHBvc2VkUm9sbENhcmQnXG4gICAgICAvLyBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9HUk9VUF06ICdDb0M3Lkdyb3VwUm9sbENhcmQnIC0gTllJXG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNvbmZpZy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUgJiZcbiAgICAgIGNvbmZpZy5hdHRyaWJ1dGUgPT09ICdzYW4nXG4gICAgKSB7XG4gICAgICBzZWxlY3RbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tdID0gJ0NvQzcuU2FuaXR5TG9zc0VuY291bnRlcidcbiAgICB9XG4gICAgcmV0dXJuIHNlbGVjdFxuICB9XG5cbiAgc3RhdGljIG5vcm1hbGl6ZVJlcXVlc3QgKG9wdGlvbnMpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5ldmVudCA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBvcHRpb25zLmNhcmRUeXBlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIG9wdGlvbnMuYWN0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAodHlwZW9mIG9wdGlvbnMuc2tpbGxJZCAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGUgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmNoYXJhY3RlcmlzdGljICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBvcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUilcbiAgICApIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5za2lsbElkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAob3B0aW9ucy5hY3Rvci5pdGVtcy5nZXQob3B0aW9ucy5za2lsbElkKSkge1xuICAgICAgICAgIG9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBza2lsbElkcyA9IG9wdGlvbnMuYWN0b3IuZ2V0U2tpbGxzQnlOYW1lKG9wdGlvbnMuc2tpbGxOYW1lKVxuICAgICAgICBpZiAoc2tpbGxJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIG9wdGlvbnMuc2tpbGxJZCA9IHNraWxsSWRzWzBdLmlkXG4gICAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTExcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBbJ2xjaycsICdzYW4nXS5pbmNsdWRlcyhvcHRpb25zLmF0dHJpYnV0ZSlcbiAgICAgICkge1xuICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmNoYXJhY3RlcmlzdGljICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW1xuICAgICAgICAgIG9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICkge1xuICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5ldmVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHR5cGVvZiBvcHRpb25zLmNhcmRUeXBlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgdHlwZW9mIG9wdGlvbnMucm9sbFR5cGUgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90Rm91bmQnLCB7XG4gICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsJylcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAhW1xuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVELFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0dST1VQLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VELFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgXS5pbmNsdWRlcyhvcHRpb25zLmNhcmRUeXBlKVxuICAgICkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JJbnZhbGlkQ2FyZFR5cGUnKVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChcbiAgICAgICFbXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUlxuICAgICAgXS5pbmNsdWRlcyhvcHRpb25zLnJvbGxUeXBlKVxuICAgICkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JJbnZhbGlkUm9sbFR5cGUnKVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgY2FyZFR5cGU6IG9wdGlvbnMuY2FyZFR5cGUsXG4gICAgICAgIHNoaWZ0S2V5OiBvcHRpb25zLmZhc3RGb3J3YXJkID8/IG9wdGlvbnMuZXZlbnQ/LnNoaWZ0S2V5ID8/IG9wdGlvbnMuZmFzdEZvcndhcmQgPz8gZmFsc2UsXG4gICAgICAgIGFsdEtleTogb3B0aW9ucy5ldmVudD8uYWx0S2V5ID8/IGZhbHNlLFxuICAgICAgICBpc0N0cmxLZXk6IGlzQ3RybEtleShvcHRpb25zLmV2ZW50ID8/IGZhbHNlKSxcbiAgICAgICAgY3JlYXRlRW5jb3VudGVyOiBvcHRpb25zLmNyZWF0ZUVuY291bnRlciA/PyBmYWxzZSxcbiAgICAgICAgb3BlbkxpbmtUb29sOiBvcHRpb25zLm9wZW5MaW5rVG9vbCA/PyBmYWxzZSxcbiAgICAgICAgc2VuZFRvQ2hhdDogb3B0aW9ucy5zZW5kVG9DaGF0ID8/IGZhbHNlLFxuICAgICAgICBzZW5kVG9DbGlwYm9hcmQ6IG9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID8/IGZhbHNlLFxuICAgICAgICBpc0NvbWJhdDpcbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdD8uY29udGFpbnMoJ2NvbWJhdCcpID8/IGZhbHNlLFxuICAgICAgICBwcmV2ZW50U3RhbmRieTogb3B0aW9ucy5wcmV2ZW50U3RhbmRieSA/PyBmYWxzZSxcbiAgICAgICAgYm9udXNEaWNlOiAwXG4gICAgICB9LFxuICAgICAgZGlhbG9nT3B0aW9uczoge1xuICAgICAgICByb2xsVHlwZTogb3B0aW9ucy5yb2xsVHlwZSxcbiAgICAgICAgY2FyZFR5cGU6IG9wdGlvbnMuY2FyZFR5cGUsXG4gICAgICAgIGF0dHJpYnV0ZTogJycsXG4gICAgICAgIGNoYXRNZXNzYWdlOiBvcHRpb25zLmNoYXRNZXNzYWdlID8/IHRydWUsXG4gICAgICAgIGZvcmNlZENhcmRUeXBlOiBvcHRpb25zLmZvcmNlZENhcmRUeXBlID8/IGZhbHNlLFxuICAgICAgICBoaWRlRGlmZmljdWx0eTogb3B0aW9ucy5oaWRlRGlmZmljdWx0eSA/PyBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlKSB7XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEw6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUM6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUjpcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuc2tpbGxJZCA9XG4gICAgICAgICAgb3B0aW9ucy5za2lsbElkID8/XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuaXRlbUlkID1cbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJyk/LmRhdGFzZXQuaXRlbUlkXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljID1cbiAgICAgICAgICBvcHRpb25zLmNoYXJhY3RlcmlzdGljID8/XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlID1cbiAgICAgICAgICBvcHRpb25zLmF0dHJpYnV0ZSA/P1xuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYlxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5hdHRyaWJ1dGUgPSBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGVcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3JJZCA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkID8/XG4gICAgICAgICAgb3B0aW9ucy5hY3Rvci5pZFxuICAgICAgICBjb25maWcub3B0aW9ucy50b2tlbktleSA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC50b2tlbklkID8/XG4gICAgICAgICAgb3B0aW9ucy5hY3Rvci50b2tlbktleVxuICAgICAgICBjb25maWcub3B0aW9ucy53ZWFwb25BbHRTa2lsbCA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2FsdGVybmF0aXYtc2tpbGwnKVxuICAgICAgICBjb25maWcub3B0aW9ucy5hY3RvciA9IG9wdGlvbnMuYWN0b3JcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMICYmXG4gICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDb21iYXRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLml0ZW1zLmdldChjb25maWcub3B0aW9ucy5pdGVtSWQpXG4gICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLndlYXBvbk5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBjb25maWcub3B0aW9ucy5hY3RvcklkID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICh0eXBlb2YgY29uZmlnLm9wdGlvbnMudG9rZW5LZXkgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0eXBlb2YgY29uZmlnLm9wdGlvbnMuYWN0b3IgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICApIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yQWN0b3InKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMICYmXG4gICAgICAgICAgdHlwZW9mIGNvbmZpZy5vcHRpb25zLnNraWxsSWQgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU2tpbGwnKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XG4gICAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWMnKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICFnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICAgICAgIWNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbXG4gICAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBdPy52YWx1ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgIWdhbWUudXNlci5pc0dNICYmXG4gICAgICAgICAgICAhY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXVxuICAgICAgICAgICAgICA/LnZhbHVlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuaXRlbUlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuV2VhcG9uJylcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLm9wdGlvbnMuYWx0S2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLm9wdGlvbnMuaGFzUGxheWVyT3duZXIgPVxuICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9yLmhhc1BsYXllck93bmVyID8/IGZhbHNlXG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT1cbiAgICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIgPVxuICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDdHJsS2V5XG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIgPVxuICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDdHJsS2V5XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZhbHNlXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gMFxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5ID1cbiAgICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHkgPz9cbiAgICAgICAgICBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsW1xuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScpXG4gICAgICAgICAgXVxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyID0gMFxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSAwXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHJldHVybiBjb25maWdcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0cmlnZ2VyIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjb25maWcgPSBDb0M3Q2hhdE1lc3NhZ2Uubm9ybWFsaXplUmVxdWVzdChvcHRpb25zKVxuICAgIGlmIChjb25maWcgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKFxuICAgICAgKGNvbmZpZy5vcHRpb25zLmlzQ3RybEtleSkgJiZcbiAgICAgIGdhbWUudXNlci5pc0dNICYmXG4gICAgICBbXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgXS5pbmNsdWRlcyhjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSlcbiAgICApIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS5jcmVhdGVMaW5rKGNvbmZpZylcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgKGNvbmZpZy5vcHRpb25zLnNlbmRUb0NoYXQgfHwgY29uZmlnLm9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkIHx8IGNvbmZpZy5vcHRpb25zLm9wZW5MaW5rVG9vbCB8fCBjb25maWcub3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIpICYmXG4gICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FID09PSBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZVxuICAgICkge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLmNyZWF0ZUxpbmsoY29uZmlnKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmFjdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBib251c0RpY2UgPSBjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0/LmF0dHJpYnM/Lltjb25maWcub3B0aW9ucy5hdHRyaWJ1dGVdPy5ib251c0RpY2VcbiAgICAgICAgICBpZiAoYm9udXNEaWNlKSB7XG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IGJvbnVzRGljZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgYm9udXNEaWNlID0gY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtPy5jaGFyYWN0ZXJpc3RpY3M/Lltjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpY10/LmJvbnVzRGljZVxuICAgICAgICAgIGlmIChib251c0RpY2UpIHtcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gYm9udXNEaWNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5pdGVtSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgaXRlbU1vZGlmaWVycyA9IE9iamVjdC52YWx1ZXMoY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLnNraWxscykuZmluZChrID0+IGsuZm91bmRyeUlEID09PSBjb25maWcub3B0aW9ucy5pdGVtSWQpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtTW9kaWZpZXJzLmJvbnVzRGljZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gaXRlbU1vZGlmaWVycy5ib251c0RpY2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBNYXRoLm1pbihNYXRoLm1heChjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciwgLTIpLCAyKVxuICAgICAgfVxuICAgICAgaWYgKCFjb25maWcub3B0aW9ucy5zaGlmdEtleSkge1xuICAgICAgICBhd2FpdCBDb0M3Q2hhdE1lc3NhZ2UuY3JlYXRlUm9sbChjb25maWcpXG4gICAgICB9XG4gICAgICByZXR1cm4gQ29DN0NoYXRNZXNzYWdlLnJ1blJvbGwoY29uZmlnKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVMaW5rIChjb25maWcpIHtcbiAgICBzd2l0Y2ggKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlKSB7XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVDpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTDpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVI6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBsaW5rRGF0YSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdDb0M3TGluaydcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tcbiAgICAgICAgICAgIGxpbmtEYXRhLmxpbmtUeXBlID0gQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMXG4gICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMuYWN0b3IuaXRlbXMuZ2V0KGNvbmZpZy5vcHRpb25zLnNraWxsSWQpPy5zaG9ydE5hbWVcbiAgICAgICAgICAgIGlmICghbGlua0RhdGEubmFtZSkgcmV0dXJuXG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQykge1xuICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLXG4gICAgICAgICAgICBsaW5rRGF0YS5saW5rVHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEFSQUNURVJJU1RJQ1xuICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUpIHtcbiAgICAgICAgICAgIGlmICgoY29uZmlnLm9wdGlvbnMuYWx0S2V5IHx8IGNvbmZpZy5vcHRpb25zLmNyZWF0ZUVuY291bnRlcikgJiYgY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlID09PSAnc2FuJykge1xuICAgICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TU1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLXG4gICAgICAgICAgICAgIGxpbmtEYXRhLmxpbmtUeXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkFUVFJJQlVURVxuICAgICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVQpIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNXG4gICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMud2VhcG9uTmFtZVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TU1xuICAgICAgICAgICAgbGlua0RhdGEuc2FuTWluID0gY29uZmlnLm9wdGlvbnMuYWN0b3I/LnN5c3RlbT8uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tQYXNzZWRcbiAgICAgICAgICAgIGxpbmtEYXRhLnNhbk1heCA9IGNvbmZpZy5vcHRpb25zLmFjdG9yPy5zeXN0ZW0/LnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrRmFpbGxlZFxuICAgICAgICAgICAgbGlua0RhdGEuc2FuUmVhc29uID0gY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlXG4gICAgICAgICAgICAgIDogY29uZmlnLm9wdGlvbnMuYWN0b3IubmFtZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5ibGluZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvbmZpZy5vcHRpb25zLnNlbmRUb0NoYXQpIHtcbiAgICAgICAgICAgIENvQzdMaW5rLnRvQ2hhdE1lc3NhZ2UobGlua0RhdGEpXG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcub3B0aW9ucy5zZW5kVG9DbGlwYm9hcmQpIHtcbiAgICAgICAgICAgIENvQzdMaW5rLmZyb21Ecm9wRGF0YShsaW5rRGF0YSkudGhlbihsaW5rID0+IHtcbiAgICAgICAgICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQobGluay5saW5rKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZShsaW5rRGF0YSwgeyBhY3RvcnM6IFtjb25maWcub3B0aW9ucy5hY3Rvcl0uZmlsdGVyKGEgPT4gYS5vd25lcnMubGVuZ3RoKSwgaGFzTW9kaWZpZXJzOiBjb25maWcub3B0aW9ucy5zaGlmdEtleSB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVSb2xsIChjb25maWcpIHtcbiAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKGNvbmZpZy5kaWFsb2dPcHRpb25zKVxuICAgIGlmICh1c2FnZSkge1xuICAgICAgY29uc3QgY2FyZFR5cGUgPSB1c2FnZS5nZXQoJ2NhcmRUeXBlJylcbiAgICAgIGlmIChjYXJkVHlwZSkge1xuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSA9IGNhcmRUeXBlXG4gICAgICB9XG4gICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgIHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpXG4gICAgICApXG4gICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcnVuUm9sbCAoY29uZmlnKSB7XG4gICAgc3dpdGNoIChjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDSzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHNhbkRhdGEgPSBhd2FpdCBTYW5EYXRhRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICBwcm9tcHRMYWJlbDogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgaWYgKHNhbkRhdGEpIHtcbiAgICAgICAgICAgIGxldCBzYW5NaW4gPSBzYW5EYXRhLmdldCgnc2FuTWluJykgfHwgMFxuICAgICAgICAgICAgbGV0IHNhbk1heCA9IHNhbkRhdGEuZ2V0KCdzYW5NYXgnKSB8fCAwXG4gICAgICAgICAgICBjb25zdCBzYW5SZWFzb24gPSBzYW5EYXRhLmdldCgnc2FuUmVhc29uJylcblxuICAgICAgICAgICAgaWYgKCFpc05hTihOdW1iZXIoc2FuTWluKSkpIHNhbk1pbiA9IE51bWJlcihzYW5NaW4pXG4gICAgICAgICAgICBpZiAoIWlzTmFOKE51bWJlcihzYW5NYXgpKSkgc2FuTWF4ID0gTnVtYmVyKHNhbk1heClcblxuICAgICAgICAgICAgU2FuQ2hlY2tDYXJkLmNyZWF0ZShcbiAgICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3IuYWN0b3JLZXksXG4gICAgICAgICAgICAgIHsgc2FuTWluLCBzYW5NYXgsIHNhblJlYXNvbiB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2FuTW9kaWZpZXI6IGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyLFxuICAgICAgICAgICAgICAgIHNhbkRpZmZpY3VsdHk6IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHksXG4gICAgICAgICAgICAgICAgZmFzdEZvcndhcmQ6IGNvbmZpZy5vcHRpb25zLnNoaWZ0S2V5XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUw6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXJcbiAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgICAgY2hlY2suYWN0b3IgPSAhY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9ySWRcbiAgICAgICAgICA6IGNvbmZpZy5vcHRpb25zLnRva2VuS2V5XG4gICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyXG4gICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgICBjaGVjay5zdGFuZGJ5ID1cbiAgICAgICAgICAhY29uZmlnLm9wdGlvbnMucHJldmVudFN0YW5kYnkgJiZcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcbiAgICAgICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmhhc1BsYXllck93bmVyXG4gICAgICAgIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCkge1xuICAgICAgICAgIGNoZWNrLnNraWxsID0gY29uZmlnLm9wdGlvbnMuc2tpbGxJZFxuICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICApIHtcbiAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsQXR0cmlidXRlKGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLmNoYXRNZXNzYWdlKSB7XG4gICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlc3VsdDogY2hlY2subW9kaWZpZWRSZXN1bHQsXG4gICAgICAgICAgc3VjY2Vzc0xldmVsOiBjaGVjay5yb2xsZWRTdWNjZXNzTGV2ZWwsXG4gICAgICAgICAgaXNGdW1ibGU6IGNoZWNrLmlzRnVtYmxlLFxuICAgICAgICAgIGlzQ3JpdGljYWw6IGNoZWNrLmlzQ3JpdGljYWwsXG4gICAgICAgICAgc3VjY2Vzc0xldmVsczoge1xuICAgICAgICAgICAgMTogY2hlY2sucmVndWxhclRocmVzaG9sZCxcbiAgICAgICAgICAgIDI6IGNoZWNrLmhhcmRUaHJlc2hvbGQsXG4gICAgICAgICAgICAzOiBjaGVjay5leHRyZW1lVGhyZXNob2xkXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXNzZWQ6IGNoZWNrLnBhc3NlZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRDpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9DT01CSU5FRDpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgICAgY2hlY2suYWN0b3IgPSAhY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgICAgID8gY29uZmlnLm9wdGlvbnMuYWN0b3JJZFxuICAgICAgICAgICAgOiBjb25maWcub3B0aW9ucy50b2tlbktleVxuICAgICAgICAgIGNoZWNrLmNoYXJhY3RlcmlzdGljID0gY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICBjaGVjay5hdHRyaWJ1dGUgPSBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGVcbiAgICAgICAgICBjaGVjay5za2lsbElkID0gY29uZmlnLm9wdGlvbnMuc2tpbGxJZFxuICAgICAgICAgIGNoZWNrLnJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgICAgICAgIGNoZWNrLmluaXRpYXRvciA9IGdhbWUudXNlci5pZFxuICAgICAgICAgIGxldCBkYXRhID0ge31cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgICB0eXBlOiBPcHBvc2VkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICAgICAgY29tYmF0OiBjb25maWcub3B0aW9ucy5pc0NvbWJhdCxcbiAgICAgICAgICAgICAgYWN0aW9uOiAnbmV3J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2suaXRlbSA9IGNvbmZpZy5vcHRpb25zLml0ZW1JZFxuICAgICAgICAgICAgY2hlY2sud2VhcG9uQWx0U2tpbGwgPSBjb25maWcub3B0aW9ucy53ZWFwb25BbHRTa2lsbFxuICAgICAgICAgICAgY2hlY2suZGVueVB1c2ggPSB0cnVlIC8vIE9wcG9zZWQgcm9sbGVkIGNhbid0IGJlIHB1c2hlZC5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgICAgdHlwZTogQ29tYmluZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgICAgICBhY3Rpb246ICduZXcnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eVxuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhLnJvbGwgPSBjaGVjay5KU09OUm9sbERhdGFcbiAgICAgICAgICBkYXRhLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDb25DaGVjayB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcklkID0gbnVsbCwgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgIHRoaXMuY2hlY2sgPSBuZXcgQ29DN0NoZWNrKGFjdG9ySWQpXG4gICAgdGhpcy5jaGVjay5jaGFyYWN0ZXJpc3RpYyA9ICdjb24nXG4gICAgdGhpcy5jaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuY2hlY2suZGVueVB1c2ggPSB0cnVlXG4gICAgdGhpcy5hY3RvcklkID0gYWN0b3JJZFxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICh0aGlzLmFjdG9ySWQpIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9ySWQpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzZXQgYWN0b3JJZCAoeCkge1xuICAgIHRoaXMuX2FjdG9ySWQgPSB4XG4gICAgdGhpcy5jaGVjay5hY3RvciA9IHhcbiAgfVxuXG4gIGdldCBhY3RvcklkICgpIHtcbiAgICBpZiAodGhpcy5fYWN0b3JJZCkgcmV0dXJuIHRoaXMuX2FjdG9ySWRcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHRva2VuS2V5ICgpIHtcbiAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuKSByZXR1cm4gdGhpcy5hY3Rvci50b2tlbktleVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaXNTdWNjZXNzICgpIHtcbiAgICBpZiAodGhpcy5jaGVjaykgcmV0dXJuIHRoaXMuY2hlY2suaXNTdWNjZXNzXG4gICAgZWxzZSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBpc1JvbGxlZCAoKSB7XG4gICAgaWYgKHRoaXMuY2hlY2sgJiYgdGhpcy5jaGVjay5kaWNlcyAmJiB0aGlzLmNoZWNrLmRpY2VzLnRvdGFsKSByZXR1cm4gdHJ1ZVxuICAgIGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoY29uQ2hlY2ssIGNhcmQpXG4gICAgY29uc3QgaHRtbENoZWNrID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgIENvQzdSb2xsLmdldEZyb21FbGVtZW50KGh0bWxDaGVjaywgY29uQ2hlY2suY2hlY2spXG4gICAgY29uQ2hlY2subWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgcmV0dXJuIGNvbkNoZWNrXG4gIH1cblxuICBhc3luYyBnZXRDaGVja0VsZW1lbnQgKCkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcy5jaGVjaylcbiAgICBjb25zdCBodG1sRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG4gICAgaWYgKGh0bWxFbGVtZW50KSB7XG4gICAgICBodG1sRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjaGF0LWNhcmQnLCAnaXRlbS1jYXJkJywgJ3JvbGwtY2FyZCcpXG4gICAgICByZXR1cm4gaHRtbEVsZW1lbnRcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb24tY2hlY2suaHRtbCdcblxuICAgIGlmIChmYXN0Rm9yd2FyZCkge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsQ29uKClcbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgaWYgKGZhc3RGb3J3YXJkKSB7XG4gICAgICBjb25zdCBjaGVjayA9IGh0bWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgICBjaGVjay5yZXBsYWNlV2l0aChhd2FpdCB0aGlzLmdldENoZWNrRWxlbWVudCgpKVxuICAgIH1cblxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBsZXQgc3BlYWtlclxuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy50b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuXG4gICAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgZmxhdm9yOiB0aGlzLmZsYXZvcixcbiAgICAgIGNvbnRlbnQ6IGh0bWxFbGVtZW50Lm91dGVySFRNTFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG4gICAgKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJykgLy8gQ2hhbmdlIGZvciB1c2VyXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgcm9sbENvbiAoKSB7XG4gICAgdGhpcy5jaGVjay5oaWRlRGljZVJlc3VsdCA9IHRydWVcbiAgICBhd2FpdCB0aGlzLmNoZWNrLl9wZXJmb3JtKClcbiAgICBpZiAoIXRoaXMuaXNCbGluZCAmJiAhdGhpcy5pc1JvbGxlZCAmJiAhdGhpcy5pc1N1Y2Nlc3MpIHtcbiAgICAgIGlmICh0aGlzLnN0YXlBbGl2ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5kZWFkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYXBwbGllZCA9IHRydWVcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29uLWNoZWNrLmh0bWwnXG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgY29uc3QgY2hlY2sgPSBodG1sRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgIGNoZWNrLnJlcGxhY2VXaXRoKGF3YWl0IHRoaXMuZ2V0Q2hlY2tFbGVtZW50KCkpXG5cbiAgICBpZiAoIXRoaXMuaXNCbGluZCAmJiB0aGlzLmlzUm9sbGVkICYmICF0aGlzLmlzU3VjY2Vzcykge1xuICAgICAgaWYgKHRoaXMuc3RheUFsaXZlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmRlYWQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSByZXR1cm5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbEVsZW1lbnQub3V0ZXJIVE1MIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCByZW5kZXJUZW1wbGF0ZSAqL1xuZXhwb3J0IGNsYXNzIFNraWxsU2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5zZWxlY3Qtc2tpbGwnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0U2tpbGxDbGlja2VkKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdFNraWxsQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCB0aGlzLmRhdGEuZGF0YS5hY3RvcklkKTtcbiAgICAvLyBhd2FpdCBhY3Rvci5hZGRTa2lsbCggdGhpcy5kYXRhLmRhdGEuc2tpbGxzW051bWJlcihsaS5kYXRhc2V0LmluZGV4KV0sIHRoaXMuZGF0YS5kYXRhLnR5cGUpO1xuICAgIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLnNlbGVjdGVkID0gdHJ1ZVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYWRkZWQpIHRoaXMuZGF0YS5kYXRhLmFkZGVkID0gMFxuICAgIHRoaXMuZGF0YS5kYXRhLmFkZGVkKytcbiAgICBjb25zdCBmb3JtID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuc2tpbGwtc2VsZWN0b3InKVxuICAgIGNvbnN0IGRpdkNvdW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuY291bnQnKVxuICAgIGRpdkNvdW50LmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmFkZGVkXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmFkZGVkID49IHRoaXMuZGF0YS5kYXRhLm9wdGlvbnNDb3VudCkge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtc2VsZWN0Lmh0bWwnLFxuICAgICAgZGF0YVxuICAgICkgLy8gUmVuZGVyIHRlbXBsYXRlIGJ1ZyBhdmVjIGNlcnRhaW5lcyBkYXRhXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IFNraWxsU2VsZWN0RGlhbG9nKFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWRhdGEuYWRkZWQgPj0gZGF0YS5vcHRpb25zQ291bnQpIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBkYXRhLnNraWxscy5maWx0ZXIoc2tpbGwgPT4gc2tpbGwuc2VsZWN0ZWQpXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShzZWxlY3RlZClcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdza2lsbC1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFBvaW50U2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLW5hbWUnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25CdXR0b25DbGlja2VkKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUxpc3QgPSBsaS5jbG9zZXN0KCcuaXRlbS1saXN0JylcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbUxpc3QucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdGFibGUnKSkge1xuICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbaXRlbS5kYXRhc2V0LmtleV0uc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2l0ZW0uZGF0YXNldC5rZXldLm9wdGlvbmFsID0gZmFsc2VcbiAgICB9XG4gICAgJChsaSkudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJylcbiAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLnNlbGVjdGVkID0gdHJ1ZVxuICAgIGNvbnN0IHRvdGFsUG9pbnRzID0gbGlcbiAgICAgIC5jbG9zZXN0KCcjc2tpbGwtc2VsZWN0aW9uLWZvcm0nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5wb2ludHMnKVxuICAgIHRvdGFsUG9pbnRzLmlubmVyVGV4dCA9XG4gICAgICB0aGlzLmRhdGEuZGF0YS50b3RhbCArXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLm11bHRpcGxpZXIgKlxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLnZhbHVlXG4gICAgY29uc3QgYnV0dG9uID0gbGlcbiAgICAgIC5jbG9zZXN0KCcjc2tpbGwtc2VsZWN0aW9uLWZvcm0nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi52YWxpZGF0ZScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJylcbiAgICB0aGlzLmRhdGEuZGF0YS5yZXNvbHZlZCA9IHRydWVcbiAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggdGhpcy5kYXRhLmRhdGEuYWN0b3JJZCk7XG4gICAgLy8gYXdhaXQgYWN0b3IuYWRkU2tpbGwoIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLCB0aGlzLmRhdGEuZGF0YS50eXBlKTtcbiAgICAvLyBldmVudC5jdXJyZW50VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgLy8gaWYoICF0aGlzLmRhdGEuZGF0YS5hZGRlZCkgdGhpcy5kYXRhLmRhdGEuYWRkZWQgPSAwO1xuICAgIC8vIHRoaXMuZGF0YS5kYXRhLmFkZGVkKys7XG4gICAgLy8gY29uc3QgZm9ybSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvaW50LXNlbGVjdG9yJyk7XG4gICAgLy8gY29uc3QgZGl2Q291bnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5jb3VudCcpO1xuICAgIC8vIGRpdkNvdW50LmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmFkZGVkO1xuICAgIC8vIGlmKCB0aGlzLmRhdGEuZGF0YS5hZGRlZCA+PSB0aGlzLmRhdGEuZGF0YS5vcHRpb25zKSB0aGlzLmNsb3NlKCk7XG4gICAgLy8gcmV0dXJuIGV2ZW50O1xuICB9XG5cbiAgYXN5bmMgX29uQnV0dG9uQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpKSByZXR1cm5cbiAgICBzdXBlci5jbG9zZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9wb2ludC1zZWxlY3QuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBQb2ludFNlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEucmVzb2x2ZWQpIHJldHVybiByZXNvbHZlKGRhdGEpXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXG5leHBvcnQgY2xhc3MgQ2hhcmFjU2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLW5hbWUnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMoZXZlbnQpKVxuICB9XG5cbiAgYXN5bmMgX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICB0aGlzLmRhdGEuZGF0YS5zZWxlY3RlZCA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jaGFyLXNlbGVjdC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IENoYXJhY1NlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEuc2VsZWN0ZWQpIHJldHVybiByZXNvbHZlKGRhdGEuc2VsZWN0ZWQpXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsICovXG5leHBvcnQgY2xhc3MgQ2hhcmFjUm9sbERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBvcHRpb25zKSB7XG4gICAgc3VwZXIoZGF0YSwgb3B0aW9ucylcblxuICAgIHRoaXMucm9sbGVkID0gZGF0YS5yb2xsZWQgfHwge31cbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLm9uKCdjaGFuZ2UnLCAnaW5wdXQnLCB0aGlzLl9vbkNoYW5nZUlucHV0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignc3VibWl0JywgJ2Zvcm0nLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uUm9sbENoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmluY3JlYXNlLWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5kZWNyZWFzZS1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucmVzZXQtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25SZXNldENoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnYnV0dG9uJywgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLmluY3JlYXNlQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMuZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25SZXNldENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5yZXNldENoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBhY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgaWYgKGFjdGlvbiA9PT0gJ3JvbGwnKSB7XG4gICAgICBmb3IgKGNvbnN0IGNoYXIgb2YgW1xuICAgICAgICAnc3RyJyxcbiAgICAgICAgJ2NvbicsXG4gICAgICAgICdzaXonLFxuICAgICAgICAnZGV4JyxcbiAgICAgICAgJ2FwcCcsXG4gICAgICAgICdpbnQnLFxuICAgICAgICAncG93JyxcbiAgICAgICAgJ2VkdScsXG4gICAgICAgICdsdWNrJ1xuICAgICAgXSkge1xuICAgICAgICBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoXG4gICAgICBhY3Rpb24gPT09ICd2YWxpZGF0ZScgJiZcbiAgICAgICFldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5hY3RpdmUnKVxuICAgICkge1xuICAgICAgdGhpcy5jaGVja1RvdGFsKClcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGNvbnN0IGZvcm11bGEgPSB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHNba2V5XVxuICAgIGlmIChpbnB1dCAmJiBmb3JtdWxhKSB7XG4gICAgICBpZiAoaXNOYU4oTnVtYmVyKGZvcm11bGEpKSkge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoZm9ybXVsYSlcbiAgICAgICAgYXdhaXQgcm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIHJvbGwudG9NZXNzYWdlKHtcbiAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZVJvbGxpbmdDaGFyYWN0ZXJpc3RpYycsIHtcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdFtrZXldLmxhYmVsLFxuICAgICAgICAgICAgZm9ybXVsYVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIGlucHV0LnZhbHVlID0gcm9sbC50b3RhbFxuICAgICAgfSBlbHNlIGlucHV0LnZhbHVlID0gTnVtYmVyKGZvcm11bGEpXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgICBpZiAoIXRoaXMucm9sbGVkKSB0aGlzLnJvbGxlZCA9IHt9XG4gICAgICB0aGlzLnJvbGxlZFtrZXldID0gdHJ1ZVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgaW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpICsgMVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCAmJiBOdW1iZXIoaW5wdXQudmFsdWUpID4gMCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpIC0gMVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgcmVzZXRDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBudWxsXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSAwXG4gICAgfVxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VJbnB1dCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaW5wdXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNbaW5wdXQubmFtZV0gPSB2YWx1ZVxuICAgIH1cblxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBjaGVja1RvdGFsICgpIHtcbiAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsID0gMFxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1xuICAgICkpIHtcbiAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsICs9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLnBvaW50cycpXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCkge1xuICAgICAgaWYgKFxuICAgICAgICBOdW1iZXIodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCkgIT09XG4gICAgICAgIE51bWJlcih0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlKVxuICAgICAgKSB7XG4gICAgICAgIHZhbGlkYXRpb24uY2xhc3NMaXN0LmFkZCgnd2FybmluZycpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWxpZGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmcnKVxuICAgICAgICBjb25zdCB2YWxpZGF0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignYnV0dG9uLnZhbGlkYXRlJylcbiAgICAgICAgdmFsaWRhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW5hY3RpdmUnKVxuICAgICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9IHRydWVcbiAgICAgIH1cbiAgICAgIGNvbnN0IHZhbHVlID0gdmFsaWRhdGlvbi5xdWVyeVNlbGVjdG9yKCcudmFsdWUnKVxuICAgICAgdmFsdWUuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZVxuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsID0gdmFsaWRhdGlvbi5xdWVyeVNlbGVjdG9yKCcudG90YWwnKVxuICAgIHRvdGFsLmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWxcblxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCkge1xuICAgICAgaWYgKHRoaXMucm9sbGVkKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlID1cbiAgICAgICAgICAhT2JqZWN0LmVudHJpZXModGhpcy5yb2xsZWQpLmZpbmQoZWwgPT4gIWVsKSAmJlxuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMucm9sbGVkKS5sZW5ndGggPT09IDlcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlKSB7XG4gICAgICAgICAgY29uc3QgdmFsaWRhdGVCdXR0b24gPVxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCdidXR0b24udmFsaWRhdGUnKVxuICAgICAgICAgIHZhbGlkYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3Qgcm9sbGVkID0ge31cbiAgICBkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgPSAwXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSkge1xuICAgICAgaWYgKGtleSAhPT0gJ2x1Y2snKSB7XG4gICAgICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCArPSB2YWx1ZSB8fCAwXG4gICAgICB9XG4gICAgICBpZiAoIWlzTmFOKHZhbHVlKSAmJiB2YWx1ZSA+IDApIHtcbiAgICAgICAgcm9sbGVkW2tleV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICBpZiAoXG4gICAgICAgIE51bWJlcihkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwpICE9PVxuICAgICAgICBOdW1iZXIoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlKVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEucG9pbnRzV2FybmluZyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NoYXItcm9sbC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IENoYXJhY1JvbGxEaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgcm9sbGVkLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGF0YS52YWxpZGF0ZSkgcmV0dXJuIHJlc29sdmUodHJ1ZSlcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY2hhci1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5leHBvcnQgY2xhc3MgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoXG4gICAgc2tpbGxzLFxuICAgIHNwZWNpYWxpemF0aW9uTmFtZSxcbiAgICBiYXNlVmFsdWUgPSBudWxsLFxuICAgIG5hbWUgPSBudWxsXG4gICkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QuaHRtbCcsXG4gICAgICB7XG4gICAgICAgIGhhc1NraWxsczogc2tpbGxzLmxlbmd0aCA+IDAsXG4gICAgICAgIHNraWxscyxcbiAgICAgICAgYmFzZTogYmFzZVZhbHVlLFxuICAgICAgICBuYW1lXG4gICAgICB9XG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogbmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFNlbGVjdEJhc2UnLCB7IG5hbWUgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTcGVjU2VsZWN0VGl0bGUnLCB7XG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogc3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgICAgfSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNza2lsbC1zZWxlY3QtZm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAndmFsaWRhdGUnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBGb3JtQXBwbGljYXRpb24sIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5cbmV4cG9ydCBjbGFzcyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2tpbGwtbmFtZS1kaWFsb2cnXSxcbiAgICAgIHRpdGxlOiAnJyxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNwZWNpYWxpemF0aW9uLXNlbGVjdC5oYnMnLFxuICAgICAgd2lkdGg6IDQwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHRpdGxlICgpIHtcbiAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFNwZWNTZWxlY3RUaXRsZScsIHtcbiAgICAgIHNwZWNpYWxpemF0aW9uOiB0aGlzLm9iamVjdC5zcGVjaWFsaXphdGlvbk5hbWVcbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCcuc3VibWl0LWJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQ2xpY2tTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ1tuYW1lPWV4aXN0aW5nLXNraWxsXScpLmNoYW5nZSh0aGlzLl9vblNlbGVjdENoYW5nZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uU2VsZWN0Q2hhbmdlIChldmVudCkge1xuICAgIHRoaXMub2JqZWN0LnNlbGVjdGVkID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25DbGlja1N1Ym1pdCAoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5vYmplY3Quc2VsZWN0ZWQgPT09ICcnKSB7XG4gICAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJ2Zvcm0nKVxuICAgICAgdGhpcy5vYmplY3QubmFtZSA9IChvYmouZmluZCgnaW5wdXRbbmFtZT1uZXctc2tpbGwtbmFtZV0nKS52YWwoKSA/PyAnJylcbiAgICAgIHRoaXMub2JqZWN0LmJhc2VWYWx1ZSA9IChvYmouZmluZCgnaW5wdXRbbmFtZT1iYXNlLXZhbHVlXScpLnZhbCgpID8/ICcnKVxuICAgIH1cbiAgICBpZiAodGhpcy5vYmplY3Quc2VsZWN0ZWQgPT09ICcnICYmIHRoaXMub2JqZWN0Lm5hbWUgPT09ICcnKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgdGhpcy5vYmplY3QucmVzb2x2ZSh7XG4gICAgICBzZWxlY3RlZDogdGhpcy5vYmplY3Quc2VsZWN0ZWQsXG4gICAgICBuYW1lOiB0aGlzLm9iamVjdC5uYW1lLFxuICAgICAgYmFzZVZhbHVlOiB0aGlzLm9iamVjdC5iYXNlVmFsdWVcbiAgICB9KVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlICh7IHNraWxscyA9IFtdLCBhbGxvd0N1c3RvbSA9IGZhbHNlLCBmaXhlZEJhc2VWYWx1ZSA9IGZhbHNlLCBzcGVjaWFsaXphdGlvbk5hbWUgPSAnJywgbGFiZWwgPSAnJywgYmFzZVZhbHVlID0gbnVsbCB9ID0ge30pIHtcbiAgICBjb25zdCBzZWxlY3QgPSBbXVxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygc2tpbGxzKSB7XG4gICAgICBzZWxlY3QucHVzaCh7XG4gICAgICAgIGlkOiBza2lsbC5pZCxcbiAgICAgICAgbmFtZTogc2tpbGwubmFtZSxcbiAgICAgICAgYmFzZTogc2tpbGwuc3lzdGVtLmJhc2VcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIG5ldyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nKHtcbiAgICAgICAgc3BlY2lhbGl6YXRpb25OYW1lLFxuICAgICAgICBhbGxvd0N1c3RvbSxcbiAgICAgICAgZml4ZWRCYXNlVmFsdWUsXG4gICAgICAgIGFsbG93U2VsZWN0OiBza2lsbHMubGVuZ3RoID4gMCxcbiAgICAgICAgc2tpbGxzOiBzZWxlY3QsXG4gICAgICAgIHNlbGVjdGVkOiAnJyxcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIGxhYmVsLFxuICAgICAgICBiYXNlVmFsdWUsXG4gICAgICAgIHJlc29sdmVcbiAgICAgIH0sIHt9KS5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cbmV4cG9ydCBjbGFzcyBTa2lsbFZhbHVlRGlhbG9nIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAobmFtZSA9IG51bGwsIGJhc2VWYWx1ZSA9IG51bGwpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXZhbHVlLmh0bWwnLFxuICAgICAgeyBiYXNlOiBiYXNlVmFsdWUsIG5hbWUgfVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXG4gICAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxWYWx1ZScsIHsgbmFtZSB9KSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NraWxsLXNlbGVjdC1mb3JtJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmb3JtRGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6ICd2YWxpZGF0ZScsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4vbWVsZWUtaW5pdGlhdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi9tZWxlZS10YXJnZXQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3TWVsZWVSZXNvbHRpb24ge1xuICBjb25zdHJ1Y3RvciAoXG4gICAgaW5pdGlhdG9yTWVzc2FnZSA9IG51bGwsXG4gICAgdGFyZ2V0TWVzc2FnZSA9IG51bGwsXG4gICAgbWVzc2FnZUlkID0gbnVsbFxuICApIHtcbiAgICB0aGlzLmluaXRpYXRvck1lc3NhZ2UgPSBpbml0aWF0b3JNZXNzYWdlXG4gICAgdGhpcy50YXJnZXRNZXNzYWdlID0gdGFyZ2V0TWVzc2FnZVxuICAgIHRoaXMubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gIH1cblxuICBhc3luYyBwcmVDcmVhdGVNZXNzYWdlICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIC8vIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHthY3RvcjogdGhpcy5hY3Rvcn0pO1xuICAgIC8vIGlmKCB0aGlzLmFjdG9yLmlzVG9rZW4pIHNwZWFrZXIuYWxpYXMgPSB0aGlzLmFjdG9yLnRva2VuLm5hbWU7XG5cbiAgICAvLyBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyO1xuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgLy8gQWRkIGltYWdlIHRvIGNhcmQuXG4gICAgLy8gZGF0YS5mbGFncyA9IHtcbiAgICAvLyAgIGltZzogdGhpcy5hY3Rvci5pc1Rva2VuID8gdGhpcy5hY3Rvci50b2tlbi5kYXRhLmltZzogdGhpcy5hY3Rvci5pbWdcbiAgICAvLyB9O1xuXG4gICAgY29uc3Qgcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggcm9sbE1vZGUgPT09ICdibGluZHJvbGwnICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICAgIHRoaXMubWVzc2FnZUlkID0gY2hhdE1lc3NhZ2UuaWRcbiAgICByZXR1cm4gY2hhdE1lc3NhZ2VcbiAgfVxuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0IHRhcmdldCAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0TWVzc2FnZSkge1xuICAgICAgcmV0dXJuIENvQzdNZWxlZVRhcmdldC5nZXRGcm9tTWVzc2FnZUlkKHRoaXMudGFyZ2V0TWVzc2FnZSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB0YXJnZXRUb2tlbiAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0KSByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy50YXJnZXQuYWN0b3JLZXkpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBpbml0aWF0b3IgKCkge1xuICAgIGlmICh0aGlzLmluaXRpYXRvck1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZCh0aGlzLmluaXRpYXRvck1lc3NhZ2UpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaW5pdGlhdG9yVG9rZW4gKCkge1xuICAgIGlmICh0aGlzLmluaXRpYXRvcikge1xuICAgICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuaW5pdGlhdG9yLmFjdG9yS2V5KVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgcmVzb2x2ZSAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICBzd2l0Y2ggKHRoaXMudGFyZ2V0LmFjdGlvbikge1xuICAgICAgICBjYXNlICdub1Jlc3BvbnNlJzpcbiAgICAgICAgICBpZiAodGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ3JvbGwtbWVsZWUtZGFtYWdlJ1xuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhdG9yTWlzc2VkJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ2RvZGdlJzpcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwICYmXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IG51bGxcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ3JvbGwtbWVsZWUtZGFtYWdlJ1xuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRvZGdlU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQuc2tpbGwuaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQuc2tpbGwubmFtZVxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSAnZG9kZ2UnXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwICYmXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IG51bGxcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID49IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHZlcmlmaWVyIGxhIGNvbmRpdGlvbiA8PSB2cyA8XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMudGFyZ2V0LndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdtYW5ldXZlcic6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQuc2tpbGwuZGF0YS5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLnRhcmdldC5za2lsbC5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPiAwKSB7XG4gICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgfSlcbiAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYXRvck1pc3NlZCcsIHtcbiAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgfSlcbiAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMud2lubmVyKSB7XG4gICAgICBpZiAodGhpcy53aW5uZXIucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lKSB7XG4gICAgICAgIHRoaXMud2lubmVyLnJvbGwuY3JpdGljYWxEYW1hZ2UgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLndpbm5lci5yb2xsLmNyaXRpY2FsRGFtYWdlID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuICAgIGlmICh0aGlzLm1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgICAgaWYgKHRoaXMud2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLndpbm5lci50b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLndpbm5lci50b2tlbi5kb2N1bW1lbnRcbiAgICAgICAgaWYgKHRoaXMud2lubmVyLmFjdG9yKSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMud2lubmVyLmFjdG9yXG4gICAgICB9XG4gICAgICBjb25zdCBzcGVha2VyID0gdGhpcy53aW5uZXIgPyBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKSA6IG51bGxcbiAgICAgIGNvbnN0IHVzZXIgPVxuICAgICAgICB0aGlzLndpbm5lciAmJiB0aGlzLndpbm5lci5hY3Rvci51c2VyXG4gICAgICAgICAgPyB0aGlzLndpbm5lci5hY3Rvci51c2VyXG4gICAgICAgICAgOiBnYW1lLnVzZXJcblxuICAgICAgbGV0IG1zZ1xuICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgIC8vIFRPRE86IElmIGNhcmQgaXNuJ3QgZm91bmQgKGNhcmQgd2FzIGRlbGV0ZWQgYmVmb3JlIGNvbXBsZXRpb24pID9cbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdSZXNvbGl0aW9uIGNhcmQgbWlzc2luZywgd2FzIGRlbGV0ZWQgPycpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKHNwZWFrZXIpIHtcbiAgICAgICAgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoe1xuICAgICAgICAgIC8vIFRPRE86IElmIGNhcmQgaXNuJ3QgZm91bmQgKGNhcmQgd2FzIGRlbGV0ZWQgYmVmb3JlIGNvbXBsZXRpb24pID9cbiAgICAgICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgICAgIHNwZWFrZXIsXG4gICAgICAgICAgY29udGVudDogaHRtbFxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoe1xuICAgICAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICAgICAgY29udGVudDogaHRtbFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvbWVsZWUtcmVzb2x1dGlvbi5odG1sJ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIENPTlNULCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXG5pbXBvcnQgeyBDaGF0Q2FyZEFjdG9yIH0gZnJvbSAnLi4vY2FyZC1hY3Rvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVJlc29sdGlvbiB9IGZyb20gJy4vbWVsZWUtcmVzb2x1dGlvbi5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4vbWVsZWUtaW5pdGlhdG9yLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlVGFyZ2V0IGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSwgcGFyZW50TWVzc2FnZUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHN1cGVyKGFjdG9yS2V5LCBmYXN0Rm9yd2FyZClcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLmluaXRpYXRvcktleSA9IG51bGxcbiAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCA9IHBhcmVudE1lc3NhZ2VJZFxuICAgIHRoaXMuZmFzdEZvcndhcmQgPSBmYXN0Rm9yd2FyZFxuICAgIHRoaXMucmVzb2x2ZWQgPSBmYWxzZVxuXG4gICAgdGhpcy5vdXRudW1iZXJlZCA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG5cbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnNraWxsSWQgPSBudWxsXG4gICAgdGhpcy5pdGVtSWQgPSBudWxsXG4gICAgdGhpcy5kb2RnaW5nID0gZmFsc2VcbiAgICB0aGlzLm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgIHRoaXMuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICB0aGlzLm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgfVxuXG4gIGdldCBhY3Rpb25TZWxlY3RlZCAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZG9kZ2luZyB8fFxuICAgICAgdGhpcy5ub3RSZXNwb25kaW5nIHx8XG4gICAgICB0aGlzLmZpZ2h0aW5nQmFjayB8fFxuICAgICAgdGhpcy5tYW5ldXZlcmluZ1xuICAgIClcbiAgfVxuXG4gIGdldCBhY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmRvZGdpbmcpIHJldHVybiAnZG9kZ2UnXG4gICAgaWYgKHRoaXMubm90UmVzcG9uZGluZykgcmV0dXJuICdub1Jlc3BvbnNlJ1xuICAgIGlmICh0aGlzLmZpZ2h0aW5nQmFjaykgcmV0dXJuICdmaWdodEJhY2snXG4gICAgaWYgKHRoaXMubWFuZXV2ZXJpbmcpIHJldHVybiAnbWFuZXV2ZXInXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuc2tpbGxJZClcbiAgfVxuXG4gIHNldCBpbml0aWF0b3JLZXkgKHgpIHtcbiAgICB0aGlzLl9pbml0aWF0b3JLZXkgPSB4XG4gICAgdGhpcy50YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgaW5pdGlhdG9yS2V5ICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYXRvcktleSkge1xuICAgICAgaWYgKCF0aGlzLl9pbml0aWF0b3IgJiYgdGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2luaXRpYXRvcikgdGhpcy5faW5pdGlhdG9yS2V5ID0gdGhpcy5faW5pdGlhdG9yLmFjdG9yS2V5XG4gICAgfVxuICAgIGlmICghdGhpcy5faW5pdGlhdG9yS2V5KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgTm8gaW5pdGlhdG9yIGZvdW5kIGZvciB0YXJnZXQgOiAke3RoaXMuYWN0b3IubmFtZX1gXG4gICAgICApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faW5pdGlhdG9yS2V5XG4gIH1cblxuICBnZXQgaW5pdGlhdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhdG9yS2V5KSB7XG4gICAgICBpZiAodGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgICAgKVxuICAgICAgICB0aGlzLmluaXRpYXRvcktleSA9IHRoaXMuX2luaXRpYXRvci5hY3RvcktleVxuICAgICAgfSBlbHNlIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmluaXRpYXRvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgbWVsZWVJbml0aWF0b3IgKCkge1xuICAgIGlmICghdGhpcy5faW5pdGlhdG9yKSB7XG4gICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2luaXRpYXRvclxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0Lmh0bWwnXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQsIG1lc3NhZ2VJZClcbiAgICB0YXJnZXQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG5cbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQsIHB1Ymxpc2hVcGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLm1lbGVlLnRhcmdldCcpXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnKVxuXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxuICAgIGlmICghcHVibGlzaFVwZGF0ZSkge1xuICAgICAgY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSAhPT0gJ3RydWUnXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXG4gICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgIHRhcmdldC50b2dnbGVGbGFnKGZsYWcpXG4gICAgICB0YXJnZXQudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZyA9IGZsYWdOYW1lLmluY2x1ZGVzKCctJylcbiAgICAgID8gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnTmFtZSlcbiAgICAgIDogZmxhZ05hbWVcbiAgICB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBjb25zdCB0b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKHRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRva2VuLmRvY3VtZW50XG4gICAgZWxzZSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcblxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4pIHNwZWFrZXIuYWxpYXMgPSB0aGlzLmFjdG9yLnRva2VuLm5hbWVcblxuICAgIGxldCB1c2VyID0gZ2FtZS51c2VyXG4gICAgaWYgKHR5cGVvZiB0aGlzLmFjdG9yLnVzZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsZXQgb3duZXJzID0gW11cbiAgICAgIGNvbnN0IGdtcyA9IGdhbWUudXNlcnMuZmlsdGVyKGEgPT4gYS5pc0dNKS5tYXAoYSA9PiBhLmlkKVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5hY3Rvci5vd25lcnNoaXApKSB7XG4gICAgICAgIGlmICh2ID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKSB7XG4gICAgICAgICAgaWYgKGsgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgb3duZXJzID0gZ2FtZS51c2Vycy5tYXAoYSA9PiBhLmlkKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFnbXMuaW5jbHVkZXMoaykpIHtcbiAgICAgICAgICAgIG93bmVycy5wdXNoKGspXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgY29udGVudCA9ICcnXG4gICAgICBzd2l0Y2ggKG93bmVycy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIC8vIEdNXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmICh0eXBlb2YgZ2FtZS51c2Vycy5nZXQob3duZXJzWzBdKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVzZXIgPSBnYW1lLnVzZXJzLmdldChvd25lcnNbMF0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0U2luZ2xlVXNlckZvclRhcmdldCcpXG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICAgICAgICBmb3IgKGNvbnN0IGsgb2Ygb3duZXJzKSB7XG4gICAgICAgICAgICBjb250ZW50ID1cbiAgICAgICAgICAgICAgY29udGVudCArXG4gICAgICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiJyArXG4gICAgICAgICAgICAgIGsgK1xuICAgICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICAgIGdhbWUudXNlcnMuZ2V0KGspLm5hbWUgK1xuICAgICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250ZW50ID0gY29udGVudCArICc8L3NlbGVjdD48L2Zvcm0+PC9wPidcbiAgICAgICAgICBhd2FpdCBEaWFsb2cucHJvbXB0KHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lk1lc3NhZ2VUaXRsZVNlbGVjdFNpbmdsZVVzZXJGb3JUYXJnZXQnXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0Zm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGZvcm1EYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgICAgICAgdXNlciA9IGdhbWUudXNlcnMuZ2V0KHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5hY3Rvci51c2VyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXNlciA9IHRoaXMuYWN0b3IudXNlclxuICAgIH1cblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgLy8gaWYgKCB0aGlzLmlzQmxpbmQgKSBjaGF0RGF0YVsnYmxpbmQnXSA9IHRydWU7XG4gICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHRoaXMubWVzc2FnZUlkID0gbWVzc2FnZS5pZFxuICAgIHJldHVybiBtZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgIGlmICghZ2FtZS51c2VyLmlzR00gJiYgbWVzc2FnZS51c2VyLmlkICE9PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvSW50ZXJhY3RXaXRoQ2hhdENhcmQnKVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgYXN5bmMgZ2V0VXBkYXRlZENoYXRDYXJkICgpIHtcbiAgICByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKS50aGVuKGh0bWwgPT4ge1xuICAgICAgcmV0dXJuIGh0bWxcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVNlbGVjdGVkIChjYXJkLCBldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdkb2RnZSc6XG4gICAgICAgIHRhcmdldC5kb2RnaW5nID0gdHJ1ZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBudWxsXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ25vUmVzcG9uc2UnOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gdHJ1ZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBudWxsXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBudWxsXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgIHRhcmdldC5kb2RnaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gdHJ1ZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uSWRcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnbWFuZXV2ZXInOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIHRhcmdldC51cGRhdGVDaGF0Q2FyZCgpXG5cbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBhc3luYyBwZXJmb3JtU2tpbGxDaGVjayAoc2tpbGxJZCA9IG51bGwsIHB1Ymxpc2ggPSBmYWxzZSkge1xuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgLy8gQ29tYmF0IHJvbGwgY2Fubm90IGJlIGJsaW5kIG9yIHVua25vd25cbiAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBjaGVjay5pc1Vua29ud24gPSBmYWxzZVxuICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IHRoaXMubWVzc2FnZUlkXG4gICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcbiAgICBjaGVjay5zaWRlID0gJ3RhcmdldCdcbiAgICBjaGVjay5hY3Rpb24gPSB0aGlzLmFjdGlvblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvclxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAwXG5cbiAgICBpZiAodGhpcy5kaXNhZHZhbnRhZ2UpIGNoZWNrLmRpY2VNb2RpZmllciAtPSAxXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBpZiAocHVibGlzaCkgY2hlY2sudG9NZXNzYWdlKClcblxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcHVibGlzaE5vUmVwb25zZVJlc3VsdCAoKSB7XG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICB0aGlzLm5vdFJlc3BvbmRpbmcgPSB0cnVlXG4gICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgIClcblxuICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG5cbiAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hDaGVja1Jlc3VsdCAoY2hlY2sgPSBudWxsKSB7XG4gICAgaWYgKCFjaGVjayAmJiAhdGhpcy5jaGVjaykgcmV0dXJuIG51bGxcblxuICAgIGlmIChjaGVjaykgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNoZWNrKHRoaXMuY2hlY2spXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICB0aGlzLnJvbGwucm9sbEljb25zID0gW11cbiAgICBpZiAodGhpcy5yb2xsLmNyaXRpY2FsKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnbWVkYWwnKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLmZ1bWJsZSkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdkYXJrcmVkJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzcGlkZXInKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLnN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzdGFyJylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdibGFjaydcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NrdWxsJylcbiAgICB9XG5cbiAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgIHRoaXMubWVzc2FnZUlkXG4gICAgKVxuICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG5cbiAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IGFjdG9yS2V5ID0gY2FyZC5kYXRhc2V0LmFjdG9yS2V5XG4gICAgY29uc3QgcGFyZW50TWVzc2FnZUlkID0gY2FyZC5kYXRhc2V0LnBhcmVudE1lc3NhZ2VJZFxuICAgIGNvbnN0IGZhc3RGb3J3YXJkID0gY2FyZC5kYXRhc2V0LmZhc3RGb3J3YXJkID09PSAndHJ1ZSdcbiAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN01lbGVlVGFyZ2V0KGFjdG9yS2V5LCBwYXJlbnRNZXNzYWdlSWQsIGZhc3RGb3J3YXJkKVxuXG4gICAgdGFyZ2V0LnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQodGFyZ2V0LCBjYXJkKVxuXG4gICAgaWYgKGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKSkge1xuICAgICAgdGFyZ2V0Lm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIH0gZWxzZSB0YXJnZXQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgdXBncmFkZVJvbGwgKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgb2xkQ2FyZCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkaWRuJ3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5yb2xsLnZhbHVlID0gbnVsbFxuICAgIHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICB0aGlzLnJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIG9sZENhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSBmYWxzZVxuXG4gICAgY29uc3QgZGljZVJvbGxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yb2xsJylcbiAgICBkaWNlUm9sbHMuZGF0YXNldC52YWx1ZSA9IG51bGxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5sdWNrU3BlbnQgPSB0cnVlXG5cbiAgICBjb25zdCByZXN1bERldGFpbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtZGV0YWlscycpXG4gICAgY29uc3QgZGljZVRvdGFsID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGRpY2VUb3RhbC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChvbGRDYXJkKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCwgQ29DN0RhbWFnZSB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1JhbmdlSW5pdGlhdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgaXRlbUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkXG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG4gICAgdGhpcy5jb3ZlciA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxuICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxuICAgIHRoaXMubXVsdGlwbGVTaG90cyA9IGZhbHNlXG4gICAgdGhpcy5idXJzdCA9IGZhbHNlXG4gICAgdGhpcy5mdWxsQXV0byA9IGZhbHNlXG4gICAgdGhpcy50b2tlbktleSA9IG51bGxcbiAgICB0aGlzLmFpbWVkID0gZmFsc2VcbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gMFxuICAgIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIGZvciAoY29uc3QgdCBvZiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KGAke3Quc2NlbmUuaWR9LiR7dC5pZH1gKSAvL1xuICAgICAgdGFyZ2V0LnRva2VuID0gdFxuICAgICAgdGhpcy5fdGFyZ2V0cy5wdXNoKHRhcmdldClcbiAgICB9XG4gICAgaWYgKHRoaXMuX3RhcmdldHMubGVuZ3RoKSB0aGlzLl90YXJnZXRzWzBdLmFjdGl2ZSA9IHRydWVcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3UmFuZ2VUYXJnZXQoKVxuICAgICAgdGFyZ2V0LmFjdGl2ZSA9IHRydWVcbiAgICAgIHRoaXMuX3RhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB0aGlzLnRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHRoaXMudG9rZW4pIHRoaXMudG9rZW5LZXkgPSBhY3Rvci50b2tlbktleVxuICAgICAgaWYgKGl0ZW1JZCkge1xuICAgICAgICBjb25zdCB3ZWFwb24gPSBhY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgICAgICBpZiAod2VhcG9uKSB7XG4gICAgICAgICAgaWYgKHRoaXMud2VhcG9uLnNpbmdsZVNob3QpIHRoaXMuc2luZ2xlU2hvdCA9IHRydWVcbiAgICAgICAgICBlbHNlIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hdXRvKSB0aGlzLmZ1bGxBdXRvID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuS2V5KSB7XG4gICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5fdGFyZ2V0cykge1xuICAgICAgICBpZiAodC50b2tlbiAmJiB0aGlzLnRva2VuKSB7XG4gICAgICAgICAgdC5kaXN0YW5jZSA9IGNoYXRIZWxwZXIuZ2V0RGlzdGFuY2UodC50b2tlbiwgdGhpcy50b2tlbilcbiAgICAgICAgICB0LnJvdW5kZWREaXN0YW5jZSA9IE1hdGgucm91bmQodC5kaXN0YW5jZS52YWx1ZSAqIDEwMCkgLyAxMDBcbiAgICAgICAgICB0LmRpc3RhbmNlVW5pdCA9IHQuZGlzdGFuY2UudW5pdFxuICAgICAgICAgIGNvbnN0IGRpc3RJbllkID1cbiAgICAgICAgICAgIE1hdGgucm91bmQoY2hhdEhlbHBlci50b1lhcmRzKHQuZGlzdGFuY2UpICogMTAwKSAvIDEwMFxuICAgICAgICAgIC8vIGlmKCBkaXN0SW5ZZCl7XG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgICAgICAgIHQucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcbiAgICAgICAgICAgIGNvbnN0IHBiUmFuZ2VJbllkID1cbiAgICAgICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSAvIDE1XG4gICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gcGJSYW5nZUluWWQpIHQucG9pbnRCbGFua1JhbmdlID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy53ZWFwb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHtcbiAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgdC5vdXRPZlJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlKSB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAmJlxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24ubG9uZ1JhbmdlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5sb25nUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdC5leHRyZW1lUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZSkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiA0XG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmV4dHJlbWVSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogNCkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhKHQuYmFzZVJhbmdlIHx8IHQubG9uZ1JhbmdlIHx8IHQuZXh0cmVtZVJhbmdlIHx8IHQub3V0T2ZSYW5nZSlcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9IGVsc2UgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgYWN0b3JJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRzICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldHMpIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRzXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRzICYmIHRoaXMudGFyZ2V0cy5sZW5ndGgpIHJldHVybiB0aGlzLnRhcmdldHMucG9wKClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuZ2V0V2VhcG9uU2tpbGxzKHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IG1haW5XZWFwb25Ta2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMud2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICB9XG5cbiAgZ2V0IGF1dG9XZWFwb25Ta2lsbCAoKSB7XG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy53ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICB9XG5cbiAgZ2V0IGF1dG9GaXJlICgpIHtcbiAgICByZXR1cm4gdGhpcy5idXJzdCB8fCB0aGlzLmZ1bGxBdXRvXG4gIH1cblxuICBnZXQgbXVsdGlUYXJnZXQgKCkge1xuICAgIHJldHVybiB0aGlzLmZ1bGxBdXRvIHx8IHRoaXMubXVsdGlwbGVTaG90c1xuICB9XG5cbiAgZ2V0IGFpbWluZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYWltaW5nKSB7XG4gICAgICB0aGlzLl9haW1pbmcgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnYWltaW5nJylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FpbWluZ1xuICB9XG5cbiAgZ2V0IGFjdGl2ZVRhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRzLmxlbmd0aCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0cy5maW5kKHQgPT4gdC5hY3RpdmUpXG4gIH1cblxuICBnZXQgc2hvdHMgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3Nob3RzKSB0aGlzLl9zaG90cyA9IFtdXG4gICAgcmV0dXJuIHRoaXMuX3Nob3RzXG4gIH1cblxuICBnZXQgY3VycmVudFNob3RSYW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5zaG90cy5sZW5ndGggKyAxXG4gIH1cblxuICBnZXQgYWN0aXZlVGFyZ2V0U2hvdERpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLnNob3REaWZmaWN1bHR5KClcbiAgfVxuXG4gIHNldCBhaW1pbmcgKGIpIHtcbiAgICB0aGlzLl9haW1pbmcgPSBiXG4gIH1cblxuICBnZXQgZGlkQW55U2hvdEhpdCAoKSB7XG4gICAgbGV0IGFueUhpdCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGFueUhpdCA9IGFueUhpdCB8fCByLmlzU3VjY2Vzc1xuICAgIH1cbiAgICByZXR1cm4gYW55SGl0XG4gIH1cblxuICBnZXQgc3VjY2Vzc2Z1bEhpdHMgKCkge1xuICAgIGNvbnN0IGhpdHMgPSBbXVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMucm9sbHNbaW5kZXhdLmlzU3VjY2Vzcykge1xuICAgICAgICBjb25zdCBoaXQgPSB7XG4gICAgICAgICAgcm9sbDogdGhpcy5yb2xsc1tpbmRleF0sXG4gICAgICAgICAgc2hvdDogdGhpcy5zaG90c1tpbmRleF1cbiAgICAgICAgfVxuICAgICAgICBoaXRzLnB1c2goaGl0KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGl0cy5sZW5ndGggIT09IDApIHJldHVybiBoaXRzXG4gICAgZWxzZSByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNob3RGaXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdHMgPyB0aGlzLnNob3RzLmxlbmd0aCA6IDBcbiAgfVxuXG4gIGdldCB0b3RhbEFtbW8gKCkge1xuICAgIHJldHVybiB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KClcbiAgfVxuXG4gIGdldCBtYXhTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuZnVsbEF1dG8pIHJldHVybiAn4oieJ1xuICAgIC8vIHJldHVybiB0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heDtcblxuICAgIHJldHVybiB0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLm1heFxuICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLm1heClcbiAgICAgIDogMVxuICB9XG5cbiAgZ2V0IGlnbm9yZUFtbW8gKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRBbW1vJylcbiAgfVxuXG4gIGdldCBpZ25vcmVVc2VzUGVyUm91bmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRVc2VQZXJSb3VuZCcpXG4gIH1cblxuICBnZXQgb3V0T2ZBbW1vICgpIHtcbiAgICBpZiAodGhpcy5pZ25vcmVBbW1vKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy50b3RhbEJ1bGxldHNGaXJlZCA+PSB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KCkpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgb3V0T2ZTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuaWdub3JlVXNlc1BlclJvdW5kKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy5zaG90cykgcmV0dXJuIHRoaXMuc2hvdHMubGVuZ3RoID49IHRoaXMubWF4U2hvdHNcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCB2b2xsZXlTaXplICgpIHtcbiAgICBpZiAoIXRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8pIHJldHVybiAxXG4gICAgaWYgKHRoaXMuX3ZvbGxleVNpemUpIHJldHVybiB0aGlzLl92b2xsZXlTaXplXG4gICAgY29uc3Qgc2l6ZSA9IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICByZXR1cm4gc2l6ZSA8IDMgPyAzIDogc2l6ZVxuICB9XG5cbiAgc2V0IHZvbGxleVNpemUgKHgpIHtcbiAgICBpZiAoeCA+PSBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKVxuICAgIH0gZWxzZSBpZiAoeCA8PSAzKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gM1xuICAgIH1cbiAgICB0aGlzLl92b2xsZXlTaXplID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBpc1ZvbGxleU1pblNpemUgKCkge1xuICAgIGlmICh0aGlzLnZvbGxleVNpemUgPT09IDMpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNWb2xsZXlNYXhTaXplICgpIHtcbiAgICBjb25zdCBtYXhTaXplID1cbiAgICAgIE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMCkgPCAzXG4gICAgICAgID8gM1xuICAgICAgICA6IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICBpZiAobWF4U2l6ZSA9PT0gdGhpcy52b2xsZXlTaXplKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0VGFyZ2V0RnJvbUtleSAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldHMuZmluZCh0ID0+IGtleSA9PT0gdC5hY3RvcktleSlcbiAgfVxuXG4gIGNhbGNUYXJnZXRzRGlmZmljdWx0eSAoKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIHRoaXMudGFyZ2V0cykge1xuICAgICAgdC5zaG90RGlmZmljdWx0eSA9IHRoaXMuc2hvdERpZmZpY3VsdHkodClcbiAgICB9XG4gIH1cblxuICBzaG90RGlmZmljdWx0eSAodCA9IG51bGwpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0IHx8IHRoaXMuYWN0aXZlVGFyZ2V0XG4gICAgbGV0IGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlXG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgIGlmICh0LmxvbmdSYW5nZSkgZGFtYWdlID0gdGhpcy53ZWFwb24uc3lzdGVtLnJhbmdlLmxvbmcuZGFtYWdlXG4gICAgICBpZiAodC5leHRyZW1lUmFuZ2UpIGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5leHRyZW1lLmRhbWFnZVxuICAgIH1cbiAgICBsZXQgbW9kaWZpZXIgPSB0YXJnZXQubW9kaWZpZXJcbiAgICBsZXQgZGlmZmljdWx0eVxuICAgIHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW5cbiAgICAgID8gKGRpZmZpY3VsdHkgPSAxKVxuICAgICAgOiAoZGlmZmljdWx0eSA9IHRhcmdldC5kaWZmaWN1bHR5KVxuICAgIGxldCBkaWZmaWN1bHR5TmFtZSA9ICcnXG4gICAgaWYgKHRoaXMuYWltaW5nICYmIHRoaXMuY3VycmVudFNob3RSYW5rID09PSAxKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuZGlzYWR2YW50YWdlKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMucmVsb2FkKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMubXVsdGlwbGVTaG90cyAmJiAhdGhpcy5mdWxsQXV0bykgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSBtb2RpZmllciAtPSB0aGlzLmN1cnJlbnRTaG90UmFuayAtIDFcbiAgICBpZiAobW9kaWZpZXIgPCAtMikge1xuICAgICAgY29uc3QgZXhjZXNzID0gTWF0aC5hYnMobW9kaWZpZXIgKyAyKVxuICAgICAgZGlmZmljdWx0eSArPSBleGNlc3NcbiAgICAgIGlmIChkaWZmaWN1bHR5ID4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCkge1xuICAgICAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gICAgICB9XG4gICAgICBtb2RpZmllciA9IC0yXG4gICAgfVxuXG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnUmVndWxhcidcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gZGlmZmljdWx0eSkgZGlmZmljdWx0eU5hbWUgPSAnSGFyZCdcbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBkaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5TmFtZSA9ICdFeHRyZW1lJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnQ3JpdGljYWwnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGUgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ0ltcG9zc2libGUnXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxldmVsOiBkaWZmaWN1bHR5LFxuICAgICAgbmFtZTogZGlmZmljdWx0eU5hbWUsXG4gICAgICBtb2RpZmllcixcbiAgICAgIGRhbWFnZSxcbiAgICAgIGltcG9zc2libGU6IGRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG9vdCBhdCB0aGUgYWN0aXZlIHRhcmdldC4gQWRkIGl0IHRvIHRoZSBsaXN0IG9mIHNob3RzLlxuICAgKiBUT0RPIDogcmVjYWxjdWxlciBsYSBkaWZmaWN1bHTDqSBkZSB0b3VzIGxlcyBzaG90cyAhLlxuICAgKi9cbiAgYWRkU2hvdEF0Q3VycmVudFRhcmdldCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICB0YXJnZXQ6IHRoaXMuYWN0aXZlVGFyZ2V0LFxuICAgICAgZXh0cmVtZVJhbmdlOiB0aGlzLmFjdGl2ZVRhcmdldC5leHRyZW1lUmFuZ2UsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICBhY3Rvck5hbWU6IHRoaXMuYWN0aXZlVGFyZ2V0Lm5hbWUsXG4gICAgICBkaWZmaWN1bHR5OiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5sZXZlbCxcbiAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgIGRhbWFnZTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkuZGFtYWdlLFxuICAgICAgYnVsbGV0c1Nob3Q6IDEsXG4gICAgICB0cmFuc2l0QnVsbGV0czogMCxcbiAgICAgIGJ1bGxldHNTaG90VHJhbnNpdDogMSxcbiAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgfVxuXG4gICAgbGV0IGJ1bGxldExlZnQgPSB0aGlzLnRvdGFsQW1tbyAtIHRoaXMudG90YWxCdWxsZXRzRmlyZWRcblxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50U2hvdFJhbmsgPiAxKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzU2hvdCA9IHRoaXMuc2hvdHNbdGhpcy5jdXJyZW50U2hvdFJhbmsgLSAyXVxuICAgICAgICBpZiAocHJldmlvdXNTaG90LmFjdG9yS2V5ICE9PSB0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSkge1xuICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gY2hhdEhlbHBlci5nZXREaXN0YW5jZShcbiAgICAgICAgICAgIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHByZXZpb3VzU2hvdC5hY3RvcktleSksXG4gICAgICAgICAgICBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSlcbiAgICAgICAgICApXG4gICAgICAgICAgc2hvdC50cmFuc2l0QnVsbGV0cyA9IE1hdGguZmxvb3IoY2hhdEhlbHBlci50b1lhcmRzKGRpc3RhbmNlKSlcbiAgICAgICAgICBpZiAoc2hvdC50cmFuc2l0QnVsbGV0cyA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgICAgIHNob3QudHJhbnNpdEJ1bGxldHMgPSBidWxsZXRMZWZ0XG4gICAgICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID1cbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgICAgICAgIHNob3QudHJhbnNpdCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHRoaXMudm9sbGV5U2l6ZVxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPD0gMykgc2hvdC5idWxsZXRzU2hvdCA9IDNcbiAgICAgIGlmIChzaG90LmJ1bGxldHNTaG90ID49IGJ1bGxldExlZnQgJiYgIXRoaXMuaWdub3JlQW1tbykge1xuICAgICAgICBzaG90LmJ1bGxldHNTaG90ID0gYnVsbGV0TGVmdFxuICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgfVxuICAgICAgLy8gYnVsbGV0c1Nob3RUcmFuc2l0IGlzIGZvciBsb2NhbGl6aW5nIENvQzcuU2hvdEJ1bGxldHMgdXNpbmcgcGFyYW1ldGVycywgbG9jYWxpemUgZG9lcyBub3QgYWNjZXB0IGFkZGluZyBhIHBhcmFtZXRlciBhcyBhIHN1bSBvZiBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0cywgc28gSSBjcmVhdGUgYSBuZXcgdmFsdWUgaW4gYWR2YW5jZSB0byB1c2UgaW5zdGVhZFxuICAgICAgc2hvdC5idWxsZXRzU2hvdFRyYW5zaXQgPSBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgIH1cbiAgICBpZiAodGhpcy5idXJzdCkge1xuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHBhcnNlSW50KHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uc3lzdGVtLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoc2hvdC5idWxsZXRzU2hvdCA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IGJ1bGxldExlZnRcbiAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gcGFyc2VJbnQodGhpcy50b3RhbEJ1bGxldHNGaXJlZCkgKyBzaG90LmJ1bGxldHNTaG90XG5cbiAgICBpZiAodGhpcy5haW1pbmcpIHtcbiAgICAgIHRoaXMuYWltaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgdGhpcy5zaG90cy5wdXNoKHNob3QpXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9yYW5nZS1pbml0aWF0b3IuaHRtbCdcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICB0aGlzLmNhbGNUYXJnZXRzRGlmZmljdWx0eSgpXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICAvLyBjb25zdCBlbGVtZW50ID0gJChodG1sKVswXTtcbiAgICAvLyBjb25zdCB0YXJnZXRFbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGFyZ2V0VGVzdCcpO1xuICAgIC8vIHRoaXMudGFyZ2V0LmF0dGFjaFRvRWxlbWVudCh0YXJnZXRFbGVtZW50KTtcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmICh0b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0b2tlbi5kb2N1bWVudFxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG5cbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggcm9sbE1vZGUgPT09ICdibGluZHJvbGwnICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIGlmIChcbiAgICAgIGZsYWcgPT09ICdzaW5nbGVTaG90JyB8fFxuICAgICAgZmxhZyA9PT0gJ211bHRpcGxlU2hvdHMnIHx8XG4gICAgICBmbGFnID09PSAnZnVsbEF1dG8nXG4gICAgKSB7XG4gICAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxuICAgICAgdGhpcy5tdWx0aXBsZVNob3RzID0gZmFsc2VcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKGZsYWcgPT09ICdmdWxsQXV0bycpIHRoaXMuYnVyc3QgPSBmYWxzZVxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcbiAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICdidXJzdCcpIHtcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKCF0aGlzLnNpbmdsZVNob3QgJiYgIXRoaXMubXVsdGlwbGVTaG90cykgdGhpcy5zaW5nbGVTaG90ID0gdHJ1ZVxuICAgICAgdGhpcy5idXJzdCA9ICF0aGlzLmJ1cnN0XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc29sdmVDYXJkICgpIHtcbiAgICB0aGlzLnJvbGxzID0gW11cbiAgICBpZiAodGhpcy5tdWx0aVRhcmdldCkge1xuICAgICAgbGV0IHdlYXBvbk1hbGZ1bmN0aW9uID0gZmFsc2VcbiAgICAgIGxldCBpbmRleCA9IDBcbiAgICAgIHdoaWxlICghd2VhcG9uTWFsZnVuY3Rpb24gJiYgdGhpcy5zaG90cy5sZW5ndGggPiBpbmRleCkge1xuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KHRoaXMuc2hvdHNbaW5kZXhdKVxuICAgICAgICBpZiAocm9sbC5kaWNlPy5yb2xsKSB7XG4gICAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53ZWFwb24uc2hvb3RCdWxsZXRzKFxuICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2hvdHNbaW5kZXhdLmJ1bGxldHNTaG90KSArXG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnNob3RzW2luZGV4XS50cmFuc2l0QnVsbGV0cylcbiAgICAgICAgKVxuICAgICAgICBpZiAocm9sbC5oYXNNYWxmdW5jdGlvbikge1xuICAgICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgICAgICB3ZWFwb25NYWxmdW5jdGlvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpbmRleCsrXG4gICAgICAgIHRoaXMucm9sbHMucHVzaChyb2xsKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KClcbiAgICAgIGlmIChyb2xsLmRpY2U/LnJvbGwpIHtcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICB9XG4gICAgICBsZXQgYnVsbGV0RmlyZWQgPSB0aGlzLmJ1cnN0XG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uc3lzdGVtLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoYnVsbGV0RmlyZWQgPj0gdGhpcy50b3RhbEFtbW8pIGJ1bGxldEZpcmVkID0gdGhpcy50b3RhbEFtbW9cbiAgICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICAgIHRhcmdldDogdGhpcy5hY3RpdmVUYXJnZXQsXG4gICAgICAgIGV4dHJlbWVSYW5nZTogdGhpcy5hY3RpdmVUYXJnZXQuZXh0cmVtZVJhbmdlLFxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICAgIGFjdG9yTmFtZTogdGhpcy5hY3RpdmVUYXJnZXQubmFtZSxcbiAgICAgICAgZGlmZmljdWx0eTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWwsXG4gICAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgICAgZGFtYWdlOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5kYW1hZ2UsXG4gICAgICAgIGJ1bGxldHNTaG90OiBidWxsZXRGaXJlZCxcbiAgICAgICAgdHJhbnNpdEJ1bGxldHM6IDAsXG4gICAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLndlYXBvbi5zaG9vdEJ1bGxldHMoYnVsbGV0RmlyZWQpXG5cbiAgICAgIGlmIChyb2xsLmhhc01hbGZ1bmN0aW9uKSB7XG4gICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hvdHMucHVzaChzaG90KVxuICAgICAgdGhpcy5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHNob290QXRUYXJnZXQgKHNob3QgPSBudWxsKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gc2hvdFxuICAgICAgPyB0aGlzLmdldFRhcmdldEZyb21LZXkoc2hvdC5hY3RvcktleSlcbiAgICAgIDogdGhpcy5hY3RpdmVUYXJnZXRcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGNoZWNrLmFjdG9yS2V5ID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBpZiAodGhpcy5hdXRvRmlyZSkgY2hlY2suc2tpbGwgPSB0aGlzLmF1dG9XZWFwb25Ta2lsbFxuICAgIGVsc2UgY2hlY2suc2tpbGwgPSB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICAgIGlmICh0aGlzLm11bHRpVGFyZ2V0KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gc2hvdC5kaWZmaWN1bHR5XG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBzaG90Lm1vZGlmaWVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICAgIHRoaXMudG90YWxCdWxsZXRzRmlyZWQgPSBwYXJzZUludCh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkKSArIDFcbiAgICAgIGlmICh0aGlzLmFpbWluZykge1xuICAgICAgICB0aGlzLmFpbWluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgICB9XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWxcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5Lm1vZGlmaWVyXG4gICAgfVxuXG4gICAgY2hlY2suZGV0YWlscyA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UYXJnZXQnKX06ICR7dGFyZ2V0Lm5hbWV9YFxuICAgIGNoZWNrLnRhcmdldEtleSA9IHRhcmdldC5hY3RvcktleVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxuXG4gICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQsIG1lc3NhZ2VJZClcbiAgICBpbml0aWF0b3IubWVzc2FnZUlkID0gbWVzc2FnZUlkXG5cbiAgICByZXR1cm4gaW5pdGlhdG9yXG4gIH1cblxuICBjaGFuZ2VWb2xsZXlTaXplICh4KSB7XG4gICAgdGhpcy52b2xsZXlTaXplID0gdGhpcy52b2xsZXlTaXplICsgeFxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50LCBwdWJsaXNoVXBkYXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5yYW5nZS5pbml0aWF0b3InKVxuICAgIGNvbnN0IGZsYWcgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGNvbnN0IGNhbWVsRmxhZyA9IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZylcblxuICAgIC8vIHVwZGF0ZSBvbmx5IGZvciBsb2NhbCBwbGF5ZXJcbiAgICBpZiAoIXB1Ymxpc2hVcGRhdGUpIHtcbiAgICAgIGNhcmQuZGF0YXNldFtjYW1lbEZsYWddID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gIT09ICd0cnVlJ1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2hlZC1vbicpXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2VsZWN0ZWQgPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGUgY2FyZCBmb3IgYWxsIHBsYXllclxuICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldC1mbGFnJykpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudGFyZ2V0JylcbiAgICAgICAgY29uc3Qga2V5ID0gcGFyc2VJbnQodGFyZ2V0LmRhdGFzZXQudGFyZ2V0S2V5KVxuICAgICAgICBpbml0aWF0b3IudGFyZ2V0c1trZXldLnRvZ2dsZUZsYWcoY2FtZWxGbGFnKVxuICAgICAgfSBlbHNlIGluaXRpYXRvci50b2dnbGVGbGFnKGNhbWVsRmxhZylcbiAgICAgIGluaXRpYXRvci51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgcGFzc1JvbGwgKHJvbGxJbmRleCkge1xuICAgIGNvbnN0IHJvbGwgPSB0aGlzLnJvbGxzW3JvbGxJbmRleF1cbiAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQocm9sbC5sdWNrTmVlZGVkKVxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGAke3RoaXMuYWN0b3IubmFtZX0gZG9lcyBub3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IHJvbGwuZGlmZmljdWx0eVxuICAgIHJvbGwuaXNTdWNjZXNzID0gdHJ1ZVxuICAgIHJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgdXBncmFkZVJvbGwgKHJvbGxJbmRleCwgdXBncmFkZWluZGV4KSB7XG4gICAgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICBjb25zdCByb2xsID0gdGhpcy5yb2xsc1tyb2xsSW5kZXhdXG4gICAgY29uc3QgaW5jcmVhc2VkU3VjY2VzcyA9IHJvbGwuaW5jcmVhc2VTdWNjZXNzW3VwZ3JhZGVpbmRleF1cbiAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5sdWNrQW1vdW50KVxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGAke3RoaXMuYWN0b3IubmFtZX0gZG9lcyBub3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBuZXdTdWNjZXNzTGV2ZWwgPSBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLm5ld1N1Y2Nlc3NMZXZlbClcbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGlmIChyb2xsLmRpZmZpY3VsdHkgPD0gbmV3U3VjY2Vzc0xldmVsKSByb2xsLmlzU3VjY2VzcyA9IHRydWVcbiAgICByb2xsLmx1Y2tTcGVudCA9IHRydWVcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gbmV3IENvQzdSYW5nZUluaXRpYXRvcigpXG4gICAgcmFuZ2VJbml0aWF0b3IuX3RhcmdldHMgPSBbXVxuICAgIGlmIChtZXNzYWdlSWQpIHJhbmdlSW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIGVsc2UgaWYgKGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKSkge1xuICAgICAgcmFuZ2VJbml0aWF0b3IubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfVxuXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyYW5nZUluaXRpYXRvciwgY2FyZClcbiAgICBjb25zdCBjYXJkVGFyZ2V0cyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpXG4gICAgZm9yIChjb25zdCB0IG9mIGNhcmRUYXJnZXRzKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBDb0M3UmFuZ2VUYXJnZXQuZ2V0RnJvbUVsZW1lbnQodClcbiAgICAgIHJhbmdlSW5pdGlhdG9yLnRhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuXG4gICAgY29uc3QgY2FyZFNob3RzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuc2hvdCcpXG4gICAgaWYgKGNhcmRTaG90cykge1xuICAgICAgZm9yIChjb25zdCBzIG9mIGNhcmRTaG90cykge1xuICAgICAgICBjb25zdCBzaG90ID0ge31cbiAgICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChzaG90LCBzKVxuICAgICAgICByYW5nZUluaXRpYXRvci5zaG90cy5wdXNoKHNob3QpXG4gICAgICB9XG4gICAgfVxuICAgIC8vIGVsc2Uge1xuICAgIC8vICBjb25zdCBzaG90ID0ge1xuICAgIC8vICAgICAgc2hvdE9yZGVyOiAwLFxuICAgIC8vICAgICAgYWN0b3JLZXk6IG51bGwsXG4gICAgLy8gICAgICBhY3Rvck5hbWU6ICdkdW1teSdcbiAgICAvLyAgfVxuICAgIC8vIH1cblxuICAgIHJhbmdlSW5pdGlhdG9yLnJvbGxzID0gW11cbiAgICBjb25zdCByb2xscyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLnJvbGwtcmVzdWx0JylcbiAgICBmb3IgKGNvbnN0IHIgb2Ygcm9sbHMpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChyKVxuICAgICAgcmFuZ2VJbml0aWF0b3Iucm9sbHMucHVzaChyb2xsKVxuICAgIH1cblxuICAgIHJhbmdlSW5pdGlhdG9yLmRhbWFnZSA9IFtdXG4gICAgY29uc3QgZGFtYWdlUm9sbHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW1hZ2UtcmVzdWx0cycpXG4gICAgZm9yIChjb25zdCBkciBvZiBkYW1hZ2VSb2xscykge1xuICAgICAgY29uc3QgZGFtYWdlUm9sbCA9IENvQzdEYW1hZ2UuZ2V0RnJvbUVsZW1lbnQoZHIpXG4gICAgICByYW5nZUluaXRpYXRvci5kYW1hZ2UucHVzaChkYW1hZ2VSb2xsKVxuICAgIH1cblxuICAgIHJldHVybiByYW5nZUluaXRpYXRvclxuICB9XG5cbiAgYXN5bmMgcm9sbERhbWFnZSAoKSB7XG4gICAgdGhpcy5kYW1hZ2UgPSBbXVxuICAgIGNvbnN0IGhpdHMgPSB0aGlzLnN1Y2Nlc3NmdWxIaXRzXG5cbiAgICAvLyBsZXQgdm9sbGV5U2l6ZSA9IDE7XG4gICAgLy8gaWYoIHRoaXMuZnVsbEF1dG8pIHtcbiAgICAvLyAgdm9sbGV5U2l6ZSA9IHRoaXMudm9sbGV5U2l6ZTtcbiAgICAvLyAgaWYodm9sbGV5U2l6ZSA8IDMpIHZvbGxleVNpemUgPSAzO1xuICAgIC8vIH1cbiAgICAvLyBpZiggdGhpcy5idXJzdCkgdm9sbGV5U2l6ZSA9IHBhcnNlSW50KHRoaXMud2VhcG9uLmRhdGEuZGF0YS51c2VzUGVyUm91bmQuYnVyc3QpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGl0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaCA9IGhpdHNbaV1cbiAgICAgIGNvbnN0IHZvbGxleVNpemUgPSBwYXJzZUludChoLnNob3QuYnVsbGV0c1Nob3QpXG4gICAgICBjb25zdCBkYW1hZ2VSb2xscyA9IFtdXG5cbiAgICAgIGlmICh2b2xsZXlTaXplID4gMCkge1xuICAgICAgICBsZXQgZGFtYWdlRm9ybXVsYSA9IFN0cmluZyhoLnNob3QuZGFtYWdlKVxuICAgICAgICBpZiAoIWRhbWFnZUZvcm11bGEgfHwgZGFtYWdlRm9ybXVsYSA9PT0gJycpIGRhbWFnZUZvcm11bGEgPSAnMCdcbiAgICAgICAgY29uc3QgZGFtYWdlRGllID0gQ29DN0RhbWFnZS5nZXRNYWluRGllKGRhbWFnZUZvcm11bGEpXG4gICAgICAgIGNvbnN0IG1heERhbWFnZSA9IG5ldyBSb2xsKGRhbWFnZUZvcm11bGEpLmV2YWx1YXRlKHtcbiAgICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgICB9KS50b3RhbFxuICAgICAgICBjb25zdCBjcml0aWNhbERhbWFnZUZvcm11bGEgPSB0aGlzLndlYXBvbi5pbXBhbGVcbiAgICAgICAgICA/IGAke2RhbWFnZUZvcm11bGF9ICsgJHttYXhEYW1hZ2V9YFxuICAgICAgICAgIDogYCR7bWF4RGFtYWdlfWBcbiAgICAgICAgY29uc3QgY3JpdGljYWxEYW1hZ2VEaWUgPSBDb0M3RGFtYWdlLmdldE1haW5EaWUoY3JpdGljYWxEYW1hZ2VGb3JtdWxhKVxuXG4gICAgICAgIGxldCBpbXBhbGluZ1Nob3RzID0gMFxuICAgICAgICBsZXQgc3VjY2Vzc2Z1bFNob3RzID0gMFxuICAgICAgICBsZXQgY3JpdGljYWwgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5mdWxsQXV0byB8fCB0aGlzLmJ1cnN0KSB7XG4gICAgICAgICAgc3VjY2Vzc2Z1bFNob3RzID0gTWF0aC5mbG9vcih2b2xsZXlTaXplIC8gMilcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VjY2Vzc2Z1bFNob3RzID09PSAwKSBzdWNjZXNzZnVsU2hvdHMgPSAxXG4gICAgICAgIGlmIChoLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICAgIGltcGFsaW5nU2hvdHMgPSBzdWNjZXNzZnVsU2hvdHNcbiAgICAgICAgICBzdWNjZXNzZnVsU2hvdHMgPSB2b2xsZXlTaXplIC0gaW1wYWxpbmdTaG90c1xuICAgICAgICAgIGNyaXRpY2FsID0gdHJ1ZVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgIT09IGgucm9sbC5zdWNjZXNzTGV2ZWwgJiZcbiAgICAgICAgICAgIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPD0gaC5yb2xsLmRpZmZpY3VsdHkgfHxcbiAgICAgICAgICAgICAgaC5zaG90LmV4dHJlbWVSYW5nZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IHZvbGxleVNpemVcbiAgICAgICAgICAgIGltcGFsaW5nU2hvdHMgPSAwXG4gICAgICAgICAgICBjcml0aWNhbCA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRvdGFsID0gMFxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc3VjY2Vzc2Z1bFNob3RzOyBpbmRleCsrKSB7XG4gICAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGRhbWFnZUZvcm11bGEpXG4gICAgICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xuICAgICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwpXG4gICAgICAgICAgLyoqKioqKioqKioqKioqKioqL1xuICAgICAgICAgIGRhbWFnZVJvbGxzLnB1c2goe1xuICAgICAgICAgICAgZm9ybXVsYTogZGFtYWdlRm9ybXVsYSxcbiAgICAgICAgICAgIHRvdGFsOiByb2xsLnRvdGFsLFxuICAgICAgICAgICAgZGllOiBkYW1hZ2VEaWUsXG4gICAgICAgICAgICBjcml0aWNhbDogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRvdGFsICs9IHJvbGwudG90YWxcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgaW1wYWxpbmdTaG90czsgaW5kZXgrKykge1xuICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChjcml0aWNhbERhbWFnZUZvcm11bGEpXG4gICAgICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xuICAgICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwpXG4gICAgICAgICAgLyoqKioqKioqKioqKioqKioqL1xuICAgICAgICAgIGRhbWFnZVJvbGxzLnB1c2goe1xuICAgICAgICAgICAgZm9ybXVsYTogY3JpdGljYWxEYW1hZ2VGb3JtdWxhLFxuICAgICAgICAgICAgdG90YWw6IHJvbGwudG90YWwsXG4gICAgICAgICAgICBkaWU6IGNyaXRpY2FsRGFtYWdlRGllLFxuICAgICAgICAgICAgY3JpdGljYWw6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRvdGFsICs9IHJvbGwudG90YWxcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0YXJnZXROYW1lID0gJ2R1bW15J1xuICAgICAgICBsZXQgdGFyZ2V0ID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoaC5yb2xsLnRhcmdldEtleSlcbiAgICAgICAgaWYgKCF0YXJnZXQpIHRhcmdldCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGgucm9sbC50YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICBpZiAodGFyZ2V0KSB0YXJnZXROYW1lID0gdGFyZ2V0Lm5hbWVcblxuICAgICAgICB0aGlzLmRhbWFnZS5wdXNoKHtcbiAgICAgICAgICB0YXJnZXRLZXk6IGgucm9sbC50YXJnZXRLZXksXG4gICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICByb2xsczogZGFtYWdlUm9sbHMsXG4gICAgICAgICAgdG90YWwsXG4gICAgICAgICAgY3JpdGljYWwsXG4gICAgICAgICAgZGVhbHQ6IGZhbHNlLFxuICAgICAgICAgIHJlc3VsdFN0cmluZzogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5yYW5nZUNvbWJhdERhbWFnZScsIHtcbiAgICAgICAgICAgIG5hbWU6IHRhcmdldE5hbWUsXG4gICAgICAgICAgICB0b3RhbFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kYW1hZ2VSb2xsZWQgPSB0aGlzLmRhbWFnZS5sZW5ndGggIT09IDBcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2UgKCkge1xuICAgIGZvciAobGV0IGRJbmRleCA9IDA7IGRJbmRleCA8IHRoaXMuZGFtYWdlLmxlbmd0aDsgZEluZGV4KyspIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5kYW1hZ2VbZEluZGV4XS50YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKGFjdG9yID09PSBudWxsKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vVGFyZ2V0VG9EYW1hZ2UnKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxUYWtlbiA9IDBcbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbEFic29yYmVkID0gMFxuICAgICAgICBmb3IgKFxuICAgICAgICAgIGxldCBySW5kZXggPSAwO1xuICAgICAgICAgIHJJbmRleCA8IHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHMubGVuZ3RoO1xuICAgICAgICAgIHJJbmRleCsrXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGRlYWx0QW1vdW50ID0gYXdhaXQgYWN0b3IuZGVhbERhbWFnZShcbiAgICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50b3RhbFxuICAgICAgICAgIClcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4gKz0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udGFrZW4gPSBkZWFsdEFtb3VudFxuICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS5hYnNvcmJlZCA9XG4gICAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udG90YWwgLSBkZWFsdEFtb3VudFxuICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZCArPVxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRvdGFsIC0gZGVhbHRBbW91bnRcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLmRlYWx0ID0gdHJ1ZVxuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcucmFuZ2VDb21iYXREYW1hZ2VBcm1vcicsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kYW1hZ2VbZEluZGV4XS50YXJnZXROYW1lLFxuICAgICAgICAgICAgdG90YWw6IHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxUYWtlbixcbiAgICAgICAgICAgIGFybW9yOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsQWJzb3JiZWRcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5kYW1hZ2VEZWFsdCA9IHRydWVcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN1JhbmdlVGFyZ2V0IHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuY292ZXIgPSBmYWxzZVxuICAgIHRoaXMucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcbiAgICB0aGlzLmJhc2VSYW5nZSA9IHRydWVcbiAgICB0aGlzLmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgdGhpcy5leHRyZW1lUmFuZ2UgPSBmYWxzZVxuICAgIHRoaXMuaW5NZWxlZSA9IGZhbHNlXG4gIH1cblxuICBnZXQgYmlnICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9iaWcpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IuYnVpbGQpIHRoaXMuX2JpZyA9IHRoaXMuYWN0b3IuYnVpbGQgPj0gNFxuICAgICAgZWxzZSB0aGlzLl9iaWcgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYmlnXG4gIH1cblxuICBzZXQgYmlnIChiKSB7XG4gICAgdGhpcy5fYmlnID0gYlxuICB9XG5cbiAgZ2V0IHNtYWxsICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9zbWFsbCkge1xuICAgICAgaWYgKHRoaXMuYWN0b3IgJiYgdGhpcy5hY3Rvci5idWlsZCkgdGhpcy5fc21hbGwgPSB0aGlzLmFjdG9yLmJ1aWxkIDw9IC0yXG4gICAgICBlbHNlIHRoaXMuX3NtYWxsID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NtYWxsXG4gIH1cblxuICBzZXQgc21hbGwgKGIpIHtcbiAgICB0aGlzLl9zbWFsbCA9IGJcbiAgfVxuXG4gIGdldCBub3JtYWwgKCkge1xuICAgIHJldHVybiAhdGhpcy5iaWcgJiYgIXRoaXMuc21hbGxcbiAgfVxuXG4gIHNldCBub3JtYWwgKGIpIHtcbiAgICB0aGlzLl9iaWcgPSBmYWxzZVxuICAgIHRoaXMuX3NtYWxsID0gZmFsc2VcbiAgfVxuXG4gIGdldCBpc0Zhc3QgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IubW92KSByZXR1cm4gdGhpcy5hY3Rvci5tb3YgPj0gOFxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGZhc3QgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2Zhc3QpIHtcbiAgICAgIC8vIGlmKCB0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IubW92KSB0aGlzLl9mYXN0ID0gdGhpcy5hY3Rvci5tb3YgPj0gODtcbiAgICAgIC8vIGVsc2UgdGhpcy5fZmFzdCA9IGZhbHNlO1xuICAgICAgdGhpcy5fZmFzdCA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9mYXN0XG4gIH1cblxuICBzZXQgZmFzdCAoYikge1xuICAgIHRoaXMuX2Zhc3QgPSBiXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yS2V5ICYmICF0aGlzLl9hY3Rvcikge1xuICAgICAgdGhpcy5fYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FjdG9yXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICBpZiAodGhpcy5hY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICAgIHJldHVybiAnRHVtbXknXG4gIH1cblxuICBnZXQgaW1nICgpIHtcbiAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgaWYgKHRoaXMudG9rZW4uZG9jdW1lbnQ/LnRleHR1cmUuc3JjKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRva2VuLmRvY3VtZW50Py50ZXh0dXJlLnNyY1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5hY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuZGF0YS5pbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5fdG9rZW4gJiYgdGhpcy5hY3RvcktleSkge1xuICAgICAgdGhpcy5fdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdG9rZW5cbiAgfVxuXG4gIGdldCBzaXplVGV4dCAoKSB7XG4gICAgaWYgKHRoaXMuYmlnKSB7XG4gICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5CaWdUYXJnZXRUaXRsZScpXG4gICAgfVxuICAgIGlmICh0aGlzLnNtYWxsKSB7XG4gICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5TbWFsbFRhcmdldFRpdGxlJylcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuTm9ybWFsVGFyZ2V0VGl0bGUnKVxuICB9XG5cbiAgZ2V0IHNpemVMYWJlbCAoKSB7XG4gICAgaWYgKHRoaXMuYmlnKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5CaWdUYXJnZXQnKVxuICAgIGlmICh0aGlzLnNtYWxsKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmNvbWJhdENhcmQuU21hbGxUYXJnZXQnKVxuICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLk5vcm1hbFRhcmdldCcpXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgaWYgKHRoaXMuYmFzZVJhbmdlIHx8IHRoaXMucG9pbnRCbGFua1JhbmdlKSB7XG4gICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICAgIGlmICh0aGlzLmxvbmdSYW5nZSkgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgIGlmICh0aGlzLmV4dHJlbWVSYW5nZSkgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGVcbiAgfVxuXG4gIGdldCBtb2RpZmllciAoKSB7XG4gICAgbGV0IG1vZGlmaWVyID0gMFxuICAgIGlmICh0aGlzLmNvdmVyKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMucG9pbnRCbGFua1JhbmdlKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuZmFzdCkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnNtYWxsKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMuYmlnKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuaW5NZWxlZSkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnN1cnByaXNlZCkgbW9kaWZpZXIrK1xuICAgIHJldHVybiBtb2RpZmllclxuICB9XG5cbiAgc2V0IHRva2VuICh0KSB7XG4gICAgdGhpcy5fdG9rZW4gPSB0XG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUVsZW1lbnQgKGVsZW1lbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHRhcmdldCwgZWxlbWVudClcbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBzdGF0aWMgY2hhbmdlRGlzcGxheWVkVGFyZ2V0IChldmVudCkge1xuICAgIGlmICghZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldC1zZWxlY3RvcicpKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHRhcmdldFNlbGVjdG9yID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHRhcmdldHMgPSB0YXJnZXRTZWxlY3Rvci5jbG9zZXN0KCcudGFyZ2V0cycpXG4gICAgY29uc3QgdGFyZ2V0TGlzdCA9IHRhcmdldHMucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpXG4gICAgcmV0dXJuIHRhcmdldExpc3RcbiAgfVxuXG4gIGF0dGFjaFRvRWxlbWVudCAoZWxlbWVudCkge1xuICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KHRoaXMsIGVsZW1lbnQpXG4gIH1cblxuICB0b2dnbGVGbGFnIChmbGFnKSB7XG4gICAgaWYgKFxuICAgICAgZmxhZyA9PT0gJ2Jhc2VSYW5nZScgfHxcbiAgICAgIGZsYWcgPT09ICdsb25nUmFuZ2UnIHx8XG4gICAgICBmbGFnID09PSAnZXh0cmVtZVJhbmdlJyB8fFxuICAgICAgZmxhZyA9PT0gJ3BvaW50QmxhbmtSYW5nZSdcbiAgICApIHtcbiAgICAgIHRoaXMucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMuYmFzZVJhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMubG9uZ1JhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMub3V0T2ZSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzW2ZsYWddID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAoZmxhZyA9PT0gJ3NpemUnKSB7XG4gICAgICBpZiAodGhpcy5zbWFsbCkge1xuICAgICAgICB0aGlzLnNtYWxsID0gZmFsc2VcbiAgICAgICAgdGhpcy5iaWcgPSB0cnVlXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYmlnKSB7XG4gICAgICAgIHRoaXMuc21hbGwgPSBmYWxzZVxuICAgICAgICB0aGlzLmJpZyA9IGZhbHNlXG4gICAgICB9IGVsc2UgdGhpcy5zbWFsbCA9IHRydWVcbiAgICB9IGVsc2UgdGhpc1tmbGFnXSA9ICF0aGlzW2ZsYWddXG4gICAgaWYgKGZsYWcgPT09ICdmYXN0JyAmJiB0aGlzLmZhc3QgJiYgIXRoaXMuaXNGYXN0KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2FybkZhc3RUYXJnZXRXaXRoV3JvbmdNT1YnLCB7XG4gICAgICAgICAgbW92OiB0aGlzLmFjdG9yLm1vdlxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBDT05TVCwgZ2FtZSwgVG9rZW4sIHRva2VuRGF0YSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vYXBwcy9jb2M3LWxpbmsuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4vY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi9jaGF0L3JhbmdlY29tYmF0LmpzJ1xuaW1wb3J0IHsgQ29DN1JvbGwsIGNoYXRIZWxwZXIsIGlzQ3RybEtleSB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXG4vLyBpbXBvcnQgeyBDb0M3RGFtYWdlUm9sbCB9IGZyb20gJy4vY2hhdC9kYW1hZ2VjYXJkcy5qcyc7XG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuL2NoYXQvY29uY2hlY2suanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgT3Bwb3NlZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4vY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi9kaWNlLmpzJ1xuXG5jb25zdCBDSEFUX0NPQzdfTUVTU0FHRSA9IHtcbiAgRkFLRVJPTEw6XG4gICAgJzxkaXYgY2xhc3M9XCJkaWNlLXJvbGxcIj48ZGl2IGNsYXNzPVwiZGljZS1yZXN1bHRcIj48ZGl2IGNsYXNzPVwiZGljZS1mb3JtdWxhXCI+Pz8/PC9kaXY+PGg0IGNsYXNzPVwiZGljZS10b3RhbFwiPj88L2g0PjwvZGl2PjwvZGl2Pidcbn1cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhdCB7XG4gIHN0YXRpYyByZW5kZXJDaGF0TWVzc2FnZUhvb2sgKGNoYXRNZXNzYWdlLCBodG1sKSB7XG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnR01TZWxmUm9sbCcpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbC5maW5kKCcud2hpc3Blci10bycpLnJlbW92ZSgpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuZmxhdm9yLXRleHQnKVxuICAgICAgICAucmVwbGFjZVdpdGgoXG4gICAgICAgICAgYDxzcGFuIGNsYXNzPVwiZmxhdm9yLXRleHRcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LlJvbGxTZWNyZXREaWNlJ1xuICAgICAgICAgICl9PC9zcGFuPmBcbiAgICAgICAgKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpXG4gICAgICAgIC5yZXBsYWNlV2l0aChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtY29udGVudFwiPiR7Q0hBVF9DT0M3X01FU1NBR0UuRkFLRVJPTEx9PC9kaXY+YFxuICAgICAgICApXG4gICAgfVxuXG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAncmVtb3ZlV2lzcGVyVGFyZ2V0cycpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbC5maW5kKCcud2hpc3Blci10bycpLnJlbW92ZSgpXG4gICAgfVxuXG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnZmFrZVJvbGwnKSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmZsYXZvci10ZXh0JylcbiAgICAgICAgLnJlcGxhY2VXaXRoKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5LZWVwZXJTZW50RGVjb3knKSlcbiAgICAgIGh0bWwuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpLnJlbW92ZSgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGZha2VSb2xsTWVzc2FnZSAoKSB7XG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsU2VjcmV0RGljZScpLFxuICAgICAgd2hpc3BlcjogZ2FtZS51c2Vycy5wbGF5ZXJzLFxuICAgICAgdHlwZTogQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVIsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgR01TZWxmUm9sbDogZmFsc2UsXG4gICAgICAgICAgcmVtb3ZlV2lzcGVyVGFyZ2V0czogdHJ1ZSxcbiAgICAgICAgICBmYWtlUm9sbDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY29udGVudDogQ0hBVF9DT0M3X01FU1NBR0UuRkFLRVJPTExcbiAgICB9XG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG4gIH1cblxuICAvLyBUT0RPIHJlbXBsYWNlciBsZXMgZ2V0RWxlbWVudHNCeXh4eHggcGFyIHF1ZXJ5U2VsZWN0b3JcblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gICAqICBJbml0IHNvY2tldHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgc3RhdGljIHJlYWR5ICgpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQucmVhZHknKTtcbiAgICBnYW1lLkNvQzcgPSAnaW5pdCdcbiAgfVxuXG4gIC8vIHN0YXRpYyBvbk1lc3NhZ2UoIGRhdGEpIHtcbiAgLy8gIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5vbk1lc3NhZ2UnKTtcbiAgLy8gIGNvbnNvbGUubG9nKGBtZXNzYWdlIHJlY2VpdmVkIHNlbmQmZXIgOiR7ZGF0YS51c2VyfSBtZXNzYWdlIHR5cGUgOiAke2RhdGEuYWN0aW9ufSBmb3IgbWVzc2FnZSA6JHtkYXRhLm1lc3NhZ2VJZH1gKTtcbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAgICogIENoYXQgTWVzc2FnZSBIZWxwZXJzICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyBhc3luYyBjaGF0TGlzdGVuZXJzIChhcHAsIGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuY2FyZC1idXR0b25zIGJ1dHRvbicsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZEFjdGlvbi5iaW5kKHRoaXMpXG4gICAgKVxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJy5jYXJkLWJ1dHRvbnMgYnV0dG9uJywgQ29DN0NoYXQuX29uQ2hhdENhcmRUZXN0LmJpbmQodGhpcykpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5jYXJkLXRpdGxlJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yYWRpby1zd2l0Y2gnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRSYWRpb1N3aXRjaC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5wYW5lbC1zd2l0Y2gnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2guYmluZCh0aGlzKVxuICAgIClcblxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5zaW1wbGUtZmxhZycsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy52b2xsZXktc2l6ZScsIENvQzdDaGF0Ll9vbkNoYXRDYXJkVm9sbGV5U2l6ZS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmRyb3Bkb3duLWVsZW1lbnQnLFxuICAgICAgQ29DN0NoYXQuX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcuc2ltcGxlLXRvZ2dsZScsIENvQzdDaGF0Ll9vblRvZ2dsZVNlbGVjdGVkLmJpbmQodGhpcykpXG4gICAgLy8gaHRtbC5vbignY2xpY2snLCAnLmlzLW91dG51bWJlcmVkJywgQ29DN0NoYXQuX29uT3V0bnVtYmVyZWRTZWxlY3RlZC5iaW5kKHRoaXMpKTtcblxuICAgIGh0bWwub24oJ2NsaWNrJywgJy50YXJnZXQtc2VsZWN0b3InLCBDb0M3Q2hhdC5fb25UYXJnZXRTZWxlY3QuYmluZCh0aGlzKSlcblxuICAgIGh0bWwub24oJ2RibGNsaWNrJywgJy5vcGVuLWFjdG9yJywgQ29DN0NoYXQuX29uT3BlbkFjdG9yLmJpbmQodGhpcykpXG5cbiAgICBDb0M3TGluay5iaW5kRXZlbnRzSGFuZGxlcihodG1sKVxuXG4gICAgaHRtbC5vbignY2xpY2snLCAnY29jNy1pbmxpbmUtcmVzdWx0JywgQ29DN0NoYXQuX29uSW5saW5lLmJpbmQodGhpcykpXG5cbiAgICAvLyBSb2xsQ2FyZC5iaW5kTGlzdGVybmVycyggaHRtbCk7XG4gICAgT3Bwb3NlZENoZWNrQ2FyZC5iaW5kTGlzdGVybmVycyhodG1sKVxuICAgIENvbWJpbmVkQ2hlY2tDYXJkLmJpbmRMaXN0ZXJuZXJzKGh0bWwpXG4gIH1cblxuICBzdGF0aWMgX29uT3BlbkFjdG9yIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhY3RvcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3RvcktleVxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoYWN0b3IuaXNPd25lcikgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG9uVXBkYXRlQ2hhdE1lc3NhZ2UgKGNoYXRNZXNzYWdlKSB7XG4gICAgdWkuY2hhdC5zY3JvbGxCb3R0b20oKVxuXG4gICAgLy8gaWYoIGNoYXRNZXNzYWdlLmdldEZsYWcoICdDb0M3JywgJ3JldmVsZWQnKSl7XG4gICAgLy8gfVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSAmJiBjaGF0TWVzc2FnZS50eXBlID09PSAwKSB7XG4gICAgICBjb25zdCBjYXJkID0gJChjaGF0TWVzc2FnZS5jb250ZW50KVswXVxuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICAgIGlmIChjYXJkLmRhdGFzZXQucmVzb2x2ZWQgPT09ICd0cnVlJykge1xuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQudGFyZ2V0Q2FyZCkge1xuICAgICAgICAgICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgICAgICAgIGluaXRpYXRvci50YXJnZXRDYXJkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaWYgKHRhcmdldC5yZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0Lm1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgICAgIHRhcmdldC5yZXNvbHV0aW9uQ2FyZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByZXNvbHV0aW9uQ2FyZC5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICBpZiAoIWluaXRpYXRvci5jaGVja1JldmVhbGVkKSBhd2FpdCBpbml0aWF0b3IucmV2ZWFsQ2hlY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGlmIChpbml0aWF0b3IucmVzb2x1dGlvbkNhcmQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICBpbml0aWF0b3IucmVzb2x1dGlvbkNhcmRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzb2x1dGlvbkNhcmQucmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgaWYgKCFpbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkgYXdhaXQgaW5pdGlhdG9yLnJldmVhbENoZWNrKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZChjaGF0TWVzc2FnZS5pZClcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgICAgICAgdGFyZ2V0LnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgIHRhcmdldC5yZXNvbHV0aW9uQ2FyZFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgYXdhaXQgcmVzb2x1dGlvbkNhcmQucmVzb2x2ZSgpXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5tZWxlZUluaXRpYXRvci5jaGVja1JldmVhbGVkKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHRhcmdldC5tZWxlZUluaXRpYXRvci5yZXZlYWxDaGVjaygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJlbmRlck1lc3NhZ2VIb29rIChtZXNzYWdlLCBodG1sKSB7XG4gICAgdWkuY2hhdC5zY3JvbGxCb3R0b20oKVxuXG4gICAgSW50ZXJhY3RpdmVDaGF0Q2FyZC5iaW5kTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAobWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2NoZWNrUmV2ZWFsZWQnKSkge1xuICAgICAgaHRtbC5maW5kKCcuZGljZS1yb2xsJykucmVtb3ZlQ2xhc3MoJ2dtLXZpc2libGUtb25seScpXG4gICAgICBodG1sWzBdLmRhdGFzZXQuY2hlY2tSZXZlYWxlZCA9IHRydWVcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgc2hvd2luZyBkcm9wZG93biBzZWxlY3Rpb25cbiAgICBodG1sXG4gICAgICAuZmluZCgnLmRyb3BidG4nKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+XG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgICAuY2xvc2VzdCgnLmRyb3Bkb3duJylcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKVxuICAgICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcbiAgICAgIClcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmRyb3Bkb3duJylcbiAgICAgIC5tb3VzZWxlYXZlKGV2ZW50ID0+XG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKVxuICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JylcbiAgICAgIClcblxuICAgIC8vIGNvbnNvbGUubG9nKCcqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiotLT5Db0M3Q2hhdC5tZXNzYWdlTGlzdGVuZXJzIG1lc3NhZ2UgOicgKyBtZXNzYWdlLmlkKTtcbiAgICAvLyBtZXNzYWdlLmRhdGEuY29udGVudCA9IFwiXCI7XG4gICAgLy8gZGF0YS5tZXNzYWdlLmNvbnRlbnQgPSBcIlwiO1xuXG4gICAgLy8gV2hlbiBhIG5ldyBjYXJkIGlzIHB1Ymxpc2hlZCwgY2hlY2sgd2V0aGVyIGl0J3MgYSByb2xsIHRoYXQgbW9kaWZpZXMgYW4gb3RoZXIgY2FyZC5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnN0IGNhcmQgPSBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJy5jb2M3LmNoYXQtY2FyZCcpXG4gICAgICBpZiAoY2FyZCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpICYmXG4gICAgICAgICAgIShjYXJkLmRhdGFzZXQucHJvY2Vzc2VkID09PSAndHJ1ZScpICYmXG4gICAgICAgICAgY2FyZC5kYXRhc2V0LnJlZk1lc3NhZ2VJZFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCByb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUVsZW1lbnQoY2FyZClcblxuICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQuc2lkZSA9PT0gJ3RhcmdldCcpIHtcbiAgICAgICAgICAgIHJvbGwuZGVmZW5kYW50SWQgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA/IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgIDogY2FyZC5kYXRhc2V0LmFjdG9ySWRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhcmQuZGF0YXNldC5zaWRlID09PSAnaW5pdGlhdG9yJykge1xuICAgICAgICAgICAgcm9sbC5pbml0aWF0b3JJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgID8gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgOiBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgICAgICAgIH1cbiAgICAgICAgICBjYXJkLmRhdGFzZXQucHJvY2Vzc2VkID0gJ3RydWUnXG5cbiAgICAgICAgICBDb0M3Q2hhdC51cGRhdGVDb21iYXRDYXJkVGFyZ2V0KHJvbGwpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB1c2VyT25seSA9IGh0bWwuZmluZCgnLnRhcmdldC1vbmx5JylcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdXNlck9ubHkpIHtcbiAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIGNvbnN0IGFjdG9ySWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1hY3Rvci1pZCcpXG4gICAgICAgIGlmIChhY3RvcklkKSB7XG4gICAgICAgICAgaWYgKGdhbWUuYWN0b3JzLmdldChhY3RvcklkKS5pc093bmVyKSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZ21Pbmx5ID0gaHRtbC5maW5kKCcuZ20tb25seScpXG4gICAgZm9yIChjb25zdCB6b25lIG9mIGdtT25seSkge1xuICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB1c2VyVmlzaWJsZU9ubHkgPSBodG1sLmZpbmQoJy51c2VyLXZpc2libGUtb25seScpXG4gICAgZm9yIChjb25zdCBlbGVtIG9mIHVzZXJWaXNpYmxlT25seSkge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9XG5cbiAgICBjb25zdCBnbVZpc2libGVPbmx5ID0gaHRtbC5maW5kKCcuZ20tdmlzaWJsZS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IGVsZW0gb2YgZ21WaXNpYmxlT25seSkge1xuICAgICAgaWYgKCEoZ2FtZS51c2VyLmlzR00gfHwgKGdhbWUudXNlci5pc1RydXN0ZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndHJ1c3RlZENhblNlZUNoYXRDYXJkJykpKSkgZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfVxuXG4gICAgY29uc3Qgb3duZXJWaXNpYmxlT25seSA9IGh0bWwuZmluZCgnLm93bmVyLXZpc2libGUtb25seScpXG4gICAgZm9yIChjb25zdCB6b25lIG9mIG93bmVyVmlzaWJsZU9ubHkpIHtcbiAgICAgIC8vIFRyeSByZXRyaWV2aW5nIGFjdG9yXG4gICAgICBsZXQgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUuZGF0YXNldD8uYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHNlbGYuXG4gICAgICBpZiAoIWFjdG9yKSBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGNoYXQgY2FyZC5cbiAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUucGFyZW50RWxlbWVudC5kYXRhc2V0LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBwYXJlbnQgZWxlbWVudC5cbiAgICAgIH1cbiAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtYWN0b3Ita2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XG4gICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLWFjdG9yLWtleVxuICAgICAgfVxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS10b2tlbi1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtdG9rZW4ta2V5XG4gICAgICB9XG5cbiAgICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCBhY3RvcklkKTtcbiAgICAgIGlmICgoYWN0b3IgJiYgIWFjdG9yLmlzT3duZXIpIHx8IGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIHpvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgfSAvLyBpZiBjdXJyZW50IHVzZXIgZG9lc24ndCBvd24gdGhpcyBoZSBjYW4ndCBpbnRlcnJhY3RcbiAgICAgIC8vIGlmKCAhQ29DN0NoYXQuaXNDYXJkT3duZXIoIHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSkge3pvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzt9XG4gICAgfVxuXG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgLy8gR00gY2FuIHNlZSBldmVyeXRoaW5nXG4gICAgICBjb25zdCBvd25lck9ubHkgPSBodG1sLmZpbmQoJy5vd25lci1vbmx5JylcbiAgICAgIGZvciAoY29uc3Qgem9uZSBvZiBvd25lck9ubHkpIHtcbiAgICAgICAgLy8gVHJ5IHJldHJpZXZpbmcgYWN0b3JcbiAgICAgICAgbGV0IGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICB6b25lLmRhdGFzZXQ/LmFjdG9yS2V5IHx8IHpvbmUuZGF0YXNldD8uYWN0b3JJZFxuICAgICAgICApIC8vIFRyeSB3aXRoIHNlbGYuXG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGNoYXQgY2FyZC5cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUucGFyZW50RWxlbWVudC5kYXRhc2V0LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBwYXJlbnQgZWxlbWVudC5cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS1hY3Rvci1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS1hY3Rvci1rZXlcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS10b2tlbi1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS10b2tlbi1rZXlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCBhY3RvcklkKTtcbiAgICAgICAgaWYgKChhY3RvciAmJiAhYWN0b3IuaXNPd25lcikgfHwgKCFhY3RvciAmJiAhZ2FtZS51c2VyLmlzR00pKSB7XG4gICAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIH0gLy8gaWYgY3VycmVudCB1c2VyIGRvZXNuJ3Qgb3duIHRoaXMgaGUgY2FuJ3QgaW50ZXJyYWN0XG4gICAgICAgIC8vIGlmKCAhQ29DN0NoYXQuaXNDYXJkT3duZXIoIHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSkge3pvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzt9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGdtU2VsZWN0T25seSA9IGh0bWwuZmluZCgnLmdtLXNlbGVjdC1vbmx5JylcbiAgICAgIGlmICghKGdhbWUudXNlci5pc1RydXN0ZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmQnKSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBzZWxlY3Qgb2YgZ21TZWxlY3RPbmx5KSB7XG4gICAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2luYWN0aXZlJylcbiAgICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LnJlbW92ZSgnc2ltcGxlLWZsYWcnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBhY3Rpb25UeXBlU3RyaW5nICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmlnaHRCYWNrOiAnQ29DNy5maWdodEJhY2snLFxuICAgICAgbWFuZXV2ZXI6ICdDb0M3Lm1hbmV1dmVyJyxcbiAgICAgIGRvZGdpbmc6ICdDb0M3LmRvZGdlJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfb25UYXJnZXRTZWxlY3QgKGV2ZW50KSB7XG4gICAgY29uc3QgaW5kZXggPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQua2V5KVxuICAgIGNvbnN0IHRhcmdldHNTZWxlY3RvciA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldHMtc2VsZWN0b3InKVxuICAgIGZvciAoY29uc3QgaSBvZiB0YXJnZXRzU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCgnaW1nJykpIHtcbiAgICAgIGkuc3R5bGUuYm9yZGVyID0gJ25vbmUnXG4gICAgfVxuICAgIHRhcmdldHNTZWxlY3RvclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWtleT1cIiR7aW5kZXh9XCJdYClcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICMwMDAnXG4gICAgY29uc3QgdGFyZ2V0cyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldHMnKVxuICAgIGZvciAoY29uc3QgdCBvZiB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJnZXQnKSkge1xuICAgICAgdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB0LmRhdGFzZXQuYWN0aXZlID0gJ2ZhbHNlJ1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXRUb0Rpc3BsYXkgPSB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgW2RhdGEtdGFyZ2V0LWtleT1cIiR7aW5kZXh9XCJdYFxuICAgIClcbiAgICB0YXJnZXRUb0Rpc3BsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICB0YXJnZXRUb0Rpc3BsYXkuZGF0YXNldC5hY3RpdmUgPSAndHJ1ZSdcbiAgICAvLyBjb25zdCBjaGF0Q2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZC5yYW5nZScpO1xuICAgIC8vIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKCBjaGF0Q2FyZCk7XG4gIH1cblxuICBzdGF0aWMgX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZVNlbGVjdGVkKGNhcmQsIGV2ZW50KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gY2xlYXIgYWxsIGRyb3AgZG93biBhbmQgaGlnaGxpZ2h0IHRoaXMgcGFydGljdWxhciBvbmVcbiAgICBjb25zdCBkcm9wRG93bkJveGVzID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5yZXNwb25zZS1zZWxlY3Rpb24nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICBmb3IgKGNvbnN0IGRwZG5Cb3ggb2YgZHJvcERvd25Cb3hlcykge1xuICAgICAgZHBkbkJveC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlZC1vbicpXG4gICAgfVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpXG5cbiAgICAvLyBjbG9zZSBkcm9wZG93blxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcblxuICAgIC8vIERpc3BsYXkgdGhlIHJvbGwgYnV0dG9uXG4gICAgY29uc3Qgc2VsZWN0ZWRCb3ggPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1hY3Rpb24nKVxuICAgIHNlbGVjdGVkQm94LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgY29uc3QgYnV0dG9uID0gc2VsZWN0ZWRCb3gucXVlcnlTZWxlY3RvcignYnV0dG9uJylcblxuICAgIC8vIFBhc3MgdGhlIGluaXRpYXRvciBJZCAtIEJ1aWxkIGNhbiBiZSByZXRyaWV2ZWQgZnJvbSB0aGF0XG5cbiAgICAvLyBQYXNzIHRoZSBpbml0aWF0b3IgaXRlbVxuXG4gICAgLy8gUGFzcyB0aGUgZGVmZW5kYW50IElkXG5cbiAgICAvLyBQYXNzIHRoZSBkZWZlbmRhbnQgYWN0aW9uXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uID0gJ2RlZmVuZGluZydcbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb25UeXBlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LmRlZmVuZGVyQ2hvaWNlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsVmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWVcbiAgICBidXR0b24uZGF0YXNldC5pdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uSWRcbiAgICBidXR0b24uZGF0YXNldC5pdGVtTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25OYW1lXG5cbiAgICAvLyBQdXQgc29tZSB0ZXh0IGluIHRoZSBidXR0b25cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ21hbmV1dmVyJzpcbiAgICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXG4gICAgICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lfSAoJHtcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgICAgICB9JSlgXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuY29tYmF0Q2FyZHNbZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbl1cbiAgICAgICAgKX0gOiAke2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25OYW1lfSAoJHtcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgICAgICB9JSlgXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIC8vIFNhdmUgYWN0aW9uIGZvciB0aGUgcm9sbFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbklubGluZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnaW5saW5lLXJlc3VsdCcpKSB7XG4gICAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHtcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fY29sbGFwc2VJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2V4cGFuZElubGluZVJlc3VsdChhKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfb25Ub2dnbGVTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICBDb0M3TWVsZWVUYXJnZXQudXBkYXRlU2VsZWN0ZWQoY2FyZCwgZXZlbnQpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWQgPT09ICcnKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck5vRG9kZ2VTa2lsbCcpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gY2xlYXIgYWxsIGRyb3AgZG93biBhbmQgaGlnaGxpZ2h0IHRoaXMgcGFydGljdWxhciBvbmVcbiAgICBjb25zdCBkcm9wRG93bkJveGVzID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5yZXNwb25zZS1zZWxlY3Rpb24nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICBmb3IgKGNvbnN0IGRwZG5Cb3ggb2YgZHJvcERvd25Cb3hlcykge1xuICAgICAgZHBkbkJveC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlZC1vbicpXG4gICAgfVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZWQtb24nKSAvLyBOZWVkIHRvIHRlc3QgaWYgaXQncyByZWFsbHkgYSBkb2RnZSAhISFcblxuICAgIC8vIFNhdmUgYWN0aW9uIGZvciB0aGUgcm9sbFxuICAgIGNvbnN0IHNlbGVjdGVkQm94ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtYWN0aW9uJylcbiAgICBzZWxlY3RlZEJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNlbGVjdGVkQm94LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG5cbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb24gPSAnZGVmZW5kaW5nJ1xuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvblR5cGUgPSAnZG9kZ2luZydcbiAgICBidXR0b24uZGF0YXNldC5kZWZlbmRlckNob2ljZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBidXR0b24uZGF0YXNldC5za2lsbFZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICBidXR0b24uZGF0YXNldC5za2lsbE5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lXG5cbiAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgQ09DNy5jb21iYXRDYXJkc1tldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXVxuICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lfSAoJHtcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgfSUpYFxuICB9XG5cbiAgc3RhdGljIF9vbkNoYXRDYXJkUmFkaW9Td2l0Y2ggKGV2ZW50KSB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0Ll9vbkNoYXRDYXJkUmFkaW9Td2l0Y2gnKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgb3B0aW9uTGlzdCA9XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmFkaW8tc3dpdGNoJylcbiAgICBsZXQgaW5kZXhcbiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBvcHRpb25MaXN0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IG9wdGlvbkxpc3RbaW5kZXhdXG4gICAgICBpZiAoZWxlbWVudC5kYXRhc2V0LnByb3BlcnR5ID09PSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHkpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIH1cbiAgICB9XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuc2VsZWN0ZWQgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRWb2xsZXlTaXplIChldmVudCkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyYW5nZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIGNvbnN0IHJhbmdlQ2FyZCA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luY3JlYXNlJykpIHtcbiAgICAgICAgICByYW5nZUNhcmQuY2hhbmdlVm9sbGV5U2l6ZSgxKVxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWNyZWFzZScpKSB7XG4gICAgICAgICAgcmFuZ2VDYXJkLmNoYW5nZVZvbGxleVNpemUoLTEpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2ggKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIENvQzdNZWxlZUluaXRpYXRvci51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgIENvQzdNZWxlZVRhcmdldC51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICBDb0M3UmFuZ2VJbml0aWF0b3IudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhbWFnZScpKSB7XG4gICAgICAvLyBDb0M3SXRlbS51cGRhdGVDYXJkU3dpdGNoKCBldmVudCk7XG4gICAgfVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLWNhcmQnKSkge1xuICAgICAgQ29DN0NoZWNrLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgQWN0b3Igd2hpY2ggaXMgdGhlIGF1dGhvciBvZiBhIGNoYXQgY2FyZFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICAgIFRoZSBjaGF0IGNhcmQgYmVpbmcgdXNlZFxuICAgKiBAcmV0dXJuIHtBY3RvcnxudWxsfSAgICAgICAgIFRoZSBBY3RvciBlbnRpdHkgb3IgbnVsbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9nZXRDaGF0Q2FyZEFjdG9yIChjYXJkKSB7XG4gICAgLy8gaWYgZGF0YXNldC5vYmplY3QgaXMgdGhlcmUgPT4gbmVlZCB0byB1bmVzY2FwZSB0aGluZ3MgISFcbiAgICAvLyBpZiBub3QgdXNlIHRoZSBkYXRhc2V0IGRpcmVjdGx5LlxuICAgIGNvbnN0IGNhcmREYXRhID0gY2FyZC5kYXRhc2V0Lm9iamVjdFxuICAgICAgPyBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuICAgICAgOiBjYXJkLmRhdGFzZXRcblxuICAgIGlmIChjYXJkRGF0YS5hY3RvcktleSkgcmV0dXJuIENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoY2FyZERhdGEuYWN0b3JLZXkpXG5cbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmREYXRhLnRva2VuSWRcbiAgICBpZiAodG9rZW5LZXkpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHRva2VuS2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yIHx8IG5ldyBUb2tlbih0b2tlbkRhdGEpLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkRGF0YS5hY3RvcklkXG4gICAgaWYgKGFjdG9ySWQpIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZClcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlID8gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG51bGxcbiAgICBpZiAobWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICAgIGlmIChjaGF0TWVzc2FnZS51c2VyKSByZXR1cm4gY2hhdE1lc3NhZ2UudXNlci5jaGFyYWN0ZXJcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3RhdGljIGlzQ2FyZE93bmVyIChjYXJkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IG1lc3NhZ2UgPyBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkIDogbnVsbFxuICAgIGlmIChtZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgICAgcmV0dXJuIGNoYXRNZXNzYWdlLm93bm5lciB8fCBmYWxzZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIF9nZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvciB8fCBuZXcgVG9rZW4odG9rZW5EYXRhKS5hY3RvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbVRva2VuICh0b2tlbktleSkge1xuICAgIGNvbnN0IHRva2VuID0gQ29DN0NoYXQuZ2V0VG9rZW4odG9rZW5LZXkpXG4gICAgcmV0dXJuIHRva2VuID8gdG9rZW4uYWN0b3IgOiBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0VG9rZW4gKHRva2VuS2V5KSB7XG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICBjb25zdCB0b2tlbkRvYyA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXT8udG9rZW5cbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxuICAgICAgICByZXR1cm4gdG9rZW4gfHwgbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiB1cGRhdGUgYSBjaGF0IG1lc3NhZ2Ugd2l0aCBhIG5ldyBIVE1MIGNvbnRlbnQgYW5kIHBvcHVsYXRlIGl0LlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKGNhcmQsIG1lc3NJZCA9IG51bGwpIHtcbiAgICBjb25zdCBtZXNzYWdlSWQgPVxuICAgICAgbWVzc0lkID09IG51bGwgPyBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWQgOiBtZXNzSWRcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBjYXJkLm91dGVySFRNTCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZEFjdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQuX29uQ2hhdENhcmRBY3Rpb24nKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgY2FyZCA9IGJ1dHRvbi5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNvbnN0IG9yaWdpbk1lc3NhZ2UgPSBidXR0b24uY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIC8vIGNvbnN0IG1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQ7XG4gICAgY29uc3QgYWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuYWN0aW9uXG5cbiAgICBpZiAoIUNvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpKSByZXR1cm5cblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICd1c2VMdWNrJzoge1xuICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQubHVja0Ftb3VudClcbiAgICAgICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID0gcGFyc2VJbnQoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lm5ld1N1Y2Nlc3NMZXZlbFxuICAgICAgICApXG5cbiAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICAgICAgbGV0IG1lbGVlQ2FyZFxuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgICAgICAgIG1lbGVlQ2FyZCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgICAgICBtZWxlZUNhcmQgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVsZWVDYXJkLnVwZ3JhZGVSb2xsKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgY2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xuICAgICAgICAgIGNvbnN0IHJhbmdlQ2FyZCA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIGNvbnN0IHJvbGxSZXN1bHQgPSBidXR0b24uY2xvc2VzdCgnLnJvbGwtcmVzdWx0JylcbiAgICAgICAgICBjb25zdCByb2xsSW5kZXggPSByb2xsUmVzdWx0XG4gICAgICAgICAgICA/IHBhcnNlSW50KHJvbGxSZXN1bHQuZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcbiAgICAgICAgICAgIHJhbmdlQ2FyZC5wYXNzUm9sbChyb2xsSW5kZXgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZ3JhZGVJbmRleCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgICAgcmFuZ2VDYXJkLnVwZ3JhZGVSb2xsKHJvbGxJbmRleCwgdXBncmFkZUluZGV4KSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1jYXJkJykgfHxcbiAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpICE9IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygncGFzcy1jaGVjaycpKSB7XG4gICAgICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQubHVja0Ftb3VudClcbiAgICAgICAgICAgIGNoZWNrLmZvcmNlUGFzcyhsdWNrQW1vdW50KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChidXR0b24uZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnVwZ3JhZGVDaGVjayh1cGdyYWRlSW5kZXgpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3IoY2FyZClcbiAgICAgICAgICBjb25zdCBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyID1cbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcblxuICAgICAgICAgIGlmIChhY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgICAgICAgICAgY2FyZC5kYXRhc2V0LnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgICAgICAgICAgY2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9ICdmYWxzZScgLy8gdHJpZ2dlciAzIHVwZGF0ZXMgZGUgY2FyZFxuICAgICAgICAgICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICAgICAgICAgIHJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKCdmdW1ibGUnKVxuICAgICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgIGF3YWl0IENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKGNhcmQpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RFbm91Z2hMdWNrJywge1xuICAgICAgICAgICAgICAgIGFjdG9yOiBhY3Rvci5uYW1lXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdwdXNoJzoge1xuICAgICAgICBjb25zdCBuZXdDYXJkID0gY2FyZC5jbG9uZU5vZGUodHJ1ZSkgLy8gVE9ETyBub3QgbmVjZXNzYXJ5XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ld0NhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID1cbiAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlB1c2hpbmdTa2lsbCcpXG4gICAgICAgIHJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKCdmYWlsdXJlJylcbiAgICAgICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICAgICAgbmV3Q2FyZC5kYXRhc2V0LnB1c2hlZFJvbGwgPSB0cnVlXG4gICAgICAgIGF3YWl0IENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKG5ld0NhcmQsIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpXG4gICAgICAgIGF3YWl0IENvQzdDaGVjay5wdXNoKGNhcmQpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdkZWZlbmRpbmcnOiB7XG4gICAgICAgIGxldCBkZWZlbmRlcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgICAgIC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgbGV0IGRlZmVuZGVyXG4gICAgICAgIGlmICghZGVmZW5kZXJLZXkpIHtcbiAgICAgICAgICBkZWZlbmRlcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgICAgICAgLmRhdGFzZXQuYWN0b3JJZFxuICAgICAgICAgIGRlZmVuZGVyID0gZ2FtZS5hY3RvcnMuZ2V0KGRlZmVuZGVyS2V5KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZmVuZGVyID0gdGhpcy5nZXRBY3RvckZyb21Ub2tlbihkZWZlbmRlcktleSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25UeXBlXG4gICAgICAgIGNvbnN0IG91dG51bWJlcmVkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lm91dG51bWJlcmVkID09PSAndHJ1ZSdcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgY2hlY2sucmVmZXJlbmNlTWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgICAgICBjaGVjay5yb2xsVHlwZSA9ICdvcHBvc2VkJ1xuICAgICAgICBjaGVjay5zaWRlID0gJ3RhcmdldCdcbiAgICAgICAgY2hlY2suYWN0aW9uID0gcmVzcG9uc2VUeXBlXG4gICAgICAgIHN3aXRjaCAocmVzcG9uc2VUeXBlKSB7XG4gICAgICAgICAgY2FzZSAnZG9kZ2luZyc6XG4gICAgICAgICAgICBjaGVjay5hY3RvciA9IGRlZmVuZGVyXG4gICAgICAgICAgICBjaGVjay5za2lsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgICAgICBpZiAob3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciA9IC0xXG5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcbiAgICAgICAgICAgIGNoZWNrLmFjdG9yID0gZGVmZW5kZXJcbiAgICAgICAgICAgIGNoZWNrLnNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgICAgIGNoZWNrLml0ZW0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgICBpZiAob3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciA9IC0xXG5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnbWFuZXV2ZXInOiB7XG4gICAgICAgICAgICBjb25zdCBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpXG4gICAgICAgICAgICBpZiAoZGVmZW5kZXIuYnVpbGQgPD0gYWN0b3IuYnVpbGQgLSAzKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTWFuZXV2ZXJOb3RQb3NzaWJsZScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVjay5hY3RvciA9IGRlZmVuZGVyXG4gICAgICAgICAgICBjaGVjay5za2lsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgICAgICBpZiAob3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciA9IC0xXG4gICAgICAgICAgICBpZiAoZGVmZW5kZXIuYnVpbGQgPCBhY3Rvci5idWlsZCkge1xuICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPVxuICAgICAgICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciAtIChhY3Rvci5idWlsZCAtIGRlZmVuZGVyLmJ1aWxkKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2hlY2suZGljZU1vZGlmaWVyIDwgLTIpIHtcbiAgICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9XG4gICAgICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSArIE1hdGguYWJzKGNoZWNrLmRpY2VNb2RpZmllcikgLSAyXG4gICAgICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IC0yXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lbGVlLWluaXRpYXRvci1yb2xsJzoge1xuICAgICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBpbml0aWF0b3IucGVyZm9ybVNraWxsQ2hlY2soXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsXG4gICAgICAgIClcbiAgICAgICAgJChidXR0b24pLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QoY2hlY2suZGljZS5yb2xsKVxuICAgICAgICBhd2FpdCBpbml0aWF0b3IucHVibGlzaENoZWNrUmVzdWx0KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVsZWUtdGFyZ2V0LW5vLXJlc3BvbnNlJzoge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgdGFyZ2V0LnB1Ymxpc2hOb1JlcG9uc2VSZXN1bHQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtZWxlZS10YXJnZXQtcm9sbCc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgdGFyZ2V0LnBlcmZvcm1Ta2lsbENoZWNrKFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFxuICAgICAgICApXG4gICAgICAgICQoYnV0dG9uKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGNoZWNrLmRpY2Uucm9sbClcbiAgICAgICAgYXdhaXQgdGFyZ2V0LnB1Ymxpc2hDaGVja1Jlc3VsdCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyb2xsLW1lbGVlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICAgICAgY3JpdGljYWw6IGJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsID09PSAndHJ1ZScsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gYnV0dG9uLmRhdGFzZXQuZGVhbGVyXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnRhcmdldEtleSA9IGJ1dHRvbi5kYXRhc2V0LnRhcmdldFxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5pdGVtSWQgPSBidXR0b24uZGF0YXNldC53ZWFwb25cbiAgICAgICAgaWYgKG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIHtcbiAgICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgICAgIH1cbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudXBkYXRlQ2hhdENhcmQoKVxuXG4gICAgICAgIC8vIGNvbnN0IGRhbWFnZUNhcmQgPSBuZXcgQ29DN0RhbWFnZVJvbGwoXG4gICAgICAgIC8vICBidXR0b24uZGF0YXNldC53ZWFwb24sXG4gICAgICAgIC8vICBidXR0b24uZGF0YXNldC5kZWFsZXIsXG4gICAgICAgIC8vICB7XG4gICAgICAgIC8vICAgIHRhcmdldEtleTogYnV0dG9uLmRhdGFzZXQudGFyZ2V0LFxuICAgICAgICAvLyAgICBjcml0aWNhbDogJ3RydWUnID09IGJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsLFxuICAgICAgICAvLyAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgLy8gIH0pO1xuICAgICAgICAvLyBpZiggb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkgZGFtYWdlQ2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgICAgICAvLyBkYW1hZ2VDYXJkLnJvbGxEYW1hZ2UoKTtcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIHtcbiAgICAgICAgLy8gIGZvciAoY29uc3QgYiBvZiBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkLWJ1dHRvbnMnKSkgeyBiLnJlbW92ZSgpIH1cbiAgICAgICAgLy8gIGF3YWl0IENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKCBjYXJkKTtcbiAgICAgICAgLy8gfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncmFuZ2UtaW5pdGlhdG9yLXNob290Jzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICByYW5nZUluaXRpYXRvci5hZGRTaG90QXRDdXJyZW50VGFyZ2V0KClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3IudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncmFuZ2UtaW5pdGlhdG9yLXJvbGwnOiB7XG4gICAgICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLnJlc29sdmVDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JvbGwtcmFuZ2UtZGFtYWdlJzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5yb2xsRGFtYWdlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2RlYWwtbWVsZWUtZGFtYWdlJzoge1xuICAgICAgICBjb25zdCB0YXJnZXRLZXkgPSBjYXJkLmRhdGFzZXQudGFyZ2V0S2V5XG4gICAgICAgIGNvbnN0IGFtb3VudCA9IGNhcmQuZGF0YXNldC5yZXN1bHRcbiAgICAgICAgY29uc3QgdGFyZ2V0QWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICBhd2FpdCB0YXJnZXRBY3Rvci5kZWFsRGFtYWdlKGFtb3VudClcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpXG4gICAgICAgIGNvbnN0IGRpY2VUb3RhbCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgICAgICAkKGRpY2VUb3RhbCkuYXBwZW5kKCc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nKVxuICAgICAgICBpZiAoYnV0dG9ucykgYnV0dG9ucy5yZW1vdmUoKVxuICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChjYXJkKVxuXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlYWwtcmFuZ2UtZGFtYWdlJzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5kZWFsRGFtYWdlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAndGVzdGNoZWNrJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5mb3JjZVBhc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JjZS1wYXNzJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5mb3JjZVBhc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JjZS1mYWlsJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5mb3JjZUZhaWwoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdpbmNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5pbmNyZWFzZVN1Y2Nlc3NMZXZlbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlY3JlYXNlLXN1Y2Nlc3MtbGV2ZWwnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmRlY3JlYXNlU3VjY2Vzc0xldmVsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmV2ZWFsLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlzQ3RybEtleShldmVudClcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoeyBtYWtlUHVibGljOiB0cnVlIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoeyBtYWtlUHVibGljOiB0cnVlIH0pXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1jaGVjay1jYXJkJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5zdGFuZGJ5ID0gZmFsc2VcbiAgICAgICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oKVxuICAgICAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCh7IGZvcmNlUm9sbDogdHJ1ZSB9KVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmbGFnLWZvci1kZXZlbG9wbWVudCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgY2hlY2suZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmVzZXQtY3JlYXR1cmUtc2FuLWRhdGEnOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLmNsZWFyU2FuTG9zc1JlYXNvbigpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1zYW4tY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnJvbGxTYW4oKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2FkdmFuY2Utc3RhdGUnOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLmFkdmFuY2VTdGF0ZShcbiAgICAgICAgICBidXR0b24uZGF0YXNldC5zdGF0ZSAvKiwgYnV0dG9uLmRhdGFzZXQucGFyYW0gKi9cbiAgICAgICAgKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtc2FuLWxvc3MnOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnJvbGxTYW5Mb3NzKClcbiAgICAgICAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWludC1jaGVjayc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucm9sbEludCgpXG4gICAgICAgIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgLy8gY2FzZSAnYXBwbHktc2FuLWxvc3MnOntcbiAgICAgIC8vICBjb25zdCBzYW5DaGVjayA9IENvQzdTYW5DaGVjay5nZXRGcm9tQ2FyZCggY2FyZCk7XG4gICAgICAvLyAgYXdhaXQgc2FuQ2hlY2suYXBwbHlTYW5Mb3NzKCk7XG4gICAgICAvLyAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKTtcbiAgICAgIC8vICBicmVhaztcbiAgICAgIC8vIH1cblxuICAgICAgLy8gY2FzZSAncmV2ZWFsLXNhbi1jaGVjayc6e1xuICAgICAgLy8gIGNvbnN0IHNhbkNoZWNrID0gQ29DN1NhbkNoZWNrLmdldEZyb21DYXJkKCBjYXJkKTtcbiAgICAgIC8vICBzYW5DaGVjay5pc0JsaW5kID0gZmFsc2U7XG4gICAgICAvLyAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKTtcbiAgICAgIC8vICBicmVhaztcbiAgICAgIC8vIH1cblxuICAgICAgY2FzZSAncm9sbC1jb24tY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IGNvbkNoZWNrID0gQ29DN0NvbkNoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IGNvbkNoZWNrLnJvbGxDb24oKVxuICAgICAgICBjb25DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jb24tY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IGNvbkNoZWNrID0gQ29DN0NvbkNoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNvbkNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgICAgICBjb25DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0b2dnbGluZyB0aGUgdmlzaWJpbGl0eSBvZiBjaGF0IGNhcmQgY29udGVudCB3aGVuIHRoZSBuYW1lIGlzIGNsaWNrZWRcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBfb25DaGF0Q2FyZFRvZ2dsZUNvbnRlbnQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGhlYWRlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBjYXJkID0gaGVhZGVyLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQnKVxuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBpZiAoIWNvbnRlbnQuc3R5bGUuZGlzcGxheSkge1xuICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPVxuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJ2Jsb2NrJyA6ICdub25lJ1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVSZXNvbHRpb24gfSBmcm9tICcuL21lbGVlLXJlc29sdXRpb24uanMnXG5pbXBvcnQgeyBDaGF0Q2FyZEFjdG9yIH0gZnJvbSAnLi4vY2FyZC1hY3Rvci5qcydcblxuLy8gVE9ETyA6IHLDqWN1cMOpcmVyIGxlIGpldCBlbiB0YW50IHF1J29iamV0ICEhIVxuZXhwb3J0IGNsYXNzIENvQzdNZWxlZUluaXRpYXRvciBleHRlbmRzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBpdGVtSWQgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgc3VwZXIoYWN0b3JLZXksIGZhc3RGb3J3YXJkKVxuICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG4gICAgdGhpcy5vdXRudW1iZXJlZCA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxuICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5odG1sJ1xuICB9XG5cbiAgYXN5bmMgcmV2ZWFsQ2hlY2sgKCkge1xuICAgIC8vIFRPRE8gOiBvbiB1dGlsaXNlIGwndXBkYXRlIGR1IG1lc3NhZ2UgYXUgbGlldSBkZSByZWNvbnN0cnVpcmUgbCdvYmpldC4gQ2hhbmdlciBjZSBjb21wb3J0ZW1lbnQuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnY2hlY2tSZXZlYWxlZCcsIHRydWUpXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKGNoYXRNZXNzYWdlLCBmYWxzZSlcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGlmICh0aGlzLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXNcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpc1xuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9XG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHRoaXMuaXNCbGluZCApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybVNraWxsQ2hlY2sgKHNraWxsSWQgPSBudWxsLCBwdWJsaXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxuICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgY2hlY2suc2lkZSA9ICdpbml0aWF0b3InXG4gICAgY2hlY2suYWN0aW9uID0gJ2F0dGFjaydcbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLmNoZWNrUmV2ZWFsZWQgPSBmYWxzZVxuICAgIGVsc2UgdGhpcy5jaGVja1JldmVhbGVkID0gdHJ1ZVxuXG4gICAgaWYgKHRoaXMub3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciArPSAxXG4gICAgaWYgKHRoaXMuc3VycHJpc2VkKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuICAgIGlmICh0aGlzLmRpc2FkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyIC09IDFcbiAgICBpZiAodGhpcy5hZHZhbnRhZ2UpIGNoZWNrLmRpY2VNb2RpZmllciArPSAxXG5cbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIGlmIChwdWJsaXNoKSBjaGVjay50b01lc3NhZ2UoKVxuXG4gICAgdGhpcy5jcml0aWNhbERhbWFnZSA9XG4gICAgICBjaGVjay5zdWNjZXNzTGV2ZWwgPT09IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSB8fFxuICAgICAgY2hlY2suc3VjY2Vzc0xldmVsID09PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgaWYgKHRoaXMuaGFzVGFyZ2V0ICYmICF0aGlzLmF1dG9TdWNjZXNzKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgZ2FtZS5Db0M3c29ja2V0LmV4ZWN1dGVBc0dNKCdnbWNyZWF0ZW1lc3NhZ2VhcycsIHtcbiAgICAgICAgdGFyZ2V0S2V5OiB0aGlzLnRhcmdldEtleSxcbiAgICAgICAgbWVzc2FnZUlkOiB0aGlzLm1lc3NhZ2VJZCxcbiAgICAgICAgZmFzdEZvcndhcmQ6IHRoaXMuZmFzdEZvcndhcmQsXG4gICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yS2V5XG4gICAgICB9KVxuICAgICAgdGhpcy50YXJnZXRDYXJkID0gbWVzc2FnZS5pZCB8fCBtZXNzYWdlLl9pZFxuICAgIH1cblxuICAgIGlmICh0aGlzLmF1dG9TdWNjZXNzICYmICF0aGlzLmNoZWNrLmlzRnVtYmxlKSB7XG4gICAgICB0aGlzLmNoZWNrLmZvcmNlUGFzcygpXG4gICAgfVxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcHVibGlzaENoZWNrUmVzdWx0IChjaGVjayA9IG51bGwpIHtcbiAgICBpZiAoIWNoZWNrICYmICF0aGlzLmNoZWNrKSByZXR1cm4gbnVsbFxuXG4gICAgaWYgKGNoZWNrKSB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2sodGhpcy5jaGVjaylcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcblxuICAgIHRoaXMucm9sbC5yb2xsSWNvbnMgPSBbXVxuICAgIGlmICh0aGlzLnJvbGwuY3JpdGljYWwpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdtZWRhbCcpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuZnVtYmxlKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2RhcmtyZWQnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NwaWRlcicpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuc3VjY2Vzcykge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3N0YXInKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2JsYWNrJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc2t1bGwnKVxuICAgIH1cblxuICAgIGlmICghdGhpcy50YXJnZXRDYXJkICYmICF0aGlzLmF1dG9TdWNjZXNzICYmIHRoaXMuaGFzVGFyZ2V0KSB7XG4gICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkLFxuICAgICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgICAgKVxuICAgICAgY29uc3QgcmVzb2x1dGlvbk1lc3NhZ2UgPSBhd2FpdCByZXNvbHV0aW9uQ2FyZC5wcmVDcmVhdGVNZXNzYWdlKClcbiAgICAgIHRoaXMucmVzb2x1dGlvbkNhcmQgPSByZXNvbHV0aW9uTWVzc2FnZS5pZFxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IGluaXRpYXRvciA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoaW5pdGlhdG9yLCBjYXJkKVxuICAgIGluaXRpYXRvci5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNhcmQoY2FyZClcblxuICAgIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcbiAgICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9IGVsc2UgaW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcubWVsZWUuaW5pdGlhdG9yJylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoZmxhZylcbiAgICAgIGluaXRpYXRvci51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgdXBncmFkZVJvbGwgKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgb2xkQ2FyZCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5MdWNrTm90RW5vdWdoJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgICB0aGlzLnJvbGwudmFsdWUgPSBudWxsXG4gICAgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIHRoaXMucm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgb2xkQ2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9IGZhbHNlXG5cbiAgICBjb25zdCBkaWNlUm9sbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGwnKVxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnZhbHVlID0gbnVsbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0Lmx1Y2tTcGVudCA9IHRydWVcblxuICAgIGNvbnN0IHJlc3VsRGV0YWlscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcbiAgICBjb25zdCBkaWNlVG90YWwgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICBjb25zdCByb2xsRGFtYWdlQnV0dG9uID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJ2J1dHRvbltkYXRhLWFjdGlvbj1cInJvbGwtbWVsZWUtZGFtYWdlXCJdJ1xuICAgIClcbiAgICBpZiAocm9sbERhbWFnZUJ1dHRvbikgcm9sbERhbWFnZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbnZpc2libGUnKVxuXG4gICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIGlmIChyb2xsRGFtYWdlQnV0dG9uKSByb2xsRGFtYWdlQnV0dG9uLmRhdGFzZXQuY3JpdGljYWwgPSB0cnVlXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uZGF0YXNldC5jcml0aWNhbCA9IHRydWVcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGRpY2VUb3RhbC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChvbGRDYXJkKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIEFwcGxpY2F0aW9uLCBDT05GSUcsIENPTlNULCBEaWFsb2csIERpZSwgZHVwbGljYXRlLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZnJvbVV1aWRTeW5jLCBnYW1lLCBnZXRQcm9wZXJ0eSwgSG9va3MsIG1lcmdlT2JqZWN0LCBSb2xsLCBUZXh0RWRpdG9yLCBUb2tlbiwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdE1lc3NhZ2UgfSBmcm9tICcuLi9hcHBzL2NvYzctY2hhdC1tZXNzYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFNlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtc2VsZWN0aW9uLWRpYWxvZy5qcydcbmltcG9ydCB7IFBvaW50U2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9wb2ludC1zZWxlY3Rpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ2hhcmFjU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9jaGFyLXNlbGVjdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBDaGFyYWNSb2xsRGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9jaGFyLXJvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjLXNlbGVjdC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxWYWx1ZURpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtdmFsdWUtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi4vY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi4vY2hhdC9yYW5nZWNvbWJhdC5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vZGljZS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNlIEFjdG9yIGNsYXNzIHRvIGltcGxlbWVudCBhZGRpdGlvbmFsIGxvZ2ljIHNwZWNpYWxpemVkIGZvciBDb0MgN3RoLlxuICovXG5leHBvcnQgY2xhc3MgQ29DQWN0b3IgZXh0ZW5kcyBBY3RvciB7XG4gIC8qKiBDcmVhdGUgZGVyaXZlZCBkb2N1bWVudCBjbGFzc2VzIGZvciBzcGVjaWZpYyBJdGVtIHR5cGVzICovXG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgLyoqIEBzZWUgQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3NlcyBpbiBtb2R1bGUvc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzICovXG4gICAgaWYgKGRhdGEudHlwZSBpbiBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzc2VzICYmICFjb250ZXh0Py5leHRlbmRlZCkge1xuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIG5ldyBjbGFzcyB3aWxsIGNhbGwgaXQncyBzdXBlcigpLFxuICAgICAgICogdGhlIGV4dGVuZGVkIGZsYWcgd2lsbCBiZSB0cnVlLCB0aHVzIGJ5cGFzc2luZyB0aGlzIHdob2xlIHByb2Nlc3NcbiAgICAgICAqIGFuZCByZXN1bWUgZGVmYXVsdCBiZWhhdmlvclxuICAgICAgICovXG4gICAgICByZXR1cm4gbmV3IENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXNbZGF0YS50eXBlXShkYXRhLCB7XG4gICAgICAgIC4uLnsgZXh0ZW5kZWQ6IHRydWUgfSxcbiAgICAgICAgLi4uY29udGV4dFxuICAgICAgfSlcbiAgICB9XG4gICAgLy8gaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyAgIGlmIChkYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAvLyAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9za2lsbHMuc3ZnJ1xuICAgIC8vICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzdGF0dXMnKSB7XG4gICAgLy8gICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9hdXJhLnN2ZydcbiAgICAvLyAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2VhcG9uJykge1xuICAgIC8vICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvc3dvcmQuc3ZnJ1xuICAgIC8vICAgfVxuICAgIC8vIH1cbiAgICAvKiogRGVmYXVsdCBiZWhhdmlvciwganVzdCBjYWxsIHN1cGVyKCkgYW5kIGRvIGFsbCB0aGUgZGVmYXVsdCBJdGVtIGluaXRzICovXG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUgKCkge1xuICAgIHN1cGVyLmluaXRpYWxpemUoKVxuICAgIGF3YWl0IHRoaXMuY3JlYXR1cmVJbml0KCkgLy8gVE9ETyA6IG1vdmUgdGhpcyBpbiBDb0NBY3Rvci5jcmVhdGUoZGF0YSwgb3B0aW9ucylcbiAgfVxuXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKiogVGVzdGluZ1xuICAvLyBhc3luYyB1cGRhdGUoZGF0YSwgb3B0aW9ucz17fSkge1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygncmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTsnKTtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oYGludCA6ICR7dGhpcy5jaGFyYWN0ZXJpc3RpY3MuaW50fWApO1xuICAvLyAgIHRoaXMuY2hhcmFjdGVyaXN0aWNzLmludCA9IDE1O1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgbW9kaWZpZWQgaW50IDogJHt0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnR9YCk7XG4gIC8vICAgcmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTtcbiAgLy8gfVxuXG4gIC8vIGdldCBjaGFyYWN0ZXJpc3RpY3MoKXtcbiAgLy8gICBjb25zdCBhY3RvciA9IHRoaXM7XG4gIC8vICAgICByZXR1cm4ge1xuICAvLyAgICAgICBnZXQgaW50KCl7XG4gIC8vICAgICAgICAgcmV0dXJuIGFjdG9yLmdldFByb3AoJ19pbnQnKTtcbiAgLy8gICAgICAgfSxcblxuICAvLyAgICAgICBzZXQgaW50KHgpe1xuICAvLyAgICAgICAgIGFjdG9yLnNldFByb3AoJ19pbnQnLCB4KTtcbiAgLy8gICAgICAgfVxuICAvLyAgICB9O1xuICAvLyB9XG5cbiAgLy8gc2V0UHJvcChrZXksIHgpe1xuICAvLyAgIHRoaXNba2V5XSA9IHg7XG4gIC8vIH1cblxuICAvLyBnZXRQcm9wKGtleSl7XG4gIC8vICAgcmV0dXJuIHRoaXNba2V5XXx8MDtcbiAgLy8gfVxuICAvL1xuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogUHJlcGFyZSBkYXRhIHJlbGF0ZWQgdG8gdGhpcyBEb2N1bWVudCBpdHNlbGYsIGJlZm9yZSBhbnkgZW1iZWRkZWQgRG9jdW1lbnRzIG9yIGRlcml2ZWQgZGF0YSBpcyBjb21wdXRlZC5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqL1xuICBwcmVwYXJlQmFzZURhdGEgKCkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyh0aGlzLnR5cGUpKSB7XG4gICAgICB0aGlzLnN5c3RlbS5za2lsbHMgPSB7fVxuICAgICAgZm9yIChjb25zdCBpIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgICAgaWYgKGkudHlwZSAhPT0gJ3NraWxsJykgY29udGludWVcbiAgICAgICAgdGhpcy5zeXN0ZW0uc2tpbGxzW2Ake2kuaXRlbUlkZW50aWZpZXJ9YF0gPSB7IGZvdW5kcnlJRDogaS5pZCwgY29jaWQ6IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQsIHZhbHVlOiBpLnJhd1ZhbHVlLCBib251c0RpY2U6IGkuc3lzdGVtLmJvbnVzRGljZSB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAqIFJlbW92YWwgb2YgMS81IHNhbml0eVxuICAgICAqIHRoaXMgaXMgdG8gcmVtb3ZlIHRoZVxuICAgICAqIGFjdG9yLmRhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgdG8gYmUgcmVtb3ZlZCBmcm9tIHRlbXBsYXRlXG4gICAgICogYW5kIGluZGVmaW5pdGVJbnNhbml0eUxldmVsIHRvIGJlIHJlbW92ZWQgZnJvbSB0ZW1wbGF0ZVxuICAgICAqL1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkpIHtcbiAgICAgICAgICBjb25zdCBzID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkuc3BsaXQoJy8nKVxuICAgICAgICAgIGlmIChzWzFdICYmICFpc05hTihOdW1iZXIoc1sxXSkpKSB7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID0gTnVtYmVyKHNbMV0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQgPSAwXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQgPSAwXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcmV0dXJuIGNvbXB1dGVkIHZhbHVlcyBvciBmaXhlZCB2YWx1ZXMgaWYgbm90IGF1dG8uXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9IHRoaXMucmF3TW92XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID0gdGhpcy5yYXdEYlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9IHRoaXMucmF3QnVpbGRcblxuICAgICAgLy8gRm9yIHZlaGljbGUgb25seSA6XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPSB0aGlzLmhwXG5cbiAgICAgIC8vIGlmIChcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPiBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggfHxcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4ID09IG51bGxcbiAgICAgIC8vICkge1xuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heFxuICAgICAgLy8gfVxuICAgICAgLy8gaWYgKFxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA+IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCB8fFxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggPT0gbnVsbFxuICAgICAgLy8gKSB7XG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4XG4gICAgICAvLyB9XG5cbiAgICAvLyBpZiAoXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9PSBudWxsICYmXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggIT0gbnVsbFxuICAgIC8vICkge1xuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXhcbiAgICAvLyB9XG4gICAgLy8gaWYgKFxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPT0gbnVsbCAmJlxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4ICE9IG51bGxcbiAgICAvLyApIHtcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4XG4gICAgLy8gfVxuICAgIH1cbiAgICBzdXBlci5wcmVwYXJlQmFzZURhdGEoKVxuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKiBQcmVwYXJlIGFsbCBlbWJlZGRlZCBEb2N1bWVudCBpbnN0YW5jZXMgd2hpY2ggZXhpc3Qgd2l0aGluIHRoaXMgcHJpbWFyeSBEb2N1bWVudC5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqIGFjdGl2ZSBlZmZlY3RzIGFyZSBhcHBsaWVkXG4gICAqL1xuICBwcmVwYXJlRW1iZWRkZWREb2N1bWVudHMgKCkge1xuICAgIHN1cGVyLnByZXBhcmVFbWJlZGRlZERvY3VtZW50cygpXG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIEFwcGx5IHRyYW5zZm9ybWF0aW9ucyBvciBkZXJpdmF0aW9ucyB0byB0aGUgdmFsdWVzIG9mIHRoZSBzb3VyY2UgZGF0YSBvYmplY3QuXG4gICAqIENvbXB1dGUgZGF0YSBmaWVsZHMgd2hvc2UgdmFsdWVzIGFyZSBub3Qgc3RvcmVkIHRvIHRoZSBkYXRhYmFzZS5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqL1xuICBwcmVwYXJlRGVyaXZlZERhdGEgKCkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyh0aGlzLnR5cGUpKSB7XG4gICAgICBzdXBlci5wcmVwYXJlRGVyaXZlZERhdGEoKVxuICAgICAgLy8gU2V0IGhwTWF4LCBtcE1heCwgc2FuTWF4LCBtb3YsIGRiLCBidWlsZC4gVGhpcyBpcyB0byBhbGxvdyBjYWxjdWxhdGlvbiBvZiBkZXJpdmVkIHZhbHVlIHdpdGggbW9kaWZlZCBjaGFyYWN0ZXJpc3RpY3MuXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9IHRoaXMucmF3TW92XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID0gdGhpcy5yYXdEYlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9IHRoaXMucmF3QnVpbGRcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXggPSB0aGlzLnJhd0hwTWF4XG4gICAgICBpZiAodGhpcy5ocCA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSA9IHRoaXMucmF3SHBNYXhcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5tYXggPSB0aGlzLnJhd01wTWF4XG4gICAgICBpZiAodGhpcy5tcCA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA9IHRoaXMucmF3TXBNYXhcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4ID0gdGhpcy5yYXdTYW5NYXhcbiAgICAgIGlmICh0aGlzLnNhbiA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgPSB0aGlzLnJhd1Nhbk1heFxuXG4gICAgICAvLyBBcHBseSBlZmZlY3RzIHRvIGF1dG9tYXRpY2FseSBjYWxjdWxhdGVkIHZhbHVlcy5cbiAgICAgIGNvbnN0IGZpbHRlck1hdHJpeCA9IFtdXG5cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5ocC5tYXgnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubXAuYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLm1wLm1heCcpXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLnNhbi5tYXgnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIuYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJylcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZScpXG5cbiAgICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLmVmZmVjdHMucmVkdWNlKChjaGFuZ2VzLCBlKSA9PiB7XG4gICAgICAgIGlmIChlLmRpc2FibGVkIHx8IGUuaXNTdXBwcmVzc2VkKSByZXR1cm4gY2hhbmdlc1xuICAgICAgICByZXR1cm4gY2hhbmdlcy5jb25jYXQoXG4gICAgICAgICAgZS5jaGFuZ2VzLm1hcChjID0+IHtcbiAgICAgICAgICAgIGMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShjKVxuICAgICAgICAgICAgYy5lZmZlY3QgPSBlXG4gICAgICAgICAgICBjLnByaW9yaXR5ID0gYy5wcmlvcml0eSA/PyBjLm1vZGUgKiAxMFxuICAgICAgICAgICAgcmV0dXJuIGNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9LCBbXSlcbiAgICAgIGNoYW5nZXMuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpXG5cbiAgICAgIGNvbnN0IHNlbGVjdENoYW5nZXMgPSBjaGFuZ2VzLmZpbHRlcihlID0+IGZpbHRlck1hdHJpeC5pbmNsdWRlcyhlLmtleSkpXG5cbiAgICAgIC8vIEFwcGx5IGFsbCBjaGFuZ2VzXG4gICAgICBmb3IgKGNvbnN0IGNoYW5nZSBvZiBzZWxlY3RDaGFuZ2VzKSB7XG4gICAgICAgIGNoYW5nZS5lZmZlY3QuYXBwbHkodGhpcywgY2hhbmdlKVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5ocE1heCAmJiB0aGlzLmhwTWF4IDwgdGhpcy5ocCkgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlID0gdGhpcy5ocE1heCB9XG4gICAgICBpZiAodGhpcy5tcE1heCAmJiB0aGlzLm1wTWF4IDwgdGhpcy5tcCkgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID0gdGhpcy5tcE1heCB9XG4gICAgICBpZiAodGhpcy5zYW5NYXggJiYgdGhpcy5zYW5NYXggPCB0aGlzLnNhbikgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA9IHRoaXMuc2FuTWF4IH1cbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChkYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBkYXRhLnByb3RvdHlwZVRva2VuID0gbWVyZ2VPYmplY3QoZGF0YS5wcm90b3R5cGVUb2tlbiB8fCB7fSwge1xuICAgICAgICBhY3Rvckxpbms6IHRydWUsXG4gICAgICAgIGRpc3Bvc2l0aW9uOiAxLFxuICAgICAgICBzaWdodDoge1xuICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgZGV0ZWN0aW9uTW9kZXM6IFt7XG4gICAgICAgICAgaWQ6ICdiYXNpY1NpZ2h0JyxcbiAgICAgICAgICByYW5nZTogMzAsXG4gICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICB9XVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ25wYycpIHtcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnIHx8IGRhdGEuaW1nID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9jdWx0aXN0LnN2ZydcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2NyZWF0dXJlJykge1xuICAgICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcgfHwgZGF0YS5pbWcgPT09ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJykge1xuICAgICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2Zsb2F0aW5nLXRlbnRhY2xlcy5zdmcnXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdjb250YWluZXInKSB7XG4gICAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJyB8fCBkYXRhLmltZyA9PT0gJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9jaGVzdC5zdmcnXG4gICAgICB9XG4gICAgICBkYXRhLnByb3RvdHlwZVRva2VuID0gbWVyZ2VPYmplY3QoZGF0YS5wcm90b3R5cGVUb2tlbiB8fCB7fSwge1xuICAgICAgICBhY3Rvckxpbms6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBzdXBlci5jcmVhdGUoZGF0YSwgb3B0aW9ucylcbiAgfVxuXG4gIC8qKlxuICAgKiBFYXJseSB2ZXJzaW9uIG9uIHRlbXBsYXRlcyBkaWQgbm90IGluY2x1ZGUgcG9zc2liaWxpdHkgb2YgYXV0byBjYWxjXG4gICAqIEp1c3QgY2hlY2sgaWYgYXV0byBpcyB1bmRlZmluZWQsIGluIHdoaWNoIGNhc2UgaXQgd2lsbCBiZSBzZXQgdG8gdHJ1ZVxuICAgKi9cbiAgY2hlY2tVbmRlZmluZWRBdXRvICgpIHtcbiAgICBjb25zdCByZXR1cm5EYXRhID0ge1xuICAgICAgYXR0cmliczoge1xuICAgICAgICBocDoge30sXG4gICAgICAgIG1wOiB7fSxcbiAgICAgICAgc2FuOiB7fSxcbiAgICAgICAgbW92OiB7fSxcbiAgICAgICAgZGI6IHt9LFxuICAgICAgICBidWlsZDoge31cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LmhwPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5ocC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8ubXA/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLm1wLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5zYW4/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLnNhbi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8ubW92Py5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5tb3YuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LmRiPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5kYi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uYnVpbGQ/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLmJ1aWxkLmF1dG8gPSB0cnVlXG4gICAgfVxuXG4gICAgcmV0dXJuIHJldHVybkRhdGFcbiAgfVxuXG4gIGdldCBjaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHtcbiAgICAgIHN0cjoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLlNUUicsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLlN0cmVuZ3RoJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIGNvbjoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLkNPTicsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkNvbnN0aXR1dGlvbicsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBzaXo6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5TSVonLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5TaXplJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIGRleDoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLkRFWCcsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkRleHRlcml0eScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBhcHA6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5BUFAnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5BcHBlYXJhbmNlJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIGludDoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLklOVCcsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkludGVsbGlnZW5jZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBwb3c6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5QT1cnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5Qb3dlcicsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBlZHU6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5FRFUnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5FZHVjYXRpb24nLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICkpIHtcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2tleV0gPSB7XG4gICAgICAgICAga2V5LFxuICAgICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcbiAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICAgICAgaGFyZDogTWF0aC5mbG9vcih2YWx1ZS52YWx1ZSAvIDIpIHx8IG51bGwsXG4gICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcih2YWx1ZS52YWx1ZSAvIDUpIHx8IG51bGwsXG4gICAgICAgICAgZm9ybXVsYTogdmFsdWUuZm9ybXVsYVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3NcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiB0b2tlbiBjcmVhdGlvbiBmcm9tIHByZUNyZWF0ZUFjdG9yIGhvb2tcbiAgICogQHBhcmFtIHsqfSBjcmVhdGVEYXRhXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaW5pdFRva2VuIChjcmVhdGVEYXRhKSB7XG4gICAgLy8gY2FsbGVkIHVwb24gdG9rZW4gY3JlYXRpb24uYWN0aXZlXG4gICAgaWYgKGNyZWF0ZURhdGEpIHtcbiAgICAgIC8vXG4gICAgfVxuICB9XG5cbiAgZ2V0IGhhc1RlbXBvSW5zYW5lICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXG4gIH1cblxuICBnZXQgZ2V0VGVtcG9JbnNhbmVEdXJhdGlvblRleHQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblZhbHVlKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lLCAnZHVyYXRpb25UZXh0JylcbiAgfVxuXG4gIGdldCBoYXNJbmRlZkluc2FuZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmluZGVmSW5zYW5lKVxuICB9XG5cbiAgZ2V0IHBvcnRyYWl0ICgpIHtcbiAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHJldHVybiB0aGlzLmltZ1xuICAgIHJldHVybiB0aGlzLnRva2VuPy50ZXh0dXJlPy5zcmMgfHwgdGhpcy5wcm90b3R5cGVUb2tlbj8udGV4dHVyZT8uc3JjIHx8IHRoaXMuaW1nXG4gIH1cblxuICBhc3luYyBlbnRlckJvdXRPZk1hZG5lc3MgKHJlYWxUaW1lID0gdHJ1ZSwgZHVyYXRpb24gPSAxKSB7XG4gICAgLy8gY29uc3QgZHVyYXRpb24gPSB7cm91bmRzOiAxLFxuICAgIC8vICAgc2Vjb25kczogMTcsXG4gICAgLy8gICBzdGFydFJvdW5kOiAzLFxuICAgIC8vICAgc3RhcnRUaW1lOiA1OCxcbiAgICAvLyAgIHN0YXJ0VHVybjogNCxcbiAgICAvLyAgIHR1cm5zOiAyfTtcbiAgICAvLyBhd2FpdCB0aGlzLmJvdXRPZk1hZG5lc3M/LnNldEZsYWcoICdDb0M3JywgJ21hZG5lc3MnLCB0cnVlKTtcblxuICAgIGxldCByZXN1bHQgPSBudWxsXG4gICAgY29uc3QgYm91dE9mTWFkbmVzc1RhYmxlSWQgPSByZWFsVGltZVxuICAgICAgPyBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScpXG4gICAgICA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGUnKVxuICAgIGlmIChib3V0T2ZNYWRuZXNzVGFibGVJZCAhPT0gJ25vbmUnKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIHBob2JpYTogZmFsc2UsXG4gICAgICAgIG1hbmlhOiBmYWxzZSxcbiAgICAgICAgZGVzY3JpcHRpb246IG51bGxcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJvdXRPZk1hZG5lc3NUYWJsZSA9IGdhbWUudGFibGVzLmdldChib3V0T2ZNYWRuZXNzVGFibGVJZClcbiAgICAgIHJlc3VsdC50YWJsZVJvbGwgPSBhd2FpdCBib3V0T2ZNYWRuZXNzVGFibGUucm9sbCgpXG4gICAgICBpZiAodHlwZW9mIHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIENPTlNULlRBQkxFX1JFU1VMVF9UWVBFUy5ET0NVTUVOVCA9PT1cbiAgICAgICAgICByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0udHlwZVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gZ2FtZS5pdGVtcy5nZXQocmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLmRvY3VtZW50SWQpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtPy50eXBlPy5waG9iaWEpIHJlc3VsdC5waG9iaWEgPSB0cnVlXG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0/LnR5cGU/Lm1hbmlhKSByZXN1bHQubWFuaWEgPSB0cnVlXG4gICAgICAgICAgICByZXN1bHQuZGVzY3JpcHRpb24gPSBgJHtpdGVtLm5hbWV9OiR7VGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgeyBhc3luYzogZmFsc2UgfVxuICAgICAgICAgICAgKX1gXG4gICAgICAgICAgICByZXN1bHQubmFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtLnRvT2JqZWN0KClcbiAgICAgICAgICAgIGRlbGV0ZSBpdGVtRGF0YS5faWRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbURhdGFdKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZUJvdXRPZk1hZG5lc3NJdGVtTm90Rm91bmQnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLlRFWFQgPT09XG4gICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnRleHQsXG4gICAgICAgICAgICB7IGFzeW5jOiBmYWxzZSB9XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlQm91dE9mTWFkbmVzc1RhYmxlTm90Rm91bmQnKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgaXQncyBub3QgYSByZWFsIHRpbWUgbm8gbmVlZCB0byBhY3RpdmF0ZSB0aGUgYm91dFxuICAgIGlmICghcmVhbFRpbWUpIHJldHVybiByZXN1bHRcblxuICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lLCB7XG4gICAgICByZWFsVGltZSxcbiAgICAgIGR1cmF0aW9uXG4gICAgfSlcblxuICAgIC8vIGNvbnN0IGVmZmVjdCA9IHRoaXMuZWZmZWN0cy5nZXQoIGVmZmVjdERhdGEuX2lkKTtcbiAgICAvLyBlZmZlY3Quc2hlZXQucmVuZGVyKHRydWUpO1xuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB1cG9uIG5ldyBhY3RvciBjcmVhdGlvbi5cbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9uc1xuICAgKi9cbiAgLy8gc3RhdGljIGFzeW5jIGNyZWF0ZShkYXRhLCBvcHRpb25zKSB7XG4gIC8vICAvLyBJZiB0aGUgY3JlYXRlZCBhY3RvciBoYXMgaXRlbXMgKG9ubHkgYXBwbGljYWJsZSB0byBkdXBsaWNhdGVkIGFjdG9ycykgYnlwYXNzIHRoZSBuZXcgYWN0b3IgY3JlYXRpb24gbG9naWNcbiAgLy8gIGlmIChkYXRhLml0ZW1zKSB7XG4gIC8vICAgIHJldHVybiBzdXBlci5jcmVhdGUoZGF0YSwgb3B0aW9ucyk7XG4gIC8vICB9XG4gIC8vICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpO1xuICAvLyB9XG5cbiAgc3RhdGljIGVtcHR5U2tpbGwgKFxuICAgIHNraWxsTmFtZSxcbiAgICB2YWx1ZSxcbiAgICB7XG4gICAgICByYXJpdHkgPSBmYWxzZSxcbiAgICAgIHB1c2ggPSB0cnVlLFxuICAgICAgY29tYmF0ID0gZmFsc2UsXG4gICAgICBpbWcgPSBmYWxzZSxcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gZmFsc2VcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHNraWxsTmFtZSxcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBzeXN0ZW06IHtcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHNraWxsTmFtZSxcbiAgICAgICAgc3BlY2lhbGl6YXRpb246ICcnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc3BlY2lhbDogZmFsc2UsXG4gICAgICAgICAgcmFyaXR5LFxuICAgICAgICAgIHB1c2gsXG4gICAgICAgICAgY29tYmF0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGltZyAhPT0gZmFsc2UpIHtcbiAgICAgIGRhdGEuaW1nID0gaW1nXG4gICAgfVxuICAgIGlmIChzcGVjaWFsaXphdGlvbiAhPT0gZmFsc2UpIHtcbiAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhza2lsbE5hbWUsIHNwZWNpYWxpemF0aW9uKVxuICAgICAgZGF0YS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwgPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gbGlzdCBvZiBza2lsbHMgYnkgcmVtb3Zpbmcgc3BlY2lhbGl6YXRpb24gZnJvbSBuYW1lXG4gICAqL1xuICAvLyBhc3luYyBjbGVhblNraWxscyAoKSB7XG4gIC8vICAgRGlhbG9nLmNvbmZpcm0oe1xuICAvLyAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DbGVhblNraWxsTGlzdCcpfWAsXG4gIC8vICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2xlYW5Ta2lsbExpc3RIaW50Jyl9PC9wPmAsXG4gIC8vICAgICB5ZXM6ICgpID0+IGNsZWFuKHRoaXMpXG4gIC8vICAgfSlcbiAgLy8gICBhc3luYyBmdW5jdGlvbiBjbGVhbiAoYWN0b3IpIHtcbiAgLy8gICAgIGNvbnN0IHVwZGF0ZSA9IFtdXG4gIC8vICAgICBhY3Rvci5za2lsbHMuZm9yRWFjaChzID0+IHtcbiAgLy8gICAgICAgaWYgKHMuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAvLyAgICAgICAgIGNvbnN0IGNsZWFuID0gQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKHMpPy50cmltKClcbiAgLy8gICAgICAgICBpZiAoY2xlYW4udG9Mb3dlckNhc2UoKSAhPSBzLm5hbWUudG9Mb3dlckNhc2UoKSB8fCBjbGVhbi50b0xvd2VyQ2FzZSgpICE9IHMuZGF0YS5uYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgLy8gICAgICAgICAgIHVwZGF0ZS5wdXNoKHtcbiAgLy8gICAgICAgICAgICAgX2lkOiBzLmlkLFxuICAvLyAgICAgICAgICAgICBuYW1lOiBjbGVhblxuICAvLyAgICAgICAgICAgfSlcbiAgLy8gICAgICAgICB9XG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH0pXG4gIC8vICAgICBpZiAodXBkYXRlLmxlbmd0aCAhPSAwKXtcbiAgLy8gICAgICAgYXdhaXQgYWN0b3IudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCB1cGRhdGUpXG4gIC8vICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYFNraWxscyA6ICR7QXJyYXkuZnJvbSggdXBkYXRlLCBlID0+IGUubmFtZSkuam9pbignLCAnKX0gdXBkYXRlZC5gKVxuICAvLyAgICAgfSBlbHNlIHtcbiAgLy8gICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCAnU2tpbGwgbGlzdCB3YXMgY2xlYW4gYWxyZWFkeSAhJylcbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGNyZWF0ZVNraWxsIChza2lsbE5hbWUsIHZhbHVlLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSBDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsTmFtZSwgdmFsdWUpXG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVXZWFwb25Ta2lsbCAobmFtZSwgZmlyZWFybXMgPSBmYWxzZSwgYmFzZSA9IG51bGwpIHtcbiAgICAvLyBUT0RPIDogQXNrIGZvciBiYXNlIHZhbHVlIGlmIG51bGxcblxuICAgIGNvbnN0IHNraWxsRGF0YSA9IGF3YWl0IFNraWxsU3BlY1NlbGVjdERpYWxvZy5jcmVhdGUoXG4gICAgICBbXSxcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgZmlyZWFybXNcbiAgICAgICAgICA/ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgOiAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICksXG4gICAgICAwLFxuICAgICAgbmFtZVxuICAgIClcbiAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihza2lsbERhdGEuZ2V0KCdiYXNlLXZhbHVlJykpXG4gICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgbmFtZSxcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgZmlyZWFybXNcbiAgICAgICAgICA/ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgOiAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgIClcbiAgICApXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHBhcnRzLm5hbWUsXG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIGJhc2U6IGlzTmFOKHZhbHVlKSA/IDAgOiB2YWx1ZSxcbiAgICAgICAgYWRqdXN0bWVudHM6IHtcbiAgICAgICAgICBwZXJzb25hbDogbnVsbCxcbiAgICAgICAgICBvY2N1cGF0aW9uOiBudWxsLFxuICAgICAgICAgIGFyY2hldHlwZTogbnVsbCxcbiAgICAgICAgICBleHBlcmllbmNlOiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHNraWxsTmFtZTogcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiB0cnVlLFxuICAgICAgICAgIGZpZ2h0aW5nOiAhZmlyZWFybXMsXG4gICAgICAgICAgZmlyZWFybTogZmlyZWFybXMsXG4gICAgICAgICAgY29tYmF0OiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6ICFiYXNlXG4gICAgfSlcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG5hbWUpXG4gICAgcmV0dXJuIHNraWxsWzBdXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBhIGNyZWF0dXJlIHdpdGggbWluaW11bXMgc2tpbGxzXG4gICAqL1xuICBhc3luYyBjcmVhdHVyZUluaXQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdjcmVhdHVyZScpIHJldHVyblxuICAgIGlmICh0aGlzLmdldEFjdG9yRmxhZygnaW5pdGlhbGl6ZWQnKSkgcmV0dXJuIC8vIENoYW5nZSB0byByZXR1cm4gc2tpbGwgP1xuXG4gICAgLy8gQ2hlY2sgaWYgZmlnaHRpbmcgc2tpbGxzIGV4aXN0cywgaWYgbm90IGNyZWF0ZSBpdCBhbmQgdGhlIGFzc29jaWF0ZWQgYXR0YWNrLlxuICAgIGNvbnN0IHNraWxscyA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsKVxuICAgIClcbiAgICBpZiAoc2tpbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gQ3JlYXRpbmcgbmF0dXJhbCBhdHRhY2sgc2tpbGxcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwpLFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lKVxuICAgICAgICApXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogJ3NraWxsJyxcbiAgICAgICAgICBuYW1lOiBwYXJ0cy5uYW1lLFxuICAgICAgICAgIHN5c3RlbToge1xuICAgICAgICAgICAgYmFzZTogMCxcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2tpbGxOYW1lOiBwYXJ0cy5za2lsbE5hbWUsXG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgICAgICAgZmlnaHRpbmc6IHRydWUsXG4gICAgICAgICAgICAgIHNwZWNpYWw6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmbGFnczoge31cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgYXR0YWNrID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgICAgICAnSXRlbScsXG4gICAgICAgICAgW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBuYW1lOiAnSW5uYXRlIGF0dGFjaycsXG4gICAgICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiQ3JlYXR1cmUncyBuYXR1cmFsIGF0dGFja1wiLFxuICAgICAgICAgICAgICAgICAgY2hhdDogXCJDcmVhdHVyZSdzIG5hdHVyYWwgYXR0YWNrXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdwblR5cGU6ICdpbm5hdGUnLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgIGFkZGI6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzbG50OiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICB7IHJlbmRlclNoZWV0OiBmYWxzZSB9XG4gICAgICAgIClcbiAgICAgICAgaWYgKHNraWxsLmxlbmd0aCA+IDAgJiYgYXR0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBjcmVhdGVkQXR0YWNrID0gdGhpcy5pdGVtcy5nZXQoYXR0YWNrWzBdLmlkKVxuICAgICAgICAgIGF3YWl0IGNyZWF0ZWRBdHRhY2sudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IHNraWxsWzBdLmlkLFxuICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLm5hbWUnOiBza2lsbFswXS5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NyZWF0dXJlIGluaXQ6ICcgKyBlcnIubWVzc2FnZSlcbiAgICAgIH1cbiAgICAgIC8vIGNvbnNvbGUubG9nKCAnU2tpbGwgY3JlYXRlZCcpO1xuICAgICAgYXdhaXQgdGhpcy5zZXRBY3RvckZsYWcoJ2luaXRpYWxpemVkJylcbiAgICAgIC8vIENyZWF0aW5nIGNvcnJlc3BvbmRpbmcgd2VhcG9uLlxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUl0ZW0gKGl0ZW1OYW1lLCBxdWFudGl0eSA9IDEsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IGl0ZW1OYW1lLFxuICAgICAgdHlwZTogJ2l0ZW0nLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHF1YW50aXR5XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlCb29rIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUJvb2soZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpLCBzaG93U2hlZXQpXG4gICAgfVxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQm9vayhpdGVtTmFtZSwgc2hvd1NoZWV0KVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQm9vayAoaXRlbU5hbWUsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IGl0ZW1OYW1lLFxuICAgICAgdHlwZTogJ2Jvb2snLFxuICAgICAgc3lzdGVtOiB7fVxuICAgIH1cbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5U3BlbGwgKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVNwZWxsKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSksIHNob3dTaGVldClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVNwZWxsKGl0ZW1OYW1lLCBzaG93U2hlZXQpXG4gIH1cblxuICBzdGF0aWMgZW1wdHlTcGVsbCAoaXRlbU5hbWUpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogaXRlbU5hbWUsXG4gICAgICB0eXBlOiAnc3BlbGwnLFxuICAgICAgc3lzdGVtOiB7fVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlU3BlbGwgKGl0ZW1OYW1lLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSBDb0NBY3Rvci5lbXB0eVNwZWxsKGl0ZW1OYW1lKVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlTa2lsbCAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlU2tpbGwoXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSksXG4gICAgICAgICh0aGlzLnR5cGUgIT09ICdjaGFyYWN0ZXInID8gMSA6IG51bGwpLFxuICAgICAgICBzaG93U2hlZXRcbiAgICAgIClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBza2lsbE5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoc2tpbGxOYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgc2tpbGxOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlU2tpbGwoc2tpbGxOYW1lLCBudWxsLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eUl0ZW0gKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlSXRlbShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSksIDEsIHNob3dTaGVldClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGl0ZW1OYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVJdGVtKGl0ZW1OYW1lLCAxLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eVdlYXBvbiAoZXZlbnQgPSBudWxsLCBwcm9wZXJ0aWVzID0ge30pIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBsZXQgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpXG4gICAgaWYgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpKSkge1xuICAgICAgbGV0IGluZGV4ID0gMFxuICAgICAgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpICsgJyAnICsgaW5kZXhcbiAgICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZSh3ZWFwb25OYW1lKSkge1xuICAgICAgICBpbmRleCsrXG4gICAgICAgIHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSArICcgJyArIGluZGV4XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHdlYXBvbk5hbWUsXG4gICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBwcm9wZXJ0aWVzOiB7fVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgW2tleV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy53ZWFwb25Qcm9wZXJ0aWVzKSkge1xuICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllc1trZXldID1cbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BlcnRpZXMsIGtleSkgPz8gZmFsc2VcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUJpb1NlY3Rpb24gKHRpdGxlID0gbnVsbCkge1xuICAgIGNvbnN0IGJpbyA9IHRoaXMuc3lzdGVtLmJpb2dyYXBoeVxuICAgICAgPyBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgICAgOiBbXVxuICAgIGJpby5wdXNoKHtcbiAgICAgIHRpdGxlLFxuICAgICAgdmFsdWU6IG51bGxcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSwgeyByZW5kZXJTaGVldDogZmFsc2UgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUJpb1ZhbHVlIChpbmRleCwgY29udGVudCkge1xuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgYmlvW2luZGV4XS52YWx1ZSA9IGNvbnRlbnRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0sIHsgcmVuZGVyOiBmYWxzZSB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQmlvVGl0bGUgKGluZGV4LCB0aXRsZSkge1xuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgYmlvW2luZGV4XS50aXRsZSA9IHRpdGxlXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlQmlvU2VjdGlvbiAoaW5kZXgpIHtcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGJpby5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgbW92ZUJpb1NlY3Rpb25VcCAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPT09IDApIHJldHVyblxuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgaWYgKGluZGV4ID49IGJpby5sZW5ndGgpIHJldHVyblxuICAgIGNvbnN0IGVsZW0gPSBiaW8uc3BsaWNlKGluZGV4LCAxKVswXVxuICAgIGJpby5zcGxpY2UoaW5kZXggLSAxLCAwLCBlbGVtKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIG1vdmVCaW9TZWN0aW9uRG93biAoaW5kZXgpIHtcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGlmIChpbmRleCA+PSBiaW8ubGVuZ3RoIC0gMSkgcmV0dXJuXG4gICAgY29uc3QgZWxlbSA9IGJpby5zcGxpY2UoaW5kZXgsIDEpWzBdXG4gICAgYmlvLnNwbGljZShpbmRleCArIDEsIDAsIGVsZW0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlVGV4dEFyZWEgKHRleHRBcmVhKSB7XG4gICAgY29uc3QgbmFtZSA9ICdzeXN0ZW0uJyArIHRleHRBcmVhLmRhdGFzZXQuYXJlYU5hbWVcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogdGV4dEFyZWEudmFsdWUgfSlcbiAgfVxuXG4gIC8vIGFzeW5jIF91cGRhdGVFbWJlZGRlZERvY3VtZW50cyAoZG9jdW1lbnRDbGFzcywgcGFyZW50LCB7IHVwZGF0ZXMsIG9wdGlvbnMsIHBhY2sgfSwgdXNlcikge1xuICAvLyAgIGNvbnN0IHBvdWV0ID0gJ3RvdG8nXG4gIC8vIH1cblxuICAvLyBhc3luYyBwcmVVcGRhdGVBY3RpdmVFZmZlY3QgKGEsYixjLGQpIHtcbiAgLy8gICBjb25zdCBwb3VldCA9ICd0b3RvJ1xuICAvLyB9XG5cbiAgLy8gYXN5bmMgdXBkYXRlQWN0aXZlRWZmZWN0IChhLGIsYyxkKSB7XG4gIC8vICAgY29uc3QgcG91ZXQgPSAndG90bydcbiAgLy8gfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaXRlbSBmb3IgdGhhdCBhY3Rvci5cbiAgICogSWYgaXQncyBhIHNraWxsIGZpcnN0IGNoZWNrIGlmIHRoZSBza2lsbCBpcyBhbHJlYWR5IG93bmVkLiBJZiBpdCBpcyBkb24ndCBjcmVhdGUgYSBzZWNvbmQgdGltZS5cbiAgICogRmlsbCB0aGUgdmFsdWUgb2YgdGhlIHNraWxsIHdpdGggYmFzZSBvciB0cnkgdG8gZXZhbHVhdGUgdGhlIGZvcm11bGEuXG4gICAqIEBwYXJhbSB7Kn0gZW1iZWRkZWROYW1lXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKiBAcGFyYW0geyp9IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzIChlbWJlZGRlZE5hbWUsIGRhdGFBcnJheSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHByb2Nlc3NlZERhdGFBcnJheSA9IFtdXG4gICAgbGV0IGJhc2VWYWx1ZSA9IDBcbiAgICBsZXQgYmFzZUNhbGN1bGF0ZWQgPSAwXG4gICAgbGV0IGFyY2hldHlwZSA9IGZhbHNlXG4gICAgbGV0IG9jY3VwYXRpb24gPSBmYWxzZVxuICAgIGZvciAobGV0IGRhdGEgb2YgZGF0YUFycmF5KSB7XG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICBjYXNlICdza2lsbCc6IHtcbiAgICAgICAgICBiYXNlVmFsdWUgPSBkYXRhLnN5c3RlbS5iYXNlXG4gICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBhd2FpdCBDb0M3SXRlbS5jYWxjdWxhdGVCYXNlKHRoaXMsIGRhdGEpXG4gICAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIC8vIElmIG5vdCBhIFBDIHNldCBza2lsbCB2YWx1ZSB0byBiYXNlXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRJdGVtSWRCeU5hbWUoZGF0YS5uYW1lKSkgcmV0dXJuIC8vIElmIHNraWxsIHdpdGggdGhpcyBuYW1lIGV4aXN0IHJldHVyblxuXG4gICAgICAgICAgICBpZiAoYmFzZVZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmIChTdHJpbmcoYmFzZVZhbHVlKSAhPT0gU3RyaW5nKGRhdGEuc3lzdGVtLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnZhbHVlID0gYmFzZUNhbGN1bGF0ZWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNOYU4oTnVtYmVyKGRhdGEuc3lzdGVtLnZhbHVlKSkpIHtcbiAgICAgICAgICAgICAgbGV0IHZhbHVlXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSAoXG4gICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VDaGFyYWN0ZXJpc3RpY3MoKVxuICAgICAgICAgICAgICAgICAgKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgKS50b3RhbFxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodmFsdWUpIGRhdGEuc3lzdGVtLnZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0udmFsdWUgPSBudWxsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGFkZFRoaXMgPSB0cnVlXG5cbiAgICAgICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKGRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBpc0FueUJ1dE5vdEZsYWdnZWQgPSAoIShkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUpID8/IGZhbHNlKSAmJiAhKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSA/PyBmYWxzZSlcbiAgICAgICAgICAgIGxldCBza2lsbExpc3QgPSBbXVxuICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NHcm91cEZyb21Eb2N1bWVudChkYXRhKVxuICAgICAgICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgICAgICAgIHNraWxsTGlzdCA9IChhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IG5ldyBSZWdFeHAoJ14nICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChncm91cCkgKyAnLiskJyksIHR5cGU6ICdpJyB9KSkuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCA/PyBmYWxzZSkgJiYgIShpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUgPz8gZmFsc2UpICYmICEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucGlja25hbWVvbmx5ID8/IGZhbHNlKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtPy5mbGFncz8ub2NjdXBhdGlvbiB8fCBkYXRhLnN5c3RlbT8uZmxhZ3M/LmFyY2hldHlwZSkge1xuICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1NraWxscyA9IHRoaXMuc2tpbGxzLmZpbHRlcihlbCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24pIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtPy5mbGFncz8ub2NjdXBhdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgZWwuc3lzdGVtLmZsYWdzPy5vY2N1cGF0aW9uXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0/LmZsYWdzPy5hcmNoZXR5cGUgJiZcbiAgICAgICAgICAgICAgICAgIGVsLnN5c3RlbS5mbGFncz8uYXJjaGV0eXBlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICBlbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2tpbGxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBleGlzdGluZ1NraWxscy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3VuZCA9IHNraWxsTGlzdC5maW5kSW5kZXgoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gZXhpc3RpbmdTa2lsbHNbaV0ubmFtZSB8fCBpdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkID09PSBleGlzdGluZ1NraWxsc1tpXS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsTGlzdC5zcGxpY2UoZm91bmQsIDEpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHNraWxsTGlzdCA9IHNraWxsTGlzdC5jb25jYXQoZXhpc3RpbmdTa2lsbHMpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsTGlzdCA9IGV4aXN0aW5nU2tpbGxzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgICBza2lsbHM6IHNraWxsTGlzdCxcbiAgICAgICAgICAgICAgYWxsb3dDdXN0b206IChpc0FueUJ1dE5vdEZsYWdnZWQgfHwgKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSA/PyBmYWxzZSkpLFxuICAgICAgICAgICAgICBmaXhlZEJhc2VWYWx1ZTogKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LmtlZXBiYXNldmFsdWUgPz8gZmFsc2UpLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbk5hbWU6IGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICAgICAgICBsYWJlbDogZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBiYXNlVmFsdWU6IGRhdGEuc3lzdGVtLmJhc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNraWxsRGF0YSwgJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbSA9IHRoaXMuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgICAgICAgc2tpbGxEYXRhLnNlbGVjdGVkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0l0ZW0pIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5nZXMgPSB7fVxuICAgICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ua2VlcGJhc2V2YWx1ZSA/PyBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5iYXNlVmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBza2lsbERhdGEuYmFzZVZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdlc1snc3lzdGVtLnZhbHVlJ10gPSBiYXNlQ2FsY3VsYXRlZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLnN5c3RlbS5mbGFncykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdlc1tgc3lzdGVtLmZsYWdzLiR7a2V5fWBdID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY2hhbmdlcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLl9pZCA9IGV4aXN0aW5nSXRlbS5pZFxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2NoYW5nZXNdKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGF0YS5uYW1lID0gQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGV4aXN0aW5nSXRlbSlcbiAgICAgICAgICAgICAgICAgIGFkZFRoaXMgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHNraWxsTGlzdC5maW5kKGkgPT4gaS5pZCA9PT0gc2tpbGxEYXRhLnNlbGVjdGVkKVxuICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZsYWdzID0gZGF0YS5zeXN0ZW0/LmZsYWdzXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBkdXBsaWNhdGUoZXhpc3RpbmcpXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZsYWdzKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uZmxhZ3Nba2V5XSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ua2VlcGJhc2V2YWx1ZSA/PyBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLmJhc2VWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VDYWxjdWxhdGVkID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udmFsdWUgPSBiYXNlQ2FsY3VsYXRlZFxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVmFsdWUgPSBkYXRhLnN5c3RlbS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgICAgICBza2lsbERhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGlmICghKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LmtlZXBiYXNldmFsdWUgPz8gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLmJhc2VWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBza2lsbERhdGEuYmFzZVZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnZhbHVlID0gYmFzZUNhbGN1bGF0ZWRcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VWYWx1ZSA9IGRhdGEuc3lzdGVtLnZhbHVlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICAgIGRhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhZGRUaGlzKSB7XG4gICAgICAgICAgICBpZiAoU3RyaW5nKGJhc2VWYWx1ZSkgIT09IFN0cmluZyhiYXNlQ2FsY3VsYXRlZCkpIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uYmFzZSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3dlYXBvbic6IHtcbiAgICAgICAgICBpZiAodGhpcy50eXBlICE9PSAnY29udGFpbmVyJykge1xuICAgICAgICAgICAgY29uc3QgbWFpblNraWxsID0gZGF0YS5zeXN0ZW0/LnNraWxsPy5tYWluPy5uYW1lXG4gICAgICAgICAgICBpZiAobWFpblNraWxsKSB7XG4gICAgICAgICAgICAgIGxldCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG1haW5Ta2lsbClbMF1cbiAgICAgICAgICAgICAgaWYgKCFza2lsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBtYWluU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgICAgICAgICAgICAgPyBtYWluU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgICAgICAgICAgICAgOiBtYWluU2tpbGxcbiAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlV2VhcG9uU2tpbGwoXG4gICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgISFkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5ybmdkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChza2lsbCkgZGF0YS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHNraWxsLmlkXG4gICAgICAgICAgICB9IC8vIFRPRE8gOiBFbHNlIDogc2VsZWN0aW9ubmVyIGxlIHNraWxsIGRhbnMgbGEgbGlzdGUgb3UgZW4gY3LDqWVyIHVuIG5vdXZlYXUuXG5cbiAgICAgICAgICAgIGNvbnN0IHNlY29uZFNraWxsID0gZGF0YS5zeXN0ZW0/LnNraWxsPy5hbHRlcm5hdGl2Py5uYW1lXG4gICAgICAgICAgICBpZiAoc2Vjb25kU2tpbGwpIHtcbiAgICAgICAgICAgICAgbGV0IHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoc2Vjb25kU2tpbGwpWzBdXG4gICAgICAgICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylcbiAgICAgICAgICAgICAgICAgID8gbWFpblNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgICAgICAgICAgICAgIDogbWFpblNraWxsXG4gICAgICAgICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZVdlYXBvblNraWxsKFxuICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgICEhZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucm5nZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc2tpbGwpIGRhdGEuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgPSBza2lsbC5pZFxuICAgICAgICAgICAgfSAvLyBUT0RPIDogRWxzZSA6IHNlbGVjdGlvbm5lciBsZSBza2lsbCBkYW5zIGxhIGxpc3RlIG91IGVuIGNyw6llciB1biBub3V2ZWF1LlxuICAgICAgICAgIH1cblxuICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAnc2V0dXAnOiB7XG4gICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmVuYWJsZUNoYXJhY3RlcmlzaXRpY3MpIHtcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0ID0ge31cbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnN0ciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3N0cicpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5jb24gPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdjb24nKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3Quc2l6ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnc2l6JylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmRleCA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2RleCcpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5hcHAgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdhcHAnKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuaW50ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnaW50JylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnBvdyA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3BvdycpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5lZHUgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdlZHUnKVxuXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrID0ge31cbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sudmFsdWUgPSBpc05hTih0aGlzLmx1Y2spXG4gICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICA6IHRoaXMubHVja1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjay5sYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2suc2hvcnROYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5MdWNrJ1xuICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICBpZiAoIWRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcyA9IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnN0ciA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnN0ci52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5jb24gPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5jb24udmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc2l6ID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3Quc2l6LnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmRleCA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmRleC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5hcHAgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5hcHAudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuaW50ID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuaW50LnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnBvdy52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5lZHUgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5lZHUudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVjayA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sudmFsdWVcbiAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3BlbmRQb2ludHMnKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbENoYXJhYycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5wb2ludHNXYXJuaW5nID0gIShcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zdHIgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5jb24gIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zaXogIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5kZXggIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5hcHAgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5pbnQgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5lZHUgIT09IG51bGxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNvbnN0IHJvbGxlZCA9IGF3YWl0IENoYXJhY1JvbGxEaWFsb2cuY3JlYXRlKGRhdGEuc3lzdGVtKVxuICAgICAgICAgICAgaWYgKHJvbGxlZCkge1xuICAgICAgICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgICAgICAgICAgICdzdHInLFxuICAgICAgICAgICAgICAgICdjb24nLFxuICAgICAgICAgICAgICAgICdzaXonLFxuICAgICAgICAgICAgICAgICdkZXgnLFxuICAgICAgICAgICAgICAgICdhcHAnLFxuICAgICAgICAgICAgICAgICdpbnQnLFxuICAgICAgICAgICAgICAgICdwb3cnLFxuICAgICAgICAgICAgICAgICdlZHUnXG4gICAgICAgICAgICAgIF0pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldKSB7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldXG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS5mb3JtdWxhYF0gPVxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHNba2V5XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5sdWNrKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlJ10gPVxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5sdWNrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93KSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJ10gPVxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3dcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCddID0gTWF0aC5mbG9vcihcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93IC8gNVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5tcC5tYXgnXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyAvIDVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUodXBkYXRlRGF0YSwgeyByZW5kZXJTaGVldDogZmFsc2UgfSlcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6IHRoaXMucmF3SHBNYXgsXG4gICAgICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLmhwLm1heCc6IHRoaXMucmF3SHBNYXhcbiAgICAgICAgICAgICAgfSwgeyByZW5kZXJTaGVldDogZmFsc2UgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBlcmEgPSBPYmplY3QuZW50cmllcyhkYXRhLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pXG4gICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IGRhdGEuc3lzdGVtLml0ZW1zLCBlcmE6ICh0eXBlb2YgZXJhWzBdICE9PSAndW5kZWZpbmVkJyA/IGVyYVswXSA6IHRydWUpIH0pXG4gICAgICAgICAgY29uc3Qgc2tpbGxzID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgPT09ICdza2lsbCcpXG4gICAgICAgICAgY29uc3Qgb3RoZXJzSXRlbXMgPSBpdGVtcy5maWx0ZXIoaXQgPT4gaXQudHlwZSAhPT0gJ3NraWxsJylcbiAgICAgICAgICBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKHNraWxscylcbiAgICAgICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKG90aGVyc0l0ZW1zKVxuICAgICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmFja3N0b3J5JzogZGF0YS5zeXN0ZW0uYmFja3N0b3J5IH0sIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbk5hbWUgb2YgZGF0YS5zeXN0ZW0uYmlvU2VjdGlvbnMpIHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICF0aGlzLnN5c3RlbS5iaW9ncmFwaHk/LmZpbmQoXG4gICAgICAgICAgICAgICAgICBlbCA9PiBzZWN0aW9uTmFtZSA9PT0gZWwudGl0bGVcbiAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgc2VjdGlvbk5hbWVcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVCaW9TZWN0aW9uKHNlY3Rpb25OYW1lKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHJlZmFjdG9yIHRoaXNcbiAgICAgICAgICBjb25zdCBtb25ldGFyeSA9IG1lcmdlT2JqZWN0KHRoaXMuc3lzdGVtLm1vbmV0YXJ5LCBkdXBsaWNhdGUoZGF0YS5zeXN0ZW0ubW9uZXRhcnkpKVxuICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldFxuICAgICAgICAgIGxldCBzdGF0ZSA9IGZhbHNlXG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgc3RhdGUgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICByZXNvbHZlKHNoZWV0Ll9zdGF0ZSlcbiAgICAgICAgICAgIH0sIDEwMCkpXG4gICAgICAgICAgfSB3aGlsZSAoc3RhdGUgPT09IEFwcGxpY2F0aW9uLlJFTkRFUl9TVEFURVMuUkVOREVSSU5HKVxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0ubW9uZXRhcnknOiBtb25ldGFyeVxuICAgICAgICAgIH0pXG4gICAgICAgICAgSG9va3MuY2FsbCgnc2V0dXBGaW5pc2hlZENvQzcnKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnYXJjaGV0eXBlJzpcbiAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgLy8gQXJjaGV0eXByZSBvbmx5IGZvciBQQ3NcbiAgICAgICAgICAgIGlmICh0aGlzLmFyY2hldHlwZSkge1xuICAgICAgICAgICAgICBsZXQgcmVzZXRBcmNoZXR5cGUgPSBmYWxzZVxuICAgICAgICAgICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZXNldEFyY2hldHlwZScpLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVzZXRBcmNoZXR5cGVIaW50Jywge1xuICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lXG4gICAgICAgICAgICAgICAgfSl9PC9wPmAsXG4gICAgICAgICAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXNldEFyY2hldHlwZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRZZXM6IGZhbHNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChyZXNldEFyY2hldHlwZSkgYXdhaXQgdGhpcy5yZXNldEFyY2hldHlwZSgpXG4gICAgICAgICAgICAgIGVsc2UgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvcmVDaGFyYWMgPSBbXVxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzW2tleV0gPSBmYWxzZVxuICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhrZXkpXG4gICAgICAgICAgICAgICAgY2hhci5rZXkgPSBrZXlcbiAgICAgICAgICAgICAgICBjb3JlQ2hhcmFjLnB1c2goY2hhcilcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgY2hhcmFjXG5cbiAgICAgICAgICAgIGlmIChjb3JlQ2hhcmFjLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgY29uc3QgY2hhckRpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgICBjaGFyRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3MgPSBjb3JlQ2hhcmFjXG4gICAgICAgICAgICAgIGNoYXJEaWFsb2dEYXRhLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNlbGVjdENvcmVDaGFyYWMnKVxuICAgICAgICAgICAgICBjaGFyYWMgPSBhd2FpdCBDaGFyYWNTZWxlY3REaWFsb2cuY3JlYXRlKGNoYXJEaWFsb2dEYXRhKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb3JlQ2hhcmFjLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICBjaGFyYWMgPSBjb3JlQ2hhcmFjWzBdLmtleVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWNoYXJhYykgcmV0dXJuXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzW2NoYXJhY10gPSB0cnVlXG4gICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEuZW5hYmxlZCkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBOdW1iZXIoZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEudmFsdWUpXG4gICAgICAgICAgICAgIGlmIChpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWMpXG4gICAgICAgICAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEudmFsdWVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICByb2xsLnRvTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgICdDb0M3Lk1lc3NhZ2VSb2xsaW5nQ2hhcmFjdGVyaXN0aWMnLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGNoYXIubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgZm9ybXVsYTogZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBjaGFyLnZhbHVlIDwgcm9sbC50b3RhbCA/IHJvbGwudG90YWwgOiBjaGFyLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgICAgIFtgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2NoYXJhY30udmFsdWVgXTogdmFsdWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIGFsbCBza2lsbHNcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKGRhdGEuc3lzdGVtLnNraWxscywgJ2FyY2hldHlwZScpXG5cbiAgICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICAgIGFyY2hldHlwZSA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdvY2N1cGF0aW9uJzpcbiAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgLy8gT2NjdXBhdGlvbiBvbmx5IGZvciBQQ3NcbiAgICAgICAgICAgIGlmICh0aGlzLm9jY3VwYXRpb24pIHtcbiAgICAgICAgICAgICAgbGV0IHJlc2V0T2NjdXBhdGlvbiA9IGZhbHNlXG4gICAgICAgICAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlc2V0T2NjdXBhdGlvbicpLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVzZXRPY2N1cGF0aW9uSGludCcsIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZVxuICAgICAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgICAgIHllczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmVzZXRPY2N1cGF0aW9uID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdFllczogZmFsc2VcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKHJlc2V0T2NjdXBhdGlvbikgYXdhaXQgdGhpcy5yZXNldE9jY3VwYXRpb24oKVxuICAgICAgICAgICAgICBlbHNlIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb252ZXJ0IENvQ0lEcyB0byBpdGVtc1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5za2lsbHMgfSlcblxuICAgICAgICAgICAgaWYgKE51bWJlcihkYXRhLnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4KSA+IDApIHtcbiAgICAgICAgICAgICAgLy8gT2NjdXBhdGlvbnMgd2l0aCBhIGNyZWRpdCByYXRpbmcgcmVxdWlyZSBhIGNyZWRpdCByYXRpbmcgc2tpbGxcbiAgICAgICAgICAgICAgY29uc3QgYWN0b3JDcmVkaXRSYXRpbmcgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZmluZENvY0lkSW5MaXN0KCdpLnNraWxsLmNyZWRpdC1yYXRpbmcnLCBkYXRhLnN5c3RlbS5za2lsbHMpXG4gICAgICAgICAgICAgIGlmIChhY3RvckNyZWRpdFJhdGluZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJywgdGhpcy5pdGVtcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMucHVzaCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJylcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChnYW1lLnN5c3RlbS5hcGkuY29jaWQuZmluZENvY0lkSW5MaXN0KCdpLnNraWxsLmNyZWRpdC1yYXRpbmcnLCB0aGlzLml0ZW1zKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscy5wdXNoKGFjdG9yQ3JlZGl0UmF0aW5nWzBdKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZWxlY3QgY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICAgIGNvbnN0IHBvaW50c0RpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3MgPSBkYXRhLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcbiAgICAgICAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgICAgICAgIGxldCBvcHRpb25hbENoYXIgPSBmYWxzZVxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS5uYW1lID0gY2hhci5sYWJlbFxuICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnZhbHVlID0gY2hhci52YWx1ZVxuICAgICAgICAgICAgICBpZiAodmFsdWUuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsID1cbiAgICAgICAgICAgICAgICAgIGNoYXIudmFsdWUgKlxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0ubXVsdGlwbGllcilcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICB0b3RhbCArPSBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbmFsQ2hhciA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEudG90YWwgPSB0b3RhbFxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsQ2hhcikge1xuICAgICAgICAgICAgICAvLyBJcyB0aGVyZSBhbnkgb3B0aW9uYWwgY2hhciB0byBjaG9vc2UgZm9yIHBvaW50cyBjYWxjID9cbiAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9pbnRTZWxlY3REaWFsb2cuY3JlYXRlKHBvaW50c0RpYWxvZ0RhdGEpXG4gICAgICAgICAgICAgIGlmICghcmVzdWx0KSByZXR1cm4gLy8gUG9pbnQgbm90IHNlbGVjdGVkID0+IGV4aXQuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBvcHRpb25hbCBza2lsbHNcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgIC8vIENvbnZlcnQgQ29DSWRzIHRvIGl0ZW1zXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyB9KVxuXG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxscyA9IFtdXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudHlwZSA9ICdvY2N1cGF0aW9uJ1xuICAgICAgICAgICAgICBkaWFsb2dEYXRhLmFjdG9ySWQgPSB0aGlzLmlkXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50ID0gTnVtYmVyKGRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0ub3B0aW9ucylcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbFNlbGVjdGlvbldpbmRvdycpXG5cbiAgICAgICAgICAgICAgLy8gU2VsZWN0IG9ubHkgc2tpbGxzIHRoYXQgYXJlIG5vdCBwcmVzZW50IG9yIGFyZSBub3QgZmxhZ2dlZCBhcyBvY2N1cGF0aW9uLlxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzKSB7XG4gICAgICAgICAgICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyh2YWx1ZSkpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2godmFsdWUpXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIGdlbmVyaWMgc3BlYyB3ZSBhbHdheXMgYWRkIGl0XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZmluZChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdmFsdWUubmFtZSAmJiBpdGVtLnR5cGUgPT09ICdza2lsbCdcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBpZiAoIXNraWxsIHx8ICFza2lsbC5zeXN0ZW0uZmxhZ3M/Lm9jY3VwYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgc2tpbGwgd2FzIGFkZGVkIHRvIHNraWxsIGxpc3QgcHJldmlvdXNseSwgcmVtb3ZlIGl0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFscmVhZHlTZWxlY3RlZFNraWxsID0gZGF0YS5zeXN0ZW0uc2tpbGxzLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdmFsdWUubmFtZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlTZWxlY3RlZFNraWxsKSBkaWFsb2dEYXRhLnNraWxscy5wdXNoKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm9uZSwgZG8gbm90aGluZy5cbiAgICAgICAgICAgICAgaWYgKGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggPD0gZGlhbG9nRGF0YS5vcHRpb25zQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgaXMgbGVzcyBza2lsbCB0aGFuIG9wdGlvbnMsIGFkZCB0aGVtIGFsbC5cbiAgICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvTGVzc1NraWxsVGhhbk9wdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgc2tpbGxDb3VudDogZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNDb3VudDogZGlhbG9nRGF0YS5vcHRpb25zQ291bnRcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoIGRpYWxvZ0RhdGEuc2tpbGxzLCAnb2NjdXBhdGlvbicpO1xuICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gQ29DN0l0ZW0ubWVyZ2VPcHRpb25hbFNraWxscyhcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzLFxuICAgICAgICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxsc1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gbWVyZ2VkXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHNraWxsIHNlbGVjdGlvbi5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gYXdhaXQgU2tpbGxTZWxlY3REaWFsb2cuY3JlYXRlKGRpYWxvZ0RhdGEpXG4gICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW5mb0FsbFNraWxsc0FscmVhZHlTZWxlY3RlZCcpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBleHRyYSBza2lsbHNcbiAgICAgICAgICAgIGlmIChOdW1iZXIoZGF0YS5zeXN0ZW0ucGVyc29uYWwpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxscyA9IFtdXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudHlwZSA9ICdvY2N1cGF0aW9uJ1xuICAgICAgICAgICAgICBkaWFsb2dEYXRhLmFjdG9ySWQgPSB0aGlzLmlkXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50ID0gTnVtYmVyKGRhdGEuc3lzdGVtLnBlcnNvbmFsKVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TZWxlY3RQZXJzb25hbFNraWxscycsIHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IE51bWJlcihkYXRhLnN5c3RlbS5wZXJzb25hbClcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAvLyBTZWxlY3Qgb25seSBza2lsbHMgdGhhdCBhcmUgbm90IHByZXNlbnQgb3IgYXJlIG5vdCBmbGFnZ2VkIGFzIG9jY3VwYXRpb24uXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLnNraWxscykge1xuICAgICAgICAgICAgICAgIC8vIFNlbGVjdCBhbGwgc2tpbGxzIHRoYXQgYXJlIG5vdCBhbHJlYWR5IGZsYWdnZWQgYXMgb2NjdXBhdGlvbiwgY2FuIGhhdmUgYWRqdXN0bWVudHMgYW5kIFhQLlxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFzLnN5c3RlbS5mbGFncy5vY2N1cGF0aW9uICYmXG4gICAgICAgICAgICAgICAgICAhcy5zeXN0ZW0ucHJvcGVydGllcy5ub2FkanVzdG1lbnRzICYmXG4gICAgICAgICAgICAgICAgICAhcy5zeXN0ZW0ucHJvcGVydGllcy5ub3hwZ2FpblxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgLy8gaWYgc2tpbGwgYWxyZWFkeSBzZWxlY3RlZCBkb24ndCBhZGQgaXRcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGFscmVhZHlTZWxlY3RlZFNraWxsID0gZGF0YS5zeXN0ZW0uc2tpbGxzLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHMubmFtZVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGlmICghYWxyZWFkeVNlbGVjdGVkU2tpbGwpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2gocylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vbmUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoIDw9IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGlzIGxlc3Mgc2tpbGwgdGhhbiBvcHRpb25zLCBhZGQgdGhlbSBhbGwuXG4gICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0xlc3NTa2lsbFRoYW5PcHRpb25zJywge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ291bnQ6IGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ291bnQ6IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKCBkaWFsb2dEYXRhLnNraWxscywgJ29jY3VwYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHNcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBza2lsbCBzZWxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGF3YWl0IFNraWxsU2VsZWN0RGlhbG9nLmNyZWF0ZShkaWFsb2dEYXRhKSAvLyBEaWFsb2cgZGF0YSBidWcgPz8/XG4gICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW5mb0FsbFNraWxsc0FscmVhZHlTZWxlY3RlZCcpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBhbGwgc2tpbGxzXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKGRhdGEuc3lzdGVtLnNraWxscywgJ29jY3VwYXRpb24nKVxuICAgICAgICAgICAgLy8gQ3JlZGl0IHJhdGluZyBpcyBhbHdheXMgcGFydCBvZiBvY2N1cGF0aW9uXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWRpdFJhdGluZ1NraWxsPy5zZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICAgICAgICAvLyBzZXR0aW5nIGl0IHRvIG1pbiBjcmVkaXQgcmF0aW5nXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWRpdFJhdGluZ1NraWxsPy51cGRhdGUoe1xuICAgICAgICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLm9jY3VwYXRpb24nOiBOdW1iZXIoZGF0YS5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1pbilcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICAgIG9jY3VwYXRpb24gPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChkdXBsaWNhdGUoZGF0YSkpXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzZWREYXRhQXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgY29uc3QgcHJvY2Vzc2VkID0gYXdhaXQgc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoXG4gICAgICBlbWJlZGRlZE5hbWUsXG4gICAgICBwcm9jZXNzZWREYXRhQXJyYXksXG4gICAgICBvcHRpb25zXG4gICAgKVxuXG4gICAgaWYgKGFyY2hldHlwZSkge1xuICAgICAgLy8gc2V0dGluZyBwb2ludHNcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5hcmNoZXR5cGUnOiB0aGlzLmFyY2hldHlwZVBvaW50c1xuICAgICAgfSlcbiAgICAgIEhvb2tzLmNhbGwoJ2FyY2hldHlwZUZpbmlzaGVkQ29DNycpXG4gICAgfVxuICAgIGlmIChvY2N1cGF0aW9uKSB7XG4gICAgICAvLyBzZXR0aW5nIHBvaW50c1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmRldmVsb3BtZW50Lm9jY3VwYXRpb24nOiB0aGlzLm9jY3VwYXRpb25Qb2ludHMsXG4gICAgICAgICdzeXN0ZW0uZGV2ZWxvcG1lbnQucGVyc29uYWwnOiB0aGlzLnBlcnNvbmFsUG9pbnRzXG4gICAgICB9KVxuICAgICAgSG9va3MuY2FsbCgnb2NjdXBhdGlvbkZpbmlzaGVkQ29DNycpXG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2Nlc3NlZFxuICB9XG5cbiAgLy8gZ2V0U2tpbGxJZEJ5TmFtZSggc2tpbGxOYW1lKXtcbiAgLy8gICBsZXQgaWQgPSBudWxsO1xuICAvLyAgICBmb3IgKGNvbnN0IFttYXAsIGtleSwgdmFsdWVdIG9mIHRoaXMuaXRlbXMpIHtcbiAgLy8gICAgIGlmKCB2YWx1ZS5uYW1lID09IHNraWxsTmFtZSkgaWQgPSB2YWx1ZS5pZDtcbiAgLy8gICB9O1xuXG4gIC8vICAgcmV0dXJuIGlkO1xuICAvLyB9XG5cbiAgZ2V0SXRlbUlkQnlOYW1lIChpdGVtTmFtZSkge1xuICAgIGxldCBpZCA9IG51bGxcbiAgICBjb25zdCBuYW1lID0gaXRlbU5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgPyBpdGVtTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICA6IGl0ZW1OYW1lXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAoXG4gICAgICAgIENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyh2YWx1ZSkudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApIHtcbiAgICAgICAgaWQgPSB2YWx1ZS5pZFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpZFxuICB9XG5cbiAgZ2V0SXRlbXNCeU5hbWUgKGl0ZW1OYW1lKSB7XG4gICAgY29uc3QgaXRlbUxpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLm5hbWUgPT09IGl0ZW1OYW1lKSBpdGVtTGlzdC5wdXNoKHZhbHVlKVxuICAgIH1cblxuICAgIHJldHVybiBpdGVtTGlzdFxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqXG4gICAqL1xuICBnZXRTa2lsbHNCeU5hbWUgKHNraWxsTmFtZSkge1xuICAgIC8vIFRPRE8gOiBtb3JlIGFnZ3Jlc3NpdmUgZmluZGluZyBpbmNsdWRpbmcgc3BlY3NcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxuICAgIGNvbnN0IG5hbWUgPSBza2lsbE5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgPyBza2lsbE5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgOiBza2lsbE5hbWVcblxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKFxuICAgICAgICAoXG4gICAgICAgICAgQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKHZhbHVlKS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICB2YWx1ZS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCA9PT0gc2tpbGxOYW1lXG4gICAgICAgICkgJiZcbiAgICAgICAgdmFsdWUudHlwZSA9PT0gJ3NraWxsJ1xuICAgICAgKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2tpbGxMaXN0XG4gIH1cblxuICBnZXRGaXJzdFNraWxsQnlDb0NJRCAoY29jaWQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtcy5maW5kKGkgPT4gaS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCA9PT0gY29jaWQpXG4gIH1cblxuICBwYXJzZUZvcm11bGEgKGZvcm11bGEpIHtcbiAgICBsZXQgcGFyc2VkRm9ybXVsYSA9IGZvcm11bGFcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3IpKSB7XG4gICAgICBwYXJzZWRGb3JtdWxhID0gcGFyc2VkRm9ybXVsYS5yZXBsYWNlKGtleSwgdmFsdWUpXG4gICAgfVxuICAgIHJldHVybiBwYXJzZWRGb3JtdWxhXG4gIH1cblxuICBwYXJzZUNoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgY29uc3QgcGFyc2VkID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3IpKSB7XG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGdldFByb3BlcnR5KHRoaXMsIHZhbHVlLnN1YnN0cmluZyg1KSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZFxuICB9XG5cbiAgc3RhdGljIGdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbiAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIGdhbWUuc3lzdGVtLnRlbXBsYXRlLkFjdG9yLnRlbXBsYXRlcy5jaGFyYWN0ZXJpc3RpY3MuY2hhcmFjdGVyaXN0aWNzXG4gICAgKSkge1xuICAgICAgY2hhcmFjdGVyaXN0aWNzLnB1c2goe1xuICAgICAgICBrZXksXG4gICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbClcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3NcbiAgfVxuXG4gIGdldENoYXJhY3RlcmlzdGljIChjaGFyTmFtZSkge1xuICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCkudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgIGNoYXJOYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAga2V5ID09PSBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0QXR0cmlidXRlIChhdHRyaWJOYW1lKSB7XG4gICAgaWYgKFxuICAgICAgWydsY2snLCAnbHVjaycsIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJykudG9Mb3dlckNhc2UoKV0uaW5jbHVkZXMoXG4gICAgICAgIGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2V5OiAnbGNrJyxcbiAgICAgICAgc2hvcnROYW1lOiAnbHVjaycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxuICAgICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0uYXR0cmlicy5sY2sudmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFxuICAgICAgW1xuICAgICAgICAnc2FuJyxcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKS50b0xvd2VyQ2FzZSgpXG4gICAgICBdLmluY2x1ZGVzKGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleTogJ3NhbicsXG4gICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpLFxuICAgICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHJ1blJvbGwgKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTFxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucHJldmVudFN0YW5kYnkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zLnByZXZlbnRTdGFuZGJ5ID0gdHJ1ZVxuICAgIH1cbiAgICBvcHRpb25zLmFjdG9yID0gdGhpc1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcihvcHRpb25zKVxuICAgIHJldHVybiByZXN1bHRzXG4gIH1cblxuICBnZXQgb2NjdXBhdGlvbiAoKSB7XG4gICAgY29uc3Qgb2NjdXBhdGlvbiA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpXG4gICAgcmV0dXJuIG9jY3VwYXRpb25bMF1cbiAgfVxuXG4gIGdldCBhcmNoZXR5cGUgKCkge1xuICAgIGNvbnN0IGFyY2hldHlwZSA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJylcbiAgICByZXR1cm4gYXJjaGV0eXBlWzBdXG4gIH1cblxuICBhc3luYyByZXNldE9jY3VwYXRpb24gKGVyYXNlT2xkID0gdHJ1ZSkge1xuICAgIGlmIChlcmFzZU9sZCkge1xuICAgICAgY29uc3Qgb2NjdXBhdGlvblNraWxsID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PlxuICAgICAgICBpdGVtLmdldEl0ZW1GbGFnKCdvY2N1cGF0aW9uJylcbiAgICAgIClcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBvY2N1cGF0aW9uU2tpbGwubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGF3YWl0IG9jY3VwYXRpb25Ta2lsbFtpbmRleF0udW5zZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLm9jY3VwYXRpb24pIGF3YWl0IHRoaXMub2NjdXBhdGlvbi5kZWxldGUoKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogbnVsbCB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRBcmNoZXR5cGUgKGVyYXNlT2xkID0gdHJ1ZSkge1xuICAgIGlmIChlcmFzZU9sZCkge1xuICAgICAgY29uc3QgYXJjaGV0eXBlU2tpbGwgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+XG4gICAgICAgIGl0ZW0uZ2V0SXRlbUZsYWcoJ2FyY2hldHlwZScpXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXJjaGV0eXBlU2tpbGwubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGF3YWl0IGFyY2hldHlwZVNraWxsW2luZGV4XS51bnNldEl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5hcmNoZXR5cGUpIGF3YWl0IHRoaXMuYXJjaGV0eXBlLmRlbGV0ZSgpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IG51bGwgfSlcbiAgfVxuXG4gIGdldCBsdWNrICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicz8ubGNrPy52YWx1ZSlcbiAgfVxuXG4gIGFzeW5jIHNldEx1Y2sgKHZhbHVlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBzcGVuZEx1Y2sgKGFtb3VudCkge1xuICAgIGFtb3VudCA9IHBhcnNlSW50KGFtb3VudClcbiAgICBpZiAoISh0aGlzLmx1Y2sgPj0gYW1vdW50KSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRoaXMuc2V0THVjayh0aGlzLmx1Y2sgLSBhbW91bnQpXG4gIH1cblxuICBnZXQgaHAgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlKVxuICB9XG5cbiAgZ2V0IHJhd0hwTWF4ICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5hdXRvKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgIT0gbnVsbCAmJlxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlICE9IG51bGxcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gQ29DQWN0b3IuaHBGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcywgdGhpcy50eXBlKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgfVxuXG4gIGdldCBocE1heCAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KVxuICB9XG5cbiAgYXN5bmMgX3NldEhwICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgYWRkVW5pcXVlSXRlbXMgKHNraWxsTGlzdCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBbXVxuICAgIGZvciAobGV0IHNraWxsIG9mIHNraWxsTGlzdCkge1xuICAgICAgc2tpbGwgPSBkdXBsaWNhdGUoc2tpbGwpXG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChza2lsbC5zeXN0ZW0sICdmbGFncycpKSB7XG4gICAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzID0ge31cbiAgICAgICAgfVxuICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3NbZmxhZ10gPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKHNraWxsKSkge1xuICAgICAgICBwcm9jZXNzZWQucHVzaChza2lsbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGl0ZW1JZCA9IHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsLm5hbWUpXG4gICAgICAgIGlmICghaXRlbUlkKSB7XG4gICAgICAgICAgcHJvY2Vzc2VkLnB1c2goc2tpbGwpXG4gICAgICAgIH0gZWxzZSBpZiAoZmxhZykge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgICAgICAgYXdhaXQgaXRlbS5zZXRJdGVtRmxhZyhmbGFnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHByb2Nlc3NlZCwge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZEl0ZW1zIChpdGVtTGlzdCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtTGlzdCkge1xuICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgaWYgKCFpdGVtLnN5c3RlbS5mbGFncykgaXRlbS5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgICBpdGVtLnN5c3RlbS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgIH1cbiAgICAgIHByb2Nlc3NlZC5wdXNoKGR1cGxpY2F0ZShpdGVtKSlcbiAgICB9XG4gICAgaWYgKHByb2Nlc3NlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHByb2Nlc3NlZCwge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZFVuaXF1ZUl0ZW0gKHNraWxsLCBmbGFnID0gbnVsbCkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsLm5hbWUpXG4gICAgaWYgKCFpdGVtSWQpIHtcbiAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgIGlmICghc2tpbGwuc3lzdGVtLmZsYWdzKSBza2lsbC5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3NbZmxhZ10gPSB0cnVlXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW3NraWxsXSwge1xuICAgICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChmbGFnKSB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtcy5nZXQoaXRlbUlkKVxuICAgICAgYXdhaXQgaXRlbS5zZXRJdGVtRmxhZyhmbGFnKVxuICAgIH1cbiAgfVxuXG4gIGdldCByYXdNcE1heCAoKSB7XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubXAuYXV0bykge1xuICAgICAgaWYgKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gQ29DQWN0b3IubXBGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcylcbiAgICAgIH0gZWxzZSByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5tYXgpXG4gIH1cblxuICBnZXRSZWFzb25TYW5Mb3NzIChzYW5SZWFzb24pIHtcbiAgICBpZiAodHlwZW9mIHNhblJlYXNvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuc3lzdGVtLnNhbml0eUxvc3NFdmVudHMuZmlsdGVyKFxuICAgICAgICAgIHIgPT4gci50eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNhblJlYXNvbi50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICAgIClbMF0gPz8geyB0eXBlOiAnJywgdG90YWxMb3NzOiAwLCBpbW11bml0eTogZmFsc2UgfVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiAnJywgdG90YWxMb3NzOiAwLCBpbW11bml0eTogZmFsc2UgfVxuICB9XG5cbiAgc2FuTG9zdFRvUmVhc29uIChzYW5SZWFzb24pIHtcbiAgICBpZiAoc2FuUmVhc29uKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxuICAgICAgcmV0dXJuIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3NcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCAoc2FuUmVhc29uKSB7XG4gICAgaWYgKHNhblJlYXNvbikge1xuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICAgIHJldHVybiBzYW5pdHlMb3NzRXZlbnQudHlwZSAhPT0gJydcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzZXRSZWFzb25TYW5Mb3NzIChzYW5SZWFzb24sIHNhbkxvc3MpIHtcbiAgICBpZiAodHlwZW9mIHNhblJlYXNvbiA9PT0gJ3N0cmluZycgJiYgc2FuUmVhc29uICE9PSAnJykge1xuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKVxuICAgICAgY29uc3QgaW5kZXggPSBzYW5pdHlMb3NzRXZlbnRzLmZpbmRJbmRleChcbiAgICAgICAgciA9PiByLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2FuUmVhc29uLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICAgIGlmIChzYW5Mb3NzID4gMCkge1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IHNhblJlYXNvbixcbiAgICAgICAgICAgIHRvdGFsTG9zczogc2FuTG9zcyxcbiAgICAgICAgICAgIGltbXVuaXR5OiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2FuaXR5TG9zc0V2ZW50c1tpbmRleF0udG90YWxMb3NzICs9IHNhbkxvc3NcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnNvcnQoZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgICAgcmV0dXJuIGxlZnQudHlwZS5sb2NhbGVDb21wYXJlKHJpZ2h0LnR5cGUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG1heExvc3NUb1NhblJlYXNvbiAoc2FuUmVhc29uLCBzYW5NYXhGb3JtdWxhKSB7XG4gICAgY29uc3Qgc2FuTWF4ID0gbmV3IFJvbGwoc2FuTWF4Rm9ybXVsYS50b1N0cmluZygpKS5ldmFsdWF0ZSh7XG4gICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgIH0pLnRvdGFsXG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICBpZiAoc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgc2FuTWF4IC0gc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zcylcbiAgfVxuXG4gIGFzeW5jIGxvb3NlU2FuIChzYW5SZWFzb24sIHNhbkxvc3MpIHtcbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxuICAgIGlmICghc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICBhd2FpdCB0aGlzLnNldFNhbih0aGlzLnNhbiAtIHNhbkxvc3MpXG4gICAgICB0aGlzLnNldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uLCBzYW5Mb3NzKVxuICAgICAgcmV0dXJuIHNhbkxvc3NcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNhbkxvc3MgKGNoZWNrUGFzc2VkKSB7XG4gICAgaWYgKGNoZWNrUGFzc2VkKSByZXR1cm4gdGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWRcbiAgICByZXR1cm4gdGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkXG4gIH1cblxuICBnZXQgc2FuTG9zc0NoZWNrUGFzc2VkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tQYXNzZWRcbiAgfVxuXG4gIGdldCBzYW5Mb3NzQ2hlY2tGYWlsbGVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tGYWlsbGVkXG4gIH1cblxuICBnZXQgc2FuTG9zc01heCAoKSB7XG4gICAgaWYgKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKSkpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpXG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJvbGwodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NNaW4gKCkge1xuICAgIGlmICh0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpKSkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IGRhaWx5U2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuPy5kYWlseUxvc3MgfHwgMFxuICB9XG5cbiAgZ2V0IGRhaWx5U2FuTGltaXQgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbj8uZGFpbHlMaW1pdCB8fCAwXG4gIH1cblxuICBnZXQgcmF3U2FuTWF4ICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uc2FuPy5hdXRvKSB7XG4gICAgICBpZiAodGhpcy5jdGh1bGh1TXl0aG9zKSByZXR1cm4gTWF0aC5tYXgoOTkgLSB0aGlzLmN0aHVsaHVNeXRob3MsIDApXG4gICAgICByZXR1cm4gOTlcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heClcbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXgpXG4gIH1cblxuICBnZXQgbXAgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlKVxuICB9XG5cbiAgZ2V0IG1wTWF4ICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvKSB7XG4gICAgICAvLyBUT0RPIGlmIGFueSBpcyBudWxsIHNldCBtYXggYmFjayB0byBudWxsLlxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC8gNSlcbiAgICAgIH1cbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heClcbiAgfVxuXG4gIGFzeW5jIHNldE1wICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KSkgeyB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KSB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGdldCBzYW4gKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSlcbiAgfVxuXG4gIGdldCBpbnQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb25Qb2ludHNTcGVudCAoKSB7XG4gICAgbGV0IG9jY3VwYXRpb25Qb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbikge1xuICAgICAgICBvY2N1cGF0aW9uUG9pbnRzICs9IHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvY2N1cGF0aW9uUG9pbnRzXG4gIH1cblxuICBnZXQgb2NjdXBhdGlvblBvaW50cyAoKSB7XG4gICAgaWYgKCF0aGlzLm9jY3VwYXRpb24pIHJldHVybiAwXG4gICAgbGV0IHBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgdGhpcy5vY2N1cGF0aW9uLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcbiAgICApKSB7XG4gICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxuICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7XG4gICAgICAgIHBvaW50cyArPSBjaGFyLnZhbHVlICogTnVtYmVyKHZhbHVlLm11bHRpcGxpZXIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb2ludHNcbiAgfVxuXG4gIGFzeW5jIHJlc2V0T2NjdXBhdGlvblBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogdGhpcy5vY2N1cGF0aW9uUG9pbnRzXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc2V0QXJjaGV0eXBlUG9pbnRzICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IHRoaXMub2NjdXBhdGlvblBvaW50c1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNldFBlcnNvbmFsUG9pbnRzICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmRldmVsb3BtZW50LnBlcnNvbmFsJzogdGhpcy5wZXJzb25hbFBvaW50c1xuICAgIH0pXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBhcmNoZXR5cGVQb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8uYXJjaGV0eXBlKSB7XG4gICAgICAgIGFyY2hldHlwZVBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMuYXJjaGV0eXBlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcmNoZXR5cGVQb2ludHNcbiAgfVxuXG4gIGdldCBhcmNoZXR5cGVQb2ludHMgKCkge1xuICAgIGlmICghdGhpcy5hcmNoZXR5cGUpIHJldHVybiAwXG4gICAgcmV0dXJuIHRoaXMuYXJjaGV0eXBlLnN5c3RlbS5ib251c1BvaW50c1xuICB9XG5cbiAgZ2V0IGV4cGVyaWVuY2VQb2ludHMgKCkge1xuICAgIGxldCBleHBlcmllbmNlUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UpIHtcbiAgICAgICAgZXhwZXJpZW5jZVBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXhwZXJpZW5jZVBvaW50c1xuICB9XG5cbiAgZ2V0IHBlcnNvbmFsUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBwZXJzb25hbFBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzPy5wZXJzb25hbCkge1xuICAgICAgICBwZXJzb25hbFBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMucGVyc29uYWxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBlcnNvbmFsUG9pbnRzXG4gIH1cblxuICBnZXQgcGVyc29uYWxQb2ludHMgKCkge1xuICAgIHJldHVybiAyICogTnVtYmVyKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUpXG4gIH1cblxuICBnZXQgaGFzRGV2ZWxvcG1lbnRQaGFzZSAoKSB7XG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5mbGFncz8uZGV2ZWxvcGVtZW50KSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5vbmx5UnVuT25jZVBlclNlc3Npb24pIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKSB7XG4gICAgICBpZiAoIXNhbml0eUxvc3NFdmVudC5pbW11bml0eSkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBzZXRTYW4gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwXG4gICAgaWYgKHZhbHVlID4gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4KSB7IHZhbHVlID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4IH1cbiAgICBjb25zdCBsb3NzID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUpIC0gdmFsdWVcblxuICAgIGlmIChsb3NzID4gMCkge1xuICAgICAgbGV0IHRvdGFsTG9zcyA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcylcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXG4gICAgICAgIDogMFxuICAgICAgdG90YWxMb3NzID0gdG90YWxMb3NzICsgbG9zc1xuICAgICAgaWYgKGxvc3MgPj0gNSkgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXG4gICAgICBpZiAodG90YWxMb3NzID49IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmUpXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnOiB2YWx1ZSxcbiAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiB0b3RhbExvc3NcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSc6IHZhbHVlIH0pXG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBhc3luYyBzZXRBdHRyaWJBdXRvICh2YWx1ZSwgYXR0cmliKSB7XG4gICAgY29uc3QgdXBkYXRlZEtleSA9IGBzeXN0ZW0uYXR0cmlicy4ke2F0dHJpYn0uYXV0b2BcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyBbdXBkYXRlZEtleV06IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVBdHRyaWJBdXRvIChhdHRyaWIpIHtcbiAgICB0aGlzLnNldEF0dHJpYkF1dG8oIXRoaXMuc3lzdGVtLmF0dHJpYnNbYXR0cmliXS5hdXRvLCBhdHRyaWIpXG4gIH1cblxuICBzdGF0aWMgZGJGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICBjb25zdCBzdW0gPSAoY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA/PyAwKSArIChjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlID8/IDApXG4gICAgaWYgKHN1bSA8IDY1KSByZXR1cm4gLTJcbiAgICBpZiAoc3VtIDwgODUpIHJldHVybiAtMVxuICAgIGlmIChzdW0gPCAxMjUpIHJldHVybiAwXG4gICAgaWYgKHN1bSA8IDE2NSkgcmV0dXJuICcxRDQnXG4gICAgcmV0dXJuIGAke01hdGguZmxvb3IoKHN1bSAtIDQ1KSAvIDgwKX1ENmBcbiAgfVxuXG4gIHN0YXRpYyBidWlsZEZyb21DaGFyYWN0ZXJpc3RpY3MgKGNoYXJhY3RlcmlzdGljcykge1xuICAgIGNvbnN0IHN1bSA9IChjaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlID8/IDApICsgKGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgPz8gMClcbiAgICBpZiAoc3VtIDwgNjUpIHJldHVybiAtMlxuICAgIGlmIChzdW0gPCA4NSkgcmV0dXJuIC0xXG4gICAgaWYgKHN1bSA8IDEyNSkgcmV0dXJuIDBcbiAgICBpZiAoc3VtIDwgMTY1KSByZXR1cm4gMVxuICAgIHJldHVybiBNYXRoLmZsb29yKChzdW0gLSA0NSkgLyA4MCkgKyAxXG4gIH1cblxuICBzdGF0aWMgaHBGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MsIHR5cGUpIHtcbiAgICBjb25zdCBzdW0gPSBwYXJzZUludChjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlID8/IDAsIDEwKSArIHBhcnNlSW50KGNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUgPz8gMCwgMTApXG4gICAgY29uc3QgZGl2aXNvciA9IChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZURvdWJsZU1heEhlYWx0aCcpICYmIHR5cGUgPT09ICdjaGFyYWN0ZXInID8gNSA6IDEwKVxuICAgIHJldHVybiBNYXRoLmZsb29yKHN1bSAvIGRpdmlzb3IpXG4gIH1cblxuICBzdGF0aWMgbXBGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC8gNSlcbiAgfVxuXG4gIHN0YXRpYyBtb3ZGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MsIHR5cGUsIGFnZSkge1xuICAgIGxldCBNT1ZcbiAgICBpZiAoY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSA+IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgJiYgY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA+IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUpIHtcbiAgICAgIE1PViA9IDkgLy8gQnVnIGNvcnJlY3Rpb24gYnkgQWRtaXJhbE55YXIuXG4gICAgfSBlbHNlIGlmIChjaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlID49IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgfHwgY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA+PSBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlKSB7XG4gICAgICBNT1YgPSA4XG4gICAgfSBlbHNlIHtcbiAgICAgIE1PViA9IDdcbiAgICB9XG4gICAgaWYgKHR5cGUgIT09ICdjcmVhdHVyZScgJiYgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJykpIHtcbiAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQoYWdlKSkpIHtcbiAgICAgICAgTU9WID0gcGFyc2VJbnQoYWdlKSA+PSA0MCA/IE1PViAtIE1hdGguZmxvb3IocGFyc2VJbnQoYWdlKSAvIDEwKSArIDMgOiBNT1ZcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1PVilcbiAgfVxuXG4gIGdldCByYXdCdWlsZCAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZCkgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8pIHtcbiAgICAgIHJldHVybiBDb0NBY3Rvci5idWlsZEZyb21DaGFyYWN0ZXJpc3RpY3ModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gIH1cblxuICBnZXQgYnVpbGQgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gIH1cblxuICBnZXQgcmF3RGIgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMuZGIpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvKSB7XG4gICAgICByZXR1cm4gQ29DQWN0b3IuZGJGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWVcbiAgfVxuXG4gIGdldCBkYiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWVcbiAgfVxuXG4gIGdldCByYXdNb3YgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMubW92KSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YuYXV0bykge1xuICAgICAgY29uc3QgTU9WID0gQ29DQWN0b3IubW92RnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MsIHRoaXMuc3lzdGVtLnR5cGUsIHRoaXMuc3lzdGVtLmluZm9zLmFnZSlcbiAgICAgIGlmIChNT1YgPiAwKSByZXR1cm4gTU9WXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZVxuICB9XG5cbiAgZ2V0IG1vdiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LnZhbHVlXG4gIH1cblxuICBnZXQgdG9rZW5JZCAoKSB7XG4gICAgLy8gVE9ETyBjbGFyaWZpZXIgY2EgZXQgdG9rZW5rZXlcbiAgICByZXR1cm4gdGhpcy50b2tlbiA/IGAke3RoaXMudG9rZW4uc2NlbmUuX2lkfS4ke3RoaXMudG9rZW4uaWR9YCA6IG51bGwgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgbG9ja2VkICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlIC8vIExvY2tlZCBieSBkZWZhdWx0XG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICB9XG5cbiAgZ2V0SXRlbXNGcm9tTmFtZSAobmFtZSkge1xuICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcihpID0+IGkubmFtZSA9PT0gbmFtZSlcbiAgfVxuXG4gIHNldCBsb2NrZWQgKHZhbHVlKSB7XG4gICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZ1ZhbHVlID0gIXRoaXMuc3lzdGVtLmZsYWdzW2ZsYWdOYW1lXVxuICAgIGNvbnN0IG5hbWUgPSBgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YFxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGF0dHJpYnV0ZU5hbWUga2V5IG9mIGF0dHJpYnV0ZSB0byBjaGVjayBpbiBbJ2xjayddXG4gICAqIEBwYXJhbSB7Kn0gZmFzdEZvcndhcmRcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zIGRpZmZpY3VsdHkgaW4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCwgbW9kaWZpZXIgKC0yICsyKSwgbmFtZVxuICAgKi9cbiAgYXN5bmMgYXR0cmlidXRlQ2hlY2sgKGF0dHJpYnV0ZU5hbWUsIGZhc3RGb3J3YXJkID0gZmFsc2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGF0dHJpYiA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICBpZiAoIWF0dHJpYikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kJywge1xuICAgICAgICAgIG1pc3Npbmc6IGF0dHJpYnV0ZU5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmIChvcHRpb25zLm1vZGlmaWVyKSBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcbiAgICBpZiAob3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5IHx8IHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5tb2RpZmllcikge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XG4gICAgaWYgKG9wdGlvbnMuYmxpbmQgPT09ICdmYWxzZScpIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGVsc2UgY2hlY2suaXNCbGluZCA9ICEhb3B0aW9ucy5ibGluZFxuICAgIGF3YWl0IGNoZWNrLnJvbGxBdHRyaWJ1dGUoYXR0cmliLmtleSlcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gY2hhcmFjdGVyaXN0aWNOYW1lIGtleSBvZiBjaGFyYWN0ZXJpc3RpYyB0byBjaGVjayBpbiBbJ3N0cicsJ2NvbicsJ3NpeicsJ2RleCcsJ2FwcCcsJ2ludCcsJ3BvdycsJ2VkdSddXG4gICAqIEBwYXJhbSB7Kn0gZmFzdEZvcndhcmRcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zIGRpZmZpY3VsdHkgaW4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCwgbW9kaWZpZXIgKC0yICsyKSwgbmFtZVxuICAgKi9cbiAgYXN5bmMgY2hhcmFjdGVyaXN0aWNDaGVjayAoXG4gICAgY2hhcmFjdGVyaXN0aWNOYW1lLFxuICAgIGZhc3RGb3J3YXJkID0gZmFsc2UsXG4gICAgb3B0aW9ucyA9IHt9XG4gICkge1xuICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJhY3RlcmlzdGljTmFtZSlcblxuICAgIGlmICghY2hhcikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kRm9yQWN0b3InLCB7XG4gICAgICAgICAgbWlzc2luZzogY2hhcmFjdGVyaXN0aWNOYW1lLFxuICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAob3B0aW9ucy5tb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgICAgb3B0aW9ucy5kaXNwbGF5TmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhci5rZXkpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIGFzeW5jIHNraWxsQ2hlY2sgKHNraWxsRGF0YSwgZmFzdEZvcndhcmQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxuICAgICAgc2tpbGxEYXRhLm5hbWUgPyBza2lsbERhdGEubmFtZSA6IHNraWxsRGF0YVxuICAgIClcbiAgICBpZiAoIXNraWxsLmxlbmd0aCkge1xuICAgICAgbGV0IGl0ZW0gPSBudWxsXG4gICAgICBpZiAoc2tpbGxEYXRhLnBhY2spIHtcbiAgICAgICAgY29uc3QgcGFjayA9IGdhbWUucGFja3MuZ2V0KHNraWxsRGF0YS5wYWNrKVxuICAgICAgICBpZiAocGFjay5tZXRhZGF0YS5lbnRpdHkgIT09ICdJdGVtJykgcmV0dXJuXG4gICAgICAgIGl0ZW0gPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KHNraWxsRGF0YS5pZClcbiAgICAgIH0gZWxzZSBpZiAoc2tpbGxEYXRhLmlkKSB7XG4gICAgICAgIGl0ZW0gPSBnYW1lLml0ZW1zLmdldChza2lsbERhdGEuaWQpXG4gICAgICB9XG5cbiAgICAgIC8vIE5vIHNraWxsIGZvdW5kLCB0cnkgdG8gZ2V0IGdldCBpdCBmcm9tIGNvbXBlbmRpdW0gIVxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIC8vIFRPRE86IEltcGxlbWVudCByZXRyaWV2YWwgb2Ygc2tpbGwgZnJvbSBjb21wZW5kaXVtICEhXG4gICAgICAgIC8vIGdhbWUuc2V0dGluZ3MuZ2V0KCAnQ29DNycsICdEZWZhdWx0Q29tcGVuZGl1bScpO1xuICAgICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICBjaGVjay5fcmF3VmFsdWUgPSAnPydcbiAgICAgICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgICB9XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk5vU2tpbGwnKSArXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90Rm91bmRGb3JBY3RvcicsIHtcbiAgICAgICAgICAgICAgbWlzc2luZzogc2tpbGxEYXRhLm5hbWUgPyBza2lsbERhdGEubmFtZSA6IHNraWxsRGF0YSxcbiAgICAgICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBsZXQgY3JlYXRlID0gZmFsc2VcbiAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BZGRXZWFwb24nKX1gLFxuICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFkZFdlYXBvbnRIaW50Jywge1xuICAgICAgICAgIHdlYXBvbjogc2tpbGxEYXRhLm5hbWUsXG4gICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgY3JlYXRlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgICBpZiAoY3JlYXRlID09PSB0cnVlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZHVwbGljYXRlKGl0ZW0pXSlcbiAgICAgIH0gZWxzZSByZXR1cm5cblxuICAgICAgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShpdGVtLm5hbWUpXG5cbiAgICAgIGlmICghc2tpbGwubGVuZ3RoKSByZXR1cm5cblxuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGNvbnN0IHNraWxsVmFsdWUgPSBhd2FpdCBTa2lsbFZhbHVlRGlhbG9nLmNyZWF0ZShcbiAgICAgICAgICBza2lsbFswXS5uYW1lLFxuICAgICAgICAgIHNraWxsWzBdLmJhc2VcbiAgICAgICAgKVxuICAgICAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihza2lsbFZhbHVlLmdldCgnYmFzZS12YWx1ZScpKVxuICAgICAgICBhd2FpdCBza2lsbFswXS51cGRhdGVWYWx1ZSh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuXG4gICAgaWYgKHVuZGVmaW5lZCAhPT0gb3B0aW9ucy5tb2RpZmllcikge1xuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgfVxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxbMF0uaWRcbiAgICBpZiAob3B0aW9ucy5ibGluZCA9PT0gJ2ZhbHNlJykgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgZWxzZSBjaGVjay5pc0JsaW5kID0gISFvcHRpb25zLmJsaW5kXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIGFzeW5jIHdlYXBvbkNoZWNrICh3ZWFwb25EYXRhLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgbGV0IHdlYXBvblxuICAgIGlmICh0eXBlb2Ygd2VhcG9uRGF0YS51dWlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgd2VhcG9uID0gYXdhaXQgZnJvbVV1aWQod2VhcG9uRGF0YS51dWlkKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHdlYXBvbkRhdGEuaWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3ZWFwb24gPSB0aGlzLml0ZW1zLmdldCh3ZWFwb25EYXRhLmlkKVxuICAgIH1cbiAgICBpZiAoIXdlYXBvbikge1xuICAgICAgbGV0IHdlYXBvbnMgPSB0aGlzLmdldEl0ZW1zRnJvbU5hbWUod2VhcG9uRGF0YS5uYW1lKVxuICAgICAgaWYgKHdlYXBvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgIGxldCBpdGVtID0gbnVsbFxuICAgICAgICAgIGNvbnN0IHBhY2sgPSB3ZWFwb25EYXRhLnBhY2sgPyBnYW1lLnBhY2tzLmdldCh3ZWFwb25EYXRhLnBhY2spIDogbnVsbFxuICAgICAgICAgIGlmIChwYWNrKSB7XG4gICAgICAgICAgICBpZiAocGFjay5tZXRhZGF0YS5lbnRpdHkgIT09ICdJdGVtJykgcmV0dXJuXG4gICAgICAgICAgICBpdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudCh3ZWFwb25EYXRhLmlkKVxuICAgICAgICAgIH0gZWxzZSBpZiAod2VhcG9uRGF0YS5pZCkge1xuICAgICAgICAgICAgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHdlYXBvbkRhdGEuaWQpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk1hY3JvTm9JdGVtRm91bmQnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGxldCBjcmVhdGUgPSBmYWxzZVxuICAgICAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWRkV2VhcG9uJyl9YCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQWRkV2VhcG9udEhpbnQnLCB7XG4gICAgICAgICAgICAgIHdlYXBvbjogd2VhcG9uRGF0YS5uYW1lLFxuICAgICAgICAgICAgICBhY3RvcjogdGhpcy5uYW1lXG4gICAgICAgICAgICB9KX08L3A+YCxcbiAgICAgICAgICAgIHllczogKCkgPT4ge1xuICAgICAgICAgICAgICBjcmVhdGUgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBjb25zdCBhY3RvciA9XG4gICAgICAgICAgICB0eXBlb2YgdGhpcy5wYXJlbnQ/LmFjdG9yICE9PSAndW5kZWZpbmVkJyA/IHRoaXMucGFyZW50LmFjdG9yIDogdGhpc1xuXG4gICAgICAgICAgaWYgKGNyZWF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgYXdhaXQgYWN0b3IuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbS50b0pTT04oKV0pXG4gICAgICAgICAgfSBlbHNlIHJldHVyblxuICAgICAgICAgIHdlYXBvbnMgPSBhY3Rvci5nZXRJdGVtc0Zyb21OYW1lKGl0ZW0ubmFtZSlcbiAgICAgICAgICBpZiAoIXdlYXBvbnMubGVuZ3RoKSByZXR1cm5cbiAgICAgICAgICBhd2FpdCB3ZWFwb25zWzBdLnJlbG9hZCgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckFjdG9ySGFzTm9XZWFwb25OYW1lZCcsIHtcbiAgICAgICAgICAgICAgYWN0b3JOYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICAgIHdlYXBvbk5hbWU6IHdlYXBvbkRhdGEubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAod2VhcG9ucy5sZW5ndGggPiAxKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yQWN0b3JIYXNUb29NYW55V2VhcG9uc05hbWVkJywge1xuICAgICAgICAgICAgYWN0b3JOYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICB3ZWFwb25OYW1lOiB3ZWFwb25EYXRhLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG4gICAgICB3ZWFwb24gPSB3ZWFwb25zWzBdXG4gICAgfVxuXG4gICAgaWYgKCF3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPiAxKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2FyblRvb01hbnlUYXJnZXQnKSlcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IodGhpcy50b2tlbktleSwgKHdlYXBvbkRhdGEudXVpZCB8fCB3ZWFwb24uaWQpLCBmYXN0Rm9yd2FyZClcbiAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgICBpZiAod2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKHRoaXMudG9rZW5LZXksICh3ZWFwb25EYXRhLnV1aWQgfHwgd2VhcG9uLmlkKSwgZmFzdEZvcndhcmQpXG4gICAgICBjYXJkLmNyZWF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBhc3luYyByb2xsSW5pdGlhdGl2ZSAoaGFzR3VuID0gZmFsc2UpIHtcbiAgICBzd2l0Y2ggKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2luaXRpYXRpdmVSdWxlJykpIHtcbiAgICAgIGNhc2UgJ29wdGlvbmFsJzoge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IENvQzdDaGVjayh0aGlzLmFjdG9yS2V5KVxuICAgICAgICByb2xsLmRlbnlQdXNoID0gdHJ1ZVxuICAgICAgICByb2xsLmRlbnlMdWNrID0gdHJ1ZVxuICAgICAgICByb2xsLmRlbnlCbGluZFRhbXBlcmluZyA9IHRydWVcbiAgICAgICAgcm9sbC5oaWRlRGljZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlJbml0RGljZXMnKSA9PT0gZmFsc2VcbiAgICAgICAgcm9sbC5mbGF2b3IgPSAnSW5pdGlhdGl2ZSByb2xsJ1xuICAgICAgICBhd2FpdCByb2xsLnJvbGxDaGFyYWN0ZXJpc3RpYygnZGV4JywgaGFzR3VuID8gMSA6IDApXG4gICAgICAgIHJvbGwudG9NZXNzYWdlKClcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICByb2xsLnN1Y2Nlc3NMZXZlbCArIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUgLyAxMDBcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gaGFzR3VuXG4gICAgICAgICAgPyB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlICsgNTBcbiAgICAgICAgICA6IHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWVcbiAgICB9XG4gIH1cblxuICBnZXRBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgdGhpcy5zeXN0ZW0uZmxhZ3MubG9ja2VkID0gdHJ1ZVxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzJzoge30gfSlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cblxuICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3NbZmxhZ05hbWVdKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uZmxhZ3NbZmxhZ05hbWVdXG4gIH1cblxuICBhc3luYyBzZXRBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBdOiB0cnVlIH0pXG4gIH1cblxuICBhc3luYyB1bnNldEFjdG9yRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YF06IGZhbHNlIH0pXG4gIH1cblxuICBnZXRXZWFwb25Ta2lsbHMgKGl0ZW1JZCkge1xuICAgIGxldCB3ZWFwb24gPSBmcm9tVXVpZFN5bmMoaXRlbUlkKVxuICAgIGlmICghd2VhcG9uKSB7XG4gICAgICB3ZWFwb24gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2VhcG9uLnN5c3RlbSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdlYXBvbiA9IGdhbWUucGFja3MuZ2V0KHdlYXBvbi5wYWNrKS5nZXQod2VhcG9uLl9pZClcbiAgICB9XG4gICAgaWYgKHdlYXBvbi50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBza2lsbHMgPSBbXVxuICAgIGlmICh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQpIHtcbiAgICAgIHNraWxscy5wdXNoKHRoaXMuaXRlbXMuZ2V0KHdlYXBvbi5zeXN0ZW0uc2tpbGwubWFpbi5pZCkpXG4gICAgfVxuXG4gICAgaWYgKHdlYXBvbi51c2VzQWx0ZXJuYXRpdmVTa2lsbCAmJiB3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQpIHtcbiAgICAgIHNraWxscy5wdXNoKHRoaXMuaXRlbXMuZ2V0KHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkpXG4gICAgfVxuICAgIHJldHVybiBza2lsbHNcbiAgfVxuXG4gIC8qKiBUcnkgdG8gZmluZCBhIGNoYXJhY3RlcmlzdGljLCBhdHRyaWJ1dGUgb3Igc2tpbGwgdGhhdCBtYXRjaGVzIHRoZSBuYW1lICovXG4gIGZpbmQgKG5hbWUpIHtcbiAgICBpZiAoIW5hbWUpIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyBUcnkgSURcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtcy5nZXQobmFtZSlcbiAgICBpZiAoaXRlbSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2l0ZW0nLFxuICAgICAgICB2YWx1ZTogaXRlbVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHJlZ0V4cCA9IC9cXCgoW14pXSspXFwpL1xuICAgIGNvbnN0IG1hdGNoZXMgPSByZWdFeHAuZXhlYyhuYW1lKVxuICAgIGxldCBzaG9ydE5hbWUgPSBudWxsXG4gICAgaWYgKG1hdGNoZXMgJiYgbWF0Y2hlcy5sZW5ndGgpIHNob3J0TmFtZSA9IG1hdGNoZXNbMV1cbiAgICAvLyBUcnkgdG8gZmluZCBhIHNraWxsIHdpdGggZXhhY3QgbmFtZS5cbiAgICBjb25zdCBza2lsbCA9IHRoaXMuc2tpbGxzLmZpbHRlcihzID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICEhcy5uYW1lICYmXG4gICAgICAgIChzLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpID09PVxuICAgICAgICAgIG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpIHx8XG4gICAgICAgICAgcy5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSA9PT1cbiAgICAgICAgICAgIG5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpIHx8XG4gICAgICAgICAgcy5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSA9PT1cbiAgICAgICAgICAgIHNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMvZywgJycpKVxuICAgICAgKVxuICAgIH0pXG4gICAgaWYgKHNraWxsLmxlbmd0aCkgcmV0dXJuIHsgdHlwZTogJ2l0ZW0nLCB2YWx1ZTogc2tpbGxbMF0gfVxuXG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBjaGFyYWN0ZXJpc3RpYy5cbiAgICBjb25zdCBjaGFyS2V5ID0gWydzdHInLCAnY29uJywgJ3NpeicsICdkZXgnLCAnYXBwJywgJ2ludCcsICdwb3cnLCAnZWR1J11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJLZXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJLZXlbaV0pXG4gICAgICBpZiAoY2hhcikge1xuICAgICAgICBjaGFyLm5hbWUgPSBjaGFyLmxhYmVsXG4gICAgICAgIGlmIChcbiAgICAgICAgICBjaGFyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgY2hhci5rZXk/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLCB2YWx1ZTogY2hhciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNoYXIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBjaGFyLnNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgY2hhci5sYWJlbD8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgY2hhci5sYWJlbD8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsIHZhbHVlOiBjaGFyIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyeSB0byBmaW5kIGEgYXR0cmlidXRlLlxuICAgIGNvbnN0IGF0dHJpYktleSA9IFsnbGNrJywgJ3NhbiddXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyaWJLZXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGF0dHIgPSB0aGlzLmdldEF0dHJpYnV0ZShhdHRyaWJLZXlbaV0pXG4gICAgICBpZiAoYXR0cikge1xuICAgICAgICBhdHRyLm5hbWUgPSBhdHRyLmxhYmVsXG4gICAgICAgIGlmIChcbiAgICAgICAgICBhdHRyLmtleT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgYXR0ci5rZXk/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBhdHRyLnNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgYXR0ci5zaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnYXR0cmlidXRlJywgdmFsdWU6IGF0dHIgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBhdHRyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBhdHRyLmxhYmVsPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F0dHJpYnV0ZScsIHZhbHVlOiBhdHRyIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyeSB3aXRoIHBhcnRpYWwgPz9cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgcGlsb3RTa2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLnNraWxscy5maWx0ZXIocyA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBzLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmXG4gICAgICAgIHMuc3lzdGVtLnNwZWNpYWxpemF0aW9uPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PVxuICAgICAgICAgIGdhbWUuaTE4blxuICAgICAgICAgICAgLmxvY2FsaXplKCdDb0M3LlBpbG90U3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgICAgICAgID8udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgKVxuICAgIH0pXG4gIH1cblxuICBnZXQgZHJpdmVTa2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLnNraWxscy5maWx0ZXIocyA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBzLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmXG4gICAgICAgIHMuc3lzdGVtLnNwZWNpYWxpemF0aW9uPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PVxuICAgICAgICAgIGdhbWUuaTE4blxuICAgICAgICAgICAgLmxvY2FsaXplKCdDb0M3LkRyaXZlU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgICAgICAgID8udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgKVxuICAgIH0pXG4gIH1cblxuICBnZXQgdG9rZW5VdWlkICgpIHtcbiAgICBpZiAodGhpcy5zaGVldC50b2tlbikge1xuICAgICAgcmV0dXJuIHRoaXMuc2hlZXQudG9rZW4udXVpZFxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHRva2VuS2V5ICgpIHtcbiAgICAvLyBDbGFyaWZpZXIgY2EgZXQgdG9rZW5pZFxuICAgIC8qKiAqIE1PRElGIDAuOC54ICovXG4gICAgLy8gaWYgdGhpcy5zaGVldC50b2tlbiA9PiB3YXMgb3BlbmVkIGZyb20gdG9rZW5cbiAgICAvLyBpZiB0aGlzLnRva2VuID0+IHN5bnRoZXRpYyBhY3RvciA9PSB0aGlzLmlzVG9rZW5cbiAgICBpZiAodGhpcy5zaGVldC50b2tlbikge1xuICAgICAgcmV0dXJuIGAke3RoaXMuc2hlZXQudG9rZW4ucGFyZW50LmlkfS4ke3RoaXMuc2hlZXQudG9rZW4uaWR9YFxuICAgIH0gZWxzZSB7XG4gICAgICAvLyByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLmlkXG4gICAgfVxuICAgIC8qKioqKioqKioqKioqKioqKi9cbiAgICAvLyAvL0Nhc2UgMTogdGhlIGFjdG9yIGlzIGEgc3ludGhldGljIGFjdG9yIGFuZCBoYXMgYSB0b2tlbiwgcmV0dXJuIHRva2VuIGtleS5cbiAgICAvLyBpZiggdGhpcy5pc1Rva2VuKSByZXR1cm4gYCR7dGhpcy50b2tlbi5zY2VuZT8uX2lkP3RoaXMudG9rZW4uc2NlbmUuX2lkOidUT0tFTid9LiR7dGhpcy50b2tlbi5pZH1gOyAgLy9SRUZBQ1RPUklORyAoMilcblxuICAgIC8vIC8vQ2FzZSAyOiB0aGUgYWN0b3IgaXMgbm90IGEgdG9rZW4gKGxpbmtlZCBhY3RvcikuIElmIHRoZSBzaGVldCBoYXZlIGFuIGFzc29jaWF0ZWQgdG9rZW4gcmV0dXJuIHRoZSB0b2tlbiBrZXkuXG4gICAgLy8gaWYoIHRoaXMuc2hlZXQudG9rZW4pIHJldHVybiBgJHt0aGlzLnNoZWV0LnRva2VuLnNjZW5lPy5pZD90aGlzLnNoZWV0LnRva2VuLnNjZW5lLmlkOidUT0tFTid9LiR7dGhpcy5zaGVldC50b2tlbi5pZH1gO1xuXG4gICAgLy8gLy9DYXNlIDM6IEFjdG9yIGhhcyBubyB0b2tlbiByZXR1cm4gaGlzIElEO1xuICAgIC8vIHJldHVybiB0aGlzLmlkO1xuICB9XG5cbiAgZ2V0IGFjdG9yS2V5ICgpIHtcbiAgICBpZiAodGhpcy5wcm90b3R5cGVUb2tlbi5hY3RvckxpbmspIHJldHVybiB0aGlzLmlkIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIHJldHVybiB0aGlzLnRva2VuS2V5XG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tS2V5IChrZXkpIHtcbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0ga2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbkRhdGEgPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW5EYXRhKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIFVzZSB0aGUgZm9ybXVsYSBpZiBhdmFpbGFibGUgdG8gcm9sbCBzb21lIGNoYXJhY3Rlcml0aWNzLlxuICAgKi9cbiAgYXN5bmMgcm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmICh2YWx1ZS5mb3JtdWxhICYmICF2YWx1ZS5mb3JtdWxhLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBjb25zdCByID0gbmV3IFJvbGwodmFsdWUuZm9ybXVsYSlcbiAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgaWYgKHIudG90YWwpIHtcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3NbYHN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPSBNYXRoLmZsb29yKFxuICAgICAgICAgICAgci50b3RhbFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljcylcbiAgICBhd2FpdCB0aGlzLnJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlKClcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0aGVyZSBpcyBhIGZvcm11bGEsIHdpbGwgc2V0IHRoZSBjaGFyYWN0ZXJpc3RpYyB0byB0aGUgYXZlcmFnZSB2YWx1ZSAsaWYgZGl2aXNpYmxlIGJ5IDUsIG9yIHRoZSBjbG9zZXN0IDEwLlxuICAgKi9cbiAgYXN5bmMgYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmICh2YWx1ZS5mb3JtdWxhICYmICF2YWx1ZS5mb3JtdWxhLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBjb25zdCBtYXggPSBuZXcgUm9sbCh2YWx1ZS5mb3JtdWxhKS5ldmFsdWF0ZSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIGNvbnN0IG1pbiA9IG5ldyBSb2xsKHZhbHVlLmZvcm11bGEpLmV2YWx1YXRlKHsgbWluaW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgY29uc3QgYXZlcmFnZSA9IE1hdGguZmxvb3IoKG1heCArIG1pbikgLyAyKVxuICAgICAgICBjb25zdCBjaGFyVmFsdWUgPVxuICAgICAgICAgIGF2ZXJhZ2UgJSA1ID09PSAwID8gYXZlcmFnZSA6IE1hdGgucm91bmQoYXZlcmFnZSAvIDEwKSAqIDEwXG4gICAgICAgIGlmIChjaGFyVmFsdWUpIHtcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3NbYHN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPSBjaGFyVmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljcylcbiAgICBhd2FpdCB0aGlzLnJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlKClcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGEgY2hhcmFjdGVyaXNpdGMgZm9ybXVsYSBpcyBhIHJlZmVyZW5jZSB0byBhbiBvdGhlciBjaGFyYWN0ZXJpc3RpYyBhbmQgc2V0IGl0IGFjY29yZGluZ2x5LlxuICAgKi9cbiAgYXN5bmMgcmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgbGV0IGNoYXJWYWx1ZVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNoYXJWYWx1ZSA9IG5ldyBSb2xsKFxuICAgICAgICAgICAgdmFsdWUuZm9ybXVsYSxcbiAgICAgICAgICAgIHRoaXMucGFyc2VDaGFyYWN0ZXJpc3RpY3MoKVxuICAgICAgICAgICkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjaGFyVmFsdWUgPSBudWxsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYXJWYWx1ZSkge1xuICAgICAgICAgIGNoYXJhY3RlcmlzdGljc1tgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9IGNoYXJWYWx1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWNzKVxuICB9XG5cbiAgYXN5bmMgc2V0Q2hhcmFjdGVyaXN0aWMgKG5hbWUsIHZhbHVlKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWMgPSB7fVxuICAgIGNvbnN0IGNoYXJWYWx1ZSA9IGlzTmFOKHBhcnNlSW50KHZhbHVlKSkgPyBudWxsIDogcGFyc2VJbnQodmFsdWUpXG4gICAgY2hhcmFjdGVyaXN0aWNbbmFtZV0gPSBjaGFyVmFsdWVcbiAgICBpZiAoIWNoYXJWYWx1ZSkge1xuICAgICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBjb25zdCBmb3JtdWxhID0gbmFtZS5yZXBsYWNlKCcudmFsdWUnLCAnLmZvcm11bGEnKVxuICAgICAgICBjaGFyYWN0ZXJpc3RpY1tmb3JtdWxhXSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWMpXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXG4gIH1cblxuICBhc3luYyBkZXZlbG9wZW1lbnRQaGFzZSAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGZhaWx1cmUgPSBbXVxuICAgIGNvbnN0IHN1Y2Nlc3MgPSBbXVxuICAgIGNvbnN0IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkID0gOTBcbiAgICBjb25zdCBhbHdheXNTdWNjZXNzVGhyZXNob2xkID0gOTVcblxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxBbGw0RGV2JylcbiAgICBsZXQgc2tpbGxzUm9sbGVkID0gMFxuICAgIGxldCBtZXNzYWdlID0gJzxwIGNsYXNzPVwiY2hhdC1jYXJkXCI+J1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGlmIChpdGVtLmRldmVsb3BlbWVudEZsYWcpIHtcbiAgICAgICAgICBza2lsbHNSb2xsZWQrK1xuICAgICAgICAgIGNvbnN0IGRpZSA9IGF3YWl0IG5ldyBEaWUoeyBmYWNlczogMTAwIH0pLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICBjb25zdCBza2lsbFZhbHVlID0gaXRlbS52YWx1ZVxuICAgICAgICAgIGxldCBhdWdtZW50ID0gbnVsbFxuICAgICAgICAgIGxldCBza2lsbE1hc3RlcmluZ01lc3NhZ2UgPSBudWxsXG4gICAgICAgICAgaWYgKGRpZS50b3RhbCA+IHNraWxsVmFsdWUgfHwgZGllLnRvdGFsID49IGFsd2F5c1N1Y2Nlc3NUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGNvbnN0IGF1Z21lbnREaWUgPSBhd2FpdCBuZXcgRGllKHsgZmFjZXM6IDEwIH0pLmV2YWx1YXRlKHtcbiAgICAgICAgICAgICAgYXN5bmM6IHRydWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBzdWNjZXNzLnB1c2goaXRlbS5pZClcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBTQU4gYXVnbWVudCB3aGVuIHRoZSBza2lsbCBnb2VzIGJleW9uZCB0aGUgc2tpbGwgbWFzdGVyaW5nIHRocmVzaG9sZC5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgc2tpbGxWYWx1ZSA8IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkICYmXG4gICAgICAgICAgICAgIHNraWxsVmFsdWUgKyBhdWdtZW50RGllLnRvdGFsID49IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgYXVnbWVudFNBTkRpZSA9IGF3YWl0IG5ldyBEaWUoe1xuICAgICAgICAgICAgICAgIGZhY2VzOiA2LFxuICAgICAgICAgICAgICAgIG51bWJlcjogMlxuICAgICAgICAgICAgICB9KS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgIGNvbnN0IHNhbkdhaW5lZCA9IGF1Z21lbnRTQU5EaWUudG90YWxcbiAgICAgICAgICAgICAgY29uc3Qgc2FuR2FpbmVkTWVzc2FnZSA9IGBHYWluZWQgMmQ2ICgke2F1Z21lbnRTQU5EaWUudmFsdWVzWzBdfSArICR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMV19ID0gJHtzYW5HYWluZWR9KSBTQU5gXG4gICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoc2FuR2FpbmVkTWVzc2FnZSlcbiAgICAgICAgICAgICAgc2tpbGxNYXN0ZXJpbmdNZXNzYWdlID0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1zdWNjZXNzXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LlNhbkdhaW5lZCcsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcmVzdWx0czogYCR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMF19ICsgJHthdWdtZW50U0FORGllLnZhbHVlc1sxXX1gLFxuICAgICAgICAgICAgICAgICAgc2FuR2FpbmVkLFxuICAgICAgICAgICAgICAgICAgc2tpbGw6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgIHNraWxsVmFsdWU6IHNraWxsVmFsdWUgKyBhdWdtZW50RGllLnRvdGFsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApfTwvc3Bhbj48YnI+YFxuICAgICAgICAgICAgICAvLyBTZXQgc2FuIGNvbnRyb2xzIHRoYXQgaXQgZG9lc24ndCBhdWdtZW50IGJleW9uZCBzYW5NYXhcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRTYW4odGhpcy5zYW4gKyBzYW5HYWluZWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdWdtZW50ICs9IGF1Z21lbnREaWUudG90YWxcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1zdWNjZXNzXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5EZXZTdWNjZXNzJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogaXRlbS52YWx1ZSxcbiAgICAgICAgICAgICAgICBhdWdtZW50OiBhdWdtZW50RGllLnRvdGFsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICBpZiAoc2tpbGxNYXN0ZXJpbmdNZXNzYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgKz0gc2tpbGxNYXN0ZXJpbmdNZXNzYWdlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBpdGVtLmluY3JlYXNlRXhwZXJpZW5jZShhdWdtZW50KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5EZXZGYWlsdXJlJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogaXRlbS52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YFxuICAgICAgICAgICAgZmFpbHVyZS5wdXNoKGl0ZW0uaWQpXG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IGl0ZW0udW5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gW11cbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBzYW5pdHlMb3NzRXZlbnQgb2YgdGhpcy5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cykge1xuICAgICAgaWYgKHNhbml0eUxvc3NFdmVudC5pbW11bml0eSkge1xuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goc2FuaXR5TG9zc0V2ZW50KVxuICAgICAgfSBlbHNlIGlmIChzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzID4gMSkge1xuICAgICAgICBzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzLS1cbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHNhbml0eUxvc3NFdmVudClcbiAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICBpZiAoc2tpbGxzUm9sbGVkKSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gJzxicj4nXG4gICAgICB9XG4gICAgICBtZXNzYWdlICs9IGA8c3Bhbj4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVkdWNlU2FuaXR5TGltaXRzJyl9PC9zcGFuPmBcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50c1xuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgbWVzc2FnZSArPSAnPC9wPidcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzIH1cbiAgICAgIGF3YWl0IGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShza2lsbHNSb2xsZWQgPyB0aXRsZSA6ICcnLCBtZXNzYWdlLCB7XG4gICAgICAgIHNwZWFrZXJcbiAgICAgIH0pXG4gICAgICB0aGlzLm9ubHlSdW5PbmNlUGVyU2Vzc2lvbiA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIHsgZmFpbHVyZSwgc3VjY2VzcyB9XG4gIH1cblxuICBhc3luYyBkZXZlbG9wTHVjayAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGN1cnJlbnRMdWNrID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5sY2sudmFsdWVcbiAgICBpZiAoIWN1cnJlbnRMdWNrKSBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOiAwIH0pXG4gICAgY29uc3QgcHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrID0gZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAnQ29DNycsXG4gICAgICAncHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrJ1xuICAgIClcbiAgICBjb25zdCB1cGdyYWRlUm9sbCA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMDAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgY29uc3QgaGlnaGVyVGhhbkN1cnJlbnRMdWNrID0gdXBncmFkZVJvbGwgPiBjdXJyZW50THVja1xuICAgIGxldCBhdWdtZW50Um9sbFxuICAgIGlmIChwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2spIHtcbiAgICAgIGhpZ2hlclRoYW5DdXJyZW50THVja1xuICAgICAgICA/IChhdWdtZW50Um9sbCA9ICcyRDEwKzEwJylcbiAgICAgICAgOiAoYXVnbWVudFJvbGwgPSAnMUQxMCs1JylcbiAgICB9IGVsc2UgaWYgKGhpZ2hlclRoYW5DdXJyZW50THVjaykge1xuICAgICAgYXVnbWVudFJvbGwgPSAnMUQxMCdcbiAgICB9XG4gICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbEx1Y2s0RGV2JylcbiAgICBsZXQgbWVzc2FnZSA9ICc8cCBjbGFzcz1cImNoYXQtY2FyZFwiPidcbiAgICBpZiAocHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrIHx8IGhpZ2hlclRoYW5DdXJyZW50THVjaykge1xuICAgICAgY29uc3QgYXVnbWVudFZhbHVlID0gKGF3YWl0IG5ldyBSb2xsKGF1Z21lbnRSb2xsKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpXG4gICAgICAgIC50b3RhbFxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlJzpcbiAgICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSArIGF1Z21lbnRWYWx1ZVxuICAgICAgfSlcbiAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1zdWNjZXNzXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAnQ29DNy5MdWNrSW5jcmVhc2VkJyxcbiAgICAgICAge1xuICAgICAgICAgIGRpZTogdXBncmFkZVJvbGwsXG4gICAgICAgICAgc2NvcmU6IGN1cnJlbnRMdWNrLFxuICAgICAgICAgIGF1Z21lbnQ6IGF1Z21lbnRWYWx1ZVxuICAgICAgICB9XG4gICAgICApfTwvc3Bhbj5gXG4gICAgfSBlbHNlIHtcbiAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1mYWlsZWRcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICdDb0M3Lkx1Y2tOb3RJbmNyZWFzZWQnLFxuICAgICAgICB7IGRpZTogdXBncmFkZVJvbGwsIHNjb3JlOiBjdXJyZW50THVjayB9XG4gICAgICApfTwvc3Bhbj5gXG4gICAgfVxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIG1lc3NhZ2UgKz0gJzwvcD4nXG4gICAgICBjb25zdCBzcGVha2VyID0geyBhY3RvcjogdGhpcyB9XG4gICAgICBhd2FpdCBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UodGl0bGUsIG1lc3NhZ2UsIHsgc3BlYWtlciB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BTa2lsbCAoc2tpbGxJZCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtcy5nZXQoc2tpbGxJZClcbiAgICBpZiAoIXNraWxsKSByZXR1cm5cbiAgICBsZXQgdGl0bGUgPSAnJ1xuICAgIGxldCBtZXNzYWdlID0gJydcbiAgICBjb25zdCB1cGdyYWRlUm9sbCA9IG5ldyBSb2xsKCcxRDEwMCcpXG4gICAgYXdhaXQgdXBncmFkZVJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodXBncmFkZVJvbGwpXG4gICAgaWYgKHVwZ3JhZGVSb2xsLnRvdGFsID4gc2tpbGwudmFsdWUgfHwgdXBncmFkZVJvbGwudG90YWwgPj0gOTUpIHtcbiAgICAgIGNvbnN0IGF1Z21lbnRSb2xsID0gbmV3IFJvbGwoJzFEMTAnKVxuICAgICAgYXdhaXQgYXVnbWVudFJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICBpZiAoIWZhc3RGb3J3YXJkKSBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChhdWdtZW50Um9sbClcbiAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlN1Y2Nlc3NEZXRhaWxzJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lLFxuICAgICAgICBhdWdtZW50OiBhdWdtZW50Um9sbC50b3RhbFxuICAgICAgfSlcbiAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZSb2xsVGl0bGUnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWUsXG4gICAgICAgIGRpZTogdXBncmFkZVJvbGwudG90YWwsXG4gICAgICAgIHNjb3JlOiBza2lsbC52YWx1ZVxuICAgICAgfSlcbiAgICAgIGF3YWl0IHNraWxsLmluY3JlYXNlRXhwZXJpZW5jZShhdWdtZW50Um9sbC50b3RhbClcbiAgICB9IGVsc2Uge1xuICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlJvbGxUaXRsZScsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZSxcbiAgICAgICAgZGllOiB1cGdyYWRlUm9sbC50b3RhbCxcbiAgICAgICAgc2NvcmU6IHNraWxsLnZhbHVlXG4gICAgICB9KVxuICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2RmFpbHVyZURldGFpbHMnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWVcbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzLl9pZCB9XG4gICAgYXdhaXQgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKHRpdGxlLCBtZXNzYWdlLCB7IHNwZWFrZXIgfSlcbiAgICBhd2FpdCBza2lsbC51bmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICB9XG5cbiAgaGFzQ29uZGl0aW9uU3RhdHVzIChjb25kaXRpb25OYW1lKSB7XG4gICAgY29uc3QgY29uZGl0aW9uVmFsdWUgPSB0aGlzLnN5c3RlbS5jb25kaXRpb25zPy5bY29uZGl0aW9uTmFtZV0/LnZhbHVlXG4gICAgaWYgKHR5cGVvZiBjb25kaXRpb25WYWx1ZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICByZXR1cm4gZmFsc2UgLy8gTmVjZXNzYXJ5LCBpbmNvcnJlY3QgdGVtcGxhdGUgaW5pdGlhbGl6YXRpb25cbiAgICB9XG4gICAgcmV0dXJuIGNvbmRpdGlvblZhbHVlXG4gIH1cblxuICBoYXNDb25kaXRpb25WYWx1ZSAoY29uZGl0aW9uTmFtZSwgZmllbGQpIHtcbiAgICBpZiAoIXRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKGNvbmRpdGlvbk5hbWUpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIGlmIChjb25kaXRpb25OYW1lID09PSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSAmJiBmaWVsZCA9PT0gJ2R1cmF0aW9uVGV4dCcpIHtcbiAgICAgIGNvbnN0IHJlYWxUaW1lID0gdGhpcy5oYXNDb25kaXRpb25WYWx1ZShjb25kaXRpb25OYW1lLCAncmVhbFRpbWUnKVxuICAgICAgY29uc3QgZHVyYXRpb24gPSB0aGlzLmhhc0NvbmRpdGlvblZhbHVlKGNvbmRpdGlvbk5hbWUsICdkdXJhdGlvbicpXG4gICAgICBpZiAodHlwZW9mIGR1cmF0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAocmVhbFRpbWUgPT09IHRydWUpIHtcbiAgICAgICAgICByZXR1cm4gZHVyYXRpb24gKyAnICcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucm91bmRzJylcbiAgICAgICAgfSBlbHNlIGlmIChyZWFsVGltZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZHVyYXRpb24gKyAnICcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuaG91cnMnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmNvbmRpdGlvbnM/Lltjb25kaXRpb25OYW1lXT8uW2ZpZWxkXVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlQ29uZGl0aW9uIChjb25kaXRpb25OYW1lKSB7XG4gICAgY29uc3QgY29uZGl0aW9uVmFsdWUgPSB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhjb25kaXRpb25OYW1lKVxuICAgIGlmICghY29uZGl0aW9uVmFsdWUpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKGNvbmRpdGlvbk5hbWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oY29uZGl0aW9uTmFtZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBzZXRDb25kaXRpb24gKFxuICAgIGNvbmRpdGlvbk5hbWUsXG4gICAge1xuICAgICAgZm9yY2VWYWx1ZSA9IGZhbHNlLFxuICAgICAganVzdFRoaXMgPSBmYWxzZSxcbiAgICAgIHJlYWxUaW1lID0gbnVsbCxcbiAgICAgIGR1cmF0aW9uID0gbnVsbFxuICAgIH0gPSB7fVxuICApIHtcbiAgICBpZiAoIWZvcmNlVmFsdWUgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgY29uc3QgZWZmZWN0cyA9IHRoaXMuZWZmZWN0c1xuICAgICAgICAuZmlsdGVyKGVmZmVjdCA9PiBlZmZlY3QuZmxhZ3MuY29yZT8uc3RhdHVzSWQgPT09IGNvbmRpdGlvbk5hbWUpXG4gICAgICAgIC5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcbiAgICAgIGNvbnN0IGN1c3RvbSA9IHt9XG4gICAgICBzd2l0Y2ggKGNvbmRpdGlvbk5hbWUpIHtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICAgIGN1c3RvbS5mbGFncyA9IHtcbiAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgb3ZlcmxheTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICAgIGN1c3RvbS5mbGFncyA9IHtcbiAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgcmVhbFRpbWU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjdXN0b20uZHVyYXRpb24gPSB7XG4gICAgICAgICAgICByb3VuZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNlY29uZHM6IHVuZGVmaW5lZFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocmVhbFRpbWUgPT09IHRydWUgfHwgcmVhbFRpbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjdXN0b20uZmxhZ3MuQ29DNy5yZWFsVGltZSA9IHJlYWxUaW1lXG4gICAgICAgICAgICBjdXN0b20uZmxhZ3MgPSB7XG4gICAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgICByZWFsVGltZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHVyYXRpb24gIT09IG51bGwgJiYgdHlwZW9mIGR1cmF0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpZiAocmVhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICBjdXN0b20uZHVyYXRpb24ucm91bmRzID0gZHVyYXRpb25cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXN0b20uZHVyYXRpb24uc2Vjb25kcyA9IGR1cmF0aW9uICogMzYwMFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBpZiAoZWZmZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmlsdGVyKFxuICAgICAgICAgIGVmZmVjdCA9PiBlZmZlY3QuaWQgPT09IGNvbmRpdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoZWZmZWN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGNvbnN0IGVmZmVjdERhdGEgPSBtZXJnZU9iamVjdChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShlZmZlY3RbMF0ubGFiZWwpLFxuICAgICAgICAgICAgICBpY29uOiBlZmZlY3RbMF0uaWNvbixcbiAgICAgICAgICAgICAgZmxhZ3M6IHtcbiAgICAgICAgICAgICAgICBjb3JlOiB7XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZDogZWZmZWN0WzBdLmlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjdXN0b21cbiAgICAgICAgICApXG4gICAgICAgICAgYXdhaXQgc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtlZmZlY3REYXRhXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUaGlzIGRvZXNuJ3QgZXhpc3QgaW4gRm91bmRyeVZUVCBBY3RpdmVFZmZlY3RzP1xuICAgICAgICAgIGZvcmNlVmFsdWUgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1c3RvbS5faWQgPSBlZmZlY3RzWzBdXG4gICAgICAgIGF3YWl0IHN1cGVyLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbY3VzdG9tXSlcbiAgICAgICAgZm9yY2VWYWx1ZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZvcmNlVmFsdWUgfHwgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJykpIHtcbiAgICAgIHN3aXRjaCAoY29uZGl0aW9uTmFtZSkge1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmluZGVmSW5zYW5lOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnVuY29uc2Npb3VzOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmR5aW5nOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnByb25lOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF06IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZmllbGRzID0ge31cbiAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS52YWx1ZWBdID0gdHJ1ZVxuICAgICAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlIHx8IHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0ucmVhbFRpbWVgXSA9IHJlYWxUaW1lXG4gICAgICAgICAgICAgIGlmIChkdXJhdGlvbiAhPT0gbnVsbCAmJiB0eXBlb2YgZHVyYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LmR1cmF0aW9uYF0gPSBkdXJhdGlvblxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgICAgIGBzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnJlYWxUaW1lYFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9Li09cmVhbFRpbWVgXSA9IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uZHVyYXRpb25gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT1kdXJhdGlvbmBdID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoZmllbGRzKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgaWYgKCFqdXN0VGhpcykge1xuICAgICAgICAvLyBEb2VzIHNldHRpbmcgdGhlIGNvbmRpdGlvbiBhbHNvIHRyaWdnZXIgb3RoZXIgYWN0aW9ucz9cbiAgICAgICAgLy8gLSBJZiBBY3RpdmVFZmZlY3RzIGFyZSBhZGRlZCBoYXNDb25kaXRpb25TdGF0dXMgZm9yIHJlY2VudGx5IGFkZGVkIGNvbmRpdGlvbnMgbWF5IHJldHVybiBpbmNvcnJlY3RseVxuICAgICAgICBzd2l0Y2ggKGNvbmRpdGlvbk5hbWUpIHtcbiAgICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMucHJvbmUpXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICF0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy51bmNvbnNjaW91cykgJiZcbiAgICAgICAgICAgICAgIXRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmRlYWQpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgICAgICAgICAgIHRoaXMuaXNUb2tlbiA/IHRoaXMudG9rZW5LZXkgOiB0aGlzLmlkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgY29uQ2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVuc2V0Q29uZGl0aW9uIChjb25kaXRpb25OYW1lLCB7IGZvcmNlVmFsdWUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIWZvcmNlVmFsdWUgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgY29uc3QgZWZmZWN0cyA9IHRoaXMuZWZmZWN0c1xuICAgICAgICAuZmlsdGVyKGVmZmVjdCA9PiBlZmZlY3QuZmxhZ3MuY29yZT8uc3RhdHVzSWQgPT09IGNvbmRpdGlvbk5hbWUpXG4gICAgICAgIC5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcbiAgICAgIGlmIChlZmZlY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIGVmZmVjdHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JjZVZhbHVlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2VWYWx1ZSB8fCAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT12YWx1ZWBdOiBudWxsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0udmFsdWVgXTogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVE9ETyA6IGNoZWNrIGlmIGV2ZXIgdXNlZFxuICBhc3luYyByZXNldENvdW50ZXIgKGNvdW50ZXIpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtjb3VudGVyXTogMCB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXREYWlseVNhbml0eSAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0JzogTWF0aC5mbG9vcihcbiAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgLyA1XG4gICAgICApLFxuICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiAwXG4gICAgfSlcbiAgfVxuXG4gIGdldCBmaWdodGluZ1NraWxscyAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnICYmIHZhbHVlLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldCBjbG9zZUNvbWJhdFdlYXBvbnMgKCkge1xuICAgIGNvbnN0IHdlYXBvbkxpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICd3ZWFwb24nICYmICF2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtcy5nZXQodmFsdWUuc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICAgIHZhbHVlLnN5c3RlbS5za2lsbC5tYWluLnZhbHVlID0gc2tpbGwgPyBza2lsbC52YWx1ZSA6IDBcbiAgICAgICAgd2VhcG9uTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHdlYXBvbkxpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICByZXR1cm4gd2VhcG9uTGlzdFxuICB9XG5cbiAgZ2V0IGZpcmVhcm1Ta2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiB2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldCB1c2VyICgpIHtcbiAgICAvLyBpcyB0aGF0IGFjdG9yIGltcGVyc29uYW50ZWQgYnkgYSB1c2VyID9cbiAgICByZXR1cm4gZ2FtZS51c2Vycy5maW5kKHVzZXIgPT4ge1xuICAgICAgaWYgKHVzZXIuY2hhcmFjdGVyKSB7XG4gICAgICAgIGlmICh1c2VyLmNoYXJhY3Rlci5pZCA9PT0gdGhpcy5pZCkgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBnZXQgZG9kZ2VTa2lsbCAoKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldEZpcnN0U2tpbGxCeUNvQ0lEKCdpLnNraWxsLmRvZGdlJylcbiAgICBpZiAoc2tpbGwpIHtcbiAgICAgIHJldHVybiBza2lsbFxuICAgIH1cbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRvZGdlJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGNyZWRpdFJhdGluZ1NraWxsICgpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0Rmlyc3RTa2lsbEJ5Q29DSUQoJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycpXG4gICAgaWYgKHNraWxsKSB7XG4gICAgICByZXR1cm4gc2tpbGxcbiAgICB9XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5jcmVkaXQtcmF0aW5nJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGN0aHVsaHVNeXRob3NTa2lsbCAoKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldEZpcnN0U2tpbGxCeUNvQ0lEKCdpLnNraWxsLmN0aHVsaHUtbXl0aG9zJylcbiAgICBpZiAoc2tpbGwpIHtcbiAgICAgIHJldHVybiBza2lsbFxuICAgIH1cbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmN0aHVsaHUtbXl0aG9zJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGN0aHVsaHVNeXRob3MgKCkge1xuICAgIGNvbnN0IENNID0gdGhpcy5jdGh1bGh1TXl0aG9zU2tpbGxcbiAgICBpZiAoQ00pIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gQ00udmFsdWVcbiAgICAgIGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlXG4gICAgICByZXR1cm4gcGFyc2VJbnQoQ00uc3lzdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IG15dGhvc0hhcmRlbmVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRGbGFnKCdDb0M3JywgJ215dGhvc0hhcmRlbmVkJykgfHwgZmFsc2VcbiAgfVxuXG4gIGFzeW5jIHNldE15dGhvc0hhcmRlbmVkICgpIHtcbiAgICBhd2FpdCB0aGlzLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnLCB0cnVlKVxuICB9XG5cbiAgZ2V0IG15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCcpIHx8IGZhbHNlXG4gIH1cblxuICBhc3luYyBleHBlcmllbmNlRmlyc3RNeXRob3NJbnNhbml0eSAoKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRGbGFnKCdDb0M3JywgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnLCB0cnVlKVxuICB9XG5cbiAgZ2V0IGNyZWRpdFJhdGluZyAoKSB7XG4gICAgY29uc3QgQ1IgPSB0aGlzLmNyZWRpdFJhdGluZ1NraWxsXG4gICAgaWYgKENSKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IENSLnZhbHVlXG4gICAgICBpZiAodmFsdWUpIHJldHVybiB2YWx1ZVxuICAgICAgcmV0dXJuIHBhcnNlSW50KENSLnN5c3RlbS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHN0YXRpYyBtb25ldGFyeUZvcm1hdCAoZm9ybWF0LCBzeW1ib2wsIHZhbHVlKSB7XG4gICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMubHNkOlxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih2YWx1ZSAvIDI0MCkgKyAnLycgKyAoTWF0aC5mbG9vcih2YWx1ZSAvIDEyKSAlIDIwKSArICcvJyArICh2YWx1ZSAlIDEyKVxuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5yb21hbjpcbiAgICAgICAgcmV0dXJuIChNYXRoLmZsb29yKHZhbHVlIC8gNDAwKSkgKyAnLycgKyAoTWF0aC5mbG9vcih2YWx1ZSAvIDE2KSAlIDI1KSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gOCkgJSAyKSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gNCkgJSAyKSArICcvJyArICh2YWx1ZSAlIDQpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmRlY2ltYWxMZWZ0OlxuICAgICAgICByZXR1cm4gc3ltYm9sICsgTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsIHsgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pLnJlcGxhY2UoL1xcLjAwJC8sICcnKVxuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5kZWNpbWFsUmlnaHQ6XG4gICAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCwgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSkucmVwbGFjZSgvXFwuMDAkLywgJycpICsgJyAnICsgc3ltYm9sXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmludGVnZXJMZWZ0OlxuICAgICAgICByZXR1cm4gc3ltYm9sICsgTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZygpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmludGVnZXJSaWdodDpcbiAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSkudG9Mb2NhbGVTdHJpbmcoKSArICcgJyArIHN5bWJvbFxuICAgIH1cbiAgICByZXR1cm4gJzAnXG4gIH1cblxuICBzdGF0aWMgbW9uZXRhcnlWYWx1ZSAoZm9ybWF0LCB2YWx1ZXMsIENSLCB0eXBlLCB2YWx1ZSkge1xuICAgIENSID0gQ1IgfHwgMFxuICAgIGNvbnN0IHJvdyA9IHZhbHVlcy5maW5kKHIgPT4gKHR5cGVvZiByLm1pbiA9PT0gJ29iamVjdCcgfHwgci5taW4gPD0gQ1IpICYmICh0eXBlb2Ygci5tYXggPT09ICdvYmplY3QnIHx8IHIubWF4ID49IENSKSlcbiAgICBpZiAodHlwZW9mIHJvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHJvd1t0eXBlXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHJvd1t2YWx1ZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmxzZDpcbiAgICAgICAgICBzd2l0Y2ggKHJvd1t0eXBlXSkge1xuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMubXVsdGlwbGllcjpcbiAgICAgICAgICAgICAgcmV0dXJuIDI0MCAqIENSICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMudmFsdWU6XG4gICAgICAgICAgICAgIHJldHVybiAyNDAgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5zOlxuICAgICAgICAgICAgICByZXR1cm4gMTIgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5kOlxuICAgICAgICAgICAgICByZXR1cm4gMSAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5yb21hbjpcbiAgICAgICAgICBzd2l0Y2ggKHJvd1t0eXBlXSkge1xuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMubXVsdGlwbGllcjpcbiAgICAgICAgICAgICAgcmV0dXJuIDQwMCAqIENSICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMudmFsdWU6XG4gICAgICAgICAgICAgIHJldHVybiA0MDAgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5kZW5hcmlpOlxuICAgICAgICAgICAgICByZXR1cm4gMTYgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5xdWluYXJpaTpcbiAgICAgICAgICAgICAgcmV0dXJuIDggKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5zZXN0ZXJ0aWk6XG4gICAgICAgICAgICAgIHJldHVybiA0ICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMuYXNzZXM6XG4gICAgICAgICAgICAgIHJldHVybiAxICogcm93W3ZhbHVlXVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHN3aXRjaCAocm93W3R5cGVdKSB7XG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5tdWx0aXBsaWVyOlxuICAgICAgICAgICAgICByZXR1cm4gQ1IgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy52YWx1ZTpcbiAgICAgICAgICAgICAgcmV0dXJuIDEgKiByb3dbdmFsdWVdXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgc3BlbmRpbmdMZXZlbCAoKSB7XG4gICAgcmV0dXJuIENvQ0FjdG9yLm1vbmV0YXJ5VmFsdWUodGhpcy5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCB0aGlzLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMsIHRoaXMuY3JlZGl0UmF0aW5nLCAnc3BlbmRpbmdUeXBlJywgJ3NwZW5kaW5nVmFsdWUnKVxuICB9XG5cbiAgZ2V0IGNhc2ggKCkge1xuICAgIHJldHVybiBDb0NBY3Rvci5tb25ldGFyeVZhbHVlKHRoaXMuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgdGhpcy5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzLCB0aGlzLmNyZWRpdFJhdGluZywgJ2Nhc2hUeXBlJywgJ2Nhc2hWYWx1ZScpXG4gIH1cblxuICBnZXQgYXNzZXRzICgpIHtcbiAgICByZXR1cm4gQ29DQWN0b3IubW9uZXRhcnlWYWx1ZSh0aGlzLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHRoaXMuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcywgdGhpcy5jcmVkaXRSYXRpbmcsICdhc3NldHNUeXBlJywgJ2Fzc2V0c1ZhbHVlJylcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJykgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0IG93bmVycyAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlcnMuZmlsdGVyKFxuICAgICAgdSA9PiB0aGlzLnRlc3RVc2VyUGVybWlzc2lvbih1LCAnT1dORVInKSAmJiAhdS5pc0dNXG4gICAgKVxuICB9XG5cbiAgZ2V0IHBsYXllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3duZXJzLmZpbHRlcih1ID0+IHUuY2hhcmFjdGVyPy5pZCA9PT0gdGhpcy5pZClcbiAgfVxuXG4gIGdldCBjaGFyYWN0ZXJVc2VyICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZ2FtZS51c2Vycy5jb250ZW50cy5maWx0ZXIodSA9PiB1LmNoYXJhY3Rlcj8uaWQgPT09IHRoaXMuaWQpWzBdIHx8IG51bGxcbiAgICApXG4gIH1cblxuICBhc3luYyBzZXRIcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgdmFsdWUgPSB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heFxuICAgIH1cbiAgICBjb25zdCBoZWFsdGhCZWZvcmUgPSB0aGlzLmhwXG4gICAgbGV0IGRhbWFnZVRha2VuXG4gICAgLy8gaXMgaGVhbGluZ1xuICAgIGlmIChpc05hTihoZWFsdGhCZWZvcmUpIHx8IHZhbHVlID49IGhlYWx0aEJlZm9yZSkge1xuICAgICAgYXdhaXQgdGhpcy5fc2V0SHAodmFsdWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRhbWFnZVRha2VuID0gaGVhbHRoQmVmb3JlIC0gdmFsdWVcbiAgICAgIGF3YWl0IHRoaXMuZGVhbERhbWFnZShkYW1hZ2VUYWtlbiwgeyBpZ25vcmVBcm1vcjogdHJ1ZSB9KVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2UgKGFtb3VudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgLy8gVE9ETzogQ2hhbmdlIG9wdGlvbnMgdG8gbGlzdCBvZiB2YWx1ZXNcbiAgICBjb25zdCBhcm1vckRhdGEgPSBvcHRpb25zLmFybW9yXG4gICAgICA/IG9wdGlvbnMuYXJtb3JcbiAgICAgIDogdGhpcy5zeXN0ZW0uYXR0cmlicy5hcm1vciAvLyBpZiB0aGVyZSBhcm1vciB2YWx1ZSBwYXNzZWQgd2UgdXNlIGl0XG4gICAgY29uc3QgZ3Jvc3NEYW1hZ2UgPSBwYXJzZUludChhbW91bnQpXG4gICAgbGV0IGFybW9yVmFsdWUgPSAwXG4gICAgaWYgKCFvcHRpb25zLmlnbm9yZUFybW9yKSB7XG4gICAgICBpZiAoYXJtb3JEYXRhID09PSBudWxsKSB7XG4gICAgICAgIC8vIG5vcFxuICAgICAgfSBlbHNlIGlmIChDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYShhcm1vckRhdGEpKSB7XG4gICAgICAgIGFybW9yVmFsdWUgPSAoYXdhaXQgbmV3IFJvbGwoYXJtb3JEYXRhKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JEYXRhKSkpIHtcbiAgICAgICAgYXJtb3JWYWx1ZSA9IE51bWJlcihhcm1vckRhdGEpXG4gICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JEYXRhPy52YWx1ZSkpKSB7XG4gICAgICAgIGFybW9yVmFsdWUgPSBOdW1iZXIoYXJtb3JEYXRhLnZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JVbmFibGVUb1BhcnNlQXJtb3JGb3JtdWxhJywge1xuICAgICAgICAgICAgdmFsdWU6IGFybW9yRGF0YVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbmV0RGFtYWdlID0gZ3Jvc3NEYW1hZ2UgLSBhcm1vclZhbHVlXG4gICAgaWYgKG5ldERhbWFnZSA8PSAwKSByZXR1cm4gMFxuICAgIGF3YWl0IHRoaXMuX3NldEhwKHRoaXMuaHAgLSBuZXREYW1hZ2UpXG4gICAgaWYgKG5ldERhbWFnZSA+PSB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMnKSkge1xuICAgICAgICBpZiAodGhpcy5ocCA9PT0gMCkge1xuICAgICAgICAgIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4IC8gMikpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmR5aW5nKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobmV0RGFtYWdlID49IE1hdGguY2VpbCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCAvIDIpKSB7XG4gICAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgICAgICAgdGhpcy5pc1Rva2VuID8gdGhpcy50b2tlbktleSA6IHRoaXMuaWRcbiAgICAgICAgICApXG4gICAgICAgICAgY29uQ2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGhhc01ham9yV291bmQgPSBmYWxzZVxuICAgICAgICBpZiAobmV0RGFtYWdlID49IE1hdGguY2VpbCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCAvIDIpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgICAgaGFzTWFqb3JXb3VuZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoYXNNYWpvcldvdW5kID0gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaHAgPT09IDApIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICBpZiAoaGFzTWFqb3JXb3VuZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXREYW1hZ2VcbiAgfVxuXG4gIGdldCBtYWpvcldvdW5kICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gIH1cblxuICBnZXQgZHlpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5keWluZylcbiAgfVxuXG4gIGdldCB1bmNvbnNjaW91cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICB9XG5cbiAgZ2V0IGRlYWQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5kZWFkKVxuICB9XG5cbiAgZ2V0IHByb25lICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMucHJvbmUpXG4gIH1cblxuICAvLyBzdGF0aWMgdXBkYXRlQWN0b3IoIGFjdG9yLCBkYXRhVXBkYXRlKXtcbiAgLy8gICBpZiggZ2FtZS51c2VyLmlzR00pe1xuICAvLyAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgdXBkYXRpbmcgYWN0b3IgJHthY3Rvci5uYW1lfWApO1xuICAvLyAgICAgY29uc3QgcHJvbmUgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5wcm9uZV07XG4gIC8vICAgICBjb25zdCB1bmNvbnNjaW91cyA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLnVuY29uc2Npb3VzXTtcbiAgLy8gICAgIGNvbnN0IGNyaXRpY2FsV291bmRzID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHNdO1xuICAvLyAgICAgY29uc3QgZHlpbmcgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5keWluZ107XG4gIC8vICAgICBpZiggcHJvbmUpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JQcm9uZScsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICAgIGlmKCB1bmNvbnNjaW91cykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvclVuY29uc2Npb3VzJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIGNyaXRpY2FsV291bmRzKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yTWFqb3JXb3VuZCcsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICAgIGlmKCBkeWluZykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvckR5aW5nJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgIH1cbiAgLy8gICByZXR1cm47XG4gIC8vIH1cblxuICAvLyBcIkNvQzcuSW5mb0FjdG9yUHJvbmVcIjogXCJ7YWN0b3J9IGZhbGwgcHJvbmVcIixcbiAgLy8gXCJDb0M3LkluZm9BY3RvclVuY29uc2Npb3VzXCI6IFwie2FjdG9yfSBmYWxsIHVuY29uc2Npb3VzXCIsXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JNYWpvcldvdW5kXCI6IFwie2FjdG9yfSBnZXQgYSBtYWpvciB3b3VuZFwiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9yRHlpbmdcIjogXCJ7YWNvcn0gaXMgZHlpbmdcIixcbiAgLy8gXCJDb0M3LkluZm9BY3RvckluanVyaWVkXCI6IFwie2FjdG9yfSBpcyBpbmp1cmllZFwiLFxuXG4gIC8vIHN0YXRpYyB1cGRhdGVUb2tlbiggc2NlbmUsIHRva2VuLCBkYXRhVXBkYXRlKXtcbiAgLy8gICBjb25zdCBpbmp1cmllZCA9IGRhdGFVcGRhdGU/LmFjdG9yRGF0YT8uZmxhZ3M/LkNvQzc/LmluanVyaWVkO1xuICAvLyAgIGlmKCBpbmp1cmllZCkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvckluanVyaWVkJywge2FjdG9yOiB0b2tlbi5uYW1lfSkpO1xuICAvLyAgIHJldHVybjtcbiAgLy8gfVxuXG4gIC8vIGFzeW5jIHVwZGF0ZSAoZGF0YSA9IHt9LCBjb250ZXh0ID0ge30pIHtcbiAgLy8gICBjb25zb2xlLmxvZygnPj4+PicsIGRhdGEsIGNvbnRleHQpXG4gIC8vICAgc3VwZXIudXBkYXRlKGRhdGEsIGNvbnRleHQpXG4gIC8vIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBDT05GSUcsIENPTlNULCBkdXBsaWNhdGUsIGdhbWUsIG1lcmdlT2JqZWN0LCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4vY29jNy1jb250ZW50LWxpbmstZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5cbi8qKlxuICogQWxsb3cgZm9yIHBhcnNpbmcgb2YgQ29DNyBlbGVtZW50cyBpbiBjaGF0IG1lc3NhZ2UgYW5kIHNoZWV0cy5cbiAqIEZvcm1hdCBpcyA6XG4gKiBAY29jNy5UWVBFX09GX1JFUVVFU1RbT1BUSU9OU117RElTUExBWUVEX05BTUV9XG4gKiBUWVBFX09GX1JFUVVFU1QgOlxuICogLSBzYW5sb3NzOiB0cmlnZ2VyIGEgc2FuIGNoZWNrLCB1cG9uIGZhaWx1cmUgd2lsbCBwcm9wb3NlIHRvIGRlZHVjdCB0aGUgY29ycmVzcG9uZGluZyBTQU4uXG4gKiAtIGNoZWNrOiB0cmlnZ2VyIGEgY2hlY2sgZGVwZW5kaW5nIG9uIHRoZSBvcHRpb25zLlxuICogLSBpdGVtOiBUcmlnZ2VyIGEgd2VhcG9uIGNoZWNrXG4gKiAtIGVmZmVjdDogQWRkIGFuIGVmZmVjdFxuICpcbiAqIE9QVElPTlM6IFtdID0gb3B0aW9uYWxcbiAqIHNhbmxvc3M6XG4gKiAgIHNhbk1heDogbWF4IFNBTiBsb3NzXG4gKiAgIHNhbk1pbjogbWluIFNBTiBsb3NzXG4gKiAgIHNhblJlYXNvbjogUmVhc29uXG4gKiBjaGVjazpcbiAqICAgdHlwZTogdHlwZSBvZiBjaGVjayAoY2hhcmFjdGVyaXN0aWMsIHNraWxsLCBhdHRyaWIpLlxuICogICBuYW1lOiBuYW1lIG9mIHRoZSBza2lsbC9jaGFyYWN0ZXJpc3RpYy5cbiAqICAgW2RpZmZpY3VsdHldOiA/IChibGluZCksIDAgKHJlZ3VsYXIpLCArIChoYXJkKSwgKysgKGV4dHJlbWUpLCArKysgKGNyaXRpY2FsKS5cbiAqICAgW21vZGlmaWVyXTogLXggKHggcGVuYWx0eSBkaWNlKSwgK3ggKHggYm9udXMgZGljZSksIDAgKG5vIG1vZGlmaWVyKS5cbiAqICAgW2ljb25dOiBpY29uIHR1IHVzZSAoZm9udCBhd3NvbWUpLlxuICogICBbYmxpbmRdOiB3aWxsIHRyaWdnZXIgYSBibGluZCByb2xsLlxuICpcbiAqIFtESVNQTEFZRURfTkFNRTogbmFtZSB0byBkaXNwbGF5Ll1cbiAqXG4gKiBUbyBhZGQvZWRpdCBhIG5ldyBsaW5rIHVwZGF0ZSB0aGVzZSBzZWN0aW9uc1xuICogICBmcm9tRHJvcERhdGEgPT4gQWRkIGFsbCBkZWZhdWx0cyBoZXJlXG4gKiAgIF9jcmVhdGVMaW5rID0+IENyZWF0ZSBIVE1MIGZyb20gZG9jdW1lbnQgZGF0YVxuICogICBfY3JlYXRlRG9jdW1lbnRMaW5rID0+IENyZWF0ZSBAbGluayBmcm9tIGRvY3VtZW50IGRhdGFcbiAqICAgX29uTGlua0FjdG9yQ2xpY2sgPT4gUHJvY2VzcyBsaW5rXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3TGluayB7XG4gIHN0YXRpYyBnZXQgQ0hFQ0tfVFlQRSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIENIRUNLOiAnY2hlY2snLFxuICAgICAgU0FOTE9TUzogJ3Nhbmxvc3MnLFxuICAgICAgSVRFTTogJ2l0ZW0nLFxuICAgICAgRUZGRUNUOiAnZWZmZWN0J1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgTElOS19UWVBFICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgQ0hBUkFDVEVSSVNUSUM6ICdjaGFyYWN0ZXJpc3RpYycsXG4gICAgICBBVFRSSUJVVEU6ICdhdHRyaWJ1dGUnLFxuICAgICAgU0tJTEw6ICdza2lsbCdcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgaW5pdCAoKSB7XG4gICAgQ09ORklHLkNvQzdMaW5rID0ge1xuICAgICAgZG9jdW1lbnRDbGFzczogQ29DN0xpbmtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYmluZEV2ZW50c0hhbmRsZXIgKGh0bWwpIHtcbiAgICBodG1sXG4gICAgICAuZmluZCgnYS5jb2M3LWxpbms6bm90KC5oYXNjb2M3bGlua2VkKScpXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gQ29DN0xpbmsuX29uTGlua0NsaWNrKGV2ZW50KSlcbiAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gQ29DN0xpbmsuX29uRHJhZ0NvQzdMaW5rKGV2ZW50KSlcbiAgICAgIC5hZGRDbGFzcygnaGFzY29jN2xpbmtlZCcpXG4gIH1cblxuICBzdGF0aWMgX2xpbmtGcm9tRXZlbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBpID0gYS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1saW5rLWljb25dJylcbiAgICBjb25zdCBkYXRhID0gZHVwbGljYXRlKGEuZGF0YXNldClcblxuICAgIGNvbnN0IG9sZFR5cGUgPSBkYXRhLnR5cGVcblxuICAgIGRhdGEudHlwZSA9ICdDb0M3TGluaydcbiAgICBkYXRhLmljb24gPSBudWxsXG5cbiAgICBpZiAob2xkVHlwZSkge1xuICAgICAgZGF0YS5saW5rVHlwZSA9IG9sZFR5cGVcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBkYXRhLm9iamVjdCAmJlxuICAgICAgKHR5cGVvZiBkYXRhLm9iamVjdCA9PT0gJ3N0cmluZycgfHwgZGF0YS5vYmplY3QgaW5zdGFuY2VvZiBTdHJpbmcpXG4gICAgKSB7XG4gICAgICBkYXRhLm9iamVjdCA9IEpTT04ucGFyc2UoZGF0YS5vYmplY3QpXG4gICAgICAvLyBkYXRhLmxpbmtUeXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkVGRkVDVFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGkuZGF0YXNldCAmJlxuICAgICAgaS5kYXRhc2V0LmxpbmtJY29uICYmXG4gICAgICBpLmRhdGFzZXQubGlua0ljb24gIT09ICdmYXMgZmEtZGljZSdcbiAgICApIHtcbiAgICAgIGRhdGEuaWNvbiA9IGkuZGF0YXNldC5saW5rSWNvblxuICAgIH1cbiAgICBkYXRhLmRpc3BsYXlOYW1lID0gYS5kYXRhc2V0LmRpc3BsYXlOYW1lID8gYS5pbm5lclRleHQgOiBudWxsXG4gICAgaWYgKGRhdGEuZGlmZmljdWx0eSkge1xuICAgICAgZGF0YS5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShkYXRhLmRpZmZpY3VsdHkpXG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBzdGF0aWMgX29uRHJhZ0NvQzdMaW5rIChldmVudCkge1xuICAgIGNvbnN0IGRhdGEgPSBDb0M3TGluay5fbGlua0Zyb21FdmVudChldmVudClcbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICAvKipcbiAgICogQSBoZWxwZXIgZnVuY3Rpb24gdG8gaGFuZGxlIG9idGFpbmluZyB0aGUgcmVsZXZhbnQgRG9jdW1lbnQgZnJvbSBkcm9wcGVkIGRhdGEgcHJvdmlkZWQgdmlhIGEgRGF0YVRyYW5zZmVyIGV2ZW50LlxuICAgKiBUaGUgZHJvcHBlZCBkYXRhIGNvdWxkIGhhdmU6XG4gICAqIDEuIEEgZGF0YSBvYmplY3QgZXhwbGljaXRseSBwcm92aWRlZFxuICAgKiBAbWVtYmVyb2YgQ2xpZW50RG9jdW1lbnRNaXhpblxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAgICAgICAgICAgVGhlIGRhdGEgb2JqZWN0IGV4dHJhY3RlZCBmcm9tIGEgRGF0YVRyYW5zZmVyIGV2ZW50XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zICAgICAgICBBZGRpdGlvbmFsIG9wdGlvbnMgd2hpY2ggYWZmZWN0IGRyb3AgZGF0YSBiZWhhdmlvclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59ICAgVGhlIHJlc29sdmVkIERvY3VtZW50XG4gICAqIEB0aHJvd3MgSWYgYSBEb2N1bWVudCBjb3VsZCBub3QgYmUgcmV0cmlldmVkIGZyb20gdGhlIHByb3ZpZGVkIGRhdGEuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbURyb3BEYXRhIChkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjbHMgPSBuZXcgQ29DN0xpbmsoKVxuICAgIGNscy5vYmplY3QgPSBtZXJnZU9iamVjdCh7XG4gICAgICB0eXBlOiAnQ29DN0xpbmsnLFxuICAgICAgY2hlY2s6IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0ssXG4gICAgICBsaW5rVHlwZTogQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMLFxuICAgICAgZGlmZmljdWx0eTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyLFxuICAgICAgbW9kaWZpZXI6IDAsXG4gICAgICBvYmplY3Q6IHtcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FZmZlY3ROZXcnKSxcbiAgICAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXG4gICAgICAgIGNoYW5nZXM6IFtdXG4gICAgICB9XG4gICAgfSwgZGF0YSlcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ25hbWUnLCAnZGlzcGxheU5hbWUnLCAnaWNvbicsICdpZCcsICdwYWNrJywgJ3Nhbk1pbicsICdzYW5NYXgnLCAnc2FuUmVhc29uJ10pIHtcbiAgICAgIGNscy5vYmplY3Rba2V5XSA9IGNscy5vYmplY3Rba2V5XSA/PyAnJ1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNscy5vYmplY3Qub2JqZWN0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjbHMub2JqZWN0Lm9iamVjdC5leHRlcm5hbCAhPT0gJ3VuZGVmaW5lZCcgJiYgWydodHRwJywgJ2h0dHBzJ10uaW5jbHVkZXMoY2xzLm9iamVjdC5vYmplY3QuZXh0ZXJuYWwpKSB7XG4gICAgICBjbHMub2JqZWN0Lm9iamVjdC5pY29uID0gY2xzLm9iamVjdC5vYmplY3QuZXh0ZXJuYWwgKyAnOi8vJyArIGNscy5vYmplY3Qub2JqZWN0Lmljb25cbiAgICB9XG4gICAgY2xzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgcmV0dXJuIGNsc1xuICB9XG5cbiAgc3RhdGljIF9jcmVhdGVMaW5rIChtYXRjaCkge1xuICAgIGNvbnN0IG5hbWUgPSBtYXRjaFs0XSA/PyB1bmRlZmluZWRcbiAgICBjb25zdCBvcHRpb25zID0gbWF0Y2hbM10gPz8gdW5kZWZpbmVkXG4gICAgY29uc3QgdHlwZSA9IG1hdGNoWzJdID8/IHVuZGVmaW5lZFxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGNsczogWydjb2M3LWxpbmsnXSxcbiAgICAgIGRhdGFzZXQ6IHsgY2hlY2s6IHR5cGUgfSxcbiAgICAgIGljb246IG51bGwsXG4gICAgICBibGluZDogZmFsc2UsXG4gICAgICBuYW1lXG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICBkYXRhLmVmZmVjdCA9IEpTT04ucGFyc2Uob3B0aW9ucylcbiAgICAgIGRhdGEuZGF0YXNldC5vYmplY3QgPSBvcHRpb25zXG4gICAgICBpZiAodHlwZW9mIGRhdGEuZWZmZWN0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkYXRhLmVmZmVjdC5leHRlcm5hbCAhPT0gJ3VuZGVmaW5lZCcgJiYgWydodHRwJywgJ2h0dHBzJ10uaW5jbHVkZXMoZGF0YS5lZmZlY3QuZXh0ZXJuYWwpKSB7XG4gICAgICAgIGRhdGEuZWZmZWN0Lmljb24gPSBkYXRhLmVmZmVjdC5leHRlcm5hbCArICc6Ly8nICsgZGF0YS5lZmZlY3QuaWNvblxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9ucy5tYXRjaEFsbCgvW14sXSsvZ2kpXG4gICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIEFycmF5LmZyb20obWF0Y2hlcykpIHtcbiAgICAgICAgbGV0IFtrZXksIHZhbHVlXSA9IG1hdGNoWzBdLnNwbGl0KCc6JylcbiAgICAgICAgaWYgKGtleSA9PT0gJ2ljb24nKSB7XG4gICAgICAgICAgZGF0YS5pY29uID0gdmFsdWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSAnYmxpbmQnICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB2YWx1ZSA9IHRydWVcbiAgICAgICAgICBkYXRhLmJsaW5kID0gdHJ1ZSAmJiBbQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS10uaW5jbHVkZXModHlwZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICB9XG4gICAgICAgIGRhdGEuZGF0YXNldFtrZXldID0gdmFsdWVcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZGF0YS5kYXRhc2V0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkYXRhLmRhdGFzZXQuZXh0ZXJuYWwgIT09ICd1bmRlZmluZWQnICYmIFsnaHR0cCcsICdodHRwcyddLmluY2x1ZGVzKGRhdGEuZGF0YXNldC5leHRlcm5hbCkpIHtcbiAgICAgICAgZGF0YS5kYXRhc2V0Lmljb24gPSBkYXRhLmRhdGFzZXQuZXh0ZXJuYWwgKyAnOi8vJyArIGRhdGEuZGF0YXNldC5pY29uXG4gICAgICAgIGRhdGEuaWNvbiA9IGRhdGEuZGF0YXNldC5pY29uXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHRpdGxlXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKGRhdGEuZGF0YXNldC5kaWZmaWN1bHR5KVxuXG4gICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSzoge1xuICAgICAgICBsZXQgaHVtYW5OYW1lID0gZGF0YS5kYXRhc2V0Lm5hbWVcbiAgICAgICAgaWYgKFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXS5pbmNsdWRlcyhkYXRhLmRhdGFzZXQudHlwZT8udG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhc2V0Lm5hbWUgPT09ICdsY2snKSB7XG4gICAgICAgICAgICBodW1hbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkYXRhLmRhdGFzZXQubmFtZSA9PT0gJ3NhbicpIHtcbiAgICAgICAgICAgIGh1bWFuTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoWydjaGFyYWMnLCAnY2hhcicsICdjaGFyYWN0ZXJpc3RpYycsICdjaGFyYWN0ZXJpc3RpY3MnXS5pbmNsdWRlcyhkYXRhLmRhdGFzZXQudHlwZT8udG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICBodW1hbk5hbWUgPSBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMoZGF0YS5kYXRhc2V0Lm5hbWUpPy5sYWJlbFxuICAgICAgICB9XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2skeyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7IWRhdGEuZGF0YXNldC5tb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICBtb2RpZmllcjogZGF0YS5kYXRhc2V0Lm1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogaHVtYW5OYW1lXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTOlxuICAgICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua1Nhbkxvc3MkeyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7IWRhdGEuZGF0YXNldC5tb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICBtb2RpZmllcjogZGF0YS5kYXRhc2V0Lm1vZGlmaWVyLFxuICAgICAgICAgICAgc2FuTWluOiBkYXRhLmRhdGFzZXQuc2FuTWluLFxuICAgICAgICAgICAgc2FuTWF4OiBkYXRhLmRhdGFzZXQuc2FuTWF4XG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNOlxuICAgICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0l0ZW0keyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7IWRhdGEuZGF0YXNldC5tb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICBtb2RpZmllcjogZGF0YS5kYXRhc2V0Lm1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogZGF0YS5kYXRhc2V0Lm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVDpcbiAgICAgICAgdGl0bGUgPSBkYXRhLmVmZmVjdC5sYWJlbFxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGlmICghbmFtZSkge1xuICAgICAgZGF0YS5uYW1lID0gdGl0bGVcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YS5kYXRhc2V0LmRpc3BsYXlOYW1lID0gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBhLnRpdGxlID0gZ2FtZS51c2VyLmlzR00gPyBkYXRhLm5hbWUgOiB0aXRsZVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XG4gICAgICBhLmRhdGFzZXRba10gPSB2XG4gICAgfVxuICAgIGEuZHJhZ2dhYmxlID0gdHJ1ZVxuICAgIGRhdGEuaWNvbiA9IGRhdGEuaWNvbiA/PyBkYXRhLmVmZmVjdD8uaWNvbiA/PyAnZmFzIGZhLWRpY2UnXG4gICAgLy8gY2hlY2sgaWYgaXQncyBhbiBpbWFnZSBvciBhbiBpY29uXG4gICAgaWYgKGRhdGEuaWNvbi5pbmNsdWRlcygnXFxcXCcpIHx8IGRhdGEuaWNvbi5pbmNsdWRlcygnLicpKSB7XG4gICAgICBkYXRhLmltZyA9IGRhdGEuaWNvblxuICAgIH1cbiAgICBpZiAoZGF0YS5ibGluZCkge1xuICAgICAgYS5pbm5lckhUTUwgKz0gJzxpIGNsYXNzPVwiZmFzIGZhLWV5ZS1zbGFzaFwiPjwvaT4nXG4gICAgfVxuICAgIGlmIChkYXRhLmltZykge1xuICAgICAgYS5pbm5lckhUTUwgKz0gYDxpbWcgZGF0YS1saW5rLWljb249XCIke2RhdGEuaWNvbn1cIiBzcmM9XCIke2RhdGEuaW1nfVwiPmBcbiAgICB9IGVsc2Uge1xuICAgICAgYS5pbm5lckhUTUwgKz0gYDxpIGRhdGEtbGluay1pY29uPVwiJHtkYXRhLmljb259XCIgY2xhc3M9XCJsaW5rLWljb24gJHtkYXRhLmljb259XCI+PC9pPmBcbiAgICB9XG4gICAgYS5pbm5lckhUTUwgKz0gYDxzcGFuPiR7ZGF0YS5uYW1lfTwvc3Bhbj5gXG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGNvbnRlbnQgbGluayBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50RGF0YSAgICAgICAgICAgICAgICAgICAgIFRoZSBwYXJzZWQgb2JqZWN0IG9mIGRhdGEgcHJvdmlkZWQgYnkgdGhlIGRyb3AgdHJhbnNmZXIgZXZlbnQuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gICAgICAgICAgICAgICAgICAgICBBZGRpdGlvbmFsIG9wdGlvbnMgdG8gY29uZmlndXJlIGxpbmsgZ2VuZXJhdGlvbi5cbiAgICogQHBhcmFtIHtDbGllbnREb2N1bWVudH0gW29wdGlvbnMucmVsYXRpdmVUb10gIEEgZG9jdW1lbnQgdG8gZ2VuZXJhdGUgYSBsaW5rIHJlbGF0aXZlIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubGFiZWxdICAgICAgICAgICAgICAgQSBjdXN0b20gbGFiZWwgdG8gdXNlIGluc3RlYWQgb2YgdGhlIGRvY3VtZW50J3MgbmFtZS5cbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICogQGludGVybmFsXG4gICAqL1xuICBfY3JlYXRlRG9jdW1lbnRMaW5rIChldmVudERhdGEsIHsgcmVsYXRpdmVUbywgbGFiZWwgfSA9IHt9KSB7XG4gICAgaWYgKCFldmVudERhdGEuY2hlY2spIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBzd2l0Y2ggKGV2ZW50RGF0YS5jaGVjay50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0s6IHtcbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpjaGFyYWMsbmFtZTpTVFIsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNUUiBjaGVjaygtMSl9XG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW2JsaW5kLHR5cGU6Y2hhcmFjdGVyaXN0aWMsbmFtZTpzdHIsZGlmZmljdWx0eToxLG1vZGlmaWVyOjAsaWNvbjpmYSBmYS1saW5rXXtTdHJlbmd0aH1cbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbYmxpbmQsdHlwZTphdHRyaWJ1dGUsbmFtZTpsY2ssZGlmZmljdWx0eToxLG1vZGlmaWVyOjAsaWNvbjpmYSBmYS1saW5rXXtMdWNrfVxuICAgICAgICAvLyBAY29jNy5jaGVja1tibGluZCx0eXBlOnNraWxsLG5hbWU6TGF3LGRpZmZpY3VsdHk6MSxtb2RpZmllcjowLGljb246ZmEgZmEtbGlua117TGF3fVxuICAgICAgICBpZiAoIWV2ZW50RGF0YS5saW5rVHlwZSB8fCAhZXZlbnREYXRhLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2V2ZW50RGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9dHlwZToke2V2ZW50RGF0YS5saW5rVHlwZX0sbmFtZToke2V2ZW50RGF0YS5uYW1lfWBcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudERhdGEuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcgJiYgZXZlbnREYXRhLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZXZlbnREYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnREYXRhLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJyAmJiBldmVudERhdGEubW9kaWZpZXIgIT09IDApIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHtldmVudERhdGEubW9kaWZpZXJ9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuaWNvbikge1xuICAgICAgICAgIGNvbnN0IHBhcnRzID0gZXZlbnREYXRhLmljb24ubWF0Y2goL14oaHR0cHM/KTpcXC9cXC8oLispJC8pXG4gICAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsZXh0ZXJuYWw6JHtwYXJ0c1sxXX0saWNvbjoke3BhcnRzWzJdfWBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGljb246JHtldmVudERhdGEuaWNvbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEucGFjaykge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxwYWNrOiR7ZXZlbnREYXRhLnBhY2t9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuaWQpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsaWQ6JHtldmVudERhdGEuaWR9YFxuICAgICAgICB9XG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3LmNoZWNrWyR7b3B0aW9uc31dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1M6IHtcbiAgICAgICAgLy8gQGNvYzcuc2FubG9zc1tzYW5NYXg6MUQ2LHNhbk1pbjoxLGRpZmZpY3VsdHk6KyssbW9kaWZpZXI6LTFde0hhcmQgU2FuIExvc3MgKC0xKSAxLzFENn1cbiAgICAgICAgaWYgKCFldmVudERhdGEuc2FuTWF4IHx8ICFldmVudERhdGEuc2FuTWluKSB7XG4gICAgICAgICAgcmV0dXJuICcnXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHtldmVudERhdGEuYmxpbmQgPyAnYmxpbmQsJyA6ICcnfXNhbk1heDoke2V2ZW50RGF0YS5zYW5NYXh9LHNhbk1pbjoke2V2ZW50RGF0YS5zYW5NaW59YFxuICAgICAgICBpZiAoZXZlbnREYXRhLnNhblJlYXNvbikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxzYW5SZWFzb246JHtldmVudERhdGEuc2FuUmVhc29ufWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLmRpZmZpY3VsdHkgJiYgZXZlbnREYXRhLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZXZlbnREYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEubW9kaWZpZXIgJiYgZXZlbnREYXRhLm1vZGlmaWVyICE9PSAwKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7ZXZlbnREYXRhLm1vZGlmaWVyfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLmljb24pIHtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IGV2ZW50RGF0YS5pY29uLm1hdGNoKC9eKGh0dHBzPyk6XFwvXFwvKC4rKSQvKVxuICAgICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGV4dGVybmFsOiR7cGFydHNbMV19LGljb246JHtwYXJ0c1syXX1gXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxpY29uOiR7ZXZlbnREYXRhLmljb259YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5zYW5sb3NzWyR7b3B0aW9uc31dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLklURU06IHtcbiAgICAgICAgLy8gQGNvYzcuaXRlbVt0eXBlOm9wdGlvbmFsLG5hbWU6U2hvdGd1bixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU2hpdGd1biBjaGVjaygtMSl9XG4gICAgICAgIGlmICghZXZlbnREYXRhLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2V2ZW50RGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9bmFtZToke2V2ZW50RGF0YS5uYW1lfWBcbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pY29uKSB7XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBldmVudERhdGEuaWNvbi5tYXRjaCgvXihodHRwcz8pOlxcL1xcLyguKykkLylcbiAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxleHRlcm5hbDoke3BhcnRzWzFdfSxpY29uOiR7cGFydHNbMl19YFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsaWNvbjoke2V2ZW50RGF0YS5pY29ufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5wYWNrKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHBhY2s6JHtldmVudERhdGEucGFja31gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pZCkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxpZDoke2V2ZW50RGF0YS5pZH1gXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuaXRlbVske29wdGlvbnN9XWBcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBldmVudERhdGEuZGlzcGxheU5hbWUgPz8gKGxhYmVsID8/ICcnKVxuICAgICAgICBpZiAoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBsaW5rICs9IGB7JHtkaXNwbGF5TmFtZX19YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1Q6IHtcbiAgICAgICAgLy8gQGNvYzcuZWZmZWN0W3tcImxhYmVsXCI6XCJLYXBvd1wiLFwiaWNvblwiOlwiaWNvbnMvc3ZnL2F1cmEuc3ZnXCIsXCJjaGFuZ2VzXCI6W3tcImtleVwiOlwic3lzdGVtLnVua25vd24udGVzdFwiLFwibW9kZVwiOjIsXCJ2YWx1ZVwiOlwiNVwifV0sXCJ0aW50XCI6XCIjZTkxNjE2XCIsXCJkdXJhdGlvblwiOntcInNlY29uZHNcIjpudWxsLFwicm91bmRzXCI6NixcInR1cm5zXCI6bnVsbH19XXtLYXBvd2luZ31cbiAgICAgICAgLy8gY29uc3QgZWZmZWN0RGF0YSA9IGZvdW5kcnkudXRpbHMuZGVlcENsb25lKGV2ZW50RGF0YSlcbiAgICAgICAgLy8gaWYgKCF0aGlzLmVmZmVjdElzVGVtcCkgZGVsZXRlIGVmZmVjdERhdGEuZHVyYXRpb25cbiAgICAgICAgLy8gaWYgKGVmZmVjdERhdGEuY2hhbmdlcz8ubGVuZ3RoID09PSAwKSBkZWxldGUgZWZmZWN0RGF0YS5jaGFuZ2VzXG4gICAgICAgIC8vIGlmICghZWZmZWN0RGF0YS5kaXNhYmxlZCkgZGVsZXRlIGVmZmVjdERhdGEuZGlzYWJsZWRcbiAgICAgICAgLy8gaWYgKCFlZmZlY3REYXRhLnRpbnQpIGRlbGV0ZSBlZmZlY3REYXRhLnRpbnRcbiAgICAgICAgY29uc3QgcGFydHMgPSBldmVudERhdGEub2JqZWN0Lmljb24ubWF0Y2goL14oaHR0cHM/KTpcXC9cXC8oLispJC8pXG4gICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgIGV2ZW50RGF0YS5vYmplY3QuZXh0ZXJuYWwgPSBwYXJ0c1sxXVxuICAgICAgICAgIGV2ZW50RGF0YS5vYmplY3QuaWNvbiA9IHBhcnRzWzJdXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuZWZmZWN0WyR7SlNPTi5zdHJpbmdpZnkoZXZlbnREYXRhLm9iamVjdCl9XWBcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBldmVudERhdGEuZGlzcGxheU5hbWUgPz8gKGxhYmVsID8/ICcnKVxuICAgICAgICBpZiAoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBsaW5rICs9IGB7JHtkaXNwbGF5TmFtZX19YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnPydcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25MaW5rQWN0b3JDbGljayAoYWN0b3IsIG9wdGlvbnMsIHsgc2hpZnRLZXkgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBzd2l0Y2ggKG9wdGlvbnMuY2hlY2spIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSzpcbiAgICAgICAgaWYgKFsnY2hhcmFjJywgJ2NoYXInLCAnY2hhcmFjdGVyaXN0aWMnLCAnY2hhcmFjdGVyaXN0aWNzJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5jaGFyYWN0ZXJpc3RpY0NoZWNrKFxuICAgICAgICAgICAgb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgc2hpZnRLZXksXG4gICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGlmIChbJ3NraWxsJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5za2lsbENoZWNrKG9wdGlvbnMsIHNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICB9XG4gICAgICAgIGlmIChbJ2F0dHJpYnV0ZXMnLCAnYXR0cmlidXRlJywgJ2F0dHJpYicsICdhdHRyaWJzJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5hdHRyaWJ1dGVDaGVjayhvcHRpb25zLm5hbWUsIHNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTOlxuICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKGFjdG9yLmFjdG9yS2V5LCBvcHRpb25zLCB7XG4gICAgICAgICAgZmFzdEZvcndhcmQ6IHNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTTpcbiAgICAgICAgcmV0dXJuIGFjdG9yLndlYXBvbkNoZWNrKG9wdGlvbnMsIHNoaWZ0S2V5KVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUOlxuICAgICAgICBhd2FpdCBhY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW3tcbiAgICAgICAgICBsYWJlbDogb3B0aW9ucy5vYmplY3QubGFiZWwsXG4gICAgICAgICAgaWNvbjogb3B0aW9ucy5vYmplY3QuaWNvbixcbiAgICAgICAgICBjaGFuZ2VzOiBvcHRpb25zLm9iamVjdC5jaGFuZ2VzXG4gICAgICAgIH1dKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0b0NoYXRNZXNzYWdlIChvcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0aW9uID0ge1xuICAgICAgc3BlYWtlcjoge1xuICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IG1lc3NhZ2VcbiAgICBjb25zdCBsaW5rID0gKG5ldyBDb0M3TGluaygpKS5fY3JlYXRlRG9jdW1lbnRMaW5rKG9wdGlvbnMpXG4gICAgaWYgKG9wdGlvbnMuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICBtZXNzYWdlID0gYDxkaXYgY2xhc3M9XCJlZmZlY3QtbWVzc2FnZVwiPiR7bGlua308L2Rpdj5gXG4gICAgfSBlbHNlIHtcbiAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VDaGVja1JlcXVlc3RlZFdhaXQnLCB7XG4gICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICB9KVxuICAgIH1cbiAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UobnVsbCwgbWVzc2FnZSwgb3B0aW9uKVxuICB9XG5cbiAgc3RhdGljIHRvV2hpc3Blck1lc3NhZ2UgKG9wdGlvbnMsIGFjdG9ycykge1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XG4gICAgICBjb25zdCBvcHRpb24gPSB7XG4gICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgd2hpc3BlcjogYWN0b3Iub3duZXJzLm1hcChhID0+IGEuaWQpXG4gICAgICB9XG4gICAgICBsZXQgbWVzc2FnZVxuICAgICAgY29uc3QgbGluayA9IChuZXcgQ29DN0xpbmsoKSkuX2NyZWF0ZURvY3VtZW50TGluayhvcHRpb25zKVxuICAgICAgaWYgKG9wdGlvbnMuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBgPGRpdiBjbGFzcz1cImVmZmVjdC1tZXNzYWdlXCI+JHtsaW5rfTwvZGl2PmBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VUYXJnZXRDaGVja1JlcXVlc3RlZCcsIHtcbiAgICAgICAgICBuYW1lOiBhY3Rvci5uYW1lLFxuICAgICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UobnVsbCwgbWVzc2FnZSwgb3B0aW9uKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGEgY2hlY2sgd2hlbiBhIGxpbmsgaXMgY2xpY2tlZC5cbiAgICogRGVwZW5kaW5nIHRoZSBvcmlnaW5cbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIF9vbkxpbmtDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gQ29DN0xpbmsuX2xpbmtGcm9tRXZlbnQoZXZlbnQpXG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XG4gICAgICAgIENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCkge1xuICAgICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKHRva2VuLmFjdG9yLCBvcHRpb25zLCB7IHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgY29uc3QgYWN0b3IgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3Ioc3BlYWtlcilcbiAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICBDb0M3TGluay5fb25MaW5rQWN0b3JDbGljayhhY3Rvciwgb3B0aW9ucywgeyBzaGlmdEtleTogZXZlbnQuc2hpZnRLZXkgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBDb0M3TGluay50b0NoYXRNZXNzYWdlKG9wdGlvbnMpXG4gICAgICByZXR1cm5cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgbGV0IGFjdG9yID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHNwZWFrZXIpXG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhID0+IChhLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IGEub3duZXJzaGlwLmRlZmF1bHQpID49IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT0JTRVJWRVIpXG4gICAgICAgIGlmIChhY3RvcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgYWN0b3IgPSBhY3RvcnNbMF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKGFjdG9yLCBvcHRpb25zLCB7IHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9Db250cm9sbGVkQWN0b3InKSlcbiAgfVxuXG4gIHNldFZhbHVlIChrZXksIHZhbHVlKSB7XG4gICAgdGhpcy5vYmplY3Rba2V5XSA9IHZhbHVlXG4gIH1cblxuICBnZXQgbGluayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZURvY3VtZW50TGluayh0aGlzLm9iamVjdClcbiAgfVxuXG4gIGdldCBpZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmlkXG4gIH1cblxuICBnZXQgcGFjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnBhY2tcbiAgfVxuXG4gIGdldCBjaGVja1R5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVja1xuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5kaWZmaWN1bHR5XG4gIH1cblxuICBnZXQgaWNvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lmljb25cbiAgfVxuXG4gIGdldCBkaXNwbGF5TmFtZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmRpc3BsYXlOYW1lXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5tb2RpZmllclxuICB9XG5cbiAgZ2V0IGxpbmtUeXBlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QubGlua1R5cGVcbiAgfVxuXG4gIGdldCBzYW5NaW4gKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5NaW5cbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5NYXhcbiAgfVxuXG4gIGdldCBzYW5SZWFzb24gKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5SZWFzb25cbiAgfVxuXG4gIGdldCBlZmZlY3QgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5vYmplY3RcbiAgfVxuXG4gIGdldCBjaGVja05hbWUgKCkge1xuICAgIGlmICh0aGlzLmlzQ2hhcmFjdGVyaXN0aWNDaGVjaykge1xuICAgICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClcbiAgICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3MuZmluZChjID0+IGMua2V5ID09PSB0aGlzLm9iamVjdC5uYW1lIHx8IGMuc2hvcnROYW1lID09PSB0aGlzLm9iamVjdC5uYW1lIHx8IGMubGFiZWwgPT09IHRoaXMub2JqZWN0Lm5hbWUpPy5rZXkgPz8gJydcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lm5hbWVcbiAgfVxuXG4gIGdldCBpc0NoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tcbiAgfVxuXG4gIGdldCBpc0NoYXJhY3RlcmlzdGljQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5DSEFSQUNURVJJU1RJQ1xuICB9XG5cbiAgZ2V0IGlzQXR0cmlidXRlQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5BVFRSSUJVVEVcbiAgfVxuXG4gIGdldCBpc1NraWxsQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5TS0lMTFxuICB9XG5cbiAgZ2V0IGlzSXRlbUNoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTVxuICB9XG5cbiAgZ2V0IGlzU2FuTG9zc0NoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TU1xuICB9XG5cbiAgZ2V0IGlzRWZmZWN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5ibGluZFxuICB9XG59XG4iLCIvKiBnbG9iYWwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2NvYzctbGluay5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdQYXJzZXIge1xuICBzdGF0aWMgZW5yaWNoSFRNTCAoY29udGVudCkge1xuICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGh0bWwuaW5uZXJIVE1MID0gU3RyaW5nKGNvbnRlbnQpXG5cbiAgICBsZXQgdGV4dCA9IFtdXG5cbiAgICB0ZXh0ID0gVGV4dEVkaXRvci5fZ2V0VGV4dE5vZGVzKGh0bWwpXG4gICAgY29uc3Qgcmd4ID0gbmV3IFJlZ0V4cCgnQChjb2M3KVxcXFwuJyArICcoY2hlY2t8ZWZmZWN0fGl0ZW18c2FubG9zcyknICsgJ1xcXFxbKFteXFxcXFtcXFxcXV0qKD86XFxcXFtbXlxcXFxbXFxcXF1dKig/OlxcXFxbW15cXFxcW1xcXFxdXSpcXFxcXSkqW15cXFxcW1xcXFxdXSpcXFxcXSkqW15cXFxcW1xcXFxdXSopXFxcXF0nICsgJyg/OnsoW159XSspfSk/JywgJ2dpJylcbiAgICBUZXh0RWRpdG9yLl9yZXBsYWNlVGV4dENvbnRlbnQodGV4dCwgcmd4LCBDb0M3TGluay5fY3JlYXRlTGluaylcbiAgICByZXR1cm4gaHRtbC5pbm5lckhUTUxcbiAgfVxuXG4gIHN0YXRpYyBQYXJzZVNoZWV0Q29udGVudCAoYXBwLCBodG1sKSB7XG4gICAgLy8gQ2hlY2sgaW4gYWxsIGVkaXRvcnMgY29udGVudCBmb3IgYSBsaW5rLlxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBodG1sLmZpbmQoJ2Rpdi5lZGl0b3ItY29udGVudCA+ICosIHAnKSkge1xuICAgICAgaWYgKGVsZW1lbnQub3V0ZXJIVE1MLnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ0Bjb2M3JykpIHtcbiAgICAgICAgZWxlbWVudC5vdXRlckhUTUwgPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoZWxlbWVudC5vdXRlckhUTUwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQmluZCB0aGUgY2xpY2sgdG8gZXhlY3V0ZSB0aGUgY2hlY2suXG4gICAgQ29DN0xpbmsuYmluZEV2ZW50c0hhbmRsZXIoaHRtbClcbiAgfVxuXG4gIC8qKlxuICAgICAqIEEgaG9vayBldmVudCB0aGF0IGZpcmVzIGZvciBlYWNoIENoYXRNZXNzYWdlIHdoaWNoIGlzIHJlbmRlcmVkIGZvciBhZGRpdGlvbiB0byB0aGUgQ2hhdExvZy5cbiAgICAgKiBUaGlzIGhvb2sgYWxsb3dzIGZvciBmaW5hbCBjdXN0b21pemF0aW9uIG9mIHRoZSBtZXNzYWdlIEhUTUwgYmVmb3JlIGl0IGlzIGFkZGVkIHRvIHRoZSBsb2cuXG4gICAgICogQGZ1bmN0aW9uIHJlbmRlckNoYXRNZXNzYWdlXG4gICAgICogQG1lbWJlcm9mIGhvb2tFdmVudHNcbiAgICAgKiBAcGFyYW0ge0NoYXRNZXNzYWdlfSBhcHAgICBUaGUgQ2hhdE1lc3NhZ2UgZG9jdW1lbnQgYmVpbmcgcmVuZGVyZWRcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gaHRtbCAgICAgICAgICAgVGhlIHBlbmRpbmcgSFRNTCBhcyBhIGpRdWVyeSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAgICAgICAgICAgVGhlIGlucHV0IGRhdGEgcHJvdmlkZWQgZm9yIHRlbXBsYXRlIHJlbmRlcmluZ1xuICAgICAqL1xuICBzdGF0aWMgUGFyc2VNZXNzYWdlIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICAvLyBAY29jNy5zYW5sb3NzW3Nhbk1heDoxRDYsc2FuTWluOjEsc2FuUmVhc29uOkdob3VscyxkaWZmaWN1bHR5OisrLG1vZGlmaWVyOi0xXXtIYXJkIFNhbiBMb3NzICgtMSkgMS8xRDZ9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpjaGFyYWMsbmFtZTpTVFIsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNUUiBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTphdHRyaWIsbmFtZTpsY2ssZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIGx1Y2sgY2hlY2soLTEpfVxuICAgIC8vIEBjb2M3LmNoZWNrW3R5cGU6c2tpbGwsbmFtZTphbnRocm9wb2xvZ3ksZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIEFudGhyb3BvbG9neSBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpza2lsbCxpY29uOmZhcyBmYS1hcnJvdy1hbHQtY2lyY2xlLXJpZ2h0LG5hbWU6YW50aHJvcG9sb2d5LGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBBbnRocm9wb2xvZ3kgY2hlY2soLTEpfVxuICAgIC8vIEBjb2M3Lml0ZW1bbmFtZTpTaG90Z3VuLGljb246ZmFzIGZhLWJ1bGxzZXllLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17VXNlIHNob3RndW59XG4gICAgLy8gW1RCSV1AY29jNy5kYW1hZ2VbZm9ybXVsYToxRDZde0RhbWFnZSAxRDZ9XG4gICAgLy8gW1RCSV1AY29jNy5yb2xsW3RocmVzaG9sZDo1MF17U2ltcGxlIHJvbGx9XG5cbiAgICBpZiAoIWFwcC5pc0NvbnRlbnRWaXNpYmxlKSByZXR1cm5cblxuICAgIGlmIChkYXRhLm1lc3NhZ2UuY29udGVudC50b0xvY2FsZUxvd2VyQ2FzZSgpLmluY2x1ZGVzKCdAY29jNycpKSB7XG4gICAgICBjb25zdCBwYXJzZWRDb250ZW50ID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGRhdGEubWVzc2FnZS5jb250ZW50KVxuICAgICAgaHRtbC5maW5kKCcubWVzc2FnZS1jb250ZW50JykuaHRtbChwYXJzZWRDb250ZW50KVxuICAgICAgZGF0YS5tZXNzYWdlLmNvbnRlbnQgPSBwYXJzZWRDb250ZW50XG4gICAgfVxuICAgIHJldHVybiB0cnVlIC8vIGFsbG93IG1lc3NhZ2UgdG8gYmUgcHVibGlzaGVkICFcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZHVwbGljYXRlLCBnYW1lLCBnZXRQcm9wZXJ0eSwgSXRlbSwgUm9sbCwgVGV4dEVkaXRvciwgVG9rZW4sIHVpLCBmcm9tVXVpZCAqL1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4uL2FwcHMvY29jNy1wYXJzZXIuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQ0lERWRpdG9yIH0gZnJvbSAnLi4vYXBwcy9jb2MtaWQtZWRpdG9yLmpzJ1xuXG4vKipcbiAqIE92ZXJyaWRlIGFuZCBleHRlbmQgdGhlIGJhc2ljIDpjbGFzczpgSXRlbWAgaW1wbGVtZW50YXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdJdGVtIGV4dGVuZHMgSXRlbSB7XG4gIC8qKiBDcmVhdGUgZGVyaXZlZCBkb2N1bWVudCBjbGFzc2VzIGZvciBzcGVjaWZpYyBJdGVtIHR5cGVzICovXG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgLyoqIEBzZWUgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzIGluIG1vZHVsZS9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMgKi9cbiAgICBpZiAoZGF0YS50eXBlIGluIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3NlcyAmJiAhY29udGV4dD8uZXh0ZW5kZWQpIHtcbiAgICAgIC8qKlxuICAgICAgICogV2hlbiB0aGUgY29uc3RydWN0b3IgZm9yIHRoZSBuZXcgY2xhc3Mgd2lsbCBjYWxsIGl0J3Mgc3VwZXIoKSxcbiAgICAgICAqIHRoZSBleHRlbmRlZCBmbGFnIHdpbGwgYmUgdHJ1ZSwgdGh1cyBieXBhc3NpbmcgdGhpcyB3aG9sZSBwcm9jZXNzXG4gICAgICAgKiBhbmQgcmVzdW1lIGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAqL1xuICAgICAgcmV0dXJuIG5ldyBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXNbZGF0YS50eXBlXShkYXRhLCB7XG4gICAgICAgIC4uLnsgZXh0ZW5kZWQ6IHRydWUgfSxcbiAgICAgICAgLi4uY29udGV4dFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9za2lsbHMuc3ZnJ1xuICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzdGF0dXMnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9hdXJhLnN2ZydcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvc3dvcmQuc3ZnJ1xuICAgICAgfVxuICAgIH1cbiAgICAvKiogRGVmYXVsdCBiZWhhdmlvciwganVzdCBjYWxsIHN1cGVyKCkgYW5kIGRvIGFsbCB0aGUgZGVmYXVsdCBJdGVtIGluaXRzICovXG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIGFzeW5jIF9jcmVhdGVEb2N1bWVudExpbmsgKGV2ZW50RGF0YSwgeyByZWxhdGl2ZVRvLCBsYWJlbCB9ID0ge30pIHtcbiAgICBpZiAodHlwZW9mIGV2ZW50RGF0YS50eXBlID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgZXZlbnREYXRhLnV1aWQgPT09ICdzdHJpbmcnICYmIGV2ZW50RGF0YS50eXBlID09PSAnSXRlbScgJiYgZXZlbnREYXRhLnV1aWQubWF0Y2goL15BY3RvclxcLi8pICYmIHJlbGF0aXZlVG8gaW5zdGFuY2VvZiBDT05GSUcuSm91cm5hbEVudHJ5UGFnZS5kb2N1bWVudENsYXNzKSB7XG4gICAgICAvLyBJZiBkcm9wcGluZyBhIHNraWxsL3dlYXBvbiBmcm9tIGFuIEFjdG9yIG9udG8gYSBKb3VybmFsIEVudHJ5IFBhZ2UgY29udmVydCB0byBhIGNoZWNrIGxpbmtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCBmcm9tVXVpZChldmVudERhdGEudXVpZClcbiAgICAgIGlmIChbJ3NraWxsJywgJ3dlYXBvbiddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgcmV0dXJuICdAY29jNy5jaGVja1t0eXBlOicgKyBpdGVtLnR5cGUgKyAnLG5hbWU6JyArIGl0ZW0ubmFtZSArICddJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuX2NyZWF0ZURvY3VtZW50TGluayhldmVudERhdGEsIHsgcmVsYXRpdmVUbywgbGFiZWwgfSlcbiAgfVxuXG4gIHN0YXRpYyBnZXQgaWNvbkxhbmd1YWdlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2tpbGxzL2xhbmd1YWdlLnN2ZydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZmxhZ3MgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBtYWxmdW5jdGlvbjogJ21hbGZjJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgb24gb2YgdGhlIGl0ZW0gcHJvcGVydHkgaW4gZGF0YS5kYXRhLnByb3BlcnRpZXNcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5SWQgOiBuYW1lIGZvciB0aGUgcHJvcGVydHkgdG8gdG9nZ2xlXG4gICAqL1xuICBhc3luYyB0b2dnbGVQcm9wZXJ0eSAocHJvcGVydHlJZCwgb3ZlcnJpZGUgPSBmYWxzZSkge1xuICAgIGxldCBjaGVja2VkUHJvcHMgPSB7fVxuICAgIGxldCBmaWdodGluZ1xuICAgIGxldCBmaXJlYXJtc1xuICAgIGlmICh0eXBlb2YgQ09DNy5lcmFzW3Byb3BlcnR5SWRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIENvQ0lERWRpdG9yLmVyYVRvZ2dsZSh0aGlzLCBwcm9wZXJ0eUlkKVxuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAnd2VhcG9uJyAmJiAhb3ZlcnJpZGUpIHtcbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnYWhkYicpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmFoZGIpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWhkYic6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWRkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5haGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdhZGRiJykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuYWRkYikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5hZGRiJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5haGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFkZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3Nob3RndW4nKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bic6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UuZXh0cmVtZS52YWx1ZSc6IG51bGwsXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogbnVsbCxcbiAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UubG9uZy52YWx1ZSc6IG51bGwsXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmxvbmcuZGFtYWdlJzogbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ21lbGVlJyB8fCBwcm9wZXJ0eUlkID09PSAncm5nZCcpIHtcbiAgICAgICAgbGV0IG1lbGVlV2VhcG9uXG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnICYmICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdtZWxlZScgJiYgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3JuZ2QnICYmICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdybmdkJyAmJiB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVsZWVXZWFwb24pIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMubWVsZWUnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYnJzdCc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmF1dG8nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5kYnJsJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucm5nZCc6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3NraWxsJyAmJiAhb3ZlcnJpZGUpIHtcbiAgICAgIGxldCBtb2RpZiA9IGZhbHNlXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2NvbWJhdCcpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCkge1xuICAgICAgICAgIC8vIENsb3NlIGNvbWJhdCBieSBkZWZhdWx0XG4gICAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgICAgIGZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBmaXJlYXJtcyA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5zcGVjaWFsaXphdGlvbic6ICcnLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2ZpZ2h0aW5nJykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcpIHtcbiAgICAgICAgICBmaXJlYXJtcyA9IGZhbHNlXG4gICAgICAgICAgZmlnaHRpbmcgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmlyZWFybXMgPSB0cnVlXG4gICAgICAgICAgZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2ZpcmVhcm0nKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgICAgZmlyZWFybXMgPSB0cnVlXG4gICAgICAgICAgZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpcmVhcm1zID0gZmFsc2VcbiAgICAgICAgICBmaWdodGluZyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBtb2RpZiA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKG1vZGlmKSB7XG4gICAgICAgIC8vIHNldCBzcGVjaWFsaXNhdGlvbiBpZiBmaWdodGluZyBvciBmaXJlYXJtXG4gICAgICAgIGlmIChmaWdodGluZykge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uc2tpbGxOYW1lLFxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUpXG4gICAgICAgICAgKVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZWFybXMpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLnNraWxsTmFtZSxcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUpXG4gICAgICAgICAgKVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9wZXJ0eUlkID09PSAnc3BlY2lhbCcpIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW3Byb3BlcnR5SWRdKSB7XG4gICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0uc3BlY2lhbGl6YXRpb24nOiAnJyxcbiAgICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyB0aGlzLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyhjaGVja2VkUHJvcHMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB0aGlzLnVwZGF0ZShjaGVja2VkUHJvcHMpXG4gICAgICByZXR1cm4gaXRlbVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcm9wTmFtZSA9IGBzeXN0ZW0ucHJvcGVydGllcy4ke3Byb3BlcnR5SWR9YFxuICAgICAgY29uc3QgcHJvcFZhbHVlID0gIXRoaXMuc3lzdGVtLnByb3BlcnRpZXNbcHJvcGVydHlJZF1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW3Byb3BOYW1lXTogcHJvcFZhbHVlIH0pLnRoZW4oaXRlbSA9PiB7XG4gICAgICAgIHJldHVybiBpdGVtXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGhhc1Byb3BlcnR5IChwcm9wZXJ0eUlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNJbmNsdWRlZEluU2V0KCdwcm9wZXJ0aWVzJywgcHJvcGVydHlJZClcbiAgfVxuXG4gIGdldCBzaG9ydE5hbWUgKCkge1xuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnN5c3RlbS5za2lsbE5hbWVcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubmFtZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xuICAgIGlmICgndXBkYXRlUm9sbCcgaW4gdGhpcy5zaGVldCkgcmV0dXJuIGF3YWl0IHRoaXMuc2hlZXQudXBkYXRlUm9sbChyb2xsKVxuICAgIGVsc2UgaWYgKCd1cGRhdGVSb2xsJyBpbiB0aGlzKSByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVSb2xsKHJvbGwpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc3RhdGljIGdldE5hbWVQYXJ0c1NwZWMgKHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24pIHtcbiAgICBpZiAoIXNwZWNpYWxpemF0aW9uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBza2lsbE5hbWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uOiAnJyxcbiAgICAgICAgc2tpbGxOYW1lXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNwZWNOYW1lUmVnZXggPSBuZXcgUmVnRXhwKFxuICAgICAgJ14oJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoc3BlY2lhbGl6YXRpb24pICsgJylcXFxccypcXFxcKCguKylcXFxcKSQnLFxuICAgICAgJ2knXG4gICAgKVxuICAgIGNvbnN0IG1hdGNoID0gc2tpbGxOYW1lLm1hdGNoKHNwZWNOYW1lUmVnZXgpXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBzcGVjaWFsaXphdGlvbiA9IG1hdGNoWzFdXG4gICAgICBza2lsbE5hbWUgPSBtYXRjaFsyXVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknLFxuICAgICAgc3BlY2lhbGl6YXRpb24sXG4gICAgICBza2lsbE5hbWVcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0TmFtZVdpdGhvdXRTcGVjIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBDb0M3SXRlbSkge1xuICAgICAgaWYgKGl0ZW0uc3lzdGVtPy5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmIHR5cGVvZiBpdGVtLnN5c3RlbS5za2lsbE5hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBpdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGl0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCAmJiB0eXBlb2YgaXRlbS5za2lsbE5hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBpdGVtLnNraWxsTmFtZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXRlbS5uYW1lXG4gIH1cblxuICBzdGF0aWMgaXNBbnlTcGVjIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0udHlwZSAhPT0gJ3NraWxsJyB8fCAhaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucGlja25hbWVvbmx5KSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gW1xuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJykudG9Mb3dlckNhc2UoKSxcbiAgICAgICdhbnknXG4gICAgXS5pbmNsdWRlcyhDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMuc2tpbGwuZ3Vlc3NOYW1lUGFydHMoaXRlbS5uYW1lKS5za2lsbE5hbWUudG9Mb3dlckNhc2UoKSlcbiAgfVxuXG4gIGFzeW5jIGNoZWNrU2tpbGxQcm9wZXJ0aWVzICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm5cbiAgICBjb25zdCBjaGVja2VkUHJvcHMgPSB7fVxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCkge1xuICAgICAgLy8gaWYgc2tpbGwgaXMgbm90IGEgc3BlY2lhbGlzYXRpb24gbWFrZSBpdCBhIHNwZWNpYWxpc2F0aW9uXG4gICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwgPSB0cnVlXG4gICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCddID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBza2lsbCBpcyBjb21iYXQgc2tpbGwgYW5kIG5vIHNwZWNpYWxpc2F0aW9uIHNldCB0aGVuIG1ha2UgaXQgYSBmaWdodGluZyggY2xvc2Vjb21iYXQpIHNraWxsXG4gICAgICBpZiAoXG4gICAgICAgICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nICYmXG4gICAgICAgICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm1cbiAgICAgICkge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJ10gPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHNraWxsIGlzIGNsb3NlIGNvbWJhdCB3aXRob3V0IHNwZWNpYWxpc2F0aW9uIG5hbWUgbWFrZSBzZXQgaXQgYWNjb3JkaW5nIHRvIHRoZSBmaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nICYmXG4gICAgICAgICghdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gfHwgdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPT09ICcnKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICAvLyBpZiBza2lsbCBpcyByYW5nZSBjb21iYXQgd2l0aG91dCBhIHNwZWNpYWxpc2F0aW9uIG5hbWUgbWFrZSBzZXQgaXQgYWNjb3JkaW5nIHRvIHRoZSBmaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSAmJlxuICAgICAgICAoIXRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uIHx8IHRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uID09PSAnJylcbiAgICAgICkge1xuICAgICAgICB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJ10gPSBmYWxzZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gPSBmYWxzZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nXSA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKGNoZWNrZWRQcm9wcykubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoY2hlY2tlZFByb3BzKVxuICAgIH1cblxuICAgIHJldHVybiBjaGVja2VkUHJvcHNcbiAgfVxuXG4gIGlzSW5jbHVkZWRJblNldCAoc2V0LCBwcm9wZXJ0eUlkKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbVtzZXRdKSB0aGlzLnN5c3RlbVtzZXRdID0gW11cbiAgICBjb25zdCBwcm9wZXJ0eUluZGV4ID0gdGhpcy5zeXN0ZW1bc2V0XS5pbmRleE9mKHByb3BlcnR5SWQpXG4gICAgaWYgKHByb3BlcnR5SW5kZXggPiAtMSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIGZsYWdGb3JEZXZlbG9wZW1lbnQgKCkge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmRldmVsb3BlbWVudCc6IHRydWUgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyB1bmZsYWdGb3JEZXZlbG9wZW1lbnQgKCkge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmRldmVsb3BlbWVudCc6IGZhbHNlIH0pXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRldmVsb3BlbWVudEZsYWcgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEl0ZW1GbGFnKCdkZXZlbG9wZW1lbnQnKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlSXRlbUZsYWcgKGZsYWdOYW1lLCBlcmFzZUFkanVzdG1lbnQgPSB0cnVlKSB7XG4gICAgY29uc3QgZmxhZ1ZhbHVlID0gIXRoaXMuZ2V0SXRlbUZsYWcoZmxhZ05hbWUpXG4gICAgY29uc3QgbmFtZSA9IGBzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXG4gICAgaWYgKFxuICAgICAgKGZsYWdOYW1lID09PSAnb2NjdXBhdGlvbicgfHwgZmxhZ05hbWUgPT09ICdhcmNoZXR5cGUnKSAmJlxuICAgICAgIWZsYWdWYWx1ZSAmJlxuICAgICAgZXJhc2VBZGp1c3RtZW50XG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgIFtgc3lzdGVtLmFkanVzdG1lbnRzLiR7ZmxhZ05hbWV9YF06IG51bGwsXG4gICAgICAgIFtuYW1lXTogZmxhZ1ZhbHVlXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoZmxhZ05hbWUgPT09ICdkZXZlbG9wZW1lbnQnKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IGZsYWdWYWx1ZSB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbFhwR2FpbkRpc2FibGVkJykpXG4gICAgICB9XG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIHNldEl0ZW1GbGFnIChmbGFnTmFtZSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXTogdHJ1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdW5zZXRJdGVtRmxhZyAoZmxhZ05hbWUsIGVyYXNlQWRqdXN0bWVudCA9IHRydWUpIHtcbiAgICBjb25zdCBuYW1lID0gYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBcbiAgICBpZiAoXG4gICAgICAoZmxhZ05hbWUgPT09ICdvY2N1cGF0aW9uJyB8fCBmbGFnTmFtZSA9PT0gJ2FyY2hldHlwZScpICYmXG4gICAgICBlcmFzZUFkanVzdG1lbnRcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgW2BzeXN0ZW0uYWRqdXN0bWVudHMuJHtmbGFnTmFtZX1gXTogbnVsbCxcbiAgICAgICAgW25hbWVdOiBmYWxzZVxuICAgICAgfSlcbiAgICB9IGVsc2UgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IGZhbHNlIH0pXG4gIH1cblxuICBnZXRJdGVtRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlXG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV0pIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGdldCB1c2VzQWx0ZXJuYXRpdmVTa2lsbCAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMudHlwZSA9PT0gJ3dlYXBvbicgJiZcbiAgICAgICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzPy5hdXRvID09PSB0cnVlIHx8XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXM/LmJyc3QgPT09IHRydWUgfHxcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcz8udGhyb3duID09PSB0cnVlKVxuICAgIClcbiAgfVxuXG4gIGdldCBtYXhVc2VzUGVyUm91bmQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IG11bHRpU2hvdCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXgpXG4gICAgaWYgKGlzTmFOKG11bHRpU2hvdCkpIHJldHVybiAwXG4gICAgcmV0dXJuIG11bHRpU2hvdFxuICB9XG5cbiAgZ2V0IHVzZXNQZXJSb3VuZCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3Qgc2luZ2xlU2hvdCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5ub3JtYWwpXG4gICAgaWYgKGlzTmFOKHNpbmdsZVNob3QpKSByZXR1cm4gMFxuICAgIHJldHVybiBzaW5nbGVTaG90XG4gIH1cblxuICBnZXQgdXNlc1BlclJvdW5kU3RyaW5nICgpIHtcbiAgICBsZXQgdXNlc1BlclJvdW5kXG4gICAgaWYgKHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5ub3JtYWwpIHtcbiAgICAgIHVzZXNQZXJSb3VuZCA9IHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5ub3JtYWxcbiAgICB9IGVsc2Uge1xuICAgICAgdXNlc1BlclJvdW5kID0gJzEnXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubWF4KSB7XG4gICAgICB1c2VzUGVyUm91bmQgKz0gYCgke3RoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXh9KWBcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuYXV0bykge1xuICAgICAgdXNlc1BlclJvdW5kICs9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQXV0bycpfWBcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuYnJzdCkge1xuICAgICAgdXNlc1BlclJvdW5kICs9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQnJzdCcpfWBcbiAgICAgIGlmICh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpIHtcbiAgICAgICAgdXNlc1BlclJvdW5kICs9IGAoJHt0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3R9KWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXNlc1BlclJvdW5kXG4gIH1cblxuICBnZXQgbXVsdGlwbGVTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMubWF4VXNlc1BlclJvdW5kIDw9IDEpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IHNpbmdsZVNob3QgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy51c2VzUGVyUm91bmQpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IGJhc2VSYW5nZSAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLnJhbmdlLm5vcm1hbC52YWx1ZSlcbiAgfVxuXG4gIGdldCBsb25nUmFuZ2UgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5yYW5nZS5sb25nLnZhbHVlKVxuICB9XG5cbiAgZ2V0IGV4dHJlbWVSYW5nZSAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLnJhbmdlLmV4dHJlbWUudmFsdWUpXG4gIH1cblxuICBnZXQgc2tpbGxQcm9wZXJ0aWVzICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gW11cblxuICAgIGNvbnN0IHNraWxsUHJvcGVydGllcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlKSB7XG4gICAgICAgIHNraWxsUHJvcGVydGllcy5wdXNoKGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBza2lsbFByb3BlcnRpZXNcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjYWxjdWxhdGVCYXNlIChhY3RvciwgZGF0YSkge1xuICAgIGlmIChkYXRhLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBudWxsXG4gICAgaWYgKFN0cmluZyhkYXRhLnN5c3RlbS5iYXNlKS5pbmNsdWRlcygnQCcpKSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSB7fVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQpKSB7XG4gICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuYWN0b3IuJykpIHtcbiAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBnZXRQcm9wZXJ0eShhY3RvciwgdmFsdWUuc3Vic3RyaW5nKDExKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHZhbHVlXG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgbmV3IFJvbGwoZGF0YS5zeXN0ZW0uYmFzZSwgcGFyc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgICAgIH0pLnRvdGFsXG4gICAgICAgIClcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB2YWx1ZSA9IDBcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH1cbiAgICByZXR1cm4gIWlzTmFOKHBhcnNlSW50KGRhdGEuc3lzdGVtLmJhc2UpKSA/IHBhcnNlSW50KGRhdGEuc3lzdGVtLmJhc2UpIDogbnVsbFxuICB9XG5cbiAgZ2V0IF9iYXNlICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gW251bGwsIGZhbHNlXVxuICAgIGlmICh0eXBlb2YgdGhpcy5zeXN0ZW0uYmFzZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbdGhpcy5zeXN0ZW0uYmFzZSwgZmFsc2VdXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3lzdGVtLmJhc2UuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZ2V0UHJvcGVydHkodGhpcywgdmFsdWUuc3Vic3RyaW5nKDUpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgdmFsdWVcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhbHVlID0gTWF0aC5mbG9vcihcbiAgICAgICAgICBuZXcgUm9sbCh0aGlzLnN5c3RlbS5iYXNlLCBwYXJzZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICAgICAgfSkudG90YWxcbiAgICAgICAgKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHZhbHVlID0gMFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gW3ZhbHVlLCB0cnVlXVxuICAgIH1cbiAgICByZXR1cm4gW1xuICAgICAgIWlzTmFOKHBhcnNlSW50KHRoaXMuc3lzdGVtLmJhc2UpKVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmJhc2UpXG4gICAgICAgIDogbnVsbCxcbiAgICAgIGZhbHNlXG4gICAgXVxuICB9XG5cbiAgYXN5bmMgYXN5bmNCYXNlICgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5fYmFzZVxuICAgIGlmIChlWzFdKSB7XG4gICAgICBjb25zb2xlLmluZm8oXG4gICAgICAgIGBbQ09DN10gKCR7dGhpcy5wYXJlbnQ/Lm5hbWV9KSBFdmFsdWF0aW5nIHNraWxsICR7dGhpcy5uYW1lfToke3RoaXMuc3lzdGVtLmJhc2V9IHRvICR7ZVswXX1gXG4gICAgICApXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmFzZSc6IGVbMF0gfSlcbiAgICB9XG4gICAgcmV0dXJuIGVbMF1cbiAgfVxuXG4gIGdldCBiYXNlICgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5fYmFzZVxuICAgIGlmIChlWzFdKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmFzZSc6IGVbMF0gfSlcbiAgICB9XG4gICAgcmV0dXJuIGVbMF1cbiAgfVxuXG4gIGdldEJ1bGxldExlZnQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5zeXN0ZW0uYW1tbykge1xuICAgICAgdGhpcy5zZXRCdWxsZXRzKDApXG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYW1tb1xuICB9XG5cbiAgYXN5bmMgcmVsb2FkICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBtYXhCdWxsZXQgPSB0aGlzLnN5c3RlbS5idWxsZXRzXG4gICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmJ1bGxldHMpXG4gICAgICA6IDFcbiAgICBhd2FpdCB0aGlzLnNldEJ1bGxldHMobWF4QnVsbGV0KVxuICB9XG5cbiAgYXN5bmMgc2V0QnVsbGV0cyAoYnVsbGV0cykge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hbW1vJzogYnVsbGV0cyB8fCAwIH0pXG4gIH1cblxuICBhc3luYyBhZGRCdWxsZXQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGJ1bGxldHMgPSBhd2FpdCB0aGlzLmdldEJ1bGxldExlZnQoKVxuICAgIGNvbnN0IG1heEJ1bGxldHMgPSB0aGlzLnN5c3RlbS5idWxsZXRzXG4gICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmJ1bGxldHMpXG4gICAgICA6IDFcbiAgICBpZiAoYnVsbGV0cyArIDEgPj0gbWF4QnVsbGV0cykgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKG1heEJ1bGxldHMpXG4gICAgZWxzZSBhd2FpdCB0aGlzLnNldEJ1bGxldHMoYnVsbGV0cyArIDEpXG4gIH1cblxuICBhc3luYyBzaG9vdEJ1bGxldHMgKHgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBidWxsZXRzID0gYXdhaXQgdGhpcy5nZXRCdWxsZXRMZWZ0KClcbiAgICBpZiAoeCA+IGJ1bGxldHMpIGF3YWl0IHRoaXMuc2V0QnVsbGV0cygwKVxuICAgIGVsc2UgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKGJ1bGxldHMgLSB4KVxuICB9XG5cbiAgc3RhdGljIG1lcmdlT3B0aW9uYWxTa2lsbHMgKHNraWxsTGlzdCwgb3B0aW9ucykge1xuICAgIGNvbnN0IGpvaW50QXJyYXkgPSBza2lsbExpc3QuY29uY2F0KG9wdGlvbnMpXG4gICAgcmV0dXJuIGpvaW50QXJyYXlcbiAgICAgIC5yZWR1Y2UoKG5ld0FycmF5LCBpdGVtKSA9PiB7XG4gICAgICAgIC8vIElmIHNraWxsIGlzIG5vdCBhIGdlbmVyaWMgc3BlYyBhbmQgaXMgYWxyZWFkeSBpbmNsdWRlZCB3ZSBkb24ndCBhZGQgaXRlbVxuICAgICAgICBpZiAoXG4gICAgICAgICAgIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSAmJlxuICAgICAgICAgIG5ld0FycmF5LmZpbmQoc2tpbGwgPT4gc2tpbGwubmFtZSA9PT0gaXRlbS5uYW1lKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gbmV3QXJyYXlcbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIGl0ZW0gaXMgYWRkZWRcbiAgICAgICAgcmV0dXJuIFsuLi5uZXdBcnJheSwgaXRlbV1cbiAgICAgIH0sIFtdKVxuICAgICAgLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICB9XG5cbiAgLyoqIFRPRE8gOiByaWVuIGEgZmFpcmUgaWNpICEhXG4gICAqIEdldCB0aGUgQWN0b3Igd2hpY2ggaXMgdGhlIGF1dGhvciBvZiBhIGNoYXQgY2FyZFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICAgIFRoZSBjaGF0IGNhcmQgYmVpbmcgdXNlZFxuICAgKiBAcmV0dXJuIHtBY3RvcnxudWxsfSAgICAgICAgIFRoZSBBY3RvciBlbnRpdHkgb3IgbnVsbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9nZXRDaGF0Q2FyZEFjdG9yIChjYXJkKSB7XG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgY29uc3QgdG9rZW5LZXkgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgIGlmICh0b2tlbktleSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gdG9rZW5LZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZCkgfHwgbnVsbFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIENoYXQgTWVzc2FnZSBIZWxwZXJzICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogUHJlcGFyZSBhbiBvYmplY3Qgb2YgY2hhdCBkYXRhIHVzZWQgdG8gZGlzcGxheSBhIGNhcmQgZm9yIHRoZSBJdGVtIGluIHRoZSBjaGF0IGxvZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gaHRtbE9wdGlvbnMgICAgT3B0aW9ucyB1c2VkIGJ5IHRoZSBUZXh0RWRpdG9yLmVucmljaEhUTUwgZnVuY3Rpb25cbiAgICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgICAgICAgIEFuIG9iamVjdCBvZiBjaGF0IGRhdGEgdG8gcmVuZGVyXG4gICAqL1xuICBnZXRDaGF0RGF0YSAoaHRtbE9wdGlvbnMgPSB7fSkge1xuICAgIC8vIEZvdW5kcnlWVFQgdjEwXG4gICAgaHRtbE9wdGlvbnMuYXN5bmMgPSBmYWxzZVxuICAgIGNvbnN0IGRhdGEgPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0pXG4gICAgLy8gRml4IDogZGF0YSBjYW4gaGF2ZSBkZXNjcmlwdGlvbiBkaXJlY3RseSBpbiBmaWVsZCwgbm90IHVuZGVyIHZhbHVlLlxuICAgIGlmICh0eXBlb2YgZGF0YS5kZXNjcmlwdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSB7XG4gICAgICAgIHZhbHVlOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICBzcGVjaWFsOiAnJ1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gJydcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSAnJ1xuICAgIH1cbiAgICBjb25zdCBsYWJlbHMgPSBbXVxuXG4gICAgLy8gUmljaCB0ZXh0IGRlc2NyaXB0aW9uXG4gICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICBodG1sT3B0aW9uc1xuICAgIClcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGRhdGEuZGVzY3JpcHRpb24udmFsdWUpXG4gICAgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsLFxuICAgICAgaHRtbE9wdGlvbnNcbiAgICApXG4gICAgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbClcblxuICAgIC8vIEl0ZW0gdHlwZSBzcGVjaWZpYyBwcm9wZXJ0aWVzXG4gICAgY29uc3QgcHJvcHMgPSBbXVxuICAgIGNvbnN0IGZuID0gdGhpc1tgXyR7dGhpcy50eXBlfUNoYXREYXRhYF1cbiAgICBpZiAoZm4pIGZuLmJpbmQodGhpcykoZGF0YSwgbGFiZWxzLCBwcm9wcywgaHRtbE9wdGlvbnMpXG5cbiAgICBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZSkgcHJvcHMucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgcHJvcGVydGllcyBhbmQgcmV0dXJuXG4gICAgZGF0YS5wcm9wZXJ0aWVzID0gcHJvcHMuZmlsdGVyKHAgPT4gISFwKVxuICAgIGRhdGEubGFiZWxzID0gbGFiZWxzXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIF93ZWFwb25DaGF0RGF0YSAoZGF0YSwgbGFiZWxzLCBwcm9wcykge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHByb3BzLnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgbGV0IHNraWxsTGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGwnKVxuICAgIGxldCBza2lsbE5hbWUgPSAnJ1xuICAgIGxldCBmb3VuZCA9IGZhbHNlXG4gICAgaWYgKHRoaXMuc3lzdGVtLnNraWxsLm1haW4uaWQpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbClcbiAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXNlc0FsdGVybmF0aXZlU2tpbGwgJiYgdGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxMYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbHMnKVxuICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5pdGVtcy5nZXQodGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZClcbiAgICAgIGlmIChza2lsbCkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke0NvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbCl9YFxuICAgICAgICBmb3VuZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWZvdW5kKSB7XG4gICAgICBza2lsbE5hbWUgPSB0aGlzLnN5c3RlbS5za2lsbC5tYWluLm5hbWVcbiAgICAgIGlmICh0aGlzLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHRoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke3RoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZX1gXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNraWxsTmFtZSkge1xuICAgICAgbGFiZWxzLnB1c2goe1xuICAgICAgICBuYW1lOiBza2lsbExhYmVsLFxuICAgICAgICB2YWx1ZTogc2tpbGxOYW1lXG4gICAgICB9KVxuICAgIH1cblxuICAgIGxhYmVscy5wdXNoKHtcbiAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25Vc2VzUGVyUm91bmQnKSxcbiAgICAgIHZhbHVlOiB0aGlzLnVzZXNQZXJSb3VuZFN0cmluZ1xuICAgIH0pXG5cbiAgICBsYWJlbHMucHVzaCh7XG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uTWFsZnVuY3Rpb24nKSxcbiAgICAgIHZhbHVlOiB0aGlzLnN5c3RlbS5tYWxmdW5jdGlvbiA/IHRoaXMuc3lzdGVtLm1hbGZ1bmN0aW9uIDogJy0nXG4gICAgfSlcblxuICAgIGlmICh0aGlzLnN5c3RlbS5idWxsZXRzKSB7XG4gICAgICBsYWJlbHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25CdWxsZXRzSW5NYWcnKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY2FuQmVQdXNoZWQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgPT09ICdza2lsbCcgJiYgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5wdXNoKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGltcGFsZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuaW1wbFxuICB9XG5cbiAgZ2V0IGlzRG9kZ2UgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRvZGdlJykudG9Mb3dlckNhc2UoKVxuICAgIClcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEFjdG9yLCBBdWRpb0hlbHBlciwgQ2hhdE1lc3NhZ2UsIENPTkZJRywgQ09OU1QsIGR1cGxpY2F0ZSwgZm91bmRyeSwgZnJvbVV1aWQsIGdhbWUsIGdldENvbXB1dGVkU3R5bGUsIEl0ZW0sIG1lcmdlT2JqZWN0LCByZW5kZXJUZW1wbGF0ZSwgVG9rZW4sIHVpICovXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4vZGljZS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGVjayB7XG4gIGNvbnN0cnVjdG9yIChcbiAgICBhY3RvciA9IG51bGwsXG4gICAgc2tpbGwgPSBudWxsLFxuICAgIGl0ZW0gPSBudWxsLFxuICAgIGRpY2VNb2QgPSAwLFxuICAgIGRpZmZpY3VsdHkgPSBudWxsLFxuICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDAsXG4gICAgZmxhdERpY2VNb2RpZmllciA9IDBcbiAgKSB7XG4gICAgdGhpcy5hY3RvciA9IGFjdG9yXG4gICAgdGhpcy5za2lsbCA9IHNraWxsXG4gICAgdGhpcy5pdGVtID0gaXRlbVxuICAgIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICB0aGlzLnJhd1ZhbHVlID0gMCAvLyB2YWx1ZSBuZWVkZWQgYmVmb3JlIGRpZmZpY3VsdHlcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IG51bGxcbiAgICB0aGlzLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnB1c2hpbmcgPSBmYWxzZVxuICAgIHRoaXMuZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuXG4gICAgaWYgKGRpZmZpY3VsdHkgPT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGlzVW5rbm93biA9XG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nXG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBpc1Vua25vd25cbiAgICAgICAgPyBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd25cbiAgICAgICAgOiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGNhcmRUeXBlICgpIHtcbiAgICByZXR1cm4gJ3JvbGxDYXJkJ1xuICB9XG5cbiAgc3RhdGljIGdldCBkaWZmaWN1bHR5TGV2ZWwgKCkge1xuICAgIHJldHVybiB7XG4gICAgICB1bmtub3duOiAtMSxcbiAgICAgIHJlZ3VsYXI6IDEsXG4gICAgICBoYXJkOiAyLFxuICAgICAgZXh0cmVtZTogMyxcbiAgICAgIGNyaXRpY2FsOiA0LFxuICAgICAgaW1wb3NzaWJsZTogOVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZnVtYmxlOiAtOTksXG4gICAgICBmYWlsdXJlOiAwLFxuICAgICAgcmVndWxhcjogMSxcbiAgICAgIGhhcmQ6IDIsXG4gICAgICBleHRyZW1lOiAzLFxuICAgICAgY3JpdGljYWw6IDRcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHR5cGUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjaGFyYWN0ZXJpc3RpYzogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgIGF0dHJpYnV0ZTogJ2F0dHJpYnV0ZScsXG4gICAgICBza2lsbDogJ2l0ZW0nLFxuICAgICAgaXRlbTogJ2l0ZW0nLFxuICAgICAgdmFsdWU6ICd2YWx1ZSdcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZGlmZmljdWx0eVN0cmluZyAoZGlmZmljdWx0eUxldmVsKSB7XG4gICAgc3dpdGNoIChcbiAgICAgICFpc05hTihOdW1iZXIoZGlmZmljdWx0eUxldmVsKSlcbiAgICAgICAgPyBOdW1iZXIoZGlmZmljdWx0eUxldmVsKVxuICAgICAgICA6IGRpZmZpY3VsdHlMZXZlbFxuICAgICkge1xuICAgICAgY2FzZSAnPyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxuICAgICAgY2FzZSAnKyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgY2FzZSAnKysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysrKyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93bjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Vbmtub3duRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgZ2V0IHJhd1ZhbHVlICgpIHtcbiAgICAvLyBpZiAoIXRoaXMuYWN0b3IgfHwgIXRoaXMuYWN0b3IuaWQpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoIXRoaXMuX3Jhd1ZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICB0aGlzLnJhd1ZhbHVlID1cbiAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10udmFsdWVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNraWxsKSB0aGlzLnJhd1ZhbHVlID0gdGhpcy5za2lsbC52YWx1ZVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5fcmF3VmFsdWUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgJiZcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgKSB7XG4gICAgICAgIGlmICh0aGlzLl9yYXdWYWx1ZSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyIDwgMSkgcmV0dXJuIDFcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgcmF3VmFsdWUgKHgpIHtcbiAgICB0aGlzLl9yYXdWYWx1ZSA9IHhcbiAgfVxuXG4gIHNldCB1dWlkICh4KSB7XG4gICAgdGhpcy5fdXVpZCA9IHhcbiAgfVxuXG4gIGdldCB1dWlkICgpIHtcbiAgICBpZiAoIXRoaXMuX3V1aWQpIHRoaXMuX3V1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgIHJldHVybiB0aGlzLl91dWlkXG4gIH1cblxuICBnZXQgaGFzQ2FyZCAoKSB7XG4gICAgY29uc3QgY2hhdENhcmQgPSB1aS5jaGF0LmNvbGxlY3Rpb24uZmlsdGVyKG1lc3NhZ2UgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy51dWlkID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndXVpZCcpICYmXG4gICAgICAgIENvQzdDaGVjay5jYXJkVHlwZSA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3R5cGUnKVxuICAgICAgKVxuICAgIH0pXG4gICAgaWYgKGNoYXRDYXJkLmxlbmd0aCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgcmF3VmFsdWVTdHJpbmcgKCkge1xuICAgIGlmICghdGhpcy5fcmF3VmFsdWUpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoXG4gICAgICB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICkge1xuICAgICAgaWYgKHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyIDwgMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICAgIH1cbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuX3Jhd1ZhbHVlLnRvU3RyaW5nKCkgKyAnKycgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllci50b1N0cmluZygpXG4gICAgICApXG4gICAgfSBlbHNlIHJldHVybiB0aGlzLl9yYXdWYWx1ZS50b1N0cmluZygpXG4gIH1cblxuICBnZXQgY3JpdGljYWxUaHJlc2hvbGQgKCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBnZXQgcmVndWxhclRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLnJhd1ZhbHVlID49IDEwMCkgcmV0dXJuIDk5XG4gICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5yYXdWYWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBoYXJkVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5yYXdWYWx1ZSAvIDIpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBleHRyZW1lVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5yYXdWYWx1ZSAvIDUpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBmdW1ibGVUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGlmICh0aGlzLmRpZmZpY3VsdHkgPj0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmVtZVRocmVzaG9sZCA8IDUwID8gOTYgOiAxMDBcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRpZmZpY3VsdHkgPj0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGFyZFRocmVzaG9sZCA8IDUwID8gOTYgOiAxMDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucmF3VmFsdWUgPCA1MCA/IDk2IDogMTAwXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc3VjY2VzVGhyZXNob2xkICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lOlxuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93bjpcbiAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5yYXdWYWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHlTdHJpbmcgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc3dpdGNoICh0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWU6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlVua25vd25EaWZmaWN1bHR5JylcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBnZXQgbW9kaWZpZWRSZXN1bHQgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodHlwZW9mIHRoaXMuX21vZGlmaWVkUmVzdWx0ICE9PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXMuX21vZGlmaWVkUmVzdWx0XG4gICAgaWYgKHRoaXMuZmxhdERpY2VNb2RpZmllcikge1xuICAgICAgY29uc3QgbW9kaWZpZWQgPSB0aGlzLmRpY2VzLnRvdGFsICsgdGhpcy5mbGF0RGljZU1vZGlmaWVyXG4gICAgICBpZiAobW9kaWZpZWQgPCAxKSByZXR1cm4gMVxuICAgICAgaWYgKG1vZGlmaWVkID4gMTAwKSByZXR1cm4gMTAwXG4gICAgICByZXR1cm4gbW9kaWZpZWRcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZGljZXMudG90YWxcbiAgfVxuXG4gIHNldCBtb2RpZmllZFJlc3VsdCAoeCkge1xuICAgIHRoaXMuX21vZGlmaWVkUmVzdWx0ID0geFxuICB9XG5cbiAgZ2V0IGZsYXREaWNlTW9kaWZpZXJTdHJpbmcgKCkge1xuICAgIGlmICghdGhpcy5mbGF0RGljZU1vZGlmaWVyKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmZsYXREaWNlTW9kaWZpZXIgPiAwKSByZXR1cm4gYCske3RoaXMuZmxhdERpY2VNb2RpZmllcn1gXG4gICAgcmV0dXJuIHRoaXMuZmxhdERpY2VNb2RpZmllci50b1N0cmluZygpXG4gIH1cblxuICBnZXQgaXNGdW1ibGUgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5tb2RpZmllZFJlc3VsdCA+PSB0aGlzLmZ1bWJsZVRocmVzaG9sZFxuICB9XG5cbiAgZ2V0IGlzQ3JpdGljYWwgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5tb2RpZmllZFJlc3VsdCA9PT0gMVxuICB9XG5cbiAgZ2V0IGlzRXh0cmVtZVN1Y2Nlc3MgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lXG4gIH1cblxuICBnZXQgcGFzc2VkICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMubHVja1NwZW50KSByZXR1cm4gdGhpcy5kaWZmaWN1bHR5IDw9IHRoaXMuc3VjY2Vzc0xldmVsXG4gICAgcmV0dXJuIHRoaXMuc3VjY2VzVGhyZXNob2xkID49IHRoaXMubW9kaWZpZWRSZXN1bHQgfHwgdGhpcy5pc0NyaXRpY2FsXG4gIH1cblxuICBnZXQgZmFpbGVkICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuICF0aGlzLnBhc3NlZFxuICB9XG5cbiAgZ2V0IGlzU2ltcGxlUm9sbCAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLnJhd1ZhbHVlID09PSAndW5kZWZpbmVkJ1xuICB9XG5cbiAgZ2V0IGhhc0JvbnVzICgpIHtcbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIgJiYgdGhpcy5kaWNlTW9kaWZpZXIgPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGhhc1BlbmFsdHkgKCkge1xuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciA8IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaGFzTW9kaWZpZXIgKCkge1xuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciAhPT0gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBkaWNlTW9kaWZpZXIgKCkge1xuICAgIGlmICh0aGlzLl9kaWNlTW9kaWZpZXIpIHJldHVybiB0aGlzLl9kaWNlTW9kaWZpZXJcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc2V0IGRpY2VNb2RpZmllciAoeCkge1xuICAgIHRoaXMuX2RpY2VNb2RpZmllciA9IHBhcnNlSW50KHgpXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5zaG9ydE5hbWVcbiAgICAgIGlmICh0aGlzLml0ZW0pIHJldHVybiB0aGlzLml0ZW0ubmFtZVxuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyh0aGlzLmNoYXJhY3RlcmlzdGljKT8ubGFiZWxcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGUgPT09ICdsY2snKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGUgPT09ICdzYW4nKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc2hvcnROYW1lICgpIHtcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLnNob3J0TmFtZVxuICAgICAgaWYgKHRoaXMuaXRlbSkgcmV0dXJuIHRoaXMuaXRlbS5uYW1lXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHRoaXMuY2hhcmFjdGVyaXN0aWMpPy5zaG9ydFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ2xjaycpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJylcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBmdWxsTmFtZSAoKSB7XG4gICAgY29uc3QgZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLl9kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgPyBmYWxzZVxuICAgICAgICA6IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKHRoaXMuX2RpZmZpY3VsdHkpXG4gICAgY29uc3QgbW9kaWZpZXIgPVxuICAgICAgdGhpcy5fZGljZU1vZGlmaWVyID4gMFxuICAgICAgICA/IGArJHt0aGlzLl9kaWNlTW9kaWZpZXJ9YFxuICAgICAgICA6IHRoaXMuX2RpY2VNb2RpZmllci50b1N0cmluZygpXG4gICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICBgQ29DNy5MaW5rQ2hlY2skeyFkaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcbiAgICAgICAgIXRoaXMuX2RpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ1xuICAgICAgfWAsXG4gICAgICB7IGRpZmZpY3VsdHksIG1vZGlmaWVyLCBuYW1lOiB0aGlzLm5hbWUgfVxuICAgIClcbiAgfVxuXG4gIGdldCByb2xsZWQgKCkge1xuICAgIGlmICh0aGlzLmRpY2UpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgY2hlY2sgZnJvbSBhbiBIVE1MRWxlbWVudCBvciBhIGNoYXQgY2FyZC5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZCAgVGhlIEhUTUxFbGVtZW50IHRoYXQgaXMgYSByb2xsLXJlc3VsdCBvciBhIGNoYXQgY2FyZCBjb250YWluaW5nIGEgc2luZ2xlIHJvbGwtcmVzdWx0LlxuICAgKiBAcmV0dXJuIHtDb0M3Q2hlY2t9ICAgICAgQSBDb0M3Q2hlY2suXG4gICAqL1xuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCByb2xsUmVzdWx0ID0gY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtcmVzdWx0JylcbiAgICAgID8gY2FyZFxuICAgICAgOiBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChyb2xsUmVzdWx0LCBjaGVjaylcbiAgICBjb25zdCBtZXNzYWdlID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY2hlY2subWVzc2FnZUlkID0gbWVzc2FnZSA/IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQgOiBudWxsXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcHVzaCAoY2FyZCwgcHVibGlzaCA9IHRydWUpIHtcbiAgICBjb25zdCBvbGRDaGVjayA9IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKSAvLyBUT0RPOiBSZWZhY3RvcmluZ1xuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgOiBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgIGNvbnN0IHNraWxsSWQgPSBjYXJkLmRhdGFzZXQuc2tpbGxJZFxuICAgIGNvbnN0IGNoYXJhYyA9IGNhcmQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY1xuICAgIGNvbnN0IGl0ZW1JZCA9IGNhcmQuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCBkaWNlTW9kID0gY2FyZC5kYXRhc2V0LmRpY2VNb2RcbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gY2FyZC5kYXRhc2V0LmRpZmZpY3VsdHlcblxuICAgIGxldCBwdXNoZWRSb2xsXG4gICAgaWYgKHNraWxsSWQpIHtcbiAgICAgIHB1c2hlZFJvbGwgPSBuZXcgQ29DN0NoZWNrKGFjdG9ySWQsIHNraWxsSWQsIGl0ZW1JZCwgZGljZU1vZCwgZGlmZmljdWx0eSlcbiAgICB9IGVsc2UgaWYgKGNoYXJhYykge1xuICAgICAgcHVzaGVkUm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgcHVzaGVkUm9sbC5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgICBwdXNoZWRSb2xsLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBwdXNoZWRSb2xsLmFjdG9yID0gYWN0b3JJZFxuICAgICAgcHVzaGVkUm9sbC5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY1xuICAgIH0gZWxzZSByZXR1cm5cbiAgICBpZiAob2xkQ2hlY2sudXVpZCkge1xuICAgICAgcHVzaGVkUm9sbC5jb250ZXh0ID0gb2xkQ2hlY2suY29udGV4dFxuICAgICAgcHVzaGVkUm9sbC51dWlkID0gb2xkQ2hlY2sudXVpZFxuICAgIH1cbiAgICBpZiAob2xkQ2hlY2sucGFyZW50KSBwdXNoZWRSb2xsLnBhcmVudCA9IG9sZENoZWNrLnBhcmVudFxuICAgIHB1c2hlZFJvbGwucHVzaGluZyA9IHRydWVcbiAgICBhd2FpdCBwdXNoZWRSb2xsLnJvbGwoKVxuICAgIGlmIChwdWJsaXNoKSBwdXNoZWRSb2xsLnRvTWVzc2FnZSh0cnVlLCBjYXJkKVxuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gIH1cblxuICBzZXQgYWN0b3IgKHgpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0geFxuICAgIGlmICh4ID09IG51bGwpIHtcbiAgICAgIHRoaXMuX2FjdG9yID0geFxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHggaW5zdGFuY2VvZiBBY3Rvcikge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB0aGlzLl9hY3RvciA9IHhcbiAgICAgIHRoaXMuX2FjdG9yLmFsaWFzID0gdGhpcy5hY3Rvci5uYW1lXG4gICAgICBpZiAoeC50b2tlbiAmJiB4LnRva2VuLnNjZW5lICYmIHgudG9rZW4uc2NlbmUuaWQpIHtcbiAgICAgICAgdGhpcy5hY3RvcktleSA9IGAke3gudG9rZW4uc2NlbmUuaWR9LiR7eC50b2tlbi5pZH1gXG4gICAgICB9IGVsc2UgdGhpcy5hY3RvcktleSA9IHguaWQgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoeC5pbmNsdWRlcygnLicpKSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB4LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICB0aGlzLl9hY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0aGlzLl9hY3Rvci5uYW1lIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVyblxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICAgIHRoaXMuX2FjdG9yID0gdG9rZW4uYWN0b3JcbiAgICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0b2tlbi5uYW1lXG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLl9hY3RvciA9IGdhbWUuYWN0b3JzLmdldCh4KVxuICAgIHRoaXMuYWN0b3IuYWxpYXMgPSB0aGlzLmFjdG9yLm5hbWVcbiAgfVxuXG4gIGdldCBzdWNjZXNzTGV2ZWxJY29ucyAoKSB7XG4gICAgaWYgKHRoaXMudW5rbm93bkRpZmZpY3VsdHkpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNvbnN0IGljb25zID0gW11cbiAgICAgIGZvciAoXG4gICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgIGluZGV4IDwgdGhpcy5zdWNjZXNzTGV2ZWwgLSB0aGlzLmRpZmZpY3VsdHkgKyAxO1xuICAgICAgICBpbmRleCsrXG4gICAgICApIHtcbiAgICAgICAgaWNvbnMucHVzaCh0aGlzLmlzQ3JpdGljYWwgPyAnbWVkYWwnIDogJ3N0YXInKVxuICAgICAgfVxuICAgICAgY29uc3Qgc3VjY2Vzc0hpbnQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlN1Y2Nlc0xldmVsSGludCcsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMuc3VjY2Vzc0xldmVsIC0gdGhpcy5kaWZmaWN1bHR5ICsgMVxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGNzc0NsYXNzOiB0aGlzLmlzQ3JpdGljYWwgPyAnY3JpdGljYWwnIDogJ3N1Y2Nlc3MnLFxuICAgICAgICBoaW50OiBzdWNjZXNzSGludCxcbiAgICAgICAgaWNvbnNcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaWNvbnMgPSBbXVxuICAgICAgY29uc3Qgc3VjY2Vzc0xldmVsID0gdGhpcy5pc0Z1bWJsZSA/IC0xIDogdGhpcy5zdWNjZXNzTGV2ZWxcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmRpZmZpY3VsdHkgLSBzdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgaWNvbnMucHVzaCh0aGlzLmlzRnVtYmxlID8gJ3NrdWxsJyA6ICdzcGlkZXInKVxuICAgICAgfVxuICAgICAgY29uc3QgZmFpbHVyZUhpbnQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmVMZXZlbEhpbnQnLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLmRpZmZpY3VsdHkgLSBzdWNjZXNzTGV2ZWxcbiAgICAgIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgY3NzQ2xhc3M6IHRoaXMuaXNGdW1ibGUgPyAnZnVtYmxlJyA6ICdmYWlsdXJlJyxcbiAgICAgICAgaGludDogZmFpbHVyZUhpbnQsXG4gICAgICAgIGljb25zXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IHVua25vd25EaWZmaWN1bHR5ICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUNyaXRpY2FsIHx8XG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUV4dHJlbWUgfHxcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5SGFyZCB8fFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlSZWd1bGFyXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9PT0gdGhpcy5kaWZmaWN1bHR5XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIHNldCBza2lsbCAoeCkge1xuICAgIHRoaXMuX3NraWxsID0gdGhpcy5fZ2V0SXRlbUZyb21JZCh4KVxuICAgIHRoaXMuc2tpbGxJZCA9IHhcbiAgfVxuXG4gIHNldCBpdGVtICh4KSB7XG4gICAgdGhpcy5faXRlbSA9IHRoaXMuX2dldEl0ZW1Gcm9tSWQoeClcbiAgICBpZiAodGhpcy5faXRlbT8udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgIHRoaXMuaXRlbUlkID0geFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pdGVtID0gdW5kZWZpbmVkXG4gICAgICB0aGlzLml0ZW1JZCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIF9nZXRJdGVtRnJvbUlkICh4KSB7XG4gICAgaWYgKHggPT0gbnVsbCkgcmV0dXJuIG51bGxcbiAgICBpZiAoeCBpbnN0YW5jZW9mIEl0ZW0pIHJldHVybiB4XG4gICAgaWYgKHRoaXMuX2FjdG9yKSByZXR1cm4gdGhpcy5fYWN0b3IuaXRlbXMuZ2V0KHgpXG4gICAgcmV0dXJuIGdhbWUuaXRlbXMuZ2V0KHgpXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5fYWN0b3IgfHwgIXRoaXMuX2FjdG9yPy5pZCkge1xuICAgICAgaWYgKHRoaXMuYWN0b3JLZXkpIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAodGhpcy5hY3RvcklkKSB0aGlzLl9hY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JJZCkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoIXRoaXMuX2FjdG9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXNEdW1teTogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0aGlzLmFjdG9yTmFtZSA/IHRoaXMuYWN0b3JOYW1lIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGlkOiB1bmRlZmluZWQsXG4gICAgICAgICAgaW1nOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9xdWVzdGlvbi1jaXJjbGUtcmVndWxhci5zdmcnLFxuICAgICAgICAgIHBvcnRyYWl0OiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9xdWVzdGlvbi1jaXJjbGUtcmVndWxhci5zdmcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2FjdG9yLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBjb25zdCBhY3RvciA9IG5ldyBDb0NBY3Rvcih0aGlzLl9hY3RvcilcbiAgICAgIHRoaXMuX2FjdG9yID0gYWN0b3JcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FjdG9yXG4gIH1cblxuICBnZXQgc2tpbGwgKCkge1xuICAgIGlmICghdGhpcy5fc2tpbGwgJiYgdGhpcy5za2lsbElkKSB7XG4gICAgICB0aGlzLl9za2lsbCA9IHRoaXMuYWN0b3I/Lml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXG4gICAgfVxuICAgIGlmICghdGhpcy5fc2tpbGwgJiYgdGhpcy5pdGVtKSB7XG4gICAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5za2lsbCkge1xuICAgICAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkICYmICF0aGlzLndlYXBvbkFsdFNraWxsKSB7XG4gICAgICAgICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHRoaXMuaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCAmJlxuICAgICAgICAgIHRoaXMud2VhcG9uQWx0U2tpbGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICB0aGlzLml0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWRcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NraWxsXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKCF0aGlzLl9pdGVtICYmIHRoaXMuaXRlbUlkICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuX2l0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2l0ZW1cbiAgfVxuXG4gIGdldCBkaXNwbGF5UmVzdWx0VHlwZSAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlSZXN1bHRUeXBlJylcbiAgfVxuXG4gIGdldCBkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwnKVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlCb3RoU3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwbGF5UmVzdWx0VHlwZSAmJiB0aGlzLmRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbFxuICB9XG5cbiAgZ2V0IGRvbnREaXNwbGF5U3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gIXRoaXMuZGlzcGxheVJlc3VsdFR5cGUgJiYgIXRoaXMuZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsXG4gIH1cblxuICBnZXQgaW1hZ2UgKCkge1xuICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5pbWdcbiAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLmltZ1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBsaW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRMaW5rRWxlbWVudCgpLm91dGVySFRNTFxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXRMaW5rRWxlbWVudCAoY2xhc3NlcyA9IG51bGwpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2xzOiBbJ2NvYzctbGluaycsICdjb2M3LXJvbGwnXS5jb25jYXQoY2xhc3NlcyksXG4gICAgICBkYXRhc2V0OiB7IGNoZWNrOiAnY2hlY2snIH0sXG4gICAgICBpY29uOiB0aGlzLmltYWdlXG4gICAgICAgID8gYDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHt0aGlzLmltYWdlfSlcIj48L2Rpdj5gXG4gICAgICAgIDogJzxpIGNsYXNzPVwiZmFzIGZhLWRpY2VcIj48L2k+JyxcbiAgICAgIGJsaW5kOiB0aGlzLmlzQmxpbmRcbiAgICB9XG5cbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcodGhpcy5fZGlmZmljdWx0eSlcbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICBgQ29DNy5MaW5rQ2hlY2skeyF0aGlzLl9kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcbiAgICAgICAgIXRoaXMuX2RpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ1xuICAgICAgfWAsXG4gICAgICB7XG4gICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgIG1vZGlmaWVyOiB0aGlzLl9kaWNlTW9kaWZpZXIsXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZVxuICAgICAgfVxuICAgIClcblxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBhLnRpdGxlID0gdGl0bGVcbiAgICBhLmNsYXNzTGlzdC5hZGQoLi4uZGF0YS5jbHMpXG4gICAgYS5pbm5lckhUTUwgPSBgJHtkYXRhLmJsaW5kID8gJzxpIGNsYXNzPVwiZmFzIGZhLWV5ZS1zbGFzaFwiPjwvaT4nIDogJyd9JHtcbiAgICAgIGRhdGEuaWNvblxuICAgIH0ke3RoaXMubmFtZX1gXG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgYXN5bmMgcm9sbCAoZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybShvcHRpb25zKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGNoZWNrIHdpdGggdGhlIHByb3ZpZGVkIGRhdGFcbiAgICogUHJvY2VzcyByb2xsIGRhdGEgdG8gYSBmb3JtYXQgdGhhdCBjYW4gYmUgZmVkIHRvIGNyZWF0ZSgpXG4gICAqIEBwYXJhbSB7Kn0gcm9sbERhdGEgQSByb2xsIGRhdGEgc3RydWN0dXJlIGFzIHJldHVybmVkIGJ5IGFjdG9yLmZpbmRcbiAgICogQHJldHVybnMgQSBjaGVjayB3aXRoIHRoZSByb2xsIGRhdGEgcHJvdmlkZWRcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVGcm9tQWN0b3JSb2xsRGF0YSAocm9sbERhdGEpIHtcbiAgICBjb25zdCByb2xsID0ge31cbiAgICAvLyBjaGVjayBNb2RpZmllclxuICAgIGlmIChyb2xsRGF0YS5kaWZmaWN1bHR5KSByb2xsLmRpZmZpY3VsdHkgPSByb2xsRGF0YS5kaWZmaWN1bHR5XG4gICAgaWYgKHJvbGxEYXRhLmRpY2VNb2RpZmllcikgcm9sbC5kaWNlTW9kaWZpZXIgPSByb2xsRGF0YS5kaWNlTW9kaWZpZXJcbiAgICBpZiAocm9sbERhdGEuZGVueVB1c2ggPT09IHRydWUpIHJvbGwuZGVueVB1c2ggPSB0cnVlXG4gICAgaWYgKHJvbGxEYXRhLmZsYXREaWNlTW9kaWZpZXIpIHtcbiAgICAgIHJvbGwuZmxhdERpY2VNb2RpZmllciA9IHJvbGxEYXRhLmZsYXREaWNlTW9kaWZpZXJcbiAgICB9XG4gICAgaWYgKHJvbGxEYXRhLmZsYXRUaHJlc2hvbGRNb2RpZmllcikge1xuICAgICAgcm9sbC5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSByb2xsRGF0YS5mbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICB9XG4gICAgLy8gQWN0b3JcbiAgICBpZiAocm9sbERhdGEuYWN0b3I/LmFjdG9yS2V5KSByb2xsLmFjdG9yS2V5ID0gcm9sbERhdGEuYWN0b3IuYWN0b3JLZXlcbiAgICBlbHNlIGlmIChyb2xsRGF0YS5hY3Rvcj8ubmFtZSkgcm9sbC5hY3Rvck5hbWUgPSByb2xsRGF0YS5hY3Rvci5uYW1lXG4gICAgLy8gQ2hlY2sgdHlwZVxuICAgIHN3aXRjaCAocm9sbERhdGEudHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5jaGFyYWN0ZXJpc3RpYzpcbiAgICAgICAgcm9sbC5jaGFyYWN0ZXJpc3RpYyA9IHJvbGxEYXRhLnZhbHVlPy5rZXlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUuYXR0cmlidXRlOlxuICAgICAgICByb2xsLmF0dHJpYnV0ZSA9IHJvbGxEYXRhLnZhbHVlPy5rZXlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUuaXRlbTpcbiAgICAgICAgcm9sbC5hY3RvcktleSA9IHJvbGxEYXRhLnZhbHVlLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIGlmIChyb2xsRGF0YS52YWx1ZT8udHlwZSA9PT0gJ3NraWxsJykgcm9sbC5za2lsbCA9IHJvbGxEYXRhLnZhbHVlLmlkXG4gICAgICAgIGVsc2Ugcm9sbC5pdGVtID0gcm9sbERhdGEudmFsdWUuaWRcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUuc2tpbGw6XG4gICAgICAgIHJvbGwuYWN0b3JLZXkgPSByb2xsRGF0YS52YWx1ZS5hY3Rvci5hY3RvcktleVxuICAgICAgICByb2xsLnNraWxsID0gcm9sbERhdGEudmFsdWUuaWRcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUudmFsdWU6XG4gICAgICAgIHJvbGwuZGlzcGxheU5hbWUgPSByb2xsRGF0YS52YWx1ZS5uYW1lXG4gICAgICAgIHJvbGwucmF3VmFsdWUgPSByb2xsRGF0YS52YWx1ZS50aHJlc2hvbGRcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHJldHVybiBDb0M3Q2hlY2suY3JlYXRlKHJvbGwpXG4gIH1cblxuICBzdGF0aWMgY3JlYXRlICh7XG4gICAgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcixcbiAgICBkaWNlTW9kaWZpZXIgPSBudWxsLFxuICAgIGFjdG9yS2V5ID0gbnVsbCxcbiAgICBjaGFyYWN0ZXJpc3RpYyA9IG51bGwsXG4gICAgYXR0cmlidXRlID0gbnVsbCxcbiAgICByYXdWYWx1ZSA9IDAsXG4gICAgaXRlbSA9IG51bGwsXG4gICAgc2tpbGwgPSBudWxsLFxuICAgIGZsYXREaWNlTW9kaWZpZXIgPSAwLFxuICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDAsXG4gICAgZGlzcGxheU5hbWUgPSBudWxsLFxuICAgIGFjdG9yTmFtZSA9IG51bGwsXG4gICAgZGVueVB1c2ggPSB1bmRlZmluZWRcbiAgfSA9IHt9KSB7XG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIGlmIChkZW55UHVzaCA9PT0gdHJ1ZSkgY2hlY2suZGVueVB1c2ggPSB0cnVlXG4gICAgaWYgKGRpY2VNb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyXG4gICAgaWYgKGZsYXREaWNlTW9kaWZpZXIpIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgaWYgKGZsYXRUaHJlc2hvbGRNb2RpZmllcikge1xuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgfVxuICAgIGlmIChkaXNwbGF5TmFtZSkgY2hlY2suZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZVxuICAgIGlmIChhY3RvcktleSkgY2hlY2suYWN0b3IgPSBhY3RvcktleVxuICAgIGlmIChhY3Rvck5hbWUpIGNoZWNrLmFjdG9yTmFtZSA9IGFjdG9yTmFtZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHJhd1ZhbHVlKSkpIGNoZWNrLnJhd1ZhbHVlID0gTnVtYmVyKHJhd1ZhbHVlKVxuICAgIGlmIChjaGVjay5hY3RvciAmJiAhY2hlY2suYWN0b3IuaXNEdW1teSkge1xuICAgICAgLy8gVE9ETyA6IEFkZCBjaGVjayBmb3IgdmFsaWRpdHkgb2YgY2hhcmFjdGVyaXN0aWMsIGF0dHJpYnV0ZSwgc2tpbGxJZFxuICAgICAgaWYgKHNraWxsKSBjaGVjay5za2lsbCA9IHNraWxsXG4gICAgICAvLyBUT0RPIDogdHJ5IHJldHJpZXZlIHNraWxsIGJ5IG5hbWVcbiAgICAgIGVsc2UgaWYgKGNoYXJhY3RlcmlzdGljKSBjaGVjay5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY3RlcmlzdGljXG4gICAgICBlbHNlIGlmIChhdHRyaWJ1dGUpIGNoZWNrLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZVxuICAgICAgZWxzZSBpZiAoaXRlbSkgY2hlY2suaXRlbSA9IGl0ZW1cbiAgICB9XG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGNoYXIsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuY2hhcmFjdGVyaXN0aWMgPSBjaGFyXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgYXN5bmMgcm9sbEF0dHJpYnV0ZSAoYXR0cmliLCBkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmF0dHJpYnV0ZSA9IGF0dHJpYlxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxWYWx1ZSAodmFsLCBkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLnJhd1ZhbHVlID0gdmFsXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgZ2V0IHJvbGxlZFN1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0xldmVsXG4gIH1cblxuICBhc3luYyBfcGVyZm9ybSAob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5kaWNlID1cbiAgICAgIG9wdGlvbnMucm9sbCB8fFxuICAgICAgKGF3YWl0IENvQzdEaWNlLnJvbGwodGhpcy5kaWNlTW9kaWZpZXIsIHRoaXMucm9sbE1vZGUsIHRoaXMuaXNCbGluZCkpXG4gICAgaWYgKCFvcHRpb25zLnNpbGVudCAmJiAhZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgQXVkaW9IZWxwZXIucGxheSh7IHNyYzogQ09ORklHLnNvdW5kcy5kaWNlIH0sIHRydWUpXG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuZm9yY2VEU04pIHtcbiAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGljZS5yb2xsKVxuICAgIH1cblxuICAgIHRoaXMuZGljZXMgPSB7XG4gICAgICB0ZW5zOiBbXSxcbiAgICAgIHVuaXQ6IHtcbiAgICAgICAgdmFsdWU6IHRoaXMuZGljZS51bml0LnRvdGFsXG4gICAgICB9LFxuICAgICAgdG90YWw6IHRoaXMuZGljZS50b3RhbCxcbiAgICAgIHRlblJlc3VsdDogdGhpcy5kaWNlLnRvdGFsIC0gdGhpcy5kaWNlLnVuaXQudG90YWwsXG4gICAgICBoYXNCb251czogISF0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgIGJvbnVzOiBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllciksXG4gICAgICBib251c1R5cGU6XG4gICAgICAgIHRoaXMuZGljZU1vZGlmaWVyIDwgMFxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJQZW5hbHR5JylcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyQm9udXMnKSxcbiAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVxuICAgIH1cblxuICAgIGNvbnN0IG1heCA9IHRoaXMuZGljZS51bml0LnRvdGFsID09PSAwID8gMTAwIDogOTBcbiAgICBjb25zdCBtaW4gPSB0aGlzLmRpY2UudW5pdC50b3RhbCA9PT0gMCA/IDEwIDogMFxuICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuZGljZS50b3RhbCAtIHRoaXMuZGljZS51bml0LnRvdGFsXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGljZS50ZW5zLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGRpZSA9IHt9XG4gICAgICBkaWUudmFsdWUgPSB0aGlzLmRpY2UudGVucy5yZXN1bHRzW2ldXG4gICAgICBpZiAoZGllLnZhbHVlID09PSBzZWxlY3RlZCkge1xuICAgICAgICBzZWxlY3RlZCA9IDEwMVxuICAgICAgICBkaWUuc2VsZWN0ZWQgPSB0cnVlXG4gICAgICAgIGlmICh0aGlzLmRpY2VzLmhhc0JvbnVzKSB7XG4gICAgICAgICAgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1heCkgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1pbikgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICB9XG4gICAgICAvLyBpZiggZGllLnZhbHVlID09IDEwMCkgZGllLnZhbHVlID0gXCIwMFwiO1xuICAgICAgdGhpcy5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgIH1cbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gIH1cblxuICBhc3luYyBjb21wdXRlQ2hlY2sgKCkge1xuICAgIHRoaXMuaXNVbmtub3duID0gdGhpcy51bmtub3duRGlmZmljdWx0eVxuXG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5UmVndWxhcikge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUhhcmQpIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUV4dHJlbWUpIHtcbiAgICAgIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgIH1cbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlDcml0aWNhbCkge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgIH1cblxuICAgIHRoaXMudGVuT25seU9uZURpZSA9IHRoaXMuZGljZXMudGVucy5sZW5ndGggPT09IDFcblxuICAgIHRoaXMuaXNWYWx1ZSA9IGZhbHNlXG4gICAgdGhpcy5pc0NoYXJhY3RpcmlzdGljID0gZmFsc2VcbiAgICB0aGlzLmlzU2tpbGwgPSBmYWxzZVxuICAgIHRoaXMuaXNJdGVtID0gZmFsc2VcbiAgICB0aGlzLmlzQXR0cmlidXRlID0gZmFsc2VcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuZGVueVB1c2ggPSB0cnVlXG4gICAgICB0aGlzLmRlbnlMdWNrID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3RvciA9PSBudWxsKSB7XG4gICAgICB0aGlzLmlzVmFsdWUgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHRoaXMuaXNDaGFyYWN0aXJpc3RpYyA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9XG4gICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLnZhbHVlXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnNraWxsKSB7XG4gICAgICAgIHRoaXMuaXNTa2lsbCA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuc2tpbGwudmFsdWVcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIHRoaXMuaXNBdHRyaWJ1dGUgPSB0cnVlXG4gICAgICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS52YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGhpcy5sdWNrU3BlbnQgJiYgIXRoaXMuaXNTaW1wbGVSb2xsKSB7XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA8PSB0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA8PSB0aGlzLmhhcmRUaHJlc2hvbGQpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmRcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMuZXh0cmVtZVRocmVzaG9sZCkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA9PT0gMSkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWxcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmZ1bWJsZVRocmVzaG9sZCA8PSB0aGlzLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGU6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVua25vd25EaWZmaWN1bHR5KSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NSZXF1aXJlZCA9ICcnXG4gICAgfSBlbHNlIGlmICghdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc1JlcXVpcmVkID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TdWNjZXNzUmVxdWlyZWQnLCB7XG4gICAgICAgIHN1Y2Nlc3NSZXF1aXJlZDogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxKSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWxcbiAgICB9XG4gICAgaWYgKCF0aGlzLmx1Y2tTcGVudCAmJiAhdGhpcy5pc1Vua25vd24gJiYgIXRoaXMuaXNTaW1wbGVSb2xsKSB7XG4gICAgICB0aGlzLmlzRmFpbHVyZSA9IHRoaXMuZmFpbGVkXG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRoaXMucGFzc2VkXG4gICAgfVxuXG4gICAgdGhpcy5oYXNNYWxmdW5jdGlvbiA9IGZhbHNlXG4gICAgaWYgKHRoaXMuaXNGdW1ibGUpIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGVcblxuICAgIGlmICh0aGlzLml0ZW0pIHtcbiAgICAgIHRoaXMuaXNJdGVtID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuaXRlbS5zeXN0ZW0ubWFsZnVuY3Rpb24pIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIE51bWJlcih0aGlzLm1vZGlmaWVkUmVzdWx0KSA+PSBOdW1iZXIodGhpcy5pdGVtLnN5c3RlbS5tYWxmdW5jdGlvbilcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5oYXNNYWxmdW5jdGlvbiA9IHRydWVcbiAgICAgICAgICB0aGlzLm1hbGZ1bmN0aW9uVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYWxmdW5jdGlvbicsIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lOiB0aGlzLml0ZW0ubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZUl0ZW1GbGFnKENvQzdJdGVtLmZsYWdzLm1hbGZ1bmN0aW9uKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmNhbkJlUHVzaGVkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5jYW5CZVB1c2hlZCA9IHRoaXMuc2tpbGwgPyB0aGlzLnNraWxsLmNhbkJlUHVzaGVkKCkgOiBmYWxzZVxuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMgIT0gbnVsbCkgdGhpcy5jYW5CZVB1c2hlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmlzRnVtYmxlKSB0aGlzLmNhbkJlUHVzaGVkID0gZmFsc2VcbiAgICAgIGlmICh0aGlzLmRlbnlQdXNoKSB0aGlzLmNhbkJlUHVzaGVkID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZGVueUx1Y2sgJiYgdGhpcy5hY3Rvcikge1xuICAgICAgaWYgKFxuICAgICAgICAhdGhpcy5sdWNrU3BlbnQgJiZcbiAgICAgICAgIXRoaXMucGFzc2VkICYmXG4gICAgICAgICF0aGlzLmlzRnVtYmxlICYmXG4gICAgICAgIHRoaXMuZGlmZmljdWx0eSAhPT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCAmJlxuICAgICAgICAhdGhpcy51bmtub3duRGlmZmljdWx0eVxuICAgICAgKSB7XG4gICAgICAgIGlmICh0aGlzLnNraWxsIHx8IHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgICBjb25zdCBsdWNrTmVlZGVkID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMuc3VjY2VzVGhyZXNob2xkXG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IubHVjayA+IGx1Y2tOZWVkZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzRW5vdWdoTHVjayA9IHRydWVcbiAgICAgICAgICAgIHRoaXMubHVja05lZWRlZCA9IGx1Y2tOZWVkZWRcbiAgICAgICAgICAgIHRoaXMubHVja05lZWRlZFR4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbmRMdWNrJywge1xuICAgICAgICAgICAgICBsdWNrTmVlZGVkVmFsdWU6IGx1Y2tOZWVkZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5sdWNrU3BlbnQpIHtcbiAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxuXG4gICAgICAgIC8vIENhbid0IHNwZW5kIGx1Y2sgb24gcHVzaGVkIHJvbGxzLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgIXRoaXMucHVzaGluZyAmJlxuICAgICAgICAgIHRoaXMuYXR0cmlidXRlICE9PSAnbGNrJyAmJlxuICAgICAgICAgIHRoaXMuYXR0cmlidXRlICE9PSAnc2FuJ1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnVua25vd25EaWZmaWN1bHR5ICYmXG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHlOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5SZWd1bGFyRGlmZmljdWx0eSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmx1Y2tUb1NwZW5kID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMucmVndWxhclRocmVzaG9sZCAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5oYXNFbm91Z2hMdWNrID0gbmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVja1xuICAgICAgICAgICAgaWYgKG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2spIHtcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5IDw9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciAmJlxuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsID0ge31cbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLmhhcmRUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2tcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV4dExldmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA8PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgJiZcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IHt9XG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5J1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLmV4dHJlbWVUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2sgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBpZiAobmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjaykge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5leHRMZXZlbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5jYW5JbmNyZWFzZVN1Y2Nlc3MgPSB0aGlzLmluY3JlYXNlU3VjY2Vzcy5sZW5ndGggPiAwXG4gICAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5jYW5JbmNyZWFzZVN1Y2Nlc3MgPSBmYWxzZVxuICAgIH1cblxuICAgIHRoaXMuY2FuQXdhcmRFeHBlcmllbmNlID1cbiAgICAgIHRoaXMuc2tpbGwgJiYgIXRoaXMuc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMubm94cGdhaW5cblxuICAgIGlmIChcbiAgICAgIHRoaXMucGFzc2VkICYmXG4gICAgICB0aGlzLmRpY2VNb2RpZmllciA8PSAwICYmXG4gICAgICB0aGlzLnNraWxsICYmXG4gICAgICAhdGhpcy5za2lsbC5zeXN0ZW0ucHJvcGVydGllcy5ub3hwZ2FpbiAmJlxuICAgICAgIXRoaXMubHVja1NwZW50ICYmXG4gICAgICAhdGhpcy5mb3JjZWQgJiZcbiAgICAgICF0aGlzLmlzQmxpbmQgJiZcbiAgICAgICF0aGlzLmlzVW5rbm93blxuICAgICkge1xuICAgICAgdGhpcy5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IGF3YWl0IGZyb21VdWlkKHRoaXMucGFyZW50KVxuICAgICAgaWYgKHBhcmVudCAmJiAndXBkYXRlUm9sbCcgaW4gcGFyZW50KSB7XG4gICAgICAgIGF3YWl0IHBhcmVudC51cGRhdGVSb2xsKHRoaXMuSlNPTlJvbGxTdHJpbmcpXG4gICAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYFJvbGwgJHt0aGlzLnV1aWR9IGRlcGVuZHMgb2YgJHt0aGlzLnBhcmVudH1gKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNob3dEaWNlUm9sbCAoKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IGRpY2VSZXN1bHRzID0gW11cbiAgICAgIGZvciAoY29uc3QgZGllUmVzdWx0IG9mIHRoaXMuZGljZXMudGVucykge1xuICAgICAgICBkaWNlUmVzdWx0cy5wdXNoKGRpZVJlc3VsdC52YWx1ZSA9PT0gMTAwID8gMCA6IGRpZVJlc3VsdC52YWx1ZSAvIDEwKVxuICAgICAgfVxuICAgICAgZGljZVJlc3VsdHMucHVzaCh0aGlzLmRpY2VzLnVuaXQudmFsdWUpXG5cbiAgICAgIGNvbnN0IGRpY2VEYXRhID0ge1xuICAgICAgICBmb3JtdWxhOiBgJHt0aGlzLmRpY2VzLnRlbnMubGVuZ3RofWQxMDArMWQxMGAsXG4gICAgICAgIHJlc3VsdHM6IGRpY2VSZXN1bHRzLFxuICAgICAgICB3aGlzcGVyOiBudWxsLFxuICAgICAgICBibGluZDogZmFsc2VcbiAgICAgIH1cbiAgICAgIGdhbWUuZGljZTNkLnNob3coZGljZURhdGEpXG4gICAgfVxuICB9XG5cbiAgZ2V0IGNzc0NsYXNzICgpIHtcbiAgICBsZXQgY3NzQ2xhc3MgPSAnJ1xuICAgIGlmICh0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MgPSAnc3VjY2VzcydcbiAgICBpZiAodGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzID0gJ2ZhaWx1cmUnXG4gICAgaWYgKHRoaXMuaXNDcml0aWNhbCAmJiAhdGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzID0gJ3N1Y2Nlc3MgY3JpdGljYWwnXG4gICAgaWYgKHRoaXMuaXNGdW1ibGUgJiYgIXRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcyA9ICdmYWlsdXJlIGZ1bWJsZSdcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MgKz0gJyByZWd1bGFyLXN1Y2Nlc3MnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcyArPSAnIGhhcmQtc3VjY2VzcydcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzICs9ICcgZXh0cmVtZS1zdWNjZXNzJ1xuICAgIH1cblxuICAgIHJldHVybiBjc3NDbGFzc1xuICB9XG5cbiAgZ2V0IGNzc0NsYXNzTGlzdCAoKSB7XG4gICAgY29uc3QgY3NzQ2xhc3MgPSBbXVxuICAgIGlmICh0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MucHVzaCgnc3VjY2VzcycpXG4gICAgaWYgKHRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcy5wdXNoKCdmYWlsdXJlJylcbiAgICBpZiAodGhpcy5pc0NyaXRpY2FsICYmICF0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MucHVzaCgnc3VjY2VzcycsICdjcml0aWNhbCcpXG4gICAgaWYgKHRoaXMuaXNGdW1ibGUgJiYgIXRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcy5wdXNoKCdmYWlsdXJlJywgJ2Z1bWJsZScpXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2goJ3JlZ3VsYXItc3VjY2VzcycpXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcy5wdXNoKCdoYXJkLXN1Y2Nlc3MnKVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MucHVzaCgnZXh0cmVtZS1zdWNjZXNzJylcbiAgICB9XG5cbiAgICByZXR1cm4gY3NzQ2xhc3NcbiAgfVxuXG4gIGdldCBwbGF5ZXJDc3NDbGFzcyAoKSB7XG4gICAgaWYgKHRoaXMuaXNTdWNjZXNzIHx8IHRoaXMuZm9yY2VkU3VjY2VzcykgcmV0dXJuICdzdWNjZXNzJ1xuICAgIGlmICh0aGlzLmlzRmFpbHVyZSB8fCB0aGlzLmZvcmNlZEZhaWx1cmUpIHJldHVybiAnZmFpbHVyZSdcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgdXBncmFkZUNoZWNrICh1cGdyYWRlaW5kZXgsIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBpbmNyZWFzZWRTdWNjZXNzID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3NbdXBncmFkZWluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPVxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5sdWNrQW1vdW50KSB8fFxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5sdWNrVG9TcGVuZCkgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEVub3VnaEx1Y2snLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMudG90YWxMdWNrU3BlbnQgPSAhcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICAgID8gMFxuICAgICAgOiBwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgIHRoaXMudG90YWxMdWNrU3BlbnQgKz0gcGFyc2VJbnQobHVja0Ftb3VudClcbiAgICBjb25zdCBuZXdTdWNjZXNzTGV2ZWwgPVxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5uZXdTdWNjZXNzTGV2ZWwpIHx8XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmRpZmZpY3VsdHkpIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgaWYgKHRoaXMuZGlmZmljdWx0eSA8PSBuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIHRoaXMuaXNTdWNjZXNzID0gdHJ1ZVxuICAgICAgdGhpcy5pc0ZhaWx1cmUgPSBmYWxzZVxuICAgIH1cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdXBncmFkZWluZGV4ICsgMTsgaW5kZXgrKykge1xuICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3Muc2hpZnQoKVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MpIHtcbiAgICAgIHMubHVja1RvU3BlbmQgPSBzLmx1Y2tUb1NwZW5kIC0gbHVja0Ftb3VudFxuICAgIH1cbiAgICB0aGlzLmx1Y2tTcGVudCA9IHRydWVcbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gICAgaWYgKHVwZGF0ZSkgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgcmVtb3ZlVXBncmFkZXMgKCkge1xuICAgIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLmluY3JlYXNlU3VjY2VzcyA9IFtdXG4gICAgdGhpcy5sdWNrTmVlZGVkID0gMFxuICAgIHRoaXMubHVja05lZWRlZFR4dCA9IG51bGxcbiAgICB0aGlzLmNhbkJlUHVzaGVkID0gZmFsc2VcbiAgfVxuXG4gIGZvcmNlUGFzcyAobHVja0Ftb3VudCA9IG51bGwsIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBpZiAobHVja0Ftb3VudCkge1xuICAgICAgdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudClcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gdGhpcy5kaWZmaWN1bHR5XG4gICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MpIHtcbiAgICAgICAgcy5sdWNrVG9TcGVuZCA9IHMubHVja1RvU3BlbmQgLSBsdWNrQW1vdW50XG4gICAgICB9XG4gICAgICB0aGlzLmx1Y2tTcGVudCA9IHRydWVcbiAgICAgIHRoaXMuaXNTdWNjZXNzID0gdHJ1ZVxuICAgICAgdGhpcy5pc0ZhaWx1cmUgPSBmYWxzZVxuICAgICAgdGhpcy50b3RhbEx1Y2tTcGVudCA9ICFwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgICAgICA/IDBcbiAgICAgICAgOiBwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgICAgdGhpcy50b3RhbEx1Y2tTcGVudCArPSBwYXJzZUludChsdWNrQW1vdW50KVxuICAgICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICAgICAgaWYgKHVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZm9yY2VkID0gdHJ1ZVxuICAgICAgdGhpcy5mb3JjZWRTdWNjZXNzID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuaXNVbmtub3duKSB7XG4gICAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyLCB1cGRhdGUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKHRoaXMuZGlmZmljdWx0eSwgdXBkYXRlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvcmNlRmFpbCAodXBkYXRlID0gdHJ1ZSkge1xuICAgIHRoaXMuZm9yY2VkID0gdHJ1ZVxuICAgIHRoaXMuZm9yY2VkRmFpbHVyZSA9IHRydWVcbiAgICBpZiAodGhpcy5pc1Vua25vd24pIHtcbiAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlLCB1cGRhdGUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwodGhpcy5kaWZmaWN1bHR5IC0gMSwgdXBkYXRlKVxuICAgIH1cbiAgfVxuXG4gIF9mb3JjZUNoZWNrIChoaWdoLCBsb3csIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgdG90YWwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaGlnaCAtIGxvdykpICsgbG93ICsgMVxuICAgIGNvbnN0IHVuaXRUb3RhbCA9IHRvdGFsICUgMTBcbiAgICBsZXQgdGVuVG90YWwgPSBNYXRoLmZsb29yKHRvdGFsIC8gMTApXG4gICAgY29uc3QgdGVucyA9IFtdXG5cbiAgICBsZXQgaGFzRW5vdWdoID0gTWF0aC5hYnModGhpcy5kaWNlTW9kaWZpZXIpID09PSB0ZW5zLmxlbmd0aFxuICAgIHdoaWxlICghaGFzRW5vdWdoKSB7XG4gICAgICBsZXQgdGVuID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApXG4gICAgICBsZXQgcm9sbCA9IHRlbiAqIDEwICsgdW5pdFRvdGFsXG4gICAgICBpZiAocm9sbCA9PT0gMCkge1xuICAgICAgICByb2xsID0gMTAwXG4gICAgICAgIHRlbiA9IDEwMFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzUGVuYWx0eSAmJiByb2xsIDw9IGhpZ2gpIHtcbiAgICAgICAgdGVucy5wdXNoKHRlbilcbiAgICAgICAgaWYgKHJvbGwgPiB0b3RhbCkgdG90YWwgPSByb2xsXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oYXNCb251cyAmJiByb2xsID4gbG93KSB7XG4gICAgICAgIHRlbnMucHVzaCh0ZW4pXG4gICAgICAgIGlmIChyb2xsIDwgdG90YWwpIHRvdGFsID0gcm9sbFxuICAgICAgfVxuICAgICAgaGFzRW5vdWdoID0gdGVucy5sZW5ndGggPT09IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKVxuICAgIH1cblxuICAgIC8vIEluc2VydCByZXN1bHQgYXQgcmFuZG9tIHBvc2l0aW9uLlxuICAgIGlmICh0ZW5Ub3RhbCA9PT0gMTAgJiYgdW5pdFRvdGFsID09PSAwKSB7XG4gICAgICB0ZW5Ub3RhbCA9IDEwMFxuICAgIH1cbiAgICB0ZW5zLnNwbGljZShcbiAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRlbnMubGVuZ3RoICsgMSksXG4gICAgICAwLFxuICAgICAgdGVuVG90YWwgPT09IDEwID8gMCA6IHRlblRvdGFsXG4gICAgKVxuXG4gICAgdGhpcy5kaWNlcy50ZW5zID0gW11cbiAgICB0aGlzLmRpY2VzLnVuaXQudmFsdWUgPSB1bml0VG90YWxcbiAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID0gdG90YWxcbiAgICB0aGlzLmRpY2VzLnRvdGFsID0gdG90YWxcbiAgICB0aGlzLmRpY2VzLnRlblJlc3VsdCA9IHRvdGFsIC0gdW5pdFRvdGFsXG5cbiAgICBjb25zdCBtYXggPSB1bml0VG90YWwgPT09IDAgPyAxMDAgOiA5MFxuICAgIGNvbnN0IG1pbiA9IHVuaXRUb3RhbCA9PT0gMCA/IDEwIDogMFxuICAgIGxldCBzZWxlY3RlZCA9IHRvdGFsIC0gdW5pdFRvdGFsXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGRpZSA9IHt9XG4gICAgICBkaWUudmFsdWUgPSB0ZW5zW2ldXG4gICAgICBpZiAoZGllLnZhbHVlID09PSBzZWxlY3RlZCkge1xuICAgICAgICBzZWxlY3RlZCA9IDEwMVxuICAgICAgICBkaWUuc2VsZWN0ZWQgPSB0cnVlXG4gICAgICAgIGlmICh0aGlzLmhhc0JvbnVzKSB7XG4gICAgICAgICAgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1heCkgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1pbikgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICB9XG4gICAgICAvLyBpZiggZGllLnZhbHVlID09IDEwMCkgZGllLnZhbHVlID0gXCIwMFwiO1xuICAgICAgdGhpcy5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgIH1cblxuICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgICBpZiAodXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGZvcmNlU3VjY2Vzc0xldmVsIChzdWNjZXNzTGV2ZWwsIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgaGlnaCwgbG93XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSAxMDBcbiAgICAgIGxvdyA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGlmICh0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgPT09IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMSkge1xuICAgICAgICBoaWdoID0gMTAwXG4gICAgICB9IGVsc2UgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgICAgbG93ID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgbG93ID0gMVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbCA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gMVxuICAgICAgbG93ID0gMFxuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gbG93KSBsb3ctLVxuICAgIGlmIChoaWdoID09PSAwKSBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgdGhpcy5fZm9yY2VDaGVjayhoaWdoLCBsb3csIHVwZGF0ZSlcbiAgfVxuXG4gIGluY3JlYXNlU3VjY2Vzc0xldmVsICh1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IGhpZ2gsIGxvd1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICAgIGlmICh0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgPT09IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMSkge1xuICAgICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvdyA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuY3JpdGljYWxUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmNyaXRpY2FsVGhyZXNob2xkXG4gICAgICBsb3cgPSAwXG4gICAgfVxuICAgIGlmIChoaWdoID09PSBsb3cpIGxvdy0tXG4gICAgdGhpcy5fZm9yY2VDaGVjayhoaWdoLCBsb3csIHVwZGF0ZSlcbiAgfVxuXG4gIGRlY3JlYXNlU3VjY2Vzc0xldmVsICh1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IGhpZ2gsIGxvd1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gMTAwXG4gICAgICBsb3cgPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICAgIGxvdyA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWwgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICBsb3cgPSAxXG4gICAgfVxuICAgIGlmIChoaWdoID09PSAwKSBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgdGhpcy5fZm9yY2VDaGVjayhoaWdoLCBsb3csIHVwZGF0ZSlcbiAgfVxuXG4gIGFzeW5jIGZsYWdGb3JEZXZlbG9wZW1lbnQgKCkge1xuICAgIHRoaXMuZmxhZ2dlZEZvckRldmVsb3BtZW50ID0gdHJ1ZVxuICAgIGlmICh0aGlzLnNraWxsKSBhd2FpdCB0aGlzLnNraWxsLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICB9XG5cbiAgc2V0IGRpZmZpY3VsdHkgKHgpIHtcbiAgICB0aGlzLl9kaWZmaWN1bHR5ID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBkaWZmaWN1bHR5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGlmZmljdWx0eVxuICB9XG5cbiAgc2V0IGZsYXZvciAoeCkge1xuICAgIHRoaXMuX2ZsYXZvciA9IHhcbiAgfVxuXG4gIHNldCBjb250ZXh0ICh4KSB7XG4gICAgdGhpcy5fY29udGV4dCA9IHhcbiAgfVxuXG4gIGdldCBjb250ZXh0ICgpIHtcbiAgICBpZiAoIXRoaXMuX2NvbnRleHQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dFxuICB9XG5cbiAgc2V0IHBhcmVudCAoeCkge1xuICAgIGlmICghdGhpcy51dWlkKSB0aGlzLnV1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgIHRoaXMucGFyZW50VXVpZCA9IHhcbiAgfVxuXG4gIGdldCBwYXJlbnQgKCkge1xuICAgIGlmICghdGhpcy5wYXJlbnRVdWlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMucGFyZW50VXVpZFxuICB9XG5cbiAgZ2V0IGZsYXZvciAoKSB7XG4gICAgaWYgKHRoaXMuX2ZsYXZvcikgcmV0dXJuIHRoaXMuX2ZsYXZvclxuICAgIGxldCBmbGF2b3IgPSAnJ1xuICAgIGlmICh0aGlzLmFjdG9yPy5zeXN0ZW0pIHtcbiAgICAgIGlmICh0aGlzLnNraWxsKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5za2lsbC5uYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLml0ZW0pIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JdGVtQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgaXRlbTogdGhpcy5pdGVtLm5hbWUsXG4gICAgICAgICAgc2tpbGw6IHRoaXMuc2tpbGwubmFtZSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10ubGFiZWxcbiAgICAgICAgICApLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICBgQ29DNy4ke3RoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLmxhYmVsfWBcbiAgICAgICAgICApLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWZsYXZvcikge1xuICAgICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmF3VmFsdWUnLCB7XG4gICAgICAgICAgICByYXd2YWx1ZTogdGhpcy5yYXdWYWx1ZSxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5wdXNoaW5nKSB7XG4gICAgICBmbGF2b3IgPSBgJHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlB1c2hpbmcnKX0gJHtmbGF2b3J9YFxuICAgIH1cblxuICAgIHJldHVybiBmbGF2b3JcbiAgfVxuXG4gIGdldCB0b29sdGlwSGVhZGVyICgpIHtcbiAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICBgQ29DNy4ke3RoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLmxhYmVsfWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICkgKyBgICgke3RoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlfSUpYFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLmxhYmVsXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICApICtcbiAgICAgICAgYCAoJHt0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10udmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLnNraWxsKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5za2lsbC5uYW1lXG4gICAgICAgICAgfVxuICAgICAgICApICsgYCAoJHt0aGlzLnNraWxsLnZhbHVlfSUpYFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGlzcGxheU5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICkgKyBgICgke3RoaXMucmF3VmFsdWVTdHJpbmd9JSlgXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBnZXRIdG1sUm9sbEVsZW1lbnQgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9pbi1jYXJkLXJvbGwuaHRtbCdcbiAgICBpZiAodGhpcy5vcHRpb25zKSB0aGlzLm9wdGlvbnMgPSBtZXJnZU9iamVjdCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgZWxzZSB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGlmIChodG1sKSByZXR1cm4gJC5wYXJzZUhUTUwoaHRtbClbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgZ2V0SHRtbFJvbGwgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9pbi1jYXJkLXJvbGwuaHRtbCdcbiAgICBpZiAodGhpcy5vcHRpb25zKSB0aGlzLm9wdGlvbnMgPSBtZXJnZU9iamVjdCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgZWxzZSB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIHJldHVybiBodG1sIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChwdXNoaW5nID0gZmFsc2UpIHtcbiAgICAvLyBJZiBjYXJkIGlzIHByb3ZpZGVkIGF0dHRhY2hlZCB0aGUgcm9sbCB0byB0aGUgY2FyZC4gSWYgVVJJRCBwcm92aWRlZCBhdHRhY2ggYXQgdGhpcyBwb3NpdGlvbi4/XG4gICAgdGhpcy5wdXNoaW5nID0gcHVzaGluZ1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4pIHtcbiAgICAgICAgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuLmRvY3VtZW50XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0b3IuaXNEdW1teSkge1xuICAgICAgICBpZiAodGhpcy5hY3Rvci5uYW1lKSBzcGVha2VyID0geyBhbGlhczogdGhpcy5hY3Rvci5uYW1lIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgfVxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvcj8udXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGZsYXZvcjogdGhpcy5mbGF2b3IsXG4gICAgICBjb250ZW50OiBodG1sLFxuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgIHR5cGU6IENvQzdDaGVjay5jYXJkVHlwZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXVpZCkgY2hhdERhdGEuZmxhZ3MuQ29DNy51dWlkID0gdGhpcy51dWlkXG4gICAgaWYgKHRoaXMuY29udGV4dCkgY2hhdERhdGEuZmxhZ3MuQ29DNy5jb250ZXh0ID0gdGhpcy5jb250ZXh0XG5cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ3NlbGZyb2xsJykge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGNoYXREYXRhLnVzZXIgPSBnYW1lLnVzZXIuaWRcbiAgICAgICAgY2hhdERhdGEuZmxhdm9yID0gYFske3RoaXMuYWN0b3IubmFtZX1dICR7Y2hhdERhdGEuZmxhdm9yfWBcbiAgICAgICAgY2hhdERhdGEuZmxhZ3MgPSB7XG4gICAgICAgICAgQ29DNzoge1xuICAgICAgICAgICAgR01TZWxmUm9sbDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGNoYXREYXRhLnNwZWFrZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY2hhdERhdGEuZmxhZ3MuQ29DNy5vcmlnaW5hbFNwZWFrZXIgPSBkdXBsaWNhdGUoY2hhdERhdGEuc3BlYWtlcilcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICBzd2l0Y2ggKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NlbGZSb2xsV2hpc3BlclRhcmdldCcpKSB7XG4gICAgICAgICAgICBjYXNlICdvd25lcnMnOlxuICAgICAgICAgICAgICBkZWxldGUgY2hhdERhdGEuc3BlYWtlclxuICAgICAgICAgICAgICBjaGF0RGF0YS53aGlzcGVyID0gdGhpcy5hY3Rvci5vd25lcnNcbiAgICAgICAgICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXG4gICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGNhc2UgJ2V2ZXJ5b25lJzpcbiAgICAgICAgICAgICAgZGVsZXRlIGNoYXREYXRhLnNwZWFrZXJcbiAgICAgICAgICAgICAgY2hhdERhdGEud2hpc3BlciA9IGdhbWUudXNlcnMucGxheWVyc1xuICAgICAgICAgICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgdGhpcy5yb2xsTW9kZSlcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKVxuICAgIH1cblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICAvLyBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKCBjaGF0RGF0YSwgdGhpcy5yb2xsTW9kZSk7XG4gICAgaWYgKHRoaXMuZGljZT8ucm9sbCAmJiAhdGhpcy5kaWNlPy5oaWRlRGljZSkge1xuICAgICAgY2hhdERhdGEucm9sbCA9IHRoaXMuZGljZS5yb2xsXG4gICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLlJPTExcbiAgICAgIGNoYXREYXRhLnJvbGxNb2RlID0gdGhpcy5pc0JsaW5kID8gJ2JsaW5kcm9sbCcgOiB0aGlzLnJvbGxNb2RlXG4gICAgfVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG1ha2VQdWJsaWMgIFdpbGwgY2hhbmdlIHRoZSByb2xsIG1vZGUgdG8gcHVibGljXG4gICAqL1xuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoeyBtYWtlUHVibGljID0gZmFsc2UsIGZvcmNlUm9sbCA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGlmIChtYWtlUHVibGljKSB0aGlzLnJvbGxNb2RlID0gZmFsc2UgLy8gcmVzZXQgcm9sbCBtb2RlXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHsgZmxhdm9yOiB0aGlzLmZsYXZvciB9XG5cbiAgICBpZiAobWFrZVB1YmxpYykge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IFtdXG4gICAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG4gICAgICBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhKVxuICAgIH0gLy8gZWxzZSB7XG4gICAgLy8gY2hhdERhdGEud2hpc3BlciA9IFtdXG4gICAgLy8gY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuICAgIC8vIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG4gICAgLy8gfVxuXG4gICAgaWYgKGNoYXREYXRhLmJsaW5kKSB7XG4gICAgICB0aGlzLmlzQmxpbmQgPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGwtcmVzdWx0Lmh0bWwnXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGxldCBuZXdDb250ZW50ID0gaHRtbFxuXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkgcmV0dXJuICQucGFyc2VIVE1MKGh0bWwpWzBdIC8vIElmIG5vIG1lc3NhZ2VJZCByZXR1cm4gdGhlIEhUTUxFbGVtZW50IGNvbnRhaW5pbmcgdGhlIHJvbGwuXG4gICAgLy8gSWYgbm8gbWVzc2FnZUlkXG5cbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgY29uc3QgaHRtbE1lc3NhZ2UgPSAkLnBhcnNlSFRNTChtZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFodG1sTWVzc2FnZS5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtcmVzdWx0JykpIHtcbiAgICAgIGNvbnN0IGh0bWxDaGVjayA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG4gICAgICBjb25zdCByb2xsUmVzdWx0RWxlbWVudCA9IGh0bWxNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgICBpZiAocm9sbFJlc3VsdEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgcm9sbFJlc3VsdEVsZW1lbnQucmVwbGFjZVdpdGgoaHRtbENoZWNrKVxuICAgICAgfVxuICAgICAgbmV3Q29udGVudCA9IGh0bWxNZXNzYWdlLm91dGVySFRNTFxuICAgIH1cblxuICAgIGNoYXREYXRhLmNvbnRlbnQgPSBuZXdDb250ZW50XG5cbiAgICBpZiAoQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLlJPTEwgPT09IG1lc3NhZ2UudHlwZSkge1xuICAgICAgaWYgKG1lc3NhZ2Uud2hpc3Blcj8ubGVuZ3RoKSB7XG4gICAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgfSBlbHNlIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuT1RIRVJcbiAgICB9XG5cbiAgICBpZiAoZm9yY2VSb2xsICYmIHRoaXMuZGljZT8ucm9sbCAmJiAoZ2FtZS51c2VyLmlzR00gfHwgIXRoaXMuaXNCbGluZCkpIHtcbiAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGljZS5yb2xsKVxuICAgIH1cblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKGNoYXREYXRhKVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5UmVndWxhciA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5SGFyZCA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5RXh0cmVtZSA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5Q3JpdGljYWwgPSBmYWxzZVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eVJlZ3VsYXInKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlSZWd1bGFyID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlIYXJkJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5SGFyZCA9IHRydWVcbiAgICB9XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5RXh0cmVtZScpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eUV4dHJlbWUgPSB0cnVlXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eUNyaXRpY2FsJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5Q3JpdGljYWwgPSB0cnVlXG4gICAgfVxuICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgZ2V0IHRvb2x0aXAgKCkge1xuICAgIHJldHVybiByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvcm9sbC10b29sdGlwLmh0bWwnLFxuICAgICAgdGhpc1xuICAgIClcbiAgfVxuXG4gIGdldCBpbmxpbmVDaGVjayAoKSB7XG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnY29jNy1pbmxpbmUtY2hlY2snKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnY29jNy1jaGVjay1yZXN1bHQnKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnY29jNy1pbmxpbmUnKVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzTGlzdClcbiAgICBhLnRpdGxlID0gdGhpcy50b29sdGlwSGVhZGVyXG4gICAgYS5kYXRhc2V0LnJvbGwgPSBlc2NhcGUodGhpcy5KU09OUm9sbFN0cmluZykgLy8gVE9ETyFJTVBPUlRBTlQhISFcbiAgICBhLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tZDEwXCI+PC9pPiAke1xuICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCB8fCAnPz8nXG4gICAgfWBcbiAgICByZXR1cm4gYVxuICB9XG5cbiAgZ2V0IHJvbGxUb29sVGlwICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgcGFydHMgPSBbXVxuICAgIGNvbnN0IHRlbnMgPSB0aGlzLmRpY2VzLnRlbnMubWFwKHIgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdWx0OiByLnZhbHVlLFxuICAgICAgICBzZWxlY3RlZDogci5zZWxlY3RlZCxcbiAgICAgICAgY2xhc3NlczogW1xuICAgICAgICAgICdkaWUnLFxuICAgICAgICAgICdkMTAnLFxuICAgICAgICAgICFyLnNlbGVjdGVkID8gJ2Rpc2NhcmRlZCcgOiBudWxsLFxuICAgICAgICAgIHIuaXNNaW4gPyAnbWluJyA6IG51bGwsXG4gICAgICAgICAgci5pc01heCA/ICdtYXgnIDogbnVsbFxuICAgICAgICBdXG4gICAgICAgICAgLmZpbHRlcihjID0+IGMpXG4gICAgICAgICAgLmpvaW4oJyAnKVxuICAgICAgfVxuICAgIH0pXG4gICAgY29uc3QgdW5pdCA9IFtcbiAgICAgIHtcbiAgICAgICAgcmVzdWx0OiB0aGlzLmRpY2VzLnVuaXQudmFsdWUsXG4gICAgICAgIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgICBjbGFzc2VzOiAnZGllIGQxMCdcbiAgICAgIH1cbiAgICBdXG5cbiAgICBwYXJ0cy5wdXNoKHtcbiAgICAgIGZvcm11bGE6IHRoaXMudG9vbHRpcEhlYWRlcixcbiAgICAgIHRvdGFsOiB0aGlzLm1vZGlmaWVkUmVzdWx0LFxuICAgICAgaWNvbnM6IHRoaXMuc3VjY2Vzc0xldmVsSWNvbnMsXG4gICAgICBjbGFzczogdGhpcy5jc3NDbGFzcyxcbiAgICAgIHN1Y2Nlc3NSZXF1aXJlZDogdGhpcy5zdWNjZXNzUmVxdWlyZWQsXG4gICAgICByZXN1bHRUeXBlOiB0aGlzLnJlc3VsdFR5cGUsXG4gICAgICBmYWNlOiAxMCxcbiAgICAgIHJvbGxzOiBbLi4udGVucywgLi4udW5pdF1cbiAgICB9KVxuICAgIHJldHVybiByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvcm9sbC10b29sdGlwLmh0bWwnLFxuICAgICAgeyBwYXJ0cyB9XG4gICAgKVxuICB9XG5cbiAgZ2V0IEpTT05Sb2xsRGF0YSAoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5KU09OUm9sbFN0cmluZylcbiAgfVxuXG4gIGdldCBKU09OUm9sbFN0cmluZyAoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGNvbnN0IGV4Y2x1ZGUgPSBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nXVxuICAgICAgaWYgKGV4Y2x1ZGUuaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBmcm9tRGF0YSAoZGF0YSkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBDb0M3Q2hlY2soKSwgZGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBmcm9tUm9sbFN0cmluZyAoZGF0YVN0cmluZykge1xuICAgIGxldCBkYXRhXG4gICAgdHJ5IHtcbiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGRhdGFTdHJpbmcpKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBDb0M3Q2hlY2suZnJvbURhdGEoZGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhbHRlciAoY2hlY2ssIGNvbW1hbmQsIG9wdGlvbnMgPSB7fSkge1xuICAgIHN3aXRjaCAoY29tbWFuZCkge1xuICAgICAgY2FzZSAndXNlTHVjayc6IHtcbiAgICAgICAgaWYgKG9wdGlvbnMudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncGFzcy1jaGVjaycpKSB7XG4gICAgICAgICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KG9wdGlvbnMudGFyZ2V0LmRhdGFzZXQubHVja0Ftb3VudClcbiAgICAgICAgICBjaGVjay5mb3JjZVBhc3MobHVja0Ftb3VudCwgb3B0aW9ucy51cGRhdGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdXBncmFkZUluZGV4ID0gcGFyc2VJbnQob3B0aW9ucy50YXJnZXQuZGF0YXNldC5pbmRleClcbiAgICAgICAgICBhd2FpdCBjaGVjay51cGdyYWRlQ2hlY2sodXBncmFkZUluZGV4LCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JjZS1wYXNzJzoge1xuICAgICAgICBjaGVjay5mb3JjZVBhc3MobnVsbCwgb3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLWZhaWwnOiB7XG4gICAgICAgIGNoZWNrLmZvcmNlRmFpbChvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5jcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY2hlY2suaW5jcmVhc2VTdWNjZXNzTGV2ZWwob3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlY3JlYXNlLXN1Y2Nlc3MtbGV2ZWwnOiB7XG4gICAgICAgIGNoZWNrLmRlY3JlYXNlU3VjY2Vzc0xldmVsKG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXZlYWwtY2hlY2snOiB7XG4gICAgICAgIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgICAgICBjaGVjay5yb2xsTW9kZSA9IGZhbHNlXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmbGFnLWZvci1kZXZlbG9wbWVudCc6IHtcbiAgICAgICAgYXdhaXQgY2hlY2suZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdwdXNoJzoge1xuICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXG4gICAgICAgIGNoZWNrLnB1c2hpbmcgPSB0cnVlXG4gICAgICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGlja0lubGluZVJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctY2hlY2stcmVzdWx0JykpIHtcbiAgICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9jb2xsYXBzZUlubGluZVJlc3VsdChhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fZXhwYW5kSW5saW5lUmVzdWx0KGEpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9jb2xsYXBzZUlubGluZVJlc3VsdCAoYSkge1xuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctaW5saW5lLWNoZWNrJykpIHJldHVyblxuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHJldHVyblxuICAgIGNvbnN0IHRvb2x0aXAgPSBhLnF1ZXJ5U2VsZWN0b3IoJy5jb2M3LWNoZWNrLXRvb2x0aXAnKVxuICAgIGlmICh0b29sdGlwKSB0b29sdGlwLnJlbW92ZSgpXG4gICAgcmV0dXJuIGEuY2xhc3NMaXN0LnJlbW92ZSgnZXhwYW5kZWQnKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9leHBhbmRJbmxpbmVSZXN1bHQgKGEpIHtcbiAgICBpZiAoIWEuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2M3LWlubGluZS1jaGVjaycpKSByZXR1cm5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHJldHVyblxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHRvb2x0aXBcbiAgICBjb25zdCBjaGVjayA9IE9iamVjdC5hc3NpZ24oXG4gICAgICBuZXcgQ29DN0NoZWNrKCksXG4gICAgICBKU09OLnBhcnNlKHVuZXNjYXBlKGEuZGF0YXNldC5yb2xsKSlcbiAgICApIC8vIFRPRE8gOiBmaW5kIHN0cmluZ2lmeSB1bmVzY2FwZSAhISAyMDIxMDIwNVxuICAgIGlmIChjaGVjay5zdGFuZGJ5KSByZXR1cm5cblxuICAgIGNvbnN0IHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGlwLmlubmVySFRNTCA9IGF3YWl0IGNoZWNrLnJvbGxUb29sVGlwXG5cbiAgICAvLyBBZGQgdGhlIHRvb2x0aXBcbiAgICBjb25zdCB0b29sdGlwID0gdGlwLmNoaWxkcmVuWzBdXG4gICAgYS5hcHBlbmRDaGlsZCh0b29sdGlwKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnZXhwYW5kZWQnKVxuXG4gICAgLy8gU2V0IHRoZSBwb3NpdGlvblxuICAgIGNvbnN0IHBhID0gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGNvbnN0IHB0ID0gdG9vbHRpcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIHRvb2x0aXAuc3R5bGUubGVmdCA9IGAke01hdGgubWluKFxuICAgICAgcGEueCxcbiAgICAgIHdpbmRvdy5pbm5lcldpZHRoIC0gKHB0LndpZHRoICsgMylcbiAgICApfXB4YFxuICAgIHRvb2x0aXAuc3R5bGUudG9wID0gYCR7TWF0aC5taW4oXG4gICAgICBwYS55ICsgcGEuaGVpZ2h0ICsgMyxcbiAgICAgIHdpbmRvdy5pbm5lckhlaWdodCAtIChwdC5oZWlnaHQgKyAzKVxuICAgICl9cHhgXG4gICAgY29uc3QgemkgPSBnZXRDb21wdXRlZFN0eWxlKGEpLnpJbmRleFxuICAgIHRvb2x0aXAuc3R5bGUuekluZGV4ID0gTnVtYmVyLmlzTnVtZXJpYyh6aSkgPyB6aSArIDEgOiAxMDBcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTkZJRywgQ09OU1QsIERpYWxvZywgZHVwbGljYXRlLCBGb2xkZXIsIGZyb21VdWlkLCBmcm9tVXVpZFN5bmMsIGdhbWUsIGdldERvY3VtZW50Q2xhc3MsIEhvb2tzLCBNYWNybywgUm9sbCwgVG9rZW4sIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi9hcHBzL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3VXRpbGl0aWVzIHtcbiAgLy8gc3RhdGljIHRlc3QoZXZlbnQpe1xuICAvLyAgIGlmKCBldmVudC5zaGlmdEtleSkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdIZWxsbyBmcm9tIFNISUZUIHV0aWxpdGllcycpO1xuICAvLyAgIGVsc2UgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdIZWxsbyBmcm9tIHV0aWxpdGllcycpO1xuICAvLyAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCk7XG4gIC8vICAgbGV0IGFjdG9yO1xuICAvLyAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXTtcbiAgLy8gICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKTtcblxuICAvLyAgYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKTtcbiAgLy8gfVxuXG4gIHN0YXRpYyBpc0Zvcm11bGEgKHgpIHtcbiAgICBpZiAodHlwZW9mIHggIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWlzTmFOKE51bWJlcih4KSkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBSb2xsLnZhbGlkYXRlKHgpXG4gIH1cblxuICBzdGF0aWMgUGFyc2VDaGF0RW50cnkgKGh0bWwsIGNvbnRlbnQpIHtcbiAgICBjb25zdCByZWdYID0gLyhcXFMrKS9nXG4gICAgY29uc3QgdGVybXMgPSBjb250ZW50Lm1hdGNoKHJlZ1gpXG4gICAgaWYgKFxuICAgICAgdGVybXNbMF0/LnRvTG93ZXJDYXNlKCkubWF0Y2goL15cXC9yKG9sbCk/JC8pICYmXG4gICAgICB0ZXJtc1sxXT8udG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCcxZCUnKVxuICAgICkge1xuICAgICAgLy8gRGVsYXkgY2FsbGluZyBmdW5jdGlvbiB0byBwcmV2ZW50IGNoYXRtZXNzYWdlIGtleSBkb3duIHRyaWdnZXJpbmcgZGVmYXVsdFxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIENvQzdVdGlsaXRpZXMuX0V4ZWNDb21tYW5kKGNvbnRlbnQpXG4gICAgICB9LCAyMDApXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX0V4ZWNDb21tYW5kIChjb250ZW50KSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvbnRlbnRcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAuc3BsaXQoJyAnKVxuICAgICAgPy5qb2luKCcnKVxuICAgICAgPy5yZXBsYWNlKC9cXC9yKG9sbCk/MWQlLywgJycpXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgIGxldCBlc2NhcGVkID0gb3B0aW9uc1xuICAgICAgbGV0IHRocmVzaG9sZFxuICAgICAgbGV0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGxldCBkaWNlTW9kaWZpZXIgPSAwXG4gICAgICBsZXQgYXNrID0gZmFsc2VcbiAgICAgIGxldCBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBsZXQgZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBjb25zdCB0aHJlc2hvbGRTdHIgPSBlc2NhcGVkLm1hdGNoKC9bXihdKyg/PVxcKSkvKVxuICAgICAgaWYgKHRocmVzaG9sZFN0ciAmJiB0aHJlc2hvbGRTdHIubGVuZ3RoKSB7XG4gICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih0aHJlc2hvbGRTdHJbMF0pXG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgdGhyZXNob2xkU3RyKSB7XG4gICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZShgKCR7bWF0Y2h9KWAsICcnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBkaWZmaWN1bHR5U3RyID0gZXNjYXBlZC5tYXRjaCgvW15bXSsoPz1cXF0pLylcbiAgICAgIGlmIChkaWZmaWN1bHR5U3RyICYmIGRpZmZpY3VsdHlTdHIubGVuZ3RoKSB7XG4gICAgICAgIGRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KGRpZmZpY3VsdHlTdHJbMF0pXG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgZGlmZmljdWx0eVN0cikge1xuICAgICAgICAgIGVzY2FwZWQgPSBlc2NhcGVkLnJlcGxhY2UoYFske21hdGNofV1gLCAnJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGVzY2FwZWQuaW5jbHVkZXMoJz8nKSkge1xuICAgICAgICBhc2sgPSB0cnVlXG4gICAgICAgIGVzY2FwZWQgPSBlc2NhcGVkLnJlcGxhY2UoJz8nLCAnJylcbiAgICAgIH1cbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKGVzY2FwZWQpKSkgZGljZU1vZGlmaWVyID0gTnVtYmVyKGVzY2FwZWQpXG5cbiAgICAgIGlmIChhc2spIHtcbiAgICAgICAgY29uc3QgZGlhbG9nT3B0aW9ucyA9IHtcbiAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICAgbW9kaWZpZXI6IGRpY2VNb2RpZmllcixcbiAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgIGFza1ZhbHVlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShkaWFsb2dPcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBkaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKSB8fCB0aHJlc2hvbGRcbiAgICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBpZiAodGhyZXNob2xkKSBjaGVjay5yYXdWYWx1ZSA9ICFpc05hTih0aHJlc2hvbGQpID8gdGhyZXNob2xkIDogdW5kZWZpbmVkXG4gICAgfVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBpZiAoc3BlYWtlci50b2tlbiAmJiBzcGVha2VyLnNjZW5lKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICBgJHtzcGVha2VyLnNjZW5lfS4ke3NwZWFrZXIudG9rZW59YFxuICAgICAgKSAvLyBSRUZBQ1RPUklORyAoMikgKysrIHdoeSBzcGVha2VyLnNjZW5lLlxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfSBlbHNlIGlmIChzcGVha2VyLmFjdG9yKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfVxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdGVzdCAoKSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvcygnRG8gc29tZSBzdHVmZicpXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tU3RyaW5nIChhY3RvclN0cmluZykge1xuICAgIGxldCBhY3RvclxuXG4gICAgLy8gVG9rZW4gaXMgYmV0dGVyIHRoYW4gYWN0b3IuXG4gICAgLy8gQ2FzZSAxIDogdHJ5aW5nIHdpdGggSUQuXG4gICAgLy8gQ2FzZSAxLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBpZiAoZ2FtZS5hY3RvcnMudG9rZW5zW2FjdG9yU3RyaW5nXSkgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1thY3RvclN0cmluZ11cbiAgICAvLyBDYXNlIDEuMiA6IGFjdG9yIGZvdW5kLlxuICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9yU3RyaW5nKVxuICAgIGlmIChhY3RvcikgcmV0dXJuIGFjdG9yXG5cbiAgICAvLyBDYXNlIDIgOiB0cnlpbmcgd2l0aCBuYW1lXG4gICAgLy8gQ2FzZSAyLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBhY3RvciA9IE9iamVjdC52YWx1ZXMoZ2FtZS5hY3RvcnMudG9rZW5zKS5maW5kKHQgPT4ge1xuICAgICAgaWYgKHQubmFtZS50b0xvd2VyQ2FzZSgpID09PSBhY3RvclN0cmluZy50b0xvd2VyQ2FzZSgpKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcbiAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAvLyBDYXNlIDIuMiA6IGFjdG9yIGZvdW5kLlxuICAgICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5maW5kKGEgPT4ge1xuICAgICAgICBpZiAoYS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGFjdG9yU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKGFjdG9yKSByZXR1cm4gYWN0b3JcblxuICAgIC8vIC8vIENhc2UgMyBzdHJpbmcgbWF5YmUgYW4gYWN0b3JLZXlcbiAgICAvLyBpZiAoY3JlYXR1cmUuaW5jbHVkZXMoJy4nKSkge1xuICAgIC8vICAgY29uc3QgWywgYWN0b3JJZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgIC8vICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tU3RyaW5nKGFjdG9ySWQpXG4gICAgLy8gfVxuXG4gICAgLy8gTm8gam95XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRDaGFyYWN0ZXJpc3RpY05hbWVzIChjaGFyKSB7XG4gICAgY29uc3QgY2hhcktleSA9IGNoYXIudG9Mb3dlckNhc2UoKVxuXG4gICAgc3dpdGNoIChjaGFyS2V5KSB7XG4gICAgICBjYXNlICdzdHInOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TVFInKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU3RyZW5ndGgnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdjb24nOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5DT04nKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQ29uc3RpdHV0aW9uJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnc2l6JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU0laJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNpemUnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdkZXgnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5ERVgnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRGV4dGVyaXR5JylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnYXBwJzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQVBQJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkFwcGVhcmFuY2UnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdpbnQnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5JTlQnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuSW50ZWxsaWdlbmNlJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAncG93JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUE9XJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlBvd2VyJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnZWR1JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRURVJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkVkdWNhdGlvbicpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2x1Y2snOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgZm9yIChjb25zdCBbLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgZ2FtZS5zeXN0ZW0udGVtcGxhdGUuQWN0b3IudGVtcGxhdGVzLmNoYXJhY3RlcmlzdGljcy5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICAgKSkge1xuICAgICAgICAgIGlmIChjaGFyS2V5ID09PSBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIGlmIChTdHJpbmcoZGlmZmljdWx0eSkgPT09ICcwJykgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3N0cmluZycpIHJldHVybiBkaWZmaWN1bHR5XG4gICAgaWYgKCFpc05hTihOdW1iZXIoZGlmZmljdWx0eSkpKSByZXR1cm4gTnVtYmVyKGRpZmZpY3VsdHkpXG5cbiAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcbiAgICAgIGNhc2UgJz8nOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duXG4gICAgICBjYXNlICcrJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgICAgY2FzZSAnKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICcrKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBza2lsbENoZWNrTWFjcm8gKHNraWxsLCBldmVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoc3BlYWtlci50b2tlbikgYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbc3BlYWtlci50b2tlbl1cbiAgICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKSAvLyBObyBuZWVkIHRvIGZpbGwgYWN0b3IgdG9rZW5cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLnNraWxsQ2hlY2soc2tpbGwsIGV2ZW50LnNoaWZ0S2V5LCBvcHRpb25zKVxuICB9XG5cbiAgc3RhdGljIHdlYXBvbkNoZWNrTWFjcm8gKHdlYXBvbiwgZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGxldCBhY3RvclxuICAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXVxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIGlmIChzcGVha2VyLnNjZW5lICYmIHNwZWFrZXIudG9rZW4pIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgc3ludGhldGljIGFjdG9yIGxpbmtlZCB3aXRoIHRoZSBhY3RpdmUgdG9rZW4uXG4gICAgICAgIGNvbnN0IGJhc2VBY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzcGVha2VyLnNjZW5lKVxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLnRva2Vucy5nZXQoc3BlYWtlci50b2tlbilcblxuICAgICAgICBjb25zdCBBY3RvckNsYXNzID0gZ2V0RG9jdW1lbnRDbGFzcygnQWN0b3InKVxuICAgICAgICBjb25zdCB0b2tlbkFjdG9yID0gbmV3IEFjdG9yQ2xhc3MoYmFzZUFjdG9yLnRvSlNPTigpLCB7XG4gICAgICAgICAgcGFyZW50OiB0b2tlblxuICAgICAgICB9KVxuICAgICAgICBhY3RvciA9IHRva2VuQWN0b3JcbiAgICAgIH0gZWxzZSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgIH1cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLndlYXBvbkNoZWNrKHdlYXBvbiwgZXZlbnQuc2hpZnRLZXkpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY2hlY2tNYWNybyAodGhyZXNob2xkID0gdW5kZWZpbmVkLCBldmVudCA9IG51bGwpIHtcbiAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLnJvbGxEaWNlKGV2ZW50LCB7IHRocmVzaG9sZCB9KVxuICB9XG5cbiAgc3RhdGljIGNyZWF0ZU1hY3JvIChiYXIsIGRhdGEsIHNsb3QpIHtcbiAgICBpZiAoZGF0YS50eXBlICE9PSAnSXRlbScpIHJldHVyblxuXG4gICAgY29uc3QgaXRlbSA9IGZyb21VdWlkU3luYyhkYXRhLnV1aWQsIGJhcilcblxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5NYWNyb05vSXRlbUZvdW5kJylcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKCEoaXRlbS50eXBlID09PSAnd2VhcG9uJykgJiYgIShpdGVtLnR5cGUgPT09ICdza2lsbCcpKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk1hY3JvSW5jb3JyZWN0VHlwZScpXG4gICAgICApXG4gICAgfVxuXG4gICAgbGV0IGNvbW1hbmQgPSAnJ1xuXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgIGNvbW1hbmQgPSBgZ2FtZS5Db0M3Lm1hY3Jvcy53ZWFwb25DaGVjayh7bmFtZTonJHtpdGVtLm5hbWV9JywgdXVpZDonJHtkYXRhLnV1aWR9J30sIGV2ZW50KTtgXG4gICAgfVxuXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9HbG9iYWxTcGVjJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgY29tbWFuZCA9IGBnYW1lLkNvQzcubWFjcm9zLnNraWxsQ2hlY2soe25hbWU6JyR7aXRlbS5uYW1lfScsIHV1aWQ6JyR7ZGF0YS51dWlkfSd9LCBldmVudCk7YFxuICAgIH1cblxuICAgIGlmIChjb21tYW5kICE9PSAnJykge1xuICAgICAgLy8gQ3JlYXRlIHRoZSBtYWNybyBjb21tYW5kXG4gICAgICBjb25zdCBtYWNybyA9IGdhbWUubWFjcm9zLmNvbnRlbnRzLmZpbmQoXG4gICAgICAgIG0gPT4gbS5uYW1lID09PSBpdGVtLm5hbWUgJiYgbS5jb21tYW5kID09PSBjb21tYW5kXG4gICAgICApXG4gICAgICBpZiAoIW1hY3JvKSB7XG4gICAgICAgIE1hY3JvLmNyZWF0ZShkdXBsaWNhdGUoe1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICB0eXBlOiAnc2NyaXB0JyxcbiAgICAgICAgICBpbWc6IGl0ZW0uaW1nLFxuICAgICAgICAgIGNvbW1hbmRcbiAgICAgICAgfSkpLnRoZW4obWFjcm8gPT4ge1xuICAgICAgICAgIGdhbWUudXNlci5hc3NpZ25Ib3RiYXJNYWNybyhtYWNybywgc2xvdClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLnVzZXIuYXNzaWduSG90YmFyTWFjcm8obWFjcm8sIHNsb3QpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVEZXZQaGFzZSAodG9nZ2xlKSB7XG4gICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EZXZQaGFzZUVuYWJsZWQnKVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EZXZQaGFzZURpc2FibGVkJylcbiAgICApXG4gICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICB0eXBlOiAndXBkYXRlQ2hhcidcbiAgICB9KVxuICAgIENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlQ2hhckNyZWF0aW9uICh0b2dnbGUpIHtcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyQ3JlYXRpb25FbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhckNyZWF0aW9uRGlzYWJsZWQnKVxuICAgIClcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgIHR5cGU6ICd1cGRhdGVDaGFyJ1xuICAgIH0pXG4gICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcbiAgICBIb29rcy5jYWxsKCd0b2dnbGVDaGFyQ3JlYXRpb24nLCB0b2dnbGUpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0VGFyZ2V0ICgpIHtcbiAgICBjb25zdCB1c2VycyA9IGdhbWUudXNlcnMuZmlsdGVyKHVzZXIgPT4gdXNlci5hY3RpdmUpXG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnNcbiAgICBsZXQgY2hlY2tPcHRpb25zID0gYDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiQ09DQ2hlY2tBbGxQQ1wiIGlkPVwiQ09DQ2hlY2tBbGxQQ1wiPlxcblxuICAgIDxsYWJlbCBmb3I9XCJDT0NDaGVja0FsbFBDXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuYWxsQWN0b3JzJyl9PC9sYWJlbD5gXG4gICAgY29uc3QgcGxheWVyVG9rZW5JZHMgPSB1c2Vyc1xuICAgICAgLm1hcCh1ID0+IHUuY2hhcmFjdGVyPy5pZClcbiAgICAgIC5maWx0ZXIoaWQgPT4gaWQgIT09IHVuZGVmaW5lZClcbiAgICBjb25zdCBzZWxlY3RlZFBsYXllcklkcyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5tYXAodG9rZW4gPT4ge1xuICAgICAgcmV0dXJuIHRva2VuLmFjdG9yLmlkXG4gICAgfSlcblxuICAgIC8vIEJ1aWxkIGNoZWNrYm94IGxpc3QgZm9yIGFsbCBhY3RpdmUgcGxheWVyc1xuICAgIGFjdG9ycy5mb3JFYWNoKGFjdG9yID0+IHtcbiAgICAgIGNvbnN0IGNoZWNrZWQgPVxuICAgICAgICAoc2VsZWN0ZWRQbGF5ZXJJZHMuaW5jbHVkZXMoYWN0b3IuaWQpIHx8XG4gICAgICAgICAgcGxheWVyVG9rZW5JZHMuaW5jbHVkZXMoYWN0b3IuaWQpKSAmJlxuICAgICAgICAnY2hlY2tlZCdcbiAgICAgIGNoZWNrT3B0aW9ucyArPSBgXG4gICAgIDxicj5cbiAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCIke2FjdG9yLmlkfVwiIGlkPVwiJHthY3Rvci5pZH1cIiB2YWx1ZT1cIiR7YWN0b3IubmFtZX1cIiAke2NoZWNrZWR9PlxcblxuICAgICA8bGFiZWwgZm9yPVwiJHthY3Rvci5pZH1cIj4ke2FjdG9yLm5hbWV9PC9sYWJlbD5cbiAgICAgICBgXG4gICAgfSlcblxuICAgIG5ldyBEaWFsb2coe1xuICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5kcmVhbWluZycpfWAsXG4gICAgICBjb250ZW50OiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3LnJlc3RUYXJnZXRzJ1xuICAgICAgKX06ICR7Y2hlY2tPcHRpb25zfSA8YnI+YCxcbiAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgd2hpc3Blcjoge1xuICAgICAgICAgIGxhYmVsOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuc3RhcnRSZXN0Jyl9YCxcbiAgICAgICAgICBjYWxsYmFjazogYXN5bmMgaHRtbCA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRzID0gW11cbiAgICAgICAgICAgIGxldCBhbGwgPSBmYWxzZVxuICAgICAgICAgICAgY29uc3QgdXNlcnMgPSBodG1sLmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKVxuICAgICAgICAgICAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XG4gICAgICAgICAgICAgIGlmICh1c2VyLm5hbWUgPT09ICdDT0NDaGVja0FsbFBDJyAmJiB1c2VyLmNoZWNrZWQpIGFsbCA9IHRydWVcbiAgICAgICAgICAgICAgaWYgKHVzZXIuY2hlY2tlZCB8fCBhbGwpIHRhcmdldHMucHVzaCh1c2VyLmlkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5zdGFydFJlc3QodGFyZ2V0cylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KS5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzdGFydFJlc3QgKHRhcmdldHMpIHtcbiAgICBpZiAoIXRhcmdldHMubGVuZ3RoKSByZXR1cm5cbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9ycy5maWx0ZXIoYWN0b3IgPT4gdGFyZ2V0cy5pbmNsdWRlcyhhY3Rvci5pZCkpXG4gICAgbGV0IGNoYXRDb250ZW50ID0gYDxpPiR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmRyZWFtaW5nJyl9Li4uPC9pPjxicj5gXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3RvcnMpIHtcbiAgICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgICBsZXQgcXVpY2tIZWFsZXIgPSBmYWxzZVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWN0b3IuaXRlbXMpIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAndGFsZW50Jykge1xuICAgICAgICAgICAgaWYgKGl0ZW0ubmFtZSA9PT0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnF1aWNrSGVhbGVyJyl9YCkge1xuICAgICAgICAgICAgICBxdWlja0hlYWxlciA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNDcml0aWNhbFdvdW5kcyA9XG4gICAgICAgICAgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMnKSAmJlxuICAgICAgICAgIGFjdG9yLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgICAgICAgY29uc3QgZGFpbHlTYW5pdHlMb3NzID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zc1xuICAgICAgICBjb25zdCBocFZhbHVlID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMuaHAudmFsdWVcbiAgICAgICAgY29uc3QgaHBNYXggPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5ocC5tYXhcbiAgICAgICAgY29uc3QgbXBWYWx1ZSA9IGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlXG4gICAgICAgIGNvbnN0IG1wTWF4ID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4XG4gICAgICAgIGNvbnN0IHBvdyA9IGFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlXG4gICAgICAgIGNoYXRDb250ZW50ID0gY2hhdENvbnRlbnQgKyBgPGJyPjxiPiR7YWN0b3IubmFtZX0uIDwvYj5gXG4gICAgICAgIGlmIChocFZhbHVlIDwgaHBNYXgpIHtcbiAgICAgICAgICBpZiAoaXNDcml0aWNhbFdvdW5kcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtyZWRcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5oYXNDcml0aWNhbFdvdW5kcydcbiAgICAgICAgICAgICAgKX0uIDwvYj5gXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBoZWFsQW1vdW50ID0gMVxuICAgICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlRmFzdGVyUmVjb3ZlcnknKSkge1xuICAgICAgICAgICAgICBoZWFsQW1vdW50ID0gMlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHF1aWNrSGVhbGVyID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGhlYWxBbW91bnQrK1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVhbEFtb3VudCA9IE1hdGgubWluKGhlYWxBbW91bnQsIGhwTWF4IC0gaHBWYWx1ZSlcbiAgICAgICAgICAgIGlmIChoZWFsQW1vdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICdDb0M3LmhlYWx0aFJlY292ZXJlZCdcbiAgICAgICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5wdWxwSGVhbHRoUmVjb3ZlcmVkJyxcbiAgICAgICAgICAgICAgICAgIHsgbnVtYmVyOiBoZWFsQW1vdW50IH1cbiAgICAgICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6XG4gICAgICAgICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUgKyBoZWFsQW1vdW50XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGFpbHlTYW5pdHlMb3NzID4gMCkge1xuICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LmRhaWx5U2FuTG9zc1Jlc3RhcnRlZCdcbiAgICAgICAgICAgICl9LjwvYj5gXG4gICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJzogMCxcbiAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCc6IE1hdGguZmxvb3IoYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIC8gNSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhvdXJzID0gN1xuICAgICAgICBpZiAoaG91cnMgPiAwICYmIG1wVmFsdWUgPCBtcE1heCkge1xuICAgICAgICAgIGxldCBtYWdpY0Ftb3VudCA9IGhvdXJzICogTWF0aC5jZWlsKHBvdyAvIDEwMClcbiAgICAgICAgICBtYWdpY0Ftb3VudCA9IE1hdGgubWluKG1hZ2ljQW1vdW50LCBtcE1heCAtIG1wVmFsdWUpXG4gICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3Lm1hZ2ljUG9pbnRzUmVjb3ZlcmVkJ1xuICAgICAgICAgICAgKX06ICR7bWFnaWNBbW91bnR9LjwvYj5gXG4gICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSc6XG4gICAgICAgICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlICsgbWFnaWNBbW91bnRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgY29udGVudDogY2hhdENvbnRlbnQsXG4gICAgICB0eXBlOiBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuT1RIRVJcbiAgICB9XG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHRvZ2dsZVhQR2FpbiAodG9nZ2xlKSB7XG4gICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAneHBFbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5YUEdhaW5FbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWFBHYWluRGlzYWJsZWQnKVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyByb2xsRGljZSAoZXZlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMuYXNrVmFsdWUgPSAhb3B0aW9ucy50aHJlc2hvbGRcbiAgICBsZXQgZGljZU1vZGlmaWVyLCBkaWZmaWN1bHR5LCBmbGF0RGljZU1vZGlmaWVyLCBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICBsZXQgdGhyZXNob2xkID0gb3B0aW9ucy50aHJlc2hvbGRcblxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMubW9kaWZpZXIpIGRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZXZlbnQ/LnNoaWZ0S2V5ICYmICFvcHRpb25zLmZhc3RGb3J3YXJkKSB7XG4gICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKVxuICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhY3RvcnMgPSBbXVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNICYmIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgY2FudmFzLnRva2Vucy5jb250cm9sbGVkKSB7XG4gICAgICAgIGFjdG9ycy5wdXNoKHRva2VuLmFjdG9yLnRva2VuS2V5KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZ2FtZS51c2VyLmNoYXJhY3Rlcikge1xuICAgICAgYWN0b3JzLnB1c2goZ2FtZS51c2VyLmNoYXJhY3Rlci50b2tlbktleSlcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHRrIG9mIGFjdG9ycykge1xuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBjaGVjay5hY3RvciA9IHRrXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuXG4gICAgaWYgKCFhY3RvcnMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgY2hlY2sucmF3VmFsdWUgPSB0aHJlc2hvbGRcbiAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2hhclNoZWV0cyAoKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgICAgaWYgKGE/LnR5cGUgPT09ICdjaGFyYWN0ZXInICYmIGE/LnNoZWV0ICYmIGE/LnNoZWV0Py5yZW5kZXJlZCkge1xuICAgICAgICAgIGEudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiB0cnVlIH0pXG4gICAgICAgICAgYS5yZW5kZXIoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb25zdCBhIG9mIGdhbWUuYWN0b3JzLmNvbnRlbnRzKSB7XG4gICAgICAgIGlmIChhLmlzT3duZXIpIHtcbiAgICAgICAgICBhLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MubG9ja2VkJzogdHJ1ZSB9KVxuICAgICAgICAgIGEucmVuZGVyKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCBmcm9tIF9vbkRyb3AgdG8gZ2V0IHRoZSBkcm9wcGVkIGVudGl0eVR5cGUgb3IgZW50aXR5VHlwZSBmcm9tIGEgZm9sZGVyXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIFtpdGVtc10gYXJyYXkgb2YgaXRlbXNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXREYXRhRnJvbURyb3BFdmVudCAoZXZlbnQsIGVudGl0eVR5cGUgPSAnSXRlbScpIHtcbiAgICBpZiAoZXZlbnQub3JpZ2luYWxFdmVudCkgcmV0dXJuIFtdXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGFMaXN0ID0gSlNPTi5wYXJzZShldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpKVxuICAgICAgaWYgKGRhdGFMaXN0LnR5cGUgPT09ICdGb2xkZXInICYmIGRhdGFMaXN0LmRvY3VtZW50TmFtZSA9PT0gZW50aXR5VHlwZSkge1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBhd2FpdCBmcm9tVXVpZChkYXRhTGlzdC51dWlkKVxuICAgICAgICBpZiAoIWZvbGRlcikgcmV0dXJuIFtdXG4gICAgICAgIHJldHVybiBmb2xkZXIuY29udGVudHNcbiAgICAgIH0gZWxzZSBpZiAoZGF0YUxpc3QudHlwZSA9PT0gZW50aXR5VHlwZSkge1xuICAgICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZGF0YUxpc3QudXVpZClcbiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm4gW11cbiAgICAgICAgcmV0dXJuIFtpdGVtXVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY29weVRvQ2xpcGJvYXJkICh0ZXh0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkICYmIHdpbmRvdy5pc1NlY3VyZUNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJylcbiAgICAgICAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0XG4gICAgICAgIHRleHRBcmVhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJ1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5sZWZ0ID0gJy05OTlweCdcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUudG9wID0gJy05OTlweCdcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0QXJlYSlcbiAgICAgICAgdGV4dEFyZWEuZm9jdXMoKVxuICAgICAgICB0ZXh0QXJlYS5zZWxlY3QoKVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5JylcbiAgICAgICAgICAgID8gcmVzb2x2ZSgpXG4gICAgICAgICAgICA6IHJlamVjdChcbiAgICAgICAgICAgICAgbmV3IEVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0NvcHlUb0NsaXBib2FyZCcpKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIHRleHRBcmVhLnJlbW92ZSgpXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVycikpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0NvcHlUb0NsaXBib2FyZCcpKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBxdW90ZVJlZ0V4cCAoc3RyaW5nKSB7XG4gICAgLy8gaHR0cHM6Ly9iaXRidWNrZXQub3JnL2NnZ2FlcnRuZXIvanMtaGFja3MvcmF3L21hc3Rlci9xdW90ZS5qc1xuICAgIGNvbnN0IGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgICBsZXQgcVN0cmluZyA9ICcnXG5cbiAgICBmb3IgKGxldCBjdXJyZW50LCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBjdXJyZW50ID0gc3RyaW5nLmNoYXJBdChpKVxuXG4gICAgICBpZiAoY3VycmVudCA+PSAnICcgJiYgY3VycmVudCA8PSAnficpIHtcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09ICdcXFxcJyB8fCBjdXJyZW50ID09PSBcIidcIikge1xuICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFwnXG4gICAgICAgIH1cblxuICAgICAgICBxU3RyaW5nICs9IGN1cnJlbnQucmVwbGFjZSgvWy1bXFxdL3t9KCkqKz8uXFxcXF4kfF0vZywgJ1xcXFwkJicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2l0Y2ggKGN1cnJlbnQpIHtcbiAgICAgICAgICBjYXNlICdcXGInOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXGInXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFxmJzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFxmJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcbic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcbidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXHInOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHInXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFx0JzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFx0J1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcdic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHUnXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDQ7IC0taiA+PSBjdXJyZW50Lmxlbmd0aDsgcVN0cmluZyArPSAnMCcpO1xuICAgICAgICAgICAgcVN0cmluZyArPSBjdXJyZW50XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcVN0cmluZ1xuICB9XG5cbiAgc3RhdGljIHNldEJ5UGF0aCAob2JqLCBwYXRoLCB2YWx1ZSkge1xuICAgIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gICAgbGV0IG8gPSBvYmpcbiAgICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgaWYgKCFvW3BhcnRzW2ldXSkgb1twYXJ0c1tpXV0gPSB7fVxuICAgICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXSA9IHZhbHVlXG4gIH1cblxuICBzdGF0aWMgZ2V0QnlQYXRoIChvYmosIHBhdGgpIHtcbiAgICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKVxuICAgIGxldCBvID0gb2JqXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIGlmICghb1twYXJ0c1tpXV0pIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgbyA9IG9bcGFydHNbaV1dXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9bcGFydHNbcGFydHMubGVuZ3RoIC0gMV1dXG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgYSBEb2N1bWVudCBieSBpdHMgVW5pdmVyc2FsbHkgVW5pcXVlIElkZW50aWZpZXIgKHV1aWQpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXVpZCAgIFRoZSB1dWlkIG9mIHRoZSBEb2N1bWVudCB0byByZXRyaWV2ZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPERvY3VtZW50fG51bGw+fVxuICAgKi9cbiAgc3RhdGljIFNmcm9tVXVpZCAodXVpZCkge1xuICAgIGxldCBwYXJ0cyA9IHV1aWQuc3BsaXQoJy4nKVxuICAgIGxldCBkb2NcblxuICAgIC8vIENvbXBlbmRpdW0gRG9jdW1lbnRzXG4gICAgaWYgKHBhcnRzWzBdID09PSAnQ29tcGVuZGl1bScpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgICAvLyByZXR1cm4gZnJvbVV1aWQodXVpZCkgLy8gUmV0dXJuIFByb21pc2VcbiAgICAgIC8vIHBhcnRzLnNoaWZ0KCk7XG4gICAgICAvLyBjb25zdCBbc2NvcGUsIHBhY2tOYW1lLCBpZF0gPSBwYXJ0cy5zbGljZSgwLCAzKTtcbiAgICAgIC8vIHBhcnRzID0gcGFydHMuc2xpY2UoMyk7XG4gICAgICAvLyBjb25zdCBwYWNrID0gZ2FtZS5wYWNrcy5nZXQoYCR7c2NvcGV9LiR7cGFja05hbWV9YCk7XG4gICAgICAvLyByZXR1cm4gYXdhaXQgcGFjaz8uZ2V0RG9jdW1lbnQoaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXb3JsZCBEb2N1bWVudHNcbiAgICAgIGNvbnN0IFtkb2NOYW1lLCBkb2NJZF0gPSBwYXJ0cy5zbGljZSgwLCAyKVxuICAgICAgcGFydHMgPSBwYXJ0cy5zbGljZSgyKVxuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IENPTkZJR1tkb2NOYW1lXS5jb2xsZWN0aW9uLmluc3RhbmNlXG4gICAgICBkb2MgPSBjb2xsZWN0aW9uLmdldChkb2NJZClcbiAgICB9XG5cbiAgICAvLyBFbWJlZGRlZCBEb2N1bWVudHNcbiAgICB3aGlsZSAoZG9jICYmIHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IFtlbWJlZGRlZE5hbWUsIGVtYmVkZGVkSWRdID0gcGFydHMuc2xpY2UoMCwgMilcbiAgICAgIGRvYyA9IGRvYy5nZXRFbWJlZGRlZERvY3VtZW50KGVtYmVkZGVkTmFtZSwgZW1iZWRkZWRJZClcbiAgICAgIHBhcnRzID0gcGFydHMuc2xpY2UoMilcbiAgICB9XG4gICAgcmV0dXJuIGRvYyB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgaXNEb2N1bWVudFV1aWRQYWNrICh1dWlkKSB7XG4gICAgaWYgKHV1aWQuaW5jbHVkZXMoJ0NvbXBlbmRpdW0nKSkgcmV0dXJuIHRydWVcbiAgICBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGlzRG9jdW1lbnRVdWlkICh1dWlkKSB7XG4gICAgY29uc3QgaWRlbnRpZmllcnMgPSBbJ0FjdG9yJywgJ1NjZW5lJywgJ1Rva2VuJywgJ0l0ZW0nLCAnQ29tcGVuZGl1bSddXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHV1aWQuaW5jbHVkZXMoaWRlbnRpZmllcnNbaV0pKSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhIChkcm9wRGF0YSkge1xuICAgIGxldCBkb2NVdWlkLCBhY3RvclxuICAgIGlmIChkcm9wRGF0YS50b2tlblV1aWQpIHtcbiAgICAgIGRvY1V1aWQgPSBkcm9wRGF0YS50b2tlblV1aWRcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkcm9wRGF0YS51dWlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZG9jVXVpZCA9IGRyb3BEYXRhLnV1aWRcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jVXVpZCA9XG4gICAgICAgIGRyb3BEYXRhLnNjZW5lSWQgJiYgZHJvcERhdGEudG9rZW5JZFxuICAgICAgICAgID8gYFNjZW5lLiR7ZHJvcERhdGEuc2NlbmVJZH0uVG9rZW4uJHtkcm9wRGF0YS50b2tlbklkfWBcbiAgICAgICAgICA6IGRyb3BEYXRhLmFjdG9ySWQgfHwgZHJvcERhdGEuYWN0b3JLZXkgfHwgZHJvcERhdGEuaWRcbiAgICB9XG4gICAgaWYgKGRyb3BEYXRhLnR5cGUgPT09ICdUb2tlbicpIHtcbiAgICAgIGRvY1V1aWQgPSBkcm9wRGF0YS51dWlkXG4gICAgfSBlbHNlIGlmIChkb2NVdWlkKSB7XG4gICAgICBhY3RvciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KGRvY1V1aWQpXG4gICAgICBpZiAoIWFjdG9yICYmIGRyb3BEYXRhLnR5cGUgPT09ICdJdGVtJykgZG9jVXVpZCA9IG51bGxcbiAgICB9XG5cbiAgICBpZiAoYWN0b3IgJiYgZG9jVXVpZCAhPT0gYWN0b3IudXVpZCkge1xuICAgICAgZG9jVXVpZCA9IGFjdG9yLnV1aWRcbiAgICB9XG4gICAgcmV0dXJuIGRvY1V1aWRcbiAgfVxuXG4gIHN0YXRpYyBnZXREb2N1bWVudEZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gbnVsbFxuICAgIC8vIENhc2UgMCAtIGEgZG9jdW1lbnQgVXVpZFxuICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRG9jdW1lbnRVdWlkKGtleSkpIHtcbiAgICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRG9jdW1lbnRVdWlkUGFjayhrZXkpKSByZXR1cm4gZnJvbVV1aWQoa2V5KSAvLyBUT0RPIENoZWNrIHdlIGNhbiBkbyB0aGF0XG4gICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5TZnJvbVV1aWQoa2V5KVxuICAgIH1cblxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICBpZiAoIXRva2VuLnNjZW5lKSB0b2tlbi5zY2VuZSA9IGR1cGxpY2F0ZShzY2VuZSlcbiAgICAgIHJldHVybiB0b2tlblxuICAgIH1cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChrZXkpIHx8IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIGNvbnN0IGRvYyA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KGtleSlcbiAgICBpZiAoIWRvYykgcmV0dXJuIG51bGxcbiAgICBpZiAoZG9jLmFjdG9yKSByZXR1cm4gZG9jLmFjdG9yXG4gICAgaWYgKGRvYy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ0NvQ0FjdG9yJykgcmV0dXJuIGRvY1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGZvbGRlciBvbiB0aGUgYWN0b3JzIHRhYiBjYWxsZWQgXCJJbXBvcnRlZCBDaGFyYWN0ZXJzXCIgaWYgdGhlIGZvbGRlciBkb2Vzbid0IGV4aXN0LlxuICAgKiBAcmV0dXJucyB7Rm9sZGVyfSB0aGUgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzICgpIHtcbiAgICBsZXQgZm9sZGVyTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbXBvcnRlZENoYXJhY3RlcnNGb2xkZXInKVxuICAgIGlmIChmb2xkZXJOYW1lID09PSAnQ29DNy5JbXBvcnRlZENoYXJhY3RlcnNGb2xkZXInKSB7XG4gICAgICBmb2xkZXJOYW1lID0gJ0ltcG9ydGVkIGNoYXJhY3RlcnMnXG4gICAgfVxuICAgIGxldCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPSBnYW1lLmZvbGRlcnMuZmluZChcbiAgICAgIGVudHJ5ID0+IGVudHJ5Lm5hbWUgPT09IGZvbGRlck5hbWUgJiYgZW50cnkudHlwZSA9PT0gJ0FjdG9yJ1xuICAgIClcbiAgICBpZiAoXG4gICAgICBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPT09IG51bGwgfHxcbiAgICAgIHR5cGVvZiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICAvLyBDcmVhdGUgdGhlIGZvbGRlclxuICAgICAgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID0gYXdhaXQgRm9sZGVyLmNyZWF0ZSh7XG4gICAgICAgIG5hbWU6IGZvbGRlck5hbWUsXG4gICAgICAgIHR5cGU6ICdBY3RvcicsXG4gICAgICAgIHBhcmVudDogbnVsbFxuICAgICAgfSlcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyZWF0ZWRJbXBvcnRlZENoYXJhY3RlcnNGb2xkZXInKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyXG4gIH1cblxuICAvKipcbiAgICogZ3Vlc3NJdGVtLCB0cnkgYW5kIGZpbmQgdGhlIGl0ZW0gaW4gdGhlIGxvY2F0aW9ucyBkZWZpbmVkIGluICR7c291cmNlfSBpID0gSXRlbSBEaXJlY3RvcnksIHcgPSBXb3JsZCBDb21wZW5kaXVtcywgbSA9IE1vZHVsZSBDb21wZW5kaXVtcywgcyA9IFN5c3RlbSBDb21wZW5kaXVtc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBJdGVtIHR5cGUgdG8gZmluZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIGl0ZW0gdG8gZmluZFxuICAgKiBAcGFyYW0ge09iamVjdH0gY29tYmF0IG51bGwgKGRlZmF1bHQpLiBJZiBib29sZWFuIGNvbWJhdCBwcm9wZXJ0eSBvZiBza2lsbCBtdXN0IG1hdGNoXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgJycgKGRlZmF1bHQpLiBDaGVjayBvcmRlclxuICAgKiBAcGFyYW0ge09iamVjdH0gZmFsbGJhY2tBbnkgZmFsc2UgKGRlZmF1bHQpLiBTaG91bGQgYW55IHNwZWNpYWxpemF0aW9uIHRoYXQgaXNuJ3QgZm91bmQgdHJ5IHVzaW5nIChBbnkpIGl0ZW1zXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IGZvcm1hdHRlZCBBY3RvciBkYXRhIEl0ZW0gb3IgbnVsbFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGd1ZXNzSXRlbSAoXG4gICAgdHlwZSxcbiAgICBuYW1lLFxuICAgIHsgY29tYmF0ID0gbnVsbCwgc291cmNlID0gJycsIGZhbGxiYWNrQW55ID0gZmFsc2UgfSA9IHt9XG4gICkge1xuICAgIGxldCBleGlzdGluZyA9IG51bGxcbiAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgZm9yIChsZXQgbyA9IDAsIG9NID0gc291cmNlLmxlbmd0aDsgbyA8IG9NOyBvKyspIHtcbiAgICAgIHN3aXRjaCAoc291cmNlLnN1YnN0cmluZyhvLCBvICsgMSkpIHtcbiAgICAgICAgY2FzZSAnaSc6XG4gICAgICAgICAgZXhpc3RpbmcgPSBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgICBpdGVtID0+IGl0ZW0udHlwZSA9PT0gdHlwZSAmJlxuICAgICAgICAgICAgICBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSAmJlxuICAgICAgICAgICAgICAoY29tYmF0ID09PSBudWxsIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSBjb21iYXQpXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3cnOlxuICAgICAgICBjYXNlICdtJzpcbiAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgcGFjay5tZXRhZGF0YS50eXBlID09PSAnSXRlbScgJiZcbiAgICAgICAgICAgICAgKChzb3VyY2Vbb10gPT09ICd3JyAmJiBwYWNrLm1ldGFkYXRhLnBhY2thZ2UgPT09ICd3b3JsZCcpIHx8XG4gICAgICAgICAgICAgICAgKHNvdXJjZVtvXSA9PT0gJ1MnICYmIHBhY2subWV0YWRhdGEucGFja2FnZSA9PT0gJ0NvQzcnKSB8fFxuICAgICAgICAgICAgICAgIChzb3VyY2Vbb10gPT09ICdzJyAmJlxuICAgICAgICAgICAgICAgICAgIVsnd29ybGQnLCAnQ29DNyddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEucGFja2FnZSkpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnRzKClcbiAgICAgICAgICAgICAgZXhpc3RpbmcgPSBkb2N1bWVudHMuZmluZChcbiAgICAgICAgICAgICAgICBpdGVtID0+XG4gICAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPT09IHR5cGUgJiZcbiAgICAgICAgICAgICAgICAgIGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lICYmXG4gICAgICAgICAgICAgICAgICAoY29tYmF0ID09PSBudWxsIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSBjb21iYXQpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZhbGxiYWNrQW55ICYmIHR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gbmFtZS5tYXRjaCgvXiguKyBcXCgpKD8hYW55KS4rKFxcKSkkLylcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBtYXRjaFsxXSArICdhbnknICsgbWF0Y2hbMl0sXG4gICAgICAgICAgeyBjb21iYXQsIHNvdXJjZSB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgdG9LZWJhYkNhc2UgKHMpIHtcbiAgICBpZiAoIXMpIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBjb25zdCBtYXRjaCA9IHMubWF0Y2goL1tBLVpdezIsfSg/PVtBLVpdW2Etel0rWzAtOV0qfFxcYil8W0EtWl0/W2Etel0rWzAtOV0qfFtBLVpdfFswLTldKy9nKVxuXG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuXG4gICAgcmV0dXJuIG1hdGNoLmpvaW4oJy0nKS50b0xvd2VyQ2FzZSgpXG4gIH1cblxuICBzdGF0aWMgc29ydEJ5TmFtZUtleSAoYSwgYikge1xuICAgIHJldHVybiBhLm5hbWVcbiAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgLmxvY2FsZUNvbXBhcmUoXG4gICAgICAgIGIubmFtZVxuICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgIC50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIGZsYXR0ZW5PYmplY3QsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DSURFZGl0b3IgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY29jLWlkLWVkaXRvciddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY29jLWlkLWVkaXRvci5oYnMnLFxuICAgICAgd2lkdGg6IDkwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgdGl0bGU6ICdDb0M3LkNvQ0lERmxhZy50aXRsZScsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHN1Ym1pdE9uQ2xvc2U6IHRydWUsXG4gICAgICBzdWJtaXRPbkNoYW5nZTogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5zdXBwb3J0ZWRMYW5ndWFnZXMgPSBDT05GSUcuc3VwcG9ydGVkTGFuZ3VhZ2VzXG5cbiAgICB0aGlzLm9wdGlvbnMuZWRpdGFibGUgPSB0aGlzLm9iamVjdC5zaGVldC5pc0VkaXRhYmxlXG5cbiAgICBzaGVldERhdGEuZ3Vlc3NDb2RlID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmd1ZXNzSWQodGhpcy5vYmplY3QpXG4gICAgc2hlZXREYXRhLmlkUHJlZml4ID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmdldFByZWZpeCh0aGlzLm9iamVjdClcblxuICAgIHNoZWV0RGF0YS5jb2NpZEZsYWcgPSB0aGlzLm9iamVjdC5mbGFncz8uQ29DNz8uY29jaWRGbGFnXG5cbiAgICBzaGVldERhdGEuaWQgPSBzaGVldERhdGEuY29jaWRGbGFnPy5pZCB8fCAnJ1xuICAgIHNoZWV0RGF0YS5sYW5nID0gc2hlZXREYXRhLmNvY2lkRmxhZz8ubGFuZyB8fCBnYW1lLmkxOG4ubGFuZ1xuICAgIHNoZWV0RGF0YS5wcmlvcml0eSA9IHNoZWV0RGF0YS5jb2NpZEZsYWc/LnByaW9yaXR5IHx8IDBcblxuICAgIHNoZWV0RGF0YS5lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBzaGVldERhdGEuZXJhcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSxcbiAgICAgICAgaXNFbmFibGVkOiAoc2hlZXREYXRhLmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLmVyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBjb25zdCBDb0NJREtleXMgPSBmbGF0dGVuT2JqZWN0KGdhbWUuaTE4bi50cmFuc2xhdGlvbnMuQ29DNy5Db0NJREZsYWcua2V5cyA/PyB7fSlcbiAgICBjb25zdCBwcmVmaXggPSBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoc2hlZXREYXRhLmlkUHJlZml4KSlcbiAgICBzaGVldERhdGEuZXhpc3RpbmdLZXlzID0gT2JqZWN0LmtleXMoQ29DSURLZXlzKS5yZWR1Y2UoKG9iaiwgaykgPT4ge1xuICAgICAgaWYgKGsubWF0Y2gocHJlZml4KSkge1xuICAgICAgICBvYmoucHVzaCh7IGssIG5hbWU6IENvQ0lES2V5c1trXSB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9ialxuICAgIH0sIFtdKS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS5pc1N5c3RlbUlEID0gKHR5cGVvZiBDb0NJREtleXNbc2hlZXREYXRhLmlkXSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgY29uc3QgbWF0Y2ggPSBzaGVldERhdGEuaWQubWF0Y2goL14oW15cXFxcLl0rKVxcLihbXlxcXFwuXSopXFwuKC4rKS8pXG4gICAgc2hlZXREYXRhLl9leGlzdGluZyA9IChtYXRjaCAmJiB0eXBlb2YgbWF0Y2hbM10gIT09ICd1bmRlZmluZWQnID8gbWF0Y2hbM10gOiAnJylcblxuICAgIGlmIChzaGVldERhdGEuaWQgJiYgc2hlZXREYXRhLmxhbmcpIHtcbiAgICAgIC8vIEZpbmQgb3V0IGlmIHRoZXJlIGV4aXN0cyBhIGR1cGxpY2F0ZSBDb0NJRFxuICAgICAgY29uc3Qgd29ybGREb2N1bWVudHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEQWxsKHtcbiAgICAgICAgY29jaWQ6IHNoZWV0RGF0YS5pZCxcbiAgICAgICAgbGFuZzogc2hlZXREYXRhLmxhbmcsXG4gICAgICAgIHNjb3BlOiAnd29ybGQnXG4gICAgICB9KVxuICAgICAgY29uc3QgdXNlZEVyYXMgPSB7fVxuICAgICAgY29uc3QgdW5pcXVlV29ybGRQcmlvcml0eSA9IHt9XG4gICAgICBzaGVldERhdGEud29ybGREb2N1bWVudEluZm8gPSB3b3JsZERvY3VtZW50cy5tYXAoKGQpID0+IHtcbiAgICAgICAgaWYgKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodW5pcXVlV29ybGRQcmlvcml0eSwgZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF0pKSB7XG4gICAgICAgICAgICAgIHVuaXF1ZVdvcmxkUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF1dID0gMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdW5pcXVlV29ybGRQcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXV0rK1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1bmlxdWVXb3JsZFByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLyonXSA9IDFcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlcmFzID0gKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyA/IE9iamVjdC5lbnRyaWVzKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4gZVswXSkuc29ydCgpIDogW10pXG4gICAgICAgIGZvciAoY29uc3QgZXJhIG9mIGVyYXMpIHtcbiAgICAgICAgICB1c2VkRXJhc1tlcmFdID0gQ09DNy5lcmFzW2VyYV0gPz8gJz8nXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlcmFzOiBlcmFzLnJlZHVjZShmdW5jdGlvbiAoYWxsLCBjdXJyZW50KSB7XG4gICAgICAgICAgICBhbGxbY3VycmVudF0gPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gYWxsXG4gICAgICAgICAgfSwge30pLFxuICAgICAgICAgIHByaW9yaXR5OiBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5LFxuICAgICAgICAgIGxhbmc6IGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcubGFuZyA/PyAnZW4nLFxuICAgICAgICAgIGxpbms6IFRleHRFZGl0b3IuZW5yaWNoSFRNTChkLmxpbmssIHsgYXN5bmM6IGZhbHNlIH0pLFxuICAgICAgICAgIGZvbGRlcjogZD8uZm9sZGVyPy5uYW1lXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBpZiAoT2JqZWN0LmVudHJpZXModW5pcXVlV29ybGRQcmlvcml0eSkuZmlsdGVyKGMgPT4gY1sxXSA+IDEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2hlZXREYXRhLndhcm5EdXBsaWNhdGVXb3JsZFByaW9yaXR5ID0gdHJ1ZVxuICAgICAgfVxuICAgICAgc2hlZXREYXRhLndvcmxkRHVwbGljYXRlcyA9IHdvcmxkRG9jdW1lbnRzLmxlbmd0aCA/PyAwXG5cbiAgICAgIGNvbnN0IGNvbXBlbmRpdW1Eb2N1bWVudHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEQWxsKHtcbiAgICAgICAgY29jaWQ6IHNoZWV0RGF0YS5pZCxcbiAgICAgICAgbGFuZzogc2hlZXREYXRhLmxhbmcsXG4gICAgICAgIHNjb3BlOiAnY29tcGVuZGl1bXMnXG4gICAgICB9KVxuICAgICAgY29uc3QgdW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5ID0ge31cbiAgICAgIHNoZWV0RGF0YS5jb21wZW5kaXVtRG9jdW1lbnRJbmZvID0gY29tcGVuZGl1bURvY3VtZW50cy5tYXAoKGQpID0+IHtcbiAgICAgICAgaWYgKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5LCBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXSkpIHtcbiAgICAgICAgICAgICAgdW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdXSA9IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXV0rK1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvKiddID0gMVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVyYXMgPSAoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzID8gT2JqZWN0LmVudHJpZXMoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiBlWzBdKS5zb3J0KCkgOiBbXSlcbiAgICAgICAgZm9yIChjb25zdCBlcmEgb2YgZXJhcykge1xuICAgICAgICAgIHVzZWRFcmFzW2VyYV0gPSBDT0M3LmVyYXNbZXJhXSA/PyAnPydcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVyYXM6IGVyYXMucmVkdWNlKGZ1bmN0aW9uIChhbGwsIGN1cnJlbnQpIHtcbiAgICAgICAgICAgIGFsbFtjdXJyZW50XSA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiBhbGxcbiAgICAgICAgICB9LCB7fSksXG4gICAgICAgICAgcHJpb3JpdHk6IGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHksXG4gICAgICAgICAgbGFuZzogZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5sYW5nID8/ICdlbicsXG4gICAgICAgICAgbGluazogVGV4dEVkaXRvci5lbnJpY2hIVE1MKGQubGluaywgeyBhc3luYzogZmFsc2UgfSksXG4gICAgICAgICAgZm9sZGVyOiBkPy5mb2xkZXI/Lm5hbWUgPz8gJydcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGlmIChPYmplY3QuZW50cmllcyh1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHkpLmZpbHRlcihjID0+IGNbMV0gPiAxKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNoZWV0RGF0YS53YXJuRHVwbGljYXRlQ29tcGVuZGl1bVByaW9yaXR5ID0gdHJ1ZVxuICAgICAgfVxuICAgICAgc2hlZXREYXRhLmNvbXBlbmRpdW1EdXBsaWNhdGVzID0gY29tcGVuZGl1bURvY3VtZW50cy5sZW5ndGggPz8gMFxuICAgICAgc2hlZXREYXRhLnVzZWRFcmFzID0gW11cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHVzZWRFcmFzKSkge1xuICAgICAgICBzaGVldERhdGEudXNlZEVyYXMucHVzaCh7XG4gICAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBzaGVldERhdGEudXNlZEVyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNoZWV0RGF0YS5jb21wZW5kaXVtRG9jdW1lbnRJbmZvID0gW11cbiAgICAgIHNoZWV0RGF0YS53b3JsZERvY3VtZW50SW5mbyA9IFtdXG4gICAgICBzaGVldERhdGEud29ybGREdXBsaWNhdGVzID0gMFxuICAgICAgc2hlZXREYXRhLmNvbXBlbmRpdW1EdXBsaWNhdGVzID0gMFxuICAgICAgc2hlZXREYXRhLndhcm5EdXBsaWNhdGVXb3JsZFByaW9yaXR5ID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS53YXJuRHVwbGljYXRlQ29tcGVuZGl1bVByaW9yaXR5ID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCdhLmNvcHktdG8tY2xpcGJvYXJkJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKCQodGhpcykuc2libGluZ3MoJ2lucHV0JykudmFsKCkpXG4gICAgfSlcblxuICAgIGlmICghdGhpcy5vYmplY3Quc2hlZXQuaXNFZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25DbGlja1RvZ2dsZS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCdpbnB1dFtuYW1lPV9leGlzdGluZycpLmNoYW5nZShmdW5jdGlvbiAoZSkge1xuICAgICAgY29uc3Qgb2JqID0gJCh0aGlzKVxuICAgICAgY29uc3QgcHJlZml4ID0gb2JqLmRhdGEoJ3ByZWZpeCcpXG4gICAgICBsZXQgdmFsdWUgPSBvYmoudmFsKClcbiAgICAgIGlmICh2YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgdmFsdWUgPSBwcmVmaXggKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKHZhbHVlKVxuICAgICAgfVxuICAgICAgaHRtbC5maW5kKCdpbnB1dFtuYW1lPWlkXScpLnZhbCh2YWx1ZSkudHJpZ2dlcignY2hhbmdlJylcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCdzZWxlY3RbbmFtZT1rbm93bl0nKS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNvbnN0IG9iaiA9ICQodGhpcylcbiAgICAgIGh0bWwuZmluZCgnaW5wdXRbbmFtZT1pZF0nKS52YWwob2JqLnZhbCgpKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJ2FbZGF0YS1ndWVzc10nKS5jbGljayhhc3luYyBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBjb25zdCBvYmogPSAkKHRoaXMpXG4gICAgICBjb25zdCBndWVzcyA9IG9iai5kYXRhKCdndWVzcycpXG4gICAgICBodG1sLmZpbmQoJ2lucHV0W25hbWU9aWRdJykudmFsKGd1ZXNzKS50cmlnZ2VyKCdjaGFuZ2UnKVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZXJhVG9nZ2xlIChkb2N1bWVudCwgcHJvcGVydHlJZCkge1xuICAgIGlmIChkb2N1bWVudC50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICAvLyBTZXR1cHMgY2FuIG9ubHkgaGF2ZSBvbmUgZXJhIHRvIG1ha2Ugc3VyZSB0aGUgY29ycmVjdCBza2lsbHMgYXJlIHBvcHVsYXRlZCB2aWEgQ29DIElEXG4gICAgICBjb25zdCB1cGRhdGUgPSB7XG4gICAgICAgIFtwcm9wZXJ0eUlkXTogdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKGRvY3VtZW50LmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpKSB7XG4gICAgICAgICAgaWYgKGtleSAhPT0gcHJvcGVydHlJZCkge1xuICAgICAgICAgICAgdXBkYXRlWyctPScgKyBrZXldID0gbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgZG9jdW1lbnQudXBkYXRlKHtcbiAgICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMnOiB1cGRhdGVcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcz8uW3Byb3BlcnR5SWRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBhd2FpdCBkb2N1bWVudC51cGRhdGUoe1xuICAgICAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzJzoge1xuICAgICAgICAgICAgW3Byb3BlcnR5SWRdOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgZG9jdW1lbnQudXBkYXRlKHtcbiAgICAgICAgICBbYGZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMuJHtwcm9wZXJ0eUlkfWBdOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IGRvY3VtZW50LnVwZGF0ZSh7XG4gICAgICAgIFtgZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcy4tPSR7cHJvcGVydHlJZH1gXTogbnVsbFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25DbGlja1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IENvQ0lERWRpdG9yLmVyYVRvZ2dsZSh0aGlzLm9iamVjdCwgcHJvcGVydHlJZClcbiAgICB0aGlzLnJlbmRlcigpXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCBpZCA9IGZvcm1EYXRhLmlkIHx8ICcnXG4gICAgYXdhaXQgdGhpcy5vYmplY3QudXBkYXRlKHtcbiAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5pZCc6IGlkLFxuICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmxhbmcnOiBmb3JtRGF0YS5sYW5nIHx8IGdhbWUuaTE4bi5sYW5nLFxuICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5JzogZm9ybURhdGEucHJpb3JpdHkgfHwgMCxcbiAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzJzogKHRoaXMub2JqZWN0LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pXG4gICAgfSlcbiAgICBjb25zdCBodG1sID0gJCh0aGlzLm9iamVjdC5zaGVldC5lbGVtZW50KS5maW5kKCdoZWFkZXIud2luZG93LWhlYWRlciBhLmhlYWRlci1idXR0b24uZWRpdC1jb2MtaWQtd2FybmluZyxoZWFkZXIud2luZG93LWhlYWRlciBhLmhlYWRlci1idXR0b24uZWRpdC1jb2MtaWQtZXhpc2l0aW5nJylcbiAgICBpZiAoaHRtbC5sZW5ndGgpIHtcbiAgICAgIGh0bWwuY3NzKHtcbiAgICAgICAgY29sb3I6IChpZCA/ICd2YXIoLS1jb2xvci10ZXh0LWxpZ2h0LWhpZ2hsaWdodCknIDogJ3JlZCcpXG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcigpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5pbXBvcnQgeyBDb0NJREVkaXRvciB9IGZyb20gJy4uL2FwcHMvY29jLWlkLWVkaXRvci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gKGhlYWRlckJ1dHRvbnMsIHNoZWV0KSB7XG4gIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgIGNvbnN0IHNoZWV0Q29DSUQgPSBzaGVldC5vYmplY3QuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZ1xuICAgIGNvbnN0IG5vSWQgPSAodHlwZW9mIHNoZWV0Q29DSUQgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBzaGVldENvQ0lELmlkID09PSAndW5kZWZpbmVkJyB8fCBzaGVldENvQ0lELmlkID09PSAnJylcbiAgICBjb25zdCBDb0NJREVkaXRvckJ1dHRvbiA9IHtcbiAgICAgIGNsYXNzOiAobm9JZCA/ICdlZGl0LWNvYy1pZC13YXJuaW5nJyA6ICdlZGl0LWNvYy1pZC1leGlzaXRpbmcnKSxcbiAgICAgIGxhYmVsOiAnQ29DNy5Db0NJREZsYWcuaWQnLFxuICAgICAgaWNvbjogJ2ZhcyBmYS1maW5nZXJwcmludCcsXG4gICAgICBvbmNsaWNrOiAoKSA9PiB7XG4gICAgICAgIG5ldyBDb0NJREVkaXRvcihzaGVldC5vYmplY3QsIHt9KS5yZW5kZXIodHJ1ZSwgeyBmb2N1czogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBudW1iZXJPZkJ1dHRvbnMgPSBoZWFkZXJCdXR0b25zLmxlbmd0aFxuICAgIGhlYWRlckJ1dHRvbnMuc3BsaWNlKG51bWJlck9mQnV0dG9ucyAtIDEsIDAsIENvQ0lERWRpdG9yQnV0dG9uKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0aXZlRWZmZWN0LCBnYW1lICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb0M3QWN0aXZlRWZmZWN0IGV4dGVuZHMgQWN0aXZlRWZmZWN0IHtcbiAgYXBwbHkgKGFjdG9yLCBjaGFuZ2UpIHtcbiAgICBpZiAoY2hhbmdlLmtleSA9PT0gJ3N5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlJykge1xuICAgICAgLy8gQXJtb3IgY2FuIGJlIGZyZWUgdGV4dCBpZiBib3RoIGFyZSBudW1iZXJzIGFsbG93IGNhbGN1bGF0aW9uXG4gICAgICBpZiAoIWlzTmFOKGNoYW5nZS52YWx1ZSkgJiYgIWlzTmFOKGFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlKSkge1xuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZSA9IE51bWJlcihhY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNoYW5nZS5rZXkgPT09ICdzeXN0ZW0uYXR0cmlicy5kYi52YWx1ZScpIHtcbiAgICAgIC8vIElmIGRiIGlzIGN1cnJlbnRseSBhIG51bWJlciBhbGxvdyBzdHJpbmdzIHRvIGJlIGFwcGxpZWRcbiAgICAgIGlmIChpc05hTihjaGFuZ2UudmFsdWUpICYmICFpc05hTihhY3Rvci5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSkpIHtcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUgPSBTdHJpbmcoYWN0b3Iuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNoYW5nZXMgPSBzdXBlci5hcHBseShhY3RvciwgY2hhbmdlKVxuICAgIHJldHVybiBjaGFuZ2VzXG4gIH1cblxuICAvKipcbiAgICogTWFuYWdlIEFjdGl2ZSBFZmZlY3QgaW5zdGFuY2VzIHRocm91Z2ggdGhlIEFjdG9yIFNoZWV0IHZpYSBlZmZlY3QgY29udHJvbCBidXR0b25zLlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50ICAgICAgVGhlIGxlZnQtY2xpY2sgZXZlbnQgb24gdGhlIGVmZmVjdCBjb250cm9sXG4gICAqIEBwYXJhbSB7QWN0b3J8SXRlbX0gb3duZXIgICAgICBUaGUgb3duaW5nIGRvY3VtZW50IHdoaWNoIG1hbmFnZXMgdGhpcyBlZmZlY3RcbiAgICogQHJldHVybnMge1Byb21pc2V8bnVsbH0gICAgICAgIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBjaGFuZ2VzIGFyZSBjb21wbGV0ZS5cbiAgICovXG4gIHN0YXRpYyBvbk1hbmFnZUFjdGl2ZUVmZmVjdCAoZXZlbnQsIG93bmVyKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJ2xpJylcbiAgICBjb25zdCBlZmZlY3QgPSBsaS5kYXRhc2V0LmVmZmVjdElkXG4gICAgICA/IG93bmVyLmVmZmVjdHMuZ2V0KGxpLmRhdGFzZXQuZWZmZWN0SWQpXG4gICAgICA6IG51bGxcbiAgICBzd2l0Y2ggKGEuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2NyZWF0ZSc6XG4gICAgICAgIHJldHVybiBvd25lci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRWZmZWN0TmV3JyksXG4gICAgICAgICAgICBpY29uOiAnaWNvbnMvc3ZnL2F1cmEuc3ZnJyxcbiAgICAgICAgICAgIG9yaWdpbjogb3duZXIudXVpZCxcbiAgICAgICAgICAgICdkdXJhdGlvbi5yb3VuZHMnOlxuICAgICAgICAgICAgICBsaS5kYXRhc2V0LmVmZmVjdFR5cGUgPT09ICd0ZW1wb3JhcnknID8gMSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGRpc2FibGVkOiBsaS5kYXRhc2V0LmVmZmVjdFR5cGUgPT09ICdpbmFjdGl2ZSdcbiAgICAgICAgICB9XG4gICAgICAgIF0pXG4gICAgICBjYXNlICdlZGl0JzpcbiAgICAgICAgcmV0dXJuIGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgIHJldHVybiBlZmZlY3QuZGVsZXRlKClcbiAgICAgIGNhc2UgJ3RvZ2dsZSc6XG4gICAgICAgIHJldHVybiBlZmZlY3QudXBkYXRlKHsgZGlzYWJsZWQ6ICFlZmZlY3QuZGlzYWJsZWQgfSlcbiAgICB9XG4gIH1cblxuICBfcHJlcGFyZUR1cmF0aW9uICgpIHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IHN1cGVyLl9wcmVwYXJlRHVyYXRpb24oKVxuICAgIGlmIChkdXJhdGlvbi50eXBlID09PSAnc2Vjb25kcycpIHtcbiAgICAgIGlmIChkdXJhdGlvbi5zZWNvbmRzID4gMzYwMCkge1xuICAgICAgICBkdXJhdGlvbi5sYWJlbCA9IG5ldyBEYXRlKGR1cmF0aW9uLnNlY29uZHMgKiAxMDAwKS50b0lTT1N0cmluZygpLnNsaWNlKDExLCAxOSlcbiAgICAgIH0gZWxzZSBpZiAoZHVyYXRpb24uc2Vjb25kcyA+IDEwMCkge1xuICAgICAgICBkdXJhdGlvbi5sYWJlbCA9IG5ldyBEYXRlKGR1cmF0aW9uLnNlY29uZHMgKiAxMDAwKS50b0lTT1N0cmluZygpLnNsaWNlKDE0LCAxOSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGR1cmF0aW9uXG4gIH1cblxuICBnZXQgaXNTdGF0dXMgKCkge1xuICAgIGNvbnN0IHN0YXR1c0lkID0gdGhpcy5nZXRGbGFnKCdjb3JlJywgJ3N0YXR1c0lkJylcbiAgICByZXR1cm4gW1xuICAgICAgJ3RlbXBvSW5zYW5lJyxcbiAgICAgICdpbmRlZkluc2FuZScsXG4gICAgICAnY3JpdGljYWxXb3VuZHMnLFxuICAgICAgJ2R5aW5nJyxcbiAgICAgICdkZWFkJyxcbiAgICAgICd1bmNvbnNjaW91cycsXG4gICAgICAncHJvbmUnXG4gICAgXS5pbmNsdWRlcyhzdGF0dXNJZClcbiAgfVxuXG4gIHN0YXRpYyBwcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyAoZWZmZWN0cywgeyBzdGF0dXMgPSB0cnVlIH0gPSB7fSkge1xuICAgIC8vIERlZmluZSBlZmZlY3QgaGVhZGVyIGNhdGVnb3JpZXNcbiAgICBjb25zdCBjYXRlZ29yaWVzID0ge1xuICAgICAgdGVtcG9yYXJ5OiB7XG4gICAgICAgIHR5cGU6ICd0ZW1wb3JhcnknLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdUZW1wb3JhcnknKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH0sXG4gICAgICBwYXNzaXZlOiB7XG4gICAgICAgIHR5cGU6ICdwYXNzaXZlJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnUGFzc2l2ZScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfSxcbiAgICAgIGluYWN0aXZlOiB7XG4gICAgICAgIHR5cGU6ICdpbmFjdGl2ZScsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0luYWN0aXZlJyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9LFxuICAgICAgc3VwcHJlc3NlZDoge1xuICAgICAgICB0eXBlOiAnc3VwcHJlc3NlZCcsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1N1cHByZXNzZWQnKSxcbiAgICAgICAgZWZmZWN0czogW10sXG4gICAgICAgIGluZm86IFtnYW1lLmkxOG4ubG9jYWxpemUoJ1VuYXZhaWxhYmxlJyldXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgY2F0ZWdvcmllcy5zdGF0dXMgPSB7XG4gICAgICAgIHR5cGU6ICdzdGF0dXMnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTdGF0dXMnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFjdGl2ZSBlZmZlY3RzLCBjbGFzc2lmeWluZyB0aGVtIGludG8gY2F0ZWdvcmllc1xuICAgIGZvciAoY29uc3QgZSBvZiBlZmZlY3RzKSB7XG4gICAgICBlLl9nZXRTb3VyY2VOYW1lKCkgLy8gVHJpZ2dlciBhIGxvb2t1cCBmb3IgdGhlIHNvdXJjZSBuYW1lXG4gICAgICBpZiAoZS5pc1N1cHByZXNzZWQpIGNhdGVnb3JpZXMuc3VwcHJlc3NlZC5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgaWYgKGUuaXNTdGF0dXMpIGNhdGVnb3JpZXMuc3RhdHVzLmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBpZiAoZS5kaXNhYmxlZCkgY2F0ZWdvcmllcy5pbmFjdGl2ZS5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgaWYgKGUuaXNUZW1wb3JhcnkpIGNhdGVnb3JpZXMudGVtcG9yYXJ5LmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBjYXRlZ29yaWVzLnBhc3NpdmUuZWZmZWN0cy5wdXNoKGUpXG4gICAgfVxuXG4gICAgY2F0ZWdvcmllcy5zdXBwcmVzc2VkLmhpZGRlbiA9ICFjYXRlZ29yaWVzLnN1cHByZXNzZWQuZWZmZWN0cy5sZW5ndGhcbiAgICByZXR1cm4gY2F0ZWdvcmllc1xuICB9XG5cbiAgc3RhdGljIHByZXBhcmVOUENBY3RpdmVFZmZlY3RDYXRlZ29yaWVzIChlZmZlY3RzKSB7XG4gICAgbGV0IGNvdW50ID0gMFxuICAgIC8vIERlZmluZSBlZmZlY3QgaGVhZGVyIGNhdGVnb3JpZXNcbiAgICBjb25zdCBjYXRlZ29yaWVzID0ge1xuICAgICAgYWN0aXZlOiB7XG4gICAgICAgIHR5cGU6ICdhY3RpdmUnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdBY3RpdmUnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH0sXG4gICAgICBpbmFjdGl2ZToge1xuICAgICAgICB0eXBlOiAnaW5hY3RpdmUnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdJbmFjdGl2ZScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBJdGVyYXRlIG92ZXIgYWN0aXZlIGVmZmVjdHMsIGNsYXNzaWZ5aW5nIHRoZW0gaW50byBjYXRlZ29yaWVzXG4gICAgZm9yIChjb25zdCBlIG9mIGVmZmVjdHMpIHtcbiAgICAgIGNvdW50ICs9IDFcbiAgICAgIGUuX2dldFNvdXJjZU5hbWUoKSAvLyBUcmlnZ2VyIGEgbG9va3VwIGZvciB0aGUgc291cmNlIG5hbWVcbiAgICAgIGlmIChlLmlzU3VwcHJlc3NlZCB8fCBlLmRpc2FibGVkKSBjYXRlZ29yaWVzLmluYWN0aXZlLmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBjYXRlZ29yaWVzLmFjdGl2ZS5lZmZlY3RzLnB1c2goZSlcbiAgICB9XG5cbiAgICBpZiAoY291bnQgPiAwKSBjYXRlZ29yaWVzLmV4cGVuZGVkID0gdHJ1ZVxuICAgIHJldHVybiBjYXRlZ29yaWVzXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLGdhbWUgKi9cbmV4cG9ydCBjbGFzcyBDb0M3Q29udGV4dE1lbnUge1xuICBiaW5kIChtZW51LCBodG1sLCBjYWxsYmFjaykge1xuICAgIHRoaXMuX2NhbGxiYWNrID0gY2FsbGJhY2tcbiAgICB0aGlzLl9odG1sID0gaHRtbFxuICAgIHRoaXMuX21lbnUgPSBtZW51XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1lbnVUcmlnZ2VyID0gaHRtbC5maW5kKGBbZGF0YS1jb250ZXh0LW1lbnU9JHttZW51LmlkfV1gKSAvLyBGaW5kIGFsbCBtZW51IHRyaWdnZXJzLlxuICAgICAgaWYgKG1lbnVUcmlnZ2VyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC8vIElmIHRoZXJlIGlzIG5vIHRyaWdnZXIsIGRvIG5vdCBjb250aW51ZS5cbiAgICAgIG1lbnVUcmlnZ2VyLmNvbnRleHRtZW51KHRoaXMuX29uQ29udGV4dE1lbnUuYmluZCh0aGlzKSkgLy8gQXR0YWNoIHRoZSBoYW5kbGVyLlxuICAgICAgY29uc3QgbWVudUVsZW1lbnQgPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlTWVudShtZW51KSAvLyBCdWlsZCB0aGUgbWVudVxuICAgICAgbWVudUVsZW1lbnQub24oJ2NsaWNrJyxcbiAgICAgICAgJy5tZW51LWFjdGlvbicsXG4gICAgICAgIHRoaXMuX29uTWVudUFjdGlvbi5iaW5kKHRoaXMpKVxuICAgICAgLy8gY29uc3QgZG9jdW1lbnRNZW51ID0gdGhpcy5tZW51Q29udGFpbmVyLmZpbmQoYC5jb250ZXh0LW1lbnUtd3JhcHBlci4ke21lbnUuaWR9YClcbiAgICAgIGlmICh0aGlzLm1lbnUubGVuZ3RoICE9PSAwKSB0aGlzLm1lbnUucmVwbGFjZVdpdGgobWVudUVsZW1lbnQpXG4gICAgICBlbHNlIHRoaXMubWVudUNvbnRhaW5lci5hcHBlbmQobWVudUVsZW1lbnQpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgZ2V0IG1lbnVDb250YWluZXIgKCkge1xuICAgIGxldCBtZW51Q29udGFpbmVyID0gdGhpcy5faHRtbC5maW5kKCcubWVudS1jb250YWluZXInKVxuICAgIGlmIChtZW51Q29udGFpbmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5faHRtbC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJtZW51LWNvbnRhaW5lclwiPjwvZGl2PicpXG4gICAgICBtZW51Q29udGFpbmVyID0gdGhpcy5faHRtbC5maW5kKCcubWVudS1jb250YWluZXInKVxuICAgIH1cbiAgICByZXR1cm4gbWVudUNvbnRhaW5lclxuICB9XG5cbiAgZ2V0IG1lbnUgKCkge1xuICAgIC8vIGNvbnN0IG1lbnVDb250YWluZXIgPSB0aGlzLm1lbnVDb250YWluZXJcbiAgICAvLyBpZiAoIW1lbnVDb250YWluZXIgfHwgbWVudUNvbnRhaW5lci5sZW5ndGggPT09IDApIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMubWVudUNvbnRhaW5lci5maW5kKGAuY29udGV4dC1tZW51LXdyYXBwZXIuJHt0aGlzLl9tZW51LmlkfWApXG4gIH1cblxuICBfb25NZW51QWN0aW9uIChldmVudCkge1xuICAgIC8vIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAvLyBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYnJhbmNoJykpIHJldHVyblxuICAgIHJldHVybiB0aGlzLl9jYWxsYmFjayhldmVudCwgdGhpcy50YXJnZXQpXG4gIH1cblxuICBzdGF0aWMgY2xvc2VBbGwgKCkge1xuICAgIGNvbnN0IG1lbnVDb250YWluZXJzID0gJCgnYm9keScpLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXG4gICAgY29uc3QgbWVudXMgPSBtZW51Q29udGFpbmVycy5maW5kKCcuY29udGV4dC1tZW51LXdyYXBwZXInKVxuICAgIG1lbnVzLmVhY2goZnVuY3Rpb24gKGksIG0pIHsgbS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbicgfSlcbiAgICAvLyBib2R5LmZpbmQoJy5tZW51LXdyYXBwZXInKS5oaWRlKClcbiAgfVxuXG4gIF9vbkNvbnRleHRNZW51IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KHRydWUpXG4gICAgQ29DN0NvbnRleHRNZW51LmNsb3NlQWxsKCkgLy8gT25seSAxIG1lbnUgY2FuIGJlIG9wZW4uXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXRcbiAgICB0aGlzLnRhcmdldCA9IHRhcmdldFxuICAgIGlmICghdGFyZ2V0KSByZXR1cm5cbiAgICBjb25zdCBtZW51TmFtZSA9IHRhcmdldC5kYXRhc2V0Py5jb250ZXh0TWVudVxuICAgIGlmIChtZW51TmFtZSA9PT0gdGhpcy5fbWVudS5pZCkge1xuICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMubWVudVxuICAgICAgaWYgKHdyYXBwZXIubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBzdWJNZW51ID0gd3JhcHBlci5maW5kKCcuc3ViLW1lbnUnKVxuICAgICAgICBsZXQgbGVmdCA9IGV2ZW50LmNsaWVudFhcbiAgICAgICAgbGV0IHRvcCA9IGV2ZW50LmNsaWVudFlcbiAgICAgICAgY29uc3QgbWVudUhlaWdodCA9IHdyYXBwZXIub3V0ZXJIZWlnaHQoKVxuICAgICAgICBjb25zdCBtZW51V2lkdGggPSB3cmFwcGVyLm91dGVyV2lkdGgoKVxuICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IDwgbWVudUhlaWdodCArIHRvcCkge1xuICAgICAgICAgIHRvcCA9IHRvcCAtIG1lbnVIZWlnaHRcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCBtZW51V2lkdGggKyBsZWZ0KSB7XG4gICAgICAgICAgbGVmdCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gbWVudVdpZHRoXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Yk1lbnUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IG1lbnVXaWR0aCArIGxlZnQgKyBzdWJNZW51Lm91dGVyV2lkdGgoKSkge1xuICAgICAgICAgICAgc3ViTWVudS5jc3Moe1xuICAgICAgICAgICAgICByaWdodDogYCR7bWVudVdpZHRoIC0gNX1weGAsXG4gICAgICAgICAgICAgIGxlZnQ6ICcnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdWJNZW51LmNzcyh7XG4gICAgICAgICAgICAgIGxlZnQ6IGAke21lbnVXaWR0aCAtIDV9cHhgLFxuICAgICAgICAgICAgICByaWdodDogJydcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdyYXBwZXIuY3NzKHtcbiAgICAgICAgICBsZWZ0OiBgJHtsZWZ0fXB4YCxcbiAgICAgICAgICB0b3A6IGAke3RvcH1weGAsXG4gICAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNhblNlZSAodmlzaWJpbGl0eSkge1xuICAgIHN3aXRjaCAodmlzaWJpbGl0eS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdnbSc6XG4gICAgICAgIHJldHVybiBnYW1lLnVzZXIuaXNHTVxuICAgICAgY2FzZSAndHJ1c3RlZCc6XG4gICAgICAgIHJldHVybiBnYW1lLnVzZXIuaXNUcnVzdGVkXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBDcmVhdGVNZW51IChtZW51KSB7XG4gICAgY29uc3QgY2xhc3NlcyA9IHR5cGVvZiBtZW51LmNsYXNzZXMgPT09ICdzdHJpbmcnID8gW21lbnUuY2xhc3Nlc10gOiBtZW51LmNsYXNzZXNcbiAgICBjbGFzc2VzLnB1c2goJ2NvbnRleHQtbWVudS13cmFwcGVyJylcbiAgICBjb25zdCB3cmFwcGVyID0gJCgnPGRpdj48L2Rpdj4nKVxuICAgIHdyYXBwZXIuYWRkQ2xhc3MobWVudS5pZClcbiAgICBjbGFzc2VzLmZvckVhY2goYyA9PiB3cmFwcGVyLmFkZENsYXNzKGMpKVxuICAgIGlmIChtZW51LnNlY3Rpb24pIHtcbiAgICAgIG1lbnUuc2VjdGlvbi5mb3JFYWNoKHMgPT4ge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gQ29DN0NvbnRleHRNZW51LkNyZWF0ZVNlY3Rpb24ocywgeyBtdWx0aTogdHJ1ZSB9KVxuICAgICAgICBpZiAoc2VjdGlvbikgd3JhcHBlci5hcHBlbmQoc2VjdGlvbilcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNlY3Rpb24gPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlU2VjdGlvbihtZW51KVxuICAgICAgaWYgKHNlY3Rpb24pIHdyYXBwZXIuYXBwZW5kKHNlY3Rpb24pXG4gICAgfVxuICAgIHJldHVybiB3cmFwcGVyXG4gIH1cblxuICBzdGF0aWMgQ3JlYXRlU2VjdGlvbiAocywgeyBtdWx0aSA9IGZhbHNlLCBzdWJNZW51ID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFzLml0ZW1zKSByZXR1cm4gbnVsbFxuICAgIGlmIChzLnZpc2liaWxpdHkgJiYgIUNvQzdDb250ZXh0TWVudS5jYW5TZWUocy52aXNpYmlsaXR5KSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjbGFzc2VzID0gcy5jbGFzc2VzID8gdHlwZW9mIHMuY2xhc3NlcyA9PT0gJ3N0cmluZycgPyBbcy5jbGFzc2VzXSA6IHMuY2xhc3NlcyA6IFtdXG4gICAgaWYgKG11bHRpKSBjbGFzc2VzLnB1c2goJ21lbnUtc2VjdGlvbicpXG4gICAgaWYgKHN1Yk1lbnUpIGNsYXNzZXMucHVzaCgnc3ViLW1lbnUnKVxuICAgIGNvbnN0IHNlY3Rpb24gPSAkKCc8dWw+PC91bD4nKVxuICAgIGNsYXNzZXMuZm9yRWFjaChjID0+IHNlY3Rpb24uYWRkQ2xhc3MoYykpXG4gICAgcy5pdGVtcy5mb3JFYWNoKGkgPT4ge1xuICAgICAgY29uc3QgbGkgPSAkKCc8bGk+PC9saT4nKVxuICAgICAgbGkuYWRkQ2xhc3MoJ21lbnUtaXRlbScpXG4gICAgICBpZiAoaS5hY3Rpb24pIHtcbiAgICAgICAgbGkuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uJylcbiAgICAgICAgbGkuYXR0cignZGF0YS1hY3Rpb24nLCBpLmFjdGlvbilcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgaS5sYWJlbCA9PT0gJ3N0cmluZycpIGxpLmFwcGVuZChgPHNwYW4+JHtpLmxhYmVsfTwvc3Bhbj5gKVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmIChpLmxhYmVsLmljb24pIGxpLmFwcGVuZChgPGkgY2xhc3M9XCIke2kubGFiZWwuaWNvbn1cIj48L2k+YClcbiAgICAgICAgaWYgKGkubGFiZWwudGV4dCkgbGkuYXBwZW5kKGA8c3Bhbj4ke2kubGFiZWwudGV4dH08L3NwYW4+YClcbiAgICAgIH1cbiAgICAgIGlmIChpLnN1Yk1lbnUpIHtcbiAgICAgICAgbGkuYWRkQ2xhc3MoJ3N1Yi1tZW51LWJ1dHRvbicpXG4gICAgICAgIGxpLmFwcGVuZCgnPGkgY2xhc3M9XCJmYXMgZmEtY2FyZXQtcmlnaHRcIj48L2k+JylcbiAgICAgICAgY29uc3Qgc3ViID0gQ29DN0NvbnRleHRNZW51LkNyZWF0ZVNlY3Rpb24oaS5zdWJNZW51LCB7IHN1Yk1lbnU6IHRydWUgfSlcbiAgICAgICAgaWYgKHN1YikgbGkuYXBwZW5kKHN1YilcbiAgICAgIH1cbiAgICAgIHNlY3Rpb24uYXBwZW5kKGxpKVxuICAgIH0pXG4gICAgcmV0dXJuIHNlY3Rpb25cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEFjdG9yU2hlZXQsIENoYXRNZXNzYWdlLCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZm91bmRyeSwgZ2FtZSwgZ2V0UHJvcGVydHksIEhvb2tzLCBJdGVtLCBtZXJnZU9iamVjdCwgUm9sbCwgVGV4dEVkaXRvciwgdWkgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jb250ZW50LWxpbmstZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuLi8uLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4uLy4uL2NvbnRleHQtbWVudS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JTaGVldCBleHRlbmRzIEFjdG9yU2hlZXQge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLnNob3dIaWRkZW5EZXZNZW51ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG5cbiAgICBzaGVldERhdGEuY2FuRHJhZ1Rva2VuID0gISF0aGlzLnRva2VuICYmIGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmxpbmtlZEFjdG9yID0gdGhpcy5hY3Rvci5wcm90b3R5cGVUb2tlbj8uYWN0b3JMaW5rID09PSB0cnVlXG4gICAgc2hlZXREYXRhLmlzVG9rZW4gPSB0aGlzLmFjdG9yLmlzVG9rZW5cbiAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUgPSB7fVxuICAgIHNoZWV0RGF0YS5za2lsbHMgPSB7fVxuICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbHMgPSB7fVxuICAgIHNoZWV0RGF0YS53ZWFwb25zID0ge31cbiAgICBzaGVldERhdGEucmFuZ2VXcG4gPSBbXVxuICAgIHNoZWV0RGF0YS5tZWxlZVdwbiA9IFtdXG4gICAgc2hlZXREYXRhLmFjdG9yRmxhZ3MgPSB7fVxuXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPVxuICAgICAgdGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJ1xuICAgICAgICA/IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5hY3Rvci5lZmZlY3RzKVxuICAgICAgICA6IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZU5QQ0FjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5hY3Rvci5lZmZlY3RzKVxuXG4gICAgc2hlZXREYXRhLnBlcm1pc3Npb25MaW1pdGVkID0gIWdhbWUudXNlci5pc0dNICYmICh0aGlzLmFjdG9yLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IHRoaXMuYWN0b3Iub3duZXJzaGlwLmRlZmF1bHQpID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLkxJTUlURURcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmFsbG93VW5sb2NrID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxuICAgICAgZ2FtZS51c2VyLmlzR00gfHxcbiAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2NyZWF0aW9uJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJykpXG4gICAgaWYgKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdjcmVhdGlvbicgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgICkge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSAhPT0gJ3ZlaGljbGUnKSB7XG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcyA9IHtcbiAgICAgICAgICBzdHI6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuU1RSJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlN0cmVuZ3RoJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5DT04nLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQ29uc3RpdHV0aW9uJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpejoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5TSVonLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXg6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuREVYJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkRleHRlcml0eScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuQVBQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkFwcGVhcmFuY2UnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW50OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLklOVCcsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcG93OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLlBPVycsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Qb3dlcicsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlZHU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuRURVJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkVkdWNhdGlvbicsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMgPSB7XG4gICAgICAgICAgaHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdIUCcsXG4gICAgICAgICAgICBsYWJlbDogJ0hpdCBwb2ludHMnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbXA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdIUCcsXG4gICAgICAgICAgICBsYWJlbDogJ01hZ2ljIHBvaW50cycsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsY2s6IHsgdmFsdWU6IG51bGwsIHNob3J0OiAnTENLJywgbGFiZWw6ICdMdWNrJyB9LFxuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IDk5LFxuICAgICAgICAgICAgc2hvcnQ6ICdTQU4nLFxuICAgICAgICAgICAgbGFiZWw6ICdTYW5pdHknLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbW92OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnTU9WJyxcbiAgICAgICAgICAgIGxhYmVsOiAnTW92ZW1lbnQgcmF0ZScsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0RCJyxcbiAgICAgICAgICAgIGxhYmVsOiAnRGFtYWdlIGJvbnVzJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJ1aWxkOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQkxEJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQnVpbGQnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJtb3I6IHsgdmFsdWU6IG51bGwsIGF1dG86IGZhbHNlIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSA9IHtcbiAgICAgICAgICBwZXJzb25hbERlc2NyaXB0aW9uOiB7IHR5cGU6ICdzdHJpbmcnLCB2YWx1ZTogJycgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zKSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcyA9IHtcbiAgICAgICAgICBvY2N1cGF0aW9uOiAnJyxcbiAgICAgICAgICBhZ2U6ICcnLFxuICAgICAgICAgIHNleDogJycsXG4gICAgICAgICAgcmVzaWRlbmNlOiAnJyxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiAnJyxcbiAgICAgICAgICBhcmNoZXR5cGU6ICcnLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbjogJycsXG4gICAgICAgICAgcGxheWVybmFtZTogJydcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncykge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MgPSB7IGxvY2tlZDogdHJ1ZSwgbWFudWFsQ3JlZGl0OiBmYWxzZSB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNyZWRpdCkge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY3JlZGl0ID0ge1xuICAgICAgICAgIG1vbmV0YXJ5U3ltYm9sOiBudWxsLFxuICAgICAgICAgIG11bHRpcGxpZXI6IG51bGwsXG4gICAgICAgICAgc3BlbnQ6IG51bGwsXG4gICAgICAgICAgYXNzZXRzRGV0YWlsczogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRldmVsb3BtZW50KSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXZlbG9wbWVudCA9IHtcbiAgICAgICAgICBwZXJzb25hbDogbnVsbCxcbiAgICAgICAgICBvY2N1cGF0aW9uOiBudWxsLFxuICAgICAgICAgIGFyY2hldHlwZTogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSA9IFtdXG5cbiAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZUFyY2hldHlwZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJylcbiAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZU9yZ2FuaXphdGlvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgICAnQ29DNycsXG4gICAgICAgICdwdWxwUnVsZU9yZ2FuaXphdGlvbidcbiAgICAgIClcbiAgICB9XG5cbiAgICBzaGVldERhdGEuaXNEZWFkID0gdGhpcy5hY3Rvci5kZWFkXG4gICAgc2hlZXREYXRhLmlzRHlpbmcgPSB0aGlzLmFjdG9yLmR5aW5nXG5cbiAgICBpZiAoc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICAgIC8vIHNpIGMnZXN0IHVuZSBmb3JtdWxlIGV0IHF1J29uIHBldXQgbCdldmFsdWVyXG4gICAgICAgIC8vIGNlIGJsb2MgZGV2cmFpdCBldHJlIGTDqXBsYWPDqSBkYW5zIGxlIGJsb2MgX3VwZGF0ZUZvcm1EYXRhXG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IudHlwZSAhPT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIGlmIChpc05hTihOdW1iZXIoaXRlbS5zeXN0ZW0udmFsdWUpKSkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICAgICAgICAgIENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0XG4gICAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBnZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuc3Vic3RyaW5nKDUpXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSAoXG4gICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChpdGVtLnN5c3RlbS52YWx1ZSwgcGFyc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICkudG90YWxcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvclVuYWJsZVRvUGFyc2VTa2lsbEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLnN5c3RlbS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGxcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnZhbHVlID0gdmFsdWVcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtVG9VcGRhdGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXG4gICAgICAgICAgICAgICAgICBgW0NPQzddIChBY3Rvcjoke3RoaXMubmFtZX0pIEV2YWx1YXRpbmcgc2tpbGwgJHtpdGVtLm5hbWV9OiR7aXRlbS5zeXN0ZW0udmFsdWV9IHRvICR7dmFsdWV9YFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtVG9VcGRhdGUudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0udmFsdWUnOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcbiAgICAgICAgICAgIGNvbnN0IHsgYmFzZSwgcmF3VmFsdWUsIHZhbHVlIH0gPSBza2lsbC5zeXN0ZW1cblxuICAgICAgICAgICAgLy8gQXNzdW1lIGZhbGxiYWNrIHZhbHVlcywgdXNlZnVsIGZvciBpbml0aWFsIHNldHVwIG9mIHNraWxsc1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0ucmF3VmFsdWUgPSByYXdWYWx1ZSB8fCB2YWx1ZSB8fCBiYXNlXG4gICAgICAgICAgICBpdGVtLnN5c3RlbS52YWx1ZSA9IHZhbHVlIHx8IGJhc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmJhc2UgPSBhd2FpdCBza2lsbC5hc3luY0Jhc2UoKVxuXG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0udmFsdWUpIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgcGFydCBvZiBtaWdyYXRpb24gb3IgZG9uZSBhdCBpbml0ICFcbiAgICAgICAgICAgICAgLy8gV2FzIGRvbmUgd2hlbiBza2lsbCB2YWx1ZSB3YXMgY2hhbmdlZCB0byBiYXNlICsgYWRqdXN0ZW1lbnRcbiAgICAgICAgICAgICAgY29uc3QgZXhwID0gaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgICAgICAgICA/IHBhcnNlSW50KGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UpXG4gICAgICAgICAgICAgICAgOiAwXG4gICAgICAgICAgICAgIGxldCB1cGRhdGVkRXhwID0gZXhwICsgcGFyc2VJbnQoaXRlbS5zeXN0ZW0udmFsdWUpIC0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRFeHAgPD0gMCkgdXBkYXRlZEV4cCA9IG51bGxcbiAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFxuICAgICAgICAgICAgICAgIGBbQ09DN10gVXBkYXRpbmcgc2tpbGwgJHtza2lsbC5uYW1lfSBleHBlcmllbmNlLiBFeHBlcmllbmNlIG1pc3Npbmc6ICR7dXBkYXRlZEV4cH1gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBfaWQ6IGl0ZW0uX2lkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogdXBkYXRlZEV4cCxcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0udmFsdWUnOiBudWxsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICBpZiAoIWl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzKSBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cyA9IHt9XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UgPSB1cGRhdGVkRXhwXG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnJhd1ZhbHVlID0gc2tpbGwucmF3VmFsdWVcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0udmFsdWUgPSBza2lsbC52YWx1ZSAvLyBBQ1RJVkVfRUZGRUNUIG5lY2Vzc2FyeSB0byBhcHBseSBlZmZlY3RzXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS52YWx1ZSA9IHNraWxsLnZhbHVlIC8vIEFDVElWRV9FRkZFQ1QgbmVjZXNzYXJ5IHRvIGFwcGx5IGVmZmVjdHNcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0ucmF3VmFsdWUgPSBza2lsbC5yYXdWYWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsaXN0ID0gc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV1cbiAgICAgICAgaWYgKCFsaXN0KSB7XG4gICAgICAgICAgbGlzdCA9IFtdXG4gICAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV0gPSBsaXN0XG4gICAgICAgIH1cbiAgICAgICAgbGlzdC5wdXNoKGl0ZW0pXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgaXRlbVR5cGUgaW4gc2hlZXREYXRhLml0ZW1zQnlUeXBlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtVHlwZV0uc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICB9XG5cbiAgICAgIC8vIHJlZG9uZGFudCBhdmVjIG1hdHJpY2UgaXRlbWJ5dHlwZVxuICAgICAgc2hlZXREYXRhLnNraWxscyA9IHNoZWV0RGF0YS5pdGVtc1xuICAgICAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnc2tpbGwnKVxuICAgICAgICAuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICAgIHNoZWV0RGF0YS5tZWxlZVNraWxscyA9IHNoZWV0RGF0YS5za2lsbHMuZmlsdGVyKFxuICAgICAgICBza2lsbCA9PlxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID09PSB0cnVlXG4gICAgICApXG4gICAgICBzaGVldERhdGEucmFuZ2VTa2lsbHMgPSBzaGVldERhdGEuc2tpbGxzLmZpbHRlcihcbiAgICAgICAgc2tpbGwgPT5cbiAgICAgICAgICBza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPT09IHRydWUgJiZcbiAgICAgICAgICBza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtID09PSB0cnVlXG4gICAgICApXG5cbiAgICAgIGNvbnN0IGNidFNraWxscyA9IHNoZWV0RGF0YS5za2lsbHMuZmlsdGVyKFxuICAgICAgICBza2lsbCA9PiBza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPT09IHRydWVcbiAgICAgIClcbiAgICAgIGlmIChjYnRTa2lsbHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBjYnRTa2lsbHMpIHtcbiAgICAgICAgICBzaGVldERhdGEuY29tYmF0U2tpbGxzW3NraWxsLl9pZF0gPSBza2lsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdlYXBvbnMgPSBzaGVldERhdGEuaXRlbXNCeVR5cGUud2VhcG9uXG5cbiAgICAgIGlmICh3ZWFwb25zKSB7XG4gICAgICAgIGZvciAoY29uc3Qgd2VhcG9uIG9mIHdlYXBvbnMpIHtcbiAgICAgICAgICB3ZWFwb24udXNlc0FsdGVybmF0ZVNraWxsID1cbiAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hdXRvID09PSB0cnVlIHx8XG4gICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYnJzdCA9PT0gdHJ1ZVxuICAgICAgICAgIGlmICghd2VhcG9uLnN5c3RlbS5hbW1vKSB3ZWFwb24uc3lzdGVtLmFtbW8gPSAwXG5cbiAgICAgICAgICB3ZWFwb24uc2tpbGxTZXQgPSB0cnVlXG4gICAgICAgICAgLy8gd2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLm5hbWUgPSAnJztcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4udmFsdWUgPSAwO1xuICAgICAgICAgIC8vIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lID0gJyc7XG4gICAgICAgICAgLy8gd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LnZhbHVlID0gMDtcbiAgICAgICAgICBpZiAod2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkID09PSAnJykge1xuICAgICAgICAgICAgLy8gVE9ETyA6IHNpIGwnSUQgbidlc3RzIHBhcyBkw6lmaW5pZSBtYWlzIHF1J3VuIG5vbSBhIMOpdMOpIGRvbm7DqSwgdXRpbGlzZXIgY2Ugbm9tIGV0IHRhbnRlciBkZSByZXRyb3V2ZXIgbGUgc2tpbGxcbiAgICAgICAgICAgIHdlYXBvbi5za2lsbFNldCA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRPRE8gOiBhdmFudCBkJ2Fzc2lnZXIgbGUgc2tpbGwgdsOpcmlmaWVyIHF1J2lsIGV4aXN0ZSB0b3Vqb3Vycy5cbiAgICAgICAgICAgIC8vIHNpIGlsIG4nZXhpc3RlIHBsdXMgaWwgZmF1dCBsZSByZXRyb3V2ZXIgb3UgcGFzc2VyIHNraWxsc2V0IGEgZmFsc2UuXG4gICAgICAgICAgICBpZiAoc2hlZXREYXRhLmNvbWJhdFNraWxsc1t3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWRdKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQod2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4ubmFtZSA9IHNraWxsLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLnZhbHVlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHdlYXBvbi5za2lsbFNldCA9IGZhbHNlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgIT09ICcnKSB7XG4gICAgICAgICAgICAgIGlmIChzaGVldERhdGEuY29tYmF0U2tpbGxzW3dlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZF0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lID0gc2tpbGwuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi52YWx1ZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB3ZWFwb24uc3lzdGVtLl9wcm9wZXJ0aWVzID0gW11cbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHt9XG4gICAgICAgICAgICBwcm9wZXJ0eS5pZCA9IGtleVxuICAgICAgICAgICAgcHJvcGVydHkubmFtZSA9IHZhbHVlXG4gICAgICAgICAgICBwcm9wZXJ0eS52YWx1ZSA9IHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICAgICAgICB3ZWFwb24uc3lzdGVtLl9wcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2hlZXREYXRhLndlYXBvbnNbd2VhcG9uLl9pZF0gPSB3ZWFwb25cbiAgICAgICAgICBpZiAod2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHNoZWV0RGF0YS5yYW5nZVdwbi5wdXNoKHdlYXBvbilcbiAgICAgICAgICBlbHNlIHNoZWV0RGF0YS5tZWxlZVdwbi5wdXNoKHdlYXBvbilcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0b2tlbiA9IHRoaXMudG9rZW5cbiAgICAgIHNoZWV0RGF0YS50b2tlbklkID0gdG9rZW5cbiAgICAgICAgPyBgJHt0b2tlbi5wYXJlbnQ/LmlkID8gdG9rZW4ucGFyZW50LmlkIDogJ1RPS0VOJ30uJHt0b2tlbi5pZH1gXG4gICAgICAgIDogbnVsbCAvLyBSRUZBQ1RPUklORyAoMilcblxuICAgICAgc2hlZXREYXRhLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSA9IGZhbHNlXG4gICAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykge1xuICAgICAgICBmb3IgKGNvbnN0IGNoYXJhY3RlcmlzdGljIG9mIE9iamVjdC52YWx1ZXMoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgICAgICBpZiAoIWNoYXJhY3RlcmlzdGljLnZhbHVlKSBjaGFyYWN0ZXJpc3RpYy5lZGl0YWJsZSA9IHRydWVcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXJkID0gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpYy52YWx1ZSAvIDIpXG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWMuZXh0cmVtZSA9IE1hdGguZmxvb3IoY2hhcmFjdGVyaXN0aWMudmFsdWUgLyA1KVxuXG4gICAgICAgICAgLy8gSWYgbm8gdmFsdWUgJiYgbm8gZm9ybXVsYSBkb24ndCBkaXNwbGF5IGNoYXJhYy5cbiAgICAgICAgICBpZiAoIWNoYXJhY3RlcmlzdGljLnZhbHVlICYmICFjaGFyYWN0ZXJpc3RpYy5mb3JtdWxhKSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5kaXNwbGF5ID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuZGlzcGxheSA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBpZiBhbnkgY2hhcmFjdGVyaXN0aWMgaGFzIG5vIHZhbHVlIGJ1dCBoYXMgYSBmb3JtdWxhLlxuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUgJiYgY2hhcmFjdGVyaXN0aWMuZm9ybXVsYSkge1xuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNoZWV0RGF0YS5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPVxuICAgICAgICAgICAgc2hlZXREYXRhLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSB8fFxuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGb3IgY29tcGF0IHdpdGggcHJldmlvdXMgY2hhcmFjdGVycyB0ZXN0IGlmIGF1dG8gaXMgZGVmaW5pZWQsIGlmIG5vdCB3ZSBkZWZpbmUgaXRcbiAgICBpZiAoIVsndmVoaWNsZScsICdjb250YWluZXInXS5pbmNsdWRlcyh0aGlzLmFjdG9yLnR5cGUpKSB7XG4gICAgICBjb25zdCBhdXRvID0gdGhpcy5hY3Rvci5jaGVja1VuZGVmaW5lZEF1dG8oKVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtID0gbWVyZ2VPYmplY3Qoc2hlZXREYXRhLmRhdGEuc3lzdGVtLCBhdXRvKVxuICAgIH0gZWxzZSB7XG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5ocC5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1wLmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuZGIuYXV0byA9IGZhbHNlXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPCAwKSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA9IG51bGxcbiAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIDwgMCkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlID0gbnVsbFxuXG4gICAgaWYgKCFbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmFjdG9yLnR5cGUpKSB7XG4gICAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSBpbnN0YW5jZW9mIEFycmF5ICYmIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkubGVuZ3RoKSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHlbMF0uaXNGaXJzdCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeVtzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5Lmxlbmd0aCAtIDFdLmlzTGFzdCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID0gZmFsc2VcblxuICAgIHNoZWV0RGF0YS5oYXNDb25kaXRpb25zID1cbiAgICAgIHRoaXMuYWN0b3IuZWZmZWN0cy5zaXplID4gMCB8fFxuICAgICAgKHR5cGVvZiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zKS5maWx0ZXIoXG4gICAgICAgICAgY29uZGl0aW9uID0+IHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZVxuICAgICAgICApLmxlbmd0aCA+IDApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICBzdGF0aWMgcGFyc2VGb3JtdWxhIChmb3JtdWxhKSB7XG4gICAgbGV0IHBhcnNlZEZvcm11bGEgPSBmb3JtdWxhXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQpKSB7XG4gICAgICBwYXJzZWRGb3JtdWxhID0gcGFyc2VkRm9ybXVsYS5yZXBsYWNlKGtleSwgdmFsdWUpXG4gICAgfVxuICAgIHJldHVybiBwYXJzZWRGb3JtdWxhXG4gIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0RFUFJFQ0FURUQgU0hPVUxEIE5PVCBIQVBQRU4hJylcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2Jhc2UuanMgZ2V0IHRva2VuS2V5KCk6IERFUFJFQ0FURUQgU0hPVUxEIE5PVCBIQVBQRU4hJylcbiAgICAvLyBpZiggdGhpcy50b2tlbikgcmV0dXJuIGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uZGF0YS5faWR9YDsgIC8vUkVGQUNUT1JJTkcgKDIpXG4gICAgLy8gcmV0dXJuIHRoaXMuYWN0b3IuaWQ7XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIC8vIHRoaXMuYWN0b3IubG9ja2VkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIGlmICghdGhpcy5tZW51cykgdGhpcy5tZW51cyA9IFtdXG5cbiAgICAgIGNvbnN0IHJvbGxNZW51ID0ge1xuICAgICAgICBpZDogJ3NraWxsLXJvbGwnLFxuICAgICAgICBjbGFzc2VzOiAncm9sbC1tZW51JyxcbiAgICAgICAgc2VjdGlvbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzZXM6ICdtYWluJyxcbiAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAncm9sbCcsIGxhYmVsOiAnUm9sbCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdvcHBvc2VkLXJvbGwnLCBsYWJlbDogJ09wcG9zZWQgcm9sbCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb21iaW5lZC1yb2xsJywgbGFiZWw6ICdDb21iaW5lZCByb2xsJyB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjbGFzc2VzOiAna2VlcGVyJyxcbiAgICAgICAgICAgIHZpc2liaWxpdHk6ICdnbScsXG4gICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHsgaWNvbjogJ2ZhcyBmYS1saW5rJywgdGV4dDogJ0xpbmsnIH0sXG4gICAgICAgICAgICAgICAgc3ViTWVudToge1xuICAgICAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdsaW5rLXRvb2wnLCBsYWJlbDogJ09wZW4gaW4gbGluayB0b29sJyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ3NlbmQtY2hhdCcsIGxhYmVsOiAnU2VuZCB0byBjaGF0JyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvcHktdG8tY2xpcGJvYXJkJywgbGFiZWw6ICdDb3B5IHRvIGNsaXAtYm9hcmQnIH1cbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAncmVxdWVzdC1yb2xsJywgbGFiZWw6ICdSZXF1ZXN0IHJvbGwnIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2FuTWVudSA9IHtcbiAgICAgICAgaWQ6ICdzYW4tcm9sbCcsXG4gICAgICAgIGNsYXNzZXM6ICdyb2xsLW1lbnUnLFxuICAgICAgICBzZWN0aW9uOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2xhc3NlczogJ21haW4nLFxuICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdlbmNvdW50ZXInLCBsYWJlbDogJ0VuY291bnRlcicgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdyb2xsJywgbGFiZWw6ICdSb2xsJyB9LFxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ29wcG9zZWQtcm9sbCcsIGxhYmVsOiAnT3Bwb3NlZCByb2xsJyB9LFxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvbWJpbmVkLXJvbGwnLCBsYWJlbDogJ0NvbWJpbmVkIHJvbGwnIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzZXM6ICdrZWVwZXInLFxuICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3RydXN0ZWQnLFxuICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdyZXF1ZXN0LXJvbGwnLCBsYWJlbDogJ1JlcXVlc3Qgcm9sbCcgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxhYmVsOiB7IGljb246ICdmYXMgZmEtbGluaycsIHRleHQ6ICdMaW5rJyB9LFxuICAgICAgICAgICAgICAgIHN1Yk1lbnU6IHtcbiAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay10b29sJywgbGFiZWw6ICdPcGVuIGluIGxpbmsgdG9vbCcgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZW5kLWNoYXQnLCBsYWJlbDogJ1NlbmQgdG8gY2hhdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb3B5LXRvLWNsaXBib2FyZCcsIGxhYmVsOiAnQ29weSB0byBjbGlwLWJvYXJkJyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2xpbmstZW5jb3VudGVyJywgbGFiZWw6ICdFbmNvdW50ZXInIH1cbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgcm9sbENvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICByb2xsQ29udGV4dE1lbnUuYmluZChyb2xsTWVudSwgaHRtbCwgdGhpcy5fb25Db250ZXh0TWVudUNsaWNrLmJpbmQodGhpcykpXG4gICAgICB0aGlzLm1lbnVzLnB1c2gocm9sbENvbnRleHRNZW51KVxuXG4gICAgICBjb25zdCBzYW5Db250ZXh0TWVudSA9IG5ldyBDb0M3Q29udGV4dE1lbnUoKVxuICAgICAgc2FuQ29udGV4dE1lbnUuYmluZChzYW5NZW51LCBodG1sLCB0aGlzLl9vbkNvbnRleHRNZW51Q2xpY2suYmluZCh0aGlzKSlcbiAgICAgIHRoaXMubWVudXMucHVzaChzYW5Db250ZXh0TWVudSlcbiAgICB9IGVsc2Uge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIC8vIGNvbnRleHQgbWVudSBiaW5kXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5jaGFyYWN0ZXJpc3RpYy1sYWJlbCcpXG4gICAgICAuY2xpY2sodGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJykuY2xpY2sodGhpcy5fb25Sb2xsU2tpbGxUZXN0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuc2tpbGwtaW1hZ2UnKS5jbGljayh0aGlzLl9vblJvbGxTa2lsbFRlc3QuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbC5yb2xsYWJsZScpXG4gICAgICAuY2xpY2sodGhpcy5fb25Sb2xsQXR0cmliVGVzdC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy50b2tlbi1kcmFnLWhhbmRsZScpXG4gICAgICAub24oJ2RyYWdzdGFydCcsIHRoaXMuX29uRHJhZ1Rva2VuU3RhcnQuYmluZCh0aGlzKSlcblxuICAgIC8vIE93bmVyIE9ubHkgTGlzdGVuZXJzXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNPd25lciAmJiB0eXBlb2YgdGhpcy5hY3Rvci5jb21wZW5kaXVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdDaGFyYWN0ZXJpc3RpYyhldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsJylcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdBdHRyaWJ1dGUoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnNhbi1jaGVjaycpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gdGhpcy5fb25EcmFnU2FuQ2hlY2soZXZlbnQpKVxuXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcud2VhcG9uLW5hbWUucm9sbGFibGUnKVxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuXG4gICAgICBodG1sLmZpbmQoJy5sb2NrJykuY2xpY2sodGhpcy5fb25Mb2NrQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcuZmxhZycpLmNsaWNrKHRoaXMuX29uRmxhZ0NsaWNrZWQuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmZvcm11bGEnKS5jbGljayh0aGlzLl9vbkZvcm11bGFDbGlja2VkLmJpbmQodGhpcykpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucm9sbC1jaGFyYWN0ZXJpdGljcycpXG4gICAgICAgIC5jbGljayh0aGlzLl9vblJvbGxDaGFyYWN0ZXJpdGljc1ZhbHVlLmJpbmQodGhpcykpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuYXZlcmFnZS1jaGFyYWN0ZXJpdGljcycpXG4gICAgICAgIC5jbGljayh0aGlzLl9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmF1dG8tdG9nZ2xlJykuY2xpY2sodGhpcy5fb25BdXRvVG9nZ2xlLmJpbmQodGhpcykpXG5cbiAgICAgIC8vIFN0YXR1cyBtb25pdG9yXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00gfHwgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhdHVzUGxheWVyRWRpdGFibGUnKSkge1xuICAgICAgICBodG1sLmZpbmQoJy5yZXNldC1jb3VudGVyJykuY2xpY2sodGhpcy5fb25SZXNldENvdW50ZXIuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuY29uZGl0aW9uLW1vbml0b3InKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkNvbmRpdGlvblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5pcy1keWluZycpLmNsaWNrKHRoaXMuaGVhbC5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5pcy1kZWFkJykuY2xpY2sodGhpcy5yZXZpdmUuYmluZCh0aGlzKSlcbiAgICAgIH1cblxuICAgICAgaHRtbC5maW5kKCcuZHlpbmctY2hlY2snKS5jbGljayh0aGlzLmNoZWNrRm9yRGVhdGguYmluZCh0aGlzKSlcblxuICAgICAgaHRtbC5maW5kKCcuaXRlbSAuaXRlbS1pbWFnZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVJvbGwoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLndlYXBvbi1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uV2VhcG9uUm9sbChldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuaXRlbS1uYW1lLmVmZmVjdC1uYW1lJylcbiAgICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uRWZmZWN0KGV2ZW50KSlcbiAgICAgIC8vIGh0bWxcbiAgICAgIC8vICAgLmZpbmQoJy5pdGVtLW5hbWUuZWZmZWN0LW5hbWUnKVxuICAgICAgLy8gICAua2V5ZG93bigoZXZlbnQpID0+IHtcbiAgICAgIC8vICAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSkge1xuICAgICAgLy8gICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdwb2ludGVyJylcbiAgICAgIC8vICAgICB9XG4gICAgICAvLyAgIH0pXG4gICAgICAvLyBodG1sXG4gICAgICAvLyAgIC5maW5kKCcuaXRlbS1uYW1lLmVmZmVjdC1uYW1lJylcbiAgICAgIC8vICAgLmtleWRvd24oKGV2ZW50KSA9PiB7XG4gICAgICAvLyAgICAgaWYgKGlzQ3RybEtleShldmVudCkpIHtcbiAgICAgIC8vICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgncG9pbnRlcicpXG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICB9KVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLndlYXBvbi1za2lsbC5yb2xsYWJsZScpXG4gICAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vbldlYXBvblNraWxsUm9sbChldmVudCkpXG4gICAgICBodG1sLmZpbmQoJy5yZWxvYWQtd2VhcG9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZWxvYWRXZWFwb24oZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnJlbG9hZC13ZWFwb24nKVxuICAgICAgICAub24oJ2NvbnRleHRtZW51JywgZXZlbnQgPT4gdGhpcy5fb25SZWxvYWRXZWFwb24oZXZlbnQpKVxuICAgICAgaHRtbC5maW5kKCcuYWRkLWFtbW8nKS5jbGljayh0aGlzLl9vbkFkZEFtby5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcucmVhZC1vbmx5JykuZGJsY2xpY2sodGhpcy5fdG9nZ2xlUmVhZE9ubHkuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwub24oJ2NsaWNrJywgJy53ZWFwb24tZGFtYWdlJywgdGhpcy5fb25XZWFwb25EYW1hZ2UuYmluZCh0aGlzKSlcblxuICAgICAgaHRtbC5maW5kKCcuaW52ZW50b3J5LWhlYWRlcicpLmNsaWNrKHRoaXMuX29uSW52ZW50b3J5SGVhZGVyLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5pdGVtcy1oZWFkZXInKS5jbGljayh0aGlzLl9vbkl0ZW1IZWFkZXIuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnNlY3Rpb24taGVhZGVyJykuY2xpY2sodGhpcy5fb25TZWN0aW9uSGVhZGVyLmJpbmQodGhpcykpXG5cbiAgICAgIGNvbnN0IHdoZWVsSW5wdXRzID0gaHRtbC5maW5kKCcuYXR0cmlidXRlLXZhbHVlJylcbiAgICAgIGZvciAoY29uc3Qgd2hlZWxJbnB1dCBvZiB3aGVlbElucHV0cykge1xuICAgICAgICB3aGVlbElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZXZlbnQgPT4gdGhpcy5fb25XaGVlbChldmVudCksIHtcbiAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLnNob3ctZGV0YWlsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCkpXG4gICAgaHRtbC5maW5kKCcuaXRlbS1wb3B1cCcpLmNsaWNrKHRoaXMuX29uSXRlbVBvcHVwLmJpbmQodGhpcykpXG5cbiAgICAvLyBVcGRhdGUgSW52ZW50b3J5IEl0ZW1cbiAgICBodG1sLmZpbmQoJy5zaG93LWRldGFpbCcpLmRibGNsaWNrKGV2ZW50ID0+IHRoaXMuX29uUmVuZGVySXRlbVNoZWV0KGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5pdGVtLWVkaXQnKS5jbGljayhldmVudCA9PiB0aGlzLl9vblJlbmRlckl0ZW1TaGVldChldmVudCkpXG5cbiAgICAvLyBEZWxldGUgSW52ZW50b3J5IEl0ZW1cbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGFzeW5jIGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtVG9EZWxldGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSwge1xuICAgICAgICBzdHJpY3Q6IHRydWVcbiAgICAgIH0pXG4gICAgICBhd2FpdCBpdGVtVG9EZWxldGUuZGVsZXRlKClcbiAgICAgIGxpLnNsaWRlVXAoMjAwLCAoKSA9PiB0aGlzLnJlbmRlcihmYWxzZSkpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1pdGVtJykuY2xpY2soZXYgPT4ge1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIHN3aXRjaCAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGUpIHtcbiAgICAgICAgY2FzZSAnYm9vayc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUJvb2soZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUl0ZW0oZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTa2lsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdzcGVsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNwZWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3dlYXBvbic6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IHt9XG4gICAgICAgICAgICBpZiAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0Lm1lbGVlKSB7XG4gICAgICAgICAgICAgIHByb3BlcnRpZXMubWVsZWUgPSB0cnVlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5ybmdkKSB7XG4gICAgICAgICAgICAgIHByb3BlcnRpZXMucm5nZCA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlXZWFwb24oZXYsIHByb3BlcnRpZXMpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIGh0bWwuZmluZCgnLmNsZWFuLXNraWxsLWxpc3QnKS5jbGljaygoKSA9PiB7XG4gICAgLy8gICB0aGlzLmFjdG9yLmNsZWFuU2tpbGxzKClcbiAgICAvLyB9KVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS10cmFkZScpLmNsaWNrKHRoaXMuX29uVHJhZGVJdGVtLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtbmV3LXNlY3Rpb24nKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmNyZWF0ZUJpb1NlY3Rpb24oKVxuICAgICAgdGhpcy5yZW5kZXIoKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZWxldGUtc2VjdGlvbicpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci5kZWxldGVCaW9TZWN0aW9uKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5tb3ZlLXNlY3Rpb24tdXAnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25VcChpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubW92ZS1zZWN0aW9uLWRvd24nKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25Eb3duKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZXZlbG9wbWVudC1mbGFnJykuZGJsY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIClcbiAgICAgIGl0ZW0udG9nZ2xlSXRlbUZsYWcoJ2RldmVsb3BlbWVudCcpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLm9jY3VwYXRpb24tc2tpbGwtZmxhZy5jbGlja2FibGUnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgKVxuICAgICAgaXRlbS50b2dnbGVJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFyY2hldHlwZS1za2lsbC1mbGFnLmNsaWNrYWJsZScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICApXG4gICAgICBpdGVtLnRvZ2dsZUl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5za2lsbC1kZXZlbG9wZW1lbnQnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmRldmVsb3BlbWVudFBoYXNlKGV2ZW50LnNoaWZ0S2V5KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5sdWNrLWRldmVsb3BtZW50JykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgaWYgKCFldmVudC5kZXRhaWwgfHwgZXZlbnQuZGV0YWlsID09PSAxKSB7XG4gICAgICAgIHRoaXMuYWN0b3IuZGV2ZWxvcEx1Y2soZXZlbnQuc2hpZnRLZXkpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmNsZWFyX2NvbmRpdGlvbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IGRpc2FibGUgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGNvbmRpdGlvbiBpbiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZSAhPT1cbiAgICAgICAgICAgICAgJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZGlzYWJsZVtgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb259LnZhbHVlYF0gPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGlzYWJsZSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuYWN0b3IudXBkYXRlKGRpc2FibGUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGVmZmVjdHMgPSB0aGlzLmFjdG9yLmVmZmVjdHMubWFwKGVmZmVjdCA9PiBlZmZlY3QuaWQpXG4gICAgICBpZiAoZWZmZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuYWN0b3IuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIGVmZmVjdHMpXG4gICAgICB9XG4gICAgfSlcblxuICAgIENvQzdMaW5rLmJpbmRFdmVudHNIYW5kbGVyKGh0bWwpXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHVzZWQgZm9yIGRldiBwdXJwb3NlcyBvbmx5ICFcbiAgICAgKi9cbiAgICBodG1sLmZpbmQoJy50ZXN0LXRyaWdnZXInKS5jbGljayhhc3luYyBldmVudCA9PiB7XG4gICAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKSkgcmV0dXJuIG51bGxcbiAgICAgIGF3YWl0IEl0ZW0uY3JlYXRlKHtcbiAgICAgICAgbmFtZTogJ19fQ29DN0ludGVybmFsSXRlbV9fJyxcbiAgICAgICAgdHlwZTogJ2l0ZW0nXG4gICAgICB9KVxuICAgICAgLy8gY29uc3QgZWZmZWN0cyA9IGF3YWl0IGl0ZW0uY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgIC8vICAge1xuICAgICAgLy8gICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRWZmZWN0TmV3JyksXG4gICAgICAvLyAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXG4gICAgICAvLyAgICAgb3JpZ2luOiBudWxsLFxuICAgICAgLy8gICAgICdkdXJhdGlvbi5yb3VuZHMnOiB1bmRlZmluZWQsXG4gICAgICAvLyAgICAgZGlzYWJsZWQ6IHRydWVcbiAgICAgIC8vICAgfVxuICAgICAgLy8gXSlcbiAgICAgIC8vIGNvbnN0IGVmZmVjdCA9IGVmZmVjdHNbMF1cbiAgICAgIC8vIGF3YWl0IGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggJ2VmZmVjdCBjcmVhdGVkICEnKVxuICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdlZmZlY3QgY3JlYXRlZCAhJylcbiAgICB9KVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcFNraWxsRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlci5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXR0cmlidXRlRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuYXV0by10b2dnbGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXV0b0VudGVyLmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tY29udHJvbC5kZXZlbG9wbWVudC1mbGFnJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudC5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG5cbiAgICAvLyBBY3RpdmUgRWZmZWN0c1xuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuYWN0b3IpKVxuICB9XG5cbiAgdG9vbFRpcFNraWxsRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXNDb21iYXQgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xhc3NMaXN0Py5jb250YWlucyhcbiAgICAgICAgICAgICdjb21iYXQnXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHNraWxsSWQgPSBpdGVtLmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBzaGVldC5hY3Rvci5pdGVtcy5nZXQoc2tpbGxJZClcbiAgICAgICAgICAgIGxldCB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgaXNDb21iYXQgPyAnQ29DNy5Ub29sVGlwQ29tYmF0JyA6ICdDb0M3LlRvb2xUaXBTa2lsbCcsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBza2lsbDogc2tpbGwubmFtZSxcbiAgICAgICAgICAgICAgICByZWd1bGFyOiBza2lsbC52YWx1ZSxcbiAgICAgICAgICAgICAgICBoYXJkOiBNYXRoLmZsb29yKHNraWxsLnZhbHVlIC8gMiksXG4gICAgICAgICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcihza2lsbC52YWx1ZSAvIDUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICB0b29sVGlwICtcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcbiAgICAgICAgICAgICAgICAgICAgc2hlZXQuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNoZWV0LmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBDaGFyYWN0ZXJpc3RpY0VudGVyIChldmVudCkge1xuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXG4gICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNoYXIgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLmNoYXItYm94JylcbiAgICAgICAgICBpZiAodHlwZW9mIGNoYXIgIT09ICd1bmRlZmluZWQnICYmICEhY2hhcikge1xuICAgICAgICAgICAgY29uc3QgY2hhcklkID0gY2hhci5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJpc3RpYyA9IHNoZWV0LmFjdG9yLmNoYXJhY3RlcmlzdGljc1tjaGFySWRdXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsJywge1xuICAgICAgICAgICAgICBza2lsbDogY2hhcmFjdGVyaXN0aWMubGFiZWwsXG4gICAgICAgICAgICAgIHJlZ3VsYXI6IGNoYXJhY3RlcmlzdGljLnZhbHVlID8/IDAsXG4gICAgICAgICAgICAgIGhhcmQ6IGNoYXJhY3RlcmlzdGljLmhhcmQgPz8gMCxcbiAgICAgICAgICAgICAgZXh0cmVtZTogY2hhcmFjdGVyaXN0aWMuZXh0cmVtZSA/PyAwXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEF0dHJpYnV0ZUVudGVyIChldmVudCkge1xuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXG4gICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGF0dHJpYiA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuYXR0cmlidXRlJylcbiAgICAgICAgICBpZiAodHlwZW9mIGF0dHJpYiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZUlkID0gYXR0cmliLmRhdGFzZXQuYXR0cmliXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9ICcnXG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gc2hlZXQuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbYXR0cmlidXRlSWRdXG4gICAgICAgICAgICBzd2l0Y2ggKGF0dHJpYnV0ZUlkKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ2xjayc6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsJywge1xuICAgICAgICAgICAgICAgICAgc2tpbGw6IGF0dHJpYnV0ZXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICByZWd1bGFyOiBhdHRyaWJ1dGVzLnZhbHVlID8/IDAsXG4gICAgICAgICAgICAgICAgICBoYXJkOiBNYXRoLmZsb29yKChhdHRyaWJ1dGVzLnZhbHVlID8/IDApIC8gMiksXG4gICAgICAgICAgICAgICAgICBleHRyZW1lOiBNYXRoLmZsb29yKChhdHRyaWJ1dGVzLnZhbHVlID8/IDApIC8gNSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgICAgICAgICAgdG9vbFRpcCA9XG4gICAgICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICBvdGhlcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXQuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnZGInOlxuICAgICAgICAgICAgICAgIHRvb2xUaXAgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcERCJylcbiAgICAgICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgJ3Nhbic6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNhbml0eScsIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsOiAnU2FuaXR5JyxcbiAgICAgICAgICAgICAgICAgIHJlZ3VsYXI6IGF0dHJpYnV0ZXMudmFsdWUgPz8gMCxcbiAgICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyAyKSxcbiAgICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyA1KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb2xUaXBLZWVwZXJTYW5pdHknKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJycpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBBdXRvRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHRvb2xUaXAgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcEF1dG9Ub2dnbGUnKVxuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBGbGFnRm9yRGV2ZWxvcG1lbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuaXRlbScpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGl0ZW0uZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHNoZWV0LmFjdG9yLml0ZW1zLmdldChza2lsbElkKVxuICAgICAgICAgICAgY29uc3QgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsRmxhZ1RvZ2dsZScsIHtcbiAgICAgICAgICAgICAgc3RhdHVzOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzLmRldmVsb3BlbWVudFxuICAgICAgICAgICAgICAgICAgPyAnQ29DNy5Ub29sVGlwU2tpbGxGbGFnZ2VkJ1xuICAgICAgICAgICAgICAgICAgOiAnQ29DNy5Ub29sVGlwU2tpbGxVbmZsYWdnZWQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgX29uQ29udGV4dE1lbnVDbGljayAoZXZlbnQsIHRhcmdldCkge1xuICAgIGNvbnN0IHRhcmdldFR5cGUgPSB0YXJnZXQuZGF0YXNldD8udGFyZ2V0VHlwZVxuICAgIGNvbnN0IHJvbGxPcHRpb25zID0ge1xuICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH1cbiAgICBzd2l0Y2ggKHRhcmdldFR5cGUpIHtcbiAgICAgIGNhc2UgKCdza2lsbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTExcbiAgICAgICAgcm9sbE9wdGlvbnMuc2tpbGxJZCA9IHRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcblxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2NoYXJhY3RlcmlzdGljJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICByb2xsT3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9IHRhcmdldC5jbG9zZXN0KCcuY2hhci1ib3gnKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgKCdhdHRyaWJ1dGUnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICByb2xsT3B0aW9ucy5hdHRyaWJ1dGUgPSB0YXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAoJ3JvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ29wcG9zZWQtcm9sbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2NvbWJpbmVkLXJvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgncmVxdWVzdC1yb2xsJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxcbiAgICAgICAgcm9sbE9wdGlvbnMucHJldmVudFN0YW5kYnkgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2xpbmstdG9vbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5vcGVuTGlua1Rvb2wgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnc2VuZC1jaGF0Jyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NoYXQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnY29weS10by1jbGlwYm9hcmQnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2xpbmstZW5jb3VudGVyJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdlbmNvdW50ZXInKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICAgIHJvbGxPcHRpb25zLmZhc3RGb3J3YXJkID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHJvbGxPcHRpb25zKVxuICB9XG5cbiAgX29uUmVuZGVySXRlbVNoZWV0IChldmVudCkge1xuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25UcmFkZUl0ZW0gKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgbGV0IGNvbnRlbnQgPSAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0VXNlclRvR2l2ZVRvJylcbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgYWN0b3JGcm9tOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgc2NlbmU6IG51bGwsXG4gICAgICBhY3RvclRvOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgaXRlbTogaXRlbS5pZFxuICAgIH1cbiAgICBpZiAodGhpcy50b2tlbj8uYWN0b3IpIHtcbiAgICAgIG1lc3NhZ2UuYWN0b3JGcm9tID0gdGhpcy50b2tlbi5pZFxuICAgICAgbWVzc2FnZS5zY2VuZSA9IHRoaXMudG9rZW4ucGFyZW50LmlkXG4gICAgfVxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihlID0+IHtcbiAgICAgIGlmICghWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKGUudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hY3Rvci5pZCA9PT0gZS5pZCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGxldCB2aXNpYmxlID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUub3duZXJzaGlwKSkge1xuICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnIHx8IGsgPT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICAgIHZpc2libGUgPSB2aXNpYmxlIHx8IHYgIT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTk9ORVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmlzaWJsZVxuICAgIH0pXG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgY29udGVudCA9XG4gICAgICAgIGNvbnRlbnQgKyAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhY3Rvci5pZCArICdcIj4nICsgYWN0b3IubmFtZSArICc8L29wdGlvbj4nXG4gICAgfVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzwvc2VsZWN0PjwvZm9ybT48L3A+J1xuICAgIG1lc3NhZ2UuYWN0b3JUbyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVRpdGxlU2VsZWN0VXNlclRvR2l2ZVRvJyksXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICBjb25maXJtOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ2NvbmZpcm0nLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgICBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtdHJhZGVpdGVtdG8nLCBtZXNzYWdlKVxuICB9XG5cbiAgX29uRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIHN1cGVyLl9vbkRyYWdTdGFydChldmVudClcbiAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgY29uc3QgZHJhZ0RhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBkcmFnRGF0YS50b2tlblV1aWQgPSB0aGlzLnRva2VuLnV1aWRcbiAgICAgIGRyYWdEYXRhLnRva2VuSWQgPSB0aGlzLnRva2VuLmlkXG4gICAgICBkcmFnRGF0YS5zY2VuZUlkID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnY29jNy1saW5rJyxcbiAgICAgIGNoZWNrOiAnY2hlY2snLFxuICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBuYW1lOiBib3guZGF0YXNldC5jaGFyYWN0ZXJpc3RpYyxcbiAgICAgIGljb246IG51bGwsXG4gICAgICBkb2N1bWVudDoge1xuICAgICAgICB0eXBlOiB0aGlzLmRvY3VtZW50LnR5cGUsXG4gICAgICAgIHV1aWQ6IHRoaXMuZG9jdW1lbnQudXVpZFxuICAgICAgfVxuICAgIH1cblxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIF9vbkRyYWdBdHRyaWJ1dGUgKGV2ZW50KSB7XG4gICAgY29uc3QgYm94ID0gZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIENvQzdUeXBlOiAnbGluaycsXG4gICAgICBsaW5rVHlwZTogJ2NvYzctbGluaycsXG4gICAgICBjaGVjazogJ2NoZWNrJyxcbiAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnLFxuICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgIG5hbWU6IGJveC5kYXRhc2V0LmF0dHJpYixcbiAgICAgIGljb246IG51bGwsXG4gICAgICBkb2N1bWVudDoge1xuICAgICAgICB0eXBlOiB0aGlzLmRvY3VtZW50LnR5cGUsXG4gICAgICAgIHV1aWQ6IHRoaXMuZG9jdW1lbnQudXVpZFxuICAgICAgfVxuICAgIH1cblxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIF9vbkRyYWdTYW5DaGVjayAoZXZlbnQpIHtcbiAgICBjb25zdCBzYW5NaW4gPSBldmVudC5jdXJyZW50VGFyZ2V0LnF1ZXJ5U2VsZWN0b3IoJy5zYW4tdmFsdWUucGFzcycpXG4gICAgY29uc3Qgc2FuTWF4ID0gZXZlbnQuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yKCcuc2FuLXZhbHVlLmZhaWxlZCcpXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIENvQzdUeXBlOiAnbGluaycsXG4gICAgICBsaW5rVHlwZTogJ2NvYzctbGluaycsXG4gICAgICBjaGVjazogJ3Nhbmxvc3MnLFxuICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgIHNhbk1pbjogc2FuTWluLmlubmVyVGV4dCxcbiAgICAgIHNhbk1heDogc2FuTWF4LmlubmVyVGV4dCxcbiAgICAgIGljb246IG51bGwsXG4gICAgICBkb2N1bWVudDoge1xuICAgICAgICB0eXBlOiB0aGlzLmRvY3VtZW50LnR5cGUsXG4gICAgICAgIHV1aWQ6IHRoaXMuZG9jdW1lbnQudXVpZFxuICAgICAgfVxuICAgIH1cblxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBpZiAoZGF0YVN0cmluZyA9PT0gJycpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdDb0M3TGluaycpIHtcbiAgICAgIGlmIChkYXRhLmNoZWNrID09PSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCkge1xuICAgICAgICBDb0M3TGluay5fb25MaW5rQWN0b3JDbGljayh0aGlzLmFjdG9yLCBkYXRhKVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCBzdXBlci5fb25Ecm9wKGV2ZW50KVxuICB9XG5cbiAgYXN5bmMgX29uQ29uZGl0aW9uVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmNvbmRpdGlvbikge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci50b2dnbGVDb25kaXRpb24oZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmNvbmRpdGlvbilcbiAgICB9XG4gIH1cblxuICBhc3luYyByZXZpdmUgKCkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5kZWFkKVxuICB9XG5cbiAgYXN5bmMgaGVhbCAoKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLmFjdG9yLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmR5aW5nKVxuICB9XG5cbiAgYXN5bmMgY2hlY2tGb3JEZWF0aCAoZXZlbnQpIHtcbiAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soXG4gICAgICB0aGlzLmFjdG9yLmlzVG9rZW4gPyB0aGlzLmFjdG9yLnRva2VuS2V5IDogdGhpcy5hY3Rvci5pZFxuICAgIClcbiAgICBjb25DaGVjay5zdGF5QWxpdmUgPSB0cnVlXG4gICAgY29uQ2hlY2sudG9NZXNzYWdlKGV2ZW50LnNoaWZ0S2V5KVxuICB9XG5cbiAgYXN5bmMgX29uRHJhZ1Rva2VuU3RhcnQgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHR5cGU6ICdUb2tlbicsXG4gICAgICB1dWlkOiB0aGlzLnRva2VuLnV1aWRcbiAgICB9XG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRDb3VudGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0RGFpbHlTYW5pdHkoKVxuICB9XG5cbiAgYXN5bmMgX29uQXV0b1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykpIHtcbiAgICAgIGNvbnN0IGF0dHJpYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliXG4gICAgICB0aGlzLmFjdG9yLnRvZ2dsZUF0dHJpYkF1dG8oYXR0cmliKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgIClcbiAgICBpZiAod2VhcG9uKSB7XG4gICAgICB3ZWFwb24udG9nZ2xlUHJvcGVydHkoXG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eSxcbiAgICAgICAgaXNDdHJsS2V5KGV2ZW50KVxuICAgICAgKVxuICAgIH1cbiAgfVxuXG4gIC8vIHJvbGwgdGhlIGFjdG9yIGNoYXJhY3RlcmlzdGljIGZyb20gZm9ybXVsYSB3aGVuIHBvc3NpYmxlLlxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXRpY3NWYWx1ZSAoKSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5yb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUoKVxuICB9XG5cbiAgYXN5bmMgX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUgKCkge1xuICAgIHRoaXMuYWN0b3IuYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2tDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpc0xvY2tlZCA9IHRoaXMuYWN0b3IubG9ja2VkXG4gICAgdGhpcy5hY3Rvci5sb2NrZWQgPSAhaXNMb2NrZWRcbiAgICBIb29rcy5jYWxsKCdhY3RvckxvY2tDbGlja2VkQ29DNycsIFshaXNMb2NrZWRdKVxuICB9XG5cbiAgYXN5bmMgX29uRmxhZ0NsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGZsYWdOYW1lID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICB0aGlzLmFjdG9yLnRvZ2dsZUFjdG9yRmxhZyhmbGFnTmFtZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkZvcm11bGFDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICB0aGlzLmFjdG9yLnRvZ2dsZUFjdG9yRmxhZygnZGlzcGxheUZvcm11bGEnKVxuICB9XG5cbiAgYXN5bmMgX29uV2hlZWwgKGV2ZW50KSB7XG4gICAgbGV0IHZhbHVlID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSkgfHwgbnVsbFxuICAgIGlmIChldmVudC5kZWx0YVkgPiAwKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlID09PSAwID8gMCA6IHZhbHVlIC0gMVxuICAgIH1cblxuICAgIGlmIChldmVudC5kZWx0YVkgPCAwKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlICsgMVxuICAgIH1cblxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lKSB7XG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0SHAodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0TXAodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldFNhbih2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0THVjayh2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3N5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEhwKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIF90b2dnbGVSZWFkT25seSAoZXZlbnQpIHtcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LnJlYWRPbmx5ID0gIWV2ZW50LmN1cnJlbnRUYXJnZXQucmVhZE9ubHlcbiAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3JlYWQtb25seScpXG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbS1pZCcpKVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5nZXRDaGF0RGF0YSh7IHNlY3JldHM6IHRoaXMuYWN0b3IuaXNPd25lciB9KVxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiB7XG4gICAgICAgIHN1bW1hcnkucmVtb3ZlKClcbiAgICAgICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj48L2Rpdj4nKVxuXG4gICAgICBjb25zdCBsYWJlbHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbHNcIj48L2Rpdj4nKVxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLmxhYmVscykge1xuICAgICAgICBsYWJlbHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbFwiPjxzcGFuIGNsYXNzPVwibGFiZWwtbmFtZVwiPiR7cC5uYW1lfSA6PC9zcGFuPjxzcGFuIGNsYXNzPVwibGFiZWwtdmFsdWVcIj4ke3AudmFsdWV9PC9zcGFuPjwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZGl2LmFwcGVuZChsYWJlbHMpXG5cbiAgICAgIGRpdi5hcHBlbmQoXG4gICAgICAgICQoYDxkaXYgY2xhc3M9XCJpdGVtLWRlc2NyaXB0aW9uXCI+JHtjaGF0RGF0YS5kZXNjcmlwdGlvbi52YWx1ZX08L2Rpdj5gKVxuICAgICAgKVxuXG4gICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BjbCkge1xuICAgICAgICBjb25zdCBzcGVjaWFsRGl2ID0gJChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tc3BlY2lhbFwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24uc3BlY2lhbH08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgZGl2LmFwcGVuZChzcGVjaWFsRGl2KVxuICAgICAgfVxuXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHtcbiAgICAgICAgcHJvcHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwidGFnIGl0ZW0tcHJvcGVydHlcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShwKX08L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG5cbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgQ29DN0xpbmsuYmluZEV2ZW50c0hhbmRsZXIoZGl2KVxuICAgICAgZGl2LnNsaWRlRG93bigyMDAsICgpID0+IGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpKVxuICAgIH1cbiAgICAvLyAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpO1xuICB9XG5cbiAgYXN5bmMgX29uU2VjdGlvbkhlYWRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gbGV0IHNlY3Rpb24gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJ3NlY3Rpb24nKSxcbiAgICAvLyAgcGFubmVsQ2xhc3MgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmRhdGEoJ3Bhbm5lbCcpLFxuICAgIC8vICBwYW5uZWwgPSBzZWN0aW9uLmZpbmQoIGAuJHtwYW5uZWxDbGFzc31gKTtcbiAgICAvLyBwYW5uZWwudG9nZ2xlKCk7XG4gICAgY29uc3Qgc2VjdGlvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnc2VjdGlvbicpXG4gICAgY29uc3QgcGFubmVsQ2xhc3MgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucGFubmVsXG4gICAgaWYgKHR5cGVvZiBwYW5uZWxDbGFzcyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVyblxuICAgIGNvbnN0IHBhbm5lbCA9ICQoc2VjdGlvbikuZmluZChgLnBhbm5lbC4ke3Bhbm5lbENsYXNzfWApXG5cbiAgICAvLyBwYW5uZWwudG9nZ2xlKCk7XG4gICAgaWYgKHBhbm5lbC5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgLy8gQ291bGQgcmVtb3ZlIGV4cGFuZGVkIGNsYXNzIGFuZCB1c2UgKHBhbm5lbC5pcygnOnZpc2libGUnKSlcbiAgICAgIHBhbm5lbC5zbGlkZVVwKDIwMCwgKCkgPT4gcGFubmVsLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpKVxuICAgIH0gZWxzZSB7XG4gICAgICBwYW5uZWwuc2xpZGVEb3duKDIwMCwgKCkgPT4gcGFubmVsLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpKVxuICAgIH1cblxuICAgIGNvbnN0IGNhbWVsRmxhZyA9IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoYGRhdGEucGFubmVsLiR7cGFubmVsQ2xhc3N9LmV4cGFuZGVkYClcblxuICAgIHRoaXMuYWN0b3IudXBkYXRlKFxuICAgICAgeyBbY2FtZWxGbGFnXTogIXBhbm5lbC5oYXNDbGFzcygnZXhwYW5kZWQnKSB9LFxuICAgICAgeyByZW5kZXI6IGZhbHNlIH0pXG4gIH1cblxuICBfb25JbnZlbnRvcnlIZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5zaWJsaW5ncygnbGknKVxuICAgIGlmIChsaS5pcygnOnZpc2libGUnKSkgbGkuc2xpZGVVcCgyMDApXG4gICAgZWxzZSBsaS5zbGlkZURvd24oMjAwKVxuICB9XG5cbiAgX29uSXRlbUhlYWRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgb2wgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLm5leHQoJ29sJylcbiAgICBpZiAob2wuaXMoJzp2aXNpYmxlJykpIG9sLnNsaWRlVXAoMjAwKVxuICAgIGVsc2Ugb2wuc2xpZGVEb3duKDIwMClcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1Qb3B1cCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbS1pZCcpKVxuXG4gICAgQ29DN0FjdG9yU2hlZXQucG9wdXBTa2lsbChpdGVtKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHBvcHVwU2tpbGwgKHNraWxsKSB7XG4gICAgc2tpbGwuc3lzdGVtLmRlc2NyaXB0aW9uLmVucmljaGVkVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBza2lsbC5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7IGFzeW5jOiBmYWxzZSB9XG4gICAgKVxuICAgIC8vIGdhbWUuQ29DNy5lbnJpY2hlciggc2tpbGwuZGF0YS5kYXRhLmRlc2NyaXB0aW9uLmVucmljaGVkVmFsdWUpO1xuICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxEZXRhaWxzV2luZG93JyksXG4gICAgICAgIGNvbnRlbnQ6IHNraWxsLFxuICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc2tpbGwnXSxcbiAgICAgICAgd2lkdGg6IDUyMCxcbiAgICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICAgIHNjcm9sbFk6IFsnLml0ZW0tZGVzY3JpcHRpb24nXSxcbiAgICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtZGV0YWlscy5odG1sJ1xuICAgICAgfVxuICAgIClcbiAgICBkbGcucmVuZGVyKHRydWUpXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJvbGxpbmcgb2YgYW4gaXRlbSBmcm9tIHRoZSBBY3RvciBzaGVldCwgb2J0YWluaW5nIHRoZSBJdGVtIGluc3RhbmNlIGFuZCBkaXNwYXRjaGluZyB0byBpdCdzIHJvbGwgbWV0aG9kXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfb25JdGVtUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLy8gY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkO1xuICAgIC8vIGNvbnN0IGFjdG9ySWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LmFjdG9ySWQ7XG4gICAgLy8gY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWQ7XG4gICAgLy8gbGV0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpO1xuXG4gICAgLy8gY2hlY2suYWN0b3IgPSAhdG9rZW5LZXkgPyBhY3RvcklkIDogdG9rZW5LZXk7XG4gICAgLy8gY2hlY2suaXRlbSA9IGl0ZW1JZDtcbiAgICAvLyBjaGVjay5yb2xsKCk7XG4gICAgLy8gY2hlY2sudG9NZXNzYWdlKCk7XG4gIH1cblxuICBhc3luYyBfb25FZmZlY3QgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGVmZmVjdElkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuZWZmZWN0SWRcbiAgICBjb25zdCBlZmZlY3QgPSB0aGlzLmFjdG9yLmVmZmVjdHMuZ2V0KGVmZmVjdElkKVxuICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBDb0M3Q29udGVudExpbmtEaWFsb2cuY3JlYXRlKHsgdHlwZTogJ0NvQzdMaW5rJywgY2hlY2s6IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNULCBvYmplY3Q6IGVmZmVjdCB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbldlYXBvblJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0Lml0ZW1JZFxuICAgIGNvbnN0IGZhc3RGb3J3YXJkID0gZXZlbnQuc2hpZnRLZXlcbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgLy8gY29uc3QgYWN0b3JLZXkgPSAhdGhpcy50b2tlbj8gdGhpcy5hY3Rvci5hY3RvcktleSA6IGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uZGF0YS5faWR9YDsgLy9SRUZBQ1RPUklORyAoMilcbiAgICAvKiogKiBNT0RJRiAwLjgueCAqKiovXG4gICAgbGV0IGFjdG9yS2V5XG4gICAgaWYgKCF0aGlzLnRva2VuKSBhY3RvcktleSA9IHRoaXMuYWN0b3IuaWRcbiAgICAvLyBTaGVldCB3YXMgb3BlbmVkIGZyb20gYWN0b3IgZGlyZWN0b3J5XG4gICAgZWxzZSB7XG4gICAgICAvLyBPcGVuZWQgZnJvbSB0b2tlblxuICAgICAgaWYgKHRoaXMuYWN0b3IuaXNUb2tlbiAmJiBnYW1lLmFjdG9ycy50b2tlbnNbdGhpcy50b2tlbi5pZF0pIHtcbiAgICAgICAgYWN0b3JLZXkgPSBgVE9LRU4uJHt0aGlzLnRva2VuLmlkfWBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdG9yS2V5ID0gYCR7dGhpcy50b2tlbi5wYXJlbnQuaWR9LiR7dGhpcy50b2tlbi5pZH1gXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybEtleShldmVudCkgJiYgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICBjaGVjazogQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNLFxuICAgICAgICBuYW1lOiB3ZWFwb24ubmFtZVxuICAgICAgfVxuICAgICAgQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZShsaW5rRGF0YSwgeyBhY3RvcnM6IFt0aGlzLmFjdG9yXSB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBsZXQgcHJvY2VlZFdpdGhvdXRUYXJnZXRcbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplIDw9IDApIHtcbiAgICAgICAgcHJvY2VlZFdpdGhvdXRUYXJnZXQgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgdGl0bGU6ICcgJyxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTm9UYXJnZXRTZWxlY3RlZCcsIHtcbiAgICAgICAgICAgICAgd2VhcG9uOiB3ZWFwb24ubmFtZVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICAgIGNhbmNlbDoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2FuY2VsJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgcHJvY2VlZDoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUHJvY2VlZCcpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdjYW5jZWwnLFxuICAgICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZyddXG4gICAgICAgICAgfVxuICAgICAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA+IDAgfHwgcHJvY2VlZFdpdGhvdXRUYXJnZXQpIHtcbiAgICAgICAgaWYgKCF3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMSkge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuVG9vTWFueVRhcmdldCcpKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKGFjdG9yS2V5LCBpdGVtSWQsIGZhc3RGb3J3YXJkKVxuICAgICAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgICAgICB9XG4gICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN1JhbmdlSW5pdGlhdG9yKGFjdG9yS2V5LCBpdGVtSWQsIGZhc3RGb3J3YXJkKVxuICAgICAgICAgIGNhcmQuY3JlYXRlQ2hhdENhcmQoKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUmVsb2FkV2VhcG9uIChldmVudCkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgPyBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIDogbnVsbFxuICAgIGlmICghaXRlbUlkKSByZXR1cm5cbiAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtSWQpXG4gICAgaWYgKGV2ZW50LmJ1dHRvbiA9PT0gMCkge1xuICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSBhd2FpdCB3ZWFwb24ucmVsb2FkKClcbiAgICAgIGVsc2UgYXdhaXQgd2VhcG9uLmFkZEJ1bGxldCgpXG4gICAgfSBlbHNlIGlmIChldmVudC5idXR0b24gPT09IDIpIHtcbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkgYXdhaXQgd2VhcG9uLnNldEJ1bGxldHMoMClcbiAgICAgIGVsc2UgYXdhaXQgd2VhcG9uLnNob290QnVsbGV0cygxKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkFkZEFtbyAoZXZlbnQpIHtcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICAgID8gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICA6IG51bGxcbiAgICBpZiAoIWl0ZW1JZCkgcmV0dXJuXG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIGF3YWl0IHdlYXBvbi5hZGRCdWxsZXQoKVxuICB9XG5cbiAgYXN5bmMgX29uV2VhcG9uU2tpbGxSb2xsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBza2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkXG4gICAgY29uc3QgdG9rZW5LZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5kYXRhc2V0LnRva2VuSWRcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJylcbiAgICAgID8gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICA6IG51bGxcblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5KSB7XG4gICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKClcbiAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSB1c2FnZS5nZXQoJ2JvbnVzRGljZScpXG4gICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSB1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKVxuICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9ICF0b2tlbktleSA/IGFjdG9ySWQgOiB0b2tlbktleVxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxuICAgIGNoZWNrLml0ZW0gPSBpdGVtSWRcbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuXG4gICAgLy8gSEFDSzoganVzdCB0byBwb3AgdGhlIGFkdmFuY2VkIHJvbGwgd2luZG93XG4gICAgLy8gY2hlY2suaXRlbS5yb2xsKCk7XG4gIH1cblxuICBhc3luYyBfb25XZWFwb25EYW1hZ2UgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLndlYXBvbicpLmRhdGFzZXQuaXRlbUlkXG4gICAgY29uc3QgcmFuZ2UgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy53ZWFwb24tZGFtYWdlJykuZGF0YXNldC5yYW5nZVxuICAgIGNvbnN0IGRhbWFnZUNoYXRDYXJkID0gbmV3IERhbWFnZUNhcmQoe1xuICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5LFxuICAgICAgcmFuZ2VcbiAgICB9KVxuICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gdGhpcy5hY3Rvci50b2tlbktleVxuICAgIGRhbWFnZUNoYXRDYXJkLml0ZW1JZCA9IGl0ZW1JZFxuICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAvLyBjb25zb2xlLmxvZyggJ1dlYXBvbiBkYW1hZ2UgQ2xpY2tlZCcpO1xuICB9XG5cbiAgYXN5bmMgX29uT3Bwb3NlZFJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYiA9PT0gJ2RiJykgcmV0dXJuXG5cbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwsXG4gICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VELFxuICAgICAgZXZlbnQsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXJhY3RlcmlzdGljLWxhYmVsJykpIHtcbiAgICAgIGRhdGEucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgfSBlbHNlIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXR0cmlidXRlLWxhYmVsJykpIHtcbiAgICAgIGRhdGEucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgIH1cblxuICAgIGlmIChldmVudC5hbHRLZXkpIHtcbiAgICAgIGRhdGEuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXG4gICAgfVxuXG4gICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoZGF0YSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcm9sbGluZyBhIFNraWxsIGNoZWNrXG4gICAqIEAgIHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpdGljVGVzdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdmbGFnZ2VkNGRldicpKSByZXR1cm5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0cnVlLFxuICAgICAgICBjaGFyYWN0ZXJpc3RpYzogZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhci1ib3gnKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQyxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEF0dHJpYlRlc3QgKGV2ZW50KSB7XG4gICAgLy8gRkxBVE1PRElGSUVSXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGF0dHJpYiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYlxuICAgIGlmIChhdHRyaWIgPT09ICdkYicpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIS9eLXswLDF9XFxkKyQvLnRlc3QoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQucm9sbEZvcm11bGFcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5yb2xsRm9ybXVsYVxuICAgICAgICApXG4gICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIGlmICghaXNOYU4oci50b3RhbCkgJiYgIShyLnRvdGFsID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgci50b01lc3NhZ2Uoe1xuICAgICAgICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNEYW1hZ2VSb2xsJylcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICAgIGZhc3RGb3J3YXJkOiB0cnVlLFxuICAgICAgICBhdHRyaWJ1dGU6IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUsXG4gICAgICAgIGNhcmRUeXBlOlxuICAgICAgICBldmVudC5hbHRLZXkgJiYgYXR0cmliID09PSAnc2FuJ1xuICAgICAgICAgID8gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tcbiAgICAgICAgICA6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByb2xsaW5nIGEgU2tpbGwgY2hlY2tcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9vblJvbGxTa2lsbFRlc3QgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmxhZ2dlZDRkZXYnKSkgcmV0dXJuXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZUNvbnRleHRNZW51cycpKSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxuICAgICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIHByZXZlbnRTdGFuZGJ5OiB0cnVlLFxuICAgICAgICBmYXN0Rm9yd2FyZDogdHJ1ZSxcbiAgICAgICAgc2tpbGxJZDogZXZlbnQ/LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKT8uZGF0YXNldC5za2lsbElkLFxuICAgICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBldmVudCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICAvLyBfZ2V0U3VibWl0RGF0YSh1cGRhdGVEYXRhPXt9KSB7XG5cbiAgLy8gIC8vIENyZWF0ZSB0aGUgZXhwYW5kZWQgdXBkYXRlIGRhdGEgb2JqZWN0XG4gIC8vICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKHRoaXMuZm9ybSwge2VkaXRvcnM6IHRoaXMuZWRpdG9yc30pO1xuICAvLyAgbGV0IGRhdGEgPSBmZC50b09iamVjdCgpO1xuICAvLyAgaWYgKCB1cGRhdGVEYXRhICkgZGF0YSA9IG1lcmdlT2JqZWN0KGRhdGEsIHVwZGF0ZURhdGEpO1xuICAvLyAgZWxzZSBkYXRhID0gZXhwYW5kT2JqZWN0KGRhdGEpO1xuXG4gIC8vICAvLyBIYW5kbGUgRGFtYWdlIGFycmF5XG4gIC8vICBjb25zdCBkYW1hZ2UgPSBkYXRhLmRhdGE/LmRhbWFnZTtcbiAgLy8gIGlmICggZGFtYWdlICkgZGFtYWdlLnBhcnRzID0gT2JqZWN0LnZhbHVlcyhkYW1hZ2U/LnBhcnRzIHx8IHt9KS5tYXAoZCA9PiBbZFswXSB8fCAnJywgZFsxXSB8fCAnJ10pO1xuXG4gIC8vICAvLyBSZXR1cm4gdGhlIGZsYXR0ZW5lZCBzdWJtaXNzaW9uIGRhdGFcbiAgLy8gIHJldHVybiBmbGF0dGVuT2JqZWN0KGRhdGEpO1xuICAvLyB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogSW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZCBhcyByZXF1aXJlZCBieSB0aGUgcGFyZW50IGNsYXNzIHNwZWNcbiAgICogVGhpcyBkZWZpbmVzIGhvdyB0byB1cGRhdGUgdGhlIHN1YmplY3Qgb2YgdGhlIGZvcm0gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdfdXBkYXRlT2JqZWN0Jyk7XG4gICAgLy8gVE9ETzogUmVwbGFjZSB3aXRoICAgX2dldFN1Ym1pdERhdGEodXBkYXRlRGF0YT17fSkgQ2YuIHNoZWV0LmpzKDI0MylcbiAgICBjb25zdCBvdmVycmlkZXMgPSBmb3VuZHJ5LnV0aWxzLmZsYXR0ZW5PYmplY3QodGhpcy5hY3Rvci5vdmVycmlkZXMpXG4gICAgY29uc3QgbmFtZSA9IGV2ZW50Py5jdXJyZW50VGFyZ2V0Py5uYW1lXG4gICAgaWYgKG5hbWUgJiYgb3ZlcnJpZGVzICYmIG92ZXJyaWRlc1tuYW1lXSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVmZmVjdEFwcGxpZWRDYW50T3ZlcnJpZGUnLCB7IG5hbWUgfSlcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0KSB7XG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc2tpbGwtYWRqdXN0bWVudCcpKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgPyBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICA6IG51bGxcblxuICAgICAgICAgICAgaWYgKCFldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKHtcbiAgICAgICAgICAgICAgICBbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXTogbnVsbFxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICBbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXTogdmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuY3JlZGl0LXJhdGluZycpID09PSBpdGVtLm5hbWUgJiYgdHlwZW9mIHRoaXMuYWN0b3Iub2NjdXBhdGlvbj8uc3lzdGVtPy5jcmVkaXRSYXRpbmc/Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgY29uc3QgY3JlZGl0VmFsdWUgPVxuICAgICAgICAgICAgICAgIChpdGVtLnZhbHVlIHx8IDApIC1cbiAgICAgICAgICAgICAgICAoaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UgfHwgMClcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGNyZWRpdFZhbHVlID5cbiAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5tYXgpIHx8XG4gICAgICAgICAgICAgICAgY3JlZGl0VmFsdWUgPFxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1pbilcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DcmVkaXRPdXRPZlJhbmdlJywge1xuICAgICAgICAgICAgICAgICAgICBtaW46IE51bWJlcihcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5taW5cbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBOdW1iZXIoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIFRPRE8gOiBjaGVjayB3aHkgU0FOIG9ubHkgP1xuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUgPT09ICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldFNhbihcbiAgICAgICAgICAgICAgcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSA9PT0gJ3N5c3RlbS5hdHRyaWJzLmhwLnZhbHVlJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRIcChcbiAgICAgICAgICAgICAgcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RleHQtYXJlYScpKSB7XG4gICAgICAgICAgdGhpcy5hY3Rvci51cGRhdGVUZXh0QXJlYShldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi12YWx1ZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZUJpb1ZhbHVlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiaW8tc2VjdGlvbi10aXRsZScpKSB7XG4gICAgICAgICAgY29uc3QgaW5kZXggPSBwYXJzZUludChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgICAgIClcbiAgICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZUJpb1RpdGxlKGluZGV4LCBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCducGMtc2tpbGwtc2NvcmUnKSkge1xuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChza2lsbCkge1xuICAgICAgICAgICAgYXdhaXQgc2tpbGwudXBkYXRlVmFsdWUoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NraWxsLW5hbWUnKSB8fFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpdGVtLW5hbWUnKVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0ge31cbiAgICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICAgIGRhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICBkYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkYXRhWydzeXN0ZW0uc2tpbGxOYW1lJ10gPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgIGRhdGEubmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IGl0ZW0udXBkYXRlKGRhdGEpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1mb3JtdWxhJykpIHtcbiAgICAgICAgICAvLyB0ZXN0ZXIgc2kgYydlc3QgdmlkZVxuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgLy8gT24gdGVzdGUgc2kgYydlc3QgdW5lIGZvcm11bGUgdmFsaWRlICFcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgIGlmIChpc05hTihyLnRvdGFsKSB8fCB0eXBlb2Ygci50b3RhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgICB2YWx1ZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9ybURhdGFbZXZlbnQuY3VycmVudFRhcmdldC5uYW1lXSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgJ0NvQzcuRXJyb3JJbnZhbGlkJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhdHRyaWJ1dGUtdmFsdWUnKSkge1xuICAgICAgICAgIC8vIHRlc3RlciBzaSBsZSBkYiByZXRvdXJuw6kgZXN0IHZhbGlkZS5cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCAmJlxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuYXR0cmlidXRlJykuZGF0YXNldC5hdHRyaWIgPT09ICdkYidcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIE9uIHRlc3RlIHNpIGMnZXN0IHVuZSBmb3JtdWxlIHZhbGlkZSAhXG4gICAgICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgci50b3RhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvcm1EYXRhW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV0gPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LkVycm9ySW52YWxpZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxlIHNraWxsIGFzc29jacOpIGEgbCdhcm1lIGEgY2hhbmfDqVxuICAgICAgICAvLyBUT0RPIDogRmFjdG9yaXNhdGlvbiBkdSBzd2l0Y2hcbiAgICAgICAgLy8gVE9ETyA6IHJlbXBsYWNlciBsZXMgc3RyaW5ncyBwYXIgZGUgY29uc3RhbnRlcyAoaXRlbS5za2lsbC5tYWluIC4uLilcbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3ZWFwb24tc2tpbGwnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0Lm9wdGlvbnNbZXZlbnQuY3VycmVudFRhcmdldC5zZWxlY3RlZEluZGV4XS52YWx1ZVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAod2VhcG9uICYmIHNraWxsKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbCkge1xuICAgICAgICAgICAgICBjYXNlICdtYWluJzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICBjYXNlICdhbHRlcm5hdGl2JzpcbiAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCc6IHNraWxsLmlkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWUnOiBza2lsbC5uYW1lXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIExlIG5vbSBkZSBsJ2FybWUgYSBjaGFuZ8OpXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2VhcG9uLW5hbWUnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoeyBuYW1lOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gbGVzIGRlZ2F0cyBkZSBsJ2FybWUgb24gY2hhbmfDqXMuXG4gICAgICAgIC8vIFRPRE8gOiBGYWN0b3Jpc2F0aW9uIGR1IHN3aXRjaFxuICAgICAgICAvLyBUT0RPIDogcmVtcGxhY2VyIGxlcyBzdHJpbmdzIHBhciBkZSBjb25zdGFudGVzIChpdGVtLnJhbmdlLm5vcm1hbCAuLi4pXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGFtYWdlLWZvcm11bGEnKSkge1xuICAgICAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh3ZWFwb24pIHtcbiAgICAgICAgICAgIC8vIHRlc3RlIGxhIHZhbGlkaXTDqSBkZSBsYSBmb3JtdWxlLlxuICAgICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgUm9sbChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgdHlwZW9mIHIudG90YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JVbmFibGVUb1BhcnNlRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UnOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICBjYXNlICdsb25nJzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5sb25nLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucmFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdub3JtYWwnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2xvbmcnOlxuICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UubG9uZy5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdleHRyZW1lJzpcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogbnVsbFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnVwZGF0ZShmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBDb0M3QWN0b3JTaGVldCB9IGZyb20gJy4vYmFzZS5qcydcbmltcG9ydCB7IFJvbGxEaWFsb2cgfSBmcm9tICcuLi8uLi9hcHBzL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuLi8uLi9hcHBzL2NvYzctbGluay5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIsIGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgU2FuQ2hlY2tDYXJkIH0gZnJvbSAnLi4vLi4vY2hhdC9jYXJkcy9zYW4tY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q29udGV4dE1lbnUgfSBmcm9tICcuLi8uLi9jb250ZXh0LW1lbnUuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdE1lc3NhZ2UgfSBmcm9tICcuLi8uLi9hcHBzL2NvYzctY2hhdC1tZXNzYWdlLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgQWN0b3JTaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN05QQ1NoZWV0IGV4dGVuZHMgQ29DN0FjdG9yU2hlZXQge1xuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEFjdG9yIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIC8vIFRPRE8gOiBkbyB3ZSBuZWVkIHRoYXQgP1xuICAgIHNoZWV0RGF0YS5hbGxvd0Zvcm11bGEgPSB0cnVlXG4gICAgc2hlZXREYXRhLmRpc3BsYXlGb3JtdWxhID0gKHRoaXMuYWN0b3IuZ2V0QWN0b3JGbGFnKCdkaXNwbGF5Rm9ybXVsYScpIHx8IGZhbHNlKVxuXG4gICAgc2hlZXREYXRhLmhhc1NhbiA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSAhPT0gbnVsbFxuICAgIHNoZWV0RGF0YS5oYXNNcCA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlICE9PSBudWxsXG4gICAgc2hlZXREYXRhLmhhc0x1Y2sgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUgIT09IG51bGxcblxuICAgIHNoZWV0RGF0YS5pc0NyZWF0dXJlID0gZmFsc2VcblxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2l0ZW0nKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdib29rJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3NwZWxsJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICd0YWxlbnQnKSB8fFxuICAgICAgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkICYmIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlVGFsZW50cycpKVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3N0YXR1cycpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9ucyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLmhhc0ludmVudG9yeSA9XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnNcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZEJpb2dyYXBoeVBlcnNvbmFsRGVzY3JpcHRpb24gPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5LnBlcnNvbmFsRGVzY3JpcHRpb24/LnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIGlmICghdGhpcy5tZW51cykgdGhpcy5tZW51cyA9IFtdXG5cbiAgICAgIGNvbnN0IHNhbmxvc3NNZW51ID0ge1xuICAgICAgICBpZDogJ3Nhbi1sb3NzLXJvbGwnLFxuICAgICAgICBjbGFzc2VzOiAncm9sbC1tZW51JyxcbiAgICAgICAgc2VjdGlvbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzZXM6ICdtYWluJyxcbiAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay10b29sJywgbGFiZWw6ICdPcGVuIGluIGxpbmsgdG9vbCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZW5kLWNoYXQnLCBsYWJlbDogJ1NlbmQgdG8gY2hhdCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb3B5LXRvLWNsaXBib2FyZCcsIGxhYmVsOiAnQ29weSB0byBjbGlwLWJvYXJkJyB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuXG4gICAgICAgIF1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2FubG9zc0NvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICBzYW5sb3NzQ29udGV4dE1lbnUuYmluZChzYW5sb3NzTWVudSwgaHRtbCwgdGhpcy5fb25TYW5Mb3NzQ29udGV4dE1lbnVDbGljay5iaW5kKHRoaXMpKVxuICAgICAgdGhpcy5tZW51cy5wdXNoKHNhbmxvc3NDb250ZXh0TWVudSlcbiAgICB9XG5cbiAgICBodG1sLmZpbmQoJy5yb2xsLXNhbicpLmNsaWNrKHRoaXMuX29uU2FuQ2hlY2suYmluZCh0aGlzKSlcbiAgICAvLyBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgLy8gICBodG1sXG4gICAgLy8gICAgIC5maW5kKCdbbmFtZT1cImRhdGEuYXR0cmlicy5ocC52YWx1ZVwiXScpXG4gICAgLy8gICAgIC5jaGFuZ2UoZXZlbnQgPT4gdGhpcy5hY3Rvci5zZXRIZWFsdGhTdGF0dXNNYW51YWxseShldmVudCkpXG4gICAgLy8gfVxuICB9XG5cbiAgYXN5bmMgX29uU2FuTG9zc0NvbnRleHRNZW51Q2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgcm9sbE9wdGlvbnMgPSB7XG4gICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVIsXG4gICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgIGZhc3RGb3J3YXJkOiBmYWxzZSxcbiAgICAgIGV2ZW50LFxuICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLLFxuICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgKCdsaW5rLXRvb2wnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID0gdHJ1ZVxuICAgICAgICByb2xsT3B0aW9ucy5vcGVuTGlua1Rvb2wgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnc2VuZC1jaGF0Jyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2hhdCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdjb3B5LXRvLWNsaXBib2FyZCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIgPSB0cnVlXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NsaXBib2FyZCA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHJvbGxPcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgX29uU2FuQ2hlY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChcbiAgICAgICF0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tQYXNzZWQgJiZcbiAgICAgICF0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkXG4gICAgKSB7XG4gICAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ05vIHNhbml0eSBsb3NzIHZhbHVlJyk7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKFxuICAgICAgaXNDdHJsS2V5KGV2ZW50KSAmJlxuICAgICAgZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIGxldCBkaWZmaWN1bHR5LCBtb2RpZmllclxuICAgICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKHtcbiAgICAgICAgICBkaXNhYmxlRmxhdERpY2VNb2RpZmllcjogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBtb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGxpbmtEYXRhID0ge1xuICAgICAgICBjaGVjazogJ3Nhbmxvc3MnLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc3lzdGVtLnNwZWNpYWwuc2FuTG9zcy5jaGVja1Bhc3NlZCxcbiAgICAgICAgc2FuTWF4OiB0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tGYWlsbGVkLFxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgIGxpbmtEYXRhLmJsaW5kID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBtb2RpZmllciAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLm1vZGlmaWVyID0gbW9kaWZpZXJcbiAgICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIGxpbmtEYXRhLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBjb25zdCBsaW5rID0gKG5ldyBDb0M3TGluaygpKS5fY3JlYXRlRG9jdW1lbnRMaW5rKGxpbmtEYXRhKVxuICAgICAgaWYgKGxpbmspIHtcbiAgICAgICAgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKFxuICAgICAgICAgIG51bGwsXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NZXNzYWdlQ2hlY2tSZXF1ZXN0ZWRXYWl0Jywge1xuICAgICAgICAgICAgY2hlY2s6IGxpbmtcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNhbkRhdGEgPSB7XG4gICAgICAgIHNhbk1heDogdGhpcy5hY3Rvci5zYW5Mb3NzQ2hlY2tGYWlsbGVkLFxuICAgICAgICBzYW5NaW46IHRoaXMuYWN0b3Iuc2FuTG9zc0NoZWNrUGFzc2VkLFxuICAgICAgICBzYW5SZWFzb246IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5hY3Rvci5zeXN0ZW0uaW5mb3MudHlwZVxuICAgICAgICAgIDogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICB0b2tlbktleTogdGhpcy5hY3Rvci5hY3RvcktleVxuICAgICAgfVxuICAgICAgU2FuQ2hlY2tDYXJkLmNoZWNrVGFyZ2V0cyhzYW5EYXRhLCBldmVudC5zaGlmdEtleSlcbiAgICB9XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIHRoaXMuYWN0b3IudW5zZXRBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ25wYyddLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9ucGMtc2hlZXQuaHRtbCcsXG4gICAgICB3aWR0aDogNTgwLFxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgIG1pbmltaXphYmxlOiB0cnVlXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kIGFzIHJlcXVpcmVkIGJ5IHRoZSBwYXJlbnQgY2xhc3Mgc3BlY1xuICAgKiBUaGlzIGRlZmluZXMgaG93IHRvIHVwZGF0ZSB0aGUgc3ViamVjdCBvZiB0aGUgZm9ybSB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0KSB7XG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2hhcmFjdGVyaXN0aWMtc2NvcmUnKSkge1xuICAgICAgICAgIHRoaXMuYWN0b3Iuc2V0Q2hhcmFjdGVyaXN0aWMoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUsXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBmb3JjZUF1dG8gKGFwcCwgaHRtbCkge1xuICAgIGh0bWwuaGVpZ2h0KCdhdXRvJylcbiAgfVxuXG4gIHNldFBvc2l0aW9uIChhKSB7XG4gICAgc3VwZXIuc2V0UG9zaXRpb24oYSlcbiAgICBDb0M3TlBDU2hlZXQuZm9yY2VBdXRvKGEsIHRoaXMuX2VsZW1lbnQpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBtZXJnZU9iamVjdCAqL1xuaW1wb3J0IHsgQ29DN05QQ1NoZWV0IH0gZnJvbSAnLi9ucGMtc2hlZXQuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3Q3JlYXR1cmVTaGVldCBleHRlbmRzIENvQzdOUENTaGVldCB7XG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgQWN0b3Igc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuICAgIHNoZWV0RGF0YS5pc0NyZWF0dXJlID0gdHJ1ZVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ25wYycsICdjcmVhdHVyZSddXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cbmV4cG9ydCBjbGFzcyBDb0M3Q3JlYXRlTXl0aG9zRW5jb3VudGVyIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnXSxcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5TG9zc1R5cGVEaWFsb2dUaXRsZScpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2FuaXR5LWxvc3MtdHlwZS5oYnMnLFxuICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuICAgIGRhdGEuaXNJbW11bml0eSA9IGRhdGEub2JqZWN0LnR5cGUgPT09ICdpbW11bml0eSdcbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBodG1sLmZpbmQoJy5maWVsZF90eXBlJykuY2hhbmdlKHRoaXMuX29uU2VsZWN0Q2hhbmdlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGlhbG9nLWJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQnV0dG9uQ2xpY2suYmluZCh0aGlzKSlcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICB9XG5cbiAgX29uQnV0dG9uQ2xpY2sgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5idXR0b24gPT09ICdhZGQnKSB7XG4gICAgICBjb25zdCBodG1sID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcud2luZG93LWNvbnRlbnQnKVxuICAgICAgY29uc3QgdHlwZSA9IGh0bWwuZmluZCgnLmZpZWxkX3R5cGUnKS52YWwoKVxuICAgICAgY29uc3QgbmFtZSA9IGh0bWwuZmluZCgnLmZpZWxkX25hbWUnKS52YWwoKVxuICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChodG1sLmZpbmQoJy5maWVsZF92YWx1ZScpLnZhbCgpKVxuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9XG4gICAgICAgIHRoaXMub2JqZWN0LmFjdG9yLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzID8/IFtdXG4gICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goe1xuICAgICAgICB0eXBlOiBuYW1lLFxuICAgICAgICB0b3RhbExvc3M6IHZhbHVlLFxuICAgICAgICBpbW11bml0eTogdHlwZSA9PT0gJ2ltbXVuaXR5J1xuICAgICAgfSlcbiAgICAgIHNhbml0eUxvc3NFdmVudHMuc29ydChmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICAgICAgcmV0dXJuIGxlZnQudHlwZS5sb2NhbGVDb21wYXJlKHJpZ2h0LnR5cGUpXG4gICAgICB9KVxuICAgICAgdGhpcy5vYmplY3QuYWN0b3IudXBkYXRlKHsgJ2RhdGEuc2FuaXR5TG9zc0V2ZW50cyc6IHNhbml0eUxvc3NFdmVudHMgfSlcbiAgICB9XG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cblxuICBfb25TZWxlY3RDaGFuZ2UgKGV2ZW50KSB7XG4gICAgY29uc3QgaHRtbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLndpbmRvdy1jb250ZW50JylcbiAgICB0aGlzLm9iamVjdC5uYW1lID0gaHRtbC5maW5kKCcuZmllbGRfbmFtZScpLnZhbCgpXG4gICAgdGhpcy5vYmplY3QudHlwZSA9IGh0bWwuZmluZCgnLmZpZWxkX3R5cGUnKS52YWwoKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHt9XG59XG4iLCIvKiBnbG9iYWwgJCwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIEZvbnRGYWNlLCBnYW1lLCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0FjdG9yU2hlZXQgfSBmcm9tICcuL2Jhc2UuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXRlTXl0aG9zRW5jb3VudGVyIH0gZnJvbSAnLi4vLi4vYXBwcy9jcmVhdGUtbXl0aG9zLWVuY291bnRlcnMuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhcmFjdGVyU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3Rvci5uYW1lID09PSAnQ29DN0NoYXJhY3RlclNoZWV0Jykge1xuICAgICAgaWYgKCF0aGlzLnN1bW1hcml6ZWQpIHRoaXMuc3VtbWFyaXplZCA9IGZhbHNlXG4gICAgICBsZXQgYnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICAgIGJ1dHRvbnMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogdGhpcy5zdW1tYXJpemVkXG4gICAgICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NYXhpbWl6ZScpXG4gICAgICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TdW1tYXJpemUnKSxcbiAgICAgICAgICBjbGFzczogJ3Rlc3QtZXh0cmEtaWNvbicsXG4gICAgICAgICAgaWNvbjogdGhpcy5zdW1tYXJpemVkXG4gICAgICAgICAgICA/ICdmYXMgZmEtd2luZG93LW1heGltaXplJ1xuICAgICAgICAgICAgOiAnZmFzIGZhLXdpbmRvdy1taW5pbWl6ZScsXG4gICAgICAgICAgb25jbGljazogZXZlbnQgPT4gdGhpcy50b2dnbGVTaGVldE1vZGUoZXZlbnQpXG4gICAgICAgIH0vKiAsXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogJycsXG4gICAgICAgICAgY2xhc3M6ICdkcmFnLXRlc3QtdGhpbmd5JyxcbiAgICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1kMTAnLFxuICAgICAgICAgIG9uZHJhZ3N0YXJ0OiAoKSA9PiB1aS5ub3RpZmljYXRpb25zLmluZm8oJ2RyYWcgc3RhcnRlZCcpXG4gICAgICAgIH0gKi9cbiAgICAgIF0uY29uY2F0KGJ1dHRvbnMpXG4gICAgICByZXR1cm4gYnV0dG9uc1xuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlU2hlZXRNb2RlIChldmVudCkge1xuICAgIHRoaXMuc3VtbWFyaXplZCA9ICF0aGlzLnN1bW1hcml6ZWRcbiAgICBhd2FpdCB0aGlzLmNsb3NlKClcbiAgICBjb25zdCBvcHRpb25zID0gdGhpcy5zdW1tYXJpemVkXG4gICAgICA/IHtcbiAgICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnYWN0b3InLCAnY2hhcmFjdGVyJywgJ3N1bW1hcml6ZWQnXSxcbiAgICAgICAgICBoZWlnaHQ6IDIwMCxcbiAgICAgICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgICAgIHdpZHRoOiA3MDBcbiAgICAgICAgfVxuICAgICAgOiBDb0M3Q2hhcmFjdGVyU2hlZXQuZGVmYXVsdE9wdGlvbnNcbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlLCBvcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG4gICAgaWYgKFxuICAgICAgdGhpcy5pc0VkaXRhYmxlICYmXG4gICAgICB0eXBlb2YgdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKSA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJywgZmFsc2UpXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNFZGl0YWJsZSAmJlxuICAgICAgdHlwZW9mIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJywgdHJ1ZSlcbiAgICB9XG4gICAgc2hlZXREYXRhLnNraWxsTGlzdE1vZGVWYWx1ZSA9XG4gICAgICB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScpID8/IGZhbHNlXG4gICAgc2hlZXREYXRhLnNraWxsU2hvd1VuY29tbW9uID1cbiAgICAgIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpID8/IHRydWVcbiAgICBzaGVldERhdGEuc2hvd0ljb25zT25seSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dJY29uc09ubHknKVxuXG4gICAgaWYgKHRoaXMuYWN0b3Iub2NjdXBhdGlvbikge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLm9jY3VwYXRpb24gPSB0aGlzLmFjdG9yLm9jY3VwYXRpb24ubmFtZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLm9jY3VwYXRpb25TZXQgPSB0cnVlXG4gICAgfSBlbHNlIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5vY2N1cGF0aW9uU2V0ID0gZmFsc2VcblxuICAgIGlmICh0aGlzLmFjdG9yLmFyY2hldHlwZSkge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLmFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlLm5hbWVcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5hcmNoZXR5cGVTZXQgPSB0cnVlXG4gICAgfSBlbHNlIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5hcmNoZXR5cGVTZXQgPSBmYWxzZVxuXG4gICAgc2hlZXREYXRhLnRvdGFsRXhwZXJpZW5jZSA9IHRoaXMuYWN0b3IuZXhwZXJpZW5jZVBvaW50c1xuICAgIHNoZWV0RGF0YS50b3RhbE9jY3VwYXRpb24gPSB0aGlzLmFjdG9yLm9jY3VwYXRpb25Qb2ludHNTcGVudFxuICAgIHNoZWV0RGF0YS5pbnZhbGlkT2NjdXBhdGlvblBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5vY2N1cGF0aW9uUG9pbnRzU3BlbnQpICE9PVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iuc3lzdGVtLmRldmVsb3BtZW50Py5vY2N1cGF0aW9uKVxuICAgIHNoZWV0RGF0YS50b3RhbEFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlUG9pbnRzU3BlbnRcbiAgICBzaGVldERhdGEuaW52YWxpZEFyY2hldHlwZVBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5hcmNoZXR5cGVQb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5zeXN0ZW0uZGV2ZWxvcG1lbnQ/LmFyY2hldHlwZSlcbiAgICBzaGVldERhdGEudG90YWxQZXJzb25hbCA9IHRoaXMuYWN0b3IucGVyc29uYWxQb2ludHNTcGVudFxuICAgIHNoZWV0RGF0YS5pbnZhbGlkUGVyc29uYWxQb2ludHMgPVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IucGVyc29uYWxQb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5zeXN0ZW0uZGV2ZWxvcG1lbnQ/LnBlcnNvbmFsKVxuICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNYXggPSBOdW1iZXIoXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4XG4gICAgKVxuICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNaW4gPSBOdW1iZXIoXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LnN5c3RlbS5jcmVkaXRSYXRpbmcubWluXG4gICAgKVxuICAgIHNoZWV0RGF0YS5pbnZhbGlkQ3JlZGl0UmF0aW5nID1cbiAgICAgIHRoaXMuYWN0b3IuY3JlZGl0UmF0aW5nU2tpbGw/LnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbiA+XG4gICAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nTWF4IHx8XG4gICAgICB0aGlzLmFjdG9yLmNyZWRpdFJhdGluZ1NraWxsPy5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24gPFxuICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ01pblxuICAgIHNoZWV0RGF0YS5wdWxwVGFsZW50Q291bnQgPSBzaGVldERhdGEuaXRlbXNCeVR5cGUudGFsZW50Py5sZW5ndGhcbiAgICAgID8gc2hlZXREYXRhLml0ZW1zQnlUeXBlLnRhbGVudD8ubGVuZ3RoXG4gICAgICA6IDBcbiAgICBzaGVldERhdGEubWluUHVscFRhbGVudHMgPSB0aGlzLmFjdG9yLmFyY2hldHlwZT8uc3lzdGVtLnRhbGVudHNcbiAgICAgID8gdGhpcy5hY3Rvci5hcmNoZXR5cGU/LnN5c3RlbS50YWxlbnRzXG4gICAgICA6IDBcbiAgICBzaGVldERhdGEuaW52YWxpZFB1bHBUYWxlbnRzID0gc2hlZXREYXRhLnB1bHBUYWxlbnRDb3VudCA8IHNoZWV0RGF0YS5taW5QdWxwVGFsZW50c1xuXG4gICAgc2hlZXREYXRhLmhhc0RldmVsb3BtZW50UGhhc2UgPSB0aGlzLmFjdG9yLmhhc0RldmVsb3BtZW50UGhhc2VcblxuICAgIHNoZWV0RGF0YS5hbGxvd0RldmVsb3BtZW50ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJylcbiAgICBzaGVldERhdGEuYWxsb3dDaGFyQ3JlYXRpb24gPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJylcbiAgICBzaGVldERhdGEuZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ2RldmVsb3BtZW50Um9sbEZvckx1Y2snXG4gICAgKVxuICAgIHNoZWV0RGF0YS5zaG93RGV2UGFubmVsID0gc2hlZXREYXRhLmFsbG93RGV2ZWxvcG1lbnQgfHwgc2hlZXREYXRhLmFsbG93Q2hhckNyZWF0aW9uXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cyA9IFtdXG4gICAgZm9yIChjb25zdCBrZXkgaW4gQ09DNy5tb25ldGFyeUZvcm1hdHMpIHtcbiAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlGb3JtYXRzLnB1c2goeyBrZXksIHZhbDogZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubW9uZXRhcnlGb3JtYXRzW2tleV0pIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLnNob3dDdXJyZW5jeVN5bWJvbCA9IFsnZGVjaW1hbExlZnQnLCAnZGVjaW1hbFJpZ2h0JywgJ2ludGVnZXJMZWZ0JywgJ2ludGVnZXJSaWdodCddLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlUeXBlcykge1xuICAgICAgaWYgKENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5sZW5ndGggPT09IDAgfHwgQ09DNy5tb25ldGFyeVR5cGVzW2tleV0uZmlsdGVyLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpKSB7XG4gICAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlUeXBlcy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5uYW1lKSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5tYW51YWxDcmVkaXQgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnbWFudWFsQ3JlZGl0JylcbiAgICBpZiAoIXNoZWV0RGF0YS5tYW51YWxDcmVkaXQpIHtcbiAgICAgIHNoZWV0RGF0YS5tb25ldGFyeSA9IHtcbiAgICAgICAgc3BlbmRpbmdMZXZlbDogQ29DQWN0b3IubW9uZXRhcnlGb3JtYXQoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCwgdGhpcy5hY3Rvci5zcGVuZGluZ0xldmVsKSxcbiAgICAgICAgYXNzZXRzOiBDb0NBY3Rvci5tb25ldGFyeUZvcm1hdChzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCBzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuc3ltYm9sLCB0aGlzLmFjdG9yLmFzc2V0cyksXG4gICAgICAgIGNhc2g6IENvQ0FjdG9yLm1vbmV0YXJ5Rm9ybWF0KHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5zeW1ib2wsIHRoaXMuYWN0b3IuY2FzaClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICBzaGVldERhdGEuc3VtbWFyaXplZCA9IHRoaXMuc3VtbWFyaXplZCAmJiAhc2hlZXREYXRhLnBlcm1pc3Npb25MaW1pdGVkXG4gICAgc2hlZXREYXRhLnNraWxsTGlzdCA9IFtdXG4gICAgbGV0IHByZXZpb3VzU3BlYyA9ICcnXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiBzaGVldERhdGEuc2tpbGxzKSB7XG4gICAgICBpZiAoc2hlZXREYXRhLnNraWxsU2hvd1VuY29tbW9uIHx8ICFza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5yYXJpdHkpIHtcbiAgICAgICAgaWYgKHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgICBpZiAocHJldmlvdXNTcGVjICE9PSBza2lsbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIHByZXZpb3VzU3BlYyA9IHNraWxsLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsTGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgaXNTcGVjaWFsaXphdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgbmFtZTogc2tpbGwuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuc2tpbGxMaXN0LnB1c2goc2tpbGwpXG4gICAgICB9XG4gICAgfVxuICAgIHNoZWV0RGF0YS5za2lsbHNCeVZhbHVlID0gWy4uLnNoZWV0RGF0YS5za2lsbHNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBiLnN5c3RlbS52YWx1ZSAtIGEuc3lzdGVtLnZhbHVlXG4gICAgfSlcbiAgICBzaGVldERhdGEudG9wU2tpbGxzID0gWy4uLnNoZWV0RGF0YS5za2lsbHNCeVZhbHVlXS5zbGljZSgwLCAxNClcbiAgICBzaGVldERhdGEuc2tpbGxzQnlWYWx1ZSA9IHNoZWV0RGF0YS5za2lsbHNCeVZhbHVlLmZpbHRlcihcbiAgICAgIHNraWxsID0+IHNoZWV0RGF0YS5za2lsbFNob3dVbmNvbW1vbiB8fCAhc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMucmFyaXR5XG4gICAgKVxuICAgIHNoZWV0RGF0YS50b3BXZWFwb25zID0gWy4uLnNoZWV0RGF0YS5tZWxlZVdwbiwgLi4uc2hlZXREYXRhLnJhbmdlV3BuXVxuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIGEuc3lzdGVtLnNraWxsLm1haW4/LnZhbHVlIC0gYi5zeXN0ZW0uc2tpbGwubWFpbj8udmFsdWVcbiAgICAgIH0pXG4gICAgICAucmV2ZXJzZSgpXG4gICAgICAuc2xpY2UoMCwgMylcbiAgICBzaGVldERhdGEuZGlzcGxheVBsYXllck5hbWUgPSBnYW1lLnNldHRpbmdzLmdldChcbiAgICAgICdDb0M3JyxcbiAgICAgICdkaXNwbGF5UGxheWVyTmFtZU9uU2hlZXQnXG4gICAgKVxuICAgIGlmIChzaGVldERhdGEuZGlzcGxheVBsYXllck5hbWUgJiYgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5wbGF5ZXJuYW1lKSB7XG4gICAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci5jaGFyYWN0ZXJVc2VyXG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MucGxheWVybmFtZSA9IHVzZXIubmFtZVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RFbXB0eSA9IHNoZWV0RGF0YS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdpdGVtJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnYm9vaycpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzcGVsbCcpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAndGFsZW50JykgfHxcbiAgICAgICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZVRhbGVudHMnKSlcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzdGF0dXMnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcblxuICAgIHNoZWV0RGF0YS5oYXNJbnZlbnRvcnkgPVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmFja3N0b3J5ID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJhY2tzdG9yeSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgX3NhdmVTY3JvbGxQb3NpdGlvbnMgKGh0bWwpIHtcbiAgICBzdXBlci5fc2F2ZVNjcm9sbFBvc2l0aW9ucyhodG1sKVxuICAgIGNvbnN0IHNlbGVjdG9ycyA9IFsnLnJpZ2h0LXBhbmVsIC50YWIuZGV2ZWxvcG1lbnQgb2wnXVxuICAgIHRoaXMuX3Njcm9sbFBvc2l0aW9uc1ggPSBzZWxlY3RvcnMucmVkdWNlKChwb3MsIHNlbCkgPT4ge1xuICAgICAgY29uc3QgZWwgPSBodG1sLmZpbmQoc2VsKVxuICAgICAgcG9zW3NlbF0gPSBBcnJheS5mcm9tKGVsKS5tYXAoZWwgPT4gZWwuc2Nyb2xsTGVmdClcbiAgICAgIHJldHVybiBwb3NcbiAgICB9LCB7fSlcbiAgfVxuXG4gIF9yZXN0b3JlU2Nyb2xsUG9zaXRpb25zIChodG1sKSB7XG4gICAgc3VwZXIuX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMoaHRtbClcbiAgICBjb25zdCBzZWxlY3RvcnMgPSBbJy5yaWdodC1wYW5lbCAudGFiLmRldmVsb3BtZW50IG9sJ11cbiAgICBjb25zdCBwb3NpdGlvbnMgPSB0aGlzLl9zY3JvbGxQb3NpdGlvbnNYIHx8IHt9XG4gICAgZm9yIChjb25zdCBzZWwgb2Ygc2VsZWN0b3JzKSB7XG4gICAgICBjb25zdCBlbCA9IGh0bWwuZmluZChzZWwpXG4gICAgICBlbC5lYWNoKChpLCBlbCkgPT4geyBlbC5zY3JvbGxMZWZ0ID0gcG9zaXRpb25zW3NlbF0/LltpXSB8fCAwIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSA1ZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdhY3RvcicsICdjaGFyYWN0ZXInXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyL2luZGV4Lmh0bWwnLFxuICAgICAgd2lkdGg6IDY4NyxcbiAgICAgIGhlaWdodDogNjIzLFxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgc2Nyb2xsWTogWycucmlnaHQtcGFuZWwgLnRhYiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3NraWxscydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgICAvLyBNT0RJRjogMC44Lnggb3duZXIgZGVwcmVjYXRlZCAgPT4gaXNPd25lclxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUuZmxhZ2dlZDRkZXYnKVxuICAgICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25Ta2lsbERldihldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucmVzZXQtb2NjdXBhdGlvbicpXG4gICAgICAgIC5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0T2NjdXBhdGlvbigpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnJlc2V0LWFyY2hldHlwZScpXG4gICAgICAgIC5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0QXJjaGV0eXBlKCkpXG4gICAgICBodG1sLmZpbmQoJy5vcGVuLWl0ZW0nKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZXRhaWxzKGV2ZW50KSlcbiAgICAgIC8vIGh0bWxcbiAgICAgIC8vICAgLmZpbmQoJ1tuYW1lPVwiZGF0YS5hdHRyaWJzLmhwLnZhbHVlXCJdJylcbiAgICAgIC8vICAgLmNoYW5nZShhc3luYyBldmVudCA9PntcbiAgICAgIC8vICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAvLyAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIC8vICAgICBsZXQgdmFsdWUgPSBOdW1iZXIoIGV2ZW50LmN1cnJlbnRUYXJnZXQ/LnZhbHVlKVxuICAgICAgLy8gICAgIGlmKCAhaXNOYU4odmFsdWUpKSBhd2FpdCB0aGlzLmFjdG9yLnNldEhwKGV2ZW50KVxuICAgICAgLy8gICAgIGVsc2UgdWkubm90aWZpY2F0aW9ucy53YXJuKCdFcnJvciBwYXJzaW5nIEhQIHZhbHVlJylcbiAgICAgIC8vICAgfSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1saXN0LW1vZGUnKS5jbGljayhldmVudCA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlU2tpbGxMaXN0TW9kZShldmVudClcbiAgICAgIH0pXG4gICAgICBodG1sLmZpbmQoJy50b2dnbGUtdW5jb21tb24tbW9kZScpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTa2lsbFVuY29tbW9uTW9kZShldmVudClcbiAgICAgIH0pXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuc2FuaXR5LWxvc3MtdHlwZS1hZGQnKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkFkZFNhbml0eUxvc3NSZWFzb24uYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuc2FuaXR5LWxvc3MtdHlwZS1kZWxldGUnKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkRlbGV0ZVNhbml0eUxvc3NSZWFzb24uYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcudG9nZ2xlLWtlZXBlci1mbGFncycpXG4gICAgICAgICAgLmNsaWNrKHRoaXMuX29uVG9nZ2xlS2VlcGVyRmxhZ3MuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbC5maW5kKCcuYWRkLW1vbmV0YXJ5JykuY2xpY2sodGhpcy5fb25BZGRNb25ldGFyeS5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5yZW1vdmUtbW9uZXRhcnknKS5jbGljayh0aGlzLl9vblJlbW92ZU1vbmV0YXJ5LmJpbmQodGhpcykpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uQWRkTW9uZXRhcnkgKCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuYWN0b3Iuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyA/IGR1cGxpY2F0ZSh0aGlzLmFjdG9yLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMpIDogW11cbiAgICB2YWx1ZXMucHVzaCh7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIG1pbjogbnVsbCxcbiAgICAgIG1heDogbnVsbCxcbiAgICAgIGNhc2hUeXBlOiAwLFxuICAgICAgY2FzaFZhbHVlOiAnJyxcbiAgICAgIGFzc2V0c1R5cGU6IDAsXG4gICAgICBhc3NldHNWYWx1ZTogJycsXG4gICAgICBzcGVuZGluZ1R5cGU6IDAsXG4gICAgICBzcGVuZGluZ1ZhbHVlOiAnJ1xuICAgIH0pXG4gICAgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyc6IHZhbHVlcyB9KVxuICB9XG5cbiAgX29uUmVtb3ZlTW9uZXRhcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkaXYgPSBhLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCB2YWx1ZXMgPSBkdXBsaWNhdGUodGhpcy5hY3Rvci5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKVxuICAgIHZhbHVlcy5zcGxpY2UoTnVtYmVyKGRpdi5kYXRhc2V0LmluZGV4KSwgMSlcbiAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBfb25Ub2dnbGVLZWVwZXJGbGFncyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZykge1xuICAgICAgY2FzZSAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0RmxhZyhcbiAgICAgICAgICAnQ29DNycsXG4gICAgICAgICAgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnLFxuICAgICAgICAgICF0aGlzLmFjdG9yLm15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWRcbiAgICAgICAgKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbXl0aG9zSGFyZGVuZWQnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnLCAhdGhpcy5hY3Rvci5teXRob3NIYXJkZW5lZClcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25BZGRTYW5pdHlMb3NzUmVhc29uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBuZXcgQ29DN0NyZWF0ZU15dGhvc0VuY291bnRlcihcbiAgICAgIHtcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IsXG4gICAgICAgIHR5cGU6IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlXG4gICAgICB9LFxuICAgICAge31cbiAgICApLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgX29uRGVsZXRlU2FuaXR5TG9zc1JlYXNvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgb2Zmc2V0ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgLmNsb3Nlc3QoJy5mbGV4cm93JylcbiAgICAgIC5kYXRhKCdvZmZzZXQnKVxuICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSB0aGlzLmFjdG9yLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzID8/IFtdXG4gICAgc2FuaXR5TG9zc0V2ZW50cy5zcGxpY2Uob2Zmc2V0LCAxKVxuICAgIHNhbml0eUxvc3NFdmVudHMuc29ydChmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICAgIHJldHVybiBsZWZ0LnR5cGUubG9jYWxlQ29tcGFyZShyaWdodC50eXBlKVxuICAgIH0pXG4gICAgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVTa2lsbExpc3RNb2RlIChldmVudCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZyhcbiAgICAgICdDb0M3JyxcbiAgICAgICdza2lsbExpc3RNb2RlJyxcbiAgICAgICF0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScpXG4gICAgKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlU2tpbGxVbmNvbW1vbk1vZGUgKGV2ZW50KSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ3NraWxsU2hvd1VuY29tbW9uJyxcbiAgICAgICF0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxTaG93VW5jb21tb24nKVxuICAgIClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vblNraWxsRGV2IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBza2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgYXdhaXQgdGhpcy5hY3Rvci5kZXZlbG9wU2tpbGwoc2tpbGxJZCwgZXZlbnQuc2hpZnRLZXkpXG4gIH1cblxuICBfb25JdGVtRGV0YWlscyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3JbdHlwZV1cbiAgICBpZiAoaXRlbSkgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHN5c3RlbSA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSk/LnN5c3RlbVxuICAgIGlmIChzeXN0ZW0ubW9uZXRhcnk/LnZhbHVlcykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSA9IE9iamVjdC52YWx1ZXMoc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyB8fCBbXSlcbiAgICB9XG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cblxuICBzdGF0aWMgcmVuZGVyU2hlZXQgKHNoZWV0LCBodG1sKSB7XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJykpIHtcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtYmcnLFxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtYmcnLFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgICAgKVxuICAgICAgICAgIC8vIGNvbnN0IGJvcmRlckltYWdlID0gc2hlZXQuZWxlbWVudC5maW5kKCdmb3JtJykuY3NzKCdib3JkZXItaW1hZ2UnKTtcbiAgICAgICAgICAvLyBzaGVldC5lbGVtZW50LmZpbmQoJ2Zvcm0nKS5jc3MoJ2JvcmRlci1pbWFnZScsICcnKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kVHlwZScpICE9PSAnc2xpY2UnXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBsZXQgc3R5bGVTaGVldCwgY3NzUnVsZUluZGV4XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChkb2N1bWVudC5zdHlsZVNoZWV0c1tpXS5ocmVmPy5lbmRzV2l0aCgnY29jN2cuY3NzJykpIHtcbiAgICAgICAgICAgICAgICBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbaV1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVTaGVldC5ydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIHN0eWxlU2hlZXQucnVsZXNbaV0uc2VsZWN0b3JUZXh0ID09PSAnLnNoZWV0VjIuY2hhcmFjdGVyIGZvcm0nXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBjc3NSdWxlSW5kZXggPSBpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNzc1J1bGVJbmRleCkge1xuICAgICAgICAgICAgICBjb25zdCBDU1NTdHlsZSA9IHN0eWxlU2hlZXQucnVsZXNbY3NzUnVsZUluZGV4XS5zdHlsZVxuICAgICAgICAgICAgICBDU1NTdHlsZS5yZW1vdmVQcm9wZXJ0eSgnYm9yZGVyLWltYWdlJylcbiAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQnLFxuICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdhdXRvJylcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnY29udGFpbic6XG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvbnRhaW4nKVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdjb3Zlcic6XG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvdmVyJylcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnYXV0bycpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5nc1xuICAgICAgICAgICAgLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW90aGVyLXNoZWV0LWJnJyxcbiAgICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1vdGhlci1zaGVldC1iZycsXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtaW1hZ2UnLFxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtaW1hZ2UnLFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWZyb250LWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrRnJvbnRDb2xvcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1iYWNrLWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1pbnRlcmFjdGl2ZS1jb2xvcicsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0ludGVyYWN0aXZlQ29sb3InKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtGaXhlZFNraWxsTGVuZ3RoJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoJy0tc2tpbGwtbGVuZ3RoJywgJ2F1dG8nKVxuICAgICAgICBzaGVldC5lbGVtZW50LmNzcygnLS1za2lsbC1zcGVjaWFsaXphdGlvbi1sZW5ndGgnLCAnYXV0bycpXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnQnKSkge1xuICAgICAgICBjb25zdCBjdXN0b21TaGVldEZvbnQgPSBuZXcgRm9udEZhY2UoXG4gICAgICAgICAgJ2N1c3RvbVNoZWV0Rm9udCcsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250JylcbiAgICAgICAgKVxuICAgICAgICBjdXN0b21TaGVldEZvbnRcbiAgICAgICAgICAubG9hZCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZhY2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChsb2FkZWRGYWNlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpKSB7XG4gICAgICAgIGNvbnN0IGN1c3RvbVNoZWV0Q3Vyc2l2ZUZvbnQgPSBuZXcgRm9udEZhY2UoXG4gICAgICAgICAgJ2N1c3RvbVNoZWV0Rm9udCcsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpLFxuICAgICAgICAgIHsgd2VpZ2h0OiAnYm9sZCcgfVxuICAgICAgICApXG4gICAgICAgIGN1c3RvbVNoZWV0Q3Vyc2l2ZUZvbnRcbiAgICAgICAgICAubG9hZCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZhY2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChsb2FkZWRGYWNlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250U2l6ZScpKSB7XG4gICAgICAgIGNvbnN0IHNpemUgPSBgJHtnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJyl9cHhgXG4gICAgICAgIGlmIChzaXplICE9PSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJykpIHtcbiAgICAgICAgICAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJywgc2l6ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygc2hlZXQuYWN0b3I/LnN5c3RlbS5wYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzaGVldC5hY3Rvci5zeXN0ZW0ucGFubmVsKSkge1xuICAgICAgICBjb25zdCBwYW5uZWxDbGFzcyA9IGNoYXRIZWxwZXIuY2FtZWxDYXNlVG9IeXBoZW4oa2V5KVxuICAgICAgICBjb25zdCBwYW5uZWwgPSBodG1sLmZpbmQoYC5wYW5uZWwuJHtwYW5uZWxDbGFzc31gKVxuICAgICAgICBpZiAodmFsdWUuZXhwYW5kZWQpIHBhbm5lbC5hZGRDbGFzcygnZXhwYW5kZWQnKVxuICAgICAgICBlbHNlIHBhbm5lbC5yZW1vdmVDbGFzcygnZXhwYW5kZWQnKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29tYmF0IHtcbiAgc3RhdGljIHJlbmRlckNvbWJhdFRyYWNrZXIgKGFwcCwgaHRtbCwgZGF0YSkge1xuICAgIGNvbnN0IGN1cnJlbnRDb21iYXQgPSBkYXRhLmNvbWJhdHNbZGF0YS5jdXJyZW50SW5kZXggLSAxXVxuICAgIGlmICghY3VycmVudENvbWJhdCkgcmV0dXJuXG5cbiAgICAvLyBUT0RPIDogU2kgbGUgY29tYmF0IGVzdCBkZWphIGRlYnV0w6kgYXZhbnQgY2hhcmdlbWVudCBsYSBmb25jdGlvbiBkJ2luaXRpYXRpdmUgcG9pbnRlIHZlcnMgbCdhbmNpZW5uZS5cbiAgICAvLyBsYSBmb25jdGlvbiBhdHRyaWJ1w6llIGVzdCBkYXRhLmNvbWJhdC5yb2xsSW5pdGlhdGl2ZVxuICAgIGh0bWwuZmluZCgnLmNvbWJhdGFudCcpLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICAvLyBpZiggZ2FtZS5jb21iYXQuc3RhcnRlZCl7XG5cbiAgICAgIGNvbnN0IGNvbWJJZCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jb21iYXRhbnQtaWQnKVxuICAgICAgY29uc3QgY29tYmF0YW50Q29udHJvbHNEaXYgPSBlbC5xdWVyeVNlbGVjdG9yKCcuY29tYmF0YW50LWNvbnRyb2xzJylcbiAgICAgIC8vIGNvbnN0IGNvbWJhdGFudCA9IGdhbWUuY29tYmF0LmdldENvbWJhdGFudChjb21iSWQpO1xuICAgICAgY29uc3QgY29tYmF0YW50ID0gY3VycmVudENvbWJhdC5jb21iYXRhbnRzLmdldChjb21iSWQpXG5cbiAgICAgIGlmIChjb21iYXRhbnQuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgICAkKGNvbWJhdGFudENvbnRyb2xzRGl2KS5wcmVwZW5kKFxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFjdGl2ZSBhZGQtaW5pdFwiIHRpdGxlPVwiJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5QdXRHdW5Bd2F5J1xuICAgICAgICAgICl9XCIgZGF0YS1jb250cm9sPVwiZHJhd0d1blwiPjxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1yZXZvbHZlclwiPjwvaT48L2E+YFxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGNvbWJhdGFudENvbnRyb2xzRGl2KS5wcmVwZW5kKFxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFkZC1pbml0XCIgdGl0bGU9XCIke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LkRyYXdHdW4nXG4gICAgICAgICAgKX1cIiBkYXRhLWNvbnRyb2w9XCJkcmF3R3VuXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLXJldm9sdmVyXCI+PC9pPjwvYT5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSA9PT0gJ29wdGlvbmFsJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5SW5pdEFzVGV4dCcpXG4gICAgICApIHtcbiAgICAgICAgaWYgKGNvbWJhdGFudC5pbml0aWF0aXZlKSB7XG4gICAgICAgICAgY29uc3QgdG9rZW5Jbml0aWF0aXZlID0gZWwucXVlcnlTZWxlY3RvcignLnRva2VuLWluaXRpYXRpdmUnKVxuICAgICAgICAgIGNvbnN0IGluaXRpYXRpdmVUZXN0ID0gdG9rZW5Jbml0aWF0aXZlLnF1ZXJ5U2VsZWN0b3IoJy5pbml0aWF0aXZlJylcbiAgICAgICAgICBjb25zdCByb2xsID1cbiAgICAgICAgICAgIDEwMCAqIGNvbWJhdGFudC5pbml0aWF0aXZlIC0gMTAwICogTWF0aC5mbG9vcihjb21iYXRhbnQuaW5pdGlhdGl2ZSlcbiAgICAgICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoY29tYmF0YW50LmluaXRpYXRpdmUpKSB7XG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZnVtYmxlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdmYWlsdXJlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgncmVndWxhci1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5UmVndWxhcidcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnaGFyZC1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5SGFyZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZXh0cmVtZS1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5RXh0cmVtZSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2NyaXRpY2FsJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5Q3JpdGljYWwnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvbWJhdGFudC5pbml0aWF0aXZlIDwgMCkge1xuICAgICAgICBjb25zdCBoNCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy50b2tlbi1uYW1lJykucXVlcnlTZWxlY3RvcignaDQnKVxuICAgICAgICBjb25zdCBzcGFuID0gZWwucXVlcnlTZWxlY3Rvcignc3Bhbi5pbml0aWF0aXZlJylcbiAgICAgICAgaDQuc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICAgIGg0LnN0eWxlLnRleHRTaGFkb3cgPSAnMXB4IDFweCA0cHggZGFya3JlZCdcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250V2VpZ2h0ID0gJzkwMCdcbiAgICAgICAgc3Bhbi5zdHlsZS50ZXh0U2hhZG93ID0gJzFweCAxcHggNHB4IGRhcmtyZWQnXG5cbiAgICAgICAgZWwuc3R5bGUuY29sb3IgPSAnZGFya3JlZCdcbiAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZCA9ICdibGFjaydcbiAgICAgICAgZWwuc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICB9XG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5hZGQtaW5pdCcpLmNsaWNrKGV2ZW50ID0+IENvQzdDb21iYXQuX29uVG9nZ2xlR3VuKGV2ZW50KSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25Ub2dnbGVHdW4gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgYnRuID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxpID0gYnRuLmNsb3Nlc3QoJy5jb21iYXRhbnQnKVxuICAgIGNvbnN0IGMgPSBhd2FpdCBnYW1lLmNvbWJhdC5jb21iYXRhbnRzLmdldChsaS5kYXRhc2V0LmNvbWJhdGFudElkKVxuICAgIGlmIChjLmFjdG9yLmlzT3duZXIpIHtcbiAgICAgIGlmIChjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcbiAgICAgICAgYXdhaXQgYy5zZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicsIGZhbHNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgYy5zZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicsIHRydWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbmV3SW5pdCA9IGF3YWl0IGMuYWN0b3Iucm9sbEluaXRpYXRpdmUoISFjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpXG4gICAgaWYgKGMuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgaWYgKGMuaW5pdGlhdGl2ZSA8IG5ld0luaXQpIGdhbWUuY29tYmF0LnNldEluaXRpYXRpdmUoYy5pZCwgbmV3SW5pdClcbiAgICB9IGVsc2UgZ2FtZS5jb21iYXQuc2V0SW5pdGlhdGl2ZShjLmlkLCBuZXdJbml0KVxuICB9XG59XG5cbi8qKlxuICogUm9sbCBpbml0aWF0aXZlIGZvciBvbmUgb3IgbXVsdGlwbGUgQ29tYmF0YW50cyB3aXRoaW4gdGhlIENvbWJhdCBlbnRpdHlcbiAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBpZHMgICAgIEEgQ29tYmF0YW50IGlkIG9yIEFycmF5IG9mIGlkcyBmb3Igd2hpY2ggdG8gcm9sbFxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAgICAgQWRkaXRpb25hbCBvcHRpb25zIHdoaWNoIG1vZGlmeSBob3cgaW5pdGlhdGl2ZSByb2xscyBhcmUgY3JlYXRlZCBvciBwcmVzZW50ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBbb3B0aW9ucy5mb3JtdWxhXSAgICAgICAgIEEgbm9uLWRlZmF1bHQgaW5pdGlhdGl2ZSBmb3JtdWxhIHRvIHJvbGwuIE90aGVyd2lzZSB0aGUgc3lzdGVtIGRlZmF1bHQgaXMgdXNlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudXBkYXRlVHVybj10cnVlXSAgICAgVXBkYXRlIHRoZSBDb21iYXQgdHVybiBhZnRlciBhZGRpbmcgbmV3IGluaXRpYXRpdmUgc2NvcmVzIHRvIGtlZXAgdGhlIHR1cm4gb24gdGhlIHNhbWUgQ29tYmF0YW50LlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLm1lc3NhZ2VPcHRpb25zPXt9XSAgICBBZGRpdGlvbmFsIG9wdGlvbnMgd2l0aCB3aGljaCB0byBjdXN0b21pemUgY3JlYXRlZCBDaGF0IE1lc3NhZ2VzXG4gKiBAcmV0dXJuIHtQcm9taXNlPENvbWJhdD59ICAgICAgICBBIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gdGhlIHVwZGF0ZWQgQ29tYmF0IGVudGl0eSBvbmNlIHVwZGF0ZXMgYXJlIGNvbXBsZXRlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcm9sbEluaXRpYXRpdmUgKFxuICBpZHMsXG4gIHsgZm9ybXVsYSA9IG51bGwsIHVwZGF0ZVR1cm4gPSB0cnVlLCBtZXNzYWdlT3B0aW9ucyA9IHt9IH0gPSB7fVxuKSB7XG4gIC8vIEl0ZXJhdGUgb3ZlciBDb21iYXRhbnRzLCBwZXJmb3JtaW5nIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgZWFjaFxuICBjb25zdCB1cGRhdGVzID0gW11cbiAgZm9yIChjb25zdCBbLCBpZF0gb2YgaWRzLmVudHJpZXMoKSkge1xuICAgIC8vIEdldCBDb21iYXRhbnQgZGF0YSAobm9uLXN0cmljdGx5KVxuICAgIGNvbnN0IGNvbWJhdGFudCA9IHRoaXMuY29tYmF0YW50cy5nZXQoaWQpXG5cbiAgICAvLyBQcm9kdWNlIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgdGhlIENvbWJhdGFudFxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBjb21iYXRhbnQuYWN0b3Iucm9sbEluaXRpYXRpdmUoXG4gICAgICAhIWNvbWJhdGFudC5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpXG4gICAgKVxuICAgIHVwZGF0ZXMucHVzaCh7IF9pZDogaWQsIGluaXRpYXRpdmU6IHJvbGwgfSlcbiAgfVxuICBpZiAoIXVwZGF0ZXMubGVuZ3RoKSByZXR1cm4gdGhpc1xuXG4gIC8vIFVwZGF0ZSBtdWx0aXBsZSBjb21iYXRhbnRzXG4gIGF3YWl0IHRoaXMudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0NvbWJhdGFudCcsIHVwZGF0ZXMpXG5cbiAgcmV0dXJuIHRoaXNcbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIGR1cGxpY2F0ZSwgZXhwYW5kT2JqZWN0LCBmbGF0dGVuT2JqZWN0LCBGb3JtQXBwbGljYXRpb24sIGdhbWUsIEl0ZW0sIG1lcmdlT2JqZWN0ICovXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DSURCYXRjaCBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjb2MtaWQtZWRpdG9yJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jb2MtaWQtYmF0Y2guaGJzJyxcbiAgICAgIHdpZHRoOiA3MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHRpdGxlOiAnQ29DNy5Db0NJREZsYWcudGl0bGUnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICBzdWJtaXRPbkNsb3NlOiBmYWxzZSxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuZm91bmRLZXlzID0gT2JqZWN0LmtleXMoc2hlZXREYXRhLm9iamVjdC5mb3VuZEtleXMpLnJlZHVjZSgob3V0LCBrZXkpID0+IHtcbiAgICAgIG91dC5wdXNoKHsgbmFtZToga2V5LCBrZXk6IHNoZWV0RGF0YS5vYmplY3QuZm91bmRLZXlzW2tleV0gfSlcbiAgICAgIHJldHVybiBvdXRcbiAgICB9LCBbXSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgc2hlZXREYXRhLm1pc3NpbmdOYW1lcyA9IE9iamVjdC5rZXlzKHNoZWV0RGF0YS5vYmplY3QubWlzc2luZ05hbWVzKS5yZWR1Y2UoKG91dCwga2V5KSA9PiB7XG4gICAgICBvdXQucHVzaCh7IGtleTogc2hlZXREYXRhLm9iamVjdC5mb3VuZEtleXNba2V5XSA/PyAnJywgbmFtZToga2V5LCBjdXN0b206IHNoZWV0RGF0YS5vYmplY3QubWlzc2luZ05hbWVzW2tleV0sIHN1ZmZpeDogc2hlZXREYXRhLm9iamVjdC5taXNzaW5nTmFtZXNba2V5XS5yZXBsYWNlKHRoaXMub2JqZWN0LnN1ZmZpeFJlZ0V4cCwgJycpIH0pXG4gICAgICByZXR1cm4gb3V0XG4gICAgfSwgW10pLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJy5leGlzdGluZycpLmNoYW5nZSh0aGlzLm9uU2V0TmFtZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmZhLXdhbmQtbWFnaWMnKS5jbGljayh0aGlzLm9uQ2xpY2tHdWVzcy5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnaW5wdXQnKS5rZXl1cCh0aGlzLm9uS2V5dXAuYmluZCh0aGlzKSlcbiAgfVxuXG4gIG9uU2V0TmFtZSAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgdGhpcy5vYmplY3QubWlzc2luZ05hbWVzW29iai5jbG9zZXN0KCdsaScpLmRhdGEoJ25hbWUnKV0gPSBvYmoudmFsKClcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgb25DbGlja0d1ZXNzIChldmVudCkge1xuICAgIGNvbnN0IG9iaiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBuYW1lID0gb2JqLmNsb3Nlc3QoJ2xpJykuZGF0YSgnbmFtZScpXG4gICAgdGhpcy5vYmplY3QubWlzc2luZ05hbWVzW25hbWVdID0gdGhpcy5vYmplY3QuaWRQcmVmaXggKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKG5hbWUpXG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIG9uS2V5dXAgKGV2ZW50KSB7XG4gICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IG5hbWUgPSBvYmouY2xvc2VzdCgnbGknKS5kYXRhKCduYW1lJylcbiAgICB0aGlzLm9iamVjdC5taXNzaW5nTmFtZXNbbmFtZV0gPSB0aGlzLm9iamVjdC5pZFByZWZpeCArIG9iai52YWwoKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKGV2ZW50LnN1Ym1pdHRlcikge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LnR5cGVOYW1lID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU2tpbGwnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgYXdhaXQgQ29DSURCYXRjaC5wcm9jZXNzU2tpbGxLZXlzKHRoaXMub2JqZWN0LnVwZGF0ZUxpc3QsIHRoaXMub2JqZWN0Lm1pc3NpbmdOYW1lcylcbiAgICAgIH1cbiAgICAgIHRoaXMub2JqZWN0LnJlc29sdmUodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcHJvY2Vzc1NraWxsS2V5cyAodXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIGNvbnN0IGFjdG9ycyA9IHt9XG4gICAgY29uc3Qgc2NlbmVzID0ge31cbiAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVMaXN0KSB7XG4gICAgICB1cGRhdGUuY29jaWRGbGFnLmlkID0gbWlzc2luZ05hbWVzW3VwZGF0ZS5uYW1lXVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuY29jaWRGbGFnLmxhbmcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZS5jb2NpZEZsYWcubGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5jb2NpZEZsYWcucHJpb3JpdHkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZS5jb2NpZEZsYWcucHJpb3JpdHkgPSAwXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5jb2NpZEZsYWcuZXJhcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlLmNvY2lkRmxhZy5lcmFzID0ge31cbiAgICAgIH1cbiAgICAgIGNvbnN0IGZsYWdzID0gZmxhdHRlbk9iamVjdCh7IGZsYWdzOiB7IENvQzc6IHsgY29jaWRGbGFnOiB1cGRhdGUuY29jaWRGbGFnIH0gfSB9KVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuc2NlbmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2NlbmVzW3VwZGF0ZS5zY2VuZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQodXBkYXRlLnNjZW5lKVxuICAgICAgICAgIHNjZW5lc1t1cGRhdGUuc2NlbmVdID0gc2NlbmUudG9PYmplY3QoKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRva2VuT2Zmc2V0ID0gc2NlbmVzW3VwZGF0ZS5zY2VuZV0udG9rZW5zLmZpbmRJbmRleCh0ID0+IHQuX2lkID09PSB1cGRhdGUudG9rZW4pXG4gICAgICAgIGlmICh0b2tlbk9mZnNldCA+IC0xKSB7XG4gICAgICAgICAgY29uc3QgaXRlbU9mZnNldCA9IHNjZW5lc1t1cGRhdGUuc2NlbmVdLnRva2Vuc1t0b2tlbk9mZnNldF0uYWN0b3JEYXRhLml0ZW1zLmZpbmRJbmRleChpID0+IGkuX2lkID09PSB1cGRhdGUuaXRlbSlcbiAgICAgICAgICBpZiAoaXRlbU9mZnNldCA+IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBleHBhbmRlZEZsYWdzID0gZXhwYW5kT2JqZWN0KE9iamVjdC5lbnRyaWVzKGZsYWdzKS5yZWR1Y2UoKG91dCwgZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGVudHJ5WzBdLm1hdGNoKC9eZmxhZ3NcXC5Db0M3XFwuY29jaWRGbGFnLykpIHtcbiAgICAgICAgICAgICAgICBvdXRbZW50cnlbMF1dID0gZW50cnlbMV1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gb3V0XG4gICAgICAgICAgICB9LCB7fSkpXG4gICAgICAgICAgICBzY2VuZXNbdXBkYXRlLnNjZW5lXS50b2tlbnNbdG9rZW5PZmZzZXRdLmFjdG9yRGF0YS5pdGVtc1tpdGVtT2Zmc2V0XSA9IG1lcmdlT2JqZWN0KHNjZW5lc1t1cGRhdGUuc2NlbmVdLnRva2Vuc1t0b2tlbk9mZnNldF0uYWN0b3JEYXRhLml0ZW1zW2l0ZW1PZmZzZXRdLCBleHBhbmRlZEZsYWdzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdXBkYXRlLmFjdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIGFjdG9yc1t1cGRhdGUuYWN0b3JdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGFjdG9yc1t1cGRhdGUuYWN0b3JdID0gW11cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtID0ge1xuICAgICAgICAgIF9pZDogdXBkYXRlLml0ZW1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhmbGFncykpIHtcbiAgICAgICAgICBpZiAoa2V5Lm1hdGNoKC9eZmxhZ3NcXC5Db0M3XFwuY29jaWRGbGFnLykpIHtcbiAgICAgICAgICAgIGl0ZW1ba2V5XSA9IGZsYWdzW2tleV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWN0b3JzW3VwZGF0ZS5hY3Rvcl0ucHVzaChpdGVtKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgICBfaWQ6IHVwZGF0ZS5pdGVtXG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoZmxhZ3MpKSB7XG4gICAgICAgICAgaWYgKGtleS5tYXRjaCgvXmZsYWdzXFwuQ29DN1xcLmNvY2lkRmxhZy8pKSB7XG4gICAgICAgICAgICBpdGVtW2tleV0gPSBmbGFnc1trZXldXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGl0ZW1zLnB1c2goaXRlbSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xuICAgICAgYXdhaXQgSXRlbS51cGRhdGVEb2N1bWVudHMoaXRlbXMpXG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhhY3RvcnMpLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBhY3RvcklkIG9mIE9iamVjdC5rZXlzKGFjdG9ycykpIHtcbiAgICAgICAgYXdhaXQgSXRlbS51cGRhdGVEb2N1bWVudHMoYWN0b3JzW2FjdG9ySWRdLCB7IHBhcmVudDogZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhzY2VuZXMpLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBzY2VuZUlkIG9mIE9iamVjdC5rZXlzKHNjZW5lcykpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgc2NlbmUudXBkYXRlKHNjZW5lc1tzY2VuZUlkXSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwb3B1bGF0ZVNraWxsS2V5cyAodXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzLCBmb3VuZEtleXMpIHtcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGdhbWUuYWN0b3JzLmNvbnRlbnRzKSB7XG4gICAgICBjb25zdCBhY3RvckRhdGEgPSBhY3Rvci50b09iamVjdCgpXG4gICAgICBpZiAoYWN0b3JEYXRhLml0ZW1zKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3RvckRhdGEuaXRlbXMpIHtcbiAgICAgICAgICBjb25zdCBpdGVtRGF0YSA9IGl0ZW0gaW5zdGFuY2VvZiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID8gaXRlbS50b09iamVjdCgpIDogaXRlbVxuICAgICAgICAgIGlmIChpdGVtRGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBpZiAoIWl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQ/Lm1hdGNoKC9eaS5za2lsbC8pKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgbWlzc2luZ05hbWVzW2l0ZW1EYXRhLm5hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9ICcnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlTGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgICBhY3RvcjogYWN0b3IuX2lkLFxuICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW1EYXRhLl9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgIGNvY2lkRmxhZzogaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnID8/IHt9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmb3VuZEtleXNbaXRlbURhdGEubmFtZV0gPSBpdGVtRGF0YS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2FtZS5pdGVtcy5jb250ZW50cykge1xuICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGl0ZW0udG9PYmplY3QoKSA6IGl0ZW1cbiAgICAgIGlmIChpdGVtRGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGlmICghaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnPy5pZD8ubWF0Y2goL15pLnNraWxsLykpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9ICcnXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZUxpc3QucHVzaCh7XG4gICAgICAgICAgICBpdGVtOiBpdGVtRGF0YS5faWQsXG4gICAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgICAgY29jaWRGbGFnOiBpdGVtRGF0YS5mbGFncy5Db0M3Py5jb2NpZEZsYWcgPz8ge31cbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kS2V5c1tpdGVtRGF0YS5uYW1lXSA9IGl0ZW1EYXRhLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBzY2VuZSBvZiBnYW1lLnNjZW5lcykge1xuICAgICAgY29uc3Qgc2NlbmVEYXRhID0gc2NlbmUudG9PYmplY3QoKVxuICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBzY2VuZURhdGEudG9rZW5zID8/IFtdKSB7XG4gICAgICAgIGlmICh0b2tlbi5hY3RvcklkICYmICF0b2tlbi5hY3RvckxpbmspIHtcbiAgICAgICAgICBjb25zdCBhY3RvckRhdGEgPSBkdXBsaWNhdGUodG9rZW4uYWN0b3JEYXRhKVxuICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3RvckRhdGEuaXRlbXMgPz8gW10pIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1EYXRhID0gaXRlbSBpbnN0YW5jZW9mIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPyBpdGVtLnRvT2JqZWN0KCkgOiBpdGVtXG4gICAgICAgICAgICBpZiAoaXRlbURhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgICBpZiAoIWl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQ/Lm1hdGNoKC9eaS5za2lsbC8pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPSAnJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGVMaXN0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgc2NlbmU6IHNjZW5lRGF0YS5faWQsXG4gICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW4uX2lkLFxuICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbURhdGEuX2lkLFxuICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbURhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgIGNvY2lkRmxhZzogaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnID8/IHt9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3VuZEtleXNbaXRlbURhdGEubmFtZV0gPSBpdGVtRGF0YS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhtaXNzaW5nTmFtZXMpLmZpbHRlcihrZXkgPT4gbWlzc2luZ05hbWVzW2tleV0gPT09ICcnKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogL15pXFwuc2tpbGxcXC4vLCB0eXBlOiAnaScsIGVyYTogZmFsc2UgfSlcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBmb3VuZEtleXNbaXRlbS5uYW1lXSA9IGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGZsYXR0ZW5PYmplY3QoZ2FtZS5pMThuLnRyYW5zbGF0aW9ucy5Db0M3LkNvQ0lERmxhZy5rZXlzID8/IHt9KSkge1xuICAgICAgICBmb3VuZEtleXNbZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcua2V5cy4nICsga2V5KV0gPSBrZXlcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBtaXNzaW5nTmFtZXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmb3VuZEtleXNbbmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbWlzc2luZ05hbWVzW25hbWVdID0gZm91bmRLZXlzW25hbWVdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlICh0eXBlKSB7XG4gICAgY29uc3QgdXBkYXRlTGlzdCA9IFtdXG4gICAgY29uc3QgbWlzc2luZ05hbWVzID0ge31cbiAgICBjb25zdCBmb3VuZEtleXMgPSB7fVxuICAgIGxldCB0eXBlTmFtZSA9ICcnXG4gICAgbGV0IGlkUHJlZml4ID0gJydcbiAgICBsZXQgc3VmZml4UmVnRXhwID0gbnVsbFxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICB0eXBlTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Ta2lsbCcpXG4gICAgICAgIGlkUHJlZml4ID0gJ2kuc2tpbGwuJ1xuICAgICAgICBzdWZmaXhSZWdFeHAgPSAvXmlcXC5za2lsbFxcLi9cbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBhd2FpdCBDb0NJREJhdGNoLnBvcHVsYXRlU2tpbGxLZXlzKHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcywgZm91bmRLZXlzKVxuICAgIGlmIChPYmplY3Qua2V5cyhtaXNzaW5nTmFtZXMpLmZpbHRlcihrZXkgPT4gbWlzc2luZ05hbWVzW2tleV0gPT09ICcnKS5sZW5ndGggPT09IDApIHtcbiAgICAgIGF3YWl0IENvQ0lEQmF0Y2gucHJvY2Vzc1NraWxsS2V5cyh1cGRhdGVMaXN0LCBtaXNzaW5nTmFtZXMpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgQ29DSURCYXRjaCh7IHR5cGVOYW1lLCBpZFByZWZpeCwgc3VmZml4UmVnRXhwLCB1cGRhdGVMaXN0LCBtaXNzaW5nTmFtZXMsIGZvdW5kS2V5cywgcmVzb2x2ZSB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcsIERpYWxvZywgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGZvdW5kcnksIGdhbWUsIGlzTmV3ZXJWZXJzaW9uLCBtZXJnZU9iamVjdCwgdWkgKi9cbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DSURCYXRjaCB9IGZyb20gJy4vYXBwcy9jb2MtaWQtYmF0Y2guanMnXG5cbmV4cG9ydCBjbGFzcyBVcGRhdGVyIHtcbiAgc3RhdGljIGFzeW5jIGNoZWNrRm9yVXBkYXRlICgpIHtcbiAgICBsZXQgc3lzdGVtVXBkYXRlVmVyc2lvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZVZlcnNpb24nKVxuICAgIGlmIChnYW1lLmFjdG9ycy5zaXplICsgZ2FtZS5zY2VuZXMuc2l6ZSArIGdhbWUuaXRlbXMuc2l6ZSArIGdhbWUuam91cm5hbC5zaXplICsgZ2FtZS50YWJsZXMuc2l6ZSA9PT0gMCkge1xuICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIGFjdG9ycywgaXRlbXMsIGpvdXJuYWxzLCByb2xsIHRhYmxlcywgb3Igc2NlbmVzIHNraXAgd29ybGQgdXBkYXRlXG4gICAgICBzeXN0ZW1VcGRhdGVWZXJzaW9uID0gZ2FtZS5zeXN0ZW0udmVyc2lvblxuICAgICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIHN5c3RlbVVwZGF0ZVZlcnNpb24pXG4gICAgfVxuICAgIGNvbnN0IHJ1bk1pZ3JhdGUgPSBpc05ld2VyVmVyc2lvbihnYW1lLnN5c3RlbS52ZXJzaW9uLCBzeXN0ZW1VcGRhdGVWZXJzaW9uID8/ICcwJylcbiAgICB0aGlzLnVwZGF0ZWRNb2R1bGVzID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlZE1vZHVsZVZlcnNpb24nKSB8fCB7fVxuICAgIHRoaXMuY3VycmVudE1vZHVsZXMgPSB7fVxuICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XG4gICAgICBpZiAoIVsnQ29DNycsICd3b3JsZCddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEucGFja2FnZU5hbWUpICYmIFsnQWN0b3InLCAnSXRlbScsICdTY2VuZSddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEudHlwZSkpIHtcbiAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5jdXJyZW50TW9kdWxlcywgcGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZSkpIHtcbiAgICAgICAgICAvLyBPbmx5IG5lZWQgdG8gY2hlY2sgZWFjaCBtb2R1bGUgb25jZVxuICAgICAgICAgIGNvbnN0IG1vZHVsZSA9IGdhbWUubW9kdWxlcy5nZXQocGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZSlcbiAgICAgICAgICBpZiAobW9kdWxlKSB7XG4gICAgICAgICAgICBpZiAocnVuTWlncmF0ZSB8fCAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMudXBkYXRlZE1vZHVsZXMsIG1vZHVsZS5pZCkgfHwgU3RyaW5nKHRoaXMudXBkYXRlZE1vZHVsZXNbbW9kdWxlLmlkXSkgIT09IFN0cmluZyhtb2R1bGUudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgLy8gQSBtaWdyYXRpb24gaXMgcmVxdWlyZWQsIG1vZHVsZSBoYXMgbm90IGJlZW4gdXBkYXRlZCBiZWZvcmUsIG9yIHRoZSB2ZXJzaW9uIG51bWJlciBoYXMgY2hhbmdlZFxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRNb2R1bGVzW21vZHVsZS5pZF0gPSBtb2R1bGUudmVyc2lvblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocnVuTWlncmF0ZSB8fCBPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRNb2R1bGVzKS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgbmV3IERpYWxvZyh7XG4gICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRpdGxlJyksXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICA/ICdDb0M3Lk1pZ3JhdGUuTWVzc2FnZSdcbiAgICAgICAgICAgICAgOiAnQ29DNy5NaWdyYXRlLldpdGhNb2R1bGVzTWVzc2FnZScsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHZlcnNpb246IGdhbWUuc3lzdGVtLnZlcnNpb24sXG4gICAgICAgICAgICAgIG1vZHVsZXM6XG4gICAgICAgICAgICAgICAgJzx1bD48bGk+JyArXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jdXJyZW50TW9kdWxlcylcbiAgICAgICAgICAgICAgICAgIC5tYXAobW9kID0+IGdhbWUubW9kdWxlcy5nZXQobW9kKS50aXRsZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKCc8L2xpPjxsaT4nKSArXG4gICAgICAgICAgICAgICAgJzwvbGk+PC91bD4nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvblVwZGF0ZScpLFxuICAgICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4gVXBkYXRlci51cGRhdGUoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNraXA6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvblNraXAnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkucmVuZGVyKHRydWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgRGlhbG9nKHtcbiAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVGl0bGUnKSxcbiAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuR01SZXF1aXJlZCcsIHtcbiAgICAgICAgICAgIHZlcnNpb246IGdhbWUuc3lzdGVtLnZlcnNpb25cbiAgICAgICAgICB9KSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICBPSzoge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuQnV0dG9uT2theScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KS5yZW5kZXIodHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZURvY3VtZW50cygpXG5cbiAgICAvLyAvLyBJZiB3ZSBwdXQgdXAgYSB0ZW1wb3Jhcnkgc2NlbmUgcmV0dXJuIHRoZSB1c2VyIGFuZCByZW1vdmUgaXRcbiAgICAvLyBpZiAoXG4gICAgLy8gICB0eXBlb2YgdGhpcy50ZW1wb3JhcnlTY2VuZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyAgIHR5cGVvZiB0aGlzLm9yaWdpbmFsU2NlbmUgIT09ICd1bmRlZmluZWQnXG4gICAgLy8gKSB7XG4gICAgLy8gICBhd2FpdCB0aGlzLm9yaWdpbmFsU2NlbmUudmlldygpXG4gICAgLy8gICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpXG4gICAgLy8gICBhd2FpdCB0aGlzLnRlbXBvcmFyeVNjZW5lLmRlbGV0ZSgpXG4gICAgLy8gfVxuXG4gICAgLy8gTWlncmF0ZSBTZXR0aW5ncyBpZiBQdWxwIFJ1bGVzIGlzIGVuYWJsZWQgdHVybiBvbiBhbGwgcnVsZXNcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVzJykpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRG91YmxlTWF4SGVhbHRoJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjaycsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZU9yZ2FuaXphdGlvbicsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZVRhbGVudHMnLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVGYXN0ZXJSZWNvdmVyeScsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJywgdHJ1ZSlcbiAgICB9XG5cbiAgICBhd2FpdCBDb0NJREJhdGNoLmNyZWF0ZSgnc2tpbGwnKVxuXG4gICAgY29uc3Qgc2V0dGluZ3MgPSBtZXJnZU9iamVjdCh0aGlzLnVwZGF0ZWRNb2R1bGVzIHx8IHt9LCB0aGlzLmN1cnJlbnRNb2R1bGVzKVxuICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywgc2V0dGluZ3MpXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIGdhbWUuc3lzdGVtLnZlcnNpb24pXG5cbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkNvbXBsZXRlJyksIHtcbiAgICAgIHBlcm1hbmVudDogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlRG9jdW1lbnRzICgpIHtcbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yc1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB0aGlzLm1pZ3JhdGVBY3RvckRhdGEoYWN0b3IudG9PYmplY3QoKSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIEFjdG9yIGRvY3VtZW50ICR7YWN0b3IubmFtZX1gKVxuICAgICAgICAgIGF3YWl0IGFjdG9yLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckFjdG9yJywge1xuICAgICAgICAgIG5hbWU6IGFjdG9yLm5hbWUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEl0ZW1zXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGdhbWUuaXRlbXMuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVJdGVtRGF0YShpdGVtLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBJdGVtIGRvY3VtZW50ICR7aXRlbS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JJdGVtJywge1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgVGFibGVzXG4gICAgZm9yIChjb25zdCB0YWJsZSBvZiBnYW1lLnRhYmxlcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVRhYmxlRGF0YSh0YWJsZS50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgVGFibGUgZG9jdW1lbnQgJHt0YWJsZS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgdGFibGUudXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yVGFibGUnLCB7XG4gICAgICAgICAgbmFtZTogdGFibGUubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgTWFjcm9zXG4gICAgZm9yIChjb25zdCBtYWNybyBvZiBnYW1lLm1hY3Jvcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZU1hY3JvRGF0YShtYWNyby50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgTWFjcm8gZG9jdW1lbnQgJHttYWNyby5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgbWFjcm8udXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yTWFjcm8nLCB7XG4gICAgICAgICAgbmFtZTogbWFjcm8ubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgU2NlbmVzIFtUb2tlbl0gQWN0b3JzXG4gICAgZm9yIChjb25zdCBzY2VuZSBvZiBnYW1lLnNjZW5lcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVNjZW5lRGF0YShzY2VuZSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIFNjZW5lIGRvY3VtZW50ICR7c2NlbmUubmFtZX1gKVxuICAgICAgICAgIC8vIGlmIChcbiAgICAgICAgICAvLyAgIHNjZW5lLmlkID09PSBnYW1lLnNjZW5lcy5jdXJyZW50LmlkICYmXG4gICAgICAgICAgLy8gICB0eXBlb2YgdGhpcy50ZW1wb3JhcnlTY2VuZSA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAvLyAgIHR5cGVvZiB0aGlzLm9yaWdpbmFsU2NlbmUgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgLy8gKSB7XG4gICAgICAgICAgLy8gICB0aGlzLnRlbXBvcmFyeVNjZW5lID0gYXdhaXQgU2NlbmUuY3JlYXRlKHtcbiAgICAgICAgICAvLyAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLlVwZGF0ZUN1cnJlbnRTY2VuZScpLFxuICAgICAgICAgIC8vICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMDAwMDAwJ1xuICAgICAgICAgIC8vICAgfSlcbiAgICAgICAgICAvLyAgIHRoaXMub3JpZ2luYWxTY2VuZSA9IHNjZW5lXG4gICAgICAgICAgLy8gICBhd2FpdCBEcmF3aW5nRG9jdW1lbnQuY3JlYXRlKFxuICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgLy8gICAgICAgYXV0aG9yOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgICAgLy8gICAgICAgc2hhcGU6IHtcbiAgICAgICAgICAvLyAgICAgICAgIHR5cGU6ICdyJyxcbiAgICAgICAgICAvLyAgICAgICAgIHdpZHRoOiAxNjAwLFxuICAgICAgICAgIC8vICAgICAgICAgaGVpZ2h0OiAyMDBcbiAgICAgICAgICAvLyAgICAgICB9LFxuICAgICAgICAgIC8vICAgICAgIHg6IDIyMDAsXG4gICAgICAgICAgLy8gICAgICAgeTogMjIwMCxcbiAgICAgICAgICAvLyAgICAgICB6OiAwLFxuICAgICAgICAgIC8vICAgICAgIHN0cm9rZVdpZHRoOiAwLFxuICAgICAgICAgIC8vICAgICAgIHRleHQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5VcGRhdGVDdXJyZW50U2NlbmUnKSxcbiAgICAgICAgICAvLyAgICAgICBmb250RmFtaWx5OiAnU2lnbmlrYScsXG4gICAgICAgICAgLy8gICAgICAgZm9udFNpemU6IDEyOCxcbiAgICAgICAgICAvLyAgICAgICB0ZXh0Q29sb3I6ICcjRkZGRkZGJyxcbiAgICAgICAgICAvLyAgICAgICB0ZXh0QWxwaGE6IDEsXG4gICAgICAgICAgLy8gICAgICAgaGlkZGVuOiBmYWxzZSxcbiAgICAgICAgICAvLyAgICAgICBsb2NrZWQ6IHRydWVcbiAgICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgICAvLyAgICAge1xuICAgICAgICAgIC8vICAgICAgIHBhcmVudDogdGhpcy50ZW1wb3JhcnlTY2VuZVxuICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgLy8gICApXG4gICAgICAgICAgLy8gICBhd2FpdCB0aGlzLnRlbXBvcmFyeVNjZW5lLnZpZXcoKVxuICAgICAgICAgIC8vICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKVxuICAgICAgICAgIC8vIH1cbiAgICAgICAgICBhd2FpdCBzY2VuZS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2NlbmUudG9rZW5zLmZvckVhY2godCA9PiAodC5fYWN0b3IgPSBudWxsKSlcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JTY2VuZScsIHtcbiAgICAgICAgICBuYW1lOiBzY2VuZS5uYW1lLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBDb21wZW5kaXVtIFBhY2tzXG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZSAhPT0gJ0NvQzcnICYmXG4gICAgICAgIFsnQWN0b3InLCAnSXRlbScsICdNYWNybycsICdSb2xsVGFibGUnLCAnU2NlbmUnXS5pbmNsdWRlcyhcbiAgICAgICAgICBwYWNrLm1ldGFkYXRhLnR5cGVcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IFVwZGF0ZXIubWlncmF0ZUNvbXBlbmRpdW1EYXRhKHBhY2spXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVBY3RvckRhdGEgKGFjdG9yKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yQXJ0d29yayhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JLZWVwZXJOb3RlcyhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JOcGNDcmVhdHVyZShhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JTdGF0dXNFZmZlY3RBY3RpdmUoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yU2FuTG9zc1JlYXNvbnMoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yTW9uZXRhcnkoYWN0b3IsIHVwZGF0ZURhdGEpXG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yIEl0ZW1zXG4gICAgaWYgKGFjdG9yLml0ZW1zKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGFjdG9yLml0ZW1zLnJlZHVjZSgoYXJyLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1EYXRhID1cbiAgICAgICAgICBpIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGkudG9PYmplY3QoKSA6IGlcbiAgICAgICAgY29uc3QgaXRlbVVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW1EYXRhKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eShpdGVtVXBkYXRlKSkge1xuICAgICAgICAgIGl0ZW1VcGRhdGUuX2lkID0gaXRlbURhdGEuX2lkXG4gICAgICAgICAgYXJyLnB1c2goZXhwYW5kT2JqZWN0KGl0ZW1VcGRhdGUpKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJcbiAgICAgIH0sIFtdKVxuICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdXBkYXRlRGF0YS5pdGVtcyA9IGl0ZW1zXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBtaWdyYXRlQ29tcGVuZGl1bURhdGEgKHBhY2spIHtcbiAgICBjb25zdCBkb2N1bWVudFR5cGUgPSBwYWNrLm1ldGFkYXRhLnR5cGVcbiAgICBpZiAoXG4gICAgICAhWydBY3RvcicsICdJdGVtJywgJ01hY3JvJywgJ1JvbGxUYWJsZScsICdTY2VuZSddLmluY2x1ZGVzKGRvY3VtZW50VHlwZSlcbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFVubG9jayB0aGUgcGFjayBmb3IgZWRpdGluZ1xuICAgIGNvbnN0IHdhc0xvY2tlZCA9IHBhY2subG9ja2VkXG4gICAgYXdhaXQgcGFjay5jb25maWd1cmUoeyBsb2NrZWQ6IGZhbHNlIH0pXG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgcGFjay5taWdyYXRlKClcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdwYWNrIG1pZ3JhdGUgZmFpbGVkJywgcGFjaywgZXJyKVxuICAgIH1cbiAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBwYWNrLmdldERvY3VtZW50cygpXG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgY29tcGVuZGl1bSBlbnRyaWVzIC0gYXBwbHlpbmcgZmluZS10dW5lZCBtaWdyYXRpb24gZnVuY3Rpb25zXG4gICAgZm9yIChjb25zdCBkb2Mgb2YgZG9jdW1lbnRzKSB7XG4gICAgICBsZXQgdXBkYXRlRGF0YSA9IHt9XG4gICAgICB0cnkge1xuICAgICAgICBzd2l0Y2ggKGRvY3VtZW50VHlwZSkge1xuICAgICAgICAgIGNhc2UgJ0FjdG9yJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVBY3RvckRhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ0l0ZW0nOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdNYWNybyc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlTWFjcm9EYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdSb2xsVGFibGUnOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVRhYmxlRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnU2NlbmUnOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVNjZW5lRGF0YShkb2MpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIC8vIFNhdmUgdGhlIGVudHJ5LCBpZiBkYXRhIHdhcyBjaGFuZ2VkXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTWlncmF0ZWQgJHtkb2N1bWVudFR5cGV9IGRvY3VtZW50ICR7ZG9jLm5hbWV9IGluIENvbXBlbmRpdW0gJHtwYWNrLmNvbGxlY3Rpb259YFxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCBkb2MudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JEb2N1bWVudFBhY2snLCB7XG4gICAgICAgICAgbmFtZTogZG9jLm5hbWUsXG4gICAgICAgICAgY29sbGVjdGlvbjogcGFjay5jb2xsZWN0aW9uLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgdGhlIG9yaWdpbmFsIGxvY2tlZCBzdGF0dXMgZm9yIHRoZSBwYWNrXG4gICAgYXdhaXQgcGFjay5jb25maWd1cmUoeyBsb2NrZWQ6IHdhc0xvY2tlZCB9KVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVJdGVtRGF0YSAoaXRlbSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuXG4gICAgLy8gVXBkYXRlIFdvcmxkIEl0ZW1cbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUVtYmVkZGVkdjEwKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1FeHBlcmllbmNlKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1BcnR3b3JrKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1LZWVwZXJOb3RlcyhpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtU3BlbGxBdXRvbWF0ZWQoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUtlZXBlck5vdGVzTWVyZ2UoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUVyYXMoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbXYxMChpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtQm9va1VuaXRzKGl0ZW0sIHVwZGF0ZURhdGEpXG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVNYWNyb0RhdGEgKHRhYmxlKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlTWFjcm9BcnR3b3JrKHRhYmxlLCB1cGRhdGVEYXRhKVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlVGFibGVEYXRhICh0YWJsZSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuXG4gICAgLy8gVXBkYXRlIFdvcmxkIEFjdG9yXG4gICAgVXBkYXRlci5fbWlncmF0ZVRhYmxlQXJ0d29yayh0YWJsZSwgdXBkYXRlRGF0YSlcblxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZVNjZW5lRGF0YSAoc2NlbmUpIHtcbiAgICBjb25zdCByZXR1cm5zID0ge1xuICAgICAgdG9rZW5zOiBbXVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjZW5lLnRva2VucyAhPT0gJ3VuZGVmaW5lZCcgJiYgc2NlbmUudG9rZW5zLmxlbmd0aCkge1xuICAgICAgcmV0dXJucy50b2tlbnMgPSBzY2VuZS50b2tlbnMubWFwKHRva2VuID0+IHtcbiAgICAgICAgY29uc3QgdCA9IHRva2VuLnRvT2JqZWN0KClcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgICAgIFVwZGF0ZXIuX21pZ3JhdGVUb2tlbkFydHdvcmsodCwgdXBkYXRlRGF0YSlcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZURhdGEpLmxlbmd0aCkge1xuICAgICAgICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodCwgdXBkYXRlRGF0YSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXQuYWN0b3JJZCB8fCB0LmFjdG9yTGluaykge1xuICAgICAgICAgIHQuYWN0b3JEYXRhID0ge31cbiAgICAgICAgfSBlbHNlIGlmICghZ2FtZS5hY3RvcnMuaGFzKHQuYWN0b3JJZCkpIHtcbiAgICAgICAgICB0LmFjdG9ySWQgPSBudWxsXG4gICAgICAgICAgdC5hY3RvckRhdGEgPSB7fVxuICAgICAgICB9IGVsc2UgaWYgKCF0LmFjdG9yTGluaykge1xuICAgICAgICAgIGNvbnN0IGFjdG9yRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHQuYWN0b3JEYXRhKVxuICAgICAgICAgIGFjdG9yRGF0YS50eXBlID0gdG9rZW4uYWN0b3I/LnR5cGVcbiAgICAgICAgICBjb25zdCB1cGRhdGUgPSBVcGRhdGVyLm1pZ3JhdGVBY3RvckRhdGEoYWN0b3JEYXRhKVxuICAgICAgICAgIDtbJ2l0ZW1zJywgJ2VmZmVjdHMnXS5mb3JFYWNoKGVtYmVkZGVkTmFtZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXVwZGF0ZVtlbWJlZGRlZE5hbWVdPy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVzID0gbmV3IE1hcCh1cGRhdGVbZW1iZWRkZWROYW1lXS5tYXAodSA9PiBbdS5faWQsIHVdKSlcbiAgICAgICAgICAgIHQuYWN0b3JEYXRhW2VtYmVkZGVkTmFtZV0uZm9yRWFjaChvcmlnaW5hbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IHVwZGF0ZXMuZ2V0KG9yaWdpbmFsLl9pZClcbiAgICAgICAgICAgICAgaWYgKHVwZGF0ZSkgbWVyZ2VPYmplY3Qob3JpZ2luYWwsIHVwZGF0ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBkZWxldGUgdXBkYXRlW2VtYmVkZGVkTmFtZV1cbiAgICAgICAgICB9KVxuICAgICAgICAgIG1lcmdlT2JqZWN0KHQuYWN0b3JEYXRhLCB1cGRhdGUpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiByZXR1cm5zXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXMgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBbXG4gICAgICAgICdhcmNoZXR5cGUnLFxuICAgICAgICAnY2hhc2UnLFxuICAgICAgICAnaXRlbScsXG4gICAgICAgICdvY2N1cGF0aW9uJyxcbiAgICAgICAgJ3NldHVwJyxcbiAgICAgICAgJ3NraWxsJyxcbiAgICAgICAgJ3NwZWxsJyxcbiAgICAgICAgJ3N0YXR1cycsXG4gICAgICAgICd0YWxlbnQnLFxuICAgICAgICAnd2VhcG9uJ1xuICAgICAgXS5pbmNsdWRlcyhpdGVtLnR5cGUpXG4gICAgKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24nXSA9IHtcbiAgICAgICAgICB2YWx1ZTogaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24sXG4gICAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uJ10gPSB7XG4gICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUV4cGVyaWVuY2UgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSddID0gMFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUFydHdvcmsgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcoaXRlbS5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NldHVwJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uaXRlbXMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5za2lsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IFtvLCBnXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5ncm91cHMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGcuc2tpbGxzKSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBpdGVtLnN5c3RlbS5ncm91cHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLmltZyA9XG4gICAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc3BlbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlbGxzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9IGl0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWxscyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9IGl0ZW0uc3lzdGVtLnNraWxsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbVNwZWxsQXV0b21hdGVkIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyAmJiB0eXBlb2YgaXRlbS5zeXN0ZW0uY29zdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jYXN0aW5nVGltZSddID0gaXRlbS5zeXN0ZW0uY2FzdGluZ1RpbWUgfHwgJydcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5oaXRQb2ludHMnXSA9IGl0ZW0uc3lzdGVtLmNvc3QuaHAgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLm1hZ2ljUG9pbnRzJ10gPSBpdGVtLnN5c3RlbS5jb3N0Lm1wIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5zYW5pdHknXSA9IGl0ZW0uc3lzdGVtLmNvc3Quc2FuIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5wb3dlciddID0gaXRlbS5zeXN0ZW0uY29zdC5wb3cgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLm90aGVycyddID0gJydcblxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09Y29zdCddID0gbnVsbFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLi09dW5pZGVudGlmaWVkJ10gPSBudWxsXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCb29rIGF1dG9tYXRpb24gd2FzIGluY3JlYXNlZCBpbiAwLjYuNVxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbSBEb2N1bWVudCBkYXRhIGV4cHJlc3NlZCBhcyBhIHBsYWluIG9iamVjdFxuICAgKiBAcGFyYW0ge2pzb259IHVwZGF0ZURhdGEgRGlmZmVyZW50aWFsIHVwZGF0ZSBkYXRhIHdoaWNoIG1vZGlmaWVzIHRoZSBleGlzdGluZyB2YWx1ZXMgb2YgdGhpcyBkb2N1bWVudCBkYXRhXG4gICAqIEByZXR1cm5zIHtqc29ufSBEaWZmZXJlbnRpYWwgdXBkYXRlIGRhdGEgd2hpY2ggbW9kaWZpZXMgdGhlIGV4aXN0aW5nIHZhbHVlcyBvZiB0aGlzIGRvY3VtZW50IGRhdGFcbiAgICovXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICAvKiogSWYgYm9vayBzdGlsbCBoYXMgdGhlIHN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWQga2V5IHRoZW4gcnVuIG1pZ3JhdGUgb24gaXQgKi9cbiAgICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udW5pZGVudGlmaWVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKiogRmllbGRzIGNoYW5nZWQgZnJvbSBudWxsIGRlZmF1bHQgdG8gZW1wdHkgc3RyaW5nICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdXRob3InXSA9IGl0ZW0uc3lzdGVtLmF1dGhvciB8fCAnJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGF0ZSddID0gaXRlbS5zeXN0ZW0uZGF0ZSB8fCAnJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubGFuZ3VhZ2UnXSA9IGl0ZW0uc3lzdGVtLmxhbmd1YWdlIHx8ICcnXG4gICAgICAgIC8qKiBGaWVsZHMgY2hhbmdlZCBmcm9tIG51bGwvc3RyaW5nIGRlZmF1bHRzIHRvIGludGVnZXIgdG8gMCAqL1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2FuaXR5TG9zcyddID0gaXRlbS5zeXN0ZW0uc2FuTG9zcyB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5teXRob3NSYXRpbmcnXSA9IE51bWJlcihpdGVtLnN5c3RlbS5teXRob3NSYXRpbmcpIHx8IDBcbiAgICAgICAgLyoqIFJlbmFtZWQvbW92ZWQgZmllbGRzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb250ZW50J10gPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWRcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXNcbiAgICAgICAgLyoqIE5ldyBmaWVsZHMgc2V0IGRlZmF1bHQgdmFsdWVzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kaWZmaWN1bHR5TGV2ZWwnXSA9ICdyZWd1bGFyJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZnVsbFN0dWRpZXMnXSA9IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluaXRpYWxSZWFkaW5nJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ua2VlcGVyTm90ZXMnXSA9ICcnXG4gICAgICAgIC8qKiBNb3ZlIGFuZCByZW5hbWUgZ2FpbiBmaWVsZHMgdG8gZ2FpbnMsIGRlZmF1bHQgTmFOIHZhbHVlcyB0byAwICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4uY3RodWxodU15dGhvcy5DTUkpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuZmluYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4uY3RodWxodU15dGhvcy5DTUYpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLm9jY3VsdCddID0gTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4ub2NjdWx0KSB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5vdGhlcnMnXSA9IFtdXG4gICAgICAgIC8qKiBOZXcgc3R1ZHkgZmllbGQgZGVmYXVsdCBuZWNlc3NhcnkgdG8gaW50ZWdlciBvZiB3ZWVrc1N0dWR5VGltZSBvciAwIGlmIG5vdCBzZXQgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnN0dWR5J10gPSB7XG4gICAgICAgICAgbmVjZXNzYXJ5OiBOdW1iZXIoaXRlbS5zeXN0ZW0ud2Vla3NTdHVkeVRpbWUpIHx8IDAsXG4gICAgICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgdW5pdHM6ICdDb0M3LndlZWtzJ1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZW1vdmUgb2xkIGtleXMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09c2FuTG9zcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT13ZWVrc1N0dWR5VGltZSddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1nYWluJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi4tPXVuaWRlbnRpZmllZCddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ2FpbnMuLT1vdGhlciddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1wcm9wZXJ0aWVzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWZsYWdzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtQm9va1VuaXRzIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zdHVkeS51bml0cyA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3R1ZHkudW5pdHMnXSA9ICdDb0M3LndlZWtzJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyB8fCBpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5ub3RlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciArIGl0ZW0uc3lzdGVtLm5vdGVzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ubm90ZXNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1ub3RlcyddID0gbnVsbFxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5rZWVwZXJOb3RlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmtlZXBlck5vdGVzICsgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ua2VlcGVyTm90ZXNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1rZWVwZXJOb3RlcyddID0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1FbWJlZGRlZHYxMCAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdvY2N1cGF0aW9uJykge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbbywgZ10gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZ3JvdXBzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnLnNraWxscykpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5ncm91cHNbb10uc2tpbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxuICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ3NldHVwJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uaXRlbXMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uaXRlbXNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ10gPSBpdGVtLnN5c3RlbS5pdGVtc1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoWydhcmNoZXR5cGUnLCAnb2NjdXBhdGlvbiddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbHNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ2Jvb2snXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5zcGVsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9IGl0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW12MTAgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBpdGVtLnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICh0eXBlb2YgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID09PSAndW5kZWZpbmVkJyB8fCBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPT09ICcnKVxuICAgICkge1xuICAgICAgdXBkYXRlRGF0YS5uYW1lID0gaXRlbS5uYW1lXG4gICAgICAvLyBVcGRhdGUgUG9saXNoIGRvZGdlIHRyYW5zbGF0aW9uIGZyb20gVW5pa2kgdG8gVW5payB0byBtYXRjaCB1cGRhdGUgdG8gbGFuZy9wbC5qc29uXG4gICAgICBpZiAodXBkYXRlRGF0YS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgIHVwZGF0ZURhdGEubmFtZSA9ICdVbmlrJ1xuICAgICAgfVxuICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICB1cGRhdGVEYXRhLm5hbWUsXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgPyBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgIDogaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgIClcbiAgICAgIHVwZGF0ZURhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5pdGVtcykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10ubmFtZSA9PT0gJ1VuaWtpJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHYubmFtZVxuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW28sIGddIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLmdyb3VwcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZy5za2lsbHMpKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICB2LnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPT09ICdVbmlraScpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPSAnVW5paydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lLFxuICAgICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICA/IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uLmdyb3VwXG4gICAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5za2lsbE5hbWUgPVxuICAgICAgICAgICAgICAgIHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9XG4gICAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2FyY2hldHlwZScpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHYubmFtZVxuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtRXJhcyAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZXJhcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIDE5MjAgPT4gc3RhbmRhcmRcbiAgICAgIC8vIG1kcm4gPT4gbW9kZXJuIC8gbW9kZXJuUHVscFxuICAgICAgLy8gcHVscCA9PiBwdWxwXG4gICAgICAvLyBkZHRzID0+IGRvd25EYXJrZXJUcmFpbHMgLyBkb3duRGFya2VyVHJhaWxzUHVscFxuICAgICAgLy8gZHJrYSA9PiBkYXJrQWdlcyAvIGRhcmtBZ2VzUHVscFxuICAgICAgLy8gZ2xpdCA9PiBnYXNMaWdodFxuICAgICAgLy8gbnZjdCA9PiBpbnZpY3R1c1xuICAgICAgbGV0IGVyYXMgPSB7fVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZXJhcykpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlIHx8ICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZS5zZWxlY3RlZCAhPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJzE5MjAnOlxuICAgICAgICAgICAgICBlcmFzLnN0YW5kYXJkID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbWRybic6XG4gICAgICAgICAgICAgIGVyYXMubW9kZXJuID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLm1vZGVyblB1bHAgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdwdWxwJzpcbiAgICAgICAgICAgICAgZXJhcy5wdWxwID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnZGR0cyc6XG4gICAgICAgICAgICAgIGVyYXMuZG93bkRhcmtlclRyYWlscyA9IHRydWVcbiAgICAgICAgICAgICAgZXJhcy5kb3duRGFya2VyVHJhaWxzUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2Rya2EnOlxuICAgICAgICAgICAgICBlcmFzLmRhcmtBZ2VzID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLmRhcmtBZ2VzUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2dsaXQnOlxuICAgICAgICAgICAgICBlcmFzLmdhc0xpZ2h0ID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbnZjdCc6XG4gICAgICAgICAgICAgIGVyYXMuaW52aWN0dXMgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICAgIC8vIElmIG1vcmUgdGhhbiBvbmUgZXJhIHRha2UgdGhlIGZpcnN0IG9uZSBvbmx5XG4gICAgICAgIGNvbnN0IGtleSA9IE9iamVjdC5rZXlzKGVyYXMpWzBdXG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICBlcmFzID0geyBba2V5XTogdHJ1ZSB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgbm8gZXJhcyBkZWZhdWx0IHRvIHN0YW5kYXJkXG4gICAgICAgICAgZXJhcyA9IHsgc3RhbmRhcmQ6IHRydWUgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBDb0M3ID0ge1xuICAgICAgICBjb2NpZEZsYWc6IHtcbiAgICAgICAgICBpZDogJycsXG4gICAgICAgICAgbGFuZzogZ2FtZS5pMThuLmxhbmcsXG4gICAgICAgICAgcHJpb3JpdHk6IDAsXG4gICAgICAgICAgZXJhc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uZmxhZ3M/LkNvQzcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGl0ZW0uZmxhZ3MuQ29DNyA9IENvQzdcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNyddID0gQ29DN1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnID0gQ29DNy5jb2NpZEZsYWdcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnXSA9IENvQzcuY29jaWRGbGFnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMgPSBDb0M3LmNvY2lkRmxhZy5lcmFzXG4gICAgICAgIHVwZGF0ZURhdGFbJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMnXSA9IENvQzcuY29jaWRGbGFnLmVyYXNcbiAgICAgIH1cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWVyYXMnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvckFydHdvcmsgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgbGV0IGltYWdlID0gU3RyaW5nKGFjdG9yLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgYWN0b3IucHJvdG90eXBlVG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZT8uc3JjICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMpLm1hdGNoKFxuICAgICAgICAvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispL1xuICAgICAgKVxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3Byb3RvdHlwZVRva2VuLnRleHR1cmUuc3JjJ10gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhY3Rvci5lZmZlY3RzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoYWN0b3IuZWZmZWN0cykpIHtcbiAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pY29uKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhLmVmZmVjdHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhLmVmZmVjdHMgPSBhY3Rvci5lZmZlY3RzXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0c1trXS5pY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvcktlZXBlck5vdGVzIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmRlc2NyaXB0aW9uID09PSAndW5kZWZpbmVkJ1xuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbiddID0ge1xuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yTW9uZXRhcnkgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmIHR5cGVvZiBhY3Rvci5zeXN0ZW0uY3JlZGl0Py5tdWx0aXBsaWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdD8ubW9uZXRhcnlTeW1ib2wgPyBhY3Rvci5zeXN0ZW0uY3JlZGl0Lm1vbmV0YXJ5U3ltYm9sIDogJyQnXG4gICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCddLnRvU3RyaW5nKCkudHJpbSgpID09PSAnJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuc3ltYm9sJ10gPSAnJCdcbiAgICAgIH1cbiAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBwYXJzZUludChhY3Rvci5zeXN0ZW0uY3JlZGl0Lm11bHRpcGxpZXIpID8gcGFyc2VJbnQoYWN0b3Iuc3lzdGVtLmNyZWRpdC5tdWx0aXBsaWVyKSA6IDFcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS5zcGVudCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5zcGVudFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmFzc2V0c0RldGFpbHMnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuYXNzZXRzRGV0YWlsc1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnNwZW5kaW5nTGV2ZWwnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuc3BlbmRpbmdMZXZlbFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmNhc2gnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuY2FzaFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmFzc2V0cyddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5hc3NldHNcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSA9IGR1cGxpY2F0ZShhY3Rvci5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKVxuICAgICAgaWYgKG11bHRpcGxpZXIgIT09IDEpIHtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJ10pIHtcbiAgICAgICAgICB2YWx1ZS5jYXNoVmFsdWUgPSBtdWx0aXBsaWVyICogdmFsdWUuY2FzaFZhbHVlXG4gICAgICAgICAgdmFsdWUuYXNzZXRzVmFsdWUgPSBtdWx0aXBsaWVyICogdmFsdWUuYXNzZXRzVmFsdWVcbiAgICAgICAgICB2YWx1ZS5zcGVuZGluZ1ZhbHVlID0gbXVsdGlwbGllciAqIHZhbHVlLnNwZW5kaW5nVmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09Y3JlZGl0J10gPSBudWxsXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlQWN0b3JTYW5Mb3NzUmVhc29ucyAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBhY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJyAmJlxuICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbT8uZW5jb3VudGVyZWRDcmVhdHVyZXMgIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCBncm91cHMgPSB7fVxuICAgICAgZm9yIChjb25zdCBzYW5pdHlMb3NzRXZlbnQgb2YgYWN0b3Iuc3lzdGVtLmVuY291bnRlcmVkQ3JlYXR1cmVzKSB7XG4gICAgICAgIGlmIChzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzID4gMCkge1xuICAgICAgICAgIGdyb3Vwc1tzYW5pdHlMb3NzRXZlbnQubmFtZV0gPSBNYXRoLm1heChcbiAgICAgICAgICAgIGdyb3Vwc1tzYW5pdHlMb3NzRXZlbnQubmFtZV0gPz8gMCxcbiAgICAgICAgICAgIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3NcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBbXVxuICAgICAgZm9yIChjb25zdCBuYW1lIGluIGdyb3Vwcykge1xuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IG5hbWUsXG4gICAgICAgICAgdG90YWxMb3NzOiBncm91cHNbbmFtZV0sXG4gICAgICAgICAgaW1tdW5pdHk6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyddID0gc2FuaXR5TG9zc0V2ZW50c1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09ZW5jb3VudGVyZWRDcmVhdHVyZXMnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvclN0YXR1c0VmZmVjdEFjdGl2ZSAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgKHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uY29uZGl0aW9ucyA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuY3JpdGljYWxXb3VuZHMudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnVuY29uc2Npb3VzLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5keWluZy52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuZGVhZC52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMucHJvbmUudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnRlbXBvSW5zYW5lLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5pbmRlZkluc2FuZS52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5jcml0aWNhbFdvdW5kcz8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uY3JpdGljYWxXb3VuZHMudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuY3JpdGljYWxXb3VuZHMudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnVuY29uc2Npb3VzPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy51bmNvbnNjaW91cy52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy51bmNvbnNjaW91cy52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uZHlpbmc/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmR5aW5nLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmR5aW5nLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5kZWFkPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5kZWFkLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmRlYWQudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnByb25lPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5wcm9uZS52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5wcm9uZS52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udGVtcG9JbnNhbmU/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnRlbXBvSW5zYW5lLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnRlbXBvSW5zYW5lLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5pbmRlZkluc2FuZT8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uaW5kZWZJbnNhbmUudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuaW5kZWZJbnNhbmUudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGFjdG9yLmVmZmVjdHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgZWZmZWN0cyA9IGFjdG9yLmVmZmVjdHNcbiAgICAgICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGltID0gZWZmZWN0cy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBlZmZlY3QgPSBlZmZlY3RzW2ldXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IGVmZmVjdC5pY29uLm1hdGNoKFxuICAgICAgICAgICAgICAvXFwvKGhhbmdpbmctc3BpZGVyfHRlbnRhY2xlcy1za3VsbHxhcm0tc2xpbmd8aGVhcnQtYmVhdHN8dG9tYnN0b25lfGtub2NrZWQtb3V0LXN0YXJzfGZhbGxpbmd8c2t1bGx8dW5jb25zY2lvdXMpXFwuL1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaWYgKG1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIGxldCBzdGF0dXNJZCA9ICcnXG4gICAgICAgICAgICAgIHN3aXRjaCAobWF0Y2hbMV0pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdoYW5naW5nLXNwaWRlcic6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICd0ZW1wb0luc2FuZSdcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAndGVudGFjbGVzLXNrdWxsJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ2luZGVmSW5zYW5lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdhcm0tc2xpbmcnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnY3JpdGljYWxXb3VuZHMnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hlYXJ0LWJlYXRzJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ2R5aW5nJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICd0b21ic3RvbmUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NrdWxsJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ2RlYWQnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2tub2NrZWQtb3V0LXN0YXJzJzpcbiAgICAgICAgICAgICAgICBjYXNlICd1bmNvbnNjaW91cyc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICd1bmNvbnNjaW91cydcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnZmFsbGluZyc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdwcm9uZSdcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHN0YXR1c0lkICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGlmICghdXBkYXRlRGF0YVtgc3lzdGVtLmNvbmRpdGlvbnMuJHtzdGF0dXNJZH0udmFsdWVgXSkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNvbmRpdGlvbnMuJHtzdGF0dXNJZH0udmFsdWVgXSA9IHRydWVcbiAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlZmZlY3QuZmxhZ3MuY29yZT8uc3RhdHVzSWQgIT09IHN0YXR1c0lkKSB7XG4gICAgICAgICAgICAgICAgICBlZmZlY3RzW2ldID0gbWVyZ2VPYmplY3QoZWZmZWN0LCB7XG4gICAgICAgICAgICAgICAgICAgIGZsYWdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29yZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzSWRcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgICAgdXBkYXRlRGF0YS5lZmZlY3RzID0gZWZmZWN0c1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1zdGF0dXMnXSA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yTnBjQ3JlYXR1cmUgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFsnbnBjJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkgJiYgdHlwZW9mIGFjdG9yLnN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0eXBlb2YgYWN0b3Iuc3lzdGVtLnNwZWNpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVjaWFsJ10gPSB7XG4gICAgICAgICAgY2hlY2tQYXNzZWQ6IG51bGwsXG4gICAgICAgICAgY2hlY2tGYWlsbGVkOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dGFja3NQZXJSb3VuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dGFja3NQZXJSb3VuZCddID0gMVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFxuICAgICAgYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicgJiZcbiAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0/LmF0dHJpYnM/LnNhbiAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IG9uZUZpZnRoU2FuaXR5ID0gTWF0aC5jZWlsKGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSAvIDUpXG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyddID0gMFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHknXSA9ICcgLyAnICsgb25lRmlmdGhTYW5pdHlcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJ10gPSAwXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUnXSA9IDBcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4ID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCddID0gb25lRmlmdGhTYW5pdHlcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC5tYXggPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4ID09PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLm1wLm1heCddID0gb25lRmlmdGhTYW5pdHlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLm5vdGVzID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0ubm90ZXMgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubm90ZXMnXSA9ICcnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVNYWNyb0FydHdvcmsgKHRhYmxlLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBTdHJpbmcodGFibGUuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVUYWJsZUFydHdvcmsgKHRhYmxlLCB1cGRhdGVEYXRhKSB7XG4gICAgbGV0IGltYWdlID0gU3RyaW5nKHRhYmxlLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5yZXN1bHRzKSkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YS5yZXN1bHRzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHVwZGF0ZURhdGEucmVzdWx0cyA9IHRhYmxlLnJlc3VsdHNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhLnJlc3VsdHNba10uaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVUb2tlbkFydHdvcmsgKHRva2VuLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBTdHJpbmcodG9rZW4uaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuLyoqXG4gKiBuYW1lQ2hhcmFjdGVycyBsaXN0IG9mIGNoYXJhY3RlcnMgdGhhdCBjYW4gYmUgcGFydCBvZiBhIFtdIGZvciBjaGFyYWN0ZXIsIHNraWxsLCBvciB3ZWFwb24gbmFtZXMgdXNlZCBpbiBicmFja2V0IGV4cHJlc3Npb24uXG4gKlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZGVzY3JpcHRpb25cIiBsYW5nIGtleSB0byBzaG93IGluIHRoZSBsYW5ndWFnZSBzZWxlY3Rpb24gZGlhbG9nIGJveC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmRiTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBEYW1hZ2UgQm9udXMgZS5nLiBEQjogXCJkYk5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmFybW9yTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBBcm1vdXIgQm9udXMgZS5nLiBBcm1vcjogXCJhcm1vck5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmF0dGFja3NQZXJSb3VuZE5vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gYXR0YWNrcyBlLmcuIEF0dGFja3MgUGVyIFJvdW5kOiBcImF0dGFja3NQZXJSb3VuZE5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNhbkxvc3NOb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIHNhbml0eSBsb3NzIGUuZy4gU0FOIGxvc3M6IFwic2FuTG9zc05vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmZ1bGxkYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBkYW1hZ2UgYm9udXMgaW4gYXR0cmlidXRlcyBhbmQgd2VhcG9uIGRhbWFnZSBlLmcuIERCOiBcImZ1bGxkYlwiIC8gV2VhcG9uIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2ICsgXCJmdWxsZGJcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmhhbGZkYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBoYWxmIGRhbWFnZSBib251cyBpbiB3ZWFwb24gZGFtYWdlIGUuZy4gV2VhcG9uIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2ICsgXCJoYWxmZGJcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Db21iYXRzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgY29tYmF0IC8gd2VhcG9uIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+Lm5ld0NvbWJhdEhlYWRlclwiIElmIHRoZXJlIGlzIG5vIGNvbWJhdCAvIHdlYXBvbiBzZWN0aW9uLCBhZGQgdGhpcyBzZWN0aW9uIHdlcmUgaXQgcHJvYmFibHkgaXMsIHRoaXMgbmVlZHMgdG8gbWF0Y2hlZCBieSBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uQ29tYmF0c1wiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvblNraWxsc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIHNraWxscyBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uTGFuZ2F1Z2VzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgbGFuZ3VhZ2VzIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25TcGVsbHNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBzcGVsbHMgc2VjdGlvbiBvZiB0ZXh0LlxuICogXCJrZXlzLjxsYW5ndWFnZT4uaGFuZGd1blwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBoYW5kZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5yaWZsZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSByaWZsZSB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc21iXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIHN1Ym1hY2hpbmUgZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5tYWNoaW5lR3VuXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIG1hY2hpbmUgZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5sYXVuY2hlZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBsYXVuY2hlZCB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZXhhbXBsZVwiIFN0cmluZyB0aGF0IHNob3VsZCBzaG93IGFzIGEgcGxhY2Vob2xkZXIgZXhhbXBsZS5cbiAqXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFnZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYWdlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGFnZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm9jY3VwYXRpb25cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG9jY3VwYXRpb24sIG5hbWVkIGNhcHR1cmluZyBncm91cCA8b2NjdXBhdGlvbj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnN0clwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc3RyZW5ndGggY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c3RyPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uY29uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb25zdGl0dXRpb24gY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8Y29uPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2l6XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzaXplIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHNpej4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmludFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgaW50ZWxsaWdlbmNlIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGludD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnBvd1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgcG93ZXIgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8cG93Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uZGV4XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBkZXh0ZXJpdHkgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGV4Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYXBwXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBhcHBlYXJhbmNlIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGFwcD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmVkdVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZWR1Y2F0aW9uIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGVkdT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNhblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2FuaXR5IHBvaW50cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c2FuPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uaHBcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGhpdCBwb2ludHMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGhwPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubXBcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG1hZ2ljIHBvaW50cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bXA+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5kYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZGFtYWdlIGJvbnVzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxkYj4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uZGJOb25lXCIgdGhlbiAwLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5idWlsZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYnVpbGQgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGJ1aWxkPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYXJtb3JcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGRhbWFnZSBib251cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGI+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LmFybW9yTm9uZVwiIHRoZW4gMC5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubW92XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBtb3ZlbWVudCByYXRlIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxtb3Y+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5sY2tcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGx1Y2sgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGxjaz4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmF0dGFja3NQZXJSb3VuZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYXR0YWNrcyBwZXIgcm91bmQsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8YXR0YWNrc1BlclJvdW5kPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmROb25lXCIgdGhlbiAwLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zYW5Mb3NzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzYW4gbG9zcyBtaW4vbWF4LCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHNhbkxvc3M+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LnNhbkxvc3NOb25lXCIgdGhlbiBub25lLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi53ZWFwb25cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgd2VhcG9uIDxuYW1lPiwgb3B0aW9uYWwgPHBlcmNlbnRhZ2U+LCBhbmQgPGRhbWFnZT4uIERhbWFnZSBjYW4gY29udGFpbiBcImtleXMuPGxhbmd1YWdlPi5mdWxsZGJcIiBhbmQgXCJrZXlzLjxsYW5ndWFnZT4uaGFsZmRiXCIuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LndlYXBvbkRvZGdlXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiBkb2RnZSBza2lsbCwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxuYW1lPiBhbmQgPHBlcmNlbnRhZ2U+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5za2lsbFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2tpbGwgc2VjdGlvbiBza2lsbCBuYW1lLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG5hbWU+IGFuZCA8cGVyY2VudGFnZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lmd1ZXNzU3RhcnRDb21iYXRcIiBSZWd1bGFyIGV4cHJlc3Npb24gaWYgdGhlcmUgaXMgbm8gY29tYmF0IHNlY3Rpb24gZmluZCB0aGVzZSBhcmUgbGlrZWx5IHRvIGJlIHRoZSBmaXJzdCB3ZWFwb24gbmFtZSwgXCJrZXlzLjxsYW5ndWFnZT4ubmV3Q29tYmF0SGVhZGVyXCIgaXMgdGhlbiBhZGRlZCBiZWZvcmUgaXQgdG8gZ2V0IHRoZSBncm91cHNcbiAqXG4gKiBUaGVzZSBzaG91bGQgbm90IGJlIGVkaXRlZCBhcyB0aGV5IHNob3VsZCB3b3JrIGFzIGlzXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm5hbWVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG5hbWUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bmFtZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNlY3Rpb25zXCIgUmVndWxhciBleHByZXNzaW9uIHRvIHNwbGl0IHRleHQgaW50byBjb21iYXQsIHNraWxsLCBsYW5ndWFnZSwgYW5kIHNwZWxscyBzZWN0aW9uXG4gKlxuICogSWYgdGhlcmUgaXMgbmV3IGZ1bmN0aW9uYWxpdHkgY2hlY2sgZm9yIHRoaXMgc3RyaW5nIGluIHRoZSB0cmFuc2xhdGlvbnMgLyBrZXlzIGZvciB5b3VyIGxhbmd1YWdlIFwiTkVXIEtFWSBCRUxPVyAtIFRSQU5TTEFUSU9OIFJFUVVJUkVEXCJcbiAqL1xuY29uc3QgbmFtZUNoYXJhY3RlcnMgPVxuICAnXFxcXHUzMDAwXFxcXHUzNDAwLVxcXFx1NERCRlxcXFx1NEUwMC1cXFxcdTlGRkZcXFxcd1xcXFwoXFxcXClcXFxcLVxcXFwvJlwiXFwnJyArXG4gIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoXG4gICAgJ2HMgWXMgWnMgW/MgcOgw6jDrMOyw7nDgMOIw4zDksOZw6HDqcOtw7PDusO9w4HDicONw5PDmsOdw6LDqsOuw7TDu8OCw4rDjsOUw5vDo8Oxw7XDg8SAw5HDlcOkw6vDr8O2w7zDv8OEw4vDj8OWw5zFuMOgw6jDp8OHw5/DmMO4w4XDpcOGw6bFk+KAnOKAncKrwrvEhcSHxJnFgsWEw7PFm8W6xbzEhMSGxJjFgcWDw5PFmsW5xbsnXG4gIClcblxuY29uc3Qga2V5cyA9IHtcbiAgZW46IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuRW5nbGlzaCcsXG4gICAgZGJOb25lOiAnbm9uZScsXG4gICAgYXJtb3JOb25lOiAnbm9uZScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25vbmUnLFxuICAgIHNhbkxvc3NOb25lOiAnbm9uZScsXG4gICAgZnVsbGRiOiAnKCcgKyAnRGFtYWdlIEJvbnVzfERCJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXxoYWxmJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnY29tYmF0fGZpZ2h0aW5nIGF0dGFja3MnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0JyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ3NraWxscycgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnbGFuZ3VhZ2VzJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdzcGVsbHMnICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICcgR3VufFJldm9sdmVyfFBpc3RvbHxIYW5kZ3VufERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArICdSaWZsZXxTaG90Z3VufENhcmJpbmV8R2F1Z2UgfExlZS1FbmZpZWxkfEVsZXBoYW50JyArICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2VycycgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmVuYWRlfER5bmFtaXRlJyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ0V4YW1wbGUgQ2hhcmFjdGVyLCBhZ2UgMjdcXG5TVFIgNzUgQ09OIDYwIFNJWiA4MCBERVggNzAgQVBQIDYwIElOVCA4MFxcblBPVyA1MCBFRFUgODUgU0FOIDU1IEhQIDE0IERCOiAxRDRcXG5CdWlsZDogMSBNb3ZlOiA3IE1QOiAxMCBMdWNrOiA0MCBBcm1vcjogMVxcbkF0dGFja3MgcGVyIHJvdW5kOiAzIFNBTiBsb3NzOiAxZDQvMWQ4XFxuQ29tYmF0XFxuQml0ZSA1MCUgKDI1LzEwKSwgZGFtYWdlIDFENlxcbkJyYXdsIDMwJSAoMTUvNiksIGRhbWFnZSAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZGFtYWdlIDFEOCsxXFxuRG9kZ2UgNTAlICgyNS8xMClcXG5Ta2lsbHNcXG5BbmltYWwgSGFuZGxpbmcgNTUlLCBDaGFybSAzMCUsIEZpcnN0IEFpZCAyNSUsIERpc2d1aXNlIDIwJSxcXG5MaXN0ZW4gNTAlLCBNZWRpY2luZSA0NSUsIFBlcnN1YWRlIDI1JSwgUHN5Y2hvbG9neSA3NSUsXFxuU2NpZW5jZSAoQXN0cm9ub215KSA5MCUsIFNjaWVuY2UgKEJvdGFueSkgMzUlLCBTY2llbmNlIChab29sb2d5KSAxMCUsXFxuU3BvdCBIaWRkZW4gMzUlLCBTdGVhbHRoIDEwJVxcbkxhbmd1YWdlczogRW5nbGlzaCA4MCUsIEVrbG8gNSUuXFxuU3BlbGxzOiBTdW1tb24gTlBDLCBEaXNwZWwgTlBDLidcbiAgfSxcbiAgZGU6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuR2VybWFuJyxcbiAgICBkYk5vbmU6ICdub25lJyxcbiAgICBhcm1vck5vbmU6ICdub25lJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcbiAgICBkaWNlU2hvcnQ6ICd3fGQnLFxuICAgIGZ1bGxkYjogJygnICsgJ1NjaGFkZW5zYm9udXN8U2InICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBTY2hhZGVuc2JvbnVzfFNiLzInICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdLYW1wZnxBbmdyaWZmOnxBTkdSSUZGRScgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdLYW1wZicgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdGZXJ0aWdrZWl0ZW4nICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ1NwcmFjaGVuJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdaYXViZXInICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICcgR3VufFJldm9sdmVyfFBpc3RvbGV8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ0dld2VocnxTY2hyb3RmbGludGV8Q2FyYWJpbmVyfEthcmFiaW5lcnxHYXVnZSB8TGVlLUVuZmllbGR8RWxlZmFudGVuJyArXG4gICAgICAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1Ym1hY2hpbmUgR3VufFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnMnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JhbmF0ZXxEeW5hbWl0JyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ1Zvcm5hbWUgTmFjaG5hbWVcXG5BbHRlcjogMjlcXG5CZXJ1ZjogRWluIEJlcnVmXFxuU1QgNTBcXG5NQSA2MFxcbktPIDYwXFxuR0UgNjBcXG5HUiA1NVxcbkVSIDY1XFxuSU4gODBcXG5CSSA4NVxcblRyZWZmZXJwdW5rdGU6IDExXFxuR2Vpc3RpZ2UgU3RhYmlsaXTDpHQ6IDYwXFxuU2NoYWRlbnNib251czogMFxcblN0YXR1cjogMFxcbk1hZ2llcHVua3RlOiAxMlxcbkJld2VndW5nc3dlaXRlOiA4XFxuXFxuS2FtcGZcXG5BbmdyaWZmZTogMVxcbkhhbmRnZW1lbmdlIDMwJSAoMTUvNiksIFNjaGFkZW4gMUQzXFxuTWVzc2VyIDMwJSAoMTUvNiksIFNjaGFkZW4gMUQ0XFxuQXVzd2VpY2hlbiAzMCUgKDE1LzYpXFxuXFxuRmVydGlna2VpdGVuOiBBbnRocm9wb2xvZ2llIDcwJSAoMzUvMTQpLCBBcmNow6RvbG9naWUgMzAlICgxNS82KSwgQmlibGlvdGhla3NudXR6dW5nIDUwJSAoMjUvMTApLCBFcnN0ZSBIaWxmZSA1MCUgKDI1LzEwKSwgRmluYW56a3JhZnQgNDAlICgyMC84KSwgR2VzY2hpY2h0ZSA2MCUgKDMwLzEyKSwgS2xldHRlcm4gNTAlICgyNS8xMClcXG5cXG5TcHJhY2hlbjogRW5nbGlzY2ggODUlICg0Mi8xNyk7IERldXRzY2ggNDUlICgyMi85KSwgTGF0ZWluIDQ1JSAoMjIvOSknXG4gIH0sXG4gIHBsOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LlBvbGlzaCcsXG4gICAgZGJOb25lOiAnYnJhaycsXG4gICAgYXJtb3JOb25lOiAnYnJhaycsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ2JyYWsnLFxuICAgIHNhbkxvc3NOb25lOiAnYnJhaycsXG4gICAgZGljZVNob3J0OiAna3xkJyxcbiAgICBmdWxsZGI6ICcoJyArICdNb2R5ZmlrYXRvciBPYnJhxbxlxYR8TU8nICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBNT3xNTy8yJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnV2Fsa2F8QXRha2knICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnV2Fsa2EnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnVW1pZWrEmXRub8WbY2knICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0rEmXp5a2knICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ1pha2zEmWNpYScgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyBQaXN0b2xldHxSZXdvbHdlcnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ0thcmFiaW58U3RyemVsYmF8V2lhdHLDs3drYXxHYXJhbmR8R2F1Z2UgfExlZS1FbmZpZWxkfFN0cnplbGJhIG5hIHPFgm9uaWUnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnUGlzdG9sZXQgbWFzenlub3d5fFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnMnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vxYJvdG93YXxHcmFuYXR8TGFza2EgZHluYW1pdHV8RHluYW1pdCcgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdQcnp5a8WCYWRvd2EgcG9zdGHEhywgMjcgbGF0XFxuQmlibGlvdGVrYXJ6XFxuUyA3NSBLT04gNjAgQkMgODAgWlIgNzAgV1lHIDYwIElOVCA4MFxcbk1PQyA1MCBXWUsgODUgUCA1NSBQVyAxNCBNTzogMUQ0XFxuS3J6ZXBhOiAxIFJ1Y2g6IDcgUE06IDEwIFN6Y3rEmcWbY2llOiA0MCBQYW5jZXJ6OiAxXFxuQXRha2kgdyBydW5kemllOiAzIFV0cmF0YSBQb2N6eXRhbG5vxZtjaTogMUs0LzFLOFxcbldhbGthXFxuVWdyeXppZW5pZSA1MCUgKDI1LzEwKSwgb2JyYcW8ZW5pYSAxSzZcXG5XYWxrYSAzMCUgKDE1LzYpLCBvYnJhxbxlbmlhIDFLM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBvYnJhxbxlbmlhIDFLOCsxXFxuVW5payA1MCUgKDI1LzEwKVxcblVtaWVqxJl0bm/Fm2NpXFxuVHJlc3VyYSBad2llcnrEhXQgNTUlLCBVcm9rIE9zb2Jpc3R5IDMwJSwgUGllcndzemEgUG9tb2MgMjUlLCBVa3J5d2FuaWUgMjAlLFxcbk5hc8WCdWNoaXdhbmllIDUwJSwgTWVkeWN5bmEgNDUlLCBQcnpla29ueXdhbmllIDI1JSwgUHN5Y2hvbG9naWEgNzUlLFxcbk5hdWthIChBc3Ryb25vbWlhKSA5MCUsIE5hdWthIChCb3RhbmlrYSkgMzUlLCBOYXVrYSAoWm9vbG9naWEpIDEwJSxcXG5TcG9zdHJ6ZWdhd2N6b8WbxIcgMzUlLCBVa3J5d2FuaWUgMTAlXFxuSsSZenlraTogQW5naWVsc2tpIDgwJSwgRWtsbyA1JS5cXG5aYWtsxJljaWE6IFByenl6d2FuaWUgTlBDLCBPZGVzxYJhbmllIE5QQy4nXG4gIH0sXG4gIGZyOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LkZyZW5jaCcsXG4gICAgZGJOb25lOiAnQWN1bmUnLFxuICAgIGFybW9yTm9uZTogJyg/OkFjdW5lfGF1Y3VuZSknLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdBY3VuZScsXG4gICAgc2FuTG9zc05vbmU6ICdBY3VuZScsXG4gICAgZnVsbGRiOiAnKCcgKyAnQkR8Qm9udXMgYXV4IGRvbW1hZ2VzfEltcGFjdHxJbXAnICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBJbXB8SW1wLzInICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdDb21iYXR8QXJtZXN8QXR0YXF1ZXMnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0JyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ0NvbXDDqXRlbmNlcycgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnTGFuZ3Vlcz8nICsgJylcXFxccypbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ1NvcnRpbMOoZ2VzXFxcXHMqfFNvcnRzJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnUmV2b2x2ZXJ8UGlzdG9sZXR8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6ICcoPzx0eXBlPicgKyAnQ2FyYWJpbmV8TGVlLUVuZmllbGR8RnVzaWwnICsgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTTUd8VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2Vyc3xNaXRyYWlsbGV1c2UnICsgJyknLFxuICAgIGxhdW5jaGVkOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnQm9vbWVyYW5nIGRlIGd1ZXJyZXxKYXZlbGluZXxQaWVycmV8U2h1cmlrZW58QsOidG9uIGRlIGR5bmFtaXRlfENvY2t0YWlsIE1vbG90b3Z8R3JlbmFkZSDDoCBtYWlufE1vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZScgK1xuICAgICAgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIDI3IGFuc1xcbkZPUiA3NSBDT04gNjAgVEFJIDgwIERFWCA3MCBBUFAgNjAgSU5UIDgwXFxuUE9VIDUwIMOJRFUgODUgU0FOIDU1IFBWIDE0IEJEOiAxRDRcXG5DYXJydXJlOiAxIE12dDogNyBQTTogMTAgQ2hhbmNlOiA0MCBBcm11cmU6IDFcXG5BdHRhcXVlcyBwYXIgcm91bmQgMyBQZXJ0ZSBkZSBTQU46IDFkNC8xZDhcXG5BdHRhcXVlc1xcbkJpdGUgNTAlICgyNS8xMCksIGRvbW1hZ2UgMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZG9tbWFnZSAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZG9tbWFnZSAxRDgrMVxcbkVzcXVpdmVyIDUwJSAoMjUvMTApXFxuQ29tcMOpdGVuY2VzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5MYW5ndWU6IEVuZ2xpc2ggODAlLCBFa2xvIDUlLlxcblNvcnRpbMOoZ2VzOiBTdW1tb24gTlBDLCBEaXNwZWwgTlBDLidcbiAgfSxcbiAgZXM6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuU3BhbmlzaCcsXG4gICAgZGJOb25lOiAnbmluZ3VuYScsXG4gICAgYXJtb3JOb25lOiAnbmluZ3VuYScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25pbmd1bm8nLFxuICAgIHNhbkxvc3NOb25lOiAnbm8nLFxuICAgIGZ1bGxkYjogJygnICsgJ0JEfGJkfGJvbmlmaWNhY2nDs24gZGUgZGHDsW8nICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fG1lZGlvIGRhw7FvfG1pdGFkfGRhw7FvIGEgbGEgbWl0YWQnICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdDb21iYXRlfEFybWFzJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdGUnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnSGFiaWxpZGFkZXMnICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0lkaW9tYXN8TGVuZ3VhamVzfExlbmd1YXMnICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ0Nvbmp1cm9zfEhlY2hpem9zJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnUmV2b2x2ZXJ8UGlzdG9sYXxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ1JpZmxlfENhcmFiaW5hfExlZS1FbmZpZWxkfENhemEgRWxlZmFudGVzfEZ1c2lsfEVzY29wZXRhfEdhbGdhfFJlY29ydGFkYScgK1xuICAgICAgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTdWJmdXNpbHxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzfEFtZXRyYWxsYWRvcmEnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JhbmFkYXxEaW5hbWl0YScgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdFeGFtcGxlIENoYXJhY3RlciwgMjcgYcOxb3NcXG5GVUUgNzUgQ09OIDYwIFRBTSA4MCBERVMgNzAgQVBBIDYwIElOVCA4MFxcblBPRCA1MCBFRFUgODUgQ09SIDU1IFBWIDE0IEJEOiAxRDRcXG5Db3JwdWxlbmNpYTogMSBNb3ZpbWllbnRvOiA3IFBNOiAxMCBTdWVydGU6IDQwIEFybWFkdXJhOiAxXFxuTsO6bWVybyBkZSBBdGFxdWVzIDMgUMOpcmRpZGEgZGUgY29yZHVyYTogMWQ0LzFkOFxcbkNvbWJhdGVcXG5CaXRlIDUwJSAoMjUvMTApLCBkYcOxbyAxRDZcXG5CcmF3bCAzMCUgKDE1LzYpLCBkYcOxbyAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZGHDsW8gMUQ4KzFcXG5Fc3F1aXZhciA1MCUgKDI1LzEwKVxcbkhhYmlsaWRhZGVzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5JZGlvbWFzOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5Db25qdXJvczogU3VtbW9uIE5QQywgRGlzcGVsIE5QQy4nXG4gIH0sXG4gICd6aC1UVyc6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuVHJhZGl0aW9uYWxDaGluZXNlJyxcbiAgICBkYk5vbmU6ICdub25lJyxcbiAgICBhcm1vck5vbmU6ICdub25lJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcbiAgICBmdWxsZGI6ICcoJyArICdEYW1hZ2UgQm9udXN8REJ85YK35a6z5Yqg5YC8JyArICcpJyxcbiAgICAvKiBORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRUQgKi9cbiAgICBoYWxmZGI6ICcoJyArICfCvXxoYWxmJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czpcbiAgICAgICdcXG4oPzonICsgJ2NvbWJhdHxmaWdodGluZyBhdHRhY2tzfOaIsOmspeaKgOiDvXzmiLDprKXliJfooah85q2m5ZmoJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOlxuICAgICAgJ1xcbig/OicgKyAnKD86U2tpbGxzfOaKgOiDveWIl+ihqCknICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0xhbmd1YWdlc3zoqp7oqIAnICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ3NwZWxsc3zlkpLmlofliJfooah85ZKS5paHJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnIOmBgueZvOanjXxcXFxcLjIy55+t5Y+j6Ieq5YuV5omL5qeNfFxcXFwuMjXnn63lj6PmiYvmp40o5Zau566hKXxcXFxcLjMy5oiWN1xcXFwuNjVtbeW3pui8quaJi+anjXxcXFxcLjMy5oiWN1xcXFwuNjVtbeiHquWLleaJi+anjXxcXFxcLjM1NyBNYWdudW3lt6bovKrmiYvmp418XFxcXC4zOOaIljltbeW3pui8quaJi+anjXxcXFxcLjM46Ieq5YuV5omL5qeNfOiynembt+WhlE05fOagvOa0m+WFizE3fDltbeiHquWLleaJi+anjXzpra/moLxQMDh8XFxcXC40MeW3pui8quaJi+anjXxcXFxcLjQ06aas5qC85Y2X5bem6Lyq5omL5qeNfFxcXFwuNDXlt6bovKrmiYvmp418XFxcXC40NeiHquWLleaJi+anjXzmspnmvKDkuYvpt7l8R3VufFJldm9sdmVyfFBpc3RvbHxIYW5kZ3VufERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAn5q2l5qeNfOWNoeizk+anjXzljYroh6rli5XmraXmp41854216LGh5qeNfFJpZmxlfFNob3RndW58Q2FyYmluZXxHYXVnZSB8TGVlLUVuZmllbGR8RWxlcGhhbnQnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb2586KGd6YuS5qeNJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnN85qmf5qeNJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyZW5hZGV8RHluYW1pdGXniIbngrjnial85omL5qa05b2IfOmHjeatpuWZqCcgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICfnpLrnr4Top5LoibIsIOW5tOm9oSAyN1xcbuWKm+mHjyA3NSDpq5Tos6ogNjAg6auU5Z6LIDgwIOaVj+aNtyA3MCDlpJboso4gNjAg5pm65YqbIDgwXFxu5oSP5b+XIDUwIOaVmeiCsiA4NSBTQU4gNTUgSFAgMTQgREI6IDFENFxcbumrlOagvDogMSBNb3ZlOiA3IE1QOiAxMCDlubjpgYs6IDQwIOitt+eUsjogMVxcbuaUu+aTiuasoeaVuDogMyDnkIbmmbrllqrlpLE6IDFkNC8xZDhcXG7miLDprKXliJfooahcXG7lkqwgNTAlICgyNS8xMCksIOWCt+WusyAxRDZcXG7nqbrmiYsgMzAlICgxNS82KSwg5YK35a6zIDFEM1xcbuaJi+anjSA0MCUgKDIwLzgpLCDlgrflrrMgMUQ4KzFcXG7ploPpgb8gNTAlICgyNS8xMClcXG7mioDog73liJfooahcXG7li5XnianpprTppIogNTUlLCDlj5bmgoUgMzAlLCDmgKXmlZEgMjUlLCDmvZvooYwgMjAlLFxcbuiBhuiBvSA1MCUsIOiXpeWtuCA0NSUsIOeyvuelnuWIhuaekCAyNSUsIOW/g+eQhuWtuCA3NSUsXFxu56eR5a24ICjlj7jms5Xnp5HlrbgpIDkwJSwg56eR5a24ICjlr4bnorzlrbgpIDM1JSwgXFxu5YG15p+lIDM1JSwg5Zas6KOdIDEwJVxcbuiqnuiogDog57K16KqeIDgwJSwg6K6A5ZSHIDUlLlxcbuWSkuaWhzog5Y+s5ZaaIE5QQywg5oyH5o+uIE5QQy4nXG4gIH1cbn1cblxuY29uc3QgdHJhbnNsYXRpb25zID0ge1xuICBlbjoge1xuICAgIGFnZTogJyg/PCFbYS16XSknICsgJ2FnZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2NjdXBhdGlvbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVFInICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdTSVonICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1cnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVgnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFAnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdFRFUnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnU0FOfFNhbml0eScgKyAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArICdIUHxIaXQgcG9pbnRzJyArICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ01QfE1hZ2ljIHBvaW50cycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmVuLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5cy5lbi5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOiAnKD88IVthLXpdKScgKyAnQnVpbGQnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdBcm1vcicgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZW4uYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnTW92ZScgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdMdWNrJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdHRhY2tzIHBlciByb3VuZHwjIEF0dGFja3MnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZW4uYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU2FuaXR5IGxvc3N8U0FOIGxvc3MnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmVuLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdkYW1hZ2UnICtcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmVuLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0RvZGdlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIC8vIFNraWxsIHNob3VsZCBub3QgYmUgbmFtZWQgXCJUaGUgcGxheWVyIGhhc1wiIC8gXCJidXQgdGhleSByZWdlbmVyYXRlXCIgcmVxdWlyZWQgZm9yIFwiQSBDb2xkIEZpcmUgV2l0aGluXCJcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6ICcoXnwoPzwhLClcXG4pKCcgKyAnRmlnaHRpbmd8RmlyZWFybXN8QnJhd2x8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVuLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgZGU6IHtcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdBbHRlcicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOiAnWyxcXFxcc10qJyArICdCZXJ1ZicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0tPJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnR1InICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ01BJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnR0UnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdFUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0JJJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdnU3xTVEF8R2Vpc3RpZ2UgU3RhYmlsaXTDpHQnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdUUHxUcmVmZmVycHVua3RlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNUHxNYWdpZXB1bmt0ZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmRlLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RHxXXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmRlLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1N0YXR1cnxTdGF0LicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnUGFuemVydW5nJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5kZS5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0JXfEJld2VndW5nc3dlaXRlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnR2zDvGNrJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBbmdyaWZmZSBwcm8gUnVuZGV8QW5ncmlmZmV8UHJvIFJ1bmRlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmRlLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1N0YWJpbGl0w6R0c3Zlcmx1c3QnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmRlLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGRbRFddP1srXFxcXGRdKlxcXFwvXFxcXGRbRFddP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdTY2hhZGVuJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrd3xkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmRlLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2R8dyk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnQXVzd2VpY2hlbicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICAvLyBTa2lsbCBzaG91bGQgbm90IGJlIG5hbWVkIFwiVGhlIHBsYXllciBoYXNcIiAvIFwiYnV0IHRoZXkgcmVnZW5lcmF0ZVwiIHJlcXVpcmVkIGZvciBcIkEgQ29sZCBGaXJlIFdpdGhpblwiXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLDtdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgK1xuICAgICAgJ0FuZ3JpZmZlfEhhbmRnZW1lbmdlfE5haGthbXBmfEZhdXN0ZmV1ZXJ3YWZmZXxCZWnDn2VuJyArXG4gICAgICAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmRlLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZGUuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgcGw6IHtcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKScgKyAnXFxcXHMrKD86JyArICdsYXRhfGxhdHxyb2snICsgJylbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246ICdbLFxcXFxzXSonICsgJ1phd8OzZCcgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnS09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnQkMnICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdNT0MnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdaUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ1dZRycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ1dZSycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUHxQb2N6eXRhbG5vxZvEhycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BXfFB1bmt0eSBXeXRyenltYcWCb8WbY2knICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BNfFB1bmt0eSBNYWdpaScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLnBsLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RHxLXFxcXGQrKT98JyArXG4gICAgICBrZXlzLnBsLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6ICcoPzwhW2Etel0pJyArICdLcnplcGEnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdQYW5jZXJ6JyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5wbC5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdSdWNoJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ1N6Y3rEmcWbY2llJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdGFraSB3IHJ1bmR6aWV8IyBBdGFraScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5wbC5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdVdHJhdGEgUG9jenl0YWxub8WbY2l8dXRyYXRhIFAnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLnBsLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGRbREtdP1srXFxcXGRdKlxcXFwvXFxcXGRbREtdP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdvYnJhxbxlbmlhJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQra3xkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLnBsLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ1VuaWsnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgLy8gU2tpbGwgc2hvdWxkIG5vdCBiZSBuYW1lZCBcIlRoZSBwbGF5ZXIgaGFzXCIgLyBcImJ1dCB0aGV5IHJlZ2VuZXJhdGVcIiByZXF1aXJlZCBmb3IgXCJBIENvbGQgRmlyZSBXaXRoaW5cIlxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgKyAnV2Fsa2F8QnJvxYQgUGFsbmF8QmlqYXR5a2F8VWdyeXppZW5pZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLnBsLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMucGwuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgZnI6IHtcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKVxcXFxzKicgKyAnYW5zJyArICcoPyFbYS16XSlbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY2N1cGF0aW9uJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ0ZPUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1RBSScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFWCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQUCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ8OJRFUnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IShbYS16XXxkZVxcXFxzKSkoPzonICtcbiAgICAgICdTQU58U2FudMOpIE1lbnRhbGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQVnxQb2ludHMgZGUgdmllJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQTXxQb2ludHMgZGUgbWFnaWUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5mci5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZnIuZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pJyArICdDYXJydXJlJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXJtdXJlfFByb3RlY3Rpb24nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5mci5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ012dHxNb3V2ZW1lbnR8RMOpcGxhY2VtZW50JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnQ2hhbmNlJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdHRhcXVlcyBwYXIgcm91bmQnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZnIuYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUGVydGUgZGUgU2FudMOpIG1lbnRhbGV8UGVydGUgZGUgU0FOJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5mci5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqKD86JyArXG4gICAgICAnZG9tbWFnZXxkw6lnw6J0cycgK1xuICAgICAgJykpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmZyLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0VzcXVpdmVyPycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6XG4gICAgICAnKF58KD88ISwpXFxuKSgnICsgJ0F1IGNvbnRhY3R8w4AgZGlzdGFuY2V8Q29tYmF0IHJhcHByb2Now6l8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgZXM6IHtcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKVxcXFxzKicgKyAnYVvDscORXW9zJyArICcoPyFbYS16XSlbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY3VwYWNpw7NuJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ0ZVRScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1RBTScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPRCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFUycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQQScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0VEVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArICdDT1J8Q29yZHVyYScgKyAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUFZ8UHVudG9zIGRlIHZpZGF8UFxcXFwuID9WXFxcXC4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BNfFB1bnRvcyBNw6FnaWNvc3xQdW50b3MgZGUgTWFnaWEnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5lcy5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZXMuZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pJyArICdDb3JwdWxlbmNpYScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ0FybWFkdXJhJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5lcy5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdNb3ZpbWllbnRvJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ1N1ZXJ0ZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTsO6bWVybyBkZSBBdGFxdWVzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmVzLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1DDqXJkaWRhIGRlIGNvcmR1cmF8UMOpcmRpZGEgZGUgQ09SJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5lcy5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqJyArXG4gICAgICAnZGHDsW8nICtcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmVzLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0VzcXVpdmFyJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgKyAnQ29tYmF0aXJ8QXJtYXMgZGUgZnVlZ298QnJhd2x8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgJ3poLVRXJzoge1xuICAgIGFnZTogJyg/PCFbYS16XSknICsgJ2FnZXzlubTpvaEnICsgJyhcXFxccyo6KT9cXFxccyooPzxhZ2U+XFxcXGQrKVssXFxcXHNdKicsXG4gICAgLyogTkVXIEtFWSBCRUxPVyAtIFRSQU5TTEFUSU9OIFJFUVVJUkVEICovXG4gICAgb2NjdXBhdGlvbjpcbiAgICAgICdbLFxcXFxzXSonICsgJ09jY3VwYXRpb24nICsgJyhcXFxccyo6KT9cXFxccysoPzxvY2N1cGF0aW9uPi4rKVssXFxcXHNcXG5dKicsXG4gICAgc3RyOiAnKD88IVthLXpdKScgKyAnU1RSfOWKm+mHjycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTnzpq5Tos6onICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdTSVp86auU5Z6LJyArICcoXFxcXHMqOik/XFxcXHMqKD88c2l6PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaW50OiAnKD88IVthLXpdKScgKyAnSU5UfOaZuuWKmycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPV3zmhI/lv5cnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVh85pWP5o23JyArICcoXFxcXHMqOik/XFxcXHMqKD88ZGV4PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXBwOiAnKD88IVthLXpdKScgKyAnQVBQfOWkluiyjicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0VEVXzmlZnogrInICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1NBTnxTYW5pdHl855CG5pm6JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnSFB8SGl0IHBvaW50c3znlJ/lkb0nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ01QfE1hZ2ljIHBvaW50cycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5c1snemgtVFcnXS5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOlxuICAgICAgJyg/PCFbYS16XSknICsgJ0J1aWxkfOmrlOagvCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ0FybW9yfOitt+eUsicgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccyooPzxhcm1vcj4nICtcbiAgICAgIGtleXNbJ3poLVRXJ10uYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnTW92ZScgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdMdWNrfOW5uOmBiycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXR0YWNrcyBwZXIgcm91bmR8IyBBdHRhY2tzfOaUu+aTiuasoeaVuHwjIOaUu+aTiicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5c1snemgtVFcnXS5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTYW5pdHkgbG9zc3xTQU4gbG9zc3znkIbmmbrllqrlpLF8U0FO5YC85pCN5aSxfFNBTuWAvOWWquWksXzmiaNTQU4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyooPzonICtcbiAgICAgICdkYW1hZ2V85YK35a6zJyArXG4gICAgICAnKSk/XFxcXHMrKD88ZGFtYWdlPig6Pyg6P1xcXFxkK2QpP1xcXFxkKyhcXFxccyovXFxcXHMqfFxcXFxzKlsrLV1cXFxccyooPzonICtcbiAgICAgIGtleXNbJ3poLVRXJ10uZnVsbGRiICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmhhbGZkYiArXG4gICAgICAnKVxcXFxzKnxcXFxccypbKy1dXFxcXHMqKDo/XFxcXGQrZCk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnRG9kZ2V86ZaD6YG/fOmWg+i6sicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJT8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLF0/XFxcXHMqJyxcbiAgICBndWVzc1N0YXJ0Q29tYmF0OiAnKF58KD88ISwpXFxuKSgnICsgJ+i/keaIsOaKgOiDvXzlsITmk4rmioDog718QnJhd2x8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAge1xuICBzdGF0aWMgY2hlY2tMYW5ndWFnZSAobGFuZyA9IG51bGwpIHtcbiAgICBpZiAoIWxhbmcpIHtcbiAgICAgIGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHRyYW5zbGF0aW9uc1tsYW5nXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGxhbmcgPSAnZW4nXG4gICAgfVxuICAgIHJldHVybiBsYW5nXG4gIH1cblxuICBzdGF0aWMgZ2V0RXhhbXBsZVRleHQgKGxhbmcpIHtcbiAgICBsZXQgZXhhbXBsZSA9IGtleXMuZW4uZXhhbXBsZVxuICAgIGlmICh0eXBlb2Yga2V5c1tsYW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGV4YW1wbGUgPSBrZXlzW2xhbmddLmV4YW1wbGVcbiAgICB9XG4gICAgcmV0dXJuIGV4YW1wbGVcbiAgfVxuXG4gIHN0YXRpYyBnZXRUcmFuc2xhdGlvbnMgKCkge1xuICAgIGNvbnN0IG91dHB1dCA9IHt9XG4gICAgZm9yIChjb25zdCBrZXkgaW4ga2V5cykge1xuICAgICAgb3V0cHV0W2tleV0gPSBrZXlzW2tleV0uZGVzY3JpcHRpb25cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgc3RhdGljIGdldEtleXMgKGxhbmcpIHtcbiAgICByZXR1cm4ga2V5c1tsYW5nXSB8fCBrZXlzLmVuXG4gIH1cblxuICBzdGF0aWMgZ2V0UmVndWxhckV4cHJlc3Npb25zIChsYW5nKSB7XG4gICAgcmV0dXJuIHRyYW5zbGF0aW9uc1tsYW5nXSB8fCB0cmFuc2xhdGlvbnMuZW5cbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDT05GSUcsIGR1cGxpY2F0ZSwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyUmVnRXhwIH0gZnJvbSAnLi9hY3Rvci1pbXBvcnRlci1yZWdleHAuanMnXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogQ29DN0FjdG9ySW1wb3J0ZXIgaGVscGVyIGNsYXNzIHRvIGltcG9ydCBhbiBBY3RvciBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMucGFyc2VkID0ge31cbiAgICB0aGlzLml0ZW1Mb2NhdGlvbnMgPSAnJ1xuICB9XG5cbiAgc3RhdGljIGdldCBhc051bWJlciAoKSB7XG4gICAgcmV0dXJuICduJ1xuICB9XG5cbiAgc3RhdGljIGdldCBhc1N0cmluZyAoKSB7XG4gICAgcmV0dXJuICdzJ1xuICB9XG5cbiAgLyoqXG4gICAqIGdldFJlZ0V4LCBnZXQgUmVnRXhwIG9iamVjdCBpZiBub3QgY3VycmVudGx5IGEgUmVnRXhwIG9iamVjdFxuICAgKiBAcGFyYW0ge01peGVkfSByZWdleCBSZWdFeHAgb3Igc3RyaW5nXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBtb2RpZmllcnMgaWYgc3RyaW5nIHdhcyBzdXBwbGllZCBpbiByZWdleCBsaXN0IG9mIG1vZGlmaWVycyB0byBhZGQgdG8gdGhlIFJlZ0V4cFxuICAgKiBAcmV0dXJucyB7UmVnRXhwfVxuICAgKi9cbiAgZ2V0UmVnRXggKHJlZ2V4LCBtb2RpZmllcnMgPSAnaXUnKSB7XG4gICAgaWYgKHJlZ2V4LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnUmVnRXhwJykge1xuICAgICAgcmV0dXJuIHJlZ2V4XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVnRXhwKHJlZ2V4LCBtb2RpZmllcnMpXG4gIH1cblxuICAvKipcbiAgICogY2xlYW5TdHJpbmcsIHJlbW92ZXMgbmV3IGxpbmUgYW5kIGNhcnJpZXIgcmV0dXJuIGNoYXJhY3RlciBhbmQgbGF0ZXJhbCBzcGFjZXMgZnJvbSBhIHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgc3RyaW5nIHRvIGNsZWFuXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSBjbGVhbmVkIHN0cmluZ1xuICAgKi9cbiAgY2xlYW5TdHJpbmcgKHMpIHtcbiAgICByZXR1cm4gc1xuICAgICAgLnJlcGxhY2UoLyhcXG58XFxyKS9nLCAnICcpXG4gICAgICAucmVwbGFjZSgvXlxccyovLCAnJylcbiAgICAgIC5yZXBsYWNlKC9cXHMqXFwuP1xccypcXC4/JC8sICcnKVxuICB9XG5cbiAgLyoqXG4gICAqIHRyYW5zbGF0ZVJvbGwsIHRyYW5zbGF0ZXMgbGFuZ3VhZ2Ugc3BlY2lmaWMgc2hvcnRmb3JtIG9mIGRpY2UgKEQpIGluIHJvbGxzXG4gICAqIEV4YW1wbGUgZm9yIEdlcm1hbiByb2xsczogMVc0ID0+IDFENC5cbiAgICogRGljZSBzaG9ydGZvcm0gaXMgY29uZmlndXJlZCB1c2luZyBrZXlzLmRpY2VTaG9ydFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgcm9sbCB0byBiZSB0cmFuc2xhdGVkXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IHRoZSB0cmFuc2xhdGVkIHJvbGxcbiAgICovXG4gIHRyYW5zbGF0ZVJvbGwgKHMpIHtcbiAgICBpZiAodHlwZW9mIHMgPT09ICd1bmRlZmluZWQnKSByZXR1cm4gc1xuICAgIGlmICh0eXBlb2YgdGhpcy5rZXlzLmRpY2VTaG9ydCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cChcbiAgICAgICAgJyg/PG4xPlxcXFxkKyknICsgdGhpcy5rZXlzLmRpY2VTaG9ydCArICcoPzxuMj5cXFxcZCspJyxcbiAgICAgICAgJ2l1ZydcbiAgICAgIClcbiAgICAgIHJldHVybiBzLnJlcGxhY2UocmVnRXgsICckPG4xPkQkPG4yPicpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHRvSFRNTCwgY29udmVydHMgYSBzdHJpbmcgdG8gSFRNTCBzdHJpcGluZyBvdXQgZW1wdHkgbGluZXMgb3IgbGluZXMgdGhhdCBjb250YWluIGp1c3QgLCBvciAuXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzIHRoZSBzdHJpbmcgdG8gY29udmVydFxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgSFRNTCBvciBhbiBlbXB0eSBzdHJpbmdcbiAgICovXG4gIHRvSFRNTCAocykge1xuICAgIGlmIChzLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBzID0gc1xuICAgICAgLnRyaW0oKVxuICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgLm1hcCh0ZXh0ID0+IHRleHQudHJpbSgpLnJlcGxhY2UoL15bLC5cXHNdKyQvLCAnJykpXG4gICAgICAuZmlsdGVyKHRleHQgPT4gdGV4dClcbiAgICAgIC5qb2luKCc8L3A+PHA+JylcbiAgICBpZiAocy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICByZXR1cm4gJzxwPicgKyBzICsgJzwvcD4nXG4gIH1cblxuICAvKipcbiAgICogY2hlY2sgZXhwZWN0cyBhIGtleSBmcm9tIHRoaXMucmVnRXggd2lsbCBhdHRlbXB0IHRvIG1hdGNoIHRoZSB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZWdFeEtleSBrZXkgaW4gdGhpcy5yZWdFeFxuICAgKiBAcGFyYW0ge0pTT059XG4gICAqIC0gcmVtb3ZlRnJvbVRleHQgcmVtb3ZlIGZyb20gdGhpcy50ZXh0XG4gICAqIC0gc2F2ZUtleXMgYWRkIGdyb3VwIGtleXMgdG8gdGhpcy5wYXJzZWRcbiAgICogLSB0eXBlIElmIGFkZGluZyB3aXRoIHNhdmVLZXlzIHNldCB0eXBlIChDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZyAvIENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyKVxuICAgKiAtIHRleHQgSWYgc2V0IHVzZSB0aGlzIGluc3RlYWQgb2YgdGhpcy50ZXh0XG4gICAqIC0gcmVxdWlyZWRHcm91cCBJZiBub3QgZmFsc2UgcmVxdWlyZSBzcGVjaWZpZWQga2V5IGluIFJlZ0V4cCBncm91cHNcbiAgICogQHJldHVybnMge0ZhbHNlfS97SlNPTiBncm91cHMgJycgaXMgbWF0Y2hlZCBzdHJpbmd9XG4gICAqL1xuICBjaGVjayAoXG4gICAgcmVnRXhLZXksXG4gICAge1xuICAgICAgcmVtb3ZlRnJvbVRleHQgPSB0cnVlLFxuICAgICAgc2F2ZUtleXMgPSB0cnVlLFxuICAgICAgdHlwZSA9IENvQzdBY3RvckltcG9ydGVyLmFzU3RyaW5nLFxuICAgICAgdGV4dCA9IGZhbHNlLFxuICAgICAgcmVxdWlyZWRHcm91cCA9IGZhbHNlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGxldCBvdXRwdXQgPSBmYWxzZVxuICAgIGxldCByZWdFeHAgPSBmYWxzZVxuICAgIGlmICh0eXBlb2YgdGhpcy5yZWdFeFtyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMucmVnRXhbcmVnRXhLZXldKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMua2V5c1tyZWdFeEtleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZWdFeHAgPSB0aGlzLmdldFJlZ0V4KHRoaXMua2V5c1tyZWdFeEtleV0pXG4gICAgfVxuICAgIGlmIChyZWdFeHAgIT09IGZhbHNlKSB7XG4gICAgICBpZiAodGV4dCA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGV4dCA9IHRoaXMudGV4dFxuICAgICAgfVxuICAgICAgY29uc3QgY2hlY2sgPSByZWdFeHAuZXhlYyh0ZXh0KVxuICAgICAgbGV0IHZhbHVlID0gbnVsbFxuICAgICAgaWYgKFxuICAgICAgICBjaGVjayAhPT0gbnVsbCAmJlxuICAgICAgICAocmVxdWlyZWRHcm91cCA9PT0gZmFsc2UgfHxcbiAgICAgICAgICB0eXBlb2YgKGNoZWNrLmdyb3VwcyB8fCB7fSlbcmVxdWlyZWRHcm91cF0gIT09ICd1bmRlZmluZWQnKVxuICAgICAgKSB7XG4gICAgICAgIG91dHB1dCA9IGNoZWNrLmdyb3VwcyB8fCB7fVxuICAgICAgICBpZiAocmVtb3ZlRnJvbVRleHQpIHtcbiAgICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZShjaGVja1swXS50cmltKCksICdcXG4nKS50cmltKClcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2F2ZUtleXMpIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhjaGVjay5ncm91cHMpKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZzpcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZFtrZXldID0gU3RyaW5nKGNoZWNrLmdyb3Vwc1trZXldKS5yZXBsYWNlKCdcXG4nLCAnICcpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlcjpcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRba2V5XSA9IE51bWJlcihjaGVjay5ncm91cHNba2V5XSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3V0cHV0Wyctc291cmNlJ10gPSBjaGVja1swXVxuICAgICAgICBvdXRwdXRbJy1pbmRleCddID0gY2hlY2suaW5kZXhcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLyoqXG4gICAqIHByb2Nlc3NDb21iYXQgZXh0cmFjdHMgY29tYmF0IC8gZG9kZ2UgaW5mb3JtYXRpb24gZnJvbSBhIHN1YnNlY3Rpb24gb2YgdGV4dFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIGNvbWJhdCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NDb21iYXQgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdjb21iYXQgdGV4dCcsIHRleHQpXG4gICAgfVxuICAgIGxldCB3ZWFwb25cbiAgICBsZXQgZG9kZ2VcbiAgICBsZXQgbmV3bGluZVxuICAgIGxldCBsYXN0UGVyY2VudCA9IGZhbHNlXG4gICAgbGV0IG1heExvb3BzID0gNDBcbiAgICBkbyB7XG4gICAgICBtYXhMb29wcy0tXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKClcbiAgICAgIGlmIChcbiAgICAgICAgKGRvZGdlID0gdGhpcy5jaGVjaygnd2VhcG9uRG9kZ2UnLCB7IHNhdmVLZXlzOiBmYWxzZSwgdGV4dCB9KSlcbiAgICAgICkge1xuICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKGRvZGdlWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLnNraWxscyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLnBhcnNlZC5za2lsbHMgPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkLnNraWxscy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmNsZWFuU3RyaW5nKGRvZGdlLm5hbWUpLFxuICAgICAgICAgIHZhbHVlOiBOdW1iZXIoZG9kZ2UucGVyY2VudGFnZSksXG4gICAgICAgICAgcHVzaDogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICh3ZWFwb24gPSB0aGlzLmNoZWNrKCd3ZWFwb24nLCB7XG4gICAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICAgIHRleHQsXG4gICAgICAgICAgcmVxdWlyZWRHcm91cDogbGFzdFBlcmNlbnQgPT09IGZhbHNlID8gJ3BlcmNlbnRhZ2UnIDogZmFsc2VcbiAgICAgICAgfSkpXG4gICAgICApIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZSh3ZWFwb25bJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmNsZWFuU3RyaW5nKHdlYXBvbi5uYW1lIHx8ICcnKVxuICAgICAgICBsZXQgZGFtYWdlID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMuY2xlYW5TdHJpbmcod2VhcG9uLmRhbWFnZSB8fCAnJykpXG4gICAgICAgIGNvbnN0IGlzUmFuZ2VkID0gISEoXG4gICAgICAgICAgdGhpcy5jaGVjaygnaGFuZGd1bicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ3JpZmxlJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnc21iJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pIHx8XG4gICAgICAgICAgdGhpcy5jaGVjaygnbWFjaGluZUd1bicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ2xhdW5jaGVkJywge1xuICAgICAgICAgICAgdGV4dDogbmFtZSxcbiAgICAgICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHdlYXBvbi5wZXJjZW50YWdlICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHdlYXBvbi5wZXJjZW50YWdlICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICBsYXN0UGVyY2VudCA9IE51bWJlcih3ZWFwb24ucGVyY2VudGFnZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsYXN0UGVyY2VudCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBsZXQgZm91bmRcbiAgICAgICAgbGV0IGFoZGIgPSBmYWxzZVxuICAgICAgICBsZXQgYWRkYiA9IGZhbHNlXG4gICAgICAgIGRvIHtcbiAgICAgICAgICBmb3VuZCA9IHRoaXMuZ2V0UmVnRXgoXG4gICAgICAgICAgICAnXFxcXHMqWystXT9cXFxccyooJyArXG4gICAgICAgICAgICAgIHRoaXMua2V5cy5oYWxmZGIgK1xuICAgICAgICAgICAgICAnKVxcXFxzKignICtcbiAgICAgICAgICAgICAgdGhpcy5rZXlzLmZ1bGxkYiArXG4gICAgICAgICAgICAgICcpP1stK10/XFxcXHMqKCcgK1xuICAgICAgICAgICAgICB0aGlzLnBhcnNlZC5kYi5yZXBsYWNlKC9eWy0rXS8sICcnKSArXG4gICAgICAgICAgICAgICcpPydcbiAgICAgICAgICApLmV4ZWMoZGFtYWdlKVxuICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgYWhkYiA9IHRydWVcbiAgICAgICAgICAgIGRhbWFnZSA9IGRhbWFnZS5yZXBsYWNlKGZvdW5kWzBdLCAnJylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJlZ0V4KFxuICAgICAgICAgICAgICAnXFxcXHMqWystXT9cXFxccyooJyArXG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzLmZ1bGxkYiArXG4gICAgICAgICAgICAgICAgJylcXFxccypbLStdP1xcXFxzKignICtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlZC5kYi5yZXBsYWNlKC9eWy0rXS8sICcnKSArXG4gICAgICAgICAgICAgICAgJyk/J1xuICAgICAgICAgICAgKS5leGVjKGRhbWFnZSlcbiAgICAgICAgICAgIGlmIChmb3VuZCkge1xuICAgICAgICAgICAgICBhZGRiID0gdHJ1ZVxuICAgICAgICAgICAgICBkYW1hZ2UgPSBkYW1hZ2UucmVwbGFjZShmb3VuZFswXSwgJycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChmb3VuZClcbiAgICAgICAgY29uc3QgZGFtYWdlcyA9IGRhbWFnZS5zcGxpdCgnLycpXG4gICAgICAgIGNvbnN0IGlzU2hvdGd1biA9IGRhbWFnZXMubGVuZ3RoID09PSAzXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgbmFtZSxcbiAgICAgICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgIHNraWxsOiB7XG4gICAgICAgICAgICAgIGlkOiBsYXN0UGVyY2VudFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgbm9ybWFsOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGlzU2hvdGd1biA/IDEwIDogMCxcbiAgICAgICAgICAgICAgICBkYW1hZ2U6IGRhbWFnZXNbMF1cbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbG9uZzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyAyMCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzFdIDogJydcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZXh0cmVtZToge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyA1MCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBpc1Nob3RndW4gPyBkYW1hZ2VzWzJdIDogJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgc29tZSBvZiB0aGUgcHJvcGVydGllc1xuICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4gPSBpc1Nob3RndW5cbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkID0gaXNSYW5nZWQgfHwgaXNTaG90Z3VuXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMubWVsZWUgPSAhZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuYWhkYiA9IGFoZGJcbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5hZGRiID0gYWRkYlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucGFyc2VkLmF0dGFja3MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcyA9IFtdXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrcy5wdXNoKGRhdGEpXG4gICAgICB9IGVsc2UgaWYgKChuZXdsaW5lID0gdGV4dC5tYXRjaCgvXiguKylcXG4vKSkpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShuZXdsaW5lWzBdLCAnXFxuJylcbiAgICAgIH0gZWxzZSBpZiAoKG5ld2xpbmUgPSB0ZXh0Lm1hdGNoKC9eW15cXG5dKyQvKSkpIHtcbiAgICAgICAgdGV4dCA9ICcnXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmICghIXdlYXBvbiB8fCAhIWRvZGdlIHx8ICEhdGV4dCkpXG4gICAgaWYgKG1heExvb3BzID09PSAwKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvclVuZXhwZWN0ZWRXZWFwb25UZXh0JylcbiAgICAgIClcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1VuZXhwZWN0ZWQgd2VhcG9uczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU2tpbGxzIGV4dHJhY3RzIHNraWxscyAvIGxhbmd1YWdlIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBza2lsbHMgLyBsYW5ndWFnZSBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTa2lsbHMgKHRleHQsIGtleSA9ICdza2lsbHMnKSB7XG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGJyZWFrcyA9IHRleHQuc3BsaXQoL1xcLlxccj9cXG4vKVxuICAgIGlmIChicmVha3MubGVuZ3RoID4gMSkge1xuICAgICAgdGV4dCA9IGJyZWFrc1swXVxuICAgIH1cbiAgICBsZXQgc2tpbGxcbiAgICBsZXQgbWF4TG9vcHMgPSA0MFxuICAgIGRvIHtcbiAgICAgIG1heExvb3BzLS1cbiAgICAgIHRleHQgPSB0ZXh0LnRyaW0oKVxuICAgICAgc2tpbGwgPSB0aGlzLmNoZWNrKCdza2lsbCcsIHsgc2F2ZUtleXM6IGZhbHNlLCB0ZXh0IH0pXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShza2lsbFsnLXNvdXJjZSddLCAnXFxuJylcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZFtrZXldID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMucGFyc2VkW2tleV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkW2tleV0ucHVzaCh7XG4gICAgICAgICAgbmFtZTogdGhpcy5jbGVhblN0cmluZyhza2lsbC5uYW1lKSxcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHNraWxsLnBlcmNlbnRhZ2UpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSB3aGlsZSAobWF4TG9vcHMgPiAwICYmIHNraWxsKVxuICAgIGlmIChtYXhMb29wcyA9PT0gMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JVbmV4cGVjdGVkU2tpbGxzVGV4dCcpXG4gICAgICApXG4gICAgICBjb25zb2xlLmRlYnVnKCdVbmV4cGVjdGVkIHNraWxsczonLCB0ZXh0KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzU3BlbGxzIGV4dHJhY3RzIHNwZWxsIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBzcGVsbCBzZWN0aW9uXG4gICAqIEByZXR1cm5zIHZvaWRcbiAgICovXG4gIHByb2Nlc3NTcGVsbHMgKHRleHQpIHtcbiAgICBpZiAodGV4dC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgYnJlYWtzID0gdGV4dC5zcGxpdCgvXFwuXFxyP1xcbi8pXG4gICAgaWYgKGJyZWFrcy5sZW5ndGggPiAxKSB7XG4gICAgICB0ZXh0ID0gYnJlYWtzWzBdXG4gICAgfVxuICAgIGNvbnN0IHNwZWxsc0FyciA9IHRleHQucmVwbGFjZSgvKFtcXG5cXHJdKykvZywgJyAnKS5zcGxpdCgvKD88IVxcKFteKV0rKSwvKVxuICAgIHRoaXMudGV4dCA9IHRoaXMudGV4dC5yZXBsYWNlKHRleHQudHJpbSgpLCAnXFxuJylcbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxsc0Fycikge1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZC5zcGVsbHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMucGFyc2VkLnNwZWxscyA9IFtdXG4gICAgICB9XG4gICAgICB0aGlzLnBhcnNlZC5zcGVsbHMucHVzaCh0aGlzLmNsZWFuU3RyaW5nKHNwZWxsKSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcGFyc2VDaGFyYWN0ZXIgZXh0cmFjdHMgaW5mb3JtYXRpb24gZnJvbSB0aGUgcmF3IHRleHQgZGVzY3JpcHRpb24gb2YgYW4gZW50aXR5IChOUEMgb3IgQ3JlYXR1cmUpXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgZW50aXR5XG4gICAqIEByZXR1cm5zIGV4dHJhY3RlZERhdGEgb2JqZWN0IHdpdGggdGhlIGVudGl0eSBkYXRhXG4gICAqL1xuICBhc3luYyBwYXJzZUNoYXJhY3RlciAodGV4dCkge1xuICAgIC8vIFJlcGxhY2UgXCJFbiBEYXNoXCIgYW5kIFwiRW0gRGFzaFwiIGRhc2hlcyB3aXRoIC0gYW5kIFwiUmlnaHQgU2luZ2xlIFF1b3RhdGlvbiBNYXJrXCIgd2l0aCAnXG4gICAgdGhpcy50ZXh0ID0gU3RyaW5nKHRleHQpXG4gICAgICAudHJpbSgpXG4gICAgICAucmVwbGFjZSgvXFx1MjAxM3xcXHUyMDE0fFxcdTIyMTIvZywgJy0nKVxuICAgICAgLnJlcGxhY2UoL1xcdTIwMTkvZywgXCInXCIpXG4gICAgICAucmVwbGFjZSgvW1xcdWRiYzAtXFx1ZGJmZV1bXFx1ZGMwMC1cXHVkZmZmXS9nLCAnJylcbiAgICAvLyBFYXJsaWVzdCBjaGFyYWN0ZXIgdGhhdCBoYXMgYmVlbiB1c2VkLCB0byB3b3JrIG91dCB0aGUgaGVhZGVyXG4gICAgbGV0IG1pbiA9IHRoaXMudGV4dC5sZW5ndGhcbiAgICAvLyBTVFIsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgbGV0IGNoZWNrID0gdGhpcy5jaGVjaygnc3RyJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVtcbiAgICAgICctaW5kZXgnXG4gICAgXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBDT04sIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdjb24nLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBTSVosIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdzaXonLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBJTlQsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdpbnQnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBQT1csIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdwb3cnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBERVgsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdkZXgnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBBUFAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdhcHAnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBFRFUsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdlZHUnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBTQU4sIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdzYW4nLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBIUCwgaWYgYmVyZm9yZSB0aGFuIHByZXZpb3VzIG1pbiB1cGRhdGUgaXRcbiAgICBjaGVjayA9IHRoaXMuY2hlY2soJ2hwJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gTVAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdtcCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIFdvcmsgb3V0IHRoZSBoZWFkZXIgYmFzZWQgb24gcHJldmlvdXMgbWluaW11bSBtYXRjaGVkIGNoYXJhY3RlclxuICAgIGxldCBoZWFkZXJcbiAgICBpZiAobWluID4gMCkge1xuICAgICAgaGVhZGVyID0gdGhpcy50ZXh0LnN1YnN0cigwLCBtaW4pXG4gICAgICAvLyBHZXQgbmFtZSBmcm9tIGhlYWRlclxuICAgICAgY2hlY2sgPSB0aGlzLmNoZWNrKCduYW1lJywgeyB0ZXh0OiBoZWFkZXIgfSlcbiAgICAgIGlmIChjaGVjayA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gSWYgbm90IGZvdW5kIHVzZSBkZWZhdWx0IE5QQyBuYW1lXG4gICAgICAgIHRoaXMucGFyc2VkLm5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRVbm5hbWVkQ2hhcmFjdGVyJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJlbW92ZSBuYW1lIGZyb20gaGVhZGVyXG4gICAgICAgIGhlYWRlciA9IGhlYWRlci5yZXBsYWNlKGNoZWNrWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgfVxuICAgICAgLy8gR2V0IGFnZSBmcm9tIGhlYWRlclxuICAgICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdhZ2UnLCB7IHRleHQ6IGhlYWRlciB9KVxuICAgICAgaWYgKGNoZWNrICE9PSBmYWxzZSkge1xuICAgICAgICAvLyBJZiBmb3VuZCByZW1vdmUgYWdlIGZyb20gaGVhZGVyXG4gICAgICAgIGhlYWRlciA9IGhlYWRlci5yZXBsYWNlKGNoZWNrWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgfVxuICAgICAgLy8gR2V0IG9jY3VwYXRpb24gZnJvbSBoZWFkZXJcbiAgICAgIGlmICghdGhpcy5jaGVjaygnb2NjdXBhdGlvbicsIHsgdGV4dDogaGVhZGVyIH0pICYmIGhlYWRlci50cmltKCkgIT09ICcnKSB7XG4gICAgICAgIC8vIElmIG9jY3VwYXRpb24gaXMgbm90IGZvdW5kIGJ1dCB0aGVyZSBpcyBhIGhlYWRlciBzZXQgdGhlIG9jY3VwYXRpb24gdG8gdGhlIHJlbWFpbmluZyBoZWFkZXJcbiAgICAgICAgbGV0IG9jY3VwYXRpb24gPSBoZWFkZXJcbiAgICAgICAgaWYgKGhlYWRlci5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZnVsbCBzdG9wIGp1c3QgdXNlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBoZWFkZXIgYXMgdGhlIG9jY3VwYXRpb25cbiAgICAgICAgICBvY2N1cGF0aW9uID0gaGVhZGVyLnN1YnN0cigwLCBoZWFkZXIuaW5kZXhPZignLicpICsgMSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uID0gb2NjdXBhdGlvblxuICAgICAgICAgIC5yZXBsYWNlKC8oW1xcblxccl0rKS9nLCAnICcpXG4gICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIC5yZXBsYWNlKC8sJC8sICcnKVxuICAgICAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZShvY2N1cGF0aW9uLnRyaW0oKSwgJ1xcbicpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZXJlIGlzIG5vIGhlYWRlciBzZXQgZGVmYXVsdCBOUEMgbmFtZVxuICAgICAgdGhpcy5wYXJzZWQubmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbXBvcnRlZFVubmFtZWRDaGFyYWN0ZXInKVxuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBvY2N1cGF0aW9uIGJ1dCBubyBhZ2UgY2hlY2sgaWYgdGhlIG9jY3VwYXRpb24gc3RhcnRzIG51bWJlciBzcGxpdCBhZ2UgYW5kIG9jY3VwYXRpb25cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5wYXJzZWQub2NjdXBhdGlvbiAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLnBhcnNlZC5hZ2UgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCBvY2N1cGF0aW9uQWdlID0gdGhpcy5wYXJzZWQub2NjdXBhdGlvbi5tYXRjaChcbiAgICAgICAgL14oPzxhZ2U+XFxkKyksKD88b2NjdXBhdGlvbj4uKykkL1xuICAgICAgKVxuICAgICAgaWYgKG9jY3VwYXRpb25BZ2UpIHtcbiAgICAgICAgdGhpcy5wYXJzZWQuYWdlID0gb2NjdXBhdGlvbkFnZS5ncm91cHMuYWdlXG4gICAgICAgIHRoaXMucGFyc2VkLm9jY3VwYXRpb24gPSBvY2N1cGF0aW9uQWdlLmdyb3Vwcy5vY2N1cGF0aW9uLnRyaW0oKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBHZXQgZGFtYWdlIGJvbnVzLCBpZiBub3QgZm91bmQgb3Igbm9uZSBzZXQgdG8gMFxuICAgIGlmIChcbiAgICAgICF0aGlzLmNoZWNrKCdkYicpIHx8XG4gICAgICB0aGlzLmNoZWNrKCdkYk5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5kYlxuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHRoaXMucGFyc2VkLmRiID0gJzAnXG4gICAgfVxuICAgIHRoaXMucGFyc2VkLmRiID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMucGFyc2VkLmRiKVxuICAgIC8vIEdldCBidWlsZFxuICAgIHRoaXMuY2hlY2soJ2J1aWxkJylcbiAgICAvLyBHZXQgYXJtb3IsIGlmIG5vdCBmb3VuZCBvciBub25lIHNldCB0byAwXG4gICAgaWYgKFxuICAgICAgIXRoaXMuY2hlY2soJ2FybW9yJykgfHxcbiAgICAgIHRoaXMuY2hlY2soJ2FybW9yTm9uZScsIHtcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgIHRleHQ6IHRoaXMucGFyc2VkLmFybW9yXG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGhpcy5wYXJzZWQuYXJtb3IgPSAnMCdcbiAgICB9XG4gICAgLy8gR2V0IG1vdmVtZW50XG4gICAgdGhpcy5jaGVjaygnbW92JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVxuICAgIC8vIEdldCBsdWNrXG4gICAgdGhpcy5jaGVjaygnbGNrJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVxuICAgIC8vIEdldCBzYW5pdHkgbG9zc1xuICAgIHRoaXMuY2hlY2soJ3Nhbkxvc3MnKVxuICAgIHRoaXMucGFyc2VkLnNhbkxvc3MgPSB0aGlzLnRyYW5zbGF0ZVJvbGwodGhpcy5wYXJzZWQuc2FuTG9zcylcbiAgICAvLyBHZXQgYXR0YWNrcyBwZXIgcm91bmQsIGlmIG5vdCBmb3VuZCBvciBub25lIHNldCB0byAwXG4gICAgaWYgKFxuICAgICAgdGhpcy5jaGVjaygnYXR0YWNrc1BlclJvdW5kJykgJiZcbiAgICAgIHRoaXMuY2hlY2soJ2F0dGFja3NQZXJSb3VuZE5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5hdHRhY2tzUGVyUm91bmRcbiAgICAgIH0pXG4gICAgKSB7XG4gICAgICB0aGlzLnBhcnNlZC5hdHRhY2tzUGVyUm91bmQgPSAnMCdcbiAgICB9XG4gICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBjb21iYXQgc2VjdGlvblxuICAgIHRoaXMudGV4dCA9ICdcXG4nICsgdGhpcy50ZXh0XG4gICAgbGV0IHNlY3Rpb25zID0gdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvbkNvbWJhdHMgKyAnKScsICdpJylcbiAgICBpZiAodGhpcy50ZXh0Lm1hdGNoKHNlY3Rpb25zKSA9PT0gbnVsbCkge1xuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gY29tYmF0IHNlY3Rpb24gZ3Vlc3Mgd2hlcmUgaXQgc3RhcnRzXG4gICAgICBzZWN0aW9ucyA9IHRoaXMuY2hlY2soJ2d1ZXNzU3RhcnRDb21iYXQnLCB7XG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlXG4gICAgICB9KVxuICAgICAgaWYgKHNlY3Rpb25zKSB7XG4gICAgICAgIC8vIEFkZCBhIGhlYWRlciB0byB0aGUgc3RhcnQgb2YgdGhlIGNvbWJhdCBzZWN0aW9uXG4gICAgICAgIHRoaXMudGV4dCA9IFtcbiAgICAgICAgICB0aGlzLnRleHQuc2xpY2UoMCwgc2VjdGlvbnNbJy1pbmRleCddKSxcbiAgICAgICAgICB0aGlzLmtleXMubmV3Q29tYmF0SGVhZGVyLFxuICAgICAgICAgIHRoaXMudGV4dC5zbGljZShzZWN0aW9uc1snLWluZGV4J10pXG4gICAgICAgIF0uam9pbignJylcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU3BsaXQgdGhlIHNlY3Rpb25zIENvbWJhdCwgU2tpbGxzLCBMYW5ndWFnZXMsIGFuZCBTcGVsbHNcbiAgICBjb25zdCByZWdFeHBTZWN0aW9ucyA9IHRoaXMuZ2V0UmVnRXgodGhpcy5yZWdFeC5zZWN0aW9ucywgJ2knKVxuICAgIHNlY3Rpb25zID0gdGhpcy50ZXh0LnNwbGl0KHJlZ0V4cFNlY3Rpb25zKVxuICAgIGlmIChzZWN0aW9ucyAhPT0gbnVsbCkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGltID0gc2VjdGlvbnMubGVuZ3RoOyBpIDwgaW07IGkrKykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uQ29tYmF0cyArICcpJywgJ2knKVxuICAgICAgICAgICkgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIGNvbWJhdFxuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIHRoaXMucHJvY2Vzc0NvbWJhdChzZWN0aW9uc1tpICsgMV0pXG4gICAgICAgICAgaSsrXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uU2tpbGxzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgc2tpbGxzXG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzU2tpbGxzKHNlY3Rpb25zW2kgKyAxXSlcbiAgICAgICAgICBpKytcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25MYW5nYXVnZXMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBsYW5ndWFnZXNcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTa2lsbHMoc2VjdGlvbnNbaSArIDFdLCAnbGFuZ3VhZ2VzJylcbiAgICAgICAgICBpKytcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBzZWN0aW9uc1tpXS5tYXRjaChcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25TcGVsbHMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBzcGVsbHNcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NTcGVsbHMoc2VjdGlvbnNbaSArIDFdKVxuICAgICAgICAgIGkrK1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIEFueSByZW1haW5pbmcgdGV4dCBhZGQgdG8gR00gbm90ZXMgc28geW91IGNhbiBlYXNpbHkgc2VlIGlmIHRoZXJlIGFyZSBhbnkgb2J2aW91cyBpc3N1ZSBvciBqdXN0IGdlbmVyYWwgbm90ZXNcbiAgICB0aGlzLnBhcnNlZC5nbW5vdGVzID0gdGhpcy50b0hUTUwodGhpcy50ZXh0KVxuICAgIHJldHVybiB0aGlzLnBhcnNlZFxuICB9XG5cbiAgZGlzYWJsZUF0dHJpYkF1dG8gKGtleSwgYXR0cmliVmFsdWUsIGNoZWNrLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgdmFsdWUgPSBNYXRoLm1heCgwLCBOdW1iZXIoYXR0cmliVmFsdWUpKVxuICAgIGlmICh2YWx1ZSAhPT0gTnVtYmVyKGNoZWNrKSkge1xuICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9LmF1dG9gXSA9IGZhbHNlXG4gICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uYXR0cmlicy4ke2tleX0udmFsdWVgXSA9IHZhbHVlXG4gICAgICBpZiAoa2V5ID09PSAnYnVpbGQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbYHN5c3RlbS5hdHRyaWJzLiR7a2V5fS5jdXJyZW50YF0gPSB2YWx1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9Lm1heGBdID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gZW50aXR5IChgbnBjYCBvciBgY3JlYXR1cmVgKSBmcm9tIHRoZSBvYmplY3Qgd2l0aCB0aGUgYWxyZWFkeSBwYXJzZWQgZW50aXR5IGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IGNoYXJhY3RlckRhdGEgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlclxuICAgKiBAcGFyYW0ge1N0cmluZ30gZW50aXR5VHlwZVN0cmluZyBlbnRpdHkgdHlwZSBvYnRhaW5lZCBmcm9tIHRoZSB1c2VyIGlucHV0XG4gICAqIEByZXR1cm5zIHtBY3Rvcn0gdGhlIGNyZWF0ZWQgZm91bmRyeSBgQWN0b3JgXG4gICAqL1xuICBhc3luYyBjcmVhdGVFbnRpdHkgKGNoYXJhY3RlckRhdGEsIGVudGl0eVR5cGUpIHtcbiAgICBjb25zdCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPVxuICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5jcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMoKVxuICAgIGlmIChlbnRpdHlUeXBlICE9PSAnbnBjJykge1xuICAgICAgZW50aXR5VHlwZSA9ICdjcmVhdHVyZSdcbiAgICB9XG4gICAgY29uc3QgYWN0b3JEYXRhID0ge1xuICAgICAgbmFtZTogY2hhcmFjdGVyRGF0YS5uYW1lLFxuICAgICAgdHlwZTogZW50aXR5VHlwZSxcbiAgICAgIGZvbGRlcjogaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyLmlkLFxuICAgICAgZGF0YTogY2hhcmFjdGVyRGF0YS5hY3RvclxuICAgIH1cbiAgICBjb25zdCBucGMgPSBhd2FpdCBBY3Rvci5jcmVhdGUoYWN0b3JEYXRhKVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGNoYXJhY3RlckRhdGEuaXRlbXMsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgbGV0IHZhbHVlID0gMFxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmhwPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdocCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5ocC52YWx1ZSxcbiAgICAgICAgbnBjLmhwTWF4LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1wPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUF0dHJpYkF1dG8oXG4gICAgICAgICdtcCcsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tcC52YWx1ZSxcbiAgICAgICAgbnBjLm1wTWF4LFxuICAgICAgICB1cGRhdGVEYXRhXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1vdj8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnbW92JyxcbiAgICAgICAgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLm1vdi52YWx1ZSxcbiAgICAgICAgbnBjLm1vdixcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5idWlsZD8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnYnVpbGQnLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuYnVpbGQudmFsdWUsXG4gICAgICAgIG5wYy5idWlsZCxcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5kYj8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyhjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuZGIudmFsdWUpLnJlcGxhY2UoL15cXCtcXHMqLywgJycpXG4gICAgICBpZiAodmFsdWUgIT09IFN0cmluZyhucGMuZGIpKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmRiLmF1dG8nXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJ10gPSB2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXModXBkYXRlRGF0YSkubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygndXBkYXRlRGF0YTonLCB1cGRhdGVEYXRhKVxuICAgICAgfVxuICAgICAgYXdhaXQgbnBjLnVwZGF0ZSh1cGRhdGVEYXRhKVxuICAgIH1cbiAgICBjb25zdCB1cGRhdGVJdGVtRGF0YSA9IFtdXG4gICAgbGV0IGxhc3RXZWFwb25Ta2lsbCA9IG51bGxcbiAgICBmb3IgKGNvbnN0IHBhaXIgb2YgdGhpcy53ZWFwb25Ta2lsbHMpIHtcbiAgICAgIGlmIChwYWlyWzBdICE9PSBmYWxzZSkge1xuICAgICAgICBsYXN0V2VhcG9uU2tpbGwgPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICAgIGkgPT4gaS5uYW1lID09PSBwYWlyWzBdLm5hbWUgJiZcbiAgICAgICAgICAgIGkudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgTnVtYmVyKGkuc3lzdGVtLnZhbHVlKSA9PT0gTnVtYmVyKHBhaXJbMF0uc3lzdGVtLnZhbHVlKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBjb25zdCB3ZWFwb24gPSBucGMuaXRlbXMuZmlsdGVyKFxuICAgICAgICBpID0+IGkubmFtZSA9PT0gcGFpclsxXS5uYW1lICYmXG4gICAgICAgICAgaS50eXBlID09PSAnd2VhcG9uJyAmJlxuICAgICAgICAgIGkuc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UgPT09IHBhaXJbMV0uc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2VcbiAgICAgIClcbiAgICAgIGlmIChsYXN0V2VhcG9uU2tpbGxbMF0gJiYgd2VhcG9uWzBdKSB7XG4gICAgICAgIHVwZGF0ZUl0ZW1EYXRhLnB1c2goe1xuICAgICAgICAgIF9pZDogd2VhcG9uWzBdLmlkLFxuICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IGxhc3RXZWFwb25Ta2lsbFswXS5pZCxcbiAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4ubmFtZSc6IGxhc3RXZWFwb25Ta2lsbFswXS5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh1cGRhdGVJdGVtRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKCd1cGRhdGVJdGVtRGF0YTonLCB1cGRhdGVJdGVtRGF0YSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5wYy51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHVwZGF0ZUl0ZW1EYXRhKVxuICAgIH1cbiAgICByZXR1cm4gbnBjXG4gIH1cblxuICAvKipcbiAgICogYWN0b3JEYXRhLCBjb252ZXJ0IHBhcnNlQ2hhcmFjdGVyIGRhdGEgaW50byBBY3RvciBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYyBvYmplY3Qgd2l0aCB0aGUgZGF0YSBleHRyYWN0ZWQgZnJvbSB0aGUgY2hhcmFjdGVyIGFzIHJldHVybmVkIGZyb20gYHBhcnNlQ2hhcmFjdGVyYFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fSBmb3JtYXR0ZWQgQWN0b3IgZGF0YVxuICAgKi9cbiAgYWN0b3JEYXRhIChwYykge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBjaGFyYWN0ZXJpc3RpY3M6IHt9LFxuICAgICAgYXR0cmliczoge30sXG4gICAgICBpbmZvczoge30sXG4gICAgICBzcGVjaWFsOiB7fSxcbiAgICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICAgIGtlZXBlcjogJydcbiAgICAgIH0sXG4gICAgICBmbGFnczoge1xuICAgICAgICBsb2NrZWQ6IGZhbHNlLFxuICAgICAgICBkaXNwbGF5Rm9ybXVsYTogZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgJ3N0cicsXG4gICAgICAnY29uJyxcbiAgICAgICdzaXonLFxuICAgICAgJ2RleCcsXG4gICAgICAnYXBwJyxcbiAgICAgICdpbnQnLFxuICAgICAgJ3BvdycsXG4gICAgICAnZWR1J1xuICAgIF0pIHtcbiAgICAgIGlmICh0eXBlb2YgcGNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XSA9IHtcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHBjW2tleV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydzYW4nLCAnbW92JywgJ2J1aWxkJywgJ2FybW9yJywgJ2xjaycsICdocCcsICdtcCddKSB7XG4gICAgICBpZiAodHlwZW9mIHBjW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRhdGEuYXR0cmlic1trZXldID0ge1xuICAgICAgICAgIHZhbHVlOiBOdW1iZXIocGNba2V5XSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHBjLmRiICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5hdHRyaWJzLmRiID0ge1xuICAgICAgICB2YWx1ZTogcGMuZGJcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydhZ2UnLCAnb2NjdXBhdGlvbiddKSB7XG4gICAgICBpZiAodHlwZW9mIHBjW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRhdGEuaW5mb3Nba2V5XSA9IHBjW2tleV1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYy5zYW5Mb3NzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgW3Bhc3NlZCwgZmFpbGVkXSA9IHBjLnNhbkxvc3Muc3BsaXQoJy8nKVxuICAgICAgZGF0YS5zcGVjaWFsLnNhbkxvc3MgPSB7XG4gICAgICAgIGNoZWNrUGFzc2VkOiBwYXNzZWQsXG4gICAgICAgIGNoZWNrRmFpbGxlZDogZmFpbGVkXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGMuYXR0YWNrc1BlclJvdW5kICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5zcGVjaWFsLmF0dGFja3NQZXJSb3VuZCA9IE51bWJlcihwYy5hdHRhY2tzUGVyUm91bmQpXG4gICAgfVxuICAgIGRhdGEuZGVzY3JpcHRpb24ua2VlcGVyID0gcGMuZ21ub3Rlc1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdhY3RvckRhdGE6JywgZGF0YSlcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBpdGVtc0RhdGEsIGNvbnZlcnQgcGFyc2VDaGFyYWN0ZXIgZGF0YSBpbnRvIEFjdG9yIGl0ZW0gZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gcGMgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlciBhcyByZXR1cm5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybnMge09iamVjdH0gZm9ybWF0dGVkIEFjdG9yIGRhdGFcbiAgICovXG4gIGFzeW5jIGl0ZW1zRGF0YSAocGMpIHtcbiAgICBjb25zdCBpdGVtcyA9IFtdXG4gICAgdGhpcy53ZWFwb25Ta2lsbHMgPSBbXVxuICAgIC8vIFdlYXBvbiBza2lsbHNcbiAgICBpZiAodHlwZW9mIHBjLmF0dGFja3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IGF0dGFjayBvZiBwYy5hdHRhY2tzKSB7XG4gICAgICAgIGxldCBza2lsbCA9IGZhbHNlXG4gICAgICAgIGlmIChhdHRhY2suc3lzdGVtPy5za2lsbD8uaWQgIT09IHRydWUpIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMud2VhcG9uU2tpbGwoYXR0YWNrKVxuICAgICAgICAgIGl0ZW1zLnB1c2goc2tpbGwpXG4gICAgICAgIH1cbiAgICAgICAgYXR0YWNrLnN5c3RlbS5za2lsbC5pZCA9IG51bGxcbiAgICAgICAgaXRlbXMucHVzaChhdHRhY2spXG4gICAgICAgIHRoaXMud2VhcG9uU2tpbGxzLnB1c2goW3NraWxsLCBhdHRhY2tdKVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBTa2lsbHNcbiAgICBpZiAodHlwZW9mIHBjLnNraWxscyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgcGMuc2tpbGxzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgc2tpbGwubmFtZSwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgaWYgKHR5cGVvZiBza2lsbC5wdXNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBza2lsbC5wdXNoXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goZHVwbGljYXRlKGNsb25lZCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHt9XG4gICAgICAgICAgaWYgKHR5cGVvZiBza2lsbC5wdXNoICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgb3B0aW9ucy5wdXNoID0gc2tpbGwucHVzaFxuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtcy5wdXNoKENvQ0FjdG9yLmVtcHR5U2tpbGwoc2tpbGwubmFtZSwgc2tpbGwudmFsdWUsIG9wdGlvbnMpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIExhbmd1YWdlc1xuICAgIGlmICh0eXBlb2YgcGMubGFuZ3VhZ2VzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBwYy5sYW5ndWFnZXMpIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBza2lsbC5uYW1lLCB7XG4gICAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBjbG9uZWQgPSBleGlzdGluZy50b09iamVjdCgpXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5iYXNlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICBpdGVtcy5wdXNoKGR1cGxpY2F0ZShjbG9uZWQpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1zLnB1c2goXG4gICAgICAgICAgICBDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsLm5hbWUsIHNraWxsLnZhbHVlLCB7XG4gICAgICAgICAgICAgIGltZzogQ29DN0l0ZW0uaWNvbkxhbmd1YWdlLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogJ0xhbmd1YWdlJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU3BlbGxzXG4gICAgaWYgKHR5cGVvZiBwYy5zcGVsbHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IG5hbWUgb2YgcGMuc3BlbGxzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NwZWxsJywgbmFtZSwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgIGl0ZW1zLnB1c2goZHVwbGljYXRlKGNsb25lZCkpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbXMucHVzaChDb0NBY3Rvci5lbXB0eVNwZWxsKG5hbWUpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgLyoqIHdlYXBvblNraWxsIHRyaWVzIHRvIGd1ZXNzIHdoYXQga2luZCBvZiB3ZWFwb24gc2tpbGwgdG8gdXNlIGZvciB3ZWFwb24gZnJvbSBpdCdzIG5hbWVcbiAgICogQHBhcmFtIHdlYXBvbjogSlNPTiwgd2VhcG9uIGRhdGFcbiAgICovXG4gIGFzeW5jIHdlYXBvblNraWxsICh3ZWFwb24pIHtcbiAgICBsZXQgc2tpbGwgPSBudWxsXG4gICAgaWYgKHRoaXMuZ2V0UmVnRXgoJ2hhbmRndW4nKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnSGFuZGd1bicsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgSGFuZGd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgncmlmbGUnKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnUmlmbGUvU2hvdGd1bicsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnUmlmbGUnLCB7XG4gICAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICghc2tpbGwpIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsICdTaG90Z3VuJywge1xuICAgICAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIFJpZmxlIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KCdzbWInKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnU3VibWFjaGluZSBHdW4nLCB7XG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgIH0pXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIFN1Ym1hY2hpbmUgR3VuIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmdldFJlZ0V4KCdtYWNoaW5lR3VuJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ01hY2hpbmUgR3VuJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBNYWNoaW5lIEd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgnbGF1bmNoZWQnKS5leGVjKHdlYXBvbi5uYW1lKSkge1xuICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnTGF1bmNoJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBMYXVuY2ggc2tpbGw6ICR7c2tpbGx9YClcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHNraWxsICE9PSBudWxsICYmIHR5cGVvZiBza2lsbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IHNraWxsQ2xvbmUgPSBza2lsbC5jbG9uZSh7XG4gICAgICAgIHN5c3RlbToge1xuICAgICAgICAgIHZhbHVlOiB3ZWFwb24uc3lzdGVtPy5za2lsbD8uaWRcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHJldHVybiBza2lsbENsb25lXG4gICAgfVxuICAgIGNvbnN0IGZpcmVhcm1zID0gd2VhcG9uLnN5c3RlbT8ucHJvcGVydGllcz8ucm5nZFxuICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgIHdlYXBvbi5uYW1lLFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICBmaXJlYXJtc1xuICAgICAgICAgID8gJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICA6ICdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgKVxuICAgIClcbiAgICBjb25zdCBuZXdTa2lsbCA9IHtcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBuYW1lOiBwYXJ0cy5uYW1lLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHNraWxsTmFtZTogcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiB0cnVlLFxuICAgICAgICAgIGZpZ2h0aW5nOiAhZmlyZWFybXMsXG4gICAgICAgICAgZmlyZWFybTogZmlyZWFybXMsXG4gICAgICAgICAgY29tYmF0OiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGJhc2U6IHdlYXBvbi5zeXN0ZW0/LnNraWxsPy5pZCxcbiAgICAgICAgdmFsdWU6IHdlYXBvbi5zeXN0ZW0/LnNraWxsPy5pZFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgYFdlYXBvbiBza2lsbCBub3QgZm91bmQgZm9yICR7d2VhcG9uLm5hbWV9LCBjcmVhdGluZyBhIG5ldyBvbmVgLFxuICAgICAgICBuZXdTa2lsbFxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gbmV3U2tpbGxcbiAgfVxuXG4gIC8qKlxuICAgKiBuZWVkc0NvbnZlcnNpb24gZG9lcyBhbiBldmFsdWF0aW9uIHRvIHNlZSBpZiB0aGUgZ2l2ZW4gbnBjIG5lZWRzIHRvIGJlIGNvbnZlcnRlZCB0byA3dGggRWRpdGlvblxuICAgKiBSZXR1cm5zIGBmYWxzZWAgd2hlbiBhbnkgb2YgdGhlIENoYXJhY3RlcmlzdGljcyB2YWx1ZSBpdCdzIGFib3ZlIDI5XG4gICAqL1xuICBuZWVkc0NvbnZlcnNpb24gKG5wYykge1xuICAgIGxldCBuZWVkc0NvbnZlcnNpb25SZXN1bHQgPSB0cnVlXG4gICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgJ3N0cicsXG4gICAgICAnY29uJyxcbiAgICAgICdzaXonLFxuICAgICAgJ2RleCcsXG4gICAgICAnYXBwJyxcbiAgICAgICdpbnQnLFxuICAgICAgJ3BvdycsXG4gICAgICAnZWR1J1xuICAgIF0pIHtcbiAgICAgIGlmICh0eXBlb2YgbnBjW2tleV0gIT09ICd1bmRlZmluZWQnICYmIG5wY1trZXldID4gMzApIHtcbiAgICAgICAgbmVlZHNDb252ZXJzaW9uUmVzdWx0ID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ25lZWRzQ29udmVyc2lvbjonLCBuZWVkc0NvbnZlcnNpb25SZXN1bHQpXG4gICAgfVxuICAgIHJldHVybiBuZWVkc0NvbnZlcnNpb25SZXN1bHRcbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGVBY3RvciBtYWluIG1ldGhvZCB0byBjcmVhdGUgYW4gYEFjdG9yYCBmcm9tIGEgZ2l2ZSB1c2VyIGlucHV0LCB0YWtlcyBvbiBhY2NvdW50IHRoZSBsYW5nLCBlbnRpdHkgdHlwZSxcbiAgICogdGhlIGNvbnZlcnQgdG8gNyBFZGl0aW9uIGZsYWcsIGFuZCB0aGUgcmF3IGVudGl0eSBkYXRhLlxuICAgKiBAcGFyYW0ge09iamVjdH0gaW5wdXRzIGlucHV0cyBmcm9tIHRoZSBmb3JtIHRvIGNyZWF0ZSBhbiBBY3RvclxuICAgKiBAcmV0dXJucyB7QWN0b3J9IHRoZSBmb3VuZHJ5IGBBY3RvcmAgZnJvbSB0aGUgZ2l2ZW4gYGlucHV0YCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBjcmVhdGVBY3RvciAoaW5wdXRzKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NyZWF0ZUFjdG9yOicsIGlucHV0cylcbiAgICB9XG4gICAgY29uc3QgbGFuZyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UoaW5wdXRzLmxhbmcpXG4gICAgdGhpcy5rZXlzID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0S2V5cyhsYW5nKVxuICAgIHRoaXMucmVnRXggPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRSZWd1bGFyRXhwcmVzc2lvbnMobGFuZylcbiAgICB0aGlzLml0ZW1Mb2NhdGlvbnMgPSBpbnB1dHMuc291cmNlXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ1JlZ3VsYXIgRXhwcmVzc2lvbnM6JywgbGFuZywgdGhpcy5rZXlzLCB0aGlzLnJlZ0V4KVxuICAgIH1cbiAgICBsZXQgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5wYXJzZUNoYXJhY3RlcihpbnB1dHMudGV4dClcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygncGFyc2VDaGFyYWN0ZXI6JywgY2hhcmFjdGVyKVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAoaW5wdXRzLmNvbnZlcnRGcm9tNkUgPT09ICdjb2MtZ3Vlc3MnICYmXG4gICAgICAgIHRoaXMubmVlZHNDb252ZXJzaW9uKGNoYXJhY3RlcikpIHx8XG4gICAgICBpbnB1dHMuY29udmVydEZyb202RSA9PT0gJ2NvYy1jb252ZXJ0J1xuICAgICkge1xuICAgICAgY2hhcmFjdGVyID0gYXdhaXQgdGhpcy5jb252ZXJ0N0UoY2hhcmFjdGVyKVxuICAgIH1cbiAgICBjb25zdCBjaGFyYWN0ZXJEYXRhID0ge1xuICAgICAgbmFtZTogY2hhcmFjdGVyLm5hbWUsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvckRhdGEoY2hhcmFjdGVyKSxcbiAgICAgIGl0ZW1zOiBhd2FpdCB0aGlzLml0ZW1zRGF0YShjaGFyYWN0ZXIpXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBpbnB1dHMudGVzdE1vZGUgIT09ICd1bmRlZmluZWQnICYmIGlucHV0cy50ZXN0TW9kZSA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIGNoYXJhY3RlckRhdGFcbiAgICB9XG4gICAgY29uc3QgbnBjID0gYXdhaXQgdGhpcy5jcmVhdGVFbnRpdHkoY2hhcmFjdGVyRGF0YSwgaW5wdXRzLmVudGl0eSlcbiAgICByZXR1cm4gbnBjXG4gIH1cblxuICAvKipcbiAgICogY29udmVydDdFIENvbnZlcnRzIHRoZSBnaXZlbiBlbnRpdHkgZnJvbSA2IGVkaXRpb24gdG8gNyBlZGl0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB0aGUgZW50aXR5IG9iamVjdCBhcyBvYnRhaW5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybiB0aGUgc2FtZSBvYmplY3QgYnV0IHdpdGggdXBkYXRlZCBjaGFyYWN0ZXJpc3RpY3MgZm9yIDcgZWRpdGlvblxuICAgKi9cbiAgYXN5bmMgY29udmVydDdFIChjcmVhdHVyZSkge1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdDb252ZXJ0aW5nIG5wYycsIGNyZWF0dXJlKVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ3N0cicsICdjb24nLCAnc2l6JywgJ2RleCcsICdhcHAnLCAnaW50JywgJ3BvdyddKSB7XG4gICAgICBpZiAodHlwZW9mIGNyZWF0dXJlW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNyZWF0dXJlW2tleV0gKj0gNVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNyZWF0dXJlLmVkdSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChjcmVhdHVyZS5lZHUgPD0gMTgpIHtcbiAgICAgICAgY3JlYXR1cmUuZWR1ICo9IDVcbiAgICAgIH0gZWxzZSBpZiAoY3JlYXR1cmUuZWR1IDw9IDI2KSB7XG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IGNyZWF0dXJlLmVkdSArIDkwIC0gMThcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGNyZWF0dXJlLmVkdSA+PTI4XG4gICAgICAgIGNyZWF0dXJlLmVkdSA9IDk5XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY3JlYXR1cmUuZGIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoY3JlYXR1cmUuZGIgPT09ICctMWQ0Jykge1xuICAgICAgICBjcmVhdHVyZS5kYiA9IC0xXG4gICAgICB9IGVsc2UgaWYgKGNyZWF0dXJlLmRiID09PSAnLTFkNicpIHtcbiAgICAgICAgY3JlYXR1cmUuZGIgPSAtMlxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnY29udmVydDdFOiAnLCBjcmVhdHVyZSlcbiAgICB9XG4gICAgcmV0dXJuIGNyZWF0dXJlXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBGaWxlLCBGaWxlUGlja2VyLCBnYW1lLCB1aSAqL1xuZXhwb3J0IGNsYXNzIENvQzdEaXJlY3RvcnlQaWNrZXIgZXh0ZW5kcyBGaWxlUGlja2VyIHtcbiAgZ2V0IHRpdGxlICgpIHtcbiAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBpY2tEaXJlY3RvcnknKVxuICB9XG5cbiAgX29uU3VibWl0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwYXRoID0gZXZlbnQudGFyZ2V0LnRhcmdldC52YWx1ZVxuICAgIGNvbnN0IGFjdGl2ZVNvdXJjZSA9IHRoaXMuYWN0aXZlU291cmNlXG4gICAgY29uc3QgYnVja2V0ID0gZXZlbnQudGFyZ2V0LmJ1Y2tldCA/IGV2ZW50LnRhcmdldC5idWNrZXQudmFsdWUgOiBudWxsXG4gICAgdGhpcy5maWVsZC52YWx1ZSA9IENvQzdEaXJlY3RvcnlQaWNrZXIuZm9ybWF0KHtcbiAgICAgIGFjdGl2ZVNvdXJjZSxcbiAgICAgIGJ1Y2tldCxcbiAgICAgIHBhdGhcbiAgICB9KVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgc3RhdGljIERlZmF1bHREaXJlY3RvcnkgKHZhbCkge1xuICAgIHJldHVybiB2YWwgPT09IG51bGwgPyAnJyA6IFN0cmluZyh2YWwpXG4gIH1cblxuICBzdGF0aWMgZm9ybWF0ICh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5idWNrZXQgIT09IG51bGxcbiAgICAgID8gYFske3ZhbHVlLmFjdGl2ZVNvdXJjZX06JHt2YWx1ZS5idWNrZXR9XSAke3ZhbHVlLnBhdGh9YFxuICAgICAgOiBgWyR7dmFsdWUuYWN0aXZlU291cmNlfV0gJHt2YWx1ZS5wYXRofWBcbiAgfVxuXG4gIHN0YXRpYyBwYXJzZSAocmF3KSB7XG4gICAgY29uc3Qgc3RyID0gcmF3ID8/ICcnXG4gICAgY29uc3QgbWF0Y2hlcyA9IHN0ci5tYXRjaCgvXlxcWyhbXjpdKykoOiguKykpP1xcXVxccyooLispPyQvdSlcblxuICAgIGlmIChtYXRjaGVzKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBhY3RpdmVTb3VyY2U6IG1hdGNoZXNbMV0sXG4gICAgICAgIGJ1Y2tldDogbWF0Y2hlc1szXSA/PyAnJyxcbiAgICAgICAgY3VycmVudDogbWF0Y2hlc1s0XVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgYWN0aXZlU291cmNlOiAnZGF0YScsXG4gICAgICBidWNrZXQ6IG51bGwsXG4gICAgICBjdXJyZW50OiBzdHJcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcHJvY2Vzc0h0bWwgKGh0bWwpIHtcbiAgICAkKGh0bWwpXG4gICAgICAuZmluZCgnaW5wdXRbZGF0YS1kdHlwZT1cIkRlZmF1bHREaXJlY3RvcnlcIl0nKVxuICAgICAgLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gJChlbClcbiAgICAgICAgaW5wdXQucHJvcCgncmVhZG9ubHknLCB0cnVlKVxuICAgICAgICBpZiAoIWlucHV0Lm5leHQoKS5sZW5ndGgpIHtcbiAgICAgICAgICBjb25zdCBwaWNrZXIgPSBuZXcgQ29DN0RpcmVjdG9yeVBpY2tlcih7XG4gICAgICAgICAgICBmaWVsZDogaW5wdXRbMF0sXG4gICAgICAgICAgICAuLi5Db0M3RGlyZWN0b3J5UGlja2VyLnBhcnNlKGlucHV0LnZhbCgpKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgY29uc3QgcGlja2VyQnV0dG9uID0gJChcbiAgICAgICAgICAgICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImZpbGUtcGlja2VyXCIgdGl0bGU9XCInICtcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBpY2tEaXJlY3RvcnknKSArXG4gICAgICAgICAgICAgICdcIj48aSBjbGFzcz1cImZhcyBmYS1maWxlLWltcG9ydCBmYS1md1wiPjwvaT48L2J1dHRvbj4nXG4gICAgICAgICAgKVxuICAgICAgICAgIENvQzdEaXJlY3RvcnlQaWNrZXIuY3JlYXRlRGVmYXVsdERpcmVjdG9yeSgpXG4gICAgICAgICAgcGlja2VyQnV0dG9uLm9uKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHBpY2tlci5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIGlucHV0LnBhcmVudCgpLmFwcGVuZChwaWNrZXJCdXR0b24pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAkKGh0bWwpLmZpbmQoJ29sLmZpbGVzLWxpc3QnKS5yZW1vdmUoKVxuICAgICQoaHRtbCkuZmluZCgnZm9vdGVyIGRpdicpLnJlbW92ZSgpXG4gICAgJChodG1sKS5maW5kKCdmb290ZXIgYnV0dG9uJykudGV4dChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGlja0RpcmVjdG9yeScpKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZURlZmF1bHREaXJlY3RvcnkgKCkge1xuICAgIGNvbnN0IHBhcnNlZCA9IENvQzdEaXJlY3RvcnlQaWNrZXIucGFyc2UoXG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaG9sZVVwbG9hZERpcmVjdG9yeScpXG4gICAgKVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBDb0M3RGlyZWN0b3J5UGlja2VyLmNyZWF0ZURpcmVjdG9yeShcbiAgICAgICAgcGFyc2VkLmFjdGl2ZVNvdXJjZSxcbiAgICAgICAgcGFyc2VkLmN1cnJlbnQsXG4gICAgICAgIHsgYnVja2V0OiBwYXJzZWQuYnVja2V0IH1cbiAgICAgIClcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKCFlLnN0YXJ0c1dpdGgoJ0VFWElTVCcpKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXJVcGxvYWRFcnJvcicpXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeSAoZmlsZSwgZmlsZW5hbWUpIHtcbiAgICBjb25zdCBwYXJzZWQgPSBDb0M3RGlyZWN0b3J5UGlja2VyLnBhcnNlKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGhvbGVVcGxvYWREaXJlY3RvcnknKVxuICAgIClcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEZpbGVQaWNrZXIudXBsb2FkKFxuICAgICAgcGFyc2VkLmFjdGl2ZVNvdXJjZSxcbiAgICAgIHBhcnNlZC5jdXJyZW50LFxuICAgICAgbmV3IEZpbGUoW2ZpbGVdLCBmaWxlbmFtZSwge1xuICAgICAgICB0eXBlOiAnaW1hZ2UvcG5nJ1xuICAgICAgfSksXG4gICAgICB7IGJ1Y2tldDogcGFyc2VkLmJ1Y2tldCB9XG4gICAgKVxuICAgIGlmICghcmVzcG9uc2UucGF0aCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlsZVVwbG9hZEVycm9yJykpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZC5jdXJyZW50ICsgJy8nICsgZmlsZW5hbWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDT05GSUcsIGR1cGxpY2F0ZSwgZ2FtZSwgdWksIGZldGNoICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdEaXJlY3RvcnlQaWNrZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogQ29DN0FjdG9ySW1wb3J0ZXIgaGVscGVyIGNsYXNzIHRvIGltcG9ydCBhbiBBY3RvciBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlciB7XG4gIC8qKlxuICAgKiBDb21wb3NlIHRoZSBCYWNrc3RvcnkgZnJvbSB0aGUgZGlmZmVyZW50IGJsb2Nrcy5cbiAgICogQHBhcmFtIHt9IGJhY2tzdG9yeUpTT04gRGhvbGVIb3VzZSBiYWNrc3RvcnkgSlNPTlxuICAgKiBAcmV0dXJucyBIVE1MIHdpdGggdGhlIGZvcm1hdHRlZCBiYWNrc3RvcnlcbiAgICovXG4gIHN0YXRpYyBnZXRCYWNrc3RvcnkgKGJhY2tzdG9yeUpTT04pIHtcbiAgICBjb25zdCBzZWN0aW9ucyA9IFtcbiAgICAgIFsnZGVzY3JpcHRpb24nLCAnRGVzY3JpcHRpb24nXSxcbiAgICAgIFsndHJhaXRzJywgJ1RyYWl0cyddLFxuICAgICAgWydpZGVvbG9neScsICdJZGVvbG9neSddLFxuICAgICAgWydpbmp1cnVlcycsICdJbmp1cmllcycsICdpbmp1cmllcyddLFxuICAgICAgWydwZW9wbGUnLCAnUGVvcGxlJ10sXG4gICAgICBbJ3Bob2JpYXMnLCAnUGhvYmlhcyddLFxuICAgICAgWydsb2NhdGlvbnMnLCAnTG9jYXRpb25zJ10sXG4gICAgICBbJ3RvbWVzJywgJ1RvbWVzJ10sXG4gICAgICBbJ3Bvc3Nlc3Npb25zJywgJ1Bvc3Nlc3Npb25zJ10sXG4gICAgICBbJ2VuY291bnRlcnMnLCAnRW5jb3VudGVycyddXG4gICAgXVxuICAgIGNvbnN0IGJhY2tzdG9yeSA9IHtcbiAgICAgIGJsb2NrOiBbXSxcbiAgICAgIHNlY3Rpb25zOiBbXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNlY3Rpb24gb2Ygc2VjdGlvbnMpIHtcbiAgICAgIGlmIChiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VjdGlvblsyXSA9PT0gJ3VuZGVmaW5lZCcgfHwgc2VjdGlvblsyXSA9PT0gJycpIHtcbiAgICAgICAgICBzZWN0aW9uWzJdID0gc2VjdGlvblswXVxuICAgICAgICB9XG4gICAgICAgIGJhY2tzdG9yeS5ibG9jay5wdXNoKFxuICAgICAgICAgIGA8aDM+JHtzZWN0aW9uWzFdfTwvaDM+XFxuPGRpdiBjbGFzcz1cIiR7c2VjdGlvblsyXX1cIj5cXG4ke1xuICAgICAgICAgICAgYmFja3N0b3J5SlNPTltzZWN0aW9uWzBdXVxuICAgICAgICAgIH1cXG48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgYmFja3N0b3J5LnNlY3Rpb25zLnB1c2goe1xuICAgICAgICAgIHRpdGxlOiBzZWN0aW9uWzFdLFxuICAgICAgICAgIHZhbHVlOiBiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGJhY2tzdG9yeS5ibG9jayA9XG4gICAgICAnPGgyPkJhY2tzdG9yeTwvaDI+XFxuJyArIGJhY2tzdG9yeS5ibG9jay5qb2luKCdcXG4nLCBiYWNrc3RvcnkuYmxvY2spXG4gICAgcmV0dXJuIGJhY2tzdG9yeVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SlNPTn0gZGhvbGVIb3VzZURhdGEgRGhvbGVIb3VzZUpTT05cbiAgICogQHJldHVybnNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEgKGRob2xlSG91c2VEYXRhLCBvcHRpb25zKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTb3VyY2U6JywgZGhvbGVIb3VzZURhdGEpXG4gICAgfVxuICAgIGRob2xlSG91c2VEYXRhID0gZGhvbGVIb3VzZURhdGEuSW52ZXN0aWdhdG9yXG4gICAgY29uc3QgYmFja3N0b3JpZXMgPSBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZ2V0QmFja3N0b3J5KFxuICAgICAgZGhvbGVIb3VzZURhdGEuQmFja3N0b3J5XG4gICAgKVxuICAgIGNvbnN0IGNEYXRhID0ge1xuICAgICAgbmFtZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLk5hbWUsXG4gICAgICBhY3Rvcjoge1xuICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IHtcbiAgICAgICAgICBzdHI6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TVFIsIDEwKSB9LFxuICAgICAgICAgIGNvbjogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkNPTiwgMTApIH0sXG4gICAgICAgICAgc2l6OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU0laLCAxMCkgfSxcbiAgICAgICAgICBkZXg6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5ERVgsIDEwKSB9LFxuICAgICAgICAgIGFwcDogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkFQUCwgMTApIH0sXG4gICAgICAgICAgaW50OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSU5ULCAxMCkgfSxcbiAgICAgICAgICBwb3c6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5QT1csIDEwKSB9LFxuICAgICAgICAgIGVkdTogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkVEVSwgMTApIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXR0cmliczoge1xuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TYW5pdHksIDEwKSxcbiAgICAgICAgICAgIG1heDogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlNhbml0eU1heCwgMTApLFxuICAgICAgICAgICAgZGFpbHlMaW1pdDogTWF0aC5mbG9vcihkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU2FuaXR5IC8gNSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhwOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkhpdFB0cywgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSGl0UHRzTWF4LCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1wOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLk1hZ2ljUHRzLCAxMCksXG4gICAgICAgICAgICBtYXg6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5NYWdpY1B0c01heCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTHVjaywgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtb3Y6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTW92ZSwgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTW92ZSwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYjogeyB2YWx1ZTogZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkRhbWFnZUJvbnVzIH0sXG4gICAgICAgICAgYnVpbGQ6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5CdWlsZCwgMTApIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5mb3M6IHtcbiAgICAgICAgICBvY2N1cGF0aW9uOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuT2NjdXBhdGlvbixcbiAgICAgICAgICBhZ2U6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5BZ2UsXG4gICAgICAgICAgc2V4OiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuR2VuZGVyLFxuICAgICAgICAgIHJlc2lkZW5jZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLlJlc2lkZW5jZSxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuQmlydGhwbGFjZVxuICAgICAgICB9LFxuICAgICAgICBiYWNrc3Rvcnk6IGJhY2tzdG9yaWVzLmJsb2NrLFxuICAgICAgICBiaW9ncmFwaHk6IGJhY2tzdG9yaWVzLnNlY3Rpb25zLFxuICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgIGtlZXBlcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRob2xlSG91c2VBY3RvckltcG9ydGVyU291cmNlJylcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNraWxsczogYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmV4dHJhY3RTa2lsbHMoXG4gICAgICAgIGRob2xlSG91c2VEYXRhLlNraWxscy5Ta2lsbCA/PyBbXSxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKSxcbiAgICAgIHBvc3Nlc2lvbnM6IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0UG9zc2Vzc2lvbnMoXG4gICAgICAgIGRob2xlSG91c2VEYXRhLlBvc3Nlc3Npb25zPy5pdGVtID8/IFtdLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBjRGF0YVxuICB9XG5cbiAgc3RhdGljIG1ha2VTa2lsbE5hbWUgKG5hbWUsIHNwZWNpYWxpemF0aW9uKSB7XG4gICAgaWYgKHNwZWNpYWxpemF0aW9uID09PSAnTm9uZScpIHtcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gJ0FueSdcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdMYW5ndWFnZSAoT3RoZXIpJyB8fCBuYW1lID09PSAnTGFuZ3VhZ2UgKE93biknKSB7XG4gICAgICBuYW1lID0gJ0xhbmd1YWdlJ1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ09wZXJhdGUgSGVhdnkgTWFjaGluZScpIHtcbiAgICAgIG5hbWUgPSAnT3BlcmF0ZSBIZWF2eSBNYWNoaW5lcnknXG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnVGhyb3cnICYmIHNwZWNpYWxpemF0aW9uID09PSAnJykge1xuICAgICAgbmFtZSA9ICdGaWdodGluZydcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gJ1Rocm93J1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc2tpbGxOYW1lOiBzcGVjaWFsaXphdGlvbiA9PT0gJycgPyBuYW1lIDogc3BlY2lhbGl6YXRpb24sXG4gICAgICBzcGVjaWFsaXphdGlvbjogc3BlY2lhbGl6YXRpb24gPT09ICcnID8gJycgOiBuYW1lLFxuICAgICAgbmFtZTogbmFtZSArIChzcGVjaWFsaXphdGlvbiA9PT0gJycgPyAnJyA6ICcgKCcgKyBzcGVjaWFsaXphdGlvbiArICcpJylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZXh0cmFjdFNraWxscyAoZGhvbGVIb3VzZXNraWxscywgb3B0aW9ucykge1xuICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiBkaG9sZUhvdXNlc2tpbGxzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHNraWxsLnN1YnNraWxsID09PSAnTm9uZScgJiZcbiAgICAgICAgc2tpbGwudmFsdWUgPT09ICcxJyAmJlxuICAgICAgICBza2lsbC5oYWxmID09PSAnMCcgJiZcbiAgICAgICAgc2tpbGwuZmlmdGggPT09ICcwJ1xuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0cyA9IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5tYWtlU2tpbGxOYW1lKFxuICAgICAgICBza2lsbC5uYW1lLFxuICAgICAgICBza2lsbC5zdWJza2lsbCA/PyAnJ1xuICAgICAgKVxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBwYXJ0cy5uYW1lLCB7XG4gICAgICAgIHNvdXJjZTogb3B0aW9ucy5zb3VyY2UsXG4gICAgICAgIGZhbGxiYWNrQW55OiB0cnVlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxuICAgICAgICBjbG9uZWQubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9uZWQgPSBDb0NBY3Rvci5lbXB0eVNraWxsKFxuICAgICAgICAgIHBhcnRzLnNraWxsTmFtZSxcbiAgICAgICAgICBwYXJzZUludChza2lsbC52YWx1ZSA/PyAwLCAxMCksXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246XG4gICAgICAgICAgICAgIHBhcnRzLnNwZWNpYWxpemF0aW9uID09PSAnJyA/IGZhbHNlIDogcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID0gY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID8/IHt9XG4gICAgICAgIGlmIChwYXJ0cy5zcGVjaWFsaXphdGlvbiA9PT0gJ0ZpZ2h0aW5nJykge1xuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyA9IHRydWVcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID0gdHJ1ZVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5wdXNoID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIGlmIChwYXJ0cy5zcGVjaWFsaXphdGlvbiA9PT0gJ0ZpcmVhcm1zJykge1xuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtID0gdHJ1ZVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPSB0cnVlXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKHBhcnRzLnNraWxsTmFtZSA9PT0gJ0RvZGdlJykge1xuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5wdXNoID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNsb25lZC5zeXN0ZW0uc2tpbGxOYW1lID09PSAnQW55Jykge1xuICAgICAgICBjbG9uZWQubmFtZSA9IGNsb25lZC5uYW1lLnJlcGxhY2UoJyAoQW55KScsICcgKE5vbmUpJylcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5za2lsbE5hbWUgPSAnTm9uZSdcbiAgICAgIH1cbiAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHBhcnNlSW50KHNraWxsLnZhbHVlID8/IDAsIDEwKVxuICAgICAgY2xvbmVkLnN5c3RlbS52YWx1ZSA9IHBhcnNlSW50KHNraWxsLnZhbHVlID8/IDAsIDEwKVxuICAgICAgY2xvbmVkLnN5c3RlbS5mbGFncyA9IGNsb25lZC5zeXN0ZW0uZmxhZ3MgPz8ge31cbiAgICAgIGNsb25lZC5zeXN0ZW0uZmxhZ3Mub2NjdXBhdGlvbiA9XG4gICAgICAgIHNraWxsLm9jY3VwYXRpb24gPT09IHRydWUgfHwgc2tpbGwub2NjdXBhdGlvbiA9PT0gJ3RydWUnXG4gICAgICBza2lsbHMucHVzaChjbG9uZWQpXG4gICAgfVxuICAgIHJldHVybiBza2lsbHNcbiAgfVxuXG4gIHN0YXRpYyBmaW5kV2VhcG9uU2tpbGxJZCAoc2tpbGxOYW1lLCBjaGFyYWN0ZXIpIHtcbiAgICBjb25zdCBza2lsbHMgPSBjaGFyYWN0ZXIuZ2V0RW1iZWRkZWRDb2xsZWN0aW9uKCdJdGVtJylcbiAgICBjb25zdCBjaGVja05hbWUgPSBza2lsbE5hbWUucmVwbGFjZSgvXlxcKCguKylcXCkkLywgJyQxJylcbiAgICBjb25zdCBjaGFyYWN0ZXJTa2lsbCA9IHNraWxscy5maW5kKGkgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgaS5zeXN0ZW0/LnNraWxsTmFtZSA9PT0gY2hlY2tOYW1lIHx8XG4gICAgICAgIGkuc3lzdGVtPy5za2lsbE5hbWU/LmluZGV4T2YoY2hlY2tOYW1lKSA+IC0xXG4gICAgICApXG4gICAgfSlcbiAgICByZXR1cm4gY2hhcmFjdGVyU2tpbGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBleHRyYWN0UG9zc2Vzc2lvbnMgKGRob2xlaG91c2VQb3NzZXNzaW9ucywgb3B0aW9ucykge1xuICAgIGNvbnN0IGl0ZW1zID0gW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGhvbGVob3VzZVBvc3Nlc3Npb25zKSB7XG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdpdGVtJywgaXRlbS5kZXNjcmlwdGlvbiwge1xuICAgICAgICBzb3VyY2U6IG9wdGlvbnMuc291cmNlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xvbmVkID0ge1xuICAgICAgICAgIG5hbWU6IGl0ZW0uZGVzY3JpcHRpb24sXG4gICAgICAgICAgdHlwZTogJ2l0ZW0nXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGl0ZW1zLnB1c2goY2xvbmVkKVxuICAgIH1cbiAgICByZXR1cm4gaXRlbXNcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBleHRyYWN0V2VhcG9ucyAoZGhvbGVob3VzZVdlYXBvbnMsIGNoYXJhY3Rlciwgb3B0aW9ucykge1xuICAgIGNvbnN0IHdlYXBvbnMgPSBbXVxuICAgIGlmICghQXJyYXkuaXNBcnJheShkaG9sZWhvdXNlV2VhcG9ucykpIHtcbiAgICAgIGRob2xlaG91c2VXZWFwb25zID0gW2Rob2xlaG91c2VXZWFwb25zXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHdlYXBvbiBvZiBkaG9sZWhvdXNlV2VhcG9ucykge1xuICAgICAgY29uc3Qgc2tpbGwgPSBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZmluZFdlYXBvblNraWxsSWQoXG4gICAgICAgIHdlYXBvbi5za2lsbG5hbWUsXG4gICAgICAgIGNoYXJhY3RlclxuICAgICAgKVxuICAgICAgY29uc3QgZGFtYWdlID0gd2VhcG9uLmRhbWFnZS5yZXBsYWNlKC9cXCtEQi9pLCAnJylcbiAgICAgIGNvbnN0IGFkZGIgPSBkYW1hZ2UgIT09IHdlYXBvbi5kYW1hZ2VcbiAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3dlYXBvbicsIHdlYXBvbi5uYW1lLCB7XG4gICAgICAgIHNvdXJjZTogb3B0aW9ucy5zb3VyY2VcbiAgICAgIH0pXG4gICAgICBsZXQgY2xvbmVkID0gbnVsbFxuICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY2xvbmVkID0gZHVwbGljYXRlKGV4aXN0aW5nLnRvT2JqZWN0KCkpXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lID0gc2tpbGw/Lm5hbWUgPz8gJydcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5za2lsbC5tYWluLmlkID0gc2tpbGw/LmlkID8/ICcnXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucmFuZ2UgPSBjbG9uZWQuc3lzdGVtLnJhbmdlID8/IHt9XG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsID0gY2xvbmVkLnN5c3RlbS5yYW5nZS5ub3JtYWwgPz8ge31cbiAgICAgICAgY2xvbmVkLnN5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlID0gZGFtYWdlXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uYW1tbyA9IHdlYXBvbi5hbW1vXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ubWFsZnVuY3Rpb24gPSB3ZWFwb24ubWFsZlxuICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPSBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMgPz8ge31cbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlID1cbiAgICAgICAgICBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpZ2h0aW5nID8/IGZhbHNlXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5ybmdkID1cbiAgICAgICAgICBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpcmVhcm0gPz8gZmFsc2VcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLmFkZGIgPSBhZGRiXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9uZWQgPSB7XG4gICAgICAgICAgbmFtZTogd2VhcG9uLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICAgICAgc3lzdGVtOiB7XG4gICAgICAgICAgICBza2lsbDoge1xuICAgICAgICAgICAgICBtYWluOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogc2tpbGw/Lm5hbWUgPz8gJycsXG4gICAgICAgICAgICAgICAgaWQ6IHNraWxsPy5pZCA/PyAnJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgbm9ybWFsOiB7XG4gICAgICAgICAgICAgICAgZGFtYWdlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbW1vOiB3ZWFwb24uYW1tbyxcbiAgICAgICAgICAgIG1hbGZ1bmN0aW9uOiB3ZWFwb24ubWFsZixcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgbWVsZWU6IHNraWxsPy5zeXN0ZW0ucHJvcGVydGllcz8uZmlnaHRpbmcgPz8gZmFsc2UsXG4gICAgICAgICAgICAgIHJuZ2Q6IHNraWxsPy5zeXN0ZW0ucHJvcGVydGllcz8uZmlyZWFybSA/PyBmYWxzZSxcbiAgICAgICAgICAgICAgYWRkYlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd2VhcG9ucy5wdXNoKGNsb25lZClcbiAgICB9XG4gICAgcmV0dXJuIHdlYXBvbnNcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzYXZlUG9ydHJhaXQgKGJhc2U2NFBvcnRyYWl0LCBmaWxlTmFtZSkge1xuICAgIGNvbnN0IGJhc2U2NFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LCcgKyBiYXNlNjRQb3J0cmFpdFxuICAgIClcbiAgICBjb25zdCBpbWFnZUJsb2IgPSBhd2FpdCBiYXNlNjRSZXNwb25zZS5ibG9iKClcbiAgICBjb25zdCBmaWxlUGF0aCA9IENvQzdEaXJlY3RvcnlQaWNrZXIudXBsb2FkVG9EZWZhdWx0RGlyZWN0b3J5KFxuICAgICAgaW1hZ2VCbG9iLFxuICAgICAgZmlsZU5hbWVcbiAgICApXG4gICAgcmV0dXJuIGZpbGVQYXRoXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlTlBDRnJvbURob2xlSG91c2UgKGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLCBvcHRpb25zKSB7XG4gICAgaWYgKCFnYW1lLnVzZXI/LmNhbignRklMRVNfVVBMT0FEJykpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyVXBsb2FkRXJyb3InKVxuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGNoYXJhY3RlckRhdGEgPVxuICAgICAgYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmNvbnZlcnREaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YShcbiAgICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEsXG4gICAgICAgIG9wdGlvbnNcbiAgICAgIClcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5sb2coJ0NoYXJhY3RlciBEYXRhOicsIGNoYXJhY3RlckRhdGEpXG4gICAgfVxuICAgIGNvbnN0IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciA9XG4gICAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLmNyZWF0ZUltcG9ydENoYXJhY3RlcnNGb2xkZXJJZk5vdEV4aXN0cygpXG4gICAgaWYgKCFDb0M3RGlyZWN0b3J5UGlja2VyLmNyZWF0ZURlZmF1bHREaXJlY3RvcnkoKSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHtcbiAgICAgIG5hbWU6IGNoYXJhY3RlckRhdGEubmFtZSxcbiAgICAgIHR5cGU6ICdjaGFyYWN0ZXInLFxuICAgICAgZm9sZGVyOiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIuaWQsXG4gICAgICBkYXRhOiBjaGFyYWN0ZXJEYXRhLmFjdG9yXG4gICAgfVxuICAgIGNvbnN0IG5wYyA9IGF3YWl0IEFjdG9yLmNyZWF0ZShhY3RvckRhdGEpXG4gICAgLy8gSWYgcG9zc2libGUgdXBsb2FkIHRoZSBpbWFnZSBwb3J0cmFpdFxuICAgIGlmIChcbiAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLkludmVzdGlnYXRvci5QZXJzb25hbERldGFpbHMuUG9ydHJhaXQ/Lmxlbmd0aCA+IDEwXG4gICAgKSB7XG4gICAgICBjb25zdCBmaWxlTmFtZSA9ICdhdmF0YXItJyArIG5wYy5pZCArICcucG5nJ1xuICAgICAgY29uc3QgcG9ydHJhaXQgPSBhd2FpdCBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuc2F2ZVBvcnRyYWl0KFxuICAgICAgICBkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YS5JbnZlc3RpZ2F0b3IuUGVyc29uYWxEZXRhaWxzLlBvcnRyYWl0LFxuICAgICAgICBmaWxlTmFtZVxuICAgICAgKVxuICAgICAgaWYgKHBvcnRyYWl0ICE9PSBmYWxzZSkge1xuICAgICAgICBucGMudXBkYXRlKHtcbiAgICAgICAgICBpbWc6IHBvcnRyYWl0XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmxvZygnSXRlbXM6ICcsIGNoYXJhY3RlckRhdGEuaXRlbXMpXG4gICAgfVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGNoYXJhY3RlckRhdGEuc2tpbGxzLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICAgIGF3YWl0IG5wYy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIGNoYXJhY3RlckRhdGEucG9zc2VzaW9ucywge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgICBjb25zdCB3ZWFwb25zID0gYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmV4dHJhY3RXZWFwb25zKFxuICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEuSW52ZXN0aWdhdG9yLldlYXBvbnM/LndlYXBvbiA/PyBbXSxcbiAgICAgIG5wYyxcbiAgICAgIG9wdGlvbnNcbiAgICApXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdXZWFwb25zOiAnLCB3ZWFwb25zKVxuICAgIH1cbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCB3ZWFwb25zLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuXG4gICAgcmV0dXJuIG5wY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBGb3JtQXBwbGljYXRpb24sIGdhbWUsIEhvb2tzLCBtZXJnZU9iamVjdCwgdWksIEZpbGVSZWFkZXIgKi9cblxuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXIgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyIH0gZnJvbSAnLi9kaG9sZWhvdXNlX2ltcG9ydGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAgfSBmcm9tICcuL2FjdG9yLWltcG9ydGVyLXJlZ2V4cC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2FjdG9yLWltcG9ydGVyJ10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXInKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2FjdG9yLWltcG9ydGVyLmh0bWwnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICB3aWR0aDogNjAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICB9KVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLmltcG9ydFR5cGUgPSBkYXRhLm9iamVjdC5pbXBvcnRUeXBlXG4gICAgZGF0YS5jb252ZXJ0NkUgPSBkYXRhLm9iamVjdC5jb252ZXJ0NkVcbiAgICBkYXRhLnNvdXJjZSA9IGRhdGEub2JqZWN0LnNvdXJjZVxuICAgIGRhdGEuY2hhcmFjdGVyRGF0YSA9IGRhdGEub2JqZWN0LmNoYXJhY3RlckRhdGFcbiAgICBkYXRhLmNhblVwbG9hZCA9IGdhbWUudXNlcj8uY2FuKCdGSUxFU19VUExPQUQnKVxuICAgIGlmIChbJ25wYycsICdjcmVhdHVyZSddLmluY2x1ZGVzKGRhdGEuaW1wb3J0VHlwZSkpIHtcbiAgICAgIGRhdGEubGFuZ3VhZ2VzID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0VHJhbnNsYXRpb25zKClcbiAgICAgIGRhdGEubGFuZ3VhZ2UgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKFxuICAgICAgICBkYXRhLm9iamVjdC5sYW5ndWFnZVxuICAgICAgKVxuICAgICAgZGF0YS5wbGFjZWhvbGRlciA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEV4YW1wbGVUZXh0KGRhdGEubGFuZ3VhZ2UpXG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnI2Rob2xlaG91c2UtY2hhcmFjdGVyLXByZXZpZXcnKS5oaWRlKClcbiAgICBodG1sXG4gICAgICAuZmluZCgnI2NvYy1lbnRpdHktdHlwZSwjY29jLWVudGl0eS1sYW5nJylcbiAgICAgIC5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnI2Rob2xlaG91c2UtanNvbi1maWxlLXBpY2tlcicpXG4gICAgICAuY2hhbmdlKHRoaXMuX29uSlNPTkZpbGVTZWxlY3RlZC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJyNjb2MtcGFzdGVkLWNoYXJhY3Rlci1kYXRhJylcbiAgICAgIC5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBjb25zdCBjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQgPSAkKHRoaXMpXG4gICAgICAgICAgLnZhbCgpXG4gICAgICAgICAgLm1hdGNoKC9bXFx1ZGJjMC1cXHVkYmZlXVtcXHVkYzAwLVxcdWRmZmZdLylcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gJCgnI2NvYy1wcm9tcHQnKVxuICAgICAgICBpZiAocHJvbXB0LmRhdGEoJ2V4dGVuZGVkJykgJiYgY2hhcmFjdGVyc1Rvb0V4dGVuZGVkKSB7XG4gICAgICAgICAgcHJvbXB0XG4gICAgICAgICAgICAuaHRtbChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVGV4dEZpZWxkSW52YWxpZENoYXJhY3RlcnMnKSlcbiAgICAgICAgICAgIC5hZGRDbGFzcygnZXJyb3InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb21wdC5odG1sKHByb21wdC5kYXRhKCd0ZXh0JykpLnJlbW92ZUNsYXNzKCdlcnJvcicpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAudHJpZ2dlcigna2V5dXAnKVxuXG4gICAgaHRtbC5maW5kKCcuc3VibWl0LWJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQ2xpY2tTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2Zvcm0nKS5zdWJtaXQoZSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm5zIGdldElucHV0cyBleHRyYWN0cyB0aGUgZGF0YSBmcm9tIHRoZSBpbnB1dCBmaWVsZHMgYW5kXG4gICAqIGFkZHMgYSBgLmAgYXQgdGhlIGVuZCBpZiBpdCdzIG5vdCBhbHJlYWR5IHRoZXJlLlxuICAgKi9cbiAgc3RhdGljIGdldElucHV0cyAoZm9ybSkge1xuICAgIGNvbnN0IGlucHV0cyA9IHt9XG4gICAgaW5wdXRzLmVudGl0eSA9IGZvcm0uZmluZCgnI2NvYy1lbnRpdHktdHlwZScpLnZhbCgpLnRyaW0oKVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdlbnRpdHkgdHlwZTonLCBpbnB1dHMuZW50aXR5KVxuICAgIH1cbiAgICBpZiAoZm9ybS5maW5kKCcjY29jLWNvbnZlcnQtNkUnKS5sZW5ndGggPiAwKSB7XG4gICAgICBpbnB1dHMuY29udmVydEZyb202RSA9IGZvcm0uZmluZCgnI2NvYy1jb252ZXJ0LTZFJykudmFsKCkudHJpbSgpXG4gICAgfVxuICAgIGlmIChmb3JtLmZpbmQoJyNjb2MtZW50aXR5LWxhbmcnKS5sZW5ndGggPiAwKSB7XG4gICAgICBpbnB1dHMubGFuZyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmNoZWNrTGFuZ3VhZ2UoXG4gICAgICAgIGZvcm0uZmluZCgnI2NvYy1lbnRpdHktbGFuZycpLnZhbCgpLnRyaW0oKVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoZm9ybS5maW5kKCcjc291cmNlJykubGVuZ3RoID4gMCkge1xuICAgICAgaW5wdXRzLnNvdXJjZSA9IGZvcm0uZmluZCgnI3NvdXJjZScpLnZhbCgpLnRyaW0oKVxuICAgIH1cbiAgICBpZiAoZm9ybS5maW5kKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlucHV0cy50ZXh0ID0gZm9ybS5maW5kKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpLnZhbCgpLnRyaW0oKVxuICAgIH1cblxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdyZWNlaXZlZCB0ZXh0JywgJyMjJyArIGlucHV0cy50ZXh0ICsgJyMjJylcbiAgICB9XG4gICAgcmV0dXJuIGlucHV0c1xuICB9XG5cbiAgX29uSlNPTkZpbGVTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBjb25zdCBqc29uRmlsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rob2xlaG91c2UtanNvbi1maWxlLXBpY2tlcicpXG4gICAgY29uc3QgcG9ydHJhaXRJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgJ2Rob2xlaG91c2UtY2hhcmFjdGVyLXBvcnRyYWl0J1xuICAgIClcbiAgICBjb25zdCBjaGFyYWN0ZXJOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rob2xlaG91c2UtY2hhcmFjdGVyLW5hbWUnKVxuICAgIGNvbnN0IHByZXZpZXcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGhvbGVob3VzZS1jaGFyYWN0ZXItcHJldmlldycpXG4gICAgY29uc3QgZmlsZSA9IGpzb25GaWxlSW5wdXQuZmlsZXNbMF1cbiAgICBjb25zdCBkaWFsb2cgPSB0aGlzXG4gICAgY29uc3QgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBkaWFsb2cuY2hhcmFjdGVySlNPTiA9IEpTT04ucGFyc2UoZmlsZVJlYWRlci5yZXN1bHQpXG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICQoJyNjb2MtcHJvbXB0JylcbiAgICAgICAgICAuaHRtbChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVGV4dEZpZWxkSW52YWxpZEpTT04nKSlcbiAgICAgICAgICAuYWRkQ2xhc3MoJ2Vycm9yJylcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGNvbnN0IHBlcnNvbmFsRGV0YWlscyA9XG4gICAgICAgIGRpYWxvZy5jaGFyYWN0ZXJKU09OPy5JbnZlc3RpZ2F0b3I/LlBlcnNvbmFsRGV0YWlsc1xuICAgICAgaWYgKCFwZXJzb25hbERldGFpbHMpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRGhvbGVIb3VzZUludmFsaWRBY3RvcicpXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjaGFyYWN0ZXJOYW1lLnRleHRDb250ZW50ID0gcGVyc29uYWxEZXRhaWxzLk5hbWVcbiAgICAgIHBvcnRyYWl0SW1hZ2Uuc3JjID0gJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgcGVyc29uYWxEZXRhaWxzLlBvcnRyYWl0XG4gICAgICBwcmV2aWV3LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAkKCcuZGlhbG9nLmFjdG9yLWltcG9ydGVyJykuaGVpZ2h0KCdhdXRvJylcbiAgICB9XG4gICAgZmlsZVJlYWRlci5yZWFkQXNUZXh0KGZpbGUpXG4gIH1cblxuICBfb25DaGFuZ2VTdWJtaXQgKGV2ZW50KSB7XG4gICAgdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gIH1cblxuICBhc3luYyBfb25DbGlja1N1Ym1pdCAoZXZlbnQpIHtcbiAgICBjb25zdCBpZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5idXR0b25cbiAgICBpZiAoaWQgPT09ICdubycpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH0gZWxzZSBpZiAoaWQgPT09ICdnZXRFeGFtcGxlTm93Jykge1xuICAgICAgY29uc3QgY29udGVudCA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEV4YW1wbGVUZXh0KFxuICAgICAgICB0aGlzLm9iamVjdC5sYW5ndWFnZVxuICAgICAgKVxuICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQoY29udGVudCkudGhlbigoKSA9PiB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvcGllZCcpKVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGlkID09PSAnaW1wb3J0Jykge1xuICAgICAgY29uc3QgYXBwID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCdkaXYuZGlhbG9nLmFjdG9yLWltcG9ydGVyJylcbiAgICAgIGFwcC5oaWRlKClcbiAgICAgIGNvbnN0IGZvcm0gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJ2Zvcm0nKVxuICAgICAgY29uc3QgaW5wdXRzID0gQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuZ2V0SW5wdXRzKGZvcm0pXG4gICAgICBpZiAoaW5wdXRzLmVudGl0eSA9PT0gJ2Rob2xlaG91c2UnICYmIHRoaXMuY2hhcmFjdGVySlNPTikge1xuICAgICAgICBjb25zdCBjaGFyYWN0ZXIgPVxuICAgICAgICAgIGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5jcmVhdGVOUENGcm9tRGhvbGVIb3VzZShcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVySlNPTixcbiAgICAgICAgICAgIHsgc291cmNlOiBpbnB1dHMuc291cmNlIH1cbiAgICAgICAgICApXG4gICAgICAgIGlmIChjaGFyYWN0ZXIgIT09IGZhbHNlKSB7XG4gICAgICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ2NoYXJhY3RlcjonLCBjaGFyYWN0ZXIpXG4gICAgICAgICAgfVxuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQWN0b3JJbXBvcnRlZCcsIHtcbiAgICAgICAgICAgICAgYWN0b3JUeXBlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuQ2hhcmFjdGVyJyksXG4gICAgICAgICAgICAgIGFjdG9yTmFtZTogY2hhcmFjdGVyLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICAgIGF3YWl0IGNoYXJhY3Rlci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcHAuc2hvdygpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaW5wdXRzLnRleHQgJiYgaW5wdXRzLnRleHQgIT09ICcnKSB7XG4gICAgICAgIENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmltcG9ydEFjdG9yKGlucHV0cylcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcHAuc2hvdygpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kLlxuICAgKi9cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgdGhpcy5vYmplY3QuaW1wb3J0VHlwZSA9IGZvcm1EYXRhWydjb2MtZW50aXR5LXR5cGUnXVxuICAgIHRoaXMub2JqZWN0LmNoYXJhY3RlckRhdGEgPSBmb3JtRGF0YVsnY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YSddPy50cmltKClcbiAgICBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2MtY29udmVydC02RSddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3QuY29udmVydDZFID0gZm9ybURhdGFbJ2NvYy1jb252ZXJ0LTZFJ11cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnY29jLWVudGl0eS1sYW5nJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5sYW5ndWFnZSA9IGZvcm1EYXRhWydjb2MtZW50aXR5LWxhbmcnXVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGZvcm1EYXRhLnNvdXJjZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNvdXJjZSA9IGZvcm1EYXRhLnNvdXJjZVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgLyoqXG4gICAqIGltcG9ydEFjdG9yIGltcG9ydHMgYW4gQWN0b3IgdXNpbmcgdGhlIGRpYWxvZyBkYXRhXG4gICAqIEBwYXJhbSB7aHRtbH0gaHRtbFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGltcG9ydEFjdG9yIChpbnB1dHMpIHtcbiAgICBpZiAoaW5wdXRzLnRleHRbaW5wdXRzLnRleHQubGVuZ3RoXSAhPT0gJy4nKSB7XG4gICAgICBpbnB1dHMudGV4dCArPSAnLicgLy8gQWRkIGEgZG90IGEgdGhlIGVuZCB0byBoZWxwIHRoZSByZWdleCBmaW5kIHRoZSBlbmRcbiAgICB9XG4gICAgY29uc3QgYWN0b3IgPSBuZXcgQ29DN0FjdG9ySW1wb3J0ZXIoKVxuICAgIGNvbnN0IGNyZWF0ZWRBY3RvciA9IGF3YWl0IGFjdG9yLmNyZWF0ZUFjdG9yKGlucHV0cylcbiAgICAvLyBBY3RvciBjcmVhdGVkLCBOb3RpZnkgdGhlIHVzZXIgYW5kIHNob3cgdGhlIHNoZWV0LlxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdjcmVhdGVkQWN0b3I6JywgY3JlYXRlZEFjdG9yKVxuICAgIH1cbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFjdG9ySW1wb3J0ZWQnLCB7XG4gICAgICAgIGFjdG9yVHlwZTogY3JlYXRlZEFjdG9yLnR5cGU/LnRvVXBwZXJDYXNlKCksXG4gICAgICAgIGFjdG9yTmFtZTogY3JlYXRlZEFjdG9yLm5hbWVcbiAgICAgIH0pXG4gICAgKVxuICAgIGF3YWl0IGNyZWF0ZWRBY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAvLyBjb25zdCB1cGRhdGVkID0gYXdhaXQgVXBkYXRlci51cGRhdGVBY3RvcihucGMpXG4gICAgLy8gY29uc29sZS5kZWJ1ZygndXBkYXRlZDonLCB1cGRhdGVkKVxuICB9XG5cbiAgLy8gLyoqXG4gIC8vICAqIGNyZWF0ZSBpdCdzIHRoZSBkZWZhdWx0IHdlYiB0byBjcmF0ZSB0aGUgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2dcbiAgLy8gICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKG9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMuaW1wb3J0VHlwZSA9IG9wdGlvbnMuaW1wb3J0VHlwZSA/PyAnbnBjJ1xuICAgIG9wdGlvbnMubGFuZ3VhZ2UgPVxuICAgICAgb3B0aW9ucy5sYW5ndWFnZSA/PyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKG51bGwpXG4gICAgb3B0aW9ucy5jb252ZXJ0NkUgPSBvcHRpb25zLmxhbmd1YWdlID8/ICdjb2MtZ3Vlc3MnXG4gICAgb3B0aW9ucy5zb3VyY2UgPSBvcHRpb25zLnNvdXJjZSA/PyAnaXdtcydcbiAgICBvcHRpb25zLmNoYXJhY3RlckRhdGEgPSBvcHRpb25zLmNoYXJhY3RlckRhdGEgPz8gJydcblxuICAgIG5ldyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyhvcHRpb25zKS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuXG5Ib29rcy5vbmNlKCdyZWFkeScsICgpID0+IHtcbiAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ0NvQzctSW1wb3J0ZXItVGVzdHMnKT8uYWN0aXZlKSB7XG4gICAgd2luZG93LkNvQzdBY3RvckltcG9ydGVyID0gQ29DN0FjdG9ySW1wb3J0ZXJcbiAgfVxufSlcbiIsIi8qIGdsb2JhbCBEaWFsb2csIGR1cGxpY2F0ZSwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIERyb3BDb0NJRCBleHRlbmRzIERpYWxvZyB7XG4gIHN0YXRpYyBwcm9jZXNzRm9ybSAocmVzcG9uc2UsIGVsZW1lbnQsIHJlc29sdmUpIHtcbiAgICBpZiAoZWxlbWVudC5maW5kKCdpbnB1dCcpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdkcm9wQ29DSUQnLCAocmVzcG9uc2UgPyAnWScgOiAnTicpKVxuICAgIH1cbiAgICByZXNvbHZlKHJlc3BvbnNlKVxuICB9XG5cbiAgc3RhdGljIHByb2Nlc3NJdGVtIChyZXNwb25zZSwgaXRlbSkge1xuICAgIGlmIChyZXNwb25zZSAmJiBpdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkKSB7XG4gICAgICByZXR1cm4gaXRlbS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgIH1cbiAgICByZXR1cm4gZHVwbGljYXRlKGl0ZW0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlICgpIHtcbiAgICBjb25zdCBkcm9wQ29DSUQgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkcm9wQ29DSUQnKVxuICAgIHN3aXRjaCAoZHJvcENvQ0lEKSB7XG4gICAgICBjYXNlICcnOlxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgY29uc3QgZGxnID0gbmV3IERyb3BDb0NJRCh7XG4gICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuTmFtZScpLFxuICAgICAgICAgICAgY29udGVudDogJzxwPicgKyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5EaWFsb2cnKSArICc8L3A+PHA+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwicmVtZW1iZXJ0aGlzXCIgc3R5bGU9XCJ2ZXJ0aWNhbC1hbGlnbjogc3ViO1wiPjxsYWJlbCBmb3I9XCJyZW1lbWJlcnRoaXNcIj4nICsgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuUmVtZW1iZXInKSArICc8L2xhYmVsPjwvcD4nLFxuICAgICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2FwcCcsICdkaWFsb2cnXSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICAgICAgeWVzOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnWWVzJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IChlbGVtZW50KSA9PiB7IERyb3BDb0NJRC5wcm9jZXNzRm9ybSh0cnVlLCBlbGVtZW50LCByZXNvbHZlKSB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG5vOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnTm8nKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKGVsZW1lbnQpID0+IHsgRHJvcENvQ0lELnByb2Nlc3NGb3JtKGZhbHNlLCBlbGVtZW50LCByZXNvbHZlKSB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGRsZy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSlcbiAgICAgIGNhc2UgJ1knOlxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgY2FzZSAnTic6XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIERyYWdEcm9wLCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgRHJvcENvQ0lEIH0gZnJvbSAnLi4vLi4vYXBwcy9kcm9wLWNvYy1pZC5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN09jY3VwYXRpb25TaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ3NraWxscycpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbS1kZWxldGUnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbURlbGV0ZShldmVudCwgJ3NraWxscycpKVxuXG4gICAgaHRtbC5maW5kKCcuZ3JvdXAtaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vbkdyb3VwSXRlbURlbGV0ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmdyb3VwLWNvbnRyb2wnKS5jbGljayh0aGlzLl9vbkdyb3VwQ29udHJvbC5iaW5kKHRoaXMpKVxuXG4gICAgY29uc3QgZHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLmRyb3BwYWJsZScsXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wLmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgZHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc2tpbGwnLCBjb2xsZWN0aW9uTmFtZSA9ICdza2lsbHMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBvcHRpb25hbFNraWxsID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/LmNsYXNzTGlzdD8uY29udGFpbnMoJ29wdGlvbmFsLXNraWxscycpXG4gICAgY29uc3Qgb2wgPSBldmVudD8uY3VycmVudFRhcmdldD8uY2xvc2VzdCgnb2wnKVxuICAgIGNvbnN0IGluZGV4ID0gb2w/LmRhdGFzZXQ/Lmdyb3VwXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGxldCB1c2VDb0NJRCA9IDBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cbiAgICBjb25zdCBncm91cHMgPSB0aGlzLml0ZW0uc3lzdGVtLmdyb3VwcyA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmdyb3VwcykgOiBbXVxuXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uc3lzdGVtKSBjb250aW51ZVxuICAgICAgaWYgKCFbdHlwZV0uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAob3B0aW9uYWxTa2lsbCkge1xuICAgICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICAgIC8vIEdlbmVyaWMgc3BlY2lhbGl6YXRpb24gY2FuIGJlIGluY2x1ZGVkIG1hbnkgdGltZXNcbiAgICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlIC8vIElmIHNraWxsIGlzIGFscmVhZHkgaW4gbWFpbiBkb24ndCBhZGQgaXRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGdyb3Vwc1tpbmRleF0uc2tpbGxzLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWUgLy8gSWYgc2tpbGwgaXMgYWxyZWFkeSBpbiBncm91cCBkb24ndCBhZGQgaXRcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodXNlQ29DSUQgPT09IDApIHtcbiAgICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgICB9XG4gICAgICAgIGdyb3Vwc1tpbmRleF0uc2tpbGxzID0gZ3JvdXBzW2luZGV4XS5za2lsbHMuY29uY2F0KFtEcm9wQ29DSUQucHJvY2Vzc0l0ZW0odXNlQ29DSUQsIGl0ZW0pXSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgICAgLy8gR2VuZXJpYyBzcGVjaWFsaXphdGlvbiBjYW4gYmUgaW5jbHVkZWQgbWFueSB0aW1lc1xuICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3Vwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHNhbWUgc2tpbGwgaXMgaW4gb25lIG9mIHRoZSBncm91cCByZW1vdmUgaXQgZnJvbSB0aGUgZ3JvdXBzXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGdyb3Vwc1tpXS5za2lsbHMuZmluZEluZGV4KFxuICAgICAgICAgICAgICBlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWVcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgZ3JvdXBzW2ldLnNraWxscy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VDb0NJRCA9PT0gMCkge1xuICAgICAgICAgIHVzZUNvQ0lEID0gYXdhaXQgRHJvcENvQ0lELmNyZWF0ZSgpXG4gICAgICAgIH1cbiAgICAgICAgY29sbGVjdGlvbi5wdXNoKERyb3BDb0NJRC5wcm9jZXNzSXRlbSh1c2VDb0NJRCwgaXRlbSkpXG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmdyb3Vwcyc6IGdyb3VwcyB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBhc3luYyBfb25Hcm91cENvbnRyb2wgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICAvLyBBZGQgbmV3IGRhbWFnZSBjb21wb25lbnRcbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2FkZC1ncm91cCcpKSB7XG4gICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCkgLy8gU3VibWl0IGFueSB1bnNhdmVkIGNoYW5nZXNcbiAgICAgIGNvbnN0IGdyb3VwcyA9IHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMuY29uY2F0KFt7IG9wdGlvbnM6IDAsIHNraWxsczogW10gfV0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygncmVtb3ZlLWdyb3VwJykpIHtcbiAgICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KSAvLyBTdWJtaXQgYW55IHVuc2F2ZWQgY2hhbmdlc1xuICAgICAgY29uc3QgZ3JvdXBzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzKVxuICAgICAgY29uc3Qgb2wgPSBhLmNsb3Nlc3QoJy5pdGVtLWxpc3QuZ3JvdXAnKVxuICAgICAgZ3JvdXBzLnNwbGljZShOdW1iZXIob2wuZGF0YXNldC5ncm91cCksIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMgfSlcbiAgICB9XG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbGkgPSBvYmoucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGdyb3VwID0gb2JqLmNsb3Nlc3QoJy5ncm91cCcpXG4gICAgbGV0IGl0ZW1cbiAgICBpZiAoZ3JvdXAubGVuZ3RoKSB7XG4gICAgICBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbS5ncm91cHNbZ3JvdXAuZGF0YSgnZ3JvdXAnKV1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgICAgcmV0dXJuIHMuX2lkID09PSBsaS5kYXRhKCdpdGVtLWlkJylcbiAgICAgIH0pXG4gICAgfVxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb25cblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4gc3VtbWFyeS5yZW1vdmUoKSlcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGl2ID0gJChgPGRpdiBjbGFzcz1cIml0ZW0tc3VtbWFyeVwiPiR7Y2hhdERhdGEudmFsdWV9PC9kaXY+YClcbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICAvLyBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykgeyBwcm9wcy5hcHBlbmQoYDxzcGFuIGNsYXNzPVwidGFnXCI+JHtwfTwvc3Bhbj5gKSB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgfVxuXG4gIGFzeW5jIF9vbkl0ZW1EZWxldGUgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBjb25zdCBpdGVtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUlkID0gaXRlbS5kYXRhKCdpdGVtLWlkJylcbiAgICBjb25zdCBDb0NJZCA9IGl0ZW0uZGF0YSgnY29jaWQnKVxuICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmRJbmRleChpID0+IChpdGVtSWQgJiYgaS5faWQgPT09IGl0ZW1JZCkgfHwgKENvQ0lkICYmIGkgPT09IENvQ0lkKSlcbiAgICBpZiAoaXRlbUluZGV4ID4gLTEpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgICAgY29sbGVjdGlvbi5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Hcm91cEl0ZW1EZWxldGUgKGV2ZW50KSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGdyb3VwID0gTnVtYmVyKGl0ZW0uY2xvc2VzdCgnLml0ZW0tbGlzdC5ncm91cCcpLmRhdGEoJ2dyb3VwJykpXG4gICAgY29uc3QgZ3JvdXBzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzKVxuICAgIGlmICh0eXBlb2YgZ3JvdXBzW2dyb3VwXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgICBjb25zdCBDb0NJZCA9IGl0ZW0uZGF0YSgnY29jaWQnKVxuICAgICAgY29uc3QgaXRlbUluZGV4ID0gZ3JvdXBzW2dyb3VwXS5za2lsbHMuZmluZEluZGV4KGkgPT4gKGl0ZW1JZCAmJiBpLl9pZCA9PT0gaXRlbUlkKSB8fCAoQ29DSWQgJiYgaSA9PT0gQ29DSWQpKVxuICAgICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICAgIGdyb3Vwc1tncm91cF0uc2tpbGxzLnNwbGljZShpdGVtSW5kZXgsIDEpXG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmdyb3Vwcyc6IGdyb3VwcyB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ29jY3VwYXRpb24nXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9vY2N1cGF0aW9uLmh0bWwnLFxuICAgICAgd2lkdGg6IDUyNSxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJyB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcblxuICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMgfSlcblxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RFbXB0eSA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwLCBsZW4gPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXggPCBsZW47IGluZGV4KyspIHtcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzIH0pXG5cbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLmlzRW1wdHkgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICB9XG5cbiAgICBzaGVldERhdGEub2NjdXBhdGlvblBvaW50c1N0cmluZyA9IENvQzdPY2N1cGF0aW9uU2hlZXQub2NjdXBhdGlvblBvaW50c1N0cmluZyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKVxuXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKENPQzcub2NjdXBhdGlvblByb3BlcnRpZXNba2V5XSA/IENPQzcub2NjdXBhdGlvblByb3BlcnRpZXNba2V5XSA6IG51bGwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBzdGF0aWMgb2NjdXBhdGlvblBvaW50c1N0cmluZyAob2NjdXBhdGlvblNraWxsUG9pbnRzKSB7XG4gICAgY29uc3Qgb3B0aW9ubmFsID0gW11cbiAgICBjb25zdCBtYW5kYXRvcnkgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgIGlmIChjYXJhYy5tdWx0aXBsaWVyKSB7XG4gICAgICAgIGNvbnN0IGNhcmFjTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShgQ0hBUkFDLiR7a2V5LnRvVXBwZXJDYXNlKCl9YClcbiAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkICYmIGNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgb3B0aW9ubmFsLnB1c2goYCR7Y2FyYWNOYW1lfXgke2NhcmFjLm11bHRpcGxpZXJ9YClcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQgJiYgIWNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgbWFuZGF0b3J5LnB1c2goYCR7Y2FyYWNOYW1lfXgke2NhcmFjLm11bHRpcGxpZXJ9YClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBsZXQgb2NjdXBhdGlvblBvaW50c1N0cmluZyA9ICcnXG4gICAgY29uc3Qgb3JTdHJpbmcgPSBgICR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9yJyl9IGBcbiAgICBpZiAobWFuZGF0b3J5Lmxlbmd0aCkgb2NjdXBhdGlvblBvaW50c1N0cmluZyArPSBtYW5kYXRvcnkuam9pbignICsgJylcbiAgICBpZiAob3B0aW9ubmFsLmxlbmd0aCAmJiBtYW5kYXRvcnkubGVuZ3RoKSB7XG4gICAgICBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IGAgKyAoJHtvcHRpb25uYWwuam9pbihvclN0cmluZyl9KWBcbiAgICB9XG4gICAgaWYgKG9wdGlvbm5hbC5sZW5ndGggJiYgIW1hbmRhdG9yeS5sZW5ndGgpIHtcbiAgICAgIG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKz0gb3B0aW9ubmFsLmpvaW4ob3JTdHJpbmcpXG4gICAgfVxuICAgIHJldHVybiBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nXG4gIH1cblxuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCBzeXN0ZW0gPSBleHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLmdyb3Vwcykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9IE9iamVjdC52YWx1ZXMoXG4gICAgICAgIHN5c3RlbS5ncm91cHMgfHwgW11cbiAgICAgIClcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLml0ZW0uc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgZm9ybURhdGFbYHN5c3RlbS5ncm91cHMuJHtpbmRleH0uc2tpbGxzYF0gPSBkdXBsaWNhdGUoXG4gICAgICAgICAgdGhpcy5pdGVtLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxsc1xuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBBY3RvciwgQ2hhdE1lc3NhZ2UsIENPTlNULCBkdXBsaWNhdGUsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgSG9va3MsIG1lcmdlT2JqZWN0LCByYW5kb21JRCwgcmVuZGVyVGVtcGxhdGUsIFJvbGwsIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3T2NjdXBhdGlvblNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMnXG5pbXBvcnQgeyBDb0M3UGFyc2VyIH0gZnJvbSAnLi9jb2M3LXBhcnNlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QtZGlhbG9nLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0ludmVzdGlnYXRvcldpemFyZCBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgaWQ6ICdpbnZlc3RpZ2F0b3Itd2l6YXJkLWFwcGxpY2F0aW9uJyxcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnaW52ZXN0aWdhdG9yLXdpemFyZCddLFxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbnZlc3RpZ2F0b3JXaXphcmQuVGl0bGUnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQuaGJzJyxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDYwMCxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgc2Nyb2xsWTogWycuc2Nyb2xsc2VjdGlvbiddLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5kcmFnZ2FibGUnLCBkcm9wU2VsZWN0b3I6IG51bGwgfV1cbiAgICB9KVxuICB9XG5cbiAgZ2V0IHBhZ2VMaXN0ICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgUEFHRV9OT05FOiAtMSxcbiAgICAgIFBBR0VfSU5UUk9EVUNUSU9OOiAwLFxuICAgICAgUEFHRV9DT05GSUdVUkFUSU9OOiAxLFxuICAgICAgUEFHRV9TRVRVUFM6IDIsXG4gICAgICBQQUdFX0FSQ0hFVFlQRVM6IDMsXG4gICAgICBQQUdFX0NIQVJBQ1RJU1RJQ1M6IDQsXG4gICAgICBQQUdFX0FUVFJJQlVURVM6IDUsXG4gICAgICBQQUdFX1ZJRVdfQVRUUklCVVRFUzogNixcbiAgICAgIFBBR0VfT0NDVVBBVElPTlM6IDcsXG4gICAgICBQQUdFX09DQ1VQQVRJT05fU0tJTExTOiA4LFxuICAgICAgUEFHRV9BUkNIRVRZUEVfU0tJTExTOiA5LFxuICAgICAgUEFHRV9QT0lOVFNfU0tJTExTOiAxMCxcbiAgICAgIFBBR0VfSU5WRVNUSUdBVE9SOiAxMSxcbiAgICAgIFBBR0VfQkFDS1NUT1JZOiAxMixcbiAgICAgIFBBR0VfQ1JFQVRFOiAxM1xuICAgIH1cbiAgfVxuXG4gIGdldCBjaGFyYWN0ZXJpc3RpY3NNZXRob2RzICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgTUVUSE9EX0RFRkFVTFQ6IDEsXG4gICAgICBNRVRIT0RfUk9MTDogMSxcbiAgICAgIE1FVEhPRF9QT0lOVFM6IDIsXG4gICAgICBNRVRIT0RfVkFMVUVTOiAzXG4gICAgfVxuICB9XG5cbiAgZ2V0IGNvY2lkQ3JlZGl0UmF0aW5nICgpIHtcbiAgICByZXR1cm4gJ2kuc2tpbGwuY3JlZGl0LXJhdGluZydcbiAgfVxuXG4gIGdldCBjb2NpZExhbmd1YWdlT3duICgpIHtcbiAgICByZXR1cm4gJ2kuc2tpbGwubGFuZ3VhZ2Utb3duJ1xuICB9XG5cbiAgZ2V0IHBhZ2VPcmRlciAoKSB7XG4gICAgY29uc3QgcGFnZXMgPSB0aGlzLnBhZ2VMaXN0XG4gICAgbGV0IHBhZ2VPcmRlciA9IFtcbiAgICAgIHBhZ2VzLlBBR0VfSU5UUk9EVUNUSU9OXG4gICAgXVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9DT05GSUdVUkFUSU9OKVxuICAgIH1cbiAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFNldHVwID09PSAnJykge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9TRVRVUFMpXG4gICAgfVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX0FSQ0hFVFlQRVMpXG4gICAgfVxuICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfQ0hBUkFDVElTVElDUylcbiAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJykpIHtcbiAgICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfQVRUUklCVVRFUylcbiAgICB9XG4gICAgcGFnZU9yZGVyID0gcGFnZU9yZGVyLmNvbmNhdChbXG4gICAgICBwYWdlcy5QQUdFX1ZJRVdfQVRUUklCVVRFUyxcbiAgICAgIHBhZ2VzLlBBR0VfT0NDVVBBVElPTlMsXG4gICAgICBwYWdlcy5QQUdFX09DQ1VQQVRJT05fU0tJTExTXG4gICAgXSlcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKSkge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9BUkNIRVRZUEVfU0tJTExTKVxuICAgIH1cbiAgICBwYWdlT3JkZXIgPSBwYWdlT3JkZXIuY29uY2F0KFtcbiAgICAgIHBhZ2VzLlBBR0VfUE9JTlRTX1NLSUxMUyxcbiAgICAgIHBhZ2VzLlBBR0VfSU5WRVNUSUdBVE9SLFxuICAgICAgcGFnZXMuUEFHRV9CQUNLU1RPUlksXG4gICAgICBwYWdlcy5QQUdFX0NSRUFURVxuICAgIF0pXG4gICAgcmV0dXJuIHBhZ2VPcmRlclxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGxvYWRDYWNoZUl0ZW1CeUNvQ0lEICgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiAvXmlcXC4vLCB0eXBlOiAnaScsIHNob3dMb2FkaW5nOiB0cnVlIH0pLnRoZW4oKGl0ZW1zKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpc3QgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICBsaXN0W2l0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRdID0gaXRlbVxuICAgICAgICB9XG4gICAgICAgIHJlc29sdmUobGlzdClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGZpbHRlckNhY2hlSXRlbUJ5Q29DSUQgKHJlZ2V4cCkge1xuICAgIHJldHVybiBPYmplY3QuZW50cmllcyhhd2FpdCB0aGlzLm9iamVjdC5jYWNoZUNvQ0lEKS5maWx0ZXIoZW50cnkgPT4gZW50cnlbMF0ubWF0Y2gocmVnZXhwKSkubWFwKGVudHJ5ID0+IGVudHJ5WzFdKVxuICB9XG5cbiAgYXN5bmMgZ2V0Q2FjaGVJdGVtQnlDb0NJRCAoaWQpIHtcbiAgICByZXR1cm4gKGF3YWl0IHRoaXMub2JqZWN0LmNhY2hlQ29DSUQpW2lkXSA/PyBmYWxzZVxuICB9XG5cbiAgYXN5bmMgZXhwYW5kSXRlbUFycmF5IChpdGVtTGlzdCkge1xuICAgIGNvbnN0IGl0ZW1zID0gaXRlbUxpc3QuZmlsdGVyKGl0ID0+IHR5cGVvZiBpdCAhPT0gJ3N0cmluZycpXG4gICAgY29uc3QgY29jaWRzID0gaXRlbUxpc3QuZmlsdGVyKGl0ID0+IHR5cGVvZiBpdCA9PT0gJ3N0cmluZycpXG4gICAgaWYgKGNvY2lkcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IGF3YWl0IHRoaXMub2JqZWN0LmNhY2hlQ29DSURcbiAgICAgIGNvbnN0IG1pc3NpbmcgPSBbXVxuICAgICAgZm9yIChjb25zdCBjb2NpZCBvZiBjb2NpZHMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzb3VyY2VbY29jaWRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW1zLnB1c2goc291cmNlW2NvY2lkXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtaXNzaW5nLnB1c2goY29jaWQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtaXNzaW5nLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBlcmEgPSBnYW1lLmkxOG4uZm9ybWF0KENPQzcuZXJhc1t0aGlzLm9iamVjdC5kZWZhdWx0RXJhXSA/PyAnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogdGhpcy5vYmplY3QuZGVmYXVsdEVyYSB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IuZG9jdW1lbnRzLW5vdC1mb3VuZCcsIHsgY29jaWRzOiBtaXNzaW5nLmpvaW4oJywgJyksIGxhbmc6IGdhbWUuaTE4bi5sYW5nLCBlcmEgfSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgZ2V0QWdlQWRqdXN0bWVudHMgKCkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzKSB7XG4gICAgICB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldID0gMFxuICAgIH1cbiAgICAvLyBlZHU6IG9wdGlvbmFsIC0gbnVtYmVyIG9mIGVkdSBpbXByb3ZlbWVudCBjaGVja3NcbiAgICAvLyBkZWR1Y3Q6IG9wdGlvbmFsIC0gZGVkdWN0IFt0b3RhbF0gYmV0d2VlbiBbZnJvbV1cbiAgICAvLyByZWR1Y2U6IG9wdGlvbmFsIC0gZGVkdWN0IFt0b3RsYV0gZnJvbSBbZnJvbV1cbiAgICAvLyBsdWNrOiBvcHRpb25hbCAtIHJlcm9sbCBsdWNrIGFuZCB0YWtlIGhpZ2hlclxuICAgIGlmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMnKSkge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LmFnZSA+PSA0MCkge1xuICAgICAgICBjb25zdCBrZXkgPSBNYXRoLmZsb29yKHRoaXMub2JqZWN0LmFnZSAvIDEwKVxuICAgICAgICB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzID0ge1xuICAgICAgICAgIGVkdToge1xuICAgICAgICAgICAgdG90YWw6IChrZXkgLSAyID4gNCA/IDQgOiBrZXkgLSAyKSxcbiAgICAgICAgICAgIHJvbGxlZDogZmFsc2VcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRlZHVjdDoge1xuICAgICAgICAgICAgdG90YWw6IChrZXkgPiAxID8gNSAqIE1hdGgucG93KDIsIGtleSAtIDQpIDogMCksXG4gICAgICAgICAgICBmcm9tOiBbJ3N0cicsICdjb24nLCAnZGV4J10sXG4gICAgICAgICAgICB2YWx1ZXM6IHt9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZWR1Y2U6IHtcbiAgICAgICAgICAgIHRvdGFsOiAoa2V5IC0gMykgKiA1LFxuICAgICAgICAgICAgZnJvbTogJ2FwcCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuYWdlID49IDIwKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMgPSB7XG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB0b3RhbDogMSxcbiAgICAgICAgICAgIHJvbGxlZDogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuYWdlID49IDE1KSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMgPSB7XG4gICAgICAgICAgZGVkdWN0OiB7XG4gICAgICAgICAgICB0b3RhbDogNSxcbiAgICAgICAgICAgIGZyb206IFsnc3RyJywgJ3NpeiddLFxuICAgICAgICAgICAgdmFsdWVzOiB7fVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVkdWNlOiB7XG4gICAgICAgICAgICB0b3RhbDogNSxcbiAgICAgICAgICAgIGZyb206ICdlZHUnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsdWNrOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW3RoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMucmVkdWNlLmZyb21dID0gLXRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMucmVkdWNlLnRvdGFsXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuXG4gICAgc2hlZXREYXRhLnBhZ2VzID0gdGhpcy5wYWdlTGlzdFxuXG4gICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5jcmVhdGVCdXR0b24gPSBmYWxzZVxuXG4gICAgbGV0IHNldHVwXG4gICAgbGV0IGFyY2hldHlwZVxuICAgIGxldCBvY2N1cGF0aW9uXG5cbiAgICBsZXQgc2hvd01vbmV0YXJ5ID0gZmFsc2VcblxuICAgIHN3aXRjaCAoc2hlZXREYXRhLm9iamVjdC5zdGVwKSB7XG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0lOVFJPRFVDVElPTjpcbiAgICAgICAgc2hlZXREYXRhLmVyYSA9IGdhbWUuaTE4bi5mb3JtYXQoQ09DNy5lcmFzW3NoZWV0RGF0YS5vYmplY3QuZGVmYXVsdEVyYV0gPz8gJ0NvQzcuQ29DSURGbGFnLmVycm9yLnVua25vd24tZXJhJywgeyBlcmE6IHNoZWV0RGF0YS5vYmplY3QuZGVmYXVsdEVyYSB9KVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9DT05GSUdVUkFUSU9OOlxuICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLnNldHVwXFwuLylcbiAgICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbnMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwub2NjdXBhdGlvblxcLi8pXG4gICAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZXMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwuYXJjaGV0eXBlXFwuLylcbiAgICAgICAgICBzZXR1cCA9IHNoZWV0RGF0YS5zZXR1cHMuZmluZChzID0+IHMuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPT09IHNoZWV0RGF0YS5vYmplY3QuZGVmYXVsdFNldHVwKVxuICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dXAgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzaGVldERhdGEub2JqZWN0LmRlZmF1bHRTZXR1cCA9ICcnXG4gICAgICAgICAgICBzaGVldERhdGEub2JqZWN0LnNldHVwID0gJydcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKHNldHVwLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSlcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLm93bmVyc2hpcCA9IHtcbiAgICAgICAgICAgIFtDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVdOiAnT1dORVJTSElQLk5PTkUnLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTElNSVRFRF06ICdPV05FUlNISVAuTElNSVRFRCcsXG4gICAgICAgICAgICBbQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PQlNFUlZFUl06ICdPV05FUlNISVAuT0JTRVJWRVInLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT1dORVJdOiAnT1dORVJTSElQLk9XTkVSJ1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuX2VyYXMgPSBbXVxuICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5fZXJhcy5wdXNoKHtcbiAgICAgICAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMgPSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHNcbiAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0RFRkFVTFRcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfUE9JTlRTXG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFU1xuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuX2VyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgc2hlZXREYXRhLmhhc0FyY2hldHlwZXMgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpXG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9TRVRVUFM6XG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LmRlZmF1bHRTZXR1cCA9PT0gJycpIHtcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLnNldHVwXFwuLylcbiAgICAgICAgICBzaGVldERhdGEuc2V0dXBzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgICAgICAgc2V0dXAgPSBzaGVldERhdGEuc2V0dXBzLmZpbmQocyA9PiBzLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBzaGVldERhdGEub2JqZWN0LnNldHVwKVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZXR1cCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKHNldHVwLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSlcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQVJDSEVUWVBFUzpcbiAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZXMgPSBhd2FpdCB0aGlzLmZpbHRlckNhY2hlSXRlbUJ5Q29DSUQoL15pXFwuYXJjaGV0eXBlXFwuLylcbiAgICAgICAgaWYgKHNoZWV0RGF0YS5hcmNoZXR5cGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGVzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LmFyY2hldHlwZSAhPT0gJycpIHtcbiAgICAgICAgICAgIGFyY2hldHlwZSA9IHNoZWV0RGF0YS5hcmNoZXR5cGVzLmZpbmQocyA9PiBzLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBzaGVldERhdGEub2JqZWN0LmFyY2hldHlwZSlcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJjaGV0eXBlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBzaGVldERhdGEuZGVzY3JpcHRpb24gPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoYXJjaGV0eXBlLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSlcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmJvbnVzUG9pbnRzID0gYXJjaGV0eXBlLnN5c3RlbS5ib251c1BvaW50c1xuICAgICAgICAgICAgICBjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWMgaW4gYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1tjb3JlQ2hhcmFjdGVyaXN0aWNdKSB7XG4gICAgICAgICAgICAgICAgICBjb3JlQ2hhcmFjdGVyaXN0aWNzLnB1c2goY29yZUNoYXJhY3RlcmlzdGljKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoY29yZUNoYXJhY3RlcmlzdGljcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgPSAnJ1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvcmVDaGFyYWN0ZXJpc3RpY3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljID0gY29yZUNoYXJhY3RlcmlzdGljc1swXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWMgPSBjb3JlQ2hhcmFjdGVyaXN0aWNzLm1hcChjID0+IGMudG9Mb2NhbGVVcHBlckNhc2UoKSkuam9pbignICcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKSArICcgJylcbiAgICAgICAgICAgICAgY29uc3Qgc2tpbGxzID0gW11cbiAgICAgICAgICAgICAgYXJjaGV0eXBlLnN5c3RlbS5za2lsbHMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShhcmNoZXR5cGUuc3lzdGVtLnNraWxscylcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBhcmNoZXR5cGUuc3lzdGVtLnNraWxscykge1xuICAgICAgICAgICAgICAgIHNraWxscy5wdXNoKHNraWxsLm5hbWUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLnNraWxscyA9IHNraWxscy5qb2luKCcsICcpXG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5zdWdnZXN0ZWRPY2N1cGF0aW9ucyA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChhcmNoZXR5cGUuc3lzdGVtLnN1Z2dlc3RlZE9jY3VwYXRpb25zKVxuICAgICAgICAgICAgICBzaGVldERhdGEuc3VnZ2VzdGVkVHJhaXRzID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGFyY2hldHlwZS5zeXN0ZW0uc3VnZ2VzdGVkVHJhaXRzKVxuICAgICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9DSEFSQUNUSVNUSUNTOlxuICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcyA9IHRoaXMuY2hhcmFjdGVyaXN0aWNzTWV0aG9kc1xuICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1JPTExcbiAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2V0dXAgIT09ICcnKSB7XG4gICAgICAgICAgc2V0dXAgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Quc2V0dXApXG4gICAgICAgICAgaWYgKHR5cGVvZiBzZXR1cCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkIHx8IHRoaXMub2JqZWN0LmVuZm9yY2VQb2ludEJ1eSkge1xuICAgICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1BPSU5UU1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2QgPSBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfVkFMVUVTXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuc2V0dXAgPSB7XG4gICAgICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgICAgICBwb2ludHM6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlLFxuICAgICAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdzdHInLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5zdHIsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TdHJlbmd0aCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ2NvbicsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmNvbixcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkNvbnN0aXR1dGlvbidcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ3NpeicsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLnNpeixcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlNpemUnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdkZXgnLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5kZXgsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5EZXh0ZXJpdHknXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdhcHAnLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5hcHAsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5BcHBlYXJhbmNlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnaW50JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuaW50LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuSW50ZWxsaWdlbmNlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAncG93JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMucG93LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuUG93ZXInXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdlZHUnLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lZHUsXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5FZHVjYXRpb24nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICBsdWNrOiB7XG4gICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5sdWNrLFxuICAgICAgICAgICAgICAgIGxhYmVsOiAnQ29DNy5MdWNrJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljcyA9IFtdXG4gICAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICAgICAgICAgIGFyY2hldHlwZSA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJjaGV0eXBlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY29yZUNoYXJhY3RlcmlzdGljIGluIGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljcykge1xuICAgICAgICAgICAgICAgICAgaWYgKGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1tjb3JlQ2hhcmFjdGVyaXN0aWNdKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIGtleTogY29yZUNoYXJhY3RlcmlzdGljLFxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoc2hlZXREYXRhLnNldHVwLmNoYXJhY3RlcmlzdGljcy5maW5kKGMgPT4gYy5rZXkgPT09IGNvcmVDaGFyYWN0ZXJpc3RpYyk/LmxhYmVsID8/ICdVbmtub3duJylcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3Muc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLnNldHVwLmNoYXJhY3RlcmlzdGljcy5maW5kKGMgPT4gYy5rZXkgPT09IHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYykucm9sbCA9IGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEudmFsdWVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBlbXB0aWVzID0gZmFsc2VcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHNoZWV0RGF0YS5vYmplY3Quc2V0dXBQb2ludHMpIHtcbiAgICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2V0dXBQb2ludHNba2V5XSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAnbHVjaycpIHtcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5zZXR1cC50b3RhbCArPSBwYXJzZUludChzaGVldERhdGEub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbXB0aWVzID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWMgPSB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMudG9Mb2NhbGVVcHBlckNhc2UoKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFlbXB0aWVzICYmIHRoaXMub2JqZWN0LmFnZSA+PSAxNSkge1xuICAgICAgICAgICAgICBpZiAoW3NoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9ST0xMLCBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfVkFMVUVTXS5pbmNsdWRlcyhzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kKSkge1xuICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNoZWV0RGF0YS5zZXR1cC50b3RhbC50b1N0cmluZygpID09PSBzaGVldERhdGEuc2V0dXAucG9pbnRzKSB7XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9BVFRSSUJVVEVTOlxuICAgICAgICBzaGVldERhdGEucHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpXG4gICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICBzaGVldERhdGEucG9pbnRzID0ge31cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMpIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzW2tleV0gPSB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApLFxuICAgICAgICAgICAgbWluOiAtcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgMSxcbiAgICAgICAgICAgIGxhYmVsOiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMoa2V5KS5sYWJlbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1ICE9PSAndW5kZWZpbmVkJyAmJiAhdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUucm9sbGVkKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5kZWR1Y3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmRlZHVjdFRvdGFsID0gMFxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LmZyb20pIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCA9IHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCAtIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuZGVkdWN0RnJvbSA9IHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LmZyb20ubWFwKG4gPT4gbi50b0xvY2FsZVVwcGVyQ2FzZSgpKS5qb2luKCcsICcpLnJlcGxhY2UoLywgKFthLXpdKykkL2ksICcsIG9yICQxJylcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLmRlZHVjdFRvdGFsICE9PSB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmRlZHVjdC50b3RhbCkge1xuICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMucmVkdWNlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNoZWV0RGF0YS5yZWR1Y2VGcm9tID0gdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UuZnJvbS50b0xvY2FsZVVwcGVyQ2FzZSgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmx1Y2sgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmx1Y2tWYWx1ZSA9IE1hdGgubWF4KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzLmx1Y2ssIHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzLmx1Y2spXG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzLmx1Y2sgPT09IDApIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9WSUVXX0FUVFJJQlVURVM6XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycykge1xuICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHNba2V5XSA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCksXG4gICAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgICAgc3VmZml4OiAnJScsXG4gICAgICAgICAgICBsYWJlbDogQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKGtleSkubGFiZWxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5kYiA9IHtcbiAgICAgICAgICB2YWx1ZTogQ29DQWN0b3IuZGJGcm9tQ2hhcmFjdGVyaXN0aWNzKHNoZWV0RGF0YS5wb2ludHMpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuQm9udXNEYW1hZ2UnXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzTmFOKHNoZWV0RGF0YS5wb2ludHMuZGIudmFsdWUpIHx8IE51bWJlcihzaGVldERhdGEucG9pbnRzLmRiLnZhbHVlKSA+PSAwKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnBvaW50cy5kYi5wcmVmaXggPSAnKydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLmJ1aWxkID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5idWlsZEZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cyksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5CdWlsZCdcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyKHNoZWV0RGF0YS5wb2ludHMuYnVpbGQudmFsdWUpID49IDApIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzLmJ1aWxkLnByZWZpeCA9ICcrJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMuaHAgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLmhwRnJvbUNoYXJhY3RlcmlzdGljcyhzaGVldERhdGEucG9pbnRzLCAnY2hhcmFjdGVyJyksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5IaXRQb2ludHMnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5ocC5wcmVmaXggPSBzaGVldERhdGEucG9pbnRzLmhwLnZhbHVlICsgJy8nXG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMubXAgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLm1wRnJvbUNoYXJhY3RlcmlzdGljcyhzaGVldERhdGEucG9pbnRzKSxcbiAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgIHN1ZmZpeDogJycsXG4gICAgICAgICAgbGFiZWw6ICdDb0M3Lk1hZ2ljUG9pbnRzJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMubXAucHJlZml4ID0gc2hlZXREYXRhLnBvaW50cy5tcC52YWx1ZSArICcvJ1xuICAgICAgICBzaGVldERhdGEucG9pbnRzLnNhbiA9IHtcbiAgICAgICAgICB2YWx1ZTogc2hlZXREYXRhLnBvaW50cy5wb3cudmFsdWUsXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcvOTknLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5TYW5pdHknXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5tb3YgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLm1vdkZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cywgJ2NoYXJhY3RlcicsIHRoaXMub2JqZWN0LmFnZSksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5Nb3ZlbWVudCdcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9PQ0NVUEFUSU9OUzpcbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb25zID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLm9jY3VwYXRpb25cXC4vKVxuICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbnMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0Lm9jY3VwYXRpb24gIT09ICcnKSB7XG4gICAgICAgICAgb2NjdXBhdGlvbiA9IHNoZWV0RGF0YS5vY2N1cGF0aW9ucy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5vY2N1cGF0aW9uKVxuICAgICAgICAgIGlmICh0eXBlb2Ygb2NjdXBhdGlvbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5kZXNjcmlwdGlvbiA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChvY2N1cGF0aW9uLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSlcbiAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nID0gQ29DN09jY3VwYXRpb25TaGVldC5vY2N1cGF0aW9uUG9pbnRzU3RyaW5nKG9jY3VwYXRpb24uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cylcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmcgPSBvY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmdcbiAgICAgICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbCA9IG9jY3VwYXRpb24uc3lzdGVtLnBlcnNvbmFsXG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxzID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkob2NjdXBhdGlvbi5zeXN0ZW0uc2tpbGxzKVxuICAgICAgICAgICAgc2hlZXREYXRhLmdyb3VwcyA9IHt9XG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgb2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICBzaGVldERhdGEuZ3JvdXBzW2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbaW5kZXhdLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgc2tpbGxzOiBbXVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5ncm91cHNbaW5kZXhdLnNraWxscyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLnBvaW50cyA9IDBcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXVxuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBjYXJhY10gb2YgT2JqZWN0LmVudHJpZXMob2NjdXBhdGlvbi5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKSkge1xuICAgICAgICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FyYWMub3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaChjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSkpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMgKz0gY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMgKz0gTWF0aC5tYXgoLi4ub3B0aW9ucylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0lOVkVTVElHQVRPUjpcbiAgICAgICAgc2hlZXREYXRhLmxhbmd1YWdlID0gKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW3RoaXMuY29jaWRMYW5ndWFnZU93bl0gIT09ICd1bmRlZmluZWQnKVxuICAgICAgICBpZiAoc2hlZXREYXRhLmxhbmd1YWdlKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmxhbmd1YWdlTmFtZSA9IHRoaXMub2JqZWN0LnNraWxsSXRlbXNbdGhpcy5jb2NpZExhbmd1YWdlT3duXS5pdGVtLm5hbWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldERhdGEubGFuZ3VhZ2VOYW1lID0gJydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9PQ0NVUEFUSU9OX1NLSUxMUzpcbiAgICAgICAgc2hlZXREYXRhLmRlZmF1bHQgPSAwXG4gICAgICAgIHNoZWV0RGF0YS5zZWxlY3RlZCA9IDBcbiAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMgPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zKSB7XG4gICAgICAgICAgbGV0IGdyb3VwID0gJ290aGVyJ1xuICAgICAgICAgIGNvbnN0IHJvd3MgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLmxlbmd0aFxuICAgICAgICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFncy5pc011bHRpcGxlXG4gICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4OiAtMSxcbiAgICAgICAgICAgICAgbmFtZTogc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lLFxuICAgICAgICAgICAgICBncm91cCxcbiAgICAgICAgICAgICAgdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc011bHRpcGxlOiB0cnVlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJvd3M7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBpc1BpY2thYmxlID0gZmFsc2VcbiAgICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pc09jY3VwYXRpb25EZWZhdWx0KSB7XG4gICAgICAgICAgICAgIGdyb3VwID0gJ2RlZmF1bHQnXG4gICAgICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgaXNQaWNrYWJsZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzaGVldERhdGEuZGVmYXVsdCsrXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmluT2NjdXBhdGlvbkdyb3VwICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBncm91cCA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmluT2NjdXBhdGlvbkdyb3VwXG4gICAgICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgaXNQaWNrYWJsZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSAnb3RoZXInXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdG9nZ2xlID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0ub2NjdXBhdGlvblRvZ2dsZVxuICAgICAgICAgICAgaWYgKGlzUGlja2FibGUpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzcGVjaWFsaXphdGlvbiA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICBsZXQgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICBsZXQgcGlja2VkID0gZmFsc2VcbiAgICAgICAgICAgIGxldCBkZWxldGVhYmxlID0gZmFsc2VcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIHBpY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHBpY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb24gPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZC5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvZ2dsZSB8fCAoaXNQaWNrYWJsZSAmJiBwaWNrZWQpKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5zZWxlY3RlZCsrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZVxuICAgICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5jb2NpZExhbmd1YWdlT3duKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzUGlja2FibGUgJiYgcGlja2VkKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQaWNrYWJsZSAmJiBwaWNrZWQpIHtcbiAgICAgICAgICAgICAgZGVsZXRlYWJsZSA9ICFzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5hcmNoZXR5cGVUb2dnbGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBncm91cDogZ3JvdXAudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdG9nZ2xlLFxuICAgICAgICAgICAgICBpc0NyZWRpdFJhdGluZzogc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uaXNDcmVkaXRSYXRpbmcsXG4gICAgICAgICAgICAgIGlzTXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlLFxuICAgICAgICAgICAgICBwaWNrZWQsXG4gICAgICAgICAgICAgIGRlbGV0ZWFibGUsXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uLFxuICAgICAgICAgICAgICBza2lsbE5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5tYXggPSBwYXJzZUludChzaGVldERhdGEuZGVmYXVsdCwgMTApICsgcGFyc2VJbnQoc2hlZXREYXRhLm9iamVjdC5wZXJzb25hbCwgMTApICsgT2JqZWN0LnZhbHVlcyhzaGVldERhdGEub2JqZWN0Lm9jY3VwYXRpb25Hcm91cHMpLnJlZHVjZSgocywgdikgPT4gcyArIHBhcnNlSW50KHYsIDEwKSwgMClcbiAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgIGlmIChzaGVldERhdGEuc2VsZWN0ZWQgPT09IHNoZWV0RGF0YS5tYXgpIHtcbiAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0FSQ0hFVFlQRV9TS0lMTFM6XG4gICAgICAgIHNoZWV0RGF0YS5tYXggPSAwXG4gICAgICAgIHNoZWV0RGF0YS5zZWxlY3RlZCA9IDBcbiAgICAgICAgc2hlZXREYXRhLnNraWxsSXRlbXMgPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zKSB7XG4gICAgICAgICAgbGV0IGdyb3VwID0gJ290aGVyJ1xuICAgICAgICAgIGNvbnN0IHJvd3MgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzLmxlbmd0aFxuICAgICAgICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFncy5pc011bHRpcGxlXG4gICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4OiAtMSxcbiAgICAgICAgICAgICAgbmFtZTogc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lLFxuICAgICAgICAgICAgICBncm91cCxcbiAgICAgICAgICAgICAgdG9nZ2xlOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc011bHRpcGxlOiB0cnVlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlOiBmYWxzZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHJvd3M7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBpc1BpY2thYmxlID0gZmFsc2VcbiAgICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pc0FyY2hldHlwZURlZmF1bHQpIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSAnZGVmYXVsdCdcbiAgICAgICAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgICAgICBpc1BpY2thYmxlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5tYXgrK1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSAnb3RoZXInXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgdG9nZ2xlID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uYXJjaGV0eXBlVG9nZ2xlXG4gICAgICAgICAgICBpZiAoaXNQaWNrYWJsZSkge1xuICAgICAgICAgICAgICB0b2dnbGUgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHNwZWNpYWxpemF0aW9uID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIGxldCBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgIGxldCBwaWNrZWQgPSBmYWxzZVxuICAgICAgICAgICAgbGV0IGRlbGV0ZWFibGUgPSBmYWxzZVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgcGlja2VkID0gdHJ1ZVxuICAgICAgICAgICAgICBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZFxuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgcGlja2VkID0gdHJ1ZVxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbiA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgICBza2lsbE5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZC5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodG9nZ2xlIHx8IChpc1BpY2thYmxlICYmIHBpY2tlZCkpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnNlbGVjdGVkKytcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBuYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5uYW1lXG4gICAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmNvY2lkTGFuZ3VhZ2VPd24pIHtcbiAgICAgICAgICAgICAgbmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgfSBlbHNlIGlmICghaXNQaWNrYWJsZSAmJiBwaWNrZWQpIHtcbiAgICAgICAgICAgICAgbmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFpc1BpY2thYmxlICYmIHBpY2tlZCkge1xuICAgICAgICAgICAgICBkZWxldGVhYmxlID0gIXNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLm9jY3VwYXRpb25Ub2dnbGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICBncm91cDogZ3JvdXAudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgdG9nZ2xlLFxuICAgICAgICAgICAgICBpc0NyZWRpdFJhdGluZzogZmFsc2UsXG4gICAgICAgICAgICAgIGlzTXVsdGlwbGU6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1BpY2thYmxlLFxuICAgICAgICAgICAgICBwaWNrZWQsXG4gICAgICAgICAgICAgIGRlbGV0ZWFibGUsXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uLFxuICAgICAgICAgICAgICBza2lsbE5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICBpZiAoc2hlZXREYXRhLnNlbGVjdGVkID09PSBzaGVldERhdGEubWF4KSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9QT0lOVFNfU0tJTExTOlxuICAgICAgICBzaGVldERhdGEuc2tpbGxzID0gW11cbiAgICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ09rYXkgPSAhKHRoaXMub2JqZWN0LmNyZWRpdFJhdGluZy5tYXggPiAwKVxuICAgICAgICBzaGVldERhdGEucGVyc29uYWwgPSB7XG4gICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgdG90YWw6IDIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5pbnQsIDEwKSksXG4gICAgICAgICAgcmVtYWluaW5nOiAwXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24gPSB7XG4gICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgcmVtYWluaW5nOiAwXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZSA9IHtcbiAgICAgICAgICBjb3VudDogMCxcbiAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICByZW1haW5pbmc6IDBcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5zZXR1cCAhPT0gJycpIHtcbiAgICAgICAgICBzaG93TW9uZXRhcnkgPSAoYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHNoZWV0RGF0YS5vYmplY3Quc2V0dXApKS5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzLmxlbmd0aCA+IDBcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5vY2N1cGF0aW9uICE9PSAnJykge1xuICAgICAgICAgIG9jY3VwYXRpb24gPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Qub2NjdXBhdGlvbilcbiAgICAgICAgICBpZiAob2NjdXBhdGlvbikge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdXG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGNhcmFjXSBvZiBPYmplY3QuZW50cmllcyhvY2N1cGF0aW9uLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHMpKSB7XG4gICAgICAgICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGlmIChjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKGNhcmFjLm11bHRpcGxpZXIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKSlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24udG90YWwgKz0gY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLnRvdGFsICs9IE1hdGgubWF4KC4uLm9wdGlvbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICAgICAgY29uc3QgYXJjaGV0eXBlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRCh0aGlzLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgICAgICAgaWYgKGFyY2hldHlwZS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGUudG90YWwgPSBhcmNoZXR5cGVbMF0uc3lzdGVtLmJvbnVzUG9pbnRzXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm9iamVjdC5za2lsbEl0ZW1zKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2tpbGxJdGVtcykge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV1cbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBza2lsbC5yb3dzLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICAgICAgICBjb25zdCByb3cgPSBza2lsbC5yb3dzW2luZGV4XVxuICAgICAgICAgICAgICBpZiAoIXNraWxsLmZsYWdzLmlzTXVsdGlwbGUgfHwgcm93LnNlbGVjdGVkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gZHVwbGljYXRlKHNraWxsLml0ZW0pXG4gICAgICAgICAgICAgICAgaWYgKHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UgJiYgdHlwZW9mIHJvdy5zZWxlY3RlZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIGl0ZW0gPSBkdXBsaWNhdGUocm93LnNlbGVjdGVkKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgYmFzZSA9IGl0ZW0uc3lzdGVtLmJhc2VcbiAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ0V4ID0gbmV3IFJlZ0V4cCgnQCcgKyBrZXksICdpJylcbiAgICAgICAgICAgICAgICAgICAgYmFzZSA9IGJhc2UucmVwbGFjZShyZWdFeCwgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgICAgICAgIGJhc2UgPSBNYXRoLmZsb29yKG5ldyBSb2xsKGJhc2UpLmV2YWx1YXRlKHsgYXN5bmM6IGZhbHNlIH0pLnRvdGFsKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgdG90YWxQb2ludHMgPSBwYXJzZUludChiYXNlLCAxMClcbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5wZXJzb25hbFBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIocm93LnBlcnNvbmFsUG9pbnRzKVxuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLnBlcnNvbmFsLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5vY2N1cGF0aW9uUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cub2NjdXBhdGlvblBvaW50cylcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbnVtID0gTnVtYmVyKHJvdy5hcmNoZXR5cGVQb2ludHMpXG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLmNvdW50ICs9IG51bVxuICAgICAgICAgICAgICAgICAgdG90YWxQb2ludHMgPSB0b3RhbFBvaW50cyArIG51bVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5leHBlcmllbmNlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cuZXhwZXJpZW5jZVBvaW50cylcbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzID0gdG90YWxQb2ludHMgKyBudW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmNvY2lkTGFuZ3VhZ2VPd24pIHtcbiAgICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyBpdGVtLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNraWxsLmZsYWdzLmlzQ3JlZGl0UmF0aW5nKSB7XG4gICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZSArICcgWycgKyB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWluICsgJyAtICcgKyB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4ICsgJ10nXG4gICAgICAgICAgICAgICAgICBpZiAodG90YWxQb2ludHMgPj0gdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1pbiAmJiB0b3RhbFBvaW50cyA8PSB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4KSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdPa2F5ID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJvdy5zZWxlY3RlZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIG5hbWUgPSBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyByb3cuc2VsZWN0ZWQgKyAnKSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLnNraWxscy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICAgIGlzT2NjdXBhdGlvbjogcm93Lm9jY3VwYXRpb25Ub2dnbGUsXG4gICAgICAgICAgICAgICAgICBpc0FyY2hldHlwZTogcm93LmFyY2hldHlwZVRvZ2dsZSxcbiAgICAgICAgICAgICAgICAgIGJhc2UsXG4gICAgICAgICAgICAgICAgICBwZXJzb25hbFBvaW50czogcm93LnBlcnNvbmFsUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgb2NjdXBhdGlvblBvaW50czogcm93Lm9jY3VwYXRpb25Qb2ludHMsXG4gICAgICAgICAgICAgICAgICBhcmNoZXR5cGVQb2ludHM6IHJvdy5hcmNoZXR5cGVQb2ludHMsXG4gICAgICAgICAgICAgICAgICBleHBlcmllbmNlUG9pbnRzOiByb3cuZXhwZXJpZW5jZVBvaW50cyxcbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgc2hvd0NyZWRpdFJhdGluZzogc2hvd01vbmV0YXJ5ICYmIGtleSA9PT0gdGhpcy5jb2NpZENyZWRpdFJhdGluZ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLmNyZWRpdFJhdGluZ09rYXkpIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbC5yZW1haW5pbmcgPSBzaGVldERhdGEucGVyc29uYWwudG90YWwgLSBzaGVldERhdGEucGVyc29uYWwuY291bnRcbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb24ucmVtYWluaW5nID0gc2hlZXREYXRhLm9jY3VwYXRpb24udG90YWwgLSBzaGVldERhdGEub2NjdXBhdGlvbi5jb3VudFxuICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLnJlbWFpbmluZyA9IHNoZWV0RGF0YS5hcmNoZXR5cGUudG90YWwgLSBzaGVldERhdGEuYXJjaGV0eXBlLmNvdW50XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQkFDS1NUT1JZOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgYWxsQmFja3N0b3JpZXMgPSBhd2FpdCB0aGlzLm9iamVjdC5jYWNoZUJhY2tzdG9yaWVzXG4gICAgICAgICAgc2hlZXREYXRhLmJhY2tzdG9yaWVzID0ge31cbiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuYmFja3N0b3JpZXNbaW5kZXhdID0ge1xuICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLm5hbWUsXG4gICAgICAgICAgICAgIHJvbGxzOiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCh0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0ua2V5LCBhbGxCYWNrc3RvcmllcykubGVuZ3RoID8gdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLmtleSA6ICcnKSxcbiAgICAgICAgICAgICAgdmFsdWU6IHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQ1JFQVRFOlxuICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmNyZWF0ZUJ1dHRvbiA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5rZXlwcmVzcyhlID0+IC90ZXh0YXJlYS9pLnRlc3QoKGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudCkudGFnTmFtZSkgfHwgKGUua2V5Q29kZSB8fCBlLndoaWNoIHx8IGUuY2hhckNvZGUgfHwgMCkgIT09IDEzKVxuICAgIGh0bWwuZmluZCgnLnN1Ym1pdF9vbl9jaGFuZ2UnKS5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5yb2xsLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pbmNyZWFzZS0xMC1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYzEwLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaW5jcmVhc2UtY2hhcmFjdGVyaXN0aWMnKS5jbGljayh0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWNyZWFzZS1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRlY3JlYXNlLTEwLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5yb2xsX2FsbCcpLmNsaWNrKHRoaXMuX29uUm9sbEFsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uLnJvbGxfZWR1JykuY2xpY2sodGhpcy5fb25Sb2xsRWR1LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24ucm9sbF9sdWNrJykuY2xpY2sodGhpcy5fb25Sb2xsTHVjay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0gaW5wdXQuc3VibWl0X29uX2JsdXInKS5ibHVyKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbSBpbnB1dC5zYXZlLWNoYXJhY3RlcmlzdGljLW9uLWJsdXInKS5ibHVyKHRoaXMuX29uQ2hhbmdlU2F2ZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbS50b2dnbGVhYmxlJykuY2xpY2sodGhpcy5fb25Ub2dnbGVTa2lsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0uY2xpY2thYmxlJykuY2xpY2sodGhpcy5fb25DbGlja1BpY2tTa2lsbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNraWxscy1saXN0IGlucHV0JykuY2xpY2sodGhpcy5fb25DbGlja1NraWxsU3BlY2lhbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNraWxscy1saXN0IC5yZW1vdmUtc2tpbGwnKS5jbGljayh0aGlzLl9vbkNsaWNrUmVtb3ZlU2tpbGwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtIGlucHV0LnNraWxsLWFkanVzdG1lbnQnKS5ibHVyKHRoaXMuX29uQ2hhbmdlU2tpbGxQb2ludHMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ3RleHRhcmVhLmJhY2tzdG9yeS10ZXh0Jykua2V5dXAodGhpcy5fb25DaGFuZ2VCYWNrc3RvcnlUZXh0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24uYmFja3N0b3J5LXJvbGwnKS5jbGljayh0aGlzLl9vblJvbGxCYWNrc3RvcnkuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5iYWNrc3RvcnktcmVzZXQnKS5jbGljayh0aGlzLl9vblJlc2V0QmFja3N0b3J5LmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyByb2xsTWVzc2FnZSAocm9sbHMpIHtcbiAgICBpZiAocm9sbHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBodG1sID0gW11cbiAgICAgIGZvciAoY29uc3Qgcm9sbCBvZiByb2xscykge1xuICAgICAgICBodG1sLnB1c2goYXdhaXQgcmVuZGVyVGVtcGxhdGUoUm9sbC5DSEFUX1RFTVBMQVRFLCB7XG4gICAgICAgICAgZm9ybXVsYTogKENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhyb2xsWzBdKT8ubGFiZWwgPz8gcm9sbFswXSkgKyAnOiAnICsgcm9sbFsxXSxcbiAgICAgICAgICB0b29sdGlwOiBhd2FpdCByb2xsWzJdLmdldFRvb2x0aXAoKSxcbiAgICAgICAgICB0b3RhbDogcm9sbFsyXS50b3RhbFxuICAgICAgICB9KSlcbiAgICAgIH1cbiAgICAgIENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgc3BlYWtlcjoge1xuICAgICAgICAgIGFsaWFzOiBnYW1lLnVzZXIubmFtZVxuICAgICAgICB9LFxuICAgICAgICBjb250ZW50OiBodG1sLmpvaW4oJzxkaXY+Jm5ic3A7PC9kaXY+JyksXG4gICAgICAgIHdoaXNwZXI6IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFkZEl0ZW1Ub0xpc3QgKGl0ZW0sIHsgaXNPY2N1cGF0aW9uRGVmYXVsdCA9IGZhbHNlLCBpbk9jY3VwYXRpb25Hcm91cCA9IGZhbHNlLCBvY2N1cGF0aW9uVG9nZ2xlID0gZmFsc2UsIGlzQXJjaGV0eXBlRGVmYXVsdCA9IGZhbHNlLCBhcmNoZXR5cGVUb2dnbGUgPSBmYWxzZSwgaXNDcmVkaXRSYXRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBjb25zdCBrZXkgPSAoaXRlbS5mbGFncy5Db0M3Py5jb2NpZEZsYWc/LmlkID8/IGl0ZW0ubmFtZSlcbiAgICBpZiAoaXRlbS50eXBlICE9PSAnc2tpbGwnKSB7XG4gICAgICB0aGlzLm9iamVjdC5pbnZlc3RpZ2F0b3JJdGVtcy5wdXNoKGl0ZW0pXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgaXNNdWx0aXBsZSA9ICEhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCAmJiAoKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMucmVxdWlyZXNuYW1lICYmICEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5vbmx5b25lID8/IGZhbHNlKSkgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5waWNrbmFtZW9ubHkgfHwgaXRlbS5uYW1lID09PSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFueVNwZWNOYW1lJykpKVxuICAgIGNvbnN0IGZsYWdzID0ge1xuICAgICAgaXNPY2N1cGF0aW9uRGVmYXVsdCxcbiAgICAgIGluT2NjdXBhdGlvbkdyb3VwLFxuICAgICAgaXNBcmNoZXR5cGVEZWZhdWx0LFxuICAgICAgaXNDcmVkaXRSYXRpbmcsXG4gICAgICBvY2N1cGF0aW9uVG9nZ2xlLFxuICAgICAgYXJjaGV0eXBlVG9nZ2xlXG4gICAgfVxuICAgIGNvbnN0IHJvd3MgPSB7XG4gICAgICBvY2N1cGF0aW9uUG9pbnRzOiAnJyxcbiAgICAgIGFyY2hldHlwZVBvaW50czogJycsXG4gICAgICBleHBlcmllbmNlUG9pbnRzOiAnJyxcbiAgICAgIHBlcnNvbmFsUG9pbnRzOiAnJyxcbiAgICAgIHNlbGVjdGVkOiBmYWxzZVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSA9IHtcbiAgICAgICAgaXRlbSxcbiAgICAgICAgZmxhZ3M6IG1lcmdlT2JqZWN0KGZsYWdzLCB7IGlzTXVsdGlwbGUgfSwgeyBpbnBsYWNlOiBmYWxzZSB9KSxcbiAgICAgICAgcm93czogW11cbiAgICAgIH1cbiAgICAgIGlmICghaXNNdWx0aXBsZSB8fCAhKGlzT2NjdXBhdGlvbkRlZmF1bHQgPT09IGZhbHNlICYmIGluT2NjdXBhdGlvbkdyb3VwID09PSBmYWxzZSAmJiBpc0FyY2hldHlwZURlZmF1bHQgPT09IGZhbHNlKSkge1xuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5wdXNoKG1lcmdlT2JqZWN0KGZsYWdzLCByb3dzLCB7IGlucGxhY2U6IGZhbHNlIH0pKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWlzTXVsdGlwbGUpIHtcbiAgICAgICAgZm9yIChjb25zdCBmbGFnIGluIGZsYWdzKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbMF1bZmxhZ10gPSB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1swXVtmbGFnXSB8fCBmbGFnc1tmbGFnXVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5wdXNoKG1lcmdlT2JqZWN0KGZsYWdzLCByb3dzLCB7IGlucGxhY2U6IGZhbHNlIH0pKVxuICAgICAgfVxuICAgICAgZm9yIChjb25zdCBmbGFnIGluIGZsYWdzKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFnc1tmbGFnXSA9IHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5mbGFnc1tmbGFnXSB8fCBmbGFnc1tmbGFnXVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWlzTXVsdGlwbGUgJiYgZmxhZ3MuaXNDcmVkaXRSYXRpbmcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzWzBdLm9jY3VwYXRpb25Qb2ludHMgPSB0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWluXG4gICAgfVxuICB9XG5cbiAgY2xlYXJTZXR1cFBvaW50cyAoKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBQb2ludHMpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSAnJ1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldFNraWxsTGlzdHMgKCkge1xuICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXMgPSB7fVxuICAgIHRoaXMub2JqZWN0Lm9jY3VwYXRpb25Hcm91cHMgPSB7fVxuICAgIHRoaXMub2JqZWN0LmludmVzdGlnYXRvckl0ZW1zID0gW11cbiAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUgPSBkdXBsaWNhdGUodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzKVxuICAgIGNvbnN0IHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgIGNvbnN0IG9jY3VwYXRpb24gPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3Qub2NjdXBhdGlvbilcbiAgICBsZXQgYXJjaGV0eXBlID0gZmFsc2VcbiAgICBpZiAodGhpcy5vYmplY3QuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgYXJjaGV0eXBlID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LmFyY2hldHlwZSlcbiAgICB9XG4gICAgaWYgKHNldHVwICYmIG9jY3VwYXRpb24gJiYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpIHx8IGFyY2hldHlwZSkpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zID0gW11cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzZXR1cC5zeXN0ZW0uYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zLnB1c2goe1xuICAgICAgICAgIG5hbWU6IHNldHVwLnN5c3RlbS5iaW9TZWN0aW9uc1tpbmRleF0sXG4gICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgIGtleTogJ3J0Li5iYWNrc3RvcnktJyArIENvQzdVdGlsaXRpZXMudG9LZWJhYkNhc2Uoc2V0dXAuc3lzdGVtLmJpb1NlY3Rpb25zW2luZGV4XSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIHRoaXMub2JqZWN0LnBlcnNvbmFsID0gb2NjdXBhdGlvbi5zeXN0ZW0ucGVyc29uYWxcbiAgICAgIHRoaXMub2JqZWN0LmNyZWRpdFJhdGluZyA9IG9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZ1xuICAgICAgbGV0IGl0ZW1zID0gW11cbiAgICAgIGl0ZW1zID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkoc2V0dXAuc3lzdGVtLml0ZW1zKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbXNbaW5kZXhdKVxuICAgICAgfVxuICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5za2lsbHMpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gaXRlbXMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaXNPY2N1cGF0aW9uRGVmYXVsdDogdHJ1ZSwgb2NjdXBhdGlvblRvZ2dsZTogdHJ1ZSB9KVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgZ3JvdXAgPSAwLCBnbSA9IG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGdyb3VwIDwgZ207IGdyb3VwKyspIHtcbiAgICAgICAgdGhpcy5vYmplY3Qub2NjdXBhdGlvbkdyb3Vwc1tncm91cF0gPSBvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbZ3JvdXBdLm9wdGlvbnNcbiAgICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbZ3JvdXBdLnNraWxscylcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaW5PY2N1cGF0aW9uR3JvdXA6IGdyb3VwIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhcmNoZXR5cGUpIHtcbiAgICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShhcmNoZXR5cGUuc3lzdGVtLnNraWxscylcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaXNBcmNoZXR5cGVEZWZhdWx0OiB0cnVlLCBhcmNoZXR5cGVUb2dnbGU6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKE51bWJlcih0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4KSA+IDApIHtcbiAgICAgICAgY29uc3QgbmFtZUNyZWRpdFJhdGluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmtleXMuJyArIHRoaXMuY29jaWRDcmVkaXRSYXRpbmcpXG4gICAgICAgIGNvbnN0IGZsYWdzID0geyBpc09jY3VwYXRpb25EZWZhdWx0OiB0cnVlLCBvY2N1cGF0aW9uVG9nZ2xlOiB0cnVlLCBpc0NyZWRpdFJhdGluZzogdHJ1ZSB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkQ3JlZGl0UmF0aW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QodGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkQ3JlZGl0UmF0aW5nXS5pdGVtLCBmbGFncylcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1tuYW1lQ3JlZGl0UmF0aW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QodGhpcy5vYmplY3Quc2tpbGxJdGVtc1tuYW1lQ3JlZGl0UmF0aW5nXS5pdGVtLCBmbGFncylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBza2lsbCA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSUQodGhpcy5jb2NpZENyZWRpdFJhdGluZylcbiAgICAgICAgICBpZiAoc2tpbGwubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3Qoc2tpbGxbMF0sIGZsYWdzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5KSB7XG4gICAgICBjb25zdCBkcmFnRGF0YSA9IHsgdHlwZTogJ2ludmVzdGlnYXRvckNoYXJhY3RlcmlzdGljJywga2V5OiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNLZXksIHZhbHVlOiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudmFsdWUgfVxuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YUxpc3QgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBpZiAodHlwZW9mIGRhdGFMaXN0LnR5cGUgIT09ICd1bmRlZmluZWQnICYmIGRhdGFMaXN0LnR5cGUgPT09ICdpbnZlc3RpZ2F0b3JDaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgZGF0YUxpc3QuZGVzdGluYXRpb24gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5XG4gICAgICAgIGRhdGFMaXN0Lm9rYXkgPSBmYWxzZVxuICAgICAgICBpZiAoZGF0YUxpc3Qua2V5ID09PSAnLScgJiYgdHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMub2JqZWN0LnBsYWNlYWJsZS5pbmRleE9mKHBhcnNlSW50KGRhdGFMaXN0LnZhbHVlLCAxMCkpXG4gICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5wdXNoKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSwgMTApKVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPSBwYXJzZUludChkYXRhTGlzdC52YWx1ZSwgMTApXG4gICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnNvcnQoKS5yZXZlcnNlKClcbiAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldICE9PSAndW5kZWZpbmVkJyAmJiBkYXRhTGlzdC5kZXN0aW5hdGlvbiA9PT0gJy0nKSB7XG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUucHVzaChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldLCAxMCkpXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldID0gJydcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5zb3J0KCkucmV2ZXJzZSgpXG4gICAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wID0gKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gPT09ICcnID8gJycgOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldLCAxMCkpXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSA9ICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPT09ICcnID8gJycgOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0sIDEwKSlcbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPSB0ZW1wXG4gICAgICAgICAgZGF0YUxpc3Qub2theSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YUxpc3Qub2theSkge1xuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICB9XG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG4gICAgaWYgKFt0aGlzLnBhZ2VMaXN0LlBBR0VfQVJDSEVUWVBFX1NLSUxMUywgdGhpcy5wYWdlTGlzdC5QQUdFX09DQ1VQQVRJT05fU0tJTExTXS5pbmNsdWRlcyh0aGlzLm9iamVjdC5zdGVwKSkge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbSlcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uQ2xpY2tTa2lsbFNwZWNpYWwgKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxuXG4gIF9vbkNsaWNrUmVtb3ZlU2tpbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCBrZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5wYXJlbnROb2RlPy5kYXRhc2V0Py5rZXlcbiAgICBjb25zdCBpbmRleCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LnBhcmVudE5vZGU/LmRhdGFzZXQ/LmluZGV4XG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0/LnJvd3NbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3Muc3BsaWNlKGluZGV4LCBpbmRleClcbiAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlU2tpbGwgKGV2ZW50KSB7XG4gICAgY29uc3Qga2V5ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8ua2V5XG4gICAgY29uc3QgaW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py5pbmRleFxuICAgIGNvbnN0IHRvZ2dsZUtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LnRvZ2dsZUtleVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldPy5yb3dzW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldID0gIXRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrUGlja1NraWxsIChldmVudCkge1xuICAgIGNvbnN0IGtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LmtleVxuICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8uaW5kZXhcbiAgICBjb25zdCB0b2dnbGVLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py50b2dnbGVLZXlcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldID0gZmFsc2VcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgIH1cbiAgICAgIGxldCBza2lsbExpc3QgPSBbXVxuICAgICAgY29uc3QgZ3JvdXAgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NHcm91cEZyb21LZXkoa2V5KVxuICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgIHNraWxsTGlzdCA9IChhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IG5ldyBSZWdFeHAoJ14nICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChncm91cCkgKyAnLiskJyksIHR5cGU6ICdpJyB9KSkuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICAgIHJldHVybiAhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiYgISEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSkpXG4gICAgICAgIH0pXG4gICAgICAgIGlmIChza2lsbExpc3QubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZy5jcmVhdGUoe1xuICAgICAgICBza2lsbHM6IHNraWxsTGlzdCxcbiAgICAgICAgYWxsb3dDdXN0b206ICh0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lID8/IGZhbHNlKSxcbiAgICAgICAgZml4ZWRCYXNlVmFsdWU6IHRydWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uTmFtZTogdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICBsYWJlbDogdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZVxuICAgICAgfSlcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGlmIChza2lsbERhdGEuc2VsZWN0ZWQgIT09ICcnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gc2tpbGxMaXN0LmZpbmQoaSA9PiBpLmlkID09PSBza2lsbERhdGEuc2VsZWN0ZWQpXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdW3RvZ2dsZUtleV0gPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpbGxEYXRhLm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gc2tpbGxEYXRhLm5hbWVcbiAgICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bdG9nZ2xlS2V5XSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgaWYgKHNraWxsRGF0YS5zZWxlY3RlZCAhPT0gJycpIHtcbiAgICAgICAgICBzZWxlY3RlZCA9IHNraWxsTGlzdC5maW5kKGkgPT4gaS5pZCA9PT0gc2tpbGxEYXRhLnNlbGVjdGVkKVxuICAgICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5uYW1lICE9PSAnJykge1xuICAgICAgICAgIHNlbGVjdGVkID0gc2tpbGxEYXRhLm5hbWVcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5wdXNoKHtcbiAgICAgICAgICBpc09jY3VwYXRpb25EZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgICBpbk9jY3VwYXRpb25Hcm91cDogZmFsc2UsXG4gICAgICAgICAgaXNBcmNoZXR5cGVEZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgICBpc0NyZWRpdFJhdGluZzogZmFsc2UsXG4gICAgICAgICAgb2NjdXBhdGlvblRvZ2dsZTogKHRvZ2dsZUtleSA9PT0gJ29jY3VwYXRpb25Ub2dnbGUnKSxcbiAgICAgICAgICBhcmNoZXR5cGVUb2dnbGU6ICh0b2dnbGVLZXkgPT09ICdhcmNoZXR5cGVUb2dnbGUnKSxcbiAgICAgICAgICBvY2N1cGF0aW9uUG9pbnRzOiAnJyxcbiAgICAgICAgICBhcmNoZXR5cGVQb2ludHM6ICcnLFxuICAgICAgICAgIGV4cGVyaWVuY2VQb2ludHM6ICcnLFxuICAgICAgICAgIHBlcnNvbmFsUG9pbnRzOiAnJyxcbiAgICAgICAgICBzZWxlY3RlZFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VTa2lsbFBvaW50cyAoZXZlbnQpIHtcbiAgICBjb25zdCBpbnB1dCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBhZGp1c3RtZW50ID0gaW5wdXQuZGF0YSgnYWRqdXN0bWVudCcpXG4gICAgY29uc3QgbGkgPSBpbnB1dC5jbG9zZXN0KCdsaScpXG4gICAgY29uc3Qga2V5ID0gbGkuZGF0YSgna2V5JylcbiAgICBjb25zdCBpbmRleCA9IGxpLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XT8ucm93c1tpbmRleF1bYWRqdXN0bWVudF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bYWRqdXN0bWVudF0gPSBpbnB1dC52YWwoKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlQmFja3N0b3J5VGV4dCAoZXZlbnQpIHtcbiAgICBjb25zdCB0ZXh0YXJlYSA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBpbmRleCA9IHRleHRhcmVhLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSA9IHRleHRhcmVhLnZhbCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEJhY2tzdG9yeSAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgaW5kZXggPSBidXR0b24uZGF0YSgnaW5kZXgnKVxuICAgIGNvbnN0IGtleSA9IGJ1dHRvbi5kYXRhKCdrZXknKVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3Qgcm9sbHRhYmxlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRChrZXkpXG4gICAgICBpZiAocm9sbHRhYmxlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB0YWJsZVJlc3VsdCA9IGF3YWl0IHJvbGx0YWJsZVswXS5yb2xsKClcbiAgICAgICAgaWYgKHRhYmxlUmVzdWx0LnJlc3VsdHNbMF0udHlwZSA9PT0gQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLlRFWFQpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWUgPSAodGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLnZhbHVlICsgJ1xcbicgKyB0YWJsZVJlc3VsdC5yZXN1bHRzWzBdLnRleHQudHJpbSgpKS50cmltKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRCYWNrc3RvcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IGluZGV4ID0gYnV0dG9uLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSA9ICcnXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsTHVjayAoZXZlbnQpIHtcbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5zZXR1cClcbiAgICBpZiAoc2V0dXApIHtcbiAgICAgIGNvbnN0IGRpZSA9IGF3YWl0IG5ldyBSb2xsKHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMubHVjay50b1N0cmluZygpKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5sdWNrID0gW2RpZS50b3RhbF1cbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShSb2xsLkNIQVRfVEVNUExBVEUsIHtcbiAgICAgICAgZm9ybXVsYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5Sb2xsVHdpY2VGb3JMdWNrJykgKyAnOiAnICsgc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5sdWNrLnRvU3RyaW5nKCksXG4gICAgICAgIHRvb2x0aXA6IGF3YWl0IGRpZS5nZXRUb29sdGlwKCksXG4gICAgICAgIHRvdGFsOiBkaWUudG90YWxcbiAgICAgIH0pXG4gICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgd2hpc3BlcjogQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICAgIH0pXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxFZHUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoIXRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1LnJvbGxlZCAmJiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS50b3RhbCkge1xuICAgICAgICBsZXQgdmFsdWUgPSBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5lZHUsIDEwKVxuICAgICAgICBjb25zdCBtZXNzYWdlID0gW11cbiAgICAgICAgZm9yIChsZXQgcm9sbHMgPSB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS50b3RhbDsgcm9sbHMgPiAwOyByb2xscy0tKSB7XG4gICAgICAgICAgY29uc3QgZGllID0gYXdhaXQgbmV3IFJvbGwoJzFkMTAwJykuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGlmIChkaWUudG90YWwgPiB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgYXVnbWVudERpZSA9IGF3YWl0IG5ldyBSb2xsKCcxZDEwJykuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgbWVzc2FnZS5wdXNoKGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2U3VjY2VzcycsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5FZHVjYXRpb24nKSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgYXVnbWVudDogYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YClcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBwYXJzZUludChhdWdtZW50RGllLnRvdGFsLCAxMClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZS5wdXNoKGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5EZXZGYWlsdXJlJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW06IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkVkdWNhdGlvbicpLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiB2YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsQWxsNERldicpLFxuICAgICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2Uuam9pbignJyksXG4gICAgICAgICAgd2hpc3BlcjogQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMuZWR1ID0gdmFsdWUgLSBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5lZHUsIDEwKVxuICAgICAgICB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS5yb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEFsbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgcm9sbHMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnc3RyJywgJ2NvbicsICdzaXonLCAnZGV4JywgJ2FwcCcsICdpbnQnLCAncG93JywgJ2VkdScsICdsdWNrJ10pIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgIGlmIChyZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgIHJvbGxzLnB1c2gocmVzdWx0KVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJvbGxNZXNzYWdlKHJvbGxzKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljMTAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgMTAsIGxpLmRhdGFzZXQubWluLCBsaS5kYXRhc2V0Lm1heClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaS5kYXRhc2V0LmtleSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5Q2hhcmFjdGVyaXN0aWMobGkuZGF0YXNldC5rZXksIDEwKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBpZiAodHlwZW9mIGxpLmRhdGFzZXQub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5taW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5T2Zmc2V0KGxpLmRhdGFzZXQub2Zmc2V0LCAxLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAxKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBpZiAodHlwZW9mIGxpLmRhdGFzZXQub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5taW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5T2Zmc2V0KGxpLmRhdGFzZXQub2Zmc2V0LCAtMSwgbGkuZGF0YXNldC5taW4sIGxpLmRhdGFzZXQubWF4KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpLmRhdGFzZXQua2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlDaGFyYWN0ZXJpc3RpYyhsaS5kYXRhc2V0LmtleSwgLTEpXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgLTEwLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAtMTApXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBtb2RpZnlPZmZzZXQgKGtleSwgdmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSA9IE1hdGgubWF4KE1hdGgubWluKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSArIHZhbHVlLCBwYXJzZUludChtYXgsIDEwKSksIHBhcnNlSW50KG1pbiwgMTApKVxuICB9XG5cbiAgbW9kaWZ5Q2hhcmFjdGVyaXN0aWMgKGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaWYgKGlucHV0KSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSkgKyB2YWx1ZVxuICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMucm9sbE1lc3NhZ2UoW3Jlc3VsdF0pXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gJChgI2ludmVzdGlnYXRvci13aXphcmQtYXBwbGljYXRpb24gbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpLmZpbmQoJ2lucHV0JylcbiAgICBjb25zdCBmb3JtdWxhID0gbGkuZGF0YSgncm9sbCcpXG4gICAgaWYgKGlucHV0ICYmIGZvcm11bGEpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZCB8fCB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID09PSAnJykge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoZm9ybXVsYS50b1N0cmluZygpKVxuICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgaW5wdXQudmFsKHJvbGwudG90YWwpXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSBOdW1iZXIocm9sbC50b3RhbClcbiAgICAgICAgcmV0dXJuIFtrZXksIGZvcm11bGEudG9TdHJpbmcoKSwgcm9sbF1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKiogQG92ZXJyaWRlXG4gICAqIEEgc3ViY2xhc3Mgb2YgdGhlIEZvcm1BcHBsaWNhdGlvbiBtdXN0IGltcGxlbWVudCB0aGUgX29uQ2hhbmdlU3VibWl0IG1ldGhvZC5cbiAgICovXG4gIF9vbkNoYW5nZVN1Ym1pdCAoZXZlbnQpIHtcbiAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgfVxuXG4gIF9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbmFtZSA9IG9iai5wcm9wKCduYW1lJylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW25hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbbmFtZV0gPSBvYmoudmFsKClcbiAgICAgIGxldCBlbXB0aWVzID0gZmFsc2VcbiAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldICE9PSAnJykge1xuICAgICAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICAgICAgdG90YWwgKz0gcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVtcHRpZXMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG9ialRvdGFsID0gb2JqLmNsb3Nlc3QoJ29sLml0ZW0tbGlzdCcpLmZpbmQoJ3NwYW4udG90YWwnKVxuICAgICAgY29uc3QgbWF4ID0gcGFyc2VJbnQob2JqVG90YWwuc2libGluZ3MoJ3NwYW4udmFsdWUnKS50ZXh0KCksIDEwKVxuICAgICAgb2JqVG90YWwudGV4dCh0b3RhbClcbiAgICAgIGlmICh0b3RhbCA9PT0gbWF4ICYmICFlbXB0aWVzKSB7XG4gICAgICAgIGlmIChvYmouY2xvc2VzdCgnZm9ybScpLmZpbmQoJ2J1dHRvbi5zdWJtaXQtYnV0dG9uW2RhdGEtYnV0dG9uPW5leHRdJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG9iai5jbG9zZXN0KCdmb3JtJykuZmluZCgnYnV0dG9uLnN1Ym1pdC1idXR0b25bZGF0YS1idXR0b249bmV4dF0nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldFBhZ2VOdW1iZXIgKGRpcmVjdGlvbikge1xuICAgIGNvbnN0IHBhZ2VPcmRlciA9IHRoaXMucGFnZU9yZGVyXG4gICAgY29uc3Qga2V5ID0gcGFyc2VJbnQoT2JqZWN0LmtleXMocGFnZU9yZGVyKS5maW5kKGtleSA9PiBwYWdlT3JkZXJba2V5XSA9PT0gdGhpcy5vYmplY3Quc3RlcCksIDEwKSArIGRpcmVjdGlvblxuICAgIHJldHVybiBwYWdlT3JkZXJba2V5XVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kLlxuICAgKi9cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKFsnYmFjaycsICduZXh0J10uaW5jbHVkZXMoZXZlbnQuc3VibWl0dGVyPy5kYXRhc2V0LmJ1dHRvbikpIHtcbiAgICAgIGlmIChldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lLmluZGV4T2YoJ2N1cnJlbnRseS1zdWJtaXR0aW5nJykgPiAtMSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGV2ZW50LnN1Ym1pdHRlci5jbGFzc05hbWUgPSBldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lICsgJyBjdXJyZW50bHktc3VibWl0dGluZydcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZm9ybURhdGFbJ3dvcmxkLWVyYSddICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtb3duZXJzaGlwJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFNldHVwICE9PSBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRTZXR1cCA9IGZvcm1EYXRhWydkZWZhdWx0LXNldHVwJ11cbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnLCB0aGlzLm9iamVjdC5kZWZhdWx0U2V0dXApXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwID0gdGhpcy5vYmplY3QuZGVmYXVsdFNldHVwXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdE93bmVyc2hpcCAhPT0gZm9ybURhdGFbJ2RlZmF1bHQtb3duZXJzaGlwJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdE93bmVyc2hpcCA9IGZvcm1EYXRhWydkZWZhdWx0LW93bmVyc2hpcCddXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZE93bmVyc2hpcCcsIHRoaXMub2JqZWN0LmRlZmF1bHRPd25lcnNoaXApXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdEVyYSAhPT0gZm9ybURhdGFbJ3dvcmxkLWVyYSddKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9ICQodGhpcy5lbGVtZW50LmZpbmQoJ2Zvcm0nKSlcbiAgICAgICAgY29uc3Qgc3RhcnRlZCA9IERhdGUubm93KClcbiAgICAgICAgb2JqLmZpbmQoJy5kaWFsb2ctYnV0dG9uczpmaXJzdCcpLmhpZGUoKVxuICAgICAgICBvYmouZmluZCgnLnNjcm9sbHNlY3Rpb246Zmlyc3QnKS5oaWRlKClcbiAgICAgICAgb2JqLmZpbmQoJy5lcmFjaGFuZ2U6Zmlyc3QnKS5zaG93KClcbiAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdEVyYSA9IGZvcm1EYXRhWyd3b3JsZC1lcmEnXVxuICAgICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICd3b3JsZEVyYScsIHRoaXMub2JqZWN0LmRlZmF1bHRFcmEpXG4gICAgICAgIHRoaXMub2JqZWN0LmNhY2hlQ29DSUQgPSBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmxvYWRDYWNoZUl0ZW1CeUNvQ0lEKClcbiAgICAgICAgLy8gVG8gcHJldmVudCBmbGFzaGluZyBzaG93IG1lc3NhZ2UgZm9yIGF0IGxlYXN0IDUwMCBtc1xuICAgICAgICBjb25zdCBidWZmZXIgPSA1MDAgLSAoRGF0ZS5ub3coKSAtIHN0YXJ0ZWQpXG4gICAgICAgIC8vIERvbid0IGJvdGhlciBpZiBsZXNzIHRoYW4gMTBtcyByZW1haW5pbmdcbiAgICAgICAgaWYgKGJ1ZmZlciA+IDEwKSB7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGJ1ZmZlcikpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodHlwZW9mIGZvcm1EYXRhWydjaGFyYWN0ZXJpc3RpY3MtbWV0aG9kJ10gIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgICBjb25zdCB0eXBlID0gTnVtYmVyKGZvcm1EYXRhWydjaGFyYWN0ZXJpc3RpY3MtbWV0aG9kJ10pXG4gICAgICAgIGlmICh0eXBlID09PSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0RFRkFVTFQpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSBmYWxzZVxuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFtdXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9QT0lOVFMpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSB0cnVlXG4gICAgICAgICAgdGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzID0gW11cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFUykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmVuZm9yY2VQb2ludEJ1eSA9IGZhbHNlXG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFs5MCwgODAsIDcwLCA2MCwgNjAsIDUwLCA1MCwgNDBdXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFs4MCwgNzAsIDYwLCA2MCwgNTAsIDUwLCA1MCwgNDBdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFBvaW50QnV5JywgdGhpcy5vYmplY3QuZW5mb3JjZVBvaW50QnV5KVxuICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWlja0ZpcmUnLCB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMpXG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZCA9ICh0eXBlb2YgZm9ybURhdGFbJ3Jlcm9sbHMtZW5hYmxlZCddID09PSAnc3RyaW5nJylcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFJlcm9sbHMnLCB0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZClcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihmb3JtRGF0YVsncXVpY2stZmlyZS12YWx1ZXMtJyArIGldKVxuICAgICAgICBpZiAobnVtID4gMCkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlc1tpXSA9IG51bVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMuc29ydCgpLnJldmVyc2UoKVxuICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlID0gZHVwbGljYXRlKHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcylcbiAgICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtZW5hYmxlZCddID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5LnRvU3RyaW5nKCkgPT09ICcwJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSA9IDFcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScsIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkgPSBmb3JtRGF0YVsnZGVmYXVsdC1xdWFudGl0eSddXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknLCB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5LnRvU3RyaW5nKCkgIT09ICcwJykge1xuICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkgPSAwXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JywgdGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2Mtc2V0dXAnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cCAhPT0gZm9ybURhdGFbJ2NvYy1zZXR1cCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwID0gZm9ybURhdGFbJ2NvYy1zZXR1cCddXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5hcmNoZXR5cGUgIT09IGZvcm1EYXRhWydjb2MtYXJjaGV0eXBlJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuYXJjaGV0eXBlID0gZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXVxuICAgICAgICB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgPSAnJ1xuICAgICAgICB0aGlzLmNsZWFyU2V0dXBQb2ludHMoKVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0Lm9jY3VwYXRpb24gIT09IGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0Lm9jY3VwYXRpb24gPSBmb3JtRGF0YVsnY29jLW9jY3VwYXRpb24nXVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cFBvaW50cykge1xuICAgICAgICBpZiAodHlwZW9mIGZvcm1EYXRhW2tleV0gIT09ICd1bmRlZmluZWQnICYmIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gIT09IGZvcm1EYXRhW2tleV0pIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID0gZm9ybURhdGFba2V5XVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgIT09IGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyA9IGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZSA9IGR1cGxpY2F0ZSh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGZsYXRLZXlzID0gWyduYW1lJywgJ2FnZScsICdyZXNpZGVuY2UnLCAnYmlydGhwbGFjZScsICdsYW5ndWFnZScsICdhdmF0YXInLCAndG9rZW4nXVxuICAgIGZvciAoY29uc3Qga2V5IG9mIGZsYXRLZXlzKSB7XG4gICAgICBpZiAodHlwZW9mIGZvcm1EYXRhW2tleV0gIT09ICd1bmRlZmluZWQnICYmIHRoaXMub2JqZWN0W2tleV0gIT09IGZvcm1EYXRhW2tleV0pIHtcbiAgICAgICAgdGhpcy5vYmplY3Rba2V5XSA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgaWYgKGtleSA9PT0gJ2FnZScpIHtcbiAgICAgICAgICB0aGlzLmdldEFnZUFkanVzdG1lbnRzKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXZlbnQuc3VibWl0dGVyPy5kYXRhc2V0LmJ1dHRvbiA9PT0gJ2JhY2snKSB7XG4gICAgICBjb25zdCBwYWdlTnVtYmVyID0gdGhpcy5nZXRQYWdlTnVtYmVyKC0xKVxuICAgICAgaWYgKHR5cGVvZiBwYWdlTnVtYmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLm9iamVjdC5zdGVwID0gcGFnZU51bWJlclxuICAgICAgICAvLyBXaGVuIG1vdmluZyBzdGVwIHJlc2V0IHNjcm9sbCBoZWlnaHRcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5lbGVtZW50LmZpbmQoJy5zY3JvbGxzZWN0aW9uJylcbiAgICAgICAgaWYgKG9iai5sZW5ndGggJiYgb2JqWzBdLnNjcm9sbFRvcCkge1xuICAgICAgICAgIG9ialswXS5zY3JvbGxUb3AgPSAwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGV2ZW50LnN1Ym1pdHRlcj8uZGF0YXNldC5idXR0b24gPT09ICduZXh0Jykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LnN0ZXAgPT09IHRoaXMucGFnZUxpc3QuUEFHRV9DUkVBVEUgfHwgKHRoaXMub2JqZWN0LnN0ZXAgPT09IHRoaXMucGFnZUxpc3QuUEFHRV9CQUNLU1RPUlkgJiYgZ2FtZS51c2VyLnJvbGUgPj0gQ09OU1QuVVNFUl9QRVJNSVNTSU9OUy5BQ1RPUl9DUkVBVEUuZGVmYXVsdFJvbGUpKSB7XG4gICAgICAgIHRoaXMuYXR0ZW1wdFRvQ3JlYXRlKClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBwYWdlTnVtYmVyID0gdGhpcy5nZXRQYWdlTnVtYmVyKDEpXG4gICAgICAgIGlmICh0eXBlb2YgcGFnZU51bWJlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5zdGVwID0gcGFnZU51bWJlclxuICAgICAgICAgIC8vIFdoZW4gbW92aW5nIHN0ZXAgcmVzZXQgc2Nyb2xsIGhlaWdodFxuICAgICAgICAgIGNvbnN0IG9iaiA9IHRoaXMuZWxlbWVudC5maW5kKCcuc2Nyb2xsc2VjdGlvbicpXG4gICAgICAgICAgaWYgKG9iai5sZW5ndGggJiYgb2JqWzBdLnNjcm9sbFRvcCkge1xuICAgICAgICAgICAgb2JqWzBdLnNjcm9sbFRvcCA9IDBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIGF0dGVtcHRUb0NyZWF0ZSAoKSB7XG4gICAgY29uc3QgYWN0b3JEYXRhID0gYXdhaXQgdGhpcy5ub3JtYWxpemVDaGFyYWN0ZXJEYXRhKHRoaXMub2JqZWN0KVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSB8fCBnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZUNoYXJhY3RlcihhY3RvckRhdGEpXG4gICAgICBhY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBrZWVwZXJzID0gZ2FtZS51c2Vycy5maWx0ZXIodSA9PiB1LmFjdGl2ZSAmJiB1LmlzR00pXG4gICAgICBpZiAoa2VlcGVycy5sZW5ndGgpIHtcbiAgICAgICAgYWN0b3JEYXRhLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUlxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXItd2l6YXJkJyxcbiAgICAgICAgICBsaXN0ZW5lcjoga2VlcGVyc1swXS5pZCxcbiAgICAgICAgICBwYXlsb2FkOiBhY3RvckRhdGFcbiAgICAgICAgfVxuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW52ZXN0aWdhdG9yV2l6YXJkLkNyZWF0aW5nSW52ZXN0aWdhdG9yJylcbiAgICAgICAgKVxuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTWlzc2luZ0tlZXBlclVzZXInKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbm9ybWFsaXplQ2hhcmFjdGVyRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IHdlYXBvblNraWxscyA9IHtcbiAgICAgIG1lbGVlOiB7fSxcbiAgICAgIHJuZ2Q6IHt9XG4gICAgfVxuICAgIGNvbnN0IGl0ZW1zID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhLnNraWxsSXRlbXMpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gZGF0YS5za2lsbEl0ZW1zW2tleV1cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBza2lsbC5yb3dzLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCByb3cgPSBza2lsbC5yb3dzW2luZGV4XVxuICAgICAgICBpZiAoIXNraWxsLmZsYWdzLmlzTXVsdGlwbGUgfHwgcm93LnNlbGVjdGVkICE9PSBmYWxzZSkge1xuICAgICAgICAgIGxldCBpdGVtID0gZHVwbGljYXRlKHNraWxsLml0ZW0pXG4gICAgICAgICAgaWYgKHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UgJiYgdHlwZW9mIHJvdy5zZWxlY3RlZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGl0ZW0gPSBkdXBsaWNhdGUocm93LnNlbGVjdGVkKVxuICAgICAgICAgICAgcm93LnNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJvdy5vY2N1cGF0aW9uVG9nZ2xlKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5mbGFncy5vY2N1cGF0aW9uID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocm93LmFyY2hldHlwZVRvZ2dsZSkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uZmxhZ3MuYXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgYmFzZSA9IGl0ZW0uc3lzdGVtLmJhc2VcbiAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEuc2V0dXBQb2ludHMpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKCdAJyArIGtleSwgJ2knKVxuICAgICAgICAgICAgICBiYXNlID0gYmFzZS5yZXBsYWNlKHJlZ0V4LCBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgIGJhc2UgPSBNYXRoLmZsb29yKG5ldyBSb2xsKGJhc2UpLmV2YWx1YXRlKHsgYXN5bmM6IGZhbHNlIH0pLnRvdGFsKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtLnN5c3RlbS5iYXNlID0gYmFzZVxuICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzID0gaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMgPz8ge31cbiAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5wZXJzb25hbFBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cy5wZXJzb25hbCA9IHBhcnNlSW50KHJvdy5wZXJzb25hbFBvaW50cywgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChOdW1iZXIocm93Lm9jY3VwYXRpb25Qb2ludHMpID4gMCkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMub2NjdXBhdGlvbiA9IHBhcnNlSW50KHJvdy5vY2N1cGF0aW9uUG9pbnRzLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKE51bWJlcihyb3cuYXJjaGV0eXBlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmFyY2hldHlwZSA9IHBhcnNlSW50KHJvdy5hcmNoZXR5cGVQb2ludHMsIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5leHBlcmllbmNlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UgPSBwYXJzZUludChyb3cuZXhwZXJpZW5jZVBvaW50cywgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuY29jaWRMYW5ndWFnZU93bikge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID0gZGF0YS5sYW5ndWFnZVxuICAgICAgICAgICAgaXRlbS5uYW1lID0gaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygcm93LnNlbGVjdGVkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID0gcm93LnNlbGVjdGVkXG4gICAgICAgICAgICBpdGVtLl9pZCA9IHJhbmRvbUlEKClcbiAgICAgICAgICAgIGl0ZW0ubmFtZSA9IGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uICsgJyAoJyArIGl0ZW0uc3lzdGVtLnNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NJZChpdGVtKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uZmlnaHRpbmcpIHtcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLm5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLnN5c3RlbS5za2lsbE5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LmZpcmVhcm0pIHtcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5ybmdkW2l0ZW0ubmFtZV0gPSBpdGVtLl9pZFxuICAgICAgICAgICAgd2VhcG9uU2tpbGxzLnJuZ2RbaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXSA9IGl0ZW0uX2lkXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNvdXJjZUl0ZW0gb2YgZGF0YS5pbnZlc3RpZ2F0b3JJdGVtcykge1xuICAgICAgY29uc3QgaXRlbSA9IGR1cGxpY2F0ZShzb3VyY2VJdGVtKVxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMubWVsZWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkID0gd2VhcG9uU2tpbGxzLm1lbGVlW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgPSB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lXVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCA9IHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaXRlbXMucHVzaChpdGVtKVxuICAgIH1cbiAgICBsZXQgbW9uZXRhcnkgPSB7fVxuICAgIGNvbnN0IHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgIGlmIChzZXR1cCkge1xuICAgICAgbW9uZXRhcnkgPSBkdXBsaWNhdGUoc2V0dXAuc3lzdGVtLm1vbmV0YXJ5KVxuICAgIH1cbiAgICBjb25zdCBkZXZlbG9wbWVudCA9IHtcbiAgICAgIHBlcnNvbmFsOiAyICogKHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmludCwgMTApKSxcbiAgICAgIG9jY3VwYXRpb246IDAsXG4gICAgICBhcmNoZXR5cGU6IDBcbiAgICB9XG4gICAgaWYgKGRhdGEuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgY29uc3QgYXJjaGV0eXBlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRChkYXRhLmFyY2hldHlwZSlcbiAgICAgIGlmIChhcmNoZXR5cGUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGl0ZW1zLnB1c2goYXJjaGV0eXBlWzBdLnRvT2JqZWN0KCkpXG4gICAgICAgIGRldmVsb3BtZW50LmFyY2hldHlwZSA9IGFyY2hldHlwZVswXS5zeXN0ZW0uYm9udXNQb2ludHNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRhdGEub2NjdXBhdGlvbiAhPT0gJycpIHtcbiAgICAgIGNvbnN0IG9jY3VwYXRpb24gPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKGRhdGEub2NjdXBhdGlvbilcbiAgICAgIGlmIChvY2N1cGF0aW9uLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpdGVtcy5wdXNoKG9jY3VwYXRpb25bMF0udG9PYmplY3QoKSlcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb25bMF0uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgICAgICBvcHRpb25zLnB1c2goY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRldmVsb3BtZW50Lm9jY3VwYXRpb24gKz0gY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZGV2ZWxvcG1lbnQub2NjdXBhdGlvbiArPSBNYXRoLm1heCguLi5vcHRpb25zKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGJpb2dyYXBoeSA9IFtdXG4gICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGRhdGEuYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICBiaW9ncmFwaHkucHVzaCh7XG4gICAgICAgIHRpdGxlOiBkYXRhLmJpb1NlY3Rpb25zW2luZGV4XS5uYW1lLFxuICAgICAgICB2YWx1ZTogZGF0YS5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWVcbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHtcbiAgICAgIHR5cGU6ICdjaGFyYWN0ZXInLFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgaW1nOiBkYXRhLmF2YXRhcixcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IHtcbiAgICAgICAgICBzdHI6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnN0ciwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5zdHIsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29uOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5jb24sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuY29uLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpejoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuc2l6LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLnNpeiwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXg6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmRleCwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5kZXgsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXBwOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5hcHAsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuYXBwLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGludDoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmludCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3c6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnBvdywgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5wb3csIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5lZHUsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuZWR1LCAxMClcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgICBsY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBNYXRoLm1heChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmx1Y2ssIDEwKSwgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5sdWNrLCAxMCkpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzYW46IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnBvdywgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5wb3csIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5mb3M6IHtcbiAgICAgICAgICBhZ2U6IGRhdGEuYWdlLFxuICAgICAgICAgIHJlc2lkZW5jZTogZGF0YS5yZXNpZGVuY2UsXG4gICAgICAgICAgYmlydGhwbGFjZTogZGF0YS5iaXJ0aHBsYWNlXG4gICAgICAgIH0sXG4gICAgICAgIGRldmVsb3BtZW50LFxuICAgICAgICBiaW9ncmFwaHksXG4gICAgICAgIG1vbmV0YXJ5XG4gICAgICB9LFxuICAgICAgcHJvdG90eXBlVG9rZW46IHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhY3Rvckxpbms6IHRydWUsXG4gICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICBzcmM6IGRhdGEudG9rZW5cbiAgICAgICAgfSxcbiAgICAgICAgZGlzcG9zaXRpb246IENPTlNULlRPS0VOX0RJU1BPU0lUSU9OUy5GUklFTkRMWSxcbiAgICAgICAgc2lnaHQ6IHtcbiAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICAgIGRldGVjdGlvbk1vZGVzOiBbe1xuICAgICAgICAgIGlkOiAnYmFzaWNTaWdodCcsXG4gICAgICAgICAgcmFuZ2U6IDMwLFxuICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgfV1cbiAgICAgIH0sXG4gICAgICBpdGVtcyxcbiAgICAgIG93bmVyc2hpcDoge1xuICAgICAgICBkZWZhdWx0OiBwYXJzZUludChkYXRhLmRlZmF1bHRPd25lcnNoaXAsIDEwKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0b3JEYXRhXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQ2hhcmFjdGVyRnJvbURhdGEgKGFjdG9yRGF0YSkge1xuICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGVDaGFyYWN0ZXIoYWN0b3JEYXRhKVxuICAgIGNvbnN0IGZ1bmN0aW9uSWQgPSBIb29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgICAgIGlmIChhcHAub2JqZWN0LmlkID09PSBhY3Rvci5pZCkge1xuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgICAgICB0eXBlOiAnb3Blbi1jaGFyYWN0ZXInLFxuICAgICAgICAgIGxpc3RlbmVyOiBPYmplY3Qua2V5cyhhY3RvckRhdGEub3duZXJzaGlwKS5maW5kKGsgPT4gayAhPT0gJ2RlZmF1bHQnKSxcbiAgICAgICAgICBwYXlsb2FkOiBhY3Rvci5pZFxuICAgICAgICB9KVxuICAgICAgICBIb29rcy5vZmYoJ3JlbmRlckFjdG9yU2hlZXQnLCBmdW5jdGlvbklkKVxuICAgICAgfVxuICAgIH0pXG4gICAgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQ2hhcmFjdGVyIChhY3RvckRhdGEpIHtcbiAgICBjb25zdCBhY3RvciA9IGF3YWl0IEFjdG9yLmNyZWF0ZShhY3RvckRhdGEpXG4gICAgYXdhaXQgYWN0b3IudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6IGFjdG9yLnJhd0hwTWF4LFxuICAgICAgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzogYWN0b3IucmF3TXBNYXgsXG4gICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLm1heCc6IGFjdG9yLnJhd01wTWF4XG4gICAgfSlcbiAgICBhd2FpdCBhY3Rvci5yZXNldERhaWx5U2FuaXR5KClcbiAgICByZXR1cm4gYWN0b3JcbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGUgaXQncyB0aGUgZGVmYXVsdCB3YXkgdG8gY3JlYXRlIHRoZSBDb0M3Q2hhcmFjdGVyV2l6YXJkXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICAvLyBUcnkgYW5kIHByZXJlcXVzdCBhcyBtYW55IENvQ0lEcyBkdWUgdG8gdGhlIHdheSB0aGV5IGhhdmUgdG8gYmUgbG9hZGVkXG4gICAgb3B0aW9ucyA9IG1lcmdlT2JqZWN0KHtcbiAgICAgIHN0ZXA6IDAsXG4gICAgICBkZWZhdWx0U2V0dXA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFNldHVwJyksXG4gICAgICBkZWZhdWx0UXVhbnRpdHk6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JyksXG4gICAgICBkZWZhdWx0T3duZXJzaGlwOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRPd25lcnNoaXAnKSxcbiAgICAgIGRlZmF1bHRFcmE6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJyksXG4gICAgICByZXJvbGxzRW5hYmxlZDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUmVyb2xscycpLFxuICAgICAgZW5mb3JjZVBvaW50QnV5OiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRQb2ludEJ1eScpLFxuICAgICAgcXVpY2tGaXJlVmFsdWVzOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWlja0ZpcmUnKSxcbiAgICAgIHBsYWNlYWJsZTogZHVwbGljYXRlKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1aWNrRmlyZScpKSxcbiAgICAgIGNhY2hlQ29DSUQ6IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQubG9hZENhY2hlSXRlbUJ5Q29DSUQoKSxcbiAgICAgIGNhY2hlQmFja3N0b3JpZXM6IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogL15ydFxcLlxcLmJhY2tzdG9yeS0vLCB0eXBlOiAncnQnIH0pLFxuICAgICAgY2FjaGVJdGVtczoge30sXG4gICAgICBzZXR1cDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnKSxcbiAgICAgIHNraWxsSXRlbXM6IHt9LFxuICAgICAgb2NjdXBhdGlvbkdyb3Vwczoge30sXG4gICAgICBpbnZlc3RpZ2F0b3JJdGVtczogW10sXG4gICAgICBzZXR1cFBvaW50czoge1xuICAgICAgICBzdHI6ICcnLFxuICAgICAgICBjb246ICcnLFxuICAgICAgICBzaXo6ICcnLFxuICAgICAgICBkZXg6ICcnLFxuICAgICAgICBhcHA6ICcnLFxuICAgICAgICBpbnQ6ICcnLFxuICAgICAgICBwb3c6ICcnLFxuICAgICAgICBlZHU6ICcnLFxuICAgICAgICBsdWNrOiAnJ1xuICAgICAgfSxcbiAgICAgIHNldHVwTW9kaWZpZXJzOiB7XG4gICAgICAgIHN0cjogMCxcbiAgICAgICAgY29uOiAwLFxuICAgICAgICBzaXo6IDAsXG4gICAgICAgIGRleDogMCxcbiAgICAgICAgYXBwOiAwLFxuICAgICAgICBpbnQ6IDAsXG4gICAgICAgIHBvdzogMCxcbiAgICAgICAgZWR1OiAwLFxuICAgICAgICBsdWNrOiAwXG4gICAgICB9LFxuICAgICAgYXJjaGV0eXBlOiAnJyxcbiAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpYzogJycsXG4gICAgICBvY2N1cGF0aW9uOiAnJyxcbiAgICAgIGJpb1NlY3Rpb25zOiBbXSxcbiAgICAgIHBlcnNvbmFsOiAwLFxuICAgICAgY3JlZGl0UmF0aW5nOiB7XG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiAwXG4gICAgICB9LFxuICAgICAgbmFtZTogJycsXG4gICAgICBhZ2U6ICcnLFxuICAgICAgcmVxdWlyZXNBZ2VBZGp1c3RtZW50czogZmFsc2UsXG4gICAgICByZXNpZGVuY2U6ICcnLFxuICAgICAgYmlydGhwbGFjZTogJycsXG4gICAgICBsYW5ndWFnZTogJycsXG4gICAgICBhdmF0YXI6ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyxcbiAgICAgIHRva2VuOiAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZydcbiAgICB9LCBvcHRpb25zKVxuICAgIG5ldyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkKG9wdGlvbnMpLnJlbmRlcih0cnVlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgY2FudmFzLCBmb3VuZHJ5LCBnYW1lLCBQbGFjZWFibGVzTGF5ZXIgKi9cbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi9jaGF0LmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cgfSBmcm9tICcuL2FwcHMvYWN0b3ItaW1wb3J0ZXItZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRlbnRMaW5rRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2NvYzctY29udGVudC1saW5rLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQgfSBmcm9tICcuL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5qcydcblxuY2xhc3MgQ29DN01lbnVMYXllciBleHRlbmRzIFBsYWNlYWJsZXNMYXllciB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcigpXG4gICAgdGhpcy5vYmplY3RzID0ge31cbiAgfVxuXG4gIHN0YXRpYyBnZXQgbGF5ZXJPcHRpb25zICgpIHtcbiAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChzdXBlci5sYXllck9wdGlvbnMsIHtcbiAgICAgIG5hbWU6ICdjb2M3bWVudScsXG4gICAgICB6SW5kZXg6IDYwXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZG9jdW1lbnROYW1lICgpIHtcbiAgICByZXR1cm4gJ1Rva2VuJ1xuICB9XG5cbiAgZ2V0IHBsYWNlYWJsZXMgKCkge1xuICAgIHJldHVybiBbXVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3TWVudSB7XG4gIHN0YXRpYyBnZXRCdXR0b25zIChjb250cm9scykge1xuICAgIGNhbnZhcy5jb2M3Z210b29scyA9IG5ldyBDb0M3TWVudUxheWVyKClcbiAgICBjb25zdCBpc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgY29uc3Qgc2hvd0hpZGRlbkRldk1lbnUgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdoaWRkZW5kZXZtZW51JylcbiAgICBjb250cm9scy5wdXNoKHtcbiAgICAgIG5hbWU6ICdjb2M3bWVudScsXG4gICAgICB0aXRsZTogJ0NvQzcuR21Ub29scycsXG4gICAgICBsYXllcjogJ2NvYzdnbXRvb2xzJyxcbiAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLXRlbnRhY2xlLXN0cmlrZScsXG4gICAgICB2aXNpYmxlOiBpc0tlZXBlcixcbiAgICAgIHRvb2xzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1hbmdsZS1kb3VibGUtdXAnLFxuICAgICAgICAgIG5hbWU6ICdkZXZwaGFzZScsXG4gICAgICAgICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKSxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuRGV2UGhhc2UnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jIHRvZ2dsZSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZURldlBoYXNlKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLXVzZXItZWRpdCcsXG4gICAgICAgICAgbmFtZTogJ2NoYXJjcmVhdGUnLFxuICAgICAgICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5DaGFyQ3JlYXRpb25Nb2RlJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyB0b2dnbGUgPT5cbiAgICAgICAgICAgIGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlQ2hhckNyZWF0aW9uKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLXVzZXItcGx1cycsXG4gICAgICAgICAgbmFtZTogJ2FjdG9yLWltcG9ydCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkFjdG9ySW1wb3J0ZXInLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+IGF3YWl0IENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmNyZWF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS11c2VyLWNoZWNrJyxcbiAgICAgICAgICBuYW1lOiAnaW52ZXN0aWdhdG9yLXdpemFyZCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkludmVzdGlnYXRvcldpemFyZC5UaXRsZScsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgKCkgPT4gYXdhaXQgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGUoKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtY2VydGlmaWNhdGUnLFxuICAgICAgICAgIGNsYXNzOiAneHBfdG9nZ2xlJyxcbiAgICAgICAgICBuYW1lOiAneHB0b2dnbGUnLFxuICAgICAgICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJyksXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LnRvZ2dsZVhQJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyB0b2dnbGUgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVYUEdhaW4odG9nZ2xlKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLWNhcmQtam9rZXInLFxuICAgICAgICAgIG5hbWU6ICdmYWtlcm9sbCcsXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkZha2VSb2xsJyxcbiAgICAgICAgICBvbkNsaWNrOiBDb0M3Q2hhdC5mYWtlUm9sbE1lc3NhZ2VcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLW1vb24nLFxuICAgICAgICAgIG5hbWU6ICdzdGFydHJlc3QnLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5zdGFydFJlc3QnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0VGFyZ2V0KClcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gICAgaWYgKHNob3dIaWRkZW5EZXZNZW51KSB7XG4gICAgICBjYW52YXMuY29jN0RldlRvb2xzID0gbmV3IENvQzdNZW51TGF5ZXIoKVxuICAgICAgY29udHJvbHMucHVzaCh7XG4gICAgICAgIG5hbWU6ICdjb2M3RGV2TWVudScsXG4gICAgICAgIHRpdGxlOlxuICAgICAgICAgIFwiRGV2IHRvb2xzLiBJZiB5b3UgZG9uJ3Qga25vdyB3aGF0IGl0IGlzLCB5b3UgZG9uJ3QgbmVlZCBpdCBhbmQgeW91IHNob3VsZG4ndCB1c2UgaXQgISFcIixcbiAgICAgICAgbGF5ZXI6ICdjb2M3RGV2VG9vbHMnLFxuICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1wb2xpY2UtYmFkZ2UnLFxuICAgICAgICB2aXNpYmxlOiBpc0tlZXBlcixcbiAgICAgICAgdG9vbHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1kaWNlLWZpcmUnLFxuICAgICAgICAgICAgbmFtZTogJ2Fsd2F5c0NyaXQnLFxuICAgICAgICAgICAgYWN0aXZlOiBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzQ3JpdCxcbiAgICAgICAgICAgIHRpdGxlOiAnQWxsIHJvbGxzIHdpbGwgY3JpdCcsXG4gICAgICAgICAgICBvbkNsaWNrOiB0b2dnbGUgPT4ge1xuICAgICAgICAgICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzRnVtYmxlID0gZmFsc2VcbiAgICAgICAgICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQgPSB0b2dnbGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICAgIGljb246ICdnYW1lLWljb24gZ2FtZS1pY29uLWZpcmUtZXh0aW5ndWlzaGVyJyxcbiAgICAgICAgICAgIG5hbWU6ICdhbHdheXNGdW1ibGUnLFxuICAgICAgICAgICAgYWN0aXZlOiBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzRnVtYmxlLFxuICAgICAgICAgICAgdGl0bGU6ICdBbGwgcm9sbHMgd2lsbCBmdW1ibGUnLFxuICAgICAgICAgICAgb25DbGljazogdG9nZ2xlID0+IHtcbiAgICAgICAgICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0Z1bWJsZSA9IHRvZ2dsZVxuICAgICAgICAgICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzQ3JpdCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyByZW5kZXJDb250cm9scyAoYXBwLCBodG1sLCBkYXRhKSB7XG4gICAgY29uc3QgaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIGNvbnN0IGtlZXBlck1lbnUgPSBodG1sLmZpbmQoJy5nYW1lLWljb24tdGVudGFjbGUtc3RyaWtlJykucGFyZW50KClcbiAgICBrZWVwZXJNZW51LmFkZENsYXNzKCdjb2M3LW1lbnUnKVxuICAgIGlmIChpc0tlZXBlcikge1xuICAgICAga2VlcGVyTWVudS5hZnRlcihcbiAgICAgICAgJzxsaSBjbGFzcz1cInNjZW5lLWNvbnRyb2wgY29jNy1tZW51IGNvYzctY3JlYXRlLWxpbmtcIiB0aXRsZT1cIicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DcmVhdGVMaW5rJykgK1xuICAgICAgICAgICdcIj48aSBjbGFzcz1cImZhcyBmYS1saW5rXCI+PC9pPjwvbGk+J1xuICAgICAgKVxuICAgIH1cbiAgICBrZWVwZXJNZW51LmFmdGVyKFxuICAgICAgJzxsaSBjbGFzcz1cInNjZW5lLWNvbnRyb2wgY29jNy1tZW51IGNvYzctZGljZS1yb2xsXCIgdGl0bGU9XCInICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxEaWNlJykgK1xuICAgICAgICAnXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLWQxMFwiPjwvaT48L2xpPidcbiAgICApXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5jb2M3LW1lbnUuY29jNy1kaWNlLXJvbGwnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IENvQzdVdGlsaXRpZXMucm9sbERpY2UoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY29jNy1tZW51LmNvYzctY3JlYXRlLWxpbmsnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUoZXZlbnQpKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2NvYzctbGluay5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDYW52YXMge1xuICBzdGF0aWMgZ2V0IENPQzdfVFlQRVNfU1VQUE9SVEVEICgpIHtcbiAgICByZXR1cm4gWydDb0M3TGluayddXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgb25Ecm9wU29tZXRoaW5nIChjYW52YXMsIGRhdGEpIHtcbiAgICBpZiAoXG4gICAgICBkYXRhLnR5cGUgJiZcbiAgICAgIENvQzdDYW52YXMuQ09DN19UWVBFU19TVVBQT1JURUQuaW5jbHVkZXMoZGF0YS50eXBlKVxuICAgICkge1xuICAgICAgY29uc3QgZ3JpZFNpemUgPSBjYW52YXMuc2NlbmUuZ3JpZC5zaXplXG4gICAgICBjb25zdCB4ID0gZGF0YS54IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCB5ID0gZGF0YS55IC0gZ3JpZFNpemUgLyAyXG4gICAgICBjb25zdCBoZWlnaHQgPSBncmlkU2l6ZVxuICAgICAgY29uc3Qgd2lkdGggPSBncmlkU2l6ZVxuICAgICAgbGV0IGRyb3BUYXJnZXRUb2tlbnMgPSBjYW52YXMudG9rZW5zLnBsYWNlYWJsZXMuZmlsdGVyKG9iaiA9PiB7XG4gICAgICAgIGNvbnN0IGMgPSBvYmouY2VudGVyXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy54LCB4LCB4ICsgd2lkdGgpICYmXG4gICAgICAgICAgTnVtYmVyLmJldHdlZW4oYy55LCB5LCB5ICsgaGVpZ2h0KVxuICAgICAgICApXG4gICAgICB9KSAvLyBGaW5kIGRyb3AgdGFyZ2V0LlxuICAgICAgaWYgKCFkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkgZHJvcFRhcmdldFRva2VucyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCAvLyBJZiBubyB0YXJnZXQgd2hpc3BlciB0byBzZWxlY3RlZCB0b2tlblxuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnQ29DN0xpbmsnOlxuICAgICAgICAgIGlmIChkYXRhLmNoZWNrID09PSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCkge1xuICAgICAgICAgICAgaWYgKGRyb3BUYXJnZXRUb2tlbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgZHJvcFRhcmdldFRva2Vucykge1xuICAgICAgICAgICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKHRva2VuLmFjdG9yLCBkYXRhKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBBcHBseSB0byBldmVyeW9uZSA/IG9yIG9ubHkgcGxheWVycyA/IG9yIG5vYm9keVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZHJvcFRhcmdldFRva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UoZGF0YSwgZHJvcFRhcmdldFRva2Vucy5maWx0ZXIodCA9PiB0LmFjdG9yLm93bmVycy5sZW5ndGgpLm1hcCh0ID0+IHQuYWN0b3IpKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBDb0M3TGluay50b1doaXNwZXJNZXNzYWdlKGRhdGEsIGdhbWUudXNlcnMucGxheWVycy5maWx0ZXIodSA9PiAhIXUuY2hhcmFjdGVyKS5tYXAodSA9PiB1LmNoYXJhY3RlcikpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgLy8gVGhpcyBkb2VzIG5vdCBhcHBlYXIgdG8gYmUgY2FsbGVkIGluIEZvdW5kcnlWVFQgdjEwLCByZW1vdmUgaWYgbm90IG5lZWRlZFxuICAgICAgICAvLyBDT0M3X1RZUEVTX1NVUFBPUlRFRCBjaGFzZSBoYXMgYmVlbiByZW1vdmVkIGJlY2F1c2Ugb2YgdGhpc1xuICAgICAgICAvLyBkZWZhdWx0OlxuICAgICAgICAvLyAgIGlmIChkYXRhLmRvY1V1aWQgJiYgZGF0YS5jYWxsQmFjaykge1xuICAgICAgICAvLyAgICAgY29uc3QgZG9jID0gQ29DN1V0aWxpdGllcy5TZnJvbVV1aWQoZGF0YS5kb2NVdWlkKVxuICAgICAgICAvLyAgICAgaWYgKFxuICAgICAgICAvLyAgICAgICBkb2NbZGF0YS5jYWxsQmFja10gJiZcbiAgICAgICAgLy8gICAgICAgdHlwZW9mIGRvY1tkYXRhLmNhbGxCYWNrXSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAvLyAgICAgKSB7XG4gICAgICAgIC8vICAgICAgIHRyeSB7XG4gICAgICAgIC8vICAgICAgICAgZGF0YS5zY2VuZSA9IGNhbnZhcy5zY2VuZS51dWlkXG4gICAgICAgIC8vICAgICAgICAgZG9jW2RhdGEuY2FsbEJhY2tdKGRhdGEpXG4gICAgICAgIC8vICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIC8vICAgICAgICAgY29uc29sZS53YXJuKGVycm9yLm1lc3NhZ2UpXG4gICAgICAgIC8vICAgICAgIH1cbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gICB9XG4gICAgICAgIC8vICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIGdhbWUsIFNldHRpbmdzICovXG5leHBvcnQgY2xhc3MgQ29DN1NldHRpbmdzRGlyZWN0b3J5IGV4dGVuZHMgU2V0dGluZ3Mge1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcjc2V0dGluZ3MtZ2FtZScpXG4gICAgICAgIC5hcHBlbmQoXG4gICAgICAgICAgJzxidXR0b24gY2xhc3M9XCJ0cmlnZ2VyLWRhdGEtbWlncmF0aW9uXCI+PGkgY2xhc3M9XCJmYXMgZmEtd3JlbmNoXCI+PC9pPiAnICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRyaWdnZXJCdXR0b24nKSArXG4gICAgICAgICAgICAnPC9idXR0b24+J1xuICAgICAgICApXG4gICAgICBodG1sLmZpbmQoJy50cmlnZ2VyLWRhdGEtbWlncmF0aW9uJykuY2xpY2soKCkgPT4ge1xuICAgICAgICBuZXcgRGlhbG9nKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyVGl0bGUnKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRyaWdnZXJDb250ZW50cycpLFxuICAgICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgICBtaWdyYXRlOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRyaWdnZXJSZXN0YXJ0JyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZVZlcnNpb24nLCAwKVxuICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjbG9zZToge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1iYW5cIj48L2k+JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDYW5jZWwnKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge31cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdjbG9zZSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHt9XG4gICAgICAgICkucmVuZGVyKHRydWUpXG4gICAgICB9KVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENvbXBlbmRpdW1EaXJlY3RvcnksIERpYWxvZywgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdDb21wZW5kaXVtRGlyZWN0b3J5IGV4dGVuZHMgQ29tcGVuZGl1bURpcmVjdG9yeSB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBsZXQgdHJhbnNsYXRlZCA9IGZhbHNlXG4gICAgaWYgKGdhbWUuaTE4bi5sYW5nID09PSAnZW4nKSB7XG4gICAgICB0cmFuc2xhdGVkID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGdhbWUuYmFiZWxlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCB2IG9mIE9iamVjdC52YWx1ZXMoZ2FtZS5iYWJlbGUubW9kdWxlcykpIHtcbiAgICAgICAgaWYgKHYubGFuZyA9PT0gZ2FtZS5pMThuLmxhbmcpIHtcbiAgICAgICAgICB0cmFuc2xhdGVkID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghdHJhbnNsYXRlZCkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxuICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICc8YSBjbGFzcz1cImNvbXBlbmRpdW0tdHJhbnNsYXRpb25cIiB0aXRsZT1cIicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlVGl0bGUnKSArXG4gICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpICtcbiAgICAgICAgICAgICc8L2E+J1xuICAgICAgICApXG4gICAgICBodG1sLmZpbmQoJy5jb21wZW5kaXVtLXRyYW5zbGF0aW9uJykuY2xpY2soKCkgPT4ge1xuICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlV2FybmluZycpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVJbnN0YWxsQmFiZWxlJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUluc3RhbGxUcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVFbmFibGVUcmFuc2xhdGlvbicpICtcbiAgICAgICAgICAnPC9wPicgK1xuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVOb1RyYW5zbGF0aW9uJykgK1xuICAgICAgICAgICc8L3A+J1xuICAgICAgICBuZXcgRGlhbG9nKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpLFxuICAgICAgICAgICAgY29udGVudDogbWVzc2FnZSxcbiAgICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgICAgZGVmYXVsdDogJ2Nsb3NlJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAge31cbiAgICAgICAgKS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3JEaXJlY3RvcnksIENPTlNULCBnYW1lICovXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZyB9IGZyb20gJy4vYXBwcy9hY3Rvci1pbXBvcnRlci1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkIH0gZnJvbSAnLi9hcHBzL2ludmVzdGlnYXRvci13aXphcmQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JEaXJlY3RvcnkgZXh0ZW5kcyBBY3RvckRpcmVjdG9yeSB7XG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIC8vIEFsbG93IEludmVzdGlnYXRvciBXaXphcmRcbiAgICAvLyAgKiBJZiB0aGUgdXNlciByb2xlIGlzIGFsbG93ZWQgdG8gY3JlYXRlIGFjdG9yc1xuICAgIC8vICAqIElmIHRoZSB1c2VyIGhhcyBsZXNzIG93bmVkIGFjdG9ycyB0aGFuIGFsbG93ZWQgaW4gc2V0dGluZ3NcbiAgICBsZXQgYWxsb3dXaXphcmQgPSBnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZVxuICAgIGlmICghYWxsb3dXaXphcmQpIHtcbiAgICAgIGNvbnN0IGFsbG93ZWQgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScpXG4gICAgICBpZiAoYWxsb3dlZCA+IDApIHtcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBnYW1lLmFjdG9ycy5maWx0ZXIoYSA9PiBbYS5vd25lcnNoaXAuZGVmYXVsdCwgKGEub3duZXJzaGlwW2dhbWUudXNlci5pZF0gPz8gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FKV0uaW5jbHVkZXMoQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUikpLmxlbmd0aFxuICAgICAgICBhbGxvd1dpemFyZCA9IGV4aXN0aW5nIDwgYWxsb3dlZFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChhbGxvd1dpemFyZCkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxuICAgICAgICAuYXBwZW5kKCc8YSBjbGFzcz1cImludmVzdGlnYXRvci13aXphcmRcIj4nICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5UaXRsZScpICsgJzwvYT4nKVxuICAgICAgaHRtbC5maW5kKCcuaW52ZXN0aWdhdG9yLXdpemFyZCcpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGUoKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLnJvbGUgPj0gQ09OU1QuVVNFUl9QRVJNSVNTSU9OUy5BQ1RPUl9DUkVBVEUuZGVmYXVsdFJvbGUpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJ2Zvb3Rlci5kaXJlY3RvcnktZm9vdGVyJylcbiAgICAgICAgLmFwcGVuZChcbiAgICAgICAgICAnPGEgY2xhc3M9XCJhY3Rvci1pbXBvcnRcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyJykgK1xuICAgICAgICAgICAgJzwvYT4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnLmFjdG9yLWltcG9ydCcpLmNsaWNrKCgpID0+IHtcbiAgICAgICAgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cuY3JlYXRlKClcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIERpYWxvZywgZ2FtZSwgbWVyZ2VPYmplY3QsIFJvbGwsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NwZWxsIGV4dGVuZHMgQ29DN0l0ZW0ge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3BlbnRhZ3JhbS1yb3NlLnN2ZydcbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0XG4gIH1cblxuICBhc3luYyBjYXN0ICgpIHtcbiAgICBpZiAoIXRoaXMuaXNPd25lZCkge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfVxuICAgIGNvbnN0IGNvc3RzID0gdGhpcy5zeXN0ZW0uY29zdHNcbiAgICBjb25zdCBsb3NzZXMgPSBbXVxuICAgIGxldCBjb252ZXJ0U3VycGx1c0ludG9IaXRQb2ludHNcbiAgICBjb3N0cy5tYWdpY1BvaW50cyA9IENvQzdVdGlsaXRpZXMuaXNGb3JtdWxhKGNvc3RzLm1hZ2ljUG9pbnRzKVxuICAgICAgPyAoYXdhaXQgbmV3IFJvbGwoY29zdHMubWFnaWNQb2ludHMpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgIDogcGFyc2VJbnQoY29zdHMubWFnaWNQb2ludHMpXG4gICAgaWYgKFxuICAgICAgY29zdHMubWFnaWNQb2ludHMgJiZcbiAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzID4gdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZVxuICAgICkge1xuICAgICAgY29udmVydFN1cnBsdXNJbnRvSGl0UG9pbnRzID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnZlcnRlZEhpdFBvaW50cyA9XG4gICAgICAgICAgY29zdHMubWFnaWNQb2ludHMgLSB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlXG4gICAgICAgIGNvbnN0IGNvbnZlcnRlZE1hZ2ljUG9pbnRzID0gY29zdHMubWFnaWNQb2ludHMgLSBjb252ZXJ0ZWRIaXRQb2ludHNcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0aXRsZTogJyAnLFxuICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTm90RW5vdWdoTWFnaWNQb2ludHMnLCB7XG4gICAgICAgICAgICBhY3Rvck1hZ2ljUG9pbnRzOiB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlLFxuICAgICAgICAgICAgY29udmVydGVkSGl0UG9pbnRzLFxuICAgICAgICAgICAgY29udmVydGVkTWFnaWNQb2ludHMsXG4gICAgICAgICAgICBvcmlnaW5hbE1hZ2ljUG9pbnRzOiBjb3N0cy5tYWdpY1BvaW50cyxcbiAgICAgICAgICAgIHNwZWxsOiB0aGlzLm5hbWVcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICBjYW5jZWw6IHtcbiAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2FuY2VsJyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9jZWVkOiB7XG4gICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlByb2NlZWQnKSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb3N0cy5oaXRQb2ludHMgPSBjb252ZXJ0ZWRIaXRQb2ludHNcbiAgICAgICAgICAgICAgICBjb3N0cy5tYWdpY1BvaW50cyA9IGNvbnZlcnRlZE1hZ2ljUG9pbnRzXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVmYXVsdDogJ2NhbmNlbCcsXG4gICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZyddXG4gICAgICAgIH1cbiAgICAgICAgbmV3IERpYWxvZyhkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgICBpZiAoIWNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cykgcmV0dXJuXG4gICAgfVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNvc3RzKSkge1xuICAgICAgaWYgKCF2YWx1ZSB8fCBOdW1iZXIodmFsdWUpID09PSAwKSBjb250aW51ZVxuICAgICAgbG9zc2VzLnB1c2goYXdhaXQgdGhpcy5yZXNvbHZlTG9zc2VzKGtleSwgdmFsdWUpKVxuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL2NoYXQuaHRtbCdcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7IGRlc2NyaXB0aW9uLCBsb3NzZXMgfSlcbiAgICByZXR1cm4gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogdGhpcy5uYW1lLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNvbHZlTG9zc2VzIChjaGFyYWN0ZXJpc3RpYywgdmFsdWUpIHtcbiAgICBsZXQgY2hhcmFjdGVyaXN0aWNOYW1lXG4gICAgbGV0IGxvc3NcbiAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEodmFsdWUpKSB7XG4gICAgICBsb3NzID0gKGF3YWl0IG5ldyBSb2xsKHZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgfSBlbHNlIHtcbiAgICAgIGxvc3MgPSBwYXJzZUludCh2YWx1ZSlcbiAgICB9XG4gICAgY29uc3QgYWN0b3JEYXRhID0gdGhpcy5hY3Rvci5zeXN0ZW1cbiAgICBzd2l0Y2ggKGNoYXJhY3RlcmlzdGljKSB7XG4gICAgICBjYXNlICdoaXRQb2ludHMnOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGl0UG9pbnRzJylcbiAgICAgICAgdGhpcy5hY3Rvci5kZWFsRGFtYWdlKGxvc3MsIHsgaWdub3JlQXJtb3I6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Nhbml0eSc6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHlQb2ludHMnKVxuICAgICAgICB0aGlzLmdyYW50U2FuaXR5TG9zcyhsb3NzKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbWFnaWNQb2ludHMnOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFnaWNQb2ludHMnKVxuICAgICAgICB0aGlzLmFjdG9yLnNldE1wKGFjdG9yRGF0YS5hdHRyaWJzLm1wLnZhbHVlIC0gbG9zcylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Bvd2VyJzpcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUG93ZXInKVxuICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlJzpcbiAgICAgICAgICAgIGFjdG9yRGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC0gbG9zc1xuICAgICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4geyBjaGFyYWN0ZXJpc3RpY05hbWUsIGxvc3MgfVxuICB9XG5cbiAgLyoqIEJ5cGFzcyB0aGUgU2FuaXR5IGNoZWNrIGFuZCBqdXN0IHJvbGwgdGhlIGRhbWFnZSAqL1xuICBhc3luYyBncmFudFNhbml0eUxvc3MgKHZhbHVlKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DYXN0aW5nU3BlbGwnLCB7XG4gICAgICAgIHNwZWxsOiB0aGlzLm5hbWVcbiAgICAgIH0pLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH0pXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IG1lc3NhZ2UuZ2V0SFRNTCgpXG4gICAgaWYgKHR5cGVvZiBjYXJkLmxlbmd0aCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2FyZC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3MgPSB2YWx1ZVxuICAgICAgaHRtbCA9IGNhcmQuZmluZCgnLmNoYXQtY2FyZCcpWzBdXG4gICAgICBodG1sLmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuaWQsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGZhbHNlLFxuICAgICAgICAgIHNhbkRhdGE6IHtcbiAgICAgICAgICAgIHNhbk1pbjogc2FuaXR5TG9zcyxcbiAgICAgICAgICAgIHNhbk1heDogc2FuaXR5TG9zc1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIGNvbnN0IHNhbml0eUNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGh0bWwpXG4gICAgICBhd2FpdCBzYW5pdHlDaGVjay5ieXBhc3NSb2xsU2FuKClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLnJvbGxTYW5Mb3NzKClcbiAgICAgIHNhbml0eUNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGUgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5jb250ZXh0LnBhcmVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLmNvbnRleHQuYm9va0lkICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgbGV0IGl0ZW1cbiAgICAgIGxldCBib29rXG4gICAgICAvLyBsZXQgc3BlbGxEYXRhXG4gICAgICBpZiAodGhpcy5jb250ZXh0LnBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5jb250ZXh0LmJvb2tJZClcbiAgICAgICAgYm9vayA9IGl0ZW0udG9PYmplY3QoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYm9vayA9IHRoaXMuY29udGV4dC5wYXJlbnQuaXRlbXMuZ2V0KHRoaXMuY29udGV4dC5ib29rSWQpLnRvT2JqZWN0KClcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IGJvb2suc3lzdGVtLnNwZWxscy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGlmIChib29rLnN5c3RlbS5zcGVsbHNbaV0uX2lkID09PSB0aGlzLmlkKSB7XG4gICAgICAgICAgYm9vay5zeXN0ZW0uc3BlbGxzW2ldID0gbWVyZ2VPYmplY3QoYm9vay5zeXN0ZW0uc3BlbGxzW2ldLCBkYXRhKVxuICAgICAgICAgIC8vIHNwZWxsRGF0YSA9IGJvb2suc3lzdGVtLnNwZWxsc1tpXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jb250ZXh0LnBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh7XG4gICAgICAgICAgJ3N5c3RlbS5zcGVsbHMnOiBib29rLnN5c3RlbS5zcGVsbHNcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5zaGVldC5vYmplY3QgPSBuZXcgQ29DN1NwZWxsKFxuICAgICAgICAgIGJvb2suc3lzdGVtLnNwZWxscy5maW5kKHNwZWxsID0+IHNwZWxsLl9pZCA9PT0gdGhpcy5pZCksXG4gICAgICAgICAgdGhpcy5jb250ZXh0XG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5wYXJlbnQudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbYm9va10pXG4gICAgICAgIHRoaXMuc2hlZXQub2JqZWN0ID0gbmV3IENvQzdTcGVsbChcbiAgICAgICAgICBib29rLnN5c3RlbS5zcGVsbHMuZmluZChzcGVsbCA9PiBzcGVsbC5faWQgPT09IHRoaXMuaWQpLFxuICAgICAgICAgIHRoaXMuY29udGV4dFxuICAgICAgICApXG4gICAgICB9XG4gICAgICB0aGlzLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBzdXBlci51cGRhdGUoZGF0YSwgY29udGV4dClcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZHVwbGljYXRlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3U3BlbGwgfSBmcm9tICcuLi9zcGVsbC9kYXRhLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0Jvb2sgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2VjcmV0LWJvb2suc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgLyoqIENvbnZlcnQgdGhlIGRpZmZpY3VsdHkgb24gdGhlIHNlbGVjdCBlbGVtZW50IHRvIGEgZm9ybWF0IGFjY2VwdGVkICovXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgICAgY2FzZSAnaGFyZCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICdjcml0aWNhbCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgICBjYXNlICd1bnJlYWRhYmxlJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgdGhlIGZ1dHVyZTogYWRkIGFkdmFuY2VkIHJ1bGVzIGZvciBsZWFybmluZyBzcGVsbHMsIHBnLiAxNzZcbiAgICogQHBhcmFtIFt7RG9jdW1lbnR9XSBzcGVsbHNcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgYWRkU3BlbGxzIChzcGVsbHMpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5zeXN0ZW0uc3BlbGxzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5zcGVsbHMpXG4gICAgICA6IFtdXG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiBzcGVsbHMpIHtcbiAgICAgIGNvbGxlY3Rpb24ucHVzaChzcGVsbClcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5zcGVsbHMnOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBhc3luYyBzcGVsbERldGFpbCAoaW5kZXgpIHtcbiAgICBjb25zdCBpc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuc3lzdGVtLnNwZWxsc1tpbmRleF1cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmFjdG9yID8gdGhpcy5hY3RvciA6IG51bGxcbiAgICBjb25zdCBzcGVsbCA9IG5ldyBDb0M3U3BlbGwoZGF0YSwgeyBwYXJlbnQsIGJvb2tJZDogdGhpcy5pZCB9KVxuICAgIGlmIChpc0tlZXBlciB8fCBzcGVsbC5zeXN0ZW0ubGVhcm5lZCkge1xuICAgICAgcmV0dXJuIGF3YWl0IHNwZWxsLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGFsbCB0aGUgbG9naWMgaW52b2x2aW5nIHRoZSBhdHRlbXB0IG9mIGluaXRpYWwgcmVhZGluZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQHNlZSBsaXN0ZW4gQHNlZSBncmFudEluaXRpYWxSZWFkaW5nXG4gICAqL1xuICBhc3luYyBhdHRlbXB0SW5pdGlhbFJlYWRpbmcgKCkge1xuICAgIC8qKiBDb252ZXJ0cyB0aGUgZGlmZmljdWx0eSB2YWx1ZSB0byBzb21ldGhpbmcgYWNjZXB0ZWQgYnkgQ29DN0NoZWNrICovXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IENvQzdCb29rLmNvbnZlcnREaWZmaWN1bHR5KFxuICAgICAgdGhpcy5zeXN0ZW0uZGlmZmljdWx0eUxldmVsXG4gICAgKVxuICAgIGNvbnN0IGxhbmd1YWdlID0gdGhpcy5zeXN0ZW0ubGFuZ3VhZ2VcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3I/LmdldFNraWxsc0J5TmFtZShsYW5ndWFnZSlcbiAgICBpZiAoIXNraWxsKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9IGVsc2UgaWYgKHNraWxsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgQWN0b3Igd2hvIG93bnMgdGhpcyBkb2VzIG5vdCBoYXZlIHRoZSBza2lsbCBvZlxuICAgICAgICogdGhlIGxhbmd1YWdlIGluIHdoaWNoIGl0IHdhcyB3cml0dGVuXG4gICAgICAgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlVua25vd25MYW5ndWFnZScsIHsgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSB9KVxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBjaGVjay5za2lsbCA9IHNraWxsWzBdLmlkXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgICAgY2hlY2sucGFyZW50ID0gdGhpcy51dWlkXG4gICAgICBjaGVjay5jb250ZXh0ID0gJ0lOSVRJQUxfUkVBRElORydcbiAgICAgIGNoZWNrLmZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVhZEF0dGVtcHQnLCB7XG4gICAgICAgIGJvb2s6IHRoaXMubmFtZSxcbiAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuc3lzdGVtLmRpZmZpY3VsdHlMZXZlbFxuICAgICAgfSlcbiAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgcmV0dXJuIGF3YWl0IGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0cyBpcyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdXNlciBpbnRlcmFjdHMgaW4gc29tZSB3YXkgd2l0aCBwcm9ncmVzcyBiYXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgJ3Jlc2V0JyB8fCAnaW5jcmVhc2UnIHx8ICdkZWNyZWFzZSdcbiAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIGp1c3Qgc28gdGhhdCBwcm9ncmVzcyBpcyBub3QgZ3JlYXRlciB0aGFuIG5lY2Vzc2FyeVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBjaGFuZ2VQcm9ncmVzcyAobW9kZSwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuaXNPd25lZCAmJiBtb2RlICE9PSAncmVzZXQnKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZyAmJiBtb2RlICE9PSAncmVzZXQnKSB7XG4gICAgICAvKiogQWN0b3IgZGlkIG5vdCBwZXJmb3JtZWQgYW4gaW5pdGlhbCByZWFkaW5nIGZpcnN0ICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWFsUmVhZGluZ05lZWRlZCcsIHtcbiAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3lzdGVtLnR5cGUubXl0aG9zICYmIG1vZGUgIT09ICdyZXNldCcpIHtcbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RNeXRob3NUb21lJykpXG4gICAgfVxuICAgIGNvbnN0IG5lY2Vzc2FyeSA9IHRoaXMuc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVxuICAgIGxldCBmdWxsU3R1ZHkgPSB0aGlzLnN5c3RlbS5mdWxsU3R1ZHlcbiAgICBsZXQgcHJvZ3Jlc3MgPSB0aGlzLnN5c3RlbS5zdHVkeS5wcm9ncmVzc1xuICAgIGlmIChpc05hTihwcm9ncmVzcykpIHtcbiAgICAgIC8qKiBJdCBzZWVtcyBhIGxpdHRsZSBpbXBvc3NpYmxlLCBidXQgeW91IG5ldmVyIGtub3cgKi9cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAwXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAodmFsdWUgJiYgcHJvZ3Jlc3MgPiB2YWx1ZSkge1xuICAgICAgLyoqXG4gICAgICAgKiBQcm9ncmVzcyB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gdmFsdWUgZW50ZXJlZCBieSB1c2VyIGFzIG5lY2Vzc2FyeSxcbiAgICAgICAqIHJlc2V0IHByb2dyZXNzIHRvIGJlIGVxdWFsIG5lY2Vzc2FyeSBhbmQgY29tcGxldGUgZnVsbCBzdHVkeVxuICAgICAgICovXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uZnVsbFN0dWR5JzogKytmdWxsU3R1ZHksXG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiB2YWx1ZVxuICAgICAgfSlcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbXBsZXRlRnVsbFN0dWR5KClcbiAgICB9XG4gICAgaWYgKG1vZGUgPT09ICdpbmNyZWFzZScgJiYgcHJvZ3Jlc3MgPCBuZWNlc3NhcnkpIHtcbiAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gcGx1cyBpY29uIHRvIGluY3JlYXNlIHByb2dyZXNzICovXG4gICAgICBpZiAoKGF3YWl0IHRoaXMuY2hlY2tFeGhhdXN0aW9uKCkpICE9PSBmYWxzZSkgcmV0dXJuXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiArK3Byb2dyZXNzXG4gICAgICB9KVxuICAgICAgaWYgKHByb2dyZXNzID09PSBuZWNlc3NhcnkpIHtcbiAgICAgICAgLyoqIENvbXBsZXRlIGZ1bGwgc3R1ZHkgaWYgcHJvZ3Jlc3MgaXMgZXF1YWwgbmVjZXNzYXJ5ICovXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mdWxsU3R1ZHknOiArK2Z1bGxTdHVkeSB9KVxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ncmFudEZ1bGxTdHVkeSgpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChtb2RlID09PSAnZGVjcmVhc2UnICYmIHByb2dyZXNzID4gMCkge1xuICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBtaW51cyBpY29uIHRvIGRlY3JlYXNlIHByb2dyZXNzICovXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnN0dWR5LnByb2dyZXNzJzogLS1wcm9ncmVzc1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBjaGVja0V4aGF1c3Rpb24gKCkge1xuICAgIGNvbnN0IGFjdG9yTXl0aG9zVmFsdWUgPSB0aGlzLmFjdG9yPy5jdGh1bGh1TXl0aG9zXG4gICAgY29uc3QgbXl0aG9zUmF0aW5nID0gdGhpcy5zeXN0ZW0ubXl0aG9zUmF0aW5nXG4gICAgaWYgKHRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nKSB7XG4gICAgICBpZiAoYWN0b3JNeXRob3NWYWx1ZSA+PSBteXRob3NSYXRpbmcpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiB0aGlzLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkJvb2tIYXNOb3RoaW5nTW9yZVRvVGVhY2gnLCB7XG4gICAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdyYW50RnVsbFN0dWR5ICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLnR5cGUubXl0aG9zKSByZXR1cm5cbiAgICBpZiAoKGF3YWl0IHRoaXMuY2hlY2tFeGhhdXN0aW9uKCkpICE9PSBmYWxzZSkgcmV0dXJuXG4gICAgY29uc3QgYWN0b3JNeXRob3NWYWx1ZSA9IHRoaXMuYWN0b3IuY3RodWxodU15dGhvc1xuICAgIGNvbnN0IGRldmVsb3BtZW50cyA9IFtdXG4gICAgY29uc3QgbXl0aG9zUmF0aW5nID0gdGhpcy5zeXN0ZW0ubXl0aG9zUmF0aW5nXG4gICAgbGV0IG15dGhvc0ZpbmFsID0gdGhpcy5zeXN0ZW0uZ2FpbnMuY3RodWxodU15dGhvcy5maW5hbFxuICAgIGlmIChhY3Rvck15dGhvc1ZhbHVlICsgbXl0aG9zRmluYWwgPiBteXRob3NSYXRpbmcpIHtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPD0gbXl0aG9zRmluYWw7IGluZGV4KyspIHtcbiAgICAgICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgKyBteXRob3NGaW5hbCAtIGluZGV4IDw9IG15dGhvc1JhdGluZykge1xuICAgICAgICAgIG15dGhvc0ZpbmFsIC09IGluZGV4XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJlYWRlciBhdXRvbWF0aWNhbGx5IGdhaW5zIGEgc2tpbGwgdGljayBmb3IgdGhlXG4gICAgICogbGFuZ3VhZ2UgaW4gd2hpY2ggdGhlIGJvb2sgaXMgd3JpdHRlblxuICAgICAqL1xuICAgIGRldmVsb3BtZW50cy5wdXNoKFxuICAgICAge1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5jdGh1bGh1LW15dGhvcycpLFxuICAgICAgICBnYWluOiBwYXJzZUludChteXRob3NGaW5hbClcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHRoaXMuc3lzdGVtLmxhbmd1YWdlLFxuICAgICAgICBnYWluOiAnZGV2ZWxvcG1lbnQnXG4gICAgICB9XG4gICAgKVxuICAgIGF3YWl0IHRoaXMuZ3JhbnRTa2lsbERldmVsb3BtZW50KGRldmVsb3BtZW50cylcbiAgICBhd2FpdCB0aGlzLnJvbGxTYW5pdHlMb3NzKClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5mdWxsU3R1ZGllcyc6ICsrdGhpcy5zeXN0ZW0uZnVsbFN0dWRpZXNcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGdyYW50SW5pdGlhbFJlYWRpbmcgKCkge1xuICAgIC8qKiBJZiBpbml0aWFsIHJlYWRpbmcgaGFzIGFscmVhZHkgYmVlbiBkb25lIHRoZXJlIGlzIG5vdGhpbmcgdG8gZG8gaGVyZSAqL1xuICAgIGlmICh0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZykgcmV0dXJuXG4gICAgY29uc3QgZGV2ZWxvcG1lbnRzID0gW11cbiAgICBjb25zdCBteXRob3MgPSB7XG4gICAgICBnYWluczogdGhpcy5zeXN0ZW0uZ2FpbnMuY3RodWxodU15dGhvcy5pbml0aWFsLFxuICAgICAgdHlwZTogdGhpcy5zeXN0ZW0udHlwZS5teXRob3NcbiAgICB9XG4gICAgY29uc3Qgb2NjdWx0ID0ge1xuICAgICAgZ2FpbnM6IHRoaXMuc3lzdGVtLmdhaW5zLm9jY3VsdCxcbiAgICAgIHR5cGU6IHRoaXMuc3lzdGVtLnR5cGUub2NjdWx0XG4gICAgfVxuICAgIGNvbnN0IG90aGVyID0ge1xuICAgICAgZ2FpbnM6IHRoaXMuc3lzdGVtLmdhaW5zLm90aGVycyxcbiAgICAgIHR5cGU6IHRoaXMuc3lzdGVtLnR5cGUub3RoZXJcbiAgICB9XG4gICAgaWYgKG15dGhvcy50eXBlICYmIG15dGhvcy5nYWlucykge1xuICAgICAgZGV2ZWxvcG1lbnRzLnB1c2goe1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5jdGh1bGh1LW15dGhvcycpLFxuICAgICAgICBnYWluOiBwYXJzZUludChteXRob3MuZ2FpbnMpXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAob2NjdWx0LnR5cGUgJiYgb2NjdWx0LmdhaW5zKSB7XG4gICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PY2N1bHQnKSxcbiAgICAgICAgZ2FpbjogcGFyc2VJbnQob2NjdWx0LmdhaW5zKVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKG90aGVyLnR5cGUpIHtcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygb3RoZXIuZ2FpbnMpIHtcbiAgICAgICAgY29uc3QgcGF0dGVybiA9IHNraWxsLm5hbWUubWF0Y2goL14oLispIFxcKCguKylcXCkkLylcbiAgICAgICAgLyoqIFNhbml0aXphdGlvbiB0byBkZWFsIHdpdGggc3BlY2lhbGl6YXRpb25zICovXG4gICAgICAgIGlmIChwYXR0ZXJuKSB7XG4gICAgICAgICAgc2tpbGwuc3BlY2lhbGl6YXRpb24gPSBwYXR0ZXJuWzFdXG4gICAgICAgICAgc2tpbGwubmFtZSA9IHBhdHRlcm5bMl1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2tpbGwudmFsdWUgIT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICBza2lsbC52YWx1ZSA9IChcbiAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKHNraWxsLnZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICApLnRvdGFsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNraWxsLnZhbHVlKSB7XG4gICAgICAgICAgZGV2ZWxvcG1lbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogc2tpbGwubmFtZSxcbiAgICAgICAgICAgIGdhaW46IHNraWxsLnZhbHVlLFxuICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246IHNraWxsLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmdyYW50U2tpbGxEZXZlbG9wbWVudChkZXZlbG9wbWVudHMpXG4gICAgaWYgKChteXRob3MudHlwZSB8fCBvY2N1bHQudHlwZSkgJiYgdGhpcy5zeXN0ZW0uc2FuaXR5TG9zcykge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsU2FuaXR5TG9zcygpXG4gICAgfVxuICAgIC8qKiBNYXJrIGluaXRpYWwgcmVhZGluZyBhcyBjb21wbGV0ZSAqL1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uaW5pdGlhbFJlYWRpbmcnOiB0cnVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtJdGVtfSBzcGVsbGxlYXJuZWQgVGhlIHNwZWxsIHRoYXQgd2FzIGxlYXJuZWQgc3VjY2Vzc2Z1bGx5IGZyb20gYm9va1xuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgZ3JhbnRTcGVsbExlYXJuaW5nIChzcGVsbGxlYXJuZWQpIHtcbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHRoaXMuc3lzdGVtLnNwZWxscykge1xuICAgICAgaWYgKHNwZWxsLl9pZCA9PT0gc3BlbGxsZWFybmVkLl9pZCkge1xuICAgICAgICBzcGVsbC5zeXN0ZW0ubGVhcm5lZCA9IHRydWVcbiAgICAgICAgLy8gRG9lcyB0aGUgYWN0b3IgYWxyZWFkeSBoYXMgYSBzcGVsbCBvZiB0aGF0IG5hbWU/IFRoZW4gZG8gbm90IGFkZCB0aGUgc3BlbGxcbiAgICAgICAgY29uc3QgZXhpc3RpbmdTcGVsbCA9IGF3YWl0IHRoaXMuYWN0b3IuaXRlbXMuZmluZChcbiAgICAgICAgICBpdGVtID0+XG4gICAgICAgICAgICBpdGVtLnR5cGUgPT09ICdzcGVsbCcgJiYgaXRlbS5uYW1lID09PSBzcGVsbGxlYXJuZWQubmFtZVxuICAgICAgICApXG4gICAgICAgIGlmICghZXhpc3RpbmdTcGVsbCkge1xuICAgICAgICAgIHNwZWxsbGVhcm5lZC5zeXN0ZW0ubGVhcm5lZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZWxsQWxyZWFkeUxlYXJuZWQnLCB7XG4gICAgICAgICAgICAgIHNwZWxsOiBzcGVsbGxlYXJuZWQubmFtZSxcbiAgICAgICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTYXZlIHNwZWxsIGxpc3Qgb2YgYm9va1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5zcGVsbHMnOiB0aGlzLnN5c3RlbS5zcGVsbHMgfSlcbiAgICAvLyBBZGQgbGVhcm5lZCBzcGVsbCB0byBhY3RvclxuICAgIGlmIChzcGVsbGxlYXJuZWQuc3lzdGVtLmxlYXJuZWQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVsbFN1Y2Nlc3NmdWxseUxlYXJuZWQnLCB7XG4gICAgICAgICAgc3BlbGw6IHNwZWxsbGVhcm5lZC5uYW1lLFxuICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtcbiAgICAgICAgZHVwbGljYXRlKHNwZWxsbGVhcm5lZClcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY2VpdmVzIGFuIEFycmF5IG9mIHNraWxscyBhbmQgaGFuZGxlcyBhbGwgdGhlIGxvZ2ljIHRvIGRldmVsb3AgdGhlbVxuICAgKiBAcGFyYW0ge0FycmF5fSBkZXZlbG9wbWVudHMgQHNlZSBncmFudEluaXRpYWxSZWFkaW5nXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGdyYW50U2tpbGxEZXZlbG9wbWVudCAoZGV2ZWxvcG1lbnRzKSB7XG4gICAgaWYgKGRldmVsb3BtZW50cy5sZW5ndGggPT09IDApIHJldHVyblxuICAgIGZvciAoY29uc3QgZGV2ZWxvcG1lbnQgb2YgZGV2ZWxvcG1lbnRzKSB7XG4gICAgICAvKiogVGVzdCBpZiB0aGUgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHplcm8gKi9cbiAgICAgIGlmICghZGV2ZWxvcG1lbnQuZ2FpbikgY29udGludWVcbiAgICAgIGxldCBza2lsbCA9IGF3YWl0IHRoaXMuYWN0b3IuZ2V0U2tpbGxzQnlOYW1lKGRldmVsb3BtZW50Lm5hbWUpXG4gICAgICAvKiogVGhlIEFjdG9yIGRvZXMgbm90IG93biB0aGlzIHNraWxsLCBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgKiBGaXJzdCwgY2hlY2sgaWYgdGhlcmUgaXMgYW55IHNraWxsIGluIHRoZSBnYW1lIHdpdGggdGhlIHNhbWUgbmFtZVxuICAgICAgICogSW4gdGhlIGxhc3QgYWx0ZXJuYXRpdmUganVzdCBjcmVhdGUgYSBuZXcgZ2VuZXJpYyBza2lsbFxuICAgICAgICovXG4gICAgICBpZiAoc2tpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU2tpbGwgPSBhd2FpdCBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgaXRlbSA9PlxuICAgICAgICAgICAgaXRlbS50eXBlID09PSAnc2tpbGwnICYmIGl0ZW0ubmFtZSA9PT0gZGV2ZWxvcG1lbnQubmFtZVxuICAgICAgICApXG4gICAgICAgIGlmIChleGlzdGluZ1NraWxsKSB7XG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xuICAgICAgICAgICAgZHVwbGljYXRlKGV4aXN0aW5nU2tpbGwpXG4gICAgICAgICAgXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuYWN0b3IuY3JlYXRlU2tpbGwoZGV2ZWxvcG1lbnQubmFtZSwgMClcbiAgICAgICAgICBpZiAoZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHNraWxsWzBdLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICAgICAgJ3N5c3RlbS5zcGVjaWFsaXphdGlvbic6IGRldmVsb3BtZW50LnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2tpbGwgPSBza2lsbFswXVxuICAgICAgaWYgKGRldmVsb3BtZW50LmdhaW4gPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgLyoqIFNpbXBseSBtYXJrIHRoZSBza2lsbCBmb3IgZGV2ZWxvcG1lbnQgKi9cbiAgICAgICAgYXdhaXQgc2tpbGwuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIHJlY2VpdmVkIHZhbHVlIGdhaW5lZCBpcyBudW1lcmljLCBlbnN1cmUgdGhhdCB0aGUgYW1vdW50XG4gICAgICAgICAqIHdpbGwgbm90IGV4Y2VlZCB0aGUgbWF4aW11bSB2YWx1ZSBvZiA5OVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHNraWxsLnZhbHVlICsgZGV2ZWxvcG1lbnQuZ2FpbiA+IDk5KSB7XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8PSBkZXZlbG9wbWVudC5nYWluOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBpZiAoc2tpbGwudmFsdWUgKyBkZXZlbG9wbWVudC5nYWluIC0gaW5kZXggPD0gOTkpIHtcbiAgICAgICAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiAtPSBpbmRleFxuICAgICAgICAgICAgICBhd2FpdCBza2lsbC5pbmNyZWFzZUV4cGVyaWVuY2UoZGV2ZWxvcG1lbnQuZ2FpbilcbiAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGRldmVsb3BtZW50LmdhaW4pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNob3dEZXZlbG9wbWVudHNUYWJsZShkZXZlbG9wbWVudHMpXG4gIH1cblxuICAvKipcbiAgICogU3Vic2VxdWVudCBwZXJpb2RzIG9mIGZ1bGwgc3R1ZHkgbWF5IGJlIHVuZGVydGFrZW4sIHRoZSBkaWZmZXJlbmNlIGJlaW5nXG4gICAqIHRoYXQgZWFjaCBzdHVkeSB3aWxsIHRha2UgdHdpY2UgYXMgbG9uZyBhcyB0aGUgcHJldmlvdXMgb25lXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyByZWRvRnVsbFN0dWR5ICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAwIH0pXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5JzogdGhpcy5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5ICogMlxuICAgIH0pXG4gIH1cblxuICAvKiogQnlwYXNzIHRoZSBTYW5pdHkgY2hlY2sgYW5kIGp1c3Qgcm9sbCB0aGUgZGFtYWdlICovXG4gIGFzeW5jIHJvbGxTYW5pdHlMb3NzICgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc3lzdGVtLnNhbml0eUxvc3NcbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnJykgcmV0dXJuXG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWFkaW5nTXl0aG9zVG9tZScsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICB9KSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBtZXNzYWdlLmdldEhUTUwoKVxuICAgIGlmICh0eXBlb2YgY2FyZC5sZW5ndGggIT09ICd1bmRlZmluZWQnICYmIGNhcmQubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzID0gKGF3YWl0IG5ldyBSb2xsKHZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cbiAgICAgIGh0bWwuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICAgICAgc2FuRGF0YToge1xuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxuICAgICAgICAgICAgc2FuTWF4OiBzYW5pdHlMb3NzXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgY29uc3Qgc2FuaXR5Q2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgc2FuaXR5Q2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgdGFibGUgaW4gdGhlIGNoYXQgd2l0aCBhbGwgc2tpbGwgZGV2ZWxvcG1lbnRzIG9idGFpbmVkXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gZGV2ZWxvcG1lbnRzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gY3JlYXRlIENoYXRNZXNzYWdlXG4gICAqL1xuICBhc3luYyBzaG93RGV2ZWxvcG1lbnRzVGFibGUgKGRldmVsb3BtZW50cykge1xuICAgIC8qKiBQcmVwYXJlIHRoZSBBcnJheSBkYXRhIHRvIGJlIHNob3duIHRvIHRoZSBlbmQgdXNlciBpbiBjaGF0ICovXG4gICAgZm9yIChjb25zdCBkZXZlbG9wbWVudCBvZiBkZXZlbG9wbWVudHMpIHtcbiAgICAgIGlmIChkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICBkZXZlbG9wbWVudC5uYW1lID0gYCR7ZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb259ICgke2RldmVsb3BtZW50Lm5hbWV9KWBcbiAgICAgIH1cbiAgICAgIGlmIChkZXZlbG9wbWVudC5nYWluID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGRldmVsb3BtZW50LmdhaW4gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFya2VkRm9yRGV2ZWxvcG1lbnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiA9IGArJHtkZXZlbG9wbWVudC5nYWlufSAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Qb2ludHMnXG4gICAgICAgICl9YFxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svZGV2ZWxvcG1lbnQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHsgZGV2ZWxvcG1lbnRzIH0pXG4gICAgcmV0dXJuIGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHsgYWN0b3I6IHRoaXMuYWN0b3IgfSksXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuR2FpbnNGb3JSZWFkaW5nJywgeyBib29rOiB0aGlzLm5hbWUgfSksXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGF0dGVtcHRTcGVsbExlYXJuaW5nIChpZCkge1xuICAgIGlmICghdGhpcy5pc093bmVkKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZykge1xuICAgICAgLyoqIEFjdG9yIGRpZCBub3QgcGVyZm9ybWVkIGFuIGluaXRpYWwgcmVhZGluZyBmaXJzdCAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhbFJlYWRpbmdOZWVkZWQnLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gICAgY29uc3Qgc3BlbGwgPSB0aGlzLnN5c3RlbS5zcGVsbHMuZmluZChzcGVsbCA9PiB7XG4gICAgICByZXR1cm4gc3BlbGwuX2lkID09PSBpZFxuICAgIH0pXG4gICAgaWYgKHNwZWxsKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgICBjaGVjay5wYXJlbnQgPSB0aGlzLnV1aWRcbiAgICAgIGNoZWNrLmZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTGVhcm5TcGVsbEF0dGVtcHQnLCB7XG4gICAgICAgIGJvb2s6IHRoaXMubmFtZSxcbiAgICAgICAgc3BlbGw6IHNwZWxsLm5hbWVcbiAgICAgIH0pXG4gICAgICBjaGVjay5jb250ZXh0ID0gJ1NQRUxMX0xFQVJOSU5HJ1xuICAgICAgY2hlY2suc3BlbGwgPSBzcGVsbFxuICAgICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICAgICAgYXdhaXQgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICAvKiogTGlzdGVuIHRvIGNoYW5nZXMgb24gdGhlIGNoZWNrIGNhcmQgKi9cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xuICAgIGNvbnN0IGNoZWNrID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHJvbGwpXG5cbiAgICAvKiogV2lsbCBrbm93IGlmIHVzZXIgcHVzaCB0aGUgcm9sbCBvciBzcGVuZCBMdWNrICovXG4gICAgaWYgKGNoZWNrLnBhc3NlZCkge1xuICAgICAgaWYgKGNoZWNrLmNvbnRleHQgPT09ICdJTklUSUFMX1JFQURJTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50SW5pdGlhbFJlYWRpbmcoKVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5jb250ZXh0ID09PSAnU1BFTExfTEVBUk5JTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50U3BlbGxMZWFybmluZyhjaGVjay5zcGVsbClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZGVlcENsb25lLCBGb3JtRGF0YUV4dGVuZGVkLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgSG9va3MsIG1lcmdlT2JqZWN0LCByZW5kZXJUZW1wbGF0ZSwgc29ja2V0bGliLCB1aSAqL1xuXG5jb25zdCBFQ0NfQ0xBU1MgPSAnZW5oYW5jZWQtY2hhdC1jYXJkJ1xuXG5jb25zdCBQRVJNSVNTSU9OX1RZUEUgPSB7XG4gIEdNOiAnZ20nLCAvLyB1c2VyIGlzIEdNXG4gIE5PVF9HTTogJyFnbScsIC8vIHVzZXIgaXMgTk9UIGdtIChoaWRlIHRvIEdNIGluIGNhc2Ugb2YgdmlzaWJpbGl0eSlcbiAgU1BFQUtFUjogJ3NwZWFrZXInLCAvLyB0aGUgc3BlYWtlciBpcyBhbiBhY3RvciBjb250cm9sZWQvb3duZWQgYnkgdGhlIHVzZXJcbiAgVVNFUjogJ3VzZXInLCAvLyB0aGUgdXNlciBpcyB0aGUgbWVzc2FnZSdzIGF1dGhvclxuICBFVkVSWU9ORTogJ2FsbCcsIC8vIGVxdWl2YWxlbnQgdG8gZW1wdHkgc3RyaW5nXG4gIEJMQUNLTElTVDogJ2JsYWNrbGlzdCcgLy8gaW52ZXJ0IHRoZSBsb2dpY1xufVxuXG5jb25zdCBTVEFURSA9IHtcbiAgT046ICdzd2l0Y2hlZC1vbicsXG4gIE9GRjogJ3N3aXRjaGVkLW9mZidcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRFQ0MgKC4uLmNhcmRjbGFzcykge1xuICAvLyBIb29rcy5vbmNlKCdpbml0JywgZnVuY3Rpb24gKCkge1xuICAvLyB9KVxuXG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TG9nJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLmluamVjdENTUyhhcHAsIGh0bWwsIGRhdGEpXG4gIClcblxuICBIb29rcy5vbmNlKCdzb2NrZXRsaWIucmVhZHknLCBmdW5jdGlvbiAoKSB7XG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5yZWdpc3RlcihjYXJkY2xhc3MpXG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQgPSBzb2NrZXRsaWIucmVnaXN0ZXJTeXN0ZW0oZ2FtZS5zeXN0ZW0uaWQpIC8vIFNvY2tldCBpcyBhdHRhY2hlZCB0byBjdXJyZW50IHN5c3RlbVxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCd1cGRhdGVNZXNzYWdlJywgdXBkYXRlTWVzc2FnZSlcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcignR01VcGRhdGUnLCBHTVVwZGF0ZSlcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcignYWR2aXNlJywgYWR2aXNlKVxuICAgIC8vIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCdnbXRyYWRlaXRlbXRvJywgZ210cmFkZWl0ZW10bylcbiAgfSlcblxuICBIb29rcy5vbigncmVuZGVyQ2hhdE1lc3NhZ2UnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICAgIEVuaGFuY2VkQ2hhdENhcmQuYmluZExpc3RlbmVycyhodG1sKVxuICApXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2UgKG1lc3NhZ2VJZCwgbmV3Q29udGVudCkge1xuICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcblxuICBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgIGNvbnRlbnQ6IG5ld0NvbnRlbnRcbiAgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gR01VcGRhdGUgKGRhdGEsIG9wdGlvbnMsIGNhcmRDbGFzc05hbWUsIG1lc3NhZ2VJZCA9IHVuZGVmaW5lZCkge1xuICBjb25zdCBjYXJkID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZC5mcm9tRGF0YShcbiAgICBkYXRhLFxuICAgIG9wdGlvbnMsXG4gICAgY2FyZENsYXNzTmFtZSxcbiAgICBtZXNzYWdlSWRcbiAgKVxuICBhd2FpdCBjYXJkLkdNVXBkYXRlKClcbiAgLy8gY29uc3QgZGlmZiA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdCggZGF0YSwgY2FyZC50b09iamVjdCgpKVxuICByZXR1cm4gY2FyZC50b09iamVjdCgpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkdmlzZSAoKSB7fVxuXG5jbGFzcyBFbmhhbmNlZENoYXRDYXJkTGliIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMudHlwZXMgPSBuZXcgTWFwKClcbiAgICB0aGlzLnNvY2tldCA9IG51bGxcbiAgICAvLyB0aGlzLmVuaGFuY2VkQ2hhdENhcmRDbGFzcyA9IEVuaGFuY2VkQ2hhdENhcmRcbiAgfVxuXG4gIHN0YXRpYyBpbmplY3RDU1MgKCkge1xuICAgIGxldCBzdHlsZSA9ICQoJ2hlYWQnKS5maW5kKCdzdHlsZScpXG4gICAgaWYgKCFzdHlsZT8ubGVuZ3RoKSB7XG4gICAgICAkKCdoZWFkJykuYXBwZW5kKCQoJzxzdHlsZSAgdHlwZT1cInRleHQvY3NzXCI+PC9zdHlsZT4nKSlcbiAgICAgIHN0eWxlID0gJCgnaGVhZCcpLmZpbmQoJ3N0eWxlJylcbiAgICB9XG4gICAgc3R5bGUuYXBwZW5kKFxuICAgICAgYC5lY2MtcmVzdHJpY3RlZCB7Y29sb3I6IHJlZH1cbiAgICAuZWNjLXJlc3RyaWN0ZWQ6aG92ZXIge2N1cnNvcjogbm90LWFsbG93ZWR9YFxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBzZXQgc29ja2V0ICh4KSB7XG4gICAgaWYgKCFnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliKSB7XG4gICAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliID0gbmV3IEVuaGFuY2VkQ2hhdENhcmRMaWIoKVxuICAgIH1cbiAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldCA9IHhcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc29ja2V0ICgpIHtcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0VDQyBub3QgSW5pdGlhbGl6ZWQnKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdFQ0Mgbm8gc29ja2V0JylcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0XG4gIH1cblxuICBzdGF0aWMgZ2V0IHR5cGVzICgpIHtcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcbiAgICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIgPSBuZXcgRW5oYW5jZWRDaGF0Q2FyZExpYigpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnR5cGVzXG4gIH1cblxuICBzdGF0aWMgcmVnaXN0ZXIgKGNhcmRDb25zdHJ1Y3RvcnMpIHtcbiAgICBjYXJkQ29uc3RydWN0b3JzLmZvckVhY2goY2FyZENvbnN0cnVjdG9yID0+IHtcbiAgICAgIGlmICghRW5oYW5jZWRDaGF0Q2FyZExpYi50eXBlcy5nZXQoY2FyZENvbnN0cnVjdG9yLm5hbWUpKSB7XG4gICAgICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIudHlwZXMuc2V0KGNhcmRDb25zdHJ1Y3Rvci5uYW1lLCBjYXJkQ29uc3RydWN0b3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHN0YXRpYyBnbV9vblRvZ2dsZSAoZGF0YSl7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCAnZ21fb25Ub2dnbGUnKVxuICAvLyB9XG59XG5cbmZ1bmN0aW9uIHNldEJ5UGF0aCAob2JqLCBwYXRoLCB2YWx1ZSkge1xuICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKVxuICBsZXQgbyA9IG9ialxuICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBpZiAoIW9bcGFydHNbaV1dKSBvW3BhcnRzW2ldXSA9IHt9XG4gICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICB9XG4gIH1cblxuICBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXSA9IHZhbHVlXG59XG5cbmZ1bmN0aW9uIGdldEJ5UGF0aCAob2JqLCBwYXRoKSB7XG4gIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gIGxldCBvID0gb2JqXG4gIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGlmICghb1twYXJ0c1tpXV0pIHJldHVybiB1bmRlZmluZWRcbiAgICAgIG8gPSBvW3BhcnRzW2ldXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXVxufVxuXG5leHBvcnQgY2xhc3MgRW5oYW5jZWRDaGF0Q2FyZCB7XG4gIC8vIHN0YXRpYyByZWdpc3RlciAoY2FyZENvbnN0cnVjdG9yKSB7XG4gIC8vICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5yZWdpc3RlcihjYXJkQ29uc3RydWN0b3IpXG4gIC8vIH1cblxuICBjb25zdHJ1Y3RvciAoZGF0YSA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhXG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MpIHRoaXMuZGF0YS5mbGFncyA9IHt9XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgb25seSBvbmNlIGJlZm9yZSBzZW5kaW5nIG1lc3NhZ2UgdG8gY2hhdC5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplICgpIHt9XG5cbiAgZ2V0IG9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdCh0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRPcHRpb25zLCB0aGlzLl9vcHRpb25zKVxuICB9XG5cbiAgc2V0IG9wdGlvbnMgKHgpIHtcbiAgICB0aGlzLl9vcHRpb25zID0geFxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRlbXBsYXRlXG4gIH1cblxuICBnZXQgY3NzQ2xhc3NlcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc2VzPy5qb2luKCcgJylcbiAgfVxuXG4gIGdldCBzcGVha2VyICgpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLm9vYykgcmV0dXJuIGdhbWUudXNlclxuICAgIGlmIChcbiAgICAgIHRoaXMub3B0aW9ucy5zcGVha2VyICYmXG4gICAgICBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3IodGhpcy5vcHRpb25zLnNwZWFrZXIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHRoaXMub3B0aW9ucy5zcGVha2VyKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZS51c2VyXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICAvLyBhd2FpdCB0aGlzLmFzc2lnbk9iamVjdHMoKVxuICAgIHJldHVybiB7XG4gICAgICBjYXJkOiB0aGlzLFxuICAgICAgZmxhZ3M6IHRoaXMuZmxhZ3MsXG4gICAgICBkYXRhOiB0aGlzLnRvT2JqZWN0KCksXG4gICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICBjc3M6IHRoaXMuY3NzQ2xhc3NlcyxcbiAgICAgIHVzZXI6IGdhbWUudXNlcixcbiAgICAgIHNwZWFrZXI6IHRoaXMuc3BlYWtlclxuICAgIH1cbiAgfVxuXG4gIHRvT2JqZWN0ICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YSkgcmV0dXJuXG4gICAgY29uc3QgZGF0YSA9IHt9XG4gICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkpIHtcbiAgICAgIGNvbnN0IHYgPSB0aGlzLmRhdGFba11cbiAgICAgIGlmICh2IGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgIGRhdGFba10gPSB2LnRvT2JqZWN0ID8gdi50b09iamVjdCgpIDogZGVlcENsb25lKHYpXG4gICAgICB9IGVsc2UgZGF0YVtrXSA9IHZcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAob3B0aW9ubmFsQ2hhdERhdGEgPSB7fSkge1xuICAgIC8vIE1hcCBlY2MgY2FyZCB0eXBlIGlmIG5vdCByZWdpc3RlcmVkIGFscmVhZHlcbiAgICAvLyB0aGlzLnJlZ2lzdGVyRUNDQ2xhc3MoKVxuXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKClcblxuICAgIC8vIFB1Ymxpc2ggYnkgY3VycmVudCB1c2VyIGJ5IGRlZmF1bHQgdW5sZXNzIG9wdGlvbnMuR01jaGF0Q2FyZFxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmdldERhdGEoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCBkYXRhKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQoaHRtbClbMF1cbiAgICBpZiAodGhpcy5vcHRpb25zLmF0dGFjaE9iamVjdCkge1xuICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMub2JqZWN0RGF0YVN0cmluZylcbiAgICB9XG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuZWNjQ2xhc3MgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcbiAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLm9wdGlvbnMuY2xhc3NlcylcblxuICAgIGNvbnN0IHNwZWFrZXIgPVxuICAgICAgdGhpcy5vcHRpb25zLnNwZWFrZXIgJiYgIXRoaXMub3B0aW9ucy5vb2NcbiAgICAgICAgPyBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHRoaXMub3B0aW9ucy5zcGVha2VyKVxuICAgICAgICA6IHt9XG5cbiAgICAvLyBjb25zdCB1c2VySWQgPSB0aGlzLm9wdGlvbnMudXNlcklkID8gdGhpcy5vcHRpb25zLnVzZXJJZCA6IGdhbWUudXNlci5pZFxuXG4gICAgY29uc3QgY2hhdERhdGEgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KFxuICAgICAge1xuICAgICAgICAvLyB1c2VyOiB1c2VySWQsXG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgc3BlYWtlcixcbiAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUodGhpcy5vcHRpb25zLnRpdGxlKSxcbiAgICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgICAgfSxcbiAgICAgIG9wdGlvbm5hbENoYXREYXRhXG4gICAgKVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdzZWxmcm9sbCcpIGNoYXREYXRhLndoaXNwZXIgPSBbZ2FtZS51c2VyLmlkXVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKHsgYXR0YWNoT2JqZWN0ID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAvLyBUT0RPIHRoZSB3aG9sZSBmdW5jdGlvbiBoYXMgdG8gYmUgZXhlY3V0ZWQgYnkgR00gaWYgb3B0aW9ucy5HTWNoYXRDYXJkXG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb21wdXRlKSBhd2FpdCB0aGlzLmxvY2FsQ29tcHV0ZSgpXG4gICAgaWYgKHRoaXMub3B0aW9ucy5HTVVwZGF0ZSkgYXdhaXQgdGhpcy5FeGVjdXRlR01VcGRhdGUoKVxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIHRoaXMudG9NZXNzYWdlKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuZ2V0RGF0YSgpXG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgZGF0YSlcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgICAgaWYgKGF0dGFjaE9iamVjdCAmJiAhdGhpcy5kYXRhLkVFQ19BQ1RJT04/LmRldGFjaERhdGEpIHtcbiAgICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMub2JqZWN0RGF0YVN0cmluZylcbiAgICAgIH1cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmVjY0NsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLm9wdGlvbnMuY2xhc3NlcylcblxuICAgICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxuICAgICAgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQuZXhlY3V0ZUFzR00oXG4gICAgICAgICd1cGRhdGVNZXNzYWdlJyxcbiAgICAgICAgdGhpcy5tZXNzYWdlSWQsXG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIClcbiAgICAgIC8vIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG5cbiAgICAgIC8vIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7IC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUwgLy9EaXNwYXRjaCByZXF1ZXN0IGJ5IHNvY2tldFxuICAgICAgLy8gfSkgLy9EaXNwYXRjaCByZXF1ZXN0IGJ5IHNvY2tldFxuICAgICAgLy8gYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIHJldHVybiBtc2cgLy9EaXNwYXRjaCByZXF1ZXN0IGJ5IHNvY2tldFxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgLy8gaHRtbC5vbihcbiAgICAvLyAgICdjbGljaycsXG4gICAgLy8gICBgLiR7RUNDX0NMQVNTfSAuZWNjLXJhZGlvLXN3aXRjaGAsXG4gICAgLy8gICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXG4gICAgLy8gKVxuICAgIGh0bWwub24oJ2NoYW5nZScsICdpbnB1dCxzZWxlY3QsdGV4dGFyZWEnLCB0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gLmVjYy1zd2l0Y2hgLCB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gLnN1Ym1pdGAsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignZm9jdXNvdXQnLCBgLiR7RUNDX0NMQVNTfSBpbnB1dGAsIHRoaXMuX29uQ2hhbmdlLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCBgLiR7RUNDX0NMQVNTfSBidXR0b25gLCB0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2tleWRvd24nLCBgLiR7RUNDX0NMQVNTfSBmb3JtYCwgdGhpcy5fb25LZXkuYmluZCh0aGlzKSlcblxuICAgIC8vIGNvbnN0IHZpc2kgPSBodG1sLmZpbmQoJ1tkYXRhLWVjYy12aXNpYmlsaXR5XScpXG4gICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCB2aXNpLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gICBjb25zdCBlbCA9IHZpc2lbaV07XG4gICAgLy8gICBhd2FpdCB0aGlzLnNldFZpc2liaWxpdHkoZWwpXG5cbiAgICAvLyB9XG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnW2RhdGEtZWNjLXZpc2liaWxpdHldJylcbiAgICAgIC5lYWNoKGFzeW5jIChpLCBlbCkgPT4gYXdhaXQgdGhpcy5zZXRWaXNpYmlsaXR5KGVsKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnW2RhdGEtZWNjLXBlcm1pc3Npb25zXScpXG4gICAgICAuZWFjaChhc3luYyAoaSwgZWwpID0+IGF3YWl0IHRoaXMuc2V0UGVybWlzc2lvbihlbCkpXG4gICAgaHRtbC5maW5kKGAuJHtFQ0NfQ0xBU1N9IC5lY2Mtc3dpdGNoYCkuZWFjaCgoaSwgZWwpID0+IHRoaXMuc2V0U3RhdGUoZWwpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKGAuJHtFQ0NfQ0xBU1N9IGlucHV0W3R5cGU9XCJyYWRpb1wiXWApXG4gICAgICAuZWFjaCgoaSwgZWwpID0+IHRoaXMuc2V0UmFkaW9TdGF0ZShlbCkpXG4gICAgLy8gaHRtbC5maW5kKGAuJHtFQ0NfQ0xBU1N9IC5lY2MtcmFkaW8tc3dpdGNoYCkuZWFjaCggKGksIGVsKSA9PiB0aGlzLnNldFN0YXRlKGVsKSlcbiAgfVxuXG4gIHNldFN0YXRlIChlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICBpZiAoZWxlbWVudC5kYXRhc2V0LmZsYWcpIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcbiAgICAgICAgdGhpcy5mbGFnc1tlbGVtZW50LmRhdGFzZXQuZmxhZ10gPyBTVEFURS5PTiA6IFNUQVRFLk9GRlxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoZWxlbWVudC5kYXRhc2V0Lm5hbWUpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZ2V0QnlQYXRoKHRoaXMsIGVsZW1lbnQuZGF0YXNldC5uYW1lKVxuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHZhbHVlID8gU1RBVEUuT04gOiBTVEFURS5PRkYpXG4gICAgfVxuICB9XG5cbiAgc2V0UmFkaW9TdGF0ZSAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudCB8fCAhZWxlbWVudC5uYW1lKSByZXR1cm5cbiAgICBjb25zdCBzcGxpdGVkID0gZWxlbWVudC5uYW1lLnNwbGl0KCcuJylcbiAgICBpZiAoc3BsaXRlZFswXS50b0xvd2VyQ2FzZSgpICE9PSAnZGF0YScpIHJldHVyblxuICAgIGlmICh0aGlzLmRhdGEgJiYgdHlwZW9mIHRoaXMuZGF0YVtzcGxpdGVkWzFdXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLmRhdGFbc3BsaXRlZFsxXV0gPT09IGVsZW1lbnQudmFsdWUpIHtcbiAgICAgICAgZWxlbWVudC5jaGVja2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldFZpc2liaWxpdHkgKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQuZGF0YXNldC5lY2NWaXNpYmlsaXR5KSByZXR1cm5cbiAgICBjb25zdCBjYW5Zb3VTZWUgPSBhd2FpdCB0aGlzLmhhc1Blcm0oZWxlbWVudC5kYXRhc2V0LmVjY1Zpc2liaWxpdHksIHRydWUpXG4gICAgaWYgKCFjYW5Zb3VTZWUpIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICB9XG5cbiAgYXN5bmMgc2V0UGVybWlzc2lvbiAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudC5kYXRhc2V0LmVjY1Blcm1pc3Npb25zKSByZXR1cm5cbiAgICBjb25zdCBjYW5Zb3VNb2QgPSBhd2FpdCB0aGlzLmhhc1Blcm0oZWxlbWVudC5kYXRhc2V0LmVjY1Blcm1pc3Npb25zKVxuICAgIGlmICghY2FuWW91TW9kKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2VjYy1yZXN0cmljdGVkJylcbiAgICAgIGlmICgkKGVsZW1lbnQpLmlzKCdpbnB1dCcpKSB7XG4gICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICdyYW5nZScpICQoZWxlbWVudCkuYXR0cignZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICBlbHNlICQoZWxlbWVudCkuYXR0cigncmVhZG9ubHknLCB0cnVlKVxuICAgICAgfVxuICAgICAgaWYgKCQoZWxlbWVudCkuaXMoJ3NlbGVjdCcpKSAkKGVsZW1lbnQpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdXNlciBhcyBwZXJtaXNzaW9uIGFnYWluc3QgYSBzdHJpbmcgb2YgYWxsb3dlZCBwZXJzb25zLlxuICAgKiBJZiB0aGUgc3RyaW5nIGlzIGVtcHR5IHBlcm1pc3Npb24gYXJlIGFsbCBncmFudGVkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXN0cmljdGVkVG8gICBBIHN0cmluZyBjb250YWluaW5nIHRoZSBzZXQgb2YgcGxheWVyIGFsbG93ZWQuIFZhbHVlIGNhbiBiZSBvd25lciwgZ20sIHBsYXllcnMsIHV1aWQgc2VwYXJhdGVkIGJ5IHNwYWNlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaW9uICAgICAgICBpZiB0cnVlIGdtIHdpbGwgYmUgY29uc2lkZXJlZCBmb3IgcGVybWlzc2lvbnMuIGZhbHNlID0gZ20gaGFzIGFsd2F5cyByaWdodC4gdHJ1ZSBHTSBwZXJtaXNzaW9uIHdpbGwgYmUgY2hlY2tlZFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgaGFzUGVybSAocmVzdHJpY3RlZFRvLCB2aXNpb24gPSBmYWxzZSkge1xuICAgIGlmICghcmVzdHJpY3RlZFRvLmxlbmd0aCkgcmV0dXJuIHRydWVcbiAgICBsZXQgcGVybWlzc2lvbnNBcnJheSA9IHJlc3RyaWN0ZWRUby5zcGxpdCgnICcpXG4gICAgY29uc3Qgd2hpdGVMaXN0ID0gIXBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLkJMQUNLTElTVClcbiAgICBpZiAoIXdoaXRlTGlzdCkge1xuICAgICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKFxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5CTEFDS0xJU1RcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBpZiAoIXZpc2lvbikgcmV0dXJuIHRydWUgLy8gR00gY2FuIGFsd2F5cyBtb2RpZnkgZXZlcnl0aGluZyAhIE5haFxuICAgICAgaWYgKHBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLkdNKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZSAmJiB3aGl0ZUxpc3RcbiAgICAgIH1cbiAgICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5OT1RfR00pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLkdNKVxuICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihcbiAgICAgIGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLk5PVF9HTVxuICAgIClcblxuICAgIC8vICAgcmV0dXJuIGZhbHNlIHx8ICF3aGl0ZUxpc3QgLy9JZiBwYXNzIHRoZSBmaWx0ZXIgcmV0dXJuIGZhbHNlIHVubGVzcyBpdCdzIGEgYmxhY2tsaXN0XG4gICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihlID0+IGUgIT0gUEVSTUlTU0lPTl9UWVBFLkdNKVxuICAgIC8vIH1cblxuICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5VU0VSKSkge1xuICAgICAgaWYgKHRoaXMubWVzc2FnZS5pc0F1dGhvcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0IC8vIGlzQXV0aG9yIHZzIHVzZXIuaXNPd25lciA/XG4gICAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXG4gICAgICAgIGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLlVTRVJcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuU1BFQUtFUikpIHtcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB0aGlzLm1lc3NhZ2UuZGF0YS5zcGVha2VyXG4gICAgICBpZiAoc3BlYWtlci50b2tlbiAmJiBzcGVha2VyLnNjZW5lKSB7XG4gICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgZnJvbVV1aWQoXG4gICAgICAgICAgYFNjZW5lLiR7c3BlYWtlci5zY2VuZX0uVG9rZW4uJHtzcGVha2VyLnRva2VufWBcbiAgICAgICAgKVxuICAgICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgICBpZiAoYWN0b3IuaXNPd25lcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3BlYWtlci5hY3Rvcikge1xuICAgICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgICBpZiAoYWN0b3IuaXNPd25lcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGVsc2UgaWYgKHNwZWFrZXIudXNlcikge1xuICAgICAgLy8gICBpZiAoZ2FtZS51c2VyLmlkID09IHNwZWFrZXIudXNlcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICAvLyB9XG4gICAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXG4gICAgICAgIGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLlNQRUFLRVJcbiAgICAgIClcbiAgICB9XG4gICAgLy8gQWxsIGZpbHRlciBwYXNzZWQsIGFycmF5IHNob3VsZCBjb250YWlucyBvbmx5IHV1aWRzIG9yIGFjdG9yL3Rva2VuIGlkc1xuICAgIGlmIChwZXJtaXNzaW9uc0FycmF5Lmxlbmd0aCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwZXJtaXNzaW9uc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSBwZXJtaXNzaW9uc0FycmF5W2ldXG4gICAgICAgIGxldCBhY3RvciA9IGF3YWl0IGZyb21VdWlkKHV1aWQpXG4gICAgICAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHV1aWQpXG4gICAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5pc093bmVyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihgVW5hYmxlIHRvIGZpbmQgYWN0b3IgJHt1dWlkfWApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlIHx8ICF3aGl0ZUxpc3QgLy8gSWYgcGFzcyB0aGUgZmlsdGVyIHJldHVybiBmYWxzZSB1bmxlc3MgaXQncyBhIGJsYWNrbGlzdFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBjb25zdCBodG1sTWVzc2FnZUVsZW1lbnQgPSBodG1sWzBdXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gaHRtbE1lc3NhZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke0VDQ19DTEFTU31gKVxuICAgIGlmICghaHRtbENhcmRFbGVtZW50KSByZXR1cm5cblxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBFbmhhbmNlZENoYXRDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoaHRtbENhcmRFbGVtZW50KVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY2FyZC5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICB9XG5cbiAgZ2V0IGZsYWdzICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmZsYWdzXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gcmVhc3NpZ24gb2JqZWN0IGZyb20gdGhlIGRhdGEgc3RydWN0dXJlLlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgYXNzaWduT2JqZWN0cyAoKSB7fVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0byB1cGRhdGUgb2JqZWN0IGFmdGVyIGRhdGEgY2hhbmdlLlxuICAgKiBUaGlzIGlzIGNhbGxlZCBieSB0aGUgbG9jYWwgY2xpZW50XG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3luYyBsb2NhbENvbXB1dGUgKCkge31cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gdXBkYXRlIG9iamVjdCBhZnRlciBkYXRhIGNoYW5nZS5cbiAgICogVGhpcyBpcyBjYWxsZWQgYnkgb25lIG9mIHRoZSBHTSBjbGllbnRzLlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgR01VcGRhdGUgKCkge31cblxuICBhc3luYyBFeGVjdXRlR01VcGRhdGUgKCkge1xuICAgIGNvbnN0IG5ld0RhdGEgPSBhd2FpdCBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldC5leGVjdXRlQXNHTShcbiAgICAgICdHTVVwZGF0ZScsXG4gICAgICB0aGlzLnRvT2JqZWN0KCksXG4gICAgICB0aGlzLl9vcHRpb25zLFxuICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICApXG5cbiAgICB0aGlzLmRhdGEgPSBuZXdEYXRhXG4gICAgYXdhaXQgdGhpcy5hc3NpZ25PYmplY3RzKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50IHdpbGwgY2hlY2sgZm9yIGFuIGFjdGlvbiAoZGF0YS1hY3Rpb24pXG4gICAqIGlmIGEgbWV0aG9kIHdpdGggdGhhdCBuYW1lIGV4aXN0IGl0IHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgKi9cbiAgYXN5bmMgX29uQnV0dG9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnIC8vIEF2b2lkIG11bHRpcGxlIHB1c2hcbiAgICBjb25zdCBhY3Rpb24gPSB0YXJnZXQuZGF0YXNldC5hY3Rpb25cblxuICAgIGxldCBmb3JtVXBkYXRlXG4gICAgbGV0IGFjdGlvblVwZGF0ZSA9IGZhbHNlXG5cbiAgICAvLyBpZiAoJ3N1Ym1pdCcgPT0gdGFyZ2V0LnR5cGUpIHtcbiAgICAvLyAgIGNvbnNvbGUud2FybignQnV0dG9uIGlzIGFsc28gYSBzdWJtaXQnKVxuICAgIC8vIH1cblxuICAgIC8vIFBlcmZvcm0gY2FyZCB1cGRhdGUgZmlyc3RcbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoYC4ke0VDQ19DTEFTU31gKVxuICAgIGlmIChjYXJkKSBmb3JtVXBkYXRlID0gdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgQ291bGQgbm90IGZpbmQgYSBFRUMgY2xhc3MgZm9yIHRoaXMgY2FyZDogJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YFxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IG9yaWdpbmFsRGlzcGxheVN0eWxlID0gdGFyZ2V0LnN0eWxlLmRpc3BsYXlcblxuICAgIGlmICghYWN0aW9uKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ25vIGFjdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBidXR0b24nKVxuICAgICAgaWYgKCFmb3JtVXBkYXRlKSByZXR1cm4gLy8gSWYgdGhlIGZvcm0gd2FzIHVwZGF0ZWQgd2Ugc3RpbGwgdXBkYXRlIHRoZSBjYXJkXG4gICAgfVxuICAgIGlmICghdGhpc1thY3Rpb25dKSB7XG4gICAgICBjb25zb2xlLndhcm4oYG5vICR7YWN0aW9ufSBhY3Rpb24gZm91bmQgZm9yIHRoaXMgY2FyZGApXG4gICAgICBpZiAoIWZvcm1VcGRhdGUpIHJldHVybiAvLyBJZiB0aGUgZm9ybSB3YXMgdXBkYXRlZCB3ZSBzdGlsbCB1cGRhdGUgdGhlIGNhcmRcbiAgICB9XG4gICAgaWYgKHRoaXNbYWN0aW9uXSkge1xuICAgICAgYWN0aW9uVXBkYXRlID0gYXdhaXQgdGhpc1thY3Rpb25dKHsgZXZlbnQsIHVwZGF0ZUNhcmQ6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgaWYgKGZvcm1VcGRhdGUgfHwgYWN0aW9uVXBkYXRlKSBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICBlbHNlIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gb3JpZ2luYWxEaXNwbGF5U3R5bGVcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50XG4gICAqIEByZXR1cm5zIGZhbHNlIGlmIGtleSBpcyBlbnRlciB0byBhdm9pZCBnbG9iYWwgc3VibWlzc2lvblxuICAgKi9cbiAgX29uS2V5IChldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICAgIHJldHVybiBldmVudC5rZXkgIT09ICdFbnRlcidcbiAgfVxuXG4gIF9vbkNoYW5nZSAoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLnN1Ym1pdE9uQ2hhbmdlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgX29uU3VibWl0IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB0YWdOYW1lID0gdGFyZ2V0LnRhZ05hbWVcbiAgICBpZiAodGFnTmFtZSA9PT0gJ0JVVFRPTicgJiYgJ2FjdGlvbicgaW4gdGFyZ2V0LmRhdGFzZXQpIHJldHVybiAvL1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChgLiR7RUNDX0NMQVNTfWApXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCB1cGRhdGVzID0gdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgaWYgKHVwZGF0ZXMpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHRoZSBmb3JtIGZyb20gdGhlIGNhcmQgYW5kIHVwZGF0ZSB0aGUgZGF0YSBzdHJ1Y3R1cmVcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgX3VwZGF0ZSAoY2FyZCkge1xuICAgIGNvbnN0IGZvcm1zID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtJylcbiAgICBsZXQgdXBkYXRlcyA9IGZhbHNlXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZm9ybSA9IGZvcm1zW2ldXG4gICAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKGZvcm0pXG4gICAgICBjb25zdCBkYXRhID0gZmQub2JqZWN0XG4gICAgICAvLyBkYXRhID0gZm91bmRyeS51dGlscy5kaWZmT2JqZWN0KFxuICAgICAgLy8gICB0aGlzLmRhdGEsXG4gICAgICAvLyAgIGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGRhdGEpXG4gICAgICAvLyApXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBrZXkpXG4gICAgICAgIGlmICghKG9sZFZhbHVlID09PSB2YWx1ZSkpIHtcbiAgICAgICAgICBzZXRCeVBhdGgodGhpcywga2V5LCB2YWx1ZSlcbiAgICAgICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVzXG4gIH1cblxuICBnZXQgbWVzc2FnZSAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlXG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMuX21lc3NhZ2VJZClcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZSAoeCkge1xuICAgIHRoaXMuX21lc3NhZ2UgPSB4XG4gIH1cblxuICBnZXQgbWVzc2FnZUlkICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gdGhpcy5fbWVzc2FnZUlkXG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlLmlkXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2VJZCAoeCkge1xuICAgIHRoaXMuX21lc3NhZ2VJZCA9IHhcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhdHRhY2hPYmplY3Q6IHRydWUsXG4gICAgICBjbGFzc2VzOiBbRUNDX0NMQVNTXSxcbiAgICAgIGV4Y2x1ZGU6IFtdLFxuICAgICAgZXhjbHVkZVN0YXJ0V2l0aDogJ18nLFxuICAgICAgc3VibWl0T25DaGFuZ2U6IHRydWUsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICBvb2M6IGZhbHNlLCAvLyAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLm9vYz1mYWxzZV0gIFVzZSB0aGUgc3BlYWtlci9nZXRzcGVha2VyLiBpZiB0cnVlIHVzZSB0aGUgdXNlciBpbnN0ZWFkXG4gICAgICBjb21wdXRlOiB0cnVlLCAvLyAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY29tcHV0ZS5sb2NhbD10cnVlXSBpbnZvcXVlIHRoZSBjb21wdXRlIG1ldGhvZCBhcyBsb2NhbCB1c2VyID0+IG5lZWQgdG8gb3ZlcnJpZGUgbG9jYWxDb21wdXRlXG4gICAgICBHTVVwZGF0ZTogZmFsc2UgLy8gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNvbXB1dGUuR009ZmFsc2VdIGludm9xdWUgdGhlIEdNVXBkYXRlIG1ldGhvZCBhcyBHTSA9PiBuZWVkIHRvIG92ZXJyaWRlIEdNVXBkYXRlXG4gICAgfVxuICB9XG5cbiAgZ2V0IG9iamVjdERhdGFTdHJpbmcgKCkge1xuICAgIGNvbnN0IHNhdmVEYXRhID0ge1xuICAgICAgZGF0YTogdGhpcy5kYXRhLFxuICAgICAgb3B0aW9uczogdGhpcy5fb3B0aW9uc1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc2F2ZURhdGEsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZSlcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2UgKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoaHRtbWxDYXJkKSB7XG4gICAgaWYgKCFodG1tbENhcmQpIHJldHVyblxuICAgIGlmICghaHRtbWxDYXJkLmRhdGFzZXQuZWNjQ2xhc3MpIHJldHVyblxuICAgIGlmICghaHRtbWxDYXJkLmRhdGFzZXQub2JqZWN0KSByZXR1cm5cbiAgICBjb25zdCBjYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoaHRtbWxDYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICBjb25zdCBtZXNzYWdlID0gaHRtbWxDYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlPy5kYXRhc2V0Py5tZXNzYWdlSWRcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKFxuICAgICAgY2FyZERhdGEuZGF0YSxcbiAgICAgIGNhcmREYXRhLm9wdGlvbnMsXG4gICAgICBodG1tbENhcmQuZGF0YXNldC5lY2NDbGFzcyxcbiAgICAgIG1lc3NhZ2VJZFxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSwgb3B0aW9ucywgY2FyZENsYXNzTmFtZSwgbWVzc2FnZUlkID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgQ2FyZENsYXNzID0gZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi50eXBlcy5nZXQoY2FyZENsYXNzTmFtZSlcblxuICAgIGlmICghQ2FyZENsYXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmtub3duIGNoYXQgY2FyZCB0eXBlOiAke2NhcmRDbGFzc05hbWV9YClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmRDbGFzcyhkYXRhLCBvcHRpb25zKVxuICAgIGlmIChtZXNzYWdlSWQpIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgYXdhaXQgY2FyZC5hc3NpZ25PYmplY3RzKClcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc2V0RGF0YSAobmFtZSkge1xuICAgIGlmICghbmFtZSAmJiAhKCQudHlwZShuYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICBzZXRCeVBhdGgodGhpcywgbmFtZSwgdHJ1ZSlcbiAgfVxuXG4gIHVuc2V0RGF0YSAobmFtZSkge1xuICAgIGlmICghbmFtZSAmJiAhKCQudHlwZShuYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICBzZXRCeVBhdGgodGhpcywgbmFtZSwgZmFsc2UpXG4gIH1cblxuICB0b2dnbGVEYXRhIChuYW1lKSB7XG4gICAgaWYgKCFuYW1lICYmICEoJC50eXBlKG5hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIGNvbnN0IHZhbHVlID0gZ2V0QnlQYXRoKHRoaXMsIG5hbWUpXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsICF2YWx1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICAvLyBjb25zdCBhbnN3ZXIgPSBhd2FpdCBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5leGVjdXRlQXNHTSgnZ21fb25Ub2dnbGUnLCB7XG4gICAgLy8gICBldmVudDogZXZlbnQsXG4gICAgLy8gICBjYXJkOiB0aGlzXG4gICAgLy8gfSlcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKCdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gdGhpcy5fb25CdXR0b24oZXZlbnQpXG4gICAgaWYgKFxuICAgICAgdGFyZ2V0ICYmXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmXG4gICAgICAhZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBuYW1lID0gdGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgICAgPyBgZGF0YS5mbGFncy4ke3RhcmdldC5kYXRhc2V0LmZsYWd9YFxuICAgICAgOiB0YXJnZXQuZGF0YXNldC5uYW1lXG4gICAgaWYgKCFuYW1lKSByZXR1cm5cbiAgICBjb25zdCB0b2dnbGUgPSB0YXJnZXQuY2xvc2VzdCgnLmVjYy1yYWRpbycpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIHRoaXMudG9nZ2xlRGF0YShuYW1lKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lY2Mtc3dpdGNoJylcbiAgICAgIGZvciAoY29uc3QgYiBvZiBidXR0b25zKSB7XG4gICAgICAgIGNvbnN0IGJOYW1lID0gYi5kYXRhc2V0LmZsYWdcbiAgICAgICAgICA/IGBkYXRhLmZsYWdzLiR7Yi5kYXRhc2V0LmZsYWd9YFxuICAgICAgICAgIDogYi5kYXRhc2V0Lm5hbWVcbiAgICAgICAgdGhpcy51bnNldERhdGEoYk5hbWUpXG4gICAgICB9XG4gICAgICB0aGlzLnNldERhdGEobmFtZSlcbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KGAuJHtFQ0NfQ0xBU1N9YClcbiAgICBpZiAodGhpcy5vcHRpb25zLnN1Ym1pdE9uQ2hhbmdlKSB7XG4gICAgICBpZiAoY2FyZCkgdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKSAvLyBTdWJtaXQgb24gY2hhbmdlID9cbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBfcGFydGljaXBhbnQge1xuICBjb25zdHJ1Y3RvciAoZGF0YSA9IHt9KSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YVxuICB9XG5cbiAgX2ZldGNoICgpIHtcbiAgICBpZiAoIXRoaXMuX2RvYyAmJiB0aGlzLmRhdGEuZG9jVXVpZCkge1xuICAgICAgdGhpcy5fZG9jID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkodGhpcy5kYXRhLmRvY1V1aWQpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuX2RvYykge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuX2RvYy5jb25zdHJ1Y3Rvcj8ubmFtZSkge1xuICAgICAgICAgIGNhc2UgJ1Rva2VuRG9jdW1lbnQnOlxuICAgICAgICAgICAgdGhpcy5fYWN0b3IgPSB0aGlzLl9kb2MuYWN0b3JcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdDb0NBY3Rvcic6XG4gICAgICAgICAgICB0aGlzLl9hY3RvciA9IHRoaXMuX2RvY1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHRoaXMuX2FjdG9yID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkodGhpcy5kYXRhLmRvY1V1aWQpXG4gICAgfVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICB0aGlzLl9mZXRjaCgpXG4gICAgcmV0dXJuIHRoaXMuX2FjdG9yXG4gIH1cblxuICBnZXQgaXNBY3RvciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQWN0b3IgfHwgdGhpcy5oYXNWZWhpY2xlXG4gIH1cblxuICBnZXQgaXNBY3RpdmUgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuYWN0aXZlIHx8IGZhbHNlXG4gIH1cblxuICBnZXQga2V5ICgpIHtcbiAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSByZXR1cm4gdGhpcy52ZWhpY2xlLmFjdG9yS2V5XG4gICAgaWYgKHRoaXMuaGFzQWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLmFjdG9yS2V5XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGljb24gKCkge1xuICAgIGlmICghdGhpcy5pc0FjdG9yKSB7XG4gICAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcXVlc3Rpb24tY2lyY2xlLXJlZ3VsYXIuc3ZnJ1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSByZXR1cm4gdGhpcy52ZWhpY2xlLmltZ1xuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pbWdcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZHJpdmVyICgpIHtcbiAgICBpZiAoIXRoaXMuX2RyaXZlcikge1xuICAgICAgdGhpcy5fZHJpdmVyID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkodGhpcy5kYXRhLmRvY1V1aWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9kcml2ZXJcbiAgfVxuXG4gIGdldCB2ZWhpY2xlICgpIHtcbiAgICBpZiAodGhpcy5kYXRhLnZlaGljbGVLZXkpIHtcbiAgICAgIHRoaXMuX3ZlaGljbGUgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmRhdGEudmVoaWNsZUtleSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3ZlaGljbGVcbiAgfVxuXG4gIGdldCBoYXNBY3RvciAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5hY3RvclxuICB9XG5cbiAgZ2V0IGhhc1ZlaGljbGUgKCkge1xuICAgIHJldHVybiAhIXRoaXMudmVoaWNsZVxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLmhhc1ZlaGljbGUpIHJldHVybiB0aGlzLnZlaGljbGUubmFtZVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5uYW1lIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IG1vdiAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEubW92KSB7XG4gICAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSB0aGlzLmRhdGEubW92ID0gdGhpcy52ZWhpY2xlLm1vdlxuICAgICAgZWxzZSBpZiAodGhpcy5oYXNBY3RvcikgdGhpcy5kYXRhLm1vdiA9IHRoaXMuYWN0b3IubW92XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5tb3YpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5tb3YpKSkgdGhpcy5kYXRhLmhhc1ZhbGlkTW92ID0gdHJ1ZVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS5oYXNWYWxpZE1vdiA9IGZhbHNlXG4gICAgICAgIHRoaXMuZGF0YS5tb3YgPSB1bmRlZmluZWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLm1vdlxuICB9XG5cbiAgZ2V0IHV1aWQgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEudXVpZFxuICB9XG5cbiAgZ2V0IGhhc01heEJvbnVzRGljZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm9udXNEaWNlID49IDJcbiAgfVxuXG4gIGdldCBib251c0RpY2UgKCkge1xuICAgIGlmIChcbiAgICAgIGlzTmFOKHRoaXMuZGF0YS5ib251c0RpY2UpIHx8XG4gICAgICB0aGlzLmRhdGEuYm9udXNEaWNlIDwgMCB8fFxuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA+IDJcbiAgICApIHtcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRhdGEuYm9udXNEaWNlXG4gIH1cblxuICBzZXQgYm9udXNEaWNlICh4KSB7XG4gICAgaWYgKGlzTmFOKHgpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdCb251cyBkaWNlIGNhbiBPbmx5IGJlIGEgbnVtYmVyJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoeCA+IDIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ01heCAyIGJvbnVzIGRpY2UnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh4IDwgMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignTm8gbmVnYXRpdiBib251cyBkaWNlJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLmRhdGEuYm9udXNEaWNlID0geFxuICB9XG5cbiAgZ2V0IGhwICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5ocCkge1xuICAgICAgdGhpcy5kYXRhLmhwID0gMFxuICAgIH1cbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgdGhpcy5kYXRhLmhwID0gdGhpcy5hY3Rvci5ocFxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRhdGEuaHBcbiAgfVxuXG4gIHNldCBocCAoeCkge1xuICAgIHRoaXMuZGF0YS5ocCA9IHhcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgdGhpcy5hY3Rvci5zZXRIcCh4KVxuICAgIH1cbiAgfVxuXG4gIGFkZEJvbnVzRGljZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5ib251c0RpY2UgPj0gMikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQWxyZWFkeSBoYXZlIG1heCBib251cyBkaWNlJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLmRhdGEuYm9udXNEaWNlICs9IDFcbiAgfVxuXG4gIHJlbW92ZUJvbnVzRGljZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5ib251c0RpY2UgPD0gMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQWxyZWFkeSBoYXZlIDAgYm9udXMgZGljZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSAtPSAxXG4gIH1cblxuICByZXNldEJvbnVzRGljZSAoKSB7XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSA9IDBcbiAgfVxuXG4gIGdldCBoYXNCb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc09uZUJvbnVzRGljZSB8fCB0aGlzLmhhc1R3b0JvbnVzRGljZVxuICB9XG5cbiAgZ2V0IGhhc09uZUJvbnVzRGljZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm9udXNEaWNlID49IDFcbiAgfVxuXG4gIGdldCBoYXNUd29Cb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAyXG4gIH1cblxuICBnZXQgY2FuQXNzaXN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5hc3Npc3Q/Lmxlbmd0aCA+IDBcbiAgfVxuXG4gIGdldCBjYW5CZUNhdXRpb3VzICgpIHtcbiAgICByZXR1cm4gIXRoaXMuaGFzTWF4Qm9udXNEaWNlXG4gIH1cblxuICBnZXQgYXNzaXN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmFzc2lzdCB8fCBbXVxuICB9XG5cbiAgZ2V0IGRleCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuZGV4KSB7XG4gICAgICBpZiAodGhpcy5oYXNWZWhpY2xlICYmIHRoaXMuaGFzRHJpdmVyKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kZXggPSB0aGlzLmRyaXZlci5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzQWN0b3IpIHtcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IHRoaXMuYWN0b3IuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuZGV4KSB7XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhdGEuZGV4KSkpIHRoaXMuZGF0YS5oYXNWYWxpZERleCA9IHRydWVcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEuaGFzVmFsaWREZXggPSBmYWxzZVxuICAgICAgICB0aGlzLmRhdGEuZGV4ID0gMFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRhdGEuZGV4XG4gIH1cblxuICBnZXQgaGFzQUd1blJlYWR5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmhhc0FHdW5SZWFkeSB8fCBmYWxzZVxuICB9XG5cbiAgZ2V0IGluaXRpYXRpdmUgKCkge1xuICAgIGxldCBpbml0ID0gdGhpcy5kZXhcbiAgICBpZiAodGhpcy5oYXNBR3VuUmVhZHkpIHtcbiAgICAgIGluaXQgKz0gNTBcbiAgICB9XG4gICAgLy8gaWYoIHRoaXMuc3BlZWRDaGVjayl7XG4gICAgLy8gICBpZih0aGlzLnNwZWVkQ2hlY2suc2NvcmUpIGluaXQgKz0gdGhpcy5zcGVlZENoZWNrLnNjb3JlLzEwMFxuICAgIC8vIH1cblxuICAgIHJldHVybiBpbml0XG4gIH1cblxuICBnZXQgaXNDaGFzZXIgKCkge1xuICAgIHJldHVybiAhIXRoaXMuZGF0YS5jaGFzZXJcbiAgfVxuXG4gIGdldCBpc1ByZXkgKCkge1xuICAgIHJldHVybiAhdGhpcy5pc0NoYXNlclxuICB9XG5cbiAgZ2V0IGlzVmFsaWQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc1ZhbGlkRGV4ICYmIHRoaXMuaGFzVmFsaWRNb3ZcbiAgfVxuXG4gIGdldCBoYXNWYWxpZERleCAoKSB7XG4gICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5kYXRhLmRleCkpXG4gIH1cblxuICBnZXQgaGFzVmFsaWRNb3YgKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5tb3YpKVxuICB9XG5cbiAgZ2V0IGhhc0RyaXZlciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzVmVoaWNsZSAmJiB0aGlzLmhhc0FjdG9yXG4gIH1cblxuICBnZXQgbW92QWRqdXN0bWVudCAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5yb2xsRGF0YVN0cmluZykge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcbiAgICAgIGlmIChyb2xsKSB7XG4gICAgICAgIGlmICghcm9sbC5zdGFuZGJ5KSB7XG4gICAgICAgICAgaWYgKHJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkgcmV0dXJuIDFcbiAgICAgICAgICBlbHNlIGlmIChyb2xsLmZhaWxlZCkgcmV0dXJuIC0xXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBhZGp1c3RlZE1vdiAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLm1vdiA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMubW92KSkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gTnVtYmVyKHRoaXMubW92KSArIHRoaXMubW92QWRqdXN0bWVudFxuICB9XG5cbiAgZ2V0IGhhc01vdkFkanVzdG1lbnQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0JvbnVzTW92IHx8IHRoaXMuaGFzTWFsdXNNb3ZcbiAgfVxuXG4gIGdldCBoYXNCb251c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50ID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNNYWx1c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50IDwgMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIGdldCBvcHRpb25zKCl7XG4gIC8vICByZXR1cm4ge1xuICAvLyAgICBleGNsdWRlOiBbXSxcbiAgLy8gICAgZXhjbHVkZVN0YXJ0V2l0aDogJ18nXG4gIC8vICB9O1xuICAvLyB9XG5cbiAgLy8gZ2V0IGRhdGFTdHJpbmcoKXtcbiAgLy8gIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LHZhbHVlKT0+e1xuICAvLyAgICBpZiggbnVsbCA9PT0gdmFsdWUpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIGlmKCB0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgaWYoIGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgcmV0dXJuIHZhbHVlO1xuICAvLyAgfSk7XG4gIC8vIH1cblxuICB0b29TbG93ICgpIHtcbiAgICB0aGlzLmRhdGEuZXhjbHVkZWQgPSB0cnVlXG4gIH1cblxuICBpbmNsdWRlSW5DaGFzZSAoKSB7XG4gICAgdGhpcy5kYXRhLmV4Y2x1ZGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuZXNjYXBlZCA9IGZhbHNlXG4gIH1cblxuICBlc2NhcGVkICgpIHtcbiAgICB0aGlzLmRhdGEuZXNjYXBlZCA9IHRydWVcbiAgfVxuXG4gIHNldCBzbG93ZXN0ICh4KSB7XG4gICAgdGhpcy5kYXRhLnNsb3dlc3QgPSB4XG4gIH1cblxuICBnZXQgc2xvd2VzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5zbG93ZXN0XG4gIH1cblxuICBzZXQgZmFzdGVzdCAoeCkge1xuICAgIHRoaXMuZGF0YS5mYXN0ZXN0ID0geFxuICB9XG5cbiAgZ2V0IGZhc3Rlc3QgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZmFzdGVzdFxuICB9XG5cbiAgY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zIChtaW5Nb3YpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5tb3ZlbWVudEFjdGlvbiA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHR5cGVvZiB0aGlzLmFkanVzdGVkTW92ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgaXNOYU4obWluTW92KVxuICAgICkge1xuICAgICAgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDBcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDEgKyAodGhpcy5hZGp1c3RlZE1vdiAtIG1pbk1vdilcbiAgICB9XG4gICAgLy8gaWYoIHRoaXMubW92ZW1lbnRBY3Rpb24gPCAwKSB0aGlzLm1vdmVtZW50QWN0aW9uID0gMFxuICB9XG5cbiAgc2V0IG1vdmVtZW50QWN0aW9uICh4KSB7XG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uID0geFxuICB9XG5cbiAgZ2V0IG1vdmVtZW50QWN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uXG4gIH1cblxuICBzZXQgY3VycmVudE1vdmVtZW50QWN0aW9ucyAoeCkge1xuICAgIHRoaXMuZGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0geFxuICB9XG5cbiAgZ2V0IGN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuY3VycmVudE1vdmVtZW50QWN0aW9ucyB8fCAwXG4gIH1cblxuICBnZXQgaGFzTWF4TXZ0QWN0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA+PSB0aGlzLm1vdmVtZW50QWN0aW9uXG4gIH1cblxuICBnZXQgaGFzTm9NdnRBY3Rpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDw9IDBcbiAgfVxuXG4gIGFkZE1vdmVtZW50QWN0aW9ucyAoeCA9IDEpIHtcbiAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKz0geFxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiB0aGlzLm1vdmVtZW50QWN0aW9uKSB7XG4gICAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSB0aGlzLm1vdmVtZW50QWN0aW9uXG4gICAgfVxuICB9XG5cbiAgYWx0ZXJNb3ZlbWVudEFjdGlvbnMgKHgpIHtcbiAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKz0geFxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiB0aGlzLm1vdmVtZW50QWN0aW9uKSB7XG4gICAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSB0aGlzLm1vdmVtZW50QWN0aW9uXG4gICAgfVxuICB9XG5cbiAgZ2V0IG1vdmVtZW50QWN0aW9uQXJyYXkgKCkge1xuICAgIGNvbnN0IGJhc2VBcnJheSA9IEFycmF5KHRoaXMubW92ZW1lbnRBY3Rpb24pLmZpbGwoJ2Jhc2UnKVxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPj0gMCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnM7IGkrKykge1xuICAgICAgICBiYXNlQXJyYXlbaV0gPSAnYmFzZSBhdmFpbGFibGUnXG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUFycmF5XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IDApIHtcbiAgICAgIGNvbnN0IGRlZmljaXRBcnJheSA9IEFycmF5KE1hdGguYWJzKHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucykpLmZpbGwoXG4gICAgICAgICdkZWZpY2l0J1xuICAgICAgKVxuICAgICAgcmV0dXJuIGRlZmljaXRBcnJheS5jb25jYXQoYmFzZUFycmF5KVxuICAgIH1cbiAgfVxuXG4gIGdldCBjc3NDbGFzcyAoKSB7XG4gICAgY29uc3QgY3NzQ2xhc3NlcyA9IFtdXG4gICAgaWYgKHRoaXMuaXNDaGFzZXIpIGNzc0NsYXNzZXMucHVzaCgnY2hhc2VyJylcbiAgICBlbHNlIGNzc0NsYXNzZXMucHVzaCgncHJleScpXG4gICAgaWYgKHRoaXMuZGF0YS5leGNsdWRlZCkgY3NzQ2xhc3Nlcy5wdXNoKCdleGNsdWRlZCcsICd0b29fc2xvdycpXG4gICAgaWYgKHRoaXMuZGF0YS5lc2NhcGVkKSBjc3NDbGFzc2VzLnB1c2goJ2VzY2FwZWQnKVxuICAgIGlmICh0aGlzLmRhdGEuZmFzdGVzdCkgY3NzQ2xhc3Nlcy5wdXNoKCdmYXN0ZXN0JylcbiAgICBpZiAodGhpcy5kYXRhLnNsb3dlc3QpIGNzc0NsYXNzZXMucHVzaCgnc2xvd2VzdCcpXG4gICAgaWYgKHRoaXMuZGF0YS5hY3RpdmUpIGNzc0NsYXNzZXMucHVzaCgnYWN0aXZlJylcbiAgICBpZiAodGhpcy5kYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPD0gMCkgY3NzQ2xhc3Nlcy5wdXNoKCduby1hY3Rpb25zJylcbiAgICByZXR1cm4gY3NzQ2xhc3Nlcy5qb2luKCcgJylcbiAgfVxuXG4gIGdldCBzcGVlZENoZWNrICgpIHtcbiAgICBjb25zdCBjaGVjayA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lKSBjaGVjay5uYW1lID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZVxuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uc2NvcmUpIGNoZWNrLnNjb3JlID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2suc2NvcmVcbiAgICBjaGVjay5jc3NDbGFzc2VzID0gJydcbiAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnJvbGxEYXRhU3RyaW5nKSB7XG4gICAgICBjaGVjay5yb2xsID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHRoaXMuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nKVxuICAgICAgaWYgKGNoZWNrLnJvbGwpIHtcbiAgICAgICAgaWYgKCFjaGVjay5yb2xsLnN0YW5kYnkgfHwgY2hlY2sucm9sbC5oYXNDYXJkKSB7XG4gICAgICAgICAgY2hlY2sucm9sbGVkID0gdHJ1ZVxuICAgICAgICAgIGNoZWNrLmlubGluZVJvbGwgPSBjaGVjay5yb2xsLmlubGluZUNoZWNrLm91dGVySFRNTFxuICAgICAgICAgIGNoZWNrLmNzc0NsYXNzZXMgKz0gJ3JvbGxlZCdcbiAgICAgICAgICBpZiAoIWNoZWNrLnJvbGwuc3RhbmRieSkge1xuICAgICAgICAgICAgaWYgKGNoZWNrLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICAgICAgICBjaGVjay5tb2RpZmllckNzcyA9ICd1cGdyYWRlJ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGVjay5yb2xsLmZhaWxlZCkgY2hlY2subW9kaWZpZXJDc3MgPSAnZG93bmdyYWRlJ1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBjaGVjay5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgfHxcbiAgICAgICAgICAgICAgY2hlY2sucm9sbC5mYWlsZWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjaGVjay5oYXNNb2RpZmllciA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzQWN0b3IpIHtcbiAgICAgIGNoZWNrLm9wdGlvbnMgPSBbXVxuICAgICAgZm9yIChjb25zdCBjIG9mIFsnY29uJ10pIHtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyaXN0aWMgPSB0aGlzLmFjdG9yLmdldENoYXJhY3RlcmlzdGljKGMpXG4gICAgICAgIGlmIChjaGFyYWN0ZXJpc3RpYz8udmFsdWUpIGNoZWNrLm9wdGlvbnMucHVzaChjaGFyYWN0ZXJpc3RpYy5sYWJlbClcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuYWN0b3IuZHJpdmVTa2lsbHMpIHtcbiAgICAgICAgY2hlY2sub3B0aW9ucy5wdXNoKHMubmFtZSlcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuYWN0b3IucGlsb3RTa2lsbHMpIHtcbiAgICAgICAgY2hlY2sub3B0aW9ucy5wdXNoKHMubmFtZSlcbiAgICAgIH1cbiAgICAgIGNoZWNrLmhhc09wdGlvbnMgPSAhIWNoZWNrLm9wdGlvbnMubGVuZ3RoXG5cbiAgICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uaWQpIHtcbiAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLmFjdG9yLmZpbmQodGhpcy5kYXRhLnNwZWVkQ2hlY2suaWQpXG4gICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgIGNvbnN0IGdhbWVJdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5kYXRhLnNwZWVkQ2hlY2suaWQpXG4gICAgICAgICAgaWYgKGdhbWVJdGVtKSBpdGVtID0gdGhpcy5hY3Rvci5maW5kKGdhbWVJdGVtLm5hbWUpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdpdGVtJyAmJiBpdGVtLnZhbHVlLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLm5hbWVcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdjaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICAgICAgY2hlY2suaXNDaGFyYWN0ZXJpc3RpYyA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnYXR0cmlidXRlJ1xuICAgICAgICAgICAgY2hlY2suaXNBdHRyaWJ1dGUgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/Lm5hbWUpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuZmluZCh0aGlzLmRhdGEuc3BlZWRDaGVjay5uYW1lKVxuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdpdGVtJyAmJiBpdGVtLnZhbHVlLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLm5hbWVcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdjaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICAgICAgY2hlY2suaXNDaGFyYWN0ZXJpc3RpYyA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnYXR0cmlidXRlJ1xuICAgICAgICAgICAgY2hlY2suaXNBdHRyaWJ1dGUgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5pZCkge1xuICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0uZGF0YT8udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW1cbiAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS5uYW1lXG4gICAgICAgICAgY2hlY2sudHlwZSA9ICdza2lsbCdcbiAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgIGNoZWNrLnJlZlNldCA9IGZhbHNlXG4gICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLmJhc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/Lm5hbWUgJiYgdGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnNjb3JlKSB7XG4gICAgICBjaGVjay5uYW1lID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZVxuICAgICAgY2hlY2suc2NvcmUgPSB0aGlzLmRhdGEuc3BlZWRDaGVjay5zY29yZVxuICAgICAgY2hlY2sucmVmU2V0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBjaGVjay5jYW5CZVJvbGxlZCA9IHRydWVcblxuICAgIGlmICghY2hlY2sucm9sbGVkICYmICFjaGVjay5zY29yZSkge1xuICAgICAgY2hlY2suY3NzQ2xhc3NlcyArPSAnIGludmFsaWQnXG4gICAgICBjaGVjay5jYW5CZVJvbGxlZCA9IGZhbHNlXG4gICAgfVxuICAgIGNoZWNrLmlzVmFsaWQgPSBjaGVjay5yb2xsZWQgJiYgIWlzTmFOKGNoZWNrLnNjb3JlKVxuXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNvcnRCeVJvbGVBbmREZXggKGEsIGIpIHtcbiAgaWYgKCFhICYmIGIpIHJldHVybiAxXG4gIGlmICghYiAmJiBhKSByZXR1cm4gLTFcbiAgaWYgKCFhICYmICFiKSByZXR1cm4gMFxuICAvLyBQdXQgY2hhc2VycyBmaXJzdFxuICBpZiAoYi5jaGFzZXIgJiYgIWEuY2hhc2VyKSByZXR1cm4gMVxuICBpZiAoYS5jaGFzZXIgJiYgIWIuY2hhc2VyKSByZXR1cm4gLTFcbiAgLy8gSWYgc2FtZXR5cGUgc29ydCBieSBkZXhcbiAgcmV0dXJuIGEuZGV4IC0gYi5kZXhcbn1cbiIsIi8qIGdsb2JhbCBkdXBsaWNhdGUsIGZvdW5kcnksIGdhbWUsIG1lcmdlT2JqZWN0LCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBFbmhhbmNlZENoYXRDYXJkIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NoYXRjYXJkbGliL3NyYy9jaGF0Y2FyZGxpYi5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IF9wYXJ0aWNpcGFudCB9IGZyb20gJy4uLy4uL2l0ZW1zL2NoYXNlL3BhcnRpY2lwYW50LmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IGNyZWF0ZUlubGluZVJvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDaGFzZU9ic3RhY2xlQ2FyZCBleHRlbmRzIEVuaGFuY2VkQ2hhdENhcmQge1xuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuaHRtbCcsXG4gICAgICBHTVVwZGF0ZTogdHJ1ZVxuICAgIH0pXG4gICAgb3B0aW9ucy5jbGFzc2VzLnB1c2goJ29ic3RhY2xlLWNhcmQnKVxuICAgIHJldHVybiBvcHRpb25zXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEuc3RhdHVzID0gW11cbiAgICBkYXRhLnN0cmluZ3MgPSB7fVxuICAgIGRhdGEuZGlzcGxheUFjdG9yT25DYXJkID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgICAvLyBkYXRhLnBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLnBhcnRpY2lwYW50RGF0YSlcblxuICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgbmFtZTpcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdGlvbkNvc3QnKSArIGAgOiR7dGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdH1gXG4gICAgfSlcblxuICAgIGRhdGEuY2FyZC5icmVha2FibGVPYnN0YWNsZSA9XG4gICAgICBkYXRhLmRhdGEub2JzdGFjbGU/LmJhcnJpZXIgJiYgZGF0YS5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cyAvLyBUT0RPOiBDaGVjayBpZiB1c2VmdWxsXG4gICAgZGF0YS5jYXJkLnZhbGlkQ2hlY2sgPSBmYWxzZVxuXG4gICAgaWYgKFxuICAgICAgZGF0YS5kYXRhLnN0YXRlcz8ub2JzdGFjbGVEZWZpbmVkICYmXG4gICAgICAoZGF0YS5kYXRhLm9ic3RhY2xlLmhhemFyZCB8fFxuICAgICAgICAoZGF0YS5kYXRhLm9ic3RhY2xlLmJhcnJpZXIgJiYgIWRhdGEuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpKVxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IHRydWVcbiAgICAgIGRhdGEuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50Py5hY3Rvcikge1xuICAgICAgZGF0YS5za2lsbCA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZmluZChkYXRhLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lKVxuICAgICAgZGF0YS5jaGVja09wdGlvbnMgPSB0aGlzLmNoYXNlLmdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzKFxuICAgICAgICB0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkXG4gICAgICApXG4gICAgICBpZiAoZGF0YS5za2lsbCkge1xuICAgICAgICBkYXRhLnZhbGlkQ2hlY2sgPSB0cnVlXG4gICAgICAgIGRhdGEudmFsaWRTa2lsbCA9IHRydWVcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSAmJiBkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIHtcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhLmNoZWNrT3B0aW9ucyA9IHRoaXMuY2hhc2UuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzXG4gICAgICBkYXRhLmR1bW15QWN0b3IgPSB0cnVlXG4gICAgICBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSAmJiBkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIHtcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZGF0YS5kYXRhLmJvbnVzRGljZSkgZGF0YS5kYXRhLmJvbnVzRGljZSA9IDBcblxuICAgIGlmIChcbiAgICAgIGRhdGEuZGF0YS5ib251c0RpY2UgPCAyICYmXG4gICAgICBkYXRhLmRhdGEudG90YWxBY3Rpb25Db3N0IDwgZGF0YS5kYXRhLm1vdmVtZW50QWN0aW9uXG4gICAgKSB7XG4gICAgICBkYXRhLmNhblRha2VDYXV0aW91c0FwcHJvYWNoID0gdHJ1ZVxuICAgIH1cblxuICAgIGRhdGEuY3VzdG9tV2VhcG9uID0gZmFsc2VcbiAgICBpZiAodGhpcy5kYXRhLndlYXBvbkNob2ljZSA9PT0gJzAnKSB7XG4gICAgICBkYXRhLmN1c3RvbVdlYXBvbiA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoZGF0YS52YWxpZENoZWNrKSB7XG4gICAgICBsZXQgY2hlY2tOYW1lLCB2YWx1ZVxuICAgICAgaWYgKGRhdGEuc2tpbGwpIHtcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5za2lsbC52YWx1ZS5uYW1lXG4gICAgICAgIHZhbHVlID0gZGF0YS5za2lsbC52YWx1ZS52YWx1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZVxuICAgICAgICB2YWx1ZSA9IGRhdGEuZGF0YS5jaGVja1RocmVzaG9sZFxuICAgICAgfVxuICAgICAgZGF0YS5zdHJpbmdzLmNoZWNrUm9sbFJlcXVlc3QgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFza1JvbGwnLCB7XG4gICAgICAgIG5hbWU6IGNoZWNrTmFtZSxcbiAgICAgICAgdmFsdWVcbiAgICAgIH0pXG4gICAgICBpZiAoZGF0YS5kYXRhLmJvbnVzRGljZSAhPT0gMCkge1xuICAgICAgICBpZiAoZGF0YS5kYXRhLmJvbnVzRGljZSA+IDApIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCArPSBgICgrJHtkYXRhLmRhdGEuYm9udXNEaWNlfSlgXG4gICAgICAgIH0gZWxzZSBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCArPSBgICgke2RhdGEuZGF0YS5ib251c0RpY2V9KWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5kYXRhLnN0YXRlcz8ub2JzdGFjbGVEZWZpbmVkKSB7XG4gICAgICBkYXRhLnN0cmluZ3Mub2JzdGFjbGVEZWZpbmVkID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWNpbmdPYnN0YWNsZScsIHtcbiAgICAgICAgdHlwZTogZGF0YS5kYXRhLm9ic3RhY2xlLmJhcnJpZXJcbiAgICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BQmFycmllcicpXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQUhhemFyZCcpXG4gICAgICB9KVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5uYW1lKSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURlZmluZWQgKz0gYCAoJHtkYXRhLmRhdGEub2JzdGFjbGUubmFtZX0pYFxuICAgICAgfVxuXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmNhbkFza1JvbGwgPSB0cnVlXG4gICAgICAvLyBkYXRhLmRhdGEuc3RhdGVzLm9ic3RhY2xlQ2FuQmVCcm9rZW4gPSBmYWxzZVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5iYXJyaWVyKSB7XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmFycmllcicpIH0pXG4gICAgICAgIGlmIChkYXRhLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSB7XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5CcmVha2FibGUnKSB9KVxuICAgICAgICAgIC8vIGRhdGEuZGF0YS5zdGF0ZXMub2JzdGFjbGVDYW5CZUJyb2tlbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHtcbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXphcmQnKSB9KVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xuICAgICAgICBpZiAoIWRhdGEudmFsaWRDaGVjaykge1xuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vVmFsaWRDaGVjaycpLFxuICAgICAgICAgICAgY3NzOiAnZXJyb3InXG4gICAgICAgICAgfSlcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuRW50ZXJWYWx1ZVRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICdDb0M3LlNraWxsU2VsZWN0QmFzZScsXG4gICAgICAgICAgICB7IG5hbWU6IGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgfVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoIWRhdGEuZGF0YS5jaGVja1RocmVzaG9sZCkgZGF0YS5kYXRhLnN0YXRlcy5jYW5Bc2tSb2xsID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIGlmICghZGF0YS52YWxpZFNraWxsKSB7XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9WYWxpZFNraWxsJyksXG4gICAgICAgICAgICBjc3M6ICd3YXJuaW5nJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhaykge1xuICAgICAgICBsZXQgZGFtYWdlU3RhdHVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJyZWFrRG93bicpXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8ub2JzdGFjbGVEYW1hZ2VSb2xsPy50b3RhbCkge1xuICAgICAgICAgIGRhbWFnZVN0YXR1cyArPSBgIDogJHt0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwudG90YWx9YFxuICAgICAgICB9XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IGRhbWFnZVN0YXR1c1xuICAgICAgICB9KVxuXG4gICAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGFtYWdlUm9sbGVkKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGw/LnRvdGFsIDw9IDApIHtcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURhbWFnZSA9XG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob0RhbWFnZURlYWx0JylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YS5pbmxpbmVEYW1hZ2VSb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsXG4gICAgICAgICAgICApPy5vdXRlckhUTUxcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURhbWFnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGFtYWdlRGVhbHQnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBkYXRhLmlubGluZURhbWFnZVJvbGxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlKSB7XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmVnb3RpYXRlJykgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2gpIHtcbiAgICAgICAgY29uc3QgY2F1dGlvdXNTdGF0dXMgPSB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhdXRpb3VzJyksXG4gICAgICAgICAgY3NzOiAnJ1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoID4gMSkge1xuICAgICAgICAgIGNhdXRpb3VzU3RhdHVzLmNzcyA9ICdzdHJvbmcnXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLmNhdXRpb3VzQXBwcm9hY2hUeXBlID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuQmVpbmdWZXJ5Q2F1dGlvdXMnXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jYXV0aW91c0FwcHJvYWNoVHlwZSA9XG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmVpbmdDYXV0aW91cycpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UpIGNhdXRpb3VzU3RhdHVzLmNzcyArPSAnIGNvbnN1bWUnXG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goY2F1dGlvdXNTdGF0dXMpXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2spIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZSAvLyBPbiBoYXphcmQsIHlvdSBwYXNzIGV2ZW4gaWYgeW91IGZhaWwgeW91ciByb2xsXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5wYXNzZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5tb3ZlUGxheWVyID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPSB0cnVlXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlUGFzc2VkID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuT2JzdGFjbGVQYXNzZWQnXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5sdWNrU3BlbnQpIHtcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZVBhc3NlZCArPSBgICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuR290THVja3knXG4gICAgICAgICAgICApfSlgXG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlN1Y2Nlc3MnKSxcbiAgICAgICAgICAgIGNzczogJ3N1Y2Nlc3MnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5pc0Z1bWJsZSkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jaGVja0ZhaWxlZCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PYnN0YWNsZUZ1bWJsZScpXG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJyksXG4gICAgICAgICAgICBjc3M6ICdmdW1ibGUnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tGYWlsZWQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT2JzdGFjbGVGYWlsJylcbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJyksXG4gICAgICAgICAgICBjc3M6ICdmYWlsdXJlJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5wbGF5ZXJBY3Rpb25EZWZpbmVkKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCkge1xuICAgICAgICBkYXRhLnN0cmluZ3MucGxheWVySW50ZW50aW9ucyA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5UcnlUb05lZ290aWF0ZUhhemFyZCdcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuYmFycmllcikge1xuICAgICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5wbGF5ZXJJbnRlbnRpb25zID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuVHJ5VG9HZXRQYXN0QmFycmllcnMnXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhaykge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5wbGF5ZXJJbnRlbnRpb25zID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRyeVRvQnJlYWsnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2hlY2tSb2xsZWQpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCkge1xuICAgICAgICAvLyBJZiB0aGUgY2FyZCBpcyByZXNvbHZlZCB0aGUgY2hlY2sgaXMgZnJvemVuXG4gICAgICAgIGRhdGEuaHRtbENoZWNrID0gYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suaW5saW5lQ2hlY2s/Lm91dGVySFRNTFxuICAgICAgfSBlbHNlIGRhdGEuaHRtbENoZWNrID0gYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suZ2V0SHRtbFJvbGwoKVxuICAgIH1cblxuICAgIC8vIGlmICh0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkRGFtYWdlUm9sbCkge1xuICAgIC8vICAgaWYgKCFkYXRhLmRhdGEuYXJtb3IpIHtcbiAgICAvLyAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IpXG4gICAgLy8gICAgICAgZGF0YS5kYXRhLmFybW9yID1cbiAgICAvLyAgICAgICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IudmFsdWUgfHwgMFxuICAgIC8vICAgfVxuICAgIC8vICAgaWYgKGRhdGEuZGF0YS5hcm1vcikge1xuICAgIC8vICAgICBpZiAoaXNOYU4oTnVtYmVyKGRhdGEuZGF0YS5hcm1vcikpKSBkYXRhLmRhdGEuYXJtb3IgPSBudWxsXG4gICAgLy8gICB9XG4gICAgLy8gfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkKSB7XG4gICAgICBkYXRhLnBsYXllckRhbWFnZVRha2VuID0gZmFsc2VcbiAgICAgIGRhdGEub2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCA9IGZhbHNlXG5cbiAgICAgIC8vIEhhcyB0aGUgb2JzdGFjbGUgY2hhbmdlZCA/XG4gICAgICBjb25zdCBkaWZmID0gdGhpcy5saXN0Q2hhbmdlcygpXG4gICAgICBpZiAoZGlmZi5jaGFuZ2VzKSB7XG4gICAgICAgIGRhdGEub2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gSXMgcGxheWVyIHRha2luZyBkYW1hZ2VcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlICYmIHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjaz8uaXNGYWlsdXJlKSB7XG4gICAgICAgIGRhdGEucGxheWVyRGFtYWdlVGFrZW4gPSB0cnVlXG4gICAgICAgIGRhdGEuaW5saW5lRGFtYWdlVGFrZW5Sb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsXG4gICAgICAgICk/Lm91dGVySFRNTFxuICAgICAgICAvLyBpZiAoZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPCAwKVxuICAgICAgICAvLyAgIGRhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gMFxuXG4gICAgICAgIGlmIChkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA9PT0gMCkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5kYW1hZ2VUYWtlbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Zb3VUYWtlTm9EYW1hZ2UnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5kYW1hZ2VUYWtlbiA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAnQ29DNy5Zb3VUYWtlU29tZURhbWFnZScsXG4gICAgICAgICAgICB7IGFtb3VudDogZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvdGFsRGFtYWdlJykgK1xuICAgICAgICAgICAgYCA6JHtkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbn1gXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCAmJlxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2s/LmlzRmFpbHVyZVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEuYWN0aW9uTG9zdCA9IHRydWVcbiAgICAgICAgZGF0YS5zdHJpbmdzLmFjdGlvbkxvc3QgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWW91TG9zdFRpbWUnKVxuICAgICAgICBkYXRhLmlubGluZUFjdGlvbkxvc3RSb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsXG4gICAgICAgICk/Lm91dGVySFRNTFxuICAgICAgfVxuXG4gICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhcmRSZXNvbHZlZCcpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCkge1xuICAgICAgaWYgKHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5maW5hbE91dGNvbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTW92ZVRvTG9jYXRpb24nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YS5zdHJpbmdzLmZpbmFsT3V0Y29tZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Eb250TW92ZVRvTG9jYXRpb24nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgR01VcGRhdGUgKCkge1xuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvQzc6IEdNVXBkYXRlIGNhbGxlZCBmcm9tIG5vbiBHTSB1c2VyJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQpIHtcbiAgICAgIC8vIENhcmQgaXMgcmVzb2x2ZWQsIGNvbXB1dGUgYWxsIGZvcm11bGFzIGFuZCBkYW1hZ2UuXG4gICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZERhbWFnZVJvbGw/LnRvdGFsKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsRGFtYWdlID0gdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbC50b3RhbFxuICAgICAgICBjb25zdCBhcm1vclZhbHVlID0gdGhpcy5kYXRhLmZsYWdzLmlnbm9yZUFybW9yID8gMCA6IHRoaXMuZGF0YS5hcm1vclxuICAgICAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEoYXJtb3JWYWx1ZSkpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPSAoXG4gICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChhcm1vclZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICApLnRvdGFsXG4gICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihhcm1vclZhbHVlKSkpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPSBOdW1iZXIoYXJtb3JWYWx1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPSB0b3RhbERhbWFnZSAtIHRoaXMuZGF0YS5hcm1vclxuICAgICAgICAgIGlmICh0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEucmVmbGVjdE9ic3RhbGVDaGFuZ2VzKSB7XG4gICAgICAgIHRoaXMuZGF0YS5yZWZsZWN0T2JzdGFsZUNoYW5nZXMgPSB0cnVlIC8vIEJ5IGRlZmF1bHQgcmVmbGVjdCBjaGFuZ2VzXG4gICAgICB9XG5cbiAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XG4gICAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID1cbiAgICAgICAgICAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSB8fCB0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkKSAmJlxuICAgICAgICAgICF0aGlzLmRhdGEuc3RhdGVzLmZhaWxlZENvbnNlcXVlbmNlc1JvbGxlZFxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5iYXJyaWVyICYmXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHM/Lm9ic3RhY2xlRGFtYWdlUm9sbD8udG90YWxcbiAgICAgICkge1xuICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZSkge1xuICAgICAgICAgIHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlID1cbiAgICAgICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbC50b3RhbFxuICAgICAgICB9XG4gICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5mbGFncy5vYnN0YWNsZURlc3RveWVkKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLmZsYWdzLm9ic3RhY2xlRGVzdG95ZWQgPVxuICAgICAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cyAtIHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlIDw9IDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCkge1xuICAgICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uQXJyYXkgPSBkdXBsaWNhdGUoXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb25BcnJheVxuICAgICAgKVxuICAgICAgdGhpcy5kYXRhLkVFQ19BQ1RJT04gPSB7IGRldGFjaERhdGE6IHRydWUgfVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgbG9jYWxDb21wdXRlICgpIHt9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBhc3NpZ25PYmplY3RzICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2sgJiZcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcbiAgICApIHtcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrID0gQ29DN0NoZWNrLmZyb21EYXRhKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrKVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGwgJiZcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbD8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwgPSBSb2xsLmZyb21EYXRhKFxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGxcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZERhbWFnZVJvbGwgJiZcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGw/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0J1xuICAgICkge1xuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbCA9IFJvbGwuZnJvbURhdGEoXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGxcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZEFjdGlvblJvbGwgJiZcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGw/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0J1xuICAgICkge1xuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbCA9IFJvbGwuZnJvbURhdGEoXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGxcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGluaXRpYWxpemUgKCkge1xuICAgIC8vIGNvbnN0IGNoYXNlID0gYXdhaXQgZnJvbVV1aWQodGhpcy5kYXRhLmNoYXNlVXVpZClcbiAgICBpZiAoIXRoaXMuY2hhc2UpIHJldHVyblxuICAgIGlmICh0eXBlb2YgdGhpcy5jaGFzZS5hY3RpdmVQYXJ0aWNpcGFudERhdGE/LnV1aWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YSA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMuZGF0YSA9IHt9XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEuc3RhdGVzID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhLnN0YXRlcyA9IHt9XG5cbiAgICAvLyBjb25zdCBsb2NhdGlvbiA9IGNoYXNlLmdldExvY2F0aW9uRGF0YSh0aGlzLmRhdGEubG9jYXRpb25VdWlkKVxuICAgIHRoaXMuZGF0YS5vYnN0YWNsZSA9IHRoaXMubG9jYXRpb24/Lm9ic3RhY2xlRGV0YWlscyAvLyBGZWVkIHRoZSBvYnN0YWNsZSBkZWZpbml0aW9uXG4gICAgLy8gdGhpcy5kYXRhLnBhcnRpY2lwYW50RGF0YSA9IGNoYXNlLmFjdGl2ZVBhcnRpY2lwYW50RGF0YVxuICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWQgPSB0aGlzLmNoYXNlLmFjdGl2ZVBhcnRpY2lwYW50RGF0YS51dWlkXG5cbiAgICBpZiAodGhpcy5wYXJ0aWNpcGFudERhdGE/LmJvbnVzRGljZSA+IDApIHtcbiAgICAgIHRoaXMuZGF0YS5ib251c0RpY2UgPSB0aGlzLnBhcnRpY2lwYW50RGF0YS5ib251c0RpY2VcbiAgICAgIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID0gdHJ1ZVxuICAgICAgdGhpcy5kYXRhLmZsYWdzLmhhc0JvbnVzRGljZSA9IHRoaXMucGFydGljaXBhbnQuaGFzQm9udXNEaWNlXG4gICAgfVxuXG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uQXJyYXkgPSBkdXBsaWNhdGUoXG4gICAgICB0aGlzLnBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uQXJyYXlcbiAgICApXG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uID0gdGhpcy5wYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCA9IDBcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudCAoKSB7XG4gICAgaWYgKCF0aGlzLnBhcnRpY2lwYW50RGF0YSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIGlmICghdGhpcy5fcGFydGljaXBhbnQpXG4gICAgLy8gICB0aGlzLl9wYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5wYXJ0aWNpcGFudERhdGEpXG4gICAgLy8gcmV0dXJuIHRoaXMuX3BhcnRpY2lwYW50XG4gICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQodGhpcy5wYXJ0aWNpcGFudERhdGEpIC8vIFRPIFJFU0VUXG4gIH1cblxuICBnZXQgcGFydGljaXBhbnREYXRhICgpIHtcbiAgICBpZiAoIXRoaXMuY2hhc2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoIXRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5jaGFzZS5nZXRQYXJ0aWNpcGFudERhdGEodGhpcy5kYXRhLnBhcnRpY2lwYW50VXVpZClcbiAgfVxuXG4gIGdldCBsb2NhdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmNoYXNlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuY2hhc2UuZ2V0TG9jYXRpb25EYXRhKHRoaXMuZGF0YS5sb2NhdGlvblV1aWQpXG4gIH1cblxuICBnZXQgb2JzdGFjbGUgKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbikgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLm9ic3RhY2xlRGV0YWlsc1xuICB9XG5cbiAgZ2V0IGNoYXNlICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5jaGFzZVV1aWQpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoIXRoaXMuX2NoYXNlKSB0aGlzLl9jaGFzZSA9IENvQzdVdGlsaXRpZXMuU2Zyb21VdWlkKHRoaXMuZGF0YS5jaGFzZVV1aWQpXG4gICAgcmV0dXJuIHRoaXMuX2NoYXNlXG4gIH1cblxuICBnZXQgcm9sbCAoKSB7XG4gICAgbGV0IHJvbGxEYXRhXG4gICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IgJiYgdGhpcy5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSkge1xuICAgICAgY29uc3QgYWN0b3JTa2lsbCA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZmluZChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZVxuICAgICAgKVxuICAgICAgaWYgKHR5cGVvZiBhY3RvclNraWxsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByb2xsRGF0YSA9IGFjdG9yU2tpbGxcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJvbGxEYXRhID0ge1xuICAgICAgICAgIHR5cGU6ICd2YWx1ZScsXG4gICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHRoaXMuZGF0YS5jaGVja1RocmVzaG9sZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcm9sbERhdGEuYWN0b3IgPSB7IGFjdG9yS2V5OiB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmlkIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgJiYgdGhpcy5kYXRhLmNoZWNrVGhyZXNob2xkKSB7XG4gICAgICAgIHJvbGxEYXRhID0ge1xuICAgICAgICAgIHR5cGU6ICd2YWx1ZScsXG4gICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHRoaXMuZGF0YS5jaGVja1RocmVzaG9sZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWN0b3I6IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMucGFydGljaXBhbnQubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocm9sbERhdGEpIHtcbiAgICAgIHJvbGxEYXRhLmRpY2VNb2RpZmllciA9IHRoaXMuZGF0YT8uYm9udXNEaWNlIHx8IDBcbiAgICAgIHJvbGxEYXRhLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIHJvbGxEYXRhLmRlbnlQdXNoID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gcm9sbERhdGEgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgdmFsaWRGYWlsZWRSb2xscyAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2s/LmlzRmFpbHVyZSkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNEYW1hZ2UpIHtcbiAgICAgIGNvbnN0IGRhbWFnZSA9XG4gICAgICAgIHR5cGVvZiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UgPT09ICdudW1iZXInXG4gICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2V9YFxuICAgICAgICAgIDogdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlXG4gICAgICBpZiAoIXRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZSkgcmV0dXJuIGZhbHNlXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZSAmJlxuICAgICAgICAhUm9sbC52YWxpZGF0ZShkYW1hZ2UpIC8vIFZhbGlkYXRlIG9ubHkgdGFrZSBhIHN0cmluZywgaWYgZGFtYWdlIGlzIGEgbnVtYmVyIGNvbnZlcnQgdG8gYSBzdHJpbmdcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQgJiYgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QpIHtcbiAgICAgIGNvbnN0IGFjdGlvbkNvc3QgPVxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QgPT09ICdudW1iZXInXG4gICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdH1gXG4gICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdFxuICAgICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdCkgcmV0dXJuIGZhbHNlXG4gICAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QgJiYgIVJvbGwudmFsaWRhdGUoYWN0aW9uQ29zdCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgd2VhcG9uc09wdGlvbnMgKCkge1xuICAgIGNvbnN0IHdlYXBvbnMgPSBbXVxuICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3I/Lml0ZW1UeXBlcz8ud2VhcG9uPy5mb3JFYWNoKHcgPT4ge1xuICAgICAgbGV0IGZvcm11bGEgPSB3LmRhdGEuZGF0YS5yYW5nZS5ub3JtYWwuZGFtYWdlXG4gICAgICBsZXQgZGIgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRiXG4gICAgICBpZiAoZGIgPT09IG51bGwgfHwgTnVtYmVyKGRiKSA9PT0gMCkge1xuICAgICAgICBkYiA9ICcnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYiA9IGAke2RifWBcbiAgICAgIH1cblxuICAgICAgaWYgKGRiICYmICFkYi5zdGFydHNXaXRoKCctJykpIGRiID0gJysnICsgZGJcbiAgICAgIGlmICh3LmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFkZGIpIGZvcm11bGEgPSBmb3JtdWxhICsgZGJcbiAgICAgIGlmICh3LmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFoYmQpIGZvcm11bGEgPSBmb3JtdWxhICsgZGIgKyAnLzInXG4gICAgICB3ZWFwb25zLnB1c2goe1xuICAgICAgICBuYW1lOiBgJHt3LmRhdGEubmFtZX0gKCR7Zm9ybXVsYX0pYCxcbiAgICAgICAgZGFtYWdlOiBmb3JtdWxhLFxuICAgICAgICB1dWlkOiB3LnV1aWRcbiAgICAgIH0pXG4gICAgfSlcbiAgICB3ZWFwb25zLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgaWYgKFxuICAgICAgIXdlYXBvbnMuZmluZCh3ID0+XG4gICAgICAgIHcubmFtZVxuICAgICAgICAgIC50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgLnN0YXJ0c1dpdGgoXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5hcm1lZFdlYXBvbk5hbWUnKT8udG9VcHBlckNhc2UoKVxuICAgICAgICAgIClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIGxldCBkYiA9ICcnXG4gICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5hY3Rvcikge1xuICAgICAgICBkYiA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGJcbiAgICAgICAgaWYgKGRiICYmICFkYi5zdGFydHNXaXRoKCctJykpIGRiID0gJysnICsgZGJcbiAgICAgICAgaWYgKGRiID09PSBudWxsIHx8IE51bWJlcihkYikgPT09IDApIGRiID0gJydcbiAgICAgIH1cblxuICAgICAgd2VhcG9ucy51bnNoaWZ0KHtcbiAgICAgICAgbmFtZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYXJtZWRXZWFwb25OYW1lJyl9ICgxRDMke2RifSlgLFxuICAgICAgICBkYW1hZ2U6IGAxRDMke2RifWAsXG4gICAgICAgIHV1aWQ6ICd1bmFybWVkJ1xuICAgICAgfSlcbiAgICB9XG5cbiAgICB3ZWFwb25zLnB1c2goe1xuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk90aGVyJyksXG4gICAgICBkYW1hZ2U6IHRoaXMuZGF0YT8uY3VzdG9tV2VhcG9uRGFtYWdlIHx8IG51bGwsXG4gICAgICB1dWlkOiAwXG4gICAgfSlcbiAgICByZXR1cm4gd2VhcG9uc1xuICB9XG5cbiAgZ2V0IHVzZWRXZWFwb24gKCkge1xuICAgIGlmICghdGhpcy5kYXRhPy53ZWFwb25DaG9pY2UpIHtcbiAgICAgIGlmICghdGhpcy53ZWFwb25zT3B0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKCF0aGlzLmRhdGEpIHRoaXMuZGF0YSA9IHt9IC8vIHVzZWxlc3MgISEhXG4gICAgICB0aGlzLmRhdGEud2VhcG9uQ2hvaWNlID0gdGhpcy53ZWFwb25zT3B0aW9uc1swXS51dWlkXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS53ZWFwb25DaG9pY2UpIHtcbiAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMud2VhcG9uc09wdGlvbnMuZmluZChcbiAgICAgICAgZSA9PiBlLnV1aWQgPT09IHRoaXMuZGF0YS53ZWFwb25DaG9pY2VcbiAgICAgIClcbiAgICAgIGlmICh3ZWFwb24pIHJldHVybiB3ZWFwb25cbiAgICB9XG4gIH1cblxuICBnZXQgaW5mbGljdGVkRGFtYWdlRm9ybXVsYSAoKSB7XG4gICAgaWYgKHRoaXMudXNlZFdlYXBvbikge1xuICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy51c2VkV2VhcG9uXG4gICAgICBpZiAod2VhcG9uICYmIHdlYXBvbi5kYW1hZ2UgJiYgUm9sbC52YWxpZGF0ZSh3ZWFwb24uZGFtYWdlKSkge1xuICAgICAgICByZXR1cm4gd2VhcG9uLmRhbWFnZVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgdmFsaWRPYnN0YWNsZURhbWFnZSAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cyAmJlxuICAgICAgIWlzTmFOKE51bWJlcih0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzKSkgJiZcbiAgICAgIE51bWJlcih0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzKSA+IDAgJiZcbiAgICAgIHRoaXMuaW5mbGljdGVkRGFtYWdlRm9ybXVsYVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgc3RyaW5ncyAoKSB7XG4gICAgY29uc3Qgc3RyaW5ncyA9IHt9XG4gICAgc3RyaW5ncy5kYW1hZ2VSb2xsUmVxdWVzdCA9IHRoaXMudXNlZFdlYXBvbi5uYW1lXG5cbiAgICByZXR1cm4gc3RyaW5nc1xuICB9XG5cbiAgLy8gQWN0aW9ucyA6XG4gIGFzeW5jIHZhbGlkYXRlQ2FyZCAob3B0aW9ucykge1xuICAgIGxldCBsb2FjdGlvbkNoYW5nZWRcbiAgICBsZXQgcGFydGljaXBhbnRDaGFnZWQgPSBmYWxzZVxuICAgIGNvbnN0IG9ic3RhY2xlVXBkYXRlID0ge31cbiAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZURldGFpbHMgPSB7fVxuICAgIGNvbnN0IHBhcnRpY2lwYW50VXBkYXRlID0ge31cbiAgICBpZiAodGhpcy5kYXRhLmZsYWdzLm9ic3RhY2xlRGVzdG95ZWQpIHtcbiAgICAgIGxvYWN0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlID0gZmFsc2VcbiAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlscy5oYXphcmQgPSBmYWxzZVxuICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXIgPSBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IGRpZmYgPSB0aGlzLmxpc3RDaGFuZ2VzKClcbiAgICBpZiAoZGlmZi5jaGFuZ2VzKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLnJlZmxlY3RPYnN0YWxlQ2hhbmdlcykge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkaWZmLm9ic3RhY2xlKSkge1xuICAgICAgICAgIGlmIChrZXkgIT09ICd0eXBlJykge1xuICAgICAgICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzW3ZhbHVlLmtleV0gPSB2YWx1ZS5uZXdcbiAgICAgICAgICAgIGxvYWN0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnRvdGFsT2JzdGFjbGVEYW1hZ2UgPiAwICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpIHtcbiAgICAgIGxldCByZW1haW5pbmdIcCA9IHRoaXMuZGF0YS5vYnN0YWNsZS5IaXRQb2ludHNcbiAgICAgIHJlbWFpbmluZ0hwIC09IHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlXG4gICAgICBpZiAocmVtYWluaW5nSHAgPCAwKSByZW1haW5pbmdIcCA9IDBcbiAgICAgIGlmICh0aGlzLm9ic3RhY2xlLkhpdFBvaW50cyAhPT0gcmVtYWluaW5nSHApIHtcbiAgICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzLkhpdFBvaW50cyA9IHJlbWFpbmluZ0hwXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5IaXRQb2ludHMgPSByZW1haW5pbmdIcFxuICAgICAgICBsb2FjdGlvbkNoYW5nZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID4gMCkge1xuICAgICAgcGFydGljaXBhbnRDaGFnZWQgPSB0cnVlXG4gICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5hY3Rvcikge1xuICAgICAgICBhd2FpdCB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRlYWxEYW1hZ2UoXG4gICAgICAgICAgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4sXG4gICAgICAgICAgeyBpZ25vcmVBcm1vcjogdHJ1ZSB9XG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmhwID0gdGhpcy5wYXJ0aWNpcGFudERhdGEuaHBcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUuaHAgLT0gdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW5cbiAgICAgICAgaWYgKHBhcnRpY2lwYW50VXBkYXRlLmhwIDwgMCkgcGFydGljaXBhbnRVcGRhdGUuaHAgPSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgPiAwKSB7XG4gICAgICBwYXJ0aWNpcGFudENoYWdlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPVxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50RGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIC09IHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3RcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSB0cnVlIC8vIEJvbnVzIGRpY2UgYXdhcmRlZCBkdXJpbmcgZmxvdyBhcmUgYmVpbmcgY29uc3VtZWRcblxuICAgIGlmICh0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSkge1xuICAgICAgcGFydGljaXBhbnRDaGFnZWQgPSB0cnVlXG4gICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5ib251c0RpY2UgPSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWlzTmFOKHRoaXMuZGF0YS5ib251c0RpY2UpICYmXG4gICAgICAgIHRoaXMuZGF0YS5ib251c0RpY2UgIT09IHRoaXMucGFydGljaXBhbnQuYm9udXNEaWNlXG4gICAgICApIHtcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUuYm9udXNEaWNlID0gdGhpcy5kYXRhLmJvbnVzRGljZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEubW92ZVBsYXllcikge1xuICAgICAgbGV0IHRhcmdldExvY2F0aW9uXG4gICAgICBpZiAodGhpcy5kYXRhLmZvcndhcmQpIHtcbiAgICAgICAgdGFyZ2V0TG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRMb2NhdGlvbiA9IHRoaXMuY2hhc2UuZ2V0TG9jYXRpb25TaGlmdCh0aGlzLmxvY2F0aW9uLnV1aWQsIHtcbiAgICAgICAgICBza2lwOiAtMVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAodGFyZ2V0TG9jYXRpb24udXVpZCkge1xuICAgICAgICBhd2FpdCB0aGlzLmNoYXNlLm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24oXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudERhdGEudXVpZCxcbiAgICAgICAgICB0YXJnZXRMb2NhdGlvbi51dWlkLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNjcm9sbFRvTG9jYXRpb246IHRydWUsXG4gICAgICAgICAgICBhY3RpdmF0ZUxvY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHJlbmRlcjogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobG9hY3Rpb25DaGFuZ2VkKSB7XG4gICAgICBhd2FpdCB0aGlzLmNoYXNlLnVwZGF0ZUxvY2F0aW9uKHRoaXMubG9jYXRpb24udXVpZCwgb2JzdGFjbGVVcGRhdGUsIHtcbiAgICAgICAgcmVuZGVyOiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHBhcnRpY2lwYW50Q2hhZ2VkKSB7XG4gICAgICBhd2FpdCB0aGlzLmNoYXNlLnVwZGF0ZVBhcnRpY2lwYW50KFxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50RGF0YS51dWlkLFxuICAgICAgICBwYXJ0aWNpcGFudFVwZGF0ZSxcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jbG9zZWQgPSB0cnVlXG4gICAgYXdhaXQgdGhpcy5jaGFzZS5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oKSAvLyBSZW5kZXIgd2lsbCBiZSBkb25lIHRoZXJlICFcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgZGVmaW5lT2JzdGFjbGUgKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5zdGF0ZXMpIHRoaXMuZGF0YS5zdGF0ZXMgPSB7fVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEZWZpbmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB0cnlUb05lZ290aWF0ZU9ic3RhY2xlIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5icmVha09yTmVnb3RpYXRlRGVmaW5lZCA9IHRydWVcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHRyeVRvQnJlYWtEb3duT2JzdGFjbGUgKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgY2FuY2VsT2JzdGFjbGVEZWZpbml0aW9uIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5vYnN0YWNsZURlZmluZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGNhbmNlbEJyZWFrT3JQYXNzQ2hvaWNlIChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSByZXR1cm4gdGhpcy5jYW5jZWxPYnN0YWNsZURlZmluaXRpb24oKVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHJlcXVlc3RSb2xsIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5wbGF5ZXJBY3Rpb25EZWZpbmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB0YWtlQ2F1dGlvdXNBcHByb2FjaCAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCkgdGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCA9IDBcbiAgICB0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoICs9IDFcbiAgICB0aGlzLmRhdGEuYm9udXNEaWNlICs9IDFcbiAgICB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0ICs9IDFcbiAgICBpZiAoIXRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlKSB7XG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9IHRydWVcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MuaGFzQm9udXNEaWNlKSB7XG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuaGFzQm9udXNEaWNlID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uIDw9IHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QpIHsgLy8gQWxsIG1vdiBhY3Rpb24gaGF2ZSBiZWVuIHVzZWQgdG8gdGFrZSBjdWF0aW91cyBhcHByb2FjaC5cbiAgICAgIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID0gZmFsc2UgLy8gRG8gbm90IGNvbnN1bWUgdGhlIGJvbnVzIGRpY2UuXG4gICAgICB0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHJvbGxTa2lsbENoZWNrIChvcHRpb25zKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy5ldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHJldHVyblxuICAgIHRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcpXG4gICAgaWYgKCF0aGlzLnJvbGwpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdGhpbmdUb1JvbGwnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoIXRoaXMuZGF0YS5vYmplY3RzKSB0aGlzLmRhdGEub2JqZWN0cyA9IHt9XG4gICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2sgPSBDb0M3Q2hlY2suY3JlYXRlRnJvbUFjdG9yUm9sbERhdGEodGhpcy5yb2xsKVxuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMuY2hlY2spIHJldHVybiBmYWxzZVxuICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLmRlbnlQdXNoID0gdHJ1ZSAvLyBPYnN0YWNsZSBjaGVjayBjYW4ndCBiZSBwdXNoZWRcbiAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jaGVja1JvbGxlZCA9IHRydWVcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnKVxuICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5wYXNzZWQpIHtcbiAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZVxuICAgICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLmFybW9yID09PSAndW5kZWZpbmVkJyAmJiB0aGlzLnBhcnRpY2lwYW50LmFjdG9yKSB7XG4gICAgICAgIHRoaXMuZGF0YS5hcm1vciA9XG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci52YWx1ZSB8fCAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHVzZUx1Y2sgKG9wdGlvbnMpIHtcbiAgICBhd2FpdCBDb0M3Q2hlY2suYWx0ZXIodGhpcy5kYXRhLm9iamVjdHMuY2hlY2ssICd1c2VMdWNrJywge1xuICAgICAgdGFyZ2V0OiBvcHRpb25zLmV2ZW50LmN1cnJlbnRUYXJnZXQsXG4gICAgICB1cGRhdGU6IGZhbHNlXG4gICAgfSlcbiAgICBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2sucGFzc2VkKSB7XG4gICAgICB0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZVxuICAgICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyByb2xsRmFpbENvbnNlcXVlbmNlcyAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMpIHRoaXMuZGF0YS5vYmplY3RzID0ge31cbiAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhc0RhbWFnZSAmJiB0aGlzLmRhdGEub2JqZWN0cy5jaGVjaz8uaXNGYWlsdXJlKSB7XG4gICAgICBjb25zdCBkYW1hZ2UgPVxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlfWBcbiAgICAgICAgICA6IHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZVxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbCA9IG5ldyBSb2xsKGRhbWFnZSlcbiAgICAgIGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuaGFzQWN0aW9uQ29zdCAmJlxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjaz8uaXNGYWlsdXJlXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgYWN0aW9uQ29zdCA9XG4gICAgICAgICAgdHlwZW9mIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdH1gXG4gICAgICAgICAgICA6IHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0XG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwgPSBuZXcgUm9sbChhY3Rpb25Db3N0KVxuICAgICAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAodGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbC50b3RhbCAtIDEpIC8vIDEgYWN0aW9uIGFscmVhZHkgc3BlbmQgZm9yIHNraWxsIGNoZWNrXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5mYWlsZWRDb25zZXF1ZW5jZXNSb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGFza1JvbGxPYnN0YWNsZURhbWFnZSAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMucGxheWVyQWN0aW9uRGVmaW5lZCA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgcm9sbE9ic3RhY2xlRGFtYWdlIChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEub2JqZWN0cykgdGhpcy5kYXRhLm9iamVjdHMgPSB7fVxuICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbCA9IG5ldyBSb2xsKHRoaXMudXNlZFdlYXBvbj8uZGFtYWdlKVxuICAgIGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsKVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEYW1hZ2VSb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8vIExpc3QgYWxsIGNoYW5nZXNcbiAgbGlzdENoYW5nZXMgKHZhbGlkYXRlID0gZmFsc2UpIHtcbiAgICBjb25zdCBkaWZmID0ge1xuICAgICAgb2JzdGFjbGU6IHt9LFxuICAgICAgcGxheWVyOiB7fSxcbiAgICAgIGNoYW5nZXM6IGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IG5hbWVzID0ge1xuICAgICAgYmFycmllcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlR5cGUnKSxcbiAgICAgIGhhemFyZDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlR5cGUnKSxcbiAgICAgIGhhc0hpdFBvaW50czogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJyZWFrYWJsZScpLFxuICAgICAgSGl0UG9pbnRzOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGl0UG9pbnRzJyksXG4gICAgICBoYXNBY3Rpb25Db3N0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0aW9uQ29zdCcpLFxuICAgICAgZmFpbGVkQWN0aW9uQ29zdDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdGlvbkNvc3QnKSxcbiAgICAgIGhhc0RhbWFnZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpZ2h0QmFjaycpLFxuICAgICAgZmFpbGVkQ2hlY2tEYW1hZ2U6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25EYW1hZ2UnKSxcbiAgICAgIGNoZWNrTmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoZWNrJyksXG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmFtZScpXG4gICAgfVxuXG4gICAgaWYgKHZhbGlkYXRlICYmICF0aGlzLmRhdGEudmFsaWRhdGlvbikge1xuICAgICAgdGhpcy5kYXRhLnZhbGlkYXRpb24gPSB7fVxuICAgIH1cblxuICAgIGNvbnN0IG5ld09ic3RhY2xlID0gZm91bmRyeS51dGlscy5kaWZmT2JqZWN0KFxuICAgICAgdGhpcy5vYnN0YWNsZSxcbiAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZVxuICAgIClcbiAgICAvLyBjb25zdCBvbGRPYnN0YWNsZSA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdCh0aGlzLmRhdGEub2JzdGFjbGUsIHRoaXMub2JzdGFjbGUpXG5cbiAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKG5ld09ic3RhY2xlKSkge1xuICAgICAgLy8gaWYgKCdiYXJyaWVyJyA9PSBrZXkgfHwgJ2hhemFyZCcgPT0ga2V5KVxuICAgICAgLy8ge1xuICAgICAgLy8gICBkaWZmLmNoYW5nZXMgPSB0cnVlXG4gICAgICAvLyAgIGRpZmYub2JzdGFjbGUudHlwZSA9IHtcbiAgICAgIC8vICAgICBvbGQ6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgIC8vICAgICAgIHRoaXMub2JzdGFjbGUuYmFycmllciA/ICdDb0M3LkJhcnJpZXInIDogJ0NvQzcuSGF6YXJkJ1xuICAgICAgLy8gICAgICksXG4gICAgICAvLyAgICAgbmV3OiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAvLyAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuYmFycmllciA/ICdDb0M3LkJhcnJpZXInIDogJ0NvQzcuSGF6YXJkJ1xuICAgICAgLy8gICAgICksXG4gICAgICAvLyAgICAga2V5OiAndHlwZScsXG4gICAgICAvLyAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlR5cGUnKVxuICAgICAgLy8gICB9XG4gICAgICAvLyAgIGlmICh2YWxpZGF0ZSkge1xuICAgICAgLy8gICAgIHRoaXMuZGF0YS52YWxpZGF0aW9uW2tleV0gPSB0cnVlXG4gICAgICAvLyAgICAgdGhpcy5kYXRhLnZhbGlkYXRpb24udHlwZSA9IHRydWVcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfVxuICAgICAgLy8gZWxzZVxuICAgICAgLy8ge1xuICAgICAgaWYgKFxuICAgICAgICAhKFxuICAgICAgICAgIChuZXdPYnN0YWNsZVtrZXldID09PSAnJyAmJiB0aGlzLm9ic3RhY2xlW2tleV0gPT09IG51bGwpIHx8XG4gICAgICAgICAgKCFpc05hTihOdW1iZXIobmV3T2JzdGFjbGVba2V5XSkpICYmXG4gICAgICAgICAgICBOdW1iZXIobmV3T2JzdGFjbGVba2V5XSkgPT09IHRoaXMub2JzdGFjbGVba2V5XSlcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGRpZmYuY2hhbmdlcyA9IHRydWVcblxuICAgICAgICBkaWZmLm9ic3RhY2xlW2tleV0gPSB7XG4gICAgICAgICAgb2xkOiB0aGlzLm9ic3RhY2xlW2tleV0sXG4gICAgICAgICAgbmV3OiBuZXdPYnN0YWNsZVtrZXldLFxuICAgICAgICAgIG5hbWU6IG5hbWVzW2tleV0sXG4gICAgICAgICAga2V5XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbGlkYXRlKSB0aGlzLmRhdGEudmFsaWRhdGlvbltrZXldID0gdHJ1ZVxuICAgICAgfVxuICAgICAgLy8gfVxuICAgIH1cblxuICAgIHJldHVybiBkaWZmXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBEaWFsb2csIGZvdW5kcnksIGdhbWUsIG1lcmdlT2JqZWN0LCBOb3JtYWxpemVkUmVjdGFuZ2xlLCBUb2tlbiwgVG9rZW5Eb2N1bWVudCwgdWkgKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ2hhc2VPYnN0YWNsZUNhcmQgfSBmcm9tICcuLi8uLi9jaGF0L2NhcmRzL2NoYXNlLW9ic3RhY2xlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgX3BhcnRpY2lwYW50LCBzb3J0QnlSb2xlQW5kRGV4IH0gZnJvbSAnLi9wYXJ0aWNpcGFudC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFzZSBleHRlbmRzIENvQzdJdGVtIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9ydW5uaW5nLXNvbGlkLnN2ZydcbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0XG4gIH1cblxuICAvLyBIYW5kbGUgcGFydGljaXBhbnRzXG4gIGdldCBwYXJ0aWNpcGFudHMgKCkge1xuICAgIGNvbnN0IHBMaXN0ID0gW11cbiAgICBjb25zdCBwcmV5cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgLmZpbHRlcihwID0+ICFwLmNoYXNlcilcbiAgICAgIC5tYXAocCA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHApXG4gICAgICB9KVxuICAgIGNvbnN0IGNoYXNlcnMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgIC5maWx0ZXIocCA9PiBwLmNoYXNlcilcbiAgICAgIC5tYXAocCA9PiB7XG4gICAgICAgIHJldHVybiBuZXcgX3BhcnRpY2lwYW50KHApXG4gICAgICB9KVxuICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgLy8gcC5pbmRleCA9IHBMaXN0Lmxlbmd0aCAtIDFcbiAgICAgIHAuYXNzaXN0ID0gW11cbiAgICAgIGlmIChwLmNoYXNlcikge1xuICAgICAgICBwLmFzc2lzdCA9IGNoYXNlcnNcbiAgICAgICAgICAuZmlsdGVyKGMgPT4gYy51dWlkICE9PSBwLnV1aWQgJiYgIWMuaGFzTWF4Qm9udXNEaWNlKVxuICAgICAgICAgIC5tYXAoYyA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBjLnV1aWQsIG5hbWU6IGMubmFtZSB9XG4gICAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAuYXNzaXN0ID0gcHJleXNcbiAgICAgICAgICAuZmlsdGVyKGMgPT4gYy51dWlkICE9PSBwLnV1aWQgJiYgIWMuaGFzTWF4Qm9udXNEaWNlKVxuICAgICAgICAgIC5tYXAoYyA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBjLnV1aWQsIG5hbWU6IGMubmFtZSB9XG4gICAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcnRpY3BhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHApXG4gICAgICAvLyBwYXJ0aWNwYW50LmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKCBwYXJ0aWNwYW50LnV1aWQpIC8vIFJlY3Vyc2l2aXR5XG4gICAgICBwTGlzdC5wdXNoKHBhcnRpY3BhbnQpXG4gICAgfSlcbiAgICByZXR1cm4gcExpc3RcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudHNPYmplY3QgKCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBwLmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHAudXVpZClcbiAgICB9KVxuICAgIHJldHVybiBwYXJ0aWNpcGFudHNcbiAgfVxuXG4gIGdldCBhY3RpdmVQYXJ0aWNpcGFudERhdGEgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IHAuYWN0aXZlKVxuICB9XG5cbiAgZ2V0IGFjdGl2ZUFjdG9yICgpIHtcbiAgICBjb25zdCBwID0gdGhpcy5hY3RpdmVQYXJ0aWNpcGFudERhdGFcbiAgICBpZiAoIXApIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAocC5kb2NVdWlkKSB7XG4gICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkocC5kb2NVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgcGFydGljaXBhbnRzQnlBZGp1c3RlZE1vdiAoKSB7XG4gICAgY29uc3QgcExpc3QgPSB0aGlzLmFjdHVhbFBhcnRpY2lwYW50cy5zb3J0KFxuICAgICAgKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92XG4gICAgKVxuICAgIHBMaXN0LmZvckVhY2gocCA9PiB7XG4gICAgICBwLmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHAudXVpZClcbiAgICB9KVxuICAgIHJldHVybiBwTGlzdFxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZSAoKSB7XG4gICAgY29uc3QgcExpc3QgPSB0aGlzLmFjdHVhbFBhcnRpY2lwYW50cy5zb3J0KFxuICAgICAgKGEsIGIpID0+IGIuaW5pdGlhdGl2ZSAtIGEuaW5pdGlhdGl2ZVxuICAgIClcbiAgICBwTGlzdC5mb3JFYWNoKHAgPT4ge1xuICAgICAgcC5sb2NhdGlvbiA9IHRoaXMuZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwLnV1aWQpXG4gICAgfSlcbiAgICByZXR1cm4gcExpc3RcbiAgfVxuXG4gIGdldCBwcmV5cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmZpbHRlcihwID0+ICFwLmlzQ2hhc2VyICYmIHAuaXNWYWxpZCkgfHwgW11cbiAgfVxuXG4gIGdldCBjaGFzZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gcC5pc0NoYXNlciAmJiBwLmlzVmFsaWQpIHx8IFtdXG4gIH1cblxuICBnZXQgYWxsSGF2ZVZhbGlkTW92ICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZXZlcnkoZSA9PiBlLmhhc1ZhbGlkTW92KVxuICB9XG5cbiAgZ2V0IGFsbEhhdmVTcGVlZFJvbGwgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5ldmVyeShwID0+IHAuc3BlZWRDaGVjaz8ucm9sbGVkKVxuICB9XG5cbiAgZ2V0UGFydGljaXBhbnRMb2NhdGlvbiAocGFydGljaXBhbnRVdWlkKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5sb2NhdGlvbnM/Lmxpc3Q/Lmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3RhcnRlZCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMubG9jYXRpb25zXG5cbiAgICBjb25zdCBsb2NhdGlvbiA9IGxvY2F0aW9ucy5maW5kKGwgPT4ge1xuICAgICAgY29uc3QgbHAgPSBsLnBhcnRpY2lwYW50cz8uZmluZChwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkKVxuICAgICAgcmV0dXJuICEhbHBcbiAgICB9KVxuICAgIGlmIChsb2NhdGlvbikge1xuICAgICAgcmV0dXJuIGxvY2F0aW9uXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldFBhcnRpY2lwYW50RGF0YSAocGFydGljaXBhbnRVdWlkKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50KSByZXR1cm4gZm91bmRyeS51dGlscy5kdXBsaWNhdGUocGFydGljaXBhbnQpIC8vIFRPRE8gOiBjaGVjayBpZiB3ZSBuZWVkIHRvIGR1cGxpY2F0ZVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldFBhcnRpY2lwYW50IChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudERhdGEgPSB0aGlzLmdldFBhcnRpY2lwYW50RGF0YShwYXJ0aWNpcGFudFV1aWQpXG4gICAgaWYgKHBhcnRpY2lwYW50RGF0YSkgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocGFydGljaXBhbnREYXRhKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBuZXh0QWN0aXZlUGFydGljaXBhbnQgKCkge1xuICAgIGlmICghdGhpcy5zdGFydGVkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzQnlJbml0aWF0aXZlLmZpbmQoXG4gICAgICBwID0+IHAuZGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gMFxuICAgIClcbiAgfVxuXG4gIGdldCBzbG93ZXN0UHJleSAoKSB7XG4gICAgY29uc3QgcHJleXMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgLnNvcnQoKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92KVxuICAgICAgPy5maWx0ZXIocCA9PiBwLmlzUHJleSlcbiAgICBpZiAocHJleXMubGVuZ3RoID4gMCkgcmV0dXJuIHByZXlzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGZhc3Rlc3RDaGFzZXIgKCkge1xuICAgIGNvbnN0IGNoYXNlcnMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgLnNvcnQoKGEsIGIpID0+IGEuYWRqdXN0ZWRNb3YgLSBiLmFkanVzdGVkTW92KVxuICAgICAgPy5maWx0ZXIocCA9PiBwLmlzQ2hhc2VyKVxuICAgIGlmIChjaGFzZXJzLmxlbmd0aCA+IDApIHJldHVybiBjaGFzZXJzLnNsaWNlKC0xKS5wb3AoKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBhY3R1YWxQYXJ0aWNpcGFudHMgKCkge1xuICAgIGNvbnN0IHNsb3dlc3RQcmV5ID0gdGhpcy5zbG93ZXN0UHJleVxuICAgIGNvbnN0IGZhc3Rlc3RDaGFzZXIgPSB0aGlzLmZhc3Rlc3RDaGFzZXJcbiAgICBsZXQgcExpc3QgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgIGlmICghdGhpcy5zeXN0ZW0uaW5jbHVkZUxhdGVjb21lcnMgJiYgc2xvd2VzdFByZXkpIHtcbiAgICAgIHBMaXN0ID0gcExpc3QuZmlsdGVyKHAgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHAuaXNQcmV5IHx8IChwLmlzQ2hhc2VyICYmIHAuYWRqdXN0ZWRNb3YgPj0gc2xvd2VzdFByZXkuYWRqdXN0ZWRNb3YpXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbmNsdWRlRXNjYXBlZCAmJiBmYXN0ZXN0Q2hhc2VyKSB7XG4gICAgICBwTGlzdCA9IHBMaXN0LmZpbHRlcihwID0+IHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBwLmlzQ2hhc2VyIHx8IChwLmlzUHJleSAmJiBwLmFkanVzdGVkTW92IDw9IGZhc3Rlc3RDaGFzZXIuYWRqdXN0ZWRNb3YpXG4gICAgICAgIClcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHBMaXN0XG4gIH1cblxuICBnZXQgc2xvd2VzdFBhcnRpY2lwYW50ICgpIHtcbiAgICBjb25zdCBwTGlzdCA9IHRoaXMucGFydGljaXBhbnRzQnlBZGp1c3RlZE1vdlxuICAgIGlmIChwTGlzdC5sZW5ndGggPiAwKSByZXR1cm4gcExpc3RbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBhc3luYyB1cGRhdGVQYXJ0aWNpcGFudHMgKGxpc3QsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gdGhpcy5jbGVhblBhcnRpY2lwYW50TGlzdChsaXN0KVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUGFydGljaXBhbnQgKHBhcnRpY2lhbnRVdWlkLCB1cGRhdGVEYXRhLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgIGNvbnN0IHVwZGF0ZSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHVwZGF0ZURhdGEpXG4gICAgY29uc3QgcGFydGljaXBhbnRJbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50SW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHVwZGF0ZS51dWlkKSBkZWxldGUgdXBkYXRlLnV1aWRcbiAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHBhcnRpY2lwYW50c1twYXJ0aWNpcGFudEluZGV4XSwgdXBkYXRlLCB7XG4gICAgICBvdmVyd3JpdGU6IHRydWVcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGNsZWFuUGFydGljaXBhbnRMaXN0IChsaXN0KSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGxpc3QgfHwgZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgIGxpc3QuZm9yRWFjaChwID0+IHtcbiAgICAgIGxldCBkYXRhXG4gICAgICBpZiAocC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnX3BhcnRpY2lwYW50Jykge1xuICAgICAgICBkYXRhID0gcC5kYXRhXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0gcFxuICAgICAgfVxuICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRJbmRleChwYXJ0aWNpcGFudHNEYXRhLCBkYXRhLnV1aWQpXG4gICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGEucHVzaChkYXRhKVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhcnRpY2lwYW50RGF0YU1pc3NpbmcnKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGFbaW5kZXhdID0gZGF0YVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHBhcnRpY2lwYW50c0RhdGFcbiAgfVxuXG4gIGFzeW5jIGFzc2lzdFBhcnRpY2lwYW50IChcbiAgICBhc3Npc3RhbnRVdWlkLFxuICAgIGJlbmVmaWNpYXJ5VXVpZCxcbiAgICB7IHVzZU1vdmVtZW50QWN0aW9ucyA9IHRydWUsIHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGFzc2lzdGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQoYXNzaXN0YW50VXVpZClcbiAgICBjb25zdCBiZW5lZmljaWFyeSA9IHRoaXMuZ2V0UGFydGljaXBhbnQoYmVuZWZpY2lhcnlVdWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBhc3Npc3RhbnRJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBhc3Npc3RhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgY29uc3QgYmVuZWZpY2lhcnlJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBiZW5lZmljaWFyeVV1aWQgPT09IHAudXVpZFxuICAgIClcblxuICAgIGlmICghYXNzaXN0YW50IHx8ICFiZW5lZmljaWFyeSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGFydGljaXBhbnROb3RGb3VuZCcpKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGlmIChiZW5lZmljaWFyeS5oYXNNYXhCb251c0RpY2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JCZW5lZmljaWFyeUF0TWF4Qm9udXMnLCB7XG4gICAgICAgICAgbmFtZTogYmVuZWZpY2lhcnkubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGlmICh1c2VNb3ZlbWVudEFjdGlvbnMpIHtcbiAgICAgIGlmIChhc3Npc3RhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50Tm90RW5vdWdoTW92ZW1lbnQnLCB7XG4gICAgICAgICAgICBhc3Npc3RhbnRVdWlkLFxuICAgICAgICAgICAgYWN0aW9uczogYXNzaXN0YW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIGFzc2lzdGFudC5hbHRlck1vdmVtZW50QWN0aW9ucygtMSlcbiAgICAgIHBhcnRpY2lwYW50c0RhdGFbYXNzaXN0YW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoYXNzaXN0YW50LmRhdGEpXG4gICAgfVxuXG4gICAgYmVuZWZpY2lhcnkuYWRkQm9udXNEaWNlKClcbiAgICBwYXJ0aWNpcGFudHNEYXRhW2JlbmVmaWNpYXJ5SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBiZW5lZmljaWFyeS5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyB0b2dnbGVCb251c0RpY2UgKHBhcnRpY2lwYW50VXVpZCwgZGljZU51bWJlciwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG5cbiAgICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xuICAgICAgICAgIHBhcnRpY2lwYW50VXVpZFxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuICAgIGlmIChwYXJ0aWNpcGFudC5ib251c0RpY2UgPj0gZGljZU51bWJlcikgcGFydGljaXBhbnQucmVtb3ZlQm9udXNEaWNlKClcbiAgICBlbHNlIHBhcnRpY2lwYW50LmFkZEJvbnVzRGljZSgpXG4gICAgcGFydGljaXBhbnRzRGF0YVtwYXJ0aWNpcGFudEluZGV4XSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgcGFydGljaXBhbnQuZGF0YVxuICAgIClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgY2F1dGlvdXNBcHByb2FjaCAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIHsgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcblxuICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50Lmhhc01heEJvbnVzRGljZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvclBhcnRpY2lwYW50QXRNYXhCb251cycsIHtcbiAgICAgICAgICBwYXJ0aWNpcGFudFV1aWRcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodXNlTW92ZW1lbnRBY3Rpb25zKSB7XG4gICAgICBpZiAocGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IDEpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50Tm90RW5vdWdoTW92ZW1lbnQnLCB7XG4gICAgICAgICAgICBhc3Npc3RhbnRVdWlkOiBwYXJ0aWNpcGFudFV1aWQsXG4gICAgICAgICAgICBhY3Rpb25zOiBwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucygtMSlcbiAgICB9XG4gICAgcGFydGljaXBhbnQuYWRkQm9udXNEaWNlKClcbiAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyBhbHRlclBhcnRpY2lwYW50TW92ZW1lbnRBY3Rpb24gKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICBjb3VudCxcbiAgICB7IHJlbmRlciA9IHRydWUgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG5cbiAgICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50VXVpZE5vdEZvdW5kJywge1xuICAgICAgICAgIHBhcnRpY2lwYW50VXVpZFxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuXG4gICAgcGFydGljaXBhbnQuYWx0ZXJNb3ZlbWVudEFjdGlvbnMoY291bnQpXG5cbiAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4gKHtcbiAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcbiAgICByZW5kZXIgPSB0cnVlLFxuICAgIGh0bWwgPSBudWxsXG4gIH0gPSB7fSkge1xuICAgIGNvbnN0IGFjdGl2ZVBhcnRpY2lwYW50ID0gdGhpcy5uZXh0QWN0aXZlUGFydGljaXBhbnRcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbixcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24sXG4gICAgICByZW5kZXIsXG4gICAgICBodG1sXG4gICAgfVxuICAgIGlmICghYWN0aXZlUGFydGljaXBhbnQpIHJldHVybiB0aGlzLmFjdGl2YXRlUGFydGljaXBhbnQodW5kZWZpbmVkLCBvcHRpb25zKVxuICAgIHJldHVybiB0aGlzLmFjdGl2YXRlUGFydGljaXBhbnQoYWN0aXZlUGFydGljaXBhbnQudXVpZCwgb3B0aW9ucylcbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlUGFydGljaXBhbnQgKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgICAgcmVuZGVyID0gdHJ1ZSxcbiAgICAgIGh0bWwgPSBudWxsXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGRhdGFVcGRhdGUgPSB0aGlzLmdldEFjdGl2YXRlUGFydGljaXBhbnRVcGRhdGVEYXRhKHBhcnRpY2lwYW50VXVpZCwge1xuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbixcbiAgICAgIGFjdGl2ZUxvY2F0aW9uOiBhY3RpdmF0ZUxvY2F0aW9uLFxuICAgICAgaHRtbFxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoZGF0YVVwZGF0ZSwgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGdldEFjdGl2YXRlUGFydGljaXBhbnRVcGRhdGVEYXRhIChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgeyBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSwgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsIGh0bWwgPSBudWxsIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBwVXVpZCA9IHBhcnRpY2lwYW50VXVpZFxuICAgIC8vICAgPyBwYXJ0aWNpcGFudFV1aWRcbiAgICAvLyAgIDogdGhpcy5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmVbMF0/LnV1aWRcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhVXBkYXRlID0ge31cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgZGVsZXRlIHAuYWN0aXZlXG4gICAgICBpZiAocFV1aWQgJiYgcFV1aWQgPT09IHAudXVpZCkgcC5hY3RpdmUgPSB0cnVlXG4gICAgfSlcbiAgICBwYXJ0aWNpcGFudHNEYXRhVXBkYXRlWydzeXN0ZW0ucGFydGljaXBhbnRzJ10gPSBwYXJ0aWNpcGFudHNcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50TG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocFV1aWQpXG4gICAgbGV0IGxvY2F0aW9uc0RhdGFVcGRhdGUgPSBudWxsXG4gICAgaWYgKHBhcnRpY2lwYW50TG9jYXRpb24pIHtcbiAgICAgIGlmIChhY3RpdmF0ZUxvY2F0aW9uKSB7XG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGUgPSB0aGlzLmdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhKFxuICAgICAgICAgIHBhcnRpY2lwYW50TG9jYXRpb24udXVpZCxcbiAgICAgICAgICB7IHNjcm9sbFRvTG9jYXRpb24sIGh0bWwgfVxuICAgICAgICApXG4gICAgICB9IGVsc2UgaWYgKHNjcm9sbFRvTG9jYXRpb24pIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZSA9IHt9XG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGVbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay5mcm9tJ10gPVxuICAgICAgICAgIHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvblxuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2sudG8nXSA9XG4gICAgICAgICAgdGhpcy5nZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbihwYXJ0aWNpcGFudExvY2F0aW9uLnV1aWQsIHtcbiAgICAgICAgICAgIGh0bWxcbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlID0gdGhpcy5nZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YSh1bmRlZmluZWQsIHtcbiAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvblxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAobG9jYXRpb25zRGF0YVVwZGF0ZSkge1xuICAgICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QoXG4gICAgICAgIHBhcnRpY2lwYW50c0RhdGFVcGRhdGUsXG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGVcbiAgICAgIClcbiAgICB9IGVsc2UgcmV0dXJuIHBhcnRpY2lwYW50c0RhdGFVcGRhdGVcbiAgfVxuXG4gIGFjdGl2ZVBhcnRpY2lwYW50T2JzdGFjbGVDaGVjayAoXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHsgbW92ZVBhcnRpY2lwYW50ID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDaGFzZU9ic3RhY2xlQ2FyZCh7XG4gICAgICBjaGFzZVV1aWQ6IHRoaXMudXVpZCxcbiAgICAgIGxvY2F0aW9uVXVpZCxcbiAgICAgIG1vdmVQYXJ0aWNpcGFudCxcbiAgICAgIGZvcndhcmQ6IGxvY2F0aW9uVXVpZCAhPT0gdGhpcy5hY3RpdmVMb2NhdGlvbi51dWlkXG4gICAgfSlcbiAgICBjYXJkLnRvTWVzc2FnZSgpXG5cbiAgICAvLyBjb25zdCB0ZXN0ID0gbmV3IHRlc3RDYXJkKClcbiAgICAvLyB0ZXN0LmluaXRpYWxpemUoe30pXG4gICAgLy8gdGVzdC50b01lc3NhZ2UoKVxuICB9XG5cbiAgLy8gSGFuZGxlIHJvdW5kc1xuXG4gIGFzeW5jIHByb2dyZXNzVG9OZXh0Um91bmQgKHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IHAubW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgICAgcC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zICs9IHAubW92ZW1lbnRBY3Rpb25cbiAgICAgICAgaWYgKHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyA+IHAubW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgICAgICBwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSBwLm1vdmVtZW50QWN0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgdGhpcy5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oeyByZW5kZXIgfSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbFN0cmluZykge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyhyb2xsU3RyaW5nKVxuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgICA6IFtdXG4gICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnJvbGxVdWlkID09PSByb2xsLnV1aWQpXG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgZGF0YTogcm9sbFN0cmluZyxcbiAgICAgICAgdHlwZTogJ2ludm9rZScsXG4gICAgICAgIG1ldGhvZDogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICBpdGVtOiB0aGlzLnV1aWRcbiAgICAgIH1cbiAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICB9XG4gIH1cblxuICAvLyBoYW5kbGUgbG9jYXRpb25zXG4gIGdldCBsb2NhdGlvbnMgKCkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc3RhcnRlZFxuICAgICAgPyB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgICA6IFtdXG4gICAgICA6IHRoaXMuaW5pdFRyYWNrXG4gICAgdGhpcy5wcm9jZXNzTG9jYXRpb25zKGxvY2F0aW9ucylcbiAgICByZXR1cm4gbG9jYXRpb25zXG4gIH1cblxuICBnZXRMb2NhdGlvbkRhdGEgKGxvY2F0aW9uVXVpZCwgeyBkdXBsaWNhdGVEYXRhID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGVEYXRhXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMubG9jYXRpb25zKVxuICAgICAgOiB0aGlzLmxvY2F0aW9uc1xuICAgIHJldHVybiBsb2NhdGlvbnMuZmluZChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICB9XG5cbiAgcHJvY2Vzc0xvY2F0aW9ucyAobG9jYXRpb25zKSB7XG4gICAgaWYgKCFsb2NhdGlvbnM/Lmxlbmd0aCkgcmV0dXJuXG4gICAgbG9jYXRpb25zWzBdLmZpcnN0ID0gdHJ1ZVxuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxvY2F0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGNvbnN0IGNsYXNzZXMgPSBbXVxuICAgICAgY29uc3QgbG9jYXRpb24gPSBsb2NhdGlvbnNbaW5kZXhdXG4gICAgICBpZiAoIWxvY2F0aW9uLm5hbWUpIGNsYXNzZXMucHVzaCgnZW1wdHknKVxuICAgICAgaWYgKGxvY2F0aW9uLmFjdGl2ZSkgY2xhc3Nlcy5wdXNoKCdhY3RpdmUnKVxuICAgICAgaWYgKGxvY2F0aW9uLmluaXQgJiYgIXRoaXMuc3RhcnRlZCkgY2xhc3Nlcy5wdXNoKCdpbml0JylcbiAgICAgIGxvY2F0aW9uLmNzc0NsYXNzZXMgPSBjbGFzc2VzLmpvaW4oJyAnKVxuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID4gMSkgbG9jYXRpb25zW2xvY2F0aW9ucy5sZW5ndGggLSAxXS5sYXN0ID0gdHJ1ZVxuXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBpZiAobC5wYXJ0aWNpcGFudHMgJiYgbC5wYXJ0aWNpcGFudHMubGVuZ3RoKSB7XG4gICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gIShwID09PSBudWxsKSlcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsLnBhcnRpY2lwYW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGNvbnN0IGVsZW0gPSBsLnBhcnRpY2lwYW50c1tpXSAvLyBJbml0IHRyYWNrID0gb25seSB1dWlkLCB1cGRhdGUgbG9jYXRpb24gbGlzdCBjaGFuZ2UgZm9yIHV1aWRcblxuICAgICAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoYFR5cGUgOiAke3R5cGVvZiBlbGVtfWApXG4gICAgICAgICAgbGV0IHBcbiAgICAgICAgICBpZiAodHlwZW9mIGVsZW0gPT09ICdzdHJpbmcnIHx8IGVsZW0gaW5zdGFuY2VvZiBTdHJpbmcpIHtcbiAgICAgICAgICAgIHAgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IGVsZW0gPT09IHAudXVpZCkgLy8gUmV0cmlldmUgcGFydGljaXBhbnQgZGF0YSBmcm9tIGxpc3QuXG4gICAgICAgICAgfSBlbHNlIGlmIChlbGVtPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ19wYXJ0aWNpcGFudCcpIHtcbiAgICAgICAgICAgIHAgPSB1bmRlZmluZWQgLy8gcGFydGljaXBhbnQgaXMgYWxyZWFkeSBwcm9jZXNzZWQuXG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QYXJ0aWNpcGFudEFscmVhZHlQcm9jZXNzZWQnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0gZWxzZSBwID0gdW5kZWZpbmVkXG5cbiAgICAgICAgICBpZiAodHlwZW9mIHAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBsLnBhcnRpY2lwYW50c1tpXSA9IG5ldyBfcGFydGljaXBhbnQocCkgLy8gcmVwbGFjZSB1dWlkIHdpdGggX3BhcnRpY2lwYW50XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHBhcnRpY2lwYW50cy5wdXNoKCBudWxsKVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgJ1VuZGVmaW5lZCBwYXRpY2lwYW50IHdoaWxlIHByb2Nlc3NpbmcgcGFydGljaXBhbnRzIGFycmF5J1xuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsLnBhcnRpY2lwYW50cy5zb3J0KHNvcnRCeVJvbGVBbmREZXgpIC8vIFRPRE8gOiB0ZXN0IGlmIHNvcnRpbmcgd29ya3NcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZ2V0IGluaXRUcmFjayAoKSB7XG4gICAgaWYgKFxuICAgICAgIXRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0IHx8XG4gICAgICB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGggPT09IDBcbiAgICApIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBjb25zdCBsb2NhdGlvbnMgPSBbXSAvLyAhISEhISEhIGxvY2F0aW9ucyB2cyBpbml0IGxvY2F0aW9ucyAhISFcblxuICAgIGNvbnN0IGluaXQgPSB0aGlzLnN0YXJ0aW5nTGluZVxuICAgIGxldCBsb2NhdGlvbnNJbmRleFN0YXJ0LCBpbml0SW5kZXhTdGFydCwgbG9jYXRpb25zTGVuZ3RoXG4gICAgaWYgKGluaXQubGVuZ3RoIDw9IDApIGxvY2F0aW9uc0luZGV4U3RhcnQgPSAwXG4gICAgZWxzZSBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA+PSBpbml0Lmxlbmd0aCkge1xuICAgICAgbG9jYXRpb25zSW5kZXhTdGFydCA9IDBcbiAgICB9IGVsc2UgbG9jYXRpb25zSW5kZXhTdGFydCA9IGluaXQubGVuZ3RoIC0gdGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleFxuXG4gICAgaWYgKHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPD0gMCkgaW5pdEluZGV4U3RhcnQgPSAwXG4gICAgZWxzZSBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA8PSBpbml0Lmxlbmd0aCkgaW5pdEluZGV4U3RhcnQgPSAwXG4gICAgZWxzZSBpbml0SW5kZXhTdGFydCA9IHRoaXMuc3lzdGVtLnN0YXJ0aW5nSW5kZXggLSBpbml0Lmxlbmd0aFxuXG4gICAgaWYgKGxvY2F0aW9uc0luZGV4U3RhcnQgPT09IDApIHtcbiAgICAgIGxvY2F0aW9uc0xlbmd0aCA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhdGlvbnNMZW5ndGggPVxuICAgICAgICB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGggKyBsb2NhdGlvbnNJbmRleFN0YXJ0XG4gICAgfVxuXG4gICAgaWYgKGluaXQubGVuZ3RoICE9PSAwKSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA8IDApIHtcbiAgICAgICAgZm9yIChcbiAgICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICAgIGluZGV4IDwgTWF0aC5hYnModGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCk7XG4gICAgICAgICAgaW5kZXgrK1xuICAgICAgICApIHtcbiAgICAgICAgICBpbml0LnB1c2goe1xuICAgICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNoYXNlTG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zKVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBsb2NhdGlvbnNMZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIGxldCBsb2NhdGlvbiA9IHt9XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBbXVxuICAgICAgaWYgKFxuICAgICAgICBpbmRleCA+PSBsb2NhdGlvbnNJbmRleFN0YXJ0ICYmXG4gICAgICAgIGluZGV4IC0gbG9jYXRpb25zSW5kZXhTdGFydCA8IGNoYXNlTG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgICApIHtcbiAgICAgICAgbG9jYXRpb24gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgICBjaGFzZUxvY2F0aW9ucy5saXN0W2luZGV4IC0gbG9jYXRpb25zSW5kZXhTdGFydF1cbiAgICAgICAgKVxuICAgICAgICBsb2NhdGlvbi5pbml0ID0gZmFsc2VcbiAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzPy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGlmIChwICE9IG51bGwpIHBhcnRpY2lwYW50cy5wdXNoKHApXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBpZiAoaW5kZXggPj0gaW5pdEluZGV4U3RhcnQgJiYgaW5kZXggLSBpbml0SW5kZXhTdGFydCA8IGluaXQubGVuZ3RoKSB7XG4gICAgICAgIG1lcmdlT2JqZWN0KGxvY2F0aW9uLCBpbml0W2luZGV4IC0gaW5pdEluZGV4U3RhcnRdLCB7XG4gICAgICAgICAgb3ZlcndyaXRlOiBmYWxzZVxuICAgICAgICB9KVxuXG4gICAgICAgIGluaXRbaW5kZXggLSBpbml0SW5kZXhTdGFydF0ucGFydGljaXBhbnRzPy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgIGlmIChwICE9IG51bGwpIHBhcnRpY2lwYW50cy5wdXNoKHApXG4gICAgICAgIH0pXG5cbiAgICAgICAgbG9jYXRpb24ucGFydGljaXBhbnRzID0gcGFydGljaXBhbnRzXG4gICAgICB9XG4gICAgICBsb2NhdGlvbi5maXJzdCA9IGZhbHNlXG4gICAgICBsb2NhdGlvbi5lbmQgPSBmYWxzZVxuICAgICAgbG9jYXRpb25zLnB1c2gobG9jYXRpb24pXG4gICAgfVxuXG4gICAgcmV0dXJuIGxvY2F0aW9uc1xuICB9XG5cbiAgZ2V0IHN0YXJ0aW5nTGluZSAoKSB7XG4gICAgLy8gR2V0IHByZXlzIGFuZCBjaGVjayBmb3IgZXNjYXBlZFxuICAgIGNvbnN0IHByZXlzID0gdGhpcy5zeXN0ZW0uaW5jbHVkZUVzY2FwZWRcbiAgICAgID8gdGhpcy5wcmV5c1xuICAgICAgOiB0aGlzLnByZXlzPy5maWx0ZXIocCA9PiAhcC5kYXRhLmVzY2FwZWQpXG4gICAgLy8gR2V0IGNoYXNlcnNcbiAgICBjb25zdCBjaGFzZXJzID0gdGhpcy5zeXN0ZW0uaW5jbHVkZUxhdGVjb21lcnNcbiAgICAgID8gdGhpcy5jaGFzZXJzXG4gICAgICA6IHRoaXMuY2hhc2Vycz8uZmlsdGVyKGMgPT4gIWMuZGF0YS5leGNsdWRlZClcblxuICAgIC8vIFJlY3Vyc2l2aXR5ICEhIHdpdGggZ2V0UGFydGljaXBhbnRMb2NhdGlvbiBhbmQgZ2V0IHBhcnRpY2lwYW50c1xuXG4gICAgLy8gSWYgbm8gcHJleSBvciBubyBjaGFzc2VyXG4gICAgLy8gaWYgKDAgPT0gY2hhc2Vycy5sZW5ndGgpIHtcbiAgICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMud2FybignTm8gY2hhc2VycycpXG4gICAgLy8gICByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gfVxuICAgIC8vIGlmICgwID09IHByZXlzLmxlbmd0aCkge1xuICAgIC8vICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdObyBwcmV5cycpXG4gICAgLy8gICByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gfVxuXG4gICAgLy8gQnVpbGQgc3RhcnRpbmcgdHJhY2tcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gW11cblxuICAgIGNvbnN0IGNoYXNlcnNNaW5Nb3YgPSB0aGlzLmZpbmRNaW5Nb3YoY2hhc2VycylcbiAgICBjb25zdCBjaGFzZXJzTWF4TW92ID0gdGhpcy5maW5kTWF4TW92KGNoYXNlcnMpXG4gICAgY29uc3QgcHJleXNNaW5Nb3YgPSB0aGlzLmZpbmRNaW5Nb3YocHJleXMpXG4gICAgY29uc3QgcHJleXNNYXhNb3YgPSB0aGlzLmZpbmRNYXhNb3YocHJleXMpXG5cbiAgICBpZiAoY2hhc2Vyc01pbk1vdiAhPT0gLTEgJiYgY2hhc2Vyc01heE1vdiAhPT0gLTEpIHtcbiAgICAgIC8vIEFkZCBjaGFzZXJzIHRvIHRoZSB0cmFjay5cbiAgICAgIGZvciAobGV0IG1vdiA9IGNoYXNlcnNNaW5Nb3Y7IG1vdiA8PSBjaGFzZXJzTWF4TW92OyBtb3YrKykge1xuICAgICAgICAvLyBGaW5kIGFsbCB3aXRoIHRoYXQgbW92XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uID0ge1xuICAgICAgICAgIHV1aWQ6IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKCksXG4gICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICBwYXJ0aWNpcGFudHM6IFtdXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYXRpb25QYXJ0aWNpcGFudHNMaXN0ID0gY2hhc2Vyc1xuICAgICAgICAgIC5maWx0ZXIocCA9PiBtb3YgPT09IHAuYWRqdXN0ZWRNb3YpXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGV4IC0gYi5kZXgpXG4gICAgICAgIGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdC5mb3JFYWNoKHAgPT5cbiAgICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwLnV1aWQpXG4gICAgICAgIClcbiAgICAgICAgY2hhc2VUcmFjay5wdXNoKGxvY2F0aW9uKVxuICAgICAgfVxuXG4gICAgICAvLyBBZGQgc3BhY2UgYmV0d2VlbiBjaGFzZXJzIGFuZCBwcmV5cy5cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnN5c3RlbS5zdGFydGluZ1JhbmdlOyBpbmRleCsrKSB7XG4gICAgICAgIGNoYXNlVHJhY2sucHVzaCh7XG4gICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICBpbml0OiB0cnVlLFxuICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocHJleXNNaW5Nb3YgIT09IC0xICYmIHByZXlzTWF4TW92ICE9PSAtMSkge1xuICAgICAgLy8gQWRkIHByZXlzIHRvIHRoZSB0cmFjay5cbiAgICAgIGZvciAobGV0IG1vdiA9IHByZXlzTWluTW92OyBtb3YgPD0gcHJleXNNYXhNb3Y7IG1vdisrKSB7XG4gICAgICAgIC8vIEZpbmQgYWxsIHdpdGggdGhhdCBtb3ZcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSB7XG4gICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICBpbml0OiB0cnVlLFxuICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QgPSBwcmV5c1xuICAgICAgICAgIC5maWx0ZXIocCA9PiBtb3YgPT09IHAuYWRqdXN0ZWRNb3YpXG4gICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuZGV4IC0gYi5kZXgpXG4gICAgICAgIGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdC5mb3JFYWNoKHAgPT5cbiAgICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwLnV1aWQpXG4gICAgICAgIClcbiAgICAgICAgY2hhc2VUcmFjay5wdXNoKGxvY2F0aW9uKVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjaGFzZVRyYWNrXG4gIH1cblxuICBhc3luYyB1cGRhdGVMb2NhdGlvbnNMaXN0IChsaXN0LCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgLy8gUmVtb3ZlIGFsbCB1bm5lY2Vzc2FyeSBpdGVtcyAoY3NzQ2xhc3MsIClcbiAgICBjb25zdCB1cGRhdGVkTGlzdCA9IHRoaXMuY2xlYW5Mb2NhdGlvbnNMaXN0KGxpc3QpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ubG9jYXRpb25zLmxpc3QnOiB1cGRhdGVkTGlzdCB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUxvY2F0aW9uIChsb2NhdGlvblV1aWQsIHVwZGF0ZURhdGEsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCB1cGRhdGUgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh1cGRhdGVEYXRhKVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHVwZGF0ZS51dWlkKSBkZWxldGUgdXBkYXRlLnV1aWRcbiAgICBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XSwgdXBkYXRlLCB7XG4gICAgICBvdmVyd3JpdGU6IHRydWVcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBjbGVhbkxvY2F0aW9uc0xpc3QgKGxpc3QpIHtcbiAgICBjb25zdCB1cGRhdGVkTGlzdCA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGxpc3QpXG4gICAgY29uc3QgcGFydGlwYW50c1V1aWRBcnJheSA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5tYXAocCA9PiBwLnV1aWQpXG5cbiAgICB1cGRhdGVkTGlzdC5mb3JFYWNoKGwgPT4ge1xuICAgICAgLy8gZGVsZXRlIGwuYWN0aXZlXG4gICAgICBkZWxldGUgbC5jc3NDbGFzc2VzXG4gICAgICBkZWxldGUgbC5maXJzdFxuICAgICAgZGVsZXRlIGwubGFzdFxuICAgICAgZGVsZXRlIGwuZW5kXG4gICAgICBpZiAobC5wYXJ0aWNpcGFudHMgJiYgbC5wYXJ0aWNpcGFudHMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbC5wYXJ0aWNpcGFudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcihwID0+ICEocCA9PT0gbnVsbCkpIC8vIFJlbW92ZSBudWxsIGVsZW1lbnRzXG4gICAgICAgICAgLy8gUmVwbGFjZSBfUGFydGljaXBhbnRzIGJ5IHV1aWRcbiAgICAgICAgICBpZiAobC5wYXJ0aWNpcGFudHNbaV0uZGF0YT8udXVpZCkge1xuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHNbaV0gPSBsLnBhcnRpY2lwYW50c1tpXS5kYXRhLnV1aWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdW5rb3duIHBhcnRpY2ljcGFudHNcbiAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIodXVpZCA9PlxuICAgICAgICAgIHBhcnRpcGFudHNVdWlkQXJyYXkuaW5jbHVkZXModXVpZClcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gdXBkYXRlZExpc3RcbiAgfVxuXG4gIGFzeW5jIGluc2VydExvY2F0aW9uIChcbiAgICBpbnNlcnRBdFV1aWQsXG4gICAgeyBzaGlmdCA9IDAsIGxvY0RhdGEgPSB7fSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBkZWxldGUgbC5hY3RpdmVcbiAgICB9KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gaW5zZXJ0QXRVdWlkID09PSBsLnV1aWQpXG4gICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgbmV3TG9jYXRpb25JbmRleCA9IGxvY2F0aW9uSW5kZXggKyBzaGlmdFxuICAgIGlmIChuZXdMb2NhdGlvbkluZGV4ID4gbG9jYXRpb25zLmxlbmd0aCkgcmV0dXJuIGZhbHNlXG4gICAgY29uc3QgbmV3TG9jYXRpb24gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShsb2NEYXRhKVxuICAgIG5ld0xvY2F0aW9uLnV1aWQgPSB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpXG4gICAgbmV3TG9jYXRpb24uaW5pdCA9IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5pbml0XG4gICAgbmV3TG9jYXRpb24uYWN0aXZlID0gdHJ1ZVxuICAgIGxvY2F0aW9ucy5zcGxpY2UobmV3TG9jYXRpb25JbmRleCwgMCwgbmV3TG9jYXRpb24pXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBhc3luYyByZW1vdmVMb2NhdGlvbiAodXVpZCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gdXVpZCA9PT0gbC51dWlkKVxuICAgIGxvY2F0aW9ucy5zcGxpY2UobG9jYXRpb25JbmRleCwgMSlcbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGRlbGV0ZSBsLmFjdGl2ZVxuICAgIH0pXG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBsZXQgaW5kZXggPSBsb2NhdGlvbkluZGV4IC0gMVxuICAgICAgaWYgKGluZGV4IDwgMCkgaW5kZXggPSAwXG4gICAgICBsb2NhdGlvbnNbaW5kZXhdLmFjdGl2ZSA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBhc3luYyBhY3RpdmF0ZUxvY2F0aW9uIChcbiAgICBsb2NhdGlvblV1aWQsXG4gICAgeyBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHRoaXMuZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEobG9jYXRpb25VdWlkLCB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgZ2V0Q2xlYXJBY3RpdmVMb2NhdGlvblVwZGF0ZURhdGEgKHtcbiAgICBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSxcbiAgICBodG1sID0gbnVsbFxuICB9ID0ge30pIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICBjb25zdCBsb2NhdGlvbnMgPSB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgIDogW11cbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGRlbGV0ZSBsLmFjdGl2ZVxuICAgIH0pXG4gICAgdXBkYXRlRGF0YVsnc3lzdGVtLmxvY2F0aW9ucy5saXN0J10gPSB0aGlzLmNsZWFuTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG5cbiAgICBpZiAoc2Nyb2xsVG9Mb2NhdGlvbikge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLmZyb20nXSA9IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byddID0gLTFcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIGdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhIChcbiAgICBsb2NhdGlvblV1aWQsXG4gICAgeyBzY3JvbGxUb0xvY2F0aW9uID0gdHJ1ZSwgaHRtbCA9IG51bGwgfSA9IHt9XG4gICkge1xuICAgIGlmICghbG9jYXRpb25VdWlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXRDbGVhckFjdGl2ZUxvY2F0aW9uVXBkYXRlRGF0YSh7XG4gICAgICAgIHNjcm9sbFRvTG9jYXRpb25cbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgOiBbXVxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgZGVsZXRlIGwuYWN0aXZlXG4gICAgICBpZiAobG9jYXRpb25VdWlkID09PSBsLnV1aWQpIGwuYWN0aXZlID0gdHJ1ZVxuICAgIH0pXG4gICAgdXBkYXRlRGF0YVsnc3lzdGVtLmxvY2F0aW9ucy5saXN0J10gPSB0aGlzLmNsZWFuTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gICAgLy8gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgaWYgKHNjcm9sbFRvTG9jYXRpb24pIHtcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay5mcm9tJ10gPVxuICAgICAgICB0aGlzLmNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb25cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byddID1cbiAgICAgICAgdGhpcy5nZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbihsb2NhdGlvblV1aWQsIHsgaHRtbCB9KVxuICAgICAgLy8gYXdhaXQgdGhpcy5zZXRjaGFzZVRyYWNrU2Nyb2xsKHtcbiAgICAgIC8vICAgZnJvbTogdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uLFxuICAgICAgLy8gICB0bzogdGhpcy5jaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvblxuICAgICAgLy8gfSlcbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIC8vIExvY2F0aW9ucyBuYXZpZ2F0aW9uXG4gIGdldCBhY3RpdmVMb2NhdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmxvY2F0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbnMuZmluZChsID0+IGwuYWN0aXZlKVxuICAgIGlmICghbG9jYXRpb24pIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAobG9jYXRpb24ucGFydGljaXBhbnRzPy5sZW5ndGgpIGxvY2F0aW9uLmhhc1BhcnRpY2lwYW50ID0gdHJ1ZVxuICAgIGNvbnN0IGFjdG9yID0gdGhpcy5hY3RpdmVBY3RvclxuICAgIGlmIChhY3Rvcikge1xuICAgICAgY29uc3QgdGVzdCA9IGFjdG9yLmZpbmQobG9jYXRpb24ub2JzdGFjbGVEZXRhaWxzPy5jaGVja05hbWUpXG4gICAgICBpZiAodGVzdCkge1xuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3Rvckhhc1NraWxsID0gdHJ1ZVxuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3RvclRlc3QgPSB0ZXN0XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb2NhdGlvblxuICB9XG5cbiAgZ2V0IHByZXZpb3VzTG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMubG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwuYWN0aXZlKVxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IDApIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb25zW2FjdGl2ZUluZGV4IC0gMV1cbiAgICBjb25zdCBhY3RvciA9IHRoaXMuYWN0aXZlQWN0b3JcbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGNvbnN0IHRlc3QgPSBhY3Rvci5maW5kKGxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKVxuICAgICAgaWYgKHRlc3QpIHtcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JIYXNTa2lsbCA9IHRydWVcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JUZXN0ID0gdGVzdFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbG9jYXRpb25cbiAgfVxuXG4gIGdldCBuZXh0TG9jYXRpb24gKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBhY3RpdmVJbmRleCA9IHRoaXMubG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwuYWN0aXZlKVxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoYWN0aXZlSW5kZXggPT09IHRoaXMubG9jYXRpb25zLmxlbmd0aCAtIDEpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMubG9jYXRpb25zW2FjdGl2ZUluZGV4ICsgMV1cbiAgICBjb25zdCBhY3RvciA9IHRoaXMuYWN0aXZlQWN0b3JcbiAgICBpZiAoYWN0b3IpIHtcbiAgICAgIGNvbnN0IHRlc3QgPSBhY3Rvci5maW5kKGxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKVxuICAgICAgaWYgKHRlc3QpIHtcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JIYXNTa2lsbCA9IHRydWVcbiAgICAgICAgbG9jYXRpb24uYWN0aXZlQWN0b3JUZXN0ID0gdGVzdFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbG9jYXRpb25cbiAgfVxuXG4gIGFzeW5jIGxvY2F0b3JEcm9wcGVkIChkYXRhKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRMb2NhdGlvbkNvb3JkaW5hdGVzKFxuICAgICAgZGF0YS5sb2NhdGlvblV1aWQsXG4gICAgICBkYXRhLngsXG4gICAgICBkYXRhLnksXG4gICAgICBkYXRhLnNjZW5lXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgc2V0TG9jYXRpb25Db29yZGluYXRlcyAoXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHgsXG4gICAgeSxcbiAgICBzY2VuZUlkLFxuICAgIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0uY29vcmRpbmF0ZXMgPSB7IHgsIHksIHNjZW5lOiBzY2VuZUlkIH1cblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgYXN5bmMgY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzICh7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlTG9jYXRpb24pIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNsZWFyTG9jYXRpb25Db29yZGluYXRlcyh0aGlzLmFjdGl2ZUxvY2F0aW9uLnV1aWQsIHtcbiAgICAgICAgcmVuZGVyXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNsZWFyTG9jYXRpb25Db29yZGluYXRlcyAobG9jYXRpb25VdWlkLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBkZWxldGUgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLmNvb3JkaW5hdGVzXG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIC8vIGdldCBhY3RpdmVQYXJ0aWNpcGFudEhhdmVBY3RpdmVMb2NhdGlvblNraWxsICgpe1xuICAvLyAgIGlmKCAhdGhpcy5hY3RpdmVBY3RvcikgcmV0dXJuIGZhbHNlXG4gIC8vICAgaWYoIHRoaXMuYWN0aXZlQWN0b3IuZmluZCggdGhpcy5hY3RpdmVMb2NhdGlvbi5vYnN0YWNsZURldGFpbHM/LmNoZWNrTmFtZSkpIHJldHVybiB0cnVlXG4gIC8vICAgcmV0dXJuIGZhbHNlXG4gIC8vIH1cblxuICAvLyBIYW5kbGUgbWVjaGFuaWNzXG4gIGFzeW5jIGN1dFRvVGhlQ2hhc2UgKCkge1xuICAgIGlmICghdGhpcy5hbGxIYXZlU3BlZWRSb2xsKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdEFsbEhhdmVTcGVlZFJvbGwnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5hY3R1YWxQYXJ0aWNpcGFudHM/Lmxlbmd0aCA8IDIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmVlZE1pbjJQYXJ0aWNpcGFudHMnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5hbGxIYXZlVmFsaWRNb3YpIHtcbiAgICAgIC8vIFRPRE8gOiBDaGVjayBmb3Igc3BlZWQgcm9sbCA/P1xuXG4gICAgICAvLyBDYWxjdWxhdGUgbW92ZW1lbnQgYWN0aW9uc1xuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICAgIGNvbnN0IG1pbk1vdiA9IHRoaXMuZmluZE1pbk1vdih0aGlzLmFjdHVhbFBhcnRpY2lwYW50cylcbiAgICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAvLyBwLmRhdGEubW92ZW1lbnRBY3Rpb24gPSAxICsgKHAuYWRqdXN0ZWRNb3YgLSBtaW5Nb3YpXG4gICAgICAgIHAuY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKG1pbk1vdilcbiAgICAgICAgcC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gcC5tb3ZlbWVudEFjdGlvblxuICAgICAgICBwLmJvbnVzRGljZSA9IDBcbiAgICAgIH0pXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KHRoaXMubG9jYXRpb25zLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICAgIGF3YWl0IHRoaXMuc3RhcnQoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc3RhcnQgKCkge1xuICAgIC8vIGF3YWl0IHRoaXMuY2xlYW5Mb2NhdGlvbnMoKSAvL1RyYW5zZmVycmVkIGluIHVwZGF0ZUxvY2F0aW9uTGlzdFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMubG9jYXRpb25zLmZpbHRlcihsID0+ICFsLmluaXQpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsb2NhdGlvbnNbaV0ucGFydGljaXBhbnRzKSBsb2NhdGlvbnNbaV0ucGFydGljaXBhbnRzID0gW11cbiAgICAgIGlmIChsb2NhdGlvbnNbaV0uYWN0aXZlKSBkZWxldGUgbG9jYXRpb25zW2ldLmFjdGl2ZVxuICAgIH1cbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnRpY2lwYW50c0RhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwYXJ0aWNpcGFudHNEYXRhW2ldLmFjdGl2ZSkgZGVsZXRlIHBhcnRpY2lwYW50c0RhdGFbaV0uYWN0aXZlXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuc2V0Y2hhc2VUcmFja1Njcm9sbCgwLCAwLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHNEYXRhLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBhd2FpdCB0aGlzLnN0b3AoKVxuICB9XG5cbiAgZ2V0TG9jYXRpb25TaGlmdCAobG9jYXRpb25VdWlkLCB7IHNraXAgPSAxIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IG9yaWdpbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGNvbnN0IGRlc3RpbmF0aW9uSW5kZXggPSBvcmlnaW5JbmRleCArIHNraXBcbiAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA9PT0gMCkgcmV0dXJuIG51bGxcbiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA+PSBsb2NhdGlvbnMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbG9jYXRpb25zW2xvY2F0aW9ucy5sZW5ndGggLSAxXVxuICAgIH1cbiAgICBpZiAoZGVzdGluYXRpb25JbmRleCA8IDApIHJldHVybiBsb2NhdGlvbnNbMF1cbiAgICByZXR1cm4gbG9jYXRpb25zW2Rlc3RpbmF0aW9uSW5kZXhdIC8vIEVSUk9SIE1PVkUgMiBGT1IgU0tJUCArMVxuICB9XG5cbiAgYXN5bmMgcmVtb3ZlUGFydGljaXBhbnQgKHBhcnRpY2lwYW50VXVpZCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHAgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlbW92ZVBhcnRpY2lwYW50JyksXG4gICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlbW92ZVBhcnRpY2lwYW50SGludCcsIHtcbiAgICAgICAgbmFtZTogcC5uYW1lXG4gICAgICB9KX08L3A+YCxcbiAgICAgIHllczogYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgbmV3UGFydGljaXBhbnRzRGF0YSA9IHBhcnRpY2lwYW50c0RhdGEuZmlsdGVyKFxuICAgICAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkICE9PSBwLnV1aWRcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBsb2NhdGlvbnNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICAgICAgdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3RcbiAgICAgICAgKVxuICAgICAgICBsb2NhdGlvbnNEYXRhLmZvckVhY2gobCA9PiB7XG4gICAgICAgICAgaWYgKGwucGFydGljaXBhbnRzICYmIGwucGFydGljaXBhbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIoXG4gICAgICAgICAgICAgIHV1aWQgPT4gcGFydGljaXBhbnRVdWlkICE9PSB1dWlkXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhuZXdQYXJ0aWNpcGFudHNEYXRhLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9uc0RhdGEsIHsgcmVuZGVyIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZFBhcnRpY2lwYW50IChcbiAgICBwYXJ0aWNpcGFudCxcbiAgICB7XG4gICAgICByZW5kZXIgPSB0cnVlLFxuICAgICAgbG9jYXRpb25VdWlkID0gbnVsbCxcbiAgICAgIHJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSxcbiAgICAgIHVwZGF0ZSA9IGZhbHNlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuXG4gICAgaWYgKHBhcnRpY2lwYW50LmRhdGEuY2hhc2VVdWlkKSBkZWxldGUgcGFydGljaXBhbnQuZGF0YS5jaGFzZVV1aWRcbiAgICBpZiAocGFydGljaXBhbnQuZGF0YS5sb2NhdGlvblV1aWQpIGRlbGV0ZSBwYXJ0aWNpcGFudC5kYXRhLmxvY2F0aW9uVXVpZFxuICAgIGlmIChwYXJ0aWNpcGFudC5kYXRhLnVwZGF0ZSkgZGVsZXRlIHBhcnRpY2lwYW50LmRhdGEudXBkYXRlXG5cbiAgICBpZiAoIXBhcnRpY2lwYW50LnV1aWQpIHtcbiAgICAgIGxldCB1bmlxdWUgPSBmYWxzZVxuICAgICAgd2hpbGUgKCF1bmlxdWUpIHtcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YS51dWlkID0gZm91bmRyeS51dGlscy5yYW5kb21JRCgxNilcbiAgICAgICAgdW5pcXVlID1cbiAgICAgICAgICBwYXJ0aWNpcGFudHNEYXRhLmZpbHRlcihwID0+IHAudXVpZCA9PT0gcGFydGljaXBhbnQudXVpZCkubGVuZ3RoID09PSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHVwZGF0ZSkge1xuICAgICAgaWYgKHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgICBwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0gcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb25cbiAgICAgIH1cbiAgICAgIGNvbnN0IGluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHBhcnRpY2lwYW50LnV1aWQpXG4gICAgICBwYXJ0aWNpcGFudHNEYXRhW2luZGV4XSA9IHBhcnRpY2lwYW50LmRhdGFcbiAgICB9IGVsc2UgcGFydGljaXBhbnRzRGF0YS5wdXNoKHBhcnRpY2lwYW50LmRhdGEpXG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHNEYXRhLCB7XG4gICAgICByZW5kZXI6IHJlbmRlciAmJiAhdGhpcy5zdGFydGVkICYmICF0aGlzLnJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zXG4gICAgfSlcblxuICAgIGlmIChyZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucykge1xuICAgICAgY29uc3Qgc2xvd2VzdCA9IHRoaXMuc2xvd2VzdFBhcnRpY2lwYW50Py5hZGp1c3RlZE1vdlxuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICAgIHBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4gcC5jYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMoc2xvd2VzdCkpXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMsIHtcbiAgICAgICAgcmVuZGVyOiByZW5kZXIgJiYgIXRoaXMuc3RhcnRlZFxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICB0aGlzLnN0YXJ0ZWQgJiZcbiAgICAgICEocGFydGljaXBhbnQuZGF0YS5lc2NhcGVkIHx8IHBhcnRpY2lwYW50LmRhdGEuZXhjbHVkZWQpXG4gICAgKSB7XG4gICAgICBjb25zdCBsb2NhdGlvbnNEYXRhID0gdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3RcbiAgICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgICAgOiBbXVxuXG4gICAgICBpZiAobG9jYXRpb25zRGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JFbXB0eUxvY2F0aW9uc0xpc3QnKVxuICAgICAgICApXG4gICAgICB9XG5cbiAgICAgIGxldCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zRGF0YS5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICAgIGlmIChsb2NhdGlvbkluZGV4ID09PSAtMSkgbG9jYXRpb25JbmRleCA9IDBcbiAgICAgIGlmICghbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMpIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMgPSBbXVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICBsb2NhdGlvbnNEYXRhW2xvY2F0aW9uSW5kZXhdLnBhcnRpY2lwYW50cy5maW5kSW5kZXgoXG4gICAgICAgICAgcCA9PiBwID09PSBwYXJ0aWNpcGFudC51dWlkXG4gICAgICAgICkgPT09IC0xXG4gICAgICApIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVtsb2NhdGlvbkluZGV4XS5wYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudC51dWlkKVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9uc0RhdGEsIHsgcmVuZGVyIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZWRpdFBhcnRpY2lwYW50IChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAge1xuICAgICAgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSxcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZVBhcnRpY2lwYW50ID0gdHJ1ZSxcbiAgICAgIHJlbmRlciA9IHRydWVcbiAgICB9ID0ge31cbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBNb3ZlIGEgcGFydGljaXBhbnQgZm9yIGEgbnVtYmVyIG9mIGxvY2F0aW9ucy5cbiAgICogQHBhcmFtIHtzdHJpbmd8bnVsbH0gcGFydGljaXBhbnRVdWlkICAgICBVdWlkIG9mIHBhcnRpY2lwYW50XG4gICAqIEBwYXJhbSB7Kn0gbG9jYXRpb25Nb3ZlZCAgICAgICAgICAgICAgICAgTnVtYmVyIG9mIGxvY2F0aW9ucyBtb3ZyZWRcbiAgICogQHJldHVybnMge251bWJlcn0gICAgICAgICAgICAgICAgICAgICAgICBUb3RhbCBudW1iZXIgb2YgbG9jYXRpb25zIGNyb3NzZWRcbiAgICovXG4gIGFzeW5jIG1vdmVQYXJ0aWNpcGFudCAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIGxvY2F0aW9uTW92ZWQsXG4gICAge1xuICAgICAgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSxcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZVBhcnRpY2lwYW50ID0gdHJ1ZSxcbiAgICAgIHJlbmRlciA9IHRydWVcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgLy8gY29uc3Qgc2VsZWN0b3IgPSBgI2l0ZW0tJHt0aGlzLmlkfSAuY2hhc2UtdHJhY2tgXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgbW92ZVBhcnRpY2lwYW50IDogSnF1ZXJ5IHJvb3Q6ICR7JCgnOnJvb3QnKS5maW5kKHNlbGVjdG9yKS5zY3JvbGxMZWZ0KCl9YClcbiAgICBsZXQgbW9kaWZpZWQgPSBmYWxzZVxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IG9yaWdpbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+XG4gICAgICBsLnBhcnRpY2lwYW50cz8uaW5jbHVkZXMocGFydGljaXBhbnRVdWlkKVxuICAgIClcbiAgICBsZXQgZGVzdGluYXRpb25JbmRleCA9IG9yaWdpbkluZGV4ICsgbG9jYXRpb25Nb3ZlZFxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4ID4gbG9jYXRpb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgIGRlc3RpbmF0aW9uSW5kZXggPSBsb2NhdGlvbnMubGVuZ3RoIC0gMVxuICAgIH1cblxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4IDwgMCkge1xuICAgICAgZGVzdGluYXRpb25JbmRleCA9IDBcbiAgICB9XG5cbiAgICBjb25zdCB0b3RhbE1vdmUgPSBkZXN0aW5hdGlvbkluZGV4IC0gb3JpZ2luSW5kZXhcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgIClcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuXG4gICAgaWYgKHVzZU1vdmVtZW50QWN0aW9ucykge1xuICAgICAgaWYgKCFwYXJ0aWNpcGFudCkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgICBwYXJ0aWNpcGFudFV1aWQ6IHRoaXMucGFydGljaXBhbnRVdWlkXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBpZiAocGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IE1hdGguYWJzKHRvdGFsTW92ZSkpIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlBhcnRpY2lwYW50Tm90RW5vdWdoTW92ZW1lbnQnLCB7XG4gICAgICAgICAgICBhc3Npc3RhbnRVdWlkOiBwYXJ0aWNpcGFudFV1aWQsXG4gICAgICAgICAgICBhY3Rpb25zOiBwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucygwIC0gTWF0aC5hYnModG90YWxNb3ZlKSlcbiAgICAgIHBhcnRpY2lwYW50c0RhdGFbcGFydGljaXBhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YVxuICAgICAgKVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICAgIHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHNEYXRhIH0sXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgICBtb2RpZmllZCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAodG90YWxNb3ZlICE9PSAwKSB7XG4gICAgICBhd2FpdCB0aGlzLm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24oXG4gICAgICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICAgICAgbG9jYXRpb25zW2Rlc3RpbmF0aW9uSW5kZXhdLnV1aWQsXG4gICAgICAgIHsgcmVuZGVyOiBmYWxzZSB9XG4gICAgICApXG4gICAgICBtb2RpZmllZCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoYWN0aXZhdGVQYXJ0aWNpcGFudCkge1xuICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZCwge1xuICAgICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgICBhY3RpdmF0ZUxvY2F0aW9uLFxuICAgICAgICByZW5kZXI6IGZhbHNlXG4gICAgICB9KVxuICAgICAgbW9kaWZpZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKGFjdGl2YXRlTG9jYXRpb24gJiYgIWFjdGl2YXRlUGFydGljaXBhbnQpIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVMb2NhdGlvbihsb2NhdGlvbnNbZGVzdGluYXRpb25JbmRleF0udXVpZCwge1xuICAgICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgICByZW5kZXI6IGZhbHNlXG4gICAgICB9KVxuICAgICAgbW9kaWZpZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgaWYgKG1vZGlmaWVkICYmIHJlbmRlcikgYXdhaXQgdGhpcy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICByZXR1cm4gdG90YWxNb3ZlXG4gIH1cblxuICBhc3luYyBtb3ZlUGFydGljaXBhbnRUb0xvY2F0aW9uIChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgbG9jYXRpb25VdWlkLFxuICAgIHtcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICBhbmltYXRlID0gbnVsbCxcbiAgICAgIG1vdmVUb2tlbiA9IHRydWUsXG4gICAgICByZW5kZXIgPSB0cnVlXG4gICAgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuXG4gICAgLy8gRmluZCBkZXN0aW5hdGlvbiBsb2NhdGlvbi5cbiAgICBjb25zdCBkZXN0aW5hdGlvbiA9IGxvY2F0aW9ucy5maW5kKGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgaWYgKCFkZXN0aW5hdGlvbikge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYEZhaWxlZCB0byBtb3ZlICR7cGFydGljaXBhbnRVdWlkfS4gTG9jYXRpb24gJHtsb2NhdGlvblV1aWR9IHVua25vd25gXG4gICAgICApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICAvLyBGaW5kIG9yaWdpbiBsb2NhdGlvblxuICAgIGNvbnN0IG9yaWdpbiA9IGxvY2F0aW9ucy5maW5kKGwgPT5cbiAgICAgIGwucGFydGljaXBhbnRzPy5pbmNsdWRlcyhwYXJ0aWNpcGFudFV1aWQpXG4gICAgKVxuXG4gICAgaWYgKCFvcmlnaW4pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBmaW5kICR7cGFydGljaXBhbnRVdWlkfSBpbiBsb2NhdGlvbnNgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKCFkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMpIGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cyA9IFtdXG4gICAgaWYgKGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cy5pbmNsdWRlcyhwYXJ0aWNpcGFudFV1aWQpKSByZXR1cm4gLy8gbW92aW5nIHBhcnRpY3BhbnQgdG8gYSBsb2NhdGlvbiBoZSBhbHJlYWR5IG9jY3VwaWVzXG4gICAgZGVzdGluYXRpb24ucGFydGljaXBhbnRzLnB1c2gocGFydGljaXBhbnRVdWlkKVxuICAgIC8vIGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cy5zb3J0KHNvcnRCeVJvbGVBbmREZXgpXG5cbiAgICBjb25zdCBvbGRQYXJ0aWNpcGFudHNMaXN0ID0gb3JpZ2luLnBhcnRpY2lwYW50cy5maWx0ZXIoXG4gICAgICBwID0+IHBhcnRpY2lwYW50VXVpZCAhPT0gcFxuICAgIClcbiAgICBvcmlnaW4ucGFydGljaXBhbnRzID0gb2xkUGFydGljaXBhbnRzTGlzdFxuXG4gICAgaWYgKG1vdmVUb2tlbiAmJiBkZXN0aW5hdGlvbi5jb29yZGluYXRlcykge1xuICAgICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICAgIGNvbnN0IHBhcnRpY3BhbnREb2N1bWVudCA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KFxuICAgICAgICBwYXJ0aWNpcGFudD8uZGF0YT8uZG9jVXVpZFxuICAgICAgKVxuICAgICAgaWYgKFxuICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQgJiZcbiAgICAgICAgIShcbiAgICAgICAgICAvKiBwYXJ0aWNwYW50RG9jdW1lbnQuaXNUb2tlbiB8fCAqLyAoXG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50IHx8XG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQ/Lm9iamVjdCBpbnN0YW5jZW9mIFRva2VuXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdObyB0b2tlbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBhY3RvcicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGVzdGluYXRpb24uY29vcmRpbmF0ZXMuc2NlbmUgIT09IGdhbWUuc2NlbmVzLnZpZXdlZC51dWlkKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdDYXV0aW9uIHRoZSBzY2VuZSBpcyBub3QgdGhlIGFjdGl2ZSBzY2VuZScpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnRpY3BhbnREb2N1bWVudC5wYXJlbnQ/LnV1aWQgIT09IGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnNjZW5lKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvclRva2VuTm90T25TY2VuZScpXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHNjZW5lID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoXG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5jb29yZGluYXRlcy5zY2VuZVxuICAgICAgICAgIClcbiAgICAgICAgICBsZXQgeCA9IGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnhcbiAgICAgICAgICBjb25zdCB5ID0gZGVzdGluYXRpb24uY29vcmRpbmF0ZXMueVxuICAgICAgICAgIGxldCB0YXJnZXRSZWN0ID0gbmV3IE5vcm1hbGl6ZWRSZWN0YW5nbGUoXG4gICAgICAgICAgICB4LFxuICAgICAgICAgICAgeSxcbiAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudC5vYmplY3Qud2lkdGgsXG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQub2JqZWN0LmhlaWdodFxuICAgICAgICAgIClcbiAgICAgICAgICBjb25zdCB1cGRhdGUgPSBbXVxuICAgICAgICAgIGxldCBmb3VuZEZyZWVTcGFjZSA9IGZhbHNlXG4gICAgICAgICAgd2hpbGUgKCFmb3VuZEZyZWVTcGFjZSkge1xuICAgICAgICAgICAgY29uc3Qgb3ZlcmxhcGluZ1Rva2VuID0gc2NlbmUudG9rZW5zLmZpbmQodCA9PiB7XG4gICAgICAgICAgICAgIGlmICh0LmlkID09PSBwYXJ0aWNwYW50RG9jdW1lbnQuaWQpIHJldHVybiBmYWxzZSAvLyBZb3UgY2FuJ3Qgb3ZlcmxhcCB3aXRoIHlvdXJzZWxmXG4gICAgICAgICAgICAgIHJldHVybiB0Lm9iamVjdC5ib3VuZHMuaW50ZXJzZWN0cyh0YXJnZXRSZWN0KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmIChvdmVybGFwaW5nVG9rZW4pIHtcbiAgICAgICAgICAgICAgeCA9IG92ZXJsYXBpbmdUb2tlbi5vYmplY3QuYm91bmRzLnJpZ2h0ICsgMVxuICAgICAgICAgICAgICB0YXJnZXRSZWN0ID0gbmV3IE5vcm1hbGl6ZWRSZWN0YW5nbGUoXG4gICAgICAgICAgICAgICAgeCxcbiAgICAgICAgICAgICAgICB5LFxuICAgICAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudC5vYmplY3Qud2lkdGgsXG4gICAgICAgICAgICAgICAgcGFydGljcGFudERvY3VtZW50Lm9iamVjdC5oZWlnaHRcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSBlbHNlIGZvdW5kRnJlZVNwYWNlID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHVwZGF0ZS5wdXNoKHtcbiAgICAgICAgICAgIF9pZDogcGFydGljcGFudERvY3VtZW50LmlkLFxuICAgICAgICAgICAgeCxcbiAgICAgICAgICAgIHlcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgLy8gZGVzdGluYXRpb24ucGFydGljaXBhbnRzPy5mb3JFYWNoKCBwVXVpZCA9PntcbiAgICAgICAgICAvLyAgIGNvbnN0IHAgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBVdWlkKVxuICAgICAgICAgIC8vICAgY29uc3QgcERvYyA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KCBwPy5kYXRhPy5kb2NVdWlkKVxuICAgICAgICAgIC8vICAgaWYoIHBEb2MgaW5zdGFuY2VvZiBUb2tlbkRvY3VtZW50ICYmIHBEb2Mub2JqZWN0IGluc3RhbmNlb2YgVG9rZW4pe1xuICAgICAgICAgIC8vICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgICAgIC8vICAgICB1cGRhdGUucHVzaCh7XG4gICAgICAgICAgLy8gICAgICAgX2lkOiBwRG9jLmlkLFxuICAgICAgICAgIC8vICAgICAgIHg6eCxcbiAgICAgICAgICAvLyAgICAgICB5OnlcbiAgICAgICAgICAvLyAgICAgfSlcbiAgICAgICAgICAvLyAgICAgaWYoIHBEb2Mub2JqZWN0LndpZHRoKSB4ICs9IHBEb2Mub2JqZWN0LndpZHRoXG4gICAgICAgICAgLy8gICB9XG4gICAgICAgICAgLy8gfSlcbiAgICAgICAgICBjb25zdCBzaG93VG9rZW5Nb3ZlbWVudCA9XG4gICAgICAgICAgICB0eXBlb2YgYW5pbWF0ZSA9PT0gJ2Jvb2xlYW4nXG4gICAgICAgICAgICAgID8gYW5pbWF0ZVxuICAgICAgICAgICAgICA6IHRoaXMuc3lzdGVtLnNob3dUb2tlbk1vdmVtZW50XG4gICAgICAgICAgYXdhaXQgcGFydGljcGFudERvY3VtZW50LnBhcmVudC51cGRhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgICAgICAgICdUb2tlbicsXG4gICAgICAgICAgICB1cGRhdGUsXG4gICAgICAgICAgICB7IGFuaW1hdGU6IHNob3dUb2tlbk1vdmVtZW50IH1cbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgLy8gSGFuZGxlIHNjcm9sbGluZ1xuICBhc3luYyBzZXRjaGFzZVRyYWNrU2Nyb2xsICh7XG4gICAgZnJvbSA9IHVuZGVmaW5lZCxcbiAgICB0byA9IC0xLFxuICAgIHJlbmRlciA9IHRydWVcbiAgfSA9IHt9KSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7XG4gICAgICAgICdzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2suZnJvbSc6XG4gICAgICAgICAgdW5kZWZpbmVkID09PSBmcm9tID8gdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uIDogZnJvbSxcbiAgICAgICAgJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byc6XG4gICAgICAgICAgdW5kZWZpbmVkID09PSB0byA/IHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbiA6IHRvXG4gICAgICB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGdldCBjaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uICgpIHtcbiAgICBjb25zdCBodG1sID0gdGhpcy5zaGVldD8uX2VsZW1lbnRcbiAgICBpZiAoIWh0bWwpIHJldHVybiAtMVxuICAgIGNvbnN0IGNoYXNlVHJhY2sgPSBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpXG4gICAgaWYgKCFjaGFzZVRyYWNrKSByZXR1cm4gLTFcbiAgICAvLyBjb25zdCBzZWxlY3RvciA9IGAjaXRlbS0ke3RoaXMuaWR9IC5jaGFzZS10cmFja2BcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBEQVRBIDogSnF1ZXJ5IHJvb3Q6ICR7JCgnOnJvb3QnKS5maW5kKHNlbGVjdG9yKS5zY3JvbGxMZWZ0KCl9YClcbiAgICAvLyByZXR1cm4gJCgnOnJvb3QnKS5maW5kKHNlbGVjdG9yKS5zY3JvbGxMZWZ0KClcblxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYERBVEEgOiBKcXVlcnkgcm9vdDogJHskKCc6cm9vdCcpLmZpbmQoJyNpdGVtLVZOaHRxeEEyd0pKbldTdFQgLmNoYXNlLXRyYWNrJykuc2Nyb2xsTGVmdCgpfS5DaGFzZSB0cmFjayBvZmZzZXQ6ICR7Y2hhc2VUcmFjay5zY3JvbGxMZWZ0fSwgRG9jdW1lbnQgb2Zmc2V0OiR7ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2l0ZW0tVk5odHF4QTJ3SkpuV1N0VCcpLnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpLnNjcm9sbExlZnR9YClcbiAgICByZXR1cm4gY2hhc2VUcmFjay5zY3JvbGxMZWZ0XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIHRoZSBvZmZzZXQgcG9zaXRpb24gb2YgdGhlIGFjdGl2ZSBsb2NhdGlvblxuICAgKiB0aGUgY2VudGVyIG9mIHRoZSBhY3RpdmUgbG9jYXRpb24gd2lsbCBiZSBjZW50ZXJlZFxuICAgKiBpbiB0aGUgcGFyZW50LlxuICAgKi9cbiAgZ2V0IGNoYXNlVHJhY2tBY3RpdmVMb2NhdGlvblNjcm9sbFBvc2l0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0aXZlTG9jYXRpb24pIHJldHVybiAtMVxuICAgIHJldHVybiB0aGlzLmdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uKHRoaXMuYWN0aXZlTG9jYXRpb24udXVpZClcbiAgfVxuXG4gIGdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uIChsb2NhdGlvblV1aWQsIHsgaHRtbCA9IG51bGwgfSkge1xuICAgIGNvbnN0IGh0bWxFbGVtZW50ID0gaHRtbCB8fCB0aGlzLnNoZWV0Py5fZWxlbWVudFxuICAgIGlmICghaHRtbEVsZW1lbnQgfHwgIWh0bWxFbGVtZW50WzBdKSByZXR1cm4gLTFcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gaHRtbEVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJylcbiAgICBpZiAoIWNoYXNlVHJhY2spIHJldHVybiAtMVxuICAgIGNvbnN0IGFjdGl2ZUxvY2F0aW9uRWxlbWVudCA9IGNoYXNlVHJhY2sucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuY2hhc2UtbG9jYXRpb25bZGF0YS11dWlkPVwiJHtsb2NhdGlvblV1aWR9XCJdYFxuICAgIClcbiAgICBpZiAoIWFjdGl2ZUxvY2F0aW9uRWxlbWVudCkgcmV0dXJuIC0xXG4gICAgY29uc3QgbGVmdFNjcm9sbCA9XG4gICAgICBhY3RpdmVMb2NhdGlvbkVsZW1lbnQub2Zmc2V0TGVmdCArXG4gICAgICBhY3RpdmVMb2NhdGlvbkVsZW1lbnQuY2xpZW50V2lkdGggLyAyIC1cbiAgICAgIGNoYXNlVHJhY2suY2xpZW50V2lkdGggLyAyXG4gICAgcmV0dXJuIGxlZnRTY3JvbGwgPCAwID8gMCA6IE1hdGguZmxvb3IobGVmdFNjcm9sbClcbiAgfVxuXG4gIC8vIFNob3VsZCBiZSByZW1vdmVkXG4gIGZpbmRNaW5Nb3YgKGxpc3QpIHtcbiAgICBpZiAoIWxpc3Q/Lmxlbmd0aCkgcmV0dXJuIC0xXG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PlxuICAgICAgcHJldi5hZGp1c3RlZE1vdiA8IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudFxuICAgICkuYWRqdXN0ZWRNb3ZcbiAgfVxuXG4gIGZpbmRNYXhNb3YgKGxpc3QpIHtcbiAgICBpZiAoIWxpc3Q/Lmxlbmd0aCkgcmV0dXJuIC0xXG4gICAgcmV0dXJuIGxpc3QucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PlxuICAgICAgcHJldi5hZGp1c3RlZE1vdiA+IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudFxuICAgICkuYWRqdXN0ZWRNb3ZcbiAgfVxuXG4gIC8vIFV0aWxpdGllc1xuICBmaW5kSW5kZXggKGxpc3QsIHV1aWQpIHtcbiAgICByZXR1cm4gbGlzdC5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBnZXQgc3RhcnRlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RmxhZygnQ29DNycsICdzdGFydGVkJylcbiAgfVxuXG4gIGFzeW5jIHN0YXJ0ICgpIHtcbiAgICBjb25zdCByZW1TdHJpbmcgPSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJylcbiAgICBjb25zdCByZW1TaXplID0gTnVtYmVyKHJlbVN0cmluZy5yZXBsYWNlKCdweCcsICcnKSlcbiAgICBjb25zdCBwQ291bnQgPSB0aGlzLmFjdHVhbFBhcnRpY2lwYW50cy5sZW5ndGhcbiAgICBjb25zdCB3aWR0aCA9IE1hdGgubWF4KChwQ291bnQgKiAxMS4yICsgMykgKiByZW1TaXplLCA0MCAqIHJlbVNpemUpXG4gICAgdGhpcy5zaGVldC5fdGFic1swXS5hY3RpdmUgPSAnc2V0dXAnXG4gICAgdGhpcy5zaGVldC5wb3NpdGlvbi53aWR0aCA9IHdpZHRoXG4gICAgYXdhaXQgdGhpcy5zZXRGbGFnKCdDb0M3JywgJ3N0YXJ0ZWQnLCB0cnVlKVxuICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKClcbiAgfVxuXG4gIGFzeW5jIHN0b3AgKCkge1xuICAgIHJldHVybiB0aGlzLnVuc2V0RmxhZygnQ29DNycsICdzdGFydGVkJylcbiAgfVxuXG4gIGdlbmVyYXRlTmV3VXVpZCAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gIH1cblxuICBnZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyAocGFydGljaXBhbnRVdWlkKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICBpZiAoIXBhcnRpY2lwYW50LmFjdG9yKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbGlzdCA9IFtdXG4gICAgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZm9yRWFjaChjID0+XG4gICAgICBsaXN0LnB1c2goXG4gICAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnKX0gKCR7Yy5zaG9ydE5hbWV9KWBcbiAgICAgIClcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICApfSlgXG4gICAgKVxuICAgIGxpc3QucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5TQU4nXG4gICAgICApfSlgXG4gICAgKVxuICAgIHBhcnRpY2lwYW50LmFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT4gbGlzdC5wdXNoKHMubmFtZSkpXG4gICAgcmV0dXJuIGxpc3RcbiAgfVxuXG4gIGdldCBhY3RpdmVBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgY29uc3QgcGFydGljaWNwYW50RGF0YSA9IHRoaXMuYWN0aXZlUGFydGljaXBhbnREYXRhXG4gICAgaWYgKCFwYXJ0aWNpY3BhbnREYXRhKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuZ2V0QWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MocGFydGljaWNwYW50RGF0YS51dWlkKVxuICB9XG5cbiAgZ2V0IGFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgY29uc3QgbGlzdCA9IFtdXG4gICAgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZm9yRWFjaChjID0+XG4gICAgICBsaXN0LnB1c2goXG4gICAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnKX0gKCR7Yy5zaG9ydE5hbWV9KWBcbiAgICAgIClcbiAgICApXG4gICAgbGlzdC5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpfSAoJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3Lkx1Y2snXG4gICAgICApfSlgXG4gICAgKVxuICAgIGxpc3QucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5TQU4nXG4gICAgICApfSlgXG4gICAgKVxuXG4gICAgZ2FtZS5Db0M3LnNraWxsTGlzdD8uZm9yRWFjaChzID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgIWxpc3QuaW5jbHVkZXMocy5uYW1lKSAmJlxuICAgICAgICAhcy5uYW1lXG4gICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAuaW5jbHVkZXMoYCgke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbnlTcGVjTmFtZScpfSlgLnRvTG93ZXJDYXNlKCkpXG4gICAgICApIHtcbiAgICAgICAgbGlzdC5wdXNoKHMubmFtZSlcbiAgICAgIH1cbiAgICB9KSAvLyBUT0RPOiBSZW1vdmUgPz9cbiAgICB0aGlzLnBhcnRpY2lwYW50cy5mb3JFYWNoKHAgPT4ge1xuICAgICAgaWYgKHAuYWN0b3IpIHtcbiAgICAgICAgcC5hY3Rvci5za2lsbHMuZm9yRWFjaChzID0+IHtcbiAgICAgICAgICBpZiAoIWxpc3QuaW5jbHVkZXMocy5uYW1lKSkgbGlzdC5wdXNoKHMubmFtZSlcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9KVxuICAgIHJldHVybiBsaXN0LnNvcnQoSW50bC5Db2xsYXRvcigpLmNvbXBhcmUpXG4gIH1cblxuICBnZXQgYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzU2hvcnQgKCkge1xuICAgIGNvbnN0IGxpc3QgPSBbXVxuICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PiBsaXN0LnB1c2goYCR7Yy5sYWJlbH1gKSlcbiAgICBsaXN0LnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKX1gKVxuICAgIGxpc3QucHVzaChgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJyl9YClcblxuICAgIGdhbWUuQ29DNy5za2lsbExpc3Q/LmZvckVhY2gocyA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgICFsaXN0LmluY2x1ZGVzKHMubmFtZSkgJiZcbiAgICAgICAgIXMubmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKGAoJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55U3BlY05hbWUnKX0pYC50b0xvd2VyQ2FzZSgpKVxuICAgICAgKSB7XG4gICAgICAgIGxpc3QucHVzaChzLm5hbWUpXG4gICAgICB9XG4gICAgfSkgLy8gVE9ETzogUmVtb3ZlID8/XG4gICAgdGhpcy5wYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFjdG9yKSB7XG4gICAgICAgIHAuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiB7XG4gICAgICAgICAgaWYgKCFsaXN0LmluY2x1ZGVzKHMubmFtZSkpIGxpc3QucHVzaChzLm5hbWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gbGlzdC5zb3J0KEludGwuQ29sbGF0b3IoKS5jb21wYXJlKVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFuIHRoZSBkYXRhIG9mIGFsbCBwYXJhc2l0ZSBwYXJ0aWNpcGFudHMgaW4gbG9jYXRpb25zLlxuICAgKiBTaG91bGQgbmV2ZXIgaGFwcGVuXG4gICAqL1xuICAvLyBhc3luYyBjbGVhbkxvY2F0aW9ucyAoKSB7XG4gIC8vICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAvLyAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAvLyAgICAgY29uc3QgcGFydGlwYW50c1V1aWRBcnJheSA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5tYXAocCA9PiBwLnV1aWQpXG4gIC8vICAgICBpZiAobC5wYXJ0aWNpcGFudHMpIHtcbiAgLy8gICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIodXVpZCA9PlxuICAvLyAgICAgICAgIHBhcnRpcGFudHNVdWlkQXJyYXkuaW5jbHVkZXModXVpZClcbiAgLy8gICAgICAgKVxuICAvLyAgICAgfVxuICAvLyAgIH0pXG4gIC8vICAgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgLy8gfVxufVxuIiwiLyogZ2xvYmFsIGZvdW5kcnksIGdhbWUgKi9cbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTa2lsbCBleHRlbmRzIENvQzdJdGVtIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuc3lzdGVtPy5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBza2lsbCA9IENvQzdTa2lsbC5ndWVzc05hbWVQYXJ0cyhkYXRhLm5hbWUpXG4gICAgICBjb25zdCB7IG5hbWUsIHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24sIC4uLm5ld1Byb3BlcnRpZXMgfSA9IHNraWxsXG4gICAgICBkYXRhLm5hbWUgPSBuYW1lXG4gICAgICBkYXRhLnN5c3RlbSB8fD0ge31cbiAgICAgIGNvbnN0IHByb3BlcnRpZXMgPSB7IC4uLmRhdGEuc3lzdGVtLnByb3BlcnRpZXMsIC4uLm5ld1Byb3BlcnRpZXMgfVxuICAgICAgZGF0YS5zeXN0ZW0gPSB7IC4uLmRhdGEuc3lzdGVtLCBza2lsbE5hbWUsIHNwZWNpYWxpemF0aW9uLCBwcm9wZXJ0aWVzIH1cbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIHN0YXRpYyBndWVzc05hbWVQYXJ0cyAoc2tpbGxOYW1lKSB7XG4gICAgY29uc3Qgb3V0cHV0ID0ge1xuICAgICAgY29tYmF0OiBmYWxzZSxcbiAgICAgIGZpZ2h0aW5nOiBmYWxzZSxcbiAgICAgIGZpcmVhcm06IGZhbHNlLFxuICAgICAgbmFtZTogc2tpbGxOYW1lLFxuICAgICAgc2tpbGxOYW1lLFxuICAgICAgc3BlY2lhbDogZmFsc2UsXG4gICAgICBzcGVjaWFsaXphdGlvbjogJydcbiAgICB9XG5cbiAgICBjb25zdCBtYXRjaCA9IHNraWxsTmFtZS5tYXRjaCgvXiguKylcXHMqXFwoKFteKV0rKVxcKSQvKVxuICAgIGlmIChtYXRjaCkge1xuICAgICAgb3V0cHV0LnNraWxsTmFtZSA9IG1hdGNoWzJdLnRyaW0oKVxuICAgICAgb3V0cHV0LnNwZWNpYWwgPSB0cnVlXG5cbiAgICAgIGNvbnN0IHNwZWNpYWxpemF0aW9uID0gbWF0Y2hbMV0udHJpbSgpXG4gICAgICBvdXRwdXQuc3BlY2lhbGl6YXRpb24gPSBzcGVjaWFsaXphdGlvblxuICAgICAgb3V0cHV0Lm5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBvdXRwdXQuc2tpbGxOYW1lICsgJyknXG4gICAgICBvdXRwdXQuZmlnaHRpbmcgPSBzcGVjaWFsaXphdGlvbiA9PT0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgIG91dHB1dC5maXJlYXJtID0gc3BlY2lhbGl6YXRpb24gPT09IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJylcbiAgICAgIG91dHB1dC5jb21iYXQgPSBvdXRwdXQuZmlnaHRpbmcgfHwgb3V0cHV0LmZpcmVhcm1cbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgZ2V0IGhhc0FjdGl2ZUVmZmVjdHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZUVmZmVjdHMubGVuZ3RoID4gMFxuICB9XG5cbiAgZ2V0IGFjdGl2ZUVmZmVjdHMgKCkge1xuICAgIGlmICh0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5lZmZlY3RzKSB7XG4gICAgICBjb25zdCBlZmZlY3RLZXlGdWxsID0gYHNraWxsLiR7dGhpcy5uYW1lfWAudG9Mb3dlckNhc2UoKVxuICAgICAgY29uc3QgZWZmZWN0S2V5U2hvcnQgPSBgc2tpbGwuJHt0aGlzLnN5c3RlbS5za2lsbE5hbWV9YC50b0xvd2VyQ2FzZSgpXG4gICAgICBsZXQgY2hhbmdlcyA9IHRoaXMucGFyZW50LmVmZmVjdHMucmVkdWNlKChjaGFuZ2VzLCBlKSA9PiB7XG4gICAgICAgIGlmIChlLmRpc2FibGVkIHx8IGUuaXNTdXBwcmVzc2VkKSByZXR1cm4gY2hhbmdlc1xuICAgICAgICByZXR1cm4gY2hhbmdlcy5jb25jYXQoXG4gICAgICAgICAgZS5kYXRhLmNoYW5nZXMubWFwKGMgPT4ge1xuICAgICAgICAgICAgYyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGMpXG4gICAgICAgICAgICBjLmVmZmVjdCA9IGVcbiAgICAgICAgICAgIGMucHJpb3JpdHkgPSBjLnByaW9yaXR5ID8/IGMubW9kZSAqIDEwXG4gICAgICAgICAgICByZXR1cm4gY1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH0sIFtdKVxuICAgICAgY2hhbmdlcy5zb3J0KChhLCBiKSA9PiBhLnByaW9yaXR5IC0gYi5wcmlvcml0eSlcbiAgICAgIGNoYW5nZXMgPSBjaGFuZ2VzLmZpbHRlcihcbiAgICAgICAgZSA9PlxuICAgICAgICAgIGUua2V5LnRvTG93ZXJDYXNlKCkgPT09IGVmZmVjdEtleVNob3J0IHx8XG4gICAgICAgICAgZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gZWZmZWN0S2V5RnVsbFxuICAgICAgKVxuICAgICAgcmV0dXJuIGNoYW5nZXNcbiAgICB9XG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICAvKipcbiAgKiBVbmlxdWUgaWRlbnRpZmllciBzaG91bGQgYmUgdXNlZCB0byBzdG9yZSBhbmQgb2J0YWluIGl0ZW0gdG8gYXNzZXNzIGl0ZW0gdW5pcXVlbmVzcy5cbiAgKiBGb3Igb2xkIGl0ZW1zIHdpdGhvdXQgaWQsIGZhbGxiYWNrIG9mIHNraWxsTmFtZSBtYXkgc3RpbGwgYmUgdXNlZFxuICAqIGJ1dCBpZiBza2lsbCBuYW1lIGlzIG5vdCB1bmlxdWUgaXQgd2lsbCBjYXVzZSBwcm9ibGVtcy5cbiAgKi9cbiAgZ2V0IGl0ZW1JZGVudGlmaWVyICgpIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lXG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgdmFsdWUgb2YgdGhlIHNraWxsIHNjb3JlIHVuYWZmZWN0ZWQgYnkgYWN0aXZlIGVmZmVjdHNcbiAgICovXG4gIGdldCByYXdWYWx1ZSAoKSB7XG4gICAgbGV0IHZhbHVlID0gMFxuICAgIGlmICh0aGlzLmFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICAvLyBGb3IgYW4gYWN0b3Igd2l0aCBleHBlcmllbmNlIHdlIG5lZWQgdG8gY2FsY3VsYXRlIHNraWxsIHZhbHVlXG4gICAgICB2YWx1ZSA9IHRoaXMuYmFzZVxuICAgICAgdmFsdWUgKz0gdGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LnBlcnNvbmFsXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LnBlcnNvbmFsKVxuICAgICAgICA6IDBcbiAgICAgIHZhbHVlICs9IHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24pXG4gICAgICAgIDogMFxuICAgICAgdmFsdWUgKz0gdGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZSlcbiAgICAgICAgOiAwXG4gICAgICBpZiAoXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykgJiZcbiAgICAgICAgdGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmFyY2hldHlwZVxuICAgICAgKSB7XG4gICAgICAgIHZhbHVlICs9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5hcmNoZXR5cGUpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZvciBhbGwgb3RoZXJzIGFjdG9yIHdlIHN0b3JlIHRoZSB2YWx1ZSBkaXJlY3RseVxuICAgICAgdmFsdWUgPSBwYXJzZUludCh0aGlzLnN5c3RlbS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuICFpc05hTih2YWx1ZSkgPyB2YWx1ZSA6IG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHRoZSBza2lsbCdzIHZhbHVlIGFmdGVyIGFjdGl2ZSBlZmZlY3RzIGhhdmUgYmVlbiBhcHBsaWVkXG4gICAqL1xuICBnZXQgdmFsdWUgKCkge1xuICAgIGNvbnN0IHZhbHVlID0gdGhpcy5wYXJlbnQ/LnN5c3RlbS5za2lsbHM/LltgJHt0aGlzLml0ZW1JZGVudGlmaWVyfWBdPy52YWx1ZVxuICAgIHJldHVybiB2YWx1ZSB8fCB0aGlzLnJhd1ZhbHVlXG4gIH1cblxuICBhc3luYyB1cGRhdGVWYWx1ZSAodmFsdWUpIHtcbiAgICBpZiAodGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgY29uc3QgZGVsdGEgPSBwYXJzZUludCh2YWx1ZSkgLSB0aGlzLnJhd1ZhbHVlXG4gICAgICBjb25zdCBleHAgPVxuICAgICAgICAodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UpXG4gICAgICAgICAgOiAwKSArIGRlbHRhXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IGV4cCA+IDAgPyBleHAgOiAwXG4gICAgICB9KVxuICAgIH0gZWxzZSBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0udmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgaW5jcmVhc2VFeHBlcmllbmNlICh4KSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgY29uc3QgZXhwID1cbiAgICAgICAgKHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlXG4gICAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlKVxuICAgICAgICAgIDogMCkgKyBwYXJzZUludCh4KVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiBleHAgPiAwID8gZXhwIDogMFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvLyBnZXQgdmFsdWUgKCkge1xuICAvLyAgIGxldCBwVmFsdWVcbiAgLy8gICBpZiggdGhpcy5wYXJlbnQpe1xuXG4gIC8vICAgfVxuICAvLyAgIGNvbnN0IHZhbHVlID0gc3VwZXIudmFsdWVcbiAgLy8gICBsZXQgdXBkYXRlZCA9IHZhbHVlXG4gIC8vICAgZm9yIChjb25zdCBjaGFuZ2Ugb2YgdGhpcy5hY3RpdmVFZmZlY3RzKSB7XG4gIC8vICAgICBjb25zdCBtb2RpZmllciA9IE51bWJlci5mcm9tU3RyaW5nKGNoYW5nZS52YWx1ZSlcbiAgLy8gICAgIGlmICghaXNOYU4obW9kaWZpZXIpKSB7XG4gIC8vICAgICAgIGNvbnN0IG1vZGVzID0gQ09OU1QuQUNUSVZFX0VGRkVDVF9NT0RFU1xuICAvLyAgICAgICBzd2l0Y2ggKGNoYW5nZS5tb2RlKSB7XG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5BREQ6XG4gIC8vICAgICAgICAgICB1cGRhdGVkICs9IG1vZGlmaWVyXG4gIC8vICAgICAgICAgICBicmVha1xuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuTVVMVElQTFk6XG4gIC8vICAgICAgICAgICB1cGRhdGVkID0gTWF0aC5yb3VuZCh1cGRhdGVkICogbW9kaWZpZXIpXG4gIC8vICAgICAgICAgICBicmVha1xuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuT1ZFUlJJREU6XG4gIC8vICAgICAgICAgICB1cGRhdGVkID0gbW9kaWZpZXJcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5VUEdSQURFOlxuICAvLyAgICAgICAgICAgaWYgKG1vZGlmZXIgPiB1cGRhdGVkKSB1cGRhdGVkID0gbW9kaWZpZXJcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgICAgY2FzZSBtb2Rlcy5ET1dOR1JBREU6XG4gIC8vICAgICAgICAgICBpZiAobW9kaWZlciA8IHVwZGF0ZWQpIHVwZGF0ZWQgPSBtb2RpZmllclxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgfVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gICBpZiAoIWlzTmFOKHVwZGF0ZWQpICYmIHVwZGF0ZWQgIT0gdmFsdWUpIHtcbiAgLy8gICAgIGlmICh1cGRhdGVkIDwgMCkgdXBkYXRlZCA9IDBcbiAgLy8gICAgIHJldHVybiB1cGRhdGVkXG4gIC8vICAgfSByZXR1cm4gdmFsdWVcbiAgLy8gfVxufVxuIiwiaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3Rvci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdWZWhpY2xlIGV4dGVuZHMgQ29DQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2plZXAuc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgZ2V0IHJhd0J1aWxkICgpIHtcbiAgICByZXR1cm4gdGhpcy5idWlsZFxuICB9XG5cbiAgZ2V0IGJ1aWxkICgpIHtcbiAgICBjb25zdCBidWlsZCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQudmFsdWUpXG4gICAgcmV0dXJuIGlzTmFOKGJ1aWxkKSA/IG51bGwgOiBidWlsZFxuICB9XG5cbiAgZ2V0IGhwICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPT09IG51bGwgfHxcbiAgICAgIHVuZGVmaW5lZCA9PT0gdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50IHx8XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPT09ICcnXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcy5idWlsZFxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gICAgKSB7XG4gICAgICByZXR1cm4gdGhpcy5idWlsZFxuICAgIH1cbiAgICBjb25zdCBocCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudClcbiAgICByZXR1cm4gaXNOYU4oaHApID8gbnVsbCA6IGhwXG4gIH1cblxuICBnZXQgaHBNYXggKCkge1xuICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gIH1cblxuICBnZXQgcmF3SHBNYXggKCkge1xuICAgIHJldHVybiB0aGlzLmJ1aWxkXG4gIH1cblxuICBhc3luYyBzZXRIcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPiB0aGlzLmJ1aWxkKSB2YWx1ZSA9IHRoaXMuYnVpbGRcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCc6IHZhbHVlIH0pXG4gIH1cblxuICBnZXQgcmF3RGIgKCkge1xuICAgIHJldHVybiB0aGlzLmRiXG4gIH1cblxuICBnZXQgZGIgKCkge1xuICAgIGNvbnN0IGRiID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5kYj8udmFsdWUpXG4gICAgcmV0dXJuIGlzTmFOKGRiKSA/IG51bGwgOiBkYlxuICB9XG5cbiAgZ2V0IHJhd01vdiAoKSB7XG4gICAgcmV0dXJuIHRoaXMubW92XG4gIH1cblxuICBnZXQgbW92ICgpIHtcbiAgICBjb25zdCBtb3YgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdj8udmFsdWUpXG4gICAgcmV0dXJuIGlzTmFOKG1vdikgPyBudWxsIDogbW92XG4gIH1cblxuICBnZXQgbXBNYXggKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzPy5tcD8ubWF4KSB8fCAwXG4gIH1cblxuICBnZXQgcmF3TXBNYXggKCkge1xuICAgIHJldHVybiB0aGlzLm1wTWF4XG4gIH1cblxuICBnZXQgc2FuTWF4ICgpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHJhd1Nhbk1heCAoKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpY2VUZXJtICovXG5cbmV4cG9ydCBjbGFzcyBDb0M3RGVjYWRlckRpZSBleHRlbmRzIERpY2VUZXJtIHtcbiAgY29uc3RydWN0b3IgKHRlcm1EYXRhKSB7XG4gICAgc3VwZXIodGVybURhdGEpXG4gICAgdGhpcy5mYWNlcyA9IDEwXG4gIH1cblxuICBnZXQgdG90YWwgKCkge1xuICAgIGNvbnN0IHRvdGFsID0gc3VwZXIudG90YWxcbiAgICByZXR1cm4gdG90YWwgPT09IDEwID8gMCA6IHRvdGFsICogMTBcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3RhdGljIGdldCBERU5PTUlOQVRJT04gKCkge1xuICAgIHJldHVybiAndCdcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ29DN0RlY2FkZXJEaWUgfSBmcm9tICcuL2RlY2FkZXItZGllLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0RlY2FkZXJEaWVPdGhlciBleHRlbmRzIENvQzdEZWNhZGVyRGllIHtcbiAgc3RhdGljIGdldCBERU5PTUlOQVRJT04gKCkge1xuICAgIHJldHVybiAnbydcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgRm9ybUFwcGxpY2F0aW9uLCBnYW1lLCBtZXJnZU9iamVjdCAqL1xuY29uc3QgU0VUVElOR1MgPSB7XG4gIHB1bHBSdWxlczoge1xuICAgIG5hbWU6ICcnLFxuICAgIGhpbnQ6ICcnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBpbml0aWF0aXZlUnVsZToge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZScsXG4gICAgaGludDogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiAnYmFzaWMnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBiYXNpYzogJ1NFVFRJTkdTLkluaXRpYXRpdmVSdWxlQmFzaWMnLFxuICAgICAgb3B0aW9uYWw6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZU9wdGlvbmFsJ1xuICAgIH0sXG4gICAgb25DaGFuZ2U6IHJ1bGUgPT4gX3NldEluaXRpYXRpdmVPcHRpb25zKHJ1bGUpXG4gIH0sXG4gIGRldmVsb3BtZW50Um9sbEZvckx1Y2s6IHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGV2ZWxvcG1lbnRSb2xsRm9yTHVjaycsXG4gICAgaGludDogJ1NFVFRJTkdTLmRldmVsb3BtZW50Um9sbEZvckx1Y2tIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVEb3VibGVNYXhIZWFsdGg6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRG91YmxlTWF4SGVhbHRoLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Eb3VibGVNYXhIZWFsdGguSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjazoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5EZXZlbG9wbWVudFJvbGxMdWNrLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5EZXZlbG9wbWVudFJvbGxMdWNrLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZUFyY2hldHlwZToge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5BcmNoZXR5cGUuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkFyY2hldHlwZS5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVPcmdhbml6YXRpb246IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuT3JnYW5pemF0aW9uLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5Pcmdhbml6YXRpb24uSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlVGFsZW50czoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5UYWxlbnRzLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5UYWxlbnRzLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZUZhc3RlclJlY292ZXJ5OiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkZhc3RlclJlY292ZXJ5Lk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5GYXN0ZXJSZWNvdmVyeS5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVJZ25vcmVNYWpvcldvdW5kczoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5JZ25vcmVNYWpvcldvdW5kcy5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlTWFqb3JXb3VuZHMuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLklnbm9yZUFnZVBlbmFsdGllcy5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlQWdlUGVuYWx0aWVzLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBvcHBvc2VkUm9sbFRpZUJyZWFrZXI6IHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3Bwb3NlZFJvbGxUaWVCcmVha2VyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuT3Bwb3NlZFJvbGxUaWVCcmVha2VySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH1cbn1cblxuZnVuY3Rpb24gX3NldEluaXRpYXRpdmVPcHRpb25zIChydWxlKSB7XG4gIGxldCBkZWNpbWFscyA9IDBcbiAgc3dpdGNoIChydWxlKSB7XG4gICAgY2FzZSAnb3B0aW9uYWwnOlxuICAgICAgZGVjaW1hbHMgPSAyXG4gICAgICBicmVha1xuICAgIGNhc2UgJ2Jhc2ljJzpcbiAgICAgIGRlY2ltYWxzID0gMFxuICAgICAgYnJlYWtcbiAgfVxuICBDT05GSUcuQ29tYmF0LmluaXRpYXRpdmUgPSB7XG4gICAgZm9ybXVsYTogbnVsbCxcbiAgICBkZWNpbWFsc1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3R2FtZVJ1bGVTZXR0aW5ncyBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGl0bGU6ICdTRVRUSU5HUy5UaXRsZVJ1bGVzJyxcbiAgICAgIGlkOiAncnVsZXMtc2V0dGluZ3MnLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL3N5c3RlbS9ydWxlLXNldHRpbmdzLmh0bWwnLFxuICAgICAgd2lkdGg6IDU1MCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgY2xvc2VPblN1Ym1pdDogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBnZXREYXRhICgpIHtcbiAgICBjb25zdCBvcHRpb25zID0ge31cbiAgICBjb25zdCBwdWxwUnVsZXMgPSB7XG4gICAgICB0cnVlOiBmYWxzZSxcbiAgICAgIGZhbHNlOiBmYWxzZVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhTRVRUSU5HUykpIHtcbiAgICAgIG9wdGlvbnNba10gPSB7XG4gICAgICAgIHZhbHVlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsIGspLFxuICAgICAgICBzZXR0aW5nOiB2XG4gICAgICB9XG4gICAgICBpZiAoay5tYXRjaCgvXnB1bHBSdWxlLnsyLH0kLykpIHtcbiAgICAgICAgcHVscFJ1bGVzW29wdGlvbnNba10udmFsdWVdID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBvcHRpb25zLnB1bHBTZWxlY3Rpb24gPSBwdWxwUnVsZXMudHJ1ZVxuICAgICAgPyBwdWxwUnVsZXMuZmFsc2VcbiAgICAgICAgPyAnc29tZSdcbiAgICAgICAgOiAnYWxsJ1xuICAgICAgOiAnbm9uZSdcbiAgICByZXR1cm4gb3B0aW9uc1xuICB9XG5cbiAgc3RhdGljIHJlZ2lzdGVyU2V0dGluZ3MgKCkge1xuICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKFNFVFRJTkdTKSkge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsIGssIHYpXG4gICAgfVxuICAgIF9zZXRJbml0aWF0aXZlT3B0aW9ucyhnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdpbml0aWF0aXZlUnVsZScpKVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcjcHVscFJ1bGVzU2VsZWN0JylcbiAgICAgIC5vbignY2hhbmdlJywgZXZlbnQgPT4gdGhpcy5vbkNoYW5nZVB1bHBTZWxlY3QoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdpbnB1dC5wdWxwUnVsZXNTZWxlY3RbdHlwZT1jaGVja2JveF0nKVxuICAgICAgLm9uKCdjbGljaycsIGV2ZW50ID0+IHRoaXMub25DbGlja1B1bHAoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCdidXR0b25bbmFtZT1yZXNldF0nKVxuICAgICAgLm9uKCdjbGljaycsIGV2ZW50ID0+IHRoaXMub25SZXNldERlZmF1bHRzKGV2ZW50KSlcbiAgfVxuXG4gIG9uQ2hhbmdlUHVscFNlbGVjdCAoZXZlbnQpIHtcbiAgICBjb25zdCB2YWwgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnZhbCgpXG4gICAgaWYgKHZhbCA9PT0gJ25vbmUnIHx8IHZhbCA9PT0gJ2FsbCcpIHtcbiAgICAgICQoJyNydWxlcy1zZXR0aW5ncycpXG4gICAgICAgIC5maW5kKCdpbnB1dC5wdWxwUnVsZXNTZWxlY3RbdHlwZT1jaGVja2JveF0nKVxuICAgICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2tib3ggPSAkKHRoaXMpXG4gICAgICAgICAgaWYgKHZhbCA9PT0gJ25vbmUnKSB7XG4gICAgICAgICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgZmFsc2UpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnLCB0cnVlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBvbkNsaWNrUHVscCAoZXZlbnQpIHtcbiAgICBjb25zdCBwdWxwUnVsZXMgPSB7XG4gICAgICB0cnVlOiBmYWxzZSxcbiAgICAgIGZhbHNlOiBmYWxzZVxuICAgIH1cbiAgICAkKCcjcnVsZXMtc2V0dGluZ3MnKVxuICAgICAgLmZpbmQoJ2lucHV0LnB1bHBSdWxlc1NlbGVjdFt0eXBlPWNoZWNrYm94XScpXG4gICAgICAuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGNoZWNrYm94ID0gJCh0aGlzKVxuICAgICAgICBpZiAoY2hlY2tib3gucHJvcCgnY2hlY2tlZCcpKSB7XG4gICAgICAgICAgcHVscFJ1bGVzLnRydWUgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHVscFJ1bGVzLmZhbHNlID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICQoJyNwdWxwUnVsZXNTZWxlY3QnKS52YWwoXG4gICAgICBwdWxwUnVsZXMudHJ1ZSA/IChwdWxwUnVsZXMuZmFsc2UgPyAnc29tZScgOiAnYWxsJykgOiAnbm9uZSdcbiAgICApXG4gIH1cblxuICBhc3luYyBvblJlc2V0RGVmYXVsdHMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGZvciBhd2FpdCAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKFNFVFRJTkdTKSkge1xuICAgICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCBrLCB2Py5kZWZhdWx0KVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZW5kZXIoKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGRhdGEpIHtcbiAgICBjb25zdCBwdWxwUnVsZXMgPSB7XG4gICAgICB0cnVlOiBmYWxzZSxcbiAgICAgIGZhbHNlOiBmYWxzZVxuICAgIH1cbiAgICBmb3IgYXdhaXQgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhTRVRUSU5HUykpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3Jywga2V5LCBkYXRhW2tleV0pXG4gICAgICBpZiAoa2V5Lm1hdGNoKC9ecHVscFJ1bGUuezIsfSQvKSkge1xuICAgICAgICBwdWxwUnVsZXNbZGF0YVtrZXldXSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVzJywgcHVscFJ1bGVzLnRydWUgJiYgIXB1bHBSdWxlcy5mYWxzZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGR1cGxpY2F0ZSwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBEcm9wQ29DSUQgfSBmcm9tICcuLi8uLi9hcHBzL2Ryb3AtY29jLWlkLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QXJjaGV0eXBlU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtIC5pdGVtLW5hbWUgaDQnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdza2lsbHMnKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tZGVsZXRlJylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZWxldGUoZXZlbnQsICdza2lsbHMnKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NraWxsJywgY29sbGVjdGlvbk5hbWUgPSAnc2tpbGxzJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBsZXQgdXNlQ29DSUQgPSAwXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uc3lzdGVtKSBjb250aW51ZVxuICAgICAgaWYgKCFbdHlwZV0uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWUpKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodXNlQ29DSUQgPT09IDApIHtcbiAgICAgICAgdXNlQ29DSUQgPSBhd2FpdCBEcm9wQ29DSUQuY3JlYXRlKClcbiAgICAgIH1cbiAgICAgIGNvbGxlY3Rpb24ucHVzaChEcm9wQ29DSUQucHJvY2Vzc0l0ZW0odXNlQ29DSUQsIGl0ZW0pKVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgX29uSXRlbVN1bW1hcnkgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgfSlcbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhLnZhbHVlfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHsgcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgY29uc3QgQ29DSWQgPSBpdGVtLmRhdGEoJ2NvY2lkJylcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgoaSA9PiAoaXRlbUlkICYmIGkuX2lkID09PSBpdGVtSWQpIHx8IChDb0NJZCAmJiBpID09PSBDb0NJZCkpXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cbiAgICAgIGNvbGxlY3Rpb24uc3BsaWNlKGl0ZW1JbmRleCwgMSlcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnb2NjdXBhdGlvbiddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2FyY2hldHlwZS5odG1sJyxcbiAgICAgIHdpZHRoOiA1MjAsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScgfV0sXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG5cbiAgICBjb25zdCBjb3JlQ2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHNlbGVjdGVkXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzXG4gICAgKSkge1xuICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgIGNvbnN0IGNoYXJhY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoYENIQVJBQy4ke2tleS50b1VwcGVyQ2FzZSgpfWApXG4gICAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpY3MucHVzaChjaGFyYWNOYW1lKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZFN1Z2dlc3RlZE9jY3VwYXRpb25zID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnN1Z2dlc3RlZE9jY3VwYXRpb25zLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZFN1Z2dlc3RlZFRyYWl0cyA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5zdWdnZXN0ZWRUcmFpdHMsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscyB9KVxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RFbXB0eSA9IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NTdHJpbmcgPSAnJ1xuICAgIGNvbnN0IG9yU3RyaW5nID0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpfSBgXG4gICAgaWYgKGNvcmVDaGFyYWN0ZXJpc3RpY3MubGVuZ3RoKSB7XG4gICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljc1N0cmluZyArPSBjb3JlQ2hhcmFjdGVyaXN0aWNzLmpvaW4ob3JTdHJpbmcpXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlB1bHBUYWxlbnRzJyl9OiAke3NoZWV0RGF0YS5kYXRhLnN5c3RlbS50YWxlbnRzfWBcbiAgICApXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNQb2ludHMnKX06ICR7c2hlZXREYXRhLmRhdGEuc3lzdGVtLmJvbnVzUG9pbnRzfWBcbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGR1cGxpY2F0ZSwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Qm9va1NoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvYm9vay9tYWluLmh0bWwnLFxuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2l0ZW0nLCAnYm9vayddLFxuICAgICAgd2lkdGg6IDUwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuc3BlbGxzJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgc2Nyb2xsWTogWycuYm9keSddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcubmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLmJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIHNoZWV0RGF0YS5pbml0aWFsUmVhZGluZyA9IHRoaXMuaXRlbS5zeXN0ZW0uaW5pdGlhbFJlYWRpbmdcbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHNoZWV0RGF0YS5pc093bmVyID0gdGhpcy5pdGVtLmlzT3duZXJcbiAgICBzaGVldERhdGEuc3BlbGxzTGVhcm5lZCA9IHRoaXMuc3BlbGxzTGVhcm5lZFxuICAgIHNoZWV0RGF0YS5leGhhdXN0ZWQgPSAoYXdhaXQgdGhpcy5pdGVtLmNoZWNrRXhoYXVzdGlvbigpKSAhPT0gZmFsc2VcbiAgICBzaGVldERhdGEuc3R1ZHlDb21wbGV0ZWQgPSB0aGlzLml0ZW0uc3lzdGVtLnN0dWR5LnByb2dyZXNzID09PSB0aGlzLml0ZW0uc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG4gICAgc2hlZXREYXRhLnNwZWxsTGlzdEVtcHR5ID0gdGhpcy5pdGVtLnN5c3RlbS5zcGVsbHMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWRDb250ZW50ID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNvbnRlbnQsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgZ2V0IHNwZWxsc0xlYXJuZWQgKCkge1xuICAgIGxldCBhbW91bnQgPSAwXG4gICAgY29uc3Qgc3BlbGxzID0gdGhpcy5pdGVtLnN5c3RlbS5zcGVsbHNcbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHNwZWxscykge1xuICAgICAgaWYgKHNwZWxsLnN5c3RlbS5sZWFybmVkKSBhbW91bnQrK1xuICAgIH1cbiAgICByZXR1cm4gYCR7YW1vdW50fSAvICR7c3BlbGxzLmxlbmd0aH1gXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcjYXR0ZW1wdC1pbml0aWFsLXJlYWRpbmcnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICB0aGlzLml0ZW0uYXR0ZW1wdEluaXRpYWxSZWFkaW5nKClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uRGVsZXRlKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5lZGl0LXNwZWxsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25TcGVsbERldGFpbChldmVudCkpXG4gICAgaHRtbC5maW5kKCcuc3BlbGwtbmFtZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxEZXRhaWwoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLnRlYWNoLXNwZWxsJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgY29uc3QgaWQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJ2xpJykuZGF0YSgnaWQnKVxuICAgICAgdGhpcy5pdGVtLmF0dGVtcHRTcGVsbExlYXJuaW5nKGlkKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCdbbmFtZT1cInN5c3RlbS5zdHVkeS5uZWNlc3NhcnlcIl0nKS5jaGFuZ2UoZXZlbnQgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlKVxuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdyZXNldCcsIHZhbHVlKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcjaW5jcmVhc2UtcHJvZ3Jlc3MnKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLml0ZW0uY2hhbmdlUHJvZ3Jlc3MoJ2luY3JlYXNlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI2RlY3JlYXNlLXByb2dyZXNzJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdkZWNyZWFzZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5hZGQtb3RoZXItZ2FpbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAnYWRkJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLmNoYW5nZS1vdGhlci1nYWlucycpLmNoYW5nZShldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAnY2hhbmdlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI3JlZG8tZnVsbC1zdHVkeScpLmNsaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuaXRlbS5yZWRvRnVsbFN0dWR5KClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1vdGhlci1nYWlucycpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMoZXZlbnQsICdyZW1vdmUnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcub3B0aW9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5tb2RpZnlUeXBlKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNwZWxsRGV0YWlsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBlbGVtZW50ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIC8qKiBAc2VlIGRhdGEtaW5kZXggcHJvcGVydHkgb24gdGVtcGxhdGUgKi9cbiAgICBjb25zdCBpbmRleCA9IGVsZW1lbnQucGFyZW50cygnbGknKS5kYXRhKCdpbmRleCcpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS5zcGVsbERldGFpbChpbmRleClcbiAgfVxuXG4gIC8qKlxuICAgKiBJdCBpcyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdXNlciBkZWxldGUgYSBzcGVsbCBvbiB0aGUgc2hlZXRcbiAgICogQHBhcmFtIHtqUXVlcnl9IGV2ZW50IEBzZWUgYWN0aXZhdGVMaXN0ZW5lcnNcbiAgICogQHJldHVybnMge1Byb21pc2UuPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIF9vbkRlbGV0ZSAoZXZlbnQpIHtcbiAgICBpZiAoIWdhbWUudXNlci5pc0dNKSByZXR1cm5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZWxlbWVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAvKiogQHNlZSBkYXRhLWluZGV4IHByb3BlcnR5IG9uIHRlbXBsYXRlICovXG4gICAgY29uc3QgaW5kZXggPSBlbGVtZW50LnBhcmVudHMoJ2xpJykuZGF0YSgnaW5kZXgnKVxuICAgIC8qKiBBbHdheXMgaGFzIHRvIGJlIEB0eXBlIHtBcnJheX0gKi9cbiAgICBjb25zdCBzcGVsbHMgPSB0aGlzLml0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5zcGVsbHMpXG4gICAgICA6IFtdXG4gICAgaWYgKGluZGV4ID49IDApIHNwZWxscy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnNwZWxscyc6IHNwZWxscyB9KVxuICB9XG5cbiAgLyoqXG4gICAqIEl0IGlzIGNhbGxlZCBldmVyeSB0aW1lIHRoZSB1c2VyIGRyYWdzIGFuIGl0ZW0gdG8gdGhlIHNoZWV0XG4gICAqIEZpbHRlcnMgb25seSAnc3BlbGwnIGl0ZW1zIGFuZCBpbnNlcnRzIHRoZW0gaW4gYSBAdHlwZSB7QXJyYXl9XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBfb25Ecm9wIChldmVudCwgdHlwZSA9ICdzcGVsbCcpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLyoqIFByZXZlbnRzIHByb3BhZ2F0aW9uIG9mIHRoZSBzYW1lIGV2ZW50IGZyb20gYmVpbmcgY2FsbGVkICovXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuXG4gICAgY29uc3Qgc3BlbGxzID0gW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcbiAgICAgIGlmICghaXRlbSB8fCAhWydza2lsbCcsICdzcGVsbCddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIGNvbnRpbnVlXG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc3BlbGwnKSB7XG4gICAgICAgIHNwZWxscy5wdXNoKGl0ZW0pXG4gICAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJyAmJiB0aGlzLml0ZW0uc3lzdGVtLnR5cGUub3RoZXIpIHtcbiAgICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhudWxsLCAnYWRkJywgeyBuYW1lOiBpdGVtLm5hbWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5pdGVtLmFkZFNwZWxscyhzcGVsbHMpXG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBjaGVja2JveGVzIGZvciB0eXBlIHdoZW4gdXNlciBjbGlja3Mgb24gdGhlIGNvcnJlc3BvbmRpbmdcbiAgICogbGFiZWwsIG5vdCBzdXJlIGlmIHRoaXMgd29ya3Mgb24gZW5naW5lcyBvdGhlciB0aGFuIFY4XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtqUXVlcnkuRXZlbnR9IGNsaWNrXG4gICAqL1xuICBtb2RpZnlUeXBlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IHRvZ2dsZVN3aXRjaCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICByZXR1cm4gdG9nZ2xlU3dpdGNoLnByZXYoKS50cmlnZ2VyKCdjbGljaycpXG4gIH1cblxuICAvKipcbiAgICogTW9kaWZ5IEl0ZW0gZGF0YSBiYXNlZCBvbiB1c2VyIGludGVyYWN0aW9ucyB3aXRoIHRoZSBvdGhlciBza2lsbFxuICAgKiBnYWlucyB0YWJsZSBvbiBkZXRhaWxzIHRhYiBvbiB0aGlzIHNoZWV0XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtb2RlICdhZGQnIHx8ICdjaGFuZ2UnIHx8ICdyZW1vdmUnXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIG1vZGlmeU90aGVyc0dhaW5zIChldmVudCwgbW9kZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgLyoqIE5vIG5lZWQgdG8gY2hlY2sgaWYgdXNlciBpcyBHTSBiZWNhdXNlIG9ubHkgdGhleSBjYW4gc2VlIGRldGFpbHMgdGFiICovXG4gICAgbGV0IGluZGV4ID0gbnVsbFxuICAgIGxldCBlbGVtZW50ID0gbnVsbFxuICAgIGlmIChldmVudCkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgZWxlbWVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgIC8qKiBAc2VlIGRhdGEtaW5kZXggcHJvcGVydHkgb24gdGVtcGxhdGUgKi9cbiAgICAgIGluZGV4ID0gZWxlbWVudC5wYXJlbnRzKCd0cicpLmRhdGEoJ2luZGV4JylcbiAgICAgIC8qKiBBbHdheXMgaGFzIHRvIGJlIEB0eXBlIHtBcnJheX0gKi9cbiAgICB9XG4gICAgY29uc3Qgc2tpbGxzID0gdGhpcy5pdGVtLnN5c3RlbS5nYWlucy5vdGhlcnNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uZ2FpbnMub3RoZXJzKVxuICAgICAgOiBbXVxuICAgIHN3aXRjaCAobW9kZSkge1xuICAgICAgY2FzZSAnYWRkJzpcbiAgICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBwbHVzIGljb24gdG8gYWRkIGEgbmV3IHNraWxsIG9uIG90aGVyIGdhaW5zIHRhYmxlICovXG4gICAgICAgIHNraWxscy5wdXNoKHtcbiAgICAgICAgICAvKiogbmV3IHNraWxsICovXG4gICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lIHx8IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5OZXdTa2lsbE5hbWUnKSxcbiAgICAgICAgICAvKiogZGV2ZWxvcG1lbnQgYnkgZGVmYXVsdCwgdmFsdWUgY2FuIGFsc28gYmUgMWQ2IG9yIDFkMTAgKi9cbiAgICAgICAgICB2YWx1ZTogJ2RldmVsb3BtZW50J1xuICAgICAgICB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhbmdlJzpcbiAgICAgICAgLyoqIFVzZXIgY2hhbmdlZCBuYW1lIChpbnB1dCkgb3IgdmFsdWUgKHNlbGVjdCkgb2YgYSBza2lsbCBvbiB0YWJsZSAqL1xuICAgICAgICBza2lsbHNbaW5kZXhdID0ge1xuICAgICAgICAgIG5hbWU6IGVsZW1lbnQuaXMoJ2lucHV0JykgPyBlbGVtZW50LnZhbCgpIDogc2tpbGxzW2luZGV4XS5uYW1lLFxuICAgICAgICAgIHZhbHVlOiBlbGVtZW50LmlzKCdzZWxlY3QnKSA/IGVsZW1lbnQudmFsKCkgOiBza2lsbHNbaW5kZXhdLnZhbHVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3JlbW92ZSc6XG4gICAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gbWludXMgaWNvbiB0byByZW1vdmUgYSBza2lsbCBvbiBvdGhlciBnYWlucyB0YWJsZSAqL1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkgc2tpbGxzLnNwbGljZShpbmRleCwgMSlcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmdhaW5zLm90aGVycyc6IHNraWxscyB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3JTaGVldCwgQ09OU1QsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuLi8uLi9hcHBzL2NvYzctbGluay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29udGFpbmVyU2hlZXQgZXh0ZW5kcyBBY3RvclNoZWV0IHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSA1ZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnYWN0b3InLCAnc3RvcmFnZSddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9zdG9yYWdlLXNoZWV0Lmh0bWwnLFxuICAgICAgd2lkdGg6IDY3MixcbiAgICAgIGhlaWdodDogNzY1LFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2l0ZW1zJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5hY3Rvci5pdGVtcy50b09iamVjdCgpIHx8IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uc3lzdGVtKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBpZiAoIVsnYm9vaycsICdpdGVtJywgJ3NwZWxsJywgJ3dlYXBvbiddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIGl0ZW1zLnB1c2goaXRlbS50b09iamVjdCgpKVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZSh7IGl0ZW1zIH0pXG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge31cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBzaGVldERhdGEuZWRpdGFibGUgPSB0aGlzLmlzRWRpdGFibGVcblxuICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSA9IHt9XG4gICAgaWYgKHNoZWV0RGF0YS5pdGVtcykge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHNoZWV0RGF0YS5pdGVtcykge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSxcbiAgICAgICAgICAgIGl0ZW0udHlwZVxuICAgICAgICAgIClcbiAgICAgICAgKSB7XG4gICAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdLnB1c2goaXRlbSlcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgaXRlbVR5cGUgaW4gc2hlZXREYXRhLml0ZW1zQnlUeXBlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtVHlwZV0uc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLmFsbG93VW5sb2NrID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxuICAgICAgZ2FtZS51c2VyLmlzR01cblxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ2l0ZW0nKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdib29rJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3NwZWxsJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICd0YWxlbnQnKSB8fFxuICAgICAgKCFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkICYmXG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlVGFsZW50cycpKVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9ucyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnd2VhcG9uJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG5cbiAgICBzaGVldERhdGEuaGFzSW52ZW50b3J5ID1cbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS1lZGl0JykuY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgbGkgPSAkKGV2LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSlcbiAgICAgIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmludmVudG9yeS1oZWFkZXInKS5jbGljayh0aGlzLl9vbkludmVudG9yeUhlYWRlci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS10cmFkZScpLmNsaWNrKHRoaXMuX29uVHJhZGVJdGVtLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuc2hvdy1kZXRhaWwnKS5jbGljayh0aGlzLl9vbkl0ZW1TdW1tYXJ5LmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGFzeW5jIGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtVG9EZWxldGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSwge1xuICAgICAgICBzdHJpY3Q6IHRydWVcbiAgICAgIH0pXG4gICAgICBhd2FpdCBpdGVtVG9EZWxldGUuZGVsZXRlKClcbiAgICAgIGxpLnNsaWRlVXAoMjAwLCAoKSA9PiB0aGlzLnJlbmRlcihmYWxzZSkpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1pdGVtJykuY2xpY2soZXYgPT4ge1xuICAgICAgc3dpdGNoIChldi5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudHlwZSkge1xuICAgICAgICBjYXNlICdib29rJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5Qm9vayhldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5SXRlbShldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdza2lsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNraWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3NwZWxsJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5U3BlbGwoZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnd2VhcG9uJzpcbiAgICAgICAgICB0aGlzLmFjdG9yLmNyZWF0ZUVtcHR5V2VhcG9uKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmxvY2snKS5jbGljayh0aGlzLl9vbkxvY2tDbGlja2VkLmJpbmQodGhpcykpXG4gIH1cblxuICBhc3luYyBfb25Mb2NrQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXNMb2NrZWQgPSB0aGlzLmFjdG9yLmxvY2tlZFxuICAgIHRoaXMuYWN0b3IubG9ja2VkID0gIWlzTG9ja2VkXG4gIH1cblxuICBhc3luYyBfb25UcmFkZUl0ZW0gKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgbGV0IGNvbnRlbnQgPSAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0VXNlclRvR2l2ZVRvJylcbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgYWN0b3JGcm9tOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgc2NlbmU6IG51bGwsXG4gICAgICBhY3RvclRvOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgaXRlbTogaXRlbS5pZFxuICAgIH1cbiAgICBpZiAodGhpcy50b2tlbj8uYWN0b3IpIHtcbiAgICAgIG1lc3NhZ2UuYWN0b3JGcm9tID0gdGhpcy50b2tlbi5pZFxuICAgICAgbWVzc2FnZS5zY2VuZSA9IHRoaXMudG9rZW4ucGFyZW50LmlkXG4gICAgfVxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihlID0+IHtcbiAgICAgIGlmICghWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKGUudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hY3Rvci5pZCA9PT0gZS5pZCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGxldCB2aXNpYmxlID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUub3duZXJzaGlwKSkge1xuICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnIHx8IGsgPT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICAgIHZpc2libGUgPVxuICAgICAgICAgICAgdmlzaWJsZSB8fFxuICAgICAgICAgICAgdiAhPT0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2aXNpYmxlXG4gICAgfSlcbiAgICBjb250ZW50ID0gY29udGVudCArICc8Zm9ybSBpZD1cInNlbGVjdGZvcm1cIj48c2VsZWN0IG5hbWU9XCJ1c2VyXCI+J1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XG4gICAgICBjb250ZW50ID1cbiAgICAgICAgY29udGVudCArICc8b3B0aW9uIHZhbHVlPVwiJyArIGFjdG9yLmlkICsgJ1wiPicgKyBhY3Rvci5uYW1lICsgJzwvb3B0aW9uPidcbiAgICB9XG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPC9zZWxlY3Q+PC9mb3JtPjwvcD4nXG4gICAgYXdhaXQgRGlhbG9nLnByb21wdCh7XG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1lc3NhZ2VUaXRsZVNlbGVjdFVzZXJUb0dpdmVUbycpLFxuICAgICAgY29udGVudCxcbiAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0Zm9ybScpKVxuICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgZm9ybURhdGEpIHtcbiAgICAgICAgICBpZiAobmFtZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICBtZXNzYWdlLmFjdG9yVG8gPSB2YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgYXdhaXQgZ2FtZS5Db0M3c29ja2V0LmV4ZWN1dGVBc0dNKCdnbXRyYWRlaXRlbXRvJywgbWVzc2FnZSlcbiAgfVxuXG4gIF9vbkl0ZW1TdW1tYXJ5IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtLWlkJykpXG4gICAgY29uc3QgY2hhdERhdGEgPSBpdGVtLmdldENoYXREYXRhKHsgc2VjcmV0czogdGhpcy5hY3Rvci5pc093bmVyIH0pXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj48L2Rpdj4nKVxuXG4gICAgICBjb25zdCBsYWJlbHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbHNcIj48L2Rpdj4nKVxuICAgICAgZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLmxhYmVscykge1xuICAgICAgICBsYWJlbHMuYXBwZW5kKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaXRlbS1sYWJlbFwiPjxzcGFuIGNsYXNzPVwibGFiZWwtbmFtZVwiPiR7cC5uYW1lfSA6PC9zcGFuPjxzcGFuIGNsYXNzPVwibGFiZWwtdmFsdWVcIj4ke3AudmFsdWV9PC9zcGFuPjwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZGl2LmFwcGVuZChsYWJlbHMpXG5cbiAgICAgIGRpdi5hcHBlbmQoXG4gICAgICAgICQoYDxkaXYgY2xhc3M9XCJpdGVtLWRlc2NyaXB0aW9uXCI+JHtjaGF0RGF0YS5kZXNjcmlwdGlvbi52YWx1ZX08L2Rpdj5gKVxuICAgICAgKVxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwY2wpIHtcbiAgICAgICAgY29uc3Qgc3BlY2lhbERpdiA9ICQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLXNwZWNpYWxcIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWx9PC9kaXY+YFxuICAgICAgICApXG4gICAgICAgIGRpdi5hcHBlbmQoc3BlY2lhbERpdilcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHByb3BzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cInRhZyBpdGVtLXByb3BlcnR5XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUocCl9PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIENvQzdMaW5rLmJpbmRFdmVudHNIYW5kbGVyKGRpdilcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxuICAgIH1cbiAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICAgIC8vICQoZXZlbnQuY3VycmVudFRhcmdldCkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJyk7XG4gIH1cblxuICBfb25JbnZlbnRvcnlIZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICQoZXZlbnQuY3VycmVudFRhcmdldCkuc2libGluZ3MoJ2xpJykuc2xpZGVUb2dnbGUoMjAwKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRHJhZ0Ryb3AsIEZvcm1BcHBsaWNhdGlvbiwgZm91bmRyeSwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBfcGFydGljaXBhbnQgfSBmcm9tICcuLi9pdGVtcy9jaGFzZS9wYXJ0aWNpcGFudC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWRkQWN0b3JUb0NoYXNlJyksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlci5odG1sJyxcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY2hhc2UtcGFydGljaXBhbnQtaW1wb3J0ZXInXSxcbiAgICAgIGVkaXRhYmxlOiB0cnVlLFxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiB0cnVlLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICB3aWR0aDogMzAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgY29uc3QgcGFydGljaXBhbnREcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcm9wU2VsZWN0b3I6ICcuZm9ybS1jb250YWluZXInLFxuICAgICAgcGVybWlzc2lvbnM6IHsgZHJvcDogZ2FtZS51c2VyLmlzR00gfSxcbiAgICAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkRyb3BQYXJ0aWNpcGFudC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIHBhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgaHRtbC5maW5kKCcucmVzZXQtcGFydGljaXBhbnQnKS5jbGljayhhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLm9iamVjdCA9IHt9XG4gICAgICB0aGlzLl9hY3RvciA9IG51bGxcbiAgICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmZvb2QtY2hhaW4nKS5jbGljayhhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLm9iamVjdC5jaGFzZXIgPSAhdGhpcy5vYmplY3QuY2hhc2VyXG4gICAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJ1tkYXRhLWFjdGlvbl0nKS5jbGljayh0aGlzLl9vbkFjdGlvbi5iaW5kKHRoaXMpKVxuXG4gICAgLy8gaHRtbC5maW5kKCdidXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgaWYgKCF0aGlzLm9iamVjdC5pbml0aWF0aXZlKSB7XG4gICAgICBjb25zdCBpbml0ID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZmluZChcbiAgICAgICAgYyA9PiBjLmtleSA9PT0gJ2RleCdcbiAgICAgIClcbiAgICAgIHRoaXMub2JqZWN0LmluaXRpYXRpdmUgPSBpbml0LmxhYmVsXG4gICAgICAvLyB0aGlzLm9iamVjdC5pbml0aWF0aXZlID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgLy8gICAnQ29DNy5DaGFyYWN0ZXJpc3RpY3MnXG4gICAgICAvLyApfSAoJHtpbml0LnNob3J0TmFtZX0pYFxuICAgIH1cbiAgICBpZiAoIXRoaXMub2JqZWN0LnNwZWVkQ2hlY2spIHtcbiAgICAgIGNvbnN0IHNwZWVkQ2hlY2sgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5maW5kKFxuICAgICAgICBjID0+IGMua2V5ID09PSAnY29uJ1xuICAgICAgKVxuICAgICAgdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHtcbiAgICAgICAgbmFtZTogc3BlZWRDaGVjay5sYWJlbFxuICAgICAgfVxuICAgICAgLy8gdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHtcbiAgICAgIC8vICAgbmFtZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoYXJhY3RlcmlzdGljcycpfSAoJHtcbiAgICAgIC8vICAgICBzcGVlZENoZWNrLnNob3J0TmFtZVxuICAgICAgLy8gICB9KWBcbiAgICAgIC8vIH1cbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlUGFydGljaXBhbnQoKVxuXG4gICAgLy8gY29uc3Qgc3BlZWRDaGVjayA9IHRoaXMuYWN0b3I/LmZpbmQoIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2s/Lm5hbWUpXG4gICAgLy8gaWYoIHNwZWVkQ2hlY2spe1xuICAgIC8vICAgdGhpcy5vYmplY3Quc3BlZWRDaGVjayA9IHNwZWVkQ2hlY2tcbiAgICAvLyB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBkYXRhLnBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcbiAgICBpZiAoZGF0YS5vYmplY3Quc3BlZWRDaGVjay5uYW1lICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGNvbnN0IHNwZWVkQ2hlY2sgPSB0aGlzLmFjdG9yLmZpbmQoZGF0YS5vYmplY3Quc3BlZWRDaGVjay5uYW1lKVxuICAgICAgaWYgKHNwZWVkQ2hlY2spIHtcbiAgICAgICAgZGF0YS5vYmplY3Quc3BlZWRDaGVjay5zY29yZSA9IHNwZWVkQ2hlY2sudmFsdWUudmFsdWVcbiAgICAgICAgZGF0YS5zcGVlZENoZWNrUmVhZE9ubHkgPSB0cnVlXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICBkYXRhLnBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUgJiZcbiAgICAgICAgIXRoaXMub2JqZWN0LnNwZWVkQ2hlY2s/LnNjb3JlXG4gICAgICApIHtcbiAgICAgICAgZGF0YS5vYmplY3Quc3BlZWRDaGVjay5zY29yZSA9IGRhdGEucGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkYXRhLm9iamVjdC5pbml0aWF0aXZlICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIGNvbnN0IGluaXRpYXRpdmUgPSB0aGlzLmFjdG9yLmZpbmQoZGF0YS5vYmplY3QuaW5pdGlhdGl2ZSlcbiAgICAgIGlmIChpbml0aWF0aXZlKSB7XG4gICAgICAgIGRhdGEub2JqZWN0LmRleCA9IGluaXRpYXRpdmUudmFsdWUudmFsdWVcbiAgICAgICAgZGF0YS5pbml0UmVhZE9ubHkgPSB0cnVlXG4gICAgICB9IGVsc2UgZGF0YS5vYmplY3QuZGV4ID0gZGF0YS5wYXJ0aWNpcGFudC5pbml0aWF0aXZlXG4gICAgfVxuXG4gICAgZGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcbiAgICBkYXRhLmNoYXNlID0gdGhpcy5jaGFzZVxuICAgIGRhdGEuZGF0YSA9IHRoaXMuZGF0YVxuXG4gICAgZGF0YS5vcHRpb25zTGlzdCA9IHt9XG4gICAgaWYgKHRoaXMuY2hhc2UpIHtcbiAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdCA9XG4gICAgICAgIHRoaXMuY2hhc2UuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzU2hvcnRcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0ID0gW11cbiAgICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PlxuICAgICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChgJHtjLmxhYmVsfWApXG4gICAgICApXG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKX1gXG4gICAgICApXG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChcbiAgICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpfWBcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PlxuICAgICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QucHVzaChzLm5hbWUpXG4gICAgICApXG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGdldCBjaGFzZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9jaGFzZSkge1xuICAgICAgdGhpcy5fY2hhc2UgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZCh0aGlzLm9iamVjdC5jaGFzZVV1aWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jaGFzZVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICBpZiAoIXRoaXMub2JqZWN0LmRvY1V1aWQpIHJldHVybiBudWxsXG4gICAgaWYgKCF0aGlzLl9hY3Rvcikge1xuICAgICAgdGhpcy5fYWN0b3IgPSBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRnJvbUtleSh0aGlzLm9iamVjdC5kb2NVdWlkKVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYWN0b3JcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcywgZm9ybURhdGEpXG4gICAgYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3BQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCBkcm9wU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRyb3BEYXRhID0gSlNPTi5wYXJzZShkcm9wU3RyaW5nKVxuXG4gICAgY29uc3QgZG9jVXVpZCA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YShkcm9wRGF0YSlcblxuICAgIHRoaXMub2JqZWN0LmRvY1V1aWQgPSBkb2NVdWlkXG5cbiAgICAvLyBJZiBhY3RvciBpcyBjb250cm9sbGVkIGJ5IEdNIG9ubHkgd2UgYXNzdW1lIGhlIGlzIGEgY2hhc2VyXG4gICAgdGhpcy5vYmplY3QuY2hhc2VyID0gdGhpcy5hY3Rvcj8ub3duZXJzPy5maWx0ZXIodSA9PiAhdS5pc0dNKS5sZW5ndGggPT09IDBcbiAgICBpZiAodGhpcy5vYmplY3Quc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZykge1xuICAgICAgZGVsZXRlIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uQWN0aW9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGFjdGlvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAnY2hhc2UtY2FuY2VsJzpcbiAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjaGFzZS1hZGQnOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMub2JqZWN0KVxuXG4gICAgICAgICAgaWYgKHRoaXMuY2hhc2Uuc3RhcnRlZCkge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAhKHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uICYmIHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uID4gMClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRvZXNOb3RNZWV0TWluaW11bVJlcVRvQmVBZGRlZCcpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhLm92ZXJyaWRlTW92ZW1lbnRBY3Rpb24pIHtcbiAgICAgICAgICAgICAgY29uc3Qgc2xvd2VzdCA9IHRoaXMuY2hhc2Uuc2xvd2VzdFBhcnRpY2lwYW50XG4gICAgICAgICAgICAgIGlmIChpc05hTihwYXJ0aWNpcGFudC5hZGp1c3RlZE1vdikpIHtcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5tb3YgPSBzbG93ZXN0LmFkanVzdGVkTW92XG4gICAgICAgICAgICAgIH0gLyoqIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEubW92ID1cbiAgICAgICAgICAgICAgICAgIHNsb3dlc3QuYWRqdXN0ZWRNb3YgKyBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbiAtIDFcbiAgICAgICAgICAgICAgfSAqL1xuICAgICAgICAgICAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYXdhaXQgdGhpcy5jaGFzZS5hZGRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudCwge1xuICAgICAgICAgICAgbG9jYXRpb25VdWlkOiB0aGlzLm9iamVjdC5sb2NhdGlvblV1aWQsXG4gICAgICAgICAgICByZWNhbGN1bGF0ZU1vdmVtZW50QWN0aW9uczogdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQsXG4gICAgICAgICAgICB1cGRhdGU6IHRoaXMub2JqZWN0LnVwZGF0ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncm9sbC1zcGVlZC1jaGVjayc6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5vYmplY3QpXG4gICAgICAgICAgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmU2V0KSB7XG4gICAgICAgICAgICBjb25zdCByb2xsID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgICAgICAgIHJvbGwuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNDaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGxDaGFyYWN0ZXJpc3RpYyhwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZi5rZXkpXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc1NraWxsKSB7XG4gICAgICAgICAgICAgIHJvbGwuc2tpbGwgPSBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlxuICAgICAgICAgICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsQXR0cmlidXRlKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmLmtleSlcbiAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSkge1xuICAgICAgICAgICAgY29uc3Qgcm9sbERhdGEgPSB7XG4gICAgICAgICAgICAgIHJhd1ZhbHVlOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlLFxuICAgICAgICAgICAgICBkaXNwbGF5TmFtZTogcGFydGljaXBhbnQuc3BlZWRDaGVjay5uYW1lLFxuICAgICAgICAgICAgICBhY3Rvck5hbWU6IHBhcnRpY2lwYW50Lm5hbWUgPyBwYXJ0aWNpcGFudC5uYW1lIDogdW5kZWZpbmVkXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGFydGljaXBhbnQuaGFzQWN0b3IpIHtcbiAgICAgICAgICAgICAgcm9sbERhdGEuYWN0b3IgPSBwYXJ0aWNpcGFudC5hY3Rvci5hY3RvcktleVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5jcmVhdGUocm9sbERhdGEpXG4gICAgICAgICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsZWQgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0aGlzLm9iamVjdCwgcGFydGljaXBhbnQuZGF0YSlcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICB2YWxpZGF0ZVBhcnRpY2lwYW50ICgpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5vYmplY3QpXG4gICAgaWYgKCF0aGlzLmRhdGEpIHRoaXMuZGF0YSA9IHt9XG4gICAgdGhpcy5vYmplY3QuZXhjbHVkZWQgPSBmYWxzZVxuICAgIHRoaXMub2JqZWN0LmVzY2FwZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEucGFydGljaXBhbnRFeGNsdWRlZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uRGVsdGEgPSAwXG5cbiAgICBpZiAoIXRoaXMuZGF0YS5vdmVycmlkZU1vdmVtZW50QWN0aW9uKSB7XG4gICAgICBjb25zdCBzbG93ZXN0UHJleSA9IHRoaXMuY2hhc2Uuc2xvd2VzdFByZXlcbiAgICAgIGNvbnN0IGZhc3Rlc3RDaGFzZXIgPSB0aGlzLmNoYXNlLmZhc3Rlc3RDaGFzZXJcbiAgICAgIGNvbnN0IHNsb3dlc3QgPSB0aGlzLmNoYXNlLnNsb3dlc3RQYXJ0aWNpcGFudFxuXG4gICAgICBpZiAocGFydGljaXBhbnQuYWRqdXN0ZWRNb3YgPCBzbG93ZXN0Py5hZGp1c3RlZE1vdikge1xuICAgICAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IHRydWVcbiAgICAgICAgcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gPSAxXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IGZhbHNlXG4gICAgICAgIHBhcnRpY2lwYW50LmNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyhzbG93ZXN0Py5hZGp1c3RlZE1vdilcbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5pc0NoYXNlcikge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgc2xvd2VzdFByZXkgJiZcbiAgICAgICAgICAhdGhpcy5jaGFzZS5kYXRhLmRhdGEuaW5jbHVkZUxhc3RDb21tZXJzICYmXG4gICAgICAgICAgcGFydGljaXBhbnQuYWRqdXN0ZWRNb3YgPCBzbG93ZXN0UHJleS5hZGp1c3RlZE1vdlxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5leGNsdWRlZCA9IHRydWVcbiAgICAgICAgICB0aGlzLmRhdGEucGFydGljaXBhbnRFeGNsdWRlZCA9IHRydWVcbiAgICAgICAgICB0aGlzLmRhdGEuZXhjbHVkZWRCZWNhdXNlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb1Nsb3cnKVxuICAgICAgICAgIHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocGFydGljaXBhbnQuaXNQcmV5KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBmYXN0ZXN0Q2hhc2VyICYmXG4gICAgICAgICAgIXRoaXMuY2hhc2UuZGF0YS5kYXRhLmluY2x1ZGVFc2NhcGVkICYmXG4gICAgICAgICAgcGFydGljaXBhbnQuYWRqdXN0ZWRNb3YgPiBmYXN0ZXN0Q2hhc2VyLmFkanVzdGVkTW92XG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmVzY2FwZWQgPSB0cnVlXG4gICAgICAgICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50RXhjbHVkZWQgPSB0cnVlXG4gICAgICAgICAgdGhpcy5kYXRhLmV4Y2x1ZGVkQmVjYXVzZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29GYXN0JylcbiAgICAgICAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgaWYgKGRhdGEuZHJvcERhdGEpIHtcbiAgICAgIGNvbnN0IGRvY1V1aWQgPSBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRG9jdW1lbnRGcm9tRHJvcERhdGEoZGF0YS5kcm9wRGF0YSlcbiAgICAgIGlmIChkb2NVdWlkKSBkYXRhLmRvY1V1aWQgPSBkb2NVdWlkXG4gICAgICBkZWxldGUgZGF0YS5kcm9wRGF0YVxuICAgIH1cbiAgICByZXR1cm4gbmV3IENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIoZGF0YSkucmVuZGVyKHRydWUpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBEaWFsb2csIERyYWdEcm9wLCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZmxhdHRlbk9iamVjdCwgRm9ybURhdGFFeHRlbmRlZCwgZm91bmRyeSwgZ2FtZSwgZ2V0VHlwZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciwgdWkgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyIH0gZnJvbSAnLi4vLi4vYXBwcy9jaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlci5qcydcbmltcG9ydCB7IENvQzdDaGF0IH0gZnJvbSAnLi4vLi4vY2hhdC5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgX3BhcnRpY2lwYW50IH0gZnJvbSAnLi9wYXJ0aWNpcGFudC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGFzZVNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdpdGVtJywgJ2NoYXNlJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvY2hhc2UuaHRtbCcsXG4gICAgICB3aWR0aDogNTUwLFxuICAgICAgaGVpZ2h0OiA1MDAsXG4gICAgICByZXNpemFibGU6IHRydWUsXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXYnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAncGFydGljaXBhbnRzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcblxuICAgIHJldHVybiBvcHRpb25zXG5cbiAgICAvLyBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAvLyBzdWJtaXRPbkNsb3NlOiB0cnVlLFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBzdGF0aWMgZ2V0IHR5cGUgKCkge1xuICAgIHJldHVybiAnY29jN0NoYXNlU2hlZXQnXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGdldERhdGEgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEob3B0aW9ucylcblxuICAgIHNoZWV0RGF0YS5wYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0ucGFydGljaXBhbnRzT2JqZWN0XG4gICAgc2hlZXREYXRhLnBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZSA9IHRoaXMuaXRlbS5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmVcbiAgICBzaGVldERhdGEucHJleXMgPSB0aGlzLml0ZW0ucHJleXNcbiAgICBzaGVldERhdGEuY2hhc2VycyA9IHRoaXMuaXRlbS5jaGFzZXJzXG5cbiAgICBzaGVldERhdGEucHJleXNNaW5Nb3YgPSBzaGVldERhdGEucHJleXMubGVuZ3RoID8gc2hlZXREYXRhLnByZXlzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gcHJldi5hZGp1c3RlZE1vdiA8IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudCkuYWRqdXN0ZWRNb3YgOiAtMVxuXG4gICAgc2hlZXREYXRhLnByZXlzTWF4TW92ID0gc2hlZXREYXRhLnByZXlzLmxlbmd0aCA/IHNoZWV0RGF0YS5wcmV5cy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHByZXYuYWRqdXN0ZWRNb3YgPiBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnQpLmFkanVzdGVkTW92IDogLTFcblxuICAgIHNoZWV0RGF0YS5jaGFzZXJzTWluTW92ID0gc2hlZXREYXRhLmNoYXNlcnMubGVuZ3RoID8gc2hlZXREYXRhLmNoYXNlcnMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92IDwgY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXG5cbiAgICBzaGVldERhdGEuY2hhc2Vyc01heE1vdiA9IHNoZWV0RGF0YS5jaGFzZXJzLmxlbmd0aCA/IHNoZWV0RGF0YS5jaGFzZXJzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gcHJldi5hZGp1c3RlZE1vdiA+IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudCkuYWRqdXN0ZWRNb3YgOiAtMVxuXG4gICAgc2hlZXREYXRhLmNoYXNlcnMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFkanVzdGVkTW92IDwgc2hlZXREYXRhLnByZXlzTWluTW92KSB7XG4gICAgICAgIHAudG9vU2xvdygpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwLmluY2x1ZGVJbkNoYXNlKClcbiAgICAgIH1cbiAgICAgIHAuZmFzdGVzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5jaGFzZXJzTWF4TW92XG4gICAgICBwLnNsb3dlc3QgPSBwLmFkanVzdGVkTW92ID09PSBzaGVldERhdGEuY2hhc2Vyc01pbk1vdlxuICAgIH0pXG5cbiAgICBzaGVldERhdGEucHJleXMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFkanVzdGVkTW92ID4gc2hlZXREYXRhLmNoYXNlcnNNYXhNb3YpIHtcbiAgICAgICAgcC5lc2NhcGVkKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHAuaW5jbHVkZUluQ2hhc2UoKVxuICAgICAgfVxuICAgICAgcC5mYXN0ZXN0ID0gcC5hZGp1c3RlZE1vdiA9PT0gc2hlZXREYXRhLnByZXlzTWF4TW92XG4gICAgICBwLnNsb3dlc3QgPSBwLmFkanVzdGVkTW92ID09PSBzaGVldERhdGEucHJleXNNaW5Nb3ZcbiAgICB9KVxuXG4gICAgc2hlZXREYXRhLmxvY2F0aW9ucyA9IHRoaXMuaXRlbS5sb2NhdGlvbnNcbiAgICBzaGVldERhdGEuYWxsSGF2ZVZhbGlkTW92ID0gdGhpcy5hbGxIYXZlVmFsaWRNb3ZcbiAgICBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24gPSB0aGlzLml0ZW0uYWN0aXZlTG9jYXRpb25cbiAgICBpZiAoc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uKSB7XG4gICAgICBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24udGl0bGUgPSBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24uY29vcmRpbmF0ZXNcbiAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkxvY2F0aW9uQ29vcmRpbmF0ZScsIHtcbiAgICAgICAgICB4OiBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24uY29vcmRpbmF0ZXMueCxcbiAgICAgICAgICB5OiBzaGVldERhdGEuYWN0aXZlTG9jYXRpb24uY29vcmRpbmF0ZXMueVxuICAgICAgICB9KVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EcmFnT25DYW52YXMnKVxuICAgIH1cbiAgICBzaGVldERhdGEucHJldmlvdXNMb2NhdGlvbiA9IHRoaXMuaXRlbS5wcmV2aW91c0xvY2F0aW9uXG4gICAgc2hlZXREYXRhLm5leHRMb2NhdGlvbiA9IHRoaXMuaXRlbS5uZXh0TG9jYXRpb25cbiAgICBzaGVldERhdGEuc3RhcnRlZCA9IHRoaXMuaXRlbS5zdGFydGVkXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIC8vIGdldCBhY3RpdmVQYXJ0aWNpcGFudCAoKSB7XG4gIC8vICAgaWYgKCF0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cykgcmV0dXJuIHVuZGVmaW5lZFxuICAvLyAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IHAuYWN0aXZlKVxuICAvLyAgIGlmICghcGFydGljaXBhbnQpIHJldHVybiB1bmRlZmluZWRcbiAgLy8gICByZXR1cm4gbmV3IF9wYXJ0aWNpcGFudChwYXJ0aWNpcGFudClcbiAgLy8gfVxuXG4gIC8vIGdldCBhY3RpdmVQYXJ0aWNpcGFudExvY2F0aW9uICgpIHtcbiAgLy8gICBpZiAoIXRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKSByZXR1cm4gdW5kZWZpbmVkXG4gIC8vICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gcC5hY3RpdmUpXG4gIC8vIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIC8vIGh0bWwuZmluZCgnLmNoYXNlLXRyYWNrJykucmVhZHkoYXN5bmMgaHRtbCA9PiBhd2FpdCB0aGlzLl9vblNoZWV0UmVhZHkoaHRtbCkpXG5cbiAgICAvLyBIYW5kbGUgRHJvcHJvd25cbiAgICBodG1sXG4gICAgICAuZmluZCgnLmRyb3Bkb3duLWVsZW1lbnQnKVxuICAgICAgLm9uKCdjbGljaycsIGV2ZW50ID0+IHRoaXMuX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcuZHJvcGJ0bicpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBjb25zdCBkcm9wZG93biA9IHRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24nKVxuICAgICAgY29uc3QgZHJvcGRvd25Db250ZW50ID0gZHJvcGRvd24ucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKVxuICAgICAgZHJvcGRvd25Db250ZW50LmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKVxuICAgIH0pXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5kcm9wZG93bicpXG4gICAgICAubW91c2VsZWF2ZShldmVudCA9PlxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JylcbiAgICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpXG4gICAgICApXG5cbiAgICBodG1sLm9uKCdkYmxjbGljaycsICcub3Blbi1hY3RvcicsIENvQzdDaGF0Ll9vbk9wZW5BY3Rvci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5waW4tbG9jYXRpb24nKVxuICAgICAgLmNvbnRleHRtZW51KHRoaXMuY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ2VudGVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdvdmVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdsZWF2ZScsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcm9wJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnTGVhdmVQYXJ0aWNpcGFudChldmVudCkpXG5cbiAgICBodG1sLmZpbmQoJy5wLXNpZGUnKS5jbGljayh0aGlzLl9vbkNoYW5nZVNpZGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWxldGUtcGFydGljaXBhbnQnKS5jbGljayh0aGlzLl9vbkRlbGV0ZVBhcnRpY2lwYW50LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcucmVzZXQtcm9sbCcpLmNsaWNrKHRoaXMuX29uUmVzZXRSb2xsLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLWRyaXZlcicpLmNsaWNrKHRoaXMuX29uRGVsZXRlRHJpdmVyLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdlbnRlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJhZ292ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdsZWF2ZScsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubmV3LXBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJvcCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcuYWRkLXNpZ24nKS5jbGljayh0aGlzLl9vbkFkZFBhcnRpY2lwYW50LmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5yb2xsLXBhcnRpY2lwYW50JykuY2xpY2sodGhpcy5fb25Sb2xsUGFydGljaXBhbnQuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLmJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQnV0dG9uQ2xpY2suYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLm5hbWUtY29udGFpbmVyJykuY2xpY2sodGhpcy5fb25Mb2NhdGlvbkNsaWNrLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5vYnN0YWNsZS10eXBlJykuY2xpY2sodGhpcy5fb25PYnN0YWNsZVR5cGVDbGljay5iaW5kKHRoaXMpKVxuICAgIC8vIGh0bWwuZmluZCgnLm9ic3RhY2xlLXRvZ2dsZScpLmNsaWNrKHRoaXMuX29uT2JzdGFjbGVUb2dnbGVDbGljay5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZScpLmNsaWNrKHRoaXMuX29uVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudC1jb250cm9sJylcbiAgICAgIC5jbGljayh0aGlzLl9vblBhcnRpY2lwYW50Q29udHJvbENsaWNrZWQuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLmNoYXNlLWNvbnRyb2wnKS5jbGljayh0aGlzLl9vbkNoYXNlQ29udHJvbENsaWNrZWQuYmluZCh0aGlzKSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcubG9jYXRpb24tY29udHJvbCcpXG4gICAgICAuY2xpY2sodGhpcy5fb25Mb2NhdGlvbkNvbnRyb2xDbGljay5iaW5kKHRoaXMpKVxuICAgIC8vIGh0bWxcbiAgICAvLyAgIC5maW5kKCcubW92ZW1lbnQtYWN0aW9uIC5kZWNyZWFzZScpXG4gICAgLy8gICAuY2xpY2sodGhpcy5fb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMuYmluZCh0aGlzLCAtMSkpXG4gICAgLy8gaHRtbFxuICAgIC8vICAgLmZpbmQoJy5tb3ZlbWVudC1hY3Rpb24gLmluY3JlYXNlJylcbiAgICAvLyAgIC5jbGljayh0aGlzLl9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucy5iaW5kKHRoaXMsIDEpKVxuXG4gICAgLy8gaHRtbFxuICAgIC8vIC5maW5kKCcucGluLWxvY2F0aW9uJylcbiAgICAvLyAub24oJ2RyYWdzdGFydCcsIGV2ZW50ID0+IHRoaXMuX29uUGluTG9jYXRpb25EcmFnU3RhcnQoZXZlbnQpKVxuXG4gICAgY29uc3QgcGluTG9jYXRpb25TZWxlY3RvckRyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyYWdTZWxlY3RvcjogJy5waW4tbG9jYXRpb24nLFxuICAgICAgcGVybWlzc2lvbnM6IHtcbiAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9jYW5QaW5Mb2NhdGlvbkRyYWdTdGFydC5iaW5kKHRoaXMpXG4gICAgICB9LFxuICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgIGRyYWdzdGFydDogdGhpcy5fb25QaW5Mb2NhdGlvbkRyYWdTdGFydC5iaW5kKHRoaXMpXG4gICAgICB9XG4gICAgfSlcbiAgICBwaW5Mb2NhdGlvblNlbGVjdG9yRHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgY29uc3QgcGFydGljaXBhbnREcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcm9wU2VsZWN0b3I6ICcucGFydGljaXBhbnQnLFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uRHJvcFBhcnRpY2lwYW50LmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgcGFydGljaXBhbnREcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBjb25zdCBuZXdQYXJ0aWNpcGFudERyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5uZXctcGFydGljaXBhbnQnLFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uQWRkUGFydGljaXBhbnQuYmluZCh0aGlzKSB9XG4gICAgfSlcbiAgICBuZXdQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGlmICh0aGlzLml0ZW0uc3RhcnRlZCkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXNlLWxvY2F0aW9uIC5jaGFzZS1wYXJ0aWNpcGFudCcpXG4gICAgICAgIC5jbGljayh0aGlzLl9vbkNoYXNlUGFydGljaXBhbnRDbGljay5iaW5kKHRoaXMpKVxuXG4gICAgICBjb25zdCBjaGFzZVBhcnRpY2lwYW50RHJhZ3BEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgICAgZHJhZ1NlbGVjdG9yOiAnLmNoYXNlLXBhcnRpY2lwYW50JyxcbiAgICAgICAgZHJvcFNlbGVjdG9yOiAnLmNoYXNlLWxvY2F0aW9uJyxcbiAgICAgICAgcGVybWlzc2lvbnM6IHtcbiAgICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX2NhbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQuYmluZCh0aGlzKSxcbiAgICAgICAgICBkcm9wOiB0aGlzLl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZCh0aGlzKVxuICAgICAgICB9LFxuICAgICAgICBjYWxsYmFja3M6IHtcbiAgICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydC5iaW5kKHRoaXMpLFxuICAgICAgICAgIGRyb3A6IHRoaXMuX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQodGhpcyksXG4gICAgICAgICAgZHJhZ292ZXI6IHRoaXMuX29uRHJhZ0VudGVyLmJpbmQodGhpcylcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGNoYXNlUGFydGljaXBhbnREcmFncERyb3AuYmluZChodG1sWzBdKVxuXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuY2hhc2UtbG9jYXRpb24nKVxuICAgICAgICAub24oJ2RyYWdsZWF2ZScsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlKGV2ZW50KSlcbiAgICB9XG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgRm9ybSBTdWJtaXNzaW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgX2dldFN1Ym1pdERhdGEgKHVwZGF0ZURhdGEgPSB7fSkge1xuICAgIC8vIENyZWF0ZSB0aGUgZXhwYW5kZWQgdXBkYXRlIGRhdGEgb2JqZWN0XG4gICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZCh0aGlzLmZvcm0sIHsgZWRpdG9yczogdGhpcy5lZGl0b3JzIH0pXG4gICAgbGV0IGRhdGEgPSBmZC5vYmplY3RcbiAgICBpZiAodXBkYXRlRGF0YSkge1xuICAgICAgZGF0YSA9IG1lcmdlT2JqZWN0KGRhdGEsIHVwZGF0ZURhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSBleHBhbmRPYmplY3QoZGF0YSlcbiAgICB9XG5cbiAgICAvLyBDaGVjayB0aGF0IHN0YXJ0aW5nIHBvc2l0aW9uIGlzIG5vdCBvdXRzaWRlIG9mIGNoYXNlIHJhbmdlLlxuICAgIGlmIChcbiAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zPy5saXN0Py5sZW5ndGggJiZcbiAgICAgIGRhdGEuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPiB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgICkge1xuICAgICAgZGF0YS5zeXN0ZW0uc3RhcnRpbmdJbmRleCA9IHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgfVxuXG4gICAgaWYgKGRhdGEuc3lzdGVtLnBhcnRpY2lwYW50cykge1xuICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgLy8gSGFuZGxlIHBhcnRpY2lwYW50cyBhcnJheVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5zeXN0ZW0ucGFydGljaXBhbnRzKSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHBhcnRpY2lwYW50cy5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IGspXG4gICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ1BhcnRpY2lwYW50IHRhYmxlIGNvcnJ1cHRlZCcpXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9yaWdpbmFsID0gcGFydGljaXBhbnRzW2luZGV4XVxuICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbih2KVxuICAgICAgICAgIG1lcmdlT2JqZWN0KG9yaWdpbmFsLCBjbGVhbmVkKVxuICAgICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0gPSBvcmlnaW5hbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRhdGEuc3lzdGVtLnBhcnRpY2lwYW50cyA9IHBhcnRpY2lwYW50c1xuICAgIH1cblxuICAgIGlmIChkYXRhLmxvY2F0aW9ucykge1xuICAgICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICAvLyBIYW5kbGUgbG9jYXRpb25zIGxpc3RcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEubG9jYXRpb25zKSkge1xuICAgICAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwudXVpZCA9PT0ga2V5KVxuICAgICAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdMb2NhdGlvbnMgdGFibGUgY29ycnVwdGVkJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbExvY2F0aW9uID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdXG4gICAgICAgICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuKHZhbHVlKVxuICAgICAgICAgIG1lcmdlT2JqZWN0KG9yaWdpbmFsTG9jYXRpb24sIGNsZWFuZWQpXG4gICAgICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdID0gb3JpZ2luYWxMb2NhdGlvblxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGRlbGV0ZSBkYXRhLmxvY2F0aW9uc1xuICAgICAgZGF0YS5zeXN0ZW0ubG9jYXRpb25zID0geyBsaXN0OiBsb2NhdGlvbnMgfVxuICAgIH1cbiAgICAvLyBjb25zdCBwYXJ0aWNpcGFudHMgPSBkYXRhLnN5c3RlbT8ucGFydGljaXBhbnRzO1xuICAgIC8vIGlmKCBwYXJ0aWNpcGFudHMpIGRhdGEuc3lzdGVtLnBhcnRpY2lwYW50cyA9IE9iamVjdC52YWx1ZXMoIHBhcnRpY2lwYW50cykubWFwKCBwID0+IGNsZWFuKHApKTtcblxuICAgIC8vIFJldHVybiB0aGUgZmxhdHRlbmVkIHN1Ym1pc3Npb24gZGF0YVxuICAgIHJldHVybiBmbGF0dGVuT2JqZWN0KGRhdGEpXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIC8vIGFzeW5jIF9vblN1Ym1pdCguLi5hcmdzKSB7XG4gIC8vICBhd2FpdCBzdXBlci5fb25TdWJtaXQoLi4uYXJncyk7XG4gIC8vIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3Qgb3ZlcnJpZGUgPSB0YXJnZXQ/LmRhdGFzZXQ/Lm92ZXJyaWRlID09PSAndHJ1ZSdcbiAgICBpZiAodGFyZ2V0Py5uYW1lPy5pbmNsdWRlcygnLmhwJykpIHtcbiAgICAgIGNvbnN0IFssICwgdXVpZF0gPSB0YXJnZXQubmFtZS5zcGxpdCgnLicpXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5nZXRQYXJ0aWNpcGFudCh1dWlkKVxuICAgICAgaWYgKHBhcnRpY2lwYW50ICYmIHBhcnRpY2lwYW50LmFjdG9yKSB7XG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRhcmdldC52YWx1ZSkpKSB7XG4gICAgICAgICAgYXdhaXQgcGFydGljaXBhbnQuYWN0b3Iuc2V0SHAoTnVtYmVyKHRhcmdldC52YWx1ZSkpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG92ZXJyaWRlKSB7XG4gICAgICBjb25zdCBbLCB0eXBlLCB1dWlkLCBzdWJUeXBlLCBkYXRhXSA9IHRhcmdldC5uYW1lLnNwbGl0KCcuJylcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlID09PSAncGFydGljaXBhbnRzJyAmJlxuICAgICAgICAhaXNOYU4oaW5kZXgpICYmXG4gICAgICAgIHN1YlR5cGUgPT09ICdzcGVlZC1jaGVjaydcbiAgICAgICkge1xuICAgICAgICBpZiAoZGF0YSA9PT0gJ25hbWUnKSB7XG4gICAgICAgICAgLy8gQ2hhbmdpbmcgbmFtZSB3aWxsIHJlbW92ZSBhbGwgb3RoZXIgcmVmICFcbiAgICAgICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICAgICAgICA6IFtdXG4gICAgICAgICAgaWYgKHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjaykge1xuICAgICAgICAgICAgZGVsZXRlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5pZFxuICAgICAgICAgICAgZGVsZXRlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay50eXBlXG4gICAgICAgICAgfSBlbHNlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjayA9IHt9XG4gICAgICAgICAgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLm5hbWUgPSB0YXJnZXQudmFsdWVcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzZXRTY3JvbGwgKGFwcCwgaHRtbCwgZGF0YSkge1xuICAgIGlmICghZGF0YS5lZGl0YWJsZSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGluaXRpYWxPcGVuaW5nID0gaHRtbFswXS5jbGFzc0xpc3QuY29udGFpbnMoJ3dpbmRvdy1hcHAnKVxuICAgIGNvbnN0IGNoYXNlVHJhY2sgPSBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpXG4gICAgaWYgKCFjaGFzZVRyYWNrKSByZXR1cm5cblxuICAgIGxldCBzdGFydCA9IGRhdGEuZGF0YS5zY3JvbGw/LmNoYXNlVHJhY2suZnJvbVxuICAgIGxldCBlbmQgPSBkYXRhLmRhdGEuc2Nyb2xsPy5jaGFzZVRyYWNrLnRvXG4gICAgaWYgKHR5cGVvZiBzdGFydCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN0YXJ0ID0gMFxuICAgIH1cbiAgICBpZiAodHlwZW9mIGVuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGVuZCA9IC0xXG4gICAgfVxuXG4gICAgaWYgKGluaXRpYWxPcGVuaW5nKSB7XG4gICAgICBjb25zdCByZW1TdHJpbmcgPSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJylcbiAgICAgIGNvbnN0IHJlbVNpemUgPSBOdW1iZXIocmVtU3RyaW5nLnJlcGxhY2UoJ3B4JywgJycpKVxuICAgICAgaWYgKGFwcC5pdGVtLnN0YXJ0ZWQpIHtcbiAgICAgICAgY29uc3QgcENvdW50ID0gYXBwLml0ZW0uYWN0dWFsUGFydGljaXBhbnRzPy5sZW5ndGhcbiAgICAgICAgY29uc3Qgd2lkdGggPSAocENvdW50ICogMTEuMiArIDMpICogcmVtU2l6ZVxuICAgICAgICBhcHAuYWN0aXZhdGVUYWIoJ3NldHVwJylcbiAgICAgICAgLy8gYXBwLl90YWJzWzBdLmFjdGl2ZSA9ICdzZXR1cCdcbiAgICAgICAgYXBwLnBvc2l0aW9uLndpZHRoID0gTWF0aC5tYXgod2lkdGgsIDQwICogcmVtU2l6ZSlcbiAgICAgICAgLy8gaHRtbC5jc3MoJ3dpZHRoJywgYCR7d2lkdGh9cHhgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBwLnBvc2l0aW9uLndpZHRoID0gNDUgKiByZW1TaXplXG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgYXBwLml0ZW0uYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKHsgaHRtbCB9KSAvLyBodG1sIGlzIG5vdCByZW5kZXJlZCwgZWxlbWVudCBoYXZlIHNpemUgPSAwXG4gICAgICAvLyBpZiAoZW5kID4gMCkge1xuICAgICAgLy8gICBzdGFydCA9IDBcbiAgICAgIC8vIH0gZWxzZSBpZiAoc3RhcnQgPiAwKSB7XG4gICAgICAvLyAgIGVuZCA9IHN0YXJ0XG4gICAgICAvLyAgIHN0YXJ0ID0gMFxuICAgICAgLy8gfVxuICAgIH1cblxuICAgIGlmIChzdGFydCAmJiBzdGFydCAhPT0gLTEpIHtcbiAgICAgIGNoYXNlVHJhY2suc2Nyb2xsVG8oe1xuICAgICAgICB0b3A6IDAsXG4gICAgICAgIGxlZnQ6IHN0YXJ0LFxuICAgICAgICBiZWhhdmlvcjogJ2luc3RhbnQnXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChlbmQgIT09IC0xKSB7XG4gICAgICBjaGFzZVRyYWNrLnNjcm9sbFRvKHtcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiBlbmQsXG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xuICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyBhd2FpdCBhcHAuaXRlbS51cGRhdGUoeyAnZGF0YS50cmFja1Njcm9sbFBvc2l0aW9uJzogZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCB9KVxuICB9XG5cbiAgc3RhdGljIG9uQ2xvc2UgKGFwcCwgaHRtbCkge1xuICAgIGFwcC5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0udHJhY2tTY3JvbGxQb3NpdGlvbic6IC0xIH0pXG4gIH1cblxuICAvLyBhc3luYyBfb25TaGVldFJlYWR5IChodG1sKSB7XG4gIC8vICAgY29uc3QgdHJhY2sgPSBodG1sLmZpbmQoJy5jaGFzZS10cmFjaycpXG4gIC8vICAgY29uc3QgZWxlbWVudCA9ICQodHJhY2spLmZpbmQoJy5hY3RpdmUnKVxuXG4gIC8vICAgY29uc3QgZWxlbWVudGxlZnQgPSBlbGVtZW50WzBdLm9mZnNldExlZnRcbiAgLy8gICBjb25zdCBkaXZXaWR0aCA9IHRyYWNrWzBdLmNsaWVudFdpZHRoXG4gIC8vICAgbGV0IGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgPSBlbGVtZW50bGVmdCAtIGRpdldpZHRoIC8gMlxuICAvLyAgIGlmIChlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0IDwgMCkgZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA9IDBcblxuICAvLyAgIGNvbnN0IHNjcm9sbFBvc2l0aW9uID0gdGhpcy5pdGVtLnN5c3RlbS50cmFja1Njcm9sbFBvc2l0aW9uXG4gIC8vICAgaWYgKCF0cmFjay5sZW5ndGgpIHJldHVyblxuICAvLyAgIGlmICghc2Nyb2xsUG9zaXRpb24pIHJldHVyblxuICAvLyAgIGNvbnN0IHRyYWNrRWxlbWVudCA9IHRyYWNrWzBdXG4gIC8vICAgdHJhY2tFbGVtZW50LnNjcm9sbFRvKHtcbiAgLy8gICAgIHRvcDogMCxcbiAgLy8gICAgIGxlZnQ6IGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQsXG4gIC8vICAgICBiZWhhdmlvcjogJ2luc3RhbnQnXG4gIC8vICAgfSlcblxuICAvLyAgIC8vVE9ETyA6IGNvdWxkZCB1c2UgcGFyZW50Lm9mZnNldFRvcCBldCBjaGlsZC5vZmZzZXRUb3AgdG8gY2VudGVyIHRoZSBhY3RpdmUgZWxlbWVudFxuXG4gIC8vICAgLy8gY29uc3QgYWN0aXZlID0gaHRtbC5maW5kKCcubmFtZS1jb250YWluZXIuYWN0aXZlJylcbiAgLy8gICAvLyBpZiggYWN0aXZlKXtcbiAgLy8gICAvLyAgIGNvbnN0IGVsZW1lbnQgPSBhY3RpdmVbMF1cbiAgLy8gICAvLyAgIGVsZW1lbnQuc2Nyb2xsSW50b1ZpZXcoe2JlaGF2aW9yOiBcInNtb290aFwiLCBibG9jazogXCJlbmRcIiwgaW5saW5lOiBcImNlbnRlclwifSlcbiAgLy8gICAvLyBlbGVtZW50LnNjcm9sbEludG9WaWV3KGZhbHNlKVxuICAvLyAgIC8vIH1cbiAgLy8gICAvLyB9KVxuICAvLyB9XG5cbiAgZmluZFBhcnRpY2lwYW50SW5kZXggKHV1aWQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgZmluZExvY2F0aW9uSW5kZXggKHV1aWQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5maW5kSW5kZXgocCA9PiBwLnV1aWQgPT09IHV1aWQpXG4gIH1cblxuICBmaW5kTG9jYXRpb24gKHV1aWQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5maW5kKHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgZmluZEluZGV4IChsaXN0LCB1dWlkKSB7XG4gICAgcmV0dXJuIGxpc3QuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24tY29udGVudCcpPy5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcbiAgICBjb25zdCBhc3Npc3RhbnRVdWlkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbml0aWF0aXZlLWJsb2NrJyk/LmRhdGFzZXQ/LnV1aWRcbiAgICBjb25zdCBiZW5lZmljaWFyeVV1aWQgPSB0YXJnZXQuZGF0YXNldC5iZW5lZmljaWFyeVV1aWRcbiAgICBhd2FpdCB0aGlzLml0ZW0uYXNzaXN0UGFydGljaXBhbnQoYXNzaXN0YW50VXVpZCwgYmVuZWZpY2lhcnlVdWlkKVxuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAvLyBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmxvY2F0aW9uLm9ic3RhY2xlJylcbiAgICAvLyBjb25zdCB1dWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIC8vIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIC8vIGNvbnN0IGxvY2F0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleChsb2NhdGlvbnMsIHV1aWQpXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgndG9nZ2xlJylcbiAgICBjb25zdCBkYXRhID0gZXhwYW5kT2JqZWN0KHtcbiAgICAgIFt0b2dnbGVdOiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnc3dpdGNoZWQtb24nKVxuICAgIH0pXG4gICAgaWYgKGRhdGEubG9jYXRpb25zKSB7XG4gICAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEubG9jYXRpb25zKSkge1xuICAgICAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGwudXVpZCA9PT0ga2V5KVxuICAgICAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdMb2NhdGlvbnMgdGFibGUgY29ycnVwdGVkJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbExvY2F0aW9uID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdXG4gICAgICAgICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuKHZhbHVlKVxuICAgICAgICAgIG1lcmdlT2JqZWN0KG9yaWdpbmFsTG9jYXRpb24sIGNsZWFuZWQpXG4gICAgICAgICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdID0gb3JpZ2luYWxMb2NhdGlvblxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gICAgfVxuICB9XG5cbiAgLy8gYXN5bmMgX29uT2JzdGFjbGVUb2dnbGVDbGljayAoZXZlbnQpIHtcbiAgLy8gICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gIC8vICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5vYnN0YWNsZScpXG4gIC8vICAgY29uc3QgdXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgLy8gICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgLy8gICBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZSA9ICFsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVcbiAgLy8gICBpZiAoIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMpIHtcbiAgLy8gICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMgPSB7XG4gIC8vICAgICAgIGJhcnJpZXI6IHRydWVcbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAvLyB9XG5cbiAgYXN5bmMgX29uT2JzdGFjbGVUeXBlQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcub2JzdGFjbGUnKVxuICAgIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IHRoaXMuZmluZEluZGV4KGxvY2F0aW9ucywgdXVpZClcbiAgICBpZiAoIWxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMpIHtcbiAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMgPSB7fVxuICAgIH1cbiAgICBjb25zdCBvYnN0YWNsZSA9IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHNcbiAgICBjb25zdCB0eXBlID0gdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmFycmllcicpID8gJ2JhcnJpZXInIDogJ2hhemFyZCdcbiAgICBjb25zdCBhY3RpdmUgPSBvYnN0YWNsZVt0eXBlXVxuICAgIG9ic3RhY2xlLmJhcnJpZXIgPSBmYWxzZVxuICAgIG9ic3RhY2xlLmhhemFyZCA9IGZhbHNlXG4gICAgb2JzdGFjbGVbdHlwZV0gPSAhYWN0aXZlXG4gICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlID0gIWFjdGl2ZVxuICAgIC8vIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdiYXJyaWVyJykpIHtcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuYmFycmllciA9ICFsb2NhdGlvbnNbXG4gICAgLy8gICAgIGxvY2F0aW9uSW5kZXhcbiAgICAvLyAgIF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXJcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuaGF6YXJkID0gIWxvY2F0aW9uc1tcbiAgICAvLyAgICAgbG9jYXRpb25JbmRleFxuICAgIC8vICAgXS5vYnN0YWNsZURldGFpbHMuYmFycmllclxuICAgIC8vIH0gZWxzZSBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGF6YXJkJykpIHtcbiAgICAvLyAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZURldGFpbHMuaGF6YXJkID0gIWxvY2F0aW9uc1tcbiAgICAvLyAgICAgbG9jYXRpb25JbmRleFxuICAgIC8vICAgXS5vYnN0YWNsZURldGFpbHMuaGF6YXJkXG4gICAgLy8gICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXIgPSAhbG9jYXRpb25zW1xuICAgIC8vICAgICBsb2NhdGlvbkluZGV4XG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5oYXphcmRcbiAgICAvLyB9XG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICB9XG5cbiAgYXN5bmMgX29uTG9jYXRpb25DbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5jaGFzZS1sb2NhdGlvbicpXG4gICAgY29uc3QgbFV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgYXdhaXQgdGhpcy5pdGVtLmFjdGl2YXRlTG9jYXRpb24obFV1aWQpXG4gIH1cblxuICBhc3luYyBfb25Mb2NhdGlvbkNvbnRyb2xDbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpKSByZXR1cm5cbiAgICBjb25zdCBhY3Rpb24gPSB0YXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICBjb25zdCBsVXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAncmVtb3ZlJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnJlbW92ZUxvY2F0aW9uKGxVdWlkKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYWRkLWFmdGVyJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLmluc2VydExvY2F0aW9uKGxVdWlkLCB7IHNoaWZ0OiAxIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2FkZC1iZWZvcmUnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0uaW5zZXJ0TG9jYXRpb24obFV1aWQsIHsgc2hpZnQ6IDAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnYWRkLXBhcnRpY2lwYW50JzpcbiAgICAgICAgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlci5jcmVhdGUoe1xuICAgICAgICAgIGNoYXNlVXVpZDogdGhpcy5pdGVtLnV1aWQsXG4gICAgICAgICAgbG9jYXRpb25VdWlkOiBsVXVpZCxcbiAgICAgICAgICBkcm9wRGF0YToge31cbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKGBMb2NhdGlvbiAke2xVdWlkfSBDbGlja2VkLiBBY3Rpb246ICR7YWN0aW9ufWApXG4gIH1cblxuICBhc3luYyBfb25DaGFzZVBhcnRpY2lwYW50Q2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgcFV1aWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQ/LnV1aWRcbiAgICBhd2FpdCB0aGlzLml0ZW0uYWN0aXZhdGVQYXJ0aWNpcGFudChwVXVpZClcbiAgfVxuXG4gIGFzeW5jIF9vblBhcnRpY2lwYW50Q29udHJvbENsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5hY3RpdmUnKSkgcmV0dXJuXG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Ryb3Bkb3duJykpIHJldHVyblxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudFV1aWQgPSB0YXJnZXQuY2xvc2VzdCgnLmluaXRpYXRpdmUtYmxvY2snKT8uZGF0YXNldD8udXVpZFxuICAgIGlmICghcGFydGljaXBhbnRVdWlkKSByZXR1cm5cbiAgICBzd2l0Y2ggKHRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnZHJhd0d1bic6XG4gICAgICAgIGF3YWl0IHRoaXMudG9nZ2xlUGFydGljaXBhbnRHdW4ocGFydGljaXBhbnRVdWlkKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZGVjcmVhc2VBY3Rpb25zJzpcbiAgICAgICAgYXdhaXQgdGhpcy5fb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMoLTEsIGV2ZW50KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaW5jcmVhc2VBY3Rpb25zJzpcbiAgICAgICAgYXdhaXQgdGhpcy5fb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMoMSwgZXZlbnQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtb3ZlQmFja3dhcmQnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0ubW92ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZCwgLTEsIHsgcmVuZGVyOiB0cnVlIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdtb3ZlRm9yd2FyZCc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5tb3ZlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkLCAxLCB7IHJlbmRlcjogdHJ1ZSB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYWN0aXZhdGVQYXJ0aWNpcGFudCc6XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0uYWN0aXZhdGVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgICBjYXNlICdib251c0RpY2UnOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgZGljZU51bWJlciA9IHRhcmdldC5kYXRhc2V0LmNvdW50XG4gICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZUJvbnVzRGljZShwYXJ0aWNpcGFudFV1aWQsIGRpY2VOdW1iZXIpXG4gICAgICAgICAgdGhpcy5pdGVtLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybigpXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NhdXRpb3VzQXBwcm9hY2gnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0uY2F1dGlvdXNBcHByb2FjaChwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdlZGl0UGFydGljaXBhbnQnOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLml0ZW0uZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5pdGVtLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocGFydGljaXBhbnRVdWlkKVxuICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEuY2hhc2VVdWlkID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLmxvY2F0aW9uVXVpZCA9IGxvY2F0aW9uLnV1aWRcbiAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnVwZGF0ZSA9IHRydWVcbiAgICAgICAgICBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyLmNyZWF0ZShwYXJ0aWNpcGFudC5kYXRhKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZW1vdmVQYXJ0aWNpcGFudCc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5yZW1vdmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHRoaXMuaXRlbS5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhc2VDb250cm9sQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBsb2NhdGlvblV1aWQgPSB0YXJnZXQuY2xvc2VzdCgnLm9ic3RhY2xlJyk/LmRhdGFzZXQ/LnV1aWRcbiAgICBpZiAoIWxvY2F0aW9uVXVpZCkgcmV0dXJuXG4gICAgc3dpdGNoICh0YXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ29ic3RhY2xlLXNraWxsLWNoZWNrJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbS5hY3RpdmVQYXJ0aWNpcGFudE9ic3RhY2xlQ2hlY2sobG9jYXRpb25VdWlkKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkNoYW5nZU1vdmVtZW50QWN0aW9ucyAoY291bnQsIGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50VXVpZCA9IHRhcmdldC5jbG9zZXN0KCcuaW5pdGlhdGl2ZS1ibG9jaycpPy5kYXRhc2V0Py51dWlkXG4gICAgaWYgKCFwYXJ0aWNpcGFudFV1aWQpIHJldHVyblxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5wYXJ0aWNpcGFudHNcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50cy5maW5kKHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWQpXG4gICAgaWYgKHBhcnRpY2lwYW50Lmhhc01heE12dEFjdGlvbnMgJiYgY291bnQgPiAwKSByZXR1cm5cbiAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucyhjb3VudClcblxuICAgIC8vIGNvbnN0IHNoZWV0ID0gdGFyZ2V0LmNsb3Nlc3QoJy5jb2M3Lml0ZW0uY2hhc2UnKVxuICAgIC8vIGNvbnN0IGNoYXNlVHJhY2sgPSBzaGVldC5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxuICAgIC8vIGlmIChjaGFzZVRyYWNrKVxuICAgIC8vICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7XG4gICAgLy8gICAgICdkYXRhLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiBjaGFzZVRyYWNrLnNjcm9sbExlZnRcbiAgICAvLyAgIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLnNldGNoYXNlVHJhY2tTY3JvbGwoeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMpXG4gIH1cblxuICBhc3luYyBfb25CdXR0b25DbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgYWN0aW9uID0gdGFyZ2V0LmRhdGFzZXQ/LmFjdGlvblxuICAgIGlmICghYWN0aW9uKSByZXR1cm5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAnaW5pdCc6XG4gICAgICAgIGlmIChcbiAgICAgICAgICAhaXNOYU4odGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMudG90YWwpICYmXG4gICAgICAgICAgdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMudG90YWwgPiAwXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IEFycmF5LmFwcGx5KFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIEFycmF5KHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLnRvdGFsKVxuICAgICAgICAgICkubWFwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHV1aWQ6IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIGxvY2F0aW9uc1swXS5uYW1lID0gJ1N0YXJ0J1xuICAgICAgICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID4gMSkgbG9jYXRpb25zW2xvY2F0aW9ucy5sZW5ndGggLSAxXS5uYW1lID0gJ0VuZCdcbiAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gICAgICAgIH1cblxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncmVzZXQnOlxuICAgICAgICBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtUmVzZXRDaGFzZScpfWAsXG4gICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1SZXNldENoYXNlSGludCcpfTwvcD5gLFxuICAgICAgICAgIHllczogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QoW10pXG4gICAgICAgICAgICBhd2FpdCB0aGlzLml0ZW0uc3RvcCgpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdjdXQyY2hhc2UnOlxuICAgICAgICBpZiAodGhpcy5pdGVtLmFsbEhhdmVTcGVlZFJvbGwpIHtcbiAgICAgICAgICBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1DdXQyQ2hhc2UnKX1gLFxuICAgICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5Db25maXJtQ3V0MkNoYXNlSGludCdcbiAgICAgICAgICAgICl9PC9wPmAsXG4gICAgICAgICAgICB5ZXM6ICgpID0+IHRoaXMuaXRlbS5jdXRUb1RoZUNoYXNlKClcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90QWxsSGF2ZVNwZWVkUm9sbCcpKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3Jlc3RhcnQnOlxuICAgICAgICBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtUmVzdGFydENoYXNlJyl9YCxcbiAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5Db25maXJtUmVzdGFydENoYXNlSGludCdcbiAgICAgICAgICApfTwvcD5gLFxuICAgICAgICAgIHllczogKCkgPT4gdGhpcy5pdGVtLnJlc3RhcnQoKVxuICAgICAgICB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICduZXh0Um91bmQnOlxuICAgICAgICBpZiAodGhpcy5pdGVtLm5leHRBY3RpdmVQYXJ0aWNpcGFudCkge1xuICAgICAgICAgIERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybU5leHRDaGFzZVJvdW5kJyl9YCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuQ29uZmlybU5leHRDaGFzZVJvdW5kSGludCdcbiAgICAgICAgICAgICl9PC9wPmAsXG4gICAgICAgICAgICB5ZXM6ICgpID0+IHRoaXMuaXRlbS5wcm9ncmVzc1RvTmV4dFJvdW5kKClcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2UgdGhpcy5pdGVtLnByb2dyZXNzVG9OZXh0Um91bmQoKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIF9jYW5QaW5Mb2NhdGlvbkRyYWdTdGFydCAoc2VsZWN0b3IpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBfb25QaW5Mb2NhdGlvbkRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGkgPSBhLnF1ZXJ5U2VsZWN0b3IoJ2kuaWNvbicpXG4gICAgY29uc3QgZHJhZ0ljb24gPSBhLnF1ZXJ5U2VsZWN0b3IoJy5waW4taW1hZ2UnKVxuXG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShkcmFnSWNvbiwgMCwgZHJhZ0ljb24uaGVpZ2h0KVxuXG4gICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gYS5jbG9zZXN0KCcuY2hhc2UtbG9jYXRpb24nKVxuICAgIGNvbnN0IGRhdGEgPSB7fVxuXG4gICAgZGF0YS50eXBlID0gJ2xvY2F0b3InXG4gICAgZGF0YS5Db0M3VHlwZSA9ICdjaGFzZSdcbiAgICBkYXRhLmljb24gPSBpLmRhdGFzZXQubGlua0ljb25cbiAgICBkYXRhLmxvY2F0aW9uVXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBkYXRhLmRvY1V1aWQgPSB0aGlzLml0ZW0udXVpZFxuICAgIGRhdGEuY2FsbEJhY2sgPSAnbG9jYXRvckRyb3BwZWQnXG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcblxuICAgIC8vIGNvbnN0IGRyYWdEYXRhID0geyB1dWlkOiBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkLCBjaGFzZVV1aWQ6IHRoaXMuaXRlbS51dWlkIH1cbiAgICAvLyBkcmFnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gIH1cblxuICBfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCAoc2VsZWN0b3IpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIChzZWxlY3Rvcikge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZHJhZ0RhdGEgPSB7IHV1aWQ6IHRhcmdldC5kYXRhc2V0LnV1aWQsIHR5cGU6ICdwYXJ0aWNpcGFudCcgfVxuICAgIGRyYWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRyYWdEYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCAoZHJhZ0V2ZW50KSB7XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGRyYWdFdmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcblxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnRHJvcHBlZCcpXG4gICAgdGhpcy5fb25EcmFnTGVhdmUoZHJhZ0V2ZW50KVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZHJhZ0V2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsb2NhdGlvblV1aWQgPSB0YXJnZXQuZGF0YXNldC51dWlkXG5cbiAgICBpZiAoZGF0YS50eXBlID09PSAncGFydGljaXBhbnQnKSB7XG4gICAgICBjb25zdCBvbGRMb2NhdGlvbiA9IHRoaXMuZmluZExvY2F0aW9uKGxvY2F0aW9uVXVpZClcbiAgICAgIGlmIChvbGRMb2NhdGlvbikge1xuICAgICAgICBpZiAob2xkTG9jYXRpb24ucGFydGljaXBhbnRzPy5pbmNsdWRlcyhkYXRhLnV1aWQpKSByZXR1cm5cbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMuaXRlbS5zZXRjaGFzZVRyYWNrU2Nyb2xsKHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24oZGF0YS51dWlkLCBsb2NhdGlvblV1aWQpXG4gICAgfSBlbHNlIHtcbiAgICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKHtcbiAgICAgICAgY2hhc2VVdWlkOiB0aGlzLml0ZW0udXVpZCxcbiAgICAgICAgbG9jYXRpb25VdWlkLFxuICAgICAgICBkcm9wRGF0YTogZGF0YVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBfb25EcmFnT3ZlciAoZHJhZ0V2ZW50KSB7XG4gICAgdGhpcy5fb25EcmFnRW50ZXIoZHJhZ0V2ZW50KVxuICB9XG5cbiAgX29uRHJhZ0VudGVyIChkcmFnRXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKCdkcmFnLW92ZXInKVxuICB9XG5cbiAgX29uRHJhZ0xlYXZlIChkcmFnRXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxuICAgIHRhcmdldC5jbGFzc0xpc3Q/LnJlbW92ZSgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3BQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdXVpZCA9IHRhcmdldC5kYXRhc2V0Py51dWlkXG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIGF3YWl0IHRoaXMuYWx0ZXJQYXJ0aWNpcGFudChkYXRhLCB1dWlkKVxuICB9XG5cbiAgYXN5bmMgX29uQWRkUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGRhdGEgPSB7IGNoYXNlVXVpZDogdGhpcy5pdGVtLnV1aWQgfVxuICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIpIHtcbiAgICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgICBkYXRhLmRyb3BEYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIH1cbiAgICBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyLmNyZWF0ZShkYXRhKVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudEVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnRFbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudChwYXJ0aWNpcGFudHNbaW5kZXhdKVxuICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlNldCkge1xuICAgICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgcm9sbC5wYXJlbnQgPSB0aGlzLml0ZW0udXVpZFxuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsZWQgPSB0cnVlXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxVdWlkID0gcm9sbC51dWlkXG4gICAgICByb2xsLmFjdG9yID0gcGFydGljaXBhbnQuYWN0b3IuYWN0b3JLZXlcbiAgICAgIGlmICghZXZlbnQuc2hpZnRLZXkgJiYgcGFydGljaXBhbnQuYWN0b3IucGxheWVyKSB7XG4gICAgICAgIHJvbGwuc3RhbmRieSA9IHRydWVcbiAgICAgICAgcm9sbC5zdGFuZGJ5VGV4dCA9ICdDb0M3LkNoYXNlJ1xuICAgICAgICByb2xsLnN0YW5kYnlSaWdodEljb24gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9ydW5uaW5nLXNvbGlkLnN2ZydcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNDaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICBhd2FpdCByb2xsLnJvbGxDaGFyYWN0ZXJpc3RpYyhwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZi5rZXkpXG4gICAgICAgIGF3YWl0IHJvbGwudG9NZXNzYWdlKClcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzU2tpbGwpIHtcbiAgICAgICAgcm9sbC5za2lsbCA9IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sucmVmXG4gICAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICAgIGF3YWl0IHJvbGwudG9NZXNzYWdlKClcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQXR0cmlidXRlKSB7XG4gICAgICAgIGF3YWl0IHJvbGwucm9sbEF0dHJpYnV0ZShwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZi5rZXkpXG4gICAgICAgIGF3YWl0IHJvbGwudG9NZXNzYWdlKClcbiAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSkge1xuICAgICAgY29uc3Qgcm9sbERhdGEgPSB7XG4gICAgICAgIHJhd1ZhbHVlOiBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlLFxuICAgICAgICBkaXNwbGF5TmFtZTogcGFydGljaXBhbnQuc3BlZWRDaGVjay5uYW1lLFxuICAgICAgICBhY3Rvck5hbWU6IHBhcnRpY2lwYW50Lm5hbWUgPyBwYXJ0aWNpcGFudC5uYW1lIDogdW5kZWZpbmVkXG4gICAgICB9XG4gICAgICBpZiAocGFydGljaXBhbnQuaGFzQWN0b3IpIHJvbGxEYXRhLmFjdG9yID0gcGFydGljaXBhbnQuYWN0b3IuYWN0b3JLZXlcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suY3JlYXRlKHJvbGxEYXRhKVxuICAgICAgcm9sbC5wYXJlbnQgPSB0aGlzLml0ZW0udXVpZFxuICAgICAgYXdhaXQgcm9sbC5yb2xsKClcbiAgICAgIGF3YWl0IHJvbGwudG9NZXNzYWdlKClcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsVXVpZCA9IHJvbGwudXVpZFxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIF9vbkRyYWdFbnRlclBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIF9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYW5nZVNpZGUgKGV2ZW50KSB7XG4gICAgLy8gY29uc3QgdGVzdCA9IGF3YWl0IGZyb21VdWlkKCAnU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5uQ2RvQ3lvaXVkdGpyTmt1Jyk7XG4gICAgLy8gY29uc3QgaXRlbVRlc3QgPSBhd2FpdCBmcm9tVXVpZCggJ0l0ZW0ucGxJRW1OUlA2TzdQdmVOdi5yb2xsLnEyc0F6c0h0NEZzcXNkZkQnKTtcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRhcmdldC5jbG9zZXN0KCcucGFydGljaXBhbnQnKVxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgcGFydGljaXBhbnRzW2luZGV4XS5jaGFzZXIgPSAhcGFydGljaXBhbnRzW2luZGV4XS5jaGFzZXJcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBfb25EZWxldGVEcml2ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGRyaXZlciA9IHRhcmdldC5jbG9zZXN0KCcuZHJpdmVyJylcbiAgICBjb25zdCB1dWlkID0gZHJpdmVyLmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50c1tpbmRleF1cbiAgICBkZWxldGUgcGFydGljaXBhbnQuZG9jVXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRlbGV0ZVBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRhcmdldC5jbG9zZXN0KCcucGFydGljaXBhbnQnKVxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgcGFydGljaXBhbnRzLnNwbGljZShpbmRleCwgMSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBfb25SZXNldFJvbGwgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBkZWxldGUgcGFydGljaXBhbnRzW2luZGV4XS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgYWx0ZXJQYXJ0aWNpcGFudCAoZGF0YSwgdXVpZCkge1xuICAgIGxldCBkb2NVdWlkLCBhY3RvclxuICAgIGlmIChkYXRhLnRva2VuVXVpZCkgZG9jVXVpZCA9IGRhdGEudG9rZW5VdWlkXG4gICAgZWxzZSB7XG4gICAgICBkb2NVdWlkID1cbiAgICAgICAgZGF0YS5zY2VuZUlkICYmIGRhdGEudG9rZW5JZFxuICAgICAgICAgID8gYFNjZW5lLiR7ZGF0YS5zY2VuZUlkfS5Ub2tlbi4ke2RhdGEudG9rZW5JZH1gXG4gICAgICAgICAgOiBkYXRhLmFjdG9ySWQgfHwgZGF0YS5hY3RvcktleSB8fCBkYXRhLmlkXG4gICAgfVxuXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ1Rva2VuJykge1xuICAgICAgZG9jVXVpZCA9IGRhdGEudXVpZFxuICAgIH0gZWxzZSBpZiAoZG9jVXVpZCkge1xuICAgICAgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShkb2NVdWlkKVxuICAgICAgaWYgKCFhY3RvciAmJiBkYXRhLnR5cGUgPT09ICdJdGVtJykgZG9jVXVpZCA9IG51bGxcbiAgICB9XG5cbiAgICBpZiAoYWN0b3IgJiYgZG9jVXVpZCAhPT0gYWN0b3IudXVpZCkge1xuICAgICAgZG9jVXVpZCA9IGFjdG9yLnV1aWRcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHt9XG4gICAgaWYgKGRvY1V1aWQpIHBhcnRpY2lwYW50LmRvY1V1aWQgPSBkb2NVdWlkXG5cbiAgICBzd2l0Y2ggKGRhdGEudHlwZT8udG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAnYWN0b3InOlxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEuZGF0YT8uX2lkIHx8IGRhdGEuaWQsXG4gICAgICAgICAgdHlwZTogJ2l0ZW0nXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYXJhY3RlcmlzdGljJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnYXR0cmlidXRlJzpcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5uYW1lLFxuICAgICAgICAgIHR5cGU6ICdhdHRyaWJ1dGUnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG5cbiAgICAvLyBUT0RPOkNoZWNrIGZvciBzcGVlZCBjaGVjaywgaWYgbm9uZSBhZGQgc3BlZWRjaGVja1xuICAgIC8vIHNwZWVkQ2hlY2sgPSB7XG4gICAgLy8gICBpZDogJ3N0cidcbiAgICAvLyAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAvLyB9XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5maW5kUGFydGljaXBhbnRJbmRleCh1dWlkKVxuICAgIGNvbnN0IG9sZFBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzW2luZGV4XVxuICAgIGlmIChvbGRQYXJ0aWNpcGFudC5tb3YpIGRlbGV0ZSBvbGRQYXJ0aWNpcGFudC5tb3ZcbiAgICBtZXJnZU9iamVjdChvbGRQYXJ0aWNpcGFudCwgcGFydGljaXBhbnQpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzICgpIHtcbiAgICBhd2FpdCB0aGlzLml0ZW0uY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzKClcbiAgfVxuXG4gIGFzeW5jIGFkZFBhcnRpY2lwYW50IChkYXRhKSB7XG4gICAgLy8gbGV0IHByb3V0ID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoXG4gICAgLy8gICAnU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5ReUZUaWlFWmlYOXZUZmlDJ1xuICAgIC8vIClcbiAgICAvLyBwcm91dCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxuICAgIC8vICAgJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4udWJMemhlNTdKT1RITUlyOSdcbiAgICAvLyApXG4gICAgLy8gcHJvdXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSgnQWN0b3IudWlZM2NhcFNVZUxMdlNMaScpXG4gICAgLy8gcHJvdXQgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleSggJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4uUXlGVGlpRVppWDl2VGZpQy5JdGVtLkdyT0hlTFhmZUVwaHNSTVonKVxuICAgIC8vIHByb3V0ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoIFwiU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5ZcXNOUVBEaEZDUGxTUnFKXCIpXG4gICAgLy8gcHJvdXQgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleSggXCJTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLllxc05RUERoRkNQbFNScUouSXRlbS44SkVuVGpKT0dGWG1sNHdrXCIpXG5cbiAgICAvLyB0cnkgdG8gZmluZCBhIHZhbGlkIGRvY3VtZW50XG4gICAgbGV0IGRvY1V1aWQsIGFjdG9yXG4gICAgaWYgKGRhdGEudG9rZW5VdWlkKSBkb2NVdWlkID0gZGF0YS50b2tlblV1aWRcbiAgICBlbHNlIHtcbiAgICAgIGRvY1V1aWQgPVxuICAgICAgICBkYXRhLnNjZW5lSWQgJiYgZGF0YS50b2tlbklkXG4gICAgICAgICAgPyBgU2NlbmUuJHtkYXRhLnNjZW5lSWR9LlRva2VuLiR7ZGF0YS50b2tlbklkfWBcbiAgICAgICAgICA6IGRhdGEuYWN0b3JJZCB8fCBkYXRhLmFjdG9yS2V5IHx8IGRhdGEuaWRcbiAgICB9XG5cbiAgICBpZiAoZGF0YS50eXBlID09PSAnVG9rZW4nKSB7XG4gICAgICBkb2NVdWlkID0gZGF0YS51dWlkXG4gICAgfSBlbHNlIGlmIChkb2NVdWlkKSB7XG4gICAgICBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGRvY1V1aWQpXG4gICAgICBpZiAoIWFjdG9yICYmIGRhdGEudHlwZSA9PT0gJ0l0ZW0nKSBkb2NVdWlkID0gbnVsbFxuICAgIH1cblxuICAgIGlmIChhY3RvciAmJiBkb2NVdWlkICE9PSBhY3Rvci51dWlkKSB7XG4gICAgICBkb2NVdWlkID0gYWN0b3IudXVpZFxuICAgIH1cblxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0ge31cbiAgICBpZiAoZG9jVXVpZCkgcGFydGljaXBhbnQuZG9jVXVpZCA9IGRvY1V1aWRcblxuICAgIHN3aXRjaCAoZGF0YS50eXBlPy50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdhY3Rvcic6XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdpdGVtJzpcbiAgICAgICAgaWYgKGRhdGEuaWQpIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoZGF0YS5pZClcbiAgICAgICAgICBpZiAoaXRlbT8uZGF0YT8udHlwZSAhPT0gJ3NraWxsJykgcmV0dXJuXG4gICAgICAgIH1cblxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLmRhdGE/Ll9pZCB8fCBkYXRhLmlkLFxuICAgICAgICAgIHR5cGU6ICdpdGVtJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjaGFyYWN0ZXJpc3RpYyc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2F0dHJpYnV0ZSc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnYXR0cmlidXRlJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgLy8gVE9ETzpDaGVjayBmb3Igc3BlZWQgY2hlY2ssIGlmIG5vbmUgYWRkIHNwZWVkY2hlY2sgY29uIG5vbiB2ZWhpY2xlLCBkcml2ZSBhdXRvIGZvciB2ZWhpY2xlXG4gICAgLy8gc3BlZWRDaGVjayA9IHtcbiAgICAvLyAgIGlkOiAnY29uJ1xuICAgIC8vICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xuICAgIC8vIH1cblxuICAgIGlmICghcGFydGljaXBhbnQuc3BlZWRDaGVjaykge1xuICAgICAgaWYgKCF0aGlzLml0ZW0uc3lzdGVtLnZlaGljbGUpIHtcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogJ2NvbicsXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5Db25zdGl0dXRpb24nKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5kcml2ZS1hdXRvJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG5cbiAgICBsZXQgdW5pcXVlID0gZmFsc2VcbiAgICB3aGlsZSAoIXVuaXF1ZSkge1xuICAgICAgcGFydGljaXBhbnQudXVpZCA9IGZvdW5kcnkudXRpbHMucmFuZG9tSUQoMTYpXG4gICAgICB1bmlxdWUgPVxuICAgICAgICBwYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gcC51dWlkID09PSBwYXJ0aWNpcGFudC51dWlkKS5sZW5ndGggPT09IDBcbiAgICB9XG5cbiAgICBwYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVQYXJ0aWNpcGFudEd1biAocGFydGljaXBhbnRVdWlkKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gcGFydGljaXBhbnRzLmZpbmQocCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZClcbiAgICBpZiAoIXBhcnRpY2lwYW50KSByZXR1cm5cbiAgICBwYXJ0aWNpcGFudC5oYXNBR3VuUmVhZHkgPSAhcGFydGljaXBhbnQuaGFzQUd1blJlYWR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnNldGNoYXNlVHJhY2tTY3JvbGwoeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZVBhcnRpY2lwYW50cyhwYXJ0aWNpcGFudHMpXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFuIChvYmopIHtcbiAgZm9yIChjb25zdCBwcm9wTmFtZSBpbiBvYmopIHtcbiAgICBjb25zdCB0cCA9IGdldFR5cGUob2JqW3Byb3BOYW1lXSlcbiAgICBpZiAodHAgPT09ICdPYmplY3QnKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gY2xlYW4ob2JqW3Byb3BOYW1lXSlcbiAgICB9XG5cbiAgICBpZiAodHAgPT09ICdPYmplY3QnICYmICFPYmplY3QuZW50cmllcyhvYmpbcHJvcE5hbWVdKS5sZW5ndGgpIHtcbiAgICAgIG9ialtwcm9wTmFtZV0gPSBudWxsXG4gICAgfSBlbHNlIGlmICh0cCA9PT0gJ3N0cmluZycgJiYgIW9ialtwcm9wTmFtZV0ubGVuZ3RoKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gbnVsbFxuICAgIH0gZWxzZSBpZiAodHAgPT09ICdzdHJpbmcnICYmICFpc05hTihOdW1iZXIob2JqW3Byb3BOYW1lXSkpKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gTnVtYmVyKG9ialtwcm9wTmFtZV0pXG4gICAgfVxuICB9XG4gIHJldHVybiBvYmpcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0l0ZW1TaGVldFYyIGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdpdGVtJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvaXRlbS1zaGVldFYyLmh0bWwnLFxuICAgICAgd2lkdGg6IDUwMCxcbiAgICAgIGhlaWdodDogNDUwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBnZXREYXRhIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKG9wdGlvbnMpXG5cbiAgICBzaGVldERhdGEuZWZmZWN0cyA9IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5pdGVtLmVmZmVjdHMsIHsgc3RhdHVzOiBmYWxzZSB9KVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLmVmZmVjdC1jb250cm9sJylcbiAgICAgIC5jbGljayhldiA9PiBDb0M3QWN0aXZlRWZmZWN0Lm9uTWFuYWdlQWN0aXZlRWZmZWN0KGV2LCB0aGlzLml0ZW0pKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgbWVyZ2VPYmplY3QgKi9cblxuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldFYyIH0gZnJvbSAnLi9pdGVtLXNoZWV0VjIuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdJdGVtU2hlZXQgZXh0ZW5kcyBDb0M3SXRlbVNoZWV0VjIge1xuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDUwNlxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBKb3VybmFsU2hlZXQgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Sm91cm5hbFNoZWV0IGV4dGVuZHMgSm91cm5hbFNoZWV0IHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBNYWNyb0NvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdNYWNyb0NvbmZpZyBleHRlbmRzIE1hY3JvQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBQbGF5bGlzdENvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdQbGF5bGlzdENvbmZpZyBleHRlbmRzIFBsYXlsaXN0Q29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBSb2xsVGFibGVDb25maWcgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Um9sbFRhYmxlQ29uZmlnIGV4dGVuZHMgUm9sbFRhYmxlQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBTY2VuZUNvbmZpZyAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTY2VuZUNvbmZpZyBleHRlbmRzIFNjZW5lQ29uZmlnIHtcbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgRHJvcENvQ0lEIH0gZnJvbSAnLi4vLi4vYXBwcy9kcm9wLWNvYy1pZC5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U2V0dXBTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbC5maW5kKCcuaXRlbSAuaXRlbS1uYW1lIGg0JykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCwgJ2l0ZW1zJykpXG4gICAgaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZWxldGUoZXZlbnQsICdpdGVtcycpKVxuICAgIGh0bWwuZmluZCgnLmFkZC1iaW8nKS5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLl9vbkFkZEJpbygpKVxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1zZWN0aW9uJykuY2xpY2sodGhpcy5fb25SZW1vdmVTZWN0aW9uLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5hZGQtbW9uZXRhcnknKS5jbGljayh0aGlzLl9vbkFkZE1vbmV0YXJ5LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcucmVtb3ZlLW1vbmV0YXJ5JykuY2xpY2sodGhpcy5fb25SZW1vdmVNb25ldGFyeS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tUb2dnbGUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkoXG4gICAgICBwcm9wZXJ0eUlkLFxuICAgICAgaXNDdHJsS2V5KGV2ZW50KVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuXG4gICAgbGV0IHVzZUNvQ0lEID0gMFxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcbiAgICAgIGlmICghWydpdGVtJywgJ3dlYXBvbicsICdza2lsbCcsICdib29rJywgJ3NwZWxsJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh1c2VDb0NJRCA9PT0gMCkge1xuICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgfVxuICAgICAgY29sbGVjdGlvbi5wdXNoKERyb3BDb0NJRC5wcm9jZXNzSXRlbSh1c2VDb0NJRCwgaXRlbSkpXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlbW92ZVNlY3Rpb24gKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkaXYgPSBhLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5iaW9TZWN0aW9ucylcbiAgICBiaW8uc3BsaWNlKE51bWJlcihkaXYuZGF0YXNldC5pbmRleCksIDEpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvU2VjdGlvbnMnOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIF9vbkFkZEJpbyAoKSB7XG4gICAgY29uc3QgYmlvID0gdGhpcy5pdGVtLnN5c3RlbS5iaW9TZWN0aW9ucyA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmJpb1NlY3Rpb25zKSA6IFtdXG4gICAgYmlvLnB1c2gobnVsbClcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5iaW9TZWN0aW9ucyc6IGJpbyB9KVxuICB9XG5cbiAgX29uQWRkTW9uZXRhcnkgKCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuaXRlbS5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKSA6IFtdXG4gICAgdmFsdWVzLnB1c2goe1xuICAgICAgbmFtZTogJycsXG4gICAgICBtaW46IG51bGwsXG4gICAgICBtYXg6IG51bGwsXG4gICAgICBjYXNoVHlwZTogMCxcbiAgICAgIGNhc2hWYWx1ZTogJycsXG4gICAgICBhc3NldHNUeXBlOiAwLFxuICAgICAgYXNzZXRzVmFsdWU6ICcnLFxuICAgICAgc3BlbmRpbmdUeXBlOiAwLFxuICAgICAgc3BlbmRpbmdWYWx1ZTogJydcbiAgICB9KVxuICAgIHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyc6IHZhbHVlcyB9KVxuICB9XG5cbiAgX29uUmVtb3ZlTW9uZXRhcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkaXYgPSBhLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCB2YWx1ZXMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMpXG4gICAgdmFsdWVzLnNwbGljZShOdW1iZXIoZGl2LmRhdGFzZXQuaW5kZXgpLCAxKVxuICAgIHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyc6IHZhbHVlcyB9KVxuICB9XG5cbiAgX29uSXRlbVN1bW1hcnkgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZChzID0+IHtcbiAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgfSlcbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhLnZhbHVlfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHsgcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgY29uc3QgQ29DSWQgPSBpdGVtLmRhdGEoJ2NvY2lkJylcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgoaSA9PiAoaXRlbUlkICYmIGkuX2lkID09PSBpdGVtSWQpIHx8IChDb0NJZCAmJiBpID09PSBDb0NJZCkpXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cbiAgICAgIGNvbGxlY3Rpb24uc3BsaWNlKGl0ZW1JbmRleCwgMSlcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc2V0dXAnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zZXR1cC5odG1sJyxcbiAgICAgIHdpZHRoOiA1NjUsXG4gICAgICBoZWlnaHQ6IDUzMCxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScgfV0sXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG5cbiAgICBjb25zdCBlcmEgPSBPYmplY3QuZW50cmllcyh0aGlzLml0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSkuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4gZVswXSlcblxuICAgIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiB0aGlzLml0ZW0uc3lzdGVtLml0ZW1zLCBlcmE6ICh0eXBlb2YgZXJhWzBdICE9PSAndW5kZWZpbmVkJyA/IGVyYVswXSA6IHRydWUpIH0pXG5cbiAgICBzaGVldERhdGEuc2tpbGxzID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgPT09ICdza2lsbCcpXG4gICAgc2hlZXREYXRhLm90aGVySXRlbXMgPSBpdGVtcy5maWx0ZXIoaXQgPT4gaXQudHlwZSAhPT0gJ3NraWxsJylcblxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RFbXB0eSA9IHNoZWV0RGF0YS5za2lsbHMubGVuZ3RoID09PSAwXG4gICAgc2hlZXREYXRhLml0ZW1zTGlzdEVtcHR5ID0gc2hlZXREYXRhLm90aGVySXRlbXMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuc2tpbGxzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLl9lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBzaGVldERhdGEuX2VyYXMucHVzaCh7XG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSksXG4gICAgICAgIGlzRW5hYmxlZDogKHRoaXMuaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID8/IHt9KVtrZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICBzaGVldERhdGEuX2VyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cyA9IFtdXG4gICAgZm9yIChjb25zdCBrZXkgaW4gQ09DNy5tb25ldGFyeUZvcm1hdHMpIHtcbiAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlGb3JtYXRzLnB1c2goeyBrZXksIHZhbDogZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubW9uZXRhcnlGb3JtYXRzW2tleV0pIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLnNob3dDdXJyZW5jeVN5bWJvbCA9IFsnZGVjaW1hbExlZnQnLCAnZGVjaW1hbFJpZ2h0JywgJ2ludGVnZXJMZWZ0JywgJ2ludGVnZXJSaWdodCddLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlUeXBlcykge1xuICAgICAgaWYgKENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5sZW5ndGggPT09IDAgfHwgQ09DNy5tb25ldGFyeVR5cGVzW2tleV0uZmlsdGVyLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpKSB7XG4gICAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlUeXBlcy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5uYW1lKSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5vbmVCbG9ja0JhY2tTdG9yeSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5JylcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZEJhY2tzdG9yeSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iYWNrc3RvcnksXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCBzeXN0ZW0gPSBleHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLmJpb1NlY3Rpb25zKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmJpb1NlY3Rpb25zJ10gPSBPYmplY3QudmFsdWVzKFxuICAgICAgICBzeXN0ZW0uYmlvU2VjdGlvbnMgfHwgW11cbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHN5c3RlbS5tb25ldGFyeS52YWx1ZXMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJ10gPSBPYmplY3QudmFsdWVzKHN5c3RlbS5tb25ldGFyeS52YWx1ZXMgfHwgW10pXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQ/Lm5hbWUgPT09ICdzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkJykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCddID0gIWV2ZW50LmN1cnJlbnRUYXJnZXQuY2hlY2tlZFxuICAgIH1cblxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Py5uYW1lID09PSAnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5lbmFibGVkJykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQnXSA9ICFldmVudC5jdXJyZW50VGFyZ2V0LmNoZWNrZWRcbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgQ29DN0FjdGl2ZUVmZmVjdCBmcm9tICcuLi8uLi9hY3RpdmUtZWZmZWN0LmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1NraWxsU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHN1cGVyKC4uLmFyZ3MpXG4gICAgdGhpcy5fc2hlZXRUYWIgPSAnaXRlbXMnXG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIFNpbXBsZSBJdGVtIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdpdGVtJ10sXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiBgc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy8ke3RoaXMuaXRlbS50eXBlfS1zaGVldC5odG1sYFxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGdldERhdGEgKCkge1xuICAgIC8vIHRoaXMuaXRlbS5jaGVja1NraWxsUHJvcGVydGllcygpO1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcbiAgICBzaGVldERhdGEuaGFkTm9uQ2hhcmFjdGVyT3duZXIgPSBzaGVldERhdGEuaGFzT3duZXIgJiYgdGhpcy5hY3Rvcj8udHlwZSAhPT0gJ2NoYXJhY3RlcidcblxuICAgIHNoZWV0RGF0YS5lZmZlY3RzID0gQ29DN0FjdGl2ZUVmZmVjdC5wcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyhcbiAgICAgIHRoaXMuaXRlbS5lZmZlY3RzXG4gICAgKVxuXG4gICAgc2hlZXREYXRhLl9wcm9wZXJ0aWVzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgIHNoZWV0RGF0YS5fcHJvcGVydGllcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogdmFsdWUsXG4gICAgICAgIGlzRW5hYmxlZDogdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWVcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLl9lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBzaGVldERhdGEuX2VyYXMucHVzaCh7XG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSksXG4gICAgICAgIGlzRW5hYmxlZDogKHRoaXMuaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID8/IHt9KVtrZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICBzaGVldERhdGEuX2VyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEuaXNTcGVjaWFsaXplZCA9IHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsXG4gICAgc2hlZXREYXRhLmNhbk1vZGlmeVNwZWMgPVxuICAgICAgIXRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtICYmXG4gICAgICAhdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkoXG4gICAgICBwcm9wZXJ0eUlkLFxuICAgICAgaXNDdHJsS2V5KGV2ZW50KVxuICAgIClcbiAgfVxuXG4gIC8vIGFzeW5jIF9vbkNsaWNrQXR0cmlidXRlQ29udHJvbChldmVudCkge1xuICAvLyAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIC8vICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XG4gIC8vICAgY29uc3QgYWN0aW9uID0gYS5kYXRhc2V0LmFjdGlvbjtcbiAgLy8gICBjb25zdCBhdHRycyA9IHRoaXMub2JqZWN0LmRhdGEuZGF0YS5hdHRyaWJ1dGVzO1xuICAvLyAgIGNvbnN0IGZvcm0gPSB0aGlzLmZvcm07XG5cbiAgLy8gICAvLyBBZGQgbmV3IGF0dHJpYnV0ZVxuICAvLyAgIGlmIChhY3Rpb24gPT09IFwiY3JlYXRlXCIpIHtcbiAgLy8gICAgIGNvbnN0IG5rID0gT2JqZWN0LmtleXMoYXR0cnMpLmxlbmd0aCArIDE7XG4gIC8vICAgICBsZXQgbmV3S2V5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgLy8gICAgIG5ld0tleS5pbm5lckhUTUwgPSBgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImRhdGEuYXR0cmlidXRlcy5hdHRyJHtua30ua2V5XCIgdmFsdWU9XCJhdHRyJHtua31cIi8+YDtcbiAgLy8gICAgIG5ld0tleSA9IG5ld0tleS5jaGlsZHJlblswXTtcbiAgLy8gICAgIGZvcm0uYXBwZW5kQ2hpbGQobmV3S2V5KTtcbiAgLy8gICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KTtcbiAgLy8gICB9XG5cbiAgLy8gICAvLyBSZW1vdmUgZXhpc3RpbmcgYXR0cmlidXRlXG4gIC8vICAgZWxzZSBpZiAoYWN0aW9uID09PSBcImRlbGV0ZVwiKSB7XG4gIC8vICAgICBjb25zdCBsaSA9IGEuY2xvc2VzdChcIi5hdHRyaWJ1dGVcIik7XG4gIC8vICAgICBsaS5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGxpKTtcbiAgLy8gICAgIGF3YWl0IHRoaXMuX29uU3VibWl0KGV2ZW50KTtcbiAgLy8gICB9XG4gIC8vIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kIGFzIHJlcXVpcmVkIGJ5IHRoZSBwYXJlbnQgY2xhc3Mgc3BlY1xuICAgKiBUaGlzIGRlZmluZXMgaG93IHRvIHVwZGF0ZSB0aGUgc3ViamVjdCBvZiB0aGUgZm9ybSB3aGVuIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgLy8gX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpIHtcbiAgLy8gICAvLyBIYW5kbGUgdGhlIGZyZWUtZm9ybSBhdHRyaWJ1dGVzIGxpc3RcbiAgLy8gICBjb25zdCBmb3JkID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKTtcbiAgLy8gICBjb25zdCBmb3JtQXR0cnMgPSBleHBhbmRPYmplY3QoZm9ybURhdGEpLmRhdGEuYXR0cmlidXRlcyB8fCB7fTtcbiAgLy8gICBjb25zdCBhdHRyaWJ1dGVzID0gT2JqZWN0LnZhbHVlcyhmb3JtQXR0cnMpLnJlZHVjZSgob2JqLCB2KSA9PiB7XG4gIC8vICAgICBsZXQgayA9IHZbXCJrZXlcIl0udHJpbSgpO1xuICAvLyAgICAgaWYgKC9bXFxzXFwuXS8udGVzdChrKSkgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXCJBdHRyaWJ1dGUga2V5cyBtYXkgbm90IGNvbnRhaW4gc3BhY2VzIG9yIHBlcmlvZHNcIik7XG4gIC8vICAgICBkZWxldGUgdltcImtleVwiXTtcbiAgLy8gICAgIG9ialtrXSA9IHY7XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHt9KTtcblxuICAvLyAgIC8vIFJlbW92ZSBhdHRyaWJ1dGVzIHdoaWNoIGFyZSBubyBsb25nZXIgdXNlZFxuICAvLyAgIGZvciAobGV0IGsgb2YgT2JqZWN0LmtleXModGhpcy5vYmplY3QuZGF0YS5kYXRhLmF0dHJpYnV0ZXMpKSB7XG4gIC8vICAgICBpZiAoIWF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoaykpIGF0dHJpYnV0ZXNbYC09JHtrfWBdID0gbnVsbDtcbiAgLy8gICB9XG5cbiAgLy8gICAvLyBSZS1jb21iaW5lIGZvcm1EYXRhXG4gIC8vICAgZm9ybURhdGEgPSBPYmplY3QuZW50cmllcyhmb3JtRGF0YSkuZmlsdGVyKGUgPT4gIWVbMF0uc3RhcnRzV2l0aChcImRhdGEuYXR0cmlidXRlc1wiKSkucmVkdWNlKChvYmosIGUpID0+IHtcbiAgLy8gICAgIG9ialtlWzBdXSA9IGVbMV07XG4gIC8vICAgICByZXR1cm4gb2JqO1xuICAvLyAgIH0sIHsgX2lkOiB0aGlzLm9iamVjdC5faWQsIFwiZGF0YS5hdHRyaWJ1dGVzXCI6IGF0dHJpYnV0ZXMgfSk7XG5cbiAgLy8gICAvLyBVcGRhdGUgdGhlIEl0ZW1cbiAgLy8gICByZXR1cm4gdGhpcy5vYmplY3QudXBkYXRlKGZvcm1EYXRhKTtcbiAgLy8gfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHNraWxsTmFtZSA9IGZvcm1EYXRhWydzeXN0ZW0uc2tpbGxOYW1lJ10gfHwgdGhpcy5pdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGVjaWFsKSB7XG4gICAgICBjb25zdCBzcGVjaWFsaXphdGlvbiA9IGZvcm1EYXRhWydzeXN0ZW0uc3BlY2lhbGl6YXRpb24nXSB8fCB0aGlzLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICBmb3JtRGF0YS5uYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgfSBlbHNlIHtcbiAgICAgIGZvcm1EYXRhLm5hbWUgPSBza2lsbE5hbWVcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTcGVsbFNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3BlbGwvbWFpbi5odG1sJyxcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdpdGVtJywgJ3NwZWxsJ10sXG4gICAgICB3aWR0aDogNTAwLFxuICAgICAgaGVpZ2h0OiAnYXV0bycsXG4gICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgc2Nyb2xsWTogWycuYm9keSddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcubmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLmJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBzaGVldERhdGEuaXNPd25lciA9IHRoaXMuaXRlbS5pc093bmVyXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcub3B0aW9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5tb2RpZnlUeXBlKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJyNjYXN0LXNwZWxsJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgdGhpcy5pdGVtLmNhc3QoKVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogVG9nZ2xlIHRoZSBjaGVja2JveGVzIGZvciB0eXBlIHdoZW4gdXNlciBjbGlja3Mgb24gdGhlIGNvcnJlc3BvbmRpbmdcbiAgICogbGFiZWwsIG5vdCBzdXJlIGlmIHRoaXMgd29ya3Mgb24gZW5naW5lcyBvdGhlciB0aGFuIFY4XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtqUXVlcnkuRXZlbnR9IGNsaWNrXG4gICAqL1xuICBtb2RpZnlUeXBlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAvKiogUHJldmVudHMgcHJvcGFnYXRpb24gb2YgdGhlIHNhbWUgZXZlbnQgZnJvbSBiZWluZyBjYWxsZWQgKi9cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IHRvZ2dsZVN3aXRjaCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICByZXR1cm4gdG9nZ2xlU3dpdGNoLnByZXYoKS50cmlnZ2VyKCdjbGljaycpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdTdGF0dXNTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnc3RhdHVzJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3RhdHVzLmh0bWwnLFxuICAgICAgd2lkdGg6IDUyNSxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuaXRlbSkpXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuZWZmZWN0cyA9IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5pdGVtLmVmZmVjdHMsIHsgc3RhdHVzOiBmYWxzZSB9KVxuXG4gICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzID0gW11cblxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuaXRlbS5zeXN0ZW0udHlwZSkpIHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgICAgICBDT0M3LnN0YXR1c1R5cGVba2V5XSA/IENPQzcuc3RhdHVzVHlwZVtrZXldIDogbnVsbFxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbk5vdGVzID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLm5vdGVzLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3VGFsZW50U2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICpcbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3RhbGVudCddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3RhbGVudC5odG1sJyxcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLml0ZW0uc3lzdGVtLnR5cGUpKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICAgICAgQ09DNy50YWxlbnRUeXBlW2tleV0gPyBDT0M3LnRhbGVudFR5cGVba2V5XSA6IG51bGxcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25Ob3RlcyA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5ub3RlcyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBkdXBsaWNhdGUsIGV4cGFuZE9iamVjdCwgZ2FtZSwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1ZlaGljbGVTaGVldCBleHRlbmRzIENvQzdBY3RvclNoZWV0IHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdhY3RvcicsICdpdGVtJywgJ3ZlaGljbGUnXSxcbiAgICAgIHdpZHRoOiA1NTUsXG4gICAgICBoZWlnaHQ6IDQyMCxcbiAgICAgIHJlc2l6YWJsZTogdHJ1ZSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvdmVoaWNsZS5odG1sJyxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuYWN0b3InLCBkcm9wU2VsZWN0b3I6ICcuZHJvcFpvbmUnIH1dLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAvLyAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHBlcmltZW50YWxGZWF0dXJlc1dhcm5pbmcnKVxuICAgIC8vIClcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5wcm9wZXJ0aWVzID0gW11cbiAgICBpZiAodGhpcy5hY3Rvci5zeXN0ZW0ucHJvcGVydGllcy5hcm1lZCkge1xuICAgICAgc2hlZXREYXRhLnByb3BlcnRpZXMucHVzaChnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXJtZWRWZWhpY2xlJykpXG4gICAgfVxuXG4gICAgY29uc3QgZXhwYW5kZWQgPSB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnKVxuICAgIGlmICh0eXBlb2YgZXhwYW5kZWQgPT09ICd1bmRlZmluZWQnKSBzaGVldERhdGEuZXhwYW5kZWQgPSB0cnVlXG4gICAgZWxzZSBzaGVldERhdGEuZXhwYW5kZWQgPSBleHBhbmRlZFxuICAgIGlmIChzaGVldERhdGEuZXhwYW5kZWQpIHtcbiAgICAgIHNoZWV0RGF0YS5vcHRpb25zLmhlaWdodCA9IDQyMFxuICAgIH0gZWxzZSBzaGVldERhdGEub3B0aW9ucy5oZWlnaHQgPSAnYXV0bydcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25Ob3RlcyA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5ub3RlcyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICAvLyBmb3IgKGxldCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2hlZXREYXRhLmRhdGEudHlwZSkpIHtcbiAgICAvLyAgIGlmKCB2YWx1ZSkgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goIENPQzcuYm9va1R5cGVba2V5XT9DT0M3LmJvb2tUeXBlW2tleV06bnVsbCk7XG4gICAgLy8gfVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJy5hZGQtYXJtb3InKS5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLl9vbkFkZEFybW9yKCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5yZW1vdmUtYXJtb3InKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IGF3YWl0IHRoaXMuX29uUmVtb3ZlQXJtb3IoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLmV4cGFuZC1idXR0b24nKS5jbGljayh0aGlzLl9vblRvZ2dsZUV4cGFuZC5iaW5kKHRoaXMpKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICAvLyBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuO1xuICAgIC8vIGh0bWwub24oJ2Ryb3AnLCAoZXZlbnQpID0+IHRoaXMuX29uRHJvcChldmVudCkpO1xuICAgIC8vIGh0bWwuZmluZCgnLnNwZWxsIC5zcGVsbC1uYW1lIGg0JykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25TcGVsbFN1bW1hcnkoZXZlbnQpKTtcbiAgICAvLyBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKHRoaXMuX29uU3BlbGxEZWxldGUuYmluZCh0aGlzKSk7XG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGVFeHBhbmQgKCkge1xuICAgIGNvbnN0IGV4cGFuZGVkID0gdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ2V4cGFuZGVkJylcbiAgICBpZiAoZXhwYW5kZWQpIHtcbiAgICAgIHRoaXMub2xkU2l6ZSA9IHRoaXMucG9zaXRpb24uaGVpZ2h0XG4gICAgICB0aGlzLnBvc2l0aW9uLmhlaWdodCA9ICdhdXRvJyAvLyBSZXNldCB0aGUgc3RvcmVkIHBvc2l0aW9uIHRvIGZvcmNlIHRvIHJlY2FsY3VsYXRlIHdpbmRvdyBzaXplIFRPRE86IFN0b3JlIHByZXZpb3VzIHBvc2l0aW9uIHRvIHJlc3RvcmUgaXQgaW5zdGVhZCBvZiBhdXRvXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucG9zaXRpb24uaGVpZ2h0ID0gdGhpcy5vbGRTaXplIHx8IDQyMCAvLyBSZXNldCB0aGUgc3RvcmVkIHBvc2l0aW9uIHRvIGZvcmNlIHRvIHJlY2FsY3VsYXRlIHdpbmRvdyBzaXplIFRPRE86IFN0b3JlIHByZXZpb3VzIHBvc2l0aW9uIHRvIHJlc3RvcmUgaXQgaW5zdGVhZCBvZiBhdXRvXG4gICAgfVxuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZygnQ29DNycsICdleHBhbmRlZCcsICFleHBhbmRlZClcbiAgfVxuXG4gIGFzeW5jIF9vbkFkZEFybW9yICgpIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUoXG4gICAgICB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyB8fCBbXVxuICAgIClcbiAgICBsb2NhdGlvbnMucHVzaCh7IG5hbWU6IG51bGwsIHZhbHVlOiBudWxsIH0pXG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJzogbG9jYXRpb25zIH0pXG4gIH1cblxuICBhc3luYyBfb25SZW1vdmVBcm1vciAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbG9jYXRpb24gPSBidXR0b24uY2xvc2VzdCgnLmFybW9yJylcbiAgICBjb25zdCBpbmRleCA9IGxvY2F0aW9uLmRhdGFzZXQuaW5kZXhcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUoXG4gICAgICB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyB8fCBudWxsXG4gICAgKVxuICAgIGlmICghbG9jYXRpb25zKSByZXR1cm5cbiAgICBsb2NhdGlvbnMuc3BsaWNlKGluZGV4LCAxKVxuICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyc6IGxvY2F0aW9ucyB9KVxuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHtcbiAgICBzdXBlci5vbkNsb3NlU2hlZXQoKVxuICAgIC8vIHRoaXMuYWN0b3IubG9ja2VkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIC8qICBGb3JtIFN1Ym1pc3Npb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4gIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHN5c3RlbSA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSk/LnN5c3RlbVxuICAgIGlmIChzeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMnXSA9IE9iamVjdC52YWx1ZXMoXG4gICAgICAgIHN5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyB8fCBbXVxuICAgICAgKVxuICAgIH1cblxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdXZWFwb25TaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKlxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnaXRlbSddLFxuICAgICAgd2lkdGg6IDU0NSxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtdGFicycsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdza2lsbHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqL1xuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIGNvbnN0IHBhdGggPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcydcbiAgICByZXR1cm4gYCR7cGF0aH0vd2VhcG9uLXNoZWV0Lmh0bWxgXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuY29tYmF0U2tpbGwgPSBbXVxuXG4gICAgc2hlZXREYXRhLmhhc093bmVyID0gdGhpcy5pdGVtLmlzRW1iZWRkZWQgPT09IHRydWVcbiAgICBpZiAoc2hlZXREYXRhLmhhc093bmVyKSB7XG4gICAgICBzaGVldERhdGEuZmlyZWFybVNraWxscyA9IHRoaXMuYWN0b3IuZmlyZWFybVNraWxsc1xuICAgICAgc2hlZXREYXRhLmZpZ2h0aW5nU2tpbGxzID0gdGhpcy5hY3Rvci5maWdodGluZ1NraWxsc1xuICAgICAgc2hlZXREYXRhLmNvbWJhdFNraWxsID0gdGhpcy5pdGVtLmFjdG9yLml0ZW1zLmZpbHRlcihpdGVtID0+IHtcbiAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9KVxuXG4gICAgICBzaGVldERhdGEuY29tYmF0U2tpbGwuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLl9wcm9wZXJ0aWVzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMucHVzaCh7XG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IHZhbHVlLFxuICAgICAgICBpc0VuYWJsZWQ6IHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5fZXJhcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xuICAgICAgICBwcmljZTogdGhpcy5pdGVtLnN5c3RlbS5wcmljZVtrZXldID8/IDAsXG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSksXG4gICAgICAgIGlzRW5hYmxlZDogKHRoaXMuaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID8/IHt9KVtrZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cbiAgICBzaGVldERhdGEuX2VyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBzaGVldERhdGEudXNlc0FsdGVybmF0ZVNraWxsID1cbiAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5hdXRvID09PSB0cnVlIHx8XG4gICAgICB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuYnJzdCA9PT0gdHJ1ZSB8fFxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnRocm93biA9PT0gdHJ1ZVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblNwZWNpYWwgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24uc3BlY2lhbCxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cbiAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25DbGlja1RvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLndlYXBvbi1wcm9wZXJ0eScpLmNsaWNrKHRoaXMuX29uUHJvcGVydHlDbGljay5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gZXZlbnRcbiAgICovXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudG9nZ2xlLXN3aXRjaCcpLmRhdGFzZXQucHJvcGVydHlcbiAgICBhd2FpdCB0aGlzLml0ZW0udG9nZ2xlUHJvcGVydHkoXG4gICAgICBwcm9wZXJ0eUlkLFxuICAgICAgaXNDdHJsS2V5KGV2ZW50KVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIF9vblByb3BlcnR5Q2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHByb3BlcnR5SWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy53ZWFwb24tcHJvcGVydHknKS5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZVByb3BlcnR5KHByb3BlcnR5SWQpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lLCBIb29rcyAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1GaWx0ZXIgKGUpIHtcbiAgY29uc3QgYXBwSWQgPSBlLmN1cnJlbnRUYXJnZXQubmFtZS5yZXBsYWNlKC9eY29jN1teMC05XSsoXFxkKykkLywgJyQxJylcbiAgY29uc3QgYXBwID0gJCgnZGl2LmFwcFtkYXRhLWFwcGlkPScgKyBhcHBJZCArICddJylcbiAgY29uc3QgdHlwZSA9IGFwcC5maW5kKCdzZWxlY3RbbmFtZT1jb2M3dHlwZScgKyBhcHBJZCArICddJykudmFsKClcbiAgY29uc3QgbmFtZSA9IGFwcC5maW5kKCdpbnB1dFtuYW1lPXNlYXJjaF0nKS52YWwoKVxuICBjb25zdCBlcmFFbGVtZW50ID0gYXBwLmZpbmQoJ3NlbGVjdFtuYW1lPWNvYzdlcmEnICsgYXBwSWQgKyAnXScpXG4gIGxldCBlcmEgPSAnJ1xuICBzd2l0Y2ggKHR5cGUpIHtcbiAgICBjYXNlICdzZXR1cCc6XG4gICAgY2FzZSAnc2tpbGwnOlxuICAgIGNhc2UgJ3dlYXBvbic6XG4gICAgICBlcmFFbGVtZW50LmNsb3Nlc3QoJ2Rpdi5lcmFfc2VsZWN0Jykuc2hvdygpXG4gICAgICBlcmEgPSBlcmFFbGVtZW50LnZhbCgpXG4gICAgICBicmVha1xuICAgIGRlZmF1bHQ6XG4gICAgICBlcmFFbGVtZW50LmNsb3Nlc3QoJ2Rpdi5lcmFfc2VsZWN0JykuaGlkZSgpXG4gIH1cbiAgY29uc3QgaXRlbXMgPSBhd2FpdCBnYW1lLnBhY2tzLmdldChhcHAuZGF0YSgncGFja0lkJykpPy5nZXREb2N1bWVudHMoKVxuICBpZiAodHlwZW9mIGl0ZW1zID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVyblxuICB9XG4gIGNvbnN0IHNob3cgPSBbXVxuICBjb25zdCBuYW1lRmlsdGVyID0gbmV3IFJlZ0V4cChSZWdFeHAuZXNjYXBlKG5hbWUpLCAnaScpXG4gIGZvciAoY29uc3QgWywgaXRlbV0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbXMpKSB7XG4gICAgbGV0IGZpbHRlciA9IHRydWVcbiAgICBpZiAoZmlsdGVyICYmIG5hbWUgIT09ICcnKSB7XG4gICAgICBmaWx0ZXIgPSBpdGVtLm5hbWUubWF0Y2gobmFtZUZpbHRlcilcbiAgICB9XG4gICAgaWYgKGZpbHRlciAmJiB0eXBlICE9PSAnJykge1xuICAgICAgZmlsdGVyID0gaXRlbS50eXBlID09PSB0eXBlXG4gICAgfVxuICAgIGlmIChmaWx0ZXIgJiYgZXJhICE9PSAnJykge1xuICAgICAgY29uc3QgZXJhcyA9IGl0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhc1xuICAgICAgaWYgKGVyYXMgJiYgT2JqZWN0LmtleXMoZXJhcykubGVuZ3RoID4gMCAmJiAhKGVyYXNbZXJhXSA/PyBmYWxzZSkpIHtcbiAgICAgICAgZmlsdGVyID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZpbHRlcikge1xuICAgICAgc2hvdy5wdXNoKGl0ZW0uaWQpXG4gICAgfVxuICB9XG4gIGFwcC5maW5kKCdvbC5kaXJlY3RvcnktbGlzdCBsaScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc3R5bGUuZGlzcGxheSA9IHNob3cuaW5jbHVkZXModGhpcy5kYXRhc2V0LmRvY3VtZW50SWQpXG4gICAgICA/ICdmbGV4J1xuICAgICAgOiAnbm9uZSdcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbXBlbmRpdW1GaWx0ZXIgKCkge1xuICBIb29rcy5vbigncmVuZGVyQ29tcGVuZGl1bScsIGFzeW5jIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgICBpZiAoYXBwLmNvbGxlY3Rpb24uZG9jdW1lbnROYW1lID09PSAnSXRlbScpIHtcbiAgICAgIGF3YWl0IGFwcC5jb2xsZWN0aW9uLmdldEluZGV4KClcbiAgICAgIGNvbnN0IHR5cGVzID0gWy4uLm5ldyBTZXQoZGF0YS5pbmRleC5maWx0ZXIoaSA9PiBpLm5hbWUgIT09ICcjW0NGX3RlbXBFbnRpdHldJykubWFwKGl0ZW0gPT4gaXRlbS50eXBlKSldXG4gICAgICBjb25zdCBzZWxlY3QgPSBbXVxuICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICc8b3B0aW9uIHZhbHVlPVwiXCI+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbGwnKSArICc8L29wdGlvbj4nXG4gICAgICApXG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ2FyY2hldHlwZScpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiYXJjaGV0eXBlXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuQXJjaGV0eXBlJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdib29rJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJib29rXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuQm9vaycpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnaXRlbScpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiaXRlbVwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLkl0ZW0nKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ29jY3VwYXRpb24nKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIm9jY3VwYXRpb25cIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5PY2N1cGF0aW9uJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdzZXR1cCcpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwic2V0dXBcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5TZXR1cCcpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnc2tpbGwnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInNraWxsXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU2tpbGwnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3NwZWxsJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJzcGVsbFwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNwZWxsJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdzdGF0dXMnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInN0YXR1c1wiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlN0YXR1cycpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygndGFsZW50JykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJ0YWxlbnRcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5UYWxlbnQnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3dlYXBvbicpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwid2VhcG9uXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuV2VhcG9uJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgY29uc3QgZXJhcyA9IFtdXG4gICAgICBlcmFzLnB1c2goXG4gICAgICAgICc8b3B0aW9uIHZhbHVlPVwiXCI+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BbGwnKSArICc8L29wdGlvbj4nXG4gICAgICApXG4gICAgICBmb3IgKGNvbnN0IGVyYSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpLm1hcChlID0+IHsgcmV0dXJuIHsgaWQ6IGVbMF0sIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZShlWzFdKSB9IH0pLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KSkge1xuICAgICAgICBlcmFzLnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCInICtcbiAgICAgICAgICAgIGVyYS5pZCArXG4gICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICBlcmEubmFtZSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBodG1sLmRhdGEoJ3BhY2tJZCcsIGFwcC5tZXRhZGF0YS5pZClcbiAgICAgIGxldCB1bmNvbW1vbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbFJhcml0eVNob3J0JylcbiAgICAgIGlmICh1bmNvbW1vbiA9PT0gJ0NvQzcuU2tpbGxSYXJpdHlTaG9ydCcpIHtcbiAgICAgICAgdW5jb21tb24gPSAnPz8nXG4gICAgICB9XG4gICAgICBodG1sLmZpbmQoJ2xpLmRpcmVjdG9yeS1pdGVtJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9ICQodGhpcylcbiAgICAgICAgbGV0IGl0ZW0gPSBbXVxuICAgICAgICBpZiAodHlwZW9mIGRhdGEuaW5kZXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgLy8gREVQUkVDSUFURUQgSU4gdjExXG4gICAgICAgICAgaXRlbSA9IGRhdGEuaW5kZXguZmluZChpID0+IGkuX2lkID09PSByb3cuZGF0YSgnZG9jdW1lbnQtaWQnKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtID0gYXBwLmNvbGxlY3Rpb24uaW5kZXguZ2V0KHJvdy5kYXRhKCdkb2N1bWVudC1pZCcpKVxuICAgICAgICB9XG4gICAgICAgIGlmIChpdGVtICYmIGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgIHJvdy5maW5kKCdhJykuaHRtbChpdGVtLm5hbWUgKyAnICgnICsgKGl0ZW0uc3lzdGVtPy5iYXNlID8/ICc/JykgKyAnJScgKyAoKGl0ZW0uc3lzdGVtPy5wcm9wZXJ0aWVzPy5yYXJpdHkgPz8gZmFsc2UpID8gJyAnICsgdW5jb21tb24gOiAnJykgKyAnKScpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCdoZWFkZXIuZGlyZWN0b3J5LWhlYWRlcicpXG4gICAgICAgIC5hZnRlcihcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbXBlbmRpdW1maWx0ZXJcIj4nICtcbiAgICAgICAgICAnPGRpdiBjbGFzcz1cImhlYWRlci1zZWFyY2ggZmxleHJvd1wiPjxpIGNsYXNzPVwiZmFzIGZhLWxheWVyLWdyb3VwXCI+PC9pPjxzZWxlY3QgbmFtZT1cImNvYzd0eXBlJyArIGFwcC5hcHBJZCArICdcIiBzdHlsZT1cIlwiPicgKyBzZWxlY3Quam9pbignJykgKyAnPC9zZWxlY3Q+PC9kaXY+JyArXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJoZWFkZXItc2VhcmNoIGZsZXhyb3cgZXJhX3NlbGVjdFwiIHN0eWxlPVwiZGlzcGxheTpub25lXCI+PGkgY2xhc3M9XCJmYXMgZmEtbGF5ZXItZ3JvdXBcIj48L2k+PHNlbGVjdCBuYW1lPVwiY29jN2VyYScgKyBhcHAuYXBwSWQgKyAnXCIgc3R5bGU9XCJcIj4nICsgZXJhcy5qb2luKCcnKSArICc8L3NlbGVjdD48L2Rpdj4nICtcbiAgICAgICAgICAnPC9kaXY+J1xuICAgICAgICApXG4gICAgICBodG1sLmZpbmQoJ3NlbGVjdCcpLmNoYW5nZShwZXJmb3JtRmlsdGVyLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJ2lucHV0Jykua2V5dXAocGVyZm9ybUZpbHRlci5iaW5kKHRoaXMpKVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBBY3RvciwgQ2FyZCwgQ09ORklHLCBmbGF0dGVuT2JqZWN0LCBnYW1lLCBJdGVtLCBKb3VybmFsRW50cnksIE1hY3JvLCBQbGF5bGlzdCwgUm9sbFRhYmxlLCBTY2VuZSwgU2NlbmVOYXZpZ2F0aW9uLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0NJRCB7XG4gIHN0YXRpYyBpbml0ICgpIHtcbiAgICBDT05GSUcuQWN0b3IuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICAvLyBDT05GSUcuQ2FyZHMuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuSXRlbS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5JdGVtLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdzeXN0ZW0uYmFzZScpXG4gICAgQ09ORklHLkl0ZW0uY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ3N5c3RlbS5wcm9wZXJ0aWVzJylcbiAgICBDT05GSUcuSm91cm5hbEVudHJ5LmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLk1hY3JvLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLlBsYXlsaXN0LmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLlJvbGxUYWJsZS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5TY2VuZS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIGdhbWUuc3lzdGVtLmFwaSA9IHtcbiAgICAgIGNvY2lkOiBDb0NJRFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIFJlZ0V4cCBmb3IgdmFsaWQgdHlwZSBhbmQgZm9ybWF0XG4gICAqIEByZXR1cm5zIFJlZ0V4cFxuICAgKi9cbiAgc3RhdGljIHJlZ0V4S2V5ICgpIHtcbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXignICsgT2JqZWN0LmtleXMoQ29DSUQuZ2FtZVByb3BlcnR5TG9va3VwKS5qb2luKCd8JykgKyAnKVxcXFwuKC4qPylcXFxcLiguKykkJylcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQ29DSUQgdHlwZS5zdWJ0eXBlLiBiYXNlZCBvbiBkb2N1bWVudFxuICAgKiBAcGFyYW0gZG9jdW1lbnRcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ2V0UHJlZml4IChkb2N1bWVudCkge1xuICAgIGZvciAoY29uc3QgdHlwZSBpbiBDb0NJRC5kb2N1bWVudE5hbWVMb29rdXApIHtcbiAgICAgIGlmIChkb2N1bWVudCBpbnN0YW5jZW9mIENvQ0lELmRvY3VtZW50TmFtZUxvb2t1cFt0eXBlXSkge1xuICAgICAgICByZXR1cm4gdHlwZSArICcuJyArIChkb2N1bWVudC50eXBlID8/ICcnKSArICcuJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQ29DSUQgdHlwZS5zdWJ0eXBlLm5hbWUgYmFzZWQgb24gZG9jdW1lbnRcbiAgICogQHBhcmFtIGRvY3VtZW50XG4gICAqIEByZXR1cm5zIHN0cmluZ1xuICAgKi9cbiAgc3RhdGljIGd1ZXNzSWQgKGRvY3VtZW50KSB7XG4gICAgcmV0dXJuIENvQ0lELmdldFByZWZpeChkb2N1bWVudCkgKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKGRvY3VtZW50Lm5hbWUpXG4gIH1cblxuICAvKipcbiAgICogR2V0IENvQ0lEIHR5cGUuc3VidHlwZS5wYXJ0aWFsLW5hbWUoLXJlbW92ZWQpXG4gICAqIEBwYXJhbSBrZXlcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ3Vlc3NHcm91cEZyb21LZXkgKGlkKSB7XG4gICAgaWYgKGlkKSB7XG4gICAgICBjb25zdCBrZXkgPSBpZC5yZXBsYWNlKC8oW15cXFxcLi1dKykkLywgJycpXG4gICAgICBpZiAoa2V5LnN1YnN0cigtMSkgPT09ICctJykge1xuICAgICAgICByZXR1cm4ga2V5XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDb0NJRCB0eXBlLnN1YnR5cGUucGFydGlhbC1uYW1lKC1yZW1vdmVkKVxuICAgKiBAcGFyYW0gZG9jdW1lbnRcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZ3Vlc3NHcm91cEZyb21Eb2N1bWVudCAoZG9jdW1lbnQpIHtcbiAgICByZXR1cm4gQ29DSUQuZ3Vlc3NHcm91cEZyb21LZXkoZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cmFuc2xhdGlvbiBvZiBlcmEga2V5XG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHJldHVybnMgc3RyaW5nXG4gICAqL1xuICBzdGF0aWMgZXJhVGV4dCAoZXJhKSB7XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55JylcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoQ09DNy5lcmFzW2VyYV0gPz8gJ0NvQzcuQ29DSURGbGFnLmVycm9yLnVua25vd24tZXJhJywgeyBlcmEgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCBpdGVtcyB3aXRoIG1hdGNoaW5nIENvQ0lEcywgbGFuZ3VhZ2UsIGFuZCBlcmFzXG4gICAqIHVpLm5vdGlmaWNhdGlvbnMud2FybiBmb3IgbWlzc2luZyBrZXlzXG4gICAqIEBwYXJhbSBpdGVtTGlzdCBhcnJheSBvZiBDb0NJRHNcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKCdlbicsICdlcycsIC4uLilcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBleHBhbmRJdGVtQXJyYXkgKHsgaXRlbUxpc3QsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gdHJ1ZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBsZXQgaXRlbXMgPSBbXVxuICAgIGNvbnN0IGNvY2lkcyA9IGl0ZW1MaXN0LmZpbHRlcihpdCA9PiB0eXBlb2YgaXQgPT09ICdzdHJpbmcnKVxuICAgIGl0ZW1zID0gaXRlbUxpc3QuZmlsdGVyKGl0ID0+IHR5cGVvZiBpdCAhPT0gJ3N0cmluZycpXG5cbiAgICBpZiAoY29jaWRzLmxlbmd0aCkge1xuICAgICAgY29uc3QgZm91bmQgPSBhd2FpdCBDb0NJRC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogQ29DSUQubWFrZUdyb3VwUmVnRXgoY29jaWRzKSwgdHlwZTogJ2knLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgICAgIGNvbnN0IGFsbCA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGNvY2lkIG9mIGNvY2lkcykge1xuICAgICAgICBjb25zdCBpdGVtID0gZm91bmQuZmluZChpID0+IGkuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPT09IGNvY2lkKVxuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgIGFsbC5wdXNoKGl0ZW0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhbGwubGVuZ3RoIDwgY29jaWRzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBub3RtaXNzaW5nID0gW11cbiAgICAgICAgZm9yIChjb25zdCBkb2Mgb2YgYWxsKSB7XG4gICAgICAgICAgbm90bWlzc2luZy5wdXNoKGRvYy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZClcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJhID09PSB0cnVlKSB7XG4gICAgICAgICAgZXJhID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKVxuICAgICAgICB9XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci5kb2N1bWVudHMtbm90LWZvdW5kJywgeyBjb2NpZHM6IGNvY2lkcy5maWx0ZXIoeCA9PiAhbm90bWlzc2luZy5pbmNsdWRlcyh4KSkuam9pbignLCAnKSwgbGFuZywgZXJhOiBDb0NJRC5lcmFUZXh0KGVyYSkgfSkpXG4gICAgICB9XG4gICAgICBpdGVtcyA9IGl0ZW1zLmNvbmNhdChhbGwpXG4gICAgfVxuICAgIHJldHVybiBpdGVtc1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgaXRlbSB3aXRoIG1hdGNoaW5nIENvQ0lEcyBmcm9tIGxpc3RcbiAgICogRW1wdHkgYXJyYXkgcmV0dXJuIGZvciBtaXNzaW5nIGtleXNcbiAgICogQHBhcmFtIGNvY2lkIGEgc2luZ2xlIGNvY2lkXG4gICAqIEBwYXJhbSBsaXN0IGFycmF5IG9mIGl0ZW1zXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgZmluZENvY0lkSW5MaXN0IChjb2NpZCwgbGlzdCkge1xuICAgIGxldCBpdGVtTmFtZSA9ICcnXG4gICAgY29uc3QgQ29DSURLZXlzID0gZmxhdHRlbk9iamVjdChnYW1lLmkxOG4udHJhbnNsYXRpb25zLkNvQzcuQ29DSURGbGFnLmtleXMpXG4gICAgaWYgKHR5cGVvZiBDb0NJREtleXNbY29jaWRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaXRlbU5hbWUgPSBDb0NJREtleXNbY29jaWRdXG4gICAgfVxuICAgIHJldHVybiAodHlwZW9mIGxpc3QuZmlsdGVyID09PSAndW5kZWZpbmVkJyA/IE9iamVjdC52YWx1ZXMobGlzdCkgOiBsaXN0KS5maWx0ZXIoaSA9PiBpLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkID09PSBjb2NpZCB8fCAoaXRlbU5hbWUgIT09ICcnICYmIGl0ZW1OYW1lID09PSBpLm5hbWUpKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgUmVnRXhwIG1hdGNoaW5nIGFsbCBzdHJpbmdzIGluIGFycmF5XG4gICAqIEBwYXJhbSBjb2NpZHMgYW4gYXJyYXkgb2YgQ29DSUQgc3RyaW5nc1xuICAgKiBAcGFyYW0gbGlzdCBhcnJheSBvZiBpdGVtc1xuICAgKiBAcmV0dXJucyBSZWdFeHBcbiAgICovXG4gIHN0YXRpYyBtYWtlR3JvdXBSZWdFeCAoY29jaWRzKSB7XG4gICAgaWYgKHR5cGVvZiBjb2NpZHMgPT09ICdzdHJpbmcnKSB7XG4gICAgICBjb2NpZHMgPSBbY29jaWRzXVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvY2lkcyA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGNvY2lkcy5maWx0ZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgY29uc3Qgc3BsaXRzID0ge31cbiAgICBjb25zdCByZ3ggPSBDb0NJRC5yZWdFeEtleSgpXG4gICAgZm9yIChjb25zdCBpIG9mIGNvY2lkcykge1xuICAgICAgY29uc3Qga2V5ID0gaS5tYXRjaChyZ3gpXG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3BsaXRzW2tleVsxXV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc3BsaXRzW2tleVsxXV0gPSB7fVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygc3BsaXRzW2tleVsxXV1ba2V5WzJdXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzcGxpdHNba2V5WzFdXVtrZXlbMl1dID0gW11cbiAgICAgICAgfVxuICAgICAgICBzcGxpdHNba2V5WzFdXVtrZXlbMl1dLnB1c2goa2V5WzNdKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU2xpZW50bHkgZXJyb3JcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVnRXhQYXJ0cyA9IFtdXG4gICAgZm9yIChjb25zdCB0IGluIHNwbGl0cykge1xuICAgICAgY29uc3Qgcm93ID0gW11cbiAgICAgIGZvciAoY29uc3QgcyBpbiBzcGxpdHNbdF0pIHtcbiAgICAgICAgaWYgKHNwbGl0c1t0XVtzXS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgcm93LnB1c2gocyArICdcXFxcLicgKyAnKCcgKyBzcGxpdHNbdF1bc10uam9pbignfCcpICsgJyknKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJvdy5wdXNoKHMgKyAnXFxcXC4nICsgc3BsaXRzW3RdW3NdLmpvaW4oJycpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocm93Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmVnRXhQYXJ0cy5wdXNoKHQgKyAnXFxcXC4nICsgJygnICsgcm93LmpvaW4oJ3wnKSArICcpJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZ0V4UGFydHMucHVzaCh0ICsgJ1xcXFwuJyArIHJvdy5qb2luKCcnKSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHJlZ0V4UGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14oJyArIHJlZ0V4UGFydHMuam9pbignfCcpICsgJykkJylcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcmVnRXhQYXJ0cy5qb2luKCcnKSArICckJylcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCBkb2N1bWVudHMgd2l0aCBhbiBDb0NJRCBtYXRjaGluZyB0aGUgcmVnZXggYW5kIG1hdGNoaW5nIHRoZSBkb2N1bWVudCB0eXBlXG4gICAqIGFuZCBsYW5ndWFnZSwgZnJvbSB0aGUgc3BlY2lmaWVkIHNjb3BlLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKCdlbicsICdlcycsIC4uLilcbiAgICogQHBhcmFtIHNjb3BlIGRlZmluZXMgd2hlcmUgaXQgd2lsbCBsb29rOlxuICAgKiAqKm1hdGNoKiogc2FtZSBsb2dpYyBhcyBmcm9tQ29DSUQgZnVuY3Rpb24sXG4gICAqICoqYWxsKio6IGZpbmQgaW4gYm90aCB3b3JsZCAmIGNvbXBlbmRpYSxcbiAgICogKip3b3JsZCoqOiBvbmx5IHNlYXJjaCBpbiB3b3JsZCxcbiAgICogKipjb21wZW5kaXVtcyoqOiBvbmx5IHNlYXJjaCBpbiBjb21wZW5kaXVtc1xuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBmcm9tQ29DSURSZWdleEFsbCAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgc2NvcGUgPSAnbWF0Y2gnLCBsYW5nRmFsbGJhY2sgPSB0cnVlLCBzaG93TG9hZGluZyA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGlmICghY29jaWRSZWdFeHApIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBbXVxuXG4gICAgbGV0IGNvdW50ID0gMFxuICAgIGlmIChzaG93TG9hZGluZykge1xuICAgICAgaWYgKFsnbWF0Y2gnLCAnYWxsJywgJ3dvcmxkJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICAgIGNvdW50KytcbiAgICAgIH1cbiAgICAgIGlmIChbJ21hdGNoJywgJ2FsbCcsICdjb21wZW5kaXVtcyddLmluY2x1ZGVzKHNjb3BlKSkge1xuICAgICAgICBjb3VudCA9IGNvdW50ICsgZ2FtZS5wYWNrcy5zaXplXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFsnbWF0Y2gnLCAnYWxsJywgJ3dvcmxkJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICBjb25zdCB3b3JsZERvY3VtZW50cyA9IGF3YWl0IENvQ0lELmRvY3VtZW50c0Zyb21Xb3JsZCh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgcHJvZ3Jlc3NCYXI6IGNvdW50IH0pXG4gICAgICBpZiAoc2NvcGUgPT09ICdtYXRjaCcgJiYgd29ybGREb2N1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIGlmIChzaG93TG9hZGluZykge1xuICAgICAgICAgIFNjZW5lTmF2aWdhdGlvbi5kaXNwbGF5UHJvZ3Jlc3NCYXIoeyBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRVUC5QYWNrYWdlc0xvYWRpbmcnKSwgcGN0OiAxMDAgfSlcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJBbGxDb0NJRCh3b3JsZERvY3VtZW50cywgbGFuZ0ZhbGxiYWNrICYmIGxhbmcgIT09ICdlbicpXG4gICAgICB9XG4gICAgICByZXN1bHQuc3BsaWNlKDAsIDAsIC4uLndvcmxkRG9jdW1lbnRzKVxuICAgIH1cblxuICAgIGlmIChbJ21hdGNoJywgJ2FsbCcsICdjb21wZW5kaXVtcyddLmluY2x1ZGVzKHNjb3BlKSkge1xuICAgICAgY29uc3QgY29tcGVuZGlhRG9jdW1lbnRzID0gYXdhaXQgQ29DSUQuZG9jdW1lbnRzRnJvbUNvbXBlbmRpYSh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgcHJvZ3Jlc3NCYXI6IGNvdW50IH0pXG5cbiAgICAgIHJlc3VsdC5zcGxpY2UocmVzdWx0Lmxlbmd0aCwgMCwgLi4uY29tcGVuZGlhRG9jdW1lbnRzKVxuICAgIH1cblxuICAgIGlmIChzaG93TG9hZGluZykge1xuICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IDEwMCB9KVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmZpbHRlckFsbENvQ0lEKHJlc3VsdCwgbGFuZ0ZhbGxiYWNrICYmIGxhbmcgIT09ICdlbicpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgZG9jdW1lbnRzIHdpdGggYW4gQ29DSUQsIGxhbmd1YWdlLCBhbmQgZXJhIGZyb20gdGhlIHNwZWNpZmllZCBzY29wZS5cbiAgICogRW1wdHkgYXJyYXkgcmV0dXJuIGZvciBubyBtYXRjaGVzXG4gICAqIEBwYXJhbSBjb2NpZCBhIHNpbmdsZSBjb2NpZFxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBzY29wZSBkZWZpbmVzIHdoZXJlIGl0IHdpbGwgbG9vazpcbiAgICogKiptYXRjaCoqIHNhbWUgbG9naWMgYXMgZnJvbUNvQ0lEIGZ1bmN0aW9uLFxuICAgKiAqKmFsbCoqOiBmaW5kIGluIGJvdGggd29ybGQgJiBjb21wZW5kaWEsXG4gICAqICoqd29ybGQqKjogb25seSBzZWFyY2ggaW4gd29ybGQsXG4gICAqICoqY29tcGVuZGl1bXMqKjogb25seSBzZWFyY2ggaW4gY29tcGVuZGl1bXNcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbUNvQ0lEQWxsICh7IGNvY2lkLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IGZhbHNlLCBzY29wZSA9ICdtYXRjaCcsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFjb2NpZCB8fCB0eXBlb2YgY29jaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgY29uc3QgcGFydHMgPSBjb2NpZC5tYXRjaChDb0NJRC5yZWdFeEtleSgpKVxuICAgIGlmICghcGFydHMpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBpZiAobGFuZyA9PT0gJycpIHtcbiAgICAgIGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIH1cbiAgICByZXR1cm4gQ29DSUQuZnJvbUNvQ0lEUmVnZXhBbGwoeyBjb2NpZFJlZ0V4cDogbmV3IFJlZ0V4cCgnXicgKyBDb0M3VXRpbGl0aWVzLnF1b3RlUmVnRXhwKGNvY2lkKSArICckJyksIHR5cGU6IHBhcnRzWzFdLCBsYW5nLCBlcmEsIHNjb3BlLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBvbmx5IHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50cyBmb3IgZWFjaCBDb0NJRCB0aGF0IG1hdGNoZXMgdGhlIFJlZ0V4cCBhbmRcbiAgICogbGFuZ3VhZ2UsIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnRzIGluIHRoZSBXb3JsZCB0YWtpbmcgcHJlY2VkZW5jZSBvdmVyXG4gICAqIGFueSBkb2N1bWVudHMgaW4gY29tcGVuZGl1bSBwYWNrcy5cbiAgICogRW1wdHkgYXJyYXkgcmV0dXJuIGZvciBubyBtYXRjaGVzXG4gICAqIEBwYXJhbSBjb2NpZFJlZ0V4cCByZWdleCB1c2VkIG9uIHRoZSBDb0NJRFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgd2FudGVkIENvQ0lELCBmb3IgZXhhbXBsZSAnaScsICdhJywgJ2plJ1xuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoXCJlblwiLCBcImVzXCIsIC4uLilcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICovXG4gIHN0YXRpYyBhc3luYyBmcm9tQ29DSURSZWdleEJlc3QgKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gdHJ1ZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBjb25zdCBhbGxEb2N1bWVudHMgPSBhd2FpdCB0aGlzLmZyb21Db0NJRFJlZ2V4QWxsKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgc2NvcGU6ICdhbGwnLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gICAgY29uc3QgYmVzdERvY3VtZW50cyA9IHRoaXMuZmlsdGVyQmVzdENvQ0lEKGFsbERvY3VtZW50cylcbiAgICByZXR1cm4gYmVzdERvY3VtZW50c1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgb25seSB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudCBmb3IgQ29DSUQgdGhhdCBtYXRjaGVzIHRoZSBsYW5ndWFnZSxcbiAgICogd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudHMgaW4gdGhlIFdvcmxkIHRha2luZyBwcmVjZWRlbmNlIG92ZXJcbiAgICogYW55IGRvY3VtZW50c1xuICAgKiBpbiBjb21wZW5kaXVtIHBhY2tzLlxuICAgKiBAcGFyYW0gY29jaWQgc3RyaW5nIENvQ0lEXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0IChcImVuXCIsIFwiZXNcIiwgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKi9cbiAgc3RhdGljIGZyb21Db0NJRCAoY29jaWQsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gdHJ1ZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSkge1xuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURCZXN0KHsgY29jaWQsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrIH0pXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBvbmx5IHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50IGZvciBDb0NJRCB0aGF0IG1hdGNoZXMgdGhlIGxhbmd1YWdlLFxuICAgKiB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50cyBpbiB0aGUgV29ybGQgdGFraW5nIHByZWNlZGVuY2Ugb3ZlclxuICAgKiBhbnkgZG9jdW1lbnRzXG4gICAqIGluIGNvbXBlbmRpdW0gcGFja3MuXG4gICAqIEBwYXJhbSBjb2NpZCBzdHJpbmcgQ29DSURcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKFwiZW5cIiwgXCJlc1wiLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqL1xuICBzdGF0aWMgZnJvbUNvQ0lEQmVzdCAoeyBjb2NpZCwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSB0cnVlLCBsYW5nRmFsbGJhY2sgPSB0cnVlLCBzaG93TG9hZGluZyA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGlmICghY29jaWQgfHwgdHlwZW9mIGNvY2lkICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSBjb2NpZC5zcGxpdCgnLicpWzBdXG4gICAgY29uc3QgY29jaWRSZWdFeHAgPSBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoY29jaWQpICsgJyQnKVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2ssIHNob3dMb2FkaW5nIH0pXG4gIH1cblxuICAvKipcbiAgICogRm9yIGFuIGFycmF5IG9mIGRvY3VtZW50cywgcmV0dXJucyBvbmx5IHRob3NlIHRoYXQgYXJlIHRoZSBcImJlc3RcIiB2ZXJzaW9uIG9mIHRoZWlyIENvQ0lEXG4gICAqIEBwYXJhbSBkb2N1bWVudHNcbiAgICogQHJldHVybnNcbiAgICovXG4gIHN0YXRpYyBmaWx0ZXJCZXN0Q29DSUQgKGRvY3VtZW50cykge1xuICAgIGNvbnN0IGJlc3RNYXRjaERvY3VtZW50cyA9IG5ldyBNYXAoKVxuXG4gICAgZm9yIChjb25zdCBkb2Mgb2YgZG9jdW1lbnRzKSB7XG4gICAgICBjb25zdCBkb2NDb0NJRCA9IGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5pZFxuICAgICAgaWYgKGRvY0NvQ0lEKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRFeGlzdHMgPSBiZXN0TWF0Y2hEb2N1bWVudHMuZ2V0KGRvY0NvQ0lEKT8uaWRcbiAgICAgICAgY29uc3QgZG9jTGFuZyA9IGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5sYW5nID8/ICdlbidcbiAgICAgICAgY29uc3QgZXhpc3RpbmdMYW5nID0gYmVzdE1hdGNoRG9jdW1lbnRzLmdldChkb2NDb0NJRCk/LmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LmxhbmcgPz8gJ2VuJ1xuICAgICAgICBjb25zdCBwcmVmZXJMYW5nID0gKCFjdXJyZW50RXhpc3RzIHx8IGV4aXN0aW5nTGFuZyA9PT0gJ2VuJyB8fCBleGlzdGluZ0xhbmcgPT09IGRvY0xhbmcpXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdwcmVmZXJMYW5nJywgJz4nLCBkb2NMYW5nLCAnPCA+JywgZXhpc3RpbmdMYW5nLCAnPCcsIHByZWZlckxhbmcpXG4gICAgICAgIGNvbnN0IGRvY1BhY2sgPSAoZG9jLnBhY2sgPz8gJycpXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUGFjayA9IChiZXN0TWF0Y2hEb2N1bWVudHMuZ2V0KGRvY0NvQ0lEKT8ucGFjayA/PyAnJylcbiAgICAgICAgY29uc3QgcHJlZmVyV29ybGQgPSAoIWN1cnJlbnRFeGlzdHMgfHwgZG9jUGFjayA9PT0gJycgfHwgZXhpc3RpbmdQYWNrICE9PSAnJylcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3ByZWZlcldvcmxkJywgJz4nLCBkb2NQYWNrLCAnPCA+JywgZXhpc3RpbmdQYWNrLCAnPCcsIHByZWZlcldvcmxkKVxuICAgICAgICBjb25zdCBkb2NQcmlvcml0eSA9IHBhcnNlSW50KGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5wcmlvcml0eSwgMTApXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nUHJpb3JpdHkgPSBwYXJzZUludChiZXN0TWF0Y2hEb2N1bWVudHMuZ2V0KGRvY0NvQ0lEKT8uZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ucHJpb3JpdHkgPz8gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIpXG4gICAgICAgIGNvbnN0IHByZWZlclByaW9yaXR5ID0gKCFjdXJyZW50RXhpc3RzIHx8IGRvY1ByaW9yaXR5ID09PSBleGlzdGluZ1ByaW9yaXR5IHx8IGRvY1ByaW9yaXR5ID4gZXhpc3RpbmdQcmlvcml0eSlcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3ByZWZlclByaW9yaXR5JywgJz4nLCBkb2NQcmlvcml0eSwgJzwgPicsIGV4aXN0aW5nUHJpb3JpdHksICc8JywgcHJlZmVyUHJpb3JpdHkpXG4gICAgICAgIGlmIChwcmVmZXJMYW5nICYmIHByZWZlcldvcmxkICYmIHByZWZlclByaW9yaXR5KSB7XG4gICAgICAgICAgYmVzdE1hdGNoRG9jdW1lbnRzLnNldChkb2NDb0NJRCwgZG9jKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFsuLi5iZXN0TWF0Y2hEb2N1bWVudHMudmFsdWVzKCldXG4gIH1cblxuICAvKipcbiAgICogRm9yIGFuIGFycmF5IG9mIGRvY3VtZW50cywgcmV0dXJucyBmaWx0ZXIgb3V0IGVuIGRvY3VtZW50cyBpZiBhIHRyYW5zbGF0ZWQgb25lIGV4aXN0cyBtYXRjaGluZyB0aGUgc2FtZSBlcmFzXG4gICAqIEBwYXJhbSBkb2N1bWVudHNcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBzdGF0aWMgZmlsdGVyQWxsQ29DSUQgKGRvY3VtZW50cywgbGFuZ0ZhbGxiYWNrKSB7XG4gICAgaWYgKCFsYW5nRmFsbGJhY2spIHtcbiAgICAgIHJldHVybiBkb2N1bWVudHNcbiAgICB9XG4gICAgY29uc3QgYmVzdE1hdGNoRG9jdW1lbnRzID0gbmV3IE1hcCgpXG5cbiAgICBmb3IgKGNvbnN0IGRvYyBvZiBkb2N1bWVudHMpIHtcbiAgICAgIGNvbnN0IGRvY0NvQ0lEID0gZG9jLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LmlkXG4gICAgICBjb25zdCBkb2NFcmFzID0gT2JqZWN0LmVudHJpZXMoZG9jLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LmVyYXMgPz8ge30pLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pLmpvaW4oJy8nKVxuICAgICAgaWYgKGRvY0NvQ0lEKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRFeGlzdHMgPSBiZXN0TWF0Y2hEb2N1bWVudHMuZ2V0KGRvY0NvQ0lEKT8uaWRcbiAgICAgICAgY29uc3QgZG9jTGFuZyA9IGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5sYW5nID8/ICdlbidcbiAgICAgICAgY29uc3QgZXhpc3RpbmdMYW5nID0gYmVzdE1hdGNoRG9jdW1lbnRzLmdldChkb2NDb0NJRCk/LmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LmxhbmcgPz8gJ2VuJ1xuICAgICAgICBjb25zdCBwcmVmZXJMYW5nID0gKCFjdXJyZW50RXhpc3RzIHx8IGV4aXN0aW5nTGFuZyA9PT0gJ2VuJyB8fCBleGlzdGluZ0xhbmcgPT09IGRvY0xhbmcpXG4gICAgICAgIGlmIChwcmVmZXJMYW5nKSB7XG4gICAgICAgICAgYmVzdE1hdGNoRG9jdW1lbnRzLnNldChkb2NDb0NJRCArICcvJyArIGRvY0VyYXMsIGRvYylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbLi4uYmVzdE1hdGNoRG9jdW1lbnRzLnZhbHVlcygpXVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGxpc3Qgb2YgYWxsIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgQ29DSUQgcmVnZXgsIGxhbmd1YWdlLCBhbmQgZXJhIGZyb20gdGhlIHdvcmxkLlxuICAgKiBUaGUgZG9jdW1lbnQgbGlzdCBpcyBzb3J0ZWQgd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBmaXJzdC5cbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKCdlbicsICdlcycsIC4uLilcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBwcm9ncmVzc0JhciBJZiBncmVhdGVyIHRoYW4gemVybyBzaG93IHBlcmNlbnRhZ2VcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBkb2N1bWVudHNGcm9tV29ybGQgKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gZmFsc2UsIGxhbmdGYWxsYmFjayA9IHRydWUsIHByb2dyZXNzQmFyID0gMCB9ID0ge30pIHtcbiAgICBpZiAoIWNvY2lkUmVnRXhwKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgaWYgKGxhbmcgPT09ICcnKSB7XG4gICAgICBsYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICB9XG4gICAgaWYgKGVyYSA9PT0gdHJ1ZSkge1xuICAgICAgZXJhID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKVxuICAgIH1cblxuICAgIGlmIChwcm9ncmVzc0JhciA+IDApIHtcbiAgICAgIFNjZW5lTmF2aWdhdGlvbi5kaXNwbGF5UHJvZ3Jlc3NCYXIoeyBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRVUC5QYWNrYWdlc0xvYWRpbmcnKSwgcGN0OiBNYXRoLmZsb29yKDEwMCAvIHByb2dyZXNzQmFyKSB9KVxuICAgIH1cblxuICAgIGNvbnN0IGdhbWVQcm9wZXJ0eSA9IENvQ0lELmdldEdhbWVQcm9wZXJ0eShgJHt0eXBlfS4uYClcblxuICAgIGNvbnN0IGNhbmRpZGF0ZURvY3VtZW50cyA9IGdhbWVbZ2FtZVByb3BlcnR5XT8uZmlsdGVyKChkKSA9PiB7XG4gICAgICBjb25zdCBjb2NpZEZsYWcgPSBkLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJylcbiAgICAgIGlmICh0eXBlb2YgY29jaWRGbGFnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVyYXMgPSAoY29jaWRGbGFnLmVyYXMgPz8gW10pXG4gICAgICBjb25zdCBtYXRjaGluZ0VyYXMgPSAoZXJhID09PSBmYWxzZSB8fCBPYmplY3QuZW50cmllcyhlcmFzKS5sZW5ndGggPT09IDAgfHwgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlcmFzLCBlcmEpICYmIGVyYXNbZXJhXSkpXG4gICAgICByZXR1cm4gY29jaWRSZWdFeHAudGVzdChjb2NpZEZsYWcuaWQpICYmIFtsYW5nLCAobGFuZ0ZhbGxiYWNrID8gJ2VuJyA6ICctJyldLmluY2x1ZGVzKGNvY2lkRmxhZy5sYW5nKSAmJiBtYXRjaGluZ0VyYXNcbiAgICB9KVxuXG4gICAgaWYgKGNhbmRpZGF0ZURvY3VtZW50cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG5cbiAgICByZXR1cm4gY2FuZGlkYXRlRG9jdW1lbnRzLnNvcnQoQ29DSUQuY29tcGFyZUNvQ0lEUHJpbylcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGFsbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIENvQ0lEIHJlZ2V4LCBsYW5ndWFnZSwgYW5kIGVyYSBmcm9tIHRoZSBjb21wZW5kaXVtcy5cbiAgICogVGhlIGRvY3VtZW50IGxpc3QgaXMgc29ydGVkIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZmlyc3QuXG4gICAqIEBwYXJhbSBjb2NpZFJlZ0V4cCByZWdleCB1c2VkIG9uIHRoZSBDb0NJRFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgd2FudGVkIENvQ0lELCBmb3IgZXhhbXBsZSAnaScsICdhJywgJ2plJ1xuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gcHJvZ3Jlc3NCYXIgSWYgZ3JlYXRlciB0aGFuIHplcm8gc2hvdyBwZXJjZW50YWdlXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZG9jdW1lbnRzRnJvbUNvbXBlbmRpYSAoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSBmYWxzZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgcHJvZ3Jlc3NCYXIgPSAwIH0pIHtcbiAgICBpZiAoIWNvY2lkUmVnRXhwKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgaWYgKGxhbmcgPT09ICcnKSB7XG4gICAgICBsYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICB9XG4gICAgaWYgKGVyYSA9PT0gdHJ1ZSkge1xuICAgICAgZXJhID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnd29ybGRFcmEnKVxuICAgIH1cbiAgICBjb25zdCBlcmFUZXh0ID0gQ29DSUQuZXJhVGV4dChlcmEpXG5cbiAgICBjb25zdCBkb2N1bWVudFR5cGUgPSBDb0NJRC5nZXREb2N1bWVudFR5cGUodHlwZSkuc2NoZW1hLm5hbWVcbiAgICBjb25zdCBjYW5kaWRhdGVEb2N1bWVudHMgPSBbXVxuXG4gICAgbGV0IGNvdW50ID0gMVxuICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XG4gICAgICBpZiAocHJvZ3Jlc3NCYXIgPiAwKSB7XG4gICAgICAgIFNjZW5lTmF2aWdhdGlvbi5kaXNwbGF5UHJvZ3Jlc3NCYXIoeyBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRVUC5QYWNrYWdlc0xvYWRpbmcnKSwgcGN0OiBNYXRoLmZsb29yKGNvdW50ICogMTAwIC8gcHJvZ3Jlc3NCYXIpIH0pXG4gICAgICAgIGNvdW50KytcbiAgICAgIH1cbiAgICAgIGlmIChwYWNrLmRvY3VtZW50TmFtZSA9PT0gZG9jdW1lbnRUeXBlKSB7XG4gICAgICAgIGlmICghcGFjay5pbmRleGVkKSB7XG4gICAgICAgICAgYXdhaXQgcGFjay5nZXRJbmRleCgpXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5kZXhJbnN0YW5jZXMgPSBwYWNrLmluZGV4LmZpbHRlcigoaSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvY2lkRmxhZyA9IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZ1xuICAgICAgICAgIGlmICh0eXBlb2YgY29jaWRGbGFnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGVyYXMgPSAoY29jaWRGbGFnLmVyYXMgPz8gW10pXG4gICAgICAgICAgY29uc3QgbWF0Y2hpbmdFcmFzID0gKGVyYSA9PT0gZmFsc2UgfHwgT2JqZWN0LmVudHJpZXMoZXJhcykubGVuZ3RoID09PSAwIHx8IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXJhcywgZXJhKSAmJiBlcmFzW2VyYV0pKVxuICAgICAgICAgIHJldHVybiBjb2NpZFJlZ0V4cC50ZXN0KGNvY2lkRmxhZy5pZCkgJiYgW2xhbmcsIChsYW5nRmFsbGJhY2sgPyAnZW4nIDogJy0nKV0uaW5jbHVkZXMoY29jaWRGbGFnLmxhbmcpICYmIG1hdGNoaW5nRXJhc1xuICAgICAgICB9KVxuICAgICAgICBmb3IgKGNvbnN0IGluZGV4IG9mIGluZGV4SW5zdGFuY2VzKSB7XG4gICAgICAgICAgY29uc3QgZG9jdW1lbnQgPSBhd2FpdCBwYWNrLmdldERvY3VtZW50KGluZGV4Ll9pZClcbiAgICAgICAgICBpZiAoIWRvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBtc2cgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci5kb2N1bWVudC1ub3QtZm91bmQnLCB7XG4gICAgICAgICAgICAgIGNvY2lkOiBjb2NpZFJlZ0V4cCxcbiAgICAgICAgICAgICAgbGFuZyxcbiAgICAgICAgICAgICAgZXJhOiBlcmFUZXh0XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihtc2cpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQ29DNyB8JywgbXNnLCBpbmRleClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhbmRpZGF0ZURvY3VtZW50cy5wdXNoKGRvY3VtZW50KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2FuZGlkYXRlRG9jdW1lbnRzLnNvcnQoQ29DSUQuY29tcGFyZUNvQ0lEUHJpbylcbiAgfVxuXG4gIC8qKlxuICAgKiBTb3J0IGEgbGlzdCBvZiBkb2N1bWVudCBvbiBDb0NJRCBwcmlvcml0eSAtIHRoZSBoaWdoZXN0IGZpcnN0LlxuICAgKiBAZXhhbXBsZVxuICAgKiBhTGlzdE9mRG9jdW1lbnRzLnNvcnQoQ29DSUQuY29tcGFyZUNvQ0lEUHJpbylcbiAgICovXG4gIHN0YXRpYyBjb21wYXJlQ29DSURQcmlvIChhLCBiKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGIuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ucHJpb3JpdHkgLVxuICAgICAgYS5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5wcmlvcml0eVxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIHRoZSBmaXJzdCBwYXJ0IG9mIGEgQ29DSUQgdG8gd2hhdCB0aG9zZSBkb2N1bWVudHMgYXJlIGNhbGxlZCBpbiB0aGUgYGdhbWVgIG9iamVjdC5cbiAgICogQHBhcmFtIGNvY2lkIGEgc2luZ2xlIGNvY2lkXG4gICAqL1xuICBzdGF0aWMgZ2V0R2FtZVByb3BlcnR5IChjb2NpZCkge1xuICAgIGNvbnN0IHR5cGUgPSBjb2NpZC5zcGxpdCgnLicpWzBdXG4gICAgY29uc3QgZ2FtZVByb3BlcnR5ID0gQ29DSUQuZ2FtZVByb3BlcnR5TG9va3VwW3R5cGVdXG4gICAgaWYgKCFnYW1lUHJvcGVydHkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci5pbmNvcnJlY3QudHlwZScpKVxuICAgICAgY29uc29sZS5sb2coJ0NvQzcgfCAnLCBjb2NpZClcbiAgICAgIHRocm93IG5ldyBFcnJvcigpXG4gICAgfVxuICAgIHJldHVybiBnYW1lUHJvcGVydHlcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZ2FtZVByb3BlcnR5TG9va3VwICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYTogJ2FjdG9ycycsXG4gICAgICBjOiAnY2FyZHMnLFxuICAgICAgaTogJ2l0ZW1zJyxcbiAgICAgIGplOiAnam91cm5hbCcsXG4gICAgICBtOiAnbWFjcm9zJyxcbiAgICAgIHA6ICdwbGF5bGlzdHMnLFxuICAgICAgcnQ6ICd0YWJsZXMnLFxuICAgICAgczogJ3NjZW5lcydcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlcyB0aGUgZmlyc3QgcGFydCBvZiBhIENvQ0lEIHRvIHdoYXQgdGhvc2UgZG9jdW1lbnRzIGFyZSBjYWxsZWQgaW4gdGhlIGBnYW1lYCBvYmplY3QuXG4gICAqIEBwYXJhbSBjb2NpZCBhIHNpbmdsZSBjb2NpZFxuICAgKi9cbiAgc3RhdGljIGdldERvY3VtZW50VHlwZSAoY29jaWQpIHtcbiAgICBjb25zdCB0eXBlID0gY29jaWQuc3BsaXQoJy4nKVswXVxuICAgIGNvbnN0IGRvY3VtZW50VHlwZSA9IENvQ0lELmRvY3VtZW50TmFtZUxvb2t1cFt0eXBlXVxuICAgIGlmICghZG9jdW1lbnRUeXBlKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IuaW5jb3JyZWN0LnR5cGUnKSlcbiAgICAgIGNvbnNvbGUubG9nKCdDb0M3IHwgJywgY29jaWQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICAgIH1cbiAgICByZXR1cm4gZG9jdW1lbnRUeXBlXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRvY3VtZW50TmFtZUxvb2t1cCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGE6IEFjdG9yLFxuICAgICAgYzogQ2FyZCxcbiAgICAgIGk6IEl0ZW0sXG4gICAgICBqZTogSm91cm5hbEVudHJ5LFxuICAgICAgbTogTWFjcm8sXG4gICAgICBwOiBQbGF5bGlzdCxcbiAgICAgIHJ0OiBSb2xsVGFibGUsXG4gICAgICBzOiBTY2VuZVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5pbXBvcnQgeyBjb25maWd1cmVEb2N1bWVudHMgfSBmcm9tICcuLi9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMuanMnXG5pbXBvcnQgeyBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyB9IGZyb20gJy4uL3NjcmlwdHMvbG9hZC10ZW1wbGF0ZXMuanMnXG5pbXBvcnQgeyByZWdpc3RlclNldHRpbmdzIH0gZnJvbSAnLi4vc2NyaXB0cy9yZWdpc3Rlci1zZXR0aW5ncy5qcydcbmltcG9ydCB7IHJlZ2lzdGVyU2hlZXRzIH0gZnJvbSAnLi4vc2NyaXB0cy9yZWdpc3Rlci1zaGVldHMuanMnXG5pbXBvcnQgeyBoYW5kbGViYXJzSGVscGVyIH0gZnJvbSAnLi4vc2NyaXB0cy9oYW5kbGViYXJzLWhlbHBlci5qcydcbmltcG9ydCB7IGNvbXBlbmRpdW1GaWx0ZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvbXBlbmRpdW0tZmlsdGVyLmpzJ1xuaW1wb3J0IHsgQ29DSUQgfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi4vYXBwcy9jb2M3LWxpbmsuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbmNlKCdpbml0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbmZpZ3VyZURvY3VtZW50cygpXG4gICAgcHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMoKVxuICAgIHJlZ2lzdGVyU2V0dGluZ3MoKVxuICAgIHJlZ2lzdGVyU2hlZXRzKClcbiAgICBoYW5kbGViYXJzSGVscGVyKClcbiAgICBjb21wZW5kaXVtRmlsdGVyKClcbiAgICBDb0NJRC5pbml0KClcbiAgICBDb0M3TGluay5pbml0KClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcgKi9cbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN0Jvb2sgfSBmcm9tICcuLi9pdGVtcy9ib29rL2RhdGEuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3U3BlbGwgfSBmcm9tICcuLi9pdGVtcy9zcGVsbC9kYXRhLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlIH0gZnJvbSAnLi4vaXRlbXMvY2hhc2UvZGF0YS5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5pbXBvcnQgeyBDb0M3U2tpbGwgfSBmcm9tICcuLi9pdGVtcy9za2lsbC9kYXRhLmpzJ1xuaW1wb3J0IHsgQ29DN1ZlaGljbGUgfSBmcm9tICcuLi9hY3RvcnMvdmVoaWNsZS9kYXRhLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gY29uZmlndXJlRG9jdW1lbnRzICgpIHtcbiAgQ09ORklHLkFjdGl2ZUVmZmVjdC5kb2N1bWVudENsYXNzID0gQ29DN0FjdGl2ZUVmZmVjdFxuICBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzcyA9IENvQ0FjdG9yXG4gIENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXMgPSB7XG4gICAgdmVoaWNsZTogQ29DN1ZlaGljbGVcbiAgfVxuICBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID0gQ29DN0l0ZW1cbiAgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzID0ge1xuICAgIGJvb2s6IENvQzdCb29rLFxuICAgIHNwZWxsOiBDb0M3U3BlbGwsXG4gICAgY2hhc2U6IENvQzdDaGFzZSxcbiAgICBza2lsbDogQ29DN1NraWxsXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBsb2FkVGVtcGxhdGVzICovXG5cbi8qKlxuICogRGVmaW5lIGEgc2V0IG9mIHRlbXBsYXRlIHBhdGhzIHRvIHByZS1sb2FkXG4gKiBQcmUtbG9hZGVkIHRlbXBsYXRlcyBhcmUgY29tcGlsZWQgYW5kIGNhY2hlZCBmb3IgZmFzdCBhY2Nlc3Mgd2hlbiByZW5kZXJpbmdcbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cbmV4cG9ydCBjb25zdCBwcmVsb2FkSGFuZGxlYmFyc1RlbXBsYXRlcyA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgLyoqIERlZmluZSB0ZW1wbGF0ZSBwYXRocyB0byBsb2FkICovXG4gIGNvbnN0IHRlbXBsYXRlUGF0aHMgPSBbXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL25wYy1za2lsbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL25wYy1jb21iYXQuaHRtbCcsXG5cbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItaW52ZW50b3J5Lmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1pbnZlbnRvcnktaXRlbXMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWJhY2tncm91bmQuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY29tbW9uL2FjdGl2ZS1lZmZlY3RzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLW15dGhvcy1lbm91bnRlcnMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3Ita2VlcGVyLW15dGhvcy1lbm91bnRlcnMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3Itc2tpbGxzLXYyLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9jaGFyYWN0ZXItZGV2ZWxvcG1lbnQtdjIuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2RldmVsb3BtZW50LWNvbnRyb2xzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy92aXRhbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2NvbWJhdC5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyLXNoZWV0LXYyLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9jaGFyYWN0ZXIvc3VtbWFyeS5odG1sJyxcblxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svZGV0YWlscy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9zcGVsbC9kZXRhaWxzLmh0bWwnLFxuXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2ludHJvZHVjdGlvbi5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9jb25maWd1cmF0aW9uLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NlbGVjdC1zZXR1cC5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZWxlY3QtYXJjaGV0eXBlLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NlbGVjdC1vY2N1cGF0aW9uLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NldC1jaGFyYWN0ZXJpc3RpY3MuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LWF0dHJpYnV0ZXMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvdmlldy1hdHRyaWJ1dGVzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NldC1pbnZlc3RpZ2F0b3IuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LW9jY3VwYXRpb24tc2tpbGxzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3RvZ2dsZS1za2lsbC5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZXQtYXJjaGV0eXBlLXNraWxscy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9wb2ludHMtc2tpbGxzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL2JhY2tzdG9yeS5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9jcmVhdGUuaGJzJ1xuICBdXG5cbiAgLyoqIExvYWQgdGhlIHRlbXBsYXRlIHBhcnRzICovXG4gIHJldHVybiBsb2FkVGVtcGxhdGVzKHRlbXBsYXRlUGF0aHMpXG59XG4iLCIvKiBnbG9iYWwgJCwgQ09ORklHLCBDT05TVCwgZ2FtZSwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3RGVjYWRlckRpZSB9IGZyb20gJy4uL2FwcHMvZGVjYWRlci1kaWUuanMnXG5pbXBvcnQgeyBDb0M3RGVjYWRlckRpZU90aGVyIH0gZnJvbSAnLi4vYXBwcy9kZWNhZGVyLWRpZS1vdGhlci5qcydcbmltcG9ydCB7IENvQzdHYW1lUnVsZVNldHRpbmdzIH0gZnJvbSAnLi9nYW1lLXJ1bGVzLmpzJ1xuaW1wb3J0IHsgQ29DN0RpcmVjdG9yeVBpY2tlciB9IGZyb20gJy4vY29jNy1kaXJlY3RvcnktcGlja2VyLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJTZXR0aW5ncyAoKSB7XG4gIC8qKlxuICAgKiBSdWxlc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3Rlck1lbnUoJ0NvQzcnLCAnZ2FtZVJ1bGVzJywge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlJ1bGVzLk5hbWUnLFxuICAgIGxhYmVsOiAnQ29DNy5TZXR0aW5ncy5SdWxlcy5MYWJlbCcsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUnVsZXMuSGludCcsXG4gICAgaWNvbjogJ2ZhcyBmYS1ib29rJyxcbiAgICB0eXBlOiBDb0M3R2FtZVJ1bGVTZXR0aW5ncyxcbiAgICByZXN0cmljdGVkOiB0cnVlXG4gIH0pXG4gIENvQzdHYW1lUnVsZVNldHRpbmdzLnJlZ2lzdGVyU2V0dGluZ3MoKVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5Vc2VDb250ZXh0TWVudXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Vc2VDb250ZXh0TWVudXNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGhvbGVVcGxvYWREaXJlY3RvcnknLCB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuRGhvbGVVcGxvYWQuRGlyZWN0b3J5Lk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLkRob2xlVXBsb2FkLkRpcmVjdG9yeS5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQ29DN0RpcmVjdG9yeVBpY2tlci5EZWZhdWx0RGlyZWN0b3J5LFxuICAgIGRlZmF1bHQ6ICdbZGF0YV0gd29ybGRzLycgKyBnYW1lLndvcmxkLmlkICsgJy9kaG9sZS1pbWFnZXMnXG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd3b3JsZEVyYScsIHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5Xb3JsZEVyYS5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5Xb3JsZEVyYS5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ3N0YW5kYXJkJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczogQ09DNy5lcmFzLFxuICAgIG9uQ2hhbmdlOiAoKSA9PiB7XG4gICAgICB1aS5wbGF5ZXJzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfSlcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Ryb3BDb0NJRCcsIHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgJyc6ICdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5Qcm9tcHQnLFxuICAgICAgWTogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELlVzZUNvQ0lEJyxcbiAgICAgIE46ICdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5JZ25vcmVDb0NJRCdcbiAgICB9XG4gIH0pXG5cbiAgLyoqXG4gICAqIEluaXRpYXRpdmVcbiAgICovXG4gIC8qKiBTZXQgZGlzcGxheWluZyBkaWNlcyBmb3IgaW5pdCByb2xsICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUluaXREaWNlcycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheUluaXREaWNlcycsXG4gICAgaGludDogJ1NFVFRJTkdTLmRpc3BsYXlJbml0RGljZXNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBTZXQgZGlzcGxheWluZyBkaWNlcyBmb3IgaW5pdCByb2xsICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUluaXRBc1RleHQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRpc3BsYXlJbml0QXNUZXh0JyxcbiAgICBoaW50OiAnU0VUVElOR1MuZGlzcGxheUluaXRBc1RleHRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG5cbiAgLyoqXG4gICAqIFJvbGwgY3VzdG9taXNhaW9uc1xuICAgKi9cbiAgLyoqIFN0YW5kYnkgcm9sbHMgbWFkZSBieSBHTSBmcm9tIHBsYXllciBzaGVldCAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlN0YW5ieUdNUm9sbHMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5TdGFuYnlHTVJvbGxzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogQWxsb3cgdXNhZ2Ugb2YgYSBmbGF0IGRpY2UgbW9kaWZpZXIgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhbGxvd0ZsYXREaWNlTW9kaWZpZXInLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkFsbG93RmxhdERpY2VNb2RpZmllcicsXG4gICAgaGludDogJ1NFVFRJTkdTLkFsbG93RmxhdERpY2VNb2RpZmllckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBBbGxvdyB1c2FnZSBvZiBhIGZsYXQgdGhyZXNob2xkIG1vZGlmaWVyICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJyxcbiAgICBoaW50OiAnU0VUVElOR1MuQWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXJIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRlZmF1bHREaWZmaWN1bHR5JyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGVmYXVsdERpZmZpY3VsdHlIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ3JlZ3VsYXInLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICByZWd1bGFyOiAnU0VUVElOR1MuQ2hlY2tEaWZmaWN1bHR5UmVndWxhcicsXG4gICAgICB1bmtub3duOiAnU0VUVElOR1MuQ2hlY2tEaWZmaWN1bHR5VW5rbm93bidcbiAgICB9XG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2VsZlJvbGxXaGlzcGVyVGFyZ2V0Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TZWxmUm9sbFdoaXNwZXJUYXJnZXQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5TZWxmUm9sbFdoaXNwZXJUYXJnZXRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJ2V2ZXJ5b25lJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgbm9ib2R5OiAnU0VUVElOR1MuRG9Ob3RBZHZpc2UnLFxuICAgICAgb3duZXJzOiAnU0VUVElOR1MuQWR2aXNlT3duZXJzT25seScsXG4gICAgICBldmVyeW9uZTogJ1NFVFRJTkdTLkFkdmlzZUFsbFBsYXllcidcbiAgICB9XG4gIH0pXG5cbiAgLyoqXG4gICAqIENoYXQgQ2FyZHNcbiAgICovXG4gIC8qKiBUcnVzdGVkIHBsYXllcnMgd2lsbCBiZSBhbGxvd2VkIHRvIG1vZGlmeSBjaGF0IGNhcmRzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlRydXN0ZWRDYW5Nb2RmeUNoYXRDYXJkJyxcbiAgICBoaW50OiAnU0VUVElOR1MuVHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogVHJ1c3RlZCBwbGF5ZXJzIHdpbGwgYmUgYWxsb3dlZCB0byBzZWUgY2hhdCBjYXJkcyBwcml2YXRlIHNlY3Rpb25zICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndHJ1c3RlZENhblNlZUNoYXRDYXJkJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5UcnVzdGVkQ2FuU2VlQ2hhdENhcmQnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5UcnVzdGVkQ2FuU2VlQ2hhdENhcmRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogU2V0IHRoZSBuZWVkIHRvIGRpc3BsYXkgYWN0b3IgaW1hZ2Ugb24gY2hhdCBjYXJkcyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheUFjdG9yT25DYXJkJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGlzcGxheUFjdG9yT25DYXJkSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbCcsXG4gICAgc2NvcGU6ICdjbGllbnQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5UmVzdWx0VHlwZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGlzcGxheVJlc3VsdFR5cGUnLFxuICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogU2V0IHRoZSB1c2Ugb2YgdG9rZW4gaW5zdGVhZCBvZiBwb3J0cmFpdHMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd1c2VUb2tlbicsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuVXNlVG9rZW4nLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Vc2VUb2tlbkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG5cbiAgLyoqXG4gICAqIFNjZW5lIFNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5FbmFibGVTdGF0dXNJY29ucycsXG4gICAgaGludDogJ1NFVFRJTkdTLkVuYWJsZVN0YXR1c0ljb25zSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogdHJ1ZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2dyaWRTcGFjZXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlJlc3RyaWN0R3JpZFNwYWNlcycsXG4gICAgaGludDogJ1NFVFRJTkdTLlJlc3RyaWN0R3JpZFNwYWNlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzdGFuY2VFbGV2YXRpb24nLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkNoZWNrRWxldmF0aW9uJyxcbiAgICBoaW50OiAnU0VUVElOR1MuQ2hlY2tFbGV2YXRpb25IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG5cbiAgLyoqXG4gICAqIEdhbWUgQXJ0d29yayBTZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdvdmVycmlkZUdhbWVBcnR3b3JrJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PdmVycmlkZUdhbWVBcnR3b3JrJyxcbiAgICBoaW50OiAnU0VUVElOR1MuT3ZlcnJpZGVHYW1lQXJ0d29ya0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvdmVycmlkZUdhbWVBcnR3b3JrJykpIHtcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0UGF1c2VJbWFnZScsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0UGF1c2VJbWFnZUhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90aW1lLXRyYXAuc3ZnJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRQYXVzZVRleHQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0UGF1c2VUZXh0JyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRQYXVzZVRleHRIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ1RoZSBCbGluZCBJZGlvdCBHb2QgaXMgZHJlYW1pbmcuLi4nLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBTaGVldCBzZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5UGxheWVyTmFtZU9uU2hlZXQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRpc3BsYXlQbGF5ZXJOYW1lT25TaGVldCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0b29sVGlwRGVsYXknLCB7XG4gICAgbmFtZTogJ0NvQzcudG9vbFRpcERlbGF5JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogMjAwMCxcbiAgICB0eXBlOiBOdW1iZXJcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzaG93SWNvbnNPbmx5Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5zaG93SWNvbnNPbmx5JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogQWxsb3cgcGxheWVyIHRvIHVubG9jayB0aGUgc2hlZXQgb3V0c2lkZSBvZiBjcmVhdGlvbiBtb2RlICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5QbGF5ZXJVbmxvY2tTaGVldE1vZGUnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnYWx3YXlzJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgYWx3YXlzOiAnU0VUVElOR1MuQWx3YXlzRWRpdGFibGUnLFxuICAgICAgY3JlYXRpb246ICdTRVRUSU5HUy5DcmVhdGlvbk1vZGVPbmx5JyxcbiAgICAgIG5ldmVyOiAnU0VUVElOR1MuTmV2ZXJFZGl0YWJsZSdcbiAgICB9XG4gIH0pXG4gIC8qKiBBbGxvdyBwbGF5ZXIgdG8gbW9kaWZ5IHN0YXR1cyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N0YXR1c1BsYXllckVkaXRhYmxlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TdGF0dXNQbGF5ZXJFZGl0YWJsZScsXG4gICAgaGludDogJ1NFVFRJTkdTLlN0YXR1c1BsYXllckVkaXRhYmxlSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ29uZUJsb2NrQmFja3N0b3J5Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PbmVCbG9ja0JhY2tTdG9yeScsXG4gICAgaGludDogJ1NFVFRJTkdTLk9uZUJsb2NrQmFja1N0b3J5SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdvdmVycmlkZVNoZWV0QXJ0d29yaycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuT3ZlcnJpZGVTaGVldEFydHdvcmsnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PdmVycmlkZVNoZWV0QXJ0d29ya0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvdmVycmlkZVNoZWV0QXJ0d29yaycpKSB7XG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmQnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmRIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoJy4vYXNzZXRzL2ltYWdlcy9iYWNrZ3JvdW5kLndlYnAnKSA0IHJlcGVhdFwiLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtTaGVldEJhY2tncm91bmRUeXBlJyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3NsaWNlJyxcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGNob2ljZXM6IHtcbiAgICAgICAgc2xpY2U6ICdTRVRUSU5HUy5CYWNrZ3JvdW5kU2xpY2UnLFxuICAgICAgICBhdXRvOiAnU0VUVElOR1MuQmFja2dyb3VuZEF1dG8nLFxuICAgICAgICBjb250YWluOiAnU0VUVElOR1MuQmFja2dyb3VuZENvbnRhaW4nLFxuICAgICAgICBjb3ZlcjogJ1NFVFRJTkdTLkJhY2tncm91bmRDb3ZlcidcbiAgICAgIH1cbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydFdvcmtPdGhlclNoZWV0QmFja2dyb3VuZCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmQud2VicCcpXCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya1NoZWV0SW1hZ2UnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtTaGVldEltYWdlSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IFwidXJsKCcuL2Fzc2V0cy9pbWFnZXMvdGVudGFjbGVzLndlYnAnKVwiLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtGcm9udENvbG9yJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtGcm9udENvbG9yJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrRnJvbnRDb2xvckhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAncmdiYSg0Myw1NSw4MywxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0JhY2tncm91bmRDb2xvcicsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrQmFja2dyb3VuZENvbG9yJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnR3b3JrQmFja2dyb3VuZENvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDEwMywxMSwxMSwxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0ludGVyYWN0aXZlQ29sb3InLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0ludGVyYWN0aXZlQ29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtJbnRlcmFjdGl2ZUNvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDEwMywxMSwxMSwxKScsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGgnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtGaXhlZFNraWxsTGVuZ3RoSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgICB0eXBlOiBCb29sZWFuXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrTWFpbkZvbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnRCb2xkJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udEJvbGQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udFNpemUnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAxNixcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIG9uQ2hhbmdlOiBzaXplID0+IF9zZXRSb290Rm9udFNpemUoc2l6ZSlcbiAgICB9KVxuXG4gICAgZnVuY3Rpb24gX3NldFJvb3RGb250U2l6ZSAoc2l6ZSkge1xuICAgICAgJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScsIHNpemUpXG4gICAgICB1aS5zaWRlYmFyLnJlbmRlcih0cnVlKVxuICAgICAgZm9yIChjb25zdCBbLCB3XSBvZiBPYmplY3QuZW50cmllcyh1aS53aW5kb3dzKSkge1xuICAgICAgICB3LnJlbmRlcih0cnVlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXZWFwb25zXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3JlZ2FyZFVzZVBlclJvdW5kJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNyZWdhcmRVc2VQZXJSb3VuZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLkRpc3JlZ2FyZFVzZVBlclJvdW5kSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNyZWdhcmRBbW1vJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNyZWdhcmRBbW1vJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGlzcmVnYXJkQW1tb0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG5cbiAgLyoqXG4gICAqIENoYXNlc1xuICAgKi9cbiAgLy8gTU9WRUQgVE8gQ0hBU1NFIElORElWSURVQUwgU0VUVElOR1xuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2NoYXNlU2hvd1Rva2VuTW92ZW1lbnQnLCB7XG4gIC8vICAgbmFtZTogJ1NFVFRJTkdTLkNoYXNlU2hvd1Rva2VuTW92ZW1lbnQnLFxuICAvLyAgIGhpbnQ6ICdTRVRUSU5HUy5DaGFzZVNob3dUb2tlbk1vdmVtZW50SGludCcsXG4gIC8vICAgc2NvcGU6ICd3b3JsZCcsXG4gIC8vICAgY29uZmlnOiB0cnVlLFxuICAvLyAgIGRlZmF1bHQ6IHRydWUsXG4gIC8vICAgdHlwZTogQm9vbGVhblxuICAvLyB9KVxuXG4gIC8qKlxuICAgKiBEaWNlIFNvIE5pY2VcbiAgICovXG4gIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzeW5jRGljZTNkJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLlN5bmNEaWNlM0QnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLlN5bmNEaWNlM0RIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgIHR5cGU6IEJvb2xlYW5cbiAgICB9KVxuICAgIGNvbnN0IFt2ZXJzaW9uXSA9IGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy52ZXJzaW9uLnNwbGl0KCcuJylcbiAgICBpZiAoIWlzTmFOKE51bWJlcih2ZXJzaW9uKSkgJiYgTnVtYmVyKHZlcnNpb24pID49IDMpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndGVuRGllQm9udXMnLCB7XG4gICAgICAgIG5hbWU6ICdTRVRUSU5HUy5UZW5EaWVCb251cycsXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5UZW5EaWVCb251c0hpbnQnLFxuICAgICAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ2Jyb256ZScsXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgfSlcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndGVuRGllUGVuYWx0eScsIHtcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLlRlbkRpZVBlbmFsdHknLFxuICAgICAgICBoaW50OiAnU0VUVElOR1MuVGVuRGllUGVuYWx0eUhpbnQnLFxuICAgICAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ2Jsb29kbW9vbicsXG4gICAgICAgIHR5cGU6IFN0cmluZ1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRGV2ZWxvcGVyIGFuZCBkZWJ1ZyBzZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkZWJ1Z21vZGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRlYnVnTW9kZScsXG4gICAgaGludDogJ1NFVFRJTkdTLkRlYnVnTW9kZUhpbnQnLFxuICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2V4cGVyaW1lbnRhbEZlYXR1cmVzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TaG93RXhwZXJpbWVudGFsRmVhdHVyZXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5TaG93RXhwZXJpbWVudGFsRmVhdHVyZXNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICAvKipcbiAgICogT3RoZXIgc2V0dGluZ3NcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScsIHtcbiAgICBuYW1lOiAnSGlkZGVuIGRldiBtZW51JyxcbiAgICBoaW50OiAnVXNlIGF0IHlvdXIgb3duIHJpc2snLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcsIHtcbiAgICBuYW1lOiAnRGV2IHBoYXNlZCBhbGxvd2VkJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgLyoqIEZlYXQ6IHdlbGNvbWUgbWVzc2FnZSAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dXZWxjb21lTWVzc2FnZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1Muc2hvd1dlbGNvbWVNZXNzYWdlJyxcbiAgICBoaW50OiAnU0VUVElOR1Muc2hvd1dlbGNvbWVNZXNzYWdlJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnLCB7XG4gICAgbmFtZTogJ0NoYXIgY3JlYXRpb24gYWxsb3dlZCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIHtcbiAgICBuYW1lOiAnU3lzdGVtIHVwZGF0ZSB2ZXJzaW9uJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnMCdcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzeXN0ZW1VcGRhdGVkTW9kdWxlVmVyc2lvbicsIHtcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IHt9XG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAneHBFbmFibGVkJywge1xuICAgIG5hbWU6ICdFbmFibGUgWFAgZ2FpbicsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzaG93SW5zdHJ1Y3Rpb25zJywge1xuICAgIG5hbWU6ICdTaG93IGNoYW5nZWxvZy9pbnN0cnVjdGlvbnMnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICcwJ1xuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFNldHVwJywge1xuICAgIG5hbWU6ICdGb3JjZSBzcGVjaWZpYyBzZXR1cCBDb0MgSUQgZm9yIEludmVzdGlnYXRvciBXaXphcmQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICcnXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknLCB7XG4gICAgbmFtZTogJ051bWJlciBvZiBpbnZlc3RpZ2F0b3JzIGEgc2luZ2xlIHVzZXIgd2l0aG91dCBjcmVhdGUgYWN0b3IgcmlnaHRzIGNhbiBvd24nLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogTnVtYmVyLFxuICAgIGRlZmF1bHQ6IDBcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRPd25lcnNoaXAnLCB7XG4gICAgbmFtZTogJ0RlZmF1bHQgcGVybWlzc2lvbnMgZm9yIG5vbiBvd25lciBwbGF5ZXJzJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IE51bWJlcixcbiAgICBkZWZhdWx0OiBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkVcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRSZXJvbGxzJywge1xuICAgIG5hbWU6ICdBbGxvdyBwbGF5ZXJzIHRvIHJlcm9sbCBjaGFyYWN0ZXJpc3RpY3MnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFBvaW50QnV5Jywge1xuICAgIG5hbWU6ICdGb3JjZSBwb2ludCBidXkgaW5zdGVhZCBvZiBzZXR1cCBjaG9pY2UnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1aWNrRmlyZScsIHtcbiAgICBuYW1lOiAnUXVpY2sgZmlyZSBzZXR1cCB2YWx1ZXMnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQXJyYXksXG4gICAgZGVmYXVsdDogW11cbiAgfSlcbiAgLyoqIFNldCBhbiBpbml0aWF0aXZlIGZvcm11bGEgZm9yIHRoZSBzeXN0ZW0gKi9cbiAgQ09ORklHLkNvbWJhdC5pbml0aWF0aXZlID0ge1xuICAgIGZvcm11bGE6ICdAY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZScsXG4gICAgZGVjaW1hbHM6IDRcbiAgfVxuICBDT05GSUcuZGVidWcuaG9va3MgPSAhIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlYnVnbW9kZScpXG4gIENPTkZJRy5EaWNlLnRlcm1zLnQgPSBDb0M3RGVjYWRlckRpZVxuICBDT05GSUcuRGljZS50ZXJtcy5vID0gQ29DN0RlY2FkZXJEaWVPdGhlclxufVxuIiwiLyogZ2xvYmFsIEFjdG9ycywgQWN0b3JTaGVldCwgSXRlbXMsIEl0ZW1TaGVldCwgSm91cm5hbCwgSm91cm5hbFNoZWV0LCBNYWNyb0NvbmZpZywgTWFjcm9zLCBQbGF5bGlzdENvbmZpZywgUGxheWxpc3RzLCBSb2xsVGFibGVzLCBSb2xsVGFibGVDb25maWcsIFNjZW5lcywgU2NlbmVDb25maWcgKi9cbmltcG9ydCB7IENvQzdBcmNoZXR5cGVTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9hcmNoZXR5cGUuanMnXG5pbXBvcnQgeyBDb0M3Qm9va1NoZWV0IH0gZnJvbSAnLi4vaXRlbXMvYm9vay9zaGVldC5qcydcbmltcG9ydCB7IENvQzdDaGFyYWN0ZXJTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY2hhcmFjdGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRhaW5lclNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9jb250YWluZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhc2VTaGVldCB9IGZyb20gJy4uL2l0ZW1zL2NoYXNlL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NyZWF0dXJlU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW1TaGVldFYyIH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXRWMi5qcydcbmltcG9ydCB7IENvQzdKb3VybmFsU2hlZXQgfSBmcm9tICcuLi9zaGVldHMvY29jNy1qb3VybmFsLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN01hY3JvQ29uZmlnIH0gZnJvbSAnLi4vc2hlZXRzL2NvYzctbWFjcm8tY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN05QQ1NoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9ucGMtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3T2NjdXBhdGlvblNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMnXG5pbXBvcnQgeyBDb0M3UGxheWxpc3RDb25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1wbGF5bGlzdC1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Um9sbFRhYmxlQ29uZmlnIH0gZnJvbSAnLi4vc2hlZXRzL2NvYzctcm9sbC10YWJsZS1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3U2NlbmVDb25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1zY2VuZS1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3U2V0dXBTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9zZXR1cC5qcydcbmltcG9ydCB7IENvQzdTa2lsbFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3NraWxsLmpzJ1xuaW1wb3J0IHsgQ29DN1NwZWxsU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zcGVsbC9zaGVldC5qcydcbmltcG9ydCB7IENvQzdTdGF0dXNTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9zdGF0dXMuanMnXG5pbXBvcnQgeyBDb0M3VGFsZW50U2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvdGFsZW50LmpzJ1xuaW1wb3J0IHsgQ29DN1ZlaGljbGVTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvdmVoaWNsZS5qcydcbmltcG9ydCB7IENvQzdXZWFwb25TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy93ZWFwb24tc2hlZXQuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNoZWV0cyAoKSB7XG4gIEFjdG9ycy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBBY3RvclNoZWV0KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdOUENTaGVldCwge1xuICAgIHR5cGVzOiBbJ25wYyddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1ZlaGljbGVTaGVldCwge1xuICAgIHR5cGVzOiBbJ3ZlaGljbGUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDcmVhdHVyZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY3JlYXR1cmUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBBY3RvcnMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdDb250YWluZXJTaGVldCwge1xuICAgIHR5cGVzOiBbJ2NvbnRhaW5lciddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NoYXJhY3RlclNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY2hhcmFjdGVyJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBJdGVtcy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBJdGVtU2hlZXQpXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U2tpbGxTaGVldCwge1xuICAgIHR5cGVzOiBbJ3NraWxsJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdXZWFwb25TaGVldCwge1xuICAgIHR5cGVzOiBbJ3dlYXBvbiddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Qm9va1NoZWV0LCB7XG4gICAgdHlwZXM6IFsnYm9vayddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U3BlbGxTaGVldCwge1xuICAgIHR5cGVzOiBbJ3NwZWxsJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdUYWxlbnRTaGVldCwge1xuICAgIHR5cGVzOiBbJ3RhbGVudCddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3U3RhdHVzU2hlZXQsIHtcbiAgICB0eXBlczogWydzdGF0dXMnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN09jY3VwYXRpb25TaGVldCwge1xuICAgIHR5cGVzOiBbJ29jY3VwYXRpb24nXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0FyY2hldHlwZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsnYXJjaGV0eXBlJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTZXR1cFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc2V0dXAnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NoYXNlU2hlZXQsIHtcbiAgICB0eXBlczogWydjaGFzZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3SXRlbVNoZWV0LCB7IHR5cGVzOiBbJ2l0ZW0nXSB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0l0ZW1TaGVldFYyLCB7XG4gICAgdHlwZXM6IFsnaXRlbSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG5cbiAgU2NlbmVzLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIFNjZW5lQ29uZmlnKVxuICBTY2VuZXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTY2VuZUNvbmZpZywge1xuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG5cbiAgSm91cm5hbC51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBKb3VybmFsU2hlZXQpXG4gIEpvdXJuYWwucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdKb3VybmFsU2hlZXQsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIFJvbGxUYWJsZXMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgUm9sbFRhYmxlQ29uZmlnKVxuICBSb2xsVGFibGVzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Um9sbFRhYmxlQ29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBNYWNyb3MudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgTWFjcm9Db25maWcpXG4gIE1hY3Jvcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN01hY3JvQ29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBQbGF5bGlzdHMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgUGxheWxpc3RDb25maWcpXG4gIFBsYXlsaXN0cy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1BsYXlsaXN0Q29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIYW5kbGViYXJzICovXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5cbmV4cG9ydCBjb25zdCBoYW5kbGViYXJzSGVscGVyID0gZnVuY3Rpb24gKCkge1xuICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdyb2xsQWN0b3JJbWcnLCBmdW5jdGlvbiAoYWN0b3JLZXkpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleShhY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmV4cG9ydCBjbGFzcyBDb0M3RGVjYWRlckRTTkZhY2VzIHtcbiAgY29uc3RydXRvciAoKSB7XG4gICAgdGhpcy5zZWxlY3RlZCA9ICcnXG4gIH1cblxuICBzZXRGYWNlcyAoKSB7XG4gICAgbGV0IHNlbGVjdGVkID0gZ2FtZS51c2VyLmdldEZsYWcoJ2RpY2Utc28tbmljZScsICdhcHBlYXJhbmNlJyk/Lmdsb2JhbFxuICAgICAgLnN5c3RlbVxuICAgIGlmIChzZWxlY3RlZCAhPT0gdGhpcy5zZWxlY3RlZCkge1xuICAgICAgbGV0IGRhdGFcbiAgICAgIGxldCBkZXN0aW5hdGlvblxuICAgICAgbGV0IHNvdXJjZURpZSA9IGdhbWUuZGljZTNkLkRpY2VGYWN0b3J5LnN5c3RlbXNbc2VsZWN0ZWRdPy5kaWNlLmZpbmQoXG4gICAgICAgIGQgPT4gZC50eXBlID09PSAnZDEwMCdcbiAgICAgIClcbiAgICAgIGlmICh0eXBlb2Ygc291cmNlRGllID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBzb3VyY2VEaWUgPSBnYW1lLmRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zLnN0YW5kYXJkLmRpY2UuZmluZChcbiAgICAgICAgICBkID0+IGQudHlwZSA9PT0gJ2QxMDAnXG4gICAgICAgIClcbiAgICAgICAgc2VsZWN0ZWQgPSAnc3RhbmRhcmQnXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHNvdXJjZURpZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVzdGluYXRpb24gPSBnYW1lLmRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zLnN0YW5kYXJkLmRpY2UuZmluZEluZGV4KFxuICAgICAgICAgIGQgPT4gZC50eXBlID09PSAnZHQnXG4gICAgICAgIClcbiAgICAgICAgZGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHNvdXJjZURpZSlcbiAgICAgICAgZGF0YS50eXBlID0gJ2R0J1xuICAgICAgICBnYW1lLmRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zLnN0YW5kYXJkLmRpY2VbZGVzdGluYXRpb25dID1cbiAgICAgICAgICBPYmplY3QuYXNzaWduKHNvdXJjZURpZS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIGRhdGEpXG4gICAgICB9XG4gICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWRcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lICovXG5leHBvcnQgY2xhc3MgQ29DN1Rvb2x0aXBzIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMuVG9vbFRpcEhvdmVyID0gbnVsbFxuICAgIHRoaXMudG9vbFRpcFRpbWVyID0gbnVsbFxuICB9XG5cbiAgZGlzcGxheVRvb2xUaXAgKHRvb2xUaXApIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuVG9vbFRpcEhvdmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3QgYm91bmRzID0gdGhpcy5Ub29sVGlwSG92ZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClcbiAgICAgIGlmICghaXNOYU4oYm91bmRzLmxlZnQgfHwgJycpICYmICFpc05hTihib3VuZHMudG9wIHx8ICcnKSkge1xuICAgICAgICBsZXQgbGVmdCA9IGJvdW5kcy5sZWZ0XG4gICAgICAgIGxldCB0b3AgPSBib3VuZHMudG9wXG4gICAgICAgIGNvbnN0IGhlaWdodFRleHQgPSAkKHRoaXMuVG9vbFRpcEhvdmVyKS5vdXRlckhlaWdodCgpXG4gICAgICAgICQoJ2JvZHknKS5hcHBlbmQoJzxkaXYgaWQ9XCJoZWxwLXRvb2x0aXBcIj4nICsgdG9vbFRpcCArICc8L2Rpdj4nKVxuICAgICAgICBjb25zdCB0aXAgPSAkKCcjaGVscC10b29sdGlwJylcbiAgICAgICAgY29uc3QgaGVpZ2h0VGlwID0gdGlwLm91dGVySGVpZ2h0KClcbiAgICAgICAgY29uc3Qgd2lkdGhUaXAgPSB0aXAub3V0ZXJXaWR0aCgpXG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJIZWlnaHQgPCBoZWlnaHRUZXh0ICogMS41ICsgaGVpZ2h0VGlwICsgdG9wKSB7XG4gICAgICAgICAgdG9wID0gdG9wIC0gaGVpZ2h0VGlwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9wID0gdG9wICsgaGVpZ2h0VGV4dCAqIDEuNVxuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IHdpZHRoVGlwICsgbGVmdCkge1xuICAgICAgICAgIGxlZnQgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIHdpZHRoVGlwXG4gICAgICAgIH1cbiAgICAgICAgdGlwLmNzcyh7XG4gICAgICAgICAgbGVmdDogbGVmdCArICdweCcsXG4gICAgICAgICAgdG9wOiB0b3AgKyAncHgnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcExlYXZlIChldmVudCkge1xuICAgIGlmIChnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIpXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBudWxsXG4gICAgICAkKCcjaGVscC10b29sdGlwJykucmVtb3ZlKClcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBNdXRhdGlvbk9ic2VydmVyLCBUb3VyLCB1aSAqL1xubGV0IENvQzdUb3VyID0gY2xhc3MgaW50ZXJuYWxDb0M3VG91ciB7fVxuaWYgKHR5cGVvZiBUb3VyICE9PSAndW5kZWZpbmVkJykge1xuICBDb0M3VG91ciA9IGNsYXNzIGludGVybmFsQ29DN1RvdXIgZXh0ZW5kcyBUb3VyIHtcbiAgICBhc3luYyB3YWl0Rm9yRWxlbWVudCAoc2VsZWN0b3IpIHtcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgIHJlc29sdmUoKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zLCBvYnNlcnZlcikgPT4ge1xuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG5cbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XG4gICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgYXN5bmMgX3ByZVN0ZXAgKCkge1xuICAgICAgYXdhaXQgc3VwZXIuX3ByZVN0ZXAoKVxuXG4gICAgICAvLyBDbG9zZSBjdXJyZW50bHkgb3BlbiBhcHBsaWNhdGlvbnNcbiAgICAgIGlmICh0aGlzLnN0ZXBJbmRleCA9PT0gMCkge1xuICAgICAgICBmb3IgKGNvbnN0IGFwcCBvZiBPYmplY3QudmFsdWVzKHVpLndpbmRvd3MpKSB7XG4gICAgICAgICAgYXBwLmNsb3NlKClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBhd2FpdCB0aGlzLndhaXRGb3JFbGVtZW50KHRoaXMuY3VycmVudFN0ZXAuc2VsZWN0b3IpXG4gICAgfVxuXG4gICAgYXN5bmMgX3Bvc3RTdGVwICgpIHtcbiAgICAgIGF3YWl0IHN1cGVyLl9wb3N0U3RlcCgpXG4gICAgICBpZiAodGhpcy5zdGVwSW5kZXggPCAwIHx8ICF0aGlzLmhhc05leHQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5jdXJyZW50U3RlcC5hY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmlzUmVzZXR0aW5nKSB7XG4gICAgICAgIHRoaXMuaXNSZXNldHRpbmcgPSBmYWxzZVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnRTdGVwLmFjdGlvbikge1xuICAgICAgICBjYXNlICdjbGljayc6XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yKS5jbGljaygpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyByZXNldCAoKSB7XG4gICAgICBpZiAodGhpcy5zdGF0dXMgIT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgIHRoaXMuaXNSZXNldHRpbmcgPSB0cnVlXG4gICAgICB9XG4gICAgICBhd2FpdCBzdXBlci5yZXNldCgpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IENvQzdUb3VyIH1cbiIsIi8qIGdsb2JhbCBtZXJnZU9iamVjdCAqL1xuaW1wb3J0IHsgQ29DN1RvdXIgfSBmcm9tICcuLi9hcHBzL2NvYzctdG91ci5qcydcblxuZXhwb3J0IGNsYXNzIEVuYWJsZVZhcmlhbnRSdWxlc0VuIGV4dGVuZHMgQ29DN1RvdXIge1xuICBjb25zdHJ1Y3RvciAoY29uZmlnKSB7XG4gICAgc3VwZXIobWVyZ2VPYmplY3Qoe1xuICAgICAgdGl0bGU6ICdFbmFibGUgb3B0aW9uYWwvdmFyaWFudCBydWxlcy4nLFxuICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBob3cgdG8gZW5hYmxlIFB1bHAgQ3RodWxodSBydWxlcywgb3Igb3RoZXIgdmFyaWFudCBydWxlcycsXG4gICAgICBjYW5CZVJlc3VtZWQ6IGZhbHNlLFxuICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgIHN0ZXBzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2dvdG8tc2V0dGluZ3MnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtdGFiPVwic2V0dGluZ3NcIl0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc1RpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc0NvbnRlbnQnLFxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdnb3RvLWNvbmZpZ3VyZScsXG4gICAgICAgICAgc2VsZWN0b3I6ICdbZGF0YS1hY3Rpb249XCJjb25maWd1cmVcIl0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlQ29udGVudCcsXG4gICAgICAgICAgYWN0aW9uOiAnY2xpY2snXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2dvdG8tc3lzdGVtLXNldHRpbmdzJyxcbiAgICAgICAgICBzZWxlY3RvcjogJ1tkYXRhLWNhdGVnb3J5PVwic3lzdGVtXCJdJyxcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NDb250ZW50JyxcbiAgICAgICAgICBhY3Rpb246ICdjbGljaydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ290by1nYW1lLXJ1bGVzJyxcbiAgICAgICAgICBzZWxlY3RvcjogJ1tkYXRhLWNhdGVnb3J5PVwic3lzdGVtXCJdIFtkYXRhLWtleT1cIkNvQzcuZ2FtZVJ1bGVzXCJdJyxcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzVGl0bGUnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc0NvbnRlbnQnLFxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdzYXZlLWdhbWUtcnVsZXMnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnI3J1bGVzLXNldHRpbmdzIFtuYW1lPXN1Ym1pdF0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzQ29udGVudCdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGxvY2FsaXphdGlvbjoge1xuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc1RpdGxlJzogJ0dhbWUgU2V0dGluZ3MnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc0NvbnRlbnQnOiAnR28gdG8gdGhlIEdhbWUgU2V0dGluZ3MgdGFiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlVGl0bGUnOiAnQ29uZmlndXJlIFNldHRpbmdzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlQ29udGVudCc6ICdDbGljayBvbiB0aGUgQ29uZmlndXJlIFNldHRpbmdzIGJ1dHRvbicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzVGl0bGUnOiAnU3lzdGVtIFNldHRpbmdzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NDb250ZW50JzogJ0dvIHRvIHRoZSBTeXN0ZW0gU2V0dGluZ3MgdGFiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzVGl0bGUnOiAnQ29uZmlndXJlIFZhcmlhbnQvT3B0aW9uYWwgUnVsZXMnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNDb250ZW50JzogJ0NsaWNrIG9uIHRoZSBDb25maWd1cmUgVmFyaWFudC9PcHRpb25hbCBSdWxlcyBidXR0b24nLFxuICAgICAgICAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNUaXRsZSc6ICdTYXZlIHJ1bGUgY2hhbmdlcycsXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc0NvbnRlbnQnOiAnT25jZSB5b3UgaGF2ZSBtYWRlIHlvdXIgY2hhbmdlcyBjbGljayBvbiB0aGUgU2F2ZSBDaGFuZ2VzIGJ1dHRvbidcbiAgICAgIH1cbiAgICB9LCBjb25maWcpKVxuICB9XG5cbiAgYXN5bmMgX3ByZVN0ZXAgKCkge1xuICAgIGF3YWl0IHN1cGVyLl9wcmVTdGVwKClcblxuICAgIGlmICh0aGlzLmN1cnJlbnRTdGVwLmlkID09PSAnZ290by1nYW1lLXJ1bGVzJykge1xuICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yRWxlbWVudCgnLmNhdGVnb3J5LWZpbHRlci5zeXN0ZW0uYWN0aXZlJylcbiAgICAgIGF3YWl0IHRoaXMud2FpdEZvckVsZW1lbnQodGhpcy5jdXJyZW50U3RlcC5zZWxlY3RvcilcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IEVuYWJsZVZhcmlhbnRSdWxlc0VuIH0gZnJvbSAnLi9lbmFibGUtdmFyaWFudC1ydWxlcy1lbi5qcydcblxuZXhwb3J0IGNsYXNzIEVuYWJsZVZhcmlhbnRSdWxlc0ZyIGV4dGVuZHMgRW5hYmxlVmFyaWFudFJ1bGVzRW4ge1xuICBjb25zdHJ1Y3RvciAoY29uZmlnKSB7XG4gICAgc3VwZXIoe1xuICAgICAgdGl0bGU6ICdBY3RpdmV6IGxlcyByw6hnbGVzIG9wdGlvbm5lbGxlcy4nLFxuICAgICAgZGVzY3JpcHRpb246ICdBY3RpdmV6IGxlcyByw6hnbGVzIG9wdGlvbmVsbGVzIGV0IFB1bHAgQ3RodWxodScsXG4gICAgICBsb2NhbGl6YXRpb246IHtcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NUaXRsZSc6ICdQYXJhbcOodHJlcycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1NldHRpbmdzQ29udGVudCc6ICdPdXZyaXIgbFxcJ29uZ2xldCBcIlBhcmFtw6h0cmVzXCInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVUaXRsZSc6ICdDb25maWd1cmF0aW9uIGRlcyBvcHRpb25zJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlQ29udGVudCc6ICdDbGlxdWV6IHN1ciBcIkNvbmZpZ3VyYXRpb24gZGVzIG9wdGlvbnNcIicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzVGl0bGUnOiAnU3lzdMOobWUgZGUgamV1JyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NDb250ZW50JzogJ091dnJleiBsXFwnb25nbGV0IFwiU3lzdMOobWUgZGUgamV1XCInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNUaXRsZSc6ICdDb25maWd1cmVyIGxlcyB2YXJpYW50ZXMvcsOoZ2xlcyBvcHRpb25uZWxsZXMnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNDb250ZW50JzogJ0NsaWNrZXogc3VyIGxlIGJvdXR0b24gXCJDb25maWd1cmVyIGxlcyB2YXJpYW50ZXMvcsOoZ2xlcyBvcHRpb25uZWxsZXNcIicsXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc1RpdGxlJzogJ1NhdXZlZ2FyZGVyIGxlcyBtb2RpZmljYXRpb25zJyxcbiAgICAgICAgJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzQ29udGVudCc6ICdBcHJlcyBhdm9pciBjaG9pc2lzIGxlcyBvcHRpb25zIGNsaXF1ZXogc3VyIGxlIGJvdXRvbiBcIlNhdXZlZ2FyZGVyIGxlcyBtb2RpZmljYXRpb25zXCInXG4gICAgICB9XG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEhvb2tzLCBpc05ld2VyVmVyc2lvbiAqL1xuaW1wb3J0IHsgQ29DN1Rvb2x0aXBzIH0gZnJvbSAnLi4vYXBwcy90b29sdGlwcy5qcydcbi8vIGltcG9ydCB7IENvQzdXZWxjb21lTWVzc2FnZSB9IGZyb20gJy4uL2FwcHMvd2VsY29tZS1tZXNzYWdlLmpzJ1xuaW1wb3J0IHsgcmVnaXN0ZXJUb3VycyB9IGZyb20gJy4uL3NjcmlwdHMvcmVnaXN0ZXItdG91cnMuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbmNlKCdyZWFkeScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnQ2FsbCBvZiBDdGh1bGh1IDd0aCBFZGl0aW9uIHwgUmVhZHknKVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzaG93V2VsY29tZU1lc3NhZ2UnKSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgLyoqIFRoaXMgd2lsbCBwcm9tcHQgdGhlIHdlbGNvbWUgbWVzc2FnZSB3aGVuIGl0IGlzICBmaW5pc2hlZCAqL1xuICAgICAgLy8gYXdhaXQgQ29DN1dlbGNvbWVNZXNzYWdlLmNyZWF0ZSgpXG4gICAgfVxuICAgIGdhbWUuQ29DN1Rvb2x0aXBzID0gbmV3IENvQzdUb29sdGlwcygpXG5cbiAgICBjb25zdCBpbnN0cnVjdGlvbnNWZXJzaW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2hvd0luc3RydWN0aW9ucycpXG4gICAgaWYgKGlzTmV3ZXJWZXJzaW9uKGdhbWUuc3lzdGVtLnZlcnNpb24sIGluc3RydWN0aW9uc1ZlcnNpb24gPz8gJzAnKSkge1xuICAgICAgbGV0IGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgICAgY29uc3QgcmVhZE1lID0ge1xuICAgICAgICBlbjogJ3N4QjJPWGJmd1Y2TTBueVEnLFxuICAgICAgICBmcjogJ3RkYWt5elRWT1FzQU1kU20nXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHJlYWRNZVtsYW5nXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgbGFuZyA9ICdlbidcbiAgICAgIH1cbiAgICAgIChhd2FpdCBnYW1lLnBhY2tzLmdldCgnQ29DNy5zeXN0ZW0tZG9jJykuZ2V0RG9jdW1lbnQocmVhZE1lW2xhbmddKSkuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdzaG93SW5zdHJ1Y3Rpb25zJywgZ2FtZS5zeXN0ZW0udmVyc2lvbilcbiAgICB9XG4gICAgcmVnaXN0ZXJUb3VycygpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSAqL1xuaW1wb3J0IHsgRW5hYmxlVmFyaWFudFJ1bGVzRW4gfSBmcm9tICcuLi90b3Vycy9lbmFibGUtdmFyaWFudC1ydWxlcy1lbi5qcydcbmltcG9ydCB7IEVuYWJsZVZhcmlhbnRSdWxlc0ZyIH0gZnJvbSAnLi4vdG91cnMvZW5hYmxlLXZhcmlhbnQtcnVsZXMtZnIuanMnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWdpc3RlclRvdXJzICgpIHtcbiAgdHJ5IHtcbiAgICBsZXQgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgY29uc3QgdG91cnMgPSB7XG4gICAgICBlbjoge1xuICAgICAgICAnZW5hYmxlLXZhcmlhbnQtcnVsZXMnOiBFbmFibGVWYXJpYW50UnVsZXNFblxuICAgICAgfSxcbiAgICAgIGZyOiB7XG4gICAgICAgICdlbmFibGUtdmFyaWFudC1ydWxlcyc6IEVuYWJsZVZhcmlhbnRSdWxlc0ZyXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgdG91cnNbbGFuZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsYW5nID0gJ2VuJ1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IHRvdXJOYW1lIGluIHRvdXJzW2xhbmddKSB7XG4gICAgICBnYW1lLnRvdXJzLnJlZ2lzdGVyKCdDb0M3JywgdG91ck5hbWUsIG5ldyB0b3Vyc1tsYW5nXVt0b3VyTmFtZV0oKSlcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1RPVVIgRVJST1InLCBlcnIpXG4gIH1cbn1cbiIsImltcG9ydCAqIGFzIEluaXQgZnJvbSAnLi9pbml0LmpzJ1xuaW1wb3J0ICogYXMgRGljZVNvTmljZVJlYWR5IGZyb20gJy4vZGljZS1zby1uaWNlLXJlYWR5LmpzJ1xuaW1wb3J0ICogYXMgRGljZVNvTmljZVJvbGxTdGFydCBmcm9tICcuL2RpY2Utc28tbmljZS1yb2xsLXN0YXJ0LmpzJ1xuaW1wb3J0ICogYXMgUmVhZHkgZnJvbSAnLi9yZWFkeS5qcydcbmltcG9ydCAqIGFzIFJlbmRlckFjdG9yU2hlZXQgZnJvbSAnLi9yZW5kZXItYWN0b3Itc2hlZXQuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJDaGF0TWVzc2FnZSBmcm9tICcuL3JlbmRlci1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJEaWFsb2cgZnJvbSAnLi9yZW5kZXItZGlhbG9nLmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVySXRlbVNoZWV0IGZyb20gJy4vcmVuZGVyLWl0ZW0tc2hlZXQuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJQYXVzZSBmcm9tICcuL3JlbmRlci1wYXVzZS5qcydcbmltcG9ydCAqIGFzIFJlbmRlclBsYXllckxpc3QgZnJvbSAnLi9yZW5kZXItcGxheWVyLWxpc3QuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJTZXR0aW5nc0NvbmZpZyBmcm9tICcuL3JlbmRlci1zZXR0aW5ncy1jb25maWcuanMnXG5cbmV4cG9ydCBjb25zdCBDb0M3SG9va3MgPSB7XG4gIGxpc3RlbiAoKSB7XG4gICAgSW5pdC5saXN0ZW4oKVxuICAgIFJlYWR5Lmxpc3RlbigpXG4gICAgUmVuZGVyQWN0b3JTaGVldC5saXN0ZW4oKVxuICAgIFJlbmRlckNoYXRNZXNzYWdlLmxpc3RlbigpXG4gICAgUmVuZGVyRGlhbG9nLmxpc3RlbigpXG4gICAgUmVuZGVySXRlbVNoZWV0Lmxpc3RlbigpXG4gICAgUmVuZGVyUGF1c2UubGlzdGVuKClcbiAgICBEaWNlU29OaWNlUmVhZHkubGlzdGVuKClcbiAgICBEaWNlU29OaWNlUm9sbFN0YXJ0Lmxpc3RlbigpXG4gICAgUmVuZGVyUGxheWVyTGlzdC5saXN0ZW4oKVxuICAgIFJlbmRlclNldHRpbmdzQ29uZmlnLmxpc3RlbigpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJBY3RvclNoZWV0JywgYXN5bmMgKGRhdGEsIGh0bWwsIG9wdGlvbnMpID0+IHt9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uL2NoYXQuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4uL2FwcHMvY29jNy1wYXJzZXIuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyQ2hhdE1lc3NhZ2UnLCAoYXBwLCBodG1sLCBkYXRhKSA9PiB7XG4gICAgQ29DN0NoYXQucmVuZGVyTWVzc2FnZUhvb2soYXBwLCBodG1sLCBkYXRhKVxuICAgIENvQzdDaGF0LnJlbmRlckNoYXRNZXNzYWdlSG9vayhhcHAsIGh0bWwsIGRhdGEpXG4gICAgQ29DN1BhcnNlci5QYXJzZU1lc3NhZ2UoYXBwLCBodG1sLCBkYXRhKVxuICAgIENvQzdMaW5rLmJpbmRFdmVudHNIYW5kbGVyKGh0bWwpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyRGlhbG9nJywgKGRpYWxvZywgaHRtbCkgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSBodG1sLmZpbmQoJ2Zvcm0nKVxuICAgIGlmIChmb3JtLmlzKCcjZG9jdW1lbnQtY3JlYXRlJykgJiYgZm9ybS5maW5kKCdzZWxlY3QnKS5sZW5ndGggIT09IDApIHtcbiAgICAgIGNvbnN0IGVudGl0eUNyZWF0ZVNlbGVjdFRhZyA9IGZvcm0uZmluZChcIltuYW1lPSd0eXBlJ11cIilcbiAgICAgIGNvbnN0IGVudGl0eVNvcnRlZExpc3QgPSBbXVxuICAgICAgY29uc3Qgc2hvd0V4cGVyaW1lbnRhbCA9ICEhZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAgICdDb0M3JyxcbiAgICAgICAgJ2V4cGVyaW1lbnRhbEZlYXR1cmVzJ1xuICAgICAgKVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmNoaWxkcmVuKCkuZWFjaCgobywgZW50aXR5T3B0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGVudGl0eU9wdGlvbi50ZXh0Q29udGVudD8uY2FwaXRhbGl6ZSgpXG4gICAgICAgIGlmIChnYW1lLmkxOG4uaGFzKGBDb0M3LkVudGl0aWVzLiR7a2V5fWApKSB7XG4gICAgICAgICAgZW50aXR5T3B0aW9uLnRleHRDb250ZW50ID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDb0M3LkVudGl0aWVzLiR7a2V5fWApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3dFeHBlcmltZW50YWwgfHwgIVsndmVoaWNsZSddLmluY2x1ZGVzKGVudGl0eU9wdGlvbi52YWx1ZSkpIHtcbiAgICAgICAgICBlbnRpdHlTb3J0ZWRMaXN0LnB1c2goZW50aXR5T3B0aW9uKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmVtcHR5KClcbiAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy5hcHBlbmQoXG4gICAgICAgIGVudGl0eVNvcnRlZExpc3Quc29ydCgoZmlyc3QsIHNlY29uZCkgPT5cbiAgICAgICAgICBmaXJzdC5pbm5lclRleHQubG9jYWxlQ29tcGFyZShzZWNvbmQuaW5uZXJUZXh0KVxuICAgICAgICApXG4gICAgICApXG4gICAgICBpZiAoZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgpID09PSAnYWN0b3InKSB7XG4gICAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoJ2NoYXJhY3RlcicpXG4gICAgICB9IGVsc2UgaWYgKGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoKSA9PT0gJ2Jvb2snKSB7XG4gICAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoJ2l0ZW0nKVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIGFzeW5jIChkYXRhLCBodG1sLCBvcHRpb25zKSA9PiB7fSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlclBhdXNlJywgYXN5bmMgKGRhdGEsIGh0bWwsIG9wdGlvbnMpID0+IHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVHYW1lQXJ0d29yaycpKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJykge1xuICAgICAgICBodG1sLmZpbmQoJ2ltZycpLnJlbW92ZSgpXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpICE9PSAnJykge1xuICAgICAgICBodG1sLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnKSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlVGV4dCcpICE9PSAnJykge1xuICAgICAgICBodG1sLmZpbmQoJ2gzJykuaHRtbChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZVRleHQnKSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdEZWNhZGVyRFNORmFjZXMgfSBmcm9tICcuLi9hcHBzL2RlY2FkZXItZHNuLWZhY2VzLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub25jZSgnZGljZVNvTmljZVJlYWR5JywgZGljZTNkID0+IHtcbiAgICBkaWNlM2QuYWRkRGljZVByZXNldCh7XG4gICAgICB0eXBlOiAnZHQnLFxuICAgICAgbGFiZWxzOiBbJzEwJywgJzIwJywgJzMwJywgJzQwJywgJzUwJywgJzYwJywgJzcwJywgJzgwJywgJzkwJywgJzAwJ10sXG4gICAgICBmb250U2NhbGU6IDAuNzUsXG4gICAgICBzeXN0ZW06ICdzdGFuZGFyZCdcbiAgICB9KVxuICAgIGRpY2UzZC5hZGREaWNlUHJlc2V0KHtcbiAgICAgIHR5cGU6ICdkbycsXG4gICAgICBsYWJlbHM6IFsnMTAnLCAnMjAnLCAnMzAnLCAnNDAnLCAnNTAnLCAnNjAnLCAnNzAnLCAnODAnLCAnOTAnLCAnMDAnXSxcbiAgICAgIGZvbnRTY2FsZTogMC43NSxcbiAgICAgIHN5c3RlbTogJ3N0YW5kYXJkJ1xuICAgIH0pXG4gICAgZ2FtZS5Db0M3RGVjYWRlckRTTkZhY2VzID0gbmV3IENvQzdEZWNhZGVyRFNORmFjZXMoKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEhvb2tzICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ2RpY2VTb05pY2VSb2xsU3RhcnQnLCBkaWNlM2QgPT4ge1xuICAgIGdhbWUuQ29DN0RlY2FkZXJEU05GYWNlcy5zZXRGYWNlcygpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyUGxheWVyTGlzdCcsIChwbGF5ZXJMaXN0LCBodG1sLCBkYXRhKSA9PiB7XG4gICAgJCgnPGg0PicpLmFwcGVuZCgnPGRpdj48aSBjbGFzcz1cImZhLXJlZ3VsYXIgZmEtY2FsZW5kYXJcIj48L2k+JyArIGdhbWUuaTE4bi5mb3JtYXQoQ09DNy5lcmFzW2dhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJyldID8/ICdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpIH0pICsgJzwvZGl2PicpLmluc2VydEFmdGVyKCQoJ2gzJywgaHRtbCkpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdEaXJlY3RvcnlQaWNrZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJTZXR0aW5nc0NvbmZpZycsIChhcHAsIGh0bWwsIHVzZXIpID0+IHtcbiAgICBDb0M3RGlyZWN0b3J5UGlja2VyLnByb2Nlc3NIdG1sKGh0bWwpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgc29ja2V0bGliLCB1aSAqL1xuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi4vY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gQ29DN1NvY2tldCAoKSB7XG4gIGdhbWUuQ29DN3NvY2tldCA9IHNvY2tldGxpYi5yZWdpc3RlclN5c3RlbSgnQ29DNycpXG4gIGdhbWUuQ29DN3NvY2tldC5yZWdpc3RlcignZ21jcmVhdGVtZXNzYWdlYXMnLCBnbWNyZWF0ZW1lc3NhZ2VhcylcbiAgZ2FtZS5Db0M3c29ja2V0LnJlZ2lzdGVyKCdnbXRyYWRlaXRlbXRvJywgZ210cmFkZWl0ZW10bylcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ21jcmVhdGVtZXNzYWdlYXMgKGRhdGEpIHtcbiAgY29uc3QgbWVsZWVUYXJnZXQgPSBuZXcgQ29DN01lbGVlVGFyZ2V0KFxuICAgIGRhdGEudGFyZ2V0S2V5LFxuICAgIGRhdGEubWVzc2FnZUlkLFxuICAgIGRhdGEuZmFzdEZvcndhcmRcbiAgKVxuICBtZWxlZVRhcmdldC5pbml0aWF0b3JLZXkgPSBkYXRhLmFjdG9yS2V5XG4gIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBtZWxlZVRhcmdldC5jcmVhdGVDaGF0Q2FyZCgpXG4gIHJldHVybiBtZXNzYWdlXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdtdHJhZGVpdGVtdG8gKGRhdGEpIHtcbiAgdHJ5IHtcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoZGF0YS5zY2VuZSkge1xuICAgICAgYWN0b3IgPSBnYW1lLnNjZW5lcy5nZXQoZGF0YS5zY2VuZSkudG9rZW5zLmdldChkYXRhLmFjdG9yRnJvbSkuYWN0b3JcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoZGF0YS5hY3RvckZyb20pXG4gICAgfVxuICAgIGNvbnN0IGl0ZW0gPSBhY3Rvci5pdGVtcy5nZXQoZGF0YS5pdGVtKVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCBnYW1lLmFjdG9yc1xuICAgICAgLmdldChkYXRhLmFjdG9yVG8pXG4gICAgICAuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbS50b0pTT04oKV0pXG4gICAgaWYgKGNyZWF0ZWQpIHtcbiAgICAgIGFjdG9yLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2l0ZW0uaWRdKVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZSlcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuIiwiLyogZ2xvYmFsIGZyb21VdWlkLCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0ludmVzdGlnYXRvcldpemFyZCB9IGZyb20gJy4vaW52ZXN0aWdhdG9yLXdpemFyZC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTeXN0ZW1Tb2NrZXQge1xuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgICAgICAgICAgICAgIERhdGEgdG8gc2VuZCB0byBzb2NrZXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZGF0YS50eXBlXSAgICAgICAgICAgICAgICBBY3Rpb24gdG8gcnVuXG4gICAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gW2RhdGEubGlzdGVuZXJdICBvbmx5IHRoaXMgc3BlY2ZpYyB1c2VyIHNob3VsZCBydW4gdGhlIGFjdGlvblxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNhbGxTb2NrZXQgKGRhdGEpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEubGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlkID09PSBkYXRhLmxpc3RlbmVyKSB7XG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAnY2hhcmFjdGVyLXdpemFyZCc6XG4gICAgICAgICAgICBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZUNoYXJhY3RlckZyb21EYXRhKGRhdGEucGF5bG9hZClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnb3Blbi1jaGFyYWN0ZXInOlxuICAgICAgICAgICAgZ2FtZS5hY3RvcnMuZ2V0KGRhdGEucGF5bG9hZCkuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGU6XG4gICAgICAgICAgICBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgQ29tYmluZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlOlxuICAgICAgICAgICAgQ29tYmluZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnaW52b2tlJzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IGZyb21VdWlkKGRhdGEuaXRlbSlcbiAgICAgICAgICAgICAgaXRlbVtkYXRhLm1ldGhvZF0oZGF0YS5kYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSAndXBkYXRlQ2hhcic6XG4gICAgICAgICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IEtlZXBlciBhY3Rpb24sIGlmIHlvdSBhcmUgYSBrZWVwZXIgcnVuIHlvdXJzZWxmLCBpZiB0aGVyZSBpcyBubyBhY3RpdmUgR00gc2hvdyBlcnJvclxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAgICAgICAgICAgICBEYXRhIHRvIHNlbmQgdG8gc29ja2V0LlxuICAgKi9cbiAgc3RhdGljIHJlcXVlc3RLZWVwZXJBY3Rpb24gKGRhdGEpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGRhdGEubGlzdGVuZXIgPSBnYW1lLnVzZXIuaWRcbiAgICAgIENvQzdTeXN0ZW1Tb2NrZXQuY2FsbFNvY2tldChkYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBrZWVwZXJzID0gZ2FtZS51c2Vycy5maWx0ZXIodSA9PiB1LmFjdGl2ZSAmJiB1LmlzR00pXG4gICAgICBpZiAoa2VlcGVycy5sZW5ndGgpIHtcbiAgICAgICAgZGF0YS5saXN0ZW5lciA9IGtlZXBlcnNbMF0uaWRcbiAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNaXNzaW5nS2VlcGVyVXNlcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdCB1c2VyIGFjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAgICAgICAgICAgICBEYXRhIHRvIHNlbmQgdG8gc29ja2V0LlxuICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSB1c2VySWQgICAgICBPbmx5IHRoaXMgdXNlciBpZCBzaG91bGQgcnVuIHRoZSBhY3Rpb24uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZXJyb3JJZk1pc3NpbmcgIElmIHJlcXVlc3RpbmcgYSBzcGVjaWZpYyB1c2VyIHNob3VsZCBydW4gdGhlIGFjdGlvbiBlcnJvciBpZiB1c2VyIG5vdCBmb3VuZCAvIGxvZ2dlZCBpbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlU2VsZiAgICAgSWYgcnVubmluZyBhcyBhbGwgdXNlcnMgc2hvdWxkIHRoZSBjdXJyZW50IHVzZXIgYWxzbyBydW4gdGhlIGFjdGlvbi5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHN0YXRpYyByZXF1ZXN0VXNlckFjdGlvbiAoXG4gICAgZGF0YSxcbiAgICB7IHVzZXJJZCA9IG51bGwsIGVycm9ySWZNaXNzaW5nID0gdHJ1ZSwgaW5jbHVkZVNlbGYgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBpZiAodXNlcklkICYmIHR5cGVvZiB1c2VySWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodXNlcklkID09PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgICAgZGF0YS5saXN0ZW5lciA9IGdhbWUudXNlci5pZFxuICAgICAgICBDb0M3U3lzdGVtU29ja2V0LmNhbGxTb2NrZXQoZGF0YSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBnYW1lLnVzZXJzLmdldCh1c2VySWQpXG4gICAgICAgIGlmICh0eXBlb2YgdXNlci5pZCAhPT0gJ3VuZGVmaW5lZCcgJiYgdXNlci5hY3RpdmUpIHtcbiAgICAgICAgICBkYXRhLmxpc3RlbmVyID0gdXNlci5pZFxuICAgICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvcklmTWlzc2luZykge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTWlzc2luZ1VzZXInKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaW5jbHVkZVNlbGYpIHtcbiAgICAgICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXG4gICAgICB9XG4gICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ29tYmF0LCBDT05GSUcsIGdhbWUsIEhvb2tzLCBJdGVtRGlyZWN0b3J5ICovXG5pbXBvcnQgeyBDb0M3TlBDU2hlZXQgfSBmcm9tICcuL2FjdG9ycy9zaGVldHMvbnBjLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NyZWF0dXJlU2hlZXQgfSBmcm9tICcuL2FjdG9ycy9zaGVldHMvY3JlYXR1cmUtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q2hhcmFjdGVyU2hlZXQgfSBmcm9tICcuL2FjdG9ycy9zaGVldHMvY2hhcmFjdGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuL2NoYXQuanMnXG5pbXBvcnQgeyBDb0M3Q29tYmF0LCByb2xsSW5pdGlhdGl2ZSB9IGZyb20gJy4vY29tYmF0LmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgVXBkYXRlciB9IGZyb20gJy4vdXBkYXRlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdQYXJzZXIgfSBmcm9tICcuL2FwcHMvY29jNy1wYXJzZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN01lbnUgfSBmcm9tICcuL21lbnUuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcbmltcG9ydCB7IENvQzdDYW52YXMgfSBmcm9tICcuL2FwcHMvY2FudmFzLmpzJ1xuaW1wb3J0IHsgQ29DN1NldHRpbmdzRGlyZWN0b3J5IH0gZnJvbSAnLi9zZXR0aW5ncy1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSB9IGZyb20gJy4vY29tcGVuZGl1bS1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JEaXJlY3RvcnkgfSBmcm9tICcuL2FjdG9yLWRpcmVjdG9yeS5qcydcbmltcG9ydCB7IENvQzdIb29rcyB9IGZyb20gJy4vaG9va3MvaW5kZXguanMnXG5pbXBvcnQgKiBhcyBEaWNlQm90IGZyb20gJy4vZGljZWJvdC5qcydcbmltcG9ydCAnLi4vc3R5bGVzL3N5c3RlbS9pbmRleC5sZXNzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlU2hlZXQgfSBmcm9tICcuL2l0ZW1zL2NoYXNlL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN1NvY2tldCB9IGZyb20gJy4vaG9va3Mvc29ja2V0LmpzJ1xuaW1wb3J0IHsgQ29DN1N5c3RlbVNvY2tldCB9IGZyb20gJy4vYXBwcy9jb2M3LXN5c3RlbS1zb2NrZXQuanMnXG5pbXBvcnQgeyBEcm9wQWN0b3JTaGVldERhdGEgfSBmcm9tICcuL2hvb2tzL2Ryb3AtYWN0b3Itc2hlZXQtZGF0YS5qcydcblxuLy8gQ2FyZCBpbml0XG5pbXBvcnQgeyBpbml0RUNDIH0gZnJvbSAnLi9jb21tb24vY2hhdGNhcmRsaWIvc3JjL2NoYXRjYXJkbGliLmpzJ1xuaW1wb3J0IHsgQ2hhc2VPYnN0YWNsZUNhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuanMnXG5pbXBvcnQgeyBDb0M3Q29udGV4dE1lbnUgfSBmcm9tICcuL2NvbnRleHQtbWVudS5qcydcblxuSG9va3Mub24oJ3JlbmRlclNldHRpbmdzQ29uZmlnJywgKGFwcCwgaHRtbCwgb3B0aW9ucykgPT4ge1xuICBjb25zdCBzeXN0ZW1UYWIgPSAkKGFwcC5mb3JtKS5maW5kKCcudGFiW2RhdGEtdGFiPXN5c3RlbV0nKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kaXNwbGF5SW5pdERpY2VzXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVJbml0aWF0aXZlJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5zdGFuYnlHTVJvbGxzXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVSb2xsJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC50cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlQ2hhdENhcmRzJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5lbmFibGVTdGF0dXNJY29uc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlU2NlbmUnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLm92ZXJyaWRlR2FtZUFydHdvcmtdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUdhbWVBcnR3b3JrJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kaXNwbGF5UGxheWVyTmFtZU9uU2hlZXRdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVNoZWV0JykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kaXNyZWdhcmRVc2VQZXJSb3VuZF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlV2VhcG9uJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5zeW5jRGljZTNkXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVEaWNlU29OaWNlJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kZWJ1Z21vZGVdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZURldmVsb3BlckRlYnVnJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnc2VsZWN0W25hbWU9Q29DN1xcXFwuYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZV0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlUm9sbFRhYmxlJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICAvLyBNT1ZFRCBUTyBDSEFTU0UgSU5ESVZJRFVBTCBTRVRUSU5HXG4gIC8vIHN5c3RlbVRhYlxuICAvLyAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmNoYXNlU2hvd1Rva2VuTW92ZW1lbnRdJylcbiAgLy8gICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAvLyAgIC5iZWZvcmUoXG4gIC8vICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgLy8gICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUNoYXNlU2V0dGluZ3MnKSArXG4gIC8vICAgICAgICc8L2gyPidcbiAgLy8gICApXG59KVxuXG5Ib29rcy5vbmNlKCdpbml0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICBnYW1lLkNvQzcgPSB7XG4gICAgbWFjcm9zOiB7XG4gICAgICBza2lsbENoZWNrOiBDb0M3VXRpbGl0aWVzLnNraWxsQ2hlY2tNYWNybyxcbiAgICAgIHdlYXBvbkNoZWNrOiBDb0M3VXRpbGl0aWVzLndlYXBvbkNoZWNrTWFjcm8sXG4gICAgICBjaGVjazogQ29DN1V0aWxpdGllcy5jaGVja01hY3JvXG4gICAgfSxcbiAgICBjYXJkczoge1xuICAgICAgRGFtYWdlQ2FyZFxuICAgIH0sXG4gICAgZGV2OiB7XG4gICAgICBkaWNlOiB7XG4gICAgICAgIGFsd2F5c0NyaXQ6IGZhbHNlLFxuICAgICAgICBhbHdheXNGdW1ibGU6IGZhbHNlXG4gICAgICB9XG4gICAgfSxcbiAgICBlcmFzOiAoZXJhLCBuYW1lKSA9PiB7XG4gICAgICBDT0M3LmVyYXNbZXJhXSA9IG5hbWVcbiAgICB9XG4gIH1cbiAgQ29tYmF0LnByb3RvdHlwZS5yb2xsSW5pdGlhdGl2ZSA9IHJvbGxJbml0aWF0aXZlXG59KVxuXG5pbml0RUNDKENoYXNlT2JzdGFjbGVDYXJkKVxuXG5Ib29rcy5vbigncmVuZGVyQ29tYmF0VHJhY2tlcicsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDb21iYXQucmVuZGVyQ29tYmF0VHJhY2tlcihhcHAsIGh0bWwsIGRhdGEpXG4pXG5cbkRpY2VCb3QubGlzdGVuKClcbkNvQzdIb29rcy5saXN0ZW4oKVxuXG5Ib29rcy5vbmNlKCdzb2NrZXRsaWIucmVhZHknLCBDb0M3U29ja2V0KVxuXG5Ib29rcy5vbmNlKCdzZXR1cCcsIGZ1bmN0aW9uICgpIHtcbiAgLy8gTG9jYWxpemUgQ09ORklHIG9iamVjdHMgb25jZSB1cC1mcm9udFxuICBjb25zdCB0b0xvY2FsaXplID0gW1xuICAgICdzcGVsbFByb3BlcnRpZXMnLFxuICAgICdib29rVHlwZScsXG4gICAgJ3RhbGVudFR5cGUnLFxuICAgICdvY2N1cGF0aW9uUHJvcGVydGllcycsXG4gICAgJ3N0YXR1c1R5cGUnXG4gIF1cblxuICBmb3IgKGNvbnN0IG8gb2YgdG9Mb2NhbGl6ZSkge1xuICAgIGNvbnN0IGxvY2FsaXplZCA9IE9iamVjdC5lbnRyaWVzKENPQzdbb10pLm1hcChlID0+IHtcbiAgICAgIHJldHVybiBbZVswXSwgZ2FtZS5pMThuLmxvY2FsaXplKGVbMV0pXVxuICAgIH0pXG4gICAgQ09DN1tvXSA9IGxvY2FsaXplZC5yZWR1Y2UoKG9iaiwgZSkgPT4ge1xuICAgICAgb2JqW2VbMF1dID0gZVsxXVxuICAgICAgcmV0dXJuIG9ialxuICAgIH0sIHt9KVxuICB9XG5cbiAgbGV0IGVmZmVjdEluZGV4ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmluZEluZGV4KFxuICAgIHQgPT4gdC5pZCA9PT0gQ09DNy5zdGF0dXMuZGVhZFxuICApXG4gIGlmIChlZmZlY3RJbmRleCAhPT0gLTEpIHtcbiAgICBDT05GSUcuc3RhdHVzRWZmZWN0c1tlZmZlY3RJbmRleF0uaWNvbiA9XG4gICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90b21ic3RvbmUuc3ZnJ1xuICB9XG4gIGVmZmVjdEluZGV4ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmluZEluZGV4KFxuICAgIHQgPT4gdC5pZCA9PT0gQ09DNy5zdGF0dXMudW5jb25zY2lvdXNcbiAgKVxuICBpZiAoZWZmZWN0SW5kZXggIT09IC0xKSB7XG4gICAgQ09ORklHLnN0YXR1c0VmZmVjdHNbZWZmZWN0SW5kZXhdLmljb24gPVxuICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMva25vY2tlZC1vdXQtc3RhcnMuc3ZnJ1xuICB9XG4gIENPTkZJRy5zdGF0dXNFZmZlY3RzLnVuc2hpZnQoXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lLFxuICAgICAgbGFiZWw6ICdDb0M3LkJvdXRPZk1hZG5lc3NOYW1lJyxcbiAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2hhbmdpbmctc3BpZGVyLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSxcbiAgICAgIGxhYmVsOiAnQ29DNy5JbnNhbml0eU5hbWUnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdGVudGFjbGVzLXNrdWxsLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcyxcbiAgICAgIGxhYmVsOiAnQ29DNy5Dcml0aWNhbFdvdW5kcycsXG4gICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9hcm0tc2xpbmcuc3ZnJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLmR5aW5nLFxuICAgICAgbGFiZWw6ICdDb0M3LkR5aW5nJyxcbiAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2hlYXJ0LWJlYXRzLnN2ZydcbiAgICB9XG4gIClcbn0pXG5cbkhvb2tzLm9uKCdjcmVhdGVBY3RpdmVFZmZlY3QnLCAoZGF0YSwgb3B0aW9ucywgdXNlcklkKSA9PiB7XG4gIGlmIChcbiAgICBnYW1lLnVzZXJJZCA9PT0gdXNlcklkICYmXG4gICAgdHlwZW9mIGRhdGEuZmxhZ3MuY29yZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgZGF0YS5mbGFncy5jb3JlLnN0YXR1c0lkICE9PSAndW5kZWZpbmVkJ1xuICApIHtcbiAgICBzd2l0Y2ggKGRhdGEuZmxhZ3MuY29yZS5zdGF0dXNJZCkge1xuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgIGRhdGEucGFyZW50LnNldENvbmRpdGlvbihkYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQsIHtcbiAgICAgICAgICBmb3JjZVZhbHVlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgcmVhbFRpbWUgPSBkYXRhLmZsYWdzLkNvQzc/LnJlYWxUaW1lXG4gICAgICAgICAgbGV0IGR1cmF0aW9uID0gbnVsbFxuICAgICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uPy5yb3VuZHNcbiAgICAgICAgICB9IGVsc2UgaWYgKHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgICAgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uPy5zZWNvbmRzXG4gICAgICAgICAgICBpZiAoIWlzTmFOKGR1cmF0aW9uKSkge1xuICAgICAgICAgICAgICBkdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyAzNjAwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhLnBhcmVudC5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUsIHtcbiAgICAgICAgICAgIGZvcmNlVmFsdWU6IHRydWUsXG4gICAgICAgICAgICByZWFsVGltZSxcbiAgICAgICAgICAgIGR1cmF0aW9uXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxufSlcblxuSG9va3Mub24oJ2RlbGV0ZUFjdGl2ZUVmZmVjdCcsIChkYXRhLCBvcHRpb25zLCB1c2VySWQpID0+IHtcbiAgaWYgKFxuICAgIGdhbWUudXNlcklkID09PSB1c2VySWQgJiZcbiAgICB0eXBlb2YgZGF0YS5mbGFncy5jb3JlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBkYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQgIT09ICd1bmRlZmluZWQnXG4gICkge1xuICAgIHN3aXRjaCAoZGF0YS5mbGFncy5jb3JlLnN0YXR1c0lkKSB7XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgIGRhdGEucGFyZW50LnVuc2V0Q29uZGl0aW9uKGRhdGEuZmxhZ3MuY29yZS5zdGF0dXNJZCwge1xuICAgICAgICAgIGZvcmNlVmFsdWU6IHRydWVcbiAgICAgICAgfSlcbiAgICB9XG4gIH1cbn0pXG5cbi8vIFRoaXMgd2lsbCBoaWRlIHRoZSBpdGVtIGNhbGxlZCAnX19Db0M3SW50ZXJuYWxJdGVtX18nXG4vLyBUaGlzIGl0ZW0gaXMgdXNlZCBmb3IgaW50ZXJuYWwgcHVycG9zZXMgYW5kIHNob3VsZCBub3QgYmUgc2VlbiBieSBhbnlvbmVcbkhvb2tzLm9uKCdjaGFuZ2VTaWRlYmFyVGFiJywgZGlyZWN0b3J5ID0+IHtcbiAgaWYgKGRpcmVjdG9yeSBpbnN0YW5jZW9mIEl0ZW1EaXJlY3RvcnkpIHtcbiAgICBjb25zdCBpdGVtID0gZ2FtZS5pdGVtcy5maW5kKGkgPT4gaS5uYW1lID09PSAnX19Db0M3SW50ZXJuYWxJdGVtX18nKVxuICAgIGlmIChpdGVtKSB7XG4gICAgICBjb25zdCBodG1sID0gZGlyZWN0b3J5Ll9lbGVtZW50XG4gICAgICBjb25zdCBpdGVtRWxlbWVudCA9IGh0bWwuZmluZChgW2RhdGEtZG9jdW1lbnQtaWQ9JyR7aXRlbS5pZH0nXWApXG4gICAgICBpZiAoaXRlbUVsZW1lbnQpIGl0ZW1FbGVtZW50WzBdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9XG4gIH1cbn0pXG5cbkhvb2tzLm9uKCdob3RiYXJEcm9wJywgKGJhciwgZGF0YSwgc2xvdCkgPT4ge1xuICByZXR1cm4gQ29DN1V0aWxpdGllcy5jcmVhdGVNYWNybyhiYXIsIGRhdGEsIHNsb3QpXG59KVxuXG5Ib29rcy5vbigncmVuZGVyQ2hhdExvZycsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDaGF0LmNoYXRMaXN0ZW5lcnMoYXBwLCBodG1sLCBkYXRhKVxuKVxuSG9va3Mub24oJ3VwZGF0ZUNoYXRNZXNzYWdlJywgKGNoYXRNZXNzYWdlLCBjaGF0RGF0YSwgZGlmZiwgc3BlYWtlcikgPT5cbiAgQ29DN0NoYXQub25VcGRhdGVDaGF0TWVzc2FnZShjaGF0TWVzc2FnZSwgY2hhdERhdGEsIGRpZmYsIHNwZWFrZXIpXG4pXG5cbkhvb2tzLm9uKCdyZWFkeScsIGFzeW5jICgpID0+IHtcbiAgYXdhaXQgVXBkYXRlci5jaGVja0ZvclVwZGF0ZSgpXG5cbiAgLy8gZ2FtZS5Db0M3Lm1lbnVzID0gbmV3IENvQzdNZW51KCk7XG5cbiAgYWN0aXZhdGVHbG9iYWxMaXN0ZW5lcigpXG5cbiAgLy8gc2V0R2xvYmFsQ3NzVmFyKClcblxuICBnYW1lLkNvQzcuc2tpbGxMaXN0ID0gYXdhaXQgZ2FtZS5wYWNrcy5nZXQoJ0NvQzcuc2tpbGxzJyk/LmdldERvY3VtZW50cygpXG5cbiAgZ2FtZS5zb2NrZXQub24oJ3N5c3RlbS5Db0M3JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXG4gIH0pXG5cbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4XCI6IFwiUGhvYmlhcyBpbmRleFwiLFxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhIaW50XCI6IFwiVGhlIGluZGV4IChyb2xsIHJlc3VsdCkgdGhhdCB3aWxsIHRyaWdnZXIgYSByb2xsIGluIHRoZSBwaG9iaWFzIHRhYmxlXCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4XCI6IFwiTWFuaWFzIGluZGV4XCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4SGludFwiOiBcIlRoZSBpbmRleCAocm9sbCByZXN1bHQpIHRoYXQgd2lsbCB0cmlnZ2VyIGEgcm9sbCBpbiB0aGUgbWFuaWFzIHRhYmxlXCIsXG4gIC8vIFwiU0VUVElOR1MuU2FtcGxlUGhvYmlhc1RhYmxlXCI6IFwiU2FtcGxlIHBob2JpYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5TYW1wbGVNYW5pYXNUYWJsZVwiOiBcIlNhbXBsZSBNYW5pYXMgdGFibGVcIixcblxuICBmdW5jdGlvbiBfdGFibGVTZXR0aW5nc0NoYW5nZWQgKHRhYmxlLCBpZCkge1xuICAgIGlmIChpZCA9PT0gJ25vbmUnKSBnYW1lLkNvQzcudGFibGVzW3RhYmxlXSA9IG51bGxcbiAgICBlbHNlIGdhbWUuQ29DNy50YWJsZXNbdGFibGVdID0gZ2FtZS50YWJsZXMuZ2V0KGlkKVxuICB9XG5cbiAgLy8gZnVuY3Rpb24gX3RhYmxlSW5kZXhDaGFuZ2VkKCB0YWJsZSwgaW5kZXgpe1xuICAvLyAgZ2FtZS5Db0M3LnRhYmxlc1t0YWJsZV09aW5kZXg7XG4gIC8vIH1cblxuICBjb25zdCB0YWJsZUNob2ljZSA9IHsgbm9uZTogJ1NFVFRJTkdTLkxldEtlZXBlckRlY2lkZScgfVxuICBmb3IgKGNvbnN0IHQgb2YgZ2FtZS50YWJsZXMpIHtcbiAgICB0YWJsZUNob2ljZVt0Ll9pZF0gPSB0Lm5hbWVcbiAgfVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdub25lJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gICAgb25DaGFuZ2U6IGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCgnYm91dE9mTWFkbmVzc19TdW1tYXJ5JywgaWQpXG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnbm9uZScsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAgIG9uQ2hhbmdlOiBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoJ2JvdXRPZk1hZG5lc3NfUmVhbFRpbWUnLCBpZClcbiAgfSlcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4JyxcbiAgLy8gIGhpbnQ6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDksXG4gIC8vICB0eXBlOiBOdW1iZXIsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZUluZGV4Q2hhbmdlZCggJ3Bob2JpYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcsXG4gIC8vICBoaW50OiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDEwLFxuICAvLyAgdHlwZTogTnVtYmVyLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVJbmRleENoYW5nZWQoICdtYW5pYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLlNhbXBsZVBob2JpYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdwaG9iaWFzJywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5TYW1wbGVNYW5pYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdtYW5pYXMnLCBpZClcbiAgLy8gfSk7XG5cbiAgZ2FtZS5Db0M3LnRhYmxlcyA9IHtcbiAgICBib3V0T2ZNYWRuZXNzX1N1bW1hcnk6XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJykgPT09ICdub25lJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBnYW1lLnRhYmxlcy5nZXQoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScpXG4gICAgICAgICksXG4gICAgYm91dE9mTWFkbmVzc19SZWFsVGltZTpcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJykgPT09ICdub25lJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBnYW1lLnRhYmxlcy5nZXQoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgICApXG4gICAgLy8gbWFuaWFzSW5kZXg6IGdlLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4JyksXG4gICAgLy8gcGhvYmlhc0luZGV4OiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXgnKSxcbiAgICAvLyBwaG9iaWFzOiAoJ25vbmUnID09IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScpKT9udWxsOmdhbWUudGFibGVzLmdldChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzYW1wbGVQaG9iaWFzVGFibGUnKSksXG4gICAgLy8gbWFuaWFzOiAoJ25vbmUnID09IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZU1hbmlhc1RhYmxlJykpP251bGw6Z2FtZS50YWJsZXMuZ2V0KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZU1hbmlhc1RhYmxlJykpLFxuICB9XG59KVxuXG4vLyBIb29rcy5vbigncHJlQ3JlYXRlQWN0b3InLCAoY3JlYXRlRGF0YSkgPT4gQ29DQWN0b3IuaW5pdFRva2VuKCBjcmVhdGVEYXRhKSk7XG5cbkhvb2tzLm9uKFxuICAncmVuZGVyQ29DN0NoYXNlU2hlZXQnLFxuICAvKiogYXN5bmMgKi8gKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgICAvKiogYXdhaXQgKi8gQ29DN0NoYXNlU2hlZXQuc2V0U2Nyb2xsKGFwcCwgaHRtbCwgZGF0YSlcbilcblxuSG9va3Mub24oJ2Nsb3NlQ29DN0NoYXNlU2hlZXQnLCAoYXBwLCBodG1sKSA9PlxuICBDb0M3Q2hhc2VTaGVldC5vbkNsb3NlKGFwcCwgaHRtbClcbilcblxuLy8gQ2FsbGVkIG9uIGNsb3NpbmcgYSBjaGFyYWN0ZXIgc2hlZXQgdG8gbG9jayBpdCBvbiBnZXR0aW5nIGl0IHRvIGRpc3BsYXkgdmFsdWVzXG5Ib29rcy5vbignY2xvc2VBY3RvclNoZWV0JywgY2hhcmFjdGVyU2hlZXQgPT4gY2hhcmFjdGVyU2hlZXQub25DbG9zZVNoZWV0KCkpXG5Ib29rcy5vbigncmVuZGVyQ29DN0NyZWF0dXJlU2hlZXQnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q3JlYXR1cmVTaGVldC5mb3JjZUF1dG8oYXBwLCBodG1sLCBkYXRhKVxuKVxuSG9va3Mub24oJ3JlbmRlckNvQzdOUENTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYXBwLCBodG1sLCBkYXRhKVxuKVxuLy8gSG9va3Mub24oJ3VwZGF0ZUFjdG9yJywgKGFjdG9yLCBkYXRhVXBkYXRlKSA9PiBDb0NBY3Rvci51cGRhdGVBY3RvciggYWN0b3IsIGRhdGFVcGRhdGUpKTtcbi8vIEhvb2tzLm9uKCd1cGRhdGVUb2tlbicsIChzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpID0+IENvQ0FjdG9yLnVwZGF0ZVRva2VuKCBzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpKTtcblxuSG9va3Mub24oJ2NoYXRNZXNzYWdlJywgQ29DN1V0aWxpdGllcy5QYXJzZUNoYXRFbnRyeSlcbi8vIEhvb2tzLm9uKCdwcmVDcmVhdGVUb2tlbicsICggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkgPT4gQ29DQWN0b3IucHJlQ3JlYXRlVG9rZW4oIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpKVxuLy8gSG9va3Mub24oJ2NyZWF0ZVRva2VuJywgKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSA9PiBDb0NBY3Rvci5wcmVDcmVhdGVUb2tlbiggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkpXG4vLyBIb29rcy5vbihcInJlbmRlckNoYXRMb2dcIiwgKGFwcCwgaHRtbCwgZGF0YSkgPT4gQ29DN0l0ZW0uY2hhdExpc3RlbmVycyhodG1sKSk7XG5cbkhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgKC8qIGNvbnRyb2xzICovKSA9PiB7XG4gIC8vIGlmKCBnYW1lLnVzZXIuaXNHTSl7XG4gIC8vICBsZXQgZ3JvdXAgPSBjb250cm9scy5maW5kKGIgPT4gYi5uYW1lID09ICd0b2tlbicpO1xuICAvLyAgZ3JvdXAudG9vbHMucHVzaCh7XG4gIC8vICAgIHRvZ2dsZTogdHJ1ZSxcbiAgLy8gICAgaWNvbiA6ICdmYXMgZmEtYW5nbGUtZG91YmxlLXVwJyxcbiAgLy8gICAgbmFtZTogJ2RldnBoYXNlJyxcbiAgLy8gICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKSxcbiAgLy8gICAgdGl0bGU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpPyBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkRldlBoYXNlRW5hYmxlZCcpOiBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkRldlBoYXNlRGlzYWJsZWQnKSxcbiAgLy8gICAgb25DbGljayA6YXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVEZXZQaGFzZSgpXG4gIC8vICB9KTtcbiAgLy8gIGdyb3VwLnRvb2xzLnB1c2goe1xuICAvLyAgICB0b2dnbGU6IHRydWUsXG4gIC8vICAgIGljb24gOiAnZmFzIGZhcyBmYS11c2VyLWVkaXQnLFxuICAvLyAgICBuYW1lOiAnY2hhcmNyZWF0ZScsXG4gIC8vICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpLFxuICAvLyAgICB0aXRsZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpPyBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkNoYXJDcmVhdGlvbkVuYWJsZWQnKTogZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5DaGFyQ3JlYXRpb25EaXNhYmxlZCcpLFxuICAvLyAgICBvbkNsaWNrIDphc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZUNoYXJDcmVhdGlvbigpXG4gIC8vICB9KTtcbiAgLy8gfVxufSlcblxuLy8gSG9va3Mub24oJ3JlbmRlclNjZW5lQ29udHJvbHMnLCAoKSA9PiBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKSk7XG4vLyBIb29rcy5vbigncmVuZGVyU2NlbmVOYXZpZ2F0aW9uJywgKCkgPT4gQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKCkpO1xuSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIENvQzdQYXJzZXIuUGFyc2VTaGVldENvbnRlbnQpXG5Ib29rcy5vbigncmVuZGVySm91cm5hbFBhZ2VTaGVldCcsIENvQzdQYXJzZXIuUGFyc2VTaGVldENvbnRlbnQpXG5Ib29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIENvQzdQYXJzZXIuUGFyc2VTaGVldENvbnRlbnQpXG4vLyBTaGVldCBjc3Mgb3B0aW9uc1xuLy8gSG9va3Mub24oJ3JlbmRlckNvQzdDaGFyYWN0ZXJTaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldC5yZW5kZXJTaGVldCk7XG5Ib29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldC5yZW5kZXJTaGVldClcbkhvb2tzLm9uKCdyZW5kZXJJdGVtU2hlZXQnLCBDb0M3Q2hhcmFjdGVyU2hlZXQucmVuZGVyU2hlZXQpXG5cbi8vIEhvb2tzLm9uKCdkcm9wQ2FudmFzRGF0YScsIENvQzdQYXJzZXIub25Ecm9wU29tZXRoaW5nKTtcbkhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgQ29DN01lbnUuZ2V0QnV0dG9ucylcbkhvb2tzLm9uKCdyZW5kZXJTY2VuZUNvbnRyb2xzJywgQ29DN01lbnUucmVuZGVyQ29udHJvbHMpXG5cbkhvb2tzLm9uKCdkcm9wQ2FudmFzRGF0YScsIENvQzdDYW52YXMub25Ecm9wU29tZXRoaW5nKVxuXG5Ib29rcy5vbignZHJvcEFjdG9yU2hlZXREYXRhJywgRHJvcEFjdG9yU2hlZXREYXRhKVxuXG5mdW5jdGlvbiBhY3RpdmF0ZUdsb2JhbExpc3RlbmVyICgpIHtcbiAgY29uc3QgYm9keSA9ICQoJ2JvZHknKVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIENvQzdDb250ZXh0TWVudS5jbG9zZUFsbClcbiAgYm9keS5vbignY2xpY2snLCAnYS5jb2M3LWlubGluZS1jaGVjaycsIENvQzdDaGVjay5fb25DbGlja0lubGluZVJvbGwpXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIF9vbkxlZnRDbGljaylcbn1cblxuZnVuY3Rpb24gX29uTGVmdENsaWNrIChldmVudCkge1xuICByZXR1cm4gZXZlbnQuc2hpZnRLZXlcbn1cblxuQ09ORklHLnVpLnNldHRpbmdzID0gQ29DN1NldHRpbmdzRGlyZWN0b3J5XG5DT05GSUcudWkuY29tcGVuZGl1bSA9IENvQzdDb21wZW5kaXVtRGlyZWN0b3J5XG5DT05GSUcudWkuYWN0b3JzID0gQ29DN0FjdG9yRGlyZWN0b3J5XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUsIEhvb2tzLCBSb2xsLCB1aSAqL1xuXG4vKipcbiAqQ2FsbG9mQ3RodWxodSg3dGhFZC4pIERlZmluZSB5b3VyIG93biBjb21tYW5kc1xuICpIZXJlLCB3ZSByZWNlaXZlIHRoZSBjaGF0IE1lc3NhZ2VzIGFuZCBkZXRlcm1pbmUgZWFjaCBjb21tYW5kLlxuICpbL0NDXURlZmluZSBhIGNvbW1hbmQgdG8ganVkZ2UgYSBub3JtYWwgZGljZS5cbiAqWy9DQlJdIENvbW1hbmQgdG8gZGVmaW5lIHRoZSBkZWNpc2lvbiBvbiBjb21iaW5hdGlvbiByb2xscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdjaGF0TWVzc2FnZScsIChodG1sLCBjb250ZW50KSA9PiB7XG4gICAgLy8gSSdtIGN1cnJlbnRseSB1c2luZyBpdCBmb3IgdGVzdGluZyBib251cyBkaWNlLlxuICAgIGlmIChjb250ZW50Lm1hdGNoKC9eXFwvKGNicnxjYykvaSkpIHtcbiAgICAgIC8vIEV4dHJhY3RpbmcgbnVtYmVycyBmcm9tIGNvbWJpbmF0aW9uIHJvbGxzXG4gICAgICBjb25zdCBjb21tYW5kcyA9IGNvbnRlbnQubWF0Y2goLyhcXGQrKS9nKVxuICAgICAgaWYgKGNvbW1hbmRzKSB7XG4gICAgICAgIG5ldyBSb2xsKCcxZDEwMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KS50aGVuKHIgPT4ge1xuICAgICAgICAgIGNvbnN0IHMgPSByLnJlc3VsdFxuICAgICAgICAgIGNvbnN0IHJlcyA9IGNvbW1hbmRzXG4gICAgICAgICAgICAubWFwKG0gPT4ge1xuICAgICAgICAgICAgICBsZXQgcmVzID0gJydcbiAgICAgICAgICAgICAgaWYgKHMgPD0gMSkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHMgPj0gMTAwKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgICAgICAgZWxzZSBpZiAocyA8PSBtIC8gNSkge1xuICAgICAgICAgICAgICAgIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA8PSBtIC8gMikge1xuICAgICAgICAgICAgICAgIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA8PSBtKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBlbHNlIGlmIChzID49IDk2KSB7XG4gICAgICAgICAgICAgICAgaWYgKG0gPCA1MCkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICAgICAgICAgICAgZWxzZSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgICAgICAgIH0gZWxzZSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgICAgICAgIC8vIFJlY29yZCB0aGUgZmlyc3QgcmVzdWx0cy5cbiAgICAgICAgICAgICAgcmVzICs9ICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWx1ZScpICsgJyAnICsgbVxuICAgICAgICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oJyAvICcpXG4gICAgICAgICAgci50b01lc3NhZ2Uoe1xuICAgICAgICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgICAgICAgZmxhdm9yOiByZXNcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignSW5jb3JyZWN0IHVzYWdlIG9mIGNvbW1hbmQnKVxuICAgICAgfVxuICAgICAgLy8gcmV0dXJuIHRvIGF2b2lkIGVycm9ycyBpbiB0aGUgY29tbWFuZC5cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5leHBvcnQgZnVuY3Rpb24gRHJvcEFjdG9yU2hlZXREYXRhIChhY3Rvciwgc2hlZXQsIGRhdGEpIHtcbiAgaWYgKGRhdGEudHlwZSA9PT0gJ0l0ZW0nICYmIGRhdGEuYWN0b3JJZCkge1xuICAgIGlmIChhY3Rvci5kYXRhLl9pZCA9PT0gZGF0YS5hY3RvcklkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgbGV0IGFjdG9yRnJvbSA9IG51bGxcbiAgICBpZiAoZGF0YS5zY2VuZUlkICYmIGRhdGEudG9rZW5JZCkge1xuICAgICAgYWN0b3JGcm9tID0gZ2FtZS5zY2VuZXMuZ2V0KGRhdGEuc2NlbmVJZCkudG9rZW5zLmdldChkYXRhLnRva2VuSWQpLmFjdG9yXG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdG9yRnJvbSA9IGdhbWUuYWN0b3JzLmdldChkYXRhLmFjdG9ySWQpXG4gICAgfVxuICAgIHN3aXRjaCAoYWN0b3IuZGF0YS50eXBlKSB7XG4gICAgICBjYXNlICdjaGFyYWN0ZXInOlxuICAgICAgY2FzZSAnbnBjJzpcbiAgICAgIGNhc2UgJ2NyZWF0dXJlJzpcbiAgICAgICAgaWYgKCFbJ2NoYXNlJ10uaW5jbHVkZXMoZGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3ZlaGljbGUnOlxuICAgICAgICByZXR1cm5cbiAgICAgIGNhc2UgJ2NvbnRhaW5lcic6XG4gICAgICAgIGlmICghWydib29rJywgJ2l0ZW0nLCAnc3BlbGwnLCAnd2VhcG9uJ10uaW5jbHVkZXMoZGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGFjdG9yRnJvbSkge1xuICAgICAgYWN0b3JGcm9tLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGEuZGF0YS5faWRdKVxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNPQzciLCJzdGFuZGFyZCIsIm1vZGVybiIsIm1vZGVyblB1bHAiLCJwdWxwIiwiZG93bkRhcmtlclRyYWlscyIsImRvd25EYXJrZXJUcmFpbHNQdWxwIiwiZGFya0FnZXMiLCJkYXJrQWdlc1B1bHAiLCJyZWdlbmN5IiwicmVnZW5jeVB1bHAiLCJnYXNMaWdodCIsImludmljdHVzIiwiZGVjaW1hbExlZnQiLCJkZWNpbWFsUmlnaHQiLCJpbnRlZ2VyTGVmdCIsImludGVnZXJSaWdodCIsImxzZCIsInJvbWFuIiwibm9uZSIsImFzc2VzIiwic2VzdGVydGlpIiwicXVpbmFyaWkiLCJkZW5hcmlpIiwiZCIsInMiLCJ2YWx1ZSIsIm11bHRpcGxpZXIiLCJuYW1lIiwiZmlsdGVyIiwic3RyIiwiY29uIiwic2l6IiwiZGV4IiwiYXBwIiwiaW50IiwicG93IiwiZWR1Iiwibm9hZGp1c3RtZW50cyIsIm5veHBnYWluIiwic3BlY2lhbCIsInJhcml0eSIsInB1c2giLCJjb21iYXQiLCJmaWdodGluZyIsImZpcmVhcm0iLCJyZXF1aXJlc25hbWUiLCJrZWVwYmFzZXZhbHVlIiwicGlja25hbWVvbmx5Iiwib25seW9uZSIsIm1lbGVlIiwicm5nZCIsIm1udnIiLCJ0aHJvd24iLCJzaG90Z3VuIiwiZGJybCIsImltcGwiLCJicnN0IiwiYXV0byIsImFoZGIiLCJhZGRiIiwic2xudCIsInNwY2wiLCJtb250IiwiYmxzdCIsInN0dW4iLCJyYXJlIiwiYnVybiIsImNhbGwiLCJkaXNtaXNzIiwiY29udGFjdCIsInN1bW1vbiIsImJpbmQiLCJlbmNoYW50bWVudCIsImdhdGUiLCJteXRob3MiLCJvY2N1bHQiLCJvdGhlciIsInBoeXNpY2FsIiwibWVudGFsIiwibWlzY2VsbGFuZW91cyIsImJhc2ljIiwiaW5zYW5lIiwibWFuaWEiLCJwaG9iaWEiLCJjbGFzc2ljIiwibG92ZWNyYWZ0aWFuIiwiZm9ybXVsYSIsImFjdG9yIiwiYWN0b3JzaGVldCIsInN0YXR1cyIsInRlbXBvSW5zYW5lIiwiaW5kZWZJbnNhbmUiLCJ1bmNvbnNjaW91cyIsImNyaXRpY2FsV291bmRzIiwiZHlpbmciLCJwcm9uZSIsImRlYWQiLCJuZXdCb29rTmFtZSIsIm5ld1NraWxsTmFtZSIsIm5ld1NwZWxsTmFtZSIsIm5ld0l0ZW1OYW1lIiwibmV3V2VhcG9uTmFtZSIsImNyZWF0dXJlRmlnaHRpbmdTa2lsbCIsImZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lIiwiZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSIsImNvbWJhdENhcmRzIiwiZmlnaHRCYWNrIiwiZG9kZ2UiLCJtYW5ldXZlciIsIm5vUmVzcG9uc2UiLCJDb0M3RGljZSIsInN0YXRpYyIsIm1vZGlmIiwicm9sbE1vZGUiLCJoaWRlRGljZSIsInJvbGwiLCJhbHRlcm5hdGl2ZURpY2UiLCJnYW1lIiwibW9kdWxlcyIsImdldCIsImFjdGl2ZSIsInNldHRpbmdzIiwiQ29DNyIsImRldiIsImRpY2UiLCJhbHdheXNDcml0IiwiUm9sbCIsImZyb21EYXRhIiwiY3JpdDAxIiwiYWx3YXlzRnVtYmxlIiwiZnVtYmxlOTkiLCJyZXBlYXQiLCJNYXRoIiwiYWJzIiwiYXN5bmMiLCJyZXN1bHQiLCJ1bml0IiwidG90YWwiLCJyZXN1bHRzIiwidGVucyIsIkNPTkZJRyIsIkRpY2UiLCJ0ZXJtcyIsInQiLCJpbmNsdWRlcyIsIm1heCIsImxlbmd0aCIsIm1pbiIsInN5bmNEaWNlIiwiY2hhdERhdGEiLCJ3aGlzcGVyIiwiYmxpbmQiLCJDaGF0TWVzc2FnZSIsImFwcGx5Um9sbE1vZGUiLCJkaWNlM2QiLCJzaG93Rm9yUm9sbCIsInVzZXIiLCJvcHRpb25zIiwicG9vbCIsImtleXMiLCJPYmplY3QiLCJtYXAiLCJ2IiwicGFyc2VJbnQiLCJwZW5hbHR5RGljZSIsImJvbnVzRGljZSIsImhhc0RTTiIsImpvaW4iLCJncm91cHMiLCJiYXNlRGllIiwiYmFzZVNldCIsIm91dHB1dCIsImtleSIsIm1vZGlmaWVyIiwib2Zmc2V0IiwiY2xhc3MiLCJldmFsdWF0ZWQiLCJudW1iZXIiLCJmYWNlcyIsIm1vZGlmaWVycyIsIm9wZXJhdG9yIiwiQ29DN0NvbnRlbnRMaW5rRGlhbG9nIiwiRm9ybUFwcGxpY2F0aW9uIiwiZGVmYXVsdE9wdGlvbnMiLCJtZXJnZU9iamVjdCIsInN1cGVyIiwiaWQiLCJjbGFzc2VzIiwidGl0bGUiLCJpMThuIiwibG9jYWxpemUiLCJkcmFnRHJvcCIsImRyYWdTZWxlY3RvciIsImRyb3BTZWxlY3RvciIsInRlbXBsYXRlIiwiY2xvc2VPblN1Ym1pdCIsIndpZHRoIiwiaGVpZ2h0IiwidGFicyIsIm5hdlNlbGVjdG9yIiwiY29udGVudFNlbGVjdG9yIiwiaW5pdGlhbCIsInNoZWV0RGF0YSIsImdldERhdGEiLCJjaGVja1R5cGUiLCJDb0M3TGluayIsIkNIRUNLX1RZUEUiLCJDSEVDSyIsImxhYmVsIiwiU0FOTE9TUyIsIklURU0iLCJFRkZFQ1QiLCJsaW5rVHlwZSIsIkxJTktfVFlQRSIsIkNIQVJBQ1RFUklTVElDIiwiQVRUUklCVVRFIiwiU0tJTEwiLCJhdHRyaWJ1dGVUeXBlIiwiZWZmZWN0TW9kZXMiLCJlbnRyaWVzIiwiQ09OU1QiLCJBQ1RJVkVfRUZGRUNUX01PREVTIiwicmVkdWNlIiwib2JqIiwiZSIsImNoYXJhY3RlcmlzdGljVHlwZSIsIkNvQ0FjdG9yIiwiZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uIiwibGluayIsIm9iamVjdCIsImZyb21HYW1lIiwiaXNJdGVtQ2hlY2siLCJpc1NraWxsQ2hlY2siLCJmcm9tRGlyZWN0b3J5IiwiaGFzSUQiLCJmcm9tQ29tcGVuZGl1bSIsImlzU2V0RnJvbUdhbWUiLCJkaWZmaWN1bHR5TGV2ZWwiLCJDb0M3Q2hlY2siLCJhY3Rvck5hbWVzIiwiYWN0b3JzIiwiYSIsImFjdGl2YXRlTGlzdGVuZXJzIiwiaHRtbCIsImZpbmQiLCJjaGFuZ2UiLCJ0aGlzIiwiX29uQ2hhbmdlU3VibWl0IiwiY2xpY2siLCJfb25FZmZlY3RDb250cm9sIiwiZXZlbnQiLCJjdXJyZW50VGFyZ2V0IiwiX29uU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJidXR0b24iLCJkYXRhc2V0IiwiYWN0aW9uIiwiX2FkZEVmZmVjdENoYW5nZSIsImNsb3Nlc3QiLCJyZW1vdmUiLCJpZHgiLCJlZmZlY3QiLCJjaGFuZ2VzIiwic3VibWl0IiwicHJldmVudENsb3NlIiwidXBkYXRlRGF0YSIsIm1vZGUiLCJBREQiLCJmb3JtRGF0YSIsImhhc0VmZmVjdCIsImR1cmF0aW9uIiwic2V0VmFsdWUiLCJjaGVja05hbWUiLCJpY29uIiwidGludCIsImRpc2FibGVkIiwic2Vjb25kcyIsInJvdW5kcyIsInR1cm5zIiwibWF0Y2giLCJ0YXJnZXQiLCJ0eXBlIiwic3VibWl0dGVyIiwiQ29DN1V0aWxpdGllcyIsImNvcHlUb0NsaXBib2FyZCIsInRvQ2hhdE1lc3NhZ2UiLCJ0b1doaXNwZXJNZXNzYWdlIiwiY2FudmFzIiwidG9rZW5zIiwiY29udHJvbGxlZCIsInVpIiwibm90aWZpY2F0aW9ucyIsIndhcm4iLCJvd25lcnMiLCJyZW5kZXIiLCJkYXRhU3RyaW5nIiwiZGF0YVRyYW5zZmVyIiwiZGF0YSIsIkpTT04iLCJwYXJzZSIsInNldExpbmsiLCJmcm9tRHJvcERhdGEiLCJkb2N1bWVudE5hbWUiLCJkYXRhTGlzdCIsImdldERhdGFGcm9tRHJvcEV2ZW50IiwicGFjayIsImRpZmZpY3VsdHkiLCJyZWd1bGFyIiwiaGFzTW9kaWZpZXJzIiwiZGlzcGxheU5hbWUiLCJoYXNMYWJlbCIsImhhc0ljb24iLCJsaW5rRGF0YSIsIm9wdGlvbiIsImRpYWxvZyIsImNyZWF0ZUlubGluZVJvbGwiLCJjbHMiLCJlc2NhcGUiLCJzdHJpbmdpZnkiLCJlcnIiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJrIiwiaW5uZXJIVE1MIiwiaXNDdHJsS2V5IiwibWV0YUtleSIsImN0cmxLZXkiLCJrZXlDb2RlIiwiY2hhdEhlbHBlciIsInN0cmluZyIsInJlcGxhY2UiLCJ0b1VwcGVyQ2FzZSIsIm1lc3NhZ2UiLCJtZXNzYWdlRGF0YSIsImZsYXZvciIsInNwZWFrZXIiLCJnZXRTcGVha2VyIiwiQ0hBVF9NRVNTQUdFX1RZUEVTIiwiV0hJU1BFUiIsIlJPTEwiLCJESUNFX1JPTExfTU9ERVMiLCJTRUxGIiwiY29udGVudCIsImNyZWF0ZSIsInRoZW4iLCJtc2ciLCJ0b0xvd2VyQ2FzZSIsImlzRG9jdW1lbnRVdWlkIiwiaXNEb2N1bWVudFV1aWRQYWNrIiwiZnJvbVV1aWQiLCJTZnJvbVV1aWQiLCJzY2VuZUlkIiwidG9rZW5JZCIsInNwbGl0IiwidG9rZW4iLCJnZXRUb2tlbkZyb21LZXkiLCJhY3RvcktleSIsImdldEFjdG9yRnJvbUtleSIsInNjZW5lIiwiYWxpYXMiLCJlbGVtZW50Iiwib2JqZWN0TmFtZSIsInByb3AiLCJzdGFydHNXaXRoIiwiYXR0YWNoT2JqZWN0VG9FbGVtZW50IiwiZGVzZXJpYWxpemUiLCJzbGljZSIsIm9ialByb3AiLCJpbmRleE9mIiwib2JqTmFtZSIsInN1YnN0cmluZyIsIk51bWJlciIsInRvU3RyaW5nIiwidG9rZW5Eb2MiLCJzY2VuZXMiLCJ0b2tlbkRhdGEiLCJnZXRFbWJlZGRlZERvY3VtZW50IiwiVG9rZW4iLCJkdXBsaWNhdGUiLCJnZXRBY3RvclRva2VuIiwicHJvdG90eXBlVG9rZW4iLCJ0ZXh0dXJlIiwic3JjIiwiaW1nIiwic3RhcnRUb2tlbiIsImVuZFRva2VuIiwiY2VudGVyIiwiZGlzdGFuY2UiLCJncmlkVW5pdCIsImdyaWQiLCJ1bml0cyIsInJheSIsIlJheSIsInNlZ21lbnQiLCJzaXplIiwibWVhc3VyZURpc3RhbmNlcyIsImdyaWRTcGFjZXMiLCJlbGV2YXRpb24iLCJzcXJ0IiwiQ29DN1JvbGwiLCJjYXJkIiwicm9sbERpdiIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRPYmplY3RGcm9tRWxlbWVudCIsInJlc3VsdFR5cGUiLCJzdWNjZXNzTGV2ZWwiLCJmb3JtYXQiLCJoYXJkIiwiZXh0cmVtZSIsImNyaXRpY2FsIiwiZnVtYmxlIiwiZmFpbHVyZSIsIml0ZW0iLCJpdGVtSWQiLCJpdGVtcyIsInNraWxsIiwic2tpbGxJZCIsInNob3dEaWNlUm9sbCIsImRpY2VSZXN1bHRzIiwiZGllUmVzdWx0IiwiZGljZXMiLCJkaWNlRGF0YSIsInNob3ciLCJoYXNCb251cyIsImRpY2VNb2RpZmllciIsImJvbnVzIiwiYm9udXNUeXBlIiwidGVuRGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkaWUiLCJzZWxlY3RlZCIsImlzTWF4IiwiaXNNaW4iLCJ1bml0RGllIiwiaW5jcmVhc2VTdWNjZXNzIiwiaXNsIiwibmV3U3VjY2VzTGV2ZWwiLCJsdWNrTmVlZGVkIiwibHVja05lZWRlZFR4dCIsImx1Y2tOZWVkZWRWYWx1ZSIsImNoZWNrIiwicm9sbFR5cGUiLCJzaWRlIiwicmVmTWVzc2FnZUlkIiwicmVmZXJlbmNlTWVzc2FnZUlkIiwiZGljZU1vZCIsInJhd1ZhbHVlIiwiaXNGdW1ibGUiLCJpc0NyaXRpY2FsIiwiY2hhcmFjdGVyaXN0aWMiLCJ0b2tlbktleSIsImlzVG9rZW4iLCJhY3RvcklkIiwiaHRtbEVsZW1lbnQiLCJnZXRGcm9tQ2hlY2siLCJhdHRhY2hUb0VsZW1lbnQiLCJDb0M3RGFtYWdlIiwiZGFtYWdlU3RyaW5nIiwiZGFtYWdlIiwicm9sbHMiLCJyIiwiUm9sbERpYWxvZyIsInVua25vd24iLCJ1bmtub3duRGlmZmljdWx0eURlZmF1bHQiLCJhbGxvd0ZsYXREaWNlTW9kaWZpZXIiLCJkaXNhYmxlRmxhdERpY2VNb2RpZmllciIsImFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyIiwiZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllciIsImhpZGVEaWZmaWN1bHR5IiwiY2FyZFR5cGUiLCJmb3JjZWRDYXJkVHlwZSIsImNhcmRUeXBlcyIsIkNvQzdDaGF0TWVzc2FnZSIsInJlbmRlclRlbXBsYXRlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJkbGciLCJEaWFsb2ciLCJidXR0b25zIiwiY2FsbGJhY2siLCJGb3JtRGF0YSIsImRlZmF1bHQiLCJjbG9zZSIsIlJvbGxDYXJkIiwiY29uc3RydWN0b3IiLCJpbml0aWF0b3IiLCJtZXNzYWdlSWQiLCJtZXNzYWdlcyIsImZyb21NZXNzYWdlIiwiY2FyZEVsZW1lbnQiLCIkIiwiZnJvbUhUTUxDYXJkRWxlbWVudCIsImNhcmREYXRhIiwidW5lc2NhcGUiLCJhc3NpZ24iLCJpbmRleCIsInJvbGxlZCIsIl9odG1sUm9sbCIsImdldEh0bWxSb2xsIiwic3BhbiIsImNvbnRhaW5zIiwiaXNHTSIsImZyb21NZXNzYWdlSWQiLCJmbGFnIiwidG9nZ2xlIiwiYiIsInVuc2V0RmxhZyIsInNldEZsYWciLCJ0b2dnbGVGbGFnIiwidXBkYXRlQ2hhdENhcmQiLCJjaGF0IiwiY29sbGVjdGlvbiIsImRlZmF1bHRDb25maWciLCJnZXRGbGFnIiwidGltZXN0YW1wIiwiRGF0ZSIsIl9yb2xsTW9kZSIsInByb2Nlc3MiLCJzb2NrZXQiLCJlbWl0IiwiY29uZmlnIiwiaHRtbENhcmRFbGVtZW50Iiwib3V0ZXJIVE1MIiwiZmxhZ3MiLCJzdGF0ZSIsImdldFdoaXNwZXJSZWNpcGllbnRzIiwiY29tcHV0ZSIsInBhcnNlSFRNTCIsImNoYXRNZXNzYWdlIiwiY2xvc2VkIiwidXBkYXRlIiwidXBkYXRlTWVzc2FnZSIsInRvTWVzc2FnZSIsInVwZGF0ZVJvbGwiLCJmcm9tR00iLCJyYW5rIiwiYWRkUm9sbERhdGEiLCJhZGRSb2xsIiwicmVtb3ZlUm9sbCIsInNwbGljZSIsImZsYWdOYW1lIiwiX21lc3NhZ2UiLCJfbWVzc2FnZUlkIiwieCIsImV4Y2x1ZGUiLCJleGNsdWRlU3RhcnRXaXRoIiwid2lubmVycyIsIndpbm5lciIsImxvb3NlcnMiLCJsb29zZXIiLCJoYXNXaW5uZXIiLCJpc0tlZXBlciIsIkNvbWJpbmVkQ2hlY2tDYXJkIiwib24iLCJfb25Ub2dnbGUiLCJfb25DbGljayIsInN1Y2Nlc3NDb3VudCIsImNvdW50IiwicGFzc2VkIiwibWFpbkFjdG9yS2V5IiwidW5kZWZpbmVkIiwic3VjY2VzcyIsImFueSIsImFsbCIsImNoZWNrR01Jbml0aWF0b3IiLCJ1c2VycyIsIl9wZXJmb3JtIiwiX3JvbGwiLCJzaWxlbnQiLCJoaWRlU3VjY2VzcyIsImFzc2lnblJvbGwiLCJsaSIsImNsb3NlQ2FyZCIsImlzTmFOIiwiY29tYmluZWRSb2xsIiwiQXVkaW9IZWxwZXIiLCJwbGF5Iiwic291bmRzIiwiYWx0ZXIiLCJKU09OUm9sbERhdGEiLCJmbGF0RGljZU1vZGlmaWVyIiwiZmxhdFRocmVzaG9sZE1vZGlmaWVyIiwiaSIsImhpZGVEaWNlUmVzdWx0IiwiSW50ZXJhY3RpdmVDaGF0Q2FyZCIsIl9vcHRpb25zIiwiY3NzQ2xhc3NlcyIsIm9wdGlvbm5hbENoYXREYXRhIiwiY2FyZENsYXNzIiwiX29uQnV0dG9uIiwiX29uS2V5IiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImNhcmRzIiwidHlwZWRDYXJkIiwiYXNzaWduT2JqZWN0IiwiX3VwZGF0ZSIsImZvcm1zIiwidXBkYXRlcyIsImZvcm0iLCJGb3JtRGF0YUV4dGVuZGVkIiwidG9PYmplY3QiLCJkaWZmT2JqZWN0IiwiZXhwYW5kT2JqZWN0IiwiZGlzcGxheUFjdG9yT25DYXJkIiwiaXNCbGluZCIsIl9pc0JsaW5kIiwid2VhcG9uIiwidGFyZ2V0ZWRUb2tlbnMiLCJ0YXJnZXRzIiwidGFyZ2V0VG9rZW4iLCJ0YXJnZXRBY3RvciIsImlzVGFyZ2V0T3duZXIiLCJpc093bmVyIiwiX3RhcmdldFRva2VuIiwiX3RhcmdldEtleSIsInBvcCIsIl90YXJnZXRBY3RvciIsInRhcmdldEtleSIsImhhc1RhcmdldCIsInNraWxscyIsImdldFdlYXBvblNraWxscyIsInRhcmdldEltZyIsImdldEFjdG9ySW1nRnJvbUtleSIsInRhcmdldE5hbWUiLCJhY3RvckltZyIsIkRhbWFnZUNhcmQiLCJjb25jYXQiLCJkYW1hZ2VSb2xsIiwiaW1wYWxlIiwiX2ltcGFsZSIsImlzRGFtYWdlRm9ybXVsYSIsImRhbWFnZUZvcm11bGEiLCJ2YWxpZGF0ZSIsImlzRGFtYWdlTnVtYmVyIiwiaXNBcm1vckZvcnVsYSIsImFybW9yIiwidG90YWxEYW1hZ2VTdHJpbmciLCJpZ25vcmVBcm1vciIsIm5vRGFtYWdlIiwiZmFzdEZvcndhcmQiLCJyb2xsRGFtYWdlIiwiaGFyZHJvbGxlZCIsImRhbWFnZUluZmxpY3RlZCIsImRlYWxEYW1hZ2UiLCJfaHRtbElubGluZVJvbGwiLCJldmFsdWF0ZSIsInNob3dSb2xsRGljZTNkIiwicm9sbEFybW9yIiwiZXJyb3IiLCJzZWxlY3RlZFBsYXllcnMiLCJvbmUiLCJjb25maXJtRGFtYWdlIiwidHdvIiwicmFuZ2UiLCJpbmNsdWVzIiwic3lzdGVtIiwiZGIiLCJ0cmltIiwicHJvcGVydGllcyIsIm1heERhbWFnZSIsIm1heGltaXplIiwicm9sbFN0cmluZyIsIl9hcm1vciIsImF0dHJpYnMiLCJPcHBvc2VkQ2hlY2tDYXJkIiwiYXR0YWNrZXJSb2xsIiwiYXR0YWNrZXIiLCJkZWZlbmRlclJvbGwiLCJkZWZlbmRlciIsImRlZmVuZGVySXNEb2RnaW5nIiwiZG9kZ2VTa2lsbCIsImFkdmFudGFnZUF0dGFja2VyIiwiX2FhIiwid2lubmVyUm9sbHNEYW1hZ2UiLCJfYWQiLCJhZHZhbnRhZ2VEZWZlbmRlciIsImlzVGllIiwid2lubmVyQ291bnQiLCJuZWVkc1RpZUJyZWFrZXIiLCJpc0F0dGFja01hbmV1dmVyIiwicmVzdWx0VGV4dCIsImRhbWFnZUNoYXRDYXJkIiwiaXNFeHRyZW1lU3VjY2VzcyIsInNoaWZ0S2V5Iiwic29ydCIsInRpZSIsInJlc29sdmVkIiwibW9kaWZpZWRSZXN1bHQiLCJ3aW5Db3VudCIsImZhaWxlZCIsIkNoYXRDYXJkQWN0b3IiLCJzcGVha2VyRGF0YSIsInJlcGxhY2VyIiwiU2FuQ2hlY2tDYXJkIiwic2FuRGF0YSIsIkJvb2xlYW4iLCJzYW5SZWFzb24iLCJzYW5Nb2RpZmllciIsInNhbkRpZmZpY3VsdHkiLCJzYW5Mb3NzU291cmNlIiwiaW52b2x1bnRhcnlBY3Rpb24iLCJzYW5Sb2xsZWQiLCJzYW5DaGVjayIsImlzRmFpbHVyZSIsInNhbkxvc3NGb3JtdWxhIiwic2FuTWF4Iiwic2FuTWluIiwic2FuTG9zdFRvUmVhc29uIiwibWF4UG9zc2libGVTYW5Mb3NzIiwibWF4TG9zc1RvU2FuUmVhc29uIiwibWF4U2FuTG9zcyIsInNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCIsImZpcnN0RW5jb3VudGVyIiwibXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCIsImlzQWN0b3JMb29zaW5nU2FuIiwiaGFzVGVtcG9JbnNhbmUiLCJpbW11bmVUb0NyZWF0dXJlIiwiYm91dER1cmF0aW9uVGV4dCIsImJvdXREdXJhdGlvbiIsImJvdXRSZWFsVGltZSIsImJvdXRTdW1tYXJ5IiwieW91R2FpbkN0aHVsaHVNeXRob3NTdHJpbmciLCJteXRob3NHYWluIiwia2VlcENyZWF0dXJlU2FuRGF0YSIsImZpbmlzaCIsImFwcGx5U2FuTG9zcyIsImJvdXRSZXN1bHQiLCJlbnRlckJvdXRPZk1hZG5lc3MiLCJib3V0T2ZNYWRuZXNzUmVzb2x2ZWQiLCJib3V0T2ZNYWRuZXNzT3ZlciIsInRyaWdnZXJJbnNhbml0eSIsInVuc2V0Q29uZGl0aW9uIiwiY3RodWxodU15dGhvc0F3YXJkZWQiLCJhbW91bnRHYWluZWQiLCJleHBlcmllbmNlRmlyc3RNeXRob3NJbnNhbml0eSIsImN0aHVsaHVNeXRob3NTa2lsbCIsIm9sZFZhbHVlIiwiYWRqdXN0bWVudHMiLCJleHBlcmllbmNlIiwiaXNCeXBhc3NlZCIsImF0dHJpYnV0ZSIsImZvcmNlRFNOIiwiaW52b2x1bnRhcnlBY3Rpb25QZXJmb3JtZWQiLCJzYW5Mb3NzUm9sbGVkIiwiaWdub3JlU2FuQ2hlY2siLCJzYW5Mb3NzIiwibGltaXRlZExvc3NUb0NyZWF0dXJlIiwibWluaW1pemUiLCJpbW11bmVBbHJlYWR5SW5Cb3V0Iiwic2FuTG9zc0FwcGxpZWQiLCJpbnRSb2xsZWQiLCJpbnNhbml0eSIsInNhbkxvc3NSb2xsIiwibG9vc2VTYW4iLCJhY3Rvckxvc3RTYW4iLCJzYW4iLCJwZXJtYW5lbnRseUluc2FuZSIsImhhc0luZGVmSW5zYW5lIiwic2hha2VuIiwiaW5zYW5pdHlUYWJsZVJvbGxlZCIsImRhaWx5U2FuTG9zcyIsImRhaWx5U2FuTGltaXQiLCJ0ZW1wb3JhcnlJbnNhbmUiLCJpbmRlZmluaXRlbHlJbnNhbmUiLCJtZW1vcnlSZXByZXNzZWQiLCJpbnRDaGVjayIsImludERpZmZpY3VsdHkiLCJpbnRNb2RpZmllciIsImFscmVhZHlJbnNhbmUiLCJzZXRDb25kaXRpb24iLCJzZXRSZWFzb25TYW5Mb3NzIiwiX19pbmxpbmVTYW5DaGVjayIsImlubGluZUNoZWNrIiwiX19pbmxpbmVTYW5Mb3NzUm9sbCIsIl9faW5saW5lSW50Q2hlY2siLCJhcmdzIiwiY2hhdENhcmQiLCJzYXkiLCJodG1sQ2FyZCIsImdldEZyb21DYXJkIiwic2FuQ2hlY2tDYXJkRGF0YSIsInNhbkNoZWNrQ2FyZCIsIlNhbkRhdGFEaWFsb2ciLCJfdG9nZ2xlSW5wdXQiLCJWYWxpZGF0ZSIsIlJPTExfVFlQRV9BVFRSSUJVVEUiLCJST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMiLCJST0xMX1RZUEVfQ09NQkFUIiwiUk9MTF9UWVBFX1NLSUxMIiwiUk9MTF9UWVBFX0VOQ09VTlRFUiIsIkNBUkRfVFlQRV9DT01CSU5FRCIsIkNBUkRfVFlQRV9HUk9VUCIsIkNBUkRfVFlQRV9OT1JNQUwiLCJDQVJEX1RZUEVfT1BQT1NFRCIsIkNBUkRfVFlQRV9TQU5fQ0hFQ0siLCJDQVJEX1RZUEVfTk9ORSIsInNlbGVjdCIsInNraWxsTmFtZSIsInNraWxsSWRzIiwiZ2V0U2tpbGxzQnlOYW1lIiwiY2hhcmFjdGVyaXN0aWNzIiwiYWx0S2V5IiwiY3JlYXRlRW5jb3VudGVyIiwib3BlbkxpbmtUb29sIiwic2VuZFRvQ2hhdCIsInNlbmRUb0NsaXBib2FyZCIsImlzQ29tYmF0IiwicHJldmVudFN0YW5kYnkiLCJkaWFsb2dPcHRpb25zIiwicGFyZW50RWxlbWVudCIsImF0dHJpYiIsIndlYXBvbkFsdFNraWxsIiwid2VhcG9uTmFtZSIsImhhc1BsYXllck93bmVyIiwibm9ybWFsaXplUmVxdWVzdCIsImNyZWF0ZUxpbmsiLCJpdGVtTW9kaWZpZXJzIiwidmFsdWVzIiwiZm91bmRyeUlEIiwiY3JlYXRlUm9sbCIsInJ1blJvbGwiLCJzaG9ydE5hbWUiLCJjaGVja1Bhc3NlZCIsImNoZWNrRmFpbGxlZCIsImluZm9zIiwidXNhZ2UiLCJwcm9tcHRMYWJlbCIsInN0YW5kYnkiLCJyb2xsQXR0cmlidXRlIiwicm9sbENoYXJhY3RlcmlzdGljIiwicm9sbGVkU3VjY2Vzc0xldmVsIiwic3VjY2Vzc0xldmVscyIsInJlZ3VsYXJUaHJlc2hvbGQiLCJoYXJkVGhyZXNob2xkIiwiZXh0cmVtZVRocmVzaG9sZCIsImRlbnlQdXNoIiwiZGlzcGF0Y2giLCJDb0M3Q29uQ2hlY2siLCJfYWN0b3JJZCIsImlzU3VjY2VzcyIsImlzUm9sbGVkIiwiY29uQ2hlY2siLCJodG1sQ2hlY2siLCJnZXRGcm9tRWxlbWVudCIsInJvbGxDb24iLCJyZXBsYWNlV2l0aCIsImdldENoZWNrRWxlbWVudCIsInN0YXlBbGl2ZSIsImFwcGxpZWQiLCJTa2lsbFNlbGVjdERpYWxvZyIsIl9vblNlbGVjdFNraWxsQ2xpY2tlZCIsInN0eWxlIiwiZGlzcGxheSIsImFkZGVkIiwiaW5uZXJUZXh0Iiwib3B0aW9uc0NvdW50IiwiUG9pbnRTZWxlY3REaWFsb2ciLCJfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyIsIl9vbkJ1dHRvbkNsaWNrZWQiLCJpdGVtTGlzdCIsIm9wdGlvbmFsIiwidG9nZ2xlQ2xhc3MiLCJDaGFyYWNTZWxlY3REaWFsb2ciLCJDaGFyYWNSb2xsRGlhbG9nIiwiX29uQ2hhbmdlSW5wdXQiLCJfb25Sb2xsQ2hhcmFjdGVyaXN0aWMiLCJfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljIiwiX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyIsIl9vblJlc2V0Q2hhcmFjdGVyaXN0aWMiLCJjaGFyYWNLZXkiLCJpbmNyZWFzZUNoYXJhY3RlcmlzdGljIiwiZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyIsInJlc2V0Q2hhcmFjdGVyaXN0aWMiLCJjaGFyIiwiY2hlY2tUb3RhbCIsIl9lbGVtZW50IiwiaW5wdXQiLCJsaXN0IiwicG9pbnRzIiwidmFsaWRhdGlvbiIsImVuYWJsZWQiLCJlbCIsInBvaW50c1dhcm5pbmciLCJTa2lsbFNwZWNTZWxlY3REaWFsb2ciLCJzcGVjaWFsaXphdGlvbk5hbWUiLCJiYXNlVmFsdWUiLCJoYXNTa2lsbHMiLCJiYXNlIiwic3BlY2lhbGl6YXRpb24iLCJTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIiwiX29uQ2xpY2tTdWJtaXQiLCJfb25TZWxlY3RDaGFuZ2UiLCJ2YWwiLCJhbGxvd0N1c3RvbSIsImZpeGVkQmFzZVZhbHVlIiwiYWxsb3dTZWxlY3QiLCJTa2lsbFZhbHVlRGlhbG9nIiwiQ29DN01lbGVlUmVzb2x0aW9uIiwiaW5pdGlhdG9yTWVzc2FnZSIsInRhcmdldE1lc3NhZ2UiLCJDb0M3TWVsZWVUYXJnZXQiLCJnZXRGcm9tTWVzc2FnZUlkIiwiQ29DN01lbGVlSW5pdGlhdG9yIiwiaW5pdGlhdG9yVG9rZW4iLCJyZXN1bHRTdHJpbmciLCJ3aW5uZXJJbWciLCJ3aW5uZXJUaXRsZSIsImNyaXRpY2FsRGFtYWdlIiwiZG9jdW1tZW50IiwicGFyZW50TWVzc2FnZUlkIiwiaW5pdGlhdG9yS2V5Iiwib3V0bnVtYmVyZWQiLCJzdXJwcmlzZWQiLCJhdXRvU3VjY2VzcyIsImFkdmFudGFnZSIsImRpc2FkdmFudGFnZSIsImRvZGdpbmciLCJub3RSZXNwb25kaW5nIiwiZmlnaHRpbmdCYWNrIiwibWFuZXV2ZXJpbmciLCJhY3Rpb25TZWxlY3RlZCIsIl9pbml0aWF0b3JLZXkiLCJfaW5pdGlhdG9yIiwibWVsZWVJbml0aWF0b3IiLCJwdWJsaXNoVXBkYXRlIiwiY2FtZWxGbGFnIiwiaHlwaGVuVG9DYW1lbENhc2UiLCJnbXMiLCJvd25lcnNoaXAiLCJET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTIiwiT1dORVIiLCJwcm9tcHQiLCJpbmZvIiwid2VhcG9uSWQiLCJwdWJsaXNoIiwiaXNVbmtvbnduIiwicmVzb2x1dGlvbkNhcmQiLCJyZXNvbHV0aW9uTWVzc2FnZSIsInByZUNyZWF0ZU1lc3NhZ2UiLCJyb2xsSWNvbnMiLCJyb2xsQ29sb3IiLCJyb2xsVGl0bGUiLCJ1cGdyYWRlUm9sbCIsImx1Y2tBbW91bnQiLCJuZXdTdWNjZXNzTGV2ZWwiLCJvbGRDYXJkIiwic3BlbmRMdWNrIiwibHVja1NwZW50IiwicHJvY2Vzc2VkIiwiZGljZVJvbGxzIiwicmVzdWxEZXRhaWxzIiwiZGljZVRvdGFsIiwiQ29DN0NoYXQiLCJDb0M3UmFuZ2VJbml0aWF0b3IiLCJjb3ZlciIsInRhcmdldENhcmQiLCJzaW5nbGVTaG90IiwibXVsdGlwbGVTaG90cyIsImJ1cnN0IiwiZnVsbEF1dG8iLCJhaW1lZCIsInRvdGFsQnVsbGV0c0ZpcmVkIiwiX3RhcmdldHMiLCJDb0M3UmFuZ2VUYXJnZXQiLCJnZXREaXN0YW5jZSIsInJvdW5kZWREaXN0YW5jZSIsInJvdW5kIiwiZGlzdGFuY2VVbml0IiwiZGlzdEluWWQiLCJ0b1lhcmRzIiwicG9pbnRCbGFua1JhbmdlIiwiYmFzZVJhbmdlIiwibG9uZ1JhbmdlIiwiZXh0cmVtZVJhbmdlIiwib3V0T2ZSYW5nZSIsIm1haW5XZWFwb25Ta2lsbCIsIm1haW4iLCJhdXRvV2VhcG9uU2tpbGwiLCJhbHRlcm5hdGl2IiwiYXV0b0ZpcmUiLCJtdWx0aVRhcmdldCIsImFpbWluZyIsIl9haW1pbmciLCJnZXRBY3RvckZsYWciLCJhY3RpdmVUYXJnZXQiLCJzaG90cyIsIl9zaG90cyIsImN1cnJlbnRTaG90UmFuayIsImFjdGl2ZVRhcmdldFNob3REaWZmaWN1bHR5Iiwic2hvdERpZmZpY3VsdHkiLCJkaWRBbnlTaG90SGl0IiwiYW55SGl0Iiwic3VjY2Vzc2Z1bEhpdHMiLCJoaXRzIiwiaGl0Iiwic2hvdCIsInNob3RGaXJlZCIsInRvdGFsQW1tbyIsImdldEJ1bGxldExlZnQiLCJtYXhTaG90cyIsInVzZXNQZXJSb3VuZCIsImlnbm9yZUFtbW8iLCJpZ25vcmVVc2VzUGVyUm91bmQiLCJvdXRPZkFtbW8iLCJvdXRPZlNob3RzIiwidm9sbGV5U2l6ZSIsIl92b2xsZXlTaXplIiwiZmxvb3IiLCJpc1ZvbGxleU1pblNpemUiLCJpc1ZvbGxleU1heFNpemUiLCJnZXRUYXJnZXRGcm9tS2V5IiwiY2FsY1RhcmdldHNEaWZmaWN1bHR5Iiwibm9ybWFsIiwibG9uZyIsImRpZmZpY3VsdHlOYW1lIiwicmVsb2FkIiwiaW1wb3NzaWJsZSIsImxldmVsIiwiYWRkU2hvdEF0Q3VycmVudFRhcmdldCIsImFjdG9yTmFtZSIsImJ1bGxldHNTaG90IiwidHJhbnNpdEJ1bGxldHMiLCJidWxsZXRzU2hvdFRyYW5zaXQiLCJ0cmFuc2l0IiwiYnVsbGV0TGVmdCIsInByZXZpb3VzU2hvdCIsIndlYXBvbk1hbGZ1bmN0aW9uIiwic2hvb3RBdFRhcmdldCIsInNob290QnVsbGV0cyIsImhhc01hbGZ1bmN0aW9uIiwiYnVsbGV0RmlyZWQiLCJkZXRhaWxzIiwiY2hhbmdlVm9sbGV5U2l6ZSIsInBhc3NSb2xsIiwicm9sbEluZGV4IiwidXBncmFkZWluZGV4IiwiaW5jcmVhc2VkU3VjY2VzcyIsInJhbmdlSW5pdGlhdG9yIiwiY2FyZFRhcmdldHMiLCJjYXJkU2hvdHMiLCJkYW1hZ2VSb2xscyIsImRyIiwiaCIsIlN0cmluZyIsImRhbWFnZURpZSIsImdldE1haW5EaWUiLCJjcml0aWNhbERhbWFnZUZvcm11bGEiLCJjcml0aWNhbERhbWFnZURpZSIsImltcGFsaW5nU2hvdHMiLCJzdWNjZXNzZnVsU2hvdHMiLCJkZWFsdCIsImRhbWFnZVJvbGxlZCIsImRJbmRleCIsInRvdGFsVGFrZW4iLCJ0b3RhbEFic29yYmVkIiwickluZGV4IiwiZGVhbHRBbW91bnQiLCJ0YWtlbiIsImFic29yYmVkIiwiZGFtYWdlRGVhbHQiLCJpbk1lbGVlIiwiYmlnIiwiX2JpZyIsImJ1aWxkIiwic21hbGwiLCJfc21hbGwiLCJpc0Zhc3QiLCJtb3YiLCJmYXN0IiwiX2Zhc3QiLCJfYWN0b3IiLCJfdG9rZW4iLCJzaXplVGV4dCIsInNpemVMYWJlbCIsIkNIQVRfQ09DN19NRVNTQUdFIiwicGxheWVycyIsIkdNU2VsZlJvbGwiLCJyZW1vdmVXaXNwZXJUYXJnZXRzIiwiZmFrZVJvbGwiLCJfb25DaGF0Q2FyZEFjdGlvbiIsIl9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudCIsIl9vbkNoYXRDYXJkUmFkaW9Td2l0Y2giLCJfb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaCIsIl9vbkNoYXRDYXJkVm9sbGV5U2l6ZSIsIl9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkIiwiX29uVG9nZ2xlU2VsZWN0ZWQiLCJfb25UYXJnZXRTZWxlY3QiLCJfb25PcGVuQWN0b3IiLCJiaW5kRXZlbnRzSGFuZGxlciIsIl9vbklubGluZSIsImJpbmRMaXN0ZXJuZXJzIiwic2hlZXQiLCJzY3JvbGxCb3R0b20iLCJjaGVja1JldmVhbGVkIiwicmV2ZWFsQ2hlY2siLCJiaW5kTGlzdGVuZXJzIiwicmVtb3ZlQ2xhc3MiLCJtb3VzZWxlYXZlIiwiZGVmZW5kYW50SWQiLCJpbml0aWF0b3JJZCIsInVwZGF0ZUNvbWJhdENhcmRUYXJnZXQiLCJ1c2VyT25seSIsImdldEF0dHJpYnV0ZSIsImdtT25seSIsInpvbmUiLCJ1c2VyVmlzaWJsZU9ubHkiLCJlbGVtIiwiZ21WaXNpYmxlT25seSIsImlzVHJ1c3RlZCIsIm93bmVyVmlzaWJsZU9ubHkiLCJfZ2V0QWN0b3JGcm9tS2V5IiwiX2dldENoYXRDYXJkQWN0b3IiLCJvd25lck9ubHkiLCJnbVNlbGVjdE9ubHkiLCJhY3Rpb25UeXBlU3RyaW5nIiwidGFyZ2V0c1NlbGVjdG9yIiwiYm9yZGVyIiwidGFyZ2V0VG9EaXNwbGF5IiwidXBkYXRlU2VsZWN0ZWQiLCJkcm9wRG93bkJveGVzIiwiZHBkbkJveCIsInNlbGVjdGVkQm94IiwiYWN0aW9uVHlwZSIsImRlZmVuZGVyQ2hvaWNlIiwic2tpbGxWYWx1ZSIsIml0ZW1OYW1lIiwiX2NvbGxhcHNlSW5saW5lUmVzdWx0IiwiX2V4cGFuZElubGluZVJlc3VsdCIsIm9wdGlvbkxpc3QiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicHJvcGVydHkiLCJyYW5nZUNhcmQiLCJ1cGRhdGVDYXJkU3dpdGNoIiwiY2hhcmFjdGVyIiwib3dubmVyIiwiZ2V0VG9rZW4iLCJtZXNzSWQiLCJvcmlnaW5NZXNzYWdlIiwibWVsZWVDYXJkIiwicm9sbFJlc3VsdCIsInVwZ3JhZGVJbmRleCIsImZvcmNlUGFzcyIsInVwZ3JhZGVDaGVjayIsImRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIiLCJuZXdDYXJkIiwiY2xvbmVOb2RlIiwicHVzaGVkUm9sbCIsImRlZmVuZGVyS2V5IiwiZ2V0QWN0b3JGcm9tVG9rZW4iLCJyZXNwb25zZVR5cGUiLCJwZXJmb3JtU2tpbGxDaGVjayIsInB1Ymxpc2hDaGVja1Jlc3VsdCIsInB1Ymxpc2hOb1JlcG9uc2VSZXN1bHQiLCJkZWFsZXIiLCJyZXNvbHZlQ2FyZCIsImFtb3VudCIsImFwcGVuZCIsImZvcmNlRmFpbCIsImluY3JlYXNlU3VjY2Vzc0xldmVsIiwiZGVjcmVhc2VTdWNjZXNzTGV2ZWwiLCJjb21wdXRlQ2hlY2siLCJtYWtlUHVibGljIiwiZm9yY2VSb2xsIiwiZmxhZ0ZvckRldmVsb3BlbWVudCIsImNsZWFyU2FuTG9zc1JlYXNvbiIsInJvbGxTYW4iLCJhZHZhbmNlU3RhdGUiLCJyb2xsU2FuTG9zcyIsInJvbGxJbnQiLCJDb0M3c29ja2V0IiwiZXhlY3V0ZUFzR00iLCJfaWQiLCJyb2xsRGFtYWdlQnV0dG9uIiwiQWN0b3IiLCJjb250ZXh0IiwiZG9jdW1lbnRDbGFzc2VzIiwiZXh0ZW5kZWQiLCJpbml0aWFsaXplIiwiY3JlYXR1cmVJbml0IiwicHJlcGFyZUJhc2VEYXRhIiwiaXRlbUlkZW50aWZpZXIiLCJjb2NpZCIsImNvY2lkRmxhZyIsImRhaWx5TGltaXQiLCJvbmVGaWZ0aFNhbml0eSIsInJhd01vdiIsInJhd0RiIiwicmF3QnVpbGQiLCJjdXJyZW50IiwiaHAiLCJwcmVwYXJlRW1iZWRkZWREb2N1bWVudHMiLCJwcmVwYXJlRGVyaXZlZERhdGEiLCJyYXdIcE1heCIsIm1wIiwicmF3TXBNYXgiLCJyYXdTYW5NYXgiLCJmaWx0ZXJNYXRyaXgiLCJlZmZlY3RzIiwiaXNTdXBwcmVzc2VkIiwiYyIsImZvdW5kcnkiLCJ1dGlscyIsInByaW9yaXR5Iiwic2VsZWN0Q2hhbmdlcyIsImFwcGx5IiwiaHBNYXgiLCJtcE1heCIsImFjdG9yTGluayIsImRpc3Bvc2l0aW9uIiwic2lnaHQiLCJkZXRlY3Rpb25Nb2RlcyIsImNoZWNrVW5kZWZpbmVkQXV0byIsInJldHVybkRhdGEiLCJzaG9ydCIsImNyZWF0ZURhdGEiLCJoYXNDb25kaXRpb25TdGF0dXMiLCJnZXRUZW1wb0luc2FuZUR1cmF0aW9uVGV4dCIsImhhc0NvbmRpdGlvblZhbHVlIiwicG9ydHJhaXQiLCJyZWFsVGltZSIsImJvdXRPZk1hZG5lc3NUYWJsZUlkIiwiZGVzY3JpcHRpb24iLCJib3V0T2ZNYWRuZXNzVGFibGUiLCJ0YWJsZXMiLCJ0YWJsZVJvbGwiLCJUQUJMRV9SRVNVTFRfVFlQRVMiLCJET0NVTUVOVCIsImRvY3VtZW50SWQiLCJUZXh0RWRpdG9yIiwiZW5yaWNoSFRNTCIsIml0ZW1EYXRhIiwiY3JlYXRlRW1iZWRkZWREb2N1bWVudHMiLCJURVhUIiwidGV4dCIsInBhcnRzIiwiQ29DN0l0ZW0iLCJnZXROYW1lUGFydHNTcGVjIiwic2hvd1NoZWV0IiwiZW1wdHlTa2lsbCIsInJlbmRlclNoZWV0IiwiZmlyZWFybXMiLCJza2lsbERhdGEiLCJwZXJzb25hbCIsIm9jY3VwYXRpb24iLCJhcmNoZXR5cGUiLCJhdHRhY2siLCJ3cG5UeXBlIiwiY3JlYXRlZEF0dGFjayIsImNvbnNvbGUiLCJzZXRBY3RvckZsYWciLCJxdWFudGl0eSIsImdldEl0ZW1JZEJ5TmFtZSIsImNyZWF0ZUJvb2siLCJjcmVhdGVTcGVsbCIsImVtcHR5U3BlbGwiLCJjcmVhdGVTa2lsbCIsImNyZWF0ZUl0ZW0iLCJ3ZWFwb25Qcm9wZXJ0aWVzIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJiaW8iLCJiaW9ncmFwaHkiLCJ0ZXh0QXJlYSIsImFyZWFOYW1lIiwiZW1iZWRkZWROYW1lIiwiZGF0YUFycmF5IiwicHJvY2Vzc2VkRGF0YUFycmF5IiwiYmFzZUNhbGN1bGF0ZWQiLCJjYWxjdWxhdGVCYXNlIiwicGFyc2VDaGFyYWN0ZXJpc3RpY3MiLCJhZGRUaGlzIiwiaXNBbnlTcGVjIiwiaXNBbnlCdXROb3RGbGFnZ2VkIiwic2tpbGxMaXN0IiwiZ3JvdXAiLCJhcGkiLCJndWVzc0dyb3VwRnJvbURvY3VtZW50IiwiZnJvbUNvQ0lEUmVnZXhCZXN0IiwiY29jaWRSZWdFeHAiLCJSZWdFeHAiLCJxdW90ZVJlZ0V4cCIsImV4aXN0aW5nU2tpbGxzIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJmb3VuZCIsImZpbmRJbmRleCIsInNvcnRCeU5hbWVLZXkiLCJleGlzdGluZ0l0ZW0iLCJ1cGRhdGVFbWJlZGRlZERvY3VtZW50cyIsImdldE5hbWVXaXRob3V0U3BlYyIsImV4aXN0aW5nIiwibWFpblNraWxsIiwiY3JlYXRlV2VhcG9uU2tpbGwiLCJzZWNvbmRTa2lsbCIsImVuYWJsZUNoYXJhY3RlcmlzaXRpY3MiLCJnZXRDaGFyYWN0ZXJpc3RpYyIsImx1Y2siLCJlcmEiLCJlcmFzIiwiZXhwYW5kSXRlbUFycmF5IiwiaXQiLCJvdGhlcnNJdGVtcyIsImFkZFVuaXF1ZUl0ZW1zIiwiYWRkSXRlbXMiLCJiYWNrc3RvcnkiLCJzZWN0aW9uTmFtZSIsImJpb1NlY3Rpb25zIiwiY3JlYXRlQmlvU2VjdGlvbiIsIm1vbmV0YXJ5Iiwic2V0VGltZW91dCIsIl9zdGF0ZSIsIkFwcGxpY2F0aW9uIiwiUkVOREVSX1NUQVRFUyIsIlJFTkRFUklORyIsIkhvb2tzIiwicmVzZXRBcmNoZXR5cGUiLCJjb25maXJtIiwieWVzIiwiZGVmYXVsdFllcyIsImNvcmVDaGFyYWMiLCJlbnRyeSIsImNvcmVDaGFyYWN0ZXJpc3RpY3MiLCJjaGFyYWMiLCJjaGFyRGlhbG9nRGF0YSIsImNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhIiwicmVzZXRPY2N1cGF0aW9uIiwiY3JlZGl0UmF0aW5nIiwiYWN0b3JDcmVkaXRSYXRpbmciLCJmaW5kQ29jSWRJbkxpc3QiLCJwb2ludHNEaWFsb2dEYXRhIiwib2NjdXBhdGlvblNraWxsUG9pbnRzIiwib3B0aW9uYWxDaGFyIiwiZGlhbG9nRGF0YSIsInNraWxsQ291bnQiLCJtZXJnZWQiLCJtZXJnZU9wdGlvbmFsU2tpbGxzIiwiY3JlZGl0UmF0aW5nU2tpbGwiLCJzZXRJdGVtRmxhZyIsImFyY2hldHlwZVBvaW50cyIsIm9jY3VwYXRpb25Qb2ludHMiLCJwZXJzb25hbFBvaW50cyIsImdldEl0ZW1zQnlOYW1lIiwiZ2V0Rmlyc3RTa2lsbEJ5Q29DSUQiLCJwYXJzZUZvcm11bGEiLCJwYXJzZWRGb3JtdWxhIiwicGFyc2VkIiwiZ2V0UHJvcGVydHkiLCJ0ZW1wbGF0ZXMiLCJjaGFyTmFtZSIsImF0dHJpYk5hbWUiLCJsY2siLCJ0cmlnZ2VyIiwiZXJhc2VPbGQiLCJvY2N1cGF0aW9uU2tpbGwiLCJnZXRJdGVtRmxhZyIsInVuc2V0SXRlbUZsYWciLCJkZWxldGUiLCJhcmNoZXR5cGVTa2lsbCIsInNldEx1Y2siLCJocEZyb21DaGFyYWN0ZXJpc3RpY3MiLCJtcEZyb21DaGFyYWN0ZXJpc3RpY3MiLCJnZXRSZWFzb25TYW5Mb3NzIiwic2FuaXR5TG9zc0V2ZW50cyIsInRvdGFsTG9zcyIsImltbXVuaXR5IiwibGVmdCIsInJpZ2h0IiwibG9jYWxlQ29tcGFyZSIsInNhbk1heEZvcm11bGEiLCJzYW5pdHlMb3NzRXZlbnQiLCJzZXRTYW4iLCJzYW5Mb3NzQ2hlY2tQYXNzZWQiLCJzYW5Mb3NzQ2hlY2tGYWlsbGVkIiwic2FuTG9zc01heCIsInNhbkxvc3NNaW4iLCJkYWlseUxvc3MiLCJjdGh1bGh1TXl0aG9zIiwib2NjdXBhdGlvblBvaW50c1NwZW50IiwiYXJjaGV0eXBlUG9pbnRzU3BlbnQiLCJib251c1BvaW50cyIsImV4cGVyaWVuY2VQb2ludHMiLCJwZXJzb25hbFBvaW50c1NwZW50IiwiaGFzRGV2ZWxvcG1lbnRQaGFzZSIsImRldmVsb3BlbWVudCIsIm9ubHlSdW5PbmNlUGVyU2Vzc2lvbiIsImxvc3MiLCJ1cGRhdGVkS2V5Iiwic2V0QXR0cmliQXV0byIsInN1bSIsImRpdmlzb3IiLCJhZ2UiLCJNT1YiLCJidWlsZEZyb21DaGFyYWN0ZXJpc3RpY3MiLCJkYkZyb21DaGFyYWN0ZXJpc3RpY3MiLCJtb3ZGcm9tQ2hhcmFjdGVyaXN0aWNzIiwibG9ja2VkIiwiZ2V0SXRlbXNGcm9tTmFtZSIsImZsYWdWYWx1ZSIsImF0dHJpYnV0ZU5hbWUiLCJtaXNzaW5nIiwiY29udmVydERpZmZpY3VsdHkiLCJjaGFyYWN0ZXJpc3RpY05hbWUiLCJwYWNrcyIsIm1ldGFkYXRhIiwiZW50aXR5IiwiZ2V0RG9jdW1lbnQiLCJfcmF3VmFsdWUiLCJ1cGRhdGVWYWx1ZSIsIndlYXBvbkRhdGEiLCJ1dWlkIiwid2VhcG9ucyIsInBhcmVudCIsInRvSlNPTiIsImNyZWF0ZUNoYXRDYXJkIiwiaGFzR3VuIiwiZGVueUx1Y2siLCJkZW55QmxpbmRUYW1wZXJpbmciLCJmcm9tVXVpZFN5bmMiLCJ1c2VzQWx0ZXJuYXRpdmVTa2lsbCIsIm1hdGNoZXMiLCJleGVjIiwiY2hhcktleSIsImF0dHJpYktleSIsImF0dHIiLCJwaWxvdFNraWxscyIsImRyaXZlU2tpbGxzIiwidG9rZW5VdWlkIiwicmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUiLCJhdmVyYWdlIiwiY2hhclZhbHVlIiwic2tpbGxzUm9sbGVkIiwiZGV2ZWxvcGVtZW50RmxhZyIsIkRpZSIsImF1Z21lbnQiLCJza2lsbE1hc3RlcmluZ01lc3NhZ2UiLCJhdWdtZW50RGllIiwiYXVnbWVudFNBTkRpZSIsInNhbkdhaW5lZCIsInNhbkdhaW5lZE1lc3NhZ2UiLCJkZWJ1ZyIsInNjb3JlIiwiaW5jcmVhc2VFeHBlcmllbmNlIiwidW5mbGFnRm9yRGV2ZWxvcGVtZW50IiwiY2hhbmdlZCIsImNyZWF0ZU1lc3NhZ2UiLCJjdXJyZW50THVjayIsInB1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjayIsImhpZ2hlclRoYW5DdXJyZW50THVjayIsImF1Z21lbnRSb2xsIiwiYXVnbWVudFZhbHVlIiwiY29uZGl0aW9uTmFtZSIsImNvbmRpdGlvblZhbHVlIiwiY29uZGl0aW9ucyIsImZpZWxkIiwiZm9yY2VWYWx1ZSIsImNvcmUiLCJzdGF0dXNJZCIsImN1c3RvbSIsIm92ZXJsYXkiLCJzdGF0dXNFZmZlY3RzIiwiZWZmZWN0RGF0YSIsImZpZWxkcyIsImp1c3RUaGlzIiwiZGVsZXRlRW1iZWRkZWREb2N1bWVudHMiLCJjb3VudGVyIiwiZmlnaHRpbmdTa2lsbHMiLCJjbG9zZUNvbWJhdFdlYXBvbnMiLCJ3ZWFwb25MaXN0IiwiZmlyZWFybVNraWxscyIsIkNNIiwibXl0aG9zSGFyZGVuZWQiLCJDUiIsInN5bWJvbCIsIm1vbmV0YXJ5Rm9ybWF0S2V5cyIsInRvTG9jYWxlU3RyaW5nIiwibWluaW11bUZyYWN0aW9uRGlnaXRzIiwicm93IiwibW9uZXRhcnlUeXBlS2V5cyIsInNwZW5kaW5nTGV2ZWwiLCJtb25ldGFyeVZhbHVlIiwiY2FzaCIsImFzc2V0cyIsInUiLCJ0ZXN0VXNlclBlcm1pc3Npb24iLCJwbGF5ZXIiLCJjaGFyYWN0ZXJVc2VyIiwiY29udGVudHMiLCJoZWFsdGhCZWZvcmUiLCJkYW1hZ2VUYWtlbiIsIl9zZXRIcCIsImFybW9yRGF0YSIsImdyb3NzRGFtYWdlIiwiYXJtb3JWYWx1ZSIsImlzRm9ybXVsYSIsIm5ldERhbWFnZSIsImNlaWwiLCJoYXNNYWpvcldvdW5kIiwibWFqb3JXb3VuZCIsImRvY3VtZW50Q2xhc3MiLCJfb25MaW5rQ2xpY2siLCJfb25EcmFnQ29DN0xpbmsiLCJhZGRDbGFzcyIsIm9sZFR5cGUiLCJsaW5rSWNvbiIsIl9saW5rRnJvbUV2ZW50Iiwib3JpZ2luYWxFdmVudCIsInNldERhdGEiLCJleHRlcm5hbCIsIm1hdGNoQWxsIiwiQXJyYXkiLCJmcm9tIiwiZGlmZmljdWx0eVN0cmluZyIsImh1bWFuTmFtZSIsImdldENoYXJhY3RlcmlzdGljTmFtZXMiLCJkcmFnZ2FibGUiLCJfY3JlYXRlRG9jdW1lbnRMaW5rIiwiZXZlbnREYXRhIiwiY2hhcmFjdGVyaXN0aWNDaGVjayIsInNraWxsQ2hlY2siLCJhdHRyaWJ1dGVDaGVjayIsIndlYXBvbkNoZWNrIiwiX29uTGlua0FjdG9yQ2xpY2siLCJnZXRTcGVha2VyQWN0b3IiLCJPQlNFUlZFUiIsImlzQ2hhcmFjdGVyaXN0aWNDaGVjayIsImlzQ2hlY2siLCJpc0F0dHJpYnV0ZUNoZWNrIiwiaXNTYW5Mb3NzQ2hlY2siLCJpc0VmZmVjdCIsIkNvQzdQYXJzZXIiLCJfZ2V0VGV4dE5vZGVzIiwicmd4IiwiX3JlcGxhY2VUZXh0Q29udGVudCIsIl9jcmVhdGVMaW5rIiwiaXNDb250ZW50VmlzaWJsZSIsInBhcnNlZENvbnRlbnQiLCJJdGVtIiwicmVsYXRpdmVUbyIsIkpvdXJuYWxFbnRyeVBhZ2UiLCJpY29uTGFuZ3VhZ2UiLCJtYWxmdW5jdGlvbiIsInByb3BlcnR5SWQiLCJvdmVycmlkZSIsImNoZWNrZWRQcm9wcyIsIkNvQ0lERWRpdG9yIiwiZXJhVG9nZ2xlIiwibWVsZWVXZWFwb24iLCJwcm9wTmFtZSIsInByb3BWYWx1ZSIsImhhc1Byb3BlcnR5IiwiaXNJbmNsdWRlZEluU2V0Iiwic3BlY05hbWVSZWdleCIsImd1ZXNzTmFtZVBhcnRzIiwic2V0IiwiZXJhc2VBZGp1c3RtZW50IiwibWF4VXNlc1BlclJvdW5kIiwibXVsdGlTaG90IiwidXNlc1BlclJvdW5kU3RyaW5nIiwic2tpbGxQcm9wZXJ0aWVzIiwiX2Jhc2UiLCJhbW1vIiwic2V0QnVsbGV0cyIsIm1heEJ1bGxldCIsImJ1bGxldHMiLCJtYXhCdWxsZXRzIiwibmV3QXJyYXkiLCJnZXRDaGF0RGF0YSIsImh0bWxPcHRpb25zIiwibGFiZWxzIiwicHJvcHMiLCJmbiIsInAiLCJfd2VhcG9uQ2hhdERhdGEiLCJza2lsbExhYmVsIiwiY2FuQmVQdXNoZWQiLCJpc0RvZGdlIiwicHVzaGluZyIsImlzVW5rbm93biIsIl91dWlkIiwicmFuZG9tSUQiLCJoYXNDYXJkIiwicmF3VmFsdWVTdHJpbmciLCJjcml0aWNhbFRocmVzaG9sZCIsImZ1bWJsZVRocmVzaG9sZCIsInN1Y2Nlc1RocmVzaG9sZCIsIl9tb2RpZmllZFJlc3VsdCIsIm1vZGlmaWVkIiwiZmxhdERpY2VNb2RpZmllclN0cmluZyIsImlzU2ltcGxlUm9sbCIsImhhc1BlbmFsdHkiLCJoYXNNb2RpZmllciIsIl9kaWNlTW9kaWZpZXIiLCJmdWxsTmFtZSIsIl9kaWZmaWN1bHR5Iiwib2xkQ2hlY2siLCJzdWNjZXNzTGV2ZWxJY29ucyIsInVua25vd25EaWZmaWN1bHR5IiwiaWNvbnMiLCJzdWNjZXNzSGludCIsImNzc0NsYXNzIiwiaGludCIsImZhaWx1cmVIaW50IiwiZ21EaWZmaWN1bHR5Q3JpdGljYWwiLCJnbURpZmZpY3VsdHlFeHRyZW1lIiwiZ21EaWZmaWN1bHR5SGFyZCIsImdtRGlmZmljdWx0eVJlZ3VsYXIiLCJfc2tpbGwiLCJfZ2V0SXRlbUZyb21JZCIsIl9pdGVtIiwiaXNEdW1teSIsImRpc3BsYXlSZXN1bHRUeXBlIiwiZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsIiwiZGlzcGxheUJvdGhTdWNjZXNzTGV2ZWwiLCJkb250RGlzcGxheVN1Y2Nlc3NMZXZlbCIsImltYWdlIiwiZ2V0TGlua0VsZW1lbnQiLCJyb2xsRGF0YSIsInRocmVzaG9sZCIsInRlblJlc3VsdCIsInRlbk9ubHlPbmVEaWUiLCJpc1ZhbHVlIiwiaXNDaGFyYWN0aXJpc3RpYyIsImlzU2tpbGwiLCJpc0l0ZW0iLCJpc0F0dHJpYnV0ZSIsInN1Y2Nlc3NSZXF1aXJlZCIsIm1hbGZ1bmN0aW9uVHh0IiwidG9nZ2xlSXRlbUZsYWciLCJoYXNFbm91Z2hMdWNrIiwibmV4dExldmVsIiwibHVja1RvU3BlbmQiLCJjYW5JbmNyZWFzZVN1Y2Nlc3MiLCJjYW5Bd2FyZEV4cGVyaWVuY2UiLCJmb3JjZWQiLCJKU09OUm9sbFN0cmluZyIsImNzc0NsYXNzTGlzdCIsInBsYXllckNzc0NsYXNzIiwiZm9yY2VkU3VjY2VzcyIsImZvcmNlZEZhaWx1cmUiLCJ0b3RhbEx1Y2tTcGVudCIsInNoaWZ0IiwicmVtb3ZlVXBncmFkZXMiLCJmb3JjZVN1Y2Nlc3NMZXZlbCIsIl9mb3JjZUNoZWNrIiwiaGlnaCIsImxvdyIsInJhbmRvbSIsInVuaXRUb3RhbCIsInRlblRvdGFsIiwiaGFzRW5vdWdoIiwidGVuIiwiZmxhZ2dlZEZvckRldmVsb3BtZW50IiwiX2ZsYXZvciIsIl9jb250ZXh0IiwicGFyZW50VXVpZCIsInJhd3ZhbHVlIiwidG9vbHRpcEhlYWRlciIsIm9yaWdpbmFsU3BlYWtlciIsIm5ld0NvbnRlbnQiLCJodG1sTWVzc2FnZSIsInJvbGxSZXN1bHRFbGVtZW50IiwiT1RIRVIiLCJ0b29sdGlwIiwicm9sbFRvb2xUaXAiLCJmYWNlIiwiY29tbWFuZCIsInRpcCIsImNoaWxkcmVuIiwiYXBwZW5kQ2hpbGQiLCJwYSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInB0Iiwid2luZG93IiwiaW5uZXJXaWR0aCIsInRvcCIsInkiLCJpbm5lckhlaWdodCIsInppIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInpJbmRleCIsImlzTnVtZXJpYyIsIl9FeGVjQ29tbWFuZCIsImVzY2FwZWQiLCJhc2siLCJ0aHJlc2hvbGRTdHIiLCJkaWZmaWN1bHR5U3RyIiwiYXNrVmFsdWUiLCJhY3RvclN0cmluZyIsImJhc2VBY3RvciIsImdldERvY3VtZW50Q2xhc3MiLCJyb2xsRGljZSIsImJhciIsInNsb3QiLCJtYWNybyIsIm1hY3JvcyIsIm0iLCJhc3NpZ25Ib3RiYXJNYWNybyIsIk1hY3JvIiwidXBkYXRlQ2hhclNoZWV0cyIsImNoZWNrT3B0aW9ucyIsInBsYXllclRva2VuSWRzIiwic2VsZWN0ZWRQbGF5ZXJJZHMiLCJmb3JFYWNoIiwiY2hlY2tlZCIsInN0YXJ0UmVzdCIsImNoYXRDb250ZW50IiwicXVpY2tIZWFsZXIiLCJpc0NyaXRpY2FsV291bmRzIiwiZGFpbHlTYW5pdHlMb3NzIiwiaHBWYWx1ZSIsIm1wVmFsdWUiLCJoZWFsQW1vdW50IiwiaG91cnMiLCJtYWdpY0Ftb3VudCIsInRrIiwicmVuZGVyZWQiLCJlbnRpdHlUeXBlIiwiZm9sZGVyIiwibmF2aWdhdG9yIiwiY2xpcGJvYXJkIiwiaXNTZWN1cmVDb250ZXh0Iiwid3JpdGVUZXh0IiwicG9zaXRpb24iLCJib2R5IiwiZm9jdXMiLCJyZWplY3QiLCJleGVjQ29tbWFuZCIsIkVycm9yIiwiY2F0Y2giLCJsZW4iLCJxU3RyaW5nIiwiY2hhckF0IiwiY2hhckNvZGVBdCIsImoiLCJwYXRoIiwibyIsImRvYyIsImRvY05hbWUiLCJkb2NJZCIsImluc3RhbmNlIiwiZW1iZWRkZWRJZCIsImlkZW50aWZpZXJzIiwiZHJvcERhdGEiLCJkb2NVdWlkIiwiZ2V0RG9jdW1lbnRGcm9tS2V5IiwiZm9sZGVyTmFtZSIsImltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlciIsImZvbGRlcnMiLCJGb2xkZXIiLCJvTSIsInNvdXJjZSIsInBhY2thZ2UiLCJnZXREb2N1bWVudHMiLCJmYWxsYmFja0FueSIsImd1ZXNzSXRlbSIsIm5vcm1hbGl6ZSIsInN1Ym1pdE9uQ2xvc2UiLCJzdWJtaXRPbkNoYW5nZSIsInN1cHBvcnRlZExhbmd1YWdlcyIsImVkaXRhYmxlIiwiaXNFZGl0YWJsZSIsImd1ZXNzQ29kZSIsImd1ZXNzSWQiLCJpZFByZWZpeCIsImdldFByZWZpeCIsImxhbmciLCJpc0VuYWJsZWQiLCJDb0NJREtleXMiLCJmbGF0dGVuT2JqZWN0IiwidHJhbnNsYXRpb25zIiwiQ29DSURGbGFnIiwicHJlZml4IiwiZXhpc3RpbmdLZXlzIiwiaXNTeXN0ZW1JRCIsIl9leGlzdGluZyIsIndvcmxkRG9jdW1lbnRzIiwiZnJvbUNvQ0lEQWxsIiwic2NvcGUiLCJ1c2VkRXJhcyIsInVuaXF1ZVdvcmxkUHJpb3JpdHkiLCJ3b3JsZERvY3VtZW50SW5mbyIsIndhcm5EdXBsaWNhdGVXb3JsZFByaW9yaXR5Iiwid29ybGREdXBsaWNhdGVzIiwiY29tcGVuZGl1bURvY3VtZW50cyIsInVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eSIsImNvbXBlbmRpdW1Eb2N1bWVudEluZm8iLCJ3YXJuRHVwbGljYXRlQ29tcGVuZGl1bVByaW9yaXR5IiwiY29tcGVuZGl1bUR1cGxpY2F0ZXMiLCJzaWJsaW5ncyIsIl9vbkNsaWNrVG9nZ2xlIiwidG9LZWJhYkNhc2UiLCJndWVzcyIsImNzcyIsImNvbG9yIiwiYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiIsImhlYWRlckJ1dHRvbnMiLCJzaGVldENvQ0lEIiwiQ29DSURFZGl0b3JCdXR0b24iLCJvbmNsaWNrIiwibnVtYmVyT2ZCdXR0b25zIiwiQ29DN0FjdGl2ZUVmZmVjdCIsIkFjdGl2ZUVmZmVjdCIsIm93bmVyIiwiZWZmZWN0SWQiLCJvcmlnaW4iLCJlZmZlY3RUeXBlIiwiX3ByZXBhcmVEdXJhdGlvbiIsInRvSVNPU3RyaW5nIiwiaXNTdGF0dXMiLCJjYXRlZ29yaWVzIiwidGVtcG9yYXJ5IiwicGFzc2l2ZSIsImluYWN0aXZlIiwic3VwcHJlc3NlZCIsIl9nZXRTb3VyY2VOYW1lIiwiaXNUZW1wb3JhcnkiLCJoaWRkZW4iLCJleHBlbmRlZCIsIkNvQzdDb250ZXh0TWVudSIsIm1lbnUiLCJfY2FsbGJhY2siLCJfaHRtbCIsIl9tZW51IiwibWVudVRyaWdnZXIiLCJjb250ZXh0bWVudSIsIl9vbkNvbnRleHRNZW51IiwibWVudUVsZW1lbnQiLCJDcmVhdGVNZW51IiwiX29uTWVudUFjdGlvbiIsIm1lbnVDb250YWluZXIiLCJlYWNoIiwidmlzaWJpbGl0eSIsImNsb3NlQWxsIiwibWVudU5hbWUiLCJjb250ZXh0TWVudSIsIndyYXBwZXIiLCJzdWJNZW51IiwiY2xpZW50WCIsImNsaWVudFkiLCJtZW51SGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJtZW51V2lkdGgiLCJvdXRlcldpZHRoIiwic2VjdGlvbiIsIkNyZWF0ZVNlY3Rpb24iLCJtdWx0aSIsImNhblNlZSIsInN1YiIsIkNvQzdBY3RvclNoZWV0IiwiQWN0b3JTaGVldCIsIl9nZXRIZWFkZXJCdXR0b25zIiwic2hvd0hpZGRlbkRldk1lbnUiLCJjYW5EcmFnVG9rZW4iLCJsaW5rZWRBY3RvciIsIml0ZW1zQnlUeXBlIiwiY29tYmF0U2tpbGxzIiwicmFuZ2VXcG4iLCJtZWxlZVdwbiIsImFjdG9yRmxhZ3MiLCJwcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyIsInByZXBhcmVOUENBY3RpdmVFZmZlY3RDYXRlZ29yaWVzIiwicGVybWlzc2lvbkxpbWl0ZWQiLCJMSU1JVEVEIiwiYWxsb3dVbmxvY2siLCJwZXJzb25hbERlc2NyaXB0aW9uIiwic2V4IiwicmVzaWRlbmNlIiwiYmlydGhwbGFjZSIsIm9yZ2FuaXphdGlvbiIsInBsYXllcm5hbWUiLCJtYW51YWxDcmVkaXQiLCJjcmVkaXQiLCJtb25ldGFyeVN5bWJvbCIsInNwZW50IiwiYXNzZXRzRGV0YWlscyIsImRldmVsb3BtZW50IiwicHVscFJ1bGVBcmNoZXR5cGUiLCJwdWxwUnVsZU9yZ2FuaXphdGlvbiIsImlzRGVhZCIsImlzRHlpbmciLCJpdGVtVG9VcGRhdGUiLCJhc3luY0Jhc2UiLCJ1cGRhdGVkRXhwIiwiaXRlbVR5cGUiLCJtZWxlZVNraWxscyIsInJhbmdlU2tpbGxzIiwiY2J0U2tpbGxzIiwidXNlc0FsdGVybmF0ZVNraWxsIiwic2tpbGxTZXQiLCJfcHJvcGVydGllcyIsImhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSIsImlzRmlyc3QiLCJpc0xhc3QiLCJzaG93SW52ZW50b3J5SXRlbXMiLCJzaG93SW52ZW50b3J5Qm9va3MiLCJzaG93SW52ZW50b3J5U3BlbGxzIiwic2hvd0ludmVudG9yeVRhbGVudHMiLCJzaG93SW52ZW50b3J5U3RhdHVzZXMiLCJzaG93SW52ZW50b3J5V2VhcG9ucyIsImhhc0NvbmRpdGlvbnMiLCJjb25kaXRpb24iLCJvbkNsb3NlU2hlZXQiLCJtZW51cyIsInJvbGxNZW51Iiwic2FuTWVudSIsInJvbGxDb250ZXh0TWVudSIsIl9vbkNvbnRleHRNZW51Q2xpY2siLCJzYW5Db250ZXh0TWVudSIsIl9vbk9wcG9zZWRSb2xsIiwiX29uUm9sbENoYXJhY3Rlcml0aWNUZXN0IiwiX29uUm9sbFNraWxsVGVzdCIsIl9vblJvbGxBdHRyaWJUZXN0IiwiX29uRHJhZ1Rva2VuU3RhcnQiLCJjb21wZW5kaXVtIiwiX29uRHJhZ0NoYXJhY3RlcmlzdGljIiwiX29uRHJhZ0F0dHJpYnV0ZSIsIl9vbkRyYWdTYW5DaGVjayIsIl9vbkxvY2tDbGlja2VkIiwiX29uRmxhZ0NsaWNrZWQiLCJfb25Gb3JtdWxhQ2xpY2tlZCIsIl9vblJvbGxDaGFyYWN0ZXJpdGljc1ZhbHVlIiwiX29uQXZlcmFnZUNoYXJhY3Rlcml0aWNzVmFsdWUiLCJfb25BdXRvVG9nZ2xlIiwiX29uUmVzZXRDb3VudGVyIiwiX29uQ29uZGl0aW9uVG9nZ2xlIiwiaGVhbCIsInJldml2ZSIsImNoZWNrRm9yRGVhdGgiLCJfb25JdGVtUm9sbCIsIl9vbldlYXBvblJvbGwiLCJfb25FZmZlY3QiLCJfb25XZWFwb25Ta2lsbFJvbGwiLCJfb25SZWxvYWRXZWFwb24iLCJfb25BZGRBbW8iLCJkYmxjbGljayIsIl90b2dnbGVSZWFkT25seSIsIl9vbldlYXBvbkRhbWFnZSIsIl9vbkludmVudG9yeUhlYWRlciIsIl9vbkl0ZW1IZWFkZXIiLCJfb25TZWN0aW9uSGVhZGVyIiwid2hlZWxJbnB1dHMiLCJ3aGVlbElucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9vbldoZWVsIiwiX29uSXRlbVN1bW1hcnkiLCJfb25JdGVtUG9wdXAiLCJfb25SZW5kZXJJdGVtU2hlZXQiLCJldiIsInBhcmVudHMiLCJpdGVtVG9EZWxldGUiLCJzdHJpY3QiLCJzbGlkZVVwIiwic3RvcFByb3BhZ2F0aW9uIiwiY3JlYXRlRW1wdHlCb29rIiwiY3JlYXRlRW1wdHlJdGVtIiwiY3JlYXRlRW1wdHlTa2lsbCIsImNyZWF0ZUVtcHR5U3BlbGwiLCJjcmVhdGVFbXB0eVdlYXBvbiIsIl9vblRyYWRlSXRlbSIsImRlbGV0ZUJpb1NlY3Rpb24iLCJtb3ZlQmlvU2VjdGlvblVwIiwibW92ZUJpb1NlY3Rpb25Eb3duIiwiZGV2ZWxvcGVtZW50UGhhc2UiLCJkZXRhaWwiLCJkZXZlbG9wTHVjayIsImRpc2FibGUiLCJtb3VzZWVudGVyIiwidG9vbFRpcFNraWxsRW50ZXIiLCJDb0M3VG9vbHRpcHMiLCJ0b29sVGlwTGVhdmUiLCJ0b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlciIsInRvb2xUaXBBdHRyaWJ1dGVFbnRlciIsInRvb2xUaXBBdXRvRW50ZXIiLCJ0b29sVGlwRmxhZ0ZvckRldmVsb3BtZW50Iiwib25NYW5hZ2VBY3RpdmVFZmZlY3QiLCJkZWxheSIsIlRvb2xUaXBIb3ZlciIsInRvb2xUaXBUaW1lciIsInRvb2xUaXAiLCJkaXNwbGF5VG9vbFRpcCIsImNoYXJJZCIsImF0dHJpYnV0ZUlkIiwiYXR0cmlidXRlcyIsInRhcmdldFR5cGUiLCJyb2xsT3B0aW9ucyIsImFjdG9yRnJvbSIsImFjdG9yVG8iLCJ2aXNpYmxlIiwiTk9ORSIsIl9vbkRyYWdTdGFydCIsImRyYWdEYXRhIiwiYm94IiwiQ29DN1R5cGUiLCJfb25Ecm9wIiwidG9nZ2xlQ29uZGl0aW9uIiwicmVzZXREYWlseVNhbml0eSIsInRvZ2dsZUF0dHJpYkF1dG8iLCJ0b2dnbGVQcm9wZXJ0eSIsInJvbGxDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsImF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsImlzTG9ja2VkIiwidG9nZ2xlQWN0b3JGbGFnIiwiZGVsdGFZIiwic2V0SHAiLCJzZXRNcCIsInJlYWRPbmx5Iiwic2VjcmV0cyIsImhhc0NsYXNzIiwic3VtbWFyeSIsImRpdiIsInNwZWNpYWxEaXYiLCJoaWRlIiwic2xpZGVEb3duIiwicGFubmVsQ2xhc3MiLCJwYW5uZWwiLCJpcyIsIm9sIiwibmV4dCIsInBvcHVwU2tpbGwiLCJlbnJpY2hlZFZhbHVlIiwic2Nyb2xsWSIsInByb2NlZWRXaXRob3V0VGFyZ2V0IiwiY2FuY2VsIiwicHJvY2VlZCIsImFkZEJ1bGxldCIsInRlc3QiLCJyb2xsRm9ybXVsYSIsIm92ZXJyaWRlcyIsImNyZWRpdFZhbHVlIiwidXBkYXRlVGV4dEFyZWEiLCJ1cGRhdGVCaW9WYWx1ZSIsInVwZGF0ZUJpb1RpdGxlIiwic2VsZWN0ZWRJbmRleCIsIkNvQzdOUENTaGVldCIsImFsbG93Rm9ybXVsYSIsImRpc3BsYXlGb3JtdWxhIiwiaGFzU2FuIiwiaGFzTXAiLCJoYXNMdWNrIiwiaXNDcmVhdHVyZSIsImhhc0ludmVudG9yeSIsImVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiIsImVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIiLCJrZWVwZXIiLCJzYW5sb3NzTWVudSIsInNhbmxvc3NDb250ZXh0TWVudSIsIl9vblNhbkxvc3NDb250ZXh0TWVudUNsaWNrIiwiX29uU2FuQ2hlY2siLCJjaGVja1RhcmdldHMiLCJ1bnNldEFjdG9yRmxhZyIsInJlc2l6YWJsZSIsIm1pbmltaXphYmxlIiwiX3VwZGF0ZU9iamVjdCIsInNldENoYXJhY3RlcmlzdGljIiwic2V0UG9zaXRpb24iLCJmb3JjZUF1dG8iLCJDb0M3Q3JlYXR1cmVTaGVldCIsIkNvQzdDcmVhdGVNeXRob3NFbmNvdW50ZXIiLCJpc0ltbXVuaXR5IiwiX29uQnV0dG9uQ2xpY2siLCJDb0M3Q2hhcmFjdGVyU2hlZXQiLCJzdW1tYXJpemVkIiwidG9nZ2xlU2hlZXRNb2RlIiwic2tpbGxMaXN0TW9kZVZhbHVlIiwic2tpbGxTaG93VW5jb21tb24iLCJzaG93SWNvbnNPbmx5Iiwib2NjdXBhdGlvblNldCIsImFyY2hldHlwZVNldCIsInRvdGFsRXhwZXJpZW5jZSIsInRvdGFsT2NjdXBhdGlvbiIsImludmFsaWRPY2N1cGF0aW9uUG9pbnRzIiwidG90YWxBcmNoZXR5cGUiLCJpbnZhbGlkQXJjaGV0eXBlUG9pbnRzIiwidG90YWxQZXJzb25hbCIsImludmFsaWRQZXJzb25hbFBvaW50cyIsImNyZWRpdFJhdGluZ01heCIsImNyZWRpdFJhdGluZ01pbiIsImludmFsaWRDcmVkaXRSYXRpbmciLCJwdWxwVGFsZW50Q291bnQiLCJ0YWxlbnQiLCJtaW5QdWxwVGFsZW50cyIsInRhbGVudHMiLCJpbnZhbGlkUHVscFRhbGVudHMiLCJhbGxvd0RldmVsb3BtZW50IiwiYWxsb3dDaGFyQ3JlYXRpb24iLCJkZXZlbG9wbWVudFJvbGxGb3JMdWNrIiwic2hvd0RldlBhbm5lbCIsIl9tb25ldGFyeUZvcm1hdHMiLCJtb25ldGFyeUZvcm1hdHMiLCJzaG93Q3VycmVuY3lTeW1ib2wiLCJfbW9uZXRhcnlUeXBlcyIsIm1vbmV0YXJ5VHlwZXMiLCJtb25ldGFyeUZvcm1hdCIsIm9uZUJsb2NrQmFja1N0b3J5IiwicHJldmlvdXNTcGVjIiwiaXNTcGVjaWFsaXphdGlvbiIsInNraWxsc0J5VmFsdWUiLCJ0b3BTa2lsbHMiLCJ0b3BXZWFwb25zIiwicmV2ZXJzZSIsImRpc3BsYXlQbGF5ZXJOYW1lIiwic2tpbGxMaXN0RW1wdHkiLCJlbnJpY2hlZEJhY2tzdG9yeSIsIl9zYXZlU2Nyb2xsUG9zaXRpb25zIiwiX3Njcm9sbFBvc2l0aW9uc1giLCJwb3MiLCJzZWwiLCJzY3JvbGxMZWZ0IiwiX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMiLCJzZWxlY3RvcnMiLCJwb3NpdGlvbnMiLCJfb25Ta2lsbERldiIsIl9vbkl0ZW1EZXRhaWxzIiwidG9nZ2xlU2tpbGxMaXN0TW9kZSIsInRvZ2dsZVNraWxsVW5jb21tb25Nb2RlIiwiX29uQWRkU2FuaXR5TG9zc1JlYXNvbiIsIl9vbkRlbGV0ZVNhbml0eUxvc3NSZWFzb24iLCJfb25Ub2dnbGVLZWVwZXJGbGFncyIsIl9vbkFkZE1vbmV0YXJ5IiwiX29uUmVtb3ZlTW9uZXRhcnkiLCJjYXNoVHlwZSIsImNhc2hWYWx1ZSIsImFzc2V0c1R5cGUiLCJhc3NldHNWYWx1ZSIsInNwZW5kaW5nVHlwZSIsInNwZW5kaW5nVmFsdWUiLCJkZXZlbG9wU2tpbGwiLCJzdHlsZVNoZWV0IiwiY3NzUnVsZUluZGV4Iiwic3R5bGVTaGVldHMiLCJocmVmIiwiZW5kc1dpdGgiLCJydWxlcyIsInNlbGVjdG9yVGV4dCIsIkNTU1N0eWxlIiwicmVtb3ZlUHJvcGVydHkiLCJzZXRQcm9wZXJ0eSIsIkZvbnRGYWNlIiwibG9hZCIsImxvYWRlZEZhY2UiLCJmb250cyIsIndlaWdodCIsImNhbWVsQ2FzZVRvSHlwaGVuIiwiZXhwYW5kZWQiLCJDb0M3Q29tYmF0IiwiY3VycmVudENvbWJhdCIsImNvbWJhdHMiLCJjdXJyZW50SW5kZXgiLCJjb21iSWQiLCJjb21iYXRhbnRDb250cm9sc0RpdiIsImNvbWJhdGFudCIsImNvbWJhdGFudHMiLCJwcmVwZW5kIiwiaW5pdGlhdGl2ZSIsInRva2VuSW5pdGlhdGl2ZSIsImluaXRpYXRpdmVUZXN0IiwiaDQiLCJmb250V2VpZ2h0IiwidGV4dFNoYWRvdyIsImJhY2tncm91bmQiLCJfb25Ub2dnbGVHdW4iLCJjb21iYXRhbnRJZCIsIm5ld0luaXQiLCJyb2xsSW5pdGlhdGl2ZSIsInNldEluaXRpYXRpdmUiLCJpZHMiLCJDb0NJREJhdGNoIiwiZm91bmRLZXlzIiwib3V0IiwibWlzc2luZ05hbWVzIiwic3VmZml4Iiwic3VmZml4UmVnRXhwIiwib25TZXROYW1lIiwib25DbGlja0d1ZXNzIiwia2V5dXAiLCJvbktleXVwIiwidHlwZU5hbWUiLCJwcm9jZXNzU2tpbGxLZXlzIiwidXBkYXRlTGlzdCIsInRva2VuT2Zmc2V0IiwiaXRlbU9mZnNldCIsImFjdG9yRGF0YSIsImV4cGFuZGVkRmxhZ3MiLCJ1cGRhdGVEb2N1bWVudHMiLCJzY2VuZURhdGEiLCJwb3B1bGF0ZVNraWxsS2V5cyIsIlVwZGF0ZXIiLCJzeXN0ZW1VcGRhdGVWZXJzaW9uIiwiam91cm5hbCIsInZlcnNpb24iLCJydW5NaWdyYXRlIiwiaXNOZXdlclZlcnNpb24iLCJ1cGRhdGVkTW9kdWxlcyIsImN1cnJlbnRNb2R1bGVzIiwicGFja2FnZU5hbWUiLCJtb2R1bGUiLCJtb2QiLCJza2lwIiwiT0siLCJwZXJtYW5lbnQiLCJtaWdyYXRlQWN0b3JEYXRhIiwiaXNFbXB0eSIsImxvZyIsImVuZm9yY2VUeXBlcyIsIm1pZ3JhdGVJdGVtRGF0YSIsInRhYmxlIiwibWlncmF0ZVRhYmxlRGF0YSIsIm1pZ3JhdGVNYWNyb0RhdGEiLCJtaWdyYXRlU2NlbmVEYXRhIiwibWlncmF0ZUNvbXBlbmRpdW1EYXRhIiwiX21pZ3JhdGVBY3RvckNoYXJhY3RlclNhbml0eSIsIl9taWdyYXRlQWN0b3JBcnR3b3JrIiwiX21pZ3JhdGVBY3RvcktlZXBlck5vdGVzIiwiX21pZ3JhdGVBY3Rvck5wY0NyZWF0dXJlIiwiX21pZ3JhdGVBY3RvclN0YXR1c0VmZmVjdEFjdGl2ZSIsIl9taWdyYXRlQWN0b3JTYW5Mb3NzUmVhc29ucyIsIl9taWdyYXRlQWN0b3JNb25ldGFyeSIsImFyciIsIml0ZW1VcGRhdGUiLCJkb2N1bWVudFR5cGUiLCJ3YXNMb2NrZWQiLCJjb25maWd1cmUiLCJtaWdyYXRlIiwiZG9jdW1lbnRzIiwiX21pZ3JhdGVJdGVtRW1iZWRkZWR2MTAiLCJfbWlncmF0ZUl0ZW1FeHBlcmllbmNlIiwiX21pZ3JhdGVJdGVtQXJ0d29yayIsIl9taWdyYXRlSXRlbUJvb2tBdXRvbWF0ZWQiLCJfbWlncmF0ZUl0ZW1LZWVwZXJOb3RlcyIsIl9taWdyYXRlSXRlbVNwZWxsQXV0b21hdGVkIiwiX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXNNZXJnZSIsIl9taWdyYXRlSXRlbUVyYXMiLCJfbWlncmF0ZUl0ZW12MTAiLCJfbWlncmF0ZUl0ZW1Cb29rVW5pdHMiLCJfbWlncmF0ZU1hY3JvQXJ0d29yayIsIl9taWdyYXRlVGFibGVBcnR3b3JrIiwicmV0dXJucyIsIl9taWdyYXRlVG9rZW5BcnR3b3JrIiwiaGFzIiwiTWFwIiwib3JpZ2luYWwiLCJnIiwic3BlbGxzIiwiY29zdCIsImNhc3RpbmdUaW1lIiwidW5pZGVudGlmaWVkIiwiYXV0aG9yIiwiZGF0ZSIsImxhbmd1YWdlIiwibXl0aG9zUmF0aW5nIiwibm90ZXMiLCJnYWluIiwiQ01JIiwiQ01GIiwibmVjZXNzYXJ5Iiwid2Vla3NTdHVkeVRpbWUiLCJwcm9ncmVzcyIsInN0dWR5Iiwia2VlcGVyTm90ZXMiLCJlbmNvdW50ZXJlZENyZWF0dXJlcyIsImltIiwiYXR0YWNrc1BlclJvdW5kIiwiaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwiLCJuYW1lQ2hhcmFjdGVycyIsImVuIiwiZGJOb25lIiwiYXJtb3JOb25lIiwiYXR0YWNrc1BlclJvdW5kTm9uZSIsInNhbkxvc3NOb25lIiwiZnVsbGRiIiwiaGFsZmRiIiwic2VjdGlvbkNvbWJhdHMiLCJuZXdDb21iYXRIZWFkZXIiLCJzZWN0aW9uU2tpbGxzIiwic2VjdGlvbkxhbmdhdWdlcyIsInNlY3Rpb25TcGVsbHMiLCJoYW5kZ3VuIiwicmlmbGUiLCJzbWIiLCJtYWNoaW5lR3VuIiwibGF1bmNoZWQiLCJleGFtcGxlIiwiZGUiLCJkaWNlU2hvcnQiLCJwbCIsImZyIiwiZXMiLCJ3ZWFwb25Eb2RnZSIsImd1ZXNzU3RhcnRDb21iYXQiLCJzZWN0aW9ucyIsIkNvQzdBY3RvckltcG9ydGVyUmVnRXhwIiwiQ29DN0FjdG9ySW1wb3J0ZXIiLCJpdGVtTG9jYXRpb25zIiwiYXNOdW1iZXIiLCJhc1N0cmluZyIsImdldFJlZ0V4IiwicmVnZXgiLCJjbGVhblN0cmluZyIsInRyYW5zbGF0ZVJvbGwiLCJyZWdFeCIsInRvSFRNTCIsInJlZ0V4S2V5IiwicmVnRXhwIiwicmVxdWlyZWRHcm91cCIsInJlbW92ZUZyb21UZXh0Iiwic2F2ZUtleXMiLCJwcm9jZXNzQ29tYmF0IiwibmV3bGluZSIsIkNvQzdJbXBvcnRlciIsImxhc3RQZXJjZW50IiwibWF4TG9vcHMiLCJwZXJjZW50YWdlIiwiaXNSYW5nZWQiLCJkYW1hZ2VzIiwiaXNTaG90Z3VuIiwiYXR0YWNrcyIsInByb2Nlc3NTa2lsbHMiLCJicmVha3MiLCJwcm9jZXNzU3BlbGxzIiwic3BlbGxzQXJyIiwic3BlbGwiLCJoZWFkZXIiLCJzdWJzdHIiLCJvY2N1cGF0aW9uQWdlIiwicmVnRXhwU2VjdGlvbnMiLCJnbW5vdGVzIiwiZGlzYWJsZUF0dHJpYkF1dG8iLCJhdHRyaWJWYWx1ZSIsImNoYXJhY3RlckRhdGEiLCJjcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMiLCJucGMiLCJ1cGRhdGVJdGVtRGF0YSIsImxhc3RXZWFwb25Ta2lsbCIsInBhaXIiLCJ3ZWFwb25Ta2lsbHMiLCJwYyIsIndlYXBvblNraWxsIiwiY2xvbmVkIiwibGFuZ3VhZ2VzIiwiY2xvbmUiLCJuZXdTa2lsbCIsIm5lZWRzQ29udmVyc2lvbiIsIm5lZWRzQ29udmVyc2lvblJlc3VsdCIsImlucHV0cyIsImNoZWNrTGFuZ3VhZ2UiLCJnZXRLZXlzIiwiZ2V0UmVndWxhckV4cHJlc3Npb25zIiwicGFyc2VDaGFyYWN0ZXIiLCJjb252ZXJ0RnJvbTZFIiwiY29udmVydDdFIiwiaXRlbXNEYXRhIiwidGVzdE1vZGUiLCJjcmVhdGVFbnRpdHkiLCJjcmVhdHVyZSIsIkNvQzdEaXJlY3RvcnlQaWNrZXIiLCJGaWxlUGlja2VyIiwiYWN0aXZlU291cmNlIiwiYnVja2V0IiwicmF3IiwicGlja2VyIiwicGlja2VyQnV0dG9uIiwiY3JlYXRlRGVmYXVsdERpcmVjdG9yeSIsImNyZWF0ZURpcmVjdG9yeSIsImZpbGUiLCJmaWxlbmFtZSIsInVwbG9hZCIsIkZpbGUiLCJDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIiLCJiYWNrc3RvcnlKU09OIiwiYmxvY2siLCJkaG9sZUhvdXNlRGF0YSIsIkludmVzdGlnYXRvciIsImJhY2tzdG9yaWVzIiwiZ2V0QmFja3N0b3J5IiwiQmFja3N0b3J5IiwiUGVyc29uYWxEZXRhaWxzIiwiTmFtZSIsIkNoYXJhY3RlcmlzdGljcyIsIlNUUiIsIkNPTiIsIlNJWiIsIkRFWCIsIkFQUCIsIklOVCIsIlBPVyIsIkVEVSIsIlNhbml0eSIsIlNhbml0eU1heCIsIkhpdFB0cyIsIkhpdFB0c01heCIsIk1hZ2ljUHRzIiwiTWFnaWNQdHNNYXgiLCJMdWNrIiwiTW92ZSIsIkRhbWFnZUJvbnVzIiwiQnVpbGQiLCJPY2N1cGF0aW9uIiwiQWdlIiwiR2VuZGVyIiwiUmVzaWRlbmNlIiwiQmlydGhwbGFjZSIsImV4dHJhY3RTa2lsbHMiLCJTa2lsbHMiLCJTa2lsbCIsInBvc3Nlc2lvbnMiLCJleHRyYWN0UG9zc2Vzc2lvbnMiLCJQb3NzZXNzaW9ucyIsImRob2xlSG91c2Vza2lsbHMiLCJzdWJza2lsbCIsImhhbGYiLCJmaWZ0aCIsIm1ha2VTa2lsbE5hbWUiLCJnZXRFbWJlZGRlZENvbGxlY3Rpb24iLCJkaG9sZWhvdXNlUG9zc2Vzc2lvbnMiLCJkaG9sZWhvdXNlV2VhcG9ucyIsImlzQXJyYXkiLCJmaW5kV2VhcG9uU2tpbGxJZCIsInNraWxsbmFtZSIsIm1hbGYiLCJiYXNlNjRQb3J0cmFpdCIsImZpbGVOYW1lIiwiYmFzZTY0UmVzcG9uc2UiLCJmZXRjaCIsImltYWdlQmxvYiIsImJsb2IiLCJ1cGxvYWRUb0RlZmF1bHREaXJlY3RvcnkiLCJkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSIsImNhbiIsImNvbnZlcnREaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSIsIlBvcnRyYWl0Iiwic2F2ZVBvcnRyYWl0IiwiZXh0cmFjdFdlYXBvbnMiLCJXZWFwb25zIiwiQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2ciLCJpbXBvcnRUeXBlIiwiY29udmVydDZFIiwiY2FuVXBsb2FkIiwiZ2V0VHJhbnNsYXRpb25zIiwicGxhY2Vob2xkZXIiLCJnZXRFeGFtcGxlVGV4dCIsIl9vbkpTT05GaWxlU2VsZWN0ZWQiLCJjaGFyYWN0ZXJzVG9vRXh0ZW5kZWQiLCJqc29uRmlsZUlucHV0IiwiZ2V0RWxlbWVudEJ5SWQiLCJwb3J0cmFpdEltYWdlIiwiY2hhcmFjdGVyTmFtZSIsInByZXZpZXciLCJmaWxlcyIsImZpbGVSZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkIiwiY2hhcmFjdGVySlNPTiIsInBlcnNvbmFsRGV0YWlscyIsInRleHRDb250ZW50IiwicmVhZEFzVGV4dCIsImdldElucHV0cyIsImNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlIiwiYWN0b3JUeXBlIiwiaW1wb3J0QWN0b3IiLCJjcmVhdGVkQWN0b3IiLCJjcmVhdGVBY3RvciIsIm9uY2UiLCJEcm9wQ29DSUQiLCJyZXNwb25zZSIsInByb2Nlc3NGb3JtIiwibm8iLCJDb0M3T2NjdXBhdGlvblNoZWV0IiwiSXRlbVNoZWV0IiwiX29uSXRlbURlbGV0ZSIsIl9vbkdyb3VwSXRlbURlbGV0ZSIsIl9vbkdyb3VwQ29udHJvbCIsIkRyYWdEcm9wIiwiY2FsbGJhY2tzIiwiZHJvcCIsImNvbGxlY3Rpb25OYW1lIiwib3B0aW9uYWxTa2lsbCIsInVzZUNvQ0lEIiwicHJvY2Vzc0l0ZW0iLCJDb0NJZCIsIml0ZW1JbmRleCIsImhhc093bmVyIiwiaXNFbWJlZGRlZCIsIm9jY3VwYXRpb25Qb2ludHNTdHJpbmciLCJpdGVtUHJvcGVydGllcyIsIm9jY3VwYXRpb25Qcm9wZXJ0aWVzIiwiZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlIiwib3B0aW9ubmFsIiwibWFuZGF0b3J5IiwiY2FyYWMiLCJjYXJhY05hbWUiLCJvclN0cmluZyIsIkNvQzdJbnZlc3RpZ2F0b3JXaXphcmQiLCJwYWdlTGlzdCIsIlBBR0VfTk9ORSIsIlBBR0VfSU5UUk9EVUNUSU9OIiwiUEFHRV9DT05GSUdVUkFUSU9OIiwiUEFHRV9TRVRVUFMiLCJQQUdFX0FSQ0hFVFlQRVMiLCJQQUdFX0NIQVJBQ1RJU1RJQ1MiLCJQQUdFX0FUVFJJQlVURVMiLCJQQUdFX1ZJRVdfQVRUUklCVVRFUyIsIlBBR0VfT0NDVVBBVElPTlMiLCJQQUdFX09DQ1VQQVRJT05fU0tJTExTIiwiUEFHRV9BUkNIRVRZUEVfU0tJTExTIiwiUEFHRV9QT0lOVFNfU0tJTExTIiwiUEFHRV9JTlZFU1RJR0FUT1IiLCJQQUdFX0JBQ0tTVE9SWSIsIlBBR0VfQ1JFQVRFIiwiY2hhcmFjdGVyaXN0aWNzTWV0aG9kcyIsIk1FVEhPRF9ERUZBVUxUIiwiTUVUSE9EX1JPTEwiLCJNRVRIT0RfUE9JTlRTIiwiTUVUSE9EX1ZBTFVFUyIsImNvY2lkQ3JlZGl0UmF0aW5nIiwiY29jaWRMYW5ndWFnZU93biIsInBhZ2VPcmRlciIsInBhZ2VzIiwiZGVmYXVsdFNldHVwIiwic2hvd0xvYWRpbmciLCJyZWdleHAiLCJjYWNoZUNvQ0lEIiwiY29jaWRzIiwiZGVmYXVsdEVyYSIsImdldEFnZUFkanVzdG1lbnRzIiwic2V0dXBNb2RpZmllcnMiLCJyZXF1aXJlc0FnZUFkanVzdG1lbnRzIiwiZGVkdWN0Iiwic2V0dXAiLCJjYW5OZXh0IiwiY3JlYXRlQnV0dG9uIiwic2hvd01vbmV0YXJ5Iiwic3RlcCIsInNldHVwcyIsImZpbHRlckNhY2hlSXRlbUJ5Q29DSUQiLCJvY2N1cGF0aW9ucyIsImFyY2hldHlwZXMiLCJfZXJhcyIsImNoYXJhY3RlcmlzdGljc01ldGhvZCIsImVuZm9yY2VQb2ludEJ1eSIsInF1aWNrRmlyZVZhbHVlcyIsImhhc0FyY2hldHlwZXMiLCJjb3JlQ2hhcmFjdGVyaXN0aWMiLCJ0b0xvY2FsZVVwcGVyQ2FzZSIsInN1Z2dlc3RlZE9jY3VwYXRpb25zIiwic3VnZ2VzdGVkVHJhaXRzIiwiZ2V0Q2FjaGVJdGVtQnlDb0NJRCIsImVtcHRpZXMiLCJzZXR1cFBvaW50cyIsInB1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzIiwiZGVkdWN0VG90YWwiLCJkZWR1Y3RGcm9tIiwibiIsInJlZHVjZUZyb20iLCJsdWNrVmFsdWUiLCJza2lsbEl0ZW1zIiwibGFuZ3VhZ2VOYW1lIiwicm93cyIsImlzTXVsdGlwbGUiLCJpc0NyZWRpdFJhdGluZyIsImlzUGlja2FibGUiLCJpc09jY3VwYXRpb25EZWZhdWx0IiwiaW5PY2N1cGF0aW9uR3JvdXAiLCJvY2N1cGF0aW9uVG9nZ2xlIiwicGlja2VkIiwiZGVsZXRlYWJsZSIsImFyY2hldHlwZVRvZ2dsZSIsIm9jY3VwYXRpb25Hcm91cHMiLCJpc0FyY2hldHlwZURlZmF1bHQiLCJjcmVkaXRSYXRpbmdPa2F5IiwicmVtYWluaW5nIiwiZnJvbUNvQ0lEIiwidG90YWxQb2ludHMiLCJudW0iLCJpc09jY3VwYXRpb24iLCJpc0FyY2hldHlwZSIsInNob3dDcmVkaXRSYXRpbmciLCJhbGxCYWNrc3RvcmllcyIsImNhY2hlQmFja3N0b3JpZXMiLCJyb2xlIiwiVVNFUl9QRVJNSVNTSU9OUyIsIkFDVE9SX0NSRUFURSIsImRlZmF1bHRSb2xlIiwia2V5cHJlc3MiLCJzcmNFbGVtZW50IiwidGFnTmFtZSIsIndoaWNoIiwiY2hhckNvZGUiLCJfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25Sb2xsQWxsIiwiX29uUm9sbEVkdSIsIl9vblJvbGxMdWNrIiwiYmx1ciIsIl9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYyIsIl9vblRvZ2dsZVNraWxsIiwiX29uQ2xpY2tQaWNrU2tpbGwiLCJfb25DbGlja1NraWxsU3BlY2lhbCIsIl9vbkNsaWNrUmVtb3ZlU2tpbGwiLCJfb25DaGFuZ2VTa2lsbFBvaW50cyIsIl9vbkNoYW5nZUJhY2tzdG9yeVRleHQiLCJfb25Sb2xsQmFja3N0b3J5IiwiX29uUmVzZXRCYWNrc3RvcnkiLCJDSEFUX1RFTVBMQVRFIiwiZ2V0VG9vbHRpcCIsImFkZEl0ZW1Ub0xpc3QiLCJpbnZlc3RpZ2F0b3JJdGVtcyIsImlucGxhY2UiLCJjbGVhclNldHVwUG9pbnRzIiwicGxhY2VhYmxlIiwiZ20iLCJuYW1lQ3JlZGl0UmF0aW5nIiwiY2hhcmFjdGVyaXN0aWNLZXkiLCJkZXN0aW5hdGlvbiIsIm9rYXkiLCJ0ZW1wIiwicGFyZW50Tm9kZSIsInRvZ2dsZUtleSIsImd1ZXNzR3JvdXBGcm9tS2V5IiwiYWRqdXN0bWVudCIsInRleHRhcmVhIiwicm9sbHRhYmxlIiwidGFibGVSZXN1bHQiLCJyb2xsTWVzc2FnZSIsIm1vZGlmeU9mZnNldCIsIm1vZGlmeUNoYXJhY3RlcmlzdGljIiwicmVyb2xsc0VuYWJsZWQiLCJvYmpUb3RhbCIsImdldFBhZ2VOdW1iZXIiLCJkaXJlY3Rpb24iLCJjbGFzc05hbWUiLCJzZXRTa2lsbExpc3RzIiwiZGVmYXVsdE93bmVyc2hpcCIsInN0YXJ0ZWQiLCJub3ciLCJsb2FkQ2FjaGVJdGVtQnlDb0NJRCIsImJ1ZmZlciIsImRlZmF1bHRRdWFudGl0eSIsImZsYXRLZXlzIiwicGFnZU51bWJlciIsInNjcm9sbFRvcCIsImF0dGVtcHRUb0NyZWF0ZSIsIm5vcm1hbGl6ZUNoYXJhY3RlckRhdGEiLCJjcmVhdGVDaGFyYWN0ZXIiLCJrZWVwZXJzIiwibGlzdGVuZXIiLCJwYXlsb2FkIiwic291cmNlSXRlbSIsImF2YXRhciIsIlRPS0VOX0RJU1BPU0lUSU9OUyIsIkZSSUVORExZIiwiZnVuY3Rpb25JZCIsIm9mZiIsImNhY2hlSXRlbXMiLCJDb0M3TWVudUxheWVyIiwiUGxhY2VhYmxlc0xheWVyIiwib2JqZWN0cyIsImxheWVyT3B0aW9ucyIsInBsYWNlYWJsZXMiLCJDb0M3TWVudSIsImNvbnRyb2xzIiwiY29jN2dtdG9vbHMiLCJsYXllciIsInRvb2xzIiwib25DbGljayIsInRvZ2dsZURldlBoYXNlIiwidG9nZ2xlQ2hhckNyZWF0aW9uIiwidG9nZ2xlWFBHYWluIiwiZmFrZVJvbGxNZXNzYWdlIiwiZ2V0VGFyZ2V0IiwiY29jN0RldlRvb2xzIiwia2VlcGVyTWVudSIsImFmdGVyIiwiQ29DN0NhbnZhcyIsIkNPQzdfVFlQRVNfU1VQUE9SVEVEIiwiZ3JpZFNpemUiLCJkcm9wVGFyZ2V0VG9rZW5zIiwiYmV0d2VlbiIsIkNvQzdTZXR0aW5nc0RpcmVjdG9yeSIsIlNldHRpbmdzIiwibG9jYXRpb24iLCJDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSIsIkNvbXBlbmRpdW1EaXJlY3RvcnkiLCJ0cmFuc2xhdGVkIiwiYmFiZWxlIiwiQ29DN0FjdG9yRGlyZWN0b3J5IiwiQWN0b3JEaXJlY3RvcnkiLCJhbGxvd1dpemFyZCIsImFsbG93ZWQiLCJDb0M3U3BlbGwiLCJpc093bmVkIiwiY29zdHMiLCJsb3NzZXMiLCJjb252ZXJ0U3VycGx1c0ludG9IaXRQb2ludHMiLCJtYWdpY1BvaW50cyIsImNvbnZlcnRlZEhpdFBvaW50cyIsImNvbnZlcnRlZE1hZ2ljUG9pbnRzIiwiYWN0b3JNYWdpY1BvaW50cyIsIm9yaWdpbmFsTWFnaWNQb2ludHMiLCJoaXRQb2ludHMiLCJyZXNvbHZlTG9zc2VzIiwiZ3JhbnRTYW5pdHlMb3NzIiwiZ2V0SFRNTCIsInNhbml0eUxvc3MiLCJzYW5pdHlDaGVjayIsImJ5cGFzc1JvbGxTYW4iLCJib29rSWQiLCJib29rIiwiQ29DN0Jvb2siLCJsZWFybmVkIiwiaW5pdGlhbFJlYWRpbmciLCJmdWxsU3R1ZHkiLCJjb21wbGV0ZUZ1bGxTdHVkeSIsImNoZWNrRXhoYXVzdGlvbiIsImdyYW50RnVsbFN0dWR5IiwiYWN0b3JNeXRob3NWYWx1ZSIsImRldmVsb3BtZW50cyIsIm15dGhvc0ZpbmFsIiwiZ2FpbnMiLCJmaW5hbCIsImdyYW50U2tpbGxEZXZlbG9wbWVudCIsInJvbGxTYW5pdHlMb3NzIiwiZnVsbFN0dWRpZXMiLCJvdGhlcnMiLCJwYXR0ZXJuIiwic3BlbGxsZWFybmVkIiwiZXhpc3RpbmdTa2lsbCIsInNob3dEZXZlbG9wbWVudHNUYWJsZSIsImZyb21Sb2xsU3RyaW5nIiwiZ3JhbnRJbml0aWFsUmVhZGluZyIsImdyYW50U3BlbGxMZWFybmluZyIsIkVDQ19DTEFTUyIsIlBFUk1JU1NJT05fVFlQRSIsIlNUQVRFIiwiR01VcGRhdGUiLCJjYXJkQ2xhc3NOYW1lIiwiRW5oYW5jZWRDaGF0Q2FyZCIsImFkdmlzZSIsIkVuaGFuY2VkQ2hhdENhcmRMaWIiLCJ0eXBlcyIsImVuaGFuY2VkQ2hhdENhcmRzTGliIiwiY2FyZENvbnN0cnVjdG9ycyIsImNhcmRDb25zdHJ1Y3RvciIsInNldEJ5UGF0aCIsImdldEJ5UGF0aCIsIm9vYyIsImRlZXBDbG9uZSIsImF0dGFjaE9iamVjdCIsIm9iamVjdERhdGFTdHJpbmciLCJlY2NDbGFzcyIsImxvY2FsQ29tcHV0ZSIsIkV4ZWN1dGVHTVVwZGF0ZSIsIkVFQ19BQ1RJT04iLCJkZXRhY2hEYXRhIiwiX29uQ2hhbmdlIiwic2V0VmlzaWJpbGl0eSIsInNldFBlcm1pc3Npb24iLCJzZXRTdGF0ZSIsInNldFJhZGlvU3RhdGUiLCJzcGxpdGVkIiwiZWNjVmlzaWJpbGl0eSIsImhhc1Blcm0iLCJlY2NQZXJtaXNzaW9ucyIsInJlc3RyaWN0ZWRUbyIsInZpc2lvbiIsInBlcm1pc3Npb25zQXJyYXkiLCJ3aGl0ZUxpc3QiLCJpc0F1dGhvciIsIm5ld0RhdGEiLCJhc3NpZ25PYmplY3RzIiwiZm9ybVVwZGF0ZSIsImFjdGlvblVwZGF0ZSIsIm9yaWdpbmFsRGlzcGxheVN0eWxlIiwidXBkYXRlQ2FyZCIsInNhdmVEYXRhIiwiaHRtbWxDYXJkIiwiQ2FyZENsYXNzIiwidW5zZXREYXRhIiwidG9nZ2xlRGF0YSIsImJOYW1lIiwiX3BhcnRpY2lwYW50IiwiX2ZldGNoIiwiX2RvYyIsImlzQWN0b3IiLCJoYXNBY3RvciIsImhhc1ZlaGljbGUiLCJpc0FjdGl2ZSIsInZlaGljbGUiLCJkcml2ZXIiLCJfZHJpdmVyIiwidmVoaWNsZUtleSIsIl92ZWhpY2xlIiwiaGFzVmFsaWRNb3YiLCJoYXNNYXhCb251c0RpY2UiLCJhZGRCb251c0RpY2UiLCJyZW1vdmVCb251c0RpY2UiLCJyZXNldEJvbnVzRGljZSIsImhhc0JvbnVzRGljZSIsImhhc09uZUJvbnVzRGljZSIsImhhc1R3b0JvbnVzRGljZSIsImNhbkFzc2lzdCIsImFzc2lzdCIsImNhbkJlQ2F1dGlvdXMiLCJoYXNEcml2ZXIiLCJoYXNWYWxpZERleCIsImhhc0FHdW5SZWFkeSIsImluaXQiLCJpc0NoYXNlciIsImNoYXNlciIsImlzUHJleSIsImlzVmFsaWQiLCJtb3ZBZGp1c3RtZW50Iiwic3BlZWRDaGVjayIsInJvbGxEYXRhU3RyaW5nIiwiYWRqdXN0ZWRNb3YiLCJoYXNNb3ZBZGp1c3RtZW50IiwiaGFzQm9udXNNb3YiLCJoYXNNYWx1c01vdiIsInRvb1Nsb3ciLCJleGNsdWRlZCIsImluY2x1ZGVJbkNoYXNlIiwic2xvd2VzdCIsImZhc3Rlc3QiLCJjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMiLCJtaW5Nb3YiLCJtb3ZlbWVudEFjdGlvbiIsImN1cnJlbnRNb3ZlbWVudEFjdGlvbnMiLCJoYXNNYXhNdnRBY3Rpb25zIiwiaGFzTm9NdnRBY3Rpb25zIiwiYWRkTW92ZW1lbnRBY3Rpb25zIiwiYWx0ZXJNb3ZlbWVudEFjdGlvbnMiLCJtb3ZlbWVudEFjdGlvbkFycmF5IiwiYmFzZUFycmF5IiwiZmlsbCIsImlubGluZVJvbGwiLCJtb2RpZmllckNzcyIsImhhc09wdGlvbnMiLCJnYW1lSXRlbSIsInJlZiIsInJlZlNldCIsImlzQ2hhcmFjdGVyaXN0aWMiLCJjYW5CZVJvbGxlZCIsInNvcnRCeVJvbGVBbmREZXgiLCJDaGFzZU9ic3RhY2xlQ2FyZCIsInN0cmluZ3MiLCJ0b3RhbEFjdGlvbkNvc3QiLCJicmVha2FibGVPYnN0YWNsZSIsIm9ic3RhY2xlIiwiYmFycmllciIsImhhc0hpdFBvaW50cyIsInZhbGlkQ2hlY2siLCJzdGF0ZXMiLCJvYnN0YWNsZURlZmluZWQiLCJoYXphcmQiLCJ0cnlUb05lZ290aWF0ZSIsInRyeVRvQnJlYWsiLCJicmVha09yTmVnb3RpYXRlRGVmaW5lZCIsInBhcnRpY2lwYW50IiwiY2hhc2UiLCJnZXRBY3RvclNraWxsc0FuZENoYXJhY3RlcmlzdGljcyIsInBhcnRpY2lwYW50VXVpZCIsInZhbGlkU2tpbGwiLCJjaGVja1RocmVzaG9sZCIsImFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljcyIsImR1bW15QWN0b3IiLCJjYW5UYWtlQ2F1dGlvdXNBcHByb2FjaCIsImN1c3RvbVdlYXBvbiIsIndlYXBvbkNob2ljZSIsImNoZWNrUm9sbFJlcXVlc3QiLCJjYW5Bc2tSb2xsIiwiRW50ZXJWYWx1ZVRpdGxlIiwiZGFtYWdlU3RhdHVzIiwib2JzdGFjbGVEYW1hZ2VSb2xsIiwib2JzdGFjbGVEYW1hZ2VSb2xsZWQiLCJvYnN0YWNsZURhbWFnZSIsImlubGluZURhbWFnZVJvbGwiLCJ0b3RhbENhdXRpb3VzQXBwcm9hY2giLCJjYXV0aW91c1N0YXR1cyIsImNhdXRpb3VzQXBwcm9hY2hUeXBlIiwiY29uc3VtZUJvbnVzRGljZSIsIm1vdmVQbGF5ZXIiLCJvYnN0YWNsZVBhc3NlZCIsImNoZWNrRmFpbGVkIiwicGxheWVyQWN0aW9uRGVmaW5lZCIsInBsYXllckludGVudGlvbnMiLCJjaGVja1JvbGxlZCIsImNhcmRSZXNvbHZlZCIsInBsYXllckRhbWFnZVRha2VuIiwib2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCIsImxpc3RDaGFuZ2VzIiwiaGFzRGFtYWdlIiwiaW5saW5lRGFtYWdlVGFrZW5Sb2xsIiwiZmFpbGVkRGFtYWdlUm9sbCIsInRvdGFsUGxheWVyRGFtYWdlVGFrZW4iLCJoYXNBY3Rpb25Db3N0IiwiYWN0aW9uTG9zdCIsImlubGluZUFjdGlvbkxvc3RSb2xsIiwiZmFpbGVkQWN0aW9uUm9sbCIsImZpbmFsT3V0Y29tZSIsInRvdGFsRGFtYWdlIiwicmVmbGVjdE9ic3RhbGVDaGFuZ2VzIiwiZmFpbGVkQ29uc2VxdWVuY2VzUm9sbGVkIiwidG90YWxPYnN0YWNsZURhbWFnZSIsIm9ic3RhY2xlRGVzdG95ZWQiLCJIaXRQb2ludHMiLCJhY3RpdmVQYXJ0aWNpcGFudERhdGEiLCJvYnN0YWNsZURldGFpbHMiLCJwYXJ0aWNpcGFudERhdGEiLCJnZXRQYXJ0aWNpcGFudERhdGEiLCJnZXRMb2NhdGlvbkRhdGEiLCJsb2NhdGlvblV1aWQiLCJjaGFzZVV1aWQiLCJfY2hhc2UiLCJhY3RvclNraWxsIiwidmFsaWRGYWlsZWRSb2xscyIsImZhaWxlZENoZWNrRGFtYWdlIiwiYWN0aW9uQ29zdCIsImZhaWxlZEFjdGlvbkNvc3QiLCJ3ZWFwb25zT3B0aW9ucyIsIml0ZW1UeXBlcyIsInciLCJhaGJkIiwidW5zaGlmdCIsImN1c3RvbVdlYXBvbkRhbWFnZSIsInVzZWRXZWFwb24iLCJpbmZsaWN0ZWREYW1hZ2VGb3JtdWxhIiwidmFsaWRPYnN0YWNsZURhbWFnZSIsImRhbWFnZVJvbGxSZXF1ZXN0IiwibG9hY3Rpb25DaGFuZ2VkIiwicGFydGljaXBhbnRDaGFnZWQiLCJvYnN0YWNsZVVwZGF0ZSIsInBhcnRpY2lwYW50VXBkYXRlIiwiZGlmZiIsIm5ldyIsInJlbWFpbmluZ0hwIiwidGFyZ2V0TG9jYXRpb24iLCJmb3J3YXJkIiwiZ2V0TG9jYXRpb25TaGlmdCIsIm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24iLCJzY3JvbGxUb0xvY2F0aW9uIiwiYWN0aXZhdGVMb2NhdGlvbiIsInVwZGF0ZUxvY2F0aW9uIiwidXBkYXRlUGFydGljaXBhbnQiLCJhY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4iLCJjYW5jZWxPYnN0YWNsZURlZmluaXRpb24iLCJjcmVhdGVGcm9tQWN0b3JSb2xsRGF0YSIsIm5hbWVzIiwibmV3T2JzdGFjbGUiLCJvbGQiLCJDb0M3Q2hhc2UiLCJwYXJ0aWNpcGFudHMiLCJwTGlzdCIsInByZXlzIiwiY2hhc2VycyIsInBhcnRpY3BhbnQiLCJwYXJ0aWNpcGFudHNPYmplY3QiLCJnZXRQYXJ0aWNpcGFudExvY2F0aW9uIiwiYWN0aXZlQWN0b3IiLCJwYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92IiwiYWN0dWFsUGFydGljaXBhbnRzIiwicGFydGljaXBhbnRzQnlJbml0aWF0aXZlIiwiYWxsSGF2ZVZhbGlkTW92IiwiZXZlcnkiLCJhbGxIYXZlU3BlZWRSb2xsIiwibG9jYXRpb25zIiwibCIsImxwIiwiZ2V0UGFydGljaXBhbnQiLCJuZXh0QWN0aXZlUGFydGljaXBhbnQiLCJzbG93ZXN0UHJleSIsImZhc3Rlc3RDaGFzZXIiLCJpbmNsdWRlTGF0ZWNvbWVycyIsImluY2x1ZGVFc2NhcGVkIiwic2xvd2VzdFBhcnRpY2lwYW50IiwicGFydGljaXBhbnRzRGF0YSIsImNsZWFuUGFydGljaXBhbnRMaXN0IiwicGFydGljaWFudFV1aWQiLCJwYXJ0aWNpcGFudEluZGV4Iiwib3ZlcndyaXRlIiwidXBkYXRlUGFydGljaXBhbnRzIiwiYXNzaXN0YW50VXVpZCIsImJlbmVmaWNpYXJ5VXVpZCIsImFzc2lzdGFudCIsImJlbmVmaWNpYXJ5IiwiYXNzaXN0YW50SW5kZXgiLCJiZW5lZmljaWFyeUluZGV4IiwidXNlTW92ZW1lbnRBY3Rpb25zIiwiYWN0aW9ucyIsImRpY2VOdW1iZXIiLCJhY3RpdmVQYXJ0aWNpcGFudCIsImFjdGl2YXRlUGFydGljaXBhbnQiLCJkYXRhVXBkYXRlIiwiZ2V0QWN0aXZhdGVQYXJ0aWNpcGFudFVwZGF0ZURhdGEiLCJhY3RpdmVMb2NhdGlvbiIsInBVdWlkIiwicGFydGljaXBhbnRzRGF0YVVwZGF0ZSIsInBhcnRpY2lwYW50TG9jYXRpb24iLCJsb2NhdGlvbnNEYXRhVXBkYXRlIiwiZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEiLCJjaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uIiwiZ2V0Q2hhc2VUcmFja0xvY2F0aW9uU2Nyb2xsUG9zaXRpb24iLCJhY3RpdmVQYXJ0aWNpcGFudE9ic3RhY2xlQ2hlY2siLCJtb3ZlUGFydGljaXBhbnQiLCJyb2xsVXVpZCIsIm1ldGhvZCIsImluaXRUcmFjayIsInByb2Nlc3NMb2NhdGlvbnMiLCJkdXBsaWNhdGVEYXRhIiwiZmlyc3QiLCJsYXN0Iiwic3RhcnRpbmdMaW5lIiwibG9jYXRpb25zSW5kZXhTdGFydCIsImluaXRJbmRleFN0YXJ0IiwibG9jYXRpb25zTGVuZ3RoIiwic3RhcnRpbmdJbmRleCIsImdlbmVyYXRlTmV3VXVpZCIsImNoYXNlTG9jYXRpb25zIiwiZW5kIiwiY2hhc2VUcmFjayIsImNoYXNlcnNNaW5Nb3YiLCJmaW5kTWluTW92IiwiY2hhc2Vyc01heE1vdiIsImZpbmRNYXhNb3YiLCJwcmV5c01pbk1vdiIsInByZXlzTWF4TW92Iiwic3RhcnRpbmdSYW5nZSIsInVwZGF0ZWRMaXN0IiwiY2xlYW5Mb2NhdGlvbnNMaXN0IiwibG9jYXRpb25JbmRleCIsInVwZGF0ZUxvY2F0aW9uc0xpc3QiLCJwYXJ0aXBhbnRzVXVpZEFycmF5IiwiaW5zZXJ0QXRVdWlkIiwibmV3TG9jYXRpb25JbmRleCIsIm5ld0xvY2F0aW9uIiwibG9jRGF0YSIsImdldENsZWFyQWN0aXZlTG9jYXRpb25VcGRhdGVEYXRhIiwiaGFzUGFydGljaXBhbnQiLCJhY3RpdmVBY3Rvckhhc1NraWxsIiwiYWN0aXZlQWN0b3JUZXN0IiwicHJldmlvdXNMb2NhdGlvbiIsImFjdGl2ZUluZGV4IiwibmV4dExvY2F0aW9uIiwic2V0TG9jYXRpb25Db29yZGluYXRlcyIsImNvb3JkaW5hdGVzIiwiY2xlYXJMb2NhdGlvbkNvb3JkaW5hdGVzIiwic3RhcnQiLCJzZXRjaGFzZVRyYWNrU2Nyb2xsIiwic3RvcCIsImRlc3RpbmF0aW9uSW5kZXgiLCJuZXdQYXJ0aWNpcGFudHNEYXRhIiwibG9jYXRpb25zRGF0YSIsInVuaXF1ZSIsInJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zIiwibG9jYXRpb25Nb3ZlZCIsIm9yaWdpbkluZGV4IiwidG90YWxNb3ZlIiwib2xkUGFydGljaXBhbnRzTGlzdCIsIm1vdmVUb2tlbiIsInBhcnRpY3BhbnREb2N1bWVudCIsIlRva2VuRG9jdW1lbnQiLCJ2aWV3ZWQiLCJ0YXJnZXRSZWN0IiwiTm9ybWFsaXplZFJlY3RhbmdsZSIsImZvdW5kRnJlZVNwYWNlIiwib3ZlcmxhcGluZ1Rva2VuIiwiYm91bmRzIiwiaW50ZXJzZWN0cyIsInNob3dUb2tlbk1vdmVtZW50IiwiYW5pbWF0ZSIsInRvIiwiY2hhc2VUcmFja0FjdGl2ZUxvY2F0aW9uU2Nyb2xsUG9zaXRpb24iLCJhY3RpdmVMb2NhdGlvbkVsZW1lbnQiLCJsZWZ0U2Nyb2xsIiwib2Zmc2V0TGVmdCIsImNsaWVudFdpZHRoIiwicHJldiIsInJlbVN0cmluZyIsInJlbVNpemUiLCJwQ291bnQiLCJfdGFicyIsImFjdGl2ZUFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzIiwicGFydGljaWNwYW50RGF0YSIsIkludGwiLCJDb2xsYXRvciIsImNvbXBhcmUiLCJhbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NTaG9ydCIsIkNvQzdTa2lsbCIsIm5ld1Byb3BlcnRpZXMiLCJoYXNBY3RpdmVFZmZlY3RzIiwiYWN0aXZlRWZmZWN0cyIsImVmZmVjdEtleUZ1bGwiLCJlZmZlY3RLZXlTaG9ydCIsImRlbHRhIiwiZXhwIiwiQ29DN1ZlaGljbGUiLCJDb0M3RGVjYWRlckRpZSIsIkRpY2VUZXJtIiwidGVybURhdGEiLCJERU5PTUlOQVRJT04iLCJDb0M3RGVjYWRlckRpZU90aGVyIiwiU0VUVElOR1MiLCJwdWxwUnVsZXMiLCJpbml0aWF0aXZlUnVsZSIsImNob2ljZXMiLCJvbkNoYW5nZSIsInJ1bGUiLCJfc2V0SW5pdGlhdGl2ZU9wdGlvbnMiLCJwdWxwUnVsZURvdWJsZU1heEhlYWx0aCIsInB1bHBSdWxlVGFsZW50cyIsInB1bHBSdWxlRmFzdGVyUmVjb3ZlcnkiLCJwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzIiwib3Bwb3NlZFJvbGxUaWVCcmVha2VyIiwiZGVjaW1hbHMiLCJDb21iYXQiLCJDb0M3R2FtZVJ1bGVTZXR0aW5ncyIsInRydWUiLCJmYWxzZSIsInNldHRpbmciLCJwdWxwU2VsZWN0aW9uIiwicmVnaXN0ZXIiLCJvbkNoYW5nZVB1bHBTZWxlY3QiLCJvbkNsaWNrUHVscCIsIm9uUmVzZXREZWZhdWx0cyIsImNoZWNrYm94IiwiQ29DN0FyY2hldHlwZVNoZWV0IiwiY2hhcmFjTmFtZSIsImVucmljaGVkU3VnZ2VzdGVkT2NjdXBhdGlvbnMiLCJlbnJpY2hlZFN1Z2dlc3RlZFRyYWl0cyIsImNvcmVDaGFyYWN0ZXJpc3RpY3NTdHJpbmciLCJDb0M3Qm9va1NoZWV0Iiwic3BlbGxzTGVhcm5lZCIsImV4aGF1c3RlZCIsInN0dWR5Q29tcGxldGVkIiwic3BlbGxMaXN0RW1wdHkiLCJlbnJpY2hlZENvbnRlbnQiLCJhdHRlbXB0SW5pdGlhbFJlYWRpbmciLCJfb25EZWxldGUiLCJfb25TcGVsbERldGFpbCIsImF0dGVtcHRTcGVsbExlYXJuaW5nIiwiY2hhbmdlUHJvZ3Jlc3MiLCJtb2RpZnlPdGhlcnNHYWlucyIsInJlZG9GdWxsU3R1ZHkiLCJtb2RpZnlUeXBlIiwic3BlbGxEZXRhaWwiLCJhZGRTcGVsbHMiLCJDb0M3Q29udGFpbmVyU2hlZXQiLCJzbGlkZVRvZ2dsZSIsIkNvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIiLCJwZXJtaXNzaW9ucyIsIl9vbkRyb3BQYXJ0aWNpcGFudCIsIl9vbkFjdGlvbiIsInZhbGlkYXRlUGFydGljaXBhbnQiLCJzcGVlZENoZWNrUmVhZE9ubHkiLCJpbml0UmVhZE9ubHkiLCJvcHRpb25zTGlzdCIsInNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QiLCJkcm9wU3RyaW5nIiwiZ2V0QWN0b3JEb2N1bWVudEZyb21Ecm9wRGF0YSIsIm92ZXJyaWRlTW92ZW1lbnRBY3Rpb24iLCJyZWNhbGN1bGF0aW9uTmVlZGVkIiwiYWRkUGFydGljaXBhbnQiLCJwYXJ0aWNpcGFudEV4Y2x1ZGVkIiwibW92ZW1lbnRBY3Rpb25EZWx0YSIsImluY2x1ZGVMYXN0Q29tbWVycyIsImV4Y2x1ZGVkQmVjYXVzZSIsIkNvQzdDaGFzZVNoZWV0IiwiY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzIiwiX29uRHJhZ0VudGVyUGFydGljaXBhbnQiLCJfb25EcmFnTGVhdmVQYXJ0aWNpcGFudCIsIl9vbkNoYW5nZVNpZGUiLCJfb25EZWxldGVQYXJ0aWNpcGFudCIsIl9vblJlc2V0Um9sbCIsIl9vbkRlbGV0ZURyaXZlciIsIl9vbkFkZFBhcnRpY2lwYW50IiwiX29uUm9sbFBhcnRpY2lwYW50IiwiX29uTG9jYXRpb25DbGljayIsIl9vbk9ic3RhY2xlVHlwZUNsaWNrIiwiX29uUGFydGljaXBhbnRDb250cm9sQ2xpY2tlZCIsIl9vbkNoYXNlQ29udHJvbENsaWNrZWQiLCJfb25Mb2NhdGlvbkNvbnRyb2xDbGljayIsImRyYWdzdGFydCIsIl9jYW5QaW5Mb2NhdGlvbkRyYWdTdGFydCIsIl9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0IiwiX29uQ2hhc2VQYXJ0aWNpcGFudENsaWNrIiwiX2NhbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQiLCJfY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wIiwiX29uQ2hhc2VQYXJ0aWNpcGFudERyYWdTdGFydCIsIl9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCIsImRyYWdvdmVyIiwiX29uRHJhZ0VudGVyIiwiX29uRHJhZ0xlYXZlIiwiX2dldFN1Ym1pdERhdGEiLCJlZGl0b3JzIiwiY2xlYW5lZCIsImNsZWFuIiwib3JpZ2luYWxMb2NhdGlvbiIsInN1YlR5cGUiLCJmaW5kUGFydGljaXBhbnRJbmRleCIsImluaXRpYWxPcGVuaW5nIiwic2Nyb2xsIiwiYWN0aXZhdGVUYWIiLCJzY3JvbGxUbyIsImJlaGF2aW9yIiwiZmluZExvY2F0aW9uSW5kZXgiLCJmaW5kTG9jYXRpb24iLCJhc3Npc3RQYXJ0aWNpcGFudCIsImxVdWlkIiwicmVtb3ZlTG9jYXRpb24iLCJpbnNlcnRMb2NhdGlvbiIsInRvZ2dsZVBhcnRpY2lwYW50R3VuIiwiX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zIiwidG9nZ2xlQm9udXNEaWNlIiwiY2F1dGlvdXNBcHByb2FjaCIsInJlbW92ZVBhcnRpY2lwYW50IiwiY3V0VG9UaGVDaGFzZSIsInJlc3RhcnQiLCJwcm9ncmVzc1RvTmV4dFJvdW5kIiwic2VsZWN0b3IiLCJkcmFnSWNvbiIsInNldERyYWdJbWFnZSIsImxvY2F0aW9uRWxlbWVudCIsImNhbGxCYWNrIiwiZHJhZ0V2ZW50Iiwib2xkTG9jYXRpb24iLCJfb25EcmFnT3ZlciIsImFsdGVyUGFydGljaXBhbnQiLCJzdGFuZGJ5VGV4dCIsInN0YW5kYnlSaWdodEljb24iLCJvbGRQYXJ0aWNpcGFudCIsInRwIiwiZ2V0VHlwZSIsIkNvQzdJdGVtU2hlZXRWMiIsIkNvQzdJdGVtU2hlZXQiLCJDb0M3Sm91cm5hbFNoZWV0IiwiSm91cm5hbFNoZWV0IiwiQ29DN01hY3JvQ29uZmlnIiwiTWFjcm9Db25maWciLCJDb0M3UGxheWxpc3RDb25maWciLCJQbGF5bGlzdENvbmZpZyIsIkNvQzdSb2xsVGFibGVDb25maWciLCJSb2xsVGFibGVDb25maWciLCJDb0M3U2NlbmVDb25maWciLCJTY2VuZUNvbmZpZyIsIkNvQzdTZXR1cFNoZWV0IiwiX29uQWRkQmlvIiwiX29uUmVtb3ZlU2VjdGlvbiIsIm90aGVySXRlbXMiLCJpdGVtc0xpc3RFbXB0eSIsIkNvQzdTa2lsbFNoZWV0IiwiX3NoZWV0VGFiIiwiaGFkTm9uQ2hhcmFjdGVyT3duZXIiLCJpc1NwZWNpYWxpemVkIiwiY2FuTW9kaWZ5U3BlYyIsIkNvQzdTcGVsbFNoZWV0IiwiY2FzdCIsIkNvQzdTdGF0dXNTaGVldCIsInN0YXR1c1R5cGUiLCJlbnJpY2hlZERlc2NyaXB0aW9uTm90ZXMiLCJDb0M3VGFsZW50U2hlZXQiLCJ0YWxlbnRUeXBlIiwiQ29DN1ZlaGljbGVTaGVldCIsImFybWVkIiwiX29uQWRkQXJtb3IiLCJfb25SZW1vdmVBcm1vciIsIl9vblRvZ2dsZUV4cGFuZCIsIm9sZFNpemUiLCJDb0M3V2VhcG9uU2hlZXQiLCJjb21iYXRTa2lsbCIsInByaWNlIiwiZW5yaWNoZWREZXNjcmlwdGlvblNwZWNpYWwiLCJfb25Qcm9wZXJ0eUNsaWNrIiwicGVyZm9ybUZpbHRlciIsImFwcElkIiwiZXJhRWxlbWVudCIsIm5hbWVGaWx0ZXIiLCJDb0NJRCIsImNvbXBlbmRpdW1JbmRleEZpZWxkcyIsIkpvdXJuYWxFbnRyeSIsIlBsYXlsaXN0IiwiUm9sbFRhYmxlIiwiU2NlbmUiLCJnYW1lUHJvcGVydHlMb29rdXAiLCJkb2N1bWVudE5hbWVMb29rdXAiLCJtYWtlR3JvdXBSZWdFeCIsImxhbmdGYWxsYmFjayIsIm5vdG1pc3NpbmciLCJlcmFUZXh0Iiwic3BsaXRzIiwicmVnRXhQYXJ0cyIsImRvY3VtZW50c0Zyb21Xb3JsZCIsInByb2dyZXNzQmFyIiwiU2NlbmVOYXZpZ2F0aW9uIiwiZGlzcGxheVByb2dyZXNzQmFyIiwicGN0IiwiZmlsdGVyQWxsQ29DSUQiLCJjb21wZW5kaWFEb2N1bWVudHMiLCJkb2N1bWVudHNGcm9tQ29tcGVuZGlhIiwiZnJvbUNvQ0lEUmVnZXhBbGwiLCJhbGxEb2N1bWVudHMiLCJmaWx0ZXJCZXN0Q29DSUQiLCJmcm9tQ29DSURCZXN0IiwiYmVzdE1hdGNoRG9jdW1lbnRzIiwiZG9jQ29DSUQiLCJjdXJyZW50RXhpc3RzIiwiZG9jTGFuZyIsImV4aXN0aW5nTGFuZyIsInByZWZlckxhbmciLCJkb2NQYWNrIiwiZXhpc3RpbmdQYWNrIiwicHJlZmVyV29ybGQiLCJkb2NQcmlvcml0eSIsImV4aXN0aW5nUHJpb3JpdHkiLCJNSU5fU0FGRV9JTlRFR0VSIiwiZG9jRXJhcyIsImdhbWVQcm9wZXJ0eSIsImdldEdhbWVQcm9wZXJ0eSIsImNhbmRpZGF0ZURvY3VtZW50cyIsIm1hdGNoaW5nRXJhcyIsImNvbXBhcmVDb0NJRFByaW8iLCJnZXREb2N1bWVudFR5cGUiLCJzY2hlbWEiLCJpbmRleGVkIiwiZ2V0SW5kZXgiLCJpbmRleEluc3RhbmNlcyIsImplIiwicnQiLCJDYXJkIiwibGlzdGVuIiwibG9hZFRlbXBsYXRlcyIsInByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzIiwicmVnaXN0ZXJNZW51IiwicmVzdHJpY3RlZCIsInJlZ2lzdGVyU2V0dGluZ3MiLCJEZWZhdWx0RGlyZWN0b3J5Iiwid29ybGQiLCJZIiwiTiIsIm5vYm9keSIsImV2ZXJ5b25lIiwiYWx3YXlzIiwiY3JlYXRpb24iLCJuZXZlciIsIl9zZXRSb290Rm9udFNpemUiLCJzaWRlYmFyIiwid2luZG93cyIsImNvbnRhaW4iLCJob29rcyIsIkFjdG9ycyIsInVucmVnaXN0ZXJTaGVldCIsInJlZ2lzdGVyU2hlZXQiLCJtYWtlRGVmYXVsdCIsIkl0ZW1zIiwiU2NlbmVzIiwiSm91cm5hbCIsIlJvbGxUYWJsZXMiLCJNYWNyb3MiLCJQbGF5bGlzdHMiLCJIYW5kbGViYXJzIiwicmVnaXN0ZXJIZWxwZXIiLCJTZXQiLCJ1bmNvbW1vbiIsImNvbXBlbmRpdW1GaWx0ZXIiLCJDb0M3RGVjYWRlckRTTkZhY2VzIiwiY29uc3RydXRvciIsInNldEZhY2VzIiwiZ2xvYmFsIiwic291cmNlRGllIiwiRGljZUZhY3RvcnkiLCJzeXN0ZW1zIiwiaGVpZ2h0VGV4dCIsImhlaWdodFRpcCIsIndpZHRoVGlwIiwiY2xlYXJUaW1lb3V0IiwiQ29DN1RvdXIiLCJUb3VyIiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsIm9ic2VydmVyIiwiZGlzY29ubmVjdCIsIm9ic2VydmUiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwiX3ByZVN0ZXAiLCJzdGVwSW5kZXgiLCJ3YWl0Rm9yRWxlbWVudCIsImN1cnJlbnRTdGVwIiwiX3Bvc3RTdGVwIiwiaGFzTmV4dCIsImlzUmVzZXR0aW5nIiwicmVzZXQiLCJFbmFibGVWYXJpYW50UnVsZXNFbiIsImNhbkJlUmVzdW1lZCIsInN0ZXBzIiwibG9jYWxpemF0aW9uIiwiRW5hYmxlVmFyaWFudFJ1bGVzRnIiLCJpbnN0cnVjdGlvbnNWZXJzaW9uIiwicmVhZE1lIiwidG91cnMiLCJ0b3VyTmFtZSIsInJlZ2lzdGVyVG91cnMiLCJDb0M3SG9va3MiLCJyZW5kZXJNZXNzYWdlSG9vayIsInJlbmRlckNoYXRNZXNzYWdlSG9vayIsIlBhcnNlTWVzc2FnZSIsImVudGl0eUNyZWF0ZVNlbGVjdFRhZyIsImVudGl0eVNvcnRlZExpc3QiLCJzaG93RXhwZXJpbWVudGFsIiwiZW50aXR5T3B0aW9uIiwiY2FwaXRhbGl6ZSIsImVtcHR5Iiwic2Vjb25kIiwiYWRkRGljZVByZXNldCIsImZvbnRTY2FsZSIsInBsYXllckxpc3QiLCJpbnNlcnRBZnRlciIsInByb2Nlc3NIdG1sIiwiZ21jcmVhdGVtZXNzYWdlYXMiLCJtZWxlZVRhcmdldCIsImdtdHJhZGVpdGVtdG8iLCJDb0M3U3lzdGVtU29ja2V0IiwiY3JlYXRlQ2hhcmFjdGVyRnJvbURhdGEiLCJjYWxsU29ja2V0IiwidXNlcklkIiwiZXJyb3JJZk1pc3NpbmciLCJpbmNsdWRlU2VsZiIsIl9vbkxlZnRDbGljayIsInN5c3RlbVRhYiIsImJlZm9yZSIsInNraWxsQ2hlY2tNYWNybyIsIndlYXBvbkNoZWNrTWFjcm8iLCJjaGVja01hY3JvIiwiY2FyZGNsYXNzIiwiaW5qZWN0Q1NTIiwic29ja2V0bGliIiwicmVnaXN0ZXJTeXN0ZW0iLCJpbml0RUNDIiwicmVuZGVyQ29tYmF0VHJhY2tlciIsImNvbW1hbmRzIiwicmVzIiwidG9Mb2NhbGl6ZSIsImxvY2FsaXplZCIsImVmZmVjdEluZGV4IiwiZGlyZWN0b3J5IiwiSXRlbURpcmVjdG9yeSIsIml0ZW1FbGVtZW50IiwiY3JlYXRlTWFjcm8iLCJjaGF0TGlzdGVuZXJzIiwib25VcGRhdGVDaGF0TWVzc2FnZSIsIl90YWJsZVNldHRpbmdzQ2hhbmdlZCIsImNoZWNrRm9yVXBkYXRlIiwiX29uQ2xpY2tJbmxpbmVSb2xsIiwiYWN0aXZhdGVHbG9iYWxMaXN0ZW5lciIsInRhYmxlQ2hvaWNlIiwiYm91dE9mTWFkbmVzc19TdW1tYXJ5IiwiYm91dE9mTWFkbmVzc19SZWFsVGltZSIsInNldFNjcm9sbCIsIm9uQ2xvc2UiLCJjaGFyYWN0ZXJTaGVldCIsIlBhcnNlQ2hhdEVudHJ5IiwiUGFyc2VTaGVldENvbnRlbnQiLCJnZXRCdXR0b25zIiwicmVuZGVyQ29udHJvbHMiLCJvbkRyb3BTb21ldGhpbmciXSwic291cmNlUm9vdCI6IiJ9